From a.neumann at carto.net  Tue Mar  1 00:43:19 2022
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 01 Mar 2022 09:43:19 +0100
Subject: [QGIS-Developer] Merge tool always creating a new feature id
 instead of preserving the existing one
Message-ID: <238ccd9c14f8f491234206191f9edbf1@carto.net>

Hi,

We have a problem with the merge tool.

We have a relatively complex data model with lots of relations. We want 
to use the merge tool with this data.

The merge tool allows to carefully choose which attributes should end up 
in the merged feature. This works fine, except for the feature ID.

QGIS stubbornly insists on having to create a new feature ID after the 
merge - and is not reusing the feature ID of the original feature we 
selected as the "master" feature in the merge tool.

This is a huge problem - because after the merge we loose all relations, 
because the feature ID has changed.

Do you know any work around? Would we be able to fix this behaviour in a 
future QGIS release?

Thanks for the discussion,

Andreas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220301/ca42cbc8/attachment.html>

From senhor.neto at gmail.com  Tue Mar  1 01:16:32 2022
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Tue, 1 Mar 2022 09:16:32 +0000
Subject: [QGIS-Developer] Merge tool always creating a new feature id
 instead of preserving the existing one
In-Reply-To: <238ccd9c14f8f491234206191f9edbf1@carto.net>
References: <238ccd9c14f8f491234206191f9edbf1@carto.net>
Message-ID: <CA+H0G_ETQx=54hH=YqMDn_PJoXH0bRLuNNTB0Mo27CcJKn3Srg@mail.gmail.com>

I believe that comes from the geopackage fid limitations. For that reason,
I never use the fid field as an actual id. That's my workaround.

Alexandre Neto

A ter?a, 1/03/2022, 08:44, Andreas Neumann <a.neumann at carto.net> escreveu:

> Hi,
>
> We have a problem with the merge tool.
>
> We have a relatively complex data model with lots of relations. We want to
> use the merge tool with this data.
>
> The merge tool allows to carefully choose which attributes should end up
> in the merged feature. This works fine, except for the feature ID.
>
> QGIS stubbornly insists on having to create a new feature ID after the
> merge - and is not reusing the feature ID of the original feature we
> selected as the "master" feature in the merge tool.
>
> This is a huge problem - because after the merge we loose all relations,
> because the feature ID has changed.
>
> Do you know any work around? Would we be able to fix this behaviour in a
> future QGIS release?
>
> Thanks for the discussion,
>
> Andreas
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220301/1083d7ef/attachment.html>

From a.neumann at carto.net  Tue Mar  1 01:24:52 2022
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 01 Mar 2022 10:24:52 +0100
Subject: [QGIS-Developer] Merge tool always creating a new feature id
 instead of preserving the existing one
In-Reply-To: <CA+H0G_ETQx=54hH=YqMDn_PJoXH0bRLuNNTB0Mo27CcJKn3Srg@mail.gmail.com>
References: <238ccd9c14f8f491234206191f9edbf1@carto.net>
 <CA+H0G_ETQx=54hH=YqMDn_PJoXH0bRLuNNTB0Mo27CcJKn3Srg@mail.gmail.com>
Message-ID: <42894cabc53b512314fcde39495e36fd@carto.net>

Hi Alex,

Thank you for your reply.

In my case, the data resides in Postgis, not in Geopackage.

But if I understand you correctly, then Geopackage imposes it's limit on 
QGIS in general, aka other providers as well - right?

Thanks,
Andreas

On 2022-03-01 10:16, Alexandre Neto wrote:

> I believe that comes from the geopackage fid limitations. For that 
> reason, I never use the fid field as an actual id. That's my 
> workaround.
> 
> Alexandre Neto
> 
> A ter?a, 1/03/2022, 08:44, Andreas Neumann <a.neumann at carto.net> 
> escreveu:
> 
>> Hi,
>> 
>> We have a problem with the merge tool.
>> 
>> We have a relatively complex data model with lots of relations. We 
>> want to use the merge tool with this data.
>> 
>> The merge tool allows to carefully choose which attributes should end 
>> up in the merged feature. This works fine, except for the feature ID.
>> 
>> QGIS stubbornly insists on having to create a new feature ID after the 
>> merge - and is not reusing the feature ID of the original feature we 
>> selected as the "master" feature in the merge tool.
>> 
>> This is a huge problem - because after the merge we loose all 
>> relations, because the feature ID has changed.
>> 
>> Do you know any work around? Would we be able to fix this behaviour in 
>> a future QGIS release?
>> 
>> Thanks for the discussion,
>> 
>> Andreas _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220301/56fee2f5/attachment-0001.html>

From senhor.neto at gmail.com  Tue Mar  1 01:36:27 2022
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Tue, 1 Mar 2022 09:36:27 +0000
Subject: [QGIS-Developer] Merge tool always creating a new feature id
 instead of preserving the existing one
In-Reply-To: <42894cabc53b512314fcde39495e36fd@carto.net>
References: <238ccd9c14f8f491234206191f9edbf1@carto.net>
 <CA+H0G_ETQx=54hH=YqMDn_PJoXH0bRLuNNTB0Mo27CcJKn3Srg@mail.gmail.com>
 <42894cabc53b512314fcde39495e36fd@carto.net>
Message-ID: <CA+H0G_Gody8Jx+M5r7HbD5ko_0W6b-CDtpEz+n5SgHrWnxr10Q@mail.gmail.com>

I would consider that a bug then, but I can't remember if I ever used merge
tool on PostGIS tables directly. I believe NaturalGIS has some processing
tools that work in PostGIS backend, but can't remember if merge is
available.

Alexandre

A ter?a, 1/03/2022, 09:24, Andreas Neumann <a.neumann at carto.net> escreveu:

> Hi Alex,
>
> Thank you for your reply.
>
> In my case, the data resides in Postgis, not in Geopackage.
>
> But if I understand you correctly, then Geopackage imposes it's limit on
> QGIS in general, aka other providers as well - right?
>
> Thanks,
> Andreas
>
> On 2022-03-01 10:16, Alexandre Neto wrote:
>
> I believe that comes from the geopackage fid limitations. For that reason,
> I never use the fid field as an actual id. That's my workaround.
>
> Alexandre Neto
>
> A ter?a, 1/03/2022, 08:44, Andreas Neumann <a.neumann at carto.net> escreveu:
>
> Hi,
>
> We have a problem with the merge tool.
>
> We have a relatively complex data model with lots of relations. We want to
> use the merge tool with this data.
>
> The merge tool allows to carefully choose which attributes should end up
> in the merged feature. This works fine, except for the feature ID.
>
> QGIS stubbornly insists on having to create a new feature ID after the
> merge - and is not reusing the feature ID of the original feature we
> selected as the "master" feature in the merge tool.
>
> This is a huge problem - because after the merge we loose all relations,
> because the feature ID has changed.
>
> Do you know any work around? Would we be able to fix this behaviour in a
> future QGIS release?
>
> Thanks for the discussion,
>
> Andreas
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220301/20e55a2f/attachment.html>

From manisandro at gmail.com  Tue Mar  1 04:39:17 2022
From: manisandro at gmail.com (Sandro Mani)
Date: Tue, 1 Mar 2022 13:39:17 +0100
Subject: [QGIS-Developer] MingW builds not enforced on Github actions
In-Reply-To: <CAMtsY+beCWzN9ZTFLy-n80WYqiwuL25dFbj7n8kS4vKHaRXs=g@mail.gmail.com>
References: <CAMtsY+beCWzN9ZTFLy-n80WYqiwuL25dFbj7n8kS4vKHaRXs=g@mail.gmail.com>
Message-ID: <f9f1755d-7933-ca2e-91a5-7bf06e5bacfa@gmail.com>


On 28.02.22 21:29, Denis Rouzaud wrote:
> Hi all,
>
> Since the MingW builds were all failing lately on Github actions, I 
> have removed the requirement for this build for the PRs.

FWIW, should now be fixed. I just did some major packaging work to 
reduce the maintenance burden, and one issue with mingw-python3 slipped 
through. In any case, feel free to just ping me when the builds fail, 
I'm usually pretty responsive... Or is there a way to get notified when 
a pipeline starts failing?

Sandro


From adenaculture at gmail.com  Tue Mar  1 08:18:20 2022
From: adenaculture at gmail.com (C Hamilton)
Date: Tue, 1 Mar 2022 16:18:20 +0000
Subject: [QGIS-Developer] More control over processing dialog boxes
Message-ID: <CABPxTTpzB5o8wt_htw5S3=6uBwPEc7r5vU=WGutVnmiQgbKJQQ@mail.gmail.com>

I am in need of configuring Processing Algorithm dialog boxes a little more
and I can't quite figure out how to do it.

1. I need two radio buttons displayed horizontally with the descriptive
label on top. This is done in the "Export mesh on grid" algorithm, but I
can't seem to figure out how to do it.

2. I need the ability to have a drop down like Advanced parameters, but
instead call it "Filter parameters" and perhaps a second one would be
titled "Advanced parameters."

Can these be done in a processing algorithm dialog and if so how?

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220301/0f80d25c/attachment.html>

From enricofer at gmail.com  Wed Mar  2 04:52:51 2022
From: enricofer at gmail.com (Enrico Ferreguti)
Date: Wed, 2 Mar 2022 13:52:51 +0100
Subject: [QGIS-Developer] WFS3 API POST PUT Methods
Message-ID: <CAJy=XtcQoangkzsQhdPBq_r9BR0u05f7PJKD3+g_OcMeij_J7g@mail.gmail.com>

Hi QGIS devs,
I'm testing the API REST interface for updating a WFS3 and I verified that
the new/modified feature had to be expressed in geojson format in EPSG:4326
coordinates regardless of the SRID of the served layer. I verified the
behaviour with QGIS server 3.16 LTR and latest 3.22

Is this an issue or a feature due to compliance to OGC or RFC7946 standards?

Anyway I found this behaviour very uncomfortable because it obliges to
perform preliminarly unaccurate reprojections from javascript/python
clients.

Best regards.
Enrico Ferreguti.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220302/cbc3fe5e/attachment.html>

From apasotti at gmail.com  Wed Mar  2 09:09:16 2022
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Wed, 2 Mar 2022 18:09:16 +0100
Subject: [QGIS-Developer] WFS3 API POST PUT Methods
In-Reply-To: <CAJy=XtcQoangkzsQhdPBq_r9BR0u05f7PJKD3+g_OcMeij_J7g@mail.gmail.com>
References: <CAJy=XtcQoangkzsQhdPBq_r9BR0u05f7PJKD3+g_OcMeij_J7g@mail.gmail.com>
Message-ID: <CAL5Q673MOd=biyKH4exxRopEsx8OZJZ5ht5FdnY9=tWU70b70Q@mail.gmail.com>

Enrico,

We only accept 4326 currently.

I think we could be more tolerant if the OAPIF extensions allows it, we
currently allow GET with other CRSs but POST/PUT/PATCH are not implemented
to handle different CRSs.

Kind Regards


On Wed, Mar 2, 2022 at 1:53 PM Enrico Ferreguti <enricofer at gmail.com> wrote:

> Hi QGIS devs,
> I'm testing the API REST interface for updating a WFS3 and I verified that
> the new/modified feature had to be expressed in geojson format in EPSG:4326
> coordinates regardless of the SRID of the served layer. I verified the
> behaviour with QGIS server 3.16 LTR and latest 3.22
>
> Is this an issue or a feature due to compliance to OGC or RFC7946
> standards?
>
> Anyway I found this behaviour very uncomfortable because it obliges to
> perform preliminarly unaccurate reprojections from javascript/python
> clients.
>
> Best regards.
> Enrico Ferreguti.
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220302/f94240c8/attachment.html>

From carlo.bertelli at gmail.com  Wed Mar  2 09:32:55 2022
From: carlo.bertelli at gmail.com (Carlo A. Bertelli (Charta s.r.l.))
Date: Wed, 2 Mar 2022 18:32:55 +0100
Subject: [QGIS-Developer] WFS3 API POST PUT Methods
In-Reply-To: <CAL5Q673MOd=biyKH4exxRopEsx8OZJZ5ht5FdnY9=tWU70b70Q@mail.gmail.com>
References: <CAJy=XtcQoangkzsQhdPBq_r9BR0u05f7PJKD3+g_OcMeij_J7g@mail.gmail.com>
 <CAL5Q673MOd=biyKH4exxRopEsx8OZJZ5ht5FdnY9=tWU70b70Q@mail.gmail.com>
Message-ID: <CALc8-V+vKua0ss53QA2gCNgtEnCrakV4Zrjobg8XTMV6fs-vyg@mail.gmail.com>

The GeoJSON Specification (RFC 7946) mandates the use of WGS84:

The coordinate reference system for all GeoJSON coordinates is a
> geographic coordinate reference system, using the World Geodetic
> System 1984 (WGS 84) [WGS84
> <https://datatracker.ietf.org/doc/html/rfc7946#ref-WGS84>] datum, with
> longitude and latitude units
> of decimal degrees.

(chapter 4)

OAPIF can use GeoJSON (very often) and in this case using another reference
system is not allowed, but it can also use GML level 0 or level 2 and in
these cases there is no limit to what CRS you can use.


On Wed, Mar 2, 2022 at 6:09 PM Alessandro Pasotti <apasotti at gmail.com>
wrote:

>
> Enrico,
>
> We only accept 4326 currently.
>
> I think we could be more tolerant if the OAPIF extensions allows it, we
> currently allow GET with other CRSs but POST/PUT/PATCH are not implemented
> to handle different CRSs.
>
> Kind Regards
>
>
> On Wed, Mar 2, 2022 at 1:53 PM Enrico Ferreguti <enricofer at gmail.com>
> wrote:
>
>> Hi QGIS devs,
>> I'm testing the API REST interface for updating a WFS3 and I verified
>> that the new/modified feature had to be expressed in geojson format in
>> EPSG:4326 coordinates regardless of the SRID of the served layer. I
>> verified the behaviour with QGIS server 3.16 LTR and latest 3.22
>>
>> Is this an issue or a feature due to compliance to OGC or RFC7946
>> standards?
>>
>> Anyway I found this behaviour very uncomfortable because it obliges to
>> perform preliminarly unaccurate reprojections from javascript/python
>> clients.
>>
>> Best regards.
>> Enrico Ferreguti.
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220302/b14c8d51/attachment.html>

From gdt at lexort.com  Wed Mar  2 12:22:02 2022
From: gdt at lexort.com (Greg Troxel)
Date: Wed, 02 Mar 2022 15:22:02 -0500
Subject: [QGIS-Developer] WFS3 API POST PUT Methods
In-Reply-To: <CALc8-V+vKua0ss53QA2gCNgtEnCrakV4Zrjobg8XTMV6fs-vyg@mail.gmail.com>
 (Carlo A. Bertelli's message of "Wed, 2 Mar 2022 18:32:55 +0100")
References: <CAJy=XtcQoangkzsQhdPBq_r9BR0u05f7PJKD3+g_OcMeij_J7g@mail.gmail.com>
 <CAL5Q673MOd=biyKH4exxRopEsx8OZJZ5ht5FdnY9=tWU70b70Q@mail.gmail.com>
 <CALc8-V+vKua0ss53QA2gCNgtEnCrakV4Zrjobg8XTMV6fs-vyg@mail.gmail.com>
Message-ID: <rmi7d9crtp1.fsf@s1.lexort.com>


"Carlo A. Bertelli (Charta s.r.l.)" <carlo.bertelli at gmail.com> writes:

> The GeoJSON Specification (RFC 7946) mandates the use of WGS84:
>
> The coordinate reference system for all GeoJSON coordinates is a
>> geographic coordinate reference system, using the World Geodetic
>> System 1984 (WGS 84) [WGS84
>> <https://datatracker.ietf.org/doc/html/rfc7946#ref-WGS84>] datum, with
>> longitude and latitude units
>> of decimal degrees.
>
> (chapter 4)
>
> OAPIF can use GeoJSON (very often) and in this case using another reference
> system is not allowed, but it can also use GML level 0 or level 2 and in
> these cases there is no limit to what CRS you can use.

Yes, but either

  Because geojson can only use WGS84, it is a deficient format, and
  unsuitable for anyhthing where accuracy at the 2m level matters.

or

  Because geojson in practice is widely observed to have datum tags, one
  can and should take the view that there is an error in the geojson
  format spscification and treat it as geojson+ that allows specifying
  crs.

I personally hold the latter view.

However, if one is dealing with tools that don't honor crs in geojson,
agreed that one has to hold the first view.



An example follows (hand redacted, may be messed up) of a geojson
produced from qgis/gdal, in ITRF2014 as a way to get a good transfrom
from NAD83 and be sensible in the web world.  i didn't do any
contortions to get this; just

  ogr2ogr -f GeoJSON -t_srs "EPSG:7912" -s_srs "EPSG:6319" %TRAILS/BAR/invasive-points.geojson bar.gpkg invasive-points

----------------------------------------
{
"type": "FeatureCollection",
"name": "foo-invasive-points",
"crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:EPSG::7912" } },
"features": [
{ "type": "Feature", "properties": { "species": "bittersweet", "todo": false }, "geometry": { "type": "Point", "coordinates": [ -71.5, 42.5, 80 ] } },
]
}

  
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220302/9878fd22/attachment.sig>

From enricofer at gmail.com  Thu Mar  3 00:12:27 2022
From: enricofer at gmail.com (Enrico Ferreguti)
Date: Thu, 3 Mar 2022 09:12:27 +0100
Subject: [QGIS-Developer] WFS3 API POST PUT Methods
In-Reply-To: <CAL5Q673MOd=biyKH4exxRopEsx8OZJZ5ht5FdnY9=tWU70b70Q@mail.gmail.com>
References: <CAJy=XtcQoangkzsQhdPBq_r9BR0u05f7PJKD3+g_OcMeij_J7g@mail.gmail.com>
 <CAL5Q673MOd=biyKH4exxRopEsx8OZJZ5ht5FdnY9=tWU70b70Q@mail.gmail.com>
Message-ID: <CAJy=XtcH=wMddo9TqWA2awOjE7wd1iAVNwNCioxUNzo_0xogrQ@mail.gmail.com>

Il giorno mer 2 mar 2022 alle ore 18:09 Alessandro Pasotti <
apasotti at gmail.com> ha scritto:

>
> Enrico,
>
> We only accept 4326 currently.
>
> I think we could be more tolerant if the OAPIF extensions allows it, we
> currently allow GET with other CRSs but POST/PUT/PATCH are not implemented
> to handle different CRSs.
>

What about accepting requests with same CRS of feature source? Could be
this a reasonable feature request?
Anyway on REST Interface you did a great job. Thanks.


>
> Kind Regards
>
>
> On Wed, Mar 2, 2022 at 1:53 PM Enrico Ferreguti <enricofer at gmail.com>
> wrote:
>
>> Hi QGIS devs,
>> I'm testing the API REST interface for updating a WFS3 and I verified
>> that the new/modified feature had to be expressed in geojson format in
>> EPSG:4326 coordinates regardless of the SRID of the served layer. I
>> verified the behaviour with QGIS server 3.16 LTR and latest 3.22
>>
>> Is this an issue or a feature due to compliance to OGC or RFC7946
>> standards?
>>
>> Anyway I found this behaviour very uncomfortable because it obliges to
>> perform preliminarly unaccurate reprojections from javascript/python
>> clients.
>>
>> Best regards.
>> Enrico Ferreguti.
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220303/63f13ff2/attachment.html>

From apasotti at gmail.com  Thu Mar  3 01:28:16 2022
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 3 Mar 2022 10:28:16 +0100
Subject: [QGIS-Developer] WFS3 API POST PUT Methods
In-Reply-To: <CAJy=XtcH=wMddo9TqWA2awOjE7wd1iAVNwNCioxUNzo_0xogrQ@mail.gmail.com>
References: <CAJy=XtcQoangkzsQhdPBq_r9BR0u05f7PJKD3+g_OcMeij_J7g@mail.gmail.com>
 <CAL5Q673MOd=biyKH4exxRopEsx8OZJZ5ht5FdnY9=tWU70b70Q@mail.gmail.com>
 <CAJy=XtcH=wMddo9TqWA2awOjE7wd1iAVNwNCioxUNzo_0xogrQ@mail.gmail.com>
Message-ID: <CAL5Q670Swc7ZP=yuM9gP17aXZ=+96RdmpOFkswss280YobpH0g@mail.gmail.com>

On Thu, Mar 3, 2022 at 9:12 AM Enrico Ferreguti <enricofer at gmail.com> wrote:

>
>
> Il giorno mer 2 mar 2022 alle ore 18:09 Alessandro Pasotti <
> apasotti at gmail.com> ha scritto:
>
>>
>> Enrico,
>>
>> We only accept 4326 currently.
>>
>> I think we could be more tolerant if the OAPIF extensions allows it, we
>> currently allow GET with other CRSs but POST/PUT/PATCH are not implemented
>> to handle different CRSs.
>>
>
> What about accepting requests with same CRS of feature source? Could be
> this a reasonable feature request?
>

Yes, I think you could add a custom/vendor crs parameter to the request.

Might be worth taking a look at what other server implementations are doing
in this regard.



> Anyway on REST Interface you did a great job. Thanks.
>

Thank you!

Kind regards.



>
>
>>
>> Kind Regards
>>
>>
>> On Wed, Mar 2, 2022 at 1:53 PM Enrico Ferreguti <enricofer at gmail.com>
>> wrote:
>>
>>> Hi QGIS devs,
>>> I'm testing the API REST interface for updating a WFS3 and I verified
>>> that the new/modified feature had to be expressed in geojson format in
>>> EPSG:4326 coordinates regardless of the SRID of the served layer. I
>>> verified the behaviour with QGIS server 3.16 LTR and latest 3.22
>>>
>>> Is this an issue or a feature due to compliance to OGC or RFC7946
>>> standards?
>>>
>>> Anyway I found this behaviour very uncomfortable because it obliges to
>>> perform preliminarly unaccurate reprojections from javascript/python
>>> clients.
>>>
>>> Best regards.
>>> Enrico Ferreguti.
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
>>
>> --
>> Alessandro Pasotti
>> QCooperative:  www.qcooperative.net
>> ItOpen:   www.itopen.it
>>
>

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220303/2a0c178b/attachment.html>

From axel.n.c.andersson at gmail.com  Thu Mar  3 13:08:22 2022
From: axel.n.c.andersson at gmail.com (=?UTF-8?Q?Axel_H=C3=B6rteborn?=)
Date: Thu, 3 Mar 2022 22:08:22 +0100
Subject: [QGIS-Developer] Cython module in a QGIS plugin
Message-ID: <CAJj=OApOq0nLajM5Q_86h-bR74TiJZZKkCqjv4ej-FDVvvj+vw@mail.gmail.com>

Hi QGIS devs,

I'm planning to update my QGIS plugin with some new features. The new
features are really computational heavy (reading binary data and making
some computation) so I've tried to use Cython to speed up some parts of it.

Is the best strategy to include Windows/Linux Cython compiled files (.pyd)
in the plugin folder (which versions is recommended to compile for and
include?)? Or shall I try to create some initialization setup of the plugin
where the files are compiled locally with Cython? Or is there any other
better solutions?

Best regards
Axel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220303/8b5ba11f/attachment.html>

From nyall.dawson at gmail.com  Thu Mar  3 17:36:07 2022
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 4 Mar 2022 11:36:07 +1000
Subject: [QGIS-Developer] Switching to KDE fork of Qt for Windows builds?
Message-ID: <CAB28Ashtjb0pEV6zmKLPaNHxyc+ZrrddAGVhOQZaf6rTOFJqeQ@mail.gmail.com>

Hi list, (especially J?rgen)

I'm wondering if it's possible to switch over the Windows (osgeo4w)
builds of Qt from the upstream 5.15.2 package over to the (maintained)
KDE 5.15 backports fork. We're missing a bunch of important fixes on
Windows (especially the PDF output related fixes) which are available
in KDE's fork.

Is this a major task to do?

Nyall

From tudorbarascu at yahoo.com  Thu Mar  3 20:40:26 2022
From: tudorbarascu at yahoo.com (=?utf-8?Q?Tudor_B=C4=83r=C4=83scu?=)
Date: Fri, 4 Mar 2022 06:40:26 +0200
Subject: [QGIS-Developer] Switching to KDE fork of Qt for Windows builds?
In-Reply-To: <CAB28Ashtjb0pEV6zmKLPaNHxyc+ZrrddAGVhOQZaf6rTOFJqeQ@mail.gmail.com>
References: <CAB28Ashtjb0pEV6zmKLPaNHxyc+ZrrddAGVhOQZaf6rTOFJqeQ@mail.gmail.com>
Message-ID: <F8385530-AFB4-4146-9F33-FA2A7902F1AD@yahoo.com>

Hello,

Don?t know if this influences this request.

https://www.phoronix.com/scan.php?page=news_item&px=Qt-5.15.3-Open-Source

All the best,

Tudor

Sent from my iPhone

> On 4 Mar 2022, at 03:36, Nyall Dawson via QGIS-Developer <qgis-developer at lists.osgeo.org> wrote:
> 
> ?Hi list, (especially J?rgen)
> 
> I'm wondering if it's possible to switch over the Windows (osgeo4w)
> builds of Qt from the upstream 5.15.2 package over to the (maintained)
> KDE 5.15 backports fork. We're missing a bunch of important fixes on
> Windows (especially the PDF output related fixes) which are available
> in KDE's fork.
> 
> Is this a major task to do?
> 
> Nyall
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220304/f0562424/attachment.html>

From nyall.dawson at gmail.com  Thu Mar  3 20:48:07 2022
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 4 Mar 2022 14:48:07 +1000
Subject: [QGIS-Developer] Switching to KDE fork of Qt for Windows builds?
In-Reply-To: <F8385530-AFB4-4146-9F33-FA2A7902F1AD@yahoo.com>
References: <CAB28Ashtjb0pEV6zmKLPaNHxyc+ZrrddAGVhOQZaf6rTOFJqeQ@mail.gmail.com>
 <F8385530-AFB4-4146-9F33-FA2A7902F1AD@yahoo.com>
Message-ID: <CAB28Asi=tW7Z_kYauCXGZnB8dUuQmz-QK-zff+ZYcTZ+-cRiFQ@mail.gmail.com>

On Fri, 4 Mar 2022 at 14:40, Tudor B?r?scu <tudorbarascu at yahoo.com> wrote:
>
> Hello,
>
> Don?t know if this influences this request.
>
> https://www.phoronix.com/scan.php?page=news_item&px=Qt-5.15.3-Open-Source

Unfortunately no, that patch release is newly a year-old. It won't
have the pdf related fixes in.

Nyall


>
> All the best,
>
> Tudor
>
> Sent from my iPhone
>
> On 4 Mar 2022, at 03:36, Nyall Dawson via QGIS-Developer <qgis-developer at lists.osgeo.org> wrote:
>
> ?Hi list, (especially J?rgen)
>
> I'm wondering if it's possible to switch over the Windows (osgeo4w)
> builds of Qt from the upstream 5.15.2 package over to the (maintained)
> KDE 5.15 backports fork. We're missing a bunch of important fixes on
> Windows (especially the PDF output related fixes) which are available
> in KDE's fork.
>
> Is this a major task to do?
>
> Nyall
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From marin.mirosevic at gmail.com  Fri Mar  4 02:08:58 2022
From: marin.mirosevic at gmail.com (Marin M)
Date: Fri, 4 Mar 2022 11:08:58 +0100
Subject: [QGIS-Developer] Qgis functionality
Message-ID: <CADwgHoZrEq7bUSBF2M6vgrg7sk+06vcP3=9wnTXe9e5ASYRAoQ@mail.gmail.com>

hi,

I am very new and "green" when it comes to Qgis development.

I know certain functionality can be developed with Python (for ex.) and
then assigned to a plugin.

But can i "take out"/copy an existing functionality and then rearrange to
my needs . After that, assign it to a plugin so I have it tailored to my
needs?

Would that be possible with a code saved on GitHub? Language I prefere is
Python.

Best regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220304/dc3cca73/attachment.html>

From jef at norbit.de  Fri Mar  4 03:21:44 2022
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Fri, 4 Mar 2022 12:21:44 +0100
Subject: [QGIS-Developer] Switching to KDE fork of Qt for Windows builds?
In-Reply-To: <CAB28Ashtjb0pEV6zmKLPaNHxyc+ZrrddAGVhOQZaf6rTOFJqeQ@mail.gmail.com>
References: <CAB28Ashtjb0pEV6zmKLPaNHxyc+ZrrddAGVhOQZaf6rTOFJqeQ@mail.gmail.com>
Message-ID: <20220304112144.xk43sg63ofcqq4ue@norbit.de>

Hi Nyall,

On Fri, 04. Mar 2022 at 11:36:07 +1000, Nyall Dawson via QGIS-Developer wrote:
> I'm wondering if it's possible to switch over the Windows (osgeo4w)
> builds of Qt from the upstream 5.15.2 package over to the (maintained)
> KDE 5.15 backports fork. We're missing a bunch of important fixes on
> Windows (especially the PDF output related fixes) which are available
> in KDE's fork.
> 
> Is this a major task to do?

Well, depends on your point of view.  It's a long task at least - building will
take ages.  But if it just contains patches, then there's probably much more
patience required than actual work.  And I guess it wouldn't require rebuilds
of reverse dependencies (like qtwebkit to name the heaviest one).


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220304/1e421702/attachment.sig>

From Tobias.Schmetzer at zae-bayern.de  Sat Mar  5 06:06:34 2022
From: Tobias.Schmetzer at zae-bayern.de (Schmetzer, Tobias)
Date: Sat, 5 Mar 2022 14:06:34 +0000
Subject: [QGIS-Developer] How to access QgisApp::instance() from a core class
Message-ID: <7820257fe43d4a45baed07f2f104d8e7@zae-bayern.de>

Hello everyone,


I would like to access QgisApp::instance() (src/app/qgisapp.cpp) from a provider like QgsOgrProvider::extent() (src/core/providers/ogr/qgsogrprovider.cpp.

Yet I cannot include "qgisapp.h" into the provider.


When looking for this information I found some inactivating preprocessor code block comments like this one (qgswfsdataitems.cpp):

#if 0

    // TODO: how to emit message from provider (which does not know about QgisApp)
    QgisApp::instance()->messageBar()->pushMessage( tr( "Cannot copy style" ),
        errorMsg,
        Qgis::MessageLevel::Critical, messageTimeout() );
#endif


Does anybody know what is the idea to access the current QgisApp::instance() from outside the QgisApp realm?


Best regards, Tobias


--

ZAE Bayern
Dipl.-Ing. Tobias Schmetzer
Systementwicklung | Systems Engineering
Bereich Energiespeicherung | Division Energy Storage
Walther-Mei?ner-Stra?e 6
85748 Garching

Tel.: +49 89 329442-65
Fax: +49 89 329442-12
Mobil | Cell: +49 151 56964756
tobias.schmetzer at zae-bayern.de
https://www.zae-bayern.de

ZAE Bayern
Bayerisches Zentrum f?r Angewandte Energieforschung e. V. | Bavarian Center for Applied Energy Research
Vorstand | Board: Dr. Andreas Hauer (Vorsitzender | Chairman), Dr. Hans-Peter Ebert
Sitz | Registered Office: W?rzburg
Registergericht | Register Court: Amtsgericht W?rzburg
Registernummer | Register Number: VR 1386

Hinweise zum Datenschutz unter https://www.zae-bayern.de/datenschutz

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220305/53323de0/attachment.html>

From chrisbeer at posteo.de  Sun Mar  6 03:18:09 2022
From: chrisbeer at posteo.de (Christian Beer)
Date: Sun,  6 Mar 2022 11:18:09 +0000
Subject: [QGIS-Developer] proxy authentication using auth database not
 working
Message-ID: <7b58adde-4b4e-2feb-ccc0-a3128c06b5ed@posteo.de>

Hello,

I came across a strange behavior with qgis while using our corporate proxy.

We are using a proxy (http and https) that requires authentication to access the Internet. I configured QGIS to use the proxy in the general network settings and saved the authentication info (username/password) into the auth database. There are two other authentication settings for external WMS content that is only reachable through the Internet (via said proxy) in the auth database. Whenever QGIS starts it asks for a username and password to access the Internet although this information is already stored in the auth database. When I enter the correct proxy credentials the external WFS content is shown and I can see the stored configurations in the options dialog. When I don't enter the proxy credentials or choose to skip the initial question for credentials (there is an option to skip for 10 seconds) the external content (WFS and News Feed) is not shown and the content of the authentication database is also not shown in the options dialog. When editing the external WMS layer qgis tells me that the configuration is missing. Restarting and entering the correct credentials then works again.

Several questions here: Why is there a prompt for the proxy credentials when they are part of the authentication database? Why is the authdb not loaded when I skip the proxy credentials prompt? Note that it is not asking for the master password. It is specifically asking for the proxy credentials.

I specifically added the proxy credentials to the auth db so the user does not have to enter them everytime qgis starts. We noticed this behavior in different versions. The latest being 3.16. Since we recently had a problem accessing the external WMS content I updated to 3.22.4 which helped me solve the problem with SSL certificates. So kudos to the extra error message about a missing root CA certificate in 3.22 that helped me out a lot. But unfortunately the proxy problem described above is still present.

This is also available as a (older) github issue with steps to reproduce and versions tested: https://github.com/qgis/QGIS/issues/46216

-- 

MfG
Christian Beer



From nyall.dawson at gmail.com  Sun Mar  6 15:03:33 2022
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 7 Mar 2022 09:03:33 +1000
Subject: [QGIS-Developer] How to access QgisApp::instance() from a core
 class
In-Reply-To: <7820257fe43d4a45baed07f2f104d8e7@zae-bayern.de>
References: <7820257fe43d4a45baed07f2f104d8e7@zae-bayern.de>
Message-ID: <CAB28Asi8uhegOcTu18hxBmxCvF+i92qjoLpXtwCppVk6oGTUQg@mail.gmail.com>

On Sun, 6 Mar 2022 at 00:16, Schmetzer, Tobias via QGIS-Developer
<qgis-developer at lists.osgeo.org> wrote:
>
> Hello everyone,
>
>
> I would like to access QgisApp::instance() (src/app/qgisapp.cpp) from a provider like QgsOgrProvider::extent() (src/core/providers/ogr/qgsogrprovider.cpp.

You can't, by design.

CORE classes must be completely non-gui, so that they work without
issue on non-gui platforms like QGIS server (also for clients which
have their own GUI, such as QFIeld/Input).

Just to be super-blunt: There is 100% no way this will EVER change! ;)


> When looking for this information I found some inactivating preprocessor code block comments like this one (qgswfsdataitems.cpp):
>
> #if 0
>
>     // TODO: how to emit message from provider (which does not know about QgisApp)
>     QgisApp::instance()->messageBar()->pushMessage( tr( "Cannot copy style" ),
>         errorMsg,
>         Qgis::MessageLevel::Critical, messageTimeout() );
> #endif

This is very old code (hence why it's disabled). Again, none of the
core classes are allowed any GUI component, and the correct approach
to handle this particular situation is to move that code from the
provider level up to app level, specifically via the
QgsDataItemGuiProvider class.

So my question would be: why do you need to raise a user-facing
message from QgsOgrProvider::extent?

Nyall

From nyall.dawson at gmail.com  Sun Mar  6 15:04:34 2022
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 7 Mar 2022 09:04:34 +1000
Subject: [QGIS-Developer] Qgis functionality
In-Reply-To: <CADwgHoZrEq7bUSBF2M6vgrg7sk+06vcP3=9wnTXe9e5ASYRAoQ@mail.gmail.com>
References: <CADwgHoZrEq7bUSBF2M6vgrg7sk+06vcP3=9wnTXe9e5ASYRAoQ@mail.gmail.com>
Message-ID: <CAB28AsioVW7qjnEv14qRuNG_p48iHOYpRxwg8R+vHbYnwqVUKQ@mail.gmail.com>

On Fri, 4 Mar 2022 at 20:10, Marin M via QGIS-Developer
<qgis-developer at lists.osgeo.org> wrote:
>
>
> hi,
>
> I am very new and "green" when it comes to Qgis development.
>
> I know certain functionality can be developed with Python (for ex.) and then assigned to a plugin.
>
> But can i "take out"/copy an existing functionality and then rearrange to my needs . After that, assign it to a plugin so I have it tailored to my needs?

Yes, assuming that code is Python in the first place (almost all of
the code in QGIS itself is c++).

Nyall

From marin.mirosevic at gmail.com  Mon Mar  7 02:44:47 2022
From: marin.mirosevic at gmail.com (Marin M)
Date: Mon, 7 Mar 2022 11:44:47 +0100
Subject: [QGIS-Developer] Qgis functionality
In-Reply-To: <CAB28AsioVW7qjnEv14qRuNG_p48iHOYpRxwg8R+vHbYnwqVUKQ@mail.gmail.com>
References: <CADwgHoZrEq7bUSBF2M6vgrg7sk+06vcP3=9wnTXe9e5ASYRAoQ@mail.gmail.com>
 <CAB28AsioVW7qjnEv14qRuNG_p48iHOYpRxwg8R+vHbYnwqVUKQ@mail.gmail.com>
Message-ID: <CADwgHoYKe9UAVUYSxwwegjEj9QVwX_2oqn0PGYphCyLpY-JQgA@mail.gmail.com>

hi,

thanks.

How could I retrieve functionality written in C ++  or Python in Qgis ?  So
i i am able to copy and rearrange lines of code for adjusted  functionality

regards






pon, 7. o?u 2022. u 00:04 Nyall Dawson <nyall.dawson at gmail.com> napisao je:

> On Fri, 4 Mar 2022 at 20:10, Marin M via QGIS-Developer
> <qgis-developer at lists.osgeo.org> wrote:
> >
> >
> > hi,
> >
> > I am very new and "green" when it comes to Qgis development.
> >
> > I know certain functionality can be developed with Python (for ex.) and
> then assigned to a plugin.
> >
> > But can i "take out"/copy an existing functionality and then rearrange
> to my needs . After that, assign it to a plugin so I have it tailored to my
> needs?
>
> Yes, assuming that code is Python in the first place (almost all of
> the code in QGIS itself is c++).
>
> Nyall
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220307/64b59594/attachment.html>

From Tobias.Schmetzer at zae-bayern.de  Mon Mar  7 13:23:16 2022
From: Tobias.Schmetzer at zae-bayern.de (Schmetzer, Tobias)
Date: Mon, 7 Mar 2022 21:23:16 +0000
Subject: [QGIS-Developer] How to access QgisApp::instance() from a core
 class
In-Reply-To: <CAB28Asi8uhegOcTu18hxBmxCvF+i92qjoLpXtwCppVk6oGTUQg@mail.gmail.com>
References: <7820257fe43d4a45baed07f2f104d8e7@zae-bayern.de>,
 <CAB28Asi8uhegOcTu18hxBmxCvF+i92qjoLpXtwCppVk6oGTUQg@mail.gmail.com>
Message-ID: <d58e22188fd14c5298a96252e09db72a@zae-bayern.de>

Hi Nyall,


> CORE classes must be completely non-gui, so that they work without issue on non-gui platforms like QGIS server (also for clients which have their own GUI, such as QFIeld/Input).


That sounds totally reasonable.


> Again, none of the core classes are allowed any GUI component, and the correct approach to handle this particular situation is to move that code from the provider level up to app level, specifically via the QgsDataItemGuiProvider class.


I had a look into it. If I understood it correctly the class provides a framework for functions to be registered and called by other functions placed in the gui.

But what to do when a progress dialog needs to be raised or an application state needs to be read? (see description below)


> So my question would be: why do you need to raise a user-facing message from QgsOgrProvider::extent?


- One idea was is to inform the user via a simple progress dialog in cases of very time-consuming extent calculations for large layers (I observed calc time ranges from 10 min to hours) of what's going on and that QGIS hasn't crashed yet. The design would practically allow this to be implemented in the provider and I also saw the use of QProgressDialog in other parts of the core components code. If that's also not how it is intended to be then I'd appreciate a quick hint of how it is intended to be.


- The second idea was to display an additional message dependant on the current QGIS instance's project state (whether it's loading/loaded/saving/closed) for which I had planned to introduce an enum QgisApp::ProjectState alongside with a private variable mProjectState and a public function QgisApp::getProjectState(). So would I make this accessible to the provider?


Best regards

Tobias

--

ZAE Bayern
Dipl.-Ing. Tobias Schmetzer
Systementwicklung | Systems Engineering
Bereich Energiespeicherung | Division Energy Storage
Walther-Mei?ner-Stra?e 6
85748 Garching

Tel.: +49 89 329442-65
Fax: +49 89 329442-12
Mobil | Cell: +49 151 56964756
tobias.schmetzer at zae-bayern.de
https://www.zae-bayern.de

ZAE Bayern
Bayerisches Zentrum f?r Angewandte Energieforschung e. V. | Bavarian Center for Applied Energy Research
Vorstand | Board: Dr. Andreas Hauer (Vorsitzender | Chairman), Dr. Hans-Peter Ebert
Sitz | Registered Office: W?rzburg
Registergericht | Register Court: Amtsgericht W?rzburg
Registernummer | Register Number: VR 1386

Hinweise zum Datenschutz unter https://www.zae-bayern.de/datenschutz



________________________________
Von: Nyall Dawson <nyall.dawson at gmail.com>
Gesendet: Montag, 7. M?rz 2022 00:03
An: Schmetzer, Tobias
Cc: qgis-developer at lists.osgeo.org
Betreff: Re: [QGIS-Developer] How to access QgisApp::instance() from a core class

On Sun, 6 Mar 2022 at 00:16, Schmetzer, Tobias via QGIS-Developer
<qgis-developer at lists.osgeo.org> wrote:
>
> Hello everyone,
>
>
> I would like to access QgisApp::instance() (src/app/qgisapp.cpp) from a provider like QgsOgrProvider::extent() (src/core/providers/ogr/qgsogrprovider.cpp.

You can't, by design.

CORE classes must be completely non-gui, so that they work without
issue on non-gui platforms like QGIS server (also for clients which
have their own GUI, such as QFIeld/Input).

Just to be super-blunt: There is 100% no way this will EVER change! ;)


> When looking for this information I found some inactivating preprocessor code block comments like this one (qgswfsdataitems.cpp):
>
> #if 0
>
>     // TODO: how to emit message from provider (which does not know about QgisApp)
>     QgisApp::instance()->messageBar()->pushMessage( tr( "Cannot copy style" ),
>         errorMsg,
>         Qgis::MessageLevel::Critical, messageTimeout() );
> #endif

This is very old code (hence why it's disabled). Again, none of the
core classes are allowed any GUI component, and the correct approach
to handle this particular situation is to move that code from the
provider level up to app level, specifically via the
QgsDataItemGuiProvider class.

So my question would be: why do you need to raise a user-facing
message from QgsOgrProvider::extent?

Nyall
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220307/8c4e35b1/attachment-0001.html>

From nyall.dawson at gmail.com  Mon Mar  7 14:13:40 2022
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 8 Mar 2022 08:13:40 +1000
Subject: [QGIS-Developer] Qgis functionality
In-Reply-To: <CADwgHoYKe9UAVUYSxwwegjEj9QVwX_2oqn0PGYphCyLpY-JQgA@mail.gmail.com>
References: <CADwgHoZrEq7bUSBF2M6vgrg7sk+06vcP3=9wnTXe9e5ASYRAoQ@mail.gmail.com>
 <CAB28AsioVW7qjnEv14qRuNG_p48iHOYpRxwg8R+vHbYnwqVUKQ@mail.gmail.com>
 <CADwgHoYKe9UAVUYSxwwegjEj9QVwX_2oqn0PGYphCyLpY-JQgA@mail.gmail.com>
Message-ID: <CAB28AsiuPhQcCxbbtXoC5+TF=tBbMyNkU873f7AxOKmAY2HpFg@mail.gmail.com>

On Mon, 7 Mar 2022 at 20:45, Marin M <marin.mirosevic at gmail.com> wrote:
>
> hi,
>
> thanks.
>
> How could I retrieve functionality written in C ++  or Python in Qgis ?  So i i am able to copy and rearrange lines of code for adjusted  functionality

The source code is all available on the QGIS github repository:
https://github.com/qgis/QGIS

Nyall

From nyall.dawson at gmail.com  Mon Mar  7 14:52:19 2022
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 8 Mar 2022 08:52:19 +1000
Subject: [QGIS-Developer] How to access QgisApp::instance() from a core
 class
In-Reply-To: <d58e22188fd14c5298a96252e09db72a@zae-bayern.de>
References: <7820257fe43d4a45baed07f2f104d8e7@zae-bayern.de>
 <CAB28Asi8uhegOcTu18hxBmxCvF+i92qjoLpXtwCppVk6oGTUQg@mail.gmail.com>
 <d58e22188fd14c5298a96252e09db72a@zae-bayern.de>
Message-ID: <CAB28Asik6hsE_peT3wnhf8xgxSt13zh3=hWuQtqONEr1g9Hsgg@mail.gmail.com>

On Tue, 8 Mar 2022 at 07:23, Schmetzer, Tobias
<Tobias.Schmetzer at zae-bayern.de> wrote:
>
> > Again, none of the core classes are allowed any GUI component, and the correct approach to handle this particular situation is to move that code from the provider level up to app level, specifically via the QgsDataItemGuiProvider class.
>
>
> I had a look into it. If I understood it correctly the class provides a framework for functions to be registered and called by other functions placed in the gui.
>
> But what to do when a progress dialog needs to be raised or an application state needs to be read? (see description below)
>
>
> > So my question would be: why do you need to raise a user-facing message from QgsOgrProvider::extent?
>
>
> - One idea was is to inform the user via a simple progress dialog in cases of very time-consuming extent calculations for large layers (I observed calc time ranges from 10 min to hours) of what's going on and that QGIS hasn't crashed yet. The design would practically allow this to be implemented in the provider . If that's also not how it is intended to be then I'd appreciate a quick hint of how it is intended to be.

Offhand, there's a couple of ways to approach something like this:

1. You add appropriate signals in the core classes which are emitted
at useful stages, e.g. "aboutToCalculateExtent",
"extentCalculationProgressChanged", "extentCalculationComplete". And
then the app/gui classes can listen out for these signals and respond
to them appropriately, i.e. by showing a progress bar somewhere.

2. You could add a QgsFeedback* argument to the costly method, and use
that to report progress and support early cancellation.

(2 is a more flexible, "better" approach, but depending on the method
you may not be able to add this to an existing method without breaking
stable API.

> and I also saw the use of QProgressDialog in other parts of the core components code

That's likely just outdated code which hasn't been removed yet.

>
>
> - The second idea was to display an additional message dependant on the current QGIS instance's project state (whether it's loading/loaded/saving/closed) for which I had planned to introduce an enum QgisApp::ProjectState alongside with a private variable mProjectState and a public function QgisApp::getProjectState(). So would I make this accessible to the provider?

That property sounds potentially useful! (Just a note that QGIS code
convention is to name a getter "projectState()", not
"getProjectState(). We follow Qt conventions for naming as much as
possible).

But... (there's always a catch!) You can't (well, shouldn't) access
QgsProject from a data provider*.  So you'd need to change the
behaviour at a higher level based on the project state instead. (e.g.
by not calling some expensive method which can be deferred from the
app level code)

Nyall

* the virtual data provider does this, but it's special, and really
shouldn't anyway.

>
>
> Best regards
>
> Tobias
>
> --
>
> ZAE Bayern
> Dipl.-Ing. Tobias Schmetzer
> Systementwicklung | Systems Engineering
> Bereich Energiespeicherung | Division Energy Storage
> Walther-Mei?ner-Stra?e 6
> 85748 Garching
>
> Tel.: +49 89 329442-65
> Fax: +49 89 329442-12
> Mobil | Cell: +49 151 56964756
> tobias.schmetzer at zae-bayern.de
> https://www.zae-bayern.de
>
> ZAE Bayern
> Bayerisches Zentrum f?r Angewandte Energieforschung e. V. | Bavarian Center for Applied Energy Research
> Vorstand | Board: Dr. Andreas Hauer (Vorsitzender | Chairman), Dr. Hans-Peter Ebert
> Sitz | Registered Office: W?rzburg
> Registergericht | Register Court: Amtsgericht W?rzburg
> Registernummer | Register Number: VR 1386
>
> Hinweise zum Datenschutz unter https://www.zae-bayern.de/datenschutz
>
>
>
> ________________________________
> Von: Nyall Dawson <nyall.dawson at gmail.com>
> Gesendet: Montag, 7. M?rz 2022 00:03
> An: Schmetzer, Tobias
> Cc: qgis-developer at lists.osgeo.org
> Betreff: Re: [QGIS-Developer] How to access QgisApp::instance() from a core class
>
> On Sun, 6 Mar 2022 at 00:16, Schmetzer, Tobias via QGIS-Developer
> <qgis-developer at lists.osgeo.org> wrote:
> >
> > Hello everyone,
> >
> >
> > I would like to access QgisApp::instance() (src/app/qgisapp.cpp) from a provider like QgsOgrProvider::extent() (src/core/providers/ogr/qgsogrprovider.cpp.
>
> You can't, by design.
>
> CORE classes must be completely non-gui, so that they work without
> issue on non-gui platforms like QGIS server (also for clients which
> have their own GUI, such as QFIeld/Input).
>
> Just to be super-blunt: There is 100% no way this will EVER change! ;)
>
>
> > When looking for this information I found some inactivating preprocessor code block comments like this one (qgswfsdataitems.cpp):
> >
> > #if 0
> >
> >     // TODO: how to emit message from provider (which does not know about QgisApp)
> >     QgisApp::instance()->messageBar()->pushMessage( tr( "Cannot copy style" ),
> >         errorMsg,
> >         Qgis::MessageLevel::Critical, messageTimeout() );
> > #endif
>
> This is very old code (hence why it's disabled). Again, none of the
> core classes are allowed any GUI component, and the correct approach
> to handle this particular situation is to move that code from the
> provider level up to app level, specifically via the
> QgsDataItemGuiProvider class.
>
> So my question would be: why do you need to raise a user-facing
> message from QgsOgrProvider::extent?
>
> Nyall

From denis.rouzaud at gmail.com  Wed Mar  9 00:26:14 2022
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Wed, 9 Mar 2022 09:26:14 +0100
Subject: [QGIS-Developer] Switching to KDE fork of Qt for Windows builds?
In-Reply-To: <20220304112144.xk43sg63ofcqq4ue@norbit.de>
References: <CAB28Ashtjb0pEV6zmKLPaNHxyc+ZrrddAGVhOQZaf6rTOFJqeQ@mail.gmail.com>
 <20220304112144.xk43sg63ofcqq4ue@norbit.de>
Message-ID: <CAMtsY+b=K22ZmA2Ug2NUuX0f_+c-1Hfcy00ETsf8YQYsZHp=ww@mail.gmail.com>

Hi all,

This might be of interest for this topic, it seems Qt 5.15.3 was released
as open source.

https://www.phoronix.com/scan.php?page=news_item&px=Qt-5.15.3-Open-Source
https://lists.qt-project.org/pipermail/development/2022-March/042262.html

Denis


Le ven. 4 mars 2022 ? 12:21, J?rgen E. Fischer via QGIS-Developer <
qgis-developer at lists.osgeo.org> a ?crit :

> Hi Nyall,
>
> On Fri, 04. Mar 2022 at 11:36:07 +1000, Nyall Dawson via QGIS-Developer
> wrote:
> > I'm wondering if it's possible to switch over the Windows (osgeo4w)
> > builds of Qt from the upstream 5.15.2 package over to the (maintained)
> > KDE 5.15 backports fork. We're missing a bunch of important fixes on
> > Windows (especially the PDF output related fixes) which are available
> > in KDE's fork.
> >
> > Is this a major task to do?
>
> Well, depends on your point of view.  It's a long task at least - building
> will
> take ages.  But if it just contains patches, then there's probably much
> more
> patience required than actual work.  And I guess it wouldn't require
> rebuilds
> of reverse dependencies (like qtwebkit to name the heaviest one).
>
>
> J?rgen
>
> --
> J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden
> https://www.norbit.de
> QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220309/ec1d43ff/attachment.html>

From lbartoletti at tuxfamily.org  Wed Mar  9 05:28:20 2022
From: lbartoletti at tuxfamily.org (=?UTF-8?Q?Lo=c3=afc_Bartoletti?=)
Date: Wed, 9 Mar 2022 14:28:20 +0100
Subject: [QGIS-Developer] Switching to KDE fork of Qt for Windows builds?
In-Reply-To: <CAMtsY+b=K22ZmA2Ug2NUuX0f_+c-1Hfcy00ETsf8YQYsZHp=ww@mail.gmail.com>
References: <CAB28Ashtjb0pEV6zmKLPaNHxyc+ZrrddAGVhOQZaf6rTOFJqeQ@mail.gmail.com>
 <20220304112144.xk43sg63ofcqq4ue@norbit.de>
 <CAMtsY+b=K22ZmA2Ug2NUuX0f_+c-1Hfcy00ETsf8YQYsZHp=ww@mail.gmail.com>
Message-ID: <14709005-cd2b-b649-65ca-4849edb3dd88@tuxfamily.org>

Hi,

I haven't looked at the patches that interest us, but for information, 
Qt 5.15.3 was released, ok, but it's an one year old release. You have 
to apply some patches.

For example, we had qt 5.15.2p263 and we'll have soon 5.15.3p132 (aka 
132 patches since the release of 5.15.3).

Regards.

Lo?c

Le 09/03/2022 ? 09:26, Denis Rouzaud via QGIS-Developer a ?crit?:
> Hi all,
>
> This might be of interest for this topic, it seems Qt 5.15.3 was 
> released as open source.
>
> https://www.phoronix.com/scan.php?page=news_item&px=Qt-5.15.3-Open-Source 
> <https://www.phoronix.com/scan.php?page=news_item&px=Qt-5.15.3-Open-Source>
> https://lists.qt-project.org/pipermail/development/2022-March/042262.html
>
> Denis
>
>
> Le?ven. 4 mars 2022 ??12:21, J?rgen E. Fischer via QGIS-Developer 
> <qgis-developer at lists.osgeo.org> a ?crit?:
>
>     Hi Nyall,
>
>     On Fri, 04. Mar 2022 at 11:36:07 +1000, Nyall Dawson via
>     QGIS-Developer wrote:
>     > I'm wondering if it's possible to switch over the Windows (osgeo4w)
>     > builds of Qt from the upstream 5.15.2 package over to the
>     (maintained)
>     > KDE 5.15 backports fork. We're missing a bunch of important fixes on
>     > Windows (especially the PDF output related fixes) which are
>     available
>     > in KDE's fork.
>     >
>     > Is this a major task to do?
>
>     Well, depends on your point of view.? It's a long task at least -
>     building will
>     take ages.? But if it just contains patches, then there's probably
>     much more
>     patience required than actual work.? And I guess it wouldn't
>     require rebuilds
>     of reverse dependencies (like qtwebkit to name the heaviest one).
>
>
>     J?rgen
>
>     -- 
>     J?rgen E. Fischer? ? ? ? ? ?norBIT GmbH? ? ? ? ? ? ?Tel.
>     +49-4931-918175-31
>     Dipl.-Inf. (FH)? ? ? ? ? ? ?Rheinstra?e 13? ? ? ? ? Fax.
>     +49-4931-918175-50
>     Software Engineer? ? ? ? ? ?D-26506 Norden https://www.norbit.de
>     QGIS release manager (PSC)? Germany? ? ? ? ? ? ? ? ?IRC: jef on
>     Libera|OFTC
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220309/013c75d4/attachment.html>

From cavallini at faunalia.it  Thu Mar 10 22:46:36 2022
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Fri, 11 Mar 2022 07:46:36 +0100
Subject: [QGIS-Developer] Dependency missing?
Message-ID: <f2214e3d-e3d8-c0b1-e5b5-9f5b67713f45@faunalia.it>

Hi all,
AFAICT PyQt5.QtPositioning dependency is missing from 3.22 deb package[0].
As a result, Python support is disabled until the dependency is
installed by hand.
Am I wrong?
Cheers.

[0]
Traceback (most recent call last):
  File "", line 1, in
  File "/usr/lib/python3/dist-packages/qgis/core/__init__.py", line 25, in
    from qgis._core import *
ModuleNotFoundError: No module named 'PyQt5.QtPositioning'


Versione Python:
3.9.10 (main, Feb 22 2022, 13:54:07)
[GCC 11.2.0]

Versione di QGIS:
3.22.4-Bia?owie?a 'Bia?owie?a', exported
-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From sebastic at xs4all.nl  Thu Mar 10 23:31:20 2022
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Fri, 11 Mar 2022 08:31:20 +0100
Subject: [QGIS-Developer] Dependency missing?
In-Reply-To: <f2214e3d-e3d8-c0b1-e5b5-9f5b67713f45@faunalia.it>
References: <f2214e3d-e3d8-c0b1-e5b5-9f5b67713f45@faunalia.it>
Message-ID: <2ef1680f-92a5-0018-2bad-abbac37e2bc3@xs4all.nl>

On 3/11/22 07:46, Paolo Cavallini via QGIS-Developer wrote:
> AFAICT PyQt5.QtPositioning dependency is missing from 3.22 deb package[0].
> As a result, Python support is disabled until the dependency is
> installed by hand.
> Am I wrong?

Probably:

$ wget -q 
https://qgis.org/debian-ltr/dists/unstable/main/binary-amd64/Packages -O 
- | grep -B6 python3-pyqt5.qtpositioning
Package: python3-qgis
Source: qgis
Version: 1:3.22.4+99unstable
Architecture: amd64
Maintainer: QGIS developers <qgis-developer at lists.osgeo.org>
Installed-Size: 71136
Depends: python3-qgis-common (= 1:3.22.4+99unstable), qgis-providers (= 
1:3.22.4+99unstable), libqgispython3.22.4, libsqlite3-mod-spatialite, 
python3-dateutil, python3-future, python3-httplib2, python3-jinja2, 
python3-markupsafe, python3-owslib, python3-plotly, python3-psycopg2, 
python3-pygments, python3-pyproj, python3-pyqt5, python3-pyqt5.qsci, 
python3-pyqt5.qtsql, python3-pyqt5.qtpositioning, python3-pyqt5.qtsvg, 
python3-pyqt5.qtwebkit, python3-requests, python3-sip, python3-six, 
python3-tz, python3-yaml, python3-lxml, python3 (<< 3.10), python3 (>= 
3.9~), python3:any, libc6 (>= 2.29), libexiv2-27 (>= 0.27.3), libgcc-s1 
(>= 3.0), libpython3.9 (>= 3.9.1), libqca-qt5-2 (>= 2.0.2), 
libqgis-3d3.22.4, libqgis-analysis3.22.4, libqgis-core3.22.4, 
libqgis-gui3.22.4, libqgis-server3.22.4, libqscintilla2-qt5-15 (>= 
2.11.2), libqt5core5a (>= 5.15.1), libqt5gui5 (>= 5.14.1) | 
libqt5gui5-gles (>= 5.14.1), libqt5network5 (>= 5.14.1), 
libqt5positioning5 (>= 5.6.0), libqt5svg5 (>= 5.6.0~beta), libqt5webkit5 
(>= 5.212.0~alpha3), libqt5widgets5 (>= 5.11.0~rc1), libqt5xml5 (>= 
5.0.2), libstdc++6 (>= 5.2)

https://github.com/qgis/QGIS/blob/release-3_22/debian/control.in#L296

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From cavallini at faunalia.it  Thu Mar 10 23:48:16 2022
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Fri, 11 Mar 2022 08:48:16 +0100
Subject: [QGIS-Developer] Dependency missing?
In-Reply-To: <2ef1680f-92a5-0018-2bad-abbac37e2bc3@xs4all.nl>
References: <f2214e3d-e3d8-c0b1-e5b5-9f5b67713f45@faunalia.it>
 <2ef1680f-92a5-0018-2bad-abbac37e2bc3@xs4all.nl>
Message-ID: <66052de3-0ef5-61cd-e279-dc48a4e02ea5@faunalia.it>

Hi Bas,

Il 11/03/22 08:31, Sebastiaan Couwenberg via QGIS-Developer ha scritto:
> On 3/11/22 07:46, Paolo Cavallini via QGIS-Developer wrote:
>> AFAICT PyQt5.QtPositioning dependency is missing from 3.22 deb
>> package[0].
>> As a result, Python support is disabled until the dependency is
>> installed by hand.
>> Am I wrong?
> 
> Probably:
> 
> $ wget -q
> https://qgis.org/debian-ltr/dists/unstable/main/binary-amd64/Packages -O
> - | grep -B6 python3-pyqt5.qtpositioning
> Package: python3-qgis
> Source: qgis
> Version: 1:3.22.4+99unstable

that explains, thanks. I have 3.22.4+dfsg-3, blocked because of
#999912 - libpython3.10-stdlib,python3-gdbm: both ship
/usr/lib/python3.10/lib-dynload/_dbm.cpython-310-x86_64-linux-gnu.so
sorry for the noise.
Cheers.
-- 
Paolo Cavallini
www.faunalia.eu - QGIS.org
training, support, development on QGIS, PostGIS and more

From sebastic at xs4all.nl  Thu Mar 10 23:54:30 2022
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Fri, 11 Mar 2022 08:54:30 +0100
Subject: [QGIS-Developer] Dependency missing?
In-Reply-To: <66052de3-0ef5-61cd-e279-dc48a4e02ea5@faunalia.it>
References: <f2214e3d-e3d8-c0b1-e5b5-9f5b67713f45@faunalia.it>
 <2ef1680f-92a5-0018-2bad-abbac37e2bc3@xs4all.nl>
 <66052de3-0ef5-61cd-e279-dc48a4e02ea5@faunalia.it>
Message-ID: <60283978-cdb8-8125-cf70-4e6e2826747d@xs4all.nl>

On 3/11/22 08:48, Paolo Cavallini via QGIS-Developer wrote:
> Il 11/03/22 08:31, Sebastiaan Couwenberg via QGIS-Developer ha scritto:
>> On 3/11/22 07:46, Paolo Cavallini via QGIS-Developer wrote:
>>> AFAICT PyQt5.QtPositioning dependency is missing from 3.22 deb
>>> package[0].
>>> As a result, Python support is disabled until the dependency is
>>> installed by hand.
>>> Am I wrong?
>>
>> Probably:
>>
>> $ wget -q
>> https://qgis.org/debian-ltr/dists/unstable/main/binary-amd64/Packages -O
>> - | grep -B6 python3-pyqt5.qtpositioning
>> Package: python3-qgis
>> Source: qgis
>> Version: 1:3.22.4+99unstable
> 
> that explains, thanks. I have 3.22.4+dfsg-3, blocked because of
> #999912 - libpython3.10-stdlib,python3-gdbm: both ship
> /usr/lib/python3.10/lib-dynload/_dbm.cpython-310-x86_64-linux-gnu.so
> sorry for the noise.

python3-qgis (3.22.4+dfsg-3) also has the dependency:

 
https://salsa.debian.org/debian-gis-team/qgis/-/blob/debian/3.22.4+dfsg-3/debian/control#L368

python3-qgis (3.22.4+dfsg-1) did not:

 
https://salsa.debian.org/debian-gis-team/qgis/-/blob/debian/3.22.4+dfsg-1/debian/control#L368

python3-qgis (3.22.4+dfsg-2) fixed it:

 
https://salsa.debian.org/debian-gis-team/qgis/-/blob/debian/3.22.4+dfsg-2/debian/control#L368

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From rdmailings at duif.net  Fri Mar 11 03:27:13 2022
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 11 Mar 2022 12:27:13 +0100
Subject: [QGIS-Developer] "Loaded project file was meanwhile changed"... how
 to handle
Message-ID: <cb781c19-0ca8-c1df-f7d4-a1ed55fde6a0@duif.net>

Hi Devs,

I have a plugin which set's a custom-property in a layer, AND then saves the project (pyqgis/plugin), just to be sure the property is actually written in it...

But now I get the screenshot's message: "Loaded project file was meanwhile changed ..." when I try to save the project within QGIS gui itself after that.

What is in this the best way to handle this?

- should I NOT save the project (and maybe 'loose' my carefully set custom props because the user just does not save the project when quitting or loading another one)

- should I ask the user to: "This would save your QGIS project too, are you sure", but then writing the project in pyqgis should result in the popup message?
(or I could also ask the user to do this: "Please save your project now, to be sure it saves your additional layer info")

- should/can we 'reload' the project when you save it via pyqgis?

- should we ask the user to reload the project after a save?

or are there other options to handle this (I think not very uncommon) use case?

Thanks for any insights

Regards,

Richard Duivenvoorde
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot-20220311121852-502x209.png
Type: image/png
Size: 27326 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220311/6958393e/attachment-0001.png>

From job.kadlecova at gmail.com  Mon Mar 14 11:47:05 2022
From: job.kadlecova at gmail.com (Lucia Kadlecova)
Date: Mon, 14 Mar 2022 19:47:05 +0100
Subject: [QGIS-Developer] enabling proxy for wms/wmts layer
Message-ID: <CAPKJuGwBoAw1S8AR5vf=1MxwNW4rb3tj6Bd8y4jnOKjvi-a3Dw@mail.gmail.com>

Hello,
I would like to ask how to enable proxies when adding WMTS via WMS. On
server where I run standalone QGIS python to access the WMTS I need to
execute below commands to be able connect from server to net.

export http_proxy=http://xx.xx.xx.xx:8080/
export https_proxy=https://xx.xx.xx.xx:8080/

I tried to add to below code via subprocess.run, but no success

projectName = 'wms_load'
project = QgsProject.instance()
urlWithParams =
'crs=EPSG:3857&dpiMode=7&format=image/png&layers=geolandbasemap&styles=normal&tileMatrixSet=google3857&url=https://www.basemap.at/wmts/1.0.0/WMTSCapabilities.xml'

rlayer = QgsRasterLayer(urlWithParams, 'geolandbasemap', 'wms')
if not rlayer.isValid():
  print("Layer failed to load!")
else:
    print('Layer loaded')
project.addMapLayer(rlayer)

project = QgsProject.instance()
project.write()

qgs.exitQgis()


Thank you
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220314/9d50da4d/attachment.html>

From rdmailings at duif.net  Tue Mar 15 00:26:09 2022
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 15 Mar 2022 08:26:09 +0100
Subject: [QGIS-Developer] enabling proxy for wms/wmts layer
In-Reply-To: <CAPKJuGwBoAw1S8AR5vf=1MxwNW4rb3tj6Bd8y4jnOKjvi-a3Dw@mail.gmail.com>
References: <CAPKJuGwBoAw1S8AR5vf=1MxwNW4rb3tj6Bd8y4jnOKjvi-a3Dw@mail.gmail.com>
Message-ID: <9c45c351-d216-3d67-e665-07d154c24856@duif.net>

On 3/14/22 19:47, Lucia Kadlecova via QGIS-Developer wrote:
> Hello,
> I would like to ask how to enable proxies when adding WMTS via WMS. On server where I run standalone QGIS python to access the WMTS I need to execute below commands to be able connect from server to net.
> 
> export http_proxy=http://xx.xx.xx.xx:8080/ <http://xx.xx.xx.xx:8080/>
> export https_proxy=https://xx.xx.xx.xx:8080/ <https://xx.xx.xx.xx:8080/>
> 
> I tried to add to below code via subprocess.run, but no success
> 
> |projectName = 'wms_load' project = QgsProject.instance() urlWithParams = 'crs=EPSG:3857&dpiMode=7&format=image/png&layers=geolandbasemap&styles=normal&tileMatrixSet=google3857&url=https://www.basemap.at/wmts/1.0.0/WMTSCapabilities.xml <https://www.basemap.at/wmts/1.0.0/WMTSCapabilities.xml>' rlayer = QgsRasterLayer(urlWithParams, 'geolandbasemap', 'wms') if not rlayer.isValid(): print("Layer failed to load!") else: print('Layer loaded') project.addMapLayer(rlayer) project = QgsProject.instance() project.write() qgs.exitQgis()|

Hi Lucia,

For what I know QGIS is not picking up the proxies from the environment. It is using
https://qgis.org/pyqgis/3.6/core/QgsNetworkAccessManager.html for all network requests, and (like you have to explicitly set a proxy in settings/network in QGIS) you probably have to use/set a 'proxyFactory' in your code.

Not 100% sure about this, and I agree that it would be better/nice if Qt/QGIS would pick up proxy settings from the environment (and maybe it does, can you ask in you script for that?).

Regards,

Richard Duivenvoorde

From regis.haubourg at gmail.com  Tue Mar 15 04:00:51 2022
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Tue, 15 Mar 2022 12:00:51 +0100
Subject: [QGIS-Developer] Improve postgresql network latency by using
 "pipeline mode" connexion ?
Message-ID: <CABgOYCcsjs6UD+ihTPSF34H6Ofdsaj_QwHdfc-KMUKZw1ZcV+Q@mail.gmail.com>

Hi all,
The article [0] popped today about the new pipeline mode [1] in postgresql
14 libpq.
This could improve transaction latencies with databases that could be in
slow networks or cloud hosting.
It does not improve all the use cases, but it seems possibly interesting
for editing sessions by reducing round trips between client and server.

Has anyone already explored this ?

Best regards
R?gis

[0]
https://www.cybertec-postgresql.com/en/pipeline-mode-better-performance-on-slow-network/
[1] https://www.postgresql.org/docs/14/libpq-pipeline-mode.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220315/5aafe85f/attachment.html>

From rdmailings at duif.net  Tue Mar 15 09:29:36 2022
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 15 Mar 2022 17:29:36 +0100
Subject: [QGIS-Developer] Casting a SimpleMarker (renderer) to a SimpleFill
 one?
Message-ID: <06d8e2c9-73ce-8035-dea2-47e7e4308c61@duif.net>

Hi,

I'm wondering if there is an easy way to put the (mostly colors) of a Point-layer upon another Polygon layer.
(I recall Andreas also wrote about this?)

Usecase: having a layer with a lot of measuring points on it, rule-based styled on value.
Creating a Voronoi-layer from it, and being able to use the (point) rules on that polygons (having the same value)..

I'm able to 'do this' by saving as qml and then hand editing some properties:

class="SimpleMarker"
to
class="SimpleFill"

<symbol name="0" clip_to_extent="1" force_rhr="0" alpha="1" type="marker">
to
<symbol name="0" clip_to_extent="1" force_rhr="0" alpha="1" type="fill">

<layerGeometryType>o</layerGeometryType>
to
<layerGeometryType>2</layerGeometryType>


But I wondered if there is/should be a 'cleaner' way.

Tried [0]:
renderer = layer1.rendererV2()
layer2.setRenderer(renderer)
but that crashes QGIS if you try to open/change a symbol.

Is there a way to do this easier then:
- walk over the rules
- create a QgsSymbolV2.defaultSymbol(layer.geometryType())'s
- copy over some properties...

I'm aware that off course there is a big difference between the point and polygon styles/renderers, but I also think it would be nice to be able to (in QGIS itself) to 'copy' the point style to a polygon style and only take with it whatever 'fits'?

Anybody some info/idea's?

Regards,

Richard Duivenvoorde


[0] https://snorfalorpagus.net/blog/2014/03/04/symbology-of-vector-layers-in-qgis-python-plugins/

From p.bircher at parks.swiss  Tue Mar 15 10:36:39 2022
From: p.bircher at parks.swiss (=?iso-8859-1?Q?Pascal_Bircher_/_Netzwerk_Schweizer_P=E4rke?=)
Date: Tue, 15 Mar 2022 17:36:39 +0000
Subject: [QGIS-Developer] PostGIS Raster loading extrem long in QGIS 3.16
 and 3.22
In-Reply-To: <GV0P278MB0752BAE954A2B5551F1C6666F9109@GV0P278MB0752.CHEP278.PROD.OUTLOOK.COM>
References: <GV0P278MB0752704ECBDB5E5C45B47648F9109@GV0P278MB0752.CHEP278.PROD.OUTLOOK.COM>
 <GV0P278MB0752BAE954A2B5551F1C6666F9109@GV0P278MB0752.CHEP278.PROD.OUTLOOK.COM>
Message-ID: <GV0P278MB07520AC8A7FE03C864EB3EADF9109@GV0P278MB0752.CHEP278.PROD.OUTLOOK.COM>

Dear QGIS-Developer
I am working on a test-server (RAID6) implementing PostgreSQL/PostGIS with vector and raster support. The aim is a big database sharing different data types including high resolution (0.5m, also 0.1m; 8 bit; 3 bands) rasters and (2m, also 0.5m; 32bit floating point; 1 band) rasters.

For QGIS 3.16 and 3.22 I can report the following issue.
When I try to add a PostGIS raster with 32 bit floating point and a resolution of 2m into QGIS the query SELECT ST_SummaryStatsAgg() needs a lot of time at least 10-20 minutes on database.

Another interesting aspect I observed is that QGIS 3.10.4 loads the same raster nearly instantly.

I do not understand why a postgis-raster needs 10-20min to load in QGIS 3.16 and 3.22 and QGIS 3.10.4 does not run the above mentioned query on the database.

Kind regards

---
Pascal Bircher
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220315/081b2bf1/attachment.html>

From apasotti at gmail.com  Tue Mar 15 10:53:54 2022
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 15 Mar 2022 18:53:54 +0100
Subject: [QGIS-Developer] PostGIS Raster loading extrem long in QGIS
 3.16 and 3.22
In-Reply-To: <GV0P278MB07520AC8A7FE03C864EB3EADF9109@GV0P278MB0752.CHEP278.PROD.OUTLOOK.COM>
References: <GV0P278MB0752704ECBDB5E5C45B47648F9109@GV0P278MB0752.CHEP278.PROD.OUTLOOK.COM>
 <GV0P278MB0752BAE954A2B5551F1C6666F9109@GV0P278MB0752.CHEP278.PROD.OUTLOOK.COM>
 <GV0P278MB07520AC8A7FE03C864EB3EADF9109@GV0P278MB0752.CHEP278.PROD.OUTLOOK.COM>
Message-ID: <CAL5Q670Wo6knYwsp4Picn=f5YhzhB1rmNST=WjNzkibbq1=cfA@mail.gmail.com>

Hi,

the reason for the different behavior is that the old QGIS version was
using GDAL to access PG rasters while the new versions uses a QGIS native
data provider which is using ST_SummaryStatsAgg() to calculate statistics,
I believe that this call can become very slow on large rasters and we
should probably reduce the time by using a smaller sample size but this has
to be implemented/fixed yet, feel free to file a ticket on the QGIS bug
tracker.

The good news is the you can still load the raster from QGIS using the GDAL
provider with a connection string that looks like this:  "PG:
dbname={dbname} mode=2 host={host} port={port} table={table}
schema={schema} sslmode=disable"

Hope this helps.

Regards.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220315/1905dc86/attachment.html>

From nyall.dawson at gmail.com  Thu Mar 17 15:36:32 2022
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 18 Mar 2022 08:36:32 +1000
Subject: [QGIS-Developer] PSA: Please don't use QVariant::canConvert in any
 new code
Message-ID: <CAB28AshVdrac+CtnzNEYE8Yqrk1mmVwLaBCk5hiC-3wBbVm4LA@mail.gmail.com>

Hi list,

Quick heads up: please DON'T use QVariant::canConvert in any new code
introduced to QGIS. This function has had an extremely subtle change
of meaning in Qt6, so code which uses  canConvert will NOT work
correctly on Qt 6 builds.

To explain:

In Qt 5 this would return true if the value could be represented as
the specified type -- so calling .canConvert< QString >() would return
true for string and numeric variant values, but return false for some
object which can't be converted to a string (e.g. a QgsGeometry)

In qt 6 canConvert returns true if it's THEORETICALLY possible to
convert a variant to that type, regardless of what the value in the
variant actually is. So canConvert< QString >() returns true even if
the result of conversion would just be an empty string (e.g. when the
variant stores a geometry).

The only safe way to handle this situation now is by manually checking
the QVariant.type().

Nyall

From wonder.sk at gmail.com  Thu Mar 17 16:36:15 2022
From: wonder.sk at gmail.com (Martin Dobias)
Date: Fri, 18 Mar 2022 00:36:15 +0100
Subject: [QGIS-Developer] QGIS and WebAssembly
Message-ID: <CAC2XbFezRHKFcqtsTYsoX=-0sVoH7VRMC12WYjVf94H-BN=-zg@mail.gmail.com>

Hi all

Recently I was wondering if it would be possible to have QGIS running
natively in browser thanks to WebAssembly. Many hours later, I have a
small, very rough, proof of concept:
https://wonder-sk.github.io/wasm/qgis.html

If you have a reasonably up-to-date browser, you should be able to browse
the map - zoom in/out and move map, either with buttons or by dragging map
and using mouse wheel. And you can switch to other demo projects (but not
all work fully at this point).

For those that are not familiar with WebAssembly - the whole point here is
that ALL the map rendering is happening in your browser, there is no
server-side rendering going on. The demo QGIS projects get downloaded (as
.qgz) together with the source data files (.gpkg, .shp, .tif or others) and
all this gets loaded and processed by the browser.

How is the demo built: there's qgis core library with gdal/ogr provider and
the usual dependencies (PROJ, GDAL, GEOS etc), all compiled to a single
.wasm file using Emscripten. The output binary is over 30 MB, but it
compresses well to ~12 MB with gzip. It is built on top of Qt6 and many
hacks to get things somehow going. I have created a minimal C API (used
from JavaScript) to load a QGIS project, do rendering to a QImage and then
a bit of JavaScript to display the map image in HTML canvas and handle map
navigation.

There is a long list of issues that would need to be solved in order to get
something useful out of this, but I am really excited about the prospect of
being able to run QGIS code natively in a web browser(!). WebAssembly is
nowadays supported by over 90% web users according to
https://caniuse.com/wasm - so it's quite widely available.

With some development effort, it will be possible to use WebAssembly to our
advantage in various ways. Imagine that people could just go to qgis.org
and start their QGIS session in the web browser (without draining QGIS
infrastructure - all code/rendering is run on the client!).

I am very keen to hear what you think about QGIS and WebAssembly. In the
coming days I would like to also get the build system and my hacks
available in a git repo, so that others can start to play with it...

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220318/4904c670/attachment.html>

From sylvain.pierre at alsace.eu  Fri Mar 18 01:16:48 2022
From: sylvain.pierre at alsace.eu (PIERRE Sylvain)
Date: Fri, 18 Mar 2022 08:16:48 +0000
Subject: [QGIS-Developer] donuts charts
Message-ID: <PR1P264MB2046DED2AB3ED8114F6544D89C139@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>

Hi all,

Is there something already exists or planed to make a map with donuts charts instead of pie charts ?
I do not find anything yet.
Il I look at plotly, it seems realy simple : https://support.sisense.com/kb/en/article/donut-charts-%E2%80%94-plotly
Do you think it should be difficult to manage a new ? hole ? parameter in Qgis charts ?

Thanks

[cid:image002.jpg at 01D83AA8.E5138C90]
Sylvain PIERRE
Chef de projet syst?me d'information
Direction des Syst?mes d'Information et du D?veloppement Num?rique
Service Projets et Ing?nierie Num?rique
Collectivit? europ?enne d'Alsace
T?l : 03 88 76 68 88
sylvain.pierre at alsace.eu<mailto:sylvain.pierre at alsace.eu>
www.alsace.eu<http://www.alsace.eu>
[facebook]<http://www.facebook.com/toutelalsace> [twitter] <http://www.twitter.com/toutelalsace>  [insta] <http://www.instagram.com/toutelalsace>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220318/139fadaa/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 8103 bytes
Desc: image002.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220318/139fadaa/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 827 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220318/139fadaa/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 853 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220318/139fadaa/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.png
Type: image/png
Size: 1038 bytes
Desc: image008.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220318/139fadaa/attachment-0005.png>

From mats.taraldsvik at gmail.com  Fri Mar 18 01:26:04 2022
From: mats.taraldsvik at gmail.com (Mats Taraldsvik)
Date: Fri, 18 Mar 2022 09:26:04 +0100
Subject: [QGIS-Developer] QGIS and WebAssembly
In-Reply-To: <CAC2XbFezRHKFcqtsTYsoX=-0sVoH7VRMC12WYjVf94H-BN=-zg@mail.gmail.com>
References: <CAC2XbFezRHKFcqtsTYsoX=-0sVoH7VRMC12WYjVf94H-BN=-zg@mail.gmail.com>
Message-ID: <CAGs3qpS1Qerj1MkwxaMTXt=kfNmqZVGsBB_-ibypO=XJKKcmEA@mail.gmail.com>

Very cool :)

WebAssembly is also useful on the desktop: Another opportunity with
WebAssembly is supporting qgis plugins as  an alternative to python/c++. It
would provide the versatility of python (can be used across platforms) with
near native performance. I think WebAssembly isn't ready/mature for this
just yet (waiting on the component model to mature (
https://github.com/WebAssembly/component-model), but it might be a good
option - WebAssembly modules/binaries can be written in many different
programming languages so not limited to python and c++...

On Fri, Mar 18, 2022 at 12:36 AM Martin Dobias via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Hi all
>
> Recently I was wondering if it would be possible to have QGIS running
> natively in browser thanks to WebAssembly. Many hours later, I have a
> small, very rough, proof of concept:
> https://wonder-sk.github.io/wasm/qgis.html
>
> If you have a reasonably up-to-date browser, you should be able to browse
> the map - zoom in/out and move map, either with buttons or by dragging map
> and using mouse wheel. And you can switch to other demo projects (but not
> all work fully at this point).
>
> For those that are not familiar with WebAssembly - the whole point here is
> that ALL the map rendering is happening in your browser, there is no
> server-side rendering going on. The demo QGIS projects get downloaded (as
> .qgz) together with the source data files (.gpkg, .shp, .tif or others) and
> all this gets loaded and processed by the browser.
>
> How is the demo built: there's qgis core library with gdal/ogr provider
> and the usual dependencies (PROJ, GDAL, GEOS etc), all compiled to a single
> .wasm file using Emscripten. The output binary is over 30 MB, but it
> compresses well to ~12 MB with gzip. It is built on top of Qt6 and many
> hacks to get things somehow going. I have created a minimal C API (used
> from JavaScript) to load a QGIS project, do rendering to a QImage and then
> a bit of JavaScript to display the map image in HTML canvas and handle map
> navigation.
>
> There is a long list of issues that would need to be solved in order to
> get something useful out of this, but I am really excited about the
> prospect of being able to run QGIS code natively in a web browser(!).
> WebAssembly is nowadays supported by over 90% web users according to
> https://caniuse.com/wasm - so it's quite widely available.
>
> With some development effort, it will be possible to use WebAssembly to
> our advantage in various ways. Imagine that people could just go to
> qgis.org and start their QGIS session in the web browser (without
> draining QGIS infrastructure - all code/rendering is run on the client!).
>
> I am very keen to hear what you think about QGIS and WebAssembly. In the
> coming days I would like to also get the build system and my hacks
> available in a git repo, so that others can start to play with it...
>
> Cheers
> Martin
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220318/1dda833f/attachment.html>

From giulio.fattori at tin.it  Fri Mar 18 03:56:23 2022
From: giulio.fattori at tin.it (Giulio Fattori)
Date: Fri, 18 Mar 2022 11:56:23 +0100
Subject: [QGIS-Developer] donuts charts
In-Reply-To: <PR1P264MB2046DED2AB3ED8114F6544D89C139@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
References: <PR1P264MB2046DED2AB3ED8114F6544D89C139@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
Message-ID: <3280d6ed-a562-7d26-aba3-aa89aeea04b5@tin.it>

Il 18/03/2022 09:16, PIERRE Sylvain via QGIS-Developer ha scritto:
>
> Hi all,
>
> Is there something already exists or planed to make a map with donuts 
> charts instead of pie charts??
>
> I do not find anything yet.
>
> Il I look at plotly, it seems realy simple?: 
> https://support.sisense.com/kb/en/article/donut-charts-%E2%80%94-plotly
>
> Do you think it should be difficult to manage a new ??hole?? parameter 
> in Qgis charts??
>
> Thanks
>
> **
>
> 	
>
> Sylvain PIERRE**
>
> Chef de projet syst?me d?information
>
> Direction des Syst?mes d?Information et du D?veloppement Num?rique
>
> Service Projets et Ing?nierie Num?rique
>
> *Collectivit? europ?enne d?Alsace*
>
> T?l :?03 88 76 68 88
>
> sylvain.pierre at alsace.eu <mailto:sylvain.pierre at alsace.eu>
>
> www.alsace.eu <http://www.alsace.eu>
>
> facebook <http://www.facebook.com/toutelalsace>twitter 
> <http://www.twitter.com/toutelalsace>insta 
> <http://www.instagram.com/toutelalsace>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer

Hi,

try this

https://hfcqgis.opendatasicilia.it/gr_funzioni/custom/custom_unico/#svg_pie

Best Regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220318/14c49c60/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 8103 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220318/14c49c60/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220318/14c49c60/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 853 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220318/14c49c60/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.png
Type: image/png
Size: 1038 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220318/14c49c60/attachment-0005.png>

From r.nijssen at terglobo.nl  Fri Mar 18 08:12:46 2022
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Fri, 18 Mar 2022 16:12:46 +0100
Subject: [QGIS-Developer] Possible Contributor Meeting in April 2022
Message-ID: <3d1e928b6fa6c0080532ac6041b8fae7.squirrel@daweb26.oxilion.nl>

We are happy to announce the opportunity to host the postponed 2020 QGIS
Contributor Meeting in 's-Hertogenbosch, The Netherlands.

We have 2 options in the last weeks of April 2022. Because this is so soon
we'd like to know how many contributors would be able to attend. Would you
please fill out the form on github wiki page:

https://github.com/qgis/QGIS/wiki/24th-Contributor-Meeting-in-'s-Hertogenbosch#spring-2022-meeting

Hope this will happen, really looking forward to meet you all in person
again!

Kind regards,
Rosa, Aron, Raymond



From sault.don at gmail.com  Sat Mar 19 09:17:00 2022
From: sault.don at gmail.com (Saulteau Don)
Date: Sat, 19 Mar 2022 09:17:00 -0700
Subject: [QGIS-Developer] not building against pdal 2.4.0rc1
Message-ID: <CAJo0jfMg5d6rTrkXXsnNvPHN2H4Qh86jOqLP7fO0vLQYKP8QZw@mail.gmail.com>

Trying to build qgis from the 3.24 release branch on github and testing
against pdal 2.4.0rc1.

It fails with the following about a missing pdal function no longer exists:

[ 39%] Automatic MOC for target provider_pdal
> [ 39%] Built target provider_pdal_autogen
> [ 39%] Building CXX object
> src/providers/pdal/CMakeFiles/provider_pdal.dir/provider_pdal_autogen/mocs_compilation.cpp.o
> [ 39%] Building CXX object
> src/providers/pdal/CMakeFiles/provider_pdal.dir/qgspdalprovider.cpp.o
> /build/qgis/src/qgis/src/providers/pdal/qgspdalprovider.cpp: In member
> function ?bool QgsPdalProvider::load(const QString&)?:
> /build/qgis/src/qgis/src/providers/pdal/qgspdalprovider.cpp:235:58: error:
> use of deleted function ?pdal::LasHeader::LasHeader(const pdal::LasHeader&)?
>   235 |     const pdal::LasHeader las_header = las_reader.header();
>       |                                                          ^
> In file included from
> /build/qgis/src/qgis/src/providers/pdal/qgspdalprovider.cpp:32:
> /usr/include/pdal/io/LasHeader.hpp:70:16: note:
> ?pdal::LasHeader::LasHeader(const pdal::LasHeader&)? is implicitly deleted
> because the default definition would be ill-formed:
>    70 | class PDAL_DLL LasHeader
>       |                ^~~~~~~~~
> /usr/include/pdal/io/LasHeader.hpp:70:16: error: use of deleted function
> ?std::unique_ptr<_Tp, _Dp>::unique_ptr(const std::unique_ptr<_Tp, _Dp>&)
> [with _Tp = pdal::LasHeader::Private; _Dp =
> std::default_delete<pdal::LasHeader::Private>]?
> In file included from /usr/include/c++/11.2.0/memory:76,
>                  from /build/qgis/src/qgis/src/core/qgis.h:24,
>                  from
> /build/qgis/src/qgis/src/providers/pdal/qgspdalprovider.cpp:18:
> /usr/include/c++/11.2.0/bits/unique_ptr.h:468:7: note: declared here
>   468 |       unique_ptr(const unique_ptr&) = delete;
>       |       ^~~~~~~~~~
> make[2]: ***
> [src/providers/pdal/CMakeFiles/provider_pdal.dir/build.make:90:
> src/providers/pdal/CMakeFiles/provider_pdal.dir/qgspdalprovider.cpp.o]
> Error 1
> make[1]: *** [CMakeFiles/Makefile2:7798:
> src/providers/pdal/CMakeFiles/provider_pdal.dir/all] Error 2
> make: *** [Makefile:166: all] Error 2
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220319/842a2223/attachment.html>

From ujaval at spatialthoughts.com  Mon Mar 21 00:00:57 2022
From: ujaval at spatialthoughts.com (Ujaval Gandhi)
Date: Mon, 21 Mar 2022 12:30:57 +0530
Subject: [QGIS-Developer] Packages for arm64 version of ubuntu
In-Reply-To: <a370fe80-57d4-9c1c-d360-3f703dcfe7d9@kagou.fr>
References: <a370fe80-57d4-9c1c-d360-3f703dcfe7d9@kagou.fr>
Message-ID: <CALymcQAiHoJ5-wi6CfFnqpB9HzvFbkfujGrV_PcAhr1M1-ek2Q@mail.gmail.com>

I was able to get a Ubuntu 20.04 VM running on Mac M1 (arm64) using UTM
<https://mac.getutm.app/gallery/ubuntu-20-04>. QGIS install works but the
latest installer is for QGIS 3.10.

The latest ltr 3.22 also has arm64 package but they are available only on
Ubuntu 22.04 https://packages.ubuntu.com/search?keywords=qgis

[image: Logo] <https://spatialthoughts.com/>
Ujaval Gandhi
Spatial Thoughts
mobile: +91-8095684687
email: ujaval at spatialthoughts.com
[image: LinkedIn icon] <https://www.linkedin.com/in/spatialthoughts/>  [image:
Twitter icon] <https://twitter.com/spatialthoughts>



On Tue, Feb 15, 2022 at 4:10 PM Kagou <kagou at kagou.fr> wrote:

> Is it possible to have the arm64 architecture supported for ubuntu ?
>
> Regards
> Patrice Vetsel
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220321/b1f9e5af/attachment.html>

From rdmailings at duif.net  Mon Mar 21 06:40:54 2022
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 21 Mar 2022 14:40:54 +0100
Subject: [QGIS-Developer] Temporal Controller: Select current visible
 features??
Message-ID: <ff333d8accd0848148e219b6678a5d52@duif.net>

Hi Dev's,

See also: https://github.com/qgis/QGIS/issues/47893

I'm trying to find a way to programmatically (only) select the current 
visible features in a vector layer which is controlled by the Temporal 
Controller.

As 'select by rectangle' in the gui works... I thought to use:

iface.mapCanvas().currentLayer().selectByRect(iface.mapCanvas().currentLayer().extent())

but that selects ALL features (not taking the Temporal Controller into 
account).

Anybody aware of a way to do this?
Going to try to get the temporal expression maybe and then select by 
expression?

I'm also wondering how we should conceptually view the Temporal 
Controller: as a Filter or more as a sort of style/rendering thing.

Depending on that all selection tools should behave in the same way I 
think?

Any input appreciated,

Regards,

Richard Duivenvoorde

PS context about why you would like to select the visible features: I'm 
thinking about some kind of on the fly voronoi-ing of the point layer, 
to have a heatmap-like polygon layer... Same would be needed to actually 
create a heatmap (per timestep)...

From apasotti at gmail.com  Mon Mar 21 08:56:13 2022
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Mon, 21 Mar 2022 16:56:13 +0100
Subject: [QGIS-Developer] issue transforming coords from EPSG:4258 'ETRS89'
 to 4326
Message-ID: <CAL5Q673T2q_0crfm_O_qOEryb85wXJrkhrNj_8xBes9wcco37g@mail.gmail.com>

Hi,

I'm not sure if this is a local issue on my dev env or if it is a real
issue, I have a raster layer in EPSG:4258 ('ETRS89') from copernicus and
the project's CRS is 4326, the transformation silently fails and the raster
is not reprojected.

The issue can be reproduced from the console too:

ct = QgsCoordinateTransform(QgsCoordinateReferenceSystem(4258),
QgsCoordinateReferenceSystem(4326),
QgsProject.instance().transformContext())

ct.transformBoundingBox(QgsRectangle(4153600, 1296000, 5000000, 2000000))

ct.isValid()

True


Result:

<QgsRectangle: 4153600 1296000, 5000000.00000001396983862
1999999.99999999720603228>


Any ideas?

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220321/548e1bc2/attachment.html>

From even.rouault at spatialys.com  Mon Mar 21 09:04:43 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 21 Mar 2022 17:04:43 +0100
Subject: [QGIS-Developer] issue transforming coords from EPSG:4258
 'ETRS89' to 4326
In-Reply-To: <CAL5Q673T2q_0crfm_O_qOEryb85wXJrkhrNj_8xBes9wcco37g@mail.gmail.com>
References: <CAL5Q673T2q_0crfm_O_qOEryb85wXJrkhrNj_8xBes9wcco37g@mail.gmail.com>
Message-ID: <f57cd9f6-272c-3a92-07c4-3bfb0e3152fb@spatialys.com>

Alessandro,

the truth (and sometimes issues) is in projinfo:

$ projinfo -s EPSG:4258 -t EPSG:4326
Candidate operations found: 1
-------------------------------------
Operation No. 1:

EPSG:1149, ETRS89 to WGS 84 (1), 1.0 m, Europe - onshore and offshore: 
Albania; Andorra; Austria; Belgium; Bosnia and Herzegovina; Bulgaria; 
Croatia; Cyprus; Czechia; Denmark; Estonia; Faroe Islands; Finland; 
France; Germany; Gibraltar; Greece; Hungary; Ireland; Italy; Kosovo; 
Latvia; Liechtenstein; Lithuania; Luxembourg; Malta; Moldova; Monaco; 
Montenegro; Netherlands; North Macedonia; Norway including Svalbard and 
Jan Mayen; Poland; Portugal; Romania; San Marino; Serbia; Slovakia; 
Slovenia; Spain; Sweden; Switzerland; United Kingdom (UK) including 
Channel Islands and Isle of Man; Vatican City State.

PROJ string:
+proj=noop

WKT2:2019 string:
COORDINATEOPERATION["ETRS89 to WGS 84 (1)",
 ??? VERSION["EPSG-eur"],
 ??? SOURCECRS[
 ??????? GEOGCRS["ETRS89",
 ??????????? ENSEMBLE["European Terrestrial Reference System 1989 ensemble",
 ??????????????? MEMBER["European Terrestrial Reference Frame 1989"],
 ??????????????? MEMBER["European Terrestrial Reference Frame 1990"],
 ??????????????? MEMBER["European Terrestrial Reference Frame 1991"],
 ??????????????? MEMBER["European Terrestrial Reference Frame 1992"],
 ??????????????? MEMBER["European Terrestrial Reference Frame 1993"],
 ??????????????? MEMBER["European Terrestrial Reference Frame 1994"],
 ??????????????? MEMBER["European Terrestrial Reference Frame 1996"],
 ??????????????? MEMBER["European Terrestrial Reference Frame 1997"],
 ??????????????? MEMBER["European Terrestrial Reference Frame 2000"],
 ??????????????? MEMBER["European Terrestrial Reference Frame 2005"],
 ??????????????? MEMBER["European Terrestrial Reference Frame 2014"],
 ??????????????? ELLIPSOID["GRS 1980",6378137,298.257222101,
 ??????????????????? LENGTHUNIT["metre",1]],
 ??????????????? ENSEMBLEACCURACY[0.1]],
 ??????????? PRIMEM["Greenwich",0,
 ??????????????? ANGLEUNIT["degree",0.0174532925199433]],
 ??????????? CS[ellipsoidal,2],
 ??????????????? AXIS["geodetic latitude (Lat)",north,
 ??????????????????? ORDER[1],
 ??????????????????? ANGLEUNIT["degree",0.0174532925199433]],
 ??????????????? AXIS["geodetic longitude (Lon)",east,
 ??????????????????? ORDER[2],
 ??????????????????? ANGLEUNIT["degree",0.0174532925199433]],
 ??????????? ID["EPSG",4258]]],
 ??? TARGETCRS[
 ??????? GEOGCRS["WGS 84",
 ??????????? ENSEMBLE["World Geodetic System 1984 ensemble",
 ??????????????? MEMBER["World Geodetic System 1984 (Transit)"],
 ??????????????? MEMBER["World Geodetic System 1984 (G730)"],
 ??????????????? MEMBER["World Geodetic System 1984 (G873)"],
 ??????????????? MEMBER["World Geodetic System 1984 (G1150)"],
 ??????????????? MEMBER["World Geodetic System 1984 (G1674)"],
 ??????????????? MEMBER["World Geodetic System 1984 (G1762)"],
 ??????????????? MEMBER["World Geodetic System 1984 (G2139)"],
 ??????????????? ELLIPSOID["WGS 84",6378137,298.257223563,
 ??????????????????? LENGTHUNIT["metre",1]],
 ??????????????? ENSEMBLEACCURACY[2.0]],
 ??????????? PRIMEM["Greenwich",0,
 ??????????????? ANGLEUNIT["degree",0.0174532925199433]],
 ??????????? CS[ellipsoidal,2],
 ??????????????? AXIS["geodetic latitude (Lat)",north,
 ??????????????????? ORDER[1],
 ??????????????????? ANGLEUNIT["degree",0.0174532925199433]],
 ??????????????? AXIS["geodetic longitude (Lon)",east,
 ??????????????????? ORDER[2],
 ??????????????????? ANGLEUNIT["degree",0.0174532925199433]],
 ??????????? ID["EPSG",4326]]],
 ??? METHOD["Geocentric translations (geog2D domain)",
 ??????? ID["EPSG",9603]],
 ??? PARAMETER["X-axis translation",0,
 ??????? LENGTHUNIT["metre",1],
 ??????? ID["EPSG",8605]],
 ??? PARAMETER["Y-axis translation",0,
 ??????? LENGTHUNIT["metre",1],
 ??????? ID["EPSG",8606]],
 ??? PARAMETER["Z-axis translation",0,
 ??????? LENGTHUNIT["metre",1],
 ??????? ID["EPSG",8607]],
 ??? OPERATIONACCURACY[1.0],
 ??? USAGE[
 ??????? SCOPE["(null/copy) Approximation for medium and low accuracy 
applications assuming equality between plate-fixed static and 
earth-fixed dynamic CRSs, ignoring static/dynamic CRS differences."],
 ??????? AREA["Europe - onshore and offshore: Albania; Andorra; Austria; 
Belgium; Bosnia and Herzegovina; Bulgaria; Croatia; Cyprus; Czechia; 
Denmark; Estonia; Faroe Islands; Finland; France; Germany; Gibraltar; 
Greece; Hungary; Ireland; Italy; Kosovo; Latvia; Liechtenstein; 
Lithuania; Luxembourg; Malta; Moldova; Monaco; Montenegro; Netherlands; 
North Macedonia; Norway including Svalbard and Jan Mayen; Poland; 
Portugal; Romania; San Marino; Serbia; Slovakia; Slovenia; Spain; 
Sweden; Switzerland; United Kingdom (UK) including Channel Islands and 
Isle of Man; Vatican City State."],
 ??????? BBOX[32.88,-16.1,84.73,40.18]],
 ??? ID["EPSG",1149],
 ??? REMARK["ETRS89 and WGS 84 are realizations of ITRS coincident to 
within 1 metre. This transformation has an accuracy equal to the 
coincidence figure."]]

So basically ETRS89 and WGS 84 are considered the same with a 1 metre 
accuracy when considering the generic/datum ensemble versions of 
EPSG:4258 and EPSG:4326. You might possibly get time-dependent 
transformations if considering one of the ETRFxxxx realization and a WGS 
84 (Gyyyy) / ITRFzzzz realization instead.

Even

Le 21/03/2022 ? 16:56, Alessandro Pasotti via QGIS-Developer a ?crit?:
> Hi,
>
> I'm not sure if this is a local issue on my dev env or if it is a real 
> issue, I have a raster layer in EPSG:4258 ('ETRS89') from copernicus 
> and the project's CRS is 4326, the transformation silently fails and 
> the raster is not reprojected.
>
> The issue can be reproduced from the console too:
>
> ct = QgsCoordinateTransform(QgsCoordinateReferenceSystem(4258), 
> QgsCoordinateReferenceSystem(4326), 
> QgsProject.instance().transformContext())
>
> ct.transformBoundingBox(QgsRectangle(4153600, 1296000, 5000000, 2000000))
>
> ct.isValid()
>
> True
>
> Result:
>
> <QgsRectangle: 4153600 1296000, 5000000.00000001396983862 
> 1999999.99999999720603228>
>
> Any ideas?
>
>
> -- 
> Alessandro Pasotti
> QCooperative: www.qcooperative.net <https://www.qcooperative.net>
> ItOpen: www.itopen.it <http://www.itopen.it>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220321/07f055ce/attachment-0001.html>

From apasotti at gmail.com  Mon Mar 21 09:21:13 2022
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Mon, 21 Mar 2022 17:21:13 +0100
Subject: [QGIS-Developer] issue transforming coords from EPSG:4258
 'ETRS89' to 4326
In-Reply-To: <f57cd9f6-272c-3a92-07c4-3bfb0e3152fb@spatialys.com>
References: <CAL5Q673T2q_0crfm_O_qOEryb85wXJrkhrNj_8xBes9wcco37g@mail.gmail.com>
 <f57cd9f6-272c-3a92-07c4-3bfb0e3152fb@spatialys.com>
Message-ID: <CAL5Q672Z5yzZNye5oWhRvYfhvxPSeLoDkyU+JZS63Fz3h_pChg@mail.gmail.com>

Hi Even,

thank you, it turned out that the right projection of the raster is ETRS89
Lambert Azimutal Equal Area (IGNF:ETRS89LAEA), sorry for the noise :)



On Mon, Mar 21, 2022 at 5:04 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Alessandro,
>
> the truth (and sometimes issues) is in projinfo:
>
> $ projinfo -s EPSG:4258 -t EPSG:4326
> Candidate operations found: 1
> -------------------------------------
> Operation No. 1:
>
> EPSG:1149, ETRS89 to WGS 84 (1), 1.0 m, Europe - onshore and offshore:
> Albania; Andorra; Austria; Belgium; Bosnia and Herzegovina; Bulgaria;
> Croatia; Cyprus; Czechia; Denmark; Estonia; Faroe Islands; Finland; France;
> Germany; Gibraltar; Greece; Hungary; Ireland; Italy; Kosovo; Latvia;
> Liechtenstein; Lithuania; Luxembourg; Malta; Moldova; Monaco; Montenegro;
> Netherlands; North Macedonia; Norway including Svalbard and Jan Mayen;
> Poland; Portugal; Romania; San Marino; Serbia; Slovakia; Slovenia; Spain;
> Sweden; Switzerland; United Kingdom (UK) including Channel Islands and Isle
> of Man; Vatican City State.
>
> PROJ string:
> +proj=noop
>
> WKT2:2019 string:
> COORDINATEOPERATION["ETRS89 to WGS 84 (1)",
>     VERSION["EPSG-eur"],
>     SOURCECRS[
>         GEOGCRS["ETRS89",
>             ENSEMBLE["European Terrestrial Reference System 1989 ensemble",
>                 MEMBER["European Terrestrial Reference Frame 1989"],
>                 MEMBER["European Terrestrial Reference Frame 1990"],
>                 MEMBER["European Terrestrial Reference Frame 1991"],
>                 MEMBER["European Terrestrial Reference Frame 1992"],
>                 MEMBER["European Terrestrial Reference Frame 1993"],
>                 MEMBER["European Terrestrial Reference Frame 1994"],
>                 MEMBER["European Terrestrial Reference Frame 1996"],
>                 MEMBER["European Terrestrial Reference Frame 1997"],
>                 MEMBER["European Terrestrial Reference Frame 2000"],
>                 MEMBER["European Terrestrial Reference Frame 2005"],
>                 MEMBER["European Terrestrial Reference Frame 2014"],
>                 ELLIPSOID["GRS 1980",6378137,298.257222101,
>                     LENGTHUNIT["metre",1]],
>                 ENSEMBLEACCURACY[0.1]],
>             PRIMEM["Greenwich",0,
>                 ANGLEUNIT["degree",0.0174532925199433]],
>             CS[ellipsoidal,2],
>                 AXIS["geodetic latitude (Lat)",north,
>                     ORDER[1],
>                     ANGLEUNIT["degree",0.0174532925199433]],
>                 AXIS["geodetic longitude (Lon)",east,
>                     ORDER[2],
>                     ANGLEUNIT["degree",0.0174532925199433]],
>             ID["EPSG",4258]]],
>     TARGETCRS[
>         GEOGCRS["WGS 84",
>             ENSEMBLE["World Geodetic System 1984 ensemble",
>                 MEMBER["World Geodetic System 1984 (Transit)"],
>                 MEMBER["World Geodetic System 1984 (G730)"],
>                 MEMBER["World Geodetic System 1984 (G873)"],
>                 MEMBER["World Geodetic System 1984 (G1150)"],
>                 MEMBER["World Geodetic System 1984 (G1674)"],
>                 MEMBER["World Geodetic System 1984 (G1762)"],
>                 MEMBER["World Geodetic System 1984 (G2139)"],
>                 ELLIPSOID["WGS 84",6378137,298.257223563,
>                     LENGTHUNIT["metre",1]],
>                 ENSEMBLEACCURACY[2.0]],
>             PRIMEM["Greenwich",0,
>                 ANGLEUNIT["degree",0.0174532925199433]],
>             CS[ellipsoidal,2],
>                 AXIS["geodetic latitude (Lat)",north,
>                     ORDER[1],
>                     ANGLEUNIT["degree",0.0174532925199433]],
>                 AXIS["geodetic longitude (Lon)",east,
>                     ORDER[2],
>                     ANGLEUNIT["degree",0.0174532925199433]],
>             ID["EPSG",4326]]],
>     METHOD["Geocentric translations (geog2D domain)",
>         ID["EPSG",9603]],
>     PARAMETER["X-axis translation",0,
>         LENGTHUNIT["metre",1],
>         ID["EPSG",8605]],
>     PARAMETER["Y-axis translation",0,
>         LENGTHUNIT["metre",1],
>         ID["EPSG",8606]],
>     PARAMETER["Z-axis translation",0,
>         LENGTHUNIT["metre",1],
>         ID["EPSG",8607]],
>     OPERATIONACCURACY[1.0],
>     USAGE[
>         SCOPE["(null/copy) Approximation for medium and low accuracy
> applications assuming equality between plate-fixed static and earth-fixed
> dynamic CRSs, ignoring static/dynamic CRS differences."],
>         AREA["Europe - onshore and offshore: Albania; Andorra; Austria;
> Belgium; Bosnia and Herzegovina; Bulgaria; Croatia; Cyprus; Czechia;
> Denmark; Estonia; Faroe Islands; Finland; France; Germany; Gibraltar;
> Greece; Hungary; Ireland; Italy; Kosovo; Latvia; Liechtenstein; Lithuania;
> Luxembourg; Malta; Moldova; Monaco; Montenegro; Netherlands; North
> Macedonia; Norway including Svalbard and Jan Mayen; Poland; Portugal;
> Romania; San Marino; Serbia; Slovakia; Slovenia; Spain; Sweden;
> Switzerland; United Kingdom (UK) including Channel Islands and Isle of Man;
> Vatican City State."],
>         BBOX[32.88,-16.1,84.73,40.18]],
>     ID["EPSG",1149],
>     REMARK["ETRS89 and WGS 84 are realizations of ITRS coincident to
> within 1 metre. This transformation has an accuracy equal to the
> coincidence figure."]]
>
> So basically ETRS89 and WGS 84 are considered the same with a 1 metre
> accuracy when considering the generic/datum ensemble versions of EPSG:4258
> and EPSG:4326. You might possibly get time-dependent transformations if
> considering one of the ETRFxxxx realization and a WGS 84 (Gyyyy) / ITRFzzzz
> realization instead.
>
> Even
> Le 21/03/2022 ? 16:56, Alessandro Pasotti via QGIS-Developer a ?crit :
>
> Hi,
>
> I'm not sure if this is a local issue on my dev env or if it is a real
> issue, I have a raster layer in EPSG:4258 ('ETRS89') from copernicus and
> the project's CRS is 4326, the transformation silently fails and the raster
> is not reprojected.
>
> The issue can be reproduced from the console too:
>
> ct = QgsCoordinateTransform(QgsCoordinateReferenceSystem(4258),
> QgsCoordinateReferenceSystem(4326),
> QgsProject.instance().transformContext())
>
> ct.transformBoundingBox(QgsRectangle(4153600, 1296000, 5000000, 2000000))
>
> ct.isValid()
>
> True
>
> Result:
>
> <QgsRectangle: 4153600 1296000, 5000000.00000001396983862
> 1999999.99999999720603228>
>
> Any ideas?
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
>
> _______________________________________________
> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220321/0a862518/attachment.html>

From enzedrailmaps at gmail.com  Mon Mar 21 12:20:48 2022
From: enzedrailmaps at gmail.com (Patrick Dunford)
Date: Tue, 22 Mar 2022 08:20:48 +1300
Subject: [QGIS-Developer] issue transforming coords from EPSG:4258
 'ETRS89' to 4326
In-Reply-To: <CAL5Q673T2q_0crfm_O_qOEryb85wXJrkhrNj_8xBes9wcco37g@mail.gmail.com>
References: <CAL5Q673T2q_0crfm_O_qOEryb85wXJrkhrNj_8xBes9wcco37g@mail.gmail.com>
Message-ID: <1c2d2309-9525-9d2d-080b-a53e3f59b295@gmail.com>

How do you specify the CRS for the raster?

I know that you can assign this in the Qgis software but there is also 
provision to assign CRS in a sidecar file. Which one takes precedence?

On 22/03/22 04:56, Alessandro Pasotti via QGIS-Developer wrote:
> Hi,
>
> I'm not sure if this is a local issue on my dev env or if it is a real 
> issue, I have a raster layer in EPSG:4258 ('ETRS89') from copernicus 
> and the project's CRS is 4326, the transformation silently fails and 
> the raster is not reprojected.
>
>

From enzedrailmaps at gmail.com  Mon Mar 21 12:24:37 2022
From: enzedrailmaps at gmail.com (Patrick Dunford)
Date: Tue, 22 Mar 2022 08:24:37 +1300
Subject: [QGIS-Developer] Packages for arm64 version of ubuntu
In-Reply-To: <CALymcQAiHoJ5-wi6CfFnqpB9HzvFbkfujGrV_PcAhr1M1-ek2Q@mail.gmail.com>
References: <a370fe80-57d4-9c1c-d360-3f703dcfe7d9@kagou.fr>
 <CALymcQAiHoJ5-wi6CfFnqpB9HzvFbkfujGrV_PcAhr1M1-ek2Q@mail.gmail.com>
Message-ID: <6e7c5a8c-29ad-c572-f422-21388160566f@gmail.com>

There are a number of different architectures supported by debian for 
qgis, these are in the debian repositories.

On 21/03/22 20:00, Ujaval Gandhi via QGIS-Developer wrote:
> I was able to get a Ubuntu 20.04 VM running on Mac M1 (arm64) using 
> UTM <https://mac.getutm.app/gallery/ubuntu-20-04>. QGIS install works 
> but the latest installer is for QGIS 3.10.
>
> The latest ltr 3.22 also has arm64 package but they are available only 
> on Ubuntu 22.04 https://packages.ubuntu.com/search?keywords=qgis
>
> Logo <https://spatialthoughts.com/> 	
> Ujaval Gandhi
> Spatial Thoughts
> mobile: +91-8095684687
> email: ujaval at spatialthoughts.com
> LinkedIn icon <https://www.linkedin.com/in/spatialthoughts/> Twitter 
> icon <https://twitter.com/spatialthoughts>
>
>
>
>
>
> On Tue, Feb 15, 2022 at 4:10 PM Kagou <kagou at kagou.fr> wrote:
>
>     Is it possible to have the arm64 architecture supported for ubuntu ?
>
>     Regards
>
>     Patrice Vetsel
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220322/507cbdc3/attachment.html>

From wonder.sk at gmail.com  Mon Mar 21 13:29:07 2022
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 21 Mar 2022 21:29:07 +0100
Subject: [QGIS-Developer] not building against pdal 2.4.0rc1
In-Reply-To: <CAJo0jfMg5d6rTrkXXsnNvPHN2H4Qh86jOqLP7fO0vLQYKP8QZw@mail.gmail.com>
References: <CAJo0jfMg5d6rTrkXXsnNvPHN2H4Qh86jOqLP7fO0vLQYKP8QZw@mail.gmail.com>
Message-ID: <CAC2XbFdeW4BcBoWxLjRkhcjODM2Hrgv=MkToQiCSdX_Vqrcieg@mail.gmail.com>

Hi

Thanks for reporting the compilation issue with PDAL 2.4.0. RC1. I have
reported the issue to the PDAL developers and they have already prepared a
fix: https://github.com/PDAL/PDAL/pull/3713 - I am hoping it will land in
the final 2.4.0 release.

Regards
Martin


On Sat, Mar 19, 2022 at 5:17 PM Saulteau Don via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Trying to build qgis from the 3.24 release branch on github and testing
> against pdal 2.4.0rc1.
>
> It fails with the following about a missing pdal function no longer exists:
>
> [ 39%] Automatic MOC for target provider_pdal
>> [ 39%] Built target provider_pdal_autogen
>> [ 39%] Building CXX object
>> src/providers/pdal/CMakeFiles/provider_pdal.dir/provider_pdal_autogen/mocs_compilation.cpp.o
>> [ 39%] Building CXX object
>> src/providers/pdal/CMakeFiles/provider_pdal.dir/qgspdalprovider.cpp.o
>> /build/qgis/src/qgis/src/providers/pdal/qgspdalprovider.cpp: In member
>> function ?bool QgsPdalProvider::load(const QString&)?:
>> /build/qgis/src/qgis/src/providers/pdal/qgspdalprovider.cpp:235:58:
>> error: use of deleted function ?pdal::LasHeader::LasHeader(const
>> pdal::LasHeader&)?
>>   235 |     const pdal::LasHeader las_header = las_reader.header();
>>       |                                                          ^
>> In file included from
>> /build/qgis/src/qgis/src/providers/pdal/qgspdalprovider.cpp:32:
>> /usr/include/pdal/io/LasHeader.hpp:70:16: note:
>> ?pdal::LasHeader::LasHeader(const pdal::LasHeader&)? is implicitly deleted
>> because the default definition would be ill-formed:
>>    70 | class PDAL_DLL LasHeader
>>       |                ^~~~~~~~~
>> /usr/include/pdal/io/LasHeader.hpp:70:16: error: use of deleted function
>> ?std::unique_ptr<_Tp, _Dp>::unique_ptr(const std::unique_ptr<_Tp, _Dp>&)
>> [with _Tp = pdal::LasHeader::Private; _Dp =
>> std::default_delete<pdal::LasHeader::Private>]?
>> In file included from /usr/include/c++/11.2.0/memory:76,
>>                  from /build/qgis/src/qgis/src/core/qgis.h:24,
>>                  from
>> /build/qgis/src/qgis/src/providers/pdal/qgspdalprovider.cpp:18:
>> /usr/include/c++/11.2.0/bits/unique_ptr.h:468:7: note: declared here
>>   468 |       unique_ptr(const unique_ptr&) = delete;
>>       |       ^~~~~~~~~~
>> make[2]: ***
>> [src/providers/pdal/CMakeFiles/provider_pdal.dir/build.make:90:
>> src/providers/pdal/CMakeFiles/provider_pdal.dir/qgspdalprovider.cpp.o]
>> Error 1
>> make[1]: *** [CMakeFiles/Makefile2:7798:
>> src/providers/pdal/CMakeFiles/provider_pdal.dir/all] Error 2
>> make: *** [Makefile:166: all] Error 2
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220321/0a00b1a9/attachment.html>

From ujaval at spatialthoughts.com  Tue Mar 22 00:28:39 2022
From: ujaval at spatialthoughts.com (Ujaval Gandhi)
Date: Tue, 22 Mar 2022 12:58:39 +0530
Subject: [QGIS-Developer] Packages for arm64 version of ubuntu
In-Reply-To: <6e7c5a8c-29ad-c572-f422-21388160566f@gmail.com>
References: <a370fe80-57d4-9c1c-d360-3f703dcfe7d9@kagou.fr>
 <CALymcQAiHoJ5-wi6CfFnqpB9HzvFbkfujGrV_PcAhr1M1-ek2Q@mail.gmail.com>
 <6e7c5a8c-29ad-c572-f422-21388160566f@gmail.com>
Message-ID: <CALymcQAp5Ejb3kHJxzAoic5RHv_i3fdBzQLzMe8iBQ1wOEvU+g@mail.gmail.com>

Hi Patrick,

I couldn't find the arm64 packages in the debian or ubuntugis repo as well
https://debian.qgis.org/debian-ltr/dists/focal/main/


[image: Logo] <https://spatialthoughts.com/>
Ujaval Gandhi
Spatial Thoughts
mobile: +91-8095684687
email: ujaval at spatialthoughts.com
[image: LinkedIn icon] <https://www.linkedin.com/in/spatialthoughts/>  [image:
Twitter icon] <https://twitter.com/spatialthoughts>



On Tue, Mar 22, 2022 at 12:54 AM Patrick Dunford via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> There are a number of different architectures supported by debian for
> qgis, these are in the debian repositories.
> On 21/03/22 20:00, Ujaval Gandhi via QGIS-Developer wrote:
>
> I was able to get a Ubuntu 20.04 VM running on Mac M1 (arm64) using UTM
> <https://mac.getutm.app/gallery/ubuntu-20-04>. QGIS install works but the
> latest installer is for QGIS 3.10.
>
> The latest ltr 3.22 also has arm64 package but they are available only on
> Ubuntu 22.04 https://packages.ubuntu.com/search?keywords=qgis
>
> [image: Logo] <https://spatialthoughts.com/>
> Ujaval Gandhi
> Spatial Thoughts
> mobile: +91-8095684687
> email: ujaval at spatialthoughts.com
> [image: LinkedIn icon] <https://www.linkedin.com/in/spatialthoughts/>  [image:
> Twitter icon] <https://twitter.com/spatialthoughts>
>
>
>
>
> On Tue, Feb 15, 2022 at 4:10 PM Kagou <kagou at kagou.fr> wrote:
>
>> Is it possible to have the arm64 architecture supported for ubuntu ?
>>
>> Regards
>> Patrice Vetsel
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
> _______________________________________________
> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220322/e929b85b/attachment-0001.html>

From apasotti at gmail.com  Tue Mar 22 01:30:26 2022
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 22 Mar 2022 09:30:26 +0100
Subject: [QGIS-Developer] issue transforming coords from EPSG:4258
 'ETRS89' to 4326
In-Reply-To: <1c2d2309-9525-9d2d-080b-a53e3f59b295@gmail.com>
References: <CAL5Q673T2q_0crfm_O_qOEryb85wXJrkhrNj_8xBes9wcco37g@mail.gmail.com>
 <1c2d2309-9525-9d2d-080b-a53e3f59b295@gmail.com>
Message-ID: <CAL5Q673ENQ=O9AJO7PPSNtYS5=B9Ex0HsxQtNRj-ygsa9BZEQw@mail.gmail.com>

On Mon, Mar 21, 2022 at 8:20 PM Patrick Dunford via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> How do you specify the CRS for the raster?
>
> I know that you can assign this in the Qgis software but there is also
> provision to assign CRS in a sidecar file. Which one takes precedence?
>
>
The sidecar file provides the default CRS when the layer is loaded, you can
override that in QGIS.

But in my case it was a postgres raster layer and the CRS was set
incorrectly in the database itself (no sidecar file).

Kind regards

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220322/ef1911ae/attachment.html>

From rdmailings at duif.net  Tue Mar 22 01:33:39 2022
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 22 Mar 2022 09:33:39 +0100
Subject: [QGIS-Developer] QGIS and WebAssembly
In-Reply-To: <CAC2XbFezRHKFcqtsTYsoX=-0sVoH7VRMC12WYjVf94H-BN=-zg@mail.gmail.com>
References: <CAC2XbFezRHKFcqtsTYsoX=-0sVoH7VRMC12WYjVf94H-BN=-zg@mail.gmail.com>
Message-ID: <e595416faae8d0eef1dd45cdff7f5dcf@duif.net>

On 2022-03-18 00:36, Martin Dobias via QGIS-Developer wrote:
> I am very keen to hear what you think about QGIS and WebAssembly. In
> the coming days I would like to also get the build system and my hacks
> available in a git repo, so that others can start to play with it...

Hi Martin,

Supercool demo!!!! :-)

But (I always but...), some questions for the project:

I think this pushes us to the technical limits of browsers. with that 
also performance wise to the limits of QGIS?
Like people are now asking for/using QGIS on chromebooks and (smaller) 
ARM devices: is that still really workable?

As a technical pet project, it is cool, but can we keep the promise of a 
GIS in a browser?
Or do we end up with a poor performing (or only working for small sets) 
of QGIS?

Or should we put more money/energy in makin QGIS more modular so you can 
use certain modules for a small viewer and the full Monty for a true 
GIS?

Regards,

Richard Duivenvoorde

From a.neumann at carto.net  Tue Mar 22 01:49:30 2022
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 22 Mar 2022 09:49:30 +0100
Subject: [QGIS-Developer] QGIS and WebAssembly
In-Reply-To: <e595416faae8d0eef1dd45cdff7f5dcf@duif.net>
References: <CAC2XbFezRHKFcqtsTYsoX=-0sVoH7VRMC12WYjVf94H-BN=-zg@mail.gmail.com>
 <e595416faae8d0eef1dd45cdff7f5dcf@duif.net>
Message-ID: <d44d1c01a33762ebd8ce5e108e535196@carto.net>

Hi all,

Very cool demo - thanks for sharing!

Would any part of the current QGIS Desktop part be re-usable in a "web 
assembly" QGIS? Or would the GUI part have to be re-developed?

I would also assume that access to local files would be very restricted 
- right? Network based resources (DB access and web services) would 
probably work fine?

Thanks and greetings,

Andreas

On 2022-03-22 09:33, Richard Duivenvoorde via QGIS-Developer wrote:

> On 2022-03-18 00:36, Martin Dobias via QGIS-Developer wrote:
> 
>> I am very keen to hear what you think about QGIS and WebAssembly. In
>> the coming days I would like to also get the build system and my hacks
>> available in a git repo, so that others can start to play with it...
> 
> Hi Martin,
> 
> Supercool demo!!!! :-)
> 
> But (I always but...), some questions for the project:
> 
> I think this pushes us to the technical limits of browsers. with that 
> also performance wise to the limits of QGIS?
> Like people are now asking for/using QGIS on chromebooks and (smaller) 
> ARM devices: is that still really workable?
> 
> As a technical pet project, it is cool, but can we keep the promise of 
> a GIS in a browser?
> Or do we end up with a poor performing (or only working for small sets) 
> of QGIS?
> 
> Or should we put more money/energy in makin QGIS more modular so you 
> can use certain modules for a small viewer and the full Monty for a 
> true GIS?
> 
> Regards,
> 
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220322/7f4fcd48/attachment.html>

From sigeal at sigeal.com  Tue Mar 22 02:24:23 2022
From: sigeal at sigeal.com (=?UTF-8?Q?SIG=c3=a9al?=)
Date: Tue, 22 Mar 2022 10:24:23 +0100
Subject: [QGIS-Developer] QGIS freezes for minutes when updated SpatiaLite
 SQL Layer
Message-ID: <c1f5c27c-441b-9dde-f70c-690ab9c39122@sigeal.com>

Hi list,

QGIS 3.22/3.24 freezes with hourglass for about 2 minutes when I click 
on close button of Update SQL Layer dialog, even if I didn't modify the 
query.
If I click on Execute button, I get this error : "an error occurred 
while opening GPKG dbname=..."
This happens with a big database file (600 Mb), only with with query 
returning hundreds of rows.

I don't have any problem at all with old behaviour on QGIS 3.16.16 : DB 
Manager opened when I click on Update SQL Layer.
So this sounds clearly like a regression linked to the new "Update SQL 
Layer" dialog/behaviour.

Thanks for any hint or work around,

-- 
Christophe Damour


From senhor.neto at gmail.com  Tue Mar 22 02:41:40 2022
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Tue, 22 Mar 2022 09:41:40 +0000
Subject: [QGIS-Developer] [Qgis-user] QGIS freezes for minutes when
 updated SpatiaLite SQL Layer
In-Reply-To: <c1f5c27c-441b-9dde-f70c-690ab9c39122@sigeal.com>
References: <c1f5c27c-441b-9dde-f70c-690ab9c39122@sigeal.com>
Message-ID: <CA+H0G_GLgVQuWp7UMAxiivOcbjB7Gh7YL1cdixgzbdSGzUHhsA@mail.gmail.com>

It probably also has something to do with the query you are using.

Can you please create a ticket? Preferably with some sample data and
project and explaining the steps to reproduce the problem.

Thanks

Alexandre Neto

A ter?a, 22/03/2022, 09:24, SIG?al via Qgis-user <qgis-user at lists.osgeo.org>
escreveu:

> Hi list,
>
> QGIS 3.22/3.24 freezes with hourglass for about 2 minutes when I click
> on close button of Update SQL Layer dialog, even if I didn't modify the
> query.
> If I click on Execute button, I get this error : "an error occurred
> while opening GPKG dbname=..."
> This happens with a big database file (600 Mb), only with with query
> returning hundreds of rows.
>
> I don't have any problem at all with old behaviour on QGIS 3.16.16 : DB
> Manager opened when I click on Update SQL Layer.
> So this sounds clearly like a regression linked to the new "Update SQL
> Layer" dialog/behaviour.
>
> Thanks for any hint or work around,
>
> --
> Christophe Damour
>
> _______________________________________________
> Qgis-user mailing list
> Qgis-user at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220322/ac052a1e/attachment.html>

From sigeal at sigeal.com  Tue Mar 22 02:54:51 2022
From: sigeal at sigeal.com (=?UTF-8?Q?SIG=c3=a9al?=)
Date: Tue, 22 Mar 2022 10:54:51 +0100
Subject: [QGIS-Developer] [Qgis-user] QGIS freezes for minutes when
 updated SpatiaLite SQL Layer
In-Reply-To: <CA+H0G_GLgVQuWp7UMAxiivOcbjB7Gh7YL1cdixgzbdSGzUHhsA@mail.gmail.com>
References: <c1f5c27c-441b-9dde-f70c-690ab9c39122@sigeal.com>
 <CA+H0G_GLgVQuWp7UMAxiivOcbjB7Gh7YL1cdixgzbdSGzUHhsA@mail.gmail.com>
Message-ID: <5fc007a5-99ad-2440-aabb-b24fdd63711b@sigeal.com>

I created an issue :
https://github.com/qgis/QGIS/issues/47906

I can reproduce it with a dead simple query : select * from table 
(returning ~ 800 rows).

And no problem with any query/database on QGIS 3.16.16 !

Thanks,

-- 
Christophe

Le 22/03/2022 ? 10:41, Alexandre Neto a ?crit?:
> It probably also has something to do with the query you are using.
>
> Can you please create a ticket? Preferably with some sample data and 
> project and explaining the steps to reproduce the problem.
>
> Thanks
>
> Alexandre Neto
>
> A ter?a, 22/03/2022, 09:24, SIG?al via Qgis-user 
> <qgis-user at lists.osgeo.org> escreveu:
>
>     Hi list,
>
>     QGIS 3.22/3.24 freezes with hourglass for about 2 minutes when I
>     click
>     on close button of Update SQL Layer dialog, even if I didn't
>     modify the
>     query.
>     If I click on Execute button, I get this error : "an error occurred
>     while opening GPKG dbname=..."
>     This happens with a big database file (600 Mb), only with with query
>     returning hundreds of rows.
>
>     I don't have any problem at all with old behaviour on QGIS 3.16.16
>     : DB
>     Manager opened when I click on Update SQL Layer.
>     So this sounds clearly like a regression linked to the new "Update
>     SQL
>     Layer" dialog/behaviour.
>
>     Thanks for any hint or work around,
>
>     -- 
>     Christophe Damour
>
>     _______________________________________________
>     Qgis-user mailing list
>     Qgis-user at lists.osgeo.org
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220322/c67775d4/attachment-0001.html>

From wonder.sk at gmail.com  Tue Mar 22 05:15:08 2022
From: wonder.sk at gmail.com (Martin Dobias)
Date: Tue, 22 Mar 2022 13:15:08 +0100
Subject: [QGIS-Developer] QGIS and WebAssembly
In-Reply-To: <e595416faae8d0eef1dd45cdff7f5dcf@duif.net>
References: <CAC2XbFezRHKFcqtsTYsoX=-0sVoH7VRMC12WYjVf94H-BN=-zg@mail.gmail.com>
 <e595416faae8d0eef1dd45cdff7f5dcf@duif.net>
Message-ID: <CAC2XbFdt=sJkvqX28hYwkdiM-C88wtEi4GRZmeUC+z0gtHjLVw@mail.gmail.com>

Hi Richard!

On Tue, Mar 22, 2022 at 9:33 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

>
> I think this pushes us to the technical limits of browsers. with that
> also performance wise to the limits of QGIS?
>

I am sure some other apps are going to push technical limits of browsers
further than QGIS :-) I don't think that running QGIS in browser is an
overkill, possibly over time this will be more and more common. I have
heard that AutoCAD developers have managed to get it running on
WebAssembly, apparently Adobe Photoshop as well [2], and that seems like
much larger project. In terms of performance, people often say that you can
expect 2x slowdown compared to the native code, which does not seem very
bad. Moreover, I can imagine that this could improve over time, and also in
QGIS we may find more places to optimize to make it running more smoothly.



> Like people are now asking for/using QGIS on chromebooks and (smaller)
> ARM devices: is that still really workable?
>

Hard to say... It's definitely not going to be a great solution in all
setups, at least not in the beginning...


As a technical pet project, it is cool, but can we keep the promise of a
> GIS in a browser?
> Or do we end up with a poor performing (or only working for small sets)
> of QGIS?
>

I think it is achievable to have full GIS in a browser. Yes, initially it
will probably have many limitations, but QGIS 0.1 also wasn't perfect :-)



> Or should we put more money/energy in makin QGIS more modular so you can
> use certain modules for a small viewer and the full Monty for a true
> GIS?
>

QGIS code generally is relatively modular... for this demo I simply took
the QGIS core library as it was, and it was okay. For WebAssembly, it could
be useful to have even finer granularity - for example, if I don't need DXF
export or print layouts or mesh layers, it would be useful to exclude the
code completely from qgis_core and have them as extra additional modules
(that could be loaded on demand), but it's questionable at this point if it
would be worth the extra effort and maintenance.

I think it would make sense to first try to build something small - like
you say a simple viewer, and then see where we want to go next :-)

Cheers
Martin


[1] https://madewithwebassembly.com/showcase/autocad/
[2]
https://www.bram.us/2021/10/27/adobe-photoshop-in-the-browser-thanks-to-emscripten-web-components-and-project-fugu/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220322/8707042f/attachment.html>

From wonder.sk at gmail.com  Tue Mar 22 05:31:50 2022
From: wonder.sk at gmail.com (Martin Dobias)
Date: Tue, 22 Mar 2022 13:31:50 +0100
Subject: [QGIS-Developer] QGIS and WebAssembly
In-Reply-To: <d44d1c01a33762ebd8ce5e108e535196@carto.net>
References: <CAC2XbFezRHKFcqtsTYsoX=-0sVoH7VRMC12WYjVf94H-BN=-zg@mail.gmail.com>
 <e595416faae8d0eef1dd45cdff7f5dcf@duif.net>
 <d44d1c01a33762ebd8ce5e108e535196@carto.net>
Message-ID: <CAC2XbFfgUFiTT=Anz16P4M9Q+sfa63YPYQPCoGy_YauUN4mZCw@mail.gmail.com>

Hi Andreas!

On Tue, Mar 22, 2022 at 9:49 AM Andreas Neumann <a.neumann at carto.net> wrote:

>
> Would any part of the current QGIS Desktop part be re-usable in a "web
> assembly" QGIS? Or would the GUI part have to be re-developed?
>

In theory, we could try to run QGIS Desktop as it is in WebAssembly
environment in the browser, Qt generally supports that. There are many
question marks though, among some I can think of:
- dealing with files / data sources - this would need many changes to
accept the fact that we are not dealing with a local file system and that
access to raw data over network will be generally much slower. Also
persistence of data - you will probably want to have some server backend
anyway to store the data.
- Qt Widgets-based apps can be run on WebAssembly, but I have a feeling
that the performance would not be great, due to the way how the get
rendered on screen (all work done on CPU) - I would expect that an
optimized OpenGL / WebGL based GUI would have much better performance in
browsers - probably based on Qt Quick module (like Input / QField)


> I would also assume that access to local files would be very restricted -
> right? Network based resources (DB access and web services) would probably
> work fine?
>
Indeed, access to local files from browser would not be possible at all -
data would need to come from the server. Network based resources would work
fine, but with various limitations - for example, you are normally not
allowed to request resources from other servers unless the servers allow
that [1], and you can't directly access services like PostgreSQL that are
not HTTP servers (although of course this could be handled by tunneling
through WebSockets, or using HTTP-based protocols like Postgrest).

Cheers
Martin

[1] https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220322/5f375b18/attachment.html>

From kagou at kagou.fr  Tue Mar 22 07:56:15 2022
From: kagou at kagou.fr (Kagou)
Date: Tue, 22 Mar 2022 15:56:15 +0100
Subject: [QGIS-Developer] Packages for arm64 version of ubuntu
In-Reply-To: <a370fe80-57d4-9c1c-d360-3f703dcfe7d9@kagou.fr>
References: <a370fe80-57d4-9c1c-d360-3f703dcfe7d9@kagou.fr>
Message-ID: <6797944f-85a5-aa52-e18d-8be27b481960@kagou.fr>

I hope to find latest packages, with arm64 architecture on :

https://debian.qgis.org/debian/

or

https://ubuntu.qgis.org/ubuntu/

Regards



Le 15/02/2022 ? 11:40, Kagou a ?crit?:
>
> Is it possible to have the arm64 architecture supported for ubuntu ?
>
> Regards
>
> Patrice Vetsel
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220322/12dee087/attachment.html>

From surveykshak at gmail.com  Tue Mar 22 23:21:52 2022
From: surveykshak at gmail.com (Paul N)
Date: Wed, 23 Mar 2022 11:51:52 +0530
Subject: [QGIS-Developer] Compilation of QGIS-master
Message-ID: <CAGy7cYm8kzCjZLXNEcNPzUEvRRcUGizmdMCCZv=Z+Ut1nwjSqg@mail.gmail.com>

Hi,
I am trying to compile QGIS-master on Windows 10 with MSVC 2019. I tried
but failed.
Now again start from scratch, which one is required to install
: osgeo4w-setup-v2.exe *OR* osgeo4w-setup-x86_64-v1.exe.

One more thing, I have to keep the default path or make it C:/OSGeo4W64.

Thanks
Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220323/3712afe2/attachment.html>

From rdmailings at duif.net  Wed Mar 23 01:39:29 2022
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 23 Mar 2022 09:39:29 +0100
Subject: [QGIS-Developer] Temporal Controller: Select current visible
 features??
In-Reply-To: <CAB28AsjiX5PkrkWNx85V8Wrw5BuoEE2dVKzaD9Fw3_ngnynGpQ@mail.gmail.com>
References: <ff333d8accd0848148e219b6678a5d52@duif.net>
 <CAB28AsjiX5PkrkWNx85V8Wrw5BuoEE2dVKzaD9Fw3_ngnynGpQ@mail.gmail.com>
Message-ID: <ce32ed21-013f-bb4e-abe5-09a51063920b@duif.net>

Thanks Nyall!!

With a minimal adjustments this just works:

def temporal_filter_for_layer(layer, canvas):
   if canvas.mapSettings().isTemporal():
     if not layer.temporalProperties().isVisibleInTemporalRange(canvas.temporalRange()):
       return False # nothing is visible
     temporal_context = QgsVectorLayerTemporalContext()
     temporal_context.setLayer(layer)
     return layer.temporalProperties().createFilterString(temporal_context, canvas.temporalRange())
   else:
     return None

print( temporal_filter_for_layer(iface.mapCanvas().currentLayer(), iface.mapCanvas()) )

Now prints:

("time" > make_datetime(2022,3,20,10,30,0) AND "time" < make_datetime(2022,3,20,12,30,0)) OR "time" IS NULL

Which I can use as expression in: layer.selectByExpression(...)

Regards,

Richard Duivenvoorde

PS also see my Feature Request: https://github.com/qgis/QGIS/issues/47929 about adding an option to switch between selecting visible vs non visible features...

On 3/21/22 23:59, Nyall Dawson wrote:
>> Anybody aware of a way to do this?
>> Going to try to get the temporal expression maybe and then select by
>> expression?
> 
> untested code ported from tested c++ code, sorry, but it's something like this:
> 
> def temporal_filter_for_layer(layer, canvas):
>    if canvas.mapSettings().isTemporal():
>      if not layer.temporalProperties().isVisibleInTemporalRange(
> canvas.temporalRange() ) ):
>        return "FALSE"; # nothing is visible
> 
>      temporal_context = QgsVectorLayerTemporalContext()
>      temporal_context.setLayer( layer )
>      return layer.temporalProperties().createFilterString(
> temporal_context, canvas.temporalRange() )
>    else:
>      return None
> 
> Nyall


From pierluigi.derosa at gmail.com  Thu Mar 24 03:02:08 2022
From: pierluigi.derosa at gmail.com (pierluigi de rosa)
Date: Thu, 24 Mar 2022 11:02:08 +0100
Subject: [QGIS-Developer] QgsFieldCombobox already populated
Message-ID: <CAAgsrZgCupD=RFBbJG7qtWvApJ0O+MEbPTh8_YDakX-OK2JGdQ@mail.gmail.com>

Dear all,

since QGIS 3.22 the actual LTR I noticed that the QgsFieldCombobox is
already populated.
In particular I have a plugin that in QGIS 3.18 and previous when opening
the GUI, after selecting the layer from che QgsLayerCombobox I have to
select the field related to this layer.
Now After selecting the layer all the field combobox are already populated
with the first field in the attribute table. In this case the user has to
re-select all fields.
This change the user experience also because in my plugin sometimes I don't
have to select all fields combobox.

Is there a way to have the same behavior between QGIS 3.22 and previous
QGIS 3.18? What has changed in particular and It exists a way to restore
previous behaviour (do not fill automatically the field combobox)?

Thank you for you feedback

Pierluigi

-- 
Ing. Pierluigi De Rosa (PhD in Earth Science)
Contract Professor of Geographic Information System at University of Perugia
cel: 3497558268 / fax: 075 7823038
skype: pierluigi.derosa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220324/01ed0fef/attachment.html>

From senhor.neto at gmail.com  Thu Mar 24 04:11:50 2022
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Thu, 24 Mar 2022 11:11:50 +0000
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
Message-ID: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>

Hi,

I have raised this before, but I wanted to ask for it again. Currently,
QGIS default is not to Override System Locale and use the system's locale
for User interface.

If the system locale language happens to have good and reliable
translations, this works well, but when the language is incomplete or
poorly translated, this IMHO poses a problem.

The European Portuguese translation is quite poor, with many errors and bad
translations. In the end it is sometimes hard to work with the GUI in
PT_pt. To me the bad thing is it looks bad on the project reputation and
people (users) read it as a symptom of bad quality software, which is not
the case.

So, I wanted to suggest if we could have American english as the default
for the GUI? Would this  be reasonable?

Thanks,

Alexandre Neto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220324/06e31ff4/attachment.html>

From apasotti at gmail.com  Thu Mar 24 04:21:41 2022
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 24 Mar 2022 12:21:41 +0100
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
Message-ID: <CAL5Q673u3qfxPU4BGJ6rKsSniuWZjzR8=1c3gC0D4Z+vPOQZiw@mail.gmail.com>

Hi Alexandre,

it seems reasonable to me but I'd suggest adding a first-time notice and an
option for the user to actually set the system locale, maybe only for the
first QGIS launch.


On Thu, Mar 24, 2022 at 12:12 PM Alexandre Neto via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Hi,
>
> I have raised this before, but I wanted to ask for it again. Currently,
> QGIS default is not to Override System Locale and use the system's locale
> for User interface.
>
> If the system locale language happens to have good and reliable
> translations, this works well, but when the language is incomplete or
> poorly translated, this IMHO poses a problem.
>
> The European Portuguese translation is quite poor, with many errors and
> bad translations. In the end it is sometimes hard to work with the GUI in
> PT_pt. To me the bad thing is it looks bad on the project reputation and
> people (users) read it as a symptom of bad quality software, which is not
> the case.
>
> So, I wanted to suggest if we could have American english as the default
> for the GUI? Would this  be reasonable?
>
> Thanks,
>
> Alexandre Neto
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220324/25ae45a8/attachment.html>

From senhor.neto at gmail.com  Thu Mar 24 04:32:02 2022
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Thu, 24 Mar 2022 11:32:02 +0000
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <CAL5Q673u3qfxPU4BGJ6rKsSniuWZjzR8=1c3gC0D4Z+vPOQZiw@mail.gmail.com>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
 <CAL5Q673u3qfxPU4BGJ6rKsSniuWZjzR8=1c3gC0D4Z+vPOQZiw@mail.gmail.com>
Message-ID: <CA+H0G_FEWFx4TuB0m5aYFDifj20YuHv5wuZwRdxRy69H4Bu=Eg@mail.gmail.com>

Hi Alessandro,

Well, the option on first launch would be a much bettter solution. But
probably more complicated. Any idea of how much man/hours would be needed
to implement it?

Thanks,

Alex

A quinta, 24/03/2022, 11:21, Alessandro Pasotti <apasotti at gmail.com>
escreveu:

> Hi Alexandre,
>
> it seems reasonable to me but I'd suggest adding a first-time notice and
> an option for the user to actually set the system locale, maybe only for
> the first QGIS launch.
>
>
> On Thu, Mar 24, 2022 at 12:12 PM Alexandre Neto via QGIS-Developer <
> qgis-developer at lists.osgeo.org> wrote:
>
>> Hi,
>>
>> I have raised this before, but I wanted to ask for it again. Currently,
>> QGIS default is not to Override System Locale and use the system's locale
>> for User interface.
>>
>> If the system locale language happens to have good and reliable
>> translations, this works well, but when the language is incomplete or
>> poorly translated, this IMHO poses a problem.
>>
>> The European Portuguese translation is quite poor, with many errors and
>> bad translations. In the end it is sometimes hard to work with the GUI in
>> PT_pt. To me the bad thing is it looks bad on the project reputation and
>> people (users) read it as a symptom of bad quality software, which is not
>> the case.
>>
>> So, I wanted to suggest if we could have American english as the default
>> for the GUI? Would this  be reasonable?
>>
>> Thanks,
>>
>> Alexandre Neto
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220324/d79f8b3b/attachment.html>

From nirvn.asia at gmail.com  Thu Mar 24 04:39:32 2022
From: nirvn.asia at gmail.com (Mathieu Pellerin)
Date: Thu, 24 Mar 2022 18:39:32 +0700
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <CA+H0G_FEWFx4TuB0m5aYFDifj20YuHv5wuZwRdxRy69H4Bu=Eg@mail.gmail.com>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
 <CAL5Q673u3qfxPU4BGJ6rKsSniuWZjzR8=1c3gC0D4Z+vPOQZiw@mail.gmail.com>
 <CA+H0G_FEWFx4TuB0m5aYFDifj20YuHv5wuZwRdxRy69H4Bu=Eg@mail.gmail.com>
Message-ID: <CAC_qv=qLB0hkubwdpjPF7fX5FFCSXsc4+93CrNwCwP4o-gmYHw@mail.gmail.com>

Could we not have some means to attach a quality value to each language (eg
at the very least % translated), and only force English on poorly
translated languages? I feel forcing English by default would be a
disservice to the part of the community that spends hours to translate QGIS.

On Thu, Mar 24, 2022, 18:32 Alexandre Neto via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Hi Alessandro,
>
> Well, the option on first launch would be a much bettter solution. But
> probably more complicated. Any idea of how much man/hours would be needed
> to implement it?
>
> Thanks,
>
> Alex
>
> A quinta, 24/03/2022, 11:21, Alessandro Pasotti <apasotti at gmail.com>
> escreveu:
>
>> Hi Alexandre,
>>
>> it seems reasonable to me but I'd suggest adding a first-time notice and
>> an option for the user to actually set the system locale, maybe only for
>> the first QGIS launch.
>>
>>
>> On Thu, Mar 24, 2022 at 12:12 PM Alexandre Neto via QGIS-Developer <
>> qgis-developer at lists.osgeo.org> wrote:
>>
>>> Hi,
>>>
>>> I have raised this before, but I wanted to ask for it again. Currently,
>>> QGIS default is not to Override System Locale and use the system's locale
>>> for User interface.
>>>
>>> If the system locale language happens to have good and reliable
>>> translations, this works well, but when the language is incomplete or
>>> poorly translated, this IMHO poses a problem.
>>>
>>> The European Portuguese translation is quite poor, with many errors and
>>> bad translations. In the end it is sometimes hard to work with the GUI in
>>> PT_pt. To me the bad thing is it looks bad on the project reputation and
>>> people (users) read it as a symptom of bad quality software, which is not
>>> the case.
>>>
>>> So, I wanted to suggest if we could have American english as the default
>>> for the GUI? Would this  be reasonable?
>>>
>>> Thanks,
>>>
>>> Alexandre Neto
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
>>
>> --
>> Alessandro Pasotti
>> QCooperative:  www.qcooperative.net
>> ItOpen:   www.itopen.it
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220324/e7d44814/attachment-0001.html>

From senhor.neto at gmail.com  Thu Mar 24 04:48:44 2022
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Thu, 24 Mar 2022 11:48:44 +0000
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <CAC_qv=qLB0hkubwdpjPF7fX5FFCSXsc4+93CrNwCwP4o-gmYHw@mail.gmail.com>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
 <CAL5Q673u3qfxPU4BGJ6rKsSniuWZjzR8=1c3gC0D4Z+vPOQZiw@mail.gmail.com>
 <CA+H0G_FEWFx4TuB0m5aYFDifj20YuHv5wuZwRdxRy69H4Bu=Eg@mail.gmail.com>
 <CAC_qv=qLB0hkubwdpjPF7fX5FFCSXsc4+93CrNwCwP4o-gmYHw@mail.gmail.com>
Message-ID: <CA+H0G_HKi5mLz4XgPa-qnCf56DdzN=AMHGhbZEgA=eNc+yUaBA@mail.gmail.com>

Following Alessandro advice, we could have a choice menu on the first QGIS
launch, that would allow the user to select the GUI language. Maybe we
could keep the system locale as default, but inform that the translation
work may not be 100% accurate as it is done by volunteer work. We could add
a link to transifex so the user can see the translation stats and even
invite them to join the effort for better translations.

My main problem is not the translation percentage, but its quality. At
least in PT_pt, some folks just translate strings without caring about the
context of the string, which ends up in very strange and nonsense.

Thanks for your opinions

Alex

Mathieu Pellerin <nirvn.asia at gmail.com> escreveu no dia quinta, 24/03/2022
?(s) 11:39:

> Could we not have some means to attach a quality value to each language
> (eg at the very least % translated), and only force English on poorly
> translated languages? I feel forcing English by default would be a
> disservice to the part of the community that spends hours to translate QGIS.
>
> On Thu, Mar 24, 2022, 18:32 Alexandre Neto via QGIS-Developer <
> qgis-developer at lists.osgeo.org> wrote:
>
>> Hi Alessandro,
>>
>> Well, the option on first launch would be a much bettter solution. But
>> probably more complicated. Any idea of how much man/hours would be needed
>> to implement it?
>>
>> Thanks,
>>
>> Alex
>>
>> A quinta, 24/03/2022, 11:21, Alessandro Pasotti <apasotti at gmail.com>
>> escreveu:
>>
>>> Hi Alexandre,
>>>
>>> it seems reasonable to me but I'd suggest adding a first-time notice and
>>> an option for the user to actually set the system locale, maybe only for
>>> the first QGIS launch.
>>>
>>>
>>> On Thu, Mar 24, 2022 at 12:12 PM Alexandre Neto via QGIS-Developer <
>>> qgis-developer at lists.osgeo.org> wrote:
>>>
>>>> Hi,
>>>>
>>>> I have raised this before, but I wanted to ask for it again. Currently,
>>>> QGIS default is not to Override System Locale and use the system's locale
>>>> for User interface.
>>>>
>>>> If the system locale language happens to have good and reliable
>>>> translations, this works well, but when the language is incomplete or
>>>> poorly translated, this IMHO poses a problem.
>>>>
>>>> The European Portuguese translation is quite poor, with many errors and
>>>> bad translations. In the end it is sometimes hard to work with the GUI in
>>>> PT_pt. To me the bad thing is it looks bad on the project reputation and
>>>> people (users) read it as a symptom of bad quality software, which is not
>>>> the case.
>>>>
>>>> So, I wanted to suggest if we could have American english as the
>>>> default for the GUI? Would this  be reasonable?
>>>>
>>>> Thanks,
>>>>
>>>> Alexandre Neto
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>
>>>
>>> --
>>> Alessandro Pasotti
>>> QCooperative:  www.qcooperative.net
>>> ItOpen:   www.itopen.it
>>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220324/3c2231aa/attachment.html>

From delazj at gmail.com  Thu Mar 24 04:52:07 2022
From: delazj at gmail.com (DelazJ)
Date: Thu, 24 Mar 2022 12:52:07 +0100
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <CAC_qv=qLB0hkubwdpjPF7fX5FFCSXsc4+93CrNwCwP4o-gmYHw@mail.gmail.com>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
 <CAL5Q673u3qfxPU4BGJ6rKsSniuWZjzR8=1c3gC0D4Z+vPOQZiw@mail.gmail.com>
 <CA+H0G_FEWFx4TuB0m5aYFDifj20YuHv5wuZwRdxRy69H4Bu=Eg@mail.gmail.com>
 <CAC_qv=qLB0hkubwdpjPF7fX5FFCSXsc4+93CrNwCwP4o-gmYHw@mail.gmail.com>
Message-ID: <CAECJsSo6FWW2w8wNxjNmLNFfavNqJ8EBoBnOjBWi_NVTJ_7e8g@mail.gmail.com>

Hi,
I'm sure I'm not a particular case: when I'm asked to select a language, I
usually look after the one I'm the most comfortable with and select it. And
in this case, I guess most of pt_PT people seeing their language in the
list will still pick that language, ignoring there are issues with it.

Mathieu there's already a value check: only languages with 35% are pulled
into code base. The issue here is that pt_PT has issues with the quality of
the translated strings.

Regards,
Harrissou

Le jeu. 24 mars 2022 ? 12:39, Mathieu Pellerin via QGIS-Developer <
qgis-developer at lists.osgeo.org> a ?crit :

> Could we not have some means to attach a quality value to each language
> (eg at the very least % translated), and only force English on poorly
> translated languages? I feel forcing English by default would be a
> disservice to the part of the community that spends hours to translate QGIS.
>
> On Thu, Mar 24, 2022, 18:32 Alexandre Neto via QGIS-Developer <
> qgis-developer at lists.osgeo.org> wrote:
>
>> Hi Alessandro,
>>
>> Well, the option on first launch would be a much bettter solution. But
>> probably more complicated. Any idea of how much man/hours would be needed
>> to implement it?
>>
>> Thanks,
>>
>> Alex
>>
>> A quinta, 24/03/2022, 11:21, Alessandro Pasotti <apasotti at gmail.com>
>> escreveu:
>>
>>> Hi Alexandre,
>>>
>>> it seems reasonable to me but I'd suggest adding a first-time notice and
>>> an option for the user to actually set the system locale, maybe only for
>>> the first QGIS launch.
>>>
>>>
>>> On Thu, Mar 24, 2022 at 12:12 PM Alexandre Neto via QGIS-Developer <
>>> qgis-developer at lists.osgeo.org> wrote:
>>>
>>>> Hi,
>>>>
>>>> I have raised this before, but I wanted to ask for it again. Currently,
>>>> QGIS default is not to Override System Locale and use the system's locale
>>>> for User interface.
>>>>
>>>> If the system locale language happens to have good and reliable
>>>> translations, this works well, but when the language is incomplete or
>>>> poorly translated, this IMHO poses a problem.
>>>>
>>>> The European Portuguese translation is quite poor, with many errors and
>>>> bad translations. In the end it is sometimes hard to work with the GUI in
>>>> PT_pt. To me the bad thing is it looks bad on the project reputation and
>>>> people (users) read it as a symptom of bad quality software, which is not
>>>> the case.
>>>>
>>>> So, I wanted to suggest if we could have American english as the
>>>> default for the GUI? Would this  be reasonable?
>>>>
>>>> Thanks,
>>>>
>>>> Alexandre Neto
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>
>>>
>>> --
>>> Alessandro Pasotti
>>> QCooperative:  www.qcooperative.net
>>> ItOpen:   www.itopen.it
>>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220324/12768a42/attachment.html>

From senhor.neto at gmail.com  Thu Mar 24 05:03:31 2022
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Thu, 24 Mar 2022 12:03:31 +0000
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <CAECJsSo6FWW2w8wNxjNmLNFfavNqJ8EBoBnOjBWi_NVTJ_7e8g@mail.gmail.com>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
 <CAL5Q673u3qfxPU4BGJ6rKsSniuWZjzR8=1c3gC0D4Z+vPOQZiw@mail.gmail.com>
 <CA+H0G_FEWFx4TuB0m5aYFDifj20YuHv5wuZwRdxRy69H4Bu=Eg@mail.gmail.com>
 <CAC_qv=qLB0hkubwdpjPF7fX5FFCSXsc4+93CrNwCwP4o-gmYHw@mail.gmail.com>
 <CAECJsSo6FWW2w8wNxjNmLNFfavNqJ8EBoBnOjBWi_NVTJ_7e8g@mail.gmail.com>
Message-ID: <CA+H0G_GJqXaOsQmqdBVt0K=OdO384qU5Z4wwAwmn=ZEYm2kD-w@mail.gmail.com>

Hi Harrissou,

I agree that some folks will just go with the system locale anyway, but
here, many users prefer to use the GUI in English. Some are not even aware
that for changing to English from the system locale they don't need to
reinstall QGIS. So having an option on the first lauch, would be a great
improvement in my opinion.

All the best,

Alex

DelazJ <delazj at gmail.com> escreveu no dia quinta, 24/03/2022 ?(s) 11:52:

> Hi,
> I'm sure I'm not a particular case: when I'm asked to select a language, I
> usually look after the one I'm the most comfortable with and select it. And
> in this case, I guess most of pt_PT people seeing their language in the
> list will still pick that language, ignoring there are issues with it.
>
> Mathieu there's already a value check: only languages with 35% are pulled
> into code base. The issue here is that pt_PT has issues with the quality of
> the translated strings.
>
> Regards,
> Harrissou
>
> Le jeu. 24 mars 2022 ? 12:39, Mathieu Pellerin via QGIS-Developer <
> qgis-developer at lists.osgeo.org> a ?crit :
>
>> Could we not have some means to attach a quality value to each language
>> (eg at the very least % translated), and only force English on poorly
>> translated languages? I feel forcing English by default would be a
>> disservice to the part of the community that spends hours to translate QGIS.
>>
>> On Thu, Mar 24, 2022, 18:32 Alexandre Neto via QGIS-Developer <
>> qgis-developer at lists.osgeo.org> wrote:
>>
>>> Hi Alessandro,
>>>
>>> Well, the option on first launch would be a much bettter solution. But
>>> probably more complicated. Any idea of how much man/hours would be needed
>>> to implement it?
>>>
>>> Thanks,
>>>
>>> Alex
>>>
>>> A quinta, 24/03/2022, 11:21, Alessandro Pasotti <apasotti at gmail.com>
>>> escreveu:
>>>
>>>> Hi Alexandre,
>>>>
>>>> it seems reasonable to me but I'd suggest adding a first-time notice
>>>> and an option for the user to actually set the system locale, maybe only
>>>> for the first QGIS launch.
>>>>
>>>>
>>>> On Thu, Mar 24, 2022 at 12:12 PM Alexandre Neto via QGIS-Developer <
>>>> qgis-developer at lists.osgeo.org> wrote:
>>>>
>>>>> Hi,
>>>>>
>>>>> I have raised this before, but I wanted to ask for it again.
>>>>> Currently, QGIS default is not to Override System Locale and use the
>>>>> system's locale for User interface.
>>>>>
>>>>> If the system locale language happens to have good and reliable
>>>>> translations, this works well, but when the language is incomplete or
>>>>> poorly translated, this IMHO poses a problem.
>>>>>
>>>>> The European Portuguese translation is quite poor, with many errors
>>>>> and bad translations. In the end it is sometimes hard to work with the GUI
>>>>> in PT_pt. To me the bad thing is it looks bad on the project reputation and
>>>>> people (users) read it as a symptom of bad quality software, which is not
>>>>> the case.
>>>>>
>>>>> So, I wanted to suggest if we could have American english as the
>>>>> default for the GUI? Would this  be reasonable?
>>>>>
>>>>> Thanks,
>>>>>
>>>>> Alexandre Neto
>>>>> _______________________________________________
>>>>> QGIS-Developer mailing list
>>>>> QGIS-Developer at lists.osgeo.org
>>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>
>>>>
>>>>
>>>> --
>>>> Alessandro Pasotti
>>>> QCooperative:  www.qcooperative.net
>>>> ItOpen:   www.itopen.it
>>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220324/52da82f7/attachment-0001.html>

From nirvn.asia at gmail.com  Thu Mar 24 05:10:50 2022
From: nirvn.asia at gmail.com (Mathieu Pellerin)
Date: Thu, 24 Mar 2022 19:10:50 +0700
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <CAECJsSo6FWW2w8wNxjNmLNFfavNqJ8EBoBnOjBWi_NVTJ_7e8g@mail.gmail.com>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
 <CAL5Q673u3qfxPU4BGJ6rKsSniuWZjzR8=1c3gC0D4Z+vPOQZiw@mail.gmail.com>
 <CA+H0G_FEWFx4TuB0m5aYFDifj20YuHv5wuZwRdxRy69H4Bu=Eg@mail.gmail.com>
 <CAC_qv=qLB0hkubwdpjPF7fX5FFCSXsc4+93CrNwCwP4o-gmYHw@mail.gmail.com>
 <CAECJsSo6FWW2w8wNxjNmLNFfavNqJ8EBoBnOjBWi_NVTJ_7e8g@mail.gmail.com>
Message-ID: <CAC_qv=rMRnL_2TUZ80+of6fw19GRf=O+m392wP-GkOmXJcd+QQ@mail.gmail.com>

I'm aware of the 35% pull threshold. I was suggesting we could raise the
bar to eg 80% for that language to be set as default on first launch :)

On Thu, Mar 24, 2022, 18:52 DelazJ <delazj at gmail.com> wrote:

> Hi,
> I'm sure I'm not a particular case: when I'm asked to select a language, I
> usually look after the one I'm the most comfortable with and select it. And
> in this case, I guess most of pt_PT people seeing their language in the
> list will still pick that language, ignoring there are issues with it.
>
> Mathieu there's already a value check: only languages with 35% are pulled
> into code base. The issue here is that pt_PT has issues with the quality of
> the translated strings.
>
> Regards,
> Harrissou
>
> Le jeu. 24 mars 2022 ? 12:39, Mathieu Pellerin via QGIS-Developer <
> qgis-developer at lists.osgeo.org> a ?crit :
>
>> Could we not have some means to attach a quality value to each language
>> (eg at the very least % translated), and only force English on poorly
>> translated languages? I feel forcing English by default would be a
>> disservice to the part of the community that spends hours to translate QGIS.
>>
>> On Thu, Mar 24, 2022, 18:32 Alexandre Neto via QGIS-Developer <
>> qgis-developer at lists.osgeo.org> wrote:
>>
>>> Hi Alessandro,
>>>
>>> Well, the option on first launch would be a much bettter solution. But
>>> probably more complicated. Any idea of how much man/hours would be needed
>>> to implement it?
>>>
>>> Thanks,
>>>
>>> Alex
>>>
>>> A quinta, 24/03/2022, 11:21, Alessandro Pasotti <apasotti at gmail.com>
>>> escreveu:
>>>
>>>> Hi Alexandre,
>>>>
>>>> it seems reasonable to me but I'd suggest adding a first-time notice
>>>> and an option for the user to actually set the system locale, maybe only
>>>> for the first QGIS launch.
>>>>
>>>>
>>>> On Thu, Mar 24, 2022 at 12:12 PM Alexandre Neto via QGIS-Developer <
>>>> qgis-developer at lists.osgeo.org> wrote:
>>>>
>>>>> Hi,
>>>>>
>>>>> I have raised this before, but I wanted to ask for it again.
>>>>> Currently, QGIS default is not to Override System Locale and use the
>>>>> system's locale for User interface.
>>>>>
>>>>> If the system locale language happens to have good and reliable
>>>>> translations, this works well, but when the language is incomplete or
>>>>> poorly translated, this IMHO poses a problem.
>>>>>
>>>>> The European Portuguese translation is quite poor, with many errors
>>>>> and bad translations. In the end it is sometimes hard to work with the GUI
>>>>> in PT_pt. To me the bad thing is it looks bad on the project reputation and
>>>>> people (users) read it as a symptom of bad quality software, which is not
>>>>> the case.
>>>>>
>>>>> So, I wanted to suggest if we could have American english as the
>>>>> default for the GUI? Would this  be reasonable?
>>>>>
>>>>> Thanks,
>>>>>
>>>>> Alexandre Neto
>>>>> _______________________________________________
>>>>> QGIS-Developer mailing list
>>>>> QGIS-Developer at lists.osgeo.org
>>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>
>>>>
>>>>
>>>> --
>>>> Alessandro Pasotti
>>>> QCooperative:  www.qcooperative.net
>>>> ItOpen:   www.itopen.it
>>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220324/20bba946/attachment.html>

From nirvn.asia at gmail.com  Thu Mar 24 05:14:31 2022
From: nirvn.asia at gmail.com (Mathieu Pellerin)
Date: Thu, 24 Mar 2022 19:14:31 +0700
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <CA+H0G_HKi5mLz4XgPa-qnCf56DdzN=AMHGhbZEgA=eNc+yUaBA@mail.gmail.com>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
 <CAL5Q673u3qfxPU4BGJ6rKsSniuWZjzR8=1c3gC0D4Z+vPOQZiw@mail.gmail.com>
 <CA+H0G_FEWFx4TuB0m5aYFDifj20YuHv5wuZwRdxRy69H4Bu=Eg@mail.gmail.com>
 <CAC_qv=qLB0hkubwdpjPF7fX5FFCSXsc4+93CrNwCwP4o-gmYHw@mail.gmail.com>
 <CA+H0G_HKi5mLz4XgPa-qnCf56DdzN=AMHGhbZEgA=eNc+yUaBA@mail.gmail.com>
Message-ID: <CAC_qv=r3fgAiLP=uA72Wyx5kbF5KuvCZVERyp5eBtGkize==MA@mail.gmail.com>

Quality translation is an issue indeed. But if we lower exposure to these
translations, we'll likely decrease the chance of those being improved
in the future.

+1 to the first launch proposal with link to invite ppl to help improve
things.


On Thu, Mar 24, 2022, 18:48 Alexandre Neto <senhor.neto at gmail.com> wrote:

> Following Alessandro advice, we could have a choice menu on the first QGIS
> launch, that would allow the user to select the GUI language. Maybe we
> could keep the system locale as default, but inform that the translation
> work may not be 100% accurate as it is done by volunteer work. We could add
> a link to transifex so the user can see the translation stats and even
> invite them to join the effort for better translations.
>
> My main problem is not the translation percentage, but its quality. At
> least in PT_pt, some folks just translate strings without caring about the
> context of the string, which ends up in very strange and nonsense.
>
> Thanks for your opinions
>
> Alex
>
> Mathieu Pellerin <nirvn.asia at gmail.com> escreveu no dia quinta,
> 24/03/2022 ?(s) 11:39:
>
>> Could we not have some means to attach a quality value to each language
>> (eg at the very least % translated), and only force English on poorly
>> translated languages? I feel forcing English by default would be a
>> disservice to the part of the community that spends hours to translate QGIS.
>>
>> On Thu, Mar 24, 2022, 18:32 Alexandre Neto via QGIS-Developer <
>> qgis-developer at lists.osgeo.org> wrote:
>>
>>> Hi Alessandro,
>>>
>>> Well, the option on first launch would be a much bettter solution. But
>>> probably more complicated. Any idea of how much man/hours would be needed
>>> to implement it?
>>>
>>> Thanks,
>>>
>>> Alex
>>>
>>> A quinta, 24/03/2022, 11:21, Alessandro Pasotti <apasotti at gmail.com>
>>> escreveu:
>>>
>>>> Hi Alexandre,
>>>>
>>>> it seems reasonable to me but I'd suggest adding a first-time notice
>>>> and an option for the user to actually set the system locale, maybe only
>>>> for the first QGIS launch.
>>>>
>>>>
>>>> On Thu, Mar 24, 2022 at 12:12 PM Alexandre Neto via QGIS-Developer <
>>>> qgis-developer at lists.osgeo.org> wrote:
>>>>
>>>>> Hi,
>>>>>
>>>>> I have raised this before, but I wanted to ask for it again.
>>>>> Currently, QGIS default is not to Override System Locale and use the
>>>>> system's locale for User interface.
>>>>>
>>>>> If the system locale language happens to have good and reliable
>>>>> translations, this works well, but when the language is incomplete or
>>>>> poorly translated, this IMHO poses a problem.
>>>>>
>>>>> The European Portuguese translation is quite poor, with many errors
>>>>> and bad translations. In the end it is sometimes hard to work with the GUI
>>>>> in PT_pt. To me the bad thing is it looks bad on the project reputation and
>>>>> people (users) read it as a symptom of bad quality software, which is not
>>>>> the case.
>>>>>
>>>>> So, I wanted to suggest if we could have American english as the
>>>>> default for the GUI? Would this  be reasonable?
>>>>>
>>>>> Thanks,
>>>>>
>>>>> Alexandre Neto
>>>>> _______________________________________________
>>>>> QGIS-Developer mailing list
>>>>> QGIS-Developer at lists.osgeo.org
>>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>>
>>>>
>>>>
>>>> --
>>>> Alessandro Pasotti
>>>> QCooperative:  www.qcooperative.net
>>>> ItOpen:   www.itopen.it
>>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220324/ec348e2c/attachment.html>

From caboe at sdfe.dk  Thu Mar 24 06:31:59 2022
From: caboe at sdfe.dk (=?utf-8?B?Q2FzcGVyIELDuHJnZXNlbg==?=)
Date: Thu, 24 Mar 2022 13:31:59 +0000
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <CAC_qv=r3fgAiLP=uA72Wyx5kbF5KuvCZVERyp5eBtGkize==MA@mail.gmail.com>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
 <CAL5Q673u3qfxPU4BGJ6rKsSniuWZjzR8=1c3gC0D4Z+vPOQZiw@mail.gmail.com>
 <CA+H0G_FEWFx4TuB0m5aYFDifj20YuHv5wuZwRdxRy69H4Bu=Eg@mail.gmail.com>
 <CAC_qv=qLB0hkubwdpjPF7fX5FFCSXsc4+93CrNwCwP4o-gmYHw@mail.gmail.com>
 <CA+H0G_HKi5mLz4XgPa-qnCf56DdzN=AMHGhbZEgA=eNc+yUaBA@mail.gmail.com>
 <CAC_qv=r3fgAiLP=uA72Wyx5kbF5KuvCZVERyp5eBtGkize==MA@mail.gmail.com>
Message-ID: <5c35acf1990d4ef1bb87412d5020670e@sdfe.dk>

I think a setting somewhere to allow an override in a corporate environment would be nice. In case QGIS is installed in a corporate environment some policy might want the UI to always be a specific language (even though the user might change it later anyway).

/Casper

From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> On Behalf Of Mathieu Pellerin via QGIS-Developer
Sent: 24. marts 2022 13:15
To: Alexandre Neto <senhor.neto at gmail.com>
Cc: qgis-dev <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Override System Locale user interface with American English by Default?


Quality translation is an issue indeed. But if we lower exposure to these translations, we'll likely decrease the chance of those being improved in the future.

+1 to the first launch proposal with link to invite ppl to help improve things.

On Thu, Mar 24, 2022, 18:48 Alexandre Neto <senhor.neto at gmail.com<mailto:senhor.neto at gmail.com>> wrote:
Following Alessandro advice, we could have a choice menu on the first QGIS launch, that would allow the user to select the GUI language. Maybe we could keep the system locale as default, but inform that the translation work may not be 100% accurate as it is done by volunteer work. We could add a link to transifex so the user can see the translation stats and even invite them to join the effort for better translations.

My main problem is not the translation percentage, but its quality. At least in PT_pt, some folks just translate strings without caring about the context of the string, which ends up in very strange and nonsense.

Thanks for your opinions

Alex

Mathieu Pellerin <nirvn.asia at gmail.com<mailto:nirvn.asia at gmail.com>> escreveu no dia quinta, 24/03/2022 ?(s) 11:39:
Could we not have some means to attach a quality value to each language (eg at the very least % translated), and only force English on poorly translated languages? I feel forcing English by default would be a disservice to the part of the community that spends hours to translate QGIS.

On Thu, Mar 24, 2022, 18:32 Alexandre Neto via QGIS-Developer <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>> wrote:
Hi Alessandro,

Well, the option on first launch would be a much bettter solution. But probably more complicated. Any idea of how much man/hours would be needed to implement it?

Thanks,

Alex

A quinta, 24/03/2022, 11:21, Alessandro Pasotti <apasotti at gmail.com<mailto:apasotti at gmail.com>> escreveu:
Hi Alexandre,

it seems reasonable to me but I'd suggest adding a first-time notice and an option for the user to actually set the system locale, maybe only for the first QGIS launch.


On Thu, Mar 24, 2022 at 12:12 PM Alexandre Neto via QGIS-Developer <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>> wrote:
Hi,

I have raised this before, but I wanted to ask for it again. Currently, QGIS default is not to Override System Locale and use the system's locale for User interface.

If the system locale language happens to have good and reliable translations, this works well, but when the language is incomplete or poorly translated, this IMHO poses a problem.

The European Portuguese translation is quite poor, with many errors and bad translations. In the end it is sometimes hard to work with the GUI in PT_pt. To me the bad thing is it looks bad on the project reputation and people (users) read it as a symptom of bad quality software, which is not the case.

So, I wanted to suggest if we could have American english as the default for the GUI? Would this  be reasonable?

Thanks,

Alexandre Neto
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


--
Alessandro Pasotti
QCooperative:  www.qcooperative.net<https://www.qcooperative.net>
ItOpen:   www.itopen.it<http://www.itopen.it>
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220324/36e15c12/attachment-0001.html>

From anvpires at gmail.com  Thu Mar 24 08:30:00 2022
From: anvpires at gmail.com (Aurelio Pires)
Date: Thu, 24 Mar 2022 15:30:00 +0000
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <CAC_qv=rMRnL_2TUZ80+of6fw19GRf=O+m392wP-GkOmXJcd+QQ@mail.gmail.com>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
 <CAL5Q673u3qfxPU4BGJ6rKsSniuWZjzR8=1c3gC0D4Z+vPOQZiw@mail.gmail.com>
 <CA+H0G_FEWFx4TuB0m5aYFDifj20YuHv5wuZwRdxRy69H4Bu=Eg@mail.gmail.com>
 <CAC_qv=qLB0hkubwdpjPF7fX5FFCSXsc4+93CrNwCwP4o-gmYHw@mail.gmail.com>
 <CAECJsSo6FWW2w8wNxjNmLNFfavNqJ8EBoBnOjBWi_NVTJ_7e8g@mail.gmail.com>
 <CAC_qv=rMRnL_2TUZ80+of6fw19GRf=O+m392wP-GkOmXJcd+QQ@mail.gmail.com>
Message-ID: <1b5e5623-9e66-53d5-3eed-8c484884e2e7@gmail.com>

+1 to the option on first launch with link to invite ppl to help improve 
things.

Regards,

APires


On 2022-03-24 12:10, Mathieu Pellerin via QGIS-Developer wrote:
> I'm aware of the 35% pull threshold. I was suggesting we could raise 
> the bar to eg 80% for that language to be set as default on first 
> launch :)
>
> On Thu, Mar 24, 2022, 18:52 DelazJ <delazj at gmail.com> wrote:
>
>     Hi,
>     I'm sure I'm not a particular case: when I'm asked to select a
>     language, I usually look after the one I'm the most comfortable
>     with and select it. And in this case, I guess most of pt_PT people
>     seeing their language in the list will still pick that language,
>     ignoring there are issues with it.
>
>     Mathieu there's already a value check: only languages with 35% are
>     pulled into code base. The issue here is that pt_PT has issues
>     with the quality of the translated strings.
>
>     Regards,
>     Harrissou
>
>     Le?jeu. 24 mars 2022 ??12:39, Mathieu Pellerin via QGIS-Developer
>     <qgis-developer at lists.osgeo.org> a ?crit?:
>
>         Could we not have some means to attach a quality value to each
>         language (eg at the very least % translated), and only force
>         English on poorly translated languages? I feel forcing English
>         by default would be a disservice to the part of the community
>         that spends hours to translate QGIS.
>
>         On Thu, Mar 24, 2022, 18:32 Alexandre Neto via QGIS-Developer
>         <qgis-developer at lists.osgeo.org> wrote:
>
>             Hi Alessandro,
>
>             Well, the option on first launch would be a much bettter
>             solution. But probably more complicated. Any idea of how
>             much man/hours would be needed to implement it?
>
>             Thanks,
>
>             Alex
>
>             A quinta, 24/03/2022, 11:21, Alessandro Pasotti
>             <apasotti at gmail.com> escreveu:
>
>                 Hi Alexandre,
>
>                 it seems reasonable to me but I'd suggest adding a
>                 first-time notice and an option for the user to
>                 actually set the system locale, maybe only for the
>                 first QGIS launch.
>
>
>                 On Thu, Mar 24, 2022 at 12:12 PM Alexandre Neto via
>                 QGIS-Developer <qgis-developer at lists.osgeo.org> wrote:
>
>                     Hi,
>
>                     I have raised this before, but I wanted to ask for
>                     it again. Currently, QGIS default is not to
>                     Override System Locale and use the system's locale
>                     for User interface.
>
>                     If the system locale language happens to have good
>                     and reliable translations, this works well, but
>                     when the language is incomplete or poorly
>                     translated, this IMHO poses a problem.
>
>                     The European Portuguese translation is quite poor,
>                     with many errors and bad translations. In the end
>                     it is sometimes hard to work with the GUI in
>                     PT_pt. To me the bad thing is it looks bad on the
>                     project reputation and people (users) read it as a
>                     symptom of bad quality software, which is not the
>                     case.
>
>                     So, I wanted to suggest if we could have American
>                     english as the default for the GUI? Would this? be
>                     reasonable?
>
>                     Thanks,
>
>                     Alexandre Neto
>                     _______________________________________________
>                     QGIS-Developer mailing list
>                     QGIS-Developer at lists.osgeo.org
>                     List info:
>                     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>                     Unsubscribe:
>                     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
>                 -- 
>                 Alessandro Pasotti
>                 QCooperative: www.qcooperative.net
>                 <https://www.qcooperative.net>
>                 ItOpen: www.itopen.it <http://www.itopen.it>
>
>             _______________________________________________
>             QGIS-Developer mailing list
>             QGIS-Developer at lists.osgeo.org
>             List info:
>             https://lists.osgeo.org/mailman/listinfo/qgis-developer
>             Unsubscribe:
>             https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>         _______________________________________________
>         QGIS-Developer mailing list
>         QGIS-Developer at lists.osgeo.org
>         List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>         Unsubscribe:
>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220324/01577cbf/attachment.html>

From marco.lechner at fossgis.de  Thu Mar 24 08:36:56 2022
From: marco.lechner at fossgis.de (Marco Lechner - FOSSGIS e.V.)
Date: Thu, 24 Mar 2022 16:36:56 +0100
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
Message-ID: <13a5d27a-45c4-e9a8-ec3e-bb30b6b2bc70@fossgis.de>

Hi Alexandre,

you easily could start QGIS with --lang option to force a specific 
language. E.g. $ qgis --lang en_US
On Windows you have to add this to the qgis.bat file, as on Windows qgis 
is not startetd by executing a *.exe directly

Best regards
Marco

Am 24.03.22 um 12:11 schrieb Alexandre Neto via QGIS-Developer:
> Hi,
>
> I have raised this before, but I wanted to ask for it again. 
> Currently, QGIS default is not to Override System Locale and use the 
> system's locale for User interface.
>
> If the system locale language happens to have good and reliable 
> translations, this works well, but when the language is incomplete or 
> poorly translated, this IMHO poses a problem.
>
> The European Portuguese translation is quite poor, with many errors 
> and bad translations. In the end it is sometimes hard to work with the 
> GUI in PT_pt. To me the bad thing is it looks bad on the project 
> reputation and people (users) read it as a symptom of bad quality 
> software, which is not the case.
>
> So, I wanted to suggest if we could have American english as the 
> default for the GUI? Would this? be reasonable?
>
> Thanks,
>
> Alexandre Neto
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From senhor.neto at gmail.com  Thu Mar 24 08:51:20 2022
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Thu, 24 Mar 2022 15:51:20 +0000
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <13a5d27a-45c4-e9a8-ec3e-bb30b6b2bc70@fossgis.de>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
 <13a5d27a-45c4-e9a8-ec3e-bb30b6b2bc70@fossgis.de>
Message-ID: <CA+H0G_FShFqDgADq-G5Ztsr4Zj7c3GhYR6vxrMx0mk5of4qCXA@mail.gmail.com>

Hi marco,

I am aware of that. My main concern is the users that aren't even aware
that they can customize QGIS language without reinstalling it and get stuck
with a poor-quality translation.
If on top of that the translation changes too much from one version to
another, people can get very frustrated and lost and blame it on the QGIS
project. That's what I wanted to avoid.
If people understand where the translations came from, and that there is a
place where they can actually improve it, maybe they get involved...
maybe...

Alex

Marco Lechner - FOSSGIS e.V. via QGIS-Developer <
qgis-developer at lists.osgeo.org> escreveu no dia quinta, 24/03/2022 ?(s)
15:37:

> Hi Alexandre,
>
> you easily could start QGIS with --lang option to force a specific
> language. E.g. $ qgis --lang en_US
> On Windows you have to add this to the qgis.bat file, as on Windows qgis
> is not startetd by executing a *.exe directly
>
> Best regards
> Marco
>
> Am 24.03.22 um 12:11 schrieb Alexandre Neto via QGIS-Developer:
> > Hi,
> >
> > I have raised this before, but I wanted to ask for it again.
> > Currently, QGIS default is not to Override System Locale and use the
> > system's locale for User interface.
> >
> > If the system locale language happens to have good and reliable
> > translations, this works well, but when the language is incomplete or
> > poorly translated, this IMHO poses a problem.
> >
> > The European Portuguese translation is quite poor, with many errors
> > and bad translations. In the end it is sometimes hard to work with the
> > GUI in PT_pt. To me the bad thing is it looks bad on the project
> > reputation and people (users) read it as a symptom of bad quality
> > software, which is not the case.
> >
> > So, I wanted to suggest if we could have American english as the
> > default for the GUI? Would this  be reasonable?
> >
> > Thanks,
> >
> > Alexandre Neto
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220324/5f134886/attachment-0001.html>

From jef at norbit.de  Thu Mar 24 09:48:59 2022
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Thu, 24 Mar 2022 17:48:59 +0100
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
Message-ID: <20220324164859.rmwi7vy2o2hjmklp@norbit.de>

Hi Alexandre,

On Thu, 24. Mar 2022 at 11:11:50 +0000, Alexandre Neto via QGIS-Developer wrote:
> The European Portuguese translation is quite poor, with many errors and bad
> translations.

Are there more that poor translations above 35%?

Otherwise I would suggest to fix the portuguese translation instead - if
everything else fails by removing the bad ones and getting it below threshold.
Or is resetting it the better choice?  That's will also get you C / en_US (or
pt_BR in this case?).


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220324/147f44fc/attachment.sig>

From enzedrailmaps at gmail.com  Thu Mar 24 09:57:09 2022
From: enzedrailmaps at gmail.com (Patrick Dunford)
Date: Fri, 25 Mar 2022 05:57:09 +1300
Subject: [QGIS-Developer] Packages for arm64 version of ubuntu
In-Reply-To: <6797944f-85a5-aa52-e18d-8be27b481960@kagou.fr>
References: <a370fe80-57d4-9c1c-d360-3f703dcfe7d9@kagou.fr>
 <6797944f-85a5-aa52-e18d-8be27b481960@kagou.fr>
Message-ID: <e3ef2661-2b64-2a28-53e5-907620ef62c6@gmail.com>

No, you have to use the debian or ubuntu distribution's own 
repositories, not the qgis ones.

https://packages.ubuntu.com/search?keywords=qgis

focal (20.04LTS) <https://packages.ubuntu.com/focal/qgis> (science): 
Geographic Information System (GIS) [*universe*]
3.10.4+dfsg-1ubuntu2: amd64 arm64 armhf ppc64el s390x

jammy <https://packages.ubuntu.com/jammy/qgis> (science): Geographic 
Information System (GIS) [*universe*]
3.22.4+dfsg-3: amd64 arm64 armhf ppc64el s390x

So for 3.22 you have to install Ubuntu 22.04 (due for release next 
month), and then get the installation from the repository provided by 
Ubuntu.

Debian only provides 3.22 in the testing (bookworm) version of their 
distribution, which is not due to come to release for another year or so.


On 23/03/22 03:56, Kagou via QGIS-Developer wrote:
>
> I hope to find latest packages, with arm64 architecture on :
>
> https://debian.qgis.org/debian/
>
> or
>
> https://ubuntu.qgis.org/ubuntu/
>
> Regards
>
>
>
> Le 15/02/2022 ? 11:40, Kagou a ?crit?:
>>
>> Is it possible to have the arm64 architecture supported for ubuntu ?
>>
>> Regards
>>
>> Patrice Vetsel
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220325/6fc3e24e/attachment.html>

From julien.cabieces at oslandia.com  Thu Mar 24 10:49:29 2022
From: julien.cabieces at oslandia.com (Julien Cabieces)
Date: Thu, 24 Mar 2022 18:49:29 +0100
Subject: [QGIS-Developer] Compilation of QGIS-master
In-Reply-To: <CAGy7cYm8kzCjZLXNEcNPzUEvRRcUGizmdMCCZv=Z+Ut1nwjSqg@mail.gmail.com>
References: <CAGy7cYm8kzCjZLXNEcNPzUEvRRcUGizmdMCCZv=Z+Ut1nwjSqg@mail.gmail.com>
Message-ID: <87wngjmeae.fsf@julien-laptop.home>


Hi,

I managed to build QGIS on Windows 10 with MSVC 2019, and OSGeo4W V2.

Here are my notes :
https://gist.github.com/troopa81/b43f96c20fdde2778ecdeaf8cf87684e

I'm not sure this the best way to achieve this, but it works.

Hope it helps,
Julien


> Hi,
> I am trying to compile QGIS-master on Windows 10 with MSVC 2019. I tried
> but failed.
> Now again start from scratch, which one is required to install
> : osgeo4w-setup-v2.exe *OR* osgeo4w-setup-x86_64-v1.exe.
>
> One more thing, I have to keep the default path or make it C:/OSGeo4W64.
>
> Thanks
> Paul
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From senhor.neto at gmail.com  Thu Mar 24 11:43:24 2022
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Thu, 24 Mar 2022 18:43:24 +0000
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <20220324164859.rmwi7vy2o2hjmklp@norbit.de>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
 <20220324164859.rmwi7vy2o2hjmklp@norbit.de>
Message-ID: <CA+H0G_GuJv6OnY8h8WPj8Nz34QY1O4hg6Q-GJSqdW+6XpzM8Yw@mail.gmail.com>

Hi Jurgen,

I only have the PT_pt translation experience, but I am pretty sure the same
should happen in other languages too.

We do try to fix the portuguese language, but we don't seem to have enough
man power to fix and review all the strings. Even if we slowly review as
much as we can, next time the resources are updated, all the reviewed
strings get unreviewed, and we lost control again.

Having a dialog on the first launch (similar to the one had for converting
2.x configuration to 3.x would give the user a choice right way. With some
extra wording we can make very informative on how users can help improving,
and how they can select a different language later if they want.

Thanks,

Alexandre

A quinta, 24/03/2022, 16:49, J?rgen E. Fischer via QGIS-Developer <
qgis-developer at lists.osgeo.org> escreveu:

> Hi Alexandre,
>
> On Thu, 24. Mar 2022 at 11:11:50 +0000, Alexandre Neto via QGIS-Developer
> wrote:
> > The European Portuguese translation is quite poor, with many errors and
> bad
> > translations.
>
> Are there more that poor translations above 35%?
>
> Otherwise I would suggest to fix the portuguese translation instead - if
> everything else fails by removing the bad ones and getting it below
> threshold.
> Or is resetting it the better choice?  That's will also get you C / en_US
> (or
> pt_BR in this case?).
>
>
> J?rgen
>
> --
> J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden
> https://www.norbit.de
> QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220324/376d811f/attachment.html>

From jef at norbit.de  Thu Mar 24 15:13:33 2022
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Thu, 24 Mar 2022 23:13:33 +0100
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <CA+H0G_GuJv6OnY8h8WPj8Nz34QY1O4hg6Q-GJSqdW+6XpzM8Yw@mail.gmail.com>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
 <20220324164859.rmwi7vy2o2hjmklp@norbit.de>
 <CA+H0G_GuJv6OnY8h8WPj8Nz34QY1O4hg6Q-GJSqdW+6XpzM8Yw@mail.gmail.com>
Message-ID: <20220324221333.feyrzzjnl3f4slwi@norbit.de>

Hi Alexandre,

On Thu, 24. Mar 2022 at 18:43:24 +0000, Alexandre Neto wrote:
> I only have the PT_pt translation experience, but I am pretty sure the same
> should happen in other languages too.

I doubt that.  I wonder why the quality is so bad.  I would expect that most of
the translations are ok and only some are poor.  Review can help with those,
but should not be necessary to get usable translations at all.


J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                 IRC: jef on Libera|OFTC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220324/9296dfb1/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220324/9296dfb1/attachment.ksh>

From sylvain.pierre at alsace.eu  Fri Mar 25 00:33:12 2022
From: sylvain.pierre at alsace.eu (PIERRE Sylvain)
Date: Fri, 25 Mar 2022 07:33:12 +0000
Subject: [QGIS-Developer] Drag and drop form function QdateEdit Widget init
Message-ID: <PR1P264MB20465E0305FC9F8223EEAD9B9C1A9@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>

Hi,
I build a form for a layer with drag and drop mode, and I use an init function to init some value for some widdget. I have no problem to do that with Qcombobox an QLineEdit widget :


                        linedit_imat = dialog.findChild(QLineEdit,"code_eqpt")
                        linedit_imat.setText(imatEqpt)

                        linedit_com = dialog.findChild(QLineEdit,"fk_commune")
                        linedit_com.setText(find_comtxt)

But this is not working with QDateEdit widget :
            today = date.today()
            control = dialog.findChild(QDateEdit,"date_insert")
            control.setDateTime(today)

What is the right syntax to init the date widget ? It's impossible to debug init script (or may be I'm missing something...)

Thanks

[cid:image002.jpg at 01D84022.F648C6E0]
Sylvain PIERRE
Chef de projet syst?me d'information
Direction des Syst?mes d'Information et du D?veloppement Num?rique
Service Projets et Ing?nierie Num?rique
Collectivit? europ?enne d'Alsace
T?l : 03 88 76 68 88
sylvain.pierre at alsace.eu<mailto:sylvain.pierre at alsace.eu>
www.alsace.eu<http://www.alsace.eu>
[facebook]<http://www.facebook.com/toutelalsace> [twitter] <http://www.twitter.com/toutelalsace>  [insta] <http://www.instagram.com/toutelalsace>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220325/a409d31f/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 8094 bytes
Desc: image002.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220325/a409d31f/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 827 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220325/a409d31f/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 853 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220325/a409d31f/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.png
Type: image/png
Size: 1038 bytes
Desc: image008.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220325/a409d31f/attachment-0005.png>

From rdmailings at duif.net  Fri Mar 25 00:49:50 2022
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 25 Mar 2022 08:49:50 +0100
Subject: [QGIS-Developer] Drag and drop form function QdateEdit Widget
 init
In-Reply-To: <PR1P264MB20465E0305FC9F8223EEAD9B9C1A9@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
References: <PR1P264MB20465E0305FC9F8223EEAD9B9C1A9@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
Message-ID: <92bd92cb-6bc4-c322-18f2-68ac385c1c9a@duif.net>

On 3/25/22 08:33, PIERRE Sylvain via QGIS-Developer wrote:

> But this is not working with QDateEdit widget?:
> 
> today=date.today()
> 
> control=dialog.findChild(QDateEdit,"date_insert")
> 
> control.setDateTime(today)
> 
> What is the right syntax to init the date widget?? It?s impossible to debug init script (or may be I?m missing something?)

Hi,

Which module is 'date.today()' from, not Qt is it?

You probably have to use the QDatetime: https://doc.qt.io/qt-5/qdatetime.html#currentDateTime

>>> QDateTime.currentDateTime()
PyQt5.QtCore.QDateTime(2022, 3, 25, 8, 44, 19, 963)

And set THAT with the widget?

See: https://doc.qt.io/qt-5/qdatetimeedit.html#dateTime-prop

(it always a little hassle to juggle with date/time etc in Python/Qt)

Regards,

Richard Duivenvoorde

From sylvain.pierre at alsace.eu  Fri Mar 25 01:04:37 2022
From: sylvain.pierre at alsace.eu (PIERRE Sylvain)
Date: Fri, 25 Mar 2022 08:04:37 +0000
Subject: [QGIS-Developer] Drag and drop form function QdateEdit Widget
 init
In-Reply-To: <92bd92cb-6bc4-c322-18f2-68ac385c1c9a@duif.net>
References: <PR1P264MB20465E0305FC9F8223EEAD9B9C1A9@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
 <92bd92cb-6bc4-c322-18f2-68ac385c1c9a@duif.net>
Message-ID: <PR1P264MB2046EF6356F75CF29CD69AC29C1A9@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>


Thanks for tip Richard, but I've tried with 
            today = QtCore.QDateTime.currentDateTime()
But it's not working


  

-----Message d'origine-----
De?: Richard Duivenvoorde <rdmailings at duif.net> 
Envoy??: vendredi 25 mars 2022 08:50
??: PIERRE Sylvain <sylvain.pierre at alsace.eu>; qgis-developer at lists.osgeo.org
Objet?: Re: [QGIS-Developer] Drag and drop form function QdateEdit Widget init

Soyez vigilant : ce courriel provient d'une organisation externe ? la CeA.
? Assurez-vous d?abord qu?il ne s?agit pas d?un email malveillant avant de cliquer sur tout lien ou pi?ce jointe.
==================================================

On 3/25/22 08:33, PIERRE Sylvain via QGIS-Developer wrote:

> But this is not working with QDateEdit widget?:
> 
> today=date.today()
> 
> control=dialog.findChild(QDateEdit,"date_insert")
> 
> control.setDateTime(today)
> 
> What is the right syntax to init the date widget?? It?s impossible to debug init script (or may be I?m missing something?)

Hi,

Which module is 'date.today()' from, not Qt is it?

You probably have to use the QDatetime: https://doc.qt.io/qt-5/qdatetime.html#currentDateTime

>>> QDateTime.currentDateTime()
PyQt5.QtCore.QDateTime(2022, 3, 25, 8, 44, 19, 963)

And set THAT with the widget?

See: https://doc.qt.io/qt-5/qdatetimeedit.html#dateTime-prop

(it always a little hassle to juggle with date/time etc in Python/Qt)

Regards,

Richard Duivenvoorde

From denis.rouzaud at gmail.com  Fri Mar 25 01:17:58 2022
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Fri, 25 Mar 2022 09:17:58 +0100
Subject: [QGIS-Developer] Drag and drop form function QdateEdit Widget
 init
In-Reply-To: <PR1P264MB2046EF6356F75CF29CD69AC29C1A9@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
References: <PR1P264MB20465E0305FC9F8223EEAD9B9C1A9@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
 <92bd92cb-6bc4-c322-18f2-68ac385c1c9a@duif.net>
 <PR1P264MB2046EF6356F75CF29CD69AC29C1A9@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
Message-ID: <CAMtsY+ZNB13J0G2zpfXmJCWFd1Kw-cZDAqwbUKUuXz6ZUJDyEQ@mail.gmail.com>

QgsDateTimeEdit implements setDateTime, which is not virtual in
QDateTimeEdit.
It's probably that you have to find a QDateTimeEdit rather than the Qt
native one.

Not 100% sure this is the issue though, but it won't hurt.

Le ven. 25 mars 2022 ? 09:11, PIERRE Sylvain via QGIS-Developer <
qgis-developer at lists.osgeo.org> a ?crit :

>
> Thanks for tip Richard, but I've tried with
>             today = QtCore.QDateTime.currentDateTime()
> But it's not working
>
>
>
>
> -----Message d'origine-----
> De : Richard Duivenvoorde <rdmailings at duif.net>
> Envoy? : vendredi 25 mars 2022 08:50
> ? : PIERRE Sylvain <sylvain.pierre at alsace.eu>;
> qgis-developer at lists.osgeo.org
> Objet : Re: [QGIS-Developer] Drag and drop form function QdateEdit Widget
> init
>
> Soyez vigilant : ce courriel provient d'une organisation externe ? la CeA.
> ? Assurez-vous d?abord qu?il ne s?agit pas d?un email malveillant avant de
> cliquer sur tout lien ou pi?ce jointe.
> ==================================================
>
> On 3/25/22 08:33, PIERRE Sylvain via QGIS-Developer wrote:
>
> > But this is not working with QDateEdit widget :
> >
> > today=date.today()
> >
> > control=dialog.findChild(QDateEdit,"date_insert")
> >
> > control.setDateTime(today)
> >
> > What is the right syntax to init the date widget ? It?s impossible to
> debug init script (or may be I?m missing something?)
>
> Hi,
>
> Which module is 'date.today()' from, not Qt is it?
>
> You probably have to use the QDatetime:
> https://doc.qt.io/qt-5/qdatetime.html#currentDateTime
>
> >>> QDateTime.currentDateTime()
> PyQt5.QtCore.QDateTime(2022, 3, 25, 8, 44, 19, 963)
>
> And set THAT with the widget?
>
> See: https://doc.qt.io/qt-5/qdatetimeedit.html#dateTime-prop
>
> (it always a little hassle to juggle with date/time etc in Python/Qt)
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220325/d58ec135/attachment.html>

From a.neumann at carto.net  Fri Mar 25 01:28:25 2022
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri, 25 Mar 2022 09:28:25 +0100
Subject: [QGIS-Developer] Drag and drop form function QdateEdit Widget
 init
In-Reply-To: <CAMtsY+ZNB13J0G2zpfXmJCWFd1Kw-cZDAqwbUKUuXz6ZUJDyEQ@mail.gmail.com>
References: <PR1P264MB20465E0305FC9F8223EEAD9B9C1A9@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
 <92bd92cb-6bc4-c322-18f2-68ac385c1c9a@duif.net>
 <PR1P264MB2046EF6356F75CF29CD69AC29C1A9@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
 <CAMtsY+ZNB13J0G2zpfXmJCWFd1Kw-cZDAqwbUKUuXz6ZUJDyEQ@mail.gmail.com>
Message-ID: <79065e2b64d2354dcb24a62bf339ab1d@carto.net>

Hi Pierre,

Not sure if you are aware that recent QGIS releases also have very good 
"default" value support without having to use Python. You can simply set 
default values with QGIS expressions. No need for Python code (unless 
you do something really special).

You can even set date values dependent on other widgets without having 
to use Python scripting - and do updates whenever something changes on 
the record, without having to fall back to Python scripting.

Just wanted to make sure you are aware of this alternative mechanism. 
There might still be good reasons for using Python scripting though - 
but theses cases are now rarer.

Greetings,

Andreas

On 2022-03-25 09:17, Denis Rouzaud via QGIS-Developer wrote:

> QgsDateTimeEdit implements setDateTime, which is not virtual in 
> QDateTimeEdit.
> It's probably that you have to find a QDateTimeEdit rather than the Qt 
> native one.
> 
> Not 100% sure this is the issue though, but it won't hurt.
> 
> Le ven. 25 mars 2022 ? 09:11, PIERRE Sylvain via QGIS-Developer 
> <qgis-developer at lists.osgeo.org> a ?crit :
> 
>> Thanks for tip Richard, but I've tried with
>> today = QtCore.QDateTime.currentDateTime()
>> But it's not working
>> 
>> -----Message d'origine-----
>> De : Richard Duivenvoorde <rdmailings at duif.net>
>> Envoy? : vendredi 25 mars 2022 08:50
>> ? : PIERRE Sylvain <sylvain.pierre at alsace.eu>; 
>> qgis-developer at lists.osgeo.org
>> Objet : Re: [QGIS-Developer] Drag and drop form function QdateEdit 
>> Widget init
>> 
>> Soyez vigilant : ce courriel provient d'une organisation externe ? la 
>> CeA.
>> * Assurez-vous d'abord qu'il ne s'agit pas d'un email malveillant 
>> avant de cliquer sur tout lien ou pi?ce jointe.
>> ==================================================
>> 
>> On 3/25/22 08:33, PIERRE Sylvain via QGIS-Developer wrote:
>> 
>>> But this is not working with QDateEdit widget :
>>> 
>>> today=date.today()
>>> 
>>> control=dialog.findChild(QDateEdit,"date_insert")
>>> 
>>> control.setDateTime(today)
>>> 
>>> What is the right syntax to init the date widget ? It's impossible to 
>>> debug init script (or may be I'm missing something...)
>> 
>> Hi,
>> 
>> Which module is 'date.today()' from, not Qt is it?
>> 
>> You probably have to use the QDatetime: 
>> https://doc.qt.io/qt-5/qdatetime.html#currentDateTime
>> 
>>>>> QDateTime.currentDateTime()
>> PyQt5.QtCore.QDateTime(2022, 3, 25, 8, 44, 19, 963)
>> 
>> And set THAT with the widget?
>> 
>> See: https://doc.qt.io/qt-5/qdatetimeedit.html#dateTime-prop
>> 
>> (it always a little hassle to juggle with date/time etc in Python/Qt)
>> 
>> Regards,
>> 
>> Richard Duivenvoorde
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220325/24b60ff3/attachment-0001.html>

From sylvain.pierre at alsace.eu  Fri Mar 25 01:58:24 2022
From: sylvain.pierre at alsace.eu (PIERRE Sylvain)
Date: Fri, 25 Mar 2022 08:58:24 +0000
Subject: [QGIS-Developer] Drag and drop form function QdateEdit Widget
 init
In-Reply-To: <79065e2b64d2354dcb24a62bf339ab1d@carto.net>
References: <PR1P264MB20465E0305FC9F8223EEAD9B9C1A9@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
 <92bd92cb-6bc4-c322-18f2-68ac385c1c9a@duif.net>
 <PR1P264MB2046EF6356F75CF29CD69AC29C1A9@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
 <CAMtsY+ZNB13J0G2zpfXmJCWFd1Kw-cZDAqwbUKUuXz6ZUJDyEQ@mail.gmail.com>
 <79065e2b64d2354dcb24a62bf339ab1d@carto.net>
Message-ID: <PR1P264MB2046C1A67C4CF39B0A6DAEDC9C1A9@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>

Hi Andeas,

Good tip !
I have to keep init script for good reason ;-). But I was not aware (not enough yet) of such possibilities. So for setting current date it?s pretty cool.
QGIS will still be amazing !

Thanks again

[cid:image009.jpg at 01D8402E.DD9E9320]
Sylvain PIERRE
Chef de projet syst?me d?information
Direction des Syst?mes d?Information et du D?veloppement Num?rique
Service Projets et Ing?nierie Num?rique
Collectivit? europ?enne d?Alsace
T?l : 03 88 76 68 88
sylvain.pierre at alsace.eu<mailto:sylvain.pierre at alsace.eu>
www.alsace.eu<http://www.alsace.eu>
[facebook]<http://www.facebook.com/toutelalsace> [twitter] <http://www.twitter.com/toutelalsace>  [insta] <http://www.instagram.com/toutelalsace>

De : Andreas Neumann <a.neumann at carto.net>
Envoy? : vendredi 25 mars 2022 09:28
? : Denis Rouzaud <denis.rouzaud at gmail.com>
Cc : PIERRE Sylvain <sylvain.pierre at alsace.eu>; qgis-developer at lists.osgeo.org
Objet : Re: [QGIS-Developer] Drag and drop form function QdateEdit Widget init

Soyez vigilant : ce courriel provient d'une organisation externe ? la CeA.
? Assurez-vous d?abord qu?il ne s?agit pas d?un email malveillant avant de cliquer sur tout lien ou pi?ce jointe.
Apprendre ? reconna?tre un email de phishing.<https://intranet.alsace.eu/actualites/apprenez-a-reconnaitre-un-email-phishing/>

Hi Pierre,

Not sure if you are aware that recent QGIS releases also have very good "default" value support without having to use Python. You can simply set default values with QGIS expressions. No need for Python code (unless you do something really special).

You can even set date values dependent on other widgets without having to use Python scripting - and do updates whenever something changes on the record, without having to fall back to Python scripting.

Just wanted to make sure you are aware of this alternative mechanism. There might still be good reasons for using Python scripting though - but theses cases are now rarer.

Greetings,

Andreas

On 2022-03-25 09:17, Denis Rouzaud via QGIS-Developer wrote:
QgsDateTimeEdit implements setDateTime, which is not virtual in QDateTimeEdit.
It's probably that you have to find a QDateTimeEdit rather than the Qt native one.

Not 100% sure this is the issue though, but it won't hurt.

Le ven. 25 mars 2022 ? 09:11, PIERRE Sylvain via QGIS-Developer <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>> a ?crit :

Thanks for tip Richard, but I've tried with
            today = QtCore.QDateTime.currentDateTime()
But it's not working




-----Message d'origine-----
De : Richard Duivenvoorde <rdmailings at duif.net<mailto:rdmailings at duif.net>>
Envoy? : vendredi 25 mars 2022 08:50
? : PIERRE Sylvain <sylvain.pierre at alsace.eu<mailto:sylvain.pierre at alsace.eu>>; qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>
Objet : Re: [QGIS-Developer] Drag and drop form function QdateEdit Widget init

Soyez vigilant : ce courriel provient d'une organisation externe ? la CeA.
? Assurez-vous d'abord qu'il ne s'agit pas d'un email malveillant avant de cliquer sur tout lien ou pi?ce jointe.
==================================================

On 3/25/22 08:33, PIERRE Sylvain via QGIS-Developer wrote:

> But this is not working with QDateEdit widget :
>
> today=date.today()
>
> control=dialog.findChild(QDateEdit,"date_insert")
>
> control.setDateTime(today)
>
> What is the right syntax to init the date widget ? It's impossible to debug init script (or may be I'm missing something...)

Hi,

Which module is 'date.today()' from, not Qt is it?

You probably have to use the QDatetime: https://doc.qt.io/qt-5/qdatetime.html#currentDateTime

>>> QDateTime.currentDateTime()
PyQt5.QtCore.QDateTime(2022, 3, 25, 8, 44, 19, 963)

And set THAT with the widget?

See: https://doc.qt.io/qt-5/qdatetimeedit.html#dateTime-prop

(it always a little hassle to juggle with date/time etc in Python/Qt)

Regards,

Richard Duivenvoorde
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220325/3d92b257/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image009.jpg
Type: image/jpeg
Size: 8103 bytes
Desc: image009.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220325/3d92b257/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image010.png
Type: image/png
Size: 827 bytes
Desc: image010.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220325/3d92b257/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image011.png
Type: image/png
Size: 853 bytes
Desc: image011.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220325/3d92b257/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image012.png
Type: image/png
Size: 1038 bytes
Desc: image012.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220325/3d92b257/attachment-0005.png>

From rdmailings at duif.net  Fri Mar 25 02:01:40 2022
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 25 Mar 2022 10:01:40 +0100
Subject: [QGIS-Developer] Drag and drop form function QdateEdit Widget
 init
In-Reply-To: <PR1P264MB2046EF6356F75CF29CD69AC29C1A9@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
References: <PR1P264MB20465E0305FC9F8223EEAD9B9C1A9@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
 <92bd92cb-6bc4-c322-18f2-68ac385c1c9a@duif.net>
 <PR1P264MB2046EF6356F75CF29CD69AC29C1A9@PR1P264MB2046.FRAP264.PROD.OUTLOOK.COM>
Message-ID: <0dfa3f4f-6a6d-2038-62e9-90c0d7654c28@duif.net>

On 3/25/22 09:04, PIERRE Sylvain wrote:
> 
> Thanks for tip Richard, but I've tried with
>              today = QtCore.QDateTime.currentDateTime()
> But it's not working

I get it working with:

from qgis.PyQt.QtWidgets import QWidget, QMessageBox, QDateEdit, QDateTimeEdit
from qgis.PyQt.QtCore import QDate, QDateTime

def my_form_open(dialog, layer, feature):
     geom = feature.geometry()
     control = dialog.findChild(QDateTimeEdit, "date")
     # just to check that you actually DO find the control!
     QMessageBox.warning(None, 'bla', f'control: "{control}"', QMessageBox.Ok, QMessageBox.Ok)
     now = QDateTime.currentDateTime()
     control.setDateTime(now)
     
Note that:
- I defined a field as Date-type
- the form apparently adds a QDateTimeEdit
- you set a QDateTime IN it
- but it shows me a date

HTH, regards,

Richard Duivenvoorde
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot-20220325100059-345x243.png
Type: image/png
Size: 25792 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220325/f2116879/attachment-0001.png>

From benjamin.jakimow at geo.hu-berlin.de  Sat Mar 26 22:37:42 2022
From: benjamin.jakimow at geo.hu-berlin.de (Benjamin Jakimow)
Date: Sun, 27 Mar 2022 07:37:42 +0200
Subject: [QGIS-Developer] Access layer from QgsExpressionContext with Python
Message-ID: <47a76318df15d6cc7591da45d8176311@geo.hu-berlin.de>

Dear Developers,


to implement a QgsExpressionFunction I like to access the "layer" from a 
QgsExpressionContext "context".
Using the C++ API this can be done with the QgsExpressionUtils:

QgsVectorLayer *vl = QgsExpressionUtils::getVectorLayer( 
context->variable( QStringLiteral( "layer" ) ), parent );

(several example exist qgsexpressionfunction.cpp)


In Python the QgsExpressionUtils are not available and accessing the 
"layer" attribute raises a
TypeError "unable to convert a C++ 'QPointer<QgsMapLayer>' instance to a 
Python object"

Example:
from qgis.core import QgsExpressionContext, QgsVectorLayer, 
QgsExpressionContextUtils

lyr = QgsVectorLayer('point?crs=epsg:4326&field=id:integer', 'dummy', 
'memory')

context = QgsExpressionContext()
context.appendScope(QgsExpressionContextUtils.layerScope(lyr))
print(f'name={context.variable("layer_name")}')

# this raises: TypeError: unable to convert a C++ 
'QPointer<QgsMapLayer>' instance to a Python object
lyr2 = context.variable('layer')


Is there another way to get the QgsMapLayer instance in Python?

If not, I could open an issue to bring the QgsExpressionUtils into the 
QGIS Python API as well.








-- 
--
Benjamin Jakimow, Doctoral Researcher
Earth Observation Lab | Geography Department | Humboldt-Universit?t zu 
Berlin

e-mail: benjamin.jakimow at geo.hu-berlin.de

phone:  +49 (0) 30 2093 6894
mobile: +49 (0) 157 5656 8477
fax:    +49 (0) 30 2093 6848
mail:   Unter den Linden 6 | 10099 Berlin | Germany
room: 2'222

From matteo.ghetta at gmail.com  Mon Mar 28 00:50:44 2022
From: matteo.ghetta at gmail.com (matteo)
Date: Mon, 28 Mar 2022 09:50:44 +0200
Subject: [QGIS-Developer] Selection opacity raster image fill QGIS
Message-ID: <5bac5a8c-aba7-8fdf-edbb-a2bb56032ce8@gmail.com>

Hi all,

it seems that the opacity of the selection color chosen in the project 
properties is ignored with a vector layer in raster fill symbology mode.

Is this a bug or the expected behavior?

Cheers and thanks

Matteo

From rdmailings at duif.net  Tue Mar 29 00:02:00 2022
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 29 Mar 2022 09:02:00 +0200
Subject: [QGIS-Developer] [Plugins]: is 'plugin_dependencies' being enforced
 somewhere?
Message-ID: <d7592980406b8e77ac3de5b021e0e0ca@duif.net>

Hi Devs,

Reading 
https://docs.qgis.org/3.22/en/docs/pyqgis_developer_cookbook/plugins/plugins.html#plugin-metadata

about 'plugin_dependencies' and trying it out in a plugin locally, it 
does not seem to be enforced or so? I added another plugin in metadata 
(it's not clear from docs what name you need to use: plugin name or 
module name) thinking I would see some message somewhere.

Is there some message on plugins.qgis.org?

Or is it just a 'memo' for users who happen to see it in the metadata of 
a plugin, then a dev should notify the user theirselves?

Thanks for any info,

Regards,

Richard Duivenvoorde

From apasotti at gmail.com  Tue Mar 29 00:18:58 2022
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 29 Mar 2022 09:18:58 +0200
Subject: [QGIS-Developer] [Plugins]: is 'plugin_dependencies' being
 enforced somewhere?
In-Reply-To: <d7592980406b8e77ac3de5b021e0e0ca@duif.net>
References: <d7592980406b8e77ac3de5b021e0e0ca@duif.net>
Message-ID: <CAL5Q6733s++PBabQK5VbkmoCjstjUgb-WJ0sz9EUxVw7vBL3ZA@mail.gmail.com>

Hi Richard,

it is (was?) enforced by the installer, AFAIK there are no checks on the
plugins website.

See:
https://github.com/qgis/QGIS/blob/master/python/pyplugin_installer/plugindependencies.py

Cheers


On Tue, Mar 29, 2022 at 9:02 AM Richard Duivenvoorde via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Hi Devs,
>
> Reading
>
> https://docs.qgis.org/3.22/en/docs/pyqgis_developer_cookbook/plugins/plugins.html#plugin-metadata
>
> about 'plugin_dependencies' and trying it out in a plugin locally, it
> does not seem to be enforced or so? I added another plugin in metadata
> (it's not clear from docs what name you need to use: plugin name or
> module name) thinking I would see some message somewhere.
>
> Is there some message on plugins.qgis.org?
>
> Or is it just a 'memo' for users who happen to see it in the metadata of
> a plugin, then a dev should notify the user theirselves?
>
> Thanks for any info,
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220329/78a03b9c/attachment.html>

From carrillo.german at gmail.com  Tue Mar 29 07:50:37 2022
From: carrillo.german at gmail.com (=?UTF-8?Q?Germ=C3=A1n_Carrillo?=)
Date: Tue, 29 Mar 2022 09:50:37 -0500
Subject: [QGIS-Developer] [Plugins]: is 'plugin_dependencies' being
 enforced somewhere?
In-Reply-To: <CAL5Q6733s++PBabQK5VbkmoCjstjUgb-WJ0sz9EUxVw7vBL3ZA@mail.gmail.com>
References: <d7592980406b8e77ac3de5b021e0e0ca@duif.net>
 <CAL5Q6733s++PBabQK5VbkmoCjstjUgb-WJ0sz9EUxVw7vBL3ZA@mail.gmail.com>
Message-ID: <CANaz7mxn7cfEVXsh8h3Un2Wa9AFXjvP53gVmmPe1rVjfxKqBKw@mail.gmail.com>

Hi Richard,


see the first part of the answer to "Using QGIS plugin from another plugin"
at GIS.SE [1]

In short, you need to use the independent plugin's name from metadata.txt
(i.e., "name" field) in your dependent plugin's "plugin_dependencies" field.


For instance, the plugin "LADM-COL add-on Ambiente" depends on "Asistente
LADM-COL" (see name field of the latter in [2]). So I need to use
"Asistete LADM-COL" in the plugin_dependecies field of "LADM-COL add-on
Ambiente", like this [3].


Note you may declare a specific version in plugin_dependencies, but keep in
mind that so far this only works if the specified version is the latest
stable or the latest experimental one. Older versions won't be installed by
plugin installer.


Let me know if it's still unclear.


Regards,

Germ?n
--------
[1]
https://gis.stackexchange.com/questions/403501/using-qgis-plugin-from-another-plugin
[2]
https://github.com/SwissTierrasColombia/Asistente-LADM-COL/blob/master/asistente_ladm_col/metadata.txt#L2
[3]
https://github.com/SwissTierrasColombia/LADM-COL-Add-on-Ambiente/blob/master/metadata.txt#L11


El mar, 29 mar 2022 a las 2:19, Alessandro Pasotti via QGIS-Developer (<
qgis-developer at lists.osgeo.org>) escribi?:

> Hi Richard,
>
> it is (was?) enforced by the installer, AFAIK there are no checks on the
> plugins website.
>
> See:
> https://github.com/qgis/QGIS/blob/master/python/pyplugin_installer/plugindependencies.py
>
> Cheers
>
>
> On Tue, Mar 29, 2022 at 9:02 AM Richard Duivenvoorde via QGIS-Developer <
> qgis-developer at lists.osgeo.org> wrote:
>
>> Hi Devs,
>>
>> Reading
>>
>> https://docs.qgis.org/3.22/en/docs/pyqgis_developer_cookbook/plugins/plugins.html#plugin-metadata
>>
>> about 'plugin_dependencies' and trying it out in a plugin locally, it
>> does not seem to be enforced or so? I added another plugin in metadata
>> (it's not clear from docs what name you need to use: plugin name or
>> module name) thinking I would see some message somewhere.
>>
>> Is there some message on plugins.qgis.org?
>>
>> Or is it just a 'memo' for users who happen to see it in the metadata of
>> a plugin, then a dev should notify the user theirselves?
>>
>> Thanks for any info,
>>
>> Regards,
>>
>> Richard Duivenvoorde
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>

--
-----------
   |\__
(:>__)(
   |/
Soluciones Geoinform?ticas Libres
http://geotux.tuxfamily.org/
https://twitter.com/GeoTux2 <http://twitter.com/GeoTux2>


<http://gis.stackexchange.com/users/4972/germ%c3%a1n-carrillo>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220329/89470f90/attachment.html>

From marco at qgis.org  Wed Mar 30 08:23:38 2022
From: marco at qgis.org (Marco Bernasocchi)
Date: Wed, 30 Mar 2022 17:23:38 +0200
Subject: [QGIS-Developer] [Qgis-psc] FOSS4G 2022: possible QGIS Dev
 meeting?
In-Reply-To: <b54a314c-eb6b-79fc-3b5b-77eea22016f2@faunalia.it>
References: <ad30a40c-1841-dede-51f1-75e287a49fa2@faunalia.it>
 <3c44e198931458dd509dc6355c4ec1a5@carto.net>
 <6ff37711-120a-2b8c-d842-5c0e94793933@gmx.at>
 <8702ca74-03ad-8562-8d65-1cc201d5f7cb@faunalia.it>
 <CAB2Z92ASUu3joqf+sxiE=7FuomtV5z48AYDSgkvDOM4fwdRTwQ@mail.gmail.com>
 <75932dcf-32a5-d138-7f9a-2831d2b3e4d1@faunalia.it>
 <CAB2ZMRBvK7JEVZGigYvADTMrj0HRPT-kws66pWsYXpoD2gJ1Uw@mail.gmail.com>
 <614afd3f-491e-8249-cdf5-8828f289c8e0@faunalia.it>
 <1d799beb-3c73-10aa-0cef-8b05ca343f43@faunalia.it>
 <CABgOYCd6M+CV-BbCNcZZxdStaEEV69ouOteJg_gowLbkkTBU_Q@mail.gmail.com>
 <1c0c72a8-7d35-06b0-15f7-e301451967e5@faunalia.it>
 <b54a314c-eb6b-79fc-3b5b-77eea22016f2@faunalia.it>
Message-ID: <CAB2ZMRAmUbzpyno_gD+Lncc2sKnHejtqHaoxrTs6w6zb4iohNw@mail.gmail.com>

Hi Paolo, I added the page to the list on the main wiki.
Do you have a bit more details on where the venue is? You wrote University
of Firenze on [1] but there are multiple locations around the city :)

ciao
Marco
[1] https://github.com/qgis/QGIS/wiki/24th-Contributors-Meeting-in-Firenze

On Sat, 19 Feb 2022 at 07:55, Paolo Cavallini <cavallini at faunalia.it> wrote:

> Hi all,
> we started organizing the next Contributors meeting:
> https://github.com/qgis/QGIS/wiki/24th-Contributors-Meeting-in-Firenze
> Help most welcome.
> All the best.
>
> Il 18/02/22 09:03, Paolo Cavallini ha scritto:
> > Hi R?gis,
> > thanks for pointing this out. I confirm we are organizing a QGIS
> > contributor meeting in the days preceding FOSS4G.
> > We'll make a more detailed announcement soon.
> > Cheers.
> >
> > Il 17/02/22 19:31, R?gis Haubourg ha scritto:
> >> Hi all,
> >> I just saw that the SOTM will take place in Firenze too, on the same day
> >> as the potential QGIS meeting:
> >>
> https://blog.openstreetmap.org/2022/02/16/announcing-sotm-2022-firenze-19-21-august-2022/comment-page-1/
> >> <
> https://blog.openstreetmap.org/2022/02/16/announcing-sotm-2022-firenze-19-21-august-2022/comment-page-1/
> >
> >>
> >> That's a lot of good reason to be there. Is the QGIS meeting confirmed
> >> or is there any risk the schedule collision could change our plans?
> >> Best regards
> >> R?gis
> >>
> >> Le jeu. 13 janv. 2022 ? 14:25, Paolo Cavallini <cavallini at faunalia.it
> >> <mailto:cavallini at faunalia.it>> a ?crit :
> >>
> >>     I'm told we can apply for funds from Osgeo before the next 20th.
> >>     Could a random president investigate this? ;)
> >>     Thanks.
> >>
> >>     Il 11/01/22 09:42, Paolo Cavallini ha scritto:
> >>     > Thanks Marco and others for the encouragement!
> >>     > I'll keep the PSC updated.
> >>     > Cheers.
> >>     >
> >>     > Il 11/01/22 09:25, Marco Bernasocchi ha scritto:
> >>     >> Thanks a lot Paolo,
> >>     >> that makes a lot of sense, I'm sure that the Dutch team will be
> ok in
> >>     >> skipping "their" turn and hopefully followup Firenze with
> >>     >> 's-Hertogenbosch in spring 23 (unless of course we could do a
> >>     spring 22
> >>     >> 's-Hertogenbosch HF first...)
> >>     >> I really hope that we can finally have a hackfest again.
> >>     >>
> >>     >> Cheers
> >>     >> Marco
> >>     >
> >>
> >>     --
> >>     Paolo Cavallini
> >>     www.faunalia.eu <http://www.faunalia.eu> - QGIS.org
> >>     training, support, development on QGIS, PostGIS and more
> >>     _______________________________________________
> >>     Qgis-psc mailing list
> >>     Qgis-psc at lists.osgeo.org <mailto:Qgis-psc at lists.osgeo.org>
> >>     https://lists.osgeo.org/mailman/listinfo/qgis-psc
> >>     <https://lists.osgeo.org/mailman/listinfo/qgis-psc>
> >>
> >>
> >> _______________________________________________
> >> Qgis-psc mailing list
> >> Qgis-psc at lists.osgeo.org
> >> https://lists.osgeo.org/mailman/listinfo/qgis-psc
> >
>
> --
> Paolo Cavallini
> www.faunalia.eu - QGIS.org
> training, support, development on QGIS, PostGIS and more
> _______________________________________________
> Qgis-psc mailing list
> Qgis-psc at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/qgis-psc
>


-- 
Marco Bernasocchi

QGIS.org Chair
OPENGIS.ch CEO
http://berna.io
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220330/fe39e016/attachment.html>

From r.nijssen at terglobo.nl  Wed Mar 30 23:46:53 2022
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Thu, 31 Mar 2022 08:46:53 +0200
Subject: [QGIS-Developer] Possible Contributor Meeting in April 2022
In-Reply-To: <3d1e928b6fa6c0080532ac6041b8fae7.squirrel@daweb26.oxilion.nl>
References: <3d1e928b6fa6c0080532ac6041b8fae7.squirrel@daweb26.oxilion.nl>
Message-ID: <509f98d0-3476-757a-050a-1c57f5892013@terglobo.nl>

Dear community,

Seems too short time for most people to attend a contributor meeting 
this April. We counted about 10 people only, mostly from The 
Netherlands. Therefore we decided to postpone again with one year, until 
spring 2023.

Meanwhile we will host a "hackday" on Friday April 29, 2022. We have 
capacity for 20 people so, if you are willing to gather and contribute 
to the project.. run and save your spot by registering your name on the 
wiki page:

https://github.com/qgis/QGIS/wiki/24th-Contributor-Meeting-in-'s-Hertogenbosch

Hope to see you soon!

Raymond


On 18-03-2022 16:12, Raymond Nijssen via QGIS-Developer wrote:
> We are happy to announce the opportunity to host the postponed 2020 QGIS
> Contributor Meeting in 's-Hertogenbosch, The Netherlands.
> 
> We have 2 options in the last weeks of April 2022. Because this is so soon
> we'd like to know how many contributors would be able to attend. Would you
> please fill out the form on github wiki page:
> 
> https://github.com/qgis/QGIS/wiki/24th-Contributor-Meeting-in-'s-Hertogenbosch#spring-2022-meeting
> 
> Hope this will happen, really looking forward to meet you all in person
> again!
> 
> Kind regards,
> Rosa, Aron, Raymond
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From senhor.neto at gmail.com  Thu Mar 31 02:58:45 2022
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Thu, 31 Mar 2022 02:58:45 -0700
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <20220324221333.feyrzzjnl3f4slwi@norbit.de>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
 <20220324164859.rmwi7vy2o2hjmklp@norbit.de>
 <CA+H0G_GuJv6OnY8h8WPj8Nz34QY1O4hg6Q-GJSqdW+6XpzM8Yw@mail.gmail.com>
 <20220324221333.feyrzzjnl3f4slwi@norbit.de>
Message-ID: <CA+H0G_FcdtFzkiL1CFQAtTQLLRehUHc7NcofiFxLK2ZWgjBs-w@mail.gmail.com>

Hi Jurgen,

Can I delete the 3-16 and 3-20 translation resources from transifex? they
won't be used anymore and that way we avoid people translating it in vain.

Alexandre Neto

On Thu Mar 24, 2022, 10:13 PM GMT, J?rgen E. Fischer <jef at norbit.de> wrote:

Hi Alexandre,

On Thu, 24. Mar 2022 at 18:43:24 +0000, Alexandre Neto wrote:

I only have the PT_pt translation experience, but I am pretty sure the same
should happen in other languages too.


I doubt that. I wonder why the quality is so bad. I would expect that most
of
the translations are ok and only some are poor. Review can help with those,
but should not be necessary to get usable translations at all.


J?rgen

-- 
J?rgen E. Fischer norBIT GmbH Tel. +49-4931-918175-31
Dipl.-Inf. (FH) Rheinstra?e 13 Fax. +49-4931-918175-50
Software Engineer D-26506 Norden https://www.norbit.de
QGIS release manager (PSC) Germany IRC: jef on Libera|OFTC
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Juergen Fischer, Nils Kutscher HR: Amtsgericht Aurich HRB 100827
Datenschutzerklaerung: https://www.norbit.de/83/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220331/710db525/attachment.html>

From jef at norbit.de  Thu Mar 31 03:11:35 2022
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Thu, 31 Mar 2022 12:11:35 +0200
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <CA+H0G_FcdtFzkiL1CFQAtTQLLRehUHc7NcofiFxLK2ZWgjBs-w@mail.gmail.com>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
 <20220324164859.rmwi7vy2o2hjmklp@norbit.de>
 <CA+H0G_GuJv6OnY8h8WPj8Nz34QY1O4hg6Q-GJSqdW+6XpzM8Yw@mail.gmail.com>
 <20220324221333.feyrzzjnl3f4slwi@norbit.de>
 <CA+H0G_FcdtFzkiL1CFQAtTQLLRehUHc7NcofiFxLK2ZWgjBs-w@mail.gmail.com>
Message-ID: <20220331101135.vqwvivvslrngeode@norbit.de>

Hi Alexandre,

On Thu, 31. Mar 2022 at 02:58:45 -0700, Alexandre Neto wrote:
> Can I delete the 3-16 and 3-20 translation resources from transifex? they
> won't be used anymore and that way we avoid people translating it in vain.

No, their webinterface will just ignore you if you try.  It has been that way
for several releases.  

I asked transifex' support to delete shortly after the release of 3.22.5.  They
promised to get back to me, once they do.  But I think it takes longer than
usual this time.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden              https://www.norbit.de
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220331/31680e4f/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220331/31680e4f/attachment.ksh>

From delazj at gmail.com  Thu Mar 31 03:19:26 2022
From: delazj at gmail.com (DelazJ)
Date: Thu, 31 Mar 2022 12:19:26 +0200
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <20220331101135.vqwvivvslrngeode@norbit.de>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
 <20220324164859.rmwi7vy2o2hjmklp@norbit.de>
 <CA+H0G_GuJv6OnY8h8WPj8Nz34QY1O4hg6Q-GJSqdW+6XpzM8Yw@mail.gmail.com>
 <20220324221333.feyrzzjnl3f4slwi@norbit.de>
 <CA+H0G_FcdtFzkiL1CFQAtTQLLRehUHc7NcofiFxLK2ZWgjBs-w@mail.gmail.com>
 <20220331101135.vqwvivvslrngeode@norbit.de>
Message-ID: <CAECJsSqcX3UGrtQno_1pfu0o53RtAcUKD-d-cR1mjgSSwPTUbg@mail.gmail.com>

Hi,
I've been chatting with Transifex guys for the docs and indeed, they made
me confirm that we want to 3.16 and 3.20 desktop resources. And as they
told you, J?rgen, they were supposed to do it and let us know.
Anyway, I asked them again last night about this. So let's give them few
days (again).

Regards,
harrissou

Le jeu. 31 mars 2022 ? 12:11, J?rgen E. Fischer via QGIS-Developer <
qgis-developer at lists.osgeo.org> a ?crit :

> Hi Alexandre,
>
> On Thu, 31. Mar 2022 at 02:58:45 -0700, Alexandre Neto wrote:
> > Can I delete the 3-16 and 3-20 translation resources from transifex? they
> > won't be used anymore and that way we avoid people translating it in
> vain.
>
> No, their webinterface will just ignore you if you try.  It has been that
> way
> for several releases.
>
> I asked transifex' support to delete shortly after the release of 3.22.5.
> They
> promised to get back to me, once they do.  But I think it takes longer than
> usual this time.
>
>
> J?rgen
>
> --
> J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
> Software Engineer         D-26506 Norden
> https://www.norbit.de
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220331/9145562b/attachment.html>

From senhor.neto at gmail.com  Thu Mar 31 04:08:10 2022
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Thu, 31 Mar 2022 04:08:10 -0700
Subject: [QGIS-Developer] Override System Locale user interface with
 American English by Default?
In-Reply-To: <CAECJsSqcX3UGrtQno_1pfu0o53RtAcUKD-d-cR1mjgSSwPTUbg@mail.gmail.com>
References: <CA+H0G_GpGOP0N+2RaEdBbLgLt=xvwDqxr1bLH-FjJKW-3NfKZg@mail.gmail.com>
 <20220324164859.rmwi7vy2o2hjmklp@norbit.de>
 <CA+H0G_GuJv6OnY8h8WPj8Nz34QY1O4hg6Q-GJSqdW+6XpzM8Yw@mail.gmail.com>
 <20220324221333.feyrzzjnl3f4slwi@norbit.de>
 <CA+H0G_FcdtFzkiL1CFQAtTQLLRehUHc7NcofiFxLK2ZWgjBs-w@mail.gmail.com>
 <20220331101135.vqwvivvslrngeode@norbit.de>
 <CAECJsSqcX3UGrtQno_1pfu0o53RtAcUKD-d-cR1mjgSSwPTUbg@mail.gmail.com>
Message-ID: <CA+H0G_HJUnqS6yW9q90MCu8z3-qZNn3ZHqE7mNxFChZT4jZupQ@mail.gmail.com>

Great.

Thanks J?rgen and Harrissou.

Alexandre

On Thu Mar 31, 2022, 10:19 AM GMT, DelazJ <delazj at gmail.com> wrote:

Hi,
I've been chatting with Transifex guys for the docs and indeed, they made
me confirm that we want to 3.16 and 3.20 desktop resources. And as they
told you, J?rgen, they were supposed to do it and let us know.
Anyway, I asked them again last night about this. So let's give them few
days (again).

Regards,
harrissou

Le jeu. 31 mars 2022 ? 12:11, J?rgen E. Fischer via QGIS-Developer <
qgis-developer at lists.osgeo.org> a ?crit :

> Hi Alexandre,
>
> On Thu, 31. Mar 2022 at 02:58:45 -0700, Alexandre Neto wrote:
> > Can I delete the 3-16 and 3-20 translation resources from transifex? they
> > won't be used anymore and that way we avoid people translating it in
> vain.
>
> No, their webinterface will just ignore you if you try.  It has been that
> way
> for several releases.
>
> I asked transifex' support to delete shortly after the release of 3.22.5.
> They
> promised to get back to me, once they do.  But I think it takes longer than
> usual this time.
>
>
> J?rgen
>
> --
> J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
> Software Engineer         D-26506 Norden
> https://www.norbit.de
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220331/a38a6ed5/attachment-0001.html>

From aron.gergely at rasterra.nl  Thu Mar 31 05:09:21 2022
From: aron.gergely at rasterra.nl (Aron Gergely)
Date: Thu, 31 Mar 2022 14:09:21 +0200
Subject: [QGIS-Developer] Plugin dependency with binaries: 'best' way to
 guide user to install?
Message-ID: <5e3173ec-7b7e-64da-47d1-79d39edc1c10@rasterra.nl>

Hi All,

What would be a good practice to handle 3rd party libs which can't be 
shipped together with a plugin?
I am looking for the most user-friendly way and have an idea.
But thought I would bounce it off the collective wisdom here and see if 
there are other/better ways.

If we find a 'best' method I could PR an update to the QGIS docs or 
PyQGIS cookbook, etc to preserve that knowledge.

Bit of context:
I have a plugin that uses a 3rd party python library which has binaries.
I would like to submit this plugin to the official plugin repository.
According to https://plugins.qgis.org/publish/ it's not allowed to ship 
binaries it with the plugin.
In such case the above webpage recommends telling the end user to run 
"pip.main(...)" from the python console to install missing libraries.

I thought that's not user friendly and it's a pip hack (pip.main() is 
meant to be internal).
Also, I want to handle the missing python module in my plugin 
gracefully: check on plugin load if missing, if so, guide user to 
resolve, preferably without having them write or copy any commands.

The idea:
Using python's subprocess module from within the plugin to call the pip 
CLI, which would install the package the usual pip way. Here's why:
- pip project recommends this way as best practice, warns against the 
pip.main()
- user would not need to write or copy-paste commands
- could make this user friendly: wire it in the plugin code to a push 
button and build it into a dialog e.g.;? if lib is missing on plugin load,
 ? show a QMessageBox and let user open a dialog to resolve. In that 
dialog would be the push button to trigger the pip install via subprocess.

How would this play out multi-platform via subprocess, I have no idea of 
yet - thought if the idea survived this thread, I'd go find out ;)

Do you think this subprocess + pip is a good idea?
Would it be allowed for plugins in the official repository to behave as 
such?
Anyone has other user-friendly ways of doing this?

Best regards,
Aron


From r.nijssen at terglobo.nl  Thu Mar 31 09:09:25 2022
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Thu, 31 Mar 2022 18:09:25 +0200
Subject: [QGIS-Developer] Unexpected results from GPKG table query using
 executeSql()
Message-ID: <bba11f52-a64a-6502-fbce-dbc986ba9391@terglobo.nl>

Hi devs,

I'm working on a plugin that connects to a custom table (without 
geometry) in a GPKG. When I'm sending queries to it, I keep on getting 
unexpected results. Somehow the id field is missing, sometimes it 
appears twice (!). And this seems to be different between QGIS 3.10 and 
3.25. (I think it changed since 3.22).

Here is a piece of my code:


fn = '/path/to/test.gpkg'
md = QgsProviderRegistry.instance().providerMetadata('ogr')
conn = md.createConnection(fn, {})

q = 'select * from test_table;'
qr = conn.executeSql(q)
print(qr) # No id field in result



Before diving into the QGIS code I'd like to check if this is the way to 
go. Or should i use another way to query that GPKG (SQLite) db?


Kind regards,
Raymond

From apasotti at gmail.com  Thu Mar 31 09:15:00 2022
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 31 Mar 2022 18:15:00 +0200
Subject: [QGIS-Developer] Unexpected results from GPKG table query using
 executeSql()
In-Reply-To: <bba11f52-a64a-6502-fbce-dbc986ba9391@terglobo.nl>
References: <bba11f52-a64a-6502-fbce-dbc986ba9391@terglobo.nl>
Message-ID: <CAL5Q670rrD--ZvEVDTtCWEqU1vZgUe7Nh+e58MLMDMQNPF9h1w@mail.gmail.com>

Hi Raymond,

your code looks good.

Can you provide a test file?

There are some test in core here:
https://github.com/qgis/QGIS/blob/master/tests/src/python/test_qgsproviderconnection_ogr_gpkg.py


On Thu, Mar 31, 2022 at 6:09 PM Raymond Nijssen via QGIS-Developer <
qgis-developer at lists.osgeo.org> wrote:

> Hi devs,
>
> I'm working on a plugin that connects to a custom table (without
> geometry) in a GPKG. When I'm sending queries to it, I keep on getting
> unexpected results. Somehow the id field is missing, sometimes it
> appears twice (!). And this seems to be different between QGIS 3.10 and
> 3.25. (I think it changed since 3.22).
>
> Here is a piece of my code:
>
>
> fn = '/path/to/test.gpkg'
> md = QgsProviderRegistry.instance().providerMetadata('ogr')
> conn = md.createConnection(fn, {})
>
> q = 'select * from test_table;'
> qr = conn.executeSql(q)
> print(qr) # No id field in result
>
>
>
> Before diving into the QGIS code I'd like to check if this is the way to
> go. Or should i use another way to query that GPKG (SQLite) db?
>
>
> Kind regards,
> Raymond
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20220331/ad1ec7b7/attachment.html>

From r.nijssen at terglobo.nl  Thu Mar 31 09:52:48 2022
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Thu, 31 Mar 2022 18:52:48 +0200
Subject: [QGIS-Developer] Unexpected results from GPKG table query using
 executeSql()
In-Reply-To: <CAL5Q670rrD--ZvEVDTtCWEqU1vZgUe7Nh+e58MLMDMQNPF9h1w@mail.gmail.com>
References: <bba11f52-a64a-6502-fbce-dbc986ba9391@terglobo.nl>
 <CAL5Q670rrD--ZvEVDTtCWEqU1vZgUe7Nh+e58MLMDMQNPF9h1w@mail.gmail.com>
Message-ID: <87330c53-a8a5-6e07-dd6e-006fcdd7710f@terglobo.nl>

Hi Alessandro,

Thanks for your reply. Will share data and a test script with you privately.

Raymond


On 31-03-2022 18:15, Alessandro Pasotti wrote:
> Hi Raymond,
> 
> your code looks good.
> 
> Can you provide a test file?
> 
> There are some test in core here: 
> https://github.com/qgis/QGIS/blob/master/tests/src/python/test_qgsproviderconnection_ogr_gpkg.py 
> <https://github.com/qgis/QGIS/blob/master/tests/src/python/test_qgsproviderconnection_ogr_gpkg.py>
> 
> 
> On Thu, Mar 31, 2022 at 6:09 PM Raymond Nijssen via QGIS-Developer 
> <qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org>> 
> wrote:
> 
>     Hi devs,
> 
>     I'm working on a plugin that connects to a custom table (without
>     geometry) in a GPKG. When I'm sending queries to it, I keep on getting
>     unexpected results. Somehow the id field is missing, sometimes it
>     appears twice (!). And this seems to be different between QGIS 3.10 and
>     3.25. (I think it changed since 3.22).
> 
>     Here is a piece of my code:
> 
> 
>     fn = '/path/to/test.gpkg'
>     md = QgsProviderRegistry.instance().providerMetadata('ogr')
>     conn = md.createConnection(fn, {})
> 
>     q = 'select * from test_table;'
>     qr = conn.executeSql(q)
>     print(qr) # No id field in result
> 
> 
> 
>     Before diving into the QGIS code I'd like to check if this is the
>     way to
>     go. Or should i use another way to query that GPKG (SQLite) db?
> 
> 
>     Kind regards,
>     Raymond
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> 
> 
> 
> -- 
> Alessandro Pasotti
> QCooperative: www.qcooperative.net <https://www.qcooperative.net>
> ItOpen: www.itopen.it <http://www.itopen.it>

From Tobias.Schmetzer at zae-bayern.de  Thu Mar 31 12:27:02 2022
From: Tobias.Schmetzer at zae-bayern.de (Schmetzer, Tobias)
Date: Thu, 31 Mar 2022 19:27:02 +0000
Subject: [QGIS-Developer] How to access QgisApp::instance() from a core
 class
In-Reply-To: <CAB28Asik6hsE_peT3wnhf8xgxSt13zh3=hWuQtqONEr1g9Hsgg@mail.gmail.com>
References: <7820257fe43d4a45baed07f2f104d8e7@zae-bayern.de>
 <CAB28Asi8uhegOcTu18hxBmxCvF+i92qjoLpXtwCppVk6oGTUQg@mail.gmail.com>
 <d58e22188fd14c5298a96252e09db72a@zae-bayern.de>,
 <CAB28Asik6hsE_peT3wnhf8xgxSt13zh3=hWuQtqONEr1g9Hsgg@mail.gmail.com>
Message-ID: <785b97ec467c424dab0e5c4c7e085220@zae-bayern.de>



>  Offhand, there's a couple of ways to approach something like this:

> 1. You add appropriate signals in the core classes which are emitted
>  at useful stages, e.g. "aboutToCalculateExtent",
>  "extentCalculationProgressChanged", "extentCalculationComplete". And
>  then the app/gui classes can listen out for these signals and respond
>  to them appropriately, i.e. by showing a progress bar somewhere.

That sounds reasonable.

I am experimenting to implement the signals and the connect() call into the concerning 
provider class. As I am not familiar with the QGIS architecture I am unsure
what class to put the slot function into that raises the QProgressDialog(). 
I was thinking if QgsProject:: would be a good place?

>  2. You could add a QgsFeedback* argument to the costly method, and use
>  that to report progress and support early cancellation.

I couldn't manage to fully understand the concept of QgsFeedback, especially 
how it causes QProgressDialog to be invoked. Sudden enlightenment or supportive
explanation provided I will update the docs.

>  (2 is a more flexible, "better" approach, but depending on the method
>  you may not be able to add this to an existing method without breaking
>  stable API.
     
 ?  
Tobias
    

________________________________
Von: Nyall Dawson <nyall.dawson at gmail.com>
Gesendet: Montag, 7. M?rz 2022 23:52
An: Schmetzer, Tobias
Cc: qgis-developer at lists.osgeo.org
Betreff: Re: [QGIS-Developer] How to access QgisApp::instance() from a core class
?   
On Tue, 8 Mar 2022 at 07:23, Schmetzer, Tobias
<Tobias.Schmetzer at zae-bayern.de> wrote:
>
> > Again, none of the core classes are allowed any GUI component, and the correct approach to handle this particular situation is to move that code from the provider level up to app level, specifically via the QgsDataItemGuiProvider class.
>
>
> I had a look into it. If I understood it correctly the class provides a framework for functions to be registered and called by other functions placed in the gui.
>
> But what to do when a progress dialog needs to be raised or an application state needs to be read? (see description below)
>
>
> > So my question would be: why do you need to raise a user-facing message from QgsOgrProvider::extent?
>
>
> - One idea was is to inform the user via a simple progress dialog in cases of very time-consuming extent calculations for large layers (I observed calc time ranges from 10 min to hours) of what's going on and that QGIS hasn't crashed yet. The design would  practically allow this to be implemented in the provider . If that's also not how it is intended to be then I'd appreciate a quick hint of how it is intended to be.

Offhand, there's a couple of ways to approach something like this:

1. You add appropriate signals in the core classes which are emitted
at useful stages, e.g. "aboutToCalculateExtent",
"extentCalculationProgressChanged", "extentCalculationComplete". And
then the app/gui classes can listen out for these signals and respond
to them appropriately, i.e. by showing a progress bar somewhere.

2. You could add a QgsFeedback* argument to the costly method, and use
that to report progress and support early cancellation.

(2 is a more flexible, "better" approach, but depending on the method
you may not be able to add this to an existing method without breaking
stable API.

> and I also saw the use of QProgressDialog in other parts of the core components code

That's likely just outdated code which hasn't been removed yet.

>
>
> - The second idea was to display an additional message dependant on the current QGIS instance's project state (whether it's loading/loaded/saving/closed) for which I had planned to introduce an enum QgisApp::ProjectState alongside with a private variable  mProjectState and a public function QgisApp::getProjectState(). So would I make this accessible to the provider?

That property sounds potentially useful! (Just a note that QGIS code
convention is to name a getter "projectState()", not
"getProjectState(). We follow Qt conventions for naming as much as
possible).

But... (there's always a catch!) You can't (well, shouldn't) access
QgsProject from a data provider*.? So you'd need to change the
behaviour at a higher level based on the project state instead. (e.g.
by not calling some expensive method which can be deferred from the
app level code)

Nyall

* the virtual data provider does this, but it's special, and really
shouldn't anyway.

>
>
> Best regards
>
> Tobias
>
> --
>
> ZAE Bayern
> Dipl.-Ing. Tobias Schmetzer
> Systementwicklung | Systems Engineering
> Bereich Energiespeicherung | Division Energy Storage
> Walther-Mei?ner-Stra?e 6
> 85748 Garching
>
> Tel.: +49 89 329442-65
> Fax: +49 89 329442-12
> Mobil | Cell: +49 151 56964756
> tobias.schmetzer at zae-bayern.de
> https://www.zae-bayern.de
>
> ZAE Bayern
> Bayerisches Zentrum f?r Angewandte Energieforschung e. V. | Bavarian Center for Applied Energy Research
> Vorstand | Board: Dr. Andreas Hauer (Vorsitzender | Chairman), Dr. Hans-Peter Ebert
> Sitz | Registered Office: W?rzburg
> Registergericht | Register Court: Amtsgericht W?rzburg
> Registernummer | Register Number: VR 1386
>
> Hinweise zum Datenschutz unter  https://www.zae-bayern.de/datenschutz
>
>
>
> ________________________________
> Von: Nyall Dawson <nyall.dawson at gmail.com>
> Gesendet: Montag, 7. M?rz 2022 00:03
> An: Schmetzer, Tobias
> Cc: qgis-developer at lists.osgeo.org
> Betreff: Re: [QGIS-Developer] How to access QgisApp::instance() from a core class
>
> On Sun, 6 Mar 2022 at 00:16, Schmetzer, Tobias via QGIS-Developer
> <qgis-developer at lists.osgeo.org> wrote:
> >
> > Hello everyone,
> >
> >
> > I would like to access QgisApp::instance() (src/app/qgisapp.cpp) from a provider like QgsOgrProvider::extent() (src/core/providers/ogr/qgsogrprovider.cpp.
>
> You can't, by design.
>
> CORE classes must be completely non-gui, so that they work without
> issue on non-gui platforms like QGIS server (also for clients which
> have their own GUI, such as QFIeld/Input).
>
> Just to be super-blunt: There is 100% no way this will EVER change! ;)
>
>
> > When looking for this information I found some inactivating preprocessor code block comments like this one (qgswfsdataitems.cpp):
> >
> > #if 0
> >
> >???? // TODO: how to emit message from provider (which does not know about QgisApp)
> >???? QgisApp::instance()->messageBar()->pushMessage( tr( "Cannot copy style" ),
> >???????? errorMsg,
> >???????? Qgis::MessageLevel::Critical, messageTimeout() );
> > #endif
>
> This is very old code (hence why it's disabled). Again, none of the
> core classes are allowed any GUI component, and the correct approach
> to handle this particular situation is to move that code from the
> provider level up to app level, specifically via the
> QgsDataItemGuiProvider class.
>
> So my question would be: why do you need to raise a user-facing
> message from QgsOgrProvider::extent?
>
> Nyall
    

From r.nijssen at terglobo.nl  Thu Mar 31 23:28:28 2022
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Fri, 1 Apr 2022 08:28:28 +0200
Subject: [QGIS-Developer] Unexpected results from GPKG table query using
 executeSql()
In-Reply-To: <CAL5Q670rrD--ZvEVDTtCWEqU1vZgUe7Nh+e58MLMDMQNPF9h1w@mail.gmail.com>
References: <bba11f52-a64a-6502-fbce-dbc986ba9391@terglobo.nl>
 <CAL5Q670rrD--ZvEVDTtCWEqU1vZgUe7Nh+e58MLMDMQNPF9h1w@mail.gmail.com>
Message-ID: <721efa78-e158-f7ce-f772-136878493e76@terglobo.nl>

For a workaround I found that selecting this way:

SELECT
   edit_id + 0 AS edit_id,
   timestamp,
   name
FROM
   ...

The +0 seem to makes QGIS (or GDAL?) unaware of edit_id being the PK 
field and it does return it. Works both in 3.10 and 3.25.

Raymond



On 31-03-2022 18:15, Alessandro Pasotti wrote:
> Hi Raymond,
> 
> your code looks good.
> 
> Can you provide a test file?
> 
> There are some test in core here: 
> https://github.com/qgis/QGIS/blob/master/tests/src/python/test_qgsproviderconnection_ogr_gpkg.py 
> <https://github.com/qgis/QGIS/blob/master/tests/src/python/test_qgsproviderconnection_ogr_gpkg.py>
> 
> 
> On Thu, Mar 31, 2022 at 6:09 PM Raymond Nijssen via QGIS-Developer 
> <qgis-developer at lists.osgeo.org <mailto:qgis-developer at lists.osgeo.org>> 
> wrote:
> 
>     Hi devs,
> 
>     I'm working on a plugin that connects to a custom table (without
>     geometry) in a GPKG. When I'm sending queries to it, I keep on getting
>     unexpected results. Somehow the id field is missing, sometimes it
>     appears twice (!). And this seems to be different between QGIS 3.10 and
>     3.25. (I think it changed since 3.22).
> 
>     Here is a piece of my code:
> 
> 
>     fn = '/path/to/test.gpkg'
>     md = QgsProviderRegistry.instance().providerMetadata('ogr')
>     conn = md.createConnection(fn, {})
> 
>     q = 'select * from test_table;'
>     qr = conn.executeSql(q)
>     print(qr) # No id field in result
> 
> 
> 
>     Before diving into the QGIS code I'd like to check if this is the
>     way to
>     go. Or should i use another way to query that GPKG (SQLite) db?
> 
> 
>     Kind regards,
>     Raymond
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> 
> 
> 
> -- 
> Alessandro Pasotti
> QCooperative: www.qcooperative.net <https://www.qcooperative.net>
> ItOpen: www.itopen.it <http://www.itopen.it>

