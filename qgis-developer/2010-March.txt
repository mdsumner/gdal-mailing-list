From cavallini at faunalia.it  Mon Mar  1 00:44:31 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon Mar  1 00:44:50 2010
Subject: [Qgis-developer] set plugin enabled by default
In-Reply-To: <201002282348.49241.borysiasty@aster.pl>
References: <4B881765.3070809@web.de>
	<1267388073.6619.2.camel@sibirica>	<4B8AECC0.5040502@faunalia.it>
	<201002282348.49241.borysiasty@aster.pl>
Message-ID: <4B8B543F.6030701@faunalia.it>

Borys Jurgiel ha scritto:
> Isn't it modified in your installation? The installer 1.0.8 should just confirm 
> succesfull installation. If you have an older version, Qgis 1.4 should warn 
> about an obsolete installer.

When upgrading a plugin, I get: Python plugin reinstalled. You need to restart
Quantum GIS in order to reload it.
def version():
  return "Version 1.0.8"
All the best.
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From marco at hugis.net  Mon Mar  1 03:09:27 2010
From: marco at hugis.net (Marco Hugentobler)
Date: Mon Mar  1 03:10:41 2010
Subject: [Qgis-developer] Custom composer items?
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0648ECFCA2@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0648ECFCA2@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <201003010909.27807.marco@hugis.net>

Hi Chris

It is possible to derive new classes from QgsComposerItem (in C++ and Python).
You might look into qgscomposerscaleber.cpp/h as an example how to add scale 
information.

Regards,
Marco


Am Sonntag, 28. Februar 2010 23.36:50 schrieb Chris Crook:
> Hi
> 
> I'm wanting to add scale information for symbols to composer.  These are
>  arrow symbols representing vector fields, so I want to be able to show in
>  the composer generated page what the scale of the arrows is (ie how long
>  an arrow represents a 5cm offset at a point, or whatever).
> 
> Logically this would be a custom composer item, but I cannot see any way to
>  create a custom item, either in C++ or in Python (my preference!), without
>  modifying the base composer classe(s).  Can anyone confirm this?
> 
> A slightly less desirable approach would be to draw the scale information
>  onto the map item in composer.  This would constrain the placement - it
>  would be nicer to be able to place it arbitrarily as other widget items.
> 
> In the main Qgis window I draw this scale information onto the map canvas
>  in response to the renderComplete signal, in the same way as the scale bar
>  or north arrow, but I don't think there is an equivalent event when the
>  composer map item is drawn?  So I can't use that approach to draw onto the
>  canvas...
> 
> I think I may be able to draw the scale information by adding a custom map
>  layer.
> 
> Can anyone suggest better approaches, or point me to something obvious I've
>  missed?
> 
> Many thanks
> 
> Chris
> 
> 
> 
> 
> ___________________________________________________________________________
> ___________________________
> 
> This message contains information, which is confidential and may be subject
>  to legal privilege. If you are not the intended recipient, you must not
>  peruse, use, disseminate, distribute or copy this message. If you have
>  received this message in error, please notify us immediately (Phone 0800
>  665 463 or info@linz.govt.nz) and destroy the original message. LINZ
>  accepts no responsibility for changes to this email, or for any
>  attachments, after its transmission from LINZ.
> 
> Thank you.
> ___________________________________________________________________________
> ___________________________
> 

-- 
Dr. Marco Hugentobler
HUGIS - GIS programming and consulting
Webereistr. 66
CH-8134 Adliswil
marco@hugis.net
http://homepage.hispeed.ch/hugis/
Technical Advisor QGIS Project Steering Committee
From st_kiefer at web.de  Mon Mar  1 07:24:56 2010
From: st_kiefer at web.de (Stefan Kiefer)
Date: Mon Mar  1 07:25:16 2010
Subject: [Qgis-developer] set plugin enabled by default
In-Reply-To: <1267388073.6619.2.camel@sibirica>
References: <4B881765.3070809@web.de> <1267388073.6619.2.camel@sibirica>
Message-ID: <4B8BB218.4090002@web.de>

Hi,
thanks a lot for the immediate answers. What you all say is true for 
plugins installed from a respository, resp. with the plugin-installer. 
What I need is when I put a custom plugin (one I made by myself) to the 
qgis/python/plugins-folder. Hence, if I do that the plugin can be 
activated in the pluginmanager, but is not activated by default.
The way is that one get an installer (in this case a selfextractable 
file) and the plugin gets copied to the plugins folder. Unfortunately 
then the user is forced to search in the pluginmanager for the new 
plugin to activate it. I need to realize this more comfortable, i.e. 
without confronting the user to open the plugin installer nor the 
manager ...

thanks for your efforts

stefan
> Hi,
>
> as far as I can see since qgis 1.4 python plugins are immediately
> activated after installation.
>
> cheers
>
> -- Giovanni --
>
>
> On Fri, 2010-02-26 at 19:48 +0100, Stefan Kiefer wrote:
>   
>> Hi there,
>> does someone knows if there is a way to set a plugin enabled by default.
>> My trouble is: when the Plugin gets installed it should be visible to 
>> the user after startup of Qgis. The user should not be forced to open 
>> the plugs menu and search for the plugin and activate it.
>> Is there any way to perform this, probably by modifying the default 
>> plugins (ftools or plugin_installer). It must work for standard Qgis 
>> installations, without changing the source code (modifying the python 
>> code is also not what I really need, but could be a workaround).
>> Maybe there is a possibility to get the installed plugins and activate 
>> the one needed?
>>
>> thanks for your help
>>
>> cheers
>>
>> Stefan
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>     
>
>   

From borysiasty at aster.pl  Mon Mar  1 07:57:04 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Mon Mar  1 07:57:09 2010
Subject: [Qgis-developer] set plugin enabled by default
In-Reply-To: <4B8BB218.4090002@web.de>
References: <4B881765.3070809@web.de> <1267388073.6619.2.camel@sibirica>
	<4B8BB218.4090002@web.de>
Message-ID: <201003011357.05887.borysiasty@aster.pl>

Dnia poniedzia?ek, 1 marca 2010 o 13:24:56 Stefan Kiefer napisa?(a):
> Hi,
> thanks a lot for the immediate answers. What you all say is true for
> plugins installed from a respository, resp. with the plugin-installer.
> What I need is when I put a custom plugin (one I made by myself) to the
> qgis/python/plugins-folder. Hence, if I do that the plugin can be
> activated in the pluginmanager, but is not activated by default.
> The way is that one get an installer (in this case a selfextractable
> file) and the plugin gets copied to the plugins folder. Unfortunately
> then the user is forced to search in the pluginmanager for the new
> plugin to activate it. I need to realize this more comfortable, i.e.
> without confronting the user to open the plugin installer nor the
> manager ...

Your installer can enable the plugin in Qgis settings from outside Qgis. It's 
accessible from Qt via QSettings as well as directly in the file:
~/.config/QuantumGIS/QGIS.conf 
on Linux and in similar path in the windows Registry.

The only thing you need to do is to go to the PythonPlugins section
and set your_plugin_module key to true.
From st_kiefer at web.de  Mon Mar  1 09:00:55 2010
From: st_kiefer at web.de (Stefan Kiefer)
Date: Mon Mar  1 09:01:10 2010
Subject: [Qgis-developer] set plugin enabled by default
In-Reply-To: <201003011357.05887.borysiasty@aster.pl>
References: <4B881765.3070809@web.de> <1267388073.6619.2.camel@sibirica>
	<4B8BB218.4090002@web.de>  <201003011357.05887.borysiasty@aster.pl>
Message-ID: <1267452055.26336.32.camel@Dafis00>

Hi Borys,
thanks for your answer.
that might be a way I also had in mind. Otherwise in Windows
environments the config is written to the registry. I would like to
avoid interferring with the registry. Whereas that would be manageable
with an installer, in Linux environments one needs to manipulate the
config file as you mentioned. Manipulating this file with an installer
would not be as easy. Otherwise, either the config file as well as the
registry entries exist only when Qgis was run first. So I have to
consider this as well.
Also with Linux there could be an - unlikly - issue that somone has
changed the QT-config path settings, Whereas this is not to expect.

Anyway, I believe I need a more sophisticated way, like setting a flag
while Qgis loads all the plugins. Or a workaround, like activating my
plugin with one of the default plugins. Manipulating the default plugins
might be the ultimo ratio, because I would neither to change this
plugins (in favor of avoiding instabilities) nor risk to overwrite
possible changes or updates on the users machine!

Otherwise, does anyone know whether  there is a flag or a property or
any way to enable/disable plugins programmatical, let's say from another
plugin?

cheers

Stefan

Am Montag, den 01.03.2010, 13:57 +0100 schrieb Borys Jurgiel:

> Dnia poniedzia?ek, 1 marca 2010 o 13:24:56 Stefan Kiefer napisa?(a):
> > Hi,
> > thanks a lot for the immediate answers. What you all say is true for
> > plugins installed from a respository, resp. with the plugin-installer.
> > What I need is when I put a custom plugin (one I made by myself) to the
> > qgis/python/plugins-folder. Hence, if I do that the plugin can be
> > activated in the pluginmanager, but is not activated by default.
> > The way is that one get an installer (in this case a selfextractable
> > file) and the plugin gets copied to the plugins folder. Unfortunately
> > then the user is forced to search in the pluginmanager for the new
> > plugin to activate it. I need to realize this more comfortable, i.e.
> > without confronting the user to open the plugin installer nor the
> > manager ...
> 
> Your installer can enable the plugin in Qgis settings from outside Qgis. It's 
> accessible from Qt via QSettings as well as directly in the file:
> ~/.config/QuantumGIS/QGIS.conf 
> on Linux and in similar path in the windows Registry.
> 
> The only thing you need to do is to go to the PythonPlugins section
> and set your_plugin_module key to true.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100301/5f8e8660/attachment.html
From ahmed at elegantdesigns.ca  Mon Mar  1 08:57:02 2010
From: ahmed at elegantdesigns.ca (ahmed@elegantdesigns.ca)
Date: Mon Mar  1 09:24:22 2010
Subject: [Qgis-developer] GSOC Project Proposal
Message-ID: <e584a5849c525a4a6b73b51f47f66bdf@127.0.0.1>

Hey all,

I added a blurb on a project that is strongly needed for transportation and
traffic engineers and modelers I posted it in the wiki, feel free to make
any suggestions or ask any questions

link:
http://www.qgis.org/wiki/Google_Summer_of_Code_2010#Transportation_Road_Network_Data_Structure

Cheers,
dassouki
From mwa at sourcepole.ch  Mon Mar  1 09:34:14 2010
From: mwa at sourcepole.ch (Mathias Walker)
Date: Mon Mar  1 09:34:34 2010
Subject: [Qgis-developer] OpenLayers plugin update
Message-ID: <201003011534.21616.mwa@sourcepole.ch>

Hi all

I uploaded a new version of the OpenLayers plugin.

* scaling issues for different screen dpi settings should now be fixed
* the plugin now uses the recently added Google Mercator SRS (EPSG:900913)

Best regards
Mathias Walker
-- 
Sourcepole -  Linux & Open Source Solutions
Elestastr. 18   7310 Bad Ragaz  Switzerland
Tel: 081 330 77 11       Fax: 081 330 77 12
mwa@sourcepole.ch  http://www.sourcepole.ch
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part.
Url : http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100301/f8e906d9/attachment.bin
From andreasplesch at netscape.net  Mon Mar  1 09:58:21 2010
From: andreasplesch at netscape.net (Andreas Plesch)
Date: Mon Mar  1 09:58:28 2010
Subject: [Qgis-developer] Re: shaded relief plugin python error
In-Reply-To: <e17134bc1003010657r7e5b907bhf1245e22c126d04b@mail.gmail.com>
References: <1267395834.6619.40.camel@sibirica>
	<e17134bc1003010657r7e5b907bhf1245e22c126d04b@mail.gmail.com>
Message-ID: <e17134bc1003010658y1e26d389r6aef65e86651516b@mail.gmail.com>

Hello Giovanni,

first I thought perhaps the DEM is simply too large to fit into
memory. The plugin does load the complete DEM into memory, and
actually needs to maintain additional copies as well for computation.

However, I could successfully use the plugin with your Portugal DEM
here on my machine. It is 64bit linux and has 16GB of memory. If you
want I can upload the shaded relief somewhere. Perhaps you can find
access to a larger machine as well ?

Andreas


On Mon, Mar 1, 2010 at 9:57 AM, Andreas Plesch
<andreas_plesch@harvard.edu> wrote:
> Hello Giovanni,
>
> first I thought perhaps the DEM is simply too large to fit into
> memory. The plugin does load the complete DEM into memory, and
> actually needs to maintain additional copies as well for computation.
>
> However, I could successfully use the plugin with your Portugal DEM
> here on my machine. It is 64bit linux and has 16GB of memory. If you
> want I can upload the shaded relief somewhere. Perhaps you can find
> access to a larger machine as well ?
>
> Andreas
>
>
>
> On Sun, Feb 28, 2010 at 5:23 PM, Giovanni Manghi
> <giovanni.manghi@gmail.com> wrote:
>> Hi all,
>> I'm getting python error(s) when running the shaded relief plugin on the
>> following digital terrain model (qgis 1.4 on both linux and windows)
>>
>> http://mapserver.uevora.pt/~mapserver/dem_portugal.tif.tar.gz
>>
>> here are the errors
>>
>> ---------------------------
>> An error has occured while executing Python code:
>>
>> Traceback (most recent call last):
>> ?File
>> "/home/gio/.qgis//python/plugins/shadedrelief/ShadedReliefDialog.py",
>> line 82, in accept
>> ? ?myEngine.run()
>> ?File
>> "/home/gio/.qgis//python/plugins/shadedrelief/ShadedReliefEngine.py",
>> line 64, in run
>> ? ?sta=numpy.dstack((-gr[1]*dy,gr[0]*dx,numpy.ones(gr[0].shape)*dx*dy))
>> ?File "/usr/lib/python2.6/dist-packages/numpy/lib/shape_base.py", line
>> 573, in dstack
>> ? ?return _nx.concatenate(map(atleast_3d,tup),2)
>> MemoryError
>>
>> Python version:
>> 2.6.2 (release26-maint, Apr 19 2009, 02:11:59)
>> [GCC 4.3.3]
>> ---------------------------
>>
>> An error has occured while executing Python code:
>>
>> Traceback (most recent call last):
>> ?File
>> "/home/gio/.qgis//python/plugins/shadedrelief/ShadedReliefDialog.py",
>> line 82, in accept
>> ? ?myEngine.run()
>> ?File
>> "/home/gio/.qgis//python/plugins/shadedrelief/ShadedReliefEngine.py",
>> line 57, in run
>> ? ?gr =
>> numpy.gradient(numpy.array(rastergdal.layerAsArray(str(self.sourceFileParam)))*self.vzParam)
>> ?File "/usr/lib/python2.6/dist-packages/numpy/lib/function_base.py",
>> line 1017, in gradient
>> ? ?out[slice1] = (f[slice2] - f[slice3])/2.0
>> MemoryError
>> ---------------------------
>>
>>
>> cheers
>>
>> -- Giovanni --
>>
>>
>
>
>
> --
> Andreas Plesch
> 20 Oxford St.
> Cambridge, MA 02138
> Tel: 617-495-2356
> Fax:617-495-7660
>



-- 
Andreas Plesch
20 Oxford St.
Cambridge, MA 02138
Tel: 617-495-2356
Fax:617-495-7660
From borysiasty at aster.pl  Mon Mar  1 11:30:55 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Mon Mar  1 11:31:00 2010
Subject: [Qgis-developer] set plugin enabled by default
In-Reply-To: <1267452055.26336.32.camel@Dafis00>
References: <4B881765.3070809@web.de> <201003011357.05887.borysiasty@aster.pl>
	<1267452055.26336.32.camel@Dafis00>
Message-ID: <201003011730.56723.borysiasty@aster.pl>

Dnia poniedzia?ek, 1 marca 2010 o 15:00:55 Stefan Kiefer napisa?(a):
> Hi Borys,
> thanks for your answer.
> that might be a way I also had in mind. Otherwise in Windows
> environments the config is written to the registry. I would like to
> avoid interferring with the registry. Whereas that would be manageable
> with an installer, in Linux environments one needs to manipulate the
> config file as you mentioned. Manipulating this file with an installer
> would not be as easy. Otherwise, either the config file as well as the
> registry entries exist only when Qgis was run first. So I have to
> consider this as well.
> Also with Linux there could be an - unlikly - issue that somone has
> changed the QT-config path settings, Whereas this is not to expect.
> 
> Anyway, I believe I need a more sophisticated way, like setting a flag
> while Qgis loads all the plugins. Or a workaround, like activating my
> plugin with one of the default plugins. Manipulating the default plugins
> might be the ultimo ratio, because I would neither to change this
> plugins (in favor of avoiding instabilities) nor risk to overwrite
> possible changes or updates on the users machine!
> 
> Otherwise, does anyone know whether  there is a flag or a property or
> any way to enable/disable plugins programmatical, let's say from another
> plugin?

From another plugin you can start your plugin for the current session:

qgis.utils.loadPlugin('your_module_name')
qgis.utils.startPlugin('your_module_name')

and also enable it to be automatically loaded from the next time:

settings=QSettings()
settings.setValue('PythonPlugins/your_module_name', QVariant(True))

Yo can let your installer insert such instructions to the PluginInstaller 
(thought it's kinda virus... :) but remember it installs in the system 
location and only its updates go to the user directory, where mask the system 
one.

Many users won't have it installed in the user directory, and your installer 
would create a fake PluginInstaller what masks the true one. So your installer 
should determine if there is PluginInstaller in the user directory and if 
isn't, it can create the fake one, but has to tell to your plugin to remove it 
at the first run. So it's gonna be a little weird ;-)
From jctull at gmail.com  Mon Mar  1 11:54:31 2010
From: jctull at gmail.com (John C. Tull)
Date: Mon Mar  1 11:54:48 2010
Subject: [Qgis-developer] Re: OpenLayers plugin update
In-Reply-To: <201003011534.21616.mwa@sourcepole.ch>
References: <201003011534.21616.mwa@sourcepole.ch>
Message-ID: <0D544FC4-F50D-4DB2-A8AB-4E6BB03CE7A7@gmail.com>

Hi Mathias,

I still have a mismatch with my county layer and the openlayer layer. I used the google mercator and OTF projection, integer levels of zoom, etc.

Cheers,
John

On Mar 1, 2010, at 6:34 AM, Mathias Walker wrote:

> Hi all
> 
> I uploaded a new version of the OpenLayers plugin.
> 
> * scaling issues for different screen dpi settings should now be fixed
> * the plugin now uses the recently added Google Mercator SRS (EPSG:900913)
> 
> Best regards
> Mathias Walker
> -- 
> Sourcepole -  Linux & Open Source Solutions
> Elestastr. 18   7310 Bad Ragaz  Switzerland
> Tel: 081 330 77 11       Fax: 081 330 77 12
> mwa@sourcepole.ch  http://www.sourcepole.ch

From st_kiefer at web.de  Mon Mar  1 11:59:11 2010
From: st_kiefer at web.de (Stefan Kiefer)
Date: Mon Mar  1 12:19:48 2010
Subject: [Qgis-developer] set plugin enabled by default
In-Reply-To: <201003011730.56723.borysiasty@aster.pl>
References: <4B881765.3070809@web.de> <201003011357.05887.borysiasty@aster.pl>
	<1267452055.26336.32.camel@Dafis00>
	<201003011730.56723.borysiasty@aster.pl>
Message-ID: <1267462751.26336.70.camel@Dafis00>

Hi Borys,
great, this is exactly what I needed, at least for the workaround. When
I find the time I will see that I get a glimpse on the sources, to
improve what I have to do. But menawhile this will do.

> kinda virus...

yeah, that was my thought when I got the idea of the workaround ;) . But
at least it works.
thanks again

best regards

Stefan

Am Montag, den 01.03.2010, 17:30 +0100 schrieb Borys Jurgiel:

> Dnia poniedzia?ek, 1 marca 2010 o 15:00:55 Stefan Kiefer napisa?(a):
> > Hi Borys,
> > thanks for your answer.
> > that might be a way I also had in mind. Otherwise in Windows
> > environments the config is written to the registry. I would like to
> > avoid interferring with the registry. Whereas that would be manageable
> > with an installer, in Linux environments one needs to manipulate the
> > config file as you mentioned. Manipulating this file with an installer
> > would not be as easy. Otherwise, either the config file as well as the
> > registry entries exist only when Qgis was run first. So I have to
> > consider this as well.
> > Also with Linux there could be an - unlikly - issue that somone has
> > changed the QT-config path settings, Whereas this is not to expect.
> > 
> > Anyway, I believe I need a more sophisticated way, like setting a flag
> > while Qgis loads all the plugins. Or a workaround, like activating my
> > plugin with one of the default plugins. Manipulating the default plugins
> > might be the ultimo ratio, because I would neither to change this
> > plugins (in favor of avoiding instabilities) nor risk to overwrite
> > possible changes or updates on the users machine!
> > 
> > Otherwise, does anyone know whether  there is a flag or a property or
> > any way to enable/disable plugins programmatical, let's say from another
> > plugin?
> 
> From another plugin you can start your plugin for the current session:
> 
> qgis.utils.loadPlugin('your_module_name')
> qgis.utils.startPlugin('your_module_name')
> 
> and also enable it to be automatically loaded from the next time:
> 
> settings=QSettings()
> settings.setValue('PythonPlugins/your_module_name', QVariant(True))
> 
> Yo can let your installer insert such instructions to the PluginInstaller 
> (thought it's kinda virus... :) but remember it installs in the system 
> location and only its updates go to the user directory, where mask the system 
> one.
> 
> Many users won't have it installed in the user directory, and your installer 
> would create a fake PluginInstaller what masks the true one. So your installer 
> should determine if there is PluginInstaller in the user directory and if 
> isn't, it can create the fake one, but has to tell to your plugin to remove it 
> at the first run. So it's gonna be a little weird ;-)
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100301/32ad3fe7/attachment.html
From borysiasty at aster.pl  Mon Mar  1 12:50:33 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Mon Mar  1 12:50:40 2010
Subject: [Qgis-developer] OpenLayers plugin update
In-Reply-To: <201003011534.21616.mwa@sourcepole.ch>
References: <201003011534.21616.mwa@sourcepole.ch>
Message-ID: <201003011850.36283.borysiasty@aster.pl>

Dnia poniedzia?ek, 1 marca 2010 o 15:34:14 Mathias Walker napisa?(a):
> Hi all
> 
> I uploaded a new version of the OpenLayers plugin.
> 
> * scaling issues for different screen dpi settings should now be fixed
> * the plugin now uses the recently added Google Mercator SRS (EPSG:900913)
> 
> Best regards
> Mathias Walker

It doesn't refresh after zooming (neither with native zoom tools nor the 
plugin slider). I need to pan or force repaint in order to refresh the view.
Anyway - great plugin!
B.
From ccrook at linz.govt.nz  Mon Mar  1 13:00:15 2010
From: ccrook at linz.govt.nz (Chris Crook)
Date: Mon Mar  1 13:00:31 2010
Subject: [Qgis-developer] Custom composer items?
In-Reply-To: <201003010909.27807.marco@hugis.net>
References: <666FB8D75E95AE42965A0E76A5E5337E0648ECFCA2@prdlsmmsg01.ad.linz.govt.nz>,
	<201003010909.27807.marco@hugis.net>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0648B0A495@prdlsmmsg01.ad.linz.govt.nz>

Hi Marco

The thing that makes we think it might not be possible is the code in app/qgscomposer.cpp.  This looks to me like the main code for the composer, and if my understanding is correct, has hard coded the list of items (including QgsComposerScaleBar) in the QgsComposer constructor, and the read/write XMLfunctions.  So although I think I may be able to derive from the C++ class QgsComposerItem (and Python if it is exposed), I can't see how to include the new item in the interface, or in the project XML.  I think this would need some sort of registry, in the same way as other plugin items?  

But if I've missed something I'd really like to know what!

Cheers
Chris
________________________________________
From: Marco Hugentobler [marco@hugis.net]
Sent: 01 March 2010 21:09
To: qgis-developer@lists.osgeo.org
Cc: Chris Crook
Subject: Re: [Qgis-developer] Custom composer items?

Hi Chris

It is possible to derive new classes from QgsComposerItem (in C++ and Python).
You might look into qgscomposerscaleber.cpp/h as an example how to add scale
information.

Regards,
Marco


Am Sonntag, 28. Februar 2010 23.36:50 schrieb Chris Crook:
> Hi
>
> I'm wanting to add scale information for symbols to composer.  These are
>  arrow symbols representing vector fields, so I want to be able to show in
>  the composer generated page what the scale of the arrows is (ie how long
>  an arrow represents a 5cm offset at a point, or whatever).
>
> Logically this would be a custom composer item, but I cannot see any way to
>  create a custom item, either in C++ or in Python (my preference!), without
>  modifying the base composer classe(s).  Can anyone confirm this?
>
> A slightly less desirable approach would be to draw the scale information
>  onto the map item in composer.  This would constrain the placement - it
>  would be nicer to be able to place it arbitrarily as other widget items.
>
> In the main Qgis window I draw this scale information onto the map canvas
>  in response to the renderComplete signal, in the same way as the scale bar
>  or north arrow, but I don't think there is an equivalent event when the
>  composer map item is drawn?  So I can't use that approach to draw onto the
>  canvas...
>
> I think I may be able to draw the scale information by adding a custom map
>  layer.
>
> Can anyone suggest better approaches, or point me to something obvious I've
>  missed?
>
> Many thanks
>
> Chris
>
>
>
>
> ___________________________________________________________________________
> ___________________________
>
> This message contains information, which is confidential and may be subject
>  to legal privilege. If you are not the intended recipient, you must not
>  peruse, use, disseminate, distribute or copy this message. If you have
>  received this message in error, please notify us immediately (Phone 0800
>  665 463 or info@linz.govt.nz) and destroy the original message. LINZ
>  accepts no responsibility for changes to this email, or for any
>  attachments, after its transmission from LINZ.
>
> Thank you.
> ___________________________________________________________________________
> ___________________________
>

--
Dr. Marco Hugentobler
HUGIS - GIS programming and consulting
Webereistr. 66
CH-8134 Adliswil
marco@hugis.net
http://homepage.hispeed.ch/hugis/
Technical Advisor QGIS Project Steering Committee
______________________________________________________________________________________________________

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank you.
______________________________________________________________________________________________________
From ccrook at linz.govt.nz  Mon Mar  1 14:40:34 2010
From: ccrook at linz.govt.nz (Chris Crook)
Date: Mon Mar  1 14:40:39 2010
Subject: [Qgis-developer] Handling errors when reading layers from project
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0648ED01C3@prdlsmmsg01.ad.linz.govt.nz>

Hi

I'm wanting to provide a clearer message to users when layers don't load properly.

The particular case I'm interested in is where a symoblogy V2 plugin renderer is not installed.  I'd like this to generate a message saying something like, "Renderer named ... could not be loaded for layer ..... Perhaps you need to install a plugin?"... or something like that!  Even better would be to generate the message, but render the layer with a default renderer.

At the moment failing to load gives a generic error message "Unable to load one or more ... "  leaving it unclear as to why the layer isn't loading.

I'm happy to code and submit a patch to do this, but I'm looking for some input on architecture.

The main issue I see with implementing it is that the error is only detectable deep in the loading code - in the QgsFeatureRendererV2::load function.  This is where the error (or warning) is generated.  The old symbology equivalent generated an error message in QgsVectorLayer::readSymbology, which is passed back to the QgsVectorLayer::readXml, but then ignored.  To be useful it would need to get passed up from there through QgsMapLayer::readXML to QgsProject::read(layerNode), to QgsProject::_getmapLayers, and finally QgsProject::read where the mBadLayerHandler->handleBadLayers is called to report the problem.

So I think what I need to do, with this architecture, is:

1) Replace the QList<QDomNode> in the _getMapLayers result set with a QList(QgsBadLayerError) structure which includes a QString error message (if we want to bury QString that deeply into the code), a layer name, and possibly a status (warning/failure).

2) Pass a by-reference string into each call from _getMapLayers down to retrieve the error message.  In fact this may need to be a more complex structure than a string, as the resulting error message will be a parameterised string (eg "Could not load renderer [name] ..."), and in order to be translatable to other languages presumably I'd need to keep the template text and the parameters separated until it gets to the GUI.  I'm not sure of a good way of doing this.

3) Update the QgsProjectBadLayerGuiHandler and default handler to use this information to provide more helpful messages

Does this seem like a good approach?  Can you suggest a better one?  Would it be supported as a patch?

Thanks for any input/suggestions
Chris

______________________________________________________________________________________________________

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank you.
______________________________________________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100302/aa4fac8f/attachment.html
From cavallini at faunalia.it  Tue Mar  2 02:11:00 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue Mar  2 02:11:24 2010
Subject: [Qgis-developer] DP simplification plugin
Message-ID: <4B8CBA04.6040503@faunalia.it>

It seems that packaging went wrong:

Failed to unzip the plugin package. Probably it's broken or missing from the
repository. You may also want to make sure that you have write permission to the
plugin directory:
/home/paolo/.qgis/python/plugins

All the best.
-- 
Paolo Cavallini: http://www.faunalia.it/pc

From lucadeluge at gmail.com  Tue Mar  2 03:42:12 2010
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Tue Mar  2 03:42:15 2010
Subject: [Qgis-developer] OpenLayers plugin update
In-Reply-To: <201003011534.21616.mwa@sourcepole.ch>
References: <201003011534.21616.mwa@sourcepole.ch>
Message-ID: <b7d609c01003020042k27d244edu587bf60317227986@mail.gmail.com>

2010/3/1 Mathias Walker <mwa@sourcepole.ch>:

> I uploaded a new version of the OpenLayers plugin.
>

Hi mathias good work, i think there are a lot of small features that
is possible to add in the plugin, if you are interesting during the
hackfest in pisa i can work on these point:

- choose other controls (mouse position, permalink, scale line, attribution ...)
- change the OSM source with another more update
(OpenLayers.Layer.OSM) and add other source of free data
- add the possibility of query on kml

> Best regards
> Mathias Walker

regards
Luca
From ccrook at linz.govt.nz  Tue Mar  2 13:34:35 2010
From: ccrook at linz.govt.nz (Chris Crook)
Date: Tue Mar  2 13:34:41 2010
Subject: [Qgis-developer] Proposal for plugin convention
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0648B0A498@prdlsmmsg01.ad.linz.govt.nz>

Hi

Several of the plugins that Qgis can use put information into the project file.  For example plugin layers, renderers, and settings.  I think it might be a good idea to establish some conventions so that it is easy to determine what plugins are required to load a project, and to allow Qgis to provide meaningful error messages when the project is loaded in a Qgis instance that doesn't have the plugins loaded.  

For layers and renderers (and any other plugins that have a writeXml function) I am thinking it would be a good convention to add an child element to the Xml defining the plugin.  Something along the lines of

<plugin name="xxxx" version="xxx" url="xxxx"/>

I'm not sure about the "url" element - perhaps "source", or "repository" may be a better name for that.

For plugins that store information in project settings I'm less clear about what to do. Of course they don't matter as much, as the project will load just fine without them and the settings will be ignored.  However I think it could still be useful to have information available about the plugins used.  And in any case it would be good to have a convention for names of settings in any case, to avoid name collisions.  How about something like..

/plugin/xxxxx/....

where xxx is the name of the plugin, and ... are the actual plugin settings.  Maybe a good convention would be to include settings "pluginVersion" and "pluginUrl".

Does this sound like a good idea?  Or perhaps there is a better idea, or even conventions already in place that I have overlooked?

Cheers
Chris
______________________________________________________________________________________________________

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank you.
______________________________________________________________________________________________________
From sim at gis-lab.info  Tue Mar  2 15:35:54 2010
From: sim at gis-lab.info (Maxim Dubinin)
Date: Tue Mar  2 15:36:15 2010
Subject: [Qgis-developer] help with splitGeometry
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0648ED01C3@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0648ED01C3@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <8510148851.20100302143554@gis-lab.info>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100302/c2deb87b/attachment.html
From wonder.sk at gmail.com  Tue Mar  2 15:54:59 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Tue Mar  2 15:55:01 2010
Subject: [Qgis-developer] help with splitGeometry
In-Reply-To: <8510148851.20100302143554@gis-lab.info>
References: <666FB8D75E95AE42965A0E76A5E5337E0648ED01C3@prdlsmmsg01.ad.linz.govt.nz>
	<8510148851.20100302143554@gis-lab.info>
Message-ID: <e8e7199c1003021254q1e0fbc95mff8de70bde1f8dc9@mail.gmail.com>

2010/3/2 Maxim Dubinin <sim@gis-lab.info>:
> Hi all,
>
> I'm trying to do a simple thing, use splitGeometry for two intersecting
> lines and though it returns 0, the list with output geometries is always
> empty.
>
> Here is my code (testable in Python-console and two selected intersecting
> lines, two points each):
>
> cl = qgis.utils.iface.mapCanvas().currentLayer()
> selfeats = cl.selectedFeatures()
> geom0 = QgsGeometry(selfeats[0].geometry())
> geom1 = QgsGeometry(selfeats[1].geometry())
> pnt0=geom0.vertexAt(0)
> pnt1=geom0.vertexAt(1)
> pnts=[]
> pnts.append(pnt0)
> pnts.append(pnt1)
> newlist=[]
> emptylist=[]
> geom1.splitGeometry(pnts,newlist,False,emptylist)

Hi Maxim

the splitGeometry() method was missing /Out/ annotations for the
output lists, so it wasn't working correctly. It has been fixed in
r12992.

The syntax should be now:
(res, newlist, topolist) = geom1.splitGeometry(pnts, False)

Bye
Martin
From luca_manganelli at comune.trento.it  Wed Mar  3 01:55:35 2010
From: luca_manganelli at comune.trento.it (luca_manganelli@comune.trento.it)
Date: Wed Mar  3 01:55:39 2010
Subject: [Qgis-developer] help with splitGeometry
In-Reply-To: <e8e7199c1003021254q1e0fbc95mff8de70bde1f8dc9@mail.gmail.com>
Message-ID: <OF58D8C746.DB115AAC-ONC12576DB.0025F326-C12576DB.00260C74@comune.trento.it>

qgis-developer-bounces@lists.osgeo.org scritti il 02/03/2010 21.54.59

> Hi Maxim

> the splitGeometry() method was missing /Out/ annotations for the
> output lists, so it wasn't working correctly. It has been fixed in
> r12992.

> The syntax should be now:
> (res, newlist, topolist) = geom1.splitGeometry(pnts, False)

There's any way to split a line feature giving only one point that
intersect it?

From wonder.sk at gmail.com  Wed Mar  3 03:46:16 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Mar  3 03:46:22 2010
Subject: [Qgis-developer] help with splitGeometry
In-Reply-To: <OF58D8C746.DB115AAC-ONC12576DB.0025F326-C12576DB.00260C74@comune.trento.it>
References: <e8e7199c1003021254q1e0fbc95mff8de70bde1f8dc9@mail.gmail.com>
	<OF58D8C746.DB115AAC-ONC12576DB.0025F326-C12576DB.00260C74@comune.trento.it>
Message-ID: <e8e7199c1003030046w1135aaa4x28660f1abfa970e0@mail.gmail.com>

On Wed, Mar 3, 2010 at 7:55 AM,  <luca_manganelli@comune.trento.it> wrote:
> qgis-developer-bounces@lists.osgeo.org scritti il 02/03/2010 21.54.59
>
>> Hi Maxim
>
>> the splitGeometry() method was missing /Out/ annotations for the
>> output lists, so it wasn't working correctly. It has been fixed in
>> r12992.
>
>> The syntax should be now:
>> (res, newlist, topolist) = geom1.splitGeometry(pnts, False)
>
> There's any way to split a line feature giving only one point that
> intersect it?

Sure, use intersection directly:
geom2 = geom.interesction(other_geom)

There are several possible outcomes when using on lines:
- no intersection
- one or more points
- one or more lines (when the lines share segments)
- collection of point(s) and line(s)

Martin
From luca_manganelli at comune.trento.it  Wed Mar  3 04:04:31 2010
From: luca_manganelli at comune.trento.it (luca_manganelli@comune.trento.it)
Date: Wed Mar  3 04:04:38 2010
Subject: [Qgis-developer] help with splitGeometry
In-Reply-To: <e8e7199c1003030046w1135aaa4x28660f1abfa970e0@mail.gmail.com>
Message-ID: <OFA7E5D294.10644D71-ONC12576DB.0031CB19-C12576DB.0031DA5F@comune.trento.it>

Martin Dobias <wonder.sk@gmail.com> scritti il 03/03/2010 09.46.16

> > There's any way to split a line feature giving only one point that
> > intersect it?

> Sure, use intersection directly:
> geom2 = geom.interesction(other_geom)

Yes, but I want to split and then save the layer. How can I achieve this?

From wonder.sk at gmail.com  Wed Mar  3 04:41:12 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Mar  3 04:41:16 2010
Subject: [Qgis-developer] help with splitGeometry
In-Reply-To: <OFA7E5D294.10644D71-ONC12576DB.0031CB19-C12576DB.0031DA5F@comune.trento.it>
References: <e8e7199c1003030046w1135aaa4x28660f1abfa970e0@mail.gmail.com>
	<OFA7E5D294.10644D71-ONC12576DB.0031CB19-C12576DB.0031DA5F@comune.trento.it>
Message-ID: <e8e7199c1003030141w1d371099n2d55946800b2bdf8@mail.gmail.com>

On Wed, Mar 3, 2010 at 10:04 AM,  <luca_manganelli@comune.trento.it> wrote:
> Martin Dobias <wonder.sk@gmail.com> scritti il 03/03/2010 09.46.16
>
>> > There's any way to split a line feature giving only one point that
>> > intersect it?
>
>> Sure, use intersection directly:
>> geom2 = geom.interesction(other_geom)
>
> Yes, but I want to split and then save the layer. How can I achieve this?

Sorry I've misread your question. Splitting by a point is IMHO very
tricky. It's likely that the point you've specified for splitting lies
close to the line but doesn't really lie on it due precision errors of
the representation of floating point numbers. So I think this wouldn't
generally work. But it shouldn't be a problem to create a very short
line that crosses the linestring geometry of your interest and splits
it correctly.

Martin
From luca_manganelli at comune.trento.it  Wed Mar  3 05:15:30 2010
From: luca_manganelli at comune.trento.it (luca_manganelli@comune.trento.it)
Date: Wed Mar  3 05:15:36 2010
Subject: [Qgis-developer] help with splitGeometry
In-Reply-To: <e8e7199c1003030141w1d371099n2d55946800b2bdf8@mail.gmail.com>
Message-ID: <OF3E8E4BC6.A6307655-ONC12576DB.003832E4-C12576DB.003859C0@comune.trento.it>

Martin Dobias <wonder.sk@gmail.com> scritti il 03/03/2010 10.41.12

> Sorry I've misread your question. Splitting by a point is IMHO very
> tricky. It's likely that the point you've specified for splitting lies
> close to the line but doesn't really lie on it due precision errors of
> the representation of floating point numbers. So I think this wouldn't
> generally work. But it shouldn't be a problem to create a very short
> line that crosses the linestring geometry of your interest and splits
> it correctly.

This is the "topological editing". For i.e., Streets layer.

If I draw a line that crosses another line, with "topological editing"
enabled ON Qgis should create 4 features, 2 per line.

From luca_manganelli at comune.trento.it  Wed Mar  3 10:23:03 2010
From: luca_manganelli at comune.trento.it (luca_manganelli@comune.trento.it)
Date: Wed Mar  3 10:23:06 2010
Subject: [Qgis-developer] Selection: new simbology vs old symbology
Message-ID: <OF2712899C.68126D10-ONC12576DB.0054475E-C12576DB.0054822C@comune.trento.it>


I discovered that this happens:

given a linestring layer, and I set simbology to line width 3. Then, if I
select one feature:

- old symbology: the selection has the same width, 3.
- new symbology: the selection has always width 1. It seems that it ignores
the new symbology settings.

The same problem happens on point layers, if you use SVG symbols: when you
select one point, no selection appears. So, it's difficult to identify
which features are selected...

From pfth at gmx.de  Wed Mar  3 11:56:18 2010
From: pfth at gmx.de (pfth)
Date: Wed Mar  3 11:56:19 2010
Subject: [Qgis-developer] How to use QPixmap argument in saveAsImage()
In-Reply-To: <e8e7199c1001260335t45ec4edcj84dcf945d7054378@mail.gmail.com>
References: <2E95F75EDC25D54999387A1E2E6EF6274349045A68@MBX02.cgcent.miami.edu>
	<e8e7199c1001260335t45ec4edcj84dcf945d7054378@mail.gmail.com>
Message-ID: <1267635378953-4668749.post@n2.nabble.com>


Hello Martin,

I am just trying to use the code you posted within a plugin to save the map
to a image file. I am getting a lot of crashes. Sometimes it crashes at
"c.addItem(composerMap) ", sometimes it saves the file to disk and crashes
afterwards... I don't know whats wrong.

How can I make the code run as or in my plugin? Currently I added the code
to the run() function of my plugin. And how can I modify it in order to
print the map directly to a printer? I am not very familiar with python. I
need a plugin printing the map directly to the printer (one click). We need
it for our fire brigade.

Thanks in advance!

Tom 
-- 
View this message in context: http://n2.nabble.com/How-to-use-QPixmap-argument-in-saveAsImage-tp4457393p4668749.html
Sent from the qgis-developer mailing list archive at Nabble.com.
From ccrook at linz.govt.nz  Wed Mar  3 15:05:30 2010
From: ccrook at linz.govt.nz (Chris Crook)
Date: Wed Mar  3 15:09:28 2010
Subject: [Qgis-developer] Locale in Python console
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0648B0A49C@prdlsmmsg01.ad.linz.govt.nz>

Hi

I'm trying to determine the users Locale in the python console.  I've changed the quantum locale to "fr" and restarted, and as expected menus etc are French.  However this does not seem to be reflected in the python console window:

>>> from PyQt4.QtCore import QLocale
>>> q = QLocale()
>>> q.name()
PyQt4.QtCore.QString(u'en_NZ')
>>> 

Am I using the wrong function to determine the locale()?  Or is this a problem with the Python console.  And if so, will it also be a problem with plugins?

Thanks
Chris
______________________________________________________________________________________________________

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank you.
______________________________________________________________________________________________________
From wonder.sk at gmail.com  Wed Mar  3 16:15:20 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Mar  3 16:15:22 2010
Subject: [Qgis-developer] Locale in Python console
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0648B0A49C@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0648B0A49C@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <e8e7199c1003031315l4e14ec5ai98458daf5eeb99d8@mail.gmail.com>

On Wed, Mar 3, 2010 at 9:05 PM, Chris Crook <ccrook@linz.govt.nz> wrote:
> Hi
>
> I'm trying to determine the users Locale in the python console. ?I've changed the quantum locale to "fr" and restarted, and as expected menus etc are French. ?However this does not seem to be reflected in the python console window:
>
>>>> from PyQt4.QtCore import QLocale
>>>> q = QLocale()
>>>> q.name()
> PyQt4.QtCore.QString(u'en_NZ')
>>>>
>
> Am I using the wrong function to determine the locale()? ?Or is this a problem with the Python console. ?And if so, will it also be a problem with plugins?

Hi

from what I see in src/app/main.cpp initialization code, qgis only
installs translators for the language, but it doesn't change the
locale. It could be easily done by adding
QLocale::setDefault(QLocale(code)) to the initialization. I'm not sure
about the impact of this addition as it overrides various global
settings such as parsing of numbers, so I'm not going to play with it
right now (no time for it either). But it's worth trying out and
testing with several locales - to find out whether things will work.
So if you have some time you might give it a try (and post a patch).

Cheers
Martin
From milovanderlinden at gmail.com  Wed Mar  3 16:03:13 2010
From: milovanderlinden at gmail.com (Milo van der Linden)
Date: Wed Mar  3 16:31:13 2010
Subject: [Qgis-developer] Request for Enhancement: PDF export for
	post-processing
Message-ID: <95fb33ba1003031303n4efc9f7cuf10e7b02fe9c6bdc@mail.gmail.com>

Hello People!
I have a question.

This summer I met someone of use-it http://www.use-it.be/ belgium at the
OpenStreetMap State of the Map.

Use-IT creates free paper maps for youth-hostels targeting a specific
audience. Currently they are using the tool chain:
OpenStreetMap website -> export svg -> import in Illustrator -> lots and
lots of manual labour and finally produce eye candy like this:
http://www.use-it.be/_files/inlineuploads/pages/MAP_O_Brussels.pdf

Recently, the contact reached out to me. He could not find a solution within
the OpenStreetMap community or it's related technology partners. Now I am
helping him out looking at new ways to speed up their labour process.

I am investigating the qGIS pdf export and it looks promising in combination
with the OpenStreetMap plugin but texts come out as letter-outlines instead
of fonts and the PDF layers structure is hard to work with. I would like to
know if the developers of the layouter/export would be interested in about 2
weeks of work to enhance the layout manager to something that creates pdf
that is perfectly fit for post-processing.

*****************1. PROCESSING PROBLEM*
 This remains almost impossible - only supercomputers are able to
 deliver an svg-file of a city of reasonable size, and even that is
 still only a 50% shot. It took us a full night to render a city, and
 were able to get there only with one of about ten available
 xml-rulesheets (called z12). How could this be tackled?

This one is tackled with the OSM plugin in combination with the PDF export.
As far as I can see, the way osm data is presented in qGIS is simplified,
but this is good! We don't need shading, outlines and a whole lot of fencies
in this fase. The eye-candy will be created in Illustrator. So, as far as I
can see; qGIS tackles this issue.

*****************2. LAYER PROBLEM*
 The svg does not contain separate layers with a clear content (like
 'parks', 'roads', 'rivers'). Only the layers 'Map' and 'Map
 Decoration' appear, but all the information is thrown together in
 the layer 'Map'. You say it's a matter of someone finding the time
 to improve this - but who is the best person to address?

In the OpenStreetMap data format, there are basically 3 layers: points,
lines and polygons. The "real" layering is organised in attributes called
tags. To be more generic; It would be good to push elements to a pdf layer
based upon grouping by attribute. In case of openstreetmap data, it would
mean applying some rules to strip out the tags into the required attributes
and then in the layout manager tell the pdf export to "group by attribute
column A"


*****************3. TYPOGRAPHICAL PROBLEM*
 Layouters prefer to work with Adobe Illustrator to make maps. It's
 what they know best, and Inkscape is just not as good yet.
 Osmarender renders svg files. It is possible to open an svg-file in
 Illustrator, but then you get typographical problems, illustrated
 below. Our question: could Osmarender be made to deliver an eps-file
 (always works in Inkscape AND Illustrator) instead of an svg?

 This is what happened to a small part of Antwerp (Belgium):

 SVG IN INKSCAPE
  > opens fine
  > text is fully editable
  > see image 'svg_inkscape'

 SVG IN ILLUSTRATOR
  > opens upside down and with mistakes
  > text is still editable as text (so it's not flattened), but does
 not appear on a horizontal path in the street. Furthermore, every
 letter is on a different path, so it's impossible to select an
 entire word.
  > see images 'svg_illustrator' and 'svg_illustrator_detail'

 SVG SAVED AS EPS IN INKSCAPE AND THEN OPENED IN ILLUSTRATOR
  > opens fine
  > text is flattened and not editable anymore, and therefore useless
 for layout
  > see images 'eps_illustrator' and 'eps_illustrator_detail'

**************
Again; as far as I can see, it is qGIS to the rescue! The whole process of
going from svg through inkscape to Adobe Illustrator is greatly smartened by
using PDF export instead. Only one thing is needed here: to export fonts as
text and not as letter contours. Horizontal text would be excelent. In that
way, the designers can throw away what they do not need and use Illustrators
smart tools to make text follow lines and so on.

Now, what I would like to know (my contact has some funds to spend on this
topic):

- Who can I address with my enhancement questions?
- Who would be willing to spend about 40 hours on this and at what rate?
- Would this fit the roadmap of qGIS development?
- Would others like to join up and provide extra funding for this?

I am curious to see what responses will be coming!

Kind regards,

Milo van der Linden
+31616598808
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100303/6367763d/attachment.html
From ccrook at linz.govt.nz  Wed Mar  3 16:30:34 2010
From: ccrook at linz.govt.nz (Chris Crook)
Date: Wed Mar  3 16:32:27 2010
Subject: [Qgis-developer] Locale in Python console
In-Reply-To: <e8e7199c1003031315l4e14ec5ai98458daf5eeb99d8@mail.gmail.com>
References: <666FB8D75E95AE42965A0E76A5E5337E0648B0A49C@prdlsmmsg01.ad.linz.govt.nz>,
	<e8e7199c1003031315l4e14ec5ai98458daf5eeb99d8@mail.gmail.com>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0648B0A49E@prdlsmmsg01.ad.linz.govt.nz>

Hi Martin

I think I won't try the change ... I doubt I could give good coverage for testing.  But from your suggestion it looks like the code I need to use is

>>> from PyQt4.QtCore import QSettings
>>> locale = QSettings().value("locale/userLocale").toString()

which gives me exactly what I want!

Thanks
Chris
________________________________________
From: Martin Dobias [wonder.sk@gmail.com]
Sent: 04 March 2010 10:15
To: Chris Crook
Cc: qgis-developer@lists.osgeo.org
Subject: Re: [Qgis-developer] Locale in Python console

On Wed, Mar 3, 2010 at 9:05 PM, Chris Crook <ccrook@linz.govt.nz> wrote:
> Hi
>
> I'm trying to determine the users Locale in the python console.  I've changed the quantum locale to "fr" and restarted, and as expected menus etc are French.  However this does not seem to be reflected in the python console window:
>
>>>> from PyQt4.QtCore import QLocale
>>>> q = QLocale()
>>>> q.name()
> PyQt4.QtCore.QString(u'en_NZ')
>>>>
>
> Am I using the wrong function to determine the locale()?  Or is this a problem with the Python console.  And if so, will it also be a problem with plugins?

Hi

from what I see in src/app/main.cpp initialization code, qgis only
installs translators for the language, but it doesn't change the
locale. It could be easily done by adding
QLocale::setDefault(QLocale(code)) to the initialization. I'm not sure
about the impact of this addition as it overrides various global
settings such as parsing of numbers, so I'm not going to play with it
right now (no time for it either). But it's worth trying out and
testing with several locales - to find out whether things will work.
So if you have some time you might give it a try (and post a patch).

Cheers
Martin
______________________________________________________________________________________________________

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank you.
______________________________________________________________________________________________________
From wonder.sk at gmail.com  Wed Mar  3 16:53:24 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Mar  3 16:53:27 2010
Subject: [Qgis-developer] Handling errors when reading layers from project
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0648ED01C3@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0648ED01C3@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <e8e7199c1003031353m1a9a9b7v39b7ef0a17ba0949@mail.gmail.com>

On Mon, Mar 1, 2010 at 8:40 PM, Chris Crook <ccrook@linz.govt.nz> wrote:
> I'm wanting to provide a clearer message to users when layers don't load
> properly.
>
> [...]
>
> So I think what I need to do, with this architecture, is:
>
> 1) Replace the QList<QDomNode> in the _getMapLayers result set with a
> QList(QgsBadLayerError) structure which includes a QString error message (if
> we want to bury QString that deeply into the code), a layer name, and
> possibly a status (warning/failure).
>
> 2) Pass a by-reference string into each call from _getMapLayers down to
> retrieve the error message.? In fact this may need to be a more complex
> structure than a string, as the resulting error message will be a
> parameterised string (eg "Could not load renderer [name] ..."), and in order
> to be translatable to other languages presumably I'd need to keep the
> template text and the parameters separated until it gets to the GUI.? I'm
> not sure of a good way of doing this.
>
> 3) Update the QgsProjectBadLayerGuiHandler and default handler to use this
> information to provide more helpful messages
>
> Does this seem like a good approach?? Can you suggest a better one?? Would
> it be supported as a patch?

Your suggestion makes sense, so please proceed with the patch. Few
things to consider: QgsBadLayerError could define an enum with
possible load errors, together with an additional QVariant or QString
with error details it could give a better clue to the bad layer
handler. The handler would easily know whether the data source was not
found (and will allow user to correct the path) or the renderer was
not found (and will issue a warning + use a default renderer) etc. Not
having such enumeration would result in somewhat complicated
resolution of individual errors - some of them are fatal, others are
not.

Thinking about the bad layer gui handler, I have a vision that a
list/table pops up with layers and their load errors, giving user
various options how to solve the situation.

When doing changes please make sure to keep the core/gui library API
compatible with older versions so the existing code will keep working.

Cheers
Martin
From tmitchell at osgeo.org  Wed Mar  3 17:05:02 2010
From: tmitchell at osgeo.org (Tyler Mitchell (OSGeo))
Date: Wed Mar  3 17:05:10 2010
Subject: [Qgis-developer] Request for Enhancement: PDF export for
	post-processing
Message-ID: <4B8EDD0E.10506@osgeo.org>

Hi Milo, I just missed you in IRC.  I'm not a QGIS developer but I've
been trying to clarify an idea a few folks started a couple years back.
Specifically, establishing a standard way of doing high quality,
vector/raster output which would do pretty much what you are describing.

Standing back as a user, I think many projects have this challenge and
could work together if the approach was abstracted and some common
underlying tools agreed on or tested.

Without writing it all out, my thoughts are here and might be
interesting to you.  Dane's work on Quantumnik are encouraging and, in
my little world, are pushing the envelope of what's described here too:

http://wiki.osgeo.org/wiki/OSGeo_Cartographic_Library  See the first two
sections for clarity.  The rest is a brainstorm that's not well organised.



Milo van der Linden wrote:
> Hello People!
> I have a question.
> 
> This summer I met someone of use-it http://www.use-it.be/ belgium at the
> OpenStreetMap State of the Map.
> 
> Use-IT creates free paper maps for youth-hostels targeting a specific
> audience. Currently they are using the tool chain:
> OpenStreetMap website -> export svg -> import in Illustrator -> lots and
> lots of manual labour and finally produce eye candy like this:
> http://www.use-it.be/_files/inlineuploads/pages/MAP_O_Brussels.pdf
> 
> Recently, the contact reached out to me. He could not find a solution within
> the OpenStreetMap community or it's related technology partners. Now I am
> helping him out looking at new ways to speed up their labour process.
> 
> I am investigating the qGIS pdf export and it looks promising in combination
> with the OpenStreetMap plugin but texts come out as letter-outlines instead
> of fonts and the PDF layers structure is hard to work with. I would like to
> know if the developers of the layouter/export would be interested in about 2
> weeks of work to enhance the layout manager to something that creates pdf
> that is perfectly fit for post-processing.
> 
> *****************1. PROCESSING PROBLEM*
>  This remains almost impossible - only supercomputers are able to
>  deliver an svg-file of a city of reasonable size, and even that is
>  still only a 50% shot. It took us a full night to render a city, and
>  were able to get there only with one of about ten available
>  xml-rulesheets (called z12). How could this be tackled?
> 
> This one is tackled with the OSM plugin in combination with the PDF export.
> As far as I can see, the way osm data is presented in qGIS is simplified,
> but this is good! We don't need shading, outlines and a whole lot of fencies
> in this fase. The eye-candy will be created in Illustrator. So, as far as I
> can see; qGIS tackles this issue.
> 
> *****************2. LAYER PROBLEM*
>  The svg does not contain separate layers with a clear content (like
>  'parks', 'roads', 'rivers'). Only the layers 'Map' and 'Map
>  Decoration' appear, but all the information is thrown together in
>  the layer 'Map'. You say it's a matter of someone finding the time
>  to improve this - but who is the best person to address?
> 
> In the OpenStreetMap data format, there are basically 3 layers: points,
> lines and polygons. The "real" layering is organised in attributes called
> tags. To be more generic; It would be good to push elements to a pdf layer
> based upon grouping by attribute. In case of openstreetmap data, it would
> mean applying some rules to strip out the tags into the required attributes
> and then in the layout manager tell the pdf export to "group by attribute
> column A"
> 
> 
> *****************3. TYPOGRAPHICAL PROBLEM*
>  Layouters prefer to work with Adobe Illustrator to make maps. It's
>  what they know best, and Inkscape is just not as good yet.
>  Osmarender renders svg files. It is possible to open an svg-file in
>  Illustrator, but then you get typographical problems, illustrated
>  below. Our question: could Osmarender be made to deliver an eps-file
>  (always works in Inkscape AND Illustrator) instead of an svg?
> 
>  This is what happened to a small part of Antwerp (Belgium):
> 
>  SVG IN INKSCAPE
>   > opens fine
>   > text is fully editable
>   > see image 'svg_inkscape'
> 
>  SVG IN ILLUSTRATOR
>   > opens upside down and with mistakes
>   > text is still editable as text (so it's not flattened), but does
>  not appear on a horizontal path in the street. Furthermore, every
>  letter is on a different path, so it's impossible to select an
>  entire word.
>   > see images 'svg_illustrator' and 'svg_illustrator_detail'
> 
>  SVG SAVED AS EPS IN INKSCAPE AND THEN OPENED IN ILLUSTRATOR
>   > opens fine
>   > text is flattened and not editable anymore, and therefore useless
>  for layout
>   > see images 'eps_illustrator' and 'eps_illustrator_detail'
> 
> **************
> Again; as far as I can see, it is qGIS to the rescue! The whole process of
> going from svg through inkscape to Adobe Illustrator is greatly smartened by
> using PDF export instead. Only one thing is needed here: to export fonts as
> text and not as letter contours. Horizontal text would be excelent. In that
> way, the designers can throw away what they do not need and use Illustrators
> smart tools to make text follow lines and so on.
> 
> Now, what I would like to know (my contact has some funds to spend on this
> topic):
> 
> - Who can I address with my enhancement questions?
> - Who would be willing to spend about 40 hours on this and at what rate?
> - Would this fit the roadmap of qGIS development?
> - Would others like to join up and provide extra funding for this?
> 
> I am curious to see what responses will be coming!
> 
> Kind regards,
> 
> Milo van der Linden
> +31616598808

From wonder.sk at gmail.com  Wed Mar  3 17:37:54 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Mar  3 17:37:57 2010
Subject: [Qgis-developer] Proposal for plugin convention
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0648B0A498@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0648B0A498@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <e8e7199c1003031437n5a12155ai8b069551123e8422@mail.gmail.com>

On Tue, Mar 2, 2010 at 7:34 PM, Chris Crook <ccrook@linz.govt.nz> wrote:
> Hi
>
> Several of the plugins that Qgis can use put information into the project file. ?For example plugin layers, renderers, and settings. ?I think it might be a good idea to establish some conventions so that it is easy to determine what plugins are required to load a project, and to allow Qgis to provide meaningful error messages when the project is loaded in a Qgis instance that doesn't have the plugins loaded.
>
> [...]
>
> Does this sound like a good idea? ?Or perhaps there is a better idea, or even conventions already in place that I have overlooked?

We've been talking about some conventions for plugins the last
hackfest few months ago as there's an increased need to make them
behave in an predictable way. However we haven't prepared any such
guidelines yet. Your suggestions make sense and I believe they should
be a part of the guidelines.

It would be good to investigate what modifications would have to be
done to make qgis handle these conventions well - e.g. the project bad
layer handler could be transformed to a more general "project errors"
handler and would inform the user about missing plugins, problem
severity (fatal / warning) and eventually allow automatically install
the missing plugins.

Probably we'll need to move the QgsPluginRegistry and some support
routines (including python plugins support) from qgis app to the core
library in order to allow QgsProject or other core classes inspect
what plugins are available and enabled.

Cheers
Martin
From wonder.sk at gmail.com  Wed Mar  3 17:49:14 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Mar  3 17:49:16 2010
Subject: [Qgis-developer] Selection: new simbology vs old symbology
In-Reply-To: <OF2712899C.68126D10-ONC12576DB.0054475E-C12576DB.0054822C@comune.trento.it>
References: <OF2712899C.68126D10-ONC12576DB.0054475E-C12576DB.0054822C@comune.trento.it>
Message-ID: <e8e7199c1003031449s75b5a80fpe1e729efe37e1c38@mail.gmail.com>

On Wed, Mar 3, 2010 at 4:23 PM,  <luca_manganelli@comune.trento.it> wrote:
>
> I discovered that this happens:
>
> given a linestring layer, and I set simbology to line width 3. Then, if I
> select one feature:
>
> - old symbology: the selection has the same width, 3.
> - new symbology: the selection has always width 1. It seems that it ignores
> the new symbology settings.
>
> The same problem happens on point layers, if you use SVG symbols: when you
> select one point, no selection appears. So, it's difficult to identify
> which features are selected...

Right, the symbol for selection is always the default symbol for the
geometry type with color chosen by the user (yellow by default). If
you disagree with this behaviour, please file a ticket.

The problem with SVG symbols happens only with selection within old
symbology. It would be complicated to modify the color of SVG symbol,
that's why their color is not changed. In new symbology the SVG symbol
is replaced by a default symbol (circle).

Martin
From wonder.sk at gmail.com  Wed Mar  3 17:54:58 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Mar  3 17:55:00 2010
Subject: [Qgis-developer] How to use QPixmap argument in saveAsImage()
In-Reply-To: <1267635378953-4668749.post@n2.nabble.com>
References: <2E95F75EDC25D54999387A1E2E6EF6274349045A68@MBX02.cgcent.miami.edu>
	<e8e7199c1001260335t45ec4edcj84dcf945d7054378@mail.gmail.com>
	<1267635378953-4668749.post@n2.nabble.com>
Message-ID: <e8e7199c1003031454m5eb70d96u562f8a9e71e8f87f@mail.gmail.com>

On Wed, Mar 3, 2010 at 5:56 PM, pfth <pfth@gmx.de> wrote:
>
> Hello Martin,
>
> I am just trying to use the code you posted within a plugin to save the map
> to a image file. I am getting a lot of crashes. Sometimes it crashes at
> "c.addItem(composerMap) ", sometimes it saves the file to disk and crashes
> afterwards... I don't know whats wrong.

Well, it's hard to help you without any further information.
- what qgis version? what platform?
- can you provide backtrace of the segfaults?
- have you tried to run the code from python console?


> How can I make the code run as or in my plugin? Currently I added the code
> to the run() function of my plugin.

Executing the code in run() function should be fine.

> And how can I modify it in order to print the map directly to a printer?

I think you just need to use QPrinter instead of QImage for the
output. But I haven't tried it myself...

Martin
From milovanderlinden at gmail.com  Thu Mar  4 01:03:30 2010
From: milovanderlinden at gmail.com (Milo van der Linden)
Date: Thu Mar  4 01:03:36 2010
Subject: [Qgis-developer] Request for Enhancement: PDF export
	for	post-processing
In-Reply-To: <4B8EDD0E.10506@osgeo.org>
References: <4B8EDD0E.10506@osgeo.org>
Message-ID: <4B8F4D32.7060607@gmail.com>

Hello Tyler!

Thank you for sharing this. Indeed as described in the article on the 
wiki; the main point is: Don't build advanced cartographic composition 
functionality into any of the GIS products that are on the OSGeo stack. 
Less is more.

If the GIS(es) could export to PDF with
* PLAIN vector-work; ordered in PDF layers
* Text as text and not as letter-contours (perhaps even with standard 
font embedded)
* Symbol nodes as dots, ordered per layer based upon attributes

My contact would be well served!

Even putting effort in creating advanced symbology would be to much, 
use-it will want to change even that in his desktop publishing 
environment, so a simple node and the fact the node is on a certain pdf 
layer would be enough information for him to transform all the nodes 
into the symbology he wants.

Right now he has days of work to create a single map of a city 
post-processing the GIS data (mainly cleansing) and then the 
cartographic work starts. If we could remove the cleaning job, it would 
be a win of 2 to 6 days per city map which would be excelent!

Tyler Mitchell (OSGeo) wrote:
> Hi Milo, I just missed you in IRC.  I'm not a QGIS developer but I've
> been trying to clarify an idea a few folks started a couple years back.
> Specifically, establishing a standard way of doing high quality,
> vector/raster output which would do pretty much what you are describing.
>
> Standing back as a user, I think many projects have this challenge and
> could work together if the approach was abstracted and some common
> underlying tools agreed on or tested.
>
> Without writing it all out, my thoughts are here and might be
> interesting to you.  Dane's work on Quantumnik are encouraging and, in
> my little world, are pushing the envelope of what's described here too:
>
> http://wiki.osgeo.org/wiki/OSGeo_Cartographic_Library  See the first two
> sections for clarity.  The rest is a brainstorm that's not well organised.
>
>
>
> Milo van der Linden wrote:
>   
>> Hello People!
>> I have a question.
>>
>> This summer I met someone of use-it http://www.use-it.be/ belgium at the
>> OpenStreetMap State of the Map.
>>
>> Use-IT creates free paper maps for youth-hostels targeting a specific
>> audience. Currently they are using the tool chain:
>> OpenStreetMap website -> export svg -> import in Illustrator -> lots and
>> lots of manual labour and finally produce eye candy like this:
>> http://www.use-it.be/_files/inlineuploads/pages/MAP_O_Brussels.pdf
>>
>> Recently, the contact reached out to me. He could not find a solution within
>> the OpenStreetMap community or it's related technology partners. Now I am
>> helping him out looking at new ways to speed up their labour process.
>>
>> I am investigating the qGIS pdf export and it looks promising in combination
>> with the OpenStreetMap plugin but texts come out as letter-outlines instead
>> of fonts and the PDF layers structure is hard to work with. I would like to
>> know if the developers of the layouter/export would be interested in about 2
>> weeks of work to enhance the layout manager to something that creates pdf
>> that is perfectly fit for post-processing.
>>
>> *****************1. PROCESSING PROBLEM*
>>  This remains almost impossible - only supercomputers are able to
>>  deliver an svg-file of a city of reasonable size, and even that is
>>  still only a 50% shot. It took us a full night to render a city, and
>>  were able to get there only with one of about ten available
>>  xml-rulesheets (called z12). How could this be tackled?
>>
>> This one is tackled with the OSM plugin in combination with the PDF export.
>> As far as I can see, the way osm data is presented in qGIS is simplified,
>> but this is good! We don't need shading, outlines and a whole lot of fencies
>> in this fase. The eye-candy will be created in Illustrator. So, as far as I
>> can see; qGIS tackles this issue.
>>
>> *****************2. LAYER PROBLEM*
>>  The svg does not contain separate layers with a clear content (like
>>  'parks', 'roads', 'rivers'). Only the layers 'Map' and 'Map
>>  Decoration' appear, but all the information is thrown together in
>>  the layer 'Map'. You say it's a matter of someone finding the time
>>  to improve this - but who is the best person to address?
>>
>> In the OpenStreetMap data format, there are basically 3 layers: points,
>> lines and polygons. The "real" layering is organised in attributes called
>> tags. To be more generic; It would be good to push elements to a pdf layer
>> based upon grouping by attribute. In case of openstreetmap data, it would
>> mean applying some rules to strip out the tags into the required attributes
>> and then in the layout manager tell the pdf export to "group by attribute
>> column A"
>>
>>
>> *****************3. TYPOGRAPHICAL PROBLEM*
>>  Layouters prefer to work with Adobe Illustrator to make maps. It's
>>  what they know best, and Inkscape is just not as good yet.
>>  Osmarender renders svg files. It is possible to open an svg-file in
>>  Illustrator, but then you get typographical problems, illustrated
>>  below. Our question: could Osmarender be made to deliver an eps-file
>>  (always works in Inkscape AND Illustrator) instead of an svg?
>>
>>  This is what happened to a small part of Antwerp (Belgium):
>>
>>  SVG IN INKSCAPE
>>   > opens fine
>>   > text is fully editable
>>   > see image 'svg_inkscape'
>>
>>  SVG IN ILLUSTRATOR
>>   > opens upside down and with mistakes
>>   > text is still editable as text (so it's not flattened), but does
>>  not appear on a horizontal path in the street. Furthermore, every
>>  letter is on a different path, so it's impossible to select an
>>  entire word.
>>   > see images 'svg_illustrator' and 'svg_illustrator_detail'
>>
>>  SVG SAVED AS EPS IN INKSCAPE AND THEN OPENED IN ILLUSTRATOR
>>   > opens fine
>>   > text is flattened and not editable anymore, and therefore useless
>>  for layout
>>   > see images 'eps_illustrator' and 'eps_illustrator_detail'
>>
>> **************
>> Again; as far as I can see, it is qGIS to the rescue! The whole process of
>> going from svg through inkscape to Adobe Illustrator is greatly smartened by
>> using PDF export instead. Only one thing is needed here: to export fonts as
>> text and not as letter contours. Horizontal text would be excelent. In that
>> way, the designers can throw away what they do not need and use Illustrators
>> smart tools to make text follow lines and so on.
>>
>> Now, what I would like to know (my contact has some funds to spend on this
>> topic):
>>
>> - Who can I address with my enhancement questions?
>> - Who would be willing to spend about 40 hours on this and at what rate?
>> - Would this fit the roadmap of qGIS development?
>> - Would others like to join up and provide extra funding for this?
>>
>> I am curious to see what responses will be coming!
>>
>> Kind regards,
>>
>> Milo van der Linden
>> +31616598808
>>     
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>   

From luca_manganelli at comune.trento.it  Thu Mar  4 01:47:13 2010
From: luca_manganelli at comune.trento.it (luca_manganelli@comune.trento.it)
Date: Thu Mar  4 01:47:18 2010
Subject: [Qgis-developer] Selection: new simbology vs old symbology
In-Reply-To: <e8e7199c1003031449s75b5a80fpe1e729efe37e1c38@mail.gmail.com>
Message-ID: <OF5CEA47EE.FAE5FE3C-ONC12576DC.00252DBA-C12576DC.0025487A@comune.trento.it>

Martin Dobias <wonder.sk@gmail.com> scritti il 03/03/2010 23.49.14

> The problem with SVG symbols happens only with selection within old
> symbology. It would be complicated to modify the color of SVG symbol,
> that's why their color is not changed. In new symbology the SVG symbol
> is replaced by a default symbol (circle).

It's not too important to "colorize" the SVG symbol. It would be sufficient
to draw a box around the SVG symbol to represent the selection.

Just my 2 c :)

From pfth at gmx.de  Thu Mar  4 06:46:20 2010
From: pfth at gmx.de (pfth)
Date: Thu Mar  4 06:46:22 2010
Subject: [Qgis-developer] Re: How to use QPixmap argument in saveAsImage()
In-Reply-To: <e8e7199c1003031454m5eb70d96u562f8a9e71e8f87f@mail.gmail.com>
References: <2E95F75EDC25D54999387A1E2E6EF6274349045A68@MBX02.cgcent.miami.edu>
	<e8e7199c1001260335t45ec4edcj84dcf945d7054378@mail.gmail.com>
	<1267635378953-4668749.post@n2.nabble.com>
	<e8e7199c1003031454m5eb70d96u562f8a9e71e8f87f@mail.gmail.com>
Message-ID: <1267703180264-4673739.post@n2.nabble.com>


Hi Martin!


Martin Dobias wrote:
> 
> Well, it's hard to help you without any further information.
> - what qgis version? what platform?
> - can you provide backtrace of the segfaults?
> - have you tried to run the code from python console?
> 

Sorry for my imprecise question...

I am working with QGis 1.4.0 Enceladus with code version 12728 on a Windows
XP Professional machine (Intel Core2 Duo E8400@3,00Mhz, 3,46 GB RAM). The
error message I am getting seems to be the standard system message:

qgis.exe has encountered a problem and needs to close.

When I click on "further information", I get:
AppName: qgis.exe
AppVer: 0.0.0.0
ModName: qgis_core.dll
ModVer: 0.0.0.0
Offset: 00068a61
Exception Information: Code: 0xc0000005

The QGis Project consists of some orthophotos and overlaying shapefiles.

When I run your sourcecode within the Python console, it does not raise any
error messages when it is started for the first time! When I start it a
scond time, the same error occurs like when running the plugin... 

Sometimes the plugin saves the image and crashes afterwards. Some other
times it does not even save the file, it crashes at an earlier stage. I
tried to check for the problematic line of the code. So i commented out the
lines from the bottom up. The most problematic line seems to be
"c.addItem(composerMap)"... 

Could it be there are some problems with some unused or not correctly freed
objects...? Any ideas?

Thanks in advance
Thomas

PS: This is my uses block:

from PyQt4.QtCore import * 
from PyQt4.QtGui import *
from qgis.core import *
from qgis.utils import iface

And this is my run() function (__init__, initGui, unload are not changed):

  # run method that performs all the real work
  def run(self): 
    # set up composition
    mapRenderer = iface.mapCanvas().mapRenderer()
    c = QgsComposition(mapRenderer)
    c.setPlotStyle(QgsComposition.Print)

    dpi = c.printResolution()
    dpmm = dpi / 25.4
    width = int(dpmm * c.paperWidth())
    height = int(dpmm * c.paperHeight())

    # add a map to the composition
    x, y = 0, 0
    w, h = c.paperWidth(), c.paperHeight()
    composerMap = QgsComposerMap(c, x,y,w,h)
    c.addItem(composerMap)

    # create output image and initialize it
    image = QImage(QSize(width, height), QImage.Format_ARGB32)
    image.setDotsPerMeterX(dpmm * 1000)
    image.setDotsPerMeterY(dpmm * 1000)
    image.fill(0)

    # render the composition
    imagePainter = QPainter(image)
    sourceArea = QRectF(0, 0, c.paperWidth(), c.paperHeight())
    targetArea = QRectF(0, 0, width, height)
    c.render(imagePainter, targetArea, sourceArea)
    imagePainter.end()

    image.save("out.png", "png") 

-- 
View this message in context: http://n2.nabble.com/How-to-use-QPixmap-argument-in-saveAsImage-tp4457393p4673739.html
Sent from the qgis-developer mailing list archive at Nabble.com.
From cavallini at faunalia.it  Thu Mar  4 12:10:45 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu Mar  4 12:11:03 2010
Subject: [Qgis-developer] during the hackfest: introducing QGIS
Message-ID: <4B8FE995.3070200@faunalia.it>

Hi all.
The Department of Computer Sciences of the University of Pisa would be happy to host
a conference on QGIS development. Anyone willing to do it? While it would subtract
some time from the hacking, it might be good to raise some interest among the
students, possibly involving someone in the development.
After the conference we could have a tour of Pisa, and a pizza somewhere around.
Please let me know your feelings about it.
All the best.
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From alexander.bruy at gmail.com  Thu Mar  4 13:40:39 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Thu Mar  4 13:42:05 2010
Subject: [Qgis-developer] announcing DPSimplify
Message-ID: <20100304204039.5fc19b69.alexander.bruy@gmail.com>

Hi all,

here is a new small python plugin DPSimplify.
The plugin intended for Douglas-Peucker line simplification/generalization.
You can get it through our repo
(GIS-Lab, http://gis-lab.info/programs/qgis/qgis-repo.xml)

Don't forget to turn on experimental plugins in your plugin installer.
Have fun.

-- 
Alexander Bruy
From cavallini at faunalia.it  Thu Mar  4 14:20:47 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu Mar  4 14:20:53 2010
Subject: [Qgis-developer] during the hackfest: introducing QGIS
In-Reply-To: <4B8FE995.3070200@faunalia.it>
References: <4B8FE995.3070200@faunalia.it>
Message-ID: <4B90080F.6040706@faunalia.it>

Paolo Cavallini ha scritto:
> Hi all.
> The Department of Computer Sciences of the University of Pisa would be happy to host

Sorry I was unclear: I was talking of a 2 hrs (or so) seminar, to be held during our
upcoming hackfest.
All the best.
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From milovanderlinden at gmail.com  Thu Mar  4 15:41:18 2010
From: milovanderlinden at gmail.com (Milo van der Linden)
Date: Thu Mar  4 15:41:27 2010
Subject: [Qgis-developer] announcing DPSimplify
In-Reply-To: <20100304204039.5fc19b69.alexander.bruy@gmail.com>
References: <20100304204039.5fc19b69.alexander.bruy@gmail.com>
Message-ID: <4B901AEE.8050809@gmail.com>

Ai! My heart jumped as I was thinking maybe this was a 
Desktop-Publishing plugin ;-)

I hope someone might respond to my enhancement request.

Alexander Bruy wrote:
> Hi all,
>
> here is a new small python plugin DPSimplify.
> The plugin intended for Douglas-Peucker line simplification/generalization.
> You can get it through our repo
> (GIS-Lab, http://gis-lab.info/programs/qgis/qgis-repo.xml)
>
> Don't forget to turn on experimental plugins in your plugin installer.
> Have fun.
>
>   

From jctull at gmail.com  Thu Mar  4 16:27:41 2010
From: jctull at gmail.com (John C. Tull)
Date: Thu Mar  4 16:27:52 2010
Subject: [Qgis-developer] Re: [Qgis-user] announcing DPSimplify
In-Reply-To: <20100304204039.5fc19b69.alexander.bruy@gmail.com>
References: <20100304204039.5fc19b69.alexander.bruy@gmail.com>
Message-ID: <6614946E-7DA0-45F7-9C48-4FC50EA5FD36@gmail.com>

Hi Alexander,

This looks like another great tool in a string of great work that your lab has been building for QGIS. I look forward to seeing what's next. Thank you for your efforts.

Regards,
John

On Mar 4, 2010, at 10:40 AM, Alexander Bruy wrote:

> Hi all,
> 
> here is a new small python plugin DPSimplify.
> The plugin intended for Douglas-Peucker line simplification/generalization.
> You can get it through our repo
> (GIS-Lab, http://gis-lab.info/programs/qgis/qgis-repo.xml)
> 
> Don't forget to turn on experimental plugins in your plugin installer.
> Have fun.
> 
> -- 
> Alexander Bruy
> _______________________________________________
> Qgis-user mailing list
> Qgis-user@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-user

From tech_dev at wildintellect.com  Fri Mar  5 00:35:46 2010
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Fri Mar  5 00:35:51 2010
Subject: [Qgis-user] Re: [Qgis-developer] Request for Enhancement: PDF
	export for	post-processing
In-Reply-To: <4B8F4D32.7060607@gmail.com>
References: <4B8EDD0E.10506@osgeo.org> <4B8F4D32.7060607@gmail.com>
Message-ID: <4B909832.8040805@wildintellect.com>

As I mentioned in IRC here it the thread about the same topic leading up
to the november hackfest.
http://n2.nabble.com/SVG-export-td3792011.html#a3792011

You can see it in the topic list too
http://www.qgis.org/wiki/2._QGIS_Hackfest_in_Vienna_2009

In the end it seems like mapsever, osm and a bunch of other projects are
stuck because there isn't a good rendering toolkit, or we aren't making
use of the current ones. So we have the option to try and patch Qt svg
support to maybe solve it or to hunt around at other svg rendering
libraries and try to bring those into the fold, not sure what
openoffice, scribus or inkscape use but those seem like good places to
start asking.

I guess the question is do we know a programmer who could solve this
issue if we shuffled money their way from Milo's source?

Thanks,
Alex

Milo van der Linden wrote:
> Hello Tyler!
> 
> Thank you for sharing this. Indeed as described in the article on the
> wiki; the main point is: Don't build advanced cartographic composition
> functionality into any of the GIS products that are on the OSGeo stack.
> Less is more.
> 
> If the GIS(es) could export to PDF with
> * PLAIN vector-work; ordered in PDF layers
> * Text as text and not as letter-contours (perhaps even with standard
> font embedded)
> * Symbol nodes as dots, ordered per layer based upon attributes
> 
> My contact would be well served!
> 
> Even putting effort in creating advanced symbology would be to much,
> use-it will want to change even that in his desktop publishing
> environment, so a simple node and the fact the node is on a certain pdf
> layer would be enough information for him to transform all the nodes
> into the symbology he wants.
> 
> Right now he has days of work to create a single map of a city
> post-processing the GIS data (mainly cleansing) and then the
> cartographic work starts. If we could remove the cleaning job, it would
> be a win of 2 to 6 days per city map which would be excelent!
> 
> Tyler Mitchell (OSGeo) wrote:
>> Hi Milo, I just missed you in IRC.  I'm not a QGIS developer but I've
>> been trying to clarify an idea a few folks started a couple years back.
>> Specifically, establishing a standard way of doing high quality,
>> vector/raster output which would do pretty much what you are describing.
>>
>> Standing back as a user, I think many projects have this challenge and
>> could work together if the approach was abstracted and some common
>> underlying tools agreed on or tested.
>>
>> Without writing it all out, my thoughts are here and might be
>> interesting to you.  Dane's work on Quantumnik are encouraging and, in
>> my little world, are pushing the envelope of what's described here too:
>>
>> http://wiki.osgeo.org/wiki/OSGeo_Cartographic_Library  See the first two
>> sections for clarity.  The rest is a brainstorm that's not well
>> organised.
>>
>>
>>
>> Milo van der Linden wrote:
>>  
>>> Hello People!
>>> I have a question.
>>>
>>> This summer I met someone of use-it http://www.use-it.be/ belgium at the
>>> OpenStreetMap State of the Map.
>>>
>>> Use-IT creates free paper maps for youth-hostels targeting a specific
>>> audience. Currently they are using the tool chain:
>>> OpenStreetMap website -> export svg -> import in Illustrator -> lots and
>>> lots of manual labour and finally produce eye candy like this:
>>> http://www.use-it.be/_files/inlineuploads/pages/MAP_O_Brussels.pdf
>>>
>>> Recently, the contact reached out to me. He could not find a solution
>>> within
>>> the OpenStreetMap community or it's related technology partners. Now
>>> I am
>>> helping him out looking at new ways to speed up their labour process.
>>>
>>> I am investigating the qGIS pdf export and it looks promising in
>>> combination
>>> with the OpenStreetMap plugin but texts come out as letter-outlines
>>> instead
>>> of fonts and the PDF layers structure is hard to work with. I would
>>> like to
>>> know if the developers of the layouter/export would be interested in
>>> about 2
>>> weeks of work to enhance the layout manager to something that creates
>>> pdf
>>> that is perfectly fit for post-processing.
>>>
>>> *****************1. PROCESSING PROBLEM*
>>>  This remains almost impossible - only supercomputers are able to
>>>  deliver an svg-file of a city of reasonable size, and even that is
>>>  still only a 50% shot. It took us a full night to render a city, and
>>>  were able to get there only with one of about ten available
>>>  xml-rulesheets (called z12). How could this be tackled?
>>>
>>> This one is tackled with the OSM plugin in combination with the PDF
>>> export.
>>> As far as I can see, the way osm data is presented in qGIS is
>>> simplified,
>>> but this is good! We don't need shading, outlines and a whole lot of
>>> fencies
>>> in this fase. The eye-candy will be created in Illustrator. So, as
>>> far as I
>>> can see; qGIS tackles this issue.
>>>
>>> *****************2. LAYER PROBLEM*
>>>  The svg does not contain separate layers with a clear content (like
>>>  'parks', 'roads', 'rivers'). Only the layers 'Map' and 'Map
>>>  Decoration' appear, but all the information is thrown together in
>>>  the layer 'Map'. You say it's a matter of someone finding the time
>>>  to improve this - but who is the best person to address?
>>>
>>> In the OpenStreetMap data format, there are basically 3 layers: points,
>>> lines and polygons. The "real" layering is organised in attributes
>>> called
>>> tags. To be more generic; It would be good to push elements to a pdf
>>> layer
>>> based upon grouping by attribute. In case of openstreetmap data, it
>>> would
>>> mean applying some rules to strip out the tags into the required
>>> attributes
>>> and then in the layout manager tell the pdf export to "group by
>>> attribute
>>> column A"
>>>
>>>
>>> *****************3. TYPOGRAPHICAL PROBLEM*
>>>  Layouters prefer to work with Adobe Illustrator to make maps. It's
>>>  what they know best, and Inkscape is just not as good yet.
>>>  Osmarender renders svg files. It is possible to open an svg-file in
>>>  Illustrator, but then you get typographical problems, illustrated
>>>  below. Our question: could Osmarender be made to deliver an eps-file
>>>  (always works in Inkscape AND Illustrator) instead of an svg?
>>>
>>>  This is what happened to a small part of Antwerp (Belgium):
>>>
>>>  SVG IN INKSCAPE
>>>   > opens fine
>>>   > text is fully editable
>>>   > see image 'svg_inkscape'
>>>
>>>  SVG IN ILLUSTRATOR
>>>   > opens upside down and with mistakes
>>>   > text is still editable as text (so it's not flattened), but does
>>>  not appear on a horizontal path in the street. Furthermore, every
>>>  letter is on a different path, so it's impossible to select an
>>>  entire word.
>>>   > see images 'svg_illustrator' and 'svg_illustrator_detail'
>>>
>>>  SVG SAVED AS EPS IN INKSCAPE AND THEN OPENED IN ILLUSTRATOR
>>>   > opens fine
>>>   > text is flattened and not editable anymore, and therefore useless
>>>  for layout
>>>   > see images 'eps_illustrator' and 'eps_illustrator_detail'
>>>
>>> **************
>>> Again; as far as I can see, it is qGIS to the rescue! The whole
>>> process of
>>> going from svg through inkscape to Adobe Illustrator is greatly
>>> smartened by
>>> using PDF export instead. Only one thing is needed here: to export
>>> fonts as
>>> text and not as letter contours. Horizontal text would be excelent.
>>> In that
>>> way, the designers can throw away what they do not need and use
>>> Illustrators
>>> smart tools to make text follow lines and so on.
>>>
>>> Now, what I would like to know (my contact has some funds to spend on
>>> this
>>> topic):
>>>
>>> - Who can I address with my enhancement questions?
>>> - Who would be willing to spend about 40 hours on this and at what rate?
>>> - Would this fit the roadmap of qGIS development?
>>> - Would others like to join up and provide extra funding for this?
>>>
>>> I am curious to see what responses will be coming!
>>>
>>> Kind regards,
>>>
>>> Milo van der Linden
>>> +31616598808
>>>     
>>


From milovanderlinden at gmail.com  Fri Mar  5 01:40:16 2010
From: milovanderlinden at gmail.com (Milo van der Linden)
Date: Fri Mar  5 01:40:25 2010
Subject: [Qgis-user] Re: [Qgis-developer] Request for Enhancement: PDF
	export for	post-processing
In-Reply-To: <4B909832.8040805@wildintellect.com>
References: <4B8EDD0E.10506@osgeo.org> <4B8F4D32.7060607@gmail.com>
	<4B909832.8040805@wildintellect.com>
Message-ID: <4B90A750.1070908@gmail.com>

I just found out that the main bulk in manual labour is repositioning 
text. It turns out that any export from Qt creates text as outlines, 
whatever program you use. A quick intermezzo on the #qt irc channel at 
freenode learned that Qt is simply *not* capable of rendering text as text.

This would be the first thing that my contact would really like to see 
fixed. So; to limit the bounds of the question;

What would be the effort to export text as text? Could it be done at all 
given that Qt doesn't support it?

Kind regards,

Milo van der Linden


Alex Mandel wrote:
> As I mentioned in IRC here it the thread about the same topic leading up
> to the november hackfest.
> http://n2.nabble.com/SVG-export-td3792011.html#a3792011
>
> You can see it in the topic list too
> http://www.qgis.org/wiki/2._QGIS_Hackfest_in_Vienna_2009
>
> In the end it seems like mapsever, osm and a bunch of other projects are
> stuck because there isn't a good rendering toolkit, or we aren't making
> use of the current ones. So we have the option to try and patch Qt svg
> support to maybe solve it or to hunt around at other svg rendering
> libraries and try to bring those into the fold, not sure what
> openoffice, scribus or inkscape use but those seem like good places to
> start asking.
>
> I guess the question is do we know a programmer who could solve this
> issue if we shuffled money their way from Milo's source?
>
> Thanks,
> Alex
>
> Milo van der Linden wrote:
>   
>> Hello Tyler!
>>
>> Thank you for sharing this. Indeed as described in the article on the
>> wiki; the main point is: Don't build advanced cartographic composition
>> functionality into any of the GIS products that are on the OSGeo stack.
>> Less is more.
>>
>> If the GIS(es) could export to PDF with
>> * PLAIN vector-work; ordered in PDF layers
>> * Text as text and not as letter-contours (perhaps even with standard
>> font embedded)
>> * Symbol nodes as dots, ordered per layer based upon attributes
>>
>> My contact would be well served!
>>
>> Even putting effort in creating advanced symbology would be to much,
>> use-it will want to change even that in his desktop publishing
>> environment, so a simple node and the fact the node is on a certain pdf
>> layer would be enough information for him to transform all the nodes
>> into the symbology he wants.
>>
>> Right now he has days of work to create a single map of a city
>> post-processing the GIS data (mainly cleansing) and then the
>> cartographic work starts. If we could remove the cleaning job, it would
>> be a win of 2 to 6 days per city map which would be excelent!
>>
>> Tyler Mitchell (OSGeo) wrote:
>>     
>>> Hi Milo, I just missed you in IRC.  I'm not a QGIS developer but I've
>>> been trying to clarify an idea a few folks started a couple years back.
>>> Specifically, establishing a standard way of doing high quality,
>>> vector/raster output which would do pretty much what you are describing.
>>>
>>> Standing back as a user, I think many projects have this challenge and
>>> could work together if the approach was abstracted and some common
>>> underlying tools agreed on or tested.
>>>
>>> Without writing it all out, my thoughts are here and might be
>>> interesting to you.  Dane's work on Quantumnik are encouraging and, in
>>> my little world, are pushing the envelope of what's described here too:
>>>
>>> http://wiki.osgeo.org/wiki/OSGeo_Cartographic_Library  See the first two
>>> sections for clarity.  The rest is a brainstorm that's not well
>>> organised.
>>>
>>>
>>>
>>> Milo van der Linden wrote:
>>>  
>>>       
>>>> Hello People!
>>>> I have a question.
>>>>
>>>> This summer I met someone of use-it http://www.use-it.be/ belgium at the
>>>> OpenStreetMap State of the Map.
>>>>
>>>> Use-IT creates free paper maps for youth-hostels targeting a specific
>>>> audience. Currently they are using the tool chain:
>>>> OpenStreetMap website -> export svg -> import in Illustrator -> lots and
>>>> lots of manual labour and finally produce eye candy like this:
>>>> http://www.use-it.be/_files/inlineuploads/pages/MAP_O_Brussels.pdf
>>>>
>>>> Recently, the contact reached out to me. He could not find a solution
>>>> within
>>>> the OpenStreetMap community or it's related technology partners. Now
>>>> I am
>>>> helping him out looking at new ways to speed up their labour process.
>>>>
>>>> I am investigating the qGIS pdf export and it looks promising in
>>>> combination
>>>> with the OpenStreetMap plugin but texts come out as letter-outlines
>>>> instead
>>>> of fonts and the PDF layers structure is hard to work with. I would
>>>> like to
>>>> know if the developers of the layouter/export would be interested in
>>>> about 2
>>>> weeks of work to enhance the layout manager to something that creates
>>>> pdf
>>>> that is perfectly fit for post-processing.
>>>>
>>>> *****************1. PROCESSING PROBLEM*
>>>>  This remains almost impossible - only supercomputers are able to
>>>>  deliver an svg-file of a city of reasonable size, and even that is
>>>>  still only a 50% shot. It took us a full night to render a city, and
>>>>  were able to get there only with one of about ten available
>>>>  xml-rulesheets (called z12). How could this be tackled?
>>>>
>>>> This one is tackled with the OSM plugin in combination with the PDF
>>>> export.
>>>> As far as I can see, the way osm data is presented in qGIS is
>>>> simplified,
>>>> but this is good! We don't need shading, outlines and a whole lot of
>>>> fencies
>>>> in this fase. The eye-candy will be created in Illustrator. So, as
>>>> far as I
>>>> can see; qGIS tackles this issue.
>>>>
>>>> *****************2. LAYER PROBLEM*
>>>>  The svg does not contain separate layers with a clear content (like
>>>>  'parks', 'roads', 'rivers'). Only the layers 'Map' and 'Map
>>>>  Decoration' appear, but all the information is thrown together in
>>>>  the layer 'Map'. You say it's a matter of someone finding the time
>>>>  to improve this - but who is the best person to address?
>>>>
>>>> In the OpenStreetMap data format, there are basically 3 layers: points,
>>>> lines and polygons. The "real" layering is organised in attributes
>>>> called
>>>> tags. To be more generic; It would be good to push elements to a pdf
>>>> layer
>>>> based upon grouping by attribute. In case of openstreetmap data, it
>>>> would
>>>> mean applying some rules to strip out the tags into the required
>>>> attributes
>>>> and then in the layout manager tell the pdf export to "group by
>>>> attribute
>>>> column A"
>>>>
>>>>
>>>> *****************3. TYPOGRAPHICAL PROBLEM*
>>>>  Layouters prefer to work with Adobe Illustrator to make maps. It's
>>>>  what they know best, and Inkscape is just not as good yet.
>>>>  Osmarender renders svg files. It is possible to open an svg-file in
>>>>  Illustrator, but then you get typographical problems, illustrated
>>>>  below. Our question: could Osmarender be made to deliver an eps-file
>>>>  (always works in Inkscape AND Illustrator) instead of an svg?
>>>>
>>>>  This is what happened to a small part of Antwerp (Belgium):
>>>>
>>>>  SVG IN INKSCAPE
>>>>   > opens fine
>>>>   > text is fully editable
>>>>   > see image 'svg_inkscape'
>>>>
>>>>  SVG IN ILLUSTRATOR
>>>>   > opens upside down and with mistakes
>>>>   > text is still editable as text (so it's not flattened), but does
>>>>  not appear on a horizontal path in the street. Furthermore, every
>>>>  letter is on a different path, so it's impossible to select an
>>>>  entire word.
>>>>   > see images 'svg_illustrator' and 'svg_illustrator_detail'
>>>>
>>>>  SVG SAVED AS EPS IN INKSCAPE AND THEN OPENED IN ILLUSTRATOR
>>>>   > opens fine
>>>>   > text is flattened and not editable anymore, and therefore useless
>>>>  for layout
>>>>   > see images 'eps_illustrator' and 'eps_illustrator_detail'
>>>>
>>>> **************
>>>> Again; as far as I can see, it is qGIS to the rescue! The whole
>>>> process of
>>>> going from svg through inkscape to Adobe Illustrator is greatly
>>>> smartened by
>>>> using PDF export instead. Only one thing is needed here: to export
>>>> fonts as
>>>> text and not as letter contours. Horizontal text would be excelent.
>>>> In that
>>>> way, the designers can throw away what they do not need and use
>>>> Illustrators
>>>> smart tools to make text follow lines and so on.
>>>>
>>>> Now, what I would like to know (my contact has some funds to spend on
>>>> this
>>>> topic):
>>>>
>>>> - Who can I address with my enhancement questions?
>>>> - Who would be willing to spend about 40 hours on this and at what rate?
>>>> - Would this fit the roadmap of qGIS development?
>>>> - Would others like to join up and provide extra funding for this?
>>>>
>>>> I am curious to see what responses will be coming!
>>>>
>>>> Kind regards,
>>>>
>>>> Milo van der Linden
>>>> +31616598808
>>>>     
>>>>         
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>   

From giovanni.manghi at gmail.com  Fri Mar  5 05:17:13 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Fri Mar  5 05:17:20 2010
Subject: [Qgis-developer] gdal tools & osgeo4w
Message-ID: <1267784233.6463.48.camel@sibirica>

Hi,

there is anyone that has recently updated/installed qgis with osgeo4w
on windows (any version) and also has the gdal tools plugin working?

The plugin used to work (on windows, no problems under Ubuntu).

depending on what windows version I'm getting errors like

---------------
Traceback (most recent call last): 
File "C:\osgeo4w\apps\gdal-16\bin\gdal_merge.py", line 31, in 
import gdal 
ImportError: No module named gdal 
---------------

---------------
"The process crashed some time after starting successfully."
---------------

---------------
Traceback (most recent call last):
  File "C:\Users\Nuno\.qgis\python\plugins\GdalTools\tools\doMerge.py",
line 50, in fillInputFilesEdit
    (self.xmax, self.ymax, self.xmin, self.ymin) = self.getExtent()
  File "C:\Users\Nuno\.qgis\python\plugins\GdalTools\tools\doMerge.py",
line 119, in getExtent
    res = rect1.intersect( rect2 )
AttributeError: 'NoneType' object has no attribute 'intersect'

Python version:
2.5.2 (r252:60911, Feb 21 2008, 13:11:45) [MSC v.1310 32 bit (Intel)]
---------------



cheers

-- Giovanni --

From carson.farmer at gmail.com  Fri Mar  5 05:56:36 2010
From: carson.farmer at gmail.com (Carson Farmer)
Date: Fri Mar  5 05:56:39 2010
Subject: [Qgis-user] Re: [Qgis-developer] announcing DPSimplify
In-Reply-To: <94b3c8441003050255o67ef61a2ve8d651bde05d0989@mail.gmail.com>
References: <20100304204039.5fc19b69.alexander.bruy@gmail.com>
	<20100305074838.GB15044@norbit.de> <4B90C337.40202@duif.net>
	<1267781773.6463.22.camel@sibirica> <4B90DF63.7000107@duif.net>
	<94b3c8441003050255o67ef61a2ve8d651bde05d0989@mail.gmail.com>
Message-ID: <94b3c8441003050256o5b2fd85fhe5a92199fae8b700@mail.gmail.com>

Hello list,

I'm a bit late coming into this discussion, by I thought I might be a
good place to make a few comments:

New plugins that add new functionality are always very welcome,
however I would also like to encourage plugin developers to have a
look at (particularly core plugins) existing plugins, and if they find
something they would like to improve/replace, to do so! I don't have a
lot of time to update fTools, but improvements are always welcome, and
if they are added/applied to fTools directly, then the whole QGIS
community benefits from the improvements/changes without having to
install another plugin (and without duplication in the eyes of the
user).

> And to make myself clear: I do not want to discourage Alexander to develop
> the plugin!! Because if I'm correct, the current vector-menu stuff is
> actually cpp ported from the former python plugin as well.

Just to clarify, most of the fTools functions have still not been
ported to cpp, and in fact anything running from fTools at the moment
is still using the original Python implementation. So again, I would
encourage developers of fTools functionality to try to include them
with fTools so that they can be installed by users by default. Patches
are always welcome, and credit will always be given where credit is
due!

Regards,

Carson

--
Carson J. Q. Farmer
ISSP Doctoral Fellow
National Centre for Geocomputation
National University of Ireland, Maynooth,
http://www.carsonfarmer.com/
From alexander.bruy at gmail.com  Fri Mar  5 07:11:20 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Fri Mar  5 07:11:23 2010
Subject: [Qgis-developer] Re: [Qgis-user] gdal tools & osgeo4w
In-Reply-To: <1267784233.6463.48.camel@sibirica>
References: <1267784233.6463.48.camel@sibirica>
Message-ID: <66a45d6d1003050411s40f0be36j826ef2253b907a22@mail.gmail.com>

Hi,

I've run QGIS and GdalTools plugin on Windows XP Pro SP3
and don't have this errors.

Also I run GdalTools on Linux and have no errors too.

2010/3/5 Giovanni Manghi <giovanni.manghi@gmail.com>:
> Hi,
>
> there is anyone that has recently updated/installed qgis with osgeo4w
> on windows (any version) and also has the gdal tools plugin working?



-- 
Alexander Bruy
From alexander.bruy at gmail.com  Fri Mar  5 07:44:28 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Fri Mar  5 07:51:58 2010
Subject: [Qgis-user] Re: [Qgis-developer] announcing DPSimplify
In-Reply-To: <94b3c8441003050256o5b2fd85fhe5a92199fae8b700@mail.gmail.com>
References: <20100304204039.5fc19b69.alexander.bruy@gmail.com>
	<20100305074838.GB15044@norbit.de> <4B90C337.40202@duif.net>
	<1267781773.6463.22.camel@sibirica> <4B90DF63.7000107@duif.net>
	<94b3c8441003050255o67ef61a2ve8d651bde05d0989@mail.gmail.com>
	<94b3c8441003050256o5b2fd85fhe5a92199fae8b700@mail.gmail.com>
Message-ID: <66a45d6d1003050444g3ca49794m7706e4b7b11fbc39@mail.gmail.com>

Hi guys,

thanks for feedback and discussion.

DPSimplify was developed for one of GIS-Lab projects. There is some problems
with standart tool and Maxim ask me to write plugin with some
additional features.

2010/3/5 Richard Duivenvoorde <rdmailings@duif.net>:
> - DPSimplify actually simplifies your data on the fly, and gives you the
> option to either save it to a new shapefile or not (nice !)
> - DPSimplify also reports the number of vertices reduced, which gives you
> the option to lower or higher your tolerance (nice)

We need this features in our project and I hope this can be usefull for other
users

> - DPSimplify seems to  work only with line and polygons data (not multi* )?
> (at first there was no layer in the dropdown, untill I added a (non
> multi)polygon layer)

We develop this plugin first or all for simplifing lines (a lot of
lines). Polygon
simplification is in TODO list. MultiLines are not supported yet.

> - DPSimplify the about-box raises an python exception here

I'll look on this tonight and try to fix

> And to make myself clear: I do not want to discourage Alexander to develop
> the plugin!! Because if I'm correct, the current vector-menu stuff is
> actually cpp ported from the former python plugin as well.

To make clear :-): we develop this plugin for our project and then share it with
community. As I see, maybe it will be better to integrate DPSimplify
into fTools.

Sorry for long reply


-- 
Alexander Bruy
From sim at gis-lab.info  Fri Mar  5 09:42:23 2010
From: sim at gis-lab.info (Maxim Dubinin)
Date: Fri Mar  5 09:42:28 2010
Subject: [Qgis-developer] fTools (Vector) concern
Message-ID: <1161709956.20100305084223@gis-lab.info>

Hi all,

This email contains some hard critics, but I feel like I have to open
this topic to motivate needed change.

I'm very disappointed  with  fTools (Vector) and when I say 'I'
unfortunately I reflect an opinion of a larger community.

At  the  our bug hunt and continuously after I believe 50% of the bugs
we  found were from fTools (and this is very considerable number, trac
regulars  for sure can tell). We've raised some seriously disappointed
comments like "Nothing works in Vector menu". I simply couldn't test
Simplify features because it doesn't work, as well. Everytime I (or
other people from our group) open an instrument from Vector, there is a string of bugs to
fill and this is very tiring and very bad looking in places where we
try to make people move from some GIS to QGIS.

I suggest that a serious review of Vector tools is needed (hackfest?), first by
maintainer, then by a single user checking _all_ instruments under
both Win and Linux. This can be followed by a group effort to hunt for
more bugs (here I offer our help).

Maxim

PS: We love you Carson, please don't take too hard. We will continue
reporting bugs and patches. I know what opensource is ;)

From giovanni.manghi at gmail.com  Fri Mar  5 11:09:34 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Fri Mar  5 11:09:41 2010
Subject: [Qgis-developer] Re: [Qgis-user] gdal tools & osgeo4w
In-Reply-To: <22f0a52d1003050806s13e39b10jeff85b2774056aee@mail.gmail.com>
References: <1267784233.6463.48.camel@sibirica>
	<22f0a52d1003050806s13e39b10jeff85b2774056aee@mail.gmail.com>
Message-ID: <1267805374.6581.9.camel@sibirica>


> Re-run the OSGeo4W setup and check to see if you have gdal16-python installed.


Hi,

I have it. Without that package the gdal tools plugin does not even
install.

Did you have a working installation of gdal tools under a recently
updated osgeo4w qgis installation?

cheers

-- Giovanni --

From marco at hugis.net  Fri Mar  5 11:26:53 2010
From: marco at hugis.net (Marco Hugentobler)
Date: Fri Mar  5 11:27:43 2010
Subject: [Qgis-developer] fTools (Vector) concern
In-Reply-To: <1161709956.20100305084223@gis-lab.info>
References: <1161709956.20100305084223@gis-lab.info>
Message-ID: <201003051726.53952.marco@hugis.net>

Hi Maxim

Please do critisism in a more constructive way. Don't forget that the f-Tools 
contributors put many, many hours of work in it.

> I suggest that a serious review of Vector tools is needed (hackfest?),
>  first by maintainer, then by a single user checking _all_ instruments
>  under both Win and Linux. This can be followed by a group effort to hunt
>  for more bugs (here I offer our help).

Are you (or someone of your team) joining the hackfest?
It would be great if you coordinate with the maintainer and put some resources 
of your team into f-Tools improvements (that's how opensource works ;-) ).

Regards,
Marco  

Am Freitag, 5. M?rz 2010 15.42:23 schrieb Maxim Dubinin:
> Hi all,
> 
> This email contains some hard critics, but I feel like I have to open
> this topic to motivate needed change.
> 
> I'm very disappointed  with  fTools (Vector) and when I say 'I'
> unfortunately I reflect an opinion of a larger community.
> 
> At  the  our bug hunt and continuously after I believe 50% of the bugs
> we  found were from fTools (and this is very considerable number, trac
> regulars  for sure can tell). We've raised some seriously disappointed
> comments like "Nothing works in Vector menu". I simply couldn't test
> Simplify features because it doesn't work, as well. Everytime I (or
> other people from our group) open an instrument from Vector, there is a
>  string of bugs to fill and this is very tiring and very bad looking in
>  places where we try to make people move from some GIS to QGIS.
> 
> I suggest that a serious review of Vector tools is needed (hackfest?),
>  first by maintainer, then by a single user checking _all_ instruments
>  under both Win and Linux. This can be followed by a group effort to hunt
>  for more bugs (here I offer our help).
> 
> Maxim
> 
> PS: We love you Carson, please don't take too hard. We will continue
> reporting bugs and patches. I know what opensource is ;)
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

-- 
Dr. Marco Hugentobler
HUGIS GmbH
Webereistrasse 66
CH-8134 Adliswil
marco@hugis.net
www.hugis.net
Technical Advisor QGIS Project Steering Committee
From sim at gis-lab.info  Fri Mar  5 11:38:19 2010
From: sim at gis-lab.info (Maxim Dubinin)
Date: Fri Mar  5 11:42:27 2010
Subject: [Qgis-developer] fTools (Vector) concern
In-Reply-To: <201003051726.53952.marco@hugis.net>
References: <1161709956.20100305084223@gis-lab.info>
	<201003051726.53952.marco@hugis.net>
Message-ID: <1241823743.20100305103819@gis-lab.info>

It was probably too emotional, sorry, but sometimes they need to
expressed.

Unfortunately, we cannot make it to hackfest this time (though really
wanted to). We will try to work on fTools/Vector and coordinate via
IRC.

Maxim

?? ?????? 5 ????? 2010 ?., 10:26:53:

MH> Hi Maxim

MH> Please do critisism in a more constructive way. Don't forget that the f-Tools
MH> contributors put many, many hours of work in it.

>> I suggest that a serious review of Vector tools is needed (hackfest?),
>>  first by maintainer, then by a single user checking _all_ instruments
>>  under both Win and Linux. This can be followed by a group effort to hunt
>>  for more bugs (here I offer our help).

MH> Are you (or someone of your team) joining the hackfest?
MH> It would be great if you coordinate with the maintainer and put some resources
MH> of your team into f-Tools improvements (that's how opensource works ;-) ).

MH> Regards,
MH> Marco  

MH> Am Freitag, 5. M?rz 2010 15.42:23 schrieb Maxim Dubinin:
>> Hi all,
>> 
>> This email contains some hard critics, but I feel like I have to open
>> this topic to motivate needed change.
>> 
>> I'm very disappointed  with  fTools (Vector) and when I say 'I'
>> unfortunately I reflect an opinion of a larger community.
>> 
>> At  the  our bug hunt and continuously after I believe 50% of the bugs
>> we  found were from fTools (and this is very considerable number, trac
>> regulars  for sure can tell). We've raised some seriously disappointed
>> comments like "Nothing works in Vector menu". I simply couldn't test
>> Simplify features because it doesn't work, as well. Everytime I (or
>> other people from our group) open an instrument from Vector, there is a
>>  string of bugs to fill and this is very tiring and very bad looking in
>>  places where we try to make people move from some GIS to QGIS.
>> 
>> I suggest that a serious review of Vector tools is needed (hackfest?),
>>  first by maintainer, then by a single user checking _all_ instruments
>>  under both Win and Linux. This can be followed by a group effort to hunt
>>  for more bugs (here I offer our help).
>> 
>> Maxim
>> 
>> PS: We love you Carson, please don't take too hard. We will continue
>> reporting bugs and patches. I know what opensource is ;)
>> 
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>> 

From carson.farmer at gmail.com  Fri Mar  5 11:47:19 2010
From: carson.farmer at gmail.com (Carson Farmer)
Date: Fri Mar  5 11:47:22 2010
Subject: [Qgis-developer] fTools (Vector) concern
In-Reply-To: <1161709956.20100305084223@gis-lab.info>
References: <1161709956.20100305084223@gis-lab.info>
Message-ID: <94b3c8441003050847n72d111bbkc9728cc29ff030a1@mail.gmail.com>

A response:

> I'm very disappointed ?with ?fTools (Vector) and when I say 'I'
> unfortunately I reflect an opinion of a larger community.
I'm terribly sorry to hear this, and this is certainly not the
feedback I've been getting in my email inbox, otherwise I would have
asked for help sooner.

> At ?the ?our bug hunt and continuously after I believe 50% of the bugs
> we ?found were from fTools (and this is very considerable number, trac
> regulars ?for sure can tell). We've raised some seriously disappointed
> comments like "Nothing works in Vector menu". I simply couldn't test
> Simplify features because it doesn't work, as well. Everytime I (or
> other people from our group) open an instrument from Vector, there is a string of bugs to
> fill and this is very tiring and very bad looking in places where we
> try to make people move from some GIS to QGIS.
Unfortunately, many of these comments aren't very helpful, and
obviously aren't making it into track. I had a quick look just now,
and as far as I can tell, only a fraction of the reported bugs have
anything to do with fTools (though I'll certainly admit there are
fTools bug reports there).

> I suggest that a serious review of Vector tools is needed (hackfest?), first by
> maintainer, then by a single user checking _all_ instruments under
> both Win and Linux. This can be followed by a group effort to hunt for
> more bugs (here I offer our help).
I will not be at the hackfest this time, as I simply don't have time
at the moment. However, I strongly encourage others to take a look at
the fTools functions and get cracking! Unfortunately I have received
very few patches or fixes to fTools in general since it's inclusion in
trunk, and I simply do not have the time to implement these
changes/fixes on my own. fTools is a very complex plugin, and since it
is dealing with complicated geometry manipulations, bugs from fTools,
QGIS, and GEOS (and the conversion between all these pieces) all
affect it. As I have mentioned in the past, I would love to have more
people working on it, especially the (very slow) port of the fTools
Python functions to cpp. I'm not a cpp programmer, so by myself things
move very slowly... In terms of the hackfest, I would love to have
someone (or more) take some initiative and continue work on porting
things over and cleaning things up.

Regards,

Carson

-- 
Carson J. Q. Farmer
ISSP Doctoral Fellow
National Centre for Geocomputation
National University of Ireland, Maynooth,
http://www.carsonfarmer.com/
From carson.farmer at gmail.com  Fri Mar  5 11:48:07 2010
From: carson.farmer at gmail.com (Carson Farmer)
Date: Fri Mar  5 11:48:10 2010
Subject: [Qgis-developer] fTools (Vector) concern
In-Reply-To: <94b3c8441003050847n72d111bbkc9728cc29ff030a1@mail.gmail.com>
References: <1161709956.20100305084223@gis-lab.info>
	<94b3c8441003050847n72d111bbkc9728cc29ff030a1@mail.gmail.com>
Message-ID: <94b3c8441003050848j6b74b218pebd271651a698b44@mail.gmail.com>

p.s. I *will try to participate in the hackfest via IRC!

Carson
From blake at hailmail.net  Fri Mar  5 13:30:56 2010
From: blake at hailmail.net (Dane Springmeyer)
Date: Fri Mar  5 13:31:08 2010
Subject: [Qgis-user] Re: [Qgis-developer] Request for Enhancement: PDF
	export for	post-processing
In-Reply-To: <4B90A750.1070908@gmail.com>
References: <4B8EDD0E.10506@osgeo.org> <4B8F4D32.7060607@gmail.com>
	<4B909832.8040805@wildintellect.com> <4B90A750.1070908@gmail.com>
Message-ID: <9550A703-7E6D-41E6-A42C-387BB3E89395@hailmail.net>


On Mar 4, 2010, at 10:40 PM, Milo van der Linden wrote:

> I just found out that the main bulk in manual labour is  
> repositioning text. It turns out that any export from Qt creates  
> text as outlines, whatever program you use. A quick intermezzo on  
> the #qt irc channel at freenode learned that Qt is simply *not*  
> capable of rendering text as text.
>

Cairo currently supports rendering "text as text" in PDF output, and  
SVG support is not far off (I just check with developers at #cairo),  
but would require improvements to both cairo and librsvg.

The openstreetmap.org/export/ tab is using Cairo + Mapnik, and I think  
a route we plan to take is to offer very simplistic styles tailored to  
PDF export rather than PNG display (which is what 99% of the complex  
existing osm styles target) + pre-processing geometries in postgis so  
that they are "unioned/dissolved" and hence appear in vector output as  
a single layer rather than tiny disjoint segments.

> This would be the first thing that my contact would really like to  
> see fixed. So; to limit the bounds of the question;
>
> What would be the effort to export text as text? Could it be done at  
> all given that Qt doesn't support it?
>

I can't say with QT, but I'd imagine it is the same as Cairo - the  
answer being to focus on funding cairo + librsvg development as that  
is the api that needs to improve font handling during export to SVG,  
rather than anything involving the GIS systems that manage or style  
the geographic data.

> Kind regards,
>
> Milo van der Linden
>
>
> Alex Mandel wrote:
>> As I mentioned in IRC here it the thread about the same topic  
>> leading up
>> to the november hackfest.
>> http://n2.nabble.com/SVG-export-td3792011.html#a3792011
>>
>> You can see it in the topic list too
>> http://www.qgis.org/wiki/2._QGIS_Hackfest_in_Vienna_2009
>>
>> In the end it seems like mapsever, osm and a bunch of other  
>> projects are
>> stuck because there isn't a good rendering toolkit, or we aren't  
>> making
>> use of the current ones. So we have the option to try and patch Qt  
>> svg
>> support to maybe solve it or to hunt around at other svg rendering
>> libraries and try to bring those into the fold, not sure what
>> openoffice, scribus or inkscape use but those seem like good places  
>> to
>> start asking.
>>
>> I guess the question is do we know a programmer who could solve this
>> issue if we shuffled money their way from Milo's source?
>>
>> Thanks,
>> Alex
>>
>> Milo van der Linden wrote:
>>
>>> Hello Tyler!
>>>
>>> Thank you for sharing this. Indeed as described in the article on  
>>> the
>>> wiki; the main point is: Don't build advanced cartographic  
>>> composition
>>> functionality into any of the GIS products that are on the OSGeo  
>>> stack.
>>> Less is more.
>>>
>>> If the GIS(es) could export to PDF with
>>> * PLAIN vector-work; ordered in PDF layers
>>> * Text as text and not as letter-contours (perhaps even with  
>>> standard
>>> font embedded)
>>> * Symbol nodes as dots, ordered per layer based upon attributes
>>>
>>> My contact would be well served!
>>>
>>> Even putting effort in creating advanced symbology would be to much,
>>> use-it will want to change even that in his desktop publishing
>>> environment, so a simple node and the fact the node is on a  
>>> certain pdf
>>> layer would be enough information for him to transform all the nodes
>>> into the symbology he wants.
>>>
>>> Right now he has days of work to create a single map of a city
>>> post-processing the GIS data (mainly cleansing) and then the
>>> cartographic work starts. If we could remove the cleaning job, it  
>>> would
>>> be a win of 2 to 6 days per city map which would be excelent!
>>>
>>> Tyler Mitchell (OSGeo) wrote:
>>>
>>>> Hi Milo, I just missed you in IRC.  I'm not a QGIS developer but  
>>>> I've
>>>> been trying to clarify an idea a few folks started a couple years  
>>>> back.
>>>> Specifically, establishing a standard way of doing high quality,
>>>> vector/raster output which would do pretty much what you are  
>>>> describing.
>>>>
>>>> Standing back as a user, I think many projects have this  
>>>> challenge and
>>>> could work together if the approach was abstracted and some common
>>>> underlying tools agreed on or tested.
>>>>
>>>> Without writing it all out, my thoughts are here and might be
>>>> interesting to you.  Dane's work on Quantumnik are encouraging  
>>>> and, in
>>>> my little world, are pushing the envelope of what's described  
>>>> here too:
>>>>
>>>> http://wiki.osgeo.org/wiki/OSGeo_Cartographic_Library  See the  
>>>> first two
>>>> sections for clarity.  The rest is a brainstorm that's not well
>>>> organised.
>>>>
>>>>
>>>>
>>>> Milo van der Linden wrote:
>>>>
>>>>> Hello People!
>>>>> I have a question.
>>>>>
>>>>> This summer I met someone of use-it http://www.use-it.be/  
>>>>> belgium at the
>>>>> OpenStreetMap State of the Map.
>>>>>
>>>>> Use-IT creates free paper maps for youth-hostels targeting a  
>>>>> specific
>>>>> audience. Currently they are using the tool chain:
>>>>> OpenStreetMap website -> export svg -> import in Illustrator ->  
>>>>> lots and
>>>>> lots of manual labour and finally produce eye candy like this:
>>>>> http://www.use-it.be/_files/inlineuploads/pages/MAP_O_Brussels.pdf
>>>>>
>>>>> Recently, the contact reached out to me. He could not find a  
>>>>> solution
>>>>> within
>>>>> the OpenStreetMap community or it's related technology partners.  
>>>>> Now
>>>>> I am
>>>>> helping him out looking at new ways to speed up their labour  
>>>>> process.
>>>>>
>>>>> I am investigating the qGIS pdf export and it looks promising in
>>>>> combination
>>>>> with the OpenStreetMap plugin but texts come out as letter- 
>>>>> outlines
>>>>> instead
>>>>> of fonts and the PDF layers structure is hard to work with. I  
>>>>> would
>>>>> like to
>>>>> know if the developers of the layouter/export would be  
>>>>> interested in
>>>>> about 2
>>>>> weeks of work to enhance the layout manager to something that  
>>>>> creates
>>>>> pdf
>>>>> that is perfectly fit for post-processing.
>>>>>
>>>>> *****************1. PROCESSING PROBLEM*
>>>>> This remains almost impossible - only supercomputers are able to
>>>>> deliver an svg-file of a city of reasonable size, and even that is
>>>>> still only a 50% shot. It took us a full night to render a city,  
>>>>> and
>>>>> were able to get there only with one of about ten available
>>>>> xml-rulesheets (called z12). How could this be tackled?
>>>>>
>>>>> This one is tackled with the OSM plugin in combination with the  
>>>>> PDF
>>>>> export.
>>>>> As far as I can see, the way osm data is presented in qGIS is
>>>>> simplified,
>>>>> but this is good! We don't need shading, outlines and a whole  
>>>>> lot of
>>>>> fencies
>>>>> in this fase. The eye-candy will be created in Illustrator. So, as
>>>>> far as I
>>>>> can see; qGIS tackles this issue.
>>>>>
>>>>> *****************2. LAYER PROBLEM*
>>>>> The svg does not contain separate layers with a clear content  
>>>>> (like
>>>>> 'parks', 'roads', 'rivers'). Only the layers 'Map' and 'Map
>>>>> Decoration' appear, but all the information is thrown together in
>>>>> the layer 'Map'. You say it's a matter of someone finding the time
>>>>> to improve this - but who is the best person to address?
>>>>>
>>>>> In the OpenStreetMap data format, there are basically 3 layers:  
>>>>> points,
>>>>> lines and polygons. The "real" layering is organised in attributes
>>>>> called
>>>>> tags. To be more generic; It would be good to push elements to a  
>>>>> pdf
>>>>> layer
>>>>> based upon grouping by attribute. In case of openstreetmap data,  
>>>>> it
>>>>> would
>>>>> mean applying some rules to strip out the tags into the required
>>>>> attributes
>>>>> and then in the layout manager tell the pdf export to "group by
>>>>> attribute
>>>>> column A"
>>>>>
>>>>>
>>>>> *****************3. TYPOGRAPHICAL PROBLEM*
>>>>> Layouters prefer to work with Adobe Illustrator to make maps. It's
>>>>> what they know best, and Inkscape is just not as good yet.
>>>>> Osmarender renders svg files. It is possible to open an svg-file  
>>>>> in
>>>>> Illustrator, but then you get typographical problems, illustrated
>>>>> below. Our question: could Osmarender be made to deliver an eps- 
>>>>> file
>>>>> (always works in Inkscape AND Illustrator) instead of an svg?
>>>>>
>>>>> This is what happened to a small part of Antwerp (Belgium):
>>>>>
>>>>> SVG IN INKSCAPE
>>>>>  > opens fine
>>>>>  > text is fully editable
>>>>>  > see image 'svg_inkscape'
>>>>>
>>>>> SVG IN ILLUSTRATOR
>>>>>  > opens upside down and with mistakes
>>>>>  > text is still editable as text (so it's not flattened), but  
>>>>> does
>>>>> not appear on a horizontal path in the street. Furthermore, every
>>>>> letter is on a different path, so it's impossible to select an
>>>>> entire word.
>>>>>  > see images 'svg_illustrator' and 'svg_illustrator_detail'
>>>>>
>>>>> SVG SAVED AS EPS IN INKSCAPE AND THEN OPENED IN ILLUSTRATOR
>>>>>  > opens fine
>>>>>  > text is flattened and not editable anymore, and therefore  
>>>>> useless
>>>>> for layout
>>>>>  > see images 'eps_illustrator' and 'eps_illustrator_detail'
>>>>>
>>>>> **************
>>>>> Again; as far as I can see, it is qGIS to the rescue! The whole
>>>>> process of
>>>>> going from svg through inkscape to Adobe Illustrator is greatly
>>>>> smartened by
>>>>> using PDF export instead. Only one thing is needed here: to export
>>>>> fonts as
>>>>> text and not as letter contours. Horizontal text would be  
>>>>> excelent.
>>>>> In that
>>>>> way, the designers can throw away what they do not need and use
>>>>> Illustrators
>>>>> smart tools to make text follow lines and so on.
>>>>>
>>>>> Now, what I would like to know (my contact has some funds to  
>>>>> spend on
>>>>> this
>>>>> topic):
>>>>>
>>>>> - Who can I address with my enhancement questions?
>>>>> - Who would be willing to spend about 40 hours on this and at  
>>>>> what rate?
>>>>> - Would this fit the roadmap of qGIS development?
>>>>> - Would others like to join up and provide extra funding for this?
>>>>>
>>>>> I am curious to see what responses will be coming!
>>>>>
>>>>> Kind regards,
>>>>>
>>>>> Milo van der Linden
>>>>> +31616598808
>>>>>
>>
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From ahmed at elegantdesigns.ca  Fri Mar  5 15:11:18 2010
From: ahmed at elegantdesigns.ca (ahmed@elegantdesigns.ca)
Date: Fri Mar  5 15:15:35 2010
Subject: [Qgis-developer] fTools (Vector) concern
In-Reply-To: <94b3c8441003050847n72d111bbkc9728cc29ff030a1@mail.gmail.com>
References: <1161709956.20100305084223@gis-lab.info>
	<94b3c8441003050847n72d111bbkc9728cc29ff030a1@mail.gmail.com>
Message-ID: <867cba19380d2929b4ca58e5c7ecc979@127.0.0.1>

Just for the record, I wouldn't have a masters degree if it wasn't for qgis
and ftools

On Fri, 5 Mar 2010 16:47:19 +0000, Carson Farmer <carson.farmer@gmail.com>
wrote:
> A response:
> 
>> I'm very disappointed ?with ?fTools (Vector) and when I say 'I'
>> unfortunately I reflect an opinion of a larger community.
> I'm terribly sorry to hear this, and this is certainly not the
> feedback I've been getting in my email inbox, otherwise I would have
> asked for help sooner.
> 
>> At ?the ?our bug hunt and continuously after I believe 50% of the bugs
>> we ?found were from fTools (and this is very considerable number, trac
>> regulars ?for sure can tell). We've raised some seriously disappointed
>> comments like "Nothing works in Vector menu". I simply couldn't test
>> Simplify features because it doesn't work, as well. Everytime I (or
>> other people from our group) open an instrument from Vector, there is a
>> string of bugs to
>> fill and this is very tiring and very bad looking in places where we
>> try to make people move from some GIS to QGIS.
> Unfortunately, many of these comments aren't very helpful, and
> obviously aren't making it into track. I had a quick look just now,
> and as far as I can tell, only a fraction of the reported bugs have
> anything to do with fTools (though I'll certainly admit there are
> fTools bug reports there).
> 
>> I suggest that a serious review of Vector tools is needed (hackfest?),
>> first by
>> maintainer, then by a single user checking _all_ instruments under
>> both Win and Linux. This can be followed by a group effort to hunt for
>> more bugs (here I offer our help).
> I will not be at the hackfest this time, as I simply don't have time
> at the moment. However, I strongly encourage others to take a look at
> the fTools functions and get cracking! Unfortunately I have received
> very few patches or fixes to fTools in general since it's inclusion in
> trunk, and I simply do not have the time to implement these
> changes/fixes on my own. fTools is a very complex plugin, and since it
> is dealing with complicated geometry manipulations, bugs from fTools,
> QGIS, and GEOS (and the conversion between all these pieces) all
> affect it. As I have mentioned in the past, I would love to have more
> people working on it, especially the (very slow) port of the fTools
> Python functions to cpp. I'm not a cpp programmer, so by myself things
> move very slowly... In terms of the hackfest, I would love to have
> someone (or more) take some initiative and continue work on porting
> things over and cleaning things up.
> 
> Regards,
> 
> Carson
From robert at szczepanek.pl  Fri Mar  5 15:24:37 2010
From: robert at szczepanek.pl (Robert Szczepanek)
Date: Fri Mar  5 15:24:41 2010
Subject: [Qgis-developer] fTools (Vector) concern
In-Reply-To: <867cba19380d2929b4ca58e5c7ecc979@127.0.0.1>
References: <1161709956.20100305084223@gis-lab.info>	<94b3c8441003050847n72d111bbkc9728cc29ff030a1@mail.gmail.com>
	<867cba19380d2929b4ca58e5c7ecc979@127.0.0.1>
Message-ID: <4B916885.6050100@szczepanek.pl>

Very nice answer Ahmed!

Could we start collecting such cases for references on QGIS wiki?
Users, scientific papers, etc.
We (Milena, Borys and me) have started to collect QGIS users in Poland.
http://quantum-gis.pl/uzytkownicy

Robert

ahmed@elegantdesigns.ca pisze:
> Just for the record, I wouldn't have a masters degree if it wasn't for qgis
> and ftools
> 

From b.rowlingson at lancaster.ac.uk  Fri Mar  5 15:30:00 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri Mar  5 15:30:04 2010
Subject: [Qgis-developer] fTools (Vector) concern
In-Reply-To: <4B916885.6050100@szczepanek.pl>
References: <1161709956.20100305084223@gis-lab.info>
	<94b3c8441003050847n72d111bbkc9728cc29ff030a1@mail.gmail.com>
	<867cba19380d2929b4ca58e5c7ecc979@127.0.0.1>
	<4B916885.6050100@szczepanek.pl>
Message-ID: <d8ad40b51003051230p4371c2acu516fb3d6373dfd92@mail.gmail.com>

On Fri, Mar 5, 2010 at 8:24 PM, Robert Szczepanek <robert@szczepanek.pl> wrote:
> Very nice answer Ahmed!
>
> Could we start collecting such cases for references on QGIS wiki?
> Users, scientific papers, etc.
> We (Milena, Borys and me) have started to collect QGIS users in Poland.
> http://quantum-gis.pl/uzytkownicy

 Is there an official way of citing Qgis? R likes you to cite the
manual, which is a proper book with an ISBN and all that:

http://cran.r-project.org/doc/FAQ/R-FAQ.html#Citing-R

Barry
From b.rowlingson at lancaster.ac.uk  Fri Mar  5 15:50:14 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Fri Mar  5 15:50:17 2010
Subject: [Qgis-developer] Interest announcement for QGIS meeting
In-Reply-To: <ceb0de271002281014m18350f1dt2f7b79c0841ee078@mail.gmail.com>
References: <ceb0de271002281014m18350f1dt2f7b79c0841ee078@mail.gmail.com>
Message-ID: <d8ad40b51003051250m30a9def5yb06c6f00d4fb3d16@mail.gmail.com>

On Sun, Feb 28, 2010 at 6:14 PM, Gary Sherman <gsherman@mrcc.com> wrote:

> Agenda items for the meeting might include:
> ?* Presentation of projects using or leveraging QGIS
> ?* New things you are working on
> ?* Roadmap discussion for version 1.9/2.0
> ?* Hacking on core or plugins
> ?* Training
>
> The meeting would be held for two or three days mid-week.
>
> I realize that Alaska is far away for most/many of you, however unique
> opportunities are available to combine the meeting with some excellent
> tourist activities.
>
> If you are interested in such a meeting please let me know (privately
> or to the list). If sufficient interest is expressed we will look into
> finding sponsors and begin working on details for a time and venue.

 I'm planning to be teaching a course in spatial stats to some
foresters at SFU in Vancouver, July 26-30th. I really should have a
bit of a holiday as well, so hanging around the NW for a meeting would
be an option. I'd prefer a meeting to be held in Canada so I don't
have to go through US customs (although arriving in Seattle on the
boat from Victoria after OSGeo was rather civilised).

 Am getting my airfare paid so no problem getting there.

 I'd like to work on integration with other GIS toolkits (but that's
only because I *still* don't grok Grass's workspace concept!)

Barry
From tmitchell at osgeo.org  Fri Mar  5 16:09:51 2010
From: tmitchell at osgeo.org (Tyler Mitchell (OSGeo))
Date: Fri Mar  5 16:10:04 2010
Subject: [Qgis-user] Re: [Qgis-developer] Request for Enhancement: PDF
	export for	post-processing
In-Reply-To: <4B90A750.1070908@gmail.com>
References: <4B8EDD0E.10506@osgeo.org> <4B8F4D32.7060607@gmail.com>
	<4B909832.8040805@wildintellect.com> <4B90A750.1070908@gmail.com>
Message-ID: <4B91731F.4000702@osgeo.org>

Arg, forward to hit send last night..  Dane's already followed up, oh
well...


>From another angle, I exported using Quantumnik (mapnik plugin) into PDF
and it worked well.  Text has issues there as well, but Dane can speak
more about it than I can.  This feature depends on Cairo library being
improved apparently.

Tyler

Milo van der Linden wrote:
> I just found out that the main bulk in manual labour is repositioning
> text. It turns out that any export from Qt creates text as outlines,
> whatever program you use. A quick intermezzo on the #qt irc channel at
> freenode learned that Qt is simply *not* capable of rendering text as text.
> 
> This would be the first thing that my contact would really like to see
> fixed. So; to limit the bounds of the question;
> 
> What would be the effort to export text as text? Could it be done at all
> given that Qt doesn't support it?
> 
> Kind regards,
> 
> Milo van der Linden
> 
> 
> Alex Mandel wrote:
>> As I mentioned in IRC here it the thread about the same topic leading up
>> to the november hackfest.
>> http://n2.nabble.com/SVG-export-td3792011.html#a3792011
>>
>> You can see it in the topic list too
>> http://www.qgis.org/wiki/2._QGIS_Hackfest_in_Vienna_2009
>>
>> In the end it seems like mapsever, osm and a bunch of other projects are
>> stuck because there isn't a good rendering toolkit, or we aren't making
>> use of the current ones. So we have the option to try and patch Qt svg
>> support to maybe solve it or to hunt around at other svg rendering
>> libraries and try to bring those into the fold, not sure what
>> openoffice, scribus or inkscape use but those seem like good places to
>> start asking.
>>
>> I guess the question is do we know a programmer who could solve this
>> issue if we shuffled money their way from Milo's source?
>>
>> Thanks,
>> Alex
>>
>> Milo van der Linden wrote:
>>  
>>> Hello Tyler!
>>>
>>> Thank you for sharing this. Indeed as described in the article on the
>>> wiki; the main point is: Don't build advanced cartographic composition
>>> functionality into any of the GIS products that are on the OSGeo stack.
>>> Less is more.
>>>
>>> If the GIS(es) could export to PDF with
>>> * PLAIN vector-work; ordered in PDF layers
>>> * Text as text and not as letter-contours (perhaps even with standard
>>> font embedded)
>>> * Symbol nodes as dots, ordered per layer based upon attributes
>>>
>>> My contact would be well served!
>>>
>>> Even putting effort in creating advanced symbology would be to much,
>>> use-it will want to change even that in his desktop publishing
>>> environment, so a simple node and the fact the node is on a certain pdf
>>> layer would be enough information for him to transform all the nodes
>>> into the symbology he wants.
>>>
>>> Right now he has days of work to create a single map of a city
>>> post-processing the GIS data (mainly cleansing) and then the
>>> cartographic work starts. If we could remove the cleaning job, it would
>>> be a win of 2 to 6 days per city map which would be excelent!
>>>
>>> Tyler Mitchell (OSGeo) wrote:
>>>    
>>>> Hi Milo, I just missed you in IRC.  I'm not a QGIS developer but I've
>>>> been trying to clarify an idea a few folks started a couple years back.
>>>> Specifically, establishing a standard way of doing high quality,
>>>> vector/raster output which would do pretty much what you are
>>>> describing.
>>>>
>>>> Standing back as a user, I think many projects have this challenge and
>>>> could work together if the approach was abstracted and some common
>>>> underlying tools agreed on or tested.
>>>>
>>>> Without writing it all out, my thoughts are here and might be
>>>> interesting to you.  Dane's work on Quantumnik are encouraging and, in
>>>> my little world, are pushing the envelope of what's described here too:
>>>>
>>>> http://wiki.osgeo.org/wiki/OSGeo_Cartographic_Library  See the first
>>>> two
>>>> sections for clarity.  The rest is a brainstorm that's not well
>>>> organised.
>>>>
>>>>
>>>>
>>>> Milo van der Linden wrote:
>>>>  
>>>>      
>>>>> Hello People!
>>>>> I have a question.
>>>>>
>>>>> This summer I met someone of use-it http://www.use-it.be/ belgium
>>>>> at the
>>>>> OpenStreetMap State of the Map.
>>>>>
>>>>> Use-IT creates free paper maps for youth-hostels targeting a specific
>>>>> audience. Currently they are using the tool chain:
>>>>> OpenStreetMap website -> export svg -> import in Illustrator ->
>>>>> lots and
>>>>> lots of manual labour and finally produce eye candy like this:
>>>>> http://www.use-it.be/_files/inlineuploads/pages/MAP_O_Brussels.pdf
>>>>>
>>>>> Recently, the contact reached out to me. He could not find a solution
>>>>> within
>>>>> the OpenStreetMap community or it's related technology partners. Now
>>>>> I am
>>>>> helping him out looking at new ways to speed up their labour process.
>>>>>
>>>>> I am investigating the qGIS pdf export and it looks promising in
>>>>> combination
>>>>> with the OpenStreetMap plugin but texts come out as letter-outlines
>>>>> instead
>>>>> of fonts and the PDF layers structure is hard to work with. I would
>>>>> like to
>>>>> know if the developers of the layouter/export would be interested in
>>>>> about 2
>>>>> weeks of work to enhance the layout manager to something that creates
>>>>> pdf
>>>>> that is perfectly fit for post-processing.
>>>>>
>>>>> *****************1. PROCESSING PROBLEM*
>>>>>  This remains almost impossible - only supercomputers are able to
>>>>>  deliver an svg-file of a city of reasonable size, and even that is
>>>>>  still only a 50% shot. It took us a full night to render a city, and
>>>>>  were able to get there only with one of about ten available
>>>>>  xml-rulesheets (called z12). How could this be tackled?
>>>>>
>>>>> This one is tackled with the OSM plugin in combination with the PDF
>>>>> export.
>>>>> As far as I can see, the way osm data is presented in qGIS is
>>>>> simplified,
>>>>> but this is good! We don't need shading, outlines and a whole lot of
>>>>> fencies
>>>>> in this fase. The eye-candy will be created in Illustrator. So, as
>>>>> far as I
>>>>> can see; qGIS tackles this issue.
>>>>>
>>>>> *****************2. LAYER PROBLEM*
>>>>>  The svg does not contain separate layers with a clear content (like
>>>>>  'parks', 'roads', 'rivers'). Only the layers 'Map' and 'Map
>>>>>  Decoration' appear, but all the information is thrown together in
>>>>>  the layer 'Map'. You say it's a matter of someone finding the time
>>>>>  to improve this - but who is the best person to address?
>>>>>
>>>>> In the OpenStreetMap data format, there are basically 3 layers:
>>>>> points,
>>>>> lines and polygons. The "real" layering is organised in attributes
>>>>> called
>>>>> tags. To be more generic; It would be good to push elements to a pdf
>>>>> layer
>>>>> based upon grouping by attribute. In case of openstreetmap data, it
>>>>> would
>>>>> mean applying some rules to strip out the tags into the required
>>>>> attributes
>>>>> and then in the layout manager tell the pdf export to "group by
>>>>> attribute
>>>>> column A"
>>>>>
>>>>>
>>>>> *****************3. TYPOGRAPHICAL PROBLEM*
>>>>>  Layouters prefer to work with Adobe Illustrator to make maps. It's
>>>>>  what they know best, and Inkscape is just not as good yet.
>>>>>  Osmarender renders svg files. It is possible to open an svg-file in
>>>>>  Illustrator, but then you get typographical problems, illustrated
>>>>>  below. Our question: could Osmarender be made to deliver an eps-file
>>>>>  (always works in Inkscape AND Illustrator) instead of an svg?
>>>>>
>>>>>  This is what happened to a small part of Antwerp (Belgium):
>>>>>
>>>>>  SVG IN INKSCAPE
>>>>>   > opens fine
>>>>>   > text is fully editable
>>>>>   > see image 'svg_inkscape'
>>>>>
>>>>>  SVG IN ILLUSTRATOR
>>>>>   > opens upside down and with mistakes
>>>>>   > text is still editable as text (so it's not flattened), but does
>>>>>  not appear on a horizontal path in the street. Furthermore, every
>>>>>  letter is on a different path, so it's impossible to select an
>>>>>  entire word.
>>>>>   > see images 'svg_illustrator' and 'svg_illustrator_detail'
>>>>>
>>>>>  SVG SAVED AS EPS IN INKSCAPE AND THEN OPENED IN ILLUSTRATOR
>>>>>   > opens fine
>>>>>   > text is flattened and not editable anymore, and therefore useless
>>>>>  for layout
>>>>>   > see images 'eps_illustrator' and 'eps_illustrator_detail'
>>>>>
>>>>> **************
>>>>> Again; as far as I can see, it is qGIS to the rescue! The whole
>>>>> process of
>>>>> going from svg through inkscape to Adobe Illustrator is greatly
>>>>> smartened by
>>>>> using PDF export instead. Only one thing is needed here: to export
>>>>> fonts as
>>>>> text and not as letter contours. Horizontal text would be excelent.
>>>>> In that
>>>>> way, the designers can throw away what they do not need and use
>>>>> Illustrators
>>>>> smart tools to make text follow lines and so on.
>>>>>
>>>>> Now, what I would like to know (my contact has some funds to spend on
>>>>> this
>>>>> topic):
>>>>>
>>>>> - Who can I address with my enhancement questions?
>>>>> - Who would be willing to spend about 40 hours on this and at what
>>>>> rate?
>>>>> - Would this fit the roadmap of qGIS development?
>>>>> - Would others like to join up and provide extra funding for this?
>>>>>
>>>>> I am curious to see what responses will be coming!
>>>>>
>>>>> Kind regards,
>>>>>
>>>>> Milo van der Linden
>>>>> +31616598808
>>>>>             
>>
>>
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>   
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From giovanni.manghi at gmail.com  Sat Mar  6 08:35:26 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Sat Mar  6 08:35:35 2010
Subject: [Qgis-developer] Re: shaded relief plugin python error
In-Reply-To: <e17134bc1003010658y1e26d389r6aef65e86651516b@mail.gmail.com>
References: <1267395834.6619.40.camel@sibirica>
	<e17134bc1003010657r7e5b907bhf1245e22c126d04b@mail.gmail.com>
	<e17134bc1003010658y1e26d389r6aef65e86651516b@mail.gmail.com>
Message-ID: <1267882526.19519.5.camel@sibirica>

Hi Andreas,


> first I thought perhaps the DEM is simply too large to fit into
> memory. The plugin does load the complete DEM into memory, and
> actually needs to maintain additional copies as well for computation.
> 
> However, I could successfully use the plugin with your Portugal DEM
> here on my machine. It is 64bit linux and has 16GB of memory. If you
> want I can upload the shaded relief somewhere. Perhaps you can find
> access to a larger machine as well ?



It seems really a memory problem. I tested both windows and linux with
different memory configurations and as a fact there is a minimum amount
of ram necessary to complete the analysis. Linux seems to perform
slightly better as with 2560mb of ram it completes the task while xp
still fails.

It would be possibile to add in the plugin a control/warning when memory
ends? Otherwise in many cases users will be given a python error that
has a little meaning to them and they will probably give the blame to
the plugin itself.

cheers

-- Giovanni --







> >
> > Andreas
> >
> >
> >
> > On Sun, Feb 28, 2010 at 5:23 PM, Giovanni Manghi
> > <giovanni.manghi@gmail.com> wrote:
> >> Hi all,
> >> I'm getting python error(s) when running the shaded relief plugin on the
> >> following digital terrain model (qgis 1.4 on both linux and windows)
> >>
> >> http://mapserver.uevora.pt/~mapserver/dem_portugal.tif.tar.gz
> >>
> >> here are the errors
> >>
> >> ---------------------------
> >> An error has occured while executing Python code:
> >>
> >> Traceback (most recent call last):
> >>  File
> >> "/home/gio/.qgis//python/plugins/shadedrelief/ShadedReliefDialog.py",
> >> line 82, in accept
> >>    myEngine.run()
> >>  File
> >> "/home/gio/.qgis//python/plugins/shadedrelief/ShadedReliefEngine.py",
> >> line 64, in run
> >>    sta=numpy.dstack((-gr[1]*dy,gr[0]*dx,numpy.ones(gr[0].shape)*dx*dy))
> >>  File "/usr/lib/python2.6/dist-packages/numpy/lib/shape_base.py", line
> >> 573, in dstack
> >>    return _nx.concatenate(map(atleast_3d,tup),2)
> >> MemoryError
> >>
> >> Python version:
> >> 2.6.2 (release26-maint, Apr 19 2009, 02:11:59)
> >> [GCC 4.3.3]
> >> ---------------------------
> >>
> >> An error has occured while executing Python code:
> >>
> >> Traceback (most recent call last):
> >>  File
> >> "/home/gio/.qgis//python/plugins/shadedrelief/ShadedReliefDialog.py",
> >> line 82, in accept
> >>    myEngine.run()
> >>  File
> >> "/home/gio/.qgis//python/plugins/shadedrelief/ShadedReliefEngine.py",
> >> line 57, in run
> >>    gr =
> >> numpy.gradient(numpy.array(rastergdal.layerAsArray(str(self.sourceFileParam)))*self.vzParam)
> >>  File "/usr/lib/python2.6/dist-packages/numpy/lib/function_base.py",
> >> line 1017, in gradient
> >>    out[slice1] = (f[slice2] - f[slice3])/2.0
> >> MemoryError
> >> ---------------------------
> >>
> >>
> >> cheers
> >>
> >> -- Giovanni --

From andreasplesch at netscape.net  Sat Mar  6 13:33:03 2010
From: andreasplesch at netscape.net (Andreas Plesch)
Date: Sat Mar  6 13:33:07 2010
Subject: [Qgis-developer] Re: shaded relief plugin python error
In-Reply-To: <1267882526.19519.5.camel@sibirica>
References: <1267395834.6619.40.camel@sibirica>
	<e17134bc1003010657r7e5b907bhf1245e22c126d04b@mail.gmail.com>
	<e17134bc1003010658y1e26d389r6aef65e86651516b@mail.gmail.com>
	<1267882526.19519.5.camel@sibirica>
Message-ID: <e17134bc1003061033i42396fcbu59082a5dcd44d136@mail.gmail.com>

On Sat, Mar 6, 2010 at 8:35 AM, Giovanni Manghi
<giovanni.manghi@gmail.com> wrote:
> It seems really a memory problem. I tested both windows and linux with
> ...
> It would be possibile to add in the plugin a control/warning when memory
> ends? Otherwise in many cases users will be given a python error that
> has a little meaning to them and they will probably give the blame to
> the plugin itself.

I would like to reflect that question back to the list. How would one
go about monitoring memory usage within Python ?

Andreas
From milovanderlinden at gmail.com  Sat Mar  6 15:05:18 2010
From: milovanderlinden at gmail.com (Milo van der Linden)
Date: Sat Mar  6 15:05:25 2010
Subject: [Qgis-user] Re: [Qgis-developer] Request for Enhancement: PDF
	export for	post-processing
In-Reply-To: <4B91731F.4000702@osgeo.org>
References: <4B8EDD0E.10506@osgeo.org> <4B8F4D32.7060607@gmail.com>
	<4B909832.8040805@wildintellect.com>
	<4B90A750.1070908@gmail.com> <4B91731F.4000702@osgeo.org>
Message-ID: <4B92B57E.6050505@gmail.com>

Thank you all for the responses, especially Tyler; I appreciate it!

I am posting my conclusions for everyone to use if they ever run across 
issues in getting gis-data professionally printed:

I went to Bruxelles yesterday to discuss with use-it (www.use-it.be) 
what is currently possible with qGIS in regard to their current working 
process, use-it is using mac ad their workstation of choice. They where 
amazed to see that qGIS offers them:

- Download from the openstreetmap server
- The possibility to select features from an osm node-, line- or 
polygon- layer by selecting on an attribute in the browser-view and 
using "save selection as shapefile"
- use the composer to create a pdf that contains line-work, nodes and 
polygons

A big cheer to qGIS itself, the fabolous composer and the osm plugin!

use-it feels that qGIS is a great option for them. Compared to 
openstreetmaps osmarender, in combination with inkscape qGIS has two 
plusses:
- the ease of setup thanks to the kynchaos repo, it works without any hassle
- No need for X11 which caused inkscape to fail after a mac OS upgrade

Which makes qGIS feel like riding first class compared to "hanging under 
a plane" when using osmarender and inkscape on Mac OS.

The export of "raw" nodes, raw lines and raw polygons gives them full 
control in Adobe Illustrator over the graphics.
- It is easy to select elements in Adobe illustrator by line brush and 
color and group them in layers.

The one big issue that remains is; text... but as concluded before; 
that's a qt issue and has nothing to do with the excellence of qGIS

use-it is well helped by using qGIS. The approach
1) osm-import -> composer -> pdf export

proofs useful. But they will investigate another approach:

2) osm-import -> save as shapefiles -> Avensis Mappublisher

Avensis mappublisher unfortunately is closed source, but for use-it it 
is simply that they want their nut cracked as effective as possible. And 
effective in their case is:
1. Fast availability of openstreetmap data in adobe illustrator
2. No need to train adobe illustrator specialists to learn inkscape
3. Full control over text and labels

They want to create eye-candy and if open source and open data can help 
that is prefered, but if it cannot, they will not be troubled by putting 
some closed source into their production chain.

I hope to hear from them if the 2) solution works. And if it does, it 
means they will not invest into qGIS to get more options into the 
composer. If it doesn't, I will be back in touch!

Kind regards,

Milo van der Linden








Tyler Mitchell (OSGeo) wrote:
> Arg, forward to hit send last night..  Dane's already followed up, oh
> well...
>
>
> >From another angle, I exported using Quantumnik (mapnik plugin) into PDF
> and it worked well.  Text has issues there as well, but Dane can speak
> more about it than I can.  This feature depends on Cairo library being
> improved apparently.
>
> Tyler
>
> Milo van der Linden wrote:
>   
>> I just found out that the main bulk in manual labour is repositioning
>> text. It turns out that any export from Qt creates text as outlines,
>> whatever program you use. A quick intermezzo on the #qt irc channel at
>> freenode learned that Qt is simply *not* capable of rendering text as text.
>>
>> This would be the first thing that my contact would really like to see
>> fixed. So; to limit the bounds of the question;
>>
>> What would be the effort to export text as text? Could it be done at all
>> given that Qt doesn't support it?
>>
>> Kind regards,
>>
>> Milo van der Linden
>>
>>
>> Alex Mandel wrote:
>>     
>>> As I mentioned in IRC here it the thread about the same topic leading up
>>> to the november hackfest.
>>> http://n2.nabble.com/SVG-export-td3792011.html#a3792011
>>>
>>> You can see it in the topic list too
>>> http://www.qgis.org/wiki/2._QGIS_Hackfest_in_Vienna_2009
>>>
>>> In the end it seems like mapsever, osm and a bunch of other projects are
>>> stuck because there isn't a good rendering toolkit, or we aren't making
>>> use of the current ones. So we have the option to try and patch Qt svg
>>> support to maybe solve it or to hunt around at other svg rendering
>>> libraries and try to bring those into the fold, not sure what
>>> openoffice, scribus or inkscape use but those seem like good places to
>>> start asking.
>>>
>>> I guess the question is do we know a programmer who could solve this
>>> issue if we shuffled money their way from Milo's source?
>>>
>>> Thanks,
>>> Alex
>>>
>>> Milo van der Linden wrote:
>>>  
>>>       
>>>> Hello Tyler!
>>>>
>>>> Thank you for sharing this. Indeed as described in the article on the
>>>> wiki; the main point is: Don't build advanced cartographic composition
>>>> functionality into any of the GIS products that are on the OSGeo stack.
>>>> Less is more.
>>>>
>>>> If the GIS(es) could export to PDF with
>>>> * PLAIN vector-work; ordered in PDF layers
>>>> * Text as text and not as letter-contours (perhaps even with standard
>>>> font embedded)
>>>> * Symbol nodes as dots, ordered per layer based upon attributes
>>>>
>>>> My contact would be well served!
>>>>
>>>> Even putting effort in creating advanced symbology would be to much,
>>>> use-it will want to change even that in his desktop publishing
>>>> environment, so a simple node and the fact the node is on a certain pdf
>>>> layer would be enough information for him to transform all the nodes
>>>> into the symbology he wants.
>>>>
>>>> Right now he has days of work to create a single map of a city
>>>> post-processing the GIS data (mainly cleansing) and then the
>>>> cartographic work starts. If we could remove the cleaning job, it would
>>>> be a win of 2 to 6 days per city map which would be excelent!
>>>>
>>>> Tyler Mitchell (OSGeo) wrote:
>>>>    
>>>>         
>>>>> Hi Milo, I just missed you in IRC.  I'm not a QGIS developer but I've
>>>>> been trying to clarify an idea a few folks started a couple years back.
>>>>> Specifically, establishing a standard way of doing high quality,
>>>>> vector/raster output which would do pretty much what you are
>>>>> describing.
>>>>>
>>>>> Standing back as a user, I think many projects have this challenge and
>>>>> could work together if the approach was abstracted and some common
>>>>> underlying tools agreed on or tested.
>>>>>
>>>>> Without writing it all out, my thoughts are here and might be
>>>>> interesting to you.  Dane's work on Quantumnik are encouraging and, in
>>>>> my little world, are pushing the envelope of what's described here too:
>>>>>
>>>>> http://wiki.osgeo.org/wiki/OSGeo_Cartographic_Library  See the first
>>>>> two
>>>>> sections for clarity.  The rest is a brainstorm that's not well
>>>>> organised.
>>>>>
>>>>>
>>>>>
>>>>> Milo van der Linden wrote:
>>>>>  
>>>>>      
>>>>>           
>>>>>> Hello People!
>>>>>> I have a question.
>>>>>>
>>>>>> This summer I met someone of use-it http://www.use-it.be/ belgium
>>>>>> at the
>>>>>> OpenStreetMap State of the Map.
>>>>>>
>>>>>> Use-IT creates free paper maps for youth-hostels targeting a specific
>>>>>> audience. Currently they are using the tool chain:
>>>>>> OpenStreetMap website -> export svg -> import in Illustrator ->
>>>>>> lots and
>>>>>> lots of manual labour and finally produce eye candy like this:
>>>>>> http://www.use-it.be/_files/inlineuploads/pages/MAP_O_Brussels.pdf
>>>>>>
>>>>>> Recently, the contact reached out to me. He could not find a solution
>>>>>> within
>>>>>> the OpenStreetMap community or it's related technology partners. Now
>>>>>> I am
>>>>>> helping him out looking at new ways to speed up their labour process.
>>>>>>
>>>>>> I am investigating the qGIS pdf export and it looks promising in
>>>>>> combination
>>>>>> with the OpenStreetMap plugin but texts come out as letter-outlines
>>>>>> instead
>>>>>> of fonts and the PDF layers structure is hard to work with. I would
>>>>>> like to
>>>>>> know if the developers of the layouter/export would be interested in
>>>>>> about 2
>>>>>> weeks of work to enhance the layout manager to something that creates
>>>>>> pdf
>>>>>> that is perfectly fit for post-processing.
>>>>>>
>>>>>> *****************1. PROCESSING PROBLEM*
>>>>>>  This remains almost impossible - only supercomputers are able to
>>>>>>  deliver an svg-file of a city of reasonable size, and even that is
>>>>>>  still only a 50% shot. It took us a full night to render a city, and
>>>>>>  were able to get there only with one of about ten available
>>>>>>  xml-rulesheets (called z12). How could this be tackled?
>>>>>>
>>>>>> This one is tackled with the OSM plugin in combination with the PDF
>>>>>> export.
>>>>>> As far as I can see, the way osm data is presented in qGIS is
>>>>>> simplified,
>>>>>> but this is good! We don't need shading, outlines and a whole lot of
>>>>>> fencies
>>>>>> in this fase. The eye-candy will be created in Illustrator. So, as
>>>>>> far as I
>>>>>> can see; qGIS tackles this issue.
>>>>>>
>>>>>> *****************2. LAYER PROBLEM*
>>>>>>  The svg does not contain separate layers with a clear content (like
>>>>>>  'parks', 'roads', 'rivers'). Only the layers 'Map' and 'Map
>>>>>>  Decoration' appear, but all the information is thrown together in
>>>>>>  the layer 'Map'. You say it's a matter of someone finding the time
>>>>>>  to improve this - but who is the best person to address?
>>>>>>
>>>>>> In the OpenStreetMap data format, there are basically 3 layers:
>>>>>> points,
>>>>>> lines and polygons. The "real" layering is organised in attributes
>>>>>> called
>>>>>> tags. To be more generic; It would be good to push elements to a pdf
>>>>>> layer
>>>>>> based upon grouping by attribute. In case of openstreetmap data, it
>>>>>> would
>>>>>> mean applying some rules to strip out the tags into the required
>>>>>> attributes
>>>>>> and then in the layout manager tell the pdf export to "group by
>>>>>> attribute
>>>>>> column A"
>>>>>>
>>>>>>
>>>>>> *****************3. TYPOGRAPHICAL PROBLEM*
>>>>>>  Layouters prefer to work with Adobe Illustrator to make maps. It's
>>>>>>  what they know best, and Inkscape is just not as good yet.
>>>>>>  Osmarender renders svg files. It is possible to open an svg-file in
>>>>>>  Illustrator, but then you get typographical problems, illustrated
>>>>>>  below. Our question: could Osmarender be made to deliver an eps-file
>>>>>>  (always works in Inkscape AND Illustrator) instead of an svg?
>>>>>>
>>>>>>  This is what happened to a small part of Antwerp (Belgium):
>>>>>>
>>>>>>  SVG IN INKSCAPE
>>>>>>   > opens fine
>>>>>>   > text is fully editable
>>>>>>   > see image 'svg_inkscape'
>>>>>>
>>>>>>  SVG IN ILLUSTRATOR
>>>>>>   > opens upside down and with mistakes
>>>>>>   > text is still editable as text (so it's not flattened), but does
>>>>>>  not appear on a horizontal path in the street. Furthermore, every
>>>>>>  letter is on a different path, so it's impossible to select an
>>>>>>  entire word.
>>>>>>   > see images 'svg_illustrator' and 'svg_illustrator_detail'
>>>>>>
>>>>>>  SVG SAVED AS EPS IN INKSCAPE AND THEN OPENED IN ILLUSTRATOR
>>>>>>   > opens fine
>>>>>>   > text is flattened and not editable anymore, and therefore useless
>>>>>>  for layout
>>>>>>   > see images 'eps_illustrator' and 'eps_illustrator_detail'
>>>>>>
>>>>>> **************
>>>>>> Again; as far as I can see, it is qGIS to the rescue! The whole
>>>>>> process of
>>>>>> going from svg through inkscape to Adobe Illustrator is greatly
>>>>>> smartened by
>>>>>> using PDF export instead. Only one thing is needed here: to export
>>>>>> fonts as
>>>>>> text and not as letter contours. Horizontal text would be excelent.
>>>>>> In that
>>>>>> way, the designers can throw away what they do not need and use
>>>>>> Illustrators
>>>>>> smart tools to make text follow lines and so on.
>>>>>>
>>>>>> Now, what I would like to know (my contact has some funds to spend on
>>>>>> this
>>>>>> topic):
>>>>>>
>>>>>> - Who can I address with my enhancement questions?
>>>>>> - Who would be willing to spend about 40 hours on this and at what
>>>>>> rate?
>>>>>> - Would this fit the roadmap of qGIS development?
>>>>>> - Would others like to join up and provide extra funding for this?
>>>>>>
>>>>>> I am curious to see what responses will be coming!
>>>>>>
>>>>>> Kind regards,
>>>>>>
>>>>>> Milo van der Linden
>>>>>> +31616598808
>>>>>>             
>>>>>>             
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>>   
>>>       
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>     
>
>
>   

From zoran.jankovic at zisis.hr  Sat Mar  6 15:50:44 2010
From: zoran.jankovic at zisis.hr (Zoran Jankovic)
Date: Sat Mar  6 15:50:50 2010
Subject: [Qgis-user] Re: [Qgis-developer] Request for Enhancement: PDF 
	export for post-processing
In-Reply-To: <4B92B57E.6050505@gmail.com>
References: <4B8EDD0E.10506@osgeo.org> <4B8F4D32.7060607@gmail.com>
	<4B909832.8040805@wildintellect.com> <4B90A750.1070908@gmail.com>
	<4B91731F.4000702@osgeo.org> <4B92B57E.6050505@gmail.com>
Message-ID: <f2b361eb1003061250j6ee1e5d9m62c7b6707996260e@mail.gmail.com>

Just to add my 2 cents:

I think you meant "Avenza Mapublisher"? Their webshop says it's $1249 for a
fixed license... Two fixed licenses make a pretty compelling budget for a
potential developer... (No, I'm not nominating myself, I do not posses
necessary skills, unfortunately). But as I understood it from this thread,
this "export to PDF as text" could be done on Macs, using Cairo library?

BR,
---
Zoran Jankovic
ZIS-Izrada softvera i savjetovanje / ZIS - Software Development and
Consulting

http://www.zisis.hr

M: 00 385 98 682 902
T:  00 385 44 683 374

A. Senoe 4
44320 Kutina
Croatia


On Sat, Mar 6, 2010 at 9:05 PM, Milo van der Linden <
milovanderlinden@gmail.com> wrote:

> Thank you all for the responses, especially Tyler; I appreciate it!
>
> I am posting my conclusions for everyone to use if they ever run across
> issues in getting gis-data professionally printed:
>
> I went to Bruxelles yesterday to discuss with use-it (www.use-it.be) what
> is currently possible with qGIS in regard to their current working process,
> use-it is using mac ad their workstation of choice. They where amazed to see
> that qGIS offers them:
>
> - Download from the openstreetmap server
> - The possibility to select features from an osm node-, line- or polygon-
> layer by selecting on an attribute in the browser-view and using "save
> selection as shapefile"
> - use the composer to create a pdf that contains line-work, nodes and
> polygons
>
> A big cheer to qGIS itself, the fabolous composer and the osm plugin!
>
> use-it feels that qGIS is a great option for them. Compared to
> openstreetmaps osmarender, in combination with inkscape qGIS has two
> plusses:
> - the ease of setup thanks to the kynchaos repo, it works without any
> hassle
> - No need for X11 which caused inkscape to fail after a mac OS upgrade
>
> Which makes qGIS feel like riding first class compared to "hanging under a
> plane" when using osmarender and inkscape on Mac OS.
>
> The export of "raw" nodes, raw lines and raw polygons gives them full
> control in Adobe Illustrator over the graphics.
> - It is easy to select elements in Adobe illustrator by line brush and
> color and group them in layers.
>
> The one big issue that remains is; text... but as concluded before; that's
> a qt issue and has nothing to do with the excellence of qGIS
>
> use-it is well helped by using qGIS. The approach
> 1) osm-import -> composer -> pdf export
>
> proofs useful. But they will investigate another approach:
>
> 2) osm-import -> save as shapefiles -> Avensis Mappublisher
>
> Avensis mappublisher unfortunately is closed source, but for use-it it is
> simply that they want their nut cracked as effective as possible. And
> effective in their case is:
> 1. Fast availability of openstreetmap data in adobe illustrator
> 2. No need to train adobe illustrator specialists to learn inkscape
> 3. Full control over text and labels
>
> They want to create eye-candy and if open source and open data can help
> that is prefered, but if it cannot, they will not be troubled by putting
> some closed source into their production chain.
>
> I hope to hear from them if the 2) solution works. And if it does, it means
> they will not invest into qGIS to get more options into the composer. If it
> doesn't, I will be back in touch!
>
>
> Kind regards,
>
> Milo van der Linden
>
> .....
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100306/621d6e13/attachment.html
From giovanni.manghi at gmail.com  Sat Mar  6 17:21:54 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Sat Mar  6 17:22:04 2010
Subject: [Qgis-user] Re: [Qgis-developer] announcing DPSimplify
In-Reply-To: <66a45d6d1003050444g3ca49794m7706e4b7b11fbc39@mail.gmail.com>
References: <20100304204039.5fc19b69.alexander.bruy@gmail.com>
	<20100305074838.GB15044@norbit.de> <4B90C337.40202@duif.net>
	<1267781773.6463.22.camel@sibirica> <4B90DF63.7000107@duif.net>
	<94b3c8441003050255o67ef61a2ve8d651bde05d0989@mail.gmail.com>
	<94b3c8441003050256o5b2fd85fhe5a92199fae8b700@mail.gmail.com>
	<66a45d6d1003050444g3ca49794m7706e4b7b11fbc39@mail.gmail.com>
Message-ID: <1267914114.6901.163.camel@sibirica>

Hi,

>  MultiLines are not supported yet.

this multiline vector

https://trac.osgeo.org/qgis/attachment/ticket/2493/evora_rios_shp.zip

causes qgis trunk to crash under ubuntu 9.10, when the plugin is used.
This is the terminal message:

--------
Warning: QObject::setParent: Cannot set parent, new parent is in a
different thread
Warning: QPixmap: It is not safe to use pixmaps outside the GUI thread
Warning: QPixmap: It is not safe to use pixmaps outside the GUI thread
Warning: QPixmap: It is not safe to use pixmaps outside the GUI thread
Warning: QPixmap: It is not safe to use pixmaps outside the GUI thread
Warning: QPixmap: It is not safe to use pixmaps outside the GUI thread
Warning: QPixmap: It is not safe to use pixmaps outside the GUI thread
Warning: QPixmap: It is not safe to use pixmaps outside the GUI thread
Warning: QPixmap: It is not safe to use pixmaps outside the GUI thread
Warning: QPixmap: It is not safe to use pixmaps outside the GUI thread
Warning: QPixmap: It is not safe to use pixmaps outside the GUI thread
Warning: QPixmap: It is not safe to use pixmaps outside the GUI thread
Warning: QPixmap: It is not safe to use pixmaps outside the GUI thread
Warning: QPixmap: It is not safe to use pixmaps outside the GUI thread
Warning: QPixmap: It is not safe to use pixmaps outside the GUI thread
Warning: QPixmap: It is not safe to use pixmaps outside the GUI thread
Warning: QPixmap: It is not safe to use pixmaps outside the GUI thread
Warning: QPixmap: It is not safe to use pixmaps outside the GUI thread
<unknown>: Fatal IO error 11 (Resource temporarily unavailable) on X
server :0.0
--------

maybe it would be better to add a control to warn the user that the
plugin does not work with such geometries.

With the same vector but under win xp (qgis trunk/osgeo4w) instead of a
crash I get a python error:

http://img51.yfrog.com/i/dpsimplifypythonerror.png/

Using the plugin with a copy of the vector obtained using the "multipart
to singleparts" tool works just fine.


cheers

-- Giovanni --

From gsherman at mrcc.com  Sat Mar  6 18:27:46 2010
From: gsherman at mrcc.com (Gary Sherman)
Date: Sat Mar  6 18:27:53 2010
Subject: [Qgis-developer] Geospatial data browser -- open for development
Message-ID: <4B92E4F2.6020402@mrcc.com>

All,
The GeoApt Geospatial Data Browser (GGDB) is now available for your
viewing enjoyment. Please note GeoApt is under development and not
feature complete. Right now it does provide directory browsing and
previewing of raster and vector layers. You can view limited metadata
for layers and drag and drop onto QGIS or other desktop apps.

There was a lot of interest in such an application expressed on the list
a while back. If you are interested in joining in development or want to
participate in the discussion, I have setup a separate mailing list.

For more information on GeoApt, the mailing list, and to download the
current version, please see: http://mrcc.com/geoapt-browser

-- gary
-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
Gary Sherman
Chair, QGIS Project Steering Committee
-Desktop GIS Book:
*http://desktopgisbook.com
-Spatial Hosting:
*http://mrcc.com/hosting
"We work virtually everywhere"
-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
From jmckenna at gatewaygeomatics.com  Sat Mar  6 20:02:51 2010
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Sat Mar  6 20:02:56 2010
Subject: [Qgis-developer] Re: Please commit this QGIS GUI translated file
In-Reply-To: <af69e1001003050244v4b7a4ffcoa87ec5b83219ace9@mail.gmail.com>
References: <af69e1001002280527n71aaf659tf8d189222255d63@mail.gmail.com>	
	<4B8BBAB5.2080507@gmail.com>
	<af69e1001003050244v4b7a4ffcoa87ec5b83219ace9@mail.gmail.com>
Message-ID: <4B92FB3B.9030804@gatewaygeomatics.com>

Hello Werner,

I am on the MapServer project steering committee, and I am good friends 
with Yoichi (and the team doing the QGIS translation work in Japan); my 
question is: is it possible to give Yoichi SVN commit privileges for the 
QGIS translation work?  It might be easier than him emailing you 
directly each time.

Let me know what you think.

Thanks.

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/




Yoichi Kayama wrote:
> Hi Werner
> 
> Thank you for your response.
> Now I had finished translate based R12990.
> Please commit it to svn.
> If we can know, when i18n message files will update , we will be happy.
> 
> 
> best regards
> Yoichi
> 
> 
> 
> 2010/3/1 Werner Macho <werner.macho@gmail.com>:
>> Hi!
>>
>> File is commited to trunk - aber there was also a string update .. :)
>> Strings are going to change from time to time - as development goes on ..
>> So If you have a look once a month for new strings to translate it should be
>> quite enough ..
>>
>> Thanks for your good work and i'm looking forward on the translated help
>> files ..
>>
>> Thanks again
>>
>> best regards
>> Werner
>>
>>> Hi  Werner
>>>
>>> This is Yoichi Kayama from Japan again.
>>> Thank you for your committing Japanese translated QGIS GUI file.
>>>
>>> We found many non-translated messages in qgis_ja.ts   in trunk .
>>> So we had started work about translation again.
>>>
>>> Now we had new qgis_ja.ts file based rev12712 .
>>>
>>> Could you commit this file to the svn repository?
>>>
>>> Now we are starting to translate help file.
>>> When it complete, we will ask you to commit again.
>>>
>>> regards
>>> Yoichi
>>>
>>

From audun at advim.no  Sat Mar  6 20:35:44 2010
From: audun at advim.no (Audun Ellertsen)
Date: Sat Mar  6 20:36:07 2010
Subject: [Qgis-developer] Legend fails to update on setLayerSet
Message-ID: <8bd79f2d1003061735s3c46b8ablf965415c33bf9a1@mail.gmail.com>

Hello Qgis-developers!

We reported a bug and provided a patch earlier today. Seems to work.
https://trac.osgeo.org/qgis/ticket/2492

We have not fixed the layer ordering problem he mentioned, but it is is the
same bug as was reported here:
http://forum.qgis.org/viewtopic.php?f=4&t=4786&p=8443

The layer ordering problem should probably be fixed in the same manner. Not
sure if it's good to have these methods as public either.

Best regards,

Michael Max and Audun Ellertsen

Advanced Imaging AS
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100307/0e8645e7/attachment.html
From marco at hugis.net  Sun Mar  7 11:54:01 2010
From: marco at hugis.net (Marco Hugentobler)
Date: Sun Mar  7 11:54:21 2010
Subject: [Qgis-developer] during the hackfest: introducing QGIS
In-Reply-To: <4B90080F.6040706@faunalia.it>
References: <4B8FE995.3070200@faunalia.it> <4B90080F.6040706@faunalia.it>
Message-ID: <201003071754.01688.marco@hugis.net>

Hi Paolo

What kind of seminar would it be? A talk or hands-on?
And how far is the department from the hackfest place?

Regards,
Marco

Am Donnerstag, 4. M?rz 2010 20.20:47 schrieb Paolo Cavallini:
> Paolo Cavallini ha scritto:
> > Hi all.
> > The Department of Computer Sciences of the University of Pisa would be
> > happy to host
> 
> Sorry I was unclear: I was talking of a 2 hrs (or so) seminar, to be held
>  during our upcoming hackfest.
> All the best.
> 

-- 
Dr. Marco Hugentobler
HUGIS GmbH
Webereistr. 66
CH-8134 Adliswil
marco@hugis.net
www.hugis.net
Technical Advisor QGIS Project Steering Committee
From giovanni.manghi at gmail.com  Sun Mar  7 13:33:30 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Sun Mar  7 13:33:36 2010
Subject: [Qgis-developer] 3rd party vector editing tools & undo/redo
Message-ID: <1267986810.6453.127.camel@sibirica>

Hi all,

new qgis users are always pretty impressed by the undo/redo feature, but
then they often ask why not all the vector editing tools do have their
actions reflected in the undo/redo stack. 

That is, I'm speaking about vector editing 3rd party plugins: cad tools,
numerical vertex edit, etc.

any thoughts?

cheers

-- Giovanni --

From alexander.bruy at gmail.com  Sun Mar  7 14:20:07 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Sun Mar  7 14:21:33 2010
Subject: [Qgis-developer] 3rd party vector editing tools & undo/redo
In-Reply-To: <1267986810.6453.127.camel@sibirica>
References: <1267986810.6453.127.camel@sibirica>
Message-ID: <20100307212007.64889767.alexander.bruy@gmail.com>

Hi,

seems that plugin developers don't implement support of undo/redo stack.
It is not hard to fix this, I think. Only add few lines of code:

layer.beginEditCommand( "Operation name here" )
<do something with feature(s) here>
layer.endEditCommand()


On Sun, 07 Mar 2010 18:33:30 +0000
Giovanni Manghi <giovanni.manghi@gmail.com> wrote:

> Hi all,
> 
> new qgis users are always pretty impressed by the undo/redo feature, but
> then they often ask why not all the vector editing tools do have their
> actions reflected in the undo/redo stack. 
> 
> That is, I'm speaking about vector editing 3rd party plugins: cad tools,
> numerical vertex edit, etc.
> 
> any thoughts?
> 
> cheers
> 
> -- Giovanni --
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 
Alexander Bruy
From giovanni.manghi at gmail.com  Sun Mar  7 14:39:45 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Sun Mar  7 14:39:50 2010
Subject: [Qgis-developer] 3rd party vector editing tools & undo/redo
In-Reply-To: <20100307212007.64889767.alexander.bruy@gmail.com>
References: <1267986810.6453.127.camel@sibirica>
	<20100307212007.64889767.alexander.bruy@gmail.com>
Message-ID: <1267990785.6453.140.camel@sibirica>

Hi,

well, if this is the case then I would like to invite any developer of
vector editing plugins to add the necessary snippets in the code.

cheers

-- Giovanni --


On Sun, 2010-03-07 at 21:20 +0200, Alexander Bruy wrote:
> Hi,
> 
> seems that plugin developers don't implement support of undo/redo stack.
> It is not hard to fix this, I think. Only add few lines of code:
> 
> layer.beginEditCommand( "Operation name here" )
> <do something with feature(s) here>
> layer.endEditCommand()

From giovanni.manghi at gmail.com  Sun Mar  7 16:52:31 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Sun Mar  7 16:52:38 2010
Subject: [Qgis-developer] cartogram/geoprocessing plugins and encoding
Message-ID: <1267998751.6453.182.camel@sibirica>

Hi,

I hope with this mail to reach the developers of the cartogram and
geoprocessing plugins.

I tested both plugins with vectors that in the table of attributes have
values like "SANTAR?M" or "BRAGAN?A" and the output seems to have
problems with accents & co.

In the output files those values results in strings like
"BRAGAN????????????????????????????????A" or "SANTAR??M"


cheers

-- Giovanni --

From jmckenna at gatewaygeomatics.com  Sun Mar  7 22:14:53 2010
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Sun Mar  7 22:14:58 2010
Subject: [Qgis-developer] Re: Please commit this QGIS GUI translated file
In-Reply-To: <4B92FB3B.9030804@gatewaygeomatics.com>
References: <af69e1001002280527n71aaf659tf8d189222255d63@mail.gmail.com>		<4B8BBAB5.2080507@gmail.com>	<af69e1001003050244v4b7a4ffcoa87ec5b83219ace9@mail.gmail.com>
	<4B92FB3B.9030804@gatewaygeomatics.com>
Message-ID: <4B946BAD.1000204@gatewaygeomatics.com>

Hello QGIS PSC,

To follow up with my initial message, I'd like to know if there is some 
way to allow a translator to commit changes directly to SVN.  In other 
words, avoid having to email changes directly to a single person. 
(please see my initial email below for background)

Thank you.

-jeff




Jeff McKenna wrote:
> Hello Werner,
> 
> I am on the MapServer project steering committee, and I am good friends 
> with Yoichi (and the team doing the QGIS translation work in Japan); my 
> question is: is it possible to give Yoichi SVN commit privileges for the 
> QGIS translation work?  It might be easier than him emailing you 
> directly each time.
> 
> Let me know what you think.
> 
From lists at linfiniti.com  Sun Mar  7 23:55:40 2010
From: lists at linfiniti.com (Tim Sutton)
Date: Sun Mar  7 23:55:47 2010
Subject: [Qgis-developer] Re: Please commit this QGIS GUI translated file
Message-ID: <1495303657-1268024141-cardhu_decombobulator_blackberry.rim.net-238822661-@bda033.bisx.produk.on.blackberry>

Hi Jeff

We normally would not give access to a person for working on translations or on a single file. We have a designated person (Werner Macho) who is the translations coordinator. Any .ts files submitted to him are usually committed promptly.

If you still feel strongly that the person should be given commit access the procedure is to formally request it of the psc (accompanied with a motion as to why it would be a good idea). The psc would then vote and then conditionally offer acces provided the person agrees to adhere to our coding standards, code of conduct etc.

Regards

Tim
------Original Message------
From: Jeff McKenna
Sender: qgis-developer-bounces@lists.osgeo.org
To: QGIS Developer
Cc: Venkatesh Raghavan
Cc: Yoichi Kayama
Subject: Re: [Qgis-developer] Re: Please commit this QGIS GUI translated file
Sent: Mar 8, 2010 5:14 AM

Hello QGIS PSC,

To follow up with my initial message, I'd like to know if there is some 
way to allow a translator to commit changes directly to SVN.  In other 
words, avoid having to email changes directly to a single person. 
(please see my initial email below for background)

Thank you.

-jeff




Jeff McKenna wrote:
> Hello Werner,
> 
> I am on the MapServer project steering committee, and I am good friends 
> with Yoichi (and the team doing the QGIS translation work in Japan); my 
> question is: is it possible to give Yoichi SVN commit privileges for the 
> QGIS translation work?  It might be easier than him emailing you 
> directly each time.
> 
> Let me know what you think.
> 
_______________________________________________
Qgis-developer mailing list
Qgis-developer@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/qgis-developer


Sent from my mobile phone.
From cavallini at faunalia.it  Mon Mar  8 06:25:14 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon Mar  8 06:25:34 2010
Subject: [Qgis-developer] fTools (Vector) concern
In-Reply-To: <867cba19380d2929b4ca58e5c7ecc979@127.0.0.1>
References: <1161709956.20100305084223@gis-lab.info>	<94b3c8441003050847n72d111bbkc9728cc29ff030a1@mail.gmail.com>
	<867cba19380d2929b4ca58e5c7ecc979@127.0.0.1>
Message-ID: <4B94DE9A.5030201@faunalia.it>

ahmed@elegantdesigns.ca ha scritto:
> Just for the record, I wouldn't have a masters degree if it wasn't for qgis
> and ftools

Woudl you mind to write a short success story for the qgis blog ot web site?
Thanks.
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From cavallini at faunalia.it  Mon Mar  8 06:42:30 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon Mar  8 06:42:48 2010
Subject: [Qgis-developer] during the hackfest: introducing QGIS
In-Reply-To: <201003071754.01688.marco@hugis.net>
References: <4B8FE995.3070200@faunalia.it> <4B90080F.6040706@faunalia.it>
	<201003071754.01688.marco@hugis.net>
Message-ID: <4B94E2A6.6050902@faunalia.it>

Hi Marco.

Marco Hugentobler ha scritto:

> What kind of seminar would it be? A talk or hands-on?

It's up to us: we can have space (a teching room) at the university) and some
advertisment among students and reasearchers, we can choose the formula we prefer.

> And how far is the department from the hackfest place?

A few km (it's downtown Pisa). I think we'll spend an evening in Pisa anyway, having
a look to the tower, a pizza etc., so we could do the talk/seminar just before that,
without too much disruption of the hacking schedule.
All the best.
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From marco at hugis.net  Mon Mar  8 07:48:15 2010
From: marco at hugis.net (Marco Hugentobler)
Date: Mon Mar  8 07:49:02 2010
Subject: [Qgis-developer] during the hackfest: introducing QGIS
In-Reply-To: <4B94E2A6.6050902@faunalia.it>
References: <4B8FE995.3070200@faunalia.it> <201003071754.01688.marco@hugis.net>
	<4B94E2A6.6050902@faunalia.it>
Message-ID: <201003081348.15161.marco@hugis.net>

Hi Paolo

Sounds good.
I'd suggest a talk / demo rather than a hands-on session because it is less of 
preparation. Maybe someone could show QGIS and emphasise the technical sides 
(show modular design, explain the plugin interface, show basic steps in 
writing a plugin)?

Regards,
Marco




Am Montag, 8. M?rz 2010 12.42:30 schrieb Paolo Cavallini:
> Hi Marco.
> 
> Marco Hugentobler ha scritto:
> > What kind of seminar would it be? A talk or hands-on?
> 
> It's up to us: we can have space (a teching room) at the university) and
>  some advertisment among students and reasearchers, we can choose the
>  formula we prefer.
> 
> > And how far is the department from the hackfest place?
> 
> A few km (it's downtown Pisa). I think we'll spend an evening in Pisa
>  anyway, having a look to the tower, a pizza etc., so we could do the
>  talk/seminar just before that, without too much disruption of the hacking
>  schedule.
> All the best.
> 

-- 
Dr. Marco Hugentobler
HUGIS GmbH
Webereistrasse 66
CH-8134 Adliswil
marco@hugis.net
http://homepage.hispeed.ch/hugis
Technical Advisor QGIS Project Steering Committee
From cavallini at faunalia.it  Mon Mar  8 13:48:54 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon Mar  8 13:48:59 2010
Subject: [Qgis-developer] hackfest exenses
Message-ID: <4B954696.7000308@faunalia.it>

Hi all.
The hackfest is approaching,and I would like to remind all the devs who need some
financial assistance to let me know the approximate amount they need.
Please keep all the slips and bills for which you'll need a refund.
All the best.
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From jmckenna at gatewaygeomatics.com  Mon Mar  8 20:31:52 2010
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon Mar  8 20:31:57 2010
Subject: [Qgis-developer] Re: Please commit this QGIS GUI translated file
In-Reply-To: <1495303657-1268024141-cardhu_decombobulator_blackberry.rim.net-238822661-@bda033.bisx.produk.on.blackberry>
References: <1495303657-1268024141-cardhu_decombobulator_blackberry.rim.net-238822661-@bda033.bisx.produk.on.blackberry>
Message-ID: <4B95A508.9000205@gatewaygeomatics.com>

Hi Tim,

Thanks for your response.  I'm sure Kayama-san is fine with sending the 
updated files directly to Werner (I was just wondering if this was the 
preferred process).

Sorry for the questions.

(I luv QGIS and I always promote it wherever i go)

-jeff




Tim Sutton wrote:
> Hi Jeff
> 
> We normally would not give access to a person for working on translations or on a single file. We have a designated person (Werner Macho) who is the translations coordinator. Any .ts files submitted to him are usually committed promptly.
> 
> If you still feel strongly that the person should be given commit access the procedure is to formally request it of the psc (accompanied with a motion as to why it would be a good idea). The psc would then vote and then conditionally offer acces provided the person agrees to adhere to our coding standards, code of conduct etc.
> 
> Regards
> 
> Tim
> ------Original Message------
> From: Jeff McKenna
> Sender: qgis-developer-bounces@lists.osgeo.org
> To: QGIS Developer
> Cc: Venkatesh Raghavan
> Cc: Yoichi Kayama
> Subject: Re: [Qgis-developer] Re: Please commit this QGIS GUI translated file
> Sent: Mar 8, 2010 5:14 AM
> 
> Hello QGIS PSC,
> 
> To follow up with my initial message, I'd like to know if there is some 
> way to allow a translator to commit changes directly to SVN.  In other 
> words, avoid having to email changes directly to a single person. 
> (please see my initial email below for background)
> 
> Thank you.
> 
> -jeff
> 
> 
> 
> 
> Jeff McKenna wrote:
>> Hello Werner,
>>
>> I am on the MapServer project steering committee, and I am good friends 
>> with Yoichi (and the team doing the QGIS translation work in Japan); my 
>> question is: is it possible to give Yoichi SVN commit privileges for the 
>> QGIS translation work?  It might be easier than him emailing you 
>> directly each time.
>>
>> Let me know what you think.
>>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> 
> Sent from my mobile phone.


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


From cavallini at faunalia.it  Tue Mar  9 06:29:08 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue Mar  9 06:29:31 2010
Subject: [Qgis-developer] during the hackfest: introducing QGIS
In-Reply-To: <201003081348.15161.marco@hugis.net>
References: <4B8FE995.3070200@faunalia.it> <201003071754.01688.marco@hugis.net>
	<4B94E2A6.6050902@faunalia.it> <201003081348.15161.marco@hugis.net>
Message-ID: <4B963104.1000800@faunalia.it>

Marco Hugentobler ha scritto:

> Sounds good.
> I'd suggest a talk / demo rather than a hands-on session because it is less of 

So I would suggest to give the lead of the seminar to Marco; any of the other devs
who would like to show something more is welcome.
All the best, and thanks Marco!
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From brush.tyler at gmail.com  Tue Mar  9 07:59:08 2010
From: brush.tyler at gmail.com (Giuseppe Sucameli)
Date: Tue Mar  9 07:59:11 2010
Subject: [Qgis-developer] Limited number of rows in a postgis layer
Message-ID: <baea77b11003090459u5ec92122g3a3facbc74dd237f@mail.gmail.com>

Hi guys,

I've some table with geometry in a postgreSQL db
and I want to show a preview of them.

I've used QgsDataSourceURI and QgsVectorLayer,
but I would get from db a limited number of rows.

So I tried this (in python):

uri = qgis.core.QgsDataSourceURI()
uri.setConnection(host, port, dbname, user, passwd)
uri.setDataSource(schema, table, geom_column)
uri.setSql('LIMIT 10')

but it doesn't work fine because the sql can be
only a condition.

Anyone can help me? Do you have any idea about this?

Cheers

-- 
Giuseppe Sucameli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100309/f84be9ce/attachment.html
From cavallini at faunalia.it  Tue Mar  9 08:47:21 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue Mar  9 08:47:27 2010
Subject: [Qgis-developer] during the hackfest: introducing QGIS
In-Reply-To: <201003081348.15161.marco@hugis.net>
References: <4B8FE995.3070200@faunalia.it> <201003071754.01688.marco@hugis.net>
	<4B94E2A6.6050902@faunalia.it> <201003081348.15161.marco@hugis.net>
Message-ID: <4B965169.2090602@faunalia.it>

Marco Hugentobler ha scritto:
> Hi Paolo
> 
> Sounds good.
> I'd suggest a talk / demo rather than a hands-on session because it is less of 
> preparation. Maybe someone could show QGIS and emphasise the technical sides 
> (show modular design, explain the plugin interface, show basic steps in 
> writing a plugin)?

Hi all.
What could be the time for the seminar? From the University they suggest 15-17, to
have the max audience, but I feel sorry to use the whole afternoon for this.
Thoughts?
pc
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From marco at hugis.net  Tue Mar  9 09:33:28 2010
From: marco at hugis.net (Marco Hugentobler)
Date: Tue Mar  9 09:34:21 2010
Subject: [Qgis-developer] during the hackfest: introducing QGIS
In-Reply-To: <4B965169.2090602@faunalia.it>
References: <4B8FE995.3070200@faunalia.it> <201003081348.15161.marco@hugis.net>
	<4B965169.2090602@faunalia.it>
Message-ID: <201003091533.28347.marco@hugis.net>

Hi Paolo

> What could be the time for the seminar? From the University they suggest
>  15-17, to have the max audience, but I feel sorry to use the whole
>  afternoon for this. Thoughts?

Since the seminar will be in the form of a presentation / demonstration, it 
should be enough if 1 or 2 devs are going there. The others may continue 
hackfesting and we meet in the city later.
What do you think?

Regards,
Marco


Am Dienstag, 9. M?rz 2010 14.47:21 schrieb Paolo Cavallini:
> Marco Hugentobler ha scritto:
> > Hi Paolo
> >
> > Sounds good.
> > I'd suggest a talk / demo rather than a hands-on session because it is
> > less of preparation. Maybe someone could show QGIS and emphasise the
> > technical sides (show modular design, explain the plugin interface, show
> > basic steps in writing a plugin)?
> 
> Hi all.
> What could be the time for the seminar? From the University they suggest
>  15-17, to have the max audience, but I feel sorry to use the whole
>  afternoon for this. Thoughts?
> pc
> 

-- 
Dr. Marco Hugentobler
HUGIS GmbH
Webereistrasse 66
CH-8134 Adliswil
marco@hugis.net
http://homepage.hispeed.ch/hugis
Technical Advisor QGIS Project Steering Committee
From vkepoglu at gmail.com  Tue Mar  9 09:57:45 2010
From: vkepoglu at gmail.com (Volkan Kepoglu)
Date: Tue Mar  9 09:57:49 2010
Subject: [Qgis-developer] which python modules are installed in the QGIS 1.4?
Message-ID: <8b5938321003090657r5bc42729m2c41e105cb0dccc2@mail.gmail.com>

Dear QGIS Developers,

Is there any list for the name and version of installed python modules that
comes with the default windows standalone installer.

If not, would it be good to make a list?

I could not derive the list of external installed python modules like rpy2,
numpy, etc.

but builtin modules can be derived with this code:

>>> import __builtin__
>>> print dir(__builtin__)

is there any way to find the name and their version of installed python
modules in QGIS 1.4.0?

regards,
volkan.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100309/d2306a6b/attachment.html
From cavallini at faunalia.it  Tue Mar  9 09:59:47 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue Mar  9 10:00:04 2010
Subject: [Qgis-developer] during the hackfest: introducing QGIS
In-Reply-To: <201003091533.28347.marco@hugis.net>
References: <4B8FE995.3070200@faunalia.it> <201003081348.15161.marco@hugis.net>
	<4B965169.2090602@faunalia.it> <201003091533.28347.marco@hugis.net>
Message-ID: <4B966263.9050900@faunalia.it>

Marco Hugentobler ha scritto:

> Since the seminar will be in the form of a presentation / demonstration, it 
> should be enough if 1 or 2 devs are going there. The others may continue 
> hackfesting and we meet in the city later.
> What do you think?

Sounds good - any other opinion?
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From sim at gis-lab.info  Tue Mar  9 14:30:30 2010
From: sim at gis-lab.info (Maxim Dubinin)
Date: Tue Mar  9 14:30:36 2010
Subject: [Qgis-developer] help with splitGeometry
In-Reply-To: <e8e7199c1003021254q1e0fbc95mff8de70bde1f8dc9@mail.gmail.com>
References: <666FB8D75E95AE42965A0E76A5E5337E0648ED01C3@prdlsmmsg01.ad.linz.govt.nz>
	<8510148851.20100302143554@gis-lab.info>
	<e8e7199c1003021254q1e0fbc95mff8de70bde1f8dc9@mail.gmail.com>
Message-ID: <1852949350.20100309133030@gis-lab.info>

MD> the splitGeometry() method was missing /Out/ annotations for the
MD> output lists, so it wasn't working correctly. It has been fixed in
MD> r12992.

MD> The syntax should be now:
MD> (res, newlist, topolist) = geom1.splitGeometry(pnts, False)


Hi Martin,

I've tried your fix on two intersecting lines (two nodes each),
after splitGeometry resulting newlist contains only one object (1 part of the intersected
line), though I think it should contain two.

Maxim

From blake at hailmail.net  Tue Mar  9 21:30:41 2010
From: blake at hailmail.net (Dane Springmeyer)
Date: Tue Mar  9 21:31:04 2010
Subject: [Qgis-developer] Request for Enhancement: PDF export for
	post-processing
In-Reply-To: <4B8EDD0E.10506@osgeo.org>
References: <4B8EDD0E.10506@osgeo.org>
Message-ID: <EDFF0A12-2108-4C53-9835-22DF57A541F8@hailmail.net>

Thanks again to Milo for raising this issue.

I just noticed the OpenStreetMap project has better print listed as an  
idea, and I've commented there (making sure to note use-its good wiki  
write up of the post-processing problems that need addressed):

See: http://wiki.openstreetmap.org/wiki/GSoC_Project_Ideas_2010#Paper_Output_Projects

Dane

On Mar 3, 2010, at 2:05 PM, Tyler Mitchell (OSGeo) wrote:

> Hi Milo, I just missed you in IRC.  I'm not a QGIS developer but I've
> been trying to clarify an idea a few folks started a couple years  
> back.
> Specifically, establishing a standard way of doing high quality,
> vector/raster output which would do pretty much what you are  
> describing.
>
> Standing back as a user, I think many projects have this challenge and
> could work together if the approach was abstracted and some common
> underlying tools agreed on or tested.
>
> Without writing it all out, my thoughts are here and might be
> interesting to you.  Dane's work on Quantumnik are encouraging and, in
> my little world, are pushing the envelope of what's described here  
> too:
>
> http://wiki.osgeo.org/wiki/OSGeo_Cartographic_Library  See the first  
> two
> sections for clarity.  The rest is a brainstorm that's not well  
> organised.
>
>
>
> Milo van der Linden wrote:
>> Hello People!
>> I have a question.
>>
>> This summer I met someone of use-it http://www.use-it.be/ belgium  
>> at the
>> OpenStreetMap State of the Map.
>>
>> Use-IT creates free paper maps for youth-hostels targeting a specific
>> audience. Currently they are using the tool chain:
>> OpenStreetMap website -> export svg -> import in Illustrator ->  
>> lots and
>> lots of manual labour and finally produce eye candy like this:
>> http://www.use-it.be/_files/inlineuploads/pages/MAP_O_Brussels.pdf
>>
>> Recently, the contact reached out to me. He could not find a  
>> solution within
>> the OpenStreetMap community or it's related technology partners.  
>> Now I am
>> helping him out looking at new ways to speed up their labour process.
>>
>> I am investigating the qGIS pdf export and it looks promising in  
>> combination
>> with the OpenStreetMap plugin but texts come out as letter-outlines  
>> instead
>> of fonts and the PDF layers structure is hard to work with. I would  
>> like to
>> know if the developers of the layouter/export would be interested  
>> in about 2
>> weeks of work to enhance the layout manager to something that  
>> creates pdf
>> that is perfectly fit for post-processing.
>>
>> *****************1. PROCESSING PROBLEM*
>> This remains almost impossible - only supercomputers are able to
>> deliver an svg-file of a city of reasonable size, and even that is
>> still only a 50% shot. It took us a full night to render a city, and
>> were able to get there only with one of about ten available
>> xml-rulesheets (called z12). How could this be tackled?
>>
>> This one is tackled with the OSM plugin in combination with the PDF  
>> export.
>> As far as I can see, the way osm data is presented in qGIS is  
>> simplified,
>> but this is good! We don't need shading, outlines and a whole lot  
>> of fencies
>> in this fase. The eye-candy will be created in Illustrator. So, as  
>> far as I
>> can see; qGIS tackles this issue.
>>
>> *****************2. LAYER PROBLEM*
>> The svg does not contain separate layers with a clear content (like
>> 'parks', 'roads', 'rivers'). Only the layers 'Map' and 'Map
>> Decoration' appear, but all the information is thrown together in
>> the layer 'Map'. You say it's a matter of someone finding the time
>> to improve this - but who is the best person to address?
>>
>> In the OpenStreetMap data format, there are basically 3 layers:  
>> points,
>> lines and polygons. The "real" layering is organised in attributes  
>> called
>> tags. To be more generic; It would be good to push elements to a  
>> pdf layer
>> based upon grouping by attribute. In case of openstreetmap data, it  
>> would
>> mean applying some rules to strip out the tags into the required  
>> attributes
>> and then in the layout manager tell the pdf export to "group by  
>> attribute
>> column A"
>>
>>
>> *****************3. TYPOGRAPHICAL PROBLEM*
>> Layouters prefer to work with Adobe Illustrator to make maps. It's
>> what they know best, and Inkscape is just not as good yet.
>> Osmarender renders svg files. It is possible to open an svg-file in
>> Illustrator, but then you get typographical problems, illustrated
>> below. Our question: could Osmarender be made to deliver an eps-file
>> (always works in Inkscape AND Illustrator) instead of an svg?
>>
>> This is what happened to a small part of Antwerp (Belgium):
>>
>> SVG IN INKSCAPE
>>> opens fine
>>> text is fully editable
>>> see image 'svg_inkscape'
>>
>> SVG IN ILLUSTRATOR
>>> opens upside down and with mistakes
>>> text is still editable as text (so it's not flattened), but does
>> not appear on a horizontal path in the street. Furthermore, every
>> letter is on a different path, so it's impossible to select an
>> entire word.
>>> see images 'svg_illustrator' and 'svg_illustrator_detail'
>>
>> SVG SAVED AS EPS IN INKSCAPE AND THEN OPENED IN ILLUSTRATOR
>>> opens fine
>>> text is flattened and not editable anymore, and therefore useless
>> for layout
>>> see images 'eps_illustrator' and 'eps_illustrator_detail'
>>
>> **************
>> Again; as far as I can see, it is qGIS to the rescue! The whole  
>> process of
>> going from svg through inkscape to Adobe Illustrator is greatly  
>> smartened by
>> using PDF export instead. Only one thing is needed here: to export  
>> fonts as
>> text and not as letter contours. Horizontal text would be excelent.  
>> In that
>> way, the designers can throw away what they do not need and use  
>> Illustrators
>> smart tools to make text follow lines and so on.
>>
>> Now, what I would like to know (my contact has some funds to spend  
>> on this
>> topic):
>>
>> - Who can I address with my enhancement questions?
>> - Who would be willing to spend about 40 hours on this and at what  
>> rate?
>> - Would this fit the roadmap of qGIS development?
>> - Would others like to join up and provide extra funding for this?
>>
>> I am curious to see what responses will be coming!
>>
>> Kind regards,
>>
>> Milo van der Linden
>> +31616598808
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From singarpita at gmail.com  Wed Mar 10 06:57:49 2010
From: singarpita at gmail.com (Arpita Singh)
Date: Wed Mar 10 06:57:56 2010
Subject: [Qgis-developer] QgsMapCanvasSnapper "error"
Message-ID: <14ba7b971003100357s4c7fd4dcu4e5957cef5e71b80@mail.gmail.com>

Hi All,

I am trying to use QgsMapCanvasSnapper while porting qgsmaptoolidentify.cpp
to python, but it give an error that :Attribute Error: QgsMapCanvasSnapper
I am Able to get the user clicked x.y but Iam unable to fetch the
"FeatureId" at the user clicked location, is there any function regarding
this? Can any one help.
Thanks in advance
-- 
Regards
Arpita
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100310/272535b7/attachment.html
From luca_manganelli at comune.trento.it  Wed Mar 10 07:04:39 2010
From: luca_manganelli at comune.trento.it (luca_manganelli@comune.trento.it)
Date: Wed Mar 10 07:04:42 2010
Subject: [Qgis-developer] QgsMapCanvasSnapper "error"
In-Reply-To: <14ba7b971003100357s4c7fd4dcu4e5957cef5e71b80@mail.gmail.com>
Message-ID: <OF08531205.778F3C15-ONC12576E2.00424080-C12576E2.00425838@comune.trento.it>

qgis-developer-bounces@lists.osgeo.org scritti il 10/03/2010 12.57.49

> Hi All,
> I am trying to use QgsMapCanvasSnapper?while porting
> qgsmaptoolidentify.cpp to python, but it give an error that :
> Attribute Error: QgsMapCanvasSnapper
>
> I am Able to get the user clicked x.y but Iam unable to?fetch the
> "FeatureId" at the user clicked location, is there any function
> regarding this? Can any one help.
> Thanks in advance

Can you post here the source code that generates the error? It's sufficient
only the function, not the entire code.

From cavallini at faunalia.it  Thu Mar 11 02:20:26 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu Mar 11 02:20:47 2010
Subject: [Qgis-developer] Google Layers plugin
Message-ID: <4B9899BA.9010603@faunalia.it>

Something wrong with the Google Layers plugin:

The plugin seems to have been installed but I don't know where. Probably the plugin
package contained a wrong named directory.
Please search the list of installed plugins. I'm nearly sure you'll find the plugin
there, but I just can't determine which of them it is. It also means that I won't be
able to determine if this plugin is installed and inform you about available updates.
However the plugin may work. Please contact the plugin author and submit this issue.

All the best.
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From cavallini at faunalia.it  Thu Mar 11 02:23:13 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu Mar 11 02:23:24 2010
Subject: [Qgis-developer] Google Layers plugin
In-Reply-To: <4B9899BA.9010603@faunalia.it>
References: <4B9899BA.9010603@faunalia.it>
Message-ID: <4B989A61.5090101@faunalia.it>

Paolo Cavallini ha scritto:
> Something wrong with the Google Layers plugin:

More issues:

An error has occured while executing Python code:

Traceback (most recent call last):
  File "/home/paolo/.qgis/python/plugins/GoogleLayers-0311/GoogleLayers.py", line
148, in config
    writeConfig(GoogleAPIKey,MapType)
  File "/home/paolo/.qgis/python/plugins/GoogleLayers-0311/GoogleLayers.py", line 97,
in writeConfig
    cf = open(currentPath + "/GoogleLayers.ini","w")
IOError: [Errno 2] No such file or directory:
'\\home\\paolo\\.qgis\\python\\plugins\\GoogleLayers-0311/GoogleLayers.ini'

Python version:
2.6.4+ (r264:75706, Feb 16 2010, 05:29:44)
[GCC 4.4.3]

-- 
Paolo Cavallini: http://www.faunalia.it/pc
From mandoluca at gmail.com  Thu Mar 11 02:26:25 2010
From: mandoluca at gmail.com (Luca Mandolesi)
Date: Thu Mar 11 02:26:47 2010
Subject: [Qgis-developer] Charging Raster limit
Message-ID: <31f1d37d1003102326j47dde4fasbcdab2d1852ac8d2@mail.gmail.com>

Hi to all.
After I charged 100 rasters files, qgis tell me
that there are too many rasters opened.
It's a number limit or a memory limit?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100311/e76e17ac/attachment.html
From vincent.neuilly at gmail.com  Thu Mar 11 05:37:23 2010
From: vincent.neuilly at gmail.com (Vincent Neuilly)
Date: Thu Mar 11 05:39:21 2010
Subject: [Qgis-developer] QGIS with plug-in "Raster" : creation option
	problem fixed
Message-ID: <898ce0141003110237s784babc7pf30598eb52bee50c@mail.gmail.com>

Hi,

I'm french and this is the first time I post here. I hope you will
understand, and I hope I post in the right section.


I was using QGIS with Raster plug-in, but each time I tried to use a
creation option, the following error occured : "Warning 6 : Driver <format>
does not support <option> creation option".  For example I couldn't use TFW
for GTiff, or TARGET for ECW...etc.
In fact the problem is in the file "optionsTable.py", at the end of the
file, line -->  options << '"' + name.text() + "=" + value.text() + '"'
I replaced this line with this one :   options << name.text() + "=" +
value.text()

I closed and re-opened QGIS, and creation options worked fine.

I don't know if this issue is general or more specific to me, but I thought
it could be useful to report it...


If I'm not posting in the right place, please tell me where I can post to
help QGIS developers.


Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100311/ae449c71/attachment.html
From marco at hugis.net  Thu Mar 11 06:30:14 2010
From: marco at hugis.net (Marco Hugentobler)
Date: Thu Mar 11 06:31:03 2010
Subject: [Qgis-developer] point displacement renderer plugin
Message-ID: <201003111230.14377.marco@hugis.net>

Hi devs

Recently, I wrote a plugin to display point datasets where several point 
features have the same position. With the normal display, it is hard to see if 
several features overlap.
The point displacement plugin draws (and optionally labels) such features in a 
circle around the 'real' position. Background is the need to display where 
school children live (maybe Andreas could give more details about it).

My question now is if people think this functionality is of common interest. 
If yes, then it might be good to add it to core (or as a default plugin). If 
not, then I could provide a windows dll if there is an interest.

The plugin sources can be downloaded from:
www.hugis.net/point_displacement_renderer.tgz


Looking forward for your feedback,
Marco

-- 
Dr. Marco Hugentobler
HUGIS GmbH
Webereistrasse 66
CH-8134 Adliswil
marco@hugis.net
www.hugis.net
Technical Advisor QGIS Project Steering Committee
From luca_manganelli at comune.trento.it  Thu Mar 11 10:53:51 2010
From: luca_manganelli at comune.trento.it (luca_manganelli@comune.trento.it)
Date: Thu Mar 11 10:53:54 2010
Subject: [Qgis-developer] Nasty bug found in symbology-new
Message-ID: <OF136B3E38.AD667C67-ONC12576E3.00561247-C12576E3.005753F9@comune.trento.it>


Tested with Qgis Osgeo4w SVN r13044

Steps to reproduce:

1) import the shapefile from:
http://webapps.comune.trento.it/base/grafo.7z
2) go to shapefile properties -> click on new symbology
3) click on Properties
4) make a symbol made with two types: SimpleLine and Markerline
5) on the Markline set the offset as -0.5
6) click on OK

Qgis freezes: if you don't set the offset, it does not.

I don't know if this bug affects on other operating systems.

Bug reported at: https://trac.osgeo.org/qgis/ticket/2545

From giovanni.manghi at gmail.com  Thu Mar 11 12:14:52 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Thu Mar 11 12:14:58 2010
Subject: [Qgis-developer] QGIS with plug-in "Raster" : creation option
	problem fixed
In-Reply-To: <898ce0141003110237s784babc7pf30598eb52bee50c@mail.gmail.com>
References: <898ce0141003110237s784babc7pf30598eb52bee50c@mail.gmail.com>
Message-ID: <1268327692.6485.18.camel@sibirica>

Hi,

the "gdal tools" plugin (the one that adds the "raster" menu) it is note
(yet) core, and have its own trac, when you can report bugs and feature
requests

https://trac.faunalia.it/GdalTools-plugin/report/1


cheers

-- Giovanni --


On Thu, 2010-03-11 at 11:37 +0100, Vincent Neuilly wrote:
> Hi,
> 
> 
> I'm french and this is the first time I post here. I hope you will
> understand, and I hope I post in the right section.
> 
> 
> 
> 
> I was using QGIS with Raster plug-in, but each time I tried to use a
> creation option, the following error occured : "Warning 6 : Driver
> <format> does not support <option> creation option".  For example I
> couldn't use TFW for GTiff, or TARGET for ECW...etc.
> In fact the problem is in the file "optionsTable.py", at the end of
> the file, line -->  options << '"' + name.text() + "=" + value.text()
> + '"'
> I replaced this line with this one :   options << name.text() + "=" +
> value.text()
> 
> 
> I closed and re-opened QGIS, and creation options worked fine.
> 
> 
> I don't know if this issue is general or more specific to me, but I
> thought it could be useful to report it...
> 
> 
> 
> 
> If I'm not posting in the right place, please tell me where I can post
> to help QGIS developers.
> 
> 
> 
> 
> Thanks.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From giovanni.manghi at gmail.com  Thu Mar 11 12:34:33 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Thu Mar 11 12:34:39 2010
Subject: [Qgis-developer] Nasty bug found in symbology-new
In-Reply-To: <OF136B3E38.AD667C67-ONC12576E3.00561247-C12576E3.005753F9@comune.trento.it>
References: <OF136B3E38.AD667C67-ONC12576E3.00561247-C12576E3.005753F9@comune.trento.it>
Message-ID: <1268328873.6485.19.camel@sibirica>

Seems confirmed under qgis 1.4/ubuntu 9.04.


Cheers

-- Giovanni --


On Thu, 2010-03-11 at 16:53 +0100, luca_manganelli@comune.trento.it
wrote:
> Tested with Qgis Osgeo4w SVN r13044
> 
> Steps to reproduce:
> 
> 1) import the shapefile from:
> http://webapps.comune.trento.it/base/grafo.7z
> 2) go to shapefile properties -> click on new symbology
> 3) click on Properties
> 4) make a symbol made with two types: SimpleLine and Markerline
> 5) on the Markline set the offset as -0.5
> 6) click on OK
> 
> Qgis freezes: if you don't set the offset, it does not.
> 
> I don't know if this bug affects on other operating systems.
> 
> Bug reported at: https://trac.osgeo.org/qgis/ticket/2545
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From alexander.bruy at gmail.com  Thu Mar 11 14:15:30 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Thu Mar 11 14:17:02 2010
Subject: [Qgis-developer] Layer order in TOC
Message-ID: <20100311211530.4ce4eb46.alexander.bruy@gmail.com>

Hi list,

is there a way to get a list of layers in the order in which they are
listed in the TOC?
When I use QgsMapLayerRegistry.instance().mapLayers() I get layers
in the order different from the order in the TOC. For example in TOC
I have layers:
layer_01
layer_02
layer_03
layer_04
when I retrieve layer list with QgsMapLayerRegistry I got:
layer_04
layer_01
layer_03
layer_02

Thanks
-- 
Alexander Bruy
From motta.luiz at gmail.com  Thu Mar 11 17:36:31 2010
From: motta.luiz at gmail.com (motta.luiz@gmail.com)
Date: Thu Mar 11 18:01:30 2010
Subject: [Qgis-developer] Layer order in TOC
In-Reply-To: <20100311211530.4ce4eb46.alexander.bruy@gmail.com>
References: <20100311211530.4ce4eb46.alexander.bruy@gmail.com>
Message-ID: <4B99706F.3020403@gmail.com>

Alexander,

I make same question before, you can see in:
http://n2.nabble.com/List-layer-from-Legend-td4416161.html#a4416161

See the comments of Martin Dobias.


Alexander Bruy escreveu:
> Hi list,
>
> is there a way to get a list of layers in the order in which they are
> listed in the TOC?
> When I use QgsMapLayerRegistry.instance().mapLayers() I get layers
> in the order different from the order in the TOC. For example in TOC
> I have layers:
> layer_01
> layer_02
> layer_03
> layer_04
> when I retrieve layer list with QgsMapLayerRegistry I got:
> layer_04
> layer_01
> layer_03
> layer_02
>
> Thanks
>   

From sfkeller at gmail.com  Fri Mar 12 10:34:38 2010
From: sfkeller at gmail.com (Stefan Keller)
Date: Fri Mar 12 10:40:36 2010
Subject: [Qgis-developer] How to turn GRASS commands from tabs to a script?
	(where is toolbox metadata located?)
Message-ID: <25bc040b1003120734y64ef2ae8u5ee97a30050725e5@mail.gmail.com>

Dear all

I'm analyzing some data with grass within qgis. Now there's the grass
plugin and it's toolbox. This opens nicely a new tab when issueing a
new grass command, like r.in.ascii, then r.reclass, etc. There's also
a "Browser" which displays every command as comment (e.g. aspect map
elev = dhm@mymap zfactor = 1.00 min_slp_allowed = 0.000000").

Now I want to automate this series of commands using a script (or a
batch command)!

How do I do that easiest?

My approach would be to fetch the comment data from the GRASS plugin
toolbox browser - but I can't find the location where this metadata is
stored?

-S.
From jctull at gmail.com  Fri Mar 12 17:58:43 2010
From: jctull at gmail.com (John C. Tull)
Date: Fri Mar 12 17:58:53 2010
Subject: [Qgis-developer] point displacement renderer plugin
In-Reply-To: <201003111230.14377.marco@hugis.net>
References: <201003111230.14377.marco@hugis.net>
Message-ID: <C4EE6A9C-AFC9-45A8-8AE4-F73BA7B08E58@gmail.com>

Hi Marco,

User feedback, but +1 from my point of view. I often run into this problem with point data visualization. This would be a good solution that should benefit many.

Cheers,
John

On Mar 11, 2010, at 3:30 AM, Marco Hugentobler wrote:

> Hi devs
> 
> Recently, I wrote a plugin to display point datasets where several point 
> features have the same position. With the normal display, it is hard to see if 
> several features overlap.
> The point displacement plugin draws (and optionally labels) such features in a 
> circle around the 'real' position. Background is the need to display where 
> school children live (maybe Andreas could give more details about it).
> 
> My question now is if people think this functionality is of common interest. 
> If yes, then it might be good to add it to core (or as a default plugin). If 
> not, then I could provide a windows dll if there is an interest.
> 
> The plugin sources can be downloaded from:
> www.hugis.net/point_displacement_renderer.tgz
> 
> 
> Looking forward for your feedback,
> Marco
> 
> -- 
> Dr. Marco Hugentobler
> HUGIS GmbH
> Webereistrasse 66
> CH-8134 Adliswil
> marco@hugis.net
> www.hugis.net
> Technical Advisor QGIS Project Steering Committee
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From cavallini at faunalia.it  Sat Mar 13 02:30:21 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sat Mar 13 02:30:41 2010
Subject: [Qgis-developer] point displacement renderer plugin
In-Reply-To: <C4EE6A9C-AFC9-45A8-8AE4-F73BA7B08E58@gmail.com>
References: <201003111230.14377.marco@hugis.net>
	<C4EE6A9C-AFC9-45A8-8AE4-F73BA7B08E58@gmail.com>
Message-ID: <4B9B3F0D.7060307@faunalia.it>

John C. Tull ha scritto:
> Hi Marco,
> 
> User feedback, but +1 from my point of view. I often run into this problem with point data visualization. This would be a good solution that should benefit many.

agreed, +1
Thanks Marco, and Andreas!
All the best.
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From cavallini at faunalia.it  Sat Mar 13 03:28:09 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sat Mar 13 03:28:29 2010
Subject: [Qgis-developer] Sponsors and Donors
Message-ID: <4B9B4C99.8000801@faunalia.it>

Hi all.
We welcome several new donors, and the second sponsor. See the web site for details.
Freshly compiled QGIS will show them also on the About window.
Thanks to them we will cover a part of the expenses for the next hackfest. Every user
is encouraged to add their donation to reach a full coverage for the event, and for
future ones.
All the best.
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From cavallini at faunalia.it  Sat Mar 13 03:30:46 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sat Mar 13 03:30:56 2010
Subject: [Qgis-developer] DONORS and SPONSORS
Message-ID: <4B9B4D36.8000207@faunalia.it>

Hi all.
Maintaining aligned the two DONORS and two SPONSORS lists (on the web pages and on
svn) is painful and error prone. Woud it be feasible to keep only one list (on svn)
and have it copied to the web automagically?
Alternatively, would you agree in removing the DONORS list from the web page, and
refer to the About menu only?
All the best.
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From cavallini at faunalia.it  Sat Mar 13 03:37:11 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sat Mar 13 03:37:18 2010
Subject: [Qgis-developer] preparation for the hackfest
Message-ID: <4B9B4EB7.1060009@faunalia.it>

Hi all.
For the hackfest, I would need:
- a list of devs seeking financial assistance for participation, and the amount
needed - I have to budget all the expenses, and until now nobody requested a precise
amount
- the list of nights for which the accommodation is needed, for each participant
(even if they plan to pay autonomously), to book the rooms
- if someone will come with his own car, I would need the plate number and model, in
order to get permission from Park authorities.
Please send everything before Monday evening.
Please write directly to me, both for privacy and not to flood the list.
All the best.
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From singarpita at gmail.com  Sat Mar 13 04:25:52 2010
From: singarpita at gmail.com (Arpita Singh)
Date: Sat Mar 13 04:25:55 2010
Subject: [Qgis-developer] fetch user clicked feature
Message-ID: <14ba7b971003130125w4549306eu42769cbf3584ba77@mail.gmail.com>

Hi All,
 I am trying to fetch the feature on which user click but I am able to fetch
features one by one not the the feature which is clicked by user please
help..

-- 
Regards
Arpita
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100313/f902f5c3/attachment.html
From cavallini at faunalia.it  Sat Mar 13 04:48:10 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sat Mar 13 04:48:17 2010
Subject: [Qgis-developer] preparation for the hackfest
In-Reply-To: <4B9B4EB7.1060009@faunalia.it>
References: <4B9B4EB7.1060009@faunalia.it>
Message-ID: <4B9B5F5A.3080306@faunalia.it>

Paolo Cavallini ha scritto:
> Hi all.
> For the hackfest, I would need:

I have ordered arrivals and departures, to better organize transfers:
http://www.qgis.org/wiki/3._QGIS_Hackfest_in_Pisa_2010#Table_of_arrivals_and_departures
Please check that I did no mistake, or you'll be stuck at the airport ;)
All the best.
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From giovanni.manghi at gmail.com  Sat Mar 13 07:22:40 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Sat Mar 13 07:22:48 2010
Subject: [Qgis-developer] Re: [Qgis-user] Re: gdal tools & osgeo4w
In-Reply-To: <1268471880456-4726761.post@n2.nabble.com>
References: <1267784233.6463.48.camel@sibirica>
	<22f0a52d1003050806s13e39b10jeff85b2774056aee@mail.gmail.com>
	<1267805374.6581.9.camel@sibirica> <20100305161454.GB3422@norbit.de>
	<1267807032.6581.16.camel@sibirica>
	<1268471880456-4726761.post@n2.nabble.com>
Message-ID: <1268482960.6410.129.camel@sibirica>

Hi,

On Sat, 2010-03-13 at 01:18 -0800, GFunvake wrote:
> I don't think the problem is in QGIS, I have the same issue in FWTools -
> actually tried QGIS to see if it works there.





Actually I don't have the same issue with fwtools, as a command that
doesn't works with gdal-tools plugin under gis/osgeo4w, with fwtools
works just fine. 

Issuing the same command using the osgeo4w binaries, from the command
line, still doesn't work.




I made a few tests using a fresh osgeo4w installations under XP:

*) If during qgis install with osgeo4w it is installed *just* the
library gdal16-python (so you have installed *just* gdal16), then all
the gdal utilities that are wrote in python fail do work. The error is
always like (both in the plugin and in the terminal using the osgeo4w
binaries):

------------------
'import site' failed; use -v for traceback
Traceback (most recent call last):
  File "c:/osgeo4w/apps/gdal-16/bin/gdal_merge.py", line 31, in <module>
    import gdal
ImportError: No module named gdal
------------------


*) so just to test, I installed also gdal-python (that obviously
installs also an older gdal version). 

The gdal utilities that are written in python stop to throw the above
error but still fail (actually gdal_merge works, but the others don't)
because - I guess- the plugin is written for gdal 1.6 and a number of
options are not available under older gdal releases. 

ex:

------------------
Traceback (most recent call last): 
File "C:\osgeo4w\apps\gdal-16\bin\gdal_proximity.py", line 170, in 
gdal.ComputeProximity( srcband, dstband, options, 
AttributeError: 'module' object has no attribute 'ComputeProximity' 
------------------

The other utilities (.exe) do still work.





Under Windows Seven, the situation is worst:

the behavior -with only gdal16-python or with also gdal-python- is the
same of XP, but there are other problems:


For example:

gdalinfo (both from the plugin or from the command line using the
osgeo4w binaries) returns

"gdalinfo.exe has stopped working"


in general every gdal utility that is not in python returns a message
like:

"gdalbuildvrt.exe has stopped working"

and then (in the plugin)

"The process crashed some time after starting successfully."

eventually they produce the output the right way in any case. 




Under Seven there seems to be a gdal_tools plugin problem for the merge
tool as it shows also this error

------------------
Traceback (most recent call last):
  File "C:\Users\gio\.qgis\python\plugins\GdalTools\tools\doMerge.py",
line 50, in fillInputFilesEdit
    (self.xmax, self.ymax, self.xmin, self.ymin) = self.getExtent()
  File "C:\Users\gio\.qgis\python\plugins\GdalTools\tools\doMerge.py",
line 119, in getExtent
    res = rect1.intersect( rect2 )
AttributeError: 'NoneType' object has no attribute 'intersect'
------------------

that in any case do not stop the tool to produce the ouput (if you have
installed gdal-python, and after having closed the error messages
produced by gdalinfo).



I would really appreciate if someone can help clarify the situation. I
have been able to replicate this problems in a number of different pcs
with windows (xp, vista, seven) and this make the gdal tools plugin
actually not usable on such platform (no problems under linux).



Cheers


-- Giovanni --

From giovanni.manghi at gmail.com  Sat Mar 13 07:44:01 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Sat Mar 13 07:44:08 2010
Subject: [Qgis-developer] point displacement renderer plugin
In-Reply-To: <201003111230.14377.marco@hugis.net>
References: <201003111230.14377.marco@hugis.net>
Message-ID: <1268484241.6410.133.camel@sibirica>

Hi Marco,


> My question now is if people think this functionality is of common interest. 
> If yes, then it might be good to add it to core (or as a default plugin).


also a user feedback here,
+1 very nice and useful indeed.


cheers

-- Giovanni --

From micha at arava.co.il  Sat Mar 13 08:26:48 2010
From: micha at arava.co.il (Micha Silver)
Date: Sat Mar 13 08:26:54 2010
Subject: [Qgis-developer] How to turn GRASS commands from tabs to a script?
	(where is toolbox metadata located?)
In-Reply-To: <25bc040b1003120734y64ef2ae8u5ee97a30050725e5@mail.gmail.com>
References: <25bc040b1003120734y64ef2ae8u5ee97a30050725e5@mail.gmail.com>
Message-ID: <4B9B9298.5030809@arava.co.il>

Stefan Keller wrote:

> Dear all
>
> I'm analyzing some data with grass within qgis. Now there's the grass
> plugin and it's toolbox. This opens nicely a new tab when issueing a
> new grass command, like r.in.ascii, then r.reclass, etc. There's also
> a "Browser" which displays every command as comment (e.g. aspect map
> elev = dhm@mymap zfactor = 1.00 min_slp_allowed = 0.000000").
>
> Now I want to automate this series of commands using a script (or a
> batch command)!
>
> How do I do that easiest?
>
>   
One way would be to run the GRASS commands in the Toolbox "shell" then 
use the 'history' command to display every command  you typed.  By 
redirecting the output of 'history' into a file, and making it 
executable, you'll have the start of a script.
> My approach would be to fetch the comment data from the GRASS plugin
> toolbox browser - but I can't find the location where this metadata is
> stored?
>
> -S.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> This mail was received via Mail-SeCure System.
>
>
>   


-- 
Micha Silver
Arava Development Co. +972-52-3665918
http://www.surfaces.co.il
 

From st_kiefer at web.de  Sat Mar 13 08:36:21 2010
From: st_kiefer at web.de (Stefan Kiefer)
Date: Sat Mar 13 08:37:12 2010
Subject: [Qgis-developer] How to turn GRASS commands from tabs to a
	script? (where is toolbox metadata located?)
In-Reply-To: <25bc040b1003120734y64ef2ae8u5ee97a30050725e5@mail.gmail.com>
References: <25bc040b1003120734y64ef2ae8u5ee97a30050725e5@mail.gmail.com>
Message-ID: <1268487381.2096.5.camel@Dafis00>

What about using grass directly? IF you work with unix like OS you
simply can write a script for automatisation (i.e. with perl, python or
shell-script). I think there is no need for bothering qgis for your
special needs. I belive under Windows is the same because there you also
should have installed Cygwin when Grass is installed.

cheers

Stefan

Am Freitag, den 12.03.2010, 16:34 +0100 schrieb Stefan Keller:

> Dear all
> 
> I'm analyzing some data with grass within qgis. Now there's the grass
> plugin and it's toolbox. This opens nicely a new tab when issueing a
> new grass command, like r.in.ascii, then r.reclass, etc. There's also
> a "Browser" which displays every command as comment (e.g. aspect map
> elev = dhm@mymap zfactor = 1.00 min_slp_allowed = 0.000000").
> 
> Now I want to automate this series of commands using a script (or a
> batch command)!
> 
> How do I do that easiest?
> 
> My approach would be to fetch the comment data from the GRASS plugin
> toolbox browser - but I can't find the location where this metadata is
> stored?
> 
> -S.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100313/107c98be/attachment.html
From brush.tyler at gmail.com  Sat Mar 13 13:02:11 2010
From: brush.tyler at gmail.com (Giuseppe Sucameli)
Date: Sat Mar 13 13:02:20 2010
Subject: [Qgis-developer] Re: [Qgis-user] Re: gdal tools & osgeo4w
In-Reply-To: <1268482960.6410.129.camel@sibirica>
References: <1267784233.6463.48.camel@sibirica>
	<22f0a52d1003050806s13e39b10jeff85b2774056aee@mail.gmail.com>
	<1267805374.6581.9.camel@sibirica> <20100305161454.GB3422@norbit.de>
	<1267807032.6581.16.camel@sibirica>
	<1268471880456-4726761.post@n2.nabble.com>
	<1268482960.6410.129.camel@sibirica>
Message-ID: <baea77b11003131002oea9bef4q6548120cd1846135@mail.gmail.com>

Hi all,

On Sat, Mar 13, 2010 at 1:22 PM, Giovanni Manghi
<giovanni.manghi@gmail.com>wrote:

> Under Windows Seven, the situation is worst:
>
> the behavior -with only gdal16-python or with also gdal-python- is the
> same of XP, but there are other problems:
>
>
> For example:
>
> gdalinfo (both from the plugin or from the command line using the
> osgeo4w binaries) returns
>
> "gdalinfo.exe has stopped working"
>
>
> in general every gdal utility that is not in python returns a message
> like:
>
> "gdalbuildvrt.exe has stopped working"
>
> and then (in the plugin)
>
> "The process crashed some time after starting successfully."
>
> eventually they produce the output the right way in any case.
>
I have the same problem.

In osgeo4w on Vista, each gdal16 .exe crashes before
it had finished, producing anyway a correct result.

Under Seven there seems to be a gdal_tools plugin problem for the merge
> tool as it shows also this error
>
> ------------------
> Traceback (most recent call last):
>  ...

File "...\.qgis\python\plugins\GdalTools\tools\doMerge.py",
> line 119, in getExtent
>    res = rect1.intersect( rect2 )
> AttributeError: 'NoneType' object has no attribute 'intersect'
> ------------------
>
> that in any case do not stop the tool to produce the ouput (if you have
> installed gdal-python, and after having closed the error messages
> produced by gdalinfo).
>
In gdaltools-plugin, Merge tools works fine but it calls the
gdalinfo.exe to get the input files' extents.
The error is due to the gdalinfo.exe crash and the merge's
"use intersected extents" option will never be enabled.

Cheers.

-- 
Giuseppe Sucameli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100313/1082b48b/attachment.html
From tech_dev at wildintellect.com  Sat Mar 13 14:00:35 2010
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Sat Mar 13 14:00:58 2010
Subject: [Qgis-developer] point displacement renderer plugin
In-Reply-To: <201003111230.14377.marco@hugis.net>
References: <201003111230.14377.marco@hugis.net>
Message-ID: <4B9BE0D3.1020902@wildintellect.com>

On 03/11/2010 03:30 AM, Marco Hugentobler wrote:
> Hi devs
> 
> Recently, I wrote a plugin to display point datasets where several point 
> features have the same position. With the normal display, it is hard to see if 
> several features overlap.
> The point displacement plugin draws (and optionally labels) such features in a 
> circle around the 'real' position. Background is the need to display where 
> school children live (maybe Andreas could give more details about it).
> 
> My question now is if people think this functionality is of common interest. 
> If yes, then it might be good to add it to core (or as a default plugin). If 
> not, then I could provide a windows dll if there is an interest.
> 
> The plugin sources can be downloaded from:
> www.hugis.net/point_displacement_renderer.tgz
> 
> 
> Looking forward for your feedback,
> Marco
> 

Another use to this type of methodology I saw in use recently is when
working with line layers that are road networks. Sometimes you need
mulitple parrallel lines of differing colors for some segments. Think of
subway, bus or other transit maps where several lines share part of
their routes and you want to show them all together.

An alternative visual to the one you have that might also be useful
would be a clustering algorithm that combines overlapping or neighboring
points into one symbol that automatically scales in size based on the
number aggregated.

Just some ideas.

Thanks,
Alex
From gsherman at mrcc.com  Sat Mar 13 16:04:28 2010
From: gsherman at mrcc.com (Gary Sherman)
Date: Sat Mar 13 16:10:46 2010
Subject: [Qgis-developer] Python import error on OS X
Message-ID: <ceb0de271003131304x2ef157dai9772c9a464d4d52e@mail.gmail.com>

On OS X using the standalone build (1.4) from KyngChaos:

from qgis.core import *
TypeError: metaclass conflict: the metaclass of a derived class must
be a (non-strict) subclass of the metaclasses of all its bases

Any ideas?

-- 
-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
Gary Sherman
Chair, QGIS Project Steering Committee
-Desktop GIS Book:
 *http://desktopgisbook.com
-Spatial Hosting:
 *http://mrcc.com/hosting
"We work virtually everywhere"
-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
From a.neumann at carto.net  Sun Mar 14 07:48:10 2010
From: a.neumann at carto.net (Andreas Neumann)
Date: Sun Mar 14 07:48:29 2010
Subject: [Qgis-developer] point displacement renderer plugin
In-Reply-To: <4B9BE0D3.1020902@wildintellect.com>
References: <201003111230.14377.marco@hugis.net>
	<4B9BE0D3.1020902@wildintellect.com>
Message-ID: <4B9CCCFA.3090502@carto.net>


> Another use to this type of methodology I saw in use recently is when
> working with line layers that are road networks. Sometimes you need
> mulitple parrallel lines of differing colors for some segments. Think of
> subway, bus or other transit maps where several lines share part of
> their routes and you want to show them all together.
>
>   
right - but this is an entirely different problem than the 
point-displacement render for point symbols that simply places points on 
a circle around the original center point.

What you describe above is more complex where you'd also want your 
bus-lines to have minimal intersections - a problem that is today 
typically still solved by human brains instead of computers ...
> An alternative visual to the one you have that might also be useful
> would be a clustering algorithm that combines overlapping or neighboring
> points into one symbol that automatically scales in size based on the
> number aggregated.
>   
right - but how would you display different attributes then? It would 
probably work for one attribute but would be more complicated for two or 
more attributes.

In our case we want to display both language and sex (male/female). 
Combining that into one shape would be problematic.

Quite some interesting problems though ...

Andreas
From sfkeller at gmail.com  Sun Mar 14 12:25:01 2010
From: sfkeller at gmail.com (Stefan Keller)
Date: Sun Mar 14 12:25:04 2010
Subject: [Qgis-developer] How to turn GRASS commands from tabs to a 
	script? (where is toolbox metadata located?)
In-Reply-To: <1268487381.2096.5.camel@Dafis00>
References: <25bc040b1003120734y64ef2ae8u5ee97a30050725e5@mail.gmail.com>
	<1268487381.2096.5.camel@Dafis00>
Message-ID: <25bc040b1003140925q61e20a0bofb644d0c59a134cb@mail.gmail.com>

Many thanks to Micha and Stefan!

I'm a GRASS and QGIS noob using GRASS shell (text interface) was what
I thought of initially.
@Micha Silver: I hope that's what you mean by [GRASS commands in the
Toolbox "shell"]?

I'm looking for a generic solution which works the same on Unix and
Windows. (Btw. Cygwin is no option for productive use and delivery -
serious cross-platform project must offer standalone executables).

Still, I am little bit unsettled since I thought it would be easier to
automate a tool like GRASS which is text command based...

See below my solution so far. It's not yet really working because it
seems that only r.in.* commands put itself into the comments section
beginning with line 9 (in hist subdirectory of a GRASS mapset).

Any GRASS wizards around?

-S.

--- FILE: gen-grass-shell-script.py ---
#  gen-grass-shell-script.py
#
# Generates a GRASS shell script from GRASS raster layer descriptions
(to be run from GRASS shell)
#
# Created 2010 by SFK, www.gis.hsr.ch. LGPL.
#
# USAGE:
#  1. from OS shell: > python gen-grass-shell-script.py > gen-mylayers.sh
#  2. edit gen-mylayers.sh if needed
#  3. start GRASS shell (text interface): sh gen-mylayers.sh
#
# TODO: extract commands like aspect from line 8 or so.
# TODO: Cleanup code.

import glob
from datetime import date
import os

# *** edit these constants first **
GISDBASE = d:/gis/labs/raster_lab/grassdata/'
LOCATION = 'gaemse'
MAPSET = 'gaemse'
# *** end of user edit block **

print "#!/bin/sh"
print "# Script generated on " + date.today().strftime("%d %b %Y")
print "# Location: " + LOCATION + ", Map: " + MAPSET
print
for filepath in glob.glob(GISDBASE + LOCATION + '/' + MAPSET + '/hist/*'):
    f = open(filepath)
    i = 0;
    cmd = "";
    for line in f:
        i = i + 1
        line = line.rstrip('\n')
        if (i == 8):
            generatedby = line
        if (i >= 9):
            if (line == ""):
                continue
            if (line[-1] == "\\"):
                cmd = cmd + line[:-1]
            else:
                cmd = cmd + line + " "
    if (i >= 8):
        print "# Layer " + os.path.basename(filepath)
        print "# " + generatedby
        print cmd
        print

# Example output:
# > python gen-grass-shell-script.py > gen-mylayers.sh
# #!/bin/sh
# # Script generated on 14 Mar 2010
# # Location: gaemse, Map: gaemse
#
# # Layer as85
# # generated by r.in.gdal
# r.in.gdal -o input="d:/gis/labs/raster_lab/datasource/as85.txt" output="as85"
#
# # Layer aspect
# # generated by r.slope.aspect
# aspect map elev = my_dhm@user1 zfactor = 1.00 min_slp_allowed = 0.000000
#  ...
---


2010/3/13 Stefan Kiefer <st_kiefer@web.de>:
> What about using grass directly? IF you work with unix like OS you simply
> can write a script for automatisation (i.e. with perl, python or
> shell-script). I think there is no need for bothering qgis for your special
> needs. I belive under Windows is the same because there you also should have
> installed Cygwin when Grass is installed.
>
> cheers
>
> Stefan
>
> Am Freitag, den 12.03.2010, 16:34 +0100 schrieb Stefan Keller:
>
> Dear all
> I'm analyzing some data with grass within qgis. Now there's the grass
> plugin and it's toolbox. This opens nicely a new tab when issueing a
> new grass command, like r.in.ascii, then r.reclass, etc. There's also
> a "Browser" which displays every command as comment (e.g. aspect map
> elev = dhm@mymap
>  zfactor = 1.00 min_slp_allowed = 0.000000").
> Now I want to automate this series of commands using a script (or a
> batch command)!
> How do I do that easiest?
> My approach would be to fetch the comment data from the GRASS plugin
> toolbox browser - but I can't find the location where this metadata is
> stored?
> -S.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
From micha at arava.co.il  Sun Mar 14 12:59:39 2010
From: micha at arava.co.il (Micha Silver)
Date: Sun Mar 14 12:59:44 2010
Subject: [Qgis-developer] How to turn GRASS commands from tabs to a script?
	(where is toolbox metadata located?)
In-Reply-To: <25bc040b1003140925q61e20a0bofb644d0c59a134cb@mail.gmail.com>
References: <25bc040b1003120734y64ef2ae8u5ee97a30050725e5@mail.gmail.com>	<1268487381.2096.5.camel@Dafis00>
	<25bc040b1003140925q61e20a0bofb644d0c59a134cb@mail.gmail.com>
Message-ID: <4B9D15FB.3030509@arava.co.il>

Stefan Keller wrote:
> Many thanks to Micha and Stefan!
>
> I'm a GRASS and QGIS noob using GRASS shell (text interface) was what
> I thought of initially.
> @Micha Silver: I hope that's what you mean by [GRASS commands in the
> Toolbox "shell"]?
>
> I'm looking for a generic solution which works the same on Unix and
> Windows. (Btw. Cygwin is no option for productive use and delivery -
> serious cross-platform project must offer standalone executables).
>
> Still, I am little bit unsettled since I thought it would be easier to
> automate a tool like GRASS which is text command based...
>
> See below my solution so far. It's not yet really working because it
> seems that only r.in.* commands put itself into the comments section
> beginning with line 9 (in hist subdirectory of a GRASS mapset).
>
>   
I think the file you want to be looking at is
$GISDBASE/$LOCATION_NAME/$MAPSET/.bash_history

> Any GRASS wizards around?
>
> -S.
>
> --- FILE: gen-grass-shell-script.py ---
> #  gen-grass-shell-script.py
> #
> # Generates a GRASS shell script from GRASS raster layer descriptions
> (to be run from GRASS shell)
> #
> # Created 2010 by SFK, www.gis.hsr.ch. LGPL.
> #
> # USAGE:
> #  1. from OS shell: > python gen-grass-shell-script.py > gen-mylayers.sh
> #  2. edit gen-mylayers.sh if needed
> #  3. start GRASS shell (text interface): sh gen-mylayers.sh
> #
> # TODO: extract commands like aspect from line 8 or so.
> # TODO: Cleanup code.
>
> import glob
> from datetime import date
> import os
>
> # *** edit these constants first **
> GISDBASE = d:/gis/labs/raster_lab/grassdata/'
> LOCATION = 'gaemse'
> MAPSET = 'gaemse'
> # *** end of user edit block **
>
> print "#!/bin/sh"
> print "# Script generated on " + date.today().strftime("%d %b %Y")
> print "# Location: " + LOCATION + ", Map: " + MAPSET
> print
> for filepath in glob.glob(GISDBASE + LOCATION + '/' + MAPSET + '/hist/*'):
>     f = open(filepath)
>     i = 0;
>     cmd = "";
>     for line in f:
>         i = i + 1
>         line = line.rstrip('\n')
>         if (i == 8):
>             generatedby = line
>         if (i >= 9):
>             if (line == ""):
>                 continue
>             if (line[-1] == "\\"):
>                 cmd = cmd + line[:-1]
>             else:
>                 cmd = cmd + line + " "
>     if (i >= 8):
>         print "# Layer " + os.path.basename(filepath)
>         print "# " + generatedby
>         print cmd
>         print
>
> # Example output:
> # > python gen-grass-shell-script.py > gen-mylayers.sh
> # #!/bin/sh
> # # Script generated on 14 Mar 2010
> # # Location: gaemse, Map: gaemse
> #
> # # Layer as85
> # # generated by r.in.gdal
> # r.in.gdal -o input="d:/gis/labs/raster_lab/datasource/as85.txt" output="as85"
> #
> # # Layer aspect
> # # generated by r.slope.aspect
> # aspect map elev = my_dhm@user1 zfactor = 1.00 min_slp_allowed = 0.000000
> #  ...
> ---
>
>
> 2010/3/13 Stefan Kiefer <st_kiefer@web.de>:
>   
>> What about using grass directly? IF you work with unix like OS you simply
>> can write a script for automatisation (i.e. with perl, python or
>> shell-script). I think there is no need for bothering qgis for your special
>> needs. I belive under Windows is the same because there you also should have
>> installed Cygwin when Grass is installed.
>>
>> cheers
>>
>> Stefan
>>
>> Am Freitag, den 12.03.2010, 16:34 +0100 schrieb Stefan Keller:
>>
>> Dear all
>> I'm analyzing some data with grass within qgis. Now there's the grass
>> plugin and it's toolbox. This opens nicely a new tab when issueing a
>> new grass command, like r.in.ascii, then r.reclass, etc. There's also
>> a "Browser" which displays every command as comment (e.g. aspect map
>> elev = dhm@mymap
>>  zfactor = 1.00 min_slp_allowed = 0.000000").
>> Now I want to automate this series of commands using a script (or a
>> batch command)!
>> How do I do that easiest?
>> My approach would be to fetch the comment data from the GRASS plugin
>> toolbox browser - but I can't find the location where this metadata is
>> stored?
>> -S.
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>>     
>
> This mail was received via Mail-SeCure System.
>
>
>   


-- 
Micha Silver
Arava Development Co. +972-52-3665918
http://surfaces.co.il


From tech_dev at wildintellect.com  Sun Mar 14 17:25:17 2010
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Sun Mar 14 17:25:21 2010
Subject: [Qgis-developer] point displacement renderer plugin
In-Reply-To: <4B9CCCFA.3090502@carto.net>
References: <201003111230.14377.marco@hugis.net>
	<4B9BE0D3.1020902@wildintellect.com> <4B9CCCFA.3090502@carto.net>
Message-ID: <4B9D543D.9040602@wildintellect.com>

Andreas Neumann wrote:
> 
>> Another use to this type of methodology I saw in use recently is when
>> working with line layers that are road networks. Sometimes you need
>> mulitple parrallel lines of differing colors for some segments. Think of
>> subway, bus or other transit maps where several lines share part of
>> their routes and you want to show them all together.
>>
>>   
> right - but this is an entirely different problem than the
> point-displacement render for point symbols that simply places points on
> a circle around the original center point.
> 
> What you describe above is more complex where you'd also want your
> bus-lines to have minimal intersections - a problem that is today
> typically still solved by human brains instead of computers ...
>> An alternative visual to the one you have that might also be useful
>> would be a clustering algorithm that combines overlapping or neighboring
>> points into one symbol that automatically scales in size based on the
>> number aggregated.
>>   
> right - but how would you display different attributes then? It would
> probably work for one attribute but would be more complicated for two or
> more attributes.
> 
> In our case we want to display both language and sex (male/female).
> Combining that into one shape would be problematic.
> 
> Quite some interesting problems though ...
> 
> Andreas

For your use case I have seen point based pie charts before, yet another
way. Don't get me wrong I was just adding ideas for more tools in
addition to this one.

It's all quite complicated cartography.

Thanks,
Alex
From JPalmer at linz.govt.nz  Sun Mar 14 19:56:23 2010
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Sun Mar 14 19:56:27 2010
Subject: [Qgis-developer] PostGIS provider estimated extent
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E064E0C7DB1@prdlsmmsg01.ad.linz.govt.nz>

Hi,

I was just wondering about the purpose of r13014 which implemented a "setNoExtentEstimate" flag for a PostgreSQL connection. 

I have a little issue with this when used in conjunction with the new use estimated metadata provider option. Because the PostgreSQL connections are pooled for the postgres provider, it is possible to have the connection "hasNoExtentEstimate" flag indefinitely set when you can't get a result back from estimated_extent function for a table (see line 2777 of qgspostgresprovider.cpp). Then any new postgresprovider objects that are later created using this same pooled connection can not use the estimated_extent function, even if the database table has been appropriately analysed.

Cheers,
Jeremy

______________________________________________________________________________________________________

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank you.
______________________________________________________________________________________________________
From luca_manganelli at comune.trento.it  Mon Mar 15 03:21:20 2010
From: luca_manganelli at comune.trento.it (luca_manganelli@comune.trento.it)
Date: Mon Mar 15 03:21:25 2010
Subject: [Qgis-developer] QgsMapCanvasSnapper "error"
In-Reply-To: <14ba7b971003130121h7a605e5fyceb2052c54e4443b@mail.gmail.com>
Message-ID: <OF76CD99D5.ECE4483F-ONC12576E7.00278B1C-C12576E7.002867D1@comune.trento.it>

do you have these lines:

 from qgis.core import *
 from qgis.gui import *

at beginning of the source code?

Arpita Singh <singarpita@gmail.com> scritti il 13/03/2010 10.21.37

> snap = QgsMapCanvasSnapper()
> error"QgsMapCanvasSnapper() not defined"
>
> --
> Regards
> Arpita

From giovanni.manghi at gmail.com  Mon Mar 15 05:41:54 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Mon Mar 15 05:42:03 2010
Subject: [Qgis-developer] Re: [Qgis-user] gdalbuildvrt on win7 crashes
In-Reply-To: <baea77b11003131103x392ef156oc231a6308a003238@mail.gmail.com>
References: <a6be4ba41003131021g1fc710d4r1e5cf6fccd35700a@mail.gmail.com>
	<baea77b11003131103x392ef156oc231a6308a003238@mail.gmail.com>
Message-ID: <1268646114.6410.27.camel@sibirica>

Hi,


> All gdal .exe tools (buildvrt, contour, rasterize, 
> nearblack, warp, grid, translate, information, 
> assign projection, build overviews) display this 
> error, but they return also a correct result, so 
> you can load the output result by adding the output 
> as raster/vector layer.
> 
> We're trying to find a solution soon.


fwtools (2.4.7) .exe tools seems to work fine under Vista/Seven.


cheers

-- Giovanni --



From micha at arava.co.il  Mon Mar 15 05:47:20 2010
From: micha at arava.co.il (Micha Silver)
Date: Mon Mar 15 05:47:23 2010
Subject: [Qgis-developer] editing nodes
Message-ID: <4B9E0228.1080906@arava.co.il>

I find that the new arrangement for editing nodes in a polygon or line 
feature is more difficult that before. Previously there was a set a 
buttons for moving nodes, deleting nodes, etc. Now there's the single 
"node tool" button. When clicking on a node, all nodes become red 
squares, and it's not clear how to select/move/delete a single node.  A 
second click seems to always select (change to blue color) a line 
*segment*, i.e. two nodes. Then any action - moving, etc - applies to 
both nodes.

Am I missing something? How do I select a single node?

The old multiple button toolbar seemed to me much more obvious.

Thanks,

Micha

-- 
Micha Silver
http://www.surfaces.co.il/
Arava Development Co.  +972-52-3665918

From giovanni.manghi at gmail.com  Mon Mar 15 05:53:31 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Mon Mar 15 05:53:37 2010
Subject: [Qgis-developer] editing nodes
In-Reply-To: <4B9E0228.1080906@arava.co.il>
References: <4B9E0228.1080906@arava.co.il>
Message-ID: <1268646811.6410.33.camel@sibirica>

Hi,

On Mon, 2010-03-15 at 11:47 +0200, Micha Silver wrote:
> I find that the new arrangement for editing nodes in a polygon or line 
> feature is more difficult that before. Previously there was a set a 
> buttons for moving nodes, deleting nodes, etc. Now there's the single 
> "node tool" button. When clicking on a node, all nodes become red 
> squares, and it's not clear how to select/move/delete a single node.  A 
> second click seems to always select (change to blue color) a line 
> *segment*, i.e. two nodes. Then any action - moving, etc - applies to 
> both nodes.
> 
> Am I missing something? How do I select a single node?


after having all nodes red, if you click once on a node this become
selected (blue) (if you then press ctrl you can selected multiple
nodes). If you click once between two nodes the segment between the
nodes is select.

It also took to me a couple of days to get used when it was introduced.
Actually new qgis users found the node tool pretty good.

cheers

-- Giovanni --

From micha at arava.co.il  Mon Mar 15 06:09:57 2010
From: micha at arava.co.il (Micha Silver)
Date: Mon Mar 15 06:10:01 2010
Subject: [Qgis-developer] editing nodes
In-Reply-To: <1268646811.6410.33.camel@sibirica>
References: <4B9E0228.1080906@arava.co.il> <1268646811.6410.33.camel@sibirica>
Message-ID: <4B9E0775.1030103@arava.co.il>

On 15/03/2010 11:53, Giovanni Manghi wrote:
> Hi,
>
> On Mon, 2010-03-15 at 11:47 +0200, Micha Silver wrote:
>    
>> I find that the new arrangement for editing nodes in a polygon or line
>> feature is more difficult that before. Previously there was a set a
>> buttons for moving nodes, deleting nodes, etc. Now there's the single
>> "node tool" button. When clicking on a node, all nodes become red
>> squares, and it's not clear how to select/move/delete a single node.  A
>> second click seems to always select (change to blue color) a line
>> *segment*, i.e. two nodes. Then any action - moving, etc - applies to
>> both nodes.
>>
>> Am I missing something? How do I select a single node?
>>      
>
> after having all nodes red, if you click once on a node this become
> selected (blue) (if you then press ctrl you can selected multiple
> nodes). If you click once between two nodes the segment between the
> nodes is select.
>
>    
Thanks.
Often I get two nodes (line segment) selected blue instead of just the 
single node. Maybe it's a snapping tolerance prob?
> It also took to me a couple of days to get used when it was introduced.
> Actually new qgis users found the node tool pretty good.
>
> cheers
>
> -- Giovanni --
>
>
> This mail was received via Mail-SeCure System.
>
>
>    


-- 
Micha Silver
http://www.surfaces.co.il/
Arava Development Co.  +972-52-3665918

From jef at norbit.de  Mon Mar 15 11:32:52 2010
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Mon Mar 15 11:33:12 2010
Subject: [Qgis-developer] PostGIS provider estimated extent
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E064E0C7DB1@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E064E0C7DB1@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <20100315153252.GA5299@norbit.de>

Hi Jeremy,

On Mon, 15. Mar 2010 at 12:56:23 +1300, Jeremy Palmer wrote:
> I was just wondering about the purpose of r13014 which implemented a
> "setNoExtentEstimate" flag for a PostgreSQL connection. 

> I have a little issue with this when used in conjunction with the new use
> estimated metadata provider option.  Because the PostgreSQL connections are
> pooled for the postgres provider, it is possible to have the connection
> "hasNoExtentEstimate" flag indefinitely set when you can't get a result back
> from estimated_extent function for a table (see line 2777 of
> qgspostgresprovider.cpp).

Yes.  That was the problem.  Trying to use estimates without actually having
any caused the query to fail.  That also invalidates all open cursors.  The
idea was that either all or no tables have estimates.   In the latter case the
very first query would fail and subsequent queries wouldn't try to use
estimates.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From micha at arava.co.il  Mon Mar 15 15:38:05 2010
From: micha at arava.co.il (Micha Silver)
Date: Mon Mar 15 15:38:12 2010
Subject: [Qgis-developer] Re: [Qgis-user] Sponsors and Donors
In-Reply-To: <4B9E3290.2050206@tamu.edu>
References: <4B9B4C99.8000801@faunalia.it> <4B9E3290.2050206@tamu.edu>
Message-ID: <4B9E8C9D.4060207@arava.co.il>

Gerry Creager wrote:
> Paolo Cavallini wrote:
>> Hi all.
>> We welcome several new donors, and the second sponsor. See the web 
>> site for details.
>> Freshly compiled QGIS will show them also on the About window.
>> Thanks to them we will cover a part of the expenses for the next 
>> hackfest. Every user
>> is encouraged to add their donation to reach a full coverage for the 
>> event, and for
>> future ones.
>> All the best.
>
> Is anyone working to package QGis for RHEL/CentOS? That would make its 
> use much easier for me (as it once was, but alas, not now). And THAT 
> would make donation easier to live with.
>
It's not that easy. QGIS (like all GIS software) has a long list of 
dependancies, many of which have jumped ahead of the versions in the 
standard CentOS installation. So its' not just packaging QGIS, but many  
software libraries as well. Just one example: QGIS now needs Qt4 but the 
base CentOS repo uses Qt3.3. You can find most everything you need from 
3rd party repos, and compile the rest, but it's certainly much more than 
a 'yum install ...'.

I expect package maintainers are waiting for CentOS 6, then they can 
start to work on a CentOSGIS, like UbuntuGIS. 
> I already recommend QGis to anyone who asks me, but I can't easily use 
> it right now myself!
>
> Thanks gerry
> _______________________________________________
> Qgis-user mailing list
> Qgis-user@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-user
>
> This mail was received via Mail-SeCure System.
>
>


-- 
Micha Silver
Arava Development Co. +972-52-3665918
http://surfaces.co.il


From radim.blazek at gmail.com  Mon Mar 15 16:10:49 2010
From: radim.blazek at gmail.com (Radim Blazek)
Date: Mon Mar 15 16:10:55 2010
Subject: [Qgis-developer] GRASS requirements changed
Message-ID: <340505ef1003151310o70a4129dg9462f7e239fa6eb6@mail.gmail.com>

1) GDAL-GRASS driver is no more required, GRASS rasters are accessed
directly using GRASS libs not via GDAL

2) GRASS libraries must be compiled with exceptions support. This was
always required, but it was not explicitly stated in INSTALL.
On Linux with gcc just run GRASS configure with additional CFLAG:
    CFLAGS="-fexceptions" ./configure ....
On windows it seems to work without special options (at least in
osgeo4w, Jef, which compiler are you using?)
I have no idea about OSX, here is small test package
http://trac.osgeo.org/qgis/attachment/ticket/1878/except.tar

The reason for this requirement is, that GRASS G_fatal_error is
calling exit() and the only way to avoid QGIS exit on every error in
GRASS (which does not have to be necessarily fatal for QGIS, e.g.
cannot open layer ...) is to set custom error routine (
G_set_error_routine) which throws c++ exception which is caught in
QGIS-GRASS plugin. To support this, GRASS libs (which are in C) must
be compiled with support for exceptions.

I have modified doc/INSTALL.t2t

Radim
From jef at norbit.de  Mon Mar 15 16:42:53 2010
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Mon Mar 15 16:43:13 2010
Subject: [Qgis-developer] GRASS requirements changed
In-Reply-To: <340505ef1003151310o70a4129dg9462f7e239fa6eb6@mail.gmail.com>
References: <340505ef1003151310o70a4129dg9462f7e239fa6eb6@mail.gmail.com>
Message-ID: <20100315204253.GA4638@norbit.de>

Hi Radim,

On Mon, 15. Mar 2010 at 21:10:49 +0100, Radim Blazek wrote:
> On windows it seems to work without special options (at least in
> osgeo4w, Jef, which compiler are you using?)

Visual C++ 8.0 for QGIS and mingw's gcc 3.4.5.

FTR it also works w/o -fexception for me on 64bit Linux.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From cavallini at faunalia.it  Tue Mar 16 07:34:28 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue Mar 16 07:34:46 2010
Subject: [Qgis-developer] hostel booking
Message-ID: <4B9F6CC4.7000309@faunalia.it>

Hi all.
Just to inform the participants to the hackfest: the booking is confirmed, without
problems. I updated the wiki with some details, if you need more info just let me know.
All the best.
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From giovanni.manghi at gmail.com  Tue Mar 16 09:39:08 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Tue Mar 16 09:39:16 2010
Subject: [Qgis-developer] GRASS requirements changed
In-Reply-To: <340505ef1003151310o70a4129dg9462f7e239fa6eb6@mail.gmail.com>
References: <340505ef1003151310o70a4129dg9462f7e239fa6eb6@mail.gmail.com>
Message-ID: <1268746748.6640.336.camel@sibirica>

Hi,


On Mon, 2010-03-15 at 21:10 +0100, Radim Blazek wrote:
> 1) GDAL-GRASS driver is no more required, GRASS rasters are accessed
> directly using GRASS libs not via GDAL...


The new GRASS provider solved  many problems, especially a few nasty
bugs that made many GRASS modules not usable under Vista and Seven
(caused qgis to crash). See for example #1945 and #2028.

Moreover it "solved" a QGIS critical bug that was not yet spotted:
basically after closing a mapset (and leaving a GRASS raster in the
legend), clicking on the canvas with a tool such the identify tool, made
qgis crash. You can spot this bug in QGIS 1.4.

Nevertheless there are a few consequences in the QGIS "raster layer
properties" that would need a fix, at least in the interface.

In short, the symbology, transparency and colormap menus now make a
little sense for GRASS rasters as the options in there are not working
except for the "global transparency" slider.

It would be useful to have back, if possible, the "transparent pixel
list" and the colormap table.



In any case the qgis "raster layer properties" should be reorganized
(simplified?) for GRASS rasters because as is now in trunk is puzzling
for users.



I would like also to point that with the new GRASS raster provider an
important plugin stopped to work (with GRASS rasters): "value tool".

this plugin is kind of fundamental when doing raster analysis/models,
and considered the number of tools available in the GRASS toolbox it is
highly probable you are doing it with GRASS rasters.

Using the identify tool to see raster values in a certain point is not
really an option.

I would be really happy if this issues will be approached in the next
dev meeting.




thanks in advance

-- Giovanni --

From yves.bolognini at camptocamp.com  Tue Mar 16 10:05:19 2010
From: yves.bolognini at camptocamp.com (Yves Bolognini)
Date: Tue Mar 16 10:05:21 2010
Subject: [Qgis-developer] Python plugin menu questions
Message-ID: <7fb3a4e61003160705he776fcbv9a2c3c3e459372ea@mail.gmail.com>

Hi List,

I'm trying to modify QGIS menus through a Python plugin. I understood
that QgisInterface's xxxMenu properties contain the menus and that I
can use these properties to change menu contents. But I can't figure
out how to:

1) Remove/hide an entire menu, like the Edit menu
2) Remove/hide the contextual menu entries "Show Overview" (contextual
toolbar menu) and "Add to Overview" (contextual layer menu). Actually
I need to completely disable the overview, so it includes removing
these menu entries

Many thanks in advance
Yves
From marco at hugis.net  Tue Mar 16 10:17:54 2010
From: marco at hugis.net (Marco Hugentobler)
Date: Tue Mar 16 10:18:17 2010
Subject: [Qgis-developer] GRASS requirements changed
In-Reply-To: <1268746748.6640.336.camel@sibirica>
References: <340505ef1003151310o70a4129dg9462f7e239fa6eb6@mail.gmail.com>
	<1268746748.6640.336.camel@sibirica>
Message-ID: <201003161517.55027.marco@hugis.net>

Hi

I'd like to discuss a raster redesign for 2.0 at the hackfest. I think a lot 
of the problems described come from the fact that the current raster provider 
is limited and makes sense only for image providers (e.g. WMS).
But this is more a long-term approach.

Regards,
Marco

Am Dienstag, 16. M?rz 2010 14.39:08 schrieb Giovanni Manghi:
> Hi,
> 
> On Mon, 2010-03-15 at 21:10 +0100, Radim Blazek wrote:
> > 1) GDAL-GRASS driver is no more required, GRASS rasters are accessed
> > directly using GRASS libs not via GDAL...
> 
> The new GRASS provider solved  many problems, especially a few nasty
> bugs that made many GRASS modules not usable under Vista and Seven
> (caused qgis to crash). See for example #1945 and #2028.
> 
> Moreover it "solved" a QGIS critical bug that was not yet spotted:
> basically after closing a mapset (and leaving a GRASS raster in the
> legend), clicking on the canvas with a tool such the identify tool, made
> qgis crash. You can spot this bug in QGIS 1.4.
> 
> Nevertheless there are a few consequences in the QGIS "raster layer
> properties" that would need a fix, at least in the interface.
> 
> In short, the symbology, transparency and colormap menus now make a
> little sense for GRASS rasters as the options in there are not working
> except for the "global transparency" slider.
> 
> It would be useful to have back, if possible, the "transparent pixel
> list" and the colormap table.
> 
> 
> 
> In any case the qgis "raster layer properties" should be reorganized
> (simplified?) for GRASS rasters because as is now in trunk is puzzling
> for users.
> 
> 
> 
> I would like also to point that with the new GRASS raster provider an
> important plugin stopped to work (with GRASS rasters): "value tool".
> 
> this plugin is kind of fundamental when doing raster analysis/models,
> and considered the number of tools available in the GRASS toolbox it is
> highly probable you are doing it with GRASS rasters.
> 
> Using the identify tool to see raster values in a certain point is not
> really an option.
> 
> I would be really happy if this issues will be approached in the next
> dev meeting.
> 
> 
> 
> 
> thanks in advance
> 
> -- Giovanni --
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

-- 
Dr. Marco Hugentobler
HUGIS GmbH
Webereistr. 66
CH-8134 Adliswil
marco@hugis.net
www.hugis.net
Technical Advisor QGIS Project Steering Committee
From jctull at gmail.com  Tue Mar 16 11:52:31 2010
From: jctull at gmail.com (John C. Tull)
Date: Tue Mar 16 11:52:38 2010
Subject: [Qgis-developer] GRASS requirements changed
In-Reply-To: <340505ef1003151310o70a4129dg9462f7e239fa6eb6@mail.gmail.com>
References: <340505ef1003151310o70a4129dg9462f7e239fa6eb6@mail.gmail.com>
Message-ID: <327F770B-1F06-4611-BC1D-A8FA718846D9@gmail.com>

Hi Radim,

I built trunk on my OS X system. I tested the provider on a grass location that is in EPSG 26911. I set the project to that epsg code, but I get this error when trying to load a raster:

Cannot draw raster
Cannot start module
command: /Applications/qgis1.5.0.app/Contents/MacOS/share/qgis/grass/modules/qgis.d.rast map=angrin_gb@jctull window=739283,4.00302e+06,765408,4.07309e+06,320,859<br><br>WARNING: Raster map <angrin_gb@jctull@jctull> is in different zone (11)
than current region (0)
WARNING: Unable to open raster map <angrin_gb@jctull@jctull>
ERROR: Unable to open raster map <angrin_gb@jctull

The raster shows up as a gray box. The same is true of other grass rasters I tried to load.

Regards,
John

On Mar 15, 2010, at 1:10 PM, Radim Blazek wrote:

> 1) GDAL-GRASS driver is no more required, GRASS rasters are accessed
> directly using GRASS libs not via GDAL
> 
> 2) GRASS libraries must be compiled with exceptions support. This was
> always required, but it was not explicitly stated in INSTALL.
> On Linux with gcc just run GRASS configure with additional CFLAG:
>    CFLAGS="-fexceptions" ./configure ....
> On windows it seems to work without special options (at least in
> osgeo4w, Jef, which compiler are you using?)
> I have no idea about OSX, here is small test package
> http://trac.osgeo.org/qgis/attachment/ticket/1878/except.tar
> 
> The reason for this requirement is, that GRASS G_fatal_error is
> calling exit() and the only way to avoid QGIS exit on every error in
> GRASS (which does not have to be necessarily fatal for QGIS, e.g.
> cannot open layer ...) is to set custom error routine (
> G_set_error_routine) which throws c++ exception which is caught in
> QGIS-GRASS plugin. To support this, GRASS libs (which are in C) must
> be compiled with support for exceptions.
> 
> I have modified doc/INSTALL.t2t
> 
> Radim
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From singarpita at gmail.com  Tue Mar 16 14:34:14 2010
From: singarpita at gmail.com (Arpita Singh)
Date: Tue Mar 16 14:34:17 2010
Subject: [Qgis-developer] Get Feature Id on clicked point
Message-ID: <14ba7b971003161134q44fa54bewd2819f3086d47ee@mail.gmail.com>

Hi All
I am trying to build an application in which I am unable to retrieve the
featureId of the Feature at user clicked point, instead it is giving
featureId one by one sequentially...
can any one help by giving some code in python.
My function is given as:
def sel1(self,p,b):

transform = self.canvas.getCoordinateTransform()
mapPoint = transform.toMapCoordinates(p.x(),p.y())



provider = layer.getDataProvider()


   feat = QgsFeature()
allAttrs = provider.allAttributesList()
provider.select(allAttrs, QgsRect(), False)


RubberBand=QgsRubberBand
g = feat.setGeometry(QgsGeometry.fromPoint(QgsPoint(p.x(),p.y())))
geom = feat.geometry()

RubberBand = QgsRubberBand(self.canvas,geom.vectorType() == QGis.Polygon)
RubberBand.setToGeometry(geom,layer)
RubberBand.setWidth(2)
RubberBand.setColor(Qt.red)
RubberBand.show()

while provider.getNextFeature(feat):

attrs = feat.attributeMap()
self.screen = QTextEdit()
     self.screen.setReadOnly(1)
     self.screen.show()
self.screen.setWindowTitle(self.tr("Identify Result"))
self.screen.setWindowIcon(QtGui.QIcon(os.path.join(os.path.dirname(__file__),"\project\icons\mIconNew.png")))
 loc4 = QString("Map Coords :"+ str(p.x()) + ", " + str(p.y()))
self.screen.append(loc4)

loc1 = QString("\n" + "Feature ID : " + str(feat.featureId()))
self.screen.append(loc1)

for k in attrs:

if k == 0:
loc = QString("Plot Id"  + ": " + str(attrs[k].toString()))
if k == 1:
loc = QString("Text Size" + ": " + str(attrs[k].toString() ))
if k == 2:
loc = QString("Text String" + ": " + str(attrs[k]))
elif k > 2:
loc = QString("Field" + " " + str(k) + ": " + str(attrs[k]))
self.screen.append(loc)
-- 
Regards
Arpita
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100317/df5b7288/attachment.html
From radim.blazek at gmail.com  Tue Mar 16 15:00:13 2010
From: radim.blazek at gmail.com (Radim Blazek)
Date: Tue Mar 16 15:00:16 2010
Subject: [Qgis-developer] GRASS requirements changed
In-Reply-To: <327F770B-1F06-4611-BC1D-A8FA718846D9@gmail.com>
References: <340505ef1003151310o70a4129dg9462f7e239fa6eb6@mail.gmail.com>
	<327F770B-1F06-4611-BC1D-A8FA718846D9@gmail.com>
Message-ID: <340505ef1003161200p1902229crbc81a83e6882c9c3@mail.gmail.com>

It seems that the raster map is really in a different zone, you
could/should get the same error in GRASS (depends on current mapset).
Try to compare zone in location/WIND location/mapset/WIND and
location/mapset/cellhd/map, AFAIK the zone (projection in general)
must be the same.
It could be that location zone was changed after the map was created.

Radim

On Tue, Mar 16, 2010 at 4:52 PM, John C. Tull <jctull@gmail.com> wrote:
> Hi Radim,
>
> I built trunk on my OS X system. I tested the provider on a grass location that is in EPSG 26911. I set the project to that epsg code, but I get this error when trying to load a raster:
>
> Cannot draw raster
> Cannot start module
> command: /Applications/qgis1.5.0.app/Contents/MacOS/share/qgis/grass/modules/qgis.d.rast map=angrin_gb@jctull window=739283,4.00302e+06,765408,4.07309e+06,320,859<br><br>WARNING: Raster map <angrin_gb@jctull@jctull> is in different zone (11)
> than current region (0)
> WARNING: Unable to open raster map <angrin_gb@jctull@jctull>
> ERROR: Unable to open raster map <angrin_gb@jctull
>
> The raster shows up as a gray box. The same is true of other grass rasters I tried to load.
>
> Regards,
> John
>
> On Mar 15, 2010, at 1:10 PM, Radim Blazek wrote:
>
>> 1) GDAL-GRASS driver is no more required, GRASS rasters are accessed
>> directly using GRASS libs not via GDAL
>>
>> 2) GRASS libraries must be compiled with exceptions support. This was
>> always required, but it was not explicitly stated in INSTALL.
>> On Linux with gcc just run GRASS configure with additional CFLAG:
>> ? ?CFLAGS="-fexceptions" ./configure ....
>> On windows it seems to work without special options (at least in
>> osgeo4w, Jef, which compiler are you using?)
>> I have no idea about OSX, here is small test package
>> http://trac.osgeo.org/qgis/attachment/ticket/1878/except.tar
>>
>> The reason for this requirement is, that GRASS G_fatal_error is
>> calling exit() and the only way to avoid QGIS exit on every error in
>> GRASS (which does not have to be necessarily fatal for QGIS, e.g.
>> cannot open layer ...) is to set custom error routine (
>> G_set_error_routine) which throws c++ exception which is caught in
>> QGIS-GRASS plugin. To support this, GRASS libs (which are in C) must
>> be compiled with support for exceptions.
>>
>> I have modified doc/INSTALL.t2t
>>
>> Radim
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
From jctull at gmail.com  Tue Mar 16 16:29:36 2010
From: jctull at gmail.com (John C. Tull)
Date: Tue Mar 16 16:30:39 2010
Subject: [Qgis-developer] GRASS requirements changed
In-Reply-To: <340505ef1003161200p1902229crbc81a83e6882c9c3@mail.gmail.com>
References: <340505ef1003151310o70a4129dg9462f7e239fa6eb6@mail.gmail.com>
	<327F770B-1F06-4611-BC1D-A8FA718846D9@gmail.com>
	<340505ef1003161200p1902229crbc81a83e6882c9c3@mail.gmail.com>
Message-ID: <EA8D39DF-B231-49FA-9AE1-E4D0B7F6187F@gmail.com>

Hi Radim,

The PROJ_INFO file is where the projection information is stored. It reads:
name: Universe Transverse Mercator
proj: utm
datum: nad83
ellps: grs80
zone: 11
no_defs: defined

GDAL reports:
cellhd/angrin_gb 
Driver: GRASS/GRASS Database Rasters (5.7+)
Files: /Users/jctull/Documents/Map_Data/grassdata/state_base_map/jctull/cellhd/angrin_gb
Size is 859, 2334
Coordinate System is `'
Origin = (739283.062363900011405,4073086.029592299833894)
Pixel Size = (30.412689324935933,-29.886675372750489)
Corner Coordinates:
Upper Left  (  739283.062, 4073086.030) 
Lower Left  (  739283.062, 4003330.529) 
Upper Right (  765407.562, 4073086.030) 
Lower Right (  765407.562, 4003330.529) 
Center      (  752345.312, 4038208.279) 

No projection information from the gdal driver, which might be normal (not sure). Anyway, the file works fine with an epsg 26911 project using the gdal driver.

John

On Mar 16, 2010, at 12:00 PM, Radim Blazek wrote:

> It seems that the raster map is really in a different zone, you
> could/should get the same error in GRASS (depends on current mapset).
> Try to compare zone in location/WIND location/mapset/WIND and
> location/mapset/cellhd/map, AFAIK the zone (projection in general)
> must be the same.
> It could be that location zone was changed after the map was created.
> 
> Radim
> 
> On Tue, Mar 16, 2010 at 4:52 PM, John C. Tull <jctull@gmail.com> wrote:
>> Hi Radim,
>> 
>> I built trunk on my OS X system. I tested the provider on a grass location that is in EPSG 26911. I set the project to that epsg code, but I get this error when trying to load a raster:
>> 
>> Cannot draw raster
>> Cannot start module
>> command: /Applications/qgis1.5.0.app/Contents/MacOS/share/qgis/grass/modules/qgis.d.rast map=angrin_gb@jctull window=739283,4.00302e+06,765408,4.07309e+06,320,859<br><br>WARNING: Raster map <angrin_gb@jctull@jctull> is in different zone (11)
>> than current region (0)
>> WARNING: Unable to open raster map <angrin_gb@jctull@jctull>
>> ERROR: Unable to open raster map <angrin_gb@jctull
>> 
>> The raster shows up as a gray box. The same is true of other grass rasters I tried to load.
>> 
>> Regards,
>> John
>> 
>> On Mar 15, 2010, at 1:10 PM, Radim Blazek wrote:
>> 
>>> 1) GDAL-GRASS driver is no more required, GRASS rasters are accessed
>>> directly using GRASS libs not via GDAL
>>> 
>>> 2) GRASS libraries must be compiled with exceptions support. This was
>>> always required, but it was not explicitly stated in INSTALL.
>>> On Linux with gcc just run GRASS configure with additional CFLAG:
>>>    CFLAGS="-fexceptions" ./configure ....
>>> On windows it seems to work without special options (at least in
>>> osgeo4w, Jef, which compiler are you using?)
>>> I have no idea about OSX, here is small test package
>>> http://trac.osgeo.org/qgis/attachment/ticket/1878/except.tar
>>> 
>>> The reason for this requirement is, that GRASS G_fatal_error is
>>> calling exit() and the only way to avoid QGIS exit on every error in
>>> GRASS (which does not have to be necessarily fatal for QGIS, e.g.
>>> cannot open layer ...) is to set custom error routine (
>>> G_set_error_routine) which throws c++ exception which is caught in
>>> QGIS-GRASS plugin. To support this, GRASS libs (which are in C) must
>>> be compiled with support for exceptions.
>>> 
>>> I have modified doc/INSTALL.t2t
>>> 
>>> Radim
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>> 
>> 

From radim.blazek at gmail.com  Tue Mar 16 17:27:01 2010
From: radim.blazek at gmail.com (Radim Blazek)
Date: Tue Mar 16 17:27:05 2010
Subject: [Qgis-developer] GRASS requirements changed
In-Reply-To: <EA8D39DF-B231-49FA-9AE1-E4D0B7F6187F@gmail.com>
References: <340505ef1003151310o70a4129dg9462f7e239fa6eb6@mail.gmail.com>
	<327F770B-1F06-4611-BC1D-A8FA718846D9@gmail.com>
	<340505ef1003161200p1902229crbc81a83e6882c9c3@mail.gmail.com>
	<EA8D39DF-B231-49FA-9AE1-E4D0B7F6187F@gmail.com>
Message-ID: <340505ef1003161427w494a96cfpb0f00a8b38f2d424@mail.gmail.com>

Zone is also stored in WIND, gdalinfo is not relevant.
Try this:
grep zone /Users/jctull/Documents/Map_Data/grassdata/state_base_map/PERMANENT/WIND
/Users/jctull/Documents/Map_Data/grassdata/state_base_map/jctull/WIND
/Users/jctull/Documents/Map_Data/grassdata/state_base_map/jctull/cellhd/angrin_gb

Radim

On Tue, Mar 16, 2010 at 9:29 PM, John C. Tull <jctull@gmail.com> wrote:
> Hi Radim,
>
> The PROJ_INFO file is where the projection information is stored. It reads:
> name: Universe Transverse Mercator
> proj: utm
> datum: nad83
> ellps: grs80
> zone: 11
> no_defs: defined
>
> GDAL reports:
> cellhd/angrin_gb
> Driver: GRASS/GRASS Database Rasters (5.7+)
> Files: /Users/jctull/Documents/Map_Data/grassdata/state_base_map/jctull/cellhd/angrin_gb
> Size is 859, 2334
> Coordinate System is `'
> Origin = (739283.062363900011405,4073086.029592299833894)
> Pixel Size = (30.412689324935933,-29.886675372750489)
> Corner Coordinates:
> Upper Left ?( ?739283.062, 4073086.030)
> Lower Left ?( ?739283.062, 4003330.529)
> Upper Right ( ?765407.562, 4073086.030)
> Lower Right ( ?765407.562, 4003330.529)
> Center ? ? ?( ?752345.312, 4038208.279)
>
> No projection information from the gdal driver, which might be normal (not sure). Anyway, the file works fine with an epsg 26911 project using the gdal driver.
>
> John
>
> On Mar 16, 2010, at 12:00 PM, Radim Blazek wrote:
>
>> It seems that the raster map is really in a different zone, you
>> could/should get the same error in GRASS (depends on current mapset).
>> Try to compare zone in location/WIND location/mapset/WIND and
>> location/mapset/cellhd/map, AFAIK the zone (projection in general)
>> must be the same.
>> It could be that location zone was changed after the map was created.
>>
>> Radim
>>
>> On Tue, Mar 16, 2010 at 4:52 PM, John C. Tull <jctull@gmail.com> wrote:
>>> Hi Radim,
>>>
>>> I built trunk on my OS X system. I tested the provider on a grass location that is in EPSG 26911. I set the project to that epsg code, but I get this error when trying to load a raster:
>>>
>>> Cannot draw raster
>>> Cannot start module
>>> command: /Applications/qgis1.5.0.app/Contents/MacOS/share/qgis/grass/modules/qgis.d.rast map=angrin_gb@jctull window=739283,4.00302e+06,765408,4.07309e+06,320,859<br><br>WARNING: Raster map <angrin_gb@jctull@jctull> is in different zone (11)
>>> than current region (0)
>>> WARNING: Unable to open raster map <angrin_gb@jctull@jctull>
>>> ERROR: Unable to open raster map <angrin_gb@jctull
>>>
>>> The raster shows up as a gray box. The same is true of other grass rasters I tried to load.
>>>
>>> Regards,
>>> John
>>>
>>> On Mar 15, 2010, at 1:10 PM, Radim Blazek wrote:
>>>
>>>> 1) GDAL-GRASS driver is no more required, GRASS rasters are accessed
>>>> directly using GRASS libs not via GDAL
>>>>
>>>> 2) GRASS libraries must be compiled with exceptions support. This was
>>>> always required, but it was not explicitly stated in INSTALL.
>>>> On Linux with gcc just run GRASS configure with additional CFLAG:
>>>> ? ?CFLAGS="-fexceptions" ./configure ....
>>>> On windows it seems to work without special options (at least in
>>>> osgeo4w, Jef, which compiler are you using?)
>>>> I have no idea about OSX, here is small test package
>>>> http://trac.osgeo.org/qgis/attachment/ticket/1878/except.tar
>>>>
>>>> The reason for this requirement is, that GRASS G_fatal_error is
>>>> calling exit() and the only way to avoid QGIS exit on every error in
>>>> GRASS (which does not have to be necessarily fatal for QGIS, e.g.
>>>> cannot open layer ...) is to set custom error routine (
>>>> G_set_error_routine) which throws c++ exception which is caught in
>>>> QGIS-GRASS plugin. To support this, GRASS libs (which are in C) must
>>>> be compiled with support for exceptions.
>>>>
>>>> I have modified doc/INSTALL.t2t
>>>>
>>>> Radim
>>>> _______________________________________________
>>>> Qgis-developer mailing list
>>>> Qgis-developer@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>>
>
>
From giovanni.manghi at gmail.com  Tue Mar 16 17:47:13 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Tue Mar 16 17:47:43 2010
Subject: [Qgis-developer] GRASS requirements changed
In-Reply-To: <201003161517.55027.marco@hugis.net>
References: <340505ef1003151310o70a4129dg9462f7e239fa6eb6@mail.gmail.com>
	<1268746748.6640.336.camel@sibirica>
	<201003161517.55027.marco@hugis.net>
Message-ID: <1268776033.6640.415.camel@sibirica>

Hi Marco,


> But this is more a long-term approach.


maybe meanwhile it will be worth simplify qgis raster properties for
GRASS rasters leaving just what is working: global transparency, scale
dependency, display name, more?

cheers

-- Giovanni --

From radim.blazek at gmail.com  Tue Mar 16 17:49:04 2010
From: radim.blazek at gmail.com (Radim Blazek)
Date: Tue Mar 16 17:49:18 2010
Subject: [Qgis-developer] GRASS requirements changed
In-Reply-To: <340505ef1003161427w494a96cfpb0f00a8b38f2d424@mail.gmail.com>
References: <340505ef1003151310o70a4129dg9462f7e239fa6eb6@mail.gmail.com>
	<327F770B-1F06-4611-BC1D-A8FA718846D9@gmail.com>
	<340505ef1003161200p1902229crbc81a83e6882c9c3@mail.gmail.com>
	<EA8D39DF-B231-49FA-9AE1-E4D0B7F6187F@gmail.com>
	<340505ef1003161427w494a96cfpb0f00a8b38f2d424@mail.gmail.com>
Message-ID: <340505ef1003161449m3926633etc87a00ea1bc31e19@mail.gmail.com>

I have changed qgis.d.rast so that it reads the window from the cellhd
instead of from mapset WIND so it should work for you now.
It is better however to fix your GRASS data in any case because you
probably get to troubles soon or later running GRASS modules.

Radim

On Tue, Mar 16, 2010 at 10:27 PM, Radim Blazek <radim.blazek@gmail.com> wrote:
> Zone is also stored in WIND, gdalinfo is not relevant.
> Try this:
> grep zone /Users/jctull/Documents/Map_Data/grassdata/state_base_map/PERMANENT/WIND
> /Users/jctull/Documents/Map_Data/grassdata/state_base_map/jctull/WIND
> /Users/jctull/Documents/Map_Data/grassdata/state_base_map/jctull/cellhd/angrin_gb
>
> Radim
>
> On Tue, Mar 16, 2010 at 9:29 PM, John C. Tull <jctull@gmail.com> wrote:
>> Hi Radim,
>>
>> The PROJ_INFO file is where the projection information is stored. It reads:
>> name: Universe Transverse Mercator
>> proj: utm
>> datum: nad83
>> ellps: grs80
>> zone: 11
>> no_defs: defined
>>
>> GDAL reports:
>> cellhd/angrin_gb
>> Driver: GRASS/GRASS Database Rasters (5.7+)
>> Files: /Users/jctull/Documents/Map_Data/grassdata/state_base_map/jctull/cellhd/angrin_gb
>> Size is 859, 2334
>> Coordinate System is `'
>> Origin = (739283.062363900011405,4073086.029592299833894)
>> Pixel Size = (30.412689324935933,-29.886675372750489)
>> Corner Coordinates:
>> Upper Left ?( ?739283.062, 4073086.030)
>> Lower Left ?( ?739283.062, 4003330.529)
>> Upper Right ( ?765407.562, 4073086.030)
>> Lower Right ( ?765407.562, 4003330.529)
>> Center ? ? ?( ?752345.312, 4038208.279)
>>
>> No projection information from the gdal driver, which might be normal (not sure). Anyway, the file works fine with an epsg 26911 project using the gdal driver.
>>
>> John
>>
>> On Mar 16, 2010, at 12:00 PM, Radim Blazek wrote:
>>
>>> It seems that the raster map is really in a different zone, you
>>> could/should get the same error in GRASS (depends on current mapset).
>>> Try to compare zone in location/WIND location/mapset/WIND and
>>> location/mapset/cellhd/map, AFAIK the zone (projection in general)
>>> must be the same.
>>> It could be that location zone was changed after the map was created.
>>>
>>> Radim
>>>
>>> On Tue, Mar 16, 2010 at 4:52 PM, John C. Tull <jctull@gmail.com> wrote:
>>>> Hi Radim,
>>>>
>>>> I built trunk on my OS X system. I tested the provider on a grass location that is in EPSG 26911. I set the project to that epsg code, but I get this error when trying to load a raster:
>>>>
>>>> Cannot draw raster
>>>> Cannot start module
>>>> command: /Applications/qgis1.5.0.app/Contents/MacOS/share/qgis/grass/modules/qgis.d.rast map=angrin_gb@jctull window=739283,4.00302e+06,765408,4.07309e+06,320,859<br><br>WARNING: Raster map <angrin_gb@jctull@jctull> is in different zone (11)
>>>> than current region (0)
>>>> WARNING: Unable to open raster map <angrin_gb@jctull@jctull>
>>>> ERROR: Unable to open raster map <angrin_gb@jctull
>>>>
>>>> The raster shows up as a gray box. The same is true of other grass rasters I tried to load.
>>>>
>>>> Regards,
>>>> John
>>>>
>>>> On Mar 15, 2010, at 1:10 PM, Radim Blazek wrote:
>>>>
>>>>> 1) GDAL-GRASS driver is no more required, GRASS rasters are accessed
>>>>> directly using GRASS libs not via GDAL
>>>>>
>>>>> 2) GRASS libraries must be compiled with exceptions support. This was
>>>>> always required, but it was not explicitly stated in INSTALL.
>>>>> On Linux with gcc just run GRASS configure with additional CFLAG:
>>>>> ? ?CFLAGS="-fexceptions" ./configure ....
>>>>> On windows it seems to work without special options (at least in
>>>>> osgeo4w, Jef, which compiler are you using?)
>>>>> I have no idea about OSX, here is small test package
>>>>> http://trac.osgeo.org/qgis/attachment/ticket/1878/except.tar
>>>>>
>>>>> The reason for this requirement is, that GRASS G_fatal_error is
>>>>> calling exit() and the only way to avoid QGIS exit on every error in
>>>>> GRASS (which does not have to be necessarily fatal for QGIS, e.g.
>>>>> cannot open layer ...) is to set custom error routine (
>>>>> G_set_error_routine) which throws c++ exception which is caught in
>>>>> QGIS-GRASS plugin. To support this, GRASS libs (which are in C) must
>>>>> be compiled with support for exceptions.
>>>>>
>>>>> I have modified doc/INSTALL.t2t
>>>>>
>>>>> Radim
>>>>> _______________________________________________
>>>>> Qgis-developer mailing list
>>>>> Qgis-developer@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>
>>>>
>>
>>
>
From luca_manganelli at comune.trento.it  Wed Mar 17 03:06:47 2010
From: luca_manganelli at comune.trento.it (luca_manganelli@comune.trento.it)
Date: Wed Mar 17 03:06:53 2010
Subject: [Qgis-developer] Get Feature Id on clicked point
In-Reply-To: <14ba7b971003161134q44fa54bewd2819f3086d47ee@mail.gmail.com>
Message-ID: <OF22F9161B.BAB7E248-ONC12576E9.0026D52E-C12576E9.002712F5@comune.trento.it>

qgis-developer-bounces@lists.osgeo.org scritti il 16/03/2010 19.34.14

> Hi All
> I am trying to build an application in which I am unable
> to?retrieve?the featureId of the Feature at user clicked point,
> instead it is giving featureId one by one sequentially...
> can any one help by giving some code in python.

See this line:

         provider.select(allAttrs, QgsRect(), False)


you should use QgsRect ( x0, y0, x1, y1) to limit the search range.
Otherwise, it will return all features.

an example, taken from your source code:

         provider.select(allAttrs, QgsRect(p.x(0)-0.5, p.y(0)-0.5,
p.x(0)+0.5, p.y(0)+0.5), False)


try it!

p.s. Please don't answer *directly* to me, but to the group!

From cavallini at faunalia.it  Wed Mar 17 06:50:20 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed Mar 17 06:56:52 2010
Subject: [Qgis-developer] plugin_installer>segfault?
Message-ID: <4BA0B3EC.8010004@faunalia.it>

I all.
I'm unable to start a freshly compiled qgis from trunk:

/usr/share/qgis/python/plugins/plugin_installer/installer_data.py:590:
DeprecationWarning: BaseException.message has been deprecated as of Python 2.6
  error = error.message
Segmentation fault

Any hint?
Thanks.
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From borysiasty at aster.pl  Wed Mar 17 07:12:52 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Wed Mar 17 07:12:56 2010
Subject: [Qgis-developer] plugin_installer>segfault?
In-Reply-To: <4BA0B3EC.8010004@faunalia.it>
References: <4BA0B3EC.8010004@faunalia.it>
Message-ID: <201003171212.52746.borysiasty@aster.pl>

Dnia ?roda, 17 marca 2010 o 11:50:20 Paolo Cavallini napisa?(a):
> I all.
> I'm unable to start a freshly compiled qgis from trunk:
> 
> /usr/share/qgis/python/plugins/plugin_installer/installer_data.py:590:
> DeprecationWarning: BaseException.message has been deprecated as of Python
> 2.6 error = error.message
> Segmentation fault
> 
> Any hint?
> Thanks.

I don't think this warning is related to the segfault.
I'll update it anyway.
From cavallini at faunalia.it  Wed Mar 17 10:32:37 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed Mar 17 10:32:43 2010
Subject: [Qgis-developer] plugin_installer>segfault?
In-Reply-To: <4BA0B3EC.8010004@faunalia.it>
References: <4BA0B3EC.8010004@faunalia.it>
Message-ID: <4BA0E805.4070108@faunalia.it>

Paolo Cavallini ha scritto:
> I all.
> I'm unable to start a freshly compiled qgis from trunk:
> 
> /usr/share/qgis/python/plugins/plugin_installer/installer_data.py:590:
> DeprecationWarning: BaseException.message has been deprecated as of Python 2.6
>   error = error.message
> Segmentation fault

Borys is right, segfault is independent from the plugin.
It appears to depend from some local plugin, as removing ~/.qgis/python/plugins/
cures it.
All the best.
-- 
Paolo Cavallini: http://www.faunalia.it/pc
From jctull at gmail.com  Wed Mar 17 11:38:58 2010
From: jctull at gmail.com (John C. Tull)
Date: Wed Mar 17 11:39:07 2010
Subject: [Qgis-developer] GRASS requirements changed
In-Reply-To: <340505ef1003161449m3926633etc87a00ea1bc31e19@mail.gmail.com>
References: <340505ef1003151310o70a4129dg9462f7e239fa6eb6@mail.gmail.com>
	<327F770B-1F06-4611-BC1D-A8FA718846D9@gmail.com>
	<340505ef1003161200p1902229crbc81a83e6882c9c3@mail.gmail.com>
	<EA8D39DF-B231-49FA-9AE1-E4D0B7F6187F@gmail.com>
	<340505ef1003161427w494a96cfpb0f00a8b38f2d424@mail.gmail.com>
	<340505ef1003161449m3926633etc87a00ea1bc31e19@mail.gmail.com>
Message-ID: <6AE5692F-015B-4F87-AFE0-C983E413D1DA@gmail.com>

Hi Radim,

I'm not sure what is wrong with my GRASS data. Perhaps the missing location information in WIND? See results below:

On Mar 16, 2010, at 2:49 PM, Radim Blazek wrote:

> I have changed qgis.d.rast so that it reads the window from the cellhd
> instead of from mapset WIND so it should work for you now.
> It is better however to fix your GRASS data in any case because you
> probably get to troubles soon or later running GRASS modules.
> 
> Radim
> 
> On Tue, Mar 16, 2010 at 10:27 PM, Radim Blazek <radim.blazek@gmail.com> wrote:
>> Zone is also stored in WIND, gdalinfo is not relevant.
>> Try this:
>> grep zone /Users/jctull/Documents/Map_Data/grassdata/state_base_map/PERMANENT/WIND

zone:       0

>> /Users/jctull/Documents/Map_Data/grassdata/state_base_map/jctull/WIND

zone:       11

>> /Users/jctull/Documents/Map_Data/grassdata/state_base_map/jctull/cellhd/angrin_gb
>> 

zone:       11

>> Radim
>> 
>> On Tue, Mar 16, 2010 at 9:29 PM, John C. Tull <jctull@gmail.com> wrote:
>>> Hi Radim,
>>> 
>>> The PROJ_INFO file is where the projection information is stored. It reads:
>>> name: Universe Transverse Mercator
>>> proj: utm
>>> datum: nad83
>>> ellps: grs80
>>> zone: 11
>>> no_defs: defined
>>> 
>>> GDAL reports:
>>> cellhd/angrin_gb
>>> Driver: GRASS/GRASS Database Rasters (5.7+)
>>> Files: /Users/jctull/Documents/Map_Data/grassdata/state_base_map/jctull/cellhd/angrin_gb
>>> Size is 859, 2334
>>> Coordinate System is `'
>>> Origin = (739283.062363900011405,4073086.029592299833894)
>>> Pixel Size = (30.412689324935933,-29.886675372750489)
>>> Corner Coordinates:
>>> Upper Left  (  739283.062, 4073086.030)
>>> Lower Left  (  739283.062, 4003330.529)
>>> Upper Right (  765407.562, 4073086.030)
>>> Lower Right (  765407.562, 4003330.529)
>>> Center      (  752345.312, 4038208.279)
>>> 
>>> No projection information from the gdal driver, which might be normal (not sure). Anyway, the file works fine with an epsg 26911 project using the gdal driver.
>>> 
>>> John
>>> 
>>> On Mar 16, 2010, at 12:00 PM, Radim Blazek wrote:
>>> 
>>>> It seems that the raster map is really in a different zone, you
>>>> could/should get the same error in GRASS (depends on current mapset).
>>>> Try to compare zone in location/WIND location/mapset/WIND and
>>>> location/mapset/cellhd/map, AFAIK the zone (projection in general)
>>>> must be the same.
>>>> It could be that location zone was changed after the map was created.
>>>> 
>>>> Radim
>>>> 
>>>> On Tue, Mar 16, 2010 at 4:52 PM, John C. Tull <jctull@gmail.com> wrote:
>>>>> Hi Radim,
>>>>> 
>>>>> I built trunk on my OS X system. I tested the provider on a grass location that is in EPSG 26911. I set the project to that epsg code, but I get this error when trying to load a raster:
>>>>> 
>>>>> Cannot draw raster
>>>>> Cannot start module
>>>>> command: /Applications/qgis1.5.0.app/Contents/MacOS/share/qgis/grass/modules/qgis.d.rast map=angrin_gb@jctull window=739283,4.00302e+06,765408,4.07309e+06,320,859<br><br>WARNING: Raster map <angrin_gb@jctull@jctull> is in different zone (11)
>>>>> than current region (0)
>>>>> WARNING: Unable to open raster map <angrin_gb@jctull@jctull>
>>>>> ERROR: Unable to open raster map <angrin_gb@jctull
>>>>> 
>>>>> The raster shows up as a gray box. The same is true of other grass rasters I tried to load.
>>>>> 
>>>>> Regards,
>>>>> John
>>>>> 
>>>>> On Mar 15, 2010, at 1:10 PM, Radim Blazek wrote:
>>>>> 
>>>>>> 1) GDAL-GRASS driver is no more required, GRASS rasters are accessed
>>>>>> directly using GRASS libs not via GDAL
>>>>>> 
>>>>>> 2) GRASS libraries must be compiled with exceptions support. This was
>>>>>> always required, but it was not explicitly stated in INSTALL.
>>>>>> On Linux with gcc just run GRASS configure with additional CFLAG:
>>>>>>    CFLAGS="-fexceptions" ./configure ....
>>>>>> On windows it seems to work without special options (at least in
>>>>>> osgeo4w, Jef, which compiler are you using?)
>>>>>> I have no idea about OSX, here is small test package
>>>>>> http://trac.osgeo.org/qgis/attachment/ticket/1878/except.tar
>>>>>> 
>>>>>> The reason for this requirement is, that GRASS G_fatal_error is
>>>>>> calling exit() and the only way to avoid QGIS exit on every error in
>>>>>> GRASS (which does not have to be necessarily fatal for QGIS, e.g.
>>>>>> cannot open layer ...) is to set custom error routine (
>>>>>> G_set_error_routine) which throws c++ exception which is caught in
>>>>>> QGIS-GRASS plugin. To support this, GRASS libs (which are in C) must
>>>>>> be compiled with support for exceptions.
>>>>>> 
>>>>>> I have modified doc/INSTALL.t2t
>>>>>> 
>>>>>> Radim
>>>>>> _______________________________________________
>>>>>> Qgis-developer mailing list
>>>>>> Qgis-developer@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>> 
>>>>> 
>>> 
>>> 
>> 

From jctull at gmail.com  Wed Mar 17 11:52:31 2010
From: jctull at gmail.com (John C. Tull)
Date: Wed Mar 17 11:52:46 2010
Subject: [Qgis-developer] GRASS requirements changed
In-Reply-To: <340505ef1003161449m3926633etc87a00ea1bc31e19@mail.gmail.com>
References: <340505ef1003151310o70a4129dg9462f7e239fa6eb6@mail.gmail.com>
	<327F770B-1F06-4611-BC1D-A8FA718846D9@gmail.com>
	<340505ef1003161200p1902229crbc81a83e6882c9c3@mail.gmail.com>
	<EA8D39DF-B231-49FA-9AE1-E4D0B7F6187F@gmail.com>
	<340505ef1003161427w494a96cfpb0f00a8b38f2d424@mail.gmail.com>
	<340505ef1003161449m3926633etc87a00ea1bc31e19@mail.gmail.com>
Message-ID: <B12AFEAC-45D2-4C3E-973B-B8BF9AA1381F@gmail.com>

Hi Radim,

Your changes appear to have fixed the issue. The color table and correct CRS information are now being used in the canvas display.

Cheers,
John

On Mar 16, 2010, at 2:49 PM, Radim Blazek wrote:

> I have changed qgis.d.rast so that it reads the window from the cellhd
> instead of from mapset WIND so it should work for you now.
> It is better however to fix your GRASS data in any case because you
> probably get to troubles soon or later running GRASS modules.
> 
> Radim
> 
> On Tue, Mar 16, 2010 at 10:27 PM, Radim Blazek <radim.blazek@gmail.com> wrote:
>> Zone is also stored in WIND, gdalinfo is not relevant.
>> Try this:
>> grep zone /Users/jctull/Documents/Map_Data/grassdata/state_base_map/PERMANENT/WIND
>> /Users/jctull/Documents/Map_Data/grassdata/state_base_map/jctull/WIND
>> /Users/jctull/Documents/Map_Data/grassdata/state_base_map/jctull/cellhd/angrin_gb
>> 
>> Radim
>> 
>> On Tue, Mar 16, 2010 at 9:29 PM, John C. Tull <jctull@gmail.com> wrote:
>>> Hi Radim,
>>> 
>>> The PROJ_INFO file is where the projection information is stored. It reads:
>>> name: Universe Transverse Mercator
>>> proj: utm
>>> datum: nad83
>>> ellps: grs80
>>> zone: 11
>>> no_defs: defined
>>> 
>>> GDAL reports:
>>> cellhd/angrin_gb
>>> Driver: GRASS/GRASS Database Rasters (5.7+)
>>> Files: /Users/jctull/Documents/Map_Data/grassdata/state_base_map/jctull/cellhd/angrin_gb
>>> Size is 859, 2334
>>> Coordinate System is `'
>>> Origin = (739283.062363900011405,4073086.029592299833894)
>>> Pixel Size = (30.412689324935933,-29.886675372750489)
>>> Corner Coordinates:
>>> Upper Left  (  739283.062, 4073086.030)
>>> Lower Left  (  739283.062, 4003330.529)
>>> Upper Right (  765407.562, 4073086.030)
>>> Lower Right (  765407.562, 4003330.529)
>>> Center      (  752345.312, 4038208.279)
>>> 
>>> No projection information from the gdal driver, which might be normal (not sure). Anyway, the file works fine with an epsg 26911 project using the gdal driver.
>>> 
>>> John
>>> 
>>> On Mar 16, 2010, at 12:00 PM, Radim Blazek wrote:
>>> 
>>>> It seems that the raster map is really in a different zone, you
>>>> could/should get the same error in GRASS (depends on current mapset).
>>>> Try to compare zone in location/WIND location/mapset/WIND and
>>>> location/mapset/cellhd/map, AFAIK the zone (projection in general)
>>>> must be the same.
>>>> It could be that location zone was changed after the map was created.
>>>> 
>>>> Radim
>>>> 
>>>> On Tue, Mar 16, 2010 at 4:52 PM, John C. Tull <jctull@gmail.com> wrote:
>>>>> Hi Radim,
>>>>> 
>>>>> I built trunk on my OS X system. I tested the provider on a grass location that is in EPSG 26911. I set the project to that epsg code, but I get this error when trying to load a raster:
>>>>> 
>>>>> Cannot draw raster
>>>>> Cannot start module
>>>>> command: /Applications/qgis1.5.0.app/Contents/MacOS/share/qgis/grass/modules/qgis.d.rast map=angrin_gb@jctull window=739283,4.00302e+06,765408,4.07309e+06,320,859<br><br>WARNING: Raster map <angrin_gb@jctull@jctull> is in different zone (11)
>>>>> than current region (0)
>>>>> WARNING: Unable to open raster map <angrin_gb@jctull@jctull>
>>>>> ERROR: Unable to open raster map <angrin_gb@jctull
>>>>> 
>>>>> The raster shows up as a gray box. The same is true of other grass rasters I tried to load.
>>>>> 
>>>>> Regards,
>>>>> John
>>>>> 
>>>>> On Mar 15, 2010, at 1:10 PM, Radim Blazek wrote:
>>>>> 
>>>>>> 1) GDAL-GRASS driver is no more required, GRASS rasters are accessed
>>>>>> directly using GRASS libs not via GDAL
>>>>>> 
>>>>>> 2) GRASS libraries must be compiled with exceptions support. This was
>>>>>> always required, but it was not explicitly stated in INSTALL.
>>>>>> On Linux with gcc just run GRASS configure with additional CFLAG:
>>>>>>    CFLAGS="-fexceptions" ./configure ....
>>>>>> On windows it seems to work without special options (at least in
>>>>>> osgeo4w, Jef, which compiler are you using?)
>>>>>> I have no idea about OSX, here is small test package
>>>>>> http://trac.osgeo.org/qgis/attachment/ticket/1878/except.tar
>>>>>> 
>>>>>> The reason for this requirement is, that GRASS G_fatal_error is
>>>>>> calling exit() and the only way to avoid QGIS exit on every error in
>>>>>> GRASS (which does not have to be necessarily fatal for QGIS, e.g.
>>>>>> cannot open layer ...) is to set custom error routine (
>>>>>> G_set_error_routine) which throws c++ exception which is caught in
>>>>>> QGIS-GRASS plugin. To support this, GRASS libs (which are in C) must
>>>>>> be compiled with support for exceptions.
>>>>>> 
>>>>>> I have modified doc/INSTALL.t2t
>>>>>> 
>>>>>> Radim
>>>>>> _______________________________________________
>>>>>> Qgis-developer mailing list
>>>>>> Qgis-developer@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>> 
>>>>> 
>>> 
>>> 
>> 

From radim.blazek at gmail.com  Wed Mar 17 12:08:24 2010
From: radim.blazek at gmail.com (Radim Blazek)
Date: Wed Mar 17 12:08:35 2010
Subject: [Qgis-developer] GRASS requirements changed
In-Reply-To: <6AE5692F-015B-4F87-AFE0-C983E413D1DA@gmail.com>
References: <340505ef1003151310o70a4129dg9462f7e239fa6eb6@mail.gmail.com>
	<327F770B-1F06-4611-BC1D-A8FA718846D9@gmail.com>
	<340505ef1003161200p1902229crbc81a83e6882c9c3@mail.gmail.com>
	<EA8D39DF-B231-49FA-9AE1-E4D0B7F6187F@gmail.com>
	<340505ef1003161427w494a96cfpb0f00a8b38f2d424@mail.gmail.com>
	<340505ef1003161449m3926633etc87a00ea1bc31e19@mail.gmail.com>
	<6AE5692F-015B-4F87-AFE0-C983E413D1DA@gmail.com>
Message-ID: <340505ef1003170908m57539457la6109f234492ff95@mail.gmail.com>

On Wed, Mar 17, 2010 at 4:38 PM, John C. Tull <jctull@gmail.com> wrote:
> I'm not sure what is wrong with my GRASS data. Perhaps the missing location information in WIND? See results below:

I think that the zone should be the same in all WIND, I don't think it
is used at all.
I would suggest to change it in
/Users/jctull/Documents/Map_Data/grassdata/state_base_map/PERMANENT/WIND
also to 11 (in text editor, knowing that you should not edit those
files directly).

Probably you can also forget it.

Radim

>>> grep zone /Users/jctull/Documents/Map_Data/grassdata/state_base_map/PERMANENT/WIND
> zone: ? ? ? 0
>
>>> /Users/jctull/Documents/Map_Data/grassdata/state_base_map/jctull/WIND
>
> zone: ? ? ? 11
>
>>> /Users/jctull/Documents/Map_Data/grassdata/state_base_map/jctull/cellhd/angrin_gb
>>>
>
> zone: ? ? ? 11
From woklist at kyngchaos.com  Wed Mar 17 12:15:57 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Mar 17 12:16:02 2010
Subject: [Qgis-developer] Python import error on OS X
In-Reply-To: <ceb0de271003131304x2ef157dai9772c9a464d4d52e@mail.gmail.com>
References: <ceb0de271003131304x2ef157dai9772c9a464d4d52e@mail.gmail.com>
Message-ID: <15A849CE-1474-4337-9775-8802BFECCCE4@kyngchaos.com>

Which OSX version?

Did you try the full version, and does it work?

I tried it from the Python console in Qgis (standalone and full) on both Leopard and Snow with no errors.

On Mar 13, 2010, at 3:04 PM, Gary Sherman wrote:

> On OS X using the standalone build (1.4) from KyngChaos:
> 
> from qgis.core import *
> TypeError: metaclass conflict: the metaclass of a derived class must
> be a (non-strict) subclass of the metaclasses of all its bases
> 
> Any ideas?

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Oh, look, I seem to have fallen down a deep, dark hole.  Now what does that remind me of?  Ah, yes - life."

- Marvin


From jctull at gmail.com  Wed Mar 17 15:23:28 2010
From: jctull at gmail.com (John C. Tull)
Date: Wed Mar 17 15:23:37 2010
Subject: [Qgis-developer] Line symbology-ng
Message-ID: <37995215-3209-492D-887C-71CB613B9A92@gmail.com>

Hi Martin,

I was wondering if it would be possible to have a line cap style that is open. In the current setup, you have to pick a cap, and this draws lines across line symbology at each line segment. This becomes unattractive with highway symbology as shown in the example below for the black outlined route. Maybe there is a workaround that I am not considering.

Thanks,
John
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PastedGraphic-1.png
Type: image/png
Size: 6259 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100317/bbc9b66d/PastedGraphic-1.png
From borysiasty at aster.pl  Wed Mar 17 15:42:18 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Wed Mar 17 15:42:38 2010
Subject: [Qgis-developer] Line symbology-ng
In-Reply-To: <37995215-3209-492D-887C-71CB613B9A92@gmail.com>
References: <37995215-3209-492D-887C-71CB613B9A92@gmail.com>
Message-ID: <201003172042.18299.borysiasty@aster.pl>

Dnia ?roda, 17 marca 2010 o 20:23:28 John C. Tull napisa?(a):
> Hi Martin,
> 
> I was wondering if it would be possible to have a line cap style that is
> open. In the current setup, you have to pick a cap, and this draws lines
> across line symbology at each line segment. This becomes unattractive with
> highway symbology as shown in the example below for the black outlined
> route. Maybe there is a workaround that I am not considering.

Use the "symbol levels" button and put the bottom layer of all segments to the 
level 1 and the top layer of all segments to the level 2.

From wonder.sk at gmail.com  Wed Mar 17 15:42:53 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Mar 17 15:42:58 2010
Subject: [Qgis-developer] Re: Line symbology-ng
In-Reply-To: <37995215-3209-492D-887C-71CB613B9A92@gmail.com>
References: <37995215-3209-492D-887C-71CB613B9A92@gmail.com>
Message-ID: <e8e7199c1003171242y19f9796fldae4ea9d70838713@mail.gmail.com>

On Wed, Mar 17, 2010 at 8:23 PM, John C. Tull <jctull@gmail.com> wrote:
> Hi Martin,
>
> I was wondering if it would be possible to have a line cap style that is open. In the current setup, you have to pick a cap, and this draws lines across line symbology at each line segment. This becomes unattractive with highway symbology as shown in the example below for the black outlined route. Maybe there is a workaround that I am not considering.

Hi

if I understand your question correctly, you need to enable symbol
levels feature. That way you can force qgis to draw the black outline
first and then draw the blue "fill" - the black breaks between
features will be avoided. With symbol levels one can do also more
fancy stuff - see attached image of (imaginary) highway junction -
created from one shapefile with a Z-level field, using categorized
renderer from symbology-ng.

Cheers
Martin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: roads_complex.png
Type: image/png
Size: 39086 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100317/96c0900d/roads_complex-0001.png
From wonder.sk at gmail.com  Wed Mar 17 15:44:32 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Mar 17 15:44:36 2010
Subject: [Qgis-developer] Line symbology-ng
In-Reply-To: <201003172042.18299.borysiasty@aster.pl>
References: <37995215-3209-492D-887C-71CB613B9A92@gmail.com>
	<201003172042.18299.borysiasty@aster.pl>
Message-ID: <e8e7199c1003171244i38705cbdx5a1abef97a75beff@mail.gmail.com>

On Wed, Mar 17, 2010 at 8:42 PM, Borys Jurgiel <borysiasty@aster.pl> wrote:
> Dnia ?roda, 17 marca 2010 o 20:23:28 John C. Tull napisa?(a):
>> Hi Martin,
>>
>> I was wondering if it would be possible to have a line cap style that is
>> open. In the current setup, you have to pick a cap, and this draws lines
>> across line symbology at each line segment. This becomes unattractive with
>> highway symbology as shown in the example below for the black outlined
>> route. Maybe there is a workaround that I am not considering.
>
> Use the "symbol levels" button and put the bottom layer of all segments to the
> level 1 and the top layer of all segments to the level 2.

... or keep the default settings: level 0 for the bottom layer and
level 1 for the top layer :-)

Martin
From jctull at gmail.com  Wed Mar 17 16:16:18 2010
From: jctull at gmail.com (John C. Tull)
Date: Wed Mar 17 16:16:27 2010
Subject: [Qgis-developer] Re: Line symbology-ng
In-Reply-To: <e8e7199c1003171242y19f9796fldae4ea9d70838713@mail.gmail.com>
References: <37995215-3209-492D-887C-71CB613B9A92@gmail.com>
	<e8e7199c1003171242y19f9796fldae4ea9d70838713@mail.gmail.com>
Message-ID: <B9E7827B-32F8-4AB6-B8EC-F89201FD392E@gmail.com>

Hi Martin (and Borys),

On Mar 17, 2010, at 12:42 PM, Martin Dobias wrote:

> On Wed, Mar 17, 2010 at 8:23 PM, John C. Tull <jctull@gmail.com> wrote:
>> Hi Martin,
>> 
>> I was wondering if it would be possible to have a line cap style that is open. In the current setup, you have to pick a cap, and this draws lines across line symbology at each line segment. This becomes unattractive with highway symbology as shown in the example below for the black outlined route. Maybe there is a workaround that I am not considering.
> 
> Hi
> 
> if I understand your question correctly, you need to enable symbol
> levels feature. That way you can force qgis to draw the black outline
> first and then draw the blue "fill" - the black breaks between
> features will be avoided. With symbol levels one can do also more
> fancy stuff - see attached image of (imaginary) highway junction -
> created from one shapefile with a Z-level field, using categorized
> renderer from symbology-ng.

Thanks for the explanation. That is very helpful!

John
From borysiasty at aster.pl  Wed Mar 17 16:30:22 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Wed Mar 17 16:30:26 2010
Subject: [Qgis-developer] Line symbology-ng
In-Reply-To: <e8e7199c1003171244i38705cbdx5a1abef97a75beff@mail.gmail.com>
References: <37995215-3209-492D-887C-71CB613B9A92@gmail.com>
	<201003172042.18299.borysiasty@aster.pl>
	<e8e7199c1003171244i38705cbdx5a1abef97a75beff@mail.gmail.com>
Message-ID: <201003172130.22294.borysiasty@aster.pl>

> ... or keep the default settings: level 0 for the bottom layer and
> level 1 for the top layer :-)

Well, one level higher, one level deeper, what's the difference ;-)
From gsherman at mrcc.com  Wed Mar 17 23:42:08 2010
From: gsherman at mrcc.com (Gary Sherman)
Date: Wed Mar 17 23:49:52 2010
Subject: [Qgis-developer] Python import error on OS X
In-Reply-To: <15A849CE-1474-4337-9775-8802BFECCCE4@kyngchaos.com>
References: <ceb0de271003131304x2ef157dai9772c9a464d4d52e@mail.gmail.com>
	<15A849CE-1474-4337-9775-8802BFECCCE4@kyngchaos.com>
Message-ID: <ceb0de271003172042j39e22cf5g1ef1274afb12110e@mail.gmail.com>

On Wed, Mar 17, 2010 at 8:15 AM, William Kyngesburye
<woklist@kyngchaos.com> wrote:
> Which OSX version?
Snow
>
> Did you try the full version, and does it work?
>
> I tried it from the Python console in Qgis (standalone and full) on both Leopard and Snow with no errors.

I think it was a conflict somewhere on my system. I cleaned up things
and reinstalled Xcode. Now I can build using Xcode and CMake without
problems.

Thanks,

-gary
>
> On Mar 13, 2010, at 3:04 PM, Gary Sherman wrote:
>
>> On OS X using the standalone build (1.4) from KyngChaos:
>>
>> from qgis.core import *
>> TypeError: metaclass conflict: the metaclass of a derived class must
>> be a (non-strict) subclass of the metaclasses of all its bases
>>
>> Any ideas?
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "Oh, look, I seem to have fallen down a deep, dark hole. ?Now what does that remind me of? ?Ah, yes - life."
>
> - Marvin
>
>
>



-- 
-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
Gary Sherman
Chair, QGIS Project Steering Committee
-Desktop GIS Book:
 *http://desktopgisbook.com
-Spatial Hosting:
 *http://mrcc.com/hosting
"We work virtually everywhere"
-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-
From singarpita at gmail.com  Thu Mar 18 01:05:29 2010
From: singarpita at gmail.com (Arpita Singh)
Date: Thu Mar 18 01:13:20 2010
Subject: [Qgis-developer] Get Feature Id on clicked point
In-Reply-To: <OF22F9161B.BAB7E248-ONC12576E9.0026D52E-C12576E9.002712F5@comune.trento.it>
References: <14ba7b971003161134q44fa54bewd2819f3086d47ee@mail.gmail.com>
	<OF22F9161B.BAB7E248-ONC12576E9.0026D52E-C12576E9.002712F5@comune.trento.it>
Message-ID: <14ba7b971003172205y2aa0f100y501b20cadebd0ccb@mail.gmail.com>

Hi All ,
Thanks luca_manganelli for your reply it worked , I am able to fetch
features, but still it is not giving accurate result it sometimes shows the
Id of either adjacent Id or 2 Id ahead ,
I reduced the QgsRect Area also but still problem continues
.
Stiil thanks a lot once again my biggest problem is solved.



-- 
Regards
Arpita
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100318/ac47eaf5/attachment.html
From luca_manganelli at comune.trento.it  Thu Mar 18 03:01:17 2010
From: luca_manganelli at comune.trento.it (luca_manganelli@comune.trento.it)
Date: Thu Mar 18 03:01:25 2010
Subject: [Qgis-developer] Get Feature Id on clicked point
In-Reply-To: <14ba7b971003172205y2aa0f100y501b20cadebd0ccb@mail.gmail.com>
Message-ID: <OFD42ADF8E.001A9E22-ONC12576EA.0026666C-C12576EA.00269205@comune.trento.it>

qgis-developer-bounces@lists.osgeo.org scritti il 18/03/2010 06.05.29

> Hi All ,
> Thanks luca_manganelli for your reply it worked , I am able to fetch
> features, but still it is not giving accurate result it sometimes
> shows the Id of either adjacent Id or 2 Id ahead ,
> I reduced the QgsRect Area also but still problem continues
> .
> Stiil thanks a lot once again my biggest problem is solved.

Mmh...

there are some methods to resolve this problem:

 - calculate the nearest point from mouse click in the rectangle area
 - or, measure the shortest distance from two points and use that value as
tolerance in the QgsRectangle()

From Cedric.Moeri at bd.so.ch  Thu Mar 18 05:10:07 2010
From: Cedric.Moeri at bd.so.ch (=?iso-8859-1?Q?M=F6ri_Cedric?=)
Date: Thu Mar 18 05:10:12 2010
Subject: AW: [Qgis-developer] Line symbology-ng
Message-ID: <1661059053.45191268903407846.JavaMail.root@srsofaioi13477.ktso.ch>

Hi all

speaking of line symbology-ng, is it possible to have own caps for the line? I'd would be great to have e.g a cross (or any other marker) at the startingpoint and at the endpoint of a line in some cases. Is this already possible or are plans existing about it?

best regards
C?dric


mit freundlichen Gr?ssen

C?dric M?ri
GIS-Informatiker

--
Kanton Solothurn
Bau- und Justizdepartement
Amt f?r Geoinformation
R?tistrasse 4
4501 Solothurn

Telefon: +41 (0)32 627 24 75
Telefax: +41 (0)32 627 22 14
mailto:cedric.moeri@bd.so.ch
http://www.agi.so.ch


----- Originalnachricht -----
Von: "Martin Dobias" <wonder.sk@gmail.com>
Gesendet: Mit, 17.3.2010 20:44
An: "Borys Jurgiel" <borysiasty@aster.pl>
Cc: qgis-developer@lists.osgeo.org
Betreff: Re: [Qgis-developer] Line symbology-ng

On Wed, Mar 17, 2010 at 8:42 PM, Borys Jurgiel <borysiasty@aster.pl> wrote:
> Dnia ?roda, 17 marca 2010 o 20:23:28 John C. Tull napisa?(a):
>> Hi Martin,
>>
>> I was wondering if it would be possible to have a line cap style that is
>> open. In the current setup, you have to pick a cap, and this draws lines
>> across line symbology at each line segment. This becomes unattractive with
>> highway symbology as shown in the example below for the black outlined
>> route. Maybe there is a workaround that I am not considering.
>
> Use the "symbol levels" button and put the bottom layer of all segments to the
> level 1 and the top layer of all segments to the level 2.

... or keep the default settings: level 0 for the bottom layer and
level 1 for the top layer :-)

Martin
_______________________________________________
Qgis-developer mailing list
Qgis-developer@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/qgis-developer
From wonder.sk at gmail.com  Thu Mar 18 05:54:29 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Thu Mar 18 05:54:33 2010
Subject: [Qgis-developer] Line symbology-ng
In-Reply-To: <1661059053.45191268903407846.JavaMail.root@srsofaioi13477.ktso.ch>
References: <1661059053.45191268903407846.JavaMail.root@srsofaioi13477.ktso.ch>
Message-ID: <e8e7199c1003180254x58e22b2dv3b851e118a488422@mail.gmail.com>

On Thu, Mar 18, 2010 at 10:10 AM, M?ri Cedric <Cedric.Moeri@bd.so.ch> wrote:
> Hi all
>
> speaking of line symbology-ng, is it possible to have own caps for the line? I'd would be great to have e.g a cross (or any other marker) at the startingpoint and at the endpoint of a line in some cases. Is this already possible or are plans existing about it?

Hi Cedric

what you ask for should be available within line decoration symbol
layer. Currently it supports only drawing an arrow at the end of the
line, but the idea is to support further markers at both
start/endpoint. Any ideas what decorations should be supported are
welcome.

Martin
From borysiasty at aster.pl  Thu Mar 18 06:14:21 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Thu Mar 18 06:14:24 2010
Subject: [Qgis-developer] Line symbology-ng
In-Reply-To: <e8e7199c1003180254x58e22b2dv3b851e118a488422@mail.gmail.com>
References: <1661059053.45191268903407846.JavaMail.root@srsofaioi13477.ktso.ch>
	<e8e7199c1003180254x58e22b2dv3b851e118a488422@mail.gmail.com>
Message-ID: <201003181114.21960.borysiasty@aster.pl>

Dnia czwartek, 18 marca 2010 o 10:54:29 Martin Dobias napisa?(a):
> On Thu, Mar 18, 2010 at 10:10 AM, M?ri Cedric <Cedric.Moeri@bd.so.ch> wrote:
> > Hi all
> > 
> > speaking of line symbology-ng, is it possible to have own caps for the
> > line? I'd would be great to have e.g a cross (or any other marker) at
> > the startingpoint and at the endpoint of a line in some cases. Is this
> > already possible or are plans existing about it?
> 
> Hi Cedric
> 
> what you ask for should be available within line decoration symbol
> layer. Currently it supports only drawing an arrow at the end of the
> line, but the idea is to support further markers at both
> start/endpoint. Any ideas what decorations should be supported are
> welcome.

What about using svg markers from the collection used for the marker line?

Btw. Are we hackfesting yet? :)
From Cedric.Moeri at bd.so.ch  Thu Mar 18 06:34:14 2010
From: Cedric.Moeri at bd.so.ch (=?iso-8859-1?Q?M=F6ri_Cedric?=)
Date: Thu Mar 18 06:34:24 2010
Subject: AW: [Qgis-developer] Line symbology-ng
Message-ID: <837821334.65561268908454332.JavaMail.root@srsofaioi13477.ktso.ch>

Hi Martin

Thanks for the hint. For me respectively my tasks it would be best, if any point marker (svg) could be choosen.

mit freundlichen Gr?ssen

C?dric M?ri
GIS-Informatiker

--
Kanton Solothurn
Bau- und Justizdepartement
Amt f?r Geoinformation
R?tistrasse 4
4501 Solothurn

Telefon: +41 (0)32 627 24 75
Telefax: +41 (0)32 627 22 14
mailto:cedric.moeri@bd.so.ch
http://www.agi.so.ch


----- Originalnachricht -----
Von: "Martin Dobias" <wonder.sk@gmail.com>
Gesendet: Don, 18.3.2010 10:54
An: "M?ri Cedric" <Cedric.Moeri@bd.so.ch>
Cc: qgis-developer@lists.osgeo.org
Betreff: Re: [Qgis-developer] Line symbology-ng

On Thu, Mar 18, 2010 at 10:10 AM, M?ri Cedric <Cedric.Moeri@bd.so.ch> wrote:
> Hi all
>
> speaking of line symbology-ng, is it possible to have own caps for the line? I'd would be great to have e.g a cross (or any other marker) at the startingpoint and at the endpoint of a line in some cases. Is this already possible or are plans existing about it?

Hi Cedric

what you ask for should be available within line decoration symbol
layer. Currently it supports only drawing an arrow at the end of the
line, but the idea is to support further markers at both
start/endpoint. Any ideas what decorations should be supported are
welcome.

Martin
From cavallini at faunalia.it  Thu Mar 18 08:41:51 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu Mar 18 08:41:59 2010
Subject: [Qgis-developer] Line symbology-ng
In-Reply-To: <201003181114.21960.borysiasty@aster.pl>
References: <1661059053.45191268903407846.JavaMail.root@srsofaioi13477.ktso.ch>
	<e8e7199c1003180254x58e22b2dv3b851e118a488422@mail.gmail.com>
	<201003181114.21960.borysiasty@aster.pl>
Message-ID: <7a38285c076ca2e61dd2ddf6f93daeab@localhost>


On Thu, 18 Mar 2010 11:14:21 +0100, Borys Jurgiel <borysiasty@aster.pl>
wrote:
> What about using svg markers from the collection used for the marker
line?
> 
> Btw. Are we hackfesting yet? :)

Just starting...
-- 
http://faunalia.it/pc
From woklist at kyngchaos.com  Thu Mar 18 11:50:42 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu Mar 18 11:50:50 2010
Subject: [Qgis-developer] Python import error on OS X
In-Reply-To: <ceb0de271003172042j39e22cf5g1ef1274afb12110e@mail.gmail.com>
References: <ceb0de271003131304x2ef157dai9772c9a464d4d52e@mail.gmail.com>
	<15A849CE-1474-4337-9775-8802BFECCCE4@kyngchaos.com>
	<ceb0de271003172042j39e22cf5g1ef1274afb12110e@mail.gmail.com>
Message-ID: <8F7A1B77-615C-4B6D-B608-8294C56A0F17@kyngchaos.com>

Do you know what you cleaned up?  It would be good to know what kinds of things can interfere with the distributed binaries.

On Mar 17, 2010, at 10:42 PM, Gary Sherman wrote:

> On Wed, Mar 17, 2010 at 8:15 AM, William Kyngesburye
> <woklist@kyngchaos.com> wrote:
>> Which OSX version?
> Snow
>> 
>> Did you try the full version, and does it work?
>> 
>> I tried it from the Python console in Qgis (standalone and full) on both Leopard and Snow with no errors.
> 
> I think it was a conflict somewhere on my system. I cleaned up things
> and reinstalled Xcode. Now I can build using Xcode and CMake without
> problems.
> 
> Thanks,
> 
> -gary
>> 
>> On Mar 13, 2010, at 3:04 PM, Gary Sherman wrote:
>> 
>>> On OS X using the standalone build (1.4) from KyngChaos:
>>> 
>>> from qgis.core import *
>>> TypeError: metaclass conflict: the metaclass of a derived class must
>>> be a (non-strict) subclass of the metaclasses of all its bases
>>> 
>>> Any ideas?

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying, fighting, and all for things that the beasts of the jungle would not deign to possess - money to purchase the effeminate pleasures of weaklings.  And yet withal bound down by silly customs that make them slaves to their unhappy lot while firm in the belief that they be the lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan


From yves.bolognini at camptocamp.com  Fri Mar 19 06:42:50 2010
From: yves.bolognini at camptocamp.com (Yves Bolognini)
Date: Fri Mar 19 06:48:22 2010
Subject: [Qgis-developer] Re: Python plugin menu questions
In-Reply-To: <7fb3a4e61003160705he776fcbv9a2c3c3e459372ea@mail.gmail.com>
References: <7fb3a4e61003160705he776fcbv9a2c3c3e459372ea@mail.gmail.com>
Message-ID: <7fb3a4e61003190342x708c1ab9w111c89ab63005e15@mail.gmail.com>

Just a small update about how to disable menus in Python plugins.

> 1) Remove/hide an entire menu, like the Edit menu

One solution:

menubar = self.iface.editMenu().parentWidget()
actions = menubar.actions()
menubar.removeAction(actions[1])

> 2) Remove/hide the contextual menu entries "Show Overview" (contextual
> toolbar menu) and "Add to Overview" (contextual layer menu). Actually
> I need to completely disable the overview, so it includes removing
> these menu entries

It seems that's not possible. Contextual layer menu is created
dynamically in app/legend/qgslegend.cpp when a right-click occurs. So
we don't have access to it in plugins.

Regards,
Yves
From wonder.sk at gmail.com  Fri Mar 19 07:46:21 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Fri Mar 19 07:46:29 2010
Subject: [Qgis-developer] --noplugins command line argument
Message-ID: <e8e7199c1003190446g1d8b81a4p5bd12aa641b5e5d2@mail.gmail.com>

Hi

seeing that there's an increased number of cases where some 3rd party
plugins caused QGIS to crash during startup, I've added --noplugins
command line option in r13076. So, next time someone runs into this
type of trouble, this option can be used to find out whether it's
caused by a plugin or by QGIS itself (without having to move or delete
~/.qgis/python/plugins directory).

Cheers
Martin
From borysiasty at aster.pl  Fri Mar 19 09:29:26 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Fri Mar 19 09:29:30 2010
Subject: [Qgis-developer] Native file dialog bugs and the new Save As Vector
	functionality.
Message-ID: <201003191429.27387.borysiasty@aster.pl>

Hi all,
The native file dialogs in KDE 4.4 (and afair 4.3 too) seem to contain some
bugs. The most serious bug is broken file type selector: the &selectedFilter
pointer doesn't interact with the selector.

It means that in all native file dialogs the file type filter is initially set always
to the first item, ignoring the last used value stored in QSettings. But the
new Save As Vector functionality is completely broken, as the file format 
is not fetched from the selector and the layer is always saved as Shapefile.

Besides of that, there are also some minor but irritating bugs in the native
version, while everything works perfectly with non-native Qt4 dialog.

So the first suggestion is to set the non-native dialog until the bug in KDE
is fixed:

-  QString outputFile = QFileDialog::getSaveFileName( 0, tr( "Save layer as..." ), dirName, filterString, &selectedFilter );
+  QString outputFile = QFileDialog::getSaveFileName( 0, tr( "Save layer as..." ), dirName, filterString, &selectedFilter, QFileDialog::DontUseNativeDialog )

The second idea is to go further and use our custom dialog with the encoding
field and also add a CRS selector: a field with default value (the present 
layer CRS) and a button to call the big CRS dialog only if needed.


What do you think? Not long ago we switched to the native version in the Open
Vector dialog, so I'm not so hurry to make an opposite change here. But in fact
I prefer one dialog with encoding and CRS fields rather than the present sequence
of the two dialogs.
From Martin.Spott at mgras.net  Fri Mar 19 10:19:50 2010
From: Martin.Spott at mgras.net (Martin Spott)
Date: Fri Mar 19 10:20:59 2010
Subject: [Qgis-developer] Noticeable delays when editing on a remote PostGIS
	DB
Message-ID: <ho0166$11ua$1@osprey.mgras.de>

Folks,

I'd like to make you aware of some surprising, maybe 'unfortunate'
delays when trying to use QGIS for editing polygon layers on a remote
PostGIS DB via encrypted network tunnel.

According to tests kindly performed by Juergen Fischer, the user
interface is quite snappy when editing on a local PostGIS DB, so
apparently our issue is related to the somewhat 'narrow' network
connection.
So I've made an annotated log of the server queries as performed by
QGIS (fresh build from today's SVN), build on Debian Lenny against GDAL
1.6.0, in order to find out what's going on behind the scene.

What strikes me is the action of fetching every object (1347 objects in
this case, most layers are a lot more dense) in a 20x20 degree !! box
(that's magnitudes wider than the current view), which happens three
times: On selecting the object to be edited, on selecting the node to
be moved, on actually moving the node.

Does fetching from such a huge region happen intentionally ?

The log is a available here:

  http://foxtrot.mgras.net/static/PG-QGIS.log.gz

Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------
From wonder.sk at gmail.com  Fri Mar 19 10:32:32 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Fri Mar 19 10:32:35 2010
Subject: [Qgis-developer] Noticeable delays when editing on a remote 
	PostGIS DB
In-Reply-To: <ho0166$11ua$1@osprey.mgras.de>
References: <ho0166$11ua$1@osprey.mgras.de>
Message-ID: <e8e7199c1003190732g70a6762ci715e26920b90b7df@mail.gmail.com>

On Fri, Mar 19, 2010 at 3:19 PM, Martin Spott <Martin.Spott@mgras.net> wrote:
> What strikes me is the action of fetching every object (1347 objects in
> this case, most layers are a lot more dense) in a 20x20 degree !! box
> (that's magnitudes wider than the current view), which happens three
> times: On selecting the object to be edited, on selecting the node to
> be moved, on actually moving the node.
>
> Does fetching from such a huge region happen intentionally ?

Hi

please check in Options > Digitising > Snapping - what values are set
there? I believe you just need to correct the units (e.g. use 10
pixels search radius instead of 10 map units).

Regards
Martin
From Martin.Spott at mgras.net  Fri Mar 19 11:07:19 2010
From: Martin.Spott at mgras.net (Martin Spott)
Date: Fri Mar 19 11:08:28 2010
Subject: [Qgis-developer] Noticeable delays when editing on a remote
References: <ho0166$11ua$1@osprey.mgras.de>
	<e8e7199c1003190732g70a6762ci715e26920b90b7df@mail.gmail.com>
Message-ID: <ho03v7$pu2$1@osprey.mgras.de>

Hi Martin,

Martin Dobias wrote:
> On Fri, Mar 19, 2010 at 3:19 PM, Martin Spott <Martin.Spott@mgras.net> wrote:

>> What strikes me is the action of fetching every object (1347 objects in
>> this case, most layers are a lot more dense) in a 20x20 degree !! box
>> (that's magnitudes wider than the current view), which happens three
>> times: On selecting the object to be edited, on selecting the node to
>> be moved, on actually moving the node.
>>
>> Does fetching from such a huge region happen intentionally ?

> please check in Options > Digitising > Snapping - what values are set
> there? I believe you just need to correct the units (e.g. use 10
> pixels search radius instead of 10 map units).

Indeed, swapping from map units to pixels makes a significant
difference - an excellent hint !


Looks like this one's been pretty easy for you - but I'm having a
second one in the queue  ;-)

I'm experiencing a (now) smaller but still noticeable delay when
clicking onto a node with the node tool for the first time while in
edit mode (inserting the red squares into every node of the polygon) as
well as when clicking onto the same node again (turning the single
square into blue) and keeping the mose button pressed while starting to
move.

When doing so with a layer imported from a local Shapefile, I'm seeing
the red squares almost instantly upon first clicking and when I'm
starting to move the node it'll also turn into blue and I'm seeing the
blue line segments almost instantly as well. Nevertheless, these two
actions are still delayed when editing the remove PostGIS layer even
though there's not a single SQL query sent to the DB server while doing
so.

Do you have such a nice hint for this one as well ?

Thanks,

	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------
From john.tull at wildnevada.org  Fri Mar 19 11:41:54 2010
From: john.tull at wildnevada.org (John C. Tull)
Date: Fri Mar 19 11:41:59 2010
Subject: [Qgis-developer] --noplugins command line argument
In-Reply-To: <e8e7199c1003190446g1d8b81a4p5bd12aa641b5e5d2@mail.gmail.com>
References: <e8e7199c1003190446g1d8b81a4p5bd12aa641b5e5d2@mail.gmail.com>
Message-ID: <D5E5445F-2BE0-4B2C-957E-474495A0DB86@me.com>

Hi Martin,

This is a good idea. Thanks for implementing this.

Could there be a keyboard trigger that, when held during application startup, would  also do this? Something like holding down the shift key? This would present a nice solution for users that do not start from the commandline or don't know how to start qgis from a terminal on Mac or Windows (and linux, I suppose).

Cheers,
John

On Mar 19, 2010, at 4:46 AM, Martin Dobias wrote:

> Hi
> 
> seeing that there's an increased number of cases where some 3rd party
> plugins caused QGIS to crash during startup, I've added --noplugins
> command line option in r13076. So, next time someone runs into this
> type of trouble, this option can be used to find out whether it's
> caused by a plugin or by QGIS itself (without having to move or delete
> ~/.qgis/python/plugins directory).
> 
> Cheers
> Martin
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From jctull at gmail.com  Fri Mar 19 11:42:12 2010
From: jctull at gmail.com (John C. Tull)
Date: Fri Mar 19 11:50:12 2010
Subject: [Qgis-developer] --noplugins command line argument
In-Reply-To: <e8e7199c1003190446g1d8b81a4p5bd12aa641b5e5d2@mail.gmail.com>
References: <e8e7199c1003190446g1d8b81a4p5bd12aa641b5e5d2@mail.gmail.com>
Message-ID: <27C17D96-9375-4CEB-BAD9-2C26CC7A0853@gmail.com>

Hi Martin,

This is a good idea. Thanks for implementing this.

Could there be a keyboard trigger that, when held during application startup, would  also do this? Something like holding down the shift key? This would present a nice solution for users that do not start from the commandline or don't know how to start qgis from a terminal on Mac or Windows (and linux, I suppose).

Cheers,
John

On Mar 19, 2010, at 4:46 AM, Martin Dobias wrote:

> Hi
> 
> seeing that there's an increased number of cases where some 3rd party
> plugins caused QGIS to crash during startup, I've added --noplugins
> command line option in r13076. So, next time someone runs into this
> type of trouble, this option can be used to find out whether it's
> caused by a plugin or by QGIS itself (without having to move or delete
> ~/.qgis/python/plugins directory).
> 
> Cheers
> Martin
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From jctull at gmail.com  Fri Mar 19 11:53:27 2010
From: jctull at gmail.com (John C. Tull)
Date: Fri Mar 19 11:53:32 2010
Subject: [Qgis-developer] Native file dialog bugs and the new Save As
	Vector functionality.
In-Reply-To: <201003191429.27387.borysiasty@aster.pl>
References: <201003191429.27387.borysiasty@aster.pl>
Message-ID: <BE78FEB4-3F0E-4CCB-92F8-4EBD39526175@gmail.com>

Hi Borys,

On OS X, the native dialog seems to do what it should. Saving a layer to an ogr format brings that same format as the default the next time you choose save as. I am not sure of other problems that you are experiencing on kde, but things seem fine on OS X.

I would recommend any change away from the native dialog be specific to kde. The non-native dialogs on OS X are very awkward and clunky. In fact, it would be great to make  an effort to bring native dialog support to all existing ui elements (native in the application as well as plugins).

Regards,
John

On Mar 19, 2010, at 6:29 AM, Borys Jurgiel wrote:

> Hi all,
> The native file dialogs in KDE 4.4 (and afair 4.3 too) seem to contain some
> bugs. The most serious bug is broken file type selector: the &selectedFilter
> pointer doesn't interact with the selector.
> 
> It means that in all native file dialogs the file type filter is initially set always
> to the first item, ignoring the last used value stored in QSettings. But the
> new Save As Vector functionality is completely broken, as the file format 
> is not fetched from the selector and the layer is always saved as Shapefile.
> 
> Besides of that, there are also some minor but irritating bugs in the native
> version, while everything works perfectly with non-native Qt4 dialog.
> 
> So the first suggestion is to set the non-native dialog until the bug in KDE
> is fixed:
> 
> -  QString outputFile = QFileDialog::getSaveFileName( 0, tr( "Save layer as..." ), dirName, filterString, &selectedFilter );
> +  QString outputFile = QFileDialog::getSaveFileName( 0, tr( "Save layer as..." ), dirName, filterString, &selectedFilter, QFileDialog::DontUseNativeDialog )
> 
> The second idea is to go further and use our custom dialog with the encoding
> field and also add a CRS selector: a field with default value (the present 
> layer CRS) and a button to call the big CRS dialog only if needed.
> 
> 
> What do you think? Not long ago we switched to the native version in the Open
> Vector dialog, so I'm not so hurry to make an opposite change here. But in fact
> I prefer one dialog with encoding and CRS fields rather than the present sequence
> of the two dialogs.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From borysiasty at aster.pl  Fri Mar 19 15:59:46 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Fri Mar 19 15:59:52 2010
Subject: [Qgis-developer] Native file dialog bugs and the new Save As
	Vector functionality.
In-Reply-To: <BE78FEB4-3F0E-4CCB-92F8-4EBD39526175@gmail.com>
References: <201003191429.27387.borysiasty@aster.pl>
	<BE78FEB4-3F0E-4CCB-92F8-4EBD39526175@gmail.com>
Message-ID: <201003192059.46479.borysiasty@aster.pl>

Dnia pi?tek, 19 marca 2010 o 16:53:27 John C. Tull napisa?(a):
> Hi Borys,
> 
> On OS X, the native dialog seems to do what it should. Saving a layer to an
> ogr format brings that same format as the default the next time you choose
> save as. I am not sure of other problems that you are experiencing on kde,
> but things seem fine on OS X.

Hi John,

I'm pretty sure it's related only to the KDE4 native dialog. Other problems 
are: the last used directory is set as the initial file name, instead of 
entering into it and the save button is labeled "Open".

> I would recommend any change away from the native dialog be specific to
> kde. The non-native dialogs on OS X are very awkward and clunky. In fact,
> it would be great to make  an effort to bring native dialog support to all
> existing ui elements (native in the application as well as plugins).

The KDE problem has just provoked me to think about choosing one of them. 
I admit the native dialogs are far prettier, but are less usable. The main 
problem is native dialogs can't contain encoding and CRS selectors. The 
present two-step saving is very inconvenient for me (I assume in most cases 
you don't change the layer CRS) and there is an urgent need of implementing 
some kind of encoding selector. Adding a third step wolud be quite ridiculous, 
but for non-English users a possibility of switching between utf and cp 
encoding is essential.

The same problem is with opening a vector layer - I hate that additional 
dialog (forgive mi guys :D ). 

I believe we should stick with the encodingFileDialog at least as long as ESRI 
uses cp encodings :( I know we use the native dialogs in a few places, but it 
is one of the most painful problems my users meet. It makes QGIS just 
incompatible with shapefiles from ESRI.

B.
From jctull at gmail.com  Fri Mar 19 17:51:46 2010
From: jctull at gmail.com (John C. Tull)
Date: Fri Mar 19 17:51:52 2010
Subject: [Qgis-developer] Native file dialog bugs and the new Save As
	Vector functionality.
In-Reply-To: <201003192059.46479.borysiasty@aster.pl>
References: <201003191429.27387.borysiasty@aster.pl>
	<BE78FEB4-3F0E-4CCB-92F8-4EBD39526175@gmail.com>
	<201003192059.46479.borysiasty@aster.pl>
Message-ID: <3BADE4A8-E50E-4C9E-9ABE-73462E4431C3@gmail.com>

Hi Borys,

You've made some good points. Seems likely something that the broader community should weigh in on.

From my perspective, I agree that the multi-dialog window thing is unusual. On the other hand, the problems that are created from the qt dialogs on my OS are more annoying. Perhaps this needs to be a user-configurable option. Have both types of dialog available based on a choice in the application options. Is this feasible?

John

On Mar 19, 2010, at 12:59 PM, Borys Jurgiel wrote:

> Dnia pi?tek, 19 marca 2010 o 16:53:27 John C. Tull napisa?(a):
>> Hi Borys,
>> 
>> On OS X, the native dialog seems to do what it should. Saving a layer to an
>> ogr format brings that same format as the default the next time you choose
>> save as. I am not sure of other problems that you are experiencing on kde,
>> but things seem fine on OS X.
> 
> Hi John,
> 
> I'm pretty sure it's related only to the KDE4 native dialog. Other problems 
> are: the last used directory is set as the initial file name, instead of 
> entering into it and the save button is labeled "Open".
> 
>> I would recommend any change away from the native dialog be specific to
>> kde. The non-native dialogs on OS X are very awkward and clunky. In fact,
>> it would be great to make  an effort to bring native dialog support to all
>> existing ui elements (native in the application as well as plugins).
> 
> The KDE problem has just provoked me to think about choosing one of them. 
> I admit the native dialogs are far prettier, but are less usable. The main 
> problem is native dialogs can't contain encoding and CRS selectors. The 
> present two-step saving is very inconvenient for me (I assume in most cases 
> you don't change the layer CRS) and there is an urgent need of implementing 
> some kind of encoding selector. Adding a third step wolud be quite ridiculous, 
> but for non-English users a possibility of switching between utf and cp 
> encoding is essential.
> 
> The same problem is with opening a vector layer - I hate that additional 
> dialog (forgive mi guys :D ). 
> 
> I believe we should stick with the encodingFileDialog at least as long as ESRI 
> uses cp encodings :( I know we use the native dialogs in a few places, but it 
> is one of the most painful problems my users meet. It makes QGIS just 
> incompatible with shapefiles from ESRI.
> 
> B.

From marco at hugis.net  Sat Mar 20 05:56:12 2010
From: marco at hugis.net (Marco Hugentobler)
Date: Sat Mar 20 05:56:37 2010
Subject: [Qgis-developer] Native file dialog bugs and the new Save As
	Vector functionality.
In-Reply-To: <3BADE4A8-E50E-4C9E-9ABE-73462E4431C3@gmail.com>
References: <201003191429.27387.borysiasty@aster.pl>
	<201003192059.46479.borysiasty@aster.pl>
	<3BADE4A8-E50E-4C9E-9ABE-73462E4431C3@gmail.com>
Message-ID: <201003201056.12151.marco@hugis.net>

Hi Borys, John

For me on KDE, saving a file to an OGR format works as it should (not only in 
shp), remembering the last filter does not work.

An additional advantage of native dialogs is that it is possible to access 
network drives on windows. For many users, this is a crucial point.

However, I agree with the useability concerns of Borys. So user option seems 
good to me (default to non-native dialogs?)

Regards,
Marco




Am Freitag, 19. M?rz 2010 22.51:46 schrieb John C. Tull:
> Hi Borys,
> 
> You've made some good points. Seems likely something that the broader
>  community should weigh in on.
> 
> From my perspective, I agree that the multi-dialog window thing is unusual.
>  On the other hand, the problems that are created from the qt dialogs on my
>  OS are more annoying. Perhaps this needs to be a user-configurable option.
>  Have both types of dialog available based on a choice in the application
>  options. Is this feasible?
> 
> John
> 
> On Mar 19, 2010, at 12:59 PM, Borys Jurgiel wrote:
> > Dnia pi?tek, 19 marca 2010 o 16:53:27 John C. Tull napisa?(a):
> >> Hi Borys,
> >>
> >> On OS X, the native dialog seems to do what it should. Saving a layer to
> >> an ogr format brings that same format as the default the next time you
> >> choose save as. I am not sure of other problems that you are
> >> experiencing on kde, but things seem fine on OS X.
> >
> > Hi John,
> >
> > I'm pretty sure it's related only to the KDE4 native dialog. Other
> > problems are: the last used directory is set as the initial file name,
> > instead of entering into it and the save button is labeled "Open".
> >
> >> I would recommend any change away from the native dialog be specific to
> >> kde. The non-native dialogs on OS X are very awkward and clunky. In
> >> fact, it would be great to make  an effort to bring native dialog
> >> support to all existing ui elements (native in the application as well
> >> as plugins).
> >
> > The KDE problem has just provoked me to think about choosing one of them.
> > I admit the native dialogs are far prettier, but are less usable. The
> > main problem is native dialogs can't contain encoding and CRS selectors.
> > The present two-step saving is very inconvenient for me (I assume in most
> > cases you don't change the layer CRS) and there is an urgent need of
> > implementing some kind of encoding selector. Adding a third step wolud be
> > quite ridiculous, but for non-English users a possibility of switching
> > between utf and cp encoding is essential.
> >
> > The same problem is with opening a vector layer - I hate that additional
> > dialog (forgive mi guys :D ).
> >
> > I believe we should stick with the encodingFileDialog at least as long as
> > ESRI uses cp encodings :( I know we use the native dialogs in a few
> > places, but it is one of the most painful problems my users meet. It
> > makes QGIS just incompatible with shapefiles from ESRI.
> >
> > B.
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

-- 
Dr. Marco Hugentobler
HUGIS GmbH
Webereistr. 66
CH-8134 Adliswil
marco@hugis.net
www.hugis.net
Technical Advisor QGIS Project Steering Committee
From borysiasty at aster.pl  Sat Mar 20 06:23:49 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Sat Mar 20 06:23:53 2010
Subject: [Qgis-developer] Native file dialog bugs and the new Save As
	Vector functionality.
In-Reply-To: <201003201056.12151.marco@hugis.net>
References: <201003191429.27387.borysiasty@aster.pl>
	<3BADE4A8-E50E-4C9E-9ABE-73462E4431C3@gmail.com>
	<201003201056.12151.marco@hugis.net>
Message-ID: <201003201123.49883.borysiasty@aster.pl>

Dnia sobota, 20 marca 2010 o 10:56:12 Marco Hugentobler napisa?(a):
> Hi Borys, John
> 
> For me on KDE, saving a file to an OGR format works as it should (not only
> in shp), remembering the last filter does not work.

So the selectedFilter pointer works in one direction? Nice too ;-)

> An additional advantage of native dialogs is that it is possible to access
> network drives on windows. For many users, this is a crucial point.
> 
> However, I agree with the useability concerns of Borys. So user option
> seems good to me (default to non-native dialogs?)

So do you mean a choice between one custom dialog with build-in extra controls 
and a series of dialogs, including the native one?

Well... I can't say I love this idea :D But maybe it's the best solution for 
now, to test it and think out something better for the 2.0
From borysiasty at aster.pl  Sat Mar 20 06:33:37 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Sat Mar 20 06:33:40 2010
Subject: [Qgis-developer] Native file dialog bugs and the new Save As
	Vector functionality.
In-Reply-To: <3BADE4A8-E50E-4C9E-9ABE-73462E4431C3@gmail.com>
References: <201003191429.27387.borysiasty@aster.pl>
	<201003192059.46479.borysiasty@aster.pl>
	<3BADE4A8-E50E-4C9E-9ABE-73462E4431C3@gmail.com>
Message-ID: <201003201133.37405.borysiasty@aster.pl>

Dnia pi?tek, 19 marca 2010 o 22:51:46 John C. Tull napisa?(a):
> Hi Borys,
> 
> You've made some good points. Seems likely something that the broader
> community should weigh in on.
> 
> From my perspective, I agree that the multi-dialog window thing is unusual.
> On the other hand, the problems that are created from the qt dialogs on my
> OS are more annoying. Perhaps this needs to be a user-configurable option.
> Have both types of dialog available based on a choice in the application
> options. Is this feasible?

Of course it is. Choosing between two poor options still isn't a real 
solution, but may be a workaround for now. For 2.0 I'd love to think out one 
consistent solution for opening, creating and updating data sources (a 
separate subsystem with metadata browser, search engine, some ideas from arc 
catalog?).
From borysiasty at aster.pl  Sat Mar 20 06:59:08 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Sat Mar 20 06:59:12 2010
Subject: [Qgis-developer] Re: [Qgis-community-team] GUI translation
In-Reply-To: <f2b361eb1003191104x20f815d0wd96847b6acb1e7e9@mail.gmail.com>
References: <4BA36EE6.9000605@faunalia.it>
	<5b1890a51003190927s29e76f10qd69895e31a2934e0@mail.gmail.com>
	<f2b361eb1003191104x20f815d0wd96847b6acb1e7e9@mail.gmail.com>
Message-ID: <201003201159.09096.borysiasty@aster.pl>

Dnia pi?tek, 19 marca 2010 o 19:04:28 Zoran Jankovic napisa?(a):
> +1 for the plugins.

Obviously they should be translated, but the question is how to do it. 

One idea is to create an additional set of .ts files for plugins (to avoid a 
mess in the main files). Somebody (probably me... ;) ) would then 
systematically review all plugins and grab strings from translateable ones.
By 'translateable' plugins I especially mean those containing identifable 
class names (=translation contexts), so it's necessary to control them 
manually. Otherwise we would achieve a big bunch of strings mixed together in 
irrational contexts ;)

Other idea would be to keep all the translation stuff inside plugins and only 
provide a web utility to help authors to publish .ts files (one file for each 
plugin) and translators to update them.

I believe the former is far better.

Regards,
B.
From wonder.sk at gmail.com  Sat Mar 20 07:39:47 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sat Mar 20 07:39:53 2010
Subject: [Qgis-developer] Re: [Qgis-community-team] GUI translation
In-Reply-To: <201003201159.09096.borysiasty@aster.pl>
References: <4BA36EE6.9000605@faunalia.it>
	<5b1890a51003190927s29e76f10qd69895e31a2934e0@mail.gmail.com>
	<f2b361eb1003191104x20f815d0wd96847b6acb1e7e9@mail.gmail.com>
	<201003201159.09096.borysiasty@aster.pl>
Message-ID: <e8e7199c1003200439m384166e9i25fa48ce13f307e9@mail.gmail.com>

Hi Borys

On Sat, Mar 20, 2010 at 11:59 AM, Borys Jurgiel <borysiasty@aster.pl> wrote:
> Dnia pi?tek, 19 marca 2010 o 19:04:28 Zoran Jankovic napisa?(a):
>> +1 for the plugins.
>
> Obviously they should be translated, but the question is how to do it.
>
> One idea is to create an additional set of .ts files for plugins (to avoid a
> mess in the main files). Somebody (probably me... ;) ) would then
> systematically review all plugins and grab strings from translateable ones.
> By 'translateable' plugins I especially mean those containing identifable
> class names (=translation contexts), so it's necessary to control them
> manually. Otherwise we would achieve a big bunch of strings mixed together in
> irrational contexts ;)

maybe I'm missing something, but isn't pylupdate4 utility there for
extracting the translatable strings from python sources?

Martin
From borysiasty at aster.pl  Sat Mar 20 07:54:05 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Sat Mar 20 07:54:08 2010
Subject: [Qgis-developer] Re: [Qgis-community-team] GUI translation
In-Reply-To: <e8e7199c1003200439m384166e9i25fa48ce13f307e9@mail.gmail.com>
References: <4BA36EE6.9000605@faunalia.it>
	<201003201159.09096.borysiasty@aster.pl>
	<e8e7199c1003200439m384166e9i25fa48ce13f307e9@mail.gmail.com>
Message-ID: <201003201254.05656.borysiasty@aster.pl>

Dnia sobota, 20 marca 2010 o 12:39:47 Martin Dobias napisa?(a):
> Hi Borys
> 
> On Sat, Mar 20, 2010 at 11:59 AM, Borys Jurgiel <borysiasty@aster.pl> wrote:
> > Dnia pi?tek, 19 marca 2010 o 19:04:28 Zoran Jankovic napisa?(a):
> >> +1 for the plugins.
> > 
> > Obviously they should be translated, but the question is how to do it.
> > 
> > One idea is to create an additional set of .ts files for plugins (to
> > avoid a mess in the main files). Somebody (probably me... ;) ) would
> > then systematically review all plugins and grab strings from
> > translateable ones. By 'translateable' plugins I especially mean those
> > containing identifable class names (=translation contexts), so it's
> > necessary to control them manually. Otherwise we would achieve a big
> > bunch of strings mixed together in irrational contexts ;)
> 
> maybe I'm missing something, but isn't pylupdate4 utility there for
> extracting the translatable strings from python sources?

There is, of course. I only mean that someone has to prior choose plugins 
which won't make a mess in the ts files.

For translators it is essential to know where each string comes from (at least 
from which plugin). QtLinguist uses class names for grouping strings into so 
called "contexts". It works perfectly as long class names are unique and 
meaningful, as QgsPluginNameDialogName.

In practice, many authors uses class names like QMyDialog, so grabbing strings 
from such plugins would create a huge context QMyDialog containing strings 
from dozens of plugins. It makes translators shooting in the dark :)
From wonder.sk at gmail.com  Sat Mar 20 08:20:49 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sat Mar 20 08:20:52 2010
Subject: [Qgis-developer] Re: [Qgis-community-team] GUI translation
In-Reply-To: <201003201254.05656.borysiasty@aster.pl>
References: <4BA36EE6.9000605@faunalia.it>
	<201003201159.09096.borysiasty@aster.pl>
	<e8e7199c1003200439m384166e9i25fa48ce13f307e9@mail.gmail.com>
	<201003201254.05656.borysiasty@aster.pl>
Message-ID: <e8e7199c1003200520t20f8e7bak3b0f1d5ef2a303f3@mail.gmail.com>

On Sat, Mar 20, 2010 at 12:54 PM, Borys Jurgiel <borysiasty@aster.pl> wrote:
> Dnia sobota, 20 marca 2010 o 12:39:47 Martin Dobias napisa?(a):
>> maybe I'm missing something, but isn't pylupdate4 utility there for
>> extracting the translatable strings from python sources?
>
> There is, of course. I only mean that someone has to prior choose plugins
> which won't make a mess in the ts files.
>
> For translators it is essential to know where each string comes from (at least
> from which plugin). QtLinguist uses class names for grouping strings into so
> called "contexts". It works perfectly as long class names are unique and
> meaningful, as QgsPluginNameDialogName.

Ok, but isn't it easy to generate translation files per plugin? So the
translators will
have the contexts naturally split from the other strings. Each plugin
would install
its own translations...

Martin
From borysiasty at aster.pl  Sat Mar 20 08:40:02 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Sat Mar 20 08:40:06 2010
Subject: [Qgis-developer] Re: [Qgis-community-team] GUI translation
In-Reply-To: <e8e7199c1003200520t20f8e7bak3b0f1d5ef2a303f3@mail.gmail.com>
References: <4BA36EE6.9000605@faunalia.it>
	<201003201254.05656.borysiasty@aster.pl>
	<e8e7199c1003200520t20f8e7bak3b0f1d5ef2a303f3@mail.gmail.com>
Message-ID: <201003201340.03276.borysiasty@aster.pl>

Dnia sobota, 20 marca 2010 o 13:20:49 Martin Dobias napisa?(a):
> Ok, but isn't it easy to generate translation files per plugin? So the
> translators will
> have the contexts naturally split from the other strings. Each plugin
> would install
> its own translations...

So this was the second idea to keep everything inside each plugin. But it 
seems to me to be extremely inconvenient and time-wasting for translators to 
cope with 100 or 200 not synchronized ts files. First, how to indicate which 
files aren't finished yet. Second, many strings are shared among plugins - how 
to apply suggested translations from one file to another?
From lucadeluge at gmail.com  Sat Mar 20 11:51:40 2010
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Sat Mar 20 11:51:43 2010
Subject: [Qgis-developer] OGR2Layer update
Message-ID: <b7d609c01003200851l588d8664pc166e4d3cd3f0ae@mail.gmail.com>

Hi all

I uploaded a new version of the OpenLayers plugin on the faunalia
repository as experimental version

Some news are:
* possibility to choose layers of openstreetmap (mapnik and osmarender)
* possibility to add some OpenLayers controls
* rendering based on QGIS symbology (is possible use only "single
symbols" and "unique value")
* help/info gui

Best regards
Luca

PS Tomorrow at end of my partecipation at the hackfest I plan to
release a stable version in QGIS User-Contributed Python Plugin
Repository. For this, will I use in the web page the "Upload a Plugin"
tab and after that insert the name OGR2Layers to replace the old
version?
From jctull at gmail.com  Sat Mar 20 12:09:26 2010
From: jctull at gmail.com (John C. Tull)
Date: Sat Mar 20 12:09:31 2010
Subject: [Qgis-developer] Native file dialog bugs and the new Save As
	Vector functionality.
In-Reply-To: <201003201133.37405.borysiasty@aster.pl>
References: <201003191429.27387.borysiasty@aster.pl>
	<201003192059.46479.borysiasty@aster.pl>
	<3BADE4A8-E50E-4C9E-9ABE-73462E4431C3@gmail.com>
	<201003201133.37405.borysiasty@aster.pl>
Message-ID: <221243C5-4065-4996-B5E1-828E0633D0FF@gmail.com>

On Mar 20, 2010, at 3:33 AM, Borys Jurgiel wrote:

> Dnia pi?tek, 19 marca 2010 o 22:51:46 John C. Tull napisa?(a):
>> Hi Borys,
>> 
>> You've made some good points. Seems likely something that the broader
>> community should weigh in on.
>> 
>> From my perspective, I agree that the multi-dialog window thing is unusual.
>> On the other hand, the problems that are created from the qt dialogs on my
>> OS are more annoying. Perhaps this needs to be a user-configurable option.
>> Have both types of dialog available based on a choice in the application
>> options. Is this feasible?
> 
> Of course it is. Choosing between two poor options still isn't a real 
> solution, but may be a workaround for now. For 2.0 I'd love to think out one 
> consistent solution for opening, creating and updating data sources (a 
> separate subsystem with metadata browser, search engine, some ideas from arc 
> catalog?).

I agree that a better solution is needed. For me, forcing non-native dialogs would be regressive, simply because the qt dialogs do such a poor job of handling volumes on OS X, wreck the ui consistency, etc. The interim solution seems to be making it a choice until something better can be designed. 

Regarding your thoughts on arc catalog, you should look at Gary's geo-apt browser he is developing, if you have not already. This might spark some ideas.
http://mrcc.com/geoapt-browser/

Cheers,
John
From john.tull at wildnevada.org  Sat Mar 20 12:17:43 2010
From: john.tull at wildnevada.org (John C. Tull)
Date: Sat Mar 20 12:17:48 2010
Subject: [Qgis-developer] OGR2Layer update
In-Reply-To: <b7d609c01003200851l588d8664pc166e4d3cd3f0ae@mail.gmail.com>
References: <b7d609c01003200851l588d8664pc166e4d3cd3f0ae@mail.gmail.com>
Message-ID: <E32A0095-BEB1-4A78-A265-02245301896F@me.com>

Hi Luca,

The plugin is working brilliantly on OS X. Keep up the good work!

John

On Mar 20, 2010, at 8:51 AM, Luca Delucchi wrote:

> Hi all
> 
> I uploaded a new version of the OpenLayers plugin on the faunalia
> repository as experimental version
> 
> Some news are:
> * possibility to choose layers of openstreetmap (mapnik and osmarender)
> * possibility to add some OpenLayers controls
> * rendering based on QGIS symbology (is possible use only "single
> symbols" and "unique value")
> * help/info gui
> 
> Best regards
> Luca
> 
> PS Tomorrow at end of my partecipation at the hackfest I plan to
> release a stable version in QGIS User-Contributed Python Plugin
> Repository. For this, will I use in the web page the "Upload a Plugin"
> tab and after that insert the name OGR2Layers to replace the old
> version?
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From borysiasty at aster.pl  Sat Mar 20 14:03:40 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Sat Mar 20 14:03:44 2010
Subject: [Qgis-developer] OGR2Layer update
In-Reply-To: <b7d609c01003200851l588d8664pc166e4d3cd3f0ae@mail.gmail.com>
References: <b7d609c01003200851l588d8664pc166e4d3cd3f0ae@mail.gmail.com>
Message-ID: <201003201903.41233.borysiasty@aster.pl>

Dnia sobota, 20 marca 2010 o 16:51:40 Luca Delucchi napisa?(a):
> PS Tomorrow at end of my partecipation at the hackfest I plan to
> release a stable version in QGIS User-Contributed Python Plugin
> Repository. For this, will I use in the web page the "Upload a Plugin"
> tab and after that insert the name OGR2Layers to replace the old
> version?

I'll remove the old plugin, so you will be able to add the new one under the 
same name. Then you will become its owner with permissions to edit, upgrade 
etc.
From ubuntu at kagou.fr  Sat Mar 20 17:54:13 2010
From: ubuntu at kagou.fr (Patrice Vetsel)
Date: Sat Mar 20 17:54:18 2010
Subject: [Qgis-developer] OGR2Layer update
In-Reply-To: <201003201903.41233.borysiasty@aster.pl>
References: <b7d609c01003200851l588d8664pc166e4d3cd3f0ae@mail.gmail.com>
	<201003201903.41233.borysiasty@aster.pl>
Message-ID: <4BA54405.2030405@kagou.fr>

Le 20/03/10 19:03, Borys Jurgiel a ?crit :
> Dnia sobota, 20 marca 2010 o 16:51:40 Luca Delucchi napisa?(a):
>> PS Tomorrow at end of my partecipation at the hackfest I plan to
>> release a stable version in QGIS User-Contributed Python Plugin
>> Repository. For this, will I use in the web page the "Upload a Plugin"
>> tab and after that insert the name OGR2Layers to replace the old
>> version?
>
> I'll remove the old plugin, so you will be able to add the new one under the
> same name. Then you will become its owner with permissions to edit, upgrade
> etc.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

Is it possible to fix the "The layer ... has an unknown spatial 
reference system" ? I'm using Lambert France Sud.

Regards
From lucadeluge at gmail.com  Sat Mar 20 17:56:39 2010
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Sat Mar 20 17:56:42 2010
Subject: [Qgis-developer] OGR2Layer update
In-Reply-To: <4BA54405.2030405@kagou.fr>
References: <b7d609c01003200851l588d8664pc166e4d3cd3f0ae@mail.gmail.com>
	<201003201903.41233.borysiasty@aster.pl> <4BA54405.2030405@kagou.fr>
Message-ID: <b7d609c01003201456j175172b9o6fd4baf6df5515cc@mail.gmail.com>

2010/3/20 Patrice Vetsel <ubuntu@kagou.fr>:

> Is it possible to fix the "The layer ... has an unknown spatial reference
> system" ? I'm using Lambert France Sud.
>

the problem is your layer have unknown spatial reference, you can
solved it usign ogr2ogr with -a_srs option for create it (e.g. file
.prj for shapefile)

> Regards

regard
Luca
From ubuntu at kagou.fr  Sat Mar 20 18:09:02 2010
From: ubuntu at kagou.fr (Patrice Vetsel)
Date: Sat Mar 20 18:09:07 2010
Subject: [Qgis-developer] OGR2Layer update
In-Reply-To: <b7d609c01003201456j175172b9o6fd4baf6df5515cc@mail.gmail.com>
References: <b7d609c01003200851l588d8664pc166e4d3cd3f0ae@mail.gmail.com>	
	<201003201903.41233.borysiasty@aster.pl>
	<4BA54405.2030405@kagou.fr>
	<b7d609c01003201456j175172b9o6fd4baf6df5515cc@mail.gmail.com>
Message-ID: <4BA5477E.9080805@kagou.fr>

Le 20/03/10 22:56, Luca Delucchi a ?crit :
> 2010/3/20 Patrice Vetsel<ubuntu@kagou.fr>:
>
>> Is it possible to fix the "The layer ... has an unknown spatial reference
>> system" ? I'm using Lambert France Sud.
>>
>
> the problem is your layer have unknown spatial reference, you can
> solved it usign ogr2ogr with -a_srs option for create it (e.g. file
> .prj for shapefile)
>
>> Regards
>
> regard
> Luca

Indeed ! Thanks for the tips :)

regard
From giovanni.manghi at gmail.com  Sat Mar 20 18:20:08 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Sat Mar 20 18:20:16 2010
Subject: [Qgis-developer] OGR2Layer update
In-Reply-To: <b7d609c01003200851l588d8664pc166e4d3cd3f0ae@mail.gmail.com>
References: <b7d609c01003200851l588d8664pc166e4d3cd3f0ae@mail.gmail.com>
Message-ID: <1269123608.6649.214.camel@sibirica>

Hi Luca,


just noticed a couple of details:


*) if in the project I have a wfs layer the plugin give the message
"Only postgres and ogr providers are supported" but then throws this
python error

-----------
Traceback (most recent call last):
  File "/home/gio/.qgis/python/plugins/OGR2Layers/ogr2Layers.py", line
179, in WriteKML

QMessageBox.information(self.iface.mainWindow(),"myogr2ogr",str(myogr2ogr))
UnboundLocalError: local variable 'myogr2ogr' referenced before
assignment
-----------

*) the toolbar icon doesn't have the transparent background




thanks in advance for your work


cheers

-- Giovanni --



On Sat, 2010-03-20 at 16:51 +0100, Luca Delucchi wrote:
> Hi all
> 
> I uploaded a new version of the OpenLayers plugin on the faunalia
> repository as experimental version
> 
> Some news are:
> * possibility to choose layers of openstreetmap (mapnik and osmarender)
> * possibility to add some OpenLayers controls
> * rendering based on QGIS symbology (is possible use only "single
> symbols" and "unique value")
> * help/info gui
> 
> Best regards
> Luca
> 
> PS Tomorrow at end of my partecipation at the hackfest I plan to
> release a stable version in QGIS User-Contributed Python Plugin
> Repository. For this, will I use in the web page the "Upload a Plugin"
> tab and after that insert the name OGR2Layers to replace the old
> version?
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From lucadeluge at gmail.com  Sat Mar 20 18:52:06 2010
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Sat Mar 20 18:52:09 2010
Subject: [Qgis-developer] OGR2Layer update
In-Reply-To: <1269123608.6649.214.camel@sibirica>
References: <b7d609c01003200851l588d8664pc166e4d3cd3f0ae@mail.gmail.com>
	<1269123608.6649.214.camel@sibirica>
Message-ID: <b7d609c01003201552j7d7c71b7md2cfe909f1cd859a@mail.gmail.com>

2010/3/20 Giovanni Manghi <giovanni.manghi@gmail.com>:
> Hi Luca,
>
>
> just noticed a couple of details:
>
>
> *) if in the project I have a wfs layer the plugin give the message
> "Only postgres and ogr providers are supported" but then throws this
> python error
>

ok, there same problem with the layer that qgis don't read with ogr
dataprovider, like grass and spatialite; for WFS i'll use another
solution without the conversion to GML, I hope to solve these problems
tomorrow

>
> *) the toolbar icon doesn't have the transparent background
>

solved

>
> cheers
>
> -- Giovanni --
>

regards
Luca
From giovanni.manghi at gmail.com  Sat Mar 20 20:20:35 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Sat Mar 20 20:20:43 2010
Subject: [Qgis-developer] OGR2Layer update
In-Reply-To: <b7d609c01003201552j7d7c71b7md2cfe909f1cd859a@mail.gmail.com>
References: <b7d609c01003200851l588d8664pc166e4d3cd3f0ae@mail.gmail.com>
	<1269123608.6649.214.camel@sibirica>
	<b7d609c01003201552j7d7c71b7md2cfe909f1cd859a@mail.gmail.com>
Message-ID: <1269130835.6649.216.camel@sibirica>

Hi,



> ok, there same problem with the layer that qgis don't read with ogr
> dataprovider, like grass and spatialite; for WFS i'll use another
> solution without the conversion to GML, I hope to solve these problems
> tomorrow


I noticed also that if in the legend there only rasters then it throws

Traceback (most recent call last):
  File "/home/gio/.qgis/python/plugins/OGR2Layers/ogr2Layers.py", line
90, in run
    mylayer = self.layers[0]
IndexError: list index out of range

regards

-- Giovanni --

From lucadeluge at gmail.com  Sun Mar 21 05:48:44 2010
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Sun Mar 21 05:48:54 2010
Subject: [Qgis-developer] OGR2Layer update
In-Reply-To: <1269130835.6649.216.camel@sibirica>
References: <b7d609c01003200851l588d8664pc166e4d3cd3f0ae@mail.gmail.com>
	<1269123608.6649.214.camel@sibirica>
	<b7d609c01003201552j7d7c71b7md2cfe909f1cd859a@mail.gmail.com>
	<1269130835.6649.216.camel@sibirica>
Message-ID: <b7d609c01003210248h4741b600k73330ef7d7d0fb74@mail.gmail.com>

2010/3/21 Giovanni Manghi <giovanni.manghi@gmail.com>:
> I noticed also that if in the legend there only rasters then it throws
>
> Traceback (most recent call last):
> ?File "/home/gio/.qgis/python/plugins/OGR2Layers/ogr2Layers.py", line
> 90, in run
> ? ?mylayer = self.layers[0]
> IndexError: list index out of range
>

solved

> regards
>
> -- Giovanni --
>

giovanni thank's for the testing

cheers
Luca
From cavallini at faunalia.it  Sun Mar 21 06:00:02 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sun Mar 21 06:02:29 2010
Subject: [Qgis-developer] grass vectors and valuewidget
Message-ID: <4BA5EE22.1090704@faunalia.it>

Hi all.
Loading a GRASS raster outside current location throws this py error 
(many times, therefore I am forced to kill qgis):

Errore durante l'esecuzione di codice Python:

Traceback (most recent call last):
   File "/home/paolo/.qgis/python/plugins/valuetool/valuewidget.py", 
line 134, in printValue
     self.ymin=min(self.ymin,cstr.minimumValue())
AttributeError: 'NoneType' object has no attribute 'minimumValue'

I suppose this is a consequence of the new GRASS raster provider, right?

I see a warning:
Warning: Object::connect: No such signal 
QgsRasterDataProvider::statusChanged( QString ) in 
/home/paolo/build/qgis_unstable/src/core/raster/qgsrasterlayer.cpp:228

In addition, a raster outside current location is apparently not show.
All the best.
-- 
http://www.faunalia.it/pc
From giovanni.manghi at gmail.com  Sun Mar 21 06:08:37 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Sun Mar 21 06:10:45 2010
Subject: [Qgis-developer] grass vectors and valuewidget
In-Reply-To: <4BA5EE22.1090704@faunalia.it>
References: <4BA5EE22.1090704@faunalia.it>
Message-ID: <1269166117.6606.2.camel@sibirica>

Hi,



On Sun, 2010-03-21 at 11:00 +0100, Paolo Cavallini wrote:
> Hi all.
> Loading a GRASS raster outside current location throws this py error 
> (many times, therefore I am forced to kill qgis):
> 
> Errore durante l'esecuzione di codice Python:
> 
> Traceback (most recent call last):
>    File "/home/paolo/.qgis/python/plugins/valuetool/valuewidget.py", 
> line 134, in printValue
>      self.ymin=min(self.ymin,cstr.minimumValue())
> AttributeError: 'NoneType' object has no attribute 'minimumValue'
> 
> I suppose this is a consequence of the new GRASS raster provider, right?


yes Paolo, it is. Nevertheless the identify tool do returns the correct
raster values, so maybe there is hope?


cheers

-- Giovanni --

From wonder.sk at gmail.com  Sun Mar 21 06:33:34 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sun Mar 21 06:34:28 2010
Subject: [Qgis-developer] Re: [Qgis-community-team] GUI translation
In-Reply-To: <201003201340.03276.borysiasty@aster.pl>
References: <4BA36EE6.9000605@faunalia.it>
	<201003201254.05656.borysiasty@aster.pl>
	<e8e7199c1003200520t20f8e7bak3b0f1d5ef2a303f3@mail.gmail.com>
	<201003201340.03276.borysiasty@aster.pl>
Message-ID: <e8e7199c1003210333s15da81b3ra502446eb09db9c0@mail.gmail.com>

On Sat, Mar 20, 2010 at 1:40 PM, Borys Jurgiel <borysiasty@aster.pl> wrote:
> Dnia sobota, 20 marca 2010 o 13:20:49 Martin Dobias napisa?(a):
>> Ok, but isn't it easy to generate translation files per plugin? So the
>> translators will
>> have the contexts naturally split from the other strings. Each plugin
>> would install
>> its own translations...
>
> So this was the second idea to keep everything inside each plugin. But it
> seems to me to be extremely inconvenient and time-wasting for translators to
> cope with 100 or 200 not synchronized ts files. First, how to indicate which
> files aren't finished yet. Second, many strings are shared among plugins - how
> to apply suggested translations from one file to another?

Ah, I see, sorry for the ignorance... From the first sight, I would
say I like the second idea more, but maybe it's too inconvenient for
translators (too many files, no suggestions from the other files).

Martin
From ivan.mincik at gmail.com  Sun Mar 21 06:44:49 2010
From: ivan.mincik at gmail.com (Ivan Mincik)
Date: Sun Mar 21 06:56:20 2010
Subject: [Qgis-developer] Build dependency list
Message-ID: <1ed604b81003210344s627966acj500919569d5342fa@mail.gmail.com>

Hi,
I would like to ask if the "An overview of the dependencies required
for building" provided by INSTALL file is still correct information.
(
'''Required build deps:'''
* CMake >= 2.4.3
* Flex, Bison

'''Required runtime deps:'''
* Qt >= 4.3.0
* Proj >= 4.4.x
* GEOS >= 3.0
* Sqlite3 >= 3.0.0
* GDAL/OGR >= 1.4.x
)
I am not sure about Qt and GDAL/OGR as well.

Is there any official long term plan about which minimal versions to
keep when coding (I remember some information about Qt 4.4) ? This
information is important for enterprise distributions like Debian, to
know if next version of Qgis will run without updating lot of core
libraries.


Thanks a lot for Your work,
Ivan
From lucadeluge at gmail.com  Sun Mar 21 09:28:22 2010
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Sun Mar 21 09:28:26 2010
Subject: [Qgis-developer] OGR2Layer update
In-Reply-To: <b7d609c01003210248h4741b600k73330ef7d7d0fb74@mail.gmail.com>
References: <b7d609c01003200851l588d8664pc166e4d3cd3f0ae@mail.gmail.com>
	<1269123608.6649.214.camel@sibirica>
	<b7d609c01003201552j7d7c71b7md2cfe909f1cd859a@mail.gmail.com>
	<1269130835.6649.216.camel@sibirica>
	<b7d609c01003210248h4741b600k73330ef7d7d0fb74@mail.gmail.com>
Message-ID: <b7d609c01003210628k7ce9c9c9n980db65eee234d18@mail.gmail.com>

Hi all

I upload a new version of the OGR2Layers plugin as stable version in
QGIS User-Contributed Python Plugin Repository

* closed some bugs
* add openstreetmap cycleway base layer
* change the output messages

Isn't still possible use WFS (some problem for conversion of spatial
ref sys and no time to fix it), GRASS (a bug in dataprovider [0]),
Spatialite (no time for try it)

Tests are appreciated

cheers
Luca

[0] https://trac.osgeo.org/qgis/ticket/2571
From otto.dassau at gmx.de  Sun Mar 21 10:01:15 2010
From: otto.dassau at gmx.de (Otto Dassau)
Date: Sun Mar 21 10:02:54 2010
Subject: [Qgis-developer] Announcement: QGIS 1.4 documentation released
Message-ID: <20100321150115.6cb90294@sonne.site>

Dear QGIS users,

we are pleased to announce the release of the "user guide" and "coding
and compilation guide" for QGIS version 1.4. The new manual includes
numerous updates and of course all new features and core plugins
available in the current software release, e.g. 

* New advanced symbology engine 
* New smart labeling plugin 
* Many user interface cleanups
* New 'newgis' icon theme
* 'Export to PDF' feature to map composer
* Support to user-specific SVG path in the map composer
* Field Calculator and other attribute functionalities
* ...

We would like to thank all document maintainers for their help to make
this release possible. 

You find a PDF version of the new manual here:
http://www.qgis.org/en/documentation/manuals.html

Unfortunately we were not able to release the manual simultaneously with
the software. We hope to catch up for the upcoming version and we would
be happy, if we find more people to join the documentation group, so we
can better split the work load. If you are interested to join, please
write an email to the qgis-community-team list:

http://lists.osgeo.org/mailman/listinfo/qgis-community-team

kind regards,
 Otto
From cavallini at faunalia.it  Sun Mar 21 13:07:31 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sun Mar 21 13:20:07 2010
Subject: [Qgis-developer] crash when loading layers
Message-ID: <4BA65253.7010905@faunalia.it>

Hi all.
I'm getting frequent crashes when loading rasters and vectors:

Warning: Object::connect: No such signal 
QgsRasterDataProvider::statusChanged( QString ) in 
/home/paolo/build/qgis_unstable/src/core/raster/qgsrasterlayer.cpp:228
allfiles: 
/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-91.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-94.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-93.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-95.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-90.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-89.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-92.qgs
fcodes has length 7 and number = 7
removes:/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-89.qgs
fails:
Segmentation fault

Furthermore, I also got a segfault with:

Warning: QPainterPath::arcTo: Adding arc where a parameter is NaN, 
results are undefined

Anyone has the same problem? Can we try to debug it together?
All the best.
-- 
http://www.faunalia.it/pc
From giovanni.manghi at gmail.com  Sun Mar 21 13:23:40 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Sun Mar 21 13:23:47 2010
Subject: [Qgis-developer] crash when loading layers
In-Reply-To: <4BA65253.7010905@faunalia.it>
References: <4BA65253.7010905@faunalia.it>
Message-ID: <1269192220.7112.0.camel@sibirica>

Paolo,
can you link a dataset?


abra?os

-- Giovanni --


On Sun, 2010-03-21 at 18:07 +0100, Paolo Cavallini wrote:
> Hi all.
> I'm getting frequent crashes when loading rasters and vectors:
> 
> Warning: Object::connect: No such signal 
> QgsRasterDataProvider::statusChanged( QString ) in 
> /home/paolo/build/qgis_unstable/src/core/raster/qgsrasterlayer.cpp:228
> allfiles: 
> /home/paolo/Desktop/Dati_corso_QGIS/qgs-save-91.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-94.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-93.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-95.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-90.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-89.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-92.qgs
> fcodes has length 7 and number = 7
> removes:/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-89.qgs
> fails:
> Segmentation fault
> 
> Furthermore, I also got a segfault with:
> 
> Warning: QPainterPath::arcTo: Adding arc where a parameter is NaN, 
> results are undefined
> 
> Anyone has the same problem? Can we try to debug it together?
> All the best.

From cavallini at faunalia.it  Sun Mar 21 14:02:09 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sun Mar 21 14:16:45 2010
Subject: [Qgis-developer] crash when loading layers
In-Reply-To: <1269192220.7112.0.camel@sibirica>
References: <4BA65253.7010905@faunalia.it> <1269192220.7112.0.camel@sibirica>
Message-ID: <4BA65F21.6070808@faunalia.it>

Giovanni Manghi ha scritto:
> Paolo,
> can you link a dataset?

it happens with a variety of data, I'll try to point out if this is 
replicable with a specific dataset and series of actions.
first I wanted to check whether it happens only to me, so it's a local 
problem.
All the best.
-- 
http://www.faunalia.it/pc
From cavallini at faunalia.it  Sun Mar 21 16:58:09 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sun Mar 21 17:18:30 2010
Subject: [Qgis-developer] crash when loading layers
Message-ID: <4BA68861.5060602@faunalia.it>

Apparently, deactivating the autosave plugin solves the problem.
Could the plugin author please check?
All the best.
===

Hi all.
I'm getting frequent crashes when loading rasters and vectors:

Warning: Object::connect: No such signal
QgsRasterDataProvider::statusChanged( QString ) in
/home/paolo/build/qgis_unstable/src/core/raster/qgsrasterlayer.cpp:228
allfiles:
/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-91.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-94.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-93.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-95.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-90.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-89.qgs,/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-92.qgs
fcodes has length 7 and number = 7
removes:/home/paolo/Desktop/Dati_corso_QGIS/qgs-save-89.qgs
fails:
Segmentation fault

Furthermore, I also got a segfault with:

Warning: QPainterPath::arcTo: Adding arc where a parameter is NaN,
results are undefined

Anyone has the same problem? Can we try to debug it together?
All the best.
-- 
http://www.faunalia.it/pc

From do.milenki at gmail.com  Sun Mar 21 18:01:51 2010
From: do.milenki at gmail.com (Milena Nowotarska)
Date: Sun Mar 21 18:01:57 2010
Subject: [Qgis-developer] CRS for a start
Message-ID: <5b1890a51003211501k70cab313xc7a0811121158967@mail.gmail.com>

Hi All,

I guess that many users work not only with WGS84 projection (which is
set by default in QGIS) so I would like to discuss with you a change
in QGIS behaviour on loading a layer.

In my opinion it would be good if QGIS:
a) set the projection for a project file/working environment from the
first loaded layer if it has the projection information
b) prompt for projection information if the layer does not have it
c) inform in a popup window when the projection of next loaded layers
do not match the projection already set in the working environment
(when reprojection on the fly is not ticked)

Now, as I personally use metric reference systems (2180, 2176, 2177),
every time I open a layer, I have to set the proper CRS and, on the
other tab change units from degrees to meters. If I forget to do that,
I will get strange scale and strange measurement output.
At least the change form geographic to metric projection should force
the change of units. Otherwise we won't be able to say that QGIS is
user friendly ;)

What in your opinion should be the most expected behaviour in a good GIS system?

I mean in QGIS I can open now a holiday photo, go to layer properties
and get an impresion from it's metadata, that it is already
georeferenced:
"Layer Spatial Reference System:
+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"
which is of course not true. But we have to think about novice GIS
users who might either go dizzy or get bad habits.

Best,
Milena

-- 
Milena Nowotarska
http://wiki.osgeo.org/wiki/Milena_Nowotarska
http://quantum-gis.pl/
From cavallini at faunalia.it  Sun Mar 21 17:44:16 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sun Mar 21 18:06:03 2010
Subject: [Qgis-developer] Re: [Qgis-user] CRS for a start
In-Reply-To: <5b1890a51003211501k70cab313xc7a0811121158967@mail.gmail.com>
References: <5b1890a51003211501k70cab313xc7a0811121158967@mail.gmail.com>
Message-ID: <4BA69330.9090804@faunalia.it>

Milena Nowotarska ha scritto:
> Hi All,
> 
> I guess that many users work not only with WGS84 projection (which is
...
> What in your opinion should be the most expected behaviour in a good GIS system?

Agreed. See also https://trac.osgeo.org/qgis/ticket/1355
All the best.
-- 
http://www.faunalia.it/pc
From robert at szczepanek.pl  Sun Mar 21 18:15:50 2010
From: robert at szczepanek.pl (Robert Szczepanek)
Date: Sun Mar 21 18:15:56 2010
Subject: [Qgis-developer] CRS for a start
In-Reply-To: <5b1890a51003211501k70cab313xc7a0811121158967@mail.gmail.com>
References: <5b1890a51003211501k70cab313xc7a0811121158967@mail.gmail.com>
Message-ID: <4BA69A96.4000502@szczepanek.pl>

+1
Robert

Milena Nowotarska pisze:
> Hi All,
> 
> I guess that many users work not only with WGS84 projection (which is
> set by default in QGIS) so I would like to discuss with you a change
> in QGIS behaviour on loading a layer.
> 
> In my opinion it would be good if QGIS:
> a) set the projection for a project file/working environment from the
> first loaded layer if it has the projection information
> b) prompt for projection information if the layer does not have it
> c) inform in a popup window when the projection of next loaded layers
> do not match the projection already set in the working environment
> (when reprojection on the fly is not ticked)
> 
> Now, as I personally use metric reference systems (2180, 2176, 2177),
> every time I open a layer, I have to set the proper CRS and, on the
> other tab change units from degrees to meters. If I forget to do that,
> I will get strange scale and strange measurement output.
> At least the change form geographic to metric projection should force
> the change of units. Otherwise we won't be able to say that QGIS is
> user friendly ;)
> 
> Best,
> Milena
> 

From sim at gis-lab.info  Sun Mar 21 18:29:40 2010
From: sim at gis-lab.info (Maxim Dubinin)
Date: Sun Mar 21 18:29:46 2010
Subject: [Qgis-developer] Re: [Qgis-user] CRS for a start
In-Reply-To: <5b1890a51003211501k70cab313xc7a0811121158967@mail.gmail.com>
References: <5b1890a51003211501k70cab313xc7a0811121158967@mail.gmail.com>
Message-ID: <1622555321.20100321172940@gis-lab.info>

Hi

I agree that some improvements can be made, but I'd suggest to make
some of the suggested ones configurable through Settings.

MN> a) set the projection for a project file/working environment from the
MN> first loaded layer if it has the projection information
Yes, if such behavior is wanted by QGIS user and certain checkbox is
"on" in Settings. I would avoid making this decision for the user
automatically. So default - "off".

MN> b) prompt for projection information if the layer does not have it
No. This will slow down work for those who just want to see the data
or make some quick edits. Again, this can be configurable in a)
fasion.

MN> c) inform in a popup window when the projection of next loaded layers
MN> do not match the projection already set in the working environment
MN> (when reprojection on the fly is not ticked)
+1

MN> Now, as I personally use metric reference systems (2180, 2176, 2177),
MN> every time I open a layer, I have to set the proper CRS.
Why don't you create a prj file then?

MN> I mean in QGIS I can open now a holiday photo, go to layer properties
MN> and get an impresion from it's metadata, that it is already
MN> georeferenced:
MN> "Layer Spatial Reference System:
MN> +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"
MN> which is of course not true. But we have to think about novice GIS
MN> users who might either go dizzy or get bad habits.
I agree, the layer properties should not use this as default if prj is
missing or should clearly indicate somehow that this is a guessed CRS,
not necessarily a real one.

Maxim

From do.milenki at gmail.com  Sun Mar 21 19:05:23 2010
From: do.milenki at gmail.com (Milena Nowotarska)
Date: Sun Mar 21 19:05:30 2010
Subject: [Qgis-developer] Re: [Qgis-user] CRS for a start
In-Reply-To: <1622555321.20100321172940@gis-lab.info>
References: <5b1890a51003211501k70cab313xc7a0811121158967@mail.gmail.com>
	<1622555321.20100321172940@gis-lab.info>
Message-ID: <5b1890a51003211605o1d2baca7ia3a31fc907b85b24@mail.gmail.com>

Hi Maxim,

2010/3/21 Maxim Dubinin <sim@gis-lab.info>:
> Hi
>
> I agree that some improvements can be made, but I'd suggest to make
> some of the suggested ones configurable through Settings.

> MN> a) set the projection for a project file/working environment from the
> MN> first loaded layer if it has the projection information
> Yes, if such behavior is wanted by QGIS user and certain checkbox is
> "on" in Settings. I would avoid making this decision for the user
> automatically. So default - "off".

+1 and ticked once should stay default for further use
>
> MN> b) prompt for projection information if the layer does not have it
> No. This will slow down work for those who just want to see the data
> or make some quick edits. Again, this can be configurable in a)
> fasion.
>
> MN> c) inform in a popup window when the projection of next loaded layers
> MN> do not match the projection already set in the working environment
> MN> (when reprojection on the fly is not ticked)
> +1
>
> MN> Now, as I personally use metric reference systems (2180, 2176, 2177),
> MN> every time I open a layer, I have to set the proper CRS.
> Why don't you create a prj file then?

I do have prj for these layers, but layer prj do not affect QGIS
environment in any way now.

Milena

>
> MN> I mean in QGIS I can open now a holiday photo, go to layer properties
> MN> and get an impresion from it's metadata, that it is already
> MN> georeferenced:
> MN> "Layer Spatial Reference System:
> MN> +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"
> MN> which is of course not true. But we have to think about novice GIS
> MN> users who might either go dizzy or get bad habits.
> I agree, the layer properties should not use this as default if prj is
> missing or should clearly indicate somehow that this is a guessed CRS,
> not necessarily a real one.
>
> Maxim
>
>



-- 
Milena Nowotarska
http://wiki.osgeo.org/wiki/Milena_Nowotarska
http://quantum-gis.pl/
From carson.farmer at gmail.com  Sun Mar 21 19:14:31 2010
From: carson.farmer at gmail.com (Carson Farmer)
Date: Sun Mar 21 19:14:36 2010
Subject: [Qgis-developer] Re: [Qgis-user] CRS for a start
In-Reply-To: <1622555321.20100321172940@gis-lab.info>
References: <5b1890a51003211501k70cab313xc7a0811121158967@mail.gmail.com>
	<1622555321.20100321172940@gis-lab.info>
Message-ID: <94b3c8441003211614n7d36605ct5152e11f30f15c78@mail.gmail.com>

Hello All,

> MN> I mean in QGIS I can open now a holiday photo, go to layer properties
> MN> and get an impresion from it's metadata, that it is already
> MN> georeferenced:
> MN> "Layer Spatial Reference System:
> MN> +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"
> MN> which is of course not true. But we have to think about novice GIS
> MN> users who might either go dizzy or get bad habits.
> I agree, the layer properties should not use this as default if prj is
> missing or should clearly indicate somehow that this is a guessed CRS,
> not necessarily a real one.
I agree as well. In case of no prj or other CRS information and no
default CRS defined, it would likely be best if the CRS was set to
"Unknown (Assumed Geographic)" or something like this. It wouldn't be
too hard to add this to the current CRS db as an additional available
CRS, and when users have a quick look at a layer's CRS, they will
instantly see that they have to properly define the CRS if they want
to use the layer properly.

Just my two cents!

Carson

-- 
Carson J. Q. Farmer
ISSP Doctoral Fellow
National Centre for Geocomputation
National University of Ireland, Maynooth,
http://www.carsonfarmer.com/
From john.tull at wildnevada.org  Sun Mar 21 21:02:09 2010
From: john.tull at wildnevada.org (John C. Tull)
Date: Sun Mar 21 21:02:15 2010
Subject: [Qgis-developer] Re: [Qgis-user] Announcement: QGIS 1.4
	documentation released
In-Reply-To: <20100321150115.6cb90294@sonne.site>
References: <20100321150115.6cb90294@sonne.site>
Message-ID: <E670C95C-6389-426A-B68B-0EF0B1604589@me.com>

Good work documentation team! I look forwarding to digging into it soon.

John

On Mar 21, 2010, at 7:01 AM, Otto Dassau wrote:

> Dear QGIS users,
> 
> we are pleased to announce the release of the "user guide" and "coding
> and compilation guide" for QGIS version 1.4. The new manual includes
> numerous updates and of course all new features and core plugins
> available in the current software release, e.g. 
> 
> * New advanced symbology engine 
> * New smart labeling plugin 
> * Many user interface cleanups
> * New 'newgis' icon theme
> * 'Export to PDF' feature to map composer
> * Support to user-specific SVG path in the map composer
> * Field Calculator and other attribute functionalities
> * ...
> 
> We would like to thank all document maintainers for their help to make
> this release possible. 
> 
> You find a PDF version of the new manual here:
> http://www.qgis.org/en/documentation/manuals.html
> 
> Unfortunately we were not able to release the manual simultaneously with
> the software. We hope to catch up for the upcoming version and we would
> be happy, if we find more people to join the documentation group, so we
> can better split the work load. If you are interested to join, please
> write an email to the qgis-community-team list:
> 
> http://lists.osgeo.org/mailman/listinfo/qgis-community-team
> 
> kind regards,
> Otto
> _______________________________________________
> Qgis-user mailing list
> Qgis-user@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-user

From jctull at gmail.com  Sun Mar 21 21:04:29 2010
From: jctull at gmail.com (John C. Tull)
Date: Sun Mar 21 21:04:36 2010
Subject: [Qgis-developer] Re: [Qgis-user] CRS for a start
In-Reply-To: <5b1890a51003211501k70cab313xc7a0811121158967@mail.gmail.com>
References: <5b1890a51003211501k70cab313xc7a0811121158967@mail.gmail.com>
Message-ID: <88C11F01-94C8-45D2-8D22-0EDF8EBDEDA8@gmail.com>

+1 on each of a-c.

On Mar 21, 2010, at 3:01 PM, Milena Nowotarska wrote:

> Hi All,
> 
> I guess that many users work not only with WGS84 projection (which is
> set by default in QGIS) so I would like to discuss with you a change
> in QGIS behaviour on loading a layer.
> 
> In my opinion it would be good if QGIS:
> a) set the projection for a project file/working environment from the
> first loaded layer if it has the projection information
> b) prompt for projection information if the layer does not have it
> c) inform in a popup window when the projection of next loaded layers
> do not match the projection already set in the working environment
> (when reprojection on the fly is not ticked)
> 
> Now, as I personally use metric reference systems (2180, 2176, 2177),
> every time I open a layer, I have to set the proper CRS and, on the
> other tab change units from degrees to meters. If I forget to do that,
> I will get strange scale and strange measurement output.
> At least the change form geographic to metric projection should force
> the change of units. Otherwise we won't be able to say that QGIS is
> user friendly ;)
> 
> What in your opinion should be the most expected behaviour in a good GIS system?
> 
> I mean in QGIS I can open now a holiday photo, go to layer properties
> and get an impresion from it's metadata, that it is already
> georeferenced:
> "Layer Spatial Reference System:
> +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"
> which is of course not true. But we have to think about novice GIS
> users who might either go dizzy or get bad habits.
> 
> Best,
> Milena
> 
> -- 
> Milena Nowotarska
> http://wiki.osgeo.org/wiki/Milena_Nowotarska
> http://quantum-gis.pl/
> _______________________________________________
> Qgis-user mailing list
> Qgis-user@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-user

From jctull at gmail.com  Sun Mar 21 21:02:32 2010
From: jctull at gmail.com (John C. Tull)
Date: Sun Mar 21 21:29:56 2010
Subject: [Qgis-developer] Re: [Qgis-user] Announcement: QGIS 1.4
	documentation released
In-Reply-To: <20100321150115.6cb90294@sonne.site>
References: <20100321150115.6cb90294@sonne.site>
Message-ID: <25956A87-A142-48FC-B637-CCCC7026C130@gmail.com>

Good work documentation team! I look forwarding to digging into it soon.

John

On Mar 21, 2010, at 7:01 AM, Otto Dassau wrote:

> Dear QGIS users,
> 
> we are pleased to announce the release of the "user guide" and "coding
> and compilation guide" for QGIS version 1.4. The new manual includes
> numerous updates and of course all new features and core plugins
> available in the current software release, e.g. 
> 
> * New advanced symbology engine 
> * New smart labeling plugin 
> * Many user interface cleanups
> * New 'newgis' icon theme
> * 'Export to PDF' feature to map composer
> * Support to user-specific SVG path in the map composer
> * Field Calculator and other attribute functionalities
> * ...
> 
> We would like to thank all document maintainers for their help to make
> this release possible. 
> 
> You find a PDF version of the new manual here:
> http://www.qgis.org/en/documentation/manuals.html
> 
> Unfortunately we were not able to release the manual simultaneously with
> the software. We hope to catch up for the upcoming version and we would
> be happy, if we find more people to join the documentation group, so we
> can better split the work load. If you are interested to join, please
> write an email to the qgis-community-team list:
> 
> http://lists.osgeo.org/mailman/listinfo/qgis-community-team
> 
> kind regards,
> Otto
> _______________________________________________
> Qgis-user mailing list
> Qgis-user@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-user

From tech_dev at wildintellect.com  Sun Mar 21 21:34:14 2010
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Sun Mar 21 21:34:26 2010
Subject: [Qgis-developer] Re: [Qgis-user] CRS for a start
In-Reply-To: <5b1890a51003211605o1d2baca7ia3a31fc907b85b24@mail.gmail.com>
References: <5b1890a51003211501k70cab313xc7a0811121158967@mail.gmail.com>	<1622555321.20100321172940@gis-lab.info>
	<5b1890a51003211605o1d2baca7ia3a31fc907b85b24@mail.gmail.com>
Message-ID: <4BA6C916.5080304@wildintellect.com>

On 03/21/2010 04:05 PM, Milena Nowotarska wrote:
> Hi Maxim,
> 
> 2010/3/21 Maxim Dubinin <sim@gis-lab.info>:
>> Hi
>>
>> I agree that some improvements can be made, but I'd suggest to make
>> some of the suggested ones configurable through Settings.
> 
>> MN> a) set the projection for a project file/working environment from the
>> MN> first loaded layer if it has the projection information
>> Yes, if such behavior is wanted by QGIS user and certain checkbox is
>> "on" in Settings. I would avoid making this decision for the user
>> automatically. So default - "off".
> 
> +1 and ticked once should stay default for further use
>>
>> MN> b) prompt for projection information if the layer does not have it
>> No. This will slow down work for those who just want to see the data
>> or make some quick edits. Again, this can be configurable in a)
>> fasion.
>>
>> MN> c) inform in a popup window when the projection of next loaded layers
>> MN> do not match the projection already set in the working environment
>> MN> (when reprojection on the fly is not ticked)
>> +1
>>
>> MN> Now, as I personally use metric reference systems (2180, 2176, 2177),
>> MN> every time I open a layer, I have to set the proper CRS.
>> Why don't you create a prj file then?
> 
> I do have prj for these layers, but layer prj do not affect QGIS
> environment in any way now.
> 
> Milena

This sounds like a bug that's been irritating me for a while where prj
files seemed to be ignored a lot of the time. Possibly because OGR can't
read it (ESRI created prj are known to cause issues occasionally).
Maybe the code for that needs to be a little more robust in error
handling, and I agree with the idea to mark a layer as undefined(assumed
geographic) if it's prj isn't readable - maybe even say the prj read was
attempted but didn't work in the metadata tab.

All good suggestions if they are user configurable and the default is to
be as intrusive as possible.

Alex

From micha at arava.co.il  Mon Mar 22 03:35:09 2010
From: micha at arava.co.il (Micha Silver)
Date: Mon Mar 22 03:35:19 2010
Subject: [Qgis-developer] Re: [Qgis-user] CRS for a start
In-Reply-To: <94b3c8441003211614n7d36605ct5152e11f30f15c78@mail.gmail.com>
References: <5b1890a51003211501k70cab313xc7a0811121158967@mail.gmail.com>	<1622555321.20100321172940@gis-lab.info>
	<94b3c8441003211614n7d36605ct5152e11f30f15c78@mail.gmail.com>
Message-ID: <4BA71DAD.2090806@arava.co.il>

On 22/03/2010 01:14, Carson Farmer wrote:
> Hello All,
>
>    
>> MN>  I mean in QGIS I can open now a holiday photo, go to layer properties
>> MN>  and get an impresion from it's metadata, that it is already
>> MN>  georeferenced:
>> MN>  "Layer Spatial Reference System:
>> MN>  +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"
>> MN>  which is of course not true. But we have to think about novice GIS
>> MN>  users who might either go dizzy or get bad habits.
>> I agree, the layer properties should not use this as default if prj is
>> missing or should clearly indicate somehow that this is a guessed CRS,
>> not necessarily a real one.
>>      
> I agree as well. In case of no prj or other CRS information and no
> default CRS defined, it would likely be best if the CRS was set to
> "Unknown (Assumed Geographic)" or something like this. It wouldn't be
> too hard to add this to the current CRS db as an additional available
> CRS, and when users have a quick look at a layer's CRS, they will
> instantly see that they have to properly define the CRS if they want
> to use the layer properly.
>
>    
Thanks for bringing this issue up again. (It's been on the list before 
but I can't find the link just now). The ways to deal with layers of 
unknown projection were named (not by me) the "GRASS way" and the "Arc way":
GRASS forces the user to choose a CRS at program startup, then each 
layer must match that CRS. NO o-t-f re-projection. Arc* starts in the 
CRS of the first layer, then automatically does o-t-f re-projection 
without any notification.
GRASS is a bit more difficult, but better in some ways. Arc* is a bit 
easier but has some unfortunate disadvantages.
The behavior I'd like to see in QGIS is- allow users to choose which 
system they want. It could work well, I think, as follows:

In the Options->CRS tab I can choose a global CRS. Currently this CRS 
applies only to new layers (if I select that option). I would like to 
see an additional option to apply the Global CRS to all new *projects* 
including CRS units.
So after a user chooses a global CRS, he can then select if he wants it 
to apply to all layers with unknown CRS (as is now), and he can also 
choose if it should be the default for all new projects. This would 
serve for those who always work in the same CRS, but not epsg:4326. Then 
there should be a third option, to prompt for project CRS on each 
opening of a new project (aka the GRASS way) for those who jump between 
between different coordinate systems.

Then, as others mentioned, there should be some visual notification that 
a layer will not be visible (i.e. raster in a different CRS) or that its 
projection is unknown.

Thanks,
Micha


> Just my two cents!
>
> Carson
>
>    


-- 
Micha Silver
http://www.surfaces.co.il/
Arava Development Co.  +972-52-3665918

From bishwarup.banerjee at gmail.com  Mon Mar 22 08:28:01 2010
From: bishwarup.banerjee at gmail.com (Bishwarup Banerjee)
Date: Mon Mar 22 10:49:17 2010
Subject: [Qgis-developer] Helpp needed to call Grass from inside Python
	Plugin
Message-ID: <78e951a61003220528j3ac990fejc952623bc429820c@mail.gmail.com>

Hi All,

I want to call the grass functionalities from inside my python plugins, in
QGIS
For example: the Grass's raster to polygon script, with out going inside the
grass plugin.
Can I set the Grass Mapset, and location from inside my python plugin?
Is this possible?
my configurations are:
QGIS 0.11, GRASS 6.3, python 2.5, Windows

Thank you in advance
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100322/baee2e36/attachment.html
From wonder.sk at gmail.com  Mon Mar 22 11:56:39 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon Mar 22 11:56:42 2010
Subject: [Qgis-developer] Build dependency list
In-Reply-To: <1ed604b81003210344s627966acj500919569d5342fa@mail.gmail.com>
References: <1ed604b81003210344s627966acj500919569d5342fa@mail.gmail.com>
Message-ID: <e8e7199c1003220856h7d37a71at2320f901520ebb8d@mail.gmail.com>

On Sun, Mar 21, 2010 at 11:44 AM, Ivan Mincik <ivan.mincik@gmail.com> wrote:
> Hi,
> I would like to ask if the "An overview of the dependencies required
> for building" provided by INSTALL file is still correct information.
> (
> '''Required build deps:'''
> * CMake >= 2.4.3
> * Flex, Bison
>
> '''Required runtime deps:'''
> * Qt >= 4.3.0
> * Proj >= 4.4.x
> * GEOS >= 3.0
> * Sqlite3 >= 3.0.0
> * GDAL/OGR >= 1.4.x
> )
> I am not sure about Qt and GDAL/OGR as well.

CMake should be >= 2.6 and Qt >= 4.4. I've updated the version
information in svn (r13141) and wiki. The rest of the list looks good
to me.


> Is there any official long term plan about which minimal versions to
> keep when coding (I remember some information about Qt 4.4) ? This
> information is important for enterprise distributions like Debian, to
> know if next version of Qgis will run without updating lot of core
> libraries.

Not to my knowledge. But we always consider if the proposed newer
version isn't too much "bleeding edge" when increasing minimal version
of dependencies.

Martin
From otto.dassau at gmx.de  Mon Mar 22 14:25:44 2010
From: otto.dassau at gmx.de (Otto Dassau)
Date: Mon Mar 22 14:27:20 2010
Subject: [Qgis-developer] Re: [Qgis-user] CRS for a start
In-Reply-To: <88C11F01-94C8-45D2-8D22-0EDF8EBDEDA8@gmail.com>
References: <5b1890a51003211501k70cab313xc7a0811121158967@mail.gmail.com>
	<88C11F01-94C8-45D2-8D22-0EDF8EBDEDA8@gmail.com>
Message-ID: <20100322192544.70151349@sonne.site>

Am Sun, 21 Mar 2010 18:04:29 -0700
schrieb "John C. Tull" <jctull@gmail.com>:

+1, i also think your suggestions make working with qgis more
user-friendly.

Regards,
 Otto

> +1 on each of a-c.
> 
> On Mar 21, 2010, at 3:01 PM, Milena Nowotarska wrote:
> 
> > Hi All,
> > 
> > I guess that many users work not only with WGS84 projection (which
> > is set by default in QGIS) so I would like to discuss with you a
> > change in QGIS behaviour on loading a layer.
> > 
> > In my opinion it would be good if QGIS:
> > a) set the projection for a project file/working environment from
> > the first loaded layer if it has the projection information
> > b) prompt for projection information if the layer does not have it
> > c) inform in a popup window when the projection of next loaded
> > layers do not match the projection already set in the working
> > environment (when reprojection on the fly is not ticked)
> > 
> > Now, as I personally use metric reference systems (2180, 2176,
> > 2177), every time I open a layer, I have to set the proper CRS and,
> > on the other tab change units from degrees to meters. If I forget
> > to do that, I will get strange scale and strange measurement output.
> > At least the change form geographic to metric projection should
> > force the change of units. Otherwise we won't be able to say that
> > QGIS is user friendly ;)
> > 
> > What in your opinion should be the most expected behaviour in a
> > good GIS system?
> > 
> > I mean in QGIS I can open now a holiday photo, go to layer
> > properties and get an impresion from it's metadata, that it is
> > already georeferenced:
> > "Layer Spatial Reference System:
> > +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"
> > which is of course not true. But we have to think about novice GIS
> > users who might either go dizzy or get bad habits.
> > 
> > Best,
> > Milena
> > 
> > -- 
> > Milena Nowotarska
> > http://wiki.osgeo.org/wiki/Milena_Nowotarska
> > http://quantum-gis.pl/
> > _______________________________________________
> > Qgis-user mailing list
> > Qgis-user@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/qgis-user
> 
> _______________________________________________
> Qgis-user mailing list
> Qgis-user@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-user
From werner.macho at gmail.com  Mon Mar 22 14:32:57 2010
From: werner.macho at gmail.com (Werner Macho)
Date: Mon Mar 22 14:33:11 2010
Subject: [Qgis-developer] Re: [Qgis-user] CRS for a start
In-Reply-To: <20100322192544.70151349@sonne.site>
References: <5b1890a51003211501k70cab313xc7a0811121158967@mail.gmail.com>
	<88C11F01-94C8-45D2-8D22-0EDF8EBDEDA8@gmail.com>
	<20100322192544.70151349@sonne.site>
Message-ID: <1269282777.4397.1.camel@found>

big +1 from me also - allthough it sounds after a "not so easy"
implementation ..
but that sounds like I would expect it to work also ..

regards
Werner
> 
> +1, i also think your suggestions make working with qgis more
> user-friendly.
> 
> Regards,
>  Otto
> 
> > +1 on each of a-c.
> > 
> > On Mar 21, 2010, at 3:01 PM, Milena Nowotarska wrote:
> > 
> > > Hi All,
> > > 
> > > I guess that many users work not only with WGS84 projection (which
> > > is set by default in QGIS) so I would like to discuss with you a
> > > change in QGIS behaviour on loading a layer.
> > > 
> > > In my opinion it would be good if QGIS:
> > > a) set the projection for a project file/working environment from
> > > the first loaded layer if it has the projection information
> > > b) prompt for projection information if the layer does not have it
> > > c) inform in a popup window when the projection of next loaded
> > > layers do not match the projection already set in the working
> > > environment (when reprojection on the fly is not ticked)
> > > 
> > > Now, as I personally use metric reference systems (2180, 2176,
> > > 2177), every time I open a layer, I have to set the proper CRS and,
> > > on the other tab change units from degrees to meters. If I forget
> > > to do that, I will get strange scale and strange measurement output.
> > > At least the change form geographic to metric projection should
> > > force the change of units. Otherwise we won't be able to say that
> > > QGIS is user friendly ;)
> > > 
> > > What in your opinion should be the most expected behaviour in a
> > > good GIS system?
> > > 
> > > I mean in QGIS I can open now a holiday photo, go to layer
> > > properties and get an impresion from it's metadata, that it is
> > > already georeferenced:
> > > "Layer Spatial Reference System:
> > > +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"
> > > which is of course not true. But we have to think about novice GIS
> > > users who might either go dizzy or get bad habits.
> > > 
> > > Best,
> > > Milena
> > > 
> > > -- 
> > > Milena Nowotarska
> > > http://wiki.osgeo.org/wiki/Milena_Nowotarska
> > > http://quantum-gis.pl/
> > > _______________________________________________
> > > Qgis-user mailing list
> > > Qgis-user@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/qgis-user
> > 
> > _______________________________________________
> > Qgis-user mailing list
> > Qgis-user@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/qgis-user
> _______________________________________________
> Qgis-user mailing list
> Qgis-user@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-user
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100322/2e58c370/attachment.bin
From otto.dassau at gmx.de  Mon Mar 22 14:48:29 2010
From: otto.dassau at gmx.de (Otto Dassau)
Date: Mon Mar 22 14:50:27 2010
Subject: [Qgis-developer] Added categories to qgis wiki
Message-ID: <20100322194829.2b3cccf2@sonne.site>

Hi, 

I added several categories to the qgis wiki. You reach them via the
left main menu "Categories". I also put almost all existing pages in
one or more categories. This could be extended and improved, of course,
but is a beginning and makes orientation in the wiki easier, I hope.

http://www.qgis.org/wiki/Special:Categories

Please feel free to add more useful categories, if you like.

Regards,
 Otto
From msieczka at sieczka.org  Mon Mar 22 15:10:48 2010
From: msieczka at sieczka.org (Maciej Sieczka)
Date: Mon Mar 22 15:10:49 2010
Subject: [Qgis-developer] r13142 build error (QNetworkDiskCache: No such
	file or directory)
Message-ID: <4BA7C0B8.6090301@sieczka.org>

QGIS trunk r13142 fails to build as follows:

[ 39%] Building CXX object src/app/CMakeFiles/qgis.dir/qgisapp.cpp.o
/home/zxc/src/straight/qgis-trunk/src/app/qgisapp.cpp:71:29: error: 
QNetworkDiskCache: No such file or directory
/home/zxc/src/straight/qgis-trunk/src/app/qgisapp.cpp: In member 
function 'void QgisApp::namUpdate()':
/home/zxc/src/straight/qgis-trunk/src/app/qgisapp.cpp:6277: error: 
'QNetworkDiskCache' was not declared in this scope
/home/zxc/src/straight/qgis-trunk/src/app/qgisapp.cpp:6277: error: 
'cache' was not declared in this scope
/home/zxc/src/straight/qgis-trunk/src/app/qgisapp.cpp:6277: error: 
'QNetworkDiskCache' cannot appear in a constant-expression
/home/zxc/src/straight/qgis-trunk/src/app/qgisapp.cpp:6277: error: parse 
error in template argument list
/home/zxc/src/straight/qgis-trunk/src/app/qgisapp.cpp:6277: error: 
'class QNetworkAccessManager' has no member named 'cache'
/home/zxc/src/straight/qgis-trunk/src/app/qgisapp.cpp:6279: error: 
expected type-specifier before 'QNetworkDiskCache'
/home/zxc/src/straight/qgis-trunk/src/app/qgisapp.cpp:6279: error: 
expected `;' before 'QNetworkDiskCache'
/home/zxc/src/straight/qgis-trunk/src/app/qgisapp.cpp:6290: error: 
'class QNetworkAccessManager' has no member named 'cache'
/home/zxc/src/straight/qgis-trunk/src/app/qgisapp.cpp:6291: error: 
'class QNetworkAccessManager' has no member named 'setCache'
make[2]: *** [src/app/CMakeFiles/qgis.dir/qgisapp.cpp.o] Error 1
make[1]: *** [src/app/CMakeFiles/qgis.dir/all] Error 2
make: *** [all] Error 2

Seems related to r13101 and r13103.

Maciek

-- 
Maciej Sieczka
http://www.sieczka.org

From msieczka at sieczka.org  Mon Mar 22 15:01:04 2010
From: msieczka at sieczka.org (Maciej Sieczka)
Date: Mon Mar 22 15:21:00 2010
Subject: [Qgis-developer] Re: [Qgis-user] CRS for a start
In-Reply-To: <94b3c8441003211614n7d36605ct5152e11f30f15c78@mail.gmail.com>
References: <5b1890a51003211501k70cab313xc7a0811121158967@mail.gmail.com>	<1622555321.20100321172940@gis-lab.info>
	<94b3c8441003211614n7d36605ct5152e11f30f15c78@mail.gmail.com>
Message-ID: <4BA7BE70.6040004@sieczka.org>

Carson Farmer pisze:
 > Maxim pisze:
 >> Milena pisze:

>>> I mean in QGIS I can open now a holiday photo, go to layer properties
>>> and get an impresion from it's metadata, that it is already
>>> georeferenced:
>>> "Layer Spatial Reference System:
>>> +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"
>>> which is of course not true. But we have to think about novice GIS
>>> users who might either go dizzy or get bad habits.

>> I agree, the layer properties should not use this as default if prj is
>> missing or should clearly indicate somehow that this is a guessed CRS,
>> not necessarily a real one.

> I agree as well. In case of no prj or other CRS information and no
> default CRS defined, it would likely be best if the CRS was set to
> "Unknown (Assumed Geographic)" or something like this.

Don't assume anything would be my preferred bahaviour. If the 
georeference is missing, tell it to the user and let him choose the 
right one. If the georeference seems to be present but is not 
understanable/ambigous for QGIS, I'd like QGIS be verbose about it and 
let the user choose a CRS.

Maciek

-- 
Maciej Sieczka
http://www.sieczka.org

From mandoluca at gmail.com  Mon Mar 22 18:20:05 2010
From: mandoluca at gmail.com (Luca Mandolesi)
Date: Mon Mar 22 18:20:09 2010
Subject: [Qgis-developer] Qgis under windows: problems with python and
	sqlalchemy: bad file descriptor
Message-ID: <31f1d37d1003221520j38a8e54aofe0567187c2ca94@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 96 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100322/0e2d799b/attachment.gif
From mandoluca at gmail.com  Mon Mar 22 18:26:17 2010
From: mandoluca at gmail.com (Luca Mandolesi)
Date: Mon Mar 22 18:26:20 2010
Subject: [Qgis-developer] Re: Qgis under windows: problems with python and
	sqlalchemy: bad file descriptor
In-Reply-To: <31f1d37d1003221520j38a8e54aofe0567187c2ca94@mail.gmail.com>
References: <31f1d37d1003221520j38a8e54aofe0567187c2ca94@mail.gmail.com>
Message-ID: <31f1d37d1003221526h3c8d3970sd59c7047373c2732@mail.gmail.com>

Under windows I receive this error:

Traceback (most recent call last):
  File "C:/Documents and Settings/Administrator/.qgis//python/plugins
\pyarchinit\pyarchinit_Site_mainapp.py", line 217, in
on_pushButton_save_pressed
    test_insert = self.insert_new_rec()
  File "C:/Documents and Settings/Administrator/.qgis//python/plugins
\pyarchinit\pyarchinit_Site_mainapp.py", line 234, in insert_new_rec

    self.DB_MANAGER.max_num_id(self.TABLE_NAME, self.ID_TABLE)+1,
  File "C:/Documents and Settings/Administrator/.qgis//python/plugins
\pyarchinit\modules\db\pyarchinit_db_manager.py", line 262, in
max_num_id
    table = Table(self.id_table, self.metadata, autoload = True)
  File "c:\python25\Lib\site-packages\sqlalchemy\schema.py", line 108,
in __call__
    return type.__call__(self, name, metadata, *args, **kwargs)
  File "c:\python25\Lib\site-packages\sqlalchemy\schema.py", line 236,
in __init__
    _bind_or_error(metadata).reflecttable(self,
include_columns=include_columns)
  File "c:\python25\Lib\site-packages\sqlalchemy\engine\base.py", line
1265, in reflecttable
    self.dialect.reflecttable(conn, table, include_columns)
  File "c:\python25\Lib\site-packages\sqlalchemy\databases
\postgres.py", line 638, in reflecttable
    c = connection.execute(t, table=table_oid)
  File "c:\python25\Lib\site-packages\sqlalchemy\engine\base.py", line
824, in execute
    return Connection.executors[c](self, object, multiparams, params)
  File "c:\python25\Lib\site-packages\sqlalchemy\engine\base.py", line
874, in _execute_clauseelement
    return self.__execute_context(context)
  File "c:\python25\Lib\site-packages\sqlalchemy\engine\base.py", line
896, in __execute_context
    self._cursor_execute(context.cursor, context.statement,
context.parameters[0], context=context)
  File "c:\python25\Lib\site-packages\sqlalchemy\engine\base.py", line
946, in _cursor_execute
    self.engine.logger.info(repr(parameters))
  File "C:\OSGeo4W\apps\Python25\lib\logging\__init__.py", line 985,
in info
    apply(self._log, (INFO, msg, args), kwargs)
  File "C:\OSGeo4W\apps\Python25\lib\logging\__init__.py", line 1101,
in _log
    self.handle(record)
  File "C:\OSGeo4W\apps\Python25\lib\logging\__init__.py", line 1111,
in handle
    self.callHandlers(record)
  File "C:\OSGeo4W\apps\Python25\lib\logging\__init__.py", line 1148,
in callHandlers
    hdlr.handle(record)
  File "C:\OSGeo4W\apps\Python25\lib\logging\__init__.py", line 655,
in handle
    self.emit(record)
  File "C:\OSGeo4W\apps\Python25\lib\logging\__init__.py", line 757,
in emit
    self.handleError(record)
  File "C:\OSGeo4W\apps\Python25\lib\logging\__init__.py", line 706,
in handleError
    traceback.print_exception(ei[0], ei[1], ei[2], None, sys.stderr)
  File "C:\OSGeo4W\apps\Python25\lib\traceback.py", line 128, in
print_exception
    print_tb(tb, limit, file)
  File "C:\OSGeo4W\apps\Python25\lib\traceback.py", line 70, in
print_tb
    '  File "%s", line %d, in %s' % (filename,lineno,name))
  File "C:\OSGeo4W\apps\Python25\lib\traceback.py", line 16, in _print
    file.write(str+terminator)
IOError: [Errno 9] Bad file descriptor

Versione Python:
2.5.4 (r254:67916, Dec 23 2008, 15:10:54) [MSC v.1310 32 bit (Intel)]

Percorso Python: ['C:/Documents and Settings/Administrator/.qgis//
python/plugins\\pyarchinit\\modules\\gui', 'C:/Documents and Settings/
Administrator/.qgis//python/plugins\\pyarchinit\\modules\\gis', 'C:/
Documents and Settings/Administrator/.qgis//python/plugins\\pyarchinit\
\modules\\db', 'C:/Documents and Settings/Administrator/.qgis//python/
plugins\\pyarchinit\\modules\\utility', 'C:/Documents and Settings/
Administrator/.qgis//python/plugins\\pyarchinit', 'C:/OSGeo4W/apps/
qgis-unstable/./python', 'C:/Documents and Settings/
Administrator/.qgis//python', 'C:/Documents and Settings/
Administrator/.qgis//python/plugins', 'C:/OSGeo4W/apps/qgis-unstable/./
python/plugins', 'C:\\OSGeo4W\\apps\\gdal-16\\pymod', 'C:\\', 'C:\
\WINDOWS\\system32\\python25.zip', 'C:\\OSGeo4W\\apps\\Python25\
\DLLs', 'C:\\OSGeo4W\\apps\\Python25\\lib', 'C:\\OSGeo4W\\apps\
\Python25\\lib\\plat-win', 'C:\\OSGeo4W\\apps\\Python25\\lib\\lib-tk',
'C:\\OSGeo4W\\apps\\qgis-unstable\\bin', 'C:\\OSGeo4W\\apps\
\Python25', 'C:\\OSGeo4W\\apps\\Python25\\lib\\site-packages', 'C:\
\OSGeo4W\\apps\\Python25\\lib\\site-packages\\win32', 'C:\\OSGeo4W\
\apps\\Python25\\lib\\site-packages\\win32\\lib', 'C:\\OSGeo4W\\apps\
\Python25\\lib\\site-packages\\Pythonwin', 'C:\\OSGeo4W\\apps\
\Python25\\lib\\site-packages\\wx-2.8-msw-unico
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100322/fd195c15/attachment-0001.html
From jctull at gmail.com  Mon Mar 22 23:45:35 2010
From: jctull at gmail.com (John C. Tull)
Date: Mon Mar 22 23:45:40 2010
Subject: [Qgis-developer] Displacement plugin build problems
Message-ID: <B255E932-BA9E-499C-9209-73F76CB1400A@gmail.com>

Hi Marco,

Great work this past weekend! Although the new displacement plugin will build using the xcode build system on OS X, the cmake system fails. Here is the relevant bit from the build. Possibly not picking up some headers?

Thanks,
John

[ 84%] Building CXX object src/plugins/point_displacement_renderer/CMakeFiles/displacementplugin.dir/qgspointdisplacementrenderer.cpp.o
In file included from /Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/qgspointdisplacementrenderer.cpp:19:
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:25:20: error: geos_c.h: No such file or directory
In file included from /Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/qgspointdisplacementrenderer.cpp:19:
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:103: error: ?GEOSGeometry? has not been declared
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:123: error: ISO C++ forbids declaration of ?GEOSGeometry? with no type
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:123: error: expected ?;? before ?*? token
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:415: error: ISO C++ forbids declaration of ?GEOSGeometry? with no type
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:415: error: expected ?;? before ?*? token
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:448: error: expected ?,? or ?...? before ?*? token
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:449: error: ISO C++ forbids declaration of ?GEOSCoordSequence? with no type
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:472: error: ?GEOSGeometry? has not been declared
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:475: error: ?GEOSGeometry? has not been declared
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:478: error: expected ?,? or ?...? before ?*? token
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:478: error: ISO C++ forbids declaration of ?GEOSGeometry? with no type
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:485: error: ISO C++ forbids declaration of ?GEOSGeometry? with no type
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:485: error: expected ?;? before ?*? token
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:492: error: ISO C++ forbids declaration of ?GEOSGeometry? with no type
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:492: error: expected ?;? before ?*? token
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:496: error: ISO C++ forbids declaration of ?GEOSGeometry? with no type
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:496: error: expected ?;? before ?*? token
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:500: error: expected ?,? or ?...? before ?*? token
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:500: error: ISO C++ forbids declaration of ?GEOSGeometry? with no type
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:506: error: expected ?,? or ?...? before ?*? token
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:506: error: ISO C++ forbids declaration of ?GEOSGeometry? with no type
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:509: error: ?GEOSGeometry? has not been declared
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:511: error: ?GEOSGeometry? was not declared in this scope
/Users/jctull/sources/qgis/trunk/src/plugins/point_displacement_renderer/../../core/qgsgeometry.h:511: error: template argument 1 is invalid
make[2]: *** [src/plugins/point_displacement_renderer/CMakeFiles/displacementplugin.dir/qgspointdisplacementrenderer.cpp.o] Error 1
make[1]: *** [src/plugins/point_displacement_renderer/CMakeFiles/displacementplugin.dir/all] Error 2
make: *** [all] Error 2

From luca_manganelli at comune.trento.it  Tue Mar 23 03:03:05 2010
From: luca_manganelli at comune.trento.it (luca_manganelli@comune.trento.it)
Date: Tue Mar 23 03:03:30 2010
Subject: [Qgis-developer] Re: [Qgis-user] Stop rendering Not working
In-Reply-To: <4BA7A541.7090108@comcast.net>
Message-ID: <OFFDDF27E5.250F6EF9-ONC12576EF.00266D08-C12576EF.0026BC55@comune.trento.it>

qgis-user-bounces@lists.osgeo.org scritti il 22/03/2010 18.13.37

> I know this used to work but it's not working anymore?
>
> I set the number of features to draw before updating the display to 1000
>
> Then I open a larger vector shapefile > 2000000 entries. and nothing
> is drawn until everything is displayed.? I used to see things being
> drawn and could stop the rendering by pressing the X icon at the
> bottom right of the map.? I'm using version 1.4.0 on Fedora core 11.

It doesn't work either to me. I tried to use it when QGIS took long time to
render a big TIFF (without overviews), so I waited until it finished.

From marco at hugis.net  Tue Mar 23 04:41:45 2010
From: marco at hugis.net (Marco Hugentobler)
Date: Tue Mar 23 04:46:24 2010
Subject: [Qgis-developer] Re: Python plugin menu questions
In-Reply-To: <7fb3a4e61003190342x708c1ab9w111c89ab63005e15@mail.gmail.com>
References: <7fb3a4e61003160705he776fcbv9a2c3c3e459372ea@mail.gmail.com>
	<7fb3a4e61003190342x708c1ab9w111c89ab63005e15@mail.gmail.com>
Message-ID: <201003230941.45630.marco@hugis.net>

Hi Yves

You are right, QMenu::setVisible has no effect.

A simpler solution might be:

menubar = self.iface.editMenu().parentWidget()
menubar.removeAction(self.iface.editMenu().menuAction())

Like this, you don't depend on the menu position (that is not guaranteed to be 
fixed).

Regards,
Marco

Am Freitag, 19. M?rz 2010 11.42:50 schrieb Yves Bolognini:
> Just a small update about how to disable menus in Python plugins.
> 
> > 1) Remove/hide an entire menu, like the Edit menu
> 
> One solution:
> 
> menubar = self.iface.editMenu().parentWidget()
> actions = menubar.actions()
> menubar.removeAction(actions[1])
> 
> > 2) Remove/hide the contextual menu entries "Show Overview" (contextual
> > toolbar menu) and "Add to Overview" (contextual layer menu). Actually
> > I need to completely disable the overview, so it includes removing
> > these menu entries
> 
> It seems that's not possible. Contextual layer menu is created
> dynamically in app/legend/qgslegend.cpp when a right-click occurs. So
> we don't have access to it in plugins.
> 
> Regards,
> Yves
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

-- 
Dr. Marco Hugentobler
HUGIS GmbH
Webereistrasse 66
CH-8134 Adliswil
marco@hugis.net
http://homepage.hispeed.ch/hugis
Technical Advisor QGIS Project Steering Committee
From wonder.sk at gmail.com  Tue Mar 23 08:35:32 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Tue Mar 23 13:34:30 2010
Subject: [Qgis-developer] Qgis under windows: problems with python and 
	sqlalchemy: bad file descriptor
In-Reply-To: <31f1d37d1003221520j38a8e54aofe0567187c2ca94@mail.gmail.com>
References: <31f1d37d1003221520j38a8e54aofe0567187c2ca94@mail.gmail.com>
Message-ID: <e8e7199c1003230535x217f9beep4ed9f3a55d2c5582@mail.gmail.com>

On Mon, Mar 22, 2010 at 11:20 PM, Luca Mandolesi <mandoluca@gmail.com> wrote:
>
> Hi to alls,
> I've somes problems to make running my pyarchinit plugin under windows.
> Pyarchinit use sqlalchemy and under mac os x and Linux, all run properly.
> It's possible make using the python installed under windows and not the embedded into Qgis, or put sqlalchemy as psycopg2 into the distribution?
> If I lauch my functions directly from the IDLE, all run properly. But with the OsGeo and the standalone qgis I receive the error.
> I've asked to python programmers, and all tell me that the problem may be the python embedded into qgis.

Hi Luca

I had a very similar problem with PostGIS manager plugin on windows
when creating new processes using Popen. While it works in command
line python, it doesn't work within QGIS. The problem is obviously due
different (incompatible) C runtime libraries from different compilers.
So the file descriptors produced by C runtime library linked to QGIS
are not recognized in C runtime library used by Python.

I solved the problem by introducing some windows-specific workarounds,
not sure what you can do. A solution would be IMHO to compile QGIS
with the same compiler as the one used for compiling python -or-
recompiling python for osgeo4w (but that would probably have some
impact to additional python modules, too).

Regards
Martin
From mandoluca at gmail.com  Tue Mar 23 09:29:32 2010
From: mandoluca at gmail.com (Luca Mandolesi)
Date: Tue Mar 23 13:34:59 2010
Subject: [Qgis-developer] Qgis under windows: problems with python and 
	sqlalchemy: bad file descriptor
In-Reply-To: <e8e7199c1003230535x217f9beep4ed9f3a55d2c5582@mail.gmail.com>
References: <31f1d37d1003221520j38a8e54aofe0567187c2ca94@mail.gmail.com>
	<e8e7199c1003230535x217f9beep4ed9f3a55d2c5582@mail.gmail.com>
Message-ID: <31f1d37d1003230629w3fac7404v38e6fa6e3f6c440d@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 96 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100323/fe6c2a94/attachment.gif
From neteler at osgeo.org  Tue Mar 23 16:40:41 2010
From: neteler at osgeo.org (Markus Neteler)
Date: Tue Mar 23 16:41:03 2010
Subject: [Qgis-developer] Re: [Qgis-user] legend for rasters
In-Reply-To: <5b1890a51003220241x67980c57jc10bba6db2b86fa0@mail.gmail.com>
References: <28054345.291461269220325286.JavaMail.root@wmail16> 
	<5b1890a51003220241x67980c57jc10bba6db2b86fa0@mail.gmail.com>
Message-ID: <86782b611003231340m31448afbh16fbbb0b1f8b85f1@mail.gmail.com>

On Mon, Mar 22, 2010 Alessandro Sarretta wrote:
...
> It seems that one of the main (in my opinion) enhancements needed still will
> remain, and this is the lack of a legend for raster layers both in the Map
> Legend and in the Map Composer.
> Without it I can't create in QGIS any useful map containing raster layers
> because I can't describe the meaning of the colours in the map. For vector
> layer QGIS has a good ability to manage meaningful legends, for rasters not...

Amusingly, during the hackfest, I proposed a similar thing (having the
same problem):

http://trac.osgeo.org/qgis/ticket/2568
"More predefined color tables for raster maps"

GRASS comes with a large number of predefined tables which could be
recycled. They could be used as predefined tables to populate the colormap
structure (so that the user can do further fine tuning if desired).

Three families of color tables are there
- static (fixed values as for vegetation indices, celsius etc)
- dynamic (given in percent like green-yellow-red, differences etc).
- mixture of both.

I would welcome to be able to quickly assign a predefined color table
after seeing (commonly) an all grey raster map when the used GeoTIFF
(or whatever) file does not contain a color table.

Best
Markus
From luca_manganelli at comune.trento.it  Wed Mar 24 04:19:24 2010
From: luca_manganelli at comune.trento.it (luca_manganelli@comune.trento.it)
Date: Wed Mar 24 04:43:58 2010
Subject: [Qgis-developer] Any report from PISA 2010 Hackfest?
Message-ID: <OFB8ACB60B.DA36ADDF-ONC12576F0.002DB14C-C12576F0.002DB8D6@comune.trento.it>


Ping :-)

From wonder.sk at gmail.com  Wed Mar 24 06:17:22 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Mar 24 06:59:37 2010
Subject: [Qgis-developer] Qgis under windows: problems with python and 
	sqlalchemy: bad file descriptor
In-Reply-To: <31f1d37d1003230629w3fac7404v38e6fa6e3f6c440d@mail.gmail.com>
References: <31f1d37d1003221520j38a8e54aofe0567187c2ca94@mail.gmail.com>
	<e8e7199c1003230535x217f9beep4ed9f3a55d2c5582@mail.gmail.com>
	<31f1d37d1003230629w3fac7404v38e6fa6e3f6c440d@mail.gmail.com>
Message-ID: <e8e7199c1003240317m5bccb5efge242aab80eee75b7@mail.gmail.com>

On Tue, Mar 23, 2010 at 2:29 PM, Luca Mandolesi <mandoluca@gmail.com> wrote:
>
> Hi Martin! How is beautiful know I'm not alone!!!
> It's really annoying, because when I save data, the error appear, but the data are saved properly...
> Do you think that this problem will be solved within qgis, or It's more convenient try to recompiling qgis on my PC?
> It's possible make to point qgis to the python installed on the machine?

If you recompile qgis it will maybe work for you, but not for the
other users that don't compile qgis on their own.

Anyway your particular problem seems to be related to logging, maybe
disabling it in sqlalchemy would help. (i have no experience with
sqlalchemy)

Regards
Martin
From otto.dassau at gmx.de  Wed Mar 24 10:54:03 2010
From: otto.dassau at gmx.de (Otto Dassau)
Date: Wed Mar 24 10:53:48 2010
Subject: [Qgis-developer] Any report from PISA 2010 Hackfest?
In-Reply-To: <OFB8ACB60B.DA36ADDF-ONC12576F0.002DB14C-C12576F0.002DB8D6@comune.trento.it>
References: <OFB8ACB60B.DA36ADDF-ONC12576F0.002DB14C-C12576F0.002DB8D6@comune.trento.it>
Message-ID: <20100324155403.7b1502e4@nature.site>

Hi, 

yes, I can write something the next days and add it to the webpage. Would be
good if everybody who attended can send me, what they worked on and their
results during the three days. I do not have a complete overview so this
would help me writing the report.

Regards,
 Otto

Am Wed, 24 Mar 2010 09:19:24 +0100
schrieb luca_manganelli@comune.trento.it:

> 
> Ping :-)
> 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
From mandoluca at gmail.com  Wed Mar 24 10:57:20 2010
From: mandoluca at gmail.com (Luca Mandolesi)
Date: Wed Mar 24 11:04:39 2010
Subject: [Qgis-developer] Qgis under windows: problems with python and 
	sqlalchemy: bad file descriptor
In-Reply-To: <e8e7199c1003240317m5bccb5efge242aab80eee75b7@mail.gmail.com>
References: <31f1d37d1003221520j38a8e54aofe0567187c2ca94@mail.gmail.com>
	<e8e7199c1003230535x217f9beep4ed9f3a55d2c5582@mail.gmail.com>
	<31f1d37d1003230629w3fac7404v38e6fa6e3f6c440d@mail.gmail.com>
	<e8e7199c1003240317m5bccb5efge242aab80eee75b7@mail.gmail.com>
Message-ID: <31f1d37d1003240757p4ba4d164s62a8dd2c825e9aed@mail.gmail.com>

I turned off the logging by now, so I can work under windows till I find
another solution.

Thanks a lot Martin!!

Best regards.

Luca

On Wed, Mar 24, 2010 at 11:17 AM, Martin Dobias <wonder.sk@gmail.com> wrote:

> On Tue, Mar 23, 2010 at 2:29 PM, Luca Mandolesi <mandoluca@gmail.com>
> wrote:
> >
> > Hi Martin! How is beautiful know I'm not alone!!!
> > It's really annoying, because when I save data, the error appear, but the
> data are saved properly...
> > Do you think that this problem will be solved within qgis, or It's more
> convenient try to recompiling qgis on my PC?
> > It's possible make to point qgis to the python installed on the machine?
>
> If you recompile qgis it will maybe work for you, but not for the
> other users that don't compile qgis on their own.
>
> Anyway your particular problem seems to be related to logging, maybe
> disabling it in sqlalchemy would help. (i have no experience with
> sqlalchemy)
>
> Regards
> Martin
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100324/248c20bb/attachment.html
From rdmailings at duif.net  Wed Mar 24 11:35:52 2010
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed Mar 24 11:43:45 2010
Subject: [Qgis-developer] espg element removed from qgs project file?
Message-ID: <4BAA3158.6090800@duif.net>

Hi Devs,

trying to update the mapserver-export part of the documentation with a 
fresh build from qgis-trunk I catched an error for the plugin ...

It have an error in the WEB part of the mapserver because in the 'old' 
version of qgs project files there was always an element 'epsg' which 
held the epsg-number for current project.
It is used to write following line in the WEB part:
       'ows_srs'             'EPSG:28992'

Questions:
- is the removeal of the epsg-element deliberate?
- if so, should I use authid-element-value then to get the right value 
for ows_srs, and will this always be an EPSG:xxxxx value?

I will fix this in the mapserver asap, because at this moment the plugin 
is plain broken :-(

Regards,

Richard Duivenvoorde

ps old and new <destinationsrs>-part of qgs files:

NEW:
<destinationsrs>
	<spatialrefsys>
		<proj4>+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 
+k=0.9999079 +x_0=155000 +y_0=463000 +ellps>
		<srsid>2517</srsid>
		<srid>28992</srid>
		<epsg>28992</epsg>
		<description>Amersfoort / RD New</description>
		<projectionacronym>sterea</projectionacronym>
		<ellipsoidacronym>bessel</ellipsoidacronym>
		<geographicflag>false</geographicflag>
	</spatialrefsys>
</destinationsrs>

OLD:
<destinationsrs>
	<spatialrefsys>
		<proj4>+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 
+k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +units=m>
		<srsid>2517</srsid>
		<srid>28992</srid>
		<authid>EPSG:28992</authid>
		<description>Amersfoort / RD New</description>
		<projectionacronym>sterea</projectionacronym>
		<ellipsoidacronym>bessel</ellipsoidacronym>
		<geographicflag>false</geographicflag>
	</spatialrefsys>
</destinationsrs>


From jef at norbit.de  Wed Mar 24 15:41:35 2010
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Wed Mar 24 15:41:56 2010
Subject: [Qgis-developer] espg element removed from qgs project file?
In-Reply-To: <4BAA3158.6090800@duif.net>
References: <4BAA3158.6090800@duif.net>
Message-ID: <20100324194135.GA17362@norbit.de>

Hi Richard,

On Wed, 24. Mar 2010 at 16:35:52 +0100, Richard Duivenvoorde wrote:
> - is the removeal of the epsg-element deliberate?

Yes.  It was replaced by the authid, which consists of an authority and an id -
where authority can be EPSG or something else.  The srs database now contains
also a CRS from OSGEO and 267 CRSs from IGNF (french INSTITUT GEOGRAPHIQUE
NATIONAL), which are used in WMS(C) servers.

> - if so, should I use authid-element-value then to get the right value  for
>   ows_srs,

I guess so.

>  and will this always be an EPSG:xxxxx value?

No, as said authority:id.



J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From rdmailings at duif.net  Wed Mar 24 17:59:11 2010
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed Mar 24 17:59:14 2010
Subject: [Qgis-developer] mapserver plugin,
	qgs project xml and label-elements
Message-ID: <4BAA8B2F.4060505@duif.net>

Hi Devs,

trying to fix the label part of the mapserver plugin I find different 
'label'-elements in a 'maplayer'-element in the qgs project xml.

-1- There is the one holding a 1 or 0 to indicate if this layer has labels.
-2- There is one in every symbol element (for the 'labels' in the 
legend, at least for a uniquevalue classification)
-3- There is one in the labelattributes-element, having the 
fieldname-attribute and text-attribute indicating the label-text

as the plugin is using xml-minidom/getElementsByTagName it would be 
easier to make those elements more distinguishable (is that english :-) 
), for example by making the first one 'labels' or 'haslabels', the 
second one 'legendlabel' and the last one ... 'labeltext' or so?

somebody problems with that, or a better/easier way to find out using 
the parsed qgs-file if a layer has labels or not? Or should we stop 
using the projectfile as leading for the plugin anyway, and use the 
loaded project to determine this kind of information by just 'asking' 
the layerobjects etc?

Regards,

Richard Duivenvoorde
From marco at hugis.net  Thu Mar 25 06:55:06 2010
From: marco at hugis.net (Marco Hugentobler)
Date: Thu Mar 25 06:55:32 2010
Subject: [Qgis-developer] annotation tools
Message-ID: <201003251155.06524.marco@hugis.net>

Hi devs

I'd like to publish the first version of the annotation tools (that were also 
presented at the hackfest in Pisa) for testing:

www.hugis.net/100324_annotation_tools.tgz

Just copy it to you src/plugins/ directory and unpack. Then, insert 
'annotation_tools' as new subdirectory into src/plugins/CMakeLists.txt. To 
make the items also appear in the print composer, you need to enable the lines 
273 and 314 in src/core/qgscomposermap.cpp

The plugin provides the functionality to place balloons for textboxes and 
designer forms on the map, providing various possibilities for symbolisations.

At the moment, it is a plugin, but I'd like to bring the annotation classes 
into the gui library. What do you think?

Regards,
Marco 

-- 
Dr. Marco Hugentobler
HUGIS GmbH
Webereistrasse 66
CH-8134 Adliswil
marco@hugis.net
http://homepage.hispeed.ch/hugis
Technical Advisor QGIS Project Steering Committee
From otto.dassau at gmx.de  Thu Mar 25 12:49:42 2010
From: otto.dassau at gmx.de (Otto Dassau)
Date: Thu Mar 25 12:49:21 2010
Subject: [Qgis-developer] Any report from PISA 2010 Hackfest?
In-Reply-To: <20100324155403.7b1502e4@nature.site>
References: <OFB8ACB60B.DA36ADDF-ONC12576F0.002DB14C-C12576F0.002DB8D6@comune.trento.it>
	<20100324155403.7b1502e4@nature.site>
Message-ID: <20100325174942.1ba29a2e@nature.site>

Hi, 

find a report with links to fotos here:
http://www.qgis.org/en/developer-meetings/pisa-2010.html


Regards,
 Otto

Am Wed, 24 Mar 2010 15:54:03 +0100
schrieb Otto Dassau <otto.dassau@gmx.de>:

> Hi, 
> 
> yes, I can write something the next days and add it to the webpage. Would
> be good if everybody who attended can send me, what they worked on and
> their results during the three days. I do not have a complete overview so
> this would help me writing the report.
> 
> Regards,
>  Otto
> 
> Am Wed, 24 Mar 2010 09:19:24 +0100
> schrieb luca_manganelli@comune.trento.it:
> 
> > 
> > Ping :-)
> > 
> > _______________________________________________
> > Qgis-developer mailing list
> > Qgis-developer@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
From a.neumann at carto.net  Thu Mar 25 16:01:50 2010
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu Mar 25 16:02:11 2010
Subject: [Qgis-developer] Any report from PISA 2010 Hackfest?
In-Reply-To: <20100325174942.1ba29a2e@nature.site>
References: <OFB8ACB60B.DA36ADDF-ONC12576F0.002DB14C-C12576F0.002DB8D6@comune.trento.it>	<20100324155403.7b1502e4@nature.site>
	<20100325174942.1ba29a2e@nature.site>
Message-ID: <4BABC12E.8060207@carto.net>

Thanks Otto for the summary - and thanks to all developers who worked on 
the Hackfest.

I just recently came across the issue that I could not add points to a 
multipoint feature ... it is great to see that fixed now. It is also 
great that the point-displacement renderer is now included. The WMS-C is 
something cool to test and all the other things!

Very cool and thanks again!

Andreas

On 3/25/10 5:49 PM, Otto Dassau wrote:
> Hi,
>
> find a report with links to fotos here:
> http://www.qgis.org/en/developer-meetings/pisa-2010.html
>
>
> Regards,
>   Otto
>
> Am Wed, 24 Mar 2010 15:54:03 +0100
> schrieb Otto Dassau<otto.dassau@gmx.de>:
>
>    
>> Hi,
>>
>> yes, I can write something the next days and add it to the webpage. Would
>> be good if everybody who attended can send me, what they worked on and
>> their results during the three days. I do not have a complete overview so
>> this would help me writing the report.
>>
>> Regards,
>>   Otto
>>
>> Am Wed, 24 Mar 2010 09:19:24 +0100
>> schrieb luca_manganelli@comune.trento.it:
>>
>>      
>>> Ping :-)
>>>
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>        
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>      
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>    

From john.tull at wildnevada.org  Thu Mar 25 21:51:43 2010
From: john.tull at wildnevada.org (John C. Tull)
Date: Thu Mar 25 21:51:50 2010
Subject: [Qgis-developer] annotation tools
In-Reply-To: <201003251155.06524.marco@hugis.net>
References: <201003251155.06524.marco@hugis.net>
Message-ID: <6B7D2D10-DB93-4232-B0E1-DBB482C570BF@me.com>

Hi Marco,

I'm going to give this a try as it sounds very useful. I would note that the path to qgscomposermap.cpp is actually src/core/composer/qgscomposermap.cpp.

Thanks as always for your work,
John

On Mar 25, 2010, at 3:55 AM, Marco Hugentobler wrote:

> Hi devs
> 
> I'd like to publish the first version of the annotation tools (that were also 
> presented at the hackfest in Pisa) for testing:
> 
> www.hugis.net/100324_annotation_tools.tgz
> 
> Just copy it to you src/plugins/ directory and unpack. Then, insert 
> 'annotation_tools' as new subdirectory into src/plugins/CMakeLists.txt. To 
> make the items also appear in the print composer, you need to enable the lines 
> 273 and 314 in src/core/qgscomposermap.cpp
> 
> The plugin provides the functionality to place balloons for textboxes and 
> designer forms on the map, providing various possibilities for symbolisations.
> 
> At the moment, it is a plugin, but I'd like to bring the annotation classes 
> into the gui library. What do you think?
> 
> Regards,
> Marco 
> 
> -- 
> Dr. Marco Hugentobler
> HUGIS GmbH
> Webereistrasse 66
> CH-8134 Adliswil
> marco@hugis.net
> http://homepage.hispeed.ch/hugis
> Technical Advisor QGIS Project Steering Committee
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From jctull at gmail.com  Thu Mar 25 22:05:42 2010
From: jctull at gmail.com (John C. Tull)
Date: Thu Mar 25 22:05:48 2010
Subject: [Qgis-developer] annotation tools
In-Reply-To: <201003251155.06524.marco@hugis.net>
References: <201003251155.06524.marco@hugis.net>
Message-ID: <AD2725E1-FD27-4CFC-B4A9-D60AFD2350EE@gmail.com>

Hi Marco,

I was unable to get the plugin to compile:

...
[ 82%] Building CXX object src/plugins/annotation_tools/CMakeFiles/annotationplugin.dir/qrc_annotation_tools.cxx.o
Linking CXX shared module libannotationplugin.so
Undefined symbols:
  "QgsAnnotationPlugin::deleteAnnotation()", referenced from:
      QgsAnnotationPlugin::qt_metacall(QMetaObject::Call, int, void**)in moc_qgsannotationplugin.cxx.o
ld: symbol(s) not found
collect2: ld returned 1 exit status
make[2]: *** [src/plugins/annotation_tools/libannotationplugin.so] Error 1
make[1]: *** [src/plugins/annotation_tools/CMakeFiles/annotationplugin.dir/all] Error 2
make: *** [all] Error 2

Regards,
John

On Mar 25, 2010, at 3:55 AM, Marco Hugentobler wrote:

> Hi devs
> 
> I'd like to publish the first version of the annotation tools (that were also 
> presented at the hackfest in Pisa) for testing:
> 
> www.hugis.net/100324_annotation_tools.tgz
> 
> Just copy it to you src/plugins/ directory and unpack. Then, insert 
> 'annotation_tools' as new subdirectory into src/plugins/CMakeLists.txt. To 
> make the items also appear in the print composer, you need to enable the lines 
> 273 and 314 in src/core/qgscomposermap.cpp
> 
> The plugin provides the functionality to place balloons for textboxes and 
> designer forms on the map, providing various possibilities for symbolisations.
> 
> At the moment, it is a plugin, but I'd like to bring the annotation classes 
> into the gui library. What do you think?
> 
> Regards,
> Marco 
> 
> -- 
> Dr. Marco Hugentobler
> HUGIS GmbH
> Webereistrasse 66
> CH-8134 Adliswil
> marco@hugis.net
> http://homepage.hispeed.ch/hugis
> Technical Advisor QGIS Project Steering Committee
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer

From marco at hugis.net  Fri Mar 26 05:39:41 2010
From: marco at hugis.net (Marco Hugentobler)
Date: Fri Mar 26 06:04:57 2010
Subject: [Qgis-developer] annotation tools
In-Reply-To: <AD2725E1-FD27-4CFC-B4A9-D60AFD2350EE@gmail.com>
References: <201003251155.06524.marco@hugis.net>
	<AD2725E1-FD27-4CFC-B4A9-D60AFD2350EE@gmail.com>
Message-ID: <201003261039.41098.marco@hugis.net>

Hi John

Thanks for testing. You are right, the deleteAnnotation has been left in the 
header, but not in the cpp.

The updated source package is on:

www.hugis.net/100326_annotation_tools.tgz

Regards,
Marco

Am Freitag, 26. M?rz 2010 03.05:42 schrieb John C. Tull:
> Hi Marco,
> 
> I was unable to get the plugin to compile:
> 
> ...
> [ 82%] Building CXX object
>  src/plugins/annotation_tools/CMakeFiles/annotationplugin.dir/qrc_annotatio
> n_tools.cxx.o Linking CXX shared module libannotationplugin.so
> Undefined symbols:
>   "QgsAnnotationPlugin::deleteAnnotation()", referenced from:
>       QgsAnnotationPlugin::qt_metacall(QMetaObject::Call, int, void**)in
>  moc_qgsannotationplugin.cxx.o ld: symbol(s) not found
> collect2: ld returned 1 exit status
> make[2]: *** [src/plugins/annotation_tools/libannotationplugin.so] Error 1
> make[1]: ***
>  [src/plugins/annotation_tools/CMakeFiles/annotationplugin.dir/all] Error 2
>  make: *** [all] Error 2
> 
> Regards,
> John
> 
> On Mar 25, 2010, at 3:55 AM, Marco Hugentobler wrote:
> > Hi devs
> >
> > I'd like to publish the first version of the annotation tools (that were
> > also presented at the hackfest in Pisa) for testing:
> >
> > www.hugis.net/100324_annotation_tools.tgz
> >
> > Just copy it to you src/plugins/ directory and unpack. Then, insert
> > 'annotation_tools' as new subdirectory into src/plugins/CMakeLists.txt.
> > To make the items also appear in the print composer, you need to enable
> > the lines 273 and 314 in src/core/qgscomposermap.cpp
> >
> > The plugin provides the functionality to place balloons for textboxes and
> > designer forms on the map, providing various possibilities for
> > symbolisations.
> >
> > At the moment, it is a plugin, but I'd like to bring the annotation
> > classes into the gui library. What do you think?
> >
> > Regards,
> > Marco
> 

-- 
Dr. Marco Hugentobler
HUGIS GmbH
Webereistr. 66
CH-8134 Adliswil
marco@hugis.net
www.hugis.net
Technical Advisor QGIS Project Steering Committee
From Horst.Duester at bd.so.ch  Fri Mar 26 06:17:06 2010
From: Horst.Duester at bd.so.ch (=?UTF-8?Q?D=C3=BCster_Horst?=)
Date: Fri Mar 26 06:19:09 2010
Subject: [Qgis-developer] Compiling Error
Message-ID: <H00002eb06bd571e.1269598625.srsofaioi6145.ktso.ch@MHS>

I just tried to compile r13163 but unfortunately I get the following
error message when I run make install

CMake Error at src/plugins/grass/modules-common/cmake_install.cmake:36
(FILE):
  file INSTALL cannot find file
 
"/usr/local/src/sogis/qgis_src/trunk/src/plugins/grass/modules-common/r.
circle.png"
  to install.
Call Stack (most recent call first):
  src/plugins/grass/cmake_install.cmake:52 (INCLUDE)
  src/plugins/cmake_install.cmake:63 (INCLUDE)
  src/cmake_install.cmake:43 (INCLUDE)
  cmake_install.cmake:60 (INCLUDE)

Regrads
Horst

------------------------------------------------

Dr. Horst D?ster
Stv. Amtschef / kantonaler GIS-Koordinator 

Kanton Solothurn
Bau- und Justizdepartement
Amt f?r Geoinformation
SO!GIS Koordination
R?tistrasse 4
CH-4501 Solothurn

Telefon ++41(0)32 627 25 32
Mobil   ++41(0)79 511 54 12
Telefax ++41(0)32 627 22 14

mailto:horst.duester@bd.so.ch
http://www.agi.so.ch


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100326/aedefeb2/attachment.html
From wonder.sk at gmail.com  Fri Mar 26 06:15:34 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Fri Mar 26 06:22:45 2010
Subject: [Qgis-developer] mapserver plugin, qgs project xml and 
	label-elements
In-Reply-To: <4BAA8B2F.4060505@duif.net>
References: <4BAA8B2F.4060505@duif.net>
Message-ID: <e8e7199c1003260315w4109101an152408e4389418d8@mail.gmail.com>

Hi Richard

On Wed, Mar 24, 2010 at 10:59 PM, Richard Duivenvoorde
<rdmailings@duif.net> wrote:
> Hi Devs,
>
> trying to fix the label part of the mapserver plugin I find different
> 'label'-elements in a 'maplayer'-element in the qgs project xml.
>
> -1- There is the one holding a 1 or 0 to indicate if this layer has labels.
> -2- There is one in every symbol element (for the 'labels' in the legend, at
> least for a uniquevalue classification)
> -3- There is one in the labelattributes-element, having the
> fieldname-attribute and text-attribute indicating the label-text
>
> as the plugin is using xml-minidom/getElementsByTagName it would be easier
> to make those elements more distinguishable (is that english :-) ), for
> example by making the first one 'labels' or 'haslabels', the second one
> 'legendlabel' and the last one ... 'labeltext' or so?

you need to distinguish the context of the "label" tag. I know it's a
bit unfortunate that it's used with various meanings, but changing the
tag name would only bring additional incompatibility in project files
(and the plugin would still work only with only the new ones).

> somebody problems with that, or a better/easier way to find out using the
> parsed qgs-file if a layer has labels or not? Or should we stop using the
> projectfile as leading for the plugin anyway, and use the loaded project to
> determine this kind of information by just 'asking' the layerobjects etc?

I would recommend you to work with currently loaded project file. The
access to the data should be more natural as you would work directly
with the instances of classes of QGIS API. And you don't need to care
about the xml format...


Cheers
Martin
From jef at norbit.de  Fri Mar 26 08:24:33 2010
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Fri Mar 26 08:25:08 2010
Subject: [Qgis-developer] Compiling Error
In-Reply-To: <H00002eb06bd571e.1269598625.srsofaioi6145.ktso.ch@MHS>
References: <H00002eb06bd571e.1269598625.srsofaioi6145.ktso.ch@MHS>
Message-ID: <20100326122433.GA8757@norbit.de>

Hi Horst,

On Fri, 26. Mar 2010 at 11:17:06 +0100, D?ster Horst wrote:
>    I just tried to compile r13163 but unfortunately I get the following error
>    message when I run make install
>    CMake Error at src/plugins/grass/modules-common/cmake_install.cmake:36
>    (FILE):
>    file INSTALL cannot find file
>    "/usr/local/src/sogis/qgis_src/trunk/src/plugins/grass/modules-common/r.circle.png"
>    to install.

The file was renamed.  Do a clean build or touch CMakeLists.txt to force a
cmake run.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From alexander.bruy at gmail.com  Fri Mar 26 13:14:41 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Fri Mar 26 13:16:16 2010
Subject: [Qgis-developer] annotation tools
In-Reply-To: <201003261039.41098.marco@hugis.net>
References: <201003251155.06524.marco@hugis.net>
	<AD2725E1-FD27-4CFC-B4A9-D60AFD2350EE@gmail.com>
	<201003261039.41098.marco@hugis.net>
Message-ID: <20100326191441.304b184f.alexander.bruy@gmail.com>

Hi Marco,

I try to compile annotation_tools on Windows XP and get error

------ Build started: Project: annotationplugin, Configuration: RelWithDebInfo Win32 ------
Generating moc_qgsformannotationitem.cxx
Compiling...
moc_qgsformannotationitem.cxx
qgsmaptoolformannotation.cpp
Generating Code...
d:\projects\cpp\qgis\src\plugins\annotation_tools\qgsmaptoolformannotation.cpp(51) : error C4716: 'QgsMapToolFormAnnotation::createItem' : must return a value
Build log was saved at "file://d:\projects\cpp\qgis\build\src\plugins\annotation_tools\annotationplugin.dir\RelWithDebInfo\BuildLog.htm"
annotationplugin - 1 error(s), 0 warning(s)
========== Build: 0 succeeded, 1 failed, 5 up-to-date, 0 skipped ==========

I use latest sources of plugin and qgis trunk r13165. All dependencies
are installed with OSGeo4W installer.

Under Linux all compiles and works fine.

On Fri, 26 Mar 2010 10:39:41 +0100
Marco Hugentobler <marco@hugis.net> wrote:

> The updated source package is on:
> 
> www.hugis.net/100326_annotation_tools.tgz
> 
> Regards,
> Marco

-- 
Alexander Bruy
From jctull at gmail.com  Fri Mar 26 13:57:29 2010
From: jctull at gmail.com (John C. Tull)
Date: Fri Mar 26 13:57:39 2010
Subject: [Qgis-developer] annotation tools
In-Reply-To: <201003261039.41098.marco@hugis.net>
References: <201003251155.06524.marco@hugis.net>
	<AD2725E1-FD27-4CFC-B4A9-D60AFD2350EE@gmail.com>
	<201003261039.41098.marco@hugis.net>
Message-ID: <DB77C71F-81D7-40A7-9C00-A826BAB2942E@gmail.com>

Hi Marco,

This is looking like a nice start. I would like to see the font settings changed to a standard font dialog, preferably allowing the native mac dialog on OS X systems using Qt-cocoa. Currently, any font changes are not sticking on OS X.

The annotations worked on both the map and composer canvasses. I noticed if an annotation is selected in the canvas, the resize widgets are printed from the composer. Also, font sizes are incorrect when exporting to svg on my system. PDF export looked good.

Cheers,
John

On Mar 26, 2010, at 2:39 AM, Marco Hugentobler wrote:

> Hi John
> 
> Thanks for testing. You are right, the deleteAnnotation has been left in the 
> header, but not in the cpp.
> 
> The updated source package is on:
> 
> www.hugis.net/100326_annotation_tools.tgz
> 
> Regards,
> Marco
> 
> Am Freitag, 26. M?rz 2010 03.05:42 schrieb John C. Tull:
>> Hi Marco,
>> 
>> I was unable to get the plugin to compile:
>> 
>> ...
>> [ 82%] Building CXX object
>> src/plugins/annotation_tools/CMakeFiles/annotationplugin.dir/qrc_annotatio
>> n_tools.cxx.o Linking CXX shared module libannotationplugin.so
>> Undefined symbols:
>>  "QgsAnnotationPlugin::deleteAnnotation()", referenced from:
>>      QgsAnnotationPlugin::qt_metacall(QMetaObject::Call, int, void**)in
>> moc_qgsannotationplugin.cxx.o ld: symbol(s) not found
>> collect2: ld returned 1 exit status
>> make[2]: *** [src/plugins/annotation_tools/libannotationplugin.so] Error 1
>> make[1]: ***
>> [src/plugins/annotation_tools/CMakeFiles/annotationplugin.dir/all] Error 2
>> make: *** [all] Error 2
>> 
>> Regards,
>> John
>> 
>> On Mar 25, 2010, at 3:55 AM, Marco Hugentobler wrote:
>>> Hi devs
>>> 
>>> I'd like to publish the first version of the annotation tools (that were
>>> also presented at the hackfest in Pisa) for testing:
>>> 
>>> www.hugis.net/100324_annotation_tools.tgz
>>> 
>>> Just copy it to you src/plugins/ directory and unpack. Then, insert
>>> 'annotation_tools' as new subdirectory into src/plugins/CMakeLists.txt.
>>> To make the items also appear in the print composer, you need to enable
>>> the lines 273 and 314 in src/core/qgscomposermap.cpp
>>> 
>>> The plugin provides the functionality to place balloons for textboxes and
>>> designer forms on the map, providing various possibilities for
>>> symbolisations.
>>> 
>>> At the moment, it is a plugin, but I'd like to bring the annotation
>>> classes into the gui library. What do you think?
>>> 
>>> Regards,
>>> Marco
>> 
> 
> -- 
> Dr. Marco Hugentobler
> HUGIS GmbH
> Webereistr. 66
> CH-8134 Adliswil
> marco@hugis.net
> www.hugis.net
> Technical Advisor QGIS Project Steering Committee

From alexander.bruy at gmail.com  Fri Mar 26 14:12:49 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Fri Mar 26 14:14:22 2010
Subject: [Qgis-developer] annotation tools
In-Reply-To: <20100326191441.304b184f.alexander.bruy@gmail.com>
References: <201003251155.06524.marco@hugis.net>
	<AD2725E1-FD27-4CFC-B4A9-D60AFD2350EE@gmail.com>
	<201003261039.41098.marco@hugis.net>
	<20100326191441.304b184f.alexander.bruy@gmail.com>
Message-ID: <20100326201249.32a618c4.alexander.bruy@gmail.com>

Hi again

I checkout QGIS sources to another dir and copy to the source tree
latest annotaion plugin sources and then try to build on Windows.
Now I have next error at end

---[some output skipped]---
qgsannotationitem.cpp
qgsannotationplugin.cpp
Generating Code...
d:\projects\cpp\qgis\src\plugins\annotation_tools\qgsannotationitem.cpp(401) : warning C4715: 'QgsAnnotationItem::cursorShapeForAction' : not all control paths return a value
d:\projects\cpp\qgis\src\plugins\annotation_tools\qgsmaptoolformannotation.cpp(51) : error C4716: 'QgsMapToolFormAnnotation::createItem' : must return a value

Any suggestions?

-- 
Alexander Bruy
From marco at hugis.net  Fri Mar 26 15:36:50 2010
From: marco at hugis.net (Marco Hugentobler)
Date: Fri Mar 26 15:37:10 2010
Subject: [Qgis-developer] annotation tools
In-Reply-To: <20100326201249.32a618c4.alexander.bruy@gmail.com>
References: <201003251155.06524.marco@hugis.net>
	<20100326191441.304b184f.alexander.bruy@gmail.com>
	<20100326201249.32a618c4.alexander.bruy@gmail.com>
Message-ID: <201003262036.50225.marco@hugis.net>

Hi Alex

Thanks for testing. This error should be fixed in the updated build ( 
www.hugis.net/100326_annotation_tools.tgz )

Does it build on windows like this?

Regards,
Marco



Am Freitag, 26. M?rz 2010 19.12:49 schrieb Alexander Bruy:
> Hi again
> 
> I checkout QGIS sources to another dir and copy to the source tree
> latest annotaion plugin sources and then try to build on Windows.
> Now I have next error at end
> 
> ---[some output skipped]---
> qgsannotationitem.cpp
> qgsannotationplugin.cpp
> Generating Code...
> d:\projects\cpp\qgis\src\plugins\annotation_tools\qgsannotationitem.cpp(401
> ) : warning C4715: 'QgsAnnotationItem::cursorShapeForAction' : not all
>  control paths return a value
>  d:\projects\cpp\qgis\src\plugins\annotation_tools\qgsmaptoolformannotation
> .cpp(51) : error C4716: 'QgsMapToolFormAnnotation::createItem' : must
>  return a value
> 
> Any suggestions?
> 

-- 
Dr. Marco Hugentobler
HUGIS GmbH
Webereistr. 66
CH-8134 Adliswil
marco@hugis.net
www.hugis.net
Technical Advisor QGIS Project Steering Committee
From jef at norbit.de  Fri Mar 26 21:02:15 2010
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Fri Mar 26 21:02:42 2010
Subject: [Qgis-developer] annotation tools
In-Reply-To: <201003262036.50225.marco@hugis.net>
References: <201003251155.06524.marco@hugis.net>
	<20100326191441.304b184f.alexander.bruy@gmail.com>
	<20100326201249.32a618c4.alexander.bruy@gmail.com>
	<201003262036.50225.marco@hugis.net>
Message-ID: <20100327010215.GA27978@norbit.de>

Hi Marco,

On Fri, 26. Mar 2010 at 20:36:50 +0100, Marco Hugentobler wrote:
> Thanks for testing. This error should be fixed in the updated build ( 
> www.hugis.net/100326_annotation_tools.tgz )
> 
> Does it build on windows like this?

Yes.  Builds fine here.


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From reyesmarcelo at gmail.com  Sat Mar 27 01:23:08 2010
From: reyesmarcelo at gmail.com (Marcelo Reyes)
Date: Sat Mar 27 01:23:12 2010
Subject: [Qgis-developer] Load a Spatialite layer using python bindings
Message-ID: <9b3bd4a01003262223t2163672co87dcc3b851a5e082@mail.gmail.com>

Hello,

I'm trying to load a vector layer from a spatialite table. It is easy to do
it in qgis using the tool bar option, but I want to do it programatically
using the python bindings. This is because I'm developing a small stand
alone application.

Can any one show me an example of how to to this? I've found code with
Postgis, but none with spatialite.

I would greatly appreciate any help.

Marcelo
-- 
Marcelo Reyes
Edif. Alborada Of. 605
Tel. 2201034
Cel. 72501267
La Paz Bolivia.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100327/f4495b68/attachment.html
From mandoluca at gmail.com  Sat Mar 27 10:04:27 2010
From: mandoluca at gmail.com (Luca Mandolesi)
Date: Sat Mar 27 10:04:32 2010
Subject: [Qgis-developer] Load a Spatialite layer using python bindings
In-Reply-To: <9b3bd4a01003262223t2163672co87dcc3b851a5e082@mail.gmail.com>
References: <9b3bd4a01003262223t2163672co87dcc3b851a5e082@mail.gmail.com>
Message-ID: <31f1d37d1003270704i74f21dc0n1b7206899d9051c1@mail.gmail.com>

I guess now it's impossible using spatialite through python. I've posted the
same question some times ago, these is my post:

http://groups.google.com/group/spatialite-users/browse_thread/thread/383510283a161603

luca

On Sat, Mar 27, 2010 at 6:23 AM, Marcelo Reyes <reyesmarcelo@gmail.com>wrote:

>
> Hello,
>
> I'm trying to load a vector layer from a spatialite table. It is easy to do
> it in qgis using the tool bar option, but I want to do it programatically
> using the python bindings. This is because I'm developing a small stand
> alone application.
>
> Can any one show me an example of how to to this? I've found code with
> Postgis, but none with spatialite.
>
> I would greatly appreciate any help.
>
> Marcelo
> --
> Marcelo Reyes
> Edif. Alborada Of. 605
> Tel. 2201034
> Cel. 72501267
> La Paz Bolivia.
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100327/4863acd5/attachment.html
From wonder.sk at gmail.com  Sat Mar 27 10:56:58 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Sat Mar 27 10:57:07 2010
Subject: [Qgis-developer] Load a Spatialite layer using python bindings
In-Reply-To: <9b3bd4a01003262223t2163672co87dcc3b851a5e082@mail.gmail.com>
References: <9b3bd4a01003262223t2163672co87dcc3b851a5e082@mail.gmail.com>
Message-ID: <e8e7199c1003270756w2b057781p6dbce1d576464b77@mail.gmail.com>

On Sat, Mar 27, 2010 at 6:23 AM, Marcelo Reyes <reyesmarcelo@gmail.com> wrote:
>
> Hello,
>
> I'm trying to load a vector layer from a spatialite table. It is easy to do
> it in qgis using the tool bar option, but I want to do it programatically
> using the python bindings. This is because I'm developing a small stand
> alone application.
>
> Can any one show me an example of how to to this? I've found code with
> Postgis, but none with spatialite.

uri = QgsDataSourceURI()
uri.setDatabase('/home/martin/test-2.3.sqlite')
uri.setDataSource('','Towns', 'Geometry')

v=QgsVectorLayer(uri.uri(), 'Towns', 'spatialite')

(don't forget to check v.isValid() to see whether the vector layer got
loaded correctly)

Bye
Martin
From reyesmarcelo at gmail.com  Sat Mar 27 11:59:34 2010
From: reyesmarcelo at gmail.com (Marcelo Reyes)
Date: Sat Mar 27 11:59:37 2010
Subject: [Qgis-developer] Load a Spatialite layer using python bindings
In-Reply-To: <e8e7199c1003270756w2b057781p6dbce1d576464b77@mail.gmail.com>
References: <9b3bd4a01003262223t2163672co87dcc3b851a5e082@mail.gmail.com>
	<e8e7199c1003270756w2b057781p6dbce1d576464b77@mail.gmail.com>
Message-ID: <9b3bd4a01003270859s4c105d9eo8b0af9a8601a5394@mail.gmail.com>

Thanks a lot Martin, it works!

Bye
Marcelo

On Sat, Mar 27, 2010 at 10:26 AM, Martin Dobias <wonder.sk@gmail.com> wrote:

> On Sat, Mar 27, 2010 at 6:23 AM, Marcelo Reyes <reyesmarcelo@gmail.com>
> wrote:
> >
> > Hello,
> >
> > I'm trying to load a vector layer from a spatialite table. It is easy to
> do
> > it in qgis using the tool bar option, but I want to do it programatically
> > using the python bindings. This is because I'm developing a small stand
> > alone application.
> >
> > Can any one show me an example of how to to this? I've found code with
> > Postgis, but none with spatialite.
>
> uri = QgsDataSourceURI()
> uri.setDatabase('/home/martin/test-2.3.sqlite')
> uri.setDataSource('','Towns', 'Geometry')
>
> v=QgsVectorLayer(uri.uri(), 'Towns', 'spatialite')
>
> (don't forget to check v.isValid() to see whether the vector layer got
> loaded correctly)
>
> Bye
> Martin
>



-- 
Marcelo Reyes
Edif. Alborada Of. 605
Tel. 2201034
Cel. 72501267
La Paz Bolivia.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100327/eb7587e0/attachment.html
From reyesmarcelo at gmail.com  Sat Mar 27 12:48:06 2010
From: reyesmarcelo at gmail.com (Marcelo Reyes)
Date: Sat Mar 27 12:48:10 2010
Subject: [Qgis-developer] Changing symbology setting fro a loaded layer in
	PyQgis
Message-ID: <9b3bd4a01003270948x21d37fbcp30b37fd4ddabafcb@mail.gmail.com>

Hello,

I have a loaded layer from a spatialite database successfully using:

uri = QgsDataSourceURI()
uri.setDatabase('/home/martin/test-2.3.sqlite')
uri.setDataSource('','Towns', 'Geometry')

v=QgsVectorLayer(uri.uri(), 'Towns', 'spatialite')
It is a POINT layer that shows points of 8 different types. Now I would like
to change the symboly associated with the layer in order to display each
type in a different color, and if possible using a different icon. Any
example on how to do this?

Thanks a lot,

Marcelo.


Marcelo Reyes
Edif. Alborada Of. 605
Tel. 2201034
Cel. 72501267
La Paz Bolivia.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100327/09239191/attachment.html
From jr.morreale at enoreth.net  Sun Mar 28 13:49:37 2010
From: jr.morreale at enoreth.net (MORREALE Jean Roc)
Date: Sun Mar 28 13:49:42 2010
Subject: [Qgis-developer] plugin's menu organization
Message-ID: <4BAF96B1.9060803@enoreth.net>

At Vienna, Boris did a talk about the management of the plugins and 
their position in the menus. If I remember correctly it was agreed that 
plugins should be dispatched in the pre-existent menu to avoid having 
one 3km long menu.

For example, Stefan Ziegler's CadTool is creating is own menu in QGIS 
with only two items in it which is not consistent :
- the old fashion way would have been to create a new entry in the 
plugin's menu
- the other way would be to create an entry in the 'vector' menu and 
representing there all the possible actions so one could reach them with 
keyboard

What is your point of view ?

Regards,
Jean Roc
From borysiasty at aster.pl  Sun Mar 28 15:47:59 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Sun Mar 28 15:48:03 2010
Subject: [Qgis-developer] plugin's menu organization
In-Reply-To: <4BAF96B1.9060803@enoreth.net>
References: <4BAF96B1.9060803@enoreth.net>
Message-ID: <201003282148.00130.borysiasty@aster.pl>

Dnia niedziela, 28 marca 2010 o 19:49:37 MORREALE Jean Roc napisa?(a):
> At Vienna, Boris did a talk about the management of the plugins and
> their position in the menus. If I remember correctly it was agreed that
> plugins should be dispatched in the pre-existent menu to avoid having
> one 3km long menu.
> 
> For example, Stefan Ziegler's CadTool is creating is own menu in QGIS
> with only two items in it which is not consistent :
> - the old fashion way would have been to create a new entry in the
> plugin's menu
> - the other way would be to create an entry in the 'vector' menu and
> representing there all the possible actions so one could reach them with
> keyboard
> 
> What is your point of view ?

Actually we didn't achieve any consensus. One of the ideas was to add them to 
the bottom of each menu, after a spacer separating them from core functions. 
As we have about 130 plugins today and the number is still growing, probably 
we will need to group them into submenus placed under the spacers. Maybe we 
have too many plugins ;-) In the best case, menus and toolbars should be 
configurable by user.

But the first step is just the categorisation. As I'm still completely busy 
since the HF in Vienna, I won't touch it until 1.5 is out. Then will be the 
highest time to do it for the 2.0, aaaggrrh!
From micha at arava.co.il  Sun Mar 28 16:10:11 2010
From: micha at arava.co.il (Micha Silver)
Date: Sun Mar 28 16:10:19 2010
Subject: [Qgis-developer] plugin's menu organization
In-Reply-To: <201003282148.00130.borysiasty@aster.pl>
References: <4BAF96B1.9060803@enoreth.net>
	<201003282148.00130.borysiasty@aster.pl>
Message-ID: <4BAFB7A3.5070902@arava.co.il>

Borys Jurgiel wrote:

> Dnia niedziela, 28 marca 2010 o 19:49:37 MORREALE Jean Roc napisa?(a):
>   
>> At Vienna, Boris did a talk about the management of the plugins and
>> their position in the menus. If I remember correctly it was agreed that
>> plugins should be dispatched in the pre-existent menu to avoid having
>> one 3km long menu.
>>
>> For example, Stefan Ziegler's CadTool is creating is own menu in QGIS
>> with only two items in it which is not consistent :
>> - the old fashion way would have been to create a new entry in the
>> plugin's menu
>> - the other way would be to create an entry in the 'vector' menu and
>> representing there all the possible actions so one could reach them with
>> keyboard
>>
>> What is your point of view ?
>>     
As I see it, QGIS offers two somewhat unique advantages: first, the 
basic installation is quite easy to get into for new (and even 
experienced) users. It doesn't overwhelm you like other GIS software.
But on the other hand, thru the plugin's you get access to a huge set of 
GIS tools. In order to maintain these good qualities:
- the base installation (core features) should stay as clean as 
possible, without mixing plugin menus into the core menus
- plugins should add their own buttons and/or menus (like now) but with 
the addition of categorization, as Borys says. Thus all plugins that 
deal with PostGIS should be in the same menu or toolbar; all plugins 
that interact with GPS in the same menu, raster tools together (already 
partly done), the R plugins under one menu, etc...
Just my 2 cents worth from a user's perspective.
-- 
Micha
>
> Actually we didn't achieve any consensus. One of the ideas was to add them to 
> the bottom of each menu, after a spacer separating them from core functions. 
> As we have about 130 plugins today and the number is still growing, probably 
> we will need to group them into submenus placed under the spacers. Maybe we 
> have too many plugins ;-) In the best case, menus and toolbars should be 
> configurable by user.
>
> But the first step is just the categorisation. As I'm still completely busy 
> since the HF in Vienna, I won't touch it until 1.5 is out. Then will be the 
> highest time to do it for the 2.0, aaaggrrh!
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>   


-- 
Micha Silver
Arava Development Co. +972-52-3665918
http://www.surfaces.co.il
 

From borysiasty at aster.pl  Sun Mar 28 16:22:03 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Sun Mar 28 16:22:11 2010
Subject: [Qgis-developer] plugin's menu organization
In-Reply-To: <4BAFB7A3.5070902@arava.co.il>
References: <4BAF96B1.9060803@enoreth.net>
	<201003282148.00130.borysiasty@aster.pl>
	<4BAFB7A3.5070902@arava.co.il>
Message-ID: <201003282222.03534.borysiasty@aster.pl>

Dnia niedziela, 28 marca 2010 o 22:10:11 Micha Silver napisa?(a):

> As I see it, QGIS offers two somewhat unique advantages: first, the
> basic installation is quite easy to get into for new (and even
> experienced) users. It doesn't overwhelm you like other GIS software.
> But on the other hand, thru the plugin's you get access to a huge set of
> GIS tools. In order to maintain these good qualities:
> - the base installation (core features) should stay as clean as
> possible, without mixing plugin menus into the core menus
> - plugins should add their own buttons and/or menus (like now) but with
> the addition of categorization, as Borys says. Thus all plugins that
> deal with PostGIS should be in the same menu or toolbar; all plugins
> that interact with GPS in the same menu, raster tools together (already
> partly done), the R plugins under one menu, etc...
> Just my 2 cents worth from a user's perspective.

But do you think they should be added to the native menus (all plugins below 
the native commands) or to completely separate menus?
From tech_dev at wildintellect.com  Sun Mar 28 16:42:43 2010
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Sun Mar 28 16:42:49 2010
Subject: [Qgis-developer] plugin's menu organization
In-Reply-To: <201003282222.03534.borysiasty@aster.pl>
References: <4BAF96B1.9060803@enoreth.net>	<201003282148.00130.borysiasty@aster.pl>	<4BAFB7A3.5070902@arava.co.il>
	<201003282222.03534.borysiasty@aster.pl>
Message-ID: <4BAFBF43.1050108@wildintellect.com>

Borys Jurgiel wrote:
> Dnia niedziela, 28 marca 2010 o 22:10:11 Micha Silver napisa?(a):
> 
>> As I see it, QGIS offers two somewhat unique advantages: first, the
>> basic installation is quite easy to get into for new (and even
>> experienced) users. It doesn't overwhelm you like other GIS software.
>> But on the other hand, thru the plugin's you get access to a huge set of
>> GIS tools. In order to maintain these good qualities:
>> - the base installation (core features) should stay as clean as
>> possible, without mixing plugin menus into the core menus
>> - plugins should add their own buttons and/or menus (like now) but with
>> the addition of categorization, as Borys says. Thus all plugins that
>> deal with PostGIS should be in the same menu or toolbar; all plugins
>> that interact with GPS in the same menu, raster tools together (already
>> partly done), the R plugins under one menu, etc...
>> Just my 2 cents worth from a user's perspective.
> 
> But do you think they should be added to the native menus (all plugins below 
> the native commands) or to completely separate menus?

Completely seperate plugin section, otherwise when you turn on a plugin
you'll have no idea where it is. An exception to this would be if the
Manage plugins where you go to activate them had tabs with the same
names, that would clearly indicate where you should find the plugin once
it's turned on.

Thanks,
Alex

From borysiasty at aster.pl  Sun Mar 28 16:45:07 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Sun Mar 28 16:45:11 2010
Subject: [Qgis-developer] plugin's menu organization
In-Reply-To: <4BAFBF43.1050108@wildintellect.com>
References: <4BAF96B1.9060803@enoreth.net>
	<201003282222.03534.borysiasty@aster.pl>
	<4BAFBF43.1050108@wildintellect.com>
Message-ID: <201003282245.07662.borysiasty@aster.pl>

> Completely seperate plugin section, otherwise when you turn on a plugin
> you'll have no idea where it is. An exception to this would be if the
> Manage plugins where you go to activate them had tabs with the same
> names, that would clearly indicate where you should find the plugin once
> it's turned on.

Thanks. So clear categorization withing the existing plugin menu seems best 
for a start.
From micha at arava.co.il  Mon Mar 29 02:28:46 2010
From: micha at arava.co.il (Micha Silver)
Date: Mon Mar 29 02:28:59 2010
Subject: [Qgis-developer] plugin's menu organization
In-Reply-To: <4BAFBF43.1050108@wildintellect.com>
References: <4BAF96B1.9060803@enoreth.net>	<201003282148.00130.borysiasty@aster.pl>	<4BAFB7A3.5070902@arava.co.il>	<201003282222.03534.borysiasty@aster.pl>
	<4BAFBF43.1050108@wildintellect.com>
Message-ID: <4BB0489E.4020500@arava.co.il>

Alex Mandel wrote:

> Borys Jurgiel wrote:
>   
>> Dnia niedziela, 28 marca 2010 o 22:10:11 Micha Silver napisa?(a):
>>
>>     
>>> As I see it, QGIS offers two somewhat unique advantages: first, the
>>> basic installation is quite easy to get into for new (and even
>>> experienced) users. It doesn't overwhelm you like other GIS software.
>>> But on the other hand, thru the plugin's you get access to a huge set of
>>> GIS tools. In order to maintain these good qualities:
>>> - the base installation (core features) should stay as clean as
>>> possible, without mixing plugin menus into the core menus
>>> - plugins should add their own buttons and/or menus (like now) but with
>>> the addition of categorization, as Borys says. Thus all plugins that
>>> deal with PostGIS should be in the same menu or toolbar; all plugins
>>> that interact with GPS in the same menu, raster tools together (already
>>> partly done), the R plugins under one menu, etc...
>>> Just my 2 cents worth from a user's perspective.
>>>       
>> But do you think they should be added to the native menus (all plugins below 
>> the native commands) or to completely separate menus?
>>     
>
> Completely seperate plugin section, otherwise when you turn on a plugin
> you'll have no idea where it is. An exception to this would be if the
> Manage plugins where you go to activate them had tabs with the same
> names, that would clearly indicate where you should find the plugin once
> it's turned on.
>
>   
+1
Micha
> Thanks,
> Alex
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> This mail was received via Mail-SeCure System.
>
>
>   


-- 
Micha Silver
Arava Development Co. +972-52-3665918
http://www.surfaces.co.il
 

From a.neumann at carto.net  Mon Mar 29 02:41:38 2010
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon Mar 29 02:41:57 2010
Subject: [Qgis-developer] plugin's menu organization
In-Reply-To: <201003282245.07662.borysiasty@aster.pl>
References: <4BAF96B1.9060803@enoreth.net>
	<201003282222.03534.borysiasty@aster.pl>
	<4BAFBF43.1050108@wildintellect.com>
	<201003282245.07662.borysiasty@aster.pl>
Message-ID: <16612.193.246.86.39.1269844898.squirrel@webmail.carto.net>

Hi all,

For the issue on how to find the plugin: one option would be to have a
mini-documentation popping up after the plugin install that indicates:

* where to find the plugin (menu, toolbar)
* quick info how to use it
* Link to webpage with full documentation.

This mini documentation could be part of the plugins.xml file of the
repository.

What do you think?

Andreas

On Sun, March 28, 2010 10:45 pm, Borys Jurgiel wrote:
>> Completely seperate plugin section, otherwise when you turn on a plugin
>> you'll have no idea where it is. An exception to this would be if the
>> Manage plugins where you go to activate them had tabs with the same
>> names, that would clearly indicate where you should find the plugin once
>> it's turned on.
>
> Thanks. So clear categorization withing the existing plugin menu seems
> best
> for a start.
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Andreas Neumann
http://www.carto.net/neumann/
http://www.svgopen.org/

From marco at hugis.net  Mon Mar 29 04:15:14 2010
From: marco at hugis.net (Marco Hugentobler)
Date: Mon Mar 29 04:16:58 2010
Subject: [Qgis-developer] annotation tools
In-Reply-To: <DB77C71F-81D7-40A7-9C00-A826BAB2942E@gmail.com>
References: <201003251155.06524.marco@hugis.net>
	<201003261039.41098.marco@hugis.net>
	<DB77C71F-81D7-40A7-9C00-A826BAB2942E@gmail.com>
Message-ID: <201003291015.14528.marco@hugis.net>

Hi John

What do you mean with 'any font changes are not sticking on OS X' ? Is it that 
you select a font and it does not appear in the item?

Is there a place in QGIS where the native Mac font dialog already appears? 
Because I'm not sure from the docs if QFontDialog::getFont really uses the 
native dialog.

> I noticed if
>  an annotation is selected in the canvas, the resize widgets are printed
>  from the composer

Right, this if fixed now.

> Also, font sizes are incorrect when exporting to svg on
>  my system. PDF export looked good.

Hm, true. And it also happens in the form widgets. This is difficult, I remember 
that I used pixel sized fonts in the mapcomposer to avoid this problem with 
the labels. But with the form items, it is not possible because the Qt widget 
handles the font scaling.


Regards,
Marco 

Am Freitag, 26. M?rz 2010 18.57:29 schrieb John C. Tull:
> Hi Marco,
> 
> This is looking like a nice start. I would like to see the font settings
>  changed to a standard font dialog, preferably allowing the native mac
>  dialog on OS X systems using Qt-cocoa. Currently, any font changes are not
>  sticking on OS X.
> 
> The annotations worked on both the map and composer canvasses. I noticed if
>  an annotation is selected in the canvas, the resize widgets are printed
>  from the composer. Also, font sizes are incorrect when exporting to svg on
>  my system. PDF export looked good.
> 
> Cheers,
> John
> 
> On Mar 26, 2010, at 2:39 AM, Marco Hugentobler wrote:
> > Hi John
> >
> > Thanks for testing. You are right, the deleteAnnotation has been left in
> > the header, but not in the cpp.
> >
> > The updated source package is on:
> >
> > www.hugis.net/100326_annotation_tools.tgz
> >
> > Regards,
> > Marco
> >
> > Am Freitag, 26. M?rz 2010 03.05:42 schrieb John C. Tull:
> >> Hi Marco,
> >>
> >> I was unable to get the plugin to compile:
> >>
> >> ...
> >> [ 82%] Building CXX object
> >> src/plugins/annotation_tools/CMakeFiles/annotationplugin.dir/qrc_annotat
> >>io n_tools.cxx.o Linking CXX shared module libannotationplugin.so
> >> Undefined symbols:
> >>  "QgsAnnotationPlugin::deleteAnnotation()", referenced from:
> >>      QgsAnnotationPlugin::qt_metacall(QMetaObject::Call, int, void**)in
> >> moc_qgsannotationplugin.cxx.o ld: symbol(s) not found
> >> collect2: ld returned 1 exit status
> >> make[2]: *** [src/plugins/annotation_tools/libannotationplugin.so] Error
> >> 1 make[1]: ***
> >> [src/plugins/annotation_tools/CMakeFiles/annotationplugin.dir/all] Error
> >> 2 make: *** [all] Error 2
> >>
> >> Regards,
> >> John
> >>
> >> On Mar 25, 2010, at 3:55 AM, Marco Hugentobler wrote:
> >>> Hi devs
> >>>
> >>> I'd like to publish the first version of the annotation tools (that
> >>> were also presented at the hackfest in Pisa) for testing:
> >>>
> >>> www.hugis.net/100324_annotation_tools.tgz
> >>>
> >>> Just copy it to you src/plugins/ directory and unpack. Then, insert
> >>> 'annotation_tools' as new subdirectory into src/plugins/CMakeLists.txt.
> >>> To make the items also appear in the print composer, you need to enable
> >>> the lines 273 and 314 in src/core/qgscomposermap.cpp
> >>>
> >>> The plugin provides the functionality to place balloons for textboxes
> >>> and designer forms on the map, providing various possibilities for
> >>> symbolisations.
> >>>
> >>> At the moment, it is a plugin, but I'd like to bring the annotation
> >>> classes into the gui library. What do you think?
> >>>
> >>> Regards,
> >>> Marco
> 

-- 
Dr. Marco Hugentobler
HUGIS GmbH
Webereistrasse 66
CH-8134 Adliswil
marco@hugis.net
http://homepage.hispeed.ch/hugis
Technical Advisor QGIS Project Steering Committee
From borysiasty at aster.pl  Mon Mar 29 04:23:35 2010
From: borysiasty at aster.pl (Borys Jurgiel)
Date: Mon Mar 29 04:25:10 2010
Subject: [Qgis-developer] plugin's menu organization
In-Reply-To: <16612.193.246.86.39.1269844898.squirrel@webmail.carto.net>
References: <4BAF96B1.9060803@enoreth.net>
	<201003282245.07662.borysiasty@aster.pl>
	<16612.193.246.86.39.1269844898.squirrel@webmail.carto.net>
Message-ID: <201003291023.35872.borysiasty@aster.pl>

Dnia poniedzia?ek, 29 marca 2010 o 08:41:38 napisa?e?:
> Hi all,
> 
> For the issue on how to find the plugin: one option would be to have a
> mini-documentation popping up after the plugin install that indicates:
> 
> * where to find the plugin (menu, toolbar)
> * quick info how to use it
> * Link to webpage with full documentation.
> 
> This mini documentation could be part of the plugins.xml file of the
> repository.
> 
> What do you think?

With Martin, we think rather about "firefox-style" rich descriptions of both 
available and installed plugins, so there will be a place for such 
information. Or, as you say, a popup with installation summary (of course in 
case someone installs dozens of plugins, it will be one popup for whole 
process).
From jr.morreale at enoreth.net  Mon Mar 29 05:24:39 2010
From: jr.morreale at enoreth.net (MORREALE Jean Roc)
Date: Mon Mar 29 05:40:10 2010
Subject: [Qgis-developer] plugin's menu organization
Message-ID: <3588.1269854679@enoreth.net>

I'm not sure because if a user click on it without looking at it then he doesn't get the information and no other way to get it again (just by reinstalling it).


 Le lun 29/03/10 08:41, "Andreas Neumann" a.neumann@carto.net a ?crit:
> Hi all,
> 
> For the issue on how to find the plugin: one option would be to have a
> mini-documentation popping up after the plugin install that indicates:
> 
> * where to find the plugin (menu, toolbar)
> * quick info how to use it
> * Link to webpage with full documentation.
> 
> This mini documentation could be part of the plugins.xml file of the
> repository.
> 
> What do you think?
> 
> Andreas
> 
> On Sun, March 28, 2010 10:45 pm, Borys Jurgiel wrote:
> >> Completely seperate plugin section, otherwise
> when you turn on a plugin
>> you'll have no idea where it is. An exception to
> this would be if the
>> Manage plugins where you go to activate them had
> tabs with the same
>> names, that would clearly indicate where you
> should find the plugin once
>> it's turned on.
> >
> > Thanks. So clear categorization withing the existing
> plugin menu seems
> best
> > for a start.
> >
> _______________________________________________
> Qgis-developer mailing list
> > Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> 
> 
> -- 
> Andreas Neumann
> http://www.carto.net/neumann/
http://www.svgopen.org/
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> 

From wonder.sk at gmail.com  Mon Mar 29 07:08:01 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon Mar 29 07:09:06 2010
Subject: [Qgis-developer] mapserver plugin, qgs project xml and 
	label-elements
In-Reply-To: <4BB06495.50202@duif.net>
References: <4BAA8B2F.4060505@duif.net>
	<e8e7199c1003260315w4109101an152408e4389418d8@mail.gmail.com>
	<4BB06495.50202@duif.net>
Message-ID: <e8e7199c1003290408n6e867259u38e509a64afcc754@mail.gmail.com>

On Mon, Mar 29, 2010 at 10:28 AM, Richard Duivenvoorde <richard@duif.net> wrote:
> Hi Martin,
>
> my 'problem' with using the context of the tag is that the minidom retrieves
> ALL child label-elements from the maplayer element, and I do not know an
> easy name to distinguish the right 'label' from all the labels I retrieve
> from the maplayer element...
>
> -maplayer
> \-LABEL ? // 1 or 0 == haslabel
> \-uniquevalue
> ? ? ? ?\-symbol
> ? ? ? ? ? ? ? ?\-LABEL // txt == legendlabel
> \labelattributes
> ? ? ? ?\-LABEL fieldname=X text=Y ?// actual labels

Right, so you can take all returned <label> elements and check what is
their parent (using parentNode attribute) to determine their context.


> Your argument about 'incompatibility for the projectfiles'. Is that valid?
> We do not guarantee backwards compatibility do we? And it makes the project
> file more understandable and easier to use for plugin builders.

Well, I wasn't really clear. We try not to modify project file format
among releases of QGIS. Ideally, project created in 1.0 should work
perfectly in 1.4 and vice versa. But this is not always possible: so
if we do any changes to project file format, we aim to keep
compatibility with projects from older releases. There is a small
framework for transformation of older project files to newer project
files (see QgsProjectFileTransform). If there are any
incompatibilities, the older project file is first transformed
on-the-fly to work with current version and then loaded (as if it was
a project file from current version). So, when a change in project
file format is introduced in qgis 1.7, then qgis 1.3 probably will
have some problems reading it. Therefore we try to avoid such changes
if they're not necessary.

I hope other devs have the same opinion, if not, please tell me :-)

If we changed the names of <label> element tags for 1.5, the new
projects will get incorrect labeling settings in older versions of
QGIS. That's why I think it's better to keep things as they.

> The plugin is fortunatly a 'standard qgis plugin', so is always delivered as
> is with a current version. And will work with that version of the project
> file format :-)

If you parse the xml code manually, you may need to take care of the
differences too (or tell the user he needs to save the project in the
qgis version the plugin expects). That's another win of using
QgsProject class: it will handle the differences automatically and you
don't have to bother with it.

Cheers
Martin
From wonder.sk at gmail.com  Mon Mar 29 07:32:25 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon Mar 29 07:32:28 2010
Subject: [Qgis-developer] Changing symbology setting fro a loaded layer in
	PyQgis
In-Reply-To: <9b3bd4a01003270948x21d37fbcp30b37fd4ddabafcb@mail.gmail.com>
References: <9b3bd4a01003270948x21d37fbcp30b37fd4ddabafcb@mail.gmail.com>
Message-ID: <e8e7199c1003290432t37abaa4btb92f4420f191e423@mail.gmail.com>

On Sat, Mar 27, 2010 at 6:48 PM, Marcelo Reyes <reyesmarcelo@gmail.com> wrote:
> [...]
> It is a POINT layer that shows points of 8 different types. Now I would like
> to change the symboly associated with the layer in order to display each
> type in a different color, and if possible using a different icon. Any
> example on how to do this?

This is an example of using single symbol renderer for points, it will
render green circles with red outline:

s=QgsSymbol(QGis.Point)
s.setColor(QColor(255,0,0))
s.setBrush(QBrush(QColor(0,255,0)))
sr=QgsSingleSymbolRenderer(QGis.Point)
sr.addSymbol(s)
layer.setRenderer(sr)

If you need different symbols for different attribute values, you
should use either QgsGraduatedSymbolRenderer or
QgsUniqueValueRenderer. You would need add several symbols (QgsSymbol
instances) for them and assign lower/upper values. See QGIS API
reference for more details about the classes.

Another possibility is, if you're using QGIS 1.4 or development
version, to use new symbology infrastructure. It is described here:
http://www.qgis.org/wiki/Symbology-NG

Regards
Martin
From a.neumann at carto.net  Mon Mar 29 08:53:27 2010
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon Mar 29 08:54:01 2010
Subject: [Qgis-developer] plugin's menu organization
In-Reply-To: <3588.1269854679@enoreth.net>
References: <3588.1269854679@enoreth.net>
Message-ID: <42181.193.246.86.39.1269867207.squirrel@webmail.carto.net>

It doesn't mean that the information should be exclusively available to
the plugin installer. The same information could be made available through
different mechanisms. But it would provide immediate feedback to the user
about how to use the plugin.

Andreas

On Mon, March 29, 2010 11:24 am, MORREALE Jean Roc wrote:
> I'm not sure because if a user click on it without looking at it then he
> doesn't get the information and no other way to get it again (just by
> reinstalling it).
>
>
>  Le lun 29/03/10 08:41, "Andreas Neumann" a.neumann@carto.net a ??crit:
>> Hi all,
>>
>> For the issue on how to find the plugin: one option would be to have a
>> mini-documentation popping up after the plugin install that indicates:
>>
>> * where to find the plugin (menu, toolbar)
>> * quick info how to use it
>> * Link to webpage with full documentation.
>>
>> This mini documentation could be part of the plugins.xml file of the
>> repository.
>>
>> What do you think?
>>
>> Andreas
>>
>> On Sun, March 28, 2010 10:45 pm, Borys Jurgiel wrote:
>> >> Completely seperate plugin section, otherwise
>> when you turn on a plugin
>>> you'll have no idea where it is. An exception to
>> this would be if the
>>> Manage plugins where you go to activate them had
>> tabs with the same
>>> names, that would clearly indicate where you
>> should find the plugin once
>>> it's turned on.
>> >
>> > Thanks. So clear categorization withing the existing
>> plugin menu seems
>> best
>> > for a start.
>> >
>> _______________________________________________
>> Qgis-developer mailing list
>> > Qgis-developer@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
>>
>> --
>> Andreas Neumann
>> http://www.carto.net/neumann/
> http://www.svgopen.org/
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Andreas Neumann
http://www.carto.net/neumann/
http://www.svgopen.org/

From alexander.bruy at gmail.com  Mon Mar 29 13:10:04 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Mon Mar 29 13:11:42 2010
Subject: [Qgis-developer] annotation tools
In-Reply-To: <201003262036.50225.marco@hugis.net>
References: <201003251155.06524.marco@hugis.net>
	<20100326191441.304b184f.alexander.bruy@gmail.com>
	<20100326201249.32a618c4.alexander.bruy@gmail.com>
	<201003262036.50225.marco@hugis.net>
Message-ID: <20100329201004.b3054e37.alexander.bruy@gmail.com>

Hi Marco

sorry for late responce. Now it compiles and works fine on Linux and
Windows. Thanks for this cool tool.

I found a minor issue with plugin. When it deactivated in Plugin manager
the button on toolbar don't deleted immediately. I need to restart QGIS
to remove button.

On Fri, 26 Mar 2010 20:36:50 +0100
Marco Hugentobler <marco@hugis.net> wrote:

> Hi Alex
> 
> Thanks for testing. This error should be fixed in the updated build ( 
> www.hugis.net/100326_annotation_tools.tgz )
> 
> Does it build on windows like this?

-- 
Alexander Bruy
From sim at gis-lab.info  Mon Mar 29 13:36:15 2010
From: sim at gis-lab.info (Maxim Dubinin)
Date: Mon Mar 29 13:41:06 2010
Subject: [Qgis-developer] annotation tools
In-Reply-To: <20100329201004.b3054e37.alexander.bruy@gmail.com>
References: <201003251155.06524.marco@hugis.net>
	<20100326191441.304b184f.alexander.bruy@gmail.com>
	<20100326201249.32a618c4.alexander.bruy@gmail.com>
	<201003262036.50225.marco@hugis.net>
	<20100329201004.b3054e37.alexander.bruy@gmail.com>
Message-ID: <1197271248.20100329123615@gis-lab.info>

Thanks for your work, Marco.

BTW, Alex has also built a dll for win, which can be helpful for those
who cannot build on windows (like myself). Here is the link:
http://gis-lab.info/forum/download/file.php?id=1254

My three small feature requests:
1. Allow to make frame color transparent
2. Allow to make annotations taking value from current labeling field
of the current layer.
3. Save map marker/map position etc. choice for next annotation

Maxim

?? ?????? 29 ????? 2010 ?., 12:10:04:

AB> Hi Marco

AB> sorry for late responce. Now it compiles and works fine on Linux and
AB> Windows. Thanks for this cool tool.

AB> I found a minor issue with plugin. When it deactivated in Plugin manager
AB> the button on toolbar don't deleted immediately. I need to restart QGIS
AB> to remove button.

AB> On Fri, 26 Mar 2010 20:36:50 +0100
AB> Marco Hugentobler <marco@hugis.net> wrote:

>> Hi Alex
>> 
>> Thanks for testing. This error should be fixed in the updated build ( 
>> www.hugis.net/100326_annotation_tools.tgz )
>> 
>> Does it build on windows like this?

From ccrook at linz.govt.nz  Mon Mar 29 14:33:45 2010
From: ccrook at linz.govt.nz (Chris Crook)
Date: Mon Mar 29 14:35:52 2010
Subject: [Qgis-developer] plugin's menu organization
In-Reply-To: <42181.193.246.86.39.1269867207.squirrel@webmail.carto.net>
References: <3588.1269854679@enoreth.net>,
	<42181.193.246.86.39.1269867207.squirrel@webmail.carto.net>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E064F75DE7D@prdlsmmsg01.ad.linz.govt.nz>

Wouldn't it be simpler to have a standard document in the plugin folder (at least for python plugins).  This could then be used by the installer, and at any other time.  I'm not sure there is any advantage to putting it into the repository XML file?

Chris
________________________________________
From: qgis-developer-bounces@lists.osgeo.org [qgis-developer-bounces@lists.osgeo.org] On Behalf Of Andreas Neumann [a.neumann@carto.net]
Sent: 30 March 2010 01:53
To: MORREALE Jean Roc
Cc: qgis-developer@lists.osgeo.org
Subject: Re: [Qgis-developer] plugin's menu organization

It doesn't mean that the information should be exclusively available to
the plugin installer. The same information could be made available through
different mechanisms. But it would provide immediate feedback to the user
about how to use the plugin.

Andreas

On Mon, March 29, 2010 11:24 am, MORREALE Jean Roc wrote:
> I'm not sure because if a user click on it without looking at it then he
> doesn't get the information and no other way to get it again (just by
> reinstalling it).
>
>
>  Le lun 29/03/10 08:41, "Andreas Neumann" a.neumann@carto.net a ??crit:
>> Hi all,
>>
>> For the issue on how to find the plugin: one option would be to have a
>> mini-documentation popping up after the plugin install that indicates:
>>
>> * where to find the plugin (menu, toolbar)
>> * quick info how to use it
>> * Link to webpage with full documentation.
>>
>> This mini documentation could be part of the plugins.xml file of the
>> repository.
>>
>> What do you think?
>>
>> Andreas
>>
>> On Sun, March 28, 2010 10:45 pm, Borys Jurgiel wrote:
>> >> Completely seperate plugin section, otherwise
>> when you turn on a plugin
>>> you'll have no idea where it is. An exception to
>> this would be if the
>>> Manage plugins where you go to activate them had
>> tabs with the same
>>> names, that would clearly indicate where you
>> should find the plugin once
>>> it's turned on.
>> >
>> > Thanks. So clear categorization withing the existing
>> plugin menu seems
>> best
>> > for a start.
>> >
>> _______________________________________________
>> Qgis-developer mailing list
>> > Qgis-developer@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
>>
>> --
>> Andreas Neumann
>> http://www.carto.net/neumann/
> http://www.svgopen.org/
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>


--
Andreas Neumann
http://www.carto.net/neumann/
http://www.svgopen.org/

_______________________________________________
Qgis-developer mailing list
Qgis-developer@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/qgis-developer
______________________________________________________________________________________________________

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank you.
______________________________________________________________________________________________________
From a.neumann at carto.net  Mon Mar 29 14:49:33 2010
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon Mar 29 14:50:00 2010
Subject: [Qgis-developer] plugin's menu organization
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E064F75DE7D@prdlsmmsg01.ad.linz.govt.nz>
References: <3588.1269854679@enoreth.net>,
	<42181.193.246.86.39.1269867207.squirrel@webmail.carto.net>
	<666FB8D75E95AE42965A0E76A5E5337E064F75DE7D@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <4BB0F63D.1030904@carto.net>

Hi Chris,

yes - this could be a local cache - but somewhere you have to get the 
information from - and for that purpose the repository's plugins.xml 
file would be a good source, wouldn't it?

Andreas

On 3/29/10 8:33 PM, Chris Crook wrote:
> Wouldn't it be simpler to have a standard document in the plugin folder (at least for python plugins).  This could then be used by the installer, and at any other time.  I'm not sure there is any advantage to putting it into the repository XML file?
>
> Chris
> ________________________________________
> From: qgis-developer-bounces@lists.osgeo.org [qgis-developer-bounces@lists.osgeo.org] On Behalf Of Andreas Neumann [a.neumann@carto.net]
> Sent: 30 March 2010 01:53
> To: MORREALE Jean Roc
> Cc: qgis-developer@lists.osgeo.org
> Subject: Re: [Qgis-developer] plugin's menu organization
>
> It doesn't mean that the information should be exclusively available to
> the plugin installer. The same information could be made available through
> different mechanisms. But it would provide immediate feedback to the user
> about how to use the plugin.
>
> Andreas
>
> On Mon, March 29, 2010 11:24 am, MORREALE Jean Roc wrote:
>    
>> I'm not sure because if a user click on it without looking at it then he
>> doesn't get the information and no other way to get it again (just by
>> reinstalling it).
>>
>>
>>   Le lun 29/03/10 08:41, "Andreas Neumann" a.neumann@carto.net a ??crit:
>>      
>>> Hi all,
>>>
>>> For the issue on how to find the plugin: one option would be to have a
>>> mini-documentation popping up after the plugin install that indicates:
>>>
>>> * where to find the plugin (menu, toolbar)
>>> * quick info how to use it
>>> * Link to webpage with full documentation.
>>>
>>> This mini documentation could be part of the plugins.xml file of the
>>> repository.
>>>
>>> What do you think?
>>>
>>> Andreas
>>>
>>> On Sun, March 28, 2010 10:45 pm, Borys Jurgiel wrote:
>>>        
>>>>> Completely seperate plugin section, otherwise
>>>>>            
>>> when you turn on a plugin
>>>        
>>>> you'll have no idea where it is. An exception to
>>>>          
>>> this would be if the
>>>        
>>>> Manage plugins where you go to activate them had
>>>>          
>>> tabs with the same
>>>        
>>>> names, that would clearly indicate where you
>>>>          
>>> should find the plugin once
>>>        
>>>> it's turned on.
>>>>
>>>> Thanks. So clear categorization withing the existing
>>>>          
>>> plugin menu seems
>>> best
>>>        
>>>> for a start.
>>>>
>>>>          
>>> _______________________________________________
>>> Qgis-developer mailing list
>>>        
>>>> Qgis-developer@lists.osgeo.org
>>>>          
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>        
>>>>          
>>>
>>> --
>>> Andreas Neumann
>>> http://www.carto.net/neumann/
>>>        
>> http://www.svgopen.org/
>>      
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer@lists.osgeo.org
>>>        
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>      
>>>
>>>        
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>      
>
> --
> Andreas Neumann
> http://www.carto.net/neumann/
> http://www.svgopen.org/
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> ______________________________________________________________________________________________________
>
> This message contains information, which is confidential and may be subject to legal privilege.
> If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
> If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
> LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.
>
> Thank you.
> ______________________________________________________________________________________________________
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>    

From ccrook at linz.govt.nz  Mon Mar 29 15:21:08 2010
From: ccrook at linz.govt.nz (Chris Crook)
Date: Mon Mar 29 15:21:18 2010
Subject: [Qgis-developer] plugin's menu organization
In-Reply-To: <4BB0F63D.1030904@carto.net>
References: <3588.1269854679@enoreth.net>,
	<42181.193.246.86.39.1269867207.squirrel@webmail.carto.net>
	<666FB8D75E95AE42965A0E76A5E5337E064F75DE7D@prdlsmmsg01.ad.linz.govt.nz>
	<4BB0F63D.1030904@carto.net>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E064F96275E@prdlsmmsg01.ad.linz.govt.nz>

Hi Andreas

I guess I'm thinking that this information isn't required until the plugin is installed, so putting it into the installation, rather than the repository, seems to make sense to me.  And once the plugin is installed, it does not necessarily know what repository it was installed from, or have access to the repository XML file.  It seems to me that how and where the plugin installs itself into Qgis is the business of the plugin, not the business of the repository.  

I agree that it is a really good idea to make this information available in a standard form.  There is a new function in the qgis.utils python module, showPluginHelp, which I suggested as a way of moving towards a standardised format for plugin documentation. 

BTW - do you know where there is a definition of the plugins.xml schema?  I've copied an existing file for an inhouse repository of business specific plugins, but I'd like to make sure I'm doing it correctly.

Cheers
Chris

-----Original Message-----
From: qgis-developer-bounces@lists.osgeo.org [mailto:qgis-developer-bounces@lists.osgeo.org] On Behalf Of Andreas Neumann
Sent: Tuesday, 30 March 2010 7:50 a.m.
To: qgis-developer@lists.osgeo.org
Subject: Re: [Qgis-developer] plugin's menu organization

Hi Chris,

yes - this could be a local cache - but somewhere you have to get the information from - and for that purpose the repository's plugins.xml file would be a good source, wouldn't it?

Andreas

On 3/29/10 8:33 PM, Chris Crook wrote:
> Wouldn't it be simpler to have a standard document in the plugin folder (at least for python plugins).  This could then be used by the installer, and at any other time.  I'm not sure there is any advantage to putting it into the repository XML file?
>
> Chris
> ________________________________________
> From: qgis-developer-bounces@lists.osgeo.org 
> [qgis-developer-bounces@lists.osgeo.org] On Behalf Of Andreas Neumann 
> [a.neumann@carto.net]
> Sent: 30 March 2010 01:53
> To: MORREALE Jean Roc
> Cc: qgis-developer@lists.osgeo.org
> Subject: Re: [Qgis-developer] plugin's menu organization
>
> It doesn't mean that the information should be exclusively available 
> to the plugin installer. The same information could be made available 
> through different mechanisms. But it would provide immediate feedback 
> to the user about how to use the plugin.
>
> Andreas
>
> On Mon, March 29, 2010 11:24 am, MORREALE Jean Roc wrote:
>    
>> I'm not sure because if a user click on it without looking at it then 
>> he doesn't get the information and no other way to get it again (just 
>> by reinstalling it).
>>
>>
>>   Le lun 29/03/10 08:41, "Andreas Neumann" a.neumann@carto.net a ??crit:
>>      
>>> Hi all,
>>>
>>> For the issue on how to find the plugin: one option would be to have 
>>> a mini-documentation popping up after the plugin install that indicates:
>>>
>>> * where to find the plugin (menu, toolbar)
>>> * quick info how to use it
>>> * Link to webpage with full documentation.
>>>
>>> This mini documentation could be part of the plugins.xml file of the 
>>> repository.
>>>
>>> What do you think?
>>>
>>> Andreas
>>>
>>> On Sun, March 28, 2010 10:45 pm, Borys Jurgiel wrote:
>>>        
>>>>> Completely seperate plugin section, otherwise
>>>>>            
>>> when you turn on a plugin
>>>        
>>>> you'll have no idea where it is. An exception to
>>>>          
>>> this would be if the
>>>        
>>>> Manage plugins where you go to activate them had
>>>>          
>>> tabs with the same
>>>        
>>>> names, that would clearly indicate where you
>>>>          
>>> should find the plugin once
>>>        
>>>> it's turned on.
>>>>
>>>> Thanks. So clear categorization withing the existing
>>>>          
>>> plugin menu seems
>>> best
>>>        
>>>> for a start.
>>>>
>>>>          
>>> _______________________________________________
>>> Qgis-developer mailing list
>>>        
>>>> Qgis-developer@lists.osgeo.org
>>>>          
>>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>        
>>>>          
>>>
>>> --
>>> Andreas Neumann
>>> http://www.carto.net/neumann/
>>>        
>> http://www.svgopen.org/
>>      
>>> _______________________________________________
>>> Qgis-developer mailing list
>>> Qgis-developer@lists.osgeo.org
>>>        
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>      
>>>
>>>        
>> _______________________________________________
>> Qgis-developer mailing list
>> Qgis-developer@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>      
>
> --
> Andreas Neumann
> http://www.carto.net/neumann/
> http://www.svgopen.org/
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> ______________________________________________________________________
> ________________________________
>
> This message contains information, which is confidential and may be subject to legal privilege.
> If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
> If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
> LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.
>
> Thank you.
> ______________________________________________________________________
> ________________________________ 
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>    

_______________________________________________
Qgis-developer mailing list
Qgis-developer@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/qgis-developer
______________________________________________________________________________________________________

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank you.
______________________________________________________________________________________________________
From rdmailings at duif.net  Mon Mar 29 15:58:15 2010
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon Mar 29 16:10:15 2010
Subject: [Qgis-developer] mapserver plugin,
	qgs project xml and 	label-elements
In-Reply-To: <e8e7199c1003290408n6e867259u38e509a64afcc754@mail.gmail.com>
References: <4BAA8B2F.4060505@duif.net>	<e8e7199c1003260315w4109101an152408e4389418d8@mail.gmail.com>	<4BB06495.50202@duif.net>
	<e8e7199c1003290408n6e867259u38e509a64afcc754@mail.gmail.com>
Message-ID: <4BB10657.8020402@duif.net>

Thanks Martin,for your insights.
I will use the solution you provide.
Regards,
Richard

Martin Dobias wrote:
> On Mon, Mar 29, 2010 at 10:28 AM, Richard Duivenvoorde <richard@duif.net> wrote:
>> Hi Martin,
>>
>> my 'problem' with using the context of the tag is that the minidom retrieves
>> ALL child label-elements from the maplayer element, and I do not know an
>> easy name to distinguish the right 'label' from all the labels I retrieve
>> from the maplayer element...
>>
>> -maplayer
>> \-LABEL   // 1 or 0 == haslabel
>> \-uniquevalue
>>        \-symbol
>>                \-LABEL // txt == legendlabel
>> \labelattributes
>>        \-LABEL fieldname=X text=Y  // actual labels
> 
> Right, so you can take all returned <label> elements and check what is
> their parent (using parentNode attribute) to determine their context.
> 
> 
>> Your argument about 'incompatibility for the projectfiles'. Is that valid?
>> We do not guarantee backwards compatibility do we? And it makes the project
>> file more understandable and easier to use for plugin builders.
> 
> Well, I wasn't really clear. We try not to modify project file format
> among releases of QGIS. Ideally, project created in 1.0 should work
> perfectly in 1.4 and vice versa. But this is not always possible: so
> if we do any changes to project file format, we aim to keep
> compatibility with projects from older releases. There is a small
> framework for transformation of older project files to newer project
> files (see QgsProjectFileTransform). If there are any
> incompatibilities, the older project file is first transformed
> on-the-fly to work with current version and then loaded (as if it was
> a project file from current version). So, when a change in project
> file format is introduced in qgis 1.7, then qgis 1.3 probably will
> have some problems reading it. Therefore we try to avoid such changes
> if they're not necessary.
> 
> I hope other devs have the same opinion, if not, please tell me :-)
> 
> If we changed the names of <label> element tags for 1.5, the new
> projects will get incorrect labeling settings in older versions of
> QGIS. That's why I think it's better to keep things as they.
> 
>> The plugin is fortunatly a 'standard qgis plugin', so is always delivered as
>> is with a current version. And will work with that version of the project
>> file format :-)
> 
> If you parse the xml code manually, you may need to take care of the
> differences too (or tell the user he needs to save the project in the
> qgis version the plugin expects). That's another win of using
> QgsProject class: it will handle the differences automatically and you
> don't have to bother with it.
> 
> Cheers
> Martin
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

From cavallini at faunalia.it  Mon Mar 29 18:40:33 2010
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon Mar 29 18:40:50 2010
Subject: [Qgis-developer] Statist plugin
Message-ID: <b4a32e573210d965f37b4099dc1c2819@localhost>


Hi all.
My compliments for this plugin. I'm getting an error when saving to pdf:
'QString' object has no attribute 'endswith'
Thanks a lot.
All the best.
-- 
http://faunalia.it/pc
From bishwarup.banerjee at gmail.com  Tue Mar 30 09:24:40 2010
From: bishwarup.banerjee at gmail.com (Bishwarup Banerjee)
Date: Tue Mar 30 09:24:43 2010
Subject: [Qgis-developer] Help needed in accessing classified raster category
Message-ID: <78e951a61003300624p26a25af2ta68c8d1d23c32e3f@mail.gmail.com>

Dear All,

Is there any way to access the Category values of the raster layer through
python in QGIS?

I have a classified raster and I want to access the classes through python.
For example : I have classified soil map of a partricular area, with
different types of soil, now I want to access the soil types of that raster
through python.

It will be very kind of you, if can help me out.

With Warm Regards,
Sonai
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100330/d87dfd20/attachment.html
From b.rowlingson at lancaster.ac.uk  Tue Mar 30 09:37:28 2010
From: b.rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Tue Mar 30 09:37:31 2010
Subject: [Qgis-developer] Help needed in accessing classified raster 
	category
In-Reply-To: <78e951a61003300624p26a25af2ta68c8d1d23c32e3f@mail.gmail.com>
References: <78e951a61003300624p26a25af2ta68c8d1d23c32e3f@mail.gmail.com>
Message-ID: <d8ad40b51003300637w44f7687fp5a9047d320494b3@mail.gmail.com>

On Tue, Mar 30, 2010 at 1:24 PM, Bishwarup Banerjee
<bishwarup.banerjee@gmail.com> wrote:
> Dear All,
>
> Is there any way to access the Category values of the raster layer through
> python in QGIS?
>
> I have a classified raster and I want to access the classes through python.
> For example : I have classified soil map of a partricular area, with
> different types of soil, now I want to access the soil types of that raster
> through python.
>
> It will be very kind of you, if can help me out.

 Easiest thing is to use the gdal API and get it into a numpy array.
Something like (taken from rastercalc):

import numpy
import osgeo.gdal as gdal

def layerAsArray( layer ):
  gdalData = gdal.Open( str( layer.source() ) )
  array = gdalData.ReadAsArray().astype( numpy.float32 )
  gdalData = None
  return array

numpy.float32 might not be the right type if you have a classification
raster, but hopefully you'll get the idea.

There's more useful-looking functions in rastercalc and other plugins.

Barry
From jctull at gmail.com  Tue Mar 30 11:59:59 2010
From: jctull at gmail.com (John C. Tull)
Date: Tue Mar 30 12:00:05 2010
Subject: [Qgis-developer] Symbol pattern scaling issues: raster versus
	vector pdf
Message-ID: <4F7BB99C-FDD8-4781-8FA1-5BA93271CF53@gmail.com>

Hi Marco,

I assume you saw the bug I filed the other day on this:
https://trac.osgeo.org/qgis/ticket/2598

I wanted to follow up with you because exporting to vectorized pdf seems to be a possible workaround for the strange polygon fill/shading bug that occasionally crops up for me (recall our communication and the screenshots from the hackfest). For projects that have the fill problem, exporting to pdf as a vectorized pdf file avoids the fill problem. Unfortunately, the issue with symbol fill pattern differences arises, as described in the bug report.

I'm hoping there is a simple solution to this problem. Otherwise, I am at a loss for creating printable, high-quality maps in qgis for many of my projects.

Regards,
John
From sim at gis-lab.info  Tue Mar 30 12:15:17 2010
From: sim at gis-lab.info (Maxim Dubinin)
Date: Tue Mar 30 12:17:59 2010
Subject: [Qgis-developer] annotation tools
In-Reply-To: <20100329201004.b3054e37.alexander.bruy@gmail.com>
References: <201003251155.06524.marco@hugis.net>
	<20100326191441.304b184f.alexander.bruy@gmail.com>
	<20100326201249.32a618c4.alexander.bruy@gmail.com>
	<201003262036.50225.marco@hugis.net>
	<20100329201004.b3054e37.alexander.bruy@gmail.com>
Message-ID: <273552186.20100330111517@gis-lab.info>

Marco,

it seems that after making some annotations in map canvas, they do not
show up in composer under Win, r13187. I think I saw someone said that they do
appear in Composer under different OS.

Maxim

?? ?????? 29 ????? 2010 ?., 12:10:04:

AB> Hi Marco

AB> sorry for late responce. Now it compiles and works fine on Linux and
AB> Windows. Thanks for this cool tool.

AB> I found a minor issue with plugin. When it deactivated in Plugin manager
AB> the button on toolbar don't deleted immediately. I need to restart QGIS
AB> to remove button.

AB> On Fri, 26 Mar 2010 20:36:50 +0100
AB> Marco Hugentobler <marco@hugis.net> wrote:

>> Hi Alex
>> 
>> Thanks for testing. This error should be fixed in the updated build ( 
>> www.hugis.net/100326_annotation_tools.tgz )
>> 
>> Does it build on windows like this?

From jctull at gmail.com  Tue Mar 30 12:57:11 2010
From: jctull at gmail.com (John C. Tull)
Date: Tue Mar 30 12:57:17 2010
Subject: [Qgis-developer] annotation tools
In-Reply-To: <201003291015.14528.marco@hugis.net>
References: <201003251155.06524.marco@hugis.net>
	<201003261039.41098.marco@hugis.net>
	<DB77C71F-81D7-40A7-9C00-A826BAB2942E@gmail.com>
	<201003291015.14528.marco@hugis.net>
Message-ID: <E57C1F04-B062-4B8C-8B14-17E74345F26B@gmail.com>

Hi Marco,

On Mar 29, 2010, at 1:15 AM, Marco Hugentobler wrote:

> Hi John
> 
> What do you mean with 'any font changes are not sticking on OS X' ? Is it that 
> you select a font and it does not appear in the item?

Sorry for not being clear. The changes that are made have no effect on the font being displayed.

> 
> Is there a place in QGIS where the native Mac font dialog already appears? 
> Because I'm not sure from the docs if QFontDialog::getFont really uses the 
> native dialog.

In the composer, labels that have been added correctly use the native font dialog under the "Item" tab, "Font" button. Likewise, the native color picker comes up when you hit the "Font Color" button.

> 
>> I noticed if
>> an annotation is selected in the canvas, the resize widgets are printed
>> from the composer
> 
> Right, this if fixed now.

Great. I have not tested this yet.

> 
>> Also, font sizes are incorrect when exporting to svg on
>> my system. PDF export looked good.
> 
> Hm, true. And it also happens in the form widgets. This is difficult, I remember 
> that I used pixel sized fonts in the mapcomposer to avoid this problem with 
> the labels. But with the form items, it is not possible because the Qt widget 
> handles the font scaling.

Hopefully a solution will come to mind. I wish I had an idea for you on this, but do not.

> Regards,
> Marco 


Thanks,
John
From silvio.pioli at tin.it  Tue Mar 30 13:00:36 2010
From: silvio.pioli at tin.it (silvio.pioli@tin.it)
Date: Tue Mar 30 13:05:55 2010
Subject: [Qgis-developer] Contour plugin crashes
Message-ID: <32745176.666091269968436831.JavaMail.defaultUser@defaultHost>

 Hello,
I just tried to download the Contour plugin from user contributed ones.
I unzipped it in the python plugins folder of QGis 1.4.0. Enceladus.
At the beginning the plugin was not loaded because "matplotlib", "shapely" e "numpy" modules were not installed.
I did it. I installed them. Now the plugin is loaded but the program crashes even before to completely start.
Any idea?
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100330/b8fae982/attachment.html
From ccrook at linz.govt.nz  Tue Mar 30 13:53:00 2010
From: ccrook at linz.govt.nz (Chris Crook)
Date: Tue Mar 30 13:53:08 2010
Subject: [Qgis-developer] Contour plugin crashes
In-Reply-To: <32745176.666091269968436831.JavaMail.defaultUser@defaultHost>
References: <32745176.666091269968436831.JavaMail.defaultUser@defaultHost>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E06529BF6BD@prdlsmmsg01.ad.linz.govt.nz>

Hi Silvio

Could you give a bit more information about what platform you are using and how it crashes.

Do you mean that qgis itself crashes, or that the plugin fails to load, or that it crashes when you try to use it?  Do you get any error messages?

Thanks
Chris
________________________________________
From: qgis-developer-bounces@lists.osgeo.org [qgis-developer-bounces@lists.osgeo.org] On Behalf Of silvio.pioli@tin.it [silvio.pioli@tin.it]
Sent: 31 March 2010 06:00
To: qgis-developer@lists.osgeo.org
Subject: [Qgis-developer] Contour plugin crashes

 Hello,
I just tried to download the Contour plugin from user contributed ones.
I unzipped it in the python plugins folder of QGis 1.4.0. Enceladus.
At the beginning the plugin was not loaded because "matplotlib", "shapely" e "numpy" modules were not installed.
I did it. I installed them. Now the plugin is loaded but the program crashes even before to completely start.
Any idea?
______________________________________________________________________________________________________

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank you.
______________________________________________________________________________________________________
From alexander.bruy at gmail.com  Tue Mar 30 14:41:32 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Tue Mar 30 14:43:22 2010
Subject: [Qgis-developer] Announcing Merge shapes
Message-ID: <20100330214132.3a1aab4b.alexander.bruy@gmail.com>

Hi all,

here is a new small python plugin Merge shapes. The plugin will be
usefull for those who need to merge multiple shapefiles with the same
attributes into one.

We will be glad to see this plugin as part of fTools and it is also
submited as patch to fTools (http://trac.osgeo.org/qgis/ticket/2605).
Unfortunately Carson is a little busy right now and as we need a plug-in,
we decided not to wait and release Merge shapes as separate plugin. We'll
be happy to retire it when its functionality is in fTools.

You can get plugin through our repo (GIS-Lab, http://gis-lab.info/programs/qgis/qgis-repo.xml). Don't forget to turn on experimental plugins in your plugin installer. Have fun.

-- 
Alexander Bruy
From sim at gis-lab.info  Tue Mar 30 15:00:00 2010
From: sim at gis-lab.info (Maxim Dubinin)
Date: Tue Mar 30 15:00:09 2010
Subject: [Qgis-developer] Re: [Qgis-user] Joining lines
In-Reply-To: <1975600058.20100218095511@gis-lab.info>
References: <1975600058.20100218095511@gis-lab.info>
Message-ID: <1201140875.20100330140000@gis-lab.info>

Hi all,

Just to answer myself. After I figured out the logic of splitGeometry
(with help of Marco and Martin), I've made a small plugin (JoinLines),
which does exactly that, physically combines 2 lines into one.

Currently it can handle both intersecting and snapped lines with any
direction of the nodes (i.e. to and from intersection point and mixed). It does
not however take care of the attributes currently, so use at your own risk.

Repo: GIS-Lab
Plugin: JoinLines
Experimental: On

Maxim

?? ?????? 18 ??????? 2010 ?., 10:55:11:

MD> Hi all,

MD> Do we have a way to join two lines into one in QGIS? I mean really
MD> combine them together into one, but not create a multi-feature object (Advanced
MD> editin\Merge selected does that I believe). The lines are created with snapping.

MD> Maxim

MD> _______________________________________________
MD> Qgis-user mailing list
MD> Qgis-user@lists.osgeo.org
MD> http://lists.osgeo.org/mailman/listinfo/qgis-user

From marco at hugis.net  Tue Mar 30 15:01:03 2010
From: marco at hugis.net (Marco Hugentobler)
Date: Tue Mar 30 15:01:23 2010
Subject: [Qgis-developer] Re: Symbol pattern scaling issues: raster versus
	vector pdf
In-Reply-To: <4F7BB99C-FDD8-4781-8FA1-5BA93271CF53@gmail.com>
References: <4F7BB99C-FDD8-4781-8FA1-5BA93271CF53@gmail.com>
Message-ID: <201003302101.03159.marco@hugis.net>

Hi John

The vector scaling issue in (vector) pdf is a bug in Qts pdf paint engine:

http://bugreports.qt.nokia.com/browse/QTBUG-5114

But now there is a patch for it in the qt bugtracker. So hopefully it is fixed 
in the newer versions (or you could apply the small modification in the ticket 
if you have a 4.5).

Regards,
Marco

Am Dienstag, 30. M?rz 2010 17.59:59 schrieb John C. Tull:
> Hi Marco,
> 
> I assume you saw the bug I filed the other day on this:
> https://trac.osgeo.org/qgis/ticket/2598
> 
> I wanted to follow up with you because exporting to vectorized pdf seems to
>  be a possible workaround for the strange polygon fill/shading bug that
>  occasionally crops up for me (recall our communication and the screenshots
>  from the hackfest). For projects that have the fill problem, exporting to
>  pdf as a vectorized pdf file avoids the fill problem. Unfortunately, the
>  issue with symbol fill pattern differences arises, as described in the bug
>  report.
> 
> I'm hoping there is a simple solution to this problem. Otherwise, I am at a
>  loss for creating printable, high-quality maps in qgis for many of my
>  projects.
> 
> Regards,
> John
> 


-- 
Dr. Marco Hugentobler
HUGIS GmbH
Webereistr. 66
CH-8134 Adliswil
marco@hugis.net
www.hugis.net
Technical Advisor QGIS Project Steering Committee
From jctull at gmail.com  Tue Mar 30 18:17:26 2010
From: jctull at gmail.com (John C. Tull)
Date: Tue Mar 30 18:17:33 2010
Subject: [Qgis-developer] Re: Symbol pattern scaling issues: raster versus
	vector pdf
In-Reply-To: <201003302101.03159.marco@hugis.net>
References: <4F7BB99C-FDD8-4781-8FA1-5BA93271CF53@gmail.com>
	<201003302101.03159.marco@hugis.net>
Message-ID: <264DD787-460E-492B-A8D4-D9FF1D542570@gmail.com>

Hi Marco,

Thanks for clarification and the pointer. I will look at the link and see if I can make it work. 

John


On Mar 30, 2010, at 12:01 PM, Marco Hugentobler wrote:

> Hi John
> 
> The vector scaling issue in (vector) pdf is a bug in Qts pdf paint engine:
> 
> http://bugreports.qt.nokia.com/browse/QTBUG-5114
> 
> But now there is a patch for it in the qt bugtracker. So hopefully it is fixed 
> in the newer versions (or you could apply the small modification in the ticket 
> if you have a 4.5).
> 
> Regards,
> Marco
> 
> Am Dienstag, 30. M?rz 2010 17.59:59 schrieb John C. Tull:
>> Hi Marco,
>> 
>> I assume you saw the bug I filed the other day on this:
>> https://trac.osgeo.org/qgis/ticket/2598
>> 
>> I wanted to follow up with you because exporting to vectorized pdf seems to
>> be a possible workaround for the strange polygon fill/shading bug that
>> occasionally crops up for me (recall our communication and the screenshots
>> from the hackfest). For projects that have the fill problem, exporting to
>> pdf as a vectorized pdf file avoids the fill problem. Unfortunately, the
>> issue with symbol fill pattern differences arises, as described in the bug
>> report.
>> 
>> I'm hoping there is a simple solution to this problem. Otherwise, I am at a
>> loss for creating printable, high-quality maps in qgis for many of my
>> projects.
>> 
>> Regards,
>> John
>> 
> 
> 
> -- 
> Dr. Marco Hugentobler
> HUGIS GmbH
> Webereistr. 66
> CH-8134 Adliswil
> marco@hugis.net
> www.hugis.net
> Technical Advisor QGIS Project Steering Committee

From JPalmer at linz.govt.nz  Tue Mar 30 20:19:36 2010
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Tue Mar 30 20:19:41 2010
Subject: [Qgis-developer] Re: PostGIS provider estimated extent
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0652910202@prdlsmmsg01.ad.linz.govt.nz>

Hi J?rgen,

> Yes.  That was the problem.  Trying to use estimates without actually having
> any caused the query to fail.  That also invalidates all open cursors.  The
> idea was that either all or no tables have estimates.   In the latter case the
> very first query would fail and subsequent queries wouldn't try to use
> estimates.

Sorry for the late reply!

The use of the estimated_extent function is very important for me as I'm dealing with large PostGIS datasets. The way the postgis provider is implemented at the moment prevents the use of estimated_extent once it has failed once. This means that after I have looked at a table that hasn't been analysed or is a view, then every other table on the same connection that I use after that is hopelessly slow, because it no longer uses the estimated extents function. The only way I can reset this is to restart Qgis.

I can understand that we need to rollback the transaction when the estimated extents function has failed, but I can't see a reason not to try to use it for other tables on the same connection.

Could I suggest we keep the rollback on the cursor if we get an error, but to still allow subsequent calls of the estimated_extent functions on the connection even after a failure?

I have attached a patch that implements my suggestion, and if you agree I will create a ticket :)

Kind regards,
Jeremy

______________________________________________________________________________________________________

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank you.
______________________________________________________________________________________________________
-------------- next part --------------
A non-text attachment was scrubbed...
Name: postgresprovider.diff
Type: application/octet-stream
Size: 2196 bytes
Desc: postgresprovider.diff
Url : http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100331/7fcf7596/postgresprovider-0001.obj
From marco at hugis.net  Wed Mar 31 02:46:40 2010
From: marco at hugis.net (Marco Hugentobler)
Date: Wed Mar 31 02:47:03 2010
Subject: [Qgis-developer] annotation tools
In-Reply-To: <273552186.20100330111517@gis-lab.info>
References: <201003251155.06524.marco@hugis.net>
	<20100329201004.b3054e37.alexander.bruy@gmail.com>
	<273552186.20100330111517@gis-lab.info>
Message-ID: <201003310846.40495.marco@hugis.net>

Hi Maxim

The annotation tools are now in the main codebase (in gui and app, so not a 
plugin anymore).

But when the annotation tools where plugin, it needed a change in composermap 
to make the items appear. So I hope that it works now.

I'm going to test it on the windows partition today.

Regards,
Marco

Am Dienstag, 30. M?rz 2010 18.15:17 schrieb Maxim Dubinin:
> Marco,
> 
> it seems that after making some annotations in map canvas, they do not
> show up in composer under Win, r13187. I think I saw someone said that they
>  do appear in Composer under different OS.
> 
> Maxim
> 
> ?? ?????? 29 ????? 2010 ?., 12:10:04:
> 
> AB> Hi Marco
> 
> AB> sorry for late responce. Now it compiles and works fine on Linux and
> AB> Windows. Thanks for this cool tool.
> 
> AB> I found a minor issue with plugin. When it deactivated in Plugin
>  manager AB> the button on toolbar don't deleted immediately. I need to
>  restart QGIS AB> to remove button.
> 
> AB> On Fri, 26 Mar 2010 20:36:50 +0100
> 
> AB> Marco Hugentobler <marco@hugis.net> wrote:
> >> Hi Alex
> >>
> >> Thanks for testing. This error should be fixed in the updated build (
> >> www.hugis.net/100326_annotation_tools.tgz )
> >>
> >> Does it build on windows like this?
> 

-- 
Dr. Marco Hugentobler
HUGIS GmbH
Webereistrasse 66
CH-8134 Adliswil
marco@hugis.net
http://homepage.hispeed.ch/hugis
Technical Advisor QGIS Project Steering Committee
From a.furieri at lqt.it  Wed Mar 31 05:15:27 2010
From: a.furieri at lqt.it (Alessandro Furieri)
Date: Wed Mar 31 05:44:01 2010
Subject: [Qgis-developer] new Python connector for SpatiaLite
Message-ID: <4BB312AF.1070806@lqt.it>

The following announcement is surely interesting for
any QGIS developer using SpatiaLite and Python

bye
Sandro

--------------
http://groups.google.com/group/spatialite-users/browse_thread/thread/d6ee3dc5dac28504#

FYI, I want ahead and branched pysqlite, creating pyspatialite, which
is a python module for using spatialite.  It builds it's own copy of
the sqlite+spatialite library, bypassing the issue of having
load_extensions enabled, and not using the system sqlite.

It is registered with pypi, so you can either grab the source and
build, or use easy_install.

It currently requires libgeos and libproj to exist on the machine.

more details at: http://code.google.com/p/pyspatialite

P.S.: I've also done the same for perl's DBD::SQLite, but I've not
released it.  if anyone is interested, hit me up.
From giovanni.manghi at gmail.com  Wed Mar 31 06:08:44 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Wed Mar 31 12:02:19 2010
Subject: [Qgis-developer] ftools & merge shapes
Message-ID: <1270030124.6545.3.camel@sibirica>

Hi,

the merge shapes tool has been added in trunk yesterday but a user is
telling me that after updating qgis (osgeo4w) on windows vista is
getting this:


----------------
Couldn't load plugin fTools due an error when calling its classFactory()
method

Traceback (most recent call last):
  File "C:/osgeo4w/apps/qgis-dev/./python\qgis\utils.py", line 143, in
startPlugin
    plugins[packageName] = package.classFactory(iface)
  File "C:/osgeo4w/apps/qgis-dev/./python/plugins\fTools\__init__.py",
line 33, in classFactory
    from fTools import fToolsPlugin
  File "C:/osgeo4w/apps/qgis-dev/./python\qgis\utils.py", line 284, in
_import
    mod = _builtin_import(name, globals, locals, fromlist, level)
  File "C:/osgeo4w/apps/qgis-dev/./python/plugins\fTools\fTools.py",
line 48, in 
    import doReProject, doSpatialJoin, doSubsetSelect, doSumLines,
doVectorGrid, doMergeShapes
  File "C:/osgeo4w/apps/qgis-dev/./python\qgis\utils.py", line 284, in
_import
    mod = _builtin_import(name, globals, locals, fromlist, level)
ImportError: No module named doMergeShapes
----------------


cheers

-- Giovanni --


From silvio.pioli at tin.it  Wed Mar 31 10:19:49 2010
From: silvio.pioli at tin.it (silvio.pioli@tin.it)
Date: Wed Mar 31 12:03:03 2010
Subject: R: RE: [Qgis-developer] Contour plugin crashes
Message-ID: <15121963.747731270045189446.JavaMail.defaultUser@defaultHost>

Ok, I'm sorry you are right.
My OS is Windows Vista Home edition. As I 've already said, the version of Qgis is 1.4.0.
And, when I said the program crashes, I meant Qgis. Qgis doesn't start, the only thing I know is I got the Windows Error Dialog with:

 "Nome evento problema:    BEX  (Name event)
  Nome applicazione:    qgis.exe  (Name application)
  Versione applicazione:    0.0.0.0 (Version)
  Timestamp applicazione:    4b4a2d91
  Nome modulo con errori:    StackHash_6e31   (Module name with errors)"

Probably the crash happens when the plugin loader try to load this particular plugin.




----Messaggio originale----
Da: ccrook@linz.govt.nz
Data: 30-mar-2010 7.53 PM
A: "silvio.pioli@tin.it"<silvio.pioli@tin.it>, "qgis-developer@lists.osgeo.org"<qgis-developer@lists.osgeo.org>
Cc: "lionel.roubeyrie@gmail.com"<lionel.roubeyrie@gmail.com>
Ogg: RE: [Qgis-developer] Contour plugin crashes

Hi Silvio

Could you give a bit more information about what platform you are using and how it crashes.

Do you mean that qgis itself crashes, or that the plugin fails to load, or that it crashes when you try to use it?  Do you get any error messages?

Thanks
Chris
________________________________________
From: qgis-developer-bounces@lists.osgeo.org [qgis-developer-bounces@lists.osgeo.org] On Behalf Of silvio.pioli@tin.it [silvio.pioli@tin.it]
Sent: 31 March 2010 06:00
To: qgis-developer@lists.osgeo.org
Subject: [Qgis-developer] Contour plugin crashes

 Hello,
I just tried to download the Contour plugin from user contributed ones.
I unzipped it in the python plugins folder of QGis 1.4.0. Enceladus.
At the beginning the plugin was not loaded because "matplotlib", "shapely" e "numpy" modules were not installed.
I did it. I installed them. Now the plugin is loaded but the program crashes even before to completely start.
Any idea?
______________________________________________________________________________________________________

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank you.
______________________________________________________________________________________________________



 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100331/cd45d235/attachment.html
From ubuntu at kagou.fr  Wed Mar 31 12:21:01 2010
From: ubuntu at kagou.fr (Patrice Vetsel)
Date: Wed Mar 31 12:21:07 2010
Subject: [Qgis-developer] Relative saved paths
Message-ID: <4BB3766D.6020303@kagou.fr>

I thought the problem of relative paths were not already addressed? I 
use QGIS 1.4 on Mac / Windows / Ubuntu and I have all the time the 
problem of having to specify where the data are exactly.

Regards

Patrice Vetsel
From giovanni.manghi at gmail.com  Wed Mar 31 12:35:53 2010
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Wed Mar 31 12:36:04 2010
Subject: [Qgis-developer] Relative saved paths
In-Reply-To: <4BB3766D.6020303@kagou.fr>
References: <4BB3766D.6020303@kagou.fr>
Message-ID: <1270053353.15216.2.camel@sibirica>

Hi,


On Wed, 2010-03-31 at 18:21 +0200, Patrice Vetsel wrote:
> I thought the problem of relative paths were not already addressed? I 
> use QGIS 1.4 on Mac / Windows / Ubuntu and I have all the time the 
> problem of having to specify where the data are exactly.


project properties -> general (tab) -> save paths ?


cheers

-- Giovanni --

From carson.farmer at gmail.com  Wed Mar 31 12:58:21 2010
From: carson.farmer at gmail.com (Carson Farmer)
Date: Wed Mar 31 12:58:23 2010
Subject: [Qgis-developer] ftools & merge shapes
In-Reply-To: <s2t94b3c8441003310957k321ae199u4619c70fd4a4b6b0@mail.gmail.com>
References: <1270030124.6545.3.camel@sibirica>
	<s2t94b3c8441003310957k321ae199u4619c70fd4a4b6b0@mail.gmail.com>
Message-ID: <k2g94b3c8441003310958p46592bdfp8c148511f08e1caf@mail.gmail.com>

Hmm. On Linux, when I first applied this patch to my working copy, I
had some trouble getting it to build/install properly. I'm not sure
why, and I eventually got things working (can't remember how)...
Perhaps a similar issue is cropping up here? In any case, the file is
indeed in the src python directory in trunk, so it should be working?

Carson

On Wed, Mar 31, 2010 at 11:08 AM, Giovanni Manghi
<giovanni.manghi@gmail.com> wrote:
> Hi,
>
> the merge shapes tool has been added in trunk yesterday but a user is
> telling me that after updating qgis (osgeo4w) on windows vista is
> getting this:
>
>
> ----------------
> Couldn't load plugin fTools due an error when calling its classFactory()
> method
>
> Traceback (most recent call last):
> ?File "C:/osgeo4w/apps/qgis-dev/./python\qgis\utils.py", line 143, in
> startPlugin
> ? ?plugins[packageName] = package.classFactory(iface)
> ?File "C:/osgeo4w/apps/qgis-dev/./python/plugins\fTools\__init__.py",
> line 33, in classFactory
> ? ?from fTools import fToolsPlugin
> ?File "C:/osgeo4w/apps/qgis-dev/./python\qgis\utils.py", line 284, in
> _import
> ? ?mod = _builtin_import(name, globals, locals, fromlist, level)
> ?File "C:/osgeo4w/apps/qgis-dev/./python/plugins\fTools\fTools.py",
> line 48, in
> ? ?import doReProject, doSpatialJoin, doSubsetSelect, doSumLines,
> doVectorGrid, doMergeShapes
> ?File "C:/osgeo4w/apps/qgis-dev/./python\qgis\utils.py", line 284, in
> _import
> ? ?mod = _builtin_import(name, globals, locals, fromlist, level)
> ImportError: No module named doMergeShapes
> ----------------
>
>
> cheers
>
> -- Giovanni --
>
>
> _______________________________________________
> Qgis-developer mailing list
> Qgis-developer@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/qgis-developer
>



--
Carson J. Q. Farmer
ISSP Doctoral Fellow
National Centre for Geocomputation
National University of Ireland, Maynooth,
http://www.carsonfarmer.com/



-- 
Carson J. Q. Farmer
ISSP Doctoral Fellow
National Centre for Geocomputation
National University of Ireland, Maynooth,
http://www.carsonfarmer.com/
From wonder.sk at gmail.com  Wed Mar 31 13:21:14 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Mar 31 13:21:17 2010
Subject: [Qgis-developer] ftools & merge shapes
In-Reply-To: <k2g94b3c8441003310958p46592bdfp8c148511f08e1caf@mail.gmail.com>
References: <1270030124.6545.3.camel@sibirica>
	<s2t94b3c8441003310957k321ae199u4619c70fd4a4b6b0@mail.gmail.com>
	<k2g94b3c8441003310958p46592bdfp8c148511f08e1caf@mail.gmail.com>
Message-ID: <i2re8e7199c1003311021v73e6d02gb2a6c2efe2d9cc26@mail.gmail.com>

On Wed, Mar 31, 2010 at 6:58 PM, Carson Farmer <carson.farmer@gmail.com> wrote:
> Hmm. On Linux, when I first applied this patch to my working copy, I
> had some trouble getting it to build/install properly. I'm not sure
> why, and I eventually got things working (can't remember how)...
> Perhaps a similar issue is cropping up here? In any case, the file is
> indeed in the src python directory in trunk, so it should be working?

I've just run across the same problem. One has to touch
python/plugins/CMakeLists.txt so that the list of python files for
installation gets updated. I've committed a dummy change r13214 that
will trigger the refresh, so that shouldn't make troubles anymore.

Martin
From ccrook at linz.govt.nz  Wed Mar 31 13:52:47 2010
From: ccrook at linz.govt.nz (Chris Crook)
Date: Wed Mar 31 13:56:43 2010
Subject: [Qgis-developer] Contour plugin crashes
In-Reply-To: <15121963.747731270045189446.JavaMail.defaultUser@defaultHost>
References: <15121963.747731270045189446.JavaMail.defaultUser@defaultHost>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E06529BF6C0@prdlsmmsg01.ad.linz.govt.nz>

Thanks silvio

I've run this on windows XP without any problem .. I don't have Vista so can't check on that.

I guess the most likely reason is that there is some incompatibility between the DLL's of the python modules that are imported and Qgis.  

Are you using OsGeo4W? And did you use that to install the missing python modules.  I have found that that distribution works for me...

Cheers
Chris
________________________________________
From: silvio.pioli@tin.it [silvio.pioli@tin.it]
Sent: 01 April 2010 03:19
To: Chris Crook; qgis-developer@lists.osgeo.org
Cc: lionel.roubeyrie@gmail.com
Subject: R: RE: [Qgis-developer] Contour plugin crashes

Ok, I'm sorry you are right.
My OS is Windows Vista Home edition. As I 've already said, the version of Qgis is 1.4.0.
And, when I said the program crashes, I meant Qgis. Qgis doesn't start, the only thing I know is I got the Windows Error Dialog with:

 "Nome evento problema:    BEX  (Name event)
  Nome applicazione:    qgis.exe  (Name application)
  Versione applicazione:    0.0.0.0 (Version)
  Timestamp applicazione:    4b4a2d91
  Nome modulo con errori:    StackHash_6e31   (Module name with errors)"

Probably the crash happens when the plugin loader try to load this particular plugin.


----Messaggio originale----
Da: ccrook@linz.govt.nz
Data: 30-mar-2010 7.53 PM
A: "silvio.pioli@tin.it"<silvio.pioli@tin.it>, "qgis-developer@lists.osgeo.org"<qgis-developer@lists.osgeo.org>
Cc: "lionel.roubeyrie@gmail.com"<lionel.roubeyrie@gmail.com>
Ogg: RE: [Qgis-developer] Contour plugin crashes

Hi Silvio

Could you give a bit more information about what platform you are using and how it crashes.

Do you mean that qgis itself crashes, or that the plugin fails to load, or that it crashes when you try to use it?  Do you get any error messages?

Thanks
Chris
________________________________________
From: qgis-developer-bounces@lists.osgeo.org [qgis-developer-bounces@lists.osgeo.org] On Behalf Of silvio.pioli@tin.it [silvio.pioli@tin.it]
Sent: 31 March 2010 06:00
To: qgis-developer@lists.osgeo.org
Subject: [Qgis-developer] Contour plugin crashes

Hello,
I just tried to download the Contour plugin from user contributed ones.
I unzipped it in the python plugins folder of QGis 1.4.0. Enceladus.
At the beginning the plugin was not loaded because "matplotlib", "shapely" e "numpy" modules were not installed.
I did it. I installed them. Now the plugin is loaded but the program crashes even before to completely start.
Any idea?
______________________________________________________________________________________________________

This message contains information, which is confidential and may be subject to legal privilege.
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank you.
______________________________________________________________________________________________________


______________________________________________________________________________________________________

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank you.
______________________________________________________________________________________________________
From reyesmarcelo at gmail.com  Wed Mar 31 16:13:12 2010
From: reyesmarcelo at gmail.com (Marcelo Reyes)
Date: Wed Mar 31 16:13:16 2010
Subject: [Qgis-developer] Connect to Spatialite db from Pyqgis causes
	OperationalError: no such functions geometry constraints
Message-ID: <h2h9b3bd4a01003311313oea41230ew119e63b380d46239@mail.gmail.com>

Hello,

I'm currently developping a small stand alone app with qgis python bindings
and spatialite. So far I managed to load a vector layer from de spatialite
database, but when I try to UPDATE or INSERT anything I get the folowing
error:

OperationalError: no such functions geometry constraints

I'm guessing this is because the libspatialite extension is not loaded, but
when I try to load it using query.exec_("SELECT
load_extension('libspatialite-1.dll')") nothing happens. I'm using QGIS
1.4.0-1 "enceladus" and python 2.5, using the PyQt4 modules included in
qgis.
How can I load the extension? How can I upgrade sqlite3 so it allows to load
the extension? sqlite3.version_info returns (2,3,2) but I'm making the
conection using QtSql.

any help is greatly appreciated.

Marcelo




-- 
Marcelo Reyes
Edif. Alborada Of. 605
Tel. 2201034
Cel. 72501267
La Paz Bolivia.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100331/953f68b5/attachment.html
From wonder.sk at gmail.com  Wed Mar 31 16:44:46 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Mar 31 16:44:49 2010
Subject: [Qgis-developer] Connect to Spatialite db from Pyqgis causes 
	OperationalError: no such functions geometry constraints
In-Reply-To: <h2h9b3bd4a01003311313oea41230ew119e63b380d46239@mail.gmail.com>
References: <h2h9b3bd4a01003311313oea41230ew119e63b380d46239@mail.gmail.com>
Message-ID: <r2oe8e7199c1003311344nc31c79b8p4ed1f5940496c92@mail.gmail.com>

On Wed, Mar 31, 2010 at 10:13 PM, Marcelo Reyes <reyesmarcelo@gmail.com> wrote:
> Hello,
>
> I'm currently?developping a small stand alone app with qgis python bindings
> and spatialite. So far I managed to load a vector layer from de spatialite
> database, but when I try to UPDATE or INSERT anything I get the folowing
> error:
>
> OperationalError: no such functions geometry constraints
>
> I'm guessing this is because the libspatialite extension is not loaded, but
> when I try to load it using query.exec_("SELECT
> load_extension('libspatialite-1.dll')") nothing happens. I'm using QGIS
> 1.4.0-1 "enceladus" and python 2.5, using the PyQt4 modules included in
> qgis.

Do you have any reason for not using directly QGIS classes to do
updates and inserts in the spatialite?
Get QgsVectorDataProvider instance from the vector layer:
provider = layer.dataProvider()
- INSERT: provider.addFeatures(...)
- UPDATE: provider.changeAttributeValues(...) or
provider.changeGeometryValues (...)
- DELETE: provider.deleteFeatures(...)


Martin
From jctull at gmail.com  Wed Mar 31 17:03:05 2010
From: jctull at gmail.com (John C. Tull)
Date: Wed Mar 31 17:03:13 2010
Subject: [Qgis-developer] Re: Symbol pattern scaling issues: raster versus
	vector pdf
In-Reply-To: <201003302101.03159.marco@hugis.net>
References: <4F7BB99C-FDD8-4781-8FA1-5BA93271CF53@gmail.com>
	<201003302101.03159.marco@hugis.net>
Message-ID: <8DF91895-F090-4F45-9A45-58628F1C8C8E@gmail.com>

Hi Marco,

I tested with qt-4.7 preview code. The patch had not been applied, so I patched it, compiled, etc. Unfortunately, the symbol scaling problem was not resolved. Additionally, svg symbols in the legend were being misplaced when I printed a vector pdf file.

Using the untouched 4.7 preview code, the offset problem with the legend icons was fixed. The oversized dot pattern fill was still present.

So this does not appear to be the solution to the problem with polygon pattern fill issues.

Regards,
John

On Mar 30, 2010, at 12:01 PM, Marco Hugentobler wrote:

> Hi John
> 
> The vector scaling issue in (vector) pdf is a bug in Qts pdf paint engine:
> 
> http://bugreports.qt.nokia.com/browse/QTBUG-5114
> 
> But now there is a patch for it in the qt bugtracker. So hopefully it is fixed 
> in the newer versions (or you could apply the small modification in the ticket 
> if you have a 4.5).
> 
> Regards,
> Marco
> 
> Am Dienstag, 30. M?rz 2010 17.59:59 schrieb John C. Tull:
>> Hi Marco,
>> 
>> I assume you saw the bug I filed the other day on this:
>> https://trac.osgeo.org/qgis/ticket/2598
>> 
>> I wanted to follow up with you because exporting to vectorized pdf seems to
>> be a possible workaround for the strange polygon fill/shading bug that
>> occasionally crops up for me (recall our communication and the screenshots
>> from the hackfest). For projects that have the fill problem, exporting to
>> pdf as a vectorized pdf file avoids the fill problem. Unfortunately, the
>> issue with symbol fill pattern differences arises, as described in the bug
>> report.
>> 
>> I'm hoping there is a simple solution to this problem. Otherwise, I am at a
>> loss for creating printable, high-quality maps in qgis for many of my
>> projects.
>> 
>> Regards,
>> John
>> 
> 
> 
> -- 
> Dr. Marco Hugentobler
> HUGIS GmbH
> Webereistr. 66
> CH-8134 Adliswil
> marco@hugis.net
> www.hugis.net
> Technical Advisor QGIS Project Steering Committee

From a.furieri at lqt.it  Wed Mar 31 18:05:31 2010
From: a.furieri at lqt.it (a.furieri@lqt.it)
Date: Wed Mar 31 18:05:37 2010
Subject: [Qgis-developer] Connect to Spatialite db from Pyqgis causes
	OperationalError: no such functions geometry constraints
In-Reply-To: <h2h9b3bd4a01003311313oea41230ew119e63b380d46239@mail.gmail.com>
References: <h2h9b3bd4a01003311313oea41230ew119e63b380d46239@mail.gmail.com>
Message-ID: <20100331214029.M7434@lqt.it>

On Wed, 31 Mar 2010 15:43:12 -0430, Marcelo Reyes wrote
> ...? when I try to UPDATE or INSERT anything I get the folowing error:
> ?
> OperationalError: no such functions geometry constraints
>?

Hi Marcelo,

the 'GeometryConstraints function not found' issue you are
experiencing can be very easily explained:

a) you've opened your DB using a recent SpatiaLite's version
??? [presumably v.2.4.0-RC, if you're using QGIS 1.4]: in this
??? case SpatiaLite silently converts any DB trigger to the
??? most recent (and efficient) style.
b) then you are trying to load some obsolete DLL version in
??? Python. but you cannot expect obsolete sw to be able 
??? to support the most recent triggers.
c) the most recent DLL is named 'libspatialite-2.dll', so you
??? are obviously using some obsolete DLL

please, update your DLLs to v.2.4.0-RC:
http://www.gaia-gis.it/spatialite-2.4.0/binaries.html

?
> I'm guessing this is because the libspatialite extension is not loaded, 
> but when I try to load it using query.exec_("SELECT load_extension('libspatialite-1.dll')") nothing happens.
>

this point is not at all clear to me: what do you intend when 
you state "nothing happens" ?
there are lots of reasons accounting for a failure [bad DLL's path, 
SQLite isn't enabled to load dynamic extensions, unresolved symbols ...] 
but for sure you'll get some error in this case.

Anyway, there is a "bomb proof" test you can perform to check
if the DLL was actually loaded or not:

SELECT spatialite_version();

if you get back a text string like "2.4.0" it's ok, you can safely
assume the DLL has been succesfully loaded.
otherwise you'll get some error like "no such function spatialite_version"

bye
Sandro
?

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/qgis-developer/attachments/20100401/423321ff/attachment.html
