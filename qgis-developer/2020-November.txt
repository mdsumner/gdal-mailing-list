From saber.razmjooei at lutraconsulting.co.uk  Sun Nov  1 00:34:16 2020
From: saber.razmjooei at lutraconsulting.co.uk (Saber Razmjooei)
Date: Sun, 1 Nov 2020 07:34:16 +0000
Subject: [QGIS-Developer] Unable to build QGIS master due to multiple
 definitions of sipQgs3DAlgorithms
In-Reply-To: <CAECJsSpS9d6NwGXg=i91izsXioeEoibKtmKCMyTSDdPDv--hKA@mail.gmail.com>
References: <CAECJsSphyqUj-G0UTycHWYuaLagXHdrs08m=6wZiD93UmGUN=A@mail.gmail.com>
 <CA+T_MsJ7WMq-UN-r8fUH6WZ=FWDD=zjWiOf=W8VbovyQOOm0Jw@mail.gmail.com>
 <CAECJsSpS9d6NwGXg=i91izsXioeEoibKtmKCMyTSDdPDv--hKA@mail.gmail.com>
Message-ID: <CAH=WbRAApZj-h0UWp5WqZO+7rxUDMhOupWML8nhBdkwHQywj8w@mail.gmail.com>

Hi Harrissou,

Here is my working one on Ubuntu 20.04:
-DCMAKE_PREFIX_PATH=~/src/QGIS_master/external/qt3dextra-headers/cmake/Qt53DExtras
-DQT5_3DEXTRA_INCLUDE_DIR=~/src/QGIS_master/external/qt3dextra-headers -D
QT5_3DEXTRA_LIBRARY=/usr/lib/x86_64-linux-gnu/libQt53DExtras.so
-DWITH_3D=True
-DQt53DExtras_DIR=~/src/QGIS_master/external/qt3dextra-headers/cmake/Qt53DExtras

I hope that works for you!

Kind regards
Saber


On Sat, 31 Oct 2020 at 08:34, DelazJ <delazj at gmail.com> wrote:

> Hi all,
> Thanks Peter. I got some time to give it another try. So I trashed my
> build dir and restarted.
> Now I'm stuck at
>
> *In file included from ../src/3d/qgsskyboxsettings.h:*
> *23,                 from ../src/3d/qgs3dmapsettings.h:*
> *33,                 from src/3d/qgis_3d_autogen/**EWIEGA46WW/moc_*
> *qgs3dmapsettings.cpp:9,                 from src/3d/qgis_3d_autogen/mocs_*
> *compilation.cpp:9:../src/3d/qgsskyboxentity.h:*
>
>
>
> *22:10: fatal error: Qt3DExtras/QCuboidMesh: Aucun fichier ou dossier de
> ce type   22 | #include <Qt3DExtras/QCuboidMesh>        |
> ^~~~~~~~~~~~~~~~~~~~~~~~compilation terminated.[52/2925] Building CXX
> object src/3d/CMakeFiles/qgis_3d.dir/**qgsabstractvectorlayer3drender*
> *er.cpp.oninja: build stopped: subcommand failed.*
>
> I don't know if it has anything to do but I had to fight against the "
> Qt53DExtras" error to enable 3D
>
>
>
>
>
>
>
>
>
>
>
>
>
> * CMake Error at /usr/lib/x86_64-linux-gnu/cmake/Qt5/Qt5Config.cmake:28
> (find_package):   Could not find a package configuration file provided by
> "Qt53DExtras" with   any of the following names:
>  Qt53DExtrasConfig.cmake     qt53dextras-config.cmake   Add the
> installation prefix of "Qt53DExtras" to CMAKE_PREFIX_PATH or set
>  "Qt53DExtras_DIR" to a directory containing one of the above files.  If
>  "Qt53DExtras" provides a separate development package or SDK, be sure it
>  has been installed. Call Stack (most recent call first):
>  CMakeLists.txt:404 (FIND_PACKAGE)*
>
> Recipes I found in the list and the install file didn't seem to fix the
> cmake so I set  set the QT53DExtras_DIR to
> /pathtoQGISrepo/external/qt3dextra-headers/cmake*/Qt53DExtras* (in which
> I found the missing file)
>
> Thanks for any suggestion.
>
> Harrissou
>
> Le jeu. 29 oct. 2020 à 14:01, Peter Petrik <
> peter.petrik at lutraconsulting.co.uk> a écrit :
>
>> Hi,
>>
>> can you please remove completely the build folder and start again?
>>
>> Thanks.
>> P/
>>
>> On Thu, Oct 29, 2020 at 1:57 PM DelazJ <delazj at gmail.com> wrote:
>>
>>> Hi devs,
>>>
>>> Since yesterday, I'm unable to build QGIS on Ubuntu 20.04 using ninja.
>>> It used to work a couple of days ago.
>>> I'm getting a bunch of errors of the type:
>>>
>>> /usr/bin/ld :
>>> python/CMakeFiles/python_module_qgis__3d.dir/3d/sip_3dpart10.cpp.o : dans
>>> la fonction « sipQgs3DAlgorithms::sipProtect_isSignalConnected(QMetaMethod
>>> const&) const » :
>>> /media/delazj/dev/github/QGIS/build_ninja/python/3d/sip_3dpart10.cpp:4735 :
>>> définitions multiples de
>>> « sipQgs3DAlgorithms::sipProtect_isSignalConnected(QMetaMethod const&)
>>> const »;
>>> python/CMakeFiles/python_module_qgis__3d.dir/3d/sip_3dpart8.cpp.o:/media/delazj/dev/github/QGIS/build_ninja/python/3d/sip_3dpart8.cpp:892 :
>>> défini pour la première fois ici
>>> /usr/bin/ld :
>>> python/CMakeFiles/python_module_qgis__3d.dir/3d/sip_3dpart10.cpp.o : dans
>>> la fonction
>>> « sipQgs3DAlgorithms::sipProtect_addAlgorithm(QgsProcessingAlgorithm*) » :
>>> /media/delazj/dev/github/QGIS/build_ninja/python/3d/sip_3dpart10.cpp:4740 :
>>> définitions multiples de
>>> « sipQgs3DAlgorithms::sipProtect_addAlgorithm(QgsProcessingAlgorithm*) »;
>>> python/CMakeFiles/python_module_qgis__3d.dir/3d/sip_3dpart8.cpp.o:/media/delazj/dev/github/QGIS/build_ninja/python/3d/sip_3dpart8.cpp:897 :
>>> défini pour la première fois ici
>>> /usr/bin/ld :
>>> python/CMakeFiles/python_module_qgis__3d.dir/3d/sip_3dpart10.cpp.o : dans
>>> la fonction « sipQgs3DAlgorithms::sipProtectVirt_loadAlgorithms(bool) » :
>>> /media/delazj/dev/github/QGIS/build_ninja/python/3d/sip_3dpart10.cpp:4745 :
>>> définitions multiples de
>>> « sipQgs3DAlgorithms::sipProtectVirt_loadAlgorithms(bool) »;
>>> python/CMakeFiles/python_module_qgis__3d.dir/3d/sip_3dpart8.cpp.o:/media/delazj/dev/github/QGIS/build_ninja/python/3d/sip_3dpart8.cpp:902 :
>>> défini pour la première fois ici
>>> /usr/bin/ld :
>>> python/CMakeFiles/python_module_qgis__3d.dir/3d/sip_3dpart10.cpp.o:(.data.rel.local+0x2c0) :
>>> définitions multiples de « sipTypeDef__3d_Qgs3DAlgorithms »;
>>> python/CMakeFiles/python_module_qgis__3d.dir/3d/sip_3dpart8.cpp.o:(.data.rel.local+0x160) :
>>> défini pour la première fois ici
>>> collect2: error: ld returned 1 exit status
>>> [59/1570] Linking CXX shared library output/lib/libqgis_gui.so.3.17.0
>>>
>>> Any hints would be welcome. Thanks
>>>
>>> Harrissou
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Saber Razmjooei
www.lutraconsulting.co.uk
+44 (0)7568 129733
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201101/8043518d/attachment.html>

From regis.haubourg at gmail.com  Sun Nov  1 01:57:16 2020
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Sun, 1 Nov 2020 09:57:16 +0100
Subject: [QGIS-Developer] WFS-T, postgis and triggers
In-Reply-To: <CAMtsY+a6MWwwxfrgkMcHsfBXhZWQYGQ8ejPECNWpNzqwwc91mg@mail.gmail.com>
References: <CAMtsY+bN7CqToNV0VFxMdZfph2S-8OtTLkfjD+ZQkd8AR6OUDw@mail.gmail.com>
 <CAL5Q673KOrnqy62j5T2yQuanz+zPyoNuoHrYyzzrNwWQ3dUrQQ@mail.gmail.com>
 <CAMtsY+a6MWwwxfrgkMcHsfBXhZWQYGQ8ejPECNWpNzqwwc91mg@mail.gmail.com>
Message-ID: <CABgOYCdm1qyXP+70r715bHG=OOeBNgDVuin_vTbDLUksnaWMTw@mail.gmail.com>

Hi,
+1 with Denis, this is a quite common scenario, but the caching issue,
combined with the good old WFS-T implementation spatialite provider issues
looked like a big challenge.

I think the future transactional version of WFS3 - OGC APIF should speed up
and simplify a lot the protocol part. On my side, I was just waiting fo it
to happen to raise the topic again.

Concerning the client side caching, I'm not up to date with the potential
spatialite provider enhancement.

Having a reliable and efficient way to edit WFS-T would be really nice. But
as Alessandro points out, our application with a lot of database
intelligence will trigger a lot of data refresh in any case and we will
have then some lags.

Best
Régis






Le jeu. 29 oct. 2020 à 15:11, Denis Rouzaud <denis.rouzaud at gmail.com> a
écrit :

>
>
> Le jeu. 29 oct. 2020 à 15:07, Alessandro Pasotti <apasotti at gmail.com> a
> écrit :
>
>> On Thu, Oct 29, 2020 at 2:59 PM Denis Rouzaud <denis.rouzaud at gmail.com>
>> wrote:
>> >
>> > Hi all,
>> >
>> > I have a WFS-T layer with a Postgis DB behind it.
>> > On my table, I have an insert trigger (before insert) which sets a
>> field.
>> > When I create a feature on this layer in QGIS, I don't get back the
>> value of this field (I have to refresh the data, by re-opening QGIS for
>> instance).
>> >
>> > Is this expected?
>>
>> Yes. The features are locally cached in a SQLite layer and a newly
>> created feature will be stored locally and not retrieve from the
>> server.
>>
>> > Is there anything we can fix?
>>
>> Of course yes but it would require re-fetching the feature(s) after an
>> insert or an update, I think it will slow things down.
>>
>
> This could be done asynchronously?
> It sounds like a quite common scenario (or not if nobody complained...).
>
> Thanks for the answer anyway.
>
>
>> Besides that there is no perfect solution to server-side changes: if
>> some other user will trigger a data change on the DB we will of course
>> miss it anyway.
>>
>>
>> > Am I doing something wrong?
>>
>> No.
>>
>> Cheers
>>
>>
>> --
>> Alessandro Pasotti
>> QCooperative:  www.qcooperative.net
>> ItOpen:   www.itopen.it
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201101/86d7082c/attachment-0001.html>

From carlo.bertelli at gmail.com  Sun Nov  1 01:38:55 2020
From: carlo.bertelli at gmail.com (Carlo A. Bertelli (Charta s.r.l.))
Date: Sun, 1 Nov 2020 10:38:55 +0100
Subject: [QGIS-Developer] WFS-T, postgis and triggers
In-Reply-To: <CABgOYCdm1qyXP+70r715bHG=OOeBNgDVuin_vTbDLUksnaWMTw@mail.gmail.com>
References: <CAMtsY+bN7CqToNV0VFxMdZfph2S-8OtTLkfjD+ZQkd8AR6OUDw@mail.gmail.com>
 <CAL5Q673KOrnqy62j5T2yQuanz+zPyoNuoHrYyzzrNwWQ3dUrQQ@mail.gmail.com>
 <CAMtsY+a6MWwwxfrgkMcHsfBXhZWQYGQ8ejPECNWpNzqwwc91mg@mail.gmail.com>
 <CABgOYCdm1qyXP+70r715bHG=OOeBNgDVuin_vTbDLUksnaWMTw@mail.gmail.com>
Message-ID: <CALc8-VLbFBsQPGKLeDkcX7u2vKxbB7cOQkVqa07rbtAcEo_D1w@mail.gmail.com>

I suppose we could benefit from the help of another Alessandro, the father
of Spatialite. I think he is already working on WFS3. Maybe this could lead
to an enhancement of libspatialite to make XML/JSON sources a more
interactive part of Spatialite itself or a virtualwms data provider for
Spatialite (like virtualpg).
c

On Sun, Nov 1, 2020 at 9:58 AM Régis Haubourg <regis.haubourg at gmail.com>
wrote:

> Hi,
> +1 with Denis, this is a quite common scenario, but the caching issue,
> combined with the good old WFS-T implementation spatialite provider issues
> looked like a big challenge.
>
> I think the future transactional version of WFS3 - OGC APIF should speed
> up and simplify a lot the protocol part. On my side, I was just waiting fo
> it to happen to raise the topic again.
>
> Concerning the client side caching, I'm not up to date with the potential
> spatialite provider enhancement.
>
> Having a reliable and efficient way to edit WFS-T would be really nice.
> But as Alessandro points out, our application with a lot of database
> intelligence will trigger a lot of data refresh in any case and we will
> have then some lags.
>
> Best
> Régis
>
>
>
>
>
>
> Le jeu. 29 oct. 2020 à 15:11, Denis Rouzaud <denis.rouzaud at gmail.com> a
> écrit :
>
>>
>>
>> Le jeu. 29 oct. 2020 à 15:07, Alessandro Pasotti <apasotti at gmail.com> a
>> écrit :
>>
>>> On Thu, Oct 29, 2020 at 2:59 PM Denis Rouzaud <denis.rouzaud at gmail.com>
>>> wrote:
>>> >
>>> > Hi all,
>>> >
>>> > I have a WFS-T layer with a Postgis DB behind it.
>>> > On my table, I have an insert trigger (before insert) which sets a
>>> field.
>>> > When I create a feature on this layer in QGIS, I don't get back the
>>> value of this field (I have to refresh the data, by re-opening QGIS for
>>> instance).
>>> >
>>> > Is this expected?
>>>
>>> Yes. The features are locally cached in a SQLite layer and a newly
>>> created feature will be stored locally and not retrieve from the
>>> server.
>>>
>>> > Is there anything we can fix?
>>>
>>> Of course yes but it would require re-fetching the feature(s) after an
>>> insert or an update, I think it will slow things down.
>>>
>>
>> This could be done asynchronously?
>> It sounds like a quite common scenario (or not if nobody complained...).
>>
>> Thanks for the answer anyway.
>>
>>
>>> Besides that there is no perfect solution to server-side changes: if
>>> some other user will trigger a data change on the DB we will of course
>>> miss it anyway.
>>>
>>>
>>> > Am I doing something wrong?
>>>
>>> No.
>>>
>>> Cheers
>>>
>>>
>>> --
>>> Alessandro Pasotti
>>> QCooperative:  www.qcooperative.net
>>> ItOpen:   www.itopen.it
>>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201101/e37ac737/attachment.html>

From denis.rouzaud at gmail.com  Sun Nov  1 22:29:25 2020
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Mon, 2 Nov 2020 07:29:25 +0100
Subject: [QGIS-Developer] WFS-T, postgis and triggers
In-Reply-To: <CALc8-VLbFBsQPGKLeDkcX7u2vKxbB7cOQkVqa07rbtAcEo_D1w@mail.gmail.com>
References: <CAMtsY+bN7CqToNV0VFxMdZfph2S-8OtTLkfjD+ZQkd8AR6OUDw@mail.gmail.com>
 <CAL5Q673KOrnqy62j5T2yQuanz+zPyoNuoHrYyzzrNwWQ3dUrQQ@mail.gmail.com>
 <CAMtsY+a6MWwwxfrgkMcHsfBXhZWQYGQ8ejPECNWpNzqwwc91mg@mail.gmail.com>
 <CABgOYCdm1qyXP+70r715bHG=OOeBNgDVuin_vTbDLUksnaWMTw@mail.gmail.com>
 <CALc8-VLbFBsQPGKLeDkcX7u2vKxbB7cOQkVqa07rbtAcEo_D1w@mail.gmail.com>
Message-ID: <CAMtsY+acVyic0-AzZjA2U+2vEPgLg3ddVcWwXWqAMeksUuxSZg@mail.gmail.com>

But couldn't we just add an option to the layer to re-fetch the data once
inserted?

Le dim. 1 nov. 2020 à 10:39, Carlo A. Bertelli (Charta s.r.l.) <
carlo.bertelli at gmail.com> a écrit :

> I suppose we could benefit from the help of another Alessandro, the father
> of Spatialite. I think he is already working on WFS3. Maybe this could lead
> to an enhancement of libspatialite to make XML/JSON sources a more
> interactive part of Spatialite itself or a virtualwms data provider for
> Spatialite (like virtualpg).
> c
>
> On Sun, Nov 1, 2020 at 9:58 AM Régis Haubourg <regis.haubourg at gmail.com>
> wrote:
>
>> Hi,
>> +1 with Denis, this is a quite common scenario, but the caching issue,
>> combined with the good old WFS-T implementation spatialite provider issues
>> looked like a big challenge.
>>
>> I think the future transactional version of WFS3 - OGC APIF should speed
>> up and simplify a lot the protocol part. On my side, I was just waiting fo
>> it to happen to raise the topic again.
>>
>> Concerning the client side caching, I'm not up to date with the potential
>> spatialite provider enhancement.
>>
>> Having a reliable and efficient way to edit WFS-T would be really nice.
>> But as Alessandro points out, our application with a lot of database
>> intelligence will trigger a lot of data refresh in any case and we will
>> have then some lags.
>>
>> Best
>> Régis
>>
>>
>>
>>
>>
>>
>> Le jeu. 29 oct. 2020 à 15:11, Denis Rouzaud <denis.rouzaud at gmail.com> a
>> écrit :
>>
>>>
>>>
>>> Le jeu. 29 oct. 2020 à 15:07, Alessandro Pasotti <apasotti at gmail.com> a
>>> écrit :
>>>
>>>> On Thu, Oct 29, 2020 at 2:59 PM Denis Rouzaud <denis.rouzaud at gmail.com>
>>>> wrote:
>>>> >
>>>> > Hi all,
>>>> >
>>>> > I have a WFS-T layer with a Postgis DB behind it.
>>>> > On my table, I have an insert trigger (before insert) which sets a
>>>> field.
>>>> > When I create a feature on this layer in QGIS, I don't get back the
>>>> value of this field (I have to refresh the data, by re-opening QGIS for
>>>> instance).
>>>> >
>>>> > Is this expected?
>>>>
>>>> Yes. The features are locally cached in a SQLite layer and a newly
>>>> created feature will be stored locally and not retrieve from the
>>>> server.
>>>>
>>>> > Is there anything we can fix?
>>>>
>>>> Of course yes but it would require re-fetching the feature(s) after an
>>>> insert or an update, I think it will slow things down.
>>>>
>>>
>>> This could be done asynchronously?
>>> It sounds like a quite common scenario (or not if nobody complained...).
>>>
>>> Thanks for the answer anyway.
>>>
>>>
>>>> Besides that there is no perfect solution to server-side changes: if
>>>> some other user will trigger a data change on the DB we will of course
>>>> miss it anyway.
>>>>
>>>>
>>>> > Am I doing something wrong?
>>>>
>>>> No.
>>>>
>>>> Cheers
>>>>
>>>>
>>>> --
>>>> Alessandro Pasotti
>>>> QCooperative:  www.qcooperative.net
>>>> ItOpen:   www.itopen.it
>>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201102/1e879471/attachment.html>

From bo.victor.thomsen at gmail.com  Mon Nov  2 00:15:46 2020
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Mon, 2 Nov 2020 09:15:46 +0100
Subject: [QGIS-Developer] WFS-T, postgis and triggers
In-Reply-To: <CAMtsY+acVyic0-AzZjA2U+2vEPgLg3ddVcWwXWqAMeksUuxSZg@mail.gmail.com>
References: <CAMtsY+bN7CqToNV0VFxMdZfph2S-8OtTLkfjD+ZQkd8AR6OUDw@mail.gmail.com>
 <CAL5Q673KOrnqy62j5T2yQuanz+zPyoNuoHrYyzzrNwWQ3dUrQQ@mail.gmail.com>
 <CAMtsY+a6MWwwxfrgkMcHsfBXhZWQYGQ8ejPECNWpNzqwwc91mg@mail.gmail.com>
 <CABgOYCdm1qyXP+70r715bHG=OOeBNgDVuin_vTbDLUksnaWMTw@mail.gmail.com>
 <CALc8-VLbFBsQPGKLeDkcX7u2vKxbB7cOQkVqa07rbtAcEo_D1w@mail.gmail.com>
 <CAMtsY+acVyic0-AzZjA2U+2vEPgLg3ddVcWwXWqAMeksUuxSZg@mail.gmail.com>
Message-ID: <3e20c7d0-65f4-d5f5-e54d-090cd8d49c46@gmail.com>

Good idea -

But make it an option for the specific layers, so it's possible to turn 
it "off" or "on" depending of the situation. And "off" should be the 
default.

-- 
Med venlig hilsen / Kind regards

Bo Victor Thomsen

Den 02-11-2020 kl. 07:29 skrev Denis Rouzaud:
> But couldn't we just add an option to the layer to re-fetch the data 
> once inserted?
>
> Le dim. 1 nov. 2020 à 10:39, Carlo A. Bertelli (Charta s.r.l.) 
> <carlo.bertelli at gmail.com <mailto:carlo.bertelli at gmail.com>> a écrit :
>
>     I suppose we could benefit from the help of another Alessandro,
>     the father of Spatialite. I think he is already working on WFS3.
>     Maybe this could lead to an enhancement of libspatialite to make
>     XML/JSON sources a more interactive part of Spatialite itself or a
>     virtualwms data provider for Spatialite (like virtualpg).
>     c
>
>     On Sun, Nov 1, 2020 at 9:58 AM Régis Haubourg
>     <regis.haubourg at gmail.com <mailto:regis.haubourg at gmail.com>> wrote:
>
>         Hi,
>         +1 with Denis, this is a quite common scenario, but the
>         caching issue, combined with the good old WFS-T implementation
>         spatialite provider issues looked like a big challenge.
>
>         I think the future transactional version of WFS3 - OGC APIF
>         should speed up and simplify a lot the protocol part. On my
>         side, I was just waiting fo it to happen to raise the topic again.
>
>         Concerning the client side caching, I'm not up to date with
>         the potential spatialite provider enhancement.
>
>         Having a reliable and efficient way to edit WFS-T would be
>         really nice. But as Alessandro points out, our application
>         with a lot of database intelligence will trigger a lot of data
>         refresh in any case and we will have then some lags.
>
>         Best
>         Régis
>
>
>
>
>
>
>         Le jeu. 29 oct. 2020 à 15:11, Denis Rouzaud
>         <denis.rouzaud at gmail.com <mailto:denis.rouzaud at gmail.com>> a
>         écrit :
>
>
>
>             Le jeu. 29 oct. 2020 à 15:07, Alessandro Pasotti
>             <apasotti at gmail.com <mailto:apasotti at gmail.com>> a écrit :
>
>                 On Thu, Oct 29, 2020 at 2:59 PM Denis Rouzaud
>                 <denis.rouzaud at gmail.com
>                 <mailto:denis.rouzaud at gmail.com>> wrote:
>                 >
>                 > Hi all,
>                 >
>                 > I have a WFS-T layer with a Postgis DB behind it.
>                 > On my table, I have an insert trigger (before
>                 insert) which sets a field.
>                 > When I create a feature on this layer in QGIS, I
>                 don't get back the value of this field (I have to
>                 refresh the data, by re-opening QGIS for instance).
>                 >
>                 > Is this expected?
>
>                 Yes. The features are locally cached in a SQLite layer
>                 and a newly
>                 created feature will be stored locally and not
>                 retrieve from the
>                 server.
>
>                 > Is there anything we can fix?
>
>                 Of course yes but it would require re-fetching the
>                 feature(s) after an
>                 insert or an update, I think it will slow things down.
>
>
>             This could be done asynchronously?
>             It sounds like a quite common scenario (or not if nobody
>             complained...).
>
>             Thanks for the answer anyway.
>
>
>                 Besides that there is no perfect solution to
>                 server-side changes: if
>                 some other user will trigger a data change on the DB
>                 we will of course
>                 miss it anyway.
>
>
>                 > Am I doing something wrong?
>
>                 No.
>
>                 Cheers
>
>
>                 -- 
>                 Alessandro Pasotti
>                 QCooperative: www.qcooperative.net
>                 <http://www.qcooperative.net>
>                 ItOpen: www.itopen.it <http://www.itopen.it>
>
>             _______________________________________________
>             QGIS-Developer mailing list
>             QGIS-Developer at lists.osgeo.org
>             <mailto:QGIS-Developer at lists.osgeo.org>
>             List info:
>             https://lists.osgeo.org/mailman/listinfo/qgis-developer
>             Unsubscribe:
>             https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>         _______________________________________________
>         QGIS-Developer mailing list
>         QGIS-Developer at lists.osgeo.org
>         <mailto:QGIS-Developer at lists.osgeo.org>
>         List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>         Unsubscribe:
>         https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201102/cc2b8954/attachment-0001.html>

From regis.haubourg at gmail.com  Mon Nov  2 00:26:00 2020
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Mon, 2 Nov 2020 09:26:00 +0100
Subject: [QGIS-Developer] WFS-T, postgis and triggers
In-Reply-To: <CAMtsY+acVyic0-AzZjA2U+2vEPgLg3ddVcWwXWqAMeksUuxSZg@mail.gmail.com>
References: <CAMtsY+bN7CqToNV0VFxMdZfph2S-8OtTLkfjD+ZQkd8AR6OUDw@mail.gmail.com>
 <CAL5Q673KOrnqy62j5T2yQuanz+zPyoNuoHrYyzzrNwWQ3dUrQQ@mail.gmail.com>
 <CAMtsY+a6MWwwxfrgkMcHsfBXhZWQYGQ8ejPECNWpNzqwwc91mg@mail.gmail.com>
 <CABgOYCdm1qyXP+70r715bHG=OOeBNgDVuin_vTbDLUksnaWMTw@mail.gmail.com>
 <CALc8-VLbFBsQPGKLeDkcX7u2vKxbB7cOQkVqa07rbtAcEo_D1w@mail.gmail.com>
 <CAMtsY+acVyic0-AzZjA2U+2vEPgLg3ddVcWwXWqAMeksUuxSZg@mail.gmail.com>
Message-ID: <CABgOYCeBky2UrtHnzjAukZJM3FF5cfX1Eew=R-=R6XmD7ekw9A@mail.gmail.com>

Hi,
Le lun. 2 nov. 2020 à 07:29, Denis Rouzaud <denis.rouzaud at gmail.com> a
écrit :

> But couldn't we just add an option to the layer to re-fetch the data once
> inserted?
>
> I think the layer dependencies options could be adapted to refetch the wfs
data when activated. They are made to refecth the data and refresh the
snapping cache for layer potentially modified on the data provider side.
That would avoir adding yet another option.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201102/aac03011/attachment.html>

From aron.gergely at rasterra.nl  Mon Nov  2 01:31:11 2020
From: aron.gergely at rasterra.nl (Aron Gergely)
Date: Mon, 2 Nov 2020 10:31:11 +0100
Subject: [QGIS-Developer] [Qgis-user] Refresh layer at interval
In-Reply-To: <866595688.1113094.1604262286806@mail.yahoo.com>
References: <1844758024.3552448.1603897683833.ref@mail.yahoo.com>
 <1844758024.3552448.1603897683833@mail.yahoo.com>
 <866595688.1113094.1604262286806@mail.yahoo.com>
Message-ID: <1b7fb552-dd09-cb46-4dcb-d18cf859d9d6@rasterra.nl>

Hi Robert,

I do not know the answer to your question, but I think you are asking in 
the wrong list.
You may have better success on `qgis-developer` (I added it in, so this 
is getting cross-posted)

On 01/11/2020 21:24, nagyrobi_r at yahoo.com wrote:
>
>     Hi All!
>
>     I am trying to understand the behavior of Layer->Render-> Refresh
>     layer at interval in QGIS
>
>      1. I sat up a flask rest api which serves a geojson.
>      2. I added the geojson to QGIS via Add Layer->
>          1. a. Protocol HTTP/cloud/etc
>          2. b. Type: HTTP
>          3. c.URI: localhost/points.geojson The points are represented
>             on the map correctly
>      3. I changed the layer->Properties->Rendering-> Refresh layer at
>         interval (5 sec)
>
>     I would have expected that there would be a call every 5 seconds
>     towards the server and the map data would be updated accordingly.
>     But the layer does not get refreshed. I don't see any changes
>     neither when I remove a point from the json file on my local
>     drive, nor if I change an attribute. If I press F5 then the canvas
>     refreshes and it automatically loads the new data and I can see
>     the changes. Is this the behavior that is wanted or am I
>     misunderstanding the function of this tool? It seems like the data
>     is cached somewhere?
>
>     |from flask import Flask from flask_restful import Api, Resource
>     import json app = Flask(__name__) api = Api(app) class
>     point(Resource): def get(self): with
>     open('C:/points/venv/src/points.geojson') as json_file: data =
>     json.load(json_file) return data
>     api.add_resource(point,"/points.geojson") if __name__=="__main__":
>     app.run(debug=True)|
>
>     |Robert Nagy|
>
>
> _______________________________________________
> Qgis-user mailing list
> Qgis-user at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user

-- 
Email Signature Kind Regards,

Aron Gergely
+31 (0) 6 38 70 97 66

*Rasterra* | www.rasterra.nl <https://www.rasterra.nl>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201102/cca39382/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: aron_gergely.vcf
Type: text/x-vcard
Size: 4 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201102/cca39382/attachment.vcf>

From rdmailings at duif.net  Mon Nov  2 03:23:13 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 2 Nov 2020 12:23:13 +0100
Subject: [QGIS-Developer] [Qgis-user] Refresh layer at interval
In-Reply-To: <866595688.1113094.1604262286806@mail.yahoo.com>
References: <1844758024.3552448.1603897683833.ref@mail.yahoo.com>
 <1844758024.3552448.1603897683833@mail.yahoo.com>
 <866595688.1113094.1604262286806@mail.yahoo.com>
Message-ID: <7ec5d15b-207c-98b2-d527-5303a276ec5c@duif.net>

I think you hit an old issue:

https://github.com/qgis/QGIS/issues/28282
and
https://github.com/qgis/QGIS/issues/28744

Not sure if I can tackle it, but I can give it a try.
If a core-dev has a clue, please let me know...

I think this should work, as this makes it supereasy to have a 'moving map'..

Regards,

Richard Duivenvoorde


On 11/1/20 9:24 PM, nagyrobi_r at yahoo.com wrote:
> 
>     Hi All!
> 
>     I am trying to understand the behavior of Layer->Render-> Refresh layer at interval in QGIS
> 
>      1. I sat up a flask rest api which serves a geojson.
>      2. I added the geojson to QGIS via Add Layer-> 
>          1. a. Protocol HTTP/cloud/etc 
>          2. b. Type: HTTP 
>          3. c.URI: localhost/points.geojson The points are represented on the map correctly
>      3. I changed the layer->Properties->Rendering-> Refresh layer at interval (5 sec)
> 
>     I would have expected that there would be a call every 5 seconds towards the server and the map data would be updated accordingly. But the layer does not get refreshed. I don't see any changes neither when I remove a point from the json file on my local drive, nor if I change an attribute. If I press F5 then the canvas refreshes and it automatically loads the new data and I can see the changes. Is this the behavior that is wanted or am I misunderstanding the function of this tool? It seems like the data is cached somewhere?
> 
>     |from flask import Flask from flask_restful import Api, Resource import json app = Flask(__name__) api = Api(app) class point(Resource): def get(self): with open('C:/points/venv/src/points.geojson') as json_file: data = json.load(json_file) return data api.add_resource(point,"/points.geojson") if __name__=="__main__": app.run(debug=True)|
> 
>     |Robert Nagy|
> 
> 
> _______________________________________________
> Qgis-user mailing list
> Qgis-user at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user
> 


From rdmailings at duif.net  Mon Nov  2 03:25:14 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 2 Nov 2020 12:25:14 +0100
Subject: [QGIS-Developer] [Qgis-user] Refresh layer at interval
In-Reply-To: <7ec5d15b-207c-98b2-d527-5303a276ec5c@duif.net>
References: <1844758024.3552448.1603897683833.ref@mail.yahoo.com>
 <1844758024.3552448.1603897683833@mail.yahoo.com>
 <866595688.1113094.1604262286806@mail.yahoo.com>
 <7ec5d15b-207c-98b2-d527-5303a276ec5c@duif.net>
Message-ID: <bb000787-8608-1108-cdd4-4a3bf28fbc92@duif.net>


Ah, and to reproduce, I created a temporary(!) service:

https://duif.net/geotest/points.geojson

which gives you one random point on the world every time you refresh

Regards,

Richard


On 11/2/20 12:23 PM, Richard Duivenvoorde wrote:
> I think you hit an old issue:
> 
> https://github.com/qgis/QGIS/issues/28282
> and
> https://github.com/qgis/QGIS/issues/28744
> 
> Not sure if I can tackle it, but I can give it a try.
> If a core-dev has a clue, please let me know...
> 
> I think this should work, as this makes it supereasy to have a 'moving map'..
> 
> Regards,
> 
> Richard Duivenvoorde
> 
> 
> On 11/1/20 9:24 PM, nagyrobi_r at yahoo.com wrote:
>>
>>     Hi All!
>>
>>     I am trying to understand the behavior of Layer->Render-> Refresh layer at interval in QGIS
>>
>>      1. I sat up a flask rest api which serves a geojson.
>>      2. I added the geojson to QGIS via Add Layer-> 
>>          1. a. Protocol HTTP/cloud/etc 
>>          2. b. Type: HTTP 
>>          3. c.URI: localhost/points.geojson The points are represented on the map correctly
>>      3. I changed the layer->Properties->Rendering-> Refresh layer at interval (5 sec)
>>
>>     I would have expected that there would be a call every 5 seconds towards the server and the map data would be updated accordingly. But the layer does not get refreshed. I don't see any changes neither when I remove a point from the json file on my local drive, nor if I change an attribute. If I press F5 then the canvas refreshes and it automatically loads the new data and I can see the changes. Is this the behavior that is wanted or am I misunderstanding the function of this tool? It seems like the data is cached somewhere?
>>
>>     |from flask import Flask from flask_restful import Api, Resource import json app = Flask(__name__) api = Api(app) class point(Resource): def get(self): with open('C:/points/venv/src/points.geojson') as json_file: data = json.load(json_file) return data api.add_resource(point,"/points.geojson") if __name__=="__main__": app.run(debug=True)|
>>
>>     |Robert Nagy|
>>
>>
>> _______________________________________________
>> Qgis-user mailing list
>> Qgis-user at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user
>>
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


From nagyrobi_r at yahoo.com  Mon Nov  2 03:27:17 2020
From: nagyrobi_r at yahoo.com (nagyrobi_r at yahoo.com)
Date: Mon, 2 Nov 2020 11:27:17 +0000 (UTC)
Subject: [QGIS-Developer] [Qgis-user] Refresh layer at interval
In-Reply-To: <bb000787-8608-1108-cdd4-4a3bf28fbc92@duif.net>
References: <1844758024.3552448.1603897683833.ref@mail.yahoo.com>
 <1844758024.3552448.1603897683833@mail.yahoo.com>
 <866595688.1113094.1604262286806@mail.yahoo.com>
 <7ec5d15b-207c-98b2-d527-5303a276ec5c@duif.net>
 <bb000787-8608-1108-cdd4-4a3bf28fbc92@duif.net>
Message-ID: <600418289.1278254.1604316437441@mail.yahoo.com>

Thank you a lot! 

Sent from Yahoo Mail on Android 
 
  On Mon, Nov 2, 2020 at 12:25 PM, Richard Duivenvoorde<rdmailings at duif.net> wrote:   
Ah, and to reproduce, I created a temporary(!) service:

https://duif.net/geotest/points.geojson

which gives you one random point on the world every time you refresh

Regards,

Richard


On 11/2/20 12:23 PM, Richard Duivenvoorde wrote:
> I think you hit an old issue:
> 
> https://github.com/qgis/QGIS/issues/28282
> and
> https://github.com/qgis/QGIS/issues/28744
> 
> Not sure if I can tackle it, but I can give it a try.
> If a core-dev has a clue, please let me know...
> 
> I think this should work, as this makes it supereasy to have a 'moving map'..
> 
> Regards,
> 
> Richard Duivenvoorde
> 
> 
> On 11/1/20 9:24 PM, nagyrobi_r at yahoo.com wrote:
>>
>>    Hi All!
>>
>>    I am trying to understand the behavior of Layer->Render-> Refresh layer at interval in QGIS
>>
>>      1. I sat up a flask rest api which serves a geojson.
>>      2. I added the geojson to QGIS via Add Layer-> 
>>          1. a. Protocol HTTP/cloud/etc 
>>          2. b. Type: HTTP 
>>          3. c.URI: localhost/points.geojson The points are represented on the map correctly
>>      3. I changed the layer->Properties->Rendering-> Refresh layer at interval (5 sec)
>>
>>    I would have expected that there would be a call every 5 seconds towards the server and the map data would be updated accordingly. But the layer does not get refreshed. I don't see any changes neither when I remove a point from the json file on my local drive, nor if I change an attribute. If I press F5 then the canvas refreshes and it automatically loads the new data and I can see the changes. Is this the behavior that is wanted or am I misunderstanding the function of this tool? It seems like the data is cached somewhere?
>>
>>    |from flask import Flask from flask_restful import Api, Resource import json app = Flask(__name__) api = Api(app) class point(Resource): def get(self): with open('C:/points/venv/src/points.geojson') as json_file: data = json.load(json_file) return data api.add_resource(point,"/points.geojson") if __name__=="__main__": app.run(debug=True)|
>>
>>    |Robert Nagy|
>>
>>
>> _______________________________________________
>> Qgis-user mailing list
>> Qgis-user at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user
>>
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201102/decbb30d/attachment.html>

From rdmailings at duif.net  Mon Nov  2 05:52:02 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 2 Nov 2020 14:52:02 +0100
Subject: [QGIS-Developer] [Qgis-user] Refresh layer at interval
In-Reply-To: <600418289.1278254.1604316437441@mail.yahoo.com>
References: <1844758024.3552448.1603897683833.ref@mail.yahoo.com>
 <1844758024.3552448.1603897683833@mail.yahoo.com>
 <866595688.1113094.1604262286806@mail.yahoo.com>
 <7ec5d15b-207c-98b2-d527-5303a276ec5c@duif.net>
 <bb000787-8608-1108-cdd4-4a3bf28fbc92@duif.net>
 <600418289.1278254.1604316437441@mail.yahoo.com>
Message-ID: <86760ddb-24d6-5dd8-0099-ac09f5e9c412@duif.net>

This is getting worse...

https://github.com/qgis/QGIS/issues/28282#issuecomment-720484251

Something smelling there :-(

Regards,

Richard Duivenvoorde


On 11/2/20 12:27 PM, nagyrobi_r at yahoo.com wrote:
> Thank you a lot! 
> 
> Sent from Yahoo Mail on Android <https://go.onelink.me/107872968?pid=InProduct&c=Global_Internal_YGrowth_AndroidEmailSig__AndroidUsers&af_wl=ym&af_sub1=Internal&af_sub2=Global_YGrowth&af_sub3=EmailSignature>
> 
>     On Mon, Nov 2, 2020 at 12:25 PM, Richard Duivenvoorde
>     <rdmailings at duif.net> wrote:
> 
>     Ah, and to reproduce, I created a temporary(!) service:
> 
>     https://duif.net/geotest/points.geojson
> 
>     which gives you one random point on the world every time you refresh
> 
>     Regards,
> 
>     Richard
> 
> 
>     On 11/2/20 12:23 PM, Richard Duivenvoorde wrote:
>     > I think you hit an old issue:
>     >
>     > https://github.com/qgis/QGIS/issues/28282
>     > and
>     > https://github.com/qgis/QGIS/issues/28744
>     >
>     > Not sure if I can tackle it, but I can give it a try.
>     > If a core-dev has a clue, please let me know...
>     >
>     > I think this should work, as this makes it supereasy to have a 'moving map'..
>     >
>     > Regards,
>     >
>     > Richard Duivenvoorde
>     >
>     >
>     > On 11/1/20 9:24 PM, nagyrobi_r at yahoo.com <mailto:nagyrobi_r at yahoo.com> wrote:
>     >>
>     >>    Hi All!
>     >>
>     >>    I am trying to understand the behavior of Layer->Render-> Refresh layer at interval in QGIS
>     >>
>     >>      1. I sat up a flask rest api which serves a geojson.
>     >>      2. I added the geojson to QGIS via Add Layer-> 
>     >>          1. a. Protocol HTTP/cloud/etc 
>     >>          2. b. Type: HTTP 
>     >>          3. c.URI: localhost/points.geojson The points are represented on the map correctly
>     >>      3. I changed the layer->Properties->Rendering-> Refresh layer at interval (5 sec)
>     >>
>     >>    I would have expected that there would be a call every 5 seconds towards the server and the map data would be updated accordingly. But the layer does not get refreshed. I don't see any changes neither when I remove a point from the json file on my local drive, nor if I change an attribute. If I press F5 then the canvas refreshes and it automatically loads the new data and I can see the changes. Is this the behavior that is wanted or am I misunderstanding the function of this tool? It seems like the data is cached somewhere?
>     >>
>     >>    |from flask import Flask from flask_restful import Api, Resource import json app = Flask(__name__) api = Api(app) class point(Resource): def get(self): with open('C:/points/venv/src/points.geojson') as json_file: data = json.load(json_file) return data api.add_resource(point,"/points.geojson") if __name__=="__main__": app.run(debug=True)|
>     >>
>     >>    |Robert Nagy|
>     >>
>     >>
>     >> _______________________________________________
>     >> Qgis-user mailing list
>     >> Qgis-user at lists.osgeo.org <mailto:Qgis-user at lists.osgeo.org>
>     >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
>     >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user
>     >>
>     >
>     > _______________________________________________
>     > QGIS-Developer mailing list
>     > QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
>     > Unsubscribe:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
>     >
> 


From even.rouault at spatialys.com  Mon Nov  2 06:06:20 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 02 Nov 2020 15:06:20 +0100
Subject: [QGIS-Developer] Changes in Travis-CI billing
Message-ID: <5408662.qOxeECRsei@even-i700>

Hi,

I was pointed to
https://blog.travis-ci.com/2020-11-02-travis-ci-new-billing

If my understanding is correct (which I'm not completely sure given all the 
subtelties), QGIS builds will now have a initial credit of 1000 minutes of 
build time (so only 17 hours), and then we'd have to beg for more, but I can't 
imagine we can ask every day a renewal of this credit...

Looks like Travis-CI won't be a realistic option any more unless paying.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From denis.rouzaud at gmail.com  Mon Nov  2 06:20:28 2020
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Mon, 2 Nov 2020 15:20:28 +0100
Subject: [QGIS-Developer] Changes in Travis-CI billing
In-Reply-To: <5408662.qOxeECRsei@even-i700>
References: <5408662.qOxeECRsei@even-i700>
Message-ID: <CAMtsY+Zj8RdHj28-HmETaUE80wZjWwXQEirkyOdRD5VTZkhb3Q@mail.gmail.com>

Hi Even,

Thanks a lot for the pointer.

QGIS might not be affected by this since we don't have more than 5
concurrent builds.
Or am I wrongly understanding the document?

Anyway, I guess we could slowly move everything to Github workflows as we
have had much better experience lately than on Travis.

Cheers,
Denis


Le lun. 2 nov. 2020 à 15:06, Even Rouault <even.rouault at spatialys.com> a
écrit :

> Hi,
>
> I was pointed to
> https://blog.travis-ci.com/2020-11-02-travis-ci-new-billing
>
> If my understanding is correct (which I'm not completely sure given all
> the
> subtelties), QGIS builds will now have a initial credit of 1000 minutes of
> build time (so only 17 hours), and then we'd have to beg for more, but I
> can't
> imagine we can ask every day a renewal of this credit...
>
> Looks like Travis-CI won't be a realistic option any more unless paying.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201102/bb24693e/attachment.html>

From delazj at gmail.com  Mon Nov  2 06:40:24 2020
From: delazj at gmail.com (DelazJ)
Date: Mon, 2 Nov 2020 15:40:24 +0100
Subject: [QGIS-Developer] Unable to build QGIS master due to multiple
 definitions of sipQgs3DAlgorithms
In-Reply-To: <CAH=WbRAApZj-h0UWp5WqZO+7rxUDMhOupWML8nhBdkwHQywj8w@mail.gmail.com>
References: <CAECJsSphyqUj-G0UTycHWYuaLagXHdrs08m=6wZiD93UmGUN=A@mail.gmail.com>
 <CA+T_MsJ7WMq-UN-r8fUH6WZ=FWDD=zjWiOf=W8VbovyQOOm0Jw@mail.gmail.com>
 <CAECJsSpS9d6NwGXg=i91izsXioeEoibKtmKCMyTSDdPDv--hKA@mail.gmail.com>
 <CAH=WbRAApZj-h0UWp5WqZO+7rxUDMhOupWML8nhBdkwHQywj8w@mail.gmail.com>
Message-ID: <CAECJsSqyS7jSLPPs2G2QNyHEB79kT_J=CxUSsMwjxkDbsF213A@mail.gmail.com>

Hi Saber,

Thanks. I'll give it a try this evening and let you know.

Greetings,
Harrissou

Le dim. 1 nov. 2020 à 08:34, Saber Razmjooei <
saber.razmjooei at lutraconsulting.co.uk> a écrit :

> Hi Harrissou,
>
> Here is my working one on Ubuntu 20.04:
> -DCMAKE_PREFIX_PATH=~/src/QGIS_master/external/qt3dextra-headers/cmake/Qt53DExtras
> -DQT5_3DEXTRA_INCLUDE_DIR=~/src/QGIS_master/external/qt3dextra-headers -D
> QT5_3DEXTRA_LIBRARY=/usr/lib/x86_64-linux-gnu/libQt53DExtras.so
> -DWITH_3D=True
> -DQt53DExtras_DIR=~/src/QGIS_master/external/qt3dextra-headers/cmake/Qt53DExtras
>
> I hope that works for you!
>
> Kind regards
> Saber
>
>
> On Sat, 31 Oct 2020 at 08:34, DelazJ <delazj at gmail.com> wrote:
>
>> Hi all,
>> Thanks Peter. I got some time to give it another try. So I trashed my
>> build dir and restarted.
>> Now I'm stuck at
>>
>> *In file included from ../src/3d/qgsskyboxsettings.h:*
>> *23,                 from ../src/3d/qgs3dmapsettings.h:*
>> *33,                 from src/3d/qgis_3d_autogen/**EWIEGA46WW/moc_*
>> *qgs3dmapsettings.cpp:9,                 from
>> src/3d/qgis_3d_autogen/mocs_*
>> *compilation.cpp:9:../src/3d/qgsskyboxentity.h:*
>>
>>
>>
>> *22:10: fatal error: Qt3DExtras/QCuboidMesh: Aucun fichier ou dossier de
>> ce type   22 | #include <Qt3DExtras/QCuboidMesh>        |
>> ^~~~~~~~~~~~~~~~~~~~~~~~compilation terminated.[52/2925] Building CXX
>> object src/3d/CMakeFiles/qgis_3d.dir/**qgsabstractvectorlayer3drender*
>> *er.cpp.oninja: build stopped: subcommand failed.*
>>
>> I don't know if it has anything to do but I had to fight against the "
>> Qt53DExtras" error to enable 3D
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> * CMake Error at /usr/lib/x86_64-linux-gnu/cmake/Qt5/Qt5Config.cmake:28
>> (find_package):   Could not find a package configuration file provided by
>> "Qt53DExtras" with   any of the following names:
>>  Qt53DExtrasConfig.cmake     qt53dextras-config.cmake   Add the
>> installation prefix of "Qt53DExtras" to CMAKE_PREFIX_PATH or set
>>  "Qt53DExtras_DIR" to a directory containing one of the above files.  If
>>  "Qt53DExtras" provides a separate development package or SDK, be sure it
>>  has been installed. Call Stack (most recent call first):
>>  CMakeLists.txt:404 (FIND_PACKAGE)*
>>
>> Recipes I found in the list and the install file didn't seem to fix the
>> cmake so I set  set the QT53DExtras_DIR to
>> /pathtoQGISrepo/external/qt3dextra-headers/cmake*/Qt53DExtras* (in which
>> I found the missing file)
>>
>> Thanks for any suggestion.
>>
>> Harrissou
>>
>> Le jeu. 29 oct. 2020 à 14:01, Peter Petrik <
>> peter.petrik at lutraconsulting.co.uk> a écrit :
>>
>>> Hi,
>>>
>>> can you please remove completely the build folder and start again?
>>>
>>> Thanks.
>>> P/
>>>
>>> On Thu, Oct 29, 2020 at 1:57 PM DelazJ <delazj at gmail.com> wrote:
>>>
>>>> Hi devs,
>>>>
>>>> Since yesterday, I'm unable to build QGIS on Ubuntu 20.04 using ninja.
>>>> It used to work a couple of days ago.
>>>> I'm getting a bunch of errors of the type:
>>>>
>>>> /usr/bin/ld :
>>>> python/CMakeFiles/python_module_qgis__3d.dir/3d/sip_3dpart10.cpp.o : dans
>>>> la fonction « sipQgs3DAlgorithms::sipProtect_isSignalConnected(QMetaMethod
>>>> const&) const » :
>>>> /media/delazj/dev/github/QGIS/build_ninja/python/3d/sip_3dpart10.cpp:4735 :
>>>> définitions multiples de
>>>> « sipQgs3DAlgorithms::sipProtect_isSignalConnected(QMetaMethod const&)
>>>> const »;
>>>> python/CMakeFiles/python_module_qgis__3d.dir/3d/sip_3dpart8.cpp.o:/media/delazj/dev/github/QGIS/build_ninja/python/3d/sip_3dpart8.cpp:892 :
>>>> défini pour la première fois ici
>>>> /usr/bin/ld :
>>>> python/CMakeFiles/python_module_qgis__3d.dir/3d/sip_3dpart10.cpp.o : dans
>>>> la fonction
>>>> « sipQgs3DAlgorithms::sipProtect_addAlgorithm(QgsProcessingAlgorithm*) » :
>>>> /media/delazj/dev/github/QGIS/build_ninja/python/3d/sip_3dpart10.cpp:4740 :
>>>> définitions multiples de
>>>> « sipQgs3DAlgorithms::sipProtect_addAlgorithm(QgsProcessingAlgorithm*) »;
>>>> python/CMakeFiles/python_module_qgis__3d.dir/3d/sip_3dpart8.cpp.o:/media/delazj/dev/github/QGIS/build_ninja/python/3d/sip_3dpart8.cpp:897 :
>>>> défini pour la première fois ici
>>>> /usr/bin/ld :
>>>> python/CMakeFiles/python_module_qgis__3d.dir/3d/sip_3dpart10.cpp.o : dans
>>>> la fonction « sipQgs3DAlgorithms::sipProtectVirt_loadAlgorithms(bool) » :
>>>> /media/delazj/dev/github/QGIS/build_ninja/python/3d/sip_3dpart10.cpp:4745 :
>>>> définitions multiples de
>>>> « sipQgs3DAlgorithms::sipProtectVirt_loadAlgorithms(bool) »;
>>>> python/CMakeFiles/python_module_qgis__3d.dir/3d/sip_3dpart8.cpp.o:/media/delazj/dev/github/QGIS/build_ninja/python/3d/sip_3dpart8.cpp:902 :
>>>> défini pour la première fois ici
>>>> /usr/bin/ld :
>>>> python/CMakeFiles/python_module_qgis__3d.dir/3d/sip_3dpart10.cpp.o:(.data.rel.local+0x2c0) :
>>>> définitions multiples de « sipTypeDef__3d_Qgs3DAlgorithms »;
>>>> python/CMakeFiles/python_module_qgis__3d.dir/3d/sip_3dpart8.cpp.o:(.data.rel.local+0x160) :
>>>> défini pour la première fois ici
>>>> collect2: error: ld returned 1 exit status
>>>> [59/1570] Linking CXX shared library output/lib/libqgis_gui.so.3.17.0
>>>>
>>>> Any hints would be welcome. Thanks
>>>>
>>>> Harrissou
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> --
> Saber Razmjooei
> www.lutraconsulting.co.uk
> +44 (0)7568 129733
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201102/d6beeebe/attachment.html>

From matthias at opengis.ch  Mon Nov  2 06:48:26 2020
From: matthias at opengis.ch (Matthias Kuhn)
Date: Mon, 2 Nov 2020 15:48:26 +0100
Subject: [QGIS-Developer] Changes in Travis-CI billing
In-Reply-To: <CAMtsY+Zj8RdHj28-HmETaUE80wZjWwXQEirkyOdRD5VTZkhb3Q@mail.gmail.com>
References: <5408662.qOxeECRsei@even-i700>
 <CAMtsY+Zj8RdHj28-HmETaUE80wZjWwXQEirkyOdRD5VTZkhb3Q@mail.gmail.com>
Message-ID: <CAC7zN94SedS1bGRmyxqH_62WSef56xV_CWxRzNib5Q91bqSJ+g@mail.gmail.com>

Hi Even, Denis,

I guess with the upcoming dependency bump we need to touch this anyway.
There is already a full qgis build against Qt 5.14, enabling tests there is
a few lines of code (and then dealing with the fallouts of tests that have
different results because of library changes which is what I'm most afraid
of. But that will happen regardless of the underlying CI engine).

Matthias

On Mon, Nov 2, 2020 at 3:20 PM Denis Rouzaud <denis.rouzaud at gmail.com>
wrote:

> Hi Even,
>
> Thanks a lot for the pointer.
>
> QGIS might not be affected by this since we don't have more than 5
> concurrent builds.
> Or am I wrongly understanding the document?
>
> Anyway, I guess we could slowly move everything to Github workflows as we
> have had much better experience lately than on Travis.
>
> Cheers,
> Denis
>
>
> Le lun. 2 nov. 2020 à 15:06, Even Rouault <even.rouault at spatialys.com> a
> écrit :
>
>> Hi,
>>
>> I was pointed to
>> https://blog.travis-ci.com/2020-11-02-travis-ci-new-billing
>>
>> If my understanding is correct (which I'm not completely sure given all
>> the
>> subtelties), QGIS builds will now have a initial credit of 1000 minutes
>> of
>> build time (so only 17 hours), and then we'd have to beg for more, but I
>> can't
>> imagine we can ask every day a renewal of this credit...
>>
>> Looks like Travis-CI won't be a realistic option any more unless paying.
>>
>> Even
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201102/d5033951/attachment-0001.html>

From even.rouault at spatialys.com  Mon Nov  2 06:50:15 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 02 Nov 2020 15:50:15 +0100
Subject: [QGIS-Developer] Changes in Travis-CI billing
In-Reply-To: <CAMtsY+Zj8RdHj28-HmETaUE80wZjWwXQEirkyOdRD5VTZkhb3Q@mail.gmail.com>
References: <5408662.qOxeECRsei@even-i700>
 <CAMtsY+Zj8RdHj28-HmETaUE80wZjWwXQEirkyOdRD5VTZkhb3Q@mail.gmail.com>
Message-ID: <2263331.4EPMIEoAmg@even-i700>

> QGIS might not be affected by this since we don't have more than 5
> concurrent builds.

That's not my understanding. The 1, 2 or 5 concurrent builds plans are paying 
plans if you look at https://travis-ci.com/organizations/qgis/plan .
The free plan of QGIS is subject to the 10,000 credits system.

For reference, OSGeo has a premium plan for 10 concurrent builds that costs 
5379 USD/year, and we have a 30% discount on it due to OSGeo being a non-
profit, bringing it to 3765 USD. (I've just written to Travis support to 
confirm that the OSGeo plan isn't affected by the changes)

> Anyway, I guess we could slowly move everything to Github workflows as we
> have had much better experience lately than on Travis.

That's going to be a urgent topic if my understanding is correct. Probably 
asking Travis support for one month worth of credits could be done for the 
time to transition, but not sure they'll be enthusiastic to do so if it isn't 
to switch to a paying plan.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Patrick.Palmier at cerema.fr  Mon Nov  2 08:23:23 2020
From: Patrick.Palmier at cerema.fr (=?ISO-8859-15?Q?PALMIER_Patrick_=28Responsable_de_groupe=29_=2D_CEREMA?= =?ISO-8859-15?Q?=2FDTerNP=2FDATHa=2FMT?=)
Date: Mon, 2 Nov 2020 17:23:23 +0100
Subject: [QGIS-Developer] How to call a custom algorithm provider in stand
 alone application with pyqgis
Message-ID: <e5b37f2f-12e3-fd7e-0713-482356bd46f7@cerema.fr>

Hello,

I work with Qgis 3.14 in Windows 10

I try to call a processing algorithm from a python stand alone app,
I want to run the following script from the custom Networks algorithm 
provider but I have the message that the algorithm is not known

How to register the provider in the processing registry to be able to 
call it?


     QgsApplication.setPrefixPath("C:/Program Files/QGIS 
3.14/apps/qgis", True)
     qgs = QgsApplication([], False)

     qgs.initQgis()
     import processing
     from processing.core.Processing import Processing
     Processing.initialize()



     processing.run("Networks:musliw_simple_matrix", 
{'NODES':'G:/BD_DREAL/2020/script_modele_resmultimodal_light 
/noeuds_light_hdf_be.gpkg','NUM':'num','START_POINT':'708675.425564,7063676.157556 
[EPSG:2154]','END_POINT':'708675.425564,7063676.157556 
[EPSG:2154]','DEMAND':1,'DAY':1,'TIME':'09:00:00','DEPARTURE':1,'OUTPUT':'G:/BD_DREAL/2020/script_modele_resmultimodal_light/matrice.txt','WRITE_MODE':0})

Thanks

Best regards


-- 

*Patrick Palmier *
*Responsable du groupe Mobilités et Territoires
DATHa / MT *
*Tél.: +33(0)3 20 49 60 70- Port : +33(0)7 77 34 25 07 *


Cerema Nord-Picardie / 44 ter rue Jean-Bart - CS20275 - 59019 LILLE cedex

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201102/88de3e73/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bloc logo
Type: image/png
Size: 22950 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201102/88de3e73/attachment-0001.png>

From etienne.trimaille at gmail.com  Mon Nov  2 09:01:54 2020
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Mon, 2 Nov 2020 18:01:54 +0100
Subject: [QGIS-Developer] How to call a custom algorithm provider in
 stand alone application with pyqgis
In-Reply-To: <e5b37f2f-12e3-fd7e-0713-482356bd46f7@cerema.fr>
References: <e5b37f2f-12e3-fd7e-0713-482356bd46f7@cerema.fr>
Message-ID: <CAMtDFL+wPgYEvMira_MVY4Xp4jRrfontAG3+B3tfDqO8aZZROg@mail.gmail.com>

As you are using QGIS 3.14, I would suggest you to use qgis_process if you
can.
Do you really want to use PyQGIS?

But if you really need PyQGIS, maybe the path where your script is located
is not known to your standalone script ?

Le lun. 2 nov. 2020 à 17:33, PALMIER Patrick (Responsable de groupe) -
CEREMA/DTerNP/DATHa/MT <Patrick.Palmier at cerema.fr> a écrit :

> Hello,
>
> I work with Qgis 3.14 in Windows 10
>
> I try to call a processing algorithm from a python stand alone app,
> I want to run the following script from the custom Networks algorithm
> provider but I have the message that the algorithm is not known
>
> How to register the provider in the processing registry to be able to call
> it?
>
>
>     QgsApplication.setPrefixPath("C:/Program Files/QGIS 3.14/apps/qgis",
> True)
>     qgs = QgsApplication([], False)
>
>     qgs.initQgis()
>     import processing
>     from processing.core.Processing import Processing
>     Processing.initialize()
>
>
>
>     processing.run("Networks:musliw_simple_matrix",
> {'NODES':'G:/BD_DREAL/2020/script_modele_resmultimodal_light
> /noeuds_light_hdf_be.gpkg','NUM':'num','START_POINT':'708675.425564,7063676.157556
> [EPSG:2154]','END_POINT':'708675.425564,7063676.157556
> [EPSG:2154]','DEMAND':1,'DAY':1,'TIME':'09:00:00','DEPARTURE':1,'OUTPUT':'G:/BD_DREAL/2020/script_modele_resmultimodal_light/matrice.txt','WRITE_MODE':0})
>
> Thanks
>
> Best regards
>
>
> --
>
> * Patrick Palmier *
>
> * Responsable du groupe Mobilités et Territoires DATHa / MT *
> * Tél.: +33(0)3 20 49 60 70- Port : +33(0)7 77 34 25 07 *
>
> Cerema Nord-Picardie / 44 ter rue Jean-Bart - CS20275 - 59019 LILLE cedex
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201102/52be8dba/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bloc logo
Type: image/png
Size: 22950 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201102/52be8dba/attachment-0001.png>

From nagyrobi_r at yahoo.com  Mon Nov  2 09:15:04 2020
From: nagyrobi_r at yahoo.com (nagyrobi_r at yahoo.com)
Date: Mon, 2 Nov 2020 17:15:04 +0000 (UTC)
Subject: [QGIS-Developer] How to call a custom algorithm provider in
 stand alone application with pyqgis
In-Reply-To: <CAMtDFL+wPgYEvMira_MVY4Xp4jRrfontAG3+B3tfDqO8aZZROg@mail.gmail.com>
References: <e5b37f2f-12e3-fd7e-0713-482356bd46f7@cerema.fr>
 <CAMtDFL+wPgYEvMira_MVY4Xp4jRrfontAG3+B3tfDqO8aZZROg@mail.gmail.com>
Message-ID: <1197122384.1400649.1604337304297@mail.yahoo.com>

 Did you set up the environmental variables to run it as a standalone script in python?
Like in section 1.4.3?
https://docs.qgis.org/testing/en/docs/pyqgis_developer_cookbook/intro.html#using-pyqgis-in-standalone-scripts
     On Monday, November 2, 2020, 06:02:11 PM GMT+1, Etienne Trimaille <etienne.trimaille at gmail.com> wrote:  
 
 As you are using QGIS 3.14, I would suggest you to use qgis_process if you can.Do you really want to use PyQGIS?

But if you really need PyQGIS, maybe the path where your script is located is not known to your standalone script ?

Le lun. 2 nov. 2020 à 17:33, PALMIER Patrick (Responsable de groupe) - CEREMA/DTerNP/DATHa/MT <Patrick.Palmier at cerema.fr> a écrit :

  Hello,
 
 I work with Qgis 3.14 in Windows 10
 
 I try to call a processing algorithm from a python stand alone app, 
 I want to run the following script from the custom Networks algorithm provider but I have the message that the algorithm is not known
 
 How to register the provider in the processing registry to be able to call it?
 
 
     QgsApplication.setPrefixPath("C:/Program Files/QGIS 3.14/apps/qgis", True)
     qgs = QgsApplication([], False)
 
     qgs.initQgis()
     import processing
     from processing.core.Processing import Processing
     Processing.initialize()
 
 
 
     processing.run("Networks:musliw_simple_matrix", {'NODES':'G:/BD_DREAL/2020/script_modele_resmultimodal_light   /noeuds_light_hdf_be.gpkg','NUM':'num','START_POINT':'708675.425564,7063676.157556 [EPSG:2154]','END_POINT':'708675.425564,7063676.157556[EPSG:2154]','DEMAND':1,'DAY':1,'TIME':'09:00:00','DEPARTURE':1,'OUTPUT':'G:/BD_DREAL/2020/script_modele_resmultimodal_light/matrice.txt','WRITE_MODE':0})
 
 Thanks
 
 Best regards
 
 
 -- 
 
 
|  
  Patrick Palmier 
  Responsable du groupe Mobilités et Territoires 
 DATHa / MT 
  Tél.: +33(0)3 20 49 60 70- Port : +33(0)7 77 34 25 07   
  |
|   
  Cerema Nord-Picardie / 44 ter rue Jean-Bart - CS20275 - 59019 LILLE cedex 
  
   |

  _______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201102/0656a27d/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bloc
Type: image/png
Size: 22950 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201102/0656a27d/attachment-0001.png>

From rdmailings at duif.net  Mon Nov  2 23:41:34 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 3 Nov 2020 08:41:34 +0100
Subject: [QGIS-Developer] oracle provider (testing)
Message-ID: <a9b56a07-5ed2-bd30-2b90-1b56fe400dec@duif.net>

Hi Devs,

Is anybody feeling self responsible (more or less) for the Oracle driver?

Myself I apparently introduce an issue in it: https://github.com/qgis/QGIS/issues/39759 which seems easy to fix, but my problem is I do not have Oracle running....

Are there any Oracle provider tests? And if so: which instance against are these tested against?

Idea: use a QGIS server to install Oracle XE (dev/free edition isn't it?) and provide ssh access to the machine. Then users with a ssh key (Travis?) can create a ssh tunnel to the machine and connect to that (test) db?
Thought to propose issues.qgis.org for that, as that is a beefy machine doing nothing (except keeping old issues/Redmine afloat). But.. that is a Debian 8.10, not sure if recent Oracle's can still run on it...

Input?

Regards,

Richard Duivenvoorde


From apasotti at gmail.com  Tue Nov  3 00:10:59 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 3 Nov 2020 09:10:59 +0100
Subject: [QGIS-Developer] oracle provider (testing)
In-Reply-To: <a9b56a07-5ed2-bd30-2b90-1b56fe400dec@duif.net>
References: <a9b56a07-5ed2-bd30-2b90-1b56fe400dec@duif.net>
Message-ID: <CAL5Q672OpZTQe24TDf5LuRvNuKC9OHvXjKHv_bj_xaRaC92QTQ@mail.gmail.com>

Hi Richard,

the only option that worked for me was to install a VirtualBox VM from
Oracle Big Data Lite.
I also installed a sample dataset called "cola"

It was a long time ago and I can't exactly remember the steps, but
IIRC it was an official Oracle image that was released for testing
purposes.

For CI I think we use a docker from oslandia but I couldn't make it
work on my machine at the time:
https://github.com/qgis/QGIS/blob/master/.ci/travis/linux/docker-compose.travis.yml#L15


On Tue, Nov 3, 2020 at 8:41 AM Richard Duivenvoorde <rdmailings at duif.net> wrote:
>
> Hi Devs,
>
> Is anybody feeling self responsible (more or less) for the Oracle driver?
>
> Myself I apparently introduce an issue in it: https://github.com/qgis/QGIS/issues/39759 which seems easy to fix, but my problem is I do not have Oracle running....
>
> Are there any Oracle provider tests? And if so: which instance against are these tested against?
>
> Idea: use a QGIS server to install Oracle XE (dev/free edition isn't it?) and provide ssh access to the machine. Then users with a ssh key (Travis?) can create a ssh tunnel to the machine and connect to that (test) db?
> Thought to propose issues.qgis.org for that, as that is a beefy machine doing nothing (except keeping old issues/Redmine afloat). But.. that is a Debian 8.10, not sure if recent Oracle's can still run on it...
>
> Input?
>
> Regards,
>
> Richard Duivenvoorde
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From Patrick.Palmier at cerema.fr  Tue Nov  3 00:50:34 2020
From: Patrick.Palmier at cerema.fr (=?ISO-8859-15?Q?PALMIER_Patrick_=28Responsable_de_groupe=29_=2D_CEREMA?= =?ISO-8859-15?Q?=2FDTerNP=2FDATHa=2FMT?=)
Date: Tue, 3 Nov 2020 09:50:34 +0100
Subject: [QGIS-Developer] How to call a custom algorithm provider in
 stand alone application with pyqgis
In-Reply-To: <1197122384.1400649.1604337304297@mail.yahoo.com>
References: <e5b37f2f-12e3-fd7e-0713-482356bd46f7@cerema.fr>
 <CAMtDFL+wPgYEvMira_MVY4Xp4jRrfontAG3+B3tfDqO8aZZROg@mail.gmail.com>
 <1197122384.1400649.1604337304297@mail.yahoo.com>
Message-ID: <cd0c638a-b31e-e394-b021-8e24ec765f39@cerema.fr>

Hello,

Yes, the environmental variables ton run a standalone script in python 
are set up and it works
I just want know how to run my personnal processing  algorithm, but I 
don't know how to manually add my alg provider in the alg provider registry

qgis_process is an interesting way, but I prefer if possible calling it 
directly  in PyQgis because it's part of a wider app

Thanks


Best regards


Le 02/11/2020 à 18:15, > nagyrobi_r (par Internet) a écrit :
> Did you set up the environmental variables to run it as a standalone 
> script in python?
> Like in section 1.4.3?
> https://docs.qgis.org/testing/en/docs/pyqgis_developer_cookbook/intro.html#using-pyqgis-in-standalone-scripts
> On Monday, November 2, 2020, 06:02:11 PM GMT+1, Etienne Trimaille 
> <etienne.trimaille at gmail.com> wrote:
>
>
> As you are using QGIS 3.14, I would suggest you to use qgis_process if 
> you can.
> Do you really want to use PyQGIS?
>
> But if you really need PyQGIS, maybe the path where your script is 
> located is not known to your standalone script ?
>
> Le lun. 2 nov. 2020 à 17:33,  a écrit :
>
>     Hello,
>
>     I work with Qgis 3.14 in Windows 10
>
>     I try to call a processing algorithm from a python stand alone app,
>     I want to run the following script from the custom Networks
>     algorithm provider but I have the message that the algorithm is
>     not known
>
>     How to register the provider in the processing registry to be able
>     to call it?
>
>
>         QgsApplication.setPrefixPath("C:/Program Files/QGIS
>     3.14/apps/qgis", True)
>         qgs = QgsApplication([], False)
>
>         qgs.initQgis()
>         import processing
>         from processing.core.Processing import Processing
>         Processing.initialize()
>
>
>
>     processing.run("Networks:musliw_simple_matrix",
>     {'NODES':'G:/BD_DREAL/2020/script_modele_resmultimodal_light   /noeuds_light_hdf_be.gpkg','NUM':'num','START_POINT':'708675.425564,7063676.157556
>     [EPSG:2154]','END_POINT':'708675.425564,7063676.157556[EPSG:2154]','DEMAND':1,'DAY':1,'TIME':'09:00:00','DEPARTURE':1,'OUTPUT':'G:/BD_DREAL/2020/script_modele_resmultimodal_light/matrice.txt','WRITE_MODE':0})
>
>     Thanks
>
>     Best regards
>
>     -- 
>
>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201103/7d2bada9/attachment.html>

From julien.cabieces at oslandia.com  Tue Nov  3 00:59:09 2020
From: julien.cabieces at oslandia.com (Julien Cabieces)
Date: Tue, 03 Nov 2020 09:59:09 +0100
Subject: [QGIS-Developer] oracle provider (testing)
In-Reply-To: <a9b56a07-5ed2-bd30-2b90-1b56fe400dec@duif.net>
References: <a9b56a07-5ed2-bd30-2b90-1b56fe400dec@duif.net>
Message-ID: <87sg9qyfxe.fsf@julien-laptop.home>


Hi,

As described here[0], you can use Docker quite easily to run an Oracle test instance.

You'd have to be patient after starting docker (and before running the
test data populating script), because it takes several minutes to the
database to be fully operationnal (you can check when it's completely
ready with docker logs command).

[0] https://github.com/qgis/QGIS/issues/39759#issuecomment-720985238

Regards,
Julien


> Hi Devs,
>
> Is anybody feeling self responsible (more or less) for the Oracle driver?
>
> Myself I apparently introduce an issue in it: https://github.com/qgis/QGIS/issues/39759 which seems easy to fix, but my problem is I do not have Oracle running....
>
> Are there any Oracle provider tests? And if so: which instance against are these tested against?
>
> Idea: use a QGIS server to install Oracle XE (dev/free edition isn't it?) and provide ssh access to the machine. Then users with a ssh key (Travis?) can create a ssh tunnel to the machine and connect to that (test) db?
> Thought to propose issues.qgis.org for that, as that is a beefy machine doing nothing (except keeping old issues/Redmine afloat). But.. that is a Debian 8.10, not sure if recent Oracle's can still run on it...
>
> Input?
>
> Regards,
>
> Richard Duivenvoorde
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From rldhont at gmail.com  Tue Nov  3 02:04:27 2020
From: rldhont at gmail.com (=?UTF-8?Q?Ren=c3=a9-Luc_Dhont?=)
Date: Tue, 3 Nov 2020 11:04:27 +0100
Subject: [QGIS-Developer] How to fix the color ramp item list for the UI
Message-ID: <d566a446-fc93-9102-335b-2bfbf480df66@gmail.com>

Hi devs,

I have an issue with the QGIS Raster Color Ramp UI, I can't get the 
color ramp item list set with PyQGIS.

I have a PyQGIS Script to set the Raster Color Ramp like it is defined 
in the pyQGIS cookbook. It works find for rendering and legend, but if I 
open the Raster layer properties and look at the Style tab, the color 
ramp list item is not exactly the same as the one I defined in  my 
script. Values and labels are saved, but the color is lost.

How to fixed the color ramp item list ?

The pyQGIS cookbook code [0] works for rendering but the UI loose the list.
If you try this code, you ill not get 2 items in the UI
```
fcn = QgsColorRampShader()
fcn.setColorRampType(QgsColorRampShader.Interpolated)
lst = [ QgsColorRampShader.ColorRampItem(0, QColor(0,255,0)),
       QgsColorRampShader.ColorRampItem(255, QColor(255,255,0)) ]
fcn.setColorRampItemList(lst)
shader = QgsRasterShader()
shader.setRasterShaderFunction(fcn)
renderer = QgsSingleBandPseudoColorRenderer(rlayer.dataProvider(), 1, 
shader)
rlayer.setRenderer(renderer)
rlayer.triggerRepaint()
```

Regards,
René-Luc

From matteo.ghetta at gmail.com  Wed Nov  4 00:40:33 2020
From: matteo.ghetta at gmail.com (matteo)
Date: Wed, 4 Nov 2020 09:40:33 +0100
Subject: [QGIS-Developer] Unable to build QGIS master due to multiple
 definitions of sipQgs3DAlgorithms
In-Reply-To: <CAECJsSqyS7jSLPPs2G2QNyHEB79kT_J=CxUSsMwjxkDbsF213A@mail.gmail.com>
References: <CAECJsSphyqUj-G0UTycHWYuaLagXHdrs08m=6wZiD93UmGUN=A@mail.gmail.com>
 <CA+T_MsJ7WMq-UN-r8fUH6WZ=FWDD=zjWiOf=W8VbovyQOOm0Jw@mail.gmail.com>
 <CAECJsSpS9d6NwGXg=i91izsXioeEoibKtmKCMyTSDdPDv--hKA@mail.gmail.com>
 <CAH=WbRAApZj-h0UWp5WqZO+7rxUDMhOupWML8nhBdkwHQywj8w@mail.gmail.com>
 <CAECJsSqyS7jSLPPs2G2QNyHEB79kT_J=CxUSsMwjxkDbsF213A@mail.gmail.com>
Message-ID: <bb3522ed-9a3d-a47c-3fad-a7d6c0b5c285@gmail.com>

Hi all,

similar issue here on Debian Sid. With Saber suggestions, the 
compilation fails:

/usr/bin/ld: CMakeFiles/qgis_3d.dir/qgswindow3dengine.cpp.o: in function 
`QgsWindow3DEngine::QgsWindow3DEngine(QObject*)':
qgswindow3dengine.cpp:(.text+0x9e): undefined reference to 
`Qt3DExtras::Qt3DWindow::Qt3DWindow(QScreen*)'
collect2: error: ld returned 1 exit status
make[2]: *** [src/3d/CMakeFiles/qgis_3d.dir/build.make:1321: 
output/lib/libqgis_3d.so.3.17.0] Error 1
make[1]: *** [CMakeFiles/Makefile2:6787: 
src/3d/CMakeFiles/qgis_3d.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....

I removed completely the build folder and stared from scratch. This is 
the cmake configuration:

cmake ../QGIS -DCMAKE_PREFIX_PATH=$(realpath 
../QGIS/external/qt3dextra-headers/cmake/Qt53DExtras/) 
-DQT5_3DEXTRA_INCLUDE_DIR=$(realpath ../QGIS/external/qt3dextra-headers) 
-DQT5_3DEXTRA_LIBRARY=/usr/lib/x86_64-linux-gnu/libQt53DExtras.so 
-DWITH_3D=True -DQt53DExtras_DIR=$(realpath 
../QGIS/external/qt3dextra-headers/cmake/Qt53DExtras/)

some other suggestions?

Cheers and thanks

Matteo

From jef at norbit.de  Wed Nov  4 00:55:37 2020
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Wed, 4 Nov 2020 09:55:37 +0100
Subject: [QGIS-Developer] Unable to build QGIS master due to multiple
 definitions of sipQgs3DAlgorithms
In-Reply-To: <bb3522ed-9a3d-a47c-3fad-a7d6c0b5c285@gmail.com>
References: <CAECJsSphyqUj-G0UTycHWYuaLagXHdrs08m=6wZiD93UmGUN=A@mail.gmail.com>
 <CA+T_MsJ7WMq-UN-r8fUH6WZ=FWDD=zjWiOf=W8VbovyQOOm0Jw@mail.gmail.com>
 <CAECJsSpS9d6NwGXg=i91izsXioeEoibKtmKCMyTSDdPDv--hKA@mail.gmail.com>
 <CAH=WbRAApZj-h0UWp5WqZO+7rxUDMhOupWML8nhBdkwHQywj8w@mail.gmail.com>
 <CAECJsSqyS7jSLPPs2G2QNyHEB79kT_J=CxUSsMwjxkDbsF213A@mail.gmail.com>
 <bb3522ed-9a3d-a47c-3fad-a7d6c0b5c285@gmail.com>
Message-ID: <20201104085537.6jbvdsjpfzv5nctl@norbit.de>

Hi Matteo,

On Wed, 04. Nov 2020 at 09:40:33 +0100, matteo wrote:
> similar issue here on Debian Sid. With Saber suggestions, the compilation
[..]
> cmake ../QGIS -DCMAKE_PREFIX_PATH=$(realpath
> ../QGIS/external/qt3dextra-headers/cmake/Qt53DExtras/)
> -DQT5_3DEXTRA_INCLUDE_DIR=$(realpath ../QGIS/external/qt3dextra-headers)
> -DQT5_3DEXTRA_LIBRARY=/usr/lib/x86_64-linux-gnu/libQt53DExtras.so
> -DWITH_3D=True -DQt53DExtras_DIR=$(realpath
> ../QGIS/external/qt3dextra-headers/cmake/Qt53DExtras/)

Why?  sid has the 3D extra headers.

Jürgen

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201104/c7807380/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201104/c7807380/attachment.ksh>

From delazj at gmail.com  Wed Nov  4 00:57:11 2020
From: delazj at gmail.com (DelazJ)
Date: Wed, 4 Nov 2020 09:57:11 +0100
Subject: [QGIS-Developer] Unable to build QGIS master due to multiple
 definitions of sipQgs3DAlgorithms
In-Reply-To: <bb3522ed-9a3d-a47c-3fad-a7d6c0b5c285@gmail.com>
References: <CAECJsSphyqUj-G0UTycHWYuaLagXHdrs08m=6wZiD93UmGUN=A@mail.gmail.com>
 <CA+T_MsJ7WMq-UN-r8fUH6WZ=FWDD=zjWiOf=W8VbovyQOOm0Jw@mail.gmail.com>
 <CAECJsSpS9d6NwGXg=i91izsXioeEoibKtmKCMyTSDdPDv--hKA@mail.gmail.com>
 <CAH=WbRAApZj-h0UWp5WqZO+7rxUDMhOupWML8nhBdkwHQywj8w@mail.gmail.com>
 <CAECJsSqyS7jSLPPs2G2QNyHEB79kT_J=CxUSsMwjxkDbsF213A@mail.gmail.com>
 <bb3522ed-9a3d-a47c-3fad-a7d6c0b5c285@gmail.com>
Message-ID: <CAECJsSpxM5GD+AdqtLXuCS2dtWWnbXUgEy0akdCR9hm5oo4=xA@mail.gmail.com>

Hi,


Le mer. 4 nov. 2020 à 09:40, matteo <matteo.ghetta at gmail.com> a écrit :

> Hi all,
>
> similar issue here on Debian Sid. With Saber suggestions, the
> compilation fails:
>
> I could give it a try this morning and it worked like a charm here, on
focal. Thanks Saber.

Regards,
Harrissou

/usr/bin/ld: CMakeFiles/qgis_3d.dir/qgswindow3dengine.cpp.o: in function
> `QgsWindow3DEngine::QgsWindow3DEngine(QObject*)':
> qgswindow3dengine.cpp:(.text+0x9e): undefined reference to
> `Qt3DExtras::Qt3DWindow::Qt3DWindow(QScreen*)'
> collect2: error: ld returned 1 exit status
> make[2]: *** [src/3d/CMakeFiles/qgis_3d.dir/build.make:1321:
> output/lib/libqgis_3d.so.3.17.0] Error 1
> make[1]: *** [CMakeFiles/Makefile2:6787:
> src/3d/CMakeFiles/qgis_3d.dir/all] Error 2
> make[1]: *** Waiting for unfinished jobs....
>
> I removed completely the build folder and stared from scratch. This is
> the cmake configuration:
>
> cmake ../QGIS -DCMAKE_PREFIX_PATH=$(realpath
> ../QGIS/external/qt3dextra-headers/cmake/Qt53DExtras/)
> -DQT5_3DEXTRA_INCLUDE_DIR=$(realpath ../QGIS/external/qt3dextra-headers)
> -DQT5_3DEXTRA_LIBRARY=/usr/lib/x86_64-linux-gnu/libQt53DExtras.so
> -DWITH_3D=True -DQt53DExtras_DIR=$(realpath
> ../QGIS/external/qt3dextra-headers/cmake/Qt53DExtras/)
>
> some other suggestions?
>
> Cheers and thanks
>
> Matteo
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201104/407d7ee8/attachment.html>

From matteo.ghetta at gmail.com  Wed Nov  4 02:49:18 2020
From: matteo.ghetta at gmail.com (matteo)
Date: Wed, 4 Nov 2020 11:49:18 +0100
Subject: [QGIS-Developer] Unable to build QGIS master due to multiple
 definitions of sipQgs3DAlgorithms
In-Reply-To: <20201104085537.6jbvdsjpfzv5nctl@norbit.de>
References: <CAECJsSphyqUj-G0UTycHWYuaLagXHdrs08m=6wZiD93UmGUN=A@mail.gmail.com>
 <CA+T_MsJ7WMq-UN-r8fUH6WZ=FWDD=zjWiOf=W8VbovyQOOm0Jw@mail.gmail.com>
 <CAECJsSpS9d6NwGXg=i91izsXioeEoibKtmKCMyTSDdPDv--hKA@mail.gmail.com>
 <CAH=WbRAApZj-h0UWp5WqZO+7rxUDMhOupWML8nhBdkwHQywj8w@mail.gmail.com>
 <CAECJsSqyS7jSLPPs2G2QNyHEB79kT_J=CxUSsMwjxkDbsF213A@mail.gmail.com>
 <bb3522ed-9a3d-a47c-3fad-a7d6c0b5c285@gmail.com>
 <20201104085537.6jbvdsjpfzv5nctl@norbit.de>
Message-ID: <cafa8651-1bf1-8b70-72af-4ce7ce41470e@gmail.com>

Hi Jürgen,

> Why?  sid has the 3D extra headers.

yep I know but something eventually went wrong. So I confirm that my 
cmake configuration is just:

cmake ../QGIS \
-DWITH_3D=TRUE

Cheers and thanks

Matteo

From apasotti at gmail.com  Thu Nov  5 03:02:10 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 5 Nov 2020 12:02:10 +0100
Subject: [QGIS-Developer] Issues with QgsDoubleValidator
Message-ID: <CAL5Q671zr4zQugQ88wM8PcVFknAYBuNPrQ3n-O6=iDpsf1mXyg@mail.gmail.com>

Hi,

I'm having issues to understand how this class is supposed to work.

There is also an error in the ctor:
https://github.com/qgis/QGIS/commit/887d544309d677937305d554bbbc09e6910780b1#r43862872

The class documentation states for ctors states:

\param decimal the number of decimals accepted by the validator but
this is not working as expected (unless I misunderstand it of course),
see:

https://github.com/qgis/QGIS/commit/893bfffc45ad18abeba243e9b5085f79d297d3f1#r43863047

I'm trying to use it for different numeric types, assuming that
settings "decimal" to 0 will validate integral types.

I've got no answer from the original developer yet so I wonder if
anyone knows more about this.

Thank you in advance.


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From rdmailings at duif.net  Thu Nov  5 06:24:53 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 5 Nov 2020 15:24:53 +0100
Subject: [QGIS-Developer] [GUI/usability] Add 'Copy Style (all)' to the
	layer context menu ?
Message-ID: <40539d02-3d6d-3389-dbdd-0afe737a4563@duif.net>

Hi users/devs

Am I the only one having troubles reaching the third context level if I 'just want to copy' a style from one layer to another?
See sceenshot. To be honest I never copy *one* of the 'Style Categories' (should I?) I always pick 'All Style Categories'.
To me it would be much easier to have a 'Copy Style' and 'Paste Style' in the first menu.
And if that would offend people, then at least in the second menu a 'Copy All Style Categories' and 'Paste Style Categories' in the second one (next to the Copy Style/Paste Style sub menu).

Is this something others would be happy with? Or NOT happy with?
Or am I just the only one with this itch :-)
(happy to pick this up myself)

Regards,

Richard Duivenvoorde

 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot-20201105151933-705x224.png
Type: image/png
Size: 42355 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201105/ff7ad836/attachment-0001.png>

From 46.i.s.o.64 at gmail.com  Thu Nov  5 07:15:09 2020
From: 46.i.s.o.64 at gmail.com (i-s-o)
Date: Thu, 5 Nov 2020 10:15:09 -0500
Subject: [QGIS-Developer] [GUI/usability] Add 'Copy Style (all)' to the
 layer context menu ?
In-Reply-To: <40539d02-3d6d-3389-dbdd-0afe737a4563@duif.net>
References: <40539d02-3d6d-3389-dbdd-0afe737a4563@duif.net>
Message-ID: <CACjCNZQHTCM0-E_QEWt=-EyRsr2ELAWA6hxvD_M8h2HhhtWvrQ@mail.gmail.com>

Yes, this is one of my most frequently used actions, and I would greatly
benefit if it were a one click action (once the context menu is up). In my
workflows, only 5% of the time I end up using a single category copy/paste.
In fact, the change you are proposing would even be beneficial in those
situations: once you copy the style in a single category, the next action
should be a "generic" paste (from the top level of the context menu) rather
than going three levels down and pick the same category, because at this
point, there is only one category of style on the clipboard.

In fact, I would go even one step further and assign this to a keyboard
shortcut Ctrl+{Alt,Shift}+C/Ctrl+{Alt,Shift}+V [whichever combination is
not currently used, if any].

On Thu, Nov 5, 2020 at 9:25 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> Hi users/devs
>
> Am I the only one having troubles reaching the third context level if I
> 'just want to copy' a style from one layer to another?
> See sceenshot. To be honest I never copy *one* of the 'Style Categories'
> (should I?) I always pick 'All Style Categories'.
> To me it would be much easier to have a 'Copy Style' and 'Paste Style' in
> the first menu.
> And if that would offend people, then at least in the second menu a 'Copy
> All Style Categories' and 'Paste Style Categories' in the second one (next
> to the Copy Style/Paste Style sub menu).
>
> Is this something others would be happy with? Or NOT happy with?
> Or am I just the only one with this itch :-)
> (happy to pick this up myself)
>
> Regards,
>
> Richard Duivenvoorde
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201105/0be4bd89/attachment.html>

From christian.roettger at eftas.com  Thu Nov  5 07:47:10 2020
From: christian.roettger at eftas.com (=?utf-8?B?RUZUQVMgQ2hyaXN0aWFuIFLDtnR0Z2Vy?=)
Date: Thu, 5 Nov 2020 15:47:10 +0000
Subject: [QGIS-Developer] [GUI/usability] Add 'Copy Style (all)' to the
 layer context menu ?
In-Reply-To: <CACjCNZQHTCM0-E_QEWt=-EyRsr2ELAWA6hxvD_M8h2HhhtWvrQ@mail.gmail.com>
References: <40539d02-3d6d-3389-dbdd-0afe737a4563@duif.net>
 <CACjCNZQHTCM0-E_QEWt=-EyRsr2ELAWA6hxvD_M8h2HhhtWvrQ@mail.gmail.com>
Message-ID: <976C257C340039468D96A32ACF20DB3614EAD49F@POSEIDON.eftasgmbh.local>

I agree with both.

Von: QGIS-Developer [mailto:qgis-developer-bounces at lists.osgeo.org] Im Auftrag von i-s-o
Gesendet: Donnerstag, 5. November 2020 16:15
An: qgis-developer <qgis-developer at lists.osgeo.org>
Betreff: Re: [QGIS-Developer] [GUI/usability] Add 'Copy Style (all)' to the layer context menu ?

Yes, this is one of my most frequently used actions, and I would greatly benefit if it were a one click action (once the context menu is up). In my workflows, only 5% of the time I end up using a single category copy/paste. In fact, the change you are proposing would even be beneficial in those situations: once you copy the style in a single category, the next action should be a "generic" paste (from the top level of the context menu) rather than going three levels down and pick the same category, because at this point, there is only one category of style on the clipboard.

In fact, I would go even one step further and assign this to a keyboard shortcut Ctrl+{Alt,Shift}+C/Ctrl+{Alt,Shift}+V [whichever combination is not currently used, if any].

On Thu, Nov 5, 2020 at 9:25 AM Richard Duivenvoorde <rdmailings at duif.net<mailto:rdmailings at duif.net>> wrote:
Hi users/devs

Am I the only one having troubles reaching the third context level if I 'just want to copy' a style from one layer to another?
See sceenshot. To be honest I never copy *one* of the 'Style Categories' (should I?) I always pick 'All Style Categories'.
To me it would be much easier to have a 'Copy Style' and 'Paste Style' in the first menu.
And if that would offend people, then at least in the second menu a 'Copy All Style Categories' and 'Paste Style Categories' in the second one (next to the Copy Style/Paste Style sub menu).

Is this something others would be happy with? Or NOT happy with?
Or am I just the only one with this itch :-)
(happy to pick this up myself)

Regards,

Richard Duivenvoorde


_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201105/0f7a77b2/attachment.html>

From mswope at gmail.com  Thu Nov  5 09:35:18 2020
From: mswope at gmail.com (Mike)
Date: Thu, 5 Nov 2020 10:35:18 -0700
Subject: [QGIS-Developer] QGIS LTR and FileGDB
Message-ID: <CAKTSvBgSU5uG87z18vqWDe=hokcp-0UbTbwNRDkqSp9wzVUjvA@mail.gmail.com>

Hi -
On the standalone windows downloads -
I was wondering what version of GDAL the latest QGIS LTR (3.10.11) was
built with? The reason it matters is we also get the FileGDB api from
https://download.osgeo.org/osgeo4w/x86_64/release/gdal/gdal-filegdb/

Or do the standalone installers include this (or an option to install it)?
(I can't just install it and see per IT policy)

v/r
-Mike
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201105/dcd8fb20/attachment.html>

From Jean-Francois.Bourdon at mffp.gouv.qc.ca  Thu Nov  5 12:27:26 2020
From: Jean-Francois.Bourdon at mffp.gouv.qc.ca (=?utf-8?B?Qm91cmRvbiwgSmVhbi1GcmFuw6dvaXMgKERJRik=?=)
Date: Thu, 5 Nov 2020 20:27:26 +0000
Subject: [QGIS-Developer] [GUI/usability] Add 'Copy Style (all)' to the
 layer context menu ?
In-Reply-To: <976C257C340039468D96A32ACF20DB3614EAD49F@POSEIDON.eftasgmbh.local>
References: <40539d02-3d6d-3389-dbdd-0afe737a4563@duif.net>
 <CACjCNZQHTCM0-E_QEWt=-EyRsr2ELAWA6hxvD_M8h2HhhtWvrQ@mail.gmail.com>
 <976C257C340039468D96A32ACF20DB3614EAD49F@POSEIDON.eftasgmbh.local>
Message-ID: <QB1PR01MB2948FC4264EA530E639FE948B3EE0@QB1PR01MB2948.CANPRD01.PROD.OUTLOOK.COM>

I also agree with Richard. Having to go to the thrird level some something as useful is a bit cumbersom. I would prefer having a copy/paste style in the first level, but having it at the second level is ok. I copy/paste style more often with rasters and it's more straightforward than with vectors with only two levels. I also agree that a keyboard shortcut would be nice.

Jean-François Bourdon, ing.f.
Analyste en télédétection
Direction des inventaires forestiers
Ministère des Forêts, de la Faune et des Parcs
5700, 4e Avenue Ouest, local A-108
Québec (Québec) G1H 6R1
Téléphone : 418 627-8669, poste 4304
jean-francois.bourdon at mffp.gouv.qc.ca
mffp.gouv.qc.ca<http://www.mffp.gouv.qc.ca/accueil.jsp>

De : QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> De la part de EFTAS Christian Röttger
Envoyé : 5 novembre 2020 10:47
À : qgis-developer <qgis-developer at lists.osgeo.org>
Objet : Re: [QGIS-Developer] [GUI/usability] Add 'Copy Style (all)' to the layer context menu ?

I agree with both.

Von: QGIS-Developer [mailto:qgis-developer-bounces at lists.osgeo.org] Im Auftrag von i-s-o
Gesendet: Donnerstag, 5. November 2020 16:15
An: qgis-developer <qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>>
Betreff: Re: [QGIS-Developer] [GUI/usability] Add 'Copy Style (all)' to the layer context menu ?

Yes, this is one of my most frequently used actions, and I would greatly benefit if it were a one click action (once the context menu is up). In my workflows, only 5% of the time I end up using a single category copy/paste. In fact, the change you are proposing would even be beneficial in those situations: once you copy the style in a single category, the next action should be a "generic" paste (from the top level of the context menu) rather than going three levels down and pick the same category, because at this point, there is only one category of style on the clipboard.

In fact, I would go even one step further and assign this to a keyboard shortcut Ctrl+{Alt,Shift}+C/Ctrl+{Alt,Shift}+V [whichever combination is not currently used, if any].

On Thu, Nov 5, 2020 at 9:25 AM Richard Duivenvoorde <rdmailings at duif.net<mailto:rdmailings at duif.net>> wrote:
Hi users/devs

Am I the only one having troubles reaching the third context level if I 'just want to copy' a style from one layer to another?
See sceenshot. To be honest I never copy *one* of the 'Style Categories' (should I?) I always pick 'All Style Categories'.
To me it would be much easier to have a 'Copy Style' and 'Paste Style' in the first menu.
And if that would offend people, then at least in the second menu a 'Copy All Style Categories' and 'Paste Style Categories' in the second one (next to the Copy Style/Paste Style sub menu).

Is this something others would be happy with? Or NOT happy with?
Or am I just the only one with this itch :-)
(happy to pick this up myself)

Regards,

Richard Duivenvoorde


_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer<https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&data=04%7C01%7C%7C8fed94b526b04bd3cc9308d881a4f088%7C8705e97737814f4790e1c84c8b884da1%7C0%7C0%7C637401892708982913%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=O%2BEmxD%2FJ3WJGOGMm84MQDh7GdbQNylqk8sapJ0z7fQk%3D&reserved=0>
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer<https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fqgis-developer&data=04%7C01%7C%7C8fed94b526b04bd3cc9308d881a4f088%7C8705e97737814f4790e1c84c8b884da1%7C0%7C0%7C637401892708982913%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=O%2BEmxD%2FJ3WJGOGMm84MQDh7GdbQNylqk8sapJ0z7fQk%3D&reserved=0>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201105/519c67eb/attachment.html>

From jef at norbit.de  Thu Nov  5 13:48:17 2020
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Thu, 5 Nov 2020 22:48:17 +0100
Subject: [QGIS-Developer] QGIS LTR and FileGDB
In-Reply-To: <CAKTSvBgSU5uG87z18vqWDe=hokcp-0UbTbwNRDkqSp9wzVUjvA@mail.gmail.com>
References: <CAKTSvBgSU5uG87z18vqWDe=hokcp-0UbTbwNRDkqSp9wzVUjvA@mail.gmail.com>
Message-ID: <20201105214817.hjj3nwxk4zupvrk5@norbit.de>

Hi Mike,

On Thu, 05. Nov 2020 at 10:35:18 -0700, Mike wrote:
> On the standalone windows downloads -
> I was wondering what version of GDAL the latest QGIS LTR (3.10.11) was
> built with? The reason it matters is we also get the FileGDB api from
> https://download.osgeo.org/osgeo4w/x86_64/release/gdal/gdal-filegdb/

The standalones are built from the osgeo4w packages - that means everything
qgis-full / qgis-ltr-full depends.  filegdb however is not included, but GDAL
has openfilegdb support builtin.


Jürgen

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201105/a17615dd/attachment-0001.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201105/a17615dd/attachment-0001.ksh>

From mswope at gmail.com  Thu Nov  5 18:07:44 2020
From: mswope at gmail.com (Mike)
Date: Thu, 5 Nov 2020 19:07:44 -0700
Subject: [QGIS-Developer] QGIS LTR and FileGDB
In-Reply-To: <20201105214817.hjj3nwxk4zupvrk5@norbit.de>
References: <CAKTSvBgSU5uG87z18vqWDe=hokcp-0UbTbwNRDkqSp9wzVUjvA@mail.gmail.com>
 <20201105214817.hjj3nwxk4zupvrk5@norbit.de>
Message-ID: <CAKTSvBhfkJf1JxhHafk+a9+RPRE5V9w9uD3EKq91K75SYUri6w@mail.gmail.com>

Ok. I was mostly asking what version GDAL it was built with. Since then I
also get the two .dll files from gdal-filegdb and place them in the install
location so I can have FIleGDB write support.

I did find the answer (3.1.4).


On Thu, Nov 5, 2020, 14:48 Jürgen E. Fischer <jef at norbit.de> wrote:

> Hi Mike,
>
> On Thu, 05. Nov 2020 at 10:35:18 -0700, Mike wrote:
> > On the standalone windows downloads -
> > I was wondering what version of GDAL the latest QGIS LTR (3.10.11) was
> > built with? The reason it matters is we also get the FileGDB api from
> > https://download.osgeo.org/osgeo4w/x86_64/release/gdal/gdal-filegdb/
>
> The standalones are built from the osgeo4w packages - that means everything
> qgis-full / qgis-ltr-full depends.  filegdb however is not included, but
> GDAL
> has openfilegdb support builtin.
>
>
> Jürgen
>
> --
> Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden
> https://www.norbit.de
> QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201105/d9022e5d/attachment.html>

From alister.hood at gmail.com  Fri Nov  6 01:43:12 2020
From: alister.hood at gmail.com (Alister Hood)
Date: Fri, 6 Nov 2020 22:43:12 +1300
Subject: [QGIS-Developer] Plugin authors - can/should you all give your
	plugin toolbars a tooltip?
Message-ID: <CAF6hL+Uw2g5qCzO=M6Dh1LzhC4__CoELL_TavOfr4A_MRDEzSQ@mail.gmail.com>

Hi everyone,

As described in this old ticket:

https://github.com/qgis/QGIS/issues/17019
"With a lot of plugins installed, the number of toolbars and panels soon
reach a confusing stage where users would like to be able to easily clean
and adjust their working environment according to their actual
needs.Disabling/enabling toolbars is a trial-and-error game, cause it's not
easy to identify which toolbar has which name in the list.
In addition to that, the dropdowns close after disabling/enabling each
single item, so adjusting toolbars/panels needs a lot of repetitive actions
(and even more of them, when the wrong toolbar/panel was chosen
beforehand)."

QGIS does now display tooltips on the handles of the built-in toolbars, but
none of the plugin toolbars I see have tooltips yet.  I doubt there is any
reason they shouldn't - it's probably just that the plugin builder doesn't
include the code for it.

If you maintain a plugin which provides a toolbar, it seems that the fix is
typically as simple as adding something like this in your plugin __init__
where you create the toolbar:
        self.toolbar.setToolTip(u'FlowEstimator Toolbar')
I'm sure there are plenty of users like me who will appreciate it if
everyone starts doing this!


Thanks,
Alister
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201106/71c0ae9a/attachment.html>

From motta.luiz at gmail.com  Fri Nov  6 05:47:07 2020
From: motta.luiz at gmail.com (Luiz Motta)
Date: Fri, 6 Nov 2020 10:47:07 -0300
Subject: [QGIS-Developer] Change values Temporal Controller Panel
Message-ID: <CAC93zU2GcE8M--+Jy+4BP5QdhUgKqnBG80JNSYR6vxCwnhMgog@mail.gmail.com>

Hi All,

 I would like to change the values of the Temporal Controller Panel in my
plugin.

How do I change the Range of datetimes and the values of step and unit time
using python?

 Regards,
 Luiz Motta
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201106/372bb5a1/attachment.html>

From rdmailings at duif.net  Fri Nov  6 06:08:34 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 6 Nov 2020 15:08:34 +0100
Subject: [QGIS-Developer] Change values Temporal Controller Panel
In-Reply-To: <CAC93zU2GcE8M--+Jy+4BP5QdhUgKqnBG80JNSYR6vxCwnhMgog@mail.gmail.com>
References: <CAC93zU2GcE8M--+Jy+4BP5QdhUgKqnBG80JNSYR6vxCwnhMgog@mail.gmail.com>
Message-ID: <011c078d-74ff-c97b-9538-a672332d7c4d@duif.net>

Hi Luiz,

We have fixed stuff to be able to use temporal stuff in pyqgis just before 3.16

I wrote some docs (with exampless) in the QGIS Documentation:

https://github.com/qgis/QGIS-Documentation/pull/5521

It still fails in Travis, but in this commit is example code:

https://github.com/qgis/QGIS-Documentation/blob/4ebc236d06a7ff2b6454ea5b8f94929b2b8423d0/docs/pyqgis_developer_cookbook/temporal_data.rst

Hope this helps,

Regards,

Richard Duivenvoorde


On 11/6/20 2:47 PM, Luiz Motta wrote:
> Hi All,
>  
>  I would like to change the values of the Temporal Controller Panel in my plugin.
> 
> How do I change the Range of datetimes and the values of step and unit time using python?
> 
>  Regards,
>  Luiz Motta
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


From luipir at gmail.com  Fri Nov  6 06:23:48 2020
From: luipir at gmail.com (Luigi Pirelli)
Date: Fri, 6 Nov 2020 15:23:48 +0100
Subject: [QGIS-Developer] [GUI/usability] Add 'Copy Style (all)' to the
 layer context menu ?
In-Reply-To: <40539d02-3d6d-3389-dbdd-0afe737a4563@duif.net>
References: <40539d02-3d6d-3389-dbdd-0afe737a4563@duif.net>
Message-ID: <CAFO80_r9D1F5hsavW+Kqet44h9WMGbojbQyPcLzsWb8YxO0R5A@mail.gmail.com>

+1 for me... I don't use it a lot... but when I used it I thought the same.

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Thu, 5 Nov 2020 at 15:25, Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> Hi users/devs
>
> Am I the only one having troubles reaching the third context level if I
> 'just want to copy' a style from one layer to another?
> See sceenshot. To be honest I never copy *one* of the 'Style Categories'
> (should I?) I always pick 'All Style Categories'.
> To me it would be much easier to have a 'Copy Style' and 'Paste Style' in
> the first menu.
> And if that would offend people, then at least in the second menu a 'Copy
> All Style Categories' and 'Paste Style Categories' in the second one (next
> to the Copy Style/Paste Style sub menu).
>
> Is this something others would be happy with? Or NOT happy with?
> Or am I just the only one with this itch :-)
> (happy to pick this up myself)
>
> Regards,
>
> Richard Duivenvoorde
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201106/09585e54/attachment.html>

From motta.luiz at gmail.com  Fri Nov  6 07:41:52 2020
From: motta.luiz at gmail.com (Luiz Motta)
Date: Fri, 6 Nov 2020 12:41:52 -0300
Subject: [QGIS-Developer] Fwd:  Change values Temporal Controller Panel
In-Reply-To: <CAC93zU0LwK4gcETHuLQEsL11SBf_SDrTDO_LWLFggL0uM93BAw@mail.gmail.com>
References: <CAC93zU2GcE8M--+Jy+4BP5QdhUgKqnBG80JNSYR6vxCwnhMgog@mail.gmail.com>
 <011c078d-74ff-c97b-9538-a672332d7c4d@duif.net>
 <CAC93zU0LwK4gcETHuLQEsL11SBf_SDrTDO_LWLFggL0uM93BAw@mail.gmail.com>
Message-ID: <CAC93zU2kDoy27umtpbnJQYCRjnkTu8uPoF2Ro8vvgL6F9xwc=g@mail.gmail.com>

Hi Richard,

Your code was exactly what I needed.

Thanks so much!

Regards,
Luiz Motta



Em sex., 6 de nov. de 2020 às 11:08, Richard Duivenvoorde <
rdmailings at duif.net> escreveu:

> Hi Luiz,
>
> We have fixed stuff to be able to use temporal stuff in pyqgis just before
> 3.16
>
> I wrote some docs (with exampless) in the QGIS Documentation:
>
> https://github.com/qgis/QGIS-Documentation/pull/5521
>
> It still fails in Travis, but in this commit is example code:
>
>
> https://github.com/qgis/QGIS-Documentation/blob/4ebc236d06a7ff2b6454ea5b8f94929b2b8423d0/docs/pyqgis_developer_cookbook/temporal_data.rst
>
> Hope this helps,
>
> Regards,
>
> Richard Duivenvoorde
>
>
> On 11/6/20 2:47 PM, Luiz Motta wrote:
> > Hi All,
> >
> >  I would like to change the values of the Temporal Controller Panel in
> my plugin.
> >
> > How do I change the Range of datetimes and the values of step and unit
> time using python?
> >
> >  Regards,
> >  Luiz Motta
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201106/189a317e/attachment-0001.html>

From anitagraser at gmx.at  Fri Nov  6 07:56:38 2020
From: anitagraser at gmx.at (Anita Graser)
Date: Fri, 6 Nov 2020 16:56:38 +0100
Subject: [QGIS-Developer] [GUI/usability] Add 'Copy Style (all)' to the
 layer context menu ?
In-Reply-To: <40539d02-3d6d-3389-dbdd-0afe737a4563@duif.net>
References: <40539d02-3d6d-3389-dbdd-0afe737a4563@duif.net>
Message-ID: <693eabcf-b368-8cff-0b79-4a0511ec8e8f@gmx.at>

Thanks Richard,

On 05.11.2020 15:24, Richard Duivenvoorde wrote:
> ...
> To me it would be much easier to have a 'Copy Style' and 'Paste Style' in the first menu.
> ...
> Is this something others would be happy with?

Huge +1 from me!

Regards,

Anita



From adenaculture at gmail.com  Fri Nov  6 11:50:44 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Fri, 6 Nov 2020 14:50:44 -0500
Subject: [QGIS-Developer] QGIS, DateTime and TimeZones
In-Reply-To: <CAB28AshdRvkvD9keAoZ==UJo5k9cPYzC9n1Nm7JSZ6LFp2hhWw@mail.gmail.com>
References: <a16fd2c5-3f32-55d1-d64c-db7e1c5ea1f4@duif.net>
 <CAB28AshdRvkvD9keAoZ==UJo5k9cPYzC9n1Nm7JSZ6LFp2hhWw@mail.gmail.com>
Message-ID: <CABPxTTo8mj+pLsxu0MZSXvyCo2JdSYuh8g9j2E-q4+ha1Xr4=g@mail.gmail.com>

This was a good discussion that I think is important and wanted to see if
it has resulted in any development for better timezone support.

Currently I have a request to provide time conversion tools and coordinate
to timezone lookup capability. As I was looking at the python libraries out
there it appears that timezonefinder is probably the best for coordinate to
timezone support. The only problem is that it is around 50  Mb. My
customers generally have great difficulty getting additional libraries
installed in QGIS required to run a plugin so I make sure I try to use the
libraries already installed with QGIS or else include them with my plugins.
I think 50 Mb probably exceeds the maximum size a plugin should be. I could
do it for my customers, but it probably would not work as a public plugin.

So is there any current timezone development going on? What are my options
for coordinate to timezone lookup? If timezonefinder works for my needs is
it possible to have it included as a part of the QGIS distribution? Is
there something better?

Have a wonderful weekend!!!

Calvin

On Tue, Sep 8, 2020 at 8:20 PM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Tue, 8 Sep 2020 at 23:40, Richard Duivenvoorde <rdmailings at duif.net>
> wrote:
> >
> > Hi Devs,
> >
> > I was hitting some timezone issues when I received some csv data in
> which there are timestamps like:
> > "2020-07-25 20:21:38 UTC"
> > Apparently if you read this into QGIS, the UTC IS interpreted, and you
> get a DateTime in your data which is (in my case) -2 hours(CET) off (well
> in some parts of QGIS)
> >
> > This plays havoc if you for example are going to use this data in the
> timecontroller or expressions, see
> > https://github.com/qgis/QGIS/issues/38647
> >
> > So I think that now the TimeController is part of QGIS, and people will
> start to play with Time-based data more and more (from TimeZone aware
> datasets like csv and postgres) we will run into issues like above.
> >
> > Is there something we can do to make QGIS timezone aware?
> > OR should we stay far away from it (timezones are hell)...
> > OR should we wait with it after QGIS 4
>
> This is a good discussion, and a very complex issue.
>
> Here's some summary points from a recent off-list discussion I had
> regarding this very topic:
>
> -  we don't expose time zones anywhere in qgis. while the underlying
> QDateTime class has good support for timezone handling, there's
> no-where in QGIS you can "see " the time zone for a datetime value,
> and there's no functionality present in -the expression engine or
> processing to work with time zones/manipulate them.
> - different data providers are handling time zones differently, but
> most are just giving date time values as a "local time"/"no time zone
> available" value. As described above, this inconsistency leads to
> issues when you compare values from different sources. Even though the
> look the same in QGIS, they aren't!!
> - some underlying data sources just don't have any time zone
> capabilities, or have limited capabilities. E.g. GDAL has a flag if a
> datetime is UTC or "not utc/unknown", and that's it.
>
> I think we have no choice but to start exposing time zone information
> to users everywhere we have dates, and move to treating dates without
> a timezone as being in "local time" (which may cause issues if
> projects + data are shared between users in different time zones). We
> should add timezone functionality to the expression engine, and
> algorithms for converting time zones to processing. We'd also need to
> add a "manual time zone override" option to temporal enabled layers --
> so for those sources with ambiguous time zone information the user has
> some capacity to manually pick the correct time zone.
>
> It's definitely achievable, but it's not a trivial amount of work. I'd
> estimate we're looking at ~5-7 days to do this properly (and it needs
> to be done properly, covering all uses of datetime values all
> throughout QGIS and the different data providers! Hacking in
> one-by-one fixes in individual data providers will just make the
> situation worse)...
>
> Nyall
>
>
>
>
>
>
> >
> > Regards,
> >
> > Richard Duivenvoorde
> >
> >
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201106/347cb418/attachment.html>

From andreaerdna at libero.it  Fri Nov  6 12:43:27 2020
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Fri, 6 Nov 2020 13:43:27 -0700 (MST)
Subject: [QGIS-Developer] Plugin authors - can/should you all give your
 plugin toolbars a tooltip?
In-Reply-To: <CAF6hL+Uw2g5qCzO=M6Dh1LzhC4__CoELL_TavOfr4A_MRDEzSQ@mail.gmail.com>
References: <CAF6hL+Uw2g5qCzO=M6Dh1LzhC4__CoELL_TavOfr4A_MRDEzSQ@mail.gmail.com>
Message-ID: <1604695407230-0.post@n6.nabble.com>

Hi Alister,
I agree with you and I think the tool tip for a plugin toolbar should be
"mandatory", cause is the only way for the user to know which plugin the
toolbar belongs to.

Maybe the addToolBar(name) method of the QgisInterface class could simply 
set the QToolBar tooltip property using the same provided toolbar name, so
every plugin toolbar will have a default tooltip.


Regards.

Andrea



Alister Hood-2 wrote
> QGIS does now display tooltips on the handles of the built-in toolbars,
> but
> none of the plugin toolbars I see have tooltips yet.  I doubt there is any
> reason they shouldn't - it's probably just that the plugin builder doesn't
> include the code for it.
> 
> If you maintain a plugin which provides a toolbar, it seems that the fix
> is
> typically as simple as adding something like this in your plugin __init__
> where you create the toolbar:
>         self.toolbar.setToolTip(u'FlowEstimator Toolbar')
> I'm sure there are plenty of users like me who will appreciate it if
> everyone starts doing this!





--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From rdmailings at duif.net  Fri Nov  6 13:31:41 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 6 Nov 2020 22:31:41 +0100
Subject: [QGIS-Developer] c++ QgsMessageLog::logMessage and escaping < and >
	chars
Message-ID: <29862699-32ba-34eb-0330-538089832d51@duif.net>

Hi Devs,

I'm trying to debug some queries in the oracle provider.
They get logged in the QgsMessageLog, but often contain parts like " AND rownum <= 2"

Because the message log is a html-pane, these queries/messages are being truncated at the '<' or '>' character (I think as part of creating 'safe' html texts?)
I've seen this in python plugins too and there I search-replaced these myself.
But it is tedious to do that in every logMessage call.
But I was wondering if this could be done in QgsMessageLog itself? So in incoming messages the < and > are replaced by '&lt;' ad '&gt;' ?

Is this something easily done? Or is there something against this?

Regards,

Richard Duivenvoorde

From tim at kartoza.com  Sat Nov  7 14:39:55 2020
From: tim at kartoza.com (Tim Sutton)
Date: Sat, 7 Nov 2020 22:39:55 +0000
Subject: [QGIS-Developer] [GUI/usability] Add 'Copy Style (all)' to the
 layer context menu ?
In-Reply-To: <693eabcf-b368-8cff-0b79-4a0511ec8e8f@gmx.at>
References: <40539d02-3d6d-3389-dbdd-0afe737a4563@duif.net>
 <693eabcf-b368-8cff-0b79-4a0511ec8e8f@gmx.at>
Message-ID: <CAES-DZTjt7S1eBUEEKbg5-3k4DSk9EkWtiLmptDutwGDtOveOQ@mail.gmail.com>

Also big +1 from me, I use this action a lot and would appreciate
streamlining it.

Regards

Tim

On Fri, Nov 6, 2020 at 3:56 PM Anita Graser <anitagraser at gmx.at> wrote:

> Thanks Richard,
>
> On 05.11.2020 15:24, Richard Duivenvoorde wrote:
> > ...
> > To me it would be much easier to have a 'Copy Style' and 'Paste Style'
> in the first menu.
> > ...
> > Is this something others would be happy with?
>
> Huge +1 from me!
>
> Regards,
>
> Anita
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
------------------------------------------------------------------------------------------
​

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201107/f5102dc2/attachment.html>

From tim at kartoza.com  Sat Nov  7 14:41:56 2020
From: tim at kartoza.com (Tim Sutton)
Date: Sat, 7 Nov 2020 22:41:56 +0000
Subject: [QGIS-Developer] Fwd: Change values Temporal Controller Panel
In-Reply-To: <CAC93zU2kDoy27umtpbnJQYCRjnkTu8uPoF2Ro8vvgL6F9xwc=g@mail.gmail.com>
References: <CAC93zU2GcE8M--+Jy+4BP5QdhUgKqnBG80JNSYR6vxCwnhMgog@mail.gmail.com>
 <011c078d-74ff-c97b-9538-a672332d7c4d@duif.net>
 <CAC93zU0LwK4gcETHuLQEsL11SBf_SDrTDO_LWLFggL0uM93BAw@mail.gmail.com>
 <CAC93zU2kDoy27umtpbnJQYCRjnkTu8uPoF2Ro8vvgL6F9xwc=g@mail.gmail.com>
Message-ID: <CAES-DZRL=CotAQ+S-W5+VCKN9JX-+y2Cx82o2zNfA1CEStwvYg@mail.gmail.com>

Hi Richard

Note that your example contains a duplicate import:

        QgsMapRendererCustomPainterJob,
        QgsProject,
        QgsMapRendererCustomPainterJob,

Regards


Tim

On Fri, Nov 6, 2020 at 3:42 PM Luiz Motta <motta.luiz at gmail.com> wrote:

> Hi Richard,
>
> Your code was exactly what I needed.
>
> Thanks so much!
>
> Regards,
> Luiz Motta
>
>
>
> Em sex., 6 de nov. de 2020 às 11:08, Richard Duivenvoorde <
> rdmailings at duif.net> escreveu:
>
>> Hi Luiz,
>>
>> We have fixed stuff to be able to use temporal stuff in pyqgis just
>> before 3.16
>>
>> I wrote some docs (with exampless) in the QGIS Documentation:
>>
>> https://github.com/qgis/QGIS-Documentation/pull/5521
>>
>> It still fails in Travis, but in this commit is example code:
>>
>>
>> https://github.com/qgis/QGIS-Documentation/blob/4ebc236d06a7ff2b6454ea5b8f94929b2b8423d0/docs/pyqgis_developer_cookbook/temporal_data.rst
>>
>> Hope this helps,
>>
>> Regards,
>>
>> Richard Duivenvoorde
>>
>>
>> On 11/6/20 2:47 PM, Luiz Motta wrote:
>> > Hi All,
>> >
>> >  I would like to change the values of the Temporal Controller Panel in
>> my plugin.
>> >
>> > How do I change the Range of datetimes and the values of step and unit
>> time using python?
>> >
>> >  Regards,
>> >  Luiz Motta
>> >
>> > _______________________________________________
>> > QGIS-Developer mailing list
>> > QGIS-Developer at lists.osgeo.org
>> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >
>>
>> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
------------------------------------------------------------------------------------------
​

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201107/8e467a1e/attachment.html>

From maps at hanfastolfe.com  Sun Nov  8 11:48:58 2020
From: maps at hanfastolfe.com (Cory Albrecht)
Date: Sun, 8 Nov 2020 14:48:58 -0500
Subject: [QGIS-Developer] QGIS Website down
Message-ID: <CAMW5rYKtUBvH41Aq=ShOtdfGap5XBs2n23+xUZb6z6sBHNtbyw@mail.gmail.com>

Hello,

The QGIS.org website has been down since at least 13:30 EST. Does anybody
have any details as to when it will come back online?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201108/4f926968/attachment.html>

From rdmailings at duif.net  Sun Nov  8 12:00:55 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sun, 8 Nov 2020 21:00:55 +0100
Subject: [QGIS-Developer] QGIS Website down
In-Reply-To: <CAMW5rYKtUBvH41Aq=ShOtdfGap5XBs2n23+xUZb6z6sBHNtbyw@mail.gmail.com>
References: <CAMW5rYKtUBvH41Aq=ShOtdfGap5XBs2n23+xUZb6z6sBHNtbyw@mail.gmail.com>
Message-ID: <2dc09e43-4a19-c910-b464-46c6c2fe3dd9@duif.net>

On 11/8/20 8:48 PM, Cory Albrecht wrote:
> Hello,
> 
> The QGIS.org website has been down since at least 13:30 EST. Does anybody have any details as to when it will come back online?

We are busy with it

https://lists.osgeo.org/pipermail/qgis-psc/2020-November/009131.html

Regards,

Richard Duivenvoorde

From tim at kartoza.com  Sun Nov  8 12:11:27 2020
From: tim at kartoza.com (Tim Sutton)
Date: Sun, 8 Nov 2020 20:11:27 +0000
Subject: [QGIS-Developer] QGIS Website down
In-Reply-To: <2dc09e43-4a19-c910-b464-46c6c2fe3dd9@duif.net>
References: <CAMW5rYKtUBvH41Aq=ShOtdfGap5XBs2n23+xUZb6z6sBHNtbyw@mail.gmail.com>
 <2dc09e43-4a19-c910-b464-46c6c2fe3dd9@duif.net>
Message-ID: <CAES-DZQMPb67WE53+jTCx4hz9=iQ+b1oMy6S3zq-dHfZPPksDA@mail.gmail.com>

It is online again

Regards

Tim

On Sun, Nov 8, 2020 at 8:01 PM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> On 11/8/20 8:48 PM, Cory Albrecht wrote:
> > Hello,
> >
> > The QGIS.org website has been down since at least 13:30 EST. Does
> anybody have any details as to when it will come back online?
>
> We are busy with it
>
> https://lists.osgeo.org/pipermail/qgis-psc/2020-November/009131.html
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
------------------------------------------------------------------------------------------
​

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201108/cd610794/attachment.html>

From maps at hanfastolfe.com  Sun Nov  8 12:33:17 2020
From: maps at hanfastolfe.com (Cory Albrecht)
Date: Sun, 8 Nov 2020 15:33:17 -0500
Subject: [QGIS-Developer] QGIS Website down
In-Reply-To: <CAES-DZQMPb67WE53+jTCx4hz9=iQ+b1oMy6S3zq-dHfZPPksDA@mail.gmail.com>
References: <CAMW5rYKtUBvH41Aq=ShOtdfGap5XBs2n23+xUZb6z6sBHNtbyw@mail.gmail.com>
 <2dc09e43-4a19-c910-b464-46c6c2fe3dd9@duif.net>
 <CAES-DZQMPb67WE53+jTCx4hz9=iQ+b1oMy6S3zq-dHfZPPksDA@mail.gmail.com>
Message-ID: <CAMW5rYK24V=M0ewLCcag=D9tOdRM5p9jK6izdLV=RaDBKqagLQ@mail.gmail.com>

It is online for me, too, except the Ubunut pkg repos don't seem to be
correct? Both "ubuntu-ltr" and "ubuntu-nightly-ltr" are giving me 3.16
revision 43b64b13f3 <https://github.com/qgis/QGIS/commit/43b64b13f3> instead
of 3.10.




On Sun, Nov 8, 2020 at 3:11 PM Tim Sutton <tim at kartoza.com> wrote:

> It is online again
>
> Regards
>
> Tim
>
> On Sun, Nov 8, 2020 at 8:01 PM Richard Duivenvoorde <rdmailings at duif.net>
> wrote:
>
>> On 11/8/20 8:48 PM, Cory Albrecht wrote:
>> > Hello,
>> >
>> > The QGIS.org website has been down since at least 13:30 EST. Does
>> anybody have any details as to when it will come back online?
>>
>> We are busy with it
>>
>> https://lists.osgeo.org/pipermail/qgis-psc/2020-November/009131.html
>>
>> Regards,
>>
>> Richard Duivenvoorde
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> --
>
> ------------------------------------------------------------------------------------------
> ​
>
> Tim Sutton
> Visit http://kartoza.com to find out about open source:
>  * Desktop GIS programming services
>  * Geospatial web development
> * GIS Training
> * Consulting Services
> Tim is a member of the QGIS Project Steering Committee
>
> -------------------------------------------------------------------------------------------
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201108/fb00118e/attachment.html>

From regis.haubourg at gmail.com  Sun Nov  8 13:25:39 2020
From: regis.haubourg at gmail.com (=?UTF-8?Q?R=C3=A9gis_Haubourg?=)
Date: Sun, 8 Nov 2020 22:25:39 +0100
Subject: [QGIS-Developer] QGIS Website down
In-Reply-To: <CAMW5rYK24V=M0ewLCcag=D9tOdRM5p9jK6izdLV=RaDBKqagLQ@mail.gmail.com>
References: <CAMW5rYKtUBvH41Aq=ShOtdfGap5XBs2n23+xUZb6z6sBHNtbyw@mail.gmail.com>
 <2dc09e43-4a19-c910-b464-46c6c2fe3dd9@duif.net>
 <CAES-DZQMPb67WE53+jTCx4hz9=iQ+b1oMy6S3zq-dHfZPPksDA@mail.gmail.com>
 <CAMW5rYK24V=M0ewLCcag=D9tOdRM5p9jK6izdLV=RaDBKqagLQ@mail.gmail.com>
Message-ID: <CABgOYCe24cqEB4WCVuQ=XQ_gmRgThiH0keznki3q_PW+nKEzfw@mail.gmail.com>

Thanks so much Tim and Richard for having dealt with it !
👍
Régis

Le dim. 8 nov. 2020 à 21:44, Cory Albrecht <maps at hanfastolfe.com> a écrit :

> It is online for me, too, except the Ubunut pkg repos don't seem to be
> correct? Both "ubuntu-ltr" and "ubuntu-nightly-ltr" are giving me 3.16
> revision 43b64b13f3 <https://github.com/qgis/QGIS/commit/43b64b13f3> instead
> of 3.10.
>
>
>
>
> On Sun, Nov 8, 2020 at 3:11 PM Tim Sutton <tim at kartoza.com> wrote:
>
>> It is online again
>>
>> Regards
>>
>> Tim
>>
>> On Sun, Nov 8, 2020 at 8:01 PM Richard Duivenvoorde <rdmailings at duif.net>
>> wrote:
>>
>>> On 11/8/20 8:48 PM, Cory Albrecht wrote:
>>> > Hello,
>>> >
>>> > The QGIS.org website has been down since at least 13:30 EST. Does
>>> anybody have any details as to when it will come back online?
>>>
>>> We are busy with it
>>>
>>> https://lists.osgeo.org/pipermail/qgis-psc/2020-November/009131.html
>>>
>>> Regards,
>>>
>>> Richard Duivenvoorde
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>>
>> --
>>
>> ------------------------------------------------------------------------------------------
>> ​
>>
>> Tim Sutton
>> Visit http://kartoza.com to find out about open source:
>>  * Desktop GIS programming services
>>  * Geospatial web development
>> * GIS Training
>> * Consulting Services
>> Tim is a member of the QGIS Project Steering Committee
>>
>> -------------------------------------------------------------------------------------------
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201108/b0ce40f0/attachment-0001.html>

From nyall.dawson at gmail.com  Sun Nov  8 15:46:40 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 9 Nov 2020 09:46:40 +1000
Subject: [QGIS-Developer] QGIS, DateTime and TimeZones
In-Reply-To: <CABPxTTo8mj+pLsxu0MZSXvyCo2JdSYuh8g9j2E-q4+ha1Xr4=g@mail.gmail.com>
References: <a16fd2c5-3f32-55d1-d64c-db7e1c5ea1f4@duif.net>
 <CAB28AshdRvkvD9keAoZ==UJo5k9cPYzC9n1Nm7JSZ6LFp2hhWw@mail.gmail.com>
 <CABPxTTo8mj+pLsxu0MZSXvyCo2JdSYuh8g9j2E-q4+ha1Xr4=g@mail.gmail.com>
Message-ID: <CAB28AsjXN9JOidae3kzP1KWGHxuGS2U+EC72Le9bNUOB7RVr4w@mail.gmail.com>

On Sat, 7 Nov 2020 at 05:50, C Hamilton <adenaculture at gmail.com> wrote:
>
> This was a good discussion that I think is important and wanted to see if it has resulted in any development for better timezone support.
>
> Currently I have a request to provide time conversion tools and coordinate to timezone lookup capability. As I was looking at the python libraries out there it appears that timezonefinder is probably the best for coordinate to timezone support. The only problem is that it is around 50  Mb. My customers generally have great difficulty getting additional libraries installed in QGIS required to run a plugin so I make sure I try to use the libraries already installed with QGIS or else include them with my plugins. I think 50 Mb probably exceeds the maximum size a plugin should be. I could do it for my customers, but it probably would not work as a public plugin.

>
> So is there any current timezone development going on? What are my options for coordinate to timezone lookup? If timezonefinder works for my needs is it possible to have it included as a part of the QGIS distribution? Is there something better?

Looking briefly into this, it seems that all the size of the
timezomefinder library is coming directly from the underlying spatial
layer of timezone boundaries -- that itself is ~50 mb. So ultimately I
don't think you can avoid this cost, unless you simplified the
boundaries and sacrifice accuracy of the results...

But more generally, I'd say you don't need any external library here.
Basically the library is just doing a point in polygon lookup against
the reference boundaries, and that's something which QGIS is already
awesome at ;) I'd suggest you just:
1. find the format which gives smallest file size for the time zone boundaries
2. include this in your plugin
3. use native classes classes to read these boundaries and use
QgsFeatureRequest to do the point in polygon lookups.

Hope that helps!
Nyall



>
> Have a wonderful weekend!!!
>
> Calvin
>
> On Tue, Sep 8, 2020 at 8:20 PM Nyall Dawson <nyall.dawson at gmail.com> wrote:
>>
>> On Tue, 8 Sep 2020 at 23:40, Richard Duivenvoorde <rdmailings at duif.net> wrote:
>> >
>> > Hi Devs,
>> >
>> > I was hitting some timezone issues when I received some csv data in which there are timestamps like:
>> > "2020-07-25 20:21:38 UTC"
>> > Apparently if you read this into QGIS, the UTC IS interpreted, and you get a DateTime in your data which is (in my case) -2 hours(CET) off (well in some parts of QGIS)
>> >
>> > This plays havoc if you for example are going to use this data in the timecontroller or expressions, see
>> > https://github.com/qgis/QGIS/issues/38647
>> >
>> > So I think that now the TimeController is part of QGIS, and people will start to play with Time-based data more and more (from TimeZone aware datasets like csv and postgres) we will run into issues like above.
>> >
>> > Is there something we can do to make QGIS timezone aware?
>> > OR should we stay far away from it (timezones are hell)...
>> > OR should we wait with it after QGIS 4
>>
>> This is a good discussion, and a very complex issue.
>>
>> Here's some summary points from a recent off-list discussion I had
>> regarding this very topic:
>>
>> -  we don't expose time zones anywhere in qgis. while the underlying
>> QDateTime class has good support for timezone handling, there's
>> no-where in QGIS you can "see " the time zone for a datetime value,
>> and there's no functionality present in -the expression engine or
>> processing to work with time zones/manipulate them.
>> - different data providers are handling time zones differently, but
>> most are just giving date time values as a "local time"/"no time zone
>> available" value. As described above, this inconsistency leads to
>> issues when you compare values from different sources. Even though the
>> look the same in QGIS, they aren't!!
>> - some underlying data sources just don't have any time zone
>> capabilities, or have limited capabilities. E.g. GDAL has a flag if a
>> datetime is UTC or "not utc/unknown", and that's it.
>>
>> I think we have no choice but to start exposing time zone information
>> to users everywhere we have dates, and move to treating dates without
>> a timezone as being in "local time" (which may cause issues if
>> projects + data are shared between users in different time zones). We
>> should add timezone functionality to the expression engine, and
>> algorithms for converting time zones to processing. We'd also need to
>> add a "manual time zone override" option to temporal enabled layers --
>> so for those sources with ambiguous time zone information the user has
>> some capacity to manually pick the correct time zone.
>>
>> It's definitely achievable, but it's not a trivial amount of work. I'd
>> estimate we're looking at ~5-7 days to do this properly (and it needs
>> to be done properly, covering all uses of datetime values all
>> throughout QGIS and the different data providers! Hacking in
>> one-by-one fixes in individual data providers will just make the
>> situation worse)...
>>
>> Nyall
>>
>>
>>
>>
>>
>>
>> >
>> > Regards,
>> >
>> > Richard Duivenvoorde
>> >
>> >
>> >
>> > _______________________________________________
>> > QGIS-Developer mailing list
>> > QGIS-Developer at lists.osgeo.org
>> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From rdmailings at duif.net  Sun Nov  8 23:24:35 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 9 Nov 2020 08:24:35 +0100
Subject: [QGIS-Developer] QGIS, DateTime and TimeZones
In-Reply-To: <CAB28AsjXN9JOidae3kzP1KWGHxuGS2U+EC72Le9bNUOB7RVr4w@mail.gmail.com>
References: <a16fd2c5-3f32-55d1-d64c-db7e1c5ea1f4@duif.net>
 <CAB28AshdRvkvD9keAoZ==UJo5k9cPYzC9n1Nm7JSZ6LFp2hhWw@mail.gmail.com>
 <CABPxTTo8mj+pLsxu0MZSXvyCo2JdSYuh8g9j2E-q4+ha1Xr4=g@mail.gmail.com>
 <CAB28AsjXN9JOidae3kzP1KWGHxuGS2U+EC72Le9bNUOB7RVr4w@mail.gmail.com>
Message-ID: <127363a2-c106-8e07-71b3-60be3bc32fe5@duif.net>

On 11/9/20 12:46 AM, Nyall Dawson wrote:
> But more generally, I'd say you don't need any external library here.
> Basically the library is just doing a point in polygon lookup against
> the reference boundaries, and that's something which QGIS is already
> awesome at ;) I'd suggest you just:
> 1. find the format which gives smallest file size for the time zone boundaries
> 2. include this in your plugin
> 3. use native classes classes to read these boundaries and use
> QgsFeatureRequest to do the point in polygon lookups.

+1 !

Thanks Nyall, for making this clear (to me).

If we either create a new geopackage with timezones (geoms) in it and put it:
https://github.com/qgis/QGIS/tree/master/resources/data
OR add it to current world_map.gpkg, you can use the 'inbuilt:' uri to get to the data
(iface.addVectorLayer('inbuilt:/data/world_map.gpkg', 'Countries', 'ogr')) to (reverse) lookup timezones.

Then use Qt's Datetime to handle the actual date/time-stuff.

(What we do not tackle now is that QGIS itself does not handle this deep inside yet)

Regards,

Richard Duivenvoorde




From andreas at qgis.org  Mon Nov  9 04:53:35 2020
From: andreas at qgis.org (Andreas Neumann)
Date: Mon, 9 Nov 2020 13:53:35 +0100
Subject: [QGIS-Developer] GEOS issues/improvements
Message-ID: <CAB2Z92DWdp_qYBaU8+w_pJ_1erz7XxA9oi2Jg8ZHBut5dgn4TA@mail.gmail.com>

Hi QGIS devs,

As you may have heard/may know, Sandro Santilli (alias strk) is also
contributing to GEOS and QGIS bug fixing. So far, he addressed everything
that we told him to look into.

Do you have any additional GEOS issues that you want him to look into? He
would still be available.

Thanks for your feedback,
Andreas

--
Andreas Neumann
QGIS.ORG board member (treasurer)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201109/7b3e3f18/attachment.html>

From tim at kartoza.com  Mon Nov  9 04:55:02 2020
From: tim at kartoza.com (Tim Sutton)
Date: Mon, 9 Nov 2020 12:55:02 +0000
Subject: [QGIS-Developer] Get ready for the next QGIS Hack Friday on 27
	November 2020!
Message-ID: <CAES-DZQU8dyzDYAvu-GS8_q6MTRQOD3fWx0bJ1TXQxwqxYh_zQ@mail.gmail.com>

This month's QGIS Hack Friday is on 27 November 2020. See
https://github.com/qgis/QGIS/wiki/QHF-November-2020 (and check back
regularly for updates) for the programme. I am happy to share that I am
hosting two special interest sessions with famous QGIS boffins!:

1) QGIS Expressions for Advanced Spatial Analysis with @spatialthoughts
Ujaval Gandhi - https://www.youtube.com/watch?v=IraiAF4s5Tg
2) QGIS Mesh and 3D Deep Dive with Vincent Cloarec -
https://www.youtube.com/watch?v=UjjD3DzPQYg

Both of these are not-to-be missed sessions if you want to level up your
QGIS skills!

If you click onto the YouTube links above, you can set a reminder so that
it brings it up on your playlist on the day!

Also check out the User Group session to be hosted by @terglobo and the
Plugins CI session to be hosted by @RouzaudDenis!

Interested in another 'Ask Me Anything' Session? Post your questions at the
link below and we will see if we can set on up:
https://cloud.kartoza.com/apps/forms/7AMg9qXfEA8Rratk

We really welcome anyone to add sessions to the session list. Just use the
principle of self-organisation and share your plans on the wiki. They don't
need to be in English and you can determine your own agenda! Share your
plans at https://github.com/qgis/QGIS/wiki/QHF-November-2020

Regards

Tim

-- 
------------------------------------------------------------------------------------------

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201109/f603f389/attachment.html>

From rdmailings at duif.net  Mon Nov  9 06:12:58 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 9 Nov 2020 15:12:58 +0100
Subject: [QGIS-Developer] Browser: deleteLayer deprecated ?
Message-ID: <193cf2df-e96b-86b9-168b-449b801430d9@duif.net>

Hi Devs,

I'm trying to hack my way into the Oracle provider [0].

One of the things that was broken, was to drag and drop and drop a file in the browser onto the Oracle node (in the browser).
That is working now with me (a little better), BUT trying to delete that table I get crashes.

Then I saw:
https://github.com/qgis/QGIS/blob/master/src/providers/oracle/qgsoracledataitems.h#L110-L128
which has a message: "deleteLayer deprecated"

Could this be the cause of my crashes? There is something going wrong with the setting of the item-flags.

I'm looking into the Postgres provider, and that one is NOT crashing.
I do see that postgres has a QgsPostgresDataItemGuiProvider, which is not available in the oracle family...

Anybody any pointers? Do we have to create/add a QgsOracleDataItemGuiProvider?

Regards,

Richard Duivenvoorde

[0] https://github.com/qgis/QGIS/pull/39846

From adenaculture at gmail.com  Mon Nov  9 06:48:56 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Mon, 9 Nov 2020 09:48:56 -0500
Subject: [QGIS-Developer] QGIS, DateTime and TimeZones
In-Reply-To: <127363a2-c106-8e07-71b3-60be3bc32fe5@duif.net>
References: <a16fd2c5-3f32-55d1-d64c-db7e1c5ea1f4@duif.net>
 <CAB28AshdRvkvD9keAoZ==UJo5k9cPYzC9n1Nm7JSZ6LFp2hhWw@mail.gmail.com>
 <CABPxTTo8mj+pLsxu0MZSXvyCo2JdSYuh8g9j2E-q4+ha1Xr4=g@mail.gmail.com>
 <CAB28AsjXN9JOidae3kzP1KWGHxuGS2U+EC72Le9bNUOB7RVr4w@mail.gmail.com>
 <127363a2-c106-8e07-71b3-60be3bc32fe5@duif.net>
Message-ID: <CABPxTTqOPpiP6LBpM6bkMUsLh9QRxWySJO-+0=kkKwtuxNTaoA@mail.gmail.com>

This all sounds good to me. I am guessing that we will not be able to get
around a fairly large data set because of the need to keep the accuracy of
the boundaries. There is a project called Timezone Boundary Builder (
https://github.com/evansiroky/timezone-boundary-builder) that is a detailed
polygon of the time zones based on OSM data with one attribute which is the
time zone. When used in conjunction with the Time Zone Database (
https://www.iana.org/time-zones), it probably gives everything that is
needed. QGIS already includes pytz which is the Time Zone Database.

On Mon, Nov 9, 2020 at 2:24 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> On 11/9/20 12:46 AM, Nyall Dawson wrote:
> > But more generally, I'd say you don't need any external library here.
> > Basically the library is just doing a point in polygon lookup against
> > the reference boundaries, and that's something which QGIS is already
> > awesome at ;) I'd suggest you just:
> > 1. find the format which gives smallest file size for the time zone
> boundaries
> > 2. include this in your plugin
> > 3. use native classes classes to read these boundaries and use
> > QgsFeatureRequest to do the point in polygon lookups.
>
> +1 !
>
> Thanks Nyall, for making this clear (to me).
>
> If we either create a new geopackage with timezones (geoms) in it and put
> it:
> https://github.com/qgis/QGIS/tree/master/resources/data
> OR add it to current world_map.gpkg, you can use the 'inbuilt:' uri to get
> to the data
> (iface.addVectorLayer('inbuilt:/data/world_map.gpkg', 'Countries', 'ogr'))
> to (reverse) lookup timezones.
>
> Then use Qt's Datetime to handle the actual date/time-stuff.
>
> (What we do not tackle now is that QGIS itself does not handle this deep
> inside yet)
>
> Regards,
>
> Richard Duivenvoorde
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201109/a2a4ba7e/attachment.html>

From rdmailings at duif.net  Mon Nov  9 07:28:48 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 9 Nov 2020 16:28:48 +0100
Subject: [QGIS-Developer] QGIS, DateTime and TimeZones
In-Reply-To: <CABPxTTqOPpiP6LBpM6bkMUsLh9QRxWySJO-+0=kkKwtuxNTaoA@mail.gmail.com>
References: <a16fd2c5-3f32-55d1-d64c-db7e1c5ea1f4@duif.net>
 <CAB28AshdRvkvD9keAoZ==UJo5k9cPYzC9n1Nm7JSZ6LFp2hhWw@mail.gmail.com>
 <CABPxTTo8mj+pLsxu0MZSXvyCo2JdSYuh8g9j2E-q4+ha1Xr4=g@mail.gmail.com>
 <CAB28AsjXN9JOidae3kzP1KWGHxuGS2U+EC72Le9bNUOB7RVr4w@mail.gmail.com>
 <127363a2-c106-8e07-71b3-60be3bc32fe5@duif.net>
 <CABPxTTqOPpiP6LBpM6bkMUsLh9QRxWySJO-+0=kkKwtuxNTaoA@mail.gmail.com>
Message-ID: <18d54b60-ca8d-f618-a624-f71333a99956@duif.net>

On 11/9/20 3:48 PM, C Hamilton wrote:
> This all sounds good to me. I am guessing that we will not be able to get around a fairly large data set because of the need to keep the accuracy of the boundaries. There is a project called Timezone Boundary Builder (https://github.com/evansiroky/timezone-boundary-builder) that is a detailed polygon of the time zones based on OSM data with one attribute which is the time zone.

Mmm, 100Mb (both as gpkg and shp and 65Mb as zipped shp. Are there any shrinking pills (algo's) available for those? Else maybe make it an alternative download? Though that complicates stuff probably.

Googling about d3js and timezones (hoping the Math-people maybe had better idea's), I found: 
https://bl.ocks.org/mbostock/9234731/1ed485516e30474ad75ec115c928bc175683ae58
pointing to http://efele.net/maps/tz/world/tz_world_mp.zip
which is a lot smaller (but lacks the buffer into the sea/water). Ah, no longer maintained: http://efele.net/maps/tz/ :-(

Regards,

Richard Duivenvoorde

From adenaculture at gmail.com  Mon Nov  9 07:56:36 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Mon, 9 Nov 2020 10:56:36 -0500
Subject: [QGIS-Developer] QGIS, DateTime and TimeZones
In-Reply-To: <18d54b60-ca8d-f618-a624-f71333a99956@duif.net>
References: <a16fd2c5-3f32-55d1-d64c-db7e1c5ea1f4@duif.net>
 <CAB28AshdRvkvD9keAoZ==UJo5k9cPYzC9n1Nm7JSZ6LFp2hhWw@mail.gmail.com>
 <CABPxTTo8mj+pLsxu0MZSXvyCo2JdSYuh8g9j2E-q4+ha1Xr4=g@mail.gmail.com>
 <CAB28AsjXN9JOidae3kzP1KWGHxuGS2U+EC72Le9bNUOB7RVr4w@mail.gmail.com>
 <127363a2-c106-8e07-71b3-60be3bc32fe5@duif.net>
 <CABPxTTqOPpiP6LBpM6bkMUsLh9QRxWySJO-+0=kkKwtuxNTaoA@mail.gmail.com>
 <18d54b60-ca8d-f618-a624-f71333a99956@duif.net>
Message-ID: <CABPxTTpP8it9rLrad+q3U-8FttLYo1cNKTc_F_X8q__HDMqe3Q@mail.gmail.com>

I am interested in shrinking if possible, but am afraid that that may
reduce the accuracy. I first looked at the Natural Earth Timezone Shapefile
(
https://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_time_zones.zip),
but it really does not provide the accuracy.

Time Zone Finder uses the Time Zone Boundary Builder's data. It's data size
is 47 Mb so they are compressing it.

Calvin

On Mon, Nov 9, 2020 at 10:28 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> On 11/9/20 3:48 PM, C Hamilton wrote:
> > This all sounds good to me. I am guessing that we will not be able to
> get around a fairly large data set because of the need to keep the accuracy
> of the boundaries. There is a project called Timezone Boundary Builder (
> https://github.com/evansiroky/timezone-boundary-builder) that is a
> detailed polygon of the time zones based on OSM data with one attribute
> which is the time zone.
>
> Mmm, 100Mb (both as gpkg and shp and 65Mb as zipped shp. Are there any
> shrinking pills (algo's) available for those? Else maybe make it an
> alternative download? Though that complicates stuff probably.
>
> Googling about d3js and timezones (hoping the Math-people maybe had better
> idea's), I found:
>
> https://bl.ocks.org/mbostock/9234731/1ed485516e30474ad75ec115c928bc175683ae58
> pointing to http://efele.net/maps/tz/world/tz_world_mp.zip
> which is a lot smaller (but lacks the buffer into the sea/water). Ah, no
> longer maintained: http://efele.net/maps/tz/ :-(
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201109/58b47b77/attachment.html>

From uclaros at gmail.com  Mon Nov  9 09:15:22 2020
From: uclaros at gmail.com (uclaros)
Date: Mon, 9 Nov 2020 10:15:22 -0700 (MST)
Subject: [QGIS-Developer] GEOS issues/improvements
In-Reply-To: <CAB2Z92DWdp_qYBaU8+w_pJ_1erz7XxA9oi2Jg8ZHBut5dgn4TA@mail.gmail.com>
References: <CAB2Z92DWdp_qYBaU8+w_pJ_1erz7XxA9oi2Jg8ZHBut5dgn4TA@mail.gmail.com>
Message-ID: <1604942122902-0.post@n6.nabble.com>

I recently encountered this: https://github.com/qgis/QGIS/issues/39719 and
opened an issue upstream: https://trac.osgeo.org/geos/ticket/1064#ticket
It is by no means important, but since you asked!...



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From rdmailings at duif.net  Tue Nov 10 00:20:45 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 10 Nov 2020 09:20:45 +0100
Subject: [QGIS-Developer] OSGeo virtual community sprint
Message-ID: <c15be594-dc85-6ace-1edc-bc0c9890dada@duif.net>

FYI: 

I just read about the Osgeo Virtual Community code sprint 17-19 Nov 2020:

https://wiki.osgeo.org/wiki/OSGeo_Virtual_Community_Sprint_2020

That is next week. I would be interested for example to look over the shoulder (virtually) with a core-dev fixing bugs. To see tricks and ways of working of squashing bugs (which currently cost me so much time, to just fix small ones because of... I don't know, I hope inexperience with the code base, but maybe my head is just too small :-)  ). Although this could also be an idea for a QHackFriday. 

Regards,

Richard Duivenvoorde

From apasotti at gmail.com  Tue Nov 10 00:31:16 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Tue, 10 Nov 2020 09:31:16 +0100
Subject: [QGIS-Developer] Browser: deleteLayer deprecated ?
In-Reply-To: <193cf2df-e96b-86b9-168b-449b801430d9@duif.net>
References: <193cf2df-e96b-86b9-168b-449b801430d9@duif.net>
Message-ID: <CAL5Q6705gi2kPFzcA+P9f36xEkfoVpXs6WndoCdv6O4N=ziN7w@mail.gmail.com>

On Mon, Nov 9, 2020 at 3:13 PM Richard Duivenvoorde <rdmailings at duif.net> wrote:
>
> Hi Devs,
>
> I'm trying to hack my way into the Oracle provider [0].
>
> One of the things that was broken, was to drag and drop and drop a file in the browser onto the Oracle node (in the browser).
> That is working now with me (a little better), BUT trying to delete that table I get crashes.
>
> Then I saw:
> https://github.com/qgis/QGIS/blob/master/src/providers/oracle/qgsoracledataitems.h#L110-L128
> which has a message: "deleteLayer deprecated"
>
> Could this be the cause of my crashes? There is something going wrong with the setting of the item-flags.
>
> I'm looking into the Postgres provider, and that one is NOT crashing.
> I do see that postgres has a QgsPostgresDataItemGuiProvider, which is not available in the oracle family...
>
> Anybody any pointers? Do we have to create/add a QgsOracleDataItemGuiProvider?
>
> Regards,
>
> Richard Duivenvoorde
>


Hi Richard,

one way to integrate a provider in the browser is to implement the
connections API:
https://qgis.org/api/classQgsAbstractDatabaseProviderConnection.html#details

When it's done, all the generic methods implemented in the browser
will automatically work, see

QgsDatabaseItemGuiProvider::populateContextMenu
QgsFieldsItemGuiProvider::populateContextMenu

For a sample implementation you could have a look to the PG provider.

You may need to subclass the GUI provider in case the base
functionality is not ok, the PG provider does that for some methods
too, so the answer is yes: you need to create a GUI provider for the
provider or you can choose to abstract out the PG provider and create
a base class if you see that there is a common ground for abstraction.

Hope this helps.


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From alexander.bruy at gmail.com  Tue Nov 10 00:34:53 2020
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Tue, 10 Nov 2020 10:34:53 +0200
Subject: [QGIS-Developer] OSGeo virtual community sprint
In-Reply-To: <c15be594-dc85-6ace-1edc-bc0c9890dada@duif.net>
References: <c15be594-dc85-6ace-1edc-bc0c9890dada@duif.net>
Message-ID: <CALuHMPA6CWBHxqKLDh+LRU9mjW6HY0R+CcWPxaqKZ9YHyKSnig@mail.gmail.com>

Hi Richard,

вт, 10 лист. 2020 о 10:20 Richard Duivenvoorde <rdmailings at duif.net> пише:
> I would be interested for example to look over the shoulder (virtually) with a core-dev fixing bugs.

Have you seen a live bugfixing session from Nyall? You can find it on YouTube at

https://www.youtube.com/watch?v=du5DSWik3V4 (part 1)
and
https://www.youtube.com/watch?v=R6NXIJRI0gk (part 2)

-- 
Alexander Bruy

From julien.cabieces at oslandia.com  Tue Nov 10 01:26:48 2020
From: julien.cabieces at oslandia.com (Julien Cabieces)
Date: Tue, 10 Nov 2020 10:26:48 +0100
Subject: [QGIS-Developer] Browser: deleteLayer deprecated ?
In-Reply-To: <193cf2df-e96b-86b9-168b-449b801430d9@duif.net>
References: <193cf2df-e96b-86b9-168b-449b801430d9@duif.net>
Message-ID: <87a6vpy33b.fsf@julien-laptop.home>


Hi,

> One of the things that was broken, was to drag and drop and drop a file in the browser onto the Oracle node (in the browser).
> That is working now with me (a little better), BUT trying to delete that table I get crashes.

You mean using the DB manager ? because I failed to import a file
drag-n-droping directly in QGIS browser (not DB manager one). 

I think it might be possible with the new DB API https://github.com/qgis/QGIS-Enhancement-Proposals/issues/171

But IIRC, the Oracle provider doesn't implement this API yet.

I'm planning to work on this very subject in the days (months?) to
come. But I'm not sure trying to fix the DB manager for this matter worth
the pain.

Regards,
Julien

> Hi Devs,
>
> I'm trying to hack my way into the Oracle provider [0].
>
> One of the things that was broken, was to drag and drop and drop a file in the browser onto the Oracle node (in the browser).
> That is working now with me (a little better), BUT trying to delete that table I get crashes.
>
> Then I saw:
> https://github.com/qgis/QGIS/blob/master/src/providers/oracle/qgsoracledataitems.h#L110-L128
> which has a message: "deleteLayer deprecated"
>
> Could this be the cause of my crashes? There is something going wrong with the setting of the item-flags.
>
> I'm looking into the Postgres provider, and that one is NOT crashing.
> I do see that postgres has a QgsPostgresDataItemGuiProvider, which is not available in the oracle family...
>
> Anybody any pointers? Do we have to create/add a QgsOracleDataItemGuiProvider?
>
> Regards,
>
> Richard Duivenvoorde
>
> [0] https://github.com/qgis/QGIS/pull/39846
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From rdmailings at duif.net  Tue Nov 10 05:03:53 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 10 Nov 2020 14:03:53 +0100
Subject: [QGIS-Developer] Qt update on debian testing compile
Message-ID: <5d0b6074-fe43-0aa6-0928-9c8004eec06a@duif.net>

Hi Debians,

For those running Debian testing and compiling QGIS.

After the recent Qt update, Qt packages/names have moved.

I had do install some new packages:

sudo apt install libqt5webkit5-dev qtpositioning5-dev qt3d5-dev python3-pyqt5 python3-pyqt5.qsci pyqt5-dev-tools libqwt-qt5-dev

And NOT add the "-DQT5_3DEXTRA_LIBRARY=/usr/lib/x86_64-linux-gnu/libQt53DExtras.so" part anymore to my ccmake command.

Then I could compile

These packages are (off course, thanks Juergen) also available in the INSTALL.md in the sid line: https://github.com/qgis/QGIS/blob/master/INSTALL.md
(only thing there is that it asks for a qt5-default which I seem not to have??)
(actually that line installed some more 3d related python stuff plus some lighttpd thingies, which I have to disable because I run apache: "sudo systemctl disable lighttpd")

Hope this helps somebody

Regards,

Richard Duivenvoorde

From andreas at qgis.org  Tue Nov 10 08:52:21 2020
From: andreas at qgis.org (Andreas Neumann)
Date: Tue, 10 Nov 2020 17:52:21 +0100
Subject: [QGIS-Developer] QGIS 2021 budget proposal
Message-ID: <CAB2Z92DL=qaaQ42cPV8n4tmO-XjAE6uA-uY-izAEjmc3-+wSig@mail.gmail.com>

Dear QGIS contributors,

PSC discussed today the 2021 budget and is looking for feedback.

See
https://docs.google.com/spreadsheets/d/1wtmYXQLeK_ftNPWtDHS_A-dFB-MjfvNl-Tfj51B7DjQ/edit?usp=sharing

Did we miss some upcoming expenses that are not yet listed in the budget
proposal? The plan is to put this up for voting in December, so we have a
budget at the beginning of the year.

Thank you for your replies,
Andreas

--
Andreas Neumann
QGIS.ORG board member (treasurer)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201110/965921dd/attachment.html>

From rdmailings at duif.net  Tue Nov 10 21:53:02 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 11 Nov 2020 06:53:02 +0100
Subject: [QGIS-Developer] Browser: deleteLayer deprecated ?
In-Reply-To: <CAL5Q6705gi2kPFzcA+P9f36xEkfoVpXs6WndoCdv6O4N=ziN7w@mail.gmail.com>
References: <193cf2df-e96b-86b9-168b-449b801430d9@duif.net>
 <CAL5Q6705gi2kPFzcA+P9f36xEkfoVpXs6WndoCdv6O4N=ziN7w@mail.gmail.com>
Message-ID: <2a6e02c1-af12-f68e-f861-63020cb95e4d@duif.net>

On 11/10/20 9:31 AM, Alessandro Pasotti wrote:

> one way to integrate a provider in the browser is to implement the
> connections API:
> https://qgis.org/api/classQgsAbstractDatabaseProviderConnection.html#details
> 
> When it's done, all the generic methods implemented in the browser
> will automatically work, see
> 
> QgsDatabaseItemGuiProvider::populateContextMenu
> QgsFieldsItemGuiProvider::populateContextMenu
> 
> For a sample implementation you could have a look to the PG provider.
> 
> You may need to subclass the GUI provider in case the base
> functionality is not ok, the PG provider does that for some methods
> too, so the answer is yes: you need to create a GUI provider for the
> provider or you can choose to abstract out the PG provider and create
> a base class if you see that there is a common ground for abstraction.

Thanks Alessandro,

I had a chat with Julien (Oslandia) and he told me they had some funding to work on the Oracle provider, and that your proposal above was exactly what he was going to do. So: fingers crossed :-)

Regards,

Richard





From rdmailings at duif.net  Wed Nov 11 00:16:07 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 11 Nov 2020 09:16:07 +0100
Subject: [QGIS-Developer] QtCreator does not start QGIS?
Message-ID: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>

Hi,

Currently in my Qt build I cannot debug QGIS in qtcreator because it hangs/stops when showing the splash.
After some time the Application Output shows:

../../src/core/qgsmessagelog.cpp:29 : (logMessage) [60891ms] [thread:0x5555560d9d00] 2020-11-11T08:58:15 [1] HTTP fetch https://feed.qgis.org/?after=1605081272&lang=en failed with error Operation canceled
../../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] [thread:0x5555560d9d00] 2020-11-11T08:58:15 Network[1] Network request https://feed.qgis.org/?after=1605081272&lang=en timed out

I am connected, and https://feed.qgis.org/?after=1605081272&lang=en is available from my browser.

Disabling: 'Show QGIS news feed on welcome page' and 'Check QGIS version at startup' fix this.

Others have this issue currently?

(I hit my head also with this sometimes when in mixed/http proxied environments
I still think we should use 'opt in' for these 'QGIS phoning home stuff' instead of 'opt out')

Regards,

Richard Duivenvoorde


From apasotti at gmail.com  Wed Nov 11 03:58:44 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Wed, 11 Nov 2020 12:58:44 +0100
Subject: [QGIS-Developer] Browser: deleteLayer deprecated ?
In-Reply-To: <2a6e02c1-af12-f68e-f861-63020cb95e4d@duif.net>
References: <193cf2df-e96b-86b9-168b-449b801430d9@duif.net>
 <CAL5Q6705gi2kPFzcA+P9f36xEkfoVpXs6WndoCdv6O4N=ziN7w@mail.gmail.com>
 <2a6e02c1-af12-f68e-f861-63020cb95e4d@duif.net>
Message-ID: <CAL5Q672nD_S_-5KaFZC1kO5cx4_Mk_SYsfcaF483xMZLEthTww@mail.gmail.com>

Glad to hear it!

@Julien Cabieces  the connections API is relatively young and it may
not fit well with ORACLE table models, let me know if you run into any
issues.

Kind regards.


On Wed, Nov 11, 2020 at 6:53 AM Richard Duivenvoorde
<rdmailings at duif.net> wrote:
>
> On 11/10/20 9:31 AM, Alessandro Pasotti wrote:
>
> > one way to integrate a provider in the browser is to implement the
> > connections API:
> > https://qgis.org/api/classQgsAbstractDatabaseProviderConnection.html#details
> >
> > When it's done, all the generic methods implemented in the browser
> > will automatically work, see
> >
> > QgsDatabaseItemGuiProvider::populateContextMenu
> > QgsFieldsItemGuiProvider::populateContextMenu
> >
> > For a sample implementation you could have a look to the PG provider.
> >
> > You may need to subclass the GUI provider in case the base
> > functionality is not ok, the PG provider does that for some methods
> > too, so the answer is yes: you need to create a GUI provider for the
> > provider or you can choose to abstract out the PG provider and create
> > a base class if you see that there is a common ground for abstraction.
>
> Thanks Alessandro,
>
> I had a chat with Julien (Oslandia) and he told me they had some funding to work on the Oracle provider, and that your proposal above was exactly what he was going to do. So: fingers crossed :-)
>
> Regards,
>
> Richard
>
>
>
>


-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From denis.rouzaud at gmail.com  Wed Nov 11 04:56:22 2020
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Wed, 11 Nov 2020 13:56:22 +0100
Subject: [QGIS-Developer] mac os builds failing with some PDAL error
Message-ID: <CAMtsY+YXZkfHjCbfCtToDB5WabTW_ur4yc1D8X3hFh1GGpniJw@mail.gmail.com>

Hi list, hi Peter ;)

last builds are failing:

/Users/runner/work/QGIS/QGIS/src/core/processing/qgsprocessingfeedback.cpp:110:72:
error: no member named 'GetFullVersionString' in namespace 'pdal'; did you
mean 'pdal::Config::fullVersionString'?

https://github.com/qgis/QGIS/runs/1384622146#step:6:2588

Probably PDAL_VERSION_MAJOR_INT is not correctly set.
https://github.com/qgis/QGIS/blob/master/src/core/processing/qgsprocessingfeedback.cpp#L107

Is anyone looking into this?

Cheers,
Denis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201111/ecbac800/attachment.html>

From jef at norbit.de  Wed Nov 11 06:52:38 2020
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Wed, 11 Nov 2020 15:52:38 +0100
Subject: [QGIS-Developer] mac os builds failing with some PDAL error
In-Reply-To: <CAMtsY+YXZkfHjCbfCtToDB5WabTW_ur4yc1D8X3hFh1GGpniJw@mail.gmail.com>
References: <CAMtsY+YXZkfHjCbfCtToDB5WabTW_ur4yc1D8X3hFh1GGpniJw@mail.gmail.com>
Message-ID: <20201111145238.7orlguvbkuwxfeyb@norbit.de>

Hi,

On Wed, 11. Nov 2020 at 13:56:22 +0100, Denis Rouzaud wrote:
> /Users/runner/work/QGIS/QGIS/src/core/processing/qgsprocessingfeedback.cpp:110:72:
> error: no member named 'GetFullVersionString' in namespace 'pdal'; did you
> mean 'pdal::Config::fullVersionString'?
> 
> https://github.com/qgis/QGIS/runs/1384622146#step:6:2588
> 
> Probably PDAL_VERSION_MAJOR_INT is not correctly set.
> https://github.com/qgis/QGIS/blob/master/src/core/processing/qgsprocessingfeedback.cpp#L107
> 
> Is anyone looking into this?

hm, it's detecting PDAL version 0.6.0.  Which is older than what bionic has.
Is that correct?  It happens to be the same version as qgis-deps…


Jürgen

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201111/cf9afe35/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201111/cf9afe35/attachment.ksh>

From rdmailings at duif.net  Wed Nov 11 07:49:04 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 11 Nov 2020 16:49:04 +0100
Subject: [QGIS-Developer] "Refresh" is 'refresh data' for Postgis and only
	'repaint' for OGR?
Message-ID: <dfb8dadd-06e0-2595-6e19-c6383eedb4cb@duif.net>

Hi Devs,

Anybody has knowledge about the difference between the menu item:
"Refresh (F5)"
And the 
"Refresh layer at interval (seconds)" in the Layer Properties dialog?

Because with me the F5 mostly works, 
while the autorefresh in the layer props works for postgres, but not for other (ogr?) layers.

I tried to find differences between those two providers, but I only seen links to rendering, not about reloading (provider) data.

Any hints appareciated.

Regards,

Richard Duivenvoorde

From nagyrobi_r at yahoo.com  Wed Nov 11 08:23:00 2020
From: nagyrobi_r at yahoo.com (nagyrobi_r at yahoo.com)
Date: Wed, 11 Nov 2020 16:23:00 +0000 (UTC)
Subject: [QGIS-Developer] "Refresh" is 'refresh data' for Postgis and
 only	'repaint' for OGR?
In-Reply-To: <dfb8dadd-06e0-2595-6e19-c6383eedb4cb@duif.net>
References: <dfb8dadd-06e0-2595-6e19-c6383eedb4cb@duif.net>
Message-ID: <380881724.4532770.1605111780280@mail.yahoo.com>

Hei! 
I've mentioned this as well a few weeks ago, when attempting to refresh layers from json url, that it does not actually do anything. 

Sent from Yahoo Mail on Android 
 
  On Wed, Nov 11, 2020 at 4:49 PM, Richard Duivenvoorde<rdmailings at duif.net> wrote:   Hi Devs,

Anybody has knowledge about the difference between the menu item:
"Refresh (F5)"
And the 
"Refresh layer at interval (seconds)" in the Layer Properties dialog?

Because with me the F5 mostly works, 
while the autorefresh in the layer props works for postgres, but not for other (ogr?) layers.

I tried to find differences between those two providers, but I only seen links to rendering, not about reloading (provider) data.

Any hints appareciated.

Regards,

Richard Duivenvoorde
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201111/036236cd/attachment-0001.html>

From skampus at gmail.com  Wed Nov 11 08:43:13 2020
From: skampus at gmail.com (Stefano Campus)
Date: Wed, 11 Nov 2020 09:43:13 -0700 (MST)
Subject: [QGIS-Developer] CMYK implementation in QGIS?
In-Reply-To: <CA+H0G_ELwG7JXizm+4p7pyHgcobZHwrV+F3o_D84ci555-iPSw@mail.gmail.com>
References: <CA+H0G_HnqJ4TL0p1nD6ErnLTpzS-5dQtyjpdLchaX8GR5Kcr5w@mail.gmail.com>
 <CAB28AsiiDxqp=rL4b2b+yWQMZc=0snHnxmu_5L8LuL74XN=8Vg@mail.gmail.com>
 <CA+H0G_ELwG7JXizm+4p7pyHgcobZHwrV+F3o_D84ci555-iPSw@mail.gmail.com>
Message-ID: <1605112993933-0.post@n6.nabble.com>

ciao,
do you know if there are any plans for Qt libraries to support the output
layout in CMYK?

thank you in advance

s.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From peter.petrik at lutraconsulting.co.uk  Wed Nov 11 12:40:38 2020
From: peter.petrik at lutraconsulting.co.uk (Peter Petrik)
Date: Wed, 11 Nov 2020 21:40:38 +0100
Subject: [QGIS-Developer] mac os builds failing with some PDAL error
In-Reply-To: <20201111145238.7orlguvbkuwxfeyb@norbit.de>
References: <CAMtsY+YXZkfHjCbfCtToDB5WabTW_ur4yc1D8X3hFh1GGpniJw@mail.gmail.com>
 <20201111145238.7orlguvbkuwxfeyb@norbit.de>
Message-ID: <CA+T_MsKH21zeZ6Qep9ziGuox=_pU8DeeME2mLjSP2uUz7t8uiA@mail.gmail.com>

Hi,

PDAL on MacOS is 2.2.0 (see
https://qgis.org/downloads/macos/nightly/qgis_nightly_master_20201110_122948.deps).
0.6.0 is version of the qgis-deps packages.

ok, found the problem will try to fix tomorrow:
https://github.com/qgis/QGIS-Mac-Packager/issues/97

Peter



On Wed, Nov 11, 2020 at 3:52 PM Jürgen E. Fischer <jef at norbit.de> wrote:

> Hi,
>
> On Wed, 11. Nov 2020 at 13:56:22 +0100, Denis Rouzaud wrote:
> >
> /Users/runner/work/QGIS/QGIS/src/core/processing/qgsprocessingfeedback.cpp:110:72:
> > error: no member named 'GetFullVersionString' in namespace 'pdal'; did
> you
> > mean 'pdal::Config::fullVersionString'?
> >
> > https://github.com/qgis/QGIS/runs/1384622146#step:6:2588
> >
> > Probably PDAL_VERSION_MAJOR_INT is not correctly set.
> >
> https://github.com/qgis/QGIS/blob/master/src/core/processing/qgsprocessingfeedback.cpp#L107
> >
> > Is anyone looking into this?
>
> hm, it's detecting PDAL version 0.6.0.  Which is older than what bionic
> has.
> Is that correct?  It happens to be the same version as qgis-deps…
>
>
> Jürgen
>
> --
> Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden
> https://www.norbit.de
> QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201111/8bff947d/attachment.html>

From peter.petrik at lutraconsulting.co.uk  Thu Nov 12 00:25:24 2020
From: peter.petrik at lutraconsulting.co.uk (Peter Petrik)
Date: Thu, 12 Nov 2020 09:25:24 +0100
Subject: [QGIS-Developer] mac os builds failing with some PDAL error
In-Reply-To: <CA+T_MsKH21zeZ6Qep9ziGuox=_pU8DeeME2mLjSP2uUz7t8uiA@mail.gmail.com>
References: <CAMtsY+YXZkfHjCbfCtToDB5WabTW_ur4yc1D8X3hFh1GGpniJw@mail.gmail.com>
 <20201111145238.7orlguvbkuwxfeyb@norbit.de>
 <CA+T_MsKH21zeZ6Qep9ziGuox=_pU8DeeME2mLjSP2uUz7t8uiA@mail.gmail.com>
Message-ID: <CA+T_MsKAk_20oCR2mcMuk+f1LNB3E6+hw0iaiAzpSESSna4sZg@mail.gmail.com>

this should be fixed in next nightly build, uploaded fixed qgis-deps-0.6.0-2

On Wed, Nov 11, 2020 at 9:40 PM Peter Petrik <
peter.petrik at lutraconsulting.co.uk> wrote:

> Hi,
>
> PDAL on MacOS is 2.2.0 (see
> https://qgis.org/downloads/macos/nightly/qgis_nightly_master_20201110_122948.deps).
> 0.6.0 is version of the qgis-deps packages.
>
> ok, found the problem will try to fix tomorrow:
> https://github.com/qgis/QGIS-Mac-Packager/issues/97
>
> Peter
>
>
>
> On Wed, Nov 11, 2020 at 3:52 PM Jürgen E. Fischer <jef at norbit.de> wrote:
>
>> Hi,
>>
>> On Wed, 11. Nov 2020 at 13:56:22 +0100, Denis Rouzaud wrote:
>> >
>> /Users/runner/work/QGIS/QGIS/src/core/processing/qgsprocessingfeedback.cpp:110:72:
>> > error: no member named 'GetFullVersionString' in namespace 'pdal'; did
>> you
>> > mean 'pdal::Config::fullVersionString'?
>> >
>> > https://github.com/qgis/QGIS/runs/1384622146#step:6:2588
>> >
>> > Probably PDAL_VERSION_MAJOR_INT is not correctly set.
>> >
>> https://github.com/qgis/QGIS/blob/master/src/core/processing/qgsprocessingfeedback.cpp#L107
>> >
>> > Is anyone looking into this?
>>
>> hm, it's detecting PDAL version 0.6.0.  Which is older than what bionic
>> has.
>> Is that correct?  It happens to be the same version as qgis-deps…
>>
>>
>> Jürgen
>>
>> --
>> Jürgen E. Fischer           norBIT GmbH             Tel.
>> +49-4931-918175-31
>> Dipl.-Inf. (FH)             Rheinstraße 13          Fax.
>> +49-4931-918175-50
>> Software Engineer           D-26506 Norden
>> https://www.norbit.de
>> QGIS release manager (PSC)  Germany                    IRC: jef on
>> FreeNode
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201112/c275c88d/attachment.html>

From a.neumann at carto.net  Thu Nov 12 01:01:56 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 12 Nov 2020 10:01:56 +0100
Subject: [QGIS-Developer] QGIS master and 3.16 dev version crashing when
 opening Options dialogue
Message-ID: <804518abd6fe3848e4f519320bfe2225@carto.net>

Hi, 

Both QGIS master and recent 3.16 builds are crashing for me if I open
the "Options" dialogue (Menu "Settings" --> "Options"). 3.14 and lower
are fine, so not a general issue with my machine or profile. 

I remember that Richard hat a similar issue related to non-english
languages with crash when opening the Options dialogue, but in my case
it is all in English at the moment. 

Am I the only one experiencing these issues? 

Thanks, 

Andreas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201112/91591d65/attachment.html>

From a.neumann at carto.net  Thu Nov 12 01:09:07 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 12 Nov 2020 10:09:07 +0100
Subject: [QGIS-Developer] QGIS master and 3.16 dev version crashing when
 opening Options dialogue
In-Reply-To: <804518abd6fe3848e4f519320bfe2225@carto.net>
References: <804518abd6fe3848e4f519320bfe2225@carto.net>
Message-ID: <2fbece4717d492b2e08deab26887c1a1@carto.net>

This is self-compiled, on Ubuntu-Linux 18.04 (Kubuntu). 

Thanks, 

Andreas 

On 2020-11-12 10:01, Andreas Neumann wrote:

> Hi, 
> 
> Both QGIS master and recent 3.16 builds are crashing for me if I open the "Options" dialogue (Menu "Settings" --> "Options"). 3.14 and lower are fine, so not a general issue with my machine or profile. 
> 
> I remember that Richard hat a similar issue related to non-english languages with crash when opening the Options dialogue, but in my case it is all in English at the moment. 
> 
> Am I the only one experiencing these issues? 
> 
> Thanks, 
> 
> Andreas 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201112/b3a453c9/attachment.html>

From nirvn.asia at gmail.com  Thu Nov 12 01:10:41 2020
From: nirvn.asia at gmail.com (Mathieu Pellerin)
Date: Thu, 12 Nov 2020 16:10:41 +0700
Subject: [QGIS-Developer] QGIS master and 3.16 dev version crashing when
 opening Options dialogue
In-Reply-To: <2fbece4717d492b2e08deab26887c1a1@carto.net>
References: <804518abd6fe3848e4f519320bfe2225@carto.net>
 <2fbece4717d492b2e08deab26887c1a1@carto.net>
Message-ID: <CAC_qv=rwyNJkjYYWjWujd72WDmdBk4miz7rC-ewaQaqHR49wrg@mail.gmail.com>

Andreas, it should be fixed as of this commit (
https://github.com/qgis/QGIS/commit/c4306e18e85145c43331fc871bfb2691dcd55505)
merged earlier today.

On Thu, Nov 12, 2020 at 4:09 PM Andreas Neumann <a.neumann at carto.net> wrote:

> This is self-compiled, on Ubuntu-Linux 18.04 (Kubuntu).
>
> Thanks,
>
> Andreas
>
> On 2020-11-12 10:01, Andreas Neumann wrote:
>
> Hi,
>
> Both QGIS master and recent 3.16 builds are crashing for me if I open the
> "Options" dialogue (Menu "Settings" --> "Options"). 3.14 and lower are
> fine, so not a general issue with my machine or profile.
>
> I remember that Richard hat a similar issue related to non-english
> languages with crash when opening the Options dialogue, but in my case it
> is all in English at the moment.
>
> Am I the only one experiencing these issues?
>
> Thanks,
>
> Andreas
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201112/2ee50254/attachment-0001.html>

From jef at norbit.de  Thu Nov 12 01:12:21 2020
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Thu, 12 Nov 2020 10:12:21 +0100
Subject: [QGIS-Developer] QGIS master and 3.16 dev version crashing when
 opening Options dialogue
In-Reply-To: <804518abd6fe3848e4f519320bfe2225@carto.net>
References: <804518abd6fe3848e4f519320bfe2225@carto.net>
Message-ID: <20201112091221.rhrmdnmksnkphvik@norbit.de>

Hi Andreas,

On Thu, 12. Nov 2020 at 10:01:56 +0100, Andreas Neumann wrote:
> Both QGIS master and recent 3.16 builds are crashing for me if I open
> the "Options" dialogue (Menu "Settings" --> "Options"). 3.14 and lower
> are fine, so not a general issue with my machine or profile.

> I remember that Richard hat a similar issue related to non-english
> languages with crash when opening the Options dialogue, but in my case
> it is all in English at the moment.

I think this is already fixed:

https://github.com/qgis/QGIS/issues/39693
https://github.com/qgis/QGIS/issues/39725


Jürgen

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201112/4dd83277/attachment.sig>

From a.neumann at carto.net  Thu Nov 12 01:23:05 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 12 Nov 2020 10:23:05 +0100
Subject: [QGIS-Developer] QGIS master and 3.16 dev version crashing when
 opening Options dialogue
In-Reply-To: <20201112091221.rhrmdnmksnkphvik@norbit.de>
References: <804518abd6fe3848e4f519320bfe2225@carto.net>
 <20201112091221.rhrmdnmksnkphvik@norbit.de>
Message-ID: <b6da5be8b1098d698bd9790702c1d60a@carto.net>

Hi, 

Thank you Jürgen and Mathieu for your replies! 

Hm - but my build is from "yesterday". and the issues you mention had
been committed about 2 weeks ago? 

Anyway - I am currently recompiling (with debug this time) to see if it
is fixed. Maybe
https://github.com/qgis/QGIS/commit/c4306e18e85145c43331fc871bfb2691dcd55505
will help, as Mathieu mentioned. 

I have qt 5.9.5 on this Ubuntu 18.04. i will also test on a newer
machine on Ubuntu 20.04 and qt 5.12.8 

Will report back if my issues are fixed 

Andreas 

On 2020-11-12 10:12, Jürgen E. Fischer wrote:

> Hi Andreas,
> 
> On Thu, 12. Nov 2020 at 10:01:56 +0100, Andreas Neumann wrote: 
> 
>> Both QGIS master and recent 3.16 builds are crashing for me if I open
>> the "Options" dialogue (Menu "Settings" --> "Options"). 3.14 and lower
>> are fine, so not a general issue with my machine or profile.
> 
>> I remember that Richard hat a similar issue related to non-english
>> languages with crash when opening the Options dialogue, but in my case
>> it is all in English at the moment.
> 
> I think this is already fixed:
> 
> https://github.com/qgis/QGIS/issues/39693
> https://github.com/qgis/QGIS/issues/39725
> 
> Jürgen 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201112/92a8c540/attachment.html>

From nirvn.asia at gmail.com  Thu Nov 12 01:25:01 2020
From: nirvn.asia at gmail.com (Mathieu Pellerin)
Date: Thu, 12 Nov 2020 16:25:01 +0700
Subject: [QGIS-Developer] QGIS master and 3.16 dev version crashing when
 opening Options dialogue
In-Reply-To: <b6da5be8b1098d698bd9790702c1d60a@carto.net>
References: <804518abd6fe3848e4f519320bfe2225@carto.net>
 <20201112091221.rhrmdnmksnkphvik@norbit.de>
 <b6da5be8b1098d698bd9790702c1d60a@carto.net>
Message-ID: <CAC_qv=q-F0m_TAOpaVhofewZwnZz=o4fgCVgnKA43u+xe-H-=w@mail.gmail.com>

The fix was committed hours ago :)

On Thu, Nov 12, 2020 at 4:23 PM Andreas Neumann <a.neumann at carto.net> wrote:

> Hi,
>
> Thank you Jürgen and Mathieu for your replies!
>
> Hm - but my build is from "yesterday". and the issues you mention had been
> committed about 2 weeks ago?
>
> Anyway - I am currently recompiling (with debug this time) to see if it is
> fixed. Maybe
> https://github.com/qgis/QGIS/commit/c4306e18e85145c43331fc871bfb2691dcd55505 will
> help, as Mathieu mentioned.
>
> I have qt 5.9.5 on this Ubuntu 18.04. i will also test on a newer machine
> on Ubuntu 20.04 and qt 5.12.8
>
> Will report back if my issues are fixed
>
> Andreas
>
> On 2020-11-12 10:12, Jürgen E. Fischer wrote:
>
> Hi Andreas,
>
> On Thu, 12. Nov 2020 at 10:01:56 +0100, Andreas Neumann wrote:
>
> Both QGIS master and recent 3.16 builds are crashing for me if I open
> the "Options" dialogue (Menu "Settings" --> "Options"). 3.14 and lower
> are fine, so not a general issue with my machine or profile.
>
>
> I remember that Richard hat a similar issue related to non-english
> languages with crash when opening the Options dialogue, but in my case
> it is all in English at the moment.
>
>
> I think this is already fixed:
>
> https://github.com/qgis/QGIS/issues/39693
> https://github.com/qgis/QGIS/issues/39725
>
>
> Jürgen
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201112/5841645d/attachment.html>

From rdmailings at duif.net  Thu Nov 12 01:29:21 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 12 Nov 2020 10:29:21 +0100
Subject: [QGIS-Developer] VirtualXPath noise?
Message-ID: <3a159de5-242f-e81c-42fe-7a14fe2ae58d@duif.net>

When starting QGIS from cli I have a lot of lines with 

'VirtualXPath'	[XML Path Language - XPath]

Eg:

$ qgis
	- 'VirtualXPath'	[XML Path Language - XPath]
	- 'VirtualXPath'	[XML Path Language - XPath]
<string>:1: DeprecationWarning: setapi() is deprecated
	- 'VirtualXPath'	[XML Path Language - XPath]

anybody aware where that comes from, and if it is easy to silence?
 (I grepped my binary dir, but .. apparently binary :-) )

Regards,

Richard Duivenvoorde



From jef at norbit.de  Thu Nov 12 01:40:59 2020
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Thu, 12 Nov 2020 10:40:59 +0100
Subject: [QGIS-Developer] VirtualXPath noise?
In-Reply-To: <3a159de5-242f-e81c-42fe-7a14fe2ae58d@duif.net>
References: <3a159de5-242f-e81c-42fe-7a14fe2ae58d@duif.net>
Message-ID: <20201112094059.ga5y3y3lsqnyk2rv@norbit.de>

Hi Richard,

On Thu, 12. Nov 2020 at 10:29:21 +0100, Richard Duivenvoorde wrote:
> When starting QGIS from cli I have a lot of lines with 
> 
> 'VirtualXPath'	[XML Path Language - XPath]

> anybody aware where that comes from,

spatialite?

$ grep VirtualXPath /usr/lib/x86_64-linux-gnu/libspatialite.so
Binary file /usr/lib/x86_64-linux-gnu/libspatialite.so matches

> and if it is easy to silence?
>  (I grepped my binary dir, but .. apparently binary :-) )

No, sorry.


Jürgen

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden            https://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201112/d52c1db1/attachment-0001.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201112/d52c1db1/attachment-0001.ksh>

From a.neumann at carto.net  Thu Nov 12 03:20:53 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 12 Nov 2020 12:20:53 +0100
Subject: [QGIS-Developer] QGIS master and 3.16 dev version crashing when
 opening Options dialogue
In-Reply-To: <CAC_qv=q-F0m_TAOpaVhofewZwnZz=o4fgCVgnKA43u+xe-H-=w@mail.gmail.com>
References: <804518abd6fe3848e4f519320bfe2225@carto.net>
 <20201112091221.rhrmdnmksnkphvik@norbit.de>
 <b6da5be8b1098d698bd9790702c1d60a@carto.net>
 <CAC_qv=q-F0m_TAOpaVhofewZwnZz=o4fgCVgnKA43u+xe-H-=w@mail.gmail.com>
Message-ID: <0fb6317d66a262dc3e4078a9f4e2f6ca@carto.net>

Hi, 

I can report back that master doesn't crash any more with qt5.9.5 when
opening the Options dialogue. 

I also see that it has been backported to 3.16. So I will check there as
well. 

Thanks a lot to all of you - much appreciated! 

Andreas 

On 2020-11-12 10:25, Mathieu Pellerin wrote:

> The fix was committed hours ago :) 
> 
> On Thu, Nov 12, 2020 at 4:23 PM Andreas Neumann <a.neumann at carto.net> wrote: 
> 
> Hi, 
> 
> Thank you Jürgen and Mathieu for your replies! 
> 
> Hm - but my build is from "yesterday". and the issues you mention had been committed about 2 weeks ago? 
> 
> Anyway - I am currently recompiling (with debug this time) to see if it is fixed. Maybe https://github.com/qgis/QGIS/commit/c4306e18e85145c43331fc871bfb2691dcd55505 will help, as Mathieu mentioned. 
> 
> I have qt 5.9.5 on this Ubuntu 18.04. i will also test on a newer machine on Ubuntu 20.04 and qt 5.12.8 
> 
> Will report back if my issues are fixed 
> 
> Andreas 
> 
> On 2020-11-12 10:12, Jürgen E. Fischer wrote: 
> Hi Andreas,
> 
> On Thu, 12. Nov 2020 at 10:01:56 +0100, Andreas Neumann wrote: Both QGIS master and recent 3.16 builds are crashing for me if I open
> the "Options" dialogue (Menu "Settings" --> "Options"). 3.14 and lower
> are fine, so not a general issue with my machine or profile. 
> I remember that Richard hat a similar issue related to non-english
> languages with crash when opening the Options dialogue, but in my case
> it is all in English at the moment. 
> I think this is already fixed:
> 
> https://github.com/qgis/QGIS/issues/39693
> https://github.com/qgis/QGIS/issues/39725
> 
> Jürgen 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

 _______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer 
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201112/f67a2ee4/attachment.html>

From luipir at gmail.com  Thu Nov 12 04:29:22 2020
From: luipir at gmail.com (Luigi Pirelli)
Date: Thu, 12 Nov 2020 13:29:22 +0100
Subject: [QGIS-Developer] QGIS master and 3.16 dev version crashing when
 opening Options dialogue
In-Reply-To: <0fb6317d66a262dc3e4078a9f4e2f6ca@carto.net>
References: <804518abd6fe3848e4f519320bfe2225@carto.net>
 <20201112091221.rhrmdnmksnkphvik@norbit.de>
 <b6da5be8b1098d698bd9790702c1d60a@carto.net>
 <CAC_qv=q-F0m_TAOpaVhofewZwnZz=o4fgCVgnKA43u+xe-H-=w@mail.gmail.com>
 <0fb6317d66a262dc3e4078a9f4e2f6ca@carto.net>
Message-ID: <CAFO80_rP3=wiHwwSxUs2z+rTzDYUsbCi2PbQjGVt2zPTeEpfUA@mail.gmail.com>

fiuuuuuu ;)

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Thu, 12 Nov 2020 at 12:21, Andreas Neumann <a.neumann at carto.net> wrote:

> Hi,
>
> I can report back that master doesn't crash any more with qt5.9.5 when
> opening the Options dialogue.
>
> I also see that it has been backported to 3.16. So I will check there as
> well.
>
> Thanks a lot to all of you - much appreciated!
>
> Andreas
>
> On 2020-11-12 10:25, Mathieu Pellerin wrote:
>
> The fix was committed hours ago :)
>
> On Thu, Nov 12, 2020 at 4:23 PM Andreas Neumann <a.neumann at carto.net>
> wrote:
>
> Hi,
>
> Thank you Jürgen and Mathieu for your replies!
>
> Hm - but my build is from "yesterday". and the issues you mention had been
> committed about 2 weeks ago?
>
> Anyway - I am currently recompiling (with debug this time) to see if it is
> fixed. Maybe
> https://github.com/qgis/QGIS/commit/c4306e18e85145c43331fc871bfb2691dcd55505 will
> help, as Mathieu mentioned.
>
> I have qt 5.9.5 on this Ubuntu 18.04. i will also test on a newer machine
> on Ubuntu 20.04 and qt 5.12.8
>
> Will report back if my issues are fixed
>
> Andreas
>
> On 2020-11-12 10:12, Jürgen E. Fischer wrote:
>
> Hi Andreas,
>
> On Thu, 12. Nov 2020 at 10:01:56 +0100, Andreas Neumann wrote:
>
> Both QGIS master and recent 3.16 builds are crashing for me if I open
> the "Options" dialogue (Menu "Settings" --> "Options"). 3.14 and lower
> are fine, so not a general issue with my machine or profile.
>
>
> I remember that Richard hat a similar issue related to non-english
> languages with crash when opening the Options dialogue, but in my case
> it is all in English at the moment.
>
>
> I think this is already fixed:
>
> https://github.com/qgis/QGIS/issues/39693
> https://github.com/qgis/QGIS/issues/39725
>
>
> Jürgen
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201112/a4148f2c/attachment.html>

From andreas at qgis.org  Thu Nov 12 05:26:07 2020
From: andreas at qgis.org (Andreas Neumann)
Date: Thu, 12 Nov 2020 14:26:07 +0100
Subject: [QGIS-Developer] QGIS master and 3.16 dev version crashing when
 opening Options dialogue
In-Reply-To: <CAFO80_rP3=wiHwwSxUs2z+rTzDYUsbCi2PbQjGVt2zPTeEpfUA@mail.gmail.com>
References: <804518abd6fe3848e4f519320bfe2225@carto.net>
 <20201112091221.rhrmdnmksnkphvik@norbit.de>
 <b6da5be8b1098d698bd9790702c1d60a@carto.net>
 <CAC_qv=q-F0m_TAOpaVhofewZwnZz=o4fgCVgnKA43u+xe-H-=w@mail.gmail.com>
 <0fb6317d66a262dc3e4078a9f4e2f6ca@carto.net>
 <CAFO80_rP3=wiHwwSxUs2z+rTzDYUsbCi2PbQjGVt2zPTeEpfUA@mail.gmail.com>
Message-ID: <CAB2Z92C5Lri9zjpQJsnceJYsEfzFq38HJGe0OzGDqsXynwzFBw@mail.gmail.com>

And the QGIS 3.16 branch is now also fine ;-)

Thanks,
Andreas


On Thu, 12 Nov 2020 at 13:29, Luigi Pirelli <luipir at gmail.com> wrote:

> fiuuuuuu ;)
>
> Luigi Pirelli
>
>
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Book: Mastering QGIS3 - 3rd Edition
> <https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
> * Hire a team: http://www.qcooperative.net
>
> **************************************************************************************************
>
>
> On Thu, 12 Nov 2020 at 12:21, Andreas Neumann <a.neumann at carto.net> wrote:
>
>> Hi,
>>
>> I can report back that master doesn't crash any more with qt5.9.5 when
>> opening the Options dialogue.
>>
>> I also see that it has been backported to 3.16. So I will check there as
>> well.
>>
>> Thanks a lot to all of you - much appreciated!
>>
>> Andreas
>>
>> On 2020-11-12 10:25, Mathieu Pellerin wrote:
>>
>> The fix was committed hours ago :)
>>
>> On Thu, Nov 12, 2020 at 4:23 PM Andreas Neumann <a.neumann at carto.net>
>> wrote:
>>
>> Hi,
>>
>> Thank you Jürgen and Mathieu for your replies!
>>
>> Hm - but my build is from "yesterday". and the issues you mention had
>> been committed about 2 weeks ago?
>>
>> Anyway - I am currently recompiling (with debug this time) to see if it
>> is fixed. Maybe
>> https://github.com/qgis/QGIS/commit/c4306e18e85145c43331fc871bfb2691dcd55505 will
>> help, as Mathieu mentioned.
>>
>> I have qt 5.9.5 on this Ubuntu 18.04. i will also test on a newer machine
>> on Ubuntu 20.04 and qt 5.12.8
>>
>> Will report back if my issues are fixed
>>
>> Andreas
>>
>> On 2020-11-12 10:12, Jürgen E. Fischer wrote:
>>
>> Hi Andreas,
>>
>> On Thu, 12. Nov 2020 at 10:01:56 +0100, Andreas Neumann wrote:
>>
>> Both QGIS master and recent 3.16 builds are crashing for me if I open
>> the "Options" dialogue (Menu "Settings" --> "Options"). 3.14 and lower
>> are fine, so not a general issue with my machine or profile.
>>
>>
>> I remember that Richard hat a similar issue related to non-english
>> languages with crash when opening the Options dialogue, but in my case
>> it is all in English at the moment.
>>
>>
>> I think this is already fixed:
>>
>> https://github.com/qgis/QGIS/issues/39693
>> https://github.com/qgis/QGIS/issues/39725
>>
>>
>> Jürgen
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 

--
Andreas Neumann
QGIS.ORG board member (treasurer)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201112/59bfd363/attachment-0001.html>

From julien.cabieces at oslandia.com  Thu Nov 12 05:24:57 2020
From: julien.cabieces at oslandia.com (Julien Cabieces)
Date: Thu, 12 Nov 2020 14:24:57 +0100
Subject: [QGIS-Developer] Browser: deleteLayer deprecated ?
In-Reply-To: <CAL5Q672nD_S_-5KaFZC1kO5cx4_Mk_SYsfcaF483xMZLEthTww@mail.gmail.com>
References: <193cf2df-e96b-86b9-168b-449b801430d9@duif.net>
 <CAL5Q6705gi2kPFzcA+P9f36xEkfoVpXs6WndoCdv6O4N=ziN7w@mail.gmail.com>
 <2a6e02c1-af12-f68e-f861-63020cb95e4d@duif.net>
 <CAL5Q672nD_S_-5KaFZC1kO5cx4_Mk_SYsfcaF483xMZLEthTww@mail.gmail.com>
Message-ID: <87r1oy1zdi.fsf@julien-laptop.home>


Hi,

I let you know, thanks!

Regards,
Julien


> Glad to hear it!
>
> @Julien Cabieces  the connections API is relatively young and it may
> not fit well with ORACLE table models, let me know if you run into any
> issues.
>
> Kind regards.
>
>
> On Wed, Nov 11, 2020 at 6:53 AM Richard Duivenvoorde
> <rdmailings at duif.net> wrote:
>>
>> On 11/10/20 9:31 AM, Alessandro Pasotti wrote:
>>
>> > one way to integrate a provider in the browser is to implement the
>> > connections API:
>> > https://qgis.org/api/classQgsAbstractDatabaseProviderConnection.html#details
>> >
>> > When it's done, all the generic methods implemented in the browser
>> > will automatically work, see
>> >
>> > QgsDatabaseItemGuiProvider::populateContextMenu
>> > QgsFieldsItemGuiProvider::populateContextMenu
>> >
>> > For a sample implementation you could have a look to the PG provider.
>> >
>> > You may need to subclass the GUI provider in case the base
>> > functionality is not ok, the PG provider does that for some methods
>> > too, so the answer is yes: you need to create a GUI provider for the
>> > provider or you can choose to abstract out the PG provider and create
>> > a base class if you see that there is a common ground for abstraction.
>>
>> Thanks Alessandro,
>>
>> I had a chat with Julien (Oslandia) and he told me they had some funding to work on the Oracle provider, and that your proposal above was exactly what he was going to do. So: fingers crossed :-)
>>
>> Regards,
>>
>> Richard
>>
>>
>>
>>


From enrico.chiaradia at yahoo.it  Thu Nov 12 05:40:11 2020
From: enrico.chiaradia at yahoo.it (enrico chiaradia)
Date: Thu, 12 Nov 2020 14:40:11 +0100
Subject: [QGIS-Developer] PyQgis: custom form and enable (trusted) macro
References: <c8913760-ebda-1ad4-7de3-c51c06e4d39c.ref@yahoo.it>
Message-ID: <c8913760-ebda-1ad4-7de3-c51c06e4d39c@yahoo.it>

Dear Devs,

I’m working to a new plugin for qgis 3.10 that use macro to customize 
attribute forms behaviour (e.g. openForm, etc…). For security reason, 
macros are not enabled by default in QGIS and so, each time you open the 
attribute table/form view, it asks to enable macro. That sounds boring 
for the final user…

I can manually resolve this modifying the option “enable macros” to “For 
this session only” or, by PyQgis, editing the QgsSettings, key 
“qgis/enableMacros” to “SessionOnly” and restore old configuration 
options after plugin unloads.

The problem is that, during the sessions, all the macros are enabled 
showing a security issue. Is there a way to run only trusted macros, for 
example stored under my plugin folder?

Many thanks

enrico

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201112/8d1a5e4b/attachment-0001.html>

From apasotti at gmail.com  Thu Nov 12 05:53:21 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 12 Nov 2020 14:53:21 +0100
Subject: [QGIS-Developer] Storing a copy of map canvas extent in QgsProject
	(for server)
Message-ID: <CAL5Q673fTg29zcgBgeQOQ=SqpbV+ot8La8ANmtKKw0Mg8=hwzg@mail.gmail.com>

Hi,

The new landing page server core API module makes use of the canvas
extent to determine the initial extent of the map being shown in the
web gis viewer.

If I'm not mistaken, that value is only available in map canvas and
it's not available in the server context. My current workaround mimics
what happens in the desktop when QgsProject::readProject is emitted.

This prevents me from using the server's config (project) cache and
results in an unnecessary additional project read when the server
landing page API is accessed for the first time.

I was thinking of storing that value directly in QgsProject instances
as "initialExtent()" by reading it from the "mapcanvas" xml tag, I'm
not super-happy with that because that would be a duplication but I
cannot see another way to access that information without re-reading
the project.

Any idea or comment before I proceed?

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From adenaculture at gmail.com  Thu Nov 12 06:34:39 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Thu, 12 Nov 2020 09:34:39 -0500
Subject: [QGIS-Developer] iface.openFeatureForm() Does Not Populate Form
	With Defaults
Message-ID: <CABPxTToUvmPH7keuB6vwoN1_z5OKTNrcoz2C9hA1QPDowNQGcw@mail.gmail.com>

In one of my plugins I call

iface.openFeatureForm(layer, feature_being_added, False)

but it does not pre populate the form with the defaults that are set up in
the Layer properties->Attributes Form->Defaults.

If you use the standard "Add Point feature" the default values are properly
set. Is there something else I need to do with openFeatureForm to get the
default values?

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201112/1c20343f/attachment.html>

From rdmailings at duif.net  Thu Nov 12 06:45:08 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 12 Nov 2020 15:45:08 +0100
Subject: [QGIS-Developer] QtCreator does not start QGIS?
In-Reply-To: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>
References: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>
Message-ID: <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>

Still having troubles starting QGIS in debug in QtCreator in my setup today.

See https://duif.net/qc.png

So QGIS (in QtCreator) starts, and during startup it stops and shows me the dissassembler(?) view. Sometimes I can see something (like in this screendump: something with libnss ?) sometimes all is white/empty.

Last this I in the log is: "Destroyed while process ("whoami"), which according to git is recently changed but... does not seem related to me:
https://github.com/qgis/QGIS/commit/7a38388a8762503b0bdba55065fffea2ff24137a

Regards,

Richard



On 11/11/20 9:16 AM, Richard Duivenvoorde wrote:
> Hi,
> 
> Currently in my Qt build I cannot debug QGIS in qtcreator because it hangs/stops when showing the splash.
> After some time the Application Output shows:
> 
> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [60891ms] [thread:0x5555560d9d00] 2020-11-11T08:58:15 [1] HTTP fetch https://feed.qgis.org/?after=1605081272&lang=en failed with error Operation canceled
> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] [thread:0x5555560d9d00] 2020-11-11T08:58:15 Network[1] Network request https://feed.qgis.org/?after=1605081272&lang=en timed out
> 
> I am connected, and https://feed.qgis.org/?after=1605081272&lang=en is available from my browser.
> 
> Disabling: 'Show QGIS news feed on welcome page' and 'Check QGIS version at startup' fix this.
> 
> Others have this issue currently?
> 
> (I hit my head also with this sometimes when in mixed/http proxied environments
> I still think we should use 'opt in' for these 'QGIS phoning home stuff' instead of 'opt out')
> 
> Regards,
> 
> Richard Duivenvoorde
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


From rdmailings at duif.net  Thu Nov 12 06:51:39 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 12 Nov 2020 15:51:39 +0100
Subject: [QGIS-Developer] CMYK implementation in QGIS?
In-Reply-To: <1605112993933-0.post@n6.nabble.com>
References: <CA+H0G_HnqJ4TL0p1nD6ErnLTpzS-5dQtyjpdLchaX8GR5Kcr5w@mail.gmail.com>
 <CAB28AsiiDxqp=rL4b2b+yWQMZc=0snHnxmu_5L8LuL74XN=8Vg@mail.gmail.com>
 <CA+H0G_ELwG7JXizm+4p7pyHgcobZHwrV+F3o_D84ci555-iPSw@mail.gmail.com>
 <1605112993933-0.post@n6.nabble.com>
Message-ID: <140aa49f-11e6-9185-a6e2-5911e8bb64b6@duif.net>

On 11/11/20 5:43 PM, Stefano Campus wrote:
> ciao,
> do you know if there are any plans for Qt libraries to support the output
> layout in CMYK?

Don't know about plans of Qt, but I hit this issue today about CMYK in QGIS:

https://github.com/qgis/QGIS/issues/32754

it has some general info.

Regards,

Richard Duivenvoorde

From luipir at gmail.com  Thu Nov 12 08:34:50 2020
From: luipir at gmail.com (Luigi Pirelli)
Date: Thu, 12 Nov 2020 17:34:50 +0100
Subject: [QGIS-Developer] QtCreator does not start QGIS?
In-Reply-To: <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>
References: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>
 <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>
Message-ID: <CAFO80_rubi+mX3TB2PtXw527Kia0JbX26tzPbW89Ms7ibsnCuA@mail.gmail.com>

I had many problems these days compiling qgis in qtcreator... solved
removing the build directory and the generated
CMakeLists.txt.user

then run cmake again and compile from scratch... this solved in my case
(was compiled without python and other strange stuffs)... no idea if this
can help

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Thu, 12 Nov 2020 at 15:45, Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> Still having troubles starting QGIS in debug in QtCreator in my setup
> today.
>
> See https://duif.net/qc.png
>
> So QGIS (in QtCreator) starts, and during startup it stops and shows me
> the dissassembler(?) view. Sometimes I can see something (like in this
> screendump: something with libnss ?) sometimes all is white/empty.
>
> Last this I in the log is: "Destroyed while process ("whoami"), which
> according to git is recently changed but... does not seem related to me:
>
> https://github.com/qgis/QGIS/commit/7a38388a8762503b0bdba55065fffea2ff24137a
>
> Regards,
>
> Richard
>
>
>
> On 11/11/20 9:16 AM, Richard Duivenvoorde wrote:
> > Hi,
> >
> > Currently in my Qt build I cannot debug QGIS in qtcreator because it
> hangs/stops when showing the splash.
> > After some time the Application Output shows:
> >
> > ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [60891ms]
> [thread:0x5555560d9d00] 2020-11-11T08:58:15 [1] HTTP fetch
> https://feed.qgis.org/?after=1605081272&lang=en failed with error
> Operation canceled
> > ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms]
> [thread:0x5555560d9d00] 2020-11-11T08:58:15 Network[1] Network request
> https://feed.qgis.org/?after=1605081272&lang=en timed out
> >
> > I am connected, and https://feed.qgis.org/?after=1605081272&lang=en is
> available from my browser.
> >
> > Disabling: 'Show QGIS news feed on welcome page' and 'Check QGIS version
> at startup' fix this.
> >
> > Others have this issue currently?
> >
> > (I hit my head also with this sometimes when in mixed/http proxied
> environments
> > I still think we should use 'opt in' for these 'QGIS phoning home stuff'
> instead of 'opt out')
> >
> > Regards,
> >
> > Richard Duivenvoorde
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201112/d2d3795b/attachment.html>

From manisandro at gmail.com  Thu Nov 12 09:00:32 2020
From: manisandro at gmail.com (Sandro Mani)
Date: Thu, 12 Nov 2020 18:00:32 +0100
Subject: [QGIS-Developer] QtCreator does not start QGIS?
In-Reply-To: <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>
References: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>
 <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>
Message-ID: <4fdcdf86-dbb0-7823-33dc-28d7e4bec855@gmail.com>

Hi Richard

If you are using Qt5.15.{0,1} and are getting random SIGTRAPS, or the 
process segfaulting straight after starting through gdb, this might be [1].

Sandro

[1] https://bugreports.qt.io/browse/QTBUG-86319

On 12.11.20 15:45, Richard Duivenvoorde wrote:
> Still having troubles starting QGIS in debug in QtCreator in my setup today.
>
> See https://duif.net/qc.png
>
> So QGIS (in QtCreator) starts, and during startup it stops and shows me the dissassembler(?) view. Sometimes I can see something (like in this screendump: something with libnss ?) sometimes all is white/empty.
>
> Last this I in the log is: "Destroyed while process ("whoami"), which according to git is recently changed but... does not seem related to me:
> https://github.com/qgis/QGIS/commit/7a38388a8762503b0bdba55065fffea2ff24137a
>
> Regards,
>
> Richard
>
>
>
> On 11/11/20 9:16 AM, Richard Duivenvoorde wrote:
>> Hi,
>>
>> Currently in my Qt build I cannot debug QGIS in qtcreator because it hangs/stops when showing the splash.
>> After some time the Application Output shows:
>>
>> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [60891ms] [thread:0x5555560d9d00] 2020-11-11T08:58:15 [1] HTTP fetch https://feed.qgis.org/?after=1605081272&lang=en failed with error Operation canceled
>> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] [thread:0x5555560d9d00] 2020-11-11T08:58:15 Network[1] Network request https://feed.qgis.org/?after=1605081272&lang=en timed out
>>
>> I am connected, and https://feed.qgis.org/?after=1605081272&lang=en is available from my browser.
>>
>> Disabling: 'Show QGIS news feed on welcome page' and 'Check QGIS version at startup' fix this.
>>
>> Others have this issue currently?
>>
>> (I hit my head also with this sometimes when in mixed/http proxied environments
>> I still think we should use 'opt in' for these 'QGIS phoning home stuff' instead of 'opt out')
>>
>> Regards,
>>
>> Richard Duivenvoorde
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From rdmailings at duif.net  Thu Nov 12 09:51:41 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 12 Nov 2020 18:51:41 +0100
Subject: [QGIS-Developer] QtCreator does not start QGIS?
In-Reply-To: <4fdcdf86-dbb0-7823-33dc-28d7e4bec855@gmail.com>
References: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>
 <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>
 <4fdcdf86-dbb0-7823-33dc-28d7e4bec855@gmail.com>
Message-ID: <6d943706-97dd-a4a1-5ab2-71ec6f3381fe@duif.net>

Ough, yes, that looks like it (5.15.1)... 

Thanks Sandro for checking.

The 'random' qtcreator crashes at startup indeed all show 'sigtraps'...
And I also thought that it has something todo with the process.start stuff.

I see QProcess in a lot of places, so I do not think I can disable parts of QGIS compile?

Mmm this is bad (for me & other Testing Debianista's). Hoping there will be a fixed version (qt) soon..
Other options?
Downgrade Qt?
Compile Qt myself?
Install Fedora on another machine (which Qt is there?)?

Sigh 0o.

Richard

On 11/12/20 6:00 PM, Sandro Mani wrote:
> Hi Richard
> 
> If you are using Qt5.15.{0,1} and are getting random SIGTRAPS, or the process segfaulting straight after starting through gdb, this might be [1].
> 
> Sandro
> 
> [1] https://bugreports.qt.io/browse/QTBUG-86319
> 
> On 12.11.20 15:45, Richard Duivenvoorde wrote:
>> Still having troubles starting QGIS in debug in QtCreator in my setup today.
>>
>> See https://duif.net/qc.png
>>
>> So QGIS (in QtCreator) starts, and during startup it stops and shows me the dissassembler(?) view. Sometimes I can see something (like in this screendump: something with libnss ?) sometimes all is white/empty.
>>
>> Last this I in the log is: "Destroyed while process ("whoami"), which according to git is recently changed but... does not seem related to me:
>> https://github.com/qgis/QGIS/commit/7a38388a8762503b0bdba55065fffea2ff24137a
>>
>> Regards,
>>
>> Richard
>>
>>
>>
>> On 11/11/20 9:16 AM, Richard Duivenvoorde wrote:
>>> Hi,
>>>
>>> Currently in my Qt build I cannot debug QGIS in qtcreator because it hangs/stops when showing the splash.
>>> After some time the Application Output shows:
>>>
>>> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [60891ms] [thread:0x5555560d9d00] 2020-11-11T08:58:15 [1] HTTP fetch https://feed.qgis.org/?after=1605081272&lang=en failed with error Operation canceled
>>> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] [thread:0x5555560d9d00] 2020-11-11T08:58:15 Network[1] Network request https://feed.qgis.org/?after=1605081272&lang=en timed out
>>>
>>> I am connected, and https://feed.qgis.org/?after=1605081272&lang=en is available from my browser.
>>>
>>> Disabling: 'Show QGIS news feed on welcome page' and 'Check QGIS version at startup' fix this.
>>>
>>> Others have this issue currently?
>>>
>>> (I hit my head also with this sometimes when in mixed/http proxied environments
>>> I still think we should use 'opt in' for these 'QGIS phoning home stuff' instead of 'opt out')
>>>
>>> Regards,
>>>
>>> Richard Duivenvoorde
>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From apasotti at gmail.com  Thu Nov 12 10:17:44 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 12 Nov 2020 19:17:44 +0100
Subject: [QGIS-Developer] QtCreator does not start QGIS?
In-Reply-To: <6d943706-97dd-a4a1-5ab2-71ec6f3381fe@duif.net>
References: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>
 <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>
 <4fdcdf86-dbb0-7823-33dc-28d7e4bec855@gmail.com>
 <6d943706-97dd-a4a1-5ab2-71ec6f3381fe@duif.net>
Message-ID: <CAL5Q671MHOEnSTfK7jF7tQOczGJNTSt3zLbzKVkfhvitezTLRg@mail.gmail.com>

I switched to QT binaries and sources provided by the QT maintenance tool
and that's my way to Nirvana.

I self-build PyQt all the others dependencies.

Cheers



On Thu, Nov 12, 2020, 18:51 Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> Ough, yes, that looks like it (5.15.1)...
>
> Thanks Sandro for checking.
>
> The 'random' qtcreator crashes at startup indeed all show 'sigtraps'...
> And I also thought that it has something todo with the process.start stuff.
>
> I see QProcess in a lot of places, so I do not think I can disable parts
> of QGIS compile?
>
> Mmm this is bad (for me & other Testing Debianista's). Hoping there will
> be a fixed version (qt) soon..
> Other options?
> Downgrade Qt?
> Compile Qt myself?
> Install Fedora on another machine (which Qt is there?)?
>
> Sigh 0o.
>
> Richard
>
> On 11/12/20 6:00 PM, Sandro Mani wrote:
> > Hi Richard
> >
> > If you are using Qt5.15.{0,1} and are getting random SIGTRAPS, or the
> process segfaulting straight after starting through gdb, this might be [1].
> >
> > Sandro
> >
> > [1] https://bugreports.qt.io/browse/QTBUG-86319
> >
> > On 12.11.20 15:45, Richard Duivenvoorde wrote:
> >> Still having troubles starting QGIS in debug in QtCreator in my setup
> today.
> >>
> >> See https://duif.net/qc.png
> >>
> >> So QGIS (in QtCreator) starts, and during startup it stops and shows me
> the dissassembler(?) view. Sometimes I can see something (like in this
> screendump: something with libnss ?) sometimes all is white/empty.
> >>
> >> Last this I in the log is: "Destroyed while process ("whoami"), which
> according to git is recently changed but... does not seem related to me:
> >>
> https://github.com/qgis/QGIS/commit/7a38388a8762503b0bdba55065fffea2ff24137a
> >>
> >> Regards,
> >>
> >> Richard
> >>
> >>
> >>
> >> On 11/11/20 9:16 AM, Richard Duivenvoorde wrote:
> >>> Hi,
> >>>
> >>> Currently in my Qt build I cannot debug QGIS in qtcreator because it
> hangs/stops when showing the splash.
> >>> After some time the Application Output shows:
> >>>
> >>> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [60891ms]
> [thread:0x5555560d9d00] 2020-11-11T08:58:15 [1] HTTP fetch
> https://feed.qgis.org/?after=1605081272&lang=en failed with error
> Operation canceled
> >>> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms]
> [thread:0x5555560d9d00] 2020-11-11T08:58:15 Network[1] Network request
> https://feed.qgis.org/?after=1605081272&lang=en timed out
> >>>
> >>> I am connected, and https://feed.qgis.org/?after=1605081272&lang=en
> is available from my browser.
> >>>
> >>> Disabling: 'Show QGIS news feed on welcome page' and 'Check QGIS
> version at startup' fix this.
> >>>
> >>> Others have this issue currently?
> >>>
> >>> (I hit my head also with this sometimes when in mixed/http proxied
> environments
> >>> I still think we should use 'opt in' for these 'QGIS phoning home
> stuff' instead of 'opt out')
> >>>
> >>> Regards,
> >>>
> >>> Richard Duivenvoorde
> >>>
> >>> _______________________________________________
> >>> QGIS-Developer mailing list
> >>> QGIS-Developer at lists.osgeo.org
> >>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>>
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201112/e927565a/attachment.html>

From manisandro at gmail.com  Thu Nov 12 10:29:45 2020
From: manisandro at gmail.com (Sandro Mani)
Date: Thu, 12 Nov 2020 19:29:45 +0100
Subject: [QGIS-Developer] QtCreator does not start QGIS?
In-Reply-To: <CAL5Q671MHOEnSTfK7jF7tQOczGJNTSt3zLbzKVkfhvitezTLRg@mail.gmail.com>
References: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>
 <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>
 <4fdcdf86-dbb0-7823-33dc-28d7e4bec855@gmail.com>
 <6d943706-97dd-a4a1-5ab2-71ec6f3381fe@duif.net>
 <CAL5Q671MHOEnSTfK7jF7tQOczGJNTSt3zLbzKVkfhvitezTLRg@mail.gmail.com>
Message-ID: <6f4f2c50-c202-047e-98e9-2e381854a58b@gmail.com>

As for Fedora, F33 and F34 have fixed packages, but I see that the F33 
update was never submitted by the maintainer - I've done so now [1].

Best
Sandro

[1] https://bodhi.fedoraproject.org/updates/FEDORA-2020-1893aa323f


On 12.11.20 19:17, Alessandro Pasotti wrote:
> I switched to QT binaries and sources provided by the QT maintenance 
> tool and that's my way to Nirvana.
>
> I self-build PyQt all the others dependencies.
>
> Cheers
>
>
>
> On Thu, Nov 12, 2020, 18:51 Richard Duivenvoorde <rdmailings at duif.net 
> <mailto:rdmailings at duif.net>> wrote:
>
>     Ough, yes, that looks like it (5.15.1)...
>
>     Thanks Sandro for checking.
>
>     The 'random' qtcreator crashes at startup indeed all show
>     'sigtraps'...
>     And I also thought that it has something todo with the
>     process.start stuff.
>
>     I see QProcess in a lot of places, so I do not think I can disable
>     parts of QGIS compile?
>
>     Mmm this is bad (for me & other Testing Debianista's). Hoping
>     there will be a fixed version (qt) soon..
>     Other options?
>     Downgrade Qt?
>     Compile Qt myself?
>     Install Fedora on another machine (which Qt is there?)?
>
>     Sigh 0o.
>
>     Richard
>
>     On 11/12/20 6:00 PM, Sandro Mani wrote:
>     > Hi Richard
>     >
>     > If you are using Qt5.15.{0,1} and are getting random SIGTRAPS,
>     or the process segfaulting straight after starting through gdb,
>     this might be [1].
>     >
>     > Sandro
>     >
>     > [1] https://bugreports.qt.io/browse/QTBUG-86319
>     <https://bugreports.qt.io/browse/QTBUG-86319>
>     >
>     > On 12.11.20 15:45, Richard Duivenvoorde wrote:
>     >> Still having troubles starting QGIS in debug in QtCreator in my
>     setup today.
>     >>
>     >> See https://duif.net/qc.png <https://duif.net/qc.png>
>     >>
>     >> So QGIS (in QtCreator) starts, and during startup it stops and
>     shows me the dissassembler(?) view. Sometimes I can see something
>     (like in this screendump: something with libnss ?) sometimes all
>     is white/empty.
>     >>
>     >> Last this I in the log is: "Destroyed while process ("whoami"),
>     which according to git is recently changed but... does not seem
>     related to me:
>     >>
>     https://github.com/qgis/QGIS/commit/7a38388a8762503b0bdba55065fffea2ff24137a
>     <https://github.com/qgis/QGIS/commit/7a38388a8762503b0bdba55065fffea2ff24137a>
>     >>
>     >> Regards,
>     >>
>     >> Richard
>     >>
>     >>
>     >>
>     >> On 11/11/20 9:16 AM, Richard Duivenvoorde wrote:
>     >>> Hi,
>     >>>
>     >>> Currently in my Qt build I cannot debug QGIS in qtcreator
>     because it hangs/stops when showing the splash.
>     >>> After some time the Application Output shows:
>     >>>
>     >>> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [60891ms]
>     [thread:0x5555560d9d00] 2020-11-11T08:58:15 [1] HTTP fetch
>     https://feed.qgis.org/?after=1605081272&lang=en
>     <https://feed.qgis.org/?after=1605081272&lang=en> failed with
>     error Operation canceled
>     >>> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms]
>     [thread:0x5555560d9d00] 2020-11-11T08:58:15 Network[1] Network
>     request https://feed.qgis.org/?after=1605081272&lang=en
>     <https://feed.qgis.org/?after=1605081272&lang=en> timed out
>     >>>
>     >>> I am connected, and
>     https://feed.qgis.org/?after=1605081272&lang=en
>     <https://feed.qgis.org/?after=1605081272&lang=en> is available
>     from my browser.
>     >>>
>     >>> Disabling: 'Show QGIS news feed on welcome page' and 'Check
>     QGIS version at startup' fix this.
>     >>>
>     >>> Others have this issue currently?
>     >>>
>     >>> (I hit my head also with this sometimes when in mixed/http
>     proxied environments
>     >>> I still think we should use 'opt in' for these 'QGIS phoning
>     home stuff' instead of 'opt out')
>     >>>
>     >>> Regards,
>     >>>
>     >>> Richard Duivenvoorde
>     >>>
>     >>> _______________________________________________
>     >>> QGIS-Developer mailing list
>     >>> QGIS-Developer at lists.osgeo.org
>     <mailto:QGIS-Developer at lists.osgeo.org>
>     >>> List info:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     >>> Unsubscribe:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     >>>
>     >> _______________________________________________
>     >> QGIS-Developer mailing list
>     >> QGIS-Developer at lists.osgeo.org
>     <mailto:QGIS-Developer at lists.osgeo.org>
>     >> List info:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     >> Unsubscribe:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     > _______________________________________________
>     > QGIS-Developer mailing list
>     > QGIS-Developer at lists.osgeo.org
>     <mailto:QGIS-Developer at lists.osgeo.org>
>     > List info:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     > Unsubscribe:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     Unsubscribe:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201112/0ceed9f8/attachment-0001.html>

From nyall.dawson at gmail.com  Thu Nov 12 19:36:03 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 13 Nov 2020 13:36:03 +1000
Subject: [QGIS-Developer] QtCreator does not start QGIS?
In-Reply-To: <6f4f2c50-c202-047e-98e9-2e381854a58b@gmail.com>
References: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>
 <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>
 <4fdcdf86-dbb0-7823-33dc-28d7e4bec855@gmail.com>
 <6d943706-97dd-a4a1-5ab2-71ec6f3381fe@duif.net>
 <CAL5Q671MHOEnSTfK7jF7tQOczGJNTSt3zLbzKVkfhvitezTLRg@mail.gmail.com>
 <6f4f2c50-c202-047e-98e9-2e381854a58b@gmail.com>
Message-ID: <CAB28AsizNAOTYZbKBcAMtUJ=M9nCnAd9LGy3MRxVdoTcFsvPJg@mail.gmail.com>

On Fri, 13 Nov 2020 at 04:30, Sandro Mani <manisandro at gmail.com> wrote:
>
> As for Fedora, F33 and F34 have fixed packages, but I see that the F33 update was never submitted by the maintainer - I've done so now [1].

HUGE thanks Sandro -- this has been a big source of frustration since
upgrading to F33, and was really killing my productivity!

Nyall


>
> Best
> Sandro
>
> [1] https://bodhi.fedoraproject.org/updates/FEDORA-2020-1893aa323f
>
>
> On 12.11.20 19:17, Alessandro Pasotti wrote:
>
> I switched to QT binaries and sources provided by the QT maintenance tool and that's my way to Nirvana.
>
> I self-build PyQt all the others dependencies.
>
> Cheers
>
>
>
> On Thu, Nov 12, 2020, 18:51 Richard Duivenvoorde <rdmailings at duif.net> wrote:
>>
>> Ough, yes, that looks like it (5.15.1)...
>>
>> Thanks Sandro for checking.
>>
>> The 'random' qtcreator crashes at startup indeed all show 'sigtraps'...
>> And I also thought that it has something todo with the process.start stuff.
>>
>> I see QProcess in a lot of places, so I do not think I can disable parts of QGIS compile?
>>
>> Mmm this is bad (for me & other Testing Debianista's). Hoping there will be a fixed version (qt) soon..
>> Other options?
>> Downgrade Qt?
>> Compile Qt myself?
>> Install Fedora on another machine (which Qt is there?)?
>>
>> Sigh 0o.
>>
>> Richard
>>
>> On 11/12/20 6:00 PM, Sandro Mani wrote:
>> > Hi Richard
>> >
>> > If you are using Qt5.15.{0,1} and are getting random SIGTRAPS, or the process segfaulting straight after starting through gdb, this might be [1].
>> >
>> > Sandro
>> >
>> > [1] https://bugreports.qt.io/browse/QTBUG-86319
>> >
>> > On 12.11.20 15:45, Richard Duivenvoorde wrote:
>> >> Still having troubles starting QGIS in debug in QtCreator in my setup today.
>> >>
>> >> See https://duif.net/qc.png
>> >>
>> >> So QGIS (in QtCreator) starts, and during startup it stops and shows me the dissassembler(?) view. Sometimes I can see something (like in this screendump: something with libnss ?) sometimes all is white/empty.
>> >>
>> >> Last this I in the log is: "Destroyed while process ("whoami"), which according to git is recently changed but... does not seem related to me:
>> >> https://github.com/qgis/QGIS/commit/7a38388a8762503b0bdba55065fffea2ff24137a
>> >>
>> >> Regards,
>> >>
>> >> Richard
>> >>
>> >>
>> >>
>> >> On 11/11/20 9:16 AM, Richard Duivenvoorde wrote:
>> >>> Hi,
>> >>>
>> >>> Currently in my Qt build I cannot debug QGIS in qtcreator because it hangs/stops when showing the splash.
>> >>> After some time the Application Output shows:
>> >>>
>> >>> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [60891ms] [thread:0x5555560d9d00] 2020-11-11T08:58:15 [1] HTTP fetch https://feed.qgis.org/?after=1605081272&lang=en failed with error Operation canceled
>> >>> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] [thread:0x5555560d9d00] 2020-11-11T08:58:15 Network[1] Network request https://feed.qgis.org/?after=1605081272&lang=en timed out
>> >>>
>> >>> I am connected, and https://feed.qgis.org/?after=1605081272&lang=en is available from my browser.
>> >>>
>> >>> Disabling: 'Show QGIS news feed on welcome page' and 'Check QGIS version at startup' fix this.
>> >>>
>> >>> Others have this issue currently?
>> >>>
>> >>> (I hit my head also with this sometimes when in mixed/http proxied environments
>> >>> I still think we should use 'opt in' for these 'QGIS phoning home stuff' instead of 'opt out')
>> >>>
>> >>> Regards,
>> >>>
>> >>> Richard Duivenvoorde
>> >>>
>> >>> _______________________________________________
>> >>> QGIS-Developer mailing list
>> >>> QGIS-Developer at lists.osgeo.org
>> >>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >>>
>> >> _______________________________________________
>> >> QGIS-Developer mailing list
>> >> QGIS-Developer at lists.osgeo.org
>> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > _______________________________________________
>> > QGIS-Developer mailing list
>> > QGIS-Developer at lists.osgeo.org
>> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Thu Nov 12 19:37:35 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 13 Nov 2020 13:37:35 +1000
Subject: [QGIS-Developer] Storing a copy of map canvas extent in
 QgsProject (for server)
In-Reply-To: <CAL5Q673fTg29zcgBgeQOQ=SqpbV+ot8La8ANmtKKw0Mg8=hwzg@mail.gmail.com>
References: <CAL5Q673fTg29zcgBgeQOQ=SqpbV+ot8La8ANmtKKw0Mg8=hwzg@mail.gmail.com>
Message-ID: <CAB28Asj3jtvLw7pVNUJE-QROTbY+wGkrm435bmxXR-iODZDX0Q@mail.gmail.com>

On Thu, 12 Nov 2020 at 23:53, Alessandro Pasotti <apasotti at gmail.com> wrote:
>
> Hi,
>
> The new landing page server core API module makes use of the canvas
> extent to determine the initial extent of the map being shown in the
> web gis viewer.
>
> If I'm not mistaken, that value is only available in map canvas and
> it's not available in the server context. My current workaround mimics
> what happens in the desktop when QgsProject::readProject is emitted.
>
> This prevents me from using the server's config (project) cache and
> results in an unnecessary additional project read when the server
> landing page API is accessed for the first time.
>
> I was thinking of storing that value directly in QgsProject instances
> as "initialExtent()" by reading it from the "mapcanvas" xml tag, I'm
> not super-happy with that because that would be a duplication but I
> cannot see another way to access that information without re-reading
> the project.
>
> Any idea or comment before I proceed?

I'm in favour. I think there's other good use cases for this too -
e.g. giving a stable api for qfield/input to open projects at the
correct map extents.

Can you put the new settings in QgsProjectViewSettings? That's the
ideal place for things like this to reside...

Nyall

From jgr at di.uminho.pt  Fri Nov 13 01:53:03 2020
From: jgr at di.uminho.pt (Jorge Gustavo Rocha)
Date: Fri, 13 Nov 2020 09:53:03 +0000
Subject: [QGIS-Developer] Storing a copy of map canvas extent in
 QgsProject (for server)
In-Reply-To: <CAB28Asj3jtvLw7pVNUJE-QROTbY+wGkrm435bmxXR-iODZDX0Q@mail.gmail.com>
References: <CAL5Q673fTg29zcgBgeQOQ=SqpbV+ot8La8ANmtKKw0Mg8=hwzg@mail.gmail.com>
 <CAB28Asj3jtvLw7pVNUJE-QROTbY+wGkrm435bmxXR-iODZDX0Q@mail.gmail.com>
Message-ID: <64124378-79dc-2025-fb30-073d0c779f3a@di.uminho.pt>

Hi,

(It is more a question, than a contribution).

We already have the extent available in the API, for people opening the
projects, with something like:

        project = QgsProject.instance()
        root = project.layerTreeRoot()
        canvas = QgsMapCanvas()
        bridge = QgsLayerTreeMapCanvasBridge(root, canvas)
        project.read(projectpath)
	e = canvas.extent()

If the user just wants to parse the project's xml, it is also there (the
extent and the extent's CRS).

I think Alessandro was asking for this in the server context, like make
it available in QgsServerProjectUtils.

Regards,

Jorge

Às 03:37 de 13/11/20, Nyall Dawson escreveu:
> On Thu, 12 Nov 2020 at 23:53, Alessandro Pasotti <apasotti at gmail.com> wrote:
>>
>> Hi,
>>
>> The new landing page server core API module makes use of the canvas
>> extent to determine the initial extent of the map being shown in the
>> web gis viewer.
>>
>> If I'm not mistaken, that value is only available in map canvas and
>> it's not available in the server context. My current workaround mimics
>> what happens in the desktop when QgsProject::readProject is emitted.
>>
>> This prevents me from using the server's config (project) cache and
>> results in an unnecessary additional project read when the server
>> landing page API is accessed for the first time.
>>
>> I was thinking of storing that value directly in QgsProject instances
>> as "initialExtent()" by reading it from the "mapcanvas" xml tag, I'm
>> not super-happy with that because that would be a duplication but I
>> cannot see another way to access that information without re-reading
>> the project.
>>
>> Any idea or comment before I proceed?
> 
> I'm in favour. I think there's other good use cases for this too -
> e.g. giving a stable api for qfield/input to open projects at the
> correct map extents.
> 
> Can you put the new settings in QgsProjectViewSettings? That's the
> ideal place for things like this to reside...
> 
> Nyall
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

J. Gustavo
-- 
Jorge Gustavo Rocha
Departamento de Informática
Universidade do Minho
4710-057 Braga
Gabinete 3.29 (Piso 3)
Tel: +351 253604480
Fax: +351 253604471
Móvel: +351 910333888
skype: nabocudnosor

From michal.wloga at envirosolutions.pl  Fri Nov 13 01:29:26 2020
From: michal.wloga at envirosolutions.pl (michal.wloga at envirosolutions.pl)
Date: Fri, 13 Nov 2020 10:29:26 +0100
Subject: [QGIS-Developer] additional qgis news feed
Message-ID: <016701d6b99f$7e08c190$7a1a44b0$@envirosolutions.pl>

Hello Devs,

 

I'm trying to append to QGIS News panel my own messages using python.

I have already set up backend using https://github.com/elpaso/qgis-feed 

It works: https://qgisfeed.envirosolutions.pl/

I can't find out how to fetch it and add to QGIS panel.

 

I'm fetching something from my source:

 

parser = QgsNewsFeedParser(QUrl("https://qgisfeed.envirosolutions.pl/"))

parser.fetch()

parser.entries()

[<qgis._core.QgsNewsFeedParser.Entry object at 0x0000025A5A3C59D8>,
<qgis._core.QgsNewsFeedParser.Entry object at 0x0000025A5A3C5AF8>]

 

I'm fetching also from feed.qgis.org:

 

parser2 = QgsNewsFeedParser(QUrl("https://feed.qgis.org/"))

parser2.fetch()

parser2.entries()

[<qgis._core.QgsNewsFeedParser.Entry object at 0x0000021B5C1D1168>]

 

But I need to add it somehow to QGIS interface. How can I do this?

Regards,

EnviroSolutions Sp. z o. o.
Michał Włoga
 <mailto:coo at envirosolutions.pl> coo at envirosolutions.pl
 <http://www.envirosolutions.pl/szkolenia> www.envirosolutions.pl

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201113/4e9c7396/attachment.html>

From anitagraser at gmx.at  Fri Nov 13 04:45:36 2020
From: anitagraser at gmx.at (Anita Graser)
Date: Fri, 13 Nov 2020 13:45:36 +0100
Subject: [QGIS-Developer] Issue tags relating to Temporal Controller
Message-ID: <638397cd-e08c-8360-3613-7de56ca63a83@gmx.at>

Hi,

Some Issues related to the Temporal Controller are currently tagged with
"Time controller", others with "Temporal" and some don't have any
specific tags:

https://github.com/qgis/QGIS/issues?q=is%3Aissue+is%3Aopen+temporal

Can we consolidate this? I can do it if somebody gives me the necessary
rights. (I currently cannot change issue tags.)

Regards,

Anita


From nyall.dawson at gmail.com  Fri Nov 13 15:40:53 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Sat, 14 Nov 2020 09:40:53 +1000
Subject: [QGIS-Developer] additional qgis news feed
In-Reply-To: <016701d6b99f$7e08c190$7a1a44b0$@envirosolutions.pl>
References: <016701d6b99f$7e08c190$7a1a44b0$@envirosolutions.pl>
Message-ID: <CAB28AshR=pCf-YsNSRhD_xSEii_+vDOj3OKqWf+Cf17iUibhBg@mail.gmail.com>

On Fri, 13 Nov 2020 at 20:15, <michal.wloga at envirosolutions.pl> wrote:
>
> Hello Devs,
>
>
>
> I’m trying to append to QGIS News panel my own messages using python.
>
> I have already set up backend using https://github.com/elpaso/qgis-feed
>
> It works: https://qgisfeed.envirosolutions.pl/
>
> I can’t find out how to fetch it and add to QGIS panel.

It's not supported -- you can't do this.

When the news panel was introduced this was one of the decisions made,
with the rationale that we don't want to give plugins anyway to force
news items onto our users or override the default feed. That just
opens the door for spammy plugins which would negate the whole purpose
of the news feed in the first place.

Nyall


>
>
>
> I’m fetching something from my source:
>
>
>
> parser = QgsNewsFeedParser(QUrl("https://qgisfeed.envirosolutions.pl/"))
>
> parser.fetch()
>
> parser.entries()
>
> [<qgis._core.QgsNewsFeedParser.Entry object at 0x0000025A5A3C59D8>, <qgis._core.QgsNewsFeedParser.Entry object at 0x0000025A5A3C5AF8>]
>
>
>
> I’m fetching also from feed.qgis.org:
>
>
>
> parser2 = QgsNewsFeedParser(QUrl("https://feed.qgis.org/"))
>
> parser2.fetch()
>
> parser2.entries()
>
> [<qgis._core.QgsNewsFeedParser.Entry object at 0x0000021B5C1D1168>]
>
>
>
> But I need to add it somehow to QGIS interface. How can I do this?
>
> Regards,
>
> EnviroSolutions Sp. z o. o.
> Michał Włoga
> coo at envirosolutions.pl
> www.envirosolutions.pl
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From rdmailings at duif.net  Sat Nov 14 07:57:27 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sat, 14 Nov 2020 16:57:27 +0100
Subject: [QGIS-Developer] QtCreator does not start QGIS?
In-Reply-To: <6f4f2c50-c202-047e-98e9-2e381854a58b@gmail.com>
References: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>
 <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>
 <4fdcdf86-dbb0-7823-33dc-28d7e4bec855@gmail.com>
 <6d943706-97dd-a4a1-5ab2-71ec6f3381fe@duif.net>
 <CAL5Q671MHOEnSTfK7jF7tQOczGJNTSt3zLbzKVkfhvitezTLRg@mail.gmail.com>
 <6f4f2c50-c202-047e-98e9-2e381854a58b@gmail.com>
Message-ID: <f25d395f-1f6b-e947-aa20-e1bab9aa9d43@duif.net>

For Debian I created an issue:

https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=974602

Regards,

Richard Duivenvoorde

On 11/12/20 7:29 PM, Sandro Mani wrote:
> As for Fedora, F33 and F34 have fixed packages, but I see that the F33 update was never submitted by the maintainer - I've done so now [1].
> 
> Best
> Sandro
> 
> [1] https://bodhi.fedoraproject.org/updates/FEDORA-2020-1893aa323f
> 
> 
> On 12.11.20 19:17, Alessandro Pasotti wrote:
>> I switched to QT binaries and sources provided by the QT maintenance tool and that's my way to Nirvana.
>>
>> I self-build PyQt all the others dependencies.
>>
>> Cheers
>>
>>
>>
>> On Thu, Nov 12, 2020, 18:51 Richard Duivenvoorde <rdmailings at duif.net <mailto:rdmailings at duif.net>> wrote:
>>
>>     Ough, yes, that looks like it (5.15.1)...
>>
>>     Thanks Sandro for checking.
>>
>>     The 'random' qtcreator crashes at startup indeed all show 'sigtraps'...
>>     And I also thought that it has something todo with the process.start stuff.
>>
>>     I see QProcess in a lot of places, so I do not think I can disable parts of QGIS compile?
>>
>>     Mmm this is bad (for me & other Testing Debianista's). Hoping there will be a fixed version (qt) soon..
>>     Other options?
>>     Downgrade Qt?
>>     Compile Qt myself?
>>     Install Fedora on another machine (which Qt is there?)?
>>
>>     Sigh 0o.
>>
>>     Richard
>>
>>     On 11/12/20 6:00 PM, Sandro Mani wrote:
>>     > Hi Richard
>>     >
>>     > If you are using Qt5.15.{0,1} and are getting random SIGTRAPS, or the process segfaulting straight after starting through gdb, this might be [1].
>>     >
>>     > Sandro
>>     >
>>     > [1] https://bugreports.qt.io/browse/QTBUG-86319
>>     >
>>     > On 12.11.20 15:45, Richard Duivenvoorde wrote:
>>     >> Still having troubles starting QGIS in debug in QtCreator in my setup today.
>>     >>
>>     >> See https://duif.net/qc.png
>>     >>
>>     >> So QGIS (in QtCreator) starts, and during startup it stops and shows me the dissassembler(?) view. Sometimes I can see something (like in this screendump: something with libnss ?) sometimes all is white/empty.
>>     >>
>>     >> Last this I in the log is: "Destroyed while process ("whoami"), which according to git is recently changed but... does not seem related to me:
>>     >> https://github.com/qgis/QGIS/commit/7a38388a8762503b0bdba55065fffea2ff24137a
>>     >>
>>     >> Regards,
>>     >>
>>     >> Richard
>>     >>
>>     >>
>>     >>
>>     >> On 11/11/20 9:16 AM, Richard Duivenvoorde wrote:
>>     >>> Hi,
>>     >>>
>>     >>> Currently in my Qt build I cannot debug QGIS in qtcreator because it hangs/stops when showing the splash.
>>     >>> After some time the Application Output shows:
>>     >>>
>>     >>> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [60891ms] [thread:0x5555560d9d00] 2020-11-11T08:58:15 [1] HTTP fetch https://feed.qgis.org/?after=1605081272&lang=en failed with error Operation canceled
>>     >>> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] [thread:0x5555560d9d00] 2020-11-11T08:58:15 Network[1] Network request https://feed.qgis.org/?after=1605081272&lang=en timed out
>>     >>>
>>     >>> I am connected, and https://feed.qgis.org/?after=1605081272&lang=en is available from my browser.
>>     >>>
>>     >>> Disabling: 'Show QGIS news feed on welcome page' and 'Check QGIS version at startup' fix this.
>>     >>>
>>     >>> Others have this issue currently?
>>     >>>
>>     >>> (I hit my head also with this sometimes when in mixed/http proxied environments
>>     >>> I still think we should use 'opt in' for these 'QGIS phoning home stuff' instead of 'opt out')
>>     >>>
>>     >>> Regards,
>>     >>>
>>     >>> Richard Duivenvoorde
>>     >>>
>>     >>> _______________________________________________
>>     >>> QGIS-Developer mailing list
>>     >>> QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>>     >>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>     >>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>     >>>
>>     >> _______________________________________________
>>     >> QGIS-Developer mailing list
>>     >> QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>>     >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>     >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>     > _______________________________________________
>>     > QGIS-Developer mailing list
>>     > QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>>     > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>     > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>     _______________________________________________
>>     QGIS-Developer mailing list
>>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>


From apasotti at gmail.com  Sat Nov 14 11:16:48 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Sat, 14 Nov 2020 20:16:48 +0100
Subject: [QGIS-Developer] QtCreator does not start QGIS?
In-Reply-To: <f25d395f-1f6b-e947-aa20-e1bab9aa9d43@duif.net>
References: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>
 <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>
 <4fdcdf86-dbb0-7823-33dc-28d7e4bec855@gmail.com>
 <6d943706-97dd-a4a1-5ab2-71ec6f3381fe@duif.net>
 <CAL5Q671MHOEnSTfK7jF7tQOczGJNTSt3zLbzKVkfhvitezTLRg@mail.gmail.com>
 <6f4f2c50-c202-047e-98e9-2e381854a58b@gmail.com>
 <f25d395f-1f6b-e947-aa20-e1bab9aa9d43@duif.net>
Message-ID: <CAL5Q671Dd94nCQ4df-x_SVReObe8_qsJ_p0y06fgCVZ0zrTEwA@mail.gmail.com>

Hi hit this issue today on one of my machines with QT 5.15.1 and
freshly installed latest qt creator from QT official website, I was
able to debug using lldb, it is an annoying bug the workaround works
almost fine (I cannot see the enum values in lldb but for the rest it
is working fine).

It is not clear to me why on another machine QT 5.15.1 with an older
qtcreator I've never had this issue with gdb.

Cheers

On Sat, Nov 14, 2020 at 4:57 PM Richard Duivenvoorde
<rdmailings at duif.net> wrote:
>
> For Debian I created an issue:
>
> https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=974602
>
> Regards,
>
> Richard Duivenvoorde
>
> On 11/12/20 7:29 PM, Sandro Mani wrote:
> > As for Fedora, F33 and F34 have fixed packages, but I see that the F33 update was never submitted by the maintainer - I've done so now [1].
> >
> > Best
> > Sandro
> >
> > [1] https://bodhi.fedoraproject.org/updates/FEDORA-2020-1893aa323f
> >
> >
> > On 12.11.20 19:17, Alessandro Pasotti wrote:
> >> I switched to QT binaries and sources provided by the QT maintenance tool and that's my way to Nirvana.
> >>
> >> I self-build PyQt all the others dependencies.
> >>
> >> Cheers
> >>
> >>
> >>
> >> On Thu, Nov 12, 2020, 18:51 Richard Duivenvoorde <rdmailings at duif.net <mailto:rdmailings at duif.net>> wrote:
> >>
> >>     Ough, yes, that looks like it (5.15.1)...
> >>
> >>     Thanks Sandro for checking.
> >>
> >>     The 'random' qtcreator crashes at startup indeed all show 'sigtraps'...
> >>     And I also thought that it has something todo with the process.start stuff.
> >>
> >>     I see QProcess in a lot of places, so I do not think I can disable parts of QGIS compile?
> >>
> >>     Mmm this is bad (for me & other Testing Debianista's). Hoping there will be a fixed version (qt) soon..
> >>     Other options?
> >>     Downgrade Qt?
> >>     Compile Qt myself?
> >>     Install Fedora on another machine (which Qt is there?)?
> >>
> >>     Sigh 0o.
> >>
> >>     Richard
> >>
> >>     On 11/12/20 6:00 PM, Sandro Mani wrote:
> >>     > Hi Richard
> >>     >
> >>     > If you are using Qt5.15.{0,1} and are getting random SIGTRAPS, or the process segfaulting straight after starting through gdb, this might be [1].
> >>     >
> >>     > Sandro
> >>     >
> >>     > [1] https://bugreports.qt.io/browse/QTBUG-86319
> >>     >
> >>     > On 12.11.20 15:45, Richard Duivenvoorde wrote:
> >>     >> Still having troubles starting QGIS in debug in QtCreator in my setup today.
> >>     >>
> >>     >> See https://duif.net/qc.png
> >>     >>
> >>     >> So QGIS (in QtCreator) starts, and during startup it stops and shows me the dissassembler(?) view. Sometimes I can see something (like in this screendump: something with libnss ?) sometimes all is white/empty.
> >>     >>
> >>     >> Last this I in the log is: "Destroyed while process ("whoami"), which according to git is recently changed but... does not seem related to me:
> >>     >> https://github.com/qgis/QGIS/commit/7a38388a8762503b0bdba55065fffea2ff24137a
> >>     >>
> >>     >> Regards,
> >>     >>
> >>     >> Richard
> >>     >>
> >>     >>
> >>     >>
> >>     >> On 11/11/20 9:16 AM, Richard Duivenvoorde wrote:
> >>     >>> Hi,
> >>     >>>
> >>     >>> Currently in my Qt build I cannot debug QGIS in qtcreator because it hangs/stops when showing the splash.
> >>     >>> After some time the Application Output shows:
> >>     >>>
> >>     >>> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [60891ms] [thread:0x5555560d9d00] 2020-11-11T08:58:15 [1] HTTP fetch https://feed.qgis.org/?after=1605081272&lang=en failed with error Operation canceled
> >>     >>> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] [thread:0x5555560d9d00] 2020-11-11T08:58:15 Network[1] Network request https://feed.qgis.org/?after=1605081272&lang=en timed out
> >>     >>>
> >>     >>> I am connected, and https://feed.qgis.org/?after=1605081272&lang=en is available from my browser.
> >>     >>>
> >>     >>> Disabling: 'Show QGIS news feed on welcome page' and 'Check QGIS version at startup' fix this.
> >>     >>>
> >>     >>> Others have this issue currently?
> >>     >>>
> >>     >>> (I hit my head also with this sometimes when in mixed/http proxied environments
> >>     >>> I still think we should use 'opt in' for these 'QGIS phoning home stuff' instead of 'opt out')
> >>     >>>
> >>     >>> Regards,
> >>     >>>
> >>     >>> Richard Duivenvoorde
> >>     >>>
> >>     >>> _______________________________________________
> >>     >>> QGIS-Developer mailing list
> >>     >>> QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
> >>     >>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>     >>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>     >>>
> >>     >> _______________________________________________
> >>     >> QGIS-Developer mailing list
> >>     >> QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
> >>     >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>     >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>     > _______________________________________________
> >>     > QGIS-Developer mailing list
> >>     > QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
> >>     > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>     > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>
> >>     _______________________________________________
> >>     QGIS-Developer mailing list
> >>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
> >>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From nyall.dawson at gmail.com  Sat Nov 14 20:55:37 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Sun, 15 Nov 2020 14:55:37 +1000
Subject: [QGIS-Developer] Issue tags relating to Temporal Controller
In-Reply-To: <638397cd-e08c-8360-3613-7de56ca63a83@gmx.at>
References: <638397cd-e08c-8360-3613-7de56ca63a83@gmx.at>
Message-ID: <CAB28AshR0H1Fjoaj6_xByq+cgfaaPQqepfxAQBWFB-mQn_0_4g@mail.gmail.com>

On Fri, 13 Nov 2020 at 22:45, Anita Graser <anitagraser at gmx.at> wrote:
>
> Hi,
>
> Some Issues related to the Temporal Controller are currently tagged with
> "Time controller", others with "Temporal" and some don't have any
> specific tags:
>
> https://github.com/qgis/QGIS/issues?q=is%3Aissue+is%3Aopen+temporal
>
> Can we consolidate this? I can do it if somebody gives me the necessary
> rights. (I currently cannot change issue tags.).

Fixed -- I've removed the Time Controller tag and merged the tickets
into the Temporal category.

Nyall

From vladutco at gmail.com  Sun Nov 15 01:11:12 2020
From: vladutco at gmail.com (Vladut Constandoiu)
Date: Sun, 15 Nov 2020 10:11:12 +0100
Subject: [QGIS-Developer] Loss of data
Message-ID: <CANRCGAfzBgV1SoGogjuXpYKurVq7N5tzN9XgJ3+hq4mR03hdRQ@mail.gmail.com>

Good morning,

My name is Vladut Constandoiu, I'm a university student from Trento, Italy
and I'm using QGis for my master thesis.
Yesterday I had a very unpleasant experience with QGis. I have a shapefile
that contains all of the different areas of the river's hydrological basin
on which I'm doing my project; every element has two attributes: type
(TIPO) and area (SUP). Somehow I managed to erase those attributes from the
attribute table and could not do undo (ctrl+z or anything else) since the
auto-save plug-in activated exatly 2 seconds after  my mistake and saved
the changes. The shapefile contains about 6900 elements, and they were all
sorted by use, while now they are just areas without any information.
Is there any way to recover a previous version of that shapefile so that I
don't have to spend uncountable hours putting all the attributes back in?
Here are three pictures of my work, previously and after the loss of
information.

Before data loss:
[image: image.png]

After data loss + legend of types of area:
[image: image.png]

Attribute panel:
[image: image.png]

I would be enormously grateful to anyone who could help me find a solution.

Thank you very much in advance and have a nice day.
Sincerely,
Vladut Constandoiu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201115/019ee93d/attachment.html>

From rdmailings at duif.net  Sun Nov 15 01:29:41 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sun, 15 Nov 2020 10:29:41 +0100
Subject: [QGIS-Developer] QtCreator does not start QGIS?
In-Reply-To: <CAL5Q671Dd94nCQ4df-x_SVReObe8_qsJ_p0y06fgCVZ0zrTEwA@mail.gmail.com>
References: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>
 <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>
 <4fdcdf86-dbb0-7823-33dc-28d7e4bec855@gmail.com>
 <6d943706-97dd-a4a1-5ab2-71ec6f3381fe@duif.net>
 <CAL5Q671MHOEnSTfK7jF7tQOczGJNTSt3zLbzKVkfhvitezTLRg@mail.gmail.com>
 <6f4f2c50-c202-047e-98e9-2e381854a58b@gmail.com>
 <f25d395f-1f6b-e947-aa20-e1bab9aa9d43@duif.net>
 <CAL5Q671Dd94nCQ4df-x_SVReObe8_qsJ_p0y06fgCVZ0zrTEwA@mail.gmail.com>
Message-ID: <cf97b998-f341-181e-468f-88c2a7fdb626@duif.net>

On 11/14/20 8:16 PM, Alessandro Pasotti wrote:
> Hi hit this issue today on one of my machines with QT 5.15.1 and
> freshly installed latest qt creator from QT official website, I was
> able to debug using lldb, it is an annoying bug the workaround works
> almost fine (I cannot see the enum values in lldb but for the rest it
> is working fine).

According to the upstream issue, the problem is both with gdb AND lldb, but I will try lldb here too...

Regards,

Richard

From anitagraser at gmx.at  Sun Nov 15 01:47:23 2020
From: anitagraser at gmx.at (Anita Graser)
Date: Sun, 15 Nov 2020 09:47:23 +0000 (UTC)
Subject: [QGIS-Developer] Issue tags relating to Temporal Controller
In-Reply-To: <CAB28AshR0H1Fjoaj6_xByq+cgfaaPQqepfxAQBWFB-mQn_0_4g@mail.gmail.com>
References: <638397cd-e08c-8360-3613-7de56ca63a83@gmx.at>
 <CAB28AshR0H1Fjoaj6_xByq+cgfaaPQqepfxAQBWFB-mQn_0_4g@mail.gmail.com>
Message-ID: <6c225d64-5b73-4d1c-a863-8b9c3df07065@gmx.at>


15 Nov 2020 05:55:51 Nyall Dawson <nyall.dawson at gmail.com>:

> On Fri, 13 Nov 2020 at 22:45, Anita Graser <anitagraser at gmx.at> wrote:
>>
>> Hi,
>>
>> Some Issues related to the Temporal Controller are currently tagged with
>> "Time controller", others with "Temporal" and some don't have any
>> specific tags:
>>
>> https://github.com/qgis/QGIS/issues?q=is%3Aissue+is%3Aopen+temporal
>>
>> Can we consolidate this? I can do it if somebody gives me the necessary
>> rights. (I currently cannot change issue tags.).
>
> Fixed -- I've removed the Time Controller tag and merged the tickets
> into the Temporal category.
>
> Nyall
>

Thank you, Nyall!

Anita

From nyall.dawson at gmail.com  Sun Nov 15 14:19:07 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 16 Nov 2020 08:19:07 +1000
Subject: [QGIS-Developer] QtCreator does not start QGIS?
In-Reply-To: <6f4f2c50-c202-047e-98e9-2e381854a58b@gmail.com>
References: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>
 <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>
 <4fdcdf86-dbb0-7823-33dc-28d7e4bec855@gmail.com>
 <6d943706-97dd-a4a1-5ab2-71ec6f3381fe@duif.net>
 <CAL5Q671MHOEnSTfK7jF7tQOczGJNTSt3zLbzKVkfhvitezTLRg@mail.gmail.com>
 <6f4f2c50-c202-047e-98e9-2e381854a58b@gmail.com>
Message-ID: <CAB28AshLS8xFtuh5mL6bF1B=2V5xvshRQXzSU4bZptsu36AL8A@mail.gmail.com>

On Fri, 13 Nov 2020 at 04:30, Sandro Mani <manisandro at gmail.com> wrote:
>
> As for Fedora, F33 and F34 have fixed packages, but I see that the F33 update was never submitted by the maintainer - I've done so now [1].

Just to confirm -- this completely fixed the issue for me!

Nyall

>
> Best
> Sandro
>
> [1] https://bodhi.fedoraproject.org/updates/FEDORA-2020-1893aa323f
>
>
> On 12.11.20 19:17, Alessandro Pasotti wrote:
>
> I switched to QT binaries and sources provided by the QT maintenance tool and that's my way to Nirvana.
>
> I self-build PyQt all the others dependencies.
>
> Cheers
>
>
>
> On Thu, Nov 12, 2020, 18:51 Richard Duivenvoorde <rdmailings at duif.net> wrote:
>>
>> Ough, yes, that looks like it (5.15.1)...
>>
>> Thanks Sandro for checking.
>>
>> The 'random' qtcreator crashes at startup indeed all show 'sigtraps'...
>> And I also thought that it has something todo with the process.start stuff.
>>
>> I see QProcess in a lot of places, so I do not think I can disable parts of QGIS compile?
>>
>> Mmm this is bad (for me & other Testing Debianista's). Hoping there will be a fixed version (qt) soon..
>> Other options?
>> Downgrade Qt?
>> Compile Qt myself?
>> Install Fedora on another machine (which Qt is there?)?
>>
>> Sigh 0o.
>>
>> Richard
>>
>> On 11/12/20 6:00 PM, Sandro Mani wrote:
>> > Hi Richard
>> >
>> > If you are using Qt5.15.{0,1} and are getting random SIGTRAPS, or the process segfaulting straight after starting through gdb, this might be [1].
>> >
>> > Sandro
>> >
>> > [1] https://bugreports.qt.io/browse/QTBUG-86319
>> >
>> > On 12.11.20 15:45, Richard Duivenvoorde wrote:
>> >> Still having troubles starting QGIS in debug in QtCreator in my setup today.
>> >>
>> >> See https://duif.net/qc.png
>> >>
>> >> So QGIS (in QtCreator) starts, and during startup it stops and shows me the dissassembler(?) view. Sometimes I can see something (like in this screendump: something with libnss ?) sometimes all is white/empty.
>> >>
>> >> Last this I in the log is: "Destroyed while process ("whoami"), which according to git is recently changed but... does not seem related to me:
>> >> https://github.com/qgis/QGIS/commit/7a38388a8762503b0bdba55065fffea2ff24137a
>> >>
>> >> Regards,
>> >>
>> >> Richard
>> >>
>> >>
>> >>
>> >> On 11/11/20 9:16 AM, Richard Duivenvoorde wrote:
>> >>> Hi,
>> >>>
>> >>> Currently in my Qt build I cannot debug QGIS in qtcreator because it hangs/stops when showing the splash.
>> >>> After some time the Application Output shows:
>> >>>
>> >>> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [60891ms] [thread:0x5555560d9d00] 2020-11-11T08:58:15 [1] HTTP fetch https://feed.qgis.org/?after=1605081272&lang=en failed with error Operation canceled
>> >>> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms] [thread:0x5555560d9d00] 2020-11-11T08:58:15 Network[1] Network request https://feed.qgis.org/?after=1605081272&lang=en timed out
>> >>>
>> >>> I am connected, and https://feed.qgis.org/?after=1605081272&lang=en is available from my browser.
>> >>>
>> >>> Disabling: 'Show QGIS news feed on welcome page' and 'Check QGIS version at startup' fix this.
>> >>>
>> >>> Others have this issue currently?
>> >>>
>> >>> (I hit my head also with this sometimes when in mixed/http proxied environments
>> >>> I still think we should use 'opt in' for these 'QGIS phoning home stuff' instead of 'opt out')
>> >>>
>> >>> Regards,
>> >>>
>> >>> Richard Duivenvoorde
>> >>>
>> >>> _______________________________________________
>> >>> QGIS-Developer mailing list
>> >>> QGIS-Developer at lists.osgeo.org
>> >>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >>>
>> >> _______________________________________________
>> >> QGIS-Developer mailing list
>> >> QGIS-Developer at lists.osgeo.org
>> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > _______________________________________________
>> > QGIS-Developer mailing list
>> > QGIS-Developer at lists.osgeo.org
>> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From tim at kartoza.com  Mon Nov 16 04:33:56 2020
From: tim at kartoza.com (Tim Sutton)
Date: Mon, 16 Nov 2020 12:33:56 +0000
Subject: [QGIS-Developer] Loss of data
In-Reply-To: <CANRCGAfzBgV1SoGogjuXpYKurVq7N5tzN9XgJ3+hq4mR03hdRQ@mail.gmail.com>
References: <CANRCGAfzBgV1SoGogjuXpYKurVq7N5tzN9XgJ3+hq4mR03hdRQ@mail.gmail.com>
Message-ID: <CAES-DZSSzxvsv8mWm__niX7Y5cLgN5ZUP0jd4AimC30HiJMz3A@mail.gmail.com>

Hi Vladut

So sorry to hear about your data loss. I am not familiar with any tools
that will recover your data.

Regards

Tim

On Sun, Nov 15, 2020 at 9:11 AM Vladut Constandoiu <vladutco at gmail.com>
wrote:

> Good morning,
>
> My name is Vladut Constandoiu, I'm a university student from Trento, Italy
> and I'm using QGis for my master thesis.
> Yesterday I had a very unpleasant experience with QGis. I have a shapefile
> that contains all of the different areas of the river's hydrological basin
> on which I'm doing my project; every element has two attributes: type
> (TIPO) and area (SUP). Somehow I managed to erase those attributes from the
> attribute table and could not do undo (ctrl+z or anything else) since the
> auto-save plug-in activated exatly 2 seconds after  my mistake and saved
> the changes. The shapefile contains about 6900 elements, and they were all
> sorted by use, while now they are just areas without any information.
> Is there any way to recover a previous version of that shapefile so that I
> don't have to spend uncountable hours putting all the attributes back in?
> Here are three pictures of my work, previously and after the loss of
> information.
>
> Before data loss:
> [image: image.png]
>
> After data loss + legend of types of area:
> [image: image.png]
>
> Attribute panel:
> [image: image.png]
>
> I would be enormously grateful to anyone who could help me find a solution.
>
> Thank you very much in advance and have a nice day.
> Sincerely,
> Vladut Constandoiu
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
------------------------------------------------------------------------------------------
​

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201116/687a8e7f/attachment.html>

From uclaros at gmail.com  Mon Nov 16 05:54:13 2020
From: uclaros at gmail.com (uclaros)
Date: Mon, 16 Nov 2020 06:54:13 -0700 (MST)
Subject: [QGIS-Developer] Loss of data
In-Reply-To: <CANRCGAfzBgV1SoGogjuXpYKurVq7N5tzN9XgJ3+hq4mR03hdRQ@mail.gmail.com>
References: <CANRCGAfzBgV1SoGogjuXpYKurVq7N5tzN9XgJ3+hq4mR03hdRQ@mail.gmail.com>
Message-ID: <1605534853974-0.post@n6.nabble.com>

Hi,
you could check if the plugin you mention (I am not familiar with it) keeps
backups before saving, it would be good practice!

Losing data is always tough, hope you sort it out!



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From tim at kartoza.com  Mon Nov 16 15:57:44 2020
From: tim at kartoza.com (Tim Sutton)
Date: Mon, 16 Nov 2020 23:57:44 +0000
Subject: [QGIS-Developer] Setting a custom CRS for the map canvas
Message-ID: <CAES-DZTSdwGmGTzzS0BnTf28F5XkgTi8HacsdpH--GdgaQYv5g@mail.gmail.com>

Hi Folks

I am trying to update a 2.x snippet I have which iteratively sets the CRS
with sequentially higher LO values:

https://gist.github.com/timlinux/1057c2c6b5ebda6ed2b5aa8c5aa21372

# Uses a trick from Alexander Neto: "I created a orthographic projection
with lisbon longitude, but with a south hemisphere latitude
# That way kinda looks 3d"
# This will make the QGIS use a world projection and then move the center
# of the CRS sequentially to create a spinning globe effect
import time
from subprocess import call
longitude_increments = 5
image_counter = 1
for i in range(-180, 180, longitude_increments):
  definition = (
  '+proj=ortho +lat_0=-20 +lon_0=%i +x_0=0 +y_0=0 +R=6371000 +units=m
+no_defs +type=crs' % i)
  crs = QgsCoordinateReferenceSystem()
  crs.createFromProj(definition)
  iface.mapCanvas().mapSettings().setDestinationCrs(crs)
  #iface.mapCanvas().setMapUnits(0)
  iface.mapCanvas().refresh()
  iface.mapCanvas().saveAsImage(
    '/tmp/globe-%03d.png' % image_counter)
  image_counter += 1
  print (definition)
  time.sleep(1)
# Now generate the GIF. If this fails try run the call from the command line
# and check the path to convert (provided by ImageMagick) is correct...
call('/usr/bin/convert -delay 35 -loop 0 /tmp/globe-*.png /tmp/globe.gif')

The  example python above using Orthographc North will hopefully make a
more pleasing looking spinny globe. However, in QGIS 3.x the code runs but
if I inspect the mapcanvas CRS after setting the new CRS, it still shows
the old CRS. Can anyone see what I am missing here?

Thanks!

Regards

Tim

-- 
------------------------------------------------------------------------------------------

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201116/383c8973/attachment.html>

From matthias at opengis.ch  Mon Nov 16 23:56:51 2020
From: matthias at opengis.ch (Matthias Kuhn)
Date: Tue, 17 Nov 2020 08:56:51 +0100
Subject: [QGIS-Developer] Setting a custom CRS for the map canvas
In-Reply-To: <CAES-DZTSdwGmGTzzS0BnTf28F5XkgTi8HacsdpH--GdgaQYv5g@mail.gmail.com>
References: <CAES-DZTSdwGmGTzzS0BnTf28F5XkgTi8HacsdpH--GdgaQYv5g@mail.gmail.com>
Message-ID: <CAC7zN96j4DCH13kc+w_JhREMRuXFBRT=RU9Wr4K16GBuoZ0JdQ@mail.gmail.com>

Hi Tim,

Does it help if you directly call `mapCanvas.setDestinationCrs()` instead
of setting the crs on `mapSettings()`?

The returned mapSettings object is not meant to be modified.

Matthias


On Tue, Nov 17, 2020 at 12:58 AM Tim Sutton <tim at kartoza.com> wrote:

> Hi Folks
>
> I am trying to update a 2.x snippet I have which iteratively sets the CRS
> with sequentially higher LO values:
>
> https://gist.github.com/timlinux/1057c2c6b5ebda6ed2b5aa8c5aa21372
>
> # Uses a trick from Alexander Neto: "I created a orthographic projection
> with lisbon longitude, but with a south hemisphere latitude
> # That way kinda looks 3d"
> # This will make the QGIS use a world projection and then move the center
> # of the CRS sequentially to create a spinning globe effect
> import time
> from subprocess import call
> longitude_increments = 5
> image_counter = 1
> for i in range(-180, 180, longitude_increments):
>   definition = (
>   '+proj=ortho +lat_0=-20 +lon_0=%i +x_0=0 +y_0=0 +R=6371000 +units=m
> +no_defs +type=crs' % i)
>   crs = QgsCoordinateReferenceSystem()
>   crs.createFromProj(definition)
>   iface.mapCanvas().mapSettings().setDestinationCrs(crs)
>   #iface.mapCanvas().setMapUnits(0)
>   iface.mapCanvas().refresh()
>   iface.mapCanvas().saveAsImage(
>     '/tmp/globe-%03d.png' % image_counter)
>   image_counter += 1
>   print (definition)
>   time.sleep(1)
> # Now generate the GIF. If this fails try run the call from the command
> line
> # and check the path to convert (provided by ImageMagick) is correct...
> call('/usr/bin/convert -delay 35 -loop 0 /tmp/globe-*.png /tmp/globe.gif')
>
> The  example python above using Orthographc North will hopefully make a
> more pleasing looking spinny globe. However, in QGIS 3.x the code runs
> but if I inspect the mapcanvas CRS after setting the new CRS, it still
> shows the old CRS. Can anyone see what I am missing here?
>
> Thanks!
>
> Regards
>
> Tim
>
> --
>
> ------------------------------------------------------------------------------------------
>
> Tim Sutton
> Visit http://kartoza.com to find out about open source:
>  * Desktop GIS programming services
>  * Geospatial web development
> * GIS Training
> * Consulting Services
> Tim is a member of the QGIS Project Steering Committee
>
> -------------------------------------------------------------------------------------------
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201117/9946a0c0/attachment-0001.html>

From tim at kartoza.com  Wed Nov 18 01:35:28 2020
From: tim at kartoza.com (Tim Sutton)
Date: Wed, 18 Nov 2020 09:35:28 +0000
Subject: [QGIS-Developer] Setting a custom CRS for the map canvas
In-Reply-To: <CAC7zN96j4DCH13kc+w_JhREMRuXFBRT=RU9Wr4K16GBuoZ0JdQ@mail.gmail.com>
References: <CAES-DZTSdwGmGTzzS0BnTf28F5XkgTi8HacsdpH--GdgaQYv5g@mail.gmail.com>
 <CAC7zN96j4DCH13kc+w_JhREMRuXFBRT=RU9Wr4K16GBuoZ0JdQ@mail.gmail.com>
Message-ID: <CAES-DZRspYJHG_qV1SWE_ESX+6h2jk3xxGnEn1cjhRdQHG0qrg@mail.gmail.com>

Thank you very much Matthias, that fixed it.

Updated my Gist accordingly here:
https://gist.github.com/timlinux/1057c2c6b5ebda6ed2b5aa8c5aa21372

Regards

Tim

On Tue, Nov 17, 2020 at 7:57 AM Matthias Kuhn <matthias at opengis.ch> wrote:

> Hi Tim,
>
> Does it help if you directly call `mapCanvas.setDestinationCrs()` instead
> of setting the crs on `mapSettings()`?
>
> The returned mapSettings object is not meant to be modified.
>
> Matthias
>
>
> On Tue, Nov 17, 2020 at 12:58 AM Tim Sutton <tim at kartoza.com> wrote:
>
>> Hi Folks
>>
>> I am trying to update a 2.x snippet I have which iteratively sets the CRS
>> with sequentially higher LO values:
>>
>> https://gist.github.com/timlinux/1057c2c6b5ebda6ed2b5aa8c5aa21372
>>
>> # Uses a trick from Alexander Neto: "I created a orthographic projection
>> with lisbon longitude, but with a south hemisphere latitude
>> # That way kinda looks 3d"
>> # This will make the QGIS use a world projection and then move the center
>> # of the CRS sequentially to create a spinning globe effect
>> import time
>> from subprocess import call
>> longitude_increments = 5
>> image_counter = 1
>> for i in range(-180, 180, longitude_increments):
>>   definition = (
>>   '+proj=ortho +lat_0=-20 +lon_0=%i +x_0=0 +y_0=0 +R=6371000 +units=m
>> +no_defs +type=crs' % i)
>>   crs = QgsCoordinateReferenceSystem()
>>   crs.createFromProj(definition)
>>   iface.mapCanvas().mapSettings().setDestinationCrs(crs)
>>   #iface.mapCanvas().setMapUnits(0)
>>   iface.mapCanvas().refresh()
>>   iface.mapCanvas().saveAsImage(
>>     '/tmp/globe-%03d.png' % image_counter)
>>   image_counter += 1
>>   print (definition)
>>   time.sleep(1)
>> # Now generate the GIF. If this fails try run the call from the command
>> line
>> # and check the path to convert (provided by ImageMagick) is correct...
>> call('/usr/bin/convert -delay 35 -loop 0 /tmp/globe-*.png /tmp/globe.gif')
>>
>> The  example python above using Orthographc North will hopefully make a
>> more pleasing looking spinny globe. However, in QGIS 3.x the code runs
>> but if I inspect the mapcanvas CRS after setting the new CRS, it still
>> shows the old CRS. Can anyone see what I am missing here?
>>
>> Thanks!
>>
>> Regards
>>
>> Tim
>>
>> --
>>
>> ------------------------------------------------------------------------------------------
>>
>> Tim Sutton
>> Visit http://kartoza.com to find out about open source:
>>  * Desktop GIS programming services
>>  * Geospatial web development
>> * GIS Training
>> * Consulting Services
>> Tim is a member of the QGIS Project Steering Committee
>>
>> -------------------------------------------------------------------------------------------
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>

-- 
------------------------------------------------------------------------------------------
​

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201118/fba79e74/attachment.html>

From jakob at lanstorp.com  Wed Nov 18 02:09:47 2020
From: jakob at lanstorp.com (Jakob)
Date: Wed, 18 Nov 2020 03:09:47 -0700 (MST)
Subject: [QGIS-Developer] Library behind native plugin 'Check Geometries'
Message-ID: <1605694187935-0.post@n6.nabble.com>

What is the rutine or library behind - that the QGIS native plugin Check
Geometries uses. This plugin finds at lot more topological errors and other
data inconsistencies than PostGIS st_isvalid() by GEOS and the QGIS menu
Vector > Geometry Tools > Check Validity (Method QGIS or GEOS). 

Jakob



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From feckler at gbd-consult.de  Wed Nov 18 02:12:32 2020
From: feckler at gbd-consult.de (Felix Feckler)
Date: Wed, 18 Nov 2020 11:12:32 +0100
Subject: [QGIS-Developer] Change "Compression" of PDF/GeoPDF
Message-ID: <fcab108d-872e-7d66-0667-a78a4e838c9e@gbd-consult.de>

Dear List,

I am trying to change the Compression of my PDF's/GeoPDF's when i export 
a print compose.

So I edited the GDAL driver for PDF (Settings > Options > GDAL), but 
that seems to have no effect.

Someone got an Idea?

Greetings,

Felix


From nyall.dawson at gmail.com  Wed Nov 18 17:44:40 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 19 Nov 2020 11:44:40 +1000
Subject: [QGIS-Developer] Library behind native plugin 'Check Geometries'
In-Reply-To: <1605694187935-0.post@n6.nabble.com>
References: <1605694187935-0.post@n6.nabble.com>
Message-ID: <CAB28AshDo+esEZiPybstWwLwNyBjZkqUdDWfSLUExbTyOb26VQ@mail.gmail.com>

On Wed, 18 Nov 2020 at 20:10, Jakob <jakob at lanstorp.com> wrote:
>
> What is the rutine or library behind - that the QGIS native plugin Check
> Geometries uses. This plugin finds at lot more topological errors and other
> data inconsistencies than PostGIS st_isvalid() by GEOS and the QGIS menu
> Vector > Geometry Tools > Check Validity (Method QGIS or GEOS).

It's an internal QGIS routine, all located here:
https://github.com/qgis/QGIS/blob/master/src/core/qgsgeometryvalidator.cpp

Hope that helps!
Nyall




>
> Jakob
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Wed Nov 18 18:44:25 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 19 Nov 2020 12:44:25 +1000
Subject: [QGIS-Developer] QEP: Add z/elevation slicing and filtering to map
	renders
Message-ID: <CAB28Ash0vHu7=FQoyFmbR7hOOcLHqpJeXOq+mTsZtP66SdrGsg@mail.gmail.com>

Hi all,

Please see https://github.com/qgis/QGIS-Enhancement-Proposals/issues/201
for a proposal regarding adding z/elevation based filtering to 2d map
renders.

Thoughts and feedback welcome!
Nyall

From andreas at qgis.org  Thu Nov 19 05:16:40 2020
From: andreas at qgis.org (Andreas Neumann)
Date: Thu, 19 Nov 2020 14:16:40 +0100
Subject: [QGIS-Developer] Processing: sort algorithm not working?
Message-ID: <CAB2Z92ACETO=dDwmJA4BH14dQsryu3iDLMv1Kj6ZzKZX1BsZnQ@mail.gmail.com>

Hi,

I have a model where at the very end before adding it to the project I was
trying to sort the result with an expression.

But: the sorting doesn't work. In the help there is the cryptic hint at
https://docs.qgis.org/3.10/de/docs/user_manual/processing_algs/qgis/vectorgeneral.html#qgisorderbyexpression
that "Be careful, it might not work as expected with some providers, the
order might not be kept every time."

Does someone know more about it? Which providers specifically do not
support sorting?

Does this statement apply to the reading provider or the writing provider?

In my case, I never got any correct sorting ...

Thanks,
Andreas

--
Andreas Neumann
QGIS.ORG board member (treasurer)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201119/b0c95cab/attachment.html>

From wonder.sk at gmail.com  Fri Nov 20 01:12:44 2020
From: wonder.sk at gmail.com (Martin Dobias)
Date: Fri, 20 Nov 2020 10:12:44 +0100
Subject: [QGIS-Developer] Raster symbology - thumbnail/legend/palette
Message-ID: <CAC2XbFdqAkJ49iWNt0n1n=Zq-x39k6BDm8fB5hM-W3-qFZtVzQ@mail.gmail.com>

Hi all

In the raster layer properties dialog, in the Symbology tab, at the bottom
we have three boxes there - Thumbnail, Legend, Palette. Screenshot of the
dialog below. Do you see any value of those boxes? To me they seem like
some historical artifacts that are not very useful and rendering of the
thumbnail probably just slows down opening of the dialog.

And recently I have heard from users that contour line rendering of rasters
may trigger an exception when trying to draw the thumbnail, causing the
dialog to fail to open completely, making me think of those boxes as
harmful rather than just useless :-)

Screenshot:
https://drive.google.com/file/d/14qgAj9tbuIdxBQyq1DEhrhGz5OkwYaQP/view?usp=sharing

What do you think? Remove or keep those boxes?

Cheers
Martin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201120/00adb863/attachment.html>

From mats.taraldsvik at gmail.com  Fri Nov 20 05:22:23 2020
From: mats.taraldsvik at gmail.com (Mats Taraldsvik)
Date: Fri, 20 Nov 2020 14:22:23 +0100
Subject: [QGIS-Developer] FeatureIterator is constructed but not iterated
 when creating a custom QgsVectorDataProvider in Python
Message-ID: <CAGs3qpT_d+nrar_ZUjCv=rhckA3EuCNANcoBNARWfX5Uhma3ug@mail.gmail.com>

Hi,

I'm trying to create/prototype a custom QgsVectorDataProvider in Python to
retrieve data from a HTTP REST API.

When testing, I do the following to register my provider:

from qgis.core import QgsProviderRegistry, QgsProviderMetadata
from provider import MyProvider
registry = QgsProviderRegistry.instance()
metadata = QgsProviderMetadata(MyProvider.providerKey(),
MyProvider.description(),
MyProvider.createProvider)
registry.registerProvider(metadata)
layer = QgsVectorLayer(<my-url>, 'Test myprovider', 'myprovider-plugin')
QgsProject.instance().addMapLayer(layer)
This seems to initialize the provider, although it stops after the
constructor of MyFeatureIterator(QgsAbstractFeatureIterator) is run.
For this test, data is retrieved from the REST API in the constructor, and
I can see in the logs that the data is retrieved.

I expected it to start iterating objects, but the next message in the log
is prepareSimplification (I have added a log message to every class method
to watch progress in the logs), then nothing.

I even installed qgis-dev and watched the logs using Microsoft's
DebugViewer, but I could not see any relevant information.

Could someone please help me or tell me where to look to solve this issue
and start iterating with nextFeature/fetchFeature? Regards,
Mats Taraldsvik
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201120/9382e6f6/attachment.html>

From apasotti at gmail.com  Fri Nov 20 05:30:16 2020
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Fri, 20 Nov 2020 14:30:16 +0100
Subject: [QGIS-Developer] FeatureIterator is constructed but not
 iterated when creating a custom QgsVectorDataProvider in Python
In-Reply-To: <CAGs3qpT_d+nrar_ZUjCv=rhckA3EuCNANcoBNARWfX5Uhma3ug@mail.gmail.com>
References: <CAGs3qpT_d+nrar_ZUjCv=rhckA3EuCNANcoBNARWfX5Uhma3ug@mail.gmail.com>
Message-ID: <CAL5Q6705F_-H6r+HAXX061JnPMUvkOgRz048qgOAiy=b9od23w@mail.gmail.com>

On Fri, Nov 20, 2020 at 2:22 PM Mats Taraldsvik
<mats.taraldsvik at gmail.com> wrote:
>
> Hi,
>
> I'm trying to create/prototype a custom QgsVectorDataProvider in Python to retrieve data from a HTTP REST API.
>
> When testing, I do the following to register my provider:
>
> from qgis.core import QgsProviderRegistry, QgsProviderMetadata
> from provider import MyProvider
> registry = QgsProviderRegistry.instance()
> metadata = QgsProviderMetadata(MyProvider.providerKey(), MyProvider.description(), MyProvider.createProvider)
> registry.registerProvider(metadata)
> layer = QgsVectorLayer(<my-url>, 'Test myprovider', 'myprovider-plugin')
> QgsProject.instance().addMapLayer(layer)
> This seems to initialize the provider, although it stops after the constructor of MyFeatureIterator(QgsAbstractFeatureIterator) is run.
> For this test, data is retrieved from the REST API in the constructor, and I can see in the logs that the data is retrieved.
>
> I expected it to start iterating objects, but the next message in the log is prepareSimplification (I have added a log message to every class method to watch progress in the logs), then nothing.
>
> I even installed qgis-dev and watched the logs using Microsoft's DebugViewer, but I could not see any relevant information.
>
> Could someone please help me or tell me where to look to solve this issue and start iterating with nextFeature/fetchFeature? Regards,


AFAIK there is only one example I wrote for testing purposes ages ago:
https://github.com/qgis/QGIS/blob/master/tests/src/python/provider_python.py

I'm not sure it will be useful but it's a start.

Kind regards.

-- 
Alessandro Pasotti
QCooperative:  www.qcooperative.net
ItOpen:   www.itopen.it

From mats.taraldsvik at gmail.com  Fri Nov 20 05:53:50 2020
From: mats.taraldsvik at gmail.com (Mats Taraldsvik)
Date: Fri, 20 Nov 2020 14:53:50 +0100
Subject: [QGIS-Developer] FeatureIterator is constructed but not
 iterated when creating a custom QgsVectorDataProvider in Python
In-Reply-To: <CAL5Q6705F_-H6r+HAXX061JnPMUvkOgRz048qgOAiy=b9od23w@mail.gmail.com>
References: <CAGs3qpT_d+nrar_ZUjCv=rhckA3EuCNANcoBNARWfX5Uhma3ug@mail.gmail.com>
 <CAL5Q6705F_-H6r+HAXX061JnPMUvkOgRz048qgOAiy=b9od23w@mail.gmail.com>
Message-ID: <CAGs3qpT2q0+E56DEnguqoKGVB7-feVjaoPzxRQFUPW8wfL3arg@mail.gmail.com>

Hi,

Yes, thank you - your example along with
https://github.com/blazek/django-provider/blob/master/djangoprovider/provider.py
is in fact what I am using to write my dataprovider.

I must have overlooked something, since the results are never iterated, but
the logs are not helpful at all, unfortunately... :(

There must be a reason why there is no attempt to iterate..?

Mats

On Fri, Nov 20, 2020 at 2:30 PM Alessandro Pasotti <apasotti at gmail.com>
wrote:

> On Fri, Nov 20, 2020 at 2:22 PM Mats Taraldsvik
> <mats.taraldsvik at gmail.com> wrote:
> >
> > Hi,
> >
> > I'm trying to create/prototype a custom QgsVectorDataProvider in Python
> to retrieve data from a HTTP REST API.
> >
> > When testing, I do the following to register my provider:
> >
> > from qgis.core import QgsProviderRegistry, QgsProviderMetadata
> > from provider import MyProvider
> > registry = QgsProviderRegistry.instance()
> > metadata = QgsProviderMetadata(MyProvider.providerKey(),
> MyProvider.description(), MyProvider.createProvider)
> > registry.registerProvider(metadata)
> > layer = QgsVectorLayer(<my-url>, 'Test myprovider', 'myprovider-plugin')
> > QgsProject.instance().addMapLayer(layer)
> > This seems to initialize the provider, although it stops after the
> constructor of MyFeatureIterator(QgsAbstractFeatureIterator) is run.
> > For this test, data is retrieved from the REST API in the constructor,
> and I can see in the logs that the data is retrieved.
> >
> > I expected it to start iterating objects, but the next message in the
> log is prepareSimplification (I have added a log message to every class
> method to watch progress in the logs), then nothing.
> >
> > I even installed qgis-dev and watched the logs using Microsoft's
> DebugViewer, but I could not see any relevant information.
> >
> > Could someone please help me or tell me where to look to solve this
> issue and start iterating with nextFeature/fetchFeature? Regards,
>
>
> AFAIK there is only one example I wrote for testing purposes ages ago:
>
> https://github.com/qgis/QGIS/blob/master/tests/src/python/provider_python.py
>
> I'm not sure it will be useful but it's a start.
>
> Kind regards.
>
> --
> Alessandro Pasotti
> QCooperative:  www.qcooperative.net
> ItOpen:   www.itopen.it
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201120/16994ad6/attachment.html>

From delazj at gmail.com  Fri Nov 20 05:58:35 2020
From: delazj at gmail.com (DelazJ)
Date: Fri, 20 Nov 2020 14:58:35 +0100
Subject: [QGIS-Developer] Developer Best Practice Suggestions
In-Reply-To: <CAB28Asg8U10BOZZg2oqfa_XkFLj_dL-Va9w-JEXBMeT9MvaiEw@mail.gmail.com>
References: <CABPxTToeWhznS=t0yYoKJcOaHizuNOer4iY8h36cZoyc9i64rQ@mail.gmail.com>
 <CAB28Asj++f-gH+im15hTDumWDD7ppBztBGwg3RKxwApY9b5N+A@mail.gmail.com>
 <CAB28Asg8U10BOZZg2oqfa_XkFLj_dL-Va9w-JEXBMeT9MvaiEw@mail.gmail.com>
Message-ID: <CAECJsSqCjDAPxs_zDXBrfytg8X5zEuuLCYHz3GA2xaqHsnmv7A@mail.gmail.com>

Hi,

While looking for some scripts to automate processes in the doc repo, I
came across this github action (
https://github.com/marketplace/actions/git-auto-commit) that basically
updates a branch based on modifications done in that branch or in another
one.
We currently have github actions that check and report wrong styling, wrong
indentation, missing sip doc, spell checks... And I was wondering whether
it would make sense to go one step further and at the end of the check
either open a PR in the fork repo or push the expected changes in the
branch opening the PR. Maybe this could also be actions people would run in
their own repo before opening the PR (I don't know how possible it's).
This will probably help people that fail to have the ideal development
environment locally (never succeeded on Windows) or that use the github
editor to have these "secondary" but really annoying issues covered easily.

Just wanted to share

Regards,
Harrissou

Le jeu. 29 oct. 2020 à 23:52, Nyall Dawson <nyall.dawson at gmail.com> a
écrit :

> On Fri, 30 Oct 2020 at 08:48, Nyall Dawson <nyall.dawson at gmail.com> wrote:
> >
> > On Wed, 28 Oct 2020 at 23:34, C Hamilton <adenaculture at gmail.com> wrote:
> > >
> > > I tried submitting my first QGIS core code submission. See
> > >
> > > https://github.com/qgis/QGIS/pull/39655
> > >
> > > As I was doing the pull request I found out that there were some
> scripts that should have been run to check the coding style. Unfortunately,
> those scripts are .sh scripts and I chose to develop on Windows using
> Visual Studio and as far as I know there isn't a way to run the scripts.
> > >
> > > I am on windows, but would I be better off to use something like
> virtualbox and create a virtual linux development environment? I'm not as
> good with linux because I haven't used it for over 10 years.
> > >
> > > Is there still a way for me to use the Windows development
> environment, yet make sure I'm able to run all the required scripts to do
> the checks?
> >
> > Yes -- there's two options:
> >
> > 1. (more hassle in the long run) Use cygwin and run the scripts
> > through that. Make sure that you have the "with_astyle" cmake option
> > enabled in your build too! Cygwin is easy to install, but it will be a
> > pain to find all the required dependancies for the prepare commit
> > script (e..g you'll need to get the perl packages)
> >
> > 2. (harder initially, less hassle in the long run) Install WSL and a
> > Ubuntu release through that. Run the prepare commit script inside the
> > Ubuntu shell. WSL takes a through hoops to install, but there's good
> > guides out there. After you have the Ubuntu shell available it's easy
> > to install all the required pacakges for the QGIS prepare commit
> > scripts.
>
> Oh, there's also shitty option #3:
>
> 3. Push your branch to github and find out what you need to change
> through the failing tests. Manually make these changes to files.
> Repeat.
>
> Don't do 3. It's painful for you, painful for all the other devs (who
> have to wait while your string of commits are run through the ci
> before other PRs will get a chance), and it's **incredibly**
> environmentally insensitive. Think of all the wasted CPU cycles and
> the carbon cost of this approach!
>
> Push through the hurdles and you'll find 1 or 2 works, and then you'll
> never have to deal with the frustration of a development process based
> on the third approach ;)
>
> Nyall
>
>
>
> >
> > Personally when I'm doing dev on windows I always use the WSL ubuntu
> > shell now, as it makes git/etc easier to use anyway!
> >
> > Nyall
> >
> >
> >
> > >
> > > How have you set up your QGIS development environment?
> > >
> > > My code submission got a red flag with indentation so before I do
> anything more I really need to figure out the best workflow for doing
> development.
> > >
> > > Thanks,
> > >
> > > Calvin
> > > _______________________________________________
> > > QGIS-Developer mailing list
> > > QGIS-Developer at lists.osgeo.org
> > > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201120/dcae43f1/attachment-0001.html>

From olivier.dalang at gmail.com  Fri Nov 20 06:58:22 2020
From: olivier.dalang at gmail.com (Olivier Dalang)
Date: Fri, 20 Nov 2020 15:58:22 +0100
Subject: [QGIS-Developer] Developer Best Practice Suggestions
In-Reply-To: <CAECJsSqCjDAPxs_zDXBrfytg8X5zEuuLCYHz3GA2xaqHsnmv7A@mail.gmail.com>
References: <CABPxTToeWhznS=t0yYoKJcOaHizuNOer4iY8h36cZoyc9i64rQ@mail.gmail.com>
 <CAB28Asj++f-gH+im15hTDumWDD7ppBztBGwg3RKxwApY9b5N+A@mail.gmail.com>
 <CAB28Asg8U10BOZZg2oqfa_XkFLj_dL-Va9w-JEXBMeT9MvaiEw@mail.gmail.com>
 <CAECJsSqCjDAPxs_zDXBrfytg8X5zEuuLCYHz3GA2xaqHsnmv7A@mail.gmail.com>
Message-ID: <CAExk7p3NisMnc2=3TyvSMmQt9xSkMHRPfZxS6CKRpu1_BBZHdA@mail.gmail.com>

I'm a big fan of #3 :-)

One gotcha with #2 is if you're working in the Windows filesystem, but run
prepare_commit.sh with WSL, you need to make sure the prepare_commit runs
with git.exe, and not WSL's git, as otherwise it can be extremely slow (so
much that the hook is unusable). In my case I had to change
prepare_commit.sh lines ~54-56 for that (replace git by git.exe).

I also had to comment out lines 85-92 of astyle.sh, as they made the script
not find astyle.

About improving tools, I've never tried it, but heard positively of
https://pre-commit.com/ which could be worth investigating for a
potentially nicer and more cross-platform pre-commit ? I feel it's still a
better approach to run those locally than on github (we'd start to have PR
on PRs, which is a bit hard to follow).

Cheers,

Olivier



On Fri, 20 Nov 2020 at 14:58, DelazJ <delazj at gmail.com> wrote:

> Hi,
>
> While looking for some scripts to automate processes in the doc repo, I
> came across this github action (
> https://github.com/marketplace/actions/git-auto-commit) that basically
> updates a branch based on modifications done in that branch or in another
> one.
> We currently have github actions that check and report wrong styling,
> wrong indentation, missing sip doc, spell checks... And I was wondering
> whether it would make sense to go one step further and at the end of the
> check either open a PR in the fork repo or push the expected changes in the
> branch opening the PR. Maybe this could also be actions people would run in
> their own repo before opening the PR (I don't know how possible it's).
> This will probably help people that fail to have the ideal development
> environment locally (never succeeded on Windows) or that use the github
> editor to have these "secondary" but really annoying issues covered easily.
>
> Just wanted to share
>
> Regards,
> Harrissou
>
> Le jeu. 29 oct. 2020 ? 23:52, Nyall Dawson <nyall.dawson at gmail.com> a
> ?crit :
>
>> On Fri, 30 Oct 2020 at 08:48, Nyall Dawson <nyall.dawson at gmail.com>
>> wrote:
>> >
>> > On Wed, 28 Oct 2020 at 23:34, C Hamilton <adenaculture at gmail.com>
>> wrote:
>> > >
>> > > I tried submitting my first QGIS core code submission. See
>> > >
>> > > https://github.com/qgis/QGIS/pull/39655
>> > >
>> > > As I was doing the pull request I found out that there were some
>> scripts that should have been run to check the coding style. Unfortunately,
>> those scripts are .sh scripts and I chose to develop on Windows using
>> Visual Studio and as far as I know there isn't a way to run the scripts.
>> > >
>> > > I am on windows, but would I be better off to use something like
>> virtualbox and create a virtual linux development environment? I'm not as
>> good with linux because I haven't used it for over 10 years.
>> > >
>> > > Is there still a way for me to use the Windows development
>> environment, yet make sure I'm able to run all the required scripts to do
>> the checks?
>> >
>> > Yes -- there's two options:
>> >
>> > 1. (more hassle in the long run) Use cygwin and run the scripts
>> > through that. Make sure that you have the "with_astyle" cmake option
>> > enabled in your build too! Cygwin is easy to install, but it will be a
>> > pain to find all the required dependancies for the prepare commit
>> > script (e..g you'll need to get the perl packages)
>> >
>> > 2. (harder initially, less hassle in the long run) Install WSL and a
>> > Ubuntu release through that. Run the prepare commit script inside the
>> > Ubuntu shell. WSL takes a through hoops to install, but there's good
>> > guides out there. After you have the Ubuntu shell available it's easy
>> > to install all the required pacakges for the QGIS prepare commit
>> > scripts.
>>
>> Oh, there's also shitty option #3:
>>
>> 3. Push your branch to github and find out what you need to change
>> through the failing tests. Manually make these changes to files.
>> Repeat.
>>
>> Don't do 3. It's painful for you, painful for all the other devs (who
>> have to wait while your string of commits are run through the ci
>> before other PRs will get a chance), and it's **incredibly**
>> environmentally insensitive. Think of all the wasted CPU cycles and
>> the carbon cost of this approach!
>>
>> Push through the hurdles and you'll find 1 or 2 works, and then you'll
>> never have to deal with the frustration of a development process based
>> on the third approach ;)
>>
>> Nyall
>>
>>
>>
>> >
>> > Personally when I'm doing dev on windows I always use the WSL ubuntu
>> > shell now, as it makes git/etc easier to use anyway!
>> >
>> > Nyall
>> >
>> >
>> >
>> > >
>> > > How have you set up your QGIS development environment?
>> > >
>> > > My code submission got a red flag with indentation so before I do
>> anything more I really need to figure out the best workflow for doing
>> development.
>> > >
>> > > Thanks,
>> > >
>> > > Calvin
>> > > _______________________________________________
>> > > QGIS-Developer mailing list
>> > > QGIS-Developer at lists.osgeo.org
>> > > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201120/63accccb/attachment.html>

From adenaculture at gmail.com  Fri Nov 20 09:10:58 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Fri, 20 Nov 2020 12:10:58 -0500
Subject: [QGIS-Developer] Vote for Lat Lon Tools Default Coordinate Order -
 YX or XY
Message-ID: <CABPxTTrC9jouXWpRcWO11L8vvkO1CCpw3CUVt=9Q-aTKTxY8wg@mail.gmail.com>

It was suggested to me that the default coordinate order in the Lat Lon
Tools plugin for coordinate capture and zoom-to tools should be "longitude,
latitude" or "X, Y". Originally, Lat Lon Tools was designed to work with
on-line maps which are generally "latitude, longitude" order.

You can always go into the plugin settings and specify which order you want
and that order will be preserved everytime you launch QGIS. The default
order is only applicable the first time you install "Lat Lon Tools" or if
you do a reset to defaults in the Lat Lon Tools settings menu,

Who prefers Lat Lon Tools to default to "longitude, latitude" or "X, Y"
when the plugin is first installed or reset to default values?

Who prefers Lat Lon Tools to default to "latitude, longitude (Google map
order)" or "Y, X" when the plugin is first installed or reset to default
values?

I'm just checking to see if I should make this change or not.

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201120/9cb41b0a/attachment.html>

From ujaval at spatialthoughts.com  Fri Nov 20 09:44:00 2020
From: ujaval at spatialthoughts.com (Ujaval Gandhi)
Date: Fri, 20 Nov 2020 23:14:00 +0530
Subject: [QGIS-Developer] [Qgis-user] Vote for Lat Lon Tools Default
 Coordinate Order - YX or XY
In-Reply-To: <CABPxTTrC9jouXWpRcWO11L8vvkO1CCpw3CUVt=9Q-aTKTxY8wg@mail.gmail.com>
References: <CABPxTTrC9jouXWpRcWO11L8vvkO1CCpw3CUVt=9Q-aTKTxY8wg@mail.gmail.com>
Message-ID: <CALymcQAz3SO+a-Jmnsuo=gQJANhY5wJykQ0sg9NYB4+neJwHxg@mail.gmail.com>

I generally use Lat Lon Tools to go to a specific coordinate that I found
somewhere (online maps, Wikipedia etc.) - so latitude, longitude is
preferred. There are other use cases where X,Y is preferred, but I have
always found it easy to switch using settings or dropdown menu when needed.

Thanks for authoring and maintaining a great plugin!
[image: Logo] <https://spatialthoughts.com/>
Ujaval Gandhi
Spatial Thoughts
mobile: +91-8095684687
email: ujaval at spatialthoughts.com
[image: LinkedIn icon] <https://www.linkedin.com/in/spatialthoughts/>  [image:
Twitter icon] <https://twitter.com/spatialthoughts>



On Fri, Nov 20, 2020 at 10:41 PM C Hamilton <adenaculture at gmail.com> wrote:

> It was suggested to me that the default coordinate order in the Lat Lon
> Tools plugin for coordinate capture and zoom-to tools should be "longitude,
> latitude" or "X, Y". Originally, Lat Lon Tools was designed to work with
> on-line maps which are generally "latitude, longitude" order.
>
> You can always go into the plugin settings and specify which order you
> want and that order will be preserved everytime you launch QGIS. The
> default order is only applicable the first time you install "Lat Lon Tools"
> or if you do a reset to defaults in the Lat Lon Tools settings menu,
>
> Who prefers Lat Lon Tools to default to "longitude, latitude" or "X, Y"
> when the plugin is first installed or reset to default values?
>
> Who prefers Lat Lon Tools to default to "latitude, longitude (Google map
> order)" or "Y, X" when the plugin is first installed or reset to default
> values?
>
> I'm just checking to see if I should make this change or not.
>
> Thanks,
>
> Calvin
> _______________________________________________
> Qgis-user mailing list
> Qgis-user at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201120/5140f7e2/attachment-0001.html>

From rdmailings at duif.net  Sat Nov 21 00:52:54 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sat, 21 Nov 2020 09:52:54 +0100
Subject: [QGIS-Developer] Vote for Lat Lon Tools Default Coordinate
 Order - YX or XY
In-Reply-To: <CABPxTTrC9jouXWpRcWO11L8vvkO1CCpw3CUVt=9Q-aTKTxY8wg@mail.gmail.com>
References: <CABPxTTrC9jouXWpRcWO11L8vvkO1CCpw3CUVt=9Q-aTKTxY8wg@mail.gmail.com>
Message-ID: <aa0bf30e-b49a-8b2d-203f-1a8952a1f4cd@duif.net>

On 11/20/20 6:10 PM, C Hamilton wrote:
> It was suggested to me that the default coordinate order in the Lat Lon Tools plugin for coordinate capture and zoom-to tools should be "longitude, latitude" or "X, Y". Originally, Lat Lon Tools was designed to work with on-line maps which are generally "latitude, longitude" order.
> 
> You can always go into the plugin settings and specify which order you want and that order will be preserved everytime you launch QGIS. The default order is only applicable the first time you install "Lat Lon Tools" or if you do a reset to defaults in the Lat Lon Tools settings menu,
> 
> Who prefers Lat Lon Tools to default to "longitude, latitude" or "X, Y" when the plugin is first installed or reset to default values?
> 
> Who prefers Lat Lon Tools to default to "latitude, longitude (Google map order)" or "Y, X" when the plugin is first installed or reset to default values?

I'm a little late on the table :-) As descision already cast: 
https://github.com/NationalSecurityAgency/qgis-latlontools-plugin/issues/53#issuecomment-731070055
and fine with it, just want to add:

I'm not a geo-guy by original trade and working with scientists/911 peeps at the moment, who favour the math-way of exchanching coordinates (2 dimensional values): X,Y. 

If I were 'boss geo', I'd never use lonlat or latlon terms, only use (decimal!) degrees or x,y :-) 
(people tend to mix lat lon up all the time, they never do with x,y).

In my use-case, the Lat Lon Tools plugin is used in a very pluriform, international environment where coordinates from all kind of crs's are to be mixed/converted (often one pair at a time...). Why would you use YX in one crs and XY in other crs's? It's just not very efficient to have that choice. Just like meters/feet, point/comma delimeters in numbers etc etc. This screams for conversion issues ...

Ah, and while on it, let's all speak Esparanto (and keep the number of QGIS translation builds low) ;-)

Korajn salutojn,

Richard Duivenvoorde


From bernd.vogelgesang at gmx.de  Sat Nov 21 08:23:00 2020
From: bernd.vogelgesang at gmx.de (Bernd Vogelgesang)
Date: Sat, 21 Nov 2020 17:23:00 +0100
Subject: [QGIS-Developer] Processing: sort algorithm not working?
In-Reply-To: <CAB2Z92ACETO=dDwmJA4BH14dQsryu3iDLMv1Kj6ZzKZX1BsZnQ@mail.gmail.com>
References: <CAB2Z92ACETO=dDwmJA4BH14dQsryu3iDLMv1Kj6ZzKZX1BsZnQ@mail.gmail.com>
Message-ID: <44e2c343-2972-139b-0350-fbdc826c07fb@gmx.de>

Hi Andreas,

have a look at my last years issue on this

https://github.com/qgis/QGIS/issues/29794

maybe it's the same

Cheers,

Bernd

On 19.11.20 14:16, Andreas Neumann wrote:
> Hi,
>
> I have a model where at the very end before adding it to the project I was
> trying to sort the result with an expression.
>
> But: the sorting doesn't work. In the help there is the cryptic hint at
> https://docs.qgis.org/3.10/de/docs/user_manual/processing_algs/qgis/vectorgeneral.html#qgisorderbyexpression
> that "Be careful, it might not work as expected with some providers, the
> order might not be kept every time."
>
> Does someone know more about it? Which providers specifically do not
> support sorting?
>
> Does this statement apply to the reading provider or the writing provider?
>
> In my case, I never got any correct sorting ...
>
> Thanks,
> Andreas
>
> --
> Andreas Neumann
> QGIS.ORG board member (treasurer)
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201121/b9d6b75d/attachment.html>

From adenaculture at gmail.com  Sat Nov 21 10:45:31 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Sat, 21 Nov 2020 13:45:31 -0500
Subject: [QGIS-Developer] Vote for Lat Lon Tools Default Coordinate
 Order - YX or XY
In-Reply-To: <aa0bf30e-b49a-8b2d-203f-1a8952a1f4cd@duif.net>
References: <CABPxTTrC9jouXWpRcWO11L8vvkO1CCpw3CUVt=9Q-aTKTxY8wg@mail.gmail.com>
 <aa0bf30e-b49a-8b2d-203f-1a8952a1f4cd@duif.net>
Message-ID: <CABPxTTpChAv2jLO2GTbtu5LbS8exBc1+OSjXpR=nBm82dt=w_A@mail.gmail.com>

I appreciate everyone's ideas and opinions. I think that for now I will
leave Lat Lon Tools as it currently operates, but I will look over the
suggestions to see if I can make sure the options are as clear as possible.

Thanks once again for your input.

Calvin


On Sat, Nov 21, 2020 at 3:52 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> On 11/20/20 6:10 PM, C Hamilton wrote:
> > It was suggested to me that the default coordinate order in the Lat Lon
> Tools plugin for coordinate capture and zoom-to tools should be "longitude,
> latitude" or "X, Y". Originally, Lat Lon Tools was designed to work with
> on-line maps which are generally "latitude, longitude" order.
> >
> > You can always go into the plugin settings and specify which order you
> want and that order will be preserved everytime you launch QGIS. The
> default order is only applicable the first time you install "Lat Lon Tools"
> or if you do a reset to defaults in the Lat Lon Tools settings menu,
> >
> > Who prefers Lat Lon Tools to default to "longitude, latitude" or "X, Y"
> when the plugin is first installed or reset to default values?
> >
> > Who prefers Lat Lon Tools to default to "latitude, longitude (Google map
> order)" or "Y, X" when the plugin is first installed or reset to default
> values?
>
> I'm a little late on the table :-) As descision already cast:
>
> https://github.com/NationalSecurityAgency/qgis-latlontools-plugin/issues/53#issuecomment-731070055
> and fine with it, just want to add:
>
> I'm not a geo-guy by original trade and working with scientists/911 peeps
> at the moment, who favour the math-way of exchanching coordinates (2
> dimensional values): X,Y.
>
> If I were 'boss geo', I'd never use lonlat or latlon terms, only use
> (decimal!) degrees or x,y :-)
> (people tend to mix lat lon up all the time, they never do with x,y).
>
> In my use-case, the Lat Lon Tools plugin is used in a very pluriform,
> international environment where coordinates from all kind of crs's are to
> be mixed/converted (often one pair at a time...). Why would you use YX in
> one crs and XY in other crs's? It's just not very efficient to have that
> choice. Just like meters/feet, point/comma delimeters in numbers etc etc.
> This screams for conversion issues ...
>
> Ah, and while on it, let's all speak Esparanto (and keep the number of
> QGIS translation builds low) ;-)
>
> Korajn salutojn,
>
> Richard Duivenvoorde
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201121/a0f55cd0/attachment.html>

From kuazhangxiaoai at sina.com  Sun Nov 22 23:56:58 2020
From: kuazhangxiaoai at sina.com (Young)
Date: Mon, 23 Nov 2020 15:56:58 +0800
Subject: [QGIS-Developer] Packaging QGIS error
Message-ID: <mailman.0.1606118798.26368.qgis-developer@lists.osgeo.org>

Hi?I have  a trouble about packing QGIS software after compiling.such as following:



What?s the reason about the problem of tar.exe and bzip2? How to deal with these problems?
Thanks

GangYang.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201123/b0d9d6a8/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 85BEF27684A0432586CBC708FA89294C.png
Type: image/png
Size: 33390 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201123/b0d9d6a8/attachment.png>

From rdmailings at duif.net  Mon Nov 23 01:34:35 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 23 Nov 2020 10:34:35 +0100
Subject: [QGIS-Developer] PyQGIS: add feature (+defaults/expressions),
 with Form
Message-ID: <f2ccfbb7-1b47-393f-06b3-13812cbf659c@duif.net>

Hi Core Devs,

I'm thinking about a solution for this 

https://github.com/qgis/QGIS/issues/40213
(PyQGIS: iface.openFeatureForm() seems not to handle autofill fields)

My conclusion is: the normal handling of default values or expression based attribute values, and the opening of the form dialog, are 'locked' in QgsFeatureAction::addFeature (glued together with the opening of the form):

https://github.com/qgis/QGIS/blob/master/src/app/qgsfeatureaction.cpp#L168-L320
I do see a way to fix it (as in: use "iface.openFeatureForm: in PyQGIS WITH the handling of default and expression values).

I wonder if anybody has an opinion about moving part of this functionality to the vector layer.
Talking about
- setting defaults
- setting expression based values

So QgsFeatureAction::addFeature would be shrunken till: 
- layer.initAttributesForFeatures (or somethink like that)
- open feature form...

Is this OK for others? Or is the general opinion that you should copy all this to PyQGIS if you want to open the feature form?

Thanks for any input.

Regards,

Richard Duivenvoordd

From rdmailings at duif.net  Mon Nov 23 02:45:00 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 23 Nov 2020 11:45:00 +0100
Subject: [QGIS-Developer] PyQGIS: add feature (+defaults/expressions),
 with Form
In-Reply-To: <f2ccfbb7-1b47-393f-06b3-13812cbf659c@duif.net>
References: <f2ccfbb7-1b47-393f-06b3-13812cbf659c@duif.net>
Message-ID: <cbb91369-c3ec-33eb-cc02-ff87bccd7380@duif.net>

In the issue Alessandro pointed to:

QgsVectorLayerUtils.createFeature

https://qgis.org/pyqgis/master/core/QgsVectorLayerUtils.html?highlight=qgsvectorlayerutils#qgis.core.QgsVectorLayerUtils.createFeature

THAT one takes the expression context into account!

So:
Given an editable layer 'layer' and a valid 'geom":

feat = QgsVectorLayerUtils.createFeature(layer, geom, {}, layer.createExpressionContext() )
iface.openFeatureForm(layer, feat)

works!!

Thanks Alessandro,

Regards,

Richard Duivenvoorde


On 11/23/20 10:34 AM, Richard Duivenvoorde wrote:
> Hi Core Devs,
> 
> I'm thinking about a solution for this 
> 
> https://github.com/qgis/QGIS/issues/40213
> (PyQGIS: iface.openFeatureForm() seems not to handle autofill fields)
> 
> My conclusion is: the normal handling of default values or expression based attribute values, and the opening of the form dialog, are 'locked' in QgsFeatureAction::addFeature (glued together with the opening of the form):
> 
> https://github.com/qgis/QGIS/blob/master/src/app/qgsfeatureaction.cpp#L168-L320
> I do see a way to fix it (as in: use "iface.openFeatureForm: in PyQGIS WITH the handling of default and expression values).
> 
> I wonder if anybody has an opinion about moving part of this functionality to the vector layer.
> Talking about
> - setting defaults
> - setting expression based values
> 
> So QgsFeatureAction::addFeature would be shrunken till: 
> - layer.initAttributesForFeatures (or somethink like that)
> - open feature form...
> 
> Is this OK for others? Or is the general opinion that you should copy all this to PyQGIS if you want to open the feature form?
> 
> Thanks for any input.
> 
> Regards,
> 
> Richard Duivenvoordd
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


From andreas at qgis.org  Mon Nov 23 06:23:09 2020
From: andreas at qgis.org (Andreas Neumann)
Date: Mon, 23 Nov 2020 15:23:09 +0100
Subject: [QGIS-Developer] Processing: No spatial index exists for input
 layer, performance will be severely degraded
Message-ID: <CAB2Z92Bjtq9nKKQXFFw=WxKPx_tyHu1U-_AOt7SGhmizqJxKEg@mail.gmail.com>

Hi,

When running QGIS processing models, I frequently get the red warning
messages:

No spatial index exists for input layer, performance will be severely
degraded


These are temporary (intermediate) geopackage files that QGIS generates
during the running of the model. Is there an option that QGIS could
automatically generate these spatial indexes for intermediate files?


Thanks,

Andreas

--
Andreas Neumann
QGIS.ORG board member (treasurer)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201123/d96f4a98/attachment.html>

From benjamin.jakimow at geo.hu-berlin.de  Mon Nov 23 06:27:02 2020
From: benjamin.jakimow at geo.hu-berlin.de (Benjamin Jakimow)
Date: Mon, 23 Nov 2020 15:27:02 +0100
Subject: [QGIS-Developer] QgsExpressionContextGenerator -
 QgsExpressionLineEdit Crash
Message-ID: <72770a45-d72b-2fbb-cae8-d2ee72c765e7@geo.hu-berlin.de>

Dear QGIS Developer Community,

I like to use a QgsExpressionContextGenerator to create the expression 
context for a QgsExpressionLineEdit.
However, when executed in the QGIS python shell, the following code 
crashes my QGIS after clicking on the Expression builder widget:

from  qgis.core  import  (
     QgsExpressionContextGenerator,QgsExpressionContext,QgsExpressionContextUtils
)

from  qgis.gui  import  QgsExpressionLineEdit

class  Generator(QgsExpressionContextGenerator):

     def  __init__(self,*args,**kwds):
         super(Generator,self).__init__(*args,**kwds)

     def  createExpressionContext(self)->  QgsExpressionContext:
         context  =  QgsExpressionContext([QgsExpressionContextUtils.globalScope()])
         print(f'Generated QgsExpressionContext: {context}',flush=True)
         return  context

gen  =  Generator()
w  =  QgsExpressionLineEdit()
w.setExpression("'click edit button ->'")
w.registerExpressionContextGenerator(gen)
w.show()

# now click on edit button to produce a crash

grafik

Any suggestions how I can fix this?

Thanks, Benjamin




-- 
Benjamin Jakimow, Doctoral Researcher
Earth Observation Lab | Geography Department | Humboldt-Universit?t zu Berlin

e-mail: benjamin.jakimow at geo.hu-berlin.de

phone:  +49 (0) 30 2093 6846
mobile: +49 (0) 157 5656 8477
fax:    +49 (0) 30 2093 6848
mail:   Unter den Linden 6 | 10099 Berlin | Germany
room: 2'211
web:    https://hu-berlin.de/eo-lab

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201123/08f687fb/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 5422 bytes
Desc: S/MIME Cryptographic Signature
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201123/08f687fb/attachment-0001.bin>

From arnaud.morvan at camptocamp.com  Mon Nov 23 08:58:58 2020
From: arnaud.morvan at camptocamp.com (Arnaud Morvan)
Date: Mon, 23 Nov 2020 17:58:58 +0100
Subject: [QGIS-Developer] Processing: sort algorithm not working?
In-Reply-To: <44e2c343-2972-139b-0350-fbdc826c07fb@gmx.de>
References: <CAB2Z92ACETO=dDwmJA4BH14dQsryu3iDLMv1Kj6ZzKZX1BsZnQ@mail.gmail.com>
 <44e2c343-2972-139b-0350-fbdc826c07fb@gmx.de>
Message-ID: <630982f1-9a51-2b04-7416-d70942b7d953@camptocamp.com>

Hi Andreas.

Note that the order of features in attributes table does not seems to 
reflect the source order.

After sorting your dataset with sortbyexpression, try to add a 
auto-incremental field and open this new output in attribute table.

Sort this attribute table by the new auto-incremental field. If the 
order is good, it is not a sortbyexpression issue, but an attribute 
table issue.

Regards

Arnaud Morvan
Ing?nieur logiciel
T?l: +33 (0)4 58 48 20 32

Camptocamp France SAS
18 rue du Lac Saint Andr?
Savoie Technolac - B?timent Le Dauphin
F-73370 Le Bourget du Lac
http://www.camptocamp.com

Le 21/11/2020 ? 17:23, Bernd Vogelgesang a ?crit?:
>
> Hi Andreas,
>
> have a look at my last years issue on this
>
> https://github.com/qgis/QGIS/issues/29794
>
> maybe it's the same
>
> Cheers,
>
> Bernd
>
> On 19.11.20 14:16, Andreas Neumann wrote:
>> Hi,
>>
>> I have a model where at the very end before adding it to the project I was
>> trying to sort the result with an expression.
>>
>> But: the sorting doesn't work. In the help there is the cryptic hint at
>> https://docs.qgis.org/3.10/de/docs/user_manual/processing_algs/qgis/vectorgeneral.html#qgisorderbyexpression
>> that "Be careful, it might not work as expected with some providers, the
>> order might not be kept every time."
>>
>> Does someone know more about it? Which providers specifically do not
>> support sorting?
>>
>> Does this statement apply to the reading provider or the writing provider?
>>
>> In my case, I never got any correct sorting ...
>>
>> Thanks,
>> Andreas
>>
>> --
>> Andreas Neumann
>> QGIS.ORG board member (treasurer)
>>
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201123/8ab10c50/attachment.html>

From luipir at gmail.com  Mon Nov 23 09:26:05 2020
From: luipir at gmail.com (Luigi Pirelli)
Date: Mon, 23 Nov 2020 18:26:05 +0100
Subject: [QGIS-Developer] QtCreator does not start QGIS?
In-Reply-To: <4fdcdf86-dbb0-7823-33dc-28d7e4bec855@gmail.com>
References: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>
 <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>
 <4fdcdf86-dbb0-7823-33dc-28d7e4bec855@gmail.com>
Message-ID: <CAFO80_o_X0Ndxt9WRunwq=NeJJ8TEVsx8CDJY1-+dZNtmx4CpQ@mail.gmail.com>

hmmmm... seems the same error happen with qt 5.12.8 (eg.. version with
ubuntu 20.04 LTR)

src/core/qgsproviderregistry.cpp:261 : (init) [0ms] Checking ogr: ...loaded
OK (59 file filters)
src/core/auth/qgsauthmanager.cpp:180 : (init) [0ms] Initializing QCA...

Thread 5 "QDBusConnection" received signal SIG33, Real-time event 33.
[Switching to Thread 0x7fffdaffd700 (LWP 285949)]
0x00007ffff1e4baff in __GI___poll (fds=0x7fffd000eaf0, nfds=5, timeout=-1)
at ../sysdeps/unix/sysv/linux/poll.c:29
29 ../sysdeps/unix/sysv/linux/poll.c: No such file or directory.


there is a workaround? I need to debug some crashes

regards
Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Thu, 12 Nov 2020 at 18:00, Sandro Mani <manisandro at gmail.com> wrote:

> Hi Richard
>
> If you are using Qt5.15.{0,1} and are getting random SIGTRAPS, or the
> process segfaulting straight after starting through gdb, this might be [1].
>
> Sandro
>
> [1] https://bugreports.qt.io/browse/QTBUG-86319
>
> On 12.11.20 15:45, Richard Duivenvoorde wrote:
> > Still having troubles starting QGIS in debug in QtCreator in my setup
> today.
> >
> > See https://duif.net/qc.png
> >
> > So QGIS (in QtCreator) starts, and during startup it stops and shows me
> the dissassembler(?) view. Sometimes I can see something (like in this
> screendump: something with libnss ?) sometimes all is white/empty.
> >
> > Last this I in the log is: "Destroyed while process ("whoami"), which
> according to git is recently changed but... does not seem related to me:
> >
> https://github.com/qgis/QGIS/commit/7a38388a8762503b0bdba55065fffea2ff24137a
> >
> > Regards,
> >
> > Richard
> >
> >
> >
> > On 11/11/20 9:16 AM, Richard Duivenvoorde wrote:
> >> Hi,
> >>
> >> Currently in my Qt build I cannot debug QGIS in qtcreator because it
> hangs/stops when showing the splash.
> >> After some time the Application Output shows:
> >>
> >> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [60891ms]
> [thread:0x5555560d9d00] 2020-11-11T08:58:15 [1] HTTP fetch
> https://feed.qgis.org/?after=1605081272&lang=en failed with error
> Operation canceled
> >> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms]
> [thread:0x5555560d9d00] 2020-11-11T08:58:15 Network[1] Network request
> https://feed.qgis.org/?after=1605081272&lang=en timed out
> >>
> >> I am connected, and https://feed.qgis.org/?after=1605081272&lang=en is
> available from my browser.
> >>
> >> Disabling: 'Show QGIS news feed on welcome page' and 'Check QGIS
> version at startup' fix this.
> >>
> >> Others have this issue currently?
> >>
> >> (I hit my head also with this sometimes when in mixed/http proxied
> environments
> >> I still think we should use 'opt in' for these 'QGIS phoning home
> stuff' instead of 'opt out')
> >>
> >> Regards,
> >>
> >> Richard Duivenvoorde
> >>
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201123/98982f77/attachment.html>

From vcloarec at gmail.com  Mon Nov 23 09:30:10 2020
From: vcloarec at gmail.com (Vincent Cloarec)
Date: Mon, 23 Nov 2020 13:30:10 -0400
Subject: [QGIS-Developer] QtCreator does not start QGIS?
In-Reply-To: <CAFO80_o_X0Ndxt9WRunwq=NeJJ8TEVsx8CDJY1-+dZNtmx4CpQ@mail.gmail.com>
References: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>
 <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>
 <4fdcdf86-dbb0-7823-33dc-28d7e4bec855@gmail.com>
 <CAFO80_o_X0Ndxt9WRunwq=NeJJ8TEVsx8CDJY1-+dZNtmx4CpQ@mail.gmail.com>
Message-ID: <CAHaTM5UKNUw-+EBjEq6EYJRa-3Z2QFKgaV11qiLKivWJRC5WAg@mail.gmail.com>

This works for me :
http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-Qtcreator-debug-issues-td5389889.html


Le lun. 23 nov. 2020 ? 13:26, Luigi Pirelli <luipir at gmail.com> a ?crit :

> hmmmm... seems the same error happen with qt 5.12.8 (eg.. version with
> ubuntu 20.04 LTR)
>
> src/core/qgsproviderregistry.cpp:261 : (init) [0ms] Checking ogr:
> ...loaded OK (59 file filters)
> src/core/auth/qgsauthmanager.cpp:180 : (init) [0ms] Initializing QCA...
>
> Thread 5 "QDBusConnection" received signal SIG33, Real-time event 33.
> [Switching to Thread 0x7fffdaffd700 (LWP 285949)]
> 0x00007ffff1e4baff in __GI___poll (fds=0x7fffd000eaf0, nfds=5, timeout=-1)
> at ../sysdeps/unix/sysv/linux/poll.c:29
> 29 ../sysdeps/unix/sysv/linux/poll.c: No such file or directory.
>
>
> there is a workaround? I need to debug some crashes
>
> regards
> Luigi Pirelli
>
>
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Book: Mastering QGIS3 - 3rd Edition
> <https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
> * Hire a team: http://www.qcooperative.net
>
> **************************************************************************************************
>
>
> On Thu, 12 Nov 2020 at 18:00, Sandro Mani <manisandro at gmail.com> wrote:
>
>> Hi Richard
>>
>> If you are using Qt5.15.{0,1} and are getting random SIGTRAPS, or the
>> process segfaulting straight after starting through gdb, this might be
>> [1].
>>
>> Sandro
>>
>> [1] https://bugreports.qt.io/browse/QTBUG-86319
>>
>> On 12.11.20 15:45, Richard Duivenvoorde wrote:
>> > Still having troubles starting QGIS in debug in QtCreator in my setup
>> today.
>> >
>> > See https://duif.net/qc.png
>> >
>> > So QGIS (in QtCreator) starts, and during startup it stops and shows me
>> the dissassembler(?) view. Sometimes I can see something (like in this
>> screendump: something with libnss ?) sometimes all is white/empty.
>> >
>> > Last this I in the log is: "Destroyed while process ("whoami"), which
>> according to git is recently changed but... does not seem related to me:
>> >
>> https://github.com/qgis/QGIS/commit/7a38388a8762503b0bdba55065fffea2ff24137a
>> >
>> > Regards,
>> >
>> > Richard
>> >
>> >
>> >
>> > On 11/11/20 9:16 AM, Richard Duivenvoorde wrote:
>> >> Hi,
>> >>
>> >> Currently in my Qt build I cannot debug QGIS in qtcreator because it
>> hangs/stops when showing the splash.
>> >> After some time the Application Output shows:
>> >>
>> >> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [60891ms]
>> [thread:0x5555560d9d00] 2020-11-11T08:58:15 [1] HTTP fetch
>> https://feed.qgis.org/?after=1605081272&lang=en failed with error
>> Operation canceled
>> >> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms]
>> [thread:0x5555560d9d00] 2020-11-11T08:58:15 Network[1] Network request
>> https://feed.qgis.org/?after=1605081272&lang=en timed out
>> >>
>> >> I am connected, and https://feed.qgis.org/?after=1605081272&lang=en
>> is available from my browser.
>> >>
>> >> Disabling: 'Show QGIS news feed on welcome page' and 'Check QGIS
>> version at startup' fix this.
>> >>
>> >> Others have this issue currently?
>> >>
>> >> (I hit my head also with this sometimes when in mixed/http proxied
>> environments
>> >> I still think we should use 'opt in' for these 'QGIS phoning home
>> stuff' instead of 'opt out')
>> >>
>> >> Regards,
>> >>
>> >> Richard Duivenvoorde
>> >>
>> >> _______________________________________________
>> >> QGIS-Developer mailing list
>> >> QGIS-Developer at lists.osgeo.org
>> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >>
>> > _______________________________________________
>> > QGIS-Developer mailing list
>> > QGIS-Developer at lists.osgeo.org
>> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201123/0a8e858b/attachment-0001.html>

From matthias at opengis.ch  Mon Nov 23 09:30:11 2020
From: matthias at opengis.ch (Matthias Kuhn)
Date: Mon, 23 Nov 2020 18:30:11 +0100
Subject: [QGIS-Developer] QtCreator does not start QGIS?
In-Reply-To: <CAFO80_o_X0Ndxt9WRunwq=NeJJ8TEVsx8CDJY1-+dZNtmx4CpQ@mail.gmail.com>
References: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>
 <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>
 <4fdcdf86-dbb0-7823-33dc-28d7e4bec855@gmail.com>
 <CAFO80_o_X0Ndxt9WRunwq=NeJJ8TEVsx8CDJY1-+dZNtmx4CpQ@mail.gmail.com>
Message-ID: <CAC7zN96ehnmQSFV_wcMHXUZpjnk1Aia1ZCzWsYYrGKMaJYCA=g@mail.gmail.com>

Hi Luigi,

This is an older issue, workaround here:

http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-Qtcreator-debug-issues-tp5389889p5389905.html

Hope this helps and best wishes
Matthias

On Mon, Nov 23, 2020 at 6:26 PM Luigi Pirelli <luipir at gmail.com> wrote:

> hmmmm... seems the same error happen with qt 5.12.8 (eg.. version with
> ubuntu 20.04 LTR)
>
> src/core/qgsproviderregistry.cpp:261 : (init) [0ms] Checking ogr:
> ...loaded OK (59 file filters)
> src/core/auth/qgsauthmanager.cpp:180 : (init) [0ms] Initializing QCA...
>
> Thread 5 "QDBusConnection" received signal SIG33, Real-time event 33.
> [Switching to Thread 0x7fffdaffd700 (LWP 285949)]
> 0x00007ffff1e4baff in __GI___poll (fds=0x7fffd000eaf0, nfds=5, timeout=-1)
> at ../sysdeps/unix/sysv/linux/poll.c:29
> 29 ../sysdeps/unix/sysv/linux/poll.c: No such file or directory.
>
>
> there is a workaround? I need to debug some crashes
>
> regards
> Luigi Pirelli
>
>
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Book: Mastering QGIS3 - 3rd Edition
> <https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
> * Hire a team: http://www.qcooperative.net
>
> **************************************************************************************************
>
>
> On Thu, 12 Nov 2020 at 18:00, Sandro Mani <manisandro at gmail.com> wrote:
>
>> Hi Richard
>>
>> If you are using Qt5.15.{0,1} and are getting random SIGTRAPS, or the
>> process segfaulting straight after starting through gdb, this might be
>> [1].
>>
>> Sandro
>>
>> [1] https://bugreports.qt.io/browse/QTBUG-86319
>>
>> On 12.11.20 15:45, Richard Duivenvoorde wrote:
>> > Still having troubles starting QGIS in debug in QtCreator in my setup
>> today.
>> >
>> > See https://duif.net/qc.png
>> >
>> > So QGIS (in QtCreator) starts, and during startup it stops and shows me
>> the dissassembler(?) view. Sometimes I can see something (like in this
>> screendump: something with libnss ?) sometimes all is white/empty.
>> >
>> > Last this I in the log is: "Destroyed while process ("whoami"), which
>> according to git is recently changed but... does not seem related to me:
>> >
>> https://github.com/qgis/QGIS/commit/7a38388a8762503b0bdba55065fffea2ff24137a
>> >
>> > Regards,
>> >
>> > Richard
>> >
>> >
>> >
>> > On 11/11/20 9:16 AM, Richard Duivenvoorde wrote:
>> >> Hi,
>> >>
>> >> Currently in my Qt build I cannot debug QGIS in qtcreator because it
>> hangs/stops when showing the splash.
>> >> After some time the Application Output shows:
>> >>
>> >> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [60891ms]
>> [thread:0x5555560d9d00] 2020-11-11T08:58:15 [1] HTTP fetch
>> https://feed.qgis.org/?after=1605081272&lang=en failed with error
>> Operation canceled
>> >> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms]
>> [thread:0x5555560d9d00] 2020-11-11T08:58:15 Network[1] Network request
>> https://feed.qgis.org/?after=1605081272&lang=en timed out
>> >>
>> >> I am connected, and https://feed.qgis.org/?after=1605081272&lang=en
>> is available from my browser.
>> >>
>> >> Disabling: 'Show QGIS news feed on welcome page' and 'Check QGIS
>> version at startup' fix this.
>> >>
>> >> Others have this issue currently?
>> >>
>> >> (I hit my head also with this sometimes when in mixed/http proxied
>> environments
>> >> I still think we should use 'opt in' for these 'QGIS phoning home
>> stuff' instead of 'opt out')
>> >>
>> >> Regards,
>> >>
>> >> Richard Duivenvoorde
>> >>
>> >> _______________________________________________
>> >> QGIS-Developer mailing list
>> >> QGIS-Developer at lists.osgeo.org
>> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> >>
>> > _______________________________________________
>> > QGIS-Developer mailing list
>> > QGIS-Developer at lists.osgeo.org
>> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201123/0087f227/attachment.html>

From luipir at gmail.com  Mon Nov 23 09:41:58 2020
From: luipir at gmail.com (Luigi Pirelli)
Date: Mon, 23 Nov 2020 18:41:58 +0100
Subject: [QGIS-Developer] QtCreator does not start QGIS?
In-Reply-To: <CAC7zN96ehnmQSFV_wcMHXUZpjnk1Aia1ZCzWsYYrGKMaJYCA=g@mail.gmail.com>
References: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>
 <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>
 <4fdcdf86-dbb0-7823-33dc-28d7e4bec855@gmail.com>
 <CAFO80_o_X0Ndxt9WRunwq=NeJJ8TEVsx8CDJY1-+dZNtmx4CpQ@mail.gmail.com>
 <CAC7zN96ehnmQSFV_wcMHXUZpjnk1Aia1ZCzWsYYrGKMaJYCA=g@mail.gmail.com>
Message-ID: <CAFO80_qUasByDgv6OZUa6zDyKkmDVA1ocPJ7UwNciPTi1=a4_A@mail.gmail.com>

great. thanks for pointing it out... btw I also found that using LLDB
instead of GDB solve too (as workaround). I'll try back to GDB for more
uniformity.

cheers

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Mon, 23 Nov 2020 at 18:30, Matthias Kuhn <matthias at opengis.ch> wrote:

> Hi Luigi,
>
> This is an older issue, workaround here:
>
>
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-Qtcreator-debug-issues-tp5389889p5389905.html
>
> Hope this helps and best wishes
> Matthias
>
> On Mon, Nov 23, 2020 at 6:26 PM Luigi Pirelli <luipir at gmail.com> wrote:
>
>> hmmmm... seems the same error happen with qt 5.12.8 (eg.. version with
>> ubuntu 20.04 LTR)
>>
>> src/core/qgsproviderregistry.cpp:261 : (init) [0ms] Checking ogr:
>> ...loaded OK (59 file filters)
>> src/core/auth/qgsauthmanager.cpp:180 : (init) [0ms] Initializing QCA...
>>
>> Thread 5 "QDBusConnection" received signal SIG33, Real-time event 33.
>> [Switching to Thread 0x7fffdaffd700 (LWP 285949)]
>> 0x00007ffff1e4baff in __GI___poll (fds=0x7fffd000eaf0, nfds=5,
>> timeout=-1) at ../sysdeps/unix/sysv/linux/poll.c:29
>> 29 ../sysdeps/unix/sysv/linux/poll.c: No such file or directory.
>>
>>
>> there is a workaround? I need to debug some crashes
>>
>> regards
>> Luigi Pirelli
>>
>>
>> **************************************************************************************************
>> * LinkedIn: https://www.linkedin.com/in/luigipirelli
>> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
>> * GitHub: https://github.com/luipir
>> * Book: Mastering QGIS3 - 3rd Edition
>> <https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
>> * Hire a team: http://www.qcooperative.net
>>
>> **************************************************************************************************
>>
>>
>> On Thu, 12 Nov 2020 at 18:00, Sandro Mani <manisandro at gmail.com> wrote:
>>
>>> Hi Richard
>>>
>>> If you are using Qt5.15.{0,1} and are getting random SIGTRAPS, or the
>>> process segfaulting straight after starting through gdb, this might be
>>> [1].
>>>
>>> Sandro
>>>
>>> [1] https://bugreports.qt.io/browse/QTBUG-86319
>>>
>>> On 12.11.20 15:45, Richard Duivenvoorde wrote:
>>> > Still having troubles starting QGIS in debug in QtCreator in my setup
>>> today.
>>> >
>>> > See https://duif.net/qc.png
>>> >
>>> > So QGIS (in QtCreator) starts, and during startup it stops and shows
>>> me the dissassembler(?) view. Sometimes I can see something (like in this
>>> screendump: something with libnss ?) sometimes all is white/empty.
>>> >
>>> > Last this I in the log is: "Destroyed while process ("whoami"), which
>>> according to git is recently changed but... does not seem related to me:
>>> >
>>> https://github.com/qgis/QGIS/commit/7a38388a8762503b0bdba55065fffea2ff24137a
>>> >
>>> > Regards,
>>> >
>>> > Richard
>>> >
>>> >
>>> >
>>> > On 11/11/20 9:16 AM, Richard Duivenvoorde wrote:
>>> >> Hi,
>>> >>
>>> >> Currently in my Qt build I cannot debug QGIS in qtcreator because it
>>> hangs/stops when showing the splash.
>>> >> After some time the Application Output shows:
>>> >>
>>> >> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [60891ms]
>>> [thread:0x5555560d9d00] 2020-11-11T08:58:15 [1] HTTP fetch
>>> https://feed.qgis.org/?after=1605081272&lang=en failed with error
>>> Operation canceled
>>> >> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms]
>>> [thread:0x5555560d9d00] 2020-11-11T08:58:15 Network[1] Network request
>>> https://feed.qgis.org/?after=1605081272&lang=en timed out
>>> >>
>>> >> I am connected, and https://feed.qgis.org/?after=1605081272&lang=en
>>> is available from my browser.
>>> >>
>>> >> Disabling: 'Show QGIS news feed on welcome page' and 'Check QGIS
>>> version at startup' fix this.
>>> >>
>>> >> Others have this issue currently?
>>> >>
>>> >> (I hit my head also with this sometimes when in mixed/http proxied
>>> environments
>>> >> I still think we should use 'opt in' for these 'QGIS phoning home
>>> stuff' instead of 'opt out')
>>> >>
>>> >> Regards,
>>> >>
>>> >> Richard Duivenvoorde
>>> >>
>>> >> _______________________________________________
>>> >> QGIS-Developer mailing list
>>> >> QGIS-Developer at lists.osgeo.org
>>> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> >>
>>> > _______________________________________________
>>> > QGIS-Developer mailing list
>>> > QGIS-Developer at lists.osgeo.org
>>> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201123/1bafa48c/attachment-0001.html>

From adenaculture at gmail.com  Mon Nov 23 09:47:19 2020
From: adenaculture at gmail.com (C Hamilton)
Date: Mon, 23 Nov 2020 12:47:19 -0500
Subject: [QGIS-Developer] PyQGIS: add feature (+defaults/expressions),
 with Form
In-Reply-To: <cbb91369-c3ec-33eb-cc02-ff87bccd7380@duif.net>
References: <f2ccfbb7-1b47-393f-06b3-13812cbf659c@duif.net>
 <cbb91369-c3ec-33eb-cc02-ff87bccd7380@duif.net>
Message-ID: <CABPxTTomhdwef7=_4qBk3rfHb8LCPVeNUrbQ-UOi1E5+NyJA2A@mail.gmail.com>

So why is there a separate way to create features? Should these be cross
referenced in the documentation as to why one method should be used vs. the
other? This solves the openFeatureForm problem. Perhaps the documentation
should also mention that if you use openFeatureForm then you need to
use QgsVectorLayerUtils.createFeature(...).

Thanks,

Calvin

On Mon, Nov 23, 2020 at 5:45 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> In the issue Alessandro pointed to:
>
> QgsVectorLayerUtils.createFeature
>
>
> https://qgis.org/pyqgis/master/core/QgsVectorLayerUtils.html?highlight=qgsvectorlayerutils#qgis.core.QgsVectorLayerUtils.createFeature
>
> THAT one takes the expression context into account!
>
> So:
> Given an editable layer 'layer' and a valid 'geom":
>
> feat = QgsVectorLayerUtils.createFeature(layer, geom, {},
> layer.createExpressionContext() )
> iface.openFeatureForm(layer, feat)
>
> works!!
>
> Thanks Alessandro,
>
> Regards,
>
> Richard Duivenvoorde
>
>
> On 11/23/20 10:34 AM, Richard Duivenvoorde wrote:
> > Hi Core Devs,
> >
> > I'm thinking about a solution for this
> >
> > https://github.com/qgis/QGIS/issues/40213
> > (PyQGIS: iface.openFeatureForm() seems not to handle autofill fields)
> >
> > My conclusion is: the normal handling of default values or expression
> based attribute values, and the opening of the form dialog, are 'locked' in
> QgsFeatureAction::addFeature (glued together with the opening of the form):
> >
> >
> https://github.com/qgis/QGIS/blob/master/src/app/qgsfeatureaction.cpp#L168-L320
> > I do see a way to fix it (as in: use "iface.openFeatureForm: in PyQGIS
> WITH the handling of default and expression values).
> >
> > I wonder if anybody has an opinion about moving part of this
> functionality to the vector layer.
> > Talking about
> > - setting defaults
> > - setting expression based values
> >
> > So QgsFeatureAction::addFeature would be shrunken till:
> > - layer.initAttributesForFeatures (or somethink like that)
> > - open feature form...
> >
> > Is this OK for others? Or is the general opinion that you should copy
> all this to PyQGIS if you want to open the feature form?
> >
> > Thanks for any input.
> >
> > Regards,
> >
> > Richard Duivenvoordd
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201123/af3fa048/attachment.html>

From luipir at gmail.com  Mon Nov 23 09:55:56 2020
From: luipir at gmail.com (Luigi Pirelli)
Date: Mon, 23 Nov 2020 18:55:56 +0100
Subject: [QGIS-Developer] QtCreator does not start QGIS?
In-Reply-To: <CAC7zN96ehnmQSFV_wcMHXUZpjnk1Aia1ZCzWsYYrGKMaJYCA=g@mail.gmail.com>
References: <3fa81847-a128-1a78-cf12-1857c2e411ed@duif.net>
 <6325495c-554c-f39d-5598-007c8fb37b0d@duif.net>
 <4fdcdf86-dbb0-7823-33dc-28d7e4bec855@gmail.com>
 <CAFO80_o_X0Ndxt9WRunwq=NeJJ8TEVsx8CDJY1-+dZNtmx4CpQ@mail.gmail.com>
 <CAC7zN96ehnmQSFV_wcMHXUZpjnk1Aia1ZCzWsYYrGKMaJYCA=g@mail.gmail.com>
Message-ID: <CAFO80_pUPwc0a559mqhUGRtwnwZdSU7oexcwL=CP93Vp7CPDHQ@mail.gmail.com>

poposted workaround works with GDB... but I've different crashes using gdb
and lldb, probably more similar to that in runtime that caught by LLDB.
I'll investigate more

cheers

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Mon, 23 Nov 2020 at 18:30, Matthias Kuhn <matthias at opengis.ch> wrote:

> Hi Luigi,
>
> This is an older issue, workaround here:
>
>
> http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-Qtcreator-debug-issues-tp5389889p5389905.html
>
> Hope this helps and best wishes
> Matthias
>
> On Mon, Nov 23, 2020 at 6:26 PM Luigi Pirelli <luipir at gmail.com> wrote:
>
>> hmmmm... seems the same error happen with qt 5.12.8 (eg.. version with
>> ubuntu 20.04 LTR)
>>
>> src/core/qgsproviderregistry.cpp:261 : (init) [0ms] Checking ogr:
>> ...loaded OK (59 file filters)
>> src/core/auth/qgsauthmanager.cpp:180 : (init) [0ms] Initializing QCA...
>>
>> Thread 5 "QDBusConnection" received signal SIG33, Real-time event 33.
>> [Switching to Thread 0x7fffdaffd700 (LWP 285949)]
>> 0x00007ffff1e4baff in __GI___poll (fds=0x7fffd000eaf0, nfds=5,
>> timeout=-1) at ../sysdeps/unix/sysv/linux/poll.c:29
>> 29 ../sysdeps/unix/sysv/linux/poll.c: No such file or directory.
>>
>>
>> there is a workaround? I need to debug some crashes
>>
>> regards
>> Luigi Pirelli
>>
>>
>> **************************************************************************************************
>> * LinkedIn: https://www.linkedin.com/in/luigipirelli
>> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
>> * GitHub: https://github.com/luipir
>> * Book: Mastering QGIS3 - 3rd Edition
>> <https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
>> * Hire a team: http://www.qcooperative.net
>>
>> **************************************************************************************************
>>
>>
>> On Thu, 12 Nov 2020 at 18:00, Sandro Mani <manisandro at gmail.com> wrote:
>>
>>> Hi Richard
>>>
>>> If you are using Qt5.15.{0,1} and are getting random SIGTRAPS, or the
>>> process segfaulting straight after starting through gdb, this might be
>>> [1].
>>>
>>> Sandro
>>>
>>> [1] https://bugreports.qt.io/browse/QTBUG-86319
>>>
>>> On 12.11.20 15:45, Richard Duivenvoorde wrote:
>>> > Still having troubles starting QGIS in debug in QtCreator in my setup
>>> today.
>>> >
>>> > See https://duif.net/qc.png
>>> >
>>> > So QGIS (in QtCreator) starts, and during startup it stops and shows
>>> me the dissassembler(?) view. Sometimes I can see something (like in this
>>> screendump: something with libnss ?) sometimes all is white/empty.
>>> >
>>> > Last this I in the log is: "Destroyed while process ("whoami"), which
>>> according to git is recently changed but... does not seem related to me:
>>> >
>>> https://github.com/qgis/QGIS/commit/7a38388a8762503b0bdba55065fffea2ff24137a
>>> >
>>> > Regards,
>>> >
>>> > Richard
>>> >
>>> >
>>> >
>>> > On 11/11/20 9:16 AM, Richard Duivenvoorde wrote:
>>> >> Hi,
>>> >>
>>> >> Currently in my Qt build I cannot debug QGIS in qtcreator because it
>>> hangs/stops when showing the splash.
>>> >> After some time the Application Output shows:
>>> >>
>>> >> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [60891ms]
>>> [thread:0x5555560d9d00] 2020-11-11T08:58:15 [1] HTTP fetch
>>> https://feed.qgis.org/?after=1605081272&lang=en failed with error
>>> Operation canceled
>>> >> ../../src/core/qgsmessagelog.cpp:29 : (logMessage) [0ms]
>>> [thread:0x5555560d9d00] 2020-11-11T08:58:15 Network[1] Network request
>>> https://feed.qgis.org/?after=1605081272&lang=en timed out
>>> >>
>>> >> I am connected, and https://feed.qgis.org/?after=1605081272&lang=en
>>> is available from my browser.
>>> >>
>>> >> Disabling: 'Show QGIS news feed on welcome page' and 'Check QGIS
>>> version at startup' fix this.
>>> >>
>>> >> Others have this issue currently?
>>> >>
>>> >> (I hit my head also with this sometimes when in mixed/http proxied
>>> environments
>>> >> I still think we should use 'opt in' for these 'QGIS phoning home
>>> stuff' instead of 'opt out')
>>> >>
>>> >> Regards,
>>> >>
>>> >> Richard Duivenvoorde
>>> >>
>>> >> _______________________________________________
>>> >> QGIS-Developer mailing list
>>> >> QGIS-Developer at lists.osgeo.org
>>> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> >>
>>> > _______________________________________________
>>> > QGIS-Developer mailing list
>>> > QGIS-Developer at lists.osgeo.org
>>> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201123/d299e6a9/attachment.html>

From sydv at sjgeophysics.com  Mon Nov 23 12:10:44 2020
From: sydv at sjgeophysics.com (Syd Visser)
Date: Mon, 23 Nov 2020 12:10:44 -0800
Subject: [QGIS-Developer] Vote for Lat Lon Tools Default Coordinate
 Order - YX or XY
In-Reply-To: <CABPxTTpChAv2jLO2GTbtu5LbS8exBc1+OSjXpR=nBm82dt=w_A@mail.gmail.com>
References: <CABPxTTrC9jouXWpRcWO11L8vvkO1CCpw3CUVt=9Q-aTKTxY8wg@mail.gmail.com>
 <aa0bf30e-b49a-8b2d-203f-1a8952a1f4cd@duif.net>
 <CABPxTTpChAv2jLO2GTbtu5LbS8exBc1+OSjXpR=nBm82dt=w_A@mail.gmail.com>
Message-ID: <03d39f1d-b062-9e15-8785-8989db56289d@sjgeophysics.com>

In the 1970 to early 1980 when I started working with computers almost 
everything was N E and Lon Lat. Z was also positive down and azimuth 
positive from North to East (good old right hand rule) since most of the 
work was for drilling or mine workings this worked fine.

If you look back at grass3 or 4 it was mostly N E. But somewhere in the 
1990 almost everything changed to E N and Lat Lon and Z up and by grass6 
I think everything was converted. I am not sure why this happened or 
what the reasoning was maybe because some GIS people started realizing 
the earth was not flat. All of this was fine except that the Azimuth did 
not change so the real problem now is that the azimuth is still positive 
from North to East. So personally to get things right instead of left I 
think the Azimuth should now change to being positive from East to North 
or at least North to West. Good luck with that.

Syd

*Syd (Sipke) Visser, P.Geo.*
President, Snr. Geophysicist/Geologist

Tel: 1 (604) 582-1100
Cell: 1 (604) 813-1440
sydv at sjgeophysics.com
www.sjgeophysics.com <http://www.sjgeophysics.com>


<http://www.sjgeophysics.com>

On 2020-11-21 10:45 a.m., C Hamilton wrote:
> I appreciate everyone's ideas and opinions. I think that for now I 
> will leave Lat Lon Tools as it currently operates, but I will look 
> over the suggestions to see if I can make sure the options are as 
> clear as possible.
>
> Thanks once again for your input.
>
> Calvin
>
>
> On Sat, Nov 21, 2020 at 3:52 AM Richard Duivenvoorde 
> <rdmailings at duif.net <mailto:rdmailings at duif.net>> wrote:
>
>     On 11/20/20 6:10 PM, C Hamilton wrote:
>     > It was suggested to me that the default coordinate order in the
>     Lat Lon Tools plugin for coordinate capture and zoom-to tools
>     should be "longitude, latitude" or "X, Y". Originally, Lat Lon
>     Tools was designed to work with on-line maps which are generally
>     "latitude, longitude" order.
>     >
>     > You can always go into the plugin settings and specify which
>     order you want and that order will be preserved everytime you
>     launch QGIS. The default order is only applicable the first time
>     you install "Lat Lon Tools" or if you do a reset to defaults in
>     the Lat Lon Tools settings menu,
>     >
>     > Who prefers Lat Lon Tools to default to "longitude, latitude" or
>     "X, Y" when the plugin is first installed or reset to default values?
>     >
>     > Who prefers Lat Lon Tools to default to "latitude, longitude
>     (Google map order)" or "Y, X" when the plugin is first installed
>     or reset to default values?
>
>     I'm a little late on the table :-) As descision already cast:
>     https://github.com/NationalSecurityAgency/qgis-latlontools-plugin/issues/53#issuecomment-731070055
>     and fine with it, just want to add:
>
>     I'm not a geo-guy by original trade and working with
>     scientists/911 peeps at the moment, who favour the math-way of
>     exchanching coordinates (2 dimensional values): X,Y.
>
>     If I were 'boss geo', I'd never use lonlat or latlon terms, only
>     use (decimal!) degrees or x,y :-)
>     (people tend to mix lat lon up all the time, they never do with x,y).
>
>     In my use-case, the Lat Lon Tools plugin is used in a very
>     pluriform, international environment where coordinates from all
>     kind of crs's are to be mixed/converted (often one pair at a
>     time...). Why would you use YX in one crs and XY in other crs's?
>     It's just not very efficient to have that choice. Just like
>     meters/feet, point/comma delimeters in numbers etc etc. This
>     screams for conversion issues ...
>
>     Ah, and while on it, let's all speak Esparanto (and keep the
>     number of QGIS translation builds low) ;-)
>
>     Korajn salutojn,
>
>     Richard Duivenvoorde
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201123/169fbe81/attachment.html>

From rdmailings at duif.net  Tue Nov 24 04:00:20 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 24 Nov 2020 13:00:20 +0100
Subject: [QGIS-Developer] Processing: No spatial index exists for input
 layer, performance will be severely degraded
In-Reply-To: <CAB2Z92Bjtq9nKKQXFFw=WxKPx_tyHu1U-_AOt7SGhmizqJxKEg@mail.gmail.com>
References: <CAB2Z92Bjtq9nKKQXFFw=WxKPx_tyHu1U-_AOt7SGhmizqJxKEg@mail.gmail.com>
Message-ID: <e20260fb-34c1-c5f2-0f86-e6ca80479e0a@duif.net>

On 11/23/20 3:23 PM, Andreas Neumann wrote:
> Hi,
> 
> When running QGIS processing models, I frequently get the red warning messages:
> 
> No spatial index exists for input layer, performance will be severely degraded
> 
> These are temporary (intermediate) geopackage files that QGIS generates during the running of the model. Is there an option that QGIS could automatically generate these spatial indexes for intermediate files?

Hi Andreas,

That sounds very reasonable...
But (I'm not an experienced Processing user), I'm trying to replicate, but with my small experiments all intermediary layers become Memory layers.
Do I need to tell processing to use actual intermediate gpkg/files?

Regards,

Richard Duivenvoorde

From Mike.Elstermann at itc-halle.de  Wed Nov 25 04:39:44 2020
From: Mike.Elstermann at itc-halle.de (Elstermann, Mike)
Date: Wed, 25 Nov 2020 12:39:44 +0000
Subject: [QGIS-Developer] QGIS at Apple Macbook Pro ARM M1?
Message-ID: <0EC36D65-710D-41CB-93A0-B2DD4FE60EBB@itc-halle.de>

Hello everyone,

is there any information on whether QGIS 3.16 or higher (preferably including PostgreSQL/PostGIS) will run on the new Apple Mac platform ARM M1 and when you expect it to run?

THX, mikeE., the #geoObserver

From pedrongvenancio at gmail.com  Wed Nov 25 07:21:27 2020
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Wed, 25 Nov 2020 15:21:27 +0000
Subject: [QGIS-Developer] Zonal Statistics as batch process on QGIS 3.16
Message-ID: <CAMCJChutUXX645zkBH2wbubmGn-xiaHFFUtQ5XYwdPSrP4anBQ@mail.gmail.com>

Hi all,

I'm seeing that Zonal Statistics had changed the way how it works between
QGIS 3.10 and 3.16, but I can't find any documentation about it.

Zonal Statistics on QGIS 3.10 saved the metrics calculated in new fields of
the vector layer containing zones. So, running the algorithm as batch
process, I was able to calculate some statistics for hundreds of raster
layers, all in the same vector layer containing zones.

Now on QGIS 3.16, the default is to Zonal Statistics generate a new vector
layer. Of course it's possible to create hundreds of vector layers and just
consider the last one, but this seems a drawback in the way how Zonal
Statistics used to work.

I thought "Append to Layer" option could be the workaround, but I can't
understand well this option:
https://qgis.org/en/site/forusers/visualchangelog314/index.html#feature-allow-appending-processing-results-to-existing-layers

Anyone know a way to overcome this?

Thank you very much.

Best regards,
Pedro Ven?ncio
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201125/9051c801/attachment.html>

From tim at kartoza.com  Wed Nov 25 08:35:29 2020
From: tim at kartoza.com (Tim Sutton)
Date: Wed, 25 Nov 2020 16:35:29 +0000
Subject: [QGIS-Developer] QGIS at Apple Macbook Pro ARM M1?
In-Reply-To: <0EC36D65-710D-41CB-93A0-B2DD4FE60EBB@itc-halle.de>
References: <0EC36D65-710D-41CB-93A0-B2DD4FE60EBB@itc-halle.de>
Message-ID: <CAES-DZQ2TUVDH9AOdMnvHLJUukeC8vMGv1PLjT+ru=wJPmpyUQ@mail.gmail.com>

I think a starting point for that would be Peter Petrik

a) being funded to work on the port
b) having the hardware needed to do it (would be great if someone could
sponsor a device for him)

Above assuming Peter is willing and available.

Do you already have an M1 device Mike? Have you tested if PG and QGIS run
under Rosetta2?

Regards

Tim

On Wed, Nov 25, 2020 at 12:39 PM Elstermann, Mike <
Mike.Elstermann at itc-halle.de> wrote:

> Hello everyone,
>
> is there any information on whether QGIS 3.16 or higher (preferably
> including PostgreSQL/PostGIS) will run on the new Apple Mac platform ARM M1
> and when you expect it to run?
>
> THX, mikeE., the #geoObserver
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
------------------------------------------------------------------------------------------
?

Tim Sutton
Visit http://kartoza.com to find out about open source:
 * Desktop GIS programming services
 * Geospatial web development
* GIS Training
* Consulting Services
Tim is a member of the QGIS Project Steering Committee
-------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201125/d1b7b99c/attachment.html>

From Patrick.Palmier at cerema.fr  Wed Nov 25 09:47:44 2020
From: Patrick.Palmier at cerema.fr (=?ISO-8859-15?Q?PALMIER_Patrick_=28Responsable_de_groupe=29_=2D_CEREMA?= =?ISO-8859-15?Q?=2FDTerNP=2FDATHa=2FMT?=)
Date: Wed, 25 Nov 2020 18:47:44 +0100
Subject: [QGIS-Developer] Pyqgis layer export in GeoJson with option
 RFC7946=True
Message-ID: <b9da5d78-dd3a-f3e1-0c05-05dc4446fb24@cerema.fr>

Hello,

I'm using Qgis 3.14.16 with WIndows 10

I'm trying in a python script to export a layer in geojSon with the 
option RFC7946=True
It works well with the gui, but I don't know how to write it in a python 
script
Is there someone who could send me a sample of code which do this


Thanks


Patrick


From Mike.Elstermann at itc-halle.de  Wed Nov 25 10:59:47 2020
From: Mike.Elstermann at itc-halle.de (Elstermann, Mike)
Date: Wed, 25 Nov 2020 18:59:47 +0000
Subject: [QGIS-Developer] QGIS at Apple Macbook Pro ARM M1?
In-Reply-To: <CAES-DZQ2TUVDH9AOdMnvHLJUukeC8vMGv1PLjT+ru=wJPmpyUQ@mail.gmail.com>
References: <0EC36D65-710D-41CB-93A0-B2DD4FE60EBB@itc-halle.de>
 <CAES-DZQ2TUVDH9AOdMnvHLJUukeC8vMGv1PLjT+ru=wJPmpyUQ@mail.gmail.com>
Message-ID: <44EE380A-D340-4F72-8ED3-6151FEE10CC0@itc-halle.de>

Thanks Tim!

>Do you already have an M1 device Mike? Have
>you tested if PG and QGIS run under Rosetta2?

No, I don't have an M1 Macbook yet, but I'm planning to get one soon and it would be good to know if QGIS/PG is running on it.

Best regards, mikeE., the #geoObserver.

> Am 25.11.2020 um 17:35 schrieb Tim Sutton <tim at kartoza.com>:
> 
> I think a starting point for that would be Peter Petrik 
> 
> a) being funded to work on the port
> b) having the hardware needed to do it (would be great if someone could sponsor a device for him)
> 
> Above assuming Peter is willing and available.
> 
> Do you already have an M1 device Mike? Have you tested if PG and QGIS run under Rosetta2?
> 
> Regards
> 
> Tim


From luipir at gmail.com  Thu Nov 26 06:55:46 2020
From: luipir at gmail.com (Luigi Pirelli)
Date: Thu, 26 Nov 2020 15:55:46 +0100
Subject: [QGIS-Developer] Processing: No spatial index exists for input
 layer, performance will be severely degraded
In-Reply-To: <CAB2Z92Bjtq9nKKQXFFw=WxKPx_tyHu1U-_AOt7SGhmizqJxKEg@mail.gmail.com>
References: <CAB2Z92Bjtq9nKKQXFFw=WxKPx_tyHu1U-_AOt7SGhmizqJxKEg@mail.gmail.com>
Message-ID: <CAFO80_p85jx7t7V5w1bpP_7Ffx=GTD0ZAw5tNm=tg88RzCo-Eg@mail.gmail.com>

I've this message constantly... but usually when an intermediate layer is
used in some geoprocess. So, you can just add a "create spatial index" step
before the next geoprocess. Doing it automatically can be time spending. Do
you really need it everytime?

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Mon, 23 Nov 2020 at 15:23, Andreas Neumann <andreas at qgis.org> wrote:

> Hi,
>
> When running QGIS processing models, I frequently get the red warning
> messages:
>
> No spatial index exists for input layer, performance will be severely
> degraded
>
>
> These are temporary (intermediate) geopackage files that QGIS generates
> during the running of the model. Is there an option that QGIS could
> automatically generate these spatial indexes for intermediate files?
>
>
> Thanks,
>
> Andreas
>
> --
> Andreas Neumann
> QGIS.ORG board member (treasurer)
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201126/fb444483/attachment.html>

From Jacky.VOLPES-EXT at canal-de-provence.com  Thu Nov 26 07:06:58 2020
From: Jacky.VOLPES-EXT at canal-de-provence.com (VOLPES-EXT, Jacky)
Date: Thu, 26 Nov 2020 15:06:58 +0000
Subject: [QGIS-Developer] Modify project before loading
Message-ID: <064a3f59395e49a993f15fd54042c39a@SCPEX2K13-2.scp.fr>

Hello QGIS dev team :)

I need to modify QGIS project file at reading (loading) time.
The database hostname used in the company is changing soon, and I need this to be transparent for the users.

The problem is that all their layers with the old database connections (uri) will trigger a connection error, having the old hostname.
The idea is to update the .qgs file that is being opened with the new hostname with a text-replacement plugin, save the file, and eventually load it in QGIS.
So that the user will not see any difference or error message.

Sadly, the QgsProject.readLayer signal is sent after the project has been loaded, hence after the connection error messages...

Any suggestion/idea welcome!
Thanks,

Jacky Volpes
D?veloppeur python
HR-Team pour la Soci?t? du Canal de Provence
Direction des Syst?mes d'Information

T?l. 04 42 66 70 34
Le Tholonet - CS 70064 - 13182 Aix-en-Provence CEDEX 5
[cid:image001.png at 01D34C22.F8A861A0]

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201126/5225cc9b/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 4649 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201126/5225cc9b/attachment.jpg>

From a.neumann at carto.net  Thu Nov 26 07:20:20 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 26 Nov 2020 16:20:20 +0100
Subject: [QGIS-Developer] Modify project before loading
In-Reply-To: <064a3f59395e49a993f15fd54042c39a@SCPEX2K13-2.scp.fr>
References: <064a3f59395e49a993f15fd54042c39a@SCPEX2K13-2.scp.fr>
Message-ID: <7a951b5db69e7aaa6d1a79cd5eec0e85@carto.net>

Hi Jacky, 

I recommend to use PostgreSQL service names instead of hostname/port/db
settings. The projects would connect the layers to a central
pg_service.conf file that you can put on a network drive. On the day the
db hostname changes, you can centrally switch the hostname/port/db in
just a single text-file. 

This also helps to switch between test/integration/production
environments by simply pointing to a different pg_service.conf file (see
Options --> System --> Environment and user defined variables. You can
use either PGSERVICEFILE or PGSYSCONFDIR). 

Seems to me easier and more flexible than what you have in mind with
scripting and signals. 

Greetings, 

Andreas 

On 2020-11-26 16:06, VOLPES-EXT, Jacky wrote:

> Hello QGIS dev team J 
> 
> I need to modify QGIS project file at reading (loading) time. 
> 
> The database hostname used in the company is changing soon, and I need this to be transparent for the users. 
> 
> The problem is that all their layers with the old database connections (uri) will trigger a connection error, having the old hostname. 
> 
> The idea is to update the .qgs file that is being opened with the new hostname with a text-replacement plugin, save the file, and eventually load it in QGIS. 
> 
> So that the user will not see any difference or error message. 
> 
> Sadly, the QgsProject.readLayer signal is sent after the project has been loaded, hence after the connection error messages? 
> 
> Any suggestion/idea welcome! 
> 
> Thanks, 
> 
> Jacky Volpes 
> D?veloppeur python 
> 
> HR-Team pour la Soci?t? du Canal de Provence
> Direction des Syst?mes d'Information
> 
> T?l. 04 42 66 70 34
> Le Tholonet - CS 70064 - 13182 Aix-en-Provence CEDEX 5
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201126/0bfb2003/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 4649 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201126/0bfb2003/attachment-0001.jpg>

From ujaval at spatialthoughts.com  Thu Nov 26 07:24:29 2020
From: ujaval at spatialthoughts.com (Ujaval Gandhi)
Date: Thu, 26 Nov 2020 20:54:29 +0530
Subject: [QGIS-Developer] Processing: No spatial index exists for input
 layer, performance will be severely degraded
In-Reply-To: <CAFO80_p85jx7t7V5w1bpP_7Ffx=GTD0ZAw5tNm=tg88RzCo-Eg@mail.gmail.com>
References: <CAB2Z92Bjtq9nKKQXFFw=WxKPx_tyHu1U-_AOt7SGhmizqJxKEg@mail.gmail.com>
 <CAFO80_p85jx7t7V5w1bpP_7Ffx=GTD0ZAw5tNm=tg88RzCo-Eg@mail.gmail.com>
Message-ID: <CALymcQD9tyznEOXevbTU4hmDyqnrCyub86tG4mj0eZv=u6WLfQ@mail.gmail.com>

+1 to have an option to generate spatial index automatically for
intermediate layers. As I understand, creating index for database layers
automatically may not be preferable, but it's reasonable to want this for
intermediate memory layers. Since processing can already identify which
operations might benefit from the index, it would be much better user
experience to take care of it internally.
[image: Logo] <https://spatialthoughts.com/>
Ujaval Gandhi
Spatial Thoughts
mobile: +91-8095684687
email: ujaval at spatialthoughts.com
[image: LinkedIn icon] <https://www.linkedin.com/in/spatialthoughts/>  [image:
Twitter icon] <https://twitter.com/spatialthoughts>



On Thu, Nov 26, 2020 at 8:26 PM Luigi Pirelli <luipir at gmail.com> wrote:

> I've this message constantly... but usually when an intermediate layer is
> used in some geoprocess. So, you can just add a "create spatial index" step
> before the next geoprocess. Doing it automatically can be time spending. Do
> you really need it everytime?
>
> Luigi Pirelli
>
>
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Book: Mastering QGIS3 - 3rd Edition
> <https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
> * Hire a team: http://www.qcooperative.net
>
> **************************************************************************************************
>
>
> On Mon, 23 Nov 2020 at 15:23, Andreas Neumann <andreas at qgis.org> wrote:
>
>> Hi,
>>
>> When running QGIS processing models, I frequently get the red warning
>> messages:
>>
>> No spatial index exists for input layer, performance will be severely
>> degraded
>>
>>
>> These are temporary (intermediate) geopackage files that QGIS generates
>> during the running of the model. Is there an option that QGIS could
>> automatically generate these spatial indexes for intermediate files?
>>
>>
>> Thanks,
>>
>> Andreas
>>
>> --
>> Andreas Neumann
>> QGIS.ORG board member (treasurer)
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201126/91ba3912/attachment.html>

From a.neumann at carto.net  Thu Nov 26 07:51:58 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 26 Nov 2020 16:51:58 +0100
Subject: [QGIS-Developer] Processing: No spatial index exists for input
 layer, performance will be severely degraded
In-Reply-To: <CALymcQD9tyznEOXevbTU4hmDyqnrCyub86tG4mj0eZv=u6WLfQ@mail.gmail.com>
References: <CAB2Z92Bjtq9nKKQXFFw=WxKPx_tyHu1U-_AOt7SGhmizqJxKEg@mail.gmail.com>
 <CAFO80_p85jx7t7V5w1bpP_7Ffx=GTD0ZAw5tNm=tg88RzCo-Eg@mail.gmail.com>
 <CALymcQD9tyznEOXevbTU4hmDyqnrCyub86tG4mj0eZv=u6WLfQ@mail.gmail.com>
Message-ID: <94df6d6052b866f6a60967160eab2bd7@carto.net>

Hi all, 

Thanks for your replies/opinions. 

@Richard: this message also comes up for intermediate memory layers, not
only for Geopackage layers. 

@Luigi: if I manually add "create spatial index" often, this very much
"pollutes" the model.  

I agree with Ujaval, that it would be a better user experience if QGIS
would do the indexing automatically (on intermediate layers) for
operations where the input doesn't have an index and the algorithm would
potentially benefit from an index. 

Next to automatic indexing I would think that "auto-repairs" for errors
that processing algorithms introduce would be good to have, e.g. remove
double vertices, remove empty geometries, empty holes/rings,
self-intersections. etc.. If this is potentially dangerous, we can do
opt-in with central threshold values, and only if the analysis is 2d
only. I understand that for 3D analysis automatic cleaning is not always
possible. 

Or maybe a switch to GEOS 3.9 with the "fixed precision model" enabled
would remove all these errors previously introduced by processing? 

Greetings, 

Andreas 

On 2020-11-26 16:24, Ujaval Gandhi wrote:

> +1 to have an option to generate spatial index automatically for intermediate layers. As I understand, creating index for database layers automatically may not be preferable, but it's reasonable to want this for intermediate memory layers. Since processing can already identify which operations might benefit from the index, it would be much better user experience to take care of it internally.
> 
> [1]
> 
> Ujaval Gandhi
> 
> Spatial Thoughts
> 
> mobile: +91-8095684687
> 
> email: ujaval at spatialthoughts.com
> 
> [2]   [3]  
> 
> On Thu, Nov 26, 2020 at 8:26 PM Luigi Pirelli <luipir at gmail.com> wrote: 
> I've this message constantly... but usually when an intermediate layer is used in some geoprocess. So, you can just add a "create spatial index" step before the next geoprocess. Doing it automatically can be time spending. Do you really need it everytime?
> 
> Luigi Pirelli
> 
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Book: Mastering QGIS3 - 3rd Edition [4] 
> * Hire a team: http://www.qcooperative.net
> ************************************************************************************************** 
> 
> On Mon, 23 Nov 2020 at 15:23, Andreas Neumann <andreas at qgis.org> wrote: 
> 
> Hi, 
> 
> When running QGIS processing models, I frequently get the red warning messages: 
> 
> No spatial index exists for input layer, performance will be severely degraded 
> 
> These are temporary (intermediate) geopackage files that QGIS generates during the running of the model. Is there an option that QGIS could automatically generate these spatial indexes for intermediate files? 
> 
> Thanks, 
> 
> Andreas 
> 
> --
> Andreas Neumann QGIS.ORG [5] board member (treasurer) _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

 

Links:
------
[1] https://spatialthoughts.com/
[2] https://www.linkedin.com/in/spatialthoughts/
[3] https://twitter.com/spatialthoughts
[4]
https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition
[5] http://QGIS.ORG
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201126/90d2fae4/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: blocked.gif
Type: image/gif
Size: 118 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201126/90d2fae4/attachment-0001.gif>

From nyall.dawson at gmail.com  Thu Nov 26 22:52:00 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 27 Nov 2020 16:52:00 +1000
Subject: [QGIS-Developer] Processing: No spatial index exists for input
 layer, performance will be severely degraded
In-Reply-To: <94df6d6052b866f6a60967160eab2bd7@carto.net>
References: <CAB2Z92Bjtq9nKKQXFFw=WxKPx_tyHu1U-_AOt7SGhmizqJxKEg@mail.gmail.com>
 <CAFO80_p85jx7t7V5w1bpP_7Ffx=GTD0ZAw5tNm=tg88RzCo-Eg@mail.gmail.com>
 <CALymcQD9tyznEOXevbTU4hmDyqnrCyub86tG4mj0eZv=u6WLfQ@mail.gmail.com>
 <94df6d6052b866f6a60967160eab2bd7@carto.net>
Message-ID: <CAB28AsjJqOyzYNNJieuG3LWBuZAcZFL8MhK=xWf+kqm=+5mJ9Q@mail.gmail.com>

On Fri, 27 Nov 2020 at 01:52, Andreas Neumann <a.neumann at carto.net> wrote:
>
> Hi all,
>
> Thanks for your replies/opinions.
>
> @Richard: this message also comes up for intermediate memory layers, not only for Geopackage layers.
>
> @Luigi: if I manually add "create spatial index" often, this very much "pollutes" the model.
>
> I agree with Ujaval, that it would be a better user experience if QGIS would do the indexing automatically (on intermediate layers) for operations where the input doesn't have an index and the algorithm would potentially benefit from an index.

This is a fair enough request -- we could keep the index generation as
a "lazy" thing which is only done when a step in the model indicates
that it's about to benefit from it. I can't see any technical
blockers/disadvantages to this.

>
> Next to automatic indexing I would think that "auto-repairs" for errors that processing algorithms introduce would be good to have, e.g. remove double vertices, remove empty geometries, empty holes/rings, self-intersections. etc.. If this is potentially dangerous, we can do opt-in with central threshold values, and only if the analysis is 2d only. I understand that for 3D analysis automatic cleaning is not always possible.

There's some discussion on this here:
https://github.com/qgis/QGIS/pull/39891#issuecomment-734676128

Nyall

>
> Or maybe a switch to GEOS 3.9 with the "fixed precision model" enabled would remove all these errors previously introduced by processing?
>
> Greetings,
>
> Andreas
>
> On 2020-11-26 16:24, Ujaval Gandhi wrote:
>
> +1 to have an option to generate spatial index automatically for intermediate layers. As I understand, creating index for database layers automatically may not be preferable, but it's reasonable to want this for intermediate memory layers. Since processing can already identify which operations might benefit from the index, it would be much better user experience to take care of it internally.
>
> Ujaval Gandhi
> Spatial Thoughts
> mobile: +91-8095684687
> email: ujaval at spatialthoughts.com
>
>
>
> On Thu, Nov 26, 2020 at 8:26 PM Luigi Pirelli <luipir at gmail.com> wrote:
>
> I've this message constantly... but usually when an intermediate layer is used in some geoprocess. So, you can just add a "create spatial index" step before the next geoprocess. Doing it automatically can be time spending. Do you really need it everytime?
>
> Luigi Pirelli
>
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Book: Mastering QGIS3 - 3rd Edition
> * Hire a team: http://www.qcooperative.net
> **************************************************************************************************
>
> On Mon, 23 Nov 2020 at 15:23, Andreas Neumann <andreas at qgis.org> wrote:
>
> Hi,
>
> When running QGIS processing models, I frequently get the red warning messages:
>
>
> No spatial index exists for input layer, performance will be severely degraded
>
>
>
> These are temporary (intermediate) geopackage files that QGIS generates during the running of the model. Is there an option that QGIS could automatically generate these spatial indexes for intermediate files?
>
>
>
> Thanks,
>
> Andreas
>
>
> --
> Andreas Neumann
> QGIS.ORG board member (treasurer)
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From a.neumann at carto.net  Fri Nov 27 00:02:10 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri, 27 Nov 2020 09:02:10 +0100
Subject: [QGIS-Developer] Processing: No spatial index exists for input
 layer, performance will be severely degraded
In-Reply-To: <CAB28AsjJqOyzYNNJieuG3LWBuZAcZFL8MhK=xWf+kqm=+5mJ9Q@mail.gmail.com>
References: <CAB2Z92Bjtq9nKKQXFFw=WxKPx_tyHu1U-_AOt7SGhmizqJxKEg@mail.gmail.com>
 <CAFO80_p85jx7t7V5w1bpP_7Ffx=GTD0ZAw5tNm=tg88RzCo-Eg@mail.gmail.com>
 <CALymcQD9tyznEOXevbTU4hmDyqnrCyub86tG4mj0eZv=u6WLfQ@mail.gmail.com>
 <94df6d6052b866f6a60967160eab2bd7@carto.net>
 <CAB28AsjJqOyzYNNJieuG3LWBuZAcZFL8MhK=xWf+kqm=+5mJ9Q@mail.gmail.com>
Message-ID: <dd56c427732c71093dabbc4589129fbf@carto.net>

>> @Luigi: if I manually add "create spatial index" often, this very much "pollutes" the model.
>> 
>> I agree with Ujaval, that it would be a better user experience if QGIS would do the indexing automatically (on intermediate layers) for operations where the input doesn't have an index and the algorithm would potentially benefit from an index.
> 
> This is a fair enough request -- we could keep the index generation as
> a "lazy" thing which is only done when a step in the model indicates
> that it's about to benefit from it. I can't see any technical
> blockers/disadvantages to this.

Ok - great. If this requires funding - we will suggest / vote for
several grant proposals from the QGIS-CH user group early next year. I
would like to invest in "data quality" tools/improvements - also, but
not limited, to Processing. 

>> Next to automatic indexing I would think that "auto-repairs" for errors that processing algorithms introduce would be good to have, e.g. remove double vertices, remove empty geometries, empty holes/rings, self-intersections. etc.. If this is potentially dangerous, we can do opt-in with central threshold values, and only if the analysis is 2d only. I understand that for 3D analysis automatic cleaning is not always possible.
> 
> There's some discussion on this here:
> https://github.com/qgis/QGIS/pull/39891#issuecomment-734676128

Ok - great - thanks for being involved here! 

>> Or maybe a switch to GEOS 3.9 with the "fixed precision model" enabled would remove all these errors previously introduced by processing?

I'll open a separate thread for this discussion. 

Andreas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201127/8edf4dae/attachment.html>

From a.neumann at carto.net  Fri Nov 27 00:16:51 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri, 27 Nov 2020 09:16:51 +0100
Subject: [QGIS-Developer] GEOS 3.9 and fixed precision model
Message-ID: <0721269d1c7b0dbd7d048c874d4492dd@carto.net>

Hi, 

GEOS 3.9 will have some significant improvements for us. 

I'm citing from an e-mail thread from strk: 

"GEOS-3.9 will have the new overlay engine enabled by default, so
nothing to do there. Martin (Davis) believes there will be no more
TopologyExceptions with the new code but I think in order to be 100%
sure a fixed precision model should be used, which is possible to do
with the newly exposed functions taking a grid size. In case QGIS uses
some kind of precision model, it would be good to use those." 

----------- 

Recent QGIS versions also have a "precision / grid" setting per layer in
the layer properties dialog (Geometry and Topology restrictions). There
you could set the geometry precision, let's say to mm. 

I'd like to discuss with you devs how the QGIS and GEOS precision
settings can be "integrated" in the future - and used more extensively
throughout QGIS. E.g. a processing algorithm or model could
automatically read these values and pass them on to GEOS for running the
geometry operations. Also, when using the interactive editing tools
(e.g. splitting and merging, basically anything that involves GEOS),
this precision setting should be honored. 

I'd like to get an idea if this is useful/feasible and how much effort
would be necessary (approximately) - will this require funding? 

-------------- 

Also - it would be good to discuss when the switch to GEOS 3.9
will/should be made, esp. for OSGEO4W. 

Thanks for joining this discussion, 

Andreas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201127/15f55295/attachment.html>

From a.neumann at carto.net  Fri Nov 27 00:42:57 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri, 27 Nov 2020 09:42:57 +0100
Subject: [QGIS-Developer] GEOS 3.9 and fixed precision model
In-Reply-To: <0721269d1c7b0dbd7d048c874d4492dd@carto.net>
References: <0721269d1c7b0dbd7d048c874d4492dd@carto.net>
Message-ID: <34cee9d6bcf976683cd54b5797d0aa6c@carto.net>

Here some additional info:
http://lin-ear-th-inking.blogspot.com/2020/06/jts-overlayng-noding-strategies.html


Maybe it would be good to open a QEP for this? Since I am not so
familiar with QGIS inner architecture, it would be best if someone who
knows it better, would start such a QEP. 

I will suggest the Swiss QGIS user group to invest next year in data
quality improvements - so any outcome/follow-up work of such a
discussion could potentially be funded. 

Andreas 

On 2020-11-27 09:16, Andreas Neumann wrote:

> Hi, 
> 
> GEOS 3.9 will have some significant improvements for us. 
> 
> I'm citing from an e-mail thread from strk: 
> 
> "GEOS-3.9 will have the new overlay engine enabled by default, so nothing to do there. Martin (Davis) believes there will be no more TopologyExceptions with the new code but I think in order to be 100% sure a fixed precision model should be used, which is possible to do with the newly exposed functions taking a grid size. In case QGIS uses some kind of precision model, it would be good to use those." 
> 
> ----------- 
> 
> Recent QGIS versions also have a "precision / grid" setting per layer in the layer properties dialog (Geometry and Topology restrictions). There you could set the geometry precision, let's say to mm. 
> 
> I'd like to discuss with you devs how the QGIS and GEOS precision settings can be "integrated" in the future - and used more extensively throughout QGIS. E.g. a processing algorithm or model could automatically read these values and pass them on to GEOS for running the geometry operations. Also, when using the interactive editing tools (e.g. splitting and merging, basically anything that involves GEOS), this precision setting should be honored. 
> 
> I'd like to get an idea if this is useful/feasible and how much effort would be necessary (approximately) - will this require funding? 
> 
> -------------- 
> 
> Also - it would be good to discuss when the switch to GEOS 3.9 will/should be made, esp. for OSGEO4W. 
> 
> Thanks for joining this discussion, 
> 
> Andreas 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201127/4733b3f4/attachment-0001.html>

From paul.wittle at dorsetcouncil.gov.uk  Fri Nov 27 01:48:32 2020
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Fri, 27 Nov 2020 09:48:32 +0000
Subject: [QGIS-Developer] Loading WFS layers from GeoServer
Message-ID: <CWXP265MB1623B8AA2F3BE8C52C3A7483C8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>

Hi,

I'm trying to load some WFS layers from my internal GeoServer into QGIS 3.10 and 3.16. The datastore in GeoServer is based on a view in a SQL Server database but it does have a primary key on the spatial table at least.

When I load it in 3.10 it comes in as the image icon (i.e. doesn't load) so I thought I'd try it in the latest version and in that version QGIS just disappears (completely crashes).

Has anyone else had a similar problem and can help me work out how to get the layers to load? I suspect the issue is the way the view is configured in SQL Server however I also wonder if I need to investigate the 3.16 crash and potentially log that as a bug as it is not handling the crash with the normal message the application just closes without warning?

Thanks,
Paul


This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/416433
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201127/e7c51007/attachment.html>

From ijturton at gmail.com  Fri Nov 27 01:58:48 2020
From: ijturton at gmail.com (Ian Turton)
Date: Fri, 27 Nov 2020 09:58:48 +0000
Subject: [QGIS-Developer] Loading WFS layers from GeoServer
In-Reply-To: <CWXP265MB1623B8AA2F3BE8C52C3A7483C8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
References: <CWXP265MB1623B8AA2F3BE8C52C3A7483C8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <CA+=cGJkHnKgNjKu8=XkXuZ+afkN-i8JWd6zqNvmA37Y8FL=bbQ@mail.gmail.com>

On Fri, 27 Nov 2020 at 09:48, Paul Wittle <paul.wittle at dorsetcouncil.gov.uk>
wrote:

> Hi,
>
>
>
> I?m trying to load some WFS layers from my internal GeoServer into QGIS
> 3.10 and 3.16. The datastore in GeoServer is based on a view in a SQL
> Server database but it does have a primary key on the spatial table at
> least.
>
>
>
> When I load it in 3.10 it comes in as the image icon (i.e. doesn?t load)
> so I thought I?d try it in the latest version and in that version QGIS just
> disappears (completely crashes).
>
>
>
> Has anyone else had a similar problem and can help me work out how to get
> the layers to load? I suspect the issue is the way the view is configured
> in SQL Server however I also wonder if I need to investigate the 3.16 crash
> and potentially log that as a bug as it is not handling the crash with the
> normal message the application just closes without warning?
>
>
>

Can you check if GeoServer is returning GML or an error message when you
make a WFS request? But I don't think that QGis should crash no matter what
is in the response.

Ian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201127/14a95bcf/attachment.html>

From paul.wittle at dorsetcouncil.gov.uk  Fri Nov 27 06:48:44 2020
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Fri, 27 Nov 2020 14:48:44 +0000
Subject: [QGIS-Developer] Loading WFS layers from GeoServer
In-Reply-To: <CA+=cGJkHnKgNjKu8=XkXuZ+afkN-i8JWd6zqNvmA37Y8FL=bbQ@mail.gmail.com>
References: <CWXP265MB1623B8AA2F3BE8C52C3A7483C8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <CA+=cGJkHnKgNjKu8=XkXuZ+afkN-i8JWd6zqNvmA37Y8FL=bbQ@mail.gmail.com>
Message-ID: <CWXP265MB16238641D792E0DEA605105FC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>

Hi,

So the WFS layers do now return correctly from GeoServer in both WMS and all WFS formats and I?ve improved various indexes.

I also found a plugin called WFS 2.0 Client and tried that; it returned the features successfully.

Unfortunately that seems to be a one off download method rather than adding a live linked layer so it didn?t fix the issue but did prove that the GeoServer can return features.

I?m still having the same trouble when trying to add the layers to QGIS 3.10 though; it just adds a layer with the image icon but of course it can?t draw the layer and it loads as a bad layer if you save it in the project.

Does anyone have any suggestions of what might be the issue?

The server does require authentication.

Thanks,
Paul


From: Ian Turton <ijturton at gmail.com>
Sent: 27 November 2020 09:59
To: Paul Wittle <P.Wittle at dorsetcc.gov.uk>
Cc: qgis-developer at lists.osgeo.org
Subject: Re: [QGIS-Developer] Loading WFS layers from GeoServer



On Fri, 27 Nov 2020 at 09:48, Paul Wittle <paul.wittle at dorsetcouncil.gov.uk<mailto:paul.wittle at dorsetcouncil.gov.uk>> wrote:
Hi,

I?m trying to load some WFS layers from my internal GeoServer into QGIS 3.10 and 3.16. The datastore in GeoServer is based on a view in a SQL Server database but it does have a primary key on the spatial table at least.

When I load it in 3.10 it comes in as the image icon (i.e. doesn?t load) so I thought I?d try it in the latest version and in that version QGIS just disappears (completely crashes).

Has anyone else had a similar problem and can help me work out how to get the layers to load? I suspect the issue is the way the view is configured in SQL Server however I also wonder if I need to investigate the 3.16 crash and potentially log that as a bug as it is not handling the crash with the normal message the application just closes without warning?


Can you check if GeoServer is returning GML or an error message when you make a WFS request? But I don't think that QGis should crash no matter what is in the response.

Ian

This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/416433
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201127/d9fbbdbe/attachment-0001.html>

From rdmailings at duif.net  Fri Nov 27 06:59:31 2020
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 27 Nov 2020 15:59:31 +0100
Subject: [QGIS-Developer] Loading WFS layers from GeoServer
In-Reply-To: <CWXP265MB16238641D792E0DEA605105FC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
References: <CWXP265MB1623B8AA2F3BE8C52C3A7483C8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <CA+=cGJkHnKgNjKu8=XkXuZ+afkN-i8JWd6zqNvmA37Y8FL=bbQ@mail.gmail.com>
 <CWXP265MB16238641D792E0DEA605105FC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <b1e1e019-25d8-bba4-bb6b-ab3971e74a89@duif.net>

Hi Paul,

QGIS 3.16 (well, since ... I don not know exactly) has s NetworkLogger/Debugger.
If you hit the F12 button, you will see all WFS-requests that QGIS is firing to the server.
You can 'replay' these in a browser, and see if it returns valid GML (as in: save it to disk and then try to open it as vector data).
Normally QGIS starts with a GetCapabilities request, then a DescribeLayer and then a GetFeature. You need that last one.
In the Network Debugging window you can also see if the server maybe returns an error code (as: not 200).

Does the Geoserver-layer preview work? As in can you see the layers there?

Normally WFS/WMS from Geoserver play pretty well together with QGIS.
Is there something special to the data? (curves, nonvalid geometries, ???)

Regards,

Richard Duivenvoorde



On 11/27/20 3:48 PM, Paul Wittle wrote:
> Hi,
> 
> ?
> 
> So the WFS layers do now return correctly from GeoServer in both WMS and all WFS formats and I?ve improved various indexes.
> 
> ?
> 
> I also found a plugin called WFS 2.0 Client and tried that; it returned the features successfully.
> 
> ?
> 
> Unfortunately that seems to be a one off download method rather than adding a live linked layer so it didn?t fix the issue but did prove that the GeoServer can return features.
> 
> ?
> 
> I?m still having the same trouble when trying to add the layers to QGIS 3.10 though; it just adds a layer with the image icon but of course it can?t draw the layer and it loads as a bad layer if you save it in the project.
> 
> ?
> 
> Does anyone have any suggestions of what might be the issue?
> 
> ?
> 
> The server does require authentication.
> 
> ?
> 
> Thanks,
> Paul
> 
> ?
> 
> ?
> 
> *From:*Ian Turton <ijturton at gmail.com>
> *Sent:* 27 November 2020 09:59
> *To:* Paul Wittle <P.Wittle at dorsetcc.gov.uk>
> *Cc:* qgis-developer at lists.osgeo.org
> *Subject:* Re: [QGIS-Developer] Loading WFS layers from GeoServer
> 
> ?
> 
> ?
> 
> ?
> 
> On Fri, 27 Nov 2020 at 09:48, Paul Wittle <paul.wittle at dorsetcouncil.gov.uk <mailto:paul.wittle at dorsetcouncil.gov.uk>> wrote:
> 
>     Hi,
> 
>     ?
> 
>     I?m trying to load some WFS layers from my internal GeoServer into QGIS 3.10 and 3.16. The datastore in GeoServer is based on a view in a SQL Server database but it does have a primary key on the spatial table at least.
> 
>     ?
> 
>     When I load it in 3.10 it comes in as the image icon (i.e. doesn?t load) so I thought I?d try it in the latest version and in that version QGIS just disappears (completely crashes).
> 
>     ?
> 
>     Has anyone else had a similar problem and can help me work out how to get the layers to load? I suspect the issue is the way the view is configured in SQL Server however I also wonder if I need to investigate the 3.16 crash and potentially log that as a bug as it is not handling the crash with the normal message the application just closes without warning?
> 
>     ?
> 
> ?
> 
> Can you check if GeoServer is returning GML or an error message when you make a WFS request? But I don't think that QGis should crash no matter what is in the response.
> 
> ?
> 
> Ian
> 
> ?
> 
> This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or
> otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/416433
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


From paul.wittle at dorsetcouncil.gov.uk  Fri Nov 27 07:13:58 2020
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Fri, 27 Nov 2020 15:13:58 +0000
Subject: [QGIS-Developer] Loading WFS layers from GeoServer
In-Reply-To: <b1e1e019-25d8-bba4-bb6b-ab3971e74a89@duif.net>
References: <CWXP265MB1623B8AA2F3BE8C52C3A7483C8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <CA+=cGJkHnKgNjKu8=XkXuZ+afkN-i8JWd6zqNvmA37Y8FL=bbQ@mail.gmail.com>
 <CWXP265MB16238641D792E0DEA605105FC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <b1e1e019-25d8-bba4-bb6b-ab3971e74a89@duif.net>
Message-ID: <CWXP265MB16236182CBF9BE7AB1FDA9DEC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>

Hi,

I was using the 32 bit version (don't ask) but I've just tried it in the 64bit version (although 3.10) with the network logger installed and the errors read:

java.lang.RuntimeException: Failed to get property: {http://www.opengis.net/wfs/2.0}boundedBy Failed to get property: {http://www.opengis.net/wfs/2.0}boundedBy java.io.IOExceptionCannot do natural order without a primary key, please add it or specify a manual sort over existing attributes

The datasource is GeoServer but GeoServer is connecting to a view in SQL Server where the first table in the view is a table with a primary key and spatial index.

However I don't really understand because requesting the data in the GeoServer layer preview works fine so I assume QGIS is asking something the layer preview does not?

Thanks,
Paul

-----Original Message-----
From: Richard Duivenvoorde <rdmailings at duif.net>
Sent: 27 November 2020 15:00
To: Paul Wittle <P.Wittle at dorsetcc.gov.uk>; qgis-developer at lists.osgeo.org
Subject: Re: [QGIS-Developer] Loading WFS layers from GeoServer

Hi Paul,

QGIS 3.16 (well, since ... I don not know exactly) has s NetworkLogger/Debugger.
If you hit the F12 button, you will see all WFS-requests that QGIS is firing to the server.
You can 'replay' these in a browser, and see if it returns valid GML (as in: save it to disk and then try to open it as vector data).
Normally QGIS starts with a GetCapabilities request, then a DescribeLayer and then a GetFeature. You need that last one.
In the Network Debugging window you can also see if the server maybe returns an error code (as: not 200).

Does the Geoserver-layer preview work? As in can you see the layers there?

Normally WFS/WMS from Geoserver play pretty well together with QGIS.
Is there something special to the data? (curves, nonvalid geometries, ???)

Regards,

Richard Duivenvoorde



On 11/27/20 3:48 PM, Paul Wittle wrote:
> Hi,
>
>
>
> So the WFS layers do now return correctly from GeoServer in both WMS and all WFS formats and I?ve improved various indexes.
>
>
>
> I also found a plugin called WFS 2.0 Client and tried that; it returned the features successfully.
>
>
>
> Unfortunately that seems to be a one off download method rather than adding a live linked layer so it didn?t fix the issue but did prove that the GeoServer can return features.
>
>
>
> I?m still having the same trouble when trying to add the layers to QGIS 3.10 though; it just adds a layer with the image icon but of course it can?t draw the layer and it loads as a bad layer if you save it in the project.
>
>
>
> Does anyone have any suggestions of what might be the issue?
>
>
>
> The server does require authentication.
>
>
>
> Thanks,
> Paul
>
>
>
>
>
> *From:*Ian Turton <ijturton at gmail.com>
> *Sent:* 27 November 2020 09:59
> *To:* Paul Wittle <P.Wittle at dorsetcc.gov.uk>
> *Cc:* qgis-developer at lists.osgeo.org
> *Subject:* Re: [QGIS-Developer] Loading WFS layers from GeoServer
>
>
>
>
>
>
>
> On Fri, 27 Nov 2020 at 09:48, Paul Wittle <paul.wittle at dorsetcouncil.gov.uk <mailto:paul.wittle at dorsetcouncil.gov.uk>> wrote:
>
>     Hi,
>
>
>
>     I?m trying to load some WFS layers from my internal GeoServer into QGIS 3.10 and 3.16. The datastore in GeoServer is based on a view in a SQL Server database but it does have a primary key on the spatial table at least.
>
>
>
>     When I load it in 3.10 it comes in as the image icon (i.e. doesn?t load) so I thought I?d try it in the latest version and in that version QGIS just disappears (completely crashes).
>
>
>
>     Has anyone else had a similar problem and can help me work out how to get the layers to load? I suspect the issue is the way the view is configured in SQL Server however I also wonder if I need to investigate the 3.16 crash and potentially log that as a bug as it is not handling the crash with the normal message the application just closes without warning?
>
>
>
>
>
> Can you check if GeoServer is returning GML or an error message when you make a WFS request? But I don't think that QGis should crash no matter what is in the response.
>
>
>
> Ian
>
>
>
> This e-mail and any files transmitted with it are intended solely for
> the use of the individual or entity to whom they are addressed. It may
> contain unclassified but sensitive or protectively marked material and
> should be handled accordingly. Unless you are the named addressee (or
> authorised to receive it for the addressee) you may not copy or use
> it, or disclose it to anyone else. If you have received this
> transmission in error please notify the sender immediately. All
> traffic may be subject to recording and/or monitoring in accordance
> with relevant legislation. Any views expressed in this message are
> those of the individual sender, except where the sender specifies and
> with authority, states them to be the views of Dorset Council. Dorset
> Council does not accept service of documents by fax or other
> electronic means. Virus checking: Whilst all reasonable steps have
> been taken to ensure that this electronic communication and its
> attachments whether encoded, encrypted or otherwise supplied are free
> from computer viruses, Dorset Council accepts no liability in respect
> of any loss, cost, damage or expense suffered as a result of accessing
> this message or any of its attachments. For information on how Dorset
> Council processes your information, please see
> www.dorsetcouncil.gov.uk/416433
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>

This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/416433

From paul.wittle at dorsetcouncil.gov.uk  Fri Nov 27 07:20:42 2020
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Fri, 27 Nov 2020 15:20:42 +0000
Subject: [QGIS-Developer] Loading WFS layers from GeoServer
In-Reply-To: <CWXP265MB16236182CBF9BE7AB1FDA9DEC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
References: <CWXP265MB1623B8AA2F3BE8C52C3A7483C8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <CA+=cGJkHnKgNjKu8=XkXuZ+afkN-i8JWd6zqNvmA37Y8FL=bbQ@mail.gmail.com>
 <CWXP265MB16238641D792E0DEA605105FC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <b1e1e019-25d8-bba4-bb6b-ab3971e74a89@duif.net>
 <CWXP265MB16236182CBF9BE7AB1FDA9DEC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <CWXP265MB16237442E13A937C5D359314C8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>

Hi,

It is also interesting that when I run the query again using WFS version 1.0 and network logging all four requests succeed but the layer is still invalid.

The getFeature returns a single feature with the following geometry:
<gml:Polygon srsName="http://www.opengis.net/gml/srs/epsg.xml#27700" srsDimension="2">
<gml:exterior>
<gml:LinearRing>
<gml:posList>389814.604 97465.168 389823.18 97454.59 389858.98 97463.67 389855.18 97472.01 389849.77 97481.28 389845.792 97486.125 389814.604 97465.168</gml:posList>
</gml:LinearRing>
</gml:exterior>
</gml:Polygon>

Does that give any clues?

I'll head off and check it in my 3.16 version now.
Paul

-----Original Message-----
From: Paul Wittle
Sent: 27 November 2020 15:14
To: rdmailings at duif.net; qgis-developer at lists.osgeo.org
Subject: RE: [QGIS-Developer] Loading WFS layers from GeoServer

Hi,

I was using the 32 bit version (don't ask) but I've just tried it in the 64bit version (although 3.10) with the network logger installed and the errors read:

java.lang.RuntimeException: Failed to get property: {http://www.opengis.net/wfs/2.0}boundedBy Failed to get property: {http://www.opengis.net/wfs/2.0}boundedBy java.io.IOExceptionCannot do natural order without a primary key, please add it or specify a manual sort over existing attributes

The datasource is GeoServer but GeoServer is connecting to a view in SQL Server where the first table in the view is a table with a primary key and spatial index.

However I don't really understand because requesting the data in the GeoServer layer preview works fine so I assume QGIS is asking something the layer preview does not?

Thanks,
Paul

-----Original Message-----
From: Richard Duivenvoorde <rdmailings at duif.net>
Sent: 27 November 2020 15:00
To: Paul Wittle <P.Wittle at dorsetcc.gov.uk>; qgis-developer at lists.osgeo.org
Subject: Re: [QGIS-Developer] Loading WFS layers from GeoServer

Hi Paul,

QGIS 3.16 (well, since ... I don not know exactly) has s NetworkLogger/Debugger.
If you hit the F12 button, you will see all WFS-requests that QGIS is firing to the server.
You can 'replay' these in a browser, and see if it returns valid GML (as in: save it to disk and then try to open it as vector data).
Normally QGIS starts with a GetCapabilities request, then a DescribeLayer and then a GetFeature. You need that last one.
In the Network Debugging window you can also see if the server maybe returns an error code (as: not 200).

Does the Geoserver-layer preview work? As in can you see the layers there?

Normally WFS/WMS from Geoserver play pretty well together with QGIS.
Is there something special to the data? (curves, nonvalid geometries, ???)

Regards,

Richard Duivenvoorde



On 11/27/20 3:48 PM, Paul Wittle wrote:
> Hi,
>
>
>
> So the WFS layers do now return correctly from GeoServer in both WMS and all WFS formats and I?ve improved various indexes.
>
>
>
> I also found a plugin called WFS 2.0 Client and tried that; it returned the features successfully.
>
>
>
> Unfortunately that seems to be a one off download method rather than adding a live linked layer so it didn?t fix the issue but did prove that the GeoServer can return features.
>
>
>
> I?m still having the same trouble when trying to add the layers to QGIS 3.10 though; it just adds a layer with the image icon but of course it can?t draw the layer and it loads as a bad layer if you save it in the project.
>
>
>
> Does anyone have any suggestions of what might be the issue?
>
>
>
> The server does require authentication.
>
>
>
> Thanks,
> Paul
>
>
>
>
>
> *From:*Ian Turton <ijturton at gmail.com>
> *Sent:* 27 November 2020 09:59
> *To:* Paul Wittle <P.Wittle at dorsetcc.gov.uk>
> *Cc:* qgis-developer at lists.osgeo.org
> *Subject:* Re: [QGIS-Developer] Loading WFS layers from GeoServer
>
>
>
>
>
>
>
> On Fri, 27 Nov 2020 at 09:48, Paul Wittle <paul.wittle at dorsetcouncil.gov.uk <mailto:paul.wittle at dorsetcouncil.gov.uk>> wrote:
>
>     Hi,
>
>
>
>     I?m trying to load some WFS layers from my internal GeoServer into QGIS 3.10 and 3.16. The datastore in GeoServer is based on a view in a SQL Server database but it does have a primary key on the spatial table at least.
>
>
>
>     When I load it in 3.10 it comes in as the image icon (i.e. doesn?t load) so I thought I?d try it in the latest version and in that version QGIS just disappears (completely crashes).
>
>
>
>     Has anyone else had a similar problem and can help me work out how to get the layers to load? I suspect the issue is the way the view is configured in SQL Server however I also wonder if I need to investigate the 3.16 crash and potentially log that as a bug as it is not handling the crash with the normal message the application just closes without warning?
>
>
>
>
>
> Can you check if GeoServer is returning GML or an error message when you make a WFS request? But I don't think that QGis should crash no matter what is in the response.
>
>
>
> Ian
>
>
>
> This e-mail and any files transmitted with it are intended solely for
> the use of the individual or entity to whom they are addressed. It may
> contain unclassified but sensitive or protectively marked material and
> should be handled accordingly. Unless you are the named addressee (or
> authorised to receive it for the addressee) you may not copy or use
> it, or disclose it to anyone else. If you have received this
> transmission in error please notify the sender immediately. All
> traffic may be subject to recording and/or monitoring in accordance
> with relevant legislation. Any views expressed in this message are
> those of the individual sender, except where the sender specifies and
> with authority, states them to be the views of Dorset Council. Dorset
> Council does not accept service of documents by fax or other
> electronic means. Virus checking: Whilst all reasonable steps have
> been taken to ensure that this electronic communication and its
> attachments whether encoded, encrypted or otherwise supplied are free
> from computer viruses, Dorset Council accepts no liability in respect
> of any loss, cost, damage or expense suffered as a result of accessing
> this message or any of its attachments. For information on how Dorset
> Council processes your information, please see
> www.dorsetcouncil.gov.uk/416433
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>

This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/416433

From ijturton at gmail.com  Fri Nov 27 07:35:16 2020
From: ijturton at gmail.com (Ian Turton)
Date: Fri, 27 Nov 2020 15:35:16 +0000
Subject: [QGIS-Developer] Loading WFS layers from GeoServer
In-Reply-To: <CWXP265MB16237442E13A937C5D359314C8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
References: <CWXP265MB1623B8AA2F3BE8C52C3A7483C8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <CA+=cGJkHnKgNjKu8=XkXuZ+afkN-i8JWd6zqNvmA37Y8FL=bbQ@mail.gmail.com>
 <CWXP265MB16238641D792E0DEA605105FC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <b1e1e019-25d8-bba4-bb6b-ab3971e74a89@duif.net>
 <CWXP265MB16236182CBF9BE7AB1FDA9DEC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <CWXP265MB16237442E13A937C5D359314C8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <CA+=cGJkDGEAbPahcQox6ZsDJL8Qy0yp8Zmph=UD0x85046SJgw@mail.gmail.com>

If you are using WFS 2.0 and limits/paging (which I think QGis does behind
the scenes) then GeoServer is going to want a specific primary key for the
view - since most Databases won't let you add a primary key to a view we
fake it with a primary key metadata table (see
https://docs.geoserver.org/stable/en/user/data/database/primarykey.html).
The examples on that page are for PostGIS and Oracle so if you are using a
different table you may need to adapt the DDO scripts (and please do add
back to that page if you work out a new one).

Alternatively, try adding version=1.1.0 to the end of your capabilities
request string that you add into QGis which I think will stop the two
programs agreeing to use the highest version available.

Ian

On Fri, 27 Nov 2020 at 15:20, Paul Wittle <paul.wittle at dorsetcouncil.gov.uk>
wrote:

> Hi,
>
> It is also interesting that when I run the query again using WFS version
> 1.0 and network logging all four requests succeed but the layer is still
> invalid.
>
> The getFeature returns a single feature with the following geometry:
> <gml:Polygon srsName="http://www.opengis.net/gml/srs/epsg.xml#27700"
> srsDimension="2">
> <gml:exterior>
> <gml:LinearRing>
> <gml:posList>389814.604 97465.168 389823.18 97454.59 389858.98 97463.67
> 389855.18 97472.01 389849.77 97481.28 389845.792 97486.125 389814.604
> 97465.168</gml:posList>
> </gml:LinearRing>
> </gml:exterior>
> </gml:Polygon>
>
> Does that give any clues?
>
> I'll head off and check it in my 3.16 version now.
> Paul
>
> -----Original Message-----
> From: Paul Wittle
> Sent: 27 November 2020 15:14
> To: rdmailings at duif.net; qgis-developer at lists.osgeo.org
> Subject: RE: [QGIS-Developer] Loading WFS layers from GeoServer
>
> Hi,
>
> I was using the 32 bit version (don't ask) but I've just tried it in the
> 64bit version (although 3.10) with the network logger installed and the
> errors read:
>
> java.lang.RuntimeException: Failed to get property: {
> http://www.opengis.net/wfs/2.0}boundedBy Failed to get property: {
> http://www.opengis.net/wfs/2.0}boundedBy java.io.IOExceptionCannot do
> natural order without a primary key, please add it or specify a manual sort
> over existing attributes
>
> The datasource is GeoServer but GeoServer is connecting to a view in SQL
> Server where the first table in the view is a table with a primary key and
> spatial index.
>
> However I don't really understand because requesting the data in the
> GeoServer layer preview works fine so I assume QGIS is asking something the
> layer preview does not?
>
> Thanks,
> Paul
>
> -----Original Message-----
> From: Richard Duivenvoorde <rdmailings at duif.net>
> Sent: 27 November 2020 15:00
> To: Paul Wittle <P.Wittle at dorsetcc.gov.uk>; qgis-developer at lists.osgeo.org
> Subject: Re: [QGIS-Developer] Loading WFS layers from GeoServer
>
> Hi Paul,
>
> QGIS 3.16 (well, since ... I don not know exactly) has s
> NetworkLogger/Debugger.
> If you hit the F12 button, you will see all WFS-requests that QGIS is
> firing to the server.
> You can 'replay' these in a browser, and see if it returns valid GML (as
> in: save it to disk and then try to open it as vector data).
> Normally QGIS starts with a GetCapabilities request, then a DescribeLayer
> and then a GetFeature. You need that last one.
> In the Network Debugging window you can also see if the server maybe
> returns an error code (as: not 200).
>
> Does the Geoserver-layer preview work? As in can you see the layers there?
>
> Normally WFS/WMS from Geoserver play pretty well together with QGIS.
> Is there something special to the data? (curves, nonvalid geometries, ???)
>
> Regards,
>
> Richard Duivenvoorde
>
>
>
> On 11/27/20 3:48 PM, Paul Wittle wrote:
> > Hi,
> >
> >
> >
> > So the WFS layers do now return correctly from GeoServer in both WMS and
> all WFS formats and I?ve improved various indexes.
> >
> >
> >
> > I also found a plugin called WFS 2.0 Client and tried that; it returned
> the features successfully.
> >
> >
> >
> > Unfortunately that seems to be a one off download method rather than
> adding a live linked layer so it didn?t fix the issue but did prove that
> the GeoServer can return features.
> >
> >
> >
> > I?m still having the same trouble when trying to add the layers to QGIS
> 3.10 though; it just adds a layer with the image icon but of course it
> can?t draw the layer and it loads as a bad layer if you save it in the
> project.
> >
> >
> >
> > Does anyone have any suggestions of what might be the issue?
> >
> >
> >
> > The server does require authentication.
> >
> >
> >
> > Thanks,
> > Paul
> >
> >
> >
> >
> >
> > *From:*Ian Turton <ijturton at gmail.com>
> > *Sent:* 27 November 2020 09:59
> > *To:* Paul Wittle <P.Wittle at dorsetcc.gov.uk>
> > *Cc:* qgis-developer at lists.osgeo.org
> > *Subject:* Re: [QGIS-Developer] Loading WFS layers from GeoServer
> >
> >
> >
> >
> >
> >
> >
> > On Fri, 27 Nov 2020 at 09:48, Paul Wittle <
> paul.wittle at dorsetcouncil.gov.uk <mailto:paul.wittle at dorsetcouncil.gov.uk>>
> wrote:
> >
> >     Hi,
> >
> >
> >
> >     I?m trying to load some WFS layers from my internal GeoServer into
> QGIS 3.10 and 3.16. The datastore in GeoServer is based on a view in a SQL
> Server database but it does have a primary key on the spatial table at
> least.
> >
> >
> >
> >     When I load it in 3.10 it comes in as the image icon (i.e. doesn?t
> load) so I thought I?d try it in the latest version and in that version
> QGIS just disappears (completely crashes).
> >
> >
> >
> >     Has anyone else had a similar problem and can help me work out how
> to get the layers to load? I suspect the issue is the way the view is
> configured in SQL Server however I also wonder if I need to investigate the
> 3.16 crash and potentially log that as a bug as it is not handling the
> crash with the normal message the application just closes without warning?
> >
> >
> >
> >
> >
> > Can you check if GeoServer is returning GML or an error message when you
> make a WFS request? But I don't think that QGis should crash no matter what
> is in the response.
> >
> >
> >
> > Ian
> >
> >
> >
> > This e-mail and any files transmitted with it are intended solely for
> > the use of the individual or entity to whom they are addressed. It may
> > contain unclassified but sensitive or protectively marked material and
> > should be handled accordingly. Unless you are the named addressee (or
> > authorised to receive it for the addressee) you may not copy or use
> > it, or disclose it to anyone else. If you have received this
> > transmission in error please notify the sender immediately. All
> > traffic may be subject to recording and/or monitoring in accordance
> > with relevant legislation. Any views expressed in this message are
> > those of the individual sender, except where the sender specifies and
> > with authority, states them to be the views of Dorset Council. Dorset
> > Council does not accept service of documents by fax or other
> > electronic means. Virus checking: Whilst all reasonable steps have
> > been taken to ensure that this electronic communication and its
> > attachments whether encoded, encrypted or otherwise supplied are free
> > from computer viruses, Dorset Council accepts no liability in respect
> > of any loss, cost, damage or expense suffered as a result of accessing
> > this message or any of its attachments. For information on how Dorset
> > Council processes your information, please see
> > www.dorsetcouncil.gov.uk/416433
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
>
> This e-mail and any files transmitted with it are intended solely for the
> use of the individual or entity to whom they are addressed. It may contain
> unclassified but sensitive or protectively marked material and should be
> handled accordingly. Unless you are the named addressee (or authorised to
> receive it for the addressee) you may not copy or use it, or disclose it to
> anyone else. If you have received this transmission in error please notify
> the sender immediately. All traffic may be subject to recording and/or
> monitoring in accordance with relevant legislation. Any views expressed in
> this message are those of the individual sender, except where the sender
> specifies and with authority, states them to be the views of Dorset
> Council. Dorset Council does not accept service of documents by fax or
> other electronic means. Virus checking: Whilst all reasonable steps have
> been taken to ensure that this electronic communication and its attachments
> whether encoded, encrypted or otherwise supplied are free from computer
> viruses, Dorset Council accepts no liability in respect of any loss, cost,
> damage or expense suffered as a result of accessing this message or any of
> its attachments. For information on how Dorset Council processes your
> information, please see www.dorsetcouncil.gov.uk/416433
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 
Ian Turton
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201127/070cff56/attachment.html>

From andrea.aime at geo-solutions.it  Fri Nov 27 07:32:59 2020
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Fri, 27 Nov 2020 16:32:59 +0100
Subject: [QGIS-Developer] Loading WFS layers from GeoServer
In-Reply-To: <CWXP265MB16236182CBF9BE7AB1FDA9DEC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
References: <CWXP265MB1623B8AA2F3BE8C52C3A7483C8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <CA+=cGJkHnKgNjKu8=XkXuZ+afkN-i8JWd6zqNvmA37Y8FL=bbQ@mail.gmail.com>
 <CWXP265MB16238641D792E0DEA605105FC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <b1e1e019-25d8-bba4-bb6b-ab3971e74a89@duif.net>
 <CWXP265MB16236182CBF9BE7AB1FDA9DEC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <CA+nxMTteppBPDFY=CAO-J3e4_CTJug1O8DURELfLd82b0ZpP+A@mail.gmail.com>

Hi Paul,
the preview does not need to do paging. Paging without a sort key is
allowed only if there is a "natural sorting", that is, a key column
that can be used to ensure the paging is stable (e.g, you don't get the
same feature twice while going through pages).
Go to your SQL view definition and make one or more columns as the source
of the unique identifier

Cheers
Andrea


On Fri, Nov 27, 2020 at 4:14 PM Paul Wittle <
paul.wittle at dorsetcouncil.gov.uk> wrote:

> Hi,
>
> I was using the 32 bit version (don't ask) but I've just tried it in the
> 64bit version (although 3.10) with the network logger installed and the
> errors read:
>
> java.lang.RuntimeException: Failed to get property: {
> http://www.opengis.net/wfs/2.0}boundedBy Failed to get property: {
> http://www.opengis.net/wfs/2.0}boundedBy java.io.IOExceptionCannot do
> natural order without a primary key, please add it or specify a manual sort
> over existing attributes
>
> The datasource is GeoServer but GeoServer is connecting to a view in SQL
> Server where the first table in the view is a table with a primary key and
> spatial index.
>
> However I don't really understand because requesting the data in the
> GeoServer layer preview works fine so I assume QGIS is asking something the
> layer preview does not?
>
> Thanks,
> Paul
>
> -----Original Message-----
> From: Richard Duivenvoorde <rdmailings at duif.net>
> Sent: 27 November 2020 15:00
> To: Paul Wittle <P.Wittle at dorsetcc.gov.uk>; qgis-developer at lists.osgeo.org
> Subject: Re: [QGIS-Developer] Loading WFS layers from GeoServer
>
> Hi Paul,
>
> QGIS 3.16 (well, since ... I don not know exactly) has s
> NetworkLogger/Debugger.
> If you hit the F12 button, you will see all WFS-requests that QGIS is
> firing to the server.
> You can 'replay' these in a browser, and see if it returns valid GML (as
> in: save it to disk and then try to open it as vector data).
> Normally QGIS starts with a GetCapabilities request, then a DescribeLayer
> and then a GetFeature. You need that last one.
> In the Network Debugging window you can also see if the server maybe
> returns an error code (as: not 200).
>
> Does the Geoserver-layer preview work? As in can you see the layers there?
>
> Normally WFS/WMS from Geoserver play pretty well together with QGIS.
> Is there something special to the data? (curves, nonvalid geometries, ???)
>
> Regards,
>
> Richard Duivenvoorde
>
>
>
> On 11/27/20 3:48 PM, Paul Wittle wrote:
> > Hi,
> >
> >
> >
> > So the WFS layers do now return correctly from GeoServer in both WMS and
> all WFS formats and I?ve improved various indexes.
> >
> >
> >
> > I also found a plugin called WFS 2.0 Client and tried that; it returned
> the features successfully.
> >
> >
> >
> > Unfortunately that seems to be a one off download method rather than
> adding a live linked layer so it didn?t fix the issue but did prove that
> the GeoServer can return features.
> >
> >
> >
> > I?m still having the same trouble when trying to add the layers to QGIS
> 3.10 though; it just adds a layer with the image icon but of course it
> can?t draw the layer and it loads as a bad layer if you save it in the
> project.
> >
> >
> >
> > Does anyone have any suggestions of what might be the issue?
> >
> >
> >
> > The server does require authentication.
> >
> >
> >
> > Thanks,
> > Paul
> >
> >
> >
> >
> >
> > *From:*Ian Turton <ijturton at gmail.com>
> > *Sent:* 27 November 2020 09:59
> > *To:* Paul Wittle <P.Wittle at dorsetcc.gov.uk>
> > *Cc:* qgis-developer at lists.osgeo.org
> > *Subject:* Re: [QGIS-Developer] Loading WFS layers from GeoServer
> >
> >
> >
> >
> >
> >
> >
> > On Fri, 27 Nov 2020 at 09:48, Paul Wittle <
> paul.wittle at dorsetcouncil.gov.uk <mailto:paul.wittle at dorsetcouncil.gov.uk>>
> wrote:
> >
> >     Hi,
> >
> >
> >
> >     I?m trying to load some WFS layers from my internal GeoServer into
> QGIS 3.10 and 3.16. The datastore in GeoServer is based on a view in a SQL
> Server database but it does have a primary key on the spatial table at
> least.
> >
> >
> >
> >     When I load it in 3.10 it comes in as the image icon (i.e. doesn?t
> load) so I thought I?d try it in the latest version and in that version
> QGIS just disappears (completely crashes).
> >
> >
> >
> >     Has anyone else had a similar problem and can help me work out how
> to get the layers to load? I suspect the issue is the way the view is
> configured in SQL Server however I also wonder if I need to investigate the
> 3.16 crash and potentially log that as a bug as it is not handling the
> crash with the normal message the application just closes without warning?
> >
> >
> >
> >
> >
> > Can you check if GeoServer is returning GML or an error message when you
> make a WFS request? But I don't think that QGis should crash no matter what
> is in the response.
> >
> >
> >
> > Ian
> >
> >
> >
> > This e-mail and any files transmitted with it are intended solely for
> > the use of the individual or entity to whom they are addressed. It may
> > contain unclassified but sensitive or protectively marked material and
> > should be handled accordingly. Unless you are the named addressee (or
> > authorised to receive it for the addressee) you may not copy or use
> > it, or disclose it to anyone else. If you have received this
> > transmission in error please notify the sender immediately. All
> > traffic may be subject to recording and/or monitoring in accordance
> > with relevant legislation. Any views expressed in this message are
> > those of the individual sender, except where the sender specifies and
> > with authority, states them to be the views of Dorset Council. Dorset
> > Council does not accept service of documents by fax or other
> > electronic means. Virus checking: Whilst all reasonable steps have
> > been taken to ensure that this electronic communication and its
> > attachments whether encoded, encrypted or otherwise supplied are free
> > from computer viruses, Dorset Council accepts no liability in respect
> > of any loss, cost, damage or expense suffered as a result of accessing
> > this message or any of its attachments. For information on how Dorset
> > Council processes your information, please see
> > www.dorsetcouncil.gov.uk/416433
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
>
> This e-mail and any files transmitted with it are intended solely for the
> use of the individual or entity to whom they are addressed. It may contain
> unclassified but sensitive or protectively marked material and should be
> handled accordingly. Unless you are the named addressee (or authorised to
> receive it for the addressee) you may not copy or use it, or disclose it to
> anyone else. If you have received this transmission in error please notify
> the sender immediately. All traffic may be subject to recording and/or
> monitoring in accordance with relevant legislation. Any views expressed in
> this message are those of the individual sender, except where the sender
> specifies and with authority, states them to be the views of Dorset
> Council. Dorset Council does not accept service of documents by fax or
> other electronic means. Virus checking: Whilst all reasonable steps have
> been taken to ensure that this electronic communication and its attachments
> whether encoded, encrypted or otherwise supplied are free from computer
> viruses, Dorset Council accepts no liability in respect of any loss, cost,
> damage or expense suffered as a result of accessing this message or any of
> its attachments. For information on how Dorset Council processes your
> information, please see www.dorsetcouncil.gov.uk/416433
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


-- 

Regards, Andrea Aime

== GeoServer Professional Services from the experts! Visit
http://goo.gl/it488V for more information. == Ing. Andrea Aime @geowolf
Technical Lead GeoSolutions S.A.S. Via di Montramito 3/A 55054 Massarosa
(LU) phone: +39 0584 962313 fax: +39 0584 1660272 mob: +39 339 8844549
http://www.geo-solutions.it http://twitter.com/geosolutions_it
------------------------------------------------------- *Con riferimento
alla normativa sul trattamento dei dati personali (Reg. UE 2016/679 -
Regolamento generale sulla protezione dei dati ?GDPR?), si precisa che ogni
circostanza inerente alla presente email (il suo contenuto, gli eventuali
allegati, etc.) ? un dato la cui conoscenza ? riservata al/i solo/i
destinatario/i indicati dallo scrivente. Se il messaggio Le ? giunto per
errore, ? tenuta/o a cancellarlo, ogni altra operazione ? illecita. Le
sarei comunque grato se potesse darmene notizia. This email is intended
only for the person or entity to which it is addressed and may contain
information that is privileged, confidential or otherwise protected from
disclosure. We remind that - as provided by European Regulation 2016/679
?GDPR? - copying, dissemination or use of this e-mail or the information
herein by anyone other than the intended recipient is prohibited. If you
have received this email by mistake, please notify us immediately by
telephone or e-mail.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201127/d7452365/attachment-0001.html>

From paul.wittle at dorsetcouncil.gov.uk  Fri Nov 27 07:40:14 2020
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Fri, 27 Nov 2020 15:40:14 +0000
Subject: [QGIS-Developer] Loading WFS layers from GeoServer
In-Reply-To: <CA+=cGJkDGEAbPahcQox6ZsDJL8Qy0yp8Zmph=UD0x85046SJgw@mail.gmail.com>
References: <CWXP265MB1623B8AA2F3BE8C52C3A7483C8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <CA+=cGJkHnKgNjKu8=XkXuZ+afkN-i8JWd6zqNvmA37Y8FL=bbQ@mail.gmail.com>
 <CWXP265MB16238641D792E0DEA605105FC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <b1e1e019-25d8-bba4-bb6b-ab3971e74a89@duif.net>
 <CWXP265MB16236182CBF9BE7AB1FDA9DEC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <CWXP265MB16237442E13A937C5D359314C8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <CA+=cGJkDGEAbPahcQox6ZsDJL8Qy0yp8Zmph=UD0x85046SJgw@mail.gmail.com>
Message-ID: <CWXP265MB16232E6CAE346E7675037CEEC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>

Thanks everyone,

I have already reduced it to version 1.0 to prevent paging as I think that is a red herring in terms of the crashing here. As far as I can tell the version 1.0 requests all work fine but the older version of QGIS returns an invalid layer and version 3.16 crashes.

I?ve found a *.wer error file associated with the 3.16 crash and it lists the following:
Sig[0].Name=Application Name
Sig[0].Value=qgis-bin.exe
Sig[1].Name=Application Version
Sig[1].Value=0.0.0.0
Sig[2].Name=Application Timestamp
Sig[2].Value=5f9304c8
Sig[3].Name=Fault Module Name
Sig[3].Value=KERNELBASE.dll
Sig[4].Name=Fault Module Version
Sig[4].Value=10.0.18362.1139
Sig[5].Name=Fault Module Timestamp
Sig[5].Value=a8b891f5
Sig[6].Name=Exception Code
Sig[6].Value=c0000005
Sig[7].Name=Exception Offset
Sig[7].Value=0000000000043b29

Unfortunately I?m pretty sure that error roughly translates to:
FriendlyEventName=Stopped working
ConsentKey=APPCRASH

So I don?t think my Windows knows what went wrong. Is there another log I can look for that might give something more useful?

Thanks,
Paul


From: Ian Turton <ijturton at gmail.com>
Sent: 27 November 2020 15:35
To: Paul Wittle <P.Wittle at dorsetcc.gov.uk>
Cc: rdmailings at duif.net; qgis-developer at lists.osgeo.org
Subject: Re: [QGIS-Developer] Loading WFS layers from GeoServer

If you are using WFS 2.0 and limits/paging (which I think QGis does behind the scenes) then GeoServer is going to want a specific primary key for the view - since most Databases won't let you add a primary key to a view we fake it with a primary key metadata table (see https://docs.geoserver.org/stable/en/user/data/database/primarykey.html). The examples on that page are for PostGIS and Oracle so if you are using a different table you may need to adapt the DDO scripts (and please do add back to that page if you work out a new one).

Alternatively, try adding version=1.1.0 to the end of your capabilities request string that you add into QGis which I think will stop the two programs agreeing to use the highest version available.

Ian

On Fri, 27 Nov 2020 at 15:20, Paul Wittle <paul.wittle at dorsetcouncil.gov.uk<mailto:paul.wittle at dorsetcouncil.gov.uk>> wrote:
Hi,

It is also interesting that when I run the query again using WFS version 1.0 and network logging all four requests succeed but the layer is still invalid.

The getFeature returns a single feature with the following geometry:
<gml:Polygon srsName="http://www.opengis.net/gml/srs/epsg.xml#27700" srsDimension="2">
<gml:exterior>
<gml:LinearRing>
<gml:posList>389814.604 97465.168 389823.18 97454.59 389858.98 97463.67 389855.18 97472.01 389849.77 97481.28 389845.792 97486.125 389814.604 97465.168</gml:posList>
</gml:LinearRing>
</gml:exterior>
</gml:Polygon>

Does that give any clues?

I'll head off and check it in my 3.16 version now.
Paul

-----Original Message-----
From: Paul Wittle
Sent: 27 November 2020 15:14
To: rdmailings at duif.net<mailto:rdmailings at duif.net>; qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>
Subject: RE: [QGIS-Developer] Loading WFS layers from GeoServer

Hi,

I was using the 32 bit version (don't ask) but I've just tried it in the 64bit version (although 3.10) with the network logger installed and the errors read:

java.lang.RuntimeException: Failed to get property: {http://www.opengis.net/wfs/2.0}boundedBy<http://www.opengis.net/wfs/2.0%7DboundedBy> Failed to get property: {http://www.opengis.net/wfs/2.0}boundedBy<http://www.opengis.net/wfs/2.0%7DboundedBy> java.io.IOExceptionCannot do natural order without a primary key, please add it or specify a manual sort over existing attributes

The datasource is GeoServer but GeoServer is connecting to a view in SQL Server where the first table in the view is a table with a primary key and spatial index.

However I don't really understand because requesting the data in the GeoServer layer preview works fine so I assume QGIS is asking something the layer preview does not?

Thanks,
Paul

-----Original Message-----
From: Richard Duivenvoorde <rdmailings at duif.net<mailto:rdmailings at duif.net>>
Sent: 27 November 2020 15:00
To: Paul Wittle <P.Wittle at dorsetcc.gov.uk<mailto:P.Wittle at dorsetcc.gov.uk>>; qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Loading WFS layers from GeoServer

Hi Paul,

QGIS 3.16 (well, since ... I don not know exactly) has s NetworkLogger/Debugger.
If you hit the F12 button, you will see all WFS-requests that QGIS is firing to the server.
You can 'replay' these in a browser, and see if it returns valid GML (as in: save it to disk and then try to open it as vector data).
Normally QGIS starts with a GetCapabilities request, then a DescribeLayer and then a GetFeature. You need that last one.
In the Network Debugging window you can also see if the server maybe returns an error code (as: not 200).

Does the Geoserver-layer preview work? As in can you see the layers there?

Normally WFS/WMS from Geoserver play pretty well together with QGIS.
Is there something special to the data? (curves, nonvalid geometries, ???)

Regards,

Richard Duivenvoorde



On 11/27/20 3:48 PM, Paul Wittle wrote:
> Hi,
>
>
>
> So the WFS layers do now return correctly from GeoServer in both WMS and all WFS formats and I?ve improved various indexes.
>
>
>
> I also found a plugin called WFS 2.0 Client and tried that; it returned the features successfully.
>
>
>
> Unfortunately that seems to be a one off download method rather than adding a live linked layer so it didn?t fix the issue but did prove that the GeoServer can return features.
>
>
>
> I?m still having the same trouble when trying to add the layers to QGIS 3.10 though; it just adds a layer with the image icon but of course it can?t draw the layer and it loads as a bad layer if you save it in the project.
>
>
>
> Does anyone have any suggestions of what might be the issue?
>
>
>
> The server does require authentication.
>
>
>
> Thanks,
> Paul
>
>
>
>
>
> *From:*Ian Turton <ijturton at gmail.com<mailto:ijturton at gmail.com>>
> *Sent:* 27 November 2020 09:59
> *To:* Paul Wittle <P.Wittle at dorsetcc.gov.uk<mailto:P.Wittle at dorsetcc.gov.uk>>
> *Cc:* qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>
> *Subject:* Re: [QGIS-Developer] Loading WFS layers from GeoServer
>
>
>
>
>
>
>
> On Fri, 27 Nov 2020 at 09:48, Paul Wittle <paul.wittle at dorsetcouncil.gov.uk<mailto:paul.wittle at dorsetcouncil.gov.uk> <mailto:paul.wittle at dorsetcouncil.gov.uk<mailto:paul.wittle at dorsetcouncil.gov.uk>>> wrote:
>
>     Hi,
>
>
>
>     I?m trying to load some WFS layers from my internal GeoServer into QGIS 3.10 and 3.16. The datastore in GeoServer is based on a view in a SQL Server database but it does have a primary key on the spatial table at least.
>
>
>
>     When I load it in 3.10 it comes in as the image icon (i.e. doesn?t load) so I thought I?d try it in the latest version and in that version QGIS just disappears (completely crashes).
>
>
>
>     Has anyone else had a similar problem and can help me work out how to get the layers to load? I suspect the issue is the way the view is configured in SQL Server however I also wonder if I need to investigate the 3.16 crash and potentially log that as a bug as it is not handling the crash with the normal message the application just closes without warning?
>
>
>
>
>
> Can you check if GeoServer is returning GML or an error message when you make a WFS request? But I don't think that QGis should crash no matter what is in the response.
>
>
>
> Ian
>
>
>
> This e-mail and any files transmitted with it are intended solely for
> the use of the individual or entity to whom they are addressed. It may
> contain unclassified but sensitive or protectively marked material and
> should be handled accordingly. Unless you are the named addressee (or
> authorised to receive it for the addressee) you may not copy or use
> it, or disclose it to anyone else. If you have received this
> transmission in error please notify the sender immediately. All
> traffic may be subject to recording and/or monitoring in accordance
> with relevant legislation. Any views expressed in this message are
> those of the individual sender, except where the sender specifies and
> with authority, states them to be the views of Dorset Council. Dorset
> Council does not accept service of documents by fax or other
> electronic means. Virus checking: Whilst all reasonable steps have
> been taken to ensure that this electronic communication and its
> attachments whether encoded, encrypted or otherwise supplied are free
> from computer viruses, Dorset Council accepts no liability in respect
> of any loss, cost, damage or expense suffered as a result of accessing
> this message or any of its attachments. For information on how Dorset
> Council processes your information, please see
> www.dorsetcouncil.gov.uk/416433<http://www.dorsetcouncil.gov.uk/416433>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>

This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/416433<http://www.dorsetcouncil.gov.uk/416433>
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


--
Ian Turton
This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/416433
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201127/04fc16df/attachment-0001.html>

From osgeo.mailinglist at gmail.com  Fri Nov 27 10:13:20 2020
From: osgeo.mailinglist at gmail.com (Thomas Gratier)
Date: Fri, 27 Nov 2020 19:13:20 +0100
Subject: [QGIS-Developer] Pyqgis layer export in GeoJson with option
 RFC7946=True
In-Reply-To: <b9da5d78-dd3a-f3e1-0c05-05dc4446fb24@cerema.fr>
References: <b9da5d78-dd3a-f3e1-0c05-05dc4446fb24@cerema.fr>
Message-ID: <CACPZzQ2h8FCMa-yc1SOiY0OanzMyn4sgdU0HE+Wna=6ciOsFWQ@mail.gmail.com>

Hi,

You should run the following considering you selected a vector layer

from qgis.core import QgsVectorFileWriter

layer = iface.activeLayer()
QgsVectorFileWriter.writeAsVectorFormat(layer, '/tmp/out.geojson', 'utf-8',
layer.crs(), 'GeoJSON', layerOptions=['RFC7946=True'])

Regards

Thomas Gratier


Le mer. 25 nov. 2020 ? 18:47, PALMIER Patrick (Responsable de groupe) -
CEREMA/DTerNP/DATHa/MT <Patrick.Palmier at cerema.fr> a ?crit :

> Hello,
>
> I'm using Qgis 3.14.16 with WIndows 10
>
> I'm trying in a python script to export a layer in geojSon with the
> option RFC7946=True
> It works well with the gui, but I don't know how to write it in a python
> script
> Is there someone who could send me a sample of code which do this
>
>
> Thanks
>
>
> Patrick
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201127/da160ba7/attachment.html>

From dkarakostis at gmail.com  Mon Nov 30 03:07:39 2020
From: dkarakostis at gmail.com (Dimitris Kar)
Date: Mon, 30 Nov 2020 13:07:39 +0200
Subject: [QGIS-Developer] sudden performance issues with my QGIS installation
Message-ID: <CAH4UFc9XD5+CEsXHmUx3_NTpCGMG+gztHN=MA8Z+-E2fC4oOUA@mail.gmail.com>

Hello all,

I am facing some performance issues lately with QGIS. I have been using
QGIS3.14 since the last six months (Windows 10) without any problems. It
was always very fast in any type of analysis. Suddenly it stopped
responding. Sometimes it lags for a minute or more while performing simply
tasks (load layer, save layer as geojson etc.).
I have tried to uninstall, delete the registry and the plugins and
reinstall it but the issues perform. I have tried the newer version (3.16)
and the older one (3.10) but I still get the same performance issues. I
have also trired to run it with a new profile and without any plugins. When
running it with no plugins it launches faster but then I get the same lag
issues when loading layers or running simply analysis (buffer)

Do you have any idea what could be causing this? I was wondering if some
other software that I have installed recently could have created an issue.

Thanks
Dimitris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201130/eaab7175/attachment.html>

From a.neumann at carto.net  Mon Nov 30 04:07:54 2020
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon, 30 Nov 2020 13:07:54 +0100
Subject: [QGIS-Developer] sudden performance issues with my QGIS
 installation
In-Reply-To: <CAH4UFc9XD5+CEsXHmUx3_NTpCGMG+gztHN=MA8Z+-E2fC4oOUA@mail.gmail.com>
References: <CAH4UFc9XD5+CEsXHmUx3_NTpCGMG+gztHN=MA8Z+-E2fC4oOUA@mail.gmail.com>
Message-ID: <c21bb38f-6e53-c09d-a4fa-0e9a925a543f@carto.net>

Hi Dimitris,

Just a shot in the dark: does it help if you close the "Browser" panel. 
Sometimes the browser (esp. with network drives) can slow down QGIS 
considerably.

Maybe worth a try.

Andreas

Am 30.11.20 um 12:07 schrieb Dimitris Kar:
> Hello all,
>
> I am facing some performance issues lately with QGIS. I have been 
> using QGIS3.14 since the last six months (Windows 10) without any 
> problems. It was always very fast in any type of analysis. Suddenly it 
> stopped responding. Sometimes it lags for a minute or more while 
> performing simply tasks (load layer, save layer as geojson etc.).
> I have tried to uninstall, delete the registry and the plugins and 
> reinstall it but the issues perform. I have tried the newer version 
> (3.16) and the older one (3.10) but I still get the same performance 
> issues. I have also trired to run it with a new profile and without 
> any plugins. When running it with no plugins it launches faster but 
> then I get the same lag issues when loading layers or running simply 
> analysis (buffer)
>
> Do you have any idea what could be?causing this? I was wondering if 
> some other software that I have installed recently could have created 
> an issue.
>
> Thanks
> Dimitris
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201130/05ba0b83/attachment.html>

From paul.wittle at dorsetcouncil.gov.uk  Mon Nov 30 07:41:38 2020
From: paul.wittle at dorsetcouncil.gov.uk (Paul Wittle)
Date: Mon, 30 Nov 2020 15:41:38 +0000
Subject: [QGIS-Developer] Loading WFS layers from GeoServer
In-Reply-To: <CA+=cGJkDGEAbPahcQox6ZsDJL8Qy0yp8Zmph=UD0x85046SJgw@mail.gmail.com>
References: <CWXP265MB1623B8AA2F3BE8C52C3A7483C8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <CA+=cGJkHnKgNjKu8=XkXuZ+afkN-i8JWd6zqNvmA37Y8FL=bbQ@mail.gmail.com>
 <CWXP265MB16238641D792E0DEA605105FC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <b1e1e019-25d8-bba4-bb6b-ab3971e74a89@duif.net>
 <CWXP265MB16236182CBF9BE7AB1FDA9DEC8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <CWXP265MB16237442E13A937C5D359314C8F80@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>
 <CA+=cGJkDGEAbPahcQox6ZsDJL8Qy0yp8Zmph=UD0x85046SJgw@mail.gmail.com>
Message-ID: <CWXP265MB16239D04356F62440C44B575C8F50@CWXP265MB1623.GBRP265.PROD.OUTLOOK.COM>

Just a quick update as I?ve spent ages testing the issue further today.

The crashing only happens on our corporate devices as it didn?t do it on my home PC so I suspect that bit is linked to something in our ICT configuration but I?m still unsure what it can be.

Interestingly I still can?t load any of our GeoServer layers in any context (PostGIS, Oracle, SQL Server) except for layers which come from a GeoPackage store. In this case it registers it as a polygon layer and network logger GetFeature seems to be working (as far as I can see) but the polygons don?t actually draw on the map. The result is the same on my corporate and home device in this regard.

I didn?t have any issues when loading it into MapInfo so it is very confusing. I?m convinced it is something about our individual setup so I?ll stop posting until I can identify the cause with more certainty but I thought I?d provide a further update in case anyone else has noticed similar behaviour.

Thanks for all the replies so far,
Paul

From: Ian Turton <ijturton at gmail.com>
Sent: 27 November 2020 15:35
To: Paul Wittle <P.Wittle at dorsetcc.gov.uk>
Cc: rdmailings at duif.net; qgis-developer at lists.osgeo.org
Subject: Re: [QGIS-Developer] Loading WFS layers from GeoServer

If you are using WFS 2.0 and limits/paging (which I think QGis does behind the scenes) then GeoServer is going to want a specific primary key for the view - since most Databases won't let you add a primary key to a view we fake it with a primary key metadata table (see https://docs.geoserver.org/stable/en/user/data/database/primarykey.html). The examples on that page are for PostGIS and Oracle so if you are using a different table you may need to adapt the DDO scripts (and please do add back to that page if you work out a new one).

Alternatively, try adding version=1.1.0 to the end of your capabilities request string that you add into QGis which I think will stop the two programs agreeing to use the highest version available.

Ian

On Fri, 27 Nov 2020 at 15:20, Paul Wittle <paul.wittle at dorsetcouncil.gov.uk<mailto:paul.wittle at dorsetcouncil.gov.uk>> wrote:
Hi,

It is also interesting that when I run the query again using WFS version 1.0 and network logging all four requests succeed but the layer is still invalid.

The getFeature returns a single feature with the following geometry:
<gml:Polygon srsName="http://www.opengis.net/gml/srs/epsg.xml#27700" srsDimension="2">
<gml:exterior>
<gml:LinearRing>
<gml:posList>389814.604 97465.168 389823.18 97454.59 389858.98 97463.67 389855.18 97472.01 389849.77 97481.28 389845.792 97486.125 389814.604 97465.168</gml:posList>
</gml:LinearRing>
</gml:exterior>
</gml:Polygon>

Does that give any clues?

I'll head off and check it in my 3.16 version now.
Paul

-----Original Message-----
From: Paul Wittle
Sent: 27 November 2020 15:14
To: rdmailings at duif.net<mailto:rdmailings at duif.net>; qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>
Subject: RE: [QGIS-Developer] Loading WFS layers from GeoServer

Hi,

I was using the 32 bit version (don't ask) but I've just tried it in the 64bit version (although 3.10) with the network logger installed and the errors read:

java.lang.RuntimeException: Failed to get property: {http://www.opengis.net/wfs/2.0}boundedBy<http://www.opengis.net/wfs/2.0%7DboundedBy> Failed to get property: {http://www.opengis.net/wfs/2.0}boundedBy<http://www.opengis.net/wfs/2.0%7DboundedBy> java.io.IOExceptionCannot do natural order without a primary key, please add it or specify a manual sort over existing attributes

The datasource is GeoServer but GeoServer is connecting to a view in SQL Server where the first table in the view is a table with a primary key and spatial index.

However I don't really understand because requesting the data in the GeoServer layer preview works fine so I assume QGIS is asking something the layer preview does not?

Thanks,
Paul

-----Original Message-----
From: Richard Duivenvoorde <rdmailings at duif.net<mailto:rdmailings at duif.net>>
Sent: 27 November 2020 15:00
To: Paul Wittle <P.Wittle at dorsetcc.gov.uk<mailto:P.Wittle at dorsetcc.gov.uk>>; qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Loading WFS layers from GeoServer

Hi Paul,

QGIS 3.16 (well, since ... I don not know exactly) has s NetworkLogger/Debugger.
If you hit the F12 button, you will see all WFS-requests that QGIS is firing to the server.
You can 'replay' these in a browser, and see if it returns valid GML (as in: save it to disk and then try to open it as vector data).
Normally QGIS starts with a GetCapabilities request, then a DescribeLayer and then a GetFeature. You need that last one.
In the Network Debugging window you can also see if the server maybe returns an error code (as: not 200).

Does the Geoserver-layer preview work? As in can you see the layers there?

Normally WFS/WMS from Geoserver play pretty well together with QGIS.
Is there something special to the data? (curves, nonvalid geometries, ???)

Regards,

Richard Duivenvoorde



On 11/27/20 3:48 PM, Paul Wittle wrote:
> Hi,
>
>
>
> So the WFS layers do now return correctly from GeoServer in both WMS and all WFS formats and I?ve improved various indexes.
>
>
>
> I also found a plugin called WFS 2.0 Client and tried that; it returned the features successfully.
>
>
>
> Unfortunately that seems to be a one off download method rather than adding a live linked layer so it didn?t fix the issue but did prove that the GeoServer can return features.
>
>
>
> I?m still having the same trouble when trying to add the layers to QGIS 3.10 though; it just adds a layer with the image icon but of course it can?t draw the layer and it loads as a bad layer if you save it in the project.
>
>
>
> Does anyone have any suggestions of what might be the issue?
>
>
>
> The server does require authentication.
>
>
>
> Thanks,
> Paul
>
>
>
>
>
> *From:*Ian Turton <ijturton at gmail.com<mailto:ijturton at gmail.com>>
> *Sent:* 27 November 2020 09:59
> *To:* Paul Wittle <P.Wittle at dorsetcc.gov.uk<mailto:P.Wittle at dorsetcc.gov.uk>>
> *Cc:* qgis-developer at lists.osgeo.org<mailto:qgis-developer at lists.osgeo.org>
> *Subject:* Re: [QGIS-Developer] Loading WFS layers from GeoServer
>
>
>
>
>
>
>
> On Fri, 27 Nov 2020 at 09:48, Paul Wittle <paul.wittle at dorsetcouncil.gov.uk<mailto:paul.wittle at dorsetcouncil.gov.uk> <mailto:paul.wittle at dorsetcouncil.gov.uk<mailto:paul.wittle at dorsetcouncil.gov.uk>>> wrote:
>
>     Hi,
>
>
>
>     I?m trying to load some WFS layers from my internal GeoServer into QGIS 3.10 and 3.16. The datastore in GeoServer is based on a view in a SQL Server database but it does have a primary key on the spatial table at least.
>
>
>
>     When I load it in 3.10 it comes in as the image icon (i.e. doesn?t load) so I thought I?d try it in the latest version and in that version QGIS just disappears (completely crashes).
>
>
>
>     Has anyone else had a similar problem and can help me work out how to get the layers to load? I suspect the issue is the way the view is configured in SQL Server however I also wonder if I need to investigate the 3.16 crash and potentially log that as a bug as it is not handling the crash with the normal message the application just closes without warning?
>
>
>
>
>
> Can you check if GeoServer is returning GML or an error message when you make a WFS request? But I don't think that QGis should crash no matter what is in the response.
>
>
>
> Ian
>
>
>
> This e-mail and any files transmitted with it are intended solely for
> the use of the individual or entity to whom they are addressed. It may
> contain unclassified but sensitive or protectively marked material and
> should be handled accordingly. Unless you are the named addressee (or
> authorised to receive it for the addressee) you may not copy or use
> it, or disclose it to anyone else. If you have received this
> transmission in error please notify the sender immediately. All
> traffic may be subject to recording and/or monitoring in accordance
> with relevant legislation. Any views expressed in this message are
> those of the individual sender, except where the sender specifies and
> with authority, states them to be the views of Dorset Council. Dorset
> Council does not accept service of documents by fax or other
> electronic means. Virus checking: Whilst all reasonable steps have
> been taken to ensure that this electronic communication and its
> attachments whether encoded, encrypted or otherwise supplied are free
> from computer viruses, Dorset Council accepts no liability in respect
> of any loss, cost, damage or expense suffered as a result of accessing
> this message or any of its attachments. For information on how Dorset
> Council processes your information, please see
> www.dorsetcouncil.gov.uk/416433<http://www.dorsetcouncil.gov.uk/416433>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>

This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/416433<http://www.dorsetcouncil.gov.uk/416433>
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


--
Ian Turton
This e-mail and any files transmitted with it are intended solely for the use of the individual or entity to whom they are addressed. It may contain unclassified but sensitive or protectively marked material and should be handled accordingly. Unless you are the named addressee (or authorised to receive it for the addressee) you may not copy or use it, or disclose it to anyone else. If you have received this transmission in error please notify the sender immediately. All traffic may be subject to recording and/or monitoring in accordance with relevant legislation. Any views expressed in this message are those of the individual sender, except where the sender specifies and with authority, states them to be the views of Dorset Council. Dorset Council does not accept service of documents by fax or other electronic means. Virus checking: Whilst all reasonable steps have been taken to ensure that this electronic communication and its attachments whether encoded, encrypted or otherwise supplied are free from computer viruses, Dorset Council accepts no liability in respect of any loss, cost, damage or expense suffered as a result of accessing this message or any of its attachments. For information on how Dorset Council processes your information, please see www.dorsetcouncil.gov.uk/416433
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201130/7b49ebeb/attachment-0001.html>

From Jacky.VOLPES-EXT at canal-de-provence.com  Thu Nov 26 08:56:23 2020
From: Jacky.VOLPES-EXT at canal-de-provence.com (VOLPES-EXT, Jacky)
Date: Thu, 26 Nov 2020 16:56:23 -0000
Subject: [QGIS-Developer] Modify project before loading
In-Reply-To: <CABgOYCfyk5dWLPFm2vm9ec-5uj5d0wLFDYmHoFS4EktJvbdAkQ@mail.gmail.com>
References: <064a3f59395e49a993f15fd54042c39a@SCPEX2K13-2.scp.fr>
 <7a951b5db69e7aaa6d1a79cd5eec0e85@carto.net>
 <CABgOYCfyk5dWLPFm2vm9ec-5uj5d0wLFDYmHoFS4EktJvbdAkQ@mail.gmail.com>
Message-ID: <989079fc283f49e883770e857c8890cf@SCPEX2K13-2.scp.fr>

Thanks Regis and Andeas ?

The big sed on the filesystem could work on .qgs files, but what about .qgz files ? ?

Regards

Jacky Volpes
D?veloppeur python
HR-Team pour la Soci?t? du Canal de Provence
Direction des Syst?mes d?Information

T?l. 04 42 66 70 34
Le Tholonet - CS 70064 - 13182 Aix-en-Provence CEDEX 5
[cid:image001.png at 01D34C22.F8A861A0]

De : R?gis Haubourg [mailto:regis.haubourg at gmail.com]
Envoy? : jeudi 26 novembre 2020 17:52
? : Andreas Neumann <a.neumann at carto.net>
Cc : VOLPES-EXT, Jacky <Jacky.VOLPES-EXT at canal-de-provence.com>; QGIS Developers List <qgis-developer at lists.osgeo.org>
Objet : Re: [QGIS-Developer] Modify project before loading

I can't agree more with Andreas.
The best path is to migrate your project pgservicefile. You will have to handle this as a migration , saving before all project files, and applying a script to replace datasource definitions ( a shell or python script can help, but a big sed on the file system also does the job).

As you are on this, I suggest you add some default connection options as you are on it to preserve your database and speed up table listing as suggested here :
[image.png]

Best regards
R?gis
m/RegisHaubourg/status/https://pbs.twimg.com/media/Eats5wgWkAA0VdV?format=png&name=900x9001273231305199804417?s=20https://twitter.com/RegisHaubourg/status/1273231305199804417?s=2https://pbs.twimg.com/media/Eats5wgWkAA0VdV?format=png&name=900x900ttps://twitter.com/RegisHaubourg/status/1273231305199804417?s=20

Le jeu. 26 nov. 2020 ? 16:20, Andreas Neumann <a.neumann at carto.net<mailto:a.neumann at carto.net>> a ?crit :

Hi Jacky,

I recommend to use PostgreSQL service names instead of hostname/port/db settings. The projects would connect the layers to a central pg_service.conf file that you can put on a network drive. On the day the db hostname changes, you can centrally switch the hostname/port/db in just a single text-file.

This also helps to switch between test/integration/production environments by simply pointing to a different pg_service.conf file (see Options --> System --> Environment and user defined variables. You can use either PGSERVICEFILE or PGSYSCONFDIR).

Seems to me easier and more flexible than what you have in mind with scripting and signals.

Greetings,

Andreas

On 2020-11-26 16:06, VOLPES-EXT, Jacky wrote:

Hello QGIS dev team ?



I need to modify QGIS project file at reading (loading) time.

The database hostname used in the company is changing soon, and I need this to be transparent for the users.



The problem is that all their layers with the old database connections (uri) will trigger a connection error, having the old hostname.

The idea is to update the .qgs file that is being opened with the new hostname with a text-replacement plugin, save the file, and eventually load it in QGIS.

So that the user will not see any difference or error message.



Sadly, the QgsProject.readLayer signal is sent after the project has been loaded, hence after the connection error messages?



Any suggestion/idea welcome!

Thanks,



Jacky Volpes
D?veloppeur python

HR-Team pour la Soci?t? du Canal de Provence
Direction des Syst?mes d?Information

T?l. 04 42 66 70 34
Le Tholonet - CS 70064 - 13182 Aix-en-Provence CEDEX 5
[cid:image001.png at 01D34C22.F8A861A0]



_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org<mailto:QGIS-Developer at lists.osgeo.org>
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201126/eab62c6a/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 4649 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201126/eab62c6a/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 79211 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201126/eab62c6a/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.jpg
Type: image/jpeg
Size: 4649 bytes
Desc: image003.jpg
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20201126/eab62c6a/attachment-0003.jpg>

