From noreply at qgis.org  Wed Aug  1 09:44:33 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Wed, 01 Aug 2018 16:44:33 -0000
Subject: [QGIS-Developer] Plugin [1515] DSGTools Op approval notification.
Message-ID: <20180801164433.23932.52707@2c6504964296>


Plugin DSGTools Op approval by pcav.
The plugin version "[1515] DSGTools Op 1.0" is now approved
Link: http://plugins.qgis.org/plugins/DSGTools_Op/

From tech_dev at wildintellect.com  Wed Aug  1 10:06:48 2018
From: tech_dev at wildintellect.com (Alex M)
Date: Wed, 1 Aug 2018 10:06:48 -0700
Subject: [QGIS-Developer] Question on FGDB support for "Save As" /
 "Export"
In-Reply-To: <CAB28AshM3fRE9xGR7Ft6if_qA3AG2T=-toFNtNkVfXrcjp=+WQ@mail.gmail.com>
References: <32ecab2a5134210d11f0137dc9326831@carto.net>
 <CAB28AshM3fRE9xGR7Ft6if_qA3AG2T=-toFNtNkVfXrcjp=+WQ@mail.gmail.com>
Message-ID: <c96f8197-dd1b-f1f8-9310-a70f257827d3@wildintellect.com>

On 07/31/2018 02:28 PM, Nyall Dawson wrote:
> On Tue, 31 Jul 2018 at 20:06, Andreas Neumann <a.neumann at carto.net> wrote:
> 
>>
>> About issue 2:
>>
>> @Jürgen: can you include the necessary gdal-filegdb package also in the standalone installer - or are there license problems?
>>
> 
> -1 to packaging the gdal-filegdb package by default. My rationale:
> 
> - I've experienced lots of issues with this driver. For one, it's much
> slower to open gdbs, especially over networks. I've also hit bugs in
> the past where the driver doesn't handle certain subset queries in the
> same way as other ogr drivers (I can't recall the exact details, but I
> think the particular issue I hit was fixed.)
> 
> - The driver has known issues. From
> https://www.gdal.org/drv_filegdb.html, there's e.g. this important
> one: "The SDK is known to be unable to open layers with particular
> spatial reference systems.". And then on
> https://www.gdal.org/drv_openfilegdb.html there's a list of features
> that we'd lose by changing to the filegdb driver:
> 
> "Advantages of the OpenFileGDB driver:
> 
> Can read ArcGIS 9.X Geodatabases, and not only 10 or above.
> Can open layers with any spatial reference system.
> Thread-safe (i.e. datasources can be processed in parallel).
> Uses the VSI Virtual File API, enabling the user to read a Geodatabase
> in a ZIP file or stored on a HTTP server.
> Faster on databases with a big number of fields.
> Does not depend on a third-party library.
> Robust against corrupted Geodatabase files.
> 
> Drawbacks of the OpenFileGDB driver:
> 
> Read-only.
> Cannot use spatial indexes.
> Cannot read data from compressed data in CDF format (Compressed Data Format)."
> 
> That's a pretty significant loss in my opinion - especially the point
> about the closed source driver being non thread-safe.
> 
> - The OpenFileGDB driver is very heavily tested for robustness and
> security issues with the ongoing fuzz testing of GDAL drivers.
> 
> - Last, but not least, we'd lose the ability to actually fix issues.
> We'd be dependent on bug fixes in the ESRI SDK, and be powerless to
> get fixes we need implemented.
> 
> 
> These are all significant issues, and the moment we make the switch to
> the closed source driver and give users write support, there's no way
> we can revert this decision and remove the ability to edit GDB files.
> It's not a decision we can make lightly.
> 
> I'd rather leave this decision up to individual users (and those who
> make in-house software packages for deployment in their organisation)
> to make. I.e. leave it as is, where it's effectively an "opt-in"
> change. And push people to helping make the open driver better, as
> it's a more sustainable solution in the long term.
> 
> (Lastly, a rant: I hate file geodatabases. They are the WORST format
> for spatial data that I've seen. It's like ESRI took everything which
> people disliked about shapefiles and magnified those. Instead of a
> handful of files, we get hundreds. Instead of minor user confusion
> about how they need to package all the dependent files, we get this
> super-confusing folder/file mix, which causes all sorts of issues for
> non-ArcGIS software because it just breaks fundamental file management
> assumptions. And they are SLOW. So SLOOOOOOW. Even in ArcGIS they are
> slow to open and manage. GIve me shapefiles over this monstrosity any
> day.)
> 
> Nyall

I agree if there's no way to easily include both drivers and allow the
user to select which to use, the OpenFileGDB should be the default
installed. Perhaps we can make it selectable?

Also, a note on the original question/reason. Are users aware that Arc
products can read gpkg and spatialite formats (since at least ArcMap
10.3). Geopackage is an OGC specification, this to me should provide
leverage for people to argue that it's an acceptable deliverable fully
compatible with ESRI.

Thanks,
Alex


From nyall.dawson at gmail.com  Wed Aug  1 15:57:42 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 2 Aug 2018 08:57:42 +1000
Subject: [QGIS-Developer] 32 by 3.2?
In-Reply-To: <CAB28Asi6vds=5qkC5HntG8mGCP9zskHHY3bM5i0oiE6C2MvLcg@mail.gmail.com>
References: <CAB28AshEOT6EwAKYAfJu-tUKravTeiOdCeK2pmQ9ugU9YZg3QA@mail.gmail.com>
 <CAB28Asipe9cpD0wJ=3kg2aGoTGWwKJZaawXSGd-1SFCOo8zi+Q@mail.gmail.com>
 <CAB28AsjsjOH7Osv3vwyrtJQ2nKVcwX=z1LeY_BLWm6eqTui5TA@mail.gmail.com>
 <CAB28Asgdcg-_F+uvHAYrq5iifMd4wbfa9S=8xmg_deKg4wteJQ@mail.gmail.com>
 <853a91dc-db90-7b7d-9054-3a67b1263518@opengis.ch>
 <CAECJsSq7Y2NHhLAVW0sG5q1W8ObK9Uo9g-0v-UUPg5xugy16pA@mail.gmail.com>
 <CAB28Asi6vds=5qkC5HntG8mGCP9zskHHY3bM5i0oiE6C2MvLcg@mail.gmail.com>
Message-ID: <CAB28Asj=NW9SpaM+4PQcqGKsTiT2sAmgWzcVH4OJfvQGYz-mwg@mail.gmail.com>

On Fri, 22 Jun 2018 at 09:20, Nyall Dawson <nyall.dawson at gmail.com> wrote:

> - I'd love to see us get below 25 open PRs (so that they fit on a
> single page on GitHub), but honestly I think it's probably not a
> realistic (or even desirable) goal for a project the size of QGIS.
> Maintaining a queue size of between 30-40 open requests is an
> achievable target IMO. It's small enough to be able to track them all
> without any being neglected.

For those who don't follow the github activity religiously: we are
current down to just 9 PRs, and have been averaging about 15 open PRs
for the last couple of weeks.

We've almost hit a new milestone: having less open PRs then GDAL!

Nyall

From Alain.Ferraton at developpement-durable.gouv.fr  Wed Aug  1 22:51:24 2018
From: Alain.Ferraton at developpement-durable.gouv.fr (FERRATON Alain (Chef de groupe) - SG/SPSSI/CPII/DOO/ET)
Date: Thu, 2 Aug 2018 07:51:24 +0200
Subject: [QGIS-Developer] QGIS 3.x $scale in expression ?
Message-ID: <bfba510d-ca49-f3ab-53e6-20387517daf5@developpement-durable.gouv.fr>

Hi,

I no longer see in QGIS 3.x the $scale function in expressions?

is there a possibility to recover the scale of the canvas ?

Regards
Alain

-- 

FERRATON Alain
Ministère de la Transition écologique et solidaire (MTES)
SG/SPSSI/CPII/DOO
Chef du groupe Expertise Technique
02.40.12.84.08


From cavallini at faunalia.it  Thu Aug  2 00:41:39 2018
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 2 Aug 2018 09:41:39 +0200
Subject: [QGIS-Developer] 32 by 3.2?
In-Reply-To: <CAB28Asj=NW9SpaM+4PQcqGKsTiT2sAmgWzcVH4OJfvQGYz-mwg@mail.gmail.com>
References: <CAB28AshEOT6EwAKYAfJu-tUKravTeiOdCeK2pmQ9ugU9YZg3QA@mail.gmail.com>
 <CAB28Asipe9cpD0wJ=3kg2aGoTGWwKJZaawXSGd-1SFCOo8zi+Q@mail.gmail.com>
 <CAB28AsjsjOH7Osv3vwyrtJQ2nKVcwX=z1LeY_BLWm6eqTui5TA@mail.gmail.com>
 <CAB28Asgdcg-_F+uvHAYrq5iifMd4wbfa9S=8xmg_deKg4wteJQ@mail.gmail.com>
 <853a91dc-db90-7b7d-9054-3a67b1263518@opengis.ch>
 <CAECJsSq7Y2NHhLAVW0sG5q1W8ObK9Uo9g-0v-UUPg5xugy16pA@mail.gmail.com>
 <CAB28Asi6vds=5qkC5HntG8mGCP9zskHHY3bM5i0oiE6C2MvLcg@mail.gmail.com>
 <CAB28Asj=NW9SpaM+4PQcqGKsTiT2sAmgWzcVH4OJfvQGYz-mwg@mail.gmail.com>
Message-ID: <f97dbc45-1b0a-b604-36b0-2ec6f7dd2b63@faunalia.it>

great news, thanks for taking care of this.

Cheers.


On 08/02/2018 12:57 AM, Nyall Dawson wrote:
> On Fri, 22 Jun 2018 at 09:20, Nyall Dawson <nyall.dawson at gmail.com> wrote:
>
>> - I'd love to see us get below 25 open PRs (so that they fit on a
>> single page on GitHub), but honestly I think it's probably not a
>> realistic (or even desirable) goal for a project the size of QGIS.
>> Maintaining a queue size of between 30-40 open requests is an
>> achievable target IMO. It's small enough to be able to track them all
>> without any being neglected.
> For those who don't follow the github activity religiously: we are
> current down to just 9 PRs, and have been averaging about 15 open PRs
> for the last couple of weeks.
>
> We've almost hit a new milestone: having less open PRs then GDAL!
>
> Nyall
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From a.neumann at carto.net  Thu Aug  2 00:45:34 2018
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 02 Aug 2018 09:45:34 +0200
Subject: [QGIS-Developer] QGIS 3.x $scale in expression ?
In-Reply-To: <bfba510d-ca49-f3ab-53e6-20387517daf5@developpement-durable.gouv.fr>
References: <bfba510d-ca49-f3ab-53e6-20387517daf5@developpement-durable.gouv.fr>
Message-ID: <97d1d7dc5b42eadda665dc9bb474e558@carto.net>

Hi Alain, 

This has been changed in 3.x as there is no single map anymore, but
there could be multiple map canvases per project. 

However, there is a new variable called "@map_scale" which you can use
instead. Note that this variable is only available in some context, e.g.
if you work on the symbology or labeling of a layer representation,
where it is clear what canvas you are refering to. 

Hope this helps, 

Andreas 

On 2018-08-02 07:51, FERRATON Alain (Chef de groupe) -
SG/SPSSI/CPII/DOO/ET wrote:

> Hi,
> 
> I no longer see in QGIS 3.x the $scale function in expressions?
> 
> is there a possibility to recover the scale of the canvas ?
> 
> Regards
> Alain
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180802/d8660155/attachment.html>

From a.neumann at carto.net  Thu Aug  2 01:21:55 2018
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 02 Aug 2018 10:21:55 +0200
Subject: [QGIS-Developer] Question on FGDB support for "Save As" /
 "Export"
In-Reply-To: <CAB28AshM3fRE9xGR7Ft6if_qA3AG2T=-toFNtNkVfXrcjp=+WQ@mail.gmail.com>
References: <32ecab2a5134210d11f0137dc9326831@carto.net>
 <CAB28AshM3fRE9xGR7Ft6if_qA3AG2T=-toFNtNkVfXrcjp=+WQ@mail.gmail.com>
Message-ID: <d37c241d701a1ecc7d1f6479cf5ac915@carto.net>

Hi Nyall, 

I agree - these are valid reasons not to replace the open source FGDB
driver with the closed source one. 

However - I wonder if there would be a way to support both drivers? The
Open Source driver as default for reading. And the FGDB driver for
writing? 

Note that I don't want to encourage usage of FGDB  - I am no fan either.
But it would be nice if we could write them in case a client demands
delivery in FGDB format - which can be the case in some contracts. 

Thanks for keeping the discussion going. 

Andreas 

On 2018-07-31 23:28, Nyall Dawson wrote:

> On Tue, 31 Jul 2018 at 20:06, Andreas Neumann <a.neumann at carto.net> wrote:
> 
>> About issue 2:
>> 
>> @Jürgen: can you include the necessary gdal-filegdb package also in the standalone installer - or are there license problems?
> 
> -1 to packaging the gdal-filegdb package by default. My rationale:
> 
> - I've experienced lots of issues with this driver. For one, it's much
> slower to open gdbs, especially over networks. I've also hit bugs in
> the past where the driver doesn't handle certain subset queries in the
> same way as other ogr drivers (I can't recall the exact details, but I
> think the particular issue I hit was fixed.)
> 
> - The driver has known issues. From
> https://www.gdal.org/drv_filegdb.html, there's e.g. this important
> one: "The SDK is known to be unable to open layers with particular
> spatial reference systems.". And then on
> https://www.gdal.org/drv_openfilegdb.html there's a list of features
> that we'd lose by changing to the filegdb driver:
> 
> "Advantages of the OpenFileGDB driver:
> 
> Can read ArcGIS 9.X Geodatabases, and not only 10 or above.
> Can open layers with any spatial reference system.
> Thread-safe (i.e. datasources can be processed in parallel).
> Uses the VSI Virtual File API, enabling the user to read a Geodatabase
> in a ZIP file or stored on a HTTP server.
> Faster on databases with a big number of fields.
> Does not depend on a third-party library.
> Robust against corrupted Geodatabase files.
> 
> Drawbacks of the OpenFileGDB driver:
> 
> Read-only.
> Cannot use spatial indexes.
> Cannot read data from compressed data in CDF format (Compressed Data Format)."
> 
> That's a pretty significant loss in my opinion - especially the point
> about the closed source driver being non thread-safe.
> 
> - The OpenFileGDB driver is very heavily tested for robustness and
> security issues with the ongoing fuzz testing of GDAL drivers.
> 
> - Last, but not least, we'd lose the ability to actually fix issues.
> We'd be dependent on bug fixes in the ESRI SDK, and be powerless to
> get fixes we need implemented.
> 
> These are all significant issues, and the moment we make the switch to
> the closed source driver and give users write support, there's no way
> we can revert this decision and remove the ability to edit GDB files.
> It's not a decision we can make lightly.
> 
> I'd rather leave this decision up to individual users (and those who
> make in-house software packages for deployment in their organisation)
> to make. I.e. leave it as is, where it's effectively an "opt-in"
> change. And push people to helping make the open driver better, as
> it's a more sustainable solution in the long term.
> 
> (Lastly, a rant: I hate file geodatabases. They are the WORST format
> for spatial data that I've seen. It's like ESRI took everything which
> people disliked about shapefiles and magnified those. Instead of a
> handful of files, we get hundreds. Instead of minor user confusion
> about how they need to package all the dependent files, we get this
> super-confusing folder/file mix, which causes all sorts of issues for
> non-ArcGIS software because it just breaks fundamental file management
> assumptions. And they are SLOW. So SLOOOOOOW. Even in ArcGIS they are
> slow to open and manage. GIve me shapefiles over this monstrosity any
> day.)
> 
> Nyall
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180802/5bc1d30c/attachment.html>

From jef at norbit.de  Thu Aug  2 01:45:31 2018
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Thu, 2 Aug 2018 10:45:31 +0200
Subject: [QGIS-Developer] Question on FGDB support for "Save As" /
	"Export"
In-Reply-To: <32ecab2a5134210d11f0137dc9326831@carto.net>
References: <32ecab2a5134210d11f0137dc9326831@carto.net>
Message-ID: <20180802084531.5c4jxwqwao6mseff@norbit.de>

Hi Andreas,

On Tue, 31. Jul 2018 at 12:05:52 +0200, Andreas Neumann wrote:
> 2. Currently, it can only be enabled in the OSGeo4W version by selecting
> the "gdal-filegdb" package. The standalone installer does not include
> this package. 

> About issue 2: 
 
> @Jürgen: can you include the necessary gdal-filegdb package also in the
> standalone installer - or are there license problems? 

The standalone is just a partly snapshot of OSGeo4W (ie. the (virtual)
qgis-full package and all it's dependencies).  Any issues would already apply
to OSGeo4W.

The standalone includes the OSGeo4W Installer so you can add not included
packages afterwards.  Not very convienient of course for people that always
need filegdb.

Inclusion wouldn't be a problem - and just require adding gdal-filegdb as
dependency to the qgis-full.

Lack of (obvious) control which driver to use might be a problem for use (i.e.
setting the environment variable OGR_SKIP) - if you want to switch between the
two drivers.  I don't have much experience with FileGDB.  I only very rarely
got data in FileGDB.


Jürgen

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden             http://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180802/fe512de6/attachment-0001.sig>

From nyall.dawson at gmail.com  Thu Aug  2 02:34:54 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 2 Aug 2018 19:34:54 +1000
Subject: [QGIS-Developer] Question on FGDB support for "Save As" /
	"Export"
In-Reply-To: <d37c241d701a1ecc7d1f6479cf5ac915@carto.net>
References: <32ecab2a5134210d11f0137dc9326831@carto.net>
 <CAB28AshM3fRE9xGR7Ft6if_qA3AG2T=-toFNtNkVfXrcjp=+WQ@mail.gmail.com>
 <d37c241d701a1ecc7d1f6479cf5ac915@carto.net>
Message-ID: <CAB28Ashv67KVfU-CA2Q=TmznvtTc27OysHD7CZMy=fpe-5Kwqg@mail.gmail.com>

On Thu, 2 Aug 2018 at 18:21, Andreas Neumann <a.neumann at carto.net> wrote:
> However - I wonder if there would be a way to support both drivers? The Open Source driver as default for reading. And the FGDB driver for writing?

That's a great idea!

In the QGIS world we'd have to compromise a bit here and not allow
editing of existing layers (as you'd normally get with the closed
driver). I.e. we'd only use it when writing an existing layer out to a
copy on disk (e.g. via right click menu on a vector layer). But still,
allowing layers to be saved as a geodatabase would be a step forward.

I'm not sure how this change would need to be made though. At the
moment if you install the closed driver in osgeo4w it's always used,
for both reading and writing layers. Even/Jürgen is this an osgeo4w
thing or a GDAL thing? Is it possible to have two drivers installed
for the one format and always read using the closed driver?

Another complication is that we'd still need a way for users to opt in
to using the closed driver for reading - as that may sometimes be
required too... So not a straightforward change, but still one that
I'd support!

Nyall

From alexander.bruy at gmail.com  Thu Aug  2 02:42:16 2018
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Thu, 2 Aug 2018 12:42:16 +0300
Subject: [QGIS-Developer] Question on FGDB support for "Save As" /
	"Export"
In-Reply-To: <CAB28Ashv67KVfU-CA2Q=TmznvtTc27OysHD7CZMy=fpe-5Kwqg@mail.gmail.com>
References: <32ecab2a5134210d11f0137dc9326831@carto.net>
 <CAB28AshM3fRE9xGR7Ft6if_qA3AG2T=-toFNtNkVfXrcjp=+WQ@mail.gmail.com>
 <d37c241d701a1ecc7d1f6479cf5ac915@carto.net>
 <CAB28Ashv67KVfU-CA2Q=TmznvtTc27OysHD7CZMy=fpe-5Kwqg@mail.gmail.com>
Message-ID: <CALuHMPBA4HXCdkpiYNfAN8RJwo5nxJxHGN5o2M7cyNtwUTpyGg@mail.gmail.com>

чт, 2 серп. 2018 о 12:35 Nyall Dawson <nyall.dawson at gmail.com> пише:
> I'm not sure how this change would need to be made though. At the
> moment if you install the closed driver in osgeo4w it's always used,
> for both reading and writing layers. Even/Jürgen is this an osgeo4w
> thing or a GDAL thing? Is it possible to have two drivers installed
> for the one format and always read using the closed driver?

AFAIK, you can select which driver to use with envronment variable.

> Another complication is that we'd still need a way for users to opt in
> to using the closed driver for reading - as that may sometimes be
> required too... So not a straightforward change, but still one that
> I'd support!

As I understand, we need something like existing rasters drivers list
in the QGIS setttings where one can choose which drivers should be
used. There is already ticket about this https://issues.qgis.org/issues/10313

-- 
Alexander Bruy

From noreply at qgis.org  Thu Aug  2 05:38:41 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 02 Aug 2018 12:38:41 -0000
Subject: [QGIS-Developer] Plugin [1515] DSGTools Op approval notification.
Message-ID: <20180802123841.4780.96177@2c6504964296>


Plugin DSGTools Op approval by pcav.
The plugin version "[1515] DSGTools Op 1.1" is now approved
Link: http://plugins.qgis.org/plugins/DSGTools_Op/

From even.rouault at spatialys.com  Thu Aug  2 06:17:41 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 02 Aug 2018 15:17:41 +0200
Subject: [QGIS-Developer] Question on FGDB support for "Save As" /
	"Export"
In-Reply-To: <CAB28Ashv67KVfU-CA2Q=TmznvtTc27OysHD7CZMy=fpe-5Kwqg@mail.gmail.com>
References: <32ecab2a5134210d11f0137dc9326831@carto.net>
 <d37c241d701a1ecc7d1f6479cf5ac915@carto.net>
 <CAB28Ashv67KVfU-CA2Q=TmznvtTc27OysHD7CZMy=fpe-5Kwqg@mail.gmail.com>
Message-ID: <1855557.db2YZO1Hkz@even-i700>

On jeudi 2 août 2018 19:34:54 CEST Nyall Dawson wrote:
> On Thu, 2 Aug 2018 at 18:21, Andreas Neumann <a.neumann at carto.net> wrote:
> > However - I wonder if there would be a way to support both drivers? The
> > Open Source driver as default for reading. And the FGDB driver for
> > writing?
> That's a great idea!
> 
> In the QGIS world we'd have to compromise a bit here and not allow
> editing of existing layers (as you'd normally get with the closed
> driver). I.e. we'd only use it when writing an existing layer out to a
> copy on disk (e.g. via right click menu on a vector layer). But still,
> allowing layers to be saved as a geodatabase would be a step forward.
> 
> I'm not sure how this change would need to be made though. At the
> moment if you install the closed driver in osgeo4w it's always used,
> for both reading and writing layers. Even/Jürgen is this an osgeo4w
> thing or a GDAL thing? Is it possible to have two drivers installed
> for the one format and always read using the closed driver?

As the FileGDB driver is loaded as a plugin by GDAL, it is registered first, 
and then probed first when opening a dataset.
Banning one of the driver can be done by defining GDAL_SKIP=FileGDB or 
GDAL_SKIP=OpenFileGDB and calling GDALAllRegister() again.
It is also possible to control which drivers are allowed at dataset opening 
with GDALOpenEx() and the papszDriversAllowed argument (but that means you 
need to know this is a FileGeodatabase)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From noreply at qgis.org  Thu Aug  2 09:44:27 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 02 Aug 2018 16:44:27 -0000
Subject: [QGIS-Developer] Plugin [1516] QGIS Full Motion Video approval
	notification.
Message-ID: <20180802164427.4781.72629@2c6504964296>


Plugin QGIS Full Motion Video approval by pcav.
The plugin version "[1516] QGIS Full Motion Video 1.1" is now approved
Link: http://plugins.qgis.org/plugins/QGIS_FMV/

From noreply at qgis.org  Fri Aug  3 00:33:55 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Fri, 03 Aug 2018 07:33:55 -0000
Subject: [QGIS-Developer] Plugin [440] Visibility Analysis approval
	notification.
Message-ID: <20180803073355.26354.88415@2c6504964296>


Plugin Visibility Analysis approval by pcav.
The plugin version "[440] Visibility Analysis 0.6.2 Experimental" is now approved
Link: http://plugins.qgis.org/plugins/ViewshedAnalysis/

From noreply at qgis.org  Fri Aug  3 01:59:11 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Fri, 03 Aug 2018 08:59:11 -0000
Subject: [QGIS-Developer] Plugin [957] GeODinQGIS approval notification.
Message-ID: <20180803085911.26355.10691@2c6504964296>


Plugin GeODinQGIS approval by pcav.
The plugin version "[957] GeODinQGIS 1.2" is now approved
Link: http://plugins.qgis.org/plugins/GeODinQGIS/

From matthias at opengis.ch  Fri Aug  3 06:59:42 2018
From: matthias at opengis.ch (Matthias Kuhn)
Date: Fri, 3 Aug 2018 15:59:42 +0200
Subject: [QGIS-Developer] GeoPackages with constraint problems
Message-ID: <5da3820d-c9a8-0a26-89e3-7cab6f0225c5@opengis.ch>

Hi everyone,

I recently gave a course where geopackages were used as datasets. Those
geopackages had foreign key constraints (among others) activated. While
editing those files, at least on one machine, someone managed to get it
into a "corrupted" state (layer disappeared). Trying to load this layer
later on will result in a bad layer. The only thing we have is a tiny
message in the message log informing about "pragma foreign_key_check on
'file.gpkg' failed. You can disable this check by setting the
OGR_GPKG_FOREIGN_KEY_CHECK configuration option to NO".

I think it's quite strange that QGIS/OGR manages to bring a GeoPackage
into a corrupted state and then denies to open it.

* It would - I guess - be preferable to prevent a GeoPackage from going
into such a state

* Since it appears to be quite easy to bring a dataset into such a state
(although I'm afraid I can't provide detailed steps) QGIS should by
default probably rather open (and warn) or warn and give a possibility
to still open.

Did others experience this as well and have more ideas what to do?

Thanks and best wishes
Matthias

From noreply at qgis.org  Fri Aug  3 11:08:45 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Fri, 03 Aug 2018 18:08:45 -0000
Subject: [QGIS-Developer] Plugin [1364] UMEP approval notification.
Message-ID: <20180803180845.26356.33535@2c6504964296>


Plugin UMEP approval by pcav.
The plugin version "[1364] UMEP 1.5" is now approved
Link: http://plugins.qgis.org/plugins/UMEP/

From noreply at qgis.org  Fri Aug  3 11:12:34 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Fri, 03 Aug 2018 18:12:34 -0000
Subject: [QGIS-Developer] Plugin [294] qProf approval notification.
Message-ID: <20180803181234.26356.28566@2c6504964296>


Plugin qProf approval by pcav.
The plugin version "[294] qProf 0.4.1" is now approved
Link: http://plugins.qgis.org/plugins/qProf/

From even.rouault at spatialys.com  Fri Aug  3 11:40:47 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 03 Aug 2018 20:40:47 +0200
Subject: [QGIS-Developer] GeoPackages with constraint problems
In-Reply-To: <5da3820d-c9a8-0a26-89e3-7cab6f0225c5@opengis.ch>
References: <5da3820d-c9a8-0a26-89e3-7cab6f0225c5@opengis.ch>
Message-ID: <1549794.06pyOKaaQo@even-i700>

Matthias,

Looking a bit at this, I see from sqlite doc that foreign key constraints are 
only enforced if the user runs

PRAGMA foreign_keys = ON

which OGR does no activate by default, hence the easyness to break them.

This can be enabled by defining the configuration option/environment variable
OGR_SQLITE_PRAGMA="foreign_keys=ON"

I'm contemplating if the GPKG driver should do that by default (would probably 
makes sense since at opening it runs the PRAGMA foreign_key_check)

Even

> Hi everyone,
> 
> I recently gave a course where geopackages were used as datasets. Those
> geopackages had foreign key constraints (among others) activated. While
> editing those files, at least on one machine, someone managed to get it
> into a "corrupted" state (layer disappeared). Trying to load this layer
> later on will result in a bad layer. The only thing we have is a tiny
> message in the message log informing about "pragma foreign_key_check on
> 'file.gpkg' failed. You can disable this check by setting the
> OGR_GPKG_FOREIGN_KEY_CHECK configuration option to NO".
> 
> I think it's quite strange that QGIS/OGR manages to bring a GeoPackage
> into a corrupted state and then denies to open it.
> 
> * It would - I guess - be preferable to prevent a GeoPackage from going
> into such a state
> 
> * Since it appears to be quite easy to bring a dataset into such a state
> (although I'm afraid I can't provide detailed steps) QGIS should by
> default probably rather open (and warn) or warn and give a possibility
> to still open.
> 
> Did others experience this as well and have more ideas what to do?
> 
> Thanks and best wishes
> Matthias
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From noreply at qgis.org  Fri Aug  3 13:12:20 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Fri, 03 Aug 2018 20:12:20 -0000
Subject: [QGIS-Developer] Plugin [1364] UMEP approval notification.
Message-ID: <20180803201220.26353.9573@2c6504964296>


Plugin UMEP approval by pcav.
The plugin version "[1364] UMEP 3.5.1" is now approved
Link: http://plugins.qgis.org/plugins/UMEP/

From noreply at qgis.org  Sun Aug  5 05:35:39 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Sun, 05 Aug 2018 12:35:39 -0000
Subject: [QGIS-Developer] Plugin [725] beePen approval notification.
Message-ID: <20180805123539.7853.21823@2c6504964296>


Plugin beePen approval by pcav.
The plugin version "[725] beePen 0.2.0" is now approved
Link: http://plugins.qgis.org/plugins/beePen/

From noreply at qgis.org  Sun Aug  5 13:27:16 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Sun, 05 Aug 2018 20:27:16 -0000
Subject: [QGIS-Developer] Plugin [792] EqHazard approval notification.
Message-ID: <20180805202716.7852.4014@2c6504964296>


Plugin EqHazard approval by pcav.
The plugin version "[792] EqHazard 0.1.0" is now approved
Link: http://plugins.qgis.org/plugins/EqHazard/

From jwood911 at gmail.com  Sun Aug  5 14:04:27 2018
From: jwood911 at gmail.com (James Wood)
Date: Sun, 5 Aug 2018 16:04:27 -0500
Subject: [QGIS-Developer] Question on FGDB support for "Save As"
	/	"Export"
In-Reply-To: <1855557.db2YZO1Hkz@even-i700>
References: <32ecab2a5134210d11f0137dc9326831@carto.net>
 <d37c241d701a1ecc7d1f6479cf5ac915@carto.net>
 <CAB28Ashv67KVfU-CA2Q=TmznvtTc27OysHD7CZMy=fpe-5Kwqg@mail.gmail.com>
 <1855557.db2YZO1Hkz@even-i700>
Message-ID: <ABE62F89-FE55-4045-A4C5-6B8226445462@gmail.com>

As a QGIS and ArcGIS user, I am glad the file geodatabase support is there, so please don’t take the following negatively. I am the Spatial Infrastructure Manager for a statewide Next Generation 9-1-1 implementation here in the U.S., and we have successfully shared data with local public safety agencies using GeoPackage generated from the Esri suite. Alex had mentioned this earlier, but I wanted to elaborate so you could pass it on to your constituents if need be.  

Users can create SpatiaLite or GeoPackage (v1.0, 1.1, 1.2) using either the Python Console or a Python script stored in the Workspace toolset under the Data Management Tools toolbox. This works at all license levels (Basic, Standard, or Advanced) and in Desktop (ArcMap\ArcCatalog) and ArcGIS Pro. 

Here is a link to the Desktop help which, in this case, is the same for Pro:
http://desktop.arcgis.com/en/arcmap/latest/tools/data-management-toolbox/create-sqlite-database.htm

Once created, it’s easy to drag-and-drop simple feature classes (points, lines, and polygons) from ESRI geodatabases into the OGC DB, and from OGC to Esri. We have no reported errors from QGIS users in the field with this type of data exchange, and vice versa. From my perspective, there is little use for file geodatabase exchange unless the other user is at a lesser ArcGIS Desktop version (as referenced by Alex). This also promotes the OGC portable database model over the use of shapefiles, in which we have seen degradation of attributes because of the DBF restrictions. 

v/r
James

Sent from my iPhone

> On Aug 2, 2018, at 08:17, Even Rouault <even.rouault at spatialys.com> wrote:
> 
>> On jeudi 2 août 2018 19:34:54 CEST Nyall Dawson wrote:
>>> On Thu, 2 Aug 2018 at 18:21, Andreas Neumann <a.neumann at carto.net> wrote:
>>> However - I wonder if there would be a way to support both drivers? The
>>> Open Source driver as default for reading. And the FGDB driver for
>>> writing?
>> That's a great idea!
>> 
>> In the QGIS world we'd have to compromise a bit here and not allow
>> editing of existing layers (as you'd normally get with the closed
>> driver). I.e. we'd only use it when writing an existing layer out to a
>> copy on disk (e.g. via right click menu on a vector layer). But still,
>> allowing layers to be saved as a geodatabase would be a step forward.
>> 
>> I'm not sure how this change would need to be made though. At the
>> moment if you install the closed driver in osgeo4w it's always used,
>> for both reading and writing layers. Even/Jürgen is this an osgeo4w
>> thing or a GDAL thing? Is it possible to have two drivers installed
>> for the one format and always read using the closed driver?
> 
> As the FileGDB driver is loaded as a plugin by GDAL, it is registered first, 
> and then probed first when opening a dataset.
> Banning one of the driver can be done by defining GDAL_SKIP=FileGDB or 
> GDAL_SKIP=OpenFileGDB and calling GDALAllRegister() again.
> It is also possible to control which drivers are allowed at dataset opening 
> with GDALOpenEx() and the papszDriversAllowed argument (but that means you 
> need to know this is a FileGeodatabase)
> 
> Even
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180805/014ed0ab/attachment.html>

From ccrook at linz.govt.nz  Sun Aug  5 22:53:34 2018
From: ccrook at linz.govt.nz (Chris Crook)
Date: Mon, 6 Aug 2018 05:53:34 +0000
Subject: [QGIS-Developer] API for adding files to .qgz file
Message-ID: <A87E66F06E86F14B857F2EB047CDF9322E8E2AF6@prdassexch01.ad.linz.govt.nz>

Hi.  Can anyone give me pointers for adding data to the .qgz project file.  I am thinking about updating the Memory Layer saver plugin to use this but I haven't spotted the API around it.  I'm thinking I could either reconfigure it to embed the current .mldata file it creates within the .qgz, or possibly refactor it to use the auxilliary storage.  Any suggestions or pointers welcome :-)  Thanks

________________________________

This message contains information, which may be in confidence and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From nyall.dawson at gmail.com  Sun Aug  5 23:06:03 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 6 Aug 2018 16:06:03 +1000
Subject: [QGIS-Developer] API for adding files to .qgz file
In-Reply-To: <A87E66F06E86F14B857F2EB047CDF9322E8E2AF6@prdassexch01.ad.linz.govt.nz>
References: <A87E66F06E86F14B857F2EB047CDF9322E8E2AF6@prdassexch01.ad.linz.govt.nz>
Message-ID: <CAB28AshUdA67piAE590VJb19gN6iQ6EXZrdzNfmJ4uhRwiG1Wg@mail.gmail.com>

On Mon, 6 Aug 2018 at 16:03, Chris Crook <ccrook at linz.govt.nz> wrote:
>
> Hi.  Can anyone give me pointers for adding data to the .qgz project file.  I am thinking about updating the Memory Layer saver plugin to use this but I haven't spotted the API around it.  I'm thinking I could either reconfigure it to embed the current .mldata file it creates within the .qgz, or possibly refactor it to use the auxilliary storage.  Any suggestions or pointers welcome :-)  Thanks

2 second answer - the API doesn't exist (yet)!

Nyall

From sophie.crommelinck at gmail.com  Sun Aug  5 23:10:49 2018
From: sophie.crommelinck at gmail.com (Sophie Crommelinck)
Date: Mon, 6 Aug 2018 08:10:49 +0200
Subject: [QGIS-Developer] GRASS r.kappa not working in QGIS plugin
Message-ID: <CACJcZHt9Si+KFABo7_hFTJ2YHE94vvAtH8iLBECzH9NiGVJt4Q@mail.gmail.com>

Hello,


I am working on a QGIS plugin, that should use the module r.kappa from
GRASS. It looks like this in my plugin source code:

processing.run('grass7:r.kappa',
               {"classification": classificationLayer,
                "reference": referenceLayer,
                "title": 'ACCURACY ASSESSMENT',
                "-h": False,
                "-w": False,
                "GRASS_REGION_CELLSIZE_PARAMETER": cellSize,
                "GRASS_REGION_PARAMETER": None,
                "output": outputFile})

As an error, I get a QgsProcessingException saying 'There were errors
executing the algorithm'.

If I run the same manually in QGIS via the toolbox, everything works fine.
Both calls of the module (manually and via the plugin) look similar in the
log message panel. I have tried providing the inputs as QgsRasterLayer and
as full filenames/paths, without success. I don't think the error is in the
GRASS module, as it works fine when executed manually. Maybe someone
encountered a similar problem?

Thank you in advance,

Sophie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180806/137191bf/attachment-0001.html>

From sophie.crommelinck at gmail.com  Mon Aug  6 00:37:46 2018
From: sophie.crommelinck at gmail.com (Sophie Crommelinck)
Date: Mon, 6 Aug 2018 09:37:46 +0200
Subject: [QGIS-Developer] GRASS r.kappa not working in QGIS plugin
In-Reply-To: <CACJcZHt9Si+KFABo7_hFTJ2YHE94vvAtH8iLBECzH9NiGVJt4Q@mail.gmail.com>
References: <CACJcZHt9Si+KFABo7_hFTJ2YHE94vvAtH8iLBECzH9NiGVJt4Q@mail.gmail.com>
Message-ID: <CACJcZHvGC3knMiom9iKup8utVuEfGOyh=shxPCLXewkGfnb59g@mail.gmail.com>

I just noted that everything works fine, when the module r.kappa is run
once manually via the toolbox in QGIS before running the plugin. When I
open QGIS (I am using the latest QGIS 3.3.0 nightly build version) and run
the plugin directly, the GRASS module r.kappa in the plugin doesn't work.
When I open QGIS, run r.kappa via the toolbox and run the plugin then, the
GRASS module r.kappa in the plugin works fine. Not sure how to fix this.

Best,
Sophie

On Mon, 6 Aug 2018 at 08:10, Sophie Crommelinck <
sophie.crommelinck at gmail.com> wrote:

> Hello,
>
>
> I am working on a QGIS plugin, that should use the module r.kappa from
> GRASS. It looks like this in my plugin source code:
>
> processing.run('grass7:r.kappa',
>                {"classification": classificationLayer,
>                 "reference": referenceLayer,
>                 "title": 'ACCURACY ASSESSMENT',
>                 "-h": False,
>                 "-w": False,
>                 "GRASS_REGION_CELLSIZE_PARAMETER": cellSize,
>                 "GRASS_REGION_PARAMETER": None,
>                 "output": outputFile})
>
> As an error, I get a QgsProcessingException saying 'There were errors
> executing the algorithm'.
>
> If I run the same manually in QGIS via the toolbox, everything works fine.
> Both calls of the module (manually and via the plugin) look similar in the
> log message panel. I have tried providing the inputs as QgsRasterLayer and
> as full filenames/paths, without success. I don't think the error is in the
> GRASS module, as it works fine when executed manually. Maybe someone
> encountered a similar problem?
>
> Thank you in advance,
>
> Sophie
>
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180806/5456e7ed/attachment.html>

From noreply at qgis.org  Mon Aug  6 12:20:51 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Mon, 06 Aug 2018 19:20:51 -0000
Subject: [QGIS-Developer] Plugin [1391] Asistente LADM_COL approval
	notification.
Message-ID: <20180806192051.11029.66600@2c6504964296>


Plugin Asistente LADM_COL approval by pcav.
The plugin version "[1391] Asistente LADM_COL 0.6.1 Experimental" is now approved
Link: http://plugins.qgis.org/plugins/asistente_ladm_col/

From noreply at qgis.org  Mon Aug  6 20:36:26 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Tue, 07 Aug 2018 03:36:26 -0000
Subject: [QGIS-Developer] Plugin [1517] Offline-MapMatching approval
	notification.
Message-ID: <20180807033626.15924.48005@2c6504964296>


Plugin Offline-MapMatching approval by pcav.
The plugin version "[1517] Offline-MapMatching 1.0.0" is now approved
Link: http://plugins.qgis.org/plugins/Offline-MapMatching/

From noreply at qgis.org  Tue Aug  7 06:39:02 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Tue, 07 Aug 2018 13:39:02 -0000
Subject: [QGIS-Developer] Plugin [1515] DSGTools Op approval notification.
Message-ID: <20180807133902.31568.20464@2c6504964296>


Plugin DSGTools Op approval by pcav.
The plugin version "[1515] DSGTools Op 1.2" is now approved
Link: http://plugins.qgis.org/plugins/DSGTools_Op/

From jorgealmerio at yahoo.com.br  Tue Aug  7 09:25:47 2018
From: jorgealmerio at yahoo.com.br (Jorge Almerio)
Date: Tue, 7 Aug 2018 13:25:47 -0300
Subject: [QGIS-Developer] Plugins translation
Message-ID: <000301d42e6b$4d6c7980$e8456c80$@com.br>

Hi devs,

 

For do the plugin translations I use

 

1) Linguist from QT5

2) The command line: 

    Pylupdate4 -noobsolete PluginName.pro (Is there a new version 5??)

3) and the classical code:

 

        # initialize locale
        locale = QSettings().value('locale/userLocale')[0:2]
        locale_path = os.path.join(
            self.plugin_dir,
            'i18n',
            'PluginName_{}.qm'.format(locale))

        if os.path.exists(locale_path):
            self.translator = QTranslator()
            self.translator.load(locale_path)

            if qVersion() > '4.3.3':

                QCoreApplication.installTranslator(self.translator)

 

        def tr(self, message):

            return QCoreApplication.translate(QWaterPlugin.SETTINGS, message)

 

 

The problem is that the option to use self.tr('message string') is not working. It only works when I use QCoreApplication.translate('Escope', 'message string') even if a tr function defined.

 

It used to work with linguist from QT4.

 

What  Am I doing wrong? BTW Is there a new better way to translate plugins?

 

Another thing, every time I update the translations strings with Pylupdate4, I have to translate all my plugin forms again even without any changes, any help???

 

Thanks,

 

Jorge Almerio

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180807/411d94bd/attachment.html>

From noreply at qgis.org  Tue Aug  7 12:47:27 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Tue, 07 Aug 2018 19:47:27 -0000
Subject: [QGIS-Developer] Plugin [219] DirectionalSlope approval
	notification.
Message-ID: <20180807194727.29996.22415@2c6504964296>


Plugin DirectionalSlope approval by pcav.
The plugin version "[219] DirectionalSlope 1.3.1" is now approved
Link: http://plugins.qgis.org/plugins/DirectionalSlope/

From forspamix at gmail.com  Tue Aug  7 12:53:30 2018
From: forspamix at gmail.com (radan)
Date: Tue, 7 Aug 2018 12:53:30 -0700 (MST)
Subject: [QGIS-Developer] Deactivate QgsRasterLayer CRS prompt
In-Reply-To: <23DC76E788B5AE46BF97C68F781B7C2522D3E51C@OVEKBG.ove.at>
References: <23DC76E788B5AE46BF97C68F781B7C2522D3E51C@OVEKBG.ove.at>
Message-ID: <1533671610453-0.post@n6.nabble.com>

I also needed an answer here and researched it so much that I reviewed the
sources.

The trick is here "/Projections/defaultBehaviour", in QGis3 they decided to
change it to "/Projections/defaultBehavior" (behavioUr -> behavior). yw



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From rudivs at gmail.com  Wed Aug  8 01:05:15 2018
From: rudivs at gmail.com (Rudi von Staden)
Date: Wed, 8 Aug 2018 10:05:15 +0200
Subject: [QGIS-Developer] Difference in area calculation using memory vs
	output layer
Message-ID: <CAOJAE5obG8BM-uAbv+LXq9aEtJkwihm6oW2SHZcqMaHZo89yTA@mail.gmail.com>

Hi all,

I'm building a script to iterate over a relatively complex processing
model. I started out using a parameterAsOutputLayer to get the result of
the algorithm, and then loaded that as a QgsVectorLayer() using the 'ogr'
provider. I then refactored that to use a 'memory:' layer instead. The
strange thing is that one of the steps in the script is to calculate the
area of the single feature produced by the algorithm, and the area result
is different when calculated from the shapefile loaded in vs calculated
directly from the memory layer. My code below:

### from output layer

        habitatModelLayer = QgsVectorLayer(habitatModel,genspec,'ogr')
        iterator =
habitatModelLayer.getFeatures(QgsFeatureRequest().setFilterFid(0))
        feature = next(iterator)
        spatialiteFeature = QgsFeature(feature)     # make a copy
        spatialiteFields = spatialiteLayer.fields()
        spatialiteFeature.setFields(spatialiteFields)  # replace source
with destination fields
        for f in spatialiteFeature.fields().names():
            if f == 'm_area':
                spatialiteFeature[f] = feature.geometry().area()/1000000  #
result 2294.51 km2

### from memory layer

        habitatModelLayer = processingResult['model:zonal stats for
model_1:habitat model']
        iterator = habitatModelLayer.getFeatures()    # setFilterFid(0)
results in StopIteration
        feature = next(iterator)
        spatialiteFeature = QgsFeature(feature)     # make a copy
        spatialiteFields = spatialiteLayer.fields()
        spatialiteFeature.setFields(spatialiteFields)  # replace source
with destination fields
        for f in spatialiteFeature.fields().names():
            if f ==  'm_area':
                spatialiteFeature[f] = feature.geometry().area()/1000000 #
result 2156.43 km2

I did also calculate a range of zonal stats on the layer (which has only
one multipolygon feature), but those results were consistent between output
/ memory layers.

Is the area difference expected because of how shapefiles store geometry vs
how they are handled by memory layers, or could there be a bug somewhere?
Maybe this isn't the recommended way to calculate area? In case it matters,
I'm using a custom CRS:

"+proj=aea +lat_1=-24 +lat_2=-32 +lat_0=0 +lon_0=24 +x_0=0 +y_0=0
+datum=WGS84 +units=m +no_defs"

If this is not expected behaviour I could try to create a simpler script to
reproduce the issue.

Thanks,
Rudi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180808/09d71290/attachment.html>

From rapzak at gmail.com  Wed Aug  8 06:58:43 2018
From: rapzak at gmail.com (Kasper)
Date: Wed, 8 Aug 2018 15:58:43 +0200
Subject: [QGIS-Developer] Save project in Python
Message-ID: <CAL50gNeRjtd5VQ1gFFD=FbF24ufgXUMXJ2n=jBcuBp6-96974g@mail.gmail.com>

Hi,

How come when i save a project in python the canvas settings are not saved.
I hope to save the zoom level when i open project in Qgis 3.

I have found this mention it could be a bug?

Or do i miss something?

There is a writeProject() function on the Canvas?


mapcanvas &  legend  sektions are missing in the QGS file i generate in
pyton compared to if i open it in QGIS3 and save it again.

My code:

        self.map_canvas = QgsMapCanvas()

self.map_canvas.setDestinationCrs(QgsCoordinateReferenceSystem("epsg:4326"))

        self.project = QgsProject()
        self.project.setCrs(QgsCoordinateReferenceSystem("epsg:4326"))
        self.project.addMapLayer(OSM_layer) # First layer is lowest
        self.project.addMapLayer(vl)
        self.project.addMapLayer(error_less_left)
        self.project.addMapLayer(error_less_right)
        bridge = QgsLayerTreeMapCanvasBridge(self.project.layerTreeRoot(),
self.map_canvas)
        bridge.setCanvasLayers()
    # Show on map in pyton
        self.map_canvas.setExtent(vl.extent())
        self.map_canvas.refresh()
        self.map_canvas.setAnnotationsVisible(True)
        #self.map_canvas.write("project_save.qgs")
        self.project.setDirty(True)
        self.project.write("project_save.qgs")

BR
Kasper
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180808/a04b9bee/attachment.html>

From noreply at qgis.org  Wed Aug  8 07:09:00 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Wed, 08 Aug 2018 14:09:00 -0000
Subject: [QGIS-Developer] Plugin [715] DSG Tools approval notification.
Message-ID: <20180808140900.18830.72015@2c6504964296>


Plugin DSG Tools approval by pcav.
The plugin version "[715] DSG Tools 3.2" is now approved
Link: http://plugins.qgis.org/plugins/DsgTools/

From noreply at qgis.org  Wed Aug  8 09:45:02 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Wed, 08 Aug 2018 16:45:02 -0000
Subject: [QGIS-Developer] Plugin [1066] Isogeo approval notification.
Message-ID: <20180808164502.18830.70561@2c6504964296>


Plugin Isogeo approval by pcav.
The plugin version "[1066] Isogeo 1.6.1-beta1 Experimental" is now approved
Link: http://plugins.qgis.org/plugins/isogeo_search_engine/

From noreply at qgis.org  Wed Aug  8 09:45:21 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Wed, 08 Aug 2018 16:45:21 -0000
Subject: [QGIS-Developer] Plugin [1364] UMEP approval notification.
Message-ID: <20180808164521.18829.15345@2c6504964296>


Plugin UMEP approval by pcav.
The plugin version "[1364] UMEP 3.5.2" is now approved
Link: http://plugins.qgis.org/plugins/UMEP/

From rudivs at gmail.com  Wed Aug  8 14:22:50 2018
From: rudivs at gmail.com (Rudi von Staden)
Date: Wed, 8 Aug 2018 23:22:50 +0200
Subject: [QGIS-Developer] QGIS builds
In-Reply-To: <CAOJAE5pKki7a=e4OJ556ZrreaeVDE2S=rFRaLxhtDhd7a5tbfw@mail.gmail.com>
References: <CAOJAE5pKki7a=e4OJ556ZrreaeVDE2S=rFRaLxhtDhd7a5tbfw@mail.gmail.com>
Message-ID: <CAOJAE5qyvG4mAmOAG-KN-dw1sJzCjbLtMU09xHb77v+Wgy76XA@mail.gmail.com>

I have the build environment set up from scratch on a new computer, and I'm
getting the same error building mdalprovider in the master branch
(C:\OSGeo4W64\bin\hdf5.dll : fatal error LNK1107: invalid or corrupt file:
cannot read at 0x2F0). Is there maybe a problem with hdf5.dll from osgeo4w?
I've tried downloading the source from
https://support.hdfgroup.org/ftp/HDF5/releases/hdf5-1.8/hdf5-1.8.11/src/
and building it, but even then I run into "CPack Error: Error when
generating package: HDF5".

Has nobody else had any issues with hdf5.dll? Are the instructions for 4.1
at https://github.com/qgis/QGIS/blob/master/INSTALL still accurate?

Kind regards,
Rudi

On Thu, 26 Jul 2018 at 10:34, Rudi von Staden <rudivs at gmail.com> wrote:

> Hi all,
>
> I'm trying to build qgis from source, but I'm getting a linking error in
> `mdalprovider`:
>
> C:\OSGeo4W64\bin\hdf5.dll : fatal error LNK1107: invalid or corrupt file:
> cannot read at 0x2F0
>
>
> I have successfully built qgis before, so any idea why this would be
> causing a problem now?
>
> As background, I'm trying to build a particular pull request to help with
> testing. The steps I took were:
>
> 1. git fetch origin pull/7396/head:rastercalc
> 2. git checkout rastercalc
> 3. delete directory build-qgis-test-x86_64 (in QGIS/ms-windows/osgeo4w)
> 4. run configonly.bat
> 5. run OSGeo4W-dev.bat (which executes `call
> C:\Users\rudi_000\Source\Repos\QGIS\ms-windows\osgeo4w\msvc-env.bat x86_64`)
> 6. run devenv from command prompt
> 7. open qgis.sln
> 8. build
>
> I have tried cleaning and rebuilding mdalprovider, but get the same
> result. It could be that just repeating the process described above would
> resolve the issue (from point 3.), but since it takes several hours to
> build (I'm building on a pretty old laptop) I thought I'd ask in case I'm
> doing something wrong in the process.
>
> Thanks,
> Rudi
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180808/89a5549b/attachment.html>

From noreply at qgis.org  Wed Aug  8 14:32:41 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Wed, 08 Aug 2018 21:32:41 -0000
Subject: [QGIS-Developer] Plugin [1429] Karika approval notification.
Message-ID: <20180808213241.18829.38157@2c6504964296>


Plugin Karika approval by pcav.
The plugin version "[1429] Karika 1.4" is now approved
Link: http://plugins.qgis.org/plugins/karika/

From nyall.dawson at gmail.com  Wed Aug  8 14:47:37 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 9 Aug 2018 07:47:37 +1000
Subject: [QGIS-Developer] QGIS builds
In-Reply-To: <CAOJAE5qyvG4mAmOAG-KN-dw1sJzCjbLtMU09xHb77v+Wgy76XA@mail.gmail.com>
References: <CAOJAE5pKki7a=e4OJ556ZrreaeVDE2S=rFRaLxhtDhd7a5tbfw@mail.gmail.com>
 <CAOJAE5qyvG4mAmOAG-KN-dw1sJzCjbLtMU09xHb77v+Wgy76XA@mail.gmail.com>
Message-ID: <CAB28Ashrouj+bpvBFPG_c94xByTtJ5o=gedZaZVhLXRmZBdCFw@mail.gmail.com>

On Thu, 9 Aug 2018 at 07:23, Rudi von Staden <rudivs at gmail.com> wrote:
>
> I have the build environment set up from scratch on a new computer, and I'm getting the same error building mdalprovider in the master branch (C:\OSGeo4W64\bin\hdf5.dll : fatal error LNK1107: invalid or corrupt file: cannot read at 0x2F0). Is there maybe a problem with hdf5.dll from osgeo4w? I've tried downloading the source from https://support.hdfgroup.org/ftp/HDF5/releases/hdf5-1.8/hdf5-1.8.11/src/ and building it, but even then I run into "CPack Error: Error when generating package: HDF5".
>
> Has nobody else had any issues with hdf5.dll? Are the instructions for 4.1 at https://github.com/qgis/QGIS/blob/master/INSTALL still accurate?

I've seen this too. I haven't had time to investigate a proper fix, so
in the meantime I just edit src/providers/mdal/CMakeLists.txt and
remove all mention of HDF5. That gets the build working temporarily.

Nyall



>
> Kind regards,
> Rudi
>
> On Thu, 26 Jul 2018 at 10:34, Rudi von Staden <rudivs at gmail.com> wrote:
>>
>> Hi all,
>>
>> I'm trying to build qgis from source, but I'm getting a linking error in `mdalprovider`:
>>
>> C:\OSGeo4W64\bin\hdf5.dll : fatal error LNK1107: invalid or corrupt file: cannot read at 0x2F0
>>
>>
>> I have successfully built qgis before, so any idea why this would be causing a problem now?
>>
>> As background, I'm trying to build a particular pull request to help with testing. The steps I took were:
>>
>> 1. git fetch origin pull/7396/head:rastercalc
>> 2. git checkout rastercalc
>> 3. delete directory build-qgis-test-x86_64 (in QGIS/ms-windows/osgeo4w)
>> 4. run configonly.bat
>> 5. run OSGeo4W-dev.bat (which executes `call C:\Users\rudi_000\Source\Repos\QGIS\ms-windows\osgeo4w\msvc-env.bat x86_64`)
>> 6. run devenv from command prompt
>> 7. open qgis.sln
>> 8. build
>>
>> I have tried cleaning and rebuilding mdalprovider, but get the same result. It could be that just repeating the process described above would resolve the issue (from point 3.), but since it takes several hours to build (I'm building on a pretty old laptop) I thought I'd ask in case I'm doing something wrong in the process.
>>
>> Thanks,
>> Rudi
>>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From matthias at opengis.ch  Wed Aug  8 22:07:10 2018
From: matthias at opengis.ch (Matthias Kuhn)
Date: Thu, 9 Aug 2018 07:07:10 +0200
Subject: [QGIS-Developer] GeoPackages with constraint problems
In-Reply-To: <1549794.06pyOKaaQo@even-i700>
References: <5da3820d-c9a8-0a26-89e3-7cab6f0225c5@opengis.ch>
 <1549794.06pyOKaaQo@even-i700>
Message-ID: <d6da5351-6d86-500b-1a31-f4b4e7014f63@opengis.ch>

Thanks Even,

Executing PRAGMA foreign_keys = ON sounds interesting, one thing we'll
then need to check on the relation editing end is that we make proper
use of deferred foreign key constraints.

What do you think about the way to go concerning handling broken files?
The current situation is that there's very limited information for a
user concerning the problems and it requires advanced sqlite skills to
investigate and fix those problems. I am a bit worried that this might
impact overall acceptance of gpkg.

* It looks like the error message is around (since it's in the message
log), so that's mostly a visibility / UI problem
* There is no clear "path of action" for a user. It would be nice to
offer to open the dataset anyway when that happens. Is it possible to
prevent OGR from running the PRAGMA foreign_key_check?

Matthias

On 08/03/2018 08:40 PM, Even Rouault wrote:
> Matthias,
>
> Looking a bit at this, I see from sqlite doc that foreign key constraints are 
> only enforced if the user runs
>
> PRAGMA foreign_keys = ON
>
> which OGR does no activate by default, hence the easyness to break them.
>
> This can be enabled by defining the configuration option/environment variable
> OGR_SQLITE_PRAGMA="foreign_keys=ON"
>
> I'm contemplating if the GPKG driver should do that by default (would probably 
> makes sense since at opening it runs the PRAGMA foreign_key_check)
>
> Even
>
>> Hi everyone,
>>
>> I recently gave a course where geopackages were used as datasets. Those
>> geopackages had foreign key constraints (among others) activated. While
>> editing those files, at least on one machine, someone managed to get it
>> into a "corrupted" state (layer disappeared). Trying to load this layer
>> later on will result in a bad layer. The only thing we have is a tiny
>> message in the message log informing about "pragma foreign_key_check on
>> 'file.gpkg' failed. You can disable this check by setting the
>> OGR_GPKG_FOREIGN_KEY_CHECK configuration option to NO".
>>
>> I think it's quite strange that QGIS/OGR manages to bring a GeoPackage
>> into a corrupted state and then denies to open it.
>>
>> * It would - I guess - be preferable to prevent a GeoPackage from going
>> into such a state
>>
>> * Since it appears to be quite easy to bring a dataset into such a state
>> (although I'm afraid I can't provide detailed steps) QGIS should by
>> default probably rather open (and warn) or warn and give a possibility
>> to still open.
>>
>> Did others experience this as well and have more ideas what to do?
>>
>> Thanks and best wishes
>> Matthias
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>

-- 
Matthias Kuhn
matthias at opengis.ch <mailto:matthias at opengis.ch>
+41 (0)76 435 67 63 <tel:+41764356763>
OPENGIS.ch Logo <http://www.opengis.ch>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180809/7fe15cb4/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 6671 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180809/7fe15cb4/attachment-0001.png>

From nyall.dawson at gmail.com  Wed Aug  8 23:39:02 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 9 Aug 2018 16:39:02 +1000
Subject: [QGIS-Developer] Difference in area calculation using memory vs
 output layer
In-Reply-To: <CAOJAE5obG8BM-uAbv+LXq9aEtJkwihm6oW2SHZcqMaHZo89yTA@mail.gmail.com>
References: <CAOJAE5obG8BM-uAbv+LXq9aEtJkwihm6oW2SHZcqMaHZo89yTA@mail.gmail.com>
Message-ID: <CAB28AsjrWfQ8i-VFbTgs+ZX5aiE=mDkWuG_ZosSFx4h4702pQA@mail.gmail.com>

On Wed, 8 Aug 2018 at 18:06, Rudi von Staden <rudivs at gmail.com> wrote:

>
> I did also calculate a range of zonal stats on the layer (which has only one multipolygon feature), but those results were consistent between output / memory layers.
>
> Is the area difference expected because of how shapefiles store geometry vs how they are handled by memory layers, or could there be a bug somewhere? Maybe this isn't the recommended way to calculate area? In case it matters, I'm using a custom CRS:
>
> "+proj=aea +lat_1=-24 +lat_2=-32 +lat_0=0 +lon_0=24 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs"

This may be a silly question -- but can you confirm that both layers
are definitely in the same CRS?

If so, I'd try exporting the two geometries to WKT and inspect for
differences. I can't think of any other reason for the area to be
different! (Since you're directly calculating the euclidean area
ellipsoid settings won't come into play, which is the most common
source of "different area calculations").

Nyall

From nyall.dawson at gmail.com  Wed Aug  8 23:40:22 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 9 Aug 2018 16:40:22 +1000
Subject: [QGIS-Developer] GRASS r.kappa not working in QGIS plugin
In-Reply-To: <CACJcZHvGC3knMiom9iKup8utVuEfGOyh=shxPCLXewkGfnb59g@mail.gmail.com>
References: <CACJcZHt9Si+KFABo7_hFTJ2YHE94vvAtH8iLBECzH9NiGVJt4Q@mail.gmail.com>
 <CACJcZHvGC3knMiom9iKup8utVuEfGOyh=shxPCLXewkGfnb59g@mail.gmail.com>
Message-ID: <CAB28AsgWXNQMBsDO5VFRTMqEEfXyr-wd0vRpbyaq_Symh=E=iA@mail.gmail.com>

On Mon, 6 Aug 2018 at 17:38, Sophie Crommelinck
<sophie.crommelinck at gmail.com> wrote:
>
> I just noted that everything works fine, when the module r.kappa is run once manually via the toolbox in QGIS before running the plugin. When I open QGIS (I am using the latest QGIS 3.3.0 nightly build version) and run the plugin directly, the GRASS module r.kappa in the plugin doesn't work. When I open QGIS, run r.kappa via the toolbox and run the plugin then, the GRASS module r.kappa in the plugin works fine. Not sure how to fix this.
>
> Best,
> Sophie
>
> On Mon, 6 Aug 2018 at 08:10, Sophie Crommelinck <sophie.crommelinck at gmail.com> wrote:
>>
>> Hello,
>>
>>
>> I am working on a QGIS plugin, that should use the module r.kappa from GRASS. It looks like this in my plugin source code:
>>
>> processing.run('grass7:r.kappa',
>>                {"classification": classificationLayer,
>>                 "reference": referenceLayer,
>>                 "title": 'ACCURACY ASSESSMENT',
>>                 "-h": False,
>>                 "-w": False,
>>                 "GRASS_REGION_CELLSIZE_PARAMETER": cellSize,
>>                 "GRASS_REGION_PARAMETER": None,
>>                 "output": outputFile})
>>
>> As an error, I get a QgsProcessingException saying 'There were errors executing the algorithm'.

Can you try putting somewhere near the start of your script:

from processing.algs.grass7.Grass7Utils import Grass7Utils
assert Grass7Utils.installedVersion()

And see if the assert passes, and whether that fixes your issue?

Nyall

From nyall.dawson at gmail.com  Wed Aug  8 23:44:24 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 9 Aug 2018 16:44:24 +1000
Subject: [QGIS-Developer] Save project in Python
In-Reply-To: <CAL50gNeRjtd5VQ1gFFD=FbF24ufgXUMXJ2n=jBcuBp6-96974g@mail.gmail.com>
References: <CAL50gNeRjtd5VQ1gFFD=FbF24ufgXUMXJ2n=jBcuBp6-96974g@mail.gmail.com>
Message-ID: <CAB28AsjsZuF0W_3dbCy_HZN8Cdh6ApRSjxEUML1yE3t+jg3UvQ@mail.gmail.com>

On Wed, 8 Aug 2018 at 23:58, Kasper <rapzak at gmail.com> wrote:
>         self.map_canvas = QgsMapCanvas()
>         self.map_canvas.setDestinationCrs(QgsCoordinateReferenceSystem("epsg:4326"))
>
>         self.project = QgsProject()

Insert here:

self.project.writeProject.connect(self.map_canvas.writeProject)

Nyall

From uponmyword at sina.com  Thu Aug  9 00:47:03 2018
From: uponmyword at sina.com (tao)
Date: Thu, 9 Aug 2018 00:47:03 -0700 (MST)
Subject: [QGIS-Developer] Build error: output/bin/crssync: Permission denied
Message-ID: <1533800823442-0.post@n6.nabble.com>

I found pre-compiled qgis-2.18.17 had a problem under OpenBSD 6.3 mentioned
in following thread 
http://openbsd-archive.7691.n7.nabble.com/Probelm-when-building-QGIS-td347994.html


So I have to build QGIS myself. 
Some problems were encountered, but I succeeded to fix them. 

However, I can not figure out the following errors: 

[ 35%] Built target gpxprovider 
Scanning dependencies of target synccrsdb 
/bin/sh: ../../output/bin/crssync: Permission denied 
*** Error 1 in . (src/crssync/CMakeFiles/synccrsdb.dir/build.make:57
'src/crssync/CMakeFiles/synccrsdb': cd /home/tao/Software/qgis/build-2....) 
*** Error 2 in . (CMakeFiles/Makefile2:2732
'src/crssync/CMakeFiles/synccrsdb.dir/all') 
*** Error 2 in /home/tao/Software/qgis/build-2.18.22 (Makefile:163 'all') 

I totally did this under user mode, and permission right is okay like: 

tao$ ./crssync                                                                 
ksh: ./crssync: Permission denied 
tao$ ls -l ./crssync                                                           
-rwxr-xr-x  1 tao  tao  23149 Aug  9 14:18 ./crssync 

This really beat me. 

Anyone can help? 
Thanks a lot!



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From even.rouault at spatialys.com  Thu Aug  9 00:53:59 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 09 Aug 2018 09:53:59 +0200
Subject: [QGIS-Developer] GeoPackages with constraint problems
In-Reply-To: <d6da5351-6d86-500b-1a31-f4b4e7014f63@opengis.ch>
References: <5da3820d-c9a8-0a26-89e3-7cab6f0225c5@opengis.ch>
 <1549794.06pyOKaaQo@even-i700>
 <d6da5351-6d86-500b-1a31-f4b4e7014f63@opengis.ch>
Message-ID: <4594809.Ii1yUXBiVV@even-i700>

On jeudi 9 août 2018 07:07:10 CEST Matthias Kuhn wrote:
> Thanks Even,
> 
> Executing PRAGMA foreign_keys = ON sounds interesting, one thing we'll
> then need to check on the relation editing end is that we make proper
> use of deferred foreign key constraints.
> 
> What do you think about the way to go concerning handling broken files?
> The current situation is that there's very limited information for a
> user concerning the problems and it requires advanced sqlite skills to
> investigate and fix those problems. I am a bit worried that this might
> impact overall acceptance of gpkg.
> 
> * It looks like the error message is around (since it's in the message
> log), so that's mostly a visibility / UI problem
> * There is no clear "path of action" for a user. It would be nice to
> offer to open the dataset anyway when that happens. Is it possible to
> prevent OGR from running the PRAGMA foreign_key_check?

Yep, this is indicated in the GDAL error message ;-) : set the 
OGR_GPKG_FOREIGN_KEY_CHECK configuration option to NO

CPLSetConfigOption("OGR_GPKG_FOREIGN_KEY_CHECK", "NO"); (or as environment 
variable)

This check is done because of requirement 7 of http://www.geopackage.org/spec/
"""
The SQLite PRAGMA foreign_key_check SQL with no parameter value SHALL return 
an empty result set indicating no invalid foreign key values for a GeoPackage 
file.
"""

One way would be to systematically set OGR_GPKG_FOREIGN_KEY_CHECK=NO and after 
the file is open run GDALDatasetExecuteSQL("pragma foreign_key_check"). If it 
returns an empty layer, then fine, otherwise emit a warning to the user.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mj10777 at googlemail.com  Thu Aug  9 00:59:58 2018
From: mj10777 at googlemail.com (Mark Johnson)
Date: Thu, 9 Aug 2018 09:59:58 +0200
Subject: [QGIS-Developer] GeoPackages with constraint problems
Message-ID: <CAEEbjBh34D81+TU8H=uSKLGWb=Uan54Q=GFoa5mOX44iN5A1Lg@mail.gmail.com>

>> Executing PRAGMA foreign_keys = ON
This is also done for Spatialite in the SpatialiteProvider, so this is not
a general GeoPackage issue.

The need to keep this on is important, since the TRIGGERS enforces the
'sanity' of the data (such as same srid and geometry-type rules).

Also the Database-Designer can add there own rules, make a general, semi
automatic  'repair' routines basically impossible.

Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180809/131b3286/attachment.html>

From andrew.cutts at gmail.com  Thu Aug  9 05:57:03 2018
From: andrew.cutts at gmail.com (Andrew C)
Date: Thu, 9 Aug 2018 13:57:03 +0100
Subject: [QGIS-Developer] How to create a simple processing script in QGIS
	3.x, eg just a buffer
Message-ID: <CAH24QJrPT9qSZLadXBpkduTGJJ6KrYYiuzA_8HXJSmOn_5rBoQ@mail.gmail.com>

Hi All,

Can someone offer me some guidance on the new scripting process in QGIS 3x?

If I take the create script from template option and make some very minor
changes (below), why am I not writing a buffer? The script will execute
with no errors, is this line buffered_layer =
processing.run("native:buffer",...... even being run?

The lines I have changed from the template are show with ###

I am not clear on how QgsFeatureSinkis working, perhaps that is why I am
not getting the buffered layer? Normally in a script I could try printing
variables I cannot see where these are printed either when I tested.

Ultimately I'd like to expand the script, but first I am hoping to just be
able to call a simple buffer.

Thanks in advance for any help

Kind Regards
Andrew



"""
***************************************************************************
*                                                                         *
*   This program is free software; you can redistribute it and/or modify  *
*   it under the terms of the GNU General Public License as published by  *
*   the Free Software Foundation; either version 2 of the License, or     *
*   (at your option) any later version.                                   *
*                                                                         *
***************************************************************************
"""

from PyQt5.QtCore import QCoreApplication
from qgis.core import (QgsProcessing,
                       QgsFeatureSink,
                       QgsProcessingException,
                       QgsProcessingAlgorithm,
                       QgsProcessingParameterFeatureSource,
                       QgsProcessingParameterFeatureSink)
import processing


class ExampleProcessingAlgorithm(QgsProcessingAlgorithm):
    """
    This is an example algorithm that takes a vector layer and
    creates a new identical one.

    It is meant to be used as an example of how to create your own
    algorithms and explain methods and variables used to do it. An
    algorithm like this will be available in all elements, and there
    is not need for additional work.

    All Processing algorithms should extend the QgsProcessingAlgorithm
    class.
    """

    # Constants used to refer to parameters and outputs. They will be
    # used when calling the algorithm from another algorithm, or when
    # calling from the QGIS console.

    INPUT = 'INPUT'
    OUTPUT = 'OUTPUT'

    def tr(self, string):
        """
        Returns a translatable string with the self.tr() function.
        """
        return QCoreApplication.translate('Processing', string)

    def createInstance(self):
        return ExampleProcessingAlgorithm()

    def name(self):
        """
        Returns the algorithm name, used for identifying the algorithm. This
        string should be fixed for the algorithm, and must not be localised.
        The name should be unique within each provider. Names should contain
        lowercase alphanumeric characters only and no spaces or other
        formatting characters.
        """
        return 'myscript'

    def displayName(self):
        """
        Returns the translated algorithm name, which should be used for any
        user-visible display of the algorithm name.
        """
        return self.tr('My Script')

    def group(self):
        """
        Returns the name of the group this algorithm belongs to. This string
        should be localised.
        """
        return self.tr('Example scripts')

    def groupId(self):
        """
        Returns the unique ID of the group this algorithm belongs to. This
        string should be fixed for the algorithm, and must not be localised.
        The group id should be unique within each provider. Group id should
        contain lowercase alphanumeric characters only and no spaces or
other
        formatting characters.
        """
        return 'examplescripts'

    def shortHelpString(self):
        """
        Returns a localised short helper string for the algorithm. This
string
        should provide a basic description about what the algorithm does
and the
        parameters and outputs associated with it..
        """
        return self.tr("Example algorithm short description")

    def initAlgorithm(self, config=None):
        """
        Here we define the inputs and output of the algorithm, along
        with some other properties.
        """

        # We add the input vector features source. It can have any kind of
        # geometry.
        self.addParameter(
            QgsProcessingParameterFeatureSource(
                self.INPUT,
                self.tr('Input layer'),
                [QgsProcessing.TypeVectorAnyGeometry]
            )
        )

        # We add a feature sink in which to store our processed features
(this
        # usually takes the form of a newly created vector layer when the
        # algorithm is run in QGIS).
        self.addParameter(
            QgsProcessingParameterFeatureSink(
                self.OUTPUT,
                self.tr('Output layer')
            )
        )

    def processAlgorithm(self, parameters, context, feedback):
        """
        Here is where the processing itself takes place.
        """

        # Retrieve the feature source and sink. The 'dest_id' variable is
used
        # to uniquely identify the feature sink, and must be included in the
        # dictionary returned by the processAlgorithm function.
        source = self.parameterAsSource(
            parameters,
            self.INPUT,
            context
        )

        # If source was not found, throw an exception to indicate that the
algorithm
        # encountered a fatal error. The exception text can be any string,
but in this
        # case we use the pre-built invalidSourceError method to return a
standard
        # helper text for when a source cannot be evaluated
        if source is None:
            raise
QgsProcessingException(self.invalidSourceError(parameters, self.INPUT))

        (sink, dest_id) = self.parameterAsSink(
            parameters,
            self.OUTPUT,
            context,
            source.fields(),
            source.wkbType(),
            source.sourceCrs()
        )

        # If sink was not created, throw an exception to indicate that the
algorithm
        # encountered a fatal error. The exception text can be any string,
but in this
        # case we use the pre-built invalidSinkError method to return a
standard
        # helper text for when a sink cannot be evaluated
        if sink is None:
            raise QgsProcessingException(self.invalidSinkError(parameters,
self.OUTPUT))

        # Compute the number of steps to display within the progress bar and
        # get features from source
        total = 100.0 / source.featureCount() if source.featureCount() else
0
        features = source.getFeatures()

        for current, feature in enumerate(features):
            # Stop the algorithm if cancel button has been clicked
            if feedback.isCanceled():
                break

            # Add a feature in the sink
            sink.addFeature(feature, QgsFeatureSink.FastInsert)

            # Update the progress bar
            feedback.setProgress(int(current * total))

        # To run another Processing algorithm as part of this algorithm,
you can use
        # processing.run(...). Make sure you pass the current context and
feedback
        # to processing.run to ensure that all temporary layer outputs are
available
        # to the executed algorithm, and that the executed algorithm can
send feedback
        # reports to the user (and correctly handle cancelation and
progress reports!)

        ### removed if False:

        buffered_layer = processing.run("native:buffer", { ### removed PARAM
            'INPUT': dest_id,
            'DISTANCE': 1.5,
            'SEGMENTS': 5,
            'END_CAP_STYLE': 0,
            'JOIN_STYLE': 0,
            'MITER_LIMIT': 2,
            'DISSOLVE': False,
            'OUTPUT': 'memory:'
        }, context=context, feedback=feedback)['OUTPUT']

        # Return the results of the algorithm. In this case our only result
is
        # the feature sink which contains the processed features, but some
        # algorithms may return multiple feature sinks, calculated numeric
        # statistics, etc. These should all be included in the returned
        # dictionary, with keys matching the feature corresponding parameter
        # or output names.
        return {self.OUTPUT: buffered_layer}  ### changed output name
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180809/7b26eb12/attachment-0001.html>

From anitagraser at gmx.at  Thu Aug  9 06:23:07 2018
From: anitagraser at gmx.at (Anita Graser)
Date: Thu, 9 Aug 2018 15:23:07 +0200
Subject: [QGIS-Developer] How to create a simple processing script in
 QGIS 3.x, eg just a buffer
In-Reply-To: <CAH24QJrPT9qSZLadXBpkduTGJJ6KrYYiuzA_8HXJSmOn_5rBoQ@mail.gmail.com>
References: <CAH24QJrPT9qSZLadXBpkduTGJJ6KrYYiuzA_8HXJSmOn_5rBoQ@mail.gmail.com>
Message-ID: <CAFFV8FiWRSz+1VY_jwJn=NBUAZTx3Xyn2zCQpqwnQcMXGkS6BQ@mail.gmail.com>

Hi Andrew,

On Thu, Aug 9, 2018 at 2:57 PM Andrew C <andrew.cutts at gmail.com> wrote:

> I am not clear on how QgsFeatureSinkis working, perhaps that is why I am
> not getting the buffered layer? Normally in a script I could try printing
> variables I cannot see where these are printed either when I tested.
>

I think you'd need an output layer instead of a feature sink. Have a look
at
https://github.com/qgis/QGIS/blob/master/python/plugins/processing/algs/qgis/PostGISExecuteAndLoadSQL.py

self.addOutput(QgsProcessingOutputVectorLayer(

self.OUTPUT,

self.tr("Output layer"),

QgsProcessing.TypeVectorAnyGeometry))

Regards,
Anita
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180809/b879ae87/attachment.html>

From telwertowski at comcast.net  Thu Aug  9 06:54:12 2018
From: telwertowski at comcast.net (Tom Elwertowski)
Date: Thu, 9 Aug 2018 09:54:12 -0400
Subject: [QGIS-Developer] OpenCL and macOS
Message-ID: <908104fa-d771-eaa0-4b64-ce1e7003256e@comcast.net>

Hi all,

A recent change added OpenCL. Compilation fails on macOS because Apple 
provides v1.2 (macOS 10.13) while QGIS seems to require v2. Adding a 
version to FIND_PACKAGE will fix the macOS compile and not use OpenCL.

Apple has deprecated OpenCL in favor of its own Metal technology. OpenCL 
will remain for macOS 10.14 (Mojave, fall 2018) but may be removed after 
fall 2019.

For the future, either OpenCL must remain an optional QGIS feature in 
order to support macOS or the API needs to be abstracted so that macOS 
can use Metal while other OSs use OpenCL.

Tom
LinkedIn: https://www.linkedin.com/in/thomas-elwertowski-a0886032

From apasotti at gmail.com  Thu Aug  9 07:06:31 2018
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 9 Aug 2018 16:06:31 +0200
Subject: [QGIS-Developer] OpenCL and macOS
In-Reply-To: <908104fa-d771-eaa0-4b64-ce1e7003256e@comcast.net>
References: <908104fa-d771-eaa0-4b64-ce1e7003256e@comcast.net>
Message-ID: <CAL5Q6718h6dF2tF5-R=S=rJaqzk8FRVrzJmFQ01SK82+7rJjEA@mail.gmail.com>

On Thu, Aug 9, 2018 at 3:54 PM, Tom Elwertowski <telwertowski at comcast.net>
wrote:

> Hi all,
>
> A recent change added OpenCL. Compilation fails on macOS because Apple
> provides v1.2 (macOS 10.13) while QGIS seems to require v2.



That's wierd: 1.1 is what should be required can you file a ticket and
provide full logs?



> Adding a version to FIND_PACKAGE will fix the macOS compile and not use
> OpenCL.
>
> Apple has deprecated OpenCL in favor of its own Metal technology. OpenCL
> will remain for macOS 10.14 (Mojave, fall 2018) but may be removed after
> fall 2019.
>
> For the future, either OpenCL must remain an optional QGIS feature in
> order to support macOS or the API needs to be abstracted so that macOS can
> use Metal while other OSs use OpenCL.
>


OpenCL is an optional feature and there is no plan to change that.




>
> Tom
> LinkedIn: https://www.linkedin.com/in/thomas-elwertowski-a0886032
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer




-- 
Alessandro Pasotti
w3:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180809/59bec35a/attachment.html>

From denis.rouzaud at gmail.com  Thu Aug  9 07:12:50 2018
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Thu, 9 Aug 2018 16:12:50 +0200
Subject: [QGIS-Developer] OpenCL and macOS
In-Reply-To: <CAL5Q6718h6dF2tF5-R=S=rJaqzk8FRVrzJmFQ01SK82+7rJjEA@mail.gmail.com>
References: <908104fa-d771-eaa0-4b64-ce1e7003256e@comcast.net>
 <CAL5Q6718h6dF2tF5-R=S=rJaqzk8FRVrzJmFQ01SK82+7rJjEA@mail.gmail.com>
Message-ID: <CAMtsY+YnUsgDcP9FmiGzfpB7xRbku8PYz5-vXc0e77B_CgkeCA@mail.gmail.com>

I think the issue is that there is no header installed on mac
https://stackoverflow.com/a/23079478/1548052

Le jeu. 9 août 2018 à 16:06, Alessandro Pasotti <apasotti at gmail.com> a
écrit :

> On Thu, Aug 9, 2018 at 3:54 PM, Tom Elwertowski <telwertowski at comcast.net>
> wrote:
>
>> Hi all,
>>
>> A recent change added OpenCL. Compilation fails on macOS because Apple
>> provides v1.2 (macOS 10.13) while QGIS seems to require v2.
>
>
>
> That's wierd: 1.1 is what should be required can you file a ticket and
> provide full logs?
>
>
>
>> Adding a version to FIND_PACKAGE will fix the macOS compile and not use
>> OpenCL.
>>
>> Apple has deprecated OpenCL in favor of its own Metal technology. OpenCL
>> will remain for macOS 10.14 (Mojave, fall 2018) but may be removed after
>> fall 2019.
>>
>> For the future, either OpenCL must remain an optional QGIS feature in
>> order to support macOS or the API needs to be abstracted so that macOS can
>> use Metal while other OSs use OpenCL.
>>
>
>
> OpenCL is an optional feature and there is no plan to change that.
>
>
>
>
>>
>> Tom
>> LinkedIn: https://www.linkedin.com/in/thomas-elwertowski-a0886032
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
>
> --
> Alessandro Pasotti
> w3:   www.itopen.it
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 

Denis Rouzaud
denis at opengis.ch  <denis at opengis.ch>
+41 76 370 21 22
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180809/b0dbb724/attachment.html>

From denis.rouzaud at gmail.com  Thu Aug  9 07:52:52 2018
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Thu, 9 Aug 2018 16:52:52 +0200
Subject: [QGIS-Developer] OpenCL and macOS
In-Reply-To: <CAMtsY+YnUsgDcP9FmiGzfpB7xRbku8PYz5-vXc0e77B_CgkeCA@mail.gmail.com>
References: <908104fa-d771-eaa0-4b64-ce1e7003256e@comcast.net>
 <CAL5Q6718h6dF2tF5-R=S=rJaqzk8FRVrzJmFQ01SK82+7rJjEA@mail.gmail.com>
 <CAMtsY+YnUsgDcP9FmiGzfpB7xRbku8PYz5-vXc0e77B_CgkeCA@mail.gmail.com>
Message-ID: <CAMtsY+ajuR39L6_h_Bh1P9N3ft5XdG=7Ny2hZMze+jX0u4QG8A@mail.gmail.com>

I would just make it disable by default on mac for the moment.


Le jeu. 9 août 2018 à 16:12, Denis Rouzaud <denis.rouzaud at gmail.com> a
écrit :

> I think the issue is that there is no header installed on mac
> https://stackoverflow.com/a/23079478/1548052
>
> Le jeu. 9 août 2018 à 16:06, Alessandro Pasotti <apasotti at gmail.com> a
> écrit :
>
>> On Thu, Aug 9, 2018 at 3:54 PM, Tom Elwertowski <telwertowski at comcast.net
>> > wrote:
>>
>>> Hi all,
>>>
>>> A recent change added OpenCL. Compilation fails on macOS because Apple
>>> provides v1.2 (macOS 10.13) while QGIS seems to require v2.
>>
>>
>>
>> That's wierd: 1.1 is what should be required can you file a ticket and
>> provide full logs?
>>
>>
>>
>>> Adding a version to FIND_PACKAGE will fix the macOS compile and not use
>>> OpenCL.
>>>
>>> Apple has deprecated OpenCL in favor of its own Metal technology. OpenCL
>>> will remain for macOS 10.14 (Mojave, fall 2018) but may be removed after
>>> fall 2019.
>>>
>>> For the future, either OpenCL must remain an optional QGIS feature in
>>> order to support macOS or the API needs to be abstracted so that macOS can
>>> use Metal while other OSs use OpenCL.
>>>
>>
>>
>> OpenCL is an optional feature and there is no plan to change that.
>>
>>
>>
>>
>>>
>>> Tom
>>> LinkedIn: https://www.linkedin.com/in/thomas-elwertowski-a0886032
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>>
>>
>> --
>> Alessandro Pasotti
>> w3:   www.itopen.it
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
> --
>
> Denis Rouzaud
> denis at opengis.ch  <denis at opengis.ch>
> +41 76 370 21 22
>
>
> --

Denis Rouzaud
denis at opengis.ch  <denis at opengis.ch>
+41 76 370 21 22
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180809/f3c5698e/attachment-0001.html>

From telwertowski at comcast.net  Thu Aug  9 08:05:01 2018
From: telwertowski at comcast.net (Tom Elwertowski)
Date: Thu, 9 Aug 2018 11:05:01 -0400
Subject: [QGIS-Developer] OpenCL and macOS
In-Reply-To: <CAMtsY+YnUsgDcP9FmiGzfpB7xRbku8PYz5-vXc0e77B_CgkeCA@mail.gmail.com>
References: <908104fa-d771-eaa0-4b64-ce1e7003256e@comcast.net>
 <CAL5Q6718h6dF2tF5-R=S=rJaqzk8FRVrzJmFQ01SK82+7rJjEA@mail.gmail.com>
 <CAMtsY+YnUsgDcP9FmiGzfpB7xRbku8PYz5-vXc0e77B_CgkeCA@mail.gmail.com>
Message-ID: <6c840f4f-6f38-9194-e1a8-839057fc1162@comcast.net>

The directory found by CMake 
(/System/Library/Frameworks/OpenCL.framework/Headers/) contains only .h 
files.

The khronos site mentioned by Denis offers cl.hpp for v1 and cl2.hpp for 
v2. qgsopenclutils.h includes cl2.hpp.

Should I download and try cl.hpp on my mac? If it compiles, how can I 
test running it.

Tom


On 8/9/18 10:12 AM, Denis Rouzaud wrote:
> I think the issue is that there is no header installed on mac
> https://stackoverflow.com/a/23079478/1548052
> 
> Le jeu. 9 août 2018 à 16:06, Alessandro Pasotti <apasotti at gmail.com 
> <mailto:apasotti at gmail.com>> a écrit :
> 
>     On Thu, Aug 9, 2018 at 3:54 PM, Tom Elwertowski
>     <telwertowski at comcast.net <mailto:telwertowski at comcast.net>> wrote:
> 
>         Hi all,
> 
>         A recent change added OpenCL. Compilation fails on macOS because
>         Apple provides v1.2 (macOS 10.13) while QGIS seems to require v2. 
> 
> 
> 
>     That's wierd: 1.1 is what should be required can you file a ticket
>     and provide full logs?
> 
>         Adding a version to FIND_PACKAGE will fix the macOS compile and
>         not use OpenCL.
> 
>         Apple has deprecated OpenCL in favor of its own Metal
>         technology. OpenCL will remain for macOS 10.14 (Mojave, fall
>         2018) but may be removed after fall 2019.
> 
>         For the future, either OpenCL must remain an optional QGIS
>         feature in order to support macOS or the API needs to be
>         abstracted so that macOS can use Metal while other OSs use OpenCL.
> 
> 
> 
>     OpenCL is an optional feature and there is no plan to change that.
> 
> 
> 
>         Tom
>         LinkedIn: https://www.linkedin.com/in/thomas-elwertowski-a0886032
>         _______________________________________________
>         QGIS-Developer mailing list
>         QGIS-Developer at lists.osgeo.org
>         <mailto:QGIS-Developer at lists.osgeo.org>
>         List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>         Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> 
> 
> 
>     -- 
>     Alessandro Pasotti
>     w3: www.itopen.it <http://www.itopen.it>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> -- 
> 
> Denis Rouzaud
> denis at opengis.ch <mailto:denis at opengis.ch>
> +41 76 370 21 22
> 
> 

From apasotti at gmail.com  Thu Aug  9 08:26:33 2018
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Thu, 9 Aug 2018 17:26:33 +0200
Subject: [QGIS-Developer] OpenCL and macOS
In-Reply-To: <6c840f4f-6f38-9194-e1a8-839057fc1162@comcast.net>
References: <908104fa-d771-eaa0-4b64-ce1e7003256e@comcast.net>
 <CAL5Q6718h6dF2tF5-R=S=rJaqzk8FRVrzJmFQ01SK82+7rJjEA@mail.gmail.com>
 <CAMtsY+YnUsgDcP9FmiGzfpB7xRbku8PYz5-vXc0e77B_CgkeCA@mail.gmail.com>
 <6c840f4f-6f38-9194-e1a8-839057fc1162@comcast.net>
Message-ID: <CAL5Q672cJkJ1K0wQYnfu=CB+4Wyr6DZCUzKzygVVCphQTSYxmw@mail.gmail.com>

On Thu, Aug 9, 2018 at 5:05 PM, Tom Elwertowski <telwertowski at comcast.net>
wrote:

> The directory found by CMake (/System/Library/Frameworks/OpenCL.framework/Headers/)
> contains only .h files.
>
> The khronos site mentioned by Denis offers cl.hpp for v1 and cl2.hpp for
> v2. qgsopenclutils.h includes cl2.hpp.
>
> Should I download and try cl.hpp on my mac?


Sorry but I don't know if that will work (I'm not a mac user), what I know
is that you need cl2.hpp (note that this header supports 1.1 and 1.0) in
order to build QGIS with opencl support and you also need the opencl
library to link to.

Once you've built it, to actually run opencl stuff you need (one or more)
other runtime library that is hardware (intel, AMD, NVidia etc.) and system
dependent and it is dynamically loaded by opencl library.



> If it compiles, how can I test running it.
>


There are tests in the tests folder that you can build and run,
specifically: qgsninecellsfiltertest.cpp and qgsopenclutilstest.cpp

You can also open the QGIS options dialog and check under "Acceleration":
see
https://user-images.githubusercontent.com/142164/43066104-08b6880e-8e64-11e8-8a46-103e368119e5.png

As you can see in the picture OpenCL supported version of that particular
library is 1.1


Let me know how it goes!




>
> Tom
>
>
> On 8/9/18 10:12 AM, Denis Rouzaud wrote:
>
>> I think the issue is that there is no header installed on mac
>> https://stackoverflow.com/a/23079478/1548052
>>
>> Le jeu. 9 août 2018 à 16:06, Alessandro Pasotti <apasotti at gmail.com
>> <mailto:apasotti at gmail.com>> a écrit :
>>
>>     On Thu, Aug 9, 2018 at 3:54 PM, Tom Elwertowski
>>     <telwertowski at comcast.net <mailto:telwertowski at comcast.net>> wrote:
>>
>>         Hi all,
>>
>>         A recent change added OpenCL. Compilation fails on macOS because
>>         Apple provides v1.2 (macOS 10.13) while QGIS seems to require v2.
>>
>>
>>     That's wierd: 1.1 is what should be required can you file a ticket
>>     and provide full logs?
>>
>>         Adding a version to FIND_PACKAGE will fix the macOS compile and
>>         not use OpenCL.
>>
>>         Apple has deprecated OpenCL in favor of its own Metal
>>         technology. OpenCL will remain for macOS 10.14 (Mojave, fall
>>         2018) but may be removed after fall 2019.
>>
>>         For the future, either OpenCL must remain an optional QGIS
>>         feature in order to support macOS or the API needs to be
>>         abstracted so that macOS can use Metal while other OSs use OpenCL.
>>
>>
>>
>>     OpenCL is an optional feature and there is no plan to change that.
>>
>>
>>
>>         Tom
>>         LinkedIn: https://www.linkedin.com/in/thomas-elwertowski-a0886032
>>         _______________________________________________
>>         QGIS-Developer mailing list
>>         QGIS-Developer at lists.osgeo.org
>>         <mailto:QGIS-Developer at lists.osgeo.org>
>>         List info: https://lists.osgeo.org/mailma
>> n/listinfo/qgis-developer
>>         Unsubscribe: https://lists.osgeo.org/mailma
>> n/listinfo/qgis-developer
>>
>>
>>
>>
>>     --     Alessandro Pasotti
>>     w3: www.itopen.it <http://www.itopen.it>
>>     _______________________________________________
>>     QGIS-Developer mailing list
>>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org
>> >
>>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>> --
>>
>> Denis Rouzaud
>> denis at opengis.ch <mailto:denis at opengis.ch>
>> +41 76 370 21 22
>>
>>
>>


-- 
Alessandro Pasotti
w3:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180809/c9cbf664/attachment.html>

From andrew.cutts at gmail.com  Thu Aug  9 09:29:59 2018
From: andrew.cutts at gmail.com (Andrew C)
Date: Thu, 9 Aug 2018 17:29:59 +0100
Subject: [QGIS-Developer] How to create a simple processing script in
 QGIS 3.x, eg just a buffer
In-Reply-To: <CAFFV8FiWRSz+1VY_jwJn=NBUAZTx3Xyn2zCQpqwnQcMXGkS6BQ@mail.gmail.com>
References: <CAH24QJrPT9qSZLadXBpkduTGJJ6KrYYiuzA_8HXJSmOn_5rBoQ@mail.gmail.com>
 <CAFFV8FiWRSz+1VY_jwJn=NBUAZTx3Xyn2zCQpqwnQcMXGkS6BQ@mail.gmail.com>
Message-ID: <CAH24QJobkM-aPODHd8uk-MMjz9poCZnFRQtAWgSFWtacUQR1fw@mail.gmail.com>

Hi Anita,

Thanks very much for this. I am still lost though. If I replace the sink
and add your code I don't get an output in the dialog box - it needs to be
a parameter for that to happen right?

I found this
https://gis.stackexchange.com/questions/282773/writing-a-python-processing-script-with-qgis-3-0
which lead me to this
https://github.com/qgis/QGIS/blob/master/doc/porting_processing.dox

Which is recommending "Best practice in 3.x Processing algorithms is to use
"feature sinks" instead of vector layer outputs"


Kind Regards
Andrew



On Thu, Aug 9, 2018 at 2:23 PM Anita Graser <anitagraser at gmx.at> wrote:

> Hi Andrew,
>
> On Thu, Aug 9, 2018 at 2:57 PM Andrew C <andrew.cutts at gmail.com> wrote:
>
>> I am not clear on how QgsFeatureSinkis working, perhaps that is why I am
>> not getting the buffered layer? Normally in a script I could try printing
>> variables I cannot see where these are printed either when I tested.
>>
>
> I think you'd need an output layer instead of a feature sink. Have a look
> at
> https://github.com/qgis/QGIS/blob/master/python/plugins/processing/algs/qgis/PostGISExecuteAndLoadSQL.py
>
> self.addOutput(QgsProcessingOutputVectorLayer(
>
> self.OUTPUT,
>
> self.tr("Output layer"),
>
> QgsProcessing.TypeVectorAnyGeometry))
>
> Regards,
> Anita
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180809/7bacf404/attachment.html>

From tejvan at live.com  Thu Aug  9 09:31:43 2018
From: tejvan at live.com (Tejas L)
Date: Thu, 9 Aug 2018 16:31:43 +0000
Subject: [QGIS-Developer] QGIS3: Can two different plugins have a common
	processing provider?
Message-ID: <PS1PR03MB3607115F8C723E3E47A66E81A1250@PS1PR03MB3607.apcprd03.prod.outlook.com>

Hello!

We are releasing multiple QGIS3 plugins, each with their own processing algorithms. We would like the processing algorithms of these plugins to appear under a single Processing provider in the Processing toolbox. How can we achieve this?

Regards,
Tej

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180809/5198cdc3/attachment-0001.html>

From alexey.golovizin at yandex.ru  Thu Aug  9 09:32:00 2018
From: alexey.golovizin at yandex.ru (=?utf-8?B?ItCQ0LvQtdC60YHQtdC5INCT0L7Qu9C+0LLQuNC30LjQvSI=?=)
Date: Thu, 09 Aug 2018 19:32:00 +0300
Subject: [QGIS-Developer] QGIS-Developer Digest, Vol 154, Issue 14
Message-ID: <422701533832320@mxfront1g.mail.yandex.net>

Всем привет! Я сейчас в отпуске, вернусь примерно 25 августа.

Интернет здесь возят на оленях, так что почту читаю редко и нерегулярно.

По всем вопросам можете писать Денису Нефёдову: nefedov.da at mipt.ru

По вопросам разработки -- к Руслану Емельянову: ruslanem at gmail.com

---
С уважением, Алексей Головизин
= )

From noreply at qgis.org  Thu Aug  9 09:52:02 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 09 Aug 2018 16:52:02 -0000
Subject: [QGIS-Developer] Plugin [135] mmqgis approval notification.
Message-ID: <20180809165202.12508.20820@2c6504964296>


Plugin mmqgis approval by pcav.
The plugin version "[135] mmqgis 2018.8.9" is now approved
Link: http://plugins.qgis.org/plugins/mmqgis/

From alexey.golovizin at yandex.ru  Thu Aug  9 12:00:48 2018
From: alexey.golovizin at yandex.ru (=?utf-8?B?ItCQ0LvQtdC60YHQtdC5INCT0L7Qu9C+0LLQuNC30LjQvSI=?=)
Date: Thu, 09 Aug 2018 22:00:48 +0300
Subject: [QGIS-Developer] QGIS-Developer Digest, Vol 154, Issue 15
Message-ID: <1017321533841248@mxfront1o.mail.yandex.net>

Всем привет! Я сейчас в отпуске, вернусь примерно 25 августа.

Интернет здесь возят на оленях, так что почту читаю редко и нерегулярно.

По всем вопросам можете писать Денису Нефёдову: nefedov.da at mipt.ru

По вопросам разработки -- к Руслану Емельянову: ruslanem at gmail.com

---
С уважением, Алексей Головизин
= )

From etienne.trimaille at gmail.com  Thu Aug  9 14:08:25 2018
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Thu, 9 Aug 2018 17:08:25 -0400
Subject: [QGIS-Developer] QGIS3: Can two different plugins have a common
 processing provider?
In-Reply-To: <PS1PR03MB3607115F8C723E3E47A66E81A1250@PS1PR03MB3607.apcprd03.prod.outlook.com>
References: <PS1PR03MB3607115F8C723E3E47A66E81A1250@PS1PR03MB3607.apcprd03.prod.outlook.com>
Message-ID: <CAMtDFLLVLbFHZxwoJp4QzBr3HLcCzzHsRc18Nj-xiT84-A06hQ@mail.gmail.com>

I would say:
At plugin load time, check if your other plugins are already loaded. If
yes, don't load the processing provider, it's already loaded by the first
loaded plugin.

You need to use the same provider name (id). So your models won't be broken.

Don't forget to update each processing algorithms when you edit one file.

Le jeu. 9 août 2018 à 12:31, Tejas L <tejvan at live.com> a écrit :

> Hello!
>
> We are releasing multiple QGIS3 plugins, each with their own processing
> algorithms. We would like the processing algorithms of these plugins to
> appear under a single Processing provider in the Processing toolbox. How
> can we achieve this?
>
> Regards,
> Tej
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180809/45360052/attachment.html>

From adenaculture at gmail.com  Thu Aug  9 14:27:02 2018
From: adenaculture at gmail.com (C Hamilton)
Date: Thu, 9 Aug 2018 17:27:02 -0400
Subject: [QGIS-Developer] CAD and QGIS - Working with archaeological sites
Message-ID: <CABPxTTpJc5_ZvS5Bvvbkknsrs-BxWb+UwGmeQxEBE=-Q=rGQqA@mail.gmail.com>

I need to be able to trace out some old surveys of ancient Indian
earthworks such as:

http://scienceviews.com/squier/ancientmonuments3-19.html

I would like to have them properly scaled and then somehow import them into
QGIS. Because many of these sites have been destroyed we don't know
precisely where some are located. The ultimate goal is to use magnetometry
to help find them.

What I would like to do is to import the shape and then drag it around to
see where it best fits.

Any suggestions on how to do this? What can I draw it in and how to import
the shape and retain its proper dimensions?

Also is there a way a non georegistered image be imported, make it somewhat
transparent, and then interactively drag and resize it on the map somewhat
like Google Earth? When you don't really have anything to reference the
image to you can't use georeferencer.

Thanks,

Calvin Hamilton
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180809/23bf718c/attachment.html>

From senhor.neto at gmail.com  Thu Aug  9 15:00:36 2018
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Thu, 9 Aug 2018 23:00:36 +0100
Subject: [QGIS-Developer] [Qgis-user] CAD and QGIS - Working with
	archaeological sites
In-Reply-To: <CABPxTTpJc5_ZvS5Bvvbkknsrs-BxWb+UwGmeQxEBE=-Q=rGQqA@mail.gmail.com>
References: <CABPxTTpJc5_ZvS5Bvvbkknsrs-BxWb+UwGmeQxEBE=-Q=rGQqA@mail.gmail.com>
Message-ID: <CA+H0G_Fc5NqNaLx7qRPqxu67TUpY4wC+5VBrm=04WBWKkeF0xg@mail.gmail.com>

Hi,

On Thu, Aug 9, 2018, 22:27 C Hamilton <adenaculture at gmail.com> wrote:

>
> Also is there a way a non georegistered image be imported, make it
> somewhat transparent, and then interactively drag and resize it on the map
> somewhat like Google Earth? When you don't really have anything to
> reference the image to you can't use georeferencer.
>

I guess you could do that on layout mode. Adding an imagem, set some
transparency and then try to fit it somewhere.

Once it's on the right spot. Save the layout as image storing a world file.
Then you can add it back, and use georeferencer on the original image.

I am not a CAD guy, so I would trace it using QGIS.

Hope it helps,

Alexandre Neto


> Thanks,
>
> Calvin Hamilton
> _______________________________________________
> Qgis-user mailing list
> Qgis-user at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user

-- 
Alexandre Neto
---------------------
@AlexNetoGeo
http://sigsemgrilhetas.wordpress.com
http://gisunchained.wordpress.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180809/7a72bb9a/attachment.html>

From nyall.dawson at gmail.com  Thu Aug  9 16:49:08 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 10 Aug 2018 09:49:08 +1000
Subject: [QGIS-Developer] [Qgis-user] CAD and QGIS - Working with
 archaeological sites
In-Reply-To: <CA+H0G_Fc5NqNaLx7qRPqxu67TUpY4wC+5VBrm=04WBWKkeF0xg@mail.gmail.com>
References: <CABPxTTpJc5_ZvS5Bvvbkknsrs-BxWb+UwGmeQxEBE=-Q=rGQqA@mail.gmail.com>
 <CA+H0G_Fc5NqNaLx7qRPqxu67TUpY4wC+5VBrm=04WBWKkeF0xg@mail.gmail.com>
Message-ID: <CAB28AsjGaPc7DF24W55szAUexqAdUYn24LO+d_pqy4MPKa9c5g@mail.gmail.com>

On Fri, 10 Aug 2018 at 08:01, Alexandre Neto <senhor.neto at gmail.com> wrote:
>
> Hi,
>
> On Thu, Aug 9, 2018, 22:27 C Hamilton <adenaculture at gmail.com> wrote:
>>
>>
>> Also is there a way a non georegistered image be imported, make it somewhat transparent, and then interactively drag and resize it on the map somewhat like Google Earth? When you don't really have anything to reference the image to you can't use georeferencer.
>
>
> I guess you could do that on layout mode. Adding an imagem, set some transparency and then try to fit it somewhere.
>
> Once it's on the right spot. Save the layout as image storing a world file. Then you can add it back, and use georeferencer on the original image.

Actually if you save the world file you shouldn't need to use
georeferencer - it should be placed in the correct place immediately
after loading in QGIS.

> I am not a CAD guy, so I would trace it using QGIS.

Just to add to this - the digitizing tools in QGIS are very powerful
now (especially with the new shape digitizing toolbar in 3.0, and the
Advanced Digitizing dock. I'd go with that approach as doing it in the
GIS means that it's inherently spatial data - vs doing it in CAD,
which means you've gotta manage the spatial reference manually.

Nyall

From nyall.dawson at gmail.com  Thu Aug  9 16:50:58 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 10 Aug 2018 09:50:58 +1000
Subject: [QGIS-Developer] QGIS3: Can two different plugins have a common
 processing provider?
In-Reply-To: <PS1PR03MB3607115F8C723E3E47A66E81A1250@PS1PR03MB3607.apcprd03.prod.outlook.com>
References: <PS1PR03MB3607115F8C723E3E47A66E81A1250@PS1PR03MB3607.apcprd03.prod.outlook.com>
Message-ID: <CAB28Asik80t3JvwsBh0ZjeSRDT5ARGd199D8PtveD1AhZnAwZw@mail.gmail.com>

On Fri, 10 Aug 2018 at 02:31, Tejas L <tejvan at live.com> wrote:
>
> Hello!
>
> We are releasing multiple QGIS3 plugins, each with their own processing algorithms. We would like the processing algorithms of these plugins to appear under a single Processing provider in the Processing toolbox. How can we achieve this?
>

To clarify: Are you wanting the exact same provider to be included in
multiple plugins (with the same algorithms)

OR

A single provider, but multiple plugins which each add different sets
of algorithms to this same provider?

Nyall

From adenaculture at gmail.com  Thu Aug  9 18:11:02 2018
From: adenaculture at gmail.com (C Hamilton)
Date: Thu, 9 Aug 2018 21:11:02 -0400
Subject: [QGIS-Developer] [Qgis-user] CAD and QGIS - Working with
 archaeological sites
In-Reply-To: <CAB28AsjGaPc7DF24W55szAUexqAdUYn24LO+d_pqy4MPKa9c5g@mail.gmail.com>
References: <CABPxTTpJc5_ZvS5Bvvbkknsrs-BxWb+UwGmeQxEBE=-Q=rGQqA@mail.gmail.com>
 <CA+H0G_Fc5NqNaLx7qRPqxu67TUpY4wC+5VBrm=04WBWKkeF0xg@mail.gmail.com>
 <CAB28AsjGaPc7DF24W55szAUexqAdUYn24LO+d_pqy4MPKa9c5g@mail.gmail.com>
Message-ID: <CABPxTTo1gqZksJ921paxu4G2JPM_0C=7dLtPc3g-SoTis+pLQw@mail.gmail.com>

Thanks!!! That is a good idea to use the layout panel.

The advanced digitizing panel was the piece that I was missing. Yes the
tools in QGIS 3 are much better.

On Thu, Aug 9, 2018 at 7:49 PM, Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Fri, 10 Aug 2018 at 08:01, Alexandre Neto <senhor.neto at gmail.com>
> wrote:
> >
> > Hi,
> >
> > On Thu, Aug 9, 2018, 22:27 C Hamilton <adenaculture at gmail.com> wrote:
> >>
> >>
> >> Also is there a way a non georegistered image be imported, make it
> somewhat transparent, and then interactively drag and resize it on the map
> somewhat like Google Earth? When you don't really have anything to
> reference the image to you can't use georeferencer.
> >
> >
> > I guess you could do that on layout mode. Adding an imagem, set some
> transparency and then try to fit it somewhere.
> >
> > Once it's on the right spot. Save the layout as image storing a world
> file. Then you can add it back, and use georeferencer on the original image.
>
> Actually if you save the world file you shouldn't need to use
> georeferencer - it should be placed in the correct place immediately
> after loading in QGIS.
>
> > I am not a CAD guy, so I would trace it using QGIS.
>
> Just to add to this - the digitizing tools in QGIS are very powerful
> now (especially with the new shape digitizing toolbar in 3.0, and the
> Advanced Digitizing dock. I'd go with that approach as doing it in the
> GIS means that it's inherently spatial data - vs doing it in CAD,
> which means you've gotta manage the spatial reference manually.
>
> Nyall
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180809/8bb7008e/attachment-0001.html>

From nyall.dawson at gmail.com  Thu Aug  9 18:17:39 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 10 Aug 2018 11:17:39 +1000
Subject: [QGIS-Developer] [Qgis-user] CAD and QGIS - Working with
 archaeological sites
In-Reply-To: <CABPxTTo1gqZksJ921paxu4G2JPM_0C=7dLtPc3g-SoTis+pLQw@mail.gmail.com>
References: <CABPxTTpJc5_ZvS5Bvvbkknsrs-BxWb+UwGmeQxEBE=-Q=rGQqA@mail.gmail.com>
 <CA+H0G_Fc5NqNaLx7qRPqxu67TUpY4wC+5VBrm=04WBWKkeF0xg@mail.gmail.com>
 <CAB28AsjGaPc7DF24W55szAUexqAdUYn24LO+d_pqy4MPKa9c5g@mail.gmail.com>
 <CABPxTTo1gqZksJ921paxu4G2JPM_0C=7dLtPc3g-SoTis+pLQw@mail.gmail.com>
Message-ID: <CAB28Asjjq2UNm8iYvYV83w6p9rpu1d17Pa6t9__+_CfsQdRuHw@mail.gmail.com>

On Fri, 10 Aug 2018 at 11:11, C Hamilton <adenaculture at gmail.com> wrote:
>
> Thanks!!! That is a good idea to use the layout panel.
>
> The advanced digitizing panel was the piece that I was missing. Yes the tools in QGIS 3 are much better.

This is certainly a novel task to do in QGIS. I'd love to see a write
up/case study/blog post detailing your experiences after you've
finished!

Nyall

>
> On Thu, Aug 9, 2018 at 7:49 PM, Nyall Dawson <nyall.dawson at gmail.com> wrote:
>>
>> On Fri, 10 Aug 2018 at 08:01, Alexandre Neto <senhor.neto at gmail.com> wrote:
>> >
>> > Hi,
>> >
>> > On Thu, Aug 9, 2018, 22:27 C Hamilton <adenaculture at gmail.com> wrote:
>> >>
>> >>
>> >> Also is there a way a non georegistered image be imported, make it somewhat transparent, and then interactively drag and resize it on the map somewhat like Google Earth? When you don't really have anything to reference the image to you can't use georeferencer.
>> >
>> >
>> > I guess you could do that on layout mode. Adding an imagem, set some transparency and then try to fit it somewhere.
>> >
>> > Once it's on the right spot. Save the layout as image storing a world file. Then you can add it back, and use georeferencer on the original image.
>>
>> Actually if you save the world file you shouldn't need to use
>> georeferencer - it should be placed in the correct place immediately
>> after loading in QGIS.
>>
>> > I am not a CAD guy, so I would trace it using QGIS.
>>
>> Just to add to this - the digitizing tools in QGIS are very powerful
>> now (especially with the new shape digitizing toolbar in 3.0, and the
>> Advanced Digitizing dock. I'd go with that approach as doing it in the
>> GIS means that it's inherently spatial data - vs doing it in CAD,
>> which means you've gotta manage the spatial reference manually.
>>
>> Nyall
>
>

From denis.rouzaud at gmail.com  Thu Aug  9 21:45:39 2018
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Fri, 10 Aug 2018 06:45:39 +0200
Subject: [QGIS-Developer] [Qgis-user] CAD and QGIS - Working with
 archaeological sites
In-Reply-To: <CAB28Asjjq2UNm8iYvYV83w6p9rpu1d17Pa6t9__+_CfsQdRuHw@mail.gmail.com>
References: <CABPxTTpJc5_ZvS5Bvvbkknsrs-BxWb+UwGmeQxEBE=-Q=rGQqA@mail.gmail.com>
 <CA+H0G_Fc5NqNaLx7qRPqxu67TUpY4wC+5VBrm=04WBWKkeF0xg@mail.gmail.com>
 <CAB28AsjGaPc7DF24W55szAUexqAdUYn24LO+d_pqy4MPKa9c5g@mail.gmail.com>
 <CABPxTTo1gqZksJ921paxu4G2JPM_0C=7dLtPc3g-SoTis+pLQw@mail.gmail.com>
 <CAB28Asjjq2UNm8iYvYV83w6p9rpu1d17Pa6t9__+_CfsQdRuHw@mail.gmail.com>
Message-ID: <CAMtsY+bp4Hn_jWTDWo3novab6KtZo5SNAFR84kSDaATtf5Hnww@mail.gmail.com>

Hi Calvin,

Not sure it is exactly what you need, but I would have a look at two
plugins Olivier Dalang wrote some time ago
https://github.com/olivierdalang/VectorBender
https://github.com/olivierdalang/RasterBender

He is the original author of the advanced digitizing panel as a plugin.
These are QGIS 2 but it should not be a great effort to port them.

Cheers
Denis

Le ven. 10 août 2018 à 03:18, Nyall Dawson <nyall.dawson at gmail.com> a
écrit :

> On Fri, 10 Aug 2018 at 11:11, C Hamilton <adenaculture at gmail.com> wrote:
> >
> > Thanks!!! That is a good idea to use the layout panel.
> >
> > The advanced digitizing panel was the piece that I was missing. Yes the
> tools in QGIS 3 are much better.
>
> This is certainly a novel task to do in QGIS. I'd love to see a write
> up/case study/blog post detailing your experiences after you've
> finished!
>
> Nyall
>
> >
> > On Thu, Aug 9, 2018 at 7:49 PM, Nyall Dawson <nyall.dawson at gmail.com>
> wrote:
> >>
> >> On Fri, 10 Aug 2018 at 08:01, Alexandre Neto <senhor.neto at gmail.com>
> wrote:
> >> >
> >> > Hi,
> >> >
> >> > On Thu, Aug 9, 2018, 22:27 C Hamilton <adenaculture at gmail.com> wrote:
> >> >>
> >> >>
> >> >> Also is there a way a non georegistered image be imported, make it
> somewhat transparent, and then interactively drag and resize it on the map
> somewhat like Google Earth? When you don't really have anything to
> reference the image to you can't use georeferencer.
> >> >
> >> >
> >> > I guess you could do that on layout mode. Adding an imagem, set some
> transparency and then try to fit it somewhere.
> >> >
> >> > Once it's on the right spot. Save the layout as image storing a world
> file. Then you can add it back, and use georeferencer on the original image.
> >>
> >> Actually if you save the world file you shouldn't need to use
> >> georeferencer - it should be placed in the correct place immediately
> >> after loading in QGIS.
> >>
> >> > I am not a CAD guy, so I would trace it using QGIS.
> >>
> >> Just to add to this - the digitizing tools in QGIS are very powerful
> >> now (especially with the new shape digitizing toolbar in 3.0, and the
> >> Advanced Digitizing dock. I'd go with that approach as doing it in the
> >> GIS means that it's inherently spatial data - vs doing it in CAD,
> >> which means you've gotta manage the spatial reference manually.
> >>
> >> Nyall
> >
> >
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 

Denis Rouzaud
denis at opengis.ch  <denis at opengis.ch>
+41 76 370 21 22
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180810/aa049885/attachment.html>

From tejvan at live.com  Fri Aug 10 00:13:14 2018
From: tejvan at live.com (Tejas L)
Date: Fri, 10 Aug 2018 07:13:14 +0000
Subject: [QGIS-Developer] QGIS3: Can two different plugins have a common
 processing provider?
In-Reply-To: <CAB28Asik80t3JvwsBh0ZjeSRDT5ARGd199D8PtveD1AhZnAwZw@mail.gmail.com>
References: <PS1PR03MB3607115F8C723E3E47A66E81A1250@PS1PR03MB3607.apcprd03.prod.outlook.com>,
 <CAB28Asik80t3JvwsBh0ZjeSRDT5ARGd199D8PtveD1AhZnAwZw@mail.gmail.com>
Message-ID: <PS1PR03MB360744B2665CBB691D0475BCA1240@PS1PR03MB3607.apcprd03.prod.outlook.com>

Nyall: It's the second option: we want a single provider into which multiple plugins add their respective sets of algorithms.

Etienne: If a provider is already loaded, how can I add my algorithm to it? QGIS crashes when i try to add an algorithm from plugin X into a provider from plugin Y. Would be great If you have a working snippet.
________________________________
From: Nyall Dawson <nyall.dawson at gmail.com>
Sent: Friday, August 10, 2018 5:20 AM
To: tejvan at live.com
Cc: qgis-developer
Subject: Re: [QGIS-Developer] QGIS3: Can two different plugins have a common processing provider?

On Fri, 10 Aug 2018 at 02:31, Tejas L <tejvan at live.com> wrote:
>
> Hello!
>
> We are releasing multiple QGIS3 plugins, each with their own processing algorithms. We would like the processing algorithms of these plugins to appear under a single Processing provider in the Processing toolbox. How can we achieve this?
>

To clarify: Are you wanting the exact same provider to be included in
multiple plugins (with the same algorithms)

OR

A single provider, but multiple plugins which each add different sets
of algorithms to this same provider?

Nyall
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180810/b1ad645d/attachment.html>

From nyall.dawson at gmail.com  Fri Aug 10 01:23:50 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 10 Aug 2018 18:23:50 +1000
Subject: [QGIS-Developer] QEP 130: Flexible history log/register
Message-ID: <CAB28AsihhuswOW-KRYD_LcUUAko=WVcXNG5u8PgZYTLhLKi9Qw@mail.gmail.com>

Hi all,

Please see https://github.com/qgis/QGIS-Enhancement-Proposals/issues/130
for a newly filed QEP regarding an application wide history/log
register.

Comments, suggestions and feedback is welcomed!

Nyall

From andrew.cutts at gmail.com  Fri Aug 10 05:05:30 2018
From: andrew.cutts at gmail.com (Andrew C)
Date: Fri, 10 Aug 2018 13:05:30 +0100
Subject: [QGIS-Developer] How to create a simple processing script in
 QGIS 3.x, eg just a buffer
In-Reply-To: <CAH24QJobkM-aPODHd8uk-MMjz9poCZnFRQtAWgSFWtacUQR1fw@mail.gmail.com>
References: <CAH24QJrPT9qSZLadXBpkduTGJJ6KrYYiuzA_8HXJSmOn_5rBoQ@mail.gmail.com>
 <CAFFV8FiWRSz+1VY_jwJn=NBUAZTx3Xyn2zCQpqwnQcMXGkS6BQ@mail.gmail.com>
 <CAH24QJobkM-aPODHd8uk-MMjz9poCZnFRQtAWgSFWtacUQR1fw@mail.gmail.com>
Message-ID: <CAH24QJoJcSSZbdm50QSK=pSdqsfy764EOTsvaYDnq-Eswaecuw@mail.gmail.com>

Hi Anita,

I worked it out. Here is a very simple replication of a buffer for
scripting, in case anyone else needs it. I don't know if this is best
practice but it works for a simple test. I didn't realise I could parse
parameters['INPUT'] as an input.

Thanks for your help

Kind Regards

Andrew

import processing
from qgis.PyQt.QtCore import QCoreApplication
from qgis.core import QgsProcessingAlgorithm, QgsProcessing,
QgsProcessingParameterFeatureSink,QgsProcessingParameterFeatureSource

class testAlg(QgsProcessingAlgorithm):
    OUTPUT = 'OUTPUT'
    INPUT = 'INPUT'

    def tr(self, text):
        return QCoreApplication.translate('testalg', text)

    def createInstance(self):
        return type(self)()

    def group(self):
        return self.tr('Test')

    def groupId(self):
        return 'test'

    def __init__(self):
        super().__init__()

    def initAlgorithm(self, config=None):

        self.addParameter(
            QgsProcessingParameterFeatureSource(
                self.INPUT,
                self.tr('Input layer'),
                [QgsProcessing.TypeVectorAnyGeometry]
            )
        )

        self.addParameter(
            QgsProcessingParameterFeatureSink(
                self.OUTPUT,
                self.tr('Output'),
                QgsProcessing.TypeVectorPolygon
            )
        )

    def name(self):
        return 'testalg'

    def displayName(self):
        return self.tr('Test Algorithm')

    def processAlgorithm(self, parameters, context, feedback):

        output = processing.run("native:buffer", {
            'INPUT': parameters['INPUT'],
            'DISTANCE': 10,
            'SEGMENTS': 5,
            'END_CAP_STYLE': 0,
            'JOIN_STYLE': 0,
            'MITER_LIMIT': 2,
            'DISSOLVE': False,
            'OUTPUT': parameters['OUTPUT']
        }, context=context, feedback=feedback)['OUTPUT']

        return {self.OUTPUT: output}

On Thu, Aug 9, 2018 at 5:29 PM Andrew C <andrew.cutts at gmail.com> wrote:

> Hi Anita,
>
> Thanks very much for this. I am still lost though. If I replace the sink
> and add your code I don't get an output in the dialog box - it needs to be
> a parameter for that to happen right?
>
> I found this
> https://gis.stackexchange.com/questions/282773/writing-a-python-processing-script-with-qgis-3-0
> which lead me to this
> https://github.com/qgis/QGIS/blob/master/doc/porting_processing.dox
>
> Which is recommending "Best practice in 3.x Processing algorithms is to
> use "feature sinks" instead of vector layer outputs"
>
>
> Kind Regards
> Andrew
>
>
>
> On Thu, Aug 9, 2018 at 2:23 PM Anita Graser <anitagraser at gmx.at> wrote:
>
>> Hi Andrew,
>>
>> On Thu, Aug 9, 2018 at 2:57 PM Andrew C <andrew.cutts at gmail.com> wrote:
>>
>>> I am not clear on how QgsFeatureSinkis working, perhaps that is why I am
>>> not getting the buffered layer? Normally in a script I could try printing
>>> variables I cannot see where these are printed either when I tested.
>>>
>>
>> I think you'd need an output layer instead of a feature sink. Have a look
>> at
>> https://github.com/qgis/QGIS/blob/master/python/plugins/processing/algs/qgis/PostGISExecuteAndLoadSQL.py
>>
>> self.addOutput(QgsProcessingOutputVectorLayer(
>>
>> self.OUTPUT,
>>
>> self.tr("Output layer"),
>>
>> QgsProcessing.TypeVectorAnyGeometry))
>>
>> Regards,
>> Anita
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180810/ec0cca7b/attachment-0001.html>

From anitagraser at gmx.at  Fri Aug 10 05:32:42 2018
From: anitagraser at gmx.at (Anita Graser)
Date: Fri, 10 Aug 2018 14:32:42 +0200
Subject: [QGIS-Developer] How to create a simple processing script in
 QGIS 3.x, eg just a buffer
In-Reply-To: <CAH24QJoJcSSZbdm50QSK=pSdqsfy764EOTsvaYDnq-Eswaecuw@mail.gmail.com>
References: <CAH24QJrPT9qSZLadXBpkduTGJJ6KrYYiuzA_8HXJSmOn_5rBoQ@mail.gmail.com>
 <CAFFV8FiWRSz+1VY_jwJn=NBUAZTx3Xyn2zCQpqwnQcMXGkS6BQ@mail.gmail.com>
 <CAH24QJobkM-aPODHd8uk-MMjz9poCZnFRQtAWgSFWtacUQR1fw@mail.gmail.com>
 <CAH24QJoJcSSZbdm50QSK=pSdqsfy764EOTsvaYDnq-Eswaecuw@mail.gmail.com>
Message-ID: <CAFFV8Fj0N75OsGs3-2zPM9Ez-=9SqKVPAVc23q71MXMEDUzQzg@mail.gmail.com>

Great, thanks for sharing, Andrew!

Anita

On Fri, Aug 10, 2018 at 2:05 PM Andrew C <andrew.cutts at gmail.com> wrote:

> Hi Anita,
>
> I worked it out. Here is a very simple replication of a buffer for
> scripting, in case anyone else needs it. I don't know if this is best
> practice but it works for a simple test. I didn't realise I could parse
> parameters['INPUT'] as an input.
>
> Thanks for your help
>
> Kind Regards
>
> Andrew
>
> import processing
> from qgis.PyQt.QtCore import QCoreApplication
> from qgis.core import QgsProcessingAlgorithm, QgsProcessing,
> QgsProcessingParameterFeatureSink,QgsProcessingParameterFeatureSource
>
> class testAlg(QgsProcessingAlgorithm):
>     OUTPUT = 'OUTPUT'
>     INPUT = 'INPUT'
>
>     def tr(self, text):
>         return QCoreApplication.translate('testalg', text)
>
>     def createInstance(self):
>         return type(self)()
>
>     def group(self):
>         return self.tr('Test')
>
>     def groupId(self):
>         return 'test'
>
>     def __init__(self):
>         super().__init__()
>
>     def initAlgorithm(self, config=None):
>
>         self.addParameter(
>             QgsProcessingParameterFeatureSource(
>                 self.INPUT,
>                 self.tr('Input layer'),
>                 [QgsProcessing.TypeVectorAnyGeometry]
>             )
>         )
>
>         self.addParameter(
>             QgsProcessingParameterFeatureSink(
>                 self.OUTPUT,
>                 self.tr('Output'),
>                 QgsProcessing.TypeVectorPolygon
>             )
>         )
>
>     def name(self):
>         return 'testalg'
>
>     def displayName(self):
>         return self.tr('Test Algorithm')
>
>     def processAlgorithm(self, parameters, context, feedback):
>
>         output = processing.run("native:buffer", {
>             'INPUT': parameters['INPUT'],
>             'DISTANCE': 10,
>             'SEGMENTS': 5,
>             'END_CAP_STYLE': 0,
>             'JOIN_STYLE': 0,
>             'MITER_LIMIT': 2,
>             'DISSOLVE': False,
>             'OUTPUT': parameters['OUTPUT']
>         }, context=context, feedback=feedback)['OUTPUT']
>
>         return {self.OUTPUT: output}
>
> On Thu, Aug 9, 2018 at 5:29 PM Andrew C <andrew.cutts at gmail.com> wrote:
>
>> Hi Anita,
>>
>> Thanks very much for this. I am still lost though. If I replace the sink
>> and add your code I don't get an output in the dialog box - it needs to be
>> a parameter for that to happen right?
>>
>> I found this
>> https://gis.stackexchange.com/questions/282773/writing-a-python-processing-script-with-qgis-3-0
>> which lead me to this
>> https://github.com/qgis/QGIS/blob/master/doc/porting_processing.dox
>>
>> Which is recommending "Best practice in 3.x Processing algorithms is to
>> use "feature sinks" instead of vector layer outputs"
>>
>>
>> Kind Regards
>> Andrew
>>
>>
>>
>> On Thu, Aug 9, 2018 at 2:23 PM Anita Graser <anitagraser at gmx.at> wrote:
>>
>>> Hi Andrew,
>>>
>>> On Thu, Aug 9, 2018 at 2:57 PM Andrew C <andrew.cutts at gmail.com> wrote:
>>>
>>>> I am not clear on how QgsFeatureSinkis working, perhaps that is why I
>>>> am not getting the buffered layer? Normally in a script I could try
>>>> printing variables I cannot see where these are printed either when I
>>>> tested.
>>>>
>>>
>>> I think you'd need an output layer instead of a feature sink. Have a
>>> look at
>>> https://github.com/qgis/QGIS/blob/master/python/plugins/processing/algs/qgis/PostGISExecuteAndLoadSQL.py
>>>
>>> self.addOutput(QgsProcessingOutputVectorLayer(
>>>
>>> self.OUTPUT,
>>>
>>> self.tr("Output layer"),
>>>
>>> QgsProcessing.TypeVectorAnyGeometry))
>>>
>>> Regards,
>>> Anita
>>>
>>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180810/5a181955/attachment.html>

From rudivs at gmail.com  Fri Aug 10 07:22:02 2018
From: rudivs at gmail.com (Rudi von Staden)
Date: Fri, 10 Aug 2018 16:22:02 +0200
Subject: [QGIS-Developer] QGIS builds
In-Reply-To: <CAB28Ashrouj+bpvBFPG_c94xByTtJ5o=gedZaZVhLXRmZBdCFw@mail.gmail.com>
References: <CAOJAE5pKki7a=e4OJ556ZrreaeVDE2S=rFRaLxhtDhd7a5tbfw@mail.gmail.com>
 <CAOJAE5qyvG4mAmOAG-KN-dw1sJzCjbLtMU09xHb77v+Wgy76XA@mail.gmail.com>
 <CAB28Ashrouj+bpvBFPG_c94xByTtJ5o=gedZaZVhLXRmZBdCFw@mail.gmail.com>
Message-ID: <CAOJAE5pK4adYqqrUDzQ5C0ZvKMOEwStFwzq6JMTkgvffkxWguA@mail.gmail.com>

On Wed, 8 Aug 2018 at 23:47, Nyall Dawson <nyall.dawson at gmail.com> wrote:

> > I have the build environment set up from scratch on a new computer, and
> I'm getting the same error building mdalprovider in the master branch
> (C:\OSGeo4W64\bin\hdf5.dll : fatal error LNK1107: invalid or corrupt file:
> cannot read at 0x2F0).
>
> I've seen this too. I haven't had time to investigate a proper fix, so
> in the meantime I just edit src/providers/mdal/CMakeLists.txt and
> remove all mention of HDF5. That gets the build working temporarily.
>

Thanks, that worked. I also encountered an issue with `synccrsdb` (MSB6006
cmd.exe exited with code -1073741515). In case anyone else comes across
that, the solution was to copy crssync.exe from 'OSGeo4W64\apps\qgis-dev'
to 'C:\OSGeo4W64\bin'. It's probably in one of the other osgeo4w packages,
but I haven't figured out which one yet.

Rudi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180810/8c7844fb/attachment.html>

From telwertowski at comcast.net  Fri Aug 10 09:07:27 2018
From: telwertowski at comcast.net (Tom Elwertowski)
Date: Fri, 10 Aug 2018 12:07:27 -0400
Subject: [QGIS-Developer] OpenCL and macOS
In-Reply-To: <CAL5Q672cJkJ1K0wQYnfu=CB+4Wyr6DZCUzKzygVVCphQTSYxmw@mail.gmail.com>
References: <908104fa-d771-eaa0-4b64-ce1e7003256e@comcast.net>
 <CAL5Q6718h6dF2tF5-R=S=rJaqzk8FRVrzJmFQ01SK82+7rJjEA@mail.gmail.com>
 <CAMtsY+YnUsgDcP9FmiGzfpB7xRbku8PYz5-vXc0e77B_CgkeCA@mail.gmail.com>
 <6c840f4f-6f38-9194-e1a8-839057fc1162@comcast.net>
 <CAL5Q672cJkJ1K0wQYnfu=CB+4Wyr6DZCUzKzygVVCphQTSYxmw@mail.gmail.com>
Message-ID: <98c684fb-ae68-83ab-04c7-83e56b55da4c@comcast.net>

For macOS, copying cl2.hpp from 
https://github.com/KhronosGroup/OpenCL-CLHPP/releases to 
/usr/local/include/CL works.

Setting USE_OPENCL=OFF also works to disable OpenCL.

One or the other is necessary or macOS will try the use the v1.2 C 
headers provided by Apple and pointed to by OpenCL_INCLUDE_DIR.

After lanuching QGIS, I see the Options|Acceleration panel with three 
choices:
Intel(R) Core(TM) i7-3615QM CPU @ 2.30GHz
HD Graphics 4000
GeForce GT 650M

To automate the mac build, my suggestion is to create a 
OpenCL_HPP_INCLUDE_DIR variable. If a mac user sets it, use OpenCL; if 
not, don't use OpenCL. For other platforms, OpenCL_HPP_INCLUDE_DIR is 
automatically set to OpenCL_INCLUDE_DIR.

Tom


From adenaculture at gmail.com  Fri Aug 10 09:30:53 2018
From: adenaculture at gmail.com (C Hamilton)
Date: Fri, 10 Aug 2018 12:30:53 -0400
Subject: [QGIS-Developer] [Qgis-user] CAD and QGIS - Working with
 archaeological sites
In-Reply-To: <10ab-5b6d4200-27-1b48b140@206534598>
References: <CAB28Asjjq2UNm8iYvYV83w6p9rpu1d17Pa6t9__+_CfsQdRuHw@mail.gmail.com>
 <10ab-5b6d4200-27-1b48b140@206534598>
Message-ID: <CABPxTTo_h-zXv7aoD3O=uFnKYQmLEuvzr4YyR=Pu-K+fXn4+og@mail.gmail.com>

Somehow I missed seeing that plugin. It looks promising.

Thanks to everyone. This group is awesome!!!

On Fri, Aug 10, 2018 at 3:42 AM, Agustin Angel Diez Castillo <
agustin.diez at uv.es> wrote:

> Just in case, two things I may have overlooked in previous messages, you
> can vectorize your file, and you can do transparency by pixel as far as you
> background is white 255, 255, 255 will do the trick. If you want to do some
> adjustments to the original images, or add other no georeferenced ones, the
> new freehand georeferencer [1] in Qgis 3x it is the perfect tool for
> archaeologists, at least for this one.
> Best
>  Agustín
> [1] http://gvellut.github.io/FreehandRasterGeoreferencer/
>
> El Viernes 10 Agosto 2018 03:17 CEST, Nyall Dawson <nyall.dawson at gmail.com>
> Ha escrito:
>
> > On Fri, 10 Aug 2018 at 11:11, C Hamilton <adenaculture at gmail.com> wrote:
> > >
> > > Thanks!!! That is a good idea to use the layout panel.
> > >
> > > The advanced digitizing panel was the piece that I was missing. Yes
> the tools in QGIS 3 are much better.
> >
> > This is certainly a novel task to do in QGIS. I'd love to see a write
> > up/case study/blog post detailing your experiences after you've
> > finished!
> >
> > Nyall
> >
> > >
> > > On Thu, Aug 9, 2018 at 7:49 PM, Nyall Dawson <nyall.dawson at gmail.com>
> wrote:
> > >>
> > >> On Fri, 10 Aug 2018 at 08:01, Alexandre Neto <senhor.neto at gmail.com>
> wrote:
> > >> >
> > >> > Hi,
> > >> >
> > >> > On Thu, Aug 9, 2018, 22:27 C Hamilton <adenaculture at gmail.com>
> wrote:
> > >> >>
> > >> >>
> > >> >> Also is there a way a non georegistered image be imported, make it
> somewhat transparent, and then interactively drag and resize it on the map
> somewhat like Google Earth? When you don't really have anything to
> reference the image to you can't use georeferencer.
> > >> >
> > >> >
> > >> > I guess you could do that on layout mode. Adding an imagem, set
> some transparency and then try to fit it somewhere.
> > >> >
> > >> > Once it's on the right spot. Save the layout as image storing a
> world file. Then you can add it back, and use georeferencer on the original
> image.
> > >>
> > >> Actually if you save the world file you shouldn't need to use
> > >> georeferencer - it should be placed in the correct place immediately
> > >> after loading in QGIS.
> > >>
> > >> > I am not a CAD guy, so I would trace it using QGIS.
> > >>
> > >> Just to add to this - the digitizing tools in QGIS are very powerful
> > >> now (especially with the new shape digitizing toolbar in 3.0, and the
> > >> Advanced Digitizing dock. I'd go with that approach as doing it in the
> > >> GIS means that it's inherently spatial data - vs doing it in CAD,
>
> > >> which means you've gotta manage the spatial reference manually.
> > >>
> > >> Nyall
> > >
> > >
> > _______________________________________________
> > Qgis-user mailing list
> > Qgis-user at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180810/3aff8759/attachment-0001.html>

From rudivs at gmail.com  Fri Aug 10 12:14:45 2018
From: rudivs at gmail.com (Rudi von Staden)
Date: Fri, 10 Aug 2018 21:14:45 +0200
Subject: [QGIS-Developer] Difference in area calculation using memory vs
 output layer
In-Reply-To: <CAB28AsjrWfQ8i-VFbTgs+ZX5aiE=mDkWuG_ZosSFx4h4702pQA@mail.gmail.com>
References: <CAOJAE5obG8BM-uAbv+LXq9aEtJkwihm6oW2SHZcqMaHZo89yTA@mail.gmail.com>
 <CAB28AsjrWfQ8i-VFbTgs+ZX5aiE=mDkWuG_ZosSFx4h4702pQA@mail.gmail.com>
Message-ID: <CAOJAE5odRdtjBx+D_jq6id_vZd6dPJUEic3w1vxAkkjss_gg_Q@mail.gmail.com>

On Thu, 9 Aug 2018 at 08:39, Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Wed, 8 Aug 2018 at 18:06, Rudi von Staden <rudivs at gmail.com> wrote:
>
> >
> > I did also calculate a range of zonal stats on the layer (which has only
> one multipolygon feature), but those results were consistent between output
> / memory layers.
> >
> > Is the area difference expected because of how shapefiles store geometry
> vs how they are handled by memory layers, or could there be a bug
> somewhere? Maybe this isn't the recommended way to calculate area? In case
> it matters, I'm using a custom CRS:
> >
> > "+proj=aea +lat_1=-24 +lat_2=-32 +lat_0=0 +lon_0=24 +x_0=0 +y_0=0
> +datum=WGS84 +units=m +no_defs"
>
> This may be a silly question -- but can you confirm that both layers
> are definitely in the same CRS?
>

Yes, they are both the result of an algorithm operating on the same source
layer.


> If so, I'd try exporting the two geometries to WKT and inspect for
> differences.
>

There are partial differences between the WKT. It seems that the OGR layer
drops some polygons. I also used isGeosValid() to check the validity, and
the OGR layer reported invalid geometry, while the Memory layer was valid.
I should note that the input layer has some invalid geometries (I'm using
buffer by 0 to try to clean up the geometry). I've put together a test
project and processing script to demonstrate the issue, including text
files with the WKT of the memory and ogr features. As a side-note, the
script also crashes QGIS a minute or so after running. I suspect it's
because I may have used incorrect output parameters.

https://www.dropbox.com/s/u1la8y63qlabiu4/area_test.zip?dl=0

Let me know if I should submit a bug report for this.

Rudi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180810/0fa4dd3e/attachment.html>

From noreply at qgis.org  Fri Aug 10 14:32:28 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Fri, 10 Aug 2018 21:32:28 -0000
Subject: [QGIS-Developer] Plugin [1516] QGIS Full Motion Video approval
	notification.
Message-ID: <20180810213228.7402.89811@2c6504964296>


Plugin QGIS Full Motion Video approval by pcav.
The plugin version "[1516] QGIS Full Motion Video 1.2" is now approved
Link: http://plugins.qgis.org/plugins/QGIS_FMV/

From noreply at qgis.org  Sun Aug 12 03:33:37 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Sun, 12 Aug 2018 10:33:37 -0000
Subject: [QGIS-Developer] Plugin [1519] AutomaTracks approval notification.
Message-ID: <20180812103337.23935.28155@2c6504964296>


Plugin AutomaTracks approval by pcav.
The plugin version "[1519] AutomaTracks 1.0" is now approved
Link: http://plugins.qgis.org/plugins/AutomaTracks/

From evankanter28 at gmail.com  Sun Aug 12 12:45:52 2018
From: evankanter28 at gmail.com (Evan Kanter)
Date: Sun, 12 Aug 2018 15:45:52 -0400
Subject: [QGIS-Developer] Please help! - QGIS expressions don't evaluate as
	expected
Message-ID: <5b708e6e.1c69fb81.211ef.1465@mx.google.com>

Hi Devs,
I’m sending you a link to my post on Stack Overlow, requesting assistance!
https://stackoverflow.com/questions/51812251/qgis-expressions-dont-evaluate-as-expected

I would really appreciate your help. I am pasting the content of my post on stack overflow below for your convenience.

Evan Kanter
evankanter28 at gmail.com

I am using QGIS with a vector layer and the attribute table stored at this link:https://docs.google.com/spreadsheets/d/1K7rRdlcSheclJ6MqzpBNwSZei911WDV1Bl2zBGV38-s/edit?usp=sharing
I then have the following code:
CASE

/*Kieran Winner*/
WHEN "r_Kieran" > "r_Wynne" 
        THEN ramp_color('PCMarg', scale_linear(("r_Kieran"/"r_TOTAL"-"r_Possian"/"r_TOTAL"),  0,  1, 0, 1))     
ELSE color_rgb(64, 224, 208)
END
Here's the problem: The code evaluates incorrectly.
Take row 15 of the attribute table for example. (Where PD_Number=14) You would expect that the condition would evaluate TRUE since "r_Kieran"=397 and "r_Wynne"=225.
But, it evaluates FALSE in QGIS, as indicated by the colour that is displayed on the map!
I've spent hours simplifying code, and pulling my hair out over this.
Please help!
Thanks, Evan

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180812/165f1d1e/attachment.html>

From enzedrailmaps at gmail.com  Sun Aug 12 13:18:45 2018
From: enzedrailmaps at gmail.com (Patrick Dunford)
Date: Mon, 13 Aug 2018 08:18:45 +1200
Subject: [QGIS-Developer] GeoPackages with constraint problems
In-Reply-To: <5da3820d-c9a8-0a26-89e3-7cab6f0225c5@opengis.ch>
References: <5da3820d-c9a8-0a26-89e3-7cab6f0225c5@opengis.ch>
Message-ID: <46a2001c-73a3-b0d4-ae44-3ff0f98cf153@gmail.com>

Hi Matthias

I have seen this type of error message comes up when trying to open a 
geopackage from a 3.x project in 2.18

No data corruption in the original layer as far as I can tell.


On 04/08/18 01:59, Matthias Kuhn wrote:
> Hi everyone,
>
> I recently gave a course where geopackages were used as datasets. Those
> geopackages had foreign key constraints (among others) activated. While
> editing those files, at least on one machine, someone managed to get it
> into a "corrupted" state (layer disappeared). Trying to load this layer
> later on will result in a bad layer. The only thing we have is a tiny
> message in the message log informing about "pragma foreign_key_check on
> 'file.gpkg' failed. You can disable this check by setting the
> OGR_GPKG_FOREIGN_KEY_CHECK configuration option to NO".
>
> I think it's quite strange that QGIS/OGR manages to bring a GeoPackage
> into a corrupted state and then denies to open it.
>
> * It would - I guess - be preferable to prevent a GeoPackage from going
> into such a state
>
> * Since it appears to be quite easy to bring a dataset into such a state
> (although I'm afraid I can't provide detailed steps) QGIS should by
> default probably rather open (and warn) or warn and give a possibility
> to still open.
>
> Did others experience this as well and have more ideas what to do?
>
> Thanks and best wishes
> Matthias
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From nyall.dawson at gmail.com  Sun Aug 12 16:17:16 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 13 Aug 2018 09:17:16 +1000
Subject: [QGIS-Developer] Please help! - QGIS expressions don't evaluate
 as expected
In-Reply-To: <5b708e6e.1c69fb81.211ef.1465@mx.google.com>
References: <5b708e6e.1c69fb81.211ef.1465@mx.google.com>
Message-ID: <CAB28AshrxHhVX9cBXViuuLTuMczapM9QmmtfJwTehCPJzjGCng@mail.gmail.com>

On Mon, 13 Aug 2018 at 05:46, Evan Kanter <evankanter28 at gmail.com> wrote:
>
> Hi Devs,
>
> I’m sending you a link to my post on Stack Overlow, requesting assistance!
>
> https://stackoverflow.com/questions/51812251/qgis-expressions-dont-evaluate-as-expected
>
>
>
> I would really appreciate your help. I am pasting the content of my post on stack overflow below for your convenience.

Works fine for me on QGIS 3.2.1, when the layer is added using the
"Delimited Text" provider.

How are you adding the layer? I'd suggest packaging up a sample
project with the data which exhibits this issue.

Nyall

From nyall.dawson at gmail.com  Sun Aug 12 17:23:25 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 13 Aug 2018 10:23:25 +1000
Subject: [QGIS-Developer] How long before closing an issue on "lack of
	feedback"?
Message-ID: <CAB28AshO-VF0U9-7C0CAYN4M4qgXmO1xbXq599XA5+SxT6ouJg@mail.gmail.com>

Quick question re closing issues on redmine:

What's an "acceptable" amount of time between adding a question to a
ticket/marking as "feedback" before closing that issue as "Closed due
to lack of feedback"?

Is 14 days sufficient?

Nyall

From siki at agt.bme.hu  Sun Aug 12 23:32:29 2018
From: siki at agt.bme.hu (Siki Zoltan)
Date: Mon, 13 Aug 2018 08:32:29 +0200 (CEST)
Subject: [QGIS-Developer] Please help! - QGIS expressions don't evaluate
 as expected
In-Reply-To: <5b708e6e.1c69fb81.211ef.1465@mx.google.com>
References: <5b708e6e.1c69fb81.211ef.1465@mx.google.com>
Message-ID: <Pine.LNX.4.64.1808130830510.11757@bme-geod>

Dear Evan,

try to send your question to the https://gis.stackexchange.com/,
it is for GIS questions.

Zoltan

On Sun, 12 Aug 2018, Evan Kanter wrote:

> Hi Devs,
> I˙˙m sending you a link to my post on Stack Overlow, requesting assistance!
> https://stackoverflow.com/questions/51812251/qgis-expressions-dont-evaluate-as-expected
>
> I would really appreciate your help. I am pasting the content of my post on stack overflow below for your convenience.
>
> Evan Kanter
> evankanter28 at gmail.com
>
> I am using QGIS with a vector layer and the attribute table stored at this link:https://docs.google.com/spreadsheets/d/1K7rRdlcSheclJ6MqzpBNwSZei911WDV1Bl2zBGV38-s/edit?usp=sharing
> I then have the following code:
> CASE
>
> /*Kieran Winner*/
> WHEN "r_Kieran" > "r_Wynne"
>        THEN ramp_color('PCMarg', scale_linear(("r_Kieran"/"r_TOTAL"-"r_Possian"/"r_TOTAL"),  0,  1, 0, 1))
> ELSE color_rgb(64, 224, 208)
> END
> Here's the problem: The code evaluates incorrectly.
> Take row 15 of the attribute table for example. (Where PD_Number=14) You would expect that the condition would evaluate TRUE since "r_Kieran"=397 and "r_Wynne"=225.
> But, it evaluates FALSE in QGIS, as indicated by the colour that is displayed on the map!
> I've spent hours simplifying code, and pulling my hair out over this.
> Please help!
> Thanks, Evan
>
>

From apasotti at gmail.com  Mon Aug 13 01:06:40 2018
From: apasotti at gmail.com (Alessandro Pasotti)
Date: Mon, 13 Aug 2018 10:06:40 +0200
Subject: [QGIS-Developer] How long before closing an issue on "lack of
	feedback"?
In-Reply-To: <CAB28AshO-VF0U9-7C0CAYN4M4qgXmO1xbXq599XA5+SxT6ouJg@mail.gmail.com>
References: <CAB28AshO-VF0U9-7C0CAYN4M4qgXmO1xbXq599XA5+SxT6ouJg@mail.gmail.com>
Message-ID: <CAL5Q673toKaBWB6oE6=mi8Phf8_fQkf22=g6Pntjki1NJxJX8A@mail.gmail.com>

I would suggest 30 days, people might be so lucky to have their holidays
last longer than two weeks.

On Mon, Aug 13, 2018 at 2:23 AM, Nyall Dawson <nyall.dawson at gmail.com>
wrote:

> Quick question re closing issues on redmine:
>
> What's an "acceptable" amount of time between adding a question to a
> ticket/marking as "feedback" before closing that issue as "Closed due
> to lack of feedback"?
>
> Is 14 days sufficient?
>
> Nyall
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer




-- 
Alessandro Pasotti
w3:   www.itopen.it
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180813/f0a75ed6/attachment-0001.html>

From cavallini at faunalia.it  Mon Aug 13 01:11:10 2018
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon, 13 Aug 2018 10:11:10 +0200
Subject: [QGIS-Developer] How long before closing an issue on "lack of
 feedback"?
In-Reply-To: <CAL5Q673toKaBWB6oE6=mi8Phf8_fQkf22=g6Pntjki1NJxJX8A@mail.gmail.com>
References: <CAB28AshO-VF0U9-7C0CAYN4M4qgXmO1xbXq599XA5+SxT6ouJg@mail.gmail.com>
 <CAL5Q673toKaBWB6oE6=mi8Phf8_fQkf22=g6Pntjki1NJxJX8A@mail.gmail.com>
Message-ID: <161482dd-6aba-c4ce-c2ab-77fc2562c3bd@faunalia.it>

I agree, better be conservative. Furthermore, not always lack of
feedback means an issue is not valid. I'd be against automatically
closing the issues without further verification.

I'm available to help checking, maybe creating a view of tickets needing
a check could be useful.

All the best.


On 08/13/2018 10:06 AM, Alessandro Pasotti wrote:
>
> I would suggest 30 days, people might be so lucky to have their
> holidays last longer than two weeks.
>
> On Mon, Aug 13, 2018 at 2:23 AM, Nyall Dawson <nyall.dawson at gmail.com
> <mailto:nyall.dawson at gmail.com>> wrote:
>
>     Quick question re closing issues on redmine:
>
>     What's an "acceptable" amount of time between adding a question to a
>     ticket/marking as "feedback" before closing that issue as "Closed due
>     to lack of feedback"?
>
>     Is 14 days sufficient?
>
>     Nyall
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>     Unsubscribe:
>     https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>
>
>
>
> -- 
> Alessandro Pasotti
> w3:   www.itopen.it <http://www.itopen.it>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
https://www.google.com/trends/explore?date=all&geo=IT&q=qgis,arcgis

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180813/87c1bca8/attachment.html>

From giovanni.manghi at gmail.com  Mon Aug 13 01:23:13 2018
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Mon, 13 Aug 2018 09:23:13 +0100
Subject: [QGIS-Developer] How long before closing an issue on "lack of
	feedback"?
Message-ID: <CACfnYnQov6xrN=x0uKZuBuf+LZJZ568auyiC-cYu6xcM=5sB=g@mail.gmail.com>

> What's an "acceptable" amount of time between adding a question to a
> ticket/marking as "feedback" before closing that issue as "Closed due
> to lack of feedback"?
>
> Is 14 days sufficient?

Hi Nyall,
the official number is 15 days, but in reality in my personal effort
to keep the tracker clean I rarely enforce it, more often is around 30
days.

cheers

-- G --

From luipir at gmail.com  Mon Aug 13 02:13:07 2018
From: luipir at gmail.com (Luigi Pirelli)
Date: Mon, 13 Aug 2018 11:13:07 +0200
Subject: [QGIS-Developer] How long before closing an issue on "lack of
	feedback"?
In-Reply-To: <CACfnYnQov6xrN=x0uKZuBuf+LZJZ568auyiC-cYu6xcM=5sB=g@mail.gmail.com>
References: <CACfnYnQov6xrN=x0uKZuBuf+LZJZ568auyiC-cYu6xcM=5sB=g@mail.gmail.com>
Message-ID: <CAFO80_r8jn2V+cHYrzQig9i8=XQZNdv-ZOUHWr5CWyEhx6kHYg@mail.gmail.com>

I agree with 30 days, Paolo the feedbak filter is already available
https://issues.qgis.org/projects/qgis/issues?query_id=112

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Mastering QGIS 2nd Edition:
*
https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
* Hire me: http://goo.gl/BYRQKg
**************************************************************************************************


On Mon, 13 Aug 2018 at 10:24, Giovanni Manghi <giovanni.manghi at gmail.com>
wrote:

> > What's an "acceptable" amount of time between adding a question to a
> > ticket/marking as "feedback" before closing that issue as "Closed due
> > to lack of feedback"?
> >
> > Is 14 days sufficient?
>
> Hi Nyall,
> the official number is 15 days, but in reality in my personal effort
> to keep the tracker clean I rarely enforce it, more often is around 30
> days.
>
> cheers
>
> -- G --
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180813/ed298f9f/attachment.html>

From cavallini at faunalia.it  Mon Aug 13 02:15:08 2018
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon, 13 Aug 2018 11:15:08 +0200
Subject: [QGIS-Developer] How long before closing an issue on "lack of
 feedback"?
In-Reply-To: <CAFO80_r8jn2V+cHYrzQig9i8=XQZNdv-ZOUHWr5CWyEhx6kHYg@mail.gmail.com>
References: <CACfnYnQov6xrN=x0uKZuBuf+LZJZ568auyiC-cYu6xcM=5sB=g@mail.gmail.com>
 <CAFO80_r8jn2V+cHYrzQig9i8=XQZNdv-ZOUHWr5CWyEhx6kHYg@mail.gmail.com>
Message-ID: <204b0fbb-93d7-8fbe-be25-42ba55e70d67@faunalia.it>

Gosh, 258 waiting for feedback!

I'll have a look during the HF, thanks.


On 08/13/2018 11:13 AM, Luigi Pirelli wrote:
> I agree with 30 days, Paolo the feedbak filter is already
> available https://issues.qgis.org/projects/qgis/issues?query_id=112
>
> Luigi Pirelli
>
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Mastering QGIS 2nd Edition:
> *
> https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
> * Hire me: http://goo.gl/BYRQKg
> **************************************************************************************************
>
>
> On Mon, 13 Aug 2018 at 10:24, Giovanni Manghi
> <giovanni.manghi at gmail.com <mailto:giovanni.manghi at gmail.com>> wrote:
>
>     > What's an "acceptable" amount of time between adding a question to a
>     > ticket/marking as "feedback" before closing that issue as
>     "Closed due
>     > to lack of feedback"?
>     >
>     > Is 14 days sufficient?
>
>     Hi Nyall,
>     the official number is 15 days, but in reality in my personal effort
>     to keep the tracker clean I rarely enforce it, more often is around 30
>     days.
>
>     cheers
>
>     -- G --
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
https://www.google.com/trends/explore?date=all&geo=IT&q=qgis,arcgis

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180813/6c96ac90/attachment-0001.html>

From giovanni.manghi at gmail.com  Mon Aug 13 02:22:07 2018
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Mon, 13 Aug 2018 10:22:07 +0100
Subject: [QGIS-Developer] How long before closing an issue on "lack of
	feedback"?
Message-ID: <CACfnYnRGJyenz+144_WV4=P06YZtsrEScWFjMKqhDvC-8siUzQ@mail.gmail.com>

> Gosh, 258 waiting for feedback!
>
> I'll have a look during the HF, thanks.

what is the surprise here? is a "normal" number for our bug tracker,
and in fact I usually use the dev meetings as occasion to make large
cleanups of the tickets in feedback status.

-- G --

From rudivs at gmail.com  Mon Aug 13 05:36:02 2018
From: rudivs at gmail.com (Rudi von Staden)
Date: Mon, 13 Aug 2018 14:36:02 +0200
Subject: [QGIS-Developer] How to create temporary raster destination path in
	script?
Message-ID: <CAOJAE5r1M8ZEE_SsSjO1tBHc+fyuU-jNjWX7E5wrkYnW1_X2Pw@mail.gmail.com>

Hi all,

I'd like to create a temporary raster file in my script, but I don't want
to add it as an output layer (it's an input to another step of the
process). Is there some tooling to create the path (e.g. to pass as output
parameters to algorithms called with processing.run) outside of using
`self.parameterAsOutputLayer`?

Using
`QgsApplication.processingRegistry().parameterType('rasterDestination')`
seemed promising, but I haven't been able to get an output path from that.

If not, I can just roll my own using os.environ['TMP'] but I would prefer
to follow the QGIS coding practices where possible.

Thanks,
Rudi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180813/3f399339/attachment.html>

From alexander.bruy at gmail.com  Mon Aug 13 05:52:03 2018
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Mon, 13 Aug 2018 15:52:03 +0300
Subject: [QGIS-Developer] How to create temporary raster destination
 path in script?
In-Reply-To: <CAOJAE5r1M8ZEE_SsSjO1tBHc+fyuU-jNjWX7E5wrkYnW1_X2Pw@mail.gmail.com>
References: <CAOJAE5r1M8ZEE_SsSjO1tBHc+fyuU-jNjWX7E5wrkYnW1_X2Pw@mail.gmail.com>
Message-ID: <CALuHMPCx=so+5OZ7epjZfLWgwBeZJXq3HpY2JqDObTRXHE0tOw@mail.gmail.com>

Hi,

why not use generateTempFilename() from QgsProcessingUtils? And use this
path in algorithm.
пн, 13 серп. 2018 о 15:36 Rudi von Staden <rudivs at gmail.com> пише:
>
> Hi all,
>
> I'd like to create a temporary raster file in my script, but I don't want to add it as an output layer (it's an input to another step of the process). Is there some tooling to create the path (e.g. to pass as output parameters to algorithms called with processing.run) outside of using `self.parameterAsOutputLayer`?
>
> Using `QgsApplication.processingRegistry().parameterType('rasterDestination')` seemed promising, but I haven't been able to get an output path from that.
>
> If not, I can just roll my own using os.environ['TMP'] but I would prefer to follow the QGIS coding practices where possible.
>
> Thanks,
> Rudi
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 
Alexander Bruy

From noreply at qgis.org  Mon Aug 13 06:14:19 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Mon, 13 Aug 2018 13:14:19 -0000
Subject: [QGIS-Developer] Plugin [1066] Isogeo approval notification.
Message-ID: <20180813131419.1189.11677@2c6504964296>


Plugin Isogeo approval by pcav.
The plugin version "[1066] Isogeo 1.6.1-beta2 Experimental" is now approved
Link: http://plugins.qgis.org/plugins/isogeo_search_engine/

From noreply at qgis.org  Mon Aug 13 06:58:10 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Mon, 13 Aug 2018 13:58:10 -0000
Subject: [QGIS-Developer] =?utf-8?q?Plugin_=5B1302=5D_Inspire_Flurstuecke_?=
 =?utf-8?q?Sachsen_und_Th=C3=BCringen_approval_notification=2E?=
Message-ID: <20180813135810.1192.62374@2c6504964296>


Plugin Inspire Flurstuecke Sachsen und Thüringen approval by pcav.
The plugin version "[1302] Inspire Flurstuecke Sachsen und Thüringen 0.3.0" is now approved
Link: http://plugins.qgis.org/plugins/SaxonyCadastralParcels/

From lukas.hauer at josephinum.at  Mon Aug 13 07:16:51 2018
From: lukas.hauer at josephinum.at (Hauer Lukas)
Date: Mon, 13 Aug 2018 14:16:51 +0000
Subject: [QGIS-Developer] Switch Layer CRS
Message-ID: <277f2dadc0d54fc9b09154b90f053161@josephinum.at>

Hi!

I want to load three layers  into qgis (2.18) via python.
1 Vector Layer (boundary of my farm / fields)
2 Raster Layer ( band4 and band8 from sentinel satellite)
Additionally I want to switch them to the same crs (4326). But if I do this, the field boundaries are not visible as overlay on the raster layers...
I need to zoom out (quite a lot) and my boundaries are somewhere else in qgis.

Some a hint for me?

Here my example code..

import processing
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from qgis.analysis import *

fullPathFeldgrenzen = "Path/to/fields.shp"
fullPathBand4 = "Path/to/Band4/B04.jp2"
fullPathBand8 = "Path/to/Band8/B08.jp2"


fieldBoundary = iface.addVectorLayer(fullPathFeldgrenzen, 'fieldBoundary', 'ogr')
tmp = iface.activeLayer()
crs = tmp.crs()
crs.createFromId(4326)
tmp.setCrs(crs)

band4 = iface.addRasterLayer(fullPathBand4, 'band4')
tmp = iface.activeLayer()
crs = tmp.crs()
crs.createFromId(4326)
tmp.setCrs(crs)

band8 = iface.addRasterLayer(fullPathBand8, 'band8')
tmp = iface.activeLayer()
crs = tmp.crs()
crs.createFromId(4326)
tmp.setCrs(crs)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180813/60a58be7/attachment.html>

From nyall.dawson at gmail.com  Mon Aug 13 17:23:49 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 14 Aug 2018 10:23:49 +1000
Subject: [QGIS-Developer] How long before closing an issue on "lack of
	feedback"?
In-Reply-To: <161482dd-6aba-c4ce-c2ab-77fc2562c3bd@faunalia.it>
References: <CAB28AshO-VF0U9-7C0CAYN4M4qgXmO1xbXq599XA5+SxT6ouJg@mail.gmail.com>
 <CAL5Q673toKaBWB6oE6=mi8Phf8_fQkf22=g6Pntjki1NJxJX8A@mail.gmail.com>
 <161482dd-6aba-c4ce-c2ab-77fc2562c3bd@faunalia.it>
Message-ID: <CAB28Asha08Sp5DuJa1hfhzw+2-rNn1zu=jJrXNtYrJZ4Gn+Ydg@mail.gmail.com>

On Mon, 13 Aug 2018 at 18:11, Paolo Cavallini <cavallini at faunalia.it> wrote:
>
> I agree, better be conservative. Furthermore, not always lack of feedback means an issue is not valid. I'd be against automatically closing the issues without further verification.

I agree in general, but there's a lot of tickets recently with just a
crash dump (with no clues in the dump) and no further info about how
to reproduce the crash or what triggered it. These reports don't have
*any* value on their own.

Nyall

>
> I'm available to help checking, maybe creating a view of tickets needing a check could be useful.
>
> All the best.
>
>
> On 08/13/2018 10:06 AM, Alessandro Pasotti wrote:
>
>
> I would suggest 30 days, people might be so lucky to have their holidays last longer than two weeks.
>
> On Mon, Aug 13, 2018 at 2:23 AM, Nyall Dawson <nyall.dawson at gmail.com> wrote:
>>
>> Quick question re closing issues on redmine:
>>
>> What's an "acceptable" amount of time between adding a question to a
>> ticket/marking as "feedback" before closing that issue as "Closed due
>> to lack of feedback"?
>>
>> Is 14 days sufficient?
>>
>> Nyall
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
>
> --
> Alessandro Pasotti
> w3:   www.itopen.it
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> --
> Paolo Cavallini - www.faunalia.eu
> QGIS & PostGIS courses: http://www.faunalia.eu/training.html
> https://www.google.com/trends/explore?date=all&geo=IT&q=qgis,arcgis
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From cavallini at faunalia.it  Tue Aug 14 01:32:03 2018
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 14 Aug 2018 10:32:03 +0200
Subject: [QGIS-Developer] How long before closing an issue on "lack of
 feedback"?
In-Reply-To: <CAB28Asha08Sp5DuJa1hfhzw+2-rNn1zu=jJrXNtYrJZ4Gn+Ydg@mail.gmail.com>
References: <CAB28AshO-VF0U9-7C0CAYN4M4qgXmO1xbXq599XA5+SxT6ouJg@mail.gmail.com>
 <CAL5Q673toKaBWB6oE6=mi8Phf8_fQkf22=g6Pntjki1NJxJX8A@mail.gmail.com>
 <161482dd-6aba-c4ce-c2ab-77fc2562c3bd@faunalia.it>
 <CAB28Asha08Sp5DuJa1hfhzw+2-rNn1zu=jJrXNtYrJZ4Gn+Ydg@mail.gmail.com>
Message-ID: <03ac3fe0-a611-0d04-0546-5225928750db@faunalia.it>



On 08/14/2018 02:23 AM, Nyall Dawson wrote:
> On Mon, 13 Aug 2018 at 18:11, Paolo Cavallini <cavallini at faunalia.it> wrote:
>> I agree, better be conservative. Furthermore, not always lack of feedback means an issue is not valid. I'd be against automatically closing the issues without further verification.
> I agree in general, but there's a lot of tickets recently with just a
> crash dump (with no clues in the dump) and no further info about how
> to reproduce the crash or what triggered it. These reports don't have
> *any* value on their own.
>
In these cases I'd agree in closing it after 2-4 weeks wiithout further
comments.
My point is that this required human intervention, I do not see a
reliable way of doing it automatically without missing useful info.
All the best.

-- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
https://www.google.com/trends/explore?date=all&geo=IT&q=qgis,arcgis


From jonathan-lists at lightpear.com  Tue Aug 14 02:00:45 2018
From: jonathan-lists at lightpear.com (Jonathan Moules)
Date: Tue, 14 Aug 2018 10:00:45 +0100
Subject: [QGIS-Developer] How long before closing an issue on "lack of
 feedback"?
In-Reply-To: <CAB28Asha08Sp5DuJa1hfhzw+2-rNn1zu=jJrXNtYrJZ4Gn+Ydg@mail.gmail.com>
References: <CAB28AshO-VF0U9-7C0CAYN4M4qgXmO1xbXq599XA5+SxT6ouJg@mail.gmail.com>
 <CAL5Q673toKaBWB6oE6=mi8Phf8_fQkf22=g6Pntjki1NJxJX8A@mail.gmail.com>
 <161482dd-6aba-c4ce-c2ab-77fc2562c3bd@faunalia.it>
 <CAB28Asha08Sp5DuJa1hfhzw+2-rNn1zu=jJrXNtYrJZ4Gn+Ydg@mail.gmail.com>
Message-ID: <a337882a-dc67-535f-98b1-5267da9092cc@lightpear.com>

Hi Nyall,

Looking at this from another angle (and being aware I know nothing of 
the QGIS code-base) - to me at least that would suggest that maybe it's 
worth improving the crash dumps so that they're better able to be used 
as a stand-alone debugging thing that doesn't require user feedback/insight.

Or alternatively make it clear during the crash dump process that the 
user needs to supply other information beyond just the file.

Cheers,

Jonathan


On 2018-08-14 01:23, Nyall Dawson wrote:
> On Mon, 13 Aug 2018 at 18:11, Paolo Cavallini <cavallini at faunalia.it> wrote:
>> I agree, better be conservative. Furthermore, not always lack of feedback means an issue is not valid. I'd be against automatically closing the issues without further verification.
> I agree in general, but there's a lot of tickets recently with just a
> crash dump (with no clues in the dump) and no further info about how
> to reproduce the crash or what triggered it. These reports don't have
> *any* value on their own.
>
> Nyall
>
>> I'm available to help checking, maybe creating a view of tickets needing a check could be useful.
>>
>> All the best.
>>
>>
>> On 08/13/2018 10:06 AM, Alessandro Pasotti wrote:
>>
>>
>> I would suggest 30 days, people might be so lucky to have their holidays last longer than two weeks.
>>
>> On Mon, Aug 13, 2018 at 2:23 AM, Nyall Dawson <nyall.dawson at gmail.com> wrote:
>>> Quick question re closing issues on redmine:
>>>
>>> What's an "acceptable" amount of time between adding a question to a
>>> ticket/marking as "feedback" before closing that issue as "Closed due
>>> to lack of feedback"?
>>>
>>> Is 14 days sufficient?
>>>
>>> Nyall
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>>
>> --
>> Alessandro Pasotti
>> w3:   www.itopen.it
>>
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>>
>> --
>> Paolo Cavallini - www.faunalia.eu
>> QGIS & PostGIS courses: http://www.faunalia.eu/training.html
>> https://www.google.com/trends/explore?date=all&geo=IT&q=qgis,arcgis
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



From matthias at opengis.ch  Tue Aug 14 02:21:38 2018
From: matthias at opengis.ch (Matthias Kuhn)
Date: Tue, 14 Aug 2018 11:21:38 +0200
Subject: [QGIS-Developer] How long before closing an issue on "lack of
 feedback"?
In-Reply-To: <a337882a-dc67-535f-98b1-5267da9092cc@lightpear.com>
References: <CAB28AshO-VF0U9-7C0CAYN4M4qgXmO1xbXq599XA5+SxT6ouJg@mail.gmail.com>
 <CAL5Q673toKaBWB6oE6=mi8Phf8_fQkf22=g6Pntjki1NJxJX8A@mail.gmail.com>
 <161482dd-6aba-c4ce-c2ab-77fc2562c3bd@faunalia.it>
 <CAB28Asha08Sp5DuJa1hfhzw+2-rNn1zu=jJrXNtYrJZ4Gn+Ydg@mail.gmail.com>
 <a337882a-dc67-535f-98b1-5267da9092cc@lightpear.com>
Message-ID: <b1a19f9c-ef64-f921-c37b-da162b97782e@opengis.ch>

Hi all,

Can a new state "feedback required" be introduced (emphasis on required)
which then can be closed automatically if no feedback is provided? This
state would be set by humans when it's clear at the time of setting the
state that the ticked not only *would like to have* but actually *does
require* feedback.

On another level, there's certainly also potential for improving the
crash handling. It would be great if someone would have the resources to

 * Disable the stack when pdb are not installed

 * Add some guidelines on issue reporting (as stated by Jonathan)

 * Allow opening a new ticket and searching for identical reports to link to

My 2c

Matthias


On 08/14/2018 11:00 AM, Jonathan Moules wrote:
> Hi Nyall,
>
> Looking at this from another angle (and being aware I know nothing of
> the QGIS code-base) - to me at least that would suggest that maybe
> it's worth improving the crash dumps so that they're better able to be
> used as a stand-alone debugging thing that doesn't require user
> feedback/insight.
>
> Or alternatively make it clear during the crash dump process that the
> user needs to supply other information beyond just the file.
>
> Cheers,
>
> Jonathan
>
>
> On 2018-08-14 01:23, Nyall Dawson wrote:
>> On Mon, 13 Aug 2018 at 18:11, Paolo Cavallini <cavallini at faunalia.it>
>> wrote:
>>> I agree, better be conservative. Furthermore, not always lack of
>>> feedback means an issue is not valid. I'd be against automatically
>>> closing the issues without further verification.
>> I agree in general, but there's a lot of tickets recently with just a
>> crash dump (with no clues in the dump) and no further info about how
>> to reproduce the crash or what triggered it. These reports don't have
>> *any* value on their own.
>>
>> Nyall
>>
>>> I'm available to help checking, maybe creating a view of tickets
>>> needing a check could be useful.
>>>
>>> All the best.
>>>
>>>
>>> On 08/13/2018 10:06 AM, Alessandro Pasotti wrote:
>>>
>>>
>>> I would suggest 30 days, people might be so lucky to have their
>>> holidays last longer than two weeks.
>>>
>>> On Mon, Aug 13, 2018 at 2:23 AM, Nyall Dawson
>>> <nyall.dawson at gmail.com> wrote:
>>>> Quick question re closing issues on redmine:
>>>>
>>>> What's an "acceptable" amount of time between adding a question to a
>>>> ticket/marking as "feedback" before closing that issue as "Closed due
>>>> to lack of feedback"?
>>>>
>>>> Is 14 days sufficient?
>>>>
>>>> Nyall
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>>
>>>
>>> -- 
>>> Alessandro Pasotti
>>> w3:   www.itopen.it
>>>
>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>>
>>> -- 
>>> Paolo Cavallini - www.faunalia.eu
>>> QGIS & PostGIS courses: http://www.faunalia.eu/training.html
>>> https://www.google.com/trends/explore?date=all&geo=IT&q=qgis,arcgis
>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>

-- 
Matthias Kuhn
matthias at opengis.ch <mailto:matthias at opengis.ch>
+41 (0)76 435 67 63 <tel:+41764356763>
OPENGIS.ch Logo <http://www.opengis.ch>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180814/a8708e8d/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 6671 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180814/a8708e8d/attachment-0001.png>

From giovanni.manghi at gmail.com  Tue Aug 14 03:00:57 2018
From: giovanni.manghi at gmail.com (Giovanni Manghi)
Date: Tue, 14 Aug 2018 11:00:57 +0100
Subject: [QGIS-Developer] How long before closing an issue on "lack of
	feedback"?
Message-ID: <CACfnYnQ1F4yToz6ctiOE63erf4fBr4z13s5f5u8hyk5j23Whsg@mail.gmail.com>

> I agree in general, but there's a lot of tickets recently with just a
> crash dump (with no clues in the dump) and no further info about how
> to reproduce the crash or what triggered it. These reports don't have
> *any* value on their own.
>
> Nyall


By the way, since log we have also a specific query for such tickets:

https://issues.qgis.org/projects/qgis/issues?per_page=200&query_id=112

as you can see is set to 15 days as it was the agreed period, but if
now the consensus changed we can edit it to a different number of
days.

-- G --

From cavallini at faunalia.it  Tue Aug 14 04:05:15 2018
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 14 Aug 2018 13:05:15 +0200
Subject: [QGIS-Developer] How long before closing an issue on "lack of
 feedback"?
In-Reply-To: <b1a19f9c-ef64-f921-c37b-da162b97782e@opengis.ch>
References: <CAB28AshO-VF0U9-7C0CAYN4M4qgXmO1xbXq599XA5+SxT6ouJg@mail.gmail.com>
 <CAL5Q673toKaBWB6oE6=mi8Phf8_fQkf22=g6Pntjki1NJxJX8A@mail.gmail.com>
 <161482dd-6aba-c4ce-c2ab-77fc2562c3bd@faunalia.it>
 <CAB28Asha08Sp5DuJa1hfhzw+2-rNn1zu=jJrXNtYrJZ4Gn+Ydg@mail.gmail.com>
 <a337882a-dc67-535f-98b1-5267da9092cc@lightpear.com>
 <b1a19f9c-ef64-f921-c37b-da162b97782e@opengis.ch>
Message-ID: <1fbbf143-3a4c-9061-4bf6-f7cabb11f338@faunalia.it>


On 08/14/2018 11:21 AM, Matthias Kuhn wrote:
>
> Hi all,
>
> Can a new state "feedback required" be introduced (emphasis on
> required) which then can be closed automatically if no feedback is
> provided? This state would be set by humans when it's clear at the
> time of setting the state that the ticked not only *would like to
> have* but actually *does require* feedback.
>
This sounds reasonable to me. Thanks Matthias.

-- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
https://www.google.com/trends/explore?date=all&geo=IT&q=qgis,arcgis


From rudivs at gmail.com  Tue Aug 14 04:42:25 2018
From: rudivs at gmail.com (Rudi von Staden)
Date: Tue, 14 Aug 2018 13:42:25 +0200
Subject: [QGIS-Developer] Running grass algorithms in threads
Message-ID: <CAOJAE5pJ4-JsV6B60J6V=3QVXWfVN6rJZOS_2KVmcToZs2cCog@mail.gmail.com>

Hi all,

The bottleneck in my script at the moment is the calculation of zonal stats
using 'grass7:r.stats.zonal'. I thought I might speed things up by using
QgsTask.fromFunction() or QgsProcessingAlgRunnerTask() to run these
calculations in parallel. In my tests of both approaches the tasks seem to
complete (task.status() == QgsTask.Complete), but the output file is only
generated for 1 of 4 parallel tasks (the task that finishes first).

I'm assuming this is because grass algorithms are not thread safe? Or am I
missing something in my implementation that could make this work?

Thanks,
Rudi



My code for the QgsTask approach is as below:

def getZonal(task, habitatModelFile, cover):
    tempFile = QgsProcessingUtils.generateTempFilename("output.tif")
    processing.run("grass7:r.stats.zonal", {
        'base':habitatModelFile,
        'cover':cover,
        'method':5,
        '-c':False,
        '-r':False,
        'output':tempFile,
        'GRASS_REGION_PARAMETER':None,
        'GRASS_REGION_CELLSIZE_PARAMETER':0,
        'GRASS_RASTER_FORMAT_OPT':'',
        'GRASS_RASTER_FORMAT_META':''},context=context,feedback=algFeedback)

    if task.isCanceled():
        deleteFile(tempFile)
        return

    return tempFile

ls90Task = QgsTask.fromFunction('LS90', getZonal, habitatModelFile=hm1,
cover=ls90Layer)
QgsApplication.taskManager().addTask(ls90Task)
feedback.pushInfo("Calculating LS14 mean...")
ls14Task = QgsTask.fromFunction('LS14 ', getZonal, habitatModelFile=hm2,
cover=ls14Layer)
QgsApplication.taskManager().addTask(ls14Task)
hs90Task = QgsTask.fromFunction('HS90 ', getZonal, habitatModelFile=hm3,
cover=hs90Layer)
QgsApplication.taskManager().addTask(hs90Task)
hs14Task = QgsTask.fromFunction('HS14 ', getZonal, habitatModelFile=hm4,
cover=hs14Layer)
QgsApplication.taskManager().addTask(hs14Task)

while (len([t for t in [ls90Task.status(), ls14Task.status(),
hs90Task.status(),
            hs14Task.status()] if t in [QgsTask.Running, QgsTask.Queued]])
> 0)
            and not feedback.isCanceled():
    sleep(1)

if feedback.isCanceled():
    # some cleanup code (send task.cancel() and wait for tasks to terminate)
    break

ls90Result = ls90Task.returned_values
ls14Result = ls14Task.returned_values
hs90Result = hs90Task.returned_values   # only this file exists
hs14Result = hs14Task.returned_values
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180814/533413c6/attachment.html>

From adenaculture at gmail.com  Tue Aug 14 09:19:00 2018
From: adenaculture at gmail.com (C Hamilton)
Date: Tue, 14 Aug 2018 12:19:00 -0400
Subject: [QGIS-Developer] ShapeTools News and Updates
Message-ID: <CABPxTTrqKwGvaY-nHz2b6gwE=2C3nbi0xgnEqf83e_euMw0e-A@mail.gmail.com>

ShapeTools for QGIS 3 now has the ability to break lines, along a geodesic
path, into MultiLineString components when they cross the international
date line at -180,180 degrees. This fixes the issue that Anita addresses in
her blog post:

https://anitagraser.com/2011/08/20/visualizing-global-connections/

The ShapeTools 'XY to Line' function has this as an option as well.

Other additions include a new donut shape, the shapes can be drawn as line
strings instead of just polygons, and some of the shapes have been ported
to the processing framework. Eventually all will be in processing.

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180814/72d5663e/attachment.html>

From nyall.dawson at gmail.com  Tue Aug 14 16:08:23 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 15 Aug 2018 09:08:23 +1000
Subject: [QGIS-Developer] How long before closing an issue on "lack of
	feedback"?
In-Reply-To: <a337882a-dc67-535f-98b1-5267da9092cc@lightpear.com>
References: <CAB28AshO-VF0U9-7C0CAYN4M4qgXmO1xbXq599XA5+SxT6ouJg@mail.gmail.com>
 <CAL5Q673toKaBWB6oE6=mi8Phf8_fQkf22=g6Pntjki1NJxJX8A@mail.gmail.com>
 <161482dd-6aba-c4ce-c2ab-77fc2562c3bd@faunalia.it>
 <CAB28Asha08Sp5DuJa1hfhzw+2-rNn1zu=jJrXNtYrJZ4Gn+Ydg@mail.gmail.com>
 <a337882a-dc67-535f-98b1-5267da9092cc@lightpear.com>
Message-ID: <CAB28AsjW_NrRkoUV9AGkSPS8Qgc8n3Njrtb9WXF4suGhC5pD4Q@mail.gmail.com>

On Tue, 14 Aug 2018 at 19:01, Jonathan Moules
<jonathan-lists at lightpear.com> wrote:
>
> Hi Nyall,
>
> Looking at this from another angle (and being aware I know nothing of
> the QGIS code-base) - to me at least that would suggest that maybe it's
> worth improving the crash dumps so that they're better able to be used
> as a stand-alone debugging thing that doesn't require user feedback/insight.
>
> Or alternatively make it clear during the crash dump process that the
> user needs to supply other information beyond just the file.
>

This would certainly help. I'm not sure it's possible, but I'd like to see:

1. A list of all installed/enabled plugins. There's many crash dumps
which point to a plugin being at fault, so it'd be nice to identify
the troublesome plugins.

2. It should be possible to detect crashes coming from Python code, so
we could also do something like disable any python plugins at next
load with a warning that one caused a crash.

3. I'm pretty sure this is impossible - but it'd be fantastic to
include python backtraces whenever a crash occurs from Python.

4. Including anonymized lists of layers loaded and their general
parameters (e.g. provider type) would be beneficial

5. Again, not sure if it's possible, but it'd be great to be able to
block reports which are a crash dump only with no futher info on hub
itself.

Nyall



> Cheers,
>
> Jonathan
>
>
> On 2018-08-14 01:23, Nyall Dawson wrote:
> > On Mon, 13 Aug 2018 at 18:11, Paolo Cavallini <cavallini at faunalia.it> wrote:
> >> I agree, better be conservative. Furthermore, not always lack of feedback means an issue is not valid. I'd be against automatically closing the issues without further verification.
> > I agree in general, but there's a lot of tickets recently with just a
> > crash dump (with no clues in the dump) and no further info about how
> > to reproduce the crash or what triggered it. These reports don't have
> > *any* value on their own.
> >
> > Nyall
> >
> >> I'm available to help checking, maybe creating a view of tickets needing a check could be useful.
> >>
> >> All the best.
> >>
> >>
> >> On 08/13/2018 10:06 AM, Alessandro Pasotti wrote:
> >>
> >>
> >> I would suggest 30 days, people might be so lucky to have their holidays last longer than two weeks.
> >>
> >> On Mon, Aug 13, 2018 at 2:23 AM, Nyall Dawson <nyall.dawson at gmail.com> wrote:
> >>> Quick question re closing issues on redmine:
> >>>
> >>> What's an "acceptable" amount of time between adding a question to a
> >>> ticket/marking as "feedback" before closing that issue as "Closed due
> >>> to lack of feedback"?
> >>>
> >>> Is 14 days sufficient?
> >>>
> >>> Nyall
> >>> _______________________________________________
> >>> QGIS-Developer mailing list
> >>> QGIS-Developer at lists.osgeo.org
> >>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>
> >>
> >>
> >> --
> >> Alessandro Pasotti
> >> w3:   www.itopen.it
> >>
> >>
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>
> >>
> >> --
> >> Paolo Cavallini - www.faunalia.eu
> >> QGIS & PostGIS courses: http://www.faunalia.eu/training.html
> >> https://www.google.com/trends/explore?date=all&geo=IT&q=qgis,arcgis
> >>
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Tue Aug 14 16:10:14 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 15 Aug 2018 09:10:14 +1000
Subject: [QGIS-Developer] Running grass algorithms in threads
In-Reply-To: <CAOJAE5pJ4-JsV6B60J6V=3QVXWfVN6rJZOS_2KVmcToZs2cCog@mail.gmail.com>
References: <CAOJAE5pJ4-JsV6B60J6V=3QVXWfVN6rJZOS_2KVmcToZs2cCog@mail.gmail.com>
Message-ID: <CAB28AshpSu+g9WLG+fM4QSLsgYc6cVS3OVBY+KV9UUdBc4HsAw@mail.gmail.com>

On Tue, 14 Aug 2018 at 21:43, Rudi von Staden <rudivs at gmail.com> wrote:
>
> Hi all,
>
> The bottleneck in my script at the moment is the calculation of zonal stats using 'grass7:r.stats.zonal'. I thought I might speed things up by using QgsTask.fromFunction() or QgsProcessingAlgRunnerTask() to run these calculations in parallel. In my tests of both approaches the tasks seem to complete (task.status() == QgsTask.Complete), but the output file is only generated for 1 of 4 parallel tasks (the task that finishes first).
>
> I'm assuming this is because grass algorithms are not thread safe? Or am I missing something in my implementation that could make this work?

I strongly suspect that grass algorithms cannot be run in parallel.
This is why they cannot run in the background in QGIS like the
native/GDAL algorithms can. But I'd love for confirmation about this
and whether there's any way to make GRASS multi-thread safe.

Because this is grass related (and not QGIS specific) I'd suggest
asking on the grass mailing list, and relaying any responses back
here.

Nyall

>
> Thanks,
> Rudi
>
>
>
> My code for the QgsTask approach is as below:
>
> def getZonal(task, habitatModelFile, cover):
>     tempFile = QgsProcessingUtils.generateTempFilename("output.tif")
>     processing.run("grass7:r.stats.zonal", {
>         'base':habitatModelFile,
>         'cover':cover,
>         'method':5,
>         '-c':False,
>         '-r':False,
>         'output':tempFile,
>         'GRASS_REGION_PARAMETER':None,
>         'GRASS_REGION_CELLSIZE_PARAMETER':0,
>         'GRASS_RASTER_FORMAT_OPT':'',
>         'GRASS_RASTER_FORMAT_META':''},context=context,feedback=algFeedback)
>
>     if task.isCanceled():
>         deleteFile(tempFile)
>         return
>
>     return tempFile
>
> ls90Task = QgsTask.fromFunction('LS90', getZonal, habitatModelFile=hm1, cover=ls90Layer)
> QgsApplication.taskManager().addTask(ls90Task)
> feedback.pushInfo("Calculating LS14 mean...")
> ls14Task = QgsTask.fromFunction('LS14 ', getZonal, habitatModelFile=hm2, cover=ls14Layer)
> QgsApplication.taskManager().addTask(ls14Task)
> hs90Task = QgsTask.fromFunction('HS90 ', getZonal, habitatModelFile=hm3, cover=hs90Layer)
> QgsApplication.taskManager().addTask(hs90Task)
> hs14Task = QgsTask.fromFunction('HS14 ', getZonal, habitatModelFile=hm4, cover=hs14Layer)
> QgsApplication.taskManager().addTask(hs14Task)
>
> while (len([t for t in [ls90Task.status(), ls14Task.status(), hs90Task.status(),
>             hs14Task.status()] if t in [QgsTask.Running, QgsTask.Queued]]) > 0)
>             and not feedback.isCanceled():
>     sleep(1)
>
> if feedback.isCanceled():
>     # some cleanup code (send task.cancel() and wait for tasks to terminate)
>     break
>
> ls90Result = ls90Task.returned_values
> ls14Result = ls14Task.returned_values
> hs90Result = hs90Task.returned_values   # only this file exists
> hs14Result = hs14Task.returned_values
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From nyall.dawson at gmail.com  Tue Aug 14 16:12:04 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 15 Aug 2018 09:12:04 +1000
Subject: [QGIS-Developer] ShapeTools News and Updates
In-Reply-To: <CABPxTTrqKwGvaY-nHz2b6gwE=2C3nbi0xgnEqf83e_euMw0e-A@mail.gmail.com>
References: <CABPxTTrqKwGvaY-nHz2b6gwE=2C3nbi0xgnEqf83e_euMw0e-A@mail.gmail.com>
Message-ID: <CAB28AsjCp_W0HiWw=d-bipcMn1HEX+VVr8QaPKBC5Td5GzptXA@mail.gmail.com>

On Wed, 15 Aug 2018 at 02:19, C Hamilton <adenaculture at gmail.com> wrote:
> ...and some of the shapes have been ported to the processing framework. Eventually all will be in processing

Great to hear! Some of this functionality is fundamental stuff which
would be lovely to include in a default QGIS install, and porting to
processing would be a natural first step toward this. Keep us posted
as you progress!

Nyall

.
>
> Calvin
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From wenzeslaus at gmail.com  Tue Aug 14 17:52:14 2018
From: wenzeslaus at gmail.com (Vaclav Petras)
Date: Tue, 14 Aug 2018 20:52:14 -0400
Subject: [QGIS-Developer] Running grass algorithms in threads
In-Reply-To: <CAB28AshpSu+g9WLG+fM4QSLsgYc6cVS3OVBY+KV9UUdBc4HsAw@mail.gmail.com>
References: <CAOJAE5pJ4-JsV6B60J6V=3QVXWfVN6rJZOS_2KVmcToZs2cCog@mail.gmail.com>
 <CAB28AshpSu+g9WLG+fM4QSLsgYc6cVS3OVBY+KV9UUdBc4HsAw@mail.gmail.com>
Message-ID: <CABo5uVthAusm_gGGXyCenuNDkStac2BzxeGyoCgjnMWdH6Xv_Q@mail.gmail.com>

On Tue, Aug 14, 2018 at 7:10 PM, Nyall Dawson <nyall.dawson at gmail.com>
wrote:

> On Tue, 14 Aug 2018 at 21:43, Rudi von Staden <rudivs at gmail.com> wrote:
> >
> > Hi all,
> >
> > The bottleneck in my script at the moment is the calculation of zonal
> stats using 'grass7:r.stats.zonal'. I thought I might speed things up by
> using QgsTask.fromFunction() or QgsProcessingAlgRunnerTask() to run these
> calculations in parallel. In my tests of both approaches the tasks seem to
> complete (task.status() == QgsTask.Complete), but the output file is only
> generated for 1 of 4 parallel tasks (the task that finishes first).
> >
> > I'm assuming this is because grass algorithms are not thread safe? Or am
> I missing something in my implementation that could make this work?
>
> I strongly suspect that grass algorithms cannot be run in parallel.
> This is why they cannot run in the background in QGIS like the
> native/GDAL algorithms can. But I'd love for confirmation about this
> and whether there's any way to make GRASS multi-thread safe.
>


In general, it works. You can run GRASS modules in parallel if you set
things right which is best achieved by running the parallel processes in
separate GRASS mapsets.

GRASS modules are separate processes, so we are talking about parallel
processes, rather than threads, so there are pretty separated. You can run
for example (assuming GRASS GIS session in NC SPM location, new/empty
mapset, and Linux command line, so that & starts process in the background):

r.neighbors input=elevation output=elevation_1 size=21 &
r.neighbors input=elevation output=elevation_2 size=21 &
r.neighbors input=elevation output=elevation_3 size=21 &
r.neighbors input=elevation output=elevation_4 size=21 &

However, conflicts may arise if you are changing computational region at
the same time as doing calculations or if you are writing vectors using the
default settings for attribute table, i.e. one SQLite db for all vector
maps in a mapset. You can make these things work, e.g. by passing a
computational region through environment rather than by g.region or by
using different backend for attributes. However, the safest way are the
separate mapsets, for example (assuming Linux for & and an existing
location called nc_spm):

# create the mapsets
grass -e -c ~/grassdata/nc_spm/par1
grass -e -c ~/grassdata/nc_spm/par2
grass -e -c ~/grassdata/nc_spm/par3
grass -e -c ~/grassdata/nc_spm/par4
# run v.random (just an example which creates vector with attributes)
grass ~/grassdata/nc_spm/par1 --exec v.random output=points_1 column=value
npoints=1000000 &
grass ~/grassdata/nc_spm/par2 --exec v.random output=points_2 column=value
npoints=1000000 &
grass ~/grassdata/nc_spm/par3 --exec v.random output=points_3 column=value
npoints=1000000 &
grass ~/grassdata/nc_spm/par4 --exec v.random output=points_4 column=value
npoints=1000000 &
# just to finish the example, let's merge the vectors in a new mapset
grass -e -c ~/grassdata/nc_spm/par
grass ~/grassdata/nc_spm/par --exec v.patch input=points_1 at par1
,points_2 at par2,points_3 at par3,points_4 at par4 output=points
grass ~/grassdata/nc_spm/par --exec v.info map=points -t
# and delete the rest
rm ~/grassdata/nc_spm/par1
rm ~/grassdata/nc_spm/par2
rm ~/grassdata/nc_spm/par3
rm ~/grassdata/nc_spm/par4

I'm assuming that we are talking about running algorithms in parallel in
QGIS, not parallelism inside the algorithms. Other considerations apply to
that (parallelization is controlled by the modules themselves, see e.g.
nprocs option for r.sun or v.surf.rst in G 7.4). Note that I'm talking
about (pure) GRASS, so it depends how QGIS is handling it (I recall it is
using --exec, but I don't know what it is doing with locations and
mapsets). Please also note that I didn't measure if the v.random example
would be actually more advantageous the a single process.

Best,
Vaclav


> Because this is grass related (and not QGIS specific) I'd suggest
> asking on the grass mailing list, and relaying any responses back
> here.
>

> Nyall
>
> >
> > Thanks,
> > Rudi
> >
> >
> >
> > My code for the QgsTask approach is as below:
> >
> > def getZonal(task, habitatModelFile, cover):
> >     tempFile = QgsProcessingUtils.generateTempFilename("output.tif")
> >     processing.run("grass7:r.stats.zonal", {
> >         'base':habitatModelFile,
> >         'cover':cover,
> >         'method':5,
> >         '-c':False,
> >         '-r':False,
> >         'output':tempFile,
> >         'GRASS_REGION_PARAMETER':None,
> >         'GRASS_REGION_CELLSIZE_PARAMETER':0,
> >         'GRASS_RASTER_FORMAT_OPT':'',
> >         'GRASS_RASTER_FORMAT_META':''},context=context,feedback=
> algFeedback)
> >
> >     if task.isCanceled():
> >         deleteFile(tempFile)
> >         return
> >
> >     return tempFile
> >
> > ls90Task = QgsTask.fromFunction('LS90', getZonal, habitatModelFile=hm1,
> cover=ls90Layer)
> > QgsApplication.taskManager().addTask(ls90Task)
> > feedback.pushInfo("Calculating LS14 mean...")
> > ls14Task = QgsTask.fromFunction('LS14 ', getZonal, habitatModelFile=hm2,
> cover=ls14Layer)
> > QgsApplication.taskManager().addTask(ls14Task)
> > hs90Task = QgsTask.fromFunction('HS90 ', getZonal, habitatModelFile=hm3,
> cover=hs90Layer)
> > QgsApplication.taskManager().addTask(hs90Task)
> > hs14Task = QgsTask.fromFunction('HS14 ', getZonal, habitatModelFile=hm4,
> cover=hs14Layer)
> > QgsApplication.taskManager().addTask(hs14Task)
> >
> > while (len([t for t in [ls90Task.status(), ls14Task.status(),
> hs90Task.status(),
> >             hs14Task.status()] if t in [QgsTask.Running,
> QgsTask.Queued]]) > 0)
> >             and not feedback.isCanceled():
> >     sleep(1)
> >
> > if feedback.isCanceled():
> >     # some cleanup code (send task.cancel() and wait for tasks to
> terminate)
> >     break
> >
> > ls90Result = ls90Task.returned_values
> > ls14Result = ls14Task.returned_values
> > hs90Result = hs90Task.returned_values   # only this file exists
> > hs14Result = hs14Task.returned_values
> >
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180814/6f722453/attachment-0001.html>

From wenzeslaus at gmail.com  Tue Aug 14 18:08:00 2018
From: wenzeslaus at gmail.com (Vaclav Petras)
Date: Tue, 14 Aug 2018 21:08:00 -0400
Subject: [QGIS-Developer] Running grass algorithms in threads
In-Reply-To: <CABo5uVthAusm_gGGXyCenuNDkStac2BzxeGyoCgjnMWdH6Xv_Q@mail.gmail.com>
References: <CAOJAE5pJ4-JsV6B60J6V=3QVXWfVN6rJZOS_2KVmcToZs2cCog@mail.gmail.com>
 <CAB28AshpSu+g9WLG+fM4QSLsgYc6cVS3OVBY+KV9UUdBc4HsAw@mail.gmail.com>
 <CABo5uVthAusm_gGGXyCenuNDkStac2BzxeGyoCgjnMWdH6Xv_Q@mail.gmail.com>
Message-ID: <CABo5uVs0aQa2=_Trq3a3Cii+DPZvU0uujRujCDggpaw_e+BnQQ@mail.gmail.com>

On Tue, Aug 14, 2018 at 8:52 PM, Vaclav Petras <wenzeslaus at gmail.com> wrote:

>
> # and delete the rest
> rm ~/grassdata/nc_spm/par1
> rm ~/grassdata/nc_spm/par2
> rm ~/grassdata/nc_spm/par3
> rm ~/grassdata/nc_spm/par4
>


Of course `rm -r` here.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180814/31175114/attachment.html>

From Stefan.Blumentrath at nina.no  Tue Aug 14 23:16:00 2018
From: Stefan.Blumentrath at nina.no (Stefan Blumentrath)
Date: Wed, 15 Aug 2018 06:16:00 +0000
Subject: [QGIS-Developer] Running grass algorithms in threads
In-Reply-To: <CAB28AshpSu+g9WLG+fM4QSLsgYc6cVS3OVBY+KV9UUdBc4HsAw@mail.gmail.com>
References: <CAOJAE5pJ4-JsV6B60J6V=3QVXWfVN6rJZOS_2KVmcToZs2cCog@mail.gmail.com>
 <CAB28AshpSu+g9WLG+fM4QSLsgYc6cVS3OVBY+KV9UUdBc4HsAw@mail.gmail.com>
Message-ID: <DB7PR02MB375634C65E18334F03552EEE9E3F0@DB7PR02MB3756.eurprd02.prod.outlook.com>

Dear Rudi, Nyall,

GRASS is being used on HPC systems for heavily parallelisation. So, in principle, the answer is yes, you can for sure run GRASS algorithms in parallel.
On Linux, I often run several commands in parallel using xargs. So it works just fine in many cases. GRASS also has some specific python functions for parallel processing. See also:
https://grasswiki.osgeo.org/wiki/Parallel_GRASS_jobs
https://grasswiki.osgeo.org/wiki/Parallelizing_Scripts

However, if GRASS algorithms can be run in parallel in this particular case depends.

E.g., if the algorithm in question temporarily modifies the computational region, parallel processes can get in the way for each other.
Also, with SQLite as DB backend writing several vector maps (and attribute tables) in parallel will be a problem (due to SQLite locks).

In addition, if GRASS commands can be executed in parallel in the QGIS Processing framework is probably yet another question, depending on how e.g. QGIS handles data management (locations and mapsets) esp. in more complex workflows / models...

CCing also grass-dev list for more qualified answers...

Cheers
Stefan


-----Original Message-----
From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> On Behalf Of Nyall Dawson
Sent: onsdag 15. august 2018 01:10
To: Rudi von Staden <rudivs at gmail.com>
Cc: qgis-developer <qgis-developer at lists.osgeo.org>
Subject: Re: [QGIS-Developer] Running grass algorithms in threads

On Tue, 14 Aug 2018 at 21:43, Rudi von Staden <rudivs at gmail.com> wrote:
>
> Hi all,
>
> The bottleneck in my script at the moment is the calculation of zonal stats using 'grass7:r.stats.zonal'. I thought I might speed things up by using QgsTask.fromFunction() or QgsProcessingAlgRunnerTask() to run these calculations in parallel. In my tests of both approaches the tasks seem to complete (task.status() == QgsTask.Complete), but the output file is only generated for 1 of 4 parallel tasks (the task that finishes first).
>
> I'm assuming this is because grass algorithms are not thread safe? Or am I missing something in my implementation that could make this work?

I strongly suspect that grass algorithms cannot be run in parallel.
This is why they cannot run in the background in QGIS like the native/GDAL algorithms can. But I'd love for confirmation about this and whether there's any way to make GRASS multi-thread safe.

Because this is grass related (and not QGIS specific) I'd suggest asking on the grass mailing list, and relaying any responses back here.

Nyall

>
> Thanks,
> Rudi
>
>
>
> My code for the QgsTask approach is as below:
>
> def getZonal(task, habitatModelFile, cover):
>     tempFile = QgsProcessingUtils.generateTempFilename("output.tif")
>     processing.run("grass7:r.stats.zonal", {
>         'base':habitatModelFile,
>         'cover':cover,
>         'method':5,
>         '-c':False,
>         '-r':False,
>         'output':tempFile,
>         'GRASS_REGION_PARAMETER':None,
>         'GRASS_REGION_CELLSIZE_PARAMETER':0,
>         'GRASS_RASTER_FORMAT_OPT':'',
>         
> 'GRASS_RASTER_FORMAT_META':''},context=context,feedback=algFeedback)
>
>     if task.isCanceled():
>         deleteFile(tempFile)
>         return
>
>     return tempFile
>
> ls90Task = QgsTask.fromFunction('LS90', getZonal, 
> habitatModelFile=hm1, cover=ls90Layer)
> QgsApplication.taskManager().addTask(ls90Task)
> feedback.pushInfo("Calculating LS14 mean...") ls14Task = 
> QgsTask.fromFunction('LS14 ', getZonal, habitatModelFile=hm2, 
> cover=ls14Layer)
> QgsApplication.taskManager().addTask(ls14Task)
> hs90Task = QgsTask.fromFunction('HS90 ', getZonal, 
> habitatModelFile=hm3, cover=hs90Layer)
> QgsApplication.taskManager().addTask(hs90Task)
> hs14Task = QgsTask.fromFunction('HS14 ', getZonal, 
> habitatModelFile=hm4, cover=hs14Layer)
> QgsApplication.taskManager().addTask(hs14Task)
>
> while (len([t for t in [ls90Task.status(), ls14Task.status(), hs90Task.status(),
>             hs14Task.status()] if t in [QgsTask.Running, QgsTask.Queued]]) > 0)
>             and not feedback.isCanceled():
>     sleep(1)
>
> if feedback.isCanceled():
>     # some cleanup code (send task.cancel() and wait for tasks to terminate)
>     break
>
> ls90Result = ls90Task.returned_values
> ls14Result = ls14Task.returned_values
> hs90Result = hs90Task.returned_values   # only this file exists
> hs14Result = hs14Task.returned_values
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From rudivs at gmail.com  Wed Aug 15 02:53:51 2018
From: rudivs at gmail.com (Rudi von Staden)
Date: Wed, 15 Aug 2018 11:53:51 +0200
Subject: [QGIS-Developer] Running grass algorithms in threads
In-Reply-To: <DB7PR02MB375634C65E18334F03552EEE9E3F0@DB7PR02MB3756.eurprd02.prod.outlook.com>
References: <CAOJAE5pJ4-JsV6B60J6V=3QVXWfVN6rJZOS_2KVmcToZs2cCog@mail.gmail.com>
 <CAB28AshpSu+g9WLG+fM4QSLsgYc6cVS3OVBY+KV9UUdBc4HsAw@mail.gmail.com>
 <DB7PR02MB375634C65E18334F03552EEE9E3F0@DB7PR02MB3756.eurprd02.prod.outlook.com>
Message-ID: <CAOJAE5o8OZ6fi8w3-hVUrH1xwc90ypfoN4sCNj=sKyZnDbHt4g@mail.gmail.com>

Thanks all for your thoughts on this. I suspect the problem may be race
conditions being set up between
https://github.com/qgis/QGIS/blob/master/python/plugins/processing/algs/grass7/Grass7Utils.py
and
https://github.com/qgis/QGIS/blob/master/python/plugins/processing/algs/grass7/Grass7Algorithm.py.
It attempts to use an existing session and shared mapset which could be
problematic from the sounds of things. It might be an idea to add an
optional parameter to grass algorithms to not use shared mapsets and create
a new mapset for each process?

The Grass7 log output from my script is below. The pairs of input rasters
for the parallel algorithms should be:
hm1.tif, LS90.tif
hm2.tif, LS14.tif
hm3.tif, HS90.tif
hm4.tif, LS90.tif

If could be that not all of the grass commands were logged, but it looks
like HS90.tif and LS14.tif were never passed as parameters to grass. I also
added a typical log when the algorithms are executed sequentially (3800-25.tif
is reused instead of hm1-4).

Kind regards,
Rudi


~~~ [ executed in parallel ] ~~~

2018-08-15T10:09:00     INFO    processInputs end. Commands: ['g.proj -c
proj4="+proj=aea +lat_1=-24 +lat_2=-32 +lat_0=0 +lon_0=24 +x_0=0 +y_0=0
+datum=WGS84 +units=m +no_defs"', 'r.external
input="C:\\Users\\rudi\\AppData\\Local\\Temp\\processing_74832af828bb48a9bb0e64fd59d74f24\\cb4c839fbd6f4419873dbc29ffa2b973\\hm4.tif"
band=1 output="rast_5b73df9c811b22" --overwrite -o', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\Analysis\\Data\\HS14.tif"
band=1 output="rast_5b73df9c811b23" --overwrite -o', 'g.region
n=-2332657.7474449594 s=-3803200.178477332 e=984393.5909882308
w=-834195.3236270341 res=92.0757893076434']


2018-08-15T10:09:00     INFO    processCommands end. Commands: ['g.proj -c
proj4="+proj=aea +lat_1=-24 +lat_2=-32 +lat_0=0 +lon_0=24 +x_0=0 +y_0=0
+datum=WGS84 +units=m +no_defs"', 'r.external
input="C:\\Users\\rudi\\AppData\\Local\\Temp\\processing_74832af828bb48a9bb0e64fd59d74f24\\cb4c839fbd6f4419873dbc29ffa2b973\\hm4.tif"
band=1 output="rast_5b73df9c811b22" --overwrite -o', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\Analysis\\Data\\HS14.tif"
band=1 output="rast_5b73df9c811b23" --overwrite -o', 'g.region
n=-2332657.7474449594 s=-3803200.178477332 e=984393.5909882308
w=-834195.3236270341 res=92.0757893076434', 'r.stats.zonal
base=rast_5b73df9c811b22 cover=rast_5b73df9c811b23 method="average"
output=output87eadbc7948b4b5990773af2261f0db8 --overwrite']


2018-08-15T10:09:00     INFO    processInputs end. Commands: ['r.external
input="C:\\Users\\rudi\\AppData\\Local\\Temp\\processing_74832af828bb48a9bb0e64fd59d74f24\\79ea35021d26468c8220582c6397dd18\\hm1.tif"
band=1 output="rast_5b73df9c865914" --overwrite -o', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\Analysis\\Data\\LS90.tif"
band=1 output="rast_5b73df9c865915" --overwrite -o', 'g.region
n=-2332657.7474449594 s=-3803200.178477332 e=984393.5909882308
w=-834195.3236270341 res=92.0757893076434']


2018-08-15T10:09:00     INFO    processCommands end. Commands: ['r.external
input="C:\\Users\\rudi\\AppData\\Local\\Temp\\processing_74832af828bb48a9bb0e64fd59d74f24\\79ea35021d26468c8220582c6397dd18\\hm1.tif"
band=1 output="rast_5b73df9c865914" --overwrite -o', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\Analysis\\Data\\LS90.tif"
band=1 output="rast_5b73df9c865915" --overwrite -o', 'g.region
n=-2332657.7474449594 s=-3803200.178477332 e=984393.5909882308
w=-834195.3236270341 res=92.0757893076434', 'r.stats.zonal
base=rast_5b73df9c865914 cover=rast_5b73df9c865915 method="average"
output=output8a381f2f7cc44b4eae194a33b1839457 --overwrite']


2018-08-15T10:09:00     INFO    processInputs end. Commands: ['r.external
input="C:\\Users\\rudi\\AppData\\Local\\Temp\\processing_74832af828bb48a9bb0e64fd59d74f24\\1d1e057229aa4ee88a8abcb009b78f41\\hm3.tif"
band=1 output="rast_5b73df9c8ac116" --overwrite -o', 'g.region
n=-3680453.4502051217 s=-3763597.8879499235 e=-293721.76789138245
w=-478149.5738745922 res=92.0757893076434']


2018-08-15T10:09:00     INFO    processCommands end. Commands: ['r.external
input="C:\\Users\\rudi\\AppData\\Local\\Temp\\processing_74832af828bb48a9bb0e64fd59d74f24\\1d1e057229aa4ee88a8abcb009b78f41\\hm3.tif"
band=1 output="rast_5b73df9c8ac116" --overwrite -o', 'g.region
n=-3680453.4502051217 s=-3763597.8879499235 e=-293721.76789138245
w=-478149.5738745922 res=92.0757893076434', 'r.stats.zonal
base=rast_5b73df9c8ac116 cover=rast_5b73df9c865915 method="average"
output=outputbef87f5fb08c43cd9e1cdd7ad44e5f1b --overwrite']


2018-08-15T10:09:00     INFO    processInputs end. Commands: ['r.external
input="C:\\Users\\rudi\\AppData\\Local\\Temp\\processing_74832af828bb48a9bb0e64fd59d74f24\\4895f2e889a84f01aa852e7ca0035294\\hm2.tif"
band=1 output="rast_5b73df9c8defa7" --overwrite -o', 'g.region
n=-3680453.4502051217 s=-3763597.8879499235 e=-293721.76789138245
w=-478149.5738745922 res=92.0757893076434']


2018-08-15T10:09:00     INFO    processCommands end. Commands: ['r.external
input="C:\\Users\\rudi\\AppData\\Local\\Temp\\processing_74832af828bb48a9bb0e64fd59d74f24\\4895f2e889a84f01aa852e7ca0035294\\hm2.tif"
band=1 output="rast_5b73df9c8defa7" --overwrite -o', 'g.region
n=-3680453.4502051217 s=-3763597.8879499235 e=-293721.76789138245
w=-478149.5738745922 res=92.0757893076434', 'r.stats.zonal
base=rast_5b73df9c8defa7 cover=rast_5b73df9c865915 method="average"
output=output349369bf07e14011bfd7611868151ec0 --overwrite']


~~~ [ executed sequentially ] ~~~


2018-08-15T11:46:27     INFO    processInputs end. Commands: ['g.proj -c
proj4="+proj=aea +lat_1=-24 +lat_2=-32 +lat_0=0 +lon_0=24 +x_0=0 +y_0=0
+datum=WGS84 +units=m +no_defs"', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\HabitatModels\\3800-25.tif"
band=1 output="rast_5b73f673681b58" --overwrite -o', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\Analysis\\Data\\LS90.tif"
band=1 output="rast_5b73f673681b59" --overwrite -o', 'g.region
n=-2332657.7474449594 s=-3803200.178477332 e=984393.5909882308
w=-834195.3236270341 res=92.07578930764342']

2018-08-15T11:46:27     INFO    processCommands end. Commands: ['g.proj -c
proj4="+proj=aea +lat_1=-24 +lat_2=-32 +lat_0=0 +lon_0=24 +x_0=0 +y_0=0
+datum=WGS84 +units=m +no_defs"', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\HabitatModels\\3800-25.tif"
band=1 output="rast_5b73f673681b58" --overwrite -o', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\Analysis\\Data\\LS90.tif"
band=1 output="rast_5b73f673681b59" --overwrite -o', 'g.region
n=-2332657.7474449594 s=-3803200.178477332 e=984393.5909882308
w=-834195.3236270341 res=92.07578930764342', 'r.stats.zonal
base=rast_5b73f673681b58 cover=rast_5b73f673681b59 method="average"
output=output64f55d9cf1ab4a95aa8bedf69f766783 --overwrite']

2018-08-15T11:46:58     INFO    processInputs end. Commands: ['g.proj -c
proj4="+proj=aea +lat_1=-24 +lat_2=-32 +lat_0=0 +lon_0=24 +x_0=0 +y_0=0
+datum=WGS84 +units=m +no_defs"', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\HabitatModels\\3800-25.tif"
band=1 output="rast_5b73f692c345310" --overwrite -o', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\Analysis\\Data\\LS14.tif"
band=1 output="rast_5b73f692c345311" --overwrite -o', 'g.region
n=-2332657.7474449594 s=-3803200.178477332 e=984393.5909882308
w=-834195.3236270341 res=92.07578930764342']

2018-08-15T11:46:58     INFO    processCommands end. Commands: ['g.proj -c
proj4="+proj=aea +lat_1=-24 +lat_2=-32 +lat_0=0 +lon_0=24 +x_0=0 +y_0=0
+datum=WGS84 +units=m +no_defs"', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\HabitatModels\\3800-25.tif"
band=1 output="rast_5b73f692c345310" --overwrite -o', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\Analysis\\Data\\LS14.tif"
band=1 output="rast_5b73f692c345311" --overwrite -o', 'g.region
n=-2332657.7474449594 s=-3803200.178477332 e=984393.5909882308
w=-834195.3236270341 res=92.07578930764342', 'r.stats.zonal
base=rast_5b73f692c345310 cover=rast_5b73f692c345311 method="average"
output=output1b75839b9455442e95ae87bddfe6c977 --overwrite']

2018-08-15T11:47:30     INFO    processInputs end. Commands: ['g.proj -c
proj4="+proj=aea +lat_1=-24 +lat_2=-32 +lat_0=0 +lon_0=24 +x_0=0 +y_0=0
+datum=WGS84 +units=m +no_defs"', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\HabitatModels\\3800-25.tif"
band=1 output="rast_5b73f6b20afa112" --overwrite -o', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\Analysis\\Data\\HS90.tif"
band=1 output="rast_5b73f6b20afa113" --overwrite -o', 'g.region
n=-2332657.7474449594 s=-3803200.178477332 e=984393.5909882308
w=-834195.3236270341 res=92.07578930764342']

2018-08-15T11:47:30     INFO    processCommands end. Commands: ['g.proj -c
proj4="+proj=aea +lat_1=-24 +lat_2=-32 +lat_0=0 +lon_0=24 +x_0=0 +y_0=0
+datum=WGS84 +units=m +no_defs"', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\HabitatModels\\3800-25.tif"
band=1 output="rast_5b73f6b20afa112" --overwrite -o', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\Analysis\\Data\\HS90.tif"
band=1 output="rast_5b73f6b20afa113" --overwrite -o', 'g.region
n=-2332657.7474449594 s=-3803200.178477332 e=984393.5909882308
w=-834195.3236270341 res=92.07578930764342', 'r.stats.zonal
base=rast_5b73f6b20afa112 cover=rast_5b73f6b20afa113 method="average"
output=output2c6300f21c524e0da74e65776d6292cf --overwrite']

2018-08-15T11:48:01     INFO    processInputs end. Commands: ['g.proj -c
proj4="+proj=aea +lat_1=-24 +lat_2=-32 +lat_0=0 +lon_0=24 +x_0=0 +y_0=0
+datum=WGS84 +units=m +no_defs"', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\HabitatModels\\3800-25.tif"
band=1 output="rast_5b73f6d1a6fa514" --overwrite -o', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\Analysis\\Data\\HS14.tif"
band=1 output="rast_5b73f6d1a6fa515" --overwrite -o', 'g.region
n=-2332657.7474449594 s=-3803200.178477332 e=984393.5909882308
w=-834195.3236270341 res=92.07578930764342']

2018-08-15T11:48:01     INFO    processCommands end. Commands: ['g.proj -c
proj4="+proj=aea +lat_1=-24 +lat_2=-32 +lat_0=0 +lon_0=24 +x_0=0 +y_0=0
+datum=WGS84 +units=m +no_defs"', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\HabitatModels\\3800-25.tif"
band=1 output="rast_5b73f6d1a6fa514" --overwrite -o', 'r.external
input="C:\\Users\\rudi\\GIS\\Projects\\LizeSuitableHabitatModel\\Analysis\\Data\\HS14.tif"
band=1 output="rast_5b73f6d1a6fa515" --overwrite -o', 'g.region
n=-2332657.7474449594 s=-3803200.178477332 e=984393.5909882308
w=-834195.3236270341 res=92.07578930764342', 'r.stats.zonal
base=rast_5b73f6d1a6fa514 cover=rast_5b73f6d1a6fa515 method="average"
output=output744c02ef470a4ddbb2dbaaedf1bda2b0 --overwrite']

On Wed, 15 Aug 2018 at 08:16, Stefan Blumentrath <Stefan.Blumentrath at nina.no>
wrote:

> Dear Rudi, Nyall,
>
> GRASS is being used on HPC systems for heavily parallelisation. So, in
> principle, the answer is yes, you can for sure run GRASS algorithms in
> parallel.
> On Linux, I often run several commands in parallel using xargs. So it
> works just fine in many cases. GRASS also has some specific python
> functions for parallel processing. See also:
> https://grasswiki.osgeo.org/wiki/Parallel_GRASS_jobs
> https://grasswiki.osgeo.org/wiki/Parallelizing_Scripts
>
> However, if GRASS algorithms can be run in parallel in this particular
> case depends.
>
> E.g., if the algorithm in question temporarily modifies the computational
> region, parallel processes can get in the way for each other.
> Also, with SQLite as DB backend writing several vector maps (and attribute
> tables) in parallel will be a problem (due to SQLite locks).
>
> In addition, if GRASS commands can be executed in parallel in the QGIS
> Processing framework is probably yet another question, depending on how
> e.g. QGIS handles data management (locations and mapsets) esp. in more
> complex workflows / models...
>
> CCing also grass-dev list for more qualified answers...
>
> Cheers
> Stefan
>
>
> -----Original Message-----
> From: QGIS-Developer <qgis-developer-bounces at lists.osgeo.org> On Behalf
> Of Nyall Dawson
> Sent: onsdag 15. august 2018 01:10
> To: Rudi von Staden <rudivs at gmail.com>
> Cc: qgis-developer <qgis-developer at lists.osgeo.org>
> Subject: Re: [QGIS-Developer] Running grass algorithms in threads
>
> On Tue, 14 Aug 2018 at 21:43, Rudi von Staden <rudivs at gmail.com> wrote:
> >
> > Hi all,
> >
> > The bottleneck in my script at the moment is the calculation of zonal
> stats using 'grass7:r.stats.zonal'. I thought I might speed things up by
> using QgsTask.fromFunction() or QgsProcessingAlgRunnerTask() to run these
> calculations in parallel. In my tests of both approaches the tasks seem to
> complete (task.status() == QgsTask.Complete), but the output file is only
> generated for 1 of 4 parallel tasks (the task that finishes first).
> >
> > I'm assuming this is because grass algorithms are not thread safe? Or am
> I missing something in my implementation that could make this work?
>
> I strongly suspect that grass algorithms cannot be run in parallel.
> This is why they cannot run in the background in QGIS like the native/GDAL
> algorithms can. But I'd love for confirmation about this and whether
> there's any way to make GRASS multi-thread safe.
>
> Because this is grass related (and not QGIS specific) I'd suggest asking
> on the grass mailing list, and relaying any responses back here.
>
> Nyall
>
> >
> > Thanks,
> > Rudi
> >
> >
> >
> > My code for the QgsTask approach is as below:
> >
> > def getZonal(task, habitatModelFile, cover):
> >     tempFile = QgsProcessingUtils.generateTempFilename("output.tif")
> >     processing.run("grass7:r.stats.zonal", {
> >         'base':habitatModelFile,
> >         'cover':cover,
> >         'method':5,
> >         '-c':False,
> >         '-r':False,
> >         'output':tempFile,
> >         'GRASS_REGION_PARAMETER':None,
> >         'GRASS_REGION_CELLSIZE_PARAMETER':0,
> >         'GRASS_RASTER_FORMAT_OPT':'',
> >
> > 'GRASS_RASTER_FORMAT_META':''},context=context,feedback=algFeedback)
> >
> >     if task.isCanceled():
> >         deleteFile(tempFile)
> >         return
> >
> >     return tempFile
> >
> > ls90Task = QgsTask.fromFunction('LS90', getZonal,
> > habitatModelFile=hm1, cover=ls90Layer)
> > QgsApplication.taskManager().addTask(ls90Task)
> > feedback.pushInfo("Calculating LS14 mean...") ls14Task =
> > QgsTask.fromFunction('LS14 ', getZonal, habitatModelFile=hm2,
> > cover=ls14Layer)
> > QgsApplication.taskManager().addTask(ls14Task)
> > hs90Task = QgsTask.fromFunction('HS90 ', getZonal,
> > habitatModelFile=hm3, cover=hs90Layer)
> > QgsApplication.taskManager().addTask(hs90Task)
> > hs14Task = QgsTask.fromFunction('HS14 ', getZonal,
> > habitatModelFile=hm4, cover=hs14Layer)
> > QgsApplication.taskManager().addTask(hs14Task)
> >
> > while (len([t for t in [ls90Task.status(), ls14Task.status(),
> hs90Task.status(),
> >             hs14Task.status()] if t in [QgsTask.Running,
> QgsTask.Queued]]) > 0)
> >             and not feedback.isCanceled():
> >     sleep(1)
> >
> > if feedback.isCanceled():
> >     # some cleanup code (send task.cancel() and wait for tasks to
> terminate)
> >     break
> >
> > ls90Result = ls90Task.returned_values
> > ls14Result = ls14Task.returned_values
> > hs90Result = hs90Task.returned_values   # only this file exists
> > hs14Result = hs14Task.returned_values
> >
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180815/bcbfd9b4/attachment-0001.html>

From rudivs at gmail.com  Wed Aug 15 03:46:43 2018
From: rudivs at gmail.com (Rudi von Staden)
Date: Wed, 15 Aug 2018 12:46:43 +0200
Subject: [QGIS-Developer] K-neighbour concave hull algorithm
Message-ID: <CAOJAE5q5LHAJzF4xh6DaqgbymoV2-tinb1rvkZnGy5KGy=-oeQ@mail.gmail.com>

Hi all,

I've been using the concave hull processing algorithm as part of a model
which iterates over species distribution data to create a basic
distribution polygon. I've found that it can produce very unexpected
outputs for certain input data, so I don't think it's a good algorithm to
use 'unsupervised'.

The results from the k-neighbour concave hull algorithm (
https://www.researchgate.net/publication/220868874_Concave_hull_A_k-nearest_neighbours_approach_for_the_computation_of_the_region_occupied_by_a_set_of_points)
are generally more pleasing and will never have strange pinches or ignored
points (although it also doesn't provide for holes). From my testing I
think the outputs correspond more to how someone would naturally
circumscribe a set of points. As such I would argue for it to be included
as one of the default algorithms.

There is an existing plugin (
https://github.com/detlevn/QGIS-ConcaveHull-Plugin) which is pretty decent
but it hasn't been updated to work with QGIS3. I've also come across a C++
implementation (
https://www.codeproject.com/Articles/1201438/The-Concave-Hull-of-a-Set-of-Points)
which seems to have a lot of optimisation advantages.

I see three options:
1. Update the plugin code and streamline it as a qgis algorithm. I'd be
happy to give this a go if there's support and I think it would be
relatively straightforward.
2. Adapt the c++ implementation and add it as a native algorithm. This
would probably have significant performance advantages, but may not be
worth the effort. I'm not that confident with C++ and would at least need a
fair amount of guidance if someone else doesn't want to take it on. I did
reach out to the developer and he'd be happy for his code to be used if it
comes to that.
3. Update the plugin for QGIS3 (or at least the parts of it that I need). I
would do this anyway if we don't proceed with either of the other options.

Any thoughts?

Rudi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180815/bbf43126/attachment.html>

From jef at norbit.de  Wed Aug 15 05:09:54 2018
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Wed, 15 Aug 2018 14:09:54 +0200
Subject: [QGIS-Developer] How long before closing an issue on "lack of
 feedback"?
In-Reply-To: <b1a19f9c-ef64-f921-c37b-da162b97782e@opengis.ch>
References: <CAB28AshO-VF0U9-7C0CAYN4M4qgXmO1xbXq599XA5+SxT6ouJg@mail.gmail.com>
 <CAL5Q673toKaBWB6oE6=mi8Phf8_fQkf22=g6Pntjki1NJxJX8A@mail.gmail.com>
 <161482dd-6aba-c4ce-c2ab-77fc2562c3bd@faunalia.it>
 <CAB28Asha08Sp5DuJa1hfhzw+2-rNn1zu=jJrXNtYrJZ4Gn+Ydg@mail.gmail.com>
 <a337882a-dc67-535f-98b1-5267da9092cc@lightpear.com>
 <b1a19f9c-ef64-f921-c37b-da162b97782e@opengis.ch>
Message-ID: <20180815120954.7gbxv42ibuhubzei@norbit.de>

Hi Matthias,

On Tue, 14. Aug 2018 at 11:21:38 +0200, Matthias Kuhn wrote:
> * Disable the stack when pdb are not installed
> * Add some guidelines on issue reporting (as stated by Jonathan)
> * Allow opening a new ticket and searching for identical reports to link to

* Disable submission if "Tell us something about when you got the crash"/"User
  Feedback" is empty.


Jürgen

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden             http://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180815/1a2f21ff/attachment.sig>

From neteler at osgeo.org  Wed Aug 15 13:29:24 2018
From: neteler at osgeo.org (Markus Neteler)
Date: Wed, 15 Aug 2018 22:29:24 +0200
Subject: [QGIS-Developer] [GRASS-dev] Running grass algorithms in threads
In-Reply-To: <CAOJAE5o8OZ6fi8w3-hVUrH1xwc90ypfoN4sCNj=sKyZnDbHt4g@mail.gmail.com>
References: <CAOJAE5pJ4-JsV6B60J6V=3QVXWfVN6rJZOS_2KVmcToZs2cCog@mail.gmail.com>
 <CAB28AshpSu+g9WLG+fM4QSLsgYc6cVS3OVBY+KV9UUdBc4HsAw@mail.gmail.com>
 <DB7PR02MB375634C65E18334F03552EEE9E3F0@DB7PR02MB3756.eurprd02.prod.outlook.com>
 <CAOJAE5o8OZ6fi8w3-hVUrH1xwc90ypfoN4sCNj=sKyZnDbHt4g@mail.gmail.com>
Message-ID: <CALFmHhvYGBnJoxvW3T3J49coh5uVNpAQYq7KR_j8Ky+d0JMb1g@mail.gmail.com>

On Wed, Aug 15, 2018 at 11:54 AM Rudi von Staden <rudivs at gmail.com> wrote:
>
> Thanks all for your thoughts on this. I suspect the problem may be race conditions being set up between https://github.com/qgis/QGIS/blob/master/python/plugins/processing/algs/grass7/Grass7Utils.py and https://github.com/qgis/QGIS/blob/master/python/plugins/processing/algs/grass7/Grass7Algorithm.py. It attempts to use an existing session and shared mapset which could be problematic from the sounds of things. It might be an idea to add an optional parameter to grass algorithms to not use shared mapsets and create a new mapset for each process?

It just came in yesterday :)

See
https://lists.osgeo.org/pipermail/grass-user/2018-August/078936.html
[GRASS-user] New CLI option --tmp-location in 7.5 to enhance --exec

Perhaps this approach will solve the issues?

Best
Markus

From nyall.dawson at gmail.com  Wed Aug 15 15:54:46 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 16 Aug 2018 08:54:46 +1000
Subject: [QGIS-Developer] [GRASS-dev] Running grass algorithms in threads
In-Reply-To: <CALFmHhvYGBnJoxvW3T3J49coh5uVNpAQYq7KR_j8Ky+d0JMb1g@mail.gmail.com>
References: <CAOJAE5pJ4-JsV6B60J6V=3QVXWfVN6rJZOS_2KVmcToZs2cCog@mail.gmail.com>
 <CAB28AshpSu+g9WLG+fM4QSLsgYc6cVS3OVBY+KV9UUdBc4HsAw@mail.gmail.com>
 <DB7PR02MB375634C65E18334F03552EEE9E3F0@DB7PR02MB3756.eurprd02.prod.outlook.com>
 <CAOJAE5o8OZ6fi8w3-hVUrH1xwc90ypfoN4sCNj=sKyZnDbHt4g@mail.gmail.com>
 <CALFmHhvYGBnJoxvW3T3J49coh5uVNpAQYq7KR_j8Ky+d0JMb1g@mail.gmail.com>
Message-ID: <CAB28Asj1yW2F3_G2wYf-trmF=2axjCdwYZBXQwQ+n-DBCqCaAQ@mail.gmail.com>

> I strongly suspect that grass algorithms cannot be run in parallel.
> This is why they cannot run in the background in QGIS like the native/GDAL algorithms can. But I'd love for confirmation about this and whether there's any way to make GRASS multi-thread safe.

Just to clarify here -- I was referring to the GRASS provider in QGIS,
not GRASS itself, when I stated that the algorithms could not be run
in parallel. I phrased that badly!

> On Wed, Aug 15, 2018 at 11:54 AM Rudi von Staden <rudivs at gmail.com> wrote:
> >
> > Thanks all for your thoughts on this. I suspect the problem may be race conditions being set up between https://github.com/qgis/QGIS/blob/master/python/plugins/processing/algs/grass7/Grass7Utils.py and https://github.com/qgis/QGIS/blob/master/python/plugins/processing/algs/grass7/Grass7Algorithm.py. It attempts to use an existing session and shared mapset which could be problematic from the sounds of things. It might be an idea to add an optional parameter to grass algorithms to not use shared mapsets and create a new mapset for each process?
>
> It just came in yesterday :)
>
> See
> https://lists.osgeo.org/pipermail/grass-user/2018-August/078936.html
> [GRASS-user] New CLI option --tmp-location in 7.5 to enhance --exec
>
> Perhaps this approach will solve the issues?

I don't think this is the issue in QGIS.

Indeed the GRASS Processing provider in QGIS currently re-uses a
single temporary mapset for an entire QGIS session. This means all
GRASS algorithms executed use the same mapset, which as stated earlier
in this thread can cause issues.

We could potentially switch to a single temporary mapset for each
individual algorithm executed, but I'd need to look into the
ramifications of that change in depth, as it could potentially cause
performance regressions for users who execute GRASS algorithms
sequentially.

Nyall



>
> Best
> Markus

From luipir at gmail.com  Thu Aug 16 01:12:51 2018
From: luipir at gmail.com (Luigi Pirelli)
Date: Thu, 16 Aug 2018 10:12:51 +0200
Subject: [QGIS-Developer] K-neighbour concave hull algorithm
In-Reply-To: <CAOJAE5q5LHAJzF4xh6DaqgbymoV2-tinb1rvkZnGy5KGy=-oeQ@mail.gmail.com>
References: <CAOJAE5q5LHAJzF4xh6DaqgbymoV2-tinb1rvkZnGy5KGy=-oeQ@mail.gmail.com>
Message-ID: <CAFO80_pBanA18TfujzyLU9XNioMiB1qJSM-4UjSt15PYUN6nQw@mail.gmail.com>

I agree with  the progressive approach in your PR e.g. just integrate the
alg as processing algorithm. A 2) approach can come later

https://github.com/qgis/QGIS/pull/7626

tnks to point out about this alg/plugin, I didn't realized it's
existence... it's a pain we missed the opportunity to work on it, just when
we where in FOSS4G-EU that was hosted by the university/department that
published the algorithm.

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Mastering QGIS 2nd Edition:
*
https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
* Hire me: http://goo.gl/BYRQKg
**************************************************************************************************


On Wed, 15 Aug 2018 at 12:47, Rudi von Staden <rudivs at gmail.com> wrote:

> Hi all,
>
> I've been using the concave hull processing algorithm as part of a model
> which iterates over species distribution data to create a basic
> distribution polygon. I've found that it can produce very unexpected
> outputs for certain input data, so I don't think it's a good algorithm to
> use 'unsupervised'.
>
> The results from the k-neighbour concave hull algorithm (
> https://www.researchgate.net/publication/220868874_Concave_hull_A_k-nearest_neighbours_approach_for_the_computation_of_the_region_occupied_by_a_set_of_points)
> are generally more pleasing and will never have strange pinches or ignored
> points (although it also doesn't provide for holes). From my testing I
> think the outputs correspond more to how someone would naturally
> circumscribe a set of points. As such I would argue for it to be included
> as one of the default algorithms.
>
> There is an existing plugin (
> https://github.com/detlevn/QGIS-ConcaveHull-Plugin) which is pretty
> decent but it hasn't been updated to work with QGIS3. I've also come across
> a C++ implementation (
> https://www.codeproject.com/Articles/1201438/The-Concave-Hull-of-a-Set-of-Points)
> which seems to have a lot of optimisation advantages.
>
> I see three options:
> 1. Update the plugin code and streamline it as a qgis algorithm. I'd be
> happy to give this a go if there's support and I think it would be
> relatively straightforward.
> 2. Adapt the c++ implementation and add it as a native algorithm. This
> would probably have significant performance advantages, but may not be
> worth the effort. I'm not that confident with C++ and would at least need a
> fair amount of guidance if someone else doesn't want to take it on. I did
> reach out to the developer and he'd be happy for his code to be used if it
> comes to that.
> 3. Update the plugin for QGIS3 (or at least the parts of it that I need).
> I would do this anyway if we don't proceed with either of the other options.
>
> Any thoughts?
>
> Rudi
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180816/a7f187ea/attachment.html>

From rudivs at gmail.com  Thu Aug 16 05:36:36 2018
From: rudivs at gmail.com (Rudi von Staden)
Date: Thu, 16 Aug 2018 14:36:36 +0200
Subject: [QGIS-Developer] K-neighbour concave hull algorithm
In-Reply-To: <CAFO80_pBanA18TfujzyLU9XNioMiB1qJSM-4UjSt15PYUN6nQw@mail.gmail.com>
References: <CAOJAE5q5LHAJzF4xh6DaqgbymoV2-tinb1rvkZnGy5KGy=-oeQ@mail.gmail.com>
 <CAFO80_pBanA18TfujzyLU9XNioMiB1qJSM-4UjSt15PYUN6nQw@mail.gmail.com>
Message-ID: <CAOJAE5pWmqGWWQ-EbqkmRokV7FEVBcf91-5dYOWYTQks1feDpg@mail.gmail.com>

On Thu, 16 Aug 2018 at 10:13, Luigi Pirelli <luipir at gmail.com> wrote:

> I agree with  the progressive approach in your PR e.g. just integrate the
> alg as processing algorithm. A 2) approach can come later
>
> https://github.com/qgis/QGIS/pull/7626
>

Thanks Luigi. I had thought to discuss it on the list first, but it was
simple enough to prepare it as an algorithm so I just opened the PR for
option 1. I do think the C++ implementation could be worthwhile for big
datasets, but agree that it could be added later.

tnks to point out about this alg/plugin, I didn't realized it's existence...
>

Yes, I also came across it by accident when I had already started writing
my own version. It definitely saved me a lot of time to be able to reuse
the code!

Rudi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180816/328e2aef/attachment.html>

From noreply at qgis.org  Thu Aug 16 05:39:02 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 16 Aug 2018 12:39:02 -0000
Subject: [QGIS-Developer] Plugin [221] VectorFieldCalc approval notification.
Message-ID: <20180816123902.5691.64927@2c6504964296>


Plugin VectorFieldCalc approval by pcav.
The plugin version "[221] VectorFieldCalc 1.5.1" is now approved
Link: http://plugins.qgis.org/plugins/VectorFieldCalc/

From adenaculture at gmail.com  Thu Aug 16 08:24:41 2018
From: adenaculture at gmail.com (C Hamilton)
Date: Thu, 16 Aug 2018 11:24:41 -0400
Subject: [QGIS-Developer] QGIS 3 Ellipsoid Parameters
Message-ID: <CABPxTTq6K5=LXY0KGjNp9AZ9FhhHeEg32GHxLHGrUU7wQzT6_w@mail.gmail.com>

How do I get access to the ellipsoid parameters, in Python, found in the
Project Properties under Measurements->Ellipsoid? -- ie. the ellipsoid
name, semi-major, and semi-minor axis.

Does QGIS 3 still use Vincinty to calculate geodesic distances and position
or does it use something else?

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180816/e273641c/attachment-0001.html>

From noreply at qgis.org  Thu Aug 16 11:05:47 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 16 Aug 2018 18:05:47 -0000
Subject: [QGIS-Developer] Plugin [1521] Radiation reconnaissance results
	approval notification.
Message-ID: <20180816180547.5688.33731@2c6504964296>


Plugin Radiation reconnaissance results approval by pcav.
The plugin version "[1521] Radiation reconnaissance results 1.0.0" is now approved
Link: http://plugins.qgis.org/plugins/radiation-reconnaissance-results-plugin/

From nyall.dawson at gmail.com  Thu Aug 16 14:35:54 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 17 Aug 2018 07:35:54 +1000
Subject: [QGIS-Developer] QGIS 3 Ellipsoid Parameters
In-Reply-To: <CABPxTTq6K5=LXY0KGjNp9AZ9FhhHeEg32GHxLHGrUU7wQzT6_w@mail.gmail.com>
References: <CABPxTTq6K5=LXY0KGjNp9AZ9FhhHeEg32GHxLHGrUU7wQzT6_w@mail.gmail.com>
Message-ID: <CAB28Ashry+NCuDa3vvKyTZNofMpc6EOm_bnuPLCZuPX6gX928g@mail.gmail.com>

On Fri, 17 Aug 2018 at 01:24, C Hamilton <adenaculture at gmail.com> wrote:
>
> How do I get access to the ellipsoid parameters, in Python, found in the Project Properties under Measurements->Ellipsoid? -- ie. the ellipsoid name, semi-major, and semi-minor axis.

QgsProject.instance().ellipsoid()

and

QgsEllipsoidUtils.ellipsoidParameters( QgsProject.instance().ellipsoid() )

> Does QGIS 3 still use Vincinty to calculate geodesic distances and position or does it use something else?

Yes.
.
.
.
(Until you port your nice functions to c++ and send in a pull request ;P )

Nyall

>
> Thanks,
>
> Calvin
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From noreply at qgis.org  Thu Aug 16 23:24:59 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Fri, 17 Aug 2018 06:24:59 -0000
Subject: [QGIS-Developer] Plugin [1391] Asistente LADM_COL approval
	notification.
Message-ID: <20180817062459.8075.44903@2c6504964296>


Plugin Asistente LADM_COL approval by pcav.
The plugin version "[1391] Asistente LADM_COL 0.6.2 Experimental" is now approved
Link: http://plugins.qgis.org/plugins/asistente_ladm_col/

From stephane.brunner at camptocamp.com  Fri Aug 17 02:44:08 2018
From: stephane.brunner at camptocamp.com (=?UTF-8?Q?St=C3=A9phane_Brunner?=)
Date: Fri, 17 Aug 2018 11:44:08 +0200
Subject: [QGIS-Developer] [Server] feature typeName namespace in WFS
	GetFeature
Message-ID: <CAChDcoSqU7LRAL20z+B+HaKbfFb2ThG6m3_sMwtFW3ieTs6mOQ@mail.gmail.com>

Hello,

In the test we configure the typeName like this
https://github.com/qgis/QGIS/blob/6d1e420c71615307bb2d5e84c187b32a1a363cda/tests/src/python/test_qgsserver_wfs.py#L217
<wfs:Query typeName="testlayer" srsName="EPSG:3857" xmlns:feature="
http://www.qgis.org/gml">


But I understand this is wrong, it should be
<wfs:Query typeName="testlayer" srsName="EPSG:3857" xmlns="
http://www.qgis.org/gml">
or
<wfs:Query typeName="feature:testlayer" srsName="EPSG:3857" xmlns:feature="
http://www.qgis.org/gml">

Am I right or not?

CU
Stéphane


-- 
camptocamp.com
mapfish.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180817/46814f16/attachment.html>

From adenaculture at gmail.com  Fri Aug 17 05:22:14 2018
From: adenaculture at gmail.com (C Hamilton)
Date: Fri, 17 Aug 2018 08:22:14 -0400
Subject: [QGIS-Developer] QGIS 3 Ellipsoid Parameters
In-Reply-To: <CAB28Ashry+NCuDa3vvKyTZNofMpc6EOm_bnuPLCZuPX6gX928g@mail.gmail.com>
References: <CABPxTTq6K5=LXY0KGjNp9AZ9FhhHeEg32GHxLHGrUU7wQzT6_w@mail.gmail.com>
 <CAB28Ashry+NCuDa3vvKyTZNofMpc6EOm_bnuPLCZuPX6gX928g@mail.gmail.com>
Message-ID: <CABPxTTpzG5pFjgdv80ds8byoHaD9m1bdP6zPzXx=a12vVb1GYA@mail.gmail.com>

Nyall,

Thanks!!! That is just what I needed.

Calvin

On Thu, Aug 16, 2018 at 5:35 PM, Nyall Dawson <nyall.dawson at gmail.com>
wrote:

> On Fri, 17 Aug 2018 at 01:24, C Hamilton <adenaculture at gmail.com> wrote:
> >
> > How do I get access to the ellipsoid parameters, in Python, found in the
> Project Properties under Measurements->Ellipsoid? -- ie. the ellipsoid
> name, semi-major, and semi-minor axis.
>
> QgsProject.instance().ellipsoid()
>
> and
>
> QgsEllipsoidUtils.ellipsoidParameters( QgsProject.instance().ellipsoid() )
>
> > Does QGIS 3 still use Vincinty to calculate geodesic distances and
> position or does it use something else?
>
> Yes.
> .
> .
> .
> (Until you port your nice functions to c++ and send in a pull request ;P )
>
> Nyall
>
> >
> > Thanks,
> >
> > Calvin
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180817/121135d0/attachment.html>

From noreply at qgis.org  Fri Aug 17 09:16:23 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Fri, 17 Aug 2018 16:16:23 -0000
Subject: [QGIS-Developer] Plugin [998] Standard Deviational Ellipse approval
	notification.
Message-ID: <20180817161623.8076.65169@2c6504964296>


Plugin Standard Deviational Ellipse approval by pcav.
The plugin version "[998] Standard Deviational Ellipse 1.2.2" is now approved
Link: http://plugins.qgis.org/plugins/SDEllipse/

From noreply at qgis.org  Fri Aug 17 09:17:11 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Fri, 17 Aug 2018 16:17:11 -0000
Subject: [QGIS-Developer] Plugin [998] Standard Deviational Ellipse approval
	notification.
Message-ID: <20180817161711.8078.51355@2c6504964296>


Plugin Standard Deviational Ellipse approval by pcav.
The plugin version "[998] Standard Deviational Ellipse 3.0.1" is now approved
Link: http://plugins.qgis.org/plugins/SDEllipse/

From noreply at qgis.org  Fri Aug 17 21:24:51 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Sat, 18 Aug 2018 04:24:51 -0000
Subject: [QGIS-Developer] Plugin [1523] Map Corners Coordinates approval
	notification.
Message-ID: <20180818042451.8078.60743@2c6504964296>


Plugin Map Corners Coordinates approval by pcav.
The plugin version "[1523] Map Corners Coordinates 1.0.0" is now approved
Link: http://plugins.qgis.org/plugins/map-coords-plugin/

From noreply at qgis.org  Fri Aug 17 21:25:31 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Sat, 18 Aug 2018 04:25:31 -0000
Subject: [QGIS-Developer] Plugin [1522] Ground Radiation Monitoring approval
	notification.
Message-ID: <20180818042531.8078.18931@2c6504964296>


Plugin Ground Radiation Monitoring approval by pcav.
The plugin version "[1522] Ground Radiation Monitoring 1.0.0" is now approved
Link: http://plugins.qgis.org/plugins/ground-radiation-monitoring-plugin/

From rdmailings at duif.net  Sat Aug 18 06:26:21 2018
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sat, 18 Aug 2018 15:26:21 +0200
Subject: [QGIS-Developer] build error 2.18/Debian at end
Message-ID: <96268de6-5c94-4ab7-fd33-fb1b04e6f683@duif.net>

Just upgraded to Debian testing, updated libs etc, reconfigured, and
build goes fine untill the last 100% :

Scanning dependencies of target pyyaml
[100%] Built target pyyaml
Scanning dependencies of target pymarkupsafe
[100%] Built target pymarkupsafe
Scanning dependencies of target pyfuture
Error copying directory from "_dummy_thread" to
"/home/richard/git/qgis218/build/output/python/".
make[2]: *** [python/ext-libs/CMakeFiles/pyfuture.dir/build.make:57:
pyfuture] Error 1
make[1]: *** [CMakeFiles/Makefile2:8976:
python/ext-libs/CMakeFiles/pyfuture.dir/all] Error 2
make: *** [Makefile:152: all] Error 2

both source and target dir seem available and writable (to myself)

Anybody seeing this? Or has another clue?

Regards,

Richard Duivenvoorde

From cavallini at faunalia.it  Sat Aug 18 06:37:34 2018
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sat, 18 Aug 2018 15:37:34 +0200
Subject: [QGIS-Developer] build error 2.18/Debian at end
In-Reply-To: <96268de6-5c94-4ab7-fd33-fb1b04e6f683@duif.net>
References: <96268de6-5c94-4ab7-fd33-fb1b04e6f683@duif.net>
Message-ID: <a16ceeea-f256-a3e8-3017-6f706b6bd283@faunalia.it>

Hi all,

I consistently get a similar error on a fresh sid box:

[ 81%] Built target pynetworkanalysis
Error copying directory from "_dummy_thread" to
"/usr/local/src/qgis/QGIS/build-qgis2/output/python/".
make[2]: *** [python/ext-libs/CMakeFiles/pyfuture.dir/build.make:57:
pyfuture] Error 1
make[1]: *** [CMakeFiles/Makefile2:9861:
python/ext-libs/CMakeFiles/pyfuture.dir/all] Error 2
make: *** [Makefile:163: all] Error 2

Any hint would be appreciated.
All the best.

On 08/18/2018 03:26 PM, Richard Duivenvoorde wrote:
> Just upgraded to Debian testing, updated libs etc, reconfigured, and
> build goes fine untill the last 100% :
>
> Scanning dependencies of target pyyaml
> [100%] Built target pyyaml
> Scanning dependencies of target pymarkupsafe
> [100%] Built target pymarkupsafe
> Scanning dependencies of target pyfuture
> Error copying directory from "_dummy_thread" to
> "/home/richard/git/qgis218/build/output/python/".
> make[2]: *** [python/ext-libs/CMakeFiles/pyfuture.dir/build.make:57:
> pyfuture] Error 1
> make[1]: *** [CMakeFiles/Makefile2:8976:
> python/ext-libs/CMakeFiles/pyfuture.dir/all] Error 2
> make: *** [Makefile:152: all] Error 2
>
> both source and target dir seem available and writable (to myself)
>
> Anybody seeing this? Or has another clue?
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
https://www.google.com/trends/explore?date=all&geo=IT&q=qgis,arcgis


From rdmailings at duif.net  Sat Aug 18 06:57:31 2018
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sat, 18 Aug 2018 15:57:31 +0200
Subject: [QGIS-Developer] build error 2.18/Debian at end
In-Reply-To: <a16ceeea-f256-a3e8-3017-6f706b6bd283@faunalia.it>
References: <96268de6-5c94-4ab7-fd33-fb1b04e6f683@duif.net>
 <a16ceeea-f256-a3e8-3017-6f706b6bd283@faunalia.it>
Message-ID: <dff951f6-ab62-c77a-61fd-d09e0aad5215@duif.net>

Ok, I get 2.18 running by DISABLING the WITH_INTERNAL_FUTURE option:

WITH_INTERNAL_FUTURE OFF

Regards,

Richard Duivenvoorde


On 08/18/2018 03:37 PM, Paolo Cavallini wrote:
> Hi all,
> 
> I consistently get a similar error on a fresh sid box:
> 
> [ 81%] Built target pynetworkanalysis
> Error copying directory from "_dummy_thread" to
> "/usr/local/src/qgis/QGIS/build-qgis2/output/python/".
> make[2]: *** [python/ext-libs/CMakeFiles/pyfuture.dir/build.make:57:
> pyfuture] Error 1
> make[1]: *** [CMakeFiles/Makefile2:9861:
> python/ext-libs/CMakeFiles/pyfuture.dir/all] Error 2
> make: *** [Makefile:163: all] Error 2
> 
> Any hint would be appreciated.
> All the best.
> 
> On 08/18/2018 03:26 PM, Richard Duivenvoorde wrote:
>> Just upgraded to Debian testing, updated libs etc, reconfigured, and
>> build goes fine untill the last 100% :
>>
>> Scanning dependencies of target pyyaml
>> [100%] Built target pyyaml
>> Scanning dependencies of target pymarkupsafe
>> [100%] Built target pymarkupsafe
>> Scanning dependencies of target pyfuture
>> Error copying directory from "_dummy_thread" to
>> "/home/richard/git/qgis218/build/output/python/".
>> make[2]: *** [python/ext-libs/CMakeFiles/pyfuture.dir/build.make:57:
>> pyfuture] Error 1
>> make[1]: *** [CMakeFiles/Makefile2:8976:
>> python/ext-libs/CMakeFiles/pyfuture.dir/all] Error 2
>> make: *** [Makefile:152: all] Error 2
>>
>> both source and target dir seem available and writable (to myself)
>>
>> Anybody seeing this? Or has another clue?
>>
>> Regards,
>>
>> Richard Duivenvoorde
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


From noreply at qgis.org  Sun Aug 19 03:28:54 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Sun, 19 Aug 2018 10:28:54 -0000
Subject: [QGIS-Developer] Plugin [294] qProf approval notification.
Message-ID: <20180819102854.802.1858@2c6504964296>


Plugin qProf approval by pcav.
The plugin version "[294] qProf 0.4.2" is now approved
Link: http://plugins.qgis.org/plugins/qProf/

From tobias.wendorff at tu-dortmund.de  Sun Aug 19 07:26:19 2018
From: tobias.wendorff at tu-dortmund.de (Tobias Wendorff)
Date: Sun, 19 Aug 2018 16:26:19 +0200
Subject: [QGIS-Developer] Which category for exports?
Message-ID: <4f6818288ec5018cf10bc0ce8ebfbd62.squirrel@webmail.tu-dortmund.de>

Hi there,

I'm lost in the issue trackers category list... it's pretty hard to
find the right one.

I've found a bug when exporting CSV files. Which one is the right
category?

Best regards,
Tobias


From luipir at gmail.com  Sun Aug 19 15:46:05 2018
From: luipir at gmail.com (Luigi Pirelli)
Date: Mon, 20 Aug 2018 00:46:05 +0200
Subject: [QGIS-Developer] Which category for exports?
In-Reply-To: <4f6818288ec5018cf10bc0ce8ebfbd62.squirrel@webmail.tu-dortmund.de>
References: <4f6818288ec5018cf10bc0ce8ebfbd62.squirrel@webmail.tu-dortmund.de>
Message-ID: <CAFO80_qC_htgMoPtOWHpDyACk169E09yTpwqdx-kC2AQtWitXw@mail.gmail.com>

"Data Provider/Delimited Text"

would be fine... without knowing the nature of the issue.

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Mastering QGIS 2nd Edition:
*
https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
* Hire me: http://goo.gl/BYRQKg
**************************************************************************************************


On Sun, 19 Aug 2018 at 18:20, Tobias Wendorff <
tobias.wendorff at tu-dortmund.de> wrote:

> Hi there,
>
> I'm lost in the issue trackers category list... it's pretty hard to
> find the right one.
>
> I've found a bug when exporting CSV files. Which one is the right
> category?
>
> Best regards,
> Tobias
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180820/9b052376/attachment.html>

From enzedrailmaps at gmail.com  Sun Aug 19 23:32:00 2018
From: enzedrailmaps at gmail.com (Patrick Dunford)
Date: Mon, 20 Aug 2018 18:32:00 +1200
Subject: [QGIS-Developer] Which category for exports?
In-Reply-To: <4f6818288ec5018cf10bc0ce8ebfbd62.squirrel@webmail.tu-dortmund.de>
References: <4f6818288ec5018cf10bc0ce8ebfbd62.squirrel@webmail.tu-dortmund.de>
Message-ID: <eae61344-01cd-16ea-985c-930556b1b0e9@gmail.com>

Just put unknown, the developers will change it to the right one.


On 20/08/18 02:26, Tobias Wendorff wrote:
> Hi there,
>
> I'm lost in the issue trackers category list... it's pretty hard to
> find the right one.
>
> I've found a bug when exporting CSV files. Which one is the right
> category?
>
> Best regards,
> Tobias
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From delazj at gmail.com  Mon Aug 20 04:32:42 2018
From: delazj at gmail.com (DelazJ)
Date: Mon, 20 Aug 2018 13:32:42 +0200
Subject: [QGIS-Developer] Translation state of master
In-Reply-To: <CA+H0G_Gr_OPTYPoMvwYeZUzNJ61Ec6EawoyDXOr3R1dWuJ+44A@mail.gmail.com>
References: <4d5c4ede-3d5e-5368-e527-7413bb639e93@carto.net>
 <CAECJsSrZ686n0mZ3COyD3ZGA6NJpEguiFvZ_DXCe2Z0xb78SBA@mail.gmail.com>
 <CA+3oMjvvoA9PPp2pS1aLnzPdO7Nu9qdqQ8XG6nKyvOv5KR8rEw@mail.gmail.com>
 <2454297.8LP1NBVuXl@debian>
 <CA+H0G_GcbTSieB6ssjFXr76=ZfdWcyXD_9x0mPGN6Q4Qshry7Q@mail.gmail.com>
 <5fdcd1c5-1e51-4b94-f736-e451ea09e960@duif.net>
 <CALuHMPBAsyvEgpkzN4qF464nYLG=ZVCqGgfS0topv37SGunACA@mail.gmail.com>
 <CA+H0G_Gr_OPTYPoMvwYeZUzNJ61Ec6EawoyDXOr3R1dWuJ+44A@mail.gmail.com>
Message-ID: <CAECJsSr+ptA4DCHP28jP6xDVDmw61ZmOMDpXSEErWJMvORAEtA@mail.gmail.com>

Hi all,
I'd like to revive this discussion that did not lead to a decision at that
time (shadowed by the github/gitlab/redmine discussion).

Having recently spent time on translation and use QGIS Desktop in french
language, I'd tend to agree with the quality of translation decreasing.
This is mainly due to a lack of context as others pointed out: eg, how
would you translate "Print layout" vs "Print layout" when the first "print"
is a verb and the second is a noun? Other than checking the code (which we
can't ask translators to *often* do), it's a kind of lottery. This is a
simple example; in some context, when there are more than one candidate for
a word, the translated GUI meaning can be very different.
So what could we do to improve this?

About the registered translators not contributing, I found out (didn't
notice it in the past) that you can filter strings by user. Maybe for
coordinators there's now a way to access those information without checking
users one by one.

Regards,
Harrissou

Le mar. 16 janv. 2018 à 16:14, Alexandre Neto <senhor.neto at gmail.com> a
écrit :

>
>
> Alexander Bruy <alexander.bruy at gmail.com> escreveu no dia terça,
> 16/01/2018 às 07:51:
>
>>
>>
>> I don't think that agrument about transifex attracting more people can be
>> seriosly taken into account, as most of these new people just reguster,
>> join
>> team and do nothing.
>>
>
> Interesting. I though this was just the Portuguese reality. I am the
> coordinator of the PT_pt translation, and I usually accept everyone's
> request, but I have no way of understanding how much each translator
> contributes, or if it ever contributed anything. I would love to get some
> statistics and be able to clean up that list a bit...
>
> I know that using transifex it's possible to lock a string translation
> marking it as reviewed. Maybe some experienced translators could use Qt
> Linguist to review and then lock the translation on transifex. But
> searching the strings threre takes ages...
>
>
> --
> Alexandre Neto
> ---------------------
> @AlexNetoGeo
> http://sigsemgrilhetas.wordpress.com
> http://gisunchained.wordpress.com
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180820/1ca8c3d0/attachment.html>

From delazj at gmail.com  Mon Aug 20 06:17:14 2018
From: delazj at gmail.com (DelazJ)
Date: Mon, 20 Aug 2018 15:17:14 +0200
Subject: [QGIS-Developer] Interrogation about algorithms to offset/translate
	features
Message-ID: <CAECJsSqK6SgCro698C4Bo_PNPD25NG0m_2_ziPKGUaz-0JeBdw@mail.gmail.com>

Good day devs,

Today I was looking for an algorithm to create parallel lines in another
layer and a search provides me with many candidates. I found

- "translate": creates one parallel feature moved at a specified x/y/z/m
offset distance
- "array of offset features": same thing than translate but generating the
parallel of the parallels up to the specified number of copies
- "offset lines": applies an offset to the features (from what I see, it's
an homothetic operation), generating one feature that is not a copy of the
previous (not the same length, if multiline eg)
- "create parallel lines": same as  the offset lines tool but generating
multiple offsets.

I have some concerns/questions:

-"translate" vs "array of offset features": why not just add the "number of
features to create" parameter to the translate algorithm instead of having
created a new one?
- "offset lines" vs "create parallel lines": same question as above, in
favor of the offset lines algorithm
- the "create parallel lines" algorithm creates more features than expected
(actually it adds the original feature to the output which imho should be a
bug (and not consistent with the array alg behavior))
- I'm pretty lost with the use of the word "offset" in those algs. I don't
know what it really implies in English but my understanding was more of a
translation than a homothety. It tooks me some time to sort out the above
explanation of the algorithms behavior:
  - Would that be possible to review the description and insert this
homothetic idea so that people understand clearly that one do copy the same
features and the other one may be different? with less algs, there will be
less translation to do and I hope less confusion around this concept.
  - and I still wonder if "create parallel lines" and "array of offset
features" are not inverted names: in my mind, "array of offset features"
sounds closer to "offset lines" than to "translate" which in turn is looks
closer to "create parallel lines".
- what about allowing polygons for the currently called "offset lines" and
"create parallel lines" algs?

Regards,
Harrissou
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180820/7e73c3c2/attachment.html>

From alvarengafontes at gmail.com  Mon Aug 20 07:01:15 2018
From: alvarengafontes at gmail.com (Luciano de Alvarenga)
Date: Mon, 20 Aug 2018 11:01:15 -0300
Subject: [QGIS-Developer] =?utf-8?q?=28no_subject=29?=
Message-ID: <CAGGw82z3e6EMsa+bXhfyN+Hp7-5UmGpjts_TdpzQqLWqSHYyPw@mail.gmail.com>

Prezado(a),

Semana passada relatei a falta de um plugin na versão 3.0 do QGis, para
importar tabela com Azymuth e distância, como o azimuth and distance plugin
da versão 2.18.

Na necessidade de fazer tal atividade, retirada de matrículas, documentos
de imóveis baixei a versão 2.18 do QGis, fato que, o plugin azimuth and
distance plugin instalado está com defeito. Fiz o processo, importando
azimuth e distância, o aplicativo formou área, porém formou se um polígono
com a metade da área real do imóvel.

Resultado, tive que me submeter ao uso do auto Cad para realizar a tarefa.

Caso, seja do interesse a montagem de um novo plugin, ou caso já exista um
outro modo de fazer a atividade, me disponho a testa lá.


Att

Luciano Alvarenga
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180820/ed66abaf/attachment-0001.html>

From rldhont at gmail.com  Mon Aug 20 07:11:53 2018
From: rldhont at gmail.com (=?UTF-8?Q?Ren=c3=a9-Luc_Dhont?=)
Date: Mon, 20 Aug 2018 16:11:53 +0200
Subject: [QGIS-Developer] [Server] feature typeName namespace in WFS
 GetFeature
In-Reply-To: <CAChDcoSqU7LRAL20z+B+HaKbfFb2ThG6m3_sMwtFW3ieTs6mOQ@mail.gmail.com>
References: <CAChDcoSqU7LRAL20z+B+HaKbfFb2ThG6m3_sMwtFW3ieTs6mOQ@mail.gmail.com>
Message-ID: <e353ac99-8a5c-3ea8-400f-5ff1cc1a8c2e@gmail.com>

Hi Stéphane,

I understand like you. So I think you are right.

René-Luc


Le 17/08/2018 à 11:44, Stéphane Brunner a écrit :
> Hello,
>
> In the test we configure the typeName like this
> https://github.com/qgis/QGIS/blob/6d1e420c71615307bb2d5e84c187b32a1a363cda/tests/src/python/test_qgsserver_wfs.py#L217
> <wfs:Query typeName="testlayer" srsName="EPSG:3857" 
> xmlns:feature="http://www.qgis.org/gml">
>
>
> But I understand this is wrong, it should be
> <wfs:Query typeName="testlayer" srsName="EPSG:3857" 
> xmlns="http://www.qgis.org/gml">
> or
> <wfs:Query typeName="feature:testlayer" srsName="EPSG:3857" 
> xmlns:feature="http://www.qgis.org/gml">
>
> Am I right or not?
>
> CU
> Stéphane
>
>
> -- 
> camptocamp.com <http://camptocamp.com/>
> mapfish.org <http://mapfish.org>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180820/3a200f2b/attachment.html>

From idan at miara.com  Mon Aug 20 08:44:45 2018
From: idan at miara.com (Idan Miara)
Date: Mon, 20 Aug 2018 18:44:45 +0300
Subject: [QGIS-Developer] QGIS Portable installation for Windows
Message-ID: <CAEDrt3-Y7Qii0tZ=wWrSwqk3isx=bfxUX2aGAMiadRGO9yuyPw@mail.gmail.com>

Hi,

Is there a way to make a portable version of QGIS3 ? i.e. unzip and run?
or for instance to install it on a network drive so other users on the
network could use it without installing?

When I copied QGIS folder (under program files) from one PC to another it
worked only if the path was the same, but I'm not sure if it worked because
I had some other prerequisite preinstalled on that PC.

When I tried to rename the QGIS3 folder and run QGIS I got the error
message:
"could not load qgis_app.dll".

Thus I guess that the installation does something else beside extracting
and creating shortcuts, could you specify what does the setup do besides
that? I tried to look for some clues on verbose messages that the setup
prints, but I could only find "Extracting", "Create folder", "Output
folder".
Does it install prerequisites? compile something specific for my CPU?
Change batch files?

Please advise,
Idan.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180820/7fbabe2d/attachment.html>

From tech_dev at wildintellect.com  Mon Aug 20 09:06:12 2018
From: tech_dev at wildintellect.com (Alex M)
Date: Mon, 20 Aug 2018 09:06:12 -0700
Subject: [QGIS-Developer] QGIS Portable installation for Windows
In-Reply-To: <CAEDrt3-Y7Qii0tZ=wWrSwqk3isx=bfxUX2aGAMiadRGO9yuyPw@mail.gmail.com>
References: <CAEDrt3-Y7Qii0tZ=wWrSwqk3isx=bfxUX2aGAMiadRGO9yuyPw@mail.gmail.com>
Message-ID: <287f5f79-713b-02fb-23fc-45eaa668e626@wildintellect.com>

Idan,

You might want to look at how the PortableGIS project did it for QGIS 2.x
https://gitlab.com/archaeogeek/portable-gis

Thanks,
Alex

On 08/20/2018 08:44 AM, Idan Miara wrote:
> Hi,
> 
> Is there a way to make a portable version of QGIS3 ? i.e. unzip and run?
> or for instance to install it on a network drive so other users on the
> network could use it without installing?
> 
> When I copied QGIS folder (under program files) from one PC to another it
> worked only if the path was the same, but I'm not sure if it worked because
> I had some other prerequisite preinstalled on that PC.
> 
> When I tried to rename the QGIS3 folder and run QGIS I got the error
> message:
> "could not load qgis_app.dll".
> 
> Thus I guess that the installation does something else beside extracting
> and creating shortcuts, could you specify what does the setup do besides
> that? I tried to look for some clues on verbose messages that the setup
> prints, but I could only find "Extracting", "Create folder", "Output
> folder".
> Does it install prerequisites? compile something specific for my CPU?
> Change batch files?
> 
> Please advise,
> Idan.
> 
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 


From jef at norbit.de  Mon Aug 20 09:11:15 2018
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Mon, 20 Aug 2018 18:11:15 +0200
Subject: [QGIS-Developer] QGIS Portable installation for Windows
In-Reply-To: <CAEDrt3-Y7Qii0tZ=wWrSwqk3isx=bfxUX2aGAMiadRGO9yuyPw@mail.gmail.com>
References: <CAEDrt3-Y7Qii0tZ=wWrSwqk3isx=bfxUX2aGAMiadRGO9yuyPw@mail.gmail.com>
Message-ID: <20180820161115.rf5y57xr75qbmvnp@norbit.de>

Hi Idan,

On Mon, 20. Aug 2018 at 18:44:45 +0300, Idan Miara wrote:
> Is there a way to make a portable version of QGIS3 ? i.e. unzip and run?
> or for instance to install it on a network drive so other users on the
> network could use it without installing?

Given that the microsoft runtimes are already installed, that should work.

But you'll need to start the qgis batch file at least once (like
etc/postinstall/qgis.bat does).   That will run the qgis-bin*.exe and update
the qgis-bin*.env file next to it to the new path.

After that you can also run the qgis-bin*.exe (eg. by pinning a running QGIS to
the taskbar).  Multiple clients will have to access QGIS with the same path
(unc path or the same mapped drive).


Jürgen

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden             http://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180820/778da2d5/attachment.sig>

From idan at miara.com  Mon Aug 20 09:54:52 2018
From: idan at miara.com (Idan Miara)
Date: Mon, 20 Aug 2018 19:54:52 +0300
Subject: [QGIS-Developer] QGIS Portable installation for Windows
In-Reply-To: <20180820161115.rf5y57xr75qbmvnp@norbit.de>
References: <CAEDrt3-Y7Qii0tZ=wWrSwqk3isx=bfxUX2aGAMiadRGO9yuyPw@mail.gmail.com>
 <20180820161115.rf5y57xr75qbmvnp@norbit.de>
Message-ID: <CAEDrt38BU21wAtCdFOiD8-kavRY-4oYQ8A=U=UvYeV4S1149RA@mail.gmail.com>

Hi, Jürgen and Alex!

Thanks for your help!

Running qgis.bat by itself doesn't help, I needed to run "qgis.bat
--postinstall" like etc/postinstall/qgis.bat does as you pointed out, it
updates the env file (and doesn't run QGIS), then indeed qgis exe can run.

Is there any compilation that takes place during are installation process?
(python modules?) or it just extracts and runs etc\postinstall\*.bat and
than renames them to etc\postinstall\*.bat.done ?
Meaning, the installation folder on would be the same on different machines
(apart from the env files)?
Are there any CPU specific optimizations taking care during the
installation?

Best Regards,
Idan

On 20 August 2018 at 19:11, Jürgen E. Fischer <jef at norbit.de> wrote:

> Hi Idan,
>
> On Mon, 20. Aug 2018 at 18:44:45 +0300, Idan Miara wrote:
> > Is there a way to make a portable version of QGIS3 ? i.e. unzip and run?
> > or for instance to install it on a network drive so other users on the
> > network could use it without installing?
>
> Given that the microsoft runtimes are already installed, that should work.
>
> But you'll need to start the qgis batch file at least once (like
> etc/postinstall/qgis.bat does).   That will run the qgis-bin*.exe and
> update
> the qgis-bin*.env file next to it to the new path.
>
> After that you can also run the qgis-bin*.exe (eg. by pinning a running
> QGIS to
> the taskbar).  Multiple clients will have to access QGIS with the same path
> (unc path or the same mapped drive).
>
>
> Jürgen
>
> --
> Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden
> http://www.norbit.de
> QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180820/eea173a0/attachment-0001.html>

From tobias.wendorff at tu-dortmund.de  Mon Aug 20 18:17:38 2018
From: tobias.wendorff at tu-dortmund.de (Tobias Wendorff)
Date: Tue, 21 Aug 2018 03:17:38 +0200
Subject: [QGIS-Developer] OGR or native in loading & saving?
Message-ID: <1ceabef3781f3e52e1320ad40774ed63.squirrel@webmail.tu-dortmund.de>

Hi there,

on some export functions, OGR seems to be used. There also might be
a difference between drag & drop, "Browser" and "Data Source Manager".

Is there an overview, if OGR or native functions are used in loading
and saving files on drag & drop, "Browser" and "Data Source Manager"?

Best regards,
Tobias




From nyall.dawson at gmail.com  Mon Aug 20 22:09:18 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 21 Aug 2018 15:09:18 +1000
Subject: [QGIS-Developer] Interrogation about algorithms to
 offset/translate features
In-Reply-To: <CAECJsSqK6SgCro698C4Bo_PNPD25NG0m_2_ziPKGUaz-0JeBdw@mail.gmail.com>
References: <CAECJsSqK6SgCro698C4Bo_PNPD25NG0m_2_ziPKGUaz-0JeBdw@mail.gmail.com>
Message-ID: <CAB28AsjL6zve_WYDsAj9BZgmR=bBUUYLF4VRVPNNDoxSdEaMHg@mail.gmail.com>

On Mon, 20 Aug 2018 at 23:17, DelazJ <delazj at gmail.com> wrote:
>
> Good day devs,
>
> Today I was looking for an algorithm to create parallel lines in another layer and a search provides me with many candidates. I found
>
> - "translate": creates one parallel feature moved at a specified x/y/z/m offset distance
> - "array of offset features": same thing than translate but generating the parallel of the parallels up to the specified number of copies
> - "offset lines": applies an offset to the features (from what I see, it's an homothetic operation), generating one feature that is not a copy of the previous (not the same length, if multiline eg)
> - "create parallel lines": same as  the offset lines tool but generating multiple offsets.
>
> I have some concerns/questions:
>
> -"translate" vs "array of offset features": why not just add the "number of features to create" parameter to the translate algorithm instead of having created a new one?
> - "offset lines" vs "create parallel lines": same question as above, in favor of the offset lines algorithm

My personal preference is to keep individual algorithms as simple as
possible, and have additional algorithms covering similar use cases. I
prefer this over the GRASS/SAGA algorithm approach of having one
algorithm with a multitude of parameters which interact in different
ways. In this case the algorithms have been separated into "vector
creation" algorithms (array of offset features, create parallel lines)
vs "geometry modification" algorithms (translate, offset lines).

There's also the consideration that the vector creation algorithms
also include the original feature by design - if you wanted to do this
same thing by adding a "number of features" to the translate/offset
lines algorithm, then you'd either need to add *another* parameter for
"include original feature" OR require users to do some manual feature
copy/pasting to append the original feature to the new table. Neither
option is desirable in my view.

> - I'm pretty lost with the use of the word "offset" in those algs. I don't know what it really implies in English but my understanding was more of a translation than a homothety. It tooks me some time to sort out the above explanation of the algorithms behavior:

In general we've been trying to re-use PostGIS terminology for
algorithms and expression functions. So "offset lines" algorithm =
"offset_curve" expression function = ST_OffsetCurve PostGIS function.
(so there's a bit of an issue here - the processing algorithm should
be renamed "offset curves"... although that name would be a bit
misleading, because the algorithm doesn't handle curved geometry types
and forces everything to linear segments. But then, so does the
offset_curve expression function and PostGIS' ST_OffsetCurve. Wooo!).

>   - Would that be possible to review the description and insert this homothetic idea so that people understand clearly that one do copy the same features and the other one may be different?

Improving the algorithm's tags/short description/short help would
always be appreciated!

> with less algs, there will be less translation to do and I hope less confusion around this concept.

...but I'm a strong -1 to squashing these operations into the same algorithm.

>   - and I still wonder if "create parallel lines" and "array of offset features" are not inverted names: in my mind, "array of offset features" sounds closer to "offset lines" than to "translate" which in turn is looks closer to "create parallel lines".

I dislike the name "array of offset features", but it was the best one
Mathieu and I could think of. Maybe it should be "array of translated
features"/"array of offset lines"? I'd be happy to accept a PR giving
them better names!

> - what about allowing polygons for the currently called "offset lines" and "create parallel lines" algs?

Isn't that basically the same as buffer/multi-ring buffer (followed by
taking the boundary of the result).

Nyall

>
> Regards,
> Harrissou
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From stephane.brunner at camptocamp.com  Tue Aug 21 00:10:25 2018
From: stephane.brunner at camptocamp.com (=?UTF-8?Q?St=C3=A9phane_Brunner?=)
Date: Tue, 21 Aug 2018 09:10:25 +0200
Subject: [QGIS-Developer] [Server] feature typeName namespace in WFS
	GetFeature
In-Reply-To: <e353ac99-8a5c-3ea8-400f-5ff1cc1a8c2e@gmail.com>
References: <CAChDcoSqU7LRAL20z+B+HaKbfFb2ThG6m3_sMwtFW3ieTs6mOQ@mail.gmail.com>
 <e353ac99-8a5c-3ea8-400f-5ff1cc1a8c2e@gmail.com>
Message-ID: <CAChDcoTZuCmuPPT211yoh71z7UHyesKLiv1P-Rx46uauPWXmpQ@mail.gmail.com>

Hello,

OK, then I will start to create a pull request to make those requests
working :-)

CU
Stéph

2018-08-20 16:11 GMT+02:00 René-Luc Dhont <rldhont at gmail.com>:

> Hi Stéphane,
>
> I understand like you. So I think you are right.
>
> René-Luc
>
> Le 17/08/2018 à 11:44, Stéphane Brunner a écrit :
>
> Hello,
>
> In the test we configure the typeName like this
> https://github.com/qgis/QGIS/blob/6d1e420c71615307bb2d5e84c187b3
> 2a1a363cda/tests/src/python/test_qgsserver_wfs.py#L217
> <wfs:Query typeName="testlayer" srsName="EPSG:3857" xmlns:feature="
> http://www.qgis.org/gml">
>
>
> But I understand this is wrong, it should be
> <wfs:Query typeName="testlayer" srsName="EPSG:3857" xmlns="
> http://www.qgis.org/gml">
> or
> <wfs:Query typeName="feature:testlayer" srsName="EPSG:3857" xmlns:feature="
> http://www.qgis.org/gml">
>
> Am I right or not?
>
> CU
> Stéphane
>
>
> --
> camptocamp.com
> mapfish.org
>
>
> _______________________________________________
> QGIS-Developer mailing listQGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>



-- 
camptocamp.com
mapfish.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180821/323e22c0/attachment.html>

From noreply at qgis.org  Tue Aug 21 05:18:52 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Tue, 21 Aug 2018 12:18:52 -0000
Subject: [QGIS-Developer] Plugin [87] Profile tool approval notification.
Message-ID: <20180821121852.20573.16183@2c6504964296>


Plugin Profile tool approval by pcav.
The plugin version "[87] Profile tool 4.1.2" is now approved
Link: http://plugins.qgis.org/plugins/profiletool/

From cavallini at faunalia.it  Tue Aug 21 05:25:09 2018
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Tue, 21 Aug 2018 14:25:09 +0200
Subject: [QGIS-Developer] Interrogation about algorithms to
 offset/translate features
In-Reply-To: <CAB28AsjL6zve_WYDsAj9BZgmR=bBUUYLF4VRVPNNDoxSdEaMHg@mail.gmail.com>
References: <CAECJsSqK6SgCro698C4Bo_PNPD25NG0m_2_ziPKGUaz-0JeBdw@mail.gmail.com>
 <CAB28AsjL6zve_WYDsAj9BZgmR=bBUUYLF4VRVPNNDoxSdEaMHg@mail.gmail.com>
Message-ID: <119bfd9d-f2d6-482b-56a0-e8044b9a2cb7@faunalia.it>

Hi all,


On 08/21/2018 07:09 AM, Nyall Dawson wrote:
> On Mon, 20 Aug 2018 at 23:17, DelazJ <delazj at gmail.com> wrote:
>> Good day devs,
>>
>> Today I was looking for an algorithm to create parallel lines in another layer and a search provides me with many candidates. I found
>>
>> - "translate": creates one parallel feature moved at a specified x/y/z/m offset distance
>> - "array of offset features": same thing than translate but generating the parallel of the parallels up to the specified number of copies
>> - "offset lines": applies an offset to the features (from what I see, it's an homothetic operation), generating one feature that is not a copy of the previous (not the same length, if multiline eg)
>> - "create parallel lines": same as  the offset lines tool but generating multiple offsets.
>>
>> I have some concerns/questions:
>>
>> -"translate" vs "array of offset features": why not just add the "number of features to create" parameter to the translate algorithm instead of having created a new one?
>> - "offset lines" vs "create parallel lines": same question as above, in favor of the offset lines algorithm
> My personal preference is to keep individual algorithms as simple as
> possible, and have additional algorithms covering similar use cases. I
> prefer this over the GRASS/SAGA algorithm approach of having one
> algorithm with a multitude of parameters which interact in different
> ways. In this case the algorithms have been separated into "vector
> creation" algorithms (array of offset features, create parallel lines)
> vs "geometry modification" algorithms (translate, offset lines).

Fully agreed. The original grass plugin had this approach, and it worked
very well IMHO in most cases.
There are a few algs who cannot be easily made atomic without creating a
messy set of very similar commands, but that's the exception rather than
the rule.
>
>> with less algs, there will be less translation to do and I hope less confusion around this concept.
> ...but I'm a strong -1 to squashing these operations into the same algorithm.
again, fully agreed
All the best.

-- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
https://www.google.com/trends/explore?date=all&geo=IT&q=qgis,arcgis


From noreply at qgis.org  Tue Aug 21 05:50:10 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Tue, 21 Aug 2018 12:50:10 -0000
Subject: [QGIS-Developer] Plugin [624] VectorMCDA approval notification.
Message-ID: <20180821125010.20575.28770@2c6504964296>


Plugin VectorMCDA approval by pcav.
The plugin version "[624] VectorMCDA 2.99 Experimental" is now approved
Link: http://plugins.qgis.org/plugins/VectorMCDA/

From noreply at qgis.org  Tue Aug 21 06:49:56 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Tue, 21 Aug 2018 13:49:56 -0000
Subject: [QGIS-Developer] Plugin [515] Area Along Vector approval
	notification.
Message-ID: <20180821134956.20573.76513@2c6504964296>


Plugin Area Along Vector approval by pcav.
The plugin version "[515] Area Along Vector 2.0" is now approved
Link: http://plugins.qgis.org/plugins/AreaAlongVector/

From r.nijssen at terglobo.nl  Tue Aug 21 08:00:24 2018
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Tue, 21 Aug 2018 17:00:24 +0200
Subject: [QGIS-Developer] set data defined override expression with python?
Message-ID: <ab182566-33f6-c71d-ff17-91cded2ae27a@terglobo.nl>

Hi devs!

I'd like my python plugin to set an expression for overriding a property 
and I have no clue how to do so. I expect there must be some generic way 
to set expressions.

Specifically, I want to set the expression for the "Image source" of a 
QgsLayoutItemPicture to:

'/path/to/pictures/' || attribute(@atlas_feature, 'ID') || '.svg'

Hope anyone can explain.

Thanks!
Raymond


From denis.rouzaud at gmail.com  Tue Aug 21 13:11:23 2018
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Tue, 21 Aug 2018 23:11:23 +0300
Subject: [QGIS-Developer] update of PyQGIS API docs
Message-ID: <CAMtsY+a0QU5ykEzhNYEmspRUTOUtZUOySOWKvJgDOzNkQqf4HQ@mail.gmail.com>

Hi all,

It took a bit of time, but they are finally updated!

http://qgis.org/pyqgis/master
http://qgis.org/pyqgis/3.2

Best wishes,
Denis
-- 

Denis Rouzaud
denis at opengis.ch  <denis at opengis.ch>
+41 76 370 21 22
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180821/cdbd492d/attachment.html>

From luipir at gmail.com  Tue Aug 21 13:57:55 2018
From: luipir at gmail.com (Luigi Pirelli)
Date: Tue, 21 Aug 2018 22:57:55 +0200
Subject: [QGIS-Developer] update of PyQGIS API docs
In-Reply-To: <CAMtsY+a0QU5ykEzhNYEmspRUTOUtZUOySOWKvJgDOzNkQqf4HQ@mail.gmail.com>
References: <CAMtsY+a0QU5ykEzhNYEmspRUTOUtZUOySOWKvJgDOzNkQqf4HQ@mail.gmail.com>
Message-ID: <CAFO80_oZByC3Z8QVcPH5ks1vLfO1rZ6=wRohy7zzEi+F+y2iwQ@mail.gmail.com>

clap clap clap

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Mastering QGIS 2nd Edition:
*
https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
* Hire me: http://goo.gl/BYRQKg
**************************************************************************************************


On Tue, 21 Aug 2018 at 22:11, Denis Rouzaud <denis.rouzaud at gmail.com> wrote:

> Hi all,
>
> It took a bit of time, but they are finally updated!
>
> http://qgis.org/pyqgis/master
> http://qgis.org/pyqgis/3.2
>
> Best wishes,
> Denis
> --
>
> Denis Rouzaud
> denis at opengis.ch  <denis at opengis.ch>
> +41 76 370 21 22
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180821/d988c0a5/attachment.html>

From nyall.dawson at gmail.com  Tue Aug 21 14:08:38 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 22 Aug 2018 07:08:38 +1000
Subject: [QGIS-Developer] update of PyQGIS API docs
In-Reply-To: <CAMtsY+a0QU5ykEzhNYEmspRUTOUtZUOySOWKvJgDOzNkQqf4HQ@mail.gmail.com>
References: <CAMtsY+a0QU5ykEzhNYEmspRUTOUtZUOySOWKvJgDOzNkQqf4HQ@mail.gmail.com>
Message-ID: <CAB28AsgnUhRUWJ97BuDsMrvZeMrou8_-RLLRAE-bE8zSO4XHrQ@mail.gmail.com>

On Wed, 22 Aug 2018 at 06:11, Denis Rouzaud <denis.rouzaud at gmail.com> wrote:
>
> Hi all,
>
> It took a bit of time, but they are finally updated!
>
> http://qgis.org/pyqgis/master
> http://qgis.org/pyqgis/3.2

Looking great - this is a very nice update to the doumentation
formatting! Great work!

Nyall

From nyall.dawson at gmail.com  Tue Aug 21 15:10:26 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 22 Aug 2018 08:10:26 +1000
Subject: [QGIS-Developer] set data defined override expression with
	python?
In-Reply-To: <ab182566-33f6-c71d-ff17-91cded2ae27a@terglobo.nl>
References: <ab182566-33f6-c71d-ff17-91cded2ae27a@terglobo.nl>
Message-ID: <CAB28Ashut+zvVAQ78x61EOczf2f1K2B+im69whSdXAQNzyCpww@mail.gmail.com>

On Wed, 22 Aug 2018 at 01:41, Raymond Nijssen <r.nijssen at terglobo.nl> wrote:
>
> Hi devs!
>
> I'd like my python plugin to set an expression for overriding a property
> and I have no clue how to do so. I expect there must be some generic way
> to set expressions.
>
> Specifically, I want to set the expression for the "Image source" of a
> QgsLayoutItemPicture to:
>
> '/path/to/pictures/' || attribute(@atlas_feature, 'ID') || '.svg'
>

Try

    property = QgsProperty.fromExpression( "'/path/to/pictures/' ||
attribute(@atlas_feature, 'ID') || '.svg'")
    item.dataDefinedProperties().setProperty(QgsLayoutObject.PictureSource,
property)

Nyall

From noreply at qgis.org  Tue Aug 21 19:55:05 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Wed, 22 Aug 2018 02:55:05 -0000
Subject: [QGIS-Developer] Plugin [1515] DSGTools Op approval notification.
Message-ID: <20180822025505.20575.64856@2c6504964296>


Plugin DSGTools Op approval by pcav.
The plugin version "[1515] DSGTools Op 1.2.1" is now approved
Link: http://plugins.qgis.org/plugins/DSGTools_Op/

From cavallini at faunalia.it  Tue Aug 21 23:35:35 2018
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Wed, 22 Aug 2018 08:35:35 +0200
Subject: [QGIS-Developer] build error 2.18/Debian at end
In-Reply-To: <dff951f6-ab62-c77a-61fd-d09e0aad5215@duif.net>
References: <96268de6-5c94-4ab7-fd33-fb1b04e6f683@duif.net>
 <a16ceeea-f256-a3e8-3017-6f706b6bd283@faunalia.it>
 <dff951f6-ab62-c77a-61fd-d09e0aad5215@duif.net>
Message-ID: <66a4f3ede67704b7347cbd62fbe3d601@mx1.faunalia.it>

Il 2018-08-18 15:57 Richard Duivenvoorde ha scritto:
> Ok, I get 2.18 running by DISABLING the WITH_INTERNAL_FUTURE option:
> 
> WITH_INTERNAL_FUTURE OFF
> 
> Regards,
> 
> Richard Duivenvoorde

I confirm, t works also here thanks to Richard suggestion. Is this the 
recomended approach?
On a probably unrelated side, I get an error at startup:

========================
Couldn't load plugin MetaSearch due to an error when calling its 
classFactory() method

ImportError: No module named requests

Traceback (most recent call last):
   File 
"/usr/local/src/qgis/QGIS/build-qgis2/output/python/qgis/utils.py", line 
333, in startPlugin
     plugins[packageName] = package.classFactory(iface)
   File 
"/usr/local/src/qgis/QGIS/build-qgis2/output/python/plugins/MetaSearch/__init__.py", 
line 29, in classFactory
     from MetaSearch.plugin import MetaSearchPlugin
   File 
"/usr/local/src/qgis/QGIS/build-qgis2/output/python/qgis/utils.py", line 
607, in _import
     mod = _builtin_import(name, globals, locals, fromlist, level)
   File 
"/usr/local/src/qgis/QGIS/build-qgis2/output/python/plugins/MetaSearch/plugin.py", 
line 33, in
     from MetaSearch.dialogs.maindialog import MetaSearchDialog
   File 
"/usr/local/src/qgis/QGIS/build-qgis2/output/python/qgis/utils.py", line 
607, in _import
     mod = _builtin_import(name, globals, locals, fromlist, level)
   File 
"/usr/local/src/qgis/QGIS/build-qgis2/output/python/plugins/MetaSearch/dialogs/maindialog.py", 
line 43, in
     from owslib.csw import CatalogueServiceWeb
   File 
"/usr/local/src/qgis/QGIS/build-qgis2/output/python/qgis/utils.py", line 
607, in _import
     mod = _builtin_import(name, globals, locals, fromlist, level)
   File 
"/usr/local/src/qgis/QGIS/build-qgis2/output/python/owslib/csw.py", line 
27, in
     from owslib.util import OrderedDict
   File 
"/usr/local/src/qgis/QGIS/build-qgis2/output/python/qgis/utils.py", line 
607, in _import
     mod = _builtin_import(name, globals, locals, fromlist, level)
   File 
"/usr/local/src/qgis/QGIS/build-qgis2/output/python/owslib/util.py", 
line 35, in
     import requests
   File 
"/usr/local/src/qgis/QGIS/build-qgis2/output/python/qgis/utils.py", line 
607, in _import
     mod = _builtin_import(name, globals, locals, fromlist, level)
ImportError: No module named requests


Python version: 2.7.15 (default, Jul 28 2018, 11:29:29) [GCC 8.1.0]
========================

Any hint for this?

Thanks.
-- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
https://www.google.com/trends/explore?date=all&geo=IT&q=qgis,arcgis
-- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html

From r.nijssen at terglobo.nl  Tue Aug 21 23:39:33 2018
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Wed, 22 Aug 2018 08:39:33 +0200
Subject: [QGIS-Developer] set data defined override expression with
 python?
In-Reply-To: <CAB28Ashut+zvVAQ78x61EOczf2f1K2B+im69whSdXAQNzyCpww@mail.gmail.com>
References: <ab182566-33f6-c71d-ff17-91cded2ae27a@terglobo.nl>
 <CAB28Ashut+zvVAQ78x61EOczf2f1K2B+im69whSdXAQNzyCpww@mail.gmail.com>
Message-ID: <fffd430b-8a79-5ed0-29d8-01c56d8c19c3@terglobo.nl>

Thank you Nyall! Does exactly what I need. Will add it to the python 
cookbook.

Raymond



On 22-08-18 00:10, Nyall Dawson wrote:
> On Wed, 22 Aug 2018 at 01:41, Raymond Nijssen <r.nijssen at terglobo.nl> wrote:
>>
>> Hi devs!
>>
>> I'd like my python plugin to set an expression for overriding a property
>> and I have no clue how to do so. I expect there must be some generic way
>> to set expressions.
>>
>> Specifically, I want to set the expression for the "Image source" of a
>> QgsLayoutItemPicture to:
>>
>> '/path/to/pictures/' || attribute(@atlas_feature, 'ID') || '.svg'
>>
> 
> Try
> 
>      property = QgsProperty.fromExpression( "'/path/to/pictures/' ||
> attribute(@atlas_feature, 'ID') || '.svg'")
>      item.dataDefinedProperties().setProperty(QgsLayoutObject.PictureSource,
> property)
> 
> Nyall
> 



From sebastic at xs4all.nl  Wed Aug 22 00:02:18 2018
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Wed, 22 Aug 2018 09:02:18 +0200
Subject: [QGIS-Developer] build error 2.18/Debian at end
In-Reply-To: <66a4f3ede67704b7347cbd62fbe3d601@mx1.faunalia.it>
References: <96268de6-5c94-4ab7-fd33-fb1b04e6f683@duif.net>
 <a16ceeea-f256-a3e8-3017-6f706b6bd283@faunalia.it>
 <dff951f6-ab62-c77a-61fd-d09e0aad5215@duif.net>
 <66a4f3ede67704b7347cbd62fbe3d601@mx1.faunalia.it>
Message-ID: <3564394a-938e-698a-8de4-16b29ad7305a@xs4all.nl>

On 8/22/18 8:35 AM, Paolo Cavallini wrote:
> ImportError: No module named requests

apt-get install python-requests

From Burghardt.Scholle at stadt.wolfsburg.de  Wed Aug 22 02:03:42 2018
From: Burghardt.Scholle at stadt.wolfsburg.de (Burghardt.Scholle at stadt.wolfsburg.de)
Date: Wed, 22 Aug 2018 09:03:42 +0000
Subject: [QGIS-Developer] WG: Problems with MS SQL Server 2010 and QGIS
	2.18.x / 3.2.x
References: <cd621b2387c64b03b40ea9ba5fd45fa8@WINMAIL1.stadt.wolfsburg.de> 
Message-ID: <046c0016b0484876aa3b1b5354d37540@WINMAIL1.stadt.wolfsburg.de>

Hi devs,
sorry about cross-posting, but I can't get an answer to my question via the QGIS user-list. Maybe one of you knows some advice.

I have big problems loading MS SQL Server 2010 data with QGIS 2.18 and QGIS 3.2.2. Up to version 2.14 there were no problems. With 2.18 QGIS crashes after a few steps (zooming, moving, identifying etc.) with a minidump. Here I could reduce the behavior a bit, after disabling the option "Draw layers with many CPU cores in parallel". Nevertheless, access does not function completely smoothly. Especially during intensive, longer work with the data, there are repeated crashes.

Under QGIS 3.2.2, productive work is not possible at all. The MS SQL data can be added to the project, but QGIS crashes after just one or two steps:

h2. Report Details

*Crash ID*: d50d83a29ac44e157473e46561c73b8f0eb7bc28


*Stack Trace*
<pre>
RtlEnterCriticalSection :
SQLAllocHandle :
SQLGetStmtOption :
SQLGetStmtAttrW :
sourceSelectProviders :
sourceSelectProviders :
sourceSelectProviders :
QgsVectorLayerFeatureIterator::QgsVectorLayerFeatureIterator :
QgsVectorLayerFeatureSource::getFeatures :
QgsVectorLayerLabelProvider::registerFeature :
QgsMapRendererCustomPainterJob::doRender :
QgsMapRendererCustomPainterJob::staticRender :
QgsRenderContext::segmentationToleranceType :
QThreadPoolPrivate::reset :
QThread::start :
BaseThreadInitThunk :
RtlUserThreadStart :
</pre>


*QGIS Info*
QGIS Version: 3.2.2-Bonn
QGIS code revision: commit:26842169e9
Compiled against Qt: 5.9.2
Running against Qt: 5.9.2
Compiled against GDAL: 2.2.4
Running against GDAL: 2.2.4



*System Info*
CPU Type: x86_64
Kernel Type: winnt
Kernel Version: 6.1.7601


Does anyone have similar problems with MS SQL data?  I would be very grateful for any hint or tip.

Thank you and kind regards
Burghardt

***************

Stadt Wolfsburg
Geschäftsbereich IT - 15-3 GIS
Rathaus E, Zi. E 313, Porschestraße 47A, D-38440 Wolfsburg
Tel +49 5361 28-2531
Fax +49 5361 28-1765
mailto:burghardt.scholle at stadt.wolfsburg.de



_______________________________________________
Qgis-user mailing list
Qgis-user at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user

From noreply at qgis.org  Wed Aug 22 04:18:22 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Wed, 22 Aug 2018 11:18:22 -0000
Subject: [QGIS-Developer] Plugin [730] Line direction histogram approval
	notification.
Message-ID: <20180822111822.21389.49851@2c6504964296>


Plugin Line direction histogram approval by pcav.
The plugin version "[730] Line direction histogram 3.0.1" is now approved
Link: http://plugins.qgis.org/plugins/LineDirectionHistogram/

From noreply at qgis.org  Wed Aug 22 04:18:40 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Wed, 22 Aug 2018 11:18:40 -0000
Subject: [QGIS-Developer] Plugin [678] Multi-distance buffer approval
	notification.
Message-ID: <20180822111840.21388.97635@2c6504964296>


Plugin Multi-distance buffer approval by pcav.
The plugin version "[678] Multi-distance buffer 3.2.4" is now approved
Link: http://plugins.qgis.org/plugins/MultiDistanceBuffer/

From noreply at qgis.org  Wed Aug 22 04:19:00 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Wed, 22 Aug 2018 11:19:00 -0000
Subject: [QGIS-Developer] Plugin [597] NNJoin approval notification.
Message-ID: <20180822111900.21386.72060@2c6504964296>


Plugin NNJoin approval by pcav.
The plugin version "[597] NNJoin 3.1.1" is now approved
Link: http://plugins.qgis.org/plugins/NNJoin/

From r.nijssen at terglobo.nl  Wed Aug 22 05:30:16 2018
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Wed, 22 Aug 2018 14:30:16 +0200
Subject: [QGIS-Developer] Geometry data model logic?
Message-ID: <1f2bdd94-9445-3833-4e2d-d37eb45d40d8@terglobo.nl>

Hopefully it is just a misconception on my side, but I really don't get 
the logic in the qgis geometry data model.

I tried the following script (sorry, some lines are wrapped by my email 
client):

---

#points

p1 = QgsGeometry().fromWkt('point(0 0)')
print(p1) # <QgsGeometry: Point (0 0)>
print(p1.asPoint()) # <QgsPointXY: POINT(0 0)>
print(p1.centroid()) # <QgsGeometry: Point (0 0)>
print(p1.buffer(1, 1)) # <QgsGeometry: Polygon ((1 0, 0 -1, -1 0, 0 1, 1 
0))>

p2 = QgsPoint(1,2)
print(p2) # <QgsPoint: Point (1 2)>
p2g = QgsGeometry(p2)
print(p2g) # <QgsGeometry: Point (1 2)>
print(p2) # <QgsPoint: Point (1 2)>
print(p2.centroid()) # <QgsPoint: Point (1 2)>
print(QgsPointXY(p2.x(), p2.y())) # <QgsPointXY: POINT(1 2)>
# The next line makes qgis crash after running it 2x !!
#print(QgsGeometry(p2)) # <QgsGeometry: Point (1 2)>

p3 = QgsPointXY(2, 0)
print(p3) # <QgsPointXY: POINT(2 0)>
print(QgsGeometry.fromPointXY(p3)) # <QgsGeometry: Point (2 0)>
print(QgsPoint(p3.x(), p3.y())) # <QgsPoint: Point (2 0)>

# lines

l1 = QgsGeometry().fromWkt('linestring((0 0, 1 1, 1 2))')
print(l1) # <QgsGeometry: LineString (0 0, 1 1, 1 2)>
print(l1.buffer(1, 1).asPolygon())
print(l1.asPolyline()) # [<QgsPointXY: POINT(0 0)>, <QgsPointXY: POINT(1 
1)>, <QgsPointXY: POINT(1 0)>]
print(QgsLineString(l1.asPolyline())) # TypeError: index 0 has type 
'QgsPointXY' but 'QgsPoint' is expected


---

My questions are:

- How is the relation between QgsGeometry, QgsPoint, QgsPoitXY, etc 
meant to be? Is there documentation? Maybe even a schema?

- Having QgsPoint and QgsPointXY etc is not handy, but I understand they 
are necessary for efficiency reasons. However, shouldn't they all have 
easy typecasting functions? For example:
QgsGeometry.asPoint()
QgsGeometry.asPointXY()
QgsGeometry.asLineString()
QgsGeometry.asLineStringXY()
QgsGeometry.asPolygon()
QgsGeometry.asPolygonXY()
QgsGeometry.asMultiLineString()
QgsGeometry.asMultiLineStringXY()
etc..

QgsPoint.asGeometry()
QgsPoint.asPointXY()

QgsLineString.asGeometry()
QgsLineString.asPointXY()

etc..

- Why don't all geometry types inherit from QgsGeometry, making all the 
geometry operators work? For example:
QgsPoint(1,2).buffer(3,5)




Some, IMHO, really odd things are:

- QgsGeometry.asPoint() returns a QgsPointXY

- QgsGeometry.asLineString() does not exist

- QgsGeometry.asPolyLine() returns an array of QgsPointXY's (besides, 
polyline is a strange geometry type in this model)

- QgsLineString([qgsPointXY, qgsPointXY, qgsPointXY, ...]) results in an 
error, while the documentation states:
    QgsLineString(points: Iterable[QgsPointXY]) Construct a linestring
    from list of points. This constructor is more efficient then calling
    setPoints() or repeatedly calling addVertex()

- QgsGeometry(QgsPoint) does work, but destroys my QgsPoint (and makes 
qgis instable)



Hopefully somebody can explain, making this more sense to me. And I'd 
like to contribute to improving this, though I'm not a cpp programmer.

Regards,
Raymond

From denis.rouzaud at gmail.com  Wed Aug 22 05:51:36 2018
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Wed, 22 Aug 2018 15:51:36 +0300
Subject: [QGIS-Developer] Geometry data model logic?
In-Reply-To: <1f2bdd94-9445-3833-4e2d-d37eb45d40d8@terglobo.nl>
References: <1f2bdd94-9445-3833-4e2d-d37eb45d40d8@terglobo.nl>
Message-ID: <CAMtsY+ah4ea7RDLbijTVYDJmreG22js4s5Sweg_BpjEjaO4thw@mail.gmail.com>

Hi Raymond,

Le mer. 22 août 2018 à 15:30, Raymond Nijssen <r.nijssen at terglobo.nl> a
écrit :

> Hopefully it is just a misconception on my side, but I really don't get
> the logic in the qgis geometry data model.
>
> I tried the following script (sorry, some lines are wrapped by my email
> client):
>
> ---
>
> #points
>
> p1 = QgsGeometry().fromWkt('point(0 0)')
> print(p1) # <QgsGeometry: Point (0 0)>
> print(p1.asPoint()) # <QgsPointXY: POINT(0 0)>
> print(p1.centroid()) # <QgsGeometry: Point (0 0)>
> print(p1.buffer(1, 1)) # <QgsGeometry: Polygon ((1 0, 0 -1, -1 0, 0 1, 1
> 0))>
>
> p2 = QgsPoint(1,2)
> print(p2) # <QgsPoint: Point (1 2)>
> p2g = QgsGeometry(p2)
> print(p2g) # <QgsGeometry: Point (1 2)>
> print(p2) # <QgsPoint: Point (1 2)>
> print(p2.centroid()) # <QgsPoint: Point (1 2)>
> print(QgsPointXY(p2.x(), p2.y())) # <QgsPointXY: POINT(1 2)>
> # The next line makes qgis crash after running it 2x !!
> #print(QgsGeometry(p2)) # <QgsGeometry: Point (1 2)>
>
> p3 = QgsPointXY(2, 0)
> print(p3) # <QgsPointXY: POINT(2 0)>
> print(QgsGeometry.fromPointXY(p3)) # <QgsGeometry: Point (2 0)>
> print(QgsPoint(p3.x(), p3.y())) # <QgsPoint: Point (2 0)>
>
> # lines
>
> l1 = QgsGeometry().fromWkt('linestring((0 0, 1 1, 1 2))')
> print(l1) # <QgsGeometry: LineString (0 0, 1 1, 1 2)>
> print(l1.buffer(1, 1).asPolygon())
> print(l1.asPolyline()) # [<QgsPointXY: POINT(0 0)>, <QgsPointXY: POINT(1
> 1)>, <QgsPointXY: POINT(1 0)>]
> print(QgsLineString(l1.asPolyline())) # TypeError: index 0 has type
> 'QgsPointXY' but 'QgsPoint' is expected
>
>
> ---
>
> My questions are:
>
> - How is the relation between QgsGeometry, QgsPoint, QgsPoitXY, etc
> meant to be? Is there documentation? Maybe even a schema?
>

QgsGeometry contains a QgsAbstractGeometry which is the base class of all
geometry classes.
You can get the abstract geometry using get and constGet methods.

The documentation partially mentions this
https://qgis.org/pyqgis/master/core/Geometry/QgsGeometry.html

>
> - Having QgsPoint and QgsPointXY etc is not handy, but I understand they
> are necessary for efficiency reasons. However, shouldn't they all have
> easy typecasting functions? For example:
> QgsGeometry.asPoint()
> QgsGeometry.asPointXY()
> QgsGeometry.asLineString()
> QgsGeometry.asLineStringXY()
> QgsGeometry.asPolygon()
> QgsGeometry.asPolygonXY()
> QgsGeometry.asMultiLineString()
> QgsGeometry.asMultiLineStringXY()
> etc..
>
> QgsPoint.asGeometry()
> QgsPoint.asPointXY()
>
> QgsLineString.asGeometry()
> QgsLineString.asPointXY()
>
> etc..
>

I was also asking my self the same thing.
I am not really sure if there is a reason or not that they were not
implemented.
The main issue to me is the difficulty to get the geometries as points with
their Z/M values.
The workaround I am using is looping along vertices using

geometry.get()->nextVertex( vertexId, pt );

You will the list of QgsPoint with Z/M values.


> - Why don't all geometry types inherit from QgsGeometry, making all the
> geometry operators work? For example:
> QgsPoint(1,2).buffer(3,5)
>

as said before, all geometry classes inherit from QgsAbstractGeometry. You
can use set method (setGeometry in 2.x) on QgsGeometry to create the
geometry from the any subclass of abstract geometry.

>
>
>
>
> Some, IMHO, really odd things are:
>
> - QgsGeometry.asPoint() returns a QgsPointXY
>

I guess that's historical (QgsPoint in 2.x became QgsPointXY in 3, while
QgsPointZ became QgsPoint).

>
> - QgsGeometry.asLineString() does not exist
>
> - QgsGeometry.asPolyLine() returns an array of QgsPointXY's (besides,
> polyline is a strange geometry type in this model)
>
> - QgsLineString([qgsPointXY, qgsPointXY, qgsPointXY, ...]) results in an
> error, while the documentation states:
>     QgsLineString(points: Iterable[QgsPointXY]) Construct a linestring
>     from list of points. This constructor is more efficient then calling
>     setPoints() or repeatedly calling addVertex()
>

ls = QgsLineString([QgsPoint(10, 2), QgsPoint(10, 1), QgsPoint(5, 1)])

this does work for me (and for Travis ;) )

>
> - QgsGeometry(QgsPoint) does work, but destroys my QgsPoint (and makes
> qgis instable)


look at QgsGeometry::set method

>


>
>
> Hopefully somebody can explain, making this more sense to me. And I'd
> like to contribute to improving this, though I'm not a cpp programmer.
>

This is indeed a bit obscure at first and it took me a bit of time to see
the logic here.

The gurus might arrive with a more precise explanation but I hope it's a
good start!

Best wishes,
Denis
-- 

Denis Rouzaud
denis at opengis.ch  <denis at opengis.ch>
+41 76 370 21 22
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180822/0c79ec2c/attachment-0001.html>

From joao.f.r.gaspar at gmail.com  Wed Aug 22 05:51:43 2018
From: joao.f.r.gaspar at gmail.com (=?UTF-8?B?Sm/Do28gR2FzcGFy?=)
Date: Wed, 22 Aug 2018 13:51:43 +0100
Subject: [QGIS-Developer] [Plugin] Add help html documentation
Message-ID: <CAM+zXj1eQ9WRbVOE9xcOQSJPOTp4DCFiLbcLWcYe8mgH89wJLg@mail.gmail.com>

Hi devs,
I'm using the sphinx to help documentation to a plugin. I saw in QGIS
documentation that we can add documentation using the function
showPluginHelp().

Where i can put the function showPluginHelp() in the plugin.py file?

Regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180822/67543b0e/attachment.html>

From r.nijssen at terglobo.nl  Wed Aug 22 06:09:27 2018
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Wed, 22 Aug 2018 15:09:27 +0200
Subject: [QGIS-Developer] [Plugin] Add help html documentation
In-Reply-To: <CAM+zXj1eQ9WRbVOE9xcOQSJPOTp4DCFiLbcLWcYe8mgH89wJLg@mail.gmail.com>
References: <CAM+zXj1eQ9WRbVOE9xcOQSJPOTp4DCFiLbcLWcYe8mgH89wJLg@mail.gmail.com>
Message-ID: <64f965f6-1299-a11e-bf14-a08ba255ba31@terglobo.nl>

Hi Joao,

I used it in a qgis2 plugin:


# import it:

from qgis.utils import showPluginHelp



# create help function

def showHelp(self):
     """Reacts on help button"""
     showPluginHelp(filename = 'help/index')


# connect it to some button (here in the old way):

QObject.connect(self.dlg.help_pushButton, SIGNAL("clicked()"), 
self.showHelp)



It is here:
https://github.com/opengeogroep/AERIUS-QGIS-plugins/blob/master/ImaerReader/imaer_reader.py

Regards,
Raymond



On 22-08-18 14:51, João Gaspar wrote:
> Hi devs,
> I'm using the sphinx to help documentation to a plugin. I saw in QGIS 
> documentation that we can add documentation using the function 
> showPluginHelp().
> 
> Where i can put the function showPluginHelp() in the plugin.py file?
> 
> Regards
> 
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 

-- 
Terglobo
Fahrenheitstraat 1
5223 BJ 's-Hertogenbosch
The Netherlands
+31 (0) 6 25 31 49 83

From tim at kartoza.com  Wed Aug 22 06:15:46 2018
From: tim at kartoza.com (Tim Sutton)
Date: Wed, 22 Aug 2018 16:15:46 +0300
Subject: [QGIS-Developer] QGIS Promotional materials in FOSS4G2018
Message-ID: <490F2400-4E9E-4E30-AB16-11C0D196751E@kartoza.com>

Hi All

Is anyone from Europe coming to FOSS4G2018 that would be prepared to bring a load of QGIS stickers (and perhaps other similar materials) along with them? I believe we have a budget for making this kind of thing, so it would be great to have everyone leave the conference with a nice QGIS sticker on their laptops…..


Regards

Tim
—








Tim Sutton

Co-founder: Kartoza
Ex Project chair: QGIS.org

Visit http://kartoza.com <http://kartoza.com/> to find out about open source:

Desktop GIS programming services
Geospatial web development
GIS Training
Consulting Services

Skype: timlinux
IRC: timlinux on #qgis at freenode.net

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180822/86a72720/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: KartozaNewLogoThumbnail.jpg
Type: image/jpeg
Size: 6122 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180822/86a72720/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 488 bytes
Desc: Message signed with OpenPGP
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180822/86a72720/attachment-0001.sig>

From joao.f.r.gaspar at gmail.com  Wed Aug 22 07:09:03 2018
From: joao.f.r.gaspar at gmail.com (=?UTF-8?B?Sm/Do28gR2FzcGFy?=)
Date: Wed, 22 Aug 2018 15:09:03 +0100
Subject: [QGIS-Developer] [Plugin] Add help html documentation
In-Reply-To: <64f965f6-1299-a11e-bf14-a08ba255ba31@terglobo.nl>
References: <CAM+zXj1eQ9WRbVOE9xcOQSJPOTp4DCFiLbcLWcYe8mgH89wJLg@mail.gmail.com>
 <64f965f6-1299-a11e-bf14-a08ba255ba31@terglobo.nl>
Message-ID: <CAM+zXj0kYFuXoSJ=JvpMnDCo5Bta9qhyK0T2Eb2FacDBSzekkQ@mail.gmail.com>

Thanks Raymond :)

I change a little bit but works perfect.

QObject.connect(self.dlg.help_pushButton, SIGNAL("clicked()"),
self.showHelp)

to

self.dlg.help_pushButton.clicked.connect(self.showHelp)


 I will try to put an example in the QGIS documentation to be more clear.

Cheers,
João AKA James :P

Raymond Nijssen <r.nijssen at terglobo.nl> escreveu no dia quarta, 22/08/2018
à(s) 14:09:

> Hi Joao,
>
> I used it in a qgis2 plugin:
>
>
> # import it:
>
> from qgis.utils import showPluginHelp
>
>
>
> # create help function
>
> def showHelp(self):
>      """Reacts on help button"""
>      showPluginHelp(filename = 'help/index')
>
>
> # connect it to some button (here in the old way):
>
> QObject.connect(self.dlg.help_pushButton, SIGNAL("clicked()"),
> self.showHelp)
>
>
>
> It is here:
>
> https://github.com/opengeogroep/AERIUS-QGIS-plugins/blob/master/ImaerReader/imaer_reader.py
>
> Regards,
> Raymond
>
>
>
> On 22-08-18 14:51, João Gaspar wrote:
> > Hi devs,
> > I'm using the sphinx to help documentation to a plugin. I saw in QGIS
> > documentation that we can add documentation using the function
> > showPluginHelp().
> >
> > Where i can put the function showPluginHelp() in the plugin.py file?
> >
> > Regards
> >
> >
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >
>
> --
> Terglobo
> Fahrenheitstraat 1
> 5223 BJ 's-Hertogenbosch
> The Netherlands
> +31 (0) 6 25 31 49 83
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180822/e2e5a5d3/attachment.html>

From r.nijssen at terglobo.nl  Wed Aug 22 07:47:19 2018
From: r.nijssen at terglobo.nl (Raymond Nijssen)
Date: Wed, 22 Aug 2018 16:47:19 +0200
Subject: [QGIS-Developer] Geometry data model logic?
In-Reply-To: <CAMtsY+ah4ea7RDLbijTVYDJmreG22js4s5Sweg_BpjEjaO4thw@mail.gmail.com>
References: <1f2bdd94-9445-3833-4e2d-d37eb45d40d8@terglobo.nl>
 <CAMtsY+ah4ea7RDLbijTVYDJmreG22js4s5Sweg_BpjEjaO4thw@mail.gmail.com>
Message-ID: <803efcc9-ec88-22a7-c3fb-9ee7cfabd300@terglobo.nl>



On 22-08-18 14:51, Denis Rouzaud wrote:
> Hi Raymond,
> 
> Le mer. 22 août 2018 à 15:30, Raymond Nijssen <r.nijssen at terglobo.nl 
> <mailto:r.nijssen at terglobo.nl>> a écrit :
> 
>     Hopefully it is just a misconception on my side, but I really don't get
>     the logic in the qgis geometry data model.
> 
>     I tried the following script (sorry, some lines are wrapped by my email
>     client):
> 
>     ---
> 
>     #points
> 
>     p1 = QgsGeometry().fromWkt('point(0 0)')
>     print(p1) # <QgsGeometry: Point (0 0)>
>     print(p1.asPoint()) # <QgsPointXY: POINT(0 0)>
>     print(p1.centroid()) # <QgsGeometry: Point (0 0)>
>     print(p1.buffer(1, 1)) # <QgsGeometry: Polygon ((1 0, 0 -1, -1 0, 0
>     1, 1
>     0))>
> 
>     p2 = QgsPoint(1,2)
>     print(p2) # <QgsPoint: Point (1 2)>
>     p2g = QgsGeometry(p2)
>     print(p2g) # <QgsGeometry: Point (1 2)>
>     print(p2) # <QgsPoint: Point (1 2)>
>     print(p2.centroid()) # <QgsPoint: Point (1 2)>
>     print(QgsPointXY(p2.x(), p2.y())) # <QgsPointXY: POINT(1 2)>
>     # The next line makes qgis crash after running it 2x !!
>     #print(QgsGeometry(p2)) # <QgsGeometry: Point (1 2)>
> 
>     p3 = QgsPointXY(2, 0)
>     print(p3) # <QgsPointXY: POINT(2 0)>
>     print(QgsGeometry.fromPointXY(p3)) # <QgsGeometry: Point (2 0)>
>     print(QgsPoint(p3.x(), p3.y())) # <QgsPoint: Point (2 0)>
> 
>     # lines
> 
>     l1 = QgsGeometry().fromWkt('linestring((0 0, 1 1, 1 2))')
>     print(l1) # <QgsGeometry: LineString (0 0, 1 1, 1 2)>
>     print(l1.buffer(1, 1).asPolygon())
>     print(l1.asPolyline()) # [<QgsPointXY: POINT(0 0)>, <QgsPointXY:
>     POINT(1
>     1)>, <QgsPointXY: POINT(1 0)>]
>     print(QgsLineString(l1.asPolyline())) # TypeError: index 0 has type
>     'QgsPointXY' but 'QgsPoint' is expected
> 
> 
>     ---
> 
>     My questions are:
> 
>     - How is the relation between QgsGeometry, QgsPoint, QgsPoitXY, etc
>     meant to be? Is there documentation? Maybe even a schema?
> 
> 
> QgsGeometry contains a QgsAbstractGeometry which is the base class of 
> all geometry classes.
> You can get the abstract geometry using get and constGet methods.
> 
> The documentation partially mentions this
> https://qgis.org/pyqgis/master/core/Geometry/QgsGeometry.html
> 
> 
>     - Having QgsPoint and QgsPointXY etc is not handy, but I understand
>     they
>     are necessary for efficiency reasons. However, shouldn't they all have
>     easy typecasting functions? For example:
>     QgsGeometry.asPoint()
>     QgsGeometry.asPointXY()
>     QgsGeometry.asLineString()
>     QgsGeometry.asLineStringXY()
>     QgsGeometry.asPolygon()
>     QgsGeometry.asPolygonXY()
>     QgsGeometry.asMultiLineString()
>     QgsGeometry.asMultiLineStringXY()
>     etc..
> 
>     QgsPoint.asGeometry()
>     QgsPoint.asPointXY()
> 
>     QgsLineString.asGeometry()
>     QgsLineString.asPointXY()
> 
>     etc..
> 
> 
> I was also asking my self the same thing.
> I am not really sure if there is a reason or not that they were not 
> implemented.
> The main issue to me is the difficulty to get the geometries as points 
> with their Z/M values.
> The workaround I am using is looping along vertices using
> 
> geometry.get()->nextVertex( vertexId, pt );
> 
> You will the list of QgsPoint with Z/M values.
> 
> 
>     - Why don't all geometry types inherit from QgsGeometry, making all the
>     geometry operators work? For example:
>     QgsPoint(1,2).buffer(3,5)
> 
> 
> as said before, all geometry classes inherit from QgsAbstractGeometry. 
> You can use set method (setGeometry in 2.x) on QgsGeometry to create the 
> geometry from the any subclass of abstract geometry.
> 
> 
> 
> 
> 
>     Some, IMHO, really odd things are:
> 
>     - QgsGeometry.asPoint() returns a QgsPointXY
> 
> 
> I guess that's historical (QgsPoint in 2.x became QgsPointXY in 3, while 
> QgsPointZ became QgsPoint).
> 
> 
>     - QgsGeometry.asLineString() does not exist
> 
>     - QgsGeometry.asPolyLine() returns an array of QgsPointXY's (besides,
>     polyline is a strange geometry type in this model)
> 
>     - QgsLineString([qgsPointXY, qgsPointXY, qgsPointXY, ...]) results
>     in an
>     error, while the documentation states:
>          QgsLineString(points: Iterable[QgsPointXY]) Construct a linestring
>          from list of points. This constructor is more efficient then
>     calling
>          setPoints() or repeatedly calling addVertex()
> 
> 
> ls = QgsLineString([QgsPoint(10, 2), QgsPoint(10, 1), QgsPoint(5, 1)])
> 
> this does work for me (and for Travis ;) )

True, but the docs say these should be QgsPointXY's, not QgsPoint's. So 
maybe the docs are wrong here, but still this is annoying because 
asPolyLine() returns a list of QgsPointXY's. Only writing your own loop 
can convert those.

> 
> 
>     - QgsGeometry(QgsPoint) does work, but destroys my QgsPoint (and makes
>     qgis instable)
> 
> 
> look at QgsGeometry::set method

Thanks, I got this working:


pg1 = QgsGeometry().fromWkt('polygon((0 0, 0 1, 1 1, 1 0, 0 0))')
print(pg1) # <QgsGeometry: Polygon ((0 0, 0 1, 1 1, 1 0, 0 0))>

pg2 = pg1.get()
print(pg2) # <QgsPolygon: Polygon ((0 0, 0 1, 1 1, 1 0, 0 0))>

g = QgsGeometry()
g.set(pg2)
print(g) # <QgsGeometry: Polygon ((0 0, 0 1, 1 1, 1 0, 0 0))>


So, now I can convert both ways between QgsGeometry and 
QgsPoint/QgsLineString/QgsPolygon. But this script makes qgis crash 
after running it 2 times. It has to do with the set() method. This could 
also be a bug of course. Should I file it?

> 
> 
> 
> 
>     Hopefully somebody can explain, making this more sense to me. And I'd
>     like to contribute to improving this, though I'm not a cpp programmer.
> 
> 
> This is indeed a bit obscure at first and it took me a bit of time to 
> see the logic here.
> 
> The gurus might arrive with a more precise explanation but I hope it's a 
> good start!

Still waiting for the guru's! :)
> 
> Best wishes,
> Denis
> -- 
> 
> Denis Rouzaud
> denis at opengis.ch <mailto:denis at opengis.ch>
> +41 76 370 21 22
> 
> 


From noreply at qgis.org  Wed Aug 22 09:34:32 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Wed, 22 Aug 2018 16:34:32 -0000
Subject: [QGIS-Developer] Plugin [998] Standard Deviational Ellipse approval
	notification.
Message-ID: <20180822163432.21386.87011@2c6504964296>


Plugin Standard Deviational Ellipse approval by pcav.
The plugin version "[998] Standard Deviational Ellipse 3.0.2" is now approved
Link: http://plugins.qgis.org/plugins/SDEllipse/

From delazj at gmail.com  Wed Aug 22 19:58:50 2018
From: delazj at gmail.com (DelazJ)
Date: Thu, 23 Aug 2018 04:58:50 +0200
Subject: [QGIS-Developer] Interrogation about algorithms to
 offset/translate features
In-Reply-To: <CAB28AsjL6zve_WYDsAj9BZgmR=bBUUYLF4VRVPNNDoxSdEaMHg@mail.gmail.com>
References: <CAECJsSqK6SgCro698C4Bo_PNPD25NG0m_2_ziPKGUaz-0JeBdw@mail.gmail.com>
 <CAB28AsjL6zve_WYDsAj9BZgmR=bBUUYLF4VRVPNNDoxSdEaMHg@mail.gmail.com>
Message-ID: <CAECJsSq7jmChcek7-2jcsUfqXckGHnZqj=9d5M-nH8TCwpqQhQ@mail.gmail.com>

Hi Nyall and others,

Le mar. 21 août 2018 à 07:09, Nyall Dawson <nyall.dawson at gmail.com> a
écrit :

> On Mon, 20 Aug 2018 at 23:17, DelazJ <delazj at gmail.com> wrote:
> >
> > Good day devs,
> >
> > [...]
> >
> > I have some concerns/questions:
> >
> > -"translate" vs "array of offset features": why not just add the "number
> of features to create" parameter to the translate algorithm instead of
> having created a new one?
> > - "offset lines" vs "create parallel lines": same question as above, in
> favor of the offset lines algorithm
>
> My personal preference is to keep individual algorithms as simple as
> possible, and have additional algorithms covering similar use cases. I
> prefer this over the GRASS/SAGA algorithm approach of having one
> algorithm with a multitude of parameters which interact in different
> ways. In this case the algorithms have been separated into "vector
> creation" algorithms (array of offset features, create parallel lines)
> vs "geometry modification" algorithms (translate, offset lines).
>
> There's also the consideration that the vector creation algorithms
> also include the original feature by design - if you wanted to do this
> same thing by adding a "number of features" to the translate/offset
> lines algorithm, then you'd either need to add *another* parameter for
> "include original feature" OR require users to do some manual feature
> copy/pasting to append the original feature to the new table. Neither
> option is desirable in my view.
>
> OK, for some reasons I didn't notice that the "array of offset features"
also returned the original feature, hence my assumption that this behavior
in the "create parallel lines" was a bug and the differences between the
algs was only features multiplication. Makes sense to have different algs
in this case.

However I wonder if "number of features to create" is the appropriate
label; what about "number of copies to create" or "number of offsets to
create" given that when you enter 4, you get 5 features in the new layer
(including the original feature)? I'd expect 4 *features* as requested.

> [...]
>
> >   - Would that be possible to review the description and insert this
> homothetic idea so that people understand clearly that one do copy the same
> features and the other one may be different?
>
> Improving the algorithm's tags/short description/short help would
> always be appreciated!
>
> sure. Never doubt that. See https://github.com/qgis/QGIS/pull/7687
(reducing the use of the word "offset"). Hoping that i get what it's about
this time.
.

> > with less algs, there will be less translation to do and I hope less
> confusion around this concept.
>
> ...but I'm a strong -1 to squashing these operations into the same
> algorithm.
>
> See my above comment about having overlooked some features of the new
algs. When reading the algs description, the relation with the "single
featured" alg is not obvious to me; maybe reusing chunks of description
would have helped.
This comment was also for a general point of view: I don't know how it's
handled, but if we could try to reuse existing labels, this will reduce
translators and doc writers workload. A simple example (from memory, sorry)
"leave blank to use layer name" vs "leave empty to use layer name"

>   - and I still wonder if "create parallel lines" and "array of offset
> features" are not inverted names: in my mind, "array of offset features"
> sounds closer to "offset lines" than to "translate" which in turn is looks
> closer to "create parallel lines".
>
> I dislike the name "array of offset features", but it was the best one
> Mathieu and I could think of. Maybe it should be "array of translated
> features"/"array of offset lines"? I'd be happy to accept a PR giving
> them better names!
>
> My point here was that the alg that actually does the "parallel thingies"
is the so-called "array of offset features" and the "create parallel lines"
actually creates offset features.
I'm ok with the "array of tranlated features" to replace "array of offset
features". As said earlier, an offset geometry often seems to not be the
"same" geometry while this alg does keep it. Done in the aforementioned PR.

> - what about allowing polygons for the currently called "offset lines"
> and "create parallel lines" algs?
>
> Isn't that basically the same as buffer/multi-ring buffer (followed by
> taking the boundary of the result).
>
> Maybe in this order (would need to check the returned geometry) because
generating the boundary first (either with the 'boundary' or the 'polygon
to line' alg or drawing a closed linestring) then running the "create
parallel lines" or "offset lines" alg does not return a closed linestring
(which I think should be the expected result). Bug (should I file a
ticket?) or I again missed something?

Harrissou

> Nyall
>
> >
> > Regards,
> > Harrissou
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180823/a70fcf0a/attachment.html>

From noreply at qgis.org  Wed Aug 22 21:42:52 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 23 Aug 2018 04:42:52 -0000
Subject: [QGIS-Developer] Plugin [1435] SQUAD Tool v3 approval notification.
Message-ID: <20180823044252.3035.45323@2c6504964296>


Plugin SQUAD Tool v3 approval by pcav.
The plugin version "[1435] SQUAD Tool v3 1.0" is now approved
Link: http://plugins.qgis.org/plugins/squad-plugin-qgis3/

From noreply at qgis.org  Wed Aug 22 21:45:51 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 23 Aug 2018 04:45:51 -0000
Subject: [QGIS-Developer] Plugin [1433] SQUAD Tool approval notification.
Message-ID: <20180823044551.3035.85226@2c6504964296>


Plugin SQUAD Tool approval by pcav.
The plugin version "[1433] SQUAD Tool 1.0" is now approved
Link: http://plugins.qgis.org/plugins/squad-plugin-qgis2/

From martin.isenburg at gmail.com  Thu Aug 23 02:18:38 2018
From: martin.isenburg at gmail.com (Martin Isenburg)
Date: Thu, 23 Aug 2018 11:18:38 +0200
Subject: [QGIS-Developer] [Qgis-developer] OTB and LiDAR tools as
	separate plugins
In-Reply-To: <CABSWR-EuuaA=g4Pvciqe8P-ez7Xw5YiNgtSydwSquU2EoA_z0Q@mail.gmail.com>
References: <CAJsc-7y2KNe51ezox-EhPicOWZcAxif3QomK_Hw2gLYiR2ZkeA@mail.gmail.com>
 <d4952842-755c-d25c-ac8d-05fb7332dfcb@faunalia.it>
 <CAJsc-7zh=9ykisMC27HHWv9gTfeH44Ex0D4ej8UHA_Qu9BSQkA@mail.gmail.com>
 <fa7ce946f8633a3ef7e8bc7d75ce45ef@enoreth.net>
 <CABSWR-EMGbc0A1ssdZnvCOv5iX9KVKnWrder45c+JFXss0sS7g@mail.gmail.com>
 <CAJsc-7xKvQu2Ysk3ByKQgoac5bDAJuPBcgrg-vpKNdrGX79aCA@mail.gmail.com>
 <CABSWR-EuuaA=g4Pvciqe8P-ez7Xw5YiNgtSydwSquU2EoA_z0Q@mail.gmail.com>
Message-ID: <CABSWR-Hqv07XDddX0OTguE=AWrc715Vn92o9+TK1u_i_inrtRQ@mail.gmail.com>

 Hello from Zanzibar,

In the next three days I'd like to tackle recreating the LAStools toolbox
the way it was available in QGIS 2.4 through 2.18 to also in QGIS 3.2. Is
there a guide / example that I can follow to provide the LiDAR tools
provider as a separate plugin as we've discussed it previously? Has anyone
else created such a processing plugin that is residing outside of QGIS who
is / will come to Tanzania?

Regards.

Martin


On Thu, Aug 23, 2018 at 11:13 AM, Martin Isenburg <martin.isenburg at gmail.com
> wrote:

> Hello from Zanzibar,
>
> In the next three days I'd like to tackle recreating the LAStools toolbox
> the way it was available in QGIS 2.4 through 2.18 to also in QGIS 3.2. Is
> there a guide / example that I can follow to provide the LiDAR tools
> provider as a separate plugin as we've discussed it previously? Has anyone
> else created such a processing plugin that is residing outside of QGIS who
> is / will come to Tanzania?
>
> Regards.
>
> Martin
>
> On Thu, Feb 2, 2017 at 8:36 AM, Victor Olaya <volayaf at gmail.com> wrote:
>
>> Martin
>>
>> That might be my fault. I mentioned that, by having the LiDAR tools
>> provider as a separate plugin, that allows to ship the tools with it
>> (not with QGIS, but with the plugin itself, which you will manage and
>> release whenever you want). Of course, you can still provide the
>> downloads from your site as usual, this would just be a more practical
>> solution, to avoid having to setup the LASTools path in Processing
>>
>> Cheers
>>
>>
>>
>> 2017-02-02 2:04 GMT+01:00 Martin Isenburg <martin.isenburg at gmail.com>:
>> > Hello,
>> >
>> >> One thing to keep in mind is that not all the LIDAR tools are open
>> >> sources, 2/3 of the LAStools aren't and slightly distort the output
>> after
>> >> certain point limits are exceeded. My opinion is that QGIS shouldn't
>> ship or
>> >> assist the distribution of closed binaries.
>> >
>> >
>> > Not sure who suggested the notion that LAStools binaries will be shipped
>> > with QGIS or that there maybe will be an auto-download of sorts ...
>> there
>> > will not. The LAStools package can be used as a toolbox in ArcGIS,
>> IMAGINE,
>> > FME, and QGIS or as a stand alone software. I see more and more LiDAR
>> > practitioners (those that I am teaching) doing their GIS with the Q
>> instead
>> > of Argh and the QGIS toolboxes the most up-to-date toolboxes. If a user
>> > wants to use LAStools (whether via QGIS or not) the tools will only be
>> > available via my site and not be bundled.
>> >
>> > Regards from the Philippines,
>> >
>> > Martin
>> >
>> >
>> > _______________________________________________
>> > Qgis-developer mailing list
>> > Qgis-developer at lists.osgeo.org
>> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180823/6f9e4075/attachment-0001.html>

From alexander.bruy at gmail.com  Thu Aug 23 02:42:57 2018
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Thu, 23 Aug 2018 12:42:57 +0300
Subject: [QGIS-Developer] [Qgis-developer] OTB and LiDAR tools as
	separate plugins
In-Reply-To: <CABSWR-Hqv07XDddX0OTguE=AWrc715Vn92o9+TK1u_i_inrtRQ@mail.gmail.com>
References: <CAJsc-7y2KNe51ezox-EhPicOWZcAxif3QomK_Hw2gLYiR2ZkeA@mail.gmail.com>
 <d4952842-755c-d25c-ac8d-05fb7332dfcb@faunalia.it>
 <CAJsc-7zh=9ykisMC27HHWv9gTfeH44Ex0D4ej8UHA_Qu9BSQkA@mail.gmail.com>
 <fa7ce946f8633a3ef7e8bc7d75ce45ef@enoreth.net>
 <CABSWR-EMGbc0A1ssdZnvCOv5iX9KVKnWrder45c+JFXss0sS7g@mail.gmail.com>
 <CAJsc-7xKvQu2Ysk3ByKQgoac5bDAJuPBcgrg-vpKNdrGX79aCA@mail.gmail.com>
 <CABSWR-EuuaA=g4Pvciqe8P-ez7Xw5YiNgtSydwSquU2EoA_z0Q@mail.gmail.com>
 <CABSWR-Hqv07XDddX0OTguE=AWrc715Vn92o9+TK1u_i_inrtRQ@mail.gmail.com>
Message-ID: <CALuHMPCX1Ts===wSdH8Mxx7XW=Du=8ARpaLEntvy6RrN21zQ1w@mail.gmail.com>

Hi Martin,

there are a lot of Processing providers which are not part of the QGIS
core. You can easily find
some of them in the QGIS Plugin repository by "Processing" keyword.
Also in QGIS sources
there is an example provider which can be used as staring point, see
https://github.com/qgis/QGIS/tree/master/python/plugins/processing/algs/exampleprovider.

чт, 23 серп. 2018 о 12:19 Martin Isenburg <martin.isenburg at gmail.com> пише:
>
> Hello from Zanzibar,
>
> In the next three days I'd like to tackle recreating the LAStools toolbox the way it was available in QGIS 2.4 through 2.18 to also in QGIS 3.2. Is there a guide / example that I can follow to provide the LiDAR tools provider as a separate plugin as we've discussed it previously? Has anyone else created such a processing plugin that is residing outside of QGIS who is / will come to Tanzania?
>
> Regards.
>
> Martin




-- 
Alexander Bruy

From martin.isenburg at gmail.com  Thu Aug 23 03:05:50 2018
From: martin.isenburg at gmail.com (Martin Isenburg)
Date: Thu, 23 Aug 2018 12:05:50 +0200
Subject: [QGIS-Developer] [Qgis-developer] OTB and LiDAR tools as
	separate plugins
In-Reply-To: <CALuHMPCX1Ts===wSdH8Mxx7XW=Du=8ARpaLEntvy6RrN21zQ1w@mail.gmail.com>
References: <CAJsc-7y2KNe51ezox-EhPicOWZcAxif3QomK_Hw2gLYiR2ZkeA@mail.gmail.com>
 <d4952842-755c-d25c-ac8d-05fb7332dfcb@faunalia.it>
 <CAJsc-7zh=9ykisMC27HHWv9gTfeH44Ex0D4ej8UHA_Qu9BSQkA@mail.gmail.com>
 <fa7ce946f8633a3ef7e8bc7d75ce45ef@enoreth.net>
 <CABSWR-EMGbc0A1ssdZnvCOv5iX9KVKnWrder45c+JFXss0sS7g@mail.gmail.com>
 <CAJsc-7xKvQu2Ysk3ByKQgoac5bDAJuPBcgrg-vpKNdrGX79aCA@mail.gmail.com>
 <CABSWR-EuuaA=g4Pvciqe8P-ez7Xw5YiNgtSydwSquU2EoA_z0Q@mail.gmail.com>
 <CABSWR-Hqv07XDddX0OTguE=AWrc715Vn92o9+TK1u_i_inrtRQ@mail.gmail.com>
 <CALuHMPCX1Ts===wSdH8Mxx7XW=Du=8ARpaLEntvy6RrN21zQ1w@mail.gmail.com>
Message-ID: <CABSWR-HReFXUmidJ-vLGuGpsKJWS3qdZQr37=pF6KZvjx9cBsw@mail.gmail.com>

Hello Alex,

all the python code is pretty much written. Victor even did some kind of
port already.

https://github.com/volaya/qgis-lidartools-plugin

But I am struggling with how to add this code as a plugin such it can be
searched for. Maybe I should provide it as a zip package ("Install from
ZIP") rather than make it a plugin that can be queried from QGIS. I have
heard that some people are not happy with the LAStools binding scripts
being hosted on the official QGIS site as LAStools is not entirely open
source. The initial attempt of bundling the binaries with the scripts as
you can find it here:

https://github.com/volaya/qgis-lidartools-plugin/tree/master/lidartools/bin/lastools

will also need to change back to how it used to be ("setup the PATH to the
LAStools and - if needed to Wine") as the binaries of LAStools change too
often to have them inside the processing python bindings which almost never
change.

I was looking for documentation on how to prepare such an external plugin
so users can load it into QGIS - either online or as a ZIP.

Martin


On Thu, Aug 23, 2018 at 11:42 AM, Alexander Bruy <alexander.bruy at gmail.com>
wrote:

> Hi Martin,
>
> there are a lot of Processing providers which are not part of the QGIS
> core. You can easily find
> some of them in the QGIS Plugin repository by "Processing" keyword.
> Also in QGIS sources
> there is an example provider which can be used as staring point, see
> https://github.com/qgis/QGIS/tree/master/python/plugins/processing/algs/
> exampleprovider.
>
> чт, 23 серп. 2018 о 12:19 Martin Isenburg <martin.isenburg at gmail.com>
> пише:
> >
> > Hello from Zanzibar,
> >
> > In the next three days I'd like to tackle recreating the LAStools
> toolbox the way it was available in QGIS 2.4 through 2.18 to also in QGIS
> 3.2. Is there a guide / example that I can follow to provide the LiDAR
> tools provider as a separate plugin as we've discussed it previously? Has
> anyone else created such a processing plugin that is residing outside of
> QGIS who is / will come to Tanzania?
> >
> > Regards.
> >
> > Martin
>
>
>
>
> --
> Alexander Bruy
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180823/fb0efb5e/attachment.html>

From luipir at gmail.com  Thu Aug 23 05:25:51 2018
From: luipir at gmail.com (Luigi Pirelli)
Date: Thu, 23 Aug 2018 14:25:51 +0200
Subject: [QGIS-Developer] [Qgis-developer] OTB and LiDAR tools as
	separate plugins
In-Reply-To: <CABSWR-HReFXUmidJ-vLGuGpsKJWS3qdZQr37=pF6KZvjx9cBsw@mail.gmail.com>
References: <CAJsc-7y2KNe51ezox-EhPicOWZcAxif3QomK_Hw2gLYiR2ZkeA@mail.gmail.com>
 <d4952842-755c-d25c-ac8d-05fb7332dfcb@faunalia.it>
 <CAJsc-7zh=9ykisMC27HHWv9gTfeH44Ex0D4ej8UHA_Qu9BSQkA@mail.gmail.com>
 <fa7ce946f8633a3ef7e8bc7d75ce45ef@enoreth.net>
 <CABSWR-EMGbc0A1ssdZnvCOv5iX9KVKnWrder45c+JFXss0sS7g@mail.gmail.com>
 <CAJsc-7xKvQu2Ysk3ByKQgoac5bDAJuPBcgrg-vpKNdrGX79aCA@mail.gmail.com>
 <CABSWR-EuuaA=g4Pvciqe8P-ez7Xw5YiNgtSydwSquU2EoA_z0Q@mail.gmail.com>
 <CABSWR-Hqv07XDddX0OTguE=AWrc715Vn92o9+TK1u_i_inrtRQ@mail.gmail.com>
 <CALuHMPCX1Ts===wSdH8Mxx7XW=Du=8ARpaLEntvy6RrN21zQ1w@mail.gmail.com>
 <CABSWR-HReFXUmidJ-vLGuGpsKJWS3qdZQr37=pF6KZvjx9cBsw@mail.gmail.com>
Message-ID: <CAFO80_rcc0QBTsZd0AMz+BG9FCC2AwuDDz2EkprN9fbGoq5vTQ@mail.gmail.com>

you can add a simple plugin hosted in the official repo to add your custon
plugin repo or a plugin that simplify installation. I agree with that who
assume that offial repo have to host plugin with code compatible with GPL2.
A plugin that install a plugin can simply override this limitation without
affecting licences.

I'm of that person is using point cloud data and avoided to use LAStool
because it's not FOSS, but please believe me, I know and I thrust you, I
like the limitation of your license, but simply I prefer to support PDAL or
PCL because development model is simpler and allow me to contribute is a
simple way and I prefer to invest in a project with an ecosystem of
multiple contributors.

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Mastering QGIS 2nd Edition:
*
https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
* Hire me: http://goo.gl/BYRQKg
**************************************************************************************************


On Thu, 23 Aug 2018 at 12:06, Martin Isenburg <martin.isenburg at gmail.com>
wrote:

> Hello Alex,
>
> all the python code is pretty much written. Victor even did some kind of
> port already.
>
> https://github.com/volaya/qgis-lidartools-plugin
>
> But I am struggling with how to add this code as a plugin such it can be
> searched for. Maybe I should provide it as a zip package ("Install from
> ZIP") rather than make it a plugin that can be queried from QGIS. I have
> heard that some people are not happy with the LAStools binding scripts
> being hosted on the official QGIS site as LAStools is not entirely open
> source. The initial attempt of bundling the binaries with the scripts as
> you can find it here:
>
>
> https://github.com/volaya/qgis-lidartools-plugin/tree/master/lidartools/bin/lastools
>
> will also need to change back to how it used to be ("setup the PATH to the
> LAStools and - if needed to Wine") as the binaries of LAStools change too
> often to have them inside the processing python bindings which almost never
> change.
>
> I was looking for documentation on how to prepare such an external plugin
> so users can load it into QGIS - either online or as a ZIP.
>
> Martin
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180823/56056edb/attachment.html>

From noreply at qgis.org  Thu Aug 23 08:48:47 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 23 Aug 2018 15:48:47 -0000
Subject: [QGIS-Developer] Plugin [629] Networks approval notification.
Message-ID: <20180823154847.3038.11454@2c6504964296>


Plugin Networks approval by pcav.
The plugin version "[629] Networks 2.0" is now approved
Link: http://plugins.qgis.org/plugins/networks/

From luipir at gmail.com  Thu Aug 23 09:24:25 2018
From: luipir at gmail.com (Luigi Pirelli)
Date: Thu, 23 Aug 2018 18:24:25 +0200
Subject: [QGIS-Developer] Plugin [629] Networks approval notification.
In-Reply-To: <20180823154847.3038.11454@2c6504964296>
References: <20180823154847.3038.11454@2c6504964296>
Message-ID: <CAFO80_qAgGdKV2HBCmfkQgvJean2XeX_NJU=rQGGJf3bgm3QpQ@mail.gmail.com>

May we approve a plugin without any description and so generic name?

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Mastering QGIS 2nd Edition:
*
https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
* Hire me: http://goo.gl/BYRQKg
**************************************************************************************************


On Thu, 23 Aug 2018 at 17:50, <noreply at qgis.org> wrote:

>
> Plugin Networks approval by pcav.
> The plugin version "[629] Networks 2.0" is now approved
> Link: http://plugins.qgis.org/plugins/networks/
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180823/fa28de86/attachment-0001.html>

From cavallini at faunalia.it  Thu Aug 23 09:32:20 2018
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Thu, 23 Aug 2018 18:32:20 +0200
Subject: [QGIS-Developer] Plugin [629] Networks approval notification.
In-Reply-To: <CAFO80_qAgGdKV2HBCmfkQgvJean2XeX_NJU=rQGGJf3bgm3QpQ@mail.gmail.com>
References: <20180823154847.3038.11454@2c6504964296>
 <CAFO80_qAgGdKV2HBCmfkQgvJean2XeX_NJU=rQGGJf3bgm3QpQ@mail.gmail.com>
Message-ID: <4fcceaa6-fc6b-4ae2-50e5-dc6e45e502e3@faunalia.it>

Thanks, ticket open.


On 08/23/2018 06:24 PM, Luigi Pirelli wrote:
> May we approve a plugin without any description and so generic name?
>
> Luigi Pirelli
>
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Mastering QGIS 2nd Edition:
> *
> https://www.packtpub.com/big-data-and-business-intelligence/mastering-qgis-second-edition
> * Hire me: http://goo.gl/BYRQKg
> **************************************************************************************************
>
>
> On Thu, 23 Aug 2018 at 17:50, <noreply at qgis.org
> <mailto:noreply at qgis.org>> wrote:
>
>
>     Plugin Networks approval by pcav.
>     The plugin version "[629] Networks 2.0" is now approved
>     Link: http://plugins.qgis.org/plugins/networks/
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
https://www.google.com/trends/explore?date=all&geo=IT&q=qgis,arcgis

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180823/c5443449/attachment.html>

From alexander.bruy at gmail.com  Thu Aug 23 11:26:35 2018
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Thu, 23 Aug 2018 21:26:35 +0300
Subject: [QGIS-Developer] [Qgis-developer] OTB and LiDAR tools as
	separate plugins
In-Reply-To: <CABSWR-HReFXUmidJ-vLGuGpsKJWS3qdZQr37=pF6KZvjx9cBsw@mail.gmail.com>
References: <CAJsc-7y2KNe51ezox-EhPicOWZcAxif3QomK_Hw2gLYiR2ZkeA@mail.gmail.com>
 <d4952842-755c-d25c-ac8d-05fb7332dfcb@faunalia.it>
 <CAJsc-7zh=9ykisMC27HHWv9gTfeH44Ex0D4ej8UHA_Qu9BSQkA@mail.gmail.com>
 <fa7ce946f8633a3ef7e8bc7d75ce45ef@enoreth.net>
 <CABSWR-EMGbc0A1ssdZnvCOv5iX9KVKnWrder45c+JFXss0sS7g@mail.gmail.com>
 <CAJsc-7xKvQu2Ysk3ByKQgoac5bDAJuPBcgrg-vpKNdrGX79aCA@mail.gmail.com>
 <CABSWR-EuuaA=g4Pvciqe8P-ez7Xw5YiNgtSydwSquU2EoA_z0Q@mail.gmail.com>
 <CABSWR-Hqv07XDddX0OTguE=AWrc715Vn92o9+TK1u_i_inrtRQ@mail.gmail.com>
 <CALuHMPCX1Ts===wSdH8Mxx7XW=Du=8ARpaLEntvy6RrN21zQ1w@mail.gmail.com>
 <CABSWR-HReFXUmidJ-vLGuGpsKJWS3qdZQr37=pF6KZvjx9cBsw@mail.gmail.com>
Message-ID: <CALuHMPArq5A=AP2CG128=xmSuGhoyRdFHmbKdhhWKh61pg7ywQ@mail.gmail.com>

Hi Martin,

It is up to you how to distribute your plugin. You can publish it in
QGIS Official
plugins repository, or setup your own repository as many other developers do.
It is even possible to share just a ZIP with the plugin via web-site,
pretty much
similar to how LAStools distributed.

чт, 23 серп. 2018 о 13:06 Martin Isenburg <martin.isenburg at gmail.com> пише:
>
> Hello Alex,
>
> all the python code is pretty much written. Victor even did some kind of port already.
>
> https://github.com/volaya/qgis-lidartools-plugin
>
> But I am struggling with how to add this code as a plugin such it can be searched for. Maybe I should provide it as a zip package ("Install from ZIP") rather than make it a plugin that can be queried from QGIS. I have heard that some people are not happy with the LAStools binding scripts being hosted on the official QGIS site as LAStools is not entirely open source. The initial attempt of bundling the binaries with the scripts as you can find it here:
>
> https://github.com/volaya/qgis-lidartools-plugin/tree/master/lidartools/bin/lastools
>
> will also need to change back to how it used to be ("setup the PATH to the LAStools and - if needed to Wine") as the binaries of LAStools change too often to have them inside the processing python bindings which almost never change.
>
> I was looking for documentation on how to prepare such an external plugin so users can load it into QGIS - either online or as a ZIP.
>
> Martin
>
>
> On Thu, Aug 23, 2018 at 11:42 AM, Alexander Bruy <alexander.bruy at gmail.com> wrote:
>>
>> Hi Martin,
>>
>> there are a lot of Processing providers which are not part of the QGIS
>> core. You can easily find
>> some of them in the QGIS Plugin repository by "Processing" keyword.
>> Also in QGIS sources
>> there is an example provider which can be used as staring point, see
>> https://github.com/qgis/QGIS/tree/master/python/plugins/processing/algs/exampleprovider.
>>
>> чт, 23 серп. 2018 о 12:19 Martin Isenburg <martin.isenburg at gmail.com> пише:
>> >
>> > Hello from Zanzibar,
>> >
>> > In the next three days I'd like to tackle recreating the LAStools toolbox the way it was available in QGIS 2.4 through 2.18 to also in QGIS 3.2. Is there a guide / example that I can follow to provide the LiDAR tools provider as a separate plugin as we've discussed it previously? Has anyone else created such a processing plugin that is residing outside of QGIS who is / will come to Tanzania?
>> >
>> > Regards.
>> >
>> > Martin
>>
>>
>>
>>
>> --
>> Alexander Bruy
>
>


--
Alexander Bruy

From adenaculture at gmail.com  Thu Aug 23 12:42:34 2018
From: adenaculture at gmail.com (C Hamilton)
Date: Thu, 23 Aug 2018 15:42:34 -0400
Subject: [QGIS-Developer] QgsProcessingParameterFile - Multiple extensions
Message-ID: <CABPxTTrQTT7j3xxf2bG-=OdmeSWVRPUtXV0uNzxa7TMiCbs+_A@mail.gmail.com>

Does QgsProcessingParameterFile support more than one extensioin ie *.kml,
*.kmz? I've tried various things but none have worked.

        self.addParameter(
            QgsProcessingParameterFile(
                self.PrmInputLayer,
                tr('Import KML/KMZ file'),
                extension='kml')
        )

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180823/6026aa22/attachment.html>

From nyall.dawson at gmail.com  Thu Aug 23 22:55:42 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 24 Aug 2018 15:55:42 +1000
Subject: [QGIS-Developer] =?utf-8?q?Edit_Features_=E2=80=9CIn_Place?=
	=?utf-8?q?=E2=80=9D_Using_QGIS_Spatial_Operations_crowdfund_launch?=
	=?utf-8?q?ed?=
Message-ID: <CAB28Asi2LBds8_G6yK31Bn816aMC5pXgosPQ_Nv8G3FQ=zcFKg@mail.gmail.com>

Hi all,

North Road are proud to launch our latest QGIS crowd-funding campaign:
Edit Features “In Place” Using QGIS Spatial Operations!

This time, we’re addressing what we see as the major shortcoming
within QGIS vector layer editing tools, by utilising QGIS’ Processing
algorithms abilities to edit features directly “in place” (i.e. as a
normal edit operation, just like moving/reshaping features works).

Full details and mockup videos are available at the campaign page:
https://north-road.com/edit-features-in-place-using-qgis-spatial-operations-campaign/

This is also our first crowdfunding campaign that we’re running as a
“dual funding” approach, which we think should make things friendly
and easy for both corporate backers and end user contributions alike.
Read more about how this works at the full campaign page.

We need your help to make this feature a reality! We need backers, but
just as importantly, we need people to spread the word about this
campaign so that all interested users and organisations hear about it.

Here are some ideas:

- spread the campaign page via your social media accounts: Twitter,
Linked in, etc
- forward a link to the campaign to any relevant professional networks
you're part of
- publicise the campaign via your local QGIS user group
- have a chat to your manager... if this feature will make your work
easier, and you've saved money by implementing QGIS within your
organisation, consider contributing and let us make your job easier!

Stay tuned for more updates and posts exploring this feature as the
campaign progresses...

Nyall Dawson
North Road

From noreply at qgis.org  Thu Aug 23 23:59:18 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Fri, 24 Aug 2018 06:59:18 -0000
Subject: [QGIS-Developer] Plugin [1391] Asistente LADM_COL approval
	notification.
Message-ID: <20180824065918.675.65088@2c6504964296>


Plugin Asistente LADM_COL approval by pcav.
The plugin version "[1391] Asistente LADM_COL 0.6.3 Experimental" is now approved
Link: http://plugins.qgis.org/plugins/asistente_ladm_col/

From noreply at qgis.org  Fri Aug 24 00:33:33 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Fri, 24 Aug 2018 07:33:33 -0000
Subject: [QGIS-Developer] Plugin [1272] Multiple Layers Edit Nodes approval
	notification.
Message-ID: <20180824073333.676.25536@2c6504964296>


Plugin Multiple Layers Edit Nodes approval by pcav.
The plugin version "[1272] Multiple Layers Edit Nodes 1.0.1" is now approved
Link: http://plugins.qgis.org/plugins/MultipleLayersEditNodes/

From noreply at qgis.org  Fri Aug 24 00:52:19 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Fri, 24 Aug 2018 07:52:19 -0000
Subject: [QGIS-Developer] Plugin [1520] LineComparison approval notification.
Message-ID: <20180824075219.678.46404@2c6504964296>


Plugin LineComparison approval by pcav.
The plugin version "[1520] LineComparison 0.1 Experimental" is now approved
Link: http://plugins.qgis.org/plugins/linecomparison/

From sophie.crommelinck at gmail.com  Fri Aug 24 01:57:02 2018
From: sophie.crommelinck at gmail.com (Sophie Crommelinck)
Date: Fri, 24 Aug 2018 10:57:02 +0200
Subject: [QGIS-Developer] How to structure GitHub repository for different
	plugin versions
Message-ID: <CACJcZHt8A4QjhTT1HQi_2RbHhOEsZ6eAHvbk-y+pc5owOK2gJA@mail.gmail.com>

Hi,

I would like to upload a QGIS3 version of a plugin that is now available as
QGIS2 version. Is there a general approach on how to structure the plugin
repository on GitHub accordingly? One idea would be to have two folders
e.g. 'QGIS2' and 'QGIS3' in the main plugin repository. Paolo suggested
there might be a general code of conduct on this one.

Best,

Sophie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180824/2f587b76/attachment.html>

From wonder.sk at gmail.com  Fri Aug 24 02:09:08 2018
From: wonder.sk at gmail.com (Martin Dobias)
Date: Fri, 24 Aug 2018 11:09:08 +0200
Subject: [QGIS-Developer] How to structure GitHub repository for
 different plugin versions
In-Reply-To: <CACJcZHt8A4QjhTT1HQi_2RbHhOEsZ6eAHvbk-y+pc5owOK2gJA@mail.gmail.com>
References: <CACJcZHt8A4QjhTT1HQi_2RbHhOEsZ6eAHvbk-y+pc5owOK2gJA@mail.gmail.com>
Message-ID: <CAC2XbFcWxqbzh_rFkZEFcMCwXMbdg3rTaqKYAFwtiu+kNLunOg@mail.gmail.com>

Hi Sophie

On Fri, Aug 24, 2018 at 10:57 AM Sophie Crommelinck
<sophie.crommelinck at gmail.com> wrote:
>
> I would like to upload a QGIS3 version of a plugin that is now available as QGIS2 version. Is there a general approach on how to structure the plugin repository on GitHub accordingly? One idea would be to have two folders e.g. 'QGIS2' and 'QGIS3' in the main plugin repository. Paolo suggested there might be a general code of conduct on this one.

I think generally people do one of these options:
- have one git branch for qgis2 and another branch (e.g. master) for qgis3
- make the plugin compatible with both qgis2 and qgis3, so you
maintain just one codebase instead of two. For some plugins that's
easy to do, but some plugins require a significant amount of effort.

Having two folders in the repository is inferior to using branches in
my opinion... with git branches it is easier to do diffs and port
fixes from one branch to the other.

In QGIS git repository, right now we use master branch for development
of QGIS 3.4, but we also keep a branch for QGIS 3.2.x where we apply
some commits (bugfixes) from master branch.

Cheers
Martin

From rdmailings at duif.net  Fri Aug 24 02:11:38 2018
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Fri, 24 Aug 2018 11:11:38 +0200
Subject: [QGIS-Developer] How to structure GitHub repository for
 different plugin versions
In-Reply-To: <CACJcZHt8A4QjhTT1HQi_2RbHhOEsZ6eAHvbk-y+pc5owOK2gJA@mail.gmail.com>
References: <CACJcZHt8A4QjhTT1HQi_2RbHhOEsZ6eAHvbk-y+pc5owOK2gJA@mail.gmail.com>
Message-ID: <92be67fb-a357-d9e5-dc9c-e5b08a011a46@duif.net>

On 08/24/2018 10:57 AM, Sophie Crommelinck wrote:
> Hi,
> 
> I would like to upload a QGIS3 version of a plugin that is now available
> as QGIS2 version. Is there a general approach on how to structure the
> plugin repository on GitHub accordingly? One idea would be to have two
> folders e.g. 'QGIS2' and 'QGIS3' in the main plugin repository. Paolo
> suggested there might be a general code of conduct on this one.

Hi Sophie,

not sure what the 'best' way is, but what I did when I created a new
version of the pdokservicesplugin, is to create a separate  git branch
for the qgis2 version, and I keep the master branch for qgis3, see

https://github.com/rduivenvoorde/pdokservicesplugin/tree/qgis2branch
vs
https://github.com/rduivenvoorde/pdokservicesplugin/tree/master

I made QGIS3 'master' because the qgis2 branch will get unused in near
future.

I checked out both branches in different folders on my dev laptop, so
can code/commit independently from each other.

Regards,

Richard Duivenvoorde

From sophie.crommelinck at gmail.com  Fri Aug 24 05:45:37 2018
From: sophie.crommelinck at gmail.com (Sophie Crommelinck)
Date: Fri, 24 Aug 2018 14:45:37 +0200
Subject: [QGIS-Developer] How to structure GitHub repository for
 different plugin versions
In-Reply-To: <92be67fb-a357-d9e5-dc9c-e5b08a011a46@duif.net>
References: <CACJcZHt8A4QjhTT1HQi_2RbHhOEsZ6eAHvbk-y+pc5owOK2gJA@mail.gmail.com>
 <92be67fb-a357-d9e5-dc9c-e5b08a011a46@duif.net>
Message-ID: <CACJcZHsBKnJGdAw2YT2Wicz95h7urB4CYsNTw866AJK+K2c8kA@mail.gmail.com>

Hi Martin and Richard,

thanks for the fast reply. I will use branches (one master for QGIS3 and
one for QGIS2) instead of folders in GitHub.

Best,

Sophie

On Fri, 24 Aug 2018 at 11:11, Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> On 08/24/2018 10:57 AM, Sophie Crommelinck wrote:
> > Hi,
> >
> > I would like to upload a QGIS3 version of a plugin that is now available
> > as QGIS2 version. Is there a general approach on how to structure the
> > plugin repository on GitHub accordingly? One idea would be to have two
> > folders e.g. 'QGIS2' and 'QGIS3' in the main plugin repository. Paolo
> > suggested there might be a general code of conduct on this one.
>
> Hi Sophie,
>
> not sure what the 'best' way is, but what I did when I created a new
> version of the pdokservicesplugin, is to create a separate  git branch
> for the qgis2 version, and I keep the master branch for qgis3, see
>
> https://github.com/rduivenvoorde/pdokservicesplugin/tree/qgis2branch
> vs
> https://github.com/rduivenvoorde/pdokservicesplugin/tree/master
>
> I made QGIS3 'master' because the qgis2 branch will get unused in near
> future.
>
> I checked out both branches in different folders on my dev laptop, so
> can code/commit independently from each other.
>
> Regards,
>
> Richard Duivenvoorde
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180824/749d50fe/attachment-0001.html>

From noreply at qgis.org  Fri Aug 24 06:49:13 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Fri, 24 Aug 2018 13:49:13 -0000
Subject: [QGIS-Developer] Plugin [1237] BoundaryDelineation approval
	notification.
Message-ID: <20180824134913.677.62216@2c6504964296>


Plugin BoundaryDelineation approval by pcav.
The plugin version "[1237] BoundaryDelineation 3.0 Experimental" is now approved
Link: http://plugins.qgis.org/plugins/BoundaryDelineation/

From noreply at qgis.org  Fri Aug 24 09:03:17 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Fri, 24 Aug 2018 16:03:17 -0000
Subject: [QGIS-Developer] Plugin [1428] Road Emission Calculator approval
	notification.
Message-ID: <20180824160317.677.17968@2c6504964296>


Plugin Road Emission Calculator approval by pcav.
The plugin version "[1428] Road Emission Calculator 0.3" is now approved
Link: http://plugins.qgis.org/plugins/RoadEmissionCalculator/

From martin.isenburg at gmail.com  Fri Aug 24 10:11:55 2018
From: martin.isenburg at gmail.com (Martin Isenburg)
Date: Fri, 24 Aug 2018 19:11:55 +0200
Subject: [QGIS-Developer] [Qgis-developer] OTB and LiDAR tools as
	separate plugins
In-Reply-To: <CABSWR-ErKoy7gd0oaxBDAYAp7nmqFmPmMBMEpv1xUQC1fogWow@mail.gmail.com>
References: <CAJsc-7y2KNe51ezox-EhPicOWZcAxif3QomK_Hw2gLYiR2ZkeA@mail.gmail.com>
 <d4952842-755c-d25c-ac8d-05fb7332dfcb@faunalia.it>
 <CAJsc-7zh=9ykisMC27HHWv9gTfeH44Ex0D4ej8UHA_Qu9BSQkA@mail.gmail.com>
 <fa7ce946f8633a3ef7e8bc7d75ce45ef@enoreth.net>
 <CABSWR-EMGbc0A1ssdZnvCOv5iX9KVKnWrder45c+JFXss0sS7g@mail.gmail.com>
 <CAJsc-7xKvQu2Ysk3ByKQgoac5bDAJuPBcgrg-vpKNdrGX79aCA@mail.gmail.com>
 <CABSWR-EuuaA=g4Pvciqe8P-ez7Xw5YiNgtSydwSquU2EoA_z0Q@mail.gmail.com>
 <CABSWR-Hqv07XDddX0OTguE=AWrc715Vn92o9+TK1u_i_inrtRQ@mail.gmail.com>
 <CALuHMPCX1Ts===wSdH8Mxx7XW=Du=8ARpaLEntvy6RrN21zQ1w@mail.gmail.com>
 <CABSWR-HReFXUmidJ-vLGuGpsKJWS3qdZQr37=pF6KZvjx9cBsw@mail.gmail.com>
 <CALuHMPArq5A=AP2CG128=xmSuGhoyRdFHmbKdhhWKh61pg7ywQ@mail.gmail.com>
 <CABSWR-ErKoy7gd0oaxBDAYAp7nmqFmPmMBMEpv1xUQC1fogWow@mail.gmail.com>
Message-ID: <CABSWR-E3g1a6WiMKPkMUmiGa_71vGLxhujW9dxWp53TELjXrAw@mail.gmail.com>

Hello,

when the LAStools toolboxes were part of the "built-in" scripts of
Processing I had was able to have two entries (i.e. the folder path to the
"Wine" and the "LAStools" installation) in the "Processing Settings" menu
under the "Providers" section. You can see as an example how GRASS still
has such options in the attached screen shot. How can I place these two
options back there now that I load the LAStools toolboxes as Processing
plugins?

Off for beers at the Zanzi-bar ... (-;

Martin

On Thu, Aug 23, 2018 at 8:26 PM, Alexander Bruy <alexander.bruy at gmail.com>
> wrote:
>
>> Hi Martin,
>>
>> It is up to you how to distribute your plugin. You can publish it in
>> QGIS Official
>> plugins repository, or setup your own repository as many other developers
>> do.
>> It is even possible to share just a ZIP with the plugin via web-site,
>> pretty much
>> similar to how LAStools distributed.
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180824/cb5a626f/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: qgis_processing_options.jpg
Type: image/jpeg
Size: 24984 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180824/cb5a626f/attachment-0001.jpg>

From noreply at qgis.org  Sat Aug 25 04:28:32 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Sat, 25 Aug 2018 11:28:32 -0000
Subject: [QGIS-Developer] Plugin [1482] TSP - optimal route approval
	notification.
Message-ID: <20180825112832.6777.99773@2c6504964296>


Plugin TSP - optimal route approval by pcav.
The plugin version "[1482] TSP - optimal route 0.2" is now approved
Link: http://plugins.qgis.org/plugins/TSP/

From konst555 at mail.ru  Sat Aug 25 10:46:13 2018
From: konst555 at mail.ru (=?UTF-8?B?S29uc3RhbnRpbiBQdXphbmtvdg==?=)
Date: Sat, 25 Aug 2018 20:46:13 +0300
Subject: [QGIS-Developer] =?utf-8?q?Help_me_add_a_new_feature_to_QGIS?=
Message-ID: <1535219173.909424847@f378.i.mail.ru>

Hi QGIS-developers,

I made small additions to the code that improve the design of maps. 
Of course, I can use this addition personally, but I want it to be available to everyone.

Who can help me with including it in the main QGIS code?

You can easily test it by replacing the attached files in the source code of the current version.
I'm sure it won't take you much time. I am attaching 2 simple examples.

--------
Proposed changes.
In the "Print Layout" section when building a map grid, it is necessary to add the possibility of a frame shift relative to the map.
It will be very easy to form a different framework for drawing up maps.
---------
I enclose the program code for this change. ( The attachment: qgis_change.zip)

What changed :
1. UI - add label "offset" and QgsDoubleSpinBox  ( The attachment: screenshot_offset.png )
2. "offset" - from 0 to 99 ( default -0)
3. Add corners for "zebra" and frame boarder.
4. If you use the default offset to "0", there will be no changes from the current version. Only for "zebra" corners will be drawn more correctly.
----------

Why it is very important to make this small change.
Now QGIS does not have the means to design a standard scale frame of nautical charts. It is not possible to make standard designs for topographic maps.
Some applications, such as ArcGIS or my plugin for QGIS - the geogrid, create static vector layers for the map sections.
When making the proposed add-on, we can very easily create a dynamic design that will meet the requirements of the standards.

I hope to help the qgis-developers community.

Best regards,
Konstantin Puzankov

e-mail:   konst555 at mail.ru
----------------------------------------------------------------------


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180825/b0197eb3/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Layout 1_new_tik_zebra.png
Type: image/png
Size: 10802 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180825/b0197eb3/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: qgis_change.zip
Type: application/zip
Size: 32677 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180825/b0197eb3/attachment-0001.zip>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: screenshot_offset.png
Type: image/png
Size: 9473 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180825/b0197eb3/attachment-0003.png>

From cavallini at faunalia.it  Sat Aug 25 22:29:18 2018
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sun, 26 Aug 2018 07:29:18 +0200
Subject: [QGIS-Developer] GRIB not showing arrows
Message-ID: <5c7e2c5a-d594-f149-b281-f0c962fb3694@faunalia.it>

Hi all,

on a fresh;y compiled master, gribs are loaded correctly, styles can be
applied, but the arrows tab is grayed out, and cannot be used. Am I
missing something obvious?

Thanks.

-- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
https://www.google.com/trends/explore?date=all&geo=IT&q=qgis,arcgis


From cavallini at faunalia.it  Sat Aug 25 22:37:01 2018
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Sun, 26 Aug 2018 07:37:01 +0200
Subject: [QGIS-Developer] Help me add a new feature to QGIS
In-Reply-To: <1535219173.909424847@f378.i.mail.ru>
References: <1535219173.909424847@f378.i.mail.ru>
Message-ID: <34d160ef-6491-d385-4dd0-d38e3392ae4a@faunalia.it>

Hi Konstantin,

the best option is cloning the QGIS repo from GitHub, make your changes,
and issue a pull request.

Feel free to ask in case you need some assistance.

All the best.


On 08/25/2018 07:46 PM, Konstantin Puzankov wrote:
> Hi QGIS-developers,
>
> I made small additions to the code that improve the design of maps.
> Of course, I can use this addition personally, but I want it to be
> available to everyone.
>
> Who can help me with including it in the main QGIS code?
>
> You can easily test it by replacing the attached files in the source
> code of the current version.
> I'm sure it won't take you much time. I am attaching 2 simple examples.
>
> --------
> Proposed changes.
> In the "Print Layout" section when building a map grid, it is
> necessary to add the possibility of a frame shift relative to the map.
> It will be very easy to form a different framework for drawing up maps.
> ---------
> I enclose the program code for this change. ( The attachment:
> qgis_change.zip)
>
> What changed :
> 1. UI - add label "offset" and QgsDoubleSpinBox  ( The attachment:
> screenshot_offset.png )
> 2. "offset" - from 0 to 99 ( default -0)
> 3. Add corners for "zebra" and frame boarder.
> 4. If you use the default offset to "0", there will be no changes from
> the current version. Only for "zebra" corners will be drawn more
> correctly.
> ----------
>
> Why it is very important to make this small change.
> Now QGIS does not have the means to design a standard scale frame of
> nautical charts. It is not possible to make standard designs for
> topographic maps.
> Some applications, such as ArcGIS or my plugin for QGIS - the geogrid,
> create static vector layers for the map sections.
> When making the proposed add-on, we can very easily create a dynamic
> design that will meet the requirements of the standards.
>
> I hope to help the qgis-developers community.
>
> Best regards,
> Konstantin Puzankov
>
> e-mail:  konst555 at mail.ru
> <https://e.mail.ru/compose/?mailto=mailto%3akonst555 at mail.ru>
> ----------------------------------------------------------------------
>
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
https://www.google.com/trends/explore?date=all&geo=IT&q=qgis,arcgis

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180826/5b010cb8/attachment.html>

From andreaerdna at libero.it  Sun Aug 26 06:04:45 2018
From: andreaerdna at libero.it (andreaerdna)
Date: Sun, 26 Aug 2018 06:04:45 -0700 (MST)
Subject: [QGIS-Developer] "Filter on joined fields" and Virtual layers not
 working as expected
Message-ID: <1535288685213-0.post@n6.nabble.com>

The Virtual layers provider and the "Filter on joined fields" functionality
(that is very useful although not documented, probably 'cause was meant to
work "automagically"), have been introduced in QGIS by Hugo Mercier a couple
of years ago [1].

It seems that now they not work as expected anymore in QGIS 3.3.0
(05fb0f4350) and 2.18.23 too, but probably since earlier versions.

I realised this trying to reproduce the bug #19636 [2] reported by Tobias
Wendorff about strange behaviour of the "Filter on joined fields"
functionality when a field name starts with a digit.


** Filter on joined fields **

Basically, "Filter on joined fields" should work as follows:
- sets invisible the (original) layer with joined fields we want to filter
on
- build an SQL query based on the join(s) properties of the original layer
and adds to the map a virtual layer based on that SQL query with the same
geometry and style of the original layer
- opens the virtual layer Query Builder in order to enter a filter
expression

There are two circumstances in which it does not work properly (more
details, with test projects and layers, in [3]):

- when the (original) layer is a "spatial layer" (that is in most of the use
cases): the virtual layer created is an attribute only / non-spatial layer,
instead of a spatial one, so no features geometries are visible in the map
and obviously the style is not applied, making the functionality not really
useful

- when at least a field name or a layer name starts with a digit or contains
white spaces (or probably other special characters): the virtual layer is
not created at all (actually is created and instantly deleted) without error
messages, so the feature is totally broken

It seems to me the bug is in qgsvirtuallayerdefinitionutils.cpp [4].
In facts, the SQL query generated by
QgsVirtualLayerDefinitionUtils::fromJoinedLayer:
- does not contain the "geometry" field of the original spatial layer among
the selected fields
- field and layer names are not all enclosed in double quotes

I'll submit a PR with a simple patches that address both the problems (and
update the tests accordingly), I hope.


** Virtual layers **

There's a additional boring bug that limits virtual layers and consequently
also "Filter on joined fields" usefulness:

- the virtual layers show no feature when no filter string is set in the
Query builder, instead of showing all the features

step to reproduce the issue:

- add a layer (eg. 'testlayer' [3] with 4 features) in the map
- create a virtual layer through "Add/Edit Virtual Layer" with a simple SQL
query definition like 'SELECT * FROM testlayer'; the virtual layer is added
to the map and shows all the 4 features.
- with QGIS 2.18.23: open the virtual layer Query builder [Ctrl+F] (the
"filter expression" box is empty); click "Test" button -> "The where clause
returned 4 row(s)" -> "OK"; close the Query builder clicking "OK": the
features are disappeared from the map and the attribute table window shows
no feature (total: 4, filtered: 0, selected: 0)
- with QGIS 3.3.0: to spot the bug, first open the virtual layer Query
builder (the "filter expression" box is empty); enter a filter expression
and close the Query builder clicking "OK": the virtual layer shows a subset
of features in the map;  open again the Query builder and delete the filter
expression previously entered (manually or using the "Clear" button); click
"Test" button -> "The where clause returned 4 row(s)" -> "OK"; close the
Query builder clicking "OK": the features are disappeared from the map and
the attribute table window shows no feature (total: 4, filtered: 0,
selected: 0).

To show again all the features, an always true expression (like " 1 = 1 ")
must be entered in the Query builder as a filter expression.

Anyway, when the issue comes up, a bunch of warnings are logged in the
Vlayer messages tab like:

WARNING    Query preparation error on SELECT 0,"geometry" FROM _query WHERE
: near " ": syntax error
or
WARNING    Query preparation error on SELECT 0,"tableid","tablefield" FROM
_query WHERE : near " ": syntax error
or
WARNING    Query preparation error on SELECT "uid","geometry" FROM _query
WHERE AND "geometry" is not null AND
MbrIntersects("geometry",BuildMbr(19.2606,36.4148,26.5954,39.0184)): near
"AND": syntax error

depending on the SQL query definition of the virtual layer.

So I think that there is something wrong in the
QgsSpatiaLiteFeatureIterator::prepareStatement where the SQLite statement is
prepared: I guess that, or the function fails to notice that the filter
expression is empty and adds the WHERE clause without condition or an
unneeded AND operator, or the filter expression variable is not properly
emptied somewhere else.

Unfortunately, I don't have a simple patch to fix the bug...

I hope this can help bring the Virtual layers and the "Filter on joined
fields" back to full functionality.

Best regards.

Andrea Giudiceandrea

[1] PR  #2568 Virtual layers https://github.com/qgis/QGIS/pull/2568 - PR
#2647 Virtual layers GUI integration https://github.com/qgis/QGIS/pull/2647
[2] Bug report #19636 filter on joined table broken
https://issues.qgis.org/issues/19636
[3] https://issues.qgis.org/issues/19636#note-13 -
https://issues.qgis.org/attachments/download/13196/test_filter_qgis.zip
[4]
https://github.com/qgis/QGIS/blob/master/src/core/qgsvirtuallayerdefinitionutils.cpp#L24
[5]
https://github.com/qgis/QGIS/blob/master/src/providers/spatialite/qgsspatialitefeatureiterator.cpp#L313



--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From noreply at qgis.org  Sun Aug 26 07:18:20 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Sun, 26 Aug 2018 14:18:20 -0000
Subject: [QGIS-Developer] Plugin [1526] LAStools approval notification.
Message-ID: <20180826141820.22518.6779@2c6504964296>


Plugin LAStools approval by pcav.
The plugin version "[1526] LAStools 0.2 Experimental" is now approved
Link: http://plugins.qgis.org/plugins/LAStools/

From lists at borysjurgiel.pl  Sun Aug 26 11:11:13 2018
From: lists at borysjurgiel.pl (Borys Jurgiel)
Date: Sun, 26 Aug 2018 20:11:13 +0200
Subject: [QGIS-Developer] Do we really need experimental and
	non-experimental plugins?
Message-ID: <1743799.lBYyfAdNfE@debian>

Hi Lists,

Before I make a QEP I'd like to know your general thoughts.

After I removed the deprecated plugins filter from the Plugin manager (and 
make them always visible) [1], Alex suggested doing the same with the 
Experimental status.

Initially it was designed for two cases: to mark a whole plugin as 
experimental, and to just mark the recent version (so a kind of beta). Both 
cases seem to be popular among authors: at the moment we have 215 plugins for 
master, from which ~40 are experimental only and ~20 are in both versions.

However, I'm not sure if it makes much sense nowadays. Releasing 'stable' and 
'experimental' versions seems a bit overscaled to me. And there is a simpler 
solution: If the recent version is buggy, users can just download the last 
working one from the repo and install from zip. The former case, when the 
whole plugin is experimental, seems to be often misused: authors can use it to 
hide some specialised of localised plugisn from majority of users. In fact 
even I committed such clear misuse, marking the Plugin Reloader as 
experimental just to not clutter the list for normal users... Another reason 
could be a shyness. But again, we have the rating stars now and don't need to 
rely on the author's shyness anymore.

So... Do you see important reasons to keep this tag? Maybe we should 
completely drop it? Or just remove the option to hide them from manager, 
leaving the flask icon on the plugin details page?

Regards,
Borys

[1] https://github.com/qgis/QGIS/pull/7713




From martin.isenburg at gmail.com  Sun Aug 26 11:49:06 2018
From: martin.isenburg at gmail.com (Martin Isenburg)
Date: Sun, 26 Aug 2018 21:49:06 +0300
Subject: [QGIS-Developer] Do we really need experimental and
 non-experimental plugins?
In-Reply-To: <1743799.lBYyfAdNfE@debian>
References: <1743799.lBYyfAdNfE@debian>
Message-ID: <CABSWR-H+w6diFiUvSEOhw9hLUrDv6xwc-j8aYZx77+ZTjLNyog@mail.gmail.com>

Hu,

Having just added a new plugin [1] today marked "experimental" my
expectation was that I would use this "experimental" flag for my first one
or two or three versions until I am sure it works for others as well and
until all the initial kinks of a first time plugin submission are ironed
out. I had the expectation that it would signal to the users that this is a
new effort and that it may take a few more updates to find and fix all the
bugs. Since doing this initial experimental release this afternoon, for
example, I've created already a newer version that I was intending to
submit soon.

Hence maybe a two week time limit for plugins to remain experimental would
be a useful way to limit the number of experimental plugins to those newly
submitted or currently under active development and kick out those that are
idle in their experimental status.

Regards from Zanzibar,

Martin

[1] http://plugins.qgis.org/plugins/LAStools/



On Sun, Aug 26, 2018, 21:11 Borys Jurgiel <lists at borysjurgiel.pl> wrote:

> Hi Lists,
>
> Before I make a QEP I'd like to know your general thoughts.
>
> After I removed the deprecated plugins filter from the Plugin manager (and
> make them always visible) [1], Alex suggested doing the same with the
> Experimental status.
>
> Initially it was designed for two cases: to mark a whole plugin as
> experimental, and to just mark the recent version (so a kind of beta).
> Both
> cases seem to be popular among authors: at the moment we have 215 plugins
> for
> master, from which ~40 are experimental only and ~20 are in both versions.
>
> However, I'm not sure if it makes much sense nowadays. Releasing 'stable'
> and
> 'experimental' versions seems a bit overscaled to me. And there is a
> simpler
> solution: If the recent version is buggy, users can just download the last
> working one from the repo and install from zip. The former case, when the
> whole plugin is experimental, seems to be often misused: authors can use
> it to
> hide some specialised of localised plugisn from majority of users. In fact
> even I committed such clear misuse, marking the Plugin Reloader as
> experimental just to not clutter the list for normal users... Another
> reason
> could be a shyness. But again, we have the rating stars now and don't need
> to
> rely on the author's shyness anymore.
>
> So... Do you see important reasons to keep this tag? Maybe we should
> completely drop it? Or just remove the option to hide them from manager,
> leaving the flask icon on the plugin details page?
>
> Regards,
> Borys
>
> [1] https://github.com/qgis/QGIS/pull/7713
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180826/756f081d/attachment-0001.html>

From noreply at qgis.org  Sun Aug 26 12:42:16 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Sun, 26 Aug 2018 19:42:16 -0000
Subject: [QGIS-Developer] Plugin [205] qgSurf approval notification.
Message-ID: <20180826194216.22517.43253@2c6504964296>


Plugin qgSurf approval by pcav.
The plugin version "[205] qgSurf 1.0.0" is now approved
Link: http://plugins.qgis.org/plugins/qgSurf/

From nyall.dawson at gmail.com  Sun Aug 26 17:06:03 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 27 Aug 2018 10:06:03 +1000
Subject: [QGIS-Developer] Do we really need experimental and
 non-experimental plugins?
In-Reply-To: <1743799.lBYyfAdNfE@debian>
References: <1743799.lBYyfAdNfE@debian>
Message-ID: <CAB28AsgcB23RRShmx0LVAH6vJHDOVLc+2E=mk64i3Z6VUj-jjg@mail.gmail.com>

On Mon, 27 Aug 2018 at 04:11, Borys Jurgiel <lists at borysjurgiel.pl> wrote:
>
> Hi Lists,
>
> Before I make a QEP I'd like to know your general thoughts.
>
> After I removed the deprecated plugins filter from the Plugin manager (and
> make them always visible) [1], Alex suggested doing the same with the
> Experimental status.

I'm -1 on this. Experimental plugins can be dangerous (some result in
crashes, data corruption, etc), and shouldn't be shown by default.

> However, I'm not sure if it makes much sense nowadays. Releasing 'stable' and
> 'experimental' versions seems a bit overscaled to me. And there is a simpler
> solution: If the recent version is buggy, users can just download the last
> working one from the repo and install from zip.

I think that's overestimating some of our user's abilities -- it would
take a lot of knowledge that:
1. a plugin is at fault
2. they can overwrite a plugin manually with an earlier version
and
3. they can download earlier versions of plugins.

Then, they'd also need to know *which* older plugin version is "good"
and should be downloaded.

> The former case, when the
> whole plugin is experimental, seems to be often misused: authors can use it to
> hide some specialised of localised plugisn from majority of users. In fact
> even I committed such clear misuse, marking the Plugin Reloader as
> experimental just to not clutter the list for normal users... Another reason
> could be a shyness. But again, we have the rating stars now and don't need to
> rely on the author's shyness anymore.
>
> So... Do you see important reasons to keep this tag? Maybe we should
> completely drop it? Or just remove the option to hide them from manager,
> leaving the flask icon on the plugin details page?

I think it should be kept. I know of one buggy plugin which recently
got marked as experimental, and I'm *very* glad to see this particular
plugin hidden from the majority of our users by default.

Nyall

From nyall.dawson at gmail.com  Sun Aug 26 18:41:58 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 27 Aug 2018 11:41:58 +1000
Subject: [QGIS-Developer] QgsProcessingParameterFile - Multiple
	extensions
In-Reply-To: <CABPxTTrQTT7j3xxf2bG-=OdmeSWVRPUtXV0uNzxa7TMiCbs+_A@mail.gmail.com>
References: <CABPxTTrQTT7j3xxf2bG-=OdmeSWVRPUtXV0uNzxa7TMiCbs+_A@mail.gmail.com>
Message-ID: <CAB28Asjmj2cT2f8pa-rkf7ZOoU1sbO7Ni3oE=gn4JLRJNeuP4A@mail.gmail.com>

On Fri, 24 Aug 2018 at 05:42, C Hamilton <adenaculture at gmail.com> wrote:
>
> Does QgsProcessingParameterFile support more than one extensioin ie *.kml, *.kmz? I've tried various things but none have worked.

That's not currently supported, unfortunately.

Nyall

>
>         self.addParameter(
>             QgsProcessingParameterFile(
>                 self.PrmInputLayer,
>                 tr('Import KML/KMZ file'),
>                 extension='kml')
>         )
>
> Thanks,
>
> Calvin
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

From cavallini at faunalia.it  Sun Aug 26 21:16:20 2018
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon, 27 Aug 2018 06:16:20 +0200
Subject: [QGIS-Developer] Do we really need experimental and
 non-experimental plugins?
In-Reply-To: <CABSWR-H+w6diFiUvSEOhw9hLUrDv6xwc-j8aYZx77+ZTjLNyog@mail.gmail.com>
References: <1743799.lBYyfAdNfE@debian>
 <CABSWR-H+w6diFiUvSEOhw9hLUrDv6xwc-j8aYZx77+ZTjLNyog@mail.gmail.com>
Message-ID: <16dfa38d-3932-21a1-68ae-3b1bce7f5529@faunalia.it>

Ho all,

I agree on this interpretation.

All the best.


On 08/26/2018 08:49 PM, Martin Isenburg wrote:
> Hu,
>
> Having just added a new plugin [1] today marked "experimental" my
> expectation was that I would use this "experimental" flag for my first
> one or two or three versions until I am sure it works for others as
> well and until all the initial kinks of a first time plugin submission
> are ironed out. I had the expectation that it would signal to the
> users that this is a new effort and that it may take a few more
> updates to find and fix all the bugs. Since doing this initial
> experimental release this afternoon, for example, I've created already
> a newer version that I was intending to submit soon.
>
> Hence maybe a two week time limit for plugins to
> remain experimental would be a useful way to limit the number
> of experimental plugins to those newly submitted or currently under
> active development and kick out those that are idle in their
> experimental status.
>
> Regards from Zanzibar,
>
> Martin
>
> [1] http://plugins.qgis.org/plugins/LAStools/
>
>
>
> On Sun, Aug 26, 2018, 21:11 Borys Jurgiel <lists at borysjurgiel.pl
> <mailto:lists at borysjurgiel.pl>> wrote:
>
>     Hi Lists,
>
>     Before I make a QEP I'd like to know your general thoughts.
>
>     After I removed the deprecated plugins filter from the Plugin
>     manager (and
>     make them always visible) [1], Alex suggested doing the same with the
>     Experimental status.
>
>     Initially it was designed for two cases: to mark a whole plugin as
>     experimental, and to just mark the recent version (so a kind of
>     beta). Both
>     cases seem to be popular among authors: at the moment we have 215
>     plugins for
>     master, from which ~40 are experimental only and ~20 are in both
>     versions.
>
>     However, I'm not sure if it makes much sense nowadays. Releasing
>     'stable' and
>     'experimental' versions seems a bit overscaled to me. And there is
>     a simpler
>     solution: If the recent version is buggy, users can just download
>     the last
>     working one from the repo and install from zip. The former case,
>     when the
>     whole plugin is experimental, seems to be often misused: authors
>     can use it to
>     hide some specialised of localised plugisn from majority of users.
>     In fact
>     even I committed such clear misuse, marking the Plugin Reloader as
>     experimental just to not clutter the list for normal users...
>     Another reason
>     could be a shyness. But again, we have the rating stars now and
>     don't need to
>     rely on the author's shyness anymore.
>
>     So... Do you see important reasons to keep this tag? Maybe we should
>     completely drop it? Or just remove the option to hide them from
>     manager,
>     leaving the flask icon on the plugin details page?
>
>     Regards,
>     Borys
>
>     [1] https://github.com/qgis/QGIS/pull/7713
>
>
>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
https://www.google.com/trends/explore?date=all&geo=IT&q=qgis,arcgis

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180827/494a3ecd/attachment.html>

From cavallini at faunalia.it  Sun Aug 26 21:21:17 2018
From: cavallini at faunalia.it (Paolo Cavallini)
Date: Mon, 27 Aug 2018 06:21:17 +0200
Subject: [QGIS-Developer] Do we really need experimental and
 non-experimental plugins?
In-Reply-To: <CAB28AsgcB23RRShmx0LVAH6vJHDOVLc+2E=mk64i3Z6VUj-jjg@mail.gmail.com>
References: <1743799.lBYyfAdNfE@debian>
 <CAB28AsgcB23RRShmx0LVAH6vJHDOVLc+2E=mk64i3Z6VUj-jjg@mail.gmail.com>
Message-ID: <c4f46610-d901-8656-d932-4b3f7d4db276@faunalia.it>

Hi all,


On 08/27/2018 02:06 AM, Nyall Dawson wrote:
> On Mon, 27 Aug 2018 at 04:11, Borys Jurgiel <lists at borysjurgiel.pl> wrote:
>> Hi Lists,
>>
>> Before I make a QEP I'd like to know your general thoughts.
>>
>> After I removed the deprecated plugins filter from the Plugin manager (and
>> make them always visible) [1], Alex suggested doing the same with the
>> Experimental status.
> I'm -1 on this. Experimental plugins can be dangerous (some result in
> crashes, data corruption, etc), and shouldn't be shown by default.
I agree with Nyall. Furthermore, I'm also -1 on showing deprecated
plugins. These are mosty useless, sometimes dangerous. I ask to revert
the change ASAP.
>> However, I'm not sure if it makes much sense nowadays. Releasing 'stable' and
>> 'experimental' versions seems a bit overscaled to me. And there is a simpler
>> solution: If the recent version is buggy, users can just download the last
>> working one from the repo and install from zip.
> I think that's overestimating some of our user's abilities -- it would
> take a lot of knowledge that:
> 1. a plugin is at fault
> 2. they can overwrite a plugin manually with an earlier version
> and
> 3. they can download earlier versions of plugins.
>
> Then, they'd also need to know *which* older plugin version is "good"
> and should be downloaded.
Agreed fully.
> I think it should be kept. I know of one buggy plugin which recently
> got marked as experimental, and I'm *very* glad to see this particular
> plugin hidden from the majority of our users by default.
Again, agreed.
All the best.

-- 
Paolo Cavallini - www.faunalia.eu
QGIS & PostGIS courses: http://www.faunalia.eu/training.html
https://www.google.com/trends/explore?date=all&geo=IT&q=qgis,arcgis


From delazj at gmail.com  Sun Aug 26 22:26:12 2018
From: delazj at gmail.com (DelazJ)
Date: Mon, 27 Aug 2018 07:26:12 +0200
Subject: [QGIS-Developer] Make translatable the help of the custom function
	template
Message-ID: <CAECJsSo_aX7c_RityVNx7BJvs8XWzLVqek2MC+TSxtBB1T-gpw@mail.gmail.com>

Hi,
Opening an expressiondialog, function editor tab, you can create your own
function, based on a provided template [0]. In the template file, other
than the function itself, there's a long help comment explaining what the
parameters are, how they behave and many contextual useful information.
BUT
This knowledge is only available in English, hence not accessible to all.

Is there anything that prevents to make it translatable or is it simply an
omission?

[0] https://github.com/qgis/QGIS/blob/master/python/user.py

Regards,
Harrissou
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180827/2851710f/attachment.html>

From peter.petrik at lutraconsulting.co.uk  Sun Aug 26 22:30:47 2018
From: peter.petrik at lutraconsulting.co.uk (Peter Petrik)
Date: Mon, 27 Aug 2018 07:30:47 +0200
Subject: [QGIS-Developer] GRIB not showing arrows
In-Reply-To: <5c7e2c5a-d594-f149-b281-f0c962fb3694@faunalia.it>
References: <5c7e2c5a-d594-f149-b281-f0c962fb3694@faunalia.it>
Message-ID: <CA+T_MsKg7bDwkyO_TN8iJ+DSxd8Kb9Oyw-XL7sn-d+F030KObQ@mail.gmail.com>

Hi Paolo,

when you are not able to enable vector arrows, the GRIB file could be
incorrectly parsed by MDAL. In the general tab, there should be metadata
section. Does it show that the dataset is vector or scalar?

Cheers,
Peter


On Sun, Aug 26, 2018 at 7:29 AM, Paolo Cavallini <cavallini at faunalia.it>
wrote:

> Hi all,
>
> on a fresh;y compiled master, gribs are loaded correctly, styles can be
> applied, but the arrows tab is grayed out, and cannot be used. Am I
> missing something obvious?
>
> Thanks.
>
> --
> Paolo Cavallini - www.faunalia.eu
> QGIS & PostGIS courses: http://www.faunalia.eu/training.html
> https://www.google.com/trends/explore?date=all&geo=IT&q=qgis,arcgis
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180827/3ad7e3ac/attachment.html>

From a.neumann at carto.net  Mon Aug 27 05:41:53 2018
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon, 27 Aug 2018 14:41:53 +0200
Subject: [QGIS-Developer] Do we really need experimental and
 non-experimental plugins?
In-Reply-To: <CAB28AsgcB23RRShmx0LVAH6vJHDOVLc+2E=mk64i3Z6VUj-jjg@mail.gmail.com>
References: <1743799.lBYyfAdNfE@debian>
 <CAB28AsgcB23RRShmx0LVAH6vJHDOVLc+2E=mk64i3Z6VUj-jjg@mail.gmail.com>
Message-ID: <f7b0be34-8477-38d6-97f6-fce2785ad4fb@carto.net>

Hi Borys,

Personally, I think there is a need for the differentiation of 
experimental or not experimental.

I'd like to keep it as it is.

Andreas


Am 27.08.2018 um 02:06 schrieb Nyall Dawson:
> On Mon, 27 Aug 2018 at 04:11, Borys Jurgiel <lists at borysjurgiel.pl> wrote:
>> Hi Lists,
>>
>> Before I make a QEP I'd like to know your general thoughts.
>>
>> After I removed the deprecated plugins filter from the Plugin manager (and
>> make them always visible) [1], Alex suggested doing the same with the
>> Experimental status.
> I'm -1 on this. Experimental plugins can be dangerous (some result in
> crashes, data corruption, etc), and shouldn't be shown by default.
>
>> However, I'm not sure if it makes much sense nowadays. Releasing 'stable' and
>> 'experimental' versions seems a bit overscaled to me. And there is a simpler
>> solution: If the recent version is buggy, users can just download the last
>> working one from the repo and install from zip.
> I think that's overestimating some of our user's abilities -- it would
> take a lot of knowledge that:
> 1. a plugin is at fault
> 2. they can overwrite a plugin manually with an earlier version
> and
> 3. they can download earlier versions of plugins.
>
> Then, they'd also need to know *which* older plugin version is "good"
> and should be downloaded.
>
>> The former case, when the
>> whole plugin is experimental, seems to be often misused: authors can use it to
>> hide some specialised of localised plugisn from majority of users. In fact
>> even I committed such clear misuse, marking the Plugin Reloader as
>> experimental just to not clutter the list for normal users... Another reason
>> could be a shyness. But again, we have the rating stars now and don't need to
>> rely on the author's shyness anymore.
>>
>> So... Do you see important reasons to keep this tag? Maybe we should
>> completely drop it? Or just remove the option to hide them from manager,
>> leaving the flask icon on the plugin details page?
> I think it should be kept. I know of one buggy plugin which recently
> got marked as experimental, and I'm *very* glad to see this particular
> plugin hidden from the majority of our users by default.
>
> Nyall
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From paolo.tormene at globalquakemodel.org  Mon Aug 27 06:34:13 2018
From: paolo.tormene at globalquakemodel.org (Paolo Tormene)
Date: Mon, 27 Aug 2018 15:34:13 +0200
Subject: [QGIS-Developer] Do we really need experimental and
 non-experimental plugins?
In-Reply-To: <1743799.lBYyfAdNfE@debian>
References: <1743799.lBYyfAdNfE@debian>
Message-ID: <CADQ4pmA8ZZe-88s6aj4ZASPdGufoEydM-_L3Qc51N7NgAwYJAA@mail.gmail.com>

Dear Borys,

for our plugin (the OpenQuake Integrated Risk Modelling Toolkit [1]) we
have been very happy to use the "experimental" flag so far, and we consider
it
a very useful feature.

For us, the ideal workflow would be to release a new
version of the plugin flagged as experimental, then let our scientific team
try
it extensively on real use-cases, and then mark it as stable. If I
understand
correctly, your proposal is to remove the possibility to mark an existing
experimental
version as stable, so we would have to release an identical version of the
plugin
without the "experimental" flag, as soon as we receive the approval from our
scientists.

>From a user perspective, we believe it is important that the user
can actually trust our plugin for "production" purposes, as long as the
plugin
is not flagged as "experimental". Users that are willing to try new
cutting-edge features at their own risk, can still enable experimental
plugins
and download the most recent version.

We also have another important point in favor of keeping two different
versions
of the plugin. Our tool has to interface itself with the OpenQuake Engine
[2],
that is a scientific engine that evolves very quickly. We currently keep the
most recent stable version of our plugin aligned with the latest official
release of the OpenQuake Engine, ensuring compatibility between the two
softwares. Between one official release and the next one, we release new
experimental versions of the plugin, ensuring compatibility with the nightly
builds of the OpenQuake Engine. Therefore, scientists that are interested in
using the most recent features offered by the two softwares can rely on the
nightly builds of the OpenQuake Engine and on the latest experimental
OpenQuake
Integrated Risk Modelling Toolkit.

For the above reasons, our answer to your question is yes, we do really need
this feature. And if you decide to drop it, we will have to significantly
redesign our release workflow.

Paolo Tormene, on behalf of the OpenQuake Team

[1] https://plugins.qgis.org/plugins/svir/
[2] https://github.com/gem/oq-engine/

On Sun, Aug 26, 2018 at 8:11 PM Borys Jurgiel <lists at borysjurgiel.pl> wrote:

> Hi Lists,
>
> Before I make a QEP I'd like to know your general thoughts.
>
> After I removed the deprecated plugins filter from the Plugin manager (and
> make them always visible) [1], Alex suggested doing the same with the
> Experimental status.
>
> Initially it was designed for two cases: to mark a whole plugin as
> experimental, and to just mark the recent version (so a kind of beta).
> Both
> cases seem to be popular among authors: at the moment we have 215 plugins
> for
> master, from which ~40 are experimental only and ~20 are in both versions.
>
> However, I'm not sure if it makes much sense nowadays. Releasing 'stable'
> and
> 'experimental' versions seems a bit overscaled to me. And there is a
> simpler
> solution: If the recent version is buggy, users can just download the last
> working one from the repo and install from zip. The former case, when the
> whole plugin is experimental, seems to be often misused: authors can use
> it to
> hide some specialised of localised plugisn from majority of users. In fact
> even I committed such clear misuse, marking the Plugin Reloader as
> experimental just to not clutter the list for normal users... Another
> reason
> could be a shyness. But again, we have the rating stars now and don't need
> to
> rely on the author's shyness anymore.
>
> So... Do you see important reasons to keep this tag? Maybe we should
> completely drop it? Or just remove the option to hide them from manager,
> leaving the flask icon on the plugin details page?
>
> Regards,
> Borys
>
> [1] https://github.com/qgis/QGIS/pull/7713
>
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer



-- 

*PAOLO TORMENE* senior software developer +39 0382 5169882

*GLOBAL EARTHQUAKE MODEL * working together to assess risk

*GEM -* globalquakemodel.org <http://www.globalquakemodel.org> *T -*
@GEMwrld <http://twitter.com/GEMwrld> *F -* GEMwrld
<http://www.facebook.com/GEMwrld>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180827/c6dd3b36/attachment-0001.html>

From jorgealmerio at yahoo.com.br  Mon Aug 27 06:38:03 2018
From: jorgealmerio at yahoo.com.br (Jorge Almerio)
Date: Mon, 27 Aug 2018 10:38:03 -0300
Subject: [QGIS-Developer] RES: Do we really need experimental and
	non-experimental plugins?
In-Reply-To: <f7b0be34-8477-38d6-97f6-fce2785ad4fb@carto.net>
References: <1743799.lBYyfAdNfE@debian>
 <CAB28AsgcB23RRShmx0LVAH6vJHDOVLc+2E=mk64i3Z6VUj-jjg@mail.gmail.com>
 <f7b0be34-8477-38d6-97f6-fce2785ad4fb@carto.net>
Message-ID: <001e01d43e0b$2f6e09d0$8e4a1d70$@com.br>

Hi devs,

I agree with Andreas. I think we need experimental and non-experimental flags to plugins as it is.
And I think that we can NOT restrict the time to be experimental. Because it depends on the author available time to make his plugin stable. Restrict the experimental plugins would reduce the number of plugins been uploaded. To mark as experimental is important for the users and for the authors too, because one can help the other to fix bugs.

Jorge Almerio


-----Mensagem original-----
De: QGIS-Developer [mailto:qgis-developer-bounces at lists.osgeo.org] Em nome de Andreas Neumann
Enviada em: segunda-feira, 27 de agosto de 2018 09:42
Para: qgis-developer at lists.osgeo.org
Assunto: Re: [QGIS-Developer] Do we really need experimental and non-experimental plugins?

Hi Borys,

Personally, I think there is a need for the differentiation of 
experimental or not experimental.

I'd like to keep it as it is.

Andreas


Am 27.08.2018 um 02:06 schrieb Nyall Dawson:
> On Mon, 27 Aug 2018 at 04:11, Borys Jurgiel <lists at borysjurgiel.pl> wrote:
>> Hi Lists,
>>
>> Before I make a QEP I'd like to know your general thoughts.
>>
>> After I removed the deprecated plugins filter from the Plugin manager (and
>> make them always visible) [1], Alex suggested doing the same with the
>> Experimental status.
> I'm -1 on this. Experimental plugins can be dangerous (some result in
> crashes, data corruption, etc), and shouldn't be shown by default.
>
>> However, I'm not sure if it makes much sense nowadays. Releasing 'stable' and
>> 'experimental' versions seems a bit overscaled to me. And there is a simpler
>> solution: If the recent version is buggy, users can just download the last
>> working one from the repo and install from zip.
> I think that's overestimating some of our user's abilities -- it would
> take a lot of knowledge that:
> 1. a plugin is at fault
> 2. they can overwrite a plugin manually with an earlier version
> and
> 3. they can download earlier versions of plugins.
>
> Then, they'd also need to know *which* older plugin version is "good"
> and should be downloaded.
>
>> The former case, when the
>> whole plugin is experimental, seems to be often misused: authors can use it to
>> hide some specialised of localised plugisn from majority of users. In fact
>> even I committed such clear misuse, marking the Plugin Reloader as
>> experimental just to not clutter the list for normal users... Another reason
>> could be a shyness. But again, we have the rating stars now and don't need to
>> rely on the author's shyness anymore.
>>
>> So... Do you see important reasons to keep this tag? Maybe we should
>> completely drop it? Or just remove the option to hide them from manager,
>> leaving the flask icon on the plugin details page?
> I think it should be kept. I know of one buggy plugin which recently
> got marked as experimental, and I'm *very* glad to see this particular
> plugin hidden from the majority of our users by default.
>
> Nyall
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

_______________________________________________
QGIS-Developer mailing list
QGIS-Developer at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From carlos.lopez at psig.es  Mon Aug 27 08:18:14 2018
From: carlos.lopez at psig.es (=?UTF-8?Q?Carlos_L=C3=B3pez_PSIG?=)
Date: Mon, 27 Aug 2018 17:18:14 +0200
Subject: [QGIS-Developer] QGIS 3.2 Connection Oracle very slow
In-Reply-To: <CAGvsbY7UNadyFS=yVdaCSUBzqN=2aHbGhESOb=aHsu1r_jatTQ@mail.gmail.com>
References: <CAGvsbY7UNadyFS=yVdaCSUBzqN=2aHbGhESOb=aHsu1r_jatTQ@mail.gmail.com>
Message-ID: <CAGvsbY5Q1Wra-G4BpACTeB8V+OEzSm1=OCSaTDGjvRnz__6q8A@mail.gmail.com>

Hi,
I opened a ticket because the problem follow,  link
<https://issues.qgis.org/issues/19713>

Anybody have comments?

Best regards,


* <http://psig.es>*
*PSIG*
Implementació, gestió i formació SIG

*Carlos López Quintanilla*

www.psig.es
carlos.lopez at psig.es
+34 699.680.261

Nota legal: Este mensaje y cualquier archivo adjunto está destinado
únicamente a la
persona a quien se dirige y es confidencial. Si usted ha recibido este
mensaje por
error, por favor, comuníqueselo al remitente y bórrelo inmediatamente. La
utilización ,
revelación y/o reproducción del mensaje puede constituir un delito.

Protección de Datos: Le informamos que sus datos de contacto electrónico se
hallan
incorporados a un fichero titularidad de CARLOS LÓPEZ QUINTANILLA, al
objeto de
envío de información, respuesta a consultas y contactos genéricos.
Puede ejercer los derechos de acceso, rectificación, cancelación y
oposición que
establece la LOPD en cualquier momento, mediante escrito, acompañado de
copia de
documento oficial que le identifique, dirigido a CARLOS LÓPEZ QUINTANILLA
CL. P
arellada, 8 E2 de Corbera de Llobregat, 08757-Barcelona.

También podrá oponerse a nuestros envíos de comunicaciones comerciales
(Art.21.2
de la LSSI) a través de la siguiente dirección de correo electrónico:
admin at psig.es



El mar., 10 jul. 2018 a las 10:51, Carlos López PSIG (<carlos.lopez at psig.es>)
escribió:

> Hi developers,
> We are testing QGIS 3.2 and we see that the connection to Oracle is very
> slow and the connection did not end ...
> Is this a known error?
>
> if we use QGIS 2.18 the connection is good and fast.
> OS: Windows
>
> Best regards,
>
>
> * <http://psig.es>*
> *PSIG*
> Implementació, gestió i formació SIG
>
> *Carlos López Quintanilla*
>
> www.psig.es
> carlos.lopez at psig.es
> +34 699.680.261
>
> Nota legal: Este mensaje y cualquier archivo adjunto está destinado
> únicamente a la
> persona a quien se dirige y es confidencial. Si usted ha recibido este
> mensaje por
> error, por favor, comuníqueselo al remitente y bórrelo inmediatamente. La
> utilización ,
> revelación y/o reproducción del mensaje puede constituir un delito.
>
> Protección de Datos: Le informamos que sus datos de contacto electrónico
> se hallan
> incorporados a un fichero titularidad de CARLOS LÓPEZ QUINTANILLA, al
> objeto de
> envío de información, respuesta a consultas y contactos genéricos.
> Puede ejercer los derechos de acceso, rectificación, cancelación y
> oposición que
> establece la LOPD en cualquier momento, mediante escrito, acompañado de
> copia de
> documento oficial que le identifique, dirigido a CARLOS LÓPEZ QUINTANILLA
> CL. P
> arellada, 8 E2 de Corbera de Llobregat, 08757-Barcelona.
>
> También podrá oponerse a nuestros envíos de comunicaciones comerciales
> (Art.21.2
> de la LSSI) a través de la siguiente dirección de correo electrónico:
> admin at psig.es
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180827/927d21f7/attachment.html>

From a.neumann at carto.net  Mon Aug 27 10:05:08 2018
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon, 27 Aug 2018 19:05:08 +0200
Subject: [QGIS-Developer] Can't install QGIS after compile because of
	contributors.json
Message-ID: <fde2840e-68ac-e950-f887-5809d2613142@carto.net>

Hi,

After compiling QGIS I can't install QGIS. When i run "ninja install" I 
get the following error message:

-----------

CMake Error at doc/cmake_install.cmake:41 (file):
   file INSTALL cannot find "/home/an/dev/QGIS/doc/contributors.json".
Call Stack (most recent call first):
   cmake_install.cmake:58 (include)


FAILED: CMakeFiles/install.util
cd /home/an/dev/QGIS/build && /usr/bin/cmake -P cmake_install.cmake
ninja: build stopped: subcommand failed.
--------------

Seems like the download/update/install of the contributors.json doesn't 
work?

Thanks for any hints on how to fix this!

Andreas


From etienne.trimaille at gmail.com  Mon Aug 27 10:45:22 2018
From: etienne.trimaille at gmail.com (Etienne Trimaille)
Date: Mon, 27 Aug 2018 13:45:22 -0400
Subject: [QGIS-Developer] Can't install QGIS after compile because of
	contributors.json
In-Reply-To: <fde2840e-68ac-e950-f887-5809d2613142@carto.net>
References: <fde2840e-68ac-e950-f887-5809d2613142@carto.net>
Message-ID: <CAMtDFL+R7iUue4gwX0NwnBsqQwrh6jtEFUyyhPU9vUh_R2C-mw@mail.gmail.com>

There is a PR to fix it from Mathieu: https://github.com/qgis/QGIS/pull/7722

Le lun. 27 août 2018 à 13:05, Andreas Neumann <a.neumann at carto.net> a
écrit :

> Hi,
>
> After compiling QGIS I can't install QGIS. When i run "ninja install" I
> get the following error message:
>
> -----------
>
> CMake Error at doc/cmake_install.cmake:41 (file):
>    file INSTALL cannot find "/home/an/dev/QGIS/doc/contributors.json".
> Call Stack (most recent call first):
>    cmake_install.cmake:58 (include)
>
>
> FAILED: CMakeFiles/install.util
> cd /home/an/dev/QGIS/build && /usr/bin/cmake -P cmake_install.cmake
> ninja: build stopped: subcommand failed.
> --------------
>
> Seems like the download/update/install of the contributors.json doesn't
> work?
>
> Thanks for any hints on how to fix this!
>
> Andreas
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180827/11d62c71/attachment-0001.html>

From a.neumann at carto.net  Mon Aug 27 10:58:56 2018
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon, 27 Aug 2018 19:58:56 +0200
Subject: [QGIS-Developer] Can't install QGIS after compile because of
 contributors.json
In-Reply-To: <CAMtDFL+R7iUue4gwX0NwnBsqQwrh6jtEFUyyhPU9vUh_R2C-mw@mail.gmail.com>
References: <fde2840e-68ac-e950-f887-5809d2613142@carto.net>
 <CAMtDFL+R7iUue4gwX0NwnBsqQwrh6jtEFUyyhPU9vUh_R2C-mw@mail.gmail.com>
Message-ID: <dfdbff86-ef60-4c3b-b41d-7e4f0637c09f@carto.net>

Thanks - then I wait for Tim to merge this into master.

Eager to try out the new easter eggs ;-)

Greetings,

Andreas


Am 27.08.2018 um 19:45 schrieb Etienne Trimaille:
> There is a PR to fix it from Mathieu: 
> https://github.com/qgis/QGIS/pull/7722
>
> Le lun. 27 août 2018 à 13:05, Andreas Neumann <a.neumann at carto.net 
> <mailto:a.neumann at carto.net>> a écrit :
>
>     Hi,
>
>     After compiling QGIS I can't install QGIS. When i run "ninja
>     install" I
>     get the following error message:
>
>     -----------
>
>     CMake Error at doc/cmake_install.cmake:41 (file):
>        file INSTALL cannot find "/home/an/dev/QGIS/doc/contributors.json".
>     Call Stack (most recent call first):
>        cmake_install.cmake:58 (include)
>
>
>     FAILED: CMakeFiles/install.util
>     cd /home/an/dev/QGIS/build && /usr/bin/cmake -P cmake_install.cmake
>     ninja: build stopped: subcommand failed.
>     --------------
>
>     Seems like the download/update/install of the contributors.json
>     doesn't
>     work?
>
>     Thanks for any hints on how to fix this!
>
>     Andreas
>
>     _______________________________________________
>     QGIS-Developer mailing list
>     QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>     List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>     Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180827/fedb58c1/attachment.html>

From tim at kartoza.com  Mon Aug 27 11:49:24 2018
From: tim at kartoza.com (Tim Sutton)
Date: Mon, 27 Aug 2018 21:49:24 +0300
Subject: [QGIS-Developer] Can't install QGIS after compile because of
 contributors.json
In-Reply-To: <dfdbff86-ef60-4c3b-b41d-7e4f0637c09f@carto.net>
References: <fde2840e-68ac-e950-f887-5809d2613142@carto.net>
 <CAMtDFL+R7iUue4gwX0NwnBsqQwrh6jtEFUyyhPU9vUh_R2C-mw@mail.gmail.com>
 <dfdbff86-ef60-4c3b-b41d-7e4f0637c09f@carto.net>
Message-ID: <223B2002-9E73-4807-91BF-A77737E1F998@kartoza.com>

Yes please stand by - a fix is in the works….if the internet lets me….

Apologies…..

Tim

> On 27 Aug 2018, at 20:58, Andreas Neumann <a.neumann at carto.net> wrote:
> 
> Thanks - then I wait for Tim to merge this into master.
> 
> Eager to try out the new easter eggs ;-)
> Greetings,
> 
> Andreas
> 
> Am 27.08.2018 um 19:45 schrieb Etienne Trimaille:
>> There is a PR to fix it from Mathieu: https://github.com/qgis/QGIS/pull/7722 <https://github.com/qgis/QGIS/pull/7722>
>> 
>> Le lun. 27 août 2018 à 13:05, Andreas Neumann <a.neumann at carto.net <mailto:a.neumann at carto.net>> a écrit :
>> Hi,
>> 
>> After compiling QGIS I can't install QGIS. When i run "ninja install" I
>> get the following error message:
>> 
>> -----------
>> 
>> CMake Error at doc/cmake_install.cmake:41 (file):
>>    file INSTALL cannot find "/home/an/dev/QGIS/doc/contributors.json".
>> Call Stack (most recent call first):
>>    cmake_install.cmake:58 (include)
>> 
>> 
>> FAILED: CMakeFiles/install.util
>> cd /home/an/dev/QGIS/build && /usr/bin/cmake -P cmake_install.cmake
>> ninja: build stopped: subcommand failed.
>> --------------
>> 
>> Seems like the download/update/install of the contributors.json doesn't
>> work?
>> 
>> Thanks for any hints on how to fix this!
>> 
>> Andreas
>> 
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

—








Tim Sutton

Co-founder: Kartoza
Ex Project chair: QGIS.org

Visit http://kartoza.com <http://kartoza.com/> to find out about open source:

Desktop GIS programming services
Geospatial web development
GIS Training
Consulting Services

Skype: timlinux
IRC: timlinux on #qgis at freenode.net

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180827/0b3e9ccd/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: KartozaNewLogoThumbnail.jpg
Type: image/jpeg
Size: 6122 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180827/0b3e9ccd/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 488 bytes
Desc: Message signed with OpenPGP
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180827/0b3e9ccd/attachment-0001.sig>

From rdmailings at duif.net  Mon Aug 27 12:31:02 2018
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 27 Aug 2018 21:31:02 +0200
Subject: [QGIS-Developer] Can't install QGIS after compile because of
 contributors.json
In-Reply-To: <dfdbff86-ef60-4c3b-b41d-7e4f0637c09f@carto.net>
References: <fde2840e-68ac-e950-f887-5809d2613142@carto.net>
 <CAMtDFL+R7iUue4gwX0NwnBsqQwrh6jtEFUyyhPU9vUh_R2C-mw@mail.gmail.com>
 <dfdbff86-ef60-4c3b-b41d-7e4f0637c09f@carto.net>
Message-ID: <1641d959-378a-d1d2-539f-f32318c5cd7f@duif.net>

On 08/27/2018 07:58 PM, Andreas Neumann wrote:
> Eager to try out the new easter eggs ;-)

Tell us, Tell us :-)

Richard

From adenaculture at gmail.com  Mon Aug 27 13:09:00 2018
From: adenaculture at gmail.com (C Hamilton)
Date: Mon, 27 Aug 2018 16:09:00 -0400
Subject: [QGIS-Developer] QgsProcessingParameterFile - Multiple
	extensions
In-Reply-To: <CAB28Asjmj2cT2f8pa-rkf7ZOoU1sbO7Ni3oE=gn4JLRJNeuP4A@mail.gmail.com>
References: <CABPxTTrQTT7j3xxf2bG-=OdmeSWVRPUtXV0uNzxa7TMiCbs+_A@mail.gmail.com>
 <CAB28Asjmj2cT2f8pa-rkf7ZOoU1sbO7Ni3oE=gn4JLRJNeuP4A@mail.gmail.com>
Message-ID: <CABPxTTpK4Ju-THD9unnhtKYJ-r-DGEbYRrFjUe9MUu5wzwhZAA@mail.gmail.com>

That's too bad. It would be useful. I will need to not use an extension in
this case because it need to import more than one.

Calvin

On Sun, Aug 26, 2018 at 9:41 PM, Nyall Dawson <nyall.dawson at gmail.com>
wrote:

> On Fri, 24 Aug 2018 at 05:42, C Hamilton <adenaculture at gmail.com> wrote:
> >
> > Does QgsProcessingParameterFile support more than one extensioin ie
> *.kml, *.kmz? I've tried various things but none have worked.
>
> That's not currently supported, unfortunately.
>
> Nyall
>
> >
> >         self.addParameter(
> >             QgsProcessingParameterFile(
> >                 self.PrmInputLayer,
> >                 tr('Import KML/KMZ file'),
> >                 extension='kml')
> >         )
> >
> > Thanks,
> >
> > Calvin
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180827/cc3ceafe/attachment.html>

From lists at borysjurgiel.pl  Mon Aug 27 13:17:10 2018
From: lists at borysjurgiel.pl (Borys Jurgiel)
Date: Mon, 27 Aug 2018 22:17:10 +0200
Subject: [QGIS-Developer] Do we really need experimental and
	non-experimental plugins?
In-Reply-To: <c4f46610-d901-8656-d932-4b3f7d4db276@faunalia.it>
References: <1743799.lBYyfAdNfE@debian>
 <CAB28AsgcB23RRShmx0LVAH6vJHDOVLc+2E=mk64i3Z6VUj-jjg@mail.gmail.com>
 <c4f46610-d901-8656-d932-4b3f7d4db276@faunalia.it>
Message-ID: <2133868.hXgt54eLhC@debian>

Dnia poniedziałek, 27 sierpnia 2018 06:21:17 CEST Paolo Cavallini pisze:
> I agree with Nyall. Furthermore, I'm also -1 on showing deprecated
> plugins. These are mosty useless, sometimes dangerous. I ask to revert
> the change ASAP.

Don't worry, it's still a PR (and there are no deprecated 3.x plugins yet ;)
Richard, do you want to defend this idea or shall we close the ticket? :)

Borys



From lists at borysjurgiel.pl  Mon Aug 27 13:29:36 2018
From: lists at borysjurgiel.pl (Borys Jurgiel)
Date: Mon, 27 Aug 2018 22:29:36 +0200
Subject: [QGIS-Developer] HiRe: RES: Do we really need experimental and
	non-experimental plugins?
In-Reply-To: <001e01d43e0b$2f6e09d0$8e4a1d70$@com.br>
References: <1743799.lBYyfAdNfE@debian>
 <f7b0be34-8477-38d6-97f6-fce2785ad4fb@carto.net>
 <001e01d43e0b$2f6e09d0$8e4a1d70$@com.br>
Message-ID: <3719046.TEuA5dpDpK@debian>

Hi,

Thanks for all your answers. It clearly seems there is no common demand to 
drop it ;) Frankly speaking, I didn't expect it's considered so useful.
Especially thanks to Martin and Paolo for explaining your use cases.

I'm also against restricting the time to be experimental - to keep this 
function as simple and unambiguous as possible. 

Best regards,

Borys

HiDnia poniedziałek, 27 sierpnia 2018 15:38:03 CEST Jorge Almerio pisze:
> Hi devs,
> 
> I agree with Andreas. I think we need experimental and non-experimental
> flags to plugins as it is. And I think that we can NOT restrict the time to
> be experimental. Because it depends on the author available time to make
> his plugin stable. Restrict the experimental plugins would reduce the
> number of plugins been uploaded. To mark as experimental is important for
> the users and for the authors too, because one can help the other to fix
> bugs.
> 
> Jorge Almerio
> 
> 
> -----Mensagem original-----
> De: QGIS-Developer [mailto:qgis-developer-bounces at lists.osgeo.org] Em nome
> de Andreas Neumann Enviada em: segunda-feira, 27 de agosto de 2018 09:42
> Para: qgis-developer at lists.osgeo.org
> Assunto: Re: [QGIS-Developer] Do we really need experimental and
> non-experimental plugins?
> 
> Hi Borys,
> 
> Personally, I think there is a need for the differentiation of
> experimental or not experimental.
> 
> I'd like to keep it as it is.
> 
> Andreas
> 
> Am 27.08.2018 um 02:06 schrieb Nyall Dawson:
> > On Mon, 27 Aug 2018 at 04:11, Borys Jurgiel <lists at borysjurgiel.pl> wrote:
> >> Hi Lists,
> >> 
> >> Before I make a QEP I'd like to know your general thoughts.
> >> 
> >> After I removed the deprecated plugins filter from the Plugin manager
> >> (and
> >> make them always visible) [1], Alex suggested doing the same with the
> >> Experimental status.
> > 
> > I'm -1 on this. Experimental plugins can be dangerous (some result in
> > crashes, data corruption, etc), and shouldn't be shown by default.
> > 
> >> However, I'm not sure if it makes much sense nowadays. Releasing 'stable'
> >> and 'experimental' versions seems a bit overscaled to me. And there is a
> >> simpler solution: If the recent version is buggy, users can just
> >> download the last working one from the repo and install from zip.
> > 
> > I think that's overestimating some of our user's abilities -- it would
> > take a lot of knowledge that:
> > 1. a plugin is at fault
> > 2. they can overwrite a plugin manually with an earlier version
> > and
> > 3. they can download earlier versions of plugins.
> > 
> > Then, they'd also need to know *which* older plugin version is "good"
> > and should be downloaded.
> > 
> >> The former case, when the
> >> whole plugin is experimental, seems to be often misused: authors can use
> >> it to hide some specialised of localised plugisn from majority of users.
> >> In fact even I committed such clear misuse, marking the Plugin Reloader
> >> as experimental just to not clutter the list for normal users... Another
> >> reason could be a shyness. But again, we have the rating stars now and
> >> don't need to rely on the author's shyness anymore.
> >> 
> >> So... Do you see important reasons to keep this tag? Maybe we should
> >> completely drop it? Or just remove the option to hide them from manager,
> >> leaving the flask icon on the plugin details page?
> > 
> > I think it should be kept. I know of one buggy plugin which recently
> > got marked as experimental, and I'm *very* glad to see this particular
> > plugin hidden from the majority of our users by default.
> > 
> > Nyall
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer





From tim at kartoza.com  Mon Aug 27 13:50:39 2018
From: tim at kartoza.com (Tim Sutton)
Date: Mon, 27 Aug 2018 23:50:39 +0300
Subject: [QGIS-Developer] Can't install QGIS after compile because of
	contributors.json
In-Reply-To: <1641d959-378a-d1d2-539f-f32318c5cd7f@duif.net>
References: <fde2840e-68ac-e950-f887-5809d2613142@carto.net>
 <CAMtDFL+R7iUue4gwX0NwnBsqQwrh6jtEFUyyhPU9vUh_R2C-mw@mail.gmail.com>
 <dfdbff86-ef60-4c3b-b41d-7e4f0637c09f@carto.net>
 <1641d959-378a-d1d2-539f-f32318c5cd7f@duif.net>
Message-ID: <5F6BE8C4-1CCB-47D5-9D68-95B404E3F68B@kartoza.com>

I merged Mathieu’s fix (thanks!) but I think there may still be an issue with the developer map in the about box. I can’t test this on Mac since we don’t get that tab in Mac so could someone on Linux confirm?

@Richard for Easter egg details see

https://github.com/qgis/QGIS/pull/7714

Regards 

Tim Sutton 
Co-founder of Kartoza 
Ex-QGIS project chairman 

> On 27 Aug 2018, at 22:31, Richard Duivenvoorde <rdmailings at duif.net> wrote:
> 
>> On 08/27/2018 07:58 PM, Andreas Neumann wrote:
>> Eager to try out the new easter eggs ;-)
> 
> Tell us, Tell us :-)
> 
> Richard
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180827/55a82664/attachment.html>

From a.neumann at carto.net  Mon Aug 27 14:04:12 2018
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon, 27 Aug 2018 23:04:12 +0200
Subject: [QGIS-Developer] Can't install QGIS after compile because of
 contributors.json
In-Reply-To: <5F6BE8C4-1CCB-47D5-9D68-95B404E3F68B@kartoza.com>
References: <fde2840e-68ac-e950-f887-5809d2613142@carto.net>
 <CAMtDFL+R7iUue4gwX0NwnBsqQwrh6jtEFUyyhPU9vUh_R2C-mw@mail.gmail.com>
 <dfdbff86-ef60-4c3b-b41d-7e4f0637c09f@carto.net>
 <1641d959-378a-d1d2-539f-f32318c5cd7f@duif.net>
 <5F6BE8C4-1CCB-47D5-9D68-95B404E3F68B@kartoza.com>
Message-ID: <1e3ce15a-7dc7-0210-1a67-a77894a4d72b@carto.net>

Hi Tim,

The developer map in the about box works fine. I don't see anything 
wrong. What would be the problem?

Thanks for the fixes. One can even learn from the styling of this easter 
egg ;-) like the continuous updates, shadow effects, etc.

And of course the funny details of the hackfests ;-)

Andreas


Am 27.08.2018 um 22:50 schrieb Tim Sutton:
> I merged Mathieu’s fix (thanks!) but I think there may still be an 
> issue with the developer map in the about box. I can’t test this on 
> Mac since we don’t get that tab in Mac so could someone on Linux confirm?
>
> @Richard for Easter egg details see
>
> https://github.com/qgis/QGIS/pull/7714
>
> Regards
>
> Tim Sutton
> Co-founder of Kartoza
> Ex-QGIS project chairman
>
> On 27 Aug 2018, at 22:31, Richard Duivenvoorde <rdmailings at duif.net 
> <mailto:rdmailings at duif.net>> wrote:
>
>> On 08/27/2018 07:58 PM, Andreas Neumann wrote:
>>> Eager to try out the new easter eggs ;-)
>>
>> Tell us, Tell us :-)
>>
>> Richard
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180827/fd8b4ae2/attachment-0001.html>

From rdmailings at duif.net  Mon Aug 27 23:11:06 2018
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 28 Aug 2018 08:11:06 +0200
Subject: [QGIS-Developer] Do we really need experimental and
 non-experimental plugins?
In-Reply-To: <2133868.hXgt54eLhC@debian>
References: <1743799.lBYyfAdNfE@debian>
 <CAB28AsgcB23RRShmx0LVAH6vJHDOVLc+2E=mk64i3Z6VUj-jjg@mail.gmail.com>
 <c4f46610-d901-8656-d932-4b3f7d4db276@faunalia.it>
 <2133868.hXgt54eLhC@debian>
Message-ID: <a305792d-781c-c799-21ef-44425b7416ad@duif.net>

On 08/27/2018 10:17 PM, Borys Jurgiel wrote:
> Dnia poniedziałek, 27 sierpnia 2018 06:21:17 CEST Paolo Cavallini pisze:
>> I agree with Nyall. Furthermore, I'm also -1 on showing deprecated
>> plugins. These are mosty useless, sometimes dangerous. I ask to revert
>> the change ASAP.
> 
> Don't worry, it's still a PR (and there are no deprecated 3.x plugins yet ;)
> Richard, do you want to defend this idea or shall we close the ticket? :)

Mwa, I like simple things, so if people think this is simpler to handle,
then forget my ticket :-)

Richard

From andreaerdna at libero.it  Tue Aug 28 04:42:31 2018
From: andreaerdna at libero.it (andreaerdna)
Date: Tue, 28 Aug 2018 04:42:31 -0700 (MST)
Subject: [QGIS-Developer] "Filter on joined fields" and Virtual layers
 not working as expected
In-Reply-To: <1535288685213-0.post@n6.nabble.com>
References: <1535288685213-0.post@n6.nabble.com>
Message-ID: <1535456551071-0.post@n6.nabble.com>

andreaerdna wrote
> - the virtual layers show no feature when no filter string is set in the
> Query builder, instead of showing all the features

Better looking at the code, it seems to me that the bug is in
QgsVirtualLayerFeatureIterator::QgsVirtualLayerFeatureIterator where
"subset" is tested for Null instead that for Empty

    QString subset = mSource->mSubset;
    if ( !subset.isNull() )
    {
      wheres << subset;
    }

This leads to the insertion of an empty string in the "wheres" list, thus to
the incorrect preparation of an SQL query with the WHERE clause without
condition or the unneeded AND operator.



-----
Andrea Giudiceandrea
--
Sent from: http://osgeo-org.1560.x6.nabble.com/QGIS-Developer-f4099106.html

From a.neumann at carto.net  Tue Aug 28 07:18:55 2018
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 28 Aug 2018 16:18:55 +0200
Subject: [QGIS-Developer] EqualEarth projection support in QGIS?
Message-ID: <e49fa8b1-3398-2739-ec66-ede517cbb218@carto.net>

Hi,

Twitter is full of mentions of the "EqualEarth" projection. It is 
implemented in many web frameworks now and even appears on TV --> 
https://twitter.com/MtnMapper/status/1034431370867761152

How can we get this projection into QGIS? Seems it is in proj4 already: 
https://github.com/OSGeo/proj.4/commit/b2fe2277e225d3e666cdcce92182595bb547cb0c

Would be nice to show that QGIS is more agile than other commercial 
competitors ;-)

Andreas


From a.neumann at carto.net  Tue Aug 28 07:25:47 2018
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 28 Aug 2018 16:25:47 +0200
Subject: [QGIS-Developer] EqualEarth projection support in QGIS?
In-Reply-To: <e49fa8b1-3398-2739-ec66-ede517cbb218@carto.net>
References: <e49fa8b1-3398-2739-ec66-ede517cbb218@carto.net>
Message-ID: <3e4d2852-f632-4148-1d41-cb7f6cb25389@carto.net>

If i had the latest proj4 compiled on my machine - would I have this new 
"EqualEarth" projection automatically available in QGIS, or is there 
something that needs to be added in QGIS as well?

Andreas


Am 28.08.2018 um 16:18 schrieb Andreas Neumann:
> Hi,
>
> Twitter is full of mentions of the "EqualEarth" projection. It is 
> implemented in many web frameworks now and even appears on TV --> 
> https://twitter.com/MtnMapper/status/1034431370867761152
>
> How can we get this projection into QGIS? Seems it is in proj4 
> already: 
> https://github.com/OSGeo/proj.4/commit/b2fe2277e225d3e666cdcce92182595bb547cb0c
>
> Would be nice to show that QGIS is more agile than other commercial 
> competitors ;-)
>
> Andreas
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From kreve at sdfe.dk  Tue Aug 28 08:21:05 2018
From: kreve at sdfe.dk (Kristian Evers)
Date: Tue, 28 Aug 2018 15:21:05 +0000
Subject: [QGIS-Developer] EqualEarth projection support in QGIS?
In-Reply-To: <3e4d2852-f632-4148-1d41-cb7f6cb25389@carto.net>
References: <e49fa8b1-3398-2739-ec66-ede517cbb218@carto.net>
 <3e4d2852-f632-4148-1d41-cb7f6cb25389@carto.net>
Message-ID: <F83E3683-B9C8-4A53-958A-3DF014424B94@sdfe.dk>

Andreas,

Given a recent development version of PROJ you should be able to use the projection in QGIS. Just add a custom CRS with the setup string “+proj=eqearth”. 

For those who don’t want to build PROJ themselves will only have to wait a few weeks until PROJ 5.2.0 is released and picked up by the packagers :-)

/Kristian

> On 28 Aug 2018, at 16:25, Andreas Neumann <a.neumann at carto.net> wrote:
> 
> If i had the latest proj4 compiled on my machine - would I have this new "EqualEarth" projection automatically available in QGIS, or is there something that needs to be added in QGIS as well?
> 
> Andreas
> 
> 
> Am 28.08.2018 um 16:18 schrieb Andreas Neumann:
>> Hi,
>> 
>> Twitter is full of mentions of the "EqualEarth" projection. It is implemented in many web frameworks now and even appears on TV --> https://twitter.com/MtnMapper/status/1034431370867761152
>> 
>> How can we get this projection into QGIS? Seems it is in proj4 already: https://github.com/OSGeo/proj.4/commit/b2fe2277e225d3e666cdcce92182595bb547cb0c
>> 
>> Would be nice to show that QGIS is more agile than other commercial competitors ;-)
>> 
>> Andreas
>> 
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From a.neumann at carto.net  Tue Aug 28 11:21:49 2018
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 28 Aug 2018 20:21:49 +0200
Subject: [QGIS-Developer] EqualEarth projection support in QGIS?
In-Reply-To: <F83E3683-B9C8-4A53-958A-3DF014424B94@sdfe.dk>
References: <e49fa8b1-3398-2739-ec66-ede517cbb218@carto.net>
 <3e4d2852-f632-4148-1d41-cb7f6cb25389@carto.net>
 <F83E3683-B9C8-4A53-958A-3DF014424B94@sdfe.dk>
Message-ID: <e59b6c65-4b69-5e70-8a55-b5b88deef227@carto.net>

Hi Kristian,

Thanks for the information/help.

I compiled proj from github (5.2) and confirmed that QGIS is compiled 
against it in the about dialogue.

However, when trying to add a custom projection (see screenshot below)



it complains that the definition is not valid.

Any idea what might be wrong?

Thanks again,
Andreas


Am 28.08.2018 um 17:21 schrieb Kristian Evers:
> Andreas,
>
> Given a recent development version of PROJ you should be able to use the projection in QGIS. Just add a custom CRS with the setup string “+proj=eqearth”.
>
> For those who don’t want to build PROJ themselves will only have to wait a few weeks until PROJ 5.2.0 is released and picked up by the packagers :-)
>
> /Kristian
>
>> On 28 Aug 2018, at 16:25, Andreas Neumann<a.neumann at carto.net>  wrote:
>>
>> If i had the latest proj4 compiled on my machine - would I have this new "EqualEarth" projection automatically available in QGIS, or is there something that needs to be added in QGIS as well?
>>
>> Andreas
>>
>>
>> Am 28.08.2018 um 16:18 schrieb Andreas Neumann:
>>> Hi,
>>>
>>> Twitter is full of mentions of the "EqualEarth" projection. It is implemented in many web frameworks now and even appears on TV -->https://twitter.com/MtnMapper/status/1034431370867761152
>>>
>>> How can we get this projection into QGIS? Seems it is in proj4 already:https://github.com/OSGeo/proj.4/commit/b2fe2277e225d3e666cdcce92182595bb547cb0c
>>>
>>> Would be nice to show that QGIS is more agile than other commercial competitors ;-)
>>>
>>> Andreas
>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180828/6730fa5e/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dpgjlflomogindlb.png
Type: image/png
Size: 38280 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180828/6730fa5e/attachment-0001.png>

From even.rouault at spatialys.com  Tue Aug 28 11:26:13 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 28 Aug 2018 20:26:13 +0200
Subject: [QGIS-Developer] EqualEarth projection support in QGIS?
In-Reply-To: <e59b6c65-4b69-5e70-8a55-b5b88deef227@carto.net>
References: <e49fa8b1-3398-2739-ec66-ede517cbb218@carto.net>
 <F83E3683-B9C8-4A53-958A-3DF014424B94@sdfe.dk>
 <e59b6c65-4b69-5e70-8a55-b5b88deef227@carto.net>
Message-ID: <64005257.RxT62JY7Il@even-i700>

On mardi 28 août 2018 20:21:49 CEST Andreas Neumann wrote:
> Hi Kristian,
> 
> Thanks for the information/help.
> 
> I compiled proj from github (5.2) and confirmed that QGIS is compiled
> against it in the about dialogue.
> 
> However, when trying to add a custom projection (see screenshot below)
> 
> 
> 
> it complains that the definition is not valid.

try "+proj=eqearth +wktext" as this projection isn't known by GDAL

> 
> Any idea what might be wrong?
> 
> Thanks again,
> Andreas
> 
> Am 28.08.2018 um 17:21 schrieb Kristian Evers:
> > Andreas,
> > 
> > Given a recent development version of PROJ you should be able to use the
> > projection in QGIS. Just add a custom CRS with the setup string
> > “+proj=eqearth”.
> > 
> > For those who don’t want to build PROJ themselves will only have to wait a
> > few weeks until PROJ 5.2.0 is released and picked up by the packagers :-)
> > 
> > /Kristian
> > 
> >> On 28 Aug 2018, at 16:25, Andreas Neumann<a.neumann at carto.net>  wrote:
> >> 
> >> If i had the latest proj4 compiled on my machine - would I have this new
> >> "EqualEarth" projection automatically available in QGIS, or is there
> >> something that needs to be added in QGIS as well?
> >> 
> >> Andreas
> >> 
> >> Am 28.08.2018 um 16:18 schrieb Andreas Neumann:
> >>> Hi,
> >>> 
> >>> Twitter is full of mentions of the "EqualEarth" projection. It is
> >>> implemented in many web frameworks now and even appears on TV
> >>> -->https://twitter.com/MtnMapper/status/1034431370867761152
> >>> 
> >>> How can we get this projection into QGIS? Seems it is in proj4
> >>> already:https://github.com/OSGeo/proj.4/commit/b2fe2277e225d3e666cdcce9
> >>> 2182595bb547cb0c
> >>> 
> >>> Would be nice to show that QGIS is more agile than other commercial
> >>> competitors ;-)
> >>> 
> >>> Andreas
> >>> 
> >>> _______________________________________________
> >>> QGIS-Developer mailing list
> >>> QGIS-Developer at lists.osgeo.org
> >>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> 
> >> _______________________________________________
> >> QGIS-Developer mailing list
> >> QGIS-Developer at lists.osgeo.org
> >> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From a.neumann at carto.net  Tue Aug 28 11:44:37 2018
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 28 Aug 2018 20:44:37 +0200
Subject: [QGIS-Developer] EqualEarth projection support in QGIS?
In-Reply-To: <64005257.RxT62JY7Il@even-i700>
References: <e49fa8b1-3398-2739-ec66-ede517cbb218@carto.net>
 <F83E3683-B9C8-4A53-958A-3DF014424B94@sdfe.dk>
 <e59b6c65-4b69-5e70-8a55-b5b88deef227@carto.net>
 <64005257.RxT62JY7Il@even-i700>
Message-ID: <b0335034-2d66-ecfb-f264-9571647f1c04@carto.net>

Thanks - this seems to work!

Many thanks to both Kristian and Evan!

Andreas


Am 28.08.2018 um 20:26 schrieb Even Rouault:
> On mardi 28 août 2018 20:21:49 CEST Andreas Neumann wrote:
>> Hi Kristian,
>>
>> Thanks for the information/help.
>>
>> I compiled proj from github (5.2) and confirmed that QGIS is compiled
>> against it in the about dialogue.
>>
>> However, when trying to add a custom projection (see screenshot below)
>>
>>
>>
>> it complains that the definition is not valid.
> try "+proj=eqearth +wktext" as this projection isn't known by GDAL
>
>> Any idea what might be wrong?
>>
>> Thanks again,
>> Andreas
>>
>> Am 28.08.2018 um 17:21 schrieb Kristian Evers:
>>> Andreas,
>>>
>>> Given a recent development version of PROJ you should be able to use the
>>> projection in QGIS. Just add a custom CRS with the setup string
>>> “+proj=eqearth”.
>>>
>>> For those who don’t want to build PROJ themselves will only have to wait a
>>> few weeks until PROJ 5.2.0 is released and picked up by the packagers :-)
>>>
>>> /Kristian
>>>
>>>> On 28 Aug 2018, at 16:25, Andreas Neumann<a.neumann at carto.net>  wrote:
>>>>
>>>> If i had the latest proj4 compiled on my machine - would I have this new
>>>> "EqualEarth" projection automatically available in QGIS, or is there
>>>> something that needs to be added in QGIS as well?
>>>>
>>>> Andreas
>>>>
>>>> Am 28.08.2018 um 16:18 schrieb Andreas Neumann:
>>>>> Hi,
>>>>>
>>>>> Twitter is full of mentions of the "EqualEarth" projection. It is
>>>>> implemented in many web frameworks now and even appears on TV
>>>>> -->https://twitter.com/MtnMapper/status/1034431370867761152
>>>>>
>>>>> How can we get this projection into QGIS? Seems it is in proj4
>>>>> already:https://github.com/OSGeo/proj.4/commit/b2fe2277e225d3e666cdcce9
>>>>> 2182595bb547cb0c
>>>>>
>>>>> Would be nice to show that QGIS is more agile than other commercial
>>>>> competitors ;-)
>>>>>
>>>>> Andreas
>>>>>
>>>>> _______________________________________________
>>>>> QGIS-Developer mailing list
>>>>> QGIS-Developer at lists.osgeo.org
>>>>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> _______________________________________________
>>>> QGIS-Developer mailing list
>>>> QGIS-Developer at lists.osgeo.org
>>>> List info:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>> Unsubscribe:https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


From a.neumann at carto.net  Tue Aug 28 12:31:58 2018
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue, 28 Aug 2018 21:31:58 +0200
Subject: [QGIS-Developer] Disappearing -180 / 180 longitude grid lines on
	certain zoom levels
Message-ID: <6da490ff-e792-af49-7bf3-f270b81705d1@carto.net>

Hi again,

For some time already I noticed that, depending on the zoom level, the 
-180 / 180 degree grid lines appear / disappear in QGIS. This is 
unrelated to the EqualEarth projection just discussed and also appears 
on other world projections, like the Robinson projection.

Here is the testfile I used with world (countries) and gridlines: 
http://www.carto.net/neumann/temp/gridlines.gpkg

Can you reproduce this behaviour?

Any idea why this happens and how this could be fixed?

Thanks,

Andreas



From adenaculture at gmail.com  Tue Aug 28 12:45:21 2018
From: adenaculture at gmail.com (C Hamilton)
Date: Tue, 28 Aug 2018 15:45:21 -0400
Subject: [QGIS-Developer] Disappearing -180 / 180 longitude grid lines
 on certain zoom levels
In-Reply-To: <6da490ff-e792-af49-7bf3-f270b81705d1@carto.net>
References: <6da490ff-e792-af49-7bf3-f270b81705d1@carto.net>
Message-ID: <CABPxTTp2qXjD+8gD+mDZ6-zr8ANotA0s+BsZ9cYykdU-XnYZTg@mail.gmail.com>

With EPSG:4326 it does not seem to happen, but I tried EPSG:3857 and the
-180,180 grid lines do appear and disappear at different zoom levels. I
also confirm this with the Robinson projection with the addition that the
-90, 90 degree latitude lines also appear and disappear.

Calvin

On Tue, Aug 28, 2018 at 3:31 PM, Andreas Neumann <a.neumann at carto.net>
wrote:

> Hi again,
>
> For some time already I noticed that, depending on the zoom level, the
> -180 / 180 degree grid lines appear / disappear in QGIS. This is unrelated
> to the EqualEarth projection just discussed and also appears on other world
> projections, like the Robinson projection.
>
> Here is the testfile I used with world (countries) and gridlines:
> http://www.carto.net/neumann/temp/gridlines.gpkg
>
> Can you reproduce this behaviour?
>
> Any idea why this happens and how this could be fixed?
>
> Thanks,
>
> Andreas
>
>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180828/69b1aee2/attachment.html>

From adenaculture at gmail.com  Tue Aug 28 13:03:22 2018
From: adenaculture at gmail.com (C Hamilton)
Date: Tue, 28 Aug 2018 16:03:22 -0400
Subject: [QGIS-Developer] Processing Feature Sink Questions
Message-ID: <CABPxTTosAHb5GxVpkiGrMHSd0uMVRS24sH37sDgDXfNqoeFPVQ@mail.gmail.com>

I am working on a processing routine that can take a source that
potentially has points, lines and polygons. I define 3 feature sinks for
the 3 geometries and they are optional. This example is for the points.

        self.addParameter(
            QgsProcessingParameterFeatureSink(
                self.PrmPointOutputLayer,
                tr('Output point layer'),
                optional=True)
            )

1) How doe I know in the processAlgorithm whether the user has this set a
feature sink to "Skip Output"?

2) I really don't know whether I have points, lines, and/or polygons until
I process the file and from the 3 feature sinks I just add the data to the
appropriate feature sink as I receive it . How do a get a count of the
number of features once I have processed the file from sinkPt or dest_id_pt?

        (sinkPt, dest_id_pt) = self.parameterAsSink(parameters,
            self.PrmPointOutputLayer, context, fields,
            QgsWkbTypes.Point, epsg4326)

"sinkPt" seems to only have the ability to add features and not count them.

3) I see to reason to return a layer to QGIS if it has no data which is the
reason to check the feature count. In the processAlgorithm return statement
do I only return those layers that have data?

        return {
            self.PrmPointOutputLayer: dest_id_pt,
            self.PrmLineOutputLayer: dest_id_line,
            self.PrmPolygonOutputLayer: dest_id_poly
            }

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180828/e115646d/attachment.html>

From even.rouault at spatialys.com  Tue Aug 28 13:19:47 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 28 Aug 2018 22:19:47 +0200
Subject: [QGIS-Developer] Disappearing -180 / 180 longitude grid lines
	on certain zoom levels
In-Reply-To: <CABPxTTp2qXjD+8gD+mDZ6-zr8ANotA0s+BsZ9cYykdU-XnYZTg@mail.gmail.com>
References: <6da490ff-e792-af49-7bf3-f270b81705d1@carto.net>
 <CABPxTTp2qXjD+8gD+mDZ6-zr8ANotA0s+BsZ9cYykdU-XnYZTg@mail.gmail.com>
Message-ID: <9745167.pVv86hFlvT@even-i700>

Yes, seems restricted to reprojection cases

This seems to be an issue with the spatial filter issued to OGR

At the zooms where the lines disappear, there are requests like:

Thread 23 "Thread (pooled)" hit Breakpoint 2, OGR_L_SetSpatialFilterRect 
(hLayer=0x7f81180c90a0, dfMinX=-179.79163612932865, 
dfMinY=-69.446164378986353, dfMaxX=179.90530755284408, 
dfMaxY=78.959077253477474) at ogrlayer.cpp:1223

At the zooms where that work (even when zoomed in), there are like:

Thread 29 "Thread (pooled)" hit Breakpoint 2, OGR_L_SetSpatialFilterRect 
(hLayer=0x7f81180c90a0, dfMinX=-180, dfMinY=-90, dfMaxX=180, dfMaxY=90) at 
ogrlayer.cpp:1223


I haven't looked at the QGIS code that computes this bounding box, but from my 
experience with gdalwarp which has similar challenges, it is tricky to compute 
a source bounding box from a target bounding box, because sometimes the 
coordinates in the target bounding box do not correspond to a physical point 
on Eath, and hence inverse projection fails. So you have to resort to a grid 
sampling approach, but that makes you miss the exact boundaries. So probably 
that a band-aid fix would be to add some ad-hoc logic, like "if the source SRS 
is long/lat, and the computed extent is almost worldwide, then extend it to 
full worlwide (or do not emit a spatial filter at all)"

Even


> With EPSG:4326 it does not seem to happen, but I tried EPSG:3857 and the
> -180,180 grid lines do appear and disappear at different zoom levels. I
> also confirm this with the Robinson projection with the addition that the
> -90, 90 degree latitude lines also appear and disappear.
> 
> Calvin
> 
> On Tue, Aug 28, 2018 at 3:31 PM, Andreas Neumann <a.neumann at carto.net>
> 
> wrote:
> > Hi again,
> > 
> > For some time already I noticed that, depending on the zoom level, the
> > -180 / 180 degree grid lines appear / disappear in QGIS. This is unrelated
> > to the EqualEarth projection just discussed and also appears on other
> > world
> > projections, like the Robinson projection.
> > 
> > Here is the testfile I used with world (countries) and gridlines:
> > http://www.carto.net/neumann/temp/gridlines.gpkg
> > 
> > Can you reproduce this behaviour?
> > 
> > Any idea why this happens and how this could be fixed?
> > 
> > Thanks,
> > 
> > Andreas
> > 
> > 
> > _______________________________________________
> > QGIS-Developer mailing list
> > QGIS-Developer at lists.osgeo.org
> > List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> > Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From nyall.dawson at gmail.com  Tue Aug 28 21:19:31 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 29 Aug 2018 14:19:31 +1000
Subject: [QGIS-Developer] Processing Feature Sink Questions
In-Reply-To: <CABPxTTosAHb5GxVpkiGrMHSd0uMVRS24sH37sDgDXfNqoeFPVQ@mail.gmail.com>
References: <CABPxTTosAHb5GxVpkiGrMHSd0uMVRS24sH37sDgDXfNqoeFPVQ@mail.gmail.com>
Message-ID: <CAB28AsiksN-z0sLxdGTJoSJDOMp-wRHXA+pStB1T=a=AXctv2w@mail.gmail.com>

On Wed, 29 Aug 2018 at 06:03, C Hamilton <adenaculture at gmail.com> wrote:
>
> I am working on a processing routine that can take a source that potentially has points, lines and polygons. I define 3 feature sinks for the 3 geometries and they are optional. This example is for the points.
>
>         self.addParameter(
>             QgsProcessingParameterFeatureSink(
>                 self.PrmPointOutputLayer,
>                 tr('Output point layer'),
>                 optional=True)
>             )
>
> 1) How doe I know in the processAlgorithm whether the user has this set a feature sink to "Skip Output"?

Check if the result of your call to self.parameterAsSink is None. If
so, the parameter has been skipped.

> 2) I really don't know whether I have points, lines, and/or polygons until I process the file and from the 3 feature sinks I just add the data to the appropriate feature sink as I receive it . How do a get a count of the number of features once I have processed the file from sinkPt or dest_id_pt?
>
>         (sinkPt, dest_id_pt) = self.parameterAsSink(parameters,
>             self.PrmPointOutputLayer, context, fields,
>             QgsWkbTypes.Point, epsg4326)
>
> "sinkPt" seems to only have the ability to add features and not count them.

That's correct - sinks don't maintain a count of features. You'll need
to record the counts manually yourself, as you add each feature to the
sink.

> 3) I see to reason to return a layer to QGIS if it has no data which is the reason to check the feature count. In the processAlgorithm return statement do I only return those layers that have data?
>
>         return {
>             self.PrmPointOutputLayer: dest_id_pt,
>             self.PrmLineOutputLayer: dest_id_line,
>             self.PrmPolygonOutputLayer: dest_id_poly
>             }

You can omit these from the returned dictionary in this case - so if
you're recording the counts of features added to each sink, only add
entries to the results dictionary where the count is > 0.

Nyall

From nyall.dawson at gmail.com  Tue Aug 28 21:20:10 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 29 Aug 2018 14:20:10 +1000
Subject: [QGIS-Developer] "Filter on joined fields" and Virtual layers
 not working as expected
In-Reply-To: <1535456551071-0.post@n6.nabble.com>
References: <1535288685213-0.post@n6.nabble.com>
 <1535456551071-0.post@n6.nabble.com>
Message-ID: <CAB28Asjbz2_CwrDpM7TtwYc2aw6tfMx5RM9d9nYRzoxkTuo0hw@mail.gmail.com>

On Tue, 28 Aug 2018 at 21:42, andreaerdna <andreaerdna at libero.it> wrote:
>
> andreaerdna wrote
> > - the virtual layers show no feature when no filter string is set in the
> > Query builder, instead of showing all the features
>
> Better looking at the code, it seems to me that the bug is in
> QgsVirtualLayerFeatureIterator::QgsVirtualLayerFeatureIterator where
> "subset" is tested for Null instead that for Empty
>
>     QString subset = mSource->mSubset;
>     if ( !subset.isNull() )
>     {
>       wheres << subset;
>     }
>
> This leads to the insertion of an empty string in the "wheres" list, thus to
> the incorrect preparation of an SQL query with the WHERE clause without
> condition or the unneeded AND operator.

Great catch, fix merged.

Keep these coming -- they are very valuable fixes!

Nyall

From rdmailings at duif.net  Wed Aug 29 00:24:20 2018
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 29 Aug 2018 09:24:20 +0200
Subject: [QGIS-Developer] epel packages gdal and spatialite
Message-ID: <e63ea22b-17a3-5187-b6a4-ad4fcdf2f4fc@duif.net>

Hi DEVs,

Trying to compile QGIS on vanilla Centos 7.5 + EPEL I see that epel has
gdal 1.11.4 [0], also Spatialite's minimal version is not available there.

Anybody aware if there is (other then nobody did it) a reason epel does
not contain 2.x ?

Same with spatialite.

I'm not so much in rmp packaging, but with some help I can try?

Regards,

Richard Duivenvoorde


[0] https://centos.pkgs.org/7/epel-x86_64/gdal-1.11.4-3.el7.x86_64.rpm.html

From sebastic at xs4all.nl  Wed Aug 29 00:47:26 2018
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Wed, 29 Aug 2018 09:47:26 +0200
Subject: [QGIS-Developer] epel packages gdal and spatialite
In-Reply-To: <e63ea22b-17a3-5187-b6a4-ad4fcdf2f4fc@duif.net>
References: <e63ea22b-17a3-5187-b6a4-ad4fcdf2f4fc@duif.net>
Message-ID: <9a156df2-e1d2-d1b4-d46e-da4da258b851@xs4all.nl>

On 8/29/18 9:24 AM, Richard Duivenvoorde wrote:
> Anybody aware if there is (other then nobody did it) a reason epel does
> not contain 2.x ?

ABI breaking changes are should be avoided, see:

 https://fedoraproject.org/wiki/EPEL/GuidelinesAndPolicies#A_major_version_update

From rdmailings at duif.net  Wed Aug 29 01:36:58 2018
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 29 Aug 2018 10:36:58 +0200
Subject: [QGIS-Developer] epel packages gdal and spatialite
In-Reply-To: <9a156df2-e1d2-d1b4-d46e-da4da258b851@xs4all.nl>
References: <e63ea22b-17a3-5187-b6a4-ad4fcdf2f4fc@duif.net>
 <9a156df2-e1d2-d1b4-d46e-da4da258b851@xs4all.nl>
Message-ID: <211ed3f1-6978-f8d0-608c-ddeaf10de431@duif.net>

On 08/29/2018 09:47 AM, Sebastiaan Couwenberg wrote:
> On 8/29/18 9:24 AM, Richard Duivenvoorde wrote:
>> Anybody aware if there is (other then nobody did it) a reason epel does
>> not contain 2.x ?
> 
> ABI breaking changes are should be avoided, see:
> 
>  https://fedoraproject.org/wiki/EPEL/GuidelinesAndPolicies#A_major_version_update

Hi Bas,

Brrr.. I more or less understand, but RHEL7 released in 2015 (Centos 7.5
released in latest april), this means that 'we' are stuck with GDAL 1.x
for years...

While my idea of epel was that it not only provided some extra packages,
but also some more up to date packages... (like we do with
https://qgis.org/debian)

My reason for mocking about this is that I see RHEL and CentOS at a lot
of municipalities/governmental agencies etc.
And if we want for example QGIS-server to be installed in such places,
it should really be easier to install.

I do not think a separate repo would be a solution? EPEL is a
well/better established and trusted one.

I'm able to compile/install gdal myself, but am thinking here for the
more general public.

Regards,

Richard Duivenvoorde

ps and yes, I know Docker :-)

From carlo.bertelli at gmail.com  Wed Aug 29 02:03:11 2018
From: carlo.bertelli at gmail.com (Carlo A. Bertelli (Charta s.r.l.))
Date: Wed, 29 Aug 2018 11:03:11 +0200
Subject: [QGIS-Developer] epel packages gdal and spatialite
In-Reply-To: <211ed3f1-6978-f8d0-608c-ddeaf10de431@duif.net>
References: <e63ea22b-17a3-5187-b6a4-ad4fcdf2f4fc@duif.net>
 <9a156df2-e1d2-d1b4-d46e-da4da258b851@xs4all.nl>
 <211ed3f1-6978-f8d0-608c-ddeaf10de431@duif.net>
Message-ID: <CALc8-VJGN3KZNuP2vSpHpytBXa-bYqnkbHDy8p03+VBuRggQhw@mail.gmail.com>

Thank you, it's a very good idea. The Enterprise Linux Gis project (ELGIS -
https://wiki.osgeo.org/wiki/Enterprise_Linux_GIS) says:
>
> The ELGIS repository is not maintained any more, use EPEL.


I don't think there is a strong need for QGIS (Desktop), Centos and RH are
mainly used as servers, but everything that can enable a FOSS GIS
environment is beneficial to QGIS and is very well done. Obviously
RH/Centos is an excellent home for QGIS Server & friends.

If I may add something about this, I suggest to target an SDI
infrastructure, including GeoNode or something of the like, oriented
towards a geographic topic not only to show single choropletic layers.

Regards.
c


On Wed, Aug 29, 2018 at 10:36 AM, Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> On 08/29/2018 09:47 AM, Sebastiaan Couwenberg wrote:
> > On 8/29/18 9:24 AM, Richard Duivenvoorde wrote:
> >> Anybody aware if there is (other then nobody did it) a reason epel does
> >> not contain 2.x ?
> >
> > ABI breaking changes are should be avoided, see:
> >
> >  https://fedoraproject.org/wiki/EPEL/GuidelinesAndPolicies#A_major_
> version_update
>
> Hi Bas,
>
> Brrr.. I more or less understand, but RHEL7 released in 2015 (Centos 7.5
> released in latest april), this means that 'we' are stuck with GDAL 1.x
> for years...
>
> While my idea of epel was that it not only provided some extra packages,
> but also some more up to date packages... (like we do with
> https://qgis.org/debian)
>
> My reason for mocking about this is that I see RHEL and CentOS at a lot
> of municipalities/governmental agencies etc.
> And if we want for example QGIS-server to be installed in such places,
> it should really be easier to install.
>
> I do not think a separate repo would be a solution? EPEL is a
> well/better established and trusted one.
>
> I'm able to compile/install gdal myself, but am thinking here for the
> more general public.
>
> Regards,
>
> Richard Duivenvoorde
>
> ps and yes, I know Docker :-)
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>

-- 
--------------------------------------------------------------------------
Carlo A. Bertelli
   Charta servizi e sistemi per il territorio e la storia ambientale srl
          Dipendenze del palazzo Doria,
          vc. alla Chiesa della Maddalena 9/2 16124      Genova (Italy)
          tel./fax +39(0)10 2475439  +39 0108566195  mobile:+39 393 1590711
   e-mail: bertelli at chartasrl.eu      http://www.chartasrl.eu
--------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180829/4499c23e/attachment.html>

From carlo.bertelli at gmail.com  Wed Aug 29 02:18:53 2018
From: carlo.bertelli at gmail.com (Carlo A. Bertelli (Charta s.r.l.))
Date: Wed, 29 Aug 2018 11:18:53 +0200
Subject: [QGIS-Developer] epel packages gdal and spatialite
In-Reply-To: <CALc8-VJGN3KZNuP2vSpHpytBXa-bYqnkbHDy8p03+VBuRggQhw@mail.gmail.com>
References: <e63ea22b-17a3-5187-b6a4-ad4fcdf2f4fc@duif.net>
 <9a156df2-e1d2-d1b4-d46e-da4da258b851@xs4all.nl>
 <211ed3f1-6978-f8d0-608c-ddeaf10de431@duif.net>
 <CALc8-VJGN3KZNuP2vSpHpytBXa-bYqnkbHDy8p03+VBuRggQhw@mail.gmail.com>
Message-ID: <CALc8-V+rxgZ8Vxs+w348VSmtUOcmJh1kPyjX6qWrnO2=5kw+nQ@mail.gmail.com>

I should add that there are already other sites providing RPM packages for
GIS. One of them, very good and coordinate with EPEL (when possible, that's
the case about GDAL), is Postgresql's one (originally provided by Devrim
Gündüz who is still in the team).
See for example:
https://yum.postgresql.org/10/redhat/rhel-7-x86_64/repoview/
with all the provided packages (A..W).
It may be a good idea not to replicate this effort, but to supplement it
with missing packages.
Ciao
c

On Wed, Aug 29, 2018 at 11:03 AM, Carlo A. Bertelli (Charta s.r.l.) <
carlo.bertelli at gmail.com> wrote:

> Thank you, it's a very good idea. The Enterprise Linux Gis project (ELGIS
> - https://wiki.osgeo.org/wiki/Enterprise_Linux_GIS) says:
>>
>> The ELGIS repository is not maintained any more, use EPEL.
>
>
> I don't think there is a strong need for QGIS (Desktop), Centos and RH are
> mainly used as servers, but everything that can enable a FOSS GIS
> environment is beneficial to QGIS and is very well done. Obviously
> RH/Centos is an excellent home for QGIS Server & friends.
>
> If I may add something about this, I suggest to target an SDI
> infrastructure, including GeoNode or something of the like, oriented
> towards a geographic topic not only to show single choropletic layers.
>
> Regards.
> c
>
>
> On Wed, Aug 29, 2018 at 10:36 AM, Richard Duivenvoorde <
> rdmailings at duif.net> wrote:
>
>> On 08/29/2018 09:47 AM, Sebastiaan Couwenberg wrote:
>> > On 8/29/18 9:24 AM, Richard Duivenvoorde wrote:
>> >> Anybody aware if there is (other then nobody did it) a reason epel does
>> >> not contain 2.x ?
>> >
>> > ABI breaking changes are should be avoided, see:
>> >
>> >  https://fedoraproject.org/wiki/EPEL/GuidelinesAndPolicies#A_
>> major_version_update
>>
>> Hi Bas,
>>
>> Brrr.. I more or less understand, but RHEL7 released in 2015 (Centos 7.5
>> released in latest april), this means that 'we' are stuck with GDAL 1.x
>> for years...
>>
>> While my idea of epel was that it not only provided some extra packages,
>> but also some more up to date packages... (like we do with
>> https://qgis.org/debian)
>>
>> My reason for mocking about this is that I see RHEL and CentOS at a lot
>> of municipalities/governmental agencies etc.
>> And if we want for example QGIS-server to be installed in such places,
>> it should really be easier to install.
>>
>> I do not think a separate repo would be a solution? EPEL is a
>> well/better established and trusted one.
>>
>> I'm able to compile/install gdal myself, but am thinking here for the
>> more general public.
>>
>> Regards,
>>
>> Richard Duivenvoorde
>>
>> ps and yes, I know Docker :-)
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>
>
-- 
--------------------------------------------------------------------------
Carlo A. Bertelli
   Charta servizi e sistemi per il territorio e la storia ambientale srl
          Dipendenze del palazzo Doria,
          vc. alla Chiesa della Maddalena 9/2 16124      Genova (Italy)
          tel./fax +39(0)10 2475439  +39 0108566195  mobile:+39 393 1590711
   e-mail: bertelli at chartasrl.eu      http://www.chartasrl.eu
--------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180829/a6c2d8ee/attachment-0001.html>

From sebastic at xs4all.nl  Wed Aug 29 04:28:18 2018
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Wed, 29 Aug 2018 13:28:18 +0200
Subject: [QGIS-Developer] epel packages gdal and spatialite
In-Reply-To: <CALc8-V+rxgZ8Vxs+w348VSmtUOcmJh1kPyjX6qWrnO2=5kw+nQ@mail.gmail.com>
References: <e63ea22b-17a3-5187-b6a4-ad4fcdf2f4fc@duif.net>
 <9a156df2-e1d2-d1b4-d46e-da4da258b851@xs4all.nl>
 <211ed3f1-6978-f8d0-608c-ddeaf10de431@duif.net>
 <CALc8-VJGN3KZNuP2vSpHpytBXa-bYqnkbHDy8p03+VBuRggQhw@mail.gmail.com>
 <CALc8-V+rxgZ8Vxs+w348VSmtUOcmJh1kPyjX6qWrnO2=5kw+nQ@mail.gmail.com>
Message-ID: <e37ae2ce-b709-407b-8bc3-61178c0dea3d@xs4all.nl>

On 8/29/18 11:18 AM, Carlo A. Bertelli (Charta s.r.l.) wrote:
> I should add that there are already other sites providing RPM packages for
> GIS. One of them, very good and coordinate with EPEL (when possible, that's
> the case about GDAL), is Postgresql's one (originally provided by Devrim
> Gündüz who is still in the team).
> See for example:
> https://yum.postgresql.org/10/redhat/rhel-7-x86_64/repoview/
> with all the provided packages (A..W).
> It may be a good idea not to replicate this effort, but to supplement it
> with missing packages.

AFAIK, the packages in the PGDG repository are there because they're
dependencies of PostgreSQL and its extensions like PostGIS.

Adding dependencies for QGIS to that repositories doesn't sound like a
good idea to me. The goals of PGDG differ from those of QGIS.

If there is a need for newer version of the QGIS dependencies, than
those could be provided by the QGIS repository. Reviving a project like
ELGIS for RHEL 7 to suit the needs of QGIS users & developers seems like
a better idea.

> On Wed, Aug 29, 2018 at 11:03 AM, Carlo A. Bertelli (Charta s.r.l.) <
> carlo.bertelli at gmail.com> wrote:
> 
>> Thank you, it's a very good idea. The Enterprise Linux Gis project (ELGIS
>> - https://wiki.osgeo.org/wiki/Enterprise_Linux_GIS) says:
>>>
>>> The ELGIS repository is not maintained any more, use EPEL.
>>
>>
>> I don't think there is a strong need for QGIS (Desktop), Centos and RH are
>> mainly used as servers, but everything that can enable a FOSS GIS
>> environment is beneficial to QGIS and is very well done. Obviously
>> RH/Centos is an excellent home for QGIS Server & friends.
>>
>> If I may add something about this, I suggest to target an SDI
>> infrastructure, including GeoNode or something of the like, oriented
>> towards a geographic topic not only to show single choropletic layers.
>>
>> Regards.
>> c
>>
>>
>> On Wed, Aug 29, 2018 at 10:36 AM, Richard Duivenvoorde <
>> rdmailings at duif.net> wrote:
>>
>>> On 08/29/2018 09:47 AM, Sebastiaan Couwenberg wrote:
>>>> On 8/29/18 9:24 AM, Richard Duivenvoorde wrote:
>>>>> Anybody aware if there is (other then nobody did it) a reason epel does
>>>>> not contain 2.x ?
>>>>
>>>> ABI breaking changes are should be avoided, see:
>>>>
>>>>  https://fedoraproject.org/wiki/EPEL/GuidelinesAndPolicies#A_
>>> major_version_update
>>>
>>> Hi Bas,
>>>
>>> Brrr.. I more or less understand, but RHEL7 released in 2015 (Centos 7.5
>>> released in latest april), this means that 'we' are stuck with GDAL 1.x
>>> for years...
>>>
>>> While my idea of epel was that it not only provided some extra packages,
>>> but also some more up to date packages... (like we do with
>>> https://qgis.org/debian)
>>>
>>> My reason for mocking about this is that I see RHEL and CentOS at a lot
>>> of municipalities/governmental agencies etc.
>>> And if we want for example QGIS-server to be installed in such places,
>>> it should really be easier to install.
>>>
>>> I do not think a separate repo would be a solution? EPEL is a
>>> well/better established and trusted one.
>>>
>>> I'm able to compile/install gdal myself, but am thinking here for the
>>> more general public.
>>>
>>> Regards,
>>>
>>> Richard Duivenvoorde
>>>
>>> ps and yes, I know Docker :-)
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>
>>
>>
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


From tim at kartoza.com  Wed Aug 29 05:50:14 2018
From: tim at kartoza.com (Tim Sutton)
Date: Wed, 29 Aug 2018 15:50:14 +0300
Subject: [QGIS-Developer] Can't install QGIS after compile because of
 contributors.json
In-Reply-To: <1e3ce15a-7dc7-0210-1a67-a77894a4d72b@carto.net>
References: <fde2840e-68ac-e950-f887-5809d2613142@carto.net>
 <CAMtDFL+R7iUue4gwX0NwnBsqQwrh6jtEFUyyhPU9vUh_R2C-mw@mail.gmail.com>
 <dfdbff86-ef60-4c3b-b41d-7e4f0637c09f@carto.net>
 <1641d959-378a-d1d2-539f-f32318c5cd7f@duif.net>
 <5F6BE8C4-1CCB-47D5-9D68-95B404E3F68B@kartoza.com>
 <1e3ce15a-7dc7-0210-1a67-a77894a4d72b@carto.net>
Message-ID: <CBACD32A-E7F6-4B2B-93DA-4D032E45345E@kartoza.com>

HI

> On 28 Aug 2018, at 00:04, Andreas Neumann <a.neumann at carto.net> wrote:
> 
> Hi Tim,
> 
> The developer map in the about box works fine. I don't see anything wrong. What would be the problem?
> 
> 

Well it was more that I was not able to test it to see that it still works well.


> Thanks for the fixes. One can even learn from the styling of this easter egg ;-) like the continuous updates, shadow effects, etc.
> 
> And of course the funny details of the hackfests ;-)
> 
> 

:-)

Regards

Tim

> Andreas
> 
> Am 27.08.2018 um 22:50 schrieb Tim Sutton:
>> I merged Mathieu’s fix (thanks!) but I think there may still be an issue with the developer map in the about box. I can’t test this on Mac since we don’t get that tab in Mac so could someone on Linux confirm?
>> 
>> @Richard for Easter egg details see
>> 
>> https://github.com/qgis/QGIS/pull/7714 <https://github.com/qgis/QGIS/pull/7714>
>> 
>> Regards
>> 
>> Tim Sutton
>> Co-founder of Kartoza
>> Ex-QGIS project chairman
>> 
>> On 27 Aug 2018, at 22:31, Richard Duivenvoorde <rdmailings at duif.net <mailto:rdmailings at duif.net>> wrote:
>> 
>>> On 08/27/2018 07:58 PM, Andreas Neumann wrote:
>>>> Eager to try out the new easter eggs ;-)
>>> 
>>> Tell us, Tell us :-)
>>> 
>>> Richard
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>> 
>> _______________________________________________
>> QGIS-Developer mailing list
>> QGIS-Developer at lists.osgeo.org <mailto:QGIS-Developer at lists.osgeo.org>
>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer <https://lists.osgeo.org/mailman/listinfo/qgis-developer>
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer

—








Tim Sutton

Co-founder: Kartoza
Ex Project chair: QGIS.org

Visit http://kartoza.com <http://kartoza.com/> to find out about open source:

Desktop GIS programming services
Geospatial web development
GIS Training
Consulting Services

Skype: timlinux
IRC: timlinux on #qgis at freenode.net

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180829/5671ce2e/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: KartozaNewLogoThumbnail.jpg
Type: image/jpeg
Size: 6122 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180829/5671ce2e/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 488 bytes
Desc: Message signed with OpenPGP
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180829/5671ce2e/attachment-0001.sig>

From adenaculture at gmail.com  Wed Aug 29 07:01:45 2018
From: adenaculture at gmail.com (C Hamilton)
Date: Wed, 29 Aug 2018 10:01:45 -0400
Subject: [QGIS-Developer] Processing Feature Sink Questions
In-Reply-To: <CAB28AsiksN-z0sLxdGTJoSJDOMp-wRHXA+pStB1T=a=AXctv2w@mail.gmail.com>
References: <CABPxTTosAHb5GxVpkiGrMHSd0uMVRS24sH37sDgDXfNqoeFPVQ@mail.gmail.com>
 <CAB28AsiksN-z0sLxdGTJoSJDOMp-wRHXA+pStB1T=a=AXctv2w@mail.gmail.com>
Message-ID: <CABPxTToL7hDF=ugw5Z2RxTMuLy-RrCSMzykqwq-_fBRK0MJz2A@mail.gmail.com>

 > 3) I see no reason to return a layer to QGIS if it has no data which is
the reason to check the feature count. In the processAlgorithm return
statement do I only return those layers that have data?
>
>         return {
>             self.PrmPointOutputLayer: dest_id_pt,
>             self.PrmLineOutputLayer: dest_id_line,
>             self.PrmPolygonOutputLayer: dest_id_poly
>             }

> You can omit these from the returned dictionary in this case - so if
> you're recording the counts of features added to each sink, only add
> entries to the results dictionary where the count is > 0.

This almost did what was needed. It looks like calling

         (sinkPt, dest_id_pt) = self.parameterAsSink(parameters,
             self.PrmPointOutputLayer, context, fields,
             QgsWkbTypes.Point, epsg4326)

is what determines what layers are added to QGIS and not the dictionary I
return. I guess I'm going to need to call parameterAsSink the first time I
have data to be added. This is going to make the code more messy, but I
don't know another way to prevent empty layers from being added.

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180829/ccad1356/attachment.html>

From noreply at qgis.org  Wed Aug 29 10:41:35 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Wed, 29 Aug 2018 17:41:35 -0000
Subject: [QGIS-Developer] Plugin [1391] Asistente LADM_COL approval
	notification.
Message-ID: <20180829174135.17643.67170@2c6504964296>


Plugin Asistente LADM_COL approval by pcav.
The plugin version "[1391] Asistente LADM_COL 0.7.0 Experimental" is now approved
Link: http://plugins.qgis.org/plugins/asistente_ladm_col/

From noreply at qgis.org  Wed Aug 29 10:41:51 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Wed, 29 Aug 2018 17:41:51 -0000
Subject: [QGIS-Developer] Plugin [725] beePen approval notification.
Message-ID: <20180829174151.17641.30515@2c6504964296>


Plugin beePen approval by pcav.
The plugin version "[725] beePen 0.2.1" is now approved
Link: http://plugins.qgis.org/plugins/beePen/

From noreply at qgis.org  Wed Aug 29 10:42:04 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Wed, 29 Aug 2018 17:42:04 -0000
Subject: [QGIS-Developer] Plugin [792] EqHazard approval notification.
Message-ID: <20180829174204.17641.3761@2c6504964296>


Plugin EqHazard approval by pcav.
The plugin version "[792] EqHazard 0.1.1" is now approved
Link: http://plugins.qgis.org/plugins/EqHazard/

From a.neumann at carto.net  Wed Aug 29 12:50:25 2018
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed, 29 Aug 2018 21:50:25 +0200
Subject: [QGIS-Developer] Disappearing -180 / 180 longitude grid lines
 on certain zoom levels
In-Reply-To: <9745167.pVv86hFlvT@even-i700>
References: <6da490ff-e792-af49-7bf3-f270b81705d1@carto.net>
 <CABPxTTp2qXjD+8gD+mDZ6-zr8ANotA0s+BsZ9cYykdU-XnYZTg@mail.gmail.com>
 <9745167.pVv86hFlvT@even-i700>
Message-ID: <42ff9b7a-d589-c540-b873-74b5970bd878@carto.net>

Hi Even,

Thank you very much for the detailed analysis of the spatial filter 
issue we have here, that causes the disappearing grid lines.

Would you be interested to work on fixing this issue on our bug fixing 
program? This problem annoyed me for quite some time. And it appears on 
different world projections.

Thanks,

Andreas


Am 28.08.2018 um 22:19 schrieb Even Rouault:
> Yes, seems restricted to reprojection cases
>
> This seems to be an issue with the spatial filter issued to OGR
>
> At the zooms where the lines disappear, there are requests like:
>
> Thread 23 "Thread (pooled)" hit Breakpoint 2, OGR_L_SetSpatialFilterRect
> (hLayer=0x7f81180c90a0, dfMinX=-179.79163612932865,
> dfMinY=-69.446164378986353, dfMaxX=179.90530755284408,
> dfMaxY=78.959077253477474) at ogrlayer.cpp:1223
>
> At the zooms where that work (even when zoomed in), there are like:
>
> Thread 29 "Thread (pooled)" hit Breakpoint 2, OGR_L_SetSpatialFilterRect
> (hLayer=0x7f81180c90a0, dfMinX=-180, dfMinY=-90, dfMaxX=180, dfMaxY=90) at
> ogrlayer.cpp:1223
>
>
> I haven't looked at the QGIS code that computes this bounding box, but from my
> experience with gdalwarp which has similar challenges, it is tricky to compute
> a source bounding box from a target bounding box, because sometimes the
> coordinates in the target bounding box do not correspond to a physical point
> on Eath, and hence inverse projection fails. So you have to resort to a grid
> sampling approach, but that makes you miss the exact boundaries. So probably
> that a band-aid fix would be to add some ad-hoc logic, like "if the source SRS
> is long/lat, and the computed extent is almost worldwide, then extend it to
> full worlwide (or do not emit a spatial filter at all)"
>
> Even
>
>
>> With EPSG:4326 it does not seem to happen, but I tried EPSG:3857 and the
>> -180,180 grid lines do appear and disappear at different zoom levels. I
>> also confirm this with the Robinson projection with the addition that the
>> -90, 90 degree latitude lines also appear and disappear.
>>
>> Calvin
>>
>> On Tue, Aug 28, 2018 at 3:31 PM, Andreas Neumann <a.neumann at carto.net>
>>
>> wrote:
>>> Hi again,
>>>
>>> For some time already I noticed that, depending on the zoom level, the
>>> -180 / 180 degree grid lines appear / disappear in QGIS. This is unrelated
>>> to the EqualEarth projection just discussed and also appears on other
>>> world
>>> projections, like the Robinson projection.
>>>
>>> Here is the testfile I used with world (countries) and gridlines:
>>> http://www.carto.net/neumann/temp/gridlines.gpkg
>>>
>>> Can you reproduce this behaviour?
>>>
>>> Any idea why this happens and how this could be fixed?
>>>
>>> Thanks,
>>>
>>> Andreas
>>>
>>>
>>> _______________________________________________
>>> QGIS-Developer mailing list
>>> QGIS-Developer at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>


From even.rouault at spatialys.com  Wed Aug 29 12:58:03 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 29 Aug 2018 21:58:03 +0200
Subject: [QGIS-Developer] Disappearing -180 / 180 longitude grid lines
	on certain zoom levels
In-Reply-To: <42ff9b7a-d589-c540-b873-74b5970bd878@carto.net>
References: <6da490ff-e792-af49-7bf3-f270b81705d1@carto.net>
 <9745167.pVv86hFlvT@even-i700>
 <42ff9b7a-d589-c540-b873-74b5970bd878@carto.net>
Message-ID: <25620401.Dp6MOEh3sV@even-i700>

On mercredi 29 août 2018 21:50:25 CEST Andreas Neumann wrote:
> Hi Even,
> 
> Thank you very much for the detailed analysis of the spatial filter
> issue we have here, that causes the disappearing grid lines.
> 
> Would you be interested to work on fixing this issue on our bug fixing
> program? This problem annoyed me for quite some time. And it appears on
> different world projections.

I might have a look at this, if nobody else more familiar with the relevant 
code looks at it. Is there a ticket filed about that ?

Even

> 
> Thanks,
> 
> Andreas
> 
> Am 28.08.2018 um 22:19 schrieb Even Rouault:
> > Yes, seems restricted to reprojection cases
> > 
> > This seems to be an issue with the spatial filter issued to OGR
> > 
> > At the zooms where the lines disappear, there are requests like:
> > 
> > Thread 23 "Thread (pooled)" hit Breakpoint 2, OGR_L_SetSpatialFilterRect
> > (hLayer=0x7f81180c90a0, dfMinX=-179.79163612932865,
> > dfMinY=-69.446164378986353, dfMaxX=179.90530755284408,
> > dfMaxY=78.959077253477474) at ogrlayer.cpp:1223
> > 
> > At the zooms where that work (even when zoomed in), there are like:
> > 
> > Thread 29 "Thread (pooled)" hit Breakpoint 2, OGR_L_SetSpatialFilterRect
> > (hLayer=0x7f81180c90a0, dfMinX=-180, dfMinY=-90, dfMaxX=180, dfMaxY=90) at
> > ogrlayer.cpp:1223
> > 
> > 
> > I haven't looked at the QGIS code that computes this bounding box, but
> > from my experience with gdalwarp which has similar challenges, it is
> > tricky to compute a source bounding box from a target bounding box,
> > because sometimes the coordinates in the target bounding box do not
> > correspond to a physical point on Eath, and hence inverse projection
> > fails. So you have to resort to a grid sampling approach, but that makes
> > you miss the exact boundaries. So probably that a band-aid fix would be
> > to add some ad-hoc logic, like "if the source SRS is long/lat, and the
> > computed extent is almost worldwide, then extend it to full worlwide (or
> > do not emit a spatial filter at all)"
> > 
> > Even
> > 
> >> With EPSG:4326 it does not seem to happen, but I tried EPSG:3857 and the
> >> -180,180 grid lines do appear and disappear at different zoom levels. I
> >> also confirm this with the Robinson projection with the addition that the
> >> -90, 90 degree latitude lines also appear and disappear.
> >> 
> >> Calvin
> >> 
> >> On Tue, Aug 28, 2018 at 3:31 PM, Andreas Neumann <a.neumann at carto.net>
> >> 
> >> wrote:
> >>> Hi again,
> >>> 
> >>> For some time already I noticed that, depending on the zoom level, the
> >>> -180 / 180 degree grid lines appear / disappear in QGIS. This is
> >>> unrelated
> >>> to the EqualEarth projection just discussed and also appears on other
> >>> world
> >>> projections, like the Robinson projection.
> >>> 
> >>> Here is the testfile I used with world (countries) and gridlines:
> >>> http://www.carto.net/neumann/temp/gridlines.gpkg
> >>> 
> >>> Can you reproduce this behaviour?
> >>> 
> >>> Any idea why this happens and how this could be fixed?
> >>> 
> >>> Thanks,
> >>> 
> >>> Andreas
> >>> 
> >>> 
> >>> _______________________________________________
> >>> QGIS-Developer mailing list
> >>> QGIS-Developer at lists.osgeo.org
> >>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> >>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From nyall.dawson at gmail.com  Wed Aug 29 15:50:27 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 30 Aug 2018 08:50:27 +1000
Subject: [QGIS-Developer] Processing Feature Sink Questions
In-Reply-To: <CABPxTToL7hDF=ugw5Z2RxTMuLy-RrCSMzykqwq-_fBRK0MJz2A@mail.gmail.com>
References: <CABPxTTosAHb5GxVpkiGrMHSd0uMVRS24sH37sDgDXfNqoeFPVQ@mail.gmail.com>
 <CAB28AsiksN-z0sLxdGTJoSJDOMp-wRHXA+pStB1T=a=AXctv2w@mail.gmail.com>
 <CABPxTToL7hDF=ugw5Z2RxTMuLy-RrCSMzykqwq-_fBRK0MJz2A@mail.gmail.com>
Message-ID: <CAB28AsiK6T=SghMoxZ+MnuFnwY7C=b1-A0aLnmS3a6Kt-9RtsA@mail.gmail.com>

On Thu, 30 Aug 2018 at 00:01, C Hamilton <adenaculture at gmail.com> wrote:
>
> > 3) I see no reason to return a layer to QGIS if it has no data which is the reason to check the feature count. In the processAlgorithm return statement do I only return those layers that have data?
> >
> >         return {
> >             self.PrmPointOutputLayer: dest_id_pt,
> >             self.PrmLineOutputLayer: dest_id_line,
> >             self.PrmPolygonOutputLayer: dest_id_poly
> >             }
>
> > You can omit these from the returned dictionary in this case - so if
> > you're recording the counts of features added to each sink, only add
> > entries to the results dictionary where the count is > 0.
>
> This almost did what was needed. It looks like calling
>
>          (sinkPt, dest_id_pt) = self.parameterAsSink(parameters,
>              self.PrmPointOutputLayer, context, fields,
>              QgsWkbTypes.Point, epsg4326)
>
> is what determines what layers are added to QGIS and not the dictionary I return. I guess I'm going to need to call parameterAsSink the first time I have data to be added. This is going to make the code more messy, but I don't know another way to prevent empty layers from being added.

Sorry - I gave bad advice. Test if the parameter value *itself* is None. i.e.

   if parameters[self.PrmPointOutputLayer] is None:
      # output as been skipped

For safety you may want to check if the parameter is in included in
the dictionary too - otherwise callers who just "leave out" the
parameter will cause an exception. So:

   if self.PrmPointOutputLayer not in parameters or
parameters[self.PrmPointOutputLayer] is None:
      # output as been skipped

Nyall

>
> Calvin
>

From rdmailings at duif.net  Thu Aug 30 01:36:13 2018
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 30 Aug 2018 10:36:13 +0200
Subject: [QGIS-Developer] Disappearing -180 / 180 longitude grid lines
 on certain zoom levels
In-Reply-To: <25620401.Dp6MOEh3sV@even-i700>
References: <6da490ff-e792-af49-7bf3-f270b81705d1@carto.net>
 <9745167.pVv86hFlvT@even-i700>
 <42ff9b7a-d589-c540-b873-74b5970bd878@carto.net>
 <25620401.Dp6MOEh3sV@even-i700>
Message-ID: <3fa5274f-f402-3c71-095f-9b464bd52aa1@duif.net>


Not sure if it is related, but  aren't these actually dateline related
issues? Would be cool to tackle the whole dateline issue too :-)

Maybe these are related (and having some test cases):

https://issues.qgis.org/issues/13380

https://issues.qgis.org/issues/19626
https://issues.qgis.org/issues/597

In the latter there is a link to the grass 'solution'.
I had a short look into it, my feeling was that you use 'virtual' worlds
on both sides of the dateline to be able to paint the right lines.
If you then show them (like googlemaps does when you zoom out a lot), OR
cut them out to only show one world is up to you. Though I'm not sure
how to cut out a not rectangulare projection easy :-)

Regards,

Richard Duivenvoorde


On 08/29/2018 09:58 PM, Even Rouault wrote:
> On mercredi 29 août 2018 21:50:25 CEST Andreas Neumann wrote:
>> Hi Even,
>>
>> Thank you very much for the detailed analysis of the spatial filter
>> issue we have here, that causes the disappearing grid lines.
>>
>> Would you be interested to work on fixing this issue on our bug fixing
>> program? This problem annoyed me for quite some time. And it appears on
>> different world projections.
> 
> I might have a look at this, if nobody else more familiar with the relevant 
> code looks at it. Is there a ticket filed about that ?
> 
> Even
> 
>>
>> Thanks,
>>
>> Andreas
>>
>> Am 28.08.2018 um 22:19 schrieb Even Rouault:
>>> Yes, seems restricted to reprojection cases
>>>
>>> This seems to be an issue with the spatial filter issued to OGR
>>>
>>> At the zooms where the lines disappear, there are requests like:
>>>
>>> Thread 23 "Thread (pooled)" hit Breakpoint 2, OGR_L_SetSpatialFilterRect
>>> (hLayer=0x7f81180c90a0, dfMinX=-179.79163612932865,
>>> dfMinY=-69.446164378986353, dfMaxX=179.90530755284408,
>>> dfMaxY=78.959077253477474) at ogrlayer.cpp:1223
>>>
>>> At the zooms where that work (even when zoomed in), there are like:
>>>
>>> Thread 29 "Thread (pooled)" hit Breakpoint 2, OGR_L_SetSpatialFilterRect
>>> (hLayer=0x7f81180c90a0, dfMinX=-180, dfMinY=-90, dfMaxX=180, dfMaxY=90) at
>>> ogrlayer.cpp:1223
>>>
>>>
>>> I haven't looked at the QGIS code that computes this bounding box, but
>>> from my experience with gdalwarp which has similar challenges, it is
>>> tricky to compute a source bounding box from a target bounding box,
>>> because sometimes the coordinates in the target bounding box do not
>>> correspond to a physical point on Eath, and hence inverse projection
>>> fails. So you have to resort to a grid sampling approach, but that makes
>>> you miss the exact boundaries. So probably that a band-aid fix would be
>>> to add some ad-hoc logic, like "if the source SRS is long/lat, and the
>>> computed extent is almost worldwide, then extend it to full worlwide (or
>>> do not emit a spatial filter at all)"
>>>
>>> Even
>>>
>>>> With EPSG:4326 it does not seem to happen, but I tried EPSG:3857 and the
>>>> -180,180 grid lines do appear and disappear at different zoom levels. I
>>>> also confirm this with the Robinson projection with the addition that the
>>>> -90, 90 degree latitude lines also appear and disappear.
>>>>
>>>> Calvin
>>>>
>>>> On Tue, Aug 28, 2018 at 3:31 PM, Andreas Neumann <a.neumann at carto.net>
>>>>
>>>> wrote:
>>>>> Hi again,
>>>>>
>>>>> For some time already I noticed that, depending on the zoom level, the
>>>>> -180 / 180 degree grid lines appear / disappear in QGIS. This is
>>>>> unrelated
>>>>> to the EqualEarth projection just discussed and also appears on other
>>>>> world
>>>>> projections, like the Robinson projection.
>>>>>
>>>>> Here is the testfile I used with world (countries) and gridlines:
>>>>> http://www.carto.net/neumann/temp/gridlines.gpkg
>>>>>
>>>>> Can you reproduce this behaviour?
>>>>>
>>>>> Any idea why this happens and how this could be fixed?
>>>>>
>>>>> Thanks,
>>>>>
>>>>> Andreas
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> QGIS-Developer mailing list
>>>>> QGIS-Developer at lists.osgeo.org
>>>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
>>>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> 
> 


From delazj at gmail.com  Thu Aug 30 02:19:05 2018
From: delazj at gmail.com (DelazJ)
Date: Thu, 30 Aug 2018 11:19:05 +0200
Subject: [QGIS-Developer] Do we really need experimental and
 non-experimental plugins?
In-Reply-To: <a305792d-781c-c799-21ef-44425b7416ad@duif.net>
References: <1743799.lBYyfAdNfE@debian>
 <CAB28AsgcB23RRShmx0LVAH6vJHDOVLc+2E=mk64i3Z6VUj-jjg@mail.gmail.com>
 <c4f46610-d901-8656-d932-4b3f7d4db276@faunalia.it> <2133868.hXgt54eLhC@debian>
 <a305792d-781c-c799-21ef-44425b7416ad@duif.net>
Message-ID: <CAECJsSp-EU95YsxGUTZh37y2Zmf5eLQ7XeLsHJuJz+dn-tA1Eg@mail.gmail.com>

Hi,

Maybe I am late on this discussion. I agree that showing experimental
plugins by default and asking our base users to manage updates from
experimental to stable versions may not be a simple task, nor a desired one.
But what about showing experimental plugins by default when they are new
plugin ie, showing ALL NEW plugins, be it stable or experimental? I mean,
when you publish a plugin the first time, you may put it in an experimental
status so that users test it and help you fix major issues before an
official stable release. But as an experimental plugin, the number of
potential testers is really limited given that not all plugins devs have a
real place to inform users about their plugin (and if nobody knows that
your plugin exists, no one would test...).
Then when the plugin publishes its first stable version and it's installed,
experimental version notification is no more shown, unless the user checked
that option. (*no idea of the amount of work this requires*)

Btw I can see that there's a PR at https://github.com/qgis/QGIS/pull/7748
that plans to visually mark experimental plugins so testers would adopt it
knowledgeably.
I think this would also be a way to educate users about the need of
testers...

Regards,
Harrissou

Le mar. 28 août 2018 à 08:11, Richard Duivenvoorde <rdmailings at duif.net> a
écrit :

> On 08/27/2018 10:17 PM, Borys Jurgiel wrote:
> > Dnia poniedziałek, 27 sierpnia 2018 06:21:17 CEST Paolo Cavallini pisze:
> >> I agree with Nyall. Furthermore, I'm also -1 on showing deprecated
> >> plugins. These are mosty useless, sometimes dangerous. I ask to revert
> >> the change ASAP.
> >
> > Don't worry, it's still a PR (and there are no deprecated 3.x plugins
> yet ;)
> > Richard, do you want to defend this idea or shall we close the ticket? :)
>
> Mwa, I like simple things, so if people think this is simpler to handle,
> then forget my ticket :-)
>
> Richard
> _______________________________________________
> QGIS-Developer mailing list
> QGIS-Developer at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-developer
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180830/4fdaaeb6/attachment-0001.html>

From denis.rouzaud at gmail.com  Thu Aug 30 03:51:44 2018
From: denis.rouzaud at gmail.com (Denis Rouzaud)
Date: Thu, 30 Aug 2018 13:51:44 +0300
Subject: [QGIS-Developer] [PyQt] Multiple inheritance from custom
	widgets and uic
In-Reply-To: <CALuHMPD8mkg2zTtBfy5-8wModETwh_hTRJwVkLqjhOHO=gkdyw@mail.gmail.com>
References: <CALuHMPD8mkg2zTtBfy5-8wModETwh_hTRJwVkLqjhOHO=gkdyw@mail.gmail.com>
Message-ID: <CAMtsY+ZRZzN+1tUpvkP0wnraCVRHTu_XmDAG2N7Wq9V7fJ8Wpw@mail.gmail.com>

Hi Alexander,

(forwarding to qgis-dev list, as I think it should be also referenced there)

Here is the reply I got from Phil:

> I can confirm it is a bug, however the fix is non-trivial so it won't get
fixed quickly. The fundamental problem is that the code has the assumption
that all custom widgets will reside in the PyQt5 package hard-coded (but
even then it's not quite as simple as that).

He also wrote it's on his todo list in the next 3-4 weeks on that time, but
I don't think it has been solved.

Best wishes,
Denis

Le jeu. 30 août 2018 à 08:35, Alexander Bruy <alexander.bruy at gmail.com> a
écrit :

> Hi all,
>
> usually I use following code to create a form from the Qt Designer's .ui
> file dynamically
>
> from PyQt5 import uic
> FORM_CLASS, BASE_CLASS = uic.loadUiType('/path/to/ui/file.ui')
>
> class MyDialog(BASE_CLASS, FORM_CLASS):
>     def __init__(self, parent=None):
>         super(MyDialog, self).__init__(parent)
>         self.setupUi(self)
>
> and everything works fine.
>
> But seems this approach seems does not work with multiple inheritance.
> There is a custom dialog class (QDialog subclass with custom UI and some
> logic) available in the API library. I want to subclass this custom dialog
> and also apply my own UI to it. I tried following code
>
> from PyQt5 import uic
> from api.ui import CustomDialogBase
>
> FORM_CLASS, BASE_CLASS = uic.loadUiType('/path/to/ui/file.ui')
>
> class MyDialog(BASE_CLASS, CustomDialogBase, FORM_CLASS):
>     def __init__(self, parent=None):
>         super(MyDialog, self).__init__(parent)
>         self.setupUi(self)
>
> But this raises type error
>
> TypeError: Cannot create a consistent method resolution order (MRO)
> for bases QDialog, QgsOptionsDialogBase, Ui_OptionsDialog
>
> As I understand, this is because all classes have the same base class
> QDialog.
>
> Also I tried to specify only one parent class — custom dialog, as it is
> already subclassed from QDialog
>
> from PyQt5 import uic
> from api.ui import CustomDialogBase
>
> FORM_CLASS, BASE_CLASS = uic.loadUiType('/path/to/ui/file.ui')
>
> class MyDialog(CustomDialogBase, FORM_CLASS):
>     def __init__(self, parent=None):
>         super(MyDialog, self).__init__(parent)
>         self.setupUi(self)
>
> But this also does not work, with the error
>
> AttributeError: 'MyDialog' object has no attribute 'groupBox'
>
> As I understand, in this case issue is that FORM_CLASS is a QDialog
> subclass,
> not CustomDialogBase's subclass. After some searching I have found this
> thread
> https://riverbankcomputing.com/pipermail/pyqt/2017-October/039647.html.
> Am I right that currently the only way to solve my issue is to construct
> form from the compiled .ui file?
>
> Thanks
>
> --
> Alexander Bruy
> _______________________________________________
> PyQt mailing list    PyQt at riverbankcomputing.com
> https://www.riverbankcomputing.com/mailman/listinfo/pyqt

-- 

Denis Rouzaud
denis at opengis.ch  <denis at opengis.ch>
+41 76 370 21 22
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180830/a21c1e98/attachment.html>

From noreply at qgis.org  Thu Aug 30 04:33:06 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 30 Aug 2018 11:33:06 -0000
Subject: [QGIS-Developer] Plugin [1391] Asistente LADM_COL approval
	notification.
Message-ID: <20180830113306.27757.4353@2c6504964296>


Plugin Asistente LADM_COL approval by pcav.
The plugin version "[1391] Asistente LADM_COL 0.7.1 Experimental" is now approved
Link: http://plugins.qgis.org/plugins/asistente_ladm_col/

From noreply at qgis.org  Thu Aug 30 04:34:05 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 30 Aug 2018 11:34:05 -0000
Subject: [QGIS-Developer] Plugin [788] Space Syntax Toolkit approval
	notification.
Message-ID: <20180830113405.27757.26854@2c6504964296>


Plugin Space Syntax Toolkit approval by pcav.
The plugin version "[788] Space Syntax Toolkit 0.2.1" is now approved
Link: http://plugins.qgis.org/plugins/esstoolkit/

From noreply at qgis.org  Thu Aug 30 04:50:05 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 30 Aug 2018 11:50:05 -0000
Subject: [QGIS-Developer] Plugin [1529] DistanceCartogram approval
	notification.
Message-ID: <20180830115005.27756.19550@2c6504964296>


Plugin DistanceCartogram approval by pcav.
The plugin version "[1529] DistanceCartogram 0.1" is now approved
Link: http://plugins.qgis.org/plugins/dist_cartogram/

From noreply at qgis.org  Thu Aug 30 04:50:39 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 30 Aug 2018 11:50:39 -0000
Subject: [QGIS-Developer] Plugin [1377] TlugProcessing approval notification.
Message-ID: <20180830115039.27756.58446@2c6504964296>


Plugin TlugProcessing approval by pcav.
The plugin version "[1377] TlugProcessing 2.0.1" is now approved
Link: http://plugins.qgis.org/plugins/TlugProcessing/

From noreply at qgis.org  Thu Aug 30 04:56:14 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 30 Aug 2018 11:56:14 -0000
Subject: [QGIS-Developer] Plugin [1410] ImportPhotos approval notification.
Message-ID: <20180830115614.27757.55454@2c6504964296>


Plugin ImportPhotos approval by pcav.
The plugin version "[1410] ImportPhotos 1.2" is now approved
Link: http://plugins.qgis.org/plugins/ImportPhotos/

From noreply at qgis.org  Thu Aug 30 04:56:51 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 30 Aug 2018 11:56:51 -0000
Subject: [QGIS-Developer] Plugin [440] Visibility Analysis approval
	notification.
Message-ID: <20180830115651.27756.91533@2c6504964296>


Plugin Visibility Analysis approval by pcav.
The plugin version "[440] Visibility Analysis 0.6.3 Experimental" is now approved
Link: http://plugins.qgis.org/plugins/ViewshedAnalysis/

From noreply at qgis.org  Thu Aug 30 04:57:03 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 30 Aug 2018 11:57:03 -0000
Subject: [QGIS-Developer] Plugin [629] Networks approval notification.
Message-ID: <20180830115703.27757.6622@2c6504964296>


Plugin Networks approval by pcav.
The plugin version "[629] Networks 2.0.2" is now approved
Link: http://plugins.qgis.org/plugins/networks/

From noreply at qgis.org  Thu Aug 30 04:57:20 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 30 Aug 2018 11:57:20 -0000
Subject: [QGIS-Developer] Plugin [1526] LAStools approval notification.
Message-ID: <20180830115720.27758.453@2c6504964296>


Plugin LAStools approval by pcav.
The plugin version "[1526] LAStools 0.3 Experimental" is now approved
Link: http://plugins.qgis.org/plugins/LAStools/

From noreply at qgis.org  Thu Aug 30 04:59:16 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 30 Aug 2018 11:59:16 -0000
Subject: [QGIS-Developer] Plugin [1528] Standard Distance approval
	notification.
Message-ID: <20180830115916.27756.91489@2c6504964296>


Plugin Standard Distance approval by pcav.
The plugin version "[1528] Standard Distance 1.0.0" is now approved
Link: http://plugins.qgis.org/plugins/StandardDistance/

From noreply at qgis.org  Thu Aug 30 05:45:50 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 30 Aug 2018 12:45:50 -0000
Subject: [QGIS-Developer] Plugin [1408] EasyTemplatePrint approval
	notification.
Message-ID: <20180830124550.27758.58460@2c6504964296>


Plugin EasyTemplatePrint approval by pcav.
The plugin version "[1408] EasyTemplatePrint 0.1 Experimental" is now approved
Link: http://plugins.qgis.org/plugins/EasyTemplatePrint/

From adenaculture at gmail.com  Thu Aug 30 06:38:35 2018
From: adenaculture at gmail.com (C Hamilton)
Date: Thu, 30 Aug 2018 09:38:35 -0400
Subject: [QGIS-Developer] Popup window within Processing crashes QGIS
Message-ID: <CABPxTTr5KNw4YmW43tOhSd9H=zG=PyUgP_K3oXW9E8-kN+Q3Zw@mail.gmail.com>

I have an algorithm that during execution gathers information from the data
and then pops up a window for the user to select what the user would like
to do.

Is this possible in the Processing framework? I have tried doing this in
processAlgorithm and it crashes QGIS. Here is how I call the popup window.

        fieldsDialog = SelectionDialog(self.tableFeatures)
        fieldsDialog.exec_()
        items = fieldsDialog.selected

Here is the beginning of the SelectionDialong class.

class SelectionDialog(QDialog, FIELDS_CLASS):
    def __init__(self, feat, parent=None):
        super(SelectionDialog, self).__init__(parent)
        self.setupUi(self)

Prior to Processing I passed in iface.mainWindow() as the parent. Is there
a proper parent in Processing to pass? Perhaps this is the reason it is
crashing.

class SelectionDialog(QDialog, FIELDS_CLASS):
    def __init__(self, iface, feat):
        super(SelectionDialog, self).__init__(iface.mainWindow())
        self.setupUi(self)

Thanks,

Calvin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180830/feba7c2f/attachment-0001.html>

From noreply at qgis.org  Thu Aug 30 06:59:16 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Thu, 30 Aug 2018 13:59:16 -0000
Subject: [QGIS-Developer] Plugin [1526] LAStools approval notification.
Message-ID: <20180830135916.27759.51986@2c6504964296>


Plugin LAStools approval by pcav.
The plugin version "[1526] LAStools 0.4 Experimental" is now approved
Link: http://plugins.qgis.org/plugins/LAStools/

From nyall.dawson at gmail.com  Thu Aug 30 18:27:41 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 31 Aug 2018 11:27:41 +1000
Subject: [QGIS-Developer] Popup window within Processing crashes QGIS
In-Reply-To: <CABPxTTr5KNw4YmW43tOhSd9H=zG=PyUgP_K3oXW9E8-kN+Q3Zw@mail.gmail.com>
References: <CABPxTTr5KNw4YmW43tOhSd9H=zG=PyUgP_K3oXW9E8-kN+Q3Zw@mail.gmail.com>
Message-ID: <CAB28AsjNVvpe7tryYob9r4-r5Vz8rONNr7MACnBJ96n0LBbmqQ@mail.gmail.com>

On Thu, 30 Aug 2018 at 23:38, C Hamilton <adenaculture at gmail.com> wrote:
>
> I have an algorithm that during execution gathers information from the data and then pops up a window for the user to select what the user would like to do.
>
> Is this possible in the Processing framework? I have tried doing this in processAlgorithm and it crashes QGIS. Here is how I call the popup window.

No - this is not supported and goes against the very fundamental
design of Processing. Argggh! ;)

But seriously, Processing was designed with the intention that all
user choices are made up-front. This allows algorithms to be nicely
executed inside of models, without the model halting mid-way waiting
for user input. It also allows algorithms, scripts, models, etc to be
run from headless environments such as console scripts.

In this case, you're getting a crash because you're trying to create
GUI components from your algorithm which is being executed in a
background thread. This is a big no-no in Qt land, and usually results
in a crash.

Nyall


>         fieldsDialog = SelectionDialog(self.tableFeatures)
>         fieldsDialog.exec_()
>         items = fieldsDialog.selected
>
> Here is the beginning of the SelectionDialong class.
>
> class SelectionDialog(QDialog, FIELDS_CLASS):
>     def __init__(self, feat, parent=None):
>         super(SelectionDialog, self).__init__(parent)
>         self.setupUi(self)
>
> Prior to Processing I passed in iface.mainWindow() as the parent. Is there a proper parent in Processing to pass? Perhaps this is the reason it is crashing.
>
> class SelectionDialog(QDialog, FIELDS_CLASS):
>     def __init__(self, iface, feat):
>         super(SelectionDialog, self).__init__(iface.mainWindow())
>         self.setupUi(self)
>
> Thanks,
>
> Calvin

From adenaculture at gmail.com  Fri Aug 31 05:24:11 2018
From: adenaculture at gmail.com (C Hamilton)
Date: Fri, 31 Aug 2018 08:24:11 -0400
Subject: [QGIS-Developer] Popup window within Processing crashes QGIS
In-Reply-To: <CAB28AsjNVvpe7tryYob9r4-r5Vz8rONNr7MACnBJ96n0LBbmqQ@mail.gmail.com>
References: <CABPxTTr5KNw4YmW43tOhSd9H=zG=PyUgP_K3oXW9E8-kN+Q3Zw@mail.gmail.com>
 <CAB28AsjNVvpe7tryYob9r4-r5Vz8rONNr7MACnBJ96n0LBbmqQ@mail.gmail.com>
Message-ID: <CABPxTToUKH98cs-erPcOYK8qHcBuc6ji3s+0=xPm2qPw3hnxKA@mail.gmail.com>

Thanks Nyall!!! Unfortunately I was trying to make this a processing
routine when I shouldn't have. It is good to know the boundaries. This
function really requires user interactivity.

Calvin

On Thu, Aug 30, 2018 at 9:27 PM, Nyall Dawson <nyall.dawson at gmail.com>
wrote:

> On Thu, 30 Aug 2018 at 23:38, C Hamilton <adenaculture at gmail.com> wrote:
> >
> > I have an algorithm that during execution gathers information from the
> data and then pops up a window for the user to select what the user would
> like to do.
> >
> > Is this possible in the Processing framework? I have tried doing this in
> processAlgorithm and it crashes QGIS. Here is how I call the popup window.
>
> No - this is not supported and goes against the very fundamental
> design of Processing. Argggh! ;)
>
> But seriously, Processing was designed with the intention that all
> user choices are made up-front. This allows algorithms to be nicely
> executed inside of models, without the model halting mid-way waiting
> for user input. It also allows algorithms, scripts, models, etc to be
> run from headless environments such as console scripts.
>
> In this case, you're getting a crash because you're trying to create
> GUI components from your algorithm which is being executed in a
> background thread. This is a big no-no in Qt land, and usually results
> in a crash.
>
> Nyall
>
>
> >         fieldsDialog = SelectionDialog(self.tableFeatures)
> >         fieldsDialog.exec_()
> >         items = fieldsDialog.selected
> >
> > Here is the beginning of the SelectionDialong class.
> >
> > class SelectionDialog(QDialog, FIELDS_CLASS):
> >     def __init__(self, feat, parent=None):
> >         super(SelectionDialog, self).__init__(parent)
> >         self.setupUi(self)
> >
> > Prior to Processing I passed in iface.mainWindow() as the parent. Is
> there a proper parent in Processing to pass? Perhaps this is the reason it
> is crashing.
> >
> > class SelectionDialog(QDialog, FIELDS_CLASS):
> >     def __init__(self, iface, feat):
> >         super(SelectionDialog, self).__init__(iface.mainWindow())
> >         self.setupUi(self)
> >
> > Thanks,
> >
> > Calvin
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/qgis-developer/attachments/20180831/f2686b84/attachment.html>

From noreply at qgis.org  Fri Aug 31 11:18:17 2018
From: noreply at qgis.org (noreply at qgis.org)
Date: Fri, 31 Aug 2018 18:18:17 -0000
Subject: [QGIS-Developer] Plugin [1327] AusMap unapproval notification.
Message-ID: <20180831181817.23701.31213@2c6504964296>


Plugin AusMap unapproval by pcav.
The plugin version "[1327] AusMap 0.1" is now unapproved
Link: http://plugins.qgis.org/plugins/AusMap-master/

From nyall.dawson at gmail.com  Fri Aug 31 14:06:34 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Sat, 1 Sep 2018 07:06:34 +1000
Subject: [QGIS-Developer] Popup window within Processing crashes QGIS
In-Reply-To: <CABPxTToUKH98cs-erPcOYK8qHcBuc6ji3s+0=xPm2qPw3hnxKA@mail.gmail.com>
References: <CABPxTTr5KNw4YmW43tOhSd9H=zG=PyUgP_K3oXW9E8-kN+Q3Zw@mail.gmail.com>
 <CAB28AsjNVvpe7tryYob9r4-r5Vz8rONNr7MACnBJ96n0LBbmqQ@mail.gmail.com>
 <CABPxTToUKH98cs-erPcOYK8qHcBuc6ji3s+0=xPm2qPw3hnxKA@mail.gmail.com>
Message-ID: <CAB28AshUeF-gc+bAftxLgxLVi5L_22qD=O7Mu3+V-hP36nTQHg@mail.gmail.com>

On Fri, 31 Aug 2018 at 22:24, C Hamilton <adenaculture at gmail.com> wrote:
>
> Thanks Nyall!!! Unfortunately I was trying to make this a processing routine when I shouldn't have. It is good to know the boundaries. This function really requires user interactivity.

Mind sharing the general function of the plugin? There may still be a
way to make this work within Processing.

Regards,
Nyall

>
> Calvin
>
> On Thu, Aug 30, 2018 at 9:27 PM, Nyall Dawson <nyall.dawson at gmail.com> wrote:
>>
>> On Thu, 30 Aug 2018 at 23:38, C Hamilton <adenaculture at gmail.com> wrote:
>> >
>> > I have an algorithm that during execution gathers information from the data and then pops up a window for the user to select what the user would like to do.
>> >
>> > Is this possible in the Processing framework? I have tried doing this in processAlgorithm and it crashes QGIS. Here is how I call the popup window.
>>
>> No - this is not supported and goes against the very fundamental
>> design of Processing. Argggh! ;)
>>
>> But seriously, Processing was designed with the intention that all
>> user choices are made up-front. This allows algorithms to be nicely
>> executed inside of models, without the model halting mid-way waiting
>> for user input. It also allows algorithms, scripts, models, etc to be
>> run from headless environments such as console scripts.
>>
>> In this case, you're getting a crash because you're trying to create
>> GUI components from your algorithm which is being executed in a
>> background thread. This is a big no-no in Qt land, and usually results
>> in a crash.
>>
>> Nyall
>>
>>
>> >         fieldsDialog = SelectionDialog(self.tableFeatures)
>> >         fieldsDialog.exec_()
>> >         items = fieldsDialog.selected
>> >
>> > Here is the beginning of the SelectionDialong class.
>> >
>> > class SelectionDialog(QDialog, FIELDS_CLASS):
>> >     def __init__(self, feat, parent=None):
>> >         super(SelectionDialog, self).__init__(parent)
>> >         self.setupUi(self)
>> >
>> > Prior to Processing I passed in iface.mainWindow() as the parent. Is there a proper parent in Processing to pass? Perhaps this is the reason it is crashing.
>> >
>> > class SelectionDialog(QDialog, FIELDS_CLASS):
>> >     def __init__(self, iface, feat):
>> >         super(SelectionDialog, self).__init__(iface.mainWindow())
>> >         self.setupUi(self)
>> >
>> > Thanks,
>> >
>> > Calvin
>
>

