From Robert.Brutovski at exelisinc.com  Fri Nov 14 08:06:33 2014
From: Robert.Brutovski at exelisinc.com (Brutovski, Robert - Exelis)
Date: Fri, 14 Nov 2014 16:06:33 +0000
Subject: [pdal] Help with building PDAL on Windows 7
Message-ID: <E9E9AF562B0C32439CFBE298B31F95A4239F47@USFWA1E14-03.corp.exelisinc.com>



From: Brutovski, Robert - Exelis
Sent: Friday, November 14, 2014 9:51 AM
To: 'pdal at lists.osgeo.org'
Subject: Help with building PDAL on Windows 7

PDAL members,

I've been working my way through the "Building Under Windows" directions found here: http://www.pdal.io/compilation/windows.html#prerequisites.

I believe I have all the prerequisites installed and am trying to compile PDAL with Visual Studio 2010 (SP1). There seems to be a problem finding some of the required libraries. Any thoughts?

Also, the advanced directions reference a "config.bat" file, which I don't see in the repository. Instead, I'm using the cmake/examples/mpg-config.bat file, which is specified earlier in the instructions. Does that sound reasonable?

Any help you can provide would be greatly appreciated. Thank you.

Rob


-- Boost version: 1.57.0
-- Found the following Boost libraries:
--   program_options
--   thread
--   iostreams
--   filesystem
--   system
--   unit_test_framework
--   random
-- Searching for GDAL 1.9.0+ library
-- ...building with GDAL
-- Could not find GEOS
-- Searching for GeoTIFF 1.3.0+ library
-- Found GeoTIFF version: 1.3.0
-- Could NOT find ZLIB (missing:  ZLIB_LIBRARY ZLIB_INCLUDE_DIR)
-- Could NOT find PythonInterp (missing:  PYTHON_EXECUTABLE)
-- Could NOT find PythonLibs (missing:  PYTHON_LIBRARIES PYTHON_INCLUDE_DIRS) (R
equired is at least version "2.4")
-- Could NOT find LibXml2 (missing:  LIBXML2_LIBRARIES LIBXML2_INCLUDE_DIR)
-- Building with PDAL unit tests
-- Using boost lib: C:/boost_1_57_0/stage/lib/libboost_program_options-vc100-mt-
gd-1_57.lib;C:/boost_1_57_0/stage/lib/libboost_thread-vc100-mt-gd-1_57.lib;C:/bo
ost_1_57_0/stage/lib/libboost_iostreams-vc100-mt-gd-1_57.lib;C:/boost_1_57_0/sta
ge/lib/libboost_filesystem-vc100-mt-gd-1_57.lib;C:/boost_1_57_0/stage/lib/libboo
st_system-vc100-mt-gd-1_57.lib;C:/boost_1_57_0/stage/lib/libboost_unit_test_fram
ework-vc100-mt-gd-1_57.lib;C:/boost_1_57_0/stage/lib/libboost_random-vc100-mt-gd
-1_57.lib
-- Found ORACLE: C:/OSGeo4W/lib/oci.lib
-- Building with Oracle support
-- Could NOT find PostgreSQL (missing:  POSTGRESQL_INCLUDE_DIR POSTGRESQL_LIBRAR
IES)
-- Building without PgPointCloud support
-- Configuring done
-- Generating done


In C:\OSGeo4W\lib, I do have a "zlib.lib" file. In C:\OSGeo4W\include, I do have a "zlib.h" file. There is also a "zlib1.dll" in C:\OSGeo4W\bin.

________________________________

This e-mail and any files transmitted with it may be proprietary and are intended solely for the use of the individual or entity to whom they are addressed. If you have received this e-mail in error please notify the sender. Please note that any views or opinions presented in this e-mail are solely those of the author and do not necessarily represent those of Exelis Inc. The recipient should check this e-mail and any attachments for the presence of viruses. Exelis Inc. accepts no liability for any damage caused by any virus transmitted by this e-mail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20141114/04cc8138/attachment.html>

From howard at hobu.co  Fri Nov 14 08:28:54 2014
From: howard at hobu.co (Howard Butler)
Date: Fri, 14 Nov 2014 10:28:54 -0600
Subject: [pdal] Help with building PDAL on Windows 7
In-Reply-To: <E9E9AF562B0C32439CFBE298B31F95A4239F47@USFWA1E14-03.corp.exelisinc.com>
References: <E9E9AF562B0C32439CFBE298B31F95A4239F47@USFWA1E14-03.corp.exelisinc.com>
Message-ID: <48E0E1EB-8319-4E13-A4E8-0661596FFDD1@hobu.co>

Robert,

Thanks for slugging through. The windows build documents are indeed not very up-to-date.

The way that Brad Chambers and I are trying to stand up is based on the OSGeo4W64 stack. We have produced OSGeo4W64 packages for almost all of the prerequisites (boost, PCL, zlib, GDAL, hexer, points2grid, laszip). There are a few gotchas though.

* PDAL only really supports MSVC2012+, and even then it's probably 2013+ most of the time. PDAL is C++11, and 2010 isn't going to cut it. Brad has a 2012 system that he has been using to out and fixing up PDAL issues, but those efforts tend to lag quite a bit. 2013 is going to be the best/easiest way to get somewhere.
* There's some CMake magic to tell find_package(boost) to use libraries built with different runtimes (the boost in OSGeo4W64 is built with 2012, and I've been building with 2013). I have that config in my local tree but not pushed up to github. I will do so today.
* Nothing has really been tested on Windows.
* My windows build config will be in cmake/examples/hobu-windows.bat

http://www.pdal.io/vagrant.html will get you a "working PDAL" without much effort on linux if you want to take that route to just test something.

Hope this helps,

Howard


> On Nov 14, 2014, at 10:06 AM, Brutovski, Robert - Exelis <Robert.Brutovski at exelisinc.com> wrote:
> 
>  
>  
> From: Brutovski, Robert - Exelis 
> Sent: Friday, November 14, 2014 9:51 AM
> To: 'pdal at lists.osgeo.org'
> Subject: Help with building PDAL on Windows 7
>  
> PDAL members,
>  
> I?ve been working my way through the ?Building Under Windows? directions found here:http://www.pdal.io/compilation/windows.html#prerequisites.
>  
> I believe I have all the prerequisites installed and am trying to compile PDAL with Visual Studio 2010 (SP1). There seems to be a problem finding some of the required libraries. Any thoughts?
>  
> Also, the advanced directions reference a ?config.bat? file, which I don?t see in the repository. Instead, I?m using the cmake/examples/mpg-config.bat file, which is specified earlier in the instructions. Does that sound reasonable?
>  
> Any help you can provide would be greatly appreciated. Thank you.
>  
> Rob
>  
>  
> -- Boost version: 1.57.0
> -- Found the following Boost libraries:
> --   program_options
> --   thread
> --   iostreams
> --   filesystem
> --   system
> --   unit_test_framework
> --   random
> -- Searching for GDAL 1.9.0+ library
> -- ...building with GDAL
> -- Could not find GEOS
> -- Searching for GeoTIFF 1.3.0+ library
> -- Found GeoTIFF version: 1.3.0
> -- Could NOT find ZLIB (missing:  ZLIB_LIBRARY ZLIB_INCLUDE_DIR)
> -- Could NOT find PythonInterp (missing:  PYTHON_EXECUTABLE)
> -- Could NOT find PythonLibs (missing:  PYTHON_LIBRARIES PYTHON_INCLUDE_DIRS) (R
> equired is at least version "2.4")
> -- Could NOT find LibXml2 (missing:  LIBXML2_LIBRARIES LIBXML2_INCLUDE_DIR)
> -- Building with PDAL unit tests
> -- Using boost lib: C:/boost_1_57_0/stage/lib/libboost_program_options-vc100-mt-
> gd-1_57.lib;C:/boost_1_57_0/stage/lib/libboost_thread-vc100-mt-gd-1_57.lib;C:/bo
> ost_1_57_0/stage/lib/libboost_iostreams-vc100-mt-gd-1_57.lib;C:/boost_1_57_0/sta
> ge/lib/libboost_filesystem-vc100-mt-gd-1_57.lib;C:/boost_1_57_0/stage/lib/libboo
> st_system-vc100-mt-gd-1_57.lib;C:/boost_1_57_0/stage/lib/libboost_unit_test_fram
> ework-vc100-mt-gd-1_57.lib;C:/boost_1_57_0/stage/lib/libboost_random-vc100-mt-gd
> -1_57.lib
> -- Found ORACLE: C:/OSGeo4W/lib/oci.lib
> -- Building with Oracle support
> -- Could NOT find PostgreSQL (missing:  POSTGRESQL_INCLUDE_DIR POSTGRESQL_LIBRAR
> IES)
> -- Building without PgPointCloud support
> -- Configuring done
> -- Generating done
>  
>  
> In C:\OSGeo4W\lib, I do have a ?zlib.lib? file. In C:\OSGeo4W\include, I do have a ?zlib.h? file. There is also a ?zlib1.dll? in C:\OSGeo4W\bin.
> 
> 
> This e-mail and any files transmitted with it may be proprietary and are intended solely for the use of the individual or entity to whom they are addressed. If you have received this e-mail in error please notify the sender. Please note that any views or opinions presented in this e-mail are solely those of the author and do not necessarily represent those of Exelis Inc. The recipient should check this e-mail and any attachments for the presence of viruses. Exelis Inc. accepts no liability for any damage caused by any virus transmitted by this e-mail. 
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal


From ashley_c_mort at raytheon.com  Mon Nov 17 15:37:30 2014
From: ashley_c_mort at raytheon.com (Ashley Mort)
Date: Mon, 17 Nov 2014 17:37:30 -0600
Subject: [pdal] coordinate precision pgpointcloud writer?
Message-ID: <546A86BA.9070305@raytheon.com>

Can someone please help me figure out why I am losing coordinate 
precision when I use pdal's pgpoingcloud.writer to write into my 
Postgres DB?

I have a .las file in epsg:4326 and when I put it though my pdal 
pipeline, I seem to lose precision (-122.1831470 will become -112.183) 
when I query for it.

Below is a sample point from my .las file, the output I get from 
querying postgres, and the pipeline file that I used.  Can anyone point 
out what I'm doing wrong?  Thanks!


postgres at ubuntu:/home/stack/Downloads$ pdal info st2-helens.las -p 5
{
     "X": "-122.18314700000002",
     "Y": "46.238651000000004",
     "Z": "1161.8700000000001",
     "Intensity": "0",
     "ReturnNumber": "0",
     "NumberOfReturns": "0",
     "ScanDirectionFlag": "0",
     "EdgeOfFlightLine": "0",
     "Classification": "2",
     "ScanAngleRank": "0",
     "UserData": "0",
     "PointSourceId": "20",
     "Time": "0",
     "Red": "205",
     "Green": "205",
     "Blue": "185"
}

lidarimport=# select PC_AsText(PC_Explode(pa)) from sthelens4326 limit 10;
                                          pc_astext
  {"pcid":3,"pt":[-122.211,46.1886,1874.3,0,0,0,0,0,1,0,0,12,0,242,242,238,1.1605
3e+007,0]}
  {"pcid":3,"pt":[-122.211,46.1886,1874.3,0,0,0,0,0,2,0,0,21,0,242,242,238,7.4041
5e+006,0]}

<?xml version="1.0" encoding="UTF-8"?>
<Pipeline version="1.0">
   <Writer type="drivers.pgpointcloud.writer">
     <Option name="connection">dbname='lidar' user='postgres' 
password='password'</Option>
     <Option name="table">StHelens4326</Option>
     <Option name="srid">4326</Option>
     <Filter type="filters.chipper">
       <Option name="capacity">400</Option>
       <Filter type="filters.cache">
         <Reader type="drivers.las.reader">
           <Option name="filename">st2-helens.las</Option>
           <Option name="spatialreference">EPSG:4326</Option>
         </Reader>
       </Filter>
     </Filter>
   </Writer>
</Pipeline>

-- 
Ashley Mort
Sr. Software Engineer
Raytheon - Intelligence and Information Systems
972-205-5165 (office)
814-571-3039 (cell)


From pramsey at cleverelephant.ca  Mon Nov 17 15:50:43 2014
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Mon, 17 Nov 2014 15:50:43 -0800
Subject: [pdal] coordinate precision pgpointcloud writer?
In-Reply-To: <546A86BA.9070305@raytheon.com>
References: <546A86BA.9070305@raytheon.com>
Message-ID: <etPan.546a89d3.71f32454.14ddc@Butterfly.local>

(a) you?ll want to use pc_get to actually get the coordinate value and confirm the precision, you might just be seeing a text output artifact as the json is written out
(b) you?ll want to check the pointcloud_formats entry for this pcid and see what the specified precision actually is
(c) looks like you?re storing far more precision than you actually need, if you reduced it appropriately, per what you see in those results (lots of 0?s after the 6th digit) you?ll save lots of space probably

P.

--?
Paul Ramsey
http://cleverelephant.ca
http://postgis.net

On November 17, 2014 at 3:46:40 PM, Ashley Mort (ashley_c_mort at raytheon.com) wrote:

Can someone please help me figure out why I am losing coordinate  
precision when I use pdal's pgpoingcloud.writer to write into my  
Postgres DB?  

I have a .las file in epsg:4326 and when I put it though my pdal  
pipeline, I seem to lose precision (-122.1831470 will become -112.183)  
when I query for it.  

Below is a sample point from my .las file, the output I get from  
querying postgres, and the pipeline file that I used. Can anyone point  
out what I'm doing wrong? Thanks!  


postgres at ubuntu:/home/stack/Downloads$ pdal info st2-helens.las -p 5  
{  
"X": "-122.18314700000002",  
"Y": "46.238651000000004",  
"Z": "1161.8700000000001",  
"Intensity": "0",  
"ReturnNumber": "0",  
"NumberOfReturns": "0",  
"ScanDirectionFlag": "0",  
"EdgeOfFlightLine": "0",  
"Classification": "2",  
"ScanAngleRank": "0",  
"UserData": "0",  
"PointSourceId": "20",  
"Time": "0",  
"Red": "205",  
"Green": "205",  
"Blue": "185"  
}  

lidarimport=# select PC_AsText(PC_Explode(pa)) from sthelens4326 limit 10;  
pc_astext  
{"pcid":3,"pt":[-122.211,46.1886,1874.3,0,0,0,0,0,1,0,0,12,0,242,242,238,1.1605  
3e+007,0]}  
{"pcid":3,"pt":[-122.211,46.1886,1874.3,0,0,0,0,0,2,0,0,21,0,242,242,238,7.4041  
5e+006,0]}  

<?xml version="1.0" encoding="UTF-8"?>  
<Pipeline version="1.0">  
<Writer type="drivers.pgpointcloud.writer">  
<Option name="connection">dbname='lidar' user='postgres'  
password='password'</Option>  
<Option name="table">StHelens4326</Option>  
<Option name="srid">4326</Option>  
<Filter type="filters.chipper">  
<Option name="capacity">400</Option>  
<Filter type="filters.cache">  
<Reader type="drivers.las.reader">  
<Option name="filename">st2-helens.las</Option>  
<Option name="spatialreference">EPSG:4326</Option>  
</Reader>  
</Filter>  
</Filter>  
</Writer>  
</Pipeline>  

--  
Ashley Mort  
Sr. Software Engineer  
Raytheon - Intelligence and Information Systems  
972-205-5165 (office)  
814-571-3039 (cell)  

_______________________________________________  
pdal mailing list  
pdal at lists.osgeo.org  
http://lists.osgeo.org/mailman/listinfo/pdal  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20141117/eccc14dc/attachment.html>

From ashley_c_mort at raytheon.com  Mon Nov 17 19:49:40 2014
From: ashley_c_mort at raytheon.com (Ashley Mort)
Date: Mon, 17 Nov 2014 21:49:40 -0600
Subject: [pdal] coordinate precision pgpointcloud writer?
In-Reply-To: <etPan.546a89d3.71f32454.14ddc@Butterfly.local>
References: <546A86BA.9070305@raytheon.com>
	<etPan.546a89d3.71f32454.14ddc@Butterfly.local>
Message-ID: <546AC1D4.8040707@raytheon.com>

Ok thanks!  That helps alot.  My higher precision is there if I use 
PC_Get.  Is there a more efficient way of querying other than:

select PC_Get(PC_Explode(pa),'X'), PC_Get(PC_Explode(pa),'Y'), 
PC_Get(PC_Explode(pa),'Z'), PC_Get(PC_Explode(pa),'Red'), 
PC_Get(PC_Explode(pa),'Green'), PC_Get(PC_Explode(pa),'Blue') from 
sthelens4326 limit 100000;


On 11/17/2014 5:50 PM, Paul Ramsey wrote:
> (a) you?ll want to use pc_get to actually get the coordinate value and 
> confirm the precision, you might just be seeing a text output artifact 
> as the json is written out
> (b) you?ll want to check the pointcloud_formats entry for this pcid 
> and see what the specified precision actually is
> (c) looks like you?re storing far more precision than you actually 
> need, if you reduced it appropriately, per what you see in those 
> results (lots of 0?s after the 6th digit) you?ll save lots of space 
> probably
>
> P.
>
> -- 
> Paul Ramsey
> http://cleverelephant.ca
> http://postgis.net
>
> On November 17, 2014 at 3:46:40 PM, Ashley Mort 
> (ashley_c_mort at raytheon.com <mailto:ashley_c_mort at raytheon.com>) wrote:
>
>> Can someone please help me figure out why I am losing coordinate
>> precision when I use pdal's pgpoingcloud.writer to write into my
>> Postgres DB?
>>
>> I have a .las file in epsg:4326 and when I put it though my pdal
>> pipeline, I seem to lose precision (-122.1831470 will become -112.183)
>> when I query for it.
>>
>> Below is a sample point from my .las file, the output I get from
>> querying postgres, and the pipeline file that I used. Can anyone point
>> out what I'm doing wrong? Thanks!
>>
>>
>> postgres at ubuntu:/home/stack/Downloads$ pdal info st2-helens.las -p 5
>> {
>> "X": "-122.18314700000002",
>> "Y": "46.238651000000004",
>> "Z": "1161.8700000000001",
>> "Intensity": "0",
>> "ReturnNumber": "0",
>> "NumberOfReturns": "0",
>> "ScanDirectionFlag": "0",
>> "EdgeOfFlightLine": "0",
>> "Classification": "2",
>> "ScanAngleRank": "0",
>> "UserData": "0",
>> "PointSourceId": "20",
>> "Time": "0",
>> "Red": "205",
>> "Green": "205",
>> "Blue": "185"
>> }
>>
>> lidarimport=# select PC_AsText(PC_Explode(pa)) from sthelens4326 
>> limit 10;
>> pc_astext
>> {"pcid":3,"pt":[-122.211,46.1886,1874.3,0,0,0,0,0,1,0,0,12,0,242,242,238,1.1605 
>>
>> 3e+007,0]}
>> {"pcid":3,"pt":[-122.211,46.1886,1874.3,0,0,0,0,0,2,0,0,21,0,242,242,238,7.4041 
>>
>> 5e+006,0]}
>>
>> <?xml version="1.0" encoding="UTF-8"?>
>> <Pipeline version="1.0">
>> <Writer type="drivers.pgpointcloud.writer">
>> <Option name="connection">dbname='lidar' user='postgres'
>> password='password'</Option>
>> <Option name="table">StHelens4326</Option>
>> <Option name="srid">4326</Option>
>> <Filter type="filters.chipper">
>> <Option name="capacity">400</Option>
>> <Filter type="filters.cache">
>> <Reader type="drivers.las.reader">
>> <Option name="filename">st2-helens.las</Option>
>> <Option name="spatialreference">EPSG:4326</Option>
>> </Reader>
>> </Filter>
>> </Filter>
>> </Writer>
>> </Pipeline>
>>
>> -- 
>> Ashley Mort
>> Sr. Software Engineer
>> Raytheon - Intelligence and Information Systems
>> 972-205-5165 (office)
>> 814-571-3039 (cell)
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/pdal


-- 
Ashley Mort
Sr. Software Engineer
Raytheon - Intelligence and Information Systems
972-205-5165 (office)
814-571-3039 (cell)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20141117/7d4358a0/attachment-0001.html>

From pramsey at cleverelephant.ca  Mon Nov 17 20:40:33 2014
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Mon, 17 Nov 2014 20:40:33 -0800
Subject: [pdal] coordinate precision pgpointcloud writer?
In-Reply-To: <546AC1D4.8040707@raytheon.com>
References: <546A86BA.9070305@raytheon.com>
	<etPan.546a89d3.71f32454.14ddc@Butterfly.local>
	<546AC1D4.8040707@raytheon.com>
Message-ID: <etPan.546acdc1.3a95f874.14ddc@Butterfly.local>

Not at the moment, but I?ve had requests for some different kinds of accessors, like?

PC_Get(pcpoint, ARRAY[text]) -> ARRAY[double]

Or even?

PC_Get(pcpatch, text) -> ARRAY[double]

Or (and i wonder if this is wise)

PC_Get(pcpatch, ARRAY[text]) -> ARRAY[ARRAY[double]]

Do you have any interest in that kind of thing?

--?
Paul Ramsey
http://cleverelephant.ca
http://postgis.net

On November 17, 2014 at 7:49:48 PM, Ashley Mort (ashley_c_mort at raytheon.com) wrote:

Ok thanks!? That helps alot.? My higher precision is there if I use PC_Get.? Is there a more efficient way of querying other than:

select PC_Get(PC_Explode(pa),'X'), PC_Get(PC_Explode(pa),'Y'), PC_Get(PC_Explode(pa),'Z'), PC_Get(PC_Explode(pa),'Red'), PC_Get(PC_Explode(pa),'Green'), PC_Get(PC_Explode(pa),'Blue') from sthelens4326 limit 100000;


On 11/17/2014 5:50 PM, Paul Ramsey wrote:
(a) you?ll want to use pc_get to actually get the coordinate value and confirm the precision, you might just be seeing a text output artifact as the json is written out
(b) you?ll want to check the pointcloud_formats entry for this pcid and see what the specified precision actually is
(c) looks like you?re storing far more precision than you actually need, if you reduced it appropriately, per what you see in those results (lots of 0?s after the 6th digit) you?ll save lots of space probably

P.

--?
Paul Ramsey
http://cleverelephant.ca
http://postgis.net

On November 17, 2014 at 3:46:40 PM, Ashley Mort (ashley_c_mort at raytheon.com) wrote:

Can someone please help me figure out why I am losing coordinate
precision when I use pdal's pgpoingcloud.writer to write into my
Postgres DB?

I have a .las file in epsg:4326 and when I put it though my pdal
pipeline, I seem to lose precision (-122.1831470 will become -112.183)
when I query for it.

Below is a sample point from my .las file, the output I get from
querying postgres, and the pipeline file that I used. Can anyone point
out what I'm doing wrong? Thanks!


postgres at ubuntu:/home/stack/Downloads$ pdal info st2-helens.las -p 5
{
"X": "-122.18314700000002",
"Y": "46.238651000000004",
"Z": "1161.8700000000001",
"Intensity": "0",
"ReturnNumber": "0",
"NumberOfReturns": "0",
"ScanDirectionFlag": "0",
"EdgeOfFlightLine": "0",
"Classification": "2",
"ScanAngleRank": "0",
"UserData": "0",
"PointSourceId": "20",
"Time": "0",
"Red": "205",
"Green": "205",
"Blue": "185"
}

lidarimport=# select PC_AsText(PC_Explode(pa)) from sthelens4326 limit 10;
pc_astext
{"pcid":3,"pt":[-122.211,46.1886,1874.3,0,0,0,0,0,1,0,0,12,0,242,242,238,1.1605
3e+007,0]}
{"pcid":3,"pt":[-122.211,46.1886,1874.3,0,0,0,0,0,2,0,0,21,0,242,242,238,7.4041
5e+006,0]}

<?xml version="1.0" encoding="UTF-8"?>
<Pipeline version="1.0">
<Writer type="drivers.pgpointcloud.writer">
<Option name="connection">dbname='lidar' user='postgres'
password='password'</Option>
<Option name="table">StHelens4326</Option>
<Option name="srid">4326</Option>
<Filter type="filters.chipper">
<Option name="capacity">400</Option>
<Filter type="filters.cache">
<Reader type="drivers.las.reader">
<Option name="filename">st2-helens.las</Option>
<Option name="spatialreference">EPSG:4326</Option>
</Reader>
</Filter>
</Filter>
</Writer>
</Pipeline>

--
Ashley Mort
Sr. Software Engineer
Raytheon - Intelligence and Information Systems
972-205-5165 (office)
814-571-3039 (cell)

_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/pdal


--  
Ashley Mort
Sr. Software Engineer
Raytheon - Intelligence and Information Systems
972-205-5165 (office)
814-571-3039 (cell)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20141117/698c2715/attachment.html>

From ashley_c_mort at raytheon.com  Tue Nov 18 04:36:42 2014
From: ashley_c_mort at raytheon.com (Ashley Mort)
Date: Tue, 18 Nov 2014 06:36:42 -0600
Subject: [pdal] coordinate precision pgpointcloud writer?
In-Reply-To: <etPan.546acdc1.3a95f874.14ddc@Butterfly.local>
References: <546A86BA.9070305@raytheon.com>
	<etPan.546a89d3.71f32454.14ddc@Butterfly.local>
	<546AC1D4.8040707@raytheon.com>
	<etPan.546acdc1.3a95f874.14ddc@Butterfly.local>
Message-ID: <546B3D5A.2060605@raytheon.com>

Those accessors would be useful; the first or second.  I am basically 
just trying to create a csv of x,y,z,r,b,g out of all my pcpoints.

On 11/17/2014 10:40 PM, Paul Ramsey wrote:
> Not at the moment, but I?ve had requests for some different kinds of 
> accessors, like
>
> PC_Get(pcpoint, ARRAY[text]) -> ARRAY[double]
>
> Or even
>
> PC_Get(pcpatch, text) -> ARRAY[double]
>
> Or (and i wonder if this is wise)
>
> PC_Get(pcpatch, ARRAY[text]) -> ARRAY[ARRAY[double]]
>
> Do you have any interest in that kind of thing?
>
> -- 
> Paul Ramsey
> http://cleverelephant.ca
> http://postgis.net
>
> On November 17, 2014 at 7:49:48 PM, Ashley Mort 
> (ashley_c_mort at raytheon.com <mailto:ashley_c_mort at raytheon.com>) wrote:
>
>> Ok thanks!  That helps alot.  My higher precision is there if I use 
>> PC_Get.  Is there a more efficient way of querying other than:
>>
>> select PC_Get(PC_Explode(pa),'X'), PC_Get(PC_Explode(pa),'Y'), 
>> PC_Get(PC_Explode(pa),'Z'), PC_Get(PC_Explode(pa),'Red'), 
>> PC_Get(PC_Explode(pa),'Green'), PC_Get(PC_Explode(pa),'Blue') from 
>> sthelens4326 limit 100000;
>>
>>
>> On 11/17/2014 5:50 PM, Paul Ramsey wrote:
>>> (a) you?ll want to use pc_get to actually get the coordinate value 
>>> and confirm the precision, you might just be seeing a text output 
>>> artifact as the json is written out
>>> (b) you?ll want to check the pointcloud_formats entry for this pcid 
>>> and see what the specified precision actually is
>>> (c) looks like you?re storing far more precision than you actually 
>>> need, if you reduced it appropriately, per what you see in those 
>>> results (lots of 0?s after the 6th digit) you?ll save lots of space 
>>> probably
>>>
>>> P.
>>>
>>> -- 
>>> Paul Ramsey
>>> http://cleverelephant.ca
>>> http://postgis.net
>>>
>>> On November 17, 2014 at 3:46:40 PM, Ashley Mort 
>>> (ashley_c_mort at raytheon.com <mailto:ashley_c_mort at raytheon.com>) wrote:
>>>
>>>> Can someone please help me figure out why I am losing coordinate
>>>> precision when I use pdal's pgpoingcloud.writer to write into my
>>>> Postgres DB?
>>>>
>>>> I have a .las file in epsg:4326 and when I put it though my pdal
>>>> pipeline, I seem to lose precision (-122.1831470 will become -112.183)
>>>> when I query for it.
>>>>
>>>> Below is a sample point from my .las file, the output I get from
>>>> querying postgres, and the pipeline file that I used. Can anyone point
>>>> out what I'm doing wrong? Thanks!
>>>>
>>>>
>>>> postgres at ubuntu:/home/stack/Downloads$ pdal info st2-helens.las -p 5
>>>> {
>>>> "X": "-122.18314700000002",
>>>> "Y": "46.238651000000004",
>>>> "Z": "1161.8700000000001",
>>>> "Intensity": "0",
>>>> "ReturnNumber": "0",
>>>> "NumberOfReturns": "0",
>>>> "ScanDirectionFlag": "0",
>>>> "EdgeOfFlightLine": "0",
>>>> "Classification": "2",
>>>> "ScanAngleRank": "0",
>>>> "UserData": "0",
>>>> "PointSourceId": "20",
>>>> "Time": "0",
>>>> "Red": "205",
>>>> "Green": "205",
>>>> "Blue": "185"
>>>> }
>>>>
>>>> lidarimport=# select PC_AsText(PC_Explode(pa)) from sthelens4326 
>>>> limit 10;
>>>> pc_astext
>>>> {"pcid":3,"pt":[-122.211,46.1886,1874.3,0,0,0,0,0,1,0,0,12,0,242,242,238,1.1605
>>>> 3e+007,0]}
>>>> {"pcid":3,"pt":[-122.211,46.1886,1874.3,0,0,0,0,0,2,0,0,21,0,242,242,238,7.4041
>>>> 5e+006,0]}
>>>>
>>>> <?xml version="1.0" encoding="UTF-8"?>
>>>> <Pipeline version="1.0">
>>>> <Writer type="drivers.pgpointcloud.writer">
>>>> <Option name="connection">dbname='lidar' user='postgres'
>>>> password='password'</Option>
>>>> <Option name="table">StHelens4326</Option>
>>>> <Option name="srid">4326</Option>
>>>> <Filter type="filters.chipper">
>>>> <Option name="capacity">400</Option>
>>>> <Filter type="filters.cache">
>>>> <Reader type="drivers.las.reader">
>>>> <Option name="filename">st2-helens.las</Option>
>>>> <Option name="spatialreference">EPSG:4326</Option>
>>>> </Reader>
>>>> </Filter>
>>>> </Filter>
>>>> </Writer>
>>>> </Pipeline>
>>>>
>>>> --
>>>> Ashley Mort
>>>> Sr. Software Engineer
>>>> Raytheon - Intelligence and Information Systems
>>>> 972-205-5165 (office)
>>>> 814-571-3039 (cell)
>>>>
>>>> _______________________________________________
>>>> pdal mailing list
>>>> pdal at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/pdal
>>
>>
>> --
>> Ashley Mort
>> Sr. Software Engineer
>> Raytheon - Intelligence and Information Systems
>> 972-205-5165 (office)
>> 814-571-3039 (cell)


-- 
Ashley Mort
Sr. Software Engineer
Raytheon - Intelligence and Information Systems
972-205-5165 (office)
814-571-3039 (cell)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20141118/cc5c07b6/attachment-0001.html>

From howard at hobu.co  Tue Nov 18 07:31:08 2014
From: howard at hobu.co (Howard Butler)
Date: Tue, 18 Nov 2014 09:31:08 -0600
Subject: [pdal] coordinate precision pgpointcloud writer?
In-Reply-To: <546B3D5A.2060605@raytheon.com>
References: <546A86BA.9070305@raytheon.com>
	<etPan.546a89d3.71f32454.14ddc@Butterfly.local>
	<546AC1D4.8040707@raytheon.com>
	<etPan.546acdc1.3a95f874.14ddc@Butterfly.local>
	<546B3D5A.2060605@raytheon.com>
Message-ID: <4F08F512-21A9-4C8D-B5FF-C308D527528D@hobu.co>

Note that in the latest PDAL master the XYZ dimensions are going to be stored by default in pgpointcloud as doubles. There is nothing currently in the PDAL to reorient their storage to something like LAS-style scaled int32_t's, which was the case that was often happening in the versions of PDAL that existed when most of pgpointcloud was developed. This consideration must be remembered when interacting with a lot of the existing pgpointcloud documentation, which assumed the int32_t-style behavior. 


> On Nov 18, 2014, at 6:36 AM, Ashley Mort <ashley_c_mort at raytheon.com> wrote:
> 
> Those accessors would be useful; the first or second.  I am basically just trying to create a csv of x,y,z,r,b,g out of all my pcpoints.

PDAL does have a text driver if simply writing out ASCII of the point cloud is what you ultimately want.


From pramsey at cleverelephant.ca  Tue Nov 18 08:11:18 2014
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Tue, 18 Nov 2014 08:11:18 -0800
Subject: [pdal] coordinate precision pgpointcloud writer?
In-Reply-To: <4F08F512-21A9-4C8D-B5FF-C308D527528D@hobu.co>
References: <546A86BA.9070305@raytheon.com>
	<etPan.546a89d3.71f32454.14ddc@Butterfly.local>
	<546AC1D4.8040707@raytheon.com>
	<etPan.546acdc1.3a95f874.14ddc@Butterfly.local>
	<546B3D5A.2060605@raytheon.com>
	<4F08F512-21A9-4C8D-B5FF-C308D527528D@hobu.co>
Message-ID: <etPan.546b6fab.643c9869.108ff@Crane.local>

Why is this? doesn?t that mean now I?m going to have a bunch of fluffy doubles in my database instead of nice terse ints??


--  
http://postgis.net  
http://cleverelephant.ca


On November 18, 2014 at 7:31:10 AM, Howard Butler (howard at hobu.co) wrote:
> > Note that in the latest PDAL master the XYZ dimensions are going  
> to be stored by default in pgpointcloud as doubles


From howard at hobu.co  Tue Nov 18 08:18:56 2014
From: howard at hobu.co (Howard Butler)
Date: Tue, 18 Nov 2014 10:18:56 -0600
Subject: [pdal] coordinate precision pgpointcloud writer?
In-Reply-To: <etPan.546b6fab.643c9869.108ff@Crane.local>
References: <546A86BA.9070305@raytheon.com>
	<etPan.546a89d3.71f32454.14ddc@Butterfly.local>
	<546AC1D4.8040707@raytheon.com>
	<etPan.546acdc1.3a95f874.14ddc@Butterfly.local>
	<546B3D5A.2060605@raytheon.com>
	<4F08F512-21A9-4C8D-B5FF-C308D527528D@hobu.co>
	<etPan.546b6fab.643c9869.108ff@Crane.local>
Message-ID: <8260FA1B-99DE-4261-BF65-24E8DC9AC68E@hobu.co>


> On Nov 18, 2014, at 10:11 AM, Paul Ramsey <pramsey at cleverelephant.ca> wrote:
> 
> Why is this? doesn?t that mean now I?m going to have a bunch of fluffy doubles in my database instead of nice terse ints? 

Today you are going to get a bunch of fluffy doubles.

Tomorrow, after we implement an option in the pgpointcloud writer (and all the other writers too), we can make it store whatever we want. 

The reason for the change was the burden of having to maintain dimension type (int, double, etc) throughout all filters, writers, and readers was simply too annoying and too easy for things to screw up. The current design is much simpler for simple things.

Howard

From o.martinezrubi at tudelft.nl  Tue Nov 18 08:24:38 2014
From: o.martinezrubi at tudelft.nl (Oscar Martinez Rubi)
Date: Tue, 18 Nov 2014 17:24:38 +0100
Subject: [pdal] coordinate precision pgpointcloud writer?
In-Reply-To: <etPan.546b6fab.643c9869.108ff@Crane.local>
References: <546A86BA.9070305@raytheon.com>	<etPan.546a89d3.71f32454.14ddc@Butterfly.local>	<546AC1D4.8040707@raytheon.com>	<etPan.546acdc1.3a95f874.14ddc@Butterfly.local>	<546B3D5A.2060605@raytheon.com>	<4F08F512-21A9-4C8D-B5FF-C308D527528D@hobu.co>
	<etPan.546b6fab.643c9869.108ff@Crane.local>
Message-ID: <546B72C6.2030609@tudelft.nl>

Which will double the size of all the datasets...

Shouldn't that be configurable?

On 18-11-14 17:11, Paul Ramsey wrote:
> Why is this? doesn?t that mean now I?m going to have a bunch of fluffy doubles in my database instead of nice terse ints?
>
>
> --
> http://postgis.net
> http://cleverelephant.ca
>
>
> On November 18, 2014 at 7:31:10 AM, Howard Butler (howard at hobu.co) wrote:
>>> Note that in the latest PDAL master the XYZ dimensions are going
>> to be stored by default in pgpointcloud as doubles
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal


From howard at hobu.co  Tue Nov 18 08:40:56 2014
From: howard at hobu.co (Howard Butler)
Date: Tue, 18 Nov 2014 10:40:56 -0600
Subject: [pdal] coordinate precision pgpointcloud writer?
In-Reply-To: <546B72C6.2030609@tudelft.nl>
References: <546A86BA.9070305@raytheon.com>
	<etPan.546a89d3.71f32454.14ddc@Butterfly.local>
	<546AC1D4.8040707@raytheon.com>
	<etPan.546acdc1.3a95f874.14ddc@Butterfly.local>
	<546B3D5A.2060605@raytheon.com>
	<4F08F512-21A9-4C8D-B5FF-C308D527528D@hobu.co>
	<etPan.546b6fab.643c9869.108ff@Crane.local>
	<546B72C6.2030609@tudelft.nl>
Message-ID: <8C42C5CD-6C12-4C0F-BBD1-937B4927E4B5@hobu.co>


> On Nov 18, 2014, at 10:24 AM, Oscar Martinez Rubi <o.martinezrubi at tudelft.nl> wrote:
> 
> Shouldn't that be configurable?

Yes, just not done yet. A (good) fallout of the refactoring that has gone on.

https://github.com/PDAL/PDAL/issues/599

Howard

From o.martinezrubi at tudelft.nl  Tue Nov 18 08:42:21 2014
From: o.martinezrubi at tudelft.nl (Oscar Martinez Rubi)
Date: Tue, 18 Nov 2014 17:42:21 +0100
Subject: [pdal] coordinate precision pgpointcloud writer?
In-Reply-To: <8C42C5CD-6C12-4C0F-BBD1-937B4927E4B5@hobu.co>
References: <546A86BA.9070305@raytheon.com>
	<etPan.546a89d3.71f32454.14ddc@Butterfly.local>
	<546AC1D4.8040707@raytheon.com>
	<etPan.546acdc1.3a95f874.14ddc@Butterfly.local>
	<546B3D5A.2060605@raytheon.com>
	<4F08F512-21A9-4C8D-B5FF-C308D527528D@hobu.co>
	<etPan.546b6fab.643c9869.108ff@Crane.local>
	<546B72C6.2030609@tudelft.nl>
	<8C42C5CD-6C12-4C0F-BBD1-937B4927E4B5@hobu.co>
Message-ID: <546B76ED.7060808@tudelft.nl>

Ok, in any case. When the changes are finished I think a example of 
usage would be very appreciated ;-)
Thanks!
O.

On 18-11-14 17:40, Howard Butler wrote:
>> On Nov 18, 2014, at 10:24 AM, Oscar Martinez Rubi <o.martinezrubi at tudelft.nl> wrote:
>>
>> Shouldn't that be configurable?
> Yes, just not done yet. A (good) fallout of the refactoring that has gone on.
>
> https://github.com/PDAL/PDAL/issues/599
>
> Howard


From lucadeluge at gmail.com  Thu Nov 20 05:17:15 2014
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Thu, 20 Nov 2014 14:17:15 +0100
Subject: [pdal] compilation with PCL support on Linux
Message-ID: <CAK4m-3w4vzQ=_rr5vWigWHSto2dHUhg_ZsUyMDjfWQ3fnb1FHQ@mail.gmail.com>

Hi everybbody,

I'm trying to compile PDAL (master version) with PCL support on my
Debian Machine.

If I follow the PDAL instruction of the website I'm able to compile
PDAL but without PCL support, otherwise if I use ccmake and set on PCL
I got this error

Scanning dependencies of target pdal_plugin_kernel_ground
[ 90%] Building CXX object
plugins/pcl/CMakeFiles/pdal_plugin_kernel_ground.dir/kernel/Ground.cpp.o
/home/lucadelu/compilati/pdal/plugins/pcl/kernel/Ground.cpp:40:48:
fatal error: pdal/drivers/buffer/BufferReader.hpp: No such file or
directory
 #include <pdal/drivers/buffer/BufferReader.hpp>
                                                ^
compilation terminated.
plugins/pcl/CMakeFiles/pdal_plugin_kernel_ground.dir/build.make:54:
recipe for target
'plugins/pcl/CMakeFiles/pdal_plugin_kernel_ground.dir/kernel/Ground.cpp.o'
failed
make[2]: *** [plugins/pcl/CMakeFiles/pdal_plugin_kernel_ground.dir/kernel/Ground.cpp.o]
Error 1
CMakeFiles/Makefile2:713: recipe for target
'plugins/pcl/CMakeFiles/pdal_plugin_kernel_ground.dir/all' failed
make[1]: *** [plugins/pcl/CMakeFiles/pdal_plugin_kernel_ground.dir/all] Error 2
Makefile:147: recipe for target 'all' failed
make: *** [all] Error 2


-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From howard at hobu.co  Thu Nov 20 06:11:36 2014
From: howard at hobu.co (Howard Butler)
Date: Thu, 20 Nov 2014 08:11:36 -0600
Subject: [pdal] compilation with PCL support on Linux
In-Reply-To: <CAK4m-3w4vzQ=_rr5vWigWHSto2dHUhg_ZsUyMDjfWQ3fnb1FHQ@mail.gmail.com>
References: <CAK4m-3w4vzQ=_rr5vWigWHSto2dHUhg_ZsUyMDjfWQ3fnb1FHQ@mail.gmail.com>
Message-ID: <09A50BD2-4C49-4CD3-9759-5CA8BE275A10@hobu.co>

Luca,

If you could fetch the latest master, I think this one is fixed.

The PDAL tree has been in flux the past week or so as we rearrange things to better reflect the interaction of the various drivers and their potential external dependencies. Many things are now in their final resting place, but there is still some churn to be expected.  Thanks for hanging with us.

Howard

> On Nov 20, 2014, at 7:17 AM, Luca Delucchi <lucadeluge at gmail.com> wrote:
> 
> Hi everybbody,
> 
> I'm trying to compile PDAL (master version) with PCL support on my
> Debian Machine.
> 
> If I follow the PDAL instruction of the website I'm able to compile
> PDAL but without PCL support, otherwise if I use ccmake and set on PCL
> I got this error
> 
> Scanning dependencies of target pdal_plugin_kernel_ground
> [ 90%] Building CXX object
> plugins/pcl/CMakeFiles/pdal_plugin_kernel_ground.dir/kernel/Ground.cpp.o
> /home/lucadelu/compilati/pdal/plugins/pcl/kernel/Ground.cpp:40:48:
> fatal error: pdal/drivers/buffer/BufferReader.hpp: No such file or
> directory
> #include <pdal/drivers/buffer/BufferReader.hpp>
>                                                ^
> compilation terminated.
> plugins/pcl/CMakeFiles/pdal_plugin_kernel_ground.dir/build.make:54:
> recipe for target
> 'plugins/pcl/CMakeFiles/pdal_plugin_kernel_ground.dir/kernel/Ground.cpp.o'
> failed
> make[2]: *** [plugins/pcl/CMakeFiles/pdal_plugin_kernel_ground.dir/kernel/Ground.cpp.o]
> Error 1
> CMakeFiles/Makefile2:713: recipe for target
> 'plugins/pcl/CMakeFiles/pdal_plugin_kernel_ground.dir/all' failed
> make[1]: *** [plugins/pcl/CMakeFiles/pdal_plugin_kernel_ground.dir/all] Error 2
> Makefile:147: recipe for target 'all' failed
> make: *** [all] Error 2
> 
> 
> -- 
> ciao
> Luca
> 
> http://gis.cri.fmach.it/delucchi/
> www.lucadelu.org
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal


From lucadeluge at gmail.com  Thu Nov 20 07:47:31 2014
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Thu, 20 Nov 2014 16:47:31 +0100
Subject: [pdal] compilation with PCL support on Linux
In-Reply-To: <09A50BD2-4C49-4CD3-9759-5CA8BE275A10@hobu.co>
References: <CAK4m-3w4vzQ=_rr5vWigWHSto2dHUhg_ZsUyMDjfWQ3fnb1FHQ@mail.gmail.com>
	<09A50BD2-4C49-4CD3-9759-5CA8BE275A10@hobu.co>
Message-ID: <CAK4m-3zrsqEHXPofYcJvQP18h64=807by4RTJuvAfGwLNtY4Kw@mail.gmail.com>

On 20 November 2014 15:11, Howard Butler <howard at hobu.co> wrote:
> Luca,
>

Hi Howard,

> If you could fetch the latest master, I think this one is fixed.
>

done and it is fixed. I fetched the master this morning (Italian time)
but it was enough :-)

> The PDAL tree has been in flux the past week or so as we rearrange things to better reflect the interaction of the various drivers and their potential external dependencies. Many things are now in their final resting place, but there is still some churn to be expected.  Thanks for hanging with us.
>

Perfect, are you going to have a release?

I still have problem that pcl command is missing :-o
Any idea how to fix it?

./bin/pdal
Action not specified!

------------------------------------------------------------------------------------------
pdal (PDAL 0.9.9 (40016c) with GeoTIFF 1.4.0 GDAL 1.11.1 LASzip 2.2.0)
------------------------------------------------------------------------------------------
  available actions:
     - delta
     - diff
     - info
     - pipeline
     - random
     - sort
     - translate

> Howard
>

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From brad.chambers at gmail.com  Thu Nov 20 08:22:00 2014
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Thu, 20 Nov 2014 11:22:00 -0500
Subject: [pdal] compilation with PCL support on Linux
In-Reply-To: <CAK4m-3zrsqEHXPofYcJvQP18h64=807by4RTJuvAfGwLNtY4Kw@mail.gmail.com>
References: <CAK4m-3w4vzQ=_rr5vWigWHSto2dHUhg_ZsUyMDjfWQ3fnb1FHQ@mail.gmail.com>
	<09A50BD2-4C49-4CD3-9759-5CA8BE275A10@hobu.co>
	<CAK4m-3zrsqEHXPofYcJvQP18h64=807by4RTJuvAfGwLNtY4Kw@mail.gmail.com>
Message-ID: <CAJyqqPz-kXaXE-uDHmhQoxVAMtAVe-k7g9ssnNWwnjSRkD6UKA@mail.gmail.com>

Luca,

Have you set PDAL_DRIVER_PATH to point to the PCL plugins?

Brad

On Thu, Nov 20, 2014 at 10:47 AM, Luca Delucchi <lucadeluge at gmail.com>
wrote:

> On 20 November 2014 15:11, Howard Butler <howard at hobu.co> wrote:
> > Luca,
> >
>
> Hi Howard,
>
> > If you could fetch the latest master, I think this one is fixed.
> >
>
> done and it is fixed. I fetched the master this morning (Italian time)
> but it was enough :-)
>
> > The PDAL tree has been in flux the past week or so as we rearrange
> things to better reflect the interaction of the various drivers and their
> potential external dependencies. Many things are now in their final resting
> place, but there is still some churn to be expected.  Thanks for hanging
> with us.
> >
>
> Perfect, are you going to have a release?
>
> I still have problem that pcl command is missing :-o
> Any idea how to fix it?
>
> ./bin/pdal
> Action not specified!
>
>
> ------------------------------------------------------------------------------------------
> pdal (PDAL 0.9.9 (40016c) with GeoTIFF 1.4.0 GDAL 1.11.1 LASzip 2.2.0)
>
> ------------------------------------------------------------------------------------------
>   available actions:
>      - delta
>      - diff
>      - info
>      - pipeline
>      - random
>      - sort
>      - translate
>
> > Howard
> >
>
> --
> ciao
> Luca
>
> http://gis.cri.fmach.it/delucchi/
> www.lucadelu.org
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20141120/cc5f876b/attachment.html>

From lucadeluge at gmail.com  Thu Nov 20 08:38:22 2014
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Thu, 20 Nov 2014 17:38:22 +0100
Subject: [pdal] compilation with PCL support on Linux
In-Reply-To: <CAJyqqPz-kXaXE-uDHmhQoxVAMtAVe-k7g9ssnNWwnjSRkD6UKA@mail.gmail.com>
References: <CAK4m-3w4vzQ=_rr5vWigWHSto2dHUhg_ZsUyMDjfWQ3fnb1FHQ@mail.gmail.com>
	<09A50BD2-4C49-4CD3-9759-5CA8BE275A10@hobu.co>
	<CAK4m-3zrsqEHXPofYcJvQP18h64=807by4RTJuvAfGwLNtY4Kw@mail.gmail.com>
	<CAJyqqPz-kXaXE-uDHmhQoxVAMtAVe-k7g9ssnNWwnjSRkD6UKA@mail.gmail.com>
Message-ID: <CAK4m-3zJD8qj5wixQOyfvYOTJ22=hLZ8N8G4mdJ2UwkUdR1r-w@mail.gmail.com>

On 20 November 2014 17:22, Bradley Chambers <brad.chambers at gmail.com> wrote:
> Luca,
>

Hi Bradley,

> Have you set PDAL_DRIVER_PATH to point to the PCL plugins?
>

I don't understand what do you meens... When I run ccmake I obtain this

 PCL_2D_INCLUDE_DIR               /usr/local/include/pcl-1.8
 PCL_COMMON_INCLUDE_DIR           /usr/local/include/pcl-1.8
 PCL_DIR                          /usr/local/share/pcl-1.8
 PCL_FEATURES_INCLUDE_DIR         /usr/local/include/pcl-1.8
 PCL_FILTERS_INCLUDE_DIR          /usr/local/include/pcl-1.8
 PCL_GEOMETRY_INCLUDE_DIR         /usr/local/include/pcl-1.8
 PCL_IO_INCLUDE_DIR               /usr/local/include/pcl-1.8
 PCL_KDTREE_INCLUDE_DIR           /usr/local/include/pcl-1.8
 PCL_KEYPOINTS_INCLUDE_DIR        /usr/local/include/pcl-1.8
 PCL_ML_INCLUDE_DIR               /usr/local/include/pcl-1.8
 PCL_OCTREE_INCLUDE_DIR           /usr/local/include/pcl-1.8
 PCL_RECOGNITION_INCLUDE_DIR      /usr/local/include/pcl-1.8
 PCL_REGISTRATION_INCLUDE_DIR     /usr/local/include/pcl-1.8
 PCL_SAMPLE_CONSENSUS_INCLUDE_D   /usr/local/include/pcl-1.8
 PCL_SEARCH_INCLUDE_DIR           /usr/local/include/pcl-1.8
 PCL_SEGMENTATION_INCLUDE_DIR     /usr/local/include/pcl-1.8
 PCL_STEREO_INCLUDE_DIR           /usr/local/include/pcl-1.8
 PCL_SURFACE_INCLUDE_DIR          /usr/local/include/pcl-1.8

So I thought that PCL is supported.... do I need something more?

> Brad
>


-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From brad.chambers at gmail.com  Thu Nov 20 08:47:08 2014
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Thu, 20 Nov 2014 11:47:08 -0500
Subject: [pdal] compilation with PCL support on Linux
In-Reply-To: <CAK4m-3zJD8qj5wixQOyfvYOTJ22=hLZ8N8G4mdJ2UwkUdR1r-w@mail.gmail.com>
References: <CAK4m-3w4vzQ=_rr5vWigWHSto2dHUhg_ZsUyMDjfWQ3fnb1FHQ@mail.gmail.com>
	<09A50BD2-4C49-4CD3-9759-5CA8BE275A10@hobu.co>
	<CAK4m-3zrsqEHXPofYcJvQP18h64=807by4RTJuvAfGwLNtY4Kw@mail.gmail.com>
	<CAJyqqPz-kXaXE-uDHmhQoxVAMtAVe-k7g9ssnNWwnjSRkD6UKA@mail.gmail.com>
	<CAK4m-3zJD8qj5wixQOyfvYOTJ22=hLZ8N8G4mdJ2UwkUdR1r-w@mail.gmail.com>
Message-ID: <CAJyqqPx_GTKJJ5u=jHUHmNdzgRVAznky6M-Cc+Z+KW89iVyQzw@mail.gmail.com>

Luca,

So I thought that PCL is supported.... do I need something more?
>

PCL support is technically built as a PDAL plugin. PDAL loads plugins at
runtime by searching PDAL_DRIVER_PATH. If you've installed PDAL, this may
be /usr/local/lib for example. Even so, on linux, it should have defaulted
to /usr/local/lib or the lib directory in your build folder.

Have you built PDAL previously? If so, you may have been used to enabling
PCL via the WITH_PCL switch in CMake. This has recently been relabeled as
BUILD_PLUGIN_PCL. Is BUILD_PLUGIN_PCL=ON? Can you confirm that
libpdal_plugin_kernel_pcl.so is being built?

Brad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20141120/3ff727e8/attachment.html>

From lucadeluge at gmail.com  Thu Nov 20 23:15:27 2014
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Fri, 21 Nov 2014 08:15:27 +0100
Subject: [pdal] compilation with PCL support on Linux
In-Reply-To: <CAJyqqPx_GTKJJ5u=jHUHmNdzgRVAznky6M-Cc+Z+KW89iVyQzw@mail.gmail.com>
References: <CAK4m-3w4vzQ=_rr5vWigWHSto2dHUhg_ZsUyMDjfWQ3fnb1FHQ@mail.gmail.com>
	<09A50BD2-4C49-4CD3-9759-5CA8BE275A10@hobu.co>
	<CAK4m-3zrsqEHXPofYcJvQP18h64=807by4RTJuvAfGwLNtY4Kw@mail.gmail.com>
	<CAJyqqPz-kXaXE-uDHmhQoxVAMtAVe-k7g9ssnNWwnjSRkD6UKA@mail.gmail.com>
	<CAK4m-3zJD8qj5wixQOyfvYOTJ22=hLZ8N8G4mdJ2UwkUdR1r-w@mail.gmail.com>
	<CAJyqqPx_GTKJJ5u=jHUHmNdzgRVAznky6M-Cc+Z+KW89iVyQzw@mail.gmail.com>
Message-ID: <CAK4m-3ybvc4KKerXZ+ueeRErNmHpQRDwr+xsv6Ohh=WJq2yQ_A@mail.gmail.com>

Il 20/nov/2014 17:47 "Bradley Chambers" <brad.chambers at gmail.com> ha
scritto:
>
> Luca,
>

Hi Bradley,

>> So I thought that PCL is supported.... do I need something more?
>
>
> PCL support is technically built as a PDAL plugin. PDAL loads plugins at
runtime by searching PDAL_DRIVER_PATH. If you've installed PDAL, this may
be /usr/local/lib for example. Even so, on linux, it should have defaulted
to /usr/local/lib or the lib directory in your build folder.
>
> Have you built PDAL previously? If so, you may have been used to enabling
PCL via the WITH_PCL switch in CMake. This has recently been relabeled as
BUILD_PLUGIN_PCL. Is BUILD_PLUGIN_PCL=ON? Can you confirm that
libpdal_plugin_kernel_pcl.so is being built?
>

Yes, I can confirm both you question

> Brad

Cheers
Luca
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20141121/47e69a73/attachment.html>

From lucadeluge at gmail.com  Fri Nov 21 01:02:56 2014
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Fri, 21 Nov 2014 10:02:56 +0100
Subject: [pdal] segmentation fault
Message-ID: <CAK4m-3xAfocDsvDGapYbKT228Dm3s-zTj0-NtpxU6spusuPBDw@mail.gmail.com>

Hi everybody,

I have a segmantation fault using all the pdal's modules.

Here [0] you can find a gdd output, and following the output of strace

open("/lib/x86_64-linux-gnu/libudev.so.1", O_RDONLY|O_CLOEXEC) = 4
read(4, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\3004\0\0\0\0\0\0"...,
832) = 832
fstat(4, {st_mode=S_IFREG|0644, st_size=59600, ...}) = 0
mmap(NULL, 2156736, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 4,
0) = 0x7fb6ad63e000
mprotect(0x7fb6ad64c000, 2093056, PROT_NONE) = 0
mmap(0x7fb6ad84b000, 8192, PROT_READ|PROT_WRITE,
MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 4, 0xd000) = 0x7fb6ad84b000
close(4)                                = 0
mprotect(0x7fb6ad84b000, 4096, PROT_READ) = 0
mprotect(0x7fb6adcb8000, 4096, PROT_READ) = 0
mprotect(0x7fb6aded0000, 4096, PROT_READ) = 0
brk(0xbb0000)                           = 0xbb0000
mprotect(0x7fb6b5172000, 16384, PROT_READ) = 0
mprotect(0x7fb6b5387000, 4096, PROT_READ) = 0
open("/sys/devices/system/cpu/online", O_RDONLY|O_CLOEXEC) = 4
read(4, "0-3\n", 8192)                  = 4
close(4)                                = 0
openat(AT_FDCWD, "/sys/devices/system/cpu",
O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) = 4
getdents(4, /* 17 entries */, 32768)    = 496
getdents(4, /* 0 entries */, 32768)     = 0
close(4)                                = 0
sched_getaffinity(18181, 8, {f})        = 8
--- SIGSEGV {si_signo=SIGSEGV, si_code=SEGV_ACCERR, si_addr=0x7fb6b547f240} ---
+++ killed by SIGSEGV +++
Segmentation fault


[0] http://pastebin.com/cFRJeqtf

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From howard at hobu.co  Sun Nov 23 17:49:53 2014
From: howard at hobu.co (Howard Butler)
Date: Sun, 23 Nov 2014 19:49:53 -0600
Subject: [pdal] segmentation fault
In-Reply-To: <CAK4m-3xAfocDsvDGapYbKT228Dm3s-zTj0-NtpxU6spusuPBDw@mail.gmail.com>
References: <CAK4m-3xAfocDsvDGapYbKT228Dm3s-zTj0-NtpxU6spusuPBDw@mail.gmail.com>
Message-ID: <A91936DF-0768-48A3-B7F3-7754AF3E6B7E@hobu.co>

Luca,

Please test master again as I think Brad discovered the culprit and fixed it on Friday. 

Howard 


> On Nov 21, 2014, at 3:02 AM, Luca Delucchi <lucadeluge at gmail.com> wrote:
> 
> Hi everybody,
> 
> I have a segmantation fault using all the pdal's modules.
> 
> Here [0] you can find a gdd output, and following the output of strace
> 
> open("/lib/x86_64-linux-gnu/libudev.so.1", O_RDONLY|O_CLOEXEC) = 4
> read(4, "\177ELF\2\1\1\0\0\0\0\0\0\0\0\0\3\0>\0\1\0\0\0\3004\0\0\0\0\0\0"...,
> 832) = 832
> fstat(4, {st_mode=S_IFREG|0644, st_size=59600, ...}) = 0
> mmap(NULL, 2156736, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 4,
> 0) = 0x7fb6ad63e000
> mprotect(0x7fb6ad64c000, 2093056, PROT_NONE) = 0
> mmap(0x7fb6ad84b000, 8192, PROT_READ|PROT_WRITE,
> MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 4, 0xd000) = 0x7fb6ad84b000
> close(4)                                = 0
> mprotect(0x7fb6ad84b000, 4096, PROT_READ) = 0
> mprotect(0x7fb6adcb8000, 4096, PROT_READ) = 0
> mprotect(0x7fb6aded0000, 4096, PROT_READ) = 0
> brk(0xbb0000)                           = 0xbb0000
> mprotect(0x7fb6b5172000, 16384, PROT_READ) = 0
> mprotect(0x7fb6b5387000, 4096, PROT_READ) = 0
> open("/sys/devices/system/cpu/online", O_RDONLY|O_CLOEXEC) = 4
> read(4, "0-3\n", 8192)                  = 4
> close(4)                                = 0
> openat(AT_FDCWD, "/sys/devices/system/cpu",
> O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) = 4
> getdents(4, /* 17 entries */, 32768)    = 496
> getdents(4, /* 0 entries */, 32768)     = 0
> close(4)                                = 0
> sched_getaffinity(18181, 8, {f})        = 8
> --- SIGSEGV {si_signo=SIGSEGV, si_code=SEGV_ACCERR, si_addr=0x7fb6b547f240} ---
> +++ killed by SIGSEGV +++
> Segmentation fault
> 
> 
> [0] http://pastebin.com/cFRJeqtf
> 
> -- 
> ciao
> Luca
> 
> http://gis.cri.fmach.it/delucchi/
> www.lucadelu.org
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal

From lucadeluge at gmail.com  Mon Nov 24 00:55:47 2014
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Mon, 24 Nov 2014 09:55:47 +0100
Subject: [pdal] segmentation fault
In-Reply-To: <A91936DF-0768-48A3-B7F3-7754AF3E6B7E@hobu.co>
References: <CAK4m-3xAfocDsvDGapYbKT228Dm3s-zTj0-NtpxU6spusuPBDw@mail.gmail.com>
	<A91936DF-0768-48A3-B7F3-7754AF3E6B7E@hobu.co>
Message-ID: <CAK4m-3wkvBc_NJV1G=iW3dWxiRVna1DeRXkSKaaQ84bWQLrMRg@mail.gmail.com>

On 24 November 2014 at 02:49, Howard Butler <howard at hobu.co> wrote:
> Luca,
>

Hi Howard,

> Please test master again as I think Brad discovered the culprit and fixed it on Friday.
>

I still have the same problem...

> Howard
>


-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From andrew.bell.ia at gmail.com  Mon Nov 24 08:24:00 2014
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 24 Nov 2014 10:24:00 -0600
Subject: [pdal] segmentation fault
In-Reply-To: <CAK4m-3wkvBc_NJV1G=iW3dWxiRVna1DeRXkSKaaQ84bWQLrMRg@mail.gmail.com>
References: <CAK4m-3xAfocDsvDGapYbKT228Dm3s-zTj0-NtpxU6spusuPBDw@mail.gmail.com>
	<A91936DF-0768-48A3-B7F3-7754AF3E6B7E@hobu.co>
	<CAK4m-3wkvBc_NJV1G=iW3dWxiRVna1DeRXkSKaaQ84bWQLrMRg@mail.gmail.com>
Message-ID: <CACJ51z2wvf__=k=bfLAbziP=nJ+p3RN7MQx+wXWD5fXLhM_kEA@mail.gmail.com>

The PDAL code requires C++ 11 and sets that as part of the build process.
The C++ 11 ABI requires all the libraries linked together also to be built
in conformance with the C++ ABI.  If this doesn't happen, there are rules
that can be violated that results the bad behavior that results in your
error.  The likely cause is that you're linking with a boost library that
wasn't built with C++ 11 ABI compatibility.  You can confirm this by
looking at the symbol table (I'd have to look to make sure what the exact
check is), but the fix is to build boost with C++ 11 enabled and then make
sure you link against the newly built boost libraries.

If this doesn't help, let me know and I'll try to confirm the exact steps
for verification and the fix.

This may also help:

http://clang-developers.42468.n3.nabble.com/C-11-ABI-Compatibility-and-Static-Initialization-td4038790.html


On Mon, Nov 24, 2014 at 2:55 AM, Luca Delucchi <lucadeluge at gmail.com> wrote:

> On 24 November 2014 at 02:49, Howard Butler <howard at hobu.co> wrote:
> > Luca,
> >
>
> Hi Howard,
>
> > Please test master again as I think Brad discovered the culprit and
> fixed it on Friday.
> >
>
> I still have the same problem...
>
> > Howard
> >
>
>
> --
> ciao
> Luca
>
> http://gis.cri.fmach.it/delucchi/
> www.lucadelu.org
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20141124/5911cefd/attachment.html>

From pramsey at cleverelephant.ca  Mon Nov 24 09:59:13 2014
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Mon, 24 Nov 2014 09:59:13 -0800
Subject: [pdal] Stage Naming Scheme
Message-ID: <CACowWR1coRPLJybwZq2+aso-Q3bY4+4gAVtYauaCe6O=BkdHGg@mail.gmail.com>

So, looks like there's been some serious shaking of the user-facing
tree on the naming of stages. Since the documentation is now out of
date for LAS, before going and fixing things I'd like to understand
the overall scheme and plan.

For LAS I see this (new)

    SET_STAGE_NAME("readers.las", "Las Reader")

For PgPointCloud I see this (old)

    SET_STAGE_NAME("drivers.pgpointcloud.reader",

If the new scheme is that "readers should be called simply "readers""
then I'll also re-name all the reader stages before re-documenting.

Are there any other re-namings going on?

Thanks,
P.

From brad.chambers at gmail.com  Mon Nov 24 10:36:13 2014
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Mon, 24 Nov 2014 13:36:13 -0500
Subject: [pdal] Stage Naming Scheme
In-Reply-To: <CACowWR1coRPLJybwZq2+aso-Q3bY4+4gAVtYauaCe6O=BkdHGg@mail.gmail.com>
References: <CACowWR1coRPLJybwZq2+aso-Q3bY4+4gAVtYauaCe6O=BkdHGg@mail.gmail.com>
Message-ID: <CAJyqqPyLwTUiHtec65--tO7vp2Ooz6QGZ-Wcz2sbmgDdMZQMxw@mail.gmail.com>

Paul,

If the new scheme is that "readers should be called simply "readers""
> then I'll also re-name all the reader stages before re-documenting.
>

You are correct, the plugin stages will need to be renamed according to the
new scheme. In the end, all stages should be named "readers.foo",
"writers.foo", "filters.foo", or "kernels.foo".


> Are there any other re-namings going on?
>

I do have a pull request pending that would also rename the "./drivers"
folder (formerly "./src/drivers") to "./io" to better convey the purpose of
this collection of stages.

As far as the tree re-org goes, I'm part way through moving the filters to
their own, root-level directory. After that, we'll do the same with the
kernels. This re-org breaks some of our previous assumptions about include
paths, what's public vs. private, etc. The plan is to get that all cleared
up and documented in the very near future.

Brad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20141124/062a7585/attachment.html>

From howard at hobu.co  Mon Nov 24 15:17:45 2014
From: howard at hobu.co (Howard Butler)
Date: Mon, 24 Nov 2014 16:17:45 -0700
Subject: [pdal] segmentation fault
In-Reply-To: <CACJ51z2wvf__=k=bfLAbziP=nJ+p3RN7MQx+wXWD5fXLhM_kEA@mail.gmail.com>
References: <CAK4m-3xAfocDsvDGapYbKT228Dm3s-zTj0-NtpxU6spusuPBDw@mail.gmail.com>
	<A91936DF-0768-48A3-B7F3-7754AF3E6B7E@hobu.co>
	<CAK4m-3wkvBc_NJV1G=iW3dWxiRVna1DeRXkSKaaQ84bWQLrMRg@mail.gmail.com>
	<CACJ51z2wvf__=k=bfLAbziP=nJ+p3RN7MQx+wXWD5fXLhM_kEA@mail.gmail.com>
Message-ID: <6B17F4DD-B0EE-4BB4-86E3-76E2672F1BC3@hobu.co>

Is there a way for PDAL to detect the condition of boost at compile time?


> On Nov 24, 2014, at 9:24 AM, Andrew Bell <andrew.bell.ia at gmail.com> wrote:
> 
> The PDAL code requires C++ 11 and sets that as part of the build process.  The C++ 11 ABI requires all the libraries linked together also to be built in conformance with the C++ ABI.  If this doesn't happen, there are rules that can be violated that results the bad behavior that results in your error.  The likely cause is that you're linking with a boost library that wasn't built with C++ 11 ABI compatibility.  You can confirm this by looking at the symbol table (I'd have to look to make sure what the exact check is), but the fix is to build boost with C++ 11 enabled and then make sure you link against the newly built boost libraries.
> 
> If this doesn't help, let me know and I'll try to confirm the exact steps for verification and the fix.
> 
> This may also help:
> 
> http://clang-developers.42468.n3.nabble.com/C-11-ABI-Compatibility-and-Static-Initialization-td4038790.html
> 
> 
>> On Mon, Nov 24, 2014 at 2:55 AM, Luca Delucchi <lucadeluge at gmail.com> wrote:
>> On 24 November 2014 at 02:49, Howard Butler <howard at hobu.co> wrote:
>> > Luca,
>> >
>> 
>> Hi Howard,
>> 
>> > Please test master again as I think Brad discovered the culprit and fixed it on Friday.
>> >
>> 
>> I still have the same problem...
>> 
>> > Howard
>> >
>> 
>> 
>> --
>> ciao
>> Luca
>> 
>> http://gis.cri.fmach.it/delucchi/
>> www.lucadelu.org
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/pdal
> 
> 
> 
> -- 
> Andrew Bell
> andrew.bell.ia at gmail.com
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20141124/1413e8f7/attachment.html>

