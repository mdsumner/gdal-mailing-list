From lucadeluge at gmail.com  Tue Dec  1 00:19:06 2015
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Tue, 1 Dec 2015 09:19:06 +0100
Subject: [pdal] compile pdal with Python support
In-Reply-To: <609DE3C6-E9D3-4188-94C8-14D251D1E3E6@hobu.co>
References: <CAK4m-3y8q-RiSLpD98R7SREnqEDMN1a06fWjBJT6nCKui-Hqyg@mail.gmail.com>
 <56571431-1453-4F5E-822B-9403BCE335B1@hobu.co>
 <CAK4m-3zG_kr3f=if2L_gJrXSFhAfKcsDCPOH0KsGCvG6X1f1UA@mail.gmail.com>
 <609DE3C6-E9D3-4188-94C8-14D251D1E3E6@hobu.co>
Message-ID: <CAK4m-3wBF+gLQcEX3vStFtSQ31ePwDFX7AOnpsPSGCTegrJGZA@mail.gmail.com>

On 30 November 2015 at 17:33, Howard Butler <howard at hobu.co> wrote:
>
>
> you may need to install cython too
>
> $ pip install cython
>

cython is already installed (version 0.19)

>
>>
>>> Then the following command should work:
>>>
>>> $ python setup.py build; python setup.py install
>>>
>>
>> we tried but we got this error
>>
>> python setup.py build
>> Compiling pdal/libpdalpython.pyx because it changed.
>> Cythonizing pdal/libpdalpython.pyx
>>
>> Error compiling Cython file:
>> ------------------------------------------------------------
>> ...
>> cdef class PyPipeline:
>>    cdef Pipeline *thisptr      # hold a c++ instance which we're wrapping
>>    def __cinit__(self, unicode xml):
>>        cdef char* x
>>        if PY_MAJOR_VERSION >= 3:
>>            self.thisptr = new Pipeline(xml.encode('UTF-8'))
>>                                                 ^
>> ------------------------------------------------------------
>>
>> pdal/libpdalpython.pyx:28:50: Obtaining 'char const *' from temporary
>> Python value
>> Traceback (most recent call last):
>>  File "setup.py", line 140, in <module>
>>    extensions= cythonize(extensions, language="c++")
>>  File "/usr/lib64/python2.7/site-packages/Cython/Build/Dependencies.py",
>> line 713, in cythonize
>>    cythonize_one(*args[1:])
>>  File "/usr/lib64/python2.7/site-packages/Cython/Build/Dependencies.py",
>> line 780, in cythonize_one
>>    raise CompileError(None, pyx_file)
>> Cython.Compiler.Errors.CompileError: pdal/libpdalpython.pyx
>>
>> There is something strange because we are running Python 2.7.5 but it
>> seems to check Python >= 3
>>
>> -
>
> One gotcha I can think of is building PDAL against Python 2.x and then building the Python extension using Python 3.x. That scenario definitely will not work.
>

no we are compiling Python extension using Python 2.7, Python 3.x is
not installed in our machine (scientific linux 7)

> I wonder if the error you are seeing is due to Cython being missing though. Please try that first.
>

no it is not related to this, maybe an old cython version?

> Howard
>



-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From lucadeluge at gmail.com  Tue Dec  1 03:41:12 2015
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Tue, 1 Dec 2015 12:41:12 +0100
Subject: [pdal] compile pdal with Python support
In-Reply-To: <CAK4m-3wBF+gLQcEX3vStFtSQ31ePwDFX7AOnpsPSGCTegrJGZA@mail.gmail.com>
References: <CAK4m-3y8q-RiSLpD98R7SREnqEDMN1a06fWjBJT6nCKui-Hqyg@mail.gmail.com>
 <56571431-1453-4F5E-822B-9403BCE335B1@hobu.co>
 <CAK4m-3zG_kr3f=if2L_gJrXSFhAfKcsDCPOH0KsGCvG6X1f1UA@mail.gmail.com>
 <609DE3C6-E9D3-4188-94C8-14D251D1E3E6@hobu.co>
 <CAK4m-3wBF+gLQcEX3vStFtSQ31ePwDFX7AOnpsPSGCTegrJGZA@mail.gmail.com>
Message-ID: <CAK4m-3wHVPHVhniqXovTuAyA70s8OpHMrpsSrywcVWQarx2jQQ@mail.gmail.com>

On 1 December 2015 at 09:19, Luca Delucchi <lucadeluge at gmail.com> wrote:
>
> no it is not related to this, maybe an old cython version?
>

installing cython using pip it compile.

Now the problem is to add python folder in the build instructions, I
opened a ticket for this
https://github.com/PDAL/PDAL/issues/1055

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From howard at hobu.co  Tue Dec  1 07:01:12 2015
From: howard at hobu.co (Howard Butler)
Date: Tue, 1 Dec 2015 09:01:12 -0600
Subject: [pdal] compile pdal with Python support
In-Reply-To: <CAK4m-3wHVPHVhniqXovTuAyA70s8OpHMrpsSrywcVWQarx2jQQ@mail.gmail.com>
References: <CAK4m-3y8q-RiSLpD98R7SREnqEDMN1a06fWjBJT6nCKui-Hqyg@mail.gmail.com>
 <56571431-1453-4F5E-822B-9403BCE335B1@hobu.co>
 <CAK4m-3zG_kr3f=if2L_gJrXSFhAfKcsDCPOH0KsGCvG6X1f1UA@mail.gmail.com>
 <609DE3C6-E9D3-4188-94C8-14D251D1E3E6@hobu.co>
 <CAK4m-3wBF+gLQcEX3vStFtSQ31ePwDFX7AOnpsPSGCTegrJGZA@mail.gmail.com>
 <CAK4m-3wHVPHVhniqXovTuAyA70s8OpHMrpsSrywcVWQarx2jQQ@mail.gmail.com>
Message-ID: <E4CA9CE5-4CC7-41AC-94A8-275DE0379ED2@hobu.co>


> On Dec 1, 2015, at 5:41 AM, Luca Delucchi <lucadeluge at gmail.com> wrote:
> 
> Now the problem is to add python folder in the build instructions, I
> opened a ticket for this
> https://github.com/PDAL/PDAL/issues/1055

I always found this behavior of GDAL rather frustrating and hard to control. If you're using Python inside of a virtual environment or something, it's difficult to know at cmake time where to install things. You end up manually installing anyway. That's why the "use PDAL from Python" code is just an extension that can be easy_install'd at the moment.

Howard


From lucadeluge at gmail.com  Tue Dec  1 23:51:09 2015
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Wed, 2 Dec 2015 08:51:09 +0100
Subject: [pdal] compile pdal with Python support
In-Reply-To: <E4CA9CE5-4CC7-41AC-94A8-275DE0379ED2@hobu.co>
References: <CAK4m-3y8q-RiSLpD98R7SREnqEDMN1a06fWjBJT6nCKui-Hqyg@mail.gmail.com>
 <56571431-1453-4F5E-822B-9403BCE335B1@hobu.co>
 <CAK4m-3zG_kr3f=if2L_gJrXSFhAfKcsDCPOH0KsGCvG6X1f1UA@mail.gmail.com>
 <609DE3C6-E9D3-4188-94C8-14D251D1E3E6@hobu.co>
 <CAK4m-3wBF+gLQcEX3vStFtSQ31ePwDFX7AOnpsPSGCTegrJGZA@mail.gmail.com>
 <CAK4m-3wHVPHVhniqXovTuAyA70s8OpHMrpsSrywcVWQarx2jQQ@mail.gmail.com>
 <E4CA9CE5-4CC7-41AC-94A8-275DE0379ED2@hobu.co>
Message-ID: <CAK4m-3yZJ8CnAL10N744gd_Y3AWL_DfW3bTSrwokB7mfF+OaHw@mail.gmail.com>

On 1 December 2015 at 16:01, Howard Butler <howard at hobu.co> wrote:
>
> I always found this behavior of GDAL rather frustrating and hard to control. If you're using Python inside of a virtual environment or something, it's difficult to know at cmake time where to install things. You end up manually installing anyway. That's why the "use PDAL from Python" code is just an extension that can be easy_install'd at the moment.
>

ok, but with pip we have this error

[lucadelu at giscluster ~]$ sudo pip install PDAL
Collecting PDAL
  Could not find a version that satisfies the requirement PDAL (from versions: )
No matching distribution found for PDAL


> Howard
>


-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From howard at hobu.co  Wed Dec  2 07:49:42 2015
From: howard at hobu.co (Howard Butler)
Date: Wed, 2 Dec 2015 09:49:42 -0600
Subject: [pdal] compile pdal with Python support
In-Reply-To: <CAK4m-3yZJ8CnAL10N744gd_Y3AWL_DfW3bTSrwokB7mfF+OaHw@mail.gmail.com>
References: <CAK4m-3y8q-RiSLpD98R7SREnqEDMN1a06fWjBJT6nCKui-Hqyg@mail.gmail.com>
 <56571431-1453-4F5E-822B-9403BCE335B1@hobu.co>
 <CAK4m-3zG_kr3f=if2L_gJrXSFhAfKcsDCPOH0KsGCvG6X1f1UA@mail.gmail.com>
 <609DE3C6-E9D3-4188-94C8-14D251D1E3E6@hobu.co>
 <CAK4m-3wBF+gLQcEX3vStFtSQ31ePwDFX7AOnpsPSGCTegrJGZA@mail.gmail.com>
 <CAK4m-3wHVPHVhniqXovTuAyA70s8OpHMrpsSrywcVWQarx2jQQ@mail.gmail.com>
 <E4CA9CE5-4CC7-41AC-94A8-275DE0379ED2@hobu.co>
 <CAK4m-3yZJ8CnAL10N744gd_Y3AWL_DfW3bTSrwokB7mfF+OaHw@mail.gmail.com>
Message-ID: <EDF34A85-7AA6-4F2C-AAF7-588A062C0498@hobu.co>


> On Dec 2, 2015, at 1:51 AM, Luca Delucchi <lucadeluge at gmail.com> wrote:
> 
> On 1 December 2015 at 16:01, Howard Butler <howard at hobu.co> wrote:
>> 
>> I always found this behavior of GDAL rather frustrating and hard to control. If you're using Python inside of a virtual environment or something, it's difficult to know at cmake time where to install things. You end up manually installing anyway. That's why the "use PDAL from Python" code is just an extension that can be easy_install'd at the moment.
>> 
> 
> ok, but with pip we have this error
> 
> [lucadelu at giscluster ~]$ sudo pip install PDAL
> Collecting PDAL
>  Could not find a version that satisfies the requirement PDAL (from versions: )
> No matching distribution found for PDAL
> 

What does pdal-config --version print? The Python setup.py uses that to determine version information, but maybe something isn't quite right.

From lucadeluge at gmail.com  Wed Dec  2 07:51:49 2015
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Wed, 2 Dec 2015 16:51:49 +0100
Subject: [pdal] compile pdal with Python support
In-Reply-To: <EDF34A85-7AA6-4F2C-AAF7-588A062C0498@hobu.co>
References: <CAK4m-3y8q-RiSLpD98R7SREnqEDMN1a06fWjBJT6nCKui-Hqyg@mail.gmail.com>
 <56571431-1453-4F5E-822B-9403BCE335B1@hobu.co>
 <CAK4m-3zG_kr3f=if2L_gJrXSFhAfKcsDCPOH0KsGCvG6X1f1UA@mail.gmail.com>
 <609DE3C6-E9D3-4188-94C8-14D251D1E3E6@hobu.co>
 <CAK4m-3wBF+gLQcEX3vStFtSQ31ePwDFX7AOnpsPSGCTegrJGZA@mail.gmail.com>
 <CAK4m-3wHVPHVhniqXovTuAyA70s8OpHMrpsSrywcVWQarx2jQQ@mail.gmail.com>
 <E4CA9CE5-4CC7-41AC-94A8-275DE0379ED2@hobu.co>
 <CAK4m-3yZJ8CnAL10N744gd_Y3AWL_DfW3bTSrwokB7mfF+OaHw@mail.gmail.com>
 <EDF34A85-7AA6-4F2C-AAF7-588A062C0498@hobu.co>
Message-ID: <CAK4m-3zqs4XjswGXDGMm6Pw-TzFxiZAEyVAfkYs-i4uv8g_bXg@mail.gmail.com>

On 2 December 2015 at 16:49, Howard Butler <howard at hobu.co> wrote:
>
> What does pdal-config --version print? The Python setup.py uses that to determine version information, but maybe something isn't quite right.

[lucadelu at giscluster ~]$ pdal-config --version
1.1.0

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From howard at hobu.co  Wed Dec  2 07:54:50 2015
From: howard at hobu.co (Howard Butler)
Date: Wed, 2 Dec 2015 09:54:50 -0600
Subject: [pdal] compile pdal with Python support
In-Reply-To: <CAK4m-3zqs4XjswGXDGMm6Pw-TzFxiZAEyVAfkYs-i4uv8g_bXg@mail.gmail.com>
References: <CAK4m-3y8q-RiSLpD98R7SREnqEDMN1a06fWjBJT6nCKui-Hqyg@mail.gmail.com>
 <56571431-1453-4F5E-822B-9403BCE335B1@hobu.co>
 <CAK4m-3zG_kr3f=if2L_gJrXSFhAfKcsDCPOH0KsGCvG6X1f1UA@mail.gmail.com>
 <609DE3C6-E9D3-4188-94C8-14D251D1E3E6@hobu.co>
 <CAK4m-3wBF+gLQcEX3vStFtSQ31ePwDFX7AOnpsPSGCTegrJGZA@mail.gmail.com>
 <CAK4m-3wHVPHVhniqXovTuAyA70s8OpHMrpsSrywcVWQarx2jQQ@mail.gmail.com>
 <E4CA9CE5-4CC7-41AC-94A8-275DE0379ED2@hobu.co>
 <CAK4m-3yZJ8CnAL10N744gd_Y3AWL_DfW3bTSrwokB7mfF+OaHw@mail.gmail.com>
 <EDF34A85-7AA6-4F2C-AAF7-588A062C0498@hobu.co>
 <CAK4m-3zqs4XjswGXDGMm6Pw-TzFxiZAEyVAfkYs-i4uv8g_bXg@mail.gmail.com>
Message-ID: <3A06CFE8-23BD-45EA-9069-1C922F32A35C@hobu.co>


> On Dec 2, 2015, at 9:51 AM, Luca Delucchi <lucadeluge at gmail.com> wrote:
> 
> On 2 December 2015 at 16:49, Howard Butler <howard at hobu.co> wrote:
>> 
>> What does pdal-config --version print? The Python setup.py uses that to determine version information, but maybe something isn't quite right.
> 
> [lucadelu at giscluster ~]$ pdal-config --version
> 1.1.0

I see I neglected to bump the Python extension version as part of the release process. Let me push a new one, and I'll ping you. Sorry for the trouble.

Howard


From howard at hobu.co  Wed Dec  2 08:16:57 2015
From: howard at hobu.co (Howard Butler)
Date: Wed, 2 Dec 2015 10:16:57 -0600
Subject: [pdal] compile pdal with Python support
In-Reply-To: <3A06CFE8-23BD-45EA-9069-1C922F32A35C@hobu.co>
References: <CAK4m-3y8q-RiSLpD98R7SREnqEDMN1a06fWjBJT6nCKui-Hqyg@mail.gmail.com>
 <56571431-1453-4F5E-822B-9403BCE335B1@hobu.co>
 <CAK4m-3zG_kr3f=if2L_gJrXSFhAfKcsDCPOH0KsGCvG6X1f1UA@mail.gmail.com>
 <609DE3C6-E9D3-4188-94C8-14D251D1E3E6@hobu.co>
 <CAK4m-3wBF+gLQcEX3vStFtSQ31ePwDFX7AOnpsPSGCTegrJGZA@mail.gmail.com>
 <CAK4m-3wHVPHVhniqXovTuAyA70s8OpHMrpsSrywcVWQarx2jQQ@mail.gmail.com>
 <E4CA9CE5-4CC7-41AC-94A8-275DE0379ED2@hobu.co>
 <CAK4m-3yZJ8CnAL10N744gd_Y3AWL_DfW3bTSrwokB7mfF+OaHw@mail.gmail.com>
 <EDF34A85-7AA6-4F2C-AAF7-588A062C0498@hobu.co>
 <CAK4m-3zqs4XjswGXDGMm6Pw-TzFxiZAEyVAfkYs-i4uv8g_bXg@mail.gmail.com>
 <3A06CFE8-23BD-45EA-9069-1C922F32A35C@hobu.co>
Message-ID: <24BED67D-1DBE-4495-828E-12A3DDE768B0@hobu.co>


> On Dec 2, 2015, at 9:54 AM, Howard Butler <howard at hobu.co> wrote:
> 
> 
>> On Dec 2, 2015, at 9:51 AM, Luca Delucchi <lucadeluge at gmail.com> wrote:
>> 
>> On 2 December 2015 at 16:49, Howard Butler <howard at hobu.co> wrote:
>>> 
>>> What does pdal-config --version print? The Python setup.py uses that to determine version information, but maybe something isn't quite right.
>> 
>> [lucadelu at giscluster ~]$ pdal-config --version
>> 1.1.0
> 
> I see I neglected to bump the Python extension version as part of the release process. Let me push a new one, and I'll ping you. Sorry for the trouble.

A new version has been pushed to PyPI. Please let me know if it works for you.

Howard


From lucadeluge at gmail.com  Wed Dec  2 08:19:24 2015
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Wed, 2 Dec 2015 17:19:24 +0100
Subject: [pdal] compile pdal with Python support
In-Reply-To: <24BED67D-1DBE-4495-828E-12A3DDE768B0@hobu.co>
References: <CAK4m-3y8q-RiSLpD98R7SREnqEDMN1a06fWjBJT6nCKui-Hqyg@mail.gmail.com>
 <56571431-1453-4F5E-822B-9403BCE335B1@hobu.co>
 <CAK4m-3zG_kr3f=if2L_gJrXSFhAfKcsDCPOH0KsGCvG6X1f1UA@mail.gmail.com>
 <609DE3C6-E9D3-4188-94C8-14D251D1E3E6@hobu.co>
 <CAK4m-3wBF+gLQcEX3vStFtSQ31ePwDFX7AOnpsPSGCTegrJGZA@mail.gmail.com>
 <CAK4m-3wHVPHVhniqXovTuAyA70s8OpHMrpsSrywcVWQarx2jQQ@mail.gmail.com>
 <E4CA9CE5-4CC7-41AC-94A8-275DE0379ED2@hobu.co>
 <CAK4m-3yZJ8CnAL10N744gd_Y3AWL_DfW3bTSrwokB7mfF+OaHw@mail.gmail.com>
 <EDF34A85-7AA6-4F2C-AAF7-588A062C0498@hobu.co>
 <CAK4m-3zqs4XjswGXDGMm6Pw-TzFxiZAEyVAfkYs-i4uv8g_bXg@mail.gmail.com>
 <3A06CFE8-23BD-45EA-9069-1C922F32A35C@hobu.co>
 <24BED67D-1DBE-4495-828E-12A3DDE768B0@hobu.co>
Message-ID: <CAK4m-3w-MYQ_S=82kJr_WHnQRexx+-BALz0YJ-jgMYVrrxo=2A@mail.gmail.com>

On 2 December 2015 at 17:16, Howard Butler <howard at hobu.co> wrote:
>
> A new version has been pushed to PyPI. Please let me know if it works for you.
>

not yet

sudo pip install -v PDAL
Collecting PDAL
  Getting page https://pypi.python.org/simple/pdal/
  1 location(s) to search for versions of PDAL:
  * https://pypi.python.org/simple/pdal/
  Getting page https://pypi.python.org/simple/pdal/
  Analyzing links from page https://pypi.python.org/simple/pdal/
  Could not find a version that satisfies the requirement PDAL (from versions: )
Cleaning up...
No matching distribution found for PDAL
Exception information:
Traceback (most recent call last):
  File "/usr/lib/python2.7/site-packages/pip/basecommand.py", line 211, in main
    status = self.run(options, args)
  File "/usr/lib/python2.7/site-packages/pip/commands/install.py",
line 294, in run
    requirement_set.prepare_files(finder)
  File "/usr/lib/python2.7/site-packages/pip/req/req_set.py", line
334, in prepare_files
    functools.partial(self._prepare_file, finder))
  File "/usr/lib/python2.7/site-packages/pip/req/req_set.py", line
321, in _walk_req_to_install
    more_reqs = handler(req_to_install)
  File "/usr/lib/python2.7/site-packages/pip/req/req_set.py", line
461, in _prepare_file
    req_to_install.populate_link(finder, self.upgrade)
  File "/usr/lib/python2.7/site-packages/pip/req/req_install.py", line
250, in populate_link
    self.link = finder.find_requirement(self, upgrade)
  File "/usr/lib/python2.7/site-packages/pip/index.py", line 571, in
find_requirement
    'No matching distribution found for %s' % req
DistributionNotFound: No matching distribution found for PDAL


> Howard
>



-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From howard at hobu.co  Wed Dec  2 08:22:41 2015
From: howard at hobu.co (Howard Butler)
Date: Wed, 2 Dec 2015 10:22:41 -0600
Subject: [pdal] compile pdal with Python support
In-Reply-To: <CAK4m-3w-MYQ_S=82kJr_WHnQRexx+-BALz0YJ-jgMYVrrxo=2A@mail.gmail.com>
References: <CAK4m-3y8q-RiSLpD98R7SREnqEDMN1a06fWjBJT6nCKui-Hqyg@mail.gmail.com>
 <56571431-1453-4F5E-822B-9403BCE335B1@hobu.co>
 <CAK4m-3zG_kr3f=if2L_gJrXSFhAfKcsDCPOH0KsGCvG6X1f1UA@mail.gmail.com>
 <609DE3C6-E9D3-4188-94C8-14D251D1E3E6@hobu.co>
 <CAK4m-3wBF+gLQcEX3vStFtSQ31ePwDFX7AOnpsPSGCTegrJGZA@mail.gmail.com>
 <CAK4m-3wHVPHVhniqXovTuAyA70s8OpHMrpsSrywcVWQarx2jQQ@mail.gmail.com>
 <E4CA9CE5-4CC7-41AC-94A8-275DE0379ED2@hobu.co>
 <CAK4m-3yZJ8CnAL10N744gd_Y3AWL_DfW3bTSrwokB7mfF+OaHw@mail.gmail.com>
 <EDF34A85-7AA6-4F2C-AAF7-588A062C0498@hobu.co>
 <CAK4m-3zqs4XjswGXDGMm6Pw-TzFxiZAEyVAfkYs-i4uv8g_bXg@mail.gmail.com>
 <3A06CFE8-23BD-45EA-9069-1C922F32A35C@hobu.co>
 <24BED67D-1DBE-4495-828E-12A3DDE768B0@hobu.co>
 <CAK4m-3w-MYQ_S=82kJr_WHnQRexx+-BALz0YJ-jgMYVrrxo=2A@mail.gmail.com>
Message-ID: <3A83D628-3EA9-4B4F-B6F1-DC6F6462A110@hobu.co>


> On Dec 2, 2015, at 10:19 AM, Luca Delucchi <lucadeluge at gmail.com> wrote:
> 
> On 2 December 2015 at 17:16, Howard Butler <howard at hobu.co> wrote:
>> 
>> A new version has been pushed to PyPI. Please let me know if it works for you.
>> 
> 
> not yet
> 
> sudo pip install -v PDAL
> Collecting PDAL
>  Getting page https://pypi.python.org/simple/pdal/
>  1 location(s) to search for versions of PDAL:
>  * https://pypi.python.org/simple/pdal/
>  Getting page https://pypi.python.org/simple/pdal/
>  Analyzing links from page https://pypi.python.org/simple/pdal/
>  Could not find a version that satisfies the requirement PDAL (from versions: )
> Cleaning up...
> No matching distribution found for PDAL
> Exception information:
> Traceback (most recent call last):
>  File "/usr/lib/python2.7/site-packages/pip/basecommand.py", line 211, in main
>    status = self.run(options, args)
>  File "/usr/lib/python2.7/site-packages/pip/commands/install.py",
> line 294, in run
>    requirement_set.prepare_files(finder)
>  File "/usr/lib/python2.7/site-packages/pip/req/req_set.py", line
> 334, in prepare_files
>    functools.partial(self._prepare_file, finder))
>  File "/usr/lib/python2.7/site-packages/pip/req/req_set.py", line
> 321, in _walk_req_to_install
>    more_reqs = handler(req_to_install)
>  File "/usr/lib/python2.7/site-packages/pip/req/req_set.py", line
> 461, in _prepare_file
>    req_to_install.populate_link(finder, self.upgrade)
>  File "/usr/lib/python2.7/site-packages/pip/req/req_install.py", line
> 250, in populate_link
>    self.link = finder.find_requirement(self, upgrade)
>  File "/usr/lib/python2.7/site-packages/pip/index.py", line 571, in
> find_requirement
>    'No matching distribution found for %s' % req
> DistributionNotFound: No matching distribution found for PDAL

Hmph, there must be something I am not doing correctly when configuring a Cython extension for PyPI. I'll try to track this down more.

One thing that should get you going is after you've installed PDAL on your system, fetch a copy of the PDAL tree, cd ./python, and then issue 'python setup.py install'.

Howard

From howard at hobu.co  Wed Dec  2 08:41:02 2015
From: howard at hobu.co (Howard Butler)
Date: Wed, 2 Dec 2015 10:41:02 -0600
Subject: [pdal] compile pdal with Python support
In-Reply-To: <3A83D628-3EA9-4B4F-B6F1-DC6F6462A110@hobu.co>
References: <CAK4m-3y8q-RiSLpD98R7SREnqEDMN1a06fWjBJT6nCKui-Hqyg@mail.gmail.com>
 <56571431-1453-4F5E-822B-9403BCE335B1@hobu.co>
 <CAK4m-3zG_kr3f=if2L_gJrXSFhAfKcsDCPOH0KsGCvG6X1f1UA@mail.gmail.com>
 <609DE3C6-E9D3-4188-94C8-14D251D1E3E6@hobu.co>
 <CAK4m-3wBF+gLQcEX3vStFtSQ31ePwDFX7AOnpsPSGCTegrJGZA@mail.gmail.com>
 <CAK4m-3wHVPHVhniqXovTuAyA70s8OpHMrpsSrywcVWQarx2jQQ@mail.gmail.com>
 <E4CA9CE5-4CC7-41AC-94A8-275DE0379ED2@hobu.co>
 <CAK4m-3yZJ8CnAL10N744gd_Y3AWL_DfW3bTSrwokB7mfF+OaHw@mail.gmail.com>
 <EDF34A85-7AA6-4F2C-AAF7-588A062C0498@hobu.co>
 <CAK4m-3zqs4XjswGXDGMm6Pw-TzFxiZAEyVAfkYs-i4uv8g_bXg@mail.gmail.com>
 <3A06CFE8-23BD-45EA-9069-1C922F32A35C@hobu.co>
 <24BED67D-1DBE-4495-828E-12A3DDE768B0@hobu.co>
 <CAK4m-3w-MYQ_S=82kJr_WHnQRexx+-BALz0YJ-jgMYVrrxo=2A@mail.gmail.com>
 <3A83D628-3EA9-4B4F-B6F1-DC6F6462A110@hobu.co>
Message-ID: <03CD74B7-83C9-4AA8-9819-3BE4AA3D666E@hobu.co>


> On Dec 2, 2015, at 10:22 AM, Howard Butler <howard at hobu.co> wrote:
> 
> Hmph, there must be something I am not doing correctly when configuring a Cython extension for PyPI. I'll try to track this down more.

ok, 

$ pip install PDAL

now works for me when I have PDAL installed and pdal-config on the PATH.

Howard

From howard at hobu.co  Wed Dec  2 13:46:08 2015
From: howard at hobu.co (Howard Butler)
Date: Wed, 2 Dec 2015 15:46:08 -0600
Subject: [pdal] Docker for PDAL
Message-ID: <8F0CC0CF-29B0-4F00-B6C9-1DBED896A7C1@hobu.co>

All,

In an effort to improve our Travis continuous integration times [1] (the automated tests that run every time we push new code to the PDAL repository), we have implemented PDAL Docker images. There are currently two images available -- the first is pdal/dependencies, and it is used to fetch/configure/build most of the stuff described in the compilation document [2]. The second is the PDAL image itself, which our Travis configuration doesn't actually use, but other people may find useful. 

You can find these images on hub.docker.com at https://hub.docker.com/r/pdal/dependencies/ and https://hub.docker.com/r/pdal/master/  I am working on a document much like the Vagrant tutorial that will show how you can use the Docker configuration to do things with PDAL. It should be available in the next day or two.

Thanks to Brad Chambers, Michael Gerlek, and Mike Smith for their Dockerfile work that bootstrapped this effort.

Howard

[1] https://travis-ci.org/PDAL/PDAL/builds
[2] http://www.pdal.io/compilation/unix.html

From howard at hobu.co  Wed Dec  2 14:18:59 2015
From: howard at hobu.co (Howard Butler)
Date: Wed, 2 Dec 2015 16:18:59 -0600
Subject: [pdal] reader text file
In-Reply-To: <56565263.7000601@gmail.com>
References: <mailman.43.1448481602.25587.pdal@lists.osgeo.org>
 <56565263.7000601@gmail.com>
Message-ID: <F7F19AF9-339C-4F5F-9447-093F480AD3EA@hobu.co>


> On Nov 25, 2015, at 6:29 PM, Jed Frechette <jedfrechette at gmail.com> wrote:
> 
> +1 for a text file reader. As much as I hate them, dealing with text files is one of the main things that keeps me from using PDAL as much as I would like.
> 
> For the interface it seems like just mirroring the writers.text Options would be a good start. On top of that being able to skip a certain number of header lines and set a spatialreference would also be great.

I think I may take a crack at this in a slightly unconventional way -- I will implement a readers.python. The idea would be that you write a python script that turns your text file, whatever it is, into a numpy array, and then we'll just suck in that numpy array into PDAL with the types that are specified. 

For simple formats, the Python script will be super simple, and for complex stuff, well, PDAL doesn't have to be responsible for it ;)

I can see this having other uses too. It doesn't mean there won't ever be a readers.text that is dedicated, but it should give us a stopgap in the interim.

Howard

From lucadeluge at gmail.com  Wed Dec  2 14:34:48 2015
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Wed, 2 Dec 2015 23:34:48 +0100
Subject: [pdal] reader text file
In-Reply-To: <F7F19AF9-339C-4F5F-9447-093F480AD3EA@hobu.co>
References: <mailman.43.1448481602.25587.pdal@lists.osgeo.org>
 <56565263.7000601@gmail.com> <F7F19AF9-339C-4F5F-9447-093F480AD3EA@hobu.co>
Message-ID: <CAK4m-3xPavRYT4yyRxM8hCNXk3UGxWKUmN-b=mX+bZ2va7EggQ@mail.gmail.com>

On 2 December 2015 at 23:18, Howard Butler <howard at hobu.co> wrote:
>
>
> I think I may take a crack at this in a slightly unconventional way -- I will implement a readers.python. The idea would be that you write a python script that turns your text file, whatever it is, into a numpy array, and then we'll just suck in that numpy array into PDAL with the types that are specified.
>
> For simple formats, the Python script will be super simple, and for complex stuff, well, PDAL doesn't have to be responsible for it ;)
>

I like the idea, but I cannot image how to use it for example in a xml pipeline

>
> Howard
>


-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From remi.cura at gmail.com  Thu Dec  3 01:27:57 2015
From: remi.cura at gmail.com (=?UTF-8?Q?R=C3=A9mi_Cura?=)
Date: Thu, 3 Dec 2015 10:27:57 +0100
Subject: [pdal] reader text file
In-Reply-To: <CAK4m-3xPavRYT4yyRxM8hCNXk3UGxWKUmN-b=mX+bZ2va7EggQ@mail.gmail.com>
References: <mailman.43.1448481602.25587.pdal@lists.osgeo.org>
 <56565263.7000601@gmail.com>
 <F7F19AF9-339C-4F5F-9447-093F480AD3EA@hobu.co>
 <CAK4m-3xPavRYT4yyRxM8hCNXk3UGxWKUmN-b=mX+bZ2va7EggQ@mail.gmail.com>
Message-ID: <CAJvUf_skTvv=RNbSr3Y4tjE_18Zjrgv2jABaZozAXUPL_Msqgw@mail.gmail.com>

Looks good !
Cheers,
Rémi C

2015-12-02 23:34 GMT+01:00 Luca Delucchi <lucadeluge at gmail.com>:

> On 2 December 2015 at 23:18, Howard Butler <howard at hobu.co> wrote:
> >
> >
> > I think I may take a crack at this in a slightly unconventional way -- I
> will implement a readers.python. The idea would be that you write a python
> script that turns your text file, whatever it is, into a numpy array, and
> then we'll just suck in that numpy array into PDAL with the types that are
> specified.
> >
> > For simple formats, the Python script will be super simple, and for
> complex stuff, well, PDAL doesn't have to be responsible for it ;)
> >
>
> I like the idea, but I cannot image how to use it for example in a xml
> pipeline
>
> >
> > Howard
> >
>
>
> --
> ciao
> Luca
>
> http://gis.cri.fmach.it/delucchi/
> www.lucadelu.org
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151203/9ff7b815/attachment.html>

From jedfrechette at gmail.com  Thu Dec  3 06:40:30 2015
From: jedfrechette at gmail.com (Jed Frechette)
Date: Thu, 3 Dec 2015 07:40:30 -0700
Subject: [pdal] reader text file
In-Reply-To: <F7F19AF9-339C-4F5F-9447-093F480AD3EA@hobu.co>
References: <mailman.43.1448481602.25587.pdal@lists.osgeo.org>
 <56565263.7000601@gmail.com> <F7F19AF9-339C-4F5F-9447-093F480AD3EA@hobu.co>
Message-ID: <5660545E.6020304@gmail.com>

On 12/2/2015 3:18 PM, Howard Butler wrote:
 > I think I may take a crack at this in a slightly unconventional way
 > -- I will implement a readers.python. The idea would be that you
 > write a python script that turns your text file, whatever it is, into
 > a numpy array, and then we'll just suck in that numpy array into PDAL
 > with the types that are specified.

That seems like a really nice solution that adds a lot of functionality 
for 'free'. Using it to write a reader for the SPD format [1] using one 
of the Python HDF5 libraries would probably be pretty easy, for example, 
or generating synthetic data...

[1] http://www.spdlib.org/doku.php?id=spdlib:users:formats:spd

-- 
Jed Frechette
-- 
Jed Frechette

From andrew.bell.ia at gmail.com  Thu Dec  3 06:53:53 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 3 Dec 2015 08:53:53 -0600
Subject: [pdal] reader text file
In-Reply-To: <F7F19AF9-339C-4F5F-9447-093F480AD3EA@hobu.co>
References: <mailman.43.1448481602.25587.pdal@lists.osgeo.org>
 <56565263.7000601@gmail.com>
 <F7F19AF9-339C-4F5F-9447-093F480AD3EA@hobu.co>
Message-ID: <CACJ51z0ZxAuCScTyzFGe_-W6NL=A5Zka2C9e0i_qnNHt-o4=zA@mail.gmail.com>

On Wed, Dec 2, 2015 at 4:18 PM, Howard Butler <howard at hobu.co> wrote:

>
> > On Nov 25, 2015, at 6:29 PM, Jed Frechette <jedfrechette at gmail.com>
> wrote:
> >
> > +1 for a text file reader. As much as I hate them, dealing with text
> files is one of the main things that keeps me from using PDAL as much as I
> would like.
> >
> > For the interface it seems like just mirroring the writers.text Options
> would be a good start. On top of that being able to skip a certain number
> of header lines and set a spatialreference would also be great.
>
> I think I may take a crack at this in a slightly unconventional way -- I
> will implement a readers.python. The idea would be that you write a python
> script that turns your text file, whatever it is, into a numpy array, and
> then we'll just suck in that numpy array into PDAL with the types that are
> specified.
>
> For simple formats, the Python script will be super simple, and for
> complex stuff, well, PDAL doesn't have to be responsible for it ;)
>
> I can see this having other uses too. It doesn't mean there won't ever be
> a readers.text that is dedicated, but it should give us a stopgap in the
> interim.
>

I think we already have this.  It's called filters.programmable.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151203/81b7368d/attachment.html>

From howard at hobu.co  Thu Dec  3 06:59:20 2015
From: howard at hobu.co (Howard Butler)
Date: Thu, 3 Dec 2015 08:59:20 -0600
Subject: [pdal] reader text file
In-Reply-To: <CACJ51z0ZxAuCScTyzFGe_-W6NL=A5Zka2C9e0i_qnNHt-o4=zA@mail.gmail.com>
References: <mailman.43.1448481602.25587.pdal@lists.osgeo.org>
 <56565263.7000601@gmail.com> <F7F19AF9-339C-4F5F-9447-093F480AD3EA@hobu.co>
 <CACJ51z0ZxAuCScTyzFGe_-W6NL=A5Zka2C9e0i_qnNHt-o4=zA@mail.gmail.com>
Message-ID: <38CFFA80-C2E4-4753-8AE3-0D0EA2D77DF3@hobu.co>


> On Dec 3, 2015, at 8:53 AM, Andrew Bell <andrew.bell.ia at gmail.com> wrote:
> 
> I think we already have this.  It's called filters.programmable.

Except that filters.programmable doesn't define a PointTable/PointView. It can only operate inline. 

A simple readers.text that takes in just plain doubles, a map of dimension names, and does no magical data munging would be really useful. Combined with readers.python, I think we would have the majority of the use cases covered.

Howard


From rdzur at bhinc.com  Fri Dec  4 13:26:43 2015
From: rdzur at bhinc.com (Robert Dzur)
Date: Fri, 4 Dec 2015 21:26:43 +0000
Subject: [pdal] LAS 1.4 & WKT vertical coordinate system and
Message-ID: <6558b36bd05a45da9365e0aa5e00c349@A-BHI-MAIL.BHI.CORP>

Hello,

With pdal translate we are trying to add WKT vertical coordinate system information to a 1.4 LAS point cloud without modifying any other aspects of the point cloud.

We are utilizing the 'forward' option on the writers.las in the following pdal translate command to maintain point cloud properties, however, in the output file it appears that we are getting some modifications that we would like to avoid.

pdal translate --writers.las.a_srs="PROJCS[\"NAD83(HARN) / New Mexico Central (ftUS)\",GEOGCS[\"NAD83(HARN)\",DATUM[\"NAD83_High_Accuracy_Reference_Network\",SPHEROID[\"GRS 1980\",6378137,298.257222101,AUTHORITY[\"EPSG\",\"7019\"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[\"EPSG\",\"6152\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4152\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",31],PARAMETER[\"central_meridian\",-106.25],PARAMETER[\"scale_factor\",0.9999],PARAMETER[\"false_easting\",1640416.667],PARAMETER[\"false_northing\",0],UNIT[\"US survey foot\",0.3048006096012192,AUTHORITY[\"EPSG\",\"9003\"]],AXIS[\"X\",EAST],AXIS[\"Y\",NORTH],AUTHORITY[\"EPSG\",\"2903\"]]VERTCS[\"North American Vertical Datum of 1988\",VERT_DATUM[\"North American Vertical Datum 1988\",2005,AUTHORITY[\"EPSG\",\"5103\"]],UNIT[\"US survey foot\",1.0],AXIS[\"Gravity-related height\",UP],AUTHORITY[\"EPSG\",\"5703\"]]" pc16901815_flagged_fme_combined.las test_pdal_WKT.las --writers.las.forward="all"

The input las "pc16901815_flagged_fme_combined.las" has GPS Type Bit Field set to 1 which appears to get reset to 0 on output (as noted in the altered output Global Encoding value).  Also added are a number of VLR (GeoTIFF included)-and we'd like to maintain only WKT definitions.  Also noteworthy is that the "overlap" bit flag on all the points appears to get reset on output as well so that the point cloud drops the definitions for those points that were defined with an overlap classification flag in the input las file.

Thanks in advance for any advice.

Rob Dzur
--

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151204/ec440bd1/attachment.html>

From andrew.bell.ia at gmail.com  Mon Dec  7 16:36:11 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 7 Dec 2015 18:36:11 -0600
Subject: [pdal] LAS 1.4 & WKT vertical coordinate system and
In-Reply-To: <6558b36bd05a45da9365e0aa5e00c349@A-BHI-MAIL.BHI.CORP>
References: <6558b36bd05a45da9365e0aa5e00c349@A-BHI-MAIL.BHI.CORP>
Message-ID: <CACJ51z3goHpUxPdy7ML=STjcdAQA_o+sWZw5hEgmhGMOAYuvPA@mail.gmail.com>

On Fri, Dec 4, 2015 at 3:26 PM, Robert Dzur <rdzur at bhinc.com> wrote:

> Hello,
>
>
>
> With pdal translate we are trying to add WKT vertical coordinate system
> information to a 1.4 LAS point cloud without modifying any other aspects of
> the point cloud.
>
>
>
> We are utilizing the ‘forward’ option on the writers.las in the following
> pdal translate command to maintain point cloud properties, however, in the
> output file it appears that we are getting some modifications that we would
> like to avoid.
>
>
>
> pdal translate --writers.las.a_srs="PROJCS[\"NAD83(HARN) / New Mexico
> Central
> (ftUS)\",GEOGCS[\"NAD83(HARN)\",DATUM[\"NAD83_High_Accuracy_Reference_Network\",SPHEROID[\"GRS
> 1980\",6378137,298.257222101,AUTHORITY[\"EPSG\",\"7019\"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[\"EPSG\",\"6152\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4152\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",31],PARAMETER[\"central_meridian\",-106.25],PARAMETER[\"scale_factor\",0.9999],PARAMETER[\"false_easting\",1640416.667],PARAMETER[\"false_northing\",0],UNIT[\"US
> survey
> foot\",0.3048006096012192,AUTHORITY[\"EPSG\",\"9003\"]],AXIS[\"X\",EAST],AXIS[\"Y\",NORTH],AUTHORITY[\"EPSG\",\"2903\"]]VERTCS[\"North
> American Vertical Datum of 1988\",VERT_DATUM[\"North American Vertical
> Datum 1988\",2005,AUTHORITY[\"EPSG\",\"5103\"]],UNIT[\"US survey
> foot\",1.0],AXIS[\"Gravity-related
> height\",UP],AUTHORITY[\"EPSG\",\"5703\"]]"
> pc16901815_flagged_fme_combined.las test_pdal_WKT.las
> --writers.las.forward="all"
>
>
>
> The input las “pc16901815_flagged_fme_combined.las” has GPS Type Bit Field
> set to 1 which appears to get reset to 0 on output (as noted in the altered
> output Global Encoding value).  Also added are a number of VLR (GeoTIFF
> included)—and we’d like to maintain only WKT definitions.  Also noteworthy
> is that the “overlap” bit flag on all the points appears to get reset on
> output as well so that the point cloud drops the definitions for those
> points that were defined with an overlap classification flag in the input
> las file.
>
>
>
> Thanks in advance for any advice.
>

Thanks for locating my bugs.  Hopefully these fixes address your problems.

https://github.com/PDAL/PDAL/issues/1063
https://github.com/PDAL/PDAL/issues/1064
https://github.com/PDAL/PDAL/issues/1065

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151207/a9379934/attachment.html>

From lucadeluge at gmail.com  Thu Dec 10 07:40:03 2015
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Thu, 10 Dec 2015 16:40:03 +0100
Subject: [pdal] compile pdal with Python support
In-Reply-To: <03CD74B7-83C9-4AA8-9819-3BE4AA3D666E@hobu.co>
References: <CAK4m-3y8q-RiSLpD98R7SREnqEDMN1a06fWjBJT6nCKui-Hqyg@mail.gmail.com>
 <56571431-1453-4F5E-822B-9403BCE335B1@hobu.co>
 <CAK4m-3zG_kr3f=if2L_gJrXSFhAfKcsDCPOH0KsGCvG6X1f1UA@mail.gmail.com>
 <609DE3C6-E9D3-4188-94C8-14D251D1E3E6@hobu.co>
 <CAK4m-3wBF+gLQcEX3vStFtSQ31ePwDFX7AOnpsPSGCTegrJGZA@mail.gmail.com>
 <CAK4m-3wHVPHVhniqXovTuAyA70s8OpHMrpsSrywcVWQarx2jQQ@mail.gmail.com>
 <E4CA9CE5-4CC7-41AC-94A8-275DE0379ED2@hobu.co>
 <CAK4m-3yZJ8CnAL10N744gd_Y3AWL_DfW3bTSrwokB7mfF+OaHw@mail.gmail.com>
 <EDF34A85-7AA6-4F2C-AAF7-588A062C0498@hobu.co>
 <CAK4m-3zqs4XjswGXDGMm6Pw-TzFxiZAEyVAfkYs-i4uv8g_bXg@mail.gmail.com>
 <3A06CFE8-23BD-45EA-9069-1C922F32A35C@hobu.co>
 <24BED67D-1DBE-4495-828E-12A3DDE768B0@hobu.co>
 <CAK4m-3w-MYQ_S=82kJr_WHnQRexx+-BALz0YJ-jgMYVrrxo=2A@mail.gmail.com>
 <3A83D628-3EA9-4B4F-B6F1-DC6F6462A110@hobu.co>
 <03CD74B7-83C9-4AA8-9819-3BE4AA3D666E@hobu.co>
Message-ID: <CAK4m-3xPwVsLTn+pTcM+kUHs3vqcYeauH0PNqtSVqkRZ4-ab7g@mail.gmail.com>

On 2 December 2015 at 17:41, Howard Butler <howard at hobu.co> wrote:
>
> $ pip install PDAL
>
> now works for me when I have PDAL installed and pdal-config on the PATH.
>

I can confirm that is working also for us

> Howard

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From flatearth at gmx.net  Wed Dec 16 04:18:07 2015
From: flatearth at gmx.net (FE)
Date: Wed, 16 Dec 2015 13:18:07 +0100
Subject: [pdal] pdal python install
Message-ID: <trinity-43f47d98-cf58-497f-8109-c8645287d2f2-1450268287779@3capp-gmx-bs10>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151216/9316fcf9/attachment.html>

From flatearth at gmx.net  Wed Dec 16 04:42:52 2015
From: flatearth at gmx.net (FE)
Date: Wed, 16 Dec 2015 13:42:52 +0100
Subject: [pdal] pdal python install (plain text)
Message-ID: <trinity-d488715b-71e3-4e43-91ea-6468be16a5d1-1450269772272@3capp-gmx-bs10>

Sorry, last message was html, here again as plain text:


Hello,
 
I would like to install PDAL python API on a Mac in a python3 environment. I have not installed pdal itself. Using pip it complains about missing 'pdal-config'. I also read the thread 'compile pdal with python support' but found no solution within that working for me. Downloading the source and running 'python setup.py build' within the python directory gives similar error. I post both below.
 
Thanks a lot for you help!
 
Wilhelm
 
 
Using 'pip install pdal':
 
(rs)comp:PDAL-1.1.0-src will$ pip install pdal
Collecting pdal
  Using cached PDAL-1.1.0.zip
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):
      File "/private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-67z2m4ak/pdal/setup.py", line 61, in get_pdal_config
        stdout=subprocess.PIPE, stderr=subprocess.PIPE).communicate()
      File "/Users/will/anaconda/envs/rs/lib/python3.4/subprocess.py", line 859, in __init__
        restore_signals, start_new_session)
      File "/Users/will/anaconda/envs/rs/lib/python3.4/subprocess.py", line 1457, in _execute_child
        raise child_exception_type(errno_num, err_msg)
    FileNotFoundError: [Errno 2] No such file or directory: 'pdal-config'
    
    During handling of the above exception, another exception occurred:
    
    Traceback (most recent call last):
      File "<string>", line 20, in <module>
      File "/private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-67z2m4ak/pdal/setup.py", line 113, in <module>
        for item in get_pdal_config('--includes').split():
      File "/private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-67z2m4ak/pdal/setup.py", line 65, in get_pdal_config
        'Could not find pdal-config %r: %s' % (pdal_config, ex))
    OSError: Could not find pdal-config 'pdal-config': [Errno 2] No such file or directory: 'pdal-config'
    
    ----------------------------------------
Command "python setup.py egg_info" failed with error code 1 in /private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-67z2m4ak/pdal
 
 
 
 
 
Using 'python setup.py build':
 

(rs)comp:PDAL-1.1.0 will$ python setup.py build
Traceback (most recent call last):
  File "setup.py", line 61, in get_pdal_config
    stdout=subprocess.PIPE, stderr=subprocess.PIPE).communicate()
  File "/Users/will/anaconda/envs/rs/lib/python3.4/subprocess.py", line 859, in __init__
    restore_signals, start_new_session)
  File "/Users/will/anaconda/envs/rs/lib/python3.4/subprocess.py", line 1457, in _execute_child
    raise child_exception_type(errno_num, err_msg)
FileNotFoundError: [Errno 2] No such file or directory: 'pdal-config'
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "setup.py", line 113, in <module>
    for item in get_pdal_config('--includes').split():
  File "setup.py", line 65, in get_pdal_config
    'Could not find pdal-config %r: %s' % (pdal_config, ex))
OSError: Could not find pdal-config 'pdal-config': [Errno 2] No such file or directory: 'pdal-config'
(rs)comp:PDAL-1.1.0 will$ python setup.py install
Traceback (most recent call last):
  File "setup.py", line 61, in get_pdal_config
    stdout=subprocess.PIPE, stderr=subprocess.PIPE).communicate()
  File "/Users/will/anaconda/envs/rs/lib/python3.4/subprocess.py", line 859, in __init__
    restore_signals, start_new_session)
  File "/Users/will/anaconda/envs/rs/lib/python3.4/subprocess.py", line 1457, in _execute_child
    raise child_exception_type(errno_num, err_msg)
FileNotFoundError: [Errno 2] No such file or directory: 'pdal-config'
During handling of the above exception, another exception occurred:
Traceback (most recent call last):
  File "setup.py", line 113, in <module>
    for item in get_pdal_config('--includes').split():
  File "setup.py", line 65, in get_pdal_config
    'Could not find pdal-config %r: %s' % (pdal_config, ex))
OSError: Could not find pdal-config 'pdal-config': [Errno 2] No such file or directory: 'pdal-config'
(rs)comp:PDAL-1.1.0 will$ cd /Users/will/Software/PDAL-1.1.0-src/python 
(rs)comp:python will$ pip install pdal
Collecting pdal
  Using cached PDAL-1.1.0.zip
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):
      File "/private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-ikvwhgzg/pdal/setup.py", line 61, in get_pdal_config
        stdout=subprocess.PIPE, stderr=subprocess.PIPE).communicate()
      File "/Users/will/anaconda/envs/rs/lib/python3.4/subprocess.py", line 859, in __init__
        restore_signals, start_new_session)
      File "/Users/will/anaconda/envs/rs/lib/python3.4/subprocess.py", line 1457, in _execute_child
        raise child_exception_type(errno_num, err_msg)
    FileNotFoundError: [Errno 2] No such file or directory: 'pdal-config'
    
    During handling of the above exception, another exception occurred:
    
    Traceback (most recent call last):
      File "<string>", line 20, in <module>
      File "/private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-ikvwhgzg/pdal/setup.py", line 113, in <module>
        for item in get_pdal_config('--includes').split():
      File "/private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-ikvwhgzg/pdal/setup.py", line 65, in get_pdal_config
        'Could not find pdal-config %r: %s' % (pdal_config, ex))
    OSError: Could not find pdal-config 'pdal-config': [Errno 2] No such file or directory: 'pdal-config'
    
    ----------------------------------------
Command "python setup.py egg_info" failed with error code 1 in /private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-ikvwhgzg/pdal
 
 
 

From andrew.bell.ia at gmail.com  Wed Dec 16 14:19:22 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 16 Dec 2015 16:19:22 -0600
Subject: [pdal] pdal python install
In-Reply-To: <trinity-43f47d98-cf58-497f-8109-c8645287d2f2-1450268287779@3capp-gmx-bs10>
References: <trinity-43f47d98-cf58-497f-8109-c8645287d2f2-1450268287779@3capp-gmx-bs10>
Message-ID: <CACJ51z3ooPYhE4JN7PDGHmLhfCP=D9y3P7O26asD5uJf6Cb1qw@mail.gmail.com>

On Wed, Dec 16, 2015 at 6:18 AM, FE <flatearth at gmx.net> wrote:

> Hello,
>
> I would like to install PDAL python API on a Mac in a python3 environment.
> I have not installed pdal itself. Using pip it complains about missing
> 'pdal-config'. I also read the thread 'compile pdal with python support'
> but found no solution within that working for me. Downloading the source
> and running 'python setup.py build' within the python directory gives
> similar error. I post both below.
>
> Thanks a lot for you help!
>

The thread you reference seems to suggest that you need PDAL itself
installed before you can install the python module with pip.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151216/8e8d58d7/attachment.html>

From tom.van.tilburg at gmail.com  Wed Dec 16 14:38:10 2015
From: tom.van.tilburg at gmail.com (Tom van Tilburg)
Date: Wed, 16 Dec 2015 22:38:10 +0000
Subject: [pdal] How to handle las files that don't fit in memory
Message-ID: <CAP3PPDifKRzc2QnxmZ0-AzD9y+EOn3bAzKrD8fcnkp8x-P9rDw@mail.gmail.com>

I have a las-zip file of 3 gigs and try to run a pdal splitter filter on
it. PDAL will try to load the entire file into memory (30 GB) which doesn't
fit and segfaults upon that.
Would there be an option to split the large las file first into smaller
blocks based on extent by simply running over all points and writing them
directly to output instead of first caching it?
I tried the crop filter as well but it also seems to load all points into
memory first.
It is possible with lastools but I would prefer to keep my process within a
pdal-based script.

Best,
 Tom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151216/139eab2b/attachment.html>

From andrew.bell.ia at gmail.com  Wed Dec 16 14:54:56 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 16 Dec 2015 16:54:56 -0600
Subject: [pdal] How to handle las files that don't fit in memory
In-Reply-To: <CAP3PPDifKRzc2QnxmZ0-AzD9y+EOn3bAzKrD8fcnkp8x-P9rDw@mail.gmail.com>
References: <CAP3PPDifKRzc2QnxmZ0-AzD9y+EOn3bAzKrD8fcnkp8x-P9rDw@mail.gmail.com>
Message-ID: <CACJ51z2r9KUd9b6RhuZs+fCRb=mwx6iFbrd_LTQEBptbXKtaqg@mail.gmail.com>

On Wed, Dec 16, 2015 at 4:38 PM, Tom van Tilburg <tom.van.tilburg at gmail.com>
wrote:

> I have a las-zip file of 3 gigs and try to run a pdal splitter filter on
> it. PDAL will try to load the entire file into memory (30 GB) which doesn't
> fit and segfaults upon that.
> Would there be an option to split the large las file first into smaller
> blocks based on extent by simply running over all points and writing them
> directly to output instead of first caching it?
>

When you say it doesn't fit, I'm not sure what you're saying.  Are you
saying that you don't have sufficient virtual memory to deal with the
dataset?  If that's the case, the easiest solution is to increase the
virtual memory on your system by adding more swap space.  You can Google
specific information on your system on how to do this.

I tried the crop filter as well but it also seems to load all points into
> memory first.
> It is possible with lastools but I would prefer to keep my process within
> a pdal-based script.
>

We have just added "streaming" to the repository which works with some data
sources and filters (LAS and the crop filter are included), however, you'd
have to write C++ code at the current time to take advantage of it.  This
would let you, say, divide your dataset into two files that could then be
run through the splitter individually (the splitter doesn't support
streaming).  If you're interested in tackling this, take a look at
StreamingTest.cpp, or alternatively many of the tests for filters now
contain examples to test the streaming capabilities.  You can also write
back and I'd be happy to help.

Still, the easiest thing is to add some swap and be done unless you're
running into some other limitation that I don't understand.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151216/56738759/attachment.html>

From flatearth at gmx.net  Thu Dec 17 03:09:57 2015
From: flatearth at gmx.net (FE)
Date: Thu, 17 Dec 2015 12:09:57 +0100
Subject: [pdal] pdal python install
In-Reply-To: <CACJ51z3ooPYhE4JN7PDGHmLhfCP=D9y3P7O26asD5uJf6Cb1qw@mail.gmail.com>
References: <trinity-43f47d98-cf58-497f-8109-c8645287d2f2-1450268287779@3capp-gmx-bs10>, 
 <CACJ51z3ooPYhE4JN7PDGHmLhfCP=D9y3P7O26asD5uJf6Cb1qw@mail.gmail.com>
Message-ID: <trinity-2fc3a241-f4d1-4fd4-8ee0-c218f6448ae9-1450350597259@3capp-gmx-bs52>

Ok, so pip python requires pdal itself beeing installed first. Sorry, did not know about that.
I tried to compile pdal on OS X but did not manage until now. As substitute I've installed the version from homebrew now (unfortunately it does not include the pcl features). Its version is numbered as 0.9.9 but pdal-config --version gives 1.0.0.b1. It seems that pip wants to install version 1.1.0
 
When I run 'pip install pdal' after installing pdal via homebrew the following error is given:
 
mac:python will$ pip install pdal
Collecting pdal
  Using cached PDAL-1.1.0.zip
Building wheels for collected packages: pdal
  Running setup.py bdist_wheel for pdal
  Complete output from command /Users/will/anaconda/bin/python3 -c "import setuptools;__file__='/private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-g7t_t_s5/pdal/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" bdist_wheel -d /var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/tmpoag9scf7pip-wheel-:
  running bdist_wheel
  running build
  running build_py
  creating build
  creating build/lib.macosx-10.5-x86_64-3.4
  creating build/lib.macosx-10.5-x86_64-3.4/pdal
  copying pdal/__init__.py -> build/lib.macosx-10.5-x86_64-3.4/pdal
  copying pdal/pipeline_xml.py -> build/lib.macosx-10.5-x86_64-3.4/pdal
  running build_ext
  building 'pdal.libpdalpython' extension
  creating build/temp.macosx-10.5-x86_64-3.4
  creating build/temp.macosx-10.5-x86_64-3.4/pdal
  gcc -fno-strict-aliasing -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/Users/will/anaconda/include -arch x86_64 -I/Users/will/anaconda/lib/python3.4/site-packages/numpy/core/include -I/Users/will/anaconda/include/python3.4m -c pdal/libpdalpython.cpp -o build/temp.macosx-10.5-x86_64-3.4/pdal/libpdalpython.o -std=c++11
  In file included from pdal/libpdalpython.cpp:289:
  In file included from /Users/will/anaconda/lib/python3.4/site-packages/numpy/core/include/numpy/arrayobject.h:4:
  In file included from /Users/will/anaconda/lib/python3.4/site-packages/numpy/core/include/numpy/ndarrayobject.h:18:
  In file included from /Users/will/anaconda/lib/python3.4/site-packages/numpy/core/include/numpy/ndarraytypes.h:1781:
  /Users/will/anaconda/lib/python3.4/site-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h:15:2: warning: "Using deprecated NumPy API, disable it by "          "#defining NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION" [-W#warnings]
  #warning "Using deprecated NumPy API, disable it by " \
   ^
  pdal/libpdalpython.cpp:291:10: fatal error: 'pdal/plang/Array.hpp' file not found
  #include "pdal/plang/Array.hpp"
           ^
  1 warning and 1 error generated.
  error: command 'gcc' failed with exit status 1
  
  ----------------------------------------
  Failed building wheel for pdal
Failed to build pdal
Installing collected packages: pdal
  Running setup.py install for pdal
    Complete output from command /Users/will/anaconda/bin/python3 -c "import setuptools, tokenize;__file__='/private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-g7t_t_s5/pdal/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-anw4kg3k-record/install-record.txt --single-version-externally-managed --compile:
    running install
    running build
    running build_py
    running build_ext
    building 'pdal.libpdalpython' extension
    gcc -fno-strict-aliasing -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/Users/will/anaconda/include -arch x86_64 -I/Users/will/anaconda/lib/python3.4/site-packages/numpy/core/include -I/Users/will/anaconda/include/python3.4m -c pdal/libpdalpython.cpp -o build/temp.macosx-10.5-x86_64-3.4/pdal/libpdalpython.o -std=c++11
    In file included from pdal/libpdalpython.cpp:289:
    In file included from /Users/will/anaconda/lib/python3.4/site-packages/numpy/core/include/numpy/arrayobject.h:4:
    In file included from /Users/will/anaconda/lib/python3.4/site-packages/numpy/core/include/numpy/ndarrayobject.h:18:
    In file included from /Users/will/anaconda/lib/python3.4/site-packages/numpy/core/include/numpy/ndarraytypes.h:1781:
    /Users/will/anaconda/lib/python3.4/site-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h:15:2: warning: "Using deprecated NumPy API, disable it by "          "#defining NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION" [-W#warnings]
    #warning "Using deprecated NumPy API, disable it by " \
     ^
    pdal/libpdalpython.cpp:291:10: fatal error: 'pdal/plang/Array.hpp' file not found
    #include "pdal/plang/Array.hpp"
             ^
    1 warning and 1 error generated.
    error: command 'gcc' failed with exit status 1
    
    ----------------------------------------
Command "/Users/will/anaconda/bin/python3 -c "import setuptools, tokenize;__file__='/private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-g7t_t_s5/pdal/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-anw4kg3k-record/install-record.txt --single-version-externally-managed --compile" failed with error code 1 in /private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-g7t_t_s5/pdal
 
 
 

From kreve at gst.dk  Mon Dec 21 01:51:53 2015
From: kreve at gst.dk (Kristian Evers)
Date: Mon, 21 Dec 2015 09:51:53 +0000
Subject: [pdal] Inconsistency between docs and functionality in las.writer
Message-ID: <2E885BB293AF0448A0181138489E9A0E5272D976@S000014.PROD.SITAD.DK>

I have noticed a slight inconsistency between the docs and the functionality of las.writer and now wondering which one is wrong.

On http://www.pdal.io/stages/writers.las.html it says that the default value of the option minor_version is 3, but in reality when you do a 'pdal translate' without specifying any options you get a las/laz file with format version 1.2. The source code confirms this in line 69 of io\las\LasWriter.cpp:

m_minorVersion.setDefault(2);

It's a minor detail, just wondering if the docs or the code needs to be changed. Was it the intention to write las-files with minor_version=3? I'll do a pull request with a fix once I know if the docs or the code is correct. Personally I think that the default minor_version should be 3, as it says in the docs.

Best regards,

Kristian Evers
Geophysicist
Geographical references
kreve at gst.dk<mailto:kreve at gst.dk>

Danish Ministry of Energy, Utilities and Climate
Agency for Data Supply and Efficiency

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151221/357df36a/attachment.html>

From andrew.bell.ia at gmail.com  Mon Dec 21 05:32:34 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 21 Dec 2015 07:32:34 -0600
Subject: [pdal] Inconsistency between docs and functionality in
	las.writer
In-Reply-To: <2E885BB293AF0448A0181138489E9A0E5272D976@S000014.PROD.SITAD.DK>
References: <2E885BB293AF0448A0181138489E9A0E5272D976@S000014.PROD.SITAD.DK>
Message-ID: <CACJ51z1Zmhj+dL4h-h0PiGFEwaDHn8NOuiTPBB4ab18wkepVQw@mail.gmail.com>

On Mon, Dec 21, 2015 at 3:51 AM, Kristian Evers <kreve at gst.dk> wrote:

> I have noticed a slight inconsistency between the docs and the
> functionality of las.writer and now wondering which one is wrong.
>
>
>
> On http://www.pdal.io/stages/writers.las.html it says that the default
> value of the option minor_version is 3, but in reality when you do a ‘pdal
> translate’ without specifying any options you get a las/laz file with
> format version 1.2. The source code confirms this in line 69 of
> io\las\LasWriter.cpp:
>
>
>
> m_minorVersion.setDefault(2);
>
>
>
> It’s a minor detail, just wondering if the docs or the code needs to be
> changed. Was it the intention to write las-files with minor_version=3? I’ll
> do a pull request with a fix once I know if the docs or the code is
> correct. Personally I think that the default minor_version should be 3, as
> it says in the docs.
>

I've fixed the documentation to reflect the code (should show up online
shortly).  The default has in reality been version 2 for a long time, so
I'm leaving it alone for now, but if there's enough demand, it can
certainly be changed.

Thanks for catching this!

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151221/8896cde7/attachment.html>

From kreve at gst.dk  Mon Dec 21 06:00:48 2015
From: kreve at gst.dk (Kristian Evers)
Date: Mon, 21 Dec 2015 14:00:48 +0000
Subject: [pdal] Inconsistency between docs and functionality in
 las.writer
In-Reply-To: <CACJ51z1Zmhj+dL4h-h0PiGFEwaDHn8NOuiTPBB4ab18wkepVQw@mail.gmail.com>
References: <2E885BB293AF0448A0181138489E9A0E5272D976@S000014.PROD.SITAD.DK>
 <CACJ51z1Zmhj+dL4h-h0PiGFEwaDHn8NOuiTPBB4ab18wkepVQw@mail.gmail.com>
Message-ID: <2E885BB293AF0448A0181138489E9A0E5272DA7C@S000014.PROD.SITAD.DK>

Thanks, Andrew.

In fact I caught it twice today: Both in the translate and random applications. I expected the output to have minor_version=3, but soon realized that wasn’t the case. No problem for translate, since it’s possible to set custom options for the writer. Unfortunately that’s not the case for the random command, as it is hardwired to the default settings of writers.las. If there’s any interest in having writer-options in the random app I’ll give it a go during the holidays.

Kristian


Fra: Andrew Bell [mailto:andrew.bell.ia at gmail.com]
Sendt: mandag 21. december 2015 14:33
Til: Kristian Evers
Cc: pdal at lists.osgeo.org
Emne: Re: [pdal] Inconsistency between docs and functionality in las.writer


On Mon, Dec 21, 2015 at 3:51 AM, Kristian Evers <kreve at gst.dk<mailto:kreve at gst.dk>> wrote:
I have noticed a slight inconsistency between the docs and the functionality of las.writer and now wondering which one is wrong.

On http://www.pdal.io/stages/writers.las.html it says that the default value of the option minor_version is 3, but in reality when you do a ‘pdal translate’ without specifying any options you get a las/laz file with format version 1.2. The source code confirms this in line 69 of io\las\LasWriter.cpp:

m_minorVersion.setDefault(2);

It’s a minor detail, just wondering if the docs or the code needs to be changed. Was it the intention to write las-files with minor_version=3? I’ll do a pull request with a fix once I know if the docs or the code is correct. Personally I think that the default minor_version should be 3, as it says in the docs.

I've fixed the documentation to reflect the code (should show up online shortly).  The default has in reality been version 2 for a long time, so I'm leaving it alone for now, but if there's enough demand, it can certainly be changed.

Thanks for catching this!

--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151221/e55dae9a/attachment.html>

From howard at hobu.co  Mon Dec 21 07:05:41 2015
From: howard at hobu.co (Howard Butler)
Date: Mon, 21 Dec 2015 09:05:41 -0600
Subject: [pdal] OSGeo Paris Code Sprint Feb 23-26
Message-ID: <42DE326E-4209-4DF9-93DE-77D2B5BE901D@hobu.co>

All,

I just wanted to send a note to let you know the Hobu team will be attending the OSGeo Paris Code Sprint [1] February 23-26. The sprint is to be hosted by the Mozilla Foundation in conjunction with OSGeo, and based on the prospective attendee list, it is shaping up to host a large number of point cloud software developers. If you are a software developer doing point cloud stuff, please consider attending to contribute to PDAL and friends.

Howard

[1] https://wiki.osgeo.org/wiki/Paris_Code_Sprint_2016

From andrew.bell.ia at gmail.com  Mon Dec 21 07:34:29 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 21 Dec 2015 09:34:29 -0600
Subject: [pdal] Inconsistency between docs and functionality in
	las.writer
In-Reply-To: <2E885BB293AF0448A0181138489E9A0E5272DA7C@S000014.PROD.SITAD.DK>
References: <2E885BB293AF0448A0181138489E9A0E5272D976@S000014.PROD.SITAD.DK>
 <CACJ51z1Zmhj+dL4h-h0PiGFEwaDHn8NOuiTPBB4ab18wkepVQw@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5272DA7C@S000014.PROD.SITAD.DK>
Message-ID: <CACJ51z1B5CF_UDrpYabBEQ3o9GaKuqEtZ3iz4qNCKkY_iONz-A@mail.gmail.com>

On Mon, Dec 21, 2015 at 8:00 AM, Kristian Evers <kreve at gst.dk> wrote:

> Thanks, Andrew.
>
>
>
> In fact I caught it twice today: Both in the translate and random
> applications. I expected the output to have minor_version=3, but soon
> realized that wasn’t the case. No problem for translate, since it’s
> possible to set custom options for the writer. Unfortunately that’s not the
> case for the random command, as it is hardwired to the default settings of
> writers.las. If there’s any interest in having writer-options in the random
> app I’ll give it a go during the holidays.
>

Done:

https://github.com/PDAL/PDAL/issues/1072

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151221/edbd1939/attachment-0001.html>

From kreve at gst.dk  Mon Dec 21 08:33:54 2015
From: kreve at gst.dk (Kristian Evers)
Date: Mon, 21 Dec 2015 16:33:54 +0000
Subject: [pdal] Inconsistency between docs and functionality in
 las.writer
In-Reply-To: <CACJ51z1B5CF_UDrpYabBEQ3o9GaKuqEtZ3iz4qNCKkY_iONz-A@mail.gmail.com>
References: <2E885BB293AF0448A0181138489E9A0E5272D976@S000014.PROD.SITAD.DK>
 <CACJ51z1Zmhj+dL4h-h0PiGFEwaDHn8NOuiTPBB4ab18wkepVQw@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5272DA7C@S000014.PROD.SITAD.DK>
 <CACJ51z1B5CF_UDrpYabBEQ3o9GaKuqEtZ3iz4qNCKkY_iONz-A@mail.gmail.com>
Message-ID: <2E885BB293AF0448A0181138489E9A0E5272DB18@S000014.PROD.SITAD.DK>

What an amazing response time! Thanks, once again, Andrew.

/Kristian


Fra: Andrew Bell [mailto:andrew.bell.ia at gmail.com]
Sendt: mandag 21. december 2015 16:34
Til: Kristian Evers
Cc: pdal at lists.osgeo.org
Emne: Re: [pdal] Inconsistency between docs and functionality in las.writer

On Mon, Dec 21, 2015 at 8:00 AM, Kristian Evers <kreve at gst.dk<mailto:kreve at gst.dk>> wrote:
Thanks, Andrew.

In fact I caught it twice today: Both in the translate and random applications. I expected the output to have minor_version=3, but soon realized that wasn’t the case. No problem for translate, since it’s possible to set custom options for the writer. Unfortunately that’s not the case for the random command, as it is hardwired to the default settings of writers.las. If there’s any interest in having writer-options in the random app I’ll give it a go during the holidays.

Done:

https://github.com/PDAL/PDAL/issues/1072

--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151221/6b4c1cdc/attachment.html>

From tom.van.tilburg at gmail.com  Mon Dec 21 12:10:40 2015
From: tom.van.tilburg at gmail.com (Tom van Tilburg)
Date: Mon, 21 Dec 2015 20:10:40 +0000
Subject: [pdal] How to handle las files that don't fit in memory
In-Reply-To: <CACJ51z2r9KUd9b6RhuZs+fCRb=mwx6iFbrd_LTQEBptbXKtaqg@mail.gmail.com>
References: <CAP3PPDifKRzc2QnxmZ0-AzD9y+EOn3bAzKrD8fcnkp8x-P9rDw@mail.gmail.com>
 <CACJ51z2r9KUd9b6RhuZs+fCRb=mwx6iFbrd_LTQEBptbXKtaqg@mail.gmail.com>
Message-ID: <CAP3PPDiJ9HmH=x-4HZ9JibDa4VS91ZPAgwgto+t33PZCHVrFqw@mail.gmail.com>

Hi Andrew,

Increasing SWAP is possible but wouldn't this seriously degrade the
performance? I have about 30 gigs of RAM and it already takes ages to load
everything in there.

Streaming would definitely be a way to go, as it works fine with lastools
for me. I'll look into it. Chopping the data into smaller spatial blocks
would be my first approach here.
Any estimate on when streaming will get into the api?

Best, Tom


On Wed, 16 Dec 2015 at 23:54 Andrew Bell <andrew.bell.ia at gmail.com> wrote:

> On Wed, Dec 16, 2015 at 4:38 PM, Tom van Tilburg <
> tom.van.tilburg at gmail.com> wrote:
>
>> I have a las-zip file of 3 gigs and try to run a pdal splitter filter on
>> it. PDAL will try to load the entire file into memory (30 GB) which doesn't
>> fit and segfaults upon that.
>> Would there be an option to split the large las file first into smaller
>> blocks based on extent by simply running over all points and writing them
>> directly to output instead of first caching it?
>>
>
> When you say it doesn't fit, I'm not sure what you're saying.  Are you
> saying that you don't have sufficient virtual memory to deal with the
> dataset?  If that's the case, the easiest solution is to increase the
> virtual memory on your system by adding more swap space.  You can Google
> specific information on your system on how to do this.
>
> I tried the crop filter as well but it also seems to load all points into
>> memory first.
>> It is possible with lastools but I would prefer to keep my process within
>> a pdal-based script.
>>
>
> We have just added "streaming" to the repository which works with some
> data sources and filters (LAS and the crop filter are included), however,
> you'd have to write C++ code at the current time to take advantage of it.
> This would let you, say, divide your dataset into two files that could then
> be run through the splitter individually (the splitter doesn't support
> streaming).  If you're interested in tackling this, take a look at
> StreamingTest.cpp, or alternatively many of the tests for filters now
> contain examples to test the streaming capabilities.  You can also write
> back and I'd be happy to help.
>
> Still, the easiest thing is to add some swap and be done unless you're
> running into some other limitation that I don't understand.
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151221/86665adb/attachment.html>

From andrew.bell.ia at gmail.com  Mon Dec 21 14:33:36 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 21 Dec 2015 16:33:36 -0600
Subject: [pdal] How to handle las files that don't fit in memory
In-Reply-To: <CAP3PPDiJ9HmH=x-4HZ9JibDa4VS91ZPAgwgto+t33PZCHVrFqw@mail.gmail.com>
References: <CAP3PPDifKRzc2QnxmZ0-AzD9y+EOn3bAzKrD8fcnkp8x-P9rDw@mail.gmail.com>
 <CACJ51z2r9KUd9b6RhuZs+fCRb=mwx6iFbrd_LTQEBptbXKtaqg@mail.gmail.com>
 <CAP3PPDiJ9HmH=x-4HZ9JibDa4VS91ZPAgwgto+t33PZCHVrFqw@mail.gmail.com>
Message-ID: <CACJ51z3ReWvzRLEvd6XiovUPy=CXSbHs71hGmVe0kPQR_iaRHg@mail.gmail.com>

On Mon, Dec 21, 2015 at 2:10 PM, Tom van Tilburg <tom.van.tilburg at gmail.com>
wrote:

> Hi Andrew,
>
> Increasing SWAP is possible but wouldn't this seriously degrade the
> performance?
>

It depends what you're comparing to.  It's really hard to say without
giving it a go.  Unless you're short disk space, it seems like a relatively
trivial exercise to add the swap and see.


> I have about 30 gigs of RAM and it already takes ages to load everything
> in there.
>

Make sure you're using a release version of PDAL.  It's significantly
faster than the debug version.  Without know a lot about your system, I
don't have much to offer.  However, if your time is worth anything, memory
is cheap.

Streaming would definitely be a way to go, as it works fine with lastools
> for me. I'll look into it. Chopping the data into smaller spatial blocks
> would be my first approach here.
>


Any estimate on when streaming will get into the api?
>

No, sorry.  Streaming won't really solve your problem exactly anyway,
because you can't stream with the splitter.  If you've already split your
data into chunks spatially, you've already done the work of the splitter,
so I'm not sure what to advise.

Is it necessary to break up your data?  Perhaps there's another solution
that doesn't involve tiling?

Best,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151221/26372316/attachment.html>

From tom.van.tilburg at gmail.com  Mon Dec 21 23:25:08 2015
From: tom.van.tilburg at gmail.com (Tom van Tilburg)
Date: Tue, 22 Dec 2015 07:25:08 +0000
Subject: [pdal] How to handle las files that don't fit in memory
In-Reply-To: <CACJ51z3ReWvzRLEvd6XiovUPy=CXSbHs71hGmVe0kPQR_iaRHg@mail.gmail.com>
References: <CAP3PPDifKRzc2QnxmZ0-AzD9y+EOn3bAzKrD8fcnkp8x-P9rDw@mail.gmail.com>
 <CACJ51z2r9KUd9b6RhuZs+fCRb=mwx6iFbrd_LTQEBptbXKtaqg@mail.gmail.com>
 <CAP3PPDiJ9HmH=x-4HZ9JibDa4VS91ZPAgwgto+t33PZCHVrFqw@mail.gmail.com>
 <CACJ51z3ReWvzRLEvd6XiovUPy=CXSbHs71hGmVe0kPQR_iaRHg@mail.gmail.com>
Message-ID: <CAP3PPDg-W1SotcnmhAjPT3W9B0nx0jzpqr7KqEoe8KV0PcuvLQ@mail.gmail.com>

Hi Andrew,

Reading my initial email it occured to me I should have been more verbose
on my problem. I wrongly took the splitter filter as an example, should
have been chipper. Sorry for that.

What I am trying to reach is to load a bunch of ~3Gb laz file into
pgpointcloud and therefore they need to be chipped in chunks of ~400
points. I know the chipper wouldn't do streaming so cutting the laz files
into smaller blocks (like cropping) before starting the chipping would make
sense I thought.

I will look into increasing the swap but I don't have a good feeling about
it since we already have 30 Gb of swap and a previous loading attempt with
a similar dataset but with smaller laz files already took us weeks (running
parallel) to chip and load.

Thanks for your effort.

On Mon, 21 Dec 2015 at 23:33 Andrew Bell <andrew.bell.ia at gmail.com> wrote:

> On Mon, Dec 21, 2015 at 2:10 PM, Tom van Tilburg <
> tom.van.tilburg at gmail.com> wrote:
>
>> Hi Andrew,
>>
>> Increasing SWAP is possible but wouldn't this seriously degrade the
>> performance?
>>
>
> It depends what you're comparing to.  It's really hard to say without
> giving it a go.  Unless you're short disk space, it seems like a relatively
> trivial exercise to add the swap and see.
>
>
>> I have about 30 gigs of RAM and it already takes ages to load everything
>> in there.
>>
>
> Make sure you're using a release version of PDAL.  It's significantly
> faster than the debug version.  Without know a lot about your system, I
> don't have much to offer.  However, if your time is worth anything, memory
> is cheap.
>
> Streaming would definitely be a way to go, as it works fine with lastools
>> for me. I'll look into it. Chopping the data into smaller spatial blocks
>> would be my first approach here.
>>
>
>
> Any estimate on when streaming will get into the api?
>>
>
> No, sorry.  Streaming won't really solve your problem exactly anyway,
> because you can't stream with the splitter.  If you've already split your
> data into chunks spatially, you've already done the work of the splitter,
> so I'm not sure what to advise.
>
> Is it necessary to break up your data?  Perhaps there's another solution
> that doesn't involve tiling?
>
> Best,
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151222/b7c9eec5/attachment.html>

From tom.van.tilburg at gmail.com  Tue Dec 22 00:16:44 2015
From: tom.van.tilburg at gmail.com (Tom van Tilburg)
Date: Tue, 22 Dec 2015 08:16:44 +0000
Subject: [pdal] How to handle las files that don't fit in memory
In-Reply-To: <46B07BDB-545D-4DBF-A522-9240F1D4AC52@oracle.com>
References: <CAP3PPDifKRzc2QnxmZ0-AzD9y+EOn3bAzKrD8fcnkp8x-P9rDw@mail.gmail.com>
 <CACJ51z2r9KUd9b6RhuZs+fCRb=mwx6iFbrd_LTQEBptbXKtaqg@mail.gmail.com>
 <CAP3PPDiJ9HmH=x-4HZ9JibDa4VS91ZPAgwgto+t33PZCHVrFqw@mail.gmail.com>
 <CACJ51z3ReWvzRLEvd6XiovUPy=CXSbHs71hGmVe0kPQR_iaRHg@mail.gmail.com>
 <CAP3PPDg-W1SotcnmhAjPT3W9B0nx0jzpqr7KqEoe8KV0PcuvLQ@mail.gmail.com>
 <46B07BDB-545D-4DBF-A522-9240F1D4AC52@oracle.com>
Message-ID: <CAP3PPDhgfu9URzdyPJiOpwwsaugvD8rPjj4=jR6Nu9LQpddUkw@mail.gmail.com>

Albert, indeed increasing swap feels like making things worse...
Here is the specs:

>free -mh
             total       used       free     shared    buffers     cached
Mem:           31G       9.2G        22G       1.4G       385M       7.6G
-/+ buffers/cache:       1.2G        30G
Swap:          31G       224M        31G

>lscpu
Architecture:          x86_64
CPU op-mode(s):        32-bit, 64-bit
Byte Order:            Little Endian
CPU(s):                8
On-line CPU(s) list:   0-7
Thread(s) per core:    2
Core(s) per socket:    4
Socket(s):             1
NUMA node(s):          1
Vendor ID:             GenuineIntel
CPU family:            6
Model:                 60
Stepping:              3
CPU MHz:               800.000



On Tue, 22 Dec 2015 at 08:57 Albert Godfrind <albert.godfrind at oracle.com>
wrote:

> Tom
>
> Just checking. Can you clarify the hardware config you are using ? Does it
> have 30GB of physical RAM ? Or does it have less than that, and you have it
> configured for 30GB virtual memory ? Increasing virtual memory (swap space)
> if you do not have the memory capacity to support your process will not
> work (actually it is likely to have the opposite effect).
>
> How many cores do you have ?
>
> Albert
>
> When
>
> --
> Albert Godfrind
> +33 6 09 97 27 23
> Sent from my iPhone
>
> On 22 déc. 2015, at 08:25, Tom van Tilburg <tom.van.tilburg at gmail.com>
> wrote:
>
> Hi Andrew,
>
> Reading my initial email it occured to me I should have been more verbose
> on my problem. I wrongly took the splitter filter as an example, should
> have been chipper. Sorry for that.
>
> What I am trying to reach is to load a bunch of ~3Gb laz file into
> pgpointcloud and therefore they need to be chipped in chunks of ~400
> points. I know the chipper wouldn't do streaming so cutting the laz files
> into smaller blocks (like cropping) before starting the chipping would make
> sense I thought.
>
> I will look into increasing the swap but I don't have a good feeling about
> it since we already have 30 Gb of swap and a previous loading attempt
> with a similar dataset but with smaller laz files already took us weeks
> (running parallel) to chip and load.
>
> Thanks for your effort.
>
> On Mon, 21 Dec 2015 at 23:33 Andrew Bell <andrew.bell.ia at gmail.com> wrote:
>
>> On Mon, Dec 21, 2015 at 2:10 PM, Tom van Tilburg <
>> tom.van.tilburg at gmail.com> wrote:
>>
>>> Hi Andrew,
>>>
>>> Increasing SWAP is possible but wouldn't this seriously degrade the
>>> performance?
>>>
>>
>> It depends what you're comparing to.  It's really hard to say without
>> giving it a go.  Unless you're short disk space, it seems like a relatively
>> trivial exercise to add the swap and see.
>>
>>
>>> I have about 30 gigs of RAM and it already takes ages to load everything
>>> in there.
>>>
>>
>> Make sure you're using a release version of PDAL.  It's significantly
>> faster than the debug version.  Without know a lot about your system, I
>> don't have much to offer.  However, if your time is worth anything, memory
>> is cheap.
>>
>> Streaming would definitely be a way to go, as it works fine with lastools
>>> for me. I'll look into it. Chopping the data into smaller spatial blocks
>>> would be my first approach here.
>>>
>>
>>
>> Any estimate on when streaming will get into the api?
>>>
>>
>> No, sorry.  Streaming won't really solve your problem exactly anyway,
>> because you can't stream with the splitter.  If you've already split your
>> data into chunks spatially, you've already done the work of the splitter,
>> so I'm not sure what to advise.
>>
>> Is it necessary to break up your data?  Perhaps there's another solution
>> that doesn't involve tiling?
>>
>> Best,
>>
>> --
>> Andrew Bell
>> andrew.bell.ia at gmail.com
>>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151222/def42b1d/attachment-0001.html>

From albert.godfrind at oracle.com  Mon Dec 21 23:57:20 2015
From: albert.godfrind at oracle.com (Albert Godfrind)
Date: Tue, 22 Dec 2015 08:57:20 +0100
Subject: [pdal] How to handle las files that don't fit in memory
In-Reply-To: <CAP3PPDg-W1SotcnmhAjPT3W9B0nx0jzpqr7KqEoe8KV0PcuvLQ@mail.gmail.com>
References: <CAP3PPDifKRzc2QnxmZ0-AzD9y+EOn3bAzKrD8fcnkp8x-P9rDw@mail.gmail.com>
 <CACJ51z2r9KUd9b6RhuZs+fCRb=mwx6iFbrd_LTQEBptbXKtaqg@mail.gmail.com>
 <CAP3PPDiJ9HmH=x-4HZ9JibDa4VS91ZPAgwgto+t33PZCHVrFqw@mail.gmail.com>
 <CACJ51z3ReWvzRLEvd6XiovUPy=CXSbHs71hGmVe0kPQR_iaRHg@mail.gmail.com>
 <CAP3PPDg-W1SotcnmhAjPT3W9B0nx0jzpqr7KqEoe8KV0PcuvLQ@mail.gmail.com>
Message-ID: <46B07BDB-545D-4DBF-A522-9240F1D4AC52@oracle.com>

Tom

Just checking. Can you clarify the hardware config you are using ? Does it have 30GB of physical RAM ? Or does it have less than that, and you have it configured for 30GB virtual memory ? Increasing virtual memory (swap space) if you do not have the memory capacity to support your process will not work (actually it is likely to have the opposite effect). 

How many cores do you have ?

Albert

When 

--
Albert Godfrind
+33 6 09 97 27 23
Sent from my iPhone

> On 22 déc. 2015, at 08:25, Tom van Tilburg <tom.van.tilburg at gmail.com> wrote:
> 
> Hi Andrew,
> 
> Reading my initial email it occured to me I should have been more verbose on my problem. I wrongly took the splitter filter as an example, should have been chipper. Sorry for that.
> 
> What I am trying to reach is to load a bunch of ~3Gb laz file into pgpointcloud and therefore they need to be chipped in chunks of ~400 points. I know the chipper wouldn't do streaming so cutting the laz files into smaller blocks (like cropping) before starting the chipping would make sense I thought. 
> 
> I will look into increasing the swap but I don't have a good feeling about it since we already have 30 Gb of swap and a previous loading attempt with a similar dataset but with smaller laz files already took us weeks (running parallel) to chip and load.
> 
> Thanks for your effort.
> 
>> On Mon, 21 Dec 2015 at 23:33 Andrew Bell <andrew.bell.ia at gmail.com> wrote:
>>> On Mon, Dec 21, 2015 at 2:10 PM, Tom van Tilburg <tom.van.tilburg at gmail.com> wrote:
>>> Hi Andrew,
>>> 
>>> Increasing SWAP is possible but wouldn't this seriously degrade the performance?
>> 
>> It depends what you're comparing to.  It's really hard to say without giving it a go.  Unless you're short disk space, it seems like a relatively trivial exercise to add the swap and see.
>>  
>>> I have about 30 gigs of RAM and it already takes ages to load everything in there.
>> 
>> Make sure you're using a release version of PDAL.  It's significantly faster than the debug version.  Without know a lot about your system, I don't have much to offer.  However, if your time is worth anything, memory is cheap.
>> 
>>> Streaming would definitely be a way to go, as it works fine with lastools for me. I'll look into it. Chopping the data into smaller spatial blocks would be my first approach here.
>>>  
>>> Any estimate on when streaming will get into the api?
>> 
>> No, sorry.  Streaming won't really solve your problem exactly anyway, because you can't stream with the splitter.  If you've already split your data into chunks spatially, you've already done the work of the splitter, so I'm not sure what to advise.
>> 
>> Is it necessary to break up your data?  Perhaps there's another solution that doesn't involve tiling?
>> 
>> Best,
>> 
>> -- 
>> Andrew Bell
>> andrew.bell.ia at gmail.com
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151222/28fb1800/attachment.html>

From howard at hobu.co  Tue Dec 22 06:50:09 2015
From: howard at hobu.co (Howard Butler)
Date: Tue, 22 Dec 2015 08:50:09 -0600
Subject: [pdal] How to handle las files that don't fit in memory
In-Reply-To: <CAP3PPDg-W1SotcnmhAjPT3W9B0nx0jzpqr7KqEoe8KV0PcuvLQ@mail.gmail.com>
References: <CAP3PPDifKRzc2QnxmZ0-AzD9y+EOn3bAzKrD8fcnkp8x-P9rDw@mail.gmail.com>
 <CACJ51z2r9KUd9b6RhuZs+fCRb=mwx6iFbrd_LTQEBptbXKtaqg@mail.gmail.com>
 <CAP3PPDiJ9HmH=x-4HZ9JibDa4VS91ZPAgwgto+t33PZCHVrFqw@mail.gmail.com>
 <CACJ51z3ReWvzRLEvd6XiovUPy=CXSbHs71hGmVe0kPQR_iaRHg@mail.gmail.com>
 <CAP3PPDg-W1SotcnmhAjPT3W9B0nx0jzpqr7KqEoe8KV0PcuvLQ@mail.gmail.com>
Message-ID: <04D98367-5979-4A7F-ABE6-67A37ECD46E9@hobu.co>

It would seem that this operation needs to be done in two stages

1) Naively break the 3gb LAZ file into something smaller based on linear point count (or some other streamable operation -- if you have LAStools in reach, use it).
2) Chip/load the smaller pieces into pgpointcloud.

The good thing about loading the data in pgpointcloud is in the end it won't matter. Your database will provide the spatial selectivity you need after the data are loaded.

Howard

PS Who's workflow makes 3gb LAZ files and does that commonly work?

> On Dec 22, 2015, at 1:25 AM, Tom van Tilburg <tom.van.tilburg at gmail.com> wrote:
> 
> Hi Andrew,
> 
> Reading my initial email it occured to me I should have been more verbose on my problem. I wrongly took the splitter filter as an example, should have been chipper. Sorry for that.
> 
> What I am trying to reach is to load a bunch of ~3Gb laz file into pgpointcloud and therefore they need to be chipped in chunks of ~400 points. I know the chipper wouldn't do streaming so cutting the laz files into smaller blocks (like cropping) before starting the chipping would make sense I thought.
> 
> I will look into increasing the swap but I don't have a good feeling about it since we already have 30 Gb of swap and a previous loading attempt with a similar dataset but with smaller laz files already took us weeks (running parallel) to chip and load.
> 
> Thanks for your effort.
> 
> On Mon, 21 Dec 2015 at 23:33 Andrew Bell <andrew.bell.ia at gmail.com> wrote:
> On Mon, Dec 21, 2015 at 2:10 PM, Tom van Tilburg <tom.van.tilburg at gmail.com> wrote:
> Hi Andrew,
> 
> Increasing SWAP is possible but wouldn't this seriously degrade the performance?
> 
> It depends what you're comparing to.  It's really hard to say without giving it a go.  Unless you're short disk space, it seems like a relatively trivial exercise to add the swap and see.
> 
> I have about 30 gigs of RAM and it already takes ages to load everything in there.
> 
> Make sure you're using a release version of PDAL.  It's significantly faster than the debug version.  Without know a lot about your system, I don't have much to offer.  However, if your time is worth anything, memory is cheap.
> 
> Streaming would definitely be a way to go, as it works fine with lastools for me. I'll look into it. Chopping the data into smaller spatial blocks would be my first approach here.
> 
> Any estimate on when streaming will get into the api?
> 
> No, sorry.  Streaming won't really solve your problem exactly anyway, because you can't stream with the splitter.  If you've already split your data into chunks spatially, you've already done the work of the splitter, so I'm not sure what to advise.
> 
> Is it necessary to break up your data?  Perhaps there's another solution that doesn't involve tiling?
> 
> Best,
> 
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 495 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151222/e13f070d/attachment.sig>

From tom.van.tilburg at gmail.com  Tue Dec 22 07:53:49 2015
From: tom.van.tilburg at gmail.com (Tom van Tilburg)
Date: Tue, 22 Dec 2015 15:53:49 +0000
Subject: [pdal] How to handle las files that don't fit in memory
In-Reply-To: <04D98367-5979-4A7F-ABE6-67A37ECD46E9@hobu.co>
References: <CAP3PPDifKRzc2QnxmZ0-AzD9y+EOn3bAzKrD8fcnkp8x-P9rDw@mail.gmail.com>
 <CACJ51z2r9KUd9b6RhuZs+fCRb=mwx6iFbrd_LTQEBptbXKtaqg@mail.gmail.com>
 <CAP3PPDiJ9HmH=x-4HZ9JibDa4VS91ZPAgwgto+t33PZCHVrFqw@mail.gmail.com>
 <CACJ51z3ReWvzRLEvd6XiovUPy=CXSbHs71hGmVe0kPQR_iaRHg@mail.gmail.com>
 <CAP3PPDg-W1SotcnmhAjPT3W9B0nx0jzpqr7KqEoe8KV0PcuvLQ@mail.gmail.com>
 <04D98367-5979-4A7F-ABE6-67A37ECD46E9@hobu.co>
Message-ID: <CAP3PPDjEq5M2N6AxicPE+UCmSGRUbU3_3_U-WYoN3OWwC+uiXQ@mail.gmail.com>

Hi Howard, this is what I was doing up to now (split in 9 pieces on the
base of extent with lastools and then pipeline every piece via the chipper
into pgpointcloud). I was hoping it could be done with only pdal and in one
pipeline. I will stick to the lastools approach then.

Blame the government for the 3gb laz files, for some reason they want to
stick to the common national gridding system of 25 sqr km(!) each.  And no,
it doesn't commonly work. I'm also curious on how others deal with this.
If you, or anyone, want to try themselves, this is where you can get them:
https://www.pdok.nl/nl/ahn3-downloads
(select the desired gridcel on the map)

On Tue, 22 Dec 2015 at 15:50 Howard Butler <howard at hobu.co> wrote:

> It would seem that this operation needs to be done in two stages
>
> 1) Naively break the 3gb LAZ file into something smaller based on linear
> point count (or some other streamable operation -- if you have LAStools in
> reach, use it).
> 2) Chip/load the smaller pieces into pgpointcloud.
>
> The good thing about loading the data in pgpointcloud is in the end it
> won't matter. Your database will provide the spatial selectivity you need
> after the data are loaded.
>
> Howard
>
> PS Who's workflow makes 3gb LAZ files and does that commonly work?
>
> > On Dec 22, 2015, at 1:25 AM, Tom van Tilburg <tom.van.tilburg at gmail.com>
> wrote:
> >
> > Hi Andrew,
> >
> > Reading my initial email it occured to me I should have been more
> verbose on my problem. I wrongly took the splitter filter as an example,
> should have been chipper. Sorry for that.
> >
> > What I am trying to reach is to load a bunch of ~3Gb laz file into
> pgpointcloud and therefore they need to be chipped in chunks of ~400
> points. I know the chipper wouldn't do streaming so cutting the laz files
> into smaller blocks (like cropping) before starting the chipping would make
> sense I thought.
> >
> > I will look into increasing the swap but I don't have a good feeling
> about it since we already have 30 Gb of swap and a previous loading attempt
> with a similar dataset but with smaller laz files already took us weeks
> (running parallel) to chip and load.
> >
> > Thanks for your effort.
> >
> > On Mon, 21 Dec 2015 at 23:33 Andrew Bell <andrew.bell.ia at gmail.com>
> wrote:
> > On Mon, Dec 21, 2015 at 2:10 PM, Tom van Tilburg <
> tom.van.tilburg at gmail.com> wrote:
> > Hi Andrew,
> >
> > Increasing SWAP is possible but wouldn't this seriously degrade the
> performance?
> >
> > It depends what you're comparing to.  It's really hard to say without
> giving it a go.  Unless you're short disk space, it seems like a relatively
> trivial exercise to add the swap and see.
> >
> > I have about 30 gigs of RAM and it already takes ages to load everything
> in there.
> >
> > Make sure you're using a release version of PDAL.  It's significantly
> faster than the debug version.  Without know a lot about your system, I
> don't have much to offer.  However, if your time is worth anything, memory
> is cheap.
> >
> > Streaming would definitely be a way to go, as it works fine with
> lastools for me. I'll look into it. Chopping the data into smaller spatial
> blocks would be my first approach here.
> >
> > Any estimate on when streaming will get into the api?
> >
> > No, sorry.  Streaming won't really solve your problem exactly anyway,
> because you can't stream with the splitter.  If you've already split your
> data into chunks spatially, you've already done the work of the splitter,
> so I'm not sure what to advise.
> >
> > Is it necessary to break up your data?  Perhaps there's another solution
> that doesn't involve tiling?
> >
> > Best,
> >
> > --
> > Andrew Bell
> > andrew.bell.ia at gmail.com
> > _______________________________________________
> > pdal mailing list
> > pdal at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/pdal
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151222/638e2f06/attachment-0001.html>

From albert.godfrind at oracle.com  Mon Dec 28 06:22:17 2015
From: albert.godfrind at oracle.com (Albert Godfrind)
Date: Mon, 28 Dec 2015 15:22:17 +0100
Subject: [pdal] Unable to build PDAL 1.1.0: "Could NOT find GDAL (missing:
	GDAL_INCLUDE_DIR) "
Message-ID: <23BABF91-F3E2-4337-B104-D0A696DD7C8A@oracle.com>

I am trying to build the latest GDAL on Linux. The cmake stage fails like this:

$ cmake -G "Unix Makefiles"  ../
-- Boost version: 1.60.0
-- Found the following Boost libraries:
--   program_options
--   iostreams
--   filesystem
--   system
--   thread
-- Could NOT find GDAL (missing:  GDAL_INCLUDE_DIR) (Required is at least version "1.9.0")
CMake Error at cmake/gdal.cmake:13 (message):
  GDAL support is required
Call Stack (most recent call first):
  CMakeLists.txt:219 (include)


-- Configuring incomplete, errors occurred!
See also "/tmp/pdal/PDAL-1.1.0-src/build/CMakeFiles/CMakeOutput.log".

I have gdal installed (version 2.0). It looks like it wants me to define GDAL_INCLUDE_DIR but to what location ? I tried setting up to the lib directory in my installation. I also tried defining GDAL_HOME and even GDAL_LIBRARY all to no effect.

Any idea what I am doing wrong ?

Albert

--
 <http://www.oracle.com/>
Albert Godfrind | Geospatial technologies | Tel: +33 4 93 00 80 67 | Mobile: +33 6 09 97 27 23 | Skype: albert-godfrind <skype:albert-godfrind>
Oracle Server Technologies
400 Av. Roumanille, BP 309  | 06906 Sophia Antipolis cedex | France
Everything you ever wanted to know about Oracle Spatial <http://www.apress.com/9781590598993>
 <http://www.locationintelligence.net/dc/>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151228/9e5055aa/attachment.html>

From howard at hobu.co  Mon Dec 28 06:59:07 2015
From: howard at hobu.co (Howard Butler)
Date: Mon, 28 Dec 2015 08:59:07 -0600
Subject: [pdal] Unable to build PDAL 1.1.0: "Could NOT find GDAL
	(missing: GDAL_INCLUDE_DIR) "
In-Reply-To: <23BABF91-F3E2-4337-B104-D0A696DD7C8A@oracle.com>
References: <23BABF91-F3E2-4337-B104-D0A696DD7C8A@oracle.com>
Message-ID: <967CFAC2-B0F3-409A-BA7B-EA9ACB784540@hobu.co>


> On Dec 28, 2015, at 8:22 AM, Albert Godfrind <albert.godfrind at oracle.com> wrote:
> 
> I am trying to build the latest GDAL on Linux. The cmake stage fails like this:
> 
> $ cmake -G "Unix Makefiles"  ../
> -- Boost version: 1.60.0

/me groans. There's a boost 1.60 now? Consider this notice that it is a medium term goal of the PDAL project to eliminate its dependence on externally available Boost before its 2.0 release. Now that C++11 is quite stable just about everywhere, the impetus to reach for Boost for everything is not there anymore for PDAL. Their project release management leaves much to be desired, and because of it, packaging maintainers lag many versions behind current releases. 

> -- Could NOT find GDAL (missing:  GDAL_INCLUDE_DIR) (Required is at least version "1.9.0")
> CMake Error at cmake/gdal.cmake:13 (message):

> I have gdal installed (version 2.0). It looks like it wants me to define GDAL_INCLUDE_DIR but to what location ? I tried setting up to the lib directory in my installation. I also tried defining GDAL_HOME and even GDAL_LIBRARY all to no effect.

> Any idea what I am doing wrong ?

PDAL's configure-time GDAL detection needs to support GDAL 2.0. Software-wise, GDAL 2.0 should be no problem except for maybe some deprecation warnings. PDAL currently only supports 1.11.x., however. I will make a patch to fix this and let you know.

Howard


From albert.godfrind at oracle.com  Mon Dec 28 08:30:51 2015
From: albert.godfrind at oracle.com (Albert Godfrind)
Date: Mon, 28 Dec 2015 17:30:51 +0100
Subject: [pdal] Unable to build PDAL 1.1.0: "Could NOT find GDAL
	(missing: GDAL_INCLUDE_DIR) "
In-Reply-To: <967CFAC2-B0F3-409A-BA7B-EA9ACB784540@hobu.co>
References: <23BABF91-F3E2-4337-B104-D0A696DD7C8A@oracle.com>
 <967CFAC2-B0F3-409A-BA7B-EA9ACB784540@hobu.co>
Message-ID: <3EB09664-991C-402F-A1EB-19562A63E3B7@oracle.com>

Thanks Howard.

Removing he dependency on boost would be great. The only package I found in the rpm repositories is 1.41 which pdal says is too old. So I had to build it from sources and just picked up the latest (1.60) …

> PDAL's configure-time GDAL detection needs to support GDAL 2.0. Software-wise, GDAL 2.0 should be no problem except for maybe some deprecation warnings. PDAL currently only supports 1.11.x., however. I will make a patch to fix this and let you know.

There may be something else. I just tried again after setting GDAL_HOME to 1.10, and I still fail the same way:

$ export GDAL_HOME=/opt/gdal/gdal-1.10
$ cmake ..
-- Boost version: 1.60.0
-- Found the following Boost libraries:
--   program_options
--   iostreams
--   filesystem
--   system
--   thread
-- Could NOT find GDAL (missing:  GDAL_INCLUDE_DIR) (Required is at least version "1.9.0")
CMake Error at cmake/gdal.cmake:12 (message):
  GDAL support is required
Call Stack (most recent call first):
  CMakeLists.txt:219 (include)

Looking at the code in FindGDAL.cmake and adding a bit of debugging, I see that it does find GDAL (sets GDAL_FOUND to TRUE), but it still uses the gdal-config from my default environment (i.e. version 2.0).

This block of code does not perform as expected:

    # Try to use GDAL_HOME location if specified
    IF($ENV{GDAL_HOME})
        SET(GDAL_CONFIG_PREFER_PATH
            "$ENV{GDAL_HOME}/bin" CACHE STRING "Search for gdal-config program in preferred location")
    ENDIF()

That is because of the incorrect way of testing environment variables. It should properly read:

    # Try to use GDAL_HOME location if specified
    IF(DEFINED ENV{GDAL_HOME})
        SET(GDAL_CONFIG_PREFER_PATH
            "$ENV{GDAL_HOME}/bin" CACHE STRING "Search for gdal-config program in preferred location")
    ENDIF()

Then GDAL_CONFIG_PREFEER_PATH gets correctly set.

Then again the real cause of the error is here:

        FIND_PATH(GDAL_INCLUDE_DIR
            gdal.h 
            PATH_PREFIXES gdal
            PATHS
            ${GDAL_PREFIX}/include/gdal
            ${GDAL_PREFIX}/include
            /usr/local/include 
            /usr/include)

None of the gdal builds I have come with the includes (gdal.h is nowhere to be found). All I have is the shared libraries (also for the plugins) and the command-line tools (and also the data bit).

Another point: the goal-config tool contains the configuration when and where gdal was built. In other words "gdal-config —libs” returns the location of the libraries as they were on the system where GDAL was built, and subsequently GDAL_LIBRARY is set to an invalid location too, definitely not the one used in the current GDAL installation.

Albert


> On 28-Dec-2015, at 15:59, Howard Butler <howard at hobu.co> wrote:
> 
> 
>> On Dec 28, 2015, at 8:22 AM, Albert Godfrind <albert.godfrind at oracle.com> wrote:
>> 
>> I am trying to build the latest GDAL on Linux. The cmake stage fails like this:
>> 
>> $ cmake -G "Unix Makefiles"  ../
>> -- Boost version: 1.60.0
> 
> /me groans. There's a boost 1.60 now? Consider this notice that it is a medium term goal of the PDAL project to eliminate its dependence on externally available Boost before its 2.0 release. Now that C++11 is quite stable just about everywhere, the impetus to reach for Boost for everything is not there anymore for PDAL. Their project release management leaves much to be desired, and because of it, packaging maintainers lag many versions behind current releases. 
> 
>> -- Could NOT find GDAL (missing:  GDAL_INCLUDE_DIR) (Required is at least version "1.9.0")
>> CMake Error at cmake/gdal.cmake:13 (message):
> 
>> I have gdal installed (version 2.0). It looks like it wants me to define GDAL_INCLUDE_DIR but to what location ? I tried setting up to the lib directory in my installation. I also tried defining GDAL_HOME and even GDAL_LIBRARY all to no effect.
> 
>> Any idea what I am doing wrong ?
> 
> PDAL's configure-time GDAL detection needs to support GDAL 2.0. Software-wise, GDAL 2.0 should be no problem except for maybe some deprecation warnings. PDAL currently only supports 1.11.x., however. I will make a patch to fix this and let you know.
> 
> Howard
> 
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal

--
 <http://www.oracle.com/>
Albert Godfrind | Geospatial technologies | Tel: +33 4 93 00 80 67 | Mobile: +33 6 09 97 27 23 | Skype: albert-godfrind <skype:albert-godfrind>
Oracle Server Technologies
400 Av. Roumanille, BP 309  | 06906 Sophia Antipolis cedex | France
Everything you ever wanted to know about Oracle Spatial <http://www.apress.com/9781590598993>
 <http://www.locationintelligence.net/dc/>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151228/243173ea/attachment-0001.html>

From howard at hobu.co  Mon Dec 28 09:57:18 2015
From: howard at hobu.co (Howard Butler)
Date: Mon, 28 Dec 2015 11:57:18 -0600
Subject: [pdal] Unable to build PDAL 1.1.0: "Could NOT find GDAL
	(missing: GDAL_INCLUDE_DIR) "
In-Reply-To: <3EB09664-991C-402F-A1EB-19562A63E3B7@oracle.com>
References: <23BABF91-F3E2-4337-B104-D0A696DD7C8A@oracle.com>
 <967CFAC2-B0F3-409A-BA7B-EA9ACB784540@hobu.co>
 <3EB09664-991C-402F-A1EB-19562A63E3B7@oracle.com>
Message-ID: <8B46A53F-235D-4E38-B7B2-737A0D4C0D9E@hobu.co>


> On Dec 28, 2015, at 10:30 AM, Albert Godfrind <albert.godfrind at oracle.com> wrote:
> 
> Then again the real cause of the error is here:
> 
>         FIND_PATH(GDAL_INCLUDE_DIR
>             gdal.h 
>             PATH_PREFIXES gdal
>             PATHS
>             ${GDAL_PREFIX}/include/gdal
>             ${GDAL_PREFIX}/include
>             /usr/local/include 
>             /usr/include)

Albert,

Thanks for the hints. I took your report and made a pull request to adopt it as well as support GDAL 2.0+. Please give it a test at https://github.com/PDAL/PDAL/pull/1075

Howard


From wenzeslaus at gmail.com  Tue Dec 29 08:42:19 2015
From: wenzeslaus at gmail.com (Vaclav Petras)
Date: Tue, 29 Dec 2015 11:42:19 -0500
Subject: [pdal] New dimension from filters.height
Message-ID: <CABo5uVvsh3e7NZdWBQ003S+EDhENEDtiKvabEL63e4GCwB+YgA@mail.gmail.com>

Hi all,

the filter height [1] adds another dimension called Height. I have two
questions related to this.

1) How can I access this dimension in C++? Taking its ID from the list of
dimensions

  point_view->dims().back()

works for me but I though I can get its ID directly by something like

  pdal::Dimension::id("Height")

2) Why it is using custom dimension when there is HeightAboveGround?

  pdal::Dimension::Id::HeightAboveGround

Thanks,
Vaclav

http://www.pdal.io/stages/filters.height.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151229/ed9d19ad/attachment.html>

From andrew.bell.ia at gmail.com  Tue Dec 29 08:47:20 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 29 Dec 2015 10:47:20 -0600
Subject: [pdal] New dimension from filters.height
In-Reply-To: <CABo5uVvsh3e7NZdWBQ003S+EDhENEDtiKvabEL63e4GCwB+YgA@mail.gmail.com>
References: <CABo5uVvsh3e7NZdWBQ003S+EDhENEDtiKvabEL63e4GCwB+YgA@mail.gmail.com>
Message-ID: <CACJ51z1o+jC94r6T-tZxnULR6HH4484qhoS6THi7vR0+VU2x=g@mail.gmail.com>

On Tue, Dec 29, 2015 at 10:42 AM, Vaclav Petras <wenzeslaus at gmail.com>
wrote:

> Hi all,
>
> the filter height [1] adds another dimension called Height. I have two
> questions related to this.
>
> 1) How can I access this dimension in C++? Taking its ID from the list of
> dimensions
>
>   point_view->dims().back()
>
> works for me but I though I can get its ID directly by something like
>
>   pdal::Dimension::id("Height")
>

Dimension::Id::Enum dim = point_view->layout()->findDim("Height");


> 2) Why it is using custom dimension when there is HeightAboveGround?
>
>   pdal::Dimension::Id::HeightAboveGround
>

Good question.  Seems to me that it should be changed.  Anyone opposed?

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151229/257f1745/attachment.html>

From wenzeslaus at gmail.com  Tue Dec 29 10:18:48 2015
From: wenzeslaus at gmail.com (Vaclav Petras)
Date: Tue, 29 Dec 2015 13:18:48 -0500
Subject: [pdal] New dimension from filters.height
In-Reply-To: <CACJ51z1o+jC94r6T-tZxnULR6HH4484qhoS6THi7vR0+VU2x=g@mail.gmail.com>
References: <CABo5uVvsh3e7NZdWBQ003S+EDhENEDtiKvabEL63e4GCwB+YgA@mail.gmail.com>
 <CACJ51z1o+jC94r6T-tZxnULR6HH4484qhoS6THi7vR0+VU2x=g@mail.gmail.com>
Message-ID: <CABo5uVvA_F2MV1ux6YqXKiYXYZoCpxP3ftYNFkhiyYRQWsAbgw@mail.gmail.com>

On Tue, Dec 29, 2015 at 11:47 AM, Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

> On Tue, Dec 29, 2015 at 10:42 AM, Vaclav Petras <wenzeslaus at gmail.com>
> wrote:
>
>> Hi all,
>>
>> the filter height [1] adds another dimension called Height. I have two
>> questions related to this.
>>
>> 1) How can I access this dimension in C++? Taking its ID from the list of
>> dimensions
>>
>>   point_view->dims().back()
>>
>> works for me but I though I can get its ID directly by something like
>>
>>   pdal::Dimension::id("Height")
>>
>
> Dimension::Id::Enum dim = point_view->layout()->findDim("Height");
>


I can see that now in the source code, thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20151229/862a459b/attachment.html>

