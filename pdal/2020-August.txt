From wonder.sk at gmail.com  Mon Aug 10 06:31:53 2020
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 10 Aug 2020 15:31:53 +0200
Subject: [pdal] Point clouds in QGIS
Message-ID: <CAC2XbFek_sgDaKyjW2Kq-bQByrvTy8_Yk8q-ppkixREBdNp6=w@mail.gmail.com>

Hi all

For those who may be interested - we have prepared a draft proposal to
introduce point cloud visualization in QGIS, with the plan that the
implementation would be built on top of PDAL:
https://github.com/qgis/QGIS-Enhancement-Proposals/issues/194

We would be happy to hear your feedback! (either here on the mailing
list or in that GitHub ticket)

Regards
Martin

From njacadieux.gitlab at gmail.com  Mon Aug 10 08:13:15 2020
From: njacadieux.gitlab at gmail.com (Nicolas Cadieux)
Date: Mon, 10 Aug 2020 11:13:15 -0400
Subject: [pdal] Point clouds in QGIS
In-Reply-To: <CAC2XbFek_sgDaKyjW2Kq-bQByrvTy8_Yk8q-ppkixREBdNp6=w@mail.gmail.com>
References: <CAC2XbFek_sgDaKyjW2Kq-bQByrvTy8_Yk8q-ppkixREBdNp6=w@mail.gmail.com>
Message-ID: <a9ec0e86-a9f1-37e6-d75b-e9a4d5184c31@gmail.com>

Hi,

This is wonderful.  Please, in addition to las/laz and the CloudCompare 
bin format, it would be very important not to forget the simple text 
file.  I have been fusioning Lidar data with hyperspectral data and 
since I can have thousands of bands, this cannot fit in any standard 
LiDAR format. While slow, the standard ascii file is still not dead!

Keep me posted.  I will test for you.

https://gitlab.com/njacadieux/3dcloud-hyperspectralfusion

Nicolas

On 2020-08-10 9:31 a.m., Martin Dobias wrote:
> Hi all
>
> For those who may be interested - we have prepared a draft proposal to
> introduce point cloud visualization in QGIS, with the plan that the
> implementation would be built on top of PDAL:
> https://github.com/qgis/QGIS-Enhancement-Proposals/issues/194
>
> We would be happy to hear your feedback! (either here on the mailing
> list or in that GitHub ticket)
>
> Regards
> Martin
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal

From andrewmcunliffe at gmail.com  Wed Aug 12 12:25:41 2020
From: andrewmcunliffe at gmail.com (Andrew Cunliffe)
Date: Wed, 12 Aug 2020 20:25:41 +0100
Subject: [pdal] Best practice for classifying ground on large cloud?
Message-ID: <CAM1p0+HA-si=X1ZpAD_UyX3Kf4u=NNrDMhnxTZtW0G0Vf9=q5Q@mail.gmail.com>

Does anyone have recommendations for best practice for classifying ground
points on large clouds?

I'd like to use SMRF to classify ground points in a large cloud (ca. 920
000 000 points), but am exceeding the system memory (128GB).

It seems logical to split a large cloud into buffered tiles (to minimise
edge effects), then run a classifier on each tile, delete the buffer and
merge the tiles together again. It seems like this should be possible with
filters.splitter, but is this the right way to go?

Any suggestions on implementation much appreciated!
Regards,
Andy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200812/1e90fcb8/attachment.html>

From brad.chambers at gmail.com  Wed Aug 12 13:22:43 2020
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Wed, 12 Aug 2020 15:22:43 -0500
Subject: [pdal] Best practice for classifying ground on large cloud?
In-Reply-To: <CAM1p0+HA-si=X1ZpAD_UyX3Kf4u=NNrDMhnxTZtW0G0Vf9=q5Q@mail.gmail.com>
References: <CAM1p0+HA-si=X1ZpAD_UyX3Kf4u=NNrDMhnxTZtW0G0Vf9=q5Q@mail.gmail.com>
Message-ID: <CAJyqqPy9cM9LSV2k3Hb1U=U2Mr72HLsfrwGSpJTK-LHGnK8Znw@mail.gmail.com>

You should also look at
https://pdal.io/apps/tile.html if you haven’t already. It helps with
buffered tile creation. There will be some work required on your part to
delete the buffer and merge the filtered result at the end however.

Brad

On Wed, Aug 12, 2020 at 14:48 Andrew Cunliffe <andrewmcunliffe at gmail.com>
wrote:

> Does anyone have recommendations for best practice for classifying ground
> points on large clouds?
>
> I'd like to use SMRF to classify ground points in a large cloud (ca. 920
> 000 000 points), but am exceeding the system memory (128GB).
>
> It seems logical to split a large cloud into buffered tiles (to minimise
> edge effects), then run a classifier on each tile, delete the buffer and
> merge the tiles together again. It seems like this should be possible with
> filters.splitter, but is this the right way to go?
>
> Any suggestions on implementation much appreciated!
> Regards,
> Andy
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200812/308c8ac2/attachment.html>

From michael.smith.erdc at gmail.com  Wed Aug 12 13:57:21 2020
From: michael.smith.erdc at gmail.com (michael.smith.erdc at gmail.com)
Date: Wed, 12 Aug 2020 16:57:21 -0400
Subject: [pdal] Best practice for classifying ground on large cloud?
In-Reply-To: <CAJyqqPy9cM9LSV2k3Hb1U=U2Mr72HLsfrwGSpJTK-LHGnK8Znw@mail.gmail.com>
References: <CAJyqqPy9cM9LSV2k3Hb1U=U2Mr72HLsfrwGSpJTK-LHGnK8Znw@mail.gmail.com>
Message-ID: <3C1A495E-A629-4437-B0A6-5567B18D1D19@gmail.com>

Another way to do this would be to convert the data to EPT so you can make buffered range requests to the data. You can easily build a geometry tile dataset (qgis has a nice one) and then pass the geometries to a batch pipeline. 

Michael Smith
US Army Corps

> On Aug 12, 2020, at 4:51 PM, Bradley Chambers <brad.chambers at gmail.com> wrote:
> 
> ﻿
> You should also look at 
> https://pdal.io/apps/tile.html if you haven’t already. It helps with buffered tile creation. There will be some work required on your part to delete the buffer and merge the filtered result at the end however. 
> 
> Brad
> 
>> On Wed, Aug 12, 2020 at 14:48 Andrew Cunliffe <andrewmcunliffe at gmail.com> wrote:
>> Does anyone have recommendations for best practice for classifying ground points on large clouds?
>> 
>> I'd like to use SMRF to classify ground points in a large cloud (ca. 920 000 000 points), but am exceeding the system memory (128GB).
>> 
>> It seems logical to split a large cloud into buffered tiles (to minimise edge effects), then run a classifier on each tile, delete the buffer and merge the tiles together again. It seems like this should be possible with filters.splitter, but is this the right way to go?
>> 
>> Any suggestions on implementation much appreciated!
>> Regards,
>> Andy
>> 
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200812/d51050d0/attachment.html>

From alisoncramer at nevada.unr.edu  Fri Aug 14 13:11:54 2020
From: alisoncramer at nevada.unr.edu (alison.cramer3)
Date: Fri, 14 Aug 2020 13:11:54 -0700 (MST)
Subject: [pdal] Upsample
Message-ID: <1597435914725-0.post@n6.nabble.com>

I have a point cloud of an abandoned mine land with a waste rock pile.  The
waste rock pile has rills (soil removed by erosion) caused by large rainfall
events.  This causes differences in elevation (z values) within 1 square
meter.  I would like to perform a moving window of 1m along the waste rock
pile.  This would hopefully give me "cells" of 1m by 1m.  My goal is to find
the maximum z value in every 1m cell.  Once I find the max z value in each
1m cell, I would like to replace the current z values with the specific
maximum z value calculated for each cell.  Then export to a new point cloud. 
Does anyone have an idea as to how I would go about this in pdal?    



--
Sent from: http://osgeo-org.1560.x6.nabble.com/PDAL-f4600080.html

From alisoncramer at nevada.unr.edu  Fri Aug 14 13:12:29 2020
From: alisoncramer at nevada.unr.edu (Alison Cramer)
Date: Fri, 14 Aug 2020 13:12:29 -0700
Subject: [pdal] upsample
Message-ID: <CAFCifKwRU99TvgjF55zKLv8guYpmyNwSWAhDQcEJ8uOpTeN1rw@mail.gmail.com>

I have a point cloud of an abandoned mine land with a waste rock pile.  The
waste rock pile has rills (soil removed by erosion) caused by large
rainfall events.  This causes differences in elevation (z values) within 1
square meter.  I would like to perform a moving window of 1m along the
waste rock pile.  This would hopefully give me "cells" of 1m by 1m.  My
goal is to find the maximum z value in every 1m cell.  Once I find the max
z value in each 1m cell, I would like to replace the current z values with
the specific maximum z value calculated for each cell.  Then export to a
new point cloud.  Does anyone have an idea as to how I would go about this
in pdal?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200814/6f9d789b/attachment.html>

From connor at hobu.co  Fri Aug 14 14:04:54 2020
From: connor at hobu.co (Connor Manning)
Date: Fri, 14 Aug 2020 16:04:54 -0500
Subject: [pdal] upsample
In-Reply-To: <CAFCifKwRU99TvgjF55zKLv8guYpmyNwSWAhDQcEJ8uOpTeN1rw@mail.gmail.com>
References: <CAFCifKwRU99TvgjF55zKLv8guYpmyNwSWAhDQcEJ8uOpTeN1rw@mail.gmail.com>
Message-ID: <CAO=Fyj+sOekn9Zt-HL7XrAKT6LU-BhHUq7G+oWH-KSFXYqYY0g@mail.gmail.com>

Sounds like you could do this in raster land since you are interested in
1x1 meter cells.  Perhaps the GDAL writer (
https://pdal.io/stages/writers.gdal.html) with a `resolution` of 1 and an
`output_type` of "max".  And then to reinterpret your output as a point
cloud: the GDAL reader (https://pdal.io/stages/readers.gdal.html).

On Fri, Aug 14, 2020 at 3:12 PM Alison Cramer <alisoncramer at nevada.unr.edu>
wrote:

> I have a point cloud of an abandoned mine land with a waste rock pile.
> The waste rock pile has rills (soil removed by erosion) caused by large
> rainfall events.  This causes differences in elevation (z values) within 1
> square meter.  I would like to perform a moving window of 1m along the
> waste rock pile.  This would hopefully give me "cells" of 1m by 1m.  My
> goal is to find the maximum z value in every 1m cell.  Once I find the max
> z value in each 1m cell, I would like to replace the current z values with
> the specific maximum z value calculated for each cell.  Then export to a
> new point cloud.  Does anyone have an idea as to how I would go about this
> in pdal?
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200814/f14aec8e/attachment.html>

From brad.chambers at gmail.com  Fri Aug 14 14:22:35 2020
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Fri, 14 Aug 2020 16:22:35 -0500
Subject: [pdal] upsample
In-Reply-To: <CAO=Fyj+sOekn9Zt-HL7XrAKT6LU-BhHUq7G+oWH-KSFXYqYY0g@mail.gmail.com>
References: <CAFCifKwRU99TvgjF55zKLv8guYpmyNwSWAhDQcEJ8uOpTeN1rw@mail.gmail.com>
 <CAO=Fyj+sOekn9Zt-HL7XrAKT6LU-BhHUq7G+oWH-KSFXYqYY0g@mail.gmail.com>
Message-ID: <CAJyqqPy-9r_nYK_N2pRXcsnWwnd4818Rw=2aLJ32Hj_Boft74Q@mail.gmail.com>

Good call with GDAL reader/writer, but this only gives you 1 point per
cell. Another partial solution would be to use filters.locate, searching
for the max in the Z dimension (see the docs on how to specify this). You'd
have to split using filters.splitter first, and would have the same issue
in the end of having a single point per cell. I'm just not sure we have a
filter that could take that value and apply it to the rest of the points in
the cell. You could write a Python script and call that with filters.python.

On Fri, Aug 14, 2020 at 4:05 PM Connor Manning <connor at hobu.co> wrote:

> Sounds like you could do this in raster land since you are interested in
> 1x1 meter cells.  Perhaps the GDAL writer (
> https://pdal.io/stages/writers.gdal.html) with a `resolution` of 1 and an
> `output_type` of "max".  And then to reinterpret your output as a point
> cloud: the GDAL reader (https://pdal.io/stages/readers.gdal.html).
>
> On Fri, Aug 14, 2020 at 3:12 PM Alison Cramer <alisoncramer at nevada.unr.edu>
> wrote:
>
>> I have a point cloud of an abandoned mine land with a waste rock pile.
>> The waste rock pile has rills (soil removed by erosion) caused by large
>> rainfall events.  This causes differences in elevation (z values) within 1
>> square meter.  I would like to perform a moving window of 1m along the
>> waste rock pile.  This would hopefully give me "cells" of 1m by 1m.  My
>> goal is to find the maximum z value in every 1m cell.  Once I find the max
>> z value in each 1m cell, I would like to replace the current z values with
>> the specific maximum z value calculated for each cell.  Then export to a
>> new point cloud.  Does anyone have an idea as to how I would go about this
>> in pdal?
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200814/fe70cef1/attachment.html>

From andrew.bell.ia at gmail.com  Fri Aug 14 15:36:20 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Fri, 14 Aug 2020 18:36:20 -0400
Subject: [pdal] upsample
In-Reply-To: <CAJyqqPy-9r_nYK_N2pRXcsnWwnd4818Rw=2aLJ32Hj_Boft74Q@mail.gmail.com>
References: <CAFCifKwRU99TvgjF55zKLv8guYpmyNwSWAhDQcEJ8uOpTeN1rw@mail.gmail.com>
 <CAO=Fyj+sOekn9Zt-HL7XrAKT6LU-BhHUq7G+oWH-KSFXYqYY0g@mail.gmail.com>
 <CAJyqqPy-9r_nYK_N2pRXcsnWwnd4818Rw=2aLJ32Hj_Boft74Q@mail.gmail.com>
Message-ID: <CACJ51z0m+9c00Mc-05n3SaPhR0ZBpUs9pu5A5nEyu5W8uebExQ@mail.gmail.com>

Alison,

This would be simple to implement from scratch. I could write you a custom
filter if that's what you want. Contact me off list if you'd like to
discuss.

On Fri, Aug 14, 2020, 5:22 PM Bradley Chambers <brad.chambers at gmail.com>
wrote:

> Good call with GDAL reader/writer, but this only gives you 1 point per
> cell. Another partial solution would be to use filters.locate, searching
> for the max in the Z dimension (see the docs on how to specify this). You'd
> have to split using filters.splitter first, and would have the same issue
> in the end of having a single point per cell. I'm just not sure we have a
> filter that could take that value and apply it to the rest of the points in
> the cell. You could write a Python script and call that with filters.python.
>
> On Fri, Aug 14, 2020 at 4:05 PM Connor Manning <connor at hobu.co> wrote:
>
>> Sounds like you could do this in raster land since you are interested in
>> 1x1 meter cells.  Perhaps the GDAL writer (
>> https://pdal.io/stages/writers.gdal.html) with a `resolution` of 1 and
>> an `output_type` of "max".  And then to reinterpret your output as a point
>> cloud: the GDAL reader (https://pdal.io/stages/readers.gdal.html).
>>
>> On Fri, Aug 14, 2020 at 3:12 PM Alison Cramer <
>> alisoncramer at nevada.unr.edu> wrote:
>>
>>> I have a point cloud of an abandoned mine land with a waste rock pile.
>>> The waste rock pile has rills (soil removed by erosion) caused by large
>>> rainfall events.  This causes differences in elevation (z values) within 1
>>> square meter.  I would like to perform a moving window of 1m along the
>>> waste rock pile.  This would hopefully give me "cells" of 1m by 1m.  My
>>> goal is to find the maximum z value in every 1m cell.  Once I find the max
>>> z value in each 1m cell, I would like to replace the current z values with
>>> the specific maximum z value calculated for each cell.  Then export to a
>>> new point cloud.  Does anyone have an idea as to how I would go about this
>>> in pdal?
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200814/4b4ba0c5/attachment-0001.html>

From howard at hobu.co  Mon Aug 24 06:15:33 2020
From: howard at hobu.co (Howard Butler)
Date: Mon, 24 Aug 2020 08:15:33 -0500
Subject: [pdal] QGIS point cloud crowdfunding
Message-ID: <13318AC3-66AE-4DB5-B23D-563DBCA0FE32@hobu.co>

All,

Hobu is teaming up with Lutra Consulting and North Road to crowdfund the implementation of more thorough point cloud visualization support in QGIS based on PDAL. If your organization uses QGIS and you've missed the convenience of being able to visualize, interrogate, and exploit point cloud data in your environment, this is your opportunity to help improve the situation. 

As you can imagine, the effort required to implement this support is significant, and the crowdfunding campaign will be as well. If your organization is interested in providing substantial support to help, please visit https://www.lutraconsulting.co.uk//crowdfunding/pointcloud-qgis/ <https://www.lutraconsulting.co.uk//crowdfunding/pointcloud-qgis/> and pledge to the campaign. Alternatively, please email me directly, and I will be happy to route you through the process. Similar to the gdalbarn.com <http://gdalbarn.com/> effort, billing and payment will be handled by a single entity – in this case Lutra – and work will not begin until pledges have crossed the threshold. 

Howard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200824/b1611a20/attachment.html>

From evert.etienne at gmail.com  Mon Aug 24 07:34:52 2020
From: evert.etienne at gmail.com (Evert Etienne)
Date: Mon, 24 Aug 2020 16:34:52 +0200
Subject: [pdal] PDAL v2 spatial reference difference
Message-ID: <05674E72-1AB3-465A-988F-B6E88015CBF0@gmail.com>

Dear all,

I have a question about some behaviour I don’t understand when using PDAL.
We are in the middle up updating PDAL from 1.8.0 to 2.1.0. We have some unit tests checking the spatial reference system reading in our code.
In 1.8.0, the spatial reference read (using info—metadata `spatialreference`) from a test pointcloud (https://pdal.io/tutorial/reading.html#a-basic-inquiry-example <https://pdal.io/tutorial/reading.html#a-basic-inquiry-example> interesting.las) was the following

'PROJCS["NAD_1983_Oregon_Statewide_Lambert_Feet_Intl",GEOGCS["GCS_North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137,298.257222101]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["standard_parallel_1",43],PARAMETER["standard_parallel_2",45.5],PARAMETER["latitude_of_origin",41.75],PARAMETER["central_meridian",-120.5],PARAMETER["false_easting",400000],PARAMETER["false_northing",0],UNIT["foot",0.3048,AUTHORITY["EPSG","9002"]]]’

But using 2.1.0, this becomes the following

'PROJCS["NAD_1983_Oregon_Statewide_Lambert_Feet_Intl",GEOGCS["GCS_North_American_1983",DATUM["North_American_Datum_1983",SPHEROID["GRS_1980",6378137,298.257222101]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["latitude_of_origin",41.75],PARAMETER["central_meridian",-120.5],PARAMETER["standard_parallel_1",43],PARAMETER["standard_parallel_2",45.5],PARAMETER["false_easting",400000],PARAMETER["false_northing",0],UNIT["foot",0.3048,AUTHORITY["EPSG","9002"]],AXIS["Easting",EAST],AXIS["Northing",NORTH]]’

I am lost on 2 topics
- How can a read operation change the data returned, is there some lookup being done (proj version causing this?)
- Are these 2 equivalent or what causes this to change and be different?

Very possibly i am missing some crucial background information on these spatial references, so feel free to point me to relevant documentation or changelogs.

Thanks in advance!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200824/f9ba91f7/attachment.html>

From howard at hobu.co  Mon Aug 24 11:04:52 2020
From: howard at hobu.co (Howard Butler)
Date: Mon, 24 Aug 2020 13:04:52 -0500
Subject: [pdal] PDAL v2 spatial reference difference
In-Reply-To: <05674E72-1AB3-465A-988F-B6E88015CBF0@gmail.com>
References: <05674E72-1AB3-465A-988F-B6E88015CBF0@gmail.com>
Message-ID: <D18581AC-EF84-4FE4-B3A6-494DE55F4F53@hobu.co>



> On Aug 24, 2020, at 9:34 AM, Evert Etienne <evert.etienne at gmail.com> wrote:
> 
> Dear all,
> 
> I have a question about some behaviour I don’t understand when using PDAL.
> We are in the middle up updating PDAL from 1.8.0 to 2.1.0. We have some unit tests checking the spatial reference system reading in our code.
> In 1.8.0, the spatial reference read (using info—metadata `spatialreference`) from a test pointcloud (https://pdal.io/tutorial/reading.html#a-basic-inquiry-example <https://pdal.io/tutorial/reading.html#a-basic-inquiry-example> interesting.las) was the following
> 
> 'PROJCS["NAD_1983_Oregon_Statewide_Lambert_Feet_Intl",GEOGCS["GCS_North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137,298.257222101]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["standard_parallel_1",43],PARAMETER["standard_parallel_2",45.5],PARAMETER["latitude_of_origin",41.75],PARAMETER["central_meridian",-120.5],PARAMETER["false_easting",400000],PARAMETER["false_northing",0],UNIT["foot",0.3048,AUTHORITY["EPSG","9002"]]]’
> 
> But using 2.1.0, this becomes the following
> 
> 'PROJCS["NAD_1983_Oregon_Statewide_Lambert_Feet_Intl",GEOGCS["GCS_North_American_1983",DATUM["North_American_Datum_1983",SPHEROID["GRS_1980",6378137,298.257222101]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["latitude_of_origin",41.75],PARAMETER["central_meridian",-120.5],PARAMETER["standard_parallel_1",43],PARAMETER["standard_parallel_2",45.5],PARAMETER["false_easting",400000],PARAMETER["false_northing",0],UNIT["foot",0.3048,AUTHORITY["EPSG","9002"]],AXIS["Easting",EAST],AXIS["Northing",NORTH]]’
> 
> I am lost on 2 topics
> - How can a read operation change the data returned, is there some lookup being done (proj version causing this?)

Yes. First confirm that the same version of PROJ and GDAL are being used between these two different WKT.

> - Are these 2 equivalent or what causes this to change and be different?

It looks to me by a quick glance at the parameters that these are equivalent, but it is totally possible that PROJ produces "equivalent" WKT that do not string-compare as equal.

> Very possibly i am missing some crucial background information on these spatial references, so feel free to point me to relevant documentation or changelogs.

Dealing with WKT is akin to enduring the cruciatus curse...

Howard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200824/f25b934e/attachment.html>

From RPhillips at linz.govt.nz  Tue Aug 25 20:55:30 2020
From: RPhillips at linz.govt.nz (Rose Phillips)
Date: Wed, 26 Aug 2020 03:55:30 +0000
Subject: [pdal] pdal pipeline | error 'No error'
Message-ID: <MEAPR01MB2309C7D52D9B0F99B656B62D9C540@MEAPR01MB2309.ausprd01.prod.outlook.com>

Hi everybody,

Apologies if this is a banal question. I ran this pdal pipeline command, and got this error *PDAL: Unable to open stream for 'E:/test_density/*.las' with error 'No error'* :-

pdal pipeline C:/a/density_test_sub.json --readers.las.filename=E:/test_density/*.las --writers.gdal.filename=E:/test_density/test_density.tif
density_test_sub.json
{
    "pipeline" : [
    {
        "type" : "readers.las",
        "filename" : "input.las"
    },
    {
        "type":"filters.returns",
        "groups":"first, only"
    },
    {
        "type": "filters.merge"
    },
    {
        "type" : "writers.gdal",
        "resolution": 1,
        "nodata" : -9999,
        "filename": "pulse_density.tif"
    }
    ]
  }

Could this be because I used a wildcard for the readers.las.filename?
I'm attempting to create a raster representing all the files in a directory of las files.

(Thank you everyone at Hobu for pdal, it is an awesome piece of software!)

Many thanks and kindest regards
Rose Phillips
Location Data Analyst
Topography
rphillips at linz.govt.nz<mailto:rphillips at linz.govt.nz>

[linz_logo_signature_2020]<https://www.linz.govt.nz/>
Wellington Office, Level 7, Radio New Zealand House, 155 The Terrace
PO Box 5501, Wellington 6145, New Zealand
www.linz.govt.nz<http://www.linz.govt.nz/> | data.linz.govt.nz<http://www.data.linz.govt.nz/>

[Image result for facebook icons]<https://www.facebook.com/landinformationnz/>        [Image result for linkedin icons] <https://www.linkedin.com/company/land-information-new-zealand/>          [Image result for twitter icons] <https://twitter.com/LandInfoNZ>          [Image result for youtube icons] <https://www.youtube.com/user/linzvideoofficial>



________________________________

This message contains information, which may be in confidence and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200826/fb6280e0/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 5640 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200826/fb6280e0/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 1042 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200826/fb6280e0/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 1146 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200826/fb6280e0/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.png
Type: image/png
Size: 1051 bytes
Desc: image007.png
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200826/fb6280e0/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image009.png
Type: image/png
Size: 1696 bytes
Desc: image009.png
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200826/fb6280e0/attachment-0009.png>

From cesar.ortega.chies at gmail.com  Wed Aug 26 00:57:00 2020
From: cesar.ortega.chies at gmail.com (Cesar Ortega)
Date: Wed, 26 Aug 2020 09:57:00 +0200
Subject: [pdal] large .las files change wheigth
Message-ID: <CAOPtiOkv0__qEoZMCns2ijkEPVKY6LgVg76FvAUtnbCfXmaFyg@mail.gmail.com>

Dear sirs.
The last days, we made a little pipeline to change some metadata from one
17gb .las file.
It worked correctly, but the file now occupies 12 gb. It seems the file has
all the points, returns, intensity.., but weighs much less.

We tried it with more files (2gb,30gg, 5gb...) and always weights much less
after the pipeline.

The pipeline is very simple, only modifies the day of year and saves the
result with another name.

Could someone tell us why it happens, and if it has any effect on the
quality of the file result?

Many thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200826/f28b8e30/attachment.html>

From andrew.bell.ia at gmail.com  Wed Aug 26 05:10:32 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 26 Aug 2020 08:10:32 -0400
Subject: [pdal] pdal pipeline | error 'No error'
In-Reply-To: <MEAPR01MB2309C7D52D9B0F99B656B62D9C540@MEAPR01MB2309.ausprd01.prod.outlook.com>
References: <MEAPR01MB2309C7D52D9B0F99B656B62D9C540@MEAPR01MB2309.ausprd01.prod.outlook.com>
Message-ID: <CACJ51z3NOrEz61_M-U=pgzCVx=tE13umfUKf8bg8JgL459EOMQ@mail.gmail.com>

Filename globbing only works in pipelines:
https://pdal.io/pipeline.html#filename-globbing

On Wed, Aug 26, 2020 at 12:01 AM Rose Phillips <RPhillips at linz.govt.nz>
wrote:

> Hi everybody,
>
>
>
> Apologies if this is a banal question. I ran this pdal pipeline command,
> and got this error *PDAL: Unable to open stream for 'E:/test_density/*.las'
> with error 'No error'* :-
>
>
>
> pdal pipeline C:/a/density_test_sub.json
> --readers.las.filename=E:/test_density/*.las
> --writers.gdal.filename=E:/test_density/test_density.tif
>
> density_test_sub.json
>
> {
>
>     "pipeline" : [
>
>     {
>
>         "type" : "readers.las",
>
>         "filename" : "input.las"
>
>     },
>
>     {
>
>         "type":"filters.returns",
>
>         "groups":"first, only"
>
>     },
>
>     {
>
>         "type": "filters.merge"
>
>     },
>
>     {
>
>         "type" : "writers.gdal",
>
>         "resolution": 1,
>
>         "nodata" : -9999,
>
>         "filename": "pulse_density.tif"
>
>     }
>
>     ]
>
>   }
>
>
>
> Could this be because I used a wildcard for the readers.las.filename?
> I’m attempting to create a raster representing all the files in a
> directory of las files.
>
>
>
> (Thank you everyone at Hobu for pdal, it is an awesome piece of software!)
>
>
>
> Many thanks and kindest regards
>
> *Rose Phillips*
> *Location Data Analyst*
>
> Topography
>
> rphillips at linz.govt.nz
>
>
>
> [image: linz_logo_signature_2020] <https://www.linz.govt.nz/>
>
> Wellington Office, Level 7, Radio New Zealand House, 155 The Terrace
> PO Box 5501, Wellington 6145, New Zealand
>
> www.linz.govt.nz | data.linz.govt.nz <http://www.data.linz.govt.nz/>
>
>
>
> [image: Image result for facebook icons]
> <https://www.facebook.com/landinformationnz/>        [image: Image result
> for linkedin icons]
> <https://www.linkedin.com/company/land-information-new-zealand/>         [image:
> Image result for twitter icons] <https://twitter.com/LandInfoNZ>         [image:
> Image result for youtube icons]
> <https://www.youtube.com/user/linzvideoofficial>
>
>
>
>
>
> ------------------------------
>
> This message contains information, which may be in confidence and may be
> subject to legal privilege. If you are not the intended recipient, you must
> not peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800
> 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> accepts no responsibility for changes to this email, or for any
> attachments, after its transmission from LINZ. Thank You.
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200826/250e2d86/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 5640 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200826/250e2d86/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 1042 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200826/250e2d86/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 1146 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200826/250e2d86/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.png
Type: image/png
Size: 1051 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200826/250e2d86/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image009.png
Type: image/png
Size: 1696 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200826/250e2d86/attachment-0009.png>

From andrew.bell.ia at gmail.com  Wed Aug 26 05:13:56 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 26 Aug 2020 08:13:56 -0400
Subject: [pdal] large .las files change wheigth
In-Reply-To: <CAOPtiOkv0__qEoZMCns2ijkEPVKY6LgVg76FvAUtnbCfXmaFyg@mail.gmail.com>
References: <CAOPtiOkv0__qEoZMCns2ijkEPVKY6LgVg76FvAUtnbCfXmaFyg@mail.gmail.com>
Message-ID: <CACJ51z0jN6bYeJ1oCptv4m3t6fvPR+1baWEb1tO8uP047c+vUg@mail.gmail.com>

I suspect you are writing the output file with a different point data
format (dataformat_id option) than the input file. PDAL uses PDRF 3 by
default, but you can set the value as you wish or forward the value from
the input. Please see the documentation:
https://pdal.io/stages/writers.las.html

On Wed, Aug 26, 2020 at 3:57 AM Cesar Ortega <cesar.ortega.chies at gmail.com>
wrote:

> Dear sirs.
> The last days, we made a little pipeline to change some metadata from one
> 17gb .las file.
> It worked correctly, but the file now occupies 12 gb. It seems the file
> has all the points, returns, intensity.., but weighs much less.
>
> We tried it with more files (2gb,30gg, 5gb...) and always weights much
> less after the pipeline.
>
> The pipeline is very simple, only modifies the day of year and saves the
> result with another name.
>
> Could someone tell us why it happens, and if it has any effect on the
> quality of the file result?
>
> Many thanks
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200826/018158a5/attachment.html>

From cesar.ortega.chies at gmail.com  Wed Aug 26 06:08:14 2020
From: cesar.ortega.chies at gmail.com (Cesar Ortega)
Date: Wed, 26 Aug 2020 15:08:14 +0200
Subject: [pdal] large .las files change wheigth
In-Reply-To: <CACJ51z0jN6bYeJ1oCptv4m3t6fvPR+1baWEb1tO8uP047c+vUg@mail.gmail.com>
References: <CAOPtiOkv0__qEoZMCns2ijkEPVKY6LgVg76FvAUtnbCfXmaFyg@mail.gmail.com>
 <CACJ51z0jN6bYeJ1oCptv4m3t6fvPR+1baWEb1tO8uP047c+vUg@mail.gmail.com>
Message-ID: <CAOPtiOm1x6v-qyi_C9aouTi84twh1u-M7PGPfLWPiQP_-mr7DQ@mail.gmail.com>

Many thanks Andrew. I´ll investigate this option and tell you the result.

El mié., 26 ago. 2020 a las 14:14, Andrew Bell (<andrew.bell.ia at gmail.com>)
escribió:

> I suspect you are writing the output file with a different point data
> format (dataformat_id option) than the input file. PDAL uses PDRF 3 by
> default, but you can set the value as you wish or forward the value from
> the input. Please see the documentation:
> https://pdal.io/stages/writers.las.html
>
> On Wed, Aug 26, 2020 at 3:57 AM Cesar Ortega <cesar.ortega.chies at gmail.com>
> wrote:
>
>> Dear sirs.
>> The last days, we made a little pipeline to change some metadata from one
>> 17gb .las file.
>> It worked correctly, but the file now occupies 12 gb. It seems the file
>> has all the points, returns, intensity.., but weighs much less.
>>
>> We tried it with more files (2gb,30gg, 5gb...) and always weights much
>> less after the pipeline.
>>
>> The pipeline is very simple, only modifies the day of year and saves the
>> result with another name.
>>
>> Could someone tell us why it happens, and if it has any effect on the
>> quality of the file result?
>>
>> Many thanks
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200826/73f45191/attachment.html>

From runette at gmail.com  Wed Aug 26 08:23:36 2020
From: runette at gmail.com (Paul Harwood)
Date: Wed, 26 Aug 2020 16:23:36 +0100
Subject: [pdal] c# bindings for PDAL
In-Reply-To: <CAE8nN5OaDNvYNqVvbkfpnZexUo+AWTc0ZqL1bQiuzk1J5kkE3w@mail.gmail.com>
References: <CAE8nN5PdG8FjqEkrkAQq9PeGnf-bx5qeT8mh9rcUbWfifsL-wQ@mail.gmail.com>
 <719130A5-80D4-4A0F-9290-BF9477AA9E27@hobu.co>
 <CAE8nN5OaDNvYNqVvbkfpnZexUo+AWTc0ZqL1bQiuzk1J5kkE3w@mail.gmail.com>
Message-ID: <CAE8nN5OHTieRPmb0VhxD_K8tPCV+XP8SNPayGSm3_Bwo8X-OFw@mail.gmail.com>

Since I got it all working - I thought I would feed it back.

First point - the "unity Package" I referred to relates to Unity - the VR
development environment. This is scripted in C# - thus the need to use that
language. The Project is a 'GIS in VR' platform - www.virgis.org.

Use of PDAL in C# and Unity comes in two parts:

1) A C API for PDAL. This is provided by PDAL/CAPI
<https://github.com/PDAL/CAPI> and compiles to pdalc.dll. The error I
reported before was caused by this library - but recompiling capi against
PDAL 2.1.0 worked fine and sorted the problem out. I don't think this code
counts as official or even actively maintained but it does work well.

2) C# PINVOKE scripts for the C API. The repo PDAL-UNITY
<https://github.com/Simverge/pdal-unity> is intended only a technology
demonstration but actually provides a very complete set of scripts - see
this source
<https://github.com/Simverge/pdal-unity/blob/master/Assets/pdal/Scripts/Pipeline.cs>
for
an example.

Using this setup, I can, in C#, programmatically create pipelines, execute
those pipelines and get the result back as a pointview.

I can also (Specific to Unity) bake the PointView into a Texture which I
then pass to a VFX (a form of GPU shader) to visualise the Point Cloud.

You can see all of this happening in this source.
<https://github.com/ViRGIS-Team/ViRGIS/blob/version_2/Assets/Scripts/Layers/PointCloudLayer.cs>

On Mon, 22 Jun 2020 at 14:45, Paul Harwood <runette at gmail.com> wrote:

> Thanks for the info.
>
> On Mon, 22 Jun 2020, 14:19 Howard Butler, <howard at hobu.co> wrote:
>
>>
>>
>> > On Jun 20, 2020, at 8:21 AM, Paul Harwood <runette at gmail.com> wrote:
>> >
>> > Does anyone know of any up to date bindings for integrating PDAL into
>> c#?
>> >
>> > I did a search, and there appeared to be some conversations about 9
>> years ago.
>>
>> Yes, as far as I remember, there was just some chatter about .NET
>> bindings, but no organized development.
>>
>> > There is also a unity package pdal-unity that works successfully - but
>> only for PDAL v1.7 and GDAL 2.0.3. It fails on PDAL 2.1. I cannot find
>> anything else.
>>
>> I don't know what a unity package is, but nothing significant has
>> architecturally changed for PDAL between 1.7 and 2.1. GDAL has changed its
>> coordinate system handling significantly since 2.0 => 3.0/3.1, however.
>>
>>
>> Howard
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200826/557d2ba7/attachment.html>

From cesar.ortega.chies at gmail.com  Wed Aug 26 22:51:37 2020
From: cesar.ortega.chies at gmail.com (Cesar Ortega)
Date: Thu, 27 Aug 2020 07:51:37 +0200
Subject: [pdal] large .las files change wheigth
In-Reply-To: <CAOPtiOm1x6v-qyi_C9aouTi84twh1u-M7PGPfLWPiQP_-mr7DQ@mail.gmail.com>
References: <CAOPtiOkv0__qEoZMCns2ijkEPVKY6LgVg76FvAUtnbCfXmaFyg@mail.gmail.com>
 <CACJ51z0jN6bYeJ1oCptv4m3t6fvPR+1baWEb1tO8uP047c+vUg@mail.gmail.com>
 <CAOPtiOm1x6v-qyi_C9aouTi84twh1u-M7PGPfLWPiQP_-mr7DQ@mail.gmail.com>
Message-ID: <CAOPtiOm5qNuGbhab8f3bhGvVEXppa56okDYG578VbKP5qEPuNw@mail.gmail.com>

Confirmed Andrew.
The dataformat_id =8 at the old file, and 3 into the new file.

Many thanks

El mié., 26 ago. 2020 a las 15:08, Cesar Ortega (<
cesar.ortega.chies at gmail.com>) escribió:

> Many thanks Andrew. I´ll investigate this option and tell you the result.
>
> El mié., 26 ago. 2020 a las 14:14, Andrew Bell (<andrew.bell.ia at gmail.com>)
> escribió:
>
>> I suspect you are writing the output file with a different point data
>> format (dataformat_id option) than the input file. PDAL uses PDRF 3 by
>> default, but you can set the value as you wish or forward the value from
>> the input. Please see the documentation:
>> https://pdal.io/stages/writers.las.html
>>
>> On Wed, Aug 26, 2020 at 3:57 AM Cesar Ortega <
>> cesar.ortega.chies at gmail.com> wrote:
>>
>>> Dear sirs.
>>> The last days, we made a little pipeline to change some metadata from
>>> one 17gb .las file.
>>> It worked correctly, but the file now occupies 12 gb. It seems the file
>>> has all the points, returns, intensity.., but weighs much less.
>>>
>>> We tried it with more files (2gb,30gg, 5gb...) and always weights much
>>> less after the pipeline.
>>>
>>> The pipeline is very simple, only modifies the day of year and saves the
>>> result with another name.
>>>
>>> Could someone tell us why it happens, and if it has any effect on the
>>> quality of the file result?
>>>
>>> Many thanks
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>>
>>
>> --
>> Andrew Bell
>> andrew.bell.ia at gmail.com
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200827/a90869c9/attachment.html>

From andrew.bell.ia at gmail.com  Fri Aug 28 05:47:41 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Fri, 28 Aug 2020 08:47:41 -0400
Subject: [pdal] PDAL 2.2.0RC1
Message-ID: <CACJ51z2hg4dtfX8rB6iKwrM0eRRMc+1vT_Y11EMMbDi_0YVAdQ@mail.gmail.com>

All,

A release candidate for PDAL 2.2 has been made available.  You can view the
release notes or download the source code here:
https://github.com/PDAL/PDAL/releases/tag/2.2.0rc1

In addition to new filters and many bug fixes, this version features a
"where" option for filters to allow points to bypass a filter stage. The
assign filter also has added simple math functionality.

For API users, note that the default storage of data in PDAL 2.2 has
changed to column-major from row-major order (data comprising a single
point is no longer stored contiguously). You can access the behavior in
PDAL 2.1 by using the class RowPointTable instead of ColumnPointTable,
which is the default data storage structure in PDAL 2.2.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200828/764eb2e6/attachment.html>

From Peder.Axensten at slu.se  Mon Aug 31 06:05:12 2020
From: Peder.Axensten at slu.se (Peder Axensten)
Date: Mon, 31 Aug 2020 13:05:12 +0000
Subject: [pdal] Metrics calculation
Message-ID: <9B4DCEC2-B8F5-4169-A2C6-555E363E2793@slu.se>

My group produces rasters of forest variables for all of Sweden (height, volume, biomass, etc.). We use ALS data that we have our own tools to filter and produce metrics (percentiles, stddev, etc.) from. These tools are implemented in C++ and use liblas to read and write laz-files, but as there is no active development on liblas anymore we would like to move our tools to use PDAL instead. It would probably be easier to use pdal just for reading/writing laz files, but we see obvious advantages with going all the way and implement the tools as full members of the pdal ecosystem.

Being new to PDAL I would very much appreciate any input on how to make this transition.

I’ve started with the tool to produce raster metrics. I copied the files for writers.gdal and renamed [what I think is] relevant parts.
Q1: Is this a good way to start, do you think? Or should I use something else to start from?

It compiles and when I execute “pdal —drivers” there is a writers.gdal.metrics item in the list. However, when I execute “pdal —options writers.gdal.metrics” I only get "Unable to create stage writers.gdal.metrics”. Before I start to change the actual code into general metrics calculation I want a way to run it and getting —options to work seemed the obvious start. Once that works the idea is to construct a simple pipe through my writer so I can start to incrementally change the code.
Q2: With —options, am I missing something that is obvious to you? Why the "Unable to create stage writers.gdal.metrics”?
Q3: Do you think this is a good way to do the transition to pdal or would you suggest a better way?

We have one tool to produce raster metrics from laz files and another to calculate plot metrics from a set of laz files and a csv file containing coordinates and radius of plots. They are coded in C++17 and structured as a library where the actual tools are rather short files that handles command line options and then make a call into the library. You specify what metrics you need in the command line options (see the —help output below). The library structure makes it pretty straightforward to add yet more metrics. We use a tool implemented in R for the actual modelling/prediction. These tools are executed from a make script to process tens of thousands of files in a paralleled manner.
Q4: Would there be a general interest for such drivers (writers.gdal.metrics and writers.text.metrics)? We’d be happy to eventually make the code open source.

Q5: Any other advice? :-)

Best regards,

Peder Axensten
Research engineer

Remote Sensing
Department of Forest Resource Management
Swedish University of Agricultural Sciences
SE-901 83 Umeå
Visiting address: Skogsmarksgränd
Phone: +46 90 786 85 00
peder.axensten at slu.se, www.slu.se/srh

The Department of Forest Resource Management is environmentally certified in accordance with ISO 14001.


=======================================================================
The metric option from the —help:

--metrics              You may choose one or more from the metrics and metric sets:
                        --- Sets ---
                        basic-linear    (percent_ge150cm, std_dev, p30, p80, p95)
                        photogrammetry  (percent_ge150cm, std_dev, p30, p95, p0, rootmean3)
                        --- Metrics ---
                        coeff_of_var    the standard deviation divided by the mean
                        count_ge#cm     number of values >= # cm, where # is any integer
                        kurtosis        the kurtosis
                        L1-moment       L1-moment
                        L2-moment       L2-moment
                        L3-moment       L3-moment
                        L4-moment       L4-moment
                        mean            The mean of all values.
                        mean2           ( sum of values^2 )/( number of values )
                        mean3           ( sum of values^3 )/( number of values )
                        p#             percentile:  the value below which #% of all values are (Linear interpolation), where # is any integer in [0, 100]
                        percent_ge#cm   percentage of values >= # cm, where # is any integer
                        prop_ge#cm      proportion of values >= # cm, where # is any integer
                        rootmean2       ( ( sum of values^2 )/( number of values ) )^(1/2)
                        rootmean3       ( ( sum of values^3 )/( number of values ) )^(1/3)
                        skewness        the skewness
                        std_dev         the standard deviation
                         [give one or more of above specifiers]

---
När du skickar e-post till SLU så innebär detta att SLU behandlar dina personuppgifter. För att läsa mer om hur detta går till, klicka här <https://www.slu.se/om-slu/kontakta-slu/personuppgifter/>
E-mailing SLU will result in SLU processing your personal data. For more information on how this is done, click here <https://www.slu.se/en/about-slu/contact-slu/personal-data/>

From andrew.bell.ia at gmail.com  Mon Aug 31 11:40:07 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 31 Aug 2020 14:40:07 -0400
Subject: [pdal] Metrics calculation
In-Reply-To: <9B4DCEC2-B8F5-4169-A2C6-555E363E2793@slu.se>
References: <9B4DCEC2-B8F5-4169-A2C6-555E363E2793@slu.se>
Message-ID: <CACJ51z1nE6678_XmATBacPuitfnJMYG7mVUe-J7+wExd8E8UzQ@mail.gmail.com>

On Mon, Aug 31, 2020 at 9:07 AM Peder Axensten <Peder.Axensten at slu.se>
wrote:

> My group produces rasters of forest variables for all of Sweden (height,
> volume, biomass, etc.). We use ALS data that we have our own tools to
> filter and produce metrics (percentiles, stddev, etc.) from. These tools
> are implemented in C++ and use liblas to read and write laz-files, but as
> there is no active development on liblas anymore we would like to move our
> tools to use PDAL instead. It would probably be easier to use pdal just for
> reading/writing laz files, but we see obvious advantages with going all the
> way and implement the tools as full members of the pdal ecosystem.
>
> Being new to PDAL I would very much appreciate any input on how to make
> this transition.
>
> I’ve started with the tool to produce raster metrics. I copied the files
> for writers.gdal and renamed [what I think is] relevant parts.
> Q1: Is this a good way to start, do you think? Or should I use something
> else to start from?
>

Does writers.gdal not already do what you want? What capability is missing,
exactly? Specific statistics?

It compiles and when I execute “pdal —drivers” there is a
> writers.gdal.metrics item in the list. However, when I execute “pdal
> —options writers.gdal.metrics” I only get "Unable to create stage
> writers.gdal.metrics”. Before I start to change the actual code into
> general metrics calculation I want a way to run it and getting —options to
> work seemed the obvious start. Once that works the idea is to construct a
> simple pipe through my writer so I can start to incrementally change the
> code.
> Q2: With —options, am I missing something that is obvious to you? Why the
> "Unable to create stage writers.gdal.metrics”?
>

A stage name can't contain a "." It must start with a letter or number.
Subsequent characters can be a letter, number or underscore.  If you're
building a plugin, check the FAQ to make sure it follows the filename rules
and location.

Q3: Do you think this is a good way to do the transition to pdal or would
> you suggest a better way?
>

I don't understand what you're trying to do, exactly, so I can't answer.

We have one tool to produce raster metrics from laz files and another to
> calculate plot metrics from a set of laz files and a csv file containing
> coordinates and radius of plots. They are coded in C++17 and structured as
> a library where the actual tools are rather short files that handles
> command line options and then make a call into the library. You specify
> what metrics you need in the command line options (see the —help output
> below). The library structure makes it pretty straightforward to add yet
> more metrics. We use a tool implemented in R for the actual
> modelling/prediction. These tools are executed from a make script to
> process tens of thousands of files in a paralleled manner.
>

PDAL targets C++11. If you're making code for the public, it must build
under C++11 for now.


> Q4: Would there be a general interest for such drivers
> (writers.gdal.metrics and writers.text.metrics)? We’d be happy to
> eventually make the code open source.
>

Great.

Note that the next release will contain more general raster support - you
will be able to create a raster internally and write it out with a raster
writer. This separates the calculation of the raster from the output. That
said, there are limitations WRT output bands, and if writers.gdal does what
you want, you can continue to use that.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200831/00f3d7f4/attachment.html>

