From Scott.Rea at ontario.ca  Fri Apr  6 04:38:36 2018
From: Scott.Rea at ontario.ca (Rea, Scott (MTO))
Date: Fri, 6 Apr 2018 11:38:36 +0000
Subject: [pdal] PDAL voxelcenternearestneighbor
Message-ID: <368EC7381EEE78478AF28AAF2F4819A72D99C75A@CTSPIGDCAPMXS46.cihs.ad.gov.on.ca>

Hello Mailing List,

The filter "voxelcenternearestneighbor" accepts a parameter "cell" which controls the voxel cell size. I cannot seem to get the software to accept a value lower than 1.0. ie. Any value lower than 1.0 outputs 1.0.
Can you tell me if this is intentional?

Regards,
Scott R

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180406/576c6b99/attachment.html>

From brad.chambers at gmail.com  Fri Apr  6 06:58:40 2018
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Fri, 06 Apr 2018 13:58:40 +0000
Subject: [pdal] PDAL voxelcenternearestneighbor
In-Reply-To: <368EC7381EEE78478AF28AAF2F4819A72D99C75A@CTSPIGDCAPMXS46.cihs.ad.gov.on.ca>
References: <368EC7381EEE78478AF28AAF2F4819A72D99C75A@CTSPIGDCAPMXS46.cihs.ad.gov.on.ca>
Message-ID: <CAJyqqPz_1mfA_ufz2HL5QLh1gia2p4byL65sG5J73w57MB2Mfg@mail.gmail.com>

Definitely an error computing voxel indices. I'll push a fix today. Thanks
for reporting!

On Fri, Apr 6, 2018 at 7:38 AM Rea, Scott (MTO) <Scott.Rea at ontario.ca>
wrote:

> Hello Mailing List,
>
>
>
> The filter “voxelcenternearestneighbor” accepts a parameter “cell” which
> controls the voxel cell size. I cannot seem to get the software to accept a
> value lower than 1.0. ie. Any value lower than 1.0 outputs 1.0.
>
> Can you tell me if this is intentional?
>
>
>
> Regards,
>
> Scott R
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180406/3e01d701/attachment.html>

From Scott.Rea at ontario.ca  Fri Apr  6 07:37:50 2018
From: Scott.Rea at ontario.ca (Rea, Scott (MTO))
Date: Fri, 6 Apr 2018 14:37:50 +0000
Subject: [pdal] PDAL voxelcenternearestneighbor
In-Reply-To: <CAJyqqPz_1mfA_ufz2HL5QLh1gia2p4byL65sG5J73w57MB2Mfg@mail.gmail.com>
References: <368EC7381EEE78478AF28AAF2F4819A72D99C75A@CTSPIGDCAPMXS46.cihs.ad.gov.on.ca>
 <CAJyqqPz_1mfA_ufz2HL5QLh1gia2p4byL65sG5J73w57MB2Mfg@mail.gmail.com>
Message-ID: <368EC7381EEE78478AF28AAF2F4819A72D99C7CD@CTSPIGDCAPMXS46.cihs.ad.gov.on.ca>

Thanks much! I believe the other filter than calc’s nearest to centroid is also affected.

From: Bradley Chambers [mailto:brad.chambers at gmail.com]
Sent: April-06-18 9:59 AM
To: Rea, Scott (MTO)
Cc: pdal at lists.osgeo.org
Subject: Re: [pdal] PDAL voxelcenternearestneighbor

Definitely an error computing voxel indices. I'll push a fix today. Thanks for reporting!

On Fri, Apr 6, 2018 at 7:38 AM Rea, Scott (MTO) <Scott.Rea at ontario.ca<mailto:Scott.Rea at ontario.ca>> wrote:
Hello Mailing List,

The filter “voxelcenternearestneighbor” accepts a parameter “cell” which controls the voxel cell size. I cannot seem to get the software to accept a value lower than 1.0. ie. Any value lower than 1.0 outputs 1.0.
Can you tell me if this is intentional?

Regards,
Scott R

_______________________________________________
pdal mailing list
pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180406/e8d3835e/attachment.html>

From brad.chambers at gmail.com  Fri Apr  6 07:42:59 2018
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Fri, 06 Apr 2018 14:42:59 +0000
Subject: [pdal] PDAL voxelcenternearestneighbor
In-Reply-To: <368EC7381EEE78478AF28AAF2F4819A72D99C7CD@CTSPIGDCAPMXS46.cihs.ad.gov.on.ca>
References: <368EC7381EEE78478AF28AAF2F4819A72D99C75A@CTSPIGDCAPMXS46.cihs.ad.gov.on.ca>
 <CAJyqqPz_1mfA_ufz2HL5QLh1gia2p4byL65sG5J73w57MB2Mfg@mail.gmail.com>
 <368EC7381EEE78478AF28AAF2F4819A72D99C7CD@CTSPIGDCAPMXS46.cihs.ad.gov.on.ca>
Message-ID: <CAJyqqPz+cY+3LHbsj9fTwCDJ7DWaEo7cC1dYLyi8LC7TU15Y-A@mail.gmail.com>

Yes, it is. They will both be fixed.

On Fri, Apr 6, 2018 at 10:37 AM Rea, Scott (MTO) <Scott.Rea at ontario.ca>
wrote:

> Thanks much! I believe the other filter than calc’s nearest to *centroid*
> is also affected.
>
>
>
> *From:* Bradley Chambers [mailto:brad.chambers at gmail.com]
> *Sent:* April-06-18 9:59 AM
> *To:* Rea, Scott (MTO)
> *Cc:* pdal at lists.osgeo.org
> *Subject:* Re: [pdal] PDAL voxelcenternearestneighbor
>
>
>
> Definitely an error computing voxel indices. I'll push a fix today. Thanks
> for reporting!
>
>
>
> On Fri, Apr 6, 2018 at 7:38 AM Rea, Scott (MTO) <Scott.Rea at ontario.ca>
> wrote:
>
> Hello Mailing List,
>
>
>
> The filter “voxelcenternearestneighbor” accepts a parameter “cell” which
> controls the voxel cell size. I cannot seem to get the software to accept a
> value lower than 1.0. ie. Any value lower than 1.0 outputs 1.0.
>
> Can you tell me if this is intentional?
>
>
>
> Regards,
>
> Scott R
>
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180406/c41315e9/attachment.html>

From howard at hobu.co  Fri Apr  6 12:55:32 2018
From: howard at hobu.co (Howard Butler)
Date: Fri, 6 Apr 2018 14:55:32 -0500
Subject: [pdal] PDAL 1.7.1 Released
Message-ID: <1E67101A-AFB0-45C4-94D2-C8FD5F6E4839@hobu.co>

The PDAL team is pleased to announce the release of PDAL 1.7.1. We had made a 1.7.0 tarball yesterday, but some issues were quickly found and resolved, which necessitated another number.

Full details about the release can be found at https://github.com/PDAL/PDAL/releases/tag/1.7.1 <https://github.com/PDAL/PDAL/releases/tag/1.7.1> Download the source code at https://www.pdal.io/download.html <https://www.pdal.io/download.html> OSGeo4W64 build will be available shortly.

Howard

Release Highlights
---------------------------------

* Improvements to PDAL's drivers means applications should start up significantly faster
* Operations run in streaming mode when possible (info, translate, pipeline)
* Documentation refactored to be easier to find things. See Brad's article about many of the PDAL team at the OSGeo Bonn Sprint on Medium at https://medium.com/@chambbj/pdal-at-the-osgeo-code-sprint-cf0a56eee59d <https://medium.com/@chambbj/pdal-at-the-osgeo-code-sprint-cf0a56eee59d>
* LAS 1.0-1.3 can now support extra bytes if forced
* The Python and Java extensions are now in their own repositories.
* readers.numpy can be used to read Numpy .npy save files as point clouds

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180406/2047d4f1/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 528 bytes
Desc: Message signed with OpenPGP
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180406/2047d4f1/attachment.sig>

From howard at hobu.co  Sun Apr  8 08:09:42 2018
From: howard at hobu.co (Howard Butler)
Date: Sun, 8 Apr 2018 10:09:42 -0500
Subject: [pdal] PDAL Python 2.0.0 Released
In-Reply-To: <1E67101A-AFB0-45C4-94D2-C8FD5F6E4839@hobu.co>
References: <1E67101A-AFB0-45C4-94D2-C8FD5F6E4839@hobu.co>
Message-ID: <985A3916-7EB2-463B-B254-603C30517953@hobu.co>

As described in the PDAL 1.7.0 release announcement, the PDAL Python extension has been broken out into its own github repository, and it is now on its own release schedule. Improvements have been made to allow it to work on Windows with the OSGeo4W64 PDAL builds as well.

I have just issued a 2.0.0 release which will catch up to all PDAL 1.7 changes.

See https://pypi.python.org/pypi/PDAL <https://pypi.python.org/pypi/PDAL> for more details.

Howard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180408/4bb95907/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 528 bytes
Desc: Message signed with OpenPGP
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180408/4bb95907/attachment.sig>

From Scott.Rea at ontario.ca  Mon Apr  9 10:15:24 2018
From: Scott.Rea at ontario.ca (Rea, Scott (MTO))
Date: Mon, 9 Apr 2018 17:15:24 +0000
Subject: [pdal] Issue 1905 Follow-up
Message-ID: <368EC7381EEE78478AF28AAF2F4819A72D99EB29@CTSPIGDCAPMXS46.cihs.ad.gov.on.ca>

https://github.com/PDAL/PDAL/issues/1905

Tested out, still experiencing difficulties, but this may be an different issue:

Test dataset of lidar scan data resulted in the correct cell size in the x direction, but not the y direction. Y was 0.5 when set to 0.2.
The y axis coordinates are UTM northings, which are in the order of 5,000,000. When I translate the y axis "south" by this amount (to less than 1,000,000) the function works correctly.
Is there somewhere in this program that these values are stored as singles?

Scott R

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180409/7ca11aa9/attachment.html>

From brad.chambers at gmail.com  Mon Apr  9 11:41:55 2018
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Mon, 09 Apr 2018 18:41:55 +0000
Subject: [pdal] Issue 1905 Follow-up
In-Reply-To: <368EC7381EEE78478AF28AAF2F4819A72D99EB29@CTSPIGDCAPMXS46.cihs.ad.gov.on.ca>
References: <368EC7381EEE78478AF28AAF2F4819A72D99EB29@CTSPIGDCAPMXS46.cihs.ad.gov.on.ca>
Message-ID: <CAJyqqPwuMb3zMabfWj=zg1s9XTZ3jXWxDBBm2L_Jupe_PzxsrQ@mail.gmail.com>

I'm unable to recreate this one. If you have sample data and a command
invocation that demonstrates the issue, it would be helpful.

How are you evaluating the resulting voxel size?

On Mon, Apr 9, 2018 at 1:15 PM Rea, Scott (MTO) <Scott.Rea at ontario.ca>
wrote:

> https://github.com/PDAL/PDAL/issues/1905
>
>
>
> Tested out, still experiencing difficulties, but this may be an different
> issue:
>
>
>
> Test dataset of lidar scan data resulted in the correct cell size in the x
> direction, but not the y direction. Y was 0.5 when set to 0.2.
>
> The y axis coordinates are UTM northings, which are in the order of
> 5,000,000. When I translate the y axis “south” by this amount (to less than
> 1,000,000) the function works correctly.
>
> Is there somewhere in this program that these values are stored as
> singles?
>
>
>
> Scott R
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180409/029c0da0/attachment.html>

From laasunde at hotmail.com  Thu Apr 12 03:14:47 2018
From: laasunde at hotmail.com (Lars)
Date: Thu, 12 Apr 2018 10:14:47 +0000
Subject: [pdal] pgpointcloud write incorrect wkb size
Message-ID: <HE1PR03MB13382D4407344753B69ABBF8CABC0@HE1PR03MB1338.eurprd03.prod.outlook.com>

Hello

Using PDAL 1.5, PostgreSQL 9.5 and PostGIS bundle 2.3 on Windows 7.


We have followed the instructions found at https://github.com/pgpointcloud/pointcloud
(Created database, added extensions, created pcpoint and pcpatch tables).


We have inserted a schema into pointcloud_formats (samme as https://github.com/pgpointcloud/pointcloud but without Intensity).


We have successfully insert data into pcpoint table from sql shell.
INSERT INTO pcpoint(pa) VALUES(PC_MakePoint(1, ARRAY[1,2,3]));
This results in a data blob that is 17 bytes.


However using PDAL pipeline to insert data into table causes the following error;
pc_patch_uncompressed_from_wkb: wkb size and expected size does not match.


The sql log file shows that PDAL execute the following sql statement;
INSERT INTO pcpoint(pa) VALUES('0103000000........0840');
This data blob is 37 bytes and is very different to above test (17 bytes).


The pipeline script looks like this;
{
  "pipeline": [
    {
      "type": "readers.text",
      "filename": "data.txt",
      "separator": ";"
    },
    {
      "type":"filters.chipper",
      "capacity":100
    },
    {
      "type": "writers.pgpointcloud",
      "connection": "host='localhost' dbname='aaa' port='5433' user='aaa' password='aaa'",
      "table": "pcpoint",
      "pcid":"1",
      "compression": "none"
    }
  ]
}
The data.txt file looks like this;
X;Y;Z
1.00;2.00;3.00


What are we doing wrong? How can I can make PDAL pipeline produce the correct data blob that matches the schema used in db?


Thanks.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180412/b5ba5dad/attachment.html>

From andrew.bell.ia at gmail.com  Thu Apr 12 05:58:27 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 12 Apr 2018 08:58:27 -0400
Subject: [pdal] pgpointcloud write incorrect wkb size
In-Reply-To: <HE1PR03MB13382D4407344753B69ABBF8CABC0@HE1PR03MB1338.eurprd03.prod.outlook.com>
References: <HE1PR03MB13382D4407344753B69ABBF8CABC0@HE1PR03MB1338.eurprd03.prod.outlook.com>
Message-ID: <CACJ51z3y2oyDNdym6K8FWxLM-3uHwEtYiP0jt=Tsm5bQtNWG3w@mail.gmail.com>

I'd have to do some more work to figure out the discrepancy, but if your
goal is to use PDAL to read/write to postgres, you don't need to do all the
setup that you've done.  PDAL will handle this for you.  Simply point PDAL
at your (empty) database and let it do the setup and writing for you.

Normally PDAL will create a schema that writes X,Y and Z as
double-precision values.  You can have it write 32-bit scaled integers by
providing scaling factors (see
https://www.pdal.io/stages/writers.pgpointcloud.html for more info).  I
think the issue is that the schema PDAL wants to use isn't the one you've
created.

If I have time I'll try to reproduce your steps so that I can give a more
precise answer.

On Thu, Apr 12, 2018 at 6:14 AM, Lars <laasunde at hotmail.com> wrote:

> Hello
>
> Using PDAL 1.5, PostgreSQL 9.5 and PostGIS bundle 2.3 on Windows 7.
>
>
> We have followed the instructions found at https://github.com/
> pgpointcloud/pointcloud
> (Created database, added extensions, created pcpoint and pcpatch tables).
>
>
> We have inserted a schema into pointcloud_formats (samme as
> https://github.com/pgpointcloud/pointcloud but without Intensity).
>
>
> We have successfully insert data into pcpoint table from sql shell.
> INSERT INTO pcpoint(pa) VALUES(PC_MakePoint(1, ARRAY[1,2,3]));
> This results in a data blob that is 17 bytes.
>
>
> However using PDAL pipeline to insert data into table causes the following
> error;
> pc_patch_uncompressed_from_wkb: wkb size and expected size does not match.
>
>
> The sql log file shows that PDAL execute the following sql statement;
> INSERT INTO pcpoint(pa) VALUES('0103000000........0840');
> This data blob is 37 bytes and is very different to above test (17 bytes).
>
>
> The pipeline script looks like this;
> {
>   "pipeline": [
>     {
>       "type": "readers.text",
>       "filename": "data.txt",
>       "separator": ";"
>     },
>     {
>       "type":"filters.chipper",
>       "capacity":100
>     },
>     {
>       "type": "writers.pgpointcloud",
>       "connection": "host='localhost' dbname='aaa' port='5433' user='aaa'
> password='aaa'",
>       "table": "pcpoint",
>       "pcid":"1",
>       "compression": "none"
>     }
>   ]
> }
> The data.txt file looks like this;
> X;Y;Z
> 1.00;2.00;3.00
>
>
> What are we doing wrong? How can I can make PDAL pipeline produce the
> correct data blob that matches the schema used in db?
>
>
> Thanks.
>
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180412/f1711c09/attachment.html>

From howard at hobu.co  Thu Apr 12 06:00:59 2018
From: howard at hobu.co (Howard Butler)
Date: Thu, 12 Apr 2018 08:00:59 -0500
Subject: [pdal] pgpointcloud write incorrect wkb size
In-Reply-To: <CACJ51z3y2oyDNdym6K8FWxLM-3uHwEtYiP0jt=Tsm5bQtNWG3w@mail.gmail.com>
References: <HE1PR03MB13382D4407344753B69ABBF8CABC0@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <CACJ51z3y2oyDNdym6K8FWxLM-3uHwEtYiP0jt=Tsm5bQtNWG3w@mail.gmail.com>
Message-ID: <65C01FB1-7637-4551-8657-DB8BDB420666@hobu.co>

Your report also mentions PDAL 1.5. Can you try 1.7.1? It is packaged with OSGeo4W and available on that platform.

Howard

> On Apr 12, 2018, at 7:58 AM, Andrew Bell <andrew.bell.ia at gmail.com> wrote:
> 
> I'd have to do some more work to figure out the discrepancy, but if your goal is to use PDAL to read/write to postgres, you don't need to do all the setup that you've done.  PDAL will handle this for you.  Simply point PDAL at your (empty) database and let it do the setup and writing for you.
> 
> Normally PDAL will create a schema that writes X,Y and Z as double-precision values.  You can have it write 32-bit scaled integers by providing scaling factors (see https://www.pdal.io/stages/writers.pgpointcloud.html <https://www.pdal.io/stages/writers.pgpointcloud.html> for more info).  I think the issue is that the schema PDAL wants to use isn't the one you've created.
> 
> If I have time I'll try to reproduce your steps so that I can give a more precise answer.
> 
> On Thu, Apr 12, 2018 at 6:14 AM, Lars <laasunde at hotmail.com <mailto:laasunde at hotmail.com>> wrote:
> Hello
> Using PDAL 1.5, PostgreSQL 9.5 and PostGIS bundle 2.3 on Windows 7.
> 
> 
> We have followed the instructions found at https://github.com/pgpointcloud/pointcloud <https://github.com/pgpointcloud/pointcloud>
> (Created database, added extensions, created pcpoint and pcpatch tables).
> 
> 
> We have inserted a schema into pointcloud_formats (samme as https://github.com/pgpointcloud/pointcloud <https://github.com/pgpointcloud/pointcloud> but without Intensity).
> 
> 
> We have successfully insert data into pcpoint table from sql shell.
> INSERT INTO pcpoint(pa) VALUES(PC_MakePoint(1, ARRAY[1,2,3]));
> This results in a data blob that is 17 bytes.
> 
> 
> However using PDAL pipeline to insert data into table causes the following error;
> pc_patch_uncompressed_from_wkb: wkb size and expected size does not match.
> 
> 
> The sql log file shows that PDAL execute the following sql statement;
> INSERT INTO pcpoint(pa) VALUES('0103000000........0840');
> This data blob is 37 bytes and is very different to above test (17 bytes).
> 
> 
> The pipeline script looks like this;
> {
>   "pipeline": [
>     {
>       "type": "readers.text",
>       "filename": "data.txt",
>       "separator": ";"
>     },
>     {
>       "type":"filters.chipper",
>       "capacity":100
>     },
>     {
>       "type": "writers.pgpointcloud",
>       "connection": "host='localhost' dbname='aaa' port='5433' user='aaa' password='aaa'",
>       "table": "pcpoint",
>       "pcid":"1",
>       "compression": "none"
>     }
>   ]
> }
> The data.txt file looks like this;
> X;Y;Z
> 1.00;2.00;3.00
> 
> 
> What are we doing wrong? How can I can make PDAL pipeline produce the correct data blob that matches the schema used in db?
> 
> 
> 
> Thanks.
> 
> 
> 
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org <mailto:pdal at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/pdal <https://lists.osgeo.org/mailman/listinfo/pdal>
> 
> 
> 
> --
> Andrew Bell
> andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>_______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180412/c7464ff0/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 528 bytes
Desc: Message signed with OpenPGP
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180412/c7464ff0/attachment-0001.sig>

From adam.d.steer at gmail.com  Thu Apr 12 06:15:35 2018
From: adam.d.steer at gmail.com (adam steer)
Date: Thu, 12 Apr 2018 13:15:35 +0000
Subject: [pdal] pgpointcloud write incorrect wkb size
In-Reply-To: <CACJ51z3y2oyDNdym6K8FWxLM-3uHwEtYiP0jt=Tsm5bQtNWG3w@mail.gmail.com>
References: <HE1PR03MB13382D4407344753B69ABBF8CABC0@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <CACJ51z3y2oyDNdym6K8FWxLM-3uHwEtYiP0jt=Tsm5bQtNWG3w@mail.gmail.com>
Message-ID: <CAFORoyhrzPok2f4gD-+6K9vAA=3yawWBpbb4KDsT8-e7zgJwJw@mail.gmail.com>

Hi Andrew, Lars

I would greatly appreciate any insight also. Some time ago I had the same
issue and used exactly Andrew's advice as a workaround. I never had time to
understand *why* I couldn't use a predefined schema, or do more
experiments.

Thanks,

Adam

On 12 Apr. 2018 22:58, "Andrew Bell" <andrew.bell.ia at gmail.com> wrote:

I'd have to do some more work to figure out the discrepancy, but if your
goal is to use PDAL to read/write to postgres, you don't need to do all the
setup that you've done.  PDAL will handle this for you.  Simply point PDAL
at your (empty) database and let it do the setup and writing for you.

Normally PDAL will create a schema that writes X,Y and Z as
double-precision values.  You can have it write 32-bit scaled integers by
providing scaling factors (see
https://www.pdal.io/stages/writers.pgpointcloud.html for more info).  I
think the issue is that the schema PDAL wants to use isn't the one you've
created.

If I have time I'll try to reproduce your steps so that I can give a more
precise answer.

On Thu, Apr 12, 2018 at 6:14 AM, Lars <laasunde at hotmail.com> wrote:

> Hello
>
> Using PDAL 1.5, PostgreSQL 9.5 and PostGIS bundle 2.3 on Windows 7.
>
>
> We have followed the instructions found at
> https://github.com/pgpointcloud/pointcloud
> (Created database, added extensions, created pcpoint and pcpatch tables).
>
>
> We have inserted a schema into pointcloud_formats (samme as
> https://github.com/pgpointcloud/pointcloud but without Intensity).
>
>
> We have successfully insert data into pcpoint table from sql shell.
> INSERT INTO pcpoint(pa) VALUES(PC_MakePoint(1, ARRAY[1,2,3]));
> This results in a data blob that is 17 bytes.
>
>
> However using PDAL pipeline to insert data into table causes the following
> error;
> pc_patch_uncompressed_from_wkb: wkb size and expected size does not match.
>
>
> The sql log file shows that PDAL execute the following sql statement;
> INSERT INTO pcpoint(pa) VALUES('0103000000........0840');
> This data blob is 37 bytes and is very different to above test (17 bytes).
>
>
> The pipeline script looks like this;
> {
>   "pipeline": [
>     {
>       "type": "readers.text",
>       "filename": "data.txt",
>       "separator": ";"
>     },
>     {
>       "type":"filters.chipper",
>       "capacity":100
>     },
>     {
>       "type": "writers.pgpointcloud",
>       "connection": "host='localhost' dbname='aaa' port='5433' user='aaa'
> password='aaa'",
>       "table": "pcpoint",
>       "pcid":"1",
>       "compression": "none"
>     }
>   ]
> }
> The data.txt file looks like this;
> X;Y;Z
> 1.00;2.00;3.00
>
>
> What are we doing wrong? How can I can make PDAL pipeline produce the
> correct data blob that matches the schema used in db?
>
>
> Thanks.
>
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180412/8c22c51f/attachment.html>

From erobeck at gmail.com  Thu Apr 12 21:05:04 2018
From: erobeck at gmail.com (Eric Robeck)
Date: Thu, 12 Apr 2018 23:05:04 -0500
Subject: [pdal] Ferry filter not working in LAZ file
Message-ID: <CAKa5cDJFgYZ8HcgDaCBXtoK=hwfViNOyG7fFRhCJy1PAsnZxJA@mail.gmail.com>

Hello,

I have written a PDAL pipeline to perform the following steps:

1.) Ferry the existing Classification to the UserData field for storage
(this is more efficient than creating a new field)
2.) Use the ferry filter to create a new DTM field
3.) Use the colorize filter to extract the elevation value from a
single-band TIF (a DTM made from the original ground points)
4.) Run SMRF to reclassify the ground points

I cannot get the ferry filter to work at all. It won't transfer values
between existing columns or create new columns, despite using the same
syntax described on PDAL.io. I have tried various ways to get around this
issue. Changing the order of filters.ferry in the pipeline didn't make a
difference. I saw that the online examples worked on uncompressed LAS
files, so I converted the input files from LAZ to LAS but there was no
change. The pipeline completes without errors, but info --stats and info
--schema show that the ferried fields were not created or updated.

The colorize filter works fine, as long as I use an existing field. For
example, "dimensions":"Red:1:1000.0" works by mapping the elevation values
to the Red field and multiplying by 1000 to preserve millimeter precision
in an integer field. However, "dimensions":"DTM:1:1000.0" does not, because
the ferry filter doesn't create the DTM field. The SMRF filter also works
well, but without the ability to ferry values I lose the original
classifications.

I am using PDAL 1.6.0 on Windows within OSGeo4W. It was installed this
month. My pipeline is copied below.

Any help would be greatly appreciated.

Thanks,
Eric


{
  "pipeline":
  [
    "C:/data/forest_park/filtered/forest_park_orig.laz",
    {
      "type":"filters.ferry",
      "dimensions":"Classification=>UserData, =>DTM"
    },
    {
      "type":"filters.colorization",
      "dimensions":"DTM:1:1000.0",
      "raster":"C:/data/forest_park/dtm/w001001.adf"
    },
    {
      "type":"filters.smrf",
      "cell":1.00,
      "cut":0,
      "scalar":1.25,
      "slope":0.00,
      "threshold":0.50,
      "window":10
    },
    {
      "type":"writers.las",
      "tag":"writerslas",
      "compression":"true",
      "scale_x":"0.01",
      "scale_y":"0.01",
      "scale_z":"0.01",
      "offset_x":"auto",
      "offset_y":"auto",
      "offset_z":"auto",
      "filename":"C:/data/forest_park/forest_park_orig_dtm.laz"
    }
  ]
}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180412/cf1d521f/attachment.html>

From andrew.bell.ia at gmail.com  Fri Apr 13 04:17:11 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Fri, 13 Apr 2018 11:17:11 +0000
Subject: [pdal]  Ferry filter not working in LAZ file
In-Reply-To: <CACJ51z1WhuX=gdxCFP754c02r_7_HuCiK7MRQHzZYvvPhz0LtA@mail.gmail.com>
References: <CAKa5cDJFgYZ8HcgDaCBXtoK=hwfViNOyG7fFRhCJy1PAsnZxJA@mail.gmail.com>
 <CACJ51z1WhuX=gdxCFP754c02r_7_HuCiK7MRQHzZYvvPhz0LtA@mail.gmail.com>
Message-ID: <CACJ51z0F--XgZ6xWfNMmvPF9rozVUXO1ajG4zDEcSCuG-uU7rg@mail.gmail.com>

Hi Eric,

How do you know that the DTM field is not getting created? You'll have to
change the writer to put this field in LAS extra bytes if you want it to be
part of your output. See the option 'extra_dims' at
https://www.pdal.io/stages/writers.las.html for more info.

On Fri, Apr 13, 2018, 12:05 AM Eric Robeck <erobeck at gmail.com> wrote:

> Hello,
>
> I have written a PDAL pipeline to perform the following steps:
>
> 1.) Ferry the existing Classification to the UserData field for storage
> (this is more efficient than creating a new field)
> 2.) Use the ferry filter to create a new DTM field
> 3.) Use the colorize filter to extract the elevation value from a
> single-band TIF (a DTM made from the original ground points)
> 4.) Run SMRF to reclassify the ground points
>
> I cannot get the ferry filter to work at all. It won't transfer values
> between existing columns or create new columns, despite using the same
> syntax described on PDAL.io. I have tried various ways to get around this
> issue. Changing the order of filters.ferry in the pipeline didn't make a
> difference. I saw that the online examples worked on uncompressed LAS
> files, so I converted the input files from LAZ to LAS but there was no
> change. The pipeline completes without errors, but info --stats and info
> --schema show that the ferried fields were not created or updated.
>
> The colorize filter works fine, as long as I use an existing field. For
> example, "dimensions":"Red:1:1000.0" works by mapping the elevation values
> to the Red field and multiplying by 1000 to preserve millimeter precision
> in an integer field. However, "dimensions":"DTM:1:1000.0" does not, because
> the ferry filter doesn't create the DTM field. The SMRF filter also works
> well, but without the ability to ferry values I lose the original
> classifications.
>
> I am using PDAL 1.6.0 on Windows within OSGeo4W. It was installed this
> month. My pipeline is copied below.
>
> Any help would be greatly appreciated.
>
> Thanks,
> Eric
>
>
> {
>   "pipeline":
>   [
>     "C:/data/forest_park/filtered/forest_park_orig.laz",
>     {
>       "type":"filters.ferry",
>       "dimensions":"Classification=>UserData, =>DTM"
>     },
>     {
>       "type":"filters.colorization",
>       "dimensions":"DTM:1:1000.0",
>       "raster":"C:/data/forest_park/dtm/w001001.adf"
>     },
>     {
>       "type":"filters.smrf",
>       "cell":1.00,
>       "cut":0,
>       "scalar":1.25,
>       "slope":0.00,
>       "threshold":0.50,
>       "window":10
>     },
>     {
>       "type":"writers.las",
>       "tag":"writerslas",
>       "compression":"true",
>       "scale_x":"0.01",
>       "scale_y":"0.01",
>       "scale_z":"0.01",
>       "offset_x":"auto",
>       "offset_y":"auto",
>       "offset_z":"auto",
>       "filename":"C:/data/forest_park/forest_park_orig_dtm.laz"
>     }
>   ]
> }
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180413/c01bb866/attachment.html>

From howard at hobu.co  Fri Apr 13 08:12:47 2018
From: howard at hobu.co (Howard Butler)
Date: Fri, 13 Apr 2018 10:12:47 -0500
Subject: [pdal] Ferry filter not working in LAZ file
In-Reply-To: <CAKa5cDJFgYZ8HcgDaCBXtoK=hwfViNOyG7fFRhCJy1PAsnZxJA@mail.gmail.com>
References: <CAKa5cDJFgYZ8HcgDaCBXtoK=hwfViNOyG7fFRhCJy1PAsnZxJA@mail.gmail.com>
Message-ID: <B5FF867D-C8F1-4E4B-9E64-D46F7A47196C@hobu.co>


> On Apr 12, 2018, at 11:05 PM, Eric Robeck <erobeck at gmail.com> wrote:
> 
> Hello,
> 
> I have written a PDAL pipeline to perform the following steps:
> 
> 1.) Ferry the existing Classification to the UserData field for storage (this is more efficient than creating a new field)

Did you find this to be the case? Adding another dimension shouldn't really have an extra cost.

> 2.) Use the ferry filter to create a new DTM field

> 3.) Use the colorize filter to extract the elevation value from a single-band TIF (a DTM made from the original ground points)

Pete Gadomski made a post about this contorted scenario that's currently required. See http://www.gadom.ski/2018/02/28/pdal-hs.html <http://www.gadom.ski/2018/02/28/pdal-hs.html> for some details.

> 4.) Run SMRF to reclassify the ground points
> 
> I cannot get the ferry filter to work at all.

The syntax in your pipeline is 1.7's syntax, but you stated you're using 1.6.0. This might be the discrepancy.  We want to make this scenario better. filters.colorization is a bad name for what it does (it's really raster overlay). 1.7 fixed the precision issue [1] when doing the task.

> It won't transfer values between existing columns or create new columns, despite using the same syntax described on PDAL.io. I have tried various ways to get around this issue. Changing the order of filters.ferry in the pipeline didn't make a difference. I saw that the online examples worked on uncompressed LAS files, so I converted the input files from LAZ to LAS but there was no change. The pipeline completes without errors, but info --stats and info --schema show that the ferried fields were not created or updated.
> 
> The colorize filter works fine, as long as I use an existing field. For example, "dimensions":"Red:1:1000.0" works by mapping the elevation values to the Red field and multiplying by 1000 to preserve millimeter precision in an integer field. However, "dimensions":"DTM:1:1000.0" does not, because the ferry filter doesn't create the DTM field. The SMRF filter also works well, but without the ability to ferry values I lose the original classifications.
> 
> I am using PDAL 1.6.0 on Windows within OSGeo4W. It was installed this month. My pipeline is copied below.

PDAL 1.7.1 is now available via OSGeo4W64. I don't know that this will solve any issues for you, but we will be talking about the same codebase as far as functionality goes. I know that the filters.ferry syntax was amended to be more explicit about where data from dimensions should be going.

Hope this helps. Pete's write-up is a good one of how to achieve what you're after.

[1] https://github.com/PDAL/PDAL/pull/1841 <https://github.com/PDAL/PDAL/pull/1841>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180413/df3dc1ee/attachment-0001.html>

From mateusz at loskot.net  Fri Apr 13 08:58:00 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 13 Apr 2018 17:58:00 +0200
Subject: [pdal] PDAL-1.7.1-src.tar.gz vs PDAL-1.7.1.tar.gz
Message-ID: <CABUeae8mFdeJAUDojJfkaxsYL--Gi=XKxXKWKtqFYPh=cQK-0A@mail.gmail.com>

Hi,

Is it expected that these two archive are different?

http://download.osgeo.org/pdal/PDAL-1.7.1-src.tar.gz
https://github.com/PDAL/PDAL/archive/1.7.1.tar.gz

One has complete set of PDALConfig*, the other just the template.

 diff -Nua PDAL-1.7.1-src\doc\index.rst PDAL-1.7.1\doc\index.rst
--- PDAL-1.7.1-src\doc\index.rst        2018-04-06 20:24:17.000000000 +0200
+++ PDAL-1.7.1\doc\index.rst    2018-04-06 21:43:22.000000000 +0200
@@ -28,10 +28,10 @@
 News
 --------------------------------------------------------------------------------

-**04-05-2018**
+**04-06-2018**
 ................................................................................

-PDAL 1.7.0 has been released. Visit :ref:`download` to obtain a copy of the
+PDAL 1.7.1 has been released. Visit :ref:`download` to obtain a copy of the
 source code, or follow the :ref:`quickstart` to get going in a hurry with
 `Docker`_.

There may be more changes, I didn't compare thoroughly, but this seems
enough to lit up the warning light.

Which archive is the one to use?

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From howard at hobu.co  Fri Apr 13 09:10:39 2018
From: howard at hobu.co (Howard Butler)
Date: Fri, 13 Apr 2018 11:10:39 -0500
Subject: [pdal] PDAL-1.7.1-src.tar.gz vs PDAL-1.7.1.tar.gz
In-Reply-To: <CABUeae8mFdeJAUDojJfkaxsYL--Gi=XKxXKWKtqFYPh=cQK-0A@mail.gmail.com>
References: <CABUeae8mFdeJAUDojJfkaxsYL--Gi=XKxXKWKtqFYPh=cQK-0A@mail.gmail.com>
Message-ID: <3941f8ae-ffcf-c05d-ee47-e269fcdd7089@hobu.co>


On 4/13/18 10:58 AM, Mateusz Loskot wrote:
> Hi,
>
> Is it expected that these two archive are different?
>
> http://download.osgeo.org/pdal/PDAL-1.7.1-src.tar.gz
> https://github.com/PDAL/PDAL/archive/1.7.1.tar.gz

The one on github is the "autorelease" feature of github connected to
their tagging. I do not see a way to remove it.

The canonnical release is the one on download.osgeo.org that is
available from https://www.pdal.io/download.html and includes links to
md5 hashes for verification.

>
> One has complete set of PDALConfig*, the other just the template.

The diff below is a doc bug in the release. We will be having a 1.7.2
release in May to fix this doc issue along with some others. Thanks for
the report.

Howard
>
>  diff -Nua PDAL-1.7.1-src\doc\index.rst PDAL-1.7.1\doc\index.rst
> --- PDAL-1.7.1-src\doc\index.rst        2018-04-06 20:24:17.000000000 +0200
> +++ PDAL-1.7.1\doc\index.rst    2018-04-06 21:43:22.000000000 +0200
> @@ -28,10 +28,10 @@
>  News
>  --------------------------------------------------------------------------------
>
> -**04-05-2018**
> +**04-06-2018**
>  ................................................................................
>
> -PDAL 1.7.0 has been released. Visit :ref:`download` to obtain a copy of the
> +PDAL 1.7.1 has been released. Visit :ref:`download` to obtain a copy of the
>  source code, or follow the :ref:`quickstart` to get going in a hurry with
>  `Docker`_.
>
> There may be more changes, I didn't compare thoroughly, but this seems
> enough to lit up the warning light.
>
> Which archive is the one to use?
>
> Best regards,



From mateusz at loskot.net  Fri Apr 13 09:16:15 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 13 Apr 2018 18:16:15 +0200
Subject: [pdal] PDAL-1.7.1-src.tar.gz vs PDAL-1.7.1.tar.gz
In-Reply-To: <3941f8ae-ffcf-c05d-ee47-e269fcdd7089@hobu.co>
References: <CABUeae8mFdeJAUDojJfkaxsYL--Gi=XKxXKWKtqFYPh=cQK-0A@mail.gmail.com>
 <3941f8ae-ffcf-c05d-ee47-e269fcdd7089@hobu.co>
Message-ID: <CABUeae9r5ddLs_E2gAU00C7kR+P7Svo-1rm0Kx6toH+XGH58VQ@mail.gmail.com>

On 13 April 2018 at 18:10, Howard Butler <howard at hobu.co> wrote:
> On 4/13/18 10:58 AM, Mateusz Loskot wrote:
>>
>> Is it expected that these two archive are different?
>>
>> http://download.osgeo.org/pdal/PDAL-1.7.1-src.tar.gz
>> https://github.com/PDAL/PDAL/archive/1.7.1.tar.gz
>
> The one on github is the "autorelease" feature of github connected to
> their tagging. I do not see a way to remove it.

Right. Me neither.

> The canonnical release is the one on download.osgeo.org that is
> available from https://www.pdal.io/download.html and includes links to
> md5 hashes for verification.

Good, thanks.

>> One has complete set of PDALConfig*, the other just the template.
>
> The diff below is a doc bug in the release. We will be having a 1.7.2
> release in May to fix this doc issue along with some others. Thanks for
> the report.

I'll report if I spot any other issue.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From kreve at sdfe.dk  Fri Apr 13 09:19:30 2018
From: kreve at sdfe.dk (Kristian Evers)
Date: Fri, 13 Apr 2018 16:19:30 +0000
Subject: [pdal] PDAL-1.7.1-src.tar.gz vs PDAL-1.7.1.tar.gz
In-Reply-To: <CABUeae9r5ddLs_E2gAU00C7kR+P7Svo-1rm0Kx6toH+XGH58VQ@mail.gmail.com>
References: <CABUeae8mFdeJAUDojJfkaxsYL--Gi=XKxXKWKtqFYPh=cQK-0A@mail.gmail.com>
 <3941f8ae-ffcf-c05d-ee47-e269fcdd7089@hobu.co>
 <CABUeae9r5ddLs_E2gAU00C7kR+P7Svo-1rm0Kx6toH+XGH58VQ@mail.gmail.com>
Message-ID: <04448FA1-F9C6-4D61-BB18-2FE0B37551F4@sdfe.dk>

Howard,

You can’t remove them but you can add your own archives as well.
They will be listed on top and will typically have a more sensible name
than the auto-generated ones. That’s what I’ve been doing with PROJ:

https://github.com/OSGeo/proj.4/releases

I think it confuses users less. Although it would be nice to turn of the
auto-generated archives.

/Kristian

On 13 Apr 2018, at 18:16, Mateusz Loskot <mateusz at loskot.net<mailto:mateusz at loskot.net>> wrote:

On 13 April 2018 at 18:10, Howard Butler <howard at hobu.co<mailto:howard at hobu.co>> wrote:
On 4/13/18 10:58 AM, Mateusz Loskot wrote:

Is it expected that these two archive are different?

http://download.osgeo.org/pdal/PDAL-1.7.1-src.tar.gz
https://github.com/PDAL/PDAL/archive/1.7.1.tar.gz

The one on github is the "autorelease" feature of github connected to
their tagging. I do not see a way to remove it.

Right. Me neither.

The canonnical release is the one on download.osgeo.org<http://download.osgeo.org> that is
available from https://www.pdal.io/download.html and includes links to
md5 hashes for verification.

Good, thanks.

One has complete set of PDALConfig*, the other just the template.

The diff below is a doc bug in the release. We will be having a 1.7.2
release in May to fix this doc issue along with some others. Thanks for
the report.

I'll report if I spot any other issue.

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/pdal

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180413/5f305497/attachment.html>

From howard at hobu.co  Fri Apr 13 09:21:25 2018
From: howard at hobu.co (Howard Butler)
Date: Fri, 13 Apr 2018 11:21:25 -0500
Subject: [pdal] PDAL-1.7.1-src.tar.gz vs PDAL-1.7.1.tar.gz
In-Reply-To: <04448FA1-F9C6-4D61-BB18-2FE0B37551F4@sdfe.dk>
References: <CABUeae8mFdeJAUDojJfkaxsYL--Gi=XKxXKWKtqFYPh=cQK-0A@mail.gmail.com>
 <3941f8ae-ffcf-c05d-ee47-e269fcdd7089@hobu.co>
 <CABUeae9r5ddLs_E2gAU00C7kR+P7Svo-1rm0Kx6toH+XGH58VQ@mail.gmail.com>
 <04448FA1-F9C6-4D61-BB18-2FE0B37551F4@sdfe.dk>
Message-ID: <F8F29BE5-96E3-47B2-A0E9-8E984A6A4985@hobu.co>

We will do so. Thanks for the tip!

> On Apr 13, 2018, at 11:19 AM, Kristian Evers <kreve at sdfe.dk> wrote:
> 
> Howard,
> 
> You can’t remove them but you can add your own archives as well.
> They will be listed on top and will typically have a more sensible name
> than the auto-generated ones. That’s what I’ve been doing with PROJ:
> 
> https://github.com/OSGeo/proj.4/releases <https://github.com/OSGeo/proj.4/releases>
> 
> I think it confuses users less. Although it would be nice to turn of the
> auto-generated archives.
> 
> /Kristian
> 
>> On 13 Apr 2018, at 18:16, Mateusz Loskot <mateusz at loskot.net <mailto:mateusz at loskot.net>> wrote:
>> 
>> On 13 April 2018 at 18:10, Howard Butler <howard at hobu.co <mailto:howard at hobu.co>> wrote:
>>> On 4/13/18 10:58 AM, Mateusz Loskot wrote:
>>>> 
>>>> Is it expected that these two archive are different?
>>>> 
>>>> http://download.osgeo.org/pdal/PDAL-1.7.1-src.tar.gz <http://download.osgeo.org/pdal/PDAL-1.7.1-src.tar.gz>
>>>> https://github.com/PDAL/PDAL/archive/1.7.1.tar.gz
>>> 
>>> The one on github is the "autorelease" feature of github connected to
>>> their tagging. I do not see a way to remove it.
>> 
>> Right. Me neither.
>> 
>>> The canonnical release is the one on download.osgeo.org <http://download.osgeo.org/> that is
>>> available from https://www.pdal.io/download.html <https://www.pdal.io/download.html> and includes links to
>>> md5 hashes for verification.
>> 
>> Good, thanks.
>> 
>>>> One has complete set of PDALConfig*, the other just the template.
>>> 
>>> The diff below is a doc bug in the release. We will be having a 1.7.2
>>> release in May to fix this doc issue along with some others. Thanks for
>>> the report.
>> 
>> I'll report if I spot any other issue.
>> 
>> Best regards,
>> -- 
>> Mateusz Loskot, http://mateusz.loskot.net <http://mateusz.loskot.net/>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org <mailto:pdal at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/pdal
> 
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180413/6afe982d/attachment-0001.html>

From erobeck at gmail.com  Sat Apr 14 07:39:54 2018
From: erobeck at gmail.com (Eric Robeck)
Date: Sat, 14 Apr 2018 09:39:54 -0500
Subject: [pdal] Ferry filter not working in LAZ file
In-Reply-To: <B5FF867D-C8F1-4E4B-9E64-D46F7A47196C@hobu.co>
References: <CAKa5cDJFgYZ8HcgDaCBXtoK=hwfViNOyG7fFRhCJy1PAsnZxJA@mail.gmail.com>
 <B5FF867D-C8F1-4E4B-9E64-D46F7A47196C@hobu.co>
Message-ID: <CAKa5cD+=YeWh+Tms1HtjGLeMHVXf=vEJaizLozbKd0c-NCioAg@mail.gmail.com>

Howard,


Thanks for your suggestions. I updated PDAL to 1.7.1. I didn't notice a
difference with regards to precision, but most* ferry operations work, as
long as they are to existing fields. Because the field I use to store the
DTM elevation (Red) is an integer, I scale it by 100 so there is no loss of
precision.

The pipeline I would like to use is shown below. I transfer the existing
classification to a new dimension, then create a DTM dimension that is
populated in the next step. Because the dimensions are not saved, however,
I use the substitute approach, below, which works. I ferry the
Classification to UserData, which has the same dimension type, then use Red
to store the DTM value x 100 because it is an integer.

Based on a suggestion by Andrew Bell, I tried using the "extra_dims" option
in Writers.las to specify the additional fields created by the ferry filter
and their types, as shown in the first pipeline below. However, the
dimensions are never added to the output file. Are there parameters in
addition to "extra_dims" that I need to specify? VLRs? Do I need to write
to uncompressed LAS files first?

Pete Gadomski's workflow was a great inspiration and helped me develop my
substitute pipeline below. Thank you for the link!


* I noticed some weird behavior with the assign filter that I want to point
out.  When assigning multiple dimensions, sometimes one doesn't get
assigned. It appears to depend on the order of the assignment. For example,
in this stage Classification, Blue and Green are correctly assigned, but
GpsTime is not:

        {
            "type":"filters.assign",
            "assignment":"Classification[:]=0",
            "assignment":"GpsTime[:]=50",
            "assignment":"Blue[:]=10",
            "assignment":"Green[:]=20"
        },

However, when I take out the "GpsTime" assignment and replace it with
"Green", the Green assignment fails, despite having the same value:

        {
            "type":"filters.assign",
            "assignment":"Classification[:]=0",
            "assignment":"Green[:]=20",
            "assignment":"Blue[:]=10"
        },

I got around this by leaving the "GpsTime" spacer in the above example
since my goal was to update Blue and Green only. Apparently the second
"assignment" is being ignored by PDAL.


Thanks,
Eric



*Ideal Pipeline:*

{
  "pipeline":
  [
    "C:/data/forest_park/forest_park_UTM_cropped.laz",
    {
      "type":"filters.ferry",
      "dimensions":"Classification=>OldClassification, =>DTM"
    },
    {
      "type":"filters.colorization",
      "dimensions":"DTM:1:1.0",
      "raster":"C:/data/forest_park/dtm/w001001.adf"
    },
    {
      "type":"writers.las",
      "compression":"true",
      "extra_dims":"OldClassification=uint8, DTM=float",
      "scale_x":"0.01",
      "scale_y":"0.01",
      "scale_z":"0.01",
      "offset_x":"auto",
      "offset_y":"auto",
      "offset_z":"auto",
      "filename":"C:/data/forest_park/forest_park_orig_dtm.laz"
    }
  ]
}

*Substitute Pipeline:*

{
  "pipeline":
  [
    "C:/data/forest_park/forest_park_UTM_cropped.laz",
    {
      "type":"filters.ferry",
      "dimensions":"Classification=>UserData"
    },
    {
      "type":"filters.colorization",
      "dimensions":"Red:1:100.0",
      "raster":"C:/data/forest_park/dtm/w001001.adf"
    },
    {
      "type":"writers.las",
      "compression":"true",
      "scale_x":"0.01",
      "scale_y":"0.01",
      "scale_z":"0.01",
      "offset_x":"auto",
      "offset_y":"auto",
      "offset_z":"auto",
      "filename":"C:/data/forest_park/forest_park_orig_dtm.laz"
    }
  ]
}

On Fri, Apr 13, 2018 at 10:12 AM, Howard Butler <howard at hobu.co> wrote:

>
> On Apr 12, 2018, at 11:05 PM, Eric Robeck <erobeck at gmail.com> wrote:
>
> Hello,
>
> I have written a PDAL pipeline to perform the following steps:
>
> 1.) Ferry the existing Classification to the UserData field for storage
> (this is more efficient than creating a new field)
>
>
> Did you find this to be the case? Adding another dimension shouldn't
> really have an extra cost.
>
> 2.) Use the ferry filter to create a new DTM field
>
>
> 3.) Use the colorize filter to extract the elevation value from a
> single-band TIF (a DTM made from the original ground points)
>
>
> Pete Gadomski made a post about this contorted scenario that's currently
> required. See http://www.gadom.ski/2018/02/28/pdal-hs.html for some
> details.
>
> 4.) Run SMRF to reclassify the ground points
>
> I cannot get the ferry filter to work at all.
>
>
> The syntax in your pipeline is 1.7's syntax, but you stated you're using
> 1.6.0. This might be the discrepancy.  We want to make this scenario
> better. filters.colorization is a bad name for what it does (it's really
> raster overlay). 1.7 fixed the precision issue [1] when doing the task.
>
> It won't transfer values between existing columns or create new columns,
> despite using the same syntax described on PDAL.io. I have tried various
> ways to get around this issue. Changing the order of filters.ferry in the
> pipeline didn't make a difference. I saw that the online examples worked on
> uncompressed LAS files, so I converted the input files from LAZ to LAS but
> there was no change. The pipeline completes without errors, but info
> --stats and info --schema show that the ferried fields were not created or
> updated.
>
> The colorize filter works fine, as long as I use an existing field. For
> example, "dimensions":"Red:1:1000.0" works by mapping the elevation values
> to the Red field and multiplying by 1000 to preserve millimeter precision
> in an integer field. However, "dimensions":"DTM:1:1000.0" does not, because
> the ferry filter doesn't create the DTM field. The SMRF filter also works
> well, but without the ability to ferry values I lose the original
> classifications.
>
> I am using PDAL 1.6.0 on Windows within OSGeo4W. It was installed this
> month. My pipeline is copied below.
>
>
> PDAL 1.7.1 is now available via OSGeo4W64. I don't know that this will
> solve any issues for you, but we will be talking about the same codebase as
> far as functionality goes. I know that the filters.ferry syntax was amended
> to be more explicit about where data from dimensions should be going.
>
> Hope this helps. Pete's write-up is a good one of how to achieve what
> you're after.
>
> [1] https://github.com/PDAL/PDAL/pull/1841
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180414/8564d645/attachment.html>

From andrew.bell.ia at gmail.com  Sat Apr 14 07:42:12 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Sat, 14 Apr 2018 10:42:12 -0400
Subject: [pdal] Ferry filter not working in LAZ file
In-Reply-To: <CAKa5cDJSg8WnsWEjkxQqWDyjT31h46iTuWyXg2+rA5osbmFk4A@mail.gmail.com>
References: <CAKa5cDJFgYZ8HcgDaCBXtoK=hwfViNOyG7fFRhCJy1PAsnZxJA@mail.gmail.com>
 <CACJ51z1WhuX=gdxCFP754c02r_7_HuCiK7MRQHzZYvvPhz0LtA@mail.gmail.com>
 <CAKa5cDJSg8WnsWEjkxQqWDyjT31h46iTuWyXg2+rA5osbmFk4A@mail.gmail.com>
Message-ID: <CACJ51z1RRW-DP7t32FN0eQ+1332pqrfmc3nUJxtMfeBG5TvvVQ@mail.gmail.com>

Eric,

If you write version 1.2 LAS, the information about the extra bytes isn't
read by default.  You have to tell the PDAL las reader what's in the extra
bytes of each record.  You can do this with the option
--readers.las.extra_dims.  If you're using PDAL 1.7, there's a new option,
--readers.las.use_eb_vlr that will read the extra bytes VLR that PDAL
writes (PDAL always writes the extra bytes VLR if there are extra bytes,
even in pre-1.4 LAS files).  LAS files before version 1.4 may have extra
bytes written that don't have the VLR to define them, which is why the
extra_dims option is necessary.  You can also simply write the file with
version 1.4 LAS by specifying --writers.las.minor_version=4.

I've tested filters.ferry and it seems to work fine in your scenario.  If
you're not familiar with the details of LAS, it's sometimes easier to write
text output to verify that things are working as expected.

Hope that helps,


On Sat, Apr 14, 2018 at 9:59 AM, Eric Robeck <erobeck at gmail.com> wrote:

> Andrew,
>
> Thanks for your suggestion! I looked up the LAS Writer specification and
> used "extra_dims" to specify the additional fields created by the ferry
> filter and their types, as shown below. However, the dimensions are never
> added to the output file. I have tried using "extra_dims":"all" but with no
> luck. Are there parameters in addition to "extra_dims" that I need to
> specify? VLRs? The JSON pipeline I am using is copied below.
>
> I assumed that the extra DTM field wasn't being created, since it was not
> shown in the schema, statistcs, or point values accessed through 'pdal
> info' and because ferrying a new field didn't change the output file size.
>
> Per Howard's recommendation yesterday, I updated PDAL to 1.7.1 but I
> continue to get the same results.
>
> I will share this with the PDAL mailing group, but wanted to reply to you
> directly first. I appreciate your help.
>
> Thanks,
> Eric
>
>
> {
>   "pipeline":
>   [
>     "C:/data/forest_park/forest_park_UTM_cropped.laz",
>     {
>       "type":"filters.ferry",
>       "dimensions":"Classification=>OldClassification, =>DTM"
>     },
>     {
>       "type":"filters.colorization",
>       "dimensions":"DTM:1:1.0",
>       "raster":"C:/data/forest_park/dtm/w001001.adf"
>     },
>     {
>       "type":"writers.las",
>       "compression":"true",
>       "extra_dims":"OldClassification=uint8, DTM=float",
>       "scale_x":"0.01",
>       "scale_y":"0.01",
>       "scale_z":"0.01",
>       "offset_x":"auto",
>       "offset_y":"auto",
>       "offset_z":"auto",
>       "filename":"C:/data/forest_park/forest_park_orig_dtm.laz"
>     }
>   ]
> }
>
>
>
> On Fri, Apr 13, 2018 at 6:09 AM, Andrew Bell <andrew.bell.ia at gmail.com>
> wrote:
>
>> Hi Eric,
>>
>> How do you know that the DTM field is not getting created? You'll have to
>> change the writer to put this field in LAS extra bytes if you want it to be
>> part of your output. See the option 'extra_dims' at
>> https://www.pdal.io/stages/writers.las.html for more info.
>>
>> On Fri, Apr 13, 2018, 12:05 AM Eric Robeck <erobeck at gmail.com> wrote:
>>
>>> Hello,
>>>
>>> I have written a PDAL pipeline to perform the following steps:
>>>
>>> 1.) Ferry the existing Classification to the UserData field for storage
>>> (this is more efficient than creating a new field)
>>> 2.) Use the ferry filter to create a new DTM field
>>> 3.) Use the colorize filter to extract the elevation value from a
>>> single-band TIF (a DTM made from the original ground points)
>>> 4.) Run SMRF to reclassify the ground points
>>>
>>> I cannot get the ferry filter to work at all. It won't transfer values
>>> between existing columns or create new columns, despite using the same
>>> syntax described on PDAL.io. I have tried various ways to get around this
>>> issue. Changing the order of filters.ferry in the pipeline didn't make a
>>> difference. I saw that the online examples worked on uncompressed LAS
>>> files, so I converted the input files from LAZ to LAS but there was no
>>> change. The pipeline completes without errors, but info --stats and info
>>> --schema show that the ferried fields were not created or updated.
>>>
>>> The colorize filter works fine, as long as I use an existing field. For
>>> example, "dimensions":"Red:1:1000.0" works by mapping the elevation values
>>> to the Red field and multiplying by 1000 to preserve millimeter precision
>>> in an integer field. However, "dimensions":"DTM:1:1000.0" does not, because
>>> the ferry filter doesn't create the DTM field. The SMRF filter also works
>>> well, but without the ability to ferry values I lose the original
>>> classifications.
>>>
>>> I am using PDAL 1.6.0 on Windows within OSGeo4W. It was installed this
>>> month. My pipeline is copied below.
>>>
>>> Any help would be greatly appreciated.
>>>
>>> Thanks,
>>> Eric
>>>
>>>
>>> {
>>>   "pipeline":
>>>   [
>>>     "C:/data/forest_park/filtered/forest_park_orig.laz",
>>>     {
>>>       "type":"filters.ferry",
>>>       "dimensions":"Classification=>UserData, =>DTM"
>>>     },
>>>     {
>>>       "type":"filters.colorization",
>>>       "dimensions":"DTM:1:1000.0",
>>>       "raster":"C:/data/forest_park/dtm/w001001.adf"
>>>     },
>>>     {
>>>       "type":"filters.smrf",
>>>       "cell":1.00,
>>>       "cut":0,
>>>       "scalar":1.25,
>>>       "slope":0.00,
>>>       "threshold":0.50,
>>>       "window":10
>>>     },
>>>     {
>>>       "type":"writers.las",
>>>       "tag":"writerslas",
>>>       "compression":"true",
>>>       "scale_x":"0.01",
>>>       "scale_y":"0.01",
>>>       "scale_z":"0.01",
>>>       "offset_x":"auto",
>>>       "offset_y":"auto",
>>>       "offset_z":"auto",
>>>       "filename":"C:/data/forest_park/forest_park_orig_dtm.laz"
>>>     }
>>>   ]
>>> }
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>>
>


-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180414/fdc0a310/attachment-0001.html>

From andrew.bell.ia at gmail.com  Sat Apr 14 07:47:40 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Sat, 14 Apr 2018 10:47:40 -0400
Subject: [pdal] Ferry filter not working in LAZ file
In-Reply-To: <CAKa5cD+=YeWh+Tms1HtjGLeMHVXf=vEJaizLozbKd0c-NCioAg@mail.gmail.com>
References: <CAKa5cDJFgYZ8HcgDaCBXtoK=hwfViNOyG7fFRhCJy1PAsnZxJA@mail.gmail.com>
 <B5FF867D-C8F1-4E4B-9E64-D46F7A47196C@hobu.co>
 <CAKa5cD+=YeWh+Tms1HtjGLeMHVXf=vEJaizLozbKd0c-NCioAg@mail.gmail.com>
Message-ID: <CACJ51z3Hef8=WqiMFivaXBq8tq6iH6rPf7eB2+vPFynkK7Ae0w@mail.gmail.com>

On Sat, Apr 14, 2018 at 10:39 AM, Eric Robeck <erobeck at gmail.com> wrote:
>
>
> * I noticed some weird behavior with the assign filter that I want to
> point out.  When assigning multiple dimensions, sometimes one doesn't get
> assigned. It appears to depend on the order of the assignment. For example,
> in this stage Classification, Blue and Green are correctly assigned, but
> GpsTime is not:
>
>         {
>             "type":"filters.assign",
>             "assignment":"Classification[:]=0",
>             "assignment":"GpsTime[:]=50",
>             "assignment":"Blue[:]=10",
>             "assignment":"Green[:]=20"
>         },
>
> However, when I take out the "GpsTime" assignment and replace it with
> "Green", the Green assignment fails, despite having the same value:
>
>         {
>             "type":"filters.assign",
>             "assignment":"Classification[:]=0",
>             "assignment":"Green[:]=20",
>             "assignment":"Blue[:]=10"
>         },
>
>
It's going to be hard to provide any advide or to debug without a full
pipeline.

Best,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180414/56e2e3e2/attachment.html>

From erobeck at gmail.com  Sat Apr 14 10:11:49 2018
From: erobeck at gmail.com (Eric Robeck)
Date: Sat, 14 Apr 2018 12:11:49 -0500
Subject: [pdal] Ferry filter not working in LAZ file
In-Reply-To: <CACJ51z1RRW-DP7t32FN0eQ+1332pqrfmc3nUJxtMfeBG5TvvVQ@mail.gmail.com>
References: <CAKa5cDJFgYZ8HcgDaCBXtoK=hwfViNOyG7fFRhCJy1PAsnZxJA@mail.gmail.com>
 <CACJ51z1WhuX=gdxCFP754c02r_7_HuCiK7MRQHzZYvvPhz0LtA@mail.gmail.com>
 <CAKa5cDJSg8WnsWEjkxQqWDyjT31h46iTuWyXg2+rA5osbmFk4A@mail.gmail.com>
 <CACJ51z1RRW-DP7t32FN0eQ+1332pqrfmc3nUJxtMfeBG5TvvVQ@mail.gmail.com>
Message-ID: <CAKa5cD+p6PFE53OjJc0JmBcCtbOEOo+6QtFUwgGr66kkdtZQ9g@mail.gmail.com>

Andrew,

Writing to LAS 1.4 format did the trick! I had been specifying the
"extra_dims" option in the "writers.las" stage, so I'm not clear as to why
it wasn't working. But I will continue to use version 1.4 as backwards
compatibility is not an issue.

Thanks for the quick reply.

Regards,
Eric


On Sat, Apr 14, 2018 at 9:42 AM, Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

> Eric,
>
> If you write version 1.2 LAS, the information about the extra bytes isn't
> read by default.  You have to tell the PDAL las reader what's in the extra
> bytes of each record.  You can do this with the option
> --readers.las.extra_dims.  If you're using PDAL 1.7, there's a new option,
> --readers.las.use_eb_vlr that will read the extra bytes VLR that PDAL
> writes (PDAL always writes the extra bytes VLR if there are extra bytes,
> even in pre-1.4 LAS files).  LAS files before version 1.4 may have extra
> bytes written that don't have the VLR to define them, which is why the
> extra_dims option is necessary.  You can also simply write the file with
> version 1.4 LAS by specifying --writers.las.minor_version=4.
>
> I've tested filters.ferry and it seems to work fine in your scenario.  If
> you're not familiar with the details of LAS, it's sometimes easier to write
> text output to verify that things are working as expected.
>
> Hope that helps,
>
>
> On Sat, Apr 14, 2018 at 9:59 AM, Eric Robeck <erobeck at gmail.com> wrote:
>
>> Andrew,
>>
>> Thanks for your suggestion! I looked up the LAS Writer specification and
>> used "extra_dims" to specify the additional fields created by the ferry
>> filter and their types, as shown below. However, the dimensions are never
>> added to the output file. I have tried using "extra_dims":"all" but with no
>> luck. Are there parameters in addition to "extra_dims" that I need to
>> specify? VLRs? The JSON pipeline I am using is copied below.
>>
>> I assumed that the extra DTM field wasn't being created, since it was not
>> shown in the schema, statistcs, or point values accessed through 'pdal
>> info' and because ferrying a new field didn't change the output file size.
>>
>> Per Howard's recommendation yesterday, I updated PDAL to 1.7.1 but I
>> continue to get the same results.
>>
>> I will share this with the PDAL mailing group, but wanted to reply to you
>> directly first. I appreciate your help.
>>
>> Thanks,
>> Eric
>>
>>
>> {
>>   "pipeline":
>>   [
>>     "C:/data/forest_park/forest_park_UTM_cropped.laz",
>>     {
>>       "type":"filters.ferry",
>>       "dimensions":"Classification=>OldClassification, =>DTM"
>>     },
>>     {
>>       "type":"filters.colorization",
>>       "dimensions":"DTM:1:1.0",
>>       "raster":"C:/data/forest_park/dtm/w001001.adf"
>>     },
>>     {
>>       "type":"writers.las",
>>       "compression":"true",
>>       "extra_dims":"OldClassification=uint8, DTM=float",
>>       "scale_x":"0.01",
>>       "scale_y":"0.01",
>>       "scale_z":"0.01",
>>       "offset_x":"auto",
>>       "offset_y":"auto",
>>       "offset_z":"auto",
>>       "filename":"C:/data/forest_park/forest_park_orig_dtm.laz"
>>     }
>>   ]
>> }
>>
>>
>>
>> On Fri, Apr 13, 2018 at 6:09 AM, Andrew Bell <andrew.bell.ia at gmail.com>
>> wrote:
>>
>>> Hi Eric,
>>>
>>> How do you know that the DTM field is not getting created? You'll have
>>> to change the writer to put this field in LAS extra bytes if you want it to
>>> be part of your output. See the option 'extra_dims' at
>>> https://www.pdal.io/stages/writers.las.html for more info.
>>>
>>> On Fri, Apr 13, 2018, 12:05 AM Eric Robeck <erobeck at gmail.com> wrote:
>>>
>>>> Hello,
>>>>
>>>> I have written a PDAL pipeline to perform the following steps:
>>>>
>>>> 1.) Ferry the existing Classification to the UserData field for storage
>>>> (this is more efficient than creating a new field)
>>>> 2.) Use the ferry filter to create a new DTM field
>>>> 3.) Use the colorize filter to extract the elevation value from a
>>>> single-band TIF (a DTM made from the original ground points)
>>>> 4.) Run SMRF to reclassify the ground points
>>>>
>>>> I cannot get the ferry filter to work at all. It won't transfer values
>>>> between existing columns or create new columns, despite using the same
>>>> syntax described on PDAL.io. I have tried various ways to get around this
>>>> issue. Changing the order of filters.ferry in the pipeline didn't make a
>>>> difference. I saw that the online examples worked on uncompressed LAS
>>>> files, so I converted the input files from LAZ to LAS but there was no
>>>> change. The pipeline completes without errors, but info --stats and info
>>>> --schema show that the ferried fields were not created or updated.
>>>>
>>>> The colorize filter works fine, as long as I use an existing field. For
>>>> example, "dimensions":"Red:1:1000.0" works by mapping the elevation values
>>>> to the Red field and multiplying by 1000 to preserve millimeter precision
>>>> in an integer field. However, "dimensions":"DTM:1:1000.0" does not, because
>>>> the ferry filter doesn't create the DTM field. The SMRF filter also works
>>>> well, but without the ability to ferry values I lose the original
>>>> classifications.
>>>>
>>>> I am using PDAL 1.6.0 on Windows within OSGeo4W. It was installed this
>>>> month. My pipeline is copied below.
>>>>
>>>> Any help would be greatly appreciated.
>>>>
>>>> Thanks,
>>>> Eric
>>>>
>>>>
>>>> {
>>>>   "pipeline":
>>>>   [
>>>>     "C:/data/forest_park/filtered/forest_park_orig.laz",
>>>>     {
>>>>       "type":"filters.ferry",
>>>>       "dimensions":"Classification=>UserData, =>DTM"
>>>>     },
>>>>     {
>>>>       "type":"filters.colorization",
>>>>       "dimensions":"DTM:1:1000.0",
>>>>       "raster":"C:/data/forest_park/dtm/w001001.adf"
>>>>     },
>>>>     {
>>>>       "type":"filters.smrf",
>>>>       "cell":1.00,
>>>>       "cut":0,
>>>>       "scalar":1.25,
>>>>       "slope":0.00,
>>>>       "threshold":0.50,
>>>>       "window":10
>>>>     },
>>>>     {
>>>>       "type":"writers.las",
>>>>       "tag":"writerslas",
>>>>       "compression":"true",
>>>>       "scale_x":"0.01",
>>>>       "scale_y":"0.01",
>>>>       "scale_z":"0.01",
>>>>       "offset_x":"auto",
>>>>       "offset_y":"auto",
>>>>       "offset_z":"auto",
>>>>       "filename":"C:/data/forest_park/forest_park_orig_dtm.laz"
>>>>     }
>>>>   ]
>>>> }
>>>> _______________________________________________
>>>> pdal mailing list
>>>> pdal at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>
>>>
>>
>
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180414/8374f61a/attachment.html>

From erobeck at gmail.com  Sat Apr 14 17:38:32 2018
From: erobeck at gmail.com (Eric Robeck)
Date: Sat, 14 Apr 2018 19:38:32 -0500
Subject: [pdal] Filters.assign: not all filters applied
Message-ID: <CAKa5cDJLL7X6WPpjA25MRPR6wUBnuhzNOth063Umufr3wiSi5Q@mail.gmail.com>

PDAL team -

I mentioned this in an earlier email but thought it would be better in its
own thread. I wrote a pipeline to assign two SMRF variables (window and
slope) to separate dimensions, as I eventually want to combine them into a
single Postgres database and compare the effectiveness of each iteration.

My pipeline has several stages, as shown below. First I read the file,
capturing the non-standard dimensions I created earlier, then I ferry the
two new fields. Next reset the classifications (before running SMRF) and
assign per-file values to Window and Slope. This is where the process
breaks down. Only the last assignment is made. In the pipeline below, I
added GpsTime and Red for testing purposes. As shown in the *info --stats*
output (bottom, highlighted text), no changes were made to Window, Slope or
GpsTime, but Red is assigned a value of 255. When I remove the Red
assignment, GpsTime is assigned the correct value of 3000, but Window and
Slope are still unchanged.

If I insert more *filters.assign* stages in the pipeline, I can set values
multiple dimensions, but only if they are the last listed in each stage.

*However, I can't set the values of Window and Slope* - even if they are
last. (I don't care about the others - they are just for testing.) Why
can't I assign values to my newly created dimensions? Is it because I don't
specify their type until the writer stage?

Thanks in advance.

Regards,
Eric


*Pipeline (limited to the first 100,000 points for testing). File is LAZ
1.4 format:*

{
  "pipeline":
  [
    {
      "filename":"C:/data/forest_park/forest_park_orig_dtm.laz",
      "type":"readers.las",
      "extra_dims":"OldClassification=uint8, DTM=float",
      "count":100000
    },
    {
      "type":"filters.ferry",
      "tag":"filtersferry",
      "dimensions":"=>Window, =>Slope"
    },
    {
      "inputs":"filtersferry",
      "type":"filters.assign",
      "tag":"filtersassign",
      "assignment":"Classification[:]=0",
      "assignment":"Window[:]=12",
      "assignment":"Slope[:]=0_50",
      "assignment":"GpsTime[:]=3000",
      "assignment":"Red[:]=255"
    },
    {
      "inputs":"filtersassign",
      "type":"filters.smrf",
      "tag":"filterssmurf",
      "cell":1.00,
      "cut":0,
      "scalar":1.25,
      "slope":0.05,
      "threshold":0.50,
      "window":12
    },
    {
        "inputs":"filterssmurf",
      "type":"writers.las",
      "minor_version":"4",
      "compression":"true",
      "extra_dims":"OldClassification=uint8, DTM=float, Window=uint8,
Slope=float",
      "scale_x":"0.01",
      "scale_y":"0.01",
      "scale_z":"0.01",
      "offset_x":"auto",
      "offset_y":"auto",
      "offset_z":"auto",
      "filename":"C:/data/forest_park/smrf/forest_park (window-12,
slope-0_05).laz"
    }
  ]
}

*info -stats JSON output:*

{
  "filename": "C:\\data\\forest_park\\smrf\\forest_park (window-12,
slope-0_05).laz",
  "pdal_version": "1.7.1 (git-version: Release)",
  "stats":
  {
    "bbox":
    {
      "EPSG:4326":
      {
        "bbox":
        {
          "maxx": -90.26228629,
          "maxy": 38.63885582,
          "maxz": 231.3,
          "minx": -90.26674834,
          "miny": 38.63740345,
          "minz": 146.26
        },
        "boundary": {
   "coordinates" : [
      [
         [ -90.266748340000007, 38.637506649999999 ],
         [ -90.266697059999998, 38.638855820000003 ],
         [ -90.262286290000006, 38.638752609999997 ],
         [ -90.262337650000006, 38.637403450000001 ],
         [ -90.266748340000007, 38.637506649999999 ]
      ]
   ],
   "type" : "Polygon"
}

      },
      "native":
      {
        "bbox":
        {
          "maxx": 738284.32,
          "maxy": 4280246,
          "maxz": 231.3,
          "minx": 737900.01,
          "miny": 4280096.12,
          "minz": 146.26
        },
        "boundary": {
   "coordinates" : [
      [
         [ 737900.01000000001, 4280096.1200000001 ],
         [ 737900.01000000001, 4280246 ],
         [ 738284.31999999995, 4280246 ],
         [ 738284.31999999995, 4280096.1200000001 ],
         [ 737900.01000000001, 4280096.1200000001 ]
      ]
   ],
   "type" : "Polygon"
}

      }
    },
    "statistic":
    [
      {
        "average": 738047.8528,
        "count": 100000,
        "kurtosis": -1.058617353e+21,
        "maximum": 738284.32,
        "minimum": 737900.01,
        "name": "X",
        "position": 0,
        "skewness": 5.819331476e+21,
        "stddev": 2335.463392,
        "variance": 5454389.253
      },
      {
        "average": 4280180.736,
        "count": 100000,
        "kurtosis": 1.110237075e+20,
        "maximum": 4280246,
        "minimum": 4280096.12,
        "name": "Y",
        "position": 1,
        "skewness": 5.833279928e+21,
        "stddev": 13535.46299,
        "variance": 183208758.5
      },
      {
        "average": 172.814753,
        "count": 100000,
        "kurtosis": -1.151862193e+17,
        "maximum": 231.3,
        "minimum": 146.26,
        "name": "Z",
        "position": 2,
        "skewness": 4.786721963e+16,
        "stddev": 24.75900268,
        "variance": 613.0082139
      },
      {
        "average": 13627.78624,
        "count": 100000,
        "kurtosis": -9.799196037e+11,
        "maximum": 65520,
        "minimum": 48,
        "name": "Intensity",
        "position": 3,
        "skewness": 2.271591546e+11,
        "stddev": 11494.12826,
        "variance": 132114984.4
      },
      {
        "average": 1.16788,
        "count": 100000,
        "kurtosis": -3.136035307e+15,
        "maximum": 7,
        "minimum": 1,
        "name": "ReturnNumber",
        "position": 4,
        "skewness": 2.081955413e+15,
        "stddev": 0.4458118459,
        "variance": 0.198748202
      },
      {
        "average": 1.33647,
        "count": 100000,
        "kurtosis": 2.44020564e+16,
        "maximum": 7,
        "minimum": 1,
        "name": "NumberOfReturns",
        "position": 5,
        "skewness": 5.819448528e+15,
        "stddev": 0.6329627186,
        "variance": 0.4006418031
      },
      {
        "average": 0.50087,
        "count": 100000,
        "kurtosis": -2.000079167,
        "maximum": 1,
        "minimum": 0,
        "name": "ScanDirectionFlag",
        "position": 6,
        "skewness": -0.003486625756,
        "stddev": 0.5000250321,
        "variance": 0.2500250328
      },
      {
        "average": 0,
        "count": 100000,
        "maximum": 0,
        "minimum": 0,
        "name": "EdgeOfFlightLine",
        "position": 7,
        "stddev": 0,
        "variance": 0
      },
      {
        "average": 1.69919,
        "count": 100000,
        "kurtosis": -1.16609259e+16,
        "maximum": 2,
        "minimum": 1,
        "name": "Classification",
        "position": 8,
        "skewness": 1.912221988e+15,
        "stddev": 0.4586301939,
        "variance": 0.2103416548
      },
      {
        "average": -2.09112,
        "count": 100000,
        "kurtosis": 6.331454949e+15,
        "maximum": 6,
        "minimum": -7,
        "name": "ScanAngleRank",
        "position": 9,
        "skewness": -1.275371659e+15,
        "stddev": 3.14954445,
        "variance": 9.919630242
      },
      {
        "average": 0,
        "count": 100000,
        "maximum": 0,
        "minimum": 0,
        "name": "UserData",
        "position": 10,
        "stddev": 0,
        "variance": 0
      },
      {
        "average": 45,
        "count": 100000,
        "kurtosis": 99997,
        "maximum": 45,
        "minimum": 45,
        "name": "PointSourceId",
        "position": 11,
        "skewness": 5.833372669e+21,
        "stddev": 0.1423032062,
        "variance": 0.0202502025
      },
      {
        "average": 255,
        "count": 100000,
        "kurtosis": 99997,
        "maximum": 255,
        "minimum": 255,
        *"name": "Red",*
        "position": 12,
        "skewness": 5.833372669e+21,
        "stddev": 0.8063848353,
        "variance": 0.6502565026
      },
      {
        "average": 0,
        "count": 100000,
        "maximum": 0,
        "minimum": 0,
        "name": "Green",
        "position": 13,
        "stddev": 0,
        "variance": 0
      },
      {
        "average": 0,
        "count": 100000,
        "maximum": 0,
        "minimum": 0,
        "name": "Blue",
        "position": 14,
        "stddev": 0,
        "variance": 0
      },
      {
        "average": 172254001,
        "count": 100000,
        "kurtosis": -3.202512756e+16,
        "maximum": 172254002.3,
        "minimum": 172253999.8,
        *"name": "GpsTime",*
        "position": 15,
        "skewness": 5.833372669e+21,
        "stddev": 544717.7005,
        "variance": 2.967173733e+11
      },
      {
        "average": 0,
        "count": 100000,
        "maximum": 0,
        "minimum": 0,
        "name": "ScanChannel",
        "position": 16,
        "stddev": 0,
        "variance": 0
      },
      {
        "average": 0,
        "count": 100000,
        "maximum": 0,
        "minimum": 0,
        "name": "ClassFlags",
        "position": 17,
        "stddev": 0,
        "variance": 0
      },
      {
        "average": 18.01678,
        "count": 100000,
        "kurtosis": -1.884682428e+10,
        "maximum": 66,
        "minimum": 1,
        "name": "OldClassification",
        "position": 18,
        "skewness": 7910529149,
        "stddev": 28.56978029,
        "variance": 816.2323461
      },
      {
        "average": 153.4204378,
        "count": 100000,
        "kurtosis": -3.477613714e+20,
        "maximum": 156.4029999,
        "minimum": 146.477005,
        "name": "DTM",
        "position": 19,
        "skewness": 1.411306933e+20,
        "stddev": 1.666234469,
        "variance": 2.776337307
      },
      {
        "average": 0,
        "count": 100000,
        "maximum": 0,
        "minimum": 0,
        *"name": "Window",*
        "position": 20,
        "stddev": 0,
        "variance": 0
      },
      {
        "average": 0,
        "count": 100000,
        "maximum": 0,
        "minimum": 0,
        *"name": "Slope",*
        "position": 21,
        "stddev": 0,
        "variance": 0
      }
    ]
  }
}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180414/ca7729f5/attachment-0001.html>

From erobeck at gmail.com  Sat Apr 14 18:15:28 2018
From: erobeck at gmail.com (Eric Robeck)
Date: Sat, 14 Apr 2018 20:15:28 -0500
Subject: [pdal] Filters.assign: not all filters applied
In-Reply-To: <CAKa5cDJLL7X6WPpjA25MRPR6wUBnuhzNOth063Umufr3wiSi5Q@mail.gmail.com>
References: <CAKa5cDJLL7X6WPpjA25MRPR6wUBnuhzNOth063Umufr3wiSi5Q@mail.gmail.com>
Message-ID: <CAKa5cDLSxdqavuY2+NSiAfVFHrTRqm4kQvsJGs+Ym_6NyphXQA@mail.gmail.com>

All,

I answered my last question above:

*However, I can't set the values of Window and Slope* - even if they are
> last. (I don't care about the others - they are just for testing.) Why
> can't I assign values to my newly created dimensions? Is it because I don't
> specify their type until the writer stage?
>

By transferring existing fields with the desired formats with
filters.ferry, instead of creating them from scratch, I was able to get
them to keep the values subsequently assigned to them using filters.assign.
Do I need to force the dimension format (uint8, float, etc.) before it can
be assigned values?

However, the same issue still applies: I can only assign values to the last
dimension in each filters.assign stage. To assign multiple dimensions, I
have to create separate stages for each. This doesn't appear to be an issue
in the PDAL.io example (
https://www.pdal.io/stages/filters.assign.html#filters-assign).

Thanks, everyone! I'll get back to work and stop spamming your inboxes.

Regards,
Eric


On Sat, Apr 14, 2018 at 7:38 PM, Eric Robeck <erobeck at gmail.com> wrote:

> PDAL team -
>
> I mentioned this in an earlier email but thought it would be better in its
> own thread. I wrote a pipeline to assign two SMRF variables (window and
> slope) to separate dimensions, as I eventually want to combine them into a
> single Postgres database and compare the effectiveness of each iteration.
>
> My pipeline has several stages, as shown below. First I read the file,
> capturing the non-standard dimensions I created earlier, then I ferry the
> two new fields. Next reset the classifications (before running SMRF) and
> assign per-file values to Window and Slope. This is where the process
> breaks down. Only the last assignment is made. In the pipeline below, I
> added GpsTime and Red for testing purposes. As shown in the *info --stats*
> output (bottom, highlighted text), no changes were made to Window, Slope or
> GpsTime, but Red is assigned a value of 255. When I remove the Red
> assignment, GpsTime is assigned the correct value of 3000, but Window and
> Slope are still unchanged.
>
> If I insert more *filters.assign* stages in the pipeline, I can set
> values multiple dimensions, but only if they are the last listed in each
> stage.
>
> *However, I can't set the values of Window and Slope* - even if they are
> last. (I don't care about the others - they are just for testing.) Why
> can't I assign values to my newly created dimensions? Is it because I don't
> specify their type until the writer stage?
>
> Thanks in advance.
>
> Regards,
> Eric
>
>
> *Pipeline (limited to the first 100,000 points for testing). File is LAZ
> 1.4 format:*
>
> {
>   "pipeline":
>   [
>     {
>       "filename":"C:/data/forest_park/forest_park_orig_dtm.laz",
>       "type":"readers.las",
>       "extra_dims":"OldClassification=uint8, DTM=float",
>       "count":100000
>     },
>     {
>       "type":"filters.ferry",
>       "tag":"filtersferry",
>       "dimensions":"=>Window, =>Slope"
>     },
>     {
>       "inputs":"filtersferry",
>       "type":"filters.assign",
>       "tag":"filtersassign",
>       "assignment":"Classification[:]=0",
>       "assignment":"Window[:]=12",
>       "assignment":"Slope[:]=0_50",
>       "assignment":"GpsTime[:]=3000",
>       "assignment":"Red[:]=255"
>     },
>     {
>       "inputs":"filtersassign",
>       "type":"filters.smrf",
>       "tag":"filterssmurf",
>       "cell":1.00,
>       "cut":0,
>       "scalar":1.25,
>       "slope":0.05,
>       "threshold":0.50,
>       "window":12
>     },
>     {
>         "inputs":"filterssmurf",
>       "type":"writers.las",
>       "minor_version":"4",
>       "compression":"true",
>       "extra_dims":"OldClassification=uint8, DTM=float, Window=uint8,
> Slope=float",
>       "scale_x":"0.01",
>       "scale_y":"0.01",
>       "scale_z":"0.01",
>       "offset_x":"auto",
>       "offset_y":"auto",
>       "offset_z":"auto",
>       "filename":"C:/data/forest_park/smrf/forest_park (window-12,
> slope-0_05).laz"
>     }
>   ]
> }
>
> *info -stats JSON output:*
>
> {
>   "filename": "C:\\data\\forest_park\\smrf\\forest_park (window-12,
> slope-0_05).laz",
>   "pdal_version": "1.7.1 (git-version: Release)",
>   "stats":
>   {
>     "bbox":
>     {
>       "EPSG:4326":
>       {
>         "bbox":
>         {
>           "maxx": -90.26228629,
>           "maxy": 38.63885582,
>           "maxz": 231.3,
>           "minx": -90.26674834,
>           "miny": 38.63740345,
>           "minz": 146.26
>         },
>         "boundary": {
>    "coordinates" : [
>       [
>          [ -90.266748340000007, 38.637506649999999 ],
>          [ -90.266697059999998, 38.638855820000003 ],
>          [ -90.262286290000006, 38.638752609999997 ],
>          [ -90.262337650000006, 38.637403450000001 ],
>          [ -90.266748340000007, 38.637506649999999 ]
>       ]
>    ],
>    "type" : "Polygon"
> }
>
>       },
>       "native":
>       {
>         "bbox":
>         {
>           "maxx": 738284.32,
>           "maxy": 4280246,
>           "maxz": 231.3,
>           "minx": 737900.01,
>           "miny": 4280096.12,
>           "minz": 146.26
>         },
>         "boundary": {
>    "coordinates" : [
>       [
>          [ 737900.01000000001, 4280096.1200000001 ],
>          [ 737900.01000000001, 4280246 ],
>          [ 738284.31999999995, 4280246 ],
>          [ 738284.31999999995, 4280096.1200000001 ],
>          [ 737900.01000000001, 4280096.1200000001 ]
>       ]
>    ],
>    "type" : "Polygon"
> }
>
>       }
>     },
>     "statistic":
>     [
>       {
>         "average": 738047.8528,
>         "count": 100000,
>         "kurtosis": -1.058617353e+21,
>         "maximum": 738284.32,
>         "minimum": 737900.01,
>         "name": "X",
>         "position": 0,
>         "skewness": 5.819331476e+21,
>         "stddev": 2335.463392,
>         "variance": 5454389.253
>       },
>       {
>         "average": 4280180.736,
>         "count": 100000,
>         "kurtosis": 1.110237075e+20,
>         "maximum": 4280246,
>         "minimum": 4280096.12,
>         "name": "Y",
>         "position": 1,
>         "skewness": 5.833279928e+21,
>         "stddev": 13535.46299,
>         "variance": 183208758.5
>       },
>       {
>         "average": 172.814753,
>         "count": 100000,
>         "kurtosis": -1.151862193e+17,
>         "maximum": 231.3,
>         "minimum": 146.26,
>         "name": "Z",
>         "position": 2,
>         "skewness": 4.786721963e+16,
>         "stddev": 24.75900268,
>         "variance": 613.0082139
>       },
>       {
>         "average": 13627.78624,
>         "count": 100000,
>         "kurtosis": -9.799196037e+11,
>         "maximum": 65520,
>         "minimum": 48,
>         "name": "Intensity",
>         "position": 3,
>         "skewness": 2.271591546e+11,
>         "stddev": 11494.12826,
>         "variance": 132114984.4
>       },
>       {
>         "average": 1.16788,
>         "count": 100000,
>         "kurtosis": -3.136035307e+15,
>         "maximum": 7,
>         "minimum": 1,
>         "name": "ReturnNumber",
>         "position": 4,
>         "skewness": 2.081955413e+15,
>         "stddev": 0.4458118459,
>         "variance": 0.198748202
>       },
>       {
>         "average": 1.33647,
>         "count": 100000,
>         "kurtosis": 2.44020564e+16,
>         "maximum": 7,
>         "minimum": 1,
>         "name": "NumberOfReturns",
>         "position": 5,
>         "skewness": 5.819448528e+15,
>         "stddev": 0.6329627186,
>         "variance": 0.4006418031
>       },
>       {
>         "average": 0.50087,
>         "count": 100000,
>         "kurtosis": -2.000079167,
>         "maximum": 1,
>         "minimum": 0,
>         "name": "ScanDirectionFlag",
>         "position": 6,
>         "skewness": -0.003486625756,
>         "stddev": 0.5000250321,
>         "variance": 0.2500250328
>       },
>       {
>         "average": 0,
>         "count": 100000,
>         "maximum": 0,
>         "minimum": 0,
>         "name": "EdgeOfFlightLine",
>         "position": 7,
>         "stddev": 0,
>         "variance": 0
>       },
>       {
>         "average": 1.69919,
>         "count": 100000,
>         "kurtosis": -1.16609259e+16,
>         "maximum": 2,
>         "minimum": 1,
>         "name": "Classification",
>         "position": 8,
>         "skewness": 1.912221988e+15,
>         "stddev": 0.4586301939,
>         "variance": 0.2103416548
>       },
>       {
>         "average": -2.09112,
>         "count": 100000,
>         "kurtosis": 6.331454949e+15,
>         "maximum": 6,
>         "minimum": -7,
>         "name": "ScanAngleRank",
>         "position": 9,
>         "skewness": -1.275371659e+15,
>         "stddev": 3.14954445,
>         "variance": 9.919630242
>       },
>       {
>         "average": 0,
>         "count": 100000,
>         "maximum": 0,
>         "minimum": 0,
>         "name": "UserData",
>         "position": 10,
>         "stddev": 0,
>         "variance": 0
>       },
>       {
>         "average": 45,
>         "count": 100000,
>         "kurtosis": 99997,
>         "maximum": 45,
>         "minimum": 45,
>         "name": "PointSourceId",
>         "position": 11,
>         "skewness": 5.833372669e+21,
>         "stddev": 0.1423032062,
>         "variance": 0.0202502025
>       },
>       {
>         "average": 255,
>         "count": 100000,
>         "kurtosis": 99997,
>         "maximum": 255,
>         "minimum": 255,
>         *"name": "Red",*
>         "position": 12,
>         "skewness": 5.833372669e+21,
>         "stddev": 0.8063848353,
>         "variance": 0.6502565026
>       },
>       {
>         "average": 0,
>         "count": 100000,
>         "maximum": 0,
>         "minimum": 0,
>         "name": "Green",
>         "position": 13,
>         "stddev": 0,
>         "variance": 0
>       },
>       {
>         "average": 0,
>         "count": 100000,
>         "maximum": 0,
>         "minimum": 0,
>         "name": "Blue",
>         "position": 14,
>         "stddev": 0,
>         "variance": 0
>       },
>       {
>         "average": 172254001,
>         "count": 100000,
>         "kurtosis": -3.202512756e+16,
>         "maximum": 172254002.3,
>         "minimum": 172253999.8,
>         *"name": "GpsTime",*
>         "position": 15,
>         "skewness": 5.833372669e+21,
>         "stddev": 544717.7005,
>         "variance": 2.967173733e+11
>       },
>       {
>         "average": 0,
>         "count": 100000,
>         "maximum": 0,
>         "minimum": 0,
>         "name": "ScanChannel",
>         "position": 16,
>         "stddev": 0,
>         "variance": 0
>       },
>       {
>         "average": 0,
>         "count": 100000,
>         "maximum": 0,
>         "minimum": 0,
>         "name": "ClassFlags",
>         "position": 17,
>         "stddev": 0,
>         "variance": 0
>       },
>       {
>         "average": 18.01678,
>         "count": 100000,
>         "kurtosis": -1.884682428e+10,
>         "maximum": 66,
>         "minimum": 1,
>         "name": "OldClassification",
>         "position": 18,
>         "skewness": 7910529149,
>         "stddev": 28.56978029,
>         "variance": 816.2323461
>       },
>       {
>         "average": 153.4204378,
>         "count": 100000,
>         "kurtosis": -3.477613714e+20,
>         "maximum": 156.4029999,
>         "minimum": 146.477005,
>         "name": "DTM",
>         "position": 19,
>         "skewness": 1.411306933e+20,
>         "stddev": 1.666234469,
>         "variance": 2.776337307
>       },
>       {
>         "average": 0,
>         "count": 100000,
>         "maximum": 0,
>         "minimum": 0,
>         *"name": "Window",*
>         "position": 20,
>         "stddev": 0,
>         "variance": 0
>       },
>       {
>         "average": 0,
>         "count": 100000,
>         "maximum": 0,
>         "minimum": 0,
>         *"name": "Slope",*
>         "position": 21,
>         "stddev": 0,
>         "variance": 0
>       }
>     ]
>   }
> }
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180414/73649e4e/attachment-0001.html>

From howard at hobu.co  Sat Apr 14 18:34:11 2018
From: howard at hobu.co (Howard Butler)
Date: Sat, 14 Apr 2018 20:34:11 -0500
Subject: [pdal] Filters.assign: not all filters applied
In-Reply-To: <CAKa5cDLSxdqavuY2+NSiAfVFHrTRqm4kQvsJGs+Ym_6NyphXQA@mail.gmail.com>
References: <CAKa5cDJLL7X6WPpjA25MRPR6wUBnuhzNOth063Umufr3wiSi5Q@mail.gmail.com>
 <CAKa5cDLSxdqavuY2+NSiAfVFHrTRqm4kQvsJGs+Ym_6NyphXQA@mail.gmail.com>
Message-ID: <81E5E0CD-E62D-40A2-BCC3-03D60A1B8CA0@hobu.co>



> On Apr 14, 2018, at 8:15 PM, Eric Robeck <erobeck at gmail.com> wrote:
> 
> Thanks, everyone! I'll get back to work and stop spamming your inboxes.

On the contrary, keep it up. Your documentation of your learning journey with the tools is helping us find sticky spots that we can document, illustrate, and patch to make them work better. 

If you’re spamming us, we will let you know (privately). 

Howard


From andrew.bell.ia at gmail.com  Sat Apr 14 18:50:14 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Sun, 15 Apr 2018 01:50:14 +0000
Subject: [pdal] Filters.assign: not all filters applied
In-Reply-To: <81E5E0CD-E62D-40A2-BCC3-03D60A1B8CA0@hobu.co>
References: <CAKa5cDJLL7X6WPpjA25MRPR6wUBnuhzNOth063Umufr3wiSi5Q@mail.gmail.com>
 <CAKa5cDLSxdqavuY2+NSiAfVFHrTRqm4kQvsJGs+Ym_6NyphXQA@mail.gmail.com>
 <81E5E0CD-E62D-40A2-BCC3-03D60A1B8CA0@hobu.co>
Message-ID: <CACJ51z0N5wEV-6a3kANoQbxkDZxmQy7jeeDjfBP2bY9DZVeGRA@mail.gmail.com>

A change that was made to filters.ferry for version 1.7 broke dimension
creation. I'll fix shortly.

On Sat, Apr 14, 2018, 9:34 PM Howard Butler <howard at hobu.co> wrote:

>
>
> > On Apr 14, 2018, at 8:15 PM, Eric Robeck <erobeck at gmail.com> wrote:
> >
> > Thanks, everyone! I'll get back to work and stop spamming your inboxes.
>
> On the contrary, keep it up. Your documentation of your learning journey
> with the tools is helping us find sticky spots that we can document,
> illustrate, and patch to make them work better.
>
> If you’re spamming us, we will let you know (privately).
>
> Howard
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180415/73ee4945/attachment.html>

From andrew.bell.ia at gmail.com  Mon Apr 16 07:20:51 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 16 Apr 2018 10:20:51 -0400
Subject: [pdal] Filters.assign: not all filters applied
In-Reply-To: <CACJ51z0N5wEV-6a3kANoQbxkDZxmQy7jeeDjfBP2bY9DZVeGRA@mail.gmail.com>
References: <CAKa5cDJLL7X6WPpjA25MRPR6wUBnuhzNOth063Umufr3wiSi5Q@mail.gmail.com>
 <CAKa5cDLSxdqavuY2+NSiAfVFHrTRqm4kQvsJGs+Ym_6NyphXQA@mail.gmail.com>
 <81E5E0CD-E62D-40A2-BCC3-03D60A1B8CA0@hobu.co>
 <CACJ51z0N5wEV-6a3kANoQbxkDZxmQy7jeeDjfBP2bY9DZVeGRA@mail.gmail.com>
Message-ID: <CACJ51z29q9FRhzv-ObZa5VESONhqUULuYTwrMNmMxDY_heXDmg@mail.gmail.com>

Eric,

I can't recreate the issue with the assignment problems.  I'm a little
suspicious of your test because you should get an error with the following
assignments:

      "assignment":"Classification[:]=0",
      "assignment":"Window[:]=12",
      "assignment":"Slope[:]=0_50",
      "assignment":"GpsTime[:]=3000",
      "assignment":"Red[:]=255"

That's because "0_50" isn't a valid value to assign for Slope.  When I run
a pipeline with a similar construct, I get:

$ bin/pdal pipeline test.json
PDAL: filters.assign: Invalid value for argument 'assignment'.

Please try to reproduce your issue using a pipeline with limited stages.


On Sat, Apr 14, 2018 at 9:50 PM, Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

> A change that was made to filters.ferry for version 1.7 broke dimension
> creation. I'll fix shortly.
>
> On Sat, Apr 14, 2018, 9:34 PM Howard Butler <howard at hobu.co> wrote:
>
>>
>>
>> > On Apr 14, 2018, at 8:15 PM, Eric Robeck <erobeck at gmail.com> wrote:
>> >
>> > Thanks, everyone! I'll get back to work and stop spamming your inboxes.
>>
>> On the contrary, keep it up. Your documentation of your learning journey
>> with the tools is helping us find sticky spots that we can document,
>> illustrate, and patch to make them work better.
>>
>> If you’re spamming us, we will let you know (privately).
>>
>> Howard
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>


-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180416/a833a655/attachment.html>

From laasunde at hotmail.com  Tue Apr 17 00:27:17 2018
From: laasunde at hotmail.com (Lars)
Date: Tue, 17 Apr 2018 07:27:17 +0000
Subject: [pdal] pgpointcloud write incorrect wkb size
In-Reply-To: <CACJ51z3y2oyDNdym6K8FWxLM-3uHwEtYiP0jt=Tsm5bQtNWG3w@mail.gmail.com>
References: <HE1PR03MB13382D4407344753B69ABBF8CABC0@HE1PR03MB1338.eurprd03.prod.outlook.com>,
 <CACJ51z3y2oyDNdym6K8FWxLM-3uHwEtYiP0jt=Tsm5bQtNWG3w@mail.gmail.com>
Message-ID: <HE1PR03MB13389B05634FDAA9118F0A78CAB70@HE1PR03MB1338.eurprd03.prod.outlook.com>

Thanks for the feedback.


You are correct, PDAL does handle creation of table and inserting schema into correct table when pcid parameter is not specified in pipeline file.


Comparing the schema created by PDAL and schema found at https://github.com/pgpointcloud/pointcloud there are a few [minor] differences (namespace, double/int32, active, orientation, version).


Where is the PointCloudSchema .xsd file located? It would be convenient if the documentation https://www.pdal.io/stages/writers.pgpointcloud.html contained a link to schema file 😊


kind regards, Lars






________________________________
Fra: Andrew Bell <andrew.bell.ia at gmail.com>
Sendt: 12. april 2018 14:58
Til: Lars
Kopi: pdal at lists.osgeo.org
Emne: Re: [pdal] pgpointcloud write incorrect wkb size

I'd have to do some more work to figure out the discrepancy, but if your goal is to use PDAL to read/write to postgres, you don't need to do all the setup that you've done.  PDAL will handle this for you.  Simply point PDAL at your (empty) database and let it do the setup and writing for you.

Normally PDAL will create a schema that writes X,Y and Z as double-precision values.  You can have it write 32-bit scaled integers by providing scaling factors (see https://www.pdal.io/stages/writers.pgpointcloud.html for more info).  I think the issue is that the schema PDAL wants to use isn't the one you've created.

writers.pgpointcloud — pdal.io<https://www.pdal.io/stages/writers.pgpointcloud.html>
www.pdal.io
writers.pgpointcloud¶. The PostgreSQL Pointcloud Writer allows you to write to PostgreSQL database that have the PostgreSQL Pointcloud extension enabled. The Pointcloud extension stores point cloud data in tables that contain rows of patches.



If I have time I'll try to reproduce your steps so that I can give a more precise answer.

On Thu, Apr 12, 2018 at 6:14 AM, Lars <laasunde at hotmail.com<mailto:laasunde at hotmail.com>> wrote:

Hello

Using PDAL 1.5, PostgreSQL 9.5 and PostGIS bundle 2.3 on Windows 7.


We have followed the instructions found at https://github.com/pgpointcloud/pointcloud
(Created database, added extensions, created pcpoint and pcpatch tables).


We have inserted a schema into pointcloud_formats (samme as https://github.com/pgpointcloud/pointcloud but without Intensity).


We have successfully insert data into pcpoint table from sql shell.
INSERT INTO pcpoint(pa) VALUES(PC_MakePoint(1, ARRAY[1,2,3]));
This results in a data blob that is 17 bytes.


However using PDAL pipeline to insert data into table causes the following error;
pc_patch_uncompressed_from_wkb: wkb size and expected size does not match.


The sql log file shows that PDAL execute the following sql statement;
INSERT INTO pcpoint(pa) VALUES('0103000000........0840');
This data blob is 37 bytes and is very different to above test (17 bytes).


The pipeline script looks like this;
{
  "pipeline": [
    {
      "type": "readers.text",
      "filename": "data.txt",
      "separator": ";"
    },
    {
      "type":"filters.chipper",
      "capacity":100
    },
    {
      "type": "writers.pgpointcloud",
      "connection": "host='localhost' dbname='aaa' port='5433' user='aaa' password='aaa'",
      "table": "pcpoint",
      "pcid":"1",
      "compression": "none"
    }
  ]
}
The data.txt file looks like this;
X;Y;Z
1.00;2.00;3.00


What are we doing wrong? How can I can make PDAL pipeline produce the correct data blob that matches the schema used in db?


Thanks.


_______________________________________________
pdal mailing list
pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/pdal



--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180417/fcdd4328/attachment.html>

From laasunde at hotmail.com  Tue Apr 17 02:06:38 2018
From: laasunde at hotmail.com (Lars)
Date: Tue, 17 Apr 2018 09:06:38 +0000
Subject: [pdal] Reader text and separator
Message-ID: <HE1PR03MB1338BAADDB075E27DECB0B6DCAB70@HE1PR03MB1338.eurprd03.prod.outlook.com>

Hello again,


The documentation for readers.text says "Any single non-alphanumeric character can be used as a separator." - does this include space? [which is an non-alphanumeric character]


Ran PDAL 1.5 with pipeline using readers.text;

- using semi-colan as separator in header and data and it works.

- using space as separator in header and data and it does not works.


Viewing the PDAL source code, specifically TextReader::initalize, I see the comment "Scan string for some character not a number, space or letter.".


If space is not supported as separator, please consider updating documentation.


kind regards, Lars
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180417/abe4b4f2/attachment-0001.html>

From andrew.bell.ia at gmail.com  Tue Apr 17 03:04:49 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 17 Apr 2018 10:04:49 +0000
Subject: [pdal] Reader text and separator
In-Reply-To: <HE1PR03MB1338BAADDB075E27DECB0B6DCAB70@HE1PR03MB1338.eurprd03.prod.outlook.com>
References: <HE1PR03MB1338BAADDB075E27DECB0B6DCAB70@HE1PR03MB1338.eurprd03.prod.outlook.com>
Message-ID: <CACJ51z3ofusaLM7KJR0=Hri1VeL0BHEW0LkV2mGG9aH9g9BKMA@mail.gmail.com>

Please provide the first few lines of a file that you believe isn't being
handled as described in the documentation.

Thanks

On Tue, Apr 17, 2018, 5:06 AM Lars <laasunde at hotmail.com> wrote:

> Hello again,
>
>
> The documentation for readers.text says "Any single non-alphanumeric
> character can be used as a separator." - does this include space? [which is
> an non-alphanumeric character]
>
>
> Ran PDAL 1.5 with pipeline using readers.text;
>
> - using semi-colan as separator in header and data and it works.
>
> - using space as separator in header and data and it does not works.
>
>
> Viewing the PDAL source code, specifically TextReader::initalize, I see
> the comment "Scan string for some character not a number, space or letter.".
>
>
> If space is not supported as separator, please consider updating
> documentation.
>
>
> kind regards, Lars
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180417/c163819e/attachment.html>

From laasunde at hotmail.com  Tue Apr 17 04:03:04 2018
From: laasunde at hotmail.com (Lars)
Date: Tue, 17 Apr 2018 11:03:04 +0000
Subject: [pdal] Reader text and separator
In-Reply-To: <CACJ51z3ofusaLM7KJR0=Hri1VeL0BHEW0LkV2mGG9aH9g9BKMA@mail.gmail.com>
References: <HE1PR03MB1338BAADDB075E27DECB0B6DCAB70@HE1PR03MB1338.eurprd03.prod.outlook.com>,
 <CACJ51z3ofusaLM7KJR0=Hri1VeL0BHEW0LkV2mGG9aH9g9BKMA@mail.gmail.com>
Message-ID: <HE1PR03MB13380C20704332D557C87ACBCAB70@HE1PR03MB1338.eurprd03.prod.outlook.com>

The following data works:

X,Y,Z

1.1,2.2,3.3

4.4,5.5,6.6


The following data does not work.

X Y Z

1.1 2.2 3.3

4.4 5.5 6.6


The following error messages are displayed;

(pdal pipeline readers.text Error) Can't convert field '' to numeric value on line 2 in 'C:\bla\bla\file.txt'. Setting to 0.

(pdal pipeline readers.text Error) Can't convert field '' to numeric value on line 3 in 'C:\bla\bla\file.txt'. Setting to 0.

Appreciate any help.


kind regards, Lars

________________________________
Fra: Andrew Bell <andrew.bell.ia at gmail.com>
Sendt: 17. april 2018 12:04
Til: Lars
Kopi: pdal at lists.osgeo.org
Emne: Re: [pdal] Reader text and separator

Please provide the first few lines of a file that you believe isn't being handled as described in the documentation.

Thanks

On Tue, Apr 17, 2018, 5:06 AM Lars <laasunde at hotmail.com<mailto:laasunde at hotmail.com>> wrote:

Hello again,


The documentation for readers.text says "Any single non-alphanumeric character can be used as a separator." - does this include space? [which is an non-alphanumeric character]


Ran PDAL 1.5 with pipeline using readers.text;

- using semi-colan as separator in header and data and it works.

- using space as separator in header and data and it does not works.


Viewing the PDAL source code, specifically TextReader::initalize, I see the comment "Scan string for some character not a number, space or letter.".


If space is not supported as separator, please consider updating documentation.


kind regards, Lars

_______________________________________________
pdal mailing list
pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180417/120784ab/attachment.html>

From howard at hobu.co  Tue Apr 17 05:26:07 2018
From: howard at hobu.co (Howard Butler)
Date: Tue, 17 Apr 2018 07:26:07 -0500
Subject: [pdal] Reader text and separator
In-Reply-To: <HE1PR03MB1338BAADDB075E27DECB0B6DCAB70@HE1PR03MB1338.eurprd03.prod.outlook.com>
References: <HE1PR03MB1338BAADDB075E27DECB0B6DCAB70@HE1PR03MB1338.eurprd03.prod.outlook.com>
Message-ID: <3c12e1a3-9292-15db-a423-f0504a842228@hobu.co>



On 4/17/18 4:06 AM, Lars wrote:
> Ran PDAL 1.5 with pipeline using readers.text;
Could you try the same pipeline using PDAL 1.7.1? There were a number of
improvements in readers.text for 1.6 and 1.7. Maybe these improvements
have fixed up your issue.

Howard

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 528 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180417/38248291/attachment.sig>

From howard at hobu.co  Tue Apr 17 05:35:34 2018
From: howard at hobu.co (Howard Butler)
Date: Tue, 17 Apr 2018 07:35:34 -0500
Subject: [pdal] pgpointcloud write incorrect wkb size
In-Reply-To: <HE1PR03MB13389B05634FDAA9118F0A78CAB70@HE1PR03MB1338.eurprd03.prod.outlook.com>
References: <HE1PR03MB13382D4407344753B69ABBF8CABC0@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <CACJ51z3y2oyDNdym6K8FWxLM-3uHwEtYiP0jt=Tsm5bQtNWG3w@mail.gmail.com>
 <HE1PR03MB13389B05634FDAA9118F0A78CAB70@HE1PR03MB1338.eurprd03.prod.outlook.com>
Message-ID: <1fba02ef-e196-e324-4c99-1411d4f8f134@hobu.co>



On 4/17/18 2:27 AM, Lars wrote:
> Comparing the schema created by PDAL and schema found at https://github.com/pgpointcloud/pointcloud there are a few [minor] differences (namespace, double/int32, active, orientation, version).
Can you show us how the two are different?
> Where is the PointCloudSchema .xsd file located? It would be convenient if the documentation https://www.pdal.io/stages/writers.pgpointcloud.html contained a link to schema file 😊
https://github.com/PDAL/PDAL/blob/master/schemas/LAS.xsd Please make a
pull request to add a link to it as you suggest.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 528 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180417/05c3e2d1/attachment.sig>

From andrew.bell.ia at gmail.com  Tue Apr 17 06:34:17 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 17 Apr 2018 09:34:17 -0400
Subject: [pdal] Reader text and separator
In-Reply-To: <3c12e1a3-9292-15db-a423-f0504a842228@hobu.co>
References: <HE1PR03MB1338BAADDB075E27DECB0B6DCAB70@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <3c12e1a3-9292-15db-a423-f0504a842228@hobu.co>
Message-ID: <CACJ51z1finz_Z7=QhRjRj25_o2cayfkcAhf1SxX+2qwwP2uWKg@mail.gmail.com>

I can't recreate this on version 1.5 or the current codebase.  If you could
attach the first few lines of the actual file you are using, I could take a
look again.

On Tue, Apr 17, 2018 at 8:26 AM, Howard Butler <howard at hobu.co> wrote:

>
>
> On 4/17/18 4:06 AM, Lars wrote:
> > Ran PDAL 1.5 with pipeline using readers.text;
> Could you try the same pipeline using PDAL 1.7.1? There were a number of
> improvements in readers.text for 1.6 and 1.7. Maybe these improvements
> have fixed up your issue.
>
> Howard
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180417/8faf4ade/attachment-0001.html>

From laasunde at hotmail.com  Tue Apr 17 23:50:32 2018
From: laasunde at hotmail.com (Lars)
Date: Wed, 18 Apr 2018 06:50:32 +0000
Subject: [pdal] Reader text and separator
In-Reply-To: <3c12e1a3-9292-15db-a423-f0504a842228@hobu.co>
References: <HE1PR03MB1338BAADDB075E27DECB0B6DCAB70@HE1PR03MB1338.eurprd03.prod.outlook.com>,
 <3c12e1a3-9292-15db-a423-f0504a842228@hobu.co>
Message-ID: <HE1PR03MB133828FD87490E088CE9E132CAB60@HE1PR03MB1338.eurprd03.prod.outlook.com>

Thanks for your response.


I will look into if it is possible to upgrade to newer PDAL. Does latest OSGeo4W 64bit bundle contain latest PDAL 1.7.1?


kind regards, Lars

________________________________
Fra: pdal <pdal-bounces at lists.osgeo.org> på vegne av Howard Butler <howard at hobu.co>
Sendt: 17. april 2018 14:26
Til: pdal at lists.osgeo.org
Emne: Re: [pdal] Reader text and separator



On 4/17/18 4:06 AM, Lars wrote:
> Ran PDAL 1.5 with pipeline using readers.text;
Could you try the same pipeline using PDAL 1.7.1? There were a number of
improvements in readers.text for 1.6 and 1.7. Maybe these improvements
have fixed up your issue.

Howard

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180418/14600440/attachment.html>

From laasunde at hotmail.com  Wed Apr 18 00:02:02 2018
From: laasunde at hotmail.com (Lars)
Date: Wed, 18 Apr 2018 07:02:02 +0000
Subject: [pdal] Reader text and separator
In-Reply-To: <CACJ51z1finz_Z7=QhRjRj25_o2cayfkcAhf1SxX+2qwwP2uWKg@mail.gmail.com>
References: <HE1PR03MB1338BAADDB075E27DECB0B6DCAB70@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <3c12e1a3-9292-15db-a423-f0504a842228@hobu.co>,
 <CACJ51z1finz_Z7=QhRjRj25_o2cayfkcAhf1SxX+2qwwP2uWKg@mail.gmail.com>
Message-ID: <HE1PR03MB13380F7F4196ED23DE39E732CAB60@HE1PR03MB1338.eurprd03.prod.outlook.com>

This test is executed on Windows7 SP1 and the following commands are issued in cmd shell;


c:\PDAL_1.5\bin>pdal.exe --version
--------------------------------------------------------------------------------

pdal 1.5.0 (git-version: Release)
--------------------------------------------------------------------------------

c:\PDAL_1.5\bin>pdal pipeline --input c:\Temp\textpipe.json
(pdal pipeline readers.text Error) Can't convert field '' to numeric value on line 2 in 'C:\Temp\inputdata1.csv'.  Setting to 0.
(pdal pipeline readers.text Error) Can't convert field '' to numeric value on line 3 in 'C:\Temp\inputdata1.csv'.  Setting to 0.

c:\PDAL_1.5\bin>pdal pipeline --input c:\Temp\textpipe.json


Note: Before calling pdal pipeline the second time I updated the .json file to use inputdata2.csv and outputdata2.csv.


I have attached pipeline file, two input files and two output files. The only difference I can spot between the two input files is one uses space and the other semi-colan. The output files are not equal.


kind regards, Lars

________________________________
Fra: pdal <pdal-bounces at lists.osgeo.org> på vegne av Andrew Bell <andrew.bell.ia at gmail.com>
Sendt: 17. april 2018 15:34
Til: Howard Butler
Kopi: pdal at lists.osgeo.org
Emne: Re: [pdal] Reader text and separator

I can't recreate this on version 1.5 or the current codebase.  If you could attach the first few lines of the actual file you are using, I could take a look again.

On Tue, Apr 17, 2018 at 8:26 AM, Howard Butler <howard at hobu.co<mailto:howard at hobu.co>> wrote:


On 4/17/18 4:06 AM, Lars wrote:
> Ran PDAL 1.5 with pipeline using readers.text;
Could you try the same pipeline using PDAL 1.7.1? There were a number of
improvements in readers.text for 1.6 and 1.7. Maybe these improvements
have fixed up your issue.

Howard


_______________________________________________
pdal mailing list
pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/pdal



--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180418/5d218c44/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: inputdata1.csv
Type: application/vnd.ms-excel
Size: 33 bytes
Desc: inputdata1.csv
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180418/5d218c44/attachment.xlb>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: inputdata2.csv
Type: application/vnd.ms-excel
Size: 33 bytes
Desc: inputdata2.csv
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180418/5d218c44/attachment-0001.xlb>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: outputdata1.csv
Type: application/vnd.ms-excel
Size: 35 bytes
Desc: outputdata1.csv
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180418/5d218c44/attachment-0002.xlb>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: outputdata2.csv
Type: application/vnd.ms-excel
Size: 48 bytes
Desc: outputdata2.csv
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180418/5d218c44/attachment-0003.xlb>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: textpipe.json
Type: application/json
Size: 210 bytes
Desc: textpipe.json
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180418/5d218c44/attachment.json>

From howard at hobu.co  Wed Apr 18 03:24:40 2018
From: howard at hobu.co (Howard Butler)
Date: Wed, 18 Apr 2018 06:24:40 -0400
Subject: [pdal] Reader text and separator
In-Reply-To: <HE1PR03MB133828FD87490E088CE9E132CAB60@HE1PR03MB1338.eurprd03.prod.outlook.com>
References: <HE1PR03MB1338BAADDB075E27DECB0B6DCAB70@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <3c12e1a3-9292-15db-a423-f0504a842228@hobu.co>
 <HE1PR03MB133828FD87490E088CE9E132CAB60@HE1PR03MB1338.eurprd03.prod.outlook.com>
Message-ID: <4C189235-81C8-45C9-83E6-AA95ADC798AD@hobu.co>



> On Apr 18, 2018, at 2:50 AM, Lars <laasunde at hotmail.com> wrote:
> 
> Does latest OSGeo4W 64bit bundle contain latest PDAL 1.7.1

Yes. 

From svm at clevelandmetroparks.com  Wed Apr 18 09:29:32 2018
From: svm at clevelandmetroparks.com (Stephen V. Mather)
Date: Wed, 18 Apr 2018 16:29:32 +0000
Subject: [pdal] Problems converting CSV to PLY
Message-ID: <SN4PR0501MB3871314E628787D730BB4E13B9B60@SN4PR0501MB3871.namprd05.prod.outlook.com>

HI All,


I'm having issues converting from CSV to PLY.


### How did you install PDAL?

PDAL 1.7 installed using OSGeo4W

### What's your operating system? (Copy/paste the output of https://www.whatismybrowser.com/)

Windows 10

### What is the problem?

When I run pdal translate to convert a CSV to PLY, I get a crash.

### How can we reproduce this?

To reproduce, here are the parts and pieces:

translator.json:
{
  "pipeline":[
    {
      "type":"readers.text",
      "filename":"EC HOVNANIAN 18 - GC translated.csv"
    },
    {
      "type":"writers.ply",
      "filename":"EC HOVNANIAN 18 - GC translated.ply"
    }
  ]
}

EC HOVNANIAN 18 - GC translated.csv:
X,Y,Z,red,green,blue
498.309,742.941,857.817,255,0,0
375.538,898.159,850.729,0,255,0
316.44,888.66,852.831,0,0,255
448.914,630.781,858.101,255,255,0
411.479,813.864,871.643,0,255,255
202.193,819.215,878.784,255,0,255

Command:
pdal translate --json translator.json --input "EC HOVNANIAN 18 - GC translated.csv" --output "EC HOVNANIAN 18 - GC translated.ply"

Ooh. Plot twist: it works if I rename the input file and run as follows:
pdal translate --json translator.json --input "input.csv" --output "output.ply"



[http://sig.cmparks.net/cmp-ms-90x122.png] Stephen V. Mather
GIS Manager
(216) 635-3243 (Work)
clevelandmetroparks.com<http://www.clemetparks.com>



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180418/deaae9e1/attachment-0001.html>

From andrew.bell.ia at gmail.com  Wed Apr 18 10:45:30 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 18 Apr 2018 13:45:30 -0400
Subject: [pdal] Problems converting CSV to PLY
In-Reply-To: <SN4PR0501MB3871314E628787D730BB4E13B9B60@SN4PR0501MB3871.namprd05.prod.outlook.com>
References: <SN4PR0501MB3871314E628787D730BB4E13B9B60@SN4PR0501MB3871.namprd05.prod.outlook.com>
Message-ID: <CACJ51z1P5J2LiFmH-Z0qLNz18hBg-W1oO7Ckic4uYeZpzdRXbg@mail.gmail.com>

I can't recreate this on Windows 10 with PDAL 1.7.


On Wed, Apr 18, 2018 at 12:29 PM, Stephen V. Mather <
svm at clevelandmetroparks.com> wrote:

> HI All,
>
>
> I'm having issues converting from CSV to PLY.
>
>
> ### How did you install PDAL?
>
> PDAL 1.7 installed using OSGeo4W
>
> ### What's your operating system? (Copy/paste the output of
> https://www.whatismybrowser.com/)
>
> Windows 10
>
> ### What is the problem?
>
> When I run pdal translate to convert a CSV to PLY, I get a crash.
>
> ### How can we reproduce this?
>
> To reproduce, here are the parts and pieces:
>
> translator.json:
> {
>   "pipeline":[
>     {
>       "type":"readers.text",
>       "filename":"EC HOVNANIAN 18 - GC translated.csv"
>     },
>     {
>       "type":"writers.ply",
>       "filename":"EC HOVNANIAN 18 - GC translated.ply"
>     }
>   ]
> }
>
> EC HOVNANIAN 18 - GC translated.csv:
> X,Y,Z,red,green,blue
> 498.309,742.941,857.817,255,0,0
> 375.538,898.159,850.729,0,255,0
> 316.44,888.66,852.831,0,0,255
> 448.914,630.781,858.101,255,255,0
> 411.479,813.864,871.643,0,255,255
> 202.193,819.215,878.784,255,0,255
>
> Command:
> pdal translate --json translator.json --input "EC HOVNANIAN 18 - GC
> translated.csv" --output "EC HOVNANIAN 18 - GC translated.ply"
>
> Ooh. Plot twist: it works if I rename the input file and run as follows:
> pdal translate --json translator.json --input "input.csv" --output
> "output.ply"
>
>
>
>
> [image: http://sig.cmparks.net/cmp-ms-90x122.png] *Stephen V. Mather*
> GIS Manager
> (216) 635-3243 (Work)
> clevelandmetroparks.com <http://www.clemetparks.com>
>
>
>
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180418/fe404f8c/attachment.html>

From svm at clevelandmetroparks.com  Wed Apr 18 10:53:00 2018
From: svm at clevelandmetroparks.com (Stephen V. Mather)
Date: Wed, 18 Apr 2018 17:53:00 +0000
Subject: [pdal] Problems converting CSV to PLY
In-Reply-To: <CACJ51z1P5J2LiFmH-Z0qLNz18hBg-W1oO7Ckic4uYeZpzdRXbg@mail.gmail.com>
References: <SN4PR0501MB3871314E628787D730BB4E13B9B60@SN4PR0501MB3871.namprd05.prod.outlook.com>,
 <CACJ51z1P5J2LiFmH-Z0qLNz18hBg-W1oO7Ckic4uYeZpzdRXbg@mail.gmail.com>
Message-ID: <SN4PR0501MB387146C10584B35355D4B8B9B9B60@SN4PR0501MB3871.namprd05.prod.outlook.com>

Even with those file names?

[http://sig.cmparks.net/cmp-ms-90x122.png] Stephen V. Mather
GIS Manager
(216) 635-3243 (Work)
clevelandmetroparks.com<http://www.clemetparks.com>



________________________________
From: Andrew Bell <andrew.bell.ia at gmail.com>
Sent: Wednesday, April 18, 2018 1:45:30 PM
To: Stephen V. Mather
Cc: pdal at lists.osgeo.org
Subject: Re: [pdal] Problems converting CSV to PLY

I can't recreate this on Windows 10 with PDAL 1.7.


On Wed, Apr 18, 2018 at 12:29 PM, Stephen V. Mather <svm at clevelandmetroparks.com<mailto:svm at clevelandmetroparks.com>> wrote:

HI All,


I'm having issues converting from CSV to PLY.


### How did you install PDAL?

PDAL 1.7 installed using OSGeo4W

### What's your operating system? (Copy/paste the output of https://www.whatismybrowser.com/)

Windows 10

### What is the problem?

When I run pdal translate to convert a CSV to PLY, I get a crash.

### How can we reproduce this?

To reproduce, here are the parts and pieces:

translator.json:
{
  "pipeline":[
    {
      "type":"readers.text",
      "filename":"EC HOVNANIAN 18 - GC translated.csv"
    },
    {
      "type":"writers.ply",
      "filename":"EC HOVNANIAN 18 - GC translated.ply"
    }
  ]
}

EC HOVNANIAN 18 - GC translated.csv:
X,Y,Z,red,green,blue
498.309,742.941,857.817,255,0,0
375.538,898.159,850.729,0,255,0
316.44,888.66,852.831,0,0,255
448.914,630.781,858.101,255,255,0
411.479,813.864,871.643,0,255,255
202.193,819.215,878.784,255,0,255

Command:
pdal translate --json translator.json --input "EC HOVNANIAN 18 - GC translated.csv" --output "EC HOVNANIAN 18 - GC translated.ply"

Ooh. Plot twist: it works if I rename the input file and run as follows:
pdal translate --json translator.json --input "input.csv" --output "output.ply"




[http://sig.cmparks.net/cmp-ms-90x122.png] Stephen V. Mather
GIS Manager
(216) 635-3243 (Work)
clevelandmetroparks.com<http://www.clemetparks.com>




_______________________________________________
pdal mailing list
pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/pdal



--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180418/a83da0a1/attachment.html>

From svm at clevelandmetroparks.com  Wed Apr 18 11:11:35 2018
From: svm at clevelandmetroparks.com (Stephen V. Mather)
Date: Wed, 18 Apr 2018 18:11:35 +0000
Subject: [pdal] Problems converting CSV to PLY
In-Reply-To: <SN4PR0501MB387146C10584B35355D4B8B9B9B60@SN4PR0501MB3871.namprd05.prod.outlook.com>
References: <SN4PR0501MB3871314E628787D730BB4E13B9B60@SN4PR0501MB3871.namprd05.prod.outlook.com>,
 <CACJ51z1P5J2LiFmH-Z0qLNz18hBg-W1oO7Ckic4uYeZpzdRXbg@mail.gmail.com>,
 <SN4PR0501MB387146C10584B35355D4B8B9B9B60@SN4PR0501MB3871.namprd05.prod.outlook.com>
Message-ID: <SN4PR0501MB3871E19C53424A78A912C605B9B60@SN4PR0501MB3871.namprd05.prod.outlook.com>

Strange. Narrowing it down further, it works fine if I run it in c:\temp, but no when I run it on my network mount. But it works on other network mounts.


Hmm...

[http://sig.cmparks.net/cmp-ms-90x122.png] Stephen V. Mather
GIS Manager
(216) 635-3243 (Work)
clevelandmetroparks.com<http://www.clemetparks.com>



________________________________
From: pdal <pdal-bounces at lists.osgeo.org> on behalf of Stephen V. Mather <svm at clevelandmetroparks.com>
Sent: Wednesday, April 18, 2018 1:53:00 PM
To: Andrew Bell
Cc: pdal at lists.osgeo.org
Subject: Re: [pdal] Problems converting CSV to PLY


Even with those file names?


[http://sig.cmparks.net/cmp-ms-90x122.png] Stephen V. Mather
GIS Manager
(216) 635-3243 (Work)
clevelandmetroparks.com<http://www.clemetparks.com>



________________________________
From: Andrew Bell <andrew.bell.ia at gmail.com>
Sent: Wednesday, April 18, 2018 1:45:30 PM
To: Stephen V. Mather
Cc: pdal at lists.osgeo.org
Subject: Re: [pdal] Problems converting CSV to PLY

I can't recreate this on Windows 10 with PDAL 1.7.


On Wed, Apr 18, 2018 at 12:29 PM, Stephen V. Mather <svm at clevelandmetroparks.com<mailto:svm at clevelandmetroparks.com>> wrote:

HI All,


I'm having issues converting from CSV to PLY.


### How did you install PDAL?

PDAL 1.7 installed using OSGeo4W

### What's your operating system? (Copy/paste the output of https://www.whatismybrowser.com/)

Windows 10

### What is the problem?

When I run pdal translate to convert a CSV to PLY, I get a crash.

### How can we reproduce this?

To reproduce, here are the parts and pieces:

translator.json:
{
  "pipeline":[
    {
      "type":"readers.text",
      "filename":"EC HOVNANIAN 18 - GC translated.csv"
    },
    {
      "type":"writers.ply",
      "filename":"EC HOVNANIAN 18 - GC translated.ply"
    }
  ]
}

EC HOVNANIAN 18 - GC translated.csv:
X,Y,Z,red,green,blue
498.309,742.941,857.817,255,0,0
375.538,898.159,850.729,0,255,0
316.44,888.66,852.831,0,0,255
448.914,630.781,858.101,255,255,0
411.479,813.864,871.643,0,255,255
202.193,819.215,878.784,255,0,255

Command:
pdal translate --json translator.json --input "EC HOVNANIAN 18 - GC translated.csv" --output "EC HOVNANIAN 18 - GC translated.ply"

Ooh. Plot twist: it works if I rename the input file and run as follows:
pdal translate --json translator.json --input "input.csv" --output "output.ply"




[http://sig.cmparks.net/cmp-ms-90x122.png] Stephen V. Mather
GIS Manager
(216) 635-3243 (Work)
clevelandmetroparks.com<http://www.clemetparks.com>




_______________________________________________
pdal mailing list
pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/pdal



--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180418/94172362/attachment-0001.html>

From andrew.bell.ia at gmail.com  Wed Apr 18 11:53:26 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 18 Apr 2018 14:53:26 -0400
Subject: [pdal] Reader text and separator
In-Reply-To: <4C189235-81C8-45C9-83E6-AA95ADC798AD@hobu.co>
References: <HE1PR03MB1338BAADDB075E27DECB0B6DCAB70@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <3c12e1a3-9292-15db-a423-f0504a842228@hobu.co>
 <HE1PR03MB133828FD87490E088CE9E132CAB60@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <4C189235-81C8-45C9-83E6-AA95ADC798AD@hobu.co>
Message-ID: <CACJ51z2vLuuiCWGiLoQA_WKcaWvAwpVw2dw3zTDmXHizG2JgDQ@mail.gmail.com>

I've reproduced this issue and created the following ticket to address:
https://github.com/PDAL/PDAL/issues/1939

On Wed, Apr 18, 2018 at 6:24 AM, Howard Butler <howard at hobu.co> wrote:

>
>
> > On Apr 18, 2018, at 2:50 AM, Lars <laasunde at hotmail.com> wrote:
> >
> > Does latest OSGeo4W 64bit bundle contain latest PDAL 1.7.1
>
> Yes.
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180418/5a83c935/attachment.html>

From erobeck at gmail.com  Wed Apr 18 20:13:36 2018
From: erobeck at gmail.com (Eric Robeck)
Date: Wed, 18 Apr 2018 22:13:36 -0500
Subject: [pdal] Filters.assign: not all filters applied
In-Reply-To: <CACJ51z29q9FRhzv-ObZa5VESONhqUULuYTwrMNmMxDY_heXDmg@mail.gmail.com>
References: <CAKa5cDJLL7X6WPpjA25MRPR6wUBnuhzNOth063Umufr3wiSi5Q@mail.gmail.com>
 <CAKa5cDLSxdqavuY2+NSiAfVFHrTRqm4kQvsJGs+Ym_6NyphXQA@mail.gmail.com>
 <81E5E0CD-E62D-40A2-BCC3-03D60A1B8CA0@hobu.co>
 <CACJ51z0N5wEV-6a3kANoQbxkDZxmQy7jeeDjfBP2bY9DZVeGRA@mail.gmail.com>
 <CACJ51z29q9FRhzv-ObZa5VESONhqUULuYTwrMNmMxDY_heXDmg@mail.gmail.com>
Message-ID: <CAKa5cDL81kUk+beYgcrPdiwm2NqV6HFy65qys97yZVUjJVVBLg@mail.gmail.com>

Andrew,

I was busy using PDAL for batch exporting, so I just got back to this now.
I see my mistake- that should be '0.50'. I hadn't noticed it before because
PDAL didn't throw an error. However, when I make that the LAST assignment,
I get the same error. So this:

    {
      "type":"filters.assign",
      "assignment":"Classification[:]=0",
      "assignment":"Window[:]=12",
      "assignment":"Slope[:]=0_50"
    },

returns this:

PDAL: filters.assign: Invalid value for argument 'assignment'.

As I said before, my PDAL instance must be skipping all but the last
assignment, so it didn't throw an error until I made it the last
assignment. Even in the instance above, the Classification and Window
assignments are not made.

Even when I strip out everything but the reader, writer, filter and assign
stages (as below), PDAL still ignores the Slope value error and fails to
assign all but the Red value. I am using PDAL 1.7.1. This isn't an
impediment to my workflow, as I got around it using multiple stages with
single assignments.

Thanks for your help!

Regards,
Eric

{
  "pipeline":
  [
    {
      "filename":"C:/data/forest_park/forest_park_orig_dtm.laz",
      "type":"readers.las",
      "count":100000
    },
    {
      "type":"filters.ferry",
      "dimensions":"=>Window, =>Slope"
    },
    {
      "type":"filters.assign",
      "assignment":"Classification[:]=0",
      "assignment":"Window[:]=12",
      "assignment":"Slope[:]=0_50",
      "assignment":"GpsTime[:]=3000",
      "assignment":"Red[:]=255"
    },
    {
      "type":"writers.las",
      "minor_version":"4",
      "compression":"true",
      "extra_dims":"Window=uint8, Slope=float",
      "filename":"c:/data/forest_park/filters_assign_test.laz"
    }
  ]
}


On Mon, Apr 16, 2018 at 9:20 AM, Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

> Eric,
>
> I can't recreate the issue with the assignment problems.  I'm a little
> suspicious of your test because you should get an error with the following
> assignments:
>
>       "assignment":"Classification[:]=0",
>       "assignment":"Window[:]=12",
>       "assignment":"Slope[:]=0_50",
>       "assignment":"GpsTime[:]=3000",
>       "assignment":"Red[:]=255"
>
> That's because "0_50" isn't a valid value to assign for Slope.  When I run
> a pipeline with a similar construct, I get:
>
> $ bin/pdal pipeline test.json
> PDAL: filters.assign: Invalid value for argument 'assignment'.
>
> Please try to reproduce your issue using a pipeline with limited stages.
>
>
> On Sat, Apr 14, 2018 at 9:50 PM, Andrew Bell <andrew.bell.ia at gmail.com>
> wrote:
>
>> A change that was made to filters.ferry for version 1.7 broke dimension
>> creation. I'll fix shortly.
>>
>> On Sat, Apr 14, 2018, 9:34 PM Howard Butler <howard at hobu.co> wrote:
>>
>>>
>>>
>>> > On Apr 14, 2018, at 8:15 PM, Eric Robeck <erobeck at gmail.com> wrote:
>>> >
>>> > Thanks, everyone! I'll get back to work and stop spamming your inboxes.
>>>
>>> On the contrary, keep it up. Your documentation of your learning journey
>>> with the tools is helping us find sticky spots that we can document,
>>> illustrate, and patch to make them work better.
>>>
>>> If you’re spamming us, we will let you know (privately).
>>>
>>> Howard
>>>
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>>
>
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180418/31de99f5/attachment.html>

From laasunde at hotmail.com  Thu Apr 19 00:00:51 2018
From: laasunde at hotmail.com (Lars)
Date: Thu, 19 Apr 2018 07:00:51 +0000
Subject: [pdal] Reader text and separator
In-Reply-To: <CACJ51z2vLuuiCWGiLoQA_WKcaWvAwpVw2dw3zTDmXHizG2JgDQ@mail.gmail.com>
References: <HE1PR03MB1338BAADDB075E27DECB0B6DCAB70@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <3c12e1a3-9292-15db-a423-f0504a842228@hobu.co>
 <HE1PR03MB133828FD87490E088CE9E132CAB60@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <4C189235-81C8-45C9-83E6-AA95ADC798AD@hobu.co>,
 <CACJ51z2vLuuiCWGiLoQA_WKcaWvAwpVw2dw3zTDmXHizG2JgDQ@mail.gmail.com>
Message-ID: <HE1PR03MB133842CA7FFBC3763ABE9A7CCAB50@HE1PR03MB1338.eurprd03.prod.outlook.com>

Thank you for taking the time to help 😊

________________________________
Fra: Andrew Bell <andrew.bell.ia at gmail.com>
Sendt: 18. april 2018 20:53
Til: Howard Butler
Kopi: Lars; pdal at lists.osgeo.org
Emne: Re: [pdal] Reader text and separator

I've reproduced this issue and created the following ticket to address: https://github.com/PDAL/PDAL/issues/1939



On Wed, Apr 18, 2018 at 6:24 AM, Howard Butler <howard at hobu.co<mailto:howard at hobu.co>> wrote:


> On Apr 18, 2018, at 2:50 AM, Lars <laasunde at hotmail.com<mailto:laasunde at hotmail.com>> wrote:
>
> Does latest OSGeo4W 64bit bundle contain latest PDAL 1.7.1

Yes.
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/pdal



--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180419/a749a864/attachment.html>

From careyshan at gmail.com  Thu Apr 19 04:06:11 2018
From: careyshan at gmail.com (Shane Carey)
Date: Thu, 19 Apr 2018 12:06:11 +0100
Subject: [pdal] pdal pipeline
Message-ID: <CA+jRDxCz3swu6OO+HL0eVU4N98PD+U+Mbx2TGpPjSSvjV6-Pfg@mail.gmail.com>

Hi,

I am trying to grid up some data with PDAL nad for some of my outputs I get
the following error:



*pdal:
/home/user/software/PDAL-1.4.0-src/vendor/eigen/Eigen/src/Core/DenseCoeffsBase.h:337:
Eigen::DenseCoeffsBase<Derived, 1>::Scalar& Eigen::DenseCoeffsBase<Derived,
1>::operator()(Eigen::DenseCoeffsBase<Derived, 1>::Index,
Eigen::DenseCoeffsBase<Derived, 1>::Index) [with Derived =
Eigen::Matrix<double, -1, -1>; Eigen::DenseCoeffsBase<Derived, 1>::Scalar =
double; Eigen::DenseCoeffsBase<Derived, 1>::Index = long int]: Assertion
`row >= 0 && row < rows() && col >= 0 && col < cols()' failed.*
Any ideas of why this is and how to get around it?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180419/ac8162f3/attachment-0001.html>

From andrew.bell.ia at gmail.com  Thu Apr 19 04:23:32 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 19 Apr 2018 11:23:32 +0000
Subject: [pdal] pdal pipeline
In-Reply-To: <CA+jRDxCz3swu6OO+HL0eVU4N98PD+U+Mbx2TGpPjSSvjV6-Pfg@mail.gmail.com>
References: <CA+jRDxCz3swu6OO+HL0eVU4N98PD+U+Mbx2TGpPjSSvjV6-Pfg@mail.gmail.com>
Message-ID: <CACJ51z24eSdgD33FRzcAc4+jKPQMN-iWiUPtkwHehGNEbSdV6Q@mail.gmail.com>

Sorry, but I can't help with the information provided. To help us help you,
you should:

1) try a newer version of PDAL. Version 1.4 is old.

2) show the command and pipeline that leads to this problem.

3) indicate your OS and version.

4) say how you acquired/built your version of PDAL.

On Thu, Apr 19, 2018, 7:06 AM Shane Carey <careyshan at gmail.com> wrote:

> Hi,
>
> I am trying to grid up some data with PDAL nad for some of my outputs I
> get the following error:
>
>
>
> *pdal:
> /home/user/software/PDAL-1.4.0-src/vendor/eigen/Eigen/src/Core/DenseCoeffsBase.h:337:
> Eigen::DenseCoeffsBase<Derived, 1>::Scalar& Eigen::DenseCoeffsBase<Derived,
> 1>::operator()(Eigen::DenseCoeffsBase<Derived, 1>::Index,
> Eigen::DenseCoeffsBase<Derived, 1>::Index) [with Derived =
> Eigen::Matrix<double, -1, -1>; Eigen::DenseCoeffsBase<Derived, 1>::Scalar =
> double; Eigen::DenseCoeffsBase<Derived, 1>::Index = long int]: Assertion
> `row >= 0 && row < rows() && col >= 0 && col < cols()' failed.*
> Any ideas of why this is and how to get around it?
>
> Thanks
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180419/0bb8e4e1/attachment.html>

From careyshan at gmail.com  Thu Apr 19 07:13:17 2018
From: careyshan at gmail.com (Shane Carey)
Date: Thu, 19 Apr 2018 15:13:17 +0100
Subject: [pdal] pdal pipeline
In-Reply-To: <CACJ51z24eSdgD33FRzcAc4+jKPQMN-iWiUPtkwHehGNEbSdV6Q@mail.gmail.com>
References: <CA+jRDxCz3swu6OO+HL0eVU4N98PD+U+Mbx2TGpPjSSvjV6-Pfg@mail.gmail.com>
 <CACJ51z24eSdgD33FRzcAc4+jKPQMN-iWiUPtkwHehGNEbSdV6Q@mail.gmail.com>
Message-ID: <CA+jRDxCBrQVewNKB2+Uc5RtKDzDNHn7_5vqZeXE9vpLDAxA0Lw@mail.gmail.com>

Hi,

Thanks for your reply.

1) it works fine for some grids
2) pdal pipeline -i dtm.json and that file is as follows

{
    "pipeline":[
        "LDR120201_125342_1.LAS",
    {
        "type":"filters.pmf",
        "approximate":true,
        "max_window_size":17,
        "slope":1.0,
        "max_distance":2.5,
        "initial_distance":0.15,
        "cell_size":1,
        "extract":true,
        "classify":true
    },
    {
        "type":"writers.gdal",
        "filename":"LDR120201_125342_1.tif",
        "output_type":"mean",
        "resolution":1.0,
        "radius":1.0
    }
    ]
}

3) Linux - Ubuntu 16.04

4) Installed from source:
http://download.osgeo.org/pdal/PDAL-1.4.0-src.tar.gz

Thanks

On Thu, Apr 19, 2018 at 12:23 PM, Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

> Sorry, but I can't help with the information provided. To help us help
> you, you should:
>
> 1) try a newer version of PDAL. Version 1.4 is old.
>
> 2) show the command and pipeline that leads to this problem.
>
> 3) indicate your OS and version.
>
> 4) say how you acquired/built your version of PDAL.
>
> On Thu, Apr 19, 2018, 7:06 AM Shane Carey <careyshan at gmail.com> wrote:
>
>> Hi,
>>
>> I am trying to grid up some data with PDAL nad for some of my outputs I
>> get the following error:
>>
>>
>>
>> *pdal:
>> /home/user/software/PDAL-1.4.0-src/vendor/eigen/Eigen/src/Core/DenseCoeffsBase.h:337:
>> Eigen::DenseCoeffsBase<Derived, 1>::Scalar& Eigen::DenseCoeffsBase<Derived,
>> 1>::operator()(Eigen::DenseCoeffsBase<Derived, 1>::Index,
>> Eigen::DenseCoeffsBase<Derived, 1>::Index) [with Derived =
>> Eigen::Matrix<double, -1, -1>; Eigen::DenseCoeffsBase<Derived, 1>::Scalar =
>> double; Eigen::DenseCoeffsBase<Derived, 1>::Index = long int]: Assertion
>> `row >= 0 && row < rows() && col >= 0 && col < cols()' failed.*
>> Any ideas of why this is and how to get around it?
>>
>> Thanks
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>


-- 
Le gach dea ghui,
*Shane Carey*
*GIS and Data Solutions Consultant*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180419/139b3fab/attachment.html>

From brad.chambers at gmail.com  Thu Apr 19 07:23:03 2018
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Thu, 19 Apr 2018 14:23:03 +0000
Subject: [pdal] pdal pipeline
In-Reply-To: <CA+jRDxCBrQVewNKB2+Uc5RtKDzDNHn7_5vqZeXE9vpLDAxA0Lw@mail.gmail.com>
References: <CA+jRDxCz3swu6OO+HL0eVU4N98PD+U+Mbx2TGpPjSSvjV6-Pfg@mail.gmail.com>
 <CACJ51z24eSdgD33FRzcAc4+jKPQMN-iWiUPtkwHehGNEbSdV6Q@mail.gmail.com>
 <CA+jRDxCBrQVewNKB2+Uc5RtKDzDNHn7_5vqZeXE9vpLDAxA0Lw@mail.gmail.com>
Message-ID: <CAJyqqPyoG_eOcOpnuCH8YepmdtE3PLYfNgB=kfc9NuBsrawggQ@mail.gmail.com>

There was definitely an indexing issue in PMF that was fixed about a year
ago (
https://github.com/PDAL/PDAL/commit/f9f5e8f3bc25388667cc8684c2d7892e6ab86046#diff-4e6a684c3701f0406ca632bb86c5cbed
).

If you are building from source, why not go ahead and upgrade to our latest
release? http://download.osgeo.org/pdal/PDAL-1.7.1-src.tar.gz

Refer to the PMF docs for some updates to the parameters.
https://www.pdal.io/stages/filters.pmf.html Namely, approximate is no
longer needed. Nor are extract or classify. The points will be classified
regardless, and if you want to extract only ground points, you'll need to
add a range filter (there is an example at the link).

Brad

On Thu, Apr 19, 2018 at 10:13 AM Shane Carey <careyshan at gmail.com> wrote:

> Hi,
>
> Thanks for your reply.
>
> 1) it works fine for some grids
> 2) pdal pipeline -i dtm.json and that file is as follows
>
> {
>     "pipeline":[
>         "LDR120201_125342_1.LAS",
>     {
>         "type":"filters.pmf",
>         "approximate":true,
>         "max_window_size":17,
>         "slope":1.0,
>         "max_distance":2.5,
>         "initial_distance":0.15,
>         "cell_size":1,
>         "extract":true,
>         "classify":true
>     },
>     {
>         "type":"writers.gdal",
>         "filename":"LDR120201_125342_1.tif",
>         "output_type":"mean",
>         "resolution":1.0,
>         "radius":1.0
>     }
>     ]
> }
>
> 3) Linux - Ubuntu 16.04
>
> 4) Installed from source:
> http://download.osgeo.org/pdal/PDAL-1.4.0-src.tar.gz
>
> Thanks
>
> On Thu, Apr 19, 2018 at 12:23 PM, Andrew Bell <andrew.bell.ia at gmail.com>
> wrote:
>
>> Sorry, but I can't help with the information provided. To help us help
>> you, you should:
>>
>> 1) try a newer version of PDAL. Version 1.4 is old.
>>
>> 2) show the command and pipeline that leads to this problem.
>>
>> 3) indicate your OS and version.
>>
>> 4) say how you acquired/built your version of PDAL.
>>
>> On Thu, Apr 19, 2018, 7:06 AM Shane Carey <careyshan at gmail.com> wrote:
>>
>>> Hi,
>>>
>>> I am trying to grid up some data with PDAL nad for some of my outputs I
>>> get the following error:
>>>
>>>
>>>
>>> *pdal:
>>> /home/user/software/PDAL-1.4.0-src/vendor/eigen/Eigen/src/Core/DenseCoeffsBase.h:337:
>>> Eigen::DenseCoeffsBase<Derived, 1>::Scalar& Eigen::DenseCoeffsBase<Derived,
>>> 1>::operator()(Eigen::DenseCoeffsBase<Derived, 1>::Index,
>>> Eigen::DenseCoeffsBase<Derived, 1>::Index) [with Derived =
>>> Eigen::Matrix<double, -1, -1>; Eigen::DenseCoeffsBase<Derived, 1>::Scalar =
>>> double; Eigen::DenseCoeffsBase<Derived, 1>::Index = long int]: Assertion
>>> `row >= 0 && row < rows() && col >= 0 && col < cols()' failed.*
>>> Any ideas of why this is and how to get around it?
>>>
>>> Thanks
>>>
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>>
>
>
> --
> Le gach dea ghui,
> *Shane Carey*
> *GIS and Data Solutions Consultant*
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180419/02a17b13/attachment.html>

From andrew.bell.ia at gmail.com  Thu Apr 19 08:20:53 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 19 Apr 2018 11:20:53 -0400
Subject: [pdal] Filters.assign: not all filters applied
In-Reply-To: <CAKa5cDL81kUk+beYgcrPdiwm2NqV6HFy65qys97yZVUjJVVBLg@mail.gmail.com>
References: <CAKa5cDJLL7X6WPpjA25MRPR6wUBnuhzNOth063Umufr3wiSi5Q@mail.gmail.com>
 <CAKa5cDLSxdqavuY2+NSiAfVFHrTRqm4kQvsJGs+Ym_6NyphXQA@mail.gmail.com>
 <81E5E0CD-E62D-40A2-BCC3-03D60A1B8CA0@hobu.co>
 <CACJ51z0N5wEV-6a3kANoQbxkDZxmQy7jeeDjfBP2bY9DZVeGRA@mail.gmail.com>
 <CACJ51z29q9FRhzv-ObZa5VESONhqUULuYTwrMNmMxDY_heXDmg@mail.gmail.com>
 <CAKa5cDL81kUk+beYgcrPdiwm2NqV6HFy65qys97yZVUjJVVBLg@mail.gmail.com>
Message-ID: <CACJ51z3C9rFvWtnd5tJFjptr0BijUL7V0LS9-L_Atv=xV-+f2Q@mail.gmail.com>

On Wed, Apr 18, 2018 at 11:13 PM, Eric Robeck <erobeck at gmail.com> wrote:

> Andrew,
>
> I was busy using PDAL for batch exporting, so I just got back to this now.
> I see my mistake- that should be '0.50'. I hadn't noticed it before because
> PDAL didn't throw an error. However, when I make that the LAST assignment,
> I get the same error. So this:
>
>     {
>       "type":"filters.assign",
>       "assignment":"Classification[:]=0",
>       "assignment":"Window[:]=12",
>       "assignment":"Slope[:]=0_50"
>     },
>
> returns this:
>
> PDAL: filters.assign: Invalid value for argument 'assignment'.
>

Thanks for your persistence in helping me track this down.  This issue was
introduced when we switched from XML pipelines to JSON, which has ambiguous
handling for repeated keys.  I've opened the following issue to deal with
the problem:

https://github.com/PDAL/PDAL/issues/1941

For the time being, you can create multiple assign filters and get the same
behavior.

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180419/6776ffad/attachment-0001.html>

From careyshan at gmail.com  Fri Apr 20 02:11:15 2018
From: careyshan at gmail.com (Shane Carey)
Date: Fri, 20 Apr 2018 10:11:15 +0100
Subject: [pdal] pdal pipeline
In-Reply-To: <CAJyqqPyoG_eOcOpnuCH8YepmdtE3PLYfNgB=kfc9NuBsrawggQ@mail.gmail.com>
References: <CA+jRDxCz3swu6OO+HL0eVU4N98PD+U+Mbx2TGpPjSSvjV6-Pfg@mail.gmail.com>
 <CACJ51z24eSdgD33FRzcAc4+jKPQMN-iWiUPtkwHehGNEbSdV6Q@mail.gmail.com>
 <CA+jRDxCBrQVewNKB2+Uc5RtKDzDNHn7_5vqZeXE9vpLDAxA0Lw@mail.gmail.com>
 <CAJyqqPyoG_eOcOpnuCH8YepmdtE3PLYfNgB=kfc9NuBsrawggQ@mail.gmail.com>
Message-ID: <CA+jRDxB0OHKSM0HHJ3Pu8KLqzf+N4byHrsbibiXGFMehMFUx-g@mail.gmail.com>

Ok cool - I re-build and let you know if that fixes the issues!!

Thanks

Le gach dea ghui,
*Shane Carey*
*GIS and Data Solutions Consultant*

On Thu, Apr 19, 2018 at 3:23 PM, Bradley Chambers <brad.chambers at gmail.com>
wrote:

> There was definitely an indexing issue in PMF that was fixed about a year
> ago (https://github.com/PDAL/PDAL/commit/f9f5e8f3bc25388667cc8684c2d789
> 2e6ab86046#diff-4e6a684c3701f0406ca632bb86c5cbed).
>
> If you are building from source, why not go ahead and upgrade to our
> latest release? http://download.osgeo.org/pdal/PDAL-1.7.1-src.tar.gz
>
> Refer to the PMF docs for some updates to the parameters.
> https://www.pdal.io/stages/filters.pmf.html Namely, approximate is no
> longer needed. Nor are extract or classify. The points will be classified
> regardless, and if you want to extract only ground points, you'll need to
> add a range filter (there is an example at the link).
>
> Brad
>
> On Thu, Apr 19, 2018 at 10:13 AM Shane Carey <careyshan at gmail.com> wrote:
>
>> Hi,
>>
>> Thanks for your reply.
>>
>> 1) it works fine for some grids
>> 2) pdal pipeline -i dtm.json and that file is as follows
>>
>> {
>>     "pipeline":[
>>         "LDR120201_125342_1.LAS",
>>     {
>>         "type":"filters.pmf",
>>         "approximate":true,
>>         "max_window_size":17,
>>         "slope":1.0,
>>         "max_distance":2.5,
>>         "initial_distance":0.15,
>>         "cell_size":1,
>>         "extract":true,
>>         "classify":true
>>     },
>>     {
>>         "type":"writers.gdal",
>>         "filename":"LDR120201_125342_1.tif",
>>         "output_type":"mean",
>>         "resolution":1.0,
>>         "radius":1.0
>>     }
>>     ]
>> }
>>
>> 3) Linux - Ubuntu 16.04
>>
>> 4) Installed from source: http://download.osgeo.org/
>> pdal/PDAL-1.4.0-src.tar.gz
>>
>> Thanks
>>
>> On Thu, Apr 19, 2018 at 12:23 PM, Andrew Bell <andrew.bell.ia at gmail.com>
>> wrote:
>>
>>> Sorry, but I can't help with the information provided. To help us help
>>> you, you should:
>>>
>>> 1) try a newer version of PDAL. Version 1.4 is old.
>>>
>>> 2) show the command and pipeline that leads to this problem.
>>>
>>> 3) indicate your OS and version.
>>>
>>> 4) say how you acquired/built your version of PDAL.
>>>
>>> On Thu, Apr 19, 2018, 7:06 AM Shane Carey <careyshan at gmail.com> wrote:
>>>
>>>> Hi,
>>>>
>>>> I am trying to grid up some data with PDAL nad for some of my outputs I
>>>> get the following error:
>>>>
>>>>
>>>>
>>>> *pdal:
>>>> /home/user/software/PDAL-1.4.0-src/vendor/eigen/Eigen/src/Core/DenseCoeffsBase.h:337:
>>>> Eigen::DenseCoeffsBase<Derived, 1>::Scalar& Eigen::DenseCoeffsBase<Derived,
>>>> 1>::operator()(Eigen::DenseCoeffsBase<Derived, 1>::Index,
>>>> Eigen::DenseCoeffsBase<Derived, 1>::Index) [with Derived =
>>>> Eigen::Matrix<double, -1, -1>; Eigen::DenseCoeffsBase<Derived, 1>::Scalar =
>>>> double; Eigen::DenseCoeffsBase<Derived, 1>::Index = long int]: Assertion
>>>> `row >= 0 && row < rows() && col >= 0 && col < cols()' failed.*
>>>> Any ideas of why this is and how to get around it?
>>>>
>>>> Thanks
>>>>
>>>> _______________________________________________
>>>> pdal mailing list
>>>> pdal at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>
>>>
>>
>>
>> --
>> Le gach dea ghui,
>> *Shane Carey*
>> *GIS and Data Solutions Consultant*
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180420/6f996c08/attachment.html>

From careyshan at gmail.com  Fri Apr 20 03:37:29 2018
From: careyshan at gmail.com (Shane Carey)
Date: Fri, 20 Apr 2018 11:37:29 +0100
Subject: [pdal] pdal pipeline
In-Reply-To: <CA+jRDxB0OHKSM0HHJ3Pu8KLqzf+N4byHrsbibiXGFMehMFUx-g@mail.gmail.com>
References: <CA+jRDxCz3swu6OO+HL0eVU4N98PD+U+Mbx2TGpPjSSvjV6-Pfg@mail.gmail.com>
 <CACJ51z24eSdgD33FRzcAc4+jKPQMN-iWiUPtkwHehGNEbSdV6Q@mail.gmail.com>
 <CA+jRDxCBrQVewNKB2+Uc5RtKDzDNHn7_5vqZeXE9vpLDAxA0Lw@mail.gmail.com>
 <CAJyqqPyoG_eOcOpnuCH8YepmdtE3PLYfNgB=kfc9NuBsrawggQ@mail.gmail.com>
 <CA+jRDxB0OHKSM0HHJ3Pu8KLqzf+N4byHrsbibiXGFMehMFUx-g@mail.gmail.com>
Message-ID: <CA+jRDxBVoSPvZc6+7e7Lqcd-2D2gw9_PzEeaDRU-059OybJBfQ@mail.gmail.com>

Hi,

When I try to build from source, I get the following errors:

[ 46%] Building CXX object
plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o
<command-line>:0:15: error: ISO C++11 requires whitespace after the macro
name [-Werror]
cc1plus: all warnings being treated as errors
plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/build.make:62:
recipe for target
'plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o'
failed
make[2]: ***
[plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o]
Error 1
CMakeFiles/Makefile2:377: recipe for target
'plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/all' failed
make[1]: *** [plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/all]
Error 2
Makefile:160: recipe for target 'all' failed
make: *** [all] Error 2


Any ideas how to overcome this?

Thanks

On Fri, Apr 20, 2018 at 10:11 AM, Shane Carey <careyshan at gmail.com> wrote:

> Ok cool - I re-build and let you know if that fixes the issues!!
>
> Thanks
>
> Le gach dea ghui,
> *Shane Carey*
> *GIS and Data Solutions Consultant*
>
> On Thu, Apr 19, 2018 at 3:23 PM, Bradley Chambers <brad.chambers at gmail.com
> > wrote:
>
>> There was definitely an indexing issue in PMF that was fixed about a year
>> ago (https://github.com/PDAL/PDAL/commit/f9f5e8f3bc25388667cc868
>> 4c2d7892e6ab86046#diff-4e6a684c3701f0406ca632bb86c5cbed).
>>
>> If you are building from source, why not go ahead and upgrade to our
>> latest release? http://download.osgeo.org/pdal/PDAL-1.7.1-src.tar.gz
>>
>> Refer to the PMF docs for some updates to the parameters.
>> https://www.pdal.io/stages/filters.pmf.html Namely, approximate is no
>> longer needed. Nor are extract or classify. The points will be classified
>> regardless, and if you want to extract only ground points, you'll need to
>> add a range filter (there is an example at the link).
>>
>> Brad
>>
>> On Thu, Apr 19, 2018 at 10:13 AM Shane Carey <careyshan at gmail.com> wrote:
>>
>>> Hi,
>>>
>>> Thanks for your reply.
>>>
>>> 1) it works fine for some grids
>>> 2) pdal pipeline -i dtm.json and that file is as follows
>>>
>>> {
>>>     "pipeline":[
>>>         "LDR120201_125342_1.LAS",
>>>     {
>>>         "type":"filters.pmf",
>>>         "approximate":true,
>>>         "max_window_size":17,
>>>         "slope":1.0,
>>>         "max_distance":2.5,
>>>         "initial_distance":0.15,
>>>         "cell_size":1,
>>>         "extract":true,
>>>         "classify":true
>>>     },
>>>     {
>>>         "type":"writers.gdal",
>>>         "filename":"LDR120201_125342_1.tif",
>>>         "output_type":"mean",
>>>         "resolution":1.0,
>>>         "radius":1.0
>>>     }
>>>     ]
>>> }
>>>
>>> 3) Linux - Ubuntu 16.04
>>>
>>> 4) Installed from source: http://download.osgeo.org/pdal
>>> /PDAL-1.4.0-src.tar.gz
>>>
>>> Thanks
>>>
>>> On Thu, Apr 19, 2018 at 12:23 PM, Andrew Bell <andrew.bell.ia at gmail.com>
>>> wrote:
>>>
>>>> Sorry, but I can't help with the information provided. To help us help
>>>> you, you should:
>>>>
>>>> 1) try a newer version of PDAL. Version 1.4 is old.
>>>>
>>>> 2) show the command and pipeline that leads to this problem.
>>>>
>>>> 3) indicate your OS and version.
>>>>
>>>> 4) say how you acquired/built your version of PDAL.
>>>>
>>>> On Thu, Apr 19, 2018, 7:06 AM Shane Carey <careyshan at gmail.com> wrote:
>>>>
>>>>> Hi,
>>>>>
>>>>> I am trying to grid up some data with PDAL nad for some of my outputs
>>>>> I get the following error:
>>>>>
>>>>>
>>>>>
>>>>> *pdal:
>>>>> /home/user/software/PDAL-1.4.0-src/vendor/eigen/Eigen/src/Core/DenseCoeffsBase.h:337:
>>>>> Eigen::DenseCoeffsBase<Derived, 1>::Scalar& Eigen::DenseCoeffsBase<Derived,
>>>>> 1>::operator()(Eigen::DenseCoeffsBase<Derived, 1>::Index,
>>>>> Eigen::DenseCoeffsBase<Derived, 1>::Index) [with Derived =
>>>>> Eigen::Matrix<double, -1, -1>; Eigen::DenseCoeffsBase<Derived, 1>::Scalar =
>>>>> double; Eigen::DenseCoeffsBase<Derived, 1>::Index = long int]: Assertion
>>>>> `row >= 0 && row < rows() && col >= 0 && col < cols()' failed.*
>>>>> Any ideas of why this is and how to get around it?
>>>>>
>>>>> Thanks
>>>>>
>>>>> _______________________________________________
>>>>> pdal mailing list
>>>>> pdal at lists.osgeo.org
>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>
>>>>
>>>
>>>
>>> --
>>> Le gach dea ghui,
>>> *Shane Carey*
>>> *GIS and Data Solutions Consultant*
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>>
>


-- 
Le gach dea ghui,
*Shane Carey*
*GIS and Data Solutions Consultant*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180420/79658f69/attachment-0001.html>

From brad.chambers at gmail.com  Fri Apr 20 03:45:13 2018
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Fri, 20 Apr 2018 10:45:13 +0000
Subject: [pdal] pdal pipeline
In-Reply-To: <CA+jRDxBVoSPvZc6+7e7Lqcd-2D2gw9_PzEeaDRU-059OybJBfQ@mail.gmail.com>
References: <CA+jRDxCz3swu6OO+HL0eVU4N98PD+U+Mbx2TGpPjSSvjV6-Pfg@mail.gmail.com>
 <CACJ51z24eSdgD33FRzcAc4+jKPQMN-iWiUPtkwHehGNEbSdV6Q@mail.gmail.com>
 <CA+jRDxCBrQVewNKB2+Uc5RtKDzDNHn7_5vqZeXE9vpLDAxA0Lw@mail.gmail.com>
 <CAJyqqPyoG_eOcOpnuCH8YepmdtE3PLYfNgB=kfc9NuBsrawggQ@mail.gmail.com>
 <CA+jRDxB0OHKSM0HHJ3Pu8KLqzf+N4byHrsbibiXGFMehMFUx-g@mail.gmail.com>
 <CA+jRDxBVoSPvZc6+7e7Lqcd-2D2gw9_PzEeaDRU-059OybJBfQ@mail.gmail.com>
Message-ID: <CAJyqqPzUeswJvH7mEBk2W=xrGcmdzroLRGK9BgjFAVePdOzkfQ@mail.gmail.com>

I feel like we've seen this before, but don't recall the fix off the top of
my head. Unless you are absolutely sure you need the PCL plugin, you could
try turning it off with `-DBUILD_PLUGIN_PCL=OFF`. (Most of the original PCL
bits and pieces are now available natively in PDAL without the PCL
dependency.)

On Fri, Apr 20, 2018 at 6:37 AM Shane Carey <careyshan at gmail.com> wrote:

> Hi,
>
> When I try to build from source, I get the following errors:
>
> [ 46%] Building CXX object
> plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o
> <command-line>:0:15: error: ISO C++11 requires whitespace after the macro
> name [-Werror]
> cc1plus: all warnings being treated as errors
> plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/build.make:62:
> recipe for target
> 'plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o'
> failed
> make[2]: ***
> [plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o]
> Error 1
> CMakeFiles/Makefile2:377: recipe for target
> 'plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/all' failed
> make[1]: *** [plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/all]
> Error 2
> Makefile:160: recipe for target 'all' failed
> make: *** [all] Error 2
>
>
> Any ideas how to overcome this?
>
> Thanks
>
> On Fri, Apr 20, 2018 at 10:11 AM, Shane Carey <careyshan at gmail.com> wrote:
>
>> Ok cool - I re-build and let you know if that fixes the issues!!
>>
>> Thanks
>>
>> Le gach dea ghui,
>> *Shane Carey*
>> *GIS and Data Solutions Consultant*
>>
>> On Thu, Apr 19, 2018 at 3:23 PM, Bradley Chambers <
>> brad.chambers at gmail.com> wrote:
>>
>>> There was definitely an indexing issue in PMF that was fixed about a
>>> year ago (
>>> https://github.com/PDAL/PDAL/commit/f9f5e8f3bc25388667cc8684c2d7892e6ab86046#diff-4e6a684c3701f0406ca632bb86c5cbed
>>> ).
>>>
>>> If you are building from source, why not go ahead and upgrade to our
>>> latest release? http://download.osgeo.org/pdal/PDAL-1.7.1-src.tar.gz
>>>
>>> Refer to the PMF docs for some updates to the parameters.
>>> https://www.pdal.io/stages/filters.pmf.html Namely, approximate is no
>>> longer needed. Nor are extract or classify. The points will be classified
>>> regardless, and if you want to extract only ground points, you'll need to
>>> add a range filter (there is an example at the link).
>>>
>>> Brad
>>>
>>> On Thu, Apr 19, 2018 at 10:13 AM Shane Carey <careyshan at gmail.com>
>>> wrote:
>>>
>>>> Hi,
>>>>
>>>> Thanks for your reply.
>>>>
>>>> 1) it works fine for some grids
>>>> 2) pdal pipeline -i dtm.json and that file is as follows
>>>>
>>>> {
>>>>     "pipeline":[
>>>>         "LDR120201_125342_1.LAS",
>>>>     {
>>>>         "type":"filters.pmf",
>>>>         "approximate":true,
>>>>         "max_window_size":17,
>>>>         "slope":1.0,
>>>>         "max_distance":2.5,
>>>>         "initial_distance":0.15,
>>>>         "cell_size":1,
>>>>         "extract":true,
>>>>         "classify":true
>>>>     },
>>>>     {
>>>>         "type":"writers.gdal",
>>>>         "filename":"LDR120201_125342_1.tif",
>>>>         "output_type":"mean",
>>>>         "resolution":1.0,
>>>>         "radius":1.0
>>>>     }
>>>>     ]
>>>> }
>>>>
>>>> 3) Linux - Ubuntu 16.04
>>>>
>>>> 4) Installed from source:
>>>> http://download.osgeo.org/pdal/PDAL-1.4.0-src.tar.gz
>>>>
>>>> Thanks
>>>>
>>>> On Thu, Apr 19, 2018 at 12:23 PM, Andrew Bell <andrew.bell.ia at gmail.com
>>>> > wrote:
>>>>
>>>>> Sorry, but I can't help with the information provided. To help us help
>>>>> you, you should:
>>>>>
>>>>> 1) try a newer version of PDAL. Version 1.4 is old.
>>>>>
>>>>> 2) show the command and pipeline that leads to this problem.
>>>>>
>>>>> 3) indicate your OS and version.
>>>>>
>>>>> 4) say how you acquired/built your version of PDAL.
>>>>>
>>>>> On Thu, Apr 19, 2018, 7:06 AM Shane Carey <careyshan at gmail.com> wrote:
>>>>>
>>>>>> Hi,
>>>>>>
>>>>>> I am trying to grid up some data with PDAL nad for some of my outputs
>>>>>> I get the following error:
>>>>>>
>>>>>>
>>>>>>
>>>>>> *pdal:
>>>>>> /home/user/software/PDAL-1.4.0-src/vendor/eigen/Eigen/src/Core/DenseCoeffsBase.h:337:
>>>>>> Eigen::DenseCoeffsBase<Derived, 1>::Scalar& Eigen::DenseCoeffsBase<Derived,
>>>>>> 1>::operator()(Eigen::DenseCoeffsBase<Derived, 1>::Index,
>>>>>> Eigen::DenseCoeffsBase<Derived, 1>::Index) [with Derived =
>>>>>> Eigen::Matrix<double, -1, -1>; Eigen::DenseCoeffsBase<Derived, 1>::Scalar =
>>>>>> double; Eigen::DenseCoeffsBase<Derived, 1>::Index = long int]: Assertion
>>>>>> `row >= 0 && row < rows() && col >= 0 && col < cols()' failed.*
>>>>>> Any ideas of why this is and how to get around it?
>>>>>>
>>>>>> Thanks
>>>>>>
>>>>>> _______________________________________________
>>>>>> pdal mailing list
>>>>>> pdal at lists.osgeo.org
>>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>>
>>>>>
>>>>
>>>>
>>>> --
>>>> Le gach dea ghui,
>>>> *Shane Carey*
>>>> *GIS and Data Solutions Consultant*
>>>> _______________________________________________
>>>> pdal mailing list
>>>> pdal at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>
>>>
>>
>
>
> --
> Le gach dea ghui,
> *Shane Carey*
> *GIS and Data Solutions Consultant*
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180420/23e1bc7c/attachment.html>

From careyshan at gmail.com  Fri Apr 20 04:01:44 2018
From: careyshan at gmail.com (Shane Carey)
Date: Fri, 20 Apr 2018 12:01:44 +0100
Subject: [pdal] pdal pipeline
In-Reply-To: <CAJyqqPzUeswJvH7mEBk2W=xrGcmdzroLRGK9BgjFAVePdOzkfQ@mail.gmail.com>
References: <CA+jRDxCz3swu6OO+HL0eVU4N98PD+U+Mbx2TGpPjSSvjV6-Pfg@mail.gmail.com>
 <CACJ51z24eSdgD33FRzcAc4+jKPQMN-iWiUPtkwHehGNEbSdV6Q@mail.gmail.com>
 <CA+jRDxCBrQVewNKB2+Uc5RtKDzDNHn7_5vqZeXE9vpLDAxA0Lw@mail.gmail.com>
 <CAJyqqPyoG_eOcOpnuCH8YepmdtE3PLYfNgB=kfc9NuBsrawggQ@mail.gmail.com>
 <CA+jRDxB0OHKSM0HHJ3Pu8KLqzf+N4byHrsbibiXGFMehMFUx-g@mail.gmail.com>
 <CA+jRDxBVoSPvZc6+7e7Lqcd-2D2gw9_PzEeaDRU-059OybJBfQ@mail.gmail.com>
 <CAJyqqPzUeswJvH7mEBk2W=xrGcmdzroLRGK9BgjFAVePdOzkfQ@mail.gmail.com>
Message-ID: <CA+jRDxBvzhb84q1UyW0dWifKMEKcmR_dbZ3tyUaYQeTU3tgf4Q@mail.gmail.com>

Yes, I do that. And then I get this:
PDAL: filters.pmf: Unexpected argument 'approximate'.


On Fri, Apr 20, 2018 at 11:45 AM, Bradley Chambers <brad.chambers at gmail.com>
wrote:

> I feel like we've seen this before, but don't recall the fix off the top
> of my head. Unless you are absolutely sure you need the PCL plugin, you
> could try turning it off with `-DBUILD_PLUGIN_PCL=OFF`. (Most of the
> original PCL bits and pieces are now available natively in PDAL without the
> PCL dependency.)
>
> On Fri, Apr 20, 2018 at 6:37 AM Shane Carey <careyshan at gmail.com> wrote:
>
>> Hi,
>>
>> When I try to build from source, I get the following errors:
>>
>> [ 46%] Building CXX object plugins/pcl/CMakeFiles/pdal_
>> plugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o
>> <command-line>:0:15: error: ISO C++11 requires whitespace after the macro
>> name [-Werror]
>> cc1plus: all warnings being treated as errors
>> plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/build.make:62:
>> recipe for target 'plugins/pcl/CMakeFiles/pdal_
>> plugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o' failed
>> make[2]: *** [plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o]
>> Error 1
>> CMakeFiles/Makefile2:377: recipe for target 'plugins/pcl/CMakeFiles/pdal_
>> plugin_filter_voxelgrid.dir/all' failed
>> make[1]: *** [plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/all]
>> Error 2
>> Makefile:160: recipe for target 'all' failed
>> make: *** [all] Error 2
>>
>>
>> Any ideas how to overcome this?
>>
>> Thanks
>>
>> On Fri, Apr 20, 2018 at 10:11 AM, Shane Carey <careyshan at gmail.com>
>> wrote:
>>
>>> Ok cool - I re-build and let you know if that fixes the issues!!
>>>
>>> Thanks
>>>
>>> Le gach dea ghui,
>>> *Shane Carey*
>>> *GIS and Data Solutions Consultant*
>>>
>>> On Thu, Apr 19, 2018 at 3:23 PM, Bradley Chambers <
>>> brad.chambers at gmail.com> wrote:
>>>
>>>> There was definitely an indexing issue in PMF that was fixed about a
>>>> year ago (https://github.com/PDAL/PDAL/commit/
>>>> f9f5e8f3bc25388667cc8684c2d7892e6ab86046#diff-
>>>> 4e6a684c3701f0406ca632bb86c5cbed).
>>>>
>>>> If you are building from source, why not go ahead and upgrade to our
>>>> latest release? http://download.osgeo.org/pdal/PDAL-1.7.1-src.tar.gz
>>>>
>>>> Refer to the PMF docs for some updates to the parameters.
>>>> https://www.pdal.io/stages/filters.pmf.html Namely, approximate is no
>>>> longer needed. Nor are extract or classify. The points will be classified
>>>> regardless, and if you want to extract only ground points, you'll need to
>>>> add a range filter (there is an example at the link).
>>>>
>>>> Brad
>>>>
>>>> On Thu, Apr 19, 2018 at 10:13 AM Shane Carey <careyshan at gmail.com>
>>>> wrote:
>>>>
>>>>> Hi,
>>>>>
>>>>> Thanks for your reply.
>>>>>
>>>>> 1) it works fine for some grids
>>>>> 2) pdal pipeline -i dtm.json and that file is as follows
>>>>>
>>>>> {
>>>>>     "pipeline":[
>>>>>         "LDR120201_125342_1.LAS",
>>>>>     {
>>>>>         "type":"filters.pmf",
>>>>>         "approximate":true,
>>>>>         "max_window_size":17,
>>>>>         "slope":1.0,
>>>>>         "max_distance":2.5,
>>>>>         "initial_distance":0.15,
>>>>>         "cell_size":1,
>>>>>         "extract":true,
>>>>>         "classify":true
>>>>>     },
>>>>>     {
>>>>>         "type":"writers.gdal",
>>>>>         "filename":"LDR120201_125342_1.tif",
>>>>>         "output_type":"mean",
>>>>>         "resolution":1.0,
>>>>>         "radius":1.0
>>>>>     }
>>>>>     ]
>>>>> }
>>>>>
>>>>> 3) Linux - Ubuntu 16.04
>>>>>
>>>>> 4) Installed from source: http://download.osgeo.org/
>>>>> pdal/PDAL-1.4.0-src.tar.gz
>>>>>
>>>>> Thanks
>>>>>
>>>>> On Thu, Apr 19, 2018 at 12:23 PM, Andrew Bell <
>>>>> andrew.bell.ia at gmail.com> wrote:
>>>>>
>>>>>> Sorry, but I can't help with the information provided. To help us
>>>>>> help you, you should:
>>>>>>
>>>>>> 1) try a newer version of PDAL. Version 1.4 is old.
>>>>>>
>>>>>> 2) show the command and pipeline that leads to this problem.
>>>>>>
>>>>>> 3) indicate your OS and version.
>>>>>>
>>>>>> 4) say how you acquired/built your version of PDAL.
>>>>>>
>>>>>> On Thu, Apr 19, 2018, 7:06 AM Shane Carey <careyshan at gmail.com>
>>>>>> wrote:
>>>>>>
>>>>>>> Hi,
>>>>>>>
>>>>>>> I am trying to grid up some data with PDAL nad for some of my
>>>>>>> outputs I get the following error:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> *pdal:
>>>>>>> /home/user/software/PDAL-1.4.0-src/vendor/eigen/Eigen/src/Core/DenseCoeffsBase.h:337:
>>>>>>> Eigen::DenseCoeffsBase<Derived, 1>::Scalar& Eigen::DenseCoeffsBase<Derived,
>>>>>>> 1>::operator()(Eigen::DenseCoeffsBase<Derived, 1>::Index,
>>>>>>> Eigen::DenseCoeffsBase<Derived, 1>::Index) [with Derived =
>>>>>>> Eigen::Matrix<double, -1, -1>; Eigen::DenseCoeffsBase<Derived, 1>::Scalar =
>>>>>>> double; Eigen::DenseCoeffsBase<Derived, 1>::Index = long int]: Assertion
>>>>>>> `row >= 0 && row < rows() && col >= 0 && col < cols()' failed.*
>>>>>>> Any ideas of why this is and how to get around it?
>>>>>>>
>>>>>>> Thanks
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> pdal mailing list
>>>>>>> pdal at lists.osgeo.org
>>>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Le gach dea ghui,
>>>>> *Shane Carey*
>>>>> *GIS and Data Solutions Consultant*
>>>>> _______________________________________________
>>>>> pdal mailing list
>>>>> pdal at lists.osgeo.org
>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>
>>>>
>>>
>>
>>
>> --
>> Le gach dea ghui,
>> *Shane Carey*
>> *GIS and Data Solutions Consultant*
>>
>


-- 
Le gach dea ghui,
*Shane Carey*
*GIS and Data Solutions Consultant*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180420/e00856e6/attachment-0001.html>

From brad.chambers at gmail.com  Fri Apr 20 04:03:06 2018
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Fri, 20 Apr 2018 11:03:06 +0000
Subject: [pdal] pdal pipeline
In-Reply-To: <CA+jRDxBvzhb84q1UyW0dWifKMEKcmR_dbZ3tyUaYQeTU3tgf4Q@mail.gmail.com>
References: <CA+jRDxCz3swu6OO+HL0eVU4N98PD+U+Mbx2TGpPjSSvjV6-Pfg@mail.gmail.com>
 <CACJ51z24eSdgD33FRzcAc4+jKPQMN-iWiUPtkwHehGNEbSdV6Q@mail.gmail.com>
 <CA+jRDxCBrQVewNKB2+Uc5RtKDzDNHn7_5vqZeXE9vpLDAxA0Lw@mail.gmail.com>
 <CAJyqqPyoG_eOcOpnuCH8YepmdtE3PLYfNgB=kfc9NuBsrawggQ@mail.gmail.com>
 <CA+jRDxB0OHKSM0HHJ3Pu8KLqzf+N4byHrsbibiXGFMehMFUx-g@mail.gmail.com>
 <CA+jRDxBVoSPvZc6+7e7Lqcd-2D2gw9_PzEeaDRU-059OybJBfQ@mail.gmail.com>
 <CAJyqqPzUeswJvH7mEBk2W=xrGcmdzroLRGK9BgjFAVePdOzkfQ@mail.gmail.com>
 <CA+jRDxBvzhb84q1UyW0dWifKMEKcmR_dbZ3tyUaYQeTU3tgf4Q@mail.gmail.com>
Message-ID: <CAJyqqPxYzT1HnJQwC8J-j4isHzmGFqJOR-_jGumELjGq0=OmGw@mail.gmail.com>

Remember that I mentioned that the options have changed though. Approximate
is no longer needed.

On Fri, Apr 20, 2018, 7:01 AM Shane Carey <careyshan at gmail.com> wrote:

> Yes, I do that. And then I get this:
> PDAL: filters.pmf: Unexpected argument 'approximate'.
>
>
> On Fri, Apr 20, 2018 at 11:45 AM, Bradley Chambers <
> brad.chambers at gmail.com> wrote:
>
>> I feel like we've seen this before, but don't recall the fix off the top
>> of my head. Unless you are absolutely sure you need the PCL plugin, you
>> could try turning it off with `-DBUILD_PLUGIN_PCL=OFF`. (Most of the
>> original PCL bits and pieces are now available natively in PDAL without the
>> PCL dependency.)
>>
>> On Fri, Apr 20, 2018 at 6:37 AM Shane Carey <careyshan at gmail.com> wrote:
>>
>>> Hi,
>>>
>>> When I try to build from source, I get the following errors:
>>>
>>> [ 46%] Building CXX object
>>> plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o
>>> <command-line>:0:15: error: ISO C++11 requires whitespace after the
>>> macro name [-Werror]
>>> cc1plus: all warnings being treated as errors
>>> plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/build.make:62:
>>> recipe for target
>>> 'plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o'
>>> failed
>>> make[2]: ***
>>> [plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o]
>>> Error 1
>>> CMakeFiles/Makefile2:377: recipe for target
>>> 'plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/all' failed
>>> make[1]: ***
>>> [plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/all] Error 2
>>> Makefile:160: recipe for target 'all' failed
>>> make: *** [all] Error 2
>>>
>>>
>>> Any ideas how to overcome this?
>>>
>>> Thanks
>>>
>>> On Fri, Apr 20, 2018 at 10:11 AM, Shane Carey <careyshan at gmail.com>
>>> wrote:
>>>
>>>> Ok cool - I re-build and let you know if that fixes the issues!!
>>>>
>>>> Thanks
>>>>
>>>> Le gach dea ghui,
>>>> *Shane Carey*
>>>> *GIS and Data Solutions Consultant*
>>>>
>>>> On Thu, Apr 19, 2018 at 3:23 PM, Bradley Chambers <
>>>> brad.chambers at gmail.com> wrote:
>>>>
>>>>> There was definitely an indexing issue in PMF that was fixed about a
>>>>> year ago (
>>>>> https://github.com/PDAL/PDAL/commit/f9f5e8f3bc25388667cc8684c2d7892e6ab86046#diff-4e6a684c3701f0406ca632bb86c5cbed
>>>>> ).
>>>>>
>>>>> If you are building from source, why not go ahead and upgrade to our
>>>>> latest release? http://download.osgeo.org/pdal/PDAL-1.7.1-src.tar.gz
>>>>>
>>>>> Refer to the PMF docs for some updates to the parameters.
>>>>> https://www.pdal.io/stages/filters.pmf.html Namely, approximate is no
>>>>> longer needed. Nor are extract or classify. The points will be classified
>>>>> regardless, and if you want to extract only ground points, you'll need to
>>>>> add a range filter (there is an example at the link).
>>>>>
>>>>> Brad
>>>>>
>>>>> On Thu, Apr 19, 2018 at 10:13 AM Shane Carey <careyshan at gmail.com>
>>>>> wrote:
>>>>>
>>>>>> Hi,
>>>>>>
>>>>>> Thanks for your reply.
>>>>>>
>>>>>> 1) it works fine for some grids
>>>>>> 2) pdal pipeline -i dtm.json and that file is as follows
>>>>>>
>>>>>> {
>>>>>>     "pipeline":[
>>>>>>         "LDR120201_125342_1.LAS",
>>>>>>     {
>>>>>>         "type":"filters.pmf",
>>>>>>         "approximate":true,
>>>>>>         "max_window_size":17,
>>>>>>         "slope":1.0,
>>>>>>         "max_distance":2.5,
>>>>>>         "initial_distance":0.15,
>>>>>>         "cell_size":1,
>>>>>>         "extract":true,
>>>>>>         "classify":true
>>>>>>     },
>>>>>>     {
>>>>>>         "type":"writers.gdal",
>>>>>>         "filename":"LDR120201_125342_1.tif",
>>>>>>         "output_type":"mean",
>>>>>>         "resolution":1.0,
>>>>>>         "radius":1.0
>>>>>>     }
>>>>>>     ]
>>>>>> }
>>>>>>
>>>>>> 3) Linux - Ubuntu 16.04
>>>>>>
>>>>>> 4) Installed from source:
>>>>>> http://download.osgeo.org/pdal/PDAL-1.4.0-src.tar.gz
>>>>>>
>>>>>> Thanks
>>>>>>
>>>>>> On Thu, Apr 19, 2018 at 12:23 PM, Andrew Bell <
>>>>>> andrew.bell.ia at gmail.com> wrote:
>>>>>>
>>>>>>> Sorry, but I can't help with the information provided. To help us
>>>>>>> help you, you should:
>>>>>>>
>>>>>>> 1) try a newer version of PDAL. Version 1.4 is old.
>>>>>>>
>>>>>>> 2) show the command and pipeline that leads to this problem.
>>>>>>>
>>>>>>> 3) indicate your OS and version.
>>>>>>>
>>>>>>> 4) say how you acquired/built your version of PDAL.
>>>>>>>
>>>>>>> On Thu, Apr 19, 2018, 7:06 AM Shane Carey <careyshan at gmail.com>
>>>>>>> wrote:
>>>>>>>
>>>>>>>> Hi,
>>>>>>>>
>>>>>>>> I am trying to grid up some data with PDAL nad for some of my
>>>>>>>> outputs I get the following error:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> *pdal:
>>>>>>>> /home/user/software/PDAL-1.4.0-src/vendor/eigen/Eigen/src/Core/DenseCoeffsBase.h:337:
>>>>>>>> Eigen::DenseCoeffsBase<Derived, 1>::Scalar& Eigen::DenseCoeffsBase<Derived,
>>>>>>>> 1>::operator()(Eigen::DenseCoeffsBase<Derived, 1>::Index,
>>>>>>>> Eigen::DenseCoeffsBase<Derived, 1>::Index) [with Derived =
>>>>>>>> Eigen::Matrix<double, -1, -1>; Eigen::DenseCoeffsBase<Derived, 1>::Scalar =
>>>>>>>> double; Eigen::DenseCoeffsBase<Derived, 1>::Index = long int]: Assertion
>>>>>>>> `row >= 0 && row < rows() && col >= 0 && col < cols()' failed.*
>>>>>>>> Any ideas of why this is and how to get around it?
>>>>>>>>
>>>>>>>> Thanks
>>>>>>>>
>>>>>>>> _______________________________________________
>>>>>>>> pdal mailing list
>>>>>>>> pdal at lists.osgeo.org
>>>>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Le gach dea ghui,
>>>>>> *Shane Carey*
>>>>>> *GIS and Data Solutions Consultant*
>>>>>> _______________________________________________
>>>>>> pdal mailing list
>>>>>> pdal at lists.osgeo.org
>>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>>
>>>>>
>>>>
>>>
>>>
>>> --
>>> Le gach dea ghui,
>>> *Shane Carey*
>>> *GIS and Data Solutions Consultant*
>>>
>>
>
>
> --
> Le gach dea ghui,
> *Shane Carey*
> *GIS and Data Solutions Consultant*
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180420/cfb71644/attachment.html>

From careyshan at gmail.com  Fri Apr 20 04:10:59 2018
From: careyshan at gmail.com (Shane Carey)
Date: Fri, 20 Apr 2018 12:10:59 +0100
Subject: [pdal] pdal pipeline
In-Reply-To: <CAJyqqPxYzT1HnJQwC8J-j4isHzmGFqJOR-_jGumELjGq0=OmGw@mail.gmail.com>
References: <CA+jRDxCz3swu6OO+HL0eVU4N98PD+U+Mbx2TGpPjSSvjV6-Pfg@mail.gmail.com>
 <CACJ51z24eSdgD33FRzcAc4+jKPQMN-iWiUPtkwHehGNEbSdV6Q@mail.gmail.com>
 <CA+jRDxCBrQVewNKB2+Uc5RtKDzDNHn7_5vqZeXE9vpLDAxA0Lw@mail.gmail.com>
 <CAJyqqPyoG_eOcOpnuCH8YepmdtE3PLYfNgB=kfc9NuBsrawggQ@mail.gmail.com>
 <CA+jRDxB0OHKSM0HHJ3Pu8KLqzf+N4byHrsbibiXGFMehMFUx-g@mail.gmail.com>
 <CA+jRDxBVoSPvZc6+7e7Lqcd-2D2gw9_PzEeaDRU-059OybJBfQ@mail.gmail.com>
 <CAJyqqPzUeswJvH7mEBk2W=xrGcmdzroLRGK9BgjFAVePdOzkfQ@mail.gmail.com>
 <CA+jRDxBvzhb84q1UyW0dWifKMEKcmR_dbZ3tyUaYQeTU3tgf4Q@mail.gmail.com>
 <CAJyqqPxYzT1HnJQwC8J-j4isHzmGFqJOR-_jGumELjGq0=OmGw@mail.gmail.com>
Message-ID: <CA+jRDxD1vhNut48_n7Gnn+w0ArnbK5-FjAzvjEsrN5Q1-ZgPtQ@mail.gmail.com>

Bingo - seems to do the trick - its still running here so hopefully I dont
get any errors!!

Thanks for all your help. Pdal is absolutely brilliant!!
Thanks

On Fri, Apr 20, 2018 at 12:03 PM, Bradley Chambers <brad.chambers at gmail.com>
wrote:

> Remember that I mentioned that the options have changed though.
> Approximate is no longer needed.
>
>
> On Fri, Apr 20, 2018, 7:01 AM Shane Carey <careyshan at gmail.com> wrote:
>
>> Yes, I do that. And then I get this:
>> PDAL: filters.pmf: Unexpected argument 'approximate'.
>>
>>
>> On Fri, Apr 20, 2018 at 11:45 AM, Bradley Chambers <
>> brad.chambers at gmail.com> wrote:
>>
>>> I feel like we've seen this before, but don't recall the fix off the top
>>> of my head. Unless you are absolutely sure you need the PCL plugin, you
>>> could try turning it off with `-DBUILD_PLUGIN_PCL=OFF`. (Most of the
>>> original PCL bits and pieces are now available natively in PDAL without the
>>> PCL dependency.)
>>>
>>> On Fri, Apr 20, 2018 at 6:37 AM Shane Carey <careyshan at gmail.com> wrote:
>>>
>>>> Hi,
>>>>
>>>> When I try to build from source, I get the following errors:
>>>>
>>>> [ 46%] Building CXX object plugins/pcl/CMakeFiles/pdal_
>>>> plugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o
>>>> <command-line>:0:15: error: ISO C++11 requires whitespace after the
>>>> macro name [-Werror]
>>>> cc1plus: all warnings being treated as errors
>>>> plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/build.make:62:
>>>> recipe for target 'plugins/pcl/CMakeFiles/pdal_
>>>> plugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o' failed
>>>> make[2]: *** [plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o]
>>>> Error 1
>>>> CMakeFiles/Makefile2:377: recipe for target
>>>> 'plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/all' failed
>>>> make[1]: *** [plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/all]
>>>> Error 2
>>>> Makefile:160: recipe for target 'all' failed
>>>> make: *** [all] Error 2
>>>>
>>>>
>>>> Any ideas how to overcome this?
>>>>
>>>> Thanks
>>>>
>>>> On Fri, Apr 20, 2018 at 10:11 AM, Shane Carey <careyshan at gmail.com>
>>>> wrote:
>>>>
>>>>> Ok cool - I re-build and let you know if that fixes the issues!!
>>>>>
>>>>> Thanks
>>>>>
>>>>> Le gach dea ghui,
>>>>> *Shane Carey*
>>>>> *GIS and Data Solutions Consultant*
>>>>>
>>>>> On Thu, Apr 19, 2018 at 3:23 PM, Bradley Chambers <
>>>>> brad.chambers at gmail.com> wrote:
>>>>>
>>>>>> There was definitely an indexing issue in PMF that was fixed about a
>>>>>> year ago (https://github.com/PDAL/PDAL/commit/
>>>>>> f9f5e8f3bc25388667cc8684c2d7892e6ab86046#diff-
>>>>>> 4e6a684c3701f0406ca632bb86c5cbed).
>>>>>>
>>>>>> If you are building from source, why not go ahead and upgrade to our
>>>>>> latest release? http://download.osgeo.org/pdal/PDAL-1.7.1-src.tar.gz
>>>>>>
>>>>>> Refer to the PMF docs for some updates to the parameters.
>>>>>> https://www.pdal.io/stages/filters.pmf.html Namely, approximate is
>>>>>> no longer needed. Nor are extract or classify. The points will be
>>>>>> classified regardless, and if you want to extract only ground points,
>>>>>> you'll need to add a range filter (there is an example at the link).
>>>>>>
>>>>>> Brad
>>>>>>
>>>>>> On Thu, Apr 19, 2018 at 10:13 AM Shane Carey <careyshan at gmail.com>
>>>>>> wrote:
>>>>>>
>>>>>>> Hi,
>>>>>>>
>>>>>>> Thanks for your reply.
>>>>>>>
>>>>>>> 1) it works fine for some grids
>>>>>>> 2) pdal pipeline -i dtm.json and that file is as follows
>>>>>>>
>>>>>>> {
>>>>>>>     "pipeline":[
>>>>>>>         "LDR120201_125342_1.LAS",
>>>>>>>     {
>>>>>>>         "type":"filters.pmf",
>>>>>>>         "approximate":true,
>>>>>>>         "max_window_size":17,
>>>>>>>         "slope":1.0,
>>>>>>>         "max_distance":2.5,
>>>>>>>         "initial_distance":0.15,
>>>>>>>         "cell_size":1,
>>>>>>>         "extract":true,
>>>>>>>         "classify":true
>>>>>>>     },
>>>>>>>     {
>>>>>>>         "type":"writers.gdal",
>>>>>>>         "filename":"LDR120201_125342_1.tif",
>>>>>>>         "output_type":"mean",
>>>>>>>         "resolution":1.0,
>>>>>>>         "radius":1.0
>>>>>>>     }
>>>>>>>     ]
>>>>>>> }
>>>>>>>
>>>>>>> 3) Linux - Ubuntu 16.04
>>>>>>>
>>>>>>> 4) Installed from source: http://download.osgeo.org/
>>>>>>> pdal/PDAL-1.4.0-src.tar.gz
>>>>>>>
>>>>>>> Thanks
>>>>>>>
>>>>>>> On Thu, Apr 19, 2018 at 12:23 PM, Andrew Bell <
>>>>>>> andrew.bell.ia at gmail.com> wrote:
>>>>>>>
>>>>>>>> Sorry, but I can't help with the information provided. To help us
>>>>>>>> help you, you should:
>>>>>>>>
>>>>>>>> 1) try a newer version of PDAL. Version 1.4 is old.
>>>>>>>>
>>>>>>>> 2) show the command and pipeline that leads to this problem.
>>>>>>>>
>>>>>>>> 3) indicate your OS and version.
>>>>>>>>
>>>>>>>> 4) say how you acquired/built your version of PDAL.
>>>>>>>>
>>>>>>>> On Thu, Apr 19, 2018, 7:06 AM Shane Carey <careyshan at gmail.com>
>>>>>>>> wrote:
>>>>>>>>
>>>>>>>>> Hi,
>>>>>>>>>
>>>>>>>>> I am trying to grid up some data with PDAL nad for some of my
>>>>>>>>> outputs I get the following error:
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>> *pdal:
>>>>>>>>> /home/user/software/PDAL-1.4.0-src/vendor/eigen/Eigen/src/Core/DenseCoeffsBase.h:337:
>>>>>>>>> Eigen::DenseCoeffsBase<Derived, 1>::Scalar& Eigen::DenseCoeffsBase<Derived,
>>>>>>>>> 1>::operator()(Eigen::DenseCoeffsBase<Derived, 1>::Index,
>>>>>>>>> Eigen::DenseCoeffsBase<Derived, 1>::Index) [with Derived =
>>>>>>>>> Eigen::Matrix<double, -1, -1>; Eigen::DenseCoeffsBase<Derived, 1>::Scalar =
>>>>>>>>> double; Eigen::DenseCoeffsBase<Derived, 1>::Index = long int]: Assertion
>>>>>>>>> `row >= 0 && row < rows() && col >= 0 && col < cols()' failed.*
>>>>>>>>> Any ideas of why this is and how to get around it?
>>>>>>>>>
>>>>>>>>> Thanks
>>>>>>>>>
>>>>>>>>> _______________________________________________
>>>>>>>>> pdal mailing list
>>>>>>>>> pdal at lists.osgeo.org
>>>>>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> --
>>>>>>> Le gach dea ghui,
>>>>>>> *Shane Carey*
>>>>>>> *GIS and Data Solutions Consultant*
>>>>>>> _______________________________________________
>>>>>>> pdal mailing list
>>>>>>> pdal at lists.osgeo.org
>>>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>>>
>>>>>>
>>>>>
>>>>
>>>>
>>>> --
>>>> Le gach dea ghui,
>>>> *Shane Carey*
>>>> *GIS and Data Solutions Consultant*
>>>>
>>>
>>
>>
>> --
>> Le gach dea ghui,
>> *Shane Carey*
>> *GIS and Data Solutions Consultant*
>>
>


-- 
Le gach dea ghui,
*Shane Carey*
*GIS and Data Solutions Consultant*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180420/25a43725/attachment-0001.html>

From careyshan at gmail.com  Fri Apr 20 05:09:54 2018
From: careyshan at gmail.com (Shane Carey)
Date: Fri, 20 Apr 2018 13:09:54 +0100
Subject: [pdal] pdal pipeline
In-Reply-To: <CA+jRDxD1vhNut48_n7Gnn+w0ArnbK5-FjAzvjEsrN5Q1-ZgPtQ@mail.gmail.com>
References: <CA+jRDxCz3swu6OO+HL0eVU4N98PD+U+Mbx2TGpPjSSvjV6-Pfg@mail.gmail.com>
 <CACJ51z24eSdgD33FRzcAc4+jKPQMN-iWiUPtkwHehGNEbSdV6Q@mail.gmail.com>
 <CA+jRDxCBrQVewNKB2+Uc5RtKDzDNHn7_5vqZeXE9vpLDAxA0Lw@mail.gmail.com>
 <CAJyqqPyoG_eOcOpnuCH8YepmdtE3PLYfNgB=kfc9NuBsrawggQ@mail.gmail.com>
 <CA+jRDxB0OHKSM0HHJ3Pu8KLqzf+N4byHrsbibiXGFMehMFUx-g@mail.gmail.com>
 <CA+jRDxBVoSPvZc6+7e7Lqcd-2D2gw9_PzEeaDRU-059OybJBfQ@mail.gmail.com>
 <CAJyqqPzUeswJvH7mEBk2W=xrGcmdzroLRGK9BgjFAVePdOzkfQ@mail.gmail.com>
 <CA+jRDxBvzhb84q1UyW0dWifKMEKcmR_dbZ3tyUaYQeTU3tgf4Q@mail.gmail.com>
 <CAJyqqPxYzT1HnJQwC8J-j4isHzmGFqJOR-_jGumELjGq0=OmGw@mail.gmail.com>
 <CA+jRDxD1vhNut48_n7Gnn+w0ArnbK5-FjAzvjEsrN5Q1-ZgPtQ@mail.gmail.com>
Message-ID: <CA+jRDxD=VsuGO1NrZbM-JRbfZwV9RMP6WZChOZ4QjOq+k3T3MQ@mail.gmail.com>

Working great - thanks :-)

Le gach dea ghui,
*Shane Carey*
*GIS and Data Solutions Consultant*

On Fri, Apr 20, 2018 at 12:10 PM, Shane Carey <careyshan at gmail.com> wrote:

> Bingo - seems to do the trick - its still running here so hopefully I dont
> get any errors!!
>
> Thanks for all your help. Pdal is absolutely brilliant!!
> Thanks
>
> On Fri, Apr 20, 2018 at 12:03 PM, Bradley Chambers <
> brad.chambers at gmail.com> wrote:
>
>> Remember that I mentioned that the options have changed though.
>> Approximate is no longer needed.
>>
>>
>> On Fri, Apr 20, 2018, 7:01 AM Shane Carey <careyshan at gmail.com> wrote:
>>
>>> Yes, I do that. And then I get this:
>>> PDAL: filters.pmf: Unexpected argument 'approximate'.
>>>
>>>
>>> On Fri, Apr 20, 2018 at 11:45 AM, Bradley Chambers <
>>> brad.chambers at gmail.com> wrote:
>>>
>>>> I feel like we've seen this before, but don't recall the fix off the
>>>> top of my head. Unless you are absolutely sure you need the PCL plugin, you
>>>> could try turning it off with `-DBUILD_PLUGIN_PCL=OFF`. (Most of the
>>>> original PCL bits and pieces are now available natively in PDAL without the
>>>> PCL dependency.)
>>>>
>>>> On Fri, Apr 20, 2018 at 6:37 AM Shane Carey <careyshan at gmail.com>
>>>> wrote:
>>>>
>>>>> Hi,
>>>>>
>>>>> When I try to build from source, I get the following errors:
>>>>>
>>>>> [ 46%] Building CXX object plugins/pcl/CMakeFiles/pdal_pl
>>>>> ugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o
>>>>> <command-line>:0:15: error: ISO C++11 requires whitespace after the
>>>>> macro name [-Werror]
>>>>> cc1plus: all warnings being treated as errors
>>>>> plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/build.make:62:
>>>>> recipe for target 'plugins/pcl/CMakeFiles/pdal_p
>>>>> lugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o' failed
>>>>> make[2]: *** [plugins/pcl/CMakeFiles/pdal_p
>>>>> lugin_filter_voxelgrid.dir/filters/VoxelGridFilter.cpp.o] Error 1
>>>>> CMakeFiles/Makefile2:377: recipe for target
>>>>> 'plugins/pcl/CMakeFiles/pdal_plugin_filter_voxelgrid.dir/all' failed
>>>>> make[1]: *** [plugins/pcl/CMakeFiles/pdal_p
>>>>> lugin_filter_voxelgrid.dir/all] Error 2
>>>>> Makefile:160: recipe for target 'all' failed
>>>>> make: *** [all] Error 2
>>>>>
>>>>>
>>>>> Any ideas how to overcome this?
>>>>>
>>>>> Thanks
>>>>>
>>>>> On Fri, Apr 20, 2018 at 10:11 AM, Shane Carey <careyshan at gmail.com>
>>>>> wrote:
>>>>>
>>>>>> Ok cool - I re-build and let you know if that fixes the issues!!
>>>>>>
>>>>>> Thanks
>>>>>>
>>>>>> Le gach dea ghui,
>>>>>> *Shane Carey*
>>>>>> *GIS and Data Solutions Consultant*
>>>>>>
>>>>>> On Thu, Apr 19, 2018 at 3:23 PM, Bradley Chambers <
>>>>>> brad.chambers at gmail.com> wrote:
>>>>>>
>>>>>>> There was definitely an indexing issue in PMF that was fixed about a
>>>>>>> year ago (https://github.com/PDAL/PDAL/
>>>>>>> commit/f9f5e8f3bc25388667cc8684c2d7892e6ab86046#diff-4e6a684
>>>>>>> c3701f0406ca632bb86c5cbed).
>>>>>>>
>>>>>>> If you are building from source, why not go ahead and upgrade to our
>>>>>>> latest release? http://download.osgeo.org/pdal/PDAL-1.7.1-src.tar.gz
>>>>>>>
>>>>>>> Refer to the PMF docs for some updates to the parameters.
>>>>>>> https://www.pdal.io/stages/filters.pmf.html Namely, approximate is
>>>>>>> no longer needed. Nor are extract or classify. The points will be
>>>>>>> classified regardless, and if you want to extract only ground points,
>>>>>>> you'll need to add a range filter (there is an example at the link).
>>>>>>>
>>>>>>> Brad
>>>>>>>
>>>>>>> On Thu, Apr 19, 2018 at 10:13 AM Shane Carey <careyshan at gmail.com>
>>>>>>> wrote:
>>>>>>>
>>>>>>>> Hi,
>>>>>>>>
>>>>>>>> Thanks for your reply.
>>>>>>>>
>>>>>>>> 1) it works fine for some grids
>>>>>>>> 2) pdal pipeline -i dtm.json and that file is as follows
>>>>>>>>
>>>>>>>> {
>>>>>>>>     "pipeline":[
>>>>>>>>         "LDR120201_125342_1.LAS",
>>>>>>>>     {
>>>>>>>>         "type":"filters.pmf",
>>>>>>>>         "approximate":true,
>>>>>>>>         "max_window_size":17,
>>>>>>>>         "slope":1.0,
>>>>>>>>         "max_distance":2.5,
>>>>>>>>         "initial_distance":0.15,
>>>>>>>>         "cell_size":1,
>>>>>>>>         "extract":true,
>>>>>>>>         "classify":true
>>>>>>>>     },
>>>>>>>>     {
>>>>>>>>         "type":"writers.gdal",
>>>>>>>>         "filename":"LDR120201_125342_1.tif",
>>>>>>>>         "output_type":"mean",
>>>>>>>>         "resolution":1.0,
>>>>>>>>         "radius":1.0
>>>>>>>>     }
>>>>>>>>     ]
>>>>>>>> }
>>>>>>>>
>>>>>>>> 3) Linux - Ubuntu 16.04
>>>>>>>>
>>>>>>>> 4) Installed from source: http://download.osgeo.org/pdal
>>>>>>>> /PDAL-1.4.0-src.tar.gz
>>>>>>>>
>>>>>>>> Thanks
>>>>>>>>
>>>>>>>> On Thu, Apr 19, 2018 at 12:23 PM, Andrew Bell <
>>>>>>>> andrew.bell.ia at gmail.com> wrote:
>>>>>>>>
>>>>>>>>> Sorry, but I can't help with the information provided. To help us
>>>>>>>>> help you, you should:
>>>>>>>>>
>>>>>>>>> 1) try a newer version of PDAL. Version 1.4 is old.
>>>>>>>>>
>>>>>>>>> 2) show the command and pipeline that leads to this problem.
>>>>>>>>>
>>>>>>>>> 3) indicate your OS and version.
>>>>>>>>>
>>>>>>>>> 4) say how you acquired/built your version of PDAL.
>>>>>>>>>
>>>>>>>>> On Thu, Apr 19, 2018, 7:06 AM Shane Carey <careyshan at gmail.com>
>>>>>>>>> wrote:
>>>>>>>>>
>>>>>>>>>> Hi,
>>>>>>>>>>
>>>>>>>>>> I am trying to grid up some data with PDAL nad for some of my
>>>>>>>>>> outputs I get the following error:
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>>
>>>>>>>>>> *pdal:
>>>>>>>>>> /home/user/software/PDAL-1.4.0-src/vendor/eigen/Eigen/src/Core/DenseCoeffsBase.h:337:
>>>>>>>>>> Eigen::DenseCoeffsBase<Derived, 1>::Scalar& Eigen::DenseCoeffsBase<Derived,
>>>>>>>>>> 1>::operator()(Eigen::DenseCoeffsBase<Derived, 1>::Index,
>>>>>>>>>> Eigen::DenseCoeffsBase<Derived, 1>::Index) [with Derived =
>>>>>>>>>> Eigen::Matrix<double, -1, -1>; Eigen::DenseCoeffsBase<Derived, 1>::Scalar =
>>>>>>>>>> double; Eigen::DenseCoeffsBase<Derived, 1>::Index = long int]: Assertion
>>>>>>>>>> `row >= 0 && row < rows() && col >= 0 && col < cols()' failed.*
>>>>>>>>>> Any ideas of why this is and how to get around it?
>>>>>>>>>>
>>>>>>>>>> Thanks
>>>>>>>>>>
>>>>>>>>>> _______________________________________________
>>>>>>>>>> pdal mailing list
>>>>>>>>>> pdal at lists.osgeo.org
>>>>>>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> --
>>>>>>>> Le gach dea ghui,
>>>>>>>> *Shane Carey*
>>>>>>>> *GIS and Data Solutions Consultant*
>>>>>>>> _______________________________________________
>>>>>>>> pdal mailing list
>>>>>>>> pdal at lists.osgeo.org
>>>>>>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>>>>>>
>>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Le gach dea ghui,
>>>>> *Shane Carey*
>>>>> *GIS and Data Solutions Consultant*
>>>>>
>>>>
>>>
>>>
>>> --
>>> Le gach dea ghui,
>>> *Shane Carey*
>>> *GIS and Data Solutions Consultant*
>>>
>>
>
>
> --
> Le gach dea ghui,
> *Shane Carey*
> *GIS and Data Solutions Consultant*
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180420/4f171f0f/attachment.html>

From laasunde at hotmail.com  Mon Apr 23 04:57:49 2018
From: laasunde at hotmail.com (Lars)
Date: Mon, 23 Apr 2018 11:57:49 +0000
Subject: [pdal] PDAL Windows debug configuration
Message-ID: <HE1PR03MB133865B276C039019817F241CA890@HE1PR03MB1338.eurprd03.prod.outlook.com>

Hello

Does 'Building under Windows' support building 'Debug' configuration (64 bit)?

We get the following compiler error under debug config;

pdal_kazhdan.vcxproj -> C:\temp\xyz\lib\Debug\pdal_kazhdan.lib
jsoncpp.lib(json_value.cpp.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in DimBuilder.obj
jsoncpp.lib(json_value.cpp.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match value 'MDd_DynamicDebug' in DimBuilder.obj
jsoncpp.lib(json_reader.cpp.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in DimBuilder.obj
jsoncpp.lib(json_reader.cpp.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match value 'MDd_DynamicDebug' in DimBuilder.obj
jsoncpp.lib(json_writer.cpp.obj) : error LNK2038: mismatch detected for '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in DimBuilder.obj
jsoncpp.lib(json_writer.cpp.obj) : error LNK2038: mismatch detected for 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match value 'MDd_DynamicDebug' in DimBuilder.obj
Creating library C:/work/pdal/debug_171mod/lib/Debug/dimbuilder.lib and object C:/work/pdal/debug_171mod/lib/Debug/dimbuilder.exp

We are using Windows 10, Visual Studio 2015 Ultimate and have installed OSGeo4W (64 bit). Using Building 'Release' configuration works perfectly. We have checked out remotes/origin/issue-1939 branch if that matters.

Using the following CMake command;
cmake -G "Visual Studio 14 Win64" -T v140,host=x64 -DCMAKE_INSTALL_PREFIX=C:\work\xyz -DCMAKE_BUILD_TYPE=Debug -DBUILD_PLUGIN_PGPOINTCLOUD=ON c:\work\xyz\src

Do I need to manually download all 3rd party components and build them for debug in order for this to work?

Two minor question
- At what point are feature-branches merged back into master branch?
- Does PDAL have a fixed release iterval?

kind regards,
Lars

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180423/f30f4e88/attachment.html>

From andrew.bell.ia at gmail.com  Mon Apr 23 06:18:21 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 23 Apr 2018 09:18:21 -0400
Subject: [pdal] PDAL Windows debug configuration
In-Reply-To: <HE1PR03MB133865B276C039019817F241CA890@HE1PR03MB1338.eurprd03.prod.outlook.com>
References: <HE1PR03MB133865B276C039019817F241CA890@HE1PR03MB1338.eurprd03.prod.outlook.com>
Message-ID: <CACJ51z3VL-SsCL1nemH1qAcYPnhzNBxnOQ+S1UWaj2AGR-dUbQ@mail.gmail.com>

On Mon, Apr 23, 2018 at 7:57 AM, Lars <laasunde at hotmail.com> wrote:

> Hello
>
> Does 'Building under Windows' support building 'Debug' configuration (64
> bit)?
>
> We get the following compiler error under debug config;
>
> pdal_kazhdan.vcxproj -> C:\temp\xyz\lib\Debug\pdal_kazhdan.lib
> jsoncpp.lib(json_value.cpp.obj) : error LNK2038: mismatch detected for
> '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in DimBuilder.obj
> jsoncpp.lib(json_value.cpp.obj) : error LNK2038: mismatch detected for
> 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match value
> 'MDd_DynamicDebug' in DimBuilder.obj
>
...

I really don't understand what would be going on here.  Something seems
quite mixed up.  The kazhdan library has no reference to jsoncpp as far as
I can tell and nothing should be linking in DimBuilder.obj.  Perhaps it's
just the output that's confused/misleading?

What I think is happening is that you have no jsoncpp library built in
debug mode.  If you remove jsoncpp (or hide it away somewhere), PDAL should
build its own internal version with the correct compiler options.  But this
may not be what's wrong as it's hard to say without the actual command
that's causing an error.

Have you cleaned all the output from some previous build?

Do I need to manually download all 3rd party components and build them for
> debug in order for this to work?
>

I don't know for sure, but it may be the case.  The Windows library
compatibility issues aren't fun.


> Two minor question
> - At what point are feature-branches merged back into master branch?
>

There's no schedule.  Often we wait for review.


> - Does PDAL have a fixed release iterval?
>

Not at this time, though we try to have releases on a fairly regular basis.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180423/44de9094/attachment.html>

From howard at hobu.co  Mon Apr 23 06:42:29 2018
From: howard at hobu.co (Howard Butler)
Date: Mon, 23 Apr 2018 08:42:29 -0500
Subject: [pdal] PDAL Windows debug configuration
In-Reply-To: <CACJ51z3VL-SsCL1nemH1qAcYPnhzNBxnOQ+S1UWaj2AGR-dUbQ@mail.gmail.com>
References: <HE1PR03MB133865B276C039019817F241CA890@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <CACJ51z3VL-SsCL1nemH1qAcYPnhzNBxnOQ+S1UWaj2AGR-dUbQ@mail.gmail.com>
Message-ID: <21219d13-733d-50d6-6bce-d9c15ef5d2d6@hobu.co>



On 4/23/18 8:18 AM, Andrew Bell wrote:
> On Mon, Apr 23, 2018 at 7:57 AM, Lars <laasunde at hotmail.com> wrote:
>
>> Hello
>>
>> Does 'Building under Windows' support building 'Debug' configuration (64
>> bit)?
Congratulations on being the first to attempt it as far as we know! More
seriously, you are wading into an alligator pond that no one has walked
across yet. We will be happy to merge any items you find along the way.
>>
>> We get the following compiler error under debug config;
>>
>> pdal_kazhdan.vcxproj -> C:\temp\xyz\lib\Debug\pdal_kazhdan.lib
>> jsoncpp.lib(json_value.cpp.obj) : error LNK2038: mismatch detected for
>> '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in DimBuilder.obj
>> jsoncpp.lib(json_value.cpp.obj) : error LNK2038: mismatch detected for
>> 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match value
>> 'MDd_DynamicDebug' in DimBuilder.obj
>>
> ...
>
> I really don't understand what would be going on here.  Something seems
> quite mixed up.  The kazhdan library has no reference to jsoncpp as far as
> I can tell and nothing should be linking in DimBuilder.obj.  Perhaps it's
> just the output that's confused/misleading?
>
> What I think is happening is that you have no jsoncpp library built in
> debug mode.  If you remove jsoncpp (or hide it away somewhere), PDAL should
> build its own internal version with the correct compiler options.  But this
> may not be what's wrong as it's hard to say without the actual command
> that's causing an error.
Presumably there is /MT vs /MTd confusion in PDAL's sub-libraries. I
think there will need to be some additional cmake configuration
modification so that the right library type definition makes it down to
these PDAL sub-libraries. I agree with Andrew. PDAL built on the OSGeo4W
stack uses the external OSGeo4W jsoncpp, but the error looks like the
internal embedded one. Something is mixed up.

> Have you cleaned all the output from some previous build?
>
> Do I need to manually download all 3rd party components and build them for
>> debug in order for this to work?
>>
> I don't know for sure, but it may be the case.  The Windows library
> compatibility issues aren't fun.
The OSGeo4W builds on AppVeyor are built with packages from OSGeo4W and
configuration in appveyor.yml and ./scripts/ci/appveyor. These files are
the best source of a known configuration. We only build Release or
RelWithDebInfo builds. I attempted a full Debug build once and started
running into the same issues you did. After seeing all the yaks lining
up for shearing, I ran off.

>> Two minor question
>> - At what point are feature-branches merged back into master branch?
>>
> There's no schedule.  Often we wait for review.
That said master is active development until approximately one month
before release. We are working to get a document together with our
release tic toc and schedule approach on the website in the Project
section by the 1.7.2 release. Watch
https://www.pdal.io/project/index.html for more.
>> - Does PDAL have a fixed release iterval?
>>
> Not at this time, though we try to have releases on a fairly regular basis.
>
We aim for three to four major releases per year, with maintenance
releases starting with 1.7.x coming as needed. Our next maintenance
release will be 1.7.2 in mid-May, which will be cut from the
1.7-maintenance branch. We try to be careful to only merge bug fixes to
the -maintenance branch.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 528 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180423/cc5da032/attachment.sig>

From laasunde at hotmail.com  Tue Apr 24 02:26:01 2018
From: laasunde at hotmail.com (Lars)
Date: Tue, 24 Apr 2018 09:26:01 +0000
Subject: [pdal] PDAL Windows debug configuration
In-Reply-To: <21219d13-733d-50d6-6bce-d9c15ef5d2d6@hobu.co>
References: <HE1PR03MB133865B276C039019817F241CA890@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <CACJ51z3VL-SsCL1nemH1qAcYPnhzNBxnOQ+S1UWaj2AGR-dUbQ@mail.gmail.com>,
 <21219d13-733d-50d6-6bce-d9c15ef5d2d6@hobu.co>
Message-ID: <HE1PR03MB1338F95F91644BC195CDDBBFCA880@HE1PR03MB1338.eurprd03.prod.outlook.com>

The linker error is produced by the 'dimbuilder' component. I have attached the linker command and error messages to this email.

It appears to me that OSGeo4W distribution only include "Release" built of all libraries. When building PDAL with "Release" configuration everything works fine but when building PDAL with "Debug" configuration the linking fails due to library mismatch. As far as I know it is not possible to mix "Release" and "Debug" libraries when running or building an application.

Does OSGeo4W provide "Debug" configuration of all libraries?

kind regards, Lars


________________________________
Fra: pdal <pdal-bounces at lists.osgeo.org> på vegne av Howard Butler <howard at hobu.co>
Sendt: 23. april 2018 15:42
Kopi: pdal at lists.osgeo.org
Emne: Re: [pdal] PDAL Windows debug configuration



On 4/23/18 8:18 AM, Andrew Bell wrote:
> On Mon, Apr 23, 2018 at 7:57 AM, Lars <laasunde at hotmail.com> wrote:
>
>> Hello
>>
>> Does 'Building under Windows' support building 'Debug' configuration (64
>> bit)?
Congratulations on being the first to attempt it as far as we know! More
seriously, you are wading into an alligator pond that no one has walked
across yet. We will be happy to merge any items you find along the way.
>>
>> We get the following compiler error under debug config;
>>
>> pdal_kazhdan.vcxproj -> C:\temp\xyz\lib\Debug\pdal_kazhdan.lib
>> jsoncpp.lib(json_value.cpp.obj) : error LNK2038: mismatch detected for
>> '_ITERATOR_DEBUG_LEVEL': value '0' doesn't match value '2' in DimBuilder.obj
>> jsoncpp.lib(json_value.cpp.obj) : error LNK2038: mismatch detected for
>> 'RuntimeLibrary': value 'MD_DynamicRelease' doesn't match value
>> 'MDd_DynamicDebug' in DimBuilder.obj
>>
> ...
>
> I really don't understand what would be going on here.  Something seems
> quite mixed up.  The kazhdan library has no reference to jsoncpp as far as
> I can tell and nothing should be linking in DimBuilder.obj.  Perhaps it's
> just the output that's confused/misleading?
>
> What I think is happening is that you have no jsoncpp library built in
> debug mode.  If you remove jsoncpp (or hide it away somewhere), PDAL should
> build its own internal version with the correct compiler options.  But this
> may not be what's wrong as it's hard to say without the actual command
> that's causing an error.
Presumably there is /MT vs /MTd confusion in PDAL's sub-libraries. I
think there will need to be some additional cmake configuration
modification so that the right library type definition makes it down to
these PDAL sub-libraries. I agree with Andrew. PDAL built on the OSGeo4W
stack uses the external OSGeo4W jsoncpp, but the error looks like the
internal embedded one. Something is mixed up.

> Have you cleaned all the output from some previous build?
>
> Do I need to manually download all 3rd party components and build them for
>> debug in order for this to work?
>>
> I don't know for sure, but it may be the case.  The Windows library
> compatibility issues aren't fun.
The OSGeo4W builds on AppVeyor are built with packages from OSGeo4W and
configuration in appveyor.yml and ./scripts/ci/appveyor. These files are
the best source of a known configuration. We only build Release or
RelWithDebInfo builds. I attempted a full Debug build once and started
running into the same issues you did. After seeing all the yaks lining
up for shearing, I ran off.

>> Two minor question
>> - At what point are feature-branches merged back into master branch?
>>
> There's no schedule.  Often we wait for review.
That said master is active development until approximately one month
before release. We are working to get a document together with our
release tic toc and schedule approach on the website in the Project
section by the 1.7.2 release. Watch
https://www.pdal.io/project/index.html for more.
>> - Does PDAL have a fixed release iterval?
>>
> Not at this time, though we try to have releases on a fairly regular basis.
>
We aim for three to four major releases per year, with maintenance
releases starting with 1.7.x coming as needed. Our next maintenance
release will be 1.7.2 in mid-May, which will be cut from the
1.7-maintenance branch. We try to be careful to only merge bug fixes to
the -maintenance branch.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180424/dfd3dc88/attachment.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: msbuild.txt
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180424/dfd3dc88/attachment.txt>

From howard at hobu.co  Tue Apr 24 07:23:01 2018
From: howard at hobu.co (Howard Butler)
Date: Tue, 24 Apr 2018 09:23:01 -0500
Subject: [pdal] PDAL Windows debug configuration
In-Reply-To: <HE1PR03MB1338F95F91644BC195CDDBBFCA880@HE1PR03MB1338.eurprd03.prod.outlook.com>
References: <HE1PR03MB133865B276C039019817F241CA890@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <CACJ51z3VL-SsCL1nemH1qAcYPnhzNBxnOQ+S1UWaj2AGR-dUbQ@mail.gmail.com>
 <21219d13-733d-50d6-6bce-d9c15ef5d2d6@hobu.co>
 <HE1PR03MB1338F95F91644BC195CDDBBFCA880@HE1PR03MB1338.eurprd03.prod.outlook.com>
Message-ID: <977B3B0A-0121-42DA-B52C-C08EEBC305AE@hobu.co>


> On Apr 24, 2018, at 4:26 AM, Lars <laasunde at hotmail.com> wrote:
> 
> Does OSGeo4W provide "Debug" configuration of all libraries?

No it does not, and it has never done so as far as I know. Debug configurations have always been a self-built thing.

Howard

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180424/f88cbe32/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 528 bytes
Desc: Message signed with OpenPGP
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180424/f88cbe32/attachment.sig>

From brad.chambers at gmail.com  Tue Apr 24 07:28:06 2018
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Tue, 24 Apr 2018 14:28:06 +0000
Subject: [pdal] PDAL on conda-forge
Message-ID: <CAJyqqPz2ObfvBNSNJOjDhd2UP2JfynNyiQYojw2gKmHk7tYbwA@mail.gmail.com>

Today we are happy to announce the initial release of a Conda package for
PDAL available in the conda-forge channel [1]. This release is Linux and
macOS only, but Windows should be close behind.

For now, the package is fairly minimal, as many of the dependencies that
enable PDAL plugins are themselves not available as conda-forge packages
and are having to be created.

Another notable omission is the Python plugin and package. The package has
recently been relocated [2] and will be submitted as a separate Conda
package in the near future.

To install PDAL to your current Conda environment, simply issue the
following command.

conda install -c conda-forge pdal

It may be better to create and activate a separate environment with PDAL
and its dependencies, which can be done with the following commands.

conda create -n pdalenv -c conda-forge pdal
conda activate pdalenv

If you run into issues specific to the Conda package, please feel free to
report them in the conda-forge/pdal-feedstock repository (as opposed to the
PDAL source repository) [3].

Brad

[1] https://anaconda.org/conda-forge/pdal
[2] https://github.com/PDAL/python
[3] https://github.com/conda-forge/pdal-feedstock/issues/new
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180424/5b8ab623/attachment-0001.html>

From Odd-Ragnar.Lydersen at powel.no  Tue Apr 24 22:38:46 2018
From: Odd-Ragnar.Lydersen at powel.no (Odd Ragnar Lydersen)
Date: Wed, 25 Apr 2018 05:38:46 +0000
Subject: [pdal] PDAL Windows debug configuration
In-Reply-To: <25c071aff6a14f3d9b6533fd19df42d2@ITTRHEX001.powelasa.powel.com>
References: <2080591289.36726.1524557978789.JavaMail.administrator@n6.nabble.com>
 <25c071aff6a14f3d9b6533fd19df42d2@ITTRHEX001.powelasa.powel.com>
Message-ID: <b71ef5aa9e8c4044914c9c813af08932@ITTRHEX001.powelasa.powel.com>

Hi Lars

I had the same problem, and my solution was to compile my own version of Jsoncpp and of Laszip.
I make debug and release configs of these, which I use from PDAL, after doing some tweaking in Visual Studio.
I modify INSTALL project to use cmake_install_debug/releas.cmake, so that I can use the appropriate config lib and dll files.

You also need to modify the "generate_dimension_hpp" in VisualStudio.
It cannot find the binary to jsoncpp.dll, so I added a pre-build event copying the configuration\jsoncpp.dll to bin\configuration

Hope this helps

From laasunde at hotmail.com  Wed Apr 25 01:24:32 2018
From: laasunde at hotmail.com (Lars)
Date: Wed, 25 Apr 2018 08:24:32 +0000
Subject: [pdal] PDAL Windows debug configuration
In-Reply-To: <b71ef5aa9e8c4044914c9c813af08932@ITTRHEX001.powelasa.powel.com>
References: <2080591289.36726.1524557978789.JavaMail.administrator@n6.nabble.com>
 <25c071aff6a14f3d9b6533fd19df42d2@ITTRHEX001.powelasa.powel.com>,
 <b71ef5aa9e8c4044914c9c813af08932@ITTRHEX001.powelasa.powel.com>
Message-ID: <HE1PR03MB13385064BB408558A7CFDF11CA8F0@HE1PR03MB1338.eurprd03.prod.outlook.com>

Hello Odd Ragnar,

Appreciate your feedback.

The https://www.pdal.io/development/compilation/dependencies.html lists all of PDAL's dependencies which is quiet long. Did you really only need to manually built two components in order to get the PDAL debug configuration to build and execute (ignoring minor tweaks)? Just expected that without a debug version of for example GDAL that things would fail at some point.

kind regards, Lars

________________________________
Fra: pdal <pdal-bounces at lists.osgeo.org> på vegne av Odd Ragnar Lydersen <Odd-Ragnar.Lydersen at powel.no>
Sendt: 25. april 2018 07:38
Til: pdal at lists.osgeo.org
Emne: Re: [pdal] PDAL Windows debug configuration

Hi Lars

I had the same problem, and my solution was to compile my own version of Jsoncpp and of Laszip.
I make debug and release configs of these, which I use from PDAL, after doing some tweaking in Visual Studio.
I modify INSTALL project to use cmake_install_debug/releas.cmake, so that I can use the appropriate config lib and dll files.

You also need to modify the "generate_dimension_hpp" in VisualStudio.
It cannot find the binary to jsoncpp.dll, so I added a pre-build event copying the configuration\jsoncpp.dll to bin\configuration

Hope this helps
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180425/e35417d8/attachment.html>

From mateusz at loskot.net  Wed Apr 25 01:27:44 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 25 Apr 2018 10:27:44 +0200
Subject: [pdal] PDAL Windows debug configuration
In-Reply-To: <HE1PR03MB13385064BB408558A7CFDF11CA8F0@HE1PR03MB1338.eurprd03.prod.outlook.com>
References: <2080591289.36726.1524557978789.JavaMail.administrator@n6.nabble.com>
 <25c071aff6a14f3d9b6533fd19df42d2@ITTRHEX001.powelasa.powel.com>
 <b71ef5aa9e8c4044914c9c813af08932@ITTRHEX001.powelasa.powel.com>
 <HE1PR03MB13385064BB408558A7CFDF11CA8F0@HE1PR03MB1338.eurprd03.prod.outlook.com>
Message-ID: <CABUeae9zPEjvoi_1rpFq6yWS5uuGUaVrcHRnf8g2GdsG9Sfojg@mail.gmail.com>

On 25 April 2018 at 10:24, Lars <laasunde at hotmail.com> wrote:
> Hello Odd Ragnar,
>
> Appreciate your feedback.
>
> The https://www.pdal.io/development/compilation/dependencies.html lists all
> of PDAL's dependencies which is quiet long.

You can iterate over run cmake - get dependency cmake complains about
- run cmake.
You can also try to build-install many of the dependencies (also debug builds)
from the vcpkg [1] packages, including GDAL 2.2

[1] https://github.com/Microsoft/vcpkg

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From howard at hobu.co  Wed Apr 25 04:24:00 2018
From: howard at hobu.co (Howard Butler)
Date: Wed, 25 Apr 2018 06:24:00 -0500
Subject: [pdal] PDAL Windows debug configuration
In-Reply-To: <CABUeae9zPEjvoi_1rpFq6yWS5uuGUaVrcHRnf8g2GdsG9Sfojg@mail.gmail.com>
References: <2080591289.36726.1524557978789.JavaMail.administrator@n6.nabble.com>
 <25c071aff6a14f3d9b6533fd19df42d2@ITTRHEX001.powelasa.powel.com>
 <b71ef5aa9e8c4044914c9c813af08932@ITTRHEX001.powelasa.powel.com>
 <HE1PR03MB13385064BB408558A7CFDF11CA8F0@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <CABUeae9zPEjvoi_1rpFq6yWS5uuGUaVrcHRnf8g2GdsG9Sfojg@mail.gmail.com>
Message-ID: <22611ad8-bd0d-acd1-473d-92430ad0d0e6@hobu.co>



On 4/25/18 3:27 AM, Mateusz Loskot wrote:
> On 25 April 2018 at 10:24, Lars <laasunde at hotmail.com> wrote:
>> Hello Odd Ragnar,
>>
>> Appreciate your feedback.
>>
>> The https://www.pdal.io/development/compilation/dependencies.html lists all
>> of PDAL's dependencies which is quiet long.
> You can iterate over run cmake - get dependency cmake complains about
> - run cmake.
> You can also try to build-install many of the dependencies (also debug builds)
> from the vcpkg [1] packages, including GDAL 2.2
Mat,

Is vcpkg the thing we should be investing in for post-OSGeo4W Windows
packages and packaging? The ecosystem is densely populated, and which
one the community has gotten behind is not clear to someone like me who
isn't plugged into Windows development. I would much rather be putting
our Windows packaging effort into something that's Windows-wide rather
than OSGeo4W-wide, especially because OSGeo4W packages stale to the
point of unusability.

I know that Windows packaging has improved over recent years, but I
don't have enough experience on the topic to know where to invest PDAL's
limited resources to fall in line.

Howard

> [1] https://github.com/Microsoft/vcpkg
>
> Best regards,


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 528 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180425/992532d5/attachment.sig>

From Odd-Ragnar.Lydersen at powel.no  Wed Apr 25 05:11:43 2018
From: Odd-Ragnar.Lydersen at powel.no (Odd Ragnar Lydersen)
Date: Wed, 25 Apr 2018 12:11:43 +0000
Subject: [pdal] PDAL Windows debug configuration
In-Reply-To: <HE1PR03MB13385064BB408558A7CFDF11CA8F0@HE1PR03MB1338.eurprd03.prod.outlook.com>
References: <2080591289.36726.1524557978789.JavaMail.administrator@n6.nabble.com>
 <25c071aff6a14f3d9b6533fd19df42d2@ITTRHEX001.powelasa.powel.com>,
 <b71ef5aa9e8c4044914c9c813af08932@ITTRHEX001.powelasa.powel.com>
 <HE1PR03MB13385064BB408558A7CFDF11CA8F0@HE1PR03MB1338.eurprd03.prod.outlook.com>
Message-ID: <228920da138e425eac7d1ba0f97134cf@ITTRHEX001.powelasa.powel.com>

Coming from libLas, to PDAL, I really just want to use the Las functionality, and I have only tested for the las format, and it works.

My test project in VS2017, uses the binaries from OSGeo4W64, while our main program already uses our own compiled GDAL 2.2.3, and it works there as well.
I had to change the paths in CMake to use our own build, after initial test.

In CMake I turn off all that I can, and I would have liked to turn off even more. (WITH_GEOS, WITH_GDAL, WITH_LIBXML2, ...)

The following binaries I copy from the OSGeo4W64 folder:
Geos_c.dll, lbxml2.dll, libcurl.dll, iconv.dll
xerces_c_3_1.dll we already have from GDAL, but this is also a dependency.

So I can't give you an answer on if all of GDAL, or even PDAL will work with what I have done, but at least I can verify that it compiles and runs LasReader and LasWriter.

>Odd-Ragnar<
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180425/3892a667/attachment-0001.html>

From howard at hobu.co  Wed Apr 25 05:28:02 2018
From: howard at hobu.co (Howard Butler)
Date: Wed, 25 Apr 2018 07:28:02 -0500
Subject: [pdal] PDAL Windows debug configuration
In-Reply-To: <228920da138e425eac7d1ba0f97134cf@ITTRHEX001.powelasa.powel.com>
References: <2080591289.36726.1524557978789.JavaMail.administrator@n6.nabble.com>
 <25c071aff6a14f3d9b6533fd19df42d2@ITTRHEX001.powelasa.powel.com>
 <b71ef5aa9e8c4044914c9c813af08932@ITTRHEX001.powelasa.powel.com>
 <HE1PR03MB13385064BB408558A7CFDF11CA8F0@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <228920da138e425eac7d1ba0f97134cf@ITTRHEX001.powelasa.powel.com>
Message-ID: <56e61707-b277-3cf9-0e0b-44a4824698e1@hobu.co>



On 4/25/18 7:11 AM, Odd Ragnar Lydersen wrote:
> Coming from libLas, to PDAL, I really just want to use the Las functionality, and I have only tested for the las format, and it works.
>
> My test project in VS2017, uses the binaries from OSGeo4W64, while our main program already uses our own compiled GDAL 2.2.3, and it works there as well.
> I had to change the paths in CMake to use our own build, after initial test.
>
> In CMake I turn off all that I can, and I would have liked to turn off even more. (WITH_GEOS, WITH_GDAL, WITH_LIBXML2, ...)
>
> The following binaries I copy from the OSGeo4W64 folder:
> Geos_c.dll, lbxml2.dll, libcurl.dll, iconv.dll
> xerces_c_3_1.dll we already have from GDAL, but this is also a dependency.
>
> So I can't give you an answer on if all of GDAL, or even PDAL will work with what I have done, but at least I can verify that it compiles and runs LasReader and LasWriter.
>

Every configuration option is extra maintenance overhead for the
project, and we are not going to add a bunch of options to make it
convenient to do stuff like this. We are not going to merge patches to
make it easier either. The benefit is tiny in comparison to the extra
effort it requires of the project. What reason do you have to bother
with PDAL at all if it is so much trouble? libLAS is still there...



-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 528 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180425/d9d6f15d/attachment.sig>

From Odd-Ragnar.Lydersen at powel.no  Wed Apr 25 05:54:21 2018
From: Odd-Ragnar.Lydersen at powel.no (Odd Ragnar Lydersen)
Date: Wed, 25 Apr 2018 12:54:21 +0000
Subject: [pdal] PDAL Windows debug configuration
In-Reply-To: <56e61707-b277-3cf9-0e0b-44a4824698e1@hobu.co>
References: <2080591289.36726.1524557978789.JavaMail.administrator@n6.nabble.com>
 <25c071aff6a14f3d9b6533fd19df42d2@ITTRHEX001.powelasa.powel.com>
 <b71ef5aa9e8c4044914c9c813af08932@ITTRHEX001.powelasa.powel.com>
 <HE1PR03MB13385064BB408558A7CFDF11CA8F0@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <228920da138e425eac7d1ba0f97134cf@ITTRHEX001.powelasa.powel.com>
 <56e61707-b277-3cf9-0e0b-44a4824698e1@hobu.co>
Message-ID: <27b2261e9e2645869e776b7caa9b95c4@ITTRHEX001.powelasa.powel.com>

>What reason do you have to bother with PDAL at all if it is so much trouble? libLAS is still there...

To answer your question, I got a file in version 1.4, and libLas states:
- libLAS does not provide support for LAS or LAZ 1.4, which PDAL does

I really doesn't know the LAS format by heart, but I want to be able to read files in 1.4 format.
It's not that much trouble, I'm glad to have the possibility to use PDAL for this.

>ORL<


From mateusz at loskot.net  Wed Apr 25 09:03:03 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 25 Apr 2018 18:03:03 +0200
Subject: [pdal] vcpkg or conan (was:  PDAL Windows debug configuration)
Message-ID: <CABUeae9n4zx2rPTfiF9PZfF6cSEcNRJYy0nosxb8GHuFdmMbCQ@mail.gmail.com>

On 25 April 2018 at 13:24, Howard Butler <howard at hobu.co> wrote:
> On 4/25/18 3:27 AM, Mateusz Loskot wrote:
>> On 25 April 2018 at 10:24, Lars <laasunde at hotmail.com> wrote:
>>> Hello Odd Ragnar,
>>>
>>> Appreciate your feedback.
>>>
>>> The https://www.pdal.io/development/compilation/dependencies.html lists all
>>> of PDAL's dependencies which is quiet long.
>> You can iterate over run cmake - get dependency cmake complains about
>> - run cmake.
>> You can also try to build-install many of the dependencies (also debug builds)
>> from the vcpkg [1] packages, including GDAL 2.2
>
> Mat,
>
> Is vcpkg the thing we should be investing in for post-OSGeo4W Windows
> packages and packaging?

Howard,

This is strategically quite a heavy question and short answer is: I
don't know :-)

> The ecosystem is densely populated, and which
> one the community has gotten behind is not clear to someone like me who
> isn't plugged into Windows development.

Generally, the C++ ecosystem is slowly getting overloaded with
packaging options:
conan, vcpkg, build2 to name a few [1]

>From what I've observed, conan and vcpkg have gost picked by largest
communities.

I have used both, but not for long enough period to give thorough comparison.
The vcpkg FAQ [1] includes a short comparison - which by the way spawned
a long discussion [3] between the two camps. For a CMake-based project,
using both to pull dependencies is very easy and even semi-automatic.

I only developed or patched packages for vcpkg and I found the process
quite simple.

Some of my random thoughts about the two:
- conan is multiplatform from beginning of its time
- vcpkg has just become multiplatform: Windows, Linux, OSX [4] or FreeBSD [5]
- conan targets precompiled binaries with complementary `conan install --build`
- vcpkg targets installation from sources
- both support optimised and debug configurations
- conan seems to prefer/rely on community of package maintainers, so
it might have larger community
- vcpkg has smaller community around, I think
- both have largish compilers behind ;-)
- vcpkg uses CMake, portfile.cmake
- conan uses Python, conanfile.py
- vcpkg idea of single 'platform' version with support for multiple
installations/integrations (eg. per project) is something I like [6]
- conan puts local cache in %USERPROFILE%\.conan, at least that's what
I see by default
- vcpkg can offer always one libpng package (w/ configuration
triplets: arch, platform, etc.), I like it :)
- conan can offer multiple libpng packages
- vcpkg is more like system package management, or OSGeo4W, where
every accepted package is official
- conan seems to me like ArchLinux AUR - easy to find N packages of
the same library, which one to install?
- vcpkg install is just copying files, vcpkg export can zip
binaries/headers so you can share with team members
- vcpkg respects CMake target names as defined by CMake modules of a project
- conan seems to always generate custom CONAN_PKG::PkgName, so for
find_package(PNG)
we get
target_link_libraries(myapp PRIVATE PNG::PNG)
vs
target_link_libraries(myapp PRIVATE CONAN_PKG::libpng)

Finally, what you probably can guess, I find the vcpkg idea/design
simpler, easier to grasp,
docs are shorter, I find those as important traits from perspective of
ad-hoc use/contributions.

> I would much rather be putting our Windows packaging effort into
> something that's Windows-wide rather than OSGeo4W-wide,
> especially because OSGeo4W packages stale to the point of unusability.

Looking beyond OSGeo4W and towards more generic C++ package
ecosystems seems a good idea, I think.

> I know that Windows packaging has improved over recent years, but I
> don't have enough experience on the topic to know where to invest PDAL's
> limited resources to fall in line.

Since both, conan and vcpkg support multiple platforms, it is no longer
Windows only question.

There is lots of questions regarding which strategy to choose.
>From my perspective, that is a development-oriented consumer:
- system packages (eg. deb, rpm) are always behind
- PPA are often left unmaintained
- both, are too tight to particular OS/distribution release.
- packaging for systems and distributions means very steep learning curve
and numberof 'beaurocracy' requirements to fulfil ;-)

conan and vcpkg come with this cool freedom that let me as consumer
inluence the state of the package with
- vcpkg: simple GitHub PR
- conan: same or upload my own package (ArchLinux AUR mode)

That was lots of thoughts dumped and to get back to the business,
I would be willing to help and prototype the vcpkg package for PDAL.
If someone could go for package for conan, then we can compare efforts
and results, and see which is preferred to be officially maintained.
Perhaps both, who knows ;)


[1] http://pfultz2.com/blog/2017/10/27/universal-package-manager/
[2] https://github.com/Microsoft/vcpkg/blob/master/docs/about/faq.md
[3] https://github.com/Microsoft/vcpkg/issues/478
[4] https://blogs.msdn.microsoft.com/vcblog/2018/04/24/announcing-a-single-c-library-manager-for-linux-macos-and-windows-vcpkg/
[5] https://github.com/qis/windows-10/blob/master/vcpkg.md
[6] https://github.com/Microsoft/vcpkg/issues/3052#issuecomment-373727187

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From howard at hobu.co  Thu Apr 26 13:16:53 2018
From: howard at hobu.co (Howard Butler)
Date: Thu, 26 Apr 2018 15:16:53 -0500
Subject: [pdal] vcpkg or conan (was: PDAL Windows debug configuration)
In-Reply-To: <CABUeae9n4zx2rPTfiF9PZfF6cSEcNRJYy0nosxb8GHuFdmMbCQ@mail.gmail.com>
References: <CABUeae9n4zx2rPTfiF9PZfF6cSEcNRJYy0nosxb8GHuFdmMbCQ@mail.gmail.com>
Message-ID: <a44e8f13-e658-abad-1f8e-a5ccf9c2e607@hobu.co>

Mat,

Thanks for the detailed feedback. It looks like vcpkg has the edge in
relation to PDAL's sphere at the moment.

Howard

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 528 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180426/f7e1d81e/attachment.sig>

From erobeck at gmail.com  Sat Apr 28 15:03:19 2018
From: erobeck at gmail.com (Eric Robeck)
Date: Sat, 28 Apr 2018 17:03:19 -0500
Subject: [pdal] Merging buffered tiles
Message-ID: <CAKa5cD+P89fRXb3yex1YWSvkJQ_a+y7P9oS1n0wDnHLkMcEDMQ@mail.gmail.com>

Is there a way within PDAL to merged buffered tiles with a constant buffer
width, while filtering out only the buffers from each tile?

For context, I am using an external software to modify a large point cloud.
Due to memory constraints, I first tiled the data using the "splitters"
filter, but included a 10 m buffer to minimize edge effects. Now that the
data are processed, I want to merge them back into a single file.

Thanks,
Eric
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180428/3342ea1c/attachment.html>

From michael.smith.erdc at gmail.com  Sat Apr 28 16:51:45 2018
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Sat, 28 Apr 2018 19:51:45 -0400
Subject: [pdal] Merging buffered tiles
In-Reply-To: <CAKa5cD+P89fRXb3yex1YWSvkJQ_a+y7P9oS1n0wDnHLkMcEDMQ@mail.gmail.com>
References: <CAKa5cD+P89fRXb3yex1YWSvkJQ_a+y7P9oS1n0wDnHLkMcEDMQ@mail.gmail.com>
Message-ID: <E1198B88-911A-4D7A-BBC9-1774B777617D@gmail.com>

Yes, but pdal helps those that help themselves. You can do it but you have to provide all the info. You’d have a pipeline that would apply a crop filter to each tile and that crop filter would have the geometry that would be the inside buffer for each tile. You’re last writer would merge the tiles together (you can use a merge filter but its no longer required for pdal 1.5+). For pdal 1.6 and 1.7, you’ll want to make sure you use stream mode (default in pdal 1.7) as that will minimize the memory footprint.

Michael Smith
Remote Sensing/GIS Center
US Army Corps of Engineers

> On Apr 28, 2018, at 6:03 PM, Eric Robeck <erobeck at gmail.com> wrote:
> 
> Is there a way within PDAL to merged buffered tiles with a constant buffer width, while filtering out only the buffers from each tile?
> 
> For context, I am using an external software to modify a large point cloud. Due to memory constraints, I first tiled the data using the "splitters" filter, but included a 10 m buffer to minimize edge effects. Now that the data are processed, I want to merge them back into a single file.
> 
> Thanks,
> Eric
> 
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal

From howard at hobu.co  Sun Apr 29 08:19:32 2018
From: howard at hobu.co (Howard Butler)
Date: Sun, 29 Apr 2018 10:19:32 -0500
Subject: [pdal] Merging buffered tiles
In-Reply-To: <CAKa5cD+P89fRXb3yex1YWSvkJQ_a+y7P9oS1n0wDnHLkMcEDMQ@mail.gmail.com>
References: <CAKa5cD+P89fRXb3yex1YWSvkJQ_a+y7P9oS1n0wDnHLkMcEDMQ@mail.gmail.com>
Message-ID: <e68a23de-d612-2700-9307-24a3872d6a29@hobu.co>



On 4/28/18 5:03 PM, Eric Robeck wrote:
> Is there a way within PDAL to merged buffered tiles with a constant buffer
> width, while filtering out only the buffers from each tile?
>
> For context, I am using an external software to modify a large point cloud.
> Due to memory constraints, I first tiled the data using the "splitters"
> filter, but included a 10 m buffer to minimize edge effects. Now that the
> data are processed, I want to merge them back into a single file.

You could use filters.assign to set a "buffer" value for the points that
are in your buffer ring (or the ones that aren't), and then use
filters.range to cull out points that have the "!buffer" classification
before you go back to merge them altogether. It would be laborious, but
you could get the job done.

Additionally, Connor Manning of Hobu demonstrated a workflow at FOSS4G
2017 [1] that is very similar to what you're doing except it is based on
Greyhound and Entwine for the data management (and PDAL for the
processing). The goal is to be able to put back information into an
Entwine tree and not be constrained by a fixed tiling scheme while
processing. It's all very much a prototype at the moment, but dynamic
workflows based on adaptive tiling schemes is something we are actively
working on.

Howard


[1] https://vimeo.com/245073446

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 528 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180429/f8c7f63d/attachment.sig>

