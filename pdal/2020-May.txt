From antonio.molina at nmgroup.com  Tue May  5 07:27:39 2020
From: antonio.molina at nmgroup.com (Antonio Molina)
Date: Tue, 5 May 2020 15:27:39 +0100
Subject: [pdal] Set ESPG in header information
Message-ID: <CAAJ=AAQ8-SCfAtjn3wWa37hE0ya4k8boENR3q-cvvg-XNO=6Mg@mail.gmail.com>

Hi,

I want to write on the header information of LAS files the EPSG. The LiDAR
is already projected.
The EPSG code is 7856 GDA2020.
Is it possible with pdal? Ideally want to run it using python and
avoiding to call it across the command line as subprocess.call or os.system

Thank you :)

Kind regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200505/0bd74365/attachment.html>

From andrew.bell.ia at gmail.com  Tue May  5 08:21:55 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 5 May 2020 11:21:55 -0400
Subject: [pdal] Set ESPG in header information
In-Reply-To: <CAAJ=AAQ8-SCfAtjn3wWa37hE0ya4k8boENR3q-cvvg-XNO=6Mg@mail.gmail.com>
References: <CAAJ=AAQ8-SCfAtjn3wWa37hE0ya4k8boENR3q-cvvg-XNO=6Mg@mail.gmail.com>
Message-ID: <CACJ51z2fa00VEvc+jG0-hcgs=kevww5zYXiBE=K1Bm1kpN2QCQ@mail.gmail.com>

Antonio,

See the "a_srs" option of writers.pdal (
https://pdal.io/stages/writers.las.html).

Best,

On Tue, May 5, 2020 at 10:27 AM Antonio Molina <antonio.molina at nmgroup.com>
wrote:

> Hi,
>
> I want to write on the header information of LAS files the EPSG. The LiDAR
> is already projected.
> The EPSG code is 7856 GDA2020.
> Is it possible with pdal? Ideally want to run it using python and
> avoiding to call it across the command line as subprocess.call or os.system
>
> Thank you :)
>
> Kind regards
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200505/d7297ec5/attachment.html>

From hakon at aamdal.com  Thu May  7 13:59:53 2020
From: hakon at aamdal.com (=?UTF-8?B?SMOla29uIMOFbWRhbA==?=)
Date: Thu, 7 May 2020 16:59:53 -0400
Subject: [pdal] Target Aliged Pixels (tap) for the GDAL driver
Message-ID: <CAJ0P4eF4f7Ae_TKsBJJef_Bm0zhUOU4xv0TEKSHRTwQLfyX_8g@mail.gmail.com>

Hi there,

I'm currently working on a LIDAR data project where we classify "high
vegetation" and buildings using PDAL. We convert them to rasters before we
send them downstream.

Now, we are looking to combine the rasters generated with
satellite imagery. For this project, we believe it's important to have an
1:1 mapping between the pixels in the different sources.

To align our satellite images with the underling projection, we use the
"-tap" option in gdalwarp. However, no such feature exists for the
GDAL-writer in PDAL. Which means the pixels are offset by up to half a
meter (for UTM and 1.0 scale).

I think we can overcome the above issue by using PDAL to generate a much
higher resolution TIF file (say 0.1) and then resample with gdalwarp and
the "-tap" option. Or even just keep the resolution, just use gdalwarp to
resample.

I was wondering if a similar "-tap" option belongs in PDAL, and how that
would look like? I initially thought it was argument passed to the driver,
but AFAIK the pixel alignment happens before it is passed to the driver. If
I understand it correctly, it would then be an extra option to be passed to
the "writers.gdal" component.

I'd love to contribute, but I'm no C++ developer.

Håkon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200507/b4df2008/attachment.html>

From klassen.js at gmail.com  Thu May  7 14:23:51 2020
From: klassen.js at gmail.com (James Klassen)
Date: Thu, 7 May 2020 16:23:51 -0500
Subject: [pdal] Target Aliged Pixels (tap) for the GDAL driver
In-Reply-To: <CAJ0P4eF4f7Ae_TKsBJJef_Bm0zhUOU4xv0TEKSHRTwQLfyX_8g@mail.gmail.com>
References: <CAJ0P4eF4f7Ae_TKsBJJef_Bm0zhUOU4xv0TEKSHRTwQLfyX_8g@mail.gmail.com>
Message-ID: <CAHqX797m+e-qeV9F0E1DtSo=B3Jo1emYuQpGP1LShOZoXah2jg@mail.gmail.com>

You can calculate and pass in your own "--writers.gdal.bounds" and get
aligned pixels.

(By doing this, I am able to round trip a DEM into a point cloud in PDAL
and back into a DEM losslessly.)



On Thu, May 7, 2020, 16:16 Håkon Åmdal <hakon at aamdal.com> wrote:

> Hi there,
>
> I'm currently working on a LIDAR data project where we classify "high
> vegetation" and buildings using PDAL. We convert them to rasters before we
> send them downstream.
>
> Now, we are looking to combine the rasters generated with
> satellite imagery. For this project, we believe it's important to have an
> 1:1 mapping between the pixels in the different sources.
>
> To align our satellite images with the underling projection, we use the
> "-tap" option in gdalwarp. However, no such feature exists for the
> GDAL-writer in PDAL. Which means the pixels are offset by up to half a
> meter (for UTM and 1.0 scale).
>
> I think we can overcome the above issue by using PDAL to generate a much
> higher resolution TIF file (say 0.1) and then resample with gdalwarp and
> the "-tap" option. Or even just keep the resolution, just use gdalwarp to
> resample.
>
> I was wondering if a similar "-tap" option belongs in PDAL, and how that
> would look like? I initially thought it was argument passed to the driver,
> but AFAIK the pixel alignment happens before it is passed to the driver. If
> I understand it correctly, it would then be an extra option to be passed to
> the "writers.gdal" component.
>
> I'd love to contribute, but I'm no C++ developer.
>
> Håkon
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200507/ed1484a4/attachment.html>

From andrew.bell.ia at gmail.com  Thu May  7 14:24:30 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 7 May 2020 17:24:30 -0400
Subject: [pdal] Target Aliged Pixels (tap) for the GDAL driver
In-Reply-To: <CAJ0P4eF4f7Ae_TKsBJJef_Bm0zhUOU4xv0TEKSHRTwQLfyX_8g@mail.gmail.com>
References: <CAJ0P4eF4f7Ae_TKsBJJef_Bm0zhUOU4xv0TEKSHRTwQLfyX_8g@mail.gmail.com>
Message-ID: <CACJ51z1SyFX4Y=AmaQZM-xo_So_aiWmk2TJ7MjVARmJ=-S7JSA@mail.gmail.com>

Hi Håkon,

I know nothing about gdalwarp, but I would think you could get perfect
alignment by using the bounds option in `writers.gdal`.  Are you having a
problem despite using this option?

On Thu, May 7, 2020 at 5:16 PM Håkon Åmdal <hakon at aamdal.com> wrote:

> Hi there,
>
> I'm currently working on a LIDAR data project where we classify "high
> vegetation" and buildings using PDAL. We convert them to rasters before we
> send them downstream.
>
> Now, we are looking to combine the rasters generated with
> satellite imagery. For this project, we believe it's important to have an
> 1:1 mapping between the pixels in the different sources.
>
> To align our satellite images with the underling projection, we use the
> "-tap" option in gdalwarp. However, no such feature exists for the
> GDAL-writer in PDAL. Which means the pixels are offset by up to half a
> meter (for UTM and 1.0 scale).
>
> I think we can overcome the above issue by using PDAL to generate a much
> higher resolution TIF file (say 0.1) and then resample with gdalwarp and
> the "-tap" option. Or even just keep the resolution, just use gdalwarp to
> resample.
>
> I was wondering if a similar "-tap" option belongs in PDAL, and how that
> would look like? I initially thought it was argument passed to the driver,
> but AFAIK the pixel alignment happens before it is passed to the driver. If
> I understand it correctly, it would then be an extra option to be passed to
> the "writers.gdal" component.
>
> I'd love to contribute, but I'm no C++ developer.
>
> Håkon
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200507/fb9207c4/attachment.html>

From hakon at aamdal.com  Thu May  7 15:08:26 2020
From: hakon at aamdal.com (=?UTF-8?B?SMOla29uIMOFbWRhbA==?=)
Date: Thu, 7 May 2020 18:08:26 -0400
Subject: [pdal] Target Aliged Pixels (tap) for the GDAL driver
In-Reply-To: <CACJ51z1SyFX4Y=AmaQZM-xo_So_aiWmk2TJ7MjVARmJ=-S7JSA@mail.gmail.com>
References: <CAJ0P4eF4f7Ae_TKsBJJef_Bm0zhUOU4xv0TEKSHRTwQLfyX_8g@mail.gmail.com>
 <CACJ51z1SyFX4Y=AmaQZM-xo_So_aiWmk2TJ7MjVARmJ=-S7JSA@mail.gmail.com>
Message-ID: <CAJ0P4eG01Pda85GPxmARXZ9k6noJr0XwtfR=-b-BDUaxdeB1ZQ@mail.gmail.com>

Let me try that tomorrow. You'll hear from me. Thanks for quick feedback!

On Thu, 7 May 2020 at 17:24, Andrew Bell <andrew.bell.ia at gmail.com> wrote:

> Hi Håkon,
>
> I know nothing about gdalwarp, but I would think you could get perfect
> alignment by using the bounds option in `writers.gdal`.  Are you having a
> problem despite using this option?
>
> On Thu, May 7, 2020 at 5:16 PM Håkon Åmdal <hakon at aamdal.com> wrote:
>
>> Hi there,
>>
>> I'm currently working on a LIDAR data project where we classify "high
>> vegetation" and buildings using PDAL. We convert them to rasters before we
>> send them downstream.
>>
>> Now, we are looking to combine the rasters generated with
>> satellite imagery. For this project, we believe it's important to have an
>> 1:1 mapping between the pixels in the different sources.
>>
>> To align our satellite images with the underling projection, we use the
>> "-tap" option in gdalwarp. However, no such feature exists for the
>> GDAL-writer in PDAL. Which means the pixels are offset by up to half a
>> meter (for UTM and 1.0 scale).
>>
>> I think we can overcome the above issue by using PDAL to generate a much
>> higher resolution TIF file (say 0.1) and then resample with gdalwarp and
>> the "-tap" option. Or even just keep the resolution, just use gdalwarp to
>> resample.
>>
>> I was wondering if a similar "-tap" option belongs in PDAL, and how that
>> would look like? I initially thought it was argument passed to the driver,
>> but AFAIK the pixel alignment happens before it is passed to the driver. If
>> I understand it correctly, it would then be an extra option to be passed to
>> the "writers.gdal" component.
>>
>> I'd love to contribute, but I'm no C++ developer.
>>
>> Håkon
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200507/ec6c4a27/attachment.html>

From hakon at aamdal.com  Fri May  8 04:05:53 2020
From: hakon at aamdal.com (=?UTF-8?B?SMOla29uIMOFbWRhbA==?=)
Date: Fri, 8 May 2020 07:05:53 -0400
Subject: [pdal] Target Aliged Pixels (tap) for the GDAL driver
In-Reply-To: <CAJ0P4eG01Pda85GPxmARXZ9k6noJr0XwtfR=-b-BDUaxdeB1ZQ@mail.gmail.com>
References: <CAJ0P4eF4f7Ae_TKsBJJef_Bm0zhUOU4xv0TEKSHRTwQLfyX_8g@mail.gmail.com>
 <CACJ51z1SyFX4Y=AmaQZM-xo_So_aiWmk2TJ7MjVARmJ=-S7JSA@mail.gmail.com>
 <CAJ0P4eG01Pda85GPxmARXZ9k6noJr0XwtfR=-b-BDUaxdeB1ZQ@mail.gmail.com>
Message-ID: <CAJ0P4eE+N15Czx5nH550RZeATgcoedS2395UHrod-voGtCwwYA@mail.gmail.com>

Thanks guys, that worked!

That said, such "-tap" functionality could be neat to have for the
rasterization writers.

Have a great weekend!
Håkon

On Thu, May 7, 2020 at 6:08 PM Håkon Åmdal <hakon at aamdal.com> wrote:

> Let me try that tomorrow. You'll hear from me. Thanks for quick feedback!
>
> On Thu, 7 May 2020 at 17:24, Andrew Bell <andrew.bell.ia at gmail.com> wrote:
>
>> Hi Håkon,
>>
>> I know nothing about gdalwarp, but I would think you could get perfect
>> alignment by using the bounds option in `writers.gdal`.  Are you having a
>> problem despite using this option?
>>
>> On Thu, May 7, 2020 at 5:16 PM Håkon Åmdal <hakon at aamdal.com> wrote:
>>
>>> Hi there,
>>>
>>> I'm currently working on a LIDAR data project where we classify "high
>>> vegetation" and buildings using PDAL. We convert them to rasters before we
>>> send them downstream.
>>>
>>> Now, we are looking to combine the rasters generated with
>>> satellite imagery. For this project, we believe it's important to have an
>>> 1:1 mapping between the pixels in the different sources.
>>>
>>> To align our satellite images with the underling projection, we use the
>>> "-tap" option in gdalwarp. However, no such feature exists for the
>>> GDAL-writer in PDAL. Which means the pixels are offset by up to half a
>>> meter (for UTM and 1.0 scale).
>>>
>>> I think we can overcome the above issue by using PDAL to generate a much
>>> higher resolution TIF file (say 0.1) and then resample with gdalwarp and
>>> the "-tap" option. Or even just keep the resolution, just use gdalwarp to
>>> resample.
>>>
>>> I was wondering if a similar "-tap" option belongs in PDAL, and how that
>>> would look like? I initially thought it was argument passed to the driver,
>>> but AFAIK the pixel alignment happens before it is passed to the driver. If
>>> I understand it correctly, it would then be an extra option to be passed to
>>> the "writers.gdal" component.
>>>
>>> I'd love to contribute, but I'm no C++ developer.
>>>
>>> Håkon
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>>
>>
>> --
>> Andrew Bell
>> andrew.bell.ia at gmail.com
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200508/e0fc9da2/attachment-0001.html>

From julian.fell at cognitive.earth  Sun May 10 21:19:04 2020
From: julian.fell at cognitive.earth (Julian Fell)
Date: Mon, 11 May 2020 14:19:04 +1000
Subject: [pdal] PDAL Julia Plugin
Message-ID: <CAG8vXFrpsHf_g+F_-hLMVV3atSrJ=MJxrRLj5ndbR9-iHjbfeQ@mail.gmail.com>

Hi all,

I'm pretty excited to share the first release of my Julia (
https://julialang.org) filter for PDAL. It works very similarly to the
existing python filter (minus the numpy reader) by embedding the
interpreter in a PDAL stage, allowing filters to be written 100% in Julia.
I'd love to hear ideas about potential use cases and feedback on how it
could be improved!

Repo: https://github.com/cognitive-earth/PDAL-julia
Docker image: https://hub.docker.com/r/cognitiveearth/pdal-julia

Thanks,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200511/175eddae/attachment.html>

From howard at hobu.co  Mon May 11 13:53:46 2020
From: howard at hobu.co (Howard Butler)
Date: Mon, 11 May 2020 15:53:46 -0500
Subject: [pdal] PDAL Julia Plugin
In-Reply-To: <CAG8vXFrpsHf_g+F_-hLMVV3atSrJ=MJxrRLj5ndbR9-iHjbfeQ@mail.gmail.com>
References: <CAG8vXFrpsHf_g+F_-hLMVV3atSrJ=MJxrRLj5ndbR9-iHjbfeQ@mail.gmail.com>
Message-ID: <DBE059B2-BBBA-41C4-B381-38356E7F6BB1@hobu.co>



> On May 10, 2020, at 11:19 PM, Julian Fell <julian.fell at cognitive.earth> wrote:
> 
> Hi all,
> 
> I'm pretty excited to share the first release of my Julia (https://julialang.org <https://julialang.org/>) filter for PDAL. It works very similarly to the existing python filter (minus the numpy reader) by embedding the interpreter in a PDAL stage, allowing filters to be written 100% in Julia. I'd love to hear ideas about potential use cases and feedback on how it could be improved!
> 
> Repo: https://github.com/cognitive-earth/PDAL-julia <https://github.com/cognitive-earth/PDAL-julia>
> Docker image: https://hub.docker.com/r/cognitiveearth/pdal-julia <https://hub.docker.com/r/cognitiveearth/pdal-julia>
Julian,

That looks very nice!

Please make a PR to PDAL's docs that points people to it. A simple section at the bottom of https://pdal.io/about.html <https://pdal.io/about.html> similar to the Python one might be good enough to get people who would be interested to seek out more.

Howard

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200511/830823f3/attachment.html>

From g.miguel.guerrero.m at gmail.com  Thu May 14 12:41:29 2020
From: g.miguel.guerrero.m at gmail.com (Miguel Guerrero)
Date: Thu, 14 May 2020 12:41:29 -0700
Subject: [pdal] PDAL Python working with an specific dimension
	(classification)
Message-ID: <CAJUPYVX5XFyko_YbYKtpp92UwikSgxPtR2LWpg6VoZJasX1soA@mail.gmail.com>

Hello,
I hope this email finds you well.
First off, thanks for a great job implementing the PDAL for Python.
I have a LiDAR dataset in LAS format that has been pre-classified. I want
to apply some filters to one or multiples classes. I followed the samples
shown on https://pdal.io/stages/filters.html and
https://github.com/PDAL/python. I am able to get the filters to work but
the final output only contains the classes 1 and/or 2, when in reality I
would like to get the rest of the classes that were not used in the
filtering process.
Any direction or suggestion would be greatly appreciated.

My best regards,

Miguel

Here is my code:

import os

# Input and validation of source directory
while True:
    srcDirectory = os.path.normpath(input("Enter directory containing
LAS files: "))
    if os.path.exists(srcDirectory) is True and srcDirectory != ".":
        break
    else:
        print(srcDirectory, "is not a valid directory")

# Input and validation of destination directory
while True:
    dstDirectory = os.path.normpath(input("Enter directory to store
processed files: "))
    if os.path.exists(dstDirectory) is True and dstDirectory != ".":
        break
    else:
        print (dstDirectory, "is not a valid directory")

print ("")

# Change the working directory to the source directory
os.chdir(srcDirectory)
print ("Working directory is" + " " + os.getcwd())

# Blank line for better visualization
print ("")

# Create list of files in source directory
filesList = os.listdir(srcDirectory)

for file in filesList:
    if file.endswith('las'):
        fileIn = (srcDirectory + "\\" + file).replace('\\', '/')
        fileOut = (dstDirectory + "\\" + file).replace('\\', '/')

        json = """
            {
              "pipeline": [
                {
                    "type": "readers.las",
                    "filename": "%s"
                }
              ]
            }"""

        import pdal
        import numpy as np
        pipeline = pdal.Pipeline(json % fileIn)
        count = pipeline.execute()

        arr = pipeline.arrays[0]
        print(len(arr))

        lasClass26 = arr[arr['Classification'] == 26]
        print(len(lasClass26))

        clamp = u"""{
          "pipeline":[
            {
                "type":"filters.csf"
            },
            {
                "type":"filters.range",
                "limits":"Classification[0:30]"
            },
            "%s"
          ]
        }""" % (fileOut)

        p = pdal.Pipeline(clamp, [lasClass26])
        count = p.execute()
        clamped = p.arrays[0]
        print(count)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200514/831c9b69/attachment.html>

From andrew.bell.ia at gmail.com  Thu May 14 13:00:48 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 14 May 2020 16:00:48 -0400
Subject: [pdal] PDAL Python working with an specific dimension
	(classification)
In-Reply-To: <CAJUPYVX5XFyko_YbYKtpp92UwikSgxPtR2LWpg6VoZJasX1soA@mail.gmail.com>
References: <CAJUPYVX5XFyko_YbYKtpp92UwikSgxPtR2LWpg6VoZJasX1soA@mail.gmail.com>
Message-ID: <CACJ51z3pKO6RkgD4rScJ73GOh7hvOwGTMCZ+huCRxwXUECRJZg@mail.gmail.com>

filters.csf is a ground filter, so it classifies everything as either
ground or unclassified.

On Thu, May 14, 2020 at 3:41 PM Miguel Guerrero <
g.miguel.guerrero.m at gmail.com> wrote:

> Hello,
> I hope this email finds you well.
> First off, thanks for a great job implementing the PDAL for Python.
> I have a LiDAR dataset in LAS format that has been pre-classified. I want
> to apply some filters to one or multiples classes. I followed the samples
> shown on https://pdal.io/stages/filters.html and
> https://github.com/PDAL/python. I am able to get the filters to work but
> the final output only contains the classes 1 and/or 2, when in reality I
> would like to get the rest of the classes that were not used in the
> filtering process.
> Any direction or suggestion would be greatly appreciated.
>
> My best regards,
>
> Miguel
>
> Here is my code:
>
> import os
>
> # Input and validation of source directory
> while True:
>     srcDirectory = os.path.normpath(input("Enter directory containing LAS files: "))
>     if os.path.exists(srcDirectory) is True and srcDirectory != ".":
>         break
>     else:
>         print(srcDirectory, "is not a valid directory")
>
> # Input and validation of destination directory
> while True:
>     dstDirectory = os.path.normpath(input("Enter directory to store processed files: "))
>     if os.path.exists(dstDirectory) is True and dstDirectory != ".":
>         break
>     else:
>         print (dstDirectory, "is not a valid directory")
>
> print ("")
>
> # Change the working directory to the source directory
> os.chdir(srcDirectory)
> print ("Working directory is" + " " + os.getcwd())
>
> # Blank line for better visualization
> print ("")
>
> # Create list of files in source directory
> filesList = os.listdir(srcDirectory)
>
> for file in filesList:
>     if file.endswith('las'):
>         fileIn = (srcDirectory + "\\" + file).replace('\\', '/')
>         fileOut = (dstDirectory + "\\" + file).replace('\\', '/')
>
>         json = """
>             {
>               "pipeline": [
>                 {
>                     "type": "readers.las",
>                     "filename": "%s"
>                 }
>               ]
>             }"""
>
>         import pdal
>         import numpy as np
>         pipeline = pdal.Pipeline(json % fileIn)
>         count = pipeline.execute()
>
>         arr = pipeline.arrays[0]
>         print(len(arr))
>
>         lasClass26 = arr[arr['Classification'] == 26]
>         print(len(lasClass26))
>
>         clamp = u"""{
>           "pipeline":[
>             {
>                 "type":"filters.csf"
>             },
>             {
>                 "type":"filters.range",
>                 "limits":"Classification[0:30]"
>             },
>             "%s"
>           ]
>         }""" % (fileOut)
>
>         p = pdal.Pipeline(clamp, [lasClass26])
>         count = p.execute()
>         clamped = p.arrays[0]
>         print(count)
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200514/7032911e/attachment.html>

From g.miguel.guerrero.m at gmail.com  Thu May 14 15:50:38 2020
From: g.miguel.guerrero.m at gmail.com (Miguel Guerrero)
Date: Thu, 14 May 2020 15:50:38 -0700
Subject: [pdal] PDAL Python working with an specific dimension
	(classification)
In-Reply-To: <CACJ51z3pKO6RkgD4rScJ73GOh7hvOwGTMCZ+huCRxwXUECRJZg@mail.gmail.com>
References: <CAJUPYVX5XFyko_YbYKtpp92UwikSgxPtR2LWpg6VoZJasX1soA@mail.gmail.com>
 <CACJ51z3pKO6RkgD4rScJ73GOh7hvOwGTMCZ+huCRxwXUECRJZg@mail.gmail.com>
Message-ID: <CAJUPYVXPkG03iH5J29rn=dvPzrMb1rtTOj6dkOJOiJ=yogLf0w@mail.gmail.com>

Thanks for the prompt reply!
I understand. Here is another question: I stored the Coplanarity values (0
and 1) in the UserData dimension. Is there any way to "assign"/"reclassify"
the UserData dimension to the Classification dimension?
Example:
UserData = 0 => Classification = class 16
UserData = 1 => Classification = class 17

Thanks in advance for your help

Miguel

On Thu, May 14, 2020 at 1:01 PM Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

> filters.csf is a ground filter, so it classifies everything as either
> ground or unclassified.
>
> On Thu, May 14, 2020 at 3:41 PM Miguel Guerrero <
> g.miguel.guerrero.m at gmail.com> wrote:
>
>> Hello,
>> I hope this email finds you well.
>> First off, thanks for a great job implementing the PDAL for Python.
>> I have a LiDAR dataset in LAS format that has been pre-classified. I want
>> to apply some filters to one or multiples classes. I followed the samples
>> shown on https://pdal.io/stages/filters.html and
>> https://github.com/PDAL/python. I am able to get the filters to work but
>> the final output only contains the classes 1 and/or 2, when in reality I
>> would like to get the rest of the classes that were not used in the
>> filtering process.
>> Any direction or suggestion would be greatly appreciated.
>>
>> My best regards,
>>
>> Miguel
>>
>> Here is my code:
>>
>> import os
>>
>> # Input and validation of source directory
>> while True:
>>     srcDirectory = os.path.normpath(input("Enter directory containing LAS files: "))
>>     if os.path.exists(srcDirectory) is True and srcDirectory != ".":
>>         break
>>     else:
>>         print(srcDirectory, "is not a valid directory")
>>
>> # Input and validation of destination directory
>> while True:
>>     dstDirectory = os.path.normpath(input("Enter directory to store processed files: "))
>>     if os.path.exists(dstDirectory) is True and dstDirectory != ".":
>>         break
>>     else:
>>         print (dstDirectory, "is not a valid directory")
>>
>> print ("")
>>
>> # Change the working directory to the source directory
>> os.chdir(srcDirectory)
>> print ("Working directory is" + " " + os.getcwd())
>>
>> # Blank line for better visualization
>> print ("")
>>
>> # Create list of files in source directory
>> filesList = os.listdir(srcDirectory)
>>
>> for file in filesList:
>>     if file.endswith('las'):
>>         fileIn = (srcDirectory + "\\" + file).replace('\\', '/')
>>         fileOut = (dstDirectory + "\\" + file).replace('\\', '/')
>>
>>         json = """
>>             {
>>               "pipeline": [
>>                 {
>>                     "type": "readers.las",
>>                     "filename": "%s"
>>                 }
>>               ]
>>             }"""
>>
>>         import pdal
>>         import numpy as np
>>         pipeline = pdal.Pipeline(json % fileIn)
>>         count = pipeline.execute()
>>
>>         arr = pipeline.arrays[0]
>>         print(len(arr))
>>
>>         lasClass26 = arr[arr['Classification'] == 26]
>>         print(len(lasClass26))
>>
>>         clamp = u"""{
>>           "pipeline":[
>>             {
>>                 "type":"filters.csf"
>>             },
>>             {
>>                 "type":"filters.range",
>>                 "limits":"Classification[0:30]"
>>             },
>>             "%s"
>>           ]
>>         }""" % (fileOut)
>>
>>         p = pdal.Pipeline(clamp, [lasClass26])
>>         count = p.execute()
>>         clamped = p.arrays[0]
>>         print(count)
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200514/0142cde1/attachment-0001.html>

From andrew.bell.ia at gmail.com  Thu May 14 18:29:53 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 14 May 2020 21:29:53 -0400
Subject: [pdal] PDAL Python working with an specific dimension
	(classification)
In-Reply-To: <CAJUPYVXPkG03iH5J29rn=dvPzrMb1rtTOj6dkOJOiJ=yogLf0w@mail.gmail.com>
References: <CAJUPYVX5XFyko_YbYKtpp92UwikSgxPtR2LWpg6VoZJasX1soA@mail.gmail.com>
 <CACJ51z3pKO6RkgD4rScJ73GOh7hvOwGTMCZ+huCRxwXUECRJZg@mail.gmail.com>
 <CAJUPYVXPkG03iH5J29rn=dvPzrMb1rtTOj6dkOJOiJ=yogLf0w@mail.gmail.com>
Message-ID: <CACJ51z0R8OrxU8m2-Vo83opadUo+3G3eoMfMF7-k3=BCXuNERQ@mail.gmail.com>

On Thu, May 14, 2020 at 6:50 PM Miguel Guerrero <
g.miguel.guerrero.m at gmail.com> wrote:

> Thanks for the prompt reply!
> I understand. Here is another question: I stored the Coplanarity values (0
> and 1) in the UserData dimension. Is there any way to "assign"/"reclassify"
> the UserData dimension to the Classification dimension?
> Example:
> UserData = 0 => Classification = class 16
> UserData = 1 => Classification = class 17
>

You can do this with the assign filter:

{
  "type" : "filters.assign",
  "assignment": "Classification[:]=16",
  "condition":"UserData[0:0]"
},
{
  "type" : "filters.assign",
  "assignment": "Classification[:]=17",
  "condition":"UserData[1:1]"
},


>
> Thanks in advance for your help
>
> Miguel
>
> On Thu, May 14, 2020 at 1:01 PM Andrew Bell <andrew.bell.ia at gmail.com>
> wrote:
>
>> filters.csf is a ground filter, so it classifies everything as either
>> ground or unclassified.
>>
>> On Thu, May 14, 2020 at 3:41 PM Miguel Guerrero <
>> g.miguel.guerrero.m at gmail.com> wrote:
>>
>>> Hello,
>>> I hope this email finds you well.
>>> First off, thanks for a great job implementing the PDAL for Python.
>>> I have a LiDAR dataset in LAS format that has been pre-classified. I
>>> want to apply some filters to one or multiples classes. I followed the
>>> samples shown on https://pdal.io/stages/filters.html and
>>> https://github.com/PDAL/python. I am able to get the filters to work
>>> but the final output only contains the classes 1 and/or 2, when in reality
>>> I would like to get the rest of the classes that were not used in the
>>> filtering process.
>>> Any direction or suggestion would be greatly appreciated.
>>>
>>> My best regards,
>>>
>>> Miguel
>>>
>>> Here is my code:
>>>
>>> import os
>>>
>>> # Input and validation of source directory
>>> while True:
>>>     srcDirectory = os.path.normpath(input("Enter directory containing LAS files: "))
>>>     if os.path.exists(srcDirectory) is True and srcDirectory != ".":
>>>         break
>>>     else:
>>>         print(srcDirectory, "is not a valid directory")
>>>
>>> # Input and validation of destination directory
>>> while True:
>>>     dstDirectory = os.path.normpath(input("Enter directory to store processed files: "))
>>>     if os.path.exists(dstDirectory) is True and dstDirectory != ".":
>>>         break
>>>     else:
>>>         print (dstDirectory, "is not a valid directory")
>>>
>>> print ("")
>>>
>>> # Change the working directory to the source directory
>>> os.chdir(srcDirectory)
>>> print ("Working directory is" + " " + os.getcwd())
>>>
>>> # Blank line for better visualization
>>> print ("")
>>>
>>> # Create list of files in source directory
>>> filesList = os.listdir(srcDirectory)
>>>
>>> for file in filesList:
>>>     if file.endswith('las'):
>>>         fileIn = (srcDirectory + "\\" + file).replace('\\', '/')
>>>         fileOut = (dstDirectory + "\\" + file).replace('\\', '/')
>>>
>>>         json = """
>>>             {
>>>               "pipeline": [
>>>                 {
>>>                     "type": "readers.las",
>>>                     "filename": "%s"
>>>                 }
>>>               ]
>>>             }"""
>>>
>>>         import pdal
>>>         import numpy as np
>>>         pipeline = pdal.Pipeline(json % fileIn)
>>>         count = pipeline.execute()
>>>
>>>         arr = pipeline.arrays[0]
>>>         print(len(arr))
>>>
>>>         lasClass26 = arr[arr['Classification'] == 26]
>>>         print(len(lasClass26))
>>>
>>>         clamp = u"""{
>>>           "pipeline":[
>>>             {
>>>                 "type":"filters.csf"
>>>             },
>>>             {
>>>                 "type":"filters.range",
>>>                 "limits":"Classification[0:30]"
>>>             },
>>>             "%s"
>>>           ]
>>>         }""" % (fileOut)
>>>
>>>         p = pdal.Pipeline(clamp, [lasClass26])
>>>         count = p.execute()
>>>         clamped = p.arrays[0]
>>>         print(count)
>>>
>>> _______________________________________________
>>> pdal mailing list
>>> pdal at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>>
>>
>> --
>> Andrew Bell
>> andrew.bell.ia at gmail.com
>>
>

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200514/718835f8/attachment.html>

From klassen.js at gmail.com  Tue May 26 12:04:35 2020
From: klassen.js at gmail.com (Jim Klassen)
Date: Tue, 26 May 2020 14:04:35 -0500
Subject: [pdal] pdal tindex srs
Message-ID: <f718bd79-8e38-a3e3-0261-3d4fbe9781e5@gmail.com>

 From what I can tell, when `pdal tindex` stores an EPSG srs in a tileindex, it omits the vertical component.  (I haven't tested if this also applies to when it stores proj strings).

I have a tile index with LAZ files in heterogeneous projections, so the "srs" column is important.  Some of those files are in, for example, "EPSG:3071+5703" (NAD83(HARN) / Wisconsin Transverse Mercator + NAVD88 height), but only "EPSG:3071" gets stored in the "srs" column.

When reading the tindex with "readers.tindex" (with "readers.tindex.t_srs=EPSG:6344+5703" to transform everything into a uniform srs for processing), this causes the LAZ file to be read as if it was "EPSG:3071" which then causes pdal to incorrectly apply a vertical transformation from ellipsoidal height to NAVD88.

If I manually update the tileindex srs column to EPSG:3071+5703, then 'readers.tindex' works as expected.


Is there something I am missing that would include the vertical/compound SRS in the srs column (as EPSG or WKT or or proj strings or whatever else readers.tindex will accept) when generating the tile index?

Is there a way to convince "readers.tindex" to read the SRS from the LAZ header instead of the tileindex column?


I'm running a recent build from master of pdal, built against GDAL 3.1 and PROJ 7 (with all the relevant grid files installed).

From howard at hobu.co  Tue May 26 12:15:22 2020
From: howard at hobu.co (Howard Butler)
Date: Tue, 26 May 2020 14:15:22 -0500
Subject: [pdal] pdal tindex srs
In-Reply-To: <f718bd79-8e38-a3e3-0261-3d4fbe9781e5@gmail.com>
References: <f718bd79-8e38-a3e3-0261-3d4fbe9781e5@gmail.com>
Message-ID: <06EF47C6-CFC8-41C0-9BAA-CC167E911123@hobu.co>



> On May 26, 2020, at 2:04 PM, Jim Klassen <klassen.js at gmail.com> wrote:
> 
> From what I can tell, when `pdal tindex` stores an EPSG srs in a tileindex, it omits the vertical component.  (I haven't tested if this also applies to when it stores proj strings).

Bug. It's trying to auto-identify an EPSG code for you when it writes the tile index. Please file a bug to change this to write compound WKT.

> Is there a way to convince "readers.tindex" to read the SRS from the LAZ header instead of the tileindex column?

This should maybe be the default behavior anyway for readers.tindex. The SRS column in the tile index is a convenience for upstream users of the tile index files themselves, not for PDAL. It would be one way to do some kind of default/override scenario, but that is not as common as do the expected thing of reading the SRS from the files. Please file a ticket on this one too.

Howard

From klassen.js at gmail.com  Tue May 26 12:22:53 2020
From: klassen.js at gmail.com (Jim Klassen)
Date: Tue, 26 May 2020 14:22:53 -0500
Subject: [pdal] pdal tindex srs
In-Reply-To: <06EF47C6-CFC8-41C0-9BAA-CC167E911123@hobu.co>
References: <f718bd79-8e38-a3e3-0261-3d4fbe9781e5@gmail.com>
 <06EF47C6-CFC8-41C0-9BAA-CC167E911123@hobu.co>
Message-ID: <356d01c0-e71d-5aeb-38fd-91e3dc6d98c6@gmail.com>



On 5/26/20 2:15 PM, Howard Butler wrote:
>
>> On May 26, 2020, at 2:04 PM, Jim Klassen <klassen.js at gmail.com> wrote:
>>
>>  From what I can tell, when `pdal tindex` stores an EPSG srs in a tileindex, it omits the vertical component.  (I haven't tested if this also applies to when it stores proj strings).
> Bug. It's trying to auto-identify an EPSG code for you when it writes the tile index. Please file a bug to change this to write compound WKT.
>
>> Is there a way to convince "readers.tindex" to read the SRS from the LAZ header instead of the tileindex column?
> This should maybe be the default behavior anyway for readers.tindex. The SRS column in the tile index is a convenience for upstream users of the tile index files themselves, not for PDAL. It would be one way to do some kind of default/override scenario, but that is not as common as do the expected thing of reading the SRS from the files. Please file a ticket on this one too.
>
> Howard

Will do.

From albi.dony at hotmail.com  Wed May 27 00:27:03 2020
From: albi.dony at hotmail.com (Albion SHABANI)
Date: Wed, 27 May 2020 07:27:03 +0000
Subject: [pdal] Entwine convert e57
Message-ID: <VI1PR1001MB10070E208441FF3209673C62FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>

Hello,

I am Albion and I just discovered entwine. Before I was familiar with Potree.

It's really amazing what you achieved, congratulations! Entwine seems to be a working good.

I have a lot of questions for entwine.

Can entwine convert e57 to etp?  Is there any new docker with a newer version of pdal that is able to do that, i tried with the docker from the official Web page and it didn't work. Normally pdal is able to read e57 files.

Also is there any Exemple showing how to read a file from S3 and write it to S3 directly?

And as I could understand entwine is not able to decimate a file, is that right ? (I would like to reduce the number of points).

Do I need to pay anything if I use entwine? Is there any new features coming soon?


Thank you very much for your help.

Best regards,
Albion


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200527/f525008e/attachment.html>

From howard at hobu.co  Wed May 27 06:27:13 2020
From: howard at hobu.co (Howard Butler)
Date: Wed, 27 May 2020 08:27:13 -0500
Subject: [pdal] Entwine convert e57
In-Reply-To: <VI1PR1001MB10070E208441FF3209673C62FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
References: <VI1PR1001MB10070E208441FF3209673C62FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <3B7AD636-7775-436A-B820-066A8A8A1417@hobu.co>



> On May 27, 2020, at 2:27 AM, Albion SHABANI <albi.dony at hotmail.com> wrote:
> 
> Can entwine convert e57 to etp?  Is there any new docker with a newer version of pdal that is able to do that, i tried with the docker from the official Web page and it didn't work. Normally pdal is able to read e57 files. 

This might work using the Conda builds. Alternatively, you should build your own stack so you know what is activated and available.

> Also is there any Exemple showing how to read a file from S3 and write it to S3 directly? 

There should be some in the test suite.

> And as I could understand entwine is not able to decimate a file, is that right ? (I would like to reduce the number of points). 

It would be simpler to use Entwine to process and organize a large group of files and then decimate the data to whatever maximum resolution you wish with the 'resolution' parameter on readers.ept.

> Do I need to pay anything if I use entwine?

No.

> Is there any new features coming soon? 

Not really, but if you pay our team for consulting on Entwine, you can help directly guide its direction and steer the priorities. Alternatively, you can provide patches for Entwine that achieve your team's goals.

Howard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200527/830bff98/attachment-0001.html>

From rshepard at appl-ecosys.com  Wed May 27 07:36:03 2020
From: rshepard at appl-ecosys.com (Rich Shepard)
Date: Wed, 27 May 2020 07:36:03 -0700 (PDT)
Subject: [pdal] Pdal-2.1.0 and libproj
Message-ID: <alpine.LNX.2.20.2005270729240.8505@salmo.appl-ecosys.com>

I'm running Slackware-14.2/x86_64 and both proj-7.0.1 and pdal-2.1.0 are
installed.

When building GRASS 7.9.dev from the git repo the attempt fails because it's
looking for 'v.in.pdal: error while loading shared libraries: libproj.so.15:
cannot open shared object file: No such file or directory.'

That's because proj-7.0.1 installs libproj.so.19.

GRASS supports proj7 and I need to learn how to allow pdal to use the newer
libproj.

I need your advice, suggestions, and recommendations.

Regards,

Rich


From andrew.bell.ia at gmail.com  Wed May 27 07:46:30 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 27 May 2020 10:46:30 -0400
Subject: [pdal] Pdal-2.1.0 and libproj
In-Reply-To: <alpine.LNX.2.20.2005270729240.8505@salmo.appl-ecosys.com>
References: <alpine.LNX.2.20.2005270729240.8505@salmo.appl-ecosys.com>
Message-ID: <CACJ51z3MUeEjDMc3h02121exNZbGdq+8Dh1TSO0CbTR_-Y2byw@mail.gmail.com>

You should see if GRASS support is available.  This really isn't a PDAL
issue.  PDAL doesn't link PROJ at all, though it does link GDAL, which may
have a PROJ dependency.

There's nothing that precludes having multiple versions of PROJ installed
on your system at once.

On Wed, May 27, 2020 at 10:36 AM Rich Shepard <rshepard at appl-ecosys.com>
wrote:

> I'm running Slackware-14.2/x86_64 and both proj-7.0.1 and pdal-2.1.0 are
> installed.
>
> When building GRASS 7.9.dev from the git repo the attempt fails because
> it's
> looking for 'v.in.pdal: error while loading shared libraries:
> libproj.so.15:
> cannot open shared object file: No such file or directory.'
>
> That's because proj-7.0.1 installs libproj.so.19.
>
> GRASS supports proj7 and I need to learn how to allow pdal to use the newer
> libproj.
>
> I need your advice, suggestions, and recommendations.
>
> Regards,
>
> Rich
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200527/5cac5953/attachment.html>

From rshepard at appl-ecosys.com  Wed May 27 07:53:14 2020
From: rshepard at appl-ecosys.com (Rich Shepard)
Date: Wed, 27 May 2020 07:53:14 -0700 (PDT)
Subject: [pdal] Pdal-2.1.0 and libproj
In-Reply-To: <CACJ51z3MUeEjDMc3h02121exNZbGdq+8Dh1TSO0CbTR_-Y2byw@mail.gmail.com>
References: <alpine.LNX.2.20.2005270729240.8505@salmo.appl-ecosys.com>
 <CACJ51z3MUeEjDMc3h02121exNZbGdq+8Dh1TSO0CbTR_-Y2byw@mail.gmail.com>
Message-ID: <alpine.LNX.2.20.2005270750500.8505@salmo.appl-ecosys.com>

On Wed, 27 May 2020, Andrew Bell wrote:

> You should see if GRASS support is available. This really isn't a PDAL
> issue. PDAL doesn't link PROJ at all, though it does link GDAL, which may
> have a PROJ dependency.

Andrew,

I've been communicating with the grass devs on the mail list. If I correctly
understand your response, the issue is not with PDAL but with grass' support
of proj7. Is this correct?

> There's nothing that precludes having multiple versions of PROJ installed
> on your system at once.

That's interesting. If I install an earlier PROJ version just so grass sees
it I don't need to recompile geos and gdal. I can give this a try.

Thanks,

Rich

From klassen.js at gmail.com  Wed May 27 08:14:49 2020
From: klassen.js at gmail.com (Jim Klassen)
Date: Wed, 27 May 2020 10:14:49 -0500
Subject: [pdal] Pdal-2.1.0 and libproj
In-Reply-To: <alpine.LNX.2.20.2005270750500.8505@salmo.appl-ecosys.com>
References: <alpine.LNX.2.20.2005270729240.8505@salmo.appl-ecosys.com>
 <CACJ51z3MUeEjDMc3h02121exNZbGdq+8Dh1TSO0CbTR_-Y2byw@mail.gmail.com>
 <alpine.LNX.2.20.2005270750500.8505@salmo.appl-ecosys.com>
Message-ID: <bf71af63-dcab-6680-a166-6de697cbd663@gmail.com>



On 5/27/20 9:53 AM, Rich Shepard wrote:
> On Wed, 27 May 2020, Andrew Bell wrote:
>
>> You should see if GRASS support is available. This really isn't a PDAL
>> issue. PDAL doesn't link PROJ at all, though it does link GDAL, which may
>> have a PROJ dependency.
For PDAL, I had to rebuild libgeotiff and GDAL against the new proj.  And for GDAL, I disabled spatialite because the system spatialite pulled in the old proj.  Having proj.4 and proj 7 linked into the same binary resulted in all kinds of strange crashes.

I haven't built grass in awhile so I don't know how that fits in with the new proj.

>
> Andrew,
>
> I've been communicating with the grass devs on the mail list. If I correctly
> understand your response, the issue is not with PDAL but with grass' support
> of proj7. Is this correct?
>
>> There's nothing that precludes having multiple versions of PROJ installed
>> on your system at once.
>
> That's interesting. If I install an earlier PROJ version just so grass sees
> it I don't need to recompile geos and gdal. I can give this a try.
>
> Thanks,
>
> Rich
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal


From albi.dony at hotmail.com  Wed May 27 08:58:59 2020
From: albi.dony at hotmail.com (Albion SHABANI)
Date: Wed, 27 May 2020 15:58:59 +0000
Subject: [pdal] Entwine performance (recommended hardware)
In-Reply-To: <VI1PR1001MB10070E208441FF3209673C62FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
References: <VI1PR1001MB10070E208441FF3209673C62FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <VI1PR1001MB1007C74D00C5FB6B72718CE2FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>

Hello ,


I have very large files like : >500Go and bigger (e57 and las).

What is the average time to convert these amount of data with Entwine (using the docker : https://hub.docker.com/r/connormanning/entwine) or is even possible ?

What hardware configuration would you recommend ( ? CPU and ? RAM) ?

Best Regards,
Albion

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200527/2a18cf4f/attachment.html>

From luipir at gmail.com  Wed May 27 09:28:55 2020
From: luipir at gmail.com (Luigi Pirelli)
Date: Wed, 27 May 2020 18:28:55 +0200
Subject: [pdal] Entwine performance (recommended hardware)
In-Reply-To: <VI1PR1001MB1007C74D00C5FB6B72718CE2FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
References: <VI1PR1001MB10070E208441FF3209673C62FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
 <VI1PR1001MB1007C74D00C5FB6B72718CE2FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <CAFO80_rrE7xa0GWuWebManxsEvXtR-G57WCuO5izLB92yjbVJA@mail.gmail.com>

Hi

I did mine 30GB laz repo in less than 1 day with an old i7 4core and 16GB
ram and SSD.

To avoid any memory problems you should (thanks to the help of Adam steer)

1) morton ordering all files (this facilitate a lot processing)
eg with:
#!/bin/bash
files=$( ls ./*.laz | sort )
for file in ${files}
do
    filename=$( basename ${file} )
    echo "Morton ordering: $file"
    if [[ -f ./morton_ordered/${filename} ]]; then
echo "... already processed"
        continue
    fi
    pdal translate -i ${file} -o "./morton_ordered/${filename}" --filter
mortonorder
    if [ $? -ne 0 ]; then
        echo "failed with: $?"
        exit 1
    fi
done

2) then build in parts e.g. with
total_parts=256
for (( part=1; part<=$total_parts; part++ ))
do
    echo "************************* ${part} of ${total_parts}"
    entwine build -i ./morton_ordered/ -o ./entwine/Avila/ --tmp
./temp_process/ --threads 1 -s $part $total_parts
    if [ $? -ne 0 ]; then
        echo "$part/$total_parts exit with error: $?"
        exit 1
    fi
done

I leaved thread to 1 to reduce memory occupation during runtime... I do not
know what would be the limit. For sure using all 8 thread will create crash
for me and my data

3) do entwine merging with:
entiwine merge <path for generated in step 2>

regards

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Wed, 27 May 2020 at 17:59, Albion SHABANI <albi.dony at hotmail.com> wrote:

> Hello ,
>
>
> I have very large files like : >500Go and bigger (e57 and las).
>
> What is the average time to convert these amount of data with Entwine
> (using the docker : https://hub.docker.com/r/connormanning/entwine) or is
> even possible ?
>
> What hardware configuration would you recommend ( ? CPU and ? RAM) ?
>
> Best Regards,
> Albion
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200527/e63eca3e/attachment-0001.html>

From lucadeluge at gmail.com  Thu May 28 08:53:23 2020
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Thu, 28 May 2020 17:53:23 +0200
Subject: [pdal] Pdal-2.1.0 and libproj
In-Reply-To: <bf71af63-dcab-6680-a166-6de697cbd663@gmail.com>
References: <alpine.LNX.2.20.2005270729240.8505@salmo.appl-ecosys.com>
 <CACJ51z3MUeEjDMc3h02121exNZbGdq+8Dh1TSO0CbTR_-Y2byw@mail.gmail.com>
 <alpine.LNX.2.20.2005270750500.8505@salmo.appl-ecosys.com>
 <bf71af63-dcab-6680-a166-6de697cbd663@gmail.com>
Message-ID: <CAK4m-3x_9wzdYA-b-9Y7LSLhmE+UjhO-UoqMm1gv5pombCifaw@mail.gmail.com>

On Wed, 27 May 2020 at 17:14, Jim Klassen <klassen.js at gmail.com> wrote:
>
>
> I haven't built grass in awhile so I don't know how that fits in with the new proj.
>

GRASS should be compatible with PROJ > 6

https://github.com/OSGeo/grass/pull/183


-- 
ciao
Luca

www.lucadelu.org

From albi.dony at hotmail.com  Fri May 29 01:56:54 2020
From: albi.dony at hotmail.com (Albion SHABANI)
Date: Fri, 29 May 2020 08:56:54 +0000
Subject: [pdal] Entwine performance (recommended hardware)
In-Reply-To: <VI1PR1001MB1007C74D00C5FB6B72718CE2FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
References: <VI1PR1001MB10070E208441FF3209673C62FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>,
 <VI1PR1001MB1007C74D00C5FB6B72718CE2FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <PR3PR10MB3962397E3F3414A150816856FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>

Thank you for your advice.

I have to convert lots of files (like more than 1To and counting) for different projects.

I have one with 500g almost (451 las files)

I tried to build all of the input files at once but even If I have an EC2 with 16CPU and 128 Gio RAM it did not work (memory at 100%), convertion killed by the system. I don't know if the memory problem is the use of docker image.

So, I am trying your solution (Luigi) to avoid memory problems.

For example, If I have 500go to convert so let's say 700 las files.

If I want to convert them, I have to specify maximum number of files per sequence ? or just give total_part=700

In your case u have 256, this number is the number of las files in that folder ? or it is the maximum number of las files in a sequence to be put by entwine.

I have the feeling that if I leave the total_parts at 700, entwine is putting everything in the first sequence and when I will merge there will be only one id (nothing to merge).  So it's the same problem as if i launch all of them at once !

Thank you very much for your help, I'm struggling to understand how does this work and be able to convert lots of files with entwine.

and by the way from this docker https://hub.docker.com/r/connormanning/entwine entwine does not work with e57 files !!

Best regards,
Albion

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200529/beacc921/attachment.html>

From luipir at gmail.com  Fri May 29 02:13:30 2020
From: luipir at gmail.com (Luigi Pirelli)
Date: Fri, 29 May 2020 11:13:30 +0200
Subject: [pdal] Entwine performance (recommended hardware)
In-Reply-To: <PR3PR10MB3962397E3F3414A150816856FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
References: <VI1PR1001MB10070E208441FF3209673C62FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
 <VI1PR1001MB1007C74D00C5FB6B72718CE2FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
 <PR3PR10MB3962397E3F3414A150816856FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <CAFO80_q=gRMfwj4JF4250ktpzJWnpWePrpMMPb+eSDzMCU4_PA@mail.gmail.com>

On Fri, 29 May 2020 at 10:57, Albion SHABANI <albi.dony at hotmail.com> wrote:

> Thank you for your advice.
>
> I have to convert lots of files (like more than 1To and counting) for
> different projects.
>
> I have one with 500g almost (451 las files)
>
> I tried to build all of the input files at once but even If I have an EC2
> with 16CPU and 128 Gio RAM it did not work (memory at 100%), convertion
> killed by the system. I don't know if the memory problem is the use of
> docker image.
>

no... it's not a docker problem, but (AFAIK) allocating meomory for all
that points to maintain a scale independent visualization. BTW pdal crew
can be more precise on thsi aspect.


> So, I am trying your solution (Luigi) to avoid memory problems.
>
> For example, If I have 500go to convert so let's say 700 las files.
>
> If I want to convert them, I have to specify maximum number of files per
> sequence ? or just give total_part=700
>

> In your case u have 256, this number is the number of las files in that
> folder ? or it is the maximum number of las files in a sequence to be put
> by entwine.
>

that's a documentation fault and mine toio... I've to contribute back to
documentation adding more datails. Parts is the number of suwares in which
the covered areas have to be divided => HAVE to be a 2^ number => low
number => big areas and points to index => BIIIIIG memory use! There you
have to find a compromise with processing time and memory occupation.

>
> I have the feeling that if I leave the total_parts at 700, entwine is
> putting everything in the first sequence and when I will merge there will
> be only one id (nothing to merge).  So it's the same problem as if i launch
> all of them at once !
>

"I leave the total_parts at 700" could be a bug... should give error
because in not a 2^ number. BTW it's amost important for the processing
time to spatially order all points in morton ordering, this facilitate a
lot the building of the indexes and memory occupation.

>
> Thank you very much for your help, I'm struggling to understand how does
> this work and be able to convert lots of files with entwine.
>
> and by the way from this docker
> https://hub.docker.com/r/connormanning/entwine *entwine does not work
> with e57 files !!*
>

I see many traffic in dev list/ciommits about this... btw during morton
ordering with pdal you can also translate in other formats becasue pdal is
able to manage e57

>
> Best regards,
> Albion
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal


Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200529/af978936/attachment-0001.html>

From albi.dony at hotmail.com  Fri May 29 03:54:08 2020
From: albi.dony at hotmail.com (Albion SHABANI)
Date: Fri, 29 May 2020 10:54:08 +0000
Subject: [pdal] Fw: Entwine performance (recommended hardware)
In-Reply-To: <PR3PR10MB3962DF170920C3012936F230FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
References: <VI1PR1001MB10070E208441FF3209673C62FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>,
 <VI1PR1001MB1007C74D00C5FB6B72718CE2FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>,
 <PR3PR10MB3962397E3F3414A150816856FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>,
 <PR3PR10MB3962775211BA86A1A8686BB8FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>,
 <PR3PR10MB3962DF170920C3012936F230FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <PR3PR10MB39625EB5FE6B8AF1CD23B572FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>

thanks again,
okay i'll try this.
I launched one project (44Go 64 las files) with the script that you sent (processing with pdal translate than build and merge). It's running : it's still in pdal translate, apparently this takes too much. Maybe Tomorow I'll have a result.

And I have another project with 528 las files (223Go):

This one I am trying to do it without pdal translate, directly start with build -s and then merge because pdal translate is taking to much time. I have  total_parts=256

But when I start it I have this warning/error  :
ing: ill-formed UTF-8 byte; last read: '"20200519_musigny-1er-035ar_1}'
        - /entwine/Musigny_clean/Musigny_clean00505.las: Failed to analyze: [json.exception.parse_error.101] parse error at line 54, column 52: syntax error while parsing value - invalid string: ill-formed UTF-8 byte; last read: '"20200519_musigny-1er-081ar_1}'
        - /entwine/Musigny_clean/Musigny_clean00527.las: Failed to analyze: [json.exception.parse_error.101] parse error at line 54, column 52: syntax error while parsing value - invalid string: ill-formed UTF-8 byte; last read: '"20200519_musigny-1er-103ar_1}'
Subset: 1/256

Adding 8 - /entwine/Musigny_clean/Musigny_clean00020.las
Adding 16 - /entwine/Musigny_clean/Musigny_clean00005.las
Adding 98 - /entwine/Musigny_clean/Musigny_clean00012.las
00:10 - 0% - 0 - 0 (0) M/h
00:20 - 0% - 0 - 0 (0) M/h
00:30 - 0% - 0 - 0 (0) M/h
00:40 - 0% - 0 - 0 (0) M/h
'
for every las in the folder

why entwine is not being able to convert these las and is skipping them ?

PS. I had an e57 files of 223Go (composed with 528 scans) I converted it with e572las  (-split_scans)

Best,
Albion




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200529/1822e9ec/attachment.html>

From adam.d.steer at gmail.com  Fri May 29 03:59:33 2020
From: adam.d.steer at gmail.com (adam steer)
Date: Fri, 29 May 2020 20:59:33 +1000
Subject: [pdal] Entwine performance (recommended hardware)
In-Reply-To: <CAFO80_q=gRMfwj4JF4250ktpzJWnpWePrpMMPb+eSDzMCU4_PA@mail.gmail.com>
References: <VI1PR1001MB10070E208441FF3209673C62FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
 <VI1PR1001MB1007C74D00C5FB6B72718CE2FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
 <PR3PR10MB3962397E3F3414A150816856FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
 <CAFO80_q=gRMfwj4JF4250ktpzJWnpWePrpMMPb+eSDzMCU4_PA@mail.gmail.com>
Message-ID: <CAFORoyikGyhXqm5ZU0KgbokcrtJwcR2wx_9a88p6aM+CYYj1xg@mail.gmail.com>

Hey Albion,

Heading into using entwine, Its super important to stop thinking about the
number of files with points in them and start thinking about the area your
data cover, the number of points you have and how they’re distributed in
space.

This explains how subset builds work:

https://entwine.io/configuration.html#subset

… so for a 1tb dataset (of one file or many files) you can build a subset
at a time, as long as you use subset numbers like 4,16,64 … 256 etc. You
can get a single machine to build all the subsets in a loop (like I do, and
like Luigi demonstrated), or use clever AWS tools to build each subset at
the same time in parallel (like team PDAL does, and some other users I
know). In either case vary the subset size and threadedness to control
memory usage.

If your points are evenly distributed, memory management is easier. If
they’re not, choosing a subset size is harder.

Morton order filtering was a tip from Connor Manning, it helps entwine hold
fewer parts open in memory by stacking points which are near each other in
space near each other in the source files.

The current docker build of entwine has PDAL complied without e57. Try

docker run -it --entrypoint /bin/bash connormanning/entwine


to get a shell in the container then:


pdal --drivers | grep readers


…to see what readers are compiled.


 Maybe look at rolling your own entwine docker container if you need the
e57 driver built.

Hope that helps, and of course both team Hobu and people like myself are
open for paid consulting around this stuff (they’re better, this thread has
all my tricks already… but I can crank the handle and get results if you
just need a shortcut to a win). And thanks Luigi for explanations thus far!

Regards,

Adam


On Fri, 29 May 2020 at 19:17, Luigi Pirelli <luipir at gmail.com> wrote:

>
> On Fri, 29 May 2020 at 10:57, Albion SHABANI <albi.dony at hotmail.com>
> wrote:
>
>> Thank you for your advice.
>>
>> I have to convert lots of files (like more than 1To and counting) for
>> different projects.
>>
>> I have one with 500g almost (451 las files)
>>
>> I tried to build all of the input files at once but even If I have an EC2
>> with 16CPU and 128 Gio RAM it did not work (memory at 100%), convertion
>> killed by the system. I don't know if the memory problem is the use of
>> docker image.
>>
>
> no... it's not a docker problem, but (AFAIK) allocating meomory for all
> that points to maintain a scale independent visualization. BTW pdal crew
> can be more precise on thsi aspect.
>
>
>> So, I am trying your solution (Luigi) to avoid memory problems.
>>
>> For example, If I have 500go to convert so let's say 700 las files.
>>
>> If I want to convert them, I have to specify maximum number of files per
>> sequence ? or just give total_part=700
>>
>
>> In your case u have 256, this number is the number of las files in that
>> folder ? or it is the maximum number of las files in a sequence to be put
>> by entwine.
>>
>
> that's a documentation fault and mine toio... I've to contribute back to
> documentation adding more datails. Parts is the number of suwares in which
> the covered areas have to be divided => HAVE to be a 2^ number => low
> number => big areas and points to index => BIIIIIG memory use! There you
> have to find a compromise with processing time and memory occupation.
>
>>
>> I have the feeling that if I leave the total_parts at 700, entwine is
>> putting everything in the first sequence and when I will merge there will
>> be only one id (nothing to merge).  So it's the same problem as if i launch
>> all of them at once !
>>
>
> "I leave the total_parts at 700" could be a bug... should give error
> because in not a 2^ number. BTW it's amost important for the processing
> time to spatially order all points in morton ordering, this facilitate a
> lot the building of the indexes and memory occupation.
>
>>
>> Thank you very much for your help, I'm struggling to understand how does
>> this work and be able to convert lots of files with entwine.
>>
>> and by the way from this docker
>> https://hub.docker.com/r/connormanning/entwine *entwine does not work
>> with e57 files !!*
>>
>
> I see many traffic in dev list/ciommits about this... btw during morton
> ordering with pdal you can also translate in other formats becasue pdal is
> able to manage e57
>
>>
>> Best regards,
>> Albion
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>
> Luigi Pirelli
>
>
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Book: Mastering QGIS3 - 3rd Edition
> <https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
> * Hire a team: http://www.qcooperative.net
>
> **************************************************************************************************
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
Dr. Adam Steer
http://spatialised.net
https://www.researchgate.net/profile/Adam_Steer
http://au.linkedin.com/in/adamsteer
http://orcid.org/0000-0003-0046-7236
+61 427 091 712 ::  @adamdsteer

Suits are bad for business: http://www.spatialised.net/business-penguins/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200529/5943d77b/attachment-0001.html>

From albi.dony at hotmail.com  Fri May 29 05:23:24 2020
From: albi.dony at hotmail.com (Albion SHABANI)
Date: Fri, 29 May 2020 12:23:24 +0000
Subject: [pdal] Entwine performance (recommended hardware)
Message-ID: <PR3PR10MB3962F229EDED75805D3E4604FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>

Thanks to all for your help.

I have this file 2012.Go here http://shorturl.at/qsBZ5

My goal is to find a solution to convert it with Entwine in less than 30 minutes.

Can someone help me write the script or how much will it cost for doing this.

I am open to any propositions

Thanks for your help.

For an agreement you can contact me here : albi.dony at hotmail.com

Best regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200529/6e1b6e55/attachment.html>

From andrew.bell.ia at gmail.com  Fri May 29 05:27:51 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Fri, 29 May 2020 08:27:51 -0400
Subject: [pdal] Fw: Entwine performance (recommended hardware)
In-Reply-To: <PR3PR10MB39625EB5FE6B8AF1CD23B572FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
References: <VI1PR1001MB10070E208441FF3209673C62FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
 <VI1PR1001MB1007C74D00C5FB6B72718CE2FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
 <PR3PR10MB3962397E3F3414A150816856FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
 <PR3PR10MB3962775211BA86A1A8686BB8FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
 <PR3PR10MB3962DF170920C3012936F230FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
 <PR3PR10MB39625EB5FE6B8AF1CD23B572FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <CACJ51z1r41r+4xqWDqbZ_O_7Rt77JKLJUPDhcf5b=D1arcJg-A@mail.gmail.com>

You give point counts, but I'm interested in other stats.  How many
points?  Is your source LAS/LAZ or E57?  What is the desired CRS of the
data?  Does the data have the same CRS on input?  Is your data reasonably
well distributed over the bounding area?  How large is the actual
bounding area?

Thanks,


On Fri, May 29, 2020 at 6:56 AM Albion SHABANI <albi.dony at hotmail.com>
wrote:

> thanks again,
> okay i'll try this.
> I launched one project (44Go 64 las files) with the script that you sent
> (processing with pdal translate than build and merge). It's running : it's
> still in pdal translate, apparently this takes too much. Maybe Tomorow I'll
> have a result.
>
> And I have another project with 528 las files (223Go):
>
> This one I am trying to do it without pdal translate, directly start with
> build -s and then merge because pdal translate is taking to much time. I
> have  total_parts=256
>
> But when I start it I have this warning/error  :
>
>
>
>
>
>
>
>
>
>
>
> *ing: ill-formed UTF-8 byte; last read: '"20200519_musigny-1er-035ar_1}'
>       - /entwine/Musigny_clean/Musigny_clean00505.las: Failed to analyze:
> [json.exception.parse_error.101] parse error at line 54, column 52: syntax
> error while parsing value - invalid string: ill-formed UTF-8 byte; last
> read: '"20200519_musigny-1er-081ar_1}'         -
> /entwine/Musigny_clean/Musigny_clean00527.las: Failed to analyze:
> [json.exception.parse_error.101] parse error at line 54, column 52: syntax
> error while parsing value - invalid string: ill-formed UTF-8 byte; last
> read: '"20200519_musigny-1er-103ar_1}' Subset: 1/256 Adding 8 -
> /entwine/Musigny_clean/Musigny_clean00020.las Adding 16 -
> /entwine/Musigny_clean/Musigny_clean00005.las Adding 98 -
> /entwine/Musigny_clean/Musigny_clean00012.las 00:10 - 0% - 0 - 0 (0) M/h
> 00:20 - 0% - 0 - 0 (0) M/h 00:30 - 0% - 0 - 0 (0) M/h 00:40 - 0% - 0 - 0
> (0) M/h*
> *'*
> *for every las in the folder*
>
> why entwine is not being able to convert these las and is skipping them ?
>
> PS. I had an e57 files of 223Go (composed with 528 scans) I converted it
> with e572las  (-split_scans)
>
> Best,
> Albion
>
>
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200529/a008796f/attachment.html>

From andrew.bell.ia at gmail.com  Fri May 29 05:28:29 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Fri, 29 May 2020 08:28:29 -0400
Subject: [pdal] Fw: Entwine performance (recommended hardware)
In-Reply-To: <CACJ51z1r41r+4xqWDqbZ_O_7Rt77JKLJUPDhcf5b=D1arcJg-A@mail.gmail.com>
References: <VI1PR1001MB10070E208441FF3209673C62FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
 <VI1PR1001MB1007C74D00C5FB6B72718CE2FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
 <PR3PR10MB3962397E3F3414A150816856FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
 <PR3PR10MB3962775211BA86A1A8686BB8FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
 <PR3PR10MB3962DF170920C3012936F230FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
 <PR3PR10MB39625EB5FE6B8AF1CD23B572FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
 <CACJ51z1r41r+4xqWDqbZ_O_7Rt77JKLJUPDhcf5b=D1arcJg-A@mail.gmail.com>
Message-ID: <CACJ51z0BHqb1DxrSRNj9s66sQg072P3hxv0UnxCCRZNAetrTuA@mail.gmail.com>

Oops.  First sentence wrong.  You give actual total data sizes, not point
counts.

On Fri, May 29, 2020 at 8:27 AM Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

>
> You give point counts, but I'm interested in other stats.  How many
> points?  Is your source LAS/LAZ or E57?  What is the desired CRS of the
> data?  Does the data have the same CRS on input?  Is your data reasonably
> well distributed over the bounding area?  How large is the actual
> bounding area?
>
> Thanks,
>
>
> On Fri, May 29, 2020 at 6:56 AM Albion SHABANI <albi.dony at hotmail.com>
> wrote:
>
>> thanks again,
>> okay i'll try this.
>> I launched one project (44Go 64 las files) with the script that you sent
>> (processing with pdal translate than build and merge). It's running : it's
>> still in pdal translate, apparently this takes too much. Maybe Tomorow I'll
>> have a result.
>>
>> And I have another project with 528 las files (223Go):
>>
>> This one I am trying to do it without pdal translate, directly start with
>> build -s and then merge because pdal translate is taking to much time. I
>> have  total_parts=256
>>
>> But when I start it I have this warning/error  :
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>> *ing: ill-formed UTF-8 byte; last read: '"20200519_musigny-1er-035ar_1}'
>>         - /entwine/Musigny_clean/Musigny_clean00505.las: Failed to analyze:
>> [json.exception.parse_error.101] parse error at line 54, column 52: syntax
>> error while parsing value - invalid string: ill-formed UTF-8 byte; last
>> read: '"20200519_musigny-1er-081ar_1}'         -
>> /entwine/Musigny_clean/Musigny_clean00527.las: Failed to analyze:
>> [json.exception.parse_error.101] parse error at line 54, column 52: syntax
>> error while parsing value - invalid string: ill-formed UTF-8 byte; last
>> read: '"20200519_musigny-1er-103ar_1}' Subset: 1/256 Adding 8 -
>> /entwine/Musigny_clean/Musigny_clean00020.las Adding 16 -
>> /entwine/Musigny_clean/Musigny_clean00005.las Adding 98 -
>> /entwine/Musigny_clean/Musigny_clean00012.las 00:10 - 0% - 0 - 0 (0) M/h
>> 00:20 - 0% - 0 - 0 (0) M/h 00:30 - 0% - 0 - 0 (0) M/h 00:40 - 0% - 0 - 0
>> (0) M/h*
>> *'*
>> *for every las in the folder*
>>
>> why entwine is not being able to convert these las and is skipping them ?
>>
>> PS. I had an e57 files of 223Go (composed with 528 scans) I converted it
>> with e572las  (-split_scans)
>>
>> Best,
>> Albion
>>
>>
>>
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>
>
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>


-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200529/66f0beec/attachment-0001.html>

From albi.dony at hotmail.com  Fri May 29 05:38:53 2020
From: albi.dony at hotmail.com (Albion SHABANI)
Date: Fri, 29 May 2020 12:38:53 +0000
Subject: [pdal] Fw: Entwine performance (recommended hardware)
In-Reply-To: <CACJ51z0BHqb1DxrSRNj9s66sQg072P3hxv0UnxCCRZNAetrTuA@mail.gmail.com>
References: <VI1PR1001MB10070E208441FF3209673C62FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
 <VI1PR1001MB1007C74D00C5FB6B72718CE2FBB10@VI1PR1001MB1007.EURPRD10.PROD.OUTLOOK.COM>
 <PR3PR10MB3962397E3F3414A150816856FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
 <PR3PR10MB3962775211BA86A1A8686BB8FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
 <PR3PR10MB3962DF170920C3012936F230FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
 <PR3PR10MB39625EB5FE6B8AF1CD23B572FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
 <CACJ51z1r41r+4xqWDqbZ_O_7Rt77JKLJUPDhcf5b=D1arcJg-A@mail.gmail.com>,
 <CACJ51z0BHqb1DxrSRNj9s66sQg072P3hxv0UnxCCRZNAetrTuA@mail.gmail.com>
Message-ID: <PR3PR10MB3962CFE257A451639CFD0A67FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>

it was en e57 file, I converted it with e572las and obtained the 528 las files.
Its point clouds scanned with fixed scanners (FARO).

There is no CRS because it is static point cloud. Over the bounding area the points are maybe not distributed reasonably since it depends of the size of the scans.

Thanks

________________________________
From: Andrew Bell <andrew.bell.ia at gmail.com>
Sent: Friday, May 29, 2020 2:28 PM
To: Albion SHABANI <albi.dony at hotmail.com>
Cc: pdal at lists.osgeo.org <pdal at lists.osgeo.org>
Subject: Re: [pdal] Fw: Entwine performance (recommended hardware)

Oops.  First sentence wrong.  You give actual total data sizes, not point counts.

On Fri, May 29, 2020 at 8:27 AM Andrew Bell <andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>> wrote:

You give point counts, but I'm interested in other stats.  How many points?  Is your source LAS/LAZ or E57?  What is the desired CRS of the data?  Does the data have the same CRS on input?  Is your data reasonably well distributed over the bounding area?  How large is the actual bounding area?

Thanks,


On Fri, May 29, 2020 at 6:56 AM Albion SHABANI <albi.dony at hotmail.com<mailto:albi.dony at hotmail.com>> wrote:
thanks again,
okay i'll try this.
I launched one project (44Go 64 las files) with the script that you sent (processing with pdal translate than build and merge). It's running : it's still in pdal translate, apparently this takes too much. Maybe Tomorow I'll have a result.

And I have another project with 528 las files (223Go):

This one I am trying to do it without pdal translate, directly start with build -s and then merge because pdal translate is taking to much time. I have  total_parts=256

But when I start it I have this warning/error  :
ing: ill-formed UTF-8 byte; last read: '"20200519_musigny-1er-035ar_1}'
        - /entwine/Musigny_clean/Musigny_clean00505.las: Failed to analyze: [json.exception.parse_error.101] parse error at line 54, column 52: syntax error while parsing value - invalid string: ill-formed UTF-8 byte; last read: '"20200519_musigny-1er-081ar_1}'
        - /entwine/Musigny_clean/Musigny_clean00527.las: Failed to analyze: [json.exception.parse_error.101] parse error at line 54, column 52: syntax error while parsing value - invalid string: ill-formed UTF-8 byte; last read: '"20200519_musigny-1er-103ar_1}'
Subset: 1/256

Adding 8 - /entwine/Musigny_clean/Musigny_clean00020.las
Adding 16 - /entwine/Musigny_clean/Musigny_clean00005.las
Adding 98 - /entwine/Musigny_clean/Musigny_clean00012.las
00:10 - 0% - 0 - 0 (0) M/h
00:20 - 0% - 0 - 0 (0) M/h
00:30 - 0% - 0 - 0 (0) M/h
00:40 - 0% - 0 - 0 (0) M/h
'
for every las in the folder

why entwine is not being able to convert these las and is skipping them ?

PS. I had an e57 files of 223Go (composed with 528 scans) I converted it with e572las  (-split_scans)

Best,
Albion




_______________________________________________
pdal mailing list
pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/pdal


--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>


--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200529/987fc2a2/attachment.html>

From albi.dony at hotmail.com  Fri May 29 05:41:46 2020
From: albi.dony at hotmail.com (Albion SHABANI)
Date: Fri, 29 May 2020 12:41:46 +0000
Subject: [pdal] Entwine performance (recommended hardware)
In-Reply-To: <CACJ51z17x=YkUNyuuZVsN5u4L_u14QywHUfaBCJ7BDRXHMqQ=w@mail.gmail.com>
References: <PR3PR10MB3962F229EDED75805D3E4604FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>,
 <CACJ51z17x=YkUNyuuZVsN5u4L_u14QywHUfaBCJ7BDRXHMqQ=w@mail.gmail.com>
Message-ID: <PR3PR10MB396298D04DC70A3954C7E893FB8F0@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>


The file size is 212Go, it is an e57 file. It contains 451 scans.

It is made with fixed scanners (FARO), no CRS.


________________________________
From: Andrew Bell <andrew.bell.ia at gmail.com>
Sent: Friday, May 29, 2020 2:30 PM
To: Albion SHABANI <albi.dony at hotmail.com>
Subject: Re: [pdal] Entwine performance (recommended hardware)

How large is that file?  Point count?  Actual size?

On Fri, May 29, 2020 at 8:23 AM Albion SHABANI <albi.dony at hotmail.com<mailto:albi.dony at hotmail.com>> wrote:
Thanks to all for your help.

I have this file 2012.Go here http://shorturl.at/qsBZ5

My goal is to find a solution to convert it with Entwine in less than 30 minutes.

Can someone help me write the script or how much will it cost for doing this.

I am open to any propositions

Thanks for your help.

For an agreement you can contact me here : albi.dony at hotmail.com<mailto:albi.dony at hotmail.com>

Best regards
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/pdal


--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200529/f1bc9f12/attachment-0001.html>

