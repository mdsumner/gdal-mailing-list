From pidgeon13 at googlemail.com  Mon Jan 15 09:13:01 2018
From: pidgeon13 at googlemail.com (pidgeon13 at googlemail.com)
Date: Mon, 15 Jan 2018 17:13:01 +0000
Subject: [pdal] Non-English characters
Message-ID: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>

Hi,

I am looking to allow non-English characters in pathnames when passing them to PDAL readers, however inferReaderDriver and add(“filename”, .) both accept std::strings as arguments. Does PDAL support using file paths that include Unicode characters? Will I need to implement something with UTF-8?

Many thanks,

Stephen

Sent from Mail for Windows 10

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180115/5a13bd8d/attachment.html>

From howard at hobu.co  Mon Jan 15 09:23:17 2018
From: howard at hobu.co (Howard Butler)
Date: Mon, 15 Jan 2018 11:23:17 -0600
Subject: [pdal] Non-English characters
In-Reply-To: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
Message-ID: <0aa9b659-cde0-4e7b-93db-526ae2163da1@hobu.co>

Please file a bug in https://github.com/PDAL/PDAL/ on this topic and we
will try to improve the situation in PDAL 1.7.

Note that we will implement UTF-8 for both unix/windows and not UTF-16
"wide" windows characters, however.

Howard


On 1/15/18 11:13 AM, pidgeon13 at googlemail.com wrote:
> Hi,
>
> I am looking to allow non-English characters in pathnames when passing them to PDAL readers, however inferReaderDriver and add(“filename”, .) both accept std::strings as arguments. Does PDAL support using file paths that include Unicode characters? Will I need to implement something with UTF-8?
>
> Many thanks,
>
> Stephen
>
> Sent from Mail for Windows 10
>
>
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal


-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 548 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180115/2f1dc2cc/attachment.sig>

From andrew.bell.ia at gmail.com  Mon Jan 15 09:24:23 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 15 Jan 2018 12:24:23 -0500
Subject: [pdal] Non-English characters
In-Reply-To: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
Message-ID: <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>

On Mon, Jan 15, 2018 at 12:13 PM, <pidgeon13 at googlemail.com> wrote:

> Hi,
>
>
>
> I am looking to allow non-English characters in pathnames when passing
> them to PDAL readers, however inferReaderDriver and add(“filename”, .) both
> accept std::strings as arguments. Does PDAL support using file paths that
> include Unicode characters? Will I need to implement something with UTF-8?
>

I believe that UTF-8 should work fine provided the drivers that open the
files can deal with it.  It's possible that we're doing some parsing of
paths that may not take this into account, but I'm not sure.  If you have
examples of this not working, let me know and I'll take a look.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180115/68720bd3/attachment.html>

From pidgeon13 at googlemail.com  Tue Jan 16 04:48:05 2018
From: pidgeon13 at googlemail.com (pidgeon13 at googlemail.com)
Date: Tue, 16 Jan 2018 12:48:05 +0000
Subject: [pdal] Non-English characters
In-Reply-To: <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
 <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>
Message-ID: <5a5df485.1a9b500a.47110.bd59@mx.google.com>

Hi Andrew,

It seems to me that passing UTF-8 std::strings to the readers doesn’t seem to work. I created a folder with foreign characters and placed a few different points files inside, but am not getting a useful PointView when executing the table (there’s either an exception thrown or there are no points). These same files are read fine when they are in a purely English folder path.

I've attached a code snippet and the information from the strings that are being passed to readerOptions.add(), if you want some more information I can try to provide it. 

Regards,

Stephen

Sent from Mail for Windows 10

From: Andrew Bell
Sent: 15 January 2018 17:24
To: Stephen Pidgeon
Cc: pdal at lists.osgeo.org
Subject: Re: [pdal] Non-English characters

On Mon, Jan 15, 2018 at 12:13 PM, <pidgeon13 at googlemail.com> wrote:
Hi,
 
I am looking to allow non-English characters in pathnames when passing them to PDAL readers, however inferReaderDriver and add(“filename”, .) both accept std::strings as arguments. Does PDAL support using file paths that include Unicode characters? Will I need to implement something with UTF-8?

I believe that UTF-8 should work fine provided the drivers that open the files can deal with it.  It's possible that we're doing some parsing of paths that may not take this into account, but I'm not sure.  If you have examples of this not working, let me know and I'll take a look.

-- 
Andrew Bell
andrew.bell.ia at gmail.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180116/72653782/attachment.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pdal code snippet.txt
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180116/72653782/attachment.txt>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pdal strings.txt
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180116/72653782/attachment-0001.txt>

From andrew.bell.ia at gmail.com  Tue Jan 16 04:53:26 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 16 Jan 2018 07:53:26 -0500
Subject: [pdal] Non-English characters
In-Reply-To: <5a5df485.1a9b500a.47110.bd59@mx.google.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
 <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>
 <5a5df485.1a9b500a.47110.bd59@mx.google.com>
Message-ID: <CACJ51z1WNWE0U7O+1y-4ypE30CCr8VupqcZeipEaoiB4bRjKsQ@mail.gmail.com>

In your example, the filenames don't have non-ascii characters, just the
directory names. Do you have an example where the actual filenames are
non-ascii that fails?

On Tue, Jan 16, 2018 at 7:48 AM, <pidgeon13 at googlemail.com> wrote:

> Hi Andrew,
>
>
>
> It seems to me that passing UTF-8 std::strings to the readers doesn’t seem
> to work. I created a folder with foreign characters and placed a few
> different points files inside, but am not getting a useful PointView when
> executing the table (there’s either an exception thrown or there are no
> points). These same files are read fine when they are in a purely English
> folder path.
>
>
>
> I've attached a code snippet and the information from the strings that are
> being passed to readerOptions.add(), if you want some more information I
> can try to provide it.
>
>
>
> Regards,
>
>
>
> Stephen
>
>
>
> Sent from Mail <https://go.microsoft.com/fwlink/?LinkId=550986> for
> Windows 10
>
>
>
> *From: *Andrew Bell <andrew.bell.ia at gmail.com>
> *Sent: *15 January 2018 17:24
> *To: *Stephen Pidgeon <pidgeon13 at googlemail.com>
> *Cc: *pdal at lists.osgeo.org
> *Subject: *Re: [pdal] Non-English characters
>
>
>
> On Mon, Jan 15, 2018 at 12:13 PM, <pidgeon13 at googlemail.com> wrote:
>
> Hi,
>
>
>
> I am looking to allow non-English characters in pathnames when passing
> them to PDAL readers, however inferReaderDriver and add(“filename”, .) both
> accept std::strings as arguments. Does PDAL support using file paths that
> include Unicode characters? Will I need to implement something with UTF-8?
>
>
>
> I believe that UTF-8 should work fine provided the drivers that open the
> files can deal with it.  It's possible that we're doing some parsing of
> paths that may not take this into account, but I'm not sure.  If you have
> examples of this not working, let me know and I'll take a look.
>
>
>
> --
>
> Andrew Bell
> andrew.bell.ia at gmail.com
>
>
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180116/ed9449ac/attachment.html>

From andrew.bell.ia at gmail.com  Tue Jan 16 05:05:17 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 16 Jan 2018 08:05:17 -0500
Subject: [pdal] Non-English characters
In-Reply-To: <CACJ51z1WNWE0U7O+1y-4ypE30CCr8VupqcZeipEaoiB4bRjKsQ@mail.gmail.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
 <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>
 <5a5df485.1a9b500a.47110.bd59@mx.google.com>
 <CACJ51z1WNWE0U7O+1y-4ypE30CCr8VupqcZeipEaoiB4bRjKsQ@mail.gmail.com>
Message-ID: <CACJ51z3DT6Fck2zs=bcyA-gxt0e-SouRvmYqbL3+BEWFuwU2mg@mail.gmail.com>

Also, can you provide the platform you're using on which you're having
problems?

On Tue, Jan 16, 2018 at 7:53 AM, Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

> In your example, the filenames don't have non-ascii characters, just the
> directory names. Do you have an example where the actual filenames are
> non-ascii that fails?
>
> On Tue, Jan 16, 2018 at 7:48 AM, <pidgeon13 at googlemail.com> wrote:
>
>> Hi Andrew,
>>
>>
>>
>> It seems to me that passing UTF-8 std::strings to the readers doesn’t
>> seem to work. I created a folder with foreign characters and placed a few
>> different points files inside, but am not getting a useful PointView when
>> executing the table (there’s either an exception thrown or there are no
>> points). These same files are read fine when they are in a purely English
>> folder path.
>>
>>
>>
>> I've attached a code snippet and the information from the strings that
>> are being passed to readerOptions.add(), if you want some more information
>> I can try to provide it.
>>
>>
>>
>> Regards,
>>
>>
>>
>> Stephen
>>
>>
>>
>> Sent from Mail <https://go.microsoft.com/fwlink/?LinkId=550986> for
>> Windows 10
>>
>>
>>
>> *From: *Andrew Bell <andrew.bell.ia at gmail.com>
>> *Sent: *15 January 2018 17:24
>> *To: *Stephen Pidgeon <pidgeon13 at googlemail.com>
>> *Cc: *pdal at lists.osgeo.org
>> *Subject: *Re: [pdal] Non-English characters
>>
>>
>>
>> On Mon, Jan 15, 2018 at 12:13 PM, <pidgeon13 at googlemail.com> wrote:
>>
>> Hi,
>>
>>
>>
>> I am looking to allow non-English characters in pathnames when passing
>> them to PDAL readers, however inferReaderDriver and add(“filename”, .) both
>> accept std::strings as arguments. Does PDAL support using file paths that
>> include Unicode characters? Will I need to implement something with UTF-8?
>>
>>
>>
>> I believe that UTF-8 should work fine provided the drivers that open the
>> files can deal with it.  It's possible that we're doing some parsing of
>> paths that may not take this into account, but I'm not sure.  If you have
>> examples of this not working, let me know and I'll take a look.
>>
>>
>>
>> --
>>
>> Andrew Bell
>> andrew.bell.ia at gmail.com
>>
>>
>>
>
>
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180116/5d9c9ec3/attachment-0001.html>

From howard at hobu.co  Tue Jan 16 08:15:11 2018
From: howard at hobu.co (Howard Butler)
Date: Tue, 16 Jan 2018 10:15:11 -0600
Subject: [pdal] OSGeo Bonn Sprint March 18-25
Message-ID: <CC98C7CF-4047-47C5-951B-158ADDCF33CC@hobu.co>

All,

A significant number of PDAL developers will be attending the OSGeo Bonn Code Sprint [1], and we are hoping that this code sprint has an emphasis on projects and developers doing things with point clouds. Currently 8 of the expected 34 developers have "PDAL" on their topic list, and and we would be happy to have more.

I have put together a wiki page [2] with a few topics that might be tackled at the code sprint, but as we can't focus on everything, we will need to filter it down to a few items that we can achieve in the time available. Most of the code sprint activities are discussion and collaboration between projects, and we expect to continue that tradition by collaborating with the Potree, Entwine, and Greyhoud projects too.

Please contact me if your organization wishes to send someone to participate, or your organization is interested in financially sponsoring the event. Code sprint sponsorship is one way your organization can support some of the value you get from software like PDAL, and the annual code sprint has been the primary collaboration event for open source point cloud software such as LAStools, PDAL, libLAS, Greyhound, Entwine, and Potree.

Howard

[1] https://wiki.osgeo.org/wiki/OSGeo_Code_Sprint_2018 <https://wiki.osgeo.org/wiki/OSGeo_Code_Sprint_2018>
[2] https://github.com/PDAL/PDAL/wiki/Bonn-Code-Sprint-Ideas <https://github.com/PDAL/PDAL/wiki/Bonn-Code-Sprint-Ideas>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180116/87fab406/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 528 bytes
Desc: Message signed with OpenPGP
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180116/87fab406/attachment.sig>

From pidgeon13 at googlemail.com  Tue Jan 16 09:09:04 2018
From: pidgeon13 at googlemail.com (pidgeon13 at googlemail.com)
Date: Tue, 16 Jan 2018 17:09:04 +0000
Subject: [pdal] Non-English characters
In-Reply-To: <CACJ51z3DT6Fck2zs=bcyA-gxt0e-SouRvmYqbL3+BEWFuwU2mg@mail.gmail.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
 <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>
 <5a5df485.1a9b500a.47110.bd59@mx.google.com>
 <CACJ51z1WNWE0U7O+1y-4ypE30CCr8VupqcZeipEaoiB4bRjKsQ@mail.gmail.com>
 <CACJ51z3DT6Fck2zs=bcyA-gxt0e-SouRvmYqbL3+BEWFuwU2mg@mail.gmail.com>
Message-ID: <5a5e31b0.99451c0a.ff9b.defa@mx.google.com>

Hi,

Attached is such a file. I am developing on Windows, specifically in VS2015.

Stephen

Sent from Mail for Windows 10

From: Andrew Bell
Sent: 16 January 2018 13:05
To: Stephen Pidgeon
Cc: pdal at lists.osgeo.org
Subject: Re: [pdal] Non-English characters

Also, can you provide the platform you're using on which you're having problems?

On Tue, Jan 16, 2018 at 7:53 AM, Andrew Bell <andrew.bell.ia at gmail.com> wrote:
In your example, the filenames don't have non-ascii characters, just the directory names. Do you have an example where the actual filenames are non-ascii that fails?

On Tue, Jan 16, 2018 at 7:48 AM, <pidgeon13 at googlemail.com> wrote:
Hi Andrew,
 
It seems to me that passing UTF-8 std::strings to the readers doesn’t seem to work. I created a folder with foreign characters and placed a few different points files inside, but am not getting a useful PointView when executing the table (there’s either an exception thrown or there are no points). These same files are read fine when they are in a purely English folder path.
 
I've attached a code snippet and the information from the strings that are being passed to readerOptions.add(), if you want some more information I can try to provide it. 
 
Regards,
 
Stephen
 
Sent from Mail for Windows 10
 
From: Andrew Bell
Sent: 15 January 2018 17:24
To: Stephen Pidgeon
Cc: pdal at lists.osgeo.org
Subject: Re: [pdal] Non-English characters
 
On Mon, Jan 15, 2018 at 12:13 PM, <pidgeon13 at googlemail.com> wrote:
Hi,
 
I am looking to allow non-English characters in pathnames when passing them to PDAL readers, however inferReaderDriver and add(“filename”, .) both accept std::strings as arguments. Does PDAL support using file paths that include Unicode characters? Will I need to implement something with UTF-8?
 
I believe that UTF-8 should work fine provided the drivers that open the files can deal with it.  It's possible that we're doing some parsing of paths that may not take this into account, but I'm not sure.  If you have examples of this not working, let me know and I'll take a look.
 
-- 
Andrew Bell
andrew.bell.ia at gmail.com
 




-- 
Andrew Bell
andrew.bell.ia at gmail.com




-- 
Andrew Bell
andrew.bell.ia at gmail.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180116/18e7389a/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: рфддвбс.ply
Type: application/octet-stream
Size: 52840 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180116/18e7389a/attachment-0001.obj>

From mateusz at loskot.net  Tue Jan 16 09:35:46 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 16 Jan 2018 18:35:46 +0100
Subject: [pdal] Non-English characters
In-Reply-To: <5a5e31b0.99451c0a.ff9b.defa@mx.google.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
 <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>
 <5a5df485.1a9b500a.47110.bd59@mx.google.com>
 <CACJ51z1WNWE0U7O+1y-4ypE30CCr8VupqcZeipEaoiB4bRjKsQ@mail.gmail.com>
 <CACJ51z3DT6Fck2zs=bcyA-gxt0e-SouRvmYqbL3+BEWFuwU2mg@mail.gmail.com>
 <5a5e31b0.99451c0a.ff9b.defa@mx.google.com>
Message-ID: <CABUeae8tawujwAasO3Gjd56WPyH=LDODDng-Rq3RHKZ_VgjkxQ@mail.gmail.com>

On 16 January 2018 at 18:09,  <pidgeon13 at googlemail.com> wrote:
>
> Attached is such a file. I am developing on Windows, specifically in VS2015.

How do you pass non-ASCII path to PDAL?

By prompting for it via a GUI file browser then passing down to PDAL?

By hard-coding such path as string literal in source code, eg. .cpp file?

Check https://docs.microsoft.com/en-us/cpp/build/reference/utf-8-set-source-and-executable-character-sets-to-utf-8
for:

By default, Visual Studio detects a byte-order mark to determine if
the source file is in an encoded Unicode format, for example, UTF-16
or UTF-8.
If no byte-order mark is found, it assumes the source file is encoded
using the current user code page, unless you have specified a code
page by using /utf-8 or the /source-charset option


Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From andrew.bell.ia at gmail.com  Tue Jan 16 18:24:28 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 16 Jan 2018 21:24:28 -0500
Subject: [pdal] Non-English characters
In-Reply-To: <5a5e31b0.99451c0a.ff9b.defa@mx.google.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
 <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>
 <5a5df485.1a9b500a.47110.bd59@mx.google.com>
 <CACJ51z1WNWE0U7O+1y-4ypE30CCr8VupqcZeipEaoiB4bRjKsQ@mail.gmail.com>
 <CACJ51z3DT6Fck2zs=bcyA-gxt0e-SouRvmYqbL3+BEWFuwU2mg@mail.gmail.com>
 <5a5e31b0.99451c0a.ff9b.defa@mx.google.com>
Message-ID: <CACJ51z23bAB1WzKDCWkyYu_c-cjc9tTFNc6OizWPyjs7Fzcqbw@mail.gmail.com>

This works fine on OSX:

master $ bin/pdal info ~/Downloads/рфддвбс.ply

How, exactly, are you invoking pdal or using the API such that it fails?

On Tue, Jan 16, 2018 at 12:09 PM, <pidgeon13 at googlemail.com> wrote:

> Hi,
>
>
>
> Attached is such a file. I am developing on Windows, specifically in
> VS2015.
>
>
>
> Stephen
>
>
>
> Sent from Mail <https://go.microsoft.com/fwlink/?LinkId=550986> for
> Windows 10
>
>
>
> *From: *Andrew Bell <andrew.bell.ia at gmail.com>
> *Sent: *16 January 2018 13:05
>
> *To: *Stephen Pidgeon <pidgeon13 at googlemail.com>
> *Cc: *pdal at lists.osgeo.org
> *Subject: *Re: [pdal] Non-English characters
>
>
>
> Also, can you provide the platform you're using on which you're having
> problems?
>
>
>
> On Tue, Jan 16, 2018 at 7:53 AM, Andrew Bell <andrew.bell.ia at gmail.com>
> wrote:
>
> In your example, the filenames don't have non-ascii characters, just the
> directory names. Do you have an example where the actual filenames are
> non-ascii that fails?
>
>
>
> On Tue, Jan 16, 2018 at 7:48 AM, <pidgeon13 at googlemail.com> wrote:
>
> Hi Andrew,
>
>
>
> It seems to me that passing UTF-8 std::strings to the readers doesn’t seem
> to work. I created a folder with foreign characters and placed a few
> different points files inside, but am not getting a useful PointView when
> executing the table (there’s either an exception thrown or there are no
> points). These same files are read fine when they are in a purely English
> folder path.
>
>
>
> I've attached a code snippet and the information from the strings that are
> being passed to readerOptions.add(), if you want some more information I
> can try to provide it.
>
>
>
> Regards,
>
>
>
> Stephen
>
>
>
> Sent from Mail <https://go.microsoft.com/fwlink/?LinkId=550986> for
> Windows 10
>
>
>
> *From: *Andrew Bell <andrew.bell.ia at gmail.com>
> *Sent: *15 January 2018 17:24
> *To: *Stephen Pidgeon <pidgeon13 at googlemail.com>
> *Cc: *pdal at lists.osgeo.org
> *Subject: *Re: [pdal] Non-English characters
>
>
>
> On Mon, Jan 15, 2018 at 12:13 PM, <pidgeon13 at googlemail.com> wrote:
>
> Hi,
>
>
>
> I am looking to allow non-English characters in pathnames when passing
> them to PDAL readers, however inferReaderDriver and add(“filename”, .) both
> accept std::strings as arguments. Does PDAL support using file paths that
> include Unicode characters? Will I need to implement something with UTF-8?
>
>
>
> I believe that UTF-8 should work fine provided the drivers that open the
> files can deal with it.  It's possible that we're doing some parsing of
> paths that may not take this into account, but I'm not sure.  If you have
> examples of this not working, let me know and I'll take a look.
>
>
>
> --
>
> Andrew Bell
> andrew.bell.ia at gmail.com
>
>
>
>
>
>
>
> --
>
> Andrew Bell
> andrew.bell.ia at gmail.com
>
>
>
>
>
> --
>
> Andrew Bell
> andrew.bell.ia at gmail.com
>
>
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180116/d48f60bd/attachment.html>

From pidgeon13 at googlemail.com  Wed Jan 17 01:31:01 2018
From: pidgeon13 at googlemail.com (pidgeon13 at googlemail.com)
Date: Wed, 17 Jan 2018 09:31:01 +0000
Subject: [pdal] Non-English characters
In-Reply-To: <CACJ51z23bAB1WzKDCWkyYu_c-cjc9tTFNc6OizWPyjs7Fzcqbw@mail.gmail.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
 <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>
 <5a5df485.1a9b500a.47110.bd59@mx.google.com>
 <CACJ51z1WNWE0U7O+1y-4ypE30CCr8VupqcZeipEaoiB4bRjKsQ@mail.gmail.com>
 <CACJ51z3DT6Fck2zs=bcyA-gxt0e-SouRvmYqbL3+BEWFuwU2mg@mail.gmail.com>
 <5a5e31b0.99451c0a.ff9b.defa@mx.google.com>
 <CACJ51z23bAB1WzKDCWkyYu_c-cjc9tTFNc6OizWPyjs7Fzcqbw@mail.gmail.com>
Message-ID: <5a5f17d5.6d90500a.d9ff3.7e60@mx.google.com>

Hi,

The user browses for a file in a dialog file browser, and I convert this string to UTF-8. I then pass this to pdal using the API as shown in the attached text file. I am using /utf-8.

I have also run:

“C:\Users\stephenp\PDAL\bin>pdal.exe info C:\Users\stephenp\PDALe\рфддвбс.ply” which gave the following:

PDAL: File not found: C:\Users\stephenp\PDALe\???????.ply

Regards,

Stephen

Sent from Mail for Windows 10

From: Andrew Bell
Sent: 17 January 2018 02:24
To: Stephen Pidgeon
Cc: pdal at lists.osgeo.org
Subject: Re: [pdal] Non-English characters

This works fine on OSX:

master $ bin/pdal info ~/Downloads/рфддвбс.ply

How, exactly, are you invoking pdal or using the API such that it fails?

On Tue, Jan 16, 2018 at 12:09 PM, <pidgeon13 at googlemail.com> wrote:
Hi,
 
Attached is such a file. I am developing on Windows, specifically in VS2015.
 
Stephen
 
Sent from Mail for Windows 10
 
From: Andrew Bell
Sent: 16 January 2018 13:05

To: Stephen Pidgeon
Cc: pdal at lists.osgeo.org
Subject: Re: [pdal] Non-English characters
 
Also, can you provide the platform you're using on which you're having problems?
 
On Tue, Jan 16, 2018 at 7:53 AM, Andrew Bell <andrew.bell.ia at gmail.com> wrote:
In your example, the filenames don't have non-ascii characters, just the directory names. Do you have an example where the actual filenames are non-ascii that fails?
 
On Tue, Jan 16, 2018 at 7:48 AM, <pidgeon13 at googlemail.com> wrote:
Hi Andrew,
 
It seems to me that passing UTF-8 std::strings to the readers doesn’t seem to work. I created a folder with foreign characters and placed a few different points files inside, but am not getting a useful PointView when executing the table (there’s either an exception thrown or there are no points). These same files are read fine when they are in a purely English folder path.
 
I've attached a code snippet and the information from the strings that are being passed to readerOptions.add(), if you want some more information I can try to provide it. 
 
Regards,
 
Stephen
 
Sent from Mail for Windows 10
 
From: Andrew Bell
Sent: 15 January 2018 17:24
To: Stephen Pidgeon
Cc: pdal at lists.osgeo.org
Subject: Re: [pdal] Non-English characters
 
On Mon, Jan 15, 2018 at 12:13 PM, <pidgeon13 at googlemail.com> wrote:
Hi,
 
I am looking to allow non-English characters in pathnames when passing them to PDAL readers, however inferReaderDriver and add(“filename”, .) both accept std::strings as arguments. Does PDAL support using file paths that include Unicode characters? Will I need to implement something with UTF-8?
 
I believe that UTF-8 should work fine provided the drivers that open the files can deal with it.  It's possible that we're doing some parsing of paths that may not take this into account, but I'm not sure.  If you have examples of this not working, let me know and I'll take a look.
 
-- 
Andrew Bell
andrew.bell.ia at gmail.com
 



 
-- 
Andrew Bell
andrew.bell.ia at gmail.com



 
-- 
Andrew Bell
andrew.bell.ia at gmail.com
 




-- 
Andrew Bell
andrew.bell.ia at gmail.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180117/500bf095/attachment-0001.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pdal code snippet.txt
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180117/500bf095/attachment-0001.txt>

From mateusz at loskot.net  Wed Jan 17 01:59:48 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 17 Jan 2018 10:59:48 +0100
Subject: [pdal] Non-English characters
In-Reply-To: <5a5f17d5.6d90500a.d9ff3.7e60@mx.google.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
 <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>
 <5a5df485.1a9b500a.47110.bd59@mx.google.com>
 <CACJ51z1WNWE0U7O+1y-4ypE30CCr8VupqcZeipEaoiB4bRjKsQ@mail.gmail.com>
 <CACJ51z3DT6Fck2zs=bcyA-gxt0e-SouRvmYqbL3+BEWFuwU2mg@mail.gmail.com>
 <5a5e31b0.99451c0a.ff9b.defa@mx.google.com>
 <CACJ51z23bAB1WzKDCWkyYu_c-cjc9tTFNc6OizWPyjs7Fzcqbw@mail.gmail.com>
 <5a5f17d5.6d90500a.d9ff3.7e60@mx.google.com>
Message-ID: <CABUeae9DgtqGgaLL-bSX__cJxVAsvBoqkSrrcEpLLZfOguMfNQ@mail.gmail.com>

On 17 January 2018 at 10:31,  <pidgeon13 at googlemail.com> wrote:
>
> The user browses for a file in a dialog file browser, and I convert this
> string to UTF-8

How do you convert to UTF-8?

Please, you need to show some code (one image for 1000 words).

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From pidgeon13 at googlemail.com  Wed Jan 17 02:02:16 2018
From: pidgeon13 at googlemail.com (pidgeon13 at googlemail.com)
Date: Wed, 17 Jan 2018 10:02:16 +0000
Subject: [pdal] Non-English characters
In-Reply-To: <CABUeae9DgtqGgaLL-bSX__cJxVAsvBoqkSrrcEpLLZfOguMfNQ@mail.gmail.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
 <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>
 <5a5df485.1a9b500a.47110.bd59@mx.google.com>
 <CACJ51z1WNWE0U7O+1y-4ypE30CCr8VupqcZeipEaoiB4bRjKsQ@mail.gmail.com>
 <CACJ51z3DT6Fck2zs=bcyA-gxt0e-SouRvmYqbL3+BEWFuwU2mg@mail.gmail.com>
 <5a5e31b0.99451c0a.ff9b.defa@mx.google.com>
 <CACJ51z23bAB1WzKDCWkyYu_c-cjc9tTFNc6OizWPyjs7Fzcqbw@mail.gmail.com>
 <5a5f17d5.6d90500a.d9ff3.7e60@mx.google.com>
 <CABUeae9DgtqGgaLL-bSX__cJxVAsvBoqkSrrcEpLLZfOguMfNQ@mail.gmail.com>
Message-ID: <5a5f1f28.4243190a.5b1bd.6376@mx.google.com>

std::string sFilePath = CW2A(filepath, CP_UTF8);

Regards,

Stephen

Sent from Mail for Windows 10

From: Mateusz Loskot
Sent: 17 January 2018 10:00
To: pidgeon13 at googlemail.com
Cc: Andrew Bell; pdal at lists.osgeo.org
Subject: Re: [pdal] Non-English characters

On 17 January 2018 at 10:31,  <pidgeon13 at googlemail.com> wrote:
>
> The user browses for a file in a dialog file browser, and I convert this
> string to UTF-8

How do you convert to UTF-8?

Please, you need to show some code (one image for 1000 words).

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180117/87dd6003/attachment.html>

From mateusz at loskot.net  Wed Jan 17 02:08:33 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 17 Jan 2018 11:08:33 +0100
Subject: [pdal] Non-English characters
In-Reply-To: <5a5f1f28.4243190a.5b1bd.6376@mx.google.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
 <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>
 <5a5df485.1a9b500a.47110.bd59@mx.google.com>
 <CACJ51z1WNWE0U7O+1y-4ypE30CCr8VupqcZeipEaoiB4bRjKsQ@mail.gmail.com>
 <CACJ51z3DT6Fck2zs=bcyA-gxt0e-SouRvmYqbL3+BEWFuwU2mg@mail.gmail.com>
 <5a5e31b0.99451c0a.ff9b.defa@mx.google.com>
 <CACJ51z23bAB1WzKDCWkyYu_c-cjc9tTFNc6OizWPyjs7Fzcqbw@mail.gmail.com>
 <5a5f17d5.6d90500a.d9ff3.7e60@mx.google.com>
 <CABUeae9DgtqGgaLL-bSX__cJxVAsvBoqkSrrcEpLLZfOguMfNQ@mail.gmail.com>
 <5a5f1f28.4243190a.5b1bd.6376@mx.google.com>
Message-ID: <CABUeae9CrQMa-391bM9KDhzxf-Pqj200Xm6+VP2KQ7LWmfTozQ@mail.gmail.com>

See what the docs [1] say about the A in CW2A.

Meanwhile, you need to use WideCharToMultiByte [2] with CP_UTF8 code page.

[1] https://msdn.microsoft.com/en-us/library/87zae4a3.aspx
[2] https://msdn.microsoft.com/en-us/library/windows/desktop/dd374130.aspx


On 17 January 2018 at 11:02,  <pidgeon13 at googlemail.com> wrote:
> std::string sFilePath = CW2A(filepath, CP_UTF8);
>
>
>
> Regards,
>
>
>
> Stephen
>
>
>
> Sent from Mail for Windows 10
>
>
>
> From: Mateusz Loskot
> Sent: 17 January 2018 10:00
> To: pidgeon13 at googlemail.com
> Cc: Andrew Bell; pdal at lists.osgeo.org
> Subject: Re: [pdal] Non-English characters
>
>
>
> On 17 January 2018 at 10:31,  <pidgeon13 at googlemail.com> wrote:
>
>>
>
>> The user browses for a file in a dialog file browser, and I convert this
>
>> string to UTF-8
>
>
>
> How do you convert to UTF-8?
>
>
>
> Please, you need to show some code (one image for 1000 words).
>
>
>
> Best regards,
>
> --
>
> Mateusz Loskot, http://mateusz.loskot.net
>
>



-- 
Mateusz Loskot, http://mateusz.loskot.net

From pidgeon13 at googlemail.com  Wed Jan 17 02:17:48 2018
From: pidgeon13 at googlemail.com (pidgeon13 at googlemail.com)
Date: Wed, 17 Jan 2018 10:17:48 +0000
Subject: [pdal] Non-English characters
In-Reply-To: <CABUeae9CrQMa-391bM9KDhzxf-Pqj200Xm6+VP2KQ7LWmfTozQ@mail.gmail.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
 <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>
 <5a5df485.1a9b500a.47110.bd59@mx.google.com>
 <CACJ51z1WNWE0U7O+1y-4ypE30CCr8VupqcZeipEaoiB4bRjKsQ@mail.gmail.com>
 <CACJ51z3DT6Fck2zs=bcyA-gxt0e-SouRvmYqbL3+BEWFuwU2mg@mail.gmail.com>
 <5a5e31b0.99451c0a.ff9b.defa@mx.google.com>
 <CACJ51z23bAB1WzKDCWkyYu_c-cjc9tTFNc6OizWPyjs7Fzcqbw@mail.gmail.com>
 <5a5f17d5.6d90500a.d9ff3.7e60@mx.google.com>
 <CABUeae9DgtqGgaLL-bSX__cJxVAsvBoqkSrrcEpLLZfOguMfNQ@mail.gmail.com>
 <5a5f1f28.4243190a.5b1bd.6376@mx.google.com>
 <CABUeae9CrQMa-391bM9KDhzxf-Pqj200Xm6+VP2KQ7LWmfTozQ@mail.gmail.com>
Message-ID: <5a5f22cc.e88e500a.a5b3c.a475@mx.google.com>

I have included another piece of code, which is what I tried first using WideCharToMultiByte. Should this perform the conversion correctly?

Regards,

Stephen

Sent from Mail for Windows 10

From: Mateusz Loskot
Sent: 17 January 2018 10:09
To: pidgeon13 at googlemail.com
Cc: Andrew Bell; pdal at lists.osgeo.org
Subject: Re: [pdal] Non-English characters

See what the docs [1] say about the A in CW2A.

Meanwhile, you need to use WideCharToMultiByte [2] with CP_UTF8 code page.

[1] https://msdn.microsoft.com/en-us/library/87zae4a3.aspx
[2] https://msdn.microsoft.com/en-us/library/windows/desktop/dd374130.aspx


On 17 January 2018 at 11:02,  <pidgeon13 at googlemail.com> wrote:
> std::string sFilePath = CW2A(filepath, CP_UTF8);
>
>
>
> Regards,
>
>
>
> Stephen
>
>
>
> Sent from Mail for Windows 10
>
>
>
> From: Mateusz Loskot
> Sent: 17 January 2018 10:00
> To: pidgeon13 at googlemail.com
> Cc: Andrew Bell; pdal at lists.osgeo.org
> Subject: Re: [pdal] Non-English characters
>
>
>
> On 17 January 2018 at 10:31,  <pidgeon13 at googlemail.com> wrote:
>
>>
>
>> The user browses for a file in a dialog file browser, and I convert this
>
>> string to UTF-8
>
>
>
> How do you convert to UTF-8?
>
>
>
> Please, you need to show some code (one image for 1000 words).
>
>
>
> Best regards,
>
> --
>
> Mateusz Loskot, http://mateusz.loskot.net
>
>



-- 
Mateusz Loskot, http://mateusz.loskot.net

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180117/0b4c0e0c/attachment.html>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: UTF-8 conversion.txt
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180117/0b4c0e0c/attachment.txt>

From mateusz at loskot.net  Wed Jan 17 02:20:38 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 17 Jan 2018 11:20:38 +0100
Subject: [pdal] Non-English characters
In-Reply-To: <5a5f22cc.e88e500a.a5b3c.a475@mx.google.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
 <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>
 <5a5df485.1a9b500a.47110.bd59@mx.google.com>
 <CACJ51z1WNWE0U7O+1y-4ypE30CCr8VupqcZeipEaoiB4bRjKsQ@mail.gmail.com>
 <CACJ51z3DT6Fck2zs=bcyA-gxt0e-SouRvmYqbL3+BEWFuwU2mg@mail.gmail.com>
 <5a5e31b0.99451c0a.ff9b.defa@mx.google.com>
 <CACJ51z23bAB1WzKDCWkyYu_c-cjc9tTFNc6OizWPyjs7Fzcqbw@mail.gmail.com>
 <5a5f17d5.6d90500a.d9ff3.7e60@mx.google.com>
 <CABUeae9DgtqGgaLL-bSX__cJxVAsvBoqkSrrcEpLLZfOguMfNQ@mail.gmail.com>
 <5a5f1f28.4243190a.5b1bd.6376@mx.google.com>
 <CABUeae9CrQMa-391bM9KDhzxf-Pqj200Xm6+VP2KQ7LWmfTozQ@mail.gmail.com>
 <5a5f22cc.e88e500a.a5b3c.a475@mx.google.com>
Message-ID: <CABUeae8T0NjkUMw-3B+Q=EpBvgMpKC_3j87VCfwFuZ7pG0g1pQ@mail.gmail.com>

CUtils::toUtf8 looks fine to me

On 17 January 2018 at 11:17,  <pidgeon13 at googlemail.com> wrote:
> I have included another piece of code, which is what I tried first using
> WideCharToMultiByte. Should this perform the conversion correctly?
>
>
>
> Regards,
>
>
>
> Stephen
>
>
>
> Sent from Mail for Windows 10
>
>
>
> From: Mateusz Loskot
> Sent: 17 January 2018 10:09
>
>
> To: pidgeon13 at googlemail.com
> Cc: Andrew Bell; pdal at lists.osgeo.org
> Subject: Re: [pdal] Non-English characters
>
>
>
> See what the docs [1] say about the A in CW2A.
>
>
>
> Meanwhile, you need to use WideCharToMultiByte [2] with CP_UTF8 code page.
>
>
>
> [1] https://msdn.microsoft.com/en-us/library/87zae4a3.aspx
>
> [2] https://msdn.microsoft.com/en-us/library/windows/desktop/dd374130.aspx
>
>
>
>
>
> On 17 January 2018 at 11:02,  <pidgeon13 at googlemail.com> wrote:
>
>> std::string sFilePath = CW2A(filepath, CP_UTF8);
>
>>
>
>>
>
>>
>
>> Regards,
>
>>
>
>>
>
>>
>
>> Stephen
>
>>
>
>>
>
>>
>
>> Sent from Mail for Windows 10
>
>>
>
>>
>
>>
>
>> From: Mateusz Loskot
>
>> Sent: 17 January 2018 10:00
>
>> To: pidgeon13 at googlemail.com
>
>> Cc: Andrew Bell; pdal at lists.osgeo.org
>
>> Subject: Re: [pdal] Non-English characters
>
>>
>
>>
>
>>
>
>> On 17 January 2018 at 10:31,  <pidgeon13 at googlemail.com> wrote:
>
>>
>
>>>
>
>>
>
>>> The user browses for a file in a dialog file browser, and I convert this
>
>>
>
>>> string to UTF-8
>
>>
>
>>
>
>>
>
>> How do you convert to UTF-8?
>
>>
>
>>
>
>>
>
>> Please, you need to show some code (one image for 1000 words).
>
>>
>
>>
>
>>
>
>> Best regards,
>
>>
>
>> --
>
>>
>
>> Mateusz Loskot, http://mateusz.loskot.net
>
>>
>
>>
>
>
>
>
>
>
>
> --
>
> Mateusz Loskot, http://mateusz.loskot.net
>
>



-- 
Mateusz Loskot, http://mateusz.loskot.net

From pidgeon13 at googlemail.com  Wed Jan 17 02:31:47 2018
From: pidgeon13 at googlemail.com (pidgeon13 at googlemail.com)
Date: Wed, 17 Jan 2018 10:31:47 +0000
Subject: [pdal] Non-English characters
In-Reply-To: <CABUeae8T0NjkUMw-3B+Q=EpBvgMpKC_3j87VCfwFuZ7pG0g1pQ@mail.gmail.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
 <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>
 <5a5df485.1a9b500a.47110.bd59@mx.google.com>
 <CACJ51z1WNWE0U7O+1y-4ypE30CCr8VupqcZeipEaoiB4bRjKsQ@mail.gmail.com>
 <CACJ51z3DT6Fck2zs=bcyA-gxt0e-SouRvmYqbL3+BEWFuwU2mg@mail.gmail.com>
 <5a5e31b0.99451c0a.ff9b.defa@mx.google.com>
 <CACJ51z23bAB1WzKDCWkyYu_c-cjc9tTFNc6OizWPyjs7Fzcqbw@mail.gmail.com>
 <5a5f17d5.6d90500a.d9ff3.7e60@mx.google.com>
 <CABUeae9DgtqGgaLL-bSX__cJxVAsvBoqkSrrcEpLLZfOguMfNQ@mail.gmail.com>
 <5a5f1f28.4243190a.5b1bd.6376@mx.google.com>
 <CABUeae9CrQMa-391bM9KDhzxf-Pqj200Xm6+VP2KQ7LWmfTozQ@mail.gmail.com>
 <5a5f22cc.e88e500a.a5b3c.a475@mx.google.com>
 <CABUeae8T0NjkUMw-3B+Q=EpBvgMpKC_3j87VCfwFuZ7pG0g1pQ@mail.gmail.com>
Message-ID: <5a5f2613.d9d4500a.8a870.a178@mx.google.com>

The two methods are producing the same std::string for me. I’m fairly sure that specifying the code page in CW2A overrides using the ANSI codepage.

Regards,

STephen

Sent from Mail for Windows 10

From: Mateusz Loskot
Sent: 17 January 2018 10:21
To: pidgeon13 at googlemail.com
Cc: Andrew Bell; pdal at lists.osgeo.org
Subject: Re: [pdal] Non-English characters

CUtils::toUtf8 looks fine to me

On 17 January 2018 at 11:17,  <pidgeon13 at googlemail.com> wrote:
> I have included another piece of code, which is what I tried first using
> WideCharToMultiByte. Should this perform the conversion correctly?
>
>
>
> Regards,
>
>
>
> Stephen
>
>
>
> Sent from Mail for Windows 10
>
>
>
> From: Mateusz Loskot
> Sent: 17 January 2018 10:09
>
>
> To: pidgeon13 at googlemail.com
> Cc: Andrew Bell; pdal at lists.osgeo.org
> Subject: Re: [pdal] Non-English characters
>
>
>
> See what the docs [1] say about the A in CW2A.
>
>
>
> Meanwhile, you need to use WideCharToMultiByte [2] with CP_UTF8 code page.
>
>
>
> [1] https://msdn.microsoft.com/en-us/library/87zae4a3.aspx
>
> [2] https://msdn.microsoft.com/en-us/library/windows/desktop/dd374130.aspx
>
>
>
>
>
> On 17 January 2018 at 11:02,  <pidgeon13 at googlemail.com> wrote:
>
>> std::string sFilePath = CW2A(filepath, CP_UTF8);
>
>>
>
>>
>
>>
>
>> Regards,
>
>>
>
>>
>
>>
>
>> Stephen
>
>>
>
>>
>
>>
>
>> Sent from Mail for Windows 10
>
>>
>
>>
>
>>
>
>> From: Mateusz Loskot
>
>> Sent: 17 January 2018 10:00
>
>> To: pidgeon13 at googlemail.com
>
>> Cc: Andrew Bell; pdal at lists.osgeo.org
>
>> Subject: Re: [pdal] Non-English characters
>
>>
>
>>
>
>>
>
>> On 17 January 2018 at 10:31,  <pidgeon13 at googlemail.com> wrote:
>
>>
>
>>>
>
>>
>
>>> The user browses for a file in a dialog file browser, and I convert this
>
>>
>
>>> string to UTF-8
>
>>
>
>>
>
>>
>
>> How do you convert to UTF-8?
>
>>
>
>>
>
>>
>
>> Please, you need to show some code (one image for 1000 words).
>
>>
>
>>
>
>>
>
>> Best regards,
>
>>
>
>> --
>
>>
>
>> Mateusz Loskot, http://mateusz.loskot.net
>
>>
>
>>
>
>
>
>
>
>
>
> --
>
> Mateusz Loskot, http://mateusz.loskot.net
>
>



-- 
Mateusz Loskot, http://mateusz.loskot.net

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180117/e5173c8a/attachment.html>

From andrew.bell.ia at gmail.com  Wed Jan 17 05:50:50 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 17 Jan 2018 08:50:50 -0500
Subject: [pdal] Non-English characters
In-Reply-To: <5a5f2613.d9d4500a.8a870.a178@mx.google.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
 <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>
 <5a5df485.1a9b500a.47110.bd59@mx.google.com>
 <CACJ51z1WNWE0U7O+1y-4ypE30CCr8VupqcZeipEaoiB4bRjKsQ@mail.gmail.com>
 <CACJ51z3DT6Fck2zs=bcyA-gxt0e-SouRvmYqbL3+BEWFuwU2mg@mail.gmail.com>
 <5a5e31b0.99451c0a.ff9b.defa@mx.google.com>
 <CACJ51z23bAB1WzKDCWkyYu_c-cjc9tTFNc6OizWPyjs7Fzcqbw@mail.gmail.com>
 <5a5f17d5.6d90500a.d9ff3.7e60@mx.google.com>
 <CABUeae9DgtqGgaLL-bSX__cJxVAsvBoqkSrrcEpLLZfOguMfNQ@mail.gmail.com>
 <5a5f1f28.4243190a.5b1bd.6376@mx.google.com>
 <CABUeae9CrQMa-391bM9KDhzxf-Pqj200Xm6+VP2KQ7LWmfTozQ@mail.gmail.com>
 <5a5f22cc.e88e500a.a5b3c.a475@mx.google.com>
 <CABUeae8T0NjkUMw-3B+Q=EpBvgMpKC_3j87VCfwFuZ7pG0g1pQ@mail.gmail.com>
 <5a5f2613.d9d4500a.8a870.a178@mx.google.com>
Message-ID: <CACJ51z1uJZ4e5=EBgQQDPrnuvwpxKa4aAG8M1w8aZfY6bOgWoA@mail.gmail.com>

I still haven't seen code that shows a UTF-8 string being passed to PDAL as
a filename and PDAL failing to handle it.  Something like this would help:

void main()
{
  LasReader r;
  Options ro;
  ro.add("filename", "some filename that causes a problem")

  PointTable t;
  r.prepare(t);
  r.execute(t);
  std::cerr << Utils::toJSON(r.getMetadata());
}

Does something like this fail?  If not, can you provide an example?  I
can't help unless I understand the problem.

Thanks,


On Wed, Jan 17, 2018 at 5:31 AM, <pidgeon13 at googlemail.com> wrote:

> The two methods are producing the same std::string for me. I’m fairly sure
> that specifying the code page in CW2A overrides using the ANSI codepage.
>
>
>
> Regards,
>
>
>
> STephen
>
>
>
> Sent from Mail <https://go.microsoft.com/fwlink/?LinkId=550986> for
> Windows 10
>
>
>
> *From: *Mateusz Loskot <mateusz at loskot.net>
> *Sent: *17 January 2018 10:21
>
> *To: *pidgeon13 at googlemail.com
> *Cc: *Andrew Bell <andrew.bell.ia at gmail.com>; pdal at lists.osgeo.org
> *Subject: *Re: [pdal] Non-English characters
>
>
>
> CUtils::toUtf8 looks fine to me
>
>
>
> On 17 January 2018 at 11:17,  <pidgeon13 at googlemail.com> wrote:
>
> > I have included another piece of code, which is what I tried first using
>
> > WideCharToMultiByte. Should this perform the conversion correctly?
>
> >
>
> >
>
> >
>
> > Regards,
>
> >
>
> >
>
> >
>
> > Stephen
>
> >
>
> >
>
> >
>
> > Sent from Mail for Windows 10
>
> >
>
> >
>
> >
>
> > From: Mateusz Loskot
>
> > Sent: 17 January 2018 10:09
>
> >
>
> >
>
> > To: pidgeon13 at googlemail.com
>
> > Cc: Andrew Bell; pdal at lists.osgeo.org
>
> > Subject: Re: [pdal] Non-English characters
>
> >
>
> >
>
> >
>
> > See what the docs [1] say about the A in CW2A.
>
> >
>
> >
>
> >
>
> > Meanwhile, you need to use WideCharToMultiByte [2] with CP_UTF8 code
> page.
>
> >
>
> >
>
> >
>
> > [1] https://msdn.microsoft.com/en-us/library/87zae4a3.aspx
>
> >
>
> > [2] https://msdn.microsoft.com/en-us/library/windows/desktop/
> dd374130.aspx
>
> >
>
> >
>
> >
>
> >
>
> >
>
> > On 17 January 2018 at 11:02,  <pidgeon13 at googlemail.com> wrote:
>
> >
>
> >> std::string sFilePath = CW2A(filepath, CP_UTF8);
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >> Regards,
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >> Stephen
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >> Sent from Mail for Windows 10
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >> From: Mateusz Loskot
>
> >
>
> >> Sent: 17 January 2018 10:00
>
> >
>
> >> To: pidgeon13 at googlemail.com
>
> >
>
> >> Cc: Andrew Bell; pdal at lists.osgeo.org
>
> >
>
> >> Subject: Re: [pdal] Non-English characters
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >> On 17 January 2018 at 10:31,  <pidgeon13 at googlemail.com> wrote:
>
> >
>
> >>
>
> >
>
> >>>
>
> >
>
> >>
>
> >
>
> >>> The user browses for a file in a dialog file browser, and I convert
> this
>
> >
>
> >>
>
> >
>
> >>> string to UTF-8
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >> How do you convert to UTF-8?
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >> Please, you need to show some code (one image for 1000 words).
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >> Best regards,
>
> >
>
> >>
>
> >
>
> >> --
>
> >
>
> >>
>
> >
>
> >> Mateusz Loskot, http://mateusz.loskot.net
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >
>
> >
>
> >
>
> >
>
> >
>
> >
>
> > --
>
> >
>
> > Mateusz Loskot, http://mateusz.loskot.net
>
> >
>
> >
>
>
>
>
>
>
>
> --
>
> Mateusz Loskot, http://mateusz.loskot.net
>
>
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180117/b2549d1c/attachment-0001.html>

From andrew.bell.ia at gmail.com  Wed Jan 17 07:27:40 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 17 Jan 2018 10:27:40 -0500
Subject: [pdal] Non-English characters
In-Reply-To: <5a5f5ea4.4198500a.7f34d.d80c@mx.google.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
 <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>
 <5a5df485.1a9b500a.47110.bd59@mx.google.com>
 <CACJ51z1WNWE0U7O+1y-4ypE30CCr8VupqcZeipEaoiB4bRjKsQ@mail.gmail.com>
 <CACJ51z3DT6Fck2zs=bcyA-gxt0e-SouRvmYqbL3+BEWFuwU2mg@mail.gmail.com>
 <5a5e31b0.99451c0a.ff9b.defa@mx.google.com>
 <CACJ51z23bAB1WzKDCWkyYu_c-cjc9tTFNc6OizWPyjs7Fzcqbw@mail.gmail.com>
 <5a5f17d5.6d90500a.d9ff3.7e60@mx.google.com>
 <CABUeae9DgtqGgaLL-bSX__cJxVAsvBoqkSrrcEpLLZfOguMfNQ@mail.gmail.com>
 <5a5f1f28.4243190a.5b1bd.6376@mx.google.com>
 <CABUeae9CrQMa-391bM9KDhzxf-Pqj200Xm6+VP2KQ7LWmfTozQ@mail.gmail.com>
 <5a5f22cc.e88e500a.a5b3c.a475@mx.google.com>
 <CABUeae8T0NjkUMw-3B+Q=EpBvgMpKC_3j87VCfwFuZ7pG0g1pQ@mail.gmail.com>
 <5a5f2613.d9d4500a.8a870.a178@mx.google.com>
 <CACJ51z1uJZ4e5=EBgQQDPrnuvwpxKa4aAG8M1w8aZfY6bOgWoA@mail.gmail.com>
 <5a5f5ea4.4198500a.7f34d.d80c@mx.google.com>
Message-ID: <CACJ51z2tLZtJDS5ZPbU2wtorc3qnGLL5ktLWByXU3_3ML-YvOg@mail.gmail.com>

The following complete program runs properly for me on OSX.  I'm referring
to the file that you provided earlier.

======

master $ DYLD_LIBRARY_PATH=./lib a.out
View size = 867!
X/Y/Z = 0.00472708/0.0012/-0.000833515!
X/Y/Z = 0.0048/0.0012/0!
X/Y/Z = 0/0/0!
X/Y/Z = 0.00451052/0.0012/-0.0016417!
X/Y/Z = 0.00415692/0.0012/-0.00240001!
X/Y/Z = 0.00367701/0.0012/-0.00308539!
X/Y/Z = 0.00308537/0.0012/-0.00367702!
X/Y/Z = 0.00239999/0.0012/-0.00415693!
X/Y/Z = 0.00164168/0.0012/-0.00451053!
X/Y/Z = 0.000833496/0.0012/-0.00472708!
X/Y/Z = -1.79482e-08/0.0012/-0.0048!
X/Y/Z = -0.00083353/0.0012/-0.00472707!
X/Y/Z = -0.00164172/0.0012/-0.00451052!
X/Y/Z = -0.00240002/0.0012/-0.00415691!
X/Y/Z = -0.0030854/0.0012/-0.003677!
X/Y/Z = -0.00367703/0.0012/-0.00308536!
X/Y/Z = -0.00415694/0.0012/-0.00239997!
X/Y/Z = -0.00451054/0.0012/-0.00164167!

==========

#include <pdal/StageFactory.hpp>
#include <pdal/Options.hpp>
#include <pdal/PointTable.hpp>
#include <pdal/PDALUtils.hpp>

int main()
{
  using namespace pdal;

  pdal::StageFactory factory;

  pdal::PointTable table;

    std::string filename(u8"/Users/acbell/Downloads/рфддвбс.ply");
  std::string sReaderDriver =
pdal::StageFactory::inferReaderDriver(filename);

  if (!sReaderDriver.empty())

  {

    pdal::Stage *pReader = factory.createStage(sReaderDriver);

    pdal::Options readerOptions;

    readerOptions.add("filename", filename);

    if (pReader)

    {

      pReader->setOptions(readerOptions);
      pReader->prepare(table);
      PointViewSet s = pReader->execute(table);
      PointViewPtr v = *s.begin();

      std::cerr << "View size = " << v->size() << "!\n";
      for (PointId id = 0; id < v->size(); ++id)
          std::cerr << "X/Y/Z = " <<
            v->getFieldAs<double>(Dimension::Id::X, id) << "/" <<
            v->getFieldAs<double>(Dimension::Id::Y, id) << "/" <<
            v->getFieldAs<double>(Dimension::Id::Z, id) << "!\n";
    }
  }

  return 0;

}

On Wed, Jan 17, 2018 at 9:33 AM, <pidgeon13 at googlemail.com> wrote:

> The following code is such an example.
>
>
>
> int main(
>
> {
>
>   pdal::StageFactory factory;
>
>   pdal::PointTable table;
>
>   std::string sReaderDriver = pdal::StageFactory::
> inferReaderDriver(u8"C:\\Users\\stephenp\\PDALe\\рфддвбс.ply");
>
>   if (!sReaderDriver.empty())
>
>   {
>
>     pdal::Stage *pReader = factory.createStage(sReaderDriver);
>
>     pdal::Options readerOptions;
>
>     readerOptions.add("filename", u8"C:\\Users\\stephenp\\PDALe\
> \рфддвбс.ply");
>
>     if (pReader)
>
>     {
>
>       pReader->setOptions(readerOptions);
>
>       pdal::PointViewSet set;
>
>       pdal::PointViewPtr pView;
>
>       pReader->prepare(table);
>
>       set = pReader->execute(table);
>
>       pView = *set.begin();
>
>       int nSize = pView->size();
>
>       std::cerr << Utils::toJSON(pReader->getMetadata());
>
>     }
>
>   }
>
>   return 0;
>
> }
>
>
>
> Regards,
>
>
>
> Stephen
>
>
>
> Sent from Mail <https://go.microsoft.com/fwlink/?LinkId=550986> for
> Windows 10
>
>
>
> *From: *Andrew Bell <andrew.bell.ia at gmail.com>
> *Sent: *17 January 2018 13:50
> *To: *Stephen Pidgeon <pidgeon13 at googlemail.com>
> *Cc: *Mateusz Loskot <mateusz at loskot.net>; pdal at lists.osgeo.org
>
> *Subject: *Re: [pdal] Non-English characters
>
>
>
> I still haven't seen code that shows a UTF-8 string being passed to PDAL
> as a filename and PDAL failing to handle it.  Something like this would
> help:
>
>
>
> void main()
>
> {
>
>   LasReader r;
>
>   Options ro;
>
>   ro.add("filename", "some filename that causes a problem")
>
>
>
>   PointTable t;
>
>   r.prepare(t);
>
>   r.execute(t);
>
>   std::cerr << Utils::toJSON(r.getMetadata());
>
> }
>
>
>
> Does something like this fail?  If not, can you provide an example?  I
> can't help unless I understand the problem.
>
>
>
> Thanks,
>
>
>
>
>
> On Wed, Jan 17, 2018 at 5:31 AM, <pidgeon13 at googlemail.com> wrote:
>
> The two methods are producing the same std::string for me. I’m fairly sure
> that specifying the code page in CW2A overrides using the ANSI codepage.
>
>
>
> Regards,
>
>
>
> STephen
>
>
>
> Sent from Mail <https://go.microsoft.com/fwlink/?LinkId=550986> for
> Windows 10
>
>
>
> *From: *Mateusz Loskot <mateusz at loskot.net>
> *Sent: *17 January 2018 10:21
>
>
> *To: *pidgeon13 at googlemail.com
> *Cc: *Andrew Bell <andrew.bell.ia at gmail.com>; pdal at lists.osgeo.org
> *Subject: *Re: [pdal] Non-English characters
>
>
>
> CUtils::toUtf8 looks fine to me
>
>
>
> On 17 January 2018 at 11:17,  <pidgeon13 at googlemail.com> wrote:
>
> > I have included another piece of code, which is what I tried first using
>
> > WideCharToMultiByte. Should this perform the conversion correctly?
>
> >
>
> >
>
> >
>
> > Regards,
>
> >
>
> >
>
> >
>
> > Stephen
>
> >
>
> >
>
> >
>
> > Sent from Mail for Windows 10
>
> >
>
> >
>
> >
>
> > From: Mateusz Loskot
>
> > Sent: 17 January 2018 10:09
>
> >
>
> >
>
> > To: pidgeon13 at googlemail.com
>
> > Cc: Andrew Bell; pdal at lists.osgeo.org
>
> > Subject: Re: [pdal] Non-English characters
>
> >
>
> >
>
> >
>
> > See what the docs [1] say about the A in CW2A.
>
> >
>
> >
>
> >
>
> > Meanwhile, you need to use WideCharToMultiByte [2] with CP_UTF8 code
> page.
>
> >
>
> >
>
> >
>
> > [1] https://msdn.microsoft.com/en-us/library/87zae4a3.aspx
>
> >
>
> > [2] https://msdn.microsoft.com/en-us/library/windows/desktop/
> dd374130.aspx
>
> >
>
> >
>
> >
>
> >
>
> >
>
> > On 17 January 2018 at 11:02,  <pidgeon13 at googlemail.com> wrote:
>
> >
>
> >> std::string sFilePath = CW2A(filepath, CP_UTF8);
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >> Regards,
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >> Stephen
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >> Sent from Mail for Windows 10
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >> From: Mateusz Loskot
>
> >
>
> >> Sent: 17 January 2018 10:00
>
> >
>
> >> To: pidgeon13 at googlemail.com
>
> >
>
> >> Cc: Andrew Bell; pdal at lists.osgeo.org
>
> >
>
> >> Subject: Re: [pdal] Non-English characters
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >> On 17 January 2018 at 10:31,  <pidgeon13 at googlemail.com> wrote:
>
> >
>
> >>
>
> >
>
> >>>
>
> >
>
> >>
>
> >
>
> >>> The user browses for a file in a dialog file browser, and I convert
> this
>
> >
>
> >>
>
> >
>
> >>> string to UTF-8
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >> How do you convert to UTF-8?
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >> Please, you need to show some code (one image for 1000 words).
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >> Best regards,
>
> >
>
> >>
>
> >
>
> >> --
>
> >
>
> >>
>
> >
>
> >> Mateusz Loskot, http://mateusz.loskot.net
>
> >
>
> >>
>
> >
>
> >>
>
> >
>
> >
>
> >
>
> >
>
> >
>
> >
>
> >
>
> > --
>
> >
>
> > Mateusz Loskot, http://mateusz.loskot.net
>
> >
>
> >
>
>
>
>
>
>
>
> --
>
> Mateusz Loskot, http://mateusz.loskot.net
>
>
>
>
>
>
>
> --
>
> Andrew Bell
> andrew.bell.ia at gmail.com
>
>
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180117/4286ed7a/attachment.html>

From pidgeon13 at googlemail.com  Thu Jan 18 02:57:01 2018
From: pidgeon13 at googlemail.com (pidgeon13 at googlemail.com)
Date: Thu, 18 Jan 2018 10:57:01 +0000
Subject: [pdal] Non-English characters
In-Reply-To: <CACJ51z2tLZtJDS5ZPbU2wtorc3qnGLL5ktLWByXU3_3ML-YvOg@mail.gmail.com>
References: <5a5ce11d.52471c0a.48b81.4166@mx.google.com>
 <CACJ51z1UZcMe5tu5TFv7w7_TCTRXvS7F7FTUvNgxiNT2iOZxtg@mail.gmail.com>
 <5a5df485.1a9b500a.47110.bd59@mx.google.com>
 <CACJ51z1WNWE0U7O+1y-4ypE30CCr8VupqcZeipEaoiB4bRjKsQ@mail.gmail.com>
 <CACJ51z3DT6Fck2zs=bcyA-gxt0e-SouRvmYqbL3+BEWFuwU2mg@mail.gmail.com>
 <5a5e31b0.99451c0a.ff9b.defa@mx.google.com>
 <CACJ51z23bAB1WzKDCWkyYu_c-cjc9tTFNc6OizWPyjs7Fzcqbw@mail.gmail.com>
 <5a5f17d5.6d90500a.d9ff3.7e60@mx.google.com>
 <CABUeae9DgtqGgaLL-bSX__cJxVAsvBoqkSrrcEpLLZfOguMfNQ@mail.gmail.com>
 <5a5f1f28.4243190a.5b1bd.6376@mx.google.com>
 <CABUeae9CrQMa-391bM9KDhzxf-Pqj200Xm6+VP2KQ7LWmfTozQ@mail.gmail.com>
 <5a5f22cc.e88e500a.a5b3c.a475@mx.google.com>
 <CABUeae8T0NjkUMw-3B+Q=EpBvgMpKC_3j87VCfwFuZ7pG0g1pQ@mail.gmail.com>
 <5a5f2613.d9d4500a.8a870.a178@mx.google.com>
 <CACJ51z1uJZ4e5=EBgQQDPrnuvwpxKa4aAG8M1w8aZfY6bOgWoA@mail.gmail.com>
 <5a5f5ea4.4198500a.7f34d.d80c@mx.google.com>
 <CACJ51z2tLZtJDS5ZPbU2wtorc3qnGLL5ktLWByXU3_3ML-YvOg@mail.gmail.com>
Message-ID: <5a607d7d.e3a8500a.9b4b8.1ebe@mx.google.com>

Hi,

I’ve probably messed up my pdal config somewhere then, because this doesn’t work for me. It’s possibly platform related, but I would guess it’s more likely that I’ve done something wrong. Thank you very much for your help, I’ve circumvented the issue by using CopyFile and placing it in a temporary folder.

Best Regards,

Stephen

Sent from Mail for Windows 10

From: Andrew Bell
Sent: 17 January 2018 15:27
To: Stephen Pidgeon; Mateusz Loskot; pdal at lists.osgeo.org
Subject: Re: [pdal] Non-English characters

The following complete program runs properly for me on OSX.  I'm referring to the file that you provided earlier.

======

master $ DYLD_LIBRARY_PATH=./lib a.out
View size = 867!
X/Y/Z = 0.00472708/0.0012/-0.000833515!
X/Y/Z = 0.0048/0.0012/0!
X/Y/Z = 0/0/0!
X/Y/Z = 0.00451052/0.0012/-0.0016417!
X/Y/Z = 0.00415692/0.0012/-0.00240001!
X/Y/Z = 0.00367701/0.0012/-0.00308539!
X/Y/Z = 0.00308537/0.0012/-0.00367702!
X/Y/Z = 0.00239999/0.0012/-0.00415693!
X/Y/Z = 0.00164168/0.0012/-0.00451053!
X/Y/Z = 0.000833496/0.0012/-0.00472708!
X/Y/Z = -1.79482e-08/0.0012/-0.0048!
X/Y/Z = -0.00083353/0.0012/-0.00472707!
X/Y/Z = -0.00164172/0.0012/-0.00451052!
X/Y/Z = -0.00240002/0.0012/-0.00415691!
X/Y/Z = -0.0030854/0.0012/-0.003677!
X/Y/Z = -0.00367703/0.0012/-0.00308536!
X/Y/Z = -0.00415694/0.0012/-0.00239997!
X/Y/Z = -0.00451054/0.0012/-0.00164167!

==========

#include <pdal/StageFactory.hpp>
#include <pdal/Options.hpp>
#include <pdal/PointTable.hpp>
#include <pdal/PDALUtils.hpp>

int main()
{
  using namespace pdal;

  pdal::StageFactory factory;

  pdal::PointTable table;

    std::string filename(u8"/Users/acbell/Downloads/рфддвбс.ply");
  std::string sReaderDriver = pdal::StageFactory::inferReaderDriver(filename);

  if (!sReaderDriver.empty())

  {

    pdal::Stage *pReader = factory.createStage(sReaderDriver);

    pdal::Options readerOptions;

    readerOptions.add("filename", filename);

    if (pReader)

    {

      pReader->setOptions(readerOptions);
      pReader->prepare(table);
      PointViewSet s = pReader->execute(table);
      PointViewPtr v = *s.begin();

      std::cerr << "View size = " << v->size() << "!\n";
      for (PointId id = 0; id < v->size(); ++id)
          std::cerr << "X/Y/Z = " <<
            v->getFieldAs<double>(Dimension::Id::X, id) << "/" <<
            v->getFieldAs<double>(Dimension::Id::Y, id) << "/" <<
            v->getFieldAs<double>(Dimension::Id::Z, id) << "!\n";
    }
  }

  return 0;

}

On Wed, Jan 17, 2018 at 9:33 AM, <pidgeon13 at googlemail.com> wrote:
The following code is such an example.
 
int main(
{
  pdal::StageFactory factory;
  pdal::PointTable table;
  std::string sReaderDriver = pdal::StageFactory::inferReaderDriver(u8"C:\\Users\\stephenp\\PDALe\\рфддвбс.ply");
  if (!sReaderDriver.empty())
  {
    pdal::Stage *pReader = factory.createStage(sReaderDriver);
    pdal::Options readerOptions;
    readerOptions.add("filename", u8"C:\\Users\\stephenp\\PDALe\\рфддвбс.ply");
    if (pReader)
    {
      pReader->setOptions(readerOptions);
      pdal::PointViewSet set;
      pdal::PointViewPtr pView;
      pReader->prepare(table);
      set = pReader->execute(table);
      pView = *set.begin();
      int nSize = pView->size();
      std::cerr << Utils::toJSON(pReader->getMetadata());
    }
  }
  return 0;
}
 
Regards,
 
Stephen
 
Sent from Mail for Windows 10
 
From: Andrew Bell
Sent: 17 January 2018 13:50
To: Stephen Pidgeon
Cc: Mateusz Loskot; pdal at lists.osgeo.org

Subject: Re: [pdal] Non-English characters
 
I still haven't seen code that shows a UTF-8 string being passed to PDAL as a filename and PDAL failing to handle it.  Something like this would help:
 
void main()
{
  LasReader r;
  Options ro;
  ro.add("filename", "some filename that causes a problem")
 
  PointTable t;
  r.prepare(t);
  r.execute(t);
  std::cerr << Utils::toJSON(r.getMetadata());
}
 
Does something like this fail?  If not, can you provide an example?  I can't help unless I understand the problem.
 
Thanks,
 
 
On Wed, Jan 17, 2018 at 5:31 AM, <pidgeon13 at googlemail.com> wrote:
The two methods are producing the same std::string for me. I’m fairly sure that specifying the code page in CW2A overrides using the ANSI codepage.
 
Regards,
 
STephen
 
Sent from Mail for Windows 10
 
From: Mateusz Loskot
Sent: 17 January 2018 10:21

To: pidgeon13 at googlemail.com
Cc: Andrew Bell; pdal at lists.osgeo.org
Subject: Re: [pdal] Non-English characters
 
CUtils::toUtf8 looks fine to me
 
On 17 January 2018 at 11:17,  <pidgeon13 at googlemail.com> wrote:
> I have included another piece of code, which is what I tried first using
> WideCharToMultiByte. Should this perform the conversion correctly?
> 
> 
> 
> Regards,
> 
> 
> 
> Stephen
> 
> 
> 
> Sent from Mail for Windows 10
> 
> 
> 
> From: Mateusz Loskot
> Sent: 17 January 2018 10:09
> 
> 
> To: pidgeon13 at googlemail.com
> Cc: Andrew Bell; pdal at lists.osgeo.org
> Subject: Re: [pdal] Non-English characters
> 
> 
> 
> See what the docs [1] say about the A in CW2A.
> 
> 
> 
> Meanwhile, you need to use WideCharToMultiByte [2] with CP_UTF8 code page.
> 
> 
> 
> [1] https://msdn.microsoft.com/en-us/library/87zae4a3.aspx
> 
> [2] https://msdn.microsoft.com/en-us/library/windows/desktop/dd374130.aspx
> 
> 
> 
> 
> 
> On 17 January 2018 at 11:02,  <pidgeon13 at googlemail.com> wrote:
> 
>> std::string sFilePath = CW2A(filepath, CP_UTF8);
> 
>> 
> 
>> 
> 
>> 
> 
>> Regards,
> 
>> 
> 
>> 
> 
>> 
> 
>> Stephen
> 
>> 
> 
>> 
> 
>> 
> 
>> Sent from Mail for Windows 10
> 
>> 
> 
>> 
> 
>> 
> 
>> From: Mateusz Loskot
> 
>> Sent: 17 January 2018 10:00
> 
>> To: pidgeon13 at googlemail.com
> 
>> Cc: Andrew Bell; pdal at lists.osgeo.org
> 
>> Subject: Re: [pdal] Non-English characters
> 
>> 
> 
>> 
> 
>> 
> 
>> On 17 January 2018 at 10:31,  <pidgeon13 at googlemail.com> wrote:
> 
>> 
> 
>>> 
> 
>> 
> 
>>> The user browses for a file in a dialog file browser, and I convert this
> 
>> 
> 
>>> string to UTF-8
> 
>> 
> 
>> 
> 
>> 
> 
>> How do you convert to UTF-8?
> 
>> 
> 
>> 
> 
>> 
> 
>> Please, you need to show some code (one image for 1000 words).
> 
>> 
> 
>> 
> 
>> 
> 
>> Best regards,
> 
>> 
> 
>> --
> 
>> 
> 
>> Mateusz Loskot, http://mateusz.loskot.net
> 
>> 
> 
>> 
> 
> 
> 
> 
> 
> 
> 
> --
> 
> Mateusz Loskot, http://mateusz.loskot.net
> 
> 
 
 
 
-- 
Mateusz Loskot, http://mateusz.loskot.net
 



 
-- 
Andrew Bell
andrew.bell.ia at gmail.com
 




-- 
Andrew Bell
andrew.bell.ia at gmail.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180118/266d09d2/attachment-0001.html>

From thomas.montaigu at laposte.net  Fri Jan 19 12:40:18 2018
From: thomas.montaigu at laposte.net (Thomas Montaigu)
Date: Fri, 19 Jan 2018 21:40:18 +0100
Subject: [pdal] [Greyhound] Updating fields
Message-ID: <mailman.25.1516394736.21180.pdal@lists.osgeo.org>

Hello,

I’ ve been trying Entwine + Greyhound this week and got something working very easily thanks to the dockers & documentation.

I would like to know if it is already possible to update fields of points using greyhound ?
>From the video of the conference at ‘FOSS4G’ I understand that , at that time updating field was not yet ready.
But I’ve seen that there is a Greyhound plugin for PDAL (that I’d maybe like to use to try  adding Greyhound support in CloudCompare).

Seeing that this plugin implements a GreyhoundWriter, I tried using the ‘write’ command but the server says:
«Caught /write not allowed », which I tried to fix by adding "allowWrite" : true in my config.json (I took the key by searching through the code),
but it did not change the error message .

My requests looked like this : 

url = http://ec2_blabblabla:8080/resource/entwine-data-pdlb
requests.put(url + "/write?schema:['Classification']", b" \x00\x00")

So I am a little bit early on this feature or misdoing something ?

Best regards,
Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180119/f0cb8208/attachment.html>

From connor at hobu.co  Fri Jan 19 12:56:28 2018
From: connor at hobu.co (Connor Manning)
Date: Fri, 19 Jan 2018 14:56:28 -0600
Subject: [pdal] [Greyhound] Updating fields
In-Reply-To: <20180119204536.ABDF1606CEE2@lists.osgeo.org>
References: <20180119204536.ABDF1606CEE2@lists.osgeo.org>
Message-ID: <CAO=FyjJF8eV+7KpPHRELU+xkJwH0o3Z=9FX1h73jfXT4M0Ufcw@mail.gmail.com>

I'm currently in the process of updating all the Docker containers - the
PDAL container has switched from Ubuntu to Alpine by default so I'm
validating the images for the new Entwine/Greyhound containers before
pushing them out.  That said, you are a bit early on this feature - expect
things to potentially change a bit until new versions of Entwine/Greyhound
are released with stable support (and updated development and
administration docs) for these features.  I'll reply to this once the new
images are pushed so you can try it out in the meantime.

- Connor

On Fri, Jan 19, 2018 at 2:40 PM, Thomas Montaigu <
thomas.montaigu at laposte.net> wrote:

> Hello,
>
>
>
> I’ ve been trying Entwine + Greyhound this week and got something working
> very easily thanks to the dockers & documentation.
>
>
>
> I would like to know if it is already possible to update fields of points
> using greyhound ?
>
> From the video of the conference at ‘FOSS4G’ I understand that , at that
> time updating field was not yet ready.
>
> But I’ve seen that there is a Greyhound plugin for PDAL (that I’d maybe
> like to use to try  adding Greyhound support in CloudCompare).
>
>
>
> Seeing that this plugin implements a GreyhoundWriter, I tried using the
> ‘write’ command but the server says:
>
> «Caught /write not allowed », which I tried to fix by adding "allowWrite"
> : true in my config.json (I took the key by searching through the code),
>
> but it did not change the error message .
>
>
>
> My requests looked like this :
>
>
>
> url = http://ec2_blabblabla:8080/resource/entwine-data-pdlb
>
> requests.put(url + "/write?schema:['Classification']", b" \x00\x00")
>
>
>
> So I am a little bit early on this feature or misdoing something ?
>
>
>
> Best regards,
>
> Thomas
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180119/594f8295/attachment.html>

From connor at hobu.co  Fri Jan 19 14:58:41 2018
From: connor at hobu.co (Connor Manning)
Date: Fri, 19 Jan 2018 16:58:41 -0600
Subject: [pdal] [Greyhound] Updating fields
In-Reply-To: <CAO=FyjJF8eV+7KpPHRELU+xkJwH0o3Z=9FX1h73jfXT4M0Ufcw@mail.gmail.com>
References: <20180119204536.ABDF1606CEE2@lists.osgeo.org>
 <CAO=FyjJF8eV+7KpPHRELU+xkJwH0o3Z=9FX1h73jfXT4M0Ufcw@mail.gmail.com>
Message-ID: <CAO=Fyj+gSrhnCxHsJxXJZyY6ORA+OsTEifXv-Mq0L2Pvs99-ww@mail.gmail.com>

I've pushed new Entwine/Greyhound containers under the "alpine" docker tag
- e.g. connormanning/greyhound:alpine.  These will be the new default
"latest" images shortly.  As you've noticed, you'll need to add
`"allowWrite": true` to your Greyhound configuration to use the
GreyhoundWriter functionality.

For the PDAL GreyhoundWriter via Docker, you'll need the `pdal/pdal:master`
image.

Here's also a sample script using a buffered-tile scheme with the
GreyhoundWriter to run the SMRF ground classification algorithm over a
dataset in many small pieces.
https://gist.github.com/connormanning/2b72aa3bab69f7105c6fc4e32935aeca

- Connor

On Fri, Jan 19, 2018 at 2:56 PM, Connor Manning <connor at hobu.co> wrote:

> I'm currently in the process of updating all the Docker containers - the
> PDAL container has switched from Ubuntu to Alpine by default so I'm
> validating the images for the new Entwine/Greyhound containers before
> pushing them out.  That said, you are a bit early on this feature - expect
> things to potentially change a bit until new versions of Entwine/Greyhound
> are released with stable support (and updated development and
> administration docs) for these features.  I'll reply to this once the new
> images are pushed so you can try it out in the meantime.
>
> - Connor
>
> On Fri, Jan 19, 2018 at 2:40 PM, Thomas Montaigu <
> thomas.montaigu at laposte.net> wrote:
>
>> Hello,
>>
>>
>>
>> I’ ve been trying Entwine + Greyhound this week and got something working
>> very easily thanks to the dockers & documentation.
>>
>>
>>
>> I would like to know if it is already possible to update fields of points
>> using greyhound ?
>>
>> From the video of the conference at ‘FOSS4G’ I understand that , at that
>> time updating field was not yet ready.
>>
>> But I’ve seen that there is a Greyhound plugin for PDAL (that I’d maybe
>> like to use to try  adding Greyhound support in CloudCompare).
>>
>>
>>
>> Seeing that this plugin implements a GreyhoundWriter, I tried using the
>> ‘write’ command but the server says:
>>
>> «Caught /write not allowed », which I tried to fix by adding "allowWrite"
>> : true in my config.json (I took the key by searching through the code),
>>
>> but it did not change the error message .
>>
>>
>>
>> My requests looked like this :
>>
>>
>>
>> url = http://ec2_blabblabla:8080/resource/entwine-data-pdlb
>>
>> requests.put(url + "/write?schema:['Classification']", b" \x00\x00")
>>
>>
>>
>> So I am a little bit early on this feature or misdoing something ?
>>
>>
>>
>> Best regards,
>>
>> Thomas
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180119/07d484dd/attachment.html>

From thomas.montaigu at laposte.net  Sat Jan 20 00:26:42 2018
From: thomas.montaigu at laposte.net (Thomas Montaigu)
Date: Sat, 20 Jan 2018 09:26:42 +0100
Subject: [pdal] [Greyhound] Updating fields
In-Reply-To: <CAO=Fyj+gSrhnCxHsJxXJZyY6ORA+OsTEifXv-Mq0L2Pvs99-ww@mail.gmail.com>
References: <20180119204536.ABDF1606CEE2@lists.osgeo.org>
 <CAO=FyjJF8eV+7KpPHRELU+xkJwH0o3Z=9FX1h73jfXT4M0Ufcw@mail.gmail.com>
 <CAO=Fyj+gSrhnCxHsJxXJZyY6ORA+OsTEifXv-Mq0L2Pvs99-ww@mail.gmail.com>
Message-ID: <mailman.26.1516436771.21180.pdal@lists.osgeo.org>


Thanks a lot, I’ll try it out and come back if I have more questions

Thomas

De : Connor Manning
Envoyé le :vendredi 19 janvier 2018 23:58
À : Connor Manning
Cc : Thomas Montaigu; pdal at lists.osgeo.org
Objet :Re: [pdal] [Greyhound] Updating fields

I've pushed new Entwine/Greyhound containers under the "alpine" docker tag - e.g. connormanning/greyhound:alpine.  These will be the new default "latest" images shortly.  As you've noticed, you'll need to add `"allowWrite": true` to your Greyhound configuration to use the GreyhoundWriter functionality.

For the PDAL GreyhoundWriter via Docker, you'll need the `pdal/pdal:master` image.

Here's also a sample script using a buffered-tile scheme with the GreyhoundWriter to run the SMRF ground classification algorithm over a dataset in many small pieces.  https://gist.github.com/connormanning/2b72aa3bab69f7105c6fc4e32935aeca

- Connor

On Fri, Jan 19, 2018 at 2:56 PM, Connor Manning <connor at hobu.co> wrote:
I'm currently in the process of updating all the Docker containers - the PDAL container has switched from Ubuntu to Alpine by default so I'm validating the images for the new Entwine/Greyhound containers before pushing them out.  That said, you are a bit early on this feature - expect things to potentially change a bit until new versions of Entwine/Greyhound are released with stable support (and updated development and administration docs) for these features.  I'll reply to this once the new images are pushed so you can try it out in the meantime.

- Connor

On Fri, Jan 19, 2018 at 2:40 PM, Thomas Montaigu <thomas.montaigu at laposte.net> wrote:
Hello,
 
I’ ve been trying Entwine + Greyhound this week and got something working very easily thanks to the dockers & documentation.
 
I would like to know if it is already possible to update fields of points using greyhound ?
>From the video of the conference at ‘FOSS4G’ I understand that , at that time updating field was not yet ready.
But I’ve seen that there is a Greyhound plugin for PDAL (that I’d maybe like to use to try  adding Greyhound support in CloudCompare).
 
Seeing that this plugin implements a GreyhoundWriter, I tried using the ‘write’ command but the server says:
«Caught /write not allowed », which I tried to fix by adding "allowWrite" : true in my config.json (I took the key by searching through the code),
but it did not change the error message .
 
My requests looked like this : 
 
url = http://ec2_blabblabla:8080/resource/entwine-data-pdlb
requests.put(url + "/write?schema:['Classification']", b" \x00\x00")
 
So I am a little bit early on this feature or misdoing something ?
 
Best regards,
Thomas

_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/pdal



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180120/3c0e44a9/attachment.html>

From dan.lipsa at kitware.com  Wed Jan 31 11:37:30 2018
From: dan.lipsa at kitware.com (Dan Lipsa)
Date: Wed, 31 Jan 2018 14:37:30 -0500
Subject: [pdal] execute a pipeline from python
Message-ID: <CADwGrVqv5QCfM4g1fSwBeitkUxuvh1ceODPoM2gtJVM_2J15fQ@mail.gmail.com>

Hi all,
I can enable streaming in a pipeline using

./pdal pipeline --stream dsm.json

Can I do the same thing in python?
What is the option that I need to set?

pipeline = pdal.Pipeline(json)
pipeline.validate()  # check if our JSON and options were good
count = pipeline.execute()

Thanks,
Dan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180131/ce453922/attachment.html>

From howard at hobu.co  Wed Jan 31 11:43:43 2018
From: howard at hobu.co (Howard Butler)
Date: Wed, 31 Jan 2018 13:43:43 -0600
Subject: [pdal] execute a pipeline from python
In-Reply-To: <CADwGrVqv5QCfM4g1fSwBeitkUxuvh1ceODPoM2gtJVM_2J15fQ@mail.gmail.com>
References: <CADwGrVqv5QCfM4g1fSwBeitkUxuvh1ceODPoM2gtJVM_2J15fQ@mail.gmail.com>
Message-ID: <62e73b20-acbd-7e73-3fc1-37e95ff06f66@hobu.co>



On 1/31/18 1:37 PM, Dan Lipsa wrote:
> Hi all,
> I can enable streaming in a pipeline using
>
> ./pdal pipeline --stream dsm.json
>
> Can I do the same thing in python?
> What is the option that I need to set?
>
> pipeline = pdal.Pipeline(json)
> pipeline.validate()  # check if our JSON and options were good
> count = pipeline.execute()
>

Dan,

No, that bit of Python API isn't done yet. There's a bit of a question
of what we should do there too? Presumably the API would have the user
set a chunk size and then return an iterator. The API to follow would be
the PipelineKernel.cpp implementation, but apply it to the Python/Cython
extension stuff.

I'd be happy to merge a patch that did this.

Howard

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 548 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180131/b6701a27/attachment.sig>

From dan.lipsa at kitware.com  Wed Jan 31 11:54:19 2018
From: dan.lipsa at kitware.com (Dan Lipsa)
Date: Wed, 31 Jan 2018 14:54:19 -0500
Subject: [pdal] execute a pipeline from python
In-Reply-To: <62e73b20-acbd-7e73-3fc1-37e95ff06f66@hobu.co>
References: <CADwGrVqv5QCfM4g1fSwBeitkUxuvh1ceODPoM2gtJVM_2J15fQ@mail.gmail.com>
 <62e73b20-acbd-7e73-3fc1-37e95ff06f66@hobu.co>
Message-ID: <CADwGrVrvP8tUE177YL93xVNSzDhZxWZPcshjn5DUNQY+BqbjhA@mail.gmail.com>

Hi Howard,
Thanks for your answer.

I was thinking more along the lines of what the command line tool does:
just set on option "stream" to the pipeline.
Is this choosing a default chunk (buffer) size?

For instance the following pipeline takes several point cloud "bricks"
and generates the dsm for the whole surface covered.


{
  "pipeline": [
    "a.bpf",
    "b.bpf",
    {
      "resolution": 0.25,
      "filename":"test.tif",
      "output_type": "max",
      "window_size": "20",
      "bounds": "([740698.8745, 741144.3546], [4404897.242, 4405465.48])"
    }
  ]
}




On Wed, Jan 31, 2018 at 2:43 PM, Howard Butler <howard at hobu.co> wrote:

>
>
> On 1/31/18 1:37 PM, Dan Lipsa wrote:
> > Hi all,
> > I can enable streaming in a pipeline using
> >
> > ./pdal pipeline --stream dsm.json
> >
> > Can I do the same thing in python?
> > What is the option that I need to set?
> >
> > pipeline = pdal.Pipeline(json)
> > pipeline.validate()  # check if our JSON and options were good
> > count = pipeline.execute()
> >
>
> Dan,
>
> No, that bit of Python API isn't done yet. There's a bit of a question
> of what we should do there too? Presumably the API would have the user
> set a chunk size and then return an iterator. The API to follow would be
> the PipelineKernel.cpp implementation, but apply it to the Python/Cython
> extension stuff.
>
> I'd be happy to merge a patch that did this.
>
> Howard
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180131/bad1b357/attachment.html>

From howard at hobu.co  Wed Jan 31 12:11:28 2018
From: howard at hobu.co (Howard Butler)
Date: Wed, 31 Jan 2018 14:11:28 -0600
Subject: [pdal] execute a pipeline from python
In-Reply-To: <CADwGrVrvP8tUE177YL93xVNSzDhZxWZPcshjn5DUNQY+BqbjhA@mail.gmail.com>
References: <CADwGrVqv5QCfM4g1fSwBeitkUxuvh1ceODPoM2gtJVM_2J15fQ@mail.gmail.com>
 <62e73b20-acbd-7e73-3fc1-37e95ff06f66@hobu.co>
 <CADwGrVrvP8tUE177YL93xVNSzDhZxWZPcshjn5DUNQY+BqbjhA@mail.gmail.com>
Message-ID: <92358E8E-2BE8-4C8A-92F8-3199287E2B95@hobu.co>

When you .execute() a pipeline in Python, you get back the data in the pipeline.arrays variable. In a stream scenario, that behavior would be disrupted, or we would need to have it return an iterator or something.

If you want to just execute a pipeline in stream mode without caring for the numpy arrays of the data, is the a reason to not simply use subprocess and invoke the shell?

Howard



> On Jan 31, 2018, at 1:54 PM, Dan Lipsa <dan.lipsa at kitware.com> wrote:
> 
> Hi Howard,
> Thanks for your answer.
> 
> I was thinking more along the lines of what the command line tool does: just set on option "stream" to the pipeline.
> Is this choosing a default chunk (buffer) size?
> 
> For instance the following pipeline takes several point cloud "bricks"
> and generates the dsm for the whole surface covered.
> 
> 
> {
>   "pipeline": [
>     "a.bpf",
>     "b.bpf",
>     {
>       "resolution": 0.25,
>       "filename":"test.tif",
>       "output_type": "max",
>       "window_size": "20",
>       "bounds": "([740698.8745, 741144.3546], [4404897.242, 4405465.48])"
>     }
>   ]
> }
> 
> 
> 
> 
> On Wed, Jan 31, 2018 at 2:43 PM, Howard Butler <howard at hobu.co <mailto:howard at hobu.co>> wrote:
> 
> 
> On 1/31/18 1:37 PM, Dan Lipsa wrote:
> > Hi all,
> > I can enable streaming in a pipeline using
> >
> > ./pdal pipeline --stream dsm.json
> >
> > Can I do the same thing in python?
> > What is the option that I need to set?
> >
> > pipeline = pdal.Pipeline(json)
> > pipeline.validate()  # check if our JSON and options were good
> > count = pipeline.execute()
> >
> 
> Dan,
> 
> No, that bit of Python API isn't done yet. There's a bit of a question
> of what we should do there too? Presumably the API would have the user
> set a chunk size and then return an iterator. The API to follow would be
> the PipelineKernel.cpp implementation, but apply it to the Python/Cython
> extension stuff.
> 
> I'd be happy to merge a patch that did this.
> 
> Howard
> 
> 
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org <mailto:pdal at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/pdal <https://lists.osgeo.org/mailman/listinfo/pdal>
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180131/105e65c2/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 528 bytes
Desc: Message signed with OpenPGP
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180131/105e65c2/attachment.sig>

From dan.lipsa at kitware.com  Wed Jan 31 13:11:35 2018
From: dan.lipsa at kitware.com (Dan Lipsa)
Date: Wed, 31 Jan 2018 16:11:35 -0500
Subject: [pdal] execute a pipeline from python
In-Reply-To: <92358E8E-2BE8-4C8A-92F8-3199287E2B95@hobu.co>
References: <CADwGrVqv5QCfM4g1fSwBeitkUxuvh1ceODPoM2gtJVM_2J15fQ@mail.gmail.com>
 <62e73b20-acbd-7e73-3fc1-37e95ff06f66@hobu.co>
 <CADwGrVrvP8tUE177YL93xVNSzDhZxWZPcshjn5DUNQY+BqbjhA@mail.gmail.com>
 <92358E8E-2BE8-4C8A-92F8-3199287E2B95@hobu.co>
Message-ID: <CADwGrVrpQROGF+AVSv2Ju4WzFAGhxQhUW1NPBcr=Kf-qCxo-og@mail.gmail.com>

On Wed, Jan 31, 2018 at 3:11 PM, Howard Butler <howard at hobu.co> wrote:

> When you .execute() a pipeline in Python, you get back the data in the
> pipeline.arrays variable. In a stream scenario, that behavior would be
> disrupted, or we would need to have it return an iterator or something.
>

I see.


>
> If you want to just execute a pipeline in stream mode without caring for
> the numpy arrays of the data, is the a reason to not simply use subprocess
> and invoke the shell?
>
I was just thinking about not going through the shell, but probably the
effect of that compared with the total time would be negligible.

Thanks again!




> Howard
>
>
>
>
> On Jan 31, 2018, at 1:54 PM, Dan Lipsa <dan.lipsa at kitware.com> wrote:
>
> Hi Howard,
> Thanks for your answer.
>
> I was thinking more along the lines of what the command line tool does:
> just set on option "stream" to the pipeline.
> Is this choosing a default chunk (buffer) size?
>
> For instance the following pipeline takes several point cloud "bricks"
> and generates the dsm for the whole surface covered.
>
>
> {
>   "pipeline": [
>     "a.bpf",
>     "b.bpf",
>     {
>       "resolution": 0.25,
>       "filename":"test.tif",
>       "output_type": "max",
>       "window_size": "20",
>       "bounds": "([740698.8745, 741144.3546], [4404897.242, 4405465.48])"
>     }
>   ]
> }
>
>
>
>
> On Wed, Jan 31, 2018 at 2:43 PM, Howard Butler <howard at hobu.co> wrote:
>
>>
>>
>> On 1/31/18 1:37 PM, Dan Lipsa wrote:
>> > Hi all,
>> > I can enable streaming in a pipeline using
>> >
>> > ./pdal pipeline --stream dsm.json
>> >
>> > Can I do the same thing in python?
>> > What is the option that I need to set?
>> >
>> > pipeline = pdal.Pipeline(json)
>> > pipeline.validate()  # check if our JSON and options were good
>> > count = pipeline.execute()
>> >
>>
>> Dan,
>>
>> No, that bit of Python API isn't done yet. There's a bit of a question
>> of what we should do there too? Presumably the API would have the user
>> set a chunk size and then return an iterator. The API to follow would be
>> the PipelineKernel.cpp implementation, but apply it to the Python/Cython
>> extension stuff.
>>
>> I'd be happy to merge a patch that did this.
>>
>> Howard
>>
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20180131/31601a31/attachment.html>

