From mpg at flaxen.com  Thu Mar  1 16:19:49 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Thu Mar  1 16:20:47 2012
Subject: [pdal] filesystem3, pdalboost, VS10
Message-ID: <000901ccf7f1$09705ec0$1c511c40$@flaxen.com>

I'm trying to build under VS2010, for the 1st time since the sprint, and I'm getting a bazillion link errors on pdal.lib due to missing functions from pdalboost::filesystem3.  I'm using the embedded boost.

Before I dive into this, anyone have any clues or hints?

-mpg


From kmckelvey at lizardtech.com  Thu Mar  1 16:56:42 2012
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Thu Mar  1 16:58:15 2012
Subject: [pdal] filesystem3, pdalboost, VS10
In-Reply-To: <000901ccf7f1$09705ec0$1c511c40$@flaxen.com>
References: <000901ccf7f1$09705ec0$1c511c40$@flaxen.com>
Message-ID: <C55473998E248B4DAEC5342D698DFE8501293E174F@sea-srv-mail.lizardtech.com>

I believe this is/was building correctly.  Though there was a fair amount of trouble around whether to compile with BOOST_TEST_DYN_LINK or not.  Are any of the symbols mentioned "main"-related?


-----Original Message-----
From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P. Gerlek
Sent: jeudi 1 mars 2012 15:20
To: pdal@lists.osgeo.org
Subject: [pdal] filesystem3, pdalboost, VS10

I'm trying to build under VS2010, for the 1st time since the sprint, and I'm getting a bazillion link errors on pdal.lib due to missing functions from pdalboost::filesystem3.  I'm using the embedded boost.

Before I dive into this, anyone have any clues or hints?

-mpg


_______________________________________________
pdal mailing list
pdal@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/pdal
From hobu.inc at gmail.com  Thu Mar  1 17:27:06 2012
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu Mar  1 17:27:30 2012
Subject: [pdal] filesystem3, pdalboost, VS10
In-Reply-To: <C55473998E248B4DAEC5342D698DFE8501293E174F@sea-srv-mail.lizardtech.com>
References: <000901ccf7f1$09705ec0$1c511c40$@flaxen.com>
	<C55473998E248B4DAEC5342D698DFE8501293E174F@sea-srv-mail.lizardtech.com>
Message-ID: <7A114454-86A7-40FB-A266-6C8235F447C8@gmail.com>

There's the LINK_PRIVATE thing that Kirk added, which seems to require the latest-released CMake to use, that might fix those dual-linking issues.  You were tweaking around this recently https://github.com/PDAL/PDAL/commit/a79ddfab90938befeb1b45b967401de51309bcda


On Mar 1, 2012, at 3:56 PM, Kirk McKelvey wrote:

> I believe this is/was building correctly.  Though there was a fair amount of trouble around whether to compile with BOOST_TEST_DYN_LINK or not.  Are any of the symbols mentioned "main"-related?
> 
> 
> -----Original Message-----
> From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P. Gerlek
> Sent: jeudi 1 mars 2012 15:20
> To: pdal@lists.osgeo.org
> Subject: [pdal] filesystem3, pdalboost, VS10
> 
> I'm trying to build under VS2010, for the 1st time since the sprint, and I'm getting a bazillion link errors on pdal.lib due to missing functions from pdalboost::filesystem3.  I'm using the embedded boost.
> 
> Before I dive into this, anyone have any clues or hints?
> 
> -mpg
> 
> 
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal

From mpg at flaxen.com  Thu Mar  1 18:06:05 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Thu Mar  1 18:06:59 2012
Subject: [pdal] filesystem3, pdalboost, VS10
In-Reply-To: <7A114454-86A7-40FB-A266-6C8235F447C8@gmail.com>
References: <000901ccf7f1$09705ec0$1c511c40$@flaxen.com>	<C55473998E248B4DAEC5342D698DFE8501293E174F@sea-srv-mail.lizardtech.com>
	<7A114454-86A7-40FB-A266-6C8235F447C8@gmail.com>
Message-ID: <001301ccf7ff$e1d2ee00$a578ca00$@flaxen.com>

That tweak was just to fix a cmake-lint issue.  And I am using the latest cmake, I upgraded this morning...

-mpg


> -----Original Message-----
> From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Howard Butler
> Sent: Thursday, March 01, 2012 2:27 PM
> To: pdal@lists.osgeo.org
> Subject: Re: [pdal] filesystem3, pdalboost, VS10
> 
> There's the LINK_PRIVATE thing that Kirk added, which seems to require the latest-released CMake to use, that might fix those dual-
> linking issues.  You were tweaking around this recently
> https://github.com/PDAL/PDAL/commit/a79ddfab90938befeb1b45b967401de51309bcda
> 
> 
> On Mar 1, 2012, at 3:56 PM, Kirk McKelvey wrote:
> 
> > I believe this is/was building correctly.  Though there was a fair amount of trouble around whether to compile with
> BOOST_TEST_DYN_LINK or not.  Are any of the symbols mentioned "main"-related?
> >
> >
> > -----Original Message-----
> > From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P. Gerlek
> > Sent: jeudi 1 mars 2012 15:20
> > To: pdal@lists.osgeo.org
> > Subject: [pdal] filesystem3, pdalboost, VS10
> >
> > I'm trying to build under VS2010, for the 1st time since the sprint, and I'm getting a bazillion link errors on pdal.lib due to missing
> functions from pdalboost::filesystem3.  I'm using the embedded boost.
> >
> > Before I dive into this, anyone have any clues or hints?
> >
> > -mpg
> >
> >
> > _______________________________________________
> > pdal mailing list
> > pdal@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/pdal
> > _______________________________________________
> > pdal mailing list
> > pdal@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/pdal
> 
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal

From mpg at flaxen.com  Thu Mar  1 18:09:16 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Thu Mar  1 18:09:36 2012
Subject: [pdal] filesystem3, pdalboost, VS10
In-Reply-To: <C55473998E248B4DAEC5342D698DFE8501293E174F@sea-srv-mail.lizardtech.com>
References: <000901ccf7f1$09705ec0$1c511c40$@flaxen.com>
	<C55473998E248B4DAEC5342D698DFE8501293E174F@sea-srv-mail.lizardtech.com>
Message-ID: <001401ccf800$537f1e70$fa7d5b50$@flaxen.com>

Not main-related, no -- this is just resolving stuff to for the DLL.

Full errors down below, but they look like this:

unresolved external symbol "bool __cdecl pdalboost::filesystem3::detail::remove(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)" (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_code@system@3@@Z) referenced in function "bool __cdecl pdalboost::filesystem3::remove(class pdalboost::filesystem3::path const &)" (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)

What's the LINK_PRIVATE thing Hobu mentioned?

-mpg


> -----Original Message-----
> From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> Sent: Thursday, March 01, 2012 1:57 PM
> To: pdal@lists.osgeo.org
> Subject: RE: [pdal] filesystem3, pdalboost, VS10
> 
> I believe this is/was building correctly.  Though there was a fair amount of trouble around whether to compile with
> BOOST_TEST_DYN_LINK or not.  Are any of the symbols mentioned "main"-related?
> 
> 
> -----Original Message-----
> From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P. Gerlek
> Sent: jeudi 1 mars 2012 15:20
> To: pdal@lists.osgeo.org
> Subject: [pdal] filesystem3, pdalboost, VS10
> 
> I'm trying to build under VS2010, for the 1st time since the sprint, and I'm getting a bazillion link errors on pdal.lib due to missing
> functions from pdalboost::filesystem3.  I'm using the embedded boost.
> 
> Before I dive into this, anyone have any clues or hints?
> 
> -mpg
> 
> 
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal




Error	1	error LNK2019: unresolved external symbol "bool __cdecl pdalboost::filesystem3::detail::remove(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)" (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_code@system@3@@Z) referenced in function "bool __cdecl pdalboost::filesystem3::remove(class pdalboost::filesystem3::path const &)" (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
Error	2	error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::detail::rename(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)" (?rename@detail@filesystem3@pdalboost@@YAXABVpath@23@0PAVerror_code@system@3@@Z) referenced in function "void __cdecl pdalboost::filesystem3::rename(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)" (?rename@filesystem3@pdalboost@@YAXABVpath@12@0@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
Error	3	error LNK2019: unresolved external symbol "class pdalboost::filesystem3::file_status __cdecl pdalboost::filesystem3::detail::status(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)" (?status@detail@filesystem3@pdalboost@@YA?AVfile_status@23@ABVpath@23@PAVerror_code@system@3@@Z) referenced in function "bool __cdecl pdalboost::filesystem3::exists(class pdalboost::filesystem3::path const &)" (?exists@filesystem3@pdalboost@@YA_NABVpath@12@@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
Error	4	error LNK2019: unresolved external symbol "unsigned __int64 __cdecl pdalboost::filesystem3::detail::file_size(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)" (?file_size@detail@filesystem3@pdalboost@@YA_KABVpath@23@PAVerror_code@system@3@@Z) referenced in function "unsigned __int64 __cdecl pdalboost::filesystem3::file_size(class pdalboost::filesystem3::path const &)" (?file_size@filesystem3@pdalboost@@YA_KABVpath@12@@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
Error	5	error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const *,wchar_t const *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)" (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "public: class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const __thiscall pdalboost::filesystem3::path::string(class std::codecvt<wchar_t,char,int> const &)const " (?string@path@filesystem3@pdalboost@@QBE?BV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV?$codecvt@_WDH@5@@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
Error	6	error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const *,wchar_t const *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)" (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV?$codecvt@_WDH@5@@Z)	D:\dev\pdal\src\StageFactory.obj	pdal
Error	7	error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const *,wchar_t const *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)" (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV?$codecvt@_WDH@5@@Z)	D:\dev\pdal\src\Utils.obj	pdal
Error	8	error LNK2019: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)" (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ) referenced in function "public: static class std::codecvt<wchar_t,char,int> const & __cdecl pdalboost::filesystem3::path::codecvt(void)" (?codecvt@path@filesystem3@pdalboost@@SAABV?$codecvt@_WDH@std@@XZ)	D:\dev\pdal\src\FileUtils.obj	pdal
Error	9	error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)" (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ)	D:\dev\pdal\src\StageFactory.obj	pdal
Error	10	error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)" (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ)	D:\dev\pdal\src\Utils.obj	pdal
Error	11	error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::detail::current_path(class pdalboost::system::error_code *)" (?current_path@detail@filesystem3@pdalboost@@YA?AVpath@23@PAVerror_code@system@3@@Z) referenced in function "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::current_path(void)" (?current_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)	D:\dev\pdal\src\FileUtils.obj	pdal
Error	12	error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::absolute(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)" (?absolute@filesystem3@pdalboost@@YA?AVpath@12@ABV312@0@Z) referenced in function "public: static class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl pdal::FileUtils::toAbsolutePath(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (?toAbsolutePath@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV34@@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
Error	13	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall pdalboost::filesystem3::path::parent_path(void)const " (?parent_path@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in function "public: static class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl pdal::FileUtils::getDirectory(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (?getDirectory@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV34@@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
Error	14	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall pdalboost::filesystem3::path::root_name(void)const " (?root_name@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_name(void)const " (?has_root_name@path@filesystem3@pdalboost@@QBE_NXZ)	D:\dev\pdal\src\FileUtils.obj	pdal
Error	15	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall pdalboost::filesystem3::path::root_directory(void)const " (?root_directory@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_directory(void)const " (?has_root_directory@path@filesystem3@pdalboost@@QBE_NXZ)	D:\dev\pdal\src\FileUtils.obj	pdal
Error	16	error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const *,char const *,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)" (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "void __cdecl pdalboost::filesystem3::path_traits::dispatch<class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
(??$dispatch@V?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@@path_traits@filesystem3@pdalboost@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@4@ABV?$codecvt@_WDH@4@@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
Error	17	error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const *,char const *,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)" (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@ABV?$codecvt@_WDH@5@@Z)	D:\dev\pdal\src\StageFactory.obj	pdal
Error	18	error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const *,char const *,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)" (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@ABV?$codecvt@_WDH@5@@Z)	D:\dev\pdal\src\Utils.obj	pdal
Error	19	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall pdalboost::filesystem3::path::stem(void)const " (?stem@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in function "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)	D:\dev\pdal\src\StageFactory.obj	pdal
Error	20	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall pdalboost::filesystem3::path::extension(void)const " (?extension@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in function "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)	D:\dev\pdal\src\StageFactory.obj	pdal
Error	21	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall pdalboost::filesystem3::path::filename(void)const " (?filename@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in function "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)	D:\dev\pdal\src\StageFactory.obj	pdal
Error	22	error LNK2019: unresolved external symbol "private: class pdalboost::filesystem3::file_status __thiscall pdalboost::filesystem3::directory_entry::m_get_symlink_status(class pdalboost::system::error_code *)const " (?m_get_symlink_status@directory_entry@filesystem3@pdalboost@@ABE?AVfile_status@23@PAVerror_code@system@3@@Z) referenced in function "public: class pdalboost::filesystem3::file_status __thiscall pdalboost::filesystem3::directory_entry::symlink_status(void)const " (?symlink_status@directory_entry@filesystem3@pdalboost@@QBE?AVfile_status@23@XZ)	D:\dev\pdal\src\StageFactory.obj	pdal
Error	23	error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::detail::directory_iterator_construct(class pdalboost::filesystem3::directory_iterator &,class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)" (?directory_iterator_construct@detail@filesystem3@pdalboost@@YAXAAVdirectory_iterator@23@ABVpath@23@PAVerror_code@system@3@@Z) referenced in function "public: __thiscall pdalboost::filesystem3::directory_iterator::directory_iterator(class pdalboost::filesystem3::path const &)" (??0directory_iterator@filesystem3@pdalboost@@QAE@ABVpath@12@@Z)	D:\dev\pdal\src\StageFactory.obj	pdal
Error	24	error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::detail::directory_iterator_increment(class pdalboost::filesystem3::directory_iterator &,class pdalboost::system::error_code *)" (?directory_iterator_increment@detail@filesystem3@pdalboost@@YAXAAVdirectory_iterator@23@PAVerror_code@system@3@@Z) referenced in function "private: void __thiscall pdalboost::filesystem3::directory_iterator::increment(void)" (?increment@directory_iterator@filesystem3@pdalboost@@AAEXXZ)	D:\dev\pdal\src\StageFactory.obj	pdal
Error	25	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall pdalboost::filesystem3::path::begin(void)const " (?begin@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ) referenced in function "bool __cdecl pdalboost::filesystem3::operator<(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)" (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)	D:\dev\pdal\src\StageFactory.obj	pdal
Error	26	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall pdalboost::filesystem3::path::end(void)const " (?end@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ) referenced in function "bool __cdecl pdalboost::filesystem3::operator<(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)" (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)	D:\dev\pdal\src\StageFactory.obj	pdal
Error	27	error LNK2019: unresolved external symbol "private: static void __cdecl pdalboost::filesystem3::path::m_path_iterator_increment(class pdalboost::filesystem3::path::iterator &)" (?m_path_iterator_increment@path@filesystem3@pdalboost@@CAXAAViterator@123@@Z) referenced in function "private: void __thiscall pdalboost::filesystem3::path::iterator::increment(void)" (?increment@iterator@path@filesystem3@pdalboost@@AAEXXZ)	D:\dev\pdal\src\StageFactory.obj	pdal
Error	28	error LNK2019: unresolved external symbol "class pdalboost::system::error_code __cdecl pdalboost::filesystem3::detail::dir_itr_close(void * &)" (?dir_itr_close@detail@filesystem3@pdalboost@@YA?AVerror_code@system@3@AAPAX@Z) referenced in function "public: __thiscall pdalboost::filesystem3::detail::dir_itr_imp::~dir_itr_imp(void)" (??1dir_itr_imp@detail@filesystem3@pdalboost@@QAE@XZ)	D:\dev\pdal\src\StageFactory.obj	pdal
Error	29	error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::detail::unique_path(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)" (?unique_path@detail@filesystem3@pdalboost@@YA?AVpath@23@ABV423@PAVerror_code@system@3@@Z) referenced in function "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::unique_path(class pdalboost::filesystem3::path const &)" (?unique_path@filesystem3@pdalboost@@YA?AVpath@12@ABV312@@Z)	D:\dev\pdal\src\Utils.obj	pdal
Error	30	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path & __thiscall pdalboost::filesystem3::path::operator/=(class pdalboost::filesystem3::path const &)" (??_0path@filesystem3@pdalboost@@QAEAAV012@ABV012@@Z) referenced in function "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::operator/(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)" (??Kfilesystem3@pdalboost@@YA?AVpath@01@ABV201@0@Z)	D:\dev\pdal\src\Utils.obj	pdal
Error	31	error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::detail::temp_directory_path(class pdalboost::system::error_code *)" (?temp_directory_path@detail@filesystem3@pdalboost@@YA?AVpath@23@PAVerror_code@system@3@@Z) referenced in function "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::temp_directory_path(void)"(?temp_directory_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)	D:\dev\pdal\src\Utils.obj	pdal
Error	32	error LNK1120: 25 unresolved externals	D:\dev\pdal\bin\Debug\pdal.dll	pdal
Error	33	error MSB6006: "link.exe" exited with code 1.	C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp.Win32.Targets	275	6	pcpipeline

From mpg at flaxen.com  Thu Mar  1 18:13:21 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Thu Mar  1 18:13:58 2012
Subject: [pdal] filesystem3, pdalboost, VS10
In-Reply-To: <001401ccf800$537f1e70$fa7d5b50$@flaxen.com>
References: <000901ccf7f1$09705ec0$1c511c40$@flaxen.com>
	<C55473998E248B4DAEC5342D698DFE8501293E174F@sea-srv-mail.lizardtech.com>
	<001401ccf800$537f1e70$fa7d5b50$@flaxen.com>
Message-ID: <001501ccf800$e60cd1b0$b2267510$@flaxen.com>

I think it's just that pdalboost.lib isn't getting seen at link time for some reason...

-mpg


> -----Original Message-----
> From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> Sent: Thursday, March 01, 2012 3:09 PM
> To: 'Kirk McKelvey'; pdal@lists.osgeo.org
> Subject: RE: [pdal] filesystem3, pdalboost, VS10
> 
> Not main-related, no -- this is just resolving stuff to for the DLL.
> 
> Full errors down below, but they look like this:
> 
> unresolved external symbol "bool __cdecl pdalboost::filesystem3::detail::remove(class pdalboost::filesystem3::path const &,class
> pdalboost::system::error_code *)"
> (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_code@system@3@@Z) referenced in function "bool
> __cdecl pdalboost::filesystem3::remove(class pdalboost::filesystem3::path const &)"
> (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)
> 
> What's the LINK_PRIVATE thing Hobu mentioned?
> 
> -mpg
> 
> 
> > -----Original Message-----
> > From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> > Sent: Thursday, March 01, 2012 1:57 PM
> > To: pdal@lists.osgeo.org
> > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> >
> > I believe this is/was building correctly.  Though there was a fair amount of trouble around whether to compile with
> > BOOST_TEST_DYN_LINK or not.  Are any of the symbols mentioned "main"-related?
> >
> >
> > -----Original Message-----
> > From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P. Gerlek
> > Sent: jeudi 1 mars 2012 15:20
> > To: pdal@lists.osgeo.org
> > Subject: [pdal] filesystem3, pdalboost, VS10
> >
> > I'm trying to build under VS2010, for the 1st time since the sprint, and I'm getting a bazillion link errors on pdal.lib due to missing
> > functions from pdalboost::filesystem3.  I'm using the embedded boost.
> >
> > Before I dive into this, anyone have any clues or hints?
> >
> > -mpg
> >
> >
> > _______________________________________________
> > pdal mailing list
> > pdal@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/pdal
> > _______________________________________________
> > pdal mailing list
> > pdal@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/pdal
> 
> 
> 
> 
> Error	1	error LNK2019: unresolved external symbol "bool __cdecl pdalboost::filesystem3::detail::remove(class
> pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_code@system@3@@Z) referenced in function "bool
> __cdecl pdalboost::filesystem3::remove(class pdalboost::filesystem3::path const &)"
> (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
> Error	2	error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::detail::rename(class
> pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> (?rename@detail@filesystem3@pdalboost@@YAXABVpath@23@0PAVerror_code@system@3@@Z) referenced in function "void
> __cdecl pdalboost::filesystem3::rename(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)"
> (?rename@filesystem3@pdalboost@@YAXABVpath@12@0@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
> Error	3	error LNK2019: unresolved external symbol "class pdalboost::filesystem3::file_status __cdecl
> pdalboost::filesystem3::detail::status(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> (?status@detail@filesystem3@pdalboost@@YA?AVfile_status@23@ABVpath@23@PAVerror_code@system@3@@Z) referenced in
> function "bool __cdecl pdalboost::filesystem3::exists(class pdalboost::filesystem3::path const &)"
> (?exists@filesystem3@pdalboost@@YA_NABVpath@12@@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
> Error	4	error LNK2019: unresolved external symbol "unsigned __int64 __cdecl pdalboost::filesystem3::detail::file_size(class
> pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> (?file_size@detail@filesystem3@pdalboost@@YA_KABVpath@23@PAVerror_code@system@3@@Z) referenced in function
> "unsigned __int64 __cdecl pdalboost::filesystem3::file_size(class pdalboost::filesystem3::path const &)"
> (?file_size@filesystem3@pdalboost@@YA_KABVpath@12@@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
> Error	5	error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const
> *,wchar_t const *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > &,class
> std::codecvt<wchar_t,char,int> const &)"
> (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2
> @@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "public: class std::basic_string<char,struct
> std::char_traits<char>,class std::allocator<char> > const __thiscall pdalboost::filesystem3::path::string(class
> std::codecvt<wchar_t,char,int> const &)const "
> (?string@path@filesystem3@pdalboost@@QBE?BV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV
> ?$codecvt@_WDH@5@@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
> Error	6	error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const
> *,wchar_t const *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > &,class
> std::codecvt<wchar_t,char,int> const &)"
> (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2
> @@std@@ABV?$codecvt@_WDH@5@@Z)	D:\dev\pdal\src\StageFactory.obj	pdal
> Error	7	error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const
> *,wchar_t const *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > &,class
> std::codecvt<wchar_t,char,int> const &)"
> (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2
> @@std@@ABV?$codecvt@_WDH@5@@Z)	D:\dev\pdal\src\Utils.obj	pdal
> Error	8	error LNK2019: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ) referenced in function
> "public: static class std::codecvt<wchar_t,char,int> const & __cdecl pdalboost::filesystem3::path::codecvt(void)"
> (?codecvt@path@filesystem3@pdalboost@@SAABV?$codecvt@_WDH@std@@XZ)	D:\dev\pdal\src\FileUtils.obj	pdal
> Error	9	error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ)
> 	D:\dev\pdal\src\StageFactory.obj	pdal
> Error	10	error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ)
> 	D:\dev\pdal\src\Utils.obj	pdal
> Error	11	error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> pdalboost::filesystem3::detail::current_path(class pdalboost::system::error_code *)"
> (?current_path@detail@filesystem3@pdalboost@@YA?AVpath@23@PAVerror_code@system@3@@Z) referenced in function
> "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::current_path(void)"
> (?current_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)	D:\dev\pdal\src\FileUtils.obj	pdal
> Error	12	error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> pdalboost::filesystem3::absolute(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)"
> (?absolute@filesystem3@pdalboost@@YA?AVpath@12@ABV312@0@Z) referenced in function "public: static class
> std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl pdal::FileUtils::toAbsolutePath(class
> std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)"
> (?toAbsolutePath@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV34@@Z
> )	D:\dev\pdal\src\FileUtils.obj	pdal
> Error	13	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> pdalboost::filesystem3::path::parent_path(void)const " (?parent_path@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> referenced in function "public: static class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl
> pdal::FileUtils::getDirectory(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)"
> (?getDirectory@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV34@@Z)
> 	D:\dev\pdal\src\FileUtils.obj	pdal
> Error	14	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> pdalboost::filesystem3::path::root_name(void)const " (?root_name@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced
> in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_name(void)const "
> (?has_root_name@path@filesystem3@pdalboost@@QBE_NXZ)	D:\dev\pdal\src\FileUtils.obj	pdal
> Error	15	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> pdalboost::filesystem3::path::root_directory(void)const " (?root_directory@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> referenced in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_directory(void)const "
> (?has_root_directory@path@filesystem3@pdalboost@@QBE_NXZ)	D:\dev\pdal\src\FileUtils.obj	pdal
> Error	16	error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> *,char const *,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class
> std::codecvt<wchar_t,char,int> const &)"
> (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W
> @2@@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "void __cdecl
> pdalboost::filesystem3::path_traits::dispatch<class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class
> std::allocator<wchar_t> > >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class
> std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int>
> const &)"
> (??$dispatch@V?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@@path_traits@filesystem3@pdalb
> oost@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AAV?$basic_string@_WU?$char_traits
> @_W@std@@V?$allocator@_W@2@@4@ABV?$codecvt@_WDH@4@@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
> Error	17	error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> *,char const *,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class
> std::codecvt<wchar_t,char,int> const &)"
> (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W
> @2@@std@@ABV?$codecvt@_WDH@5@@Z)	D:\dev\pdal\src\StageFactory.obj	pdal
> Error	18	error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> *,char const *,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class
> std::codecvt<wchar_t,char,int> const &)"
> (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W
> @2@@std@@ABV?$codecvt@_WDH@5@@Z)	D:\dev\pdal\src\Utils.obj	pdal
> Error	19	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> pdalboost::filesystem3::path::stem(void)const " (?stem@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in function
> "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> 	D:\dev\pdal\src\StageFactory.obj	pdal
> Error	20	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> pdalboost::filesystem3::path::extension(void)const " (?extension@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in
> function "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> 	D:\dev\pdal\src\StageFactory.obj	pdal
> Error	21	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> pdalboost::filesystem3::path::filename(void)const " (?filename@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in
> function "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> 	D:\dev\pdal\src\StageFactory.obj	pdal
> Error	22	error LNK2019: unresolved external symbol "private: class pdalboost::filesystem3::file_status __thiscall
> pdalboost::filesystem3::directory_entry::m_get_symlink_status(class pdalboost::system::error_code *)const "
> (?m_get_symlink_status@directory_entry@filesystem3@pdalboost@@ABE?AVfile_status@23@PAVerror_code@system@3@@Z)
> referenced in function "public: class pdalboost::filesystem3::file_status __thiscall
> pdalboost::filesystem3::directory_entry::symlink_status(void)const "
> (?symlink_status@directory_entry@filesystem3@pdalboost@@QBE?AVfile_status@23@XZ)	D:\dev\pdal\src\StageFactory.obj
> 	pdal
> Error	23	error LNK2019: unresolved external symbol "void __cdecl
> pdalboost::filesystem3::detail::directory_iterator_construct(class pdalboost::filesystem3::directory_iterator &,class
> pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> (?directory_iterator_construct@detail@filesystem3@pdalboost@@YAXAAVdirectory_iterator@23@ABVpath@23@PAVerror_code
> @system@3@@Z) referenced in function "public: __thiscall pdalboost::filesystem3::directory_iterator::directory_iterator(class
> pdalboost::filesystem3::path const &)" (??0directory_iterator@filesystem3@pdalboost@@QAE@ABVpath@12@@Z)
> 	D:\dev\pdal\src\StageFactory.obj	pdal
> Error	24	error LNK2019: unresolved external symbol "void __cdecl
> pdalboost::filesystem3::detail::directory_iterator_increment(class pdalboost::filesystem3::directory_iterator &,class
> pdalboost::system::error_code *)"
> (?directory_iterator_increment@detail@filesystem3@pdalboost@@YAXAAVdirectory_iterator@23@PAVerror_code@system@3@
> @Z) referenced in function "private: void __thiscall pdalboost::filesystem3::directory_iterator::increment(void)"
> (?increment@directory_iterator@filesystem3@pdalboost@@AAEXXZ)	D:\dev\pdal\src\StageFactory.obj	pdal
> Error	25	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall
> pdalboost::filesystem3::path::begin(void)const " (?begin@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ) referenced
> in function "bool __cdecl pdalboost::filesystem3::operator<(class pdalboost::filesystem3::path const &,class
> pdalboost::filesystem3::path const &)" (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)
> 	D:\dev\pdal\src\StageFactory.obj	pdal
> Error	26	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall
> pdalboost::filesystem3::path::end(void)const " (?end@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ) referenced in
> function "bool __cdecl pdalboost::filesystem3::operator<(class pdalboost::filesystem3::path const &,class
> pdalboost::filesystem3::path const &)" (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)
> 	D:\dev\pdal\src\StageFactory.obj	pdal
> Error	27	error LNK2019: unresolved external symbol "private: static void __cdecl
> pdalboost::filesystem3::path::m_path_iterator_increment(class pdalboost::filesystem3::path::iterator &)"
> (?m_path_iterator_increment@path@filesystem3@pdalboost@@CAXAAViterator@123@@Z) referenced in function "private: void
> __thiscall pdalboost::filesystem3::path::iterator::increment(void)" (?increment@iterator@path@filesystem3@pdalboost@@AAEXXZ)
> 	D:\dev\pdal\src\StageFactory.obj	pdal
> Error	28	error LNK2019: unresolved external symbol "class pdalboost::system::error_code __cdecl
> pdalboost::filesystem3::detail::dir_itr_close(void * &)"
> (?dir_itr_close@detail@filesystem3@pdalboost@@YA?AVerror_code@system@3@AAPAX@Z) referenced in function "public:
> __thiscall pdalboost::filesystem3::detail::dir_itr_imp::~dir_itr_imp(void)"
> (??1dir_itr_imp@detail@filesystem3@pdalboost@@QAE@XZ)	D:\dev\pdal\src\StageFactory.obj	pdal
> Error	29	error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> pdalboost::filesystem3::detail::unique_path(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> (?unique_path@detail@filesystem3@pdalboost@@YA?AVpath@23@ABV423@PAVerror_code@system@3@@Z) referenced in
> function "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::unique_path(class pdalboost::filesystem3::path const &)"
> (?unique_path@filesystem3@pdalboost@@YA?AVpath@12@ABV312@@Z)	D:\dev\pdal\src\Utils.obj	pdal
> Error	30	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path & __thiscall
> pdalboost::filesystem3::path::operator/=(class pdalboost::filesystem3::path const &)"
> (??_0path@filesystem3@pdalboost@@QAEAAV012@ABV012@@Z) referenced in function "class pdalboost::filesystem3::path
> __cdecl pdalboost::filesystem3::operator/(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)"
> (??Kfilesystem3@pdalboost@@YA?AVpath@01@ABV201@0@Z)	D:\dev\pdal\src\Utils.obj	pdal
> Error	31	error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> pdalboost::filesystem3::detail::temp_directory_path(class pdalboost::system::error_code *)"
> (?temp_directory_path@detail@filesystem3@pdalboost@@YA?AVpath@23@PAVerror_code@system@3@@Z) referenced in
> function "class pdalboost::filesystem3::path __cdecl
> pdalboost::filesystem3::temp_directory_path(void)"(?temp_directory_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)
> 	D:\dev\pdal\src\Utils.obj	pdal
> Error	32	error LNK1120: 25 unresolved externals	D:\dev\pdal\bin\Debug\pdal.dll	pdal
> Error	33	error MSB6006: "link.exe" exited with code 1.	C:\Program Files
> (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp.Win32.Targets	275	6	pcpipeline

From kmckelvey at lizardtech.com  Thu Mar  1 18:16:04 2012
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Thu Mar  1 18:16:48 2012
Subject: [pdal] filesystem3, pdalboost, VS10
In-Reply-To: <001401ccf800$537f1e70$fa7d5b50$@flaxen.com>
References: <000901ccf7f1$09705ec0$1c511c40$@flaxen.com>
	<C55473998E248B4DAEC5342D698DFE8501293E174F@sea-srv-mail.lizardtech.com>
	<001401ccf800$537f1e70$fa7d5b50$@flaxen.com>
Message-ID: <C55473998E248B4DAEC5342D698DFE8501293E1762@sea-srv-mail.lizardtech.com>

It is a cmake option I discovered when dealing with duplicate symbols trying to get the Windows build up.  It links against a library without adding it to the implicit dependencies list for the thing linking it in.  If you are getting undefined symbols I don't think it's the same issue.


-----Original Message-----
From: Michael P. Gerlek [mailto:mpg@flaxen.com]
Sent: jeudi 1 mars 2012 17:09
To: Kirk McKelvey; pdal@lists.osgeo.org
Subject: RE: [pdal] filesystem3, pdalboost, VS10

Not main-related, no -- this is just resolving stuff to for the DLL.

Full errors down below, but they look like this:

unresolved external symbol "bool __cdecl pdalboost::filesystem3::detail::remove(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)" (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_code@system@3@@Z) referenced in function "bool __cdecl pdalboost::filesystem3::remove(class pdalboost::filesystem3::path const &)" (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)

What's the LINK_PRIVATE thing Hobu mentioned?

-mpg


> -----Original Message-----
> From: pdal-bounces@lists.osgeo.org
> [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> Sent: Thursday, March 01, 2012 1:57 PM
> To: pdal@lists.osgeo.org
> Subject: RE: [pdal] filesystem3, pdalboost, VS10
>
> I believe this is/was building correctly.  Though there was a fair
> amount of trouble around whether to compile with BOOST_TEST_DYN_LINK or not.  Are any of the symbols mentioned "main"-related?
>
>
> -----Original Message-----
> From: pdal-bounces@lists.osgeo.org
> [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P. Gerlek
> Sent: jeudi 1 mars 2012 15:20
> To: pdal@lists.osgeo.org
> Subject: [pdal] filesystem3, pdalboost, VS10
>
> I'm trying to build under VS2010, for the 1st time since the sprint,
> and I'm getting a bazillion link errors on pdal.lib due to missing functions from pdalboost::filesystem3.  I'm using the embedded boost.
>
> Before I dive into this, anyone have any clues or hints?
>
> -mpg
>
>
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal




Error   1       error LNK2019: unresolved external symbol "bool __cdecl pdalboost::filesystem3::detail::remove(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)" (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_code@system@3@@Z) referenced in function "bool __cdecl pdalboost::filesystem3::remove(class pdalboost::filesystem3::path const &)" (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)  D:\dev\pdal\src\FileUtils.obj   pdal
Error   2       error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::detail::rename(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)" (?rename@detail@filesystem3@pdalboost@@YAXABVpath@23@0PAVerror_code@system@3@@Z) referenced in function "void __cdecl pdalboost::filesystem3::rename(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)" (?rename@filesystem3@pdalboost@@YAXABVpath@12@0@Z)    D:\dev\pdal\src\FileUtils.obj   pdal
Error   3       error LNK2019: unresolved external symbol "class pdalboost::filesystem3::file_status __cdecl pdalboost::filesystem3::detail::status(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)" (?status@detail@filesystem3@pdalboost@@YA?AVfile_status@23@ABVpath@23@PAVerror_code@system@3@@Z) referenced in function "bool __cdecl pdalboost::filesystem3::exists(class pdalboost::filesystem3::path const &)" (?exists@filesystem3@pdalboost@@YA_NABVpath@12@@Z)     D:\dev\pdal\src\FileUtils.obj   pdal
Error   4       error LNK2019: unresolved external symbol "unsigned __int64 __cdecl pdalboost::filesystem3::detail::file_size(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)" (?file_size@detail@filesystem3@pdalboost@@YA_KABVpath@23@PAVerror_code@system@3@@Z) referenced in function "unsigned __int64 __cdecl pdalboost::filesystem3::file_size(class pdalboost::filesystem3::path const &)" (?file_size@filesystem3@pdalboost@@YA_KABVpath@12@@Z)      D:\dev\pdal\src\FileUtils.obj   pdal
Error   5       error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const *,wchar_t const *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)" (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "public: class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const __thiscall pdalboost::filesystem3::path::string(class std::codecvt<wchar_t,char,int> const &)const " (?string@path@filesystem3@pdalboost@@QBE?BV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV?$codecvt@_WDH@5@@Z)   D:\dev\pdal\src\FileUtils.obj   pdal
Error   6       error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const *,wchar_t const *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)" (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV?$codecvt@_WDH@5@@Z)      D:\dev\pdal\src\StageFactory.obj        pdal
Error   7       error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const *,wchar_t const *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)" (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV?$codecvt@_WDH@5@@Z)      D:\dev\pdal\src\Utils.obj       pdal
Error   8       error LNK2019: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)" (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ) referenced in function "public: static class std::codecvt<wchar_t,char,int> const & __cdecl pdalboost::filesystem3::path::codecvt(void)" (?codecvt@path@filesystem3@pdalboost@@SAABV?$codecvt@_WDH@std@@XZ)     D:\dev\pdal\src\FileUtils.obj   pdal
Error   9       error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)" (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ) D:\dev\pdal\src\StageFactory.obj        pdal
Error   10      error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)" (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ) D:\dev\pdal\src\Utils.obj       pdal
Error   11      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::detail::current_path(class pdalboost::system::error_code *)" (?current_path@detail@filesystem3@pdalboost@@YA?AVpath@23@PAVerror_code@system@3@@Z) referenced in function "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::current_path(void)" (?current_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)   D:\dev\pdal\src\FileUtils.obj   pdal
Error   12      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::absolute(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)" (?absolute@filesystem3@pdalboost@@YA?AVpath@12@ABV312@0@Z) referenced in function "public: static class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl pdal::FileUtils::toAbsolutePath(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (?toAbsolutePath@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV34@@Z) D:\dev\pdal\src\FileUtils.obj   pdal
Error   13      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall pdalboost::filesystem3::path::parent_path(void)const " (?parent_path@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in function "public: static class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl pdal::FileUtils::getDirectory(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (?getDirectory@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV34@@Z)       D:\dev\pdal\src\FileUtils.obj   pdal
Error   14      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall pdalboost::filesystem3::path::root_name(void)const " (?root_name@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_name(void)const " (?has_root_name@path@filesystem3@pdalboost@@QBE_NXZ)       D:\dev\pdal\src\FileUtils.obj   pdal
Error   15      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall pdalboost::filesystem3::path::root_directory(void)const " (?root_directory@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_directory(void)const " (?has_root_directory@path@filesystem3@pdalboost@@QBE_NXZ)   D:\dev\pdal\src\FileUtils.obj   pdal
Error   16      error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const *,char const *,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)" (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "void __cdecl pdalboost::filesystem3::path_traits::dispatch<class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
(??$dispatch@V?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@@path_traits@filesystem3@pdalboost@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@4@ABV?$codecvt@_WDH@4@@Z)    D:\dev\pdal\src\FileUtils.obj   pdal
Error   17      error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const *,char const *,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)" (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@ABV?$codecvt@_WDH@5@@Z) D:\dev\pdal\src\StageFactory.obj        pdal
Error   18      error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const *,char const *,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)" (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@ABV?$codecvt@_WDH@5@@Z) D:\dev\pdal\src\Utils.obj       pdal
Error   19      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall pdalboost::filesystem3::path::stem(void)const " (?stem@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in function "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)       D:\dev\pdal\src\StageFactory.obj        pdal
Error   20      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall pdalboost::filesystem3::path::extension(void)const " (?extension@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in function "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)     D:\dev\pdal\src\StageFactory.obj        pdal
Error   21      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall pdalboost::filesystem3::path::filename(void)const " (?filename@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in function "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)       D:\dev\pdal\src\StageFactory.obj        pdal
Error   22      error LNK2019: unresolved external symbol "private: class pdalboost::filesystem3::file_status __thiscall pdalboost::filesystem3::directory_entry::m_get_symlink_status(class pdalboost::system::error_code *)const " (?m_get_symlink_status@directory_entry@filesystem3@pdalboost@@ABE?AVfile_status@23@PAVerror_code@system@3@@Z) referenced in function "public: class pdalboost::filesystem3::file_status __thiscall pdalboost::filesystem3::directory_entry::symlink_status(void)const " (?symlink_status@directory_entry@filesystem3@pdalboost@@QBE?AVfile_status@23@XZ)   D:\dev\pdal\src\StageFactory.obj        pdal
Error   23      error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::detail::directory_iterator_construct(class pdalboost::filesystem3::directory_iterator &,class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)" (?directory_iterator_construct@detail@filesystem3@pdalboost@@YAXAAVdirectory_iterator@23@ABVpath@23@PAVerror_code@system@3@@Z) referenced in function "public: __thiscall pdalboost::filesystem3::directory_iterator::directory_iterator(class pdalboost::filesystem3::path const &)" (??0directory_iterator@filesystem3@pdalboost@@QAE@ABVpath@12@@Z)       D:\dev\pdal\src\StageFactory.obj        pdal
Error   24      error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::detail::directory_iterator_increment(class pdalboost::filesystem3::directory_iterator &,class pdalboost::system::error_code *)" (?directory_iterator_increment@detail@filesystem3@pdalboost@@YAXAAVdirectory_iterator@23@PAVerror_code@system@3@@Z) referenced in function "private: void __thiscall pdalboost::filesystem3::directory_iterator::increment(void)" (?increment@directory_iterator@filesystem3@pdalboost@@AAEXXZ) D:\dev\pdal\src\StageFactory.obj        pdal
Error   25      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall pdalboost::filesystem3::path::begin(void)const " (?begin@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ) referenced in function "bool __cdecl pdalboost::filesystem3::operator<(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)" (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)    D:\dev\pdal\src\StageFactory.obj        pdal
Error   26      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall pdalboost::filesystem3::path::end(void)const " (?end@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ) referenced in function "bool __cdecl pdalboost::filesystem3::operator<(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)" (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)        D:\dev\pdal\src\StageFactory.obj        pdal
Error   27      error LNK2019: unresolved external symbol "private: static void __cdecl pdalboost::filesystem3::path::m_path_iterator_increment(class pdalboost::filesystem3::path::iterator &)" (?m_path_iterator_increment@path@filesystem3@pdalboost@@CAXAAViterator@123@@Z) referenced in function "private: void __thiscall pdalboost::filesystem3::path::iterator::increment(void)" (?increment@iterator@path@filesystem3@pdalboost@@AAEXXZ)      D:\dev\pdal\src\StageFactory.obj        pdal
Error   28      error LNK2019: unresolved external symbol "class pdalboost::system::error_code __cdecl pdalboost::filesystem3::detail::dir_itr_close(void * &)" (?dir_itr_close@detail@filesystem3@pdalboost@@YA?AVerror_code@system@3@AAPAX@Z) referenced in function "public: __thiscall pdalboost::filesystem3::detail::dir_itr_imp::~dir_itr_imp(void)" (??1dir_itr_imp@detail@filesystem3@pdalboost@@QAE@XZ)       D:\dev\pdal\src\StageFactory.obj        pdal
Error   29      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::detail::unique_path(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)" (?unique_path@detail@filesystem3@pdalboost@@YA?AVpath@23@ABV423@PAVerror_code@system@3@@Z) referenced in function "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::unique_path(class pdalboost::filesystem3::path const &)" (?unique_path@filesystem3@pdalboost@@YA?AVpath@12@ABV312@@Z)        D:\dev\pdal\src\Utils.obj       pdal
Error   30      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path & __thiscall pdalboost::filesystem3::path::operator/=(class pdalboost::filesystem3::path const &)" (??_0path@filesystem3@pdalboost@@QAEAAV012@ABV012@@Z) referenced in function "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::operator/(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)" (??Kfilesystem3@pdalboost@@YA?AVpath@01@ABV201@0@Z) D:\dev\pdal\src\Utils.obj       pdal
Error   31      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::detail::temp_directory_path(class pdalboost::system::error_code *)" (?temp_directory_path@detail@filesystem3@pdalboost@@YA?AVpath@23@PAVerror_code@system@3@@Z) referenced in function "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::temp_directory_path(void)"(?temp_directory_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)        D:\dev\pdal\src\Utils.obj       pdal
Error   32      error LNK1120: 25 unresolved externals  D:\dev\pdal\bin\Debug\pdal.dll  pdal
Error   33      error MSB6006: "link.exe" exited with code 1.   C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp.Win32.Targets   275     6       pcpipeline

From mpg at flaxen.com  Thu Mar  1 18:20:03 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Thu Mar  1 18:21:00 2012
Subject: [pdal] filesystem3, pdalboost, VS10
References: <000901ccf7f1$09705ec0$1c511c40$@flaxen.com>
	<C55473998E248B4DAEC5342D698DFE8501293E174F@sea-srv-mail.lizardtech.com>
	<001401ccf800$537f1e70$fa7d5b50$@flaxen.com>
Message-ID: <001601ccf801$d5aa3820$80fea860$@flaxen.com>

OK, yeah.  This is the problemo:



if (WIN32)
	if (CMAKE_VERSION VERSION_GREATER 2.8.7)
		target_link_libraries(${APPS_CPP_DEPENDENCIES} LINK_PRIVATE general ${Boost_LIBRARIES})
	endif(CMAKE_VERSION VERSION_GREATER 2.8.7)
else()
	target_link_libraries(${APPS_CPP_DEPENDENCIES} ${Boost_LIBRARIES})
endif(WIN32)




Observe that there is no "else" clause -- if you're using 2.8.7, then no libs to link for you!

Are we sure we mean "VERSION_GREATER" and not "VERSION_GREATER_OR_EQUAL"?  because 2.8.7 is the last released version, so it's not clear how anyone could be using anything GREATER than that.

Kirk?

-mpg


> -----Original Message-----
> From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> Sent: Thursday, March 01, 2012 3:13 PM
> To: 'mpg@flaxen.com'; 'Kirk McKelvey'; 'pdal@lists.osgeo.org'
> Subject: RE: [pdal] filesystem3, pdalboost, VS10
> 
> I think it's just that pdalboost.lib isn't getting seen at link time for some reason...
> 
> -mpg
> 
> 
> > -----Original Message-----
> > From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> > Sent: Thursday, March 01, 2012 3:09 PM
> > To: 'Kirk McKelvey'; pdal@lists.osgeo.org
> > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> >
> > Not main-related, no -- this is just resolving stuff to for the DLL.
> >
> > Full errors down below, but they look like this:
> >
> > unresolved external symbol "bool __cdecl pdalboost::filesystem3::detail::remove(class pdalboost::filesystem3::path const &,class
> > pdalboost::system::error_code *)"
> > (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_code@system@3@@Z) referenced in function "bool
> > __cdecl pdalboost::filesystem3::remove(class pdalboost::filesystem3::path const &)"
> > (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)
> >
> > What's the LINK_PRIVATE thing Hobu mentioned?
> >
> > -mpg
> >
> >
> > > -----Original Message-----
> > > From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> > > Sent: Thursday, March 01, 2012 1:57 PM
> > > To: pdal@lists.osgeo.org
> > > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> > >
> > > I believe this is/was building correctly.  Though there was a fair amount of trouble around whether to compile with
> > > BOOST_TEST_DYN_LINK or not.  Are any of the symbols mentioned "main"-related?
> > >
> > >
> > > -----Original Message-----
> > > From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P. Gerlek
> > > Sent: jeudi 1 mars 2012 15:20
> > > To: pdal@lists.osgeo.org
> > > Subject: [pdal] filesystem3, pdalboost, VS10
> > >
> > > I'm trying to build under VS2010, for the 1st time since the sprint, and I'm getting a bazillion link errors on pdal.lib due to missing
> > > functions from pdalboost::filesystem3.  I'm using the embedded boost.
> > >
> > > Before I dive into this, anyone have any clues or hints?
> > >
> > > -mpg
> > >
> > >
> > > _______________________________________________
> > > pdal mailing list
> > > pdal@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/pdal
> > > _______________________________________________
> > > pdal mailing list
> > > pdal@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/pdal
> >
> >
> >
> >
> > Error	1	error LNK2019: unresolved external symbol "bool __cdecl pdalboost::filesystem3::detail::remove(class
> > pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_code@system@3@@Z) referenced in function "bool
> > __cdecl pdalboost::filesystem3::remove(class pdalboost::filesystem3::path const &)"
> > (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
> > Error	2	error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::detail::rename(class
> > pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > (?rename@detail@filesystem3@pdalboost@@YAXABVpath@23@0PAVerror_code@system@3@@Z) referenced in function "void
> > __cdecl pdalboost::filesystem3::rename(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)"
> > (?rename@filesystem3@pdalboost@@YAXABVpath@12@0@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
> > Error	3	error LNK2019: unresolved external symbol "class pdalboost::filesystem3::file_status __cdecl
> > pdalboost::filesystem3::detail::status(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > (?status@detail@filesystem3@pdalboost@@YA?AVfile_status@23@ABVpath@23@PAVerror_code@system@3@@Z) referenced
> in
> > function "bool __cdecl pdalboost::filesystem3::exists(class pdalboost::filesystem3::path const &)"
> > (?exists@filesystem3@pdalboost@@YA_NABVpath@12@@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
> > Error	4	error LNK2019: unresolved external symbol "unsigned __int64 __cdecl pdalboost::filesystem3::detail::file_size(class
> > pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > (?file_size@detail@filesystem3@pdalboost@@YA_KABVpath@23@PAVerror_code@system@3@@Z) referenced in function
> > "unsigned __int64 __cdecl pdalboost::filesystem3::file_size(class pdalboost::filesystem3::path const &)"
> > (?file_size@filesystem3@pdalboost@@YA_KABVpath@12@@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
> > Error	5	error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const
> > *,wchar_t const *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > &,class
> > std::codecvt<wchar_t,char,int> const &)"
> >
> (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2
> > @@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "public: class std::basic_string<char,struct
> > std::char_traits<char>,class std::allocator<char> > const __thiscall pdalboost::filesystem3::path::string(class
> > std::codecvt<wchar_t,char,int> const &)const "
> >
> (?string@path@filesystem3@pdalboost@@QBE?BV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV
> > ?$codecvt@_WDH@5@@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
> > Error	6	error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const
> > *,wchar_t const *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > &,class
> > std::codecvt<wchar_t,char,int> const &)"
> >
> (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2
> > @@std@@ABV?$codecvt@_WDH@5@@Z)	D:\dev\pdal\src\StageFactory.obj	pdal
> > Error	7	error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const
> > *,wchar_t const *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > &,class
> > std::codecvt<wchar_t,char,int> const &)"
> >
> (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2
> > @@std@@ABV?$codecvt@_WDH@5@@Z)	D:\dev\pdal\src\Utils.obj	pdal
> > Error	8	error LNK2019: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ) referenced in function
> > "public: static class std::codecvt<wchar_t,char,int> const & __cdecl pdalboost::filesystem3::path::codecvt(void)"
> > (?codecvt@path@filesystem3@pdalboost@@SAABV?$codecvt@_WDH@std@@XZ)	D:\dev\pdal\src\FileUtils.obj	pdal
> > Error	9	error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ)
> > 	D:\dev\pdal\src\StageFactory.obj	pdal
> > Error	10	error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ)
> > 	D:\dev\pdal\src\Utils.obj	pdal
> > Error	11	error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > pdalboost::filesystem3::detail::current_path(class pdalboost::system::error_code *)"
> > (?current_path@detail@filesystem3@pdalboost@@YA?AVpath@23@PAVerror_code@system@3@@Z) referenced in function
> > "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::current_path(void)"
> > (?current_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)	D:\dev\pdal\src\FileUtils.obj	pdal
> > Error	12	error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > pdalboost::filesystem3::absolute(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)"
> > (?absolute@filesystem3@pdalboost@@YA?AVpath@12@ABV312@0@Z) referenced in function "public: static class
> > std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl pdal::FileUtils::toAbsolutePath(class
> > std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)"
> >
> (?toAbsolutePath@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV34@@Z
> > )	D:\dev\pdal\src\FileUtils.obj	pdal
> > Error	13	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > pdalboost::filesystem3::path::parent_path(void)const " (?parent_path@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> > referenced in function "public: static class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl
> > pdal::FileUtils::getDirectory(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)"
> > (?getDirectory@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV34@@Z)
> > 	D:\dev\pdal\src\FileUtils.obj	pdal
> > Error	14	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > pdalboost::filesystem3::path::root_name(void)const " (?root_name@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> referenced
> > in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_name(void)const "
> > (?has_root_name@path@filesystem3@pdalboost@@QBE_NXZ)	D:\dev\pdal\src\FileUtils.obj	pdal
> > Error	15	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > pdalboost::filesystem3::path::root_directory(void)const " (?root_directory@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> > referenced in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_directory(void)const "
> > (?has_root_directory@path@filesystem3@pdalboost@@QBE_NXZ)	D:\dev\pdal\src\FileUtils.obj	pdal
> > Error	16	error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > *,char const *,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class
> > std::codecvt<wchar_t,char,int> const &)"
> >
> (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W
> > @2@@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "void __cdecl
> > pdalboost::filesystem3::path_traits::dispatch<class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class
> > std::allocator<wchar_t> > >(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &,class
> > std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int>
> > const &)"
> >
> (??$dispatch@V?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@2@@std@@@path_traits@filesystem3@pdalb
> > oost@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AAV?$basic_string@_WU?$char_traits
> > @_W@std@@V?$allocator@_W@2@@4@ABV?$codecvt@_WDH@4@@Z)	D:\dev\pdal\src\FileUtils.obj	pdal
> > Error	17	error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > *,char const *,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class
> > std::codecvt<wchar_t,char,int> const &)"
> >
> (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W
> > @2@@std@@ABV?$codecvt@_WDH@5@@Z)	D:\dev\pdal\src\StageFactory.obj	pdal
> > Error	18	error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > *,char const *,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class
> > std::codecvt<wchar_t,char,int> const &)"
> >
> (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W
> > @2@@std@@ABV?$codecvt@_WDH@5@@Z)	D:\dev\pdal\src\Utils.obj	pdal
> > Error	19	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > pdalboost::filesystem3::path::stem(void)const " (?stem@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in
> function
> > "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> > 	D:\dev\pdal\src\StageFactory.obj	pdal
> > Error	20	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > pdalboost::filesystem3::path::extension(void)const " (?extension@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced
> in
> > function "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> > 	D:\dev\pdal\src\StageFactory.obj	pdal
> > Error	21	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > pdalboost::filesystem3::path::filename(void)const " (?filename@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in
> > function "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> > 	D:\dev\pdal\src\StageFactory.obj	pdal
> > Error	22	error LNK2019: unresolved external symbol "private: class pdalboost::filesystem3::file_status __thiscall
> > pdalboost::filesystem3::directory_entry::m_get_symlink_status(class pdalboost::system::error_code *)const "
> >
> (?m_get_symlink_status@directory_entry@filesystem3@pdalboost@@ABE?AVfile_status@23@PAVerror_code@system@3@@Z)
> > referenced in function "public: class pdalboost::filesystem3::file_status __thiscall
> > pdalboost::filesystem3::directory_entry::symlink_status(void)const "
> > (?symlink_status@directory_entry@filesystem3@pdalboost@@QBE?AVfile_status@23@XZ)
> 	D:\dev\pdal\src\StageFactory.obj
> > 	pdal
> > Error	23	error LNK2019: unresolved external symbol "void __cdecl
> > pdalboost::filesystem3::detail::directory_iterator_construct(class pdalboost::filesystem3::directory_iterator &,class
> > pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > (?directory_iterator_construct@detail@filesystem3@pdalboost@@YAXAAVdirectory_iterator@23@ABVpath@23@PAVerror_code
> > @system@3@@Z) referenced in function "public: __thiscall pdalboost::filesystem3::directory_iterator::directory_iterator(class
> > pdalboost::filesystem3::path const &)" (??0directory_iterator@filesystem3@pdalboost@@QAE@ABVpath@12@@Z)
> > 	D:\dev\pdal\src\StageFactory.obj	pdal
> > Error	24	error LNK2019: unresolved external symbol "void __cdecl
> > pdalboost::filesystem3::detail::directory_iterator_increment(class pdalboost::filesystem3::directory_iterator &,class
> > pdalboost::system::error_code *)"
> >
> (?directory_iterator_increment@detail@filesystem3@pdalboost@@YAXAAVdirectory_iterator@23@PAVerror_code@system@3@
> > @Z) referenced in function "private: void __thiscall pdalboost::filesystem3::directory_iterator::increment(void)"
> > (?increment@directory_iterator@filesystem3@pdalboost@@AAEXXZ)	D:\dev\pdal\src\StageFactory.obj	pdal
> > Error	25	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall
> > pdalboost::filesystem3::path::begin(void)const " (?begin@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ) referenced
> > in function "bool __cdecl pdalboost::filesystem3::operator<(class pdalboost::filesystem3::path const &,class
> > pdalboost::filesystem3::path const &)" (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)
> > 	D:\dev\pdal\src\StageFactory.obj	pdal
> > Error	26	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall
> > pdalboost::filesystem3::path::end(void)const " (?end@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ) referenced in
> > function "bool __cdecl pdalboost::filesystem3::operator<(class pdalboost::filesystem3::path const &,class
> > pdalboost::filesystem3::path const &)" (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)
> > 	D:\dev\pdal\src\StageFactory.obj	pdal
> > Error	27	error LNK2019: unresolved external symbol "private: static void __cdecl
> > pdalboost::filesystem3::path::m_path_iterator_increment(class pdalboost::filesystem3::path::iterator &)"
> > (?m_path_iterator_increment@path@filesystem3@pdalboost@@CAXAAViterator@123@@Z) referenced in function "private: void
> > __thiscall pdalboost::filesystem3::path::iterator::increment(void)"
> (?increment@iterator@path@filesystem3@pdalboost@@AAEXXZ)
> > 	D:\dev\pdal\src\StageFactory.obj	pdal
> > Error	28	error LNK2019: unresolved external symbol "class pdalboost::system::error_code __cdecl
> > pdalboost::filesystem3::detail::dir_itr_close(void * &)"
> > (?dir_itr_close@detail@filesystem3@pdalboost@@YA?AVerror_code@system@3@AAPAX@Z) referenced in function "public:
> > __thiscall pdalboost::filesystem3::detail::dir_itr_imp::~dir_itr_imp(void)"
> > (??1dir_itr_imp@detail@filesystem3@pdalboost@@QAE@XZ)	D:\dev\pdal\src\StageFactory.obj	pdal
> > Error	29	error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > pdalboost::filesystem3::detail::unique_path(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > (?unique_path@detail@filesystem3@pdalboost@@YA?AVpath@23@ABV423@PAVerror_code@system@3@@Z) referenced in
> > function "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::unique_path(class pdalboost::filesystem3::path const
> &)"
> > (?unique_path@filesystem3@pdalboost@@YA?AVpath@12@ABV312@@Z)	D:\dev\pdal\src\Utils.obj	pdal
> > Error	30	error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path & __thiscall
> > pdalboost::filesystem3::path::operator/=(class pdalboost::filesystem3::path const &)"
> > (??_0path@filesystem3@pdalboost@@QAEAAV012@ABV012@@Z) referenced in function "class pdalboost::filesystem3::path
> > __cdecl pdalboost::filesystem3::operator/(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)"
> > (??Kfilesystem3@pdalboost@@YA?AVpath@01@ABV201@0@Z)	D:\dev\pdal\src\Utils.obj	pdal
> > Error	31	error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > pdalboost::filesystem3::detail::temp_directory_path(class pdalboost::system::error_code *)"
> > (?temp_directory_path@detail@filesystem3@pdalboost@@YA?AVpath@23@PAVerror_code@system@3@@Z) referenced in
> > function "class pdalboost::filesystem3::path __cdecl
> > pdalboost::filesystem3::temp_directory_path(void)"(?temp_directory_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)
> > 	D:\dev\pdal\src\Utils.obj	pdal
> > Error	32	error LNK1120: 25 unresolved externals	D:\dev\pdal\bin\Debug\pdal.dll	pdal
> > Error	33	error MSB6006: "link.exe" exited with code 1.	C:\Program Files
> > (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp.Win32.Targets	275	6	pcpipeline

From kmckelvey at lizardtech.com  Thu Mar  1 18:24:50 2012
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Thu Mar  1 18:25:07 2012
Subject: [pdal] filesystem3, pdalboost, VS10
In-Reply-To: <001601ccf801$d5aa3820$80fea860$@flaxen.com>
References: <000901ccf7f1$09705ec0$1c511c40$@flaxen.com>
	<C55473998E248B4DAEC5342D698DFE8501293E174F@sea-srv-mail.lizardtech.com>
	<001401ccf800$537f1e70$fa7d5b50$@flaxen.com>
	<001601ccf801$d5aa3820$80fea860$@flaxen.com>
Message-ID: <C55473998E248B4DAEC5342D698DFE8501293E1763@sea-srv-mail.lizardtech.com>

Interesting point...

I'm only responsible for the LINK_PRIVATE.  Hobu put the guard in later :)

-----Original Message-----
From: Michael P. Gerlek [mailto:mpg@flaxen.com]
Sent: jeudi 1 mars 2012 17:20
To: Kirk McKelvey; pdal@lists.osgeo.org
Subject: RE: [pdal] filesystem3, pdalboost, VS10

OK, yeah.  This is the problemo:



if (WIN32)
        if (CMAKE_VERSION VERSION_GREATER 2.8.7)
                target_link_libraries(${APPS_CPP_DEPENDENCIES} LINK_PRIVATE general ${Boost_LIBRARIES})
        endif(CMAKE_VERSION VERSION_GREATER 2.8.7)
else()
        target_link_libraries(${APPS_CPP_DEPENDENCIES} ${Boost_LIBRARIES})
endif(WIN32)




Observe that there is no "else" clause -- if you're using 2.8.7, then no libs to link for you!

Are we sure we mean "VERSION_GREATER" and not "VERSION_GREATER_OR_EQUAL"?  because 2.8.7 is the last released version, so it's not clear how anyone could be using anything GREATER than that.

Kirk?

-mpg


> -----Original Message-----
> From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> Sent: Thursday, March 01, 2012 3:13 PM
> To: 'mpg@flaxen.com'; 'Kirk McKelvey'; 'pdal@lists.osgeo.org'
> Subject: RE: [pdal] filesystem3, pdalboost, VS10
>
> I think it's just that pdalboost.lib isn't getting seen at link time for some reason...
>
> -mpg
>
>
> > -----Original Message-----
> > From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> > Sent: Thursday, March 01, 2012 3:09 PM
> > To: 'Kirk McKelvey'; pdal@lists.osgeo.org
> > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> >
> > Not main-related, no -- this is just resolving stuff to for the DLL.
> >
> > Full errors down below, but they look like this:
> >
> > unresolved external symbol "bool __cdecl
> > pdalboost::filesystem3::detail::remove(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_code@
> > system@3@@Z) referenced in function "bool __cdecl pdalboost::filesystem3::remove(class pdalboost::filesystem3::path const &)"
> > (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)
> >
> > What's the LINK_PRIVATE thing Hobu mentioned?
> >
> > -mpg
> >
> >
> > > -----Original Message-----
> > > From: pdal-bounces@lists.osgeo.org
> > > [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> > > Sent: Thursday, March 01, 2012 1:57 PM
> > > To: pdal@lists.osgeo.org
> > > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> > >
> > > I believe this is/was building correctly.  Though there was a fair
> > > amount of trouble around whether to compile with BOOST_TEST_DYN_LINK or not.  Are any of the symbols mentioned "main"-related?
> > >
> > >
> > > -----Original Message-----
> > > From: pdal-bounces@lists.osgeo.org
> > > [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P.
> > > Gerlek
> > > Sent: jeudi 1 mars 2012 15:20
> > > To: pdal@lists.osgeo.org
> > > Subject: [pdal] filesystem3, pdalboost, VS10
> > >
> > > I'm trying to build under VS2010, for the 1st time since the
> > > sprint, and I'm getting a bazillion link errors on pdal.lib due to missing functions from pdalboost::filesystem3.  I'm using the embedded boost.
> > >
> > > Before I dive into this, anyone have any clues or hints?
> > >
> > > -mpg
> > >
> > >
> > > _______________________________________________
> > > pdal mailing list
> > > pdal@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/pdal
> > > _______________________________________________
> > > pdal mailing list
> > > pdal@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/pdal
> >
> >
> >
> >
> > Error       1       error LNK2019: unresolved external symbol "bool __cdecl pdalboost::filesystem3::detail::remove(class
> > pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_code@
> > system@3@@Z) referenced in function "bool __cdecl pdalboost::filesystem3::remove(class pdalboost::filesystem3::path const &)"
> > (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)  D:\dev\pdal\src\FileUtils.obj   pdal
> > Error       2       error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::detail::rename(class
> > pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > (?rename@detail@filesystem3@pdalboost@@YAXABVpath@23@0PAVerror_code@
> > system@3@@Z) referenced in function "void __cdecl pdalboost::filesystem3::rename(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)"
> > (?rename@filesystem3@pdalboost@@YAXABVpath@12@0@Z)  D:\dev\pdal\src\FileUtils.obj   pdal
> > Error       3       error LNK2019: unresolved external symbol "class pdalboost::filesystem3::file_status __cdecl
> > pdalboost::filesystem3::detail::status(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > (?status@detail@filesystem3@pdalboost@@YA?AVfile_status@23@ABVpath@2
> > 3@PAVerror_code@system@3@@Z) referenced
> in
> > function "bool __cdecl pdalboost::filesystem3::exists(class pdalboost::filesystem3::path const &)"
> > (?exists@filesystem3@pdalboost@@YA_NABVpath@12@@Z)  D:\dev\pdal\src\FileUtils.obj   pdal
> > Error       4       error LNK2019: unresolved external symbol "unsigned __int64 __cdecl pdalboost::filesystem3::detail::file_size(class
> > pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > (?file_size@detail@filesystem3@pdalboost@@YA_KABVpath@23@PAVerror_co
> > de@system@3@@Z) referenced in function "unsigned __int64 __cdecl pdalboost::filesystem3::file_size(class pdalboost::filesystem3::path const &)"
> > (?file_size@filesystem3@pdalboost@@YA_KABVpath@12@@Z)       D:\dev\pdal\src\FileUtils.obj   pdal
> > Error       5       error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const
> > *,wchar_t const *,class std::basic_string<char,struct
> > std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)"
> >
> (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string
> @DU?$char_traits@D@std@@V?$allocator@D@2
> > @@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "public: class
> > std::basic_string<char,struct std::char_traits<char>,class
> > std::allocator<char> > const __thiscall
> > pdalboost::filesystem3::path::string(class
> > std::codecvt<wchar_t,char,int> const &)const "
> >
> (?string@path@filesystem3@pdalboost@@QBE?BV?$basic_string@DU?$char_tra
> its@D@std@@V?$allocator@D@2@@std@@ABV
> > ?$codecvt@_WDH@5@@Z)        D:\dev\pdal\src\FileUtils.obj   pdal
> > Error       6       error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const
> > *,wchar_t const *,class std::basic_string<char,struct
> > std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)"
> >
> (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string
> @DU?$char_traits@D@std@@V?$allocator@D@2
> > @@std@@ABV?$codecvt@_WDH@5@@Z)      D:\dev\pdal\src\StageFactory.obj        pdal
> > Error       7       error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const
> > *,wchar_t const *,class std::basic_string<char,struct
> > std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)"
> >
> (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string
> @DU?$char_traits@D@std@@V?$allocator@D@2
> > @@std@@ABV?$codecvt@_WDH@5@@Z)      D:\dev\pdal\src\Utils.obj       pdal
> > Error       8       error LNK2019: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt
> > @_WDH@std@@XZ) referenced in function
> > "public: static class std::codecvt<wchar_t,char,int> const & __cdecl pdalboost::filesystem3::path::codecvt(void)"
> > (?codecvt@path@filesystem3@pdalboost@@SAABV?$codecvt@_WDH@std@@XZ)  D:\dev\pdal\src\FileUtils.obj   pdal
> > Error       9       error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ)
> >     D:\dev\pdal\src\StageFactory.obj        pdal
> > Error       10      error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ)
> >     D:\dev\pdal\src\Utils.obj       pdal
> > Error       11      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > pdalboost::filesystem3::detail::current_path(class pdalboost::system::error_code *)"
> > (?current_path@detail@filesystem3@pdalboost@@YA?AVpath@23@PAVerror_c
> > ode@system@3@@Z) referenced in function "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::current_path(void)"
> > (?current_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)      D:\dev\pdal\src\FileUtils.obj   pdal
> > Error       12      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > pdalboost::filesystem3::absolute(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)"
> > (?absolute@filesystem3@pdalboost@@YA?AVpath@12@ABV312@0@Z)
> > referenced in function "public: static class
> > std::basic_string<char,struct std::char_traits<char>,class
> > std::allocator<char> > __cdecl pdal::FileUtils::toAbsolutePath(class
> > std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)"
> >
> (?toAbsolutePath@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits@D
> @std@@V?$allocator@D@2@@std@@ABV34@@Z
> > )   D:\dev\pdal\src\FileUtils.obj   pdal
> > Error       13      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > pdalboost::filesystem3::path::parent_path(void)const "
> > (?parent_path@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> > referenced in function "public: static class
> > std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl pdal::FileUtils::getDirectory(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)"
> > (?getDirectory@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV34@@Z)
> >     D:\dev\pdal\src\FileUtils.obj   pdal
> > Error       14      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > pdalboost::filesystem3::path::root_name(void)const "
> > (?root_name@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> referenced
> > in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_name(void)const "
> > (?has_root_name@path@filesystem3@pdalboost@@QBE_NXZ)        D:\dev\pdal\src\FileUtils.obj   pdal
> > Error       15      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > pdalboost::filesystem3::path::root_directory(void)const "
> > (?root_directory@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> > referenced in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_directory(void)const "
> > (?has_root_directory@path@filesystem3@pdalboost@@QBE_NXZ)   D:\dev\pdal\src\FileUtils.obj   pdal
> > Error       16      error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > *,char const *,class std::basic_string<wchar_t,struct
> > std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> >
> (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@
> _WU?$char_traits@_W@std@@V?$allocator@_W
> > @2@@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "void
> > __cdecl pdalboost::filesystem3::path_traits::dispatch<class
> > std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class
> > std::allocator<wchar_t> > >(class std::basic_string<char,struct
> > std::char_traits<char>,class std::allocator<char> > const &,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> >
> (??$dispatch@V?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@
> 2@@std@@@path_traits@filesystem3@pdalb
> > oost@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AAV?$basic_string@_WU?$char_traits
> > @_W@std@@V?$allocator@_W@2@@4@ABV?$codecvt@_WDH@4@@Z)       D:\dev\pdal\src\FileUtils.obj   pdal
> > Error       17      error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > *,char const *,class std::basic_string<wchar_t,struct
> > std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> >
> (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@
> _WU?$char_traits@_W@std@@V?$allocator@_W
> > @2@@std@@ABV?$codecvt@_WDH@5@@Z)    D:\dev\pdal\src\StageFactory.obj        pdal
> > Error       18      error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > *,char const *,class std::basic_string<wchar_t,struct
> > std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> >
> (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@
> _WU?$char_traits@_W@std@@V?$allocator@_W
> > @2@@std@@ABV?$codecvt@_WDH@5@@Z)    D:\dev\pdal\src\Utils.obj       pdal
> > Error       19      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > pdalboost::filesystem3::path::stem(void)const "
> > (?stem@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in
> function
> > "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> >     D:\dev\pdal\src\StageFactory.obj        pdal
> > Error       20      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > pdalboost::filesystem3::path::extension(void)const "
> > (?extension@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced
> in
> > function "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> >     D:\dev\pdal\src\StageFactory.obj        pdal
> > Error       21      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > pdalboost::filesystem3::path::filename(void)const "
> > (?filename@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in function "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> >     D:\dev\pdal\src\StageFactory.obj        pdal
> > Error       22      error LNK2019: unresolved external symbol "private: class pdalboost::filesystem3::file_status __thiscall
> > pdalboost::filesystem3::directory_entry::m_get_symlink_status(class pdalboost::system::error_code *)const "
> >
> (?m_get_symlink_status@directory_entry@filesystem3@pdalboost@@ABE?AVfi
> le_status@23@PAVerror_code@system@3@@Z)
> > referenced in function "public: class
> > pdalboost::filesystem3::file_status __thiscall pdalboost::filesystem3::directory_entry::symlink_status(void)const "
> > (?symlink_status@directory_entry@filesystem3@pdalboost@@QBE?AVfile_s
> > tatus@23@XZ)
>       D:\dev\pdal\src\StageFactory.obj
> >     pdal
> > Error       23      error LNK2019: unresolved external symbol "void __cdecl
> > pdalboost::filesystem3::detail::directory_iterator_construct(class
> > pdalboost::filesystem3::directory_iterator &,class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > (?directory_iterator_construct@detail@filesystem3@pdalboost@@YAXAAVd
> > irectory_iterator@23@ABVpath@23@PAVerror_code
> > @system@3@@Z) referenced in function "public: __thiscall
> > pdalboost::filesystem3::directory_iterator::directory_iterator(class
> > pdalboost::filesystem3::path const &)" (??0directory_iterator@filesystem3@pdalboost@@QAE@ABVpath@12@@Z)
> >     D:\dev\pdal\src\StageFactory.obj        pdal
> > Error       24      error LNK2019: unresolved external symbol "void __cdecl
> > pdalboost::filesystem3::detail::directory_iterator_increment(class
> > pdalboost::filesystem3::directory_iterator &,class pdalboost::system::error_code *)"
> >
> (?directory_iterator_increment@detail@filesystem3@pdalboost@@YAXAAVdir
> ectory_iterator@23@PAVerror_code@system@3@
> > @Z) referenced in function "private: void __thiscall pdalboost::filesystem3::directory_iterator::increment(void)"
> > (?increment@directory_iterator@filesystem3@pdalboost@@AAEXXZ)       D:\dev\pdal\src\StageFactory.obj        pdal
> > Error       25      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall
> > pdalboost::filesystem3::path::begin(void)const "
> > (?begin@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ)
> > referenced in function "bool __cdecl pdalboost::filesystem3::operator<(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)" (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)
> >     D:\dev\pdal\src\StageFactory.obj        pdal
> > Error       26      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall
> > pdalboost::filesystem3::path::end(void)const "
> > (?end@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ) referenced
> > in function "bool __cdecl pdalboost::filesystem3::operator<(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)" (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)
> >     D:\dev\pdal\src\StageFactory.obj        pdal
> > Error       27      error LNK2019: unresolved external symbol "private: static void __cdecl
> > pdalboost::filesystem3::path::m_path_iterator_increment(class pdalboost::filesystem3::path::iterator &)"
> > (?m_path_iterator_increment@path@filesystem3@pdalboost@@CAXAAViterat
> > or@123@@Z) referenced in function "private: void __thiscall pdalboost::filesystem3::path::iterator::increment(void)"
> (?increment@iterator@path@filesystem3@pdalboost@@AAEXXZ)
> >     D:\dev\pdal\src\StageFactory.obj        pdal
> > Error       28      error LNK2019: unresolved external symbol "class pdalboost::system::error_code __cdecl
> > pdalboost::filesystem3::detail::dir_itr_close(void * &)"
> > (?dir_itr_close@detail@filesystem3@pdalboost@@YA?AVerror_code@system@3@AAPAX@Z) referenced in function "public:
> > __thiscall pdalboost::filesystem3::detail::dir_itr_imp::~dir_itr_imp(void)"
> > (??1dir_itr_imp@detail@filesystem3@pdalboost@@QAE@XZ)       D:\dev\pdal\src\StageFactory.obj        pdal
> > Error       29      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > pdalboost::filesystem3::detail::unique_path(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > (?unique_path@detail@filesystem3@pdalboost@@YA?AVpath@23@ABV423@PAVe
> > rror_code@system@3@@Z) referenced in function "class
> > pdalboost::filesystem3::path __cdecl
> > pdalboost::filesystem3::unique_path(class
> > pdalboost::filesystem3::path const
> &)"
> > (?unique_path@filesystem3@pdalboost@@YA?AVpath@12@ABV312@@Z)        D:\dev\pdal\src\Utils.obj       pdal
> > Error       30      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path & __thiscall
> > pdalboost::filesystem3::path::operator/=(class pdalboost::filesystem3::path const &)"
> > (??_0path@filesystem3@pdalboost@@QAEAAV012@ABV012@@Z) referenced in
> > function "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::operator/(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)"
> > (??Kfilesystem3@pdalboost@@YA?AVpath@01@ABV201@0@Z) D:\dev\pdal\src\Utils.obj       pdal
> > Error       31      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > pdalboost::filesystem3::detail::temp_directory_path(class pdalboost::system::error_code *)"
> > (?temp_directory_path@detail@filesystem3@pdalboost@@YA?AVpath@23@PAV
> > error_code@system@3@@Z) referenced in function "class
> > pdalboost::filesystem3::path __cdecl
> > pdalboost::filesystem3::temp_directory_path(void)"(?temp_directory_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)
> >     D:\dev\pdal\src\Utils.obj       pdal
> > Error       32      error LNK1120: 25 unresolved externals  D:\dev\pdal\bin\Debug\pdal.dll  pdal
> > Error       33      error MSB6006: "link.exe" exited with code 1.   C:\Program Files
> > (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp.Win32.Targets        275     6       pcpipeline

From mpg at flaxen.com  Thu Mar  1 18:27:46 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Thu Mar  1 18:28:18 2012
Subject: [pdal] filesystem3, pdalboost, VS10
In-Reply-To: <C55473998E248B4DAEC5342D698DFE8501293E1763@sea-srv-mail.lizardtech.com>
References: <000901ccf7f1$09705ec0$1c511c40$@flaxen.com>	<C55473998E248B4DAEC5342D698DFE8501293E174F@sea-srv-mail.lizardtech.com>	<001401ccf800$537f1e70$fa7d5b50$@flaxen.com>	<001601ccf801$d5aa3820$80fea860$@flaxen.com>
	<C55473998E248B4DAEC5342D698DFE8501293E1763@sea-srv-mail.lizardtech.com>
Message-ID: <001701ccf802$e959eef0$bc0dccd0$@flaxen.com>

Do you know what is the "opposite" of LINK_PRIVATE, so I know what to put into the "else" branch?  Just this maybe?

>                 target_link_libraries(${APPS_CPP_DEPENDENCIES} ${Boost_LIBRARIES})

-mpg


> -----Original Message-----
> From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> Sent: Thursday, March 01, 2012 3:25 PM
> To: pdal@lists.osgeo.org
> Subject: RE: [pdal] filesystem3, pdalboost, VS10
> 
> Interesting point...
> 
> I'm only responsible for the LINK_PRIVATE.  Hobu put the guard in later :)
> 
> -----Original Message-----
> From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> Sent: jeudi 1 mars 2012 17:20
> To: Kirk McKelvey; pdal@lists.osgeo.org
> Subject: RE: [pdal] filesystem3, pdalboost, VS10
> 
> OK, yeah.  This is the problemo:
> 
> 
> 
> if (WIN32)
>         if (CMAKE_VERSION VERSION_GREATER 2.8.7)
>                 target_link_libraries(${APPS_CPP_DEPENDENCIES} LINK_PRIVATE general ${Boost_LIBRARIES})
>         endif(CMAKE_VERSION VERSION_GREATER 2.8.7)
> else()
>         target_link_libraries(${APPS_CPP_DEPENDENCIES} ${Boost_LIBRARIES})
> endif(WIN32)
> 
> 
> 
> 
> Observe that there is no "else" clause -- if you're using 2.8.7, then no libs to link for you!
> 
> Are we sure we mean "VERSION_GREATER" and not "VERSION_GREATER_OR_EQUAL"?  because 2.8.7 is the last released version, so
> it's not clear how anyone could be using anything GREATER than that.
> 
> Kirk?
> 
> -mpg
> 
> 
> > -----Original Message-----
> > From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> > Sent: Thursday, March 01, 2012 3:13 PM
> > To: 'mpg@flaxen.com'; 'Kirk McKelvey'; 'pdal@lists.osgeo.org'
> > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> >
> > I think it's just that pdalboost.lib isn't getting seen at link time for some reason...
> >
> > -mpg
> >
> >
> > > -----Original Message-----
> > > From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> > > Sent: Thursday, March 01, 2012 3:09 PM
> > > To: 'Kirk McKelvey'; pdal@lists.osgeo.org
> > > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> > >
> > > Not main-related, no -- this is just resolving stuff to for the DLL.
> > >
> > > Full errors down below, but they look like this:
> > >
> > > unresolved external symbol "bool __cdecl
> > > pdalboost::filesystem3::detail::remove(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_code@
> > > system@3@@Z) referenced in function "bool __cdecl pdalboost::filesystem3::remove(class pdalboost::filesystem3::path const
> &)"
> > > (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)
> > >
> > > What's the LINK_PRIVATE thing Hobu mentioned?
> > >
> > > -mpg
> > >
> > >
> > > > -----Original Message-----
> > > > From: pdal-bounces@lists.osgeo.org
> > > > [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> > > > Sent: Thursday, March 01, 2012 1:57 PM
> > > > To: pdal@lists.osgeo.org
> > > > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> > > >
> > > > I believe this is/was building correctly.  Though there was a fair
> > > > amount of trouble around whether to compile with BOOST_TEST_DYN_LINK or not.  Are any of the symbols mentioned "main"-
> related?
> > > >
> > > >
> > > > -----Original Message-----
> > > > From: pdal-bounces@lists.osgeo.org
> > > > [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P.
> > > > Gerlek
> > > > Sent: jeudi 1 mars 2012 15:20
> > > > To: pdal@lists.osgeo.org
> > > > Subject: [pdal] filesystem3, pdalboost, VS10
> > > >
> > > > I'm trying to build under VS2010, for the 1st time since the
> > > > sprint, and I'm getting a bazillion link errors on pdal.lib due to missing functions from pdalboost::filesystem3.  I'm using the
> embedded boost.
> > > >
> > > > Before I dive into this, anyone have any clues or hints?
> > > >
> > > > -mpg
> > > >
> > > >
> > > > _______________________________________________
> > > > pdal mailing list
> > > > pdal@lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/pdal
> > > > _______________________________________________
> > > > pdal mailing list
> > > > pdal@lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/pdal
> > >
> > >
> > >
> > >
> > > Error       1       error LNK2019: unresolved external symbol "bool __cdecl pdalboost::filesystem3::detail::remove(class
> > > pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_code@
> > > system@3@@Z) referenced in function "bool __cdecl pdalboost::filesystem3::remove(class pdalboost::filesystem3::path const
> &)"
> > > (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)  D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       2       error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::detail::rename(class
> > > pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > (?rename@detail@filesystem3@pdalboost@@YAXABVpath@23@0PAVerror_code@
> > > system@3@@Z) referenced in function "void __cdecl pdalboost::filesystem3::rename(class pdalboost::filesystem3::path const
> &,class pdalboost::filesystem3::path const &)"
> > > (?rename@filesystem3@pdalboost@@YAXABVpath@12@0@Z)  D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       3       error LNK2019: unresolved external symbol "class pdalboost::filesystem3::file_status __cdecl
> > > pdalboost::filesystem3::detail::status(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > (?status@detail@filesystem3@pdalboost@@YA?AVfile_status@23@ABVpath@2
> > > 3@PAVerror_code@system@3@@Z) referenced
> > in
> > > function "bool __cdecl pdalboost::filesystem3::exists(class pdalboost::filesystem3::path const &)"
> > > (?exists@filesystem3@pdalboost@@YA_NABVpath@12@@Z)  D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       4       error LNK2019: unresolved external symbol "unsigned __int64 __cdecl pdalboost::filesystem3::detail::file_size(class
> > > pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > (?file_size@detail@filesystem3@pdalboost@@YA_KABVpath@23@PAVerror_co
> > > de@system@3@@Z) referenced in function "unsigned __int64 __cdecl pdalboost::filesystem3::file_size(class
> pdalboost::filesystem3::path const &)"
> > > (?file_size@filesystem3@pdalboost@@YA_KABVpath@12@@Z)       D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       5       error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const
> > > *,wchar_t const *,class std::basic_string<char,struct
> > > std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)"
> > >
> > (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string
> > @DU?$char_traits@D@std@@V?$allocator@D@2
> > > @@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "public: class
> > > std::basic_string<char,struct std::char_traits<char>,class
> > > std::allocator<char> > const __thiscall
> > > pdalboost::filesystem3::path::string(class
> > > std::codecvt<wchar_t,char,int> const &)const "
> > >
> > (?string@path@filesystem3@pdalboost@@QBE?BV?$basic_string@DU?$char_tra
> > its@D@std@@V?$allocator@D@2@@std@@ABV
> > > ?$codecvt@_WDH@5@@Z)        D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       6       error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const
> > > *,wchar_t const *,class std::basic_string<char,struct
> > > std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)"
> > >
> > (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string
> > @DU?$char_traits@D@std@@V?$allocator@D@2
> > > @@std@@ABV?$codecvt@_WDH@5@@Z)      D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       7       error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const
> > > *,wchar_t const *,class std::basic_string<char,struct
> > > std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)"
> > >
> > (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_string
> > @DU?$char_traits@D@std@@V?$allocator@D@2
> > > @@std@@ABV?$codecvt@_WDH@5@@Z)      D:\dev\pdal\src\Utils.obj       pdal
> > > Error       8       error LNK2019: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt
> > > @_WDH@std@@XZ) referenced in function
> > > "public: static class std::codecvt<wchar_t,char,int> const & __cdecl pdalboost::filesystem3::path::codecvt(void)"
> > > (?codecvt@path@filesystem3@pdalboost@@SAABV?$codecvt@_WDH@std@@XZ)  D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       9       error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ)
> > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       10      error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ)
> > >     D:\dev\pdal\src\Utils.obj       pdal
> > > Error       11      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > > pdalboost::filesystem3::detail::current_path(class pdalboost::system::error_code *)"
> > > (?current_path@detail@filesystem3@pdalboost@@YA?AVpath@23@PAVerror_c
> > > ode@system@3@@Z) referenced in function "class pdalboost::filesystem3::path __cdecl
> pdalboost::filesystem3::current_path(void)"
> > > (?current_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)      D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       12      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > > pdalboost::filesystem3::absolute(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)"
> > > (?absolute@filesystem3@pdalboost@@YA?AVpath@12@ABV312@0@Z)
> > > referenced in function "public: static class
> > > std::basic_string<char,struct std::char_traits<char>,class
> > > std::allocator<char> > __cdecl pdal::FileUtils::toAbsolutePath(class
> > > std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)"
> > >
> > (?toAbsolutePath@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits@D
> > @std@@V?$allocator@D@2@@std@@ABV34@@Z
> > > )   D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       13      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > pdalboost::filesystem3::path::parent_path(void)const "
> > > (?parent_path@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> > > referenced in function "public: static class
> > > std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > __cdecl pdal::FileUtils::getDirectory(class
> std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)"
> > >
> (?getDirectory@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@ABV34@@Z)
> > >     D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       14      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > pdalboost::filesystem3::path::root_name(void)const "
> > > (?root_name@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> > referenced
> > > in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_name(void)const "
> > > (?has_root_name@path@filesystem3@pdalboost@@QBE_NXZ)        D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       15      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > pdalboost::filesystem3::path::root_directory(void)const "
> > > (?root_directory@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> > > referenced in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_directory(void)const "
> > > (?has_root_directory@path@filesystem3@pdalboost@@QBE_NXZ)   D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       16      error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > > *,char const *,class std::basic_string<wchar_t,struct
> > > std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> > >
> > (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@
> > _WU?$char_traits@_W@std@@V?$allocator@_W
> > > @2@@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "void
> > > __cdecl pdalboost::filesystem3::path_traits::dispatch<class
> > > std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class
> > > std::allocator<wchar_t> > >(class std::basic_string<char,struct
> > > std::char_traits<char>,class std::allocator<char> > const &,class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class
> std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> > >
> > (??$dispatch@V?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_W@
> > 2@@std@@@path_traits@filesystem3@pdalb
> > >
> oost@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@AAV?$basic_string@_WU?$char_traits
> > > @_W@std@@V?$allocator@_W@2@@4@ABV?$codecvt@_WDH@4@@Z)       D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       17      error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > > *,char const *,class std::basic_string<wchar_t,struct
> > > std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> > >
> > (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@
> > _WU?$char_traits@_W@std@@V?$allocator@_W
> > > @2@@std@@ABV?$codecvt@_WDH@5@@Z)    D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       18      error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > > *,char const *,class std::basic_string<wchar_t,struct
> > > std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> > >
> > (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_string@
> > _WU?$char_traits@_W@std@@V?$allocator@_W
> > > @2@@std@@ABV?$codecvt@_WDH@5@@Z)    D:\dev\pdal\src\Utils.obj       pdal
> > > Error       19      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > pdalboost::filesystem3::path::stem(void)const "
> > > (?stem@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in
> > function
> > > "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       20      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > pdalboost::filesystem3::path::extension(void)const "
> > > (?extension@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced
> > in
> > > function "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       21      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > pdalboost::filesystem3::path::filename(void)const "
> > > (?filename@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in function "public: void __thiscall
> pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       22      error LNK2019: unresolved external symbol "private: class pdalboost::filesystem3::file_status __thiscall
> > > pdalboost::filesystem3::directory_entry::m_get_symlink_status(class pdalboost::system::error_code *)const "
> > >
> > (?m_get_symlink_status@directory_entry@filesystem3@pdalboost@@ABE?AVfi
> > le_status@23@PAVerror_code@system@3@@Z)
> > > referenced in function "public: class
> > > pdalboost::filesystem3::file_status __thiscall pdalboost::filesystem3::directory_entry::symlink_status(void)const "
> > > (?symlink_status@directory_entry@filesystem3@pdalboost@@QBE?AVfile_s
> > > tatus@23@XZ)
> >       D:\dev\pdal\src\StageFactory.obj
> > >     pdal
> > > Error       23      error LNK2019: unresolved external symbol "void __cdecl
> > > pdalboost::filesystem3::detail::directory_iterator_construct(class
> > > pdalboost::filesystem3::directory_iterator &,class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > (?directory_iterator_construct@detail@filesystem3@pdalboost@@YAXAAVd
> > > irectory_iterator@23@ABVpath@23@PAVerror_code
> > > @system@3@@Z) referenced in function "public: __thiscall
> > > pdalboost::filesystem3::directory_iterator::directory_iterator(class
> > > pdalboost::filesystem3::path const &)" (??0directory_iterator@filesystem3@pdalboost@@QAE@ABVpath@12@@Z)
> > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       24      error LNK2019: unresolved external symbol "void __cdecl
> > > pdalboost::filesystem3::detail::directory_iterator_increment(class
> > > pdalboost::filesystem3::directory_iterator &,class pdalboost::system::error_code *)"
> > >
> > (?directory_iterator_increment@detail@filesystem3@pdalboost@@YAXAAVdir
> > ectory_iterator@23@PAVerror_code@system@3@
> > > @Z) referenced in function "private: void __thiscall pdalboost::filesystem3::directory_iterator::increment(void)"
> > > (?increment@directory_iterator@filesystem3@pdalboost@@AAEXXZ)       D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       25      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall
> > > pdalboost::filesystem3::path::begin(void)const "
> > > (?begin@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ)
> > > referenced in function "bool __cdecl pdalboost::filesystem3::operator<(class pdalboost::filesystem3::path const &,class
> pdalboost::filesystem3::path const &)" (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)
> > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       26      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall
> > > pdalboost::filesystem3::path::end(void)const "
> > > (?end@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ) referenced
> > > in function "bool __cdecl pdalboost::filesystem3::operator<(class pdalboost::filesystem3::path const &,class
> pdalboost::filesystem3::path const &)" (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)
> > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       27      error LNK2019: unresolved external symbol "private: static void __cdecl
> > > pdalboost::filesystem3::path::m_path_iterator_increment(class pdalboost::filesystem3::path::iterator &)"
> > > (?m_path_iterator_increment@path@filesystem3@pdalboost@@CAXAAViterat
> > > or@123@@Z) referenced in function "private: void __thiscall pdalboost::filesystem3::path::iterator::increment(void)"
> > (?increment@iterator@path@filesystem3@pdalboost@@AAEXXZ)
> > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       28      error LNK2019: unresolved external symbol "class pdalboost::system::error_code __cdecl
> > > pdalboost::filesystem3::detail::dir_itr_close(void * &)"
> > > (?dir_itr_close@detail@filesystem3@pdalboost@@YA?AVerror_code@system@3@AAPAX@Z) referenced in function "public:
> > > __thiscall pdalboost::filesystem3::detail::dir_itr_imp::~dir_itr_imp(void)"
> > > (??1dir_itr_imp@detail@filesystem3@pdalboost@@QAE@XZ)       D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       29      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > > pdalboost::filesystem3::detail::unique_path(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > (?unique_path@detail@filesystem3@pdalboost@@YA?AVpath@23@ABV423@PAVe
> > > rror_code@system@3@@Z) referenced in function "class
> > > pdalboost::filesystem3::path __cdecl
> > > pdalboost::filesystem3::unique_path(class
> > > pdalboost::filesystem3::path const
> > &)"
> > > (?unique_path@filesystem3@pdalboost@@YA?AVpath@12@ABV312@@Z)        D:\dev\pdal\src\Utils.obj       pdal
> > > Error       30      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path & __thiscall
> > > pdalboost::filesystem3::path::operator/=(class pdalboost::filesystem3::path const &)"
> > > (??_0path@filesystem3@pdalboost@@QAEAAV012@ABV012@@Z) referenced in
> > > function "class pdalboost::filesystem3::path __cdecl pdalboost::filesystem3::operator/(class pdalboost::filesystem3::path const
> &,class pdalboost::filesystem3::path const &)"
> > > (??Kfilesystem3@pdalboost@@YA?AVpath@01@ABV201@0@Z) D:\dev\pdal\src\Utils.obj       pdal
> > > Error       31      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > > pdalboost::filesystem3::detail::temp_directory_path(class pdalboost::system::error_code *)"
> > > (?temp_directory_path@detail@filesystem3@pdalboost@@YA?AVpath@23@PAV
> > > error_code@system@3@@Z) referenced in function "class
> > > pdalboost::filesystem3::path __cdecl
> > > pdalboost::filesystem3::temp_directory_path(void)"(?temp_directory_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)
> > >     D:\dev\pdal\src\Utils.obj       pdal
> > > Error       32      error LNK1120: 25 unresolved externals  D:\dev\pdal\bin\Debug\pdal.dll  pdal
> > > Error       33      error MSB6006: "link.exe" exited with code 1.   C:\Program Files
> > > (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp.Win32.Targets        275     6       pcpipeline
> 
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal

From kmckelvey at lizardtech.com  Thu Mar  1 18:41:04 2012
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Thu Mar  1 18:41:27 2012
Subject: [pdal] filesystem3, pdalboost, VS10
In-Reply-To: <001701ccf802$e959eef0$bc0dccd0$@flaxen.com>
References: <000901ccf7f1$09705ec0$1c511c40$@flaxen.com>
	<C55473998E248B4DAEC5342D698DFE8501293E174F@sea-srv-mail.lizardtech.com>
	<001401ccf800$537f1e70$fa7d5b50$@flaxen.com>
	<001601ccf801$d5aa3820$80fea860$@flaxen.com>
	<C55473998E248B4DAEC5342D698DFE8501293E1763@sea-srv-mail.lizardtech.com>
	<001701ccf802$e959eef0$bc0dccd0$@flaxen.com>
Message-ID: <C55473998E248B4DAEC5342D698DFE8501293E1767@sea-srv-mail.lizardtech.com>

There is a corresponding LINK_PUBLIC but since this is the VERSION_LESS_THAN clause you probably don't want that in there.  I think what you have is correct.  Might just want to merge the test into the if(WIN32) test b/c that is the same result.

Note that you MIGHT get some linker errors come time to link the executable targets, which is why I introduced LINK_PRIVATE in the first place.  I think there is an older-school way of achieving the same thing but it is laborious.  If this happens let me know I can point you in the right direction.

-----Original Message-----
From: Michael P. Gerlek [mailto:mpg@flaxen.com]
Sent: jeudi 1 mars 2012 17:28
To: Kirk McKelvey; pdal@lists.osgeo.org
Subject: RE: [pdal] filesystem3, pdalboost, VS10

Do you know what is the "opposite" of LINK_PRIVATE, so I know what to put into the "else" branch?  Just this maybe?

>                 target_link_libraries(${APPS_CPP_DEPENDENCIES}
> ${Boost_LIBRARIES})

-mpg


> -----Original Message-----
> From: pdal-bounces@lists.osgeo.org
> [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> Sent: Thursday, March 01, 2012 3:25 PM
> To: pdal@lists.osgeo.org
> Subject: RE: [pdal] filesystem3, pdalboost, VS10
>
> Interesting point...
>
> I'm only responsible for the LINK_PRIVATE.  Hobu put the guard in
> later :)
>
> -----Original Message-----
> From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> Sent: jeudi 1 mars 2012 17:20
> To: Kirk McKelvey; pdal@lists.osgeo.org
> Subject: RE: [pdal] filesystem3, pdalboost, VS10
>
> OK, yeah.  This is the problemo:
>
>
>
> if (WIN32)
>         if (CMAKE_VERSION VERSION_GREATER 2.8.7)
>                 target_link_libraries(${APPS_CPP_DEPENDENCIES} LINK_PRIVATE general ${Boost_LIBRARIES})
>         endif(CMAKE_VERSION VERSION_GREATER 2.8.7)
> else()
>         target_link_libraries(${APPS_CPP_DEPENDENCIES}
> ${Boost_LIBRARIES})
> endif(WIN32)
>
>
>
>
> Observe that there is no "else" clause -- if you're using 2.8.7, then no libs to link for you!
>
> Are we sure we mean "VERSION_GREATER" and not
> "VERSION_GREATER_OR_EQUAL"?  because 2.8.7 is the last released version, so it's not clear how anyone could be using anything GREATER than that.
>
> Kirk?
>
> -mpg
>
>
> > -----Original Message-----
> > From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> > Sent: Thursday, March 01, 2012 3:13 PM
> > To: 'mpg@flaxen.com'; 'Kirk McKelvey'; 'pdal@lists.osgeo.org'
> > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> >
> > I think it's just that pdalboost.lib isn't getting seen at link time for some reason...
> >
> > -mpg
> >
> >
> > > -----Original Message-----
> > > From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> > > Sent: Thursday, March 01, 2012 3:09 PM
> > > To: 'Kirk McKelvey'; pdal@lists.osgeo.org
> > > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> > >
> > > Not main-related, no -- this is just resolving stuff to for the DLL.
> > >
> > > Full errors down below, but they look like this:
> > >
> > > unresolved external symbol "bool __cdecl
> > > pdalboost::filesystem3::detail::remove(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_cod
> > > e@
> > > system@3@@Z) referenced in function "bool __cdecl
> > > pdalboost::filesystem3::remove(class pdalboost::filesystem3::path
> > > const
> &)"
> > > (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)
> > >
> > > What's the LINK_PRIVATE thing Hobu mentioned?
> > >
> > > -mpg
> > >
> > >
> > > > -----Original Message-----
> > > > From: pdal-bounces@lists.osgeo.org
> > > > [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> > > > Sent: Thursday, March 01, 2012 1:57 PM
> > > > To: pdal@lists.osgeo.org
> > > > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> > > >
> > > > I believe this is/was building correctly.  Though there was a
> > > > fair amount of trouble around whether to compile with
> > > > BOOST_TEST_DYN_LINK or not.  Are any of the symbols mentioned
> > > > "main"-
> related?
> > > >
> > > >
> > > > -----Original Message-----
> > > > From: pdal-bounces@lists.osgeo.org
> > > > [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P.
> > > > Gerlek
> > > > Sent: jeudi 1 mars 2012 15:20
> > > > To: pdal@lists.osgeo.org
> > > > Subject: [pdal] filesystem3, pdalboost, VS10
> > > >
> > > > I'm trying to build under VS2010, for the 1st time since the
> > > > sprint, and I'm getting a bazillion link errors on pdal.lib due
> > > > to missing functions from pdalboost::filesystem3.  I'm using the
> embedded boost.
> > > >
> > > > Before I dive into this, anyone have any clues or hints?
> > > >
> > > > -mpg
> > > >
> > > >
> > > > _______________________________________________
> > > > pdal mailing list
> > > > pdal@lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/pdal
> > > > _______________________________________________
> > > > pdal mailing list
> > > > pdal@lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/pdal
> > >
> > >
> > >
> > >
> > > Error       1       error LNK2019: unresolved external symbol "bool __cdecl pdalboost::filesystem3::detail::remove(class
> > > pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_cod
> > > e@
> > > system@3@@Z) referenced in function "bool __cdecl
> > > pdalboost::filesystem3::remove(class pdalboost::filesystem3::path
> > > const
> &)"
> > > (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)  D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       2       error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::detail::rename(class
> > > pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > (?rename@detail@filesystem3@pdalboost@@YAXABVpath@23@0PAVerror_cod
> > > e@
> > > system@3@@Z) referenced in function "void __cdecl
> > > pdalboost::filesystem3::rename(class pdalboost::filesystem3::path
> > > const
> &,class pdalboost::filesystem3::path const &)"
> > > (?rename@filesystem3@pdalboost@@YAXABVpath@12@0@Z)  D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       3       error LNK2019: unresolved external symbol "class pdalboost::filesystem3::file_status __cdecl
> > > pdalboost::filesystem3::detail::status(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > (?status@detail@filesystem3@pdalboost@@YA?AVfile_status@23@ABVpath
> > > @2
> > > 3@PAVerror_code@system@3@@Z) referenced
> > in
> > > function "bool __cdecl pdalboost::filesystem3::exists(class pdalboost::filesystem3::path const &)"
> > > (?exists@filesystem3@pdalboost@@YA_NABVpath@12@@Z)  D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       4       error LNK2019: unresolved external symbol "unsigned __int64 __cdecl pdalboost::filesystem3::detail::file_size(class
> > > pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > (?file_size@detail@filesystem3@pdalboost@@YA_KABVpath@23@PAVerror_
> > > co
> > > de@system@3@@Z) referenced in function "unsigned __int64 __cdecl
> > > pdalboost::filesystem3::file_size(class
> pdalboost::filesystem3::path const &)"
> > > (?file_size@filesystem3@pdalboost@@YA_KABVpath@12@@Z)       D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       5       error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const
> > > *,wchar_t const *,class std::basic_string<char,struct
> > > std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)"
> > >
> > (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_stri
> > ng
> > @DU?$char_traits@D@std@@V?$allocator@D@2
> > > @@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "public:
> > > class std::basic_string<char,struct std::char_traits<char>,class
> > > std::allocator<char> > const __thiscall
> > > pdalboost::filesystem3::path::string(class
> > > std::codecvt<wchar_t,char,int> const &)const "
> > >
> > (?string@path@filesystem3@pdalboost@@QBE?BV?$basic_string@DU?$char_t
> > ra its@D@std@@V?$allocator@D@2@@std@@ABV
> > > ?$codecvt@_WDH@5@@Z)        D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       6       error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const
> > > *,wchar_t const *,class std::basic_string<char,struct
> > > std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)"
> > >
> > (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_stri
> > ng
> > @DU?$char_traits@D@std@@V?$allocator@D@2
> > > @@std@@ABV?$codecvt@_WDH@5@@Z)      D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       7       error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t const
> > > *,wchar_t const *,class std::basic_string<char,struct
> > > std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)"
> > >
> > (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_stri
> > ng
> > @DU?$char_traits@D@std@@V?$allocator@D@2
> > > @@std@@ABV?$codecvt@_WDH@5@@Z)      D:\dev\pdal\src\Utils.obj       pdal
> > > Error       8       error LNK2019: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codec
> > > vt
> > > @_WDH@std@@XZ) referenced in function
> > > "public: static class std::codecvt<wchar_t,char,int> const & __cdecl pdalboost::filesystem3::path::codecvt(void)"
> > > (?codecvt@path@filesystem3@pdalboost@@SAABV?$codecvt@_WDH@std@@XZ)  D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       9       error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ)
> > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       10      error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ)
> > >     D:\dev\pdal\src\Utils.obj       pdal
> > > Error       11      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > > pdalboost::filesystem3::detail::current_path(class pdalboost::system::error_code *)"
> > > (?current_path@detail@filesystem3@pdalboost@@YA?AVpath@23@PAVerror
> > > _c
> > > ode@system@3@@Z) referenced in function "class
> > > pdalboost::filesystem3::path __cdecl
> pdalboost::filesystem3::current_path(void)"
> > > (?current_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)      D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       12      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > > pdalboost::filesystem3::absolute(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)"
> > > (?absolute@filesystem3@pdalboost@@YA?AVpath@12@ABV312@0@Z)
> > > referenced in function "public: static class
> > > std::basic_string<char,struct std::char_traits<char>,class
> > > std::allocator<char> > __cdecl
> > > pdal::FileUtils::toAbsolutePath(class
> > > std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)"
> > >
> > (?toAbsolutePath@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits
> > @D @std@@V?$allocator@D@2@@std@@ABV34@@Z
> > > )   D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       13      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > pdalboost::filesystem3::path::parent_path(void)const "
> > > (?parent_path@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> > > referenced in function "public: static class
> > > std::basic_string<char,struct std::char_traits<char>,class
> > > std::allocator<char> > __cdecl pdal::FileUtils::getDirectory(class
> std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)"
> > >
> (?getDirectory@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits@D@s
> td@@V?$allocator@D@2@@std@@ABV34@@Z)
> > >     D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       14      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > pdalboost::filesystem3::path::root_name(void)const "
> > > (?root_name@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> > referenced
> > > in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_name(void)const "
> > > (?has_root_name@path@filesystem3@pdalboost@@QBE_NXZ)        D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       15      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > pdalboost::filesystem3::path::root_directory(void)const "
> > > (?root_directory@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> > > referenced in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_directory(void)const "
> > > (?has_root_directory@path@filesystem3@pdalboost@@QBE_NXZ)   D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       16      error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > > *,char const *,class std::basic_string<wchar_t,struct
> > > std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> > >
> > (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_strin
> > g@ _WU?$char_traits@_W@std@@V?$allocator@_W
> > > @2@@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "void
> > > __cdecl pdalboost::filesystem3::path_traits::dispatch<class
> > > std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class
> > > std::allocator<wchar_t> > >(class std::basic_string<char,struct
> > > std::char_traits<char>,class std::allocator<char> > const &,class
> > > std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class
> std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> > >
> > (??$dispatch@V?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_
> > W@ 2@@std@@@path_traits@filesystem3@pdalb
> > >
> oost@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@st
> d@@AAV?$basic_string@_WU?$char_traits
> > > @_W@std@@V?$allocator@_W@2@@4@ABV?$codecvt@_WDH@4@@Z)       D:\dev\pdal\src\FileUtils.obj   pdal
> > > Error       17      error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > > *,char const *,class std::basic_string<wchar_t,struct
> > > std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> > >
> > (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_strin
> > g@ _WU?$char_traits@_W@std@@V?$allocator@_W
> > > @2@@std@@ABV?$codecvt@_WDH@5@@Z)    D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       18      error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > > *,char const *,class std::basic_string<wchar_t,struct
> > > std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> > >
> > (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_strin
> > g@ _WU?$char_traits@_W@std@@V?$allocator@_W
> > > @2@@std@@ABV?$codecvt@_WDH@5@@Z)    D:\dev\pdal\src\Utils.obj       pdal
> > > Error       19      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > pdalboost::filesystem3::path::stem(void)const "
> > > (?stem@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in
> > function
> > > "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       20      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > pdalboost::filesystem3::path::extension(void)const "
> > > (?extension@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced
> > in
> > > function "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       21      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > pdalboost::filesystem3::path::filename(void)const "
> > > (?filename@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in
> > > function "public: void __thiscall
> pdal::StageFactory::loadPlugins(void)"
> (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       22      error LNK2019: unresolved external symbol "private: class pdalboost::filesystem3::file_status __thiscall
> > > pdalboost::filesystem3::directory_entry::m_get_symlink_status(class pdalboost::system::error_code *)const "
> > >
> > (?m_get_symlink_status@directory_entry@filesystem3@pdalboost@@ABE?AV
> > fi
> > le_status@23@PAVerror_code@system@3@@Z)
> > > referenced in function "public: class
> > > pdalboost::filesystem3::file_status __thiscall pdalboost::filesystem3::directory_entry::symlink_status(void)const "
> > > (?symlink_status@directory_entry@filesystem3@pdalboost@@QBE?AVfile
> > > _s
> > > tatus@23@XZ)
> >       D:\dev\pdal\src\StageFactory.obj
> > >     pdal
> > > Error       23      error LNK2019: unresolved external symbol "void __cdecl
> > > pdalboost::filesystem3::detail::directory_iterator_construct(class
> > > pdalboost::filesystem3::directory_iterator &,class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > (?directory_iterator_construct@detail@filesystem3@pdalboost@@YAXAA
> > > Vd irectory_iterator@23@ABVpath@23@PAVerror_code
> > > @system@3@@Z) referenced in function "public: __thiscall
> > > pdalboost::filesystem3::directory_iterator::directory_iterator(cla
> > > ss pdalboost::filesystem3::path const &)"
> > > (??0directory_iterator@filesystem3@pdalboost@@QAE@ABVpath@12@@Z)
> > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       24      error LNK2019: unresolved external symbol "void __cdecl
> > > pdalboost::filesystem3::detail::directory_iterator_increment(class
> > > pdalboost::filesystem3::directory_iterator &,class pdalboost::system::error_code *)"
> > >
> > (?directory_iterator_increment@detail@filesystem3@pdalboost@@YAXAAVd
> > ir ectory_iterator@23@PAVerror_code@system@3@
> > > @Z) referenced in function "private: void __thiscall pdalboost::filesystem3::directory_iterator::increment(void)"
> > > (?increment@directory_iterator@filesystem3@pdalboost@@AAEXXZ)       D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       25      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall
> > > pdalboost::filesystem3::path::begin(void)const "
> > > (?begin@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ)
> > > referenced in function "bool __cdecl
> > > pdalboost::filesystem3::operator<(class
> > > pdalboost::filesystem3::path const &,class
> pdalboost::filesystem3::path const &)"
> (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)
> > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       26      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall
> > > pdalboost::filesystem3::path::end(void)const "
> > > (?end@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ)
> > > referenced in function "bool __cdecl
> > > pdalboost::filesystem3::operator<(class
> > > pdalboost::filesystem3::path const &,class
> pdalboost::filesystem3::path const &)"
> (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)
> > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       27      error LNK2019: unresolved external symbol "private: static void __cdecl
> > > pdalboost::filesystem3::path::m_path_iterator_increment(class pdalboost::filesystem3::path::iterator &)"
> > > (?m_path_iterator_increment@path@filesystem3@pdalboost@@CAXAAViter
> > > at
> > > or@123@@Z) referenced in function "private: void __thiscall pdalboost::filesystem3::path::iterator::increment(void)"
> > (?increment@iterator@path@filesystem3@pdalboost@@AAEXXZ)
> > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       28      error LNK2019: unresolved external symbol "class pdalboost::system::error_code __cdecl
> > > pdalboost::filesystem3::detail::dir_itr_close(void * &)"
> > > (?dir_itr_close@detail@filesystem3@pdalboost@@YA?AVerror_code@system@3@AAPAX@Z) referenced in function "public:
> > > __thiscall pdalboost::filesystem3::detail::dir_itr_imp::~dir_itr_imp(void)"
> > > (??1dir_itr_imp@detail@filesystem3@pdalboost@@QAE@XZ)       D:\dev\pdal\src\StageFactory.obj        pdal
> > > Error       29      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > > pdalboost::filesystem3::detail::unique_path(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > (?unique_path@detail@filesystem3@pdalboost@@YA?AVpath@23@ABV423@PA
> > > Ve
> > > rror_code@system@3@@Z) referenced in function "class
> > > pdalboost::filesystem3::path __cdecl
> > > pdalboost::filesystem3::unique_path(class
> > > pdalboost::filesystem3::path const
> > &)"
> > > (?unique_path@filesystem3@pdalboost@@YA?AVpath@12@ABV312@@Z)        D:\dev\pdal\src\Utils.obj       pdal
> > > Error       30      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path & __thiscall
> > > pdalboost::filesystem3::path::operator/=(class pdalboost::filesystem3::path const &)"
> > > (??_0path@filesystem3@pdalboost@@QAEAAV012@ABV012@@Z) referenced
> > > in function "class pdalboost::filesystem3::path __cdecl
> > > pdalboost::filesystem3::operator/(class
> > > pdalboost::filesystem3::path const
> &,class pdalboost::filesystem3::path const &)"
> > > (??Kfilesystem3@pdalboost@@YA?AVpath@01@ABV201@0@Z) D:\dev\pdal\src\Utils.obj       pdal
> > > Error       31      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > > pdalboost::filesystem3::detail::temp_directory_path(class pdalboost::system::error_code *)"
> > > (?temp_directory_path@detail@filesystem3@pdalboost@@YA?AVpath@23@P
> > > AV
> > > error_code@system@3@@Z) referenced in function "class
> > > pdalboost::filesystem3::path __cdecl
> > > pdalboost::filesystem3::temp_directory_path(void)"(?temp_directory_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)
> > >     D:\dev\pdal\src\Utils.obj       pdal
> > > Error       32      error LNK1120: 25 unresolved externals  D:\dev\pdal\bin\Debug\pdal.dll  pdal
> > > Error       33      error MSB6006: "link.exe" exited with code 1.   C:\Program Files
> > > (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp.Win32.Targets        275     6       pcpipeline
>
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal

From mpg at flaxen.com  Thu Mar  1 18:47:48 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Thu Mar  1 18:48:34 2012
Subject: [pdal] filesystem3, pdalboost, VS10
In-Reply-To: <C55473998E248B4DAEC5342D698DFE8501293E1767@sea-srv-mail.lizardtech.com>
References: <000901ccf7f1$09705ec0$1c511c40$@flaxen.com>	<C55473998E248B4DAEC5342D698DFE8501293E174F@sea-srv-mail.lizardtech.com>	<001401ccf800$537f1e70$fa7d5b50$@flaxen.com>	<001601ccf801$d5aa3820$80fea860$@flaxen.com>	<C55473998E248B4DAEC5342D698DFE8501293E1763@sea-srv-mail.lizardtech.com>	<001701ccf802$e959eef0$bc0dccd0$@flaxen.com>
	<C55473998E248B4DAEC5342D698DFE8501293E1767@sea-srv-mail.lizardtech.com>
Message-ID: <001801ccf805$b5b11cb0$21135610$@flaxen.com>

(la de da... I've got the apps linking now, except pdal_test says "unresolved external symbol _main referenced in function ___tmainCRTStartup"...)

-mpg


> -----Original Message-----
> From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> Sent: Thursday, March 01, 2012 3:41 PM
> To: pdal@lists.osgeo.org
> Subject: RE: [pdal] filesystem3, pdalboost, VS10
> 
> There is a corresponding LINK_PUBLIC but since this is the VERSION_LESS_THAN clause you probably don't want that in there.  I think
> what you have is correct.  Might just want to merge the test into the if(WIN32) test b/c that is the same result.
> 
> Note that you MIGHT get some linker errors come time to link the executable targets, which is why I introduced LINK_PRIVATE in the
> first place.  I think there is an older-school way of achieving the same thing but it is laborious.  If this happens let me know I can point
> you in the right direction.
> 
> -----Original Message-----
> From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> Sent: jeudi 1 mars 2012 17:28
> To: Kirk McKelvey; pdal@lists.osgeo.org
> Subject: RE: [pdal] filesystem3, pdalboost, VS10
> 
> Do you know what is the "opposite" of LINK_PRIVATE, so I know what to put into the "else" branch?  Just this maybe?
> 
> >                 target_link_libraries(${APPS_CPP_DEPENDENCIES}
> > ${Boost_LIBRARIES})
> 
> -mpg
> 
> 
> > -----Original Message-----
> > From: pdal-bounces@lists.osgeo.org
> > [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> > Sent: Thursday, March 01, 2012 3:25 PM
> > To: pdal@lists.osgeo.org
> > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> >
> > Interesting point...
> >
> > I'm only responsible for the LINK_PRIVATE.  Hobu put the guard in
> > later :)
> >
> > -----Original Message-----
> > From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> > Sent: jeudi 1 mars 2012 17:20
> > To: Kirk McKelvey; pdal@lists.osgeo.org
> > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> >
> > OK, yeah.  This is the problemo:
> >
> >
> >
> > if (WIN32)
> >         if (CMAKE_VERSION VERSION_GREATER 2.8.7)
> >                 target_link_libraries(${APPS_CPP_DEPENDENCIES} LINK_PRIVATE general ${Boost_LIBRARIES})
> >         endif(CMAKE_VERSION VERSION_GREATER 2.8.7)
> > else()
> >         target_link_libraries(${APPS_CPP_DEPENDENCIES}
> > ${Boost_LIBRARIES})
> > endif(WIN32)
> >
> >
> >
> >
> > Observe that there is no "else" clause -- if you're using 2.8.7, then no libs to link for you!
> >
> > Are we sure we mean "VERSION_GREATER" and not
> > "VERSION_GREATER_OR_EQUAL"?  because 2.8.7 is the last released version, so it's not clear how anyone could be using anything
> GREATER than that.
> >
> > Kirk?
> >
> > -mpg
> >
> >
> > > -----Original Message-----
> > > From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> > > Sent: Thursday, March 01, 2012 3:13 PM
> > > To: 'mpg@flaxen.com'; 'Kirk McKelvey'; 'pdal@lists.osgeo.org'
> > > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> > >
> > > I think it's just that pdalboost.lib isn't getting seen at link time for some reason...
> > >
> > > -mpg
> > >
> > >
> > > > -----Original Message-----
> > > > From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> > > > Sent: Thursday, March 01, 2012 3:09 PM
> > > > To: 'Kirk McKelvey'; pdal@lists.osgeo.org
> > > > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> > > >
> > > > Not main-related, no -- this is just resolving stuff to for the DLL.
> > > >
> > > > Full errors down below, but they look like this:
> > > >
> > > > unresolved external symbol "bool __cdecl
> > > > pdalboost::filesystem3::detail::remove(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > > (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_cod
> > > > e@
> > > > system@3@@Z) referenced in function "bool __cdecl
> > > > pdalboost::filesystem3::remove(class pdalboost::filesystem3::path
> > > > const
> > &)"
> > > > (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)
> > > >
> > > > What's the LINK_PRIVATE thing Hobu mentioned?
> > > >
> > > > -mpg
> > > >
> > > >
> > > > > -----Original Message-----
> > > > > From: pdal-bounces@lists.osgeo.org
> > > > > [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> > > > > Sent: Thursday, March 01, 2012 1:57 PM
> > > > > To: pdal@lists.osgeo.org
> > > > > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> > > > >
> > > > > I believe this is/was building correctly.  Though there was a
> > > > > fair amount of trouble around whether to compile with
> > > > > BOOST_TEST_DYN_LINK or not.  Are any of the symbols mentioned
> > > > > "main"-
> > related?
> > > > >
> > > > >
> > > > > -----Original Message-----
> > > > > From: pdal-bounces@lists.osgeo.org
> > > > > [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P.
> > > > > Gerlek
> > > > > Sent: jeudi 1 mars 2012 15:20
> > > > > To: pdal@lists.osgeo.org
> > > > > Subject: [pdal] filesystem3, pdalboost, VS10
> > > > >
> > > > > I'm trying to build under VS2010, for the 1st time since the
> > > > > sprint, and I'm getting a bazillion link errors on pdal.lib due
> > > > > to missing functions from pdalboost::filesystem3.  I'm using the
> > embedded boost.
> > > > >
> > > > > Before I dive into this, anyone have any clues or hints?
> > > > >
> > > > > -mpg
> > > > >
> > > > >
> > > > > _______________________________________________
> > > > > pdal mailing list
> > > > > pdal@lists.osgeo.org
> > > > > http://lists.osgeo.org/mailman/listinfo/pdal
> > > > > _______________________________________________
> > > > > pdal mailing list
> > > > > pdal@lists.osgeo.org
> > > > > http://lists.osgeo.org/mailman/listinfo/pdal
> > > >
> > > >
> > > >
> > > >
> > > > Error       1       error LNK2019: unresolved external symbol "bool __cdecl pdalboost::filesystem3::detail::remove(class
> > > > pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > > (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_cod
> > > > e@
> > > > system@3@@Z) referenced in function "bool __cdecl
> > > > pdalboost::filesystem3::remove(class pdalboost::filesystem3::path
> > > > const
> > &)"
> > > > (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)  D:\dev\pdal\src\FileUtils.obj   pdal
> > > > Error       2       error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::detail::rename(class
> > > > pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > > (?rename@detail@filesystem3@pdalboost@@YAXABVpath@23@0PAVerror_cod
> > > > e@
> > > > system@3@@Z) referenced in function "void __cdecl
> > > > pdalboost::filesystem3::rename(class pdalboost::filesystem3::path
> > > > const
> > &,class pdalboost::filesystem3::path const &)"
> > > > (?rename@filesystem3@pdalboost@@YAXABVpath@12@0@Z)  D:\dev\pdal\src\FileUtils.obj   pdal
> > > > Error       3       error LNK2019: unresolved external symbol "class pdalboost::filesystem3::file_status __cdecl
> > > > pdalboost::filesystem3::detail::status(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > > (?status@detail@filesystem3@pdalboost@@YA?AVfile_status@23@ABVpath
> > > > @2
> > > > 3@PAVerror_code@system@3@@Z) referenced
> > > in
> > > > function "bool __cdecl pdalboost::filesystem3::exists(class pdalboost::filesystem3::path const &)"
> > > > (?exists@filesystem3@pdalboost@@YA_NABVpath@12@@Z)  D:\dev\pdal\src\FileUtils.obj   pdal
> > > > Error       4       error LNK2019: unresolved external symbol "unsigned __int64 __cdecl pdalboost::filesystem3::detail::file_size(class
> > > > pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > > (?file_size@detail@filesystem3@pdalboost@@YA_KABVpath@23@PAVerror_
> > > > co
> > > > de@system@3@@Z) referenced in function "unsigned __int64 __cdecl
> > > > pdalboost::filesystem3::file_size(class
> > pdalboost::filesystem3::path const &)"
> > > > (?file_size@filesystem3@pdalboost@@YA_KABVpath@12@@Z)       D:\dev\pdal\src\FileUtils.obj   pdal
> > > > Error       5       error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t
> const
> > > > *,wchar_t const *,class std::basic_string<char,struct
> > > > std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)"
> > > >
> > > (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_stri
> > > ng
> > > @DU?$char_traits@D@std@@V?$allocator@D@2
> > > > @@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "public:
> > > > class std::basic_string<char,struct std::char_traits<char>,class
> > > > std::allocator<char> > const __thiscall
> > > > pdalboost::filesystem3::path::string(class
> > > > std::codecvt<wchar_t,char,int> const &)const "
> > > >
> > > (?string@path@filesystem3@pdalboost@@QBE?BV?$basic_string@DU?$char_t
> > > ra its@D@std@@V?$allocator@D@2@@std@@ABV
> > > > ?$codecvt@_WDH@5@@Z)        D:\dev\pdal\src\FileUtils.obj   pdal
> > > > Error       6       error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t
> const
> > > > *,wchar_t const *,class std::basic_string<char,struct
> > > > std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)"
> > > >
> > > (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_stri
> > > ng
> > > @DU?$char_traits@D@std@@V?$allocator@D@2
> > > > @@std@@ABV?$codecvt@_WDH@5@@Z)      D:\dev\pdal\src\StageFactory.obj        pdal
> > > > Error       7       error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t
> const
> > > > *,wchar_t const *,class std::basic_string<char,struct
> > > > std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)"
> > > >
> > > (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_stri
> > > ng
> > > @DU?$char_traits@D@std@@V?$allocator@D@2
> > > > @@std@@ABV?$codecvt@_WDH@5@@Z)      D:\dev\pdal\src\Utils.obj       pdal
> > > > Error       8       error LNK2019: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > > > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > > > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codec
> > > > vt
> > > > @_WDH@std@@XZ) referenced in function
> > > > "public: static class std::codecvt<wchar_t,char,int> const & __cdecl pdalboost::filesystem3::path::codecvt(void)"
> > > > (?codecvt@path@filesystem3@pdalboost@@SAABV?$codecvt@_WDH@std@@XZ)  D:\dev\pdal\src\FileUtils.obj   pdal
> > > > Error       9       error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > > > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > > > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ)
> > > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > > Error       10      error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > > > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > > > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ)
> > > >     D:\dev\pdal\src\Utils.obj       pdal
> > > > Error       11      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > > > pdalboost::filesystem3::detail::current_path(class pdalboost::system::error_code *)"
> > > > (?current_path@detail@filesystem3@pdalboost@@YA?AVpath@23@PAVerror
> > > > _c
> > > > ode@system@3@@Z) referenced in function "class
> > > > pdalboost::filesystem3::path __cdecl
> > pdalboost::filesystem3::current_path(void)"
> > > > (?current_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)      D:\dev\pdal\src\FileUtils.obj   pdal
> > > > Error       12      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > > > pdalboost::filesystem3::absolute(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)"
> > > > (?absolute@filesystem3@pdalboost@@YA?AVpath@12@ABV312@0@Z)
> > > > referenced in function "public: static class
> > > > std::basic_string<char,struct std::char_traits<char>,class
> > > > std::allocator<char> > __cdecl
> > > > pdal::FileUtils::toAbsolutePath(class
> > > > std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)"
> > > >
> > > (?toAbsolutePath@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits
> > > @D @std@@V?$allocator@D@2@@std@@ABV34@@Z
> > > > )   D:\dev\pdal\src\FileUtils.obj   pdal
> > > > Error       13      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > > pdalboost::filesystem3::path::parent_path(void)const "
> > > > (?parent_path@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> > > > referenced in function "public: static class
> > > > std::basic_string<char,struct std::char_traits<char>,class
> > > > std::allocator<char> > __cdecl pdal::FileUtils::getDirectory(class
> > std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)"
> > > >
> > (?getDirectory@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits@D@s
> > td@@V?$allocator@D@2@@std@@ABV34@@Z)
> > > >     D:\dev\pdal\src\FileUtils.obj   pdal
> > > > Error       14      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > > pdalboost::filesystem3::path::root_name(void)const "
> > > > (?root_name@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> > > referenced
> > > > in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_name(void)const "
> > > > (?has_root_name@path@filesystem3@pdalboost@@QBE_NXZ)        D:\dev\pdal\src\FileUtils.obj   pdal
> > > > Error       15      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > > pdalboost::filesystem3::path::root_directory(void)const "
> > > > (?root_directory@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> > > > referenced in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_directory(void)const "
> > > > (?has_root_directory@path@filesystem3@pdalboost@@QBE_NXZ)   D:\dev\pdal\src\FileUtils.obj   pdal
> > > > Error       16      error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > > > *,char const *,class std::basic_string<wchar_t,struct
> > > > std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> > > >
> > > (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_strin
> > > g@ _WU?$char_traits@_W@std@@V?$allocator@_W
> > > > @2@@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "void
> > > > __cdecl pdalboost::filesystem3::path_traits::dispatch<class
> > > > std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class
> > > > std::allocator<wchar_t> > >(class std::basic_string<char,struct
> > > > std::char_traits<char>,class std::allocator<char> > const &,class
> > > > std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class
> > std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> > > >
> > > (??$dispatch@V?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_
> > > W@ 2@@std@@@path_traits@filesystem3@pdalb
> > > >
> > oost@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@st
> > d@@AAV?$basic_string@_WU?$char_traits
> > > > @_W@std@@V?$allocator@_W@2@@4@ABV?$codecvt@_WDH@4@@Z)       D:\dev\pdal\src\FileUtils.obj   pdal
> > > > Error       17      error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > > > *,char const *,class std::basic_string<wchar_t,struct
> > > > std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> > > >
> > > (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_strin
> > > g@ _WU?$char_traits@_W@std@@V?$allocator@_W
> > > > @2@@std@@ABV?$codecvt@_WDH@5@@Z)    D:\dev\pdal\src\StageFactory.obj        pdal
> > > > Error       18      error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > > > *,char const *,class std::basic_string<wchar_t,struct
> > > > std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> > > >
> > > (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_strin
> > > g@ _WU?$char_traits@_W@std@@V?$allocator@_W
> > > > @2@@std@@ABV?$codecvt@_WDH@5@@Z)    D:\dev\pdal\src\Utils.obj       pdal
> > > > Error       19      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > > pdalboost::filesystem3::path::stem(void)const "
> > > > (?stem@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in
> > > function
> > > > "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> > > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > > Error       20      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > > pdalboost::filesystem3::path::extension(void)const "
> > > > (?extension@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced
> > > in
> > > > function "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> > > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > > Error       21      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > > pdalboost::filesystem3::path::filename(void)const "
> > > > (?filename@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in
> > > > function "public: void __thiscall
> > pdal::StageFactory::loadPlugins(void)"
> > (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> > > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > > Error       22      error LNK2019: unresolved external symbol "private: class pdalboost::filesystem3::file_status __thiscall
> > > > pdalboost::filesystem3::directory_entry::m_get_symlink_status(class pdalboost::system::error_code *)const "
> > > >
> > > (?m_get_symlink_status@directory_entry@filesystem3@pdalboost@@ABE?AV
> > > fi
> > > le_status@23@PAVerror_code@system@3@@Z)
> > > > referenced in function "public: class
> > > > pdalboost::filesystem3::file_status __thiscall pdalboost::filesystem3::directory_entry::symlink_status(void)const "
> > > > (?symlink_status@directory_entry@filesystem3@pdalboost@@QBE?AVfile
> > > > _s
> > > > tatus@23@XZ)
> > >       D:\dev\pdal\src\StageFactory.obj
> > > >     pdal
> > > > Error       23      error LNK2019: unresolved external symbol "void __cdecl
> > > > pdalboost::filesystem3::detail::directory_iterator_construct(class
> > > > pdalboost::filesystem3::directory_iterator &,class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > > (?directory_iterator_construct@detail@filesystem3@pdalboost@@YAXAA
> > > > Vd irectory_iterator@23@ABVpath@23@PAVerror_code
> > > > @system@3@@Z) referenced in function "public: __thiscall
> > > > pdalboost::filesystem3::directory_iterator::directory_iterator(cla
> > > > ss pdalboost::filesystem3::path const &)"
> > > > (??0directory_iterator@filesystem3@pdalboost@@QAE@ABVpath@12@@Z)
> > > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > > Error       24      error LNK2019: unresolved external symbol "void __cdecl
> > > > pdalboost::filesystem3::detail::directory_iterator_increment(class
> > > > pdalboost::filesystem3::directory_iterator &,class pdalboost::system::error_code *)"
> > > >
> > > (?directory_iterator_increment@detail@filesystem3@pdalboost@@YAXAAVd
> > > ir ectory_iterator@23@PAVerror_code@system@3@
> > > > @Z) referenced in function "private: void __thiscall pdalboost::filesystem3::directory_iterator::increment(void)"
> > > > (?increment@directory_iterator@filesystem3@pdalboost@@AAEXXZ)       D:\dev\pdal\src\StageFactory.obj        pdal
> > > > Error       25      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall
> > > > pdalboost::filesystem3::path::begin(void)const "
> > > > (?begin@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ)
> > > > referenced in function "bool __cdecl
> > > > pdalboost::filesystem3::operator<(class
> > > > pdalboost::filesystem3::path const &,class
> > pdalboost::filesystem3::path const &)"
> > (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)
> > > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > > Error       26      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall
> > > > pdalboost::filesystem3::path::end(void)const "
> > > > (?end@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ)
> > > > referenced in function "bool __cdecl
> > > > pdalboost::filesystem3::operator<(class
> > > > pdalboost::filesystem3::path const &,class
> > pdalboost::filesystem3::path const &)"
> > (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)
> > > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > > Error       27      error LNK2019: unresolved external symbol "private: static void __cdecl
> > > > pdalboost::filesystem3::path::m_path_iterator_increment(class pdalboost::filesystem3::path::iterator &)"
> > > > (?m_path_iterator_increment@path@filesystem3@pdalboost@@CAXAAViter
> > > > at
> > > > or@123@@Z) referenced in function "private: void __thiscall pdalboost::filesystem3::path::iterator::increment(void)"
> > > (?increment@iterator@path@filesystem3@pdalboost@@AAEXXZ)
> > > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > > Error       28      error LNK2019: unresolved external symbol "class pdalboost::system::error_code __cdecl
> > > > pdalboost::filesystem3::detail::dir_itr_close(void * &)"
> > > > (?dir_itr_close@detail@filesystem3@pdalboost@@YA?AVerror_code@system@3@AAPAX@Z) referenced in function "public:
> > > > __thiscall pdalboost::filesystem3::detail::dir_itr_imp::~dir_itr_imp(void)"
> > > > (??1dir_itr_imp@detail@filesystem3@pdalboost@@QAE@XZ)       D:\dev\pdal\src\StageFactory.obj        pdal
> > > > Error       29      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > > > pdalboost::filesystem3::detail::unique_path(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > > (?unique_path@detail@filesystem3@pdalboost@@YA?AVpath@23@ABV423@PA
> > > > Ve
> > > > rror_code@system@3@@Z) referenced in function "class
> > > > pdalboost::filesystem3::path __cdecl
> > > > pdalboost::filesystem3::unique_path(class
> > > > pdalboost::filesystem3::path const
> > > &)"
> > > > (?unique_path@filesystem3@pdalboost@@YA?AVpath@12@ABV312@@Z)        D:\dev\pdal\src\Utils.obj       pdal
> > > > Error       30      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path & __thiscall
> > > > pdalboost::filesystem3::path::operator/=(class pdalboost::filesystem3::path const &)"
> > > > (??_0path@filesystem3@pdalboost@@QAEAAV012@ABV012@@Z) referenced
> > > > in function "class pdalboost::filesystem3::path __cdecl
> > > > pdalboost::filesystem3::operator/(class
> > > > pdalboost::filesystem3::path const
> > &,class pdalboost::filesystem3::path const &)"
> > > > (??Kfilesystem3@pdalboost@@YA?AVpath@01@ABV201@0@Z) D:\dev\pdal\src\Utils.obj       pdal
> > > > Error       31      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > > > pdalboost::filesystem3::detail::temp_directory_path(class pdalboost::system::error_code *)"
> > > > (?temp_directory_path@detail@filesystem3@pdalboost@@YA?AVpath@23@P
> > > > AV
> > > > error_code@system@3@@Z) referenced in function "class
> > > > pdalboost::filesystem3::path __cdecl
> > > > pdalboost::filesystem3::temp_directory_path(void)"(?temp_directory_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)
> > > >     D:\dev\pdal\src\Utils.obj       pdal
> > > > Error       32      error LNK1120: 25 unresolved externals  D:\dev\pdal\bin\Debug\pdal.dll  pdal
> > > > Error       33      error MSB6006: "link.exe" exited with code 1.   C:\Program Files
> > > > (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp.Win32.Targets        275     6       pcpipeline
> >
> > _______________________________________________
> > pdal mailing list
> > pdal@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/pdal
> 
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal

From mpg at flaxen.com  Thu Mar  1 21:01:45 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Thu Mar  1 21:02:27 2012
Subject: [pdal] filesystem3, pdalboost, VS10
In-Reply-To: <001801ccf805$b5b11cb0$21135610$@flaxen.com>
References: <000901ccf7f1$09705ec0$1c511c40$@flaxen.com>	<C55473998E248B4DAEC5342D698DFE8501293E174F@sea-srv-mail.lizardtech.com>	<001401ccf800$537f1e70$fa7d5b50$@flaxen.com>	<001601ccf801$d5aa3820$80fea860$@flaxen.com>	<C55473998E248B4DAEC5342D698DFE8501293E1763@sea-srv-mail.lizardtech.com>	<001701ccf802$e959eef0$bc0dccd0$@flaxen.com>
	<C55473998E248B4DAEC5342D698DFE8501293E1767@sea-srv-mail.lizardtech.com>
	<001801ccf805$b5b11cb0$21135610$@flaxen.com>
Message-ID: <002e01ccf818$6ce19b50$46a4d1f0$@flaxen.com>

It's just one of those BOOST_TEST_DYN_LINK things, I'll figger it out tomorrow.

-mpg


> -----Original Message-----
> From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> Sent: Thursday, March 01, 2012 3:48 PM
> To: 'Kirk McKelvey'; pdal@lists.osgeo.org
> Subject: RE: [pdal] filesystem3, pdalboost, VS10
> 
> (la de da... I've got the apps linking now, except pdal_test says "unresolved external symbol _main referenced in function
> ___tmainCRTStartup"...)
> 
> -mpg
> 
> 
> > -----Original Message-----
> > From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> > Sent: Thursday, March 01, 2012 3:41 PM
> > To: pdal@lists.osgeo.org
> > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> >
> > There is a corresponding LINK_PUBLIC but since this is the VERSION_LESS_THAN clause you probably don't want that in there.  I
> think
> > what you have is correct.  Might just want to merge the test into the if(WIN32) test b/c that is the same result.
> >
> > Note that you MIGHT get some linker errors come time to link the executable targets, which is why I introduced LINK_PRIVATE in
> the
> > first place.  I think there is an older-school way of achieving the same thing but it is laborious.  If this happens let me know I can point
> > you in the right direction.
> >
> > -----Original Message-----
> > From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> > Sent: jeudi 1 mars 2012 17:28
> > To: Kirk McKelvey; pdal@lists.osgeo.org
> > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> >
> > Do you know what is the "opposite" of LINK_PRIVATE, so I know what to put into the "else" branch?  Just this maybe?
> >
> > >                 target_link_libraries(${APPS_CPP_DEPENDENCIES}
> > > ${Boost_LIBRARIES})
> >
> > -mpg
> >
> >
> > > -----Original Message-----
> > > From: pdal-bounces@lists.osgeo.org
> > > [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> > > Sent: Thursday, March 01, 2012 3:25 PM
> > > To: pdal@lists.osgeo.org
> > > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> > >
> > > Interesting point...
> > >
> > > I'm only responsible for the LINK_PRIVATE.  Hobu put the guard in
> > > later :)
> > >
> > > -----Original Message-----
> > > From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> > > Sent: jeudi 1 mars 2012 17:20
> > > To: Kirk McKelvey; pdal@lists.osgeo.org
> > > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> > >
> > > OK, yeah.  This is the problemo:
> > >
> > >
> > >
> > > if (WIN32)
> > >         if (CMAKE_VERSION VERSION_GREATER 2.8.7)
> > >                 target_link_libraries(${APPS_CPP_DEPENDENCIES} LINK_PRIVATE general ${Boost_LIBRARIES})
> > >         endif(CMAKE_VERSION VERSION_GREATER 2.8.7)
> > > else()
> > >         target_link_libraries(${APPS_CPP_DEPENDENCIES}
> > > ${Boost_LIBRARIES})
> > > endif(WIN32)
> > >
> > >
> > >
> > >
> > > Observe that there is no "else" clause -- if you're using 2.8.7, then no libs to link for you!
> > >
> > > Are we sure we mean "VERSION_GREATER" and not
> > > "VERSION_GREATER_OR_EQUAL"?  because 2.8.7 is the last released version, so it's not clear how anyone could be using anything
> > GREATER than that.
> > >
> > > Kirk?
> > >
> > > -mpg
> > >
> > >
> > > > -----Original Message-----
> > > > From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> > > > Sent: Thursday, March 01, 2012 3:13 PM
> > > > To: 'mpg@flaxen.com'; 'Kirk McKelvey'; 'pdal@lists.osgeo.org'
> > > > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> > > >
> > > > I think it's just that pdalboost.lib isn't getting seen at link time for some reason...
> > > >
> > > > -mpg
> > > >
> > > >
> > > > > -----Original Message-----
> > > > > From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> > > > > Sent: Thursday, March 01, 2012 3:09 PM
> > > > > To: 'Kirk McKelvey'; pdal@lists.osgeo.org
> > > > > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> > > > >
> > > > > Not main-related, no -- this is just resolving stuff to for the DLL.
> > > > >
> > > > > Full errors down below, but they look like this:
> > > > >
> > > > > unresolved external symbol "bool __cdecl
> > > > > pdalboost::filesystem3::detail::remove(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > > > (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_cod
> > > > > e@
> > > > > system@3@@Z) referenced in function "bool __cdecl
> > > > > pdalboost::filesystem3::remove(class pdalboost::filesystem3::path
> > > > > const
> > > &)"
> > > > > (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)
> > > > >
> > > > > What's the LINK_PRIVATE thing Hobu mentioned?
> > > > >
> > > > > -mpg
> > > > >
> > > > >
> > > > > > -----Original Message-----
> > > > > > From: pdal-bounces@lists.osgeo.org
> > > > > > [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> > > > > > Sent: Thursday, March 01, 2012 1:57 PM
> > > > > > To: pdal@lists.osgeo.org
> > > > > > Subject: RE: [pdal] filesystem3, pdalboost, VS10
> > > > > >
> > > > > > I believe this is/was building correctly.  Though there was a
> > > > > > fair amount of trouble around whether to compile with
> > > > > > BOOST_TEST_DYN_LINK or not.  Are any of the symbols mentioned
> > > > > > "main"-
> > > related?
> > > > > >
> > > > > >
> > > > > > -----Original Message-----
> > > > > > From: pdal-bounces@lists.osgeo.org
> > > > > > [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P.
> > > > > > Gerlek
> > > > > > Sent: jeudi 1 mars 2012 15:20
> > > > > > To: pdal@lists.osgeo.org
> > > > > > Subject: [pdal] filesystem3, pdalboost, VS10
> > > > > >
> > > > > > I'm trying to build under VS2010, for the 1st time since the
> > > > > > sprint, and I'm getting a bazillion link errors on pdal.lib due
> > > > > > to missing functions from pdalboost::filesystem3.  I'm using the
> > > embedded boost.
> > > > > >
> > > > > > Before I dive into this, anyone have any clues or hints?
> > > > > >
> > > > > > -mpg
> > > > > >
> > > > > >
> > > > > > _______________________________________________
> > > > > > pdal mailing list
> > > > > > pdal@lists.osgeo.org
> > > > > > http://lists.osgeo.org/mailman/listinfo/pdal
> > > > > > _______________________________________________
> > > > > > pdal mailing list
> > > > > > pdal@lists.osgeo.org
> > > > > > http://lists.osgeo.org/mailman/listinfo/pdal
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > Error       1       error LNK2019: unresolved external symbol "bool __cdecl pdalboost::filesystem3::detail::remove(class
> > > > > pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > > > (?remove@detail@filesystem3@pdalboost@@YA_NABVpath@23@PAVerror_cod
> > > > > e@
> > > > > system@3@@Z) referenced in function "bool __cdecl
> > > > > pdalboost::filesystem3::remove(class pdalboost::filesystem3::path
> > > > > const
> > > &)"
> > > > > (?remove@filesystem3@pdalboost@@YA_NABVpath@12@@Z)  D:\dev\pdal\src\FileUtils.obj   pdal
> > > > > Error       2       error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::detail::rename(class
> > > > > pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > > > (?rename@detail@filesystem3@pdalboost@@YAXABVpath@23@0PAVerror_cod
> > > > > e@
> > > > > system@3@@Z) referenced in function "void __cdecl
> > > > > pdalboost::filesystem3::rename(class pdalboost::filesystem3::path
> > > > > const
> > > &,class pdalboost::filesystem3::path const &)"
> > > > > (?rename@filesystem3@pdalboost@@YAXABVpath@12@0@Z)  D:\dev\pdal\src\FileUtils.obj   pdal
> > > > > Error       3       error LNK2019: unresolved external symbol "class pdalboost::filesystem3::file_status __cdecl
> > > > > pdalboost::filesystem3::detail::status(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > > > (?status@detail@filesystem3@pdalboost@@YA?AVfile_status@23@ABVpath
> > > > > @2
> > > > > 3@PAVerror_code@system@3@@Z) referenced
> > > > in
> > > > > function "bool __cdecl pdalboost::filesystem3::exists(class pdalboost::filesystem3::path const &)"
> > > > > (?exists@filesystem3@pdalboost@@YA_NABVpath@12@@Z)  D:\dev\pdal\src\FileUtils.obj   pdal
> > > > > Error       4       error LNK2019: unresolved external symbol "unsigned __int64 __cdecl
> pdalboost::filesystem3::detail::file_size(class
> > > > > pdalboost::filesystem3::path const &,class pdalboost::system::error_code *)"
> > > > > (?file_size@detail@filesystem3@pdalboost@@YA_KABVpath@23@PAVerror_
> > > > > co
> > > > > de@system@3@@Z) referenced in function "unsigned __int64 __cdecl
> > > > > pdalboost::filesystem3::file_size(class
> > > pdalboost::filesystem3::path const &)"
> > > > > (?file_size@filesystem3@pdalboost@@YA_KABVpath@12@@Z)       D:\dev\pdal\src\FileUtils.obj   pdal
> > > > > Error       5       error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t
> > const
> > > > > *,wchar_t const *,class std::basic_string<char,struct
> > > > > std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)"
> > > > >
> > > > (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_stri
> > > > ng
> > > > @DU?$char_traits@D@std@@V?$allocator@D@2
> > > > > @@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "public:
> > > > > class std::basic_string<char,struct std::char_traits<char>,class
> > > > > std::allocator<char> > const __thiscall
> > > > > pdalboost::filesystem3::path::string(class
> > > > > std::codecvt<wchar_t,char,int> const &)const "
> > > > >
> > > > (?string@path@filesystem3@pdalboost@@QBE?BV?$basic_string@DU?$char_t
> > > > ra its@D@std@@V?$allocator@D@2@@std@@ABV
> > > > > ?$codecvt@_WDH@5@@Z)        D:\dev\pdal\src\FileUtils.obj   pdal
> > > > > Error       6       error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t
> > const
> > > > > *,wchar_t const *,class std::basic_string<char,struct
> > > > > std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)"
> > > > >
> > > > (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_stri
> > > > ng
> > > > @DU?$char_traits@D@std@@V?$allocator@D@2
> > > > > @@std@@ABV?$codecvt@_WDH@5@@Z)      D:\dev\pdal\src\StageFactory.obj        pdal
> > > > > Error       7       error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(wchar_t
> > const
> > > > > *,wchar_t const *,class std::basic_string<char,struct
> > > > > std::char_traits<char>,class std::allocator<char> > &,class std::codecvt<wchar_t,char,int> const &)"
> > > > >
> > > > (?convert@path_traits@filesystem3@pdalboost@@YAXPB_W0AAV?$basic_stri
> > > > ng
> > > > @DU?$char_traits@D@std@@V?$allocator@D@2
> > > > > @@std@@ABV?$codecvt@_WDH@5@@Z)      D:\dev\pdal\src\Utils.obj       pdal
> > > > > Error       8       error LNK2019: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > > > > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > > > > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codec
> > > > > vt
> > > > > @_WDH@std@@XZ) referenced in function
> > > > > "public: static class std::codecvt<wchar_t,char,int> const & __cdecl pdalboost::filesystem3::path::codecvt(void)"
> > > > > (?codecvt@path@filesystem3@pdalboost@@SAABV?$codecvt@_WDH@std@@XZ)  D:\dev\pdal\src\FileUtils.obj   pdal
> > > > > Error       9       error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > > > > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > > > > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ)
> > > > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > > > Error       10      error LNK2001: unresolved external symbol "private: static class std::codecvt<wchar_t,char,int> const * & __cdecl
> > > > > pdalboost::filesystem3::path::wchar_t_codecvt_facet(void)"
> > > > > (?wchar_t_codecvt_facet@path@filesystem3@pdalboost@@CAAAPBV?$codecvt@_WDH@std@@XZ)
> > > > >     D:\dev\pdal\src\Utils.obj       pdal
> > > > > Error       11      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > > > > pdalboost::filesystem3::detail::current_path(class pdalboost::system::error_code *)"
> > > > > (?current_path@detail@filesystem3@pdalboost@@YA?AVpath@23@PAVerror
> > > > > _c
> > > > > ode@system@3@@Z) referenced in function "class
> > > > > pdalboost::filesystem3::path __cdecl
> > > pdalboost::filesystem3::current_path(void)"
> > > > > (?current_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)      D:\dev\pdal\src\FileUtils.obj   pdal
> > > > > Error       12      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > > > > pdalboost::filesystem3::absolute(class pdalboost::filesystem3::path const &,class pdalboost::filesystem3::path const &)"
> > > > > (?absolute@filesystem3@pdalboost@@YA?AVpath@12@ABV312@0@Z)
> > > > > referenced in function "public: static class
> > > > > std::basic_string<char,struct std::char_traits<char>,class
> > > > > std::allocator<char> > __cdecl
> > > > > pdal::FileUtils::toAbsolutePath(class
> > > > > std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)"
> > > > >
> > > > (?toAbsolutePath@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits
> > > > @D @std@@V?$allocator@D@2@@std@@ABV34@@Z
> > > > > )   D:\dev\pdal\src\FileUtils.obj   pdal
> > > > > Error       13      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > > > pdalboost::filesystem3::path::parent_path(void)const "
> > > > > (?parent_path@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> > > > > referenced in function "public: static class
> > > > > std::basic_string<char,struct std::char_traits<char>,class
> > > > > std::allocator<char> > __cdecl pdal::FileUtils::getDirectory(class
> > > std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)"
> > > > >
> > > (?getDirectory@FileUtils@pdal@@SA?AV?$basic_string@DU?$char_traits@D@s
> > > td@@V?$allocator@D@2@@std@@ABV34@@Z)
> > > > >     D:\dev\pdal\src\FileUtils.obj   pdal
> > > > > Error       14      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > > > pdalboost::filesystem3::path::root_name(void)const "
> > > > > (?root_name@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> > > > referenced
> > > > > in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_name(void)const "
> > > > > (?has_root_name@path@filesystem3@pdalboost@@QBE_NXZ)        D:\dev\pdal\src\FileUtils.obj   pdal
> > > > > Error       15      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > > > pdalboost::filesystem3::path::root_directory(void)const "
> > > > > (?root_directory@path@filesystem3@pdalboost@@QBE?AV123@XZ)
> > > > > referenced in function "public: bool __thiscall pdalboost::filesystem3::path::has_root_directory(void)const "
> > > > > (?has_root_directory@path@filesystem3@pdalboost@@QBE_NXZ)   D:\dev\pdal\src\FileUtils.obj   pdal
> > > > > Error       16      error LNK2019: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > > > > *,char const *,class std::basic_string<wchar_t,struct
> > > > > std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> > > > >
> > > > (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_strin
> > > > g@ _WU?$char_traits@_W@std@@V?$allocator@_W
> > > > > @2@@std@@ABV?$codecvt@_WDH@5@@Z) referenced in function "void
> > > > > __cdecl pdalboost::filesystem3::path_traits::dispatch<class
> > > > > std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class
> > > > > std::allocator<wchar_t> > >(class std::basic_string<char,struct
> > > > > std::char_traits<char>,class std::allocator<char> > const &,class
> > > > > std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class
> > > std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> > > > >
> > > > (??$dispatch@V?$basic_string@_WU?$char_traits@_W@std@@V?$allocator@_
> > > > W@ 2@@std@@@path_traits@filesystem3@pdalb
> > > > >
> > > oost@@YAXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@st
> > > d@@AAV?$basic_string@_WU?$char_traits
> > > > > @_W@std@@V?$allocator@_W@2@@4@ABV?$codecvt@_WDH@4@@Z)       D:\dev\pdal\src\FileUtils.obj   pdal
> > > > > Error       17      error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > > > > *,char const *,class std::basic_string<wchar_t,struct
> > > > > std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> > > > >
> > > > (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_strin
> > > > g@ _WU?$char_traits@_W@std@@V?$allocator@_W
> > > > > @2@@std@@ABV?$codecvt@_WDH@5@@Z)    D:\dev\pdal\src\StageFactory.obj        pdal
> > > > > Error       18      error LNK2001: unresolved external symbol "void __cdecl pdalboost::filesystem3::path_traits::convert(char const
> > > > > *,char const *,class std::basic_string<wchar_t,struct
> > > > > std::char_traits<wchar_t>,class std::allocator<wchar_t> > &,class std::codecvt<wchar_t,char,int> const &)"
> > > > >
> > > > (?convert@path_traits@filesystem3@pdalboost@@YAXPBD0AAV?$basic_strin
> > > > g@ _WU?$char_traits@_W@std@@V?$allocator@_W
> > > > > @2@@std@@ABV?$codecvt@_WDH@5@@Z)    D:\dev\pdal\src\Utils.obj       pdal
> > > > > Error       19      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > > > pdalboost::filesystem3::path::stem(void)const "
> > > > > (?stem@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in
> > > > function
> > > > > "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> > > > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > > > Error       20      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > > > pdalboost::filesystem3::path::extension(void)const "
> > > > > (?extension@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced
> > > > in
> > > > > function "public: void __thiscall pdal::StageFactory::loadPlugins(void)" (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> > > > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > > > Error       21      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path __thiscall
> > > > > pdalboost::filesystem3::path::filename(void)const "
> > > > > (?filename@path@filesystem3@pdalboost@@QBE?AV123@XZ) referenced in
> > > > > function "public: void __thiscall
> > > pdal::StageFactory::loadPlugins(void)"
> > > (?loadPlugins@StageFactory@pdal@@QAEXXZ)
> > > > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > > > Error       22      error LNK2019: unresolved external symbol "private: class pdalboost::filesystem3::file_status __thiscall
> > > > > pdalboost::filesystem3::directory_entry::m_get_symlink_status(class pdalboost::system::error_code *)const "
> > > > >
> > > > (?m_get_symlink_status@directory_entry@filesystem3@pdalboost@@ABE?AV
> > > > fi
> > > > le_status@23@PAVerror_code@system@3@@Z)
> > > > > referenced in function "public: class
> > > > > pdalboost::filesystem3::file_status __thiscall pdalboost::filesystem3::directory_entry::symlink_status(void)const "
> > > > > (?symlink_status@directory_entry@filesystem3@pdalboost@@QBE?AVfile
> > > > > _s
> > > > > tatus@23@XZ)
> > > >       D:\dev\pdal\src\StageFactory.obj
> > > > >     pdal
> > > > > Error       23      error LNK2019: unresolved external symbol "void __cdecl
> > > > > pdalboost::filesystem3::detail::directory_iterator_construct(class
> > > > > pdalboost::filesystem3::directory_iterator &,class pdalboost::filesystem3::path const &,class pdalboost::system::error_code
> *)"
> > > > > (?directory_iterator_construct@detail@filesystem3@pdalboost@@YAXAA
> > > > > Vd irectory_iterator@23@ABVpath@23@PAVerror_code
> > > > > @system@3@@Z) referenced in function "public: __thiscall
> > > > > pdalboost::filesystem3::directory_iterator::directory_iterator(cla
> > > > > ss pdalboost::filesystem3::path const &)"
> > > > > (??0directory_iterator@filesystem3@pdalboost@@QAE@ABVpath@12@@Z)
> > > > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > > > Error       24      error LNK2019: unresolved external symbol "void __cdecl
> > > > > pdalboost::filesystem3::detail::directory_iterator_increment(class
> > > > > pdalboost::filesystem3::directory_iterator &,class pdalboost::system::error_code *)"
> > > > >
> > > > (?directory_iterator_increment@detail@filesystem3@pdalboost@@YAXAAVd
> > > > ir ectory_iterator@23@PAVerror_code@system@3@
> > > > > @Z) referenced in function "private: void __thiscall pdalboost::filesystem3::directory_iterator::increment(void)"
> > > > > (?increment@directory_iterator@filesystem3@pdalboost@@AAEXXZ)       D:\dev\pdal\src\StageFactory.obj        pdal
> > > > > Error       25      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall
> > > > > pdalboost::filesystem3::path::begin(void)const "
> > > > > (?begin@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ)
> > > > > referenced in function "bool __cdecl
> > > > > pdalboost::filesystem3::operator<(class
> > > > > pdalboost::filesystem3::path const &,class
> > > pdalboost::filesystem3::path const &)"
> > > (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)
> > > > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > > > Error       26      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path::iterator __thiscall
> > > > > pdalboost::filesystem3::path::end(void)const "
> > > > > (?end@path@filesystem3@pdalboost@@QBE?AViterator@123@XZ)
> > > > > referenced in function "bool __cdecl
> > > > > pdalboost::filesystem3::operator<(class
> > > > > pdalboost::filesystem3::path const &,class
> > > pdalboost::filesystem3::path const &)"
> > > (??Mfilesystem3@pdalboost@@YA_NABVpath@01@0@Z)
> > > > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > > > Error       27      error LNK2019: unresolved external symbol "private: static void __cdecl
> > > > > pdalboost::filesystem3::path::m_path_iterator_increment(class pdalboost::filesystem3::path::iterator &)"
> > > > > (?m_path_iterator_increment@path@filesystem3@pdalboost@@CAXAAViter
> > > > > at
> > > > > or@123@@Z) referenced in function "private: void __thiscall pdalboost::filesystem3::path::iterator::increment(void)"
> > > > (?increment@iterator@path@filesystem3@pdalboost@@AAEXXZ)
> > > > >     D:\dev\pdal\src\StageFactory.obj        pdal
> > > > > Error       28      error LNK2019: unresolved external symbol "class pdalboost::system::error_code __cdecl
> > > > > pdalboost::filesystem3::detail::dir_itr_close(void * &)"
> > > > > (?dir_itr_close@detail@filesystem3@pdalboost@@YA?AVerror_code@system@3@AAPAX@Z) referenced in function
> "public:
> > > > > __thiscall pdalboost::filesystem3::detail::dir_itr_imp::~dir_itr_imp(void)"
> > > > > (??1dir_itr_imp@detail@filesystem3@pdalboost@@QAE@XZ)       D:\dev\pdal\src\StageFactory.obj        pdal
> > > > > Error       29      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > > > > pdalboost::filesystem3::detail::unique_path(class pdalboost::filesystem3::path const &,class pdalboost::system::error_code
> *)"
> > > > > (?unique_path@detail@filesystem3@pdalboost@@YA?AVpath@23@ABV423@PA
> > > > > Ve
> > > > > rror_code@system@3@@Z) referenced in function "class
> > > > > pdalboost::filesystem3::path __cdecl
> > > > > pdalboost::filesystem3::unique_path(class
> > > > > pdalboost::filesystem3::path const
> > > > &)"
> > > > > (?unique_path@filesystem3@pdalboost@@YA?AVpath@12@ABV312@@Z)        D:\dev\pdal\src\Utils.obj       pdal
> > > > > Error       30      error LNK2019: unresolved external symbol "public: class pdalboost::filesystem3::path & __thiscall
> > > > > pdalboost::filesystem3::path::operator/=(class pdalboost::filesystem3::path const &)"
> > > > > (??_0path@filesystem3@pdalboost@@QAEAAV012@ABV012@@Z) referenced
> > > > > in function "class pdalboost::filesystem3::path __cdecl
> > > > > pdalboost::filesystem3::operator/(class
> > > > > pdalboost::filesystem3::path const
> > > &,class pdalboost::filesystem3::path const &)"
> > > > > (??Kfilesystem3@pdalboost@@YA?AVpath@01@ABV201@0@Z) D:\dev\pdal\src\Utils.obj       pdal
> > > > > Error       31      error LNK2019: unresolved external symbol "class pdalboost::filesystem3::path __cdecl
> > > > > pdalboost::filesystem3::detail::temp_directory_path(class pdalboost::system::error_code *)"
> > > > > (?temp_directory_path@detail@filesystem3@pdalboost@@YA?AVpath@23@P
> > > > > AV
> > > > > error_code@system@3@@Z) referenced in function "class
> > > > > pdalboost::filesystem3::path __cdecl
> > > > >
> pdalboost::filesystem3::temp_directory_path(void)"(?temp_directory_path@filesystem3@pdalboost@@YA?AVpath@12@XZ)
> > > > >     D:\dev\pdal\src\Utils.obj       pdal
> > > > > Error       32      error LNK1120: 25 unresolved externals  D:\dev\pdal\bin\Debug\pdal.dll  pdal
> > > > > Error       33      error MSB6006: "link.exe" exited with code 1.   C:\Program Files
> > > > > (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp.Win32.Targets        275     6       pcpipeline
> > >
> > > _______________________________________________
> > > pdal mailing list
> > > pdal@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/pdal
> >
> > _______________________________________________
> > pdal mailing list
> > pdal@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/pdal

From mpg at flaxen.com  Fri Mar  2 14:01:23 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Fri Mar  2 14:01:51 2012
Subject: [pdal] unit test linkage
Message-ID: <004e01ccf8a6$dcee8320$96cb8960$@flaxen.com>

I think I see the problem-

pdaltest.exe contains main(), via an include from the boost unit test world.  main() references a boost function, unit_test_main(), which is contained in pdalboost.lib, which is no longer visible from / accessible by pdaltest.exe, due to the funky linkage constraints we now have.

Specifically, pdal.dll exports some pdal things, but not the underlying boost test functions.

Not yet sure how to fix this.  I can pull some code from boost test out into pdaltest.exe's source tree, but that just pushes the problem one level deeper.

I tried making an fakemain() inside pdal.dll, which calls the boost test code, and which is properly exported out to pdaltest.exe's world, but it still didn't link for some reason.

Will keep banging head against keyboard until it works.

-mpg


From kmckelvey at lizardtech.com  Fri Mar  2 14:29:26 2012
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Fri Mar  2 14:29:40 2012
Subject: [pdal] unit test linkage
In-Reply-To: <004e01ccf8a6$dcee8320$96cb8960$@flaxen.com>
References: <004e01ccf8a6$dcee8320$96cb8960$@flaxen.com>
Message-ID: <C55473998E248B4DAEC5342D698DFE8501293E179E@sea-srv-mail.lizardtech.com>

All I can say is you are on the right track.  I've encountered similar errors before and thought I resolved them by defining BOOST_TEST_DYN_LINK (or was it by UNdefining it?).  Note that whenever you change your mind you have to set this flag not just in the pdal_test compile, but also rebuild pdalboost so it is generating the right symbols.  But if that is not fixing it then it must be something deeper.

-----Original Message-----
From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P. Gerlek
Sent: vendredi 2 mars 2012 13:01
To: pdal@lists.osgeo.org
Subject: [pdal] unit test linkage

I think I see the problem-

pdaltest.exe contains main(), via an include from the boost unit test world.  main() references a boost function, unit_test_main(), which is contained in pdalboost.lib, which is no longer visible from / accessible by pdaltest.exe, due to the funky linkage constraints we now have.

Specifically, pdal.dll exports some pdal things, but not the underlying boost test functions.

Not yet sure how to fix this.  I can pull some code from boost test out into pdaltest.exe's source tree, but that just pushes the problem one level deeper.

I tried making an fakemain() inside pdal.dll, which calls the boost test code, and which is properly exported out to pdaltest.exe's world, but it still didn't link for some reason.

Will keep banging head against keyboard until it works.

-mpg


_______________________________________________
pdal mailing list
pdal@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/pdal
From mpg at flaxen.com  Fri Mar  2 14:40:46 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Fri Mar  2 14:41:35 2012
Subject: [pdal] unit test linkage
In-Reply-To: <C55473998E248B4DAEC5342D698DFE8501293E179E@sea-srv-mail.lizardtech.com>
References: <004e01ccf8a6$dcee8320$96cb8960$@flaxen.com>
	<C55473998E248B4DAEC5342D698DFE8501293E179E@sea-srv-mail.lizardtech.com>
Message-ID: <004f01ccf8ac$5e124220$1a36c660$@flaxen.com>

While it is clear I have no idea what I am doing, I think I've got it working.

Two other probs I've found:

I sometimes(?) get an warning saying main() is multiply defined when linking pdalboost.lib, due to unit_test_main.cpp and cpp_main.cpp, but it seems not to matter, since we're not using main() from that library anyway. Might be able to fix with judicious use of the BOOST_TEST_NO_MAIN macro.

There is also a serious problem that the boost lib is compiled "in parallel" with the pdal sources themselves -- when in fact src depends on boost lib -- so there is a time-dependent linkage error. We have now:

	./CMakeLists.txt:
		add_subdirectory(boost)
		add_subdirectory(src

but, conceptually at least, we want it more like

	./CMakeLists.txt:
		add_subdirectory(src
	./src/CMakeLists.txt:
		add_subdirectory(boost)

-mpg


> -----Original Message-----
> From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> Sent: Friday, March 02, 2012 11:29 AM
> To: pdal@lists.osgeo.org
> Subject: RE: [pdal] unit test linkage
> 
> All I can say is you are on the right track.  I've encountered similar errors before and thought I resolved them by defining
> BOOST_TEST_DYN_LINK (or was it by UNdefining it?).  Note that whenever you change your mind you have to set this flag not just in
> the pdal_test compile, but also rebuild pdalboost so it is generating the right symbols.  But if that is not fixing it then it must be
> something deeper.
> 
> -----Original Message-----
> From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P. Gerlek
> Sent: vendredi 2 mars 2012 13:01
> To: pdal@lists.osgeo.org
> Subject: [pdal] unit test linkage
> 
> I think I see the problem-
> 
> pdaltest.exe contains main(), via an include from the boost unit test world.  main() references a boost function, unit_test_main(),
> which is contained in pdalboost.lib, which is no longer visible from / accessible by pdaltest.exe, due to the funky linkage constraints we
> now have.
> 
> Specifically, pdal.dll exports some pdal things, but not the underlying boost test functions.
> 
> Not yet sure how to fix this.  I can pull some code from boost test out into pdaltest.exe's source tree, but that just pushes the
> problem one level deeper.
> 
> I tried making an fakemain() inside pdal.dll, which calls the boost test code, and which is properly exported out to pdaltest.exe's
> world, but it still didn't link for some reason.
> 
> Will keep banging head against keyboard until it works.
> 
> -mpg
> 
> 
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal

From hobu.inc at gmail.com  Tue Mar  6 14:48:24 2012
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Mar  6 14:49:11 2012
Subject: [pdal] The problem of multiple, same-named dimensions
Message-ID: <A3B73545-82E8-42B6-9CBB-F76B0FE04478@gmail.com>

All,

After I removed the explicit, enumeration-based Dimension::Id, it is now possible to have a pdal::Schema with multiple same-named dimensions on them. This is commonly needed for something like pdal::filter::Scaling that simply takes the dimension and adjusts the scaling of the data within it. The problem, however, comes when you want to ask the schema to give you one of those same-named dimensions -- there's now two or three of them with the same name, which one do you want?

The pipeline approach models things as a "before" and "after" with respect to stages, and for derivative dimensions of the same name, there's essentially a before and after picture too. Imagine a end point LAS writer asking for the "X" dimension that has come through a pipeline that has produced it, and applied a scaling filter to it. There will now be two X dimensions in the schema of the PointBuffer that the LAS writer sees -- drivers.las.X and filters.scaling.X.  With the new ability, the scaling filter can now say filters.scaling.x.setParent(drivers.las.X);  When Schema::getDimension("X") is called, it now respects these relationships and gives you the ending child (filters.scaling.X) by default.  You will of course be able to explicitly as for Schema::getDimension("X", "drivers.las.X") too, but this approach means that the end stage doesn't have to worry about intermediate changes -- it only needs to care about an "X" dimension.

An implementation has been pushed to master to implement this approach.  I'm looking for feedback or gotchas that people might see with it.

Thanks,

Howard




From mpg at flaxen.com  Thu Mar  8 13:24:44 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Thu Mar  8 13:25:37 2012
Subject: [pdal] Windows works
Message-ID: <022301ccfd58$bd0cbde0$372639a0$@flaxen.com>

We're up and running again!

I've resolved the various remaining bits of fallout from the embedded boost work, made some updates to the build instructions, and updated a couple unit tests so that we now build and run cleanly now on Windows (158 tests passing).

The "supported" Windows build configuration is that of the "Basic Build Steps" instructions at http://www.pointcloud.org/building/windows.html. This build uses an unmodified config.bat file, OSGeo4W's gdal-dev and laszip, cmake 2.8.7, and embedded boost (natch).

-mpg


From kmckelvey at lizardtech.com  Thu Mar  8 13:27:29 2012
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Thu Mar  8 13:28:38 2012
Subject: [pdal] Windows works
In-Reply-To: <022301ccfd58$bd0cbde0$372639a0$@flaxen.com>
References: <022301ccfd58$bd0cbde0$372639a0$@flaxen.com>
Message-ID: <C55473998E248B4DAEC5342D698DFE8501293E19EC@sea-srv-mail.lizardtech.com>

Nice!  Thanks for getting that working mpg - it was quite a convoluted knot to me.

-----Original Message-----
From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P. Gerlek
Sent: jeudi 8 mars 2012 12:25
To: pdal@lists.osgeo.org
Subject: [pdal] Windows works

We're up and running again!

I've resolved the various remaining bits of fallout from the embedded boost work, made some updates to the build instructions, and updated a couple unit tests so that we now build and run cleanly now on Windows (158 tests passing).

The "supported" Windows build configuration is that of the "Basic Build Steps" instructions at http://www.pointcloud.org/building/windows.html. This build uses an unmodified config.bat file, OSGeo4W's gdal-dev and laszip, cmake 2.8.7, and embedded boost (natch).

-mpg


_______________________________________________
pdal mailing list
pdal@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/pdal
From mpg at flaxen.com  Thu Mar  8 13:28:31 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Thu Mar  8 13:29:34 2012
Subject: [pdal] RE: Windows works
In-Reply-To: <022301ccfd58$bd0cbde0$372639a0$@flaxen.com>
References: <022301ccfd58$bd0cbde0$372639a0$@flaxen.com>
Message-ID: <022401ccfd59$4413b280$cc3b1780$@flaxen.com>

(The C# bindings and the pcview app are not yet working, however, as they've not been ported to the new Dimension stuff.)

-mpg


> -----Original Message-----
> From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> Sent: Thursday, March 08, 2012 10:25 AM
> To: pdal@lists.osgeo.org
> Subject: Windows works
> 
> We're up and running again!
> 
> I've resolved the various remaining bits of fallout from the embedded boost work, made some updates to the build instructions, and
> updated a couple unit tests so that we now build and run cleanly now on Windows (158 tests passing).
> 
> The "supported" Windows build configuration is that of the "Basic Build Steps" instructions at
> http://www.pointcloud.org/building/windows.html. This build uses an unmodified config.bat file, OSGeo4W's gdal-dev and laszip,
> cmake 2.8.7, and embedded boost (natch).
> 
> -mpg


From mpg at flaxen.com  Thu Mar  8 13:44:50 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Thu Mar  8 13:45:11 2012
Subject: [pdal] Windows works
In-Reply-To: <C55473998E248B4DAEC5342D698DFE8501293E19EC@sea-srv-mail.lizardtech.com>
References: <022301ccfd58$bd0cbde0$372639a0$@flaxen.com>
	<C55473998E248B4DAEC5342D698DFE8501293E19EC@sea-srv-mail.lizardtech.com>
Message-ID: <022501ccfd5b$8c3cd530$a4b67f90$@flaxen.com>

I spoke too soon -- I did a clean build on another machine, and it failed.

Stay tuned...

-mpg


> -----Original Message-----
> From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> Sent: Thursday, March 08, 2012 10:27 AM
> To: pdal@lists.osgeo.org
> Subject: RE: [pdal] Windows works
> 
> Nice!  Thanks for getting that working mpg - it was quite a convoluted knot to me.
> 
> -----Original Message-----
> From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P. Gerlek
> Sent: jeudi 8 mars 2012 12:25
> To: pdal@lists.osgeo.org
> Subject: [pdal] Windows works
> 
> We're up and running again!
> 
> I've resolved the various remaining bits of fallout from the embedded boost work, made some updates to the build instructions, and
> updated a couple unit tests so that we now build and run cleanly now on Windows (158 tests passing).
> 
> The "supported" Windows build configuration is that of the "Basic Build Steps" instructions at
> http://www.pointcloud.org/building/windows.html. This build uses an unmodified config.bat file, OSGeo4W's gdal-dev and laszip,
> cmake 2.8.7, and embedded boost (natch).
> 
> -mpg
> 
> 
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal

From mpg at flaxen.com  Thu Mar  8 14:15:11 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Thu Mar  8 14:15:28 2012
Subject: [pdal] Windows works
In-Reply-To: <022501ccfd5b$8c3cd530$a4b67f90$@flaxen.com>
References: <022301ccfd58$bd0cbde0$372639a0$@flaxen.com>
	<C55473998E248B4DAEC5342D698DFE8501293E19EC@sea-srv-mail.lizardtech.com>
	<022501ccfd5b$8c3cd530$a4b67f90$@flaxen.com>
Message-ID: <023101ccfd5f$c947fb40$5bd7f1c0$@flaxen.com>

Yup, there's a laszip versioning issue or something going on...

-mpg


> -----Original Message-----
> From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> Sent: Thursday, March 08, 2012 10:45 AM
> To: 'Kirk McKelvey'; pdal@lists.osgeo.org
> Subject: RE: [pdal] Windows works
> 
> I spoke too soon -- I did a clean build on another machine, and it failed.
> 
> Stay tuned...
> 
> -mpg
> 
> 
> > -----Original Message-----
> > From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
> > Sent: Thursday, March 08, 2012 10:27 AM
> > To: pdal@lists.osgeo.org
> > Subject: RE: [pdal] Windows works
> >
> > Nice!  Thanks for getting that working mpg - it was quite a convoluted knot to me.
> >
> > -----Original Message-----
> > From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P. Gerlek
> > Sent: jeudi 8 mars 2012 12:25
> > To: pdal@lists.osgeo.org
> > Subject: [pdal] Windows works
> >
> > We're up and running again!
> >
> > I've resolved the various remaining bits of fallout from the embedded boost work, made some updates to the build instructions, and
> > updated a couple unit tests so that we now build and run cleanly now on Windows (158 tests passing).
> >
> > The "supported" Windows build configuration is that of the "Basic Build Steps" instructions at
> > http://www.pointcloud.org/building/windows.html. This build uses an unmodified config.bat file, OSGeo4W's gdal-dev and laszip,
> > cmake 2.8.7, and embedded boost (natch).
> >
> > -mpg
> >
> >
> > _______________________________________________
> > pdal mailing list
> > pdal@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/pdal
> > _______________________________________________
> > pdal mailing list
> > pdal@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/pdal

From edgar.ellis at caris.com  Thu Mar  8 14:32:46 2012
From: edgar.ellis at caris.com (Edgar Ellis)
Date: Thu Mar  8 15:01:16 2012
Subject: [pdal] Windows works
In-Reply-To: <023101ccfd5f$c947fb40$5bd7f1c0$@flaxen.com>
References: <022301ccfd58$bd0cbde0$372639a0$@flaxen.com>
	<C55473998E248B4DAEC5342D698DFE8501293E19EC@sea-srv-mail.lizardtech.com>
	<022501ccfd5b$8c3cd530$a4b67f90$@flaxen.com>
	<023101ccfd5f$c947fb40$5bd7f1c0$@flaxen.com>
Message-ID: <4F59095E.2040200@caris.com>

Are you using vc10 with laszip from OSGeo4W? I believe OSGeo4W is built 
with vc9.

If so it may be related to mixing c++ libs built with different versions 
of visual studio.

- Edgar

On 08/03/2012 3:15 PM, Michael P. Gerlek wrote:
> Yup, there's a laszip versioning issue or something going on...
>
> -mpg
>
>
>> -----Original Message-----
>> From: Michael P. Gerlek [mailto:mpg@flaxen.com]
>> Sent: Thursday, March 08, 2012 10:45 AM
>> To: 'Kirk McKelvey'; pdal@lists.osgeo.org
>> Subject: RE: [pdal] Windows works
>>
>> I spoke too soon -- I did a clean build on another machine, and it failed.
>>
>> Stay tuned...
>>
>> -mpg
>>
>>
>>> -----Original Message-----
>>> From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
>>> Sent: Thursday, March 08, 2012 10:27 AM
>>> To: pdal@lists.osgeo.org
>>> Subject: RE: [pdal] Windows works
>>>
>>> Nice!  Thanks for getting that working mpg - it was quite a convoluted knot to me.
>>>
>>> -----Original Message-----
>>> From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P. Gerlek
>>> Sent: jeudi 8 mars 2012 12:25
>>> To: pdal@lists.osgeo.org
>>> Subject: [pdal] Windows works
>>>
>>> We're up and running again!
>>>
>>> I've resolved the various remaining bits of fallout from the embedded boost work, made some updates to the build instructions, and
>>> updated a couple unit tests so that we now build and run cleanly now on Windows (158 tests passing).
>>>
>>> The "supported" Windows build configuration is that of the "Basic Build Steps" instructions at
>>> http://www.pointcloud.org/building/windows.html. This build uses an unmodified config.bat file, OSGeo4W's gdal-dev and laszip,
>>> cmake 2.8.7, and embedded boost (natch).
>>>
>>> -mpg
>>>
>>>
>>> _______________________________________________
>>> pdal mailing list
>>> pdal@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/pdal
>>> _______________________________________________
>>> pdal mailing list
>>> pdal@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/pdal
>
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
From mpg at flaxen.com  Thu Mar  8 15:23:09 2012
From: mpg at flaxen.com (Michael Gerlek)
Date: Thu Mar  8 15:23:49 2012
Subject: [pdal] Windows works
In-Reply-To: <4F59095E.2040200@caris.com>
References: <022301ccfd58$bd0cbde0$372639a0$@flaxen.com>
	<C55473998E248B4DAEC5342D698DFE8501293E19EC@sea-srv-mail.lizardtech.com>
	<022501ccfd5b$8c3cd530$a4b67f90$@flaxen.com>
	<023101ccfd5f$c947fb40$5bd7f1c0$@flaxen.com>
	<4F59095E.2040200@caris.com>
Message-ID: <-7495518802932647835@unknownmsgid>

Yes, I'm using vs2010...

But, all the other osgeo4w stuff (gdal, proj) work okay, so it must be
something particular to the laszip build configuration.

.mpg

On Mar 8, 2012, at 12:01 PM, Edgar Ellis <edgar.ellis@caris.com> wrote:

> Are you using vc10 with laszip from OSGeo4W? I believe OSGeo4W is built with vc9.
>
> If so it may be related to mixing c++ libs built with different versions of visual studio.
>
> - Edgar
>
> On 08/03/2012 3:15 PM, Michael P. Gerlek wrote:
>> Yup, there's a laszip versioning issue or something going on...
>>
>> -mpg
>>
>>
>>> -----Original Message-----
>>> From: Michael P. Gerlek [mailto:mpg@flaxen.com]
>>> Sent: Thursday, March 08, 2012 10:45 AM
>>> To: 'Kirk McKelvey'; pdal@lists.osgeo.org
>>> Subject: RE: [pdal] Windows works
>>>
>>> I spoke too soon -- I did a clean build on another machine, and it failed.
>>>
>>> Stay tuned...
>>>
>>> -mpg
>>>
>>>
>>>> -----Original Message-----
>>>> From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
>>>> Sent: Thursday, March 08, 2012 10:27 AM
>>>> To: pdal@lists.osgeo.org
>>>> Subject: RE: [pdal] Windows works
>>>>
>>>> Nice!  Thanks for getting that working mpg - it was quite a convoluted knot to me.
>>>>
>>>> -----Original Message-----
>>>> From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P. Gerlek
>>>> Sent: jeudi 8 mars 2012 12:25
>>>> To: pdal@lists.osgeo.org
>>>> Subject: [pdal] Windows works
>>>>
>>>> We're up and running again!
>>>>
>>>> I've resolved the various remaining bits of fallout from the embedded boost work, made some updates to the build instructions, and
>>>> updated a couple unit tests so that we now build and run cleanly now on Windows (158 tests passing).
>>>>
>>>> The "supported" Windows build configuration is that of the "Basic Build Steps" instructions at
>>>> http://www.pointcloud.org/building/windows.html. This build uses an unmodified config.bat file, OSGeo4W's gdal-dev and laszip,
>>>> cmake 2.8.7, and embedded boost (natch).
>>>>
>>>> -mpg
>>>>
>>>>
>>>> _______________________________________________
>>>> pdal mailing list
>>>> pdal@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/pdal
>>>> _______________________________________________
>>>> pdal mailing list
>>>> pdal@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/pdal
>>
>> _______________________________________________
>> pdal mailing list
>> pdal@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/pdal
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
From edgar.ellis at caris.com  Thu Mar  8 15:50:27 2012
From: edgar.ellis at caris.com (Edgar Ellis)
Date: Thu Mar  8 15:50:51 2012
Subject: [pdal] Windows works
In-Reply-To: <-7495518802932647835@unknownmsgid>
References: <022301ccfd58$bd0cbde0$372639a0$@flaxen.com>
	<C55473998E248B4DAEC5342D698DFE8501293E19EC@sea-srv-mail.lizardtech.com>
	<022501ccfd5b$8c3cd530$a4b67f90$@flaxen.com>
	<023101ccfd5f$c947fb40$5bd7f1c0$@flaxen.com>
	<4F59095E.2040200@caris.com> <-7495518802932647835@unknownmsgid>
Message-ID: <4F591B93.3080504@caris.com>

Good point. I'm not sure what the rules are, and indeed osgeo4w is 
mixing various msvc CRTs. I've always figured it's bound to break 
something and avoided mixing any.

Note that laszip uses iostreams across dll boundaries. GDAL does not use 
any stl in public interfaces.

- Edgar

On 08/03/2012 4:23 PM, Michael Gerlek wrote:
> Yes, I'm using vs2010...
>
> But, all the other osgeo4w stuff (gdal, proj) work okay, so it must be
> something particular to the laszip build configuration.
>
> .mpg
>
> On Mar 8, 2012, at 12:01 PM, Edgar Ellis<edgar.ellis@caris.com>  wrote:
>
>> Are you using vc10 with laszip from OSGeo4W? I believe OSGeo4W is built with vc9.
>>
>> If so it may be related to mixing c++ libs built with different versions of visual studio.
>>
>> - Edgar
>>
>> On 08/03/2012 3:15 PM, Michael P. Gerlek wrote:
>>> Yup, there's a laszip versioning issue or something going on...
>>>
>>> -mpg
>>>
>>>
>>>> -----Original Message-----
>>>> From: Michael P. Gerlek [mailto:mpg@flaxen.com]
>>>> Sent: Thursday, March 08, 2012 10:45 AM
>>>> To: 'Kirk McKelvey'; pdal@lists.osgeo.org
>>>> Subject: RE: [pdal] Windows works
>>>>
>>>> I spoke too soon -- I did a clean build on another machine, and it failed.
>>>>
>>>> Stay tuned...
>>>>
>>>> -mpg
>>>>
>>>>
>>>>> -----Original Message-----
>>>>> From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
>>>>> Sent: Thursday, March 08, 2012 10:27 AM
>>>>> To: pdal@lists.osgeo.org
>>>>> Subject: RE: [pdal] Windows works
>>>>>
>>>>> Nice!  Thanks for getting that working mpg - it was quite a convoluted knot to me.
>>>>>
>>>>> -----Original Message-----
>>>>> From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Michael P. Gerlek
>>>>> Sent: jeudi 8 mars 2012 12:25
>>>>> To: pdal@lists.osgeo.org
>>>>> Subject: [pdal] Windows works
>>>>>
>>>>> We're up and running again!
>>>>>
>>>>> I've resolved the various remaining bits of fallout from the embedded boost work, made some updates to the build instructions, and
>>>>> updated a couple unit tests so that we now build and run cleanly now on Windows (158 tests passing).
>>>>>
>>>>> The "supported" Windows build configuration is that of the "Basic Build Steps" instructions at
>>>>> http://www.pointcloud.org/building/windows.html. This build uses an unmodified config.bat file, OSGeo4W's gdal-dev and laszip,
>>>>> cmake 2.8.7, and embedded boost (natch).
>>>>>
>>>>> -mpg
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> pdal mailing list
>>>>> pdal@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/pdal
>>>>> _______________________________________________
>>>>> pdal mailing list
>>>>> pdal@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/pdal
>>>
>>> _______________________________________________
>>> pdal mailing list
>>> pdal@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/pdal
>> _______________________________________________
>> pdal mailing list
>> pdal@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/pdal
From mpg at flaxen.com  Thu Mar  8 17:44:23 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Thu Mar  8 17:45:13 2012
Subject: [pdal] Windows works
In-Reply-To: <4F591B93.3080504@caris.com>
References: <022301ccfd58$bd0cbde0$372639a0$@flaxen.com>	<C55473998E248B4DAEC5342D698DFE8501293E19EC@sea-srv-mail.lizardtech.com>	<022501ccfd5b$8c3cd530$a4b67f90$@flaxen.com>	<023101ccfd5f$c947fb40$5bd7f1c0$@flaxen.com>	<4F59095E.2040200@caris.com>
	<-7495518802932647835@unknownmsgid> <4F591B93.3080504@caris.com>
Message-ID: <027201ccfd7d$02edf3f0$08c9dbd0$@flaxen.com>

> Note that laszip uses iostreams across dll boundaries. GDAL does not use
> any stl in public interfaces.

Ouch -- I've been bitten by this many times in the past, I should have thought of it when Martin & I did the laszip interface.  I'm willing to believe that's exactly the problem.

Rats.

That means PDAL windows developers can't just rely on OSGeo4W, unless maybe we can somehow get a VS2010 build into the osgeo4w bundle?

-mpg


From mpg at flaxen.com  Fri Mar  9 11:32:59 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Fri Mar  9 11:33:36 2012
Subject: [pdal] Windows works
In-Reply-To: <027201ccfd7d$02edf3f0$08c9dbd0$@flaxen.com>
References: <022301ccfd58$bd0cbde0$372639a0$@flaxen.com>	<C55473998E248B4DAEC5342D698DFE8501293E19EC@sea-srv-mail.lizardtech.com>	<022501ccfd5b$8c3cd530$a4b67f90$@flaxen.com>	<023101ccfd5f$c947fb40$5bd7f1c0$@flaxen.com>	<4F59095E.2040200@caris.com>
	<-7495518802932647835@unknownmsgid> <4F591B93.3080504@caris.com>
	<027201ccfd7d$02edf3f0$08c9dbd0$@flaxen.com>
Message-ID: <02bb01ccfe12$4ac80270$e0580750$@flaxen.com>

As a stop-gap, I've added a "Step 0" to the windows build instructions to indicate you'll need to build laszip manually (instead of relying on the osgeo4w distribution).

-mpg


From mpg at flaxen.com  Tue Mar 13 21:39:44 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Tue Mar 13 21:39:53 2012
Subject: [pdal] PLang status
Message-ID: <018d01cd0183$55ec1050$01c430f0$@flaxen.com>

Those of you playing along at home will have noticed that the PLang support is being finished at last.  The status is this:

* The PLang system allows you to write scripts that get executed at run time inside a filter, so you can "trivially" write a complex, field-dependent filter operation.

* We are now calling embedded Python as opposed to the hand-rolled Qi parser originally planned.  While writing the AST code was fun, the Qi parser was truly a horrific experience and not at all maintainable by the casual developer.  Python, on the other hand, rocks.

* You need to cmake with -DWITH_PYTHON=on.  (Howard, can you pls ask Jenkins to do his builds this way, if he's not already?)  You need to have python (probably 2.7) and numpy installed.

* There are good unit tests for the embedded python interpreter mechanism (PythonTests) and for the two derived filters (ProgrammableFilterTests and PredicateTests).  The tests are all passing and are leak-free right now.

* I still need to clean up more stuff, so it's not ready for general testing/using yet.  Probably tomorrow, if all goes well.

* I plan to add support for adding a script to the PipelineXML system.

* I will publish guidelines for writing the scripts, but the basic rules are these:

- you need to import numpy, and treat the fields as numpy arrays
- the function expects two dictionaries passed in, "ins" and "outs", which contain the fields being passed in and returned
- we use numpy so that each call to the script function processes a bunch of points at a time (a PointBuffer's worth) and so the execution can be way fast
- if you define a bool numpy array "Result" and add it to the "outs" dictionary, it is treated as mask; elements of the Results array that are false will not have that point copied to the output PointBuffer
- the script function should return a bool; if nontrue, it will be treated as an error condition and the system will halt and catch fire
- the ins/outs dictionary only uses the "simple" name of the Dimension; if we wanted to add scoped names, it's trivial

Here is an example script that takes in the X,Y,Z fields and sets the X values to increment by 10 and sets the Z values to always be 22/7.

       import numpy as np
       def yow(ins,outs):
         X = ins['X']
         Y = ins['Y']
         Z = ins['Z']
         #print ins['X']
         X = X + 10.0
         # Y: leave as-is, don't export back out
         # Z: goofiness to make it a numpy array of a constant
         Z = np.zeros(X.size) + 3.14
         outs['X'] = X
         #print outs['X']\
         outs['Z'] = Z
         return True

Note the ability to put comments and printfs in the script.

Here is a script which acts as a predicate, keeping only the points whose Y field is greater than 1.0:

        import numpy as np
        def yow(ins,outs):
          Y = ins['Y']
          Result = np.greater(Y, 1.0)
          #print Result
          outs['Result'] = Result
          return True

We may evolve this over time to get away from the icky ins/outs convention, but I'd like to let the code settle out for a while first and see how it goes.
 
Your considered opinions and kind thoughts would be most welcome.

_mpg


From hobu.inc at gmail.com  Wed Mar 14 09:09:58 2012
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Mar 14 09:10:14 2012
Subject: [pdal] PLang status
In-Reply-To: <018d01cd0183$55ec1050$01c430f0$@flaxen.com>
References: <018d01cd0183$55ec1050$01c430f0$@flaxen.com>
Message-ID: <5E6AFBF0-350F-4B1A-B0A2-AA0442D554FC@gmail.com>


On Mar 13, 2012, at 8:39 PM, Michael P. Gerlek wrote:

> Those of you playing along at home will have noticed that the PLang support is being finished at last.  The status is this:

w00t!

> * The PLang system allows you to write scripts that get executed at run time inside a filter, so you can "trivially" write a complex, field-dependent filter operation.
> 
> * We are now calling embedded Python as opposed to the hand-rolled Qi parser originally planned.  While writing the AST code was fun, the Qi parser was truly a horrific experience and not at all maintainable by the casual developer.  Python, on the other hand, rocks.
> 
> * You need to cmake with -DWITH_PYTHON=on.  (Howard, can you pls ask Jenkins to do his builds this way, if he's not already?)  You need to have python (probably 2.7) and numpy installed.

Done.  CMake config to find NumPy also added. I will update the configuration to complain if Python is found but the NumPy headers are not.

> 
> * There are good unit tests for the embedded python interpreter mechanism (PythonTests) and for the two derived filters (ProgrammableFilterTests and PredicateTests).  The tests are all passing and are leak-free right now.
> 
> * I still need to clean up more stuff, so it's not ready for general testing/using yet.  Probably tomorrow, if all goes well.
> 
> * I plan to add support for adding a script to the PipelineXML system.

Being able to reference external .py files would be helpful here too, especially since Python's syntax is whitespace sensitive and XML is not without CDATA entries.  

> 
> * I will publish guidelines for writing the scripts, but the basic rules are these:
> 
> - you need to import numpy, and treat the fields as numpy arrays
> - the function expects two dictionaries passed in, "ins" and "outs", which contain the fields being passed in and returned
> - we use numpy so that each call to the script function processes a bunch of points at a time (a PointBuffer's worth) and so the execution can be way fast
> - if you define a bool numpy array "Result" and add it to the "outs" dictionary, it is treated as mask; elements of the Results array that are false will not have that point copied to the output PointBuffer
> - the script function should return a bool; if nontrue, it will be treated as an error condition and the system will halt and catch fire
> - the ins/outs dictionary only uses the "simple" name of the Dimension; if we wanted to add scoped names, it's trivial

We will definitely need scoped names. The rules for for fetching Dimension names from Schema are:

- Search for the simple name
  * If more than one dimension with the same simple name is found, check from parent-child relationships of the dimensions of the same name, and negotiate them until the final child dimension is found -- return that if only one child is found
- If no simple name is found, try making a UUID out of the search string and searching for a dimension with it. If found return it.

I'm going to be adding aliases to this too. You're going to be able to set an alias on the X dimension to be 'x' or 'longitude' and Schema::getDimension is going to do the right thing when finding it.  The rules for multiple dimensions of the same alias will apply as above.

Is ins['X'] an array of dereferencable numpy pointers to the X dimension for the PointBuffer, or are data copied?  

Is ins a reference and outs a copy?

> Note the ability to put comments and printfs in the script.

What happens is pure eval()'d Python, right? I would expect that any valid Python script for your environment should be good.

From mpg at flaxen.com  Wed Mar 14 12:23:48 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Wed Mar 14 12:24:52 2012
Subject: [pdal] PLang status
In-Reply-To: <5E6AFBF0-350F-4B1A-B0A2-AA0442D554FC@gmail.com>
References: <018d01cd0183$55ec1050$01c430f0$@flaxen.com>
	<5E6AFBF0-350F-4B1A-B0A2-AA0442D554FC@gmail.com>
Message-ID: <059901cd01fe$d6ee39f0$84caadd0$@flaxen.com>

> > I plan to add support for adding a script to the PipelineXML system.
> 
> Being able to reference external .py files would be helpful here too, especially since Python's syntax is whitespace sensitive and XML
> is not without CDATA entries.

Yes, my intent was to do it via a filename (probably path-relative to the dir containing the XML pipeline, I think that's our convention?).  I'm not cool enough to parse CDATA successfully.


> We will definitely need scoped names. The rules for for fetching Dimension names from Schema are:
> [...]

OK, will do.  It's really as simple as just adding another name to the dictionary...


> Is ins['X'] an array of dereferencable numpy pointers to the X dimension for the PointBuffer, or are data copied?
> Is ins a reference and outs a copy?

Yes, exactly:

Ins['X'] is a numpy array which points into the PointBuffer's bytes, so it is a free operation.

Outs['Y'] is a numpy array which is owned by Python, so each element Y[i] needs to be copied to the output PointBuffer, where ech Y[i] corresponds to one field of one point, and Y.size()==PointBuffer.getNumPoints(). The output has to be owned by Python, because in the worst case numpy makes array copies behind the scenes on us. I hope eventually to be able to figure out a way to make this process faster.


> > Note the ability to put comments and printfs in the script.
> What happens is pure eval()'d Python, right? I would expect that any valid Python script for your environment should be good.

Correct: we compile the script source into bytecode once, then execute it multiple times (once for each PointBuffer). I was just emphasizing the point that we have a completely open and arbitrary scripting engine now.


-mpg


From mpg at flaxen.com  Wed Mar 14 16:03:33 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Wed Mar 14 16:11:47 2012
Subject: [pdal] PLang feature
Message-ID: <05fb01cd021d$898c8fd0$9ca5af70$@flaxen.com>

Here's something neat and unexpected --

Putting a plang filter in your pipeline give you the ability to *inspect* the point data as it gets processed... makes for a very easy and flexible debugging hook!

-mpg


From michael.rosen at gmail.com  Mon Mar 19 20:58:39 2012
From: michael.rosen at gmail.com (Michael Rosen)
Date: Mon Mar 19 20:59:35 2012
Subject: [pdal] Fwd: [Boost C++ Libraries] #6535: MS VS 2010 compile failure
 using a droppable accumulator
In-Reply-To: <071.f960074d2f76a1b75c7361c3d4862ce2@lists.boost.org>
References: <056.496d4d4577b764fc83f4b9c15a9d09e2@lists.boost.org>
	<071.f960074d2f76a1b75c7361c3d4862ce2@lists.boost.org>
Message-ID: <CAAhorQkTt7Gn+PXms9g=ennuT8nCzAufjr7nKLMROTpdLAhiuA@mail.gmail.com>

FYI.  Recall this issue was uncovered at the recent code sprint.  We've
currently got a work-around in place... but the Boost Boys are on the job!

---------- Forwarded message ----------
From: Boost C++ Libraries <noreply@lists.boost.org>
Date: Mon, Mar 19, 2012 at 3:02 PM
Subject: Re: [Boost C++ Libraries] #6535: MS VS 2010 compile failure using
a droppable accumulator
To:
Cc: boost-bugs@lists.boost.org


#6535: MS VS 2010 compile failure using a droppable accumulator
--------------------------------------+-------------------------------------
 Reporter:  michael.rosen@?          |       Owner:  eric_niebler
     Type:  Bugs                     |      Status:  assigned
 Milestone:  To Be Determined         |   Component:  accumulator
  Version:  Boost 1.48.0             |    Severity:  Problem
Resolution:                           |    Keywords:
--------------------------------------+-------------------------------------
Changes (by eric_niebler):

 * status:  new => assigned


Comment:

 Confirmed. This is due to a compiler bug in msvc which allows ctor
 template to be used as copy constructors. The problem has been worked
 around on trunk (commit [77417]), and will be merged to release as soon as
 the tests cycle. Thanks.

--
Ticket URL: <https://svn.boost.org/trac/boost/ticket/6535#comment:1>
Boost C++ Libraries <http://www.boost.org/>
Boost provides free peer-reviewed portable C++ source libraries.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/pdal/attachments/20120319/4280dde4/attachment.html
From mpg at flaxen.com  Fri Mar 23 16:50:00 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Fri Mar 23 16:50:56 2012
Subject: [pdal] The problem of multiple, same-named dimensions
In-Reply-To: <A3B73545-82E8-42B6-9CBB-F76B0FE04478@gmail.com>
References: <A3B73545-82E8-42B6-9CBB-F76B0FE04478@gmail.com>
Message-ID: <01da01cd0936$8473d4c0$8d5b7e40$@flaxen.com>

(this has been sitting in my inbox for a while, sorry...)

The remaining problem is how to handle to multiple filters of the same name, e.g. if you have field "X" that goes through two filter.crop stages -- either because you do the crop twice for some reason in a linear pipeline, or because you have two crop filters sitting "behind" a multistage filter.

On IRC this morning I suggested this be handled by assigning DFS (depth-first search) numbers to each stage in the pipeline and somehow using them. Better, though, I also suggested we give add an Option to each Stage which allows the user to provide an explicit, custom stage name that he can refer to.

-mpg


> -----Original Message-----
> From: pdal-bounces@lists.osgeo.org [mailto:pdal-bounces@lists.osgeo.org] On Behalf Of Howard Butler
> Sent: Tuesday, March 06, 2012 11:48 AM
> To: pdal@lists.osgeo.org
> Subject: [pdal] The problem of multiple, same-named dimensions
> 
> All,
> 
> After I removed the explicit, enumeration-based Dimension::Id, it is now possible to have a pdal::Schema with multiple same-named
> dimensions on them. This is commonly needed for something like pdal::filter::Scaling that simply takes the dimension and adjusts the
> scaling of the data within it. The problem, however, comes when you want to ask the schema to give you one of those same-named
> dimensions -- there's now two or three of them with the same name, which one do you want?
> 
> The pipeline approach models things as a "before" and "after" with respect to stages, and for derivative dimensions of the same
> name, there's essentially a before and after picture too. Imagine a end point LAS writer asking for the "X" dimension that has come
> through a pipeline that has produced it, and applied a scaling filter to it. There will now be two X dimensions in the schema of the
> PointBuffer that the LAS writer sees -- drivers.las.X and filters.scaling.X.  With the new ability, the scaling filter can now say
> filters.scaling.x.setParent(drivers.las.X);  When Schema::getDimension("X") is called, it now respects these relationships and gives you
> the ending child (filters.scaling.X) by default.  You will of course be able to explicitly as for Schema::getDimension("X", "drivers.las.X")
> too, but this approach means that the end stage doesn't have to worry about intermediate changes -- it only needs to care about an
> "X" dimension.
> 
> An implementation has been pushed to master to implement this approach.  I'm looking for feedback or gotchas that people might
> see with it.
> 
> Thanks,
> 
> Howard
> 
> 
> 
> 
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal

From brad.chambers at gmail.com  Sat Mar 24 08:20:48 2012
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Sat Mar 24 08:21:32 2012
Subject: [pdal] PLang status
In-Reply-To: <018d01cd0183$55ec1050$01c430f0$@flaxen.com>
References: <Ac0BfuPMGASMXLh4R7Szaah+LPBdhw==>
	<018d01cd0183$55ec1050$01c430f0$@flaxen.com>
Message-ID: <CAJyqqPyiVmR5=cA2jCP54v3wOHLutmzrgQTHCFtH6+MPvpbvCw@mail.gmail.com>

>
> * You need to cmake with -DWITH_PYTHON=on.  (Howard, can you pls ask
> Jenkins to do his builds this way, if he's not already?)  You need to have
> python (probably 2.7) and numpy installed.
>

Is PLang intended to be an optional component? I'm not yet compiling with
python or numpy, so I get errors in PLang. This is pretty easy to work
around on my end, but probably not the intended behavior.

Brad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/pdal/attachments/20120324/d92cc8f9/attachment.html
From mpg at flaxen.com  Sat Mar 24 10:33:01 2012
From: mpg at flaxen.com (Michael Gerlek)
Date: Sat Mar 24 10:33:34 2012
Subject: [pdal] PLang status
In-Reply-To: <CAJyqqPyiVmR5=cA2jCP54v3wOHLutmzrgQTHCFtH6+MPvpbvCw@mail.gmail.com>
References: <Ac0BfuPMGASMXLh4R7Szaah+LPBdhw==>
	<018d01cd0183$55ec1050$01c430f0$@flaxen.com>
	<CAJyqqPyiVmR5=cA2jCP54v3wOHLutmzrgQTHCFtH6+MPvpbvCw@mail.gmail.com>
Message-ID: <-729583970077782236@unknownmsgid>

Yes, it should be optional - let me know what errors you get and I'll fix
them.

(Howard: can we have Jenkins build some different configs?)

.mpg

On Mar 24, 2012, at 5:20 AM, Bradley Chambers <brad.chambers@gmail.com>
wrote:

* You need to cmake with -DWITH_PYTHON=on.  (Howard, can you pls ask
> Jenkins to do his builds this way, if he's not already?)  You need to have
> python (probably 2.7) and numpy installed.
>

Is PLang intended to be an optional component? I'm not yet compiling with
python or numpy, so I get errors in PLang. This is pretty easy to work
around on my end, but probably not the intended behavior.

Brad

_______________________________________________
pdal mailing list
pdal@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/pdal/attachments/20120324/499799a2/attachment.html
From brad.chambers at gmail.com  Sat Mar 24 13:18:25 2012
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Sat Mar 24 13:18:35 2012
Subject: [pdal] PLang status
In-Reply-To: <-729583970077782236@unknownmsgid>
References: <018d01cd0183$55ec1050$01c430f0$@flaxen.com>
	<CAJyqqPyiVmR5=cA2jCP54v3wOHLutmzrgQTHCFtH6+MPvpbvCw@mail.gmail.com>
	<-729583970077782236@unknownmsgid>
Message-ID: <CAJyqqPw0Di+UhDJubw65QRmETZzK1WBkBrcN5SxH2t4grPKXDw@mail.gmail.com>

I believe it all stems from m_plangEnvironment, which is hiding behind
#ifdef PDAL_HAVE_PYTHON in Environment.hpp, but is still referenced
elsewhere without similar checks for the presence of python.

[ 29%] Building CXX object src/CMakeFiles/pdal.dir/Environment.cpp.o
/Users/bchambers/Documents/dev/PDAL/src/Environment.cpp: In constructor
?pdal::Environment::Environment()?:
/Users/bchambers/Documents/dev/PDAL/src/Environment.cpp:75: error:
?m_plangEnvironment? was not declared in this scope
/Users/bchambers/Documents/dev/PDAL/src/Environment.cpp:75: error: invalid
use of incomplete type ?struct pdal::plang::Environment?
/Users/bchambers/Documents/dev/PDAL/src/../include/pdal/Environment.hpp:43:
error: forward declaration of ?struct pdal::plang::Environment?
/Users/bchambers/Documents/dev/PDAL/src/Environment.cpp: In destructor
?pdal::Environment::~Environment()?:
/Users/bchambers/Documents/dev/PDAL/src/Environment.cpp:83: error:
?m_plangEnvironment? was not declared in this scope
make[2]: *** [src/CMakeFiles/pdal.dir/Environment.cpp.o] Error 1
make[1]: *** [src/CMakeFiles/pdal.dir/all] Error 2
make: *** [all] Error 2

Brad

On Sat, Mar 24, 2012 at 10:33 AM, Michael Gerlek <mpg@flaxen.com> wrote:

> Yes, it should be optional - let me know what errors you get and I'll fix
> them.
>
> (Howard: can we have Jenkins build some different configs?)
>
> .mpg
>
> On Mar 24, 2012, at 5:20 AM, Bradley Chambers <brad.chambers@gmail.com>
> wrote:
>
>  * You need to cmake with -DWITH_PYTHON=on.  (Howard, can you pls ask
>> Jenkins to do his builds this way, if he's not already?)  You need to have
>> python (probably 2.7) and numpy installed.
>>
>
> Is PLang intended to be an optional component? I'm not yet compiling with
> python or numpy, so I get errors in PLang. This is pretty easy to work
> around on my end, but probably not the intended behavior.
>
> Brad
>
> _______________________________________________
>
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/pdal/attachments/20120324/80854f7c/attachment.html
From mpg at flaxen.com  Mon Mar 26 11:13:23 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Mon Mar 26 11:13:34 2012
Subject: [pdal] PLang status
In-Reply-To: <CAJyqqPw0Di+UhDJubw65QRmETZzK1WBkBrcN5SxH2t4grPKXDw@mail.gmail.com>
References: <018d01cd0183$55ec1050$01c430f0$@flaxen.com>	<CAJyqqPyiVmR5=cA2jCP54v3wOHLutmzrgQTHCFtH6+MPvpbvCw@mail.gmail.com>	<-729583970077782236@unknownmsgid>
	<CAJyqqPw0Di+UhDJubw65QRmETZzK1WBkBrcN5SxH2t4grPKXDw@mail.gmail.com>
Message-ID: <026e01cd0b62$fd01b320$f7051960$@flaxen.com>

Oh, sorry - I'll fix this today.

 

-mpg

 

From: Bradley Chambers [mailto:brad.chambers@gmail.com] 
Sent: Saturday, March 24, 2012 10:18 AM
To: Michael Gerlek
Cc: pdal@lists.osgeo.org
Subject: Re: [pdal] PLang status

 

I believe it all stems from m_plangEnvironment, which is hiding behind #ifdef PDAL_HAVE_PYTHON in Environment.hpp, but is still referenced elsewhere without similar checks for the presence of python.

[ 29%] Building CXX object src/CMakeFiles/pdal.dir/Environment.cpp.o
/Users/bchambers/Documents/dev/PDAL/src/Environment.cpp: In constructor 'pdal::Environment::Environment()':
/Users/bchambers/Documents/dev/PDAL/src/Environment.cpp:75: error: 'm_plangEnvironment' was not declared in this scope
/Users/bchambers/Documents/dev/PDAL/src/Environment.cpp:75: error: invalid use of incomplete type 'struct pdal::plang::Environment'
/Users/bchambers/Documents/dev/PDAL/src/../include/pdal/Environment.hpp:43: error: forward declaration of 'struct pdal::plang::Environment'
/Users/bchambers/Documents/dev/PDAL/src/Environment.cpp: In destructor 'pdal::Environment::~Environment()':
/Users/bchambers/Documents/dev/PDAL/src/Environment.cpp:83: error: 'm_plangEnvironment' was not declared in this scope
make[2]: *** [src/CMakeFiles/pdal.dir/Environment.cpp.o] Error 1
make[1]: *** [src/CMakeFiles/pdal.dir/all] Error 2
make: *** [all] Error 2

Brad

On Sat, Mar 24, 2012 at 10:33 AM, Michael Gerlek <mpg@flaxen.com> wrote:

Yes, it should be optional - let me know what errors you get and I'll fix them. 

 

(Howard: can we have Jenkins build some different configs?)

.mpg


On Mar 24, 2012, at 5:20 AM, Bradley Chambers <brad.chambers@gmail.com> wrote:

* You need to cmake with -DWITH_PYTHON=on.  (Howard, can you pls ask Jenkins to do his builds this way, if he's not already?)  You need to have python (probably 2.7) and numpy installed.


Is PLang intended to be an optional component? I'm not yet compiling with python or numpy, so I get errors in PLang. This is pretty easy to work around on my end, but probably not the intended behavior.

Brad

_______________________________________________


pdal mailing list
pdal@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/pdal

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/pdal/attachments/20120326/86818f76/attachment.html
From brad.chambers at gmail.com  Mon Mar 26 12:01:29 2012
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Mon Mar 26 12:01:39 2012
Subject: [pdal] Minimum Boost, embedded Boost, and undefined symbols
Message-ID: <CAJyqqPzvL8WORD9wY9s7xVnFvySrmuu1oob_SpzHNpskpqEFNA@mail.gmail.com>

I found two previous tickets stating that the minimum Boost version should
be 1.41 (https://github.com/PDAL/PDAL/issues/51 and
https://github.com/PDAL/PDAL/pull/55), and yet the main CMakeLists file
requires 1.48 (references to 1.41 disappeared around
https://github.com/PDAL/PDAL/commit/41b3b39d85c073a7325d03bf853477c71f37a05c).
Should the CMakeLists file be downgraded once again to require 1.41?

I believe the embedded PDAL Boost may be taking over a bit too gracefully
if the initial find_package call fails. I discovered this when attempting
to run CMake with Boost 1.47 (before noticing the dependency on 1.48).
Because the embedded package took over, and CMake completed without errors,
this took a while to figure out. In hindsight, there was a status message
that Boost was not found, and embedded Boost would be used, but it's easy
to overlook. If the user chooses to not use embedded Boost, should the
default behavior really be to use it if CMake runs into any issues?

Finally, when building on OS X and using the embedded Boost libraries, I
currently get a slew of errors about undefined symbols in
Boost::filesystem3.

Undefined symbols for architecture x86_64:
  "boost::filesystem3::detail::remove(boost::filesystem3::path const&,
boost::system::error_code*)", referenced from:
      boost::filesystem3::remove(boost::filesystem3::path const&) in
FileUtils.o
  "boost::filesystem3::detail::rename(boost::filesystem3::path const&,
boost::filesystem3::path const&, boost::system::error_code*)", referenced
from:
      boost::filesystem3::rename(boost::filesystem3::path const&,
boost::filesystem3::path const&) in FileUtils.o
  "boost::filesystem3::detail::status(boost::filesystem3::path const&,
boost::system::error_code*)", referenced from:
      boost::filesystem3::exists(boost::filesystem3::path const&) in
FileUtils.o
  "boost::filesystem3::detail::file_size(boost::filesystem3::path const&,
boost::system::error_code*)", referenced from:
      boost::filesystem3::file_size(boost::filesystem3::path const&) in
FileUtils.o
  "boost::filesystem3::detail::current_path(boost::system::error_code*)",
referenced from:
      boost::filesystem3::current_path() in FileUtils.o
  "boost::filesystem3::absolute(boost::filesystem3::path const&,
boost::filesystem3::path const&)", referenced from:
      pdal::FileUtils::toAbsolutePath(std::string const&) in FileUtils.o
      pdal::FileUtils::toAbsolutePath(std::string const&, std::string) in
FileUtils.o
  "boost::filesystem3::path::parent_path() const", referenced from:
      pdal::FileUtils::getDirectory(std::string const&) in FileUtils.o
  "boost::filesystem3::path::root_directory() const", referenced from:
      boost::filesystem3::path::has_root_directory() const in FileUtils.o
  "boost::filesystem3::path::filename() const", referenced from:
      pdal::StageFactory::loadPlugins() in StageFactory.o
  "boost::filesystem3::path::extension() const", referenced from:
      pdal::StageFactory::loadPlugins() in StageFactory.o
  "boost::filesystem3::path::stem() const", referenced from:
      pdal::StageFactory::loadPlugins() in StageFactory.o

"boost::filesystem3::directory_entry::m_get_symlink_status(boost::system::error_code*)
const", referenced from:
      boost::filesystem3::directory_entry::symlink_status() const in
StageFactory.o
  "boost::filesystem3::path::begin() const", referenced from:
      boost::filesystem3::operator<(boost::filesystem3::path const&,
boost::filesystem3::path const&) in StageFactory.o
  "boost::filesystem3::path::end() const", referenced from:
      boost::filesystem3::operator<(boost::filesystem3::path const&,
boost::filesystem3::path const&) in StageFactory.o

"boost::filesystem3::path::m_path_iterator_increment(boost::filesystem3::path::iterator&)",
referenced from:
      boost::filesystem3::path::iterator::increment() in StageFactory.o

"boost::filesystem3::detail::directory_iterator_increment(boost::filesystem3::directory_iterator&,
boost::system::error_code*)", referenced from:
      boost::filesystem3::directory_iterator::increment() in StageFactory.o

"boost::filesystem3::detail::directory_iterator_construct(boost::filesystem3::directory_iterator&,
boost::filesystem3::path const&, boost::system::error_code*)", referenced
from:

boost::filesystem3::directory_iterator::directory_iterator(boost::filesystem3::path
const&) in StageFactory.o
  "boost::filesystem3::detail::dir_itr_close(void*&, void*&)", referenced
from:
      boost::filesystem3::detail::dir_itr_imp::~dir_itr_imp() in
StageFactory.o
  "boost::filesystem3::detail::unique_path(boost::filesystem3::path const&,
boost::system::error_code*)", referenced from:
      boost::filesystem3::unique_path(boost::filesystem3::path const&) in
Utils.o

"boost::filesystem3::detail::temp_directory_path(boost::system::error_code*)",
referenced from:
      boost::filesystem3::temp_directory_path() in Utils.o
  "boost::filesystem3::path::operator/=(boost::filesystem3::path const&)",
referenced from:
      boost::filesystem3::operator/(boost::filesystem3::path const&,
boost::filesystem3::path const&) in Utils.o
ld: symbol(s) not found for architecture x86_64

Brad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/pdal/attachments/20120326/5752ec7b/attachment.html
From hobu.inc at gmail.com  Mon Mar 26 12:32:06 2012
From: hobu.inc at gmail.com (Howard Butler)
Date: Mon Mar 26 12:32:23 2012
Subject: [pdal] Minimum Boost, embedded Boost, and undefined symbols
In-Reply-To: <CAJyqqPzvL8WORD9wY9s7xVnFvySrmuu1oob_SpzHNpskpqEFNA@mail.gmail.com>
References: <CAJyqqPzvL8WORD9wY9s7xVnFvySrmuu1oob_SpzHNpskpqEFNA@mail.gmail.com>
Message-ID: <3356C56C-078D-482A-B52F-EE680FD061DB@gmail.com>


On Mar 26, 2012, at 11:01 AM, Bradley Chambers wrote:

> I found two previous tickets stating that the minimum Boost version should be 1.41 (https://github.com/PDAL/PDAL/issues/51 and https://github.com/PDAL/PDAL/pull/55), and yet the main CMakeLists file requires 1.48 (references to 1.41 disappeared around https://github.com/PDAL/PDAL/commit/41b3b39d85c073a7325d03bf853477c71f37a05c). Should the CMakeLists file be downgraded once again to require 1.41?
> 
> I believe the embedded PDAL Boost may be taking over a bit too gracefully if the initial find_package call fails. I discovered this when attempting to run CMake with Boost 1.47 (before noticing the dependency on 1.48). Because the embedded package took over, and CMake completed without errors, this took a while to figure out. In hindsight, there was a status message that Boost was not found, and embedded Boost would be used, but it's easy to overlook. If the user chooses to not use embedded Boost, should the default behavior really be to use it if CMake runs into any issues?

There's definitely room to fix the CMake logic up here.  I just did a quick and dirty on it, and I almost always build embedded now. I think the expectation should be that you're building embedded to simplify the build setup for folks and so that we can dictate a high boost version number.  Right now the minimum Boost version number is 1.48, which is due to some newish boost::random being used in filters.stats.  

> 
> Finally, when building on OS X and using the embedded Boost libraries, I currently get a slew of errors about undefined symbols in Boost::filesystem3.

If you were using the embedded boost, I think the errors here would be pdalboost::filesystem3:: of boost::filesystem3 

$ make VERBOSE=1 should give you an indication of the include path ordering and whether or not your boost is being used ahead of the system one.  When the embedded boost is used, a single library that is built by CMake in ./boost is linked in.  Otherwise, for a system boost, each individual library specified in the find_package invocation is required.

> 
> Undefined symbols for architecture x86_64:
>   "boost::filesystem3::detail::remove(boost::filesystem3::path const&, boost::system::error_code*)", referenced from:
>       boost::filesystem3::remove(boost::filesystem3::path const&) in FileUtils.o
>   "boost::filesystem3::detail::rename(boost::filesystem3::path const&, boost::filesystem3::path const&, boost::system::error_code*)", referenced from:
>       boost::filesystem3::rename(boost::filesystem3::path const&, boost::filesystem3::path const&) in FileUtils.o
>   "boost::filesystem3::detail::status(boost::filesystem3::path const&, boost::system::error_code*)", referenced from:
>       boost::filesystem3::exists(boost::filesystem3::path const&) in FileUtils.o
>   "boost::filesystem3::detail::file_size(boost::filesystem3::path const&, boost::system::error_code*)", referenced from:
>       boost::filesystem3::file_size(boost::filesystem3::path const&) in FileUtils.o
>   "boost::filesystem3::detail::current_path(boost::system::error_code*)", referenced from:
>       boost::filesystem3::current_path() in FileUtils.o
>   "boost::filesystem3::absolute(boost::filesystem3::path const&, boost::filesystem3::path const&)", referenced from:
>       pdal::FileUtils::toAbsolutePath(std::string const&) in FileUtils.o
>       pdal::FileUtils::toAbsolutePath(std::string const&, std::string) in FileUtils.o
>   "boost::filesystem3::path::parent_path() const", referenced from:
>       pdal::FileUtils::getDirectory(std::string const&) in FileUtils.o
>   "boost::filesystem3::path::root_directory() const", referenced from:
>       boost::filesystem3::path::has_root_directory() const in FileUtils.o
>   "boost::filesystem3::path::filename() const", referenced from:
>       pdal::StageFactory::loadPlugins() in StageFactory.o
>   "boost::filesystem3::path::extension() const", referenced from:
>       pdal::StageFactory::loadPlugins() in StageFactory.o
>   "boost::filesystem3::path::stem() const", referenced from:
>       pdal::StageFactory::loadPlugins() in StageFactory.o
>   "boost::filesystem3::directory_entry::m_get_symlink_status(boost::system::error_code*) const", referenced from:
>       boost::filesystem3::directory_entry::symlink_status() const in StageFactory.o
>   "boost::filesystem3::path::begin() const", referenced from:
>       boost::filesystem3::operator<(boost::filesystem3::path const&, boost::filesystem3::path const&) in StageFactory.o
>   "boost::filesystem3::path::end() const", referenced from:
>       boost::filesystem3::operator<(boost::filesystem3::path const&, boost::filesystem3::path const&) in StageFactory.o
>   "boost::filesystem3::path::m_path_iterator_increment(boost::filesystem3::path::iterator&)", referenced from:
>       boost::filesystem3::path::iterator::increment() in StageFactory.o
>   "boost::filesystem3::detail::directory_iterator_increment(boost::filesystem3::directory_iterator&, boost::system::error_code*)", referenced from:
>       boost::filesystem3::directory_iterator::increment() in StageFactory.o
>   "boost::filesystem3::detail::directory_iterator_construct(boost::filesystem3::directory_iterator&, boost::filesystem3::path const&, boost::system::error_code*)", referenced from:
>       boost::filesystem3::directory_iterator::directory_iterator(boost::filesystem3::path const&) in StageFactory.o
>   "boost::filesystem3::detail::dir_itr_close(void*&, void*&)", referenced from:
>       boost::filesystem3::detail::dir_itr_imp::~dir_itr_imp() in StageFactory.o
>   "boost::filesystem3::detail::unique_path(boost::filesystem3::path const&, boost::system::error_code*)", referenced from:
>       boost::filesystem3::unique_path(boost::filesystem3::path const&) in Utils.o
>   "boost::filesystem3::detail::temp_directory_path(boost::system::error_code*)", referenced from:
>       boost::filesystem3::temp_directory_path() in Utils.o
>   "boost::filesystem3::path::operator/=(boost::filesystem3::path const&)", referenced from:
>       boost::filesystem3::operator/(boost::filesystem3::path const&, boost::filesystem3::path const&) in Utils.o
> ld: symbol(s) not found for architecture x86_64
> 
> Brad
> _______________________________________________
> pdal mailing list
> pdal@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal

From brad.chambers at gmail.com  Mon Mar 26 12:59:23 2012
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Mon Mar 26 12:59:32 2012
Subject: [pdal] Minimum Boost, embedded Boost, and undefined symbols
In-Reply-To: <3356C56C-078D-482A-B52F-EE680FD061DB@gmail.com>
References: <CAJyqqPzvL8WORD9wY9s7xVnFvySrmuu1oob_SpzHNpskpqEFNA@mail.gmail.com>
	<3356C56C-078D-482A-B52F-EE680FD061DB@gmail.com>
Message-ID: <CAJyqqPzQ0HtiE4Ffz-KObet13McxoY4CCGq7-GnmCSHoQnpH=w@mail.gmail.com>

So I removed the build directory and started fresh. Here's the CMake output.


Setting PDAL build type - Debug

Using embedded boost tree

Using boost lib: pdalboost

Building with PDAL unit tests

No non-embed static boost library found, setting BOOST_TEST_DYN_LINK

Configuring done

Generating done

While linking ../bin/libpdal.dylib, I get the following

Undefined symbols for architecture x86_64:
  "boost::filesystem3::path::root_directory() const", referenced from:
      boost::filesystem3::path::has_root_directory() constin FileUtils.cpp.o

...

make VERBOSE=1 confirms that only PDAL/boost is being included, and that
libpdal is linking against libpdalboost.a.

Brad

On Mon, Mar 26, 2012 at 12:32 PM, Howard Butler <hobu.inc@gmail.com> wrote:

>
> On Mar 26, 2012, at 11:01 AM, Bradley Chambers wrote:
>
> > I found two previous tickets stating that the minimum Boost version
> should be 1.41 (https://github.com/PDAL/PDAL/issues/51 and
> https://github.com/PDAL/PDAL/pull/55), and yet the main CMakeLists file
> requires 1.48 (references to 1.41 disappeared around
> https://github.com/PDAL/PDAL/commit/41b3b39d85c073a7325d03bf853477c71f37a05c).
> Should the CMakeLists file be downgraded once again to require 1.41?
> >
> > I believe the embedded PDAL Boost may be taking over a bit too
> gracefully if the initial find_package call fails. I discovered this when
> attempting to run CMake with Boost 1.47 (before noticing the dependency on
> 1.48). Because the embedded package took over, and CMake completed without
> errors, this took a while to figure out. In hindsight, there was a status
> message that Boost was not found, and embedded Boost would be used, but
> it's easy to overlook. If the user chooses to not use embedded Boost,
> should the default behavior really be to use it if CMake runs into any
> issues?
>
> There's definitely room to fix the CMake logic up here.  I just did a
> quick and dirty on it, and I almost always build embedded now. I think the
> expectation should be that you're building embedded to simplify the build
> setup for folks and so that we can dictate a high boost version number.
>  Right now the minimum Boost version number is 1.48, which is due to some
> newish boost::random being used in filters.stats.
>
> >
> > Finally, when building on OS X and using the embedded Boost libraries, I
> currently get a slew of errors about undefined symbols in
> Boost::filesystem3.
>
> If you were using the embedded boost, I think the errors here would be
> pdalboost::filesystem3:: of boost::filesystem3
>
> $ make VERBOSE=1 should give you an indication of the include path
> ordering and whether or not your boost is being used ahead of the system
> one.  When the embedded boost is used, a single library that is built by
> CMake in ./boost is linked in.  Otherwise, for a system boost, each
> individual library specified in the find_package invocation is required.
>
> >
> > Undefined symbols for architecture x86_64:
> >   "boost::filesystem3::detail::remove(boost::filesystem3::path const&,
> boost::system::error_code*)", referenced from:
> >       boost::filesystem3::remove(boost::filesystem3::path const&) in
> FileUtils.o
> >   "boost::filesystem3::detail::rename(boost::filesystem3::path const&,
> boost::filesystem3::path const&, boost::system::error_code*)", referenced
> from:
> >       boost::filesystem3::rename(boost::filesystem3::path const&,
> boost::filesystem3::path const&) in FileUtils.o
> >   "boost::filesystem3::detail::status(boost::filesystem3::path const&,
> boost::system::error_code*)", referenced from:
> >       boost::filesystem3::exists(boost::filesystem3::path const&) in
> FileUtils.o
> >   "boost::filesystem3::detail::file_size(boost::filesystem3::path
> const&, boost::system::error_code*)", referenced from:
> >       boost::filesystem3::file_size(boost::filesystem3::path const&) in
> FileUtils.o
> >
> "boost::filesystem3::detail::current_path(boost::system::error_code*)",
> referenced from:
> >       boost::filesystem3::current_path() in FileUtils.o
> >   "boost::filesystem3::absolute(boost::filesystem3::path const&,
> boost::filesystem3::path const&)", referenced from:
> >       pdal::FileUtils::toAbsolutePath(std::string const&) in FileUtils.o
> >       pdal::FileUtils::toAbsolutePath(std::string const&, std::string)
> in FileUtils.o
> >   "boost::filesystem3::path::parent_path() const", referenced from:
> >       pdal::FileUtils::getDirectory(std::string const&) in FileUtils.o
> >   "boost::filesystem3::path::root_directory() const", referenced from:
> >       boost::filesystem3::path::has_root_directory() const in FileUtils.o
> >   "boost::filesystem3::path::filename() const", referenced from:
> >       pdal::StageFactory::loadPlugins() in StageFactory.o
> >   "boost::filesystem3::path::extension() const", referenced from:
> >       pdal::StageFactory::loadPlugins() in StageFactory.o
> >   "boost::filesystem3::path::stem() const", referenced from:
> >       pdal::StageFactory::loadPlugins() in StageFactory.o
> >
> "boost::filesystem3::directory_entry::m_get_symlink_status(boost::system::error_code*)
> const", referenced from:
> >       boost::filesystem3::directory_entry::symlink_status() const in
> StageFactory.o
> >   "boost::filesystem3::path::begin() const", referenced from:
> >       boost::filesystem3::operator<(boost::filesystem3::path const&,
> boost::filesystem3::path const&) in StageFactory.o
> >   "boost::filesystem3::path::end() const", referenced from:
> >       boost::filesystem3::operator<(boost::filesystem3::path const&,
> boost::filesystem3::path const&) in StageFactory.o
> >
> "boost::filesystem3::path::m_path_iterator_increment(boost::filesystem3::path::iterator&)",
> referenced from:
> >       boost::filesystem3::path::iterator::increment() in StageFactory.o
> >
> "boost::filesystem3::detail::directory_iterator_increment(boost::filesystem3::directory_iterator&,
> boost::system::error_code*)", referenced from:
> >       boost::filesystem3::directory_iterator::increment() in
> StageFactory.o
> >
> "boost::filesystem3::detail::directory_iterator_construct(boost::filesystem3::directory_iterator&,
> boost::filesystem3::path const&, boost::system::error_code*)", referenced
> from:
> >
> boost::filesystem3::directory_iterator::directory_iterator(boost::filesystem3::path
> const&) in StageFactory.o
> >   "boost::filesystem3::detail::dir_itr_close(void*&, void*&)",
> referenced from:
> >       boost::filesystem3::detail::dir_itr_imp::~dir_itr_imp() in
> StageFactory.o
> >   "boost::filesystem3::detail::unique_path(boost::filesystem3::path
> const&, boost::system::error_code*)", referenced from:
> >       boost::filesystem3::unique_path(boost::filesystem3::path const&)
> in Utils.o
> >
> "boost::filesystem3::detail::temp_directory_path(boost::system::error_code*)",
> referenced from:
> >       boost::filesystem3::temp_directory_path() in Utils.o
> >   "boost::filesystem3::path::operator/=(boost::filesystem3::path
> const&)", referenced from:
> >       boost::filesystem3::operator/(boost::filesystem3::path const&,
> boost::filesystem3::path const&) in Utils.o
> > ld: symbol(s) not found for architecture x86_64
> >
> > Brad
> > _______________________________________________
> > pdal mailing list
> > pdal@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/pdal
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/pdal/attachments/20120326/5817fcf1/attachment-0001.html
From mpg at flaxen.com  Mon Mar 26 19:52:01 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Mon Mar 26 19:52:55 2012
Subject: [pdal] Cloneable streams
Message-ID: <031c01cd0bab$7157b920$54072b60$@flaxen.com>

Thinking out loud....


The las::Writer constructor takes a filename (via an Option string) or a std::stream.

The las::Reader constructor takes a filename -- but not a stream! This is because the Reader stage wants to be read-only: the file I/O is actually done by the Iterator, so the iterator has to call mystage->getFilename() and do the open() itself.

Ideally, each reader and writer stage would support at least two canonical forms: a string (or Option object) for simple usage and a stream pointer for interoperability with other systems.

But when you now add the need for the NITF reader to give the LAS reader a "subset" of the full file, things get even more fun: since we can't pass streams to Readers directly, we have to pass a filename and a length + offset... which means the iterator in turn has to get smarter and know about this new kind of stream creation mechanism that does offsets...  ick.


In addition to a ctor that takes an Option set, how about Readers and Writers also have a ctor that takes a StreamFactory object?

	class StreamFactory
	{
	public:
		std::stream* create() = 0;
	}

When you create a Reader, you give it a Factory so it can make streams without having to know about the creation mechanism. We would supply a few derived classes for daily usage, with ctors like this:

	PassthruStreamFactory(std::istream& stream);
	FilenameStreamFactory(std::string);
	CurlStreamFactory(std::string url);
	...

and so on. The iterator would be able to use this factory to make new streams at will (so we can have parallel iterators), and the class could even take care of doing the cleanups of open streams in its dtor (by keeping a mutable and mutex-locked list of open streams or whatever).

[I already made a StreamManager class a while back, but this StreamFactory is a more general concept.]

-mpg


From mateusz at loskot.net  Tue Mar 27 05:54:02 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Mar 27 05:54:44 2012
Subject: [pdal] Cloneable streams
In-Reply-To: <031c01cd0bab$7157b920$54072b60$@flaxen.com>
References: <031c01cd0bab$7157b920$54072b60$@flaxen.com>
Message-ID: <CABUeae_DYi3deqxR5iDE5U01FABMRuuNiJcpqgod28Z6H+gVXg@mail.gmail.com>

On 27 March 2012 00:52, Michael P. Gerlek <mpg@flaxen.com> wrote:
> Thinking out loud....
> [...]

Is the "cloneable" part missing? Or, I'm missing where is an issue about it :)


Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From mpg at flaxen.com  Tue Mar 27 10:18:11 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Tue Mar 27 10:19:11 2012
Subject: [pdal] Cloneable streams
In-Reply-To: <CABUeae_DYi3deqxR5iDE5U01FABMRuuNiJcpqgod28Z6H+gVXg@mail.gmail.com>
References: <031c01cd0bab$7157b920$54072b60$@flaxen.com>
	<CABUeae_DYi3deqxR5iDE5U01FABMRuuNiJcpqgod28Z6H+gVXg@mail.gmail.com>
Message-ID: <036601cd0c24$7193ccc0$54bb6640$@flaxen.com>

The "clonable" part comes from supplying a function to make a new stream, since streams in and of themselves aren't clonable (well, they might be, but the important bit is that you need to be able to make a new file pointer somehow...)

-mpg


> -----Original Message-----
> From: Mateusz Loskot [mailto:mateusz@loskot.net]
> Sent: Tuesday, March 27, 2012 2:54 AM
> To: mpg@flaxen.com
> Cc: pdal@lists.osgeo.org
> Subject: Re: [pdal] Cloneable streams
> 
> On 27 March 2012 00:52, Michael P. Gerlek <mpg@flaxen.com> wrote:
> > Thinking out loud....
> > [...]
> 
> Is the "cloneable" part missing? Or, I'm missing where is an issue about it :)
> 
> 
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net

From mpg at flaxen.com  Tue Mar 27 18:55:06 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Tue Mar 27 18:55:13 2012
Subject: [pdal] RE: Cloneable streams
Message-ID: <03db01cd0c6c$a8084d10$f818e730$@flaxen.com>

Hearing no objections and taking that for vigorous assent, I've gone ahead and implemented this.


class PDAL_DLL StreamFactory
{
public:
    StreamFactory() {}
    virtual ~StreamFactory() {}

    // returns the stream in the open state
    virtual std::istream& allocate() = 0;

    // will close the stream for you
    virtual void deallocate(std::istream&) = 0;
};


Works pretty well...

-mpg



> -----Original Message-----
> From: Michael P. Gerlek [mailto:mpg@flaxen.com]
> Sent: Monday, March 26, 2012 4:52 PM
> To: pdal@lists.osgeo.org
> Subject: Cloneable streams
> 
> Thinking out loud....
> 
> 
> The las::Writer constructor takes a filename (via an Option string) or a std::stream.
> 
> The las::Reader constructor takes a filename -- but not a stream! This is because the Reader stage wants to be read-only: the file I/O is
> actually done by the Iterator, so the iterator has to call mystage->getFilename() and do the open() itself.
> 
> Ideally, each reader and writer stage would support at least two canonical forms: a string (or Option object) for simple usage and a
> stream pointer for interoperability with other systems.
> 
> But when you now add the need for the NITF reader to give the LAS reader a "subset" of the full file, things get even more fun: since
> we can't pass streams to Readers directly, we have to pass a filename and a length + offset... which means the iterator in turn has to
> get smarter and know about this new kind of stream creation mechanism that does offsets...  ick.
> 
> 
> In addition to a ctor that takes an Option set, how about Readers and Writers also have a ctor that takes a StreamFactory object?
> 
> 	class StreamFactory
> 	{
> 	public:
> 		std::stream* create() = 0;
> 	}
> 
> When you create a Reader, you give it a Factory so it can make streams without having to know about the creation mechanism. We
> would supply a few derived classes for daily usage, with ctors like this:
> 
> 	PassthruStreamFactory(std::istream& stream);
> 	FilenameStreamFactory(std::string);
> 	CurlStreamFactory(std::string url);
> 	...
> 
> and so on. The iterator would be able to use this factory to make new streams at will (so we can have parallel iterators), and the class
> could even take care of doing the cleanups of open streams in its dtor (by keeping a mutable and mutex-locked list of open streams or
> whatever).
> 
> [I already made a StreamManager class a while back, but this StreamFactory is a more general concept.]
> 
> -mpg


From mateusz at loskot.net  Wed Mar 28 05:38:04 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Mar 28 05:38:45 2012
Subject: [pdal] Cloneable streams
In-Reply-To: <036601cd0c24$7193ccc0$54bb6640$@flaxen.com>
References: <031c01cd0bab$7157b920$54072b60$@flaxen.com>
	<CABUeae_DYi3deqxR5iDE5U01FABMRuuNiJcpqgod28Z6H+gVXg@mail.gmail.com>
	<036601cd0c24$7193ccc0$54bb6640$@flaxen.com>
Message-ID: <CABUeae80gp=JxOtdp_wqx-VNR-Jo=aOcd=7ZrxqG=gnSMuQjAA@mail.gmail.com>

On 27 March 2012 15:18, Michael P. Gerlek <mpg@flaxen.com> wrote:
> The "clonable" part comes from supplying a function to make a new stream, since
> streams in and of themselves aren't clonable (well, they might be, but the important
> bit is that you need to be able to make a new file pointer somehow...)

Streams represent physical resource exposed by OS, so they are not copyable.
What that would mean anyway.
However, streams can be implemented as shared handlers or wrapped with shared
handlers and those handlers can be copyable of course.
But still, copies would refer to the original resource.

It's unclear to me what it means to create new stream.
Is it new stream to existing resource or new stream together with new resource?

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From mpg at flaxen.com  Fri Mar 30 21:13:32 2012
From: mpg at flaxen.com (Michael P. Gerlek)
Date: Fri Mar 30 21:13:37 2012
Subject: [pdal] Thinking out loud about stream usage
Message-ID: <00bf01cd0edb$7e35e3a0$7aa1aae0$@flaxen.com>

In implementing the NITF writer which derives from the LAS writer, I'm wrestling with an issue that we've had for some time: what are the semantics of a stage with respect to the file it uses?  We've never written this down anywhere, and I suspect some stages do it differently.

For example, the LAS writer, if passed a filename, will open the file in initialize() and close() it in the dtor. [Because of this, we have had to explicitly scope Writer objects on occasion, e.g. in the test cases where we want to read the file immediately after writing it.] In practice, though, the LAS writer only actually writes to the stream during the write() sequence (writeBegin to writeEnd). Should this be a "rule" that clients can assume?

On the reader side, I suspect we only do reads during initialize() and during the read() sequence. If the caller has access to the stream the reader is using, is it allowed to move the stream position after initialize() or between read() sequences?

And I think a lot of this is tied up with the fact that readers and writers can take either a stream/stream-factory or just an Option-filename.

Just some stuff to think about over spring break...

_mpg


