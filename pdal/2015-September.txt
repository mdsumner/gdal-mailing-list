From howard at hobu.co  Tue Sep  1 04:45:16 2015
From: howard at hobu.co (Howard Butler)
Date: Tue, 1 Sep 2015 06:45:16 -0500
Subject: [pdal] GRASS GIS and PDAL: C API?
In-Reply-To: <CABo5uVtmMgHB6wakFedmUPucPk60TNvdp_WkNGYRaZzrvfNnoA@mail.gmail.com>
References: <CABo5uVtmMgHB6wakFedmUPucPk60TNvdp_WkNGYRaZzrvfNnoA@mail.gmail.com>
Message-ID: <47CBC464-7EA4-41B6-A562-8A385A53552B@hobu.co>


> On Aug 31, 2015, at 9:28 PM, Vaclav Petras <wenzeslaus at gmail.com> wrote:
> Is there any ongoing or planned work on C API for PDAL?

There is no specific GDAL-style C API work planned for PDAL, but we would certainly accept something if it were contributed. I would imagine the C API would only need to support PDAL pipeline operations, reading/writing from buffers, and metadata/srs information. 

Howard


From wenzeslaus at gmail.com  Tue Sep  1 05:59:01 2015
From: wenzeslaus at gmail.com (Vaclav Petras)
Date: Tue, 1 Sep 2015 08:59:01 -0400
Subject: [pdal] GRASS GIS and PDAL: C API?
In-Reply-To: <47CBC464-7EA4-41B6-A562-8A385A53552B@hobu.co>
References: <CABo5uVtmMgHB6wakFedmUPucPk60TNvdp_WkNGYRaZzrvfNnoA@mail.gmail.com>
	<47CBC464-7EA4-41B6-A562-8A385A53552B@hobu.co>
Message-ID: <CABo5uVv+u3Qvn3n0qHL1unE4zBz5r1GGrJ=P5B5PigyJBsoYYA@mail.gmail.com>

On Tue, Sep 1, 2015 at 7:45 AM, Howard Butler <howard at hobu.co> wrote:

> > On Aug 31, 2015, at 9:28 PM, Vaclav Petras <wenzeslaus at gmail.com> wrote:
> > Is there any ongoing or planned work on C API for PDAL?
>
> There is no specific GDAL-style C API work planned for PDAL, but we would
> certainly accept something if it were contributed. I would imagine the C
> API would only need to support PDAL pipeline operations, reading/writing
> from buffers, and metadata/srs information.


I'll keep that in mind. GRASS GIS definitively needs libLAS-style API with
details about the lidar data such as class and returns. I'm getting grasp
on PDAL C++ API now. I will report on in more hopefully soon.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150901/4cce0a3f/attachment.html>

From wenzeslaus at gmail.com  Tue Sep  1 19:53:41 2015
From: wenzeslaus at gmail.com (Vaclav Petras)
Date: Tue, 1 Sep 2015 22:53:41 -0400
Subject: [pdal] Migrating from libLAS
Message-ID: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>

Hi all,

I'm porting GRASS GIS's r.in.lidar module [1] (which is using libLAS) to
PDAL and I think I can write a migration guide. Do you think it should go
to the docs? If yes, where? You can view the current state in my fork [2].
Unfortunately, it is transitioning from libLAS's C API to PDAL C++ API
since r.in.lidar is using the C API.

I have several questions/TODOs in file [2] (feel free to review them).
However, now I would like to ask about iterating over the points in the
dataset. I do it in the way that I call execute on the reader and then I
iterate over points in PointView. It seems to me that I'm going over the
dataset two times, one reading and then my writing instead of just reading
and writing at the same time as in case of libLAS API. It also seems that
all points are loaded in the memory, should I then check some limitations
or add some error handling?

Thanks,
Valcav

PS: I'm also working on extending FAQs on that topic [3].

[1]
https://trac.osgeo.org/grass/browser/grass/trunk/vector/v.in.lidar/main.c
[2]
https://github.com/wenzeslaus/PDAL/blob/liblas-to-pdal-transition/doc/tutorial/liblas_to_pdal.rst
[3]
https://github.com/wenzeslaus/PDAL/blob/liblas-to-pdal-transition/doc/faq.rst
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150901/4ef2ab4e/attachment.html>

From andrew.bell.ia at gmail.com  Tue Sep  1 20:28:09 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 1 Sep 2015 22:28:09 -0500
Subject: [pdal] Migrating from libLAS
In-Reply-To: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
Message-ID: <CACJ51z0BvPz-=9hr_gozHNbuBRD2OC3myN4ZRG7Cs-UU=LY5EQ@mail.gmail.com>

On Tue, Sep 1, 2015 at 9:53 PM, Vaclav Petras <wenzeslaus at gmail.com> wrote:
> Hi all,
>
> I'm porting GRASS GIS's r.in.lidar module [1] (which is using libLAS) to
> PDAL and I think I can write a migration guide. Do you think it should go to
> the docs? If yes, where? You can view the current state in my fork [2].
> Unfortunately, it is transitioning from libLAS's C API to PDAL C++ API since
> r.in.lidar is using the C API.
>
> I have several questions/TODOs in file [2] (feel free to review them).
> However, now I would like to ask about iterating over the points in the
> dataset. I do it in the way that I call execute on the reader and then I
> iterate over points in PointView.  It seems to me that I'm going over the
> dataset two times, one reading and then my writing instead of just reading
> and writing at the same time as in case of libLAS API.

The short answer is yes, this is what you're doing.  There is a
callback in some readers that handle point-at-a-time semantics, but
it's much easier to do what you're doing.

>  It also seems that all points are loaded in the memory, should I then check some limitations or
> add some error handling?

We only handle 2^32 - 1 points at this time.  We assume that your
system will throw an error if you run out of memory, though unless you
have a small system with limited virtual memory and a very large
dataset, it seems unlikely.

Note that PDAL's design is different than libLAS because it's not just
a LAS reader.  You can use the callback mechanism (setReadCb) along
with a custom PointTable (derived from BasePointTable) to do your own
thing if that's what you want.  We built this to allow people to read
the data without actually storing it in PDAL-allocated memory.

On your transition guide:

Point validity: there is no such concept

hasColor: determines whether the LAS dataformat_id supports RGB
hasDim(Id::Red): determines whether the dimension Red was registered
with PDAL.  If all you're doing is reading LAS, hasColor() should be
true when hasDim(Id::Red) is true.

Memory management: PDAL generally takes care of itself.  In your
example you allocate a reader on the heap, but it can be stuck on the
stack just as well.  There are no hard requirements on this.

-- 
Andrew Bell
andrew.bell.ia at gmail.com

From doug_newcomb at fws.gov  Wed Sep  2 05:15:42 2015
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Wed, 2 Sep 2015 08:15:42 -0400
Subject: [pdal] Migrating from libLAS
In-Reply-To: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
Message-ID: <CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>

Does this mean that with the new version of r.in.lidar using pdal that the
file size that can be read in will be limited by the amount of memory on my
computer?

 I currently use r.in.lidar with liblas and can process aggregated las
files with up to 4.2 billion points with memory usage limited by the amount
of map in memory parameter. ( The type of the analysis cell size and extent
also affect memory usage)

The current lidar data sets I have for eastern North Carolina have a point
density of 2 points / meter  ( USGS QL2) , or about 6-10 billion points per
county.  The next phase of data collection for North Carolina ( foothills)
will be delivered at 8 points per meter ( USGS QL 1) .  The technology can
deliver up to 100 points per meter.

Would continuing to keep all the points for a file in memory lead to
smaller and smaller physical tile sizes as point densities increase?

I was hoping that the move to pdal would allow a move to las 1.4 format
with more points per file than 4.2 billion to reduce having to deal with
tile edge effects.

Or is it  too early in the morning and my caffeine hasn't kicked in yet and
I'm not seeing something obvious?

Doug




On Tue, Sep 1, 2015 at 10:53 PM, Vaclav Petras <wenzeslaus at gmail.com> wrote:

> Hi all,
>
> I'm porting GRASS GIS's r.in.lidar module [1] (which is using libLAS) to
> PDAL and I think I can write a migration guide. Do you think it should go
> to the docs? If yes, where? You can view the current state in my fork [2].
> Unfortunately, it is transitioning from libLAS's C API to PDAL C++ API
> since r.in.lidar is using the C API.
>
> I have several questions/TODOs in file [2] (feel free to review them).
> However, now I would like to ask about iterating over the points in the
> dataset. I do it in the way that I call execute on the reader and then I
> iterate over points in PointView. It seems to me that I'm going over the
> dataset two times, one reading and then my writing instead of just reading
> and writing at the same time as in case of libLAS API. It also seems that
> all points are loaded in the memory, should I then check some limitations
> or add some error handling?
>
> Thanks,
> Valcav
>
> PS: I'm also working on extending FAQs on that topic [3].
>
> [1]
> https://trac.osgeo.org/grass/browser/grass/trunk/vector/v.in.lidar/main.c
> [2]
> https://github.com/wenzeslaus/PDAL/blob/liblas-to-pdal-transition/doc/tutorial/liblas_to_pdal.rst
> [3]
> https://github.com/wenzeslaus/PDAL/blob/liblas-to-pdal-transition/doc/faq.rst
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>



-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150902/9a58886b/attachment.html>

From andrew.bell.ia at gmail.com  Wed Sep  2 05:45:52 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 2 Sep 2015 07:45:52 -0500
Subject: [pdal] Migrating from libLAS
In-Reply-To: <CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
Message-ID: <CACJ51z2C33kOF7BSQzhQOcD7_VCbEescoo1DZm54CgOV1woiPw@mail.gmail.com>

On Wed, Sep 2, 2015 at 7:15 AM, Newcomb, Doug <doug_newcomb at fws.gov> wrote:
> Does this mean that with the new version of r.in.lidar using pdal that the
> file size that can be read in will be limited by the amount of memory on my
> computer?

Virtual memory.

>  I currently use r.in.lidar with liblas and can process aggregated las files
> with up to 4.2 billion points with memory usage limited by the amount of map
> in memory parameter. ( The type of the analysis cell size and extent also
> affect memory usage)

Not sure what you're referring to with "map in memory," but on most
systems you can add more virtual memory quite easily.

> Would continuing to keep all the points for a file in memory lead to smaller
> and smaller physical tile sizes as point densities increase?

I'm not sure I understand this.  PDAL lets you create point subsets.
Those subsets may look like tiles when displayed.  The point subsets
have very little impact on memory consumption.

> I was hoping that the move to pdal would allow a move to las 1.4 format with
> more points per file than 4.2 billion to reduce having to deal with tile
> edge effects.

Not sure what the tile edge effects are.  You should be able to
rebuild PDAL to handle more than 2^32 points, but we haven't tried it.

-- 
Andrew Bell
andrew.bell.ia at gmail.com

From wenzeslaus at gmail.com  Wed Sep  2 06:39:40 2015
From: wenzeslaus at gmail.com (Vaclav Petras)
Date: Wed, 2 Sep 2015 09:39:40 -0400
Subject: [pdal] Migrating from libLAS
In-Reply-To: <CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
Message-ID: <CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>

On Wed, Sep 2, 2015 at 8:15 AM, Newcomb, Doug <doug_newcomb at fws.gov> wrote:

> Does this mean that with the new version of r.in.lidar using pdal that the
> file size that can be read in will be limited by the amount of memory on my
> computer?
>
>  I currently use r.in.lidar with liblas and can process aggregated las
> files with up to 4.2 billion points with memory usage limited by the amount
> of map in memory parameter. ( The type of the analysis cell size and extent
> also affect memory usage)
>

I meant v.in.lidar, sorry for confusion. But what you are saying applies
even more for v.in.lidar. It always holds in memory just one point as it
doesn't combines the points in any way. There might be some issues on GRASS
site like counting the points but that's a different story.

[1]
https://trac.osgeo.org/grass/browser/grass/trunk/vector/v.in.lidar/main.c
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150902/18199e15/attachment-0001.html>

From wenzeslaus at gmail.com  Wed Sep  2 07:05:03 2015
From: wenzeslaus at gmail.com (Vaclav Petras)
Date: Wed, 2 Sep 2015 10:05:03 -0400
Subject: [pdal] Migrating from libLAS
In-Reply-To: <CACJ51z0BvPz-=9hr_gozHNbuBRD2OC3myN4ZRG7Cs-UU=LY5EQ@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CACJ51z0BvPz-=9hr_gozHNbuBRD2OC3myN4ZRG7Cs-UU=LY5EQ@mail.gmail.com>
Message-ID: <CABo5uVs5zri=iaBG_T=0HN-EcgO_eqhFEpXfB=mU98RpeMbKuQ@mail.gmail.com>

On Tue, Sep 1, 2015 at 11:28 PM, Andrew Bell <andrew.bell.ia at gmail.com>
wrote:
>
> On Tue, Sep 1, 2015 at 9:53 PM, Vaclav Petras <wenzeslaus at gmail.com>
wrote:
> > Hi all,
> >
> > I'm porting GRASS GIS's r.in.lidar module [1] (which is using libLAS) to
> > PDAL and I think I can write a migration guide. Do you think it should
go to
> > the docs? If yes, where? You can view the current state in my fork [2].
> > Unfortunately, it is transitioning from libLAS's C API to PDAL C++ API
since
> > r.in.lidar is using the C API.
> >
> > I have several questions/TODOs in file [2] (feel free to review them).
> > However, now I would like to ask about iterating over the points in the
> > dataset. I do it in the way that I call execute on the reader and then I
> > iterate over points in PointView.  It seems to me that I'm going over
the
> > dataset two times, one reading and then my writing instead of just
reading
> > and writing at the same time as in case of libLAS API.
>
> The short answer is yes, this is what you're doing.  There is a
> callback in some readers that handle point-at-a-time semantics, but
> it's much easier to do what you're doing.

It's easier but apart from the potential memory limits, it also seems that
it is slower. I don't have a exact benchmark yet but it seems that the
libLAS-based v.in.lidar is faster than the PDAL-based one. It makes sense
as they does the same but in addition to it PDAL allocates the memory and
we iterate over points two times.

> >  It also seems that all points are loaded in the memory, should I then
check some limitations or
> > add some error handling?

> Note that PDAL's design is different than libLAS because it's not just
> a LAS reader.

I know that and I hope to use the advanced PDAL functions but the first
step is to be able to use PDAL instead of libLAS in GRASS GIS without
loosing any current features.

> You can use the callback mechanism (setReadCb) along
> with a custom PointTable (derived from BasePointTable) to do your own
> thing if that's what you want.  We built this to allow people to read
> the data without actually storing it in PDAL-allocated memory.

I will look at that. This looks like the thing we need for simple import to
GRASS GIS (v.in.lidar) or binning (r.in.lidar).

>
> On your transition guide:
>
> Point validity: there is no such concept
>
> hasColor: determines whether the LAS dataformat_id supports RGB
> hasDim(Id::Red): determines whether the dimension Red was registered
> with PDAL.  If all you're doing is reading LAS, hasColor() should be
> true when hasDim(Id::Red) is true.
>
> Memory management: PDAL generally takes care of itself.  In your
> example you allocate a reader on the heap, but it can be stuck on the
> stack just as well.  There are no hard requirements on this.

Thanks, I'll make some improvements and pull request hopefully soon.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150902/7b32bd35/attachment.html>

From andrew.bell.ia at gmail.com  Wed Sep  2 07:15:02 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 2 Sep 2015 09:15:02 -0500
Subject: [pdal] Migrating from libLAS
In-Reply-To: <CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
Message-ID: <CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>

On Wed, Sep 2, 2015 at 8:39 AM, Vaclav Petras <wenzeslaus at gmail.com> wrote:
>
> On Wed, Sep 2, 2015 at 8:15 AM, Newcomb, Doug <doug_newcomb at fws.gov> wrote:
>>
>> Does this mean that with the new version of r.in.lidar using pdal that the
>> file size that can be read in will be limited by the amount of memory on my
>> computer?
>>
>>  I currently use r.in.lidar with liblas and can process aggregated las
>> files with up to 4.2 billion points with memory usage limited by the amount
>> of map in memory parameter. ( The type of the analysis cell size and extent
>> also affect memory usage)
>
>
> I meant v.in.lidar, sorry for confusion. But what you are saying applies
> even more for v.in.lidar. It always holds in memory just one point as it
> doesn't combines the points in any way. There might be some issues on GRASS
> site like counting the points but that's a different story.

If you're only using PDAL to read the data from LAS as in your example
code, then using the callback mechanism and a custom PointBuffer will
result in less memory usage and faster run times.  I thought there was
a good example around, but I don't see it, so I'll write one.

PDAL is slower than the libLAS when all you're doing is reading data.
We've spent quite a bit of time looking at this, and have squeezed
most of what we think we can out of it without changing the
architecture.  PDAL isn't intended to be a super-fast LAS reader.
It's made for doing analysis work and handling multiple types of
input/output datasets.  Most of the the time difference you see
between libLAS and PDAL isn't iteration, but data copying.  You can
iterate the data very quickly on most modern computers with sufficient
memory.

Note that PDAL will do a bunch of the work that you're doing in your
code for you.  You can filter based on geometry, do reprojection,
perform classification filtering, etc., without writing code or
writing much less than what you have done.  It will be somewhat slower
than your own code if all you're doing is reading the data and
throwing it away after doing some calculations, but you don't have to
write the code :)

-- 
Andrew Bell
andrew.bell.ia at gmail.com

From andrew.bell.ia at gmail.com  Wed Sep  2 07:24:05 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 2 Sep 2015 09:24:05 -0500
Subject: [pdal] Migrating from libLAS
In-Reply-To: <CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
	<CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
Message-ID: <CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>

There is an example in PointViewTest.cpp called userView that shows
how you might implement a custom PointTable and callback.  It
allocates no memory other than a bit for each field.  There are lots
of options on how you might do this.

On Wed, Sep 2, 2015 at 9:15 AM, Andrew Bell <andrew.bell.ia at gmail.com> wrote:
> On Wed, Sep 2, 2015 at 8:39 AM, Vaclav Petras <wenzeslaus at gmail.com> wrote:
>>
>> On Wed, Sep 2, 2015 at 8:15 AM, Newcomb, Doug <doug_newcomb at fws.gov> wrote:
>>>
>>> Does this mean that with the new version of r.in.lidar using pdal that the
>>> file size that can be read in will be limited by the amount of memory on my
>>> computer?
>>>
>>>  I currently use r.in.lidar with liblas and can process aggregated las
>>> files with up to 4.2 billion points with memory usage limited by the amount
>>> of map in memory parameter. ( The type of the analysis cell size and extent
>>> also affect memory usage)
>>
>>
>> I meant v.in.lidar, sorry for confusion. But what you are saying applies
>> even more for v.in.lidar. It always holds in memory just one point as it
>> doesn't combines the points in any way. There might be some issues on GRASS
>> site like counting the points but that's a different story.
>
> If you're only using PDAL to read the data from LAS as in your example
> code, then using the callback mechanism and a custom PointBuffer will
> result in less memory usage and faster run times.  I thought there was
> a good example around, but I don't see it, so I'll write one.
>
> PDAL is slower than the libLAS when all you're doing is reading data.
> We've spent quite a bit of time looking at this, and have squeezed
> most of what we think we can out of it without changing the
> architecture.  PDAL isn't intended to be a super-fast LAS reader.
> It's made for doing analysis work and handling multiple types of
> input/output datasets.  Most of the the time difference you see
> between libLAS and PDAL isn't iteration, but data copying.  You can
> iterate the data very quickly on most modern computers with sufficient
> memory.
>
> Note that PDAL will do a bunch of the work that you're doing in your
> code for you.  You can filter based on geometry, do reprojection,
> perform classification filtering, etc., without writing code or
> writing much less than what you have done.  It will be somewhat slower
> than your own code if all you're doing is reading the data and
> throwing it away after doing some calculations, but you don't have to
> write the code :)
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com



-- 
Andrew Bell
andrew.bell.ia at gmail.com

From andrew.bell.ia at gmail.com  Wed Sep  2 07:27:09 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 2 Sep 2015 09:27:09 -0500
Subject: [pdal] Migrating from libLAS
In-Reply-To: <CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
	<CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
	<CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>
Message-ID: <CACJ51z1+qVNZ3-Ny0mUBNVRDCeJbKbdC=wP6FSzJL8wC24cP=A@mail.gmail.com>

On Wed, Sep 2, 2015 at 9:24 AM, Andrew Bell <andrew.bell.ia at gmail.com> wrote:
> There is an example in PointViewTest.cpp called userView that shows
> how you might implement a custom PointTable and callback.  It
> allocates no memory other than a bit for each field.  There are lots
> of options on how you might do this.

I take that back.  It looks incomplete.  I'll fix.

-- 
Andrew Bell
andrew.bell.ia at gmail.com

From dan.ames at byu.edu  Wed Sep  2 09:04:00 2015
From: dan.ames at byu.edu (Dan Ames)
Date: Wed, 02 Sep 2015 16:04:00 +0000
Subject: [pdal] Support for BAG file format
Message-ID: <CAAduJf5gzFvKA4AacCV4O6zs2jWukEpUKX6GRP=EtpW0c34yyQ@mail.gmail.com>

Hi all,

Glad to see that PDAL is still under very active development! (last commit
1 hour ago!)

Quick question: We have a new Velodyne VLP 16 LiDAR Puck that generates
data in a .BAG file format.

Does PDAL support this file? We'd like to convert it to LAS...

Thanks in advance,

Dan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150902/ddb862a9/attachment.html>

From wenzeslaus at gmail.com  Wed Sep  2 12:47:35 2015
From: wenzeslaus at gmail.com (Vaclav Petras)
Date: Wed, 2 Sep 2015 15:47:35 -0400
Subject: [pdal] Migrating from libLAS
In-Reply-To: <CACJ51z1+qVNZ3-Ny0mUBNVRDCeJbKbdC=wP6FSzJL8wC24cP=A@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
	<CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
	<CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>
	<CACJ51z1+qVNZ3-Ny0mUBNVRDCeJbKbdC=wP6FSzJL8wC24cP=A@mail.gmail.com>
Message-ID: <CABo5uVu1YKX_H0nJha+SHY3C85BUB7Q=Gq+9oQrwU2VcwKEyvg@mail.gmail.com>

On Wed, Sep 2, 2015 at 10:27 AM, Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

> On Wed, Sep 2, 2015 at 9:24 AM, Andrew Bell <andrew.bell.ia at gmail.com>
> wrote:
> > There is an example in PointViewTest.cpp called userView that shows
> > how you might implement a custom PointTable and callback.  It
> > allocates no memory other than a bit for each field.  There are lots
> > of options on how you might do this.
>
> I take that back.  It looks incomplete.  I'll fix.


This would be great I was looking at PointTableTest.cpp and I'm not able to
make sense out of that. I wanted to run the tests but with make test I'm
not sure if this one passed or not (I see only pdal_point_table_test).

Thanks for the feedback on the transition guide. I incorporated your
answers there. I'm almost finished with it. I just need to answer one more
question (I'll send a separate email).

Thanks,
Vaclav
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150902/a6ab094b/attachment.html>

From andrew.bell.ia at gmail.com  Wed Sep  2 14:16:08 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 2 Sep 2015 16:16:08 -0500
Subject: [pdal] Migrating from libLAS
In-Reply-To: <CABo5uVu1YKX_H0nJha+SHY3C85BUB7Q=Gq+9oQrwU2VcwKEyvg@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
	<CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
	<CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>
	<CACJ51z1+qVNZ3-Ny0mUBNVRDCeJbKbdC=wP6FSzJL8wC24cP=A@mail.gmail.com>
	<CABo5uVu1YKX_H0nJha+SHY3C85BUB7Q=Gq+9oQrwU2VcwKEyvg@mail.gmail.com>
Message-ID: <CACJ51z2hedd4yhdsYxu9qg_14=sASJEktoXktLuxA9TnyZ9T4Q@mail.gmail.com>

Here's an example from the test code where I've removed all the stuff
that actually tests.  First we create a point table that's a subclass
of PointTable.  It only supports x, y, and z.  Then we register a
callback to be invoked each time a point is read (it does nothing
other than fetch the data).  I've also annotated the code.

TEST(PointTable, userView)
{
    class UserTable : public PointTable
    {

    // Local members to contain X, Y and Z
    private:
        double m_x;
        double m_y;
        double m_z;

    public:
        // addPoint() normally allocates memory for a point when
necessary and returns the PointId of the
        // latest point added.  In this case, we're not allocating
memory at all since we're not storing point data.
        // We return 0 as the PointId.
        PointId addPoint()
            { return 0; }

        // getPoint() provides raw access to point data.  Nobody
normally need call it, but it's there and we
        // redefine it to return NULL so that's it's clear that if you
DO call it, you've probably done something
        // wrong.
        char *getPoint(PointId idx)
            { return NULL; }

        // setField() gets called for data field as points are read.
The data is passed in based on the registered
        // type.  This type can be determined from the
Dimension::Detail if necessary, but X, Y and Z
        // are always registered as doubles, so we just cast.  Even if
they weren't stored as doubles,
        // we might well know the data type based on registration.
Note that if this function is called for
        // dimensions other than X, Y or Z, it's a noop.  Also note
that we ignore the PointId since we're not
        // storing points.
        // IMPORTANT NOTE:  The registered data type may be something
different than that read from a
        // file depending on what you're doing.  PDAL promotes type as
necessary to accommodate all the
        // stages in the pipeline.  HOWEVER, if you're simply reading
LAS, the type will be that registered
        // by the LasReader.  See LasReader::addDimensions().  If the
registration of a dimension doesn't
        // specify a type, the default type of the dimension is used
(see Dimension.hpp).
        void setField(const Dimension::Detail *d, PointId idx,
            const void *value)
        {
            if (d->id() == Dimension::Id::X)
               m_x = *(const double *)value;
            else if (d->id() == Dimension::Id::Y)
               m_y = *(const double *)value;
            else if (d->id() == Dimension::Id::Z)
               m_z = *(const double *)value;
        }

        // This is just the reverse of the above.
        void getField(const Dimension::Detail *d, PointId idx, void *value)
        {
            if (d->id() == Dimension::Id::X)
               *(double *)value = m_x;
            else if (d->id() == Dimension::Id::Y)
               *(double *)value = m_y;
            else if (d->id() == Dimension::Id::Z)
               *(double *)value = m_z;
        }
    };

    LasReader reader;

    Options opts;
    opts.add("filename", Support::datapath("las/simple.las"));

    reader.setOptions(opts);

    // This is a callback to be invoked when storage of a point is
complete (setField() has been called for all
    // fields in a point.  In this case we just read the data from the
PointTable through the provided PointView.
    auto readCb = [](PointView& customView, PointId id)
    {
        double x = customView.getFieldAs<double>(Dimension::Id::X, id);
        double y = customView.getFieldAs<double>(Dimension::Id::Y, id);
        double z = customView.getFieldAs<double>(Dimension::Id::Z, id);
    };

    // This sets the callback into the reader.  Note that you may not
need to use a callback at all with
    // a custom PointTable.  You may be able to do all the work you
need as the fields are stored.  But it may also
    // be easier to wait until the point is fully populated in order
to do your custom processing.
    reader.setReadCb(readCb);

    UserTable table;

    // Go...
    reader.prepare(table);
    reader.execute(table);
}

On Wed, Sep 2, 2015 at 2:47 PM, Vaclav Petras <wenzeslaus at gmail.com> wrote:
>
>
> On Wed, Sep 2, 2015 at 10:27 AM, Andrew Bell <andrew.bell.ia at gmail.com>
> wrote:
>>
>> On Wed, Sep 2, 2015 at 9:24 AM, Andrew Bell <andrew.bell.ia at gmail.com>
>> wrote:
>> > There is an example in PointViewTest.cpp called userView that shows
>> > how you might implement a custom PointTable and callback.  It
>> > allocates no memory other than a bit for each field.  There are lots
>> > of options on how you might do this.
>>
>> I take that back.  It looks incomplete.  I'll fix.
>
>
> This would be great I was looking at PointTableTest.cpp and I'm not able to
> make sense out of that. I wanted to run the tests but with make test I'm not
> sure if this one passed or not (I see only pdal_point_table_test).
>
> Thanks for the feedback on the transition guide. I incorporated your answers
> there. I'm almost finished with it. I just need to answer one more question
> (I'll send a separate email).
>
> Thanks,
> Vaclav



-- 
Andrew Bell
andrew.bell.ia at gmail.com

From wenzeslaus at gmail.com  Wed Sep  2 17:10:55 2015
From: wenzeslaus at gmail.com (Vaclav Petras)
Date: Wed, 2 Sep 2015 20:10:55 -0400
Subject: [pdal] Migrating from libLAS
In-Reply-To: <CACJ51z2hedd4yhdsYxu9qg_14=sASJEktoXktLuxA9TnyZ9T4Q@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
	<CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
	<CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>
	<CACJ51z1+qVNZ3-Ny0mUBNVRDCeJbKbdC=wP6FSzJL8wC24cP=A@mail.gmail.com>
	<CABo5uVu1YKX_H0nJha+SHY3C85BUB7Q=Gq+9oQrwU2VcwKEyvg@mail.gmail.com>
	<CACJ51z2hedd4yhdsYxu9qg_14=sASJEktoXktLuxA9TnyZ9T4Q@mail.gmail.com>
Message-ID: <CABo5uVv9rDUS6sKngszZtTNC_otO0BVNMJLuFVbnoLQ2+dJV3w@mail.gmail.com>

On Wed, Sep 2, 2015 at 5:16 PM, Andrew Bell <andrew.bell.ia at gmail.com>
wrote:
>
> Here's an example from the test code where I've removed all the stuff
> that actually tests.  First we create a point table that's a subclass
> of PointTable.  It only supports x, y, and z.  Then we register a
> callback to be invoked each time a point is read (it does nothing
> other than fetch the data).  I've also annotated the code.

Awesome, thanks! The comments are also very helpful.

Now I have the v.in.lidar implementation as described in the guide I'm
working on. I will try how it will look like on GRASS GIS site. Then I will
get back to this. Reading only as you described it, wrapped in C API, would
be the ideal solution for the current v.in.lidar concept (import and basic
filtering).

Vaclav
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150902/2e921b61/attachment.html>

From wenzeslaus at gmail.com  Wed Sep  2 17:36:19 2015
From: wenzeslaus at gmail.com (Vaclav Petras)
Date: Wed, 2 Sep 2015 20:36:19 -0400
Subject: [pdal] How to test if file was loaded successfully?
Message-ID: <CABo5uVve_dpJn8LhOEM0csViA5pFFamuZDZD5rwQuHvDsqnC9w@mail.gmail.com>

Hi,

any suggestions how should I test if a file was loaded successfully?
Example of code is in the porting guide I'm working on [1].

What was in the libLAS code I'm using is

    LASReaderH LAS_reader = LASReader_Create("somefile.las");
    LASHeaderH LAS_header = LASReader_GetHeader(LAS_reader);
    if (LAS_header == NULL)
        // fail with "Input file is not a LAS LiDAR point cloud"

Now I'm using (now check):

    std::unique_ptr<LasReader> las_reader(LasReader())

Somewhere in the PDAL source code I've seen:

    Stage *stage = factory.createStage(driver);
        if (!stage)
            // fail with "reader creation failed"

Later followed by (or any other appropriate pointer handling):

    std::unique_ptr<Stage>(s)

Is this the right approach to use in general with functions in PDAL
returning pointers? Can I use it with the LasReader()?

Are there any other things I should check for in this opening and reading
phase? Some typical error states? Wrong/unknow format? Or should I just
wrap this whole part in a big try-catch with pdal_error?

Thanks for suggestions,
Vaclav

[1]
https://github.com/wenzeslaus/PDAL/blob/liblas-to-pdal-transition/doc/tutorial/liblas_to_pdal.rst
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150902/fabae6c3/attachment.html>

From andrew.bell.ia at gmail.com  Wed Sep  2 18:15:33 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 2 Sep 2015 20:15:33 -0500
Subject: [pdal] How to test if file was loaded successfully?
In-Reply-To: <CABo5uVve_dpJn8LhOEM0csViA5pFFamuZDZD5rwQuHvDsqnC9w@mail.gmail.com>
References: <CABo5uVve_dpJn8LhOEM0csViA5pFFamuZDZD5rwQuHvDsqnC9w@mail.gmail.com>
Message-ID: <CACJ51z3rGvAgbJ6w4UEqkf0h2tY-GxbNOY8N1wWXW1Cy7Ya+Rg@mail.gmail.com>

On Wed, Sep 2, 2015 at 7:36 PM, Vaclav Petras <wenzeslaus at gmail.com> wrote:
> Hi,
>
> any suggestions how should I test if a file was loaded successfully? Example
> of code is in the porting guide I'm working on [1].
>
> What was in the libLAS code I'm using is
>
>     LASReaderH LAS_reader = LASReader_Create("somefile.las");
>     LASHeaderH LAS_header = LASReader_GetHeader(LAS_reader);
>     if (LAS_header == NULL)
>         // fail with "Input file is not a LAS LiDAR point cloud"

PDAL will throw a pdal_error exception if it can't load the dataset.

> Now I'm using (now check):
>
>     std::unique_ptr<LasReader> las_reader(LasReader())
>
> Somewhere in the PDAL source code I've seen:
>
>     Stage *stage = factory.createStage(driver);
>         if (!stage)
>             // fail with "reader creation failed"
>
> Later followed by (or any other appropriate pointer handling):
>
>     std::unique_ptr<Stage>(s)
>
> Is this the right approach to use in general with functions in PDAL
> returning pointers? Can I use it with the LasReader()?

You can simply do:

LasReader r;

r.prepare();
r.execute();

The stage factory is useful for plugins, but the LAS driver isn't
built as a plugin, so you can just make the stage on the stack.

> Are there any other things I should check for in this opening and reading
> phase? Some typical error states? Wrong/unknow format? Or should I just wrap
> this whole part in a big try-catch with pdal_error?

Yes.  We throw this all over the place.  It's the only exception we
throw (or should be soon) and it means that we couldn't complete and
there's no possible recovery.

-- 
Andrew Bell
andrew.bell.ia at gmail.com

From howard at hobu.co  Thu Sep  3 06:09:20 2015
From: howard at hobu.co (Howard Butler)
Date: Thu, 3 Sep 2015 08:09:20 -0500
Subject: [pdal] Support for BAG file format
In-Reply-To: <CAAduJf5gzFvKA4AacCV4O6zs2jWukEpUKX6GRP=EtpW0c34yyQ@mail.gmail.com>
References: <CAAduJf5gzFvKA4AacCV4O6zs2jWukEpUKX6GRP=EtpW0c34yyQ@mail.gmail.com>
Message-ID: <2159A884-91CF-47AE-B9B4-14F4BFFB8D75@hobu.co>


> On Sep 2, 2015, at 11:04 AM, Dan Ames <dan.ames at byu.edu> wrote:
> 
> Hi all, 
> 
> Glad to see that PDAL is still under very active development! (last commit 1 hour ago!)
> 
> Quick question: We have a new Velodyne VLP 16 LiDAR Puck that generates data in a .BAG file format. 
> 
> Does PDAL support this file? We'd like to convert it to LAS...

PDAL does not support BAG at this time, but it is a very simple format. Do you have a few small example files we can permanently add to the test suite? Maybe we could whip something up...

Howard


From dan.ames at byu.edu  Thu Sep  3 08:43:56 2015
From: dan.ames at byu.edu (Dan Ames)
Date: Thu, 03 Sep 2015 15:43:56 +0000
Subject: [pdal] Support for BAG file format
In-Reply-To: <2159A884-91CF-47AE-B9B4-14F4BFFB8D75@hobu.co>
References: <CAAduJf5gzFvKA4AacCV4O6zs2jWukEpUKX6GRP=EtpW0c34yyQ@mail.gmail.com>
	<2159A884-91CF-47AE-B9B4-14F4BFFB8D75@hobu.co>
Message-ID: <CAAduJf5OaMO8u-aEB-epb2iU55j4aXd90ZwN1NjiHbwmWgEBsQ@mail.gmail.com>

Thanks Howard. All I've got right now is a 700MB file which is too big to
experiment with. I'll see if we can get a couple of small examples put
together next week and post them. Looks like this is going to be a more
common file in the future since these inexpensive velodyne LiDAR pucks are
growing in popularity. Not sure why we can't get it to just generate LAS
files but we'll do whatever we have to do I suppose! - Dan

On Thu, Sep 3, 2015 at 7:09 AM Howard Butler <howard at hobu.co> wrote:

>
> > On Sep 2, 2015, at 11:04 AM, Dan Ames <dan.ames at byu.edu> wrote:
> >
> > Hi all,
> >
> > Glad to see that PDAL is still under very active development! (last
> commit 1 hour ago!)
> >
> > Quick question: We have a new Velodyne VLP 16 LiDAR Puck that generates
> data in a .BAG file format.
> >
> > Does PDAL support this file? We'd like to convert it to LAS...
>
> PDAL does not support BAG at this time, but it is a very simple format. Do
> you have a few small example files we can permanently add to the test
> suite? Maybe we could whip something up...
>
> Howard
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150903/ae26e04a/attachment-0001.html>

From doug_newcomb at fws.gov  Thu Sep  3 10:41:27 2015
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Thu, 3 Sep 2015 13:41:27 -0400
Subject: [pdal] Migrating from libLAS
In-Reply-To: <CABo5uVv9rDUS6sKngszZtTNC_otO0BVNMJLuFVbnoLQ2+dJV3w@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
	<CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
	<CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>
	<CACJ51z1+qVNZ3-Ny0mUBNVRDCeJbKbdC=wP6FSzJL8wC24cP=A@mail.gmail.com>
	<CABo5uVu1YKX_H0nJha+SHY3C85BUB7Q=Gq+9oQrwU2VcwKEyvg@mail.gmail.com>
	<CACJ51z2hedd4yhdsYxu9qg_14=sASJEktoXktLuxA9TnyZ9T4Q@mail.gmail.com>
	<CABo5uVv9rDUS6sKngszZtTNC_otO0BVNMJLuFVbnoLQ2+dJV3w@mail.gmail.com>
Message-ID: <CALQGVr1yocJa_dkZHbf1aVy7yWPyMJG4BzBaE_EYfm+YLvoppw@mail.gmail.com>

Could there be an option to filter for height above ground in reference to
an external DEM?

Doug

On Wed, Sep 2, 2015 at 8:10 PM, Vaclav Petras <wenzeslaus at gmail.com> wrote:

>
> On Wed, Sep 2, 2015 at 5:16 PM, Andrew Bell <andrew.bell.ia at gmail.com>
> wrote:
> >
> > Here's an example from the test code where I've removed all the stuff
> > that actually tests.  First we create a point table that's a subclass
> > of PointTable.  It only supports x, y, and z.  Then we register a
> > callback to be invoked each time a point is read (it does nothing
> > other than fetch the data).  I've also annotated the code.
>
> Awesome, thanks! The comments are also very helpful.
>
> Now I have the v.in.lidar implementation as described in the guide I'm
> working on. I will try how it will look like on GRASS GIS site. Then I will
> get back to this. Reading only as you described it, wrapped in C API, would
> be the ideal solution for the current v.in.lidar concept (import and basic
> filtering).
>
> Vaclav
>



-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150903/1d61fe54/attachment.html>

From howard at hobu.co  Thu Sep  3 10:47:10 2015
From: howard at hobu.co (Howard Butler)
Date: Thu, 3 Sep 2015 12:47:10 -0500
Subject: [pdal] Migrating from libLAS
In-Reply-To: <CALQGVr1yocJa_dkZHbf1aVy7yWPyMJG4BzBaE_EYfm+YLvoppw@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
	<CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
	<CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>
	<CACJ51z1+qVNZ3-Ny0mUBNVRDCeJbKbdC=wP6FSzJL8wC24cP=A@mail.gmail.com>
	<CABo5uVu1YKX_H0nJha+SHY3C85BUB7Q=Gq+9oQrwU2VcwKEyvg@mail.gmail.com>
	<CACJ51z2hedd4yhdsYxu9qg_14=sASJEktoXktLuxA9TnyZ9T4Q@mail.gmail.com>
	<CABo5uVv9rDUS6sKngszZtTNC_otO0BVNMJLuFVbnoLQ2+dJV3w@mail.gmail.com>
	<CALQGVr1yocJa_dkZHbf1aVy7yWPyMJG4BzBaE_EYfm+YLvoppw@mail.gmail.com>
Message-ID: <C5D546D1-F9E9-4B05-9A36-05142DE0AF58@hobu.co>

On the list. How would you envision it should work?

> On Sep 3, 2015, at 12:41 PM, Newcomb, Doug <doug_newcomb at fws.gov> wrote:
> 
> Could there be an option to filter for height above ground in reference to an external DEM?
> 
> Doug
> 
> On Wed, Sep 2, 2015 at 8:10 PM, Vaclav Petras <wenzeslaus at gmail.com> wrote:
> 
> On Wed, Sep 2, 2015 at 5:16 PM, Andrew Bell <andrew.bell.ia at gmail.com> wrote:
> >
> > Here's an example from the test code where I've removed all the stuff
> > that actually tests.  First we create a point table that's a subclass
> > of PointTable.  It only supports x, y, and z.  Then we register a
> > callback to be invoked each time a point is read (it does nothing
> > other than fetch the data).  I've also annotated the code.
> 
> Awesome, thanks! The comments are also very helpful.
> 
> Now I have the v.in.lidar implementation as described in the guide I'm working on. I will try how it will look like on GRASS GIS site. Then I will get back to this. Reading only as you described it, wrapped in C API, would be the ideal solution for the current v.in.lidar concept (import and basic filtering).
> 
> Vaclav
> 
> 
> 
> -- 
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb at fws.gov
> ---------------------------------------------------------------------------------------------------------
> The opinions I express are my own and are not representative of the official policy of the U.S.Fish and Wildlife Service or Dept. of the Interior.   Life is too short for undocumented, proprietary data formats.
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal


From doug_newcomb at fws.gov  Thu Sep  3 14:14:07 2015
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Thu, 3 Sep 2015 17:14:07 -0400
Subject: [pdal] Migrating from libLAS
In-Reply-To: <C5D546D1-F9E9-4B05-9A36-05142DE0AF58@hobu.co>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
	<CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
	<CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>
	<CACJ51z1+qVNZ3-Ny0mUBNVRDCeJbKbdC=wP6FSzJL8wC24cP=A@mail.gmail.com>
	<CABo5uVu1YKX_H0nJha+SHY3C85BUB7Q=Gq+9oQrwU2VcwKEyvg@mail.gmail.com>
	<CACJ51z2hedd4yhdsYxu9qg_14=sASJEktoXktLuxA9TnyZ9T4Q@mail.gmail.com>
	<CABo5uVv9rDUS6sKngszZtTNC_otO0BVNMJLuFVbnoLQ2+dJV3w@mail.gmail.com>
	<CALQGVr1yocJa_dkZHbf1aVy7yWPyMJG4BzBaE_EYfm+YLvoppw@mail.gmail.com>
	<C5D546D1-F9E9-4B05-9A36-05142DE0AF58@hobu.co>
Message-ID: <CALQGVr0wSLuu=2ppCdktndk-0dY0k_=vPhxQKEPpREu97EY4Lw@mail.gmail.com>

Well,
In my dream world, suppose I have a delivery of a DEMs ( dem05_1.img, etc.
for a 5ft resolution dem)  layer and  point cloud ( las1.las ,etc.).  I
would like to perform statistics on the z values of the point cloud in a
binning fashion as done in r.in.lidar .  However, I would like the
statistics to be done on z values that are height above  ground , not
absolute heights

 To avoid edge effects, I aggregate all of the las files togeather ( up to
4.2 billion points per file ) and use gdalbuildvrt to create a single vrt
of the dem images. ( I don't recall seeing something like lasbuildvrt, but
that would be nice)

I then call r.in lidar  ( resolution set to 60ft cells, vertical values are
in feet) :

r.in.lidar input=aggregated.las output=skewness_60_ft_5ft_to_canopy_top
 z_mode=hag base_dem=aggrgated_dem.vrt zrange=5,250 method=skewness

z_mode would be either height above ground (hag) or datum (height from
datum - default)

dem would be the filename of the vrt file or any other gdal - compatible
image format. No value would be needed for this unless z_mode was equal to
hag.

As I envision the working, for each bin as each point is read in, the z
value is compared to the value of the dem ( z - dem value)  at the xy
location and the difference replaces the original z value in memory.  After
all of the points are read in for a bin , perform the statistic for that
bin for the modified z values and move on to the next bin.

If you are performing the statistics on the intensities or any other
attribute, I would still like to be able to filter by the above ground z
values.  I imagine that the mean intensity for 5 ft above ground slices of
the canopy might be quite interesting.

This would allow you to perform all of the analysis without having to
create a height above ground copy of the las files for input into
r.in.lidar, staying as close to working with the original data as
possible.  As the size of lidar data sets increases, it seems logical to
reduce the amount of data duplication required.

Does that seem like something workable and scaleable with a pdal - GRASS
interface?

Doug

On Thu, Sep 3, 2015 at 1:47 PM, Howard Butler <howard at hobu.co> wrote:

> On the list. How would you envision it should work?
>
> > On Sep 3, 2015, at 12:41 PM, Newcomb, Doug <doug_newcomb at fws.gov> wrote:
> >
> > Could there be an option to filter for height above ground in reference
> to an external DEM?
> >
> > Doug
> >
> > On Wed, Sep 2, 2015 at 8:10 PM, Vaclav Petras <wenzeslaus at gmail.com>
> wrote:
> >
> > On Wed, Sep 2, 2015 at 5:16 PM, Andrew Bell <andrew.bell.ia at gmail.com>
> wrote:
> > >
> > > Here's an example from the test code where I've removed all the stuff
> > > that actually tests.  First we create a point table that's a subclass
> > > of PointTable.  It only supports x, y, and z.  Then we register a
> > > callback to be invoked each time a point is read (it does nothing
> > > other than fetch the data).  I've also annotated the code.
> >
> > Awesome, thanks! The comments are also very helpful.
> >
> > Now I have the v.in.lidar implementation as described in the guide I'm
> working on. I will try how it will look like on GRASS GIS site. Then I will
> get back to this. Reading only as you described it, wrapped in C API, would
> be the ideal solution for the current v.in.lidar concept (import and basic
> filtering).
> >
> > Vaclav
> >
> >
> >
> > --
> > Doug Newcomb
> > USFWS
> > Raleigh, NC
> > 919-856-4520 ext. 14 doug_newcomb at fws.gov
> >
> ---------------------------------------------------------------------------------------------------------
> > The opinions I express are my own and are not representative of the
> official policy of the U.S.Fish and Wildlife Service or Dept. of the
> Interior.   Life is too short for undocumented, proprietary data formats.
> > _______________________________________________
> > pdal mailing list
> > pdal at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/pdal
>
>


-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150903/e45012b5/attachment.html>

From Michael.Smith at erdc.dren.mil  Thu Sep  3 14:33:36 2015
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Thu, 3 Sep 2015 21:33:36 +0000
Subject: [pdal] [EXTERNAL] Re:  Migrating from libLAS
In-Reply-To: <CALQGVr0wSLuu=2ppCdktndk-0dY0k_=vPhxQKEPpREu97EY4Lw@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
	<CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
	<CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>
	<CACJ51z1+qVNZ3-Ny0mUBNVRDCeJbKbdC=wP6FSzJL8wC24cP=A@mail.gmail.com>
	<CABo5uVu1YKX_H0nJha+SHY3C85BUB7Q=Gq+9oQrwU2VcwKEyvg@mail.gmail.com>
	<CACJ51z2hedd4yhdsYxu9qg_14=sASJEktoXktLuxA9TnyZ9T4Q@mail.gmail.com>
	<CABo5uVv9rDUS6sKngszZtTNC_otO0BVNMJLuFVbnoLQ2+dJV3w@mail.gmail.com>
	<CALQGVr1yocJa_dkZHbf1aVy7yWPyMJG4BzBaE_EYfm+YLvoppw@mail.gmail.com>
	<C5D546D1-F9E9-4B05-9A36-05142DE0AF58@hobu.co>
	<CALQGVr0wSLuu=2ppCdktndk-0dY0k_=vPhxQKEPpREu97EY4Lw@mail.gmail.com>
Message-ID: <D20E3391.118A28%michael.smith@erdc.dren.mil>

Howard,

I'm wondering if GRASS would even be needed here. I would think that one could create a pipeline and use the filters.colorization filter to spatially join to the DEM vrt and apply the HAG values from the DEM to a new dimension (in LAS 1.4, or even something like BPF) and then stats could be run against the originally Z and the new Z. One could use the filters.merge to read N input files (although it would be much simpler if PDAL could read a pdal tindex file directly) and then write it out either to a single file or one could add a filters.chipper and a writer to write back out N files.

I haven't tested this scenario though.
----
Michael Smith
US Army Corps
Remote Sensing GIS/Center
michael.smith at usace.army.mil


From: <pdal-bounces at lists.osgeo.org<mailto:pdal-bounces at lists.osgeo.org>> on behalf of "Newcomb, Doug" <doug_newcomb at fws.gov<mailto:doug_newcomb at fws.gov>>
Date: Thursday, September 3, 2015 at 5:14 PM
To: Howard Butler <howard at hobu.co<mailto:howard at hobu.co>>
Cc: pdal <pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>>
Subject: [EXTERNAL] Re: [pdal] Migrating from libLAS
Resent-From: Michael Smith <michael.smith at usace.army.mil<mailto:michael.smith at usace.army.mil>>

Well,
In my dream world, suppose I have a delivery of a DEMs ( dem05_1.img, etc. for a 5ft resolution dem)  layer and  point cloud ( las1.las ,etc.).  I would like to perform statistics on the z values of the point cloud in a binning fashion as done in r.in.lidar .  However, I would like the statistics to be done on z values that are height above  ground , not absolute heights

 To avoid edge effects, I aggregate all of the las files togeather ( up to 4.2 billion points per file ) and use gdalbuildvrt to create a single vrt of the dem images. ( I don't recall seeing something like lasbuildvrt, but that would be nice)

I then call r.in<BlockedBlockedhttp://r.inBlocked> lidar  ( resolution set to 60ft cells, vertical values are in feet) :

r.in.lidar input=aggregated.las output=skewness_60_ft_5ft_to_canopy_top  z_mode=hag base_dem=aggrgated_dem.vrt zrange=5,250 method=skewness

z_mode would be either height above ground (hag) or datum (height from datum - default)

dem would be the filename of the vrt file or any other gdal - compatible image format. No value would be needed for this unless z_mode was equal to hag.

As I envision the working, for each bin as each point is read in, the z value is compared to the value of the dem ( z - dem value)  at the xy location and the difference replaces the original z value in memory.  After all of the points are read in for a bin , perform the statistic for that bin for the modified z values and move on to the next bin.

If you are performing the statistics on the intensities or any other attribute, I would still like to be able to filter by the above ground z values.  I imagine that the mean intensity for 5 ft above ground slices of the canopy might be quite interesting.

This would allow you to perform all of the analysis without having to create a height above ground copy of the las files for input into r.in.lidar, staying as close to working with the original data as possible.  As the size of lidar data sets increases, it seems logical to reduce the amount of data duplication required.

Does that seem like something workable and scaleable with a pdal - GRASS interface?

Doug

On Thu, Sep 3, 2015 at 1:47 PM, Howard Butler <howard at hobu.co<mailto:howard at hobu.co>> wrote:
On the list. How would you envision it should work?

> On Sep 3, 2015, at 12:41 PM, Newcomb, Doug <doug_newcomb at fws.gov<mailto:doug_newcomb at fws.gov>> wrote:
>
> Could there be an option to filter for height above ground in reference to an external DEM?
>
> Doug
>
> On Wed, Sep 2, 2015 at 8:10 PM, Vaclav Petras <wenzeslaus at gmail.com<mailto:wenzeslaus at gmail.com>> wrote:
>
> On Wed, Sep 2, 2015 at 5:16 PM, Andrew Bell <andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>> wrote:
> >
> > Here's an example from the test code where I've removed all the stuff
> > that actually tests.  First we create a point table that's a subclass
> > of PointTable.  It only supports x, y, and z.  Then we register a
> > callback to be invoked each time a point is read (it does nothing
> > other than fetch the data).  I've also annotated the code.
>
> Awesome, thanks! The comments are also very helpful.
>
> Now I have the v.in.lidar implementation as described in the guide I'm working on. I will try how it will look like on GRASS GIS site. Then I will get back to this. Reading only as you described it, wrapped in C API, would be the ideal solution for the current v.in.lidar concept (import and basic filtering).
>
> Vaclav
>
>
>
> --
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb at fws.gov<mailto:doug_newcomb at fws.gov>
> ---------------------------------------------------------------------------------------------------------
> The opinions I express are my own and are not representative of the official policy of the U.S.Fish and Wildlife Service or Dept. of the Interior.   Life is too short for undocumented, proprietary data formats.
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
> BlockedBlockedhttp://lists.osgeo.org/mailman/listinfo/pdalBlocked




--
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov<mailto:doug_newcomb at fws.gov>
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the official policy of the U.S.Fish and Wildlife Service or Dept. of the Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150903/7ac1604b/attachment-0001.html>

From doug_newcomb at fws.gov  Thu Sep  3 14:43:16 2015
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Thu, 3 Sep 2015 17:43:16 -0400
Subject: [pdal] [EXTERNAL] Re:  Migrating from libLAS
In-Reply-To: <D20E3391.118A28%michael.smith@erdc.dren.mil>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
	<CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
	<CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>
	<CACJ51z1+qVNZ3-Ny0mUBNVRDCeJbKbdC=wP6FSzJL8wC24cP=A@mail.gmail.com>
	<CABo5uVu1YKX_H0nJha+SHY3C85BUB7Q=Gq+9oQrwU2VcwKEyvg@mail.gmail.com>
	<CACJ51z2hedd4yhdsYxu9qg_14=sASJEktoXktLuxA9TnyZ9T4Q@mail.gmail.com>
	<CABo5uVv9rDUS6sKngszZtTNC_otO0BVNMJLuFVbnoLQ2+dJV3w@mail.gmail.com>
	<CALQGVr1yocJa_dkZHbf1aVy7yWPyMJG4BzBaE_EYfm+YLvoppw@mail.gmail.com>
	<C5D546D1-F9E9-4B05-9A36-05142DE0AF58@hobu.co>
	<CALQGVr0wSLuu=2ppCdktndk-0dY0k_=vPhxQKEPpREu97EY4Lw@mail.gmail.com>
	<D20E3391.118A28%michael.smith@erdc.dren.mil>
Message-ID: <CALQGVr1LV5Pay-t8kyOZG6gyDKtc9F7YLxg5a8_8Y5D5ys9DGw@mail.gmail.com>

I'm fairly sure it could be done outside of GRASS, but I like the control I
have within the GRASS framework over analysis extents, resolution, and
masks, along with the other analyses I can "pipeline" in a python script in
GRASS :-)

Doug

On Thu, Sep 3, 2015 at 5:33 PM, Smith, Michael ERDC-RDE-CRREL-NH <
Michael.Smith at erdc.dren.mil> wrote:

> Howard,
>
> I'm wondering if GRASS would even be needed here. I would think that one
> could create a pipeline and use the filters.colorization filter to
> spatially join to the DEM vrt and apply the HAG values from the DEM to a
> new dimension (in LAS 1.4, or even something like BPF) and then stats could
> be run against the originally Z and the new Z. One could use the
> filters.merge to read N input files (although it would be much simpler if
> PDAL could read a pdal tindex file directly) and then write it out either
> to a single file or one could add a filters.chipper and a writer to write
> back out N files.
>
> I haven't tested this scenario though.
> ----
> Michael Smith
> US Army Corps
> Remote Sensing GIS/Center
> michael.smith at usace.army.mil
>
>
> From: <pdal-bounces at lists.osgeo.org> on behalf of "Newcomb, Doug" <
> doug_newcomb at fws.gov>
> Date: Thursday, September 3, 2015 at 5:14 PM
> To: Howard Butler <howard at hobu.co>
> Cc: pdal <pdal at lists.osgeo.org>
> Subject: [EXTERNAL] Re: [pdal] Migrating from libLAS
> Resent-From: Michael Smith <michael.smith at usace.army.mil>
>
> Well,
> In my dream world, suppose I have a delivery of a DEMs ( dem05_1.img, etc.
> for a 5ft resolution dem)  layer and  point cloud ( las1.las ,etc.).  I
> would like to perform statistics on the z values of the point cloud in a
> binning fashion as done in r.in.lidar .  However, I would like the
> statistics to be done on z values that are height above  ground , not
> absolute heights
>
>  To avoid edge effects, I aggregate all of the las files togeather ( up to
> 4.2 billion points per file ) and use gdalbuildvrt to create a single vrt
> of the dem images. ( I don't recall seeing something like lasbuildvrt, but
> that would be nice)
>
> I then call r.in lidar  ( resolution set to 60ft cells, vertical values
> are in feet) :
>
> r.in.lidar input=aggregated.las output=skewness_60_ft_5ft_to_canopy_top
>  z_mode=hag base_dem=aggrgated_dem.vrt zrange=5,250 method=skewness
>
> z_mode would be either height above ground (hag) or datum (height from
> datum - default)
>
> dem would be the filename of the vrt file or any other gdal - compatible
> image format. No value would be needed for this unless z_mode was equal to
> hag.
>
> As I envision the working, for each bin as each point is read in, the z
> value is compared to the value of the dem ( z - dem value)  at the xy
> location and the difference replaces the original z value in memory.  After
> all of the points are read in for a bin , perform the statistic for that
> bin for the modified z values and move on to the next bin.
>
> If you are performing the statistics on the intensities or any other
> attribute, I would still like to be able to filter by the above ground z
> values.  I imagine that the mean intensity for 5 ft above ground slices of
> the canopy might be quite interesting.
>
> This would allow you to perform all of the analysis without having to
> create a height above ground copy of the las files for input into
> r.in.lidar, staying as close to working with the original data as
> possible.  As the size of lidar data sets increases, it seems logical to
> reduce the amount of data duplication required.
>
> Does that seem like something workable and scaleable with a pdal - GRASS
> interface?
>
> Doug
>
> On Thu, Sep 3, 2015 at 1:47 PM, Howard Butler <howard at hobu.co> wrote:
>
>> On the list. How would you envision it should work?
>>
>> > On Sep 3, 2015, at 12:41 PM, Newcomb, Doug <doug_newcomb at fws.gov>
>> wrote:
>> >
>> > Could there be an option to filter for height above ground in reference
>> to an external DEM?
>> >
>> > Doug
>> >
>> > On Wed, Sep 2, 2015 at 8:10 PM, Vaclav Petras <wenzeslaus at gmail.com>
>> wrote:
>> >
>> > On Wed, Sep 2, 2015 at 5:16 PM, Andrew Bell <andrew.bell.ia at gmail.com>
>> wrote:
>> > >
>> > > Here's an example from the test code where I've removed all the stuff
>> > > that actually tests.  First we create a point table that's a subclass
>> > > of PointTable.  It only supports x, y, and z.  Then we register a
>> > > callback to be invoked each time a point is read (it does nothing
>> > > other than fetch the data).  I've also annotated the code.
>> >
>> > Awesome, thanks! The comments are also very helpful.
>> >
>> > Now I have the v.in.lidar implementation as described in the guide I'm
>> working on. I will try how it will look like on GRASS GIS site. Then I will
>> get back to this. Reading only as you described it, wrapped in C API, would
>> be the ideal solution for the current v.in.lidar concept (import and basic
>> filtering).
>> >
>> > Vaclav
>> >
>> >
>> >
>> > --
>> > Doug Newcomb
>> > USFWS
>> > Raleigh, NC
>> > 919-856-4520 ext. 14 doug_newcomb at fws.gov
>> >
>> ---------------------------------------------------------------------------------------------------------
>> > The opinions I express are my own and are not representative of the
>> official policy of the U.S.Fish and Wildlife Service or Dept. of the
>> Interior.   Life is too short for undocumented, proprietary data formats.
>> > _______________________________________________
>> > pdal mailing list
>> > pdal at lists.osgeo.org
>> > BlockedBlockedhttp://lists.osgeo.org/mailman/listinfo/pdalBlocked
>>
>>
>
>
> --
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb at fws.gov
>
> ---------------------------------------------------------------------------------------------------------
> The opinions I express are my own and are not representative of the
> official policy of the U.S.Fish and Wildlife Service or Dept. of the
> Interior.   Life is too short for undocumented, proprietary data formats.
>
>


-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150903/40d256a1/attachment.html>

From Michael.Smith at erdc.dren.mil  Thu Sep  3 14:49:38 2015
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Thu, 3 Sep 2015 21:49:38 +0000
Subject: [pdal] [EXTERNAL] Re:  Migrating from libLAS
In-Reply-To: <CALQGVr1LV5Pay-t8kyOZG6gyDKtc9F7YLxg5a8_8Y5D5ys9DGw@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
	<CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
	<CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>
	<CACJ51z1+qVNZ3-Ny0mUBNVRDCeJbKbdC=wP6FSzJL8wC24cP=A@mail.gmail.com>
	<CABo5uVu1YKX_H0nJha+SHY3C85BUB7Q=Gq+9oQrwU2VcwKEyvg@mail.gmail.com>
	<CACJ51z2hedd4yhdsYxu9qg_14=sASJEktoXktLuxA9TnyZ9T4Q@mail.gmail.com>
	<CABo5uVv9rDUS6sKngszZtTNC_otO0BVNMJLuFVbnoLQ2+dJV3w@mail.gmail.com>
	<CALQGVr1yocJa_dkZHbf1aVy7yWPyMJG4BzBaE_EYfm+YLvoppw@mail.gmail.com>
	<C5D546D1-F9E9-4B05-9A36-05142DE0AF58@hobu.co>
	<CALQGVr0wSLuu=2ppCdktndk-0dY0k_=vPhxQKEPpREu97EY4Lw@mail.gmail.com>
	<D20E3391.118A28%michael.smith@erdc.dren.mil>
	<CALQGVr1LV5Pay-t8kyOZG6gyDKtc9F7YLxg5a8_8Y5D5ys9DGw@mail.gmail.com>
Message-ID: <D20E3868.118A41%michael.smith@erdc.dren.mil>

Of course, there is a python programable filter in pdal as well. :)

And none of this precludes doing in GRASS since you could use the pdal pipeline as the source in GRASS. It just may be more efficient to frontload as much processing as you can in pdal before you get to the per point access in GRASS.


----
Michael Smith
US Army Corps
Remote Sensing GIS/Center
michael.smith at usace.army.mil


From: "Newcomb, Doug" <doug_newcomb at fws.gov<mailto:doug_newcomb at fws.gov>>
Date: Thursday, September 3, 2015 at 5:43 PM
To: Michael Smith <michael.smith at erdc.dren.mil<mailto:michael.smith at erdc.dren.mil>>
Cc: Howard Butler <howard at hobu.co<mailto:howard at hobu.co>>, pdal <pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>>
Subject: Re: [EXTERNAL] Re: [pdal] Migrating from libLAS

I'm fairly sure it could be done outside of GRASS, but I like the control I have within the GRASS framework over analysis extents, resolution, and masks, along with the other analyses I can "pipeline" in a python script in GRASS :-)

Doug

On Thu, Sep 3, 2015 at 5:33 PM, Smith, Michael ERDC-RDE-CRREL-NH <Michael.Smith at erdc.dren.mil<mailto:Michael.Smith at erdc.dren.mil>> wrote:
Howard,

I'm wondering if GRASS would even be needed here. I would think that one could create a pipeline and use the filters.colorization filter to spatially join to the DEM vrt and apply the HAG values from the DEM to a new dimension (in LAS 1.4, or even something like BPF) and then stats could be run against the originally Z and the new Z. One could use the filters.merge to read N input files (although it would be much simpler if PDAL could read a pdal tindex file directly) and then write it out either to a single file or one could add a filters.chipper and a writer to write back out N files.

I haven't tested this scenario though.
----
Michael Smith
US Army Corps
Remote Sensing GIS/Center
michael.smith at usace.army.mil<mailto:michael.smith at usace.army.mil>


From: <pdal-bounces at lists.osgeo.org<mailto:pdal-bounces at lists.osgeo.org>> on behalf of "Newcomb, Doug" <doug_newcomb at fws.gov<mailto:doug_newcomb at fws.gov>>
Date: Thursday, September 3, 2015 at 5:14 PM
To: Howard Butler <howard at hobu.co<mailto:howard at hobu.co>>
Cc: pdal <pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>>
Subject: [EXTERNAL] Re: [pdal] Migrating from libLAS
Resent-From: Michael Smith <michael.smith at usace.army.mil<mailto:michael.smith at usace.army.mil>>

Well,
In my dream world, suppose I have a delivery of a DEMs ( dem05_1.img, etc. for a 5ft resolution dem)  layer and  point cloud ( las1.las ,etc.).  I would like to perform statistics on the z values of the point cloud in a binning fashion as done in r.in.lidar .  However, I would like the statistics to be done on z values that are height above  ground , not absolute heights

 To avoid edge effects, I aggregate all of the las files togeather ( up to 4.2 billion points per file ) and use gdalbuildvrt to create a single vrt of the dem images. ( I don't recall seeing something like lasbuildvrt, but that would be nice)

I then call r.in lidar  ( resolution set to 60ft cells, vertical values are in feet) :

r.in.lidar input=aggregated.las output=skewness_60_ft_5ft_to_canopy_top  z_mode=hag base_dem=aggrgated_dem.vrt zrange=5,250 method=skewness

z_mode would be either height above ground (hag) or datum (height from datum - default)

dem would be the filename of the vrt file or any other gdal - compatible image format. No value would be needed for this unless z_mode was equal to hag.

As I envision the working, for each bin as each point is read in, the z value is compared to the value of the dem ( z - dem value)  at the xy location and the difference replaces the original z value in memory.  After all of the points are read in for a bin , perform the statistic for that bin for the modified z values and move on to the next bin.

If you are performing the statistics on the intensities or any other attribute, I would still like to be able to filter by the above ground z values.  I imagine that the mean intensity for 5 ft above ground slices of the canopy might be quite interesting.

This would allow you to perform all of the analysis without having to create a height above ground copy of the las files for input into r.in.lidar, staying as close to working with the original data as possible.  As the size of lidar data sets increases, it seems logical to reduce the amount of data duplication required.

Does that seem like something workable and scaleable with a pdal - GRASS interface?

Doug

On Thu, Sep 3, 2015 at 1:47 PM, Howard Butler <howard at hobu.co<mailto:howard at hobu.co>> wrote:
On the list. How would you envision it should work?

> On Sep 3, 2015, at 12:41 PM, Newcomb, Doug <doug_newcomb at fws.gov<mailto:doug_newcomb at fws.gov>> wrote:
>
> Could there be an option to filter for height above ground in reference to an external DEM?
>
> Doug
>
> On Wed, Sep 2, 2015 at 8:10 PM, Vaclav Petras <wenzeslaus at gmail.com<mailto:wenzeslaus at gmail.com>> wrote:
>
> On Wed, Sep 2, 2015 at 5:16 PM, Andrew Bell <andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>> wrote:
> >
> > Here's an example from the test code where I've removed all the stuff
> > that actually tests.  First we create a point table that's a subclass
> > of PointTable.  It only supports x, y, and z.  Then we register a
> > callback to be invoked each time a point is read (it does nothing
> > other than fetch the data).  I've also annotated the code.
>
> Awesome, thanks! The comments are also very helpful.
>
> Now I have the v.in.lidar implementation as described in the guide I'm working on. I will try how it will look like on GRASS GIS site. Then I will get back to this. Reading only as you described it, wrapped in C API, would be the ideal solution for the current v.in.lidar concept (import and basic filtering).
>
> Vaclav
>
>
>
> --
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb at fws.gov<mailto:doug_newcomb at fws.gov>
> ---------------------------------------------------------------------------------------------------------
> The opinions I express are my own and are not representative of the official policy of the U.S.Fish and Wildlife Service or Dept. of the Interior.   Life is too short for undocumented, proprietary data formats.
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
> BlockedBlockedBlockedhttp://lists.osgeo.org/mailman/listinfo/pdalBlockedBlocked




--
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov<mailto:doug_newcomb at fws.gov>
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the official policy of the U.S.Fish and Wildlife Service or Dept. of the Interior.   Life is too short for undocumented, proprietary data formats.



--
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov<mailto:doug_newcomb at fws.gov>
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the official policy of the U.S.Fish and Wildlife Service or Dept. of the Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150903/7524582e/attachment-0001.html>

From wenzeslaus at gmail.com  Thu Sep  3 15:22:18 2015
From: wenzeslaus at gmail.com (Vaclav Petras)
Date: Thu, 3 Sep 2015 18:22:18 -0400
Subject: [pdal] Migrating from libLAS
In-Reply-To: <CALQGVr0wSLuu=2ppCdktndk-0dY0k_=vPhxQKEPpREu97EY4Lw@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
	<CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
	<CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>
	<CACJ51z1+qVNZ3-Ny0mUBNVRDCeJbKbdC=wP6FSzJL8wC24cP=A@mail.gmail.com>
	<CABo5uVu1YKX_H0nJha+SHY3C85BUB7Q=Gq+9oQrwU2VcwKEyvg@mail.gmail.com>
	<CACJ51z2hedd4yhdsYxu9qg_14=sASJEktoXktLuxA9TnyZ9T4Q@mail.gmail.com>
	<CABo5uVv9rDUS6sKngszZtTNC_otO0BVNMJLuFVbnoLQ2+dJV3w@mail.gmail.com>
	<CALQGVr1yocJa_dkZHbf1aVy7yWPyMJG4BzBaE_EYfm+YLvoppw@mail.gmail.com>
	<C5D546D1-F9E9-4B05-9A36-05142DE0AF58@hobu.co>
	<CALQGVr0wSLuu=2ppCdktndk-0dY0k_=vPhxQKEPpREu97EY4Lw@mail.gmail.com>
Message-ID: <CABo5uVsAtFSJrPby8L-w5v6XX3K1YK-xvkLcfaUtH_7aJgE3ww@mail.gmail.com>

On Thu, Sep 3, 2015 at 5:14 PM, Newcomb, Doug <doug_newcomb at fws.gov> wrote:

> r.in.lidar input=aggregated.las output=skewness_60_ft_5ft_to_canopy_top
>  z_mode=hag base_dem=aggrgated_dem.vrt zrange=5,250 method=skewness
>
> z_mode would be either height above ground (hag) or datum (height from
> datum - default)
>

I'm not sure what is z_mode=datum. Isn't this just subtract value from z
(offset)?

But anyway, speaking just about GRASS GIS, it is surely possible for
v.in.lidar (although with significant slow down but trivial
implementation). I guess it is possible for r.in.lidar as well. I'm not
sure how scalable (in terms of number of points) it would be when using
PDAL. It seems that PDAL can limit it when doing processing but apparently
there are ways around it at least for some cases but nothing like
lasbuildvrt to paste together several files without actually merging them.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150903/12243f02/attachment.html>

From doug_newcomb at fws.gov  Thu Sep  3 15:40:35 2015
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Thu, 3 Sep 2015 18:40:35 -0400
Subject: [pdal] Migrating from libLAS
In-Reply-To: <CABo5uVsAtFSJrPby8L-w5v6XX3K1YK-xvkLcfaUtH_7aJgE3ww@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
	<CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
	<CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>
	<CACJ51z1+qVNZ3-Ny0mUBNVRDCeJbKbdC=wP6FSzJL8wC24cP=A@mail.gmail.com>
	<CABo5uVu1YKX_H0nJha+SHY3C85BUB7Q=Gq+9oQrwU2VcwKEyvg@mail.gmail.com>
	<CACJ51z2hedd4yhdsYxu9qg_14=sASJEktoXktLuxA9TnyZ9T4Q@mail.gmail.com>
	<CABo5uVv9rDUS6sKngszZtTNC_otO0BVNMJLuFVbnoLQ2+dJV3w@mail.gmail.com>
	<CALQGVr1yocJa_dkZHbf1aVy7yWPyMJG4BzBaE_EYfm+YLvoppw@mail.gmail.com>
	<C5D546D1-F9E9-4B05-9A36-05142DE0AF58@hobu.co>
	<CALQGVr0wSLuu=2ppCdktndk-0dY0k_=vPhxQKEPpREu97EY4Lw@mail.gmail.com>
	<CABo5uVsAtFSJrPby8L-w5v6XX3K1YK-xvkLcfaUtH_7aJgE3ww@mail.gmail.com>
Message-ID: <CALQGVr2hpz2M=Ub1mwk8RUud4vH_praSNqbVt-LF+2Wm4_zJ9A@mail.gmail.com>

On Thu, Sep 3, 2015 at 6:22 PM, Vaclav Petras <wenzeslaus at gmail.com> wrote:

>
> On Thu, Sep 3, 2015 at 5:14 PM, Newcomb, Doug <doug_newcomb at fws.gov>
> wrote:
>
>> r.in.lidar input=aggregated.las output=skewness_60_ft_5ft_to_canopy_top
>>  z_mode=hag base_dem=aggrgated_dem.vrt zrange=5,250 method=skewness
>>
>> z_mode would be either height above ground (hag) or datum (height from
>> datum - default)
>>
>
> I'm not sure what is z_mode=datum. Isn't this just subtract value from z
> (offset)?
>

Hey, I was trying to be fancy:-) .  Original or absolute would work just as
well.




>
> But anyway, speaking just about GRASS GIS, it is surely possible for
> v.in.lidar (although with significant slow down but trivial
> implementation). I guess it is possible for r.in.lidar as well. I'm not
> sure how scalable (in terms of number of points) it would be when using
> PDAL. It seems that PDAL can limit it when doing processing but apparently
> there are ways
>



> around it at least for some cases but nothing like lasbuildvrt to paste
> together several files without actually merging them.
>

Well, I did say it was a dream world :-)

Doug


-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150903/ce57b47c/attachment.html>

From Michael.Smith at usace.army.mil  Thu Sep  3 15:57:24 2015
From: Michael.Smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Thu, 3 Sep 2015 22:57:24 +0000
Subject: [pdal] [EXTERNAL] Re:  Migrating from libLAS
In-Reply-To: <CALQGVr2hpz2M=Ub1mwk8RUud4vH_praSNqbVt-LF+2Wm4_zJ9A@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
	<CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
	<CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>
	<CACJ51z1+qVNZ3-Ny0mUBNVRDCeJbKbdC=wP6FSzJL8wC24cP=A@mail.gmail.com>
	<CABo5uVu1YKX_H0nJha+SHY3C85BUB7Q=Gq+9oQrwU2VcwKEyvg@mail.gmail.com>
	<CACJ51z2hedd4yhdsYxu9qg_14=sASJEktoXktLuxA9TnyZ9T4Q@mail.gmail.com>
	<CABo5uVv9rDUS6sKngszZtTNC_otO0BVNMJLuFVbnoLQ2+dJV3w@mail.gmail.com>
	<CALQGVr1yocJa_dkZHbf1aVy7yWPyMJG4BzBaE_EYfm+YLvoppw@mail.gmail.com>
	<C5D546D1-F9E9-4B05-9A36-05142DE0AF58@hobu.co>
	<CALQGVr0wSLuu=2ppCdktndk-0dY0k_=vPhxQKEPpREu97EY4Lw@mail.gmail.com>
	<CABo5uVsAtFSJrPby8L-w5v6XX3K1YK-xvkLcfaUtH_7aJgE3ww@mail.gmail.com>,
	<CALQGVr2hpz2M=Ub1mwk8RUud4vH_praSNqbVt-LF+2Wm4_zJ9A@mail.gmail.com>
Message-ID: <20150903225731.6811735.17327.40631@usace.army.mil>

Pdal does have something like lasbuidvrt, it's pdal tindex. I'm working to get Howard and Andrew to support the tindex as a source format.

--
Michael Smith
Remote Sensing GIS Center
US Army Corps of Engineers












From: Newcomb, Doug
Sent: Thursday, September 3, 2015 6:42 PM
To: Vaclav Petras
Cc: pdal
Subject: [EXTERNAL] Re: [pdal] Migrating from libLAS




On Thu, Sep 3, 2015 at 6:22 PM, Vaclav Petras <wenzeslaus at gmail.com<mailto:wenzeslaus at gmail.com>> wrote:

On Thu, Sep 3, 2015 at 5:14 PM, Newcomb, Doug <doug_newcomb at fws.gov<mailto:doug_newcomb at fws.gov>> wrote:
r.in.lidar input=aggregated.las output=skewness_60_ft_5ft_to_canopy_top  z_mode=hag base_dem=aggrgated_dem.vrt zrange=5,250 method=skewness

z_mode would be either height above ground (hag) or datum (height from datum - default)

I'm not sure what is z_mode=datum. Isn't this just subtract value from z (offset)?

Hey, I was trying to be fancy:-) .  Original or absolute would work just as well.




But anyway, speaking just about GRASS GIS, it is surely possible for v.in.lidar (although with significant slow down but trivial implementation). I guess it is possible for r.in.lidar as well. I'm not sure how scalable (in terms of number of points) it would be when using PDAL. It seems that PDAL can limit it when doing processing but apparently there are ways


around it at least for some cases but nothing like lasbuildvrt to paste together several files without actually merging them.

Well, I did say it was a dream world :-)

Doug


--
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov<mailto:doug_newcomb at fws.gov>
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the official policy of the U.S.Fish and Wildlife Service or Dept. of the Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150903/2b63938d/attachment.html>

From doug_newcomb at fws.gov  Thu Sep  3 16:32:13 2015
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Thu, 3 Sep 2015 19:32:13 -0400
Subject: [pdal] [EXTERNAL] Re:  Migrating from libLAS
In-Reply-To: <20150903225731.6811735.17327.40631@usace.army.mil>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
	<CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
	<CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>
	<CACJ51z1+qVNZ3-Ny0mUBNVRDCeJbKbdC=wP6FSzJL8wC24cP=A@mail.gmail.com>
	<CABo5uVu1YKX_H0nJha+SHY3C85BUB7Q=Gq+9oQrwU2VcwKEyvg@mail.gmail.com>
	<CACJ51z2hedd4yhdsYxu9qg_14=sASJEktoXktLuxA9TnyZ9T4Q@mail.gmail.com>
	<CABo5uVv9rDUS6sKngszZtTNC_otO0BVNMJLuFVbnoLQ2+dJV3w@mail.gmail.com>
	<CALQGVr1yocJa_dkZHbf1aVy7yWPyMJG4BzBaE_EYfm+YLvoppw@mail.gmail.com>
	<C5D546D1-F9E9-4B05-9A36-05142DE0AF58@hobu.co>
	<CALQGVr0wSLuu=2ppCdktndk-0dY0k_=vPhxQKEPpREu97EY4Lw@mail.gmail.com>
	<CABo5uVsAtFSJrPby8L-w5v6XX3K1YK-xvkLcfaUtH_7aJgE3ww@mail.gmail.com>
	<CALQGVr2hpz2M=Ub1mwk8RUud4vH_praSNqbVt-LF+2Wm4_zJ9A@mail.gmail.com>
	<20150903225731.6811735.17327.40631@usace.army.mil>
Message-ID: <CALQGVr0up-+8PrAforXdaG+u0=Q1iw-WjL+k9jOU12YLsc5sBg@mail.gmail.com>

+1

On Thu, Sep 3, 2015 at 6:57 PM, Smith, Michael ERDC-CRREL-NH <
Michael.Smith at usace.army.mil> wrote:

> Pdal does have something like lasbuidvrt, it's pdal tindex. I'm working to
> get Howard and Andrew to support the tindex as a source format.
>
> --
> Michael Smith
> Remote Sensing GIS Center
> US Army Corps of Engineers
>
>
>
>
>
>
>
>
>
>
>
>
> *From: *Newcomb, Doug
> *Sent: *Thursday, September 3, 2015 6:42 PM
> *To: *Vaclav Petras
> *Cc: *pdal
> *Subject: *[EXTERNAL] Re: [pdal] Migrating from libLAS
>
>
>
> On Thu, Sep 3, 2015 at 6:22 PM, Vaclav Petras <wenzeslaus at gmail.com>
> wrote:
>
>>
>> On Thu, Sep 3, 2015 at 5:14 PM, Newcomb, Doug <doug_newcomb at fws.gov>
>> wrote:
>>
>>> r.in.lidar input=aggregated.las output=skewness_60_ft_5ft_to_canopy_top
>>>  z_mode=hag base_dem=aggrgated_dem.vrt zrange=5,250 method=skewness
>>>
>>> z_mode would be either height above ground (hag) or datum (height from
>>> datum - default)
>>>
>>
>> I'm not sure what is z_mode=datum. Isn't this just subtract value from z
>> (offset)?
>>
>
> Hey, I was trying to be fancy:-) .  Original or absolute would work just
> as well.
>
>
>
>
>>
>> But anyway, speaking just about GRASS GIS, it is surely possible for
>> v.in.lidar (although with significant slow down but trivial
>> implementation). I guess it is possible for r.in.lidar as well. I'm not
>> sure how scalable (in terms of number of points) it would be when using
>> PDAL. It seems that PDAL can limit it when doing processing but apparently
>> there are ways
>>
>
>
>
>> around it at least for some cases but nothing like lasbuildvrt to paste
>> together several files without actually merging them.
>>
>
> Well, I did say it was a dream world :-)
>
> Doug
>
>
> --
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb at fws.gov
>
> ---------------------------------------------------------------------------------------------------------
> The opinions I express are my own and are not representative of the
> official policy of the U.S.Fish and Wildlife Service or Dept. of the
> Interior   Life is too short for undocumented, proprietary data formats.
>



-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150903/37b273f1/attachment-0001.html>

From wenzeslaus at gmail.com  Thu Sep  3 19:59:00 2015
From: wenzeslaus at gmail.com (Vaclav Petras)
Date: Thu, 3 Sep 2015 22:59:00 -0400
Subject: [pdal] Migrating from libLAS
In-Reply-To: <CALQGVr2hpz2M=Ub1mwk8RUud4vH_praSNqbVt-LF+2Wm4_zJ9A@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
	<CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
	<CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>
	<CACJ51z1+qVNZ3-Ny0mUBNVRDCeJbKbdC=wP6FSzJL8wC24cP=A@mail.gmail.com>
	<CABo5uVu1YKX_H0nJha+SHY3C85BUB7Q=Gq+9oQrwU2VcwKEyvg@mail.gmail.com>
	<CACJ51z2hedd4yhdsYxu9qg_14=sASJEktoXktLuxA9TnyZ9T4Q@mail.gmail.com>
	<CABo5uVv9rDUS6sKngszZtTNC_otO0BVNMJLuFVbnoLQ2+dJV3w@mail.gmail.com>
	<CALQGVr1yocJa_dkZHbf1aVy7yWPyMJG4BzBaE_EYfm+YLvoppw@mail.gmail.com>
	<C5D546D1-F9E9-4B05-9A36-05142DE0AF58@hobu.co>
	<CALQGVr0wSLuu=2ppCdktndk-0dY0k_=vPhxQKEPpREu97EY4Lw@mail.gmail.com>
	<CABo5uVsAtFSJrPby8L-w5v6XX3K1YK-xvkLcfaUtH_7aJgE3ww@mail.gmail.com>
	<CALQGVr2hpz2M=Ub1mwk8RUud4vH_praSNqbVt-LF+2Wm4_zJ9A@mail.gmail.com>
Message-ID: <CABo5uVuCj=z3n_KS88+y4_1nSJ0uq2BVU4pWgjeRdu3Fv4mG+Q@mail.gmail.com>

On Thu, Sep 3, 2015 at 6:40 PM, Newcomb, Doug <doug_newcomb at fws.gov> wrote:

> On Thu, Sep 3, 2015 at 6:22 PM, Vaclav Petras <wenzeslaus at gmail.com>
> wrote:
>
>>
>> On Thu, Sep 3, 2015 at 5:14 PM, Newcomb, Doug <doug_newcomb at fws.gov>
>> wrote:
>>
>>> r.in.lidar input=aggregated.las output=skewness_60_ft_5ft_to_canopy_top
>>>  z_mode=hag base_dem=aggrgated_dem.vrt zrange=5,250 method=skewness
>>>
>>> z_mode would be either height above ground (hag) or datum (height from
>>> datum - default)
>>>
>>
>> I'm not sure what is z_mode=datum. Isn't this just subtract value from z
>> (offset)?
>>
>
> Hey, I was trying to be fancy:-) .  Original or absolute would work just
> as well.
>

OK, "z = z - z_base_dem" is in libLAS-based r.in.lidar now [1]. See
grass-dev mailing list [2].

Vaclav

[1] https://lists.osgeo.org/pipermail/grass-dev/2015-September/076147.html
[2] https://trac.osgeo.org/grass/changeset/66094
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150903/b407282e/attachment.html>

From newcomb.ttg at gmail.com  Thu Sep  3 20:01:49 2015
From: newcomb.ttg at gmail.com (Doug Newcomb)
Date: Thu, 3 Sep 2015 23:01:49 -0400
Subject: [pdal] Migrating from libLAS
In-Reply-To: <CABo5uVuCj=z3n_KS88+y4_1nSJ0uq2BVU4pWgjeRdu3Fv4mG+Q@mail.gmail.com>
References: <CABo5uVtH=q-CWMXwGLUOCWh4aF12i=SuC3irH-VrQYMJq7EEPg@mail.gmail.com>
	<CALQGVr3210RxKWb=-thgA+shjcwi-HPx-R3K_4ADY6+4fp2W6Q@mail.gmail.com>
	<CABo5uVtO=gLQ2M-u2uDg1_exc77k6NERdDc5bNEVbB+4AMbn6g@mail.gmail.com>
	<CACJ51z0UZ3eXCc02a5Dviwj5O99jW0qdmLrpLiFCAXhQNH71Ng@mail.gmail.com>
	<CACJ51z3N5Kuioh3_VnNfLmUBR7aK8L+J1T5scLwrsqOhd3eSJA@mail.gmail.com>
	<CACJ51z1+qVNZ3-Ny0mUBNVRDCeJbKbdC=wP6FSzJL8wC24cP=A@mail.gmail.com>
	<CABo5uVu1YKX_H0nJha+SHY3C85BUB7Q=Gq+9oQrwU2VcwKEyvg@mail.gmail.com>
	<CACJ51z2hedd4yhdsYxu9qg_14=sASJEktoXktLuxA9TnyZ9T4Q@mail.gmail.com>
	<CABo5uVv9rDUS6sKngszZtTNC_otO0BVNMJLuFVbnoLQ2+dJV3w@mail.gmail.com>
	<CALQGVr1yocJa_dkZHbf1aVy7yWPyMJG4BzBaE_EYfm+YLvoppw@mail.gmail.com>
	<C5D546D1-F9E9-4B05-9A36-05142DE0AF58@hobu.co>
	<CALQGVr0wSLuu=2ppCdktndk-0dY0k_=vPhxQKEPpREu97EY4Lw@mail.gmail.com>
	<CABo5uVsAtFSJrPby8L-w5v6XX3K1YK-xvkLcfaUtH_7aJgE3ww@mail.gmail.com>
	<CALQGVr2hpz2M=Ub1mwk8RUud4vH_praSNqbVt-LF+2Wm4_zJ9A@mail.gmail.com>
	<CABo5uVuCj=z3n_KS88+y4_1nSJ0uq2BVU4pWgjeRdu3Fv4mG+Q@mail.gmail.com>
Message-ID: <CADTwh62V=GXPZ8sCA7GnoTaGDsJTYio9u8Q-ZUA4_oh9_f2iSw@mail.gmail.com>

You rock!

Doug
On Sep 3, 2015 10:59 PM, "Vaclav Petras" <wenzeslaus at gmail.com> wrote:

>
> On Thu, Sep 3, 2015 at 6:40 PM, Newcomb, Doug <doug_newcomb at fws.gov>
> wrote:
>
>> On Thu, Sep 3, 2015 at 6:22 PM, Vaclav Petras <wenzeslaus at gmail.com>
>> wrote:
>>
>>>
>>> On Thu, Sep 3, 2015 at 5:14 PM, Newcomb, Doug <doug_newcomb at fws.gov>
>>> wrote:
>>>
>>>> r.in.lidar input=aggregated.las output=skewness_60_ft_5ft_to_canopy_top
>>>>  z_mode=hag base_dem=aggrgated_dem.vrt zrange=5,250 method=skewness
>>>>
>>>> z_mode would be either height above ground (hag) or datum (height from
>>>> datum - default)
>>>>
>>>
>>> I'm not sure what is z_mode=datum. Isn't this just subtract value from z
>>> (offset)?
>>>
>>
>> Hey, I was trying to be fancy:-) .  Original or absolute would work just
>> as well.
>>
>
> OK, "z = z - z_base_dem" is in libLAS-based r.in.lidar now [1]. See
> grass-dev mailing list [2].
>
> Vaclav
>
> [1] https://lists.osgeo.org/pipermail/grass-dev/2015-September/076147.html
> [2] https://trac.osgeo.org/grass/changeset/66094
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150903/c0bc19a4/attachment.html>

From howard at hobu.co  Fri Sep  4 06:44:21 2015
From: howard at hobu.co (Howard Butler)
Date: Fri, 4 Sep 2015 08:44:21 -0500
Subject: [pdal] Support for BAG file format
In-Reply-To: <CAAduJf5OaMO8u-aEB-epb2iU55j4aXd90ZwN1NjiHbwmWgEBsQ@mail.gmail.com>
References: <CAAduJf5gzFvKA4AacCV4O6zs2jWukEpUKX6GRP=EtpW0c34yyQ@mail.gmail.com>
	<2159A884-91CF-47AE-B9B4-14F4BFFB8D75@hobu.co>
	<CAAduJf5OaMO8u-aEB-epb2iU55j4aXd90ZwN1NjiHbwmWgEBsQ@mail.gmail.com>
Message-ID: <10D4591F-07FE-401C-B9CA-A2245EB2880A@hobu.co>

I think what we should implement is a "GDAL" reader. The GDAL reader would take in any GDAL-readable raster, convert each band to a dimension, and assign an individual XY (and maybe Z) for each point based on the pixels in the raster. For typical single band imagery, this would result in just an XYZ point cloud (regularly spaced, of course). For multiband stuff, we could add an option that allows you to specify the dimension mapping.

This approach would allow us to leverage GDAL's BAG reader without having to entirely write our own driver. We could then make native drivers for GDAL-readable formats as we need to going forward.

Sound like a good idea?

Howard

> On Sep 3, 2015, at 10:43 AM, Dan Ames <dan.ames at byu.edu> wrote:
> 
> Thanks Howard. All I've got right now is a 700MB file which is too big to experiment with. I'll see if we can get a couple of small examples put together next week and post them. Looks like this is going to be a more common file in the future since these inexpensive velodyne LiDAR pucks are growing in popularity. Not sure why we can't get it to just generate LAS files but we'll do whatever we have to do I suppose! - Dan
> 
> On Thu, Sep 3, 2015 at 7:09 AM Howard Butler <howard at hobu.co> wrote:
> 
> > On Sep 2, 2015, at 11:04 AM, Dan Ames <dan.ames at byu.edu> wrote:
> >
> > Hi all,
> >
> > Glad to see that PDAL is still under very active development! (last commit 1 hour ago!)
> >
> > Quick question: We have a new Velodyne VLP 16 LiDAR Puck that generates data in a .BAG file format.
> >
> > Does PDAL support this file? We'd like to convert it to LAS...
> 
> PDAL does not support BAG at this time, but it is a very simple format. Do you have a few small example files we can permanently add to the test suite? Maybe we could whip something up...
> 
> Howard
> 


From dan.ames at byu.edu  Fri Sep  4 08:23:15 2015
From: dan.ames at byu.edu (Dan Ames)
Date: Fri, 04 Sep 2015 15:23:15 +0000
Subject: [pdal] Support for BAG file format
In-Reply-To: <10D4591F-07FE-401C-B9CA-A2245EB2880A@hobu.co>
References: <CAAduJf5gzFvKA4AacCV4O6zs2jWukEpUKX6GRP=EtpW0c34yyQ@mail.gmail.com>
	<2159A884-91CF-47AE-B9B4-14F4BFFB8D75@hobu.co>
	<CAAduJf5OaMO8u-aEB-epb2iU55j4aXd90ZwN1NjiHbwmWgEBsQ@mail.gmail.com>
	<10D4591F-07FE-401C-B9CA-A2245EB2880A@hobu.co>
Message-ID: <CAAduJf6CTwHU7U+x1F3ZUq1SOnw1cq-aLb=1VzF=eeJu==t2fg@mail.gmail.com>

Seems like that would be a way to gain support for a lot of formats -
though GDAL isn't native cloud - but your suggestion of how to make the
GDAL layers into "2.5-D" clouds could be very useful (i.e. for working with
DEM's as point clouds...)

On Fri, Sep 4, 2015 at 8:51 AM Howard Butler <howard at hobu.co> wrote:

> I think what we should implement is a "GDAL" reader. The GDAL reader would
> take in any GDAL-readable raster, convert each band to a dimension, and
> assign an individual XY (and maybe Z) for each point based on the pixels in
> the raster. For typical single band imagery, this would result in just an
> XYZ point cloud (regularly spaced, of course). For multiband stuff, we
> could add an option that allows you to specify the dimension mapping.
>
> This approach would allow us to leverage GDAL's BAG reader without having
> to entirely write our own driver. We could then make native drivers for
> GDAL-readable formats as we need to going forward.
>
> Sound like a good idea?
>
> Howard
>
> > On Sep 3, 2015, at 10:43 AM, Dan Ames <dan.ames at byu.edu> wrote:
> >
> > Thanks Howard. All I've got right now is a 700MB file which is too big
> to experiment with. I'll see if we can get a couple of small examples put
> together next week and post them. Looks like this is going to be a more
> common file in the future since these inexpensive velodyne LiDAR pucks are
> growing in popularity. Not sure why we can't get it to just generate LAS
> files but we'll do whatever we have to do I suppose! - Dan
> >
> > On Thu, Sep 3, 2015 at 7:09 AM Howard Butler <howard at hobu.co> wrote:
> >
> > > On Sep 2, 2015, at 11:04 AM, Dan Ames <dan.ames at byu.edu> wrote:
> > >
> > > Hi all,
> > >
> > > Glad to see that PDAL is still under very active development! (last
> commit 1 hour ago!)
> > >
> > > Quick question: We have a new Velodyne VLP 16 LiDAR Puck that
> generates data in a .BAG file format.
> > >
> > > Does PDAL support this file? We'd like to convert it to LAS...
> >
> > PDAL does not support BAG at this time, but it is a very simple format.
> Do you have a few small example files we can permanently add to the test
> suite? Maybe we could whip something up...
> >
> > Howard
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150904/70ec39f1/attachment.html>

From matt.a.hanson at gmail.com  Wed Sep  9 11:58:14 2015
From: matt.a.hanson at gmail.com (Matt Hanson)
Date: Wed, 9 Sep 2015 14:58:14 -0400
Subject: [pdal] pdal info
Message-ID: <CAGYeuZkUe3BMtLdGWGtktT3xmbGddz62Ed7RCTVcJJUuCp3_mA@mail.gmail.com>

In lidar2dems I am parsing the output from

pdal info --metadata

using json.loads()

However, I just pulled the latest from master and the string cannot be
decoded into a JSON object.  Using an online linter...I have a field:

    "software_id": TerraScan,

And TerraScan needs to be quoted.   Is this an issue with PDAL not properly
putting quotes around the string output?

- matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150909/0b0ef3f2/attachment.html>

From andrew.bell.ia at gmail.com  Wed Sep  9 12:07:49 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 9 Sep 2015 14:07:49 -0500
Subject: [pdal] pdal info
In-Reply-To: <CAGYeuZkUe3BMtLdGWGtktT3xmbGddz62Ed7RCTVcJJUuCp3_mA@mail.gmail.com>
References: <CAGYeuZkUe3BMtLdGWGtktT3xmbGddz62Ed7RCTVcJJUuCp3_mA@mail.gmail.com>
Message-ID: <CACJ51z0qh_b4rE4kcj-zTEiWu09vr7HNq+7ZXcJjMATUO1pb2w@mail.gmail.com>

Opened a ticket for this:

https://github.com/PDAL/PDAL/issues/985

On Wed, Sep 9, 2015 at 1:58 PM, Matt Hanson <matt.a.hanson at gmail.com> wrote:

> In lidar2dems I am parsing the output from
>
> pdal info --metadata
>
> using json.loads()
>
> However, I just pulled the latest from master and the string cannot be
> decoded into a JSON object.  Using an online linter...I have a field:
>
>     "software_id": TerraScan,
>
> And TerraScan needs to be quoted.   Is this an issue with PDAL not
> properly putting quotes around the string output?
>
> - matt
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150909/d2f635ea/attachment.html>

From howard at hobu.co  Thu Sep 10 14:22:20 2015
From: howard at hobu.co (Howard Butler)
Date: Thu, 10 Sep 2015 16:22:20 -0500
Subject: [pdal] PDAL 1.0.0 Released
Message-ID: <D60F6C0D-59B9-4B35-B7C6-711CE7C22480@hobu.co>

All,

After years of saying we'd have a release, but still being hesitant to actually follow through with it, we now have a PDAL 1.0.0 release. There's tons of stuff in it, and for those who've been following along for quite a while now, thanks for hanging around. Here's a short bullet list of PDAL 1.0.0 capabilities, just in time for #foss4g:

* git-style `pdal` command line utility for processing data http://www.pdal.io/apps.html
* 18+ readers, 14+ writers, and 17+ filters http://www.pdal.io/stages/index.html
* VRT-like "pipeline" syntax for stacking operations together http://www.pdal.io/pipeline.html
* Python extension for manipulating data in Numpy https://pypi.python.org/pypi/PDAL

I would like to thank Michael Gerlek for his design guidance and implementation support during PDAL's early days, Brad Chambers for his awesomely useful additions and refactoring, and Andrew Bell for his performance optimization, maintenance support, and design improvements. Contributions from numerous very patient users and developers also helped get us this far, and they are very much appreciated.

There's still plenty of rough edges, but PDAL has been used in data warehousing production for a few years. This 1.0.0 release signals that we're ready for folks to give it a spin and see if they find it useful too. We will probably just increment minor versions (1.1, 1.2, ..., 1.x) for a while as we learn and adapt to how others are integrating and using the code in their own situations. Version numbers are cheap, so expect more of them.

We hope you find the code useful, and we look forward to your contributions.

Howard

http://download.osgeo.org/pdal/PDAL-1.0.0-src.tar.gz

From doug_newcomb at fws.gov  Thu Sep 10 14:52:45 2015
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Thu, 10 Sep 2015 17:52:45 -0400
Subject: [pdal] PDAL 1.0.0 Released
In-Reply-To: <D60F6C0D-59B9-4B35-B7C6-711CE7C22480@hobu.co>
References: <D60F6C0D-59B9-4B35-B7C6-711CE7C22480@hobu.co>
Message-ID: <CALQGVr1UyBW92t2A1np_wkwkBsyxDgYn0_fAFTN_jL5CxeFaCg@mail.gmail.com>

Congratulations on reaching this benchmark!

Doug

On Thu, Sep 10, 2015 at 5:22 PM, Howard Butler <howard at hobu.co> wrote:

> All,
>
> After years of saying we'd have a release, but still being hesitant to
> actually follow through with it, we now have a PDAL 1.0.0 release. There's
> tons of stuff in it, and for those who've been following along for quite a
> while now, thanks for hanging around. Here's a short bullet list of PDAL
> 1.0.0 capabilities, just in time for #foss4g:
>
> * git-style `pdal` command line utility for processing data
> http://www.pdal.io/apps.html
> * 18+ readers, 14+ writers, and 17+ filters
> http://www.pdal.io/stages/index.html
> * VRT-like "pipeline" syntax for stacking operations together
> http://www.pdal.io/pipeline.html
> * Python extension for manipulating data in Numpy
> https://pypi.python.org/pypi/PDAL
>
> I would like to thank Michael Gerlek for his design guidance and
> implementation support during PDAL's early days, Brad Chambers for his
> awesomely useful additions and refactoring, and Andrew Bell for his
> performance optimization, maintenance support, and design improvements.
> Contributions from numerous very patient users and developers also helped
> get us this far, and they are very much appreciated.
>
> There's still plenty of rough edges, but PDAL has been used in data
> warehousing production for a few years. This 1.0.0 release signals that
> we're ready for folks to give it a spin and see if they find it useful too.
> We will probably just increment minor versions (1.1, 1.2, ..., 1.x) for a
> while as we learn and adapt to how others are integrating and using the
> code in their own situations. Version numbers are cheap, so expect more of
> them.
>
> We hope you find the code useful, and we look forward to your
> contributions.
>
> Howard
>
> http://download.osgeo.org/pdal/PDAL-1.0.0-src.tar.gz
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>



-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150910/2e7964e9/attachment.html>

From WOMeara at Radiantblue.com  Thu Sep 10 17:22:03 2015
From: WOMeara at Radiantblue.com (WOMeara at Radiantblue.com)
Date: Fri, 11 Sep 2015 00:22:03 +0000
Subject: [pdal] PDAL 1.0.0 Released
In-Reply-To: <D60F6C0D-59B9-4B35-B7C6-711CE7C22480@hobu.co>
References: <D60F6C0D-59B9-4B35-B7C6-711CE7C22480@hobu.co>
Message-ID: <44A10BB04DB1CF4CB221604BDFC6C0CC458BE2E1@NBSVR-MAIL01.radiantblue.local>

Congrats!
________________________________________
From: pdal-bounces at lists.osgeo.org [pdal-bounces at lists.osgeo.org] on behalf of Howard Butler [howard at hobu.co]
Sent: Thursday, September 10, 2015 5:22 PM
To: pdal
Subject: [pdal] PDAL 1.0.0 Released

All,

After years of saying we'd have a release, but still being hesitant to actually follow through with it, we now have a PDAL 1.0.0 release. There's tons of stuff in it, and for those who've been following along for quite a while now, thanks for hanging around. Here's a short bullet list of PDAL 1.0.0 capabilities, just in time for #foss4g:

* git-style `pdal` command line utility for processing data http://www.pdal.io/apps.html
* 18+ readers, 14+ writers, and 17+ filters http://www.pdal.io/stages/index.html
* VRT-like "pipeline" syntax for stacking operations together http://www.pdal.io/pipeline.html
* Python extension for manipulating data in Numpy https://pypi.python.org/pypi/PDAL

I would like to thank Michael Gerlek for his design guidance and implementation support during PDAL's early days, Brad Chambers for his awesomely useful additions and refactoring, and Andrew Bell for his performance optimization, maintenance support, and design improvements. Contributions from numerous very patient users and developers also helped get us this far, and they are very much appreciated.

There's still plenty of rough edges, but PDAL has been used in data warehousing production for a few years. This 1.0.0 release signals that we're ready for folks to give it a spin and see if they find it useful too. We will probably just increment minor versions (1.1, 1.2, ..., 1.x) for a while as we learn and adapt to how others are integrating and using the code in their own situations. Version numbers are cheap, so expect more of them.

We hope you find the code useful, and we look forward to your contributions.

Howard

http://download.osgeo.org/pdal/PDAL-1.0.0-src.tar.gz
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/pdal

From howard at hobu.co  Fri Sep 11 09:18:31 2015
From: howard at hobu.co (Howard Butler)
Date: Fri, 11 Sep 2015 11:18:31 -0500
Subject: [pdal] PDAL 1.0.1 Released
Message-ID: <D07A0B75-459F-4E5A-A142-D34548EBE4AF@hobu.co>

> 
> On Sep 10, 2015, at 4:22 PM, Howard Butler <howard at hobu.co> wrote:
> 
> Version numbers are cheap, so expect more of them.

Good thing too!

PDAL 1.0.1 fixes an install bug where some scripts were missing in the release package.

Howard

http://download.osgeo.org/pdal/PDAL-1.0.1-src.tar.gz

From matt.a.hanson at gmail.com  Fri Sep 11 09:48:56 2015
From: matt.a.hanson at gmail.com (Matt Hanson)
Date: Fri, 11 Sep 2015 12:48:56 -0400
Subject: [pdal] PDAL 1.0.0 Released
In-Reply-To: <44A10BB04DB1CF4CB221604BDFC6C0CC458BE2E1@NBSVR-MAIL01.radiantblue.local>
References: <D60F6C0D-59B9-4B35-B7C6-711CE7C22480@hobu.co>
	<44A10BB04DB1CF4CB221604BDFC6C0CC458BE2E1@NBSVR-MAIL01.radiantblue.local>
Message-ID: <CAGYeuZmP6obmDF0UF7F04LThGLwmwnO3_hCQEx9X2+VxHGvWtQ@mail.gmail.com>

Congrats to all the devs for making this happen!    I'm about to release
lidar2dems and it will be great to be able to peg it to PDAL 1.0.    Would
like to talk more about current plans on packaging, I'm especially
interested in making installation less painful for PDAL and PCL on Ubuntu.

I'll be at FOSS4G next week - anyone else going?

On Thu, Sep 10, 2015 at 8:22 PM, WOMeara at Radiantblue.com <
WOMeara at radiantblue.com> wrote:

> Congrats!
> ________________________________________
> From: pdal-bounces at lists.osgeo.org [pdal-bounces at lists.osgeo.org] on
> behalf of Howard Butler [howard at hobu.co]
> Sent: Thursday, September 10, 2015 5:22 PM
> To: pdal
> Subject: [pdal] PDAL 1.0.0 Released
>
> All,
>
> After years of saying we'd have a release, but still being hesitant to
> actually follow through with it, we now have a PDAL 1.0.0 release. There's
> tons of stuff in it, and for those who've been following along for quite a
> while now, thanks for hanging around. Here's a short bullet list of PDAL
> 1.0.0 capabilities, just in time for #foss4g:
>
> * git-style `pdal` command line utility for processing data
> http://www.pdal.io/apps.html
> * 18+ readers, 14+ writers, and 17+ filters
> http://www.pdal.io/stages/index.html
> * VRT-like "pipeline" syntax for stacking operations together
> http://www.pdal.io/pipeline.html
> * Python extension for manipulating data in Numpy
> https://pypi.python.org/pypi/PDAL
>
> I would like to thank Michael Gerlek for his design guidance and
> implementation support during PDAL's early days, Brad Chambers for his
> awesomely useful additions and refactoring, and Andrew Bell for his
> performance optimization, maintenance support, and design improvements.
> Contributions from numerous very patient users and developers also helped
> get us this far, and they are very much appreciated.
>
> There's still plenty of rough edges, but PDAL has been used in data
> warehousing production for a few years. This 1.0.0 release signals that
> we're ready for folks to give it a spin and see if they find it useful too.
> We will probably just increment minor versions (1.1, 1.2, ..., 1.x) for a
> while as we learn and adapt to how others are integrating and using the
> code in their own situations. Version numbers are cheap, so expect more of
> them.
>
> We hope you find the code useful, and we look forward to your
> contributions.
>
> Howard
>
> http://download.osgeo.org/pdal/PDAL-1.0.0-src.tar.gz
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150911/4a1b42c3/attachment-0001.html>

From albert.godfrind at oracle.com  Sat Sep 12 07:38:39 2015
From: albert.godfrind at oracle.com (Albert Godfrind)
Date: Sat, 12 Sep 2015 16:38:39 +0200
Subject: [pdal] PDAL 1.0.0 Released
In-Reply-To: <D60F6C0D-59B9-4B35-B7C6-711CE7C22480@hobu.co>
References: <D60F6C0D-59B9-4B35-B7C6-711CE7C22480@hobu.co>
Message-ID: <DFD2528E-F8A2-455F-85B4-D2549F5050E9@oracle.com>

I am a bit confused about the installation process on Linux. The rpms on http://pdal.s3-website-us-east-1.amazonaws.com/rpms/ seem to only define the repository environment for the installation proper ?

$ sudo yum install pdal
Loaded plugins: refresh-packagekit, security
Setting up Install Process
No package pdal available.
Error: Nothing to do

I downloaded the RPM:

$ wget http://pdal.s3-website-us-east-1.amazonaws.com/rpms/repo/redhat/rhel-7-x86_64/pdal-redhat-1.0-1.noarch.rpm
--2015-09-12 16:35:08--  http://pdal.s3-website-us-east-1.amazonaws.com/rpms/repo/redhat/rhel-7-x86_64/pdal-redhat-1.0-1.noarch.rpm
Resolving pdal.s3-website-us-east-1.amazonaws.com... 54.231.65.28
Connecting to pdal.s3-website-us-east-1.amazonaws.com|54.231.65.28|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 4936 (4.8K) [application/x-rpm]
Saving to: ?pdal-redhat-1.0-1.noarch.rpm?
100%[======================================>] 4,936       --.-K/s   in 0.1s    
2015-09-12 16:35:08 (37.8 KB/s) - ?pdal-redhat-1.0-1.noarch.rpm? saved [4936/4936]

Installed the RPM:

$ sudo rpm -iv pdal-redhat-1.0-1.noarch.rpm
Preparing packages for installation...
pdal-redhat-1.0-1

PDAL did not get installed, but I can now use yum. Except it fails with a 403 (forbidden):

$ sudo yum install pdal
Loaded plugins: refresh-packagekit, security
http://pdal.s3-website-us-east-1.amazonaws.com/rpms/repo/redhat/rhel-6Server-x86_64/repodata/repomd.xml: [Errno 14] PYCURL ERROR 22 - "The requested URL returned error: 403"
Trying other mirror.
Error: Cannot retrieve repository metadata (repomd.xml) for repository: fmach-centos7. Please verify its path and try again

Did I miss something ?

Albert

> On 10-Sep-2015, at 23:22, Howard Butler <howard at hobu.co> wrote:
> 
> All,
> 
> After years of saying we'd have a release, but still being hesitant to actually follow through with it, we now have a PDAL 1.0.0 release. There's tons of stuff in it, and for those who've been following along for quite a while now, thanks for hanging around. Here's a short bullet list of PDAL 1.0.0 capabilities, just in time for #foss4g:
> 
> * git-style `pdal` command line utility for processing data http://www.pdal.io/apps.html
> * 18+ readers, 14+ writers, and 17+ filters http://www.pdal.io/stages/index.html
> * VRT-like "pipeline" syntax for stacking operations together http://www.pdal.io/pipeline.html
> * Python extension for manipulating data in Numpy https://pypi.python.org/pypi/PDAL
> 
> I would like to thank Michael Gerlek for his design guidance and implementation support during PDAL's early days, Brad Chambers for his awesomely useful additions and refactoring, and Andrew Bell for his performance optimization, maintenance support, and design improvements. Contributions from numerous very patient users and developers also helped get us this far, and they are very much appreciated.
> 
> There's still plenty of rough edges, but PDAL has been used in data warehousing production for a few years. This 1.0.0 release signals that we're ready for folks to give it a spin and see if they find it useful too. We will probably just increment minor versions (1.1, 1.2, ..., 1.x) for a while as we learn and adapt to how others are integrating and using the code in their own situations. Version numbers are cheap, so expect more of them.
> 
> We hope you find the code useful, and we look forward to your contributions.
> 
> Howard
> 
> http://download.osgeo.org/pdal/PDAL-1.0.0-src.tar.gz
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal

--
 <http://www.oracle.com/>
Albert Godfrind | Geospatial technologies | Tel: +33 4 93 00 80 67 | Mobile: +33 6 09 97 27 23 | Skype: albert-godfrind <skype:albert-godfrind>
Oracle Server Technologies
400 Av. Roumanille, BP 309  | 06906 Sophia Antipolis cedex | France
Everything you ever wanted to know about Oracle Spatial <http://www.apress.com/9781590598993>
 <http://www.locationintelligence.net/dc/>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150912/edd22549/attachment.html>

From brad.chambers at gmail.com  Sun Sep 13 19:55:00 2015
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Mon, 14 Sep 2015 02:55:00 +0000
Subject: [pdal] PDAL 1.0.1 Released
In-Reply-To: <D07A0B75-459F-4E5A-A142-D34548EBE4AF@hobu.co>
References: <D07A0B75-459F-4E5A-A142-D34548EBE4AF@hobu.co>
Message-ID: <CAJyqqPzses53XXgoS8iFMYs_7iKXTuEHk9kWmaynuQGc32019Q@mail.gmail.com>

For those interested, I've just posted an OSGeo4W 64-bit build.

https://trac.osgeo.org/osgeo4w/

Brad

On Fri, Sep 11, 2015 at 12:18 PM Howard Butler <howard at hobu.co> wrote:

> >
> > On Sep 10, 2015, at 4:22 PM, Howard Butler <howard at hobu.co> wrote:
> >
> > Version numbers are cheap, so expect more of them.
>
> Good thing too!
>
> PDAL 1.0.1 fixes an install bug where some scripts were missing in the
> release package.
>
> Howard
>
> http://download.osgeo.org/pdal/PDAL-1.0.1-src.tar.gz
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150914/1a52bea7/attachment.html>

From James.R.Bellenger at nga.mil  Tue Sep 15 13:27:51 2015
From: James.R.Bellenger at nga.mil (James.R.Bellenger at nga.mil)
Date: Tue, 15 Sep 2015 20:27:51 +0000
Subject: [pdal] Does PDAL work with GDAL 2.0.0?
Message-ID: <A73BE1D57C259448906C7D14114F80F3553CE57C@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>

Classification: UNCLASSIFIED
======================================================

I am compiling the latest git version of PDAL from source on a different network and it needs gdal-config in the cmake.  What version of GDAL should I build?

Jim Bellenger 
Lead R&D Technologist
NGA/II-GIAT 
314-676-0887, DSN 846-0887 
Secure 577-6465


======================================================
Classification: UNCLASSIFIED


From howard at hobu.co  Tue Sep 15 13:40:08 2015
From: howard at hobu.co (Howard Butler)
Date: Tue, 15 Sep 2015 15:40:08 -0500
Subject: [pdal] Does PDAL work with GDAL 2.0.0?
In-Reply-To: <A73BE1D57C259448906C7D14114F80F3553CE57C@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
References: <A73BE1D57C259448906C7D14114F80F3553CE57C@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
Message-ID: <DE41C52D-CC1E-49DF-8A36-CE6A4CB6AEEE@hobu.co>


> On Sep 15, 2015, at 3:27 PM, <James.R.Bellenger at nga.mil> <James.R.Bellenger at nga.mil> wrote:
> 
> Classification: UNCLASSIFIED
> ======================================================
> 
> I am compiling the latest git version of PDAL from source on a different network and it needs gdal-config in the cmake.  What version of GDAL should I build?

1.11 is widely tested.



From thomas.cuerten at wheregroup.com  Wed Sep 16 03:51:14 2015
From: thomas.cuerten at wheregroup.com (=?UTF-8?Q?Thomas_C=c3=bcrten_=28WhereGroup=29?=)
Date: Wed, 16 Sep 2015 12:51:14 +0200
Subject: [pdal] Import point cloud into PostgreSQL/ pdal pipeline fails
Message-ID: <55F949A2.7050609@wheregroup.com>

Hello everyboy,
I followed this tutorial 
(http://workshops.boundlessgeo.com/tutorial-lidar/) and  am trying to 
load las-data into postgreSQL by using the pipeline function from pdal.  
Unfortunately pdal generates an error when I try to upload the lidar 
data to the database: |pdal pipeline --input laz2pg.xml|

    PDAL: Couldn't create filter stage of type 'filters.cache'.

The content of my pipeline xml file is the following:

|<?xml version="1.0" encoding="utf-8"?> <Pipeline version="1.0"> <Writer 
type="writers.pgpointcloud"> <Option name="connection">host='localhost' 
dbname='lidar' user='postgres'</Option> <Option 
name="table">sthsm</Option> <Option name="srid">4326</Option> <Filter 
type="filters.chipper"> <Option name="capacity">400</Option> <Filter 
type="filters.cache"> <Reader type="readers.las"> <Option 
name="U4545539.las">/home/tcuerten/Dokumente/LASER/U4545539.las</Option> 
<Option name="spatialreference">EPSG:4326</Option> </Reader> </Filter> 
</Filter> </Writer> </Pipeline>|

I guess the problem is that I'm missing some drivers in my pdal 
version.I checked the pdal drivers with 'pdal --drivers' and apparently 
also the pgpointcloud drivers are missing.
Do you have any suggestions why i am missing these drivers and how i 
could add these drivers to pdal?

Thanks

Thomas

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150916/70d53b5c/attachment.html>

From howard at hobu.co  Wed Sep 16 07:06:12 2015
From: howard at hobu.co (Howard Butler)
Date: Wed, 16 Sep 2015 09:06:12 -0500
Subject: [pdal] Import point cloud into PostgreSQL/ pdal pipeline fails
In-Reply-To: <55F949A2.7050609@wheregroup.com>
References: <55F949A2.7050609@wheregroup.com>
Message-ID: <CAKyBbG6Me8NyBU4USVM_EfFqzywgHd9m1f82HgNLAw7FwdQySA@mail.gmail.com>

On Wed, Sep 16, 2015 at 5:51 AM, Thomas C?rten (WhereGroup) <
thomas.cuerten at wheregroup.com> wrote:

> Hello everyboy,
> I followed this tutorial (
> http://workshops.boundlessgeo.com/tutorial-lidar/) and  am trying to load
> las-data into postgreSQL by using the pipeline function from pdal.
> Unfortunately pdal generates an error when I try to upload the lidar data
> to the database: pdal pipeline --input laz2pg.xml
>
> PDAL: Couldn't create filter stage of type 'filters.cache'.
>
> The content of my pipeline xml file is the following:
>
> <?xml version="1.0" encoding="utf-8"?>
> <Pipeline version="1.0">
>     <Writer type="writers.pgpointcloud">
>         <Option name="connection">host='localhost' dbname='lidar' user='postgres'</Option>
>         <Option name="table">sthsm</Option>
>         <Option name="srid">4326</Option>
>         <Filter type="filters.chipper">
>             <Option name="capacity">400</Option>
>             <Filter type="filters.cache">
>                 <Reader type="readers.las">
>                     <Option name="U4545539.las">/home/tcuerten/Dokumente/LASER/U4545539.las</Option>
>                     <Option name="spatialreference">EPSG:4326</Option>
>                 </Reader>
>             </Filter>
>         </Filter>
>     </Writer>
> </Pipeline>
>
> I guess the problem is that I'm missing some drivers in my pdal version.I
> checked the pdal drivers with 'pdal --drivers' and apparently also the
> pgpointcloud drivers are missing.
> Do you have any suggestions why i am missing these drivers and how i could
> add these drivers to pdal?
>
>
filters.cache is no longer needed. The tutorial needs to be updated to
reflect that fact with PDAL 1.0.0+.

Just remove the <Filter> and closing </Filter> element for filters.cache
and you should be able to ingest data.

Hope this helps,

Howard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150916/e2860597/attachment.html>

From howard at hobu.co  Wed Sep 16 09:42:23 2015
From: howard at hobu.co (Howard Butler)
Date: Wed, 16 Sep 2015 11:42:23 -0500
Subject: [pdal] PDAL 1.0.0 Released
In-Reply-To: <DFD2528E-F8A2-455F-85B4-D2549F5050E9@oracle.com>
References: <D60F6C0D-59B9-4B35-B7C6-711CE7C22480@hobu.co>
	<DFD2528E-F8A2-455F-85B4-D2549F5050E9@oracle.com>
Message-ID: <0F345BAA-3337-4864-AEA2-9EFBCD34856D@hobu.co>


> On Sep 12, 2015, at 9:38 AM, Albert Godfrind <albert.godfrind at oracle.com> wrote:
> 
> I am a bit confused about the installation process on Linux. The rpms on http://pdal.s3-website-us-east-1.amazonaws.com/rpms/ seem to only define the repository environment for the installation proper ?
> 
> $ sudo yum install pdal
> Loaded plugins: refresh-packagekit, security
> Setting up Install Process
> No package pdal available.
> Error: Nothing to do
> 
> I downloaded the RPM:
> 
> $ wget http://pdal.s3-website-us-east-1.amazonaws.com/rpms/repo/redhat/rhel-7-x86_64/pdal-redhat-1.0-1.noarch.rpm
> --2015-09-12 16:35:08--  http://pdal.s3-website-us-east-1.amazonaws.com/rpms/repo/redhat/rhel-7-x86_64/pdal-redhat-1.0-1.noarch.rpm
> Resolving pdal.s3-website-us-east-1.amazonaws.com... 54.231.65.28
> Connecting to pdal.s3-website-us-east-1.amazonaws.com|54.231.65.28|:80... connected.
> HTTP request sent, awaiting response... 200 OK
> Length: 4936 (4.8K) [application/x-rpm]
> Saving to: ?pdal-redhat-1.0-1.noarch.rpm?
> 100%[======================================>] 4,936       --.-K/s   in 0.1s    
> 2015-09-12 16:35:08 (37.8 KB/s) - ?pdal-redhat-1.0-1.noarch.rpm? saved [4936/4936]
> 
> Installed the RPM:
> 
> $ sudo rpm -iv pdal-redhat-1.0-1.noarch.rpm
> Preparing packages for installation...
> pdal-redhat-1.0-1
> 
> PDAL did not get installed, but I can now use yum. Except it fails with a 403 (forbidden):
> 
> $ sudo yum install pdal
> Loaded plugins: refresh-packagekit, security
> http://pdal.s3-website-us-east-1.amazonaws.com/rpms/repo/redhat/rhel-6Server-x86_64/repodata/repomd.xml: [Errno 14] PYCURL ERROR 22 - "The requested URL returned error: 403"
> Trying other mirror.
> Error: Cannot retrieve repository metadata (repomd.xml) for repository: fmach-centos7. Please verify its path and try again
> 
> Did I miss something ?

I'm not quite sure what the state of the RPMs is at the moment. Hopefully Devrim will chime in when he is able with some information and status in regard to the release.

Howard

From wenzeslaus at gmail.com  Wed Sep 16 10:19:39 2015
From: wenzeslaus at gmail.com (Vaclav Petras)
Date: Wed, 16 Sep 2015 13:19:39 -0400
Subject: [pdal] PDAL 1.0.0 Released
In-Reply-To: <0F345BAA-3337-4864-AEA2-9EFBCD34856D@hobu.co>
References: <D60F6C0D-59B9-4B35-B7C6-711CE7C22480@hobu.co>
	<DFD2528E-F8A2-455F-85B4-D2549F5050E9@oracle.com>
	<0F345BAA-3337-4864-AEA2-9EFBCD34856D@hobu.co>
Message-ID: <CABo5uVty7nbwrXKN1X=m5VEj9OWmBjw_Snt8LiKDuyrLtn70Sw@mail.gmail.com>

Any idea about PDAL status in Ubuntu GIS PPA?

On Wed, Sep 16, 2015 at 12:42 PM, Howard Butler <howard at hobu.co> wrote:

>
> > On Sep 12, 2015, at 9:38 AM, Albert Godfrind <albert.godfrind at oracle.com>
> wrote:
> >
> > I am a bit confused about the installation process on Linux. The rpms on
> http://pdal.s3-website-us-east-1.amazonaws.com/rpms/ seem to only define
> the repository environment for the installation proper ?
> >
> > $ sudo yum install pdal
> > Loaded plugins: refresh-packagekit, security
> > Setting up Install Process
> > No package pdal available.
> > Error: Nothing to do
> >
> > I downloaded the RPM:
> >
> > $ wget
> http://pdal.s3-website-us-east-1.amazonaws.com/rpms/repo/redhat/rhel-7-x86_64/pdal-redhat-1.0-1.noarch.rpm
> > --2015-09-12 16:35:08--
> http://pdal.s3-website-us-east-1.amazonaws.com/rpms/repo/redhat/rhel-7-x86_64/pdal-redhat-1.0-1.noarch.rpm
> > Resolving pdal.s3-website-us-east-1.amazonaws.com... 54.231.65.28
> > Connecting to pdal.s3-website-us-east-1.amazonaws.com|54.231.65.28|:80...
> connected.
> > HTTP request sent, awaiting response... 200 OK
> > Length: 4936 (4.8K) [application/x-rpm]
> > Saving to: ?pdal-redhat-1.0-1.noarch.rpm?
> > 100%[======================================>] 4,936       --.-K/s   in
> 0.1s
> > 2015-09-12 16:35:08 (37.8 KB/s) - ?pdal-redhat-1.0-1.noarch.rpm? saved
> [4936/4936]
> >
> > Installed the RPM:
> >
> > $ sudo rpm -iv pdal-redhat-1.0-1.noarch.rpm
> > Preparing packages for installation...
> > pdal-redhat-1.0-1
> >
> > PDAL did not get installed, but I can now use yum. Except it fails with
> a 403 (forbidden):
> >
> > $ sudo yum install pdal
> > Loaded plugins: refresh-packagekit, security
> >
> http://pdal.s3-website-us-east-1.amazonaws.com/rpms/repo/redhat/rhel-6Server-x86_64/repodata/repomd.xml:
> [Errno 14] PYCURL ERROR 22 - "The requested URL returned error: 403"
> > Trying other mirror.
> > Error: Cannot retrieve repository metadata (repomd.xml) for repository:
> fmach-centos7. Please verify its path and try again
> >
> > Did I miss something ?
>
> I'm not quite sure what the state of the RPMs is at the moment. Hopefully
> Devrim will chime in when he is able with some information and status in
> regard to the release.
>
> Howard
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150916/dedec864/attachment-0001.html>

From thomas.cuerten at wheregroup.com  Thu Sep 17 01:51:46 2015
From: thomas.cuerten at wheregroup.com (=?UTF-8?Q?Thomas_C=c3=bcrten_=28WhereGroup=29?=)
Date: Thu, 17 Sep 2015 10:51:46 +0200
Subject: [pdal] Import point cloud into PostgreSQL/ pdal pipeline fails
In-Reply-To: <CAKyBbG6Me8NyBU4USVM_EfFqzywgHd9m1f82HgNLAw7FwdQySA@mail.gmail.com>
References: <55F949A2.7050609@wheregroup.com>
	<CAKyBbG6Me8NyBU4USVM_EfFqzywgHd9m1f82HgNLAw7FwdQySA@mail.gmail.com>
Message-ID: <55FA7F22.6070700@wheregroup.com>



Am 16.09.2015 um 16:06 schrieb Howard Butler:
> On Wed, Sep 16, 2015 at 5:51 AM, Thomas C?rten (WhereGroup) 
> <thomas.cuerten at wheregroup.com <mailto:thomas.cuerten at wheregroup.com>> 
> wrote:
>
>     Hello everyboy,
>     I followed this tutorial
>     (http://workshops.boundlessgeo.com/tutorial-lidar/) and  am trying
>     to load las-data into postgreSQL by using the pipeline function
>     from pdal.  Unfortunately pdal generates an error when I try to
>     upload the lidar data to the database: |pdal pipeline --input
>     laz2pg.xml|
>
>         PDAL: Couldn't create filter stage of type 'filters.cache'.
>
>     The content of my pipeline xml file is the following:
>
>     |<?xml version="1.0" encoding="utf-8"?> <Pipeline version="1.0">
>     <Writer type="writers.pgpointcloud"> <Option
>     name="connection">host='localhost' dbname='lidar'
>     user='postgres'</Option> <Option name="table">sthsm</Option>
>     <Option name="srid">4326</Option> <Filter type="filters.chipper">
>     <Option name="capacity">400</Option> <Filter type="filters.cache">
>     <Reader type="readers.las"> <Option
>     name="U4545539.las">/home/tcuerten/Dokumente/LASER/U4545539.las</Option>
>     <Option name="spatialreference">EPSG:4326</Option> </Reader>
>     </Filter> </Filter> </Writer> </Pipeline>|
>
>     I guess the problem is that I'm missing some drivers in my pdal
>     version.I checked the pdal drivers with 'pdal --drivers' and
>     apparently also the pgpointcloud drivers are missing.
>     Do you have any suggestions why i am missing these drivers and how
>     i could add these drivers to pdal?
>
>
> filters.cache is no longer needed. The tutorial needs to be updated to 
> reflect that fact with PDAL 1.0.0+.
>
> Just remove the <Filter> and closing </Filter> element for 
> filters.cache and you should be able to ingest data.
>
> Hope this helps,
>
> Howard
Hello Howard,

thank you for your answer.But unfortunately, after removing the 
filter.cache from my xml I receive the error:'PDAL: Couldn't create 
writer stage of type 'writers.pgpointcloud'. Could there be something 
wrong with my pdal oder pointcloud installation? I used this 
documentation: 
http://suite.opengeo.org/opengeo-docs/dataadmin/pointcloud/install.html?highlight=pdal#dataadmin-pointcloud-install-activate 
to install the programs.

Regards.

Thomas






-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150917/3e74fb93/attachment.html>

From andrew.bell.ia at gmail.com  Thu Sep 17 05:54:22 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 17 Sep 2015 07:54:22 -0500
Subject: [pdal] Import point cloud into PostgreSQL/ pdal pipeline fails
In-Reply-To: <55FA7F22.6070700@wheregroup.com>
References: <55F949A2.7050609@wheregroup.com>
	<CAKyBbG6Me8NyBU4USVM_EfFqzywgHd9m1f82HgNLAw7FwdQySA@mail.gmail.com>
	<55FA7F22.6070700@wheregroup.com>
Message-ID: <CACJ51z3rg-AxMBRMDux0pPw1B_JsxrL4VJ=1K4y1qGebECBkSw@mail.gmail.com>

On Thu, Sep 17, 2015 at 3:51 AM, Thomas C?rten (WhereGroup) <
thomas.cuerten at wheregroup.com> wrote:

>
> thank you for your answer.But unfortunately, after removing the
> filter.cache from my xml I receive the error:'PDAL: Couldn't create writer
> stage of type 'writers.pgpointcloud'. Could there be something wrong with
> my pdal oder pointcloud installation? I used this documentation:
> http://suite.opengeo.org/opengeo-docs/dataadmin/pointcloud/install.html?highlight=pdal#dataadmin-pointcloud-install-activate
> to install the programs.
>

I'm not sure what you've gotten with your installation, but it seems you
haven't gotten PDAL built with postgres support.  Take a look where your
libpdalcpp.so file is (usually /usr/local/lib) and check to see if the
directory contains libpdal_plugin_writer_pgpointcloud.so.  If not, you're
going to have to build PDAL yourself or get an installation from another
source that build the postgres plugin.

Perhaps someone else knows which plugins are provided with various
installations?

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150917/7ac12b39/attachment.html>

From brad.chambers at gmail.com  Thu Sep 17 06:07:26 2015
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Thu, 17 Sep 2015 13:07:26 +0000
Subject: [pdal] Import point cloud into PostgreSQL/ pdal pipeline fails
In-Reply-To: <CACJ51z3rg-AxMBRMDux0pPw1B_JsxrL4VJ=1K4y1qGebECBkSw@mail.gmail.com>
References: <55F949A2.7050609@wheregroup.com>
	<CAKyBbG6Me8NyBU4USVM_EfFqzywgHd9m1f82HgNLAw7FwdQySA@mail.gmail.com>
	<55FA7F22.6070700@wheregroup.com>
	<CACJ51z3rg-AxMBRMDux0pPw1B_JsxrL4VJ=1K4y1qGebECBkSw@mail.gmail.com>
Message-ID: <CAJyqqPz0ha6m7anuxakocnRB=TYwq4Fs6QsPfA1fApmKs_TaCA@mail.gmail.com>

FWIW, the OSGeo4W build has LASzip support with hexbin, python, nitf,
pgpointcloud, pcl, and p2g plugins enabled.

On Thu, Sep 17, 2015 at 8:54 AM Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

> On Thu, Sep 17, 2015 at 3:51 AM, Thomas C?rten (WhereGroup) <
> thomas.cuerten at wheregroup.com> wrote:
>
>>
>> thank you for your answer.But unfortunately, after removing the
>> filter.cache from my xml I receive the error:'PDAL: Couldn't create writer
>> stage of type 'writers.pgpointcloud'. Could there be something wrong with
>> my pdal oder pointcloud installation? I used this documentation:
>> http://suite.opengeo.org/opengeo-docs/dataadmin/pointcloud/install.html?highlight=pdal#dataadmin-pointcloud-install-activate
>> to install the programs.
>>
>
> I'm not sure what you've gotten with your installation, but it seems you
> haven't gotten PDAL built with postgres support.  Take a look where your
> libpdalcpp.so file is (usually /usr/local/lib) and check to see if the
> directory contains libpdal_plugin_writer_pgpointcloud.so.  If not, you're
> going to have to build PDAL yourself or get an installation from another
> source that build the postgres plugin.
>
> Perhaps someone else knows which plugins are provided with various
> installations?
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150917/acf6ab39/attachment.html>

From howard at hobu.co  Thu Sep 17 06:16:12 2015
From: howard at hobu.co (Howard Butler)
Date: Thu, 17 Sep 2015 08:16:12 -0500
Subject: [pdal] Import point cloud into PostgreSQL/ pdal pipeline fails
In-Reply-To: <CACJ51z3rg-AxMBRMDux0pPw1B_JsxrL4VJ=1K4y1qGebECBkSw@mail.gmail.com>
References: <55F949A2.7050609@wheregroup.com>
	<CAKyBbG6Me8NyBU4USVM_EfFqzywgHd9m1f82HgNLAw7FwdQySA@mail.gmail.com>
	<55FA7F22.6070700@wheregroup.com>
	<CACJ51z3rg-AxMBRMDux0pPw1B_JsxrL4VJ=1K4y1qGebECBkSw@mail.gmail.com>
Message-ID: <27C6F354-7BE4-4E99-B788-A278535A8F6B@hobu.co>


> On Thu, Sep 17, 2015 at 3:51 AM, Thomas C?rten (WhereGroup) <thomas.cuerten at wheregroup.com> wrote:
> 
> I'm not sure what you've gotten with your installation, but it seems you haven't gotten PDAL built with postgres support.  Take a look where your libpdalcpp.so file is (usually /usr/local/lib) and check to see if the directory contains libpdal_plugin_writer_pgpointcloud.so.  If not, you're going to have to build PDAL yourself or get an installation from another source that build the postgres plugin.

Another thing to try is exporting PDAL_DRIVER_PATH=/path/to/pdal/lib in the environment before running the pipeline. It is possible that OpenGeo suite doesn't install in a default location. Newer PDAL now embeds the install location as a plugin path, but older ones didn't if I recall correctly.


> Perhaps someone else knows which plugins are provided with various installations?

I'm not sure what the status of the OpenGeo suite is in regard to PDAL and the latest 1.0.1 release. I would imagine it probably isn't quite up to date yet.

Another option, just to see if you can get things working, is to run through the PDAL Vagrant tutorial. http://www.pdal.io/vagrant.html It installs PostgreSQL and pgpointcloud, and it uses them to store and retrieve a file as an example.

Hope this helps,

Howard


From howard at hobu.co  Fri Sep 18 07:20:00 2015
From: howard at hobu.co (Howard Butler)
Date: Fri, 18 Sep 2015 09:20:00 -0500
Subject: [pdal] Import point cloud into PostgreSQL/ pdal pipeline fails
In-Reply-To: <55FBEA4B.5010509@wheregroup.com>
References: <55F949A2.7050609@wheregroup.com>
	<CAKyBbG6Me8NyBU4USVM_EfFqzywgHd9m1f82HgNLAw7FwdQySA@mail.gmail.com>
	<55FA7F22.6070700@wheregroup.com>
	<CACJ51z3rg-AxMBRMDux0pPw1B_JsxrL4VJ=1K4y1qGebECBkSw@mail.gmail.com>
	<27C6F354-7BE4-4E99-B788-A278535A8F6B@hobu.co>
	<55FBEA4B.5010509@wheregroup.com>
Message-ID: <C85789D1-FF9C-4222-8767-B36D6DBE7DA8@hobu.co>


> On Sep 18, 2015, at 5:41 AM, Thomas C?rten (WhereGroup) <thomas.cuerten at wheregroup.com> wrote:
> 
> Hello again,
> 
> exporting the PDAL_DRIVER_PATH to /usr/lib solved the problem. Thank you for your help.
> 
> Regards.

That's curious.

Newer PDAL versions look in that location by default. 

What does 

> pdal --version

report for its git version?

From tom.van.tilburg at gmail.com  Tue Sep 22 08:24:17 2015
From: tom.van.tilburg at gmail.com (Tom van Tilburg)
Date: Tue, 22 Sep 2015 15:24:17 +0000
Subject: [pdal] XML output not working on pdal info?
Message-ID: <CAP3PPDjaGzjSsFe2W2DF0OwfrsWth-rqLkJh7=JzT30btAW_LA@mail.gmail.com>

I noticed that pdal info --schema --xml lasfile.las (as per
http://www.pdal.io/tutorial/reading.html) doesn't produce XML anymore but
only JSON. My pdal has been build with XML support (pdal 1.0.1
(git-version: Release).

Anyone else has this?

Tom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150922/8a582efb/attachment.html>

From James.R.Bellenger at nga.mil  Tue Sep 22 08:29:31 2015
From: James.R.Bellenger at nga.mil (James.R.Bellenger at nga.mil)
Date: Tue, 22 Sep 2015 15:29:31 +0000
Subject: [pdal] Problem with Geowave Plugin and latest version of GeoWave
Message-ID: <A73BE1D57C259448906C7D14114F80F3553E6E93@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>

Classification: UNCLASSIFIED
======================================================

We have built GeoWave and Jace from the latest Github masters and have found many errors compiling plugins/geowave/io/GeoWaveReader.cpp and plugins/geowave/io/GeoWaveWriter.cpp from the PDAL master.zip file.

We got the geowave and jace versions from https://github.com/ngageoint/geowave and https://github.com/jwomeara/jace 

Jim Bellenger 
Lead R&D Technologist
NGA/II-GIAT 
314-676-0887, DSN 846-0887 
Secure 577-6465

======================================================
Classification: UNCLASSIFIED


From howard at hobu.co  Tue Sep 22 10:14:51 2015
From: howard at hobu.co (Howard Butler)
Date: Tue, 22 Sep 2015 13:14:51 -0400
Subject: [pdal] Problem with Geowave Plugin and latest version of GeoWave
In-Reply-To: <A73BE1D57C259448906C7D14114F80F3553E6E93@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
References: <A73BE1D57C259448906C7D14114F80F3553E6E93@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
Message-ID: <D5D486B7-3A83-471C-BB10-7D98D3B417AE@hobu.co>


> On Sep 22, 2015, at 11:29 AM, <James.R.Bellenger at nga.mil> <James.R.Bellenger at nga.mil> wrote:
> 
> Classification: UNCLASSIFIED
> ======================================================
> 
> We have built GeoWave and Jace from the latest Github masters and have found many errors compiling plugins/geowave/io/GeoWaveReader.cpp and plugins/geowave/io/GeoWaveWriter.cpp from the PDAL master.zip file.
> 
> We got the geowave and jace versions from https://github.com/ngageoint/geowave and https://github.com/jwomeara/jace 

Do you have a link or a listing of the compilation errors you received?

Howard

From howard at hobu.co  Tue Sep 22 10:17:52 2015
From: howard at hobu.co (Howard Butler)
Date: Tue, 22 Sep 2015 13:17:52 -0400
Subject: [pdal] XML output not working on pdal info?
In-Reply-To: <CAP3PPDjaGzjSsFe2W2DF0OwfrsWth-rqLkJh7=JzT30btAW_LA@mail.gmail.com>
References: <CAP3PPDjaGzjSsFe2W2DF0OwfrsWth-rqLkJh7=JzT30btAW_LA@mail.gmail.com>
Message-ID: <9597E17E-40AD-4909-BF63-3B345974CCE9@hobu.co>


> On Sep 22, 2015, at 11:24 AM, Tom van Tilburg <tom.van.tilburg at gmail.com> wrote:
> 
> I noticed that pdal info --schema --xml lasfile.las (as per http://www.pdal.io/tutorial/reading.html) doesn't produce XML anymore but only JSON. My pdal has been build with XML support (pdal 1.0.1 (git-version: Release).
> 
> Anyone else has this?

The docs are out of date [1]. We only output JSON except for --pointcloudschema output, which outputs the PCSchema stuff:

> $ pdal info myfile.las --pointcloudschema ouput.xml

Howard

[1] https://github.com/PDAL/PDAL/issues/998

From WOMeara at Radiantblue.com  Tue Sep 22 10:35:37 2015
From: WOMeara at Radiantblue.com (WOMeara at Radiantblue.com)
Date: Tue, 22 Sep 2015 17:35:37 +0000
Subject: [pdal] Problem with Geowave Plugin and latest version of GeoWave
In-Reply-To: <D5D486B7-3A83-471C-BB10-7D98D3B417AE@hobu.co>
References: <A73BE1D57C259448906C7D14114F80F3553E6E93@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>,
	<D5D486B7-3A83-471C-BB10-7D98D3B417AE@hobu.co>
Message-ID: <44A10BB04DB1CF4CB221604BDFC6C0CC458C2409@NBSVR-MAIL01.radiantblue.local>

Hey Jim, 

I don't think we've ever met, but I worked on the PDAL GeoWave plugin during my time up at NCE.  I'm located in MD now, but I'd be happy to help you get up and running.  In addition to Howard's question, can you tell me exactly which version of GeoWave you're trying to run with?  Also, would I be correct in assuming that you're building this on CentOS?

Thanks!
________________________________________
From: pdal-bounces at lists.osgeo.org [pdal-bounces at lists.osgeo.org] on behalf of Howard Butler [howard at hobu.co]
Sent: Tuesday, September 22, 2015 1:14 PM
To: James.R.Bellenger at nga.mil
Cc: pdal at lists.osgeo.org
Subject: Re: [pdal] Problem with Geowave Plugin and latest version of GeoWave

> On Sep 22, 2015, at 11:29 AM, <James.R.Bellenger at nga.mil> <James.R.Bellenger at nga.mil> wrote:
>
> Classification: UNCLASSIFIED
> ======================================================
>
> We have built GeoWave and Jace from the latest Github masters and have found many errors compiling plugins/geowave/io/GeoWaveReader.cpp and plugins/geowave/io/GeoWaveWriter.cpp from the PDAL master.zip file.
>
> We got the geowave and jace versions from https://github.com/ngageoint/geowave and https://github.com/jwomeara/jace

Do you have a link or a listing of the compilation errors you received?

Howard
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/pdal

From WOMeara at Radiantblue.com  Tue Sep 22 10:42:39 2015
From: WOMeara at Radiantblue.com (WOMeara at Radiantblue.com)
Date: Tue, 22 Sep 2015 17:42:39 +0000
Subject: [pdal] Problem with Geowave Plugin and latest version of GeoWave
In-Reply-To: <44A10BB04DB1CF4CB221604BDFC6C0CC458C2409@NBSVR-MAIL01.radiantblue.local>
References: <A73BE1D57C259448906C7D14114F80F3553E6E93@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>,
	<D5D486B7-3A83-471C-BB10-7D98D3B417AE@hobu.co>,
	<44A10BB04DB1CF4CB221604BDFC6C0CC458C2409@NBSVR-MAIL01.radiantblue.local>
Message-ID: <44A10BB04DB1CF4CB221604BDFC6C0CC458C2435@NBSVR-MAIL01.radiantblue.local>

I should also point out that if you're using the latest version of GeoWave, there has been some major refactoring recently.  The last version of GeoWave that I tested with PDAL was v0.8.5.  There are probably some updates that need to be made to the GeoWave drivers to bring everything up to speed with GeoWave 0.8.8.1.  If that's your issue, let me know and I'll get to work on that.  If GeoWave 0.8.5 doesn't work for you, let me know and I'll look into that as well.  
________________________________________
From: pdal-bounces at lists.osgeo.org [pdal-bounces at lists.osgeo.org] on behalf of WOMeara at Radiantblue.com [WOMeara at Radiantblue.com]
Sent: Tuesday, September 22, 2015 1:35 PM
To: Howard Butler; James.R.Bellenger at nga.mil
Cc: pdal at lists.osgeo.org
Subject: Re: [pdal] Problem with Geowave Plugin and latest version of GeoWave

Hey Jim,

I don't think we've ever met, but I worked on the PDAL GeoWave plugin during my time up at NCE.  I'm located in MD now, but I'd be happy to help you get up and running.  In addition to Howard's question, can you tell me exactly which version of GeoWave you're trying to run with?  Also, would I be correct in assuming that you're building this on CentOS?

Thanks!
________________________________________
From: pdal-bounces at lists.osgeo.org [pdal-bounces at lists.osgeo.org] on behalf of Howard Butler [howard at hobu.co]
Sent: Tuesday, September 22, 2015 1:14 PM
To: James.R.Bellenger at nga.mil
Cc: pdal at lists.osgeo.org
Subject: Re: [pdal] Problem with Geowave Plugin and latest version of GeoWave

> On Sep 22, 2015, at 11:29 AM, <James.R.Bellenger at nga.mil> <James.R.Bellenger at nga.mil> wrote:
>
> Classification: UNCLASSIFIED
> ======================================================
>
> We have built GeoWave and Jace from the latest Github masters and have found many errors compiling plugins/geowave/io/GeoWaveReader.cpp and plugins/geowave/io/GeoWaveWriter.cpp from the PDAL master.zip file.
>
> We got the geowave and jace versions from https://github.com/ngageoint/geowave and https://github.com/jwomeara/jace

Do you have a link or a listing of the compilation errors you received?

Howard
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/pdal
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/pdal

From James.R.Bellenger at nga.mil  Tue Sep 22 10:58:53 2015
From: James.R.Bellenger at nga.mil (James.R.Bellenger at nga.mil)
Date: Tue, 22 Sep 2015 17:58:53 +0000
Subject: [pdal] Problem with Geowave Plugin and latest version of GeoWave
In-Reply-To: <44A10BB04DB1CF4CB221604BDFC6C0CC458C2435@NBSVR-MAIL01.radiantblue.local>
References: <A73BE1D57C259448906C7D14114F80F3553E6E93@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>,
	<D5D486B7-3A83-471C-BB10-7D98D3B417AE@hobu.co>,
	<44A10BB04DB1CF4CB221604BDFC6C0CC458C2409@NBSVR-MAIL01.radiantblue.local>
	<44A10BB04DB1CF4CB221604BDFC6C0CC458C2435@NBSVR-MAIL01.radiantblue.local>
Message-ID: <A73BE1D57C259448906C7D14114F80F3553E7F65@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>

Classification: UNCLASSIFIED
======================================================

Hello,

Yes, it was the latest version of GeoWave downloaded from GitHub.

Jim Bellenger 
Lead R&D Technologist
NGA/II-GIAT 
314-676-0887, DSN 846-0887 
Secure 577-6465


-----Original Message-----
From: pdal-bounces at lists.osgeo.org [mailto:pdal-bounces at lists.osgeo.org] On Behalf Of WOMeara at Radiantblue.com
Sent: Tuesday, September 22, 2015 12:43 PM
Cc: pdal at lists.osgeo.org
Subject: Re: [pdal] Problem with Geowave Plugin and latest version of GeoWave

I should also point out that if you're using the latest version of GeoWave, there has been some major refactoring recently.  The last version of GeoWave that I tested with PDAL was v0.8.5.  There are probably some updates that need to be made to the GeoWave drivers to bring everything up to speed with GeoWave 0.8.8.1.  If that's your issue, let me know and I'll get to work on that.  If GeoWave 0.8.5 doesn't work for you, let me know and I'll look into that as well.  
________________________________________
From: pdal-bounces at lists.osgeo.org [pdal-bounces at lists.osgeo.org] on behalf of WOMeara at Radiantblue.com [WOMeara at Radiantblue.com]
Sent: Tuesday, September 22, 2015 1:35 PM
To: Howard Butler; James.R.Bellenger at nga.mil
Cc: pdal at lists.osgeo.org
Subject: Re: [pdal] Problem with Geowave Plugin and latest version of GeoWave

Hey Jim,

I don't think we've ever met, but I worked on the PDAL GeoWave plugin during my time up at NCE.  I'm located in MD now, but I'd be happy to help you get up and running.  In addition to Howard's question, can you tell me exactly which version of GeoWave you're trying to run with?  Also, would I be correct in assuming that you're building this on CentOS?

Thanks!
________________________________________
From: pdal-bounces at lists.osgeo.org [pdal-bounces at lists.osgeo.org] on behalf of Howard Butler [howard at hobu.co]
Sent: Tuesday, September 22, 2015 1:14 PM
To: James.R.Bellenger at nga.mil
Cc: pdal at lists.osgeo.org
Subject: Re: [pdal] Problem with Geowave Plugin and latest version of GeoWave

> On Sep 22, 2015, at 11:29 AM, <James.R.Bellenger at nga.mil> <James.R.Bellenger at nga.mil> wrote:
>
> Classification: UNCLASSIFIED
> ======================================================
>
> We have built GeoWave and Jace from the latest Github masters and have found many errors compiling plugins/geowave/io/GeoWaveReader.cpp and plugins/geowave/io/GeoWaveWriter.cpp from the PDAL master.zip file.
>
> We got the geowave and jace versions from https://github.com/ngageoint/geowave and https://github.com/jwomeara/jace

Do you have a link or a listing of the compilation errors you received?

Howard
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/pdal
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/pdal
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/pdal
======================================================
Classification: UNCLASSIFIED


From tom.van.tilburg at gmail.com  Wed Sep 23 00:22:16 2015
From: tom.van.tilburg at gmail.com (Tom van Tilburg)
Date: Wed, 23 Sep 2015 07:22:16 +0000
Subject: [pdal] XML output not working on pdal info?
In-Reply-To: <9597E17E-40AD-4909-BF63-3B345974CCE9@hobu.co>
References: <CAP3PPDjaGzjSsFe2W2DF0OwfrsWth-rqLkJh7=JzT30btAW_LA@mail.gmail.com>
	<9597E17E-40AD-4909-BF63-3B345974CCE9@hobu.co>
Message-ID: <CAP3PPDgEYhi9Kmc=4ith1-gqpuy6RopBwgNO-dbsyZijKGWt=g@mail.gmail.com>

That pointcloudschema was ofcourse what i needed, thanks. Worked flawlessly
now.
For the record: I believe --pointcloudschema isn't shown in the --help of
pdal info either.

Best,

  Tom



On Tue, 22 Sep 2015 19:17 Howard Butler <howard at hobu.co> wrote:

>
> > On Sep 22, 2015, at 11:24 AM, Tom van Tilburg <tom.van.tilburg at gmail.com>
> wrote:
> >
> > I noticed that pdal info --schema --xml lasfile.las (as per
> http://www.pdal.io/tutorial/reading.html) doesn't produce XML anymore but
> only JSON. My pdal has been build with XML support (pdal 1.0.1
> (git-version: Release).
> >
> > Anyone else has this?
>
> The docs are out of date [1]. We only output JSON except for
> --pointcloudschema output, which outputs the PCSchema stuff:
>
> > $ pdal info myfile.las --pointcloudschema ouput.xml
>
> Howard
>
> [1] https://github.com/PDAL/PDAL/issues/998
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150923/dd528263/attachment.html>

From howard at hobu.co  Wed Sep 23 08:26:13 2015
From: howard at hobu.co (Howard Butler)
Date: Wed, 23 Sep 2015 11:26:13 -0400
Subject: [pdal] XML output not working on pdal info?
In-Reply-To: <CAP3PPDgEYhi9Kmc=4ith1-gqpuy6RopBwgNO-dbsyZijKGWt=g@mail.gmail.com>
References: <CAP3PPDjaGzjSsFe2W2DF0OwfrsWth-rqLkJh7=JzT30btAW_LA@mail.gmail.com>
	<9597E17E-40AD-4909-BF63-3B345974CCE9@hobu.co>
	<CAP3PPDgEYhi9Kmc=4ith1-gqpuy6RopBwgNO-dbsyZijKGWt=g@mail.gmail.com>
Message-ID: <F2332037-7A84-4312-8FCB-FC0E21668384@hobu.co>


> On Sep 23, 2015, at 3:22 AM, Tom van Tilburg <tom.van.tilburg at gmail.com> wrote:
> 
> For the record: I believe --pointcloudschema isn't shown in the --help of pdal info either.

It is currently a hidden option so that it won't show in help output. It's not clear whether or not this needs to a very visible thing. I could be convinced either way.

Howard

From matt.a.hanson at gmail.com  Thu Sep 24 10:20:21 2015
From: matt.a.hanson at gmail.com (Matt Hanson)
Date: Thu, 24 Sep 2015 13:20:21 -0400
Subject: [pdal] boundary
Message-ID: <CAGYeuZmq8ZdKZXzgErgu59yK4PEmBpBSszWws0db4G9sTi5Rmg@mail.gmail.com>

Hello,

What is the easiest way to use pdal info --boundary on multiple files?   I
want to compute the boundary for a set of tiled data files, can I do it
without writing a pipeline file?   (In fact, even if writing a pipeline
file how would I generate the boundary?)

Thanks,

matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150924/b6c8456b/attachment.html>

From andrew.bell.ia at gmail.com  Thu Sep 24 10:36:08 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 24 Sep 2015 13:36:08 -0400
Subject: [pdal] boundary
In-Reply-To: <CAGYeuZmq8ZdKZXzgErgu59yK4PEmBpBSszWws0db4G9sTi5Rmg@mail.gmail.com>
References: <CAGYeuZmq8ZdKZXzgErgu59yK4PEmBpBSszWws0db4G9sTi5Rmg@mail.gmail.com>
Message-ID: <CACJ51z0J2eqQ4WHR4Ns9psHSFArf7WDomogiKxqWnXy=reaLsg@mail.gmail.com>

You can run `pdal merge` to generate a single file and then run `pdal info
--boundary` on the result.  There isn't currently a way to do this directly
with a pipeline without specifying the files individually.

On Thu, Sep 24, 2015 at 1:20 PM, Matt Hanson <matt.a.hanson at gmail.com>
wrote:

> Hello,
>
> What is the easiest way to use pdal info --boundary on multiple files?   I
> want to compute the boundary for a set of tiled data files, can I do it
> without writing a pipeline file?   (In fact, even if writing a pipeline
> file how would I generate the boundary?)
>
> Thanks,
>
> matt
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150924/b2a092dd/attachment.html>

From matt.a.hanson at gmail.com  Thu Sep 24 11:07:31 2015
From: matt.a.hanson at gmail.com (Matt Hanson)
Date: Thu, 24 Sep 2015 14:07:31 -0400
Subject: [pdal] boundary
In-Reply-To: <CACJ51z0J2eqQ4WHR4Ns9psHSFArf7WDomogiKxqWnXy=reaLsg@mail.gmail.com>
References: <CAGYeuZmq8ZdKZXzgErgu59yK4PEmBpBSszWws0db4G9sTi5Rmg@mail.gmail.com>
	<CACJ51z0J2eqQ4WHR4Ns9psHSFArf7WDomogiKxqWnXy=reaLsg@mail.gmail.com>
Message-ID: <CAGYeuZ=ngEt5t+FcJOU0VFf--yJ8jwjZua5x6wogsayEHSY-TQ@mail.gmail.com>

When running pdal info --boundary I get an error:

PDAL: Couldn't create filter stage of type 'filters.hexbin'

Using PDAL 1.0.1.   Is there an additional dependency I have to install, or
reinstall a later version of?

On Thu, Sep 24, 2015 at 1:36 PM, Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

>
> You can run `pdal merge` to generate a single file and then run `pdal info
> --boundary` on the result.  There isn't currently a way to do this directly
> with a pipeline without specifying the files individually.
>
> On Thu, Sep 24, 2015 at 1:20 PM, Matt Hanson <matt.a.hanson at gmail.com>
> wrote:
>
>> Hello,
>>
>> What is the easiest way to use pdal info --boundary on multiple files?
>> I want to compute the boundary for a set of tiled data files, can I do it
>> without writing a pipeline file?   (In fact, even if writing a pipeline
>> file how would I generate the boundary?)
>>
>> Thanks,
>>
>> matt
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/pdal
>>
>
>
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150924/b9ee9a90/attachment.html>

From Michael.Smith at usace.army.mil  Thu Sep 24 11:40:33 2015
From: Michael.Smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Thu, 24 Sep 2015 18:40:33 +0000
Subject: [pdal] [EXTERNAL] Re:  boundary
In-Reply-To: <CAGYeuZ=ngEt5t+FcJOU0VFf--yJ8jwjZua5x6wogsayEHSY-TQ@mail.gmail.com>
References: <CAGYeuZmq8ZdKZXzgErgu59yK4PEmBpBSszWws0db4G9sTi5Rmg@mail.gmail.com>
	<CACJ51z0J2eqQ4WHR4Ns9psHSFArf7WDomogiKxqWnXy=reaLsg@mail.gmail.com>,
	<CAGYeuZ=ngEt5t+FcJOU0VFf--yJ8jwjZua5x6wogsayEHSY-TQ@mail.gmail.com>
Message-ID: <20150924184039.6811734.20998.41437@usace.army.mil>

Yes. You need the hexer library, https://github.com/hobu/hexer



--
Michael Smith
Remote Sensing GIS Center
US Army Corps of Engineers






From: Matt Hanson
Sent: Thursday, September 24, 2015 2:07 PM
To: Andrew Bell
Cc: pdal
Subject: [EXTERNAL] Re: [pdal] boundary


When running pdal info --boundary I get an error:

PDAL: Couldn't create filter stage of type 'filters.hexbin'

Using PDAL 1.0.1.   Is there an additional dependency I have to install, or reinstall a later version of?

On Thu, Sep 24, 2015 at 1:36 PM, Andrew Bell <andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>> wrote:

You can run `pdal merge` to generate a single file and then run `pdal info --boundary` on the result.  There isn't currently a way to do this directly with a pipeline without specifying the files individually.

On Thu, Sep 24, 2015 at 1:20 PM, Matt Hanson <matt.a.hanson at gmail.com<mailto:matt.a.hanson at gmail.com>> wrote:
Hello,

What is the easiest way to use pdal info --boundary on multiple files?   I want to compute the boundary for a set of tiled data files, can I do it without writing a pipeline file?   (In fact, even if writing a pipeline file how would I generate the boundary?)

Thanks,

matt

_______________________________________________
pdal mailing list
pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
Blockedhttp://lists.osgeo.org/mailman/listinfo/pdal



--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150924/d5107067/attachment.html>

From howard at hobu.co  Fri Sep 25 12:21:22 2015
From: howard at hobu.co (Howard Butler)
Date: Fri, 25 Sep 2015 14:21:22 -0500
Subject: [pdal] [pgpointcloud] ply and laz
In-Reply-To: <21EFB385638F3B4DAAF9C7787B0D8895317D4195@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
References: <21EFB385638F3B4DAAF9C7787B0D8895317D4195@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
Message-ID: <C8ACE091-977A-4CCD-AE6F-266BC512A31F@hobu.co>


> On Sep 25, 2015, at 2:04 PM, Dean.Hand.ctr at nga.mil wrote:
> 
> Classification: UNCLASSIFIED
> ======================================================
> 
> Hi Howard,
> 
> When trying to pgpointcloud to write as either a ply we're experiencing an issue.  For ply files, the x and y coordinates are only 3 digits in length. I don't see anything in our docs to explain this...
> 
> Can you please help?

I don't think pgpointcloud supports writing natively as ply? Are you using PDAL? 

If so:

* What do you mean by "digits"? Do you mean digits after the decimal point?
* What was original source data format before it went into pgpointcloud? LAS
* It is possible that the PDAL ply driver could be modified to support overriding the output precision, but some investigation would need to be done into the rply code that PDAL uses to read/write PLY. Quickly looking at the PDAL source. this feature doesn't appear to exist yet.

Howard


From howard at hobu.co  Fri Sep 25 12:40:50 2015
From: howard at hobu.co (Howard Butler)
Date: Fri, 25 Sep 2015 14:40:50 -0500
Subject: [pdal] [EXTERNAL] Re:  boundary
In-Reply-To: <20150924184039.6811734.20998.41437@usace.army.mil>
References: <CAGYeuZmq8ZdKZXzgErgu59yK4PEmBpBSszWws0db4G9sTi5Rmg@mail.gmail.com>
	<CACJ51z0J2eqQ4WHR4Ns9psHSFArf7WDomogiKxqWnXy=reaLsg@mail.gmail.com>
	<CAGYeuZ=ngEt5t+FcJOU0VFf--yJ8jwjZua5x6wogsayEHSY-TQ@mail.gmail.com>
	<20150924184039.6811734.20998.41437@usace.army.mil>
Message-ID: <463F8FAA-5C3D-40E6-984A-AA410F8BDBDF@hobu.co>

In the event that you do have hexer installed, and PDAL was configured with it when built, it's possible PDAL isn't finding the plugin when it loads up.

You can clobber its lookup locations by exporting 

> PDAL_DRIVER_PATH=/path/to/libpdal_plugin_files

Howard
 

From remi.cura at gmail.com  Sun Sep 27 13:14:12 2015
From: remi.cura at gmail.com (=?UTF-8?Q?R=C3=A9mi_Cura?=)
Date: Sun, 27 Sep 2015 22:14:12 +0200
Subject: [pdal] [pgpointcloud] ply and laz
In-Reply-To: <21EFB385638F3B4DAAF9C7787B0D8895317D41BA@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
References: <21EFB385638F3B4DAAF9C7787B0D8895317D4195@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<C8ACE091-977A-4CCD-AE6F-266BC512A31F@hobu.co>
	<21EFB385638F3B4DAAF9C7787B0D8895317D41BA@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
Message-ID: <CAJvUf_tBXXV1kZsm1jo0WG9rM+O1Ni5_Q7XXyJ1HiMKuZUmJYA@mail.gmail.com>

Hey,
I also use RPly,
the precision is limited in ascii output,
but nowhere near 3 digits.
It's an easy tweak to the C code to change output precision
Cheers,
R?mi C

2015-09-25 21:29 GMT+02:00 <Dean.Hand.ctr at nga.mil>:

> Classification: UNCLASSIFIED
> ======================================================
>
> We are using PDAL.  There is a writers.ply, but did doesn't say what
> readers it will support.  We are using something similar to this xml:
>
> <?xml version="1.0" encoding="utf-8"?>
> <Pipeline version="1.0"><Pipeline version="1.0">
>   <Writer type="writers.ply">
>     <Option name="filename">outputfile.ply</Option>
>     <Option name="storage_mode">little endian</Option>
>     <Reader type="readers.pgpointcloud">
>       <Option name="connection">dbname='lidar' user='user'</Option>
>       <Option name="table">lidar</Option>
>       <Option name="column">pa</Option>
>       <Option name="spatialreference">EPSG:26910</Option>
>       <Option name="where">
>         PC_Intersects(pa, ST_MakeEnvelope(560037.36, 5114846.45,
> 562667.31, 5118943.24, 26910))
>       </Option>
>     </Reader>
>   </Writer>
> </Pipeline>
>
> -----Original Message-----
> From: Howard Butler [mailto:howard at hobu.co]
> Sent: Friday, September 25, 2015 2:21 PM
> To: Hand Dean NGA-II USA CTR
> Cc: pgpointcloud at lists.osgeo.org; pdal
> Subject: Re: [pgpointcloud] ply and laz
>
>
> > On Sep 25, 2015, at 2:04 PM, Dean.Hand.ctr at nga.mil wrote:
> >
> > Classification: UNCLASSIFIED
> > ======================================================
> >
> > Hi Howard,
> >
> > When trying to pgpointcloud to write as either a ply we're experiencing
> an issue.  For ply files, the x and y coordinates are only 3 digits in
> length. I don't see anything in our docs to explain this...
> >
> > Can you please help?
>
> I don't think pgpointcloud supports writing natively as ply? Are you using
> PDAL?
>
> If so:
>
> * What do you mean by "digits"? Do you mean digits after the decimal point?
> * What was original source data format before it went into pgpointcloud?
> LAS
> * It is possible that the PDAL ply driver could be modified to support
> overriding the output precision, but some investigation would need to be
> done into the rply code that PDAL uses to read/write PLY. Quickly looking
> at the PDAL source. this feature doesn't appear to exist yet.
>
> Howard
>
>
> ======================================================
> Classification: UNCLASSIFIED
>
> _______________________________________________
> pgpointcloud mailing list
> pgpointcloud at lists.osgeo.org
> http://lists.osgeo.org/cgi-bin/mailman/listinfo/pgpointcloud
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150927/b22ae8a4/attachment.html>

From tom.van.tilburg at gmail.com  Mon Sep 28 03:02:34 2015
From: tom.van.tilburg at gmail.com (Tom van Tilburg)
Date: Mon, 28 Sep 2015 10:02:34 +0000
Subject: [pdal] pdal pipeline giving garbage in postgres
Message-ID: <CAP3PPDh262Lbzvv0gVe3r9odhE2JUfiMKe1f6jL=3oFrWpeqag@mail.gmail.com>

I'm trying to get a las file in postgres with pdal, but end up with totally
wrong data as a result. Not sure where the problem lies, I did the same
procedure a year ago without problems, but in the meantime both pdal and
pgpointcloud have been updated. Hope someone can either confirm this or
point out the mistake I made
(posting this at the pgpointcloud list as well)

Here's the setting:
* pdal 1.0.1 (git-version: Release)
* pgpointcloud 1.1.0
* running on ubuntu linux
* small las file showing correct output in lastools

This is what I do:
- pdal info test.las --pgpointcloudschema schema.xml
- load the schema into the table pointcloud_formats
- pdal pipeline pipeline.xml
- SELECT PC_Summary(pa) FROM pointclouds.test

The resulting x and y values are totally out of bounds:
{"pcid":5, "npts":599, "srid":28992,
"compr":"none","dims":[{"pos":0,"name":"X","size":8,"type":"double","stats":{"min":1.39067e-309,"max":2.78134e-309,"avg":2.62811e-309}},{"pos":1,"name":"Y","size":8,"type":"double","stats":{"min":2.44838e+77,"max":2.448
(...)"

Pipeline file:
```
<?xml version="1.0" encoding="utf-8"?>
<Pipeline version="1.0">
    <Writer type="writers.pgpointcloud">
        <Option name="connection">host='localhost' dbname='mydb' user='me'
        password='secret'</Option>
        <Option name="schema">pointclouds</Option>
        <Option name="table">test</Option>
        <Option name="overwrite">false</Option>
        <Option name="srid">28992</Option>
        <Option name="pcid">5</Option>
        <Filter type="filters.chipper">
            <Option name="capacity">600</Option>
               <Reader type="readers.las">
                    <Option
                    name="filename">/tmp/test.las</Option>
                    <Option name="spatialreference">EPSG:28992</Option>
               </Reader>
        </Filter>
    </Writer>
</Pipeline>
```
Las file:
http://research.geodan.nl/sites/demos/test.pdal


Best,
 Tom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150928/0e5fada2/attachment.html>

From andrew.bell.ia at gmail.com  Mon Sep 28 05:19:19 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 28 Sep 2015 08:19:19 -0400
Subject: [pdal] pdal pipeline giving garbage in postgres
In-Reply-To: <CAP3PPDh262Lbzvv0gVe3r9odhE2JUfiMKe1f6jL=3oFrWpeqag@mail.gmail.com>
References: <CAP3PPDh262Lbzvv0gVe3r9odhE2JUfiMKe1f6jL=3oFrWpeqag@mail.gmail.com>
Message-ID: <CACJ51z0vnv8Yka5bxARY_dBmFPsSzbg1+vmM0RmsaC8dTN-2Qw@mail.gmail.com>

On Mon, Sep 28, 2015 at 6:02 AM, Tom van Tilburg <tom.van.tilburg at gmail.com>
wrote:

> I'm trying to get a las file in postgres with pdal, but end up with
> totally wrong data as a result. Not sure where the problem lies, I did the
> same procedure a year ago without problems, but in the meantime both pdal
> and pgpointcloud have been updated. Hope someone can either confirm this or
> point out the mistake I made
> (posting this at the pgpointcloud list as well)
>
> Here's the setting:
> * pdal 1.0.1 (git-version: Release)
> * pgpointcloud 1.1.0
> * running on ubuntu linux
> * small las file showing correct output in lastools
>
> This is what I do:
> - pdal info test.las --pgpointcloudschema schema.xml
> - load the schema into the table pointcloud_formats
> - pdal pipeline pipeline.xml
> - SELECT PC_Summary(pa) FROM pointclouds.test
>
> The resulting x and y values are totally out of bounds:
> {"pcid":5, "npts":599, "srid":28992,
> "compr":"none","dims":[{"pos":0,"name":"X","size":8,"type":"double","stats":{"min":1.39067e-309,"max":2.78134e-309,"avg":2.62811e-309}},{"pos":1,"name":"Y","size":8,"type":"double","stats":{"min":2.44838e+77,"max":2.448
> (...)"
>

I'm don't know what's wrong, but I also don't understand your process.
PDAL will create the appropriate schema for you when it writes the data.
Is there some reason that you're trying to write the schema by hand?  Do
you get different behavior if you simply run the pipeline into an empty
database (use a different pcid)?

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150928/9c8e7b60/attachment.html>

From howard at hobu.co  Mon Sep 28 06:53:15 2015
From: howard at hobu.co (Howard Butler)
Date: Mon, 28 Sep 2015 08:53:15 -0500
Subject: [pdal] pdal pipeline giving garbage in postgres
In-Reply-To: <CACJ51z0vnv8Yka5bxARY_dBmFPsSzbg1+vmM0RmsaC8dTN-2Qw@mail.gmail.com>
References: <CAP3PPDh262Lbzvv0gVe3r9odhE2JUfiMKe1f6jL=3oFrWpeqag@mail.gmail.com>
	<CACJ51z0vnv8Yka5bxARY_dBmFPsSzbg1+vmM0RmsaC8dTN-2Qw@mail.gmail.com>
Message-ID: <DC0FD764-CDD1-49B5-AF48-2A9F02B8654B@hobu.co>


> On Sep 28, 2015, at 7:19 AM, Andrew Bell <andrew.bell.ia at gmail.com> wrote:
> 
> I'm don't know what's wrong, but I also don't understand your process.  

If I remember correctly, previously prescribed processes were to create a table/schema to load the data into, and then load each subsequent file pointed at that schema. It may be that the documentation describing how to workflow the data need to be updated.

Tom,

Can you describe the overall process you are hoping to achieve?

Howard

From tom.van.tilburg at gmail.com  Mon Sep 28 07:01:44 2015
From: tom.van.tilburg at gmail.com (Tom van Tilburg)
Date: Mon, 28 Sep 2015 14:01:44 +0000
Subject: [pdal] pdal pipeline giving garbage in postgres
In-Reply-To: <DC0FD764-CDD1-49B5-AF48-2A9F02B8654B@hobu.co>
References: <CAP3PPDh262Lbzvv0gVe3r9odhE2JUfiMKe1f6jL=3oFrWpeqag@mail.gmail.com>
	<CACJ51z0vnv8Yka5bxARY_dBmFPsSzbg1+vmM0RmsaC8dTN-2Qw@mail.gmail.com>
	<DC0FD764-CDD1-49B5-AF48-2A9F02B8654B@hobu.co>
Message-ID: <CAP3PPDiGsNPR_Bh5r8FYtyq6V1-qDrtnj8UYzOmFOAtXSeDmXg@mail.gmail.com>

Hi Howard,

Ideally the process would be to load a multitude of las files in one go. As
far as I know the pdal-pipeline process is only dealing with one las file
at a time so what I'm doing is preparing the database with the correct
schema in pointcloud_formats, adding the correct pcid id to a pipeline.xml
file and then feeding the las files one by one (by copying to a temporary
input file) to pdal pipeline.
That part where I prepare the database went wrong this time, because the
output of --pgpointcloudschema apparently doesn't correspond with what pdal
actually feeds into pgpointcloud.

>From what I can see in the different schema's, the order of the 'position'
is mixed up. One has 'X' on the first position whereas the correct one has
'Intensity' on the first position. I can send you both xml schemas if you
like for comparison.

Best,
 Tom

On Mon, 28 Sep 2015 at 15:53 Howard Butler <howard at hobu.co> wrote:

>
> > On Sep 28, 2015, at 7:19 AM, Andrew Bell <andrew.bell.ia at gmail.com>
> wrote:
> >
> > I'm don't know what's wrong, but I also don't understand your process.
>
> If I remember correctly, previously prescribed processes were to create a
> table/schema to load the data into, and then load each subsequent file
> pointed at that schema. It may be that the documentation describing how to
> workflow the data need to be updated.
>
> Tom,
>
> Can you describe the overall process you are hoping to achieve?
>
> Howard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150928/dfe6ebf4/attachment-0001.html>

From howard at hobu.co  Mon Sep 28 07:11:05 2015
From: howard at hobu.co (Howard Butler)
Date: Mon, 28 Sep 2015 09:11:05 -0500
Subject: [pdal] pdal pipeline giving garbage in postgres
In-Reply-To: <CAP3PPDiGsNPR_Bh5r8FYtyq6V1-qDrtnj8UYzOmFOAtXSeDmXg@mail.gmail.com>
References: <CAP3PPDh262Lbzvv0gVe3r9odhE2JUfiMKe1f6jL=3oFrWpeqag@mail.gmail.com>
	<CACJ51z0vnv8Yka5bxARY_dBmFPsSzbg1+vmM0RmsaC8dTN-2Qw@mail.gmail.com>
	<DC0FD764-CDD1-49B5-AF48-2A9F02B8654B@hobu.co>
	<CAP3PPDiGsNPR_Bh5r8FYtyq6V1-qDrtnj8UYzOmFOAtXSeDmXg@mail.gmail.com>
Message-ID: <A7BB0971-2B27-41FA-8A54-80C0A3621ADC@hobu.co>

To clarify, the workflow you desire is:

1) Create a table with a "seed" file that contains the schema/items you wish to load
2) Load up 1000s of files into that single table

If so, maybe we should modify the pgpointcloud writer to make that scenario easier to achieve. I don't think it would be too difficult.

Howard

From tom.van.tilburg at gmail.com  Mon Sep 28 07:19:53 2015
From: tom.van.tilburg at gmail.com (Tom van Tilburg)
Date: Mon, 28 Sep 2015 14:19:53 +0000
Subject: [pdal] pdal pipeline giving garbage in postgres
In-Reply-To: <A7BB0971-2B27-41FA-8A54-80C0A3621ADC@hobu.co>
References: <CAP3PPDh262Lbzvv0gVe3r9odhE2JUfiMKe1f6jL=3oFrWpeqag@mail.gmail.com>
	<CACJ51z0vnv8Yka5bxARY_dBmFPsSzbg1+vmM0RmsaC8dTN-2Qw@mail.gmail.com>
	<DC0FD764-CDD1-49B5-AF48-2A9F02B8654B@hobu.co>
	<CAP3PPDiGsNPR_Bh5r8FYtyq6V1-qDrtnj8UYzOmFOAtXSeDmXg@mail.gmail.com>
	<A7BB0971-2B27-41FA-8A54-80C0A3621ADC@hobu.co>
Message-ID: <CAP3PPDhb_o0H7jHC1HrkOTfpEDy5TUWeHPD30K5bs4+vrJsfMA@mail.gmail.com>

1) I'm not sure what you mean with "seed" file. Do you mean create it in a
postgres table? Or more like a config file that is read by pdal pipeline?
It would be nice if the pipeline file/lasreader could deal with a directory
instead of a file.
So in de pipeline.xml file it would look like:
<Reader type="readers.las">
                    <Option name="directory">/tmp/mylasfiles</Option>
All files have the same schema, I don't have to worry about that.

2) Exactly

I'm not unhappy with the way I'm doing it now by the way, but people with
less skills in batch processing could be saved a lot of worries if it could
be all handled from the pdal pipeline command.

On Mon, 28 Sep 2015 at 16:10 Howard Butler <howard at hobu.co> wrote:

> To clarify, the workflow you desire is:
>
> 1) Create a table with a "seed" file that contains the schema/items you
> wish to load
> 2) Load up 1000s of files into that single table
>
> If so, maybe we should modify the pgpointcloud writer to make that
> scenario easier to achieve. I don't think it would be too difficult.
>
> Howard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150928/d1c2f2de/attachment.html>

From howard at hobu.co  Mon Sep 28 07:27:28 2015
From: howard at hobu.co (Howard Butler)
Date: Mon, 28 Sep 2015 09:27:28 -0500
Subject: [pdal] pdal pipeline giving garbage in postgres
In-Reply-To: <CAP3PPDhb_o0H7jHC1HrkOTfpEDy5TUWeHPD30K5bs4+vrJsfMA@mail.gmail.com>
References: <CAP3PPDh262Lbzvv0gVe3r9odhE2JUfiMKe1f6jL=3oFrWpeqag@mail.gmail.com>
	<CACJ51z0vnv8Yka5bxARY_dBmFPsSzbg1+vmM0RmsaC8dTN-2Qw@mail.gmail.com>
	<DC0FD764-CDD1-49B5-AF48-2A9F02B8654B@hobu.co>
	<CAP3PPDiGsNPR_Bh5r8FYtyq6V1-qDrtnj8UYzOmFOAtXSeDmXg@mail.gmail.com>
	<A7BB0971-2B27-41FA-8A54-80C0A3621ADC@hobu.co>
	<CAP3PPDhb_o0H7jHC1HrkOTfpEDy5TUWeHPD30K5bs4+vrJsfMA@mail.gmail.com>
Message-ID: <0ACA5711-DD78-45F1-9C96-C69D6EF599C0@hobu.co>


> On Sep 28, 2015, at 9:19 AM, Tom van Tilburg <tom.van.tilburg at gmail.com> wrote:
> 
> 1) I'm not sure what you mean with "seed" file. Do you mean create it in a postgres table? Or more like a config file that is read by pdal pipeline?

I just mean the first file loaded that creates the table and sets the schema for the point cloud entry.


> It would be nice if the pipeline file/lasreader could deal with a directory instead of a file.
> So in de pipeline.xml file it would look like:
> <Reader type="readers.las">
>                     <Option name="directory">/tmp/mylasfiles</Option>
> All files have the same schema, I don't have to worry about that.

We are working to copy GDAL's workflow where the user would create a GDAL-like tile index and then provide that tile index to PDAL pipeline operations. The workflow might be something like:

> $ pdal tindex files/*.las las-files.sqlite
> $ pdal pipeline pipeline.xml --readers.tindex.filename=las-files.sqlite --writers.pgpointcloud.connection="pg-connection-string-details"



> 2) Exactly
> 
> I'm not unhappy with the way I'm doing it now by the way, but people with less skills in batch processing could be saved a lot of worries if it could be all handled from the pdal pipeline command.

Insight into how people actually want to workflow the data will help us. The developer team has a lot of experience with workflowing data with Oracle, but that's not necessarily the way you'd want to do it in pg.

Howard



From howard at hobu.co  Mon Sep 28 07:34:53 2015
From: howard at hobu.co (Howard Butler)
Date: Mon, 28 Sep 2015 09:34:53 -0500
Subject: [pdal] [pgpointcloud] ply and laz
In-Reply-To: <CAJvUf_tBXXV1kZsm1jo0WG9rM+O1Ni5_Q7XXyJ1HiMKuZUmJYA@mail.gmail.com>
References: <21EFB385638F3B4DAAF9C7787B0D8895317D4195@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<C8ACE091-977A-4CCD-AE6F-266BC512A31F@hobu.co>
	<21EFB385638F3B4DAAF9C7787B0D8895317D41BA@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<CAJvUf_tBXXV1kZsm1jo0WG9rM+O1Ni5_Q7XXyJ1HiMKuZUmJYA@mail.gmail.com>
Message-ID: <16F2A3AC-AEBC-4577-A207-C855C62805EE@hobu.co>

The ply write code is using %g (shortest representation) for double output for fprintf for the ASCII output [1]. I wonder if %e would be acceptable, but I don't know much about ply.

[1] https://github.com/PDAL/PDAL/blob/master/vendor/rply-1.1.3/rply.c#L1340

> On Sep 27, 2015, at 3:14 PM, R?mi Cura <remi.cura at gmail.com> wrote:
> 
> Hey,
> I also use RPly,
> the precision is limited in ascii output,
> but nowhere near 3 digits.
> It's an easy tweak to the C code to change output precision
> Cheers,
> R?mi C
> 
> 2015-09-25 21:29 GMT+02:00 <Dean.Hand.ctr at nga.mil>:
> Classification: UNCLASSIFIED
> ======================================================
> 
> We are using PDAL.  There is a writers.ply, but did doesn't say what readers it will support.  We are using something similar to this xml:
> 
> <?xml version="1.0" encoding="utf-8"?>
> <Pipeline version="1.0"><Pipeline version="1.0">
>   <Writer type="writers.ply">
>     <Option name="filename">outputfile.ply</Option>
>     <Option name="storage_mode">little endian</Option>
>     <Reader type="readers.pgpointcloud">
>       <Option name="connection">dbname='lidar' user='user'</Option>
>       <Option name="table">lidar</Option>
>       <Option name="column">pa</Option>
>       <Option name="spatialreference">EPSG:26910</Option>
>       <Option name="where">
>         PC_Intersects(pa, ST_MakeEnvelope(560037.36, 5114846.45, 562667.31, 5118943.24, 26910))
>       </Option>
>     </Reader>
>   </Writer>
> </Pipeline>
> 
> -----Original Message-----
> From: Howard Butler [mailto:howard at hobu.co]
> Sent: Friday, September 25, 2015 2:21 PM
> To: Hand Dean NGA-II USA CTR
> Cc: pgpointcloud at lists.osgeo.org; pdal
> Subject: Re: [pgpointcloud] ply and laz
> 
> 
> > On Sep 25, 2015, at 2:04 PM, Dean.Hand.ctr at nga.mil wrote:
> >
> > Classification: UNCLASSIFIED
> > ======================================================
> >
> > Hi Howard,
> >
> > When trying to pgpointcloud to write as either a ply we're experiencing an issue.  For ply files, the x and y coordinates are only 3 digits in length. I don't see anything in our docs to explain this...
> >
> > Can you please help?
> 
> I don't think pgpointcloud supports writing natively as ply? Are you using PDAL?
> 
> If so:
> 
> * What do you mean by "digits"? Do you mean digits after the decimal point?
> * What was original source data format before it went into pgpointcloud? LAS
> * It is possible that the PDAL ply driver could be modified to support overriding the output precision, but some investigation would need to be done into the rply code that PDAL uses to read/write PLY. Quickly looking at the PDAL source. this feature doesn't appear to exist yet.
> 
> Howard
> 
> 
> ======================================================
> Classification: UNCLASSIFIED
> 
> _______________________________________________
> pgpointcloud mailing list
> pgpointcloud at lists.osgeo.org
> http://lists.osgeo.org/cgi-bin/mailman/listinfo/pgpointcloud
> 


From remi.cura at gmail.com  Mon Sep 28 07:37:05 2015
From: remi.cura at gmail.com (=?UTF-8?Q?R=C3=A9mi_Cura?=)
Date: Mon, 28 Sep 2015 16:37:05 +0200
Subject: [pdal] [pgpointcloud] ply and laz
In-Reply-To: <16F2A3AC-AEBC-4577-A207-C855C62805EE@hobu.co>
References: <21EFB385638F3B4DAAF9C7787B0D8895317D4195@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<C8ACE091-977A-4CCD-AE6F-266BC512A31F@hobu.co>
	<21EFB385638F3B4DAAF9C7787B0D8895317D41BA@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<CAJvUf_tBXXV1kZsm1jo0WG9rM+O1Ni5_Q7XXyJ1HiMKuZUmJYA@mail.gmail.com>
	<16F2A3AC-AEBC-4577-A207-C855C62805EE@hobu.co>
Message-ID: <CAJvUf_v-X=kdpucrEb3oYxqY8M2ruAxYJ30THZpGtQg+u+OD-w@mail.gmail.com>

I changed it to
%.16g
https://github.com/Remi-C/Pointcloud_in_db/blob/master/RPly_Ubuntu/src/rply.c#L1340

Cheers,
R?mi-C

2015-09-28 16:34 GMT+02:00 Howard Butler <howard at hobu.co>:

> The ply write code is using %g (shortest representation) for double output
> for fprintf for the ASCII output [1]. I wonder if %e would be acceptable,
> but I don't know much about ply.
>
> [1]
> https://github.com/PDAL/PDAL/blob/master/vendor/rply-1.1.3/rply.c#L1340
>
> > On Sep 27, 2015, at 3:14 PM, R?mi Cura <remi.cura at gmail.com> wrote:
> >
> > Hey,
> > I also use RPly,
> > the precision is limited in ascii output,
> > but nowhere near 3 digits.
> > It's an easy tweak to the C code to change output precision
> > Cheers,
> > R?mi C
> >
> > 2015-09-25 21:29 GMT+02:00 <Dean.Hand.ctr at nga.mil>:
> > Classification: UNCLASSIFIED
> > ======================================================
> >
> > We are using PDAL.  There is a writers.ply, but did doesn't say what
> readers it will support.  We are using something similar to this xml:
> >
> > <?xml version="1.0" encoding="utf-8"?>
> > <Pipeline version="1.0"><Pipeline version="1.0">
> >   <Writer type="writers.ply">
> >     <Option name="filename">outputfile.ply</Option>
> >     <Option name="storage_mode">little endian</Option>
> >     <Reader type="readers.pgpointcloud">
> >       <Option name="connection">dbname='lidar' user='user'</Option>
> >       <Option name="table">lidar</Option>
> >       <Option name="column">pa</Option>
> >       <Option name="spatialreference">EPSG:26910</Option>
> >       <Option name="where">
> >         PC_Intersects(pa, ST_MakeEnvelope(560037.36, 5114846.45,
> 562667.31, 5118943.24, 26910))
> >       </Option>
> >     </Reader>
> >   </Writer>
> > </Pipeline>
> >
> > -----Original Message-----
> > From: Howard Butler [mailto:howard at hobu.co]
> > Sent: Friday, September 25, 2015 2:21 PM
> > To: Hand Dean NGA-II USA CTR
> > Cc: pgpointcloud at lists.osgeo.org; pdal
> > Subject: Re: [pgpointcloud] ply and laz
> >
> >
> > > On Sep 25, 2015, at 2:04 PM, Dean.Hand.ctr at nga.mil wrote:
> > >
> > > Classification: UNCLASSIFIED
> > > ======================================================
> > >
> > > Hi Howard,
> > >
> > > When trying to pgpointcloud to write as either a ply we're
> experiencing an issue.  For ply files, the x and y coordinates are only 3
> digits in length. I don't see anything in our docs to explain this...
> > >
> > > Can you please help?
> >
> > I don't think pgpointcloud supports writing natively as ply? Are you
> using PDAL?
> >
> > If so:
> >
> > * What do you mean by "digits"? Do you mean digits after the decimal
> point?
> > * What was original source data format before it went into pgpointcloud?
> LAS
> > * It is possible that the PDAL ply driver could be modified to support
> overriding the output precision, but some investigation would need to be
> done into the rply code that PDAL uses to read/write PLY. Quickly looking
> at the PDAL source. this feature doesn't appear to exist yet.
> >
> > Howard
> >
> >
> > ======================================================
> > Classification: UNCLASSIFIED
> >
> > _______________________________________________
> > pgpointcloud mailing list
> > pgpointcloud at lists.osgeo.org
> > http://lists.osgeo.org/cgi-bin/mailman/listinfo/pgpointcloud
> >
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150928/85a96f92/attachment-0001.html>

From howard at hobu.co  Mon Sep 28 07:39:03 2015
From: howard at hobu.co (Howard Butler)
Date: Mon, 28 Sep 2015 09:39:03 -0500
Subject: [pdal] [pgpointcloud] ply and laz
In-Reply-To: <CAJvUf_v-X=kdpucrEb3oYxqY8M2ruAxYJ30THZpGtQg+u+OD-w@mail.gmail.com>
References: <21EFB385638F3B4DAAF9C7787B0D8895317D4195@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<C8ACE091-977A-4CCD-AE6F-266BC512A31F@hobu.co>
	<21EFB385638F3B4DAAF9C7787B0D8895317D41BA@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<CAJvUf_tBXXV1kZsm1jo0WG9rM+O1Ni5_Q7XXyJ1HiMKuZUmJYA@mail.gmail.com>
	<16F2A3AC-AEBC-4577-A207-C855C62805EE@hobu.co>
	<CAJvUf_v-X=kdpucrEb3oYxqY8M2ruAxYJ30THZpGtQg+u+OD-w@mail.gmail.com>
Message-ID: <6008420F-9B8C-41E5-B846-C78CCCB2ADDC@hobu.co>

Was there any consequence for other PLY readers? We could happily merge that if it isn't externally disruptive.

Howard

> On Sep 28, 2015, at 9:37 AM, R?mi Cura <remi.cura at gmail.com> wrote:
> 
> I changed it to
> %.16g
> https://github.com/Remi-C/Pointcloud_in_db/blob/master/RPly_Ubuntu/src/rply.c#L1340


From remi.cura at gmail.com  Mon Sep 28 08:07:07 2015
From: remi.cura at gmail.com (=?UTF-8?Q?R=C3=A9mi_Cura?=)
Date: Mon, 28 Sep 2015 17:07:07 +0200
Subject: [pdal] [pgpointcloud] ply and laz
In-Reply-To: <6008420F-9B8C-41E5-B846-C78CCCB2ADDC@hobu.co>
References: <21EFB385638F3B4DAAF9C7787B0D8895317D4195@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<C8ACE091-977A-4CCD-AE6F-266BC512A31F@hobu.co>
	<21EFB385638F3B4DAAF9C7787B0D8895317D41BA@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<CAJvUf_tBXXV1kZsm1jo0WG9rM+O1Ni5_Q7XXyJ1HiMKuZUmJYA@mail.gmail.com>
	<16F2A3AC-AEBC-4577-A207-C855C62805EE@hobu.co>
	<CAJvUf_v-X=kdpucrEb3oYxqY8M2ruAxYJ30THZpGtQg+u+OD-w@mail.gmail.com>
	<6008420F-9B8C-41E5-B846-C78CCCB2ADDC@hobu.co>
Message-ID: <CAJvUf_uLO1KnK6SOQn7Lp45mYh7E2q5JY_RuY3Jk0_JKAJ4HBA@mail.gmail.com>

I don't know,
I use the ascii output to stream into the postgres server,
and the reduced precision was making me loose a digit in precision.

That was before pdal could read/write ply =)

All in all, ascii ply format is awfully under-constrained...

Cheers,
R?mi-C

2015-09-28 16:39 GMT+02:00 Howard Butler <howard at hobu.co>:

> Was there any consequence for other PLY readers? We could happily merge
> that if it isn't externally disruptive.
>
> Howard
>
> > On Sep 28, 2015, at 9:37 AM, R?mi Cura <remi.cura at gmail.com> wrote:
> >
> > I changed it to
> > %.16g
> >
> https://github.com/Remi-C/Pointcloud_in_db/blob/master/RPly_Ubuntu/src/rply.c#L1340
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150928/916fbadd/attachment.html>

From andrew.bell.ia at gmail.com  Mon Sep 28 08:22:30 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 28 Sep 2015 11:22:30 -0400
Subject: [pdal] [pgpointcloud] ply and laz
In-Reply-To: <CAJvUf_uLO1KnK6SOQn7Lp45mYh7E2q5JY_RuY3Jk0_JKAJ4HBA@mail.gmail.com>
References: <21EFB385638F3B4DAAF9C7787B0D8895317D4195@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<C8ACE091-977A-4CCD-AE6F-266BC512A31F@hobu.co>
	<21EFB385638F3B4DAAF9C7787B0D8895317D41BA@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<CAJvUf_tBXXV1kZsm1jo0WG9rM+O1Ni5_Q7XXyJ1HiMKuZUmJYA@mail.gmail.com>
	<16F2A3AC-AEBC-4577-A207-C855C62805EE@hobu.co>
	<CAJvUf_v-X=kdpucrEb3oYxqY8M2ruAxYJ30THZpGtQg+u+OD-w@mail.gmail.com>
	<6008420F-9B8C-41E5-B846-C78CCCB2ADDC@hobu.co>
	<CAJvUf_uLO1KnK6SOQn7Lp45mYh7E2q5JY_RuY3Jk0_JKAJ4HBA@mail.gmail.com>
Message-ID: <CACJ51z1YtVRZkCVVNr_1yW22WbRxNm3D2dwFWsfsMzaX--hG+Q@mail.gmail.com>

I don't see how any of this pertains to the original issue.  The pipeline
was using binary, not text output.  I'm writing some tests for the data
that were missing in the original implementation.

On Mon, Sep 28, 2015 at 11:07 AM, R?mi Cura <remi.cura at gmail.com> wrote:

> I don't know,
> I use the ascii output to stream into the postgres server,
> and the reduced precision was making me loose a digit in precision.
>
> That was before pdal could read/write ply =)
>
> All in all, ascii ply format is awfully under-constrained...
>
> Cheers,
> R?mi-C
>
> 2015-09-28 16:39 GMT+02:00 Howard Butler <howard at hobu.co>:
>
>> Was there any consequence for other PLY readers? We could happily merge
>> that if it isn't externally disruptive.
>>
>> Howard
>>
>> > On Sep 28, 2015, at 9:37 AM, R?mi Cura <remi.cura at gmail.com> wrote:
>> >
>> > I changed it to
>> > %.16g
>> >
>> https://github.com/Remi-C/Pointcloud_in_db/blob/master/RPly_Ubuntu/src/rply.c#L1340
>>
>>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150928/58d6c8ea/attachment.html>

From tom.van.tilburg at gmail.com  Mon Sep 28 08:29:33 2015
From: tom.van.tilburg at gmail.com (Tom van Tilburg)
Date: Mon, 28 Sep 2015 15:29:33 +0000
Subject: [pdal] pdal pipeline giving garbage in postgres
In-Reply-To: <0ACA5711-DD78-45F1-9C96-C69D6EF599C0@hobu.co>
References: <CAP3PPDh262Lbzvv0gVe3r9odhE2JUfiMKe1f6jL=3oFrWpeqag@mail.gmail.com>
	<CACJ51z0vnv8Yka5bxARY_dBmFPsSzbg1+vmM0RmsaC8dTN-2Qw@mail.gmail.com>
	<DC0FD764-CDD1-49B5-AF48-2A9F02B8654B@hobu.co>
	<CAP3PPDiGsNPR_Bh5r8FYtyq6V1-qDrtnj8UYzOmFOAtXSeDmXg@mail.gmail.com>
	<A7BB0971-2B27-41FA-8A54-80C0A3621ADC@hobu.co>
	<CAP3PPDhb_o0H7jHC1HrkOTfpEDy5TUWeHPD30K5bs4+vrJsfMA@mail.gmail.com>
	<0ACA5711-DD78-45F1-9C96-C69D6EF599C0@hobu.co>
Message-ID: <CAP3PPDiq+brTa1tNSmRqCqfbuyFrgm4osMJuQAwxwZt5VKnvVQ@mail.gmail.com>

It only now occurs to me that you can give command line params to the
pipeline as well....
That makes the batching a lot easier, I couldn't ask for more :)

What would be the benefit of creating a tindex first for the pointclouds?
It seems that it would take a considerable amount of extra time to go
through the tiling process. For rasters I can see the use but I thought the
chipper already deals with a kind of irregular tiling which can be used by
a spatial index of postgis.
Or is the tileindex just a list of las-files in an sqlite dbase? Personally
I would stick to batching in that case, it gives me more control on the
process.

Best,
 Tom

On Mon, 28 Sep 2015 at 16:27 Howard Butler <howard at hobu.co> wrote:

>
> > On Sep 28, 2015, at 9:19 AM, Tom van Tilburg <tom.van.tilburg at gmail.com>
> wrote:
> >
> > 1) I'm not sure what you mean with "seed" file. Do you mean create it in
> a postgres table? Or more like a config file that is read by pdal pipeline?
>
> I just mean the first file loaded that creates the table and sets the
> schema for the point cloud entry.
>
>
> > It would be nice if the pipeline file/lasreader could deal with a
> directory instead of a file.
> > So in de pipeline.xml file it would look like:
> > <Reader type="readers.las">
> >                     <Option name="directory">/tmp/mylasfiles</Option>
> > All files have the same schema, I don't have to worry about that.
>
> We are working to copy GDAL's workflow where the user would create a
> GDAL-like tile index and then provide that tile index to PDAL pipeline
> operations. The workflow might be something like:
>
> > $ pdal tindex files/*.las las-files.sqlite
> > $ pdal pipeline pipeline.xml --readers.tindex.filename=las-files.sqlite
> --writers.pgpointcloud.connection="pg-connection-string-details"
>
>
>
> > 2) Exactly
> >
> > I'm not unhappy with the way I'm doing it now by the way, but people
> with less skills in batch processing could be saved a lot of worries if it
> could be all handled from the pdal pipeline command.
>
> Insight into how people actually want to workflow the data will help us.
> The developer team has a lot of experience with workflowing data with
> Oracle, but that's not necessarily the way you'd want to do it in pg.
>
> Howard
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150928/8b0fc538/attachment.html>

From James.V.Greenlee.ctr at nga.mil  Fri Sep 25 15:30:25 2015
From: James.V.Greenlee.ctr at nga.mil (James.V.Greenlee.ctr at nga.mil)
Date: Fri, 25 Sep 2015 22:30:25 +0000
Subject: [pdal] [pgpointcloud] ply and laz
In-Reply-To: <21EFB385638F3B4DAAF9C7787B0D8895317D41DF@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
References: <21EFB385638F3B4DAAF9C7787B0D8895317D4195@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<C8ACE091-977A-4CCD-AE6F-266BC512A31F@hobu.co>
	<21EFB385638F3B4DAAF9C7787B0D8895317D41BA@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<21EFB385638F3B4DAAF9C7787B0D8895317D41DF@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
Message-ID: <C25BFCD4C21D834F83AA2706F578CAE96C7BDC19@NDWUSAHSWVXCG03.gold.rtgold.nima.mil>

Classification: UNCLASSIFIED
======================================================

Hi Howard,

I work with Dean.

Actually, we're getting errors when reading the pdal produced ply files into Meshlab.  This may not be a pdal problem, though, so I'm not going to detail that error.  However, in trying to diagnose, we implimented the "ascii" instead of "little endian" storage mode (i.e., <Option name="storage_mode">ascii</Option>), so our pipeline is more like this:

<?xml version="1.0" encoding="utf-8"?>
<Pipeline version="1.0">
    <Writer type="writers.ply">
        <Option name="filename">/mydir/outputfile.ply</Option>
        <Option name="storage_mode">ascii</Option>
        <Option name="spatialreference">EPSG:4326</Option>
        <Reader type="readers.pgpointcloud">
            <Option name="connection">host='localhost' dbname='lidar' user='pramsey'</Option>
            <Option name="table">pcgen</Option>
            <Option name="column">pa</Option>
            <Option name="where">PC_Intersects(pa, ST_MakeEnvelope(56.003736, 51.1484645, 56.266731, 51.1894324, 4326))</Option>
        </Reader>
    </Writer>
</Pipeline>

When we import an LAS file into QT Modeler that was created by using writers.las instead of writers.ply in the above pipeline (with some scaling options), the point cloud data looks fine, so we know that the point cloud database has the necessary level of precision.  But, when we use the writers.ply (with ascii storage_mode), the output ply file has only 4 digits of precision following the decimal point as follows:

ply
format ascii 1.0
element vertex 12345
property float64 X
property float64 Y
property float64 Z
property uint16 Intensity
...
end_header
56.0037 51.1484 12.123 25 ...
56.0037 51.1484 13.423 28 ...
56.0037 51.1485 15.153 40 ...
56.0038 51.1485 33.126 37 ...
56.0038 51.1485 12.723 125 ...
56.0038 51.1486 12.183 115 ...

By the way, we also have a simialr problem when trying to output a CSV file using writers.text except in that case there are only 3 digits of precision following the decimal, so output is like:

"X","Y","Z","Intensity",...
56.004,51.148,12.123,25.000,...
56.004,51.148,13.423,28.000,...
56.004,51.149,15.153,40.000,...
56.004,51.149,33.126,37.000,...
56.004,51.149,12.723,125.00,...
56.004,51.149,12.183,115.00,...

We need at least 6 digits of precision for the X and Y values in both of these scenarios (yielding 0.1 meter resolution for EPSG 4326 values), but having an option to define the precision for the various columns would be optimal.

-Jim

-----Original Message-----
From: Hand Dean NGA-II USA CTR
Sent: Friday, September 25, 2015 3:02 PM
To: Greenlee James -Jim- V NGA-IIG USA CTR
Subject: FW: [pgpointcloud] ply and laz

Classification: UNCLASSIFIED
======================================================



-----Original Message-----
From: Hand Dean NGA-II USA CTR
Sent: Friday, September 25, 2015 2:29 PM
To: 'Howard Butler'
Cc: pgpointcloud at lists.osgeo.org<mailto:pgpointcloud at lists.osgeo.org>; pdal
Subject: RE: [pgpointcloud] ply and laz

Classification: UNCLASSIFIED
======================================================

We are using PDAL.  There is a writers.ply, but did doesn't say what readers it will support.  We are using something similar to this xml:

<?xml version="1.0" encoding="utf-8"?>
<Pipeline version="1.0"><Pipeline version="1.0">
  <Writer type="writers.ply">
    <Option name="filename">outputfile.ply</Option>
    <Option name="storage_mode">little endian</Option>
    <Reader type="readers.pgpointcloud">
      <Option name="connection">dbname='lidar' user='user'</Option>
      <Option name="table">lidar</Option>
      <Option name="column">pa</Option>
      <Option name="spatialreference">EPSG:26910</Option>
      <Option name="where">
        PC_Intersects(pa, ST_MakeEnvelope(560037.36, 5114846.45, 562667.31, 5118943.24, 26910))
      </Option>
    </Reader>
  </Writer>
</Pipeline>

-----Original Message-----
From: Howard Butler [mailto:howard at hobu.co]
Sent: Friday, September 25, 2015 2:21 PM
To: Hand Dean NGA-II USA CTR
Cc: pgpointcloud at lists.osgeo.org<mailto:pgpointcloud at lists.osgeo.org>; pdal
Subject: Re: [pgpointcloud] ply and laz


> On Sep 25, 2015, at 2:04 PM, Dean.Hand.ctr at nga.mil<mailto:Dean.Hand.ctr at nga.mil> wrote:
>
> Classification: UNCLASSIFIED
> ======================================================
>
> Hi Howard,
>
> When trying to pgpointcloud to write as either a ply we're experiencing an issue.  For ply files, the x and y coordinates are only 3 digits in length. I don't see anything in our docs to explain this...
>
> Can you please help?

I don't think pgpointcloud supports writing natively as ply? Are you using PDAL?

If so:

* What do you mean by "digits"? Do you mean digits after the decimal point?
* What was original source data format before it went into pgpointcloud? LAS
* It is possible that the PDAL ply driver could be modified to support overriding the output precision, but some investigation would need to be done into the rply code that PDAL uses to read/write PLY. Quickly looking at the PDAL source. this feature doesn't appear to exist yet.

Howard


======================================================
Classification: UNCLASSIFIED

======================================================
Classification: UNCLASSIFIED

======================================================
Classification: UNCLASSIFIED



From pete.gadomski at gmail.com  Mon Sep 28 10:20:15 2015
From: pete.gadomski at gmail.com (Pete Gadomski)
Date: Mon, 28 Sep 2015 17:20:15 +0000
Subject: [pdal] [pgpointcloud] ply and laz
In-Reply-To: <C25BFCD4C21D834F83AA2706F578CAE96C7BDC19@NDWUSAHSWVXCG03.gold.rtgold.nima.mil>
References: <21EFB385638F3B4DAAF9C7787B0D8895317D4195@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<C8ACE091-977A-4CCD-AE6F-266BC512A31F@hobu.co>
	<21EFB385638F3B4DAAF9C7787B0D8895317D41BA@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<21EFB385638F3B4DAAF9C7787B0D8895317D41DF@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<C25BFCD4C21D834F83AA2706F578CAE96C7BDC19@NDWUSAHSWVXCG03.gold.rtgold.nima.mil>
Message-ID: <CAOY6Aa3A2TpDsrXfJTdZxZqXDa5EtE4oXEgUSG8ica2+wYz5WA@mail.gmail.com>

All,

It looks like rply just uses fprintf with %g (
https://github.com/PDAL/PDAL/blob/master/vendor/rply-1.1.3/rply.c#L1303)
when doing ascii output. Looks like we'd have to patch the vendored rply
code to change that.

IMO ply's ascii output isn't very useful, as it's very space-inefficient.
If folks need to print out point values as text they should probably use
the text writer (which does provide a mechanism for specifying decimal
precision,
https://github.com/PDAL/PDAL/blob/master/io/text/TextWriter.cpp#L114). Maybe
we should remove the ascii option for the ply writer to avoid this problem
in the future? Thoughts?

-Pete

On Mon, Sep 28, 2015 at 10:38 AM <James.V.Greenlee.ctr at nga.mil> wrote:

> Classification: UNCLASSIFIED
> ======================================================
>
> Hi Howard,
>
> I work with Dean.
>
> Actually, we're getting errors when reading the pdal produced ply files
> into Meshlab.  This may not be a pdal problem, though, so I'm not going to
> detail that error.  However, in trying to diagnose, we implimented the
> "ascii" instead of "little endian" storage mode (i.e., <Option
> name="storage_mode">ascii</Option>), so our pipeline is more like this:
>
> <?xml version="1.0" encoding="utf-8"?>
> <Pipeline version="1.0">
>     <Writer type="writers.ply">
>         <Option name="filename">/mydir/outputfile.ply</Option>
>         <Option name="storage_mode">ascii</Option>
>         <Option name="spatialreference">EPSG:4326</Option>
>         <Reader type="readers.pgpointcloud">
>             <Option name="connection">host='localhost' dbname='lidar'
> user='pramsey'</Option>
>             <Option name="table">pcgen</Option>
>             <Option name="column">pa</Option>
>             <Option name="where">PC_Intersects(pa,
> ST_MakeEnvelope(56.003736, 51.1484645, 56.266731, 51.1894324,
> 4326))</Option>
>         </Reader>
>     </Writer>
> </Pipeline>
>
> When we import an LAS file into QT Modeler that was created by using
> writers.las instead of writers.ply in the above pipeline (with some scaling
> options), the point cloud data looks fine, so we know that the point cloud
> database has the necessary level of precision.  But, when we use the
> writers.ply (with ascii storage_mode), the output ply file has only 4
> digits of precision following the decimal point as follows:
>
> ply
> format ascii 1.0
> element vertex 12345
> property float64 X
> property float64 Y
> property float64 Z
> property uint16 Intensity
> ...
> end_header
> 56.0037 51.1484 12.123 25 ...
> 56.0037 51.1484 13.423 28 ...
> 56.0037 51.1485 15.153 40 ...
> 56.0038 51.1485 33.126 37 ...
> 56.0038 51.1485 12.723 125 ...
> 56.0038 51.1486 12.183 115 ...
>
> By the way, we also have a simialr problem when trying to output a CSV
> file using writers.text except in that case there are only 3 digits of
> precision following the decimal, so output is like:
>
> "X","Y","Z","Intensity",...
> 56.004,51.148,12.123,25.000,...
> 56.004,51.148,13.423,28.000,...
> 56.004,51.149,15.153,40.000,...
> 56.004,51.149,33.126,37.000,...
> 56.004,51.149,12.723,125.00,...
> 56.004,51.149,12.183,115.00,...
>
> We need at least 6 digits of precision for the X and Y values in both of
> these scenarios (yielding 0.1 meter resolution for EPSG 4326 values), but
> having an option to define the precision for the various columns would be
> optimal.
>
> -Jim
>
> -----Original Message-----
> From: Hand Dean NGA-II USA CTR
> Sent: Friday, September 25, 2015 3:02 PM
> To: Greenlee James -Jim- V NGA-IIG USA CTR
> Subject: FW: [pgpointcloud] ply and laz
>
> Classification: UNCLASSIFIED
> ======================================================
>
>
>
> -----Original Message-----
> From: Hand Dean NGA-II USA CTR
> Sent: Friday, September 25, 2015 2:29 PM
> To: 'Howard Butler'
> Cc: pgpointcloud at lists.osgeo.org<mailto:pgpointcloud at lists.osgeo.org>;
> pdal
> Subject: RE: [pgpointcloud] ply and laz
>
> Classification: UNCLASSIFIED
> ======================================================
>
> We are using PDAL.  There is a writers.ply, but did doesn't say what
> readers it will support.  We are using something similar to this xml:
>
> <?xml version="1.0" encoding="utf-8"?>
> <Pipeline version="1.0"><Pipeline version="1.0">
>   <Writer type="writers.ply">
>     <Option name="filename">outputfile.ply</Option>
>     <Option name="storage_mode">little endian</Option>
>     <Reader type="readers.pgpointcloud">
>       <Option name="connection">dbname='lidar' user='user'</Option>
>       <Option name="table">lidar</Option>
>       <Option name="column">pa</Option>
>       <Option name="spatialreference">EPSG:26910</Option>
>       <Option name="where">
>         PC_Intersects(pa, ST_MakeEnvelope(560037.36, 5114846.45,
> 562667.31, 5118943.24, 26910))
>       </Option>
>     </Reader>
>   </Writer>
> </Pipeline>
>
> -----Original Message-----
> From: Howard Butler [mailto:howard at hobu.co]
> Sent: Friday, September 25, 2015 2:21 PM
> To: Hand Dean NGA-II USA CTR
> Cc: pgpointcloud at lists.osgeo.org<mailto:pgpointcloud at lists.osgeo.org>;
> pdal
> Subject: Re: [pgpointcloud] ply and laz
>
>
> > On Sep 25, 2015, at 2:04 PM, Dean.Hand.ctr at nga.mil<mailto:
> Dean.Hand.ctr at nga.mil> wrote:
> >
> > Classification: UNCLASSIFIED
> > ======================================================
> >
> > Hi Howard,
> >
> > When trying to pgpointcloud to write as either a ply we're experiencing
> an issue.  For ply files, the x and y coordinates are only 3 digits in
> length. I don't see anything in our docs to explain this...
> >
> > Can you please help?
>
> I don't think pgpointcloud supports writing natively as ply? Are you using
> PDAL?
>
> If so:
>
> * What do you mean by "digits"? Do you mean digits after the decimal point?
> * What was original source data format before it went into pgpointcloud?
> LAS
> * It is possible that the PDAL ply driver could be modified to support
> overriding the output precision, but some investigation would need to be
> done into the rply code that PDAL uses to read/write PLY. Quickly looking
> at the PDAL source. this feature doesn't appear to exist yet.
>
> Howard
>
>
> ======================================================
> Classification: UNCLASSIFIED
>
> ======================================================
> Classification: UNCLASSIFIED
>
> ======================================================
> Classification: UNCLASSIFIED
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>
-- 
Pete Gadomski
Physical Scientist
Cold Regions Research and Engineering Laboratory
530.440.4630
pete.gadomski at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150928/432abc8d/attachment.html>

From andrew.bell.ia at gmail.com  Mon Sep 28 10:31:52 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 28 Sep 2015 13:31:52 -0400
Subject: [pdal] [pgpointcloud]  ply and laz
In-Reply-To: <CAOY6Aa3A2TpDsrXfJTdZxZqXDa5EtE4oXEgUSG8ica2+wYz5WA@mail.gmail.com>
References: <21EFB385638F3B4DAAF9C7787B0D8895317D4195@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<C8ACE091-977A-4CCD-AE6F-266BC512A31F@hobu.co>
	<21EFB385638F3B4DAAF9C7787B0D8895317D41BA@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<21EFB385638F3B4DAAF9C7787B0D8895317D41DF@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<C25BFCD4C21D834F83AA2706F578CAE96C7BDC19@NDWUSAHSWVXCG03.gold.rtgold.nima.mil>
	<CAOY6Aa3A2TpDsrXfJTdZxZqXDa5EtE4oXEgUSG8ica2+wYz5WA@mail.gmail.com>
Message-ID: <CACJ51z0n6+9HFJ43QKbGe5sT+_yNHi+_L+dJW+KnVxG1UDR2cw@mail.gmail.com>

On Mon, Sep 28, 2015 at 1:20 PM, Pete Gadomski <pete.gadomski at gmail.com>
wrote:

> All,
>
> It looks like rply just uses fprintf with %g (
> https://github.com/PDAL/PDAL/blob/master/vendor/rply-1.1.3/rply.c#L1303)
> when doing ascii output. Looks like we'd have to patch the vendored rply
> code to change that.
>

Yes, or we could submit some patch to make it more flexible.

IMO ply's ascii output isn't very useful, as it's very space-inefficient.
> If folks need to print out point values as text they should probably use
> the text writer (which does provide a mechanism for specifying decimal
> precision,
> https://github.com/PDAL/PDAL/blob/master/io/text/TextWriter.cpp#L114). Maybe
> we should remove the ascii option for the ply writer to avoid this problem
> in the future? Thoughts?
>

I don't know why we'd remove it if we could modify things so that you can
specify reasonable precision.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150928/ecae4a7d/attachment.html>

From andrew.bell.ia at gmail.com  Tue Sep 29 07:24:52 2015
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 29 Sep 2015 10:24:52 -0400
Subject: [pdal] [pgpointcloud]  ply and laz
In-Reply-To: <C25BFCD4C21D834F83AA2706F578CAE96C7BFCF8@NDWUSAHSWVXCG03.gold.rtgold.nima.mil>
References: <21EFB385638F3B4DAAF9C7787B0D8895317D4195@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<C8ACE091-977A-4CCD-AE6F-266BC512A31F@hobu.co>
	<21EFB385638F3B4DAAF9C7787B0D8895317D41BA@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<21EFB385638F3B4DAAF9C7787B0D8895317D41DF@NDWUSAHSWVXCG02.gold.rtgold.nima.mil>
	<C25BFCD4C21D834F83AA2706F578CAE96C7BDC19@NDWUSAHSWVXCG03.gold.rtgold.nima.mil>
	<CAOY6Aa3A2TpDsrXfJTdZxZqXDa5EtE4oXEgUSG8ica2+wYz5WA@mail.gmail.com>
	<CACJ51z0n6+9HFJ43QKbGe5sT+_yNHi+_L+dJW+KnVxG1UDR2cw@mail.gmail.com>
	<C25BFCD4C21D834F83AA2706F578CAE96C7BFCF8@NDWUSAHSWVXCG03.gold.rtgold.nima.mil>
Message-ID: <CACJ51z24xGQM=XJkG48+HSPFMViPXjPCUPOZbu6VQqKkMCU+Gg@mail.gmail.com>

On Tue, Sep 29, 2015 at 10:16 AM, <James.V.Greenlee.ctr at nga.mil> wrote:

> Classification: UNCLASSIFIED
> ======================================================
>
> Thanks for highlighting the "precision" option in  the source!  It's not
> in the online documentation (http://www.pdal.io/stages/writers.text.html).
>
> Since my interest in the ascii version of PLY was for troubleshooting
> ingest into MeshLab, I can easily construct the PLY ascii using the headers
> from PLY binary and the CSV output from writers.text.  I agree with Pete
> that PLY ascii isn't very efficient and in most cases shouldn't be used,
> but it's very useful for troubleshooting.  Also, the PDAL implementation of
> PLY ascii is actually more efficient than the other text outputs because it
> alters the precision depending on if the value is an integer (no decimal
> places if it's an integer).
>

I'm almost finished with the precision option for ply output.


> Ideally, there would be a uniform "precision" option across all the
> textual outputs that allows for either a per field precision that matches
> the field order such as:
>
> '<Option name="order">X,Y,Z,Intensity,Red,Green,Blue</Option>'
> '<Option name="precision">7,7,3,0,0,0,0</Option>'
>
> Or a simpler single definition of precision for all fields (as currently
> implemented in writers.text) such as:
>
> '<Option name="precision">6</Option>'
>

I did this simple thing.  It just applies to X, Y and Z right now.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20150929/39c31be1/attachment.html>

