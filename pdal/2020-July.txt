From adam.d.steer at gmail.com  Wed Jul  1 19:25:41 2020
From: adam.d.steer at gmail.com (adam steer)
Date: Thu, 2 Jul 2020 12:25:41 +1000
Subject: [pdal] Digitized building footprints
In-Reply-To: <BN6PR20MB12336362611B5C9246FFFCD4B96E0@BN6PR20MB1233.namprd20.prod.outlook.com>
References: <BN6PR20MB1233DE396095AB770A1084DDB96E0@BN6PR20MB1233.namprd20.prod.outlook.com>
 <CACJ51z3Zt5j__zJQir6-ORipNi_E53qLfzarAi8snu_iVmshWQ@mail.gmail.com>
 <BN6PR20MB12336362611B5C9246FFFCD4B96E0@BN6PR20MB1233.namprd20.prod.outlook.com>
Message-ID: <CAFORoyhiSKnNnLfiBUWuaH_OjN9dUoanfWpQWHQbw_s=JSXZ-A@mail.gmail.com>

Hey Stephen

Also - do some testing with the CSF filter. I've found it to be the best
method (so far) of getting ground from SfM datasets.

Cheers

Adam


On Tue, 30 Jun 2020 at 03:16, Stephen V. Mather <svm at clevelandmetroparks.com>
wrote:

> Hi Andrew,
>
> The goal is to use the digitized footprints to filter the point cloud of
> the known buildings. With the buildings removed, I plan to then feed this
> in to SMRF to remove the vegetation points as best as possible. Something
> similar to this:
>
> https://smathermather.com/2016/10/15/finding-peace-finding-the-grounddrone-flights-for-hydrologic-modeling/
>
> Thanks,
> Best,
> Steve
>
>
> [image: http://sig.cmparks.net/cmp-ms-90x122.png] *Stephen V. Mather*
> GIS Manager
> (216) 635-3243 (Work)
> clevelandmetroparks.com
>
>
>
>
> ------------------------------
> *From:* Andrew Bell <andrew.bell.ia at gmail.com>
> *Sent:* Monday, June 29, 2020 12:43 PM
> *To:* Stephen V. Mather <svm at clevelandmetroparks.com>
> *Cc:* pdal <pdal at lists.osgeo.org>
> *Subject:* Re: [pdal] Digitized building footprints
>
>
> *WARNING: This email originated outside of Cleveland Metroparks. DO NOT
> CLICK links or attachments unless you recognize the sender and know the
> content is safe.*
>
>
> On Mon, Jun 29, 2020 at 11:25 AM Stephen V. Mather <
> svm at clevelandmetroparks.com> wrote:
>
> Hi All,
>
> I am processing a dataset for which I have a digitized building
> footprints. It'd be even cooler if I had vegetation, but beggers !=
> choosers.
>
> In principle, I could use filters.overlay, but this is a massive dataset,
> so I am curious if it makes more sense to rasterize, tile things up, and
> use filters.colorization.
>
> Happy to test and report back on what is fastest, but in case someone has
> a hunch, or an alternative recommended approach, I thought I would ask.
>
>
> It's not clear to me what you're trying to do. Maybe you could state your
> goal?
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
Dr. Adam Steer
http://spatialised.net
https://www.researchgate.net/profile/Adam_Steer
http://au.linkedin.com/in/adamsteer
http://orcid.org/0000-0003-0046-7236
+61 427 091 712 ::  @adamdsteer

Suits are bad for business: http://www.spatialised.net/business-penguins/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200702/293611d3/attachment.html>

From luipir at gmail.com  Wed Jul  1 23:33:33 2020
From: luipir at gmail.com (Luigi Pirelli)
Date: Thu, 2 Jul 2020 08:33:33 +0200
Subject: [pdal] Digitized building footprints
In-Reply-To: <BN6PR20MB12336362611B5C9246FFFCD4B96E0@BN6PR20MB1233.namprd20.prod.outlook.com>
References: <BN6PR20MB1233DE396095AB770A1084DDB96E0@BN6PR20MB1233.namprd20.prod.outlook.com>
 <CACJ51z3Zt5j__zJQir6-ORipNi_E53qLfzarAi8snu_iVmshWQ@mail.gmail.com>
 <BN6PR20MB12336362611B5C9246FFFCD4B96E0@BN6PR20MB1233.namprd20.prod.outlook.com>
Message-ID: <CAFO80_qmzFUK5WzZiHxrkMM6KCaPS1mywjMDvHBwATfw6Gxnvw@mail.gmail.com>

hmmmm... did you check difference running MF with or without buildings? due
to closing/opening process of the algorithm, the nearest points to building
can be affected. In case of building, these points can be vegetations,
especially in dry area with high thermal mass buildings (soil, mud, rock);
vegetation grow better near this places where the water stress is reduced
[1]

Luigi Pirelli

[1]
https://www.amazon.com/dp/B07SXR66YG/ref=dp-kindle-redirect?_encoding=UTF8&btkr=1

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Mon, 29 Jun 2020 at 19:16, Stephen V. Mather <svm at clevelandmetroparks.com>
wrote:

> Hi Andrew,
>
> The goal is to use the digitized footprints to filter the point cloud of
> the known buildings. With the buildings removed, I plan to then feed this
> in to SMRF to remove the vegetation points as best as possible. Something
> similar to this:
>
> https://smathermather.com/2016/10/15/finding-peace-finding-the-grounddrone-flights-for-hydrologic-modeling/
>
> Thanks,
> Best,
> Steve
>
>
> [image: http://sig.cmparks.net/cmp-ms-90x122.png] *Stephen V. Mather*
> GIS Manager
> (216) 635-3243 (Work)
> clevelandmetroparks.com <http://www.clemetparks.com>
>
>
>
>
> ------------------------------
> *From:* Andrew Bell <andrew.bell.ia at gmail.com>
> *Sent:* Monday, June 29, 2020 12:43 PM
> *To:* Stephen V. Mather <svm at clevelandmetroparks.com>
> *Cc:* pdal <pdal at lists.osgeo.org>
> *Subject:* Re: [pdal] Digitized building footprints
>
>
> *WARNING: This email originated outside of Cleveland Metroparks. DO NOT
> CLICK links or attachments unless you recognize the sender and know the
> content is safe.*
>
>
> On Mon, Jun 29, 2020 at 11:25 AM Stephen V. Mather <
> svm at clevelandmetroparks.com> wrote:
>
> Hi All,
>
> I am processing a dataset for which I have a digitized building
> footprints. It'd be even cooler if I had vegetation, but beggers !=
> choosers.
>
> In principle, I could use filters.overlay, but this is a massive dataset,
> so I am curious if it makes more sense to rasterize, tile things up, and
> use filters.colorization.
>
> Happy to test and report back on what is fastest, but in case someone has
> a hunch, or an alternative recommended approach, I thought I would ask.
>
>
> It's not clear to me what you're trying to do. Maybe you could state your
> goal?
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200702/636bee37/attachment.html>

From svm at clevelandmetroparks.com  Thu Jul  2 03:09:47 2020
From: svm at clevelandmetroparks.com (Stephen V. Mather)
Date: Thu, 2 Jul 2020 10:09:47 +0000
Subject: [pdal] Digitized building footprints
In-Reply-To: <CAFO80_qmzFUK5WzZiHxrkMM6KCaPS1mywjMDvHBwATfw6Gxnvw@mail.gmail.com>
References: <BN6PR20MB1233DE396095AB770A1084DDB96E0@BN6PR20MB1233.namprd20.prod.outlook.com>
 <CACJ51z3Zt5j__zJQir6-ORipNi_E53qLfzarAi8snu_iVmshWQ@mail.gmail.com>
 <BN6PR20MB12336362611B5C9246FFFCD4B96E0@BN6PR20MB1233.namprd20.prod.outlook.com>,
 <CAFO80_qmzFUK5WzZiHxrkMM6KCaPS1mywjMDvHBwATfw6Gxnvw@mail.gmail.com>
Message-ID: <MWHPR20MB1248127183DCDA296FBFEDA4B96D0@MWHPR20MB1248.namprd20.prod.outlook.com>

Vegetation definitely shows up as a little spiked ring around the edges of where the buildings sit. I tend to buffer the buildings marginally anyway, and the remaining vegetation shows up as an unusually shaped spike that then the morphological filter addresses pretty well. We will see how it fares with CSF.

(now sent with the correct email address to access the list)

[http://sig.cmparks.net/cmp-ms-90x122.png] Stephen V. Mather
GIS Manager
(216) 635-3243 (Work)
clevelandmetroparks.com<http://www.clemetparks.com>



________________________________
From: Luigi Pirelli <luipir at gmail.com>
Sent: Thursday, July 2, 2020 2:33 AM
To: Stephen V. Mather <svm at clevelandmetroparks.com>
Cc: pdal <pdal at lists.osgeo.org>
Subject: Re: [pdal] Digitized building footprints


WARNING: This email originated outside of Cleveland Metroparks. DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.

hmmmm... did you check difference running MF with or without buildings? due to closing/opening process of the algorithm, the nearest points to building can be affected. In case of building, these points can be vegetations, especially in dry area with high thermal mass buildings (soil, mud, rock); vegetation grow better near this places where the water stress is reduced [1]

Luigi Pirelli

[1] https://www.amazon.com/dp/B07SXR66YG/ref=dp-kindle-redirect?_encoding=UTF8&btkr=1

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Mon, 29 Jun 2020 at 19:16, Stephen V. Mather <svm at clevelandmetroparks.com<mailto:svm at clevelandmetroparks.com>> wrote:
Hi Andrew,

The goal is to use the digitized footprints to filter the point cloud of the known buildings. With the buildings removed, I plan to then feed this in to SMRF to remove the vegetation points as best as possible. Something similar to this:
https://smathermather.com/2016/10/15/finding-peace-finding-the-grounddrone-flights-for-hydrologic-modeling/

Thanks,
Best,
Steve



[http://sig.cmparks.net/cmp-ms-90x122.png] Stephen V. Mather
GIS Manager
(216) 635-3243 (Work)
clevelandmetroparks.com<http://www.clemetparks.com>



________________________________
From: Andrew Bell <andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>>
Sent: Monday, June 29, 2020 12:43 PM
To: Stephen V. Mather <svm at clevelandmetroparks.com<mailto:svm at clevelandmetroparks.com>>
Cc: pdal <pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>>
Subject: Re: [pdal] Digitized building footprints


WARNING: This email originated outside of Cleveland Metroparks. DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.


On Mon, Jun 29, 2020 at 11:25 AM Stephen V. Mather <svm at clevelandmetroparks.com<mailto:svm at clevelandmetroparks.com>> wrote:
Hi All,

I am processing a dataset for which I have a digitized building footprints. It'd be even cooler if I had vegetation, but beggers != choosers.

In principle, I could use filters.overlay, but this is a massive dataset, so I am curious if it makes more sense to rasterize, tile things up, and use filters.colorization.

Happy to test and report back on what is fastest, but in case someone has a hunch, or an alternative recommended approach, I thought I would ask.

It's not clear to me what you're trying to do. Maybe you could state your goal?

--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200702/7dfd7130/attachment-0001.html>

From svm at clevelandmetroparks.com  Sun Jul  5 14:56:40 2020
From: svm at clevelandmetroparks.com (Stephen V. Mather)
Date: Sun, 5 Jul 2020 21:56:40 +0000
Subject: [pdal] Digitized building footprints
In-Reply-To: <MWHPR20MB1248127183DCDA296FBFEDA4B96D0@MWHPR20MB1248.namprd20.prod.outlook.com>
References: <BN6PR20MB1233DE396095AB770A1084DDB96E0@BN6PR20MB1233.namprd20.prod.outlook.com>
 <CACJ51z3Zt5j__zJQir6-ORipNi_E53qLfzarAi8snu_iVmshWQ@mail.gmail.com>
 <BN6PR20MB12336362611B5C9246FFFCD4B96E0@BN6PR20MB1233.namprd20.prod.outlook.com>,
 <CAFO80_qmzFUK5WzZiHxrkMM6KCaPS1mywjMDvHBwATfw6Gxnvw@mail.gmail.com>,
 <MWHPR20MB1248127183DCDA296FBFEDA4B96D0@MWHPR20MB1248.namprd20.prod.outlook.com>
Message-ID: <BF38DF43-9E01-4228-8343-722C42E030C6@clevelandmetroparks.com>

Back to Howard’s question about the deinitition of massive: we’re looking at something north of 15 billion points.

More as I dive into testing this week.

Cheers,
Best,
Steve

On Jul 2, 2020, at 06:09, Stephen V. Mather <svm at clevelandmetroparks.com> wrote:

﻿
Vegetation definitely shows up as a little spiked ring around the edges of where the buildings sit. I tend to buffer the buildings marginally anyway, and the remaining vegetation shows up as an unusually shaped spike that then the morphological filter addresses pretty well. We will see how it fares with CSF.

(now sent with the correct email address to access the list)

[http://sig.cmparks.net/cmp-ms-90x122.png] Stephen V. Mather
GIS Manager
(216) 635-3243 (Work)
clevelandmetroparks.com<http://www.clemetparks.com>



________________________________
From: Luigi Pirelli <luipir at gmail.com>
Sent: Thursday, July 2, 2020 2:33 AM
To: Stephen V. Mather <svm at clevelandmetroparks.com>
Cc: pdal <pdal at lists.osgeo.org>
Subject: Re: [pdal] Digitized building footprints


WARNING: This email originated outside of Cleveland Metroparks. DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.

hmmmm... did you check difference running MF with or without buildings? due to closing/opening process of the algorithm, the nearest points to building can be affected. In case of building, these points can be vegetations, especially in dry area with high thermal mass buildings (soil, mud, rock); vegetation grow better near this places where the water stress is reduced [1]

Luigi Pirelli

[1] https://www.amazon.com/dp/B07SXR66YG/ref=dp-kindle-redirect?_encoding=UTF8&btkr=1

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Mon, 29 Jun 2020 at 19:16, Stephen V. Mather <svm at clevelandmetroparks.com<mailto:svm at clevelandmetroparks.com>> wrote:
Hi Andrew,

The goal is to use the digitized footprints to filter the point cloud of the known buildings. With the buildings removed, I plan to then feed this in to SMRF to remove the vegetation points as best as possible. Something similar to this:
https://smathermather.com/2016/10/15/finding-peace-finding-the-grounddrone-flights-for-hydrologic-modeling/

Thanks,
Best,
Steve



[http://sig.cmparks.net/cmp-ms-90x122.png] Stephen V. Mather
GIS Manager
(216) 635-3243 (Work)
clevelandmetroparks.com<http://www.clemetparks.com>



________________________________
From: Andrew Bell <andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>>
Sent: Monday, June 29, 2020 12:43 PM
To: Stephen V. Mather <svm at clevelandmetroparks.com<mailto:svm at clevelandmetroparks.com>>
Cc: pdal <pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>>
Subject: Re: [pdal] Digitized building footprints


WARNING: This email originated outside of Cleveland Metroparks. DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.


On Mon, Jun 29, 2020 at 11:25 AM Stephen V. Mather <svm at clevelandmetroparks.com<mailto:svm at clevelandmetroparks.com>> wrote:
Hi All,

I am processing a dataset for which I have a digitized building footprints. It'd be even cooler if I had vegetation, but beggers != choosers.

In principle, I could use filters.overlay, but this is a massive dataset, so I am curious if it makes more sense to rasterize, tile things up, and use filters.colorization.

Happy to test and report back on what is fastest, but in case someone has a hunch, or an alternative recommended approach, I thought I would ask.

It's not clear to me what you're trying to do. Maybe you could state your goal?

--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200705/0d93cfba/attachment-0001.html>

From wonder.sk at gmail.com  Mon Jul  6 07:01:39 2020
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 6 Jul 2020 16:01:39 +0200
Subject: [pdal] Point cloud viewer in QGIS
Message-ID: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>

Hi all

I have been looking into ways to get native point cloud support into
QGIS. By native I mean to have a new point cloud map layer type which
would support LAS and possibly other formats, and it would display the
data in 2D/3D map views together with other map layers. At this point
I am interested only in the visualization, no further
analysis/processing. While the existing tools such as CloudCompare or
Potree are great to visualize point clouds, we are IMHO still missing
integration with a proper GIS, which would open many new possibilities
and make point cloud data more accessible to ordinary GIS users.

I am aware of the fact that this is not going to be an easy task for a
couple of evenings :-) We would like to run a crowd-funding campaign
to make the development possible.

I wanted to reach out to the PDAL community and see what advice the
point cloud gurus would have. I have a fair amount of experience with
QGIS development and some with 3D graphics, but I am relatively new to
the whole ecosystem of point cloud data. I have started to look into
PDAL, CloudCompare and Potree to get a better understanding of the
challenges.

So far it looks like it would be a good idea to use the PDAL library
for I/O - it supports a variety of formats through a common
abstraction which would make our life much easier. The next thing is
how to deal with rendering. From what I understand, CloudCompare reads
the whole point cloud file into memory and builds an in-memory octree
which is then used for data access. Potree needs the data to be
pre-processed beforehand with PotreeConverter tool into an octree, its
nodes are then stored in files and requested as needed. Entwine does
similar indexing, with a different file format. So it seems that it
would be nice to cover both cases:
1. point clouds without index (it would be created on the fly in memory),
2. point clouds with index (stored on a local drive or maybe on a
remote server) - with much faster loading times and supporting
potentially really huge datasets.

I guess once we have an octree built, we can start thinking about
visualization of the data... There are various things to consider in
addition to out of core rendering (to pick the right chunks of data
based on level of detail - already handled in QGIS 3D to some degree).
It will probably be a long run to make the point cloud visualization
look good - splatting, dynamic point sizing, eye-dome lighting and
possibly more features already supported by Potree / CloudCompare.

I don't want to make this mail too long - at some point I will try to
prepare a QGIS Enhancement Proposal (QEP) with more details. I would
be very grateful for any comments and suggestions, where do you see
possible issues, where else to look for some inspiration etc.

Thanks
Martin

From njacadieux.gitlab at gmail.com  Mon Jul  6 08:05:26 2020
From: njacadieux.gitlab at gmail.com (Nicolas Cadieux)
Date: Mon, 6 Jul 2020 11:05:26 -0400
Subject: [pdal] Point cloud viewer in QGIS
In-Reply-To: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
References: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
Message-ID: <1B4C5136-887F-4DC8-B036-C6E7EDC90C38@gmail.com>

Hi,

I agree with your assessment of CloudCompare and would like to see this go ahead.  I am not an experienced programmer and would not know where to start.  But I am wondering if you can work using the new mesh engine that is now in QGIS?  Can you build on top of that or is that a completely different ball game?  You could at least contact the programmers  that did that part for some inspiration.

Good luck.

Nicolas Cadieux
Ça va bien aller!

> Le 6 juill. 2020 à 10:01, Martin Dobias <wonder.sk at gmail.com> a écrit :
> 
> ﻿Hi all
> 
> I have been looking into ways to get native point cloud support into
> QGIS. By native I mean to have a new point cloud map layer type which
> would support LAS and possibly other formats, and it would display the
> data in 2D/3D map views together with other map layers. At this point
> I am interested only in the visualization, no further
> analysis/processing. While the existing tools such as CloudCompare or
> Potree are great to visualize point clouds, we are IMHO still missing
> integration with a proper GIS, which would open many new possibilities
> and make point cloud data more accessible to ordinary GIS users.
> 
> I am aware of the fact that this is not going to be an easy task for a
> couple of evenings :-) We would like to run a crowd-funding campaign
> to make the development possible.
> 
> I wanted to reach out to the PDAL community and see what advice the
> point cloud gurus would have. I have a fair amount of experience with
> QGIS development and some with 3D graphics, but I am relatively new to
> the whole ecosystem of point cloud data. I have started to look into
> PDAL, CloudCompare and Potree to get a better understanding of the
> challenges.
> 
> So far it looks like it would be a good idea to use the PDAL library
> for I/O - it supports a variety of formats through a common
> abstraction which would make our life much easier. The next thing is
> how to deal with rendering. From what I understand, CloudCompare reads
> the whole point cloud file into memory and builds an in-memory octree
> which is then used for data access. Potree needs the data to be
> pre-processed beforehand with PotreeConverter tool into an octree, its
> nodes are then stored in files and requested as needed. Entwine does
> similar indexing, with a different file format. So it seems that it
> would be nice to cover both cases:
> 1. point clouds without index (it would be created on the fly in memory),
> 2. point clouds with index (stored on a local drive or maybe on a
> remote server) - with much faster loading times and supporting
> potentially really huge datasets.
> 
> I guess once we have an octree built, we can start thinking about
> visualization of the data... There are various things to consider in
> addition to out of core rendering (to pick the right chunks of data
> based on level of detail - already handled in QGIS 3D to some degree).
> It will probably be a long run to make the point cloud visualization
> look good - splatting, dynamic point sizing, eye-dome lighting and
> possibly more features already supported by Potree / CloudCompare.
> 
> I don't want to make this mail too long - at some point I will try to
> prepare a QGIS Enhancement Proposal (QEP) with more details. I would
> be very grateful for any comments and suggestions, where do you see
> possible issues, where else to look for some inspiration etc.
> 
> Thanks
> Martin
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal

From wonder.sk at gmail.com  Mon Jul  6 08:59:35 2020
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 6 Jul 2020 17:59:35 +0200
Subject: [pdal] Point cloud viewer in QGIS
In-Reply-To: <1B4C5136-887F-4DC8-B036-C6E7EDC90C38@gmail.com>
References: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
 <1B4C5136-887F-4DC8-B036-C6E7EDC90C38@gmail.com>
Message-ID: <CAC2XbFco306tUEXZZGz-5EaJvS_1szQgHR7sMH6PFCUSG_cxKQ@mail.gmail.com>

Hi Nicolas

On Mon, Jul 6, 2020 at 5:05 PM Nicolas Cadieux
<njacadieux.gitlab at gmail.com> wrote:
>
> But I am wondering if you can work using the new mesh engine that is now in QGIS?  Can you build on top of that or is that a completely different ball game?  You could at least contact the programmers  that did that part for some inspiration.

The mesh layer support in QGIS has been worked on mostly by my
colleagues at Lutra Consulting and previously by myself when it was
still a QGIS plugin, so I am familiar with the internals. Mesh layer
in QGIS has a bit different background and focus (at least for now) -
it has been mostly used for visualization of flood models or
oceanographic/climate data with time series data on vertices or faces.
Generally, these models have complexity in order of thousands of
elements, exceptionally few millions of elements, so the mesh layer
data structures in QGIS are not really prepared to deal with millions
or billions of points that are common with point clouds.

Regards
Martin

From howard at hobu.co  Mon Jul  6 09:22:11 2020
From: howard at hobu.co (Howard Butler)
Date: Mon, 6 Jul 2020 11:22:11 -0500
Subject: [pdal] Point cloud viewer in QGIS
In-Reply-To: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
References: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
Message-ID: <E5601478-47D8-4B6A-9B4E-BE38DDCB4C55@hobu.co>



> On Jul 6, 2020, at 9:01 AM, Martin Dobias <wonder.sk at gmail.com> wrote:

> While the existing tools such as CloudCompare or
> Potree are great to visualize point clouds, we are IMHO still missing
> integration with a proper GIS, which would open many new possibilities
> and make point cloud data more accessible to ordinary GIS users.

Point cloud visualization in QGIS would be an excellent addition, but as you discuss, it would be a heavy lift.

> So far it looks like it would be a good idea to use the PDAL library
> for I/O - it supports a variety of formats through a common
> abstraction which would make our life much easier.

I agree. You could also give users the ability to load PDAL Pipelines (search for the PipelineExecutor C++ class) that would enable them to directly load and process PDAL data much like a GDAL VRT. Another point that QGIS should worry about is streamable or bulk data processing with PDAL. Both are supported.

> The next thing is
> how to deal with rendering. From what I understand, CloudCompare reads
> the whole point cloud file into memory and builds an in-memory octree
> which is then used for data access. Potree needs the data to be
> pre-processed beforehand with PotreeConverter tool into an octree, its
> nodes are then stored in files and requested as needed. Entwine does
> similar indexing, with a different file format. So it seems that it
> would be nice to cover both cases:

Everyone that renders data pre-processes it into something more suitable for visualization. Entwine supports keeping all attributes, to full depth, with the option of preserving original data ordering. The encoding of the data can be LAZ or Zstd-compressed blobs, but other encodings could be trivially added. Entwine also supports "addons" https://pdal.io/stages/writers.ept_addon.html <https://pdal.io/stages/writers.ept_addon.html> that can be used to enrich per-point attributes without disrupting the existing tree. This is needed for situations where the original data is remote (say usgs.entwine.io <http://usgs.entwine.io/> for USGS 3DEP holdings), but you want to locally process/classify/enhance data.

> It will probably be a long run to make the point cloud visualization
> look good - splatting, dynamic point sizing, eye-dome lighting and
> possibly more features already supported by Potree / CloudCompare.

It has been my observation that point cloud rendering features radiate most quickly out of Potree into the other softwares. This includes implementations of EDL, dynamic sizing and fill approaches, and the frustum culling approach.

> 
> I don't want to make this mail too long - at some point I will try to
> prepare a QGIS Enhancement Proposal (QEP) with more details. I would
> be very grateful for any comments and suggestions, where do you see
> possible issues, where else to look for some inspiration etc.
> 

I'm excited to see movement toward PDAL's usage in QGIS. As you embark on the process of its development, don't hesitate to ask questions and for things you might need. PDAL was not developed with support for a dynamic live GUI as a primary use case, and you are likely to run into a few friction points (Progress reporting is one thing I immediately know about. Threading situations would be another). We'll see what we can do. 

Howard

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200706/537d79b0/attachment.html>

From njacadieux.gitlab at gmail.com  Mon Jul  6 09:30:11 2020
From: njacadieux.gitlab at gmail.com (Nicolas Cadieux)
Date: Mon, 6 Jul 2020 12:30:11 -0400
Subject: [pdal] Point cloud viewer in QGIS
In-Reply-To: <CAC2XbFco306tUEXZZGz-5EaJvS_1szQgHR7sMH6PFCUSG_cxKQ@mail.gmail.com>
References: <CAC2XbFco306tUEXZZGz-5EaJvS_1szQgHR7sMH6PFCUSG_cxKQ@mail.gmail.com>
Message-ID: <F9B3D31E-4703-4B27-BF9C-C5248DCDC86D@gmail.com>

Good,

It’s nice to know that. Whatever you do, it would be nice to make use of the GPU calculation capabilities when you write your code.  I have Hundreds of billions of points If you need someone for testing.

Nicolas Cadieux
Ça va bien aller!

> Le 6 juill. 2020 à 11:59, Martin Dobias <wonder.sk at gmail.com> a écrit :
> 
> ﻿Hi Nicolas
> 
>> On Mon, Jul 6, 2020 at 5:05 PM Nicolas Cadieux
>> <njacadieux.gitlab at gmail.com> wrote:
>> 
>> But I am wondering if you can work using the new mesh engine that is now in QGIS?  Can you build on top of that or is that a completely different ball game?  You could at least contact the programmers  that did that part for some inspiration.
> 
> The mesh layer support in QGIS has been worked on mostly by my
> colleagues at Lutra Consulting and previously by myself when it was
> still a QGIS plugin, so I am familiar with the internals. Mesh layer
> in QGIS has a bit different background and focus (at least for now) -
> it has been mostly used for visualization of flood models or
> oceanographic/climate data with time series data on vertices or faces.
> Generally, these models have complexity in order of thousands of
> elements, exceptionally few millions of elements, so the mesh layer
> data structures in QGIS are not really prepared to deal with millions
> or billions of points that are common with point clouds.
> 
> Regards
> Martin

From luipir at gmail.com  Mon Jul  6 10:05:58 2020
From: luipir at gmail.com (Luigi Pirelli)
Date: Mon, 6 Jul 2020 19:05:58 +0200
Subject: [pdal] Point cloud viewer in QGIS
In-Reply-To: <E5601478-47D8-4B6A-9B4E-BE38DDCB4C55@hobu.co>
References: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
 <E5601478-47D8-4B6A-9B4E-BE38DDCB4C55@hobu.co>
Message-ID: <CAFO80_q3L66BPt5RLqkPPnoE8qjB2U_nu2fYaLePxVsjRLfRxA@mail.gmail.com>

Another possible critical aspect is lack of OSGeo4W packaging moved to
Conda in a Win environment. AFAIR OSGeo4W packaging was abandoned due to
lack of resources to maintain it, not for technical limitations. Is it
right Howard?

Luigi Pirelli

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
<https://www.packtpub.com/eu/application-development/mastering-geospatial-development-qgis-3x-third-edition>
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Mon, 6 Jul 2020 at 18:22, Howard Butler <howard at hobu.co> wrote:

>
>
> On Jul 6, 2020, at 9:01 AM, Martin Dobias <wonder.sk at gmail.com> wrote:
>
>
> While the existing tools such as CloudCompare or
> Potree are great to visualize point clouds, we are IMHO still missing
> integration with a proper GIS, which would open many new possibilities
> and make point cloud data more accessible to ordinary GIS users.
>
>
> Point cloud visualization in QGIS would be an excellent addition, but as
> you discuss, it would be a heavy lift.
>
> So far it looks like it would be a good idea to use the PDAL library
> for I/O - it supports a variety of formats through a common
> abstraction which would make our life much easier.
>
>
> I agree. You could also give users the ability to load PDAL Pipelines
> (search for the PipelineExecutor C++ class) that would enable them to
> directly load and process PDAL data much like a GDAL VRT. Another point
> that QGIS should worry about is streamable or bulk data processing with
> PDAL. Both are supported.
>
> The next thing is
> how to deal with rendering. From what I understand, CloudCompare reads
> the whole point cloud file into memory and builds an in-memory octree
> which is then used for data access. Potree needs the data to be
> pre-processed beforehand with PotreeConverter tool into an octree, its
> nodes are then stored in files and requested as needed. Entwine does
> similar indexing, with a different file format. So it seems that it
> would be nice to cover both cases:
>
>
> Everyone that renders data pre-processes it into something more suitable
> for visualization. Entwine supports keeping all attributes, to full depth,
> with the option of preserving original data ordering. The encoding of the
> data can be LAZ or Zstd-compressed blobs, but other encodings could be
> trivially added. Entwine also supports "addons"
> https://pdal.io/stages/writers.ept_addon.html that can be used to enrich
> per-point attributes without disrupting the existing tree. This is needed
> for situations where the original data is remote (say usgs.entwine.io for
> USGS 3DEP holdings), but you want to locally process/classify/enhance data.
>
> It will probably be a long run to make the point cloud visualization
> look good - splatting, dynamic point sizing, eye-dome lighting and
> possibly more features already supported by Potree / CloudCompare.
>
>
> It has been my observation that point cloud rendering features radiate
> most quickly out of Potree into the other softwares. This includes
> implementations of EDL, dynamic sizing and fill approaches, and the frustum
> culling approach.
>
>
> I don't want to make this mail too long - at some point I will try to
> prepare a QGIS Enhancement Proposal (QEP) with more details. I would
> be very grateful for any comments and suggestions, where do you see
> possible issues, where else to look for some inspiration etc.
>
>
> I'm excited to see movement toward PDAL's usage in QGIS. As you embark on
> the process of its development, don't hesitate to ask questions and for
> things you might need. PDAL was not developed with support for a dynamic
> live GUI as a primary use case, and you are likely to run into a few
> friction points (Progress reporting is one thing I immediately know about.
> Threading situations would be another). We'll see what we can do.
>
> Howard
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200706/6ce70fac/attachment.html>

From njacadieux.gitlab at gmail.com  Mon Jul  6 10:26:30 2020
From: njacadieux.gitlab at gmail.com (Nicolas Cadieux)
Date: Mon, 6 Jul 2020 13:26:30 -0400
Subject: [pdal] Point cloud viewer in QGIS
In-Reply-To: <CAFO80_q3L66BPt5RLqkPPnoE8qjB2U_nu2fYaLePxVsjRLfRxA@mail.gmail.com>
References: <CAFO80_q3L66BPt5RLqkPPnoE8qjB2U_nu2fYaLePxVsjRLfRxA@mail.gmail.com>
Message-ID: <37EB7165-391A-489B-82E8-B738BE9616E1@gmail.com>

“ The next thing ishow to deal with rendering. From what I understand, CloudCompare reads the whole point cloud file into memory and builds an in-memory octree which is then used for data access.”

I believe it’s loaded to the gpu memory.  When I ran out of gpu memory, CC would crash.  I fixed this with a newer gpu with more memory. So you must absolutely make sure you can manage situations like these from the start...

Nicolas Cadieux
Ça va bien aller!

> Le 6 juill. 2020 à 13:06, Luigi Pirelli <luipir at gmail.com> a écrit :
> 
> ﻿
> Another possible critical aspect is lack of OSGeo4W packaging moved to Conda in a Win environment. AFAIR OSGeo4W packaging was abandoned due to lack of resources to maintain it, not for technical limitations. Is it right Howard?
> 
> Luigi Pirelli
> 
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Book: Mastering QGIS3 - 3rd Edition
> * Hire a team: http://www.qcooperative.net
> **************************************************************************************************
> 
> 
>> On Mon, 6 Jul 2020 at 18:22, Howard Butler <howard at hobu.co> wrote:
>> 
>> 
>>>> On Jul 6, 2020, at 9:01 AM, Martin Dobias <wonder.sk at gmail.com> wrote:
>>> 
>>> While the existing tools such as CloudCompare or
>>> Potree are great to visualize point clouds, we are IMHO still missing
>>> integration with a proper GIS, which would open many new possibilities
>>> and make point cloud data more accessible to ordinary GIS users.
>> 
>> Point cloud visualization in QGIS would be an excellent addition, but as you discuss, it would be a heavy lift.
>> 
>>> So far it looks like it would be a good idea to use the PDAL library
>>> for I/O - it supports a variety of formats through a common
>>> abstraction which would make our life much easier.
>> 
>> I agree. You could also give users the ability to load PDAL Pipelines (search for the PipelineExecutor C++ class) that would enable them to directly load and process PDAL data much like a GDAL VRT. Another point that QGIS should worry about is streamable or bulk data processing with PDAL. Both are supported.
>> 
>>> The next thing is
>>> how to deal with rendering. From what I understand, CloudCompare reads
>>> the whole point cloud file into memory and builds an in-memory octree
>>> which is then used for data access. Potree needs the data to be
>>> pre-processed beforehand with PotreeConverter tool into an octree, its
>>> nodes are then stored in files and requested as needed. Entwine does
>>> similar indexing, with a different file format. So it seems that it
>>> would be nice to cover both cases:
>> 
>> Everyone that renders data pre-processes it into something more suitable for visualization. Entwine supports keeping all attributes, to full depth, with the option of preserving original data ordering. The encoding of the data can be LAZ or Zstd-compressed blobs, but other encodings could be trivially added. Entwine also supports "addons" https://pdal.io/stages/writers.ept_addon.html that can be used to enrich per-point attributes without disrupting the existing tree. This is needed for situations where the original data is remote (say usgs.entwine.io for USGS 3DEP holdings), but you want to locally process/classify/enhance data.
>> 
>>> It will probably be a long run to make the point cloud visualization
>>> look good - splatting, dynamic point sizing, eye-dome lighting and
>>> possibly more features already supported by Potree / CloudCompare.
>> 
>> It has been my observation that point cloud rendering features radiate most quickly out of Potree into the other softwares. This includes implementations of EDL, dynamic sizing and fill approaches, and the frustum culling approach.
>> 
>>> 
>>> I don't want to make this mail too long - at some point I will try to
>>> prepare a QGIS Enhancement Proposal (QEP) with more details. I would
>>> be very grateful for any comments and suggestions, where do you see
>>> possible issues, where else to look for some inspiration etc.
>>> 
>> 
>> I'm excited to see movement toward PDAL's usage in QGIS. As you embark on the process of its development, don't hesitate to ask questions and for things you might need. PDAL was not developed with support for a dynamic live GUI as a primary use case, and you are likely to run into a few friction points (Progress reporting is one thing I immediately know about. Threading situations would be another). We'll see what we can do. 
>> 
>> Howard
>> 
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200706/6668fa2f/attachment.html>

From wonder.sk at gmail.com  Mon Jul  6 12:00:18 2020
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 6 Jul 2020 21:00:18 +0200
Subject: [pdal] Point cloud viewer in QGIS
In-Reply-To: <E5601478-47D8-4B6A-9B4E-BE38DDCB4C55@hobu.co>
References: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
 <E5601478-47D8-4B6A-9B4E-BE38DDCB4C55@hobu.co>
Message-ID: <CAC2XbFfpE5dqTaxUt9XaB2Z+PQxSSrJGRb28HuLj0ER6a-eiqQ@mail.gmail.com>

Hi Howard

On Mon, Jul 6, 2020 at 6:22 PM Howard Butler <howard at hobu.co> wrote:
>
> > So far it looks like it would be a good idea to use the PDAL library
> > for I/O - it supports a variety of formats through a common
> > abstraction which would make our life much easier.
>
> I agree. You could also give users the ability to load PDAL Pipelines (search for the PipelineExecutor C++ class) that would enable them to directly load and process PDAL data much like a GDAL VRT. Another point that QGIS should worry about is streamable or bulk data processing with PDAL. Both are supported.

Good point - support for pipelines would add a lot of flexibility.

I have seen that some PDAL modules support streaming, but I have not
played with streamed reading of data yet.


> It has been my observation that point cloud rendering features radiate most quickly out of Potree into the other softwares. This includes implementations of EDL, dynamic sizing and fill approaches, and the frustum culling approach.

Cool - great to know. I have also found a new paper [1] and
implementation [2] from Markus Schütz that does not seem to require
building index beforehand, but it will be probably good to first focus
on a rendering approach already proven by time.


> I'm excited to see movement toward PDAL's usage in QGIS. As you embark on the process of its development, don't hesitate to ask questions and for things you might need.

Thanks!

> PDAL was not developed with support for a dynamic live GUI as a primary use case, and you are likely to run into a few friction points (Progress reporting is one thing I immediately know about. Threading situations would be another). We'll see what we can do.

Right, progress reporting and user-initiated cancellation of data I/O
would be important, and if not supported by PDAL yet, those would be
high on our wish list of features. If you have some thoughts on how
that should be architected, I would be interested in learning more -
and possibly I would try to work on that.

Regarding threading, what can be expected - is the library reentrant
(multiple threads may call PDAL at once, but not using the same data)
or are there some bits of code that would prohibit any parallel calls
(e.g. having a global library state (caches / error messages)
unprotected by mutexes) ?

One more question that comes to my mind is how PDAL deals with API /
ABI stability - is there any promise that the C++ API will not change
between versions? Or are there any plans for a stable C API like
provided in GDAL or GEOS?

Regards
Martin

[1] https://www.cg.tuwien.ac.at/research/publications/2020/schuetz-2020-PPC/
[2] https://github.com/m-schuetz/Skye

From wonder.sk at gmail.com  Mon Jul  6 12:04:47 2020
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 6 Jul 2020 21:04:47 +0200
Subject: [pdal] Point cloud viewer in QGIS
In-Reply-To: <CAFO80_q3L66BPt5RLqkPPnoE8qjB2U_nu2fYaLePxVsjRLfRxA@mail.gmail.com>
References: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
 <E5601478-47D8-4B6A-9B4E-BE38DDCB4C55@hobu.co>
 <CAFO80_q3L66BPt5RLqkPPnoE8qjB2U_nu2fYaLePxVsjRLfRxA@mail.gmail.com>
Message-ID: <CAC2XbFeusRsojyFPy72JtqdReRyYSkc1W+-q+-3vPGU6is-dmg@mail.gmail.com>

Hi Luigi!

On Mon, Jul 6, 2020 at 7:06 PM Luigi Pirelli <luipir at gmail.com> wrote:
>
> Another possible critical aspect is lack of OSGeo4W packaging moved to Conda in a Win environment. AFAIR OSGeo4W packaging was abandoned due to lack of resources to maintain it, not for technical limitations. Is it right Howard?

I hope this should not be a big issue. Compiling PDAL with LAZ support
was quite straightforward (well, on Linux, but it's all cmake
fortunately), and I guess in OSGeo4W we probably won't need every
possible reader/writer supported (if dealing with those extra
dependencies is the main pain point).

Regards
Martin

From howard at hobu.co  Mon Jul  6 12:07:48 2020
From: howard at hobu.co (Howard Butler)
Date: Mon, 6 Jul 2020 14:07:48 -0500
Subject: [pdal] Point cloud viewer in QGIS
In-Reply-To: <CAC2XbFfpE5dqTaxUt9XaB2Z+PQxSSrJGRb28HuLj0ER6a-eiqQ@mail.gmail.com>
References: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
 <E5601478-47D8-4B6A-9B4E-BE38DDCB4C55@hobu.co>
 <CAC2XbFfpE5dqTaxUt9XaB2Z+PQxSSrJGRb28HuLj0ER6a-eiqQ@mail.gmail.com>
Message-ID: <243ED34F-2AE7-4DB9-B038-BA71334FA816@hobu.co>



> On Jul 6, 2020, at 2:00 PM, Martin Dobias <wonder.sk at gmail.com> wrote:
> 
> Hi Howard
> 
> On Mon, Jul 6, 2020 at 6:22 PM Howard Butler <howard at hobu.co> wrote:
>> 
>>> So far it looks like it would be a good idea to use the PDAL library
>>> for I/O - it supports a variety of formats through a common
>>> abstraction which would make our life much easier.
>> 
>> I agree. You could also give users the ability to load PDAL Pipelines (search for the PipelineExecutor C++ class) that would enable them to directly load and process PDAL data much like a GDAL VRT. Another point that QGIS should worry about is streamable or bulk data processing with PDAL. Both are supported.
> 
> Good point - support for pipelines would add a lot of flexibility.
> 
> I have seen that some PDAL modules support streaming, but I have not
> played with streamed reading of data yet.

Pipelines can be streamable or not streamable depending on their stage composition as well.

> 
>> PDAL was not developed with support for a dynamic live GUI as a primary use case, and you are likely to run into a few friction points (Progress reporting is one thing I immediately know about. Threading situations would be another). We'll see what we can do.
> 
> Right, progress reporting and user-initiated cancellation of data I/O
> would be important, and if not supported by PDAL yet, those would be
> high on our wish list of features. If you have some thoughts on how
> that should be architected, I would be interested in learning more -
> and possibly I would try to work on that.

user-initiated cancelation of i/o in stream mode should not be a challenge. You would be able hook that together yourself. There's no facility for that in standard mode, however. Maybe Andrew has some ideas here.

> 
> Regarding threading, what can be expected - is the library reentrant
> (multiple threads may call PDAL at once, but not using the same data)
> or are there some bits of code that would prohibit any parallel calls
> (e.g. having a global library state (caches / error messages)
> unprotected by mutexes) ?

Entwine provides a good example of what can be done in regard to threading and PDAL. Not all of the readers have been exercised with Entwine, however. Some liberal locking should be enough. We're not purposely thread unsafe, but the typical PDAL usage scenario is to construct parallelism using processes, not threads.

> One more question that comes to my mind is how PDAL deals with API /
> ABI stability - is there any promise that the C++ API will not change
> between versions? Or are there any plans for a stable C API like
> provided in GDAL or GEOS?

No plan for a PDAL C API. Just extra stuff to manage for little benefit. PDAL's C++ API has been quite stable since about 1.6 or 1.7 release. More specifically, if you use higher level APIs like the PipelineManager or PipelineExecutor, they will insulate you from API changes. We have done our best to preserve pipeline behavior and syntax throughout releases, as this is the real definition of PDAL activity. This also conveniently gives other language implementors (Python, Java, Julia, Matlab) a mechanism to drive PDAL without having to deeply implement a large API surface.

Howard


From wonder.sk at gmail.com  Mon Jul  6 12:29:24 2020
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon, 6 Jul 2020 21:29:24 +0200
Subject: [pdal] Point cloud viewer in QGIS
In-Reply-To: <243ED34F-2AE7-4DB9-B038-BA71334FA816@hobu.co>
References: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
 <E5601478-47D8-4B6A-9B4E-BE38DDCB4C55@hobu.co>
 <CAC2XbFfpE5dqTaxUt9XaB2Z+PQxSSrJGRb28HuLj0ER6a-eiqQ@mail.gmail.com>
 <243ED34F-2AE7-4DB9-B038-BA71334FA816@hobu.co>
Message-ID: <CAC2XbFeUz7RyJ7JxoQsaP38q9QgRerj39-F=G_cxupn2QGb0KA@mail.gmail.com>

On Mon, Jul 6, 2020 at 9:07 PM Howard Butler <howard at hobu.co> wrote:
>
> No plan for a PDAL C API. Just extra stuff to manage for little benefit. PDAL's C++ API has been quite stable since about 1.6 or 1.7 release. More specifically, if you use higher level APIs like the PipelineManager or PipelineExecutor, they will insulate you from API changes. We have done our best to preserve pipeline behavior and syntax throughout releases, as this is the real definition of PDAL activity. This also conveniently gives other language implementors (Python, Java, Julia, Matlab) a mechanism to drive PDAL without having to deeply implement a large API surface.

Is there a way for me to tell which APIs are high level and which
aren't? For example, classes like LasReader, PointTable, PointViewSet?

I am a bit worried that without guaranteed API stability we may run
into trouble easily - even safely looking changes such as adding a new
private member variable or a new virtual method may change ABI and
then cause crashes if a newer version of PDAL would be released and
dependent QGIS code would not get recompiled... For example Qt library
has policies (like using d-pointers everywhere) and extensive tests to
make sure the ABI does not get broken between releases...

Regards
Martin

From howard at hobu.co  Mon Jul  6 14:31:20 2020
From: howard at hobu.co (Howard Butler)
Date: Mon, 6 Jul 2020 16:31:20 -0500
Subject: [pdal] Point cloud viewer in QGIS
In-Reply-To: <CAC2XbFeUz7RyJ7JxoQsaP38q9QgRerj39-F=G_cxupn2QGb0KA@mail.gmail.com>
References: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
 <E5601478-47D8-4B6A-9B4E-BE38DDCB4C55@hobu.co>
 <CAC2XbFfpE5dqTaxUt9XaB2Z+PQxSSrJGRb28HuLj0ER6a-eiqQ@mail.gmail.com>
 <243ED34F-2AE7-4DB9-B038-BA71334FA816@hobu.co>
 <CAC2XbFeUz7RyJ7JxoQsaP38q9QgRerj39-F=G_cxupn2QGb0KA@mail.gmail.com>
Message-ID: <ECF99C87-CF5D-4CA4-A34B-F1649661C2F8@hobu.co>



> On Jul 6, 2020, at 2:29 PM, Martin Dobias <wonder.sk at gmail.com> wrote:
> 
> On Mon, Jul 6, 2020 at 9:07 PM Howard Butler <howard at hobu.co> wrote:
>> 
>> No plan for a PDAL C API. Just extra stuff to manage for little benefit. PDAL's C++ API has been quite stable since about 1.6 or 1.7 release. More specifically, if you use higher level APIs like the PipelineManager or PipelineExecutor, they will insulate you from API changes. We have done our best to preserve pipeline behavior and syntax throughout releases, as this is the real definition of PDAL activity. This also conveniently gives other language implementors (Python, Java, Julia, Matlab) a mechanism to drive PDAL without having to deeply implement a large API surface.
> 
> Is there a way for me to tell which APIs are high level and which
> aren't? For example, classes like LasReader, PointTable, PointViewSet?

The PyPipeline usage in https://github.com/PDAL/python/tree/master/pdal <https://github.com/PDAL/python/tree/master/pdal> is a good one to follow, along with the PyArray one that i/o's back and forth between Numpy. You don't need the Numpy bits, but this should show you the major items you should touch. We do need a tutorial on this topic too.

> 
> I am a bit worried that without guaranteed API stability we may run
> into trouble easily - even safely looking changes such as adding a new
> private member variable or a new virtual method may change ABI and
> then cause crashes if a newer version of PDAL would be released and
> dependent QGIS code would not get recompiled... For example Qt library
> has policies (like using d-pointers everywhere) and extensive tests to
> make sure the ABI does not get broken between releases...

Do you foresee users swapping in PDAL versions underneath you? Bas has been tracking our ABI stability with Debian's toolchain. That could be one place to see the history of how we have been changing.

As a C++ library user, it is your responsibility to encapsulate your usage of PDAL. If the C++ API never gets to change, nothing is going to improve. That said, we haven't changed it very much recently, as I've said, and as time goes on it is going to be harder to do so because of all of the PDAL Stages (and external plugins) that have implemented the API. 

We have removed stages as part of new version releases. Users should get a proper error that a stage is not found in that case. 

Howard

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200706/c823cb24/attachment-0001.html>

From albi.dony at hotmail.com  Tue Jul  7 00:11:13 2020
From: albi.dony at hotmail.com (Albion SHABANI)
Date: Tue, 7 Jul 2020 07:11:13 +0000
Subject: [pdal] Add Filters.Python to PDAL
Message-ID: <PR3PR10MB3962BF85767F88734567B378FB660@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>


Hello everyone !

I'm doing some tests with PDAL and I am trying to add filters.python to pdal when I install it.

I've tried adding -DBUILD_PLUGIN_PYTHON and  -DBUILD_PLUGIN_PROGRAMMABLE when I run cmake, but obviously I am missing something cause the python filter is not added !


 cmake -G Ninja  \
        -DCMAKE_INSTALL_PREFIX=/usr \
        -DBUILD_PLUGIN_CPD=ON \
        -DBUILD_PLUGIN_PGPOINTCLOUD=ON \
        -DBUILD_PLUGIN_NITF=ON \
        -DBUILD_PLUGIN_ICEBRIDGE=ON \
        -DBUILD_PLUGIN_HDF=ON \
        -DBUILD_PLUGIN_TILEDB=ON \
        -DBUILD_PGPOINTCLOUD_TESTS=OFF \
        -DWITH_LAZPERF=ON \
        -DWITH_ZSTD=ON \

In the documentation it is not explained how to add python filters.
What should I add or is there another way to add the python filters to pdal ?

Thank you in advance.

Best,
Albion




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200707/836d23de/attachment.html>

From ahuarte47 at yahoo.es  Tue Jul  7 01:56:24 2020
From: ahuarte47 at yahoo.es (ahuarte47 at yahoo.es)
Date: Tue, 7 Jul 2020 08:56:24 +0000 (UTC)
Subject: [pdal] Point cloud viewer in QGIS
In-Reply-To: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
References: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
Message-ID: <775230843.6286058.1594112184213@mail.yahoo.com>

 Wow Martin, this new feature would be amazing!

Are you thinking about implementing a new QgsVectorDataProvider where the new QgsFeatureIterator yields the point cloud as QgsFeature instances?

If you allow me an idea, the QgsVectorDataProvider, or even the QgsFeatureIterator, could create on-the-fly a PDAL PipelineManager instance with the necessary PDAL readers, and initially some PDAL filters to consider the input parameter of current QgsFeatureRequest. Then the iterator could fetch the points implementing a new PDAL writer[1] as final stage of the pipeline.

All field info structure of the point could be read from the writer or from the last filter[2] (method: virtual void addDimensions(PointLayoutPtr layout);) of the Pipeline.

This way initially does not require any new QgsMapLayer class or new specific QgsSymbol classes to get results. Also this provider could allow to the user configure an extra set of PDAL filters (there are many ones with many purposes) to apply to the input point cloud (Decimate, SMRF-classification, and so on).

[1] https://pdal.io/development/writing-writer.html
[2] https://pdal.io/development/writing-filter.html

It is only an idea, I hope this does not bother you adding more noise, I have used PDAL in a similar way for other project and it was not difficult of implementing and you have in your hands all amazing filters that PDAL provides.

Best regards
Alvaro     En lunes, 6 de julio de 2020 16:01:55 CEST, Martin Dobias <wonder.sk at gmail.com> escribió:  
 
 Hi all

I have been looking into ways to get native point cloud support into
QGIS. By native I mean to have a new point cloud map layer type which
would support LAS and possibly other formats, and it would display the
data in 2D/3D map views together with other map layers. At this point
I am interested only in the visualization, no further
analysis/processing. While the existing tools such as CloudCompare or
Potree are great to visualize point clouds, we are IMHO still missing
integration with a proper GIS, which would open many new possibilities
and make point cloud data more accessible to ordinary GIS users.

I am aware of the fact that this is not going to be an easy task for a
couple of evenings :-) We would like to run a crowd-funding campaign
to make the development possible.

I wanted to reach out to the PDAL community and see what advice the
point cloud gurus would have. I have a fair amount of experience with
QGIS development and some with 3D graphics, but I am relatively new to
the whole ecosystem of point cloud data. I have started to look into
PDAL, CloudCompare and Potree to get a better understanding of the
challenges.

So far it looks like it would be a good idea to use the PDAL library
for I/O - it supports a variety of formats through a common
abstraction which would make our life much easier. The next thing is
how to deal with rendering. From what I understand, CloudCompare reads
the whole point cloud file into memory and builds an in-memory octree
which is then used for data access. Potree needs the data to be
pre-processed beforehand with PotreeConverter tool into an octree, its
nodes are then stored in files and requested as needed. Entwine does
similar indexing, with a different file format. So it seems that it
would be nice to cover both cases:
1. point clouds without index (it would be created on the fly in memory),
2. point clouds with index (stored on a local drive or maybe on a
remote server) - with much faster loading times and supporting
potentially really huge datasets.

I guess once we have an octree built, we can start thinking about
visualization of the data... There are various things to consider in
addition to out of core rendering (to pick the right chunks of data
based on level of detail - already handled in QGIS 3D to some degree).
It will probably be a long run to make the point cloud visualization
look good - splatting, dynamic point sizing, eye-dome lighting and
possibly more features already supported by Potree / CloudCompare.

I don't want to make this mail too long - at some point I will try to
prepare a QGIS Enhancement Proposal (QEP) with more details. I would
be very grateful for any comments and suggestions, where do you see
possible issues, where else to look for some inspiration etc.

Thanks
Martin
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/pdal  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200707/9ed4a829/attachment.html>

From andrew.bell.ia at gmail.com  Tue Jul  7 06:01:50 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 7 Jul 2020 09:01:50 -0400
Subject: [pdal] Fwd:  Point cloud viewer in QGIS
In-Reply-To: <CACJ51z2rqDse-E_MSqwxpjZSKtP14qArPrbm4tQeyJj+2+RWWQ@mail.gmail.com>
References: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
 <E5601478-47D8-4B6A-9B4E-BE38DDCB4C55@hobu.co>
 <CAC2XbFfpE5dqTaxUt9XaB2Z+PQxSSrJGRb28HuLj0ER6a-eiqQ@mail.gmail.com>
 <243ED34F-2AE7-4DB9-B038-BA71334FA816@hobu.co>
 <CAC2XbFeUz7RyJ7JxoQsaP38q9QgRerj39-F=G_cxupn2QGb0KA@mail.gmail.com>
 <CACJ51z2rqDse-E_MSqwxpjZSKtP14qArPrbm4tQeyJj+2+RWWQ@mail.gmail.com>
Message-ID: <CACJ51z2fxdpMhKDqCn7mO=LBB9gfGGPbzGqtEzOW_i=ja7nwAA@mail.gmail.com>

On Mon, Jul 6, 2020 at 3:31 PM Martin Dobias <wonder.sk at gmail.com> wrote:

> On Mon, Jul 6, 2020 at 9:07 PM Howard Butler <howard at hobu.co> wrote:
> >
> > No plan for a PDAL C API. Just extra stuff to manage for little benefit.
> PDAL's C++ API has been quite stable since about 1.6 or 1.7 release. More
> specifically, if you use higher level APIs like the PipelineManager or
> PipelineExecutor, they will insulate you from API changes. We have done our
> best to preserve pipeline behavior and syntax throughout releases, as this
> is the real definition of PDAL activity. This also conveniently gives other
> language implementors (Python, Java, Julia, Matlab) a mechanism to drive
> PDAL without having to deeply implement a large API surface.
>
> Is there a way for me to tell which APIs are high level and which
> aren't? For example, classes like LasReader, PointTable, PointViewSet?
>

No.


> I am a bit worried that without guaranteed API stability we may run
> into trouble easily - even safely looking changes such as adding a new
> private member variable or a new virtual method may change ABI and
> then cause crashes if a newer version of PDAL would be released and
> dependent QGIS code would not get recompiled... For example Qt library
> has policies (like using d-pointers everywhere) and extensive tests to
> make sure the ABI does not get broken between releases...
>

Isn't this what library versioning is for? Don't package managers routinely
deal with this? Multiple versions of libraries can co-exist and if you
replace a library with an incompatible one, you'll get a runtime error when
the required library can't be located. I'm not that familiar with Windows,
but I thought that typically DLLs were provided with an app to get around
the lack of DLL versioning.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200707/ea2b2e1d/attachment-0001.html>

From wonder.sk at gmail.com  Tue Jul  7 06:28:59 2020
From: wonder.sk at gmail.com (Martin Dobias)
Date: Tue, 7 Jul 2020 15:28:59 +0200
Subject: [pdal] Point cloud viewer in QGIS
In-Reply-To: <ECF99C87-CF5D-4CA4-A34B-F1649661C2F8@hobu.co>
References: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
 <E5601478-47D8-4B6A-9B4E-BE38DDCB4C55@hobu.co>
 <CAC2XbFfpE5dqTaxUt9XaB2Z+PQxSSrJGRb28HuLj0ER6a-eiqQ@mail.gmail.com>
 <243ED34F-2AE7-4DB9-B038-BA71334FA816@hobu.co>
 <CAC2XbFeUz7RyJ7JxoQsaP38q9QgRerj39-F=G_cxupn2QGb0KA@mail.gmail.com>
 <ECF99C87-CF5D-4CA4-A34B-F1649661C2F8@hobu.co>
Message-ID: <CAC2XbFdaebLZo5t8T=Tapr9_ywz=4_tkLZb=XbK9dqftVuEMBg@mail.gmail.com>

On Mon, Jul 6, 2020 at 11:31 PM Howard Butler <howard at hobu.co> wrote:
>
> Do you foresee users swapping in PDAL versions underneath you? Bas has been tracking our ABI stability with Debian's toolchain. That could be one place to see the history of how we have been changing.

I don't expect users would be intentionally swapping PDAL versions,
rather their packaging system may decide to upgrade pdal package - and
potentially break reverse dependencies if there were ABI changes. I am
no expert in packaging and don't know how e.g. Debian community tracks
ABI stability, if there are some automated tools for that...


> As a C++ library user, it is your responsibility to encapsulate your usage of PDAL. If the C++ API never gets to change, nothing is going to improve. That said, we haven't changed it very much recently, as I've said, and as time goes on it is going to be harder to do so because of all of the PDAL Stages (and external plugins) that have implemented the API.

Sure, I am mainly asking about what should be our expectations. For
example, if we base QGIS implementation on PDAL 2.1.0 ... is it
guaranteed there will be stable API/ABI in other 2.1.x releases? Or
just a stable API but not a stable ABI? Or could the API change as
well during the 2.1.x cycle? And how about further releases like 2.2.x
or 2.3.x, are there any guarantees? I guess this will be important for
QGIS packagers for different platforms so they know whether they can
upgrade the PDAL version at any time and/or whether they need to
rebuild QGIS for that particular version.

Regards
Martin

From wonder.sk at gmail.com  Tue Jul  7 06:33:49 2020
From: wonder.sk at gmail.com (Martin Dobias)
Date: Tue, 7 Jul 2020 15:33:49 +0200
Subject: [pdal] Point cloud viewer in QGIS
In-Reply-To: <775230843.6286058.1594112184213@mail.yahoo.com>
References: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
 <775230843.6286058.1594112184213@mail.yahoo.com>
Message-ID: <CAC2XbFfa=aja74yQZ0BYz6M9HsLw=5v4ZnMANAGO7PGDf9RTEw@mail.gmail.com>

Hi Alvaro

On Tue, Jul 7, 2020 at 10:56 AM <ahuarte47 at yahoo.es> wrote:
>
> Are you thinking about implementing a new QgsVectorDataProvider where the new QgsFeatureIterator yields the point cloud as QgsFeature instances?
>
> If you allow me an idea, the QgsVectorDataProvider, or even the QgsFeatureIterator, could create on-the-fly a PDAL PipelineManager instance with the necessary PDAL readers, and initially some PDAL filters to consider the input parameter of current QgsFeatureRequest. Then the iterator could fetch the points implementing a new PDAL writer[1] as final stage of the pipeline.
>
> All field info structure of the point could be read from the writer or from the last filter[2] (method: virtual void addDimensions(PointLayoutPtr layout);) of the Pipeline.

Thanks for your thoughts. The plans so far were to create a completely
new layer type, so it would not be "just" a new data provider for
vector layers, it would be rather a new "point cloud layer". There are
some similarities with ordinary point vector layers, but I think the
sheer amount of points needs a different approach - the existing QGIS
vector layer API is not really built to deal with many
millions/billions of points efficiently.

But talking about pipelines, it's a good idea, also suggested by
Howard, that rather than supporting only plain input files, QGIS could
use pipelines to allow some extra functionality similar to GDAL's
virtual rasters.

Regards
Martin

From ahuarte47 at yahoo.es  Tue Jul  7 08:06:05 2020
From: ahuarte47 at yahoo.es (ahuarte47 at yahoo.es)
Date: Tue, 7 Jul 2020 15:06:05 +0000 (UTC)
Subject: [pdal] Point cloud viewer in QGIS
In-Reply-To: <CAC2XbFfa=aja74yQZ0BYz6M9HsLw=5v4ZnMANAGO7PGDf9RTEw@mail.gmail.com>
References: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
 <775230843.6286058.1594112184213@mail.yahoo.com>
 <CAC2XbFfa=aja74yQZ0BYz6M9HsLw=5v4ZnMANAGO7PGDf9RTEw@mail.gmail.com>
Message-ID: <1046201449.6719780.1594134365313@mail.yahoo.com>

 
Great Martin. This is an amazing fusion between two amazing platforms. QGIS Drawing points from an User defined PDAL pipeline. Wow!
     En martes, 7 de julio de 2020 15:34:01 CEST, Martin Dobias <wonder.sk at gmail.com> escribió:  
 
 Hi Alvaro

On Tue, Jul 7, 2020 at 10:56 AM <ahuarte47 at yahoo.es> wrote:
>
> Are you thinking about implementing a new QgsVectorDataProvider where the new QgsFeatureIterator yields the point cloud as QgsFeature instances?
>
> If you allow me an idea, the QgsVectorDataProvider, or even the QgsFeatureIterator, could create on-the-fly a PDAL PipelineManager instance with the necessary PDAL readers, and initially some PDAL filters to consider the input parameter of current QgsFeatureRequest. Then the iterator could fetch the points implementing a new PDAL writer[1] as final stage of the pipeline.
>
> All field info structure of the point could be read from the writer or from the last filter[2] (method: virtual void addDimensions(PointLayoutPtr layout);) of the Pipeline.

Thanks for your thoughts. The plans so far were to create a completely
new layer type, so it would not be "just" a new data provider for
vector layers, it would be rather a new "point cloud layer". There are
some similarities with ordinary point vector layers, but I think the
sheer amount of points needs a different approach - the existing QGIS
vector layer API is not really built to deal with many
millions/billions of points efficiently.

But talking about pipelines, it's a good idea, also suggested by
Howard, that rather than supporting only plain input files, QGIS could
use pipelines to allow some extra functionality similar to GDAL's
virtual rasters.

Regards
Martin  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200707/136b2ed1/attachment.html>

From howard at hobu.co  Tue Jul  7 08:23:15 2020
From: howard at hobu.co (Howard Butler)
Date: Tue, 7 Jul 2020 10:23:15 -0500
Subject: [pdal] Point cloud viewer in QGIS
In-Reply-To: <CAFO80_q3L66BPt5RLqkPPnoE8qjB2U_nu2fYaLePxVsjRLfRxA@mail.gmail.com>
References: <CAC2XbFfxFBUpSuW=DQ-=2bY7XUobWxcYRsiY7dT8U0WBWfYFuw@mail.gmail.com>
 <E5601478-47D8-4B6A-9B4E-BE38DDCB4C55@hobu.co>
 <CAFO80_q3L66BPt5RLqkPPnoE8qjB2U_nu2fYaLePxVsjRLfRxA@mail.gmail.com>
Message-ID: <954C860C-18CE-41B8-9EA7-E435CAAB6952@hobu.co>



> On Jul 6, 2020, at 12:05 PM, Luigi Pirelli <luipir at gmail.com> wrote:
> 
> Another possible critical aspect is lack of OSGeo4W packaging moved to Conda in a Win environment. AFAIR OSGeo4W packaging was abandoned due to lack of resources to maintain it, not for technical limitations. Is it right Howard?

Yes, we moved to Conda because there wasn't an effective way to control our dependency tree (GDAL, etc) in OSGeo4W. Users complained about the need for an Admin-capable install location, and we also wanted to leverage the wider Conda / CondaForge ecosystem which has been picked up by nearly every development IDE and toolchain.  If OSGeo4W is the primary distribution mechanism for QGIS, it is going to have to be brought up to speed by the QGIS team. Tthere are QGIS builds on CondaForge too, and I would implore the team to take a serious look at abandoning OSGeo for it, but that's another topic. 

Howard


From howard at hobu.co  Tue Jul  7 08:51:14 2020
From: howard at hobu.co (Howard Butler)
Date: Tue, 7 Jul 2020 10:51:14 -0500
Subject: [pdal] Add Filters.Python to PDAL
In-Reply-To: <PR3PR10MB3962BF85767F88734567B378FB660@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
References: <PR3PR10MB3962BF85767F88734567B378FB660@PR3PR10MB3962.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <FD12A63C-BE7D-4945-80BA-4BF562035937@hobu.co>

Albion,

I think you're reading some old documentation. Can you link to where you found this information? (The PROGRAMMABLE thing is extremely old).

You should be able to install the PDAL  Python plugin and extension by simply issuing 'pip install PDAL' in your environment that has PDAL itself installed. There are some dependencies installed by pip to complete the build, which means you need a recent enough version of pip and Python.

Howard

> On Jul 7, 2020, at 2:11 AM, Albion SHABANI <albi.dony at hotmail.com> wrote:
> 
> 
> Hello everyone !
> 
> I'm doing some tests with PDAL and I am trying to add filters.python to pdal when I install it.
> 
> I've tried adding -DBUILD_PLUGIN_PYTHON and  -DBUILD_PLUGIN_PROGRAMMABLE when I run cmake, but obviously I am missing something cause the python filter is not added !
> 
> 
>  cmake -G Ninja  \
>         -DCMAKE_INSTALL_PREFIX=/usr \
>         -DBUILD_PLUGIN_CPD=ON \
>         -DBUILD_PLUGIN_PGPOINTCLOUD=ON \
>         -DBUILD_PLUGIN_NITF=ON \
>         -DBUILD_PLUGIN_ICEBRIDGE=ON \
>         -DBUILD_PLUGIN_HDF=ON \
>         -DBUILD_PLUGIN_TILEDB=ON \
>         -DBUILD_PGPOINTCLOUD_TESTS=OFF \
>         -DWITH_LAZPERF=ON \
>         -DWITH_ZSTD=ON \
> 
> In the documentation it is not explained how to add python filters.
> What should I add or is there another way to add the python filters to pdal ? 
> 
> Thank you in advance.
> 
> Best,
> Albion
> 
> 
> 
> 
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org <mailto:pdal at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/pdal <https://lists.osgeo.org/mailman/listinfo/pdal>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200707/859d01e7/attachment-0001.html>

From adam.d.steer at gmail.com  Tue Jul  7 15:14:04 2020
From: adam.d.steer at gmail.com (adam steer)
Date: Wed, 8 Jul 2020 08:14:04 +1000
Subject: [pdal] Digitized building footprints
In-Reply-To: <BF38DF43-9E01-4228-8343-722C42E030C6@clevelandmetroparks.com>
References: <BN6PR20MB1233DE396095AB770A1084DDB96E0@BN6PR20MB1233.namprd20.prod.outlook.com>
 <CACJ51z3Zt5j__zJQir6-ORipNi_E53qLfzarAi8snu_iVmshWQ@mail.gmail.com>
 <BN6PR20MB12336362611B5C9246FFFCD4B96E0@BN6PR20MB1233.namprd20.prod.outlook.com>
 <CAFO80_qmzFUK5WzZiHxrkMM6KCaPS1mywjMDvHBwATfw6Gxnvw@mail.gmail.com>
 <MWHPR20MB1248127183DCDA296FBFEDA4B96D0@MWHPR20MB1248.namprd20.prod.outlook.com>
 <BF38DF43-9E01-4228-8343-722C42E030C6@clevelandmetroparks.com>
Message-ID: <CAFORoyi49d0OhyasDkRoqLbeNZfTL43OufpTyZB15uDdPjhgow@mail.gmail.com>

awesome. how many building footprints? been thinking about this exact thing
for a long time as a spare time project, with some datasets I've got
hanging around...

On Mon, 6 Jul 2020 at 07:56, Stephen V. Mather <svm at clevelandmetroparks.com>
wrote:

> Back to Howard’s question about the deinitition of massive: we’re looking
> at something north of 15 billion points.
>
> More as I dive into testing this week.
>
> Cheers,
> Best,
> Steve
>
> On Jul 2, 2020, at 06:09, Stephen V. Mather <svm at clevelandmetroparks.com>
> wrote:
>
> ﻿
> Vegetation definitely shows up as a little spiked ring around the edges of
> where the buildings sit. I tend to buffer the buildings marginally anyway,
> and the remaining vegetation shows up as an unusually shaped spike that
> then the morphological filter addresses pretty well. We will see how it
> fares with CSF.
>
> (now sent with the correct email address to access the list)
>
> [image: http://sig.cmparks.net/cmp-ms-90x122.png] *Stephen V. Mather*
> GIS Manager
> (216) 635-3243 (Work)
> clevelandmetroparks.com
>
>
>
>
> ------------------------------
> *From:* Luigi Pirelli <luipir at gmail.com>
> *Sent:* Thursday, July 2, 2020 2:33 AM
> *To:* Stephen V. Mather <svm at clevelandmetroparks.com>
> *Cc:* pdal <pdal at lists.osgeo.org>
> *Subject:* Re: [pdal] Digitized building footprints
>
>
> *WARNING: This email originated outside of Cleveland Metroparks. DO NOT
> CLICK links or attachments unless you recognize the sender and know the
> content is safe.*
> hmmmm... did you check difference running MF with or without buildings?
> due to closing/opening process of the algorithm, the nearest points to
> building can be affected. In case of building, these points can be
> vegetations, especially in dry area with high thermal mass buildings (soil,
> mud, rock); vegetation grow better near this places where the water stress
> is reduced [1]
>
> Luigi Pirelli
>
> [1]
> https://www.amazon.com/dp/B07SXR66YG/ref=dp-kindle-redirect?_encoding=UTF8&btkr=1
>
>
> **************************************************************************************************
> * LinkedIn: https://www.linkedin.com/in/luigipirelli
> * Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
> * GitHub: https://github.com/luipir
> * Book: Mastering QGIS3 - 3rd Edition
> * Hire a team: http://www.qcooperative.net
>
> **************************************************************************************************
>
>
> On Mon, 29 Jun 2020 at 19:16, Stephen V. Mather <
> svm at clevelandmetroparks.com> wrote:
>
> Hi Andrew,
>
> The goal is to use the digitized footprints to filter the point cloud of
> the known buildings. With the buildings removed, I plan to then feed this
> in to SMRF to remove the vegetation points as best as possible. Something
> similar to this:
>
> https://smathermather.com/2016/10/15/finding-peace-finding-the-grounddrone-flights-for-hydrologic-modeling/
>
> Thanks,
> Best,
> Steve
>
>
> [image: http://sig.cmparks.net/cmp-ms-90x122.png] *Stephen V. Mather*
> GIS Manager
> (216) 635-3243 (Work)
> clevelandmetroparks.com
>
>
>
>
> ------------------------------
> *From:* Andrew Bell <andrew.bell.ia at gmail.com>
> *Sent:* Monday, June 29, 2020 12:43 PM
> *To:* Stephen V. Mather <svm at clevelandmetroparks.com>
> *Cc:* pdal <pdal at lists.osgeo.org>
> *Subject:* Re: [pdal] Digitized building footprints
>
>
> *WARNING: This email originated outside of Cleveland Metroparks. DO NOT
> CLICK links or attachments unless you recognize the sender and know the
> content is safe.*
>
>
> On Mon, Jun 29, 2020 at 11:25 AM Stephen V. Mather <
> svm at clevelandmetroparks.com> wrote:
>
> Hi All,
>
> I am processing a dataset for which I have a digitized building
> footprints. It'd be even cooler if I had vegetation, but beggers !=
> choosers.
>
> In principle, I could use filters.overlay, but this is a massive dataset,
> so I am curious if it makes more sense to rasterize, tile things up, and
> use filters.colorization.
>
> Happy to test and report back on what is fastest, but in case someone has
> a hunch, or an alternative recommended approach, I thought I would ask.
>
>
> It's not clear to me what you're trying to do. Maybe you could state your
> goal?
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal



-- 
Dr. Adam Steer
http://spatialised.net
https://www.researchgate.net/profile/Adam_Steer
http://au.linkedin.com/in/adamsteer
http://orcid.org/0000-0003-0046-7236
+61 427 091 712 ::  @adamdsteer

Suits are bad for business: http://www.spatialised.net/business-penguins/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200708/98bd9dd4/attachment.html>

From svm at clevelandmetroparks.com  Tue Jul  7 16:51:47 2020
From: svm at clevelandmetroparks.com (Stephen V. Mather)
Date: Tue, 7 Jul 2020 23:51:47 +0000
Subject: [pdal] Digitized building footprints
In-Reply-To: <I2PwgGOy0ZW2OE-Pk3RKiyttPExGaybesYydiLoSpEfMJUl_evDckJ81C3men0TNxAxiSbQungSU_tt9_IDw6wkUNrHYUCIhmGCvmZMbzaY=@protonmail.com>
References: <BN6PR20MB1233DE396095AB770A1084DDB96E0@BN6PR20MB1233.namprd20.prod.outlook.com>
 <CACJ51z3Zt5j__zJQir6-ORipNi_E53qLfzarAi8snu_iVmshWQ@mail.gmail.com>
 <BN6PR20MB12336362611B5C9246FFFCD4B96E0@BN6PR20MB1233.namprd20.prod.outlook.com>
 <CAFORoyhiSKnNnLfiBUWuaH_OjN9dUoanfWpQWHQbw_s=JSXZ-A@mail.gmail.com>,
 <I2PwgGOy0ZW2OE-Pk3RKiyttPExGaybesYydiLoSpEfMJUl_evDckJ81C3men0TNxAxiSbQungSU_tt9_IDw6wkUNrHYUCIhmGCvmZMbzaY=@protonmail.com>
Message-ID: <BN6PR20MB1233AA6187A051369DABD1F7B9660@BN6PR20MB1233.namprd20.prod.outlook.com>

Adam: any favorite settings tweaks in CSF, or have you found the defaults pretty effective?

[http://sig.cmparks.net/cmp-ms-90x122.png] Stephen V. Mather
GIS Manager
(216) 635-3243 (Work)
clevelandmetroparks.com<http://www.clemetparks.com>



________________________________
From: smathermather <smathermather at protonmail.com>
Sent: Thursday, July 2, 2020 5:35 AM
To: adam steer <adam.d.steer at gmail.com>
Cc: Stephen V. Mather <svm at clevelandmetroparks.com>; pdal <pdal at lists.osgeo.org>
Subject: Re: [pdal] Digitized building footprints


WARNING: This email originated outside of Cleveland Metroparks. DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.

Cool! I will check out CSF.

Stephen Mather
+1 216-339-6347

Sent with ProtonMail<https://protonmail.com> Secure Email.

‐‐‐‐‐‐‐ Original Message ‐‐‐‐‐‐‐
On Wednesday, July 1, 2020 10:25 PM, adam steer <adam.d.steer at gmail.com> wrote:

Hey Stephen

Also - do some testing with the CSF filter. I've found it to be the best method (so far) of getting ground from SfM datasets.

Cheers

Adam

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200707/ee92e924/attachment-0001.html>

From svm at clevelandmetroparks.com  Tue Jul  7 16:53:48 2020
From: svm at clevelandmetroparks.com (Stephen V. Mather)
Date: Tue, 7 Jul 2020 23:53:48 +0000
Subject: [pdal] Digitized building footprints
In-Reply-To: <CAFORoyi49d0OhyasDkRoqLbeNZfTL43OufpTyZB15uDdPjhgow@mail.gmail.com>
References: <BN6PR20MB1233DE396095AB770A1084DDB96E0@BN6PR20MB1233.namprd20.prod.outlook.com>
 <CACJ51z3Zt5j__zJQir6-ORipNi_E53qLfzarAi8snu_iVmshWQ@mail.gmail.com>
 <BN6PR20MB12336362611B5C9246FFFCD4B96E0@BN6PR20MB1233.namprd20.prod.outlook.com>
 <CAFO80_qmzFUK5WzZiHxrkMM6KCaPS1mywjMDvHBwATfw6Gxnvw@mail.gmail.com>
 <MWHPR20MB1248127183DCDA296FBFEDA4B96D0@MWHPR20MB1248.namprd20.prod.outlook.com>
 <BF38DF43-9E01-4228-8343-722C42E030C6@clevelandmetroparks.com>,
 <CAFORoyi49d0OhyasDkRoqLbeNZfTL43OufpTyZB15uDdPjhgow@mail.gmail.com>
Message-ID: <BN6PR20MB12338B11A7E664DE82A43198B9660@BN6PR20MB1233.namprd20.prod.outlook.com>

It's somewhere in the neighborhood of 2-300k

[http://sig.cmparks.net/cmp-ms-90x122.png] Stephen V. Mather
GIS Manager
(216) 635-3243 (Work)
clevelandmetroparks.com<http://www.clemetparks.com>



________________________________
From: adam steer <adam.d.steer at gmail.com>
Sent: Tuesday, July 7, 2020 6:14 PM
To: Stephen V. Mather <svm at clevelandmetroparks.com>
Cc: Luigi Pirelli <luipir at gmail.com>; pdal <pdal at lists.osgeo.org>
Subject: Re: [pdal] Digitized building footprints


WARNING: This email originated outside of Cleveland Metroparks. DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.

awesome. how many building footprints? been thinking about this exact thing for a long time as a spare time project, with some datasets I've got hanging around...

On Mon, 6 Jul 2020 at 07:56, Stephen V. Mather <svm at clevelandmetroparks.com<mailto:svm at clevelandmetroparks.com>> wrote:
Back to Howard’s question about the deinitition of massive: we’re looking at something north of 15 billion points.

More as I dive into testing this week.

Cheers,
Best,
Steve

On Jul 2, 2020, at 06:09, Stephen V. Mather <svm at clevelandmetroparks.com> wrote:

﻿
Vegetation definitely shows up as a little spiked ring around the edges of where the buildings sit. I tend to buffer the buildings marginally anyway, and the remaining vegetation shows up as an unusually shaped spike that then the morphological filter addresses pretty well. We will see how it fares with CSF.

(now sent with the correct email address to access the list)


[http://sig.cmparks.net/cmp-ms-90x122.png] Stephen V. Mather
GIS Manager
(216) 635-3243 (Work)
clevelandmetroparks.com



________________________________
From: Luigi Pirelli <luipir at gmail.com>
Sent: Thursday, July 2, 2020 2:33 AM
To: Stephen V. Mather <svm at clevelandmetroparks.com>
Cc: pdal <pdal at lists.osgeo.org>
Subject: Re: [pdal] Digitized building footprints


WARNING: This email originated outside of Cleveland Metroparks. DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.

hmmmm... did you check difference running MF with or without buildings? due to closing/opening process of the algorithm, the nearest points to building can be affected. In case of building, these points can be vegetations, especially in dry area with high thermal mass buildings (soil, mud, rock); vegetation grow better near this places where the water stress is reduced [1]

Luigi Pirelli

[1] https://www.amazon.com/dp/B07SXR66YG/ref=dp-kindle-redirect?_encoding=UTF8&btkr=1

**************************************************************************************************
* LinkedIn: https://www.linkedin.com/in/luigipirelli
* Stackexchange: http://gis.stackexchange.com/users/19667/luigi-pirelli
* GitHub: https://github.com/luipir
* Book: Mastering QGIS3 - 3rd Edition
* Hire a team: http://www.qcooperative.net
**************************************************************************************************


On Mon, 29 Jun 2020 at 19:16, Stephen V. Mather <svm at clevelandmetroparks.com> wrote:
Hi Andrew,

The goal is to use the digitized footprints to filter the point cloud of the known buildings. With the buildings removed, I plan to then feed this in to SMRF to remove the vegetation points as best as possible. Something similar to this:
https://smathermather.com/2016/10/15/finding-peace-finding-the-grounddrone-flights-for-hydrologic-modeling/

Thanks,
Best,
Steve



[http://sig.cmparks.net/cmp-ms-90x122.png] Stephen V. Mather
GIS Manager
(216) 635-3243 (Work)
clevelandmetroparks.com



________________________________
From: Andrew Bell <andrew.bell.ia at gmail.com>
Sent: Monday, June 29, 2020 12:43 PM
To: Stephen V. Mather <svm at clevelandmetroparks.com>
Cc: pdal <pdal at lists.osgeo.org>
Subject: Re: [pdal] Digitized building footprints


WARNING: This email originated outside of Cleveland Metroparks. DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.


On Mon, Jun 29, 2020 at 11:25 AM Stephen V. Mather <svm at clevelandmetroparks.com> wrote:
Hi All,

I am processing a dataset for which I have a digitized building footprints. It'd be even cooler if I had vegetation, but beggers != choosers.

In principle, I could use filters.overlay, but this is a massive dataset, so I am curious if it makes more sense to rasterize, tile things up, and use filters.colorization.

Happy to test and report back on what is fastest, but in case someone has a hunch, or an alternative recommended approach, I thought I would ask.

It's not clear to me what you're trying to do. Maybe you could state your goal?

--
Andrew Bell
andrew.bell.ia at gmail.com
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/pdal
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/pdal


--
Dr. Adam Steer
http://spatialised.net
https://www.researchgate.net/profile/Adam_Steer
http://au.linkedin.com/in/adamsteer
http://orcid.org/0000-0003-0046-7236
+61 427 091 712 ::  @adamdsteer

Suits are bad for business: http://www.spatialised.net/business-penguins/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200707/82d2ba61/attachment-0001.html>

From marie_sanchez74 at hotmail.com  Thu Jul  9 05:45:14 2020
From: marie_sanchez74 at hotmail.com (Marie Sanchez)
Date: Thu, 9 Jul 2020 12:45:14 +0000
Subject: [pdal] install all pdal readers,writers,filters
Message-ID: <VE1PR10MB2975661AB96D77A935BD9BB889640@VE1PR10MB2975.EURPRD10.PROD.OUTLOOK.COM>

Hi everyone,

I am Marie and I'm new to this.

I am discovering Entwine and PDAL, I guess it's the best way to work with point clouds even though the documentation does not explain everything.

Most of my point clouds are e57 format.

Can someone please explain or show me how can I install pdal  with all the filters, readers and writers.

The docker that is online does not have all the readers, like for example e57 readers are not installed.

Is there any docker that has entwine reading e57 files ? or Can somebody explain to me how can I install entwine with e57 readers and all of the filters.

I've tried to install pdal from conda but the e57 readers or not installed and I don't know what should I add to pdal when I install it.
I hope that there is a command like "install pdal --all" // to have all the filters and readers !!!

This would be very helpful so I can read my files with entwine without having the need to convert them to las or whatever.


Thank you very much for your help.
Looking forward to working with PDAL and ENTWINE.

Best,
Marie.

PS: Converting an e57 file to las with pdal, will the "las" file keep the different file source ids of scans ?



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200709/d2ed1989/attachment.html>

From andrew.bell.ia at gmail.com  Thu Jul  9 06:36:25 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 9 Jul 2020 09:36:25 -0400
Subject: [pdal] install all pdal readers,writers,filters
In-Reply-To: <VE1PR10MB2975661AB96D77A935BD9BB889640@VE1PR10MB2975.EURPRD10.PROD.OUTLOOK.COM>
References: <VE1PR10MB2975661AB96D77A935BD9BB889640@VE1PR10MB2975.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <CACJ51z2oMbtHHUVvFbkRRk7Y_cOmi9cq=gD5nFgEh+p+3hULZw@mail.gmail.com>

On Thu, Jul 9, 2020 at 8:45 AM Marie Sanchez <marie_sanchez74 at hotmail.com>
wrote:

> Hi everyone,
>
> I am Marie and I'm new to this.
>
> I am discovering Entwine and PDAL, I guess it's the best way to work with
> point clouds even though the documentation does not explain everything.
>
> Most of my point clouds are e57 format.
>
> Can someone please explain or show me how can I install pdal  with all the
> filters, readers and writers.
>

You'd have to build PDAL yourself or find a version someone else has built
that meets your needs.

The docker that is online does not have all the readers, like for example
> e57 readers are not installed.
>

I've modified the docker build to include the E57 reader.  It should be
included the next time it is generated.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200709/1273961a/attachment.html>

From brad.chambers at gmail.com  Thu Jul  9 06:43:14 2020
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Thu, 9 Jul 2020 08:43:14 -0500
Subject: [pdal] install all pdal readers,writers,filters
In-Reply-To: <VE1PR10MB2975661AB96D77A935BD9BB889640@VE1PR10MB2975.EURPRD10.PROD.OUTLOOK.COM>
References: <VE1PR10MB2975661AB96D77A935BD9BB889640@VE1PR10MB2975.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <CAJyqqPzN5aH657X-_NEzTfXr3fdBENfFsTPTUVVDSAikb=GHXw@mail.gmail.com>

On Thu, Jul 9, 2020 at 7:45 AM Marie Sanchez <marie_sanchez74 at hotmail.com>
wrote:

> I've tried to install pdal from conda but the e57 readers or not installed
> and I don't know what should I add to pdal when I install it.
>

Conda should install e57 drivers without issue. If you are not seeing them,
you could report at issue at
https://github.com/conda-forge/pdal-feedstock/issues/new.

Brad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200709/09a98059/attachment.html>

From marie_sanchez74 at hotmail.com  Thu Jul  9 07:22:58 2020
From: marie_sanchez74 at hotmail.com (Marie Sanchez)
Date: Thu, 9 Jul 2020 14:22:58 +0000
Subject: [pdal] install all pdal readers,writers,filters
In-Reply-To: <CACJ51z2oMbtHHUVvFbkRRk7Y_cOmi9cq=gD5nFgEh+p+3hULZw@mail.gmail.com>
References: <VE1PR10MB2975661AB96D77A935BD9BB889640@VE1PR10MB2975.EURPRD10.PROD.OUTLOOK.COM>,
 <CACJ51z2oMbtHHUVvFbkRRk7Y_cOmi9cq=gD5nFgEh+p+3hULZw@mail.gmail.com>
Message-ID: <VE1PR10MB2975FD39DC209B00B7F2384689640@VE1PR10MB2975.EURPRD10.PROD.OUTLOOK.COM>

Hi Andrew,

Thank you very much for your answer.


I've modified the docker build to include the E57 reader.  It should be included the next time it is generated.

Perfect, I'll be waiting for the next Docker.

You'd have to build PDAL yourself or find a version someone else has built that meets your needs.

Is there any documentation to do this ? like installing PDAL with e57 readers or with a particular filter ?


Thanks again.

Best,
Marie



________________________________
From: Andrew Bell <andrew.bell.ia at gmail.com>
Sent: Thursday, July 9, 2020 3:36 PM
To: Marie Sanchez <marie_sanchez74 at hotmail.com>
Cc: pdal at lists.osgeo.org <pdal at lists.osgeo.org>
Subject: Re: [pdal] install all pdal readers,writers,filters



On Thu, Jul 9, 2020 at 8:45 AM Marie Sanchez <marie_sanchez74 at hotmail.com<mailto:marie_sanchez74 at hotmail.com>> wrote:
Hi everyone,

I am Marie and I'm new to this.

I am discovering Entwine and PDAL, I guess it's the best way to work with point clouds even though the documentation does not explain everything.

Most of my point clouds are e57 format.

Can someone please explain or show me how can I install pdal  with all the filters, readers and writers.

You'd have to build PDAL yourself or find a version someone else has built that meets your needs.

The docker that is online does not have all the readers, like for example e57 readers are not installed.

I've modified the docker build to include the E57 reader.  It should be included the next time it is generated.

--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200709/b13018bd/attachment-0001.html>

From jedfrechette at gmail.com  Thu Jul  9 08:42:49 2020
From: jedfrechette at gmail.com (Jed Frechette)
Date: Thu, 9 Jul 2020 09:42:49 -0600
Subject: [pdal] install all pdal readers,writers,filters
In-Reply-To: <mailman.100783.1594304581.17185.pdal@lists.osgeo.org>
References: <mailman.100783.1594304581.17185.pdal@lists.osgeo.org>
Message-ID: <CAACeADYWK6w=EB+QO84VcYq6O5vzbSvS1XO8U_PL2PSvNmygAQ@mail.gmail.com>

On Thu, 9 Jul 2020 08:43:14 -0500 Bradley Chambers wrote:
> Conda should install e57 drivers without issue.

For what it's worth, I don't see the e57 drivers on a default conda
(Windows) install of 2.1.0 either. I can investigate more and file a
ticket.

-- 
Jed Frechette

From marie_sanchez74 at hotmail.com  Mon Jul 13 06:57:11 2020
From: marie_sanchez74 at hotmail.com (Marie Sanchez)
Date: Mon, 13 Jul 2020 13:57:11 +0000
Subject: [pdal] PDAL Read/Write with PDAL from S3
Message-ID: <VE1PR10MB2975A289D3883E57FA2ABF5D89600@VE1PR10MB2975.EURPRD10.PROD.OUTLOOK.COM>

Hello,

Is it possible to read and write a file directly from S3 with PDAL.

If it is possible, how many gets and puts will it do approximately to S3 ?

Best,
Marie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200713/0fe1db4d/attachment.html>

From howard at hobu.co  Mon Jul 13 06:59:16 2020
From: howard at hobu.co (Howard Butler)
Date: Mon, 13 Jul 2020 08:59:16 -0500
Subject: [pdal] PDAL Read/Write with PDAL from S3
In-Reply-To: <VE1PR10MB2975A289D3883E57FA2ABF5D89600@VE1PR10MB2975.EURPRD10.PROD.OUTLOOK.COM>
References: <VE1PR10MB2975A289D3883E57FA2ABF5D89600@VE1PR10MB2975.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <317CFE0B-558E-4C0E-919B-4D8D3ADE10E6@hobu.co>



> On Jul 13, 2020, at 8:57 AM, Marie Sanchez <marie_sanchez74 at hotmail.com> wrote:
> 
> Hello,
> 
> Is it possible to read and write a file directly from S3 with PDAL.

Not "directly". Data is read or written to a temp file and then pushed via HTTP. There are no incremental writes or reads.

> If it is possible, how many gets and puts will it do approximately to S3 ?

One? 

Howard

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200713/71647ed7/attachment.html>

From marie_sanchez74 at hotmail.com  Mon Jul 13 07:12:42 2020
From: marie_sanchez74 at hotmail.com (Marie Sanchez)
Date: Mon, 13 Jul 2020 14:12:42 +0000
Subject: [pdal] PDAL Read/Write with PDAL from S3
In-Reply-To: <317CFE0B-558E-4C0E-919B-4D8D3ADE10E6@hobu.co>
References: <VE1PR10MB2975A289D3883E57FA2ABF5D89600@VE1PR10MB2975.EURPRD10.PROD.OUTLOOK.COM>,
 <317CFE0B-558E-4C0E-919B-4D8D3ADE10E6@hobu.co>
Message-ID: <VE1PR10MB2975087EF04413C33190C73489600@VE1PR10MB2975.EURPRD10.PROD.OUTLOOK.COM>

Thank you for you answer Howard.

So, if I have en EC2 with 60Go of storage and a las file of 200Go in S3 it won't work,
the temp file will  however try to download 200Go at once and then reupload the converted data once it is finished ?

So, it would be the same as If I downloaded the file locally, convert it with pdal and reupload the data, is that right ?

My goal is to don't use a lot of storage of my EC2 and instead use S3, like entwine does read and write to S3.

Best,
Marie
________________________________
From: Howard Butler <howard at hobu.co>
Sent: Monday, July 13, 2020 3:59 PM
To: Marie Sanchez <marie_sanchez74 at hotmail.com>
Cc: pdal at lists.osgeo.org <pdal at lists.osgeo.org>
Subject: Re: [pdal] PDAL Read/Write with PDAL from S3



On Jul 13, 2020, at 8:57 AM, Marie Sanchez <marie_sanchez74 at hotmail.com<mailto:marie_sanchez74 at hotmail.com>> wrote:

Hello,

Is it possible to read and write a file directly from S3 with PDAL.

Not "directly". Data is read or written to a temp file and then pushed via HTTP. There are no incremental writes or reads.

If it is possible, how many gets and puts will it do approximately to S3 ?

One?

Howard

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200713/de215bef/attachment.html>

From norman.barker at gmail.com  Mon Jul 13 07:15:33 2020
From: norman.barker at gmail.com (Norman Barker)
Date: Mon, 13 Jul 2020 09:15:33 -0500
Subject: [pdal] PDAL Read/Write with PDAL from S3
In-Reply-To: <317CFE0B-558E-4C0E-919B-4D8D3ADE10E6@hobu.co>
References: <VE1PR10MB2975A289D3883E57FA2ABF5D89600@VE1PR10MB2975.EURPRD10.PROD.OUTLOOK.COM>
 <317CFE0B-558E-4C0E-919B-4D8D3ADE10E6@hobu.co>
Message-ID: <CAN_Dn-HH+KAWJAwYiBpPQLB51+1XmW4eKyZB7uvQ5_okyo7PCQ@mail.gmail.com>

HI Marie,

The TileDB plugin within PDAL supports reading / writing / appending
directly to S3.

The reads will be partial subsets of the complete array if you set the
bbox3d parameters.

https://pdal.io/stages/writers.tiledb.html
https://pdal.io/stages/readers.tiledb.html

Chunk size will determine the number of reads/writes to and from s3.

This does require an initial translation from las to TileDB and I would
recommend doing this with an EC2 instance.

Norman


On Mon, Jul 13, 2020 at 8:59 AM Howard Butler <howard at hobu.co> wrote:

>
>
> On Jul 13, 2020, at 8:57 AM, Marie Sanchez <marie_sanchez74 at hotmail.com>
> wrote:
>
> Hello,
>
> Is it possible to read and write a file directly from S3 with PDAL.
>
>
> Not "directly". Data is read or written to a temp file and then pushed via
> HTTP. There are no incremental writes or reads.
>
> If it is possible, how many gets and puts will it do approximately to S3 ?
>
>
> One?
>
> Howard
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200713/35b88159/attachment-0001.html>

From howard at hobu.co  Mon Jul 13 07:45:56 2020
From: howard at hobu.co (Howard Butler)
Date: Mon, 13 Jul 2020 09:45:56 -0500
Subject: [pdal] PDAL Read/Write with PDAL from S3
In-Reply-To: <VE1PR10MB2975087EF04413C33190C73489600@VE1PR10MB2975.EURPRD10.PROD.OUTLOOK.COM>
References: <VE1PR10MB2975A289D3883E57FA2ABF5D89600@VE1PR10MB2975.EURPRD10.PROD.OUTLOOK.COM>
 <317CFE0B-558E-4C0E-919B-4D8D3ADE10E6@hobu.co>
 <VE1PR10MB2975087EF04413C33190C73489600@VE1PR10MB2975.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <B85D6E54-693A-4CBC-B38F-7BF2711AF779@hobu.co>



> On Jul 13, 2020, at 9:12 AM, Marie Sanchez <marie_sanchez74 at hotmail.com> wrote:
> 
> Thank you for you answer Howard.
> 
> So, if I have en EC2 with 60Go of storage and a las file of 200Go in S3 it won't work,
> the temp file will  however try to download 200Go at once and then reupload the converted data once it is finished ?

Correct. 

> 
> So, it would be the same as If I downloaded the file locally, convert it with pdal and reupload the data, is that right ?

Correct.

> My goal is to don't use a lot of storage of my EC2 and instead use S3, like entwine does read and write to S3.

You'll have to take responsibility for data management yourself. Alternatively, you can try TileDB as Norman suggests.

Howard


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200713/bc8e5991/attachment.html>

From vollmer at scanvision.ch  Mon Jul 13 09:35:14 2020
From: vollmer at scanvision.ch (vollmer at scanvision.ch)
Date: Mon, 13 Jul 2020 18:35:14 +0200
Subject: [pdal] huge file size when writing ply
Message-ID: <33735CBB-F4B5-48F9-B75C-853310F9667B@scanvision.ch>

Hello!

Is there a way to compress ply files when writing them with pdal? 

In comparsion to CloudCompare, the files sizes are huge but pdal gives the opportunity to batch process.

Thanks and with regards,
Matthias

From andrew.bell.ia at gmail.com  Mon Jul 13 10:24:41 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 13 Jul 2020 13:24:41 -0400
Subject: [pdal] Fwd:  huge file size when writing ply
In-Reply-To: <CACJ51z0P0xh7WDh1FdiE_7w=b9-E2BWKvtJZ6VGDxXGMckSY3Q@mail.gmail.com>
References: <33735CBB-F4B5-48F9-B75C-853310F9667B@scanvision.ch>
 <CACJ51z0P0xh7WDh1FdiE_7w=b9-E2BWKvtJZ6VGDxXGMckSY3Q@mail.gmail.com>
Message-ID: <CACJ51z1Yp32pn9Xnz4rTduvkcqaAKoYS-C6Hv=gs8uWn2aOSaw@mail.gmail.com>

On Mon, Jul 13, 2020 at 1:17 PM vollmer at scanvision.ch <vollmer at scanvision.ch>
wrote:

> Hello!
>
> Is there a way to compress ply files when writing them with pdal?
>

PLY doesn't provide a compressed format.


> In comparsion to CloudCompare, the files sizes are huge but pdal gives the
> opportunity to batch process.
>

PLY is a standard format that is well-defined. If you're seeing large size
differences from another PLY writer, you should examine the options
available: https://pdal.io/stages/writers.ply.html

Best,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200713/37fa9112/attachment.html>

From svm at clevelandmetroparks.com  Mon Jul 13 10:38:24 2020
From: svm at clevelandmetroparks.com (Stephen V. Mather)
Date: Mon, 13 Jul 2020 17:38:24 +0000
Subject: [pdal] Fwd:  huge file size when writing ply
In-Reply-To: <CACJ51z1Yp32pn9Xnz4rTduvkcqaAKoYS-C6Hv=gs8uWn2aOSaw@mail.gmail.com>
References: <33735CBB-F4B5-48F9-B75C-853310F9667B@scanvision.ch>
 <CACJ51z0P0xh7WDh1FdiE_7w=b9-E2BWKvtJZ6VGDxXGMckSY3Q@mail.gmail.com>,
 <CACJ51z1Yp32pn9Xnz4rTduvkcqaAKoYS-C6Hv=gs8uWn2aOSaw@mail.gmail.com>
Message-ID: <70F3086A-AA05-4FFB-8F15-604176D22276@clevelandmetroparks.com>

Hint:

storage_mode

Type of ply file to write. Valid values are ‘ascii’, ‘little endian’, ‘big endian’. [Default: “ascii”]


The binary formats little endian and big endian are going to typically be much smaller than ASCII. Cloud compare writes binary format by default. PDAL writes ASCII by default.

On Jul 13, 2020, at 13:24, Andrew Bell <andrew.bell.ia at gmail.com> wrote:

﻿

WARNING: This email originated outside of Cleveland Metroparks. DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.


On Mon, Jul 13, 2020 at 1:17 PM vollmer at scanvision.ch<mailto:vollmer at scanvision.ch> <vollmer at scanvision.ch<mailto:vollmer at scanvision.ch>> wrote:
Hello!

Is there a way to compress ply files when writing them with pdal?

PLY doesn't provide a compressed format.

In comparsion to CloudCompare, the files sizes are huge but pdal gives the opportunity to batch process.

PLY is a standard format that is well-defined. If you're seeing large size differences from another PLY writer, you should examine the options available: https://pdal.io/stages/writers.ply.html

Best,

--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200713/4b941899/attachment-0001.html>

From marie_sanchez74 at hotmail.com  Wed Jul 22 07:08:09 2020
From: marie_sanchez74 at hotmail.com (Marie Sanchez)
Date: Wed, 22 Jul 2020 14:08:09 +0000
Subject: [pdal] Entwine missing some points while build !
Message-ID: <VE1PR10MB297569CE7FD7E45C67CF5E1F89790@VE1PR10MB2975.EURPRD10.PROD.OUTLOOK.COM>

Hello everyone,

While I build files with Entwine, I found out that not all the points are converted and the result behind is not so awesome.

 docker run -v /home/:/home connormanning/entwine:2.0 build -i home/file.las -o shome/test_/

Points inserted: 49,152/Total points: 2,913,766,478

Scanning input
1 / 1: home/files.las
SRS could not be determined

Entwine Version: 2.0.0
EPT Version: 1.0.0
Input:
        File: home/file.las
        Total points: 2,913,766,478
        Density estimate (per square unit): 45879.2
        Threads: [3, 5]
Output:
        Path: ...
        Data type: laszip
        Hierarchy type: json
        Sleep count: 2,097,152
        Scale: 0.001
        Offset: (-108, -35, 14)
Metadata:
        Bounds: [(-256, -143, -6), (39, 74, 33)]
        Cube: [(-258, -184, -135), (40, 114, 163)]
        Reprojection: (none)
        Storing dimensions: [
                X:int32, Y:int32, Z:int32, Intensity:uint16, ReturnNumber:uint8,
                NumberOfReturns:uint8, ScanDirectionFlag:uint8,
                EdgeOfFlightLine:uint8, Classification:uint8, ScanAngleRank:float,
                UserData:uint8, PointSourceId:uint16, Red:uint16, Green:uint16,
                Blue:uint16, OriginId:uint32
        ]
Build parameters:
        Span: 256
        Resolution 2D: 256 * 256 = 65,536
        Resolution 3D: 256 * 256 * 256 = 16,777,216
        Overflow threshold: 32,768

Adding 0 - home/file.las
        Pushes complete - joining...
        Done 0
Reawakened: 0
Saving registry...
Saving metadata...

Index completed in 2 seconds.
Save complete.
        Points inserted: 49,152

Am I missing something ?

Best,
Marie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20200722/197282cf/attachment.html>

