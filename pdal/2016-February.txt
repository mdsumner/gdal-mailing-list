From howard at hobu.co  Mon Feb  1 09:43:11 2016
From: howard at hobu.co (Howard Butler)
Date: Mon, 1 Feb 2016 11:43:11 -0600
Subject: [pdal] Build pdal with python 3
In-Reply-To: <34907135.15115.1454347130719.JavaMail.administrator@malf.nabble.com>
References: <34907135.15115.1454347130719.JavaMail.administrator@malf.nabble.com>
Message-ID: <56EB2F97-B050-42FD-AF4E-9A3557D51900@hobu.co>

It looks like there is some kind of confusion on your environment. Which compiler and compiler version is being used? We might be assuming if you're on OSX you're using clang. The #include <cstdint> thing might be related to that compiler/version combo, or it might be to some kind of c++11 thing, I'm not sure.

> On Feb 1, 2016, at 11:30 AM, flatearth at gmx.net wrote:
> 
> Thanks a lot, the link to your cmake configuration helped. I installed python3 now with Homebrew and set the cmake python variables accordingly. Homebrew installs the most recent version of python 3 which is 3.5.1. It was possible to install pdal via pip also in a Anaconda env with python 3.5.1.
> 
> I still don't manage to install pdal python for python 3.4.4 which I prefer to use in my usual Anaconda environment (due to some problems with python 3.5). I tried to set the python pathes to Anaconda in the cmake variables:
> 
> -DPYTHON_EXECUTABLE=/Users/me/anaconda/envs/rs/bin/python3 \
> -DPYTHON_LIBRARY=/Users/me/anaconda/envs/rs/lib/libpython3.4m.dylib \
> -DPYTHON_INCLUDE_DIR=/Users/me/anaconda/envs/rs/include/python3.4m \
> 
> But when doing 'pip install pdal' from my conda python 3.4.4 environment several errors occur again:
> 
> (rs)mac:~ me$ python
> Python 3.4.4 |Anaconda 2.4.0 (x86_64)| (default, Jan  9 2016, 17:30:09) 
> [GCC 4.2.1 (Apple Inc. build 5577)] on darwin
> Type "help", "copyright", "credits" or "license" for more information.
>>>> quit()
> (rs)mac:~ me$ which pip
> /Users/me/anaconda/envs/rs/bin/pip
> (rs)mac:~ me$ pip install pdal
> Collecting pdal
>  Using cached PDAL-1.1.0.zip
> Building wheels for collected packages: pdal
>  Running setup.py bdist_wheel for pdal ... error
>  Complete output from command /Users/me/anaconda/envs/rs/bin/python -u -c "import setuptools, tokenize;__file__='/private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-f68q4kcb/pdal/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" bdist_wheel -d /var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/tmplbj2gl_vpip-wheel- --python-tag cp34:
>  running bdist_wheel
>  running build
>  running build_py
>  creating build
>  creating build/lib.macosx-10.5-x86_64-3.4
>  creating build/lib.macosx-10.5-x86_64-3.4/pdal
>  copying pdal/__init__.py -> build/lib.macosx-10.5-x86_64-3.4/pdal
>  copying pdal/pipeline_xml.py -> build/lib.macosx-10.5-x86_64-3.4/pdal
>  running build_ext
>  building 'pdal.libpdalpython' extension
>  creating build/temp.macosx-10.5-x86_64-3.4
>  creating build/temp.macosx-10.5-x86_64-3.4/pdal
>  gcc -fno-strict-aliasing -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/Users/me/anaconda/envs/rs/include -arch x86_64 -I/Users/me/Software/pdal/py34/include -I/usr/local/include -I/usr/local/include -I/usr/local/Cellar/libxml2/2.9.3/include/libxml2 -I/usr/local/include -I/usr/local/include -I/Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include -I/Users/me/anaconda/envs/rs/include/python3.4m -c pdal/libpdalpython.cpp -o build/temp.macosx-10.5-x86_64-3.4/pdal/libpdalpython.o -std=c++11
>  In file included from pdal/libpdalpython.cpp:289:
>  In file included from /Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include/numpy/arrayobject.h:4:
>  In file included from /Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include/numpy/ndarrayobject.h:18:
>  In file included from /Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include/numpy/ndarraytypes.h:1781:
>  /Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h:15:2: warning: "Using deprecated NumPy API, disable it by "          "#defining NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION" [-W#warnings]
>  #warning "Using deprecated NumPy API, disable it by " \
>   ^
>  In file included from pdal/libpdalpython.cpp:291:
>  In file included from /Users/me/Software/pdal/py34/include/pdal/plang/Array.hpp:37:
>  In file included from /Users/me/Software/pdal/py34/include/pdal/pdal_internal.hpp:44:
>  In file included from /Users/me/Software/pdal/py34/include/pdal/pdal_macros.hpp:38:
>  /Users/me/Software/pdal/py34/include/pdal/plugin.hpp:46:10: fatal error: 'cstdint' file not found
>  #include <cstdint>
>           ^
>  1 warning and 1 error generated.
>  error: command 'gcc' failed with exit status 1
> 
>  ----------------------------------------
>  Failed building wheel for pdal
>  Running setup.py clean for pdal
> Failed to build pdal
> Installing collected packages: pdal
>  Running setup.py install for pdal ... error
>    Complete output from command /Users/me/anaconda/envs/rs/bin/python -u -c "import setuptools, tokenize;__file__='/private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-f68q4kcb/pdal/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-05u3d_lt-record/install-record.txt --single-version-externally-managed --compile:
>    running install
>    running build
>    running build_py
>    creating build
>    creating build/lib.macosx-10.5-x86_64-3.4
>    creating build/lib.macosx-10.5-x86_64-3.4/pdal
>    copying pdal/__init__.py -> build/lib.macosx-10.5-x86_64-3.4/pdal
>    copying pdal/pipeline_xml.py -> build/lib.macosx-10.5-x86_64-3.4/pdal
>    running build_ext
>    building 'pdal.libpdalpython' extension
>    creating build/temp.macosx-10.5-x86_64-3.4
>    creating build/temp.macosx-10.5-x86_64-3.4/pdal
>    gcc -fno-strict-aliasing -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/Users/me/anaconda/envs/rs/include -arch x86_64 -I/Users/me/Software/pdal/py34/include -I/usr/local/include -I/usr/local/include -I/usr/local/Cellar/libxml2/2.9.3/include/libxml2 -I/usr/local/include -I/usr/local/include -I/Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include -I/Users/me/anaconda/envs/rs/include/python3.4m -c pdal/libpdalpython.cpp -o build/temp.macosx-10.5-x86_64-3.4/pdal/libpdalpython.o -std=c++11
>    In file included from pdal/libpdalpython.cpp:289:
>    In file included from /Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include/numpy/arrayobject.h:4:
>    In file included from /Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include/numpy/ndarrayobject.h:18:
>    In file included from /Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include/numpy/ndarraytypes.h:1781:
>    /Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h:15:2: warning: "Using deprecated NumPy API, disable it by "          "#defining NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION" [-W#warnings]
>    #warning "Using deprecated NumPy API, disable it by " \
>     ^
>    In file included from pdal/libpdalpython.cpp:291:
>    In file included from /Users/me/Software/pdal/py34/include/pdal/plang/Array.hpp:37:
>    In file included from /Users/me/Software/pdal/py34/include/pdal/pdal_internal.hpp:44:
>    In file included from /Users/me/Software/pdal/py34/include/pdal/pdal_macros.hpp:38:
>    /Users/me/Software/pdal/py34/include/pdal/plugin.hpp:46:10: fatal error: 'cstdint' file not found
>    #include <cstdint>
>             ^
>    1 warning and 1 error generated.
>    error: command 'gcc' failed with exit status 1
> 
>    ----------------------------------------
> Command "/Users/me/anaconda/envs/rs/bin/python -u -c "import setuptools, tokenize;__file__='/private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-f68q4kcb/pdal/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record /var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-05u3d_lt-record/install-record.txt --single-version-externally-managed --compile" failed with error code 1 in /private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-f68q4kcb/pdal
> 
> 
> 
> Concerning the manual change of library pathes with 'install_name_tool' I still have to change them with the python 3.5.1 install (as with python 2.7). I changed the CMAKE_INSTALL_PREFIX path to my personal setting and installed pdal to this place. However, the python module is of course installed to the site-package directory of the according python install (if you meant that?).
> 
> 
> 
> 
> 
> 
> 
> 
> <quote author='Howard Butler-3'>
> 
>> On Jan 30, 2016, at 2:58 AM, FE <flatearth at gmx.net> wrote:
>> 
>> Hi,
>> 
>> I've managed to build pdal 1.1.0 on OS X using cmake-gui and makefiles. It
>> was build with python 2 by default. Python modules installed via 'pip
>> install pdal' work (after several pathes in the libraries have been
>> corrected manually with 'install_name_tool').
> 
> Please provide more detail on this one. If you install PDAL to its
> CMAKE_INSTALL_PREFIX path, install_name_tool and stuff should all be done
> for you.
> 
>> 
>> However, since I work with python 3 I would like to build pdal with python
>> 3 (it seems impossible to install pdal python modules in a python 3
>> environment having pdal build with python 2 -> causes various error
>> messages).
>> Would anybody like to explain how to build pdal with python 3 on OS X? I
>> am not very deep into these techniques and did not manage until now.
>> 
>> How can I tell cmake to use python 3? It is unclear to me which python is
>> used by cmake.
>> I have three pythons on the computer. The system python is python 2,
>> Homebrew python is python 2 (and python 3 could be installed easily),
>> finally I use Anaconda with a python 3 environment.
>> Does cmake only requires the python include directories? How to tell cmake
>> which python to use?
> 
> We need specific error information and notes about where you had trouble. I
> build PDAL with embedded Python 3 as a normal part of development almost
> daily. See my cmake example configuration at [1] for inspiration.
> 
> I do see an error with the Python extension at the moment. It has been fixed
> in https://github.com/PDAL/PDAL/pull/1096 and confirmed to work with Python
> 3 for me.
> 
> Howard
> 
> [1] https://github.com/PDAL/PDAL/blob/master/cmake/examples/hobu-config.sh
> 
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
> </quote>
> Quoted from: 
> http://osgeo-org.1560.x6.nabble.com/pdal-Build-pdal-with-python-3-tp5248100p5248128.html
> 
> _____________________________________
> Sent from http://osgeo-org.1560.x6.nabble.com
> 


From howard at hobu.co  Mon Feb  1 11:02:41 2016
From: howard at hobu.co (Howard Butler)
Date: Mon, 1 Feb 2016 13:02:41 -0600
Subject: [pdal] Build pdal with python 3
In-Reply-To: <1477365087.15718.1454349792568.JavaMail.administrator@malf.nabble.com>
References: <1477365087.15718.1454349792568.JavaMail.administrator@malf.nabble.com>
Message-ID: <724D5F8B-A565-47FD-A973-57DDE7F36275@hobu.co>

ok, I'm glad you were able to make some progress.

> On Feb 1, 2016, at 12:14 PM, flatearth at gmx.net wrote:
> 
> Yes, I use the standard OS X clang compiler. I did not change any variable concerning this.
> The '#include <cstdint> thing' thing happened exactly the same when I compiled pdal against python 2.7 and tried to 'pip install pdal' in a python 3 environment. Now that I compiled against homebrew python 3.5 i can 'pip install pdal' on conda 3.5 without that error messages.
> Only with python 3.4 this error still remains. The only difference I can see ist that for python 3.4 I have to use a conda python environment and not the homebrew or system python.
> 
> I also tried to solve the #include <cstdint> error by using '#include <tr1/cstdint>'. This solves the specific error but multiple new errors follow...
> 
> I guess that it must be something with the conda environment paths which have to be used by cmake for python3.4. But I could not manage to solve until now...
> 
> 
> 
> 
> 
> <quote author='Howard Butler-3'>
> It looks like there is some kind of confusion on your environment. Which
> compiler and compiler version is being used? We might be assuming if you're
> on OSX you're using clang. The #include <cstdint> thing might be related to
> that compiler/version combo, or it might be to some kind of c++11 thing, I'm
> not sure.
> 
>> On Feb 1, 2016, at 11:30 AM, flatearth at gmx.net wrote:
>> 
>> Thanks a lot, the link to your cmake configuration helped. I installed
>> python3 now with Homebrew and set the cmake python variables accordingly.
>> Homebrew installs the most recent version of python 3 which is 3.5.1. It
>> was possible to install pdal via pip also in a Anaconda env with python
>> 3.5.1.
>> 
>> I still don't manage to install pdal python for python 3.4.4 which I
>> prefer to use in my usual Anaconda environment (due to some problems with
>> python 3.5). I tried to set the python pathes to Anaconda in the cmake
>> variables:
>> 
>> -DPYTHON_EXECUTABLE=/Users/me/anaconda/envs/rs/bin/python3 \
>> -DPYTHON_LIBRARY=/Users/me/anaconda/envs/rs/lib/libpython3.4m.dylib \
>> -DPYTHON_INCLUDE_DIR=/Users/me/anaconda/envs/rs/include/python3.4m \
>> 
>> But when doing 'pip install pdal' from my conda python 3.4.4 environment
>> several errors occur again:
>> 
>> (rs)mac:~ me$ python
>> Python 3.4.4 |Anaconda 2.4.0 (x86_64)| (default, Jan  9 2016, 17:30:09) 
>> [GCC 4.2.1 (Apple Inc. build 5577)] on darwin
>> Type "help", "copyright", "credits" or "license" for more information.
>>>>> quit()
>> (rs)mac:~ me$ which pip
>> /Users/me/anaconda/envs/rs/bin/pip
>> (rs)mac:~ me$ pip install pdal
>> Collecting pdal
>> Using cached PDAL-1.1.0.zip
>> Building wheels for collected packages: pdal
>> Running setup.py bdist_wheel for pdal ... error
>> Complete output from command /Users/me/anaconda/envs/rs/bin/python -u -c
>> "import setuptools,
>> tokenize;__file__='/private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-f68q4kcb/pdal/setup.py';exec(compile(getattr(tokenize,
>> 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))"
>> bdist_wheel -d
>> /var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/tmplbj2gl_vpip-wheel-
>> --python-tag cp34:
>> running bdist_wheel
>> running build
>> running build_py
>> creating build
>> creating build/lib.macosx-10.5-x86_64-3.4
>> creating build/lib.macosx-10.5-x86_64-3.4/pdal
>> copying pdal/__init__.py -> build/lib.macosx-10.5-x86_64-3.4/pdal
>> copying pdal/pipeline_xml.py -> build/lib.macosx-10.5-x86_64-3.4/pdal
>> running build_ext
>> building 'pdal.libpdalpython' extension
>> creating build/temp.macosx-10.5-x86_64-3.4
>> creating build/temp.macosx-10.5-x86_64-3.4/pdal
>> gcc -fno-strict-aliasing -DNDEBUG -g -fwrapv -O3 -Wall
>> -Wstrict-prototypes -I/Users/me/anaconda/envs/rs/include -arch x86_64
>> -I/Users/me/Software/pdal/py34/include -I/usr/local/include
>> -I/usr/local/include -I/usr/local/Cellar/libxml2/2.9.3/include/libxml2
>> -I/usr/local/include -I/usr/local/include
>> -I/Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include
>> -I/Users/me/anaconda/envs/rs/include/python3.4m -c pdal/libpdalpython.cpp
>> -o build/temp.macosx-10.5-x86_64-3.4/pdal/libpdalpython.o -std=c++11
>> In file included from pdal/libpdalpython.cpp:289:
>> In file included from
>> /Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include/numpy/arrayobject.h:4:
>> In file included from
>> /Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include/numpy/ndarrayobject.h:18:
>> In file included from
>> /Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include/numpy/ndarraytypes.h:1781:
>> 
>> /Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h:15:2:
>> warning: "Using deprecated NumPy API, disable it by "          "#defining
>> NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION" [-W#warnings]
>> #warning "Using deprecated NumPy API, disable it by " \
>>  ^
>> In file included from pdal/libpdalpython.cpp:291:
>> In file included from
>> /Users/me/Software/pdal/py34/include/pdal/plang/Array.hpp:37:
>> In file included from
>> /Users/me/Software/pdal/py34/include/pdal/pdal_internal.hpp:44:
>> In file included from
>> /Users/me/Software/pdal/py34/include/pdal/pdal_macros.hpp:38:
>> /Users/me/Software/pdal/py34/include/pdal/plugin.hpp:46:10: fatal error:
>> 'cstdint' file not found
>> #include <cstdint>
>>          ^
>> 1 warning and 1 error generated.
>> error: command 'gcc' failed with exit status 1
>> 
>> ----------------------------------------
>> Failed building wheel for pdal
>> Running setup.py clean for pdal
>> Failed to build pdal
>> Installing collected packages: pdal
>> Running setup.py install for pdal ... error
>>   Complete output from command /Users/me/anaconda/envs/rs/bin/python -u
>> -c "import setuptools,
>> tokenize;__file__='/private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-f68q4kcb/pdal/setup.py';exec(compile(getattr(tokenize,
>> 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))"
>> install --record
>> /var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-05u3d_lt-record/install-record.txt
>> --single-version-externally-managed --compile:
>>   running install
>>   running build
>>   running build_py
>>   creating build
>>   creating build/lib.macosx-10.5-x86_64-3.4
>>   creating build/lib.macosx-10.5-x86_64-3.4/pdal
>>   copying pdal/__init__.py -> build/lib.macosx-10.5-x86_64-3.4/pdal
>>   copying pdal/pipeline_xml.py -> build/lib.macosx-10.5-x86_64-3.4/pdal
>>   running build_ext
>>   building 'pdal.libpdalpython' extension
>>   creating build/temp.macosx-10.5-x86_64-3.4
>>   creating build/temp.macosx-10.5-x86_64-3.4/pdal
>>   gcc -fno-strict-aliasing -DNDEBUG -g -fwrapv -O3 -Wall
>> -Wstrict-prototypes -I/Users/me/anaconda/envs/rs/include -arch x86_64
>> -I/Users/me/Software/pdal/py34/include -I/usr/local/include
>> -I/usr/local/include -I/usr/local/Cellar/libxml2/2.9.3/include/libxml2
>> -I/usr/local/include -I/usr/local/include
>> -I/Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include
>> -I/Users/me/anaconda/envs/rs/include/python3.4m -c pdal/libpdalpython.cpp
>> -o build/temp.macosx-10.5-x86_64-3.4/pdal/libpdalpython.o -std=c++11
>>   In file included from pdal/libpdalpython.cpp:289:
>>   In file included from
>> /Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include/numpy/arrayobject.h:4:
>>   In file included from
>> /Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include/numpy/ndarrayobject.h:18:
>>   In file included from
>> /Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include/numpy/ndarraytypes.h:1781:
>> 
>> /Users/me/anaconda/envs/rs/lib/python3.4/site-packages/numpy/core/include/numpy/npy_1_7_deprecated_api.h:15:2:
>> warning: "Using deprecated NumPy API, disable it by "          "#defining
>> NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION" [-W#warnings]
>>   #warning "Using deprecated NumPy API, disable it by " \
>>    ^
>>   In file included from pdal/libpdalpython.cpp:291:
>>   In file included from
>> /Users/me/Software/pdal/py34/include/pdal/plang/Array.hpp:37:
>>   In file included from
>> /Users/me/Software/pdal/py34/include/pdal/pdal_internal.hpp:44:
>>   In file included from
>> /Users/me/Software/pdal/py34/include/pdal/pdal_macros.hpp:38:
>>   /Users/me/Software/pdal/py34/include/pdal/plugin.hpp:46:10: fatal
>> error: 'cstdint' file not found
>>   #include <cstdint>
>>            ^
>>   1 warning and 1 error generated.
>>   error: command 'gcc' failed with exit status 1
>> 
>>   ----------------------------------------
>> Command "/Users/me/anaconda/envs/rs/bin/python -u -c "import setuptools,
>> tokenize;__file__='/private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-f68q4kcb/pdal/setup.py';exec(compile(getattr(tokenize,
>> 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))"
>> install --record
>> /var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-05u3d_lt-record/install-record.txt
>> --single-version-externally-managed --compile" failed with error code 1 in
>> /private/var/folders/gz/t3r4_mbs2g11gd54w4ksj7xc0020_6/T/pip-build-f68q4kcb/pdal
>> 
>> 
>> 
>> Concerning the manual change of library pathes with 'install_name_tool' I
>> still have to change them with the python 3.5.1 install (as with python
>> 2.7). I changed the CMAKE_INSTALL_PREFIX path to my personal setting and
>> installed pdal to this place. However, the python module is of course
>> installed to the site-package directory of the according python install
>> (if you meant that?).
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> 
>> <quote author='Howard Butler-3'>
>> 
>>> On Jan 30, 2016, at 2:58 AM, FE <flatearth at gmx.net> wrote:
>>> 
>>> Hi,
>>> 
>>> I've managed to build pdal 1.1.0 on OS X using cmake-gui and makefiles.
>>> It
>>> was build with python 2 by default. Python modules installed via 'pip
>>> install pdal' work (after several pathes in the libraries have been
>>> corrected manually with 'install_name_tool').
>> 
>> Please provide more detail on this one. If you install PDAL to its
>> CMAKE_INSTALL_PREFIX path, install_name_tool and stuff should all be done
>> for you.
>> 
>>> 
>>> However, since I work with python 3 I would like to build pdal with
>>> python
>>> 3 (it seems impossible to install pdal python modules in a python 3
>>> environment having pdal build with python 2 -> causes various error
>>> messages).
>>> Would anybody like to explain how to build pdal with python 3 on OS X? I
>>> am not very deep into these techniques and did not manage until now.
>>> 
>>> How can I tell cmake to use python 3? It is unclear to me which python is
>>> used by cmake.
>>> I have three pythons on the computer. The system python is python 2,
>>> Homebrew python is python 2 (and python 3 could be installed easily),
>>> finally I use Anaconda with a python 3 environment.
>>> Does cmake only requires the python include directories? How to tell
>>> cmake
>>> which python to use?
>> 
>> We need specific error information and notes about where you had trouble.
>> I
>> build PDAL with embedded Python 3 as a normal part of development almost
>> daily. See my cmake example configuration at [1] for inspiration.
>> 
>> I do see an error with the Python extension at the moment. It has been
>> fixed
>> in https://github.com/PDAL/PDAL/pull/1096 and confirmed to work with
>> Python
>> 3 for me.
>> 
>> Howard
>> 
>> [1] https://github.com/PDAL/PDAL/blob/master/cmake/examples/hobu-config.sh
>> 
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/pdal
>> </quote>
>> Quoted from: 
>> http://osgeo-org.1560.x6.nabble.com/pdal-Build-pdal-with-python-3-tp5248100p5248128.html
>> 
>> _____________________________________
>> Sent from http://osgeo-org.1560.x6.nabble.com
>> 
> 
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
> </quote>
> Quoted from: 
> http://osgeo-org.1560.x6.nabble.com/pdal-Build-pdal-with-python-3-tp5248100p5248343.html
> 
> _____________________________________
> Sent from http://osgeo-org.1560.x6.nabble.com
> 


From andrew.bell.ia at gmail.com  Mon Feb  1 11:30:18 2016
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 1 Feb 2016 13:30:18 -0600
Subject: [pdal] Build pdal with python 3
In-Reply-To: <724D5F8B-A565-47FD-A973-57DDE7F36275@hobu.co>
References: <1477365087.15718.1454349792568.JavaMail.administrator@malf.nabble.com>
 <724D5F8B-A565-47FD-A973-57DDE7F36275@hobu.co>
Message-ID: <CACJ51z14o-gn5=W9Wh3qW3RGpKuy2DGb8A0_2Y8+ci+N8S=2+g@mail.gmail.com>

On Mon, Feb 1, 2016 at 1:02 PM, Howard Butler <howard at hobu.co> wrote:

> ok, I'm glad you were able to make some progress.
>
> > On Feb 1, 2016, at 12:14 PM, flatearth at gmx.net wrote:
> >
> > Yes, I use the standard OS X clang compiler. I did not change any
> variable concerning this.
> > The '#include <cstdint> thing' thing happened exactly the same when I
> compiled pdal against python 2.7 and tried to 'pip install pdal' in a
> python 3 environment. Now that I compiled against homebrew python 3.5 i can
> 'pip install pdal' on conda 3.5 without that error messages.
> > Only with python 3.4 this error still remains. The only difference I can
> see ist that for python 3.4 I have to use a conda python environment and
> not the homebrew or system python.
> >
> > I also tried to solve the #include <cstdint> error by using '#include
> <tr1/cstdint>'. This solves the specific error but multiple new errors
> follow...
>

Your compiler is reporting GCC 4.2.1, which is from 2007.  We just don't
support compilers that old and things may or may not work in lots of ways.
You can use our docker image if you can't upgrade compilers or find a
suitable binary.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160201/defdbcf5/attachment-0001.html>

From flatearth at gmx.net  Tue Feb  2 00:40:15 2016
From: flatearth at gmx.net (FE)
Date: Tue, 2 Feb 2016 09:40:15 +0100
Subject: [pdal] Build pdal with python 3
In-Reply-To: <CACJ51z14o-gn5=W9Wh3qW3RGpKuy2DGb8A0_2Y8+ci+N8S=2+g@mail.gmail.com>
References: <1477365087.15718.1454349792568.JavaMail.administrator@malf.nabble.com>
 <724D5F8B-A565-47FD-A973-57DDE7F36275@hobu.co>,
 <CACJ51z14o-gn5=W9Wh3qW3RGpKuy2DGb8A0_2Y8+ci+N8S=2+g@mail.gmail.com>
Message-ID: <trinity-dbec5c6d-d7a2-4255-a9f0-06fbd1495777-1454402415145@3capp-gmx-bs35>

To my knowledge gcc on OS X is not gcc. It's a link to Apple LLVM which has a different versioning than original LLVM.
Here is the output for compiler versions on my machine:

mac:~ me$ clang --version
Apple LLVM version 7.0.2 (clang-700.1.81)
Target: x86_64-apple-darwin14.5.0
Thread model: posix

mac:~ me$ gcc --version
Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1
Apple LLVM version 7.0.2 (clang-700.1.81)
Target: x86_64-apple-darwin14.5.0
Thread model: posix
 

The GCC 4.2.1 reporting which you refer to is a reporting from python. At least to my understanding it means a GCC 4.2.1 compatibility of the Apple LLVM:

mac:~ me$ python
Python 2.7.11 (default, Dec  5 2015, 14:44:47) 
[GCC 4.2.1 Compatible Apple LLVM 7.0.0 (clang-700.1.76)] on darwin
Type "help", "copyright", "credits" or "license" for more information.



My machine is from 2015, has OS X 10.10.5 and up to date XCode. It has never seen something older. So I assume that I work with the original and most up to date Apple compiler.
I am not the most advanced expert in compilers and building software. But I would just like to receive some support in solving this python problem when building pdal. Docker is not an option for me.

Thanks,
Will
 
 


On Mon, Feb 1, 2016 at 1:02 PM, Howard Butler <howard at hobu.co> wrote:ok, I'm glad you were able to make some progress.

> On Feb 1, 2016, at 12:14 PM, flatearth at gmx.net[flatearth at gmx.net] wrote:
>
> Yes, I use the standard OS X clang compiler. I did not change any variable concerning this.
> The '#include <cstdint> thing' thing happened exactly the same when I compiled pdal against python 2.7 and tried to 'pip install pdal' in a python 3 environment. Now that I compiled against homebrew python 3.5 i can 'pip install pdal' on conda 3.5 without that error messages.
> Only with python 3.4 this error still remains. The only difference I can see ist that for python 3.4 I have to use a conda python environment and not the homebrew or system python.
>
> I also tried to solve the #include <cstdint> error by using '#include <tr1/cstdint>'. This solves the specific error but multiple new errors follow...
 
Your compiler is reporting GCC 4.2.1, which is from 2007.  We just don't support compilers that old and things may or may not work in lots of ways.  You can use our docker image if you can't upgrade compilers or find a suitable binary.
 --
Andrew Bell
andrew.bell.ia at gmail.com[andrew.bell.ia at gmail.com]

From andrew.bell.ia at gmail.com  Tue Feb  2 09:45:15 2016
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 2 Feb 2016 11:45:15 -0600
Subject: [pdal] Build pdal with python 3
In-Reply-To: <trinity-dbec5c6d-d7a2-4255-a9f0-06fbd1495777-1454402415145@3capp-gmx-bs35>
References: <1477365087.15718.1454349792568.JavaMail.administrator@malf.nabble.com>
 <724D5F8B-A565-47FD-A973-57DDE7F36275@hobu.co>
 <CACJ51z14o-gn5=W9Wh3qW3RGpKuy2DGb8A0_2Y8+ci+N8S=2+g@mail.gmail.com>
 <trinity-dbec5c6d-d7a2-4255-a9f0-06fbd1495777-1454402415145@3capp-gmx-bs35>
Message-ID: <CACJ51z24zXCGP3_z3Jt-L51qUsyAxTg1dSg1oarYbVCAf+KD1A@mail.gmail.com>

On Tue, Feb 2, 2016 at 2:40 AM, FE <flatearth at gmx.net> wrote:

> To my knowledge gcc on OS X is not gcc. It's a link to Apple LLVM which
> has a different versioning than original LLVM.
>

Yes, sorry.  It seems to be reporting the compiler version with which your
python was built, I think.

Still don't understand why you wouldn't have cstdint in the standard
location.

On my system it's in
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1/cstdint

You can verify your search path with:

programargs $ echo | gcc -Wp,-v -x c++ - -fsyntax-only

Which for me yields:

clang -cc1 version 7.0.0 based upon LLVM 3.7.0svn default target
x86_64-apple-darwin14.5.0
ignoring nonexistent directory "/usr/include/c++/v1"
#include "..." search starts here:
#include <...> search starts here:
 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../include/c++/v1
 /usr/local/include
 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/7.0.0/include
 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include
 /usr/include
 /System/Library/Frameworks (framework directory)
 /Library/Frameworks (framework directory)
End of search list.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160202/056e9594/attachment.html>

From brad.chambers at gmail.com  Tue Feb  2 11:06:26 2016
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Tue, 02 Feb 2016 19:06:26 +0000
Subject: [pdal] PCL filters in PDAL
In-Reply-To: <CAPkJWLVz0Z-uDGXsYkdn7ZVUGjUTh6QKpr3jUy244Au8r77CYw@mail.gmail.com>
References: <CAPkJWLVz0Z-uDGXsYkdn7ZVUGjUTh6QKpr3jUy244Au8r77CYw@mail.gmail.com>
Message-ID: <CAJyqqPz0DBRrgy3Tab4kOGdG=FfFeD_Ytk5vucjse7EveuFd1w@mail.gmail.com>

I'd recommend taking a look at the range filter for more generic
dimensional filtering. PCL, and the PCLBlock filter in particular, lock us
into predefined point types, where height isn't accounted for. I can send a
more concrete example later this afternoon.

Brad

On Tue, Feb 2, 2016, 11:02 Stephen Mather <stephen at smathermather.com> wrote:

> I am wondering if PCL filters in PDAL can be used on alternate dimensions?
> In my case, Height (above ground) as calculated with the height filter is
> the dimension in question.
>
> This is my passthrough JSON:
>
> ```
> {
>     "pipeline":
>     {
>         "name": "PassThroughExample",
>         "filters":
>         [
>             {
>                 "name": "PassThrough",
>                 "setFilterFieldName": "Height",
>                 "setFilterLimits":
>                 {
>                     "min": 0.5,
>                     "max": 5
>                 }
>             }
>         ]
>     }
> }
> ```
>
> And I am running in docker. Here's my crude and confused BASH wrapper
> script to which I pass all files matching a find:
>
> ```
> #!/bin/bash
> pathname="${1%/*}"
> name=`basename $1 .bpf`
>
> docker run -v $pathname:/data pdal/master pdal pcl -i //data/"$name".bpf
> -p //data/5.0.filter.json -o //data/"$name"_5.0.bpf;
> ```
> This will work of course if my setFilterFieldName is Z, but not Height (no
> matter the capitalization.
>
> Thanks in advance,
> Best,
> Steve
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160202/c308db71/attachment.html>

From kreve at sdfe.dk  Mon Feb  8 06:17:27 2016
From: kreve at sdfe.dk (Kristian Evers)
Date: Mon, 8 Feb 2016 14:17:27 +0000
Subject: [pdal] Bug in readers.gdal?
Message-ID: <2E885BB293AF0448A0181138489E9A0E5276FE11@S000014.PROD.SITAD.DK>

Hi.

I am  trying to map a tif-file to a las-file. So far I have had no luck with it and I suspect there's a bug in the gdal-reader somewhere. I'm using a pipeline xml with filters.ferry to map the first band of the tif-file as the Z-value in the output las-file. After running the pipeline I get a las-file where all Z-values are zero. Am I correct in assuming that this is unexpected behavior?

Here's the pipeline description:

C:\Temp\pdal_gdal_reader>cat tif2las.xml
<?xml version="1.0"?>
<Pipeline version="1.0">
    <Writer type="writers.las">
        <Option name="filename">
            out.las
        </Option>
        <Filter type="filters.ferry">
            <Option name="dimensions">
                band-1=Z
            </Option>
            <Reader type="readers.gdal">
                <Option name="filename">
                    dtm_1km_6172_717.tif
                </Option>
            </Reader>
        </Filter>
    </Writer>
</Pipeline>

And the the tif-file has the following info, tif2las.xml:

C:\Temp\pdal_gdal_reader>gdalinfo dtm_1km_6172_717.tif
Driver: GTiff/GeoTIFF
Files: dtm_1km_6172_717.tif
Size is 2500, 2500
Coordinate System is:
PROJCS["ETRS89 / UTM zone 32N",
    GEOGCS["ETRS89",
        DATUM["European_Terrestrial_Reference_System_1989",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6258"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4258"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",9],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","25832"]]
Origin = (717000.000000000000000,6173000.000000000000000)
Pixel Size = (0.400000000000000,-0.400000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=DEFLATE
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  717000.000, 6173000.000) ( 12d26'57.82"E, 55d39'15.45"N)
Lower Left  (  717000.000, 6172000.000) ( 12d26'54.98"E, 55d38'43.16"N)
Upper Right (  718000.000, 6173000.000) ( 12d27'54.93"E, 55d39'13.84"N)
Lower Right (  718000.000, 6172000.000) ( 12d27'52.07"E, 55d38'41.55"N)
Center      (  717500.000, 6172500.000) ( 12d27'24.95"E, 55d38'58.50"N)
Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
  NoData Value=-9999


Running
C:\Temp\pdal_gdal_reader>pdal pipeline tif2las.xml

produces out.las that has Z=0 for all points:

C:\Temp\pdal_gdal_reader>pdal info --summary out.las
{
  "filename": "out.las",
  "pdal_version": "1.1.0 (git-version: 64ca76)",
  "summary":
  {
    "bounds":
    {
      "X":
      {
        "max": 717999.8,
        "min": 717000.2
      },
      "Y":
      {
        "max": 6172999.8,
        "min": 6172000.2
      },
      "Z":
      {
        "max": 0,
        "min": 0
      }
    },
    "dimensions": "X, Y, Z, Intensity, ReturnNumber, NumberOfReturns, ScanDirectionFlag, EdgeOfFlightLine, Classification, ScanAngleRank, UserData, PointSourceId, GpsTime, Red, Green, Blue",
    "num_points": 6250000,
    "spatial_reference": "PROJCS[\"ETRS89 / UTM zone 32N\",GEOGCS[\"ETRS89\",DATUM[\"European_Terrestrial_Reference_System_1989\",SPHEROID[\"GRS 1980\",6378137,298.2572221010002,AUTHORITY[\"EPSG\",\"7019\"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[\"EPSG\",\"6258\"]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433],AUTHORITY[\"EPSG\",\"4258\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",9],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AUTHORITY[\"EPSG\",\"25832\"]]"
  }
}

It seems like the band-1 dimension is not read properly in this case. Is this in fact a bug, or am I creating my pipeline incorrectly?
I am using PDAL version 1.1.0 (git-version: 64ca76) from OSGeo4W.

Another thing I've run into is that pdal crashes when trying to apply the same filter via the command line like this:

C:\Temp\pdal_gdal_reader>pdal translate -f ferry --filters.ferry.dimensions=band-1=Z -r readers.gdal -w writers.las -i dtm_1km_6172_717.tif -o out.las

Probably a separate issue though.

Thanks in advance,

Kristian Evers
Geophysicist
Geographical references
kreve at gst.dk<mailto:kreve at gst.dk>

Danish Ministry of Energy, Utilities and Climate
Agency for Data Supply and Efficiency


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160208/6b080d5a/attachment.html>

From andrew.bell.ia at gmail.com  Mon Feb  8 06:51:14 2016
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 8 Feb 2016 08:51:14 -0600
Subject: [pdal] Bug in readers.gdal?
In-Reply-To: <2E885BB293AF0448A0181138489E9A0E5276FE11@S000014.PROD.SITAD.DK>
References: <2E885BB293AF0448A0181138489E9A0E5276FE11@S000014.PROD.SITAD.DK>
Message-ID: <CACJ51z0_UqfJWtZiJtkWBFGO4VvFBTuZPd_JMFkdCStpwKO08w@mail.gmail.com>

It looks like the specification to the ferry filter is incorrect.  It
should be Z=band-1, rather than the other way around.

Hope this helps.

On Mon, Feb 8, 2016 at 8:17 AM, Kristian Evers <kreve at sdfe.dk> wrote:

> Hi.
>
>
>
> I am  trying to map a tif-file to a las-file. So far I have had no luck
> with it and I suspect there’s a bug in the gdal-reader somewhere. I’m using
> a pipeline xml with filters.ferry to map the first band of the tif-file as
> the Z-value in the output las-file. After running the pipeline I get a
> las-file where all Z-values are zero. Am I correct in assuming that this is
> unexpected behavior?
>
>
>
> Here’s the pipeline description:
>
>
>
> C:\Temp\pdal_gdal_reader>cat tif2las.xml
>
> <?xml version="1.0"?>
>
> <Pipeline version="1.0">
>
>     <Writer type="writers.las">
>
>         <Option name="filename">
>
>             out.las
>
>         </Option>
>
>         <Filter type="filters.ferry">
>
>             <Option name="dimensions">
>
>                 band-1=Z
>
>             </Option>
>
>             <Reader type="readers.gdal">
>
>                 <Option name="filename">
>
>                     dtm_1km_6172_717.tif
>
>                 </Option>
>
>             </Reader>
>
>         </Filter>
>
>     </Writer>
>
> </Pipeline>
>
>
>
> And the the tif-file has the following info, tif2las.xml:
>
>
>
> C:\Temp\pdal_gdal_reader>gdalinfo dtm_1km_6172_717.tif
>
> Driver: GTiff/GeoTIFF
>
> Files: dtm_1km_6172_717.tif
>
> Size is 2500, 2500
>
> Coordinate System is:
>
> PROJCS["ETRS89 / UTM zone 32N",
>
>     GEOGCS["ETRS89",
>
>         DATUM["European_Terrestrial_Reference_System_1989",
>
>             SPHEROID["GRS 1980",6378137,298.2572221010002,
>
>                 AUTHORITY["EPSG","7019"]],
>
>             TOWGS84[0,0,0,0,0,0,0],
>
>             AUTHORITY["EPSG","6258"]],
>
>         PRIMEM["Greenwich",0],
>
>         UNIT["degree",0.0174532925199433],
>
>         AUTHORITY["EPSG","4258"]],
>
>     PROJECTION["Transverse_Mercator"],
>
>     PARAMETER["latitude_of_origin",0],
>
>     PARAMETER["central_meridian",9],
>
>     PARAMETER["scale_factor",0.9996],
>
>     PARAMETER["false_easting",500000],
>
>     PARAMETER["false_northing",0],
>
>     UNIT["metre",1,
>
>         AUTHORITY["EPSG","9001"]],
>
>     AUTHORITY["EPSG","25832"]]
>
> Origin = (717000.000000000000000,6173000.000000000000000)
>
> Pixel Size = (0.400000000000000,-0.400000000000000)
>
> Metadata:
>
>   AREA_OR_POINT=Area
>
> Image Structure Metadata:
>
>   COMPRESSION=DEFLATE
>
>   INTERLEAVE=BAND
>
> Corner Coordinates:
>
> Upper Left  (  717000.000, 6173000.000) ( 12d26'57.82"E, 55d39'15.45"N)
>
> Lower Left  (  717000.000, 6172000.000) ( 12d26'54.98"E, 55d38'43.16"N)
>
> Upper Right (  718000.000, 6173000.000) ( 12d27'54.93"E, 55d39'13.84"N)
>
> Lower Right (  718000.000, 6172000.000) ( 12d27'52.07"E, 55d38'41.55"N)
>
> Center      (  717500.000, 6172500.000) ( 12d27'24.95"E, 55d38'58.50"N)
>
> Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
>
>   NoData Value=-9999
>
>
>
>
>
> Running
>
> C:\Temp\pdal_gdal_reader>pdal pipeline tif2las.xml
>
>
>
> produces out.las that has Z=0 for all points:
>
>
>
> C:\Temp\pdal_gdal_reader>pdal info --summary out.las
>
> {
>
>   "filename": "out.las",
>
>   "pdal_version": "1.1.0 (git-version: 64ca76)",
>
>   "summary":
>
>   {
>
>     "bounds":
>
>     {
>
>       "X":
>
>       {
>
>         "max": 717999.8,
>
>         "min": 717000.2
>
>       },
>
>       "Y":
>
>       {
>
>         "max": 6172999.8,
>
>         "min": 6172000.2
>
>       },
>
>       "Z":
>
>       {
>
>         "max": 0,
>
>         "min": 0
>
>       }
>
>     },
>
>     "dimensions": "X, Y, Z, Intensity, ReturnNumber, NumberOfReturns,
> ScanDirectionFlag, EdgeOfFlightLine, Classification, ScanAngleRank,
> UserData, PointSourceId, GpsTime, Red, Green, Blue",
>
>     "num_points": 6250000,
>
>     "spatial_reference": "PROJCS[\"ETRS89 / UTM zone
> 32N\",GEOGCS[\"ETRS89\",DATUM[\"European_Terrestrial_Reference_System_1989\",SPHEROID[\"GRS
> 1980\",6378137,298.2572221010002,AUTHORITY[\"EPSG\",\"7019\"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[\"EPSG\",\"6258\"]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433],AUTHORITY[\"EPSG\",\"4258\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",9],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AUTHORITY[\"EPSG\",\"25832\"]]"
>
>   }
>
> }
>
>
>
> It seems like the band-1 dimension is not read properly in this case. Is
> this in fact a bug, or am I creating my pipeline incorrectly?
>
> I am using PDAL version 1.1.0 (git-version: 64ca76) from OSGeo4W.
>
>
>
> Another thing I’ve run into is that pdal crashes when trying to apply the
> same filter via the command line like this:
>
>
>
> C:\Temp\pdal_gdal_reader>pdal translate -f ferry
> --filters.ferry.dimensions=band-1=Z -r readers.gdal -w writers.las -i
> dtm_1km_6172_717.tif -o out.las
>
>
>
> Probably a separate issue though.
>
>
>
> Thanks in advance,
>
>
>
> *Kristian Evers*
> Geophysicist
> Geographical references
> kreve at gst.dk
>
> Danish Ministry of Energy, Utilities and Climate
> Agency for Data Supply and Efficiency
>
>
>
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160208/48968e28/attachment-0001.html>

From andrew.bell.ia at gmail.com  Mon Feb  8 07:11:21 2016
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 8 Feb 2016 09:11:21 -0600
Subject: [pdal] Bug in readers.gdal?
In-Reply-To: <2E885BB293AF0448A0181138489E9A0E5276FEA3@S000014.PROD.SITAD.DK>
References: <2E885BB293AF0448A0181138489E9A0E5276FE11@S000014.PROD.SITAD.DK>
 <CACJ51z0_UqfJWtZiJtkWBFGO4VvFBTuZPd_JMFkdCStpwKO08w@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5276FEA3@S000014.PROD.SITAD.DK>
Message-ID: <CACJ51z04sy1+T9enKdMGhg3bAwxOcUT9hF6VcB6YJDJJi7G32w@mail.gmail.com>

You're correct.  Looks like there's an error in the documentation for the
GDAL reader.

On Mon, Feb 8, 2016 at 9:06 AM, Kristian Evers <kreve at sdfe.dk> wrote:

> I thought the same, but
>
>
>
> C:\Temp\pdal_gdal_reader>pdal pipeline tif2las.xml
>
> PDAL: Can't ferry dimension 'Z'. Dimension doesn't exist.
>
>
>
> is what I get when I change the dimension option in the pipeline to
> Z=band-1.
>
>
>
> And the help in the command line also suggests otherwise (not sure if the
> format is different in a pipeline file though):
>
>
>
> C:\Temp\pdal_gdal_reader>pdal --options=filters.ferry
>
> filters.ferry
>
>
> --------------------------------------------------------------------------------
>
> dimensions
>
>     Dimensions to copy (<in>=<out>,...)
>
>
>
> So band-1 would have to be the in-dimension and the out-dimension Z. Maybe
> the in and out dimensions have been mixed up internally?
>
>
>
> Kristian
>
>
>
> *Fra:* Andrew Bell [mailto:andrew.bell.ia at gmail.com]
> *Sendt:* mandag 08. februar 2016 15:51
> *Til:* Kristian Evers
> *Cc:* pdal at lists.osgeo.org
> *Emne:* Re: [pdal] Bug in readers.gdal?
>
>
>
> It looks like the specification to the ferry filter is incorrect.  It
> should be Z=band-1, rather than the other way around.
>
>
>
> Hope this helps.
>
>
>
> On Mon, Feb 8, 2016 at 8:17 AM, Kristian Evers <kreve at sdfe.dk> wrote:
>
> Hi.
>
>
>
> I am  trying to map a tif-file to a las-file. So far I have had no luck
> with it and I suspect there’s a bug in the gdal-reader somewhere. I’m using
> a pipeline xml with filters.ferry to map the first band of the tif-file as
> the Z-value in the output las-file. After running the pipeline I get a
> las-file where all Z-values are zero. Am I correct in assuming that this is
> unexpected behavior?
>
>
>
> Here’s the pipeline description:
>
>
>
> C:\Temp\pdal_gdal_reader>cat tif2las.xml
>
> <?xml version="1.0"?>
>
> <Pipeline version="1.0">
>
>     <Writer type="writers.las">
>
>         <Option name="filename">
>
>             out.las
>
>         </Option>
>
>         <Filter type="filters.ferry">
>
>             <Option name="dimensions">
>
>                 band-1=Z
>
>             </Option>
>
>             <Reader type="readers.gdal">
>
>                 <Option name="filename">
>
>                     dtm_1km_6172_717.tif
>
>                 </Option>
>
>             </Reader>
>
>         </Filter>
>
>     </Writer>
>
> </Pipeline>
>
>
>
> And the the tif-file has the following info, tif2las.xml:
>
>
>
> C:\Temp\pdal_gdal_reader>gdalinfo dtm_1km_6172_717.tif
>
> Driver: GTiff/GeoTIFF
>
> Files: dtm_1km_6172_717.tif
>
> Size is 2500, 2500
>
> Coordinate System is:
>
> PROJCS["ETRS89 / UTM zone 32N",
>
>     GEOGCS["ETRS89",
>
>         DATUM["European_Terrestrial_Reference_System_1989",
>
>             SPHEROID["GRS 1980",6378137,298.2572221010002,
>
>                 AUTHORITY["EPSG","7019"]],
>
>             TOWGS84[0,0,0,0,0,0,0],
>
>             AUTHORITY["EPSG","6258"]],
>
>         PRIMEM["Greenwich",0],
>
>         UNIT["degree",0.0174532925199433],
>
>         AUTHORITY["EPSG","4258"]],
>
>     PROJECTION["Transverse_Mercator"],
>
>     PARAMETER["latitude_of_origin",0],
>
>     PARAMETER["central_meridian",9],
>
>     PARAMETER["scale_factor",0.9996],
>
>     PARAMETER["false_easting",500000],
>
>     PARAMETER["false_northing",0],
>
>     UNIT["metre",1,
>
>         AUTHORITY["EPSG","9001"]],
>
>     AUTHORITY["EPSG","25832"]]
>
> Origin = (717000.000000000000000,6173000.000000000000000)
>
> Pixel Size = (0.400000000000000,-0.400000000000000)
>
> Metadata:
>
>   AREA_OR_POINT=Area
>
> Image Structure Metadata:
>
>   COMPRESSION=DEFLATE
>
>   INTERLEAVE=BAND
>
> Corner Coordinates:
>
> Upper Left  (  717000.000, 6173000.000) ( 12d26'57.82"E, 55d39'15.45"N)
>
> Lower Left  (  717000.000, 6172000.000) ( 12d26'54.98"E, 55d38'43.16"N)
>
> Upper Right (  718000.000, 6173000.000) ( 12d27'54.93"E, 55d39'13.84"N)
>
> Lower Right (  718000.000, 6172000.000) ( 12d27'52.07"E, 55d38'41.55"N)
>
> Center      (  717500.000, 6172500.000) ( 12d27'24.95"E, 55d38'58.50"N)
>
> Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
>
>   NoData Value=-9999
>
>
>
>
>
> Running
>
> C:\Temp\pdal_gdal_reader>pdal pipeline tif2las.xml
>
>
>
> produces out.las that has Z=0 for all points:
>
>
>
> C:\Temp\pdal_gdal_reader>pdal info --summary out.las
>
> {
>
>   "filename": "out.las",
>
>   "pdal_version": "1.1.0 (git-version: 64ca76)",
>
>   "summary":
>
>   {
>
>     "bounds":
>
>     {
>
>       "X":
>
>       {
>
>         "max": 717999.8,
>
>         "min": 717000.2
>
>       },
>
>       "Y":
>
>       {
>
>         "max": 6172999.8,
>
>         "min": 6172000.2
>
>       },
>
>       "Z":
>
>       {
>
>         "max": 0,
>
>         "min": 0
>
>       }
>
>     },
>
>     "dimensions": "X, Y, Z, Intensity, ReturnNumber, NumberOfReturns,
> ScanDirectionFlag, EdgeOfFlightLine, Classification, ScanAngleRank,
> UserData, PointSourceId, GpsTime, Red, Green, Blue",
>
>     "num_points": 6250000,
>
>     "spatial_reference": "PROJCS[\"ETRS89 / UTM zone
> 32N\",GEOGCS[\"ETRS89\",DATUM[\"European_Terrestrial_Reference_System_1989\",SPHEROID[\"GRS
> 1980\",6378137,298.2572221010002,AUTHORITY[\"EPSG\",\"7019\"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[\"EPSG\",\"6258\"]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433],AUTHORITY[\"EPSG\",\"4258\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",9],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AUTHORITY[\"EPSG\",\"25832\"]]"
>
>   }
>
> }
>
>
>
> It seems like the band-1 dimension is not read properly in this case. Is
> this in fact a bug, or am I creating my pipeline incorrectly?
>
> I am using PDAL version 1.1.0 (git-version: 64ca76) from OSGeo4W.
>
>
>
> Another thing I’ve run into is that pdal crashes when trying to apply the
> same filter via the command line like this:
>
>
>
> C:\Temp\pdal_gdal_reader>pdal translate -f ferry
> --filters.ferry.dimensions=band-1=Z -r readers.gdal -w writers.las -i
> dtm_1km_6172_717.tif -o out.las
>
>
>
> Probably a separate issue though.
>
>
>
> Thanks in advance,
>
>
>
> *Kristian Evers*
> Geophysicist
> Geographical references
> kreve at gst.dk
>
> Danish Ministry of Energy, Utilities and Climate
> Agency for Data Supply and Efficiency
>
>
>
>
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>
>
>
>
>
> --
>
> Andrew Bell
> andrew.bell.ia at gmail.com
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160208/bc1df39f/attachment-0001.html>

From stephen at smathermather.com  Wed Feb  3 18:23:53 2016
From: stephen at smathermather.com (Stephen Mather)
Date: Wed, 3 Feb 2016 21:23:53 -0500
Subject: [pdal] PCL filters in PDAL
In-Reply-To: <CAJyqqPz0DBRrgy3Tab4kOGdG=FfFeD_Ytk5vucjse7EveuFd1w@mail.gmail.com>
References: <CAPkJWLVz0Z-uDGXsYkdn7ZVUGjUTh6QKpr3jUy244Au8r77CYw@mail.gmail.com>
 <CAJyqqPz0DBRrgy3Tab4kOGdG=FfFeD_Ytk5vucjse7EveuFd1w@mail.gmail.com>
Message-ID: <CAPkJWLX8Lf6pCDdaU58xVPY8KY2dBWHt0WRVwzHyCZ_VbD7CnQ@mail.gmail.com>

Cool. I'll take a look.

On Tue, Feb 2, 2016 at 2:06 PM, Bradley Chambers <brad.chambers at gmail.com>
wrote:

> I'd recommend taking a look at the range filter for more generic
> dimensional filtering. PCL, and the PCLBlock filter in particular, lock us
> into predefined point types, where height isn't accounted for. I can send a
> more concrete example later this afternoon.
>
> Brad
>
> On Tue, Feb 2, 2016, 11:02 Stephen Mather <stephen at smathermather.com>
> wrote:
>
>> I am wondering if PCL filters in PDAL can be used on alternate
>> dimensions? In my case, Height (above ground) as calculated with the height
>> filter is the dimension in question.
>>
>> This is my passthrough JSON:
>>
>> ```
>> {
>>     "pipeline":
>>     {
>>         "name": "PassThroughExample",
>>         "filters":
>>         [
>>             {
>>                 "name": "PassThrough",
>>                 "setFilterFieldName": "Height",
>>                 "setFilterLimits":
>>                 {
>>                     "min": 0.5,
>>                     "max": 5
>>                 }
>>             }
>>         ]
>>     }
>> }
>> ```
>>
>> And I am running in docker. Here's my crude and confused BASH wrapper
>> script to which I pass all files matching a find:
>>
>> ```
>> #!/bin/bash
>> pathname="${1%/*}"
>> name=`basename $1 .bpf`
>>
>> docker run -v $pathname:/data pdal/master pdal pcl -i //data/"$name".bpf
>> -p //data/5.0.filter.json -o //data/"$name"_5.0.bpf;
>> ```
>> This will work of course if my setFilterFieldName is Z, but not Height
>> (no matter the capitalization.
>>
>> Thanks in advance,
>> Best,
>> Steve
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/pdal
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160203/ecf30e9b/attachment-0001.html>

From stephen at smathermather.com  Wed Feb  3 18:33:07 2016
From: stephen at smathermather.com (Stephen Mather)
Date: Wed, 3 Feb 2016 21:33:07 -0500
Subject: [pdal] PCL filters in PDAL
In-Reply-To: <CAJyqqPz0DBRrgy3Tab4kOGdG=FfFeD_Ytk5vucjse7EveuFd1w@mail.gmail.com>
References: <CAPkJWLVz0Z-uDGXsYkdn7ZVUGjUTh6QKpr3jUy244Au8r77CYw@mail.gmail.com>
 <CAJyqqPz0DBRrgy3Tab4kOGdG=FfFeD_Ytk5vucjse7EveuFd1w@mail.gmail.com>
Message-ID: <CAPkJWLVU7qdEn+jLxj=v_GnARsLy-hB+o69zM-Ecpn+P=fchRw@mail.gmail.com>

Ok, great leads here:

pdal translate 54001640PAN_heightasz.bpf 54001640PAN_heightasz_05-5.bpf -f
range --filters.range.limits="Height[0.5:5]"

And to include Bradley's offline example of calculating height on the fly
in order to filter:

pdal translate -i <input.bpf≥ -o <output.bpf> -f filters.height
filters.range --filters.range.limits="Height[0.5,5.0]"

And now when I run stats on it, it looks great:

pdal info --stats 54001640PAN_heightasz_05-5.bpf --dimensions "Height"

{

  "filename": "54001640PAN_heightasz_05-5.bpf",

  "pdal_version": "1.1.0 (git-version: 64c722)",

  "stats":

  {

    "statistic":

    [

      {

        "average": 1.759930532,

        "count": 612802,

        "maximum": 5,

        "minimum": 0.5,

        "name": "Height",

        "position": 0

      }

    ]

  }

}

Cheers!


On Tue, Feb 2, 2016 at 2:06 PM, Bradley Chambers <brad.chambers at gmail.com>
wrote:

> I'd recommend taking a look at the range filter for more generic
> dimensional filtering. PCL, and the PCLBlock filter in particular, lock us
> into predefined point types, where height isn't accounted for. I can send a
> more concrete example later this afternoon.
>
> Brad
>
> On Tue, Feb 2, 2016, 11:02 Stephen Mather <stephen at smathermather.com>
> wrote:
>
>> I am wondering if PCL filters in PDAL can be used on alternate
>> dimensions? In my case, Height (above ground) as calculated with the height
>> filter is the dimension in question.
>>
>> This is my passthrough JSON:
>>
>> ```
>> {
>>     "pipeline":
>>     {
>>         "name": "PassThroughExample",
>>         "filters":
>>         [
>>             {
>>                 "name": "PassThrough",
>>                 "setFilterFieldName": "Height",
>>                 "setFilterLimits":
>>                 {
>>                     "min": 0.5,
>>                     "max": 5
>>                 }
>>             }
>>         ]
>>     }
>> }
>> ```
>>
>> And I am running in docker. Here's my crude and confused BASH wrapper
>> script to which I pass all files matching a find:
>>
>> ```
>> #!/bin/bash
>> pathname="${1%/*}"
>> name=`basename $1 .bpf`
>>
>> docker run -v $pathname:/data pdal/master pdal pcl -i //data/"$name".bpf
>> -p //data/5.0.filter.json -o //data/"$name"_5.0.bpf;
>> ```
>> This will work of course if my setFilterFieldName is Z, but not Height
>> (no matter the capitalization.
>>
>> Thanks in advance,
>> Best,
>> Steve
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/pdal
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160203/65123fb6/attachment-0001.html>

From kreve at sdfe.dk  Mon Feb  8 07:06:28 2016
From: kreve at sdfe.dk (Kristian Evers)
Date: Mon, 8 Feb 2016 15:06:28 +0000
Subject: [pdal] Bug in readers.gdal?
In-Reply-To: <CACJ51z0_UqfJWtZiJtkWBFGO4VvFBTuZPd_JMFkdCStpwKO08w@mail.gmail.com>
References: <2E885BB293AF0448A0181138489E9A0E5276FE11@S000014.PROD.SITAD.DK>
 <CACJ51z0_UqfJWtZiJtkWBFGO4VvFBTuZPd_JMFkdCStpwKO08w@mail.gmail.com>
Message-ID: <2E885BB293AF0448A0181138489E9A0E5276FEA3@S000014.PROD.SITAD.DK>

I thought the same, but

C:\Temp\pdal_gdal_reader>pdal pipeline tif2las.xml
PDAL: Can't ferry dimension 'Z'. Dimension doesn't exist.

is what I get when I change the dimension option in the pipeline to Z=band-1.

And the help in the command line also suggests otherwise (not sure if the format is different in a pipeline file though):

C:\Temp\pdal_gdal_reader>pdal --options=filters.ferry
filters.ferry
--------------------------------------------------------------------------------
dimensions
    Dimensions to copy (<in>=<out>,...)

So band-1 would have to be the in-dimension and the out-dimension Z. Maybe the in and out dimensions have been mixed up internally?

Kristian

Fra: Andrew Bell [mailto:andrew.bell.ia at gmail.com]
Sendt: mandag 08. februar 2016 15:51
Til: Kristian Evers
Cc: pdal at lists.osgeo.org
Emne: Re: [pdal] Bug in readers.gdal?

It looks like the specification to the ferry filter is incorrect.  It should be Z=band-1, rather than the other way around.

Hope this helps.

On Mon, Feb 8, 2016 at 8:17 AM, Kristian Evers <kreve at sdfe.dk<mailto:kreve at sdfe.dk>> wrote:
Hi.

I am  trying to map a tif-file to a las-file. So far I have had no luck with it and I suspect there’s a bug in the gdal-reader somewhere. I’m using a pipeline xml with filters.ferry to map the first band of the tif-file as the Z-value in the output las-file. After running the pipeline I get a las-file where all Z-values are zero. Am I correct in assuming that this is unexpected behavior?

Here’s the pipeline description:

C:\Temp\pdal_gdal_reader>cat tif2las.xml
<?xml version="1.0"?>
<Pipeline version="1.0">
    <Writer type="writers.las">
        <Option name="filename">
            out.las
        </Option>
        <Filter type="filters.ferry">
            <Option name="dimensions">
                band-1=Z
            </Option>
            <Reader type="readers.gdal">
                <Option name="filename">
                    dtm_1km_6172_717.tif
                </Option>
            </Reader>
        </Filter>
    </Writer>
</Pipeline>

And the the tif-file has the following info, tif2las.xml:

C:\Temp\pdal_gdal_reader>gdalinfo dtm_1km_6172_717.tif
Driver: GTiff/GeoTIFF
Files: dtm_1km_6172_717.tif
Size is 2500, 2500
Coordinate System is:
PROJCS["ETRS89 / UTM zone 32N",
    GEOGCS["ETRS89",
        DATUM["European_Terrestrial_Reference_System_1989",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6258"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4258"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",9],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","25832"]]
Origin = (717000.000000000000000,6173000.000000000000000)
Pixel Size = (0.400000000000000,-0.400000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=DEFLATE
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  717000.000, 6173000.000) ( 12d26'57.82"E, 55d39'15.45"N)
Lower Left  (  717000.000, 6172000.000) ( 12d26'54.98"E, 55d38'43.16"N)
Upper Right (  718000.000, 6173000.000) ( 12d27'54.93"E, 55d39'13.84"N)
Lower Right (  718000.000, 6172000.000) ( 12d27'52.07"E, 55d38'41.55"N)
Center      (  717500.000, 6172500.000) ( 12d27'24.95"E, 55d38'58.50"N)
Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
  NoData Value=-9999


Running
C:\Temp\pdal_gdal_reader>pdal pipeline tif2las.xml

produces out.las that has Z=0 for all points:

C:\Temp\pdal_gdal_reader>pdal info --summary out.las
{
  "filename": "out.las",
  "pdal_version": "1.1.0 (git-version: 64ca76)",
  "summary":
  {
    "bounds":
    {
      "X":
      {
        "max": 717999.8,
        "min": 717000.2
      },
      "Y":
      {
        "max": 6172999.8,
        "min": 6172000.2
      },
      "Z":
      {
        "max": 0,
        "min": 0
      }
    },
    "dimensions": "X, Y, Z, Intensity, ReturnNumber, NumberOfReturns, ScanDirectionFlag, EdgeOfFlightLine, Classification, ScanAngleRank, UserData, PointSourceId, GpsTime, Red, Green, Blue",
    "num_points": 6250000,
    "spatial_reference": "PROJCS[\"ETRS89 / UTM zone 32N\",GEOGCS[\"ETRS89\",DATUM[\"European_Terrestrial_Reference_System_1989\",SPHEROID[\"GRS 1980\",6378137,298.2572221010002,AUTHORITY[\"EPSG\",\"7019\"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[\"EPSG\",\"6258\"]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433],AUTHORITY[\"EPSG\",\"4258\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",9],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AUTHORITY[\"EPSG\",\"25832\"]]"
  }
}

It seems like the band-1 dimension is not read properly in this case. Is this in fact a bug, or am I creating my pipeline incorrectly?
I am using PDAL version 1.1.0 (git-version: 64ca76) from OSGeo4W.

Another thing I’ve run into is that pdal crashes when trying to apply the same filter via the command line like this:

C:\Temp\pdal_gdal_reader>pdal translate -f ferry --filters.ferry.dimensions=band-1=Z -r readers.gdal -w writers.las -i dtm_1km_6172_717.tif -o out.las

Probably a separate issue though.

Thanks in advance,

Kristian Evers
Geophysicist
Geographical references
kreve at gst.dk<mailto:kreve at gst.dk>

Danish Ministry of Energy, Utilities and Climate
Agency for Data Supply and Efficiency



_______________________________________________
pdal mailing list
pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/pdal



--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160208/b188c73e/attachment-0001.html>

From kreve at sdfe.dk  Mon Feb  8 07:20:27 2016
From: kreve at sdfe.dk (Kristian Evers)
Date: Mon, 8 Feb 2016 15:20:27 +0000
Subject: [pdal] Bug in readers.gdal?
In-Reply-To: <CACJ51z04sy1+T9enKdMGhg3bAwxOcUT9hF6VcB6YJDJJi7G32w@mail.gmail.com>
References: <2E885BB293AF0448A0181138489E9A0E5276FE11@S000014.PROD.SITAD.DK>
 <CACJ51z0_UqfJWtZiJtkWBFGO4VvFBTuZPd_JMFkdCStpwKO08w@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5276FEA3@S000014.PROD.SITAD.DK>
 <CACJ51z04sy1+T9enKdMGhg3bAwxOcUT9hF6VcB6YJDJJi7G32w@mail.gmail.com>
Message-ID: <2E885BB293AF0448A0181138489E9A0E5276FEC5@S000014.PROD.SITAD.DK>

Okay. I haven’t looked into the code but my feeling is that it is more than just an error in the documentation. If the problem was only the docs I would expect the pipeline to work when switching the in/out dimensions. Would you agree?

Kristian


Fra: Andrew Bell [mailto:andrew.bell.ia at gmail.com]
Sendt: mandag 08. februar 2016 16:11
Til: Kristian Evers
Cc: pdal at lists.osgeo.org
Emne: Re: [pdal] Bug in readers.gdal?

You're correct.  Looks like there's an error in the documentation for the GDAL reader.

On Mon, Feb 8, 2016 at 9:06 AM, Kristian Evers <kreve at sdfe.dk<mailto:kreve at sdfe.dk>> wrote:
I thought the same, but

C:\Temp\pdal_gdal_reader>pdal pipeline tif2las.xml
PDAL: Can't ferry dimension 'Z'. Dimension doesn't exist.

is what I get when I change the dimension option in the pipeline to Z=band-1.

And the help in the command line also suggests otherwise (not sure if the format is different in a pipeline file though):

C:\Temp\pdal_gdal_reader>pdal --options=filters.ferry
filters.ferry
--------------------------------------------------------------------------------
dimensions
    Dimensions to copy (<in>=<out>,...)

So band-1 would have to be the in-dimension and the out-dimension Z. Maybe the in and out dimensions have been mixed up internally?

Kristian

Fra: Andrew Bell [mailto:andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>]
Sendt: mandag 08. februar 2016 15:51
Til: Kristian Evers
Cc: pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
Emne: Re: [pdal] Bug in readers.gdal?

It looks like the specification to the ferry filter is incorrect.  It should be Z=band-1, rather than the other way around.

Hope this helps.

On Mon, Feb 8, 2016 at 8:17 AM, Kristian Evers <kreve at sdfe.dk<mailto:kreve at sdfe.dk>> wrote:
Hi.

I am  trying to map a tif-file to a las-file. So far I have had no luck with it and I suspect there’s a bug in the gdal-reader somewhere. I’m using a pipeline xml with filters.ferry to map the first band of the tif-file as the Z-value in the output las-file. After running the pipeline I get a las-file where all Z-values are zero. Am I correct in assuming that this is unexpected behavior?

Here’s the pipeline description:

C:\Temp\pdal_gdal_reader>cat tif2las.xml
<?xml version="1.0"?>
<Pipeline version="1.0">
    <Writer type="writers.las">
        <Option name="filename">
            out.las
        </Option>
        <Filter type="filters.ferry">
            <Option name="dimensions">
                band-1=Z
            </Option>
            <Reader type="readers.gdal">
                <Option name="filename">
                    dtm_1km_6172_717.tif
                </Option>
            </Reader>
        </Filter>
    </Writer>
</Pipeline>

And the the tif-file has the following info, tif2las.xml:

C:\Temp\pdal_gdal_reader>gdalinfo dtm_1km_6172_717.tif
Driver: GTiff/GeoTIFF
Files: dtm_1km_6172_717.tif
Size is 2500, 2500
Coordinate System is:
PROJCS["ETRS89 / UTM zone 32N",
    GEOGCS["ETRS89",
        DATUM["European_Terrestrial_Reference_System_1989",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6258"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4258"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",9],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","25832"]]
Origin = (717000.000000000000000,6173000.000000000000000)
Pixel Size = (0.400000000000000,-0.400000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=DEFLATE
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  717000.000, 6173000.000) ( 12d26'57.82"E, 55d39'15.45"N)
Lower Left  (  717000.000, 6172000.000) ( 12d26'54.98"E, 55d38'43.16"N)
Upper Right (  718000.000, 6173000.000) ( 12d27'54.93"E, 55d39'13.84"N)
Lower Right (  718000.000, 6172000.000) ( 12d27'52.07"E, 55d38'41.55"N)
Center      (  717500.000, 6172500.000) ( 12d27'24.95"E, 55d38'58.50"N)
Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
  NoData Value=-9999


Running
C:\Temp\pdal_gdal_reader>pdal pipeline tif2las.xml

produces out.las that has Z=0 for all points:

C:\Temp\pdal_gdal_reader>pdal info --summary out.las
{
  "filename": "out.las",
  "pdal_version": "1.1.0 (git-version: 64ca76)",
  "summary":
  {
    "bounds":
    {
      "X":
      {
        "max": 717999.8,
        "min": 717000.2
      },
      "Y":
      {
        "max": 6172999.8,
        "min": 6172000.2
      },
      "Z":
      {
        "max": 0,
        "min": 0
      }
    },
    "dimensions": "X, Y, Z, Intensity, ReturnNumber, NumberOfReturns, ScanDirectionFlag, EdgeOfFlightLine, Classification, ScanAngleRank, UserData, PointSourceId, GpsTime, Red, Green, Blue",
    "num_points": 6250000,
    "spatial_reference": "PROJCS[\"ETRS89 / UTM zone 32N\",GEOGCS[\"ETRS89\",DATUM[\"European_Terrestrial_Reference_System_1989\",SPHEROID[\"GRS 1980\",6378137,298.2572221010002,AUTHORITY[\"EPSG\",\"7019\"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[\"EPSG\",\"6258\"]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433],AUTHORITY[\"EPSG\",\"4258\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",9],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AUTHORITY[\"EPSG\",\"25832\"]]"
  }
}

It seems like the band-1 dimension is not read properly in this case. Is this in fact a bug, or am I creating my pipeline incorrectly?
I am using PDAL version 1.1.0 (git-version: 64ca76) from OSGeo4W.

Another thing I’ve run into is that pdal crashes when trying to apply the same filter via the command line like this:

C:\Temp\pdal_gdal_reader>pdal translate -f ferry --filters.ferry.dimensions=band-1=Z -r readers.gdal -w writers.las -i dtm_1km_6172_717.tif -o out.las

Probably a separate issue though.

Thanks in advance,

Kristian Evers
Geophysicist
Geographical references
kreve at gst.dk<mailto:kreve at gst.dk>

Danish Ministry of Energy, Utilities and Climate
Agency for Data Supply and Efficiency



_______________________________________________
pdal mailing list
pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/pdal



--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>



--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160208/1531a6d6/attachment-0001.html>

From andrew.bell.ia at gmail.com  Mon Feb  8 07:22:37 2016
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 8 Feb 2016 09:22:37 -0600
Subject: [pdal] Bug in readers.gdal?
In-Reply-To: <2E885BB293AF0448A0181138489E9A0E5276FEC5@S000014.PROD.SITAD.DK>
References: <2E885BB293AF0448A0181138489E9A0E5276FE11@S000014.PROD.SITAD.DK>
 <CACJ51z0_UqfJWtZiJtkWBFGO4VvFBTuZPd_JMFkdCStpwKO08w@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5276FEA3@S000014.PROD.SITAD.DK>
 <CACJ51z04sy1+T9enKdMGhg3bAwxOcUT9hF6VcB6YJDJJi7G32w@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5276FEC5@S000014.PROD.SITAD.DK>
Message-ID: <CACJ51z3Ak1YZsbJZzJ26Vp3bXRkkVtg+0ZmszumDD3CpwjP7gw@mail.gmail.com>

At this point I don't know if anything is wrong or not, but I do know that
the documentation was in error.

On Mon, Feb 8, 2016 at 9:20 AM, Kristian Evers <kreve at sdfe.dk> wrote:

> Okay. I haven’t looked into the code but my feeling is that it is more
> than just an error in the documentation. If the problem was only the docs I
> would expect the pipeline to work when switching the in/out dimensions.
> Would you agree?
>
>
>
> Kristian
>
>
>
>
>
> *Fra:* Andrew Bell [mailto:andrew.bell.ia at gmail.com]
> *Sendt:* mandag 08. februar 2016 16:11
>
> *Til:* Kristian Evers
> *Cc:* pdal at lists.osgeo.org
> *Emne:* Re: [pdal] Bug in readers.gdal?
>
>
>
> You're correct.  Looks like there's an error in the documentation for the
> GDAL reader.
>
>
>
> On Mon, Feb 8, 2016 at 9:06 AM, Kristian Evers <kreve at sdfe.dk> wrote:
>
> I thought the same, but
>
>
>
> C:\Temp\pdal_gdal_reader>pdal pipeline tif2las.xml
>
> PDAL: Can't ferry dimension 'Z'. Dimension doesn't exist.
>
>
>
> is what I get when I change the dimension option in the pipeline to
> Z=band-1.
>
>
>
> And the help in the command line also suggests otherwise (not sure if the
> format is different in a pipeline file though):
>
>
>
> C:\Temp\pdal_gdal_reader>pdal --options=filters.ferry
>
> filters.ferry
>
>
> --------------------------------------------------------------------------------
>
> dimensions
>
>     Dimensions to copy (<in>=<out>,...)
>
>
>
> So band-1 would have to be the in-dimension and the out-dimension Z. Maybe
> the in and out dimensions have been mixed up internally?
>
>
>
> Kristian
>
>
>
> *Fra:* Andrew Bell [mailto:andrew.bell.ia at gmail.com]
> *Sendt:* mandag 08. februar 2016 15:51
> *Til:* Kristian Evers
> *Cc:* pdal at lists.osgeo.org
> *Emne:* Re: [pdal] Bug in readers.gdal?
>
>
>
> It looks like the specification to the ferry filter is incorrect.  It
> should be Z=band-1, rather than the other way around.
>
>
>
> Hope this helps.
>
>
>
> On Mon, Feb 8, 2016 at 8:17 AM, Kristian Evers <kreve at sdfe.dk> wrote:
>
> Hi.
>
>
>
> I am  trying to map a tif-file to a las-file. So far I have had no luck
> with it and I suspect there’s a bug in the gdal-reader somewhere. I’m using
> a pipeline xml with filters.ferry to map the first band of the tif-file as
> the Z-value in the output las-file. After running the pipeline I get a
> las-file where all Z-values are zero. Am I correct in assuming that this is
> unexpected behavior?
>
>
>
> Here’s the pipeline description:
>
>
>
> C:\Temp\pdal_gdal_reader>cat tif2las.xml
>
> <?xml version="1.0"?>
>
> <Pipeline version="1.0">
>
>     <Writer type="writers.las">
>
>         <Option name="filename">
>
>             out.las
>
>         </Option>
>
>         <Filter type="filters.ferry">
>
>             <Option name="dimensions">
>
>                 band-1=Z
>
>             </Option>
>
>             <Reader type="readers.gdal">
>
>                 <Option name="filename">
>
>                     dtm_1km_6172_717.tif
>
>                 </Option>
>
>             </Reader>
>
>         </Filter>
>
>     </Writer>
>
> </Pipeline>
>
>
>
> And the the tif-file has the following info, tif2las.xml:
>
>
>
> C:\Temp\pdal_gdal_reader>gdalinfo dtm_1km_6172_717.tif
>
> Driver: GTiff/GeoTIFF
>
> Files: dtm_1km_6172_717.tif
>
> Size is 2500, 2500
>
> Coordinate System is:
>
> PROJCS["ETRS89 / UTM zone 32N",
>
>     GEOGCS["ETRS89",
>
>         DATUM["European_Terrestrial_Reference_System_1989",
>
>             SPHEROID["GRS 1980",6378137,298.2572221010002,
>
>                 AUTHORITY["EPSG","7019"]],
>
>             TOWGS84[0,0,0,0,0,0,0],
>
>             AUTHORITY["EPSG","6258"]],
>
>         PRIMEM["Greenwich",0],
>
>         UNIT["degree",0.0174532925199433],
>
>         AUTHORITY["EPSG","4258"]],
>
>     PROJECTION["Transverse_Mercator"],
>
>     PARAMETER["latitude_of_origin",0],
>
>     PARAMETER["central_meridian",9],
>
>     PARAMETER["scale_factor",0.9996],
>
>     PARAMETER["false_easting",500000],
>
>     PARAMETER["false_northing",0],
>
>     UNIT["metre",1,
>
>         AUTHORITY["EPSG","9001"]],
>
>     AUTHORITY["EPSG","25832"]]
>
> Origin = (717000.000000000000000,6173000.000000000000000)
>
> Pixel Size = (0.400000000000000,-0.400000000000000)
>
> Metadata:
>
>   AREA_OR_POINT=Area
>
> Image Structure Metadata:
>
>   COMPRESSION=DEFLATE
>
>   INTERLEAVE=BAND
>
> Corner Coordinates:
>
> Upper Left  (  717000.000, 6173000.000) ( 12d26'57.82"E, 55d39'15.45"N)
>
> Lower Left  (  717000.000, 6172000.000) ( 12d26'54.98"E, 55d38'43.16"N)
>
> Upper Right (  718000.000, 6173000.000) ( 12d27'54.93"E, 55d39'13.84"N)
>
> Lower Right (  718000.000, 6172000.000) ( 12d27'52.07"E, 55d38'41.55"N)
>
> Center      (  717500.000, 6172500.000) ( 12d27'24.95"E, 55d38'58.50"N)
>
> Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
>
>   NoData Value=-9999
>
>
>
>
>
> Running
>
> C:\Temp\pdal_gdal_reader>pdal pipeline tif2las.xml
>
>
>
> produces out.las that has Z=0 for all points:
>
>
>
> C:\Temp\pdal_gdal_reader>pdal info --summary out.las
>
> {
>
>   "filename": "out.las",
>
>   "pdal_version": "1.1.0 (git-version: 64ca76)",
>
>   "summary":
>
>   {
>
>     "bounds":
>
>     {
>
>       "X":
>
>       {
>
>         "max": 717999.8,
>
>         "min": 717000.2
>
>       },
>
>       "Y":
>
>       {
>
>         "max": 6172999.8,
>
>         "min": 6172000.2
>
>       },
>
>       "Z":
>
>       {
>
>         "max": 0,
>
>         "min": 0
>
>       }
>
>     },
>
>     "dimensions": "X, Y, Z, Intensity, ReturnNumber, NumberOfReturns,
> ScanDirectionFlag, EdgeOfFlightLine, Classification, ScanAngleRank,
> UserData, PointSourceId, GpsTime, Red, Green, Blue",
>
>     "num_points": 6250000,
>
>     "spatial_reference": "PROJCS[\"ETRS89 / UTM zone
> 32N\",GEOGCS[\"ETRS89\",DATUM[\"European_Terrestrial_Reference_System_1989\",SPHEROID[\"GRS
> 1980\",6378137,298.2572221010002,AUTHORITY[\"EPSG\",\"7019\"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[\"EPSG\",\"6258\"]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433],AUTHORITY[\"EPSG\",\"4258\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",9],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AUTHORITY[\"EPSG\",\"25832\"]]"
>
>   }
>
> }
>
>
>
> It seems like the band-1 dimension is not read properly in this case. Is
> this in fact a bug, or am I creating my pipeline incorrectly?
>
> I am using PDAL version 1.1.0 (git-version: 64ca76) from OSGeo4W.
>
>
>
> Another thing I’ve run into is that pdal crashes when trying to apply the
> same filter via the command line like this:
>
>
>
> C:\Temp\pdal_gdal_reader>pdal translate -f ferry
> --filters.ferry.dimensions=band-1=Z -r readers.gdal -w writers.las -i
> dtm_1km_6172_717.tif -o out.las
>
>
>
> Probably a separate issue though.
>
>
>
> Thanks in advance,
>
>
>
> *Kristian Evers*
> Geophysicist
> Geographical references
> kreve at gst.dk
>
> Danish Ministry of Energy, Utilities and Climate
> Agency for Data Supply and Efficiency
>
>
>
>
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>
>
>
>
>
> --
>
> Andrew Bell
> andrew.bell.ia at gmail.com
>
>
>
>
>
> --
>
> Andrew Bell
> andrew.bell.ia at gmail.com
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160208/74ec581f/attachment-0001.html>

From howard at hobu.co  Mon Feb  8 07:26:41 2016
From: howard at hobu.co (Howard Butler)
Date: Mon, 8 Feb 2016 09:26:41 -0600
Subject: [pdal] Bug in readers.gdal?
In-Reply-To: <2E885BB293AF0448A0181138489E9A0E5276FEA3@S000014.PROD.SITAD.DK>
References: <2E885BB293AF0448A0181138489E9A0E5276FE11@S000014.PROD.SITAD.DK>
 <CACJ51z0_UqfJWtZiJtkWBFGO4VvFBTuZPd_JMFkdCStpwKO08w@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5276FEA3@S000014.PROD.SITAD.DK>
Message-ID: <F917958A-65AB-4DE2-B12D-D41F06F8A2F1@hobu.co>


> On Feb 8, 2016, at 9:06 AM, Kristian Evers <kreve at sdfe.dk> wrote:
> 
> I thought the same, but
>  
> C:\Temp\pdal_gdal_reader>pdal pipeline tif2las.xml
> PDAL: Can't ferry dimension 'Z'. Dimension doesn't exist.
>  
> is what I get when I change the dimension option in the pipeline to Z=band-1.

I think no Z dimension exists, and readers.gdal or filters.ferry doesn't create one.

From andrew.bell.ia at gmail.com  Mon Feb  8 07:30:49 2016
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 8 Feb 2016 09:30:49 -0600
Subject: [pdal] Bug in readers.gdal?
In-Reply-To: <F917958A-65AB-4DE2-B12D-D41F06F8A2F1@hobu.co>
References: <2E885BB293AF0448A0181138489E9A0E5276FE11@S000014.PROD.SITAD.DK>
 <CACJ51z0_UqfJWtZiJtkWBFGO4VvFBTuZPd_JMFkdCStpwKO08w@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5276FEA3@S000014.PROD.SITAD.DK>
 <F917958A-65AB-4DE2-B12D-D41F06F8A2F1@hobu.co>
Message-ID: <CACJ51z2GW5ghSKCYsBCHpTLEy+XALUrkSGuH2qOZmZf_zCPp5A@mail.gmail.com>

The ferry filter creates dimensions as necessary.

On Mon, Feb 8, 2016 at 9:26 AM, Howard Butler <howard at hobu.co> wrote:

>
> > On Feb 8, 2016, at 9:06 AM, Kristian Evers <kreve at sdfe.dk> wrote:
> >
> > I thought the same, but
> >
> > C:\Temp\pdal_gdal_reader>pdal pipeline tif2las.xml
> > PDAL: Can't ferry dimension 'Z'. Dimension doesn't exist.
> >
> > is what I get when I change the dimension option in the pipeline to
> Z=band-1.
>
> I think no Z dimension exists, and readers.gdal or filters.ferry doesn't
> create one.




-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160208/1e948df4/attachment.html>

From andrew.bell.ia at gmail.com  Mon Feb  8 07:35:14 2016
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 8 Feb 2016 09:35:14 -0600
Subject: [pdal] Bug in readers.gdal?
In-Reply-To: <CACJ51z3Ak1YZsbJZzJ26Vp3bXRkkVtg+0ZmszumDD3CpwjP7gw@mail.gmail.com>
References: <2E885BB293AF0448A0181138489E9A0E5276FE11@S000014.PROD.SITAD.DK>
 <CACJ51z0_UqfJWtZiJtkWBFGO4VvFBTuZPd_JMFkdCStpwKO08w@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5276FEA3@S000014.PROD.SITAD.DK>
 <CACJ51z04sy1+T9enKdMGhg3bAwxOcUT9hF6VcB6YJDJJi7G32w@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5276FEC5@S000014.PROD.SITAD.DK>
 <CACJ51z3Ak1YZsbJZzJ26Vp3bXRkkVtg+0ZmszumDD3CpwjP7gw@mail.gmail.com>
Message-ID: <CACJ51z1ZsvYhxuXA5a2qQh4FdgZmjXrJuhsSRN2j92CqMfq1Ng@mail.gmail.com>

<?xml version="1.0"?>

<Pipeline version="1.0">

    <Writer type="writers.null">

        <Filter type="filters.stats">

            <Reader type="readers.gdal">

                <Option name="filename">

                    dtm_1km_6172_717.tif

                </Option>

            </Reader>

        </Filter>

    </Writer>

</Pipeline>


Try this with the command:

pdal pipeline <foo.xml>  --pipeline-serialization=foo.out

Take a look at foo.out and see what it shows for band-0 and band-1

On Mon, Feb 8, 2016 at 9:22 AM, Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

> At this point I don't know if anything is wrong or not, but I do know that
> the documentation was in error.
>
> On Mon, Feb 8, 2016 at 9:20 AM, Kristian Evers <kreve at sdfe.dk> wrote:
>
>> Okay. I haven’t looked into the code but my feeling is that it is more
>> than just an error in the documentation. If the problem was only the docs I
>> would expect the pipeline to work when switching the in/out dimensions.
>> Would you agree?
>>
>>
>>
>> Kristian
>>
>>
>>
>>
>>
>> *Fra:* Andrew Bell [mailto:andrew.bell.ia at gmail.com]
>> *Sendt:* mandag 08. februar 2016 16:11
>>
>> *Til:* Kristian Evers
>> *Cc:* pdal at lists.osgeo.org
>> *Emne:* Re: [pdal] Bug in readers.gdal?
>>
>>
>>
>> You're correct.  Looks like there's an error in the documentation for the
>> GDAL reader.
>>
>>
>>
>> On Mon, Feb 8, 2016 at 9:06 AM, Kristian Evers <kreve at sdfe.dk> wrote:
>>
>> I thought the same, but
>>
>>
>>
>> C:\Temp\pdal_gdal_reader>pdal pipeline tif2las.xml
>>
>> PDAL: Can't ferry dimension 'Z'. Dimension doesn't exist.
>>
>>
>>
>> is what I get when I change the dimension option in the pipeline to
>> Z=band-1.
>>
>>
>>
>> And the help in the command line also suggests otherwise (not sure if the
>> format is different in a pipeline file though):
>>
>>
>>
>> C:\Temp\pdal_gdal_reader>pdal --options=filters.ferry
>>
>> filters.ferry
>>
>>
>> --------------------------------------------------------------------------------
>>
>> dimensions
>>
>>     Dimensions to copy (<in>=<out>,...)
>>
>>
>>
>> So band-1 would have to be the in-dimension and the out-dimension Z.
>> Maybe the in and out dimensions have been mixed up internally?
>>
>>
>>
>> Kristian
>>
>>
>>
>> *Fra:* Andrew Bell [mailto:andrew.bell.ia at gmail.com]
>> *Sendt:* mandag 08. februar 2016 15:51
>> *Til:* Kristian Evers
>> *Cc:* pdal at lists.osgeo.org
>> *Emne:* Re: [pdal] Bug in readers.gdal?
>>
>>
>>
>> It looks like the specification to the ferry filter is incorrect.  It
>> should be Z=band-1, rather than the other way around.
>>
>>
>>
>> Hope this helps.
>>
>>
>>
>> On Mon, Feb 8, 2016 at 8:17 AM, Kristian Evers <kreve at sdfe.dk> wrote:
>>
>> Hi.
>>
>>
>>
>> I am  trying to map a tif-file to a las-file. So far I have had no luck
>> with it and I suspect there’s a bug in the gdal-reader somewhere. I’m using
>> a pipeline xml with filters.ferry to map the first band of the tif-file as
>> the Z-value in the output las-file. After running the pipeline I get a
>> las-file where all Z-values are zero. Am I correct in assuming that this is
>> unexpected behavior?
>>
>>
>>
>> Here’s the pipeline description:
>>
>>
>>
>> C:\Temp\pdal_gdal_reader>cat tif2las.xml
>>
>> <?xml version="1.0"?>
>>
>> <Pipeline version="1.0">
>>
>>     <Writer type="writers.las">
>>
>>         <Option name="filename">
>>
>>             out.las
>>
>>         </Option>
>>
>>         <Filter type="filters.ferry">
>>
>>             <Option name="dimensions">
>>
>>                 band-1=Z
>>
>>             </Option>
>>
>>             <Reader type="readers.gdal">
>>
>>                 <Option name="filename">
>>
>>                     dtm_1km_6172_717.tif
>>
>>                 </Option>
>>
>>             </Reader>
>>
>>         </Filter>
>>
>>     </Writer>
>>
>> </Pipeline>
>>
>>
>>
>> And the the tif-file has the following info, tif2las.xml:
>>
>>
>>
>> C:\Temp\pdal_gdal_reader>gdalinfo dtm_1km_6172_717.tif
>>
>> Driver: GTiff/GeoTIFF
>>
>> Files: dtm_1km_6172_717.tif
>>
>> Size is 2500, 2500
>>
>> Coordinate System is:
>>
>> PROJCS["ETRS89 / UTM zone 32N",
>>
>>     GEOGCS["ETRS89",
>>
>>         DATUM["European_Terrestrial_Reference_System_1989",
>>
>>             SPHEROID["GRS 1980",6378137,298.2572221010002,
>>
>>                 AUTHORITY["EPSG","7019"]],
>>
>>             TOWGS84[0,0,0,0,0,0,0],
>>
>>             AUTHORITY["EPSG","6258"]],
>>
>>         PRIMEM["Greenwich",0],
>>
>>         UNIT["degree",0.0174532925199433],
>>
>>         AUTHORITY["EPSG","4258"]],
>>
>>     PROJECTION["Transverse_Mercator"],
>>
>>     PARAMETER["latitude_of_origin",0],
>>
>>     PARAMETER["central_meridian",9],
>>
>>     PARAMETER["scale_factor",0.9996],
>>
>>     PARAMETER["false_easting",500000],
>>
>>     PARAMETER["false_northing",0],
>>
>>     UNIT["metre",1,
>>
>>         AUTHORITY["EPSG","9001"]],
>>
>>     AUTHORITY["EPSG","25832"]]
>>
>> Origin = (717000.000000000000000,6173000.000000000000000)
>>
>> Pixel Size = (0.400000000000000,-0.400000000000000)
>>
>> Metadata:
>>
>>   AREA_OR_POINT=Area
>>
>> Image Structure Metadata:
>>
>>   COMPRESSION=DEFLATE
>>
>>   INTERLEAVE=BAND
>>
>> Corner Coordinates:
>>
>> Upper Left  (  717000.000, 6173000.000) ( 12d26'57.82"E, 55d39'15.45"N)
>>
>> Lower Left  (  717000.000, 6172000.000) ( 12d26'54.98"E, 55d38'43.16"N)
>>
>> Upper Right (  718000.000, 6173000.000) ( 12d27'54.93"E, 55d39'13.84"N)
>>
>> Lower Right (  718000.000, 6172000.000) ( 12d27'52.07"E, 55d38'41.55"N)
>>
>> Center      (  717500.000, 6172500.000) ( 12d27'24.95"E, 55d38'58.50"N)
>>
>> Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
>>
>>   NoData Value=-9999
>>
>>
>>
>>
>>
>> Running
>>
>> C:\Temp\pdal_gdal_reader>pdal pipeline tif2las.xml
>>
>>
>>
>> produces out.las that has Z=0 for all points:
>>
>>
>>
>> C:\Temp\pdal_gdal_reader>pdal info --summary out.las
>>
>> {
>>
>>   "filename": "out.las",
>>
>>   "pdal_version": "1.1.0 (git-version: 64ca76)",
>>
>>   "summary":
>>
>>   {
>>
>>     "bounds":
>>
>>     {
>>
>>       "X":
>>
>>       {
>>
>>         "max": 717999.8,
>>
>>         "min": 717000.2
>>
>>       },
>>
>>       "Y":
>>
>>       {
>>
>>         "max": 6172999.8,
>>
>>         "min": 6172000.2
>>
>>       },
>>
>>       "Z":
>>
>>       {
>>
>>         "max": 0,
>>
>>         "min": 0
>>
>>       }
>>
>>     },
>>
>>     "dimensions": "X, Y, Z, Intensity, ReturnNumber, NumberOfReturns,
>> ScanDirectionFlag, EdgeOfFlightLine, Classification, ScanAngleRank,
>> UserData, PointSourceId, GpsTime, Red, Green, Blue",
>>
>>     "num_points": 6250000,
>>
>>     "spatial_reference": "PROJCS[\"ETRS89 / UTM zone
>> 32N\",GEOGCS[\"ETRS89\",DATUM[\"European_Terrestrial_Reference_System_1989\",SPHEROID[\"GRS
>> 1980\",6378137,298.2572221010002,AUTHORITY[\"EPSG\",\"7019\"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[\"EPSG\",\"6258\"]],PRIMEM[\"Greenwich\",0],UNIT[\"degree\",0.0174532925199433],AUTHORITY[\"EPSG\",\"4258\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\",0],PARAMETER[\"central_meridian\",9],PARAMETER[\"scale_factor\",0.9996],PARAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AUTHORITY[\"EPSG\",\"25832\"]]"
>>
>>   }
>>
>> }
>>
>>
>>
>> It seems like the band-1 dimension is not read properly in this case. Is
>> this in fact a bug, or am I creating my pipeline incorrectly?
>>
>> I am using PDAL version 1.1.0 (git-version: 64ca76) from OSGeo4W.
>>
>>
>>
>> Another thing I’ve run into is that pdal crashes when trying to apply the
>> same filter via the command line like this:
>>
>>
>>
>> C:\Temp\pdal_gdal_reader>pdal translate -f ferry
>> --filters.ferry.dimensions=band-1=Z -r readers.gdal -w writers.las -i
>> dtm_1km_6172_717.tif -o out.las
>>
>>
>>
>> Probably a separate issue though.
>>
>>
>>
>> Thanks in advance,
>>
>>
>>
>> *Kristian Evers*
>> Geophysicist
>> Geographical references
>> kreve at gst.dk
>>
>> Danish Ministry of Energy, Utilities and Climate
>> Agency for Data Supply and Efficiency
>>
>>
>>
>>
>>
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/pdal
>>
>>
>>
>>
>>
>> --
>>
>> Andrew Bell
>> andrew.bell.ia at gmail.com
>>
>>
>>
>>
>>
>> --
>>
>> Andrew Bell
>> andrew.bell.ia at gmail.com
>>
>
>
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160208/e9f0c79d/attachment-0001.html>

From kreve at sdfe.dk  Mon Feb  8 08:29:20 2016
From: kreve at sdfe.dk (Kristian Evers)
Date: Mon, 8 Feb 2016 16:29:20 +0000
Subject: [pdal] Bug in readers.gdal?
In-Reply-To: <CACJ51z1ZsvYhxuXA5a2qQh4FdgZmjXrJuhsSRN2j92CqMfq1Ng@mail.gmail.com>
References: <2E885BB293AF0448A0181138489E9A0E5276FE11@S000014.PROD.SITAD.DK>
 <CACJ51z0_UqfJWtZiJtkWBFGO4VvFBTuZPd_JMFkdCStpwKO08w@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5276FEA3@S000014.PROD.SITAD.DK>
 <CACJ51z04sy1+T9enKdMGhg3bAwxOcUT9hF6VcB6YJDJJi7G32w@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5276FEC5@S000014.PROD.SITAD.DK>
 <CACJ51z3Ak1YZsbJZzJ26Vp3bXRkkVtg+0ZmszumDD3CpwjP7gw@mail.gmail.com>
 <CACJ51z1ZsvYhxuXA5a2qQh4FdgZmjXrJuhsSRN2j92CqMfq1Ng@mail.gmail.com>
Message-ID: <2E885BB293AF0448A0181138489E9A0E5276FF57@S000014.PROD.SITAD.DK>

Here’s the output. Seems like the reader is not reading the tif properly. I have checked that the tif is not filled with zeros (see gdalinfo output below).

<?xml version="1.0" encoding="utf-8"?>
<Pipeline version="1.0">
    <Writer type="writers.null">
        <Filter type="filters.stats">
            <Metadata name="filters.stats" type="">
                <Metadata name="statistic" type="">
                    <Metadata name="average" type="double">717500</Metadata>
                    <Metadata name="count" type="nonNegativeInteger">6250000</Metadata>
                    <Metadata name="maximum" type="double">717999.8</Metadata>
                    <Metadata name="minimum" type="double">717000.2</Metadata>
                    <Metadata name="name" type="string">X</Metadata>
                    <Metadata name="position" type="nonNegativeInteger">0</Metadata>
                </Metadata>
                <Metadata name="statistic" type="">
                    <Metadata name="average" type="double">6172500</Metadata>
                    <Metadata name="count" type="nonNegativeInteger">6250000</Metadata>
                    <Metadata name="maximum" type="double">6172999.8</Metadata>
                    <Metadata name="minimum" type="double">6172000.2</Metadata>
                    <Metadata name="name" type="string">Y</Metadata>
                    <Metadata name="position" type="nonNegativeInteger">1</Metadata>
                </Metadata>
                <Metadata name="statistic" type="">
                    <Metadata name="average" type="double">0</Metadata>
                    <Metadata name="count" type="nonNegativeInteger">6250000</Metadata>
                    <Metadata name="maximum" type="double">0</Metadata>
                    <Metadata name="minimum" type="double">0</Metadata>
                    <Metadata name="name" type="string">band-1</Metadata>
                    <Metadata name="position" type="nonNegativeInteger">2</Metadata>
                </Metadata>
            </Metadata>
            <Reader type="readers.gdal">
                <Option name="filename">C:\Temp\pdal_gdal_reader/dtm_1km_6172_717.tif</Option>
                <Metadata name="readers.gdal" type="">
                    <Metadata name="comp_spatialreference" type="string">PROJCS[&quot;ETRS89 / UTM zone 32N&quot;,GEOGCS[&quot;ETRS89&quot;,DATUM[&quot;European_Terrestrial_Reference_System_1989&quot;,SPHEROID[&quot;GRS 1980&quot;,6378137,298.2572221010002,AUTHORITY[&quot;EPSG&quot;,&quot;7019&quot;]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[&quot;EPSG&quot;,&quot;6258&quot;]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;degree&quot;,0.0174532925199433],AUTHORITY[&quot;EPSG&quot;,&quot;4258&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,9],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;25832&quot;]]</Metadata>
                    <Metadata name="spatialreference" type="string">PROJCS[&quot;ETRS89 / UTM zone 32N&quot;,GEOGCS[&quot;ETRS89&quot;,DATUM[&quot;European_Terrestrial_Reference_System_1989&quot;,SPHEROID[&quot;GRS 1980&quot;,6378137,298.2572221010002,AUTHORITY[&quot;EPSG&quot;,&quot;7019&quot;]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[&quot;EPSG&quot;,&quot;6258&quot;]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;degree&quot;,0.0174532925199433],AUTHORITY[&quot;EPSG&quot;,&quot;4258&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,9],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;25832&quot;]]</Metadata>
                </Metadata>
            </Reader>
        </Filter>
    </Writer>
</Pipeline>



C:\Temp\pdal_gdal_reader>gdalinfo -stats dtm_1km_6172_717.tif
Driver: GTiff/GeoTIFF
Files: dtm_1km_6172_717.tif
       dtm_1km_6172_717.tif.aux.xml
Size is 2500, 2500
Coordinate System is:
PROJCS["ETRS89 / UTM zone 32N",
    GEOGCS["ETRS89",
        DATUM["European_Terrestrial_Reference_System_1989",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6258"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4258"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",9],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","25832"]]
Origin = (717000.000000000000000,6173000.000000000000000)
Pixel Size = (0.400000000000000,-0.400000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=DEFLATE
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  717000.000, 6173000.000) ( 12d26'57.82"E, 55d39'15.45"N)
Lower Left  (  717000.000, 6172000.000) ( 12d26'54.98"E, 55d38'43.16"N)
Upper Right (  718000.000, 6173000.000) ( 12d27'54.93"E, 55d39'13.84"N)
Lower Right (  718000.000, 6172000.000) ( 12d27'52.07"E, 55d38'41.55"N)
Center      (  717500.000, 6172500.000) ( 12d27'24.95"E, 55d38'58.50"N)
Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
  Min=5.707 Max=18.758
  Minimum=5.707, Maximum=18.758, Mean=10.309, StdDev=1.905
  NoData Value=-9999
  Metadata:
    STATISTICS_MAXIMUM=18.757970809937
    STATISTICS_MEAN=10.309048512971
    STATISTICS_MINIMUM=5.706515789032
    STATISTICS_STDDEV=1.9047452870945


Fra: Andrew Bell [mailto:andrew.bell.ia at gmail.com]
Sendt: mandag 08. februar 2016 16:35
Til: Kristian Evers
Cc: pdal at lists.osgeo.org
Emne: Re: [pdal] Bug in readers.gdal?

<?xml version="1.0"?>
<Pipeline version="1.0">
    <Writer type="writers.null">
        <Filter type="filters.stats">
            <Reader type="readers.gdal">
                <Option name="filename">
                    dtm_1km_6172_717.tif
                </Option>
            </Reader>
        </Filter>
    </Writer>
</Pipeline>

Try this with the command:

pdal pipeline <foo.xml>  --pipeline-serialization=foo.out

Take a look at foo.out and see what it shows for band-0 and band-1

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160208/456a6d6e/attachment-0001.html>

From howard at hobu.co  Mon Feb  8 08:51:25 2016
From: howard at hobu.co (Howard Butler)
Date: Mon, 8 Feb 2016 10:51:25 -0600
Subject: [pdal] Bug in readers.gdal?
In-Reply-To: <2E885BB293AF0448A0181138489E9A0E5276FF57@S000014.PROD.SITAD.DK>
References: <2E885BB293AF0448A0181138489E9A0E5276FE11@S000014.PROD.SITAD.DK>
 <CACJ51z0_UqfJWtZiJtkWBFGO4VvFBTuZPd_JMFkdCStpwKO08w@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5276FEA3@S000014.PROD.SITAD.DK>
 <CACJ51z04sy1+T9enKdMGhg3bAwxOcUT9hF6VcB6YJDJJi7G32w@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5276FEC5@S000014.PROD.SITAD.DK>
 <CACJ51z3Ak1YZsbJZzJ26Vp3bXRkkVtg+0ZmszumDD3CpwjP7gw@mail.gmail.com>
 <CACJ51z1ZsvYhxuXA5a2qQh4FdgZmjXrJuhsSRN2j92CqMfq1Ng@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5276FF57@S000014.PROD.SITAD.DK>
Message-ID: <453D2FA8-1007-4A16-8EDE-3CD8A3B74461@hobu.co>

Kristian,

> Band 1 Block=256x256 Type=Float32, ColorInterp=Gray

We must not be reading Float32 types correctly in the readers.gdal driver.

Can you post the file for us to fetch and give us a link?

Howard

From kreve at sdfe.dk  Mon Feb  8 09:05:57 2016
From: kreve at sdfe.dk (Kristian Evers)
Date: Mon, 8 Feb 2016 17:05:57 +0000
Subject: [pdal] Bug in readers.gdal?
In-Reply-To: <453D2FA8-1007-4A16-8EDE-3CD8A3B74461@hobu.co>
References: <2E885BB293AF0448A0181138489E9A0E5276FE11@S000014.PROD.SITAD.DK>
 <CACJ51z0_UqfJWtZiJtkWBFGO4VvFBTuZPd_JMFkdCStpwKO08w@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5276FEA3@S000014.PROD.SITAD.DK>
 <CACJ51z04sy1+T9enKdMGhg3bAwxOcUT9hF6VcB6YJDJJi7G32w@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5276FEC5@S000014.PROD.SITAD.DK>
 <CACJ51z3Ak1YZsbJZzJ26Vp3bXRkkVtg+0ZmszumDD3CpwjP7gw@mail.gmail.com>
 <CACJ51z1ZsvYhxuXA5a2qQh4FdgZmjXrJuhsSRN2j92CqMfq1Ng@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0E5276FF57@S000014.PROD.SITAD.DK>
 <453D2FA8-1007-4A16-8EDE-3CD8A3B74461@hobu.co>
Message-ID: <2E885BB293AF0448A0181138489E9A0E5276FF9F@S000014.PROD.SITAD.DK>

Sure thing!

https://www.dropbox.com/s/bv3j4pb51iw08pv/dtm_1km_6172_717.tif

Kristian


-----Oprindelig meddelelse-----
Fra: Howard Butler [mailto:howard at hobu.co] 
Sendt: mandag 08. februar 2016 17:51
Til: Kristian Evers
Cc: Andrew Bell; pdal at lists.osgeo.org
Emne: Re: [pdal] Bug in readers.gdal?

Kristian,

> Band 1 Block=256x256 Type=Float32, ColorInterp=Gray

We must not be reading Float32 types correctly in the readers.gdal driver.

Can you post the file for us to fetch and give us a link?

Howard

From kreve at sdfe.dk  Wed Feb 10 10:55:02 2016
From: kreve at sdfe.dk (Kristian Evers)
Date: Wed, 10 Feb 2016 18:55:02 +0000
Subject: [pdal] Bug in readers.gdal?
Message-ID: <2E885BB293AF0448A0181138489E9A0E52770918@S000014.PROD.SITAD.DK>

Sorry for not getting back to you sooner, Andrew.

I’ve rebuild PDAL so it now has your recent changes to the GDAL reader. It doesn’t look quite right to me. I’ve made a gist with some pipeline xml files and outputs from pdal info: https://gist.github.com/kbevers/22ae84f9ab60e5789587. In short, I’ve set up two pipelines that translate between tif and laz. The first pipeline is just a readers.gdal -> ferry band-1=Z -> writers.laz. The other is readers.gdal -> ferry band-1=Z -> range Z[0.0:100.0] -> writers.laz.

The output laz-files are found on dropbox: https://www.dropbox.com/s/8zyx8kka0mpr7ir/test_gdal_reader_ferry.laz and https://www.dropbox.com/s/fj35lzulu2vvgdc/test_gdal_reader_range.laz

In both files you see that not all Z-values have been read properly by the gdal reader. There is a narrow strip of data in the western part of the file that has the correct Z-values. Moving east all Z-values are zero which they obviously shouldn’t be. You see it best in test_gdal_reader_range.laz but if you inspect the other laz-file carefully you see the same.

/Kristian

Fra: Andrew Bell [mailto:andrew.bell.ia at gmail.com]
Sendt: mandag 08. februar 2016 20:59
Til: Kristian Evers
Emne: Re: [pdal] Bug in readers.gdal?

On Mon, Feb 8, 2016 at 9:20 AM, Kristian Evers <kreve at sdfe.dk<mailto:kreve at sdfe.dk>> wrote:
Okay. I haven’t looked into the code but my feeling is that it is more than just an error in the documentation. If the problem was only the docs I would expect the pipeline to work when switching the in/out dimensions. Would you agree?

I found a couple of bugs that were causing trouble with your file.  I pushed a fix to the PDAL master branch.  Please note that your file contains NODATA values.  PDAL does not currently support NODATA value, but you can use a PDAL filter to remove points that contain NODATA values if you like.

Best,

--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160210/2bb37246/attachment.html>

From andrew.bell.ia at gmail.com  Wed Feb 10 11:44:31 2016
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 10 Feb 2016 13:44:31 -0600
Subject: [pdal] Bug in readers.gdal?
In-Reply-To: <2E885BB293AF0448A0181138489E9A0E52770918@S000014.PROD.SITAD.DK>
References: <2E885BB293AF0448A0181138489E9A0E52770918@S000014.PROD.SITAD.DK>
Message-ID: <CACJ51z1YvqugXtmk-Snc+SFJd-BEvO1FevkvTWEEXhrKzvPHRQ@mail.gmail.com>

On Wed, Feb 10, 2016 at 12:55 PM, Kristian Evers <kreve at sdfe.dk> wrote:

> Sorry for not getting back to you sooner, Andrew.
>
>
>
> I’ve rebuild PDAL so it now has your recent changes to the GDAL reader. It
> doesn’t look quite right to me.
>

Thanks.

I've confirmed what you're seeing.  I'll let you know when I've made some
progress.  Thanks for the detailed report.  It was very helpful.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160210/87f5e2eb/attachment.html>

From andrew.bell.ia at gmail.com  Thu Feb 11 18:43:27 2016
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 11 Feb 2016 20:43:27 -0600
Subject: [pdal] Bug in readers.gdal?
In-Reply-To: <CACJ51z1YvqugXtmk-Snc+SFJd-BEvO1FevkvTWEEXhrKzvPHRQ@mail.gmail.com>
References: <2E885BB293AF0448A0181138489E9A0E52770918@S000014.PROD.SITAD.DK>
 <CACJ51z1YvqugXtmk-Snc+SFJd-BEvO1FevkvTWEEXhrKzvPHRQ@mail.gmail.com>
Message-ID: <CACJ51z2Xp+j__zWaG4UZhiu_jm2_3oK5FwiP6rXnDbizahOHTA@mail.gmail.com>

Hi,

I've fixed the issue with your file and now get the same value that you
were getting with gdalinfo.  I'm still looking for some small files (TIFF
would be fine) that I could use for testing.  I can create them, but if
someone already has, that would save some time.  Files with bands of
various sizes and datatypes would be ideal, so if you come across any,
please let me know.

Thanks,

On Wed, Feb 10, 2016 at 1:44 PM, Andrew Bell <andrew.bell.ia at gmail.com>
wrote:

> On Wed, Feb 10, 2016 at 12:55 PM, Kristian Evers <kreve at sdfe.dk> wrote:
>
>> Sorry for not getting back to you sooner, Andrew.
>>
>>
>>
>> I’ve rebuild PDAL so it now has your recent changes to the GDAL reader.
>> It doesn’t look quite right to me.
>>
>
-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160211/60c5d3db/attachment.html>

From metazool at fastmail.net  Sun Feb 14 05:51:19 2016
From: metazool at fastmail.net (Jo Walsh)
Date: Sun, 14 Feb 2016 13:51:19 +0000
Subject: [pdal] Can't build PDAL on debian;
 c++ warning in Ilvis2MetadataReader treated as error
Message-ID: <1455457879.2035335.520771258.201DAACA@webmail.messagingengine.com>

dear PDAL hackers, 

Thanks for your work. I'm very new to PDAL and not a C++ hacker, so I'm
a bit stumped by the following error when I try to build PDAL on debian
wheezy. Please excuse me if it turns out to be a basic configuration
thing :/

  [  4%] Building CXX object
  io/ilvis2/CMakeFiles/reader_ilvis2.dir/Ilvis2MetadataReader.cpp.o
  /home/jo/PDAL/io/ilvis2/Ilvis2MetadataReader.cpp: In member function
  ‘bool pdal::Ilvis2MetadataReader::nodeElementIs(xmlNodePtr,
  std::string)’:
  /home/jo/PDAL/io/ilvis2/Ilvis2MetadataReader.cpp:629:60: error: cast
  from type ‘const char*’ to type ‘xmlChar* {aka unsigned char*}’ casts
  away qualifiers [-Werror=cast-qual]
     return (xmlStrcmp(node->name, (xmlChar*)expected.c_str()) == 0);
                                                            ^
cc1plus: all warnings being treated as errors
io/ilvis2/CMakeFiles/reader_ilvis2.dir/build.make:77: recipe for target
'io/ilvis2/CMakeFiles/reader_ilvis2.dir/Ilvis2MetadataReader.cpp.o'
failed

I have LIBXML2. I can't see what's going wrong from this but I notice
that it's relatively new work:
https://github.com/PDAL/PDAL/blob/master/io/ilvis2/Ilvis2MetadataReader.cpp#L629

Any advice would be appreciated, I really want to play with PDAL!


-- 
  Jo Walsh
  metazool at fastmail.net

From connor at hobu.co  Sun Feb 14 06:37:56 2016
From: connor at hobu.co (Connor Manning)
Date: Sun, 14 Feb 2016 08:37:56 -0600
Subject: [pdal] Can't build PDAL on debian;
 c++ warning in Ilvis2MetadataReader treated as error
In-Reply-To: <1455457879.2035335.520771258.201DAACA@webmail.messagingengine.com>
References: <1455457879.2035335.520771258.201DAACA@webmail.messagingengine.com>
Message-ID: <CAO=Fyj+PWkRZpwdCYqhGNEtezOA-cmR+E70DUYWR9L+3CjQQ3w@mail.gmail.com>

This should be fixed in https://github.com/PDAL/PDAL/commit/57be828, so
please re-pull and try again.

On Sun, Feb 14, 2016 at 7:51 AM, Jo Walsh <metazool at fastmail.net> wrote:

> dear PDAL hackers,
>
> Thanks for your work. I'm very new to PDAL and not a C++ hacker, so I'm
> a bit stumped by the following error when I try to build PDAL on debian
> wheezy. Please excuse me if it turns out to be a basic configuration
> thing :/
>
>   [  4%] Building CXX object
>   io/ilvis2/CMakeFiles/reader_ilvis2.dir/Ilvis2MetadataReader.cpp.o
>   /home/jo/PDAL/io/ilvis2/Ilvis2MetadataReader.cpp: In member function
>   ‘bool pdal::Ilvis2MetadataReader::nodeElementIs(xmlNodePtr,
>   std::string)’:
>   /home/jo/PDAL/io/ilvis2/Ilvis2MetadataReader.cpp:629:60: error: cast
>   from type ‘const char*’ to type ‘xmlChar* {aka unsigned char*}’ casts
>   away qualifiers [-Werror=cast-qual]
>      return (xmlStrcmp(node->name, (xmlChar*)expected.c_str()) == 0);
>                                                             ^
> cc1plus: all warnings being treated as errors
> io/ilvis2/CMakeFiles/reader_ilvis2.dir/build.make:77: recipe for target
> 'io/ilvis2/CMakeFiles/reader_ilvis2.dir/Ilvis2MetadataReader.cpp.o'
> failed
>
> I have LIBXML2. I can't see what's going wrong from this but I notice
> that it's relatively new work:
>
> https://github.com/PDAL/PDAL/blob/master/io/ilvis2/Ilvis2MetadataReader.cpp#L629
>
> Any advice would be appreciated, I really want to play with PDAL!
>
>
> --
>   Jo Walsh
>   metazool at fastmail.net
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160214/1d608901/attachment.html>

From metazool at fastmail.net  Sun Feb 14 07:38:33 2016
From: metazool at fastmail.net (Jo Walsh)
Date: Sun, 14 Feb 2016 15:38:33 +0000
Subject: [pdal] Can't build PDAL on debian;
 c++ warning in Ilvis2MetadataReader treated as error
In-Reply-To: <CAO=Fyj+PWkRZpwdCYqhGNEtezOA-cmR+E70DUYWR9L+3CjQQ3w@mail.gmail.com>
References: <1455457879.2035335.520771258.201DAACA@webmail.messagingengine.com>
 <CAO=Fyj+PWkRZpwdCYqhGNEtezOA-cmR+E70DUYWR9L+3CjQQ3w@mail.gmail.com>
Message-ID: <1455464313.1802207.520819954.402DA674@webmail.messagingengine.com>

Fantastic! That worked, and my PDAL build is rattling happily away :)

Thanks Connor!

On Sun, Feb 14, 2016, at 02:37 PM, Connor Manning wrote:
> This should be fixed in https://github.com/PDAL/PDAL/commit/57be828,
> so please re-pull and try again.
>
> On Sun, Feb 14, 2016 at 7:51 AM, Jo Walsh
> <metazool at fastmail.net> wrote:
>> dear PDAL hackers,
>>
>>
Thanks for your work. I'm very new to PDAL and not a C++ hacker, so I'm
>>
a bit stumped by the following error when I try to build PDAL on debian
>>
wheezy. Please excuse me if it turns out to be a basic configuration
>>
thing :/
>>
>>
[  4%] Building CXX object
>>
io/ilvis2/CMakeFiles/reader_ilvis2.dir/Ilvis2MetadataReader.cpp.o
>>
/home/jo/PDAL/io/ilvis2/Ilvis2MetadataReader.cpp: In member function
>>
‘bool pdal::Ilvis2MetadataReader::nodeElementIs(xmlNodePtr,
>>
std::string)’:
>>
/home/jo/PDAL/io/ilvis2/Ilvis2MetadataReader.cpp:629:60: error: cast
>>
from type ‘const char*’ to type ‘xmlChar* {aka unsigned char*}’ casts
>>
away qualifiers [-Werror=cast-qual]
>>
return (xmlStrcmp(node->name, (xmlChar*)expected.c_str()) == 0);
>>
^
>>
cc1plus: all warnings being treated as errors
>>
io/ilvis2/CMakeFiles/reader_ilvis2.dir/build.make:77: recipe for target
>>
'io/ilvis2/CMakeFiles/reader_ilvis2.dir/Ilvis2MetadataReader.cpp.o'
>>
failed
>>
>>
I have LIBXML2. I can't see what's going wrong from this but I notice
>>
that it's relatively new work:
>> https://github.com/PDAL/PDAL/blob/master/io/ilvis2/Ilvis2MetadataReader.cpp#L629
>>
>>
Any advice would be appreciated, I really want to play with PDAL!
>>
>>
>>
--
>> 
  Jo Walsh
>> metazool at fastmail.net
>> 
_______________________________________________
>> 
pdal mailing list
>> pdal at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/pdal
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160214/1428b26e/attachment.html>

From howard at hobu.co  Sun Feb 14 07:39:51 2016
From: howard at hobu.co (Howard Butler)
Date: Sun, 14 Feb 2016 09:39:51 -0600
Subject: [pdal] Can't build PDAL on debian;
	c++ warning in Ilvis2MetadataReader treated as error
In-Reply-To: <1455464313.1802207.520819954.402DA674@webmail.messagingengine.com>
References: <1455457879.2035335.520771258.201DAACA@webmail.messagingengine.com>
 <CAO=Fyj+PWkRZpwdCYqhGNEtezOA-cmR+E70DUYWR9L+3CjQQ3w@mail.gmail.com>
 <1455464313.1802207.520819954.402DA674@webmail.messagingengine.com>
Message-ID: <C31CA939-F842-4D52-AD2F-FB90D64898BA@hobu.co>

Jo,

Has whomever is in charge of the UK LiDAR data released actual point clouds yet?

Howard

> On Feb 14, 2016, at 9:38 AM, Jo Walsh <metazool at fastmail.net> wrote:
> 
> Fantastic! That worked, and my PDAL build is rattling happily away :)
>  
> Thanks Connor!
>  
> On Sun, Feb 14, 2016, at 02:37 PM, Connor Manning wrote:
>> This should be fixed in https://github.com/PDAL/PDAL/commit/57be828, so please re-pull and try again.
>>  
>> On Sun, Feb 14, 2016 at 7:51 AM, Jo Walsh <metazool at fastmail.net> wrote:
>> dear PDAL hackers,
>>  
>> Thanks for your work. I'm very new to PDAL and not a C++ hacker, so I'm
>> a bit stumped by the following error when I try to build PDAL on debian
>> wheezy. Please excuse me if it turns out to be a basic configuration
>> thing :/
>>  
>>   [  4%] Building CXX object
>>   io/ilvis2/CMakeFiles/reader_ilvis2.dir/Ilvis2MetadataReader.cpp.o
>>   /home/jo/PDAL/io/ilvis2/Ilvis2MetadataReader.cpp: In member function
>>   ‘bool pdal::Ilvis2MetadataReader::nodeElementIs(xmlNodePtr,
>>   std::string)’:
>>   /home/jo/PDAL/io/ilvis2/Ilvis2MetadataReader.cpp:629:60: error: cast
>>   from type ‘const char*’ to type ‘xmlChar* {aka unsigned char*}’ casts
>>   away qualifiers [-Werror=cast-qual]
>>      return (xmlStrcmp(node->name, (xmlChar*)expected.c_str()) == 0);
>>                                                             ^
>> cc1plus: all warnings being treated as errors
>> io/ilvis2/CMakeFiles/reader_ilvis2.dir/build.make:77: recipe for target
>> 'io/ilvis2/CMakeFiles/reader_ilvis2.dir/Ilvis2MetadataReader.cpp.o'
>> failed
>>  
>> I have LIBXML2. I can't see what's going wrong from this but I notice
>> that it's relatively new work:
>> https://github.com/PDAL/PDAL/blob/master/io/ilvis2/Ilvis2MetadataReader.cpp#L629
>>  
>> Any advice would be appreciated, I really want to play with PDAL!
>> 
>> 
>> --
>>   Jo Walsh
>> metazool at fastmail.net
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/pdal
>  
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal


From metazool at fastmail.net  Sun Feb 14 07:45:28 2016
From: metazool at fastmail.net (Jo Walsh)
Date: Sun, 14 Feb 2016 15:45:28 +0000
Subject: [pdal] Can't build PDAL on debian;
 c++ warning in Ilvis2MetadataReader treated as error
In-Reply-To: <C31CA939-F842-4D52-AD2F-FB90D64898BA@hobu.co>
References: <1455457879.2035335.520771258.201DAACA@webmail.messagingengine.com>
 <CAO=Fyj+PWkRZpwdCYqhGNEtezOA-cmR+E70DUYWR9L+3CjQQ3w@mail.gmail.com>
 <1455464313.1802207.520819954.402DA674@webmail.messagingengine.com>
 <C31CA939-F842-4D52-AD2F-FB90D64898BA@hobu.co>
Message-ID: <1455464728.1803059.520822602.16D757C6@webmail.messagingengine.com>


On Sun, Feb 14, 2016, at 03:39 PM, Howard Butler wrote: 
> Has whomever is in charge of the UK LiDAR data released actual point
> clouds yet?

It "will be available by June 2016" is the best news i've seen ... :/ 
https://environmentagency.blog.gov.uk/2015/06/16/free-mapping-data-will-elevate-flood-risk-knowledge/#comment-65361 

I can try following up with Owen Boswarva, he'll have the inside track
on progress.

Note that the release will only cover England and Wales, not the whole
of the UK :(



From mateusz at loskot.net  Tue Feb 16 09:31:01 2016
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 16 Feb 2016 18:31:01 +0100
Subject: [pdal] LNK1104: cannot open file
	pdalboost_filesystem-vc110-mt-gd-1_60.lib
Message-ID: <CABUeae8kSQe+WvsmXxYm_ZdKJQ94NLcf=_YjiOsM+enMy2FEqQ@mail.gmail.com>

Hi,

I'm building PDAL, 64-bit target using VS2015 on Windows 10.
I have installed required OSGeo4W packages.

CMake reports the following configuration (build.bat is my custom script):

===============================================
D:\dev\PDAL>build.bat 64
A subdirectory or file build64 already exists.
-- Found GDAL: c:/OSGeo4W64/lib/gdal_i.lib (Required is at least
version "1.9.0")
-- Looking for include file pthread.h
-- Looking for include file pthread.h - not found
-- Found Threads: TRUE
-- Found ZLIB: c:/OSGeo4W64/lib/zlib.lib (found version "1.2.8")
-- Found PythonInterp: C:/Python34x86/python.exe (found version "3.4.3")
--
-- The following features have been enabled:

 * PDAL application , the PDAL command line application
 * Unit tests , PDAL unit tests

-- The following OPTIONAL packages have been found:

 * PostgreSQL
 * GeoTIFF (required version >= 1.3.0)
 * PythonInterp

-- The following REQUIRED packages have been found:

 * GDAL (required version >= 1.9.0)
   Provides general purpose raster, vector, and reference system support
 * GEOS (required version >= 3.3)
   Provides general purpose geometry support
 * ZLIB
   Compression support in BPF
 * Threads , The thread library of the system

-- The following features have been disabled:

 * Bash completion , completion for PDAL command line
 * Attribute plugin , apply attributes to a subset of points
 * CPD plugin , run Coherent Point Drift on two datasets
 * GeoWave plugin , Read and Write data using GeoWave
 * Greyhound plugin , read points from a Greyhound server
 * Hexbin plugin , determine boundary and density of a point cloud
 * Icebridge plugin , read data in the Icebridge format
 * Matlab plugin , write data to a .mat file
 * MrSID plugin , read data in the MrSID format
 * NITF plugin , read/write LAS data wrapped in NITF
 * PCL plugin , provides PCL-based readers, writers, filters, and kernels
 * PostgreSQL PointCloud plugin , read/write PostgreSQL PointCloud objects
 * SQLite plugin , read/write SQLite objects
 * RiVLib plugin , read data in the RXP format
 * Python plugin , add features that depend on python

-- The following RECOMMENDED packages have not been found:

 * LASzip
   Provides LASzip compression

-- Configuring done
-- Generating done
-- Build files have been written to: D:/dev/PDAL/build64
===============================================


Next, attempt to build using VS2015 IDE reports linker error which
I'm not sure how to understand as I see no such .lib specified
in any of generated .vcxproj files.

1>------ Build started: Project: pdal_util, Configuration: Debug x64 ------
1>LINK : fatal error LNK1104: cannot open file
'pdalboost_filesystem-vc110-mt-gd-1_60.lib'
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========

Could anyone help me how to work around it?

Best regards,
-- 
Mateusz Łoskot, http://mateusz.loskot.net

From howard at hobu.co  Tue Feb 16 09:32:59 2016
From: howard at hobu.co (Howard Butler)
Date: Tue, 16 Feb 2016 11:32:59 -0600
Subject: [pdal] LNK1104: cannot open file
	pdalboost_filesystem-vc110-mt-gd-1_60.lib
In-Reply-To: <CABUeae8kSQe+WvsmXxYm_ZdKJQ94NLcf=_YjiOsM+enMy2FEqQ@mail.gmail.com>
References: <CABUeae8kSQe+WvsmXxYm_ZdKJQ94NLcf=_YjiOsM+enMy2FEqQ@mail.gmail.com>
Message-ID: <4527A02F-6976-4E7C-B38E-D8188C28B61C@hobu.co>


> On Feb 16, 2016, at 11:31 AM, Mateusz Loskot <mateusz at loskot.net> wrote:
> 
> 1>------ Build started: Project: pdal_util, Configuration: Debug x64 ------
> 1>LINK : fatal error LNK1104: cannot open file
> 'pdalboost_filesystem-vc110-mt-gd-1_60.lib'
> ========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========

The latest master branch has removed all boost dependency. 

Something seems to still be picking it up though.

Howard

From mateusz at loskot.net  Tue Feb 16 09:53:39 2016
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 16 Feb 2016 18:53:39 +0100
Subject: [pdal] LNK1104: cannot open file
	pdalboost_filesystem-vc110-mt-gd-1_60.lib
In-Reply-To: <4527A02F-6976-4E7C-B38E-D8188C28B61C@hobu.co>
References: <CABUeae8kSQe+WvsmXxYm_ZdKJQ94NLcf=_YjiOsM+enMy2FEqQ@mail.gmail.com>
 <4527A02F-6976-4E7C-B38E-D8188C28B61C@hobu.co>
Message-ID: <CABUeae9yX=XyzSvJjWTj2FB9Waw17nrNpzS0xRybhFo-iOFM3A@mail.gmail.com>

On 16 February 2016 at 18:32, Howard Butler <howard at hobu.co> wrote:
>
>> On Feb 16, 2016, at 11:31 AM, Mateusz Loskot <mateusz at loskot.net> wrote:
>>
>> 1>------ Build started: Project: pdal_util, Configuration: Debug x64 ------
>> 1>LINK : fatal error LNK1104: cannot open file
>> 'pdalboost_filesystem-vc110-mt-gd-1_60.lib'
>> ========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========
>
> The latest master branch has removed all boost dependency.
>
> Something seems to still be picking it up though.

I suspect, this [1] definition is part of the trouble:

        add_definitions(-DBOOST_LIB_TOOLSET="vc110")

[1] https://github.com/PDAL/PDAL/blob/5b5a7a01b576257fa2e1f807a89a7db9d5aa0957/cmake/win32_compiler_options.cmake#L22


Best regards,
-- 
Mateusz Łoskot, http://mateusz.loskot.net

From howard at hobu.co  Tue Feb 16 13:38:46 2016
From: howard at hobu.co (Howard Butler)
Date: Tue, 16 Feb 2016 15:38:46 -0600
Subject: [pdal] LNK1104: cannot open file
	pdalboost_filesystem-vc110-mt-gd-1_60.lib
In-Reply-To: <CABUeae9yX=XyzSvJjWTj2FB9Waw17nrNpzS0xRybhFo-iOFM3A@mail.gmail.com>
References: <CABUeae8kSQe+WvsmXxYm_ZdKJQ94NLcf=_YjiOsM+enMy2FEqQ@mail.gmail.com>
 <4527A02F-6976-4E7C-B38E-D8188C28B61C@hobu.co>
 <CABUeae9yX=XyzSvJjWTj2FB9Waw17nrNpzS0xRybhFo-iOFM3A@mail.gmail.com>
Message-ID: <5BD67882-4D58-432A-8748-BE3909470C59@hobu.co>


> On Feb 16, 2016, at 11:53 AM, Mateusz Loskot <mateusz at loskot.net> wrote:
> 
> I suspect, this [1] definition is part of the trouble:
> 
>        add_definitions(-DBOOST_LIB_TOOLSET="vc110")
> 
> [1] https://github.com/PDAL/PDAL/blob/5b5a7a01b576257fa2e1f807a89a7db9d5aa0957/cmake/win32_compiler_options.cmake#L22
> 

Fix attempt pushed. Thanks for the report!

From mateusz at loskot.net  Wed Feb 17 04:22:42 2016
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 17 Feb 2016 13:22:42 +0100
Subject: [pdal] LNK1104: cannot open file
	pdalboost_filesystem-vc110-mt-gd-1_60.lib
In-Reply-To: <5BD67882-4D58-432A-8748-BE3909470C59@hobu.co>
References: <CABUeae8kSQe+WvsmXxYm_ZdKJQ94NLcf=_YjiOsM+enMy2FEqQ@mail.gmail.com>
 <4527A02F-6976-4E7C-B38E-D8188C28B61C@hobu.co>
 <CABUeae9yX=XyzSvJjWTj2FB9Waw17nrNpzS0xRybhFo-iOFM3A@mail.gmail.com>
 <5BD67882-4D58-432A-8748-BE3909470C59@hobu.co>
Message-ID: <CABUeae92ur7zgFgrtoD7n=ixth7LZpcw=wRNmmW_CTS=8KK8pw@mail.gmail.com>

On 16 February 2016 at 22:38, Howard Butler <howard at hobu.co> wrote:
>> On Feb 16, 2016, at 11:53 AM, Mateusz Loskot <mateusz at loskot.net> wrote:
>>
>> I suspect, this [1] definition is part of the trouble:
>>
>>        add_definitions(-DBOOST_LIB_TOOLSET="vc110")
>>
>> [1] https://github.com/PDAL/PDAL/blob/5b5a7a01b576257fa2e1f807a89a7db9d5aa0957/cmake/win32_compiler_options.cmake#L22
>
>
> Fix attempt pushed. Thanks for the report!

The fix was incomplete.
Here is patch which solves the linking error for me
https://github.com/PDAL/PDAL/pull/1126

Best regards,
-- 
Mateusz Łoskot, http://mateusz.loskot.net

From mateusz at loskot.net  Wed Feb 17 05:58:23 2016
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 17 Feb 2016 14:58:23 +0100
Subject: [pdal] LNK1104: cannot open file
	pdalboost_filesystem-vc110-mt-gd-1_60.lib
In-Reply-To: <CABUeae92ur7zgFgrtoD7n=ixth7LZpcw=wRNmmW_CTS=8KK8pw@mail.gmail.com>
References: <CABUeae8kSQe+WvsmXxYm_ZdKJQ94NLcf=_YjiOsM+enMy2FEqQ@mail.gmail.com>
 <4527A02F-6976-4E7C-B38E-D8188C28B61C@hobu.co>
 <CABUeae9yX=XyzSvJjWTj2FB9Waw17nrNpzS0xRybhFo-iOFM3A@mail.gmail.com>
 <5BD67882-4D58-432A-8748-BE3909470C59@hobu.co>
 <CABUeae92ur7zgFgrtoD7n=ixth7LZpcw=wRNmmW_CTS=8KK8pw@mail.gmail.com>
Message-ID: <CABUeae9kQq7nL+T4m8V03M90mxj0PzPLGo9tdhLygvpM1tH=4A@mail.gmail.com>

On 17 February 2016 at 13:22, Mateusz Loskot <mateusz at loskot.net> wrote:
> On 16 February 2016 at 22:38, Howard Butler <howard at hobu.co> wrote:
>>> On Feb 16, 2016, at 11:53 AM, Mateusz Loskot <mateusz at loskot.net> wrote:
>>>
>>> I suspect, this [1] definition is part of the trouble:
>>>
>>>        add_definitions(-DBOOST_LIB_TOOLSET="vc110")
>>>
>>> [1] https://github.com/PDAL/PDAL/blob/5b5a7a01b576257fa2e1f807a89a7db9d5aa0957/cmake/win32_compiler_options.cmake#L22
>>
>>
>> Fix attempt pushed. Thanks for the report!
>
> The fix was incomplete.
> Here is patch which solves the linking error for me
> https://github.com/PDAL/PDAL/pull/1126

Since the VS2015 build requires a couple more fixes,
I collected them all here
https://github.com/PDAL/PDAL/issues/1128

Best regards,
-- 
Mateusz Łoskot, http://mateusz.loskot.net

From stephen at smathermather.com  Wed Feb 17 19:05:24 2016
From: stephen at smathermather.com (Stephen Mather)
Date: Wed, 17 Feb 2016 22:05:24 -0500
Subject: [pdal] Compilation error with PCL
Message-ID: <CAPkJWLWGjErfJdFtOKdjDqDq8vhR3Fx6N4asM4McniSp+AE6Mg@mail.gmail.com>

So, I like the docker instance, but I've found if I throw 40 cores of
docker at a problem, and then try to kill them, docker gets fubared
beyond recognition... .

I probably should have built a new machine. Instead, I'm trying to
compile PDAL so I can run it natively. :)

I built the following libraries:
gdal, geotiff, proj.4, libxml2, Points2Grid, Hexer, Nitro, LASzip,
laz-perf, PCL

then a little cmake from my build directory:

cmake -DWITH_GEOTIFF=ON -DWITH_LASZIP=ON
-DBUILD_PLUGIN_PGPOINTCLOUD=ON -DBUILD_PLUGIN_HEXBIN=ON
-DBUILD_PLUGIN_PCL=ON -DBUILD_PLUGIN_ATTRIBUTE=ON  ../.


[ 53%] Built target pdal_filters_chipper_test

cc1plus: error: unrecognized command line option "-Wno-c99-extensions"
[-Werror]

cc1plus: all warnings being treated as errors

make[2]: *** [plugins/pcl/CMakeFiles/pdal_plugin_filter_ground.dir/
filters/GroundFilter.cpp.o]
Error 1

make[1]: *** [plugins/pcl/CMakeFiles/pdal_plugin_filter_ground.dir/all]
Error 2

cc1plus: error: unrecognized command line option "-Wno-c99-extensions"
[-Werror]

cc1plus: all warnings being treated as errors

etc.

Any hunch what I'm doing wrong?

Thanks,
Best,
Steve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160217/46f72505/attachment.html>

From mateusz at loskot.net  Thu Feb 18 00:55:55 2016
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 18 Feb 2016 09:55:55 +0100
Subject: [pdal] Compilation error with PCL
In-Reply-To: <CAPkJWLWGjErfJdFtOKdjDqDq8vhR3Fx6N4asM4McniSp+AE6Mg@mail.gmail.com>
References: <CAPkJWLWGjErfJdFtOKdjDqDq8vhR3Fx6N4asM4McniSp+AE6Mg@mail.gmail.com>
Message-ID: <CABUeae_=Siz0jbFic5GbsT5bSKTC3s-ffOaKdzDq22fGqzeM=g@mail.gmail.com>

On 18 February 2016 at 04:05, Stephen Mather <stephen at smathermather.com> wrote:
>
> cc1plus: error: unrecognized command line option "-Wno-c99-extensions"

AFAIK, -Wno-c99-extensions is clang-specific option.
I guess, you are building with GCC, right?

Perhaps clearing it from plugins\pcl\CMakeLists.txt may help.
The CMakeLists.txt may need to also test for GCC vs clang,
not just Windows.

Best regards,
-- 
Mateusz Łoskot, http://mateusz.loskot.net

From flatearth at gmx.net  Thu Feb 18 02:00:58 2016
From: flatearth at gmx.net (FE)
Date: Thu, 18 Feb 2016 11:00:58 +0100
Subject: [pdal] pdal merge ignores --scale and --offset
Message-ID: <trinity-3fe4cc21-d8c1-4055-9a47-acabe5ed75a4-1455789658447@3capp-gmx-bs54>

Hi,

pdal merge command seems to ignore --scale and --offset options. With other commands such as ground or translate the same options work perfectly.

I've also tested filters.merge with the pipeline command. Again, when using filters.merge the --scale and --offset options are ignored. The las file written is always standard scale 0.1 without offset.

Anybody could help with this?


From andrew.bell.ia at gmail.com  Thu Feb 18 05:32:19 2016
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 18 Feb 2016 07:32:19 -0600
Subject: [pdal] pdal merge ignores --scale and --offset
In-Reply-To: <trinity-3fe4cc21-d8c1-4055-9a47-acabe5ed75a4-1455789658447@3capp-gmx-bs54>
References: <trinity-3fe4cc21-d8c1-4055-9a47-acabe5ed75a4-1455789658447@3capp-gmx-bs54>
Message-ID: <CACJ51z26==N=jCUAgULuQTtgXnHq2exmiRJ8ar6PgxGpDmLJrA@mail.gmail.com>

I'll make this change.  For now you should be able to use
"--writers.las.scale_x", "--writers.las.scale_y", etc.


On Thu, Feb 18, 2016 at 4:00 AM, FE <flatearth at gmx.net> wrote:
> Hi,
>
> pdal merge command seems to ignore --scale and --offset options. With other commands such as ground or translate the same options work perfectly.
>
> I've also tested filters.merge with the pipeline command. Again, when using filters.merge the --scale and --offset options are ignored. The las file written is always standard scale 0.1 without offset.
>
> Anybody could help with this?
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal



-- 
Andrew Bell
andrew.bell.ia at gmail.com

From andrew.bell.ia at gmail.com  Thu Feb 18 05:43:09 2016
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 18 Feb 2016 07:43:09 -0600
Subject: [pdal] Compilation error with PCL
In-Reply-To: <CABUeae_=Siz0jbFic5GbsT5bSKTC3s-ffOaKdzDq22fGqzeM=g@mail.gmail.com>
References: <CAPkJWLWGjErfJdFtOKdjDqDq8vhR3Fx6N4asM4McniSp+AE6Mg@mail.gmail.com>
 <CABUeae_=Siz0jbFic5GbsT5bSKTC3s-ffOaKdzDq22fGqzeM=g@mail.gmail.com>
Message-ID: <CACJ51z01W3yFS9c4UHZAspws2YT=Q4NOBpX4fberwYE22RdAeQ@mail.gmail.com>

We used to build with both Clang and GCC in Travis, but I guess we
stopped using GCC?  I'll fix.


On Thu, Feb 18, 2016 at 2:55 AM, Mateusz Loskot <mateusz at loskot.net> wrote:
> On 18 February 2016 at 04:05, Stephen Mather <stephen at smathermather.com> wrote:
>>
>> cc1plus: error: unrecognized command line option "-Wno-c99-extensions"
>
> AFAIK, -Wno-c99-extensions is clang-specific option.
> I guess, you are building with GCC, right?
>
> Perhaps clearing it from plugins\pcl\CMakeLists.txt may help.
> The CMakeLists.txt may need to also test for GCC vs clang,
> not just Windows.
>
> Best regards,
> --
> Mateusz Łoskot, http://mateusz.loskot.net
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal



-- 
Andrew Bell
andrew.bell.ia at gmail.com

From howard at hobu.co  Thu Feb 18 06:44:03 2016
From: howard at hobu.co (Howard Butler)
Date: Thu, 18 Feb 2016 08:44:03 -0600
Subject: [pdal] Compilation error with PCL
In-Reply-To: <CACJ51z01W3yFS9c4UHZAspws2YT=Q4NOBpX4fberwYE22RdAeQ@mail.gmail.com>
References: <CAPkJWLWGjErfJdFtOKdjDqDq8vhR3Fx6N4asM4McniSp+AE6Mg@mail.gmail.com>
 <CABUeae_=Siz0jbFic5GbsT5bSKTC3s-ffOaKdzDq22fGqzeM=g@mail.gmail.com>
 <CACJ51z01W3yFS9c4UHZAspws2YT=Q4NOBpX4fberwYE22RdAeQ@mail.gmail.com>
Message-ID: <F7F7305F-8472-486E-8E73-FC15B279ECD4@hobu.co>


> On Feb 18, 2016, at 7:43 AM, Andrew Bell <andrew.bell.ia at gmail.com> wrote:
> 
> We used to build with both Clang and GCC in Travis, but I guess we
> stopped using GCC? 

Yes, I turned this off because our matrix took like 30 minutes to run. We get back a report in about 12 minutes as is right now.

Howard


From andrew.bell.ia at gmail.com  Thu Feb 18 07:31:10 2016
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 18 Feb 2016 09:31:10 -0600
Subject: [pdal] Compilation error with PCL
In-Reply-To: <F7F7305F-8472-486E-8E73-FC15B279ECD4@hobu.co>
References: <CAPkJWLWGjErfJdFtOKdjDqDq8vhR3Fx6N4asM4McniSp+AE6Mg@mail.gmail.com>
 <CABUeae_=Siz0jbFic5GbsT5bSKTC3s-ffOaKdzDq22fGqzeM=g@mail.gmail.com>
 <CACJ51z01W3yFS9c4UHZAspws2YT=Q4NOBpX4fberwYE22RdAeQ@mail.gmail.com>
 <F7F7305F-8472-486E-8E73-FC15B279ECD4@hobu.co>
Message-ID: <CACJ51z1UMFSE+9Mgpz=fSr7r+0YKCB40ru_UQJq6bbbtienzqQ@mail.gmail.com>

Maybe we should always run with all the options, but both GCC and
Clang?  Or can we schedule a run, say, once a day that used the other
compiler?

On Thu, Feb 18, 2016 at 8:44 AM, Howard Butler <howard at hobu.co> wrote:
>
>> On Feb 18, 2016, at 7:43 AM, Andrew Bell <andrew.bell.ia at gmail.com> wrote:
>>
>> We used to build with both Clang and GCC in Travis, but I guess we
>> stopped using GCC?
>
> Yes, I turned this off because our matrix took like 30 minutes to run. We get back a report in about 12 minutes as is right now.
>
> Howard
>



-- 
Andrew Bell
andrew.bell.ia at gmail.com

From howard at hobu.co  Thu Feb 18 07:34:33 2016
From: howard at hobu.co (Howard Butler)
Date: Thu, 18 Feb 2016 09:34:33 -0600
Subject: [pdal] Compilation error with PCL
In-Reply-To: <CACJ51z1UMFSE+9Mgpz=fSr7r+0YKCB40ru_UQJq6bbbtienzqQ@mail.gmail.com>
References: <CAPkJWLWGjErfJdFtOKdjDqDq8vhR3Fx6N4asM4McniSp+AE6Mg@mail.gmail.com>
 <CABUeae_=Siz0jbFic5GbsT5bSKTC3s-ffOaKdzDq22fGqzeM=g@mail.gmail.com>
 <CACJ51z01W3yFS9c4UHZAspws2YT=Q4NOBpX4fberwYE22RdAeQ@mail.gmail.com>
 <F7F7305F-8472-486E-8E73-FC15B279ECD4@hobu.co>
 <CACJ51z1UMFSE+9Mgpz=fSr7r+0YKCB40ru_UQJq6bbbtienzqQ@mail.gmail.com>
Message-ID: <50EAF822-8008-482A-B76D-74217AA4552C@hobu.co>


> On Feb 18, 2016, at 9:31 AM, Andrew Bell <andrew.bell.ia at gmail.com> wrote:
> 
> Maybe we should always run with all the options, but both GCC and
> Clang?  Or can we schedule a run, say, once a day that used the other
> compiler?

It is simple to change it back.

From flatearth at gmx.net  Thu Feb 18 08:26:51 2016
From: flatearth at gmx.net (FE)
Date: Thu, 18 Feb 2016 17:26:51 +0100
Subject: [pdal] pdal ground options '--max_window_size' and '--approximate'
Message-ID: <trinity-97af0b7f-3118-4944-9a5b-ca264dc0d959-1455812811457@3capp-gmx-bs53>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160218/fa660990/attachment.html>

From flatearth at gmx.net  Thu Feb 18 08:28:35 2016
From: flatearth at gmx.net (FE)
Date: Thu, 18 Feb 2016 17:28:35 +0100
Subject: [pdal]  pdal merge ignores --scale and --offset
Message-ID: <trinity-d7bdcceb-0fcc-4604-a8a2-3135b281dbc0-1455812915499@3capp-gmx-bs53>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160218/212a1106/attachment.html>

From flatearth at gmx.net  Thu Feb 18 08:33:05 2016
From: flatearth at gmx.net (FE)
Date: Thu, 18 Feb 2016 17:33:05 +0100
Subject: [pdal] pdal ground options '--max_window_size' and '--approximate'
Message-ID: <trinity-2bfad0ef-d8b2-4909-9821-b15d63f027ad-1455813184952@3capp-gmx-bs04>

Hi,

I've detected that pdal ground does not accept values smaller than 1.0 for option '--max_window_size'.

Further when using the option '--approximate' other options like '--max_window_size' are completely ignored. In such case always the standard values of max_window_size are used.

Thanks for help!

From andrew.bell.ia at gmail.com  Thu Feb 18 08:53:58 2016
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 18 Feb 2016 10:53:58 -0600
Subject: [pdal] pdal ground options '--max_window_size' and
	'--approximate'
In-Reply-To: <trinity-97af0b7f-3118-4944-9a5b-ca264dc0d959-1455812811457@3capp-gmx-bs53>
References: <trinity-97af0b7f-3118-4944-9a5b-ca264dc0d959-1455812811457@3capp-gmx-bs53>
Message-ID: <CACJ51z3FLaK6cdbtXdVz3qRFN-qRgo-xOg_vrxy9bprkXCYH8g@mail.gmail.com>

On Thu, Feb 18, 2016 at 10:26 AM, FE <flatearth at gmx.net> wrote:
> Hi,
>
> I've detected that pdal ground does not accept values smaller than 1.0 for
> option '--max_window_size'.

I'm not sure what you mean by "not accepted."

The following command runs to completion:

bin/pdal ground --max_window_size=".05" in.las out.las

> Further when using the option '--approximate' other options like
> '--max_window_size' are completely ignored. In such case always the standard
> values of max_window_size are used.

I can't verify this.  Can you provide a small test case?

-- 
Andrew Bell
andrew.bell.ia at gmail.com

From stephen at smathermather.com  Fri Feb 19 05:34:25 2016
From: stephen at smathermather.com (Stephen Mather)
Date: Fri, 19 Feb 2016 08:34:25 -0500
Subject: [pdal] Compilation error with PCL
In-Reply-To: <50EAF822-8008-482A-B76D-74217AA4552C@hobu.co>
References: <CAPkJWLWGjErfJdFtOKdjDqDq8vhR3Fx6N4asM4McniSp+AE6Mg@mail.gmail.com>
 <CABUeae_=Siz0jbFic5GbsT5bSKTC3s-ffOaKdzDq22fGqzeM=g@mail.gmail.com>
 <CACJ51z01W3yFS9c4UHZAspws2YT=Q4NOBpX4fberwYE22RdAeQ@mail.gmail.com>
 <F7F7305F-8472-486E-8E73-FC15B279ECD4@hobu.co>
 <CACJ51z1UMFSE+9Mgpz=fSr7r+0YKCB40ru_UQJq6bbbtienzqQ@mail.gmail.com>
 <50EAF822-8008-482A-B76D-74217AA4552C@hobu.co>
Message-ID: <CAPkJWLWmMewgKEJg8iYLYc1n6AhyDBYqgNVrBVzj=VN638m3qg@mail.gmail.com>

Awesome. Thanks all.

On Thu, Feb 18, 2016 at 10:34 AM, Howard Butler <howard at hobu.co> wrote:

>
> > On Feb 18, 2016, at 9:31 AM, Andrew Bell <andrew.bell.ia at gmail.com>
> wrote:
> >
> > Maybe we should always run with all the options, but both GCC and
> > Clang?  Or can we schedule a run, say, once a day that used the other
> > compiler?
>
> It is simple to change it back.
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160219/58ed85da/attachment.html>

From ROBERT.T.MURPHY at leidos.com  Mon Feb 22 16:13:00 2016
From: ROBERT.T.MURPHY at leidos.com (Murphy, Todd)
Date: Tue, 23 Feb 2016 00:13:00 +0000
Subject: [pdal] PDAL Linux/Unix building
Message-ID: <1EF4F9A771E6F347BFD789126375B0905B24278C@EMP-EXMR102.corp.leidos.com>

Hi:

Building the latest  under Linux(Fedora 22) with the current commit is throwing errors indicating "treating warnings as errors". It appears related to a changethat  was made to unix_compiler_options.cmake in commit 2a95f4d adding -Werror to the CXX_FLAGS.

Dropping the -Werror it builds as expected.

Thanks,

R. Todd Murphy | Leidos
National Security Sector | Defense, Intelligence, and Security
phone: 571.263.7504
murphyrt at leidos.com<mailto:john.t.doe at leidos.com>  |  leidos.com/natsec<http://www.leidos.com/natsec>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160223/7eda84a1/attachment.html>

From howard at hobu.co  Tue Feb 23 03:08:39 2016
From: howard at hobu.co (Howard Butler)
Date: Tue, 23 Feb 2016 12:08:39 +0100
Subject: [pdal] MSVC 2015+
Message-ID: <8128E4AE-C87F-400C-8764-65FB94B26CF0@hobu.co>

All,

At the OSGeo Paris Sprint, we have been discussing the Windows build situation for PDAL, and I'd like to gauge the interest in maintaining any Windows compilers less than 2015. AppVeyor supports 2015, and the proposal is we would default to building and running the tests with that platform. Though this might mostly be for Brad, I'd like everyone to have an opportunity to let us know which Windows compilers need to be supported by the PDAL team. No PDAL dev is really a full-time Windows developer at this time, but we would commit to keeping AppVeyor happy.

In short, here's your chance to stand up and say you need an older MSVC compiler supported, and if so, step forward to volunteer to do so :)

Howard

From brad.chambers at gmail.com  Tue Feb 23 05:55:43 2016
From: brad.chambers at gmail.com (Bradley Chambers)
Date: Tue, 23 Feb 2016 13:55:43 +0000
Subject: [pdal] MSVC 2015+
In-Reply-To: <8128E4AE-C87F-400C-8764-65FB94B26CF0@hobu.co>
References: <8128E4AE-C87F-400C-8764-65FB94B26CF0@hobu.co>
Message-ID: <CAJyqqPzR2gmV903E8dEQsb9j6w2ZmFkLSja9pnWvG3xOccm8vg@mail.gmail.com>

Howard,

I'm not going to stand in the way if the consensus is to require VS 2015. I
do wonder if it is completely necessary though.

I'm curious how many of the recent round of fixes were VS 2012 specific,
and how many were simply because we weren't running the tests on Appveyor.
I thought that most of the VS 2012 limitations were fairly well known, if a
bit of a nuisance. We knew initializer lists were out, and that there were
a few range-based loop gotchas.

Is there anything requiring us to dump VS 2012 (e.g., Appveyor dropping
support)?

Also keep in mind government users. I don't know where things stand, but
there can be a significant lag in approved versions of MSVC.

I can make the switch when the time comes. I'm just on my Windows machine
so infrequently, that I kind of don't look forward to upgrading PDAL and
all of it's dependencies. It would be nice to just pull master and be off
and running.

Hopefully some other Windows users will chime in.

Brad

On Tue, Feb 23, 2016 at 6:08 AM Howard Butler <howard at hobu.co> wrote:

> All,
>
> At the OSGeo Paris Sprint, we have been discussing the Windows build
> situation for PDAL, and I'd like to gauge the interest in maintaining any
> Windows compilers less than 2015. AppVeyor supports 2015, and the proposal
> is we would default to building and running the tests with that platform.
> Though this might mostly be for Brad, I'd like everyone to have an
> opportunity to let us know which Windows compilers need to be supported by
> the PDAL team. No PDAL dev is really a full-time Windows developer at this
> time, but we would commit to keeping AppVeyor happy.
>
> In short, here's your chance to stand up and say you need an older MSVC
> compiler supported, and if so, step forward to volunteer to do so :)
>
> Howard
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160223/e7cbce87/attachment.html>

From mateusz at loskot.net  Tue Feb 23 07:29:21 2016
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 23 Feb 2016 16:29:21 +0100
Subject: [pdal] MSVC 2015+
In-Reply-To: <CAJyqqPzR2gmV903E8dEQsb9j6w2ZmFkLSja9pnWvG3xOccm8vg@mail.gmail.com>
References: <8128E4AE-C87F-400C-8764-65FB94B26CF0@hobu.co>
 <CAJyqqPzR2gmV903E8dEQsb9j6w2ZmFkLSja9pnWvG3xOccm8vg@mail.gmail.com>
Message-ID: <CABUeae91-rU=GwxN+NEhzoP0PTtn0t92U5-ZF8do+OuGP9EbnQ@mail.gmail.com>

On 23 February 2016 at 14:55, Bradley Chambers <brad.chambers at gmail.com> wrote:
> I do wonder if it is completely necessary though.
> ...
> Hopefully some other Windows users will chime in.

AFAIU, it is more about switching to C++11, as a minimal requirement,
and without checking if a particular C++ feature used at the code level
breaks VS builds or not.

Best regards,
-- 
Mateusz Łoskot, http://mateusz.loskot.net

From stephen at smathermather.com  Tue Feb 23 08:49:29 2016
From: stephen at smathermather.com (Stephen Mather)
Date: Tue, 23 Feb 2016 11:49:29 -0500
Subject: [pdal] Compilation error with PCL
In-Reply-To: <CAPkJWLWmMewgKEJg8iYLYc1n6AhyDBYqgNVrBVzj=VN638m3qg@mail.gmail.com>
References: <CAPkJWLWGjErfJdFtOKdjDqDq8vhR3Fx6N4asM4McniSp+AE6Mg@mail.gmail.com>
 <CABUeae_=Siz0jbFic5GbsT5bSKTC3s-ffOaKdzDq22fGqzeM=g@mail.gmail.com>
 <CACJ51z01W3yFS9c4UHZAspws2YT=Q4NOBpX4fberwYE22RdAeQ@mail.gmail.com>
 <F7F7305F-8472-486E-8E73-FC15B279ECD4@hobu.co>
 <CACJ51z1UMFSE+9Mgpz=fSr7r+0YKCB40ru_UQJq6bbbtienzqQ@mail.gmail.com>
 <50EAF822-8008-482A-B76D-74217AA4552C@hobu.co>
 <CAPkJWLWmMewgKEJg8iYLYc1n6AhyDBYqgNVrBVzj=VN638m3qg@mail.gmail.com>
Message-ID: <CAPkJWLW93U9FaBNpoFzhyY7w5ZWrJqPV0RD=nnG2zV6JQVEtbA@mail.gmail.com>

Ok, pulling the latest, I seem to get a successful compile. I had a failure
earlier today, but I haven't been able to replicate.

Thanks!
Best,
Steve



On Fri, Feb 19, 2016 at 8:34 AM, Stephen Mather <stephen at smathermather.com>
wrote:

> Awesome. Thanks all.
>
> On Thu, Feb 18, 2016 at 10:34 AM, Howard Butler <howard at hobu.co> wrote:
>
>>
>> > On Feb 18, 2016, at 9:31 AM, Andrew Bell <andrew.bell.ia at gmail.com>
>> wrote:
>> >
>> > Maybe we should always run with all the options, but both GCC and
>> > Clang?  Or can we schedule a run, say, once a day that used the other
>> > compiler?
>>
>> It is simple to change it back.
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/pdal
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160223/7e83e882/attachment.html>

From ROBERT.T.MURPHY at leidos.com  Tue Feb 23 11:02:23 2016
From: ROBERT.T.MURPHY at leidos.com (Murphy, Todd)
Date: Tue, 23 Feb 2016 19:02:23 +0000
Subject: [pdal] MSVC 2015+
In-Reply-To: <CAJyqqPzR2gmV903E8dEQsb9j6w2ZmFkLSja9pnWvG3xOccm8vg@mail.gmail.com>
References: <8128E4AE-C87F-400C-8764-65FB94B26CF0@hobu.co>
 <CAJyqqPzR2gmV903E8dEQsb9j6w2ZmFkLSja9pnWvG3xOccm8vg@mail.gmail.com>
Message-ID: <1EF4F9A771E6F347BFD789126375B0905B243A8E@EMP-EXMR102.corp.leidos.com>

I would like to upgrade to VS 2015 however it comes with understandable challenges as Brad points out. I have found it much easier to build PDAL on Linux so I could complete my taskings.  I was looking to support it on Windows, but instead went with running Linux virtual machines to support a project we worked. We have installed the OsGeo4W64 when it became available on some of our processors Windows boxes. I do not have an urgent need or requirement to switch.

Thanks,

Todd Murphy

From: pdal [mailto:pdal-bounces at lists.osgeo.org] On Behalf Of Bradley Chambers
Sent: Tuesday, February 23, 2016 8:56 AM
To: Howard Butler; pdal
Subject: Re: [pdal] MSVC 2015+

Howard,

I'm not going to stand in the way if the consensus is to require VS 2015. I do wonder if it is completely necessary though.

I'm curious how many of the recent round of fixes were VS 2012 specific, and how many were simply because we weren't running the tests on Appveyor. I thought that most of the VS 2012 limitations were fairly well known, if a bit of a nuisance. We knew initializer lists were out, and that there were a few range-based loop gotchas.

Is there anything requiring us to dump VS 2012 (e.g., Appveyor dropping support)?

Also keep in mind government users. I don't know where things stand, but there can be a significant lag in approved versions of MSVC.

I can make the switch when the time comes. I'm just on my Windows machine so infrequently, that I kind of don't look forward to upgrading PDAL and all of it's dependencies. It would be nice to just pull master and be off and running.

Hopefully some other Windows users will chime in.

Brad

On Tue, Feb 23, 2016 at 6:08 AM Howard Butler <howard at hobu.co<mailto:howard at hobu.co>> wrote:
All,

At the OSGeo Paris Sprint, we have been discussing the Windows build situation for PDAL, and I'd like to gauge the interest in maintaining any Windows compilers less than 2015. AppVeyor supports 2015, and the proposal is we would default to building and running the tests with that platform. Though this might mostly be for Brad, I'd like everyone to have an opportunity to let us know which Windows compilers need to be supported by the PDAL team. No PDAL dev is really a full-time Windows developer at this time, but we would commit to keeping AppVeyor happy.

In short, here's your chance to stand up and say you need an older MSVC compiler supported, and if so, step forward to volunteer to do so :)

Howard
_______________________________________________
pdal mailing list
pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/pdal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160223/c7cc18fb/attachment-0001.html>

From stephen at smathermather.com  Thu Feb 25 11:30:05 2016
From: stephen at smathermather.com (Stephen Mather)
Date: Thu, 25 Feb 2016 14:30:05 -0500
Subject: [pdal] ply reader
Message-ID: <CAPkJWLVtucQXmYCiSn9h-6uCMDKLPhhL6r8sC71gymV9UTgs+Q@mail.gmail.com>

Hi All,

Is there any good way to get the ply reader to read color and other
attributes beyond x,y,z, or has this not yet been built?

Thanks,
Best,
Steve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160225/3ad5e34c/attachment.html>

From stephen at smathermather.com  Thu Feb 25 11:53:23 2016
From: stephen at smathermather.com (Stephen Mather)
Date: Thu, 25 Feb 2016 14:53:23 -0500
Subject: [pdal] ply reader
In-Reply-To: <CAPkJWLVtucQXmYCiSn9h-6uCMDKLPhhL6r8sC71gymV9UTgs+Q@mail.gmail.com>
References: <CAPkJWLVtucQXmYCiSn9h-6uCMDKLPhhL6r8sC71gymV9UTgs+Q@mail.gmail.com>
Message-ID: <CAPkJWLV5F8rBf9T=082RyF_9YCRskt2aZ8OBi0DBG0EU7kC3vg@mail.gmail.com>

Never mind. It seems PDAL did keep the color which is what I wanted... .


Cheers,
Best,
Steve


On Thu, Feb 25, 2016 at 2:30 PM, Stephen Mather <stephen at smathermather.com>
wrote:

> Hi All,
>
> Is there any good way to get the ply reader to read color and other
> attributes beyond x,y,z, or has this not yet been built?
>
> Thanks,
> Best,
> Steve
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160225/8c929d95/attachment.html>

From remi.cura at gmail.com  Fri Feb 26 01:43:54 2016
From: remi.cura at gmail.com (=?UTF-8?Q?R=C3=A9mi_Cura?=)
Date: Fri, 26 Feb 2016 10:43:54 +0100
Subject: [pdal] ply reader
In-Reply-To: <CAPkJWLV5F8rBf9T=082RyF_9YCRskt2aZ8OBi0DBG0EU7kC3vg@mail.gmail.com>
References: <CAPkJWLVtucQXmYCiSn9h-6uCMDKLPhhL6r8sC71gymV9UTgs+Q@mail.gmail.com>
 <CAPkJWLV5F8rBf9T=082RyF_9YCRskt2aZ8OBi0DBG0EU7kC3vg@mail.gmail.com>
Message-ID: <CAJvUf_vPwDfqyGR=+Y4FEOq1P5qmkSmorF5fEdKsBvALoONeoQ@mail.gmail.com>

I guess you could still go through the pdal python driver, and use python
ply reader,
if you want some really custom atributes.
Cheers,
Remi-C

2016-02-25 20:53 GMT+01:00 Stephen Mather <stephen at smathermather.com>:

> Never mind. It seems PDAL did keep the color which is what I wanted... .
>
>
> Cheers,
> Best,
> Steve
>
>
> On Thu, Feb 25, 2016 at 2:30 PM, Stephen Mather <stephen at smathermather.com
> > wrote:
>
>> Hi All,
>>
>> Is there any good way to get the ply reader to read color and other
>> attributes beyond x,y,z, or has this not yet been built?
>>
>> Thanks,
>> Best,
>> Steve
>>
>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/pdal
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160226/c6c40f4d/attachment.html>

From mateusz at loskot.net  Fri Feb 26 05:59:20 2016
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 26 Feb 2016 14:59:20 +0100
Subject: [pdal] AppVeyor: Build prematurely terminates: Command exited with
	code 1
Message-ID: <CABUeae8eG6svZehY-zmYqTA=e0BdKK0a65su73N7qB4WzFQvaQ@mail.gmail.com>

Hi,

After numerous attempts to solve the problem, I gave up
and requested for help:
http://help.appveyor.com/discussions/problems/4227-build-prematurely-terminates-command-exited-with-code-1

I might be missing something though, so if anyone with AV experience here
could have a look at the report, I'd appreciate.

Best regards,
-- 
Mateusz Łoskot, http://mateusz.loskot.net

From stephen at smathermather.com  Sat Feb 27 19:32:40 2016
From: stephen at smathermather.com (Stephen Mather)
Date: Sat, 27 Feb 2016 22:32:40 -0500
Subject: [pdal] ply reader
In-Reply-To: <CAJvUf_vPwDfqyGR=+Y4FEOq1P5qmkSmorF5fEdKsBvALoONeoQ@mail.gmail.com>
References: <CAPkJWLVtucQXmYCiSn9h-6uCMDKLPhhL6r8sC71gymV9UTgs+Q@mail.gmail.com>
 <CAPkJWLV5F8rBf9T=082RyF_9YCRskt2aZ8OBi0DBG0EU7kC3vg@mail.gmail.com>
 <CAJvUf_vPwDfqyGR=+Y4FEOq1P5qmkSmorF5fEdKsBvALoONeoQ@mail.gmail.com>
Message-ID: <CAPkJWLWkrudx-M5kpwFn2v2MQVYwi2_pV9NSKNb=FHoCoKqTrQ@mail.gmail.com>

Hi Remi,

For what we need right now, just a command is sufficient, though I might
look into python API later. Here's the pdal additions for any who are
interested:

https://github.com/OpenDroneMap/OpenDroneMap/pull/260/files

Cheers,
Best,
Steve





On Fri, Feb 26, 2016 at 4:43 AM, Rémi Cura <remi.cura at gmail.com> wrote:

> I guess you could still go through the pdal python driver, and use python
> ply reader,
> if you want some really custom atributes.
> Cheers,
> Remi-C
>
> 2016-02-25 20:53 GMT+01:00 Stephen Mather <stephen at smathermather.com>:
>
>> Never mind. It seems PDAL did keep the color which is what I wanted... .
>>
>>
>> Cheers,
>> Best,
>> Steve
>>
>>
>> On Thu, Feb 25, 2016 at 2:30 PM, Stephen Mather <
>> stephen at smathermather.com> wrote:
>>
>>> Hi All,
>>>
>>> Is there any good way to get the ply reader to read color and other
>>> attributes beyond x,y,z, or has this not yet been built?
>>>
>>> Thanks,
>>> Best,
>>> Steve
>>>
>>
>>
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/pdal
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20160227/2d70b33d/attachment.html>

