From mathieu.poulin at mvtgeosolutions.com  Thu Sep  2 07:48:20 2021
From: mathieu.poulin at mvtgeosolutions.com (Mathieu Poulin)
Date: Thu, 2 Sep 2021 14:48:20 +0000
Subject: [pdal] libLAS to PDAL,
 how to write a LAS header from scratch in PDAL?
In-Reply-To: <CACJ51z0VmepBC=rbDM_gwwsJgj3-ivhvYr8kr80esw=-Nhp+3g@mail.gmail.com>
References: <YQXPR0101MB15420B1E1D571A8C05EC58BF9BCC9@YQXPR0101MB1542.CANPRD01.PROD.OUTLOOK.COM>
 <CACJ51z0VmepBC=rbDM_gwwsJgj3-ivhvYr8kr80esw=-Nhp+3g@mail.gmail.com>
Message-ID: <YQXPR0101MB1542ACD71D737C70FC2EECB29BCE9@YQXPR0101MB1542.CANPRD01.PROD.OUTLOOK.COM>

Hi Andrew,

Using options does seem to work but there is one thing I cannot find in the documentation and that is the min and max bounds. Previously, I used the header SetMin and SetMax functions. I have tried setting options for "min_x", "max_x", etc., I also tried the "bounds" option and tried to pass a BOX3D object to it and then a string with the correct format described here: https://pdal.io/stages/filters.crop.html#options, but nothing seems to work, I keep getting an error saying something along the lines of "unexpected argument".

The reason I am trying to do this is because I am getting an error that says: writers.las: Unable to convert scaled value (2.307896276e+12) to in32 for dimension 'X'. I found that the error is mentioned in the FAQ: https://pdal.io/faq.html. The thing is, I never had problems with positions fitting into a 32-bit integer before I switched to PDAL. I assume this is because I have not set my bounds properly, but I can't really be certain, it could also be that the scale or offset work differently in PDAL.

Could you help me fix this problem?

Regards,

- Mathieu Poulin

________________________________
From: Andrew Bell <andrew.bell.ia at gmail.com>
Sent: Tuesday, August 31, 2021 9:20 AM
To: Mathieu Poulin <mathieu.poulin at mvtgeosolutions.com>
Cc: pdal at lists.osgeo.org <pdal at lists.osgeo.org>
Subject: Re: [pdal] libLAS to PDAL, how to write a LAS header from scratch in PDAL?

Hi Mathieu,

You don't need to do anything. PDAL will write a LAS file with a properly constructed header. You can use options on the LAS writers if you want to alter some of the header field data.

On Tue, Aug 31, 2021 at 9:04 AM Mathieu Poulin <mathieu.poulin at mvtgeosolutions.com<mailto:mathieu.poulin at mvtgeosolutions.com>> wrote:
Hello everyone,

I am transitionning to PDAL from libLAS and so far almost everything has been easy to figure out. There is however one thing that I can not find any instructions on how to do, and that is how to write a LAS header in PDAL.

I've asked the question on Stackoverflow before finding this mailing list, so here is a link to it: https://stackoverflow.com/questions/68986302/writing-las-header-with-pdal-in-c. Hopefully, someone here has the answer that I am looking for.

Thanks in advance,

 - Mathieu Poulin
[https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon at 2.png?v=73d79a89bded]<https://stackoverflow.com/questions/68986302/writing-las-header-with-pdal-in-c>
Writing LAS header with PDAL in C++ - Stack Overflow<https://stackoverflow.com/questions/68986302/writing-las-header-with-pdal-in-c>
I am working on an application that writes LAS files from scratch based on lidar data. Previously, the application was built with LibLAS and it worked quite well. However, LibLAS has been discontin...
stackoverflow.com<http://stackoverflow.com>
?


_______________________________________________
pdal mailing list
pdal at lists.osgeo.org<mailto:pdal at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/pdal


--
Andrew Bell
andrew.bell.ia at gmail.com<mailto:andrew.bell.ia at gmail.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20210902/954076b7/attachment.html>

From andrew.bell.ia at gmail.com  Thu Sep  2 08:18:17 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 2 Sep 2021 11:18:17 -0400
Subject: [pdal] libLAS to PDAL,
 how to write a LAS header from scratch in PDAL?
In-Reply-To: <YQXPR0101MB1542ACD71D737C70FC2EECB29BCE9@YQXPR0101MB1542.CANPRD01.PROD.OUTLOOK.COM>
References: <YQXPR0101MB15420B1E1D571A8C05EC58BF9BCC9@YQXPR0101MB1542.CANPRD01.PROD.OUTLOOK.COM>
 <CACJ51z0VmepBC=rbDM_gwwsJgj3-ivhvYr8kr80esw=-Nhp+3g@mail.gmail.com>
 <YQXPR0101MB1542ACD71D737C70FC2EECB29BCE9@YQXPR0101MB1542.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <CACJ51z0NJGyP49D5Woh-GaELbVVhYFq79TsijS_TTABpSXPF2A@mail.gmail.com>

On Thu, Sep 2, 2021 at 10:48 AM Mathieu Poulin <
mathieu.poulin at mvtgeosolutions.com> wrote:

> Hi Andrew,
>
> Using options does seem to work but there is one thing I cannot find in
> the documentation and that is the min and max bounds. Previously, I used
> the header SetMin and SetMax functions. I have tried setting options for
> "min_x", "max_x", etc., I also tried the "bounds" option and tried to pass
> a BOX3D object to it and then a string with the correct format described
> here: https://pdal.io/stages/filters.crop.html#options, but nothing seems
> to work, I keep getting an error saying something along the lines of
> "unexpected argument".
>
> The reason I am trying to do this is because I am getting an error that
> says: writers.las: Unable to convert scaled value (2.307896276e+12) to in32
> for dimension 'X'. I found that the error is mentioned in the FAQ:
> https://pdal.io/faq.html. The thing is, I never had problems with
> positions fitting into a 32-bit integer before I switched to PDAL. I assume
> this is because I have not set my bounds properly, but I can't really be
> certain, it could also be that the scale or offset work differently in PDAL.
>

PDAL automatically sets the bounds for the data. You don't need to do
anything.  You're getting the error because your data, when transformed
according to the scale/offset, doesn't fit in a 32-bit integer.  I'm not
sure why you were able to write your data using the other library --
perhaps the data wasn't being written properly or was invalid in some
cases? You should reduce the precision or set the offset in order to write
valid data. Take note of the defaults used for scale_<x/y/z> and
offset<x/y/z> and set them for your data or use the option
forward="scale,offset" if you want the output file to have the same
scale/offset as the input file (assuming there's just one input file).

min_x and max_x are only applicable to the crop filter and not the LAS
writer.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20210902/9c2450c1/attachment-0001.html>

From coolccinc at gmail.com  Thu Sep  2 08:20:25 2021
From: coolccinc at gmail.com (Chris Lee)
Date: Thu, 2 Sep 2021 10:20:25 -0500
Subject: [pdal] libLAS to PDAL,
 how to write a LAS header from scratch in PDAL?
In-Reply-To: <YQXPR0101MB1542ACD71D737C70FC2EECB29BCE9@YQXPR0101MB1542.CANPRD01.PROD.OUTLOOK.COM>
References: <YQXPR0101MB15420B1E1D571A8C05EC58BF9BCC9@YQXPR0101MB1542.CANPRD01.PROD.OUTLOOK.COM>
 <CACJ51z0VmepBC=rbDM_gwwsJgj3-ivhvYr8kr80esw=-Nhp+3g@mail.gmail.com>
 <YQXPR0101MB1542ACD71D737C70FC2EECB29BCE9@YQXPR0101MB1542.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <CAB2=Xf2=B_PEW7Hy5peTmvQSSw6VBNXXGGNKjLTefVaiHFz6xg@mail.gmail.com>

Mathieu,

The header min/max is set automatically by PDAL based on your data. Usually
that error is due to an incorrect scale/offset. Could you send the writer
pipeline you're using? I suggest using a scale factor of "0.01" or "0.001"
for projected coordinate systems, and "auto" for the offset, as follows:

{
"type":"writers.las",
"filename":"outputfile.las",
"offset_x":"auto",
"offset_y":"auto",
"offset_z":"auto",
"scale_x":"0.01",
"scale_y":"0.01",
"scale_z":"0.01"
}

Let me know if it helps!
Chris

On Thu, Sep 2, 2021 at 9:48 AM Mathieu Poulin <
mathieu.poulin at mvtgeosolutions.com> wrote:

> Hi Andrew,
>
> Using options does seem to work but there is one thing I cannot find in
> the documentation and that is the min and max bounds. Previously, I used
> the header SetMin and SetMax functions. I have tried setting options for
> "min_x", "max_x", etc., I also tried the "bounds" option and tried to pass
> a BOX3D object to it and then a string with the correct format described
> here: https://pdal.io/stages/filters.crop.html#options, but nothing seems
> to work, I keep getting an error saying something along the lines of
> "unexpected argument".
>
> The reason I am trying to do this is because I am getting an error that
> says: writers.las: Unable to convert scaled value (2.307896276e+12) to in32
> for dimension 'X'. I found that the error is mentioned in the FAQ:
> https://pdal.io/faq.html. The thing is, I never had problems with
> positions fitting into a 32-bit integer before I switched to PDAL. I assume
> this is because I have not set my bounds properly, but I can't really be
> certain, it could also be that the scale or offset work differently in PDAL.
>
> Could you help me fix this problem?
>
> Regards,
>
> - Mathieu Poulin
>
>
> ------------------------------
> *From:* Andrew Bell <andrew.bell.ia at gmail.com>
> *Sent:* Tuesday, August 31, 2021 9:20 AM
> *To:* Mathieu Poulin <mathieu.poulin at mvtgeosolutions.com>
> *Cc:* pdal at lists.osgeo.org <pdal at lists.osgeo.org>
> *Subject:* Re: [pdal] libLAS to PDAL, how to write a LAS header from
> scratch in PDAL?
>
> Hi Mathieu,
>
> You don't need to do anything. PDAL will write a LAS file with a properly
> constructed header. You can use options on the LAS writers if you want to
> alter some of the header field data.
>
> On Tue, Aug 31, 2021 at 9:04 AM Mathieu Poulin <
> mathieu.poulin at mvtgeosolutions.com> wrote:
>
> Hello everyone,
>
> I am transitionning to PDAL from libLAS and so far almost everything has
> been easy to figure out. There is however one thing that I can not find any
> instructions on how to do, and that is how to write a LAS header in PDAL.
>
> I've asked the question on Stackoverflow before finding this mailing list,
> so here is a link to it:
> https://stackoverflow.com/questions/68986302/writing-las-header-with-pdal-in-c.
> Hopefully, someone here has the answer that I am looking for.
>
> Thanks in advance,
>
>  - Mathieu Poulin
>
> <https://stackoverflow.com/questions/68986302/writing-las-header-with-pdal-in-c>
> Writing LAS header with PDAL in C++ - Stack Overflow
> <https://stackoverflow.com/questions/68986302/writing-las-header-with-pdal-in-c>
> I am working on an application that writes LAS files from scratch based on
> lidar data. Previously, the application was built with LibLAS and it worked
> quite well. However, LibLAS has been discontin...
> stackoverflow.com
> *?*
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
>
>
>
> --
> Andrew Bell
> andrew.bell.ia at gmail.com
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20210902/582399d7/attachment.html>

From peter.lim at gpslands.com  Thu Sep  2 23:24:40 2021
From: peter.lim at gpslands.com (Peter Lim)
Date: Fri, 3 Sep 2021 14:24:40 +0800
Subject: [pdal] 'PDAL: vector<T> too long' error when Using writers.gdal
 with bounds option in PDAL 2.3.0
Message-ID: <001801d7a08c$66be4490$343acdb0$@lim@gpslands.com>

Hi,

 I'm trying to generate a GeoTiff image from a LAS file using PDAL 2.3.0
(git-version: Release) and pipeline as follows:

 [

    {

        "type":"readers.las",

        "filename":"input.las"

    },

    {

        "type":"writers.gdal",

        "resolution": 0.05,

        "data_type":"uint16",

        "output_type":"mean",

        "dimension":"Intensity",

 
"gdalopts":"COMPRESS=ZSTD,ZSTD_LEVEL=1,NUM_THREADS=ALL_CPUS,TILED=YES",


        "bounds":"([372595,374062],[140751,142246])",

        "filename":"output.tif"

    }                          

]

 

There is an error: PDAL: vector<T> too long.

 

This error was not there when I used PDAL 2.1.0.

 

When I removed the "bounds" option, the error is gone, but took much longer
time to process than before.

 

Please advise. 

 

Thank you.

 

Best Regards,

 

Peter Lim

GPS Lands (S) Pte Ltd

 



-- 
This email has been checked for viruses by Avast antivirus software.
https://www.avast.com/antivirus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20210903/3e1dae47/attachment.html>

From andrew.bell.ia at gmail.com  Fri Sep  3 04:36:24 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Fri, 3 Sep 2021 07:36:24 -0400
Subject: [pdal] 'PDAL: vector<T> too long' error when Using writers.gdal
 with bounds option in PDAL 2.3.0
In-Reply-To: <6131bfbd.1c69fb81.8cf18.8b7aSMTPIN_ADDED_BROKEN@mx.google.com>
References: <6131bfbd.1c69fb81.8cf18.8b7aSMTPIN_ADDED_BROKEN@mx.google.com>
Message-ID: <CACJ51z1DUZhaHDVG+JJvbXpEQzPX7HBXgyY_zp-ds5tXJN8xPA@mail.gmail.com>

I'm guessing you're on a 32-bit windows system. For all practical purposes
this is an "out of memory" error. In order to process the data the GDAL
writer needs to create at least one raster that handles your bounds /
resolution * sizeof(data_type). Windows is reporting that this memory is
unavailable. If you going to process large amounts of data, you should
consider using a 64-bit system.

Other than this, I have no ideas. The GDAL writer has been used
successfully with very large datasets and rasters, so I'm not sure what
else the problem might be.

On Fri, Sep 3, 2021 at 2:25 AM Peter Lim <peter.lim at gpslands.com> wrote:

> Hi,
>
>  I?m trying to generate a GeoTiff image from a LAS file using PDAL 2.3.0
> (git-version: Release) and pipeline as follows:
>
>  [
>
>     {
>
>         "type":"readers.las",
>
>         "filename":"input.las"
>
>     },
>
>     {
>
>         "type":"writers.gdal",
>
>         "resolution": 0.05,
>
>         "data_type":"uint16",
>
>         "output_type":"mean",
>
>         "dimension":"Intensity",
>
>
> "gdalopts":"COMPRESS=ZSTD,ZSTD_LEVEL=1,NUM_THREADS=ALL_CPUS,TILED=YES",
>
>
>         "bounds":"([372595,374062],[140751,142246])",
>
>         "filename":"output.tif"
>
>     }
>
> ]
>
>
>
> There is an error: PDAL: vector<T> too long.
>
>
>
> This error was not there when I used PDAL 2.1.0.
>
>
>
> When I removed the ?bounds? option, the error is gone, but took much
> longer time to process than before.
>
>
>
> Please advise.
>
>
>
> Thank you.
>
>
>
> Best Regards,
>
>
>
> Peter Lim
>
> *GPS Lands (S) Pte Ltd*
>
>
>
>
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient> Virus-free.
> www.avast.com
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient>
> <#m_8267777599154108019_DAB4FAD8-2DD7-40BB-A1B8-4E2AA1F9FDF2>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
>


-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20210903/43e62428/attachment.html>

From peter.lim at gpslands.com  Sun Sep  5 21:09:07 2021
From: peter.lim at gpslands.com (Peter Lim)
Date: Mon, 6 Sep 2021 12:09:07 +0800
Subject: [pdal] 'PDAL: vector<T> too long' error when Using writers.gdal
 with bounds option in PDAL 2.3.0
In-Reply-To: <CACJ51z1DUZhaHDVG+JJvbXpEQzPX7HBXgyY_zp-ds5tXJN8xPA@mail.gmail.com>
References: <6131bfbd.1c69fb81.8cf18.8b7aSMTPIN_ADDED_BROKEN@mx.google.com>
 <CACJ51z1DUZhaHDVG+JJvbXpEQzPX7HBXgyY_zp-ds5tXJN8xPA@mail.gmail.com>
Message-ID: <000901d7a2d4$f8640570$e92c1050$@lim@gpslands.com>

Hi Andrew,

 

I?m using 64-bit windows system.  This error did not occur when I was using PDAL 2.1.0.

When I removed the ?bounds? option, the error is gone, but took much longer time to process than before.

So I was wondering is there any changes to the ?bounds? option from 2.10 to 2.3.0 that might cause this.

 

Please advise.

 

Thank you.

 

Best Regards,

 

Peter Lim

GPS Lands (S) Pte Ltd

 

From: Andrew Bell [mailto:andrew.bell.ia at gmail.com] 
Sent: Friday, 3 September 2021 7:36 pm
To: Peter Lim
Cc: pdal
Subject: Re: [pdal] 'PDAL: vector<T> too long' error when Using writers.gdal with bounds option in PDAL 2.3.0

 

I'm guessing you're on a 32-bit windows system. For all practical purposes this is an "out of memory" error. In order to process the data the GDAL writer needs to create at least one raster that handles your bounds / resolution * sizeof(data_type). Windows is reporting that this memory is unavailable. If you going to process large amounts of data, you should consider using a 64-bit system.

Other than this, I have no ideas. The GDAL writer has been used successfully with very large datasets and rasters, so I'm not sure what else the problem might be.

 

On Fri, Sep 3, 2021 at 2:25 AM Peter Lim <peter.lim at gpslands.com> wrote:

Hi,

 I?m trying to generate a GeoTiff image from a LAS file using PDAL 2.3.0 (git-version: Release) and pipeline as follows:

 [

    {

        "type":"readers.las",

        "filename":"input.las"

    },

    {

        "type":"writers.gdal",

        "resolution": 0.05,

        "data_type":"uint16",

        "output_type":"mean",

        "dimension":"Intensity",

        "gdalopts":"COMPRESS=ZSTD,ZSTD_LEVEL=1,NUM_THREADS=ALL_CPUS,TILED=YES",           

        "bounds":"([372595,374062],[140751,142246])",

        "filename":"output.tif"

    }                          

]

 

There is an error: PDAL: vector<T> too long.

 

This error was not there when I used PDAL 2.1.0.

 

When I removed the ?bounds? option, the error is gone, but took much longer time to process than before.

 

Please advise. 

 

Thank you.

 

Best Regards,

 

Peter Lim

GPS Lands (S) Pte Ltd

 

 


 <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient> 

Virus-free.  <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient> www.avast.com 

_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/pdal




 

-- 

Andrew Bell
andrew.bell.ia at gmail.com



-- 
This email has been checked for viruses by Avast antivirus software.
https://www.avast.com/antivirus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20210906/ccefbd70/attachment.html>

From andrew.bell.ia at gmail.com  Mon Sep  6 07:32:02 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 6 Sep 2021 10:32:02 -0400
Subject: [pdal] 'PDAL: vector<T> too long' error when Using writers.gdal
 with bounds option in PDAL 2.3.0
In-Reply-To: <6135947b.1c69fb81.1a082.40a9SMTPIN_ADDED_BROKEN@mx.google.com>
References: <6131bfbd.1c69fb81.8cf18.8b7aSMTPIN_ADDED_BROKEN@mx.google.com>
 <CACJ51z1DUZhaHDVG+JJvbXpEQzPX7HBXgyY_zp-ds5tXJN8xPA@mail.gmail.com>
 <6135947b.1c69fb81.1a082.40a9SMTPIN_ADDED_BROKEN@mx.google.com>
Message-ID: <CACJ51z2y40Bb86nRR0CddPzfP3n+wCYNzG3mF_+rkfVxMOmA+A@mail.gmail.com>

If you can provide your data you should open an issue.

On Mon, Sep 6, 2021, 12:09 AM Peter Lim <peter.lim at gpslands.com> wrote:

> Hi Andrew,
>
>
>
> I?m using 64-bit windows system.  This error did not occur when I was
> using PDAL 2.1.0.
>
> When I removed the ?bounds? option, the error is gone, but took much
> longer time to process than before.
>
> So I was wondering is there any changes to the ?bounds? option from 2.10
> to 2.3.0 that might cause this.
>
>
>
> Please advise.
>
>
>
> Thank you.
>
>
>
> Best Regards,
>
>
>
> Peter Lim
>
> *GPS Lands (S) Pte Ltd*
>
>
>
> *From:* Andrew Bell [mailto:andrew.bell.ia at gmail.com]
> *Sent:* Friday, 3 September 2021 7:36 pm
> *To:* Peter Lim
> *Cc:* pdal
> *Subject:* Re: [pdal] 'PDAL: vector<T> too long' error when Using
> writers.gdal with bounds option in PDAL 2.3.0
>
>
>
> I'm guessing you're on a 32-bit windows system. For all practical purposes
> this is an "out of memory" error. In order to process the data the GDAL
> writer needs to create at least one raster that handles your bounds /
> resolution * sizeof(data_type). Windows is reporting that this memory is
> unavailable. If you going to process large amounts of data, you should
> consider using a 64-bit system.
>
> Other than this, I have no ideas. The GDAL writer has been used
> successfully with very large datasets and rasters, so I'm not sure what
> else the problem might be.
>
>
>
> On Fri, Sep 3, 2021 at 2:25 AM Peter Lim <peter.lim at gpslands.com> wrote:
>
> Hi,
>
>  I?m trying to generate a GeoTiff image from a LAS file using PDAL 2.3.0
> (git-version: Release) and pipeline as follows:
>
>  [
>
>     {
>
>         "type":"readers.las",
>
>         "filename":"input.las"
>
>     },
>
>     {
>
>         "type":"writers.gdal",
>
>         "resolution": 0.05,
>
>         "data_type":"uint16",
>
>         "output_type":"mean",
>
>         "dimension":"Intensity",
>
>
> "gdalopts":"COMPRESS=ZSTD,ZSTD_LEVEL=1,NUM_THREADS=ALL_CPUS,TILED=YES",
>
>
>         "bounds":"([372595,374062],[140751,142246])",
>
>         "filename":"output.tif"
>
>     }
>
> ]
>
>
>
> There is an error: PDAL: vector<T> too long.
>
>
>
> This error was not there when I used PDAL 2.1.0.
>
>
>
> When I removed the ?bounds? option, the error is gone, but took much
> longer time to process than before.
>
>
>
> Please advise.
>
>
>
> Thank you.
>
>
>
> Best Regards,
>
>
>
> Peter Lim
>
> *GPS Lands (S) Pte Ltd*
>
>
>
>
>
>
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient>
>
> Virus-free. www.avast.com
> <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
>
>
>
>
> --
>
> Andrew Bell
> andrew.bell.ia at gmail.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20210906/53a91e8a/attachment-0001.html>

From peter.lim at gpslands.com  Wed Sep  8 00:17:01 2021
From: peter.lim at gpslands.com (Peter Lim)
Date: Wed, 8 Sep 2021 15:17:01 +0800
Subject: [pdal] 'PDAL: vector<T> too long' error when Using writers.gdal
 with bounds option in PDAL 2.3.0
In-Reply-To: <CACJ51z2y40Bb86nRR0CddPzfP3n+wCYNzG3mF_+rkfVxMOmA+A@mail.gmail.com>
References: <6131bfbd.1c69fb81.8cf18.8b7aSMTPIN_ADDED_BROKEN@mx.google.com>
 <CACJ51z1DUZhaHDVG+JJvbXpEQzPX7HBXgyY_zp-ds5tXJN8xPA@mail.gmail.com>
 <6135947b.1c69fb81.1a082.40a9SMTPIN_ADDED_BROKEN@mx.google.com>
 <CACJ51z2y40Bb86nRR0CddPzfP3n+wCYNzG3mF_+rkfVxMOmA+A@mail.gmail.com>
Message-ID: <000901d7a481$849ff190$8ddfd4b0$@lim@gpslands.com>

Unfortunately, the data cannot be provided.

 

Meanwhile, I?ll try not to use the ?bounds? option.

 

Thank you.

 

Best Regards,

 

Peter Lim

 

From: Andrew Bell [mailto:andrew.bell.ia at gmail.com] 
Sent: Monday, 6 September 2021 10:32 pm
To: Peter Lim
Cc: pdal
Subject: Re: [pdal] 'PDAL: vector<T> too long' error when Using writers.gdal with bounds option in PDAL 2.3.0

 

If you can provide your data you should open an issue.

 

On Mon, Sep 6, 2021, 12:09 AM Peter Lim <peter.lim at gpslands.com> wrote:

Hi Andrew,

 

I?m using 64-bit windows system.  This error did not occur when I was using PDAL 2.1.0.

When I removed the ?bounds? option, the error is gone, but took much longer time to process than before.

So I was wondering is there any changes to the ?bounds? option from 2.10 to 2.3.0 that might cause this.

 

Please advise.

 

Thank you.

 

Best Regards,

 

Peter Lim

GPS Lands (S) Pte Ltd

 

From: Andrew Bell [mailto:andrew.bell.ia at gmail.com] 
Sent: Friday, 3 September 2021 7:36 pm
To: Peter Lim
Cc: pdal
Subject: Re: [pdal] 'PDAL: vector<T> too long' error when Using writers.gdal with bounds option in PDAL 2.3.0

 

I'm guessing you're on a 32-bit windows system. For all practical purposes this is an "out of memory" error. In order to process the data the GDAL writer needs to create at least one raster that handles your bounds / resolution * sizeof(data_type). Windows is reporting that this memory is unavailable. If you going to process large amounts of data, you should consider using a 64-bit system.

Other than this, I have no ideas. The GDAL writer has been used successfully with very large datasets and rasters, so I'm not sure what else the problem might be.

 

On Fri, Sep 3, 2021 at 2:25 AM Peter Lim <peter.lim at gpslands.com> wrote:

Hi,

 I?m trying to generate a GeoTiff image from a LAS file using PDAL 2.3.0 (git-version: Release) and pipeline as follows:

 [

    {

        "type":"readers.las",

        "filename":"input.las"

    },

    {

        "type":"writers.gdal",

        "resolution": 0.05,

        "data_type":"uint16",

        "output_type":"mean",

        "dimension":"Intensity",

        "gdalopts":"COMPRESS=ZSTD,ZSTD_LEVEL=1,NUM_THREADS=ALL_CPUS,TILED=YES",           

        "bounds":"([372595,374062],[140751,142246])",

        "filename":"output.tif"

    }                          

]

 

There is an error: PDAL: vector<T> too long.

 

This error was not there when I used PDAL 2.1.0.

 

When I removed the ?bounds? option, the error is gone, but took much longer time to process than before.

 

Please advise. 

 

Thank you.

 

Best Regards,

 

Peter Lim

GPS Lands (S) Pte Ltd

 

 


 <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient> 

Virus-free.  <https://www.avast.com/sig-email?utm_medium=email&utm_source=link&utm_campaign=sig-email&utm_content=emailclient> www.avast.com 

_______________________________________________
pdal mailing list
pdal at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/pdal




 

-- 

Andrew Bell
andrew.bell.ia at gmail.com



-- 
This email has been checked for viruses by Avast antivirus software.
https://www.avast.com/antivirus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20210908/6bc00cd4/attachment.html>

From andreas at yank.to  Wed Sep 15 08:01:12 2021
From: andreas at yank.to (Andreas Yankopolus)
Date: Wed, 15 Sep 2021 11:01:12 -0400
Subject: [pdal] Raster extent with writers.gdal
Message-ID: <94AA7EC0-6C20-4F32-84F7-EADB0D8CCE97@yank.to>

All?

I?m using PDAL to write a surface-height raster using writers.gdal, then merging that file with other rasters into a multi-band file with GDAL.

What?s my best bet for specifying the extent of the raster written by writers.gdal?

I have a pipeline stage cropping the LPC data and expect to have nodata values throughout.

One possibility appears to be using the origin_x, origin_y options along with width, height to set the size. I?m already specifying a resolution. Or maybe I want to use gdalopts. 

How have other people addressed this?

Cheers,

Andreas
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20210915/d73f4045/attachment.html>

From andrew.bell.ia at gmail.com  Wed Sep 15 08:04:56 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 15 Sep 2021 11:04:56 -0400
Subject: [pdal] Raster extent with writers.gdal
In-Reply-To: <94AA7EC0-6C20-4F32-84F7-EADB0D8CCE97@yank.to>
References: <94AA7EC0-6C20-4F32-84F7-EADB0D8CCE97@yank.to>
Message-ID: <CACJ51z37iN=pLFuApZzzirUQkmvpzhSC1-tSbSmnJSy2kDYydw@mail.gmail.com>

Hi Andreas,

Using gdalopts probably won't do what you want. The other options you
mentioned are for precisely this purpose.

Hope that helps,

On Wed, Sep 15, 2021 at 11:01 AM Andreas Yankopolus <andreas at yank.to> wrote:

> All?
>
> I?m using PDAL to write a surface-height raster using *writers.gdal*,
> then merging that file with other rasters into a multi-band file with GDAL.
>
> What?s my best bet for specifying the extent of the raster written by
> *writers.gdal*?
>
> I have a pipeline stage cropping the LPC data and expect to have *nodata*
> values throughout.
>
> One possibility appears to be using the *origin_x*, *origin_y* options
> along with *width*, *height* to set the size. I?m already specifying a
> resolution. Or maybe I want to use *gdalopts*.
>
> How have other people addressed this?
>
> Cheers,
>
> Andreas
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
>


-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20210915/74944aef/attachment.html>

From klassen.js at gmail.com  Wed Sep 15 08:20:21 2021
From: klassen.js at gmail.com (Jim Klassen)
Date: Wed, 15 Sep 2021 10:20:21 -0500
Subject: [pdal] Raster extent with writers.gdal
In-Reply-To: <CACJ51z37iN=pLFuApZzzirUQkmvpzhSC1-tSbSmnJSy2kDYydw@mail.gmail.com>
References: <94AA7EC0-6C20-4F32-84F7-EADB0D8CCE97@yank.to>
 <CACJ51z37iN=pLFuApZzzirUQkmvpzhSC1-tSbSmnJSy2kDYydw@mail.gmail.com>
Message-ID: <e725c2e3-cb9d-a24d-078f-58af85ea743c@gmail.com>

There is also the /bounds/ option that lets you specify the output 
extent directly.

One thing you might have to check and adjust for is the output might be 
half a pixel off where you expect it to be (the difference between the 
geographical coordinate representing the center of the pixel or the corner).

On 9/15/21 10:04 AM, Andrew Bell wrote:
> Hi Andreas,
>
> Using gdalopts probably won't do what you want. The other options you 
> mentioned are for precisely this purpose.
>
> Hope that helps,
>
> On Wed, Sep 15, 2021 at 11:01 AM Andreas Yankopolus <andreas at yank.to 
> <mailto:andreas at yank.to>> wrote:
>
>     All?
>
>     I?m using PDAL to write a surface-height raster using
>     /writers.gdal/, then merging that file with other rasters into a
>     multi-band file with GDAL.
>
>     What?s my best bet for specifying the extent of the raster written
>     by /writers.gdal/?
>
>     I have a pipeline stage cropping the LPC data and expect to have
>     /nodata/ values throughout.
>
>     One possibility appears to be using the /origin_x/,
>     /origin_y/?options along with /width/, /height/?to set the size.
>     I?m already specifying a resolution. Or maybe I want to use
>     /gdalopts/.
>
>     How have other people addressed this?
>
>     Cheers,
>
>     Andreas
>     _______________________________________________
>     pdal mailing list
>     pdal at lists.osgeo.org <mailto:pdal at lists.osgeo.org>
>     https://lists.osgeo.org/mailman/listinfo/pdal
>     <https://lists.osgeo.org/mailman/listinfo/pdal>
>
>
>
> -- 
> Andrew Bell
> andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>
>
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20210915/e00a49c9/attachment.html>

From andreas at yank.to  Wed Sep 15 13:29:24 2021
From: andreas at yank.to (Andreas Yankopolus)
Date: Wed, 15 Sep 2021 16:29:24 -0400
Subject: [pdal] Raster extent with writers.gdal
In-Reply-To: <e725c2e3-cb9d-a24d-078f-58af85ea743c@gmail.com>
References: <94AA7EC0-6C20-4F32-84F7-EADB0D8CCE97@yank.to>
 <CACJ51z37iN=pLFuApZzzirUQkmvpzhSC1-tSbSmnJSy2kDYydw@mail.gmail.com>
 <e725c2e3-cb9d-a24d-078f-58af85ea743c@gmail.com>
Message-ID: <D101E55C-43BC-4266-A183-E8803C9D1ADE@yank.to>

Jim,

> There is also the bounds option that lets you specify the output extent directly. 
> 
> One thing you might have to check and adjust for is the output might be half a pixel off where you expect it to be (the difference between the geographical coordinate representing the center of the pixel or the corner).

The bounds option in writers.gdal is doing the trick. I?m using the same args for it as I am for the bounds args in my crop statement at the top of the pipeline.

Pixel coordinates in the resulting raster (1/3 arc-sec in EPSG:4326) come out as expected.

Thanks,

Andreas

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20210915/cae36c16/attachment.html>

From p.wilkes at ucl.ac.uk  Tue Sep 21 09:25:34 2021
From: p.wilkes at ucl.ac.uk (Phil Wilkes)
Date: Tue, 21 Sep 2021 17:25:34 +0100
Subject: [pdal] Installing python-pdal with rivlib support
Message-ID: <CAAbCj1DfYyAyfrtz+1pTQoK697oJks7sTAC9KEUNKn04inqG9g@mail.gmail.com>

Hi there

I would like to install pdal with the python extension and with rivlib
support. I have successfully installed pdal with rivlib support (compiled
from source) and also the python extension installed through conda. But the
version of pdal used when importing into Python is the version also pulled
from conda - not my built version.

My next attempt was to pull the git repository of python-pdal and install
with setup.py. I have put this in the PDAL source directory. I had to make
some adjustments to the PDALConfig.cmake (the PACKAGE_PREFIX_DIR was
pointing at my home directory not the build directory of PDAL so I have
hard coded this for now) but I am getting many errors (I think related to
not finding certain headers e.g. *fatal error: pdal/pdal_config.hpp: No
such file or directory*).

Any help with this issue would be greatly received.

Phil

Dr. Phil Wilkes

UCL Geography, Gower Street, London WC1E 6BT

& NERC National Centre for Earth Observation
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20210921/732798d7/attachment.html>

From runette at gmail.com  Tue Sep 21 09:45:52 2021
From: runette at gmail.com (Paul Harwood)
Date: Tue, 21 Sep 2021 17:45:52 +0100
Subject: [pdal] Installing python-pdal with rivlib support
In-Reply-To: <CAAbCj1DfYyAyfrtz+1pTQoK697oJks7sTAC9KEUNKn04inqG9g@mail.gmail.com>
References: <CAAbCj1DfYyAyfrtz+1pTQoK697oJks7sTAC9KEUNKn04inqG9g@mail.gmail.com>
Message-ID: <CAE8nN5PYQ4un_3wX31eto2fzno1rxY0qeo=0-9yiqX-txGsbzw@mail.gmail.com>

One thing I do a lot when developing - including for pdal-python - is to
install with Conda and then replace the binary objects (e.g, .dll or .so or
.dylib etc) with my custom built versions. It usually works.

Instal pdal-python into a conda env (lets call it 'test').

Then go into your conda root (usually '~/Anaconda3' or '~/miniconda3' or
something like that) and find the 'envs' folder. There should be a folder
in there for the conda environment (i.e. 'test' as specified above).

In there - find the PDAL shared object - depends on your os (e.g. pdal.dll
in `Library\bin` on Win or pdal.dylib in `bin` on mac etc). replace that
and any other shared objects with your custom compiled versions as
required.

Pdal-python should now be using your custom version of PDAL.

On Tue, 21 Sept 2021 at 17:26, Phil Wilkes <p.wilkes at ucl.ac.uk> wrote:

> Hi there
>
> I would like to install pdal with the python extension and with rivlib
> support. I have successfully installed pdal with rivlib support (compiled
> from source) and also the python extension installed through conda. But the
> version of pdal used when importing into Python is the version also pulled
> from conda - not my built version.
>
> My next attempt was to pull the git repository of python-pdal and install
> with setup.py. I have put this in the PDAL source directory. I had to make
> some adjustments to the PDALConfig.cmake (the PACKAGE_PREFIX_DIR was
> pointing at my home directory not the build directory of PDAL so I have
> hard coded this for now) but I am getting many errors (I think related to
> not finding certain headers e.g. *fatal error: pdal/pdal_config.hpp: No
> such file or directory*).
>
> Any help with this issue would be greatly received.
>
> Phil
>
> Dr. Phil Wilkes
>
> UCL Geography, Gower Street, London WC1E 6BT
>
> & NERC National Centre for Earth Observation
> _______________________________________________
> pdal mailing list
> pdal at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/pdal
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20210921/ea5150ec/attachment.html>

From p.wilkes at ucl.ac.uk  Tue Sep 21 12:13:20 2021
From: p.wilkes at ucl.ac.uk (Phil Wilkes)
Date: Tue, 21 Sep 2021 20:13:20 +0100
Subject: [pdal] Installing python-pdal with rivlib support
In-Reply-To: <CAE8nN5PYQ4un_3wX31eto2fzno1rxY0qeo=0-9yiqX-txGsbzw@mail.gmail.com>
References: <CAAbCj1DfYyAyfrtz+1pTQoK697oJks7sTAC9KEUNKn04inqG9g@mail.gmail.com>
 <CAE8nN5PYQ4un_3wX31eto2fzno1rxY0qeo=0-9yiqX-txGsbzw@mail.gmail.com>
Message-ID: <CAAbCj1AZpL+-K6JATTKjPvFy-LtjkQqHY5fjE0aNv6S_SJe8Hw@mail.gmail.com>

Great thanks Paul. I copied just libpdal_plugin_reader_rxp.so to /lib in my
conda environment and it works! Thanks for your help.

Dr. Phil Wilkes

UCL Geography, Gower Street, London WC1E 6BT

& NERC National Centre for Earth Observation


On Tue, 21 Sept 2021 at 17:46, Paul Harwood <runette at gmail.com> wrote:

> One thing I do a lot when developing - including for pdal-python - is to
> install with Conda and then replace the binary objects (e.g, .dll or .so or
> .dylib etc) with my custom built versions. It usually works.
>
> Instal pdal-python into a conda env (lets call it 'test').
>
> Then go into your conda root (usually '~/Anaconda3' or '~/miniconda3' or
> something like that) and find the 'envs' folder. There should be a folder
> in there for the conda environment (i.e. 'test' as specified above).
>
> In there - find the PDAL shared object - depends on your os (e.g. pdal.dll
> in `Library\bin` on Win or pdal.dylib in `bin` on mac etc). replace that
> and any other shared objects with your custom compiled versions as
> required.
>
> Pdal-python should now be using your custom version of PDAL.
>
> On Tue, 21 Sept 2021 at 17:26, Phil Wilkes <p.wilkes at ucl.ac.uk> wrote:
>
>> Hi there
>>
>> I would like to install pdal with the python extension and with rivlib
>> support. I have successfully installed pdal with rivlib support (compiled
>> from source) and also the python extension installed through conda. But the
>> version of pdal used when importing into Python is the version also pulled
>> from conda - not my built version.
>>
>> My next attempt was to pull the git repository of python-pdal and install
>> with setup.py. I have put this in the PDAL source directory. I had to make
>> some adjustments to the PDALConfig.cmake (the PACKAGE_PREFIX_DIR was
>> pointing at my home directory not the build directory of PDAL so I have
>> hard coded this for now) but I am getting many errors (I think related to
>> not finding certain headers e.g. *fatal error: pdal/pdal_config.hpp: No
>> such file or directory*).
>>
>> Any help with this issue would be greatly received.
>>
>> Phil
>>
>> Dr. Phil Wilkes
>>
>> UCL Geography, Gower Street, London WC1E 6BT
>>
>> & NERC National Centre for Earth Observation
>> _______________________________________________
>> pdal mailing list
>> pdal at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/pdal
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/pdal/attachments/20210921/83fddab9/attachment.html>

