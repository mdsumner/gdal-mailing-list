From adrian_gh.popa at romtelecom.ro  Mon May  2 01:03:19 2011
From: adrian_gh.popa at romtelecom.ro (Adrian Popa)
Date: Mon, 2 May 2011 11:03:19 +0300
Subject: [Proj] Offset when converting coordinates from ESRI:31700 to
 EPSG:4326
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD4938845458@SETHNWS023.carmenta.se>
References: <4DB14312.7050804@romtelecom.ro>
	<BANLkTinFt_uoVTyyg=bNFBjbvmoaD4eX-g@mail.gmail.com>
	<E4AB3DD44D22854B819908379DE4AD4938845458@SETHNWS023.carmenta.se>
Message-ID: <4DBE6547.6080909@romtelecom.ro>

Hello everyone,

First of all - thank you all for the information provided (and sorry I
didn't reply sooner).

Second of all - I still must be doing something wrong - the coordinates
I get are the same in all cases (the same as EPSG 4326):

adrianp at frost:~$ echo 587486.770 326878.452 | cs2cs +init=esri:31700 +to
+init=epsg:4326 -f '%0.6f'
26.099032    44.436575 0.000000
adrianp at frost:~$ echo 587486.770 326878.452 | cs2cs +init=esri:31700
+towgs84=28,-121,-77 -f '%0.6f'
26.099032    44.436575 0.000000
adrianp at frost:~$ echo 587486.770 326878.452 | cs2cs +init=esri:31700
+towgs84=44.107,-116.150,-54.648 -f '%0.6f'
26.099032    44.436575 0.000000
adrianp at frost:~$ echo 587486.770 326878.452 | cs2cs +init=esri:31700
+towgs84=-5.20,-126.75,-97.08,0.3160,0.4470,0.1340,0.99999  -f '%0.6f'
26.099032    44.436575 0.000000
adrianp at frost:~$ echo 587486.770 326878.452 | cs2cs +init=esri:31700
+towgs84=2.329,-147.042,-92.08,-0.309,0.325,0.497,5.69   -f '%0.6f'
26.099032    44.436575 0.000000

I'm sorry, but I'm a complete noob to proj and I do not understand the
full theory behind projections, datums and all the rest - so I hope my
questions are not too irritating :)

So - any clue to what I'm doing wrong?
Thank you,

Adrian


Acest mesaj si orice fisiere sau documente atasate contin informatii confidentiale, clasificate conform regulilor interne ROMTELECOM. Mesajul este destinat doar persoanei sau entitatii adresate si altora autorizati sa-l primeasca. Daca dvs. nu sunteti in aceasta situatie, prin aceasta va informam ca orice dezvaluire, copiere, distribuire sau orice alta actiune bazata pe continutul acestor informatii este strict interzisa si pot fi aplicate sanctiuni, potrivit legii. Daca ati primit acest mesaj din greseala, va rugam sa ne informati imediat si sa stergeti mesajul din sistemul dvs. De asemenea, va rugam sa tineti cont ca transmisia nu poate fi garantata ca fiind sigura sau fara erori. Va multumim!


From jrepetto at free.fr  Mon May  2 01:26:00 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon, 02 May 2011 10:26:00 +0200
Subject: [Proj] Offset when converting coordinates from ESRI:31700 to
 EPSG:4326
In-Reply-To: <4DBE6547.6080909@romtelecom.ro>
References: <4DB14312.7050804@romtelecom.ro>	<BANLkTinFt_uoVTyyg=bNFBjbvmoaD4eX-g@mail.gmail.com>	<E4AB3DD44D22854B819908379DE4AD4938845458@SETHNWS023.carmenta.se>
	<4DBE6547.6080909@romtelecom.ro>
Message-ID: <4DBE6A98.3060506@free.fr>

Le 02/05/2011 10:03, Adrian Popa a écrit :
>
> Second of all - I still must be doing something wrong - the coordinates
> I get are the same in all cases (the same as EPSG 4326):
>
> adrianp at frost:~$ echo 587486.770 326878.452 | cs2cs +init=esri:31700
> +towgs84=2.329,-147.042,-92.08,-0.309,0.325,0.497,5.69   -f '%0.6f'
> 26.099032    44.436575 0.000000
>

You have forgotten "+to +init=epsg:4326 " :

echo 587486.770 326878.452 | cs2cs +init=esri:31700 
+towgs84=2.329,-147.042,-92.08,-0.309,0.325,0.497,5.69  +to 
+init=epsg:4326  -f '%0.6f'
26.097535	44.436283 36.350742


Jean-Claude


From Mikael.Rittri at carmenta.com  Mon May  2 01:55:01 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 2 May 2011 08:55:01 +0000
Subject: [Proj] Offset when converting coordinates from ESRI:31700 to
 EPSG:4326
In-Reply-To: <4DBE6547.6080909@romtelecom.ro>
References: <4DB14312.7050804@romtelecom.ro>
	<BANLkTinFt_uoVTyyg=bNFBjbvmoaD4eX-g@mail.gmail.com>
	<E4AB3DD44D22854B819908379DE4AD4938845458@SETHNWS023.carmenta.se>
	<4DBE6547.6080909@romtelecom.ro>
Message-ID: <E4AB3DD44D22854B819908379DE4AD493885697E@SETHNWS023.carmenta.se>

Hello Adrian.

First a minor point: sterea is better than stere
(at least for Romania, the Netherlands and Canada)
as you mentioned in your first post, so I think
using +init=epsg:31700 is better than +init=esri:31700, 
since only the epsg definition gives sterea, also 
according to you first post.  (In the Netherlands,
I think the difference between stere and sterea can
be up to 7 or 8 meters.)

Second, you have added a +towgs84 parameter, but 
omitted the +to and what comes after.  However, 
the +towgs84 is not a replacement for the +to etc., 
just additional information. 
(In fact, a +towgs84 parameter is often needed on 
 both sides of the +to separator. I'm surprised
 that cs2cs gives any output at all without any 
 +to separator.)

I tried the following:

C:\Program Files\FWTools2.4.7>echo 587486.770 326878.452 | cs2cs +init=epsg:31700 +towgs84=2.329,-147.042,-92.08,-0.309,0.325,0.497,5.69 +to +init=epsg:4326 -f '%0.6f'
'26.097437'     '44.436336' '36.350887'

You wrote:

> Real coordinates (converted from Stereo 70 with Global Mapper 
> and checked with a GPS unit): 26.097414, 44.436335

So the error is now 1.8 meters for this example 
(measured on http://geographiclib.sourceforge.net/cgi-bin/Geod),
which is what one could expect (since the horizontal accuracy
of this datum shift is supposed to be 1.5 to 3 meters).

Best regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com


-----Original Message-----
From: Adrian Popa [mailto:adrian_gh.popa at romtelecom.ro] 
Sent: den 2 maj 2011 10:03
To: Mikael Rittri
Cc: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Offset when converting coordinates from ESRI:31700 to EPSG:4326

Hello everyone,

First of all - thank you all for the information provided (and sorry I didn't reply sooner).

Second of all - I still must be doing something wrong - the coordinates I get are the same in all cases (the same as EPSG 4326):

adrianp at frost:~$ echo 587486.770 326878.452 | cs2cs +init=esri:31700 +to
+init=epsg:4326 -f '%0.6f'
26.099032    44.436575 0.000000
adrianp at frost:~$ echo 587486.770 326878.452 | cs2cs +init=esri:31700
+towgs84=28,-121,-77 -f '%0.6f'
26.099032    44.436575 0.000000
adrianp at frost:~$ echo 587486.770 326878.452 | cs2cs +init=esri:31700
+towgs84=44.107,-116.150,-54.648 -f '%0.6f'
26.099032    44.436575 0.000000
adrianp at frost:~$ echo 587486.770 326878.452 | cs2cs +init=esri:31700
+towgs84=-5.20,-126.75,-97.08,0.3160,0.4470,0.1340,0.99999  -f '%0.6f'
26.099032    44.436575 0.000000
adrianp at frost:~$ echo 587486.770 326878.452 | cs2cs +init=esri:31700
+towgs84=2.329,-147.042,-92.08,-0.309,0.325,0.497,5.69   -f '%0.6f'
26.099032    44.436575 0.000000

I'm sorry, but I'm a complete noob to proj and I do not understand the full theory behind projections, datums and all the rest - so I hope my questions are not too irritating :)

So - any clue to what I'm doing wrong?
Thank you,

Adrian


Acest mesaj si orice fisiere sau documente atasate contin informatii confidentiale, clasificate conform regulilor interne ROMTELECOM. Mesajul este destinat doar persoanei sau entitatii adresate si altora autorizati sa-l primeasca. Daca dvs. nu sunteti in aceasta situatie, prin aceasta va informam ca orice dezvaluire, copiere, distribuire sau orice alta actiune bazata pe continutul acestor informatii este strict interzisa si pot fi aplicate sanctiuni, potrivit legii. Daca ati primit acest mesaj din greseala, va rugam sa ne informati imediat si sa stergeti mesajul din sistemul dvs. De asemenea, va rugam sa tineti cont ca transmisia nu poate fi garantata ca fiind sigura sau fara erori. Va multumim!


From EMiller at dfg.ca.gov  Mon May  2 08:58:04 2011
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Mon, 2 May 2011 08:58:04 -0700
Subject: [Proj] Different lat/lon projections
In-Reply-To: <BANLkTi=Wn8iS8LMbNoKorZtdFLtvP6kMzg@mail.gmail.com>
References: <BANLkTi=Wn8iS8LMbNoKorZtdFLtvP6kMzg@mail.gmail.com>
Message-ID: <4DBE721C.95FD.00E4.0@dfg.ca.gov>

I don't think PROJ has a switch for outputting longitudes to anything but [-180,180].  It doesn't care on the inputs (it normalizes to [0,2pi]).  PROJ only deals with coordinates, so it doesn't have to deal with sticky issues like keeping geometry objects intact across the date line.

Example:

C:\proj\bin>proj +proj=utm +zone=11 +datum=WGS84
240 34
222908.70       3766214.72
-120 34
222908.70       3766214.72

-- 

Eric G. Miller
Staff Programmer
CA Dept. of Fish & Game


>>> On 4/28/2011 at 1:33 PM, Jonathan Greenberg <greenberg at ucdavis.edu> wrote:
> Folks:
> 
> What is the correct CRS projection string for dealing with the following two
> lat/long projections (say, WGS84 datum):
> 
> 1) (xmin, xmax, ymin, ymax)= -180,180, -90, 90
> 2) 0, 360, -90, 90
> 
> Thanks!
> 
> --j




From j.l.h.hartmann at uva.nl  Tue May  3 02:30:18 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue, 03 May 2011 11:30:18 +0200
Subject: [Proj] Dutch correction grid
In-Reply-To: <BANLkTikRkG0+9Q4U8GRovKj5Xxj0sRPmvg@mail.gmail.com>
References: <40955.145.50.39.11.1302160702.squirrel@webmail.hostingdiscounter.nl>	<4D9D724C.9020003@uva.nl>
	<4D9F276C.2050002@pobox.com>	<4D9F2992.6010506@uva.nl>
	<4D9F3801.8060108@pobox.com>	<4DBB1B4A.40809@uva.nl>
	<BANLkTikRkG0+9Q4U8GRovKj5Xxj0sRPmvg@mail.gmail.com>
Message-ID: <4DBFCB2A.7020807@uva.nl>

Ah, my usual fault: I still used gdal 1.7, where there is no NTV2 
format. I compiled 1.8 and now it is available. Getting closer ...

Jan

On 04/29/11 23:39, Jose Gonçalves wrote:
> The +nadgrid command expects a NTv2 file, with extension gsb, not a 
> tiff file. You must use gdal_translate to convert it to the NTv2 
> format. I think that's what Frank Warmerdam referred in a previous email.
>
> Regards
>
> Jose' A. Gonçalves
>
>
>
>
> 2011/4/29 Jan Hartmann <j.l.h.hartmann at uva.nl 
> <mailto:j.l.h.hartmann at uva.nl>>
>
>
>     (About creating a grid shift file for the Dutch RD projection):
>
>     On 04/08/11 18:29, Frank Warmerdam wrote:
>     > As input we would require an input raster with two "bands"
>     > representing the
>     > offset in longitude and latitude.   I'm not sure off hand what
>     the units
>     > are - possibly arcseconds?   The input file would need to be
>     > georeferenced
>     > in latitude and longitude.
>     >
>     > If your input points are sparse and irregular you could likely use
>     > gdal_grid to interpolate a grid from the point data.
>     >
>     > My point was mainly that you don't necessarily have to write an NTv2
>     > "writer" - it is sufficient to get the datum shift data into any
>     GDAL
>     > support grid format.
>     >
>     > Best regards,
>     >
>     I made a 400*400 gdal raster called dxy.tif with two bands, the first
>     with offsets for longitude, the second for latitude, all in
>     arcseconds.
>     If I use this file in the +nadgrids clause of cs2cs, I don't see any
>     difference in the output. If I change the filename into something
>     non-existing, I don 't see any differences either and do not get an
>     error message. Any idea how I can test this further?
>
>     Jan
>
>     Driver: GTiff/GeoTIFF
>     Files: dxy.tif
>     Size is 400, 400
>     Coordinate System is:
>     GEOGCS["RT38",
>         DATUM["Stockholm_1938",
>             SPHEROID["Bessel 1841",6377397.155,299.1528128000008,
>                 AUTHORITY["EPSG","7004"]],
>             AUTHORITY["EPSG","6308"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4308"]]
>     Origin = (3.386235000000000,50.762069400000001)
>     Pixel Size = (0.009627452750000,0.007066402750000)
>     Metadata:
>       AREA_OR_POINT=Area
>     Image Structure Metadata:
>       INTERLEAVE=PIXEL
>     Corner Coordinates:
>     Upper Left  (   3.3862350,  50.7620694) (  3d23'10.45"E,
>     50d45'43.45"N)
>     Lower Left  (   3.3862350,  53.5886305) (  3d23'10.45"E,
>     53d35'19.07"N)
>     Upper Right (   7.2372161,  50.7620694) (  7d14'13.98"E,
>     50d45'43.45"N)
>     Lower Right (   7.2372161,  53.5886305) (  7d14'13.98"E,
>     53d35'19.07"N)
>     Center      (   5.3117256,  52.1753499) (  5d18'42.21"E,
>     52d10'31.26"N)
>     Band 1 Block=400x1 Type=Float64, ColorInterp=Gray
>     Band 2 Block=400x1 Type=Float64, ColorInterp=Undefined
>     _______________________________________________
>     Proj mailing list
>     Proj at lists.maptools.org <mailto:Proj at lists.maptools.org>
>     http://lists.maptools.org/mailman/listinfo/proj
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110503/76c50684/attachment.html>

From noorcs22 at gmail.com  Tue May  3 06:30:00 2011
From: noorcs22 at gmail.com (Mustafa646)
Date: Tue, 3 May 2011 06:30:00 -0700 (PDT)
Subject: [Proj] How to get Projection information from DWG file
Message-ID: <1304429400039-6327272.post@n2.nabble.com>

I have a AutoCad drawing file of some part of sweden. I have converted this
dwg file into shape file. When I opened this shapefile in MapWindow, i
noticed that there is no projection information defined in it. I would like
to know, how i can get projection information from dwg file before
converting it into shapefile ? May i use some tool or software ? Need some
guidance.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/How-to-get-Projection-information-from-DWG-file-tp6327272p6327272.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From j.l.h.hartmann at uva.nl  Tue May  3 06:34:48 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue, 03 May 2011 15:34:48 +0200
Subject: [Proj] Dutch correction grid
In-Reply-To: <4DBB1B4A.40809@uva.nl>
References: <40955.145.50.39.11.1302160702.squirrel@webmail.hostingdiscounter.nl>	<4D9D724C.9020003@uva.nl>
	<4D9F276C.2050002@pobox.com>	<4D9F2992.6010506@uva.nl>
	<4D9F3801.8060108@pobox.com> <4DBB1B4A.40809@uva.nl>
Message-ID: <4DC00478.1030602@uva.nl>


(About creating a grid shift file for the Dutch RD projection):
> On 04/08/11 18:29, Frank Warmerdam wrote:
>> As input we would require an input raster with two "bands"
>> representing the
>> offset in longitude and latitude.   I'm not sure off hand what the units
>> are - possibly arcseconds?   The input file would need to be
>> georeferenced
>> in latitude and longitude.
>>
>> If your input points are sparse and irregular you could likely use
>> gdal_grid to interpolate a grid from the point data.
>>
>> My point was mainly that you don't necessarily have to write an NTv2
>> "writer" - it is sufficient to get the datum shift data into any GDAL
>> support grid format.
>>
>> Best regards,
>>
> I made a 400*400 gdal raster called dxy.tif with two bands, the first
> with offsets for longitude, the second for latitude, all in arcseconds.
>
OK, now I get the following error (gdal svn 1.9dev, released 2011/01/18)

$ gdal_translate -of NTv2 -ot Float32  dxy.tif dxy.gsb
Input file size is 400, 400
0ERROR 1: Input and output dataset sizes or band counts do not
match in GDALDatasetCopyWholeRaster()

I had a quick look at the source (gdal/frmts/raw/ntv2dataset.cpp), but 
perhaps someone could point out the error, or where I should look.

Jan

> Driver: GTiff/GeoTIFF
> Files: dxy.tif
> Size is 400, 400
> Coordinate System is:
> GEOGCS["RT38",
>       DATUM["Stockholm_1938",
>           SPHEROID["Bessel 1841",6377397.155,299.1528128000008,
>               AUTHORITY["EPSG","7004"]],
>           AUTHORITY["EPSG","6308"]],
>       PRIMEM["Greenwich",0],
>       UNIT["degree",0.0174532925199433],
>       AUTHORITY["EPSG","4308"]]
> Origin = (3.386235000000000,50.762069400000001)
> Pixel Size = (0.009627452750000,0.007066402750000)
> Metadata:
>     AREA_OR_POINT=Area
> Image Structure Metadata:
>     INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (   3.3862350,  50.7620694) (  3d23'10.45"E, 50d45'43.45"N)
> Lower Left  (   3.3862350,  53.5886305) (  3d23'10.45"E, 53d35'19.07"N)
> Upper Right (   7.2372161,  50.7620694) (  7d14'13.98"E, 50d45'43.45"N)
> Lower Right (   7.2372161,  53.5886305) (  7d14'13.98"E, 53d35'19.07"N)
> Center      (   5.3117256,  52.1753499) (  5d18'42.21"E, 52d10'31.26"N)
> Band 1 Block=400x1 Type=Float64, ColorInterp=Gray
> Band 2 Block=400x1 Type=Float64, ColorInterp=Undefined
>


From warmerdam at pobox.com  Tue May  3 07:25:46 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 03 May 2011 10:25:46 -0400
Subject: [Proj] Dutch correction grid
In-Reply-To: <4DC00478.1030602@uva.nl>
References: <40955.145.50.39.11.1302160702.squirrel@webmail.hostingdiscounter.nl>
	<4D9D724C.9020003@uva.nl> <4D9F276C.2050002@pobox.com>
	<4D9F2992.6010506@uva.nl> <4D9F3801.8060108@pobox.com>
	<4DBB1B4A.40809@uva.nl> <4DC00478.1030602@uva.nl>
Message-ID: <4DC0106A.40906@pobox.com>

On 11-05-03 09:34 AM, Jan Hartmann wrote:
> OK, now I get the following error (gdal svn 1.9dev, released 2011/01/18)
>
> $ gdal_translate -of NTv2 -ot Float32 dxy.tif dxy.gsb
> Input file size is 400, 400
> 0ERROR 1: Input and output dataset sizes or band counts do not
> match in GDALDatasetCopyWholeRaster()
>
> I had a quick look at the source (gdal/frmts/raw/ntv2dataset.cpp), but perhaps
> someone could point out the error, or where I should look.

Jan,

I just tried and ran into the same thing.  It is because NTv2 format also
has two error range bands.  Try creating a four band find with the last two
bands all zeros.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From Mikael.Rittri at carmenta.com  Thu May  5 03:09:28 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Thu, 5 May 2011 10:09:28 +0000
Subject: [Proj] Different lat/lon projections
In-Reply-To: <BANLkTi=Wn8iS8LMbNoKorZtdFLtvP6kMzg@mail.gmail.com>
References: <BANLkTi=Wn8iS8LMbNoKorZtdFLtvP6kMzg@mail.gmail.com>
Message-ID: <E4AB3DD44D22854B819908379DE4AD4938857E30@SETHNWS023.carmenta.se>

Hello Jonathan,

you wrote:

> What is the correct CRS projection string for dealing with
> the following two lat/long projections (say, WGS84 datum):
> 
> 1) (xmin, xmax, ymin, ymax)= -180,180, -90, 90

Answer:

    +proj=longlat 

(or alternatively, +proj=latlong; I think these are equivalent).

> 2) 0, 360, -90, 90 

Answer:

    +proj=longlat +lon_wrap=180

The +lon_wrap parameter is documented on http://trac.osgeo.org/proj/wiki/GenParms
But it seems that the simple proj command recognizes but ignores +lon_wrap;
the verbose option does not say that +lon_wrap is unused, but it has
no effect (perhaps I am using it wrong):

C:\Program Files\FWTools2.4.7>proj +proj=utm +zone=11 +datum=WGS84 +lon_wrap=180 -I -v
#Universal Transverse Mercator (UTM)
# Cyl, Sph
# zone= south
# +proj=utm +zone=11 +datum=WGS84 +lon_wrap=180 +ellps=WGS84 +towgs84=0,0,0
500000 111111
117dW 1d0'18.918"N

Fortunately, the cs2cs command supports lon_wrap:

C:\Program Files\FWTools2.4.7>cs2cs +proj=utm +zone=11 +datum=WGS84 +to +proj=longlat +datum=WGS84 +lon_wrap=180 -v
# ---- From Coordinate System ----
#Universal Transverse Mercator (UTM)
# Cyl, Sph
# zone= south
# +proj=utm +zone=11 +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
# ---- To Coordinate System ----
#Lat/long (Geodetic alias)
#
# +proj=longlat +datum=WGS84 +lon_wrap=180 +ellps=WGS84 +towgs84=0,0,0
500000 111111
243dE 1d0'18.918"N 0.000

since we get 243dE as output. 

By the way, if you would like to achieve a similar effect 
as +lon_wrap for a cylindrical map projection, you can set
the central meridian +lon_0 to be at any longitude, but 
if you also want (most) coordinates to stay the same as 
they were with +lon_0=0, you must also modify the +x_0 
value (the false easting) to compensate. An example 
of this trick can be found here: 

http://lists.osgeo.org/pipermail/metacrs/2010-November/000517.html  

Best regards,
Mikael Rittri
Carmenta 
Sweden
http://www.carmenta.com

________________________________

From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Jonathan Greenberg
Sent: den 28 april 2011 22:34
To: proj at lists.maptools.org
Subject: [Proj] Different lat/lon projections

Folks: 
What is the correct CRS projection string for dealing with the following two lat/long projections (say, WGS84 datum):

1) (xmin, xmax, ymin, ymax)= -180,180, -90, 90
2) 0, 360, -90, 90

Thanks!

--j

-- 
Jonathan A. Greenberg, PhD
Assistant Project Scientist
Center for Spatial Technologies and Remote Sensing (CSTARS)
Department of Land, Air and Water Resources
University of California, Davis
One Shields Avenue
Davis, CA 95616
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307




From Mikael.Rittri at carmenta.com  Thu May  5 03:22:19 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Thu, 5 May 2011 10:22:19 +0000
Subject: [Proj] Offset when converting coordinates from ESRI:31700 to
 EPSG:4326
In-Reply-To: <4DBEA2B6.8070506@romtelecom.ro>
References: <4DB14312.7050804@romtelecom.ro>
	<BANLkTinFt_uoVTyyg=bNFBjbvmoaD4eX-g@mail.gmail.com>
	<E4AB3DD44D22854B819908379DE4AD4938845458@SETHNWS023.carmenta.se>
	<4DBE6547.6080909@romtelecom.ro>
	<E4AB3DD44D22854B819908379DE4AD493885697E@SETHNWS023.carmenta.se>
	<4DBEA2B6.8070506@romtelecom.ro>
Message-ID: <E4AB3DD44D22854B819908379DE4AD4938857E59@SETHNWS023.carmenta.se>

Adrian wrote:

> There is a slight difference between the ESRI and EPSG projections
> (as depicted in the images attached), but I'm not sure which is 
> closer to the truth ( I suspect the ESRI projection - but my data 
> is not that accurate, so I could be wrong). 

I should have given a source for my claim that sterea is better
than stere. Please see the archived mail from Oscar van Vlijmen:

http://lists.maptools.org/pipermail/proj/2009-April/004603.html

Best regards,
Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

-----Original Message-----
From: Adrian Popa [mailto:adrian_gh.popa at romtelecom.ro] 
Sent: den 2 maj 2011 14:25
To: Mikael Rittri
Cc: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Offset when converting coordinates from ESRI:31700 to EPSG:4326

Thank you Mikael, Jean-Claude

By running your command I got the coordinates I expected - thank you very much! (I thought +towgs84 parameter implied using +to +init=epsg:4326)

There is a slight difference between the ESRI and EPSG projections (as depicted in the images attached), but I'm not sure which is closer to the truth ( I suspect the ESRI projection - but my data is not that accurate, so I could be wrong).

Thank you again for your help!
Regards,
Adrian

Acest mesaj si orice fisiere sau documente atasate contin informatii confidentiale, clasificate conform regulilor interne ROMTELECOM. Mesajul este destinat doar persoanei sau entitatii adresate si altora autorizati sa-l primeasca. Daca dvs. nu sunteti in aceasta situatie, prin aceasta va informam ca orice dezvaluire, copiere, distribuire sau orice alta actiune bazata pe continutul acestor informatii este strict interzisa si pot fi aplicate sanctiuni, potrivit legii. Daca ati primit acest mesaj din greseala, va rugam sa ne informati imediat si sa stergeti mesajul din sistemul dvs. De asemenea, va rugam sa tineti cont ca transmisia nu poate fi garantata ca fiind sigura sau fara erori. Va multumim!


From warmerdam at pobox.com  Thu May  5 07:27:42 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 05 May 2011 10:27:42 -0400
Subject: [Proj] Different lat/lon projections
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD4938857E30@SETHNWS023.carmenta.se>
References: <BANLkTi=Wn8iS8LMbNoKorZtdFLtvP6kMzg@mail.gmail.com>
	<E4AB3DD44D22854B819908379DE4AD4938857E30@SETHNWS023.carmenta.se>
Message-ID: <4DC2B3DE.7020205@pobox.com>

On 11-05-05 06:09 AM, Mikael Rittri wrote:
> Answer:
>
>      +proj=longlat +lon_wrap=180
>
> The +lon_wrap parameter is documented on http://trac.osgeo.org/proj/wiki/GenParms
> But it seems that the simple proj command recognizes but ignores +lon_wrap;
> the verbose option does not say that +lon_wrap is unused, but it has
> no effect (perhaps I am using it wrong):

Mikael,

+lon_wrap is only applied in the pj_transform() function which means it
is applied by cs2cs but not by the proj commandline program which directly
calls pj_fwd() and pj_inv().

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ksshannon at gmail.com  Mon May  9 13:39:28 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Mon, 9 May 2011 14:39:28 -0600
Subject: [Proj] Build on windows
Message-ID: <BANLkTikjL0-XP5pogCywRni-AJybO4eGDg@mail.gmail.com>

I can't seem to get the trunk to build on windows:

pj_list.obj : error LNK2001: unresolved external symbol _pj_s_igh
pj_list.obj : error LNK2001: unresolved external symbol _pj_igh

This is the trunk, and I think there may just be an error in the make file,
but I don't see it.  An obj file doesn't seem to get made from the pj_igh.c

kss

/**
 *
 * Kyle Shannon
 * ksshannon at gmail.com
 *
 */
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110509/f493585f/attachment.html>

From warmerdam at pobox.com  Mon May  9 18:33:29 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 09 May 2011 21:33:29 -0400
Subject: [Proj] Build on windows
In-Reply-To: <BANLkTikjL0-XP5pogCywRni-AJybO4eGDg@mail.gmail.com>
References: <BANLkTikjL0-XP5pogCywRni-AJybO4eGDg@mail.gmail.com>
Message-ID: <4DC895E9.903@pobox.com>

On 11-05-09 04:39 PM, Kyle Shannon wrote:
> I can't seem to get the trunk to build on windows:
>
> pj_list.obj : error LNK2001: unresolved external symbol _pj_s_igh
> pj_list.obj : error LNK2001: unresolved external symbol _pj_igh
>
> This is the trunk, and I think there may just be an error in the make file, but
> I don't see it.  An obj file doesn't seem to get made from the pj_igh.c

Kyle,

Fixed now ... thanks for the notice.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ksshannon at gmail.com  Tue May 10 09:17:37 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Tue, 10 May 2011 10:17:37 -0600
Subject: [Proj] Build on windows
In-Reply-To: <4DC895E9.903@pobox.com>
References: <BANLkTikjL0-XP5pogCywRni-AJybO4eGDg@mail.gmail.com>
	<4DC895E9.903@pobox.com>
Message-ID: <BANLkTikVp-JjSkuSKOYZ1mNt6U3ga+rGGg@mail.gmail.com>

Thanks Frank.

kss

/**
 *
 * Kyle Shannon
 * ksshannon at gmail.com
 *
 */




On Mon, May 9, 2011 at 19:33, Frank Warmerdam <warmerdam at pobox.com> wrote:

> On 11-05-09 04:39 PM, Kyle Shannon wrote:
> > I can't seem to get the trunk to build on windows:
> >
> > pj_list.obj : error LNK2001: unresolved external symbol _pj_s_igh
> > pj_list.obj : error LNK2001: unresolved external symbol _pj_igh
> >
> > This is the trunk, and I think there may just be an error in the make
> file, but
> > I don't see it.  An obj file doesn't seem to get made from the pj_igh.c
>
> Kyle,
>
> Fixed now ... thanks for the notice.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110510/c7415b52/attachment.html>

From j.l.h.hartmann at uva.nl  Sat May 21 05:12:31 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat, 21 May 2011 14:12:31 +0200
Subject: [Proj] Using a GDAL-generated NTV2-file
In-Reply-To: <4DC0106A.40906@pobox.com>
References: <40955.145.50.39.11.1302160702.squirrel@webmail.hostingdiscounter.nl>
	<4D9D724C.9020003@uva.nl> <4D9F276C.2050002@pobox.com>
	<4D9F2992.6010506@uva.nl> <4D9F3801.8060108@pobox.com>
	<4DBB1B4A.40809@uva.nl> <4DC00478.1030602@uva.nl>
	<4DC0106A.40906@pobox.com>
Message-ID: <4DD7AC2F.9040601@uva.nl>

On 05/03/11 16:25, Frank Warmerdam wrote:
>
> I just tried and ran into the same thing.  It is because NTv2 format also
> has two error range bands.  Try creating a four band find with the 
> last two
> bands all zeros.

Hi Frank,

I was able to create a valid NTV2 file from a four-band raster tif (see 
gdalinfo output below). First two bands are displacements in lon and lat 
(arcseconds), last two are zero. When I use that file in a +nadgrids 
clause in proj, I get the following error:

GS_COUNT(160000) does not match expected cells (400x-397=-158800)

Any idea ?

Jan

-----------------------------------------------------------------------------------------------------------------------------------------------------------

$ gdalinfo test.ntv2
Driver: NTv2/NTv2 Datum Grid Shift
Files: test.ntv2
Size is 400, 400
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         TOWGS84[0,0,0,0,0,0,0],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9108"]],
     AUTHORITY["EPSG","4326"]]
Origin = (3.386235000000001,50.762069400000001)
Pixel Size = (0.009627452750000,0.007066402750000)
Metadata:
   GS_TYPE=SECONDS
   VERSION=
   SYSTEM_F=
   SYSTEM_T=
   MAJOR_F=0
   MINOR_F=0
   MAJOR_T=0
   MINOR_T=0
   SUB_NAME=
   PARENT=NONE
   CREATED=
   UPDATED=
Subdatasets:
   SUBDATASET_0_NAME=NTv2:0:test.ntv2
   SUBDATASET_0_DESC=
Corner Coordinates:
Upper Left  (   3.3862350,  50.7620694) (  3d23'10.45"E, 50d45'43.45"N)
Lower Left  (   3.3862350,  53.5886305) (  3d23'10.45"E, 53d35'19.07"N)
Upper Right (   7.2372161,  50.7620694) (  7d14'13.98"E, 50d45'43.45"N)
Lower Right (   7.2372161,  53.5886305) (  7d14'13.98"E, 53d35'19.07"N)
Center      (   5.3117256,  52.1753499) (  5d18'42.21"E, 52d10'31.26"N)
Band 1 Block=400x1 Type=Float32, ColorInterp=Undefined
   Description = Latitude Offset
Band 2 Block=400x1 Type=Float32, ColorInterp=Undefined
   Description = Longitude Offset
Band 3 Block=400x1 Type=Float32, ColorInterp=Undefined
   Description = Latitude Error
Band 4 Block=400x1 Type=Float32, ColorInterp=Undefined
   Description = Longitude Error

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110521/e4943e8c/attachment.html>

From j.l.h.hartmann at uva.nl  Tue May 24 02:51:39 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue, 24 May 2011 11:51:39 +0200
Subject: [Proj] Using a GDAL-generated NTV2-file
In-Reply-To: <4DD7E2EE.8070002@pobox.com>
References: <40955.145.50.39.11.1302160702.squirrel@webmail.hostingdiscounter.nl>
	<4D9D724C.9020003@uva.nl> <4D9F276C.2050002@pobox.com>
	<4D9F2992.6010506@uva.nl> <4D9F3801.8060108@pobox.com>
	<4DBB1B4A.40809@uva.nl> <4DC00478.1030602@uva.nl>
	<4DC0106A.40906@pobox.com> <4DD7AC2F.9040601@uva.nl>
	<4DD7B0FB.1040107@pobox.com> <4DD7E00E.2060508@uva.nl>
	<4DD7E2EE.8070002@pobox.com>
Message-ID: <4DDB7FAB.4020709@uva.nl>



On 05/21/11 18:06, Frank Warmerdam wrote:
> Jan,
>
> I believe the problem is that the test.tif is south up.  The NTv2 reader
> in PROJ determines the size based on the extents and pixel size and gets
> mixed up as the extents are upside down.  You can flip test.tif with
> gdalwarp.
>
> eg.
> gdalwarp test.tif northup.tif
>
>
Yes, now it works. Just to be sure: is the result of the flipping 
correct? The tif file was created from two point lists, each with a 
lat-lon coordinate and the displacement in arcseconds. Gdal_grid 
converted the lists into two grid files, with the upper boundary having 
a smaller latitude than the lower coordinate. That's OK, as latitude 
values decrease when going north, in contrast with projected coordinates.

Now, what happens when I use gdalwarp on this file? Is the complete file 
mirrored? Are the displacements at the right geographical location?

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110524/70f0dedc/attachment.html>

From warmerdam at pobox.com  Tue May 24 06:18:57 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 24 May 2011 09:18:57 -0400
Subject: [Proj] Using a GDAL-generated NTV2-file
In-Reply-To: <4DDB7FAB.4020709@uva.nl>
References: <40955.145.50.39.11.1302160702.squirrel@webmail.hostingdiscounter.nl>
	<4D9D724C.9020003@uva.nl> <4D9F276C.2050002@pobox.com>
	<4D9F2992.6010506@uva.nl> <4D9F3801.8060108@pobox.com>
	<4DBB1B4A.40809@uva.nl> <4DC00478.1030602@uva.nl>
	<4DC0106A.40906@pobox.com>
	<4DD7AC2F.9040601@uva.nl> <4DD7B0FB.1040107@pobox.com>
	<4DD7E00E.2060508@uva.nl> <4DD7E2EE.8070002@pobox.com>
	<4DDB7FAB.4020709@uva.nl>
Message-ID: <4DDBB041.5060802@pobox.com>

On 11-05-24 05:51 AM, Jan Hartmann wrote:
>
>
> On 05/21/11 18:06, Frank Warmerdam wrote:
>> Jan,
>>
>> I believe the problem is that the test.tif is south up. The NTv2 reader
>> in PROJ determines the size based on the extents and pixel size and gets
>> mixed up as the extents are upside down. You can flip test.tif with
>> gdalwarp.
>>
>> eg.
>> gdalwarp test.tif northup.tif
>>
>>
> Yes, now it works. Just to be sure: is the result of the flipping correct? The
> tif file was created from two point lists, each with a lat-lon coordinate and
> the displacement in arcseconds. Gdal_grid converted the lists into two grid
> files, with the upper boundary having a smaller latitude than the lower
> coordinate. That's OK, as latitude values decrease when going north, in
> contrast with projected coordinates.

Jan,

Ah, it's gdal_grid generated.  I had assumed it's habit of producing
south-up files would have been corrected by now.  It isn't a program
I've had any real input on.

I must contest your statement that "as latitude values decrease when
going north".

> Now, what happens when I use gdalwarp on this file? Is the complete file
> mirrored? Are the displacements at the right geographical location?

gdalwarp does a rectification to north up.  In a regular case like this
it should just amount to a mirroring but you might want to inspect it a
bit to be sure the corners are still the same, etc.

The proof will be in the pudding - if you get the right transformation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From roger at opq.se  Tue May 24 06:24:47 2011
From: roger at opq.se (Roger Oberholtzer)
Date: Tue, 24 May 2011 15:24:47 +0200
Subject: [Proj] wgs84 northings and eastings
Message-ID: <1306243487.32720.122.camel@acme.pacific>

I have had a request to provide locations (northings and eastings) in
wgs84. Up to now, I have always worked with a specific projection
somewhere in the world. Such a projection seems rather senseless to me.
But there you have it. My question is, given wgs84 lat/longs, how would
I request wgs84 northings / eastings from proj. Would this be adequate?

+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +a=6378137 +b=6378137 +units=m +no_defs 

Equally worrisome is that I am unsure how to test this as the requester
has no sample data. Sigh...


Yours sincerely,

Roger Oberholtzer

OPQ Systems / Ramböll RST

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696
roger.oberholtzer at ramboll.se
________________________________________

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden
www.rambollrst.se




From gdt at ir.bbn.com  Tue May 24 07:14:57 2011
From: gdt at ir.bbn.com (Greg Troxel)
Date: Tue, 24 May 2011 10:14:57 -0400
Subject: [Proj] wgs84 northings and eastings
In-Reply-To: <1306243487.32720.122.camel@acme.pacific> (Roger Oberholtzer's
	message of "Tue, 24 May 2011 15:24:47 +0200")
References: <1306243487.32720.122.camel@acme.pacific>
Message-ID: <rmi1uzoyyla.fsf@fnord.ir.bbn.com>


Roger Oberholtzer <roger at opq.se> writes:

> I have had a request to provide locations (northings and eastings) in
> wgs84. Up to now, I have always worked with a specific projection

It seems likely that the person is looking for WGS84 UTM.  There's no
such thing as "WGS84 eastings and northing" without talking about some
projection (such as UTM or the many US state plane coordinate systems
and national grids).

> somewhere in the world. Such a projection seems rather senseless to me.
> But there you have it. My question is, given wgs84 lat/longs, how would
> I request wgs84 northings / eastings from proj. Would this be adequate?
>
> +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +a=6378137 +b=6378137 +units=m +no_defs 
This looks to be 'spherical mercator'.

The real question is what the data is going to be used for.  UTM in the
right zone will likely have more useful properties, such as distances in
the grid being close to distances on the ground, angles being preserved etc.

> Equally worrisome is that I am unsure how to test this as the requester
> has no sample data. Sigh...

So how can they tell you didn't do what they want if you give them UTM?



-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110524/23322ea8/attachment.sig>

From jrepetto at free.fr  Tue May 24 07:17:31 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue, 24 May 2011 16:17:31 +0200
Subject: [Proj] wgs84 northings and eastings
In-Reply-To: <1306243487.32720.122.camel@acme.pacific>
References: <1306243487.32720.122.camel@acme.pacific>
Message-ID: <4DDBBDFB.2090903@free.fr>

Le 24/05/2011 15:24, Roger Oberholtzer a écrit :
> I have had a request to provide locations (northings and eastings) in
> wgs84. Up to now, I have always worked with a specific projection
> somewhere in the world. Such a projection seems rather senseless to me.
> But there you have it. My question is, given wgs84 lat/longs, how would
> I request wgs84 northings / eastings from proj. Would this be adequate?
>
> +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +a=6378137 +b=6378137 +units=m +no_defs
>
> Equally worrisome is that I am unsure how to test this as the requester
> has no sample data. Sigh...

If there is no projection, easting = longitude and northing = latitude.


From molnar at sas.elte.hu  Tue May 24 07:32:09 2011
From: molnar at sas.elte.hu (molnar at sas.elte.hu)
Date: Tue, 24 May 2011 16:32:09 +0200 (CEST)
Subject: [Proj] wgs84 northings and eastings
In-Reply-To: <1306243487.32720.122.camel@acme.pacific>
References: <1306243487.32720.122.camel@acme.pacific>
Message-ID: <b2887e20461e19a34054ad9921fc63ae.squirrel@sas.elte.hu>

Dear Roger,

I am not exactly sure what you really need, but 'eqc' is the equidistant
cylindrical projection, what converts latitude and longitude values simply
to length.

+proj=eqc +datum=WGS84

what about +proj=latlon ?

Gabor



> I have had a request to provide locations (northings and eastings) in
> wgs84. Up to now, I have always worked with a specific projection
> somewhere in the world. Such a projection seems rather senseless to me.
> But there you have it. My question is, given wgs84 lat/longs, how would
> I request wgs84 northings / eastings from proj. Would this be adequate?
>
> +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +a=6378137 +b=6378137 +units=m
> +no_defs
>
> Equally worrisome is that I am unsure how to test this as the requester
> has no sample data. Sigh...
>
>
> Yours sincerely,
>
> Roger Oberholtzer
>
> OPQ Systems / RambÃ¶ll RST
>
> Office: Int +46 10-615 60 20
> Mobile: Int +46 70-815 1696
> roger.oberholtzer at ramboll.se
> ________________________________________
>
> RambÃ¶ll Sverige AB
> Krukmakargatan 21
> P.O. Box 17009
> SE-104 62 Stockholm, Sweden
> www.rambollrst.se
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From ndzinn at comcast.net  Tue May 24 07:32:14 2011
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Tue, 24 May 2011 09:32:14 -0500
Subject: [Proj] wgs84 northings and eastings
In-Reply-To: <1306243487.32720.122.camel@acme.pacific>
References: <1306243487.32720.122.camel@acme.pacific>
Message-ID: <BA34B1CF12B64F09B733DF30567C555F@NoelHmPC>

Not a surprise that your requestor has no sample data.  For northings and 
eastings you do need to define a projection.  However, without a projection 
you can provide WGS84 geocentric X, Y & Z, also know as ECEF, within which 
all the points are related by trigonometry in 3D with none of the scale 
distortion that eastings and northings are heir to.  Sell your requestor 
that.  An extra dimension gratis!  -Noel

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)

-----Original Message----- 
From: Roger Oberholtzer
Sent: Tuesday, May 24, 2011 8:24 AM
To: proj at lists.maptools.org
Subject: [Proj] wgs84 northings and eastings

I have had a request to provide locations (northings and eastings) in
wgs84. Up to now, I have always worked with a specific projection
somewhere in the world. Such a projection seems rather senseless to me.
But there you have it. My question is, given wgs84 lat/longs, how would
I request wgs84 northings / eastings from proj. Would this be adequate?

+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +a=6378137 +b=6378137 +units=m 
+no_defs

Equally worrisome is that I am unsure how to test this as the requester
has no sample data. Sigh...


Yours sincerely,

Roger Oberholtzer

OPQ Systems / Ramböll RST

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696
roger.oberholtzer at ramboll.se
________________________________________

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden
www.rambollrst.se


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj 




From roger at opq.se  Tue May 24 08:05:03 2011
From: roger at opq.se (Roger Oberholtzer)
Date: Tue, 24 May 2011 17:05:03 +0200
Subject: [Proj] wgs84 northings and eastings
In-Reply-To: <4DDBBDFB.2090903@free.fr>
References: <1306243487.32720.122.camel@acme.pacific>
	<4DDBBDFB.2090903@free.fr>
Message-ID: <1306249503.32720.156.camel@acme.pacific>

On Tue, 2011-05-24 at 16:17 +0200, Jean-Claude Repetto wrote:
> Le 24/05/2011 15:24, Roger Oberholtzer a écrit :
> > I have had a request to provide locations (northings and eastings) in
> > wgs84. Up to now, I have always worked with a specific projection
> > somewhere in the world. Such a projection seems rather senseless to me.
> > But there you have it. My question is, given wgs84 lat/longs, how would
> > I request wgs84 northings / eastings from proj. Would this be adequate?
> >
> > +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +a=6378137 +b=6378137 +units=m +no_defs
> >
> > Equally worrisome is that I am unsure how to test this as the requester
> > has no sample data. Sigh...
> 
> If there is no projection, easting = longitude and northing = latitude.

In fact, this is how I have defined wgs84 up to now. In our system it is
a handy way to get lat/longs that can then be projected somewhere else.
In general use, however, we have always used some local projection
(e.g., ED50 or whatever) to obtain northings /eastings, and were set for
computing distances between points.

The problem is the person requesting this is not an expert in this area.
They are convinced there is a single standard definition for WGS84 as a
projection. As such, they feel they need to specify nothing more than
'wgs84', and northings /eastings will just flow.

I thought maybe they knew something I did not know. Or that there is
indeed a commonly accepted definition of wgs84 as a projection that I
had missed.



Yours sincerely,

Roger Oberholtzer

OPQ Systems / Ramböll RST

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696
roger.oberholtzer at ramboll.se
________________________________________

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden
www.rambollrst.se




From cjmce at lsu.edu  Tue May 24 08:27:06 2011
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 24 May 2011 10:27:06 -0500
Subject: [Proj] wgs84 northings and eastings
References: <1306243487.32720.122.camel@acme.pacific><4DDBBDFB.2090903@free.fr>
	<1306249503.32720.156.camel@acme.pacific>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7026A699D@email002.lsu.edu>

ED50 is not a projection.  It is a datum, just like WGS84.
 
Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3223A
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group


________________________________

From: proj-bounces at lists.maptools.org on behalf of Roger Oberholtzer
Sent: Tue 24-May-11 10:05
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] wgs84 northings and eastings



On Tue, 2011-05-24 at 16:17 +0200, Jean-Claude Repetto wrote:
> Le 24/05/2011 15:24, Roger Oberholtzer a écrit :
> > I have had a request to provide locations (northings and eastings) in
> > wgs84. Up to now, I have always worked with a specific projection
> > somewhere in the world. Such a projection seems rather senseless to me.
> > But there you have it. My question is, given wgs84 lat/longs, how would
> > I request wgs84 northings / eastings from proj. Would this be adequate?
> >
> > +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +a=6378137 +b=6378137 +units=m +no_defs
> >
> > Equally worrisome is that I am unsure how to test this as the requester
> > has no sample data. Sigh...
>
> If there is no projection, easting = longitude and northing = latitude.

In fact, this is how I have defined wgs84 up to now. In our system it is
a handy way to get lat/longs that can then be projected somewhere else.
In general use, however, we have always used some local projection
(e.g., ED50 or whatever) to obtain northings /eastings, and were set for
computing distances between points.

The problem is the person requesting this is not an expert in this area.
They are convinced there is a single standard definition for WGS84 as a
projection. As such, they feel they need to specify nothing more than
'wgs84', and northings /eastings will just flow.

I thought maybe they knew something I did not know. Or that there is
indeed a commonly accepted definition of wgs84 as a projection that I
had missed.



Yours sincerely,

Roger Oberholtzer

OPQ Systems / Ramböll RST

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696
roger.oberholtzer at ramboll.se
________________________________________

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden
www.rambollrst.se


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110524/78de3553/attachment.html>

From charles.karney at sri.com  Tue May 24 08:29:54 2011
From: charles.karney at sri.com (Charles Karney)
Date: Tue, 24 May 2011 11:29:54 -0400
Subject: [Proj] wgs84 northings and eastings
In-Reply-To: <1306243487.32720.122.camel@acme.pacific>
References: <1306243487.32720.122.camel@acme.pacific>
Message-ID: <4DDBCEF2.5050405@sri.com>

It sounds as though your requester may not be knowledgeable about the
terminology.  I recommend providing both latitude/longitude and
utmzone/easting/northing.

GeographicLib's GeoConvert can do the conversion for you as in

echo 45N 75W | GeoConvert -u
18N 500000 4982950

(GeoConvert is pre-wired for WGS84.)


On 05/24/11 09:24, Roger Oberholtzer wrote:
> I have had a request to provide locations (northings and eastings) in
> wgs84. Up to now, I have always worked with a specific projection
> somewhere in the world. Such a projection seems rather senseless to me.
> But there you have it. My question is, given wgs84 lat/longs, how would
> I request wgs84 northings / eastings from proj. Would this be adequate?
>
> +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +a=6378137 +b=6378137 +units=m +no_defs
>
> Equally worrisome is that I am unsure how to test this as the requester
> has no sample data. Sigh...
>


From jgpallero at gmail.com  Tue May 24 08:31:57 2011
From: jgpallero at gmail.com (=?ISO-8859-1?Q?Jos=E9_Luis_Garc=EDa_Pallero?=)
Date: Tue, 24 May 2011 17:31:57 +0200
Subject: [Proj] About UTM projection: sphere, ellipsoid or both?
Message-ID: <BANLkTikk_jSeU7n0JZxLQ6R8T_woNiw6EA@mail.gmail.com>

Hello,

If I execute proj -l=tmerc I can see the general information about the
transverse Mercator projection:

    tmerc : Transverse Mercator
        Cyl, Sph&Ell

An for the UTM information proj -l=utm

      utm : Universal Transverse Mercator (UTM)
        Cyl, Sph
        zone= south

As you can see, apparently the transverse Mercator is defined for the
sphere and the ellipsoid, but the UTM only for the sphere. But UTM
should be only a particular case of transverse mercator/Gauß-Krüger
projection.
Is this a bug in documentation or actually the UTM in proj is defined
only for the sphere?

Thanks

-- 
*****************************************
José Luis García Pallero
jgpallero at gmail.com
(o<
/ / \
V_/_
Use Debian GNU/Linux and enjoy!
*****************************************


From roger at opq.se  Tue May 24 10:09:42 2011
From: roger at opq.se (Roger Oberholtzer)
Date: Tue, 24 May 2011 19:09:42 +0200
Subject: [Proj] wgs84 northings and eastings
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7026A699D@email002.lsu.edu>
References: <1306243487.32720.122.camel@acme.pacific>
	<4DDBBDFB.2090903@free.fr> <1306249503.32720.156.camel@acme.pacific>
	<B597ADFC46B67741B18EA6AA13613FF7026A699D@email002.lsu.edu>
Message-ID: <1306256982.32720.165.camel@acme.pacific>

On Tue, 2011-05-24 at 10:27 -0500, Clifford J Mugnier wrote:
> ED50 is not a projection.  It is a datum, just like WGS84.

Sorry. Sloppiness is catching. We have implemented something we call
'ED50' to contain a projection (utm) as well as a datum shift. Our
implementation is ok. Just my description is a bit less than accurate.

> 

Yours sincerely,

Roger Oberholtzer

OPQ Systems / Ramböll RST

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696
roger.oberholtzer at ramboll.se
________________________________________

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden
www.rambollrst.se




From roger at opq.se  Tue May 24 10:29:45 2011
From: roger at opq.se (Roger Oberholtzer)
Date: Tue, 24 May 2011 19:29:45 +0200
Subject: [Proj] wgs84 northings and eastings
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7026A699D@email002.lsu.edu>
References: <1306243487.32720.122.camel@acme.pacific>
	<4DDBBDFB.2090903@free.fr> <1306249503.32720.156.camel@acme.pacific>
	<B597ADFC46B67741B18EA6AA13613FF7026A699D@email002.lsu.edu>
Message-ID: <1306258185.32720.186.camel@acme.pacific>

So, perhaps I should re-phrase my original question:

I would like to project WGS84 latitude and longitudes on to a transverse
mercator surface, without any datum shift. How should that be specified
in proj? I use the C interface. Using ED50 as an example, I divide the
proj string into a 'from':

	from = pj_init_plus("+proj=latlong +datum=WGS84");

and a 'to':

	to = pj_init_plus("+proj=utm "
			"+ellps=intl "
			"+k=0.999600 "
			"+x_0=500000.0 "
			"+y_0=0.0 "
			"+zone=30 "
			"+units=m "
			"+towgs84=-125.098545,-76.000054,-156.198703,0.0,0.0,-1.129,8.30463103 "
			"+no_defs");

I then use pj_transform(from, to, ...) to do the transform. (Switching
the 'from' and 'to' allows a reverse transform).

Would this be correct for the transform?

	from = pj_init_plus("+proj=latlong +datum=WGS84");

	to = pj_init_plus("+proj=merc " 
                		"+k=1.0 "
				"+x_0=0 " 
				"+y_0=0 "
				"+lon_0=0.0 "
				"+lat_0=0.0 "
				"+towgs84=0,0,0,0,0,0,0 "
				"+a=6378137 "
				"+b=6378137 "
				"+no_defs");

It is the entire 'from', and the +towgs= in the 'to' that have me
confused. This is based on http://spatialreference.org/ref/sr-org/45/

All comments welcome!



Yours sincerely,

Roger Oberholtzer

OPQ Systems / Ramböll RST

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696
roger.oberholtzer at ramboll.se
________________________________________

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden
www.rambollrst.se




From cjmce at lsu.edu  Wed May 25 14:00:00 2011
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 25 May 2011 16:00:00 -0500
Subject: [Proj] Establishing Elevations with GPS - Best Practices - LSU & NGS
References: <B597ADFC46B67741B18EA6AA13613FF7026A6998@email002.lsu.edu>
	<B597ADFC46B67741B18EA6AA13613FF7026A699A@email002.lsu.edu>
	<B597ADFC46B67741B18EA6AA13613FF7026A699B@email002.lsu.edu>
	<B597ADFC46B67741B18EA6AA13613FF7026A69AD@email002.lsu.edu>
	<B597ADFC46B67741B18EA6AA13613FF7026A69AE@email002.lsu.edu>
	<B597ADFC46B67741B18EA6AA13613FF7026A69AF@email002.lsu.edu>
	<B597ADFC46B67741B18EA6AA13613FF7026A69B0@email002.lsu.edu>
	<B597ADFC46B67741B18EA6AA13613FF7026A69B1@email002.lsu.edu>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7026A69B9@email002.lsu.edu>

Folks:
 
I recommend that you register for a free seminar we're putting on at the University of New Orleans (Lindy Boggs Conference Center - Lakefront):
 
http://c4g.lsu.edu/c4g15/index.php?option=com_eventbooking&view=event&Itemid=85 <http://c4g.lsu.edu/c4g15/index.php?option=com_eventbooking&view=event&Itemid=85>  
 
(Copy this url into your browser window - if you just "click" on it you'll get directed to my LSU login instead.)
 
We will be issuing certificates for 16 pdhs approved by LAPELS to all attendees.
 
June 20 & June 21
 
Best regards,
 
Cliff
 
Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3531
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110525/a96d23aa/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: RTN Best Practices Seminar.docx
Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document
Size: 19766 bytes
Desc: RTN Best Practices Seminar.docx
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110525/a96d23aa/attachment.docx>

From Mikael.Rittri at carmenta.com  Thu May 26 06:27:37 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Thu, 26 May 2011 13:27:37 +0000
Subject: [Proj] wgs84 northings and eastings
In-Reply-To: <1306258185.32720.186.camel@acme.pacific>
References: <1306243487.32720.122.camel@acme.pacific>
	<4DDBBDFB.2090903@free.fr> <1306249503.32720.156.camel@acme.pacific>
	<B597ADFC46B67741B18EA6AA13613FF7026A699D@email002.lsu.edu>
	<1306258185.32720.186.camel@acme.pacific>
Message-ID: <E4AB3DD44D22854B819908379DE4AD49388597B0@SETHNWS023.carmenta.se>

Hello Roger.

> I would like to project WGS84 latitude and longitudes on 
> to a transverse mercator surface, without any datum shift. 

You write "transverse mercator", but it seems you mean 
ordinary mercator (Web Mercator, to be specific).  

The +to definition you suggest is not correct for WGS84 Web Mercator, though.
This is because the datum shift you use, 

   +towgs84=0,0,0,0,0,0,0

is not the same as unmodified lat/long, or "without any datum shift"
as you say. It means "no datum shift" only if the +from and +to definitions
use the same ellipsoid, and in your case the +from definition uses the
WGS84 ellipsoid, while the +to definition uses a sphere instead.  

So, you have to use a trick: use 

   +nadgrids=@null 

instead. See 

http://trac.osgeo.org/proj/wiki/FAQ#ChangingEllipsoidWhycantIconvertfromWGS84toGoogleEarthVirtualGlobeMercator

Regards,
Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Roger Oberholtzer
Sent: den 24 maj 2011 19:30
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] wgs84 northings and eastings

So, perhaps I should re-phrase my original question:

I would like to project WGS84 latitude and longitudes on to a transverse mercator surface, without any datum shift. How should that be specified in proj? I use the C interface. Using ED50 as an example, I divide the proj string into a 'from':

	from = pj_init_plus("+proj=latlong +datum=WGS84");

and a 'to':

	to = pj_init_plus("+proj=utm "
			"+ellps=intl "
			"+k=0.999600 "
			"+x_0=500000.0 "
			"+y_0=0.0 "
			"+zone=30 "
			"+units=m "
			"+towgs84=-125.098545,-76.000054,-156.198703,0.0,0.0,-1.129,8.30463103 "
			"+no_defs");

I then use pj_transform(from, to, ...) to do the transform. (Switching the 'from' and 'to' allows a reverse transform).

Would this be correct for the transform?

	from = pj_init_plus("+proj=latlong +datum=WGS84");

	to = pj_init_plus("+proj=merc " 
                		"+k=1.0 "
				"+x_0=0 " 
				"+y_0=0 "
				"+lon_0=0.0 "
				"+lat_0=0.0 "
				"+towgs84=0,0,0,0,0,0,0 "
				"+a=6378137 "
				"+b=6378137 "
				"+no_defs");

It is the entire 'from', and the +towgs= in the 'to' that have me confused. This is based on http://spatialreference.org/ref/sr-org/45/

All comments welcome!



Yours sincerely,

Roger Oberholtzer

OPQ Systems / Ramböll RST

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696
roger.oberholtzer at ramboll.se
________________________________________

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden
www.rambollrst.se


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

From roger at opq.se  Thu May 26 07:58:22 2011
From: roger at opq.se (Roger Oberholtzer)
Date: Thu, 26 May 2011 16:58:22 +0200
Subject: [Proj] wgs84 northings and eastings
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD49388597B0@SETHNWS023.carmenta.se>
References: <1306243487.32720.122.camel@acme.pacific>
	<4DDBBDFB.2090903@free.fr> <1306249503.32720.156.camel@acme.pacific>
	<B597ADFC46B67741B18EA6AA13613FF7026A699D@email002.lsu.edu>
	<1306258185.32720.186.camel@acme.pacific>
	<E4AB3DD44D22854B819908379DE4AD49388597B0@SETHNWS023.carmenta.se>
Message-ID: <1306421902.7916.205.camel@acme.pacific>

On Thu, 2011-05-26 at 13:27 +0000, Mikael Rittri wrote:

> You write "transverse mercator", but it seems you mean 
> ordinary mercator (Web Mercator, to be specific). 

My mistake. I was doing other work at the same time with transverse
mercator. Parallel work is not always a good thing.

> So, you have to use a trick: use 
> 
>    +nadgrids=@null 

I remember the discussion a while back. Would I then remove the
+towgs84=0,0,0,0,0,0,0 as well? Or do I need both?

> instead. See 
> 
> http://trac.osgeo.org/proj/wiki/FAQ#ChangingEllipsoidWhycantIconvertfromWGS84toGoogleEarthVirtualGlobeMercator

Following that link eventually led me to:
http://spatialreference.org/ref/epsg/3395/

which it calls World Mercator. The definition is:

	+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs

Since my source data is defined as:

	+proj=latlong +datum=WGS84

perhaps this more suited to my original goal?



Yours sincerely,

Roger Oberholtzer

OPQ Systems / Ramböll RST

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696
roger.oberholtzer at ramboll.se
________________________________________

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden
www.rambollrst.se




From support.mn at elisanet.fi  Thu May 26 14:50:58 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Fri, 27 May 2011 00:50:58 +0300 (EEST)
Subject: [Proj] esri shape files
Message-ID: <4494955.7246391306446659217.JavaMail.support.mn@elisanet.fi>

Hello,

is there any document what should be put in the .prj or .sbn file
that should go with the esri shape files? and does any program
really trust or use what is in it?

This link seems to give some information

http://en.wikipedia.org/wiki/Shapefile#Shapefile_projection_format_.28.prj.29

but no too much.

regards: S.L.



From strebe at aol.com  Thu May 26 16:54:02 2011
From: strebe at aol.com (strebe at aol.com)
Date: Thu, 26 May 2011 19:54:02 -0400
Subject: [Proj] esri shape files
In-Reply-To: <4494955.7246391306446659217.JavaMail.support.mn@elisanet.fi>
References: <4494955.7246391306446659217.JavaMail.support.mn@elisanet.fi>
Message-ID: <8CDEA1752E547D9-F64-59419@Webmail-m106.sysops.aol.com>


 

 The .prj file is in Well Known Text format (WTK) documented here:
     http://www.geoapi.org/2.0/javadoc/org/opengis/referencing/doc-files/WKT.html

Geocart (for example) requires the .prj file to be present, does inspect it, but requires its contents to declare the GEOG projection in order to make use of the Shapefile. Therefore at least one program trusts and “uses” the contents of the .prj file.

Geocart does not inspect the .sbn file. 

Regards,
— daan Strebe


 

 

-----Original Message-----
From: support.mn at elisanet.fi
To: proj at lists.maptools.org
Sent: Thu, May 26, 2011 2:50 pm
Subject: [Proj] esri shape files


Hello,

is there any document what should be put in the .prj or .sbn file
that should go with the esri shape files? and does any program
really trust or use what is in it?

This link seems to give some information

http://en.wikipedia.org/wiki/Shapefile#Shapefile_projection_format_.28.prj.29

but no too much.

regards: S.L.

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110526/a3690d28/attachment.html>

From warmerdam at pobox.com  Thu May 26 18:19:57 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 26 May 2011 21:19:57 -0400
Subject: [Proj] esri shape files
In-Reply-To: <4494955.7246391306446659217.JavaMail.support.mn@elisanet.fi>
References: <4494955.7246391306446659217.JavaMail.support.mn@elisanet.fi>
Message-ID: <4DDEFC3D.3050701@pobox.com>

On 11-05-26 05:50 PM, support.mn at elisanet.fi wrote:
> Hello,
>
> is there any document what should be put in the .prj or .sbn file
> that should go with the esri shape files? and does any program
> really trust or use what is in it?
>
> This link seems to give some information
>
> http://en.wikipedia.org/wiki/Shapefile#Shapefile_projection_format_.28.prj.29

S. L.

The .sbn is part of a spatial index, and needs to be in a fairly particular
format which I don't know.  Beyond software built on ESRI libraries, I
believe Safe Software's FME also supports it, though my shapelib does not.
It has nothing to do with coordinate systems and so is not really relavent
to this mailing list.

As previously noted the .prj file should contain the coordinate system in
ESRI "Projection Engine" format, which is closely related to OGC Well Known
Text format.  Among others GDAL/OGR based software packages can utilize
the .prj file which I transform internally into what I think of as "OGC
Well Known Text".  Please don't just dump not-quite-ESRI WKT into the .prj
file.  It will mess me up!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From Mikael.Rittri at carmenta.com  Fri May 27 03:45:26 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Fri, 27 May 2011 10:45:26 +0000
Subject: [Proj] wgs84 northings and eastings
In-Reply-To: <1306421902.7916.205.camel@acme.pacific>
References: <1306243487.32720.122.camel@acme.pacific>
	<4DDBBDFB.2090903@free.fr> <1306249503.32720.156.camel@acme.pacific>
	<B597ADFC46B67741B18EA6AA13613FF7026A699D@email002.lsu.edu>
	<1306258185.32720.186.camel@acme.pacific>
	<E4AB3DD44D22854B819908379DE4AD49388597B0@SETHNWS023.carmenta.se>
	<1306421902.7916.205.camel@acme.pacific>
Message-ID: <E4AB3DD44D22854B819908379DE4AD49388598ED@SETHNWS023.carmenta.se>

Roger,
you wrote:

> Would I then remove the +towgs84=0,0,0,0,0,0,0 as well? Or do I need both?

You would remove +towgs84=0,0,0,0,0,0,0 and only use the nadgrids parameter. 

> which it calls World Mercator. ... perhaps this more suited to my original goal?

Maybe. First you need to know that World Mercator
is a different projection than Web Mercator. 
The projected coordinates for the same position
differs a lot (tens of kilometers). So don't confuse
them if you exchange data in Mercator. 

WGS 84 / World Mercator uses the ellipsoidal projection 
formulas based on the WGS 84 ellipsoid. Nothing strange
there. 

WGS 84 / Web Mercator uses the simpler spherical projection 
formulas, but the long/lat on the WGS 84 ellipsoid are 
interpreted as if they were long/lat on a sphere, without 
any conversion.  This interpretation is wrong, technically, 
and has the consequence that WGS 84 / Web Mercator is not an 
exactly conformal mapping from the WGS 84 ellipsoid. But it 
is nearly conformal, and projection can be done more efficiently. 

Noel Zinn has made a detailed presentation about Web Mercator:

http://www.hydrometronics.com/downloads/Web%20Mercator%20-%20Non-Conformal,%20Non-Mercator%20(full).pdf

My personal opinion is that Web Mercator isn't so bad if you
don't need exact conformality.  Noel Zinn dislikes the Web
Mercator more than I do, but I don't think there is any 
concrete fact that we disagree about, so I certainly 
recommend his presentation.  

Regards,
Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Roger Oberholtzer
Sent: den 26 maj 2011 16:58
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] wgs84 northings and eastings

On Thu, 2011-05-26 at 13:27 +0000, Mikael Rittri wrote:

> You write "transverse mercator", but it seems you mean ordinary 
> mercator (Web Mercator, to be specific).

My mistake. I was doing other work at the same time with transverse mercator. Parallel work is not always a good thing.

> So, you have to use a trick: use
> 
>    +nadgrids=@null

I remember the discussion a while back. Would I then remove the
+towgs84=0,0,0,0,0,0,0 as well? Or do I need both?

> instead. See
> 
> http://trac.osgeo.org/proj/wiki/FAQ#ChangingEllipsoidWhycantIconvertfr
> omWGS84toGoogleEarthVirtualGlobeMercator

Following that link eventually led me to:
http://spatialreference.org/ref/epsg/3395/

which it calls World Mercator. The definition is:

	+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs

Since my source data is defined as:

	+proj=latlong +datum=WGS84

perhaps this more suited to my original goal?



Yours sincerely,

Roger Oberholtzer

OPQ Systems / Ramböll RST

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696
roger.oberholtzer at ramboll.se
________________________________________

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden
www.rambollrst.se


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

From j.l.h.hartmann at uva.nl  Sat May 28 12:18:44 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat, 28 May 2011 21:18:44 +0200
Subject: [Proj] Using a GDAL-generated NTV2-file
In-Reply-To: <4DDBB041.5060802@pobox.com>
References: <40955.145.50.39.11.1302160702.squirrel@webmail.hostingdiscounter.nl>
	<4D9D724C.9020003@uva.nl> <4D9F276C.2050002@pobox.com>
	<4D9F2992.6010506@uva.nl> <4D9F3801.8060108@pobox.com>
	<4DBB1B4A.40809@uva.nl> <4DC00478.1030602@uva.nl>
	<4DC0106A.40906@pobox.com> <4DD7AC2F.9040601@uva.nl>
	<4DD7B0FB.1040107@pobox.com> <4DD7E00E.2060508@uva.nl>
	<4DD7E2EE.8070002@pobox.com> <4DDB7FAB.4020709@uva.nl>
	<4DDBB041.5060802@pobox.com>
Message-ID: <4DE14A94.3080605@uva.nl>



On 05/24/11 15:18, Frank Warmerdam wrote:
>
> Ah, it's gdal_grid generated.  I had assumed it's habit of producing
> south-up files would have been corrected by now.  It isn't a program
> I've had any real input on.
>
>
> gdalwarp does a rectification to north up.  In a regular case like this
> it should just amount to a mirroring but you might want to inspect it a
> bit to be sure the corners are still the same, etc.
>
> The proof will be in the pudding - if you get the right transformation.
>
>
Yes, the results look correct: after doing "gdal_grid" and mirroring the 
result with a simple "gdalwarp" without parameters, the data are in the 
correct position (i.e. unmirrored). Why is this gdalwarp-step needed? Is 
this a bug?

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110528/8afa2125/attachment.html>

From support.mn at elisanet.fi  Mon May 30 15:34:19 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Tue, 31 May 2011 01:34:19 +0300 (EEST)
Subject: [Proj] esri shape files
Message-ID: <17837987.7279121306794860215.JavaMail.support.mn@elisanet.fi>

Frank Warmerdam [warmerdam at pobox.com] kirjoitti: 
> Please don't just dump not-quite-ESRI WKT into the .prj
> file.  It will mess me up!

mess it seems to be already if you read this text:

http://home.gdal.org/projects/opengis/wktproblems.html

I have never really understood why they have to put parameter
names in the definition files?! or indexes pointing to unknown
definitions?

That will just mess it up, since nobody will never know what
additional names and definitions will be generated later and
by all current instances. The only way to handle that is to put
directly the parameter value or index value in the file and never
use names as values or indexes to something.

That is the reason why proj.4 definitions are much more power
full than for example WKT or GeoTiff. Take for example the
"towgs84" statement. It can define any current and future datum
accurately without the need to rewrite the programs or data files
all over again when a single new datum is created.

Put if your put there "datum=MyStrangeDatum31221341" it is
clear that nobody will never be able to use that file for anything
since they simply will never be able to figure out what was or is
"MyStrangeDatum31221341".

Regards: SL



