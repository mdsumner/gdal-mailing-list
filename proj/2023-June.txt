From kristianevers at gmail.com  Thu Jun  1 00:14:09 2023
From: kristianevers at gmail.com (Kristian Evers)
Date: Thu, 1 Jun 2023 09:14:09 +0200
Subject: [PROJ] PROJ 9.2.1 & PROJ-data 1.14
Message-ID: <06E55A4F-D5B4-4D92-B36E-AEAFAF5438A3@gmail.com>

I?m happy to announce the release of PROJ 9.2.1 and PROJ-data 1.14!

The PROJ release includes updates to the database and a number of
bug fixes. See the release notes below.

The PROJ-data release includes the following updates:

- German Hessen grids
- Canadian RGNC15 grids
- Danish grids for a number of older CRS's

Download the archives here:

https://download.osgeo.org/proj/proj-9.2.1.tar.gz
https://download.osgeo.org/proj/proj-9.2.1.zip

https://download.osgeo.org/proj/proj-data-1.14.tar.gz
https://download.osgeo.org/proj/proj-data-1.14.zip

/Kristian

????????????????

9.2.1 Release Notes
-------------------

 Database updates
 --------

 o Add alias for old ESRI datum/CRS names of EPSG:8353
   S_JTSK_JTSK03_Krovak_East_North (#3678)

 o Pseudo Mercator now supported with IAU CRS's (#3645)

 o Updated to EPSG 10.088 (#3731)

 Bug fixes
 ----------

 o Fixed build errors with Cygwin (#3642)

 o PROJ string CRS parser: make sure that PROJ arguments of the rotated
   string are kept in the WKT representation (#3656)

 o Fix slowness on proj_trans() when doing WGS 84 <--> NAD83 conversions (#3661)

 o vgridshift/gridshift: accept hydroid_height as valid band description (#3675)

 o WKT/PROJJSON: import/export accuracy of ConcatenatedOperation (#3676)

 o Coordinate operation factory: count identified concatenated operations as a
   single step (#3677)

 o EngineeringCRS: make proj_create_engineering_crs() set a datum name
   and relax isEquivalentTo() comparisons (#3685)

 o PROJJSON: fix import/export of integer parameter value, and deal with
   interpolation CRS parameters in conversions (#3695)

 o  CMake: avoid imbalanced cmake_policy push/pop if TIFF or CURL dependency
    cannot be found (#3697)
 
 o  proj_create_crs_to_crs(): restore transformation selection behaviour
    of PROJ 9.1 when grids are missing (#3707)

 o  ESRI WKT: improve roundtrip of name and definition for UPS WGS84 CRS (#3720)

 o CRS instanciation from PROJ.4 string: set 'Unknown based on XXXX ellipsoid'
   datum name when instanciating from known +a, +rf (#3727)

 o  cs2cs / proj_create_crs_to_crs(): fix regression with geocentric CRS (#3729)

 o  proj_trans(): set PROJ_ERR_COORD_TRANSFM_NO_OPERATION error when failing
    in ONLY_BEST=YES mode (#3730)

 o  tinshift: raise maximum size of JSON file to 100 MB (#3736)
 




From mwtoews at gmail.com  Thu Jun  1 01:34:19 2023
From: mwtoews at gmail.com (Mike Taves)
Date: Thu, 1 Jun 2023 20:34:19 +1200
Subject: [PROJ] PROJ 9.2.1 & PROJ-data 1.14
In-Reply-To: <06E55A4F-D5B4-4D92-B36E-AEAFAF5438A3@gmail.com>
References: <06E55A4F-D5B4-4D92-B36E-AEAFAF5438A3@gmail.com>
Message-ID: <CAM2FmMoMCrS41XmEmfiDgiVbYuBbmvFhCTxXBYRODiw0GFgO+A@mail.gmail.com>

On Thu, 1 Jun 2023 at 19:15, Kristian Evers <kristianevers at gmail.com> wrote:
> https://download.osgeo.org/proj/proj-9.2.1.tar.gz
> https://download.osgeo.org/proj/proj-9.2.1.zip

Just noticed an empty disabled_workflows directory in these
distributions. Whoops, this was my mistake!

I've patched CPack to ignore this directory for future releases. It
might also be worth exploring a packaging replacement of CPack with a
script based on git-archive.

Cheers, Mike

From mwtoews at gmail.com  Thu Jun  1 02:03:33 2023
From: mwtoews at gmail.com (Mike Taves)
Date: Thu, 1 Jun 2023 21:03:33 +1200
Subject: [PROJ] PROJ 9.2.1 & PROJ-data 1.14
In-Reply-To: <e0b9168fcb75413db4b64bd24b3bea6a@sdfi.dk>
References: <06E55A4F-D5B4-4D92-B36E-AEAFAF5438A3@gmail.com>
 <CAM2FmMoMCrS41XmEmfiDgiVbYuBbmvFhCTxXBYRODiw0GFgO+A@mail.gmail.com>
 <e0b9168fcb75413db4b64bd24b3bea6a@sdfi.dk>
Message-ID: <CAM2FmMpmZqa5J6tD2Tt5FdFTXMe_RYuRdwLO1tquh-u87AcX+g@mail.gmail.com>

On Thu, 1 Jun 2023 at 20:57, Kristian Evers <kreve at sdfi.dk> wrote:
> As far as I can see the disabled workflows include the doc building script. I assume that has to do with the read the docs transition. I see that proj.org hasn't updated yet - is this just a matter of being patient? I don't see any github actions running like previously.

Yes, it was from some of the clean-up to disable doc_build.yml, which
is no longer needed. That last commit has "[skip ci]" thus nothing to
run or build.

Cheers, Mike

From kreve at sdfi.dk  Thu Jun  1 01:53:21 2023
From: kreve at sdfi.dk (Kristian Evers)
Date: Thu, 1 Jun 2023 08:53:21 +0000
Subject: [PROJ] PROJ 9.2.1 & PROJ-data 1.14
In-Reply-To: <CAM2FmMoMCrS41XmEmfiDgiVbYuBbmvFhCTxXBYRODiw0GFgO+A@mail.gmail.com>
References: <06E55A4F-D5B4-4D92-B36E-AEAFAF5438A3@gmail.com>
 <CAM2FmMoMCrS41XmEmfiDgiVbYuBbmvFhCTxXBYRODiw0GFgO+A@mail.gmail.com>
Message-ID: <e0b9168fcb75413db4b64bd24b3bea6a@sdfi.dk>

No worries, Mike. 

As far as I can see the disabled workflows include the doc building script. I assume that has to do with the read the docs transition. I see that proj.org hasn't updated yet - is this just a matter of being patient? I don't see any github actions running like previously.

/Kristian


-----Original Message-----
From: PROJ <proj-bounces at lists.osgeo.org> On Behalf Of Mike Taves
Sent: 1. juni 2023 10:34
To: Kristian Evers <kristianevers at gmail.com>
Cc: PROJ <PROJ at lists.osgeo.org>
Subject: Re: [PROJ] PROJ 9.2.1 & PROJ-data 1.14

On Thu, 1 Jun 2023 at 19:15, Kristian Evers <kristianevers at gmail.com> wrote:
> https://download.osgeo.org/proj/proj-9.2.1.tar.gz
> https://download.osgeo.org/proj/proj-9.2.1.zip

Just noticed an empty disabled_workflows directory in these
distributions. Whoops, this was my mistake!

I've patched CPack to ignore this directory for future releases. It
might also be worth exploring a packaging replacement of CPack with a
script based on git-archive.

Cheers, Mike
_______________________________________________
PROJ mailing list
PROJ at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/proj

From kreve at sdfi.dk  Thu Jun  1 04:27:00 2023
From: kreve at sdfi.dk (Kristian Evers)
Date: Thu, 1 Jun 2023 11:27:00 +0000
Subject: [PROJ] PROJ 9.2.1 & PROJ-data 1.14
In-Reply-To: <CAM2FmMpmZqa5J6tD2Tt5FdFTXMe_RYuRdwLO1tquh-u87AcX+g@mail.gmail.com>
References: <06E55A4F-D5B4-4D92-B36E-AEAFAF5438A3@gmail.com>
 <CAM2FmMoMCrS41XmEmfiDgiVbYuBbmvFhCTxXBYRODiw0GFgO+A@mail.gmail.com>
 <e0b9168fcb75413db4b64bd24b3bea6a@sdfi.dk>
 <CAM2FmMpmZqa5J6tD2Tt5FdFTXMe_RYuRdwLO1tquh-u87AcX+g@mail.gmail.com>
Message-ID: <92cfb0a7eb6d4e8381b67605dcc31e65@sdfi.dk>

Got it. The website hasn't updated yet (the news page is still at 9.2.0). Is there something I need to do to trigger a build at read the docs?

/Kristian

-----Original Message-----
From: Mike Taves <mwtoews at gmail.com> 
Sent: 1. juni 2023 11:04
To: Kristian Evers <kreve at sdfi.dk>
Cc: PROJ <PROJ at lists.osgeo.org>
Subject: Re: [PROJ] PROJ 9.2.1 & PROJ-data 1.14

On Thu, 1 Jun 2023 at 20:57, Kristian Evers <kreve at sdfi.dk> wrote:
> As far as I can see the disabled workflows include the doc building script. I assume that has to do with the read the docs transition. I see that proj.org hasn't updated yet - is this just a matter of being patient? I don't see any github actions running like previously.

Yes, it was from some of the clean-up to disable doc_build.yml, which
is no longer needed. That last commit has "[skip ci]" thus nothing to
run or build.

Cheers, Mike

From ndzinn at gmail.com  Thu Jun  1 04:31:38 2023
From: ndzinn at gmail.com (Noel Zinn)
Date: Thu, 1 Jun 2023 06:31:38 -0500
Subject: [PROJ] Esri "local" projection
In-Reply-To: <CADRrdKuAJU=4XN-7F4LttWrPZwk0OHdAq386VsB8r4-=rdSNig@mail.gmail.com>
References: <CADRrdKuAJU=4XN-7F4LttWrPZwk0OHdAq386VsB8r4-=rdSNig@mail.gmail.com>
Message-ID: <b67fd308-f655-b12b-414e-4aaadf847acf@gmail.com>

This is the same as esri's "local":

https://www.hydrometronics.com/downloads/Ellipsoidal%20Orthographic%20Projection.pdf

On 5/30/2023 5:24 PM, Javier Jimenez Shaw wrote:
> Hi
>
> Some use cases of Esri "local" projection are arriving to my desk. 
> This projection works in Esri software, but not in PROJ (obviously 
> also not in QGIS)
>
> One example is this WKT1_ESRI
>
> PROJCS["Hycroft001",GEOGCS["GCS_North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Local"],PARAMETER["False_Easting",13264.924],PARAMETER["False_Northing",46473.418],PARAMETER["Scale_Factor",1.00025],PARAMETER["Azimuth",15.786],PARAMETER["Longitude_Of_Center",-116.7048269],PARAMETER["Latitude_Of_Center",42.88212865],UNIT["Foot_US",0.3048006096012192]]
>
> Looking at their documentation, it seems to be this one:
> https://desktop.arcgis.com/en/arcmap/latest/map/projections/local.htm
>
> The biggest difference I see with the Orthographic from PROJ is the 
> Azimut parameter. I have the impression that the azimut is just a 
> rotation of the axes, but it is not clear to me in the Snyder book 
> (page 145. If you do not have it, it is available at 
> https://pubs.er.usgs.gov/publication/pp1395 )
>
> Is there are alternative in PROJ?
> Does it make sense to add this transformation?
>
> Thanks
> Javier
> .___ ._ ..._ .. . ._.? .___ .. __ . _. . __..? ... .... ._ .__
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20230601/8ed0dc61/attachment.htm>

From mwtoews at gmail.com  Thu Jun  1 04:48:23 2023
From: mwtoews at gmail.com (Mike Taves)
Date: Thu, 1 Jun 2023 23:48:23 +1200
Subject: [PROJ] PROJ 9.2.1 & PROJ-data 1.14
In-Reply-To: <92cfb0a7eb6d4e8381b67605dcc31e65@sdfi.dk>
References: <06E55A4F-D5B4-4D92-B36E-AEAFAF5438A3@gmail.com>
 <CAM2FmMoMCrS41XmEmfiDgiVbYuBbmvFhCTxXBYRODiw0GFgO+A@mail.gmail.com>
 <e0b9168fcb75413db4b64bd24b3bea6a@sdfi.dk>
 <CAM2FmMpmZqa5J6tD2Tt5FdFTXMe_RYuRdwLO1tquh-u87AcX+g@mail.gmail.com>
 <92cfb0a7eb6d4e8381b67605dcc31e65@sdfi.dk>
Message-ID: <CAM2FmMrQ7FMh0mqySQVW7sApZrsT58oAUNLO3pXeC7rYCTmjbw@mail.gmail.com>

On Thu, 1 Jun 2023 at 23:27, Kristian Evers <kreve at sdfi.dk> wrote:
>
> Got it. The website hasn't updated yet (the news page is still at 9.2.0). Is there something I need to do to trigger a build at read the docs?

Oh I see the issue now. That RTD build was triggered, but cancelled
(my fault again!) A new version of 9.2 is being built now, and will be
ready soon.

Cheers, Mike

From nicolas.bellaiche at ign.fr  Thu Jun  1 06:54:57 2023
From: nicolas.bellaiche at ign.fr (Nicolas Bellaiche)
Date: Thu, 1 Jun 2023 15:54:57 +0200 (CEST)
Subject: [PROJ] PROJ 9 & old syntax +init=
In-Reply-To: <300891348.10276733.1685625153375.JavaMail.zimbra@ign.fr>
References: <06E55A4F-D5B4-4D92-B36E-AEAFAF5438A3@gmail.com>
 <CAM2FmMoMCrS41XmEmfiDgiVbYuBbmvFhCTxXBYRODiw0GFgO+A@mail.gmail.com>
 <e0b9168fcb75413db4b64bd24b3bea6a@sdfi.dk>
 <CAM2FmMpmZqa5J6tD2Tt5FdFTXMe_RYuRdwLO1tquh-u87AcX+g@mail.gmail.com>
 <92cfb0a7eb6d4e8381b67605dcc31e65@sdfi.dk>
 <CAM2FmMrQ7FMh0mqySQVW7sApZrsT58oAUNLO3pXeC7rYCTmjbw@mail.gmail.com>
 <300891348.10276733.1685625153375.JavaMail.zimbra@ign.fr>
Message-ID: <1879009992.10323997.1685627697996.JavaMail.zimbra@ign.fr>

Hi all, 


I am still puzzled by the difference between the old syntax +init= and the new syntax. I just rebuilt the last release 9.2.1 and tested with it to make sure it's not a bug already fixed. 

1) Example where the grid shift is not taken into account with the new syntax. (it's correct with +init=) 

1.a) NEW SYNTAX: z not correct (grid shift not used) 

echo 600000.00000000 300097.53400000 0.00000000 | ./bin/cs2cs IGNF:LAMB1 +to IGNF:UTM31RGF93 
452845.19 5583309.40 0.00 

1.b) OLD SYNTAX: z correct: 

echo 600000.00000000 300097.53400000 0.00000000 | ./bin/cs2cs +init=IGNF:LAMB1 +to +init=IGNF:UTM31RGF93 
452845.19 5583309.40 43.64 



2) Example where the old syntax gives a wrong result while the new syntax works: 

2.a) OLD SYNTAX from cartographic to geocentric coordinates / result is wrong 

echo 652760.737 7033791.243 43.642 | PROJ_DEBUG=3 ./bin/cs2cs +init=IGNF:LAMB93 +to +init=IGNF:RGF93 
4070355.05 166080.07 4891332.24 


2.b) NEW SYNTAX from cartographic to geocentric coordinates / result is correct 



echo 652760.737 7033791.243 43.642 | PROJ_DEBUG=3 ./bin/cs2cs IGNF:LAMB93 +to IGNF:RGF93 

4070327.25 166078.93 4891298.61 









-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20230601/6bee1a0b/attachment-0001.htm>

From Alain.Orsoni at ign.fr  Thu Jun  1 07:27:23 2023
From: Alain.Orsoni at ign.fr (Alain Orsoni)
Date: Thu, 1 Jun 2023 16:27:23 +0200
Subject: [PROJ] PROJ 9 & old syntax +init=
In-Reply-To: <1879009992.10323997.1685627697996.JavaMail.zimbra@ign.fr>
References: <06E55A4F-D5B4-4D92-B36E-AEAFAF5438A3@gmail.com>
 <CAM2FmMoMCrS41XmEmfiDgiVbYuBbmvFhCTxXBYRODiw0GFgO+A@mail.gmail.com>
 <e0b9168fcb75413db4b64bd24b3bea6a@sdfi.dk>
 <CAM2FmMpmZqa5J6tD2Tt5FdFTXMe_RYuRdwLO1tquh-u87AcX+g@mail.gmail.com>
 <92cfb0a7eb6d4e8381b67605dcc31e65@sdfi.dk>
 <CAM2FmMrQ7FMh0mqySQVW7sApZrsT58oAUNLO3pXeC7rYCTmjbw@mail.gmail.com>
 <300891348.10276733.1685625153375.JavaMail.zimbra@ign.fr>
 <1879009992.10323997.1685627697996.JavaMail.zimbra@ign.fr>
Message-ID: <85DFDF6A-1DBF-426F-B186-70CEB18E265D@ign.fr>

For me LAMB1 and UTM31RGF93 are both considered as being on Geoid in the new database.
So the altitude from input is just transferred to the output.

So I think the result from 9.2 version is correct in terms of Z management.

But it?s only from my understanding?

Alain



> Le 1 juin 2023 ? 15:54, Nicolas Bellaiche <nicolas.bellaiche at ign.fr> a ?crit :
> 
> Hi all,
> 
> 
> I am still puzzled by the difference between the old syntax +init= and the new syntax. I just rebuilt the last release 9.2.1 and tested with it to make sure it's not a bug already fixed.
> 
> 1) Example where the grid shift is not taken into account with the new syntax. (it's correct with +init=)
> 
> 1.a) NEW SYNTAX: z not correct (grid shift not used)
> 
>  echo 600000.00000000 300097.53400000 0.00000000 |  ./bin/cs2cs IGNF:LAMB1 +to IGNF:UTM31RGF93
> 452845.19        5583309.40 0.00
> 
> 1.b) OLD SYNTAX: z correct:
> 
> echo 600000.00000000 300097.53400000 0.00000000 | ./bin/cs2cs +init=IGNF:LAMB1 +to +init=IGNF:UTM31RGF93
> 452845.19        5583309.40 43.64
> 
> 
> 
> 2) Example where the old syntax gives a wrong result while the new syntax works:
> 
> 2.a) OLD SYNTAX from cartographic to geocentric coordinates / result is wrong
> 
> echo 652760.737 7033791.243 43.642 | PROJ_DEBUG=3 ./bin/cs2cs +init=IGNF:LAMB93 +to +init=IGNF:RGF93
> 4070355.05        166080.07 4891332.24
> 
> 
> 2.b) NEW SYNTAX from cartographic to geocentric coordinates / result is correct
> 
> echo 652760.737 7033791.243 43.642 | PROJ_DEBUG=3 ./bin/cs2cs IGNF:LAMB93 +to IGNF:RGF93 
> 4070327.25 166078.93 4891298.61
> 
> 
> 
> 
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20230601/6768c0af/attachment.htm>

From nicolas.bellaiche at ign.fr  Thu Jun  1 10:52:26 2023
From: nicolas.bellaiche at ign.fr (Nicolas Bellaiche)
Date: Thu, 1 Jun 2023 19:52:26 +0200 (CEST)
Subject: [PROJ] PROJ 9 & old syntax +init=
In-Reply-To: <85DFDF6A-1DBF-426F-B186-70CEB18E265D@ign.fr>
References: <06E55A4F-D5B4-4D92-B36E-AEAFAF5438A3@gmail.com>
 <e0b9168fcb75413db4b64bd24b3bea6a@sdfi.dk>
 <CAM2FmMpmZqa5J6tD2Tt5FdFTXMe_RYuRdwLO1tquh-u87AcX+g@mail.gmail.com>
 <92cfb0a7eb6d4e8381b67605dcc31e65@sdfi.dk>
 <CAM2FmMrQ7FMh0mqySQVW7sApZrsT58oAUNLO3pXeC7rYCTmjbw@mail.gmail.com>
 <300891348.10276733.1685625153375.JavaMail.zimbra@ign.fr>
 <1879009992.10323997.1685627697996.JavaMail.zimbra@ign.fr>
 <85DFDF6A-1DBF-426F-B186-70CEB18E265D@ign.fr>
Message-ID: <838555687.10518880.1685641946237.JavaMail.zimbra@ign.fr>

I compare with the results given by CIRCE which is the official software developed by the National Geographic Institute of France, these coordinates are official datasets distributed with the application. 


De: "Alain Orsoni" <Alain.Orsoni at ign.fr> 
?: "Nicolas Bellaiche" <nicolas.bellaiche at ign.fr> 
Cc: "proj" <PROJ at lists.osgeo.org> 
Envoy?: Jeudi 1 Juin 2023 16:27:23 
Objet: Re: [PROJ] PROJ 9 & old syntax +init= 

For me LAMB1 and UTM31RGF93 are both considered as being on Geoid in the new database. 
So the altitude from input is just transferred to the output. 

So I think the result from 9.2 version is correct in terms of Z management. 

But it?s only from my understanding? 

Alain 






Le 1 juin 2023 ? 15:54, Nicolas Bellaiche < [ mailto:nicolas.bellaiche at ign.fr | nicolas.bellaiche at ign.fr ] > a ?crit : 

Hi all, 


I am still puzzled by the difference between the old syntax +init= and the new syntax. I just rebuilt the last release 9.2.1 and tested with it to make sure it's not a bug already fixed. 

1) Example where the grid shift is not taken into account with the new syntax. (it's correct with +init=) 

1.a) NEW SYNTAX: z not correct (grid shift not used) 

echo 600000.00000000 300097.53400000 0.00000000 | ./bin/cs2cs IGNF:LAMB1 +to IGNF:UTM31RGF93 
452845.19 5583309.40 0.00 

1.b) OLD SYNTAX: z correct: 

echo 600000.00000000 300097.53400000 0.00000000 | ./bin/cs2cs +init=IGNF:LAMB1 +to +init=IGNF:UTM31RGF93 
452845.19 5583309.40 43.64 



2) Example where the old syntax gives a wrong result while the new syntax works: 

2.a) OLD SYNTAX from cartographic to geocentric coordinates / result is wrong 

echo 652760.737 7033791.243 43.642 | PROJ_DEBUG=3 ./bin/cs2cs +init=IGNF:LAMB93 +to +init=IGNF:RGF93 
4070355.05 166080.07 4891332.24 


2.b) NEW SYNTAX from cartographic to geocentric coordinates / result is correct 

echo 652760.737 7033791.243 43.642 | PROJ_DEBUG=3 ./bin/cs2cs IGNF:LAMB93 +to IGNF:RGF93 
4070327.25 166078.93 4891298.61 




_______________________________________________ 
PROJ mailing list 
[ mailto:PROJ at lists.osgeo.org | PROJ at lists.osgeo.org ] 
https://lists.osgeo.org/mailman/listinfo/proj 





-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20230601/4bf08e65/attachment.htm>

From even.rouault at spatialys.com  Thu Jun  1 11:44:28 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 1 Jun 2023 20:44:28 +0200
Subject: [PROJ] PROJ 9 & old syntax +init=
In-Reply-To: <838555687.10518880.1685641946237.JavaMail.zimbra@ign.fr>
References: <06E55A4F-D5B4-4D92-B36E-AEAFAF5438A3@gmail.com>
 <e0b9168fcb75413db4b64bd24b3bea6a@sdfi.dk>
 <CAM2FmMpmZqa5J6tD2Tt5FdFTXMe_RYuRdwLO1tquh-u87AcX+g@mail.gmail.com>
 <92cfb0a7eb6d4e8381b67605dcc31e65@sdfi.dk>
 <CAM2FmMrQ7FMh0mqySQVW7sApZrsT58oAUNLO3pXeC7rYCTmjbw@mail.gmail.com>
 <300891348.10276733.1685625153375.JavaMail.zimbra@ign.fr>
 <1879009992.10323997.1685627697996.JavaMail.zimbra@ign.fr>
 <85DFDF6A-1DBF-426F-B186-70CEB18E265D@ign.fr>
 <838555687.10518880.1685641946237.JavaMail.zimbra@ign.fr>
Message-ID: <8de8699f-7514-f909-a5b5-a42d0d741de4@spatialys.com>


>
>     1.a) NEW SYNTAX: z not correct (grid shift not used)
>
>     *?echo 600000.00000000 300097.53400000 0.00000000 | ?./bin/cs2cs
>     IGNF:LAMB1 +to IGNF:UTM31RGF93*
>     452845.19????????5583309.40 0.00
>
Which grid shift file are you refering to ? ntf_r93.gsb ? I assume. But 
this is a horizontal datum shift. No vertical correction. This 
horizontal shift is applied, otherwise you'd get "452843.46 5583308.13 
0.00" as a result
>
>
>     1.b) OLD SYNTAX: z correct:
>
>     *echo 600000.00000000 300097.53400000 0.00000000 | ./bin/cs2cs
>     +init=IGNF:LAMB1 +to +init=IGNF:UTM31RGF93*
>     452845.19????????5583309.40 43.64
>
I have no idea how you get this result. You should really try stopping 
using the (old) IGNF file with newer PROJ. This is mostly in unsupported 
land. Even when trying, with both PROJ 5.2 and latest PROJ master, and 
with the IGNF file supplied with PROJ 5.2, I still get the "452845.19 
5583309.40 0.00" result. Did you tweak your IGNF file ?

The only way I can get something close to what you get is by composing a 
manual pipeline using the gr3df97a grid with:

echo? 600000.00000000 300097.53400000 0.00000000 | PROJ_NETWORK=ON 
PROJ_DEBUG=3 bin/cct? +proj=pipeline +step +inv +proj=lcc +lat_1=49.5 
+lat_0=49.5 +lon_0=0 +k_0=0.99987734 +x_0=600000 +y_0=200000 
+a=6378249.2 +rf=293.466021 +pm=paris +step +proj=cart +ellps=clrk80ign 
+step +proj=xyzgridshift +grids=fr_ign_gr3df97a.tif +grid_ref=output_crs 
+ellps=GRS80 +step +inv +proj=cart +ellps=GRS80??? +step +proj=utm 
+zone=31 +ellps=GRS80
 ? 452845.1911?? 5583309.3959?????? 42.9892?????????? inf

But it seems a bit dubious to have a Z correction term for NTF <--> 
RGF93. And newer PROJ when operating with 2D CRS doesn't change the Z 
value. You may sometimes upgrade your CRS to 3D by adding the? --3d 
switch to cs2cs or projinfo, but if the transformations available are 
only 2D ones, that won't make miracles.

What does Circe does under the hood for that transformation?

>
>
>     2) Example where the old syntax gives a wrong result while the new
>     syntax works:
>
>     2.a) OLD SYNTAX from cartographic to geocentric coordinates /
>     result is wrong
>
>     *echo 652760.737 7033791.243 43.642 | PROJ_DEBUG=3 ./bin/cs2cs
>     +init=IGNF:LAMB93 +to +init=IGNF:RGF93*
>     4070355.05????????166080.07 4891332.24
>
I do get "4070327.25166078.93 4891298.61". This really smells like your 
IGNF file isn't the one of PROJ 5.2


>
>     2.b) NEW SYNTAX from cartographic to geocentric coordinates /
>     result is correct
>
>     *echo 652760.737 7033791.243 43.642 | PROJ_DEBUG=3 ./bin/cs2cs
>     IGNF:LAMB93 +to IGNF:RGF93*
>     4070327.25166078.93 4891298.61
>
>
>
>
>     _______________________________________________
>     PROJ mailing list
>     PROJ at lists.osgeo.org
>     https://lists.osgeo.org/mailman/listinfo/proj
>
>
>
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20230601/5754fcaf/attachment-0001.htm>

From nicolas.bellaiche at ign.fr  Fri Jun  2 02:14:39 2023
From: nicolas.bellaiche at ign.fr (Nicolas Bellaiche)
Date: Fri, 2 Jun 2023 11:14:39 +0200 (CEST)
Subject: [PROJ] PROJ 9 & old syntax +init=
In-Reply-To: <8de8699f-7514-f909-a5b5-a42d0d741de4@spatialys.com>
References: <06E55A4F-D5B4-4D92-B36E-AEAFAF5438A3@gmail.com>
 <92cfb0a7eb6d4e8381b67605dcc31e65@sdfi.dk>
 <CAM2FmMrQ7FMh0mqySQVW7sApZrsT58oAUNLO3pXeC7rYCTmjbw@mail.gmail.com>
 <300891348.10276733.1685625153375.JavaMail.zimbra@ign.fr>
 <1879009992.10323997.1685627697996.JavaMail.zimbra@ign.fr>
 <85DFDF6A-1DBF-426F-B186-70CEB18E265D@ign.fr>
 <838555687.10518880.1685641946237.JavaMail.zimbra@ign.fr>
 <8de8699f-7514-f909-a5b5-a42d0d741de4@spatialys.com>
Message-ID: <726125268.10882550.1685697279795.JavaMail.zimbra@ign.fr>




1) OK, I found out that the definition in the dataset file includes a conversion from altitude to ellipsoid height which explains the difference. 

2) This is very possible that I have an old IGNF file from PROJ4. I will check that now. Thanks for the clue, I didn't know there was an update on this file. 



BQ_BEGIN






BQ_END


BQ_BEGIN


BQ_BEGIN


1.a) NEW SYNTAX: z not correct (grid shift not used) 

echo 600000.00000000 300097.53400000 0.00000000 | ./bin/cs2cs IGNF:LAMB1 +to IGNF:UTM31RGF93 
452845.19 5583309.40 0.00 

BQ_END


BQ_END
Which grid shift file are you refering to ? ntf_r93.gsb ? I assume. But this is a horizontal datum shift. No vertical correction. This horizontal shift is applied, otherwise you'd get "452843.46 5583308.13 0.00" as a result 

BQ_BEGIN


BQ_BEGIN


1.b) OLD SYNTAX: z correct: 

echo 600000.00000000 300097.53400000 0.00000000 | ./bin/cs2cs +init=IGNF:LAMB1 +to +init=IGNF:UTM31RGF93 
452845.19 5583309.40 43.64 


BQ_END


BQ_END


I have no idea how you get this result. You should really try stopping using the (old) IGNF file with newer PROJ. This is mostly in unsupported land. Even when trying, with both PROJ 5.2 and latest PROJ master, and with the IGNF file supplied with PROJ 5.2, I still get the "452845.19 5583309.40 0.00" result. Did you tweak your IGNF file ? 

The only way I can get something close to what you get is by composing a manual pipeline using the gr3df97a grid with: 


echo 600000.00000000 300097.53400000 0.00000000 | PROJ_NETWORK=ON PROJ_DEBUG=3 bin/cct +proj=pipeline +step +inv +proj=lcc +lat_1=49.5 +lat_0=49.5 +lon_0=0 +k_0=0.99987734 +x_0=600000 +y_0=200000 +a=6378249.2 +rf=293.466021 +pm=paris +step +proj=cart +ellps=clrk80ign +step +proj=xyzgridshift +grids=fr_ign_gr3df97a.tif +grid_ref=output_crs +ellps=GRS80 +step +inv +proj=cart +ellps=GRS80 +step +proj=utm +zone=31 +ellps=GRS80 
452845.1911 5583309.3959 42.9892 inf 


But it seems a bit dubious to have a Z correction term for NTF <--> RGF93. And newer PROJ when operating with 2D CRS doesn't change the Z value. You may sometimes upgrade your CRS to 3D by adding the --3d switch to cs2cs or projinfo, but if the transformations available are only 2D ones, that won't make miracles. 


What does Circe does under the hood for that transformation? 

BQ_BEGIN


BQ_BEGIN



2) Example where the old syntax gives a wrong result while the new syntax works: 

2.a) OLD SYNTAX from cartographic to geocentric coordinates / result is wrong 

echo 652760.737 7033791.243 43.642 | PROJ_DEBUG=3 ./bin/cs2cs +init=IGNF:LAMB93 +to +init=IGNF:RGF93 
4070355.05 166080.07 4891332.24 


BQ_END


BQ_END


I do get "4070327.25 166078.93 4891298.61". This really smells like your IGNF file isn't the one of PROJ 5.2 




BQ_BEGIN


BQ_BEGIN


2.b) NEW SYNTAX from cartographic to geocentric coordinates / result is correct 

echo 652760.737 7033791.243 43.642 | PROJ_DEBUG=3 ./bin/cs2cs IGNF:LAMB93 +to IGNF:RGF93 
4070327.25 166078.93 4891298.61 




_______________________________________________ 
PROJ mailing list 
[ mailto:PROJ at lists.osgeo.org | PROJ at lists.osgeo.org ] 
[ https://lists.osgeo.org/mailman/listinfo/proj | https://lists.osgeo.org/mailman/listinfo/proj ] 

BQ_END




_______________________________________________
PROJ mailing list [ mailto:PROJ at lists.osgeo.org | PROJ at lists.osgeo.org ] [ https://lists.osgeo.org/mailman/listinfo/proj | https://lists.osgeo.org/mailman/listinfo/proj ] 

BQ_END

-- [ http://www.spatialys.com/ | http://www.spatialys.com ] My software is free, but my time generally not. 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20230602/a2afa4f5/attachment.htm>

From nicolas.bellaiche at ign.fr  Fri Jun  2 07:47:35 2023
From: nicolas.bellaiche at ign.fr (Nicolas Bellaiche)
Date: Fri, 2 Jun 2023 16:47:35 +0200 (CEST)
Subject: [PROJ] PROJ 9 & old syntax +init=
In-Reply-To: <726125268.10882550.1685697279795.JavaMail.zimbra@ign.fr>
References: <06E55A4F-D5B4-4D92-B36E-AEAFAF5438A3@gmail.com>
 <CAM2FmMrQ7FMh0mqySQVW7sApZrsT58oAUNLO3pXeC7rYCTmjbw@mail.gmail.com>
 <300891348.10276733.1685625153375.JavaMail.zimbra@ign.fr>
 <1879009992.10323997.1685627697996.JavaMail.zimbra@ign.fr>
 <85DFDF6A-1DBF-426F-B186-70CEB18E265D@ign.fr>
 <838555687.10518880.1685641946237.JavaMail.zimbra@ign.fr>
 <8de8699f-7514-f909-a5b5-a42d0d741de4@spatialys.com>
 <726125268.10882550.1685697279795.JavaMail.zimbra@ign.fr>
Message-ID: <352455877.11219883.1685717255500.JavaMail.zimbra@ign.fr>

I confirm that my issue was linked to an old IGNF file coming from PROJ4. 


De: "Nicolas Bellaiche" <nicolas.bellaiche at ign.fr> 
?: "Even Rouault" <even.rouault at spatialys.com> 
Cc: "proj" <PROJ at lists.osgeo.org> 
Envoy?: Vendredi 2 Juin 2023 11:14:39 
Objet: Re: [PROJ] PROJ 9 & old syntax +init= 




1) OK, I found out that the definition in the dataset file includes a conversion from altitude to ellipsoid height which explains the difference. 

2) This is very possible that I have an old IGNF file from PROJ4. I will check that now. Thanks for the clue, I didn't know there was an update on this file. 



BQ_BEGIN






BQ_END


BQ_BEGIN


BQ_BEGIN


1.a) NEW SYNTAX: z not correct (grid shift not used) 

echo 600000.00000000 300097.53400000 0.00000000 | ./bin/cs2cs IGNF:LAMB1 +to IGNF:UTM31RGF93 
452845.19 5583309.40 0.00 

BQ_END


BQ_END
Which grid shift file are you refering to ? ntf_r93.gsb ? I assume. But this is a horizontal datum shift. No vertical correction. This horizontal shift is applied, otherwise you'd get "452843.46 5583308.13 0.00" as a result 

BQ_BEGIN


BQ_BEGIN


1.b) OLD SYNTAX: z correct: 

echo 600000.00000000 300097.53400000 0.00000000 | ./bin/cs2cs +init=IGNF:LAMB1 +to +init=IGNF:UTM31RGF93 
452845.19 5583309.40 43.64 


BQ_END


BQ_END


I have no idea how you get this result. You should really try stopping using the (old) IGNF file with newer PROJ. This is mostly in unsupported land. Even when trying, with both PROJ 5.2 and latest PROJ master, and with the IGNF file supplied with PROJ 5.2, I still get the "452845.19 5583309.40 0.00" result. Did you tweak your IGNF file ? 

The only way I can get something close to what you get is by composing a manual pipeline using the gr3df97a grid with: 


echo 600000.00000000 300097.53400000 0.00000000 | PROJ_NETWORK=ON PROJ_DEBUG=3 bin/cct +proj=pipeline +step +inv +proj=lcc +lat_1=49.5 +lat_0=49.5 +lon_0=0 +k_0=0.99987734 +x_0=600000 +y_0=200000 +a=6378249.2 +rf=293.466021 +pm=paris +step +proj=cart +ellps=clrk80ign +step +proj=xyzgridshift +grids=fr_ign_gr3df97a.tif +grid_ref=output_crs +ellps=GRS80 +step +inv +proj=cart +ellps=GRS80 +step +proj=utm +zone=31 +ellps=GRS80 
452845.1911 5583309.3959 42.9892 inf 


But it seems a bit dubious to have a Z correction term for NTF <--> RGF93. And newer PROJ when operating with 2D CRS doesn't change the Z value. You may sometimes upgrade your CRS to 3D by adding the --3d switch to cs2cs or projinfo, but if the transformations available are only 2D ones, that won't make miracles. 


What does Circe does under the hood for that transformation? 

BQ_BEGIN


BQ_BEGIN



2) Example where the old syntax gives a wrong result while the new syntax works: 

2.a) OLD SYNTAX from cartographic to geocentric coordinates / result is wrong 

echo 652760.737 7033791.243 43.642 | PROJ_DEBUG=3 ./bin/cs2cs +init=IGNF:LAMB93 +to +init=IGNF:RGF93 
4070355.05 166080.07 4891332.24 


BQ_END


BQ_END


I do get "4070327.25 166078.93 4891298.61". This really smells like your IGNF file isn't the one of PROJ 5.2 




BQ_BEGIN


BQ_BEGIN


2.b) NEW SYNTAX from cartographic to geocentric coordinates / result is correct 

echo 652760.737 7033791.243 43.642 | PROJ_DEBUG=3 ./bin/cs2cs IGNF:LAMB93 +to IGNF:RGF93 
4070327.25 166078.93 4891298.61 




_______________________________________________ 
PROJ mailing list 
[ mailto:PROJ at lists.osgeo.org | PROJ at lists.osgeo.org ] 
[ https://lists.osgeo.org/mailman/listinfo/proj | https://lists.osgeo.org/mailman/listinfo/proj ] 

BQ_END




_______________________________________________
PROJ mailing list [ mailto:PROJ at lists.osgeo.org | PROJ at lists.osgeo.org ] [ https://lists.osgeo.org/mailman/listinfo/proj | https://lists.osgeo.org/mailman/listinfo/proj ] 

BQ_END

-- [ http://www.spatialys.com/ | http://www.spatialys.com ] My software is free, but my time generally not. 


_______________________________________________ 
PROJ mailing list 
PROJ at lists.osgeo.org 
https://lists.osgeo.org/mailman/listinfo/proj 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20230602/9cac6884/attachment-0001.htm>

From nicolas.bellaiche at ign.fr  Mon Jun  5 10:09:01 2023
From: nicolas.bellaiche at ign.fr (Nicolas Bellaiche)
Date: Mon, 5 Jun 2023 19:09:01 +0200 (CEST)
Subject: [PROJ] migrating to PROJ-9, missing / issues in code definitions
Message-ID: <1083739443.40922.1685984941609.JavaMail.zimbra@ign.fr>

Hi all, 

Things start to work out well using PROJ9 but I have still a few issues: 

1) It seems that the entry RGTAAF07UTM42S has disappeared from the current IGNF dictionary 

2) It seems that the geoid grid fr_ign_RAR07_bl.tif 
is missing for the definition of : 


REUN47GAUSSL 

RGR92UTM40S 

REUN47GEO 

RGR92GEO 


3) It seems that the geoid grid fr_ign_ggspm06v1.tif 
is missing for the definition of : 


STPM50UTM21 

RGSPM06GEO 

STPM50GEO 

RGSPM06U21 




At least that is my understanding. I've compared to CIRCE and to the PROJ-4 IGNF file and that's the difference I've found. 










Nicolas Bellaiche 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20230605/b5425360/attachment.htm>

From even.rouault at spatialys.com  Mon Jun  5 11:27:58 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 5 Jun 2023 20:27:58 +0200
Subject: [PROJ] migrating to PROJ-9, missing / issues in code definitions
In-Reply-To: <1083739443.40922.1685984941609.JavaMail.zimbra@ign.fr>
References: <1083739443.40922.1685984941609.JavaMail.zimbra@ign.fr>
Message-ID: <44f51540-e2fb-bb38-44df-514e4d501052@spatialys.com>

Nicolas,
>
>
> 1) It seems that the entry RGTAAF07UTM42S has disappeared from the 
> current IGNF dictionary

It is no longer in https://geodesie.ign.fr/contenu/fichiers/IGNF.xml 
which is the source (actually we use a slightly older version of 
IGNF.xml) from the records ingested into the PROJ database: 
https://github.com/OSGeo/PROJ/blob/master/data/sql/ignf.sql

IGN is of course welcome to take over maintenance of the registry in 
PROJ: cf https://github.com/OSGeo/PROJ/issues/2682

>
> 2) It seems that the geoid grid fr_ign_RAR07_bl.tif
> is missing for the definition of :
>
> REUN47GAUSSL
>
> RGR92UTM40S
>
> REUN47GEO
>
> RGR92GEO
>
In the new ISO191111-based paradygm (which is also more or less the one 
followed by the IGNF.xml file), a grid is not part of a CRS definition. 
Grids can be referenced by transformations.

e.g

bin/projinfo -s IGNF:RGR92GEO -t IGNF:REUN89
Candidate operations found: 1
-------------------------------------
Operation No. 1:

DERIVED_FROM(IGNF):TSG1160, RGR92 (RESEAU GEODESIQUE DE LA REUNION 1992) 
vers IGN 1989 (REUNION), unknown accuracy, ILE DE LA REUNION, at least 
one grid missing

PROJ string:
+proj=pipeline
 ? +step +proj=unitconvert +xy_in=deg +xy_out=rad
 ? +step +inv +proj=vgridshift +grids=fr_ign_RAR07_bl.tif +multiplier=1
 ? +step +proj=unitconvert +xy_in=rad +xy_out=deg

which directly uses the IGNF:TSG1160 transformation of IGNF.xml

>
> 3) It seems that the geoid grid fr_ign_1.tif
> is missing for the definition of :
>
> STPM50UTM21
>
> RGSPM06GEO
>
> STPM50GEO
>
> RGSPM06U21
>
Same here:

$ bin/projinfo -s IGNF:RGSPM06GEO -t IGNF:STPM50_V
Candidate operations found: 1
-------------------------------------
Operation No. 1:

DERIVED_FROM(IGNF):TSG1156, RGSPM06 (RESEAU GEODESIQUE DE 
SAINT-PIERRE-ET-MIQUELON 2006) vers DANGER 1950 
(SAINT-PIERRE-ET-MIQUELON), unknown accuracy, SAINT-PIERRE-ET-MIQUELON, 
at least one grid missing

PROJ string:
+proj=pipeline
 ? +step +proj=unitconvert +xy_in=deg +xy_out=rad
 ? +step +inv +proj=vgridshift +grids=fr_ign_ggspm06v1.tif +multiplier=1
 ? +step +proj=unitconvert +xy_in=rad +xy_out=deg

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20230605/1551bef6/attachment-0001.htm>

From j1 at jimenezshaw.com  Wed Jun 14 15:01:58 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 15 Jun 2023 00:01:58 +0200
Subject: [PROJ] PROJ people at FOSS4G
Message-ID: <CADRrdKtPhc1w0oiHefYurcRnjWEsf6Z0GxJAydHEq3Pjf1v=Og@mail.gmail.com>

Hi PROJ people

Who is coming to FOSS4G 2023 in Kosovo?
It would be nice to meet people in person.

I'm only aware of Even and myself (btw, both talking in two talks).

Cheers
Javier

PS should I make the same question in gdal-dev?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20230615/7cb2a30d/attachment.htm>

From jontkane at uw.edu  Thu Jun 15 13:00:56 2023
From: jontkane at uw.edu (Jonathan Kane)
Date: Thu, 15 Jun 2023 13:00:56 -0700
Subject: [PROJ] Determining that two CRSes are "close enough"
Message-ID: <CAObT6ySUZpNWRZL=B-HhGiDbGx3uBYwhypPPYz45kEXx2PudVA@mail.gmail.com>

Is there a way in the PROJ API to detect that two CRSes are identical
enough that the transform between them is the identity transform? Context
below.

I'm currently writing software, where, as a debug/sanity check, I double
check that my data objects have the same CRS,
with proj_is_equivalent_to(...,...,PJ_COMP_EQUIVALENT). The problem I'm
encountering is that, sometimes, the difference in how CRSes are stored in
different file formats causes that function to return false even when
they're really 'the same'. Like, for example, if I write a .tif file using
GDAL with a given WKT string, and then read that file off the harddrive
later, it won't register as equivalent to the CRS, and inspecting the WKT,
it's very minorly different (one of the two will have a field listed as
unknown, but the other will specify that field; that sort of thing).

I get that this is probably unavoidable to some extent, because not every
file format contains enough information to reproduce the original WKT. But
is there any way to detect that two CRSes are basically the same? All I
really care about is if I need to transform. If the transform between them
is an identity, I don't care if the details are different.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20230615/a936c3cd/attachment.htm>

From even.rouault at spatialys.com  Thu Jun 15 13:08:14 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 15 Jun 2023 22:08:14 +0200
Subject: [PROJ] Determining that two CRSes are "close enough"
In-Reply-To: <CAObT6ySUZpNWRZL=B-HhGiDbGx3uBYwhypPPYz45kEXx2PudVA@mail.gmail.com>
References: <CAObT6ySUZpNWRZL=B-HhGiDbGx3uBYwhypPPYz45kEXx2PudVA@mail.gmail.com>
Message-ID: <659ea6d1-eec0-e5af-f0e4-faf902f9e6d9@spatialys.com>

Jonathan,

if the CRS come from a "known object" (like EPSG:XXXX), then you could 
use proj_identify(), cf 
https://proj.org/en/9.2/development/reference/functions.html#c.proj_identify, 
on both CRS and check if there's a common match with a confidence >= 90% 
(you could possibly lower to 70%)

Even

Le 15/06/2023 ? 22:00, Jonathan Kane a ?crit?:
> Is there a way in the PROJ API to detect that two CRSes are identical 
> enough that the transform between them is the identity transform? 
> Context below.
>
> I'm currently writing software, where, as a debug/sanity check, I 
> double check that my data objects have the same CRS, 
> with?proj_is_equivalent_to(...,...,PJ_COMP_EQUIVALENT). The problem 
> I'm encountering is that, sometimes, the difference in how CRSes are 
> stored in different file formats causes that function to return false 
> even when they're really 'the same'. Like, for example, if I write a 
> .tif file using GDAL with a given WKT string, and then read that file 
> off the harddrive later, it won't register as equivalent to the CRS, 
> and inspecting the WKT, it's very minorly different (one of the two 
> will have a field listed as unknown, but the other will specify that 
> field; that sort of thing).
>
> I get that this is probably unavoidable to some extent, because not 
> every file format contains enough information to reproduce?the 
> original WKT. But is there any way to detect that two CRSes are 
> basically the same? All I really care about is if I need to transform. 
> If the transform between them is an identity, I don't care if the 
> details are different.
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From gdt at lexort.com  Thu Jun 15 16:00:43 2023
From: gdt at lexort.com (Greg Troxel)
Date: Thu, 15 Jun 2023 19:00:43 -0400
Subject: [PROJ] Determining that two CRSes are "close enough"
In-Reply-To: <CAObT6ySUZpNWRZL=B-HhGiDbGx3uBYwhypPPYz45kEXx2PudVA@mail.gmail.com>
 (Jonathan Kane's message of "Thu, 15 Jun 2023 13:00:56 -0700")
References: <CAObT6ySUZpNWRZL=B-HhGiDbGx3uBYwhypPPYz45kEXx2PudVA@mail.gmail.com>
Message-ID: <rmibkhguy90.fsf@s1.lexort.com>

Jonathan Kane <jontkane at uw.edu> writes:

> Is there a way in the PROJ API to detect that two CRSes are identical
> enough that the transform between them is the identity transform? Context
> below.

Note that there are ensembles that are not really the same thing but
result in null transforms, e.g. WGS84 and NAD83.   Not sure how you
would want that handled in eq test, how you want transform or not, vs
what proj does now.  A hard problem.

From jidanni at jidanni.org  Sat Jun 24 08:06:59 2023
From: jidanni at jidanni.org (Dan Jacobson)
Date: Sat, 24 Jun 2023 10:06:59 -0500
Subject: [PROJ] Emulating CalCOFI pseudo-projection
Message-ID: <87zg4o527g.8.fsf@jidanni.org>

Reading https://proj.org/en/9.2/operations/projections/calcofi.html I
became curious if I could emulate it using cs2cs, or other projections,
like:

> The coordinate system is based on the Mercator projection with units
> rotated -30 degrees from the meridian so that they are oriented with the
+proj=omerc +alpha=-30
> coastline of the Southern California Bight and Baja California. Lines
> increase from Northwest to Southeast. A unit of line is 12 nautical miles.
+units=kmi +k_0=.083333
> Stations increase from inshore to offshore. A unit of station is
> equal to 4 nautical miles.
+units=kmi +k_0=.25 #for a second run
> The rotation point is located at line 80, station 60,
+x_0=80 +y_0=60
> or 34.15 degrees N, 121.15 degrees W,
+lonc=-121.15 +lat_0=34.15

Alas, if it were that simple, someone would have mentioned it on
https://github.com/OSGeo/PROJ/issues/135 .

From sgellrich at sensys.de  Thu Jun 29 00:19:07 2023
From: sgellrich at sensys.de (Sebastian Gellrich)
Date: Thu, 29 Jun 2023 07:19:07 +0000
Subject: [PROJ] Proj9 for ARM/Android
Message-ID: <d7c3171532ae4e8a8a101c2476886486@sensys.de>

Hello,

Are there any plans or experiences to compile Proj9 for ARM systems? We would like to integrate Proj9 into our Android app and have so far only found implementations based on Proj4 on the internet.

We want to access the Proj9 library via Android JNI. Mainly we need the functions of the cs2cs module.

Since we have already built Proj9 for x64, we know that other external libraries are also created during this process. Do you have any experience if these external libraries exist or are compilable for ARM systems?

Thanks in advance
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20230629/21875ee8/attachment.htm>

From sebastic at xs4all.nl  Thu Jun 29 00:29:31 2023
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Thu, 29 Jun 2023 09:29:31 +0200
Subject: [PROJ] Proj9 for ARM/Android
In-Reply-To: <d7c3171532ae4e8a8a101c2476886486@sensys.de>
References: <d7c3171532ae4e8a8a101c2476886486@sensys.de>
Message-ID: <d871770a-1bfe-6176-43a2-853f80de9b0b@xs4all.nl>

On 6/29/23 09:19, Sebastian Gellrich wrote:
> Do you have any experience if these external libraries exist or are compilable for ARM systems?
PROJ builds fine on ARM:

  https://buildd.debian.org/status/package.php?p=proj

Kind Regards,

BAs

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From support at mnspoint.com  Thu Jun 29 03:25:10 2023
From: support at mnspoint.com (support at mnspoint.com)
Date: Thu, 29 Jun 2023 13:25:10 +0300
Subject: [PROJ] Proj9 for ARM/Android
In-Reply-To: <d7c3171532ae4e8a8a101c2476886486@sensys.de>
References: <d7c3171532ae4e8a8a101c2476886486@sensys.de>
Message-ID: <315161b06a48c38f4cf0c42f20cfe0b8@mnspoint.com>

We "compile only" PROJ(4) all the time. We don't use unknown binaries at 
all (outside what the compiler injects) since one never knows what they 
are. I suppose you can (should) also go the same way?

Regards Janne

----------------------------------------------------------------
Sebastian Gellrich kirjoitti 2023-06-29 10:19:
> Hello,
> 
> Are there any plans or experiences to compile Proj9 for ARM systems?
> We would like to integrate Proj9 into our Android app and have so far
> only found implementations based on Proj4 on the internet.
> 
> We want to access the Proj9 library via Android JNI. Mainly we need
> the functions of the cs2cs module.
> 
> Since we have already built Proj9 for x64, we know that other external
> libraries are also created during this process. Do you have any
> experience if these external libraries exist or are compilable for ARM
> systems?
> 
> Thanks in advance
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

From bert at qqmail.nl  Thu Jun 29 03:34:51 2023
From: bert at qqmail.nl (Bert Huijben)
Date: Thu, 29 Jun 2023 12:34:51 +0200
Subject: [PROJ] Proj9 for ARM/Android
In-Reply-To: <d7c3171532ae4e8a8a101c2476886486@sensys.de>
References: <d7c3171532ae4e8a8a101c2476886486@sensys.de>
Message-ID: <001301d9aa75$571cefb0$0556cf10$@qqmail.nl>

I know proj builds and works on arm, but I don?t know of anybody providing ready to use binaries for Android.

 ?

I know first hand that it works on Linux ARM64 (Vcpkg has this in their package system) and Windows ARM64 (I cross build this version for SharpProj, and it had some limited tesing), but I don?t think that helps you.

 ?

The CMake system of proj should just work for that platform, but then you need to somehow expose the apis for jni.

 ?

                Bert

 ?

From: PROJ <proj-bounces at lists.osgeo.org> On Behalf Of Sebastian Gellrich
Sent: Thursday, June 29, 2023 9:19 AM
To: proj at lists.osgeo.org
Subject: [PROJ] Proj9 for ARM/Android

 ?

Hello,

 ?

Are there any plans or experiences to compile Proj9 for ARM systems? We would like to integrate Proj9 into our Android app and have so far only found implementations based on Proj4 on the internet. 

 ?

We want to access the Proj9 library via Android JNI. Mainly we need the functions of the cs2cs module. 

 ?

Since we have already built Proj9 for x64, we know that other external libraries are also created during this process. Do you have any experience if these external libraries exist or are compilable for ARM systems?

 ?

Thanks in advance

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20230629/45f22cb1/attachment.htm>

