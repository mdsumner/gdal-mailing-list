From till at free.fr  Thu Jan  1 13:24:56 2009
From: till at free.fr (Till)
Date: Thu, 1 Jan 2009 22:24:56 +0100
Subject: [Proj] Getting Proj information after pj_init has been thrown
Message-ID: <001701c96c57$6512df60$2f389e20$@fr>

Hi all and a very happy new year to anyone.

We're using proj.4 as API and are quite happy with it.

So, our base reference is the proj_api.h header.

Is there any way to retrieve PJ information (like major axis or any other
projection information) after a pj_init() has been called?

We did try to use projects.h in place of proj_api.h but this brings us to
compilation nightmare since this one 'typedef's a PVALUE that winreg.h is
also 'typedef'ying (we're using M$ platform as you may have understood).

Any help in that manner would be welcome.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090101/b39767a0/attachment.html>

From ckarney at sarnoff.com  Fri Jan  2 08:41:35 2009
From: ckarney at sarnoff.com (Charles Karney)
Date: Fri, 02 Jan 2009 11:41:35 -0500
Subject: [Proj] Geo Transfoms and calculations
Message-ID: <ssr8wptlkxs.fsf@petrel.petrel.org>

Gerald I. Evenden wrote:
> That is why I get cranky about the whole issue.

While I have some sympathy with your problems (and I certainly
appreciate your contributions to the software universe), I nevertheless
have two comments:

(1) I question whether the "good ol' days" were really that good.  Back
in the 1970's, you weren't sitting in your "cozy den" hacking on cheap
hardware with a free world-class OS (Linux) and a free world-class
compiler (GCC).  (And the world-class status of both Linux and GCC is a
result, largely, of their GPL status.)

(2) The authors of GSL and readline elected to distribute their code
under the GPL.  Your choices are:
    (a) accept the GPL conditions, or
    (b) decline to use the code.
Kvetching about the choice of the GPL or vilifying the author of the GPL
is unseemly.

[Disclaimer: I am a (very) minor contributor to the GSL.]

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Fri Jan  2 09:08:01 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Fri, 2 Jan 2009 12:08:01 -0500
Subject: [Proj] Ellipsoid data sources
Message-ID: <200901021208.01403.geraldi.evenden@gmail.com>

Because I was refurbishing the GEOD_ELLIPS structure array of standard earth 
ellipse constants with its current 54 entries I seem to recall a seeing a 
list that may have been longer.  However browsing the normal list of suspects 
has turned up nothing.

Does anyone have info on a well vetted and comprehensive list of earth 
ellipsoid constants.

Thanks.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From till at free.fr  Fri Jan  2 09:47:27 2009
From: till at free.fr (Till)
Date: Fri, 2 Jan 2009 18:47:27 +0100
Subject: [Proj] TR: Getting Proj information after pj_init has been thrown
Message-ID: <000b01c96d02$2e9700a0$8bc501e0$@fr>

Sorry if duplication.

Im re-posting it, since it does not show in the mailing lists, whatever
link I tried


 

De : Till [mailto:till at free.fr] 
Envoyé : jeudi 1 janvier 2009 22:25
À : 'PROJ.4 and general Projections Discussions'
Objet : Getting Proj information after pj_init has been thrown

 

Hi all and a very happy new year to anyone.

Were using proj.4 as API and are quite happy with it.

So, our base reference is the proj_api.h header.

Is there any way to retrieve PJ information (like major axis or any other
projection information) after a pj_init() has been called?

We did try to use projects.h in place of proj_api.h but this brings us to
compilation nightmare since this one typedefs a PVALUE that winreg.h is
also typedefying (were using M$ platform as you may have understood).

Any help in that manner would be welcome.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090102/f3ebd1d9/attachment.html>

From ckarney at sarnoff.com  Fri Jan  2 11:22:56 2009
From: ckarney at sarnoff.com (Charles Karney)
Date: Fri, 02 Jan 2009 14:22:56 -0500
Subject: [Proj] Geo Transfoms and calculations
Message-ID: <ssr63kxldgv.fsf@petrel.petrel.org>

Gerald I. Evenden wrote:
> 5.  What's a poor jerk like me supposed to do?  For example, on the
> geodetic program I am currently finishing up I want to put 'readline'
> on the front end for obvious reasons; BUT wait, that uses GPL.  Arrgh!
> I can hear the bitching and moaning now.  At the moment I have a
> simple procedure called 'readline' as a substitute but gee, is the
> name possible copyrighted too?

Is this really such a problem?  The MIT license is compatible with GPL.
So you can distribute MIT-licensed code which links against GPL
libraries.  The resulting executable is covered by the GPL but the
source remains under the MIT license.

A commercial entity which wants to incorporate your code into its
proprietary code will need to find a substitute for the GPL library, of
course.  Or, as you noted, you might provide a lame substitute yourself
(a dummy version of readline or simple-minded implementations of GSL
functions).

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From support.mn at elisanet.fi  Sun Jan  4 07:16:51 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Sun, 4 Jan 2009 17:16:51 +0200 (EET)
Subject: [Proj] WGS84 Definition etc.
Message-ID: <6320874.99361231082211760.JavaMail.support.mn@elisanet.fi>

Hello,

I put here also a link to the Nima 1997 report:

"Department of Defense
World Geodetic System 1984
Its Definition and Relationships
with Local Geodetic Systems"

http://users.auth.gr/~kvek/wgs84rpt.pdf

It seems to be approved for public release, unlimited distribution.

Regards: Janne.



From geraldi.evenden at gmail.com  Mon Jan  5 08:02:48 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 5 Jan 2009 11:02:48 -0500
Subject: [Proj] TR: Getting Proj information after pj_init has been
	thrown
In-Reply-To: <000b01c96d02$2e9700a0$8bc501e0$@fr>
References: <000b01c96d02$2e9700a0$8bc501e0$@fr>
Message-ID: <200901051102.48965.geraldi.evenden@gmail.com>

On Friday 02 January 2009 12:47:27 pm Till wrote:
> Sorry if duplication.
>
> Im re-posting it, since it does not show in the mailing lists, whatever
> link I tried
>
>
>
> De : Till [mailto:till at free.fr]
> Envoyé : jeudi 1 janvier 2009 22:25
> À : 'PROJ.4 and general Projections Discussions'
> Objet : Getting Proj information after pj_init has been thrown
>
>
>
> Hi all and a very happy new year to anyone.
>
> Were using proj.4 as API and are quite happy with it.
>
> So, our base reference is the proj_api.h header.
>
> Is there any way to retrieve PJ information (like major axis or any other
> projection information) after a pj_init() has been called?
>
> We did try to use projects.h in place of proj_api.h but this brings us to
> compilation nightmare since this one typedefs a PVALUE that winreg.h is
> also typedefying (were using M$ platform as you may have understood).
>
> Any help in that manner would be welcome.

I cannot speak for what was done to the proj.4 path but the header for 
libproj4 has comments that detail the content of the structure that 
proj_init() (updated pj_init) returns and that includes details of the 
ellipsoid parameters but not the ellipsoid name.  The ascii projection 
parameters are also available in the linked list in the same structure.  Most 
of this was also available in the older proj versions.

I think the old proj program had the -V switch which dumped the settings, 
including ellipse parameters, of a init() return structure.  Certainly, lproj 
has -V,

Again, it is really sad that the original proj distribution had not been 
preserved and was needlessly altered.  i am of very little help on current 
proj.4 details.  I do note that the struct PJconsts in projects.h contains 
the comments I wrote but how it is used is unknown.

As soon as I get the geodesic distribution completed and out in a day or two I 
will start to apply much of the techniques initiated there to complete 
overhaul of libproj4.  I will add that changes in programatic linkage should 
be minimal.  More later.

Alas, these efforts are of no help for proj.4 problem.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Mon Jan  5 08:15:07 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 5 Jan 2009 11:15:07 -0500
Subject: [Proj] geodesic distribution
Message-ID: <200901051115.07379.geraldi.evenden@gmail.com>

Sorry to be a little late on geodesic distribution but my dsl model blew last 
Friday.  After giving a literal declaration of "Bull Shit" to some poor 
Verizon lackey in an Indian boiler room I went to local Staples and bought a 
new modem/router.

Message of the week: after going through the interminable sequence of machine 
answering devices that Verizon puts in your path to a human voice they have 
the message: "for internet troubles please visit www.blah.blah for 
assistance."  Yeah, right, With what? A magic carpet?

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From warmerdam at pobox.com  Mon Jan  5 08:27:21 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 05 Jan 2009 11:27:21 -0500
Subject: [Proj] Getting Proj information after pj_init has been thrown
In-Reply-To: <001701c96c57$6512df60$2f389e20$@fr>
References: <001701c96c57$6512df60$2f389e20$@fr>
Message-ID: <496234E9.2020807@pobox.com>

Till wrote:
> Hi all and a very happy new year to anyone.
> 
> We’re using proj.4 as API and are quite happy with it.
> 
> So, our base reference is the proj_api.h header.
> 
> Is there any way to retrieve PJ information (like major axis or any 
> other projection information) after a pj_init() has been called?
> 
> We did try to use projects.h in place of proj_api.h but this brings us 
> to compilation nightmare since this one ‘typedef’s a PVALUE that 
> winreg.h is also ‘typedef’ying (we’re using M$ platform as you may have 
> understood).
> 
> Any help in that manner would be welcome.

Till,

One option is to segregate the use of projects.h in a source file that does
not include windows.h and dependent stuff.  Then you can directly access
into the PJ structure.

Generally speaking internal access to the PJ structure is not encouraged.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Mon Jan  5 08:29:54 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 05 Jan 2009 11:29:54 -0500
Subject: [Proj] TR: Getting Proj information after pj_init has been
 thrown
In-Reply-To: <200901051102.48965.geraldi.evenden@gmail.com>
References: <000b01c96d02$2e9700a0$8bc501e0$@fr>
	<200901051102.48965.geraldi.evenden@gmail.com>
Message-ID: <49623582.1050508@pobox.com>

Gerald I. Evenden wrote:
> Again, it is really sad that the original proj distribution had not been 
> preserved and was needlessly altered.  

Folks,

I'd note that the original PROJ 4.3.3 from before I needlessly altered it
is still available for download from:

   http://download.osgeo.org/proj/from_kai/

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From scott.ellington at gmail.com  Mon Jan  5 08:30:39 2009
From: scott.ellington at gmail.com (scott ellington)
Date: Mon, 5 Jan 2009 11:30:39 -0500
Subject: [Proj] list available srids
Message-ID: <827127f80901050830o71263a67u738529b0cea15926@mail.gmail.com>

Hi Folks,

I have poked through the code, but I don't see anything in the api for
acquiring a list of available srids, epsg for example.  Is this the
case?

Thanks,
Scott


From EMiller at dfg.ca.gov  Mon Jan  5 08:49:46 2009
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Mon, 05 Jan 2009 08:49:46 -0800
Subject: [Proj] list available srids
In-Reply-To: <827127f80901050830o71263a67u738529b0cea15926@mail.gmail.com>
References: <827127f80901050830o71263a67u738529b0cea15926@mail.gmail.com>
Message-ID: <4961C9AA.95FD.00E4.0@dfg.ca.gov>

The epsg stuff is in the NAD/ directory.  It's just a text file.  Frank periodically regenerates it.

The functions for reading the initialization files are all static to pj_init.c.  So, there is no API for listing the contents of init files. 

>>> On 1/5/2009 at 8:30 AM, "scott ellington" <scott.ellington at gmail.com> wrote:
> Hi Folks,
> 
> I have poked through the code, but I don't see anything in the api for
> acquiring a list of available srids, epsg for example.  Is this the
> case?
> 
> Thanks,
> Scott
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org 
> http://lists.maptools.org/mailman/listinfo/proj



From geraldi.evenden at gmail.com  Mon Jan  5 09:11:31 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 5 Jan 2009 12:11:31 -0500
Subject: [Proj] Getting Proj information after pj_init has been thrown
In-Reply-To: <496234E9.2020807@pobox.com>
References: <001701c96c57$6512df60$2f389e20$@fr> <496234E9.2020807@pobox.com>
Message-ID: <200901051211.31110.geraldi.evenden@gmail.com>

On Monday 05 January 2009 11:27:21 am Frank Warmerdam wrote:
> Till wrote:
> > Hi all and a very happy new year to anyone.
> >
	...
>
> Generally speaking internal access to the PJ structure is not encouraged.

I guess I do not understand this statement as I ask: why?

One should not alter the contents but examination is encouraged.  That is why 
there is the -V option in program lproj.  The stucture is the "definition" of 
the projection operation.  It is the digested result of all the "+args" that 
have been thrown at the initialization.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From scott.ellington at gmail.com  Mon Jan  5 09:22:08 2009
From: scott.ellington at gmail.com (scott ellington)
Date: Mon, 5 Jan 2009 12:22:08 -0500
Subject: [Proj] list available srids
In-Reply-To: <4961C9AA.95FD.00E4.0@dfg.ca.gov>
References: <827127f80901050830o71263a67u738529b0cea15926@mail.gmail.com>
	<4961C9AA.95FD.00E4.0@dfg.ca.gov>
Message-ID: <827127f80901050922r4f49a13bq22bd7a69aa3ede8c@mail.gmail.com>

Thanks.  I am trying to expose a list of available SRIDs to my users.
I suppose I'll have to copy the algorithms proj.4 uses to look them
up.

On Mon, Jan 5, 2009 at 11:49 AM, Eric Miller <EMiller at dfg.ca.gov> wrote:
> The epsg stuff is in the NAD/ directory.  It's just a text file.  Frank periodically regenerates it.
>
> The functions for reading the initialization files are all static to pj_init.c.  So, there is no API for listing the contents of init files.
>
>>>> On 1/5/2009 at 8:30 AM, "scott ellington" <scott.ellington at gmail.com> wrote:
>> Hi Folks,
>>
>> I have poked through the code, but I don't see anything in the api for
>> acquiring a list of available srids, epsg for example.  Is this the
>> case?
>>
>> Thanks,
>> Scott
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


From warmerdam at pobox.com  Mon Jan  5 09:45:13 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 05 Jan 2009 12:45:13 -0500
Subject: [Proj] Getting Proj information after pj_init has been thrown
In-Reply-To: <200901051211.31110.geraldi.evenden@gmail.com>
References: <001701c96c57$6512df60$2f389e20$@fr> <496234E9.2020807@pobox.com>
	<200901051211.31110.geraldi.evenden@gmail.com>
Message-ID: <49624729.6060608@pobox.com>

Gerald I. Evenden wrote:
> On Monday 05 January 2009 11:27:21 am Frank Warmerdam wrote:
>> Till wrote:
>>> Hi all and a very happy new year to anyone.
>>>
> 	...
>> Generally speaking internal access to the PJ structure is not encouraged.
> 
> I guess I do not understand this statement as I ask: why?
> 
> One should not alter the contents but examination is encouraged.  That is why 
> there is the -V option in program lproj.  The stucture is the "definition" of 
> the projection operation.  It is the digested result of all the "+args" that 
> have been thrown at the initialization.

Gerald,

I have not considered the PJ structure public as PROJ.4 has evolved.  The
internals are not exposed when using the proj_api.h public include file.
The contents of the structure are not well documented.

Amoung other things, I try to avoid ABI changes in PROJ.4 as much as possible,
but if apps can access the PJ structure contents that makes it part of the ABI
and thus hard to extend without disruption.

None of this prevents a developer from using the contents of the structure
if they want to, but they do so at their own risk and having to work out some
of the details on their own.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From geraldi.evenden at gmail.com  Mon Jan  5 09:56:32 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 5 Jan 2009 12:56:32 -0500
Subject: [Proj] Getting Proj information after pj_init has been thrown
In-Reply-To: <496234E9.2020807@pobox.com>
References: <001701c96c57$6512df60$2f389e20$@fr> <496234E9.2020807@pobox.com>
Message-ID: <200901051256.32497.geraldi.evenden@gmail.com>

Below is the definition of the structure returned by proj_init():

typedef struct PROJconsts {
	PROJ_XY  (*fwd)(PROJ_LP, struct PROJconsts *);
	PROJ_LP  (*inv)(PROJ_XY, struct PROJconsts *);
	void (*spc)(PROJ_LP, struct PROJconsts *, struct PROJ_FACTORS *);
    int  (*derivs)(struct PROJconsts *, PROJ_LP, struct PROJ_DERIVS *);
	void (*pfree)(struct PROJconsts *);
	const char *descr;
	paralist *params;   /* parameter list */
	int over;   /* over-range flag */
	int geoc;   /* geocentric latitude flag */
	double
		a,  /* major axis or radius if es==0 */
		e,  /* eccentricity */
		es, /* e ^ 2 */
		ra, /* 1/A */
		one_es, /* 1 - e^2 */
		rone_es, /* 1/one_es */
		lam0, phi0, /* central longitude, latitude */
		x0, y0, /* easting and northing */
		k0,	/* general scaling factor */
		to_meter, fr_meter; /* cartesian scaling */
#ifdef PROJ_PARMS__
PROJ_PARMS__
#endif /* end of optional extensions */

I think you will find that it is *very* similar to old proj.4 material.

One interesting feature of this header definition is that it is not complete.  
Completion is "added" during the initialization of a projection and further 
elements are after the 'double' declaration.  But not to worry.  All the 
parameters used in initializing the projection are in the linked 
list 'paralist' whose structure is defined elsewhere in the header.

Hopefully, this will be much better documented if we can get libproj into a 
Doxygen system that will be much more open to any interested user.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From cjmce at lsu.edu  Mon Jan  5 11:25:40 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Mon, 5 Jan 2009 13:25:40 -0600
Subject: [Proj] Ellipsoid data sources
References: <200901021208.01403.geraldi.evenden@gmail.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2591@email002.lsu.edu>

The largest I have ever seen in one place that is published is Georg Strasser's Ph.D. dissertation from the 1960s, but I don't know if it's available on the internet.  Of course, it doesn't have the ones listed after that date of publication.  I think it contained over 200 ellipsoids  ...
 
I'm writing this from out of town, so I can't put my finger on my copy for a week or so.
 
Cliff Mugnier
LSU

________________________________

From: proj-bounces at lists.maptools.org on behalf of Gerald I. Evenden
Sent: Fri 02-Jan-09 11:08
To: PROJ.4 and general Projections Discussions
Subject: [Proj] Ellipsoid data sources



Because I was refurbishing the GEOD_ELLIPS structure array of standard earth
ellipse constants with its current 54 entries I seem to recall a seeing a
list that may have been longer.  However browsing the normal list of suspects
has turned up nothing.

Does anyone have info on a well vetted and comprehensive list of earth
ellipsoid constants.

Thanks.

--
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090105/2e356747/attachment.html>

From strebe at aol.com  Mon Jan  5 14:18:55 2009
From: strebe at aol.com (strebe)
Date: Mon, 05 Jan 2009 14:18:55 -0800
Subject: [Proj] Geo Transfoms and calculations
In-Reply-To: <ssr8wptlkxs.fsf@petrel.petrel.org>
Message-ID: <20307709.56E9.4854.B1E1.C549A75A4BB1@aol.com>


Not to start a war, but GCC is not quite "world class". It is usable, but the code generation from MS Visual Studio C++ is much better. Intel also supplies their own compiler so that developers have access to world-class code generation; I have read it's even better than Microsoft's but have not used it myself, though I am considering it for Macintosh.

How do I know this? The disinterested benchmarks say so. Not content to take others' word for it, my own software Geocart runs nearly twice as fast on VS C++ -generated code than on GCC-generated code in compute-bound situations. That's... important, when I have massive raster reprojections that take minutes or even hours.

GCC's conformance to C++ standards used to be MUCH better than VS C++, but that advantage has dwindled since VS C++ 7 and pretty much disappeared in VSC++ 8, which I have on occasion found to be even more conformant than GCC. VS C++ 6 was a standards disaster.
<<< shudder >>>

So, I would agree GCC is world-class for standards conformance, which is important. The same cannot be said for code generation, which is also important. Since the best performers in that regard come out of proprietary vendors, I have to view "the world-class status of both Linux and GCC is a result, largely, of their GPL status" to be more ideological than a factual, particularly since there are not many metrics the market cares about by which Linux leads the world. Still, I am grateful to have the GPL, and I agree it makes no sense to fault the GPL community for the license or its implications. Fair's fair, and it's not like developers would be better off if GPL did not exist.

Regards,
— daan Strebe


On Jan 2, 2009, at 8:41:35 AM, "Charles Karney" <ckarney at sarnoff.com> wrote:
(1) I question whether the "good ol' days" were really that good.  Back
in the 1970's, you weren't sitting in your "cozy den" hacking on cheap
hardware with a free world-class OS (Linux) and a free world-class
compiler (GCC).  (And the world-class status of both Linux and GCC is a
result, largely, of their GPL status.)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090105/42c419e7/attachment.html>

From geraldi.evenden at gmail.com  Mon Jan  5 14:35:58 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 5 Jan 2009 17:35:58 -0500
Subject: [Proj] Ellipsoid data sources
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC2591@email002.lsu.edu>
References: <200901021208.01403.geraldi.evenden@gmail.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC2591@email002.lsu.edu>
Message-ID: <200901051735.58910.geraldi.evenden@gmail.com>

An aside to this issue: the NIMA pdf Janne ref'ed on local geodetic systems 
notes "ID codes" with it appendix of ellipoid tables.  For example: WGS 84 
was code "WE".

Reference may be in the pdf but I could not locate it.  It just refers 
to "standardized two letter code."

Does anyone know where and who is responsible for these codes?

On Monday 05 January 2009 2:25:40 pm Clifford J Mugnier wrote:
> The largest I have ever seen in one place that is published is Georg
> Strasser's Ph.D. dissertation from the 1960s, but I don't know if it's
> available on the internet.  Of course, it doesn't have the ones listed
> after that date of publication.  I think it contained over 200 ellipsoids 
> ...
	...
> From: proj-bounces at lists.maptools.org on behalf of Gerald I. Evenden
> Sent: Fri 02-Jan-09 11:08
> To: PROJ.4 and general Projections Discussions
> Subject: [Proj] Ellipsoid data sources
>
>
>
> Because I was refurbishing the GEOD_ELLIPS structure array of standard
> earth ellipse constants with its current 54 entries I seem to recall a
> seeing a list that may have been longer.  However browsing the normal list
> of suspects has turned up nothing.
>
> Does anyone have info on a well vetted and comprehensive list of earth
> ellipsoid constants.


-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From warmerdam at pobox.com  Mon Jan  5 14:39:08 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 05 Jan 2009 17:39:08 -0500
Subject: [Proj] Ellipsoid data sources
In-Reply-To: <200901051735.58910.geraldi.evenden@gmail.com>
References: <200901021208.01403.geraldi.evenden@gmail.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC2591@email002.lsu.edu>
	<200901051735.58910.geraldi.evenden@gmail.com>
Message-ID: <49628C0C.3020907@pobox.com>

Gerald I. Evenden wrote:
> An aside to this issue: the NIMA pdf Janne ref'ed on local geodetic systems 
> notes "ID codes" with it appendix of ellipoid tables.  For example: WGS 84 
> was code "WE".
> 
> Reference may be in the pdf but I could not locate it.  It just refers 
> to "standardized two letter code."
> 
> Does anyone know where and who is responsible for these codes?

Gerald,

I'm familiar with these codes from the datum and ellipsoid information
distributed with GeoTrans produced at NIMA/NGA.  So I assume they are
based on some military coordinate system standard.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From EMiller at dfg.ca.gov  Mon Jan  5 15:16:56 2009
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Mon, 05 Jan 2009 15:16:56 -0800
Subject: [Proj] Ellipsoid data sources
In-Reply-To: <200901051735.58910.geraldi.evenden@gmail.com>
References: <200901021208.01403.geraldi.evenden@gmail.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC2591@email002.lsu.edu>
	<200901051735.58910.geraldi.evenden@gmail.com>
Message-ID: <49622468.95FD.00E4.0@dfg.ca.gov>

The codes are listed in Appendix A.1 of TR8350.2.

Note, the version posted here is not the latest available.  Reportedly, it was last amended on 2004-06-23.

http://earth-info.nga.mil/GandG/publications/tr8350.2/tr8350_2.html


>>> On 1/5/2009 at 2:35 PM, "Gerald I. Evenden" <geraldi.evenden at gmail.com> wrote:
> An aside to this issue: the NIMA pdf Janne ref'ed on local geodetic systems 
> notes "ID codes" with it appendix of ellipoid tables.  For example: WGS 84 
> was code "WE".
> 
> Reference may be in the pdf but I could not locate it.  It just refers 
> to "standardized two letter code."
> 
> Does anyone know where and who is responsible for these codes?
> 
> On Monday 05 January 2009 2:25:40 pm Clifford J Mugnier wrote:
>> The largest I have ever seen in one place that is published is Georg
>> Strasser's Ph.D. dissertation from the 1960s, but I don't know if it's
>> available on the internet.  Of course, it doesn't have the ones listed
>> after that date of publication.  I think it contained over 200 ellipsoids 
>> ...
> 	...
>> From: proj-bounces at lists.maptools.org on behalf of Gerald I. Evenden
>> Sent: Fri 02-Jan-09 11:08
>> To: PROJ.4 and general Projections Discussions
>> Subject: [Proj] Ellipsoid data sources
>>
>>
>>
>> Because I was refurbishing the GEOD_ELLIPS structure array of standard
>> earth ellipse constants with its current 54 entries I seem to recall a
>> seeing a list that may have been longer.  However browsing the normal list
>> of suspects has turned up nothing.
>>
>> Does anyone have info on a well vetted and comprehensive list of earth
>> ellipsoid constants.
> 



From ckarney at sarnoff.com  Mon Jan  5 15:38:49 2009
From: ckarney at sarnoff.com (Charles Karney)
Date: Mon, 05 Jan 2009 18:38:49 -0500
Subject: [Proj] Geo Transfoms and calculations
In-Reply-To: <20307709.56E9.4854.B1E1.C549A75A4BB1@aol.com>
References: <20307709.56E9.4854.B1E1.C549A75A4BB1@aol.com>
Message-ID: <49629A09.9070406@sarnoff.com>

strebe wrote:
> Not to start a war, but GCC is not quite "world class".

I did not mean to imply that GCC is the best compiler in the world --
merely that it can hold its own against other compilers.  Similarly for
Linux as an OS.

Sorry if I was misunderstood...

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Mon Jan  5 16:43:25 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 5 Jan 2009 19:43:25 -0500
Subject: [Proj] Method of reference to license within software code modules
Message-ID: <200901051943.25984.geraldi.evenden@gmail.com>

Not a bash nor editorial.

Question: does/should a copy of the license that covers a program module be 
placed within each and every source file??

I had been putting a copy of the MIT in every file of whatever that ends up in 
a distubution tarball.  Is that necessary?  I doubt that a copy of the 10,000 
lines of GPL ends up in each of Stallman's files.  ;-)

Is a reference and url (such as 
http://www.opensource.org/licenses/mit-license.php
sufficient?

Anyway, I feel that I have been a bit excessive.

Thanks.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From warmerdam at pobox.com  Mon Jan  5 16:49:39 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 05 Jan 2009 19:49:39 -0500
Subject: [Proj] Method of reference to license within software code
 modules
In-Reply-To: <200901051943.25984.geraldi.evenden@gmail.com>
References: <200901051943.25984.geraldi.evenden@gmail.com>
Message-ID: <4962AAA3.10906@pobox.com>

Gerald I. Evenden wrote:
> Not a bash nor editorial.
> 
> Question: does/should a copy of the license that covers a program module be 
> placed within each and every source file??
> 
> I had been putting a copy of the MIT in every file of whatever that ends up in 
> a distubution tarball.  Is that necessary?  I doubt that a copy of the 10,000 
> lines of GPL ends up in each of Stallman's files.  ;-)
> 
> Is a reference and url (such as 
> http://www.opensource.org/licenses/mit-license.php
> sufficient?
> 
> Anyway, I feel that I have been a bit excessive.

Gerald,

It is my practice to include a copy of the MIT license in each source file
since it is of a managable size.

However, for GPL projects it is common practice to name the license and
version and refer to a COPYING file with the full license so that only one
copy of the GPL (etc) needs to go with each project.

It is generally not considered good practice to refer to a license only by
URL since web resources can easily be lost, change, etc.  So I'd encourage
having at least one copy of the license in your source distribution.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From proj at cwilson.fastmail.fm  Mon Jan  5 17:16:14 2009
From: proj at cwilson.fastmail.fm (Charles Wilson)
Date: Mon, 05 Jan 2009 20:16:14 -0500
Subject: [Proj] Method of reference to license within software code
	modules
In-Reply-To: <200901051943.25984.geraldi.evenden@gmail.com>
References: <200901051943.25984.geraldi.evenden@gmail.com>
Message-ID: <1231204574.8780.1293172501@webmail.messagingengine.com>


On Mon, 5 Jan 2009 19:43:25 -0500, "Gerald I. Evenden" said:
> Question: does/should a copy of the license that covers a program module
> be 
> placed within each and every source file??

The usual practice is yes, when the license itself is short (20-30
lines). So, MIT license, BSD, usually yes.

> I had been putting a copy of the MIT in every file of whatever that ends
> up in 
> a distubution tarball.  Is that necessary?  I doubt that a copy of the
> 10,000 
> lines of GPL ends up in each of Stallman's files.  ;-)

Right. The FSF gives the following advice:
http://www.gnu.org/licenses/gpl-howto.html
which basically says: here's 20-30 lines of boilerplate that goes in
each and every file; include one copy of the entire GPL in your package.

So, that's the way RMS's files are done.

> Is a reference and url (such as 
> http://www.opensource.org/licenses/mit-license.php
> sufficient?

Usually no, as Frank mentioned.

> Anyway, I feel that I have been a bit excessive.

Nope, I think you did it just right.

--
Chuck


From geraldi.evenden at gmail.com  Mon Jan  5 17:22:26 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 5 Jan 2009 20:22:26 -0500
Subject: [Proj] Method of reference to license within software code
	modules
In-Reply-To: <4962AAA3.10906@pobox.com>
References: <200901051943.25984.geraldi.evenden@gmail.com>
	<4962AAA3.10906@pobox.com>
Message-ID: <200901052022.26502.geraldi.evenden@gmail.com>

On Monday 05 January 2009 7:49:39 pm Frank Warmerdam wrote:
> Gerald I. Evenden wrote:
> > Not a bash nor editorial.
> >
> > Question: does/should a copy of the license that covers a program module
> > be placed within each and every source file??
> >
> > I had been putting a copy of the MIT in every file of whatever that ends
> > up in a distubution tarball.  Is that necessary?  I doubt that a copy of
> > the 10,000 lines of GPL ends up in each of Stallman's files.  ;-)
> >
> > Is a reference and url (such as
> > http://www.opensource.org/licenses/mit-license.php
> > sufficient?
> >
> > Anyway, I feel that I have been a bit excessive.
>
> Gerald,
>
> It is my practice to include a copy of the MIT license in each source file
> since it is of a managable size.

For some of my shorter files the license is longer than the code.  In 
[lib]proj I would not be surprised that 35 t0 40% of the text in the code 
distribution is license text.

Counting the characters in the RCS files (RCS adds some overhead to the bare 
file length) of the libproj4 RCS directory and the character count of the 
license times the number of files shows that 35.9% of the directory's content 
is repeated license text!  So my guess came damn close.

> However, for GPL projects it is common practice to name the license and
> version and refer to a COPYING file with the full license so that only one
> copy of the GPL (etc) needs to go with each project.

I am begining to feel that about 3-4 lines of copyright and reference to a 
COPYING file is the way to go.

> It is generally not considered good practice to refer to a license only by
> URL since web resources can easily be lost, change, etc.  So I'd encourage
> having at least one copy of the license in your source distribution.

I agree with that!

> Best regards,

Any other comments, please.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Mon Jan  5 17:44:26 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 5 Jan 2009 20:44:26 -0500
Subject: [Proj] Method of reference to license within software code
	modules
In-Reply-To: <1231204574.8780.1293172501@webmail.messagingengine.com>
References: <200901051943.25984.geraldi.evenden@gmail.com>
	<1231204574.8780.1293172501@webmail.messagingengine.com>
Message-ID: <200901052044.26264.geraldi.evenden@gmail.com>

On Monday 05 January 2009 8:16:14 pm Charles Wilson wrote:
> On Mon, 5 Jan 2009 19:43:25 -0500, "Gerald I. Evenden" said:
> > Question: does/should a copy of the license that covers a program module
> > be
> > placed within each and every source file??
>
> The usual practice is yes, when the license itself is short (20-30
> lines). So, MIT license, BSD, usually yes.
>
> > I had been putting a copy of the MIT in every file of whatever that ends
> > up in
> > a distubution tarball.  Is that necessary?  I doubt that a copy of the
> > 10,000
> > lines of GPL ends up in each of Stallman's files.  ;-)
>
> Right. The FSF gives the following advice:
> http://www.gnu.org/licenses/gpl-howto.html
> which basically says: here's 20-30 lines of boilerplate that goes in
> each and every file; include one copy of the entire GPL in your package.

I cannot find a reference to that line 20-30 count---but I nit-pick.  Their 
example that references the COPYING file is about 15 lines.  The MIT is about 
27 lines.

> So, that's the way RMS's files are done.
>
> > Is a reference and url (such as
> > http://www.opensource.org/licenses/mit-license.php
> > sufficient?
>
> Usually no, as Frank mentioned.

Again, I agree.

> > Anyway, I feel that I have been a bit excessive.
>
> Nope, I think you did it just right.

Over a third of what I distribute is nothing but repeated license.

> --
> Chuck

Besides, Frank does not even follow his own advice.  Many of the files in 
proj-4.4.9 don't have any license---and it is *not* my code.  :-)

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From proj at cwilson.fastmail.fm  Mon Jan  5 19:12:43 2009
From: proj at cwilson.fastmail.fm (Charles Wilson)
Date: Mon, 05 Jan 2009 22:12:43 -0500
Subject: [Proj] Method of reference to license within software code
	modules
In-Reply-To: <200901052044.26264.geraldi.evenden@gmail.com>
References: <200901051943.25984.geraldi.evenden@gmail.com>
	<1231204574.8780.1293172501@webmail.messagingengine.com>
	<200901052044.26264.geraldi.evenden@gmail.com>
Message-ID: <4962CC2B.7090307@cwilson.fastmail.fm>

Gerald I. Evenden wrote:
> On Monday 05 January 2009 8:16:14 pm Charles Wilson wrote:
>> The usual practice is yes, when the license itself is short (20-30
>> lines). So, MIT license, BSD, usually yes.
> I cannot find a reference to that line 20-30 count---but I nit-pick.  Their 
> example that references the COPYING file is about 15 lines.  The MIT is about 
> 27 lines.

Right -- it just seems /to me/ to be the usual practice: most open
source softwares seem to embed MIT (27 lines) and BSD-[any flavor]
(anywhere from 21 to 28 lines) in every file.

The FSF gives specific guidance on how to deal with the GPL's mammoth
length, and recommends putting *something* in every source file (which
is 20 lines).

As a contrary data point, the entire zlib/libpng license is 20 lines,
but the zlib source code includes only a 3-line header in each file:

/* crc32.c -- compute the CRC-32 of a data stream
 * Copyright (C) 1995-2005 Mark Adler
 * For conditions of distribution and use, see copyright notice in
zlib.h
 */

And nobody has complained yet that it isn't legal.

>>> Anyway, I feel that I have been a bit excessive.
>> Nope, I think you did it just right.
> 
> Over a third of what I distribute is nothing but repeated license.

Well, the good news is compression formats' bread and butter is
eliminating redundant text.  Hence, .tar.gz/.tar.bz2/.tar.lzma/.zip
files probably won't grow or shrink much at all whatever you do to the
license banner in each file.

There's probably a certain amount of overhead associated with direct svn
downloads -- but updates are communicated by delta, so it's probably not
a big deal there, either.

Dealer's choice, really.

--
Chuck


From proj at cwilson.fastmail.fm  Mon Jan  5 20:29:25 2009
From: proj at cwilson.fastmail.fm (Charles Wilson)
Date: Mon, 05 Jan 2009 23:29:25 -0500
Subject: [Proj] Geo Transfoms and calculations
In-Reply-To: <ssr63kxldgv.fsf@petrel.petrel.org>
References: <ssr63kxldgv.fsf@petrel.petrel.org>
Message-ID: <4962DE25.9080306@cwilson.fastmail.fm>

Charles Karney wrote:
> Gerald I. Evenden wrote:
>> 5.  What's a poor jerk like me supposed to do?  For example, on the
>> geodetic program I am currently finishing up I want to put 'readline'
>> on the front end for obvious reasons; BUT wait, that uses GPL.  Arrgh!
>> I can hear the bitching and moaning now.  At the moment I have a
>> simple procedure called 'readline' as a substitute but gee, is the
>> name possible copyrighted too?

There's a similar BSD-licensed library called editline, which is a
"autotool- and libtoolized port of the NetBSD Editline library
(libedit)." In addition to its own native el_* interface, it provides a
mostly-complete implementation of the rl_* readline interface in
editline/readline.h.

http://thrysoee.dk/editline/

It depends on lib[n]curses or libtermcap (but then, so does readline
usually).

> A commercial entity which wants to incorporate your code into its
> proprietary code will need to find a substitute for the GPL library, of
> course.  Or, as you noted, you might provide a lame substitute yourself
> (a dummy version of readline or simple-minded implementations of GSL
> functions).

Legally Gerald can do anything he wants -- including weave GSL so
tightly into proj that for all intents and purposes proj becomes defacto
GPL -- even if its own intrinsic code is nominally MIT.

However, there are a lot of commercial entities which currently use the
proj library.  Gerald is graciously being considerate of the needs of
existing users, and is trying to find a workable middle ground that
doesn't impose too much of a burden on his limited time (e.g. no
re-inventing the GSL wheel), but doesn't heavily limit existing
commercial users (so, only judicious use of GSL/readline in
#ifdef-outable ways).  My hope is that these #ifdef-out sections don't
grow to encompass large swaths of existing proj functionality -- but
it's only a hope.

People have always complained about the divide between the permissive
open-source and copy-left communities, ever since RMS invented the
latter. That won't change...and the divide won't go away -- and it's
hard to straddle the boundary.  Gerald is just the latest voice to join
the chorus.

--
Chuck


From neteler at osgeo.org  Tue Jan  6 00:41:41 2009
From: neteler at osgeo.org (Markus Neteler)
Date: Tue, 6 Jan 2009 09:41:41 +0100
Subject: [Proj] Method of reference to license within software code
	modules
In-Reply-To: <200901052022.26502.geraldi.evenden@gmail.com>
References: <200901051943.25984.geraldi.evenden@gmail.com>
	<4962AAA3.10906@pobox.com>
	<200901052022.26502.geraldi.evenden@gmail.com>
Message-ID: <86782b610901060041me3fb721n8ae72e7354771268@mail.gmail.com>

On Tue, Jan 6, 2009 at 2:22 AM, Gerald I. Evenden
<geraldi.evenden at gmail.com> wrote:
> Any other comments, please.

In the GRASS project (GPL) we use the following:
Example (ficticious header for a file called color.c) :

/****************************************************************************
 *
 * MODULE:       d.rast
 * AUTHOR(S):    CERL
 *               John Doe - jdoe at some.where.org
 * PURPOSE:      To provide storage and manipulation of colors used for
 *               rendering the raster. The colors are stored in a doubly linked
 *               list which must be initialized with InitColors() before it can
 *               be used. Note that most linked list functionality (add,
 *               remove, get) is supported, but their is no sorting
 *               functionality.
 * COPYRIGHT:    (C) 2008 by the GRASS Development Team
 *
 *               This program is free software under the GNU General Public
 *               License (>=v2). Read the file COPYING that comes with GRASS
 *               for details.
 *
 *****************************************************************************/

That's rather short and acceptable. Additionally, the COPYING file from
the GPL is included in the tarball.

Best,
Markus

-- 
Markus Neteler
Fondazione Mach  -  Centre for Alpine Ecology
38100 Viote del Monte Bondone (Trento), Italy
http://gis.fem-environment.eu/
neteler AT cealp.it


From cbisegni at gmail.com  Tue Jan  6 06:28:16 2009
From: cbisegni at gmail.com (Claudio Bisegni)
Date: Tue, 6 Jan 2009 15:28:16 +0100
Subject: [Proj] Plog GPS Coordinate to Screen
Message-ID: <E799000B-82A8-4D7C-A220-2E1D8FAED36F@gmail.com>

Hi, i'm new to Proj lib. I wan't to write a software to plog gps  
coordinate to the screen. How can i setup proj to do this work? thank  
in advanced.


From geraldi.evenden at gmail.com  Tue Jan  6 09:06:52 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 6 Jan 2009 12:06:52 -0500
Subject: [Proj] Method of reference to license within software code
	modules
In-Reply-To: <86782b610901060041me3fb721n8ae72e7354771268@mail.gmail.com>
References: <200901051943.25984.geraldi.evenden@gmail.com>
	<200901052022.26502.geraldi.evenden@gmail.com>
	<86782b610901060041me3fb721n8ae72e7354771268@mail.gmail.com>
Message-ID: <200901061206.52819.geraldi.evenden@gmail.com>

An aside on this issue.

As I noted earlier I had to replace my modem/router last Saturday.  Yesterday 
I read a small notice that fell out of the box that the modem came in.  It 
was a notice that some of the software contained in the modem was covered by 
the GPL and LGPL license and that the user could view same at WWW.xxx.

My thoughts were that GPL didn't seem to impede this manufacturer.

Also, it was the first time I had seen such a notice.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Tue Jan  6 14:32:48 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 6 Jan 2009 17:32:48 -0500
Subject: [Proj] Geo Transfoms and calculations
In-Reply-To: <4962DE25.9080306@cwilson.fastmail.fm>
References: <ssr63kxldgv.fsf@petrel.petrel.org>
	<4962DE25.9080306@cwilson.fastmail.fm>
Message-ID: <200901061732.49034.geraldi.evenden@gmail.com>

On Monday 05 January 2009 11:29:25 pm Charles Wilson wrote:
> Charles Karney wrote:
> > Gerald I. Evenden wrote:
> >> 5.  What's a poor jerk like me supposed to do?  For example, on the
	...
>
> There's a similar BSD-licensed library called editline, which is a
> "autotool- and libtoolized port of the NetBSD Editline library
> (libedit)." In addition to its own native el_* interface, it provides a
> mostly-complete implementation of the rl_* readline interface in
> editline/readline.h.
>
> http://thrysoee.dk/editline/
>
> It depends on lib[n]curses or libtermcap (but then, so does readline
> usually).
	...

This seems to work OK on the test file level but the documentation is pretty 
grim.  Also support seems to be spread into several, discontinuouis sites.

The need for readline or something like it is so universal it should be 
supported under a more general license.  Can you imagine using 'bash' or any 
of the other shell programs without it?  Usage applies to any command line 
program.  Just like the program I am working on: without it if you make an 
error typing in a line, you have to do the whole line over; if you made an 
error on the last command, again, type it over.  Without it you can't back up 
and make a quick fix.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at sarnoff.com  Tue Jan  6 14:56:52 2009
From: ckarney at sarnoff.com (Charles Karney)
Date: Tue, 06 Jan 2009 17:56:52 -0500
Subject: [Proj] Geo Transfoms and calculations
In-Reply-To: <200901061732.49034.geraldi.evenden@gmail.com>
References: <ssr63kxldgv.fsf@petrel.petrel.org>	<4962DE25.9080306@cwilson.fastmail.fm>
	<200901061732.49034.geraldi.evenden@gmail.com>
Message-ID: <4963E1B4.5020901@sarnoff.com>

Gerald I. Evenden wrote:
> The need for readline or something like it is so universal it should
> be supported under a more general license.  Can you imagine using
> 'bash' or any of the other shell programs without it?  Usage applies
> to any command line program.  Just like the program I am working on:
> without it if you make an error typing in a line, you have to do the
> whole line over; if you made an error on the last command, again, type
> it over.  Without it you can't back up and make a quick fix.

Some other suggestions:

Code your programs without readline but suggest that the user invoke
them with rlwrap(1) which intercepts the keyboard input and does the
readline magic on it.  E.g.,

    rlwrap proj +proj=utm +lon_0=112w +ellps=clrk66 -r
    45d15.55N -111d30
    ...

Code your program to do something useful with flags and 1 (or 2) lines
of input, and then use a pipe and bash's readline capabilities.  E.g.,

    echo 45d15.55N -111d30 | proj +proj=utm +lon_0=112w +ellps=clrk66 -r

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From till at free.fr  Tue Jan  6 15:29:16 2009
From: till at free.fr (Till)
Date: Wed, 7 Jan 2009 00:29:16 +0100
Subject: [Proj] Getting Proj information after pj_init has been thrown
In-Reply-To: <496234E9.2020807@pobox.com>
References: <001701c96c57$6512df60$2f389e20$@fr> <496234E9.2020807@pobox.com>
Message-ID: <000401c97056$97c6b410$c7541c30$@fr>

Yes, but this 'segregation' is actually hard to achieve since windows.h is
implicitly somewhere used but not in an obvious way, as long as a project
may rely on a couple of different library includes (like ours) and probably
altering the way it is done, may bring some side effects we'd like to avoid.

On the concerns, I may understand that internal access to the whole PJ
structure is not encouraged (although I think it should be available as
"read only", at least).
My feeling is one may however want to be able to access basic initialization
data that have been generated out of the initialization (like major/minor
axis, etc.) that we could just implement adding a pj_info(char*info)
retriever tool or some pj_getMajor/MinorAxis whatever.

Many thanks for considering this request.

-----Message d'origine-----
De : proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] De la part de Frank Warmerdam
Envoyé : lundi 5 janvier 2009 17:27
À : PROJ.4 and general Projections Discussions
Objet : Re: [Proj] Getting Proj information after pj_init has been thrown

Till wrote:
> Hi all and a very happy new year to anyone.
> 
> Were using proj.4 as API and are quite happy with it.
> 
> So, our base reference is the proj_api.h header.
> 
> Is there any way to retrieve PJ information (like major axis or any 
> other projection information) after a pj_init() has been called?
> 
> We did try to use projects.h in place of proj_api.h but this brings us 
> to compilation nightmare since this one typedefs a PVALUE that 
> winreg.h is also typedefying (were using M$ platform as you may have 
> understood).
> 
> Any help in that manner would be welcome.

Till,

One option is to segregate the use of projects.h in a source file that does
not include windows.h and dependent stuff.  Then you can directly access
into the PJ structure.

Generally speaking internal access to the PJ structure is not encouraged.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From till at free.fr  Tue Jan  6 15:29:16 2009
From: till at free.fr (Till)
Date: Wed, 7 Jan 2009 00:29:16 +0100
Subject: [Proj] TR: Getting Proj information after pj_init has been
	thrown
In-Reply-To: <49623582.1050508@pobox.com>
References: <000b01c96d02$2e9700a0$8bc501e0$@fr>	<200901051102.48965.geraldi.evenden@gmail.com>
	<49623582.1050508@pobox.com>
Message-ID: <000001c97056$9724a7b0$c56df710$@fr>

What would be the drawbacks using it in place of 4.6 version?
Will it allow us to have easier access to PJ structure?

-----Message d'origine-----
De : proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] De la part de Frank Warmerdam
Envoyé : lundi 5 janvier 2009 17:30
À : PROJ.4 and general Projections Discussions
Objet : Re: [Proj] TR: Getting Proj information after pj_init has been
thrown

Gerald I. Evenden wrote:
> Again, it is really sad that the original proj distribution had not been 
> preserved and was needlessly altered.  

Folks,

I'd note that the original PROJ 4.3.3 from before I needlessly altered it
is still available for download from:

   http://download.osgeo.org/proj/from_kai/

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From geraldi.evenden at gmail.com  Tue Jan  6 16:43:19 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 6 Jan 2009 19:43:19 -0500
Subject: [Proj] Geo Transfoms and calculations
In-Reply-To: <4963E1B4.5020901@sarnoff.com>
References: <ssr63kxldgv.fsf@petrel.petrel.org>
	<200901061732.49034.geraldi.evenden@gmail.com>
	<4963E1B4.5020901@sarnoff.com>
Message-ID: <200901061943.19520.geraldi.evenden@gmail.com>

On Tuesday 06 January 2009 5:56:52 pm Charles Karney wrote:
> Gerald I. Evenden wrote:
> > The need for readline or something like it is so universal it should
> > be supported under a more general license.  Can you imagine using
> > 'bash' or any of the other shell programs without it?  Usage applies
> > to any command line program.  Just like the program I am working on:
> > without it if you make an error typing in a line, you have to do the
> > whole line over; if you made an error on the last command, again, type
> > it over.  Without it you can't back up and make a quick fix.
>
> Some other suggestions:
>
> Code your programs without readline but suggest that the user invoke
> them with rlwrap(1) which intercepts the keyboard input and does the
> readline magic on it.  E.g.,
>
>     rlwrap proj +proj=utm +lon_0=112w +ellps=clrk66 -r
>     45d15.55N -111d30
>     ...
>
> Code your program to do something useful with flags and 1 (or 2) lines
> of input, and then use a pipe and bash's readline capabilities.  E.g.,
>
>     echo 45d15.55N -111d30 | proj +proj=utm +lon_0=112w +ellps=clrk66 -r

rlwrap sounds interesting and I can download it to my Kubuntu but I see that 
it uses readline and would be having the same problems as if I had included 
readline within the program.  That is, the eventual user of the program is 
still faced with GPL ... but with another package.

presumably.  geodesic has virtually no runline parameters other than like -h, 
etc.

gie at charon:~/CARTO/geodesic/src$ rlwrap ./geodesic
geod: earth ellps=WGS84
geod: show earth
    Ellipse major axis: 6378137.0000, 1./f = 298.2572236
geod: p1 1 1
geod: p2 2 2
    Point 1 Lon:    1d00'00.00000"E  Lat:    1d00'00.00000"N  height: 0.000
    Point 2 Lon:    2d00'00.00000"E  Lat:    2d00'00.00000"N  height: 0.000
    Azimuth p1->p2: 45d10'13.69"
    Distance: 156876.149
    Azimuth p2->p1: 225d11'47.94"
geod: p1 1 2
    Point 1 Lon:    1d00'00.00000"E  Lat:    2d00'00.00000"N  height: 0.000
    Point 2 Lon:    2d00'00.00000"E  Lat:    2d00'00.00000"N  height: 0.000
    Azimuth p1->p2: 89d58'57.18"
    Distance: 111252.130
    Azimuth p2->p1: 270d1'2.82"
geod:

Well it does work.  I baked up and changed the p1 line, and a couple of 
backups within the lines actions.

And it does remember previous operations after I 'quit' and re-executed.

OK.  I guess this solves the problem except for M$ users but what else do they 
expect. ;-)

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Tue Jan  6 16:47:50 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 6 Jan 2009 19:47:50 -0500
Subject: [Proj] Geo Transfoms and calculations
In-Reply-To: <4963E1B4.5020901@sarnoff.com>
References: <ssr63kxldgv.fsf@petrel.petrel.org>
	<200901061732.49034.geraldi.evenden@gmail.com>
	<4963E1B4.5020901@sarnoff.com>
Message-ID: <200901061947.50485.geraldi.evenden@gmail.com>

On Tuesday 06 January 2009 5:56:52 pm Charles Karney wrote:
> Gerald I. Evenden wrote:
> > The need for readline or something like it is so universal it should
> > be supported under a more general license.  Can you imagine using
> > 'bash' or any of the other shell programs without it?  Usage applies
> > to any command line program.  Just like the program I am working on:
> > without it if you make an error typing in a line, you have to do the
> > whole line over; if you made an error on the last command, again, type
> > it over.  Without it you can't back up and make a quick fix.
>
> Some other suggestions:
>
> Code your programs without readline but suggest that the user invoke
> them with rlwrap(1) which intercepts the keyboard input and does the
> readline magic on it.  E.g.,
>
>     rlwrap proj +proj=utm +lon_0=112w +ellps=clrk66 -r
>     45d15.55N -111d30
>     ...
>
> Code your program to do something useful with flags and 1 (or 2) lines
> of input, and then use a pipe and bash's readline capabilities.  E.g.,
>
>     echo 45d15.55N -111d30 | proj +proj=utm +lon_0=112w +ellps=clrk66 -r

Sorry, I forgot to mention:  where do people come up with these things!?!  I 
didn't even think of looking for such an animal as rlwrap and I had never 
heard of it.

Anyway, thank-you very much for the suggestion.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From warmerdam at pobox.com  Tue Jan  6 19:11:47 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 06 Jan 2009 22:11:47 -0500
Subject: [Proj] TR: Getting Proj information after pj_init has been
 thrown
In-Reply-To: <000001c97056$9724a7b0$c56df710$@fr>
References: <000b01c96d02$2e9700a0$8bc501e0$@fr>
	<200901051102.48965.geraldi.evenden@gmail.com>
	<49623582.1050508@pobox.com> <000001c97056$9724a7b0$c56df710$@fr>
Message-ID: <49641D73.7000402@pobox.com>

Till wrote:
> What would be the drawbacks using it in place of 4.6 version?
> Will it allow us to have easier access to PJ structure?

Till,

The original PROJ.4 distribution had the same problem conficting with windows.h
that you see in more recent versions when you include projects.h.

You might have better luck with Gerald's libproj4 as he has evidently
renamed lots of things (like PJ) that were causing conflicts in the old
version.

But - honestly - why not just segregate your PJ structure access from code
that includes windows.h?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Tue Jan  6 19:13:36 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 06 Jan 2009 22:13:36 -0500
Subject: [Proj] Getting Proj information after pj_init has been thrown
In-Reply-To: <000401c97056$97c6b410$c7541c30$@fr>
References: <001701c96c57$6512df60$2f389e20$@fr> <496234E9.2020807@pobox.com>
	<000401c97056$97c6b410$c7541c30$@fr>
Message-ID: <49641DE0.4070702@pobox.com>

Till wrote:
> Yes, but this 'segregation' is actually hard to achieve since windows.h is
> implicitly somewhere used but not in an obvious way, as long as a project
> may rely on a couple of different library includes (like ours) and probably
> altering the way it is done, may bring some side effects we'd like to avoid.

Till,

Sorry for the previous reply - I read these messages out of order.

I'm really just suggesting you add a small additional C++ source file to
your project in which you do all your PJ accessing and have it only include
the bare minimum of stuff.

> On the concerns, I may understand that internal access to the whole PJ
> structure is not encouraged (although I think it should be available as
> "read only", at least).

Well, it is certainly available.

> My feeling is one may however want to be able to access basic initialization
> data that have been generated out of the initialization (like major/minor
> axis, etc.) that we could just implement adding a pj_info(char*info)
> retriever tool or some pj_getMajor/MinorAxis whatever.

Possibly, though potentially there are a lot of fields you might want access
to.

Best regards.
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From proj at cwilson.fastmail.fm  Tue Jan  6 19:56:59 2009
From: proj at cwilson.fastmail.fm (Charles Wilson)
Date: Tue, 06 Jan 2009 22:56:59 -0500
Subject: [Proj] Geo Transfoms and calculations
In-Reply-To: <200901061943.19520.geraldi.evenden@gmail.com>
References: <ssr63kxldgv.fsf@petrel.petrel.org>	<200901061732.49034.geraldi.evenden@gmail.com>	<4963E1B4.5020901@sarnoff.com>
	<200901061943.19520.geraldi.evenden@gmail.com>
Message-ID: <4964280B.6000203@cwilson.fastmail.fm>

Gerald I. Evenden wrote:
> On Tuesday 06 January 2009 5:56:52 pm Charles Karney wrote:
>> Code your programs without readline but suggest that the user invoke
>> them with rlwrap(1) which intercepts the keyboard input and does the
>> readline magic on it.  E.g.,
>>
>>     rlwrap proj +proj=utm +lon_0=112w +ellps=clrk66 -r
>>     45d15.55N -111d30
>>     ...
> rlwrap sounds interesting and I can download it to my Kubuntu but I see that 
> it uses readline and would be having the same problems as if I had included 
> readline within the program.  That is, the eventual user of the program is 
> still faced with GPL ... but with another package.

Nope -- there is no "infection" in this case: because your
program/library -- which is linked without any reference to a GPLed lib
(I'm ignoring gsl, for the moment) -- is a "separate work".

*rlwrap* is GPLed -- either intrinsically or by virtue of linking to
libreadline and thus being a "derived work" of readline.  So if you
wanted to distribute the rlwrap binary, you'd have to make available the
rlwrap sources.  If your rlwrap binary was linked to a static
libreadline, then you'd also have to make available the readline
sources.  But by virtue of being a separate executable from lproj, it
has no impact on lproj or libproj's license.

And if you simply tell your users "hey, that rlwrap utlity over there,
it makes using lproj a lot easier" -- no licensing implications with
that, either.

Separate executables == separate (e.g. not derived) works. Usually.
IANAL. etc. etc.

> OK.  I guess this solves the problem except for M$ users but what else do they 
> expect. ;-)

Dunno if rlwrap has been ported, but there is a readline port (and
pdcurses) over here:
http://gnuwin32.sourceforge.net/packages.html
so they are not completely out of hope.

--
Chuck



From proj at cwilson.fastmail.fm  Tue Jan  6 20:03:51 2009
From: proj at cwilson.fastmail.fm (Charles Wilson)
Date: Tue, 06 Jan 2009 23:03:51 -0500
Subject: [Proj] Geo Transfoms and calculations
In-Reply-To: <200901061732.49034.geraldi.evenden@gmail.com>
References: <ssr63kxldgv.fsf@petrel.petrel.org>
	<4962DE25.9080306@cwilson.fastmail.fm>
	<200901061732.49034.geraldi.evenden@gmail.com>
Message-ID: <496429A7.7080707@cwilson.fastmail.fm>

Gerald I. Evenden wrote:
> This seems to work OK on the test file level but the documentation is pretty 
> grim.  Also support seems to be spread into several, discontinuouis sites.

Yeah. It's just the "portable" version of an inbuilt part of netbsd. So
you'd think the netbsd folks would have some decent docs, but...nope.

> The need for readline or something like it is so universal it should be 
> supported under a more general license.  Can you imagine using 'bash' or any 
> of the other shell programs without it?  Usage applies to any command line 
> program.  Just like the program I am working on: without it if you make an 
> error typing in a line, you have to do the whole line over; if you made an 
> error on the last command, again, type it over.  Without it you can't back up 
> and make a quick fix.

Yes, but readline is actually THE example used by the FSF in describing
their plan for world domination:

http://www.gnu.org/licenses/why-not-lgpl.html
"...This is why we used the Lesser GPL for the GNU C library. After all,
there are plenty of other C libraries; using the GPL for ours would have
driven proprietary software developers to use another--no problem for
them, only for us.

However, when a library provides a significant unique capability, like
GNU Readline, that's a horse of a different color. The Readline library
implements input editing and history for interactive programs, and
that's a facility not generally available elsewhere. Releasing it under
the GPL and limiting its use to free programs gives our community a real
boost. At least one application program is free software today
specifically because that was necessary for using Readline."

--
Chuck


From proj at cwilson.fastmail.fm  Tue Jan  6 20:29:18 2009
From: proj at cwilson.fastmail.fm (Charles Wilson)
Date: Tue, 06 Jan 2009 23:29:18 -0500
Subject: [Proj] Method of reference to license within software
	code	modules
In-Reply-To: <200901061206.52819.geraldi.evenden@gmail.com>
References: <200901051943.25984.geraldi.evenden@gmail.com>	<200901052022.26502.geraldi.evenden@gmail.com>	<86782b610901060041me3fb721n8ae72e7354771268@mail.gmail.com>
	<200901061206.52819.geraldi.evenden@gmail.com>
Message-ID: <49642F9E.9040801@cwilson.fastmail.fm>

Gerald I. Evenden wrote:
> An aside on this issue.
> 
> As I noted earlier I had to replace my modem/router last Saturday.  Yesterday 
> I read a small notice that fell out of the box that the modem came in.  It 
> was a notice that some of the software contained in the modem was covered by 
> the GPL and LGPL license and that the user could view same at WWW.xxx.
> 
> My thoughts were that GPL didn't seem to impede this manufacturer.

Well, if linksys.com sells you a device, and says you can download the
source code from a website *under their control* -- that's one thing,
and is probably ok by the GPL. But if they said "go to kernel.org" that
would NOT be ok (First, because kernel.org probably doesn't have their
modifications, and second, even if they did, kernel.org might pull THAT
version down -- or the site could disappear entirely, anything can
happen -- and then linksys is afoul of the GPL).

As far as "impeding" -- it depends on what you mean. After the linksys
fiasco, where they were forced --kicking and screaming-- to post their
modified source code, a whole community of hackers grew around modding
those boxes and running custom software, derived from the original
linksys source.

In many cases, it worked better.

Linksys didn't like that much.

And eventually switched to different hardware, running VxWorks (a
non-GPL proprietary embedded OS from WindRiver). Then, they realized
that people were still hunting down and snapping up the *old* models --
so they re-released revised versions of the linux-based devices. These
new "L" models shipped with twice the ram -- more than the initial
linksys software needed, but the hobbyists wanted it.  So, linksys
provided -- for a higher price. <g>

I've got a few of those around here, myself -- running a customized OS,
natch.

> Also, it was the first time I had seen such a notice.

As you can see, it was a big deal with LinkSys eight or nine years ago.

--
Chuck



From geraldi.evenden at gmail.com  Wed Jan  7 18:38:10 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 7 Jan 2009 21:38:10 -0500
Subject: [Proj] Finally: geodesic-1.0 is available
Message-ID: <200901072138.10095.geraldi.evenden@gmail.com>

Go to

http://members.verizon.net/~gerald.evenden/geod/

which puts you into a Doxygen documentation and pointer to distribution 
tarball at the bottom of the main page.

It is ALL there in glorious color.

Comments, pro, con or indifferent would be greatly appreciated.  After all 
that damned effort I'd like somebody to look at it.  ;-)

Thanks in advance.

PS: I did leave the whole X11 in each file.  Grumble.

PPS: it also gives a reference for the occasional geodesic inquiries we get.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From warmerdam at pobox.com  Thu Jan  8 09:47:03 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 08 Jan 2009 12:47:03 -0500
Subject: [Proj] Finally: geodesic-1.0 is available
In-Reply-To: <200901072138.10095.geraldi.evenden@gmail.com>
References: <200901072138.10095.geraldi.evenden@gmail.com>
Message-ID: <49663C17.5000800@pobox.com>

Gerald I. Evenden wrote:
> Go to
> 
> http://members.verizon.net/~gerald.evenden/geod/
> 
> which puts you into a Doxygen documentation and pointer to distribution 
> tarball at the bottom of the main page.
> 
> It is ALL there in glorious color.
> 
> Comments, pro, con or indifferent would be greatly appreciated.  After all 
> that damned effort I'd like somebody to look at it.  ;-)

Gerald,

I did a quick look with the idea of packaging it for OSGeo4W.

Normally distributed source tar files capture everything within a single
directory, conventionally named the same as the base of the tar file name.
In your case the tar file has two base directories, html and src.  Perhaps you
could capture things one level higher?

I would encourage adding a prominent link into the tutorial in Related Pages
on the main index.html as it is otherwise a bit obscure.

On my 64 bit linux system under valgrind I was getting messages like:

geodesic computer v. .00
Free software under X11 license
geod: earth ellps=WGS84
geod: p1 77d27'27"W 38d56'30"N
==7794== Use of uninitialised value of size 8
==7794==    at 0x406A9E: geod_dms2rad (geod_dms2rad.c:73)
==7794==    by 0x402014: node (node.c:101)
==7794==    by 0x401791: do_look_up (geodesic.c:160)
==7794==    by 0x401886: do_commands (geodesic.c:184)
==7794==    by 0x40194D: main (geodesic.c:211)
==7794==

I stepped through the code and it wasn't obvious why this was occuring.
When running optimized it was actually crashing in some cases.

I would encourage you to install valgrind on your development linux
system and use it.  It's a great tool for finding subtle issues you
aren't even aware of.

   http://www.valgrind.org/

I find the mini command language within the program (as opposed to
a complex set of commandline options) an odd approach.

Building was very simple, and I'm interested in preparing a VC++
makefile to contribute back, as well as preparing win32 binaries for
the OSGeo4W environment (and I suppose standalone ones).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From geraldi.evenden at gmail.com  Thu Jan  8 11:20:02 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 8 Jan 2009 14:20:02 -0500
Subject: [Proj] Finally: geodesic-1.0 is available
In-Reply-To: <49663C17.5000800@pobox.com>
References: <200901072138.10095.geraldi.evenden@gmail.com>
	<49663C17.5000800@pobox.com>
Message-ID: <200901081420.02776.geraldi.evenden@gmail.com>

On Thursday 08 January 2009 12:47:03 pm Frank Warmerdam wrote:
> Gerald I. Evenden wrote:
> > Go to
> >
> > http://members.verizon.net/~gerald.evenden/geod/
> >
> > which puts you into a Doxygen documentation and pointer to distribution
> > tarball at the bottom of the main page.
> >
> > It is ALL there in glorious color.
> >
> > Comments, pro, con or indifferent would be greatly appreciated.  After
> > all that damned effort I'd like somebody to look at it.  ;-)
>
> Gerald,
>
> I did a quick look with the idea of packaging it for OSGeo4W.
>
> Normally distributed source tar files capture everything within a single
> directory, conventionally named the same as the base of the tar file name.
> In your case the tar file has two base directories, html and src.  Perhaps
> you could capture things one level higher?

I will not argue here but I was rather quickly assembling things and as it 
goes I cannot a save out of my development directory because too much other 
non-distributable junk would be assembled.  ;-)  So I have to create a whole 
new temporary file structure to make the tar.

> I would encourage adding a prominent link into the tutorial in Related
> Pages on the main index.html as it is otherwise a bit obscure.

I agree.  I would like to figure out how to manipulate Doxygen to make a new 
tab at the header labeled "User Manual" or "Tutorial".  Dunno if it can be 
done but it is not clear in the rather sparse documentation I have.  I had to 
do a lot of Googling to find examples to fill in the gaps.  :-(  Well 
organized for the developer but needs a little more to help with general 
public documentation.

Also, Doxygen organizes the material inconsistantly at time and I have not 
figured out how to control than.  What I have typed in is all there but not 
consistantly located.  Sigh.

> On my 64 bit linux system under valgrind I was getting messages like:
>
> geodesic computer v. .00
> Free software under X11 license
> geod: earth ellps=WGS84
> geod: p1 77d27'27"W 38d56'30"N
> ==7794== Use of uninitialised value of size 8
> ==7794==    at 0x406A9E: geod_dms2rad (geod_dms2rad.c:73)
> ==7794==    by 0x402014: node (node.c:101)
> ==7794==    by 0x401791: do_look_up (geodesic.c:160)
> ==7794==    by 0x401886: do_commands (geodesic.c:184)
> ==7794==    by 0x40194D: main (geodesic.c:211)
> ==7794==

Me neither.  I ran your sample input and everything functioned normally.  The 
line numbered in dms2rad is blank but even the preceeding line makes no 
sense.

> I stepped through the code and it wasn't obvious why this was occuring.
> When running optimized it was actually crashing in some cases.

So far, I have not had a crash with it for some time.

> I would encourage you to install valgrind on your development linux
> system and use it.  It's a great tool for finding subtle issues you
> aren't even aware of.
>
>    http://www.valgrind.org/

I will try it out.

> I find the mini command language within the program (as opposed to
> a complex set of commandline options) an odd approach.

I do not find it too odd.  For example, I use gp to compute the constants and 
what all and it is often used in the same manner.  Even maxima.  The 
difference is that I do not evaluate math or complex expressions.  In the 
scope of geodesic's operations there is not any need to.  It is just designed 
to allow the user to quickly compute distances or project location on a 
vector and create interpolated geodesic curves or arc.  And as long as the 
user knows a tad about the geographic locations and what a geodesic is then I 
think the internal documentation makes it a complete unit.

> Building was very simple, and I'm interested in preparing a VC++
> makefile to contribute back, as well as preparing win32 binaries for
> the OSGeo4W environment (and I suppose standalone ones).
>
> Best regards,

Thanks for your comments.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at sarnoff.com  Thu Jan  8 14:10:07 2009
From: ckarney at sarnoff.com (Charles Karney)
Date: Thu, 08 Jan 2009 17:10:07 -0500
Subject: [Proj] Finally: geodesic-1.0 is available
In-Reply-To: <200901081420.02776.geraldi.evenden@gmail.com>
References: <200901072138.10095.geraldi.evenden@gmail.com>	<49663C17.5000800@pobox.com>
	<200901081420.02776.geraldi.evenden@gmail.com>
Message-ID: <496679BF.7070200@sarnoff.com>

>> I find the mini command language within the program (as opposed to
>> a complex set of commandline options) an odd approach.
>
> I do not find it too odd.  For example, I use gp to compute the
> constants and what all and it is often used in the same manner.  Even
> maxima.  The difference is that I do not evaluate math or complex
> expressions.  ...

I note that the following "works":

 echo "earth ellps=WGS84; p1 10 20; p2 30 40" | ./geodesic -n

so that geodesic can be used as part of a pipe.  A slight complication
is that the output comes in multi-line form which will typically need to
be decoded.  In this way tabular data can be fed into the tool and
tabular results can be generated.

If you did want to facilitate this mode of usage, then I would suggest
something like

(1) ellipse can be specified on command line
(2) flag -f to specify forward calc
    input line = lon1 lat1 dist azi1
    output line = lon2 lat2 azi2
(3) flag -r to specify reverse calc
    input line = lon1 lat1 lon2 lat2
    output line = dist azi1 azi2

A few other comments:

(1) Decimal degrees are nice (especially in a pipe).  How do I get them?

(2) Prec changes the precision of lat/lon angles but not azimuths.

(3) How is the "height" used?  It doesn't seem to affect the results.

(4) No word on the accuracy?  For Vincenty, I've read 1 mm except for
near antipodal in which case don't believe the results.  Does this apply
here?

On the last point:

Does anyone know of a large set of test data?  The papers on the
geodesic paper typically present a handful of cases.  Instead I'm
thinking of a large test set mostly with randomly chosen points but with
some significant fraction of "hard" examples (near antipodal, points
near the poles, etc.).  I'm thinking that these could be produced by
doing the forward calculation to high precision (using as many terms in
the expansion of the integral to get to 1 nm precision or better on the
WGS84 ellipsoid).  The result data could be used to test both forward
and reverse geodesic calculations.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Thu Jan  8 15:11:02 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 8 Jan 2009 18:11:02 -0500
Subject: [Proj] Finally: geodesic-1.0 is available
In-Reply-To: <496679BF.7070200@sarnoff.com>
References: <200901072138.10095.geraldi.evenden@gmail.com>
	<200901081420.02776.geraldi.evenden@gmail.com>
	<496679BF.7070200@sarnoff.com>
Message-ID: <200901081811.02919.geraldi.evenden@gmail.com>

On Thursday 08 January 2009 5:10:07 pm Charles Karney wrote:
> >> I find the mini command language within the program (as opposed to
> >> a complex set of commandline options) an odd approach.
> >
> > I do not find it too odd.  For example, I use gp to compute the
> > constants and what all and it is often used in the same manner.  Even
> > maxima.  The difference is that I do not evaluate math or complex
> > expressions.  ...
>
> I note that the following "works":
>
>  echo "earth ellps=WGS84; p1 10 20; p2 30 40" | ./geodesic -n
>
> so that geodesic can be used as part of a pipe.  A slight complication
> is that the output comes in multi-line form which will typically need to
> be decoded.  In this way tabular data can be fed into the tool and
> tabular results can be generated.

Yes indeed, that is a quick way to use geodesic.  Admittedly, that mode of 
usage was not what I had in mind.

My first problem is that unlike projections where I can imagine someone 
processing untold millions of points in a data-in->data-out, I could not 
image that usage in the case of geodesic information other than the two 
interpolation operations I included.  Secondly, the format of result of 
massive processing is difficult for me to predict.

My only intention was to make an easily understood routine where one or two 
operations were expected.  Your example was imaginative but it rather falls 
back into the area that many users feel frustrated by: the "jargon" of Unix 
commands and methodology.

> If you did want to facilitate this mode of usage, then I would suggest
> something like
>
> (1) ellipse can be specified on command line
> (2) flag -f to specify forward calc
>     input line = lon1 lat1 dist azi1
>     output line = lon2 lat2 azi2
> (3) flag -r to specify reverse calc
>     input line = lon1 lat1 lon2 lat2
>     output line = dist azi1 azi2

Somewhat like the old geod program.  But again, I wanted something a little 
more for casual usage.  For example, I personally do not do geodesic 
calculations very often so that if I was faced with the above usage I'd have 
to dig out the manual or ponder a *.1 file and fuss around getting the 
operation going.  In geodesic's case I feel I could come back to the program 
months from now and only have to remember to key in "geodesic" and the rest 
of the operation is a piece of cake.

> A few other comments:
>
> (1) Decimal degrees are nice (especially in a pipe).  How do I get them?
>
> (2) Prec changes the precision of lat/lon angles but not azimuths.

I know.  One of those things to do.  Some experimentation is required to 
figure out how azimuth precision is related to distance precision.  It is not 
the easy problem of the geographic coordinates.

> (3) How is the "height" used?  It doesn't seem to affect the results.

It has no effect with this method.  I was thinking of including NGS's 3D 
method but their application was only for one ellipse and not very general.  
I was getting into an area of expertise I was uncomfortable with.

I left h in as I wanted the point structure to be general enough to be usable 
in other application where perhaps XYZ information was either input or 
output.

> (4) No word on the accuracy?  For Vincenty, I've read 1 mm except for
> near antipodal in which case don't believe the results.  Does this apply
> here?

I have compare a few points earlier but deferred this until later.  From other 
communications I feel that Vincenty is accurate enough for most practical 
applications.

> On the last point:
>
> Does anyone know of a large set of test data?  The papers on the
> geodesic paper typically present a handful of cases.  Instead I'm
> thinking of a large test set mostly with randomly chosen points but with
> some significant fraction of "hard" examples (near antipodal, points
> near the poles, etc.).  I'm thinking that these could be produced by
> doing the forward calculation to high precision (using as many terms in
> the expansion of the integral to get to 1 nm precision or better on the
> WGS84 ellipsoid).  The result data could be used to test both forward
> and reverse geodesic calculations.

I know that the antipod is a problem and that is what seems to attract the 
interest, but, for the life of me, I cannot see what the fuss is about.  
Sorry, that's just my attitude about it.

Thank-you very much for the evaluation and comments.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at sarnoff.com  Thu Jan  8 15:45:50 2009
From: ckarney at sarnoff.com (Charles Karney)
Date: Thu, 08 Jan 2009 18:45:50 -0500
Subject: [Proj] Finally: geodesic-1.0 is available
Message-ID: <ssrvdspgy4x.fsf@petrel.petrel.org>

Gerald I. Evenden wrote:
>> On the last point:
>>
>> Does anyone know of a large set of test data?  The papers on the
>> geodesic paper typically present a handful of cases.  Instead I'm
>> thinking of a large test set mostly with randomly chosen points but
>> with some significant fraction of "hard" examples (near antipodal,
>> points near the poles, etc.).  I'm thinking that these could be
>> produced by doing the forward calculation to high precision (using as
>> many terms in the expansion of the integral to get to 1 nm precision
>> or better on the WGS84 ellipsoid).  The result data could be used to
>> test both forward and reverse geodesic calculations.
> 
> I know that the antipod is a problem and that is what seems to attract
> the interest, but, for the life of me, I cannot see what the fuss is
> about.  Sorry, that's just my attitude about it.

Undoubtedly the issue if partly philosophical: I see a well-defined
mathematical problem, and I want to see a complete solution to it.

As a practical matter, having a reasonably comprehensive set of test
data is very important when developing approximate numerical algorithms.
You saw this, I believe, in the tests you did on various transverse
Mercator projections.  Generating a set of test data for the geodesic
would seem to be similarly helpful.  (Wouldn't it be nice to say: the
error is < 1mm provided the distance is less than x km?  I believe that
such statements belong on all numerical software.)

Having such a set of data would also let you quickly evaluate competing
algorithms.  Someone's claim to do substantially better than Vincenty
can be confirmed or dismissed, thereby leading to a much less noise on
the proj.4 mailing list!

If I don't hear of a good geodesic test set, I'm tempted to construct
one myself (no promises, though).

On the subject of the transverse Mercator projection, I'm about 2 weeks
away from posting a new version of my "exact" TM program with much more
exhaustive testing (see above), a more careful treatment of singular
points, etc.  Stay tuned.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From strebe at aol.com  Thu Jan  8 15:56:22 2009
From: strebe at aol.com (strebe)
Date: Thu, 08 Jan 2009 15:56:22 -0800
Subject: [Proj] Finally: geodesic-1.0 is available
In-Reply-To: <200901081811.02919.geraldi.evenden@gmail.com>
Message-ID: <AED6F300.12F7.41AD.9791.62179D702CA8@aol.com>


On Jan 8, 2009, at 3:11:02 PM, "Gerald I. Evenden" <geraldi.evenden at gmail.com> wrote:
My first problem is that unlike projections where I can imagine someone 
processing untold millions of points in a data-in->data-out, I could not 
image that usage in the case of geodesic information other than the two 
interpolation operations I included. Secondly, the format of result of 
massive processing is difficult for me to predict.
Note that ellipsoidal forms of  oblique azimuthal equidistant, as well as a Cassini-Soldner projections and others, require computation of geodesics. What goes for projections, goes for geodesics, since the latter is likely to be deployed in the former.

Regards,
— daan Strebe

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090108/df5e7d4d/attachment.html>

From geraldi.evenden at gmail.com  Thu Jan  8 16:27:52 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 8 Jan 2009 19:27:52 -0500
Subject: [Proj] Finally: geodesic-1.0 is available
In-Reply-To: <AED6F300.12F7.41AD.9791.62179D702CA8@aol.com>
References: <AED6F300.12F7.41AD.9791.62179D702CA8@aol.com>
Message-ID: <200901081927.52641.geraldi.evenden@gmail.com>

On Thursday 08 January 2009 6:56:22 pm strebe wrote:
> On Jan 8, 2009, at 3:11:02 PM, "Gerald I. Evenden"
> <geraldi.evenden at gmail.com> wrote: My first problem is that unlike
> projections where I can imagine someone processing untold millions of
> points in a data-in->data-out, I could not image that usage in the case of
> geodesic information other than the two interpolation operations I
> included. Secondly, the format of result of massive processing is difficult
> for me to predict.
> Note that ellipsoidal forms of  oblique azimuthal equidistant, as well as a
> Cassini-Soldner projections and others, require computation of geodesics.
> What goes for projections, goes for geodesics, since the latter is likely
> to be deployed in the former.
>
> Regards,
> — daan Strebe

Undoubtedly, but neither the old program geod nor geodesic are suitable 
vehicles for map projections and thus the intent of my comment had nothing to 
do with projections.  The procedures within both could be employed in a map 
projection but the programs themselves are of no conceivable use in map 
projections other than perhaps checking projection software.

Of the map projections that do geodesic calculations, I am not aware of any 
that use procedures as complex as either geod, geodesic nor Pittman's method 
discussed some weeks ago.  Projections usually use approximations good over 
much shorter range for ellipsoid use and the spherical geodesic for small, 
global scales.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From support.mn at elisanet.fi  Thu Jan  8 17:13:13 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Fri, 9 Jan 2009 03:13:13 +0200 (EET)
Subject: [Proj] Plog GPS Coordinate to Screen
Message-ID: <7699937.428761231463593809.JavaMail.support.mn@elisanet.fi>

Hello,

you can use Proj.4 to calculate the map projection (forward or inverse)
to you. It can also do datum conversions relative WGS84.

regards: Janne.

-----------------------------

Claudio Bisegni [cbisegni at gmail.com] kirjoitti: 
> Hi, i'm new to Proj lib. I wan't to write a software to plog gps  
> coordinate to the screen. How can i setup proj to do this work? thank  
> in advanced.
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 



From cbisegni at gmail.com  Thu Jan  8 22:43:25 2009
From: cbisegni at gmail.com (Claudio Bisegni)
Date: Fri, 9 Jan 2009 07:43:25 +0100
Subject: [Proj] Plog GPS Coordinate to Screen
In-Reply-To: <7699937.428761231463593809.JavaMail.support.mn@elisanet.fi>
References: <7699937.428761231463593809.JavaMail.support.mn@elisanet.fi>
Message-ID: <BEF629E7-ECA8-43D4-81D1-FD7878CADD46@gmail.com>

Hi janne, thanks for replay.
I have done some google search to find a good init param to do the  
work but whitout a great success. Have you some example for proj  
initialization to get this work,
Thank you in advanced.

Claudio

Il giorno 09/gen/09, alle ore 02:13, support.mn at elisanet.fi ha scritto:

> Hello,
>
> you can use Proj.4 to calculate the map projection (forward or  
> inverse)
> to you. It can also do datum conversions relative WGS84.
>
> regards: Janne.
>
> -----------------------------
>
> Claudio Bisegni [cbisegni at gmail.com] kirjoitti:
>> Hi, i'm new to Proj lib. I wan't to write a software to plog gps
>> coordinate to the screen. How can i setup proj to do this work? thank
>> in advanced.
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


From Mikael.Rittri at carmenta.com  Fri Jan  9 00:03:05 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Fri, 9 Jan 2009 09:03:05 +0100
Subject: [Proj] Finally: geodesic-1.0 is available
In-Reply-To: <496679BF.7070200@sarnoff.com>
References: <200901072138.10095.geraldi.evenden@gmail.com>	<49663C17.5000800@pobox.com><200901081420.02776.geraldi.evenden@gmail.com>
	<496679BF.7070200@sarnoff.com>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101535483@posty.carmenta.se>

Charles Karney wrote: 
> Does anyone know of a large set of test data?  

There is an article by Thomas and Featherstone, where they 
compare the results from Vincenty's formulas with other 
algorithms.  They have used 3801 different test cases.

I don't think the test cases have been published, 
but perhaps the authors might be willing to do so. 

C. M. Thomas and W. E. Featherstone, 
Validation of Vincenty's Formulas for the Geodesic Using a New Fourth-Order Extension of Kivioja's Formula,
Journal of Surveying Engineering, Vol. 131, No. 1, February 2005, pages 20 - 26. 
Abstract: http://cedb.asce.org/cgi/WWWdisplay.cgi?0500946 

Best regards,
--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
mikael.rittri at carmenta.com
www.carmenta.com


From ovv at hetnet.nl  Fri Jan  9 08:52:48 2009
From: ovv at hetnet.nl (OvV_HN)
Date: Fri, 9 Jan 2009 17:52:48 +0100
Subject: [Proj] Finally: geodesic-1.0 is available
In-Reply-To: <ssrvdspgy4x.fsf@petrel.petrel.org>
References: <ssrvdspgy4x.fsf@petrel.petrel.org>
Message-ID: <6DDA78C98BEA4D1DBC3673B4AB274F73@PCHP>


----- Original Message ----- 
From: "Charles Karney" <ckarney at sarnoff.com>
To: <geraldi.evenden at gmail.com>
Cc: <proj at lists.maptools.org>
Sent: Friday, January 09, 2009 12:45 AM
Subject: Re: [Proj] Finally: geodesic-1.0 is available

> ....

> If I don't hear of a good geodesic test set, I'm tempted to construct
> one myself (no promises, though).

By the way, I simply don't believe in test sets with millions of random test 
points.
With some mathematical knowledge you know where the asymptotes, 
singularities and other irritating point are. Some tens or hundreds of test 
points around these, coupled with some random test points in all octants of 
the globe, should be sufficient.


> On the subject of the transverse Mercator projection, I'm about 2 weeks
> away from posting a new version of my "exact" TM program with much more
> exhaustive testing (see above), a more careful treatment of singular
> points, etc.  Stay tuned.

Nice!
I've already resolved the lat=90d problem in the inverse (calculation of 
zeta where snv==0 and (cnu==0 or dnv==0) ), but there are probably some more 
problems? I'll stay tuned!

Oscar van Vlijmen




From geraldi.evenden at gmail.com  Fri Jan  9 09:04:59 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Fri, 9 Jan 2009 12:04:59 -0500
Subject: [Proj] Finally: geodesic-1.0 is available!
In-Reply-To: <6DDA78C98BEA4D1DBC3673B4AB274F73@PCHP>
References: <ssrvdspgy4x.fsf@petrel.petrel.org>
	<6DDA78C98BEA4D1DBC3673B4AB274F73@PCHP>
Message-ID: <200901091204.59253.geraldi.evenden@gmail.com>

On Friday 09 January 2009 11:52:48 am OvV_HN wrote:
> ----- Original Message -----
> From: "Charles Karney" <ckarney at sarnoff.com>
> To: <geraldi.evenden at gmail.com>
> Cc: <proj at lists.maptools.org>
> Sent: Friday, January 09, 2009 12:45 AM
> Subject: Re: [Proj] Finally: geodesic-1.0 is available
>
> > ....
> >
> > If I don't hear of a good geodesic test set, I'm tempted to construct
> > one myself (no promises, though).
>
> By the way, I simply don't believe in test sets with millions of random
> test points.
> With some mathematical knowledge you know where the asymptotes,
> singularities and other irritating point are. Some tens or hundreds of test
> points around these, coupled with some random test points in all octants of
> the globe, should be sufficient.

I whole heartedly agree with you.  The late John Snyder seemed to be another 
believer of thowing zillions of test points at a projection.  Some time ago 
when downloading a copy of GCTP stuff I couldn't believe the time it took.  
The download was a monster and it turned out that it was nearly all test 
points for the various state plane systems.

> > On the subject of the transverse Mercator projection, I'm about 2 weeks
> > away from posting a new version of my "exact" TM program with much more
> > exhaustive testing (see above), a more careful treatment of singular
> > points, etc.  Stay tuned.

No! No! No!  I thought we had beat that dead horse to a pulp.  ;-)

> Nice!
> I've already resolved the lat=90d problem in the inverse (calculation of
> zeta where snv==0 and (cnu==0 or dnv==0) ), but there are probably some
> more problems? I'll stay tuned!
>
> Oscar van Vlijmen
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From support.mn at elisanet.fi  Fri Jan  9 09:55:01 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Fri, 9 Jan 2009 19:55:01 +0200 (EET)
Subject: [Proj] Plog GPS Coordinate to Screen
Message-ID: <17842329.481401231523702076.JavaMail.support.mn@elisanet.fi>

Hi,

You can enter the proj.4 inits directly to MNS for example (see below).
MNS includes a database and there are several thousand different
inits for different maps and areas of the world.

Regards: Janne.

************

Here is a commercial link:

"Master Navigator Software (MNS) can show your position and
other GPS data on any paper map and several electronic raster
maps, it can also handle up to 8 GPS receivers at the same time
(redundancy). It has 3 years update guarantee. Price 199,- "

http://s136.photobucket.com/albums/q163/MNVideos/?action=view&current=MNDemo4.flv
http://www.elisanet.fi/master.navigator

----------------------------------

Claudio Bisegni [cbisegni at gmail.com] kirjoitti: 
> Hi janne, thanks for replay.
> I have done some google search to find a good init param to do the  
> work but whitout a great success. Have you some example for proj  
> initialization to get this work,
> Thank you in advanced.
> 
> Claudio
> 
> Il giorno 09/gen/09, alle ore 02:13, support.mn at elisanet.fi ha scritto:
> 
> > Hello,
> >
> > you can use Proj.4 to calculate the map projection (forward or  
> > inverse)
> > to you. It can also do datum conversions relative WGS84.
> >
> > regards: Janne.
> >
> > -----------------------------
> >
> > Claudio Bisegni [cbisegni at gmail.com] kirjoitti:
> >> Hi, i'm new to Proj lib. I wan't to write a software to plog gps
> >> coordinate to the screen. How can i setup proj to do this work? thank
> >> in advanced.
> >> _______________________________________________
> >> Proj mailing list
> >> Proj at lists.maptools.org
> >> http://lists.maptools.org/mailman/listinfo/proj
> >>
> >
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 



From strebe at aol.com  Fri Jan  9 13:08:49 2009
From: strebe at aol.com (strebe)
Date: Fri, 09 Jan 2009 13:08:49 -0800
Subject: [Proj] Finally: geodesic-1.0 is available
In-Reply-To: <6DDA78C98BEA4D1DBC3673B4AB274F73@PCHP>
Message-ID: <507E5B33.0937.4517.9064.9636AA18BB08@aol.com>


On Jan 9, 2009, at 8:52:48 AM, OvV_HN <ovv at hetnet.nl> wrote:
> On the subject of the transverse Mercator projection, I'm about 2 weeks
> away from posting a new version of my "exact" TM program with much more
> exhaustive testing (see above), a more careful treatment of singular
> points, etc. Stay tuned.

Nice!
I've already resolved the lat=90d problem in the inverse (calculation of 
zeta where snv==0 and (cnu==0 or dnv==0) ), but there are probably some more 
problems? I'll stay tuned!

Oscar van Vlijmen

I find the regions from the cusps to a short way along the outer boundary, just inside the boundary, to be most computationally problematic. However, I am not using Thompson/Lee's development through Jacobian elliptic functions, so possibly your difficult terrain differs. I do not use Jacobian elliptic functions at all; only an elliptic integral of the second kind. I am satisfied with my results throughout the rest of the map, so I am keen to compare notes in case it makes sense to bring both methods to bear, depending on the region.

Regards,
— daan Strebe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090109/41fc9770/attachment.html>

From ovv at hetnet.nl  Sat Jan 10 02:33:58 2009
From: ovv at hetnet.nl (OvV_HN)
Date: Sat, 10 Jan 2009 11:33:58 +0100
Subject: [Proj] TM exact
In-Reply-To: <507E5B33.0937.4517.9064.9636AA18BB08@aol.com>
References: <507E5B33.0937.4517.9064.9636AA18BB08@aol.com>
Message-ID: <810396F7851B49DE9F9FE189AC803007@PCHP>

Threadery:

In the thread:
Re: [Proj] Finally: geodesic-1.0 is available
Charles Karney wrote on 09 Jan 2009 that he is improving his exact TM.
Oscar van Vlijmen replied with a short remark about the lat=90d problem in 
the inverse.
Daan Strebe replied on 09 Jan:

> I find the regions from the cusps to a short way along the outer boundary,
> just inside the boundary, to be most computationally problematic. However,
> I am not using Thompson/Lee's development through Jacobian elliptic 
> functions,
> so possibly your difficult terrain differs. I do not use Jacobian elliptic 
> functions
> at all; only an elliptic integral of the second kind. I am satisfied with 
> my results
> throughout the rest of the map, so I am keen to compare notes in case it 
> makes
> sense to bring both methods to bear, depending on the region.

Some time ago I translated the Dozier method and found some improvements:
* Corrected an error in the publication.
* Used much better complex elliptics.
* Used a more robust iteration scheme for implicit complex functions.
(by H. Bach, http://www.netlib.org/toms/365)
* I've done next to nothing with respect to iteration starting values, the 
situation beyond delta-longitude 90d, and some difficult areas very near the 
boundaries.

I published some test values around the 90*(1-eccentricity) point and Daan 
Strebe confirmed the results. See the proj posting from 29 Jun 2006.

Shortly after Charles Karney published his Lee method, I investigated the 
exact TM again and I found that Karneys method is probably better than mine.
Separating complex functions into real and imaginary parts proves to be 
computationally a very good idea. In some difficult regions my downhill 
iteration scheme in the complex plane needs hundreds of passes, whereas Lees 
method is ready in a dozen or so.
The starting value problem remains however and you need to check if the 
denominator (usually the derivative) gets zero.
BTW, I'm also very pleased with the meridian convergence and point scale 
factor solutions Charles Karney presented.

Oscar van Vlijmen




From geraldi.evenden at gmail.com  Sat Jan 10 08:34:06 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sat, 10 Jan 2009 11:34:06 -0500
Subject: [Proj] Minor revisions to geodesic
Message-ID: <200901101134.06123.geraldi.evenden@gmail.com>

To correct prototyping conflicts with geod_dmstor and remove a very minor 
memory leak on geodesic plus a couple of adjustments to documentation the 
distribution of geodesic at:

http://members.verizon.net/~gerald.evenden/geod/

has been updated.

Also a README.html just inside geodesic/ gives a more obvious initial access 
to documentation.

Enjoy!

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ovv at hetnet.nl  Mon Jan 12 08:15:14 2009
From: ovv at hetnet.nl (OvV_HN)
Date: Mon, 12 Jan 2009 17:15:14 +0100
Subject: [Proj] Ellipsoid data sources
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC2591@email002.lsu.edu>
References: <200901021208.01403.geraldi.evenden@gmail.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC2591@email002.lsu.edu>
Message-ID: <A5DF97D1720044B88D3536F2D2863857@PCHP>

There are more sources with 200+ ellipsoids, e.g. the ESRI software and the 
ArcGIS documentation.
That's not so difficult: about 50+ traditional ellipsoids, and the adjusted 
ellipsoids for all Minnesota and Wisconsin counties, plus the mostly sphere 
definitions for extraterrestrial bodies.

Strasser: probably?:

Georg Straßer
 Ellipsoidische Parameter der Erdfigur (1800-1950)
München 1957, ISBN 3 7696 8109 6

Oscar van Vlijmen


----- Original Message ----- 
From: "Clifford J Mugnier" <cjmce at lsu.edu>
To: <geraldi.evenden at gmail.com>; "PROJ.4 and general Projections 
Discussions" <proj at lists.maptools.org>
Sent: Monday, January 05, 2009 8:25 PM
Subject: Re: [Proj] Ellipsoid data sources


The largest I have ever seen in one place that is published is Georg 
Strasser's Ph.D. dissertation from the 1960s, but I don't know if it's 
available on the internet.  Of course, it doesn't have the ones listed after 
that date of publication.  I think it contained over 200 ellipsoids  ...

I'm writing this from out of town, so I can't put my finger on my copy for a 
week or so.

Cliff Mugnier
LSU

________________________________

From: proj-bounces at lists.maptools.org on behalf of Gerald I. Evenden
Sent: Fri 02-Jan-09 11:08
To: PROJ.4 and general Projections Discussions
Subject: [Proj] Ellipsoid data sources



Because I was refurbishing the GEOD_ELLIPS structure array of standard earth
ellipse constants with its current 54 entries I seem to recall a seeing a
list that may have been longer.  However browsing the normal list of 
suspects
has turned up nothing.

Does anyone have info on a well vetted and comprehensive list of earth
ellipsoid constants.

Thanks.

--
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj





--------------------------------------------------------------------------------


> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj 




From ckarney at sarnoff.com  Mon Jan 12 10:51:26 2009
From: ckarney at sarnoff.com (Charles Karney)
Date: Mon, 12 Jan 2009 13:51:26 -0500
Subject: [Proj] Exact transverse Mercator code [updated]
Message-ID: <496B912E.7020404@sarnoff.com>

I've posted an update to my implementation of the exact transverse
Mercator projection at

    http://charles.karney.info/geographic

This is part of a small C++ library for converting between geographic,
UTM/UPS, and MGRS coordinates.

In addition, I've included some information about the transverse
Mercator projection at

    http://charles.karney.info/geographic/transversemercator.html

This includes graticules for 3 different transverse Mercator
projections, information about continuing the projection around the
singular point, and an extended test set for the projection.

The library includes

  TransverseMercator -- projection using the Krueger series method
    extended to 6th-order which is accurate to 5 nm out to 30d from the
    central meridian.

  TransverseMercatorExact -- projection using Thompson/Lee's exact
    formulas which is accurate to 8 nm over the entire ellipsoid.  This
    is based on the code I posted on 2008-09-16.  However, it now deals
    with all the singular points, the selection of starting points for
    Newton's method has been improved, and there's an "extended" mode
    which lets you analytically continue the projection around the
    singular point.

  PolarStereographic -- projection using Snyder's formulas with Newton's
    method for the inverse in order to provide accuracy close to
    round-off.

  UTMUPS and MGRS -- conversion to and from UTM/UPS and MGRS.  MGRS is a
    potential replacement for the geotrans code.  It applies stable
    rules to the conversions and provides detailed error diagnostics.

  GeoConvert -- utility for conversion between geographic, UTM/UPS, and
    MGRS coordinates.

  TransverseMercatorTest -- utility for testing transverse Mercator
    projections.

Reports of bugs, typos, gaps in the documentation, etc. are welcome.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From landa.martin at gmail.com  Mon Jan 12 11:15:54 2009
From: landa.martin at gmail.com (Martin Landa)
Date: Mon, 12 Jan 2009 20:15:54 +0100
Subject: [Proj] proj=geocent missing
Message-ID: <f8fe65c40901121115q782a29dapbfc5e5ef4d168f19@mail.gmail.com>

Hi,

I cannot find in my proj (fresh SVN) pseudo-projection

geocent

to convert  geocentric WGS84 coordinates to geographic, e.g.,

cs2cs +proj=geocent +datum=WGS84 +to +proj=latlong +datum=WGS84

Where is problem?

src/geocent.c

or

src/pj_geocent.c

are available in SVN,

Thanks in advance. Martin

-- 
Martin Landa <landa.martin gmail.com> * http://gama.fsv.cvut.cz/~landa *


From landa.martin at gmail.com  Mon Jan 12 11:25:58 2009
From: landa.martin at gmail.com (Martin Landa)
Date: Mon, 12 Jan 2009 20:25:58 +0100
Subject: [Proj] proj=geocent missing
In-Reply-To: <f8fe65c40901121115q782a29dapbfc5e5ef4d168f19@mail.gmail.com>
References: <f8fe65c40901121115q782a29dapbfc5e5ef4d168f19@mail.gmail.com>
Message-ID: <f8fe65c40901121125m103a3aedq43085e020c93ac25@mail.gmail.com>

Hi,

2009/1/12 Martin Landa <landa.martin at gmail.com>:
> I cannot find in my proj (fresh SVN) pseudo-projection
>
> geocent
>
> to convert  geocentric WGS84 coordinates to geographic, e.g.,
>
> cs2cs +proj=geocent +datum=WGS84 +to +proj=latlong +datum=WGS84
>
> Where is problem?
>
> src/geocent.c
>
> or
>
> src/pj_geocent.c
>
> are available in SVN,

my bad, 'geocent' besides 'latlong' or 'longlat' is not part of

proj -lp

(which I checked)

cs2cs +proj=geocent +datum=WGS84 +to +proj=latlong +datum=WGS84

works very well.

Sorry for the noise. Martin

-- 
Martin Landa <landa.martin gmail.com> * http://gama.fsv.cvut.cz/~landa *


From till at free.fr  Tue Jan 13 00:31:02 2009
From: till at free.fr (Till)
Date: Tue, 13 Jan 2009 09:31:02 +0100
Subject: [Proj] Getting Proj information after pj_init has been thrown
In-Reply-To: <49641DE0.4070702@pobox.com>
References: <001701c96c57$6512df60$2f389e20$@fr>
	<496234E9.2020807@pobox.com>	<000401c97056$97c6b410$c7541c30$@fr>
	<49641DE0.4070702@pobox.com>
Message-ID: <000001c97559$4516c8b0$cf445a10$@fr>

Hi Frank,
And many thanks for your answers.

The problem I'm facing, is that I'm using it inside another project where I
need to combine with other includes.
To help going further, Id did build a 'coordinate' class for 2D/3D Points
that carry 2 'geo'-representations of their positions. This class is about
to use Proj.4 for managing the conversion from one to the other.
As such it includes proj_api.h.
This class is also used inside another framework (not to mention Ogre3D). As
long as I'd like to provide this class to some entities in this framework, I
need to be able to include my class's prototype inside some .cpp that also
include .h from this framework.
This is where my compilation pb occurs.
There are places where this framework includes 'windows.h', and I absolutely
don't know where. Furthermore, if I knew where this occurs the solution
would probably to patch this framework, which is something I'd like to
avoid.

Maybe my lack of knowledge of hacks or tricks to overcome this is in
involved, but I don't see yet any proper way to build something robust, in a
way I'd not face it again on another framework.

I hope I explained properly my concerns, and I admit I could miss some
'building/compilation' tricks that could work around all of this.

On the second point, yes there might be a couple of fields we should be able
to access.
May be another way is to split the projects.h header in such a way, the
PVALUE is isolated.

-----Message d'origine-----
De : proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] De la part de Frank Warmerdam
Envoyé : mercredi 7 janvier 2009 04:14
À : PROJ.4 and general Projections Discussions
Objet : Re: [Proj] Getting Proj information after pj_init has been thrown

Till wrote:
> Yes, but this 'segregation' is actually hard to achieve since windows.h is
> implicitly somewhere used but not in an obvious way, as long as a project
> may rely on a couple of different library includes (like ours) and
probably
> altering the way it is done, may bring some side effects we'd like to
avoid.

Till,

Sorry for the previous reply - I read these messages out of order.

I'm really just suggesting you add a small additional C++ source file to
your project in which you do all your PJ accessing and have it only include
the bare minimum of stuff.

> On the concerns, I may understand that internal access to the whole PJ
> structure is not encouraged (although I think it should be available as
> "read only", at least).

Well, it is certainly available.

> My feeling is one may however want to be able to access basic
initialization
> data that have been generated out of the initialization (like major/minor
> axis, etc.) that we could just implement adding a pj_info(char*info)
> retriever tool or some pj_getMajor/MinorAxis whatever.

Possibly, though potentially there are a lot of fields you might want access
to.

Best regards.
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From j.l.h.hartmann at uva.nl  Tue Jan 13 02:57:58 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue, 13 Jan 2009 11:57:58 +0100
Subject: [Proj] Ellipsoid data sources
In-Reply-To: <A5DF97D1720044B88D3536F2D2863857@PCHP>
References: <200901021208.01403.geraldi.evenden@gmail.com>	<B597ADFC46B67741B18EA6AA13613FF7EC2591@email002.lsu.edu>
	<A5DF97D1720044B88D3536F2D2863857@PCHP>
Message-ID: <496C73B6.7010109@uva.nl>

Prof. Mugnier, did you find your copy of the Strasser book, and if so, 
could you provide some sort of copy for me? I am struggling with the 
late 18th/early 19th century topographical maps of the Netherlands, 
Belgium, Western Germany and Northern France, especially the Tranchot, 
Ferraris and Cassini maps, plus the earliest national topographical maps 
of the 19th century. I'm trying to make some sort of "Google History" 
mapping application, based on 1:50000 and larger-scaled maps, and I need 
as much information on their parameters as I can get. Strassers book is 
not available in any library in the Netherlands at all.

Thanks,

Jan Hartmann

Dr. J. Hartmann
Department of Geography
University of Amsterdam

OvV_HN wrote:
> There are more sources with 200+ ellipsoids, e.g. the ESRI software and the 
> ArcGIS documentation.
> That's not so difficult: about 50+ traditional ellipsoids, and the adjusted 
> ellipsoids for all Minnesota and Wisconsin counties, plus the mostly sphere 
> definitions for extraterrestrial bodies.
>
> Strasser: probably?:
>
> Georg Straßer
>  Ellipsoidische Parameter der Erdfigur (1800-1950)
> München 1957, ISBN 3 7696 8109 6
>
> Oscar van Vlijmen
>
>
> ----- Original Message ----- 
> From: "Clifford J Mugnier" <cjmce at lsu.edu>
> To: <geraldi.evenden at gmail.com>; "PROJ.4 and general Projections 
> Discussions" <proj at lists.maptools.org>
> Sent: Monday, January 05, 2009 8:25 PM
> Subject: Re: [Proj] Ellipsoid data sources
>
>
> The largest I have ever seen in one place that is published is Georg 
> Strasser's Ph.D. dissertation from the 1960s, but I don't know if it's 
> available on the internet.  Of course, it doesn't have the ones listed after 
> that date of publication.  I think it contained over 200 ellipsoids  ...
>
> I'm writing this from out of town, so I can't put my finger on my copy for a 
> week or so.
>
> Cliff Mugnier
> LSU
>
> ________________________________
>
> From: proj-bounces at lists.maptools.org on behalf of Gerald I. Evenden
> Sent: Fri 02-Jan-09 11:08
> To: PROJ.4 and general Projections Discussions
> Subject: [Proj] Ellipsoid data sources
>
>
>
> Because I was refurbishing the GEOD_ELLIPS structure array of standard earth
> ellipse constants with its current 54 entries I seem to recall a seeing a
> list that may have been longer.  However browsing the normal list of 
> suspects
> has turned up nothing.
>
> Does anyone have info on a well vetted and comprehensive list of earth
> ellipsoid constants.
>
> Thanks.
>
> --
> The whole religious complexion of the modern world is due
> to the absence from Jerusalem of a lunatic asylum.
> -- Havelock Ellis (1859-1939) British psychologist
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
>
>
>
>
> --------------------------------------------------------------------------------
>
>
>   
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj 
>>     
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
>   

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090113/4f7bc93d/attachment.html>

From Christian.AMEIL at total.com  Tue Jan 13 13:01:42 2009
From: Christian.AMEIL at total.com (Christian AMEIL)
Date: Tue, 13 Jan 2009 22:01:42 +0100
Subject: [Proj] Christian AMEIL est absent
Message-ID: <OF10B5BE00.160A8FC0-ONC125753D.00738328-C125753D.00738328@total.com>





Je serai absent(e) du  13/01/2009 au 14/01/2009.

I am currently out of the office and will be back on the 14th of January. I can read no email during
this period. Please contact frederic.auger at total.com for anything urgent.


From hamish_b at yahoo.com  Tue Jan 13 19:51:28 2009
From: hamish_b at yahoo.com (Hamish)
Date: Tue, 13 Jan 2009 19:51:28 -0800 (PST)
Subject: [Proj] Geo Transfoms and calculations
Message-ID: <786764.69535.qm@web110015.mail.gq1.yahoo.com>

--- On Mon, 1/5/09, strebe <strebe at aol.com> wrote:

> Not to start a war, but

.... but some will try anyway ...

:) I will bite with my tongue-in-cheek,


> GCC is not quite "world
> class". It is usable, but the code generation from MS
> Visual Studio C++ is much better. Intel also supplies their
> own compiler so that developers have access to world-class
> code generation; I have read it's even better than
> Microsoft's but have not used it myself, though I am
> considering it for Macintosh.
> 
> How do I know this? The disinterested benchmarks say so.
> Not content to take others' word for it, my own software
> Geocart runs nearly twice as fast on VS C++ -generated code
> than on GCC-generated code in compute-bound situations.
> That's... important, when I have massive raster
> reprojections that take minutes or even hours.
> 
> GCC's conformance to C++ standards used to be MUCH
> better than VS C++, but that advantage has dwindled since VS
> C++ 7 and pretty much disappeared in VSC++ 8, which I have
> on occasion found to be even more conformant than GCC. VS
> C++ 6 was a standards disaster.
> <<< shudder >>>
> 
> So, I would agree GCC is world-class for standards
> conformance, which is important. The same cannot be said for
> code generation, which is also important. Since the best
> performers in that regard come out of proprietary vendors, I
> have to view "the world-class status of both Linux and
> GCC is a result, largely, of their GPL status" to be
> more ideological than a factual, particularly since there
> are not many metrics the market cares about by which Linux
> leads the world. Still, I am grateful to have the GPL, and I
> agree it makes no sense to fault the GPL community for the
> license or its implications. Fair's fair, and it's
> not like developers would be better off if GPL did not
> exist.

it is a bit simplistic to judge only based on runtime speed.

The goal of GCC besides standards conformance you should consider is
the very tricky problem of portability across hardware architectures.
Intel & VSC only have one target, while gcc has 14+ to consider*.
Optimization will be least third down on gcc's list of priorities behind
these two. actually, probably 4th behind code readability.
compile-speed is another competing variable to consider, as is
"Freedom" and cost.

[*] debian; probably there are more


and FWIW, millions and millions of professional users and successful
deployments worldwide make these things world-class, not some benchmark
or our opinions/ideologies.

as with most things, be it a tool, license, projection, or a spouse,
the best solution for you depends on your specific needs, and it is
silly to argue which is "best" or unfit. but we try anyway :)


best,
Hamish



      



From Laurent.Saez at developpement-durable.gouv.fr  Tue Jan 13 23:23:03 2009
From: Laurent.Saez at developpement-durable.gouv.fr (=?UTF-8?Q?=22SAEZ_Laurent_=2D_CETE_M=C3=A9diterr=2E=2FDI=2FETER=22?=)
Date: Wed, 14 Jan 2009 08:23:03 +0100
Subject: [Proj] crs definition with both +nadgrids and +towgs84 parameters
Message-ID: <496D92D7.7020308@developpement-durable.gouv.fr>

Hi List,

Someone could tell me what appens if +nadgrids and +towgs84 are both 
used in a crs definition (e.g. in the EPSG file) ?
Which parameter is taken into account ?
Is the behavior the same in all tools (cs2cs, ogr utilities, gdal 
utilities, mapserver,PostGIS...)
I ask this because IGN puts both parameters in its IGNF catalog (French 
CRS).
I wonder if it is not preferable to specify only one.
My main problem is to be sure that the grid ntf_r93.gsb is used by 
MapServer for NTF to RGF93 transformations.

Regards

Laurent





From Laurent.Saez at developpement-durable.gouv.fr  Tue Jan 13 23:22:51 2009
From: Laurent.Saez at developpement-durable.gouv.fr (=?UTF-8?Q?=22SAEZ_Laurent_=2D_CETE_M=C3=A9diterr=2E=2FDI=2FETER=22?=)
Date: Wed, 14 Jan 2009 08:22:51 +0100
Subject: [Proj] crs definition with both +nadgrids and +towgs84 parameters
Message-ID: <496D92CB.5090209@developpement-durable.gouv.fr>

Hi List,

Someone could tell me what appens if +nadgrids and +towgs84 are both 
used in a crs definition (e.g. in the EPSG file) ?
Which parameter is taken into account ?
Is the behavior the same in all tools (cs2cs, ogr utilities, gdal 
utilities, mapserver,PostGIS...)
I ask this because IGN puts both parameters in its IGNF catalog (French 
CRS).
I wonder if it is not preferable to specify only one.
My main problem is to be sure that the grid ntf_r93.gsb is used by
MapServer for NTF to RGF93 transformations.

Regards

Laurent





From geraldi.evenden at gmail.com  Wed Jan 14 09:04:33 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 14 Jan 2009 12:04:33 -0500
Subject: [Proj] Geo Transfoms and calculations
In-Reply-To: <786764.69535.qm@web110015.mail.gq1.yahoo.com>
References: <786764.69535.qm@web110015.mail.gq1.yahoo.com>
Message-ID: <200901141204.33985.geraldi.evenden@gmail.com>

On Tuesday 13 January 2009 10:51:28 pm Hamish wrote:
> --- On Mon, 1/5/09, strebe <strebe at aol.com> wrote:
> > Not to start a war, but
>
> .... but some will try anyway ...
>
> :) I will bite with my tongue-in-cheek,
> :
> > GCC is not quite "world
> > class". It is usable, but the code generation from MS
> > Visual Studio C++ is much better. Intel also supplies their
> > own compiler so that developers have access to world-class
> > code generation; I have read it's even better than
> > Microsoft's but have not used it myself, though I am
> > considering it for Macintosh.
> >
> > How do I know this? The disinterested benchmarks say so.
> > Not content to take others' word for it, my own software
> > Geocart runs nearly twice as fast on VS C++ -generated code
> > than on GCC-generated code in compute-bound situations.
> > That's... important, when I have massive raster
> > reprojections that take minutes or even hours.
> >
> > GCC's conformance to C++ standards used to be MUCH
> > better than VS C++, but that advantage has dwindled since VS
> > C++ 7 and pretty much disappeared in VSC++ 8, which I have
> > on occasion found to be even more conformant than GCC. VS
> > C++ 6 was a standards disaster.
> > <<< shudder >>>
> >
> > So, I would agree GCC is world-class for standards
> > conformance, which is important. The same cannot be said for
> > code generation, which is also important. Since the best
> > performers in that regard come out of proprietary vendors, I
> > have to view "the world-class status of both Linux and
> > GCC is a result, largely, of their GPL status" to be
> > more ideological than a factual, particularly since there
> > are not many metrics the market cares about by which Linux
> > leads the world. Still, I am grateful to have the GPL, and I
> > agree it makes no sense to fault the GPL community for the
> > license or its implications. Fair's fair, and it's
> > not like developers would be better off if GPL did not
> > exist.
>
> it is a bit simplistic to judge only based on runtime speed.
>
> The goal of GCC besides standards conformance you should consider is
> the very tricky problem of portability across hardware architectures.
> Intel & VSC only have one target, while gcc has 14+ to consider*.
> Optimization will be least third down on gcc's list of priorities behind
> these two. actually, probably 4th behind code readability.
> compile-speed is another competing variable to consider, as is
> "Freedom" and cost.
>
> [*] debian; probably there are more
>
>
> and FWIW, millions and millions of professional users and successful
> deployments worldwide make these things world-class, not some benchmark
> or our opinions/ideologies.
>
> as with most things, be it a tool, license, projection, or a spouse,
> the best solution for you depends on your specific needs, and it is
> silly to argue which is "best" or unfit. but we try anyway :)
>
>
> best,
> Hamish

Exceptionally well put and I could not agree with you more.  I have used more 
compilers over 50 years than I care to count and I find gcc one of the most 
stable and reliable.

If you want speed, do it in assembly language.  ;-)

But we'd better do this fight in the alley.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From strebe at aol.com  Wed Jan 14 12:52:53 2009
From: strebe at aol.com (strebe)
Date: Wed, 14 Jan 2009 12:52:53 -0800
Subject: [Proj] Geo Transfoms and calculations
In-Reply-To: <786764.69535.qm@web110015.mail.gq1.yahoo.com>
Message-ID: <C95BCB9F.75BA.4142.A078.C6A60B55AE54@aol.com>


Hamish:

I agree GCC's diversity of platforms is unique, a considerable achievement, and important to some constituencies.

However, I have two things to say about that and then will bow out of the discussion, in recognition both that it is off-topic and esoteric.

A) A compiler's support of diverse platforms is not important to most software developers. Porting is no fun, but as long as the compilers comply with standards, at least it is feasible to use different compilers on different platforms, and in fact is normal practice in large shops.

B) While I use nothing but C++ both vocationally and avocationally, it is a programming language so vast, so complex, so riddled with semantic subtleties and pitfalls, that the programmer is obliged to pay much of his coding attention to linguistic semantics instead of algorithms.* No single person exists who understands it in its entirety — not even Stroustrup. The only reason I use it, and the only reason I find defensible for using it, is the run-time performance if affords while maintaining algorithmic generality. To sacrifice the efficiency of code generation in pursuit of platform diversity thereby eliminates the reason for using C++... and the compiler.

This is not academic or hyperbolic. GCC-generated code for map-projection numerics and image manipulation runs at half the speed of Microsoft's VS C++ on the same hardware. Meanwhile, just-in-time compilers and other modern techniques applied to elegant interpretive languages sometimes bring their execution speeds to parity with GCC.

*Sadly, you cannot even reasonably decide to use a subset of C++ in order to avoid the semantic complexities, because then you lose out on the very techniques that afford the performance advantages of C++.

Regards,
— daan Strebe


On Jan 13, 2009, at 7:51:28 PM, Hamish <hamish_b at yahoo.com> wrote:
it is a bit simplistic to judge only based on runtime speed.

The goal of GCC besides standards conformance you should consider is
the very tricky problem of portability across hardware architectures.
Intel & VSC only have one target, while gcc has 14+ to consider*.
Optimization will be least third down on gcc's list of priorities behind
these two. actually, probably 4th behind code readability.
compile-speed is another competing variable to consider, as is
"Freedom" and cost.

[*] debian; probably there are more


and FWIW, millions and millions of professional users and successful
deployments worldwide make these things world-class, not some benchmark
or our opinions/ideologies.

as with most things, be it a tool, license, projection, or a spouse,
the best solution for you depends on your specific needs, and it is
silly to argue which is "best" or unfit. but we try anyway :)


best,
Hamish



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090114/d67e6afa/attachment.html>

From hamish_b at yahoo.com  Wed Jan 14 13:49:50 2009
From: hamish_b at yahoo.com (Hamish)
Date: Wed, 14 Jan 2009 13:49:50 -0800 (PST)
Subject: [Proj] Geo Transfoms and calculations
In-Reply-To: <C95BCB9F.75BA.4142.A078.C6A60B55AE54@aol.com>
Message-ID: <186864.27931.qm@web110002.mail.gq1.yahoo.com>

strebe wrote:
> This is not academic or hyperbolic. GCC-generated code for
> map-projection numerics and image manipulation runs at half
> the speed of Microsoft's VS C++ on the same hardware.

indeed I use Intel's fortran compiler for my numerical models
which can take days or weeks to complete, and am very happy
with it. but for the little jobs and development gfortran(gcc)
is just fine and so I use that.

the right tool for the job depends on the job, that's all.

Hamish out.



      



From Roger.Bivand at nhh.no  Thu Jan 15 06:04:27 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 15 Jan 2009 15:04:27 +0100 (CET)
Subject: [Proj] Finding PROJ_LIB from application
Message-ID: <alpine.LRH.2.00.0901151501310.11901@reclus.nhh.no>

Hi,

Is there any way to query the system for the path to lib - effectively the 
path value in sysname in pj_open_lib.c, line 184? From inside R, I'd like 
to be able to show which path is being used.

Best wishes,

Roger

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From warmerdam at pobox.com  Thu Jan 15 08:07:41 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 15 Jan 2009 11:07:41 -0500
Subject: [Proj] Finding PROJ_LIB from application
In-Reply-To: <alpine.LRH.2.00.0901151501310.11901@reclus.nhh.no>
References: <alpine.LRH.2.00.0901151501310.11901@reclus.nhh.no>
Message-ID: <496F5F4D.9020909@pobox.com>

Roger Bivand wrote:
> Hi,
> 
> Is there any way to query the system for the path to lib - effectively the 
> path value in sysname in pj_open_lib.c, line 184? From inside R, I'd like 
> to be able to show which path is being used.

Roger,

No, I do not believe there is any way to to do this.  You can set the
PROJ_DEBUG environment variable (to any value) to see some debug output
to stderr when pj_open_lib() tries to open files but I don't imagine that
gives what you want.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From Roger.Bivand at nhh.no  Thu Jan 15 10:28:54 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 15 Jan 2009 19:28:54 +0100 (CET)
Subject: [Proj] Finding PROJ_LIB from application
In-Reply-To: <496F5F4D.9020909@pobox.com>
References: <alpine.LRH.2.00.0901151501310.11901@reclus.nhh.no>
	<496F5F4D.9020909@pobox.com>
Message-ID: <alpine.LRH.2.00.0901151922500.11901@reclus.nhh.no>

On Thu, 15 Jan 2009, Frank Warmerdam wrote:

> Roger Bivand wrote:
>> Hi,
>> 
>> Is there any way to query the system for the path to lib - effectively the 
>> path value in sysname in pj_open_lib.c, line 184? From inside R, I'd like 
>> to be able to show which path is being used.
>
> Roger,
>
> No, I do not believe there is any way to to do this.  You can set the
> PROJ_DEBUG environment variable (to any value) to see some debug output
> to stderr when pj_open_lib() tries to open files but I don't imagine that
> gives what you want.

No, not really. Given that pj_open_lib() tries to autodetect, I'd like to 
report where it is looking for users with possibly multiple installations.

This is connected to very preliminary work trying to see how rgdal might 
fit into OSGeo4W, and problems William Kyngesburye has been having with 
the OSX build (where I've been distributing the source with little-endian 
built NAD files, but where his framework has the right-endian ones for 
PPC).

Since pj_open_lib() gives me a FILE *, maybe I can retrieve the path from 
that (though I don't think so)?

Best wishes,

Roger

>
> Best regards,
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From Roger.Bivand at nhh.no  Thu Jan 15 11:07:14 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 15 Jan 2009 20:07:14 +0100 (CET)
Subject: [Proj] Finding PROJ_LIB from application
In-Reply-To: <alpine.LRH.2.00.0901151922500.11901@reclus.nhh.no>
References: <alpine.LRH.2.00.0901151501310.11901@reclus.nhh.no>
	<496F5F4D.9020909@pobox.com>
	<alpine.LRH.2.00.0901151922500.11901@reclus.nhh.no>
Message-ID: <alpine.LRH.2.00.0901152005410.11901@reclus.nhh.no>

On Thu, 15 Jan 2009, Roger Bivand wrote:

> On Thu, 15 Jan 2009, Frank Warmerdam wrote:
>
>> Roger Bivand wrote:
>>> Hi,
>>>
>>> Is there any way to query the system for the path to lib - effectively the
>>> path value in sysname in pj_open_lib.c, line 184? From inside R, I'd like
>>> to be able to show which path is being used.
>>
>> Roger,
>>
>> No, I do not believe there is any way to to do this.  You can set the
>> PROJ_DEBUG environment variable (to any value) to see some debug output
>> to stderr when pj_open_lib() tries to open files but I don't imagine that
>> gives what you want.
>
> No, not really. Given that pj_open_lib() tries to autodetect, I'd like to
> report where it is looking for users with possibly multiple installations.
>
> This is connected to very preliminary work trying to see how rgdal might
> fit into OSGeo4W, and problems William Kyngesburye has been having with
> the OSX build (where I've been distributing the source with little-endian
> built NAD files, but where his framework has the right-endian ones for
> PPC).
>
> Since pj_open_lib() gives me a FILE *, maybe I can retrieve the path from
> that (though I don't think so)?

Nope, not a chance. Would you accept a patch (same as pj_open_lib() but 
returning the full path and closing fid)?

Roger

>
> Best wishes,
>
> Roger
>
>>
>> Best regards,
>>
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From warmerdam at pobox.com  Thu Jan 15 11:16:17 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 15 Jan 2009 14:16:17 -0500
Subject: [Proj] Finding PROJ_LIB from application
In-Reply-To: <alpine.LRH.2.00.0901152005410.11901@reclus.nhh.no>
References: <alpine.LRH.2.00.0901151501310.11901@reclus.nhh.no>
	<496F5F4D.9020909@pobox.com>
	<alpine.LRH.2.00.0901151922500.11901@reclus.nhh.no>
	<alpine.LRH.2.00.0901152005410.11901@reclus.nhh.no>
Message-ID: <496F8B81.3050603@pobox.com>

Roger Bivand wrote:
> Nope, not a chance. Would you accept a patch (same as pj_open_lib() but 
> returning the full path and closing fid)?

Roger,

I'm somewhat dubious about the utility of this capability. But if you
were to offer a patch, I would suggest we add a new function called
pj_find_lib() that returns the full path given a filename.  Most of
pj_open_lib() would be migrated into that, and then pj_open_lib()
would use it.

I suppose if we are using fopen() to discover files, this will result
in an extra unnecessary file opening and closing which might suck.  I
suppose pj_find_lib() could also return the file handle, and pj_open_lib
would become a very minimal wrapper around it to preserve the old api.

What I am not likely to accept is a change to the pj_open_lib() ABI.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From Roger.Bivand at nhh.no  Thu Jan 15 11:23:06 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 15 Jan 2009 20:23:06 +0100 (CET)
Subject: [Proj] Finding PROJ_LIB from application
In-Reply-To: <496F8B81.3050603@pobox.com>
References: <alpine.LRH.2.00.0901151501310.11901@reclus.nhh.no>
	<496F5F4D.9020909@pobox.com>
	<alpine.LRH.2.00.0901151922500.11901@reclus.nhh.no>
	<alpine.LRH.2.00.0901152005410.11901@reclus.nhh.no>
	<496F8B81.3050603@pobox.com>
Message-ID: <alpine.LRH.2.00.0901152019440.11901@reclus.nhh.no>

On Thu, 15 Jan 2009, Frank Warmerdam wrote:

> Roger Bivand wrote:
>> Nope, not a chance. Would you accept a patch (same as pj_open_lib() but 
>> returning the full path and closing fid)?
>
> Roger,
>
> I'm somewhat dubious about the utility of this capability. But if you
> were to offer a patch, I would suggest we add a new function called
> pj_find_lib() that returns the full path given a filename.  Most of
> pj_open_lib() would be migrated into that, and then pj_open_lib()
> would use it.
>
> I suppose if we are using fopen() to discover files, this will result
> in an extra unnecessary file opening and closing which might suck.  I
> suppose pj_find_lib() could also return the file handle, and pj_open_lib
> would become a very minimal wrapper around it to preserve the old api.
>
> What I am not likely to accept is a change to the pj_open_lib() ABI.

Frank,

I agree that this is probably overkill, so until I'm under pressure from 
users, I'll report the value of PROJ_LIB if present, or its absence if 
not. It ough to be enough, and avoids changing things that don't need 
changing. In GDAL, I'm using a single call to CSVFilename() to get the 
path.

Best wishes,

Roger

>
> Best regards,
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From glynn at gclements.plus.com  Thu Jan 15 12:05:08 2009
From: glynn at gclements.plus.com (Glynn Clements)
Date: Thu, 15 Jan 2009 20:05:08 +0000
Subject: [Proj] Finding PROJ_LIB from application
In-Reply-To: <alpine.LRH.2.00.0901151501310.11901@reclus.nhh.no>
References: <alpine.LRH.2.00.0901151501310.11901@reclus.nhh.no>
Message-ID: <18799.38644.367257.293212@cerise.gclements.plus.com>


Roger Bivand wrote:

> Is there any way to query the system for the path to lib - effectively the 
> path value in sysname in pj_open_lib.c, line 184? From inside R, I'd like 
> to be able to show which path is being used.

There doesn't appear to be any explicit support for this, but there
are a couple of hacks available if "don't know" isn't fatal:

1. Set PROJ_DEBUG, (temporarily) point stderr at a file, and parse the
filename out of the debug message (which could contain other text if
library functions or the finder function write to stderr).

2. Make a copy of pj_open_lib() which returns the path rather than
opening it, call fstat(fileno(fp)) and stat(pathname), and check that
the dev/inode match.

3. On Linux, use fileno() to get a descriptor from the returned FILE*
and look up the filename in /proc/self/fd/<fd>. Some other Unices
support /proc, but I don't know how consistent they are.

4. On Windows, GetFinalPathNameByHandle(_get_osfhandle(_fileno(fp))).

-- 
Glynn Clements <glynn at gclements.plus.com>


From Roger.Bivand at nhh.no  Thu Jan 15 12:55:29 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 15 Jan 2009 21:55:29 +0100 (CET)
Subject: [Proj] Finding PROJ_LIB from application
In-Reply-To: <18799.38644.367257.293212@cerise.gclements.plus.com>
References: <alpine.LRH.2.00.0901151501310.11901@reclus.nhh.no>
	<18799.38644.367257.293212@cerise.gclements.plus.com>
Message-ID: <alpine.LRH.2.00.0901152153190.11901@reclus.nhh.no>

On Thu, 15 Jan 2009, Glynn Clements wrote:

>
> Roger Bivand wrote:
>
>> Is there any way to query the system for the path to lib - effectively the
>> path value in sysname in pj_open_lib.c, line 184? From inside R, I'd like
>> to be able to show which path is being used.
>
> There doesn't appear to be any explicit support for this, but there
> are a couple of hacks available if "don't know" isn't fatal:
>
> 1. Set PROJ_DEBUG, (temporarily) point stderr at a file, and parse the
> filename out of the debug message (which could contain other text if
> library functions or the finder function write to stderr).
>
> 2. Make a copy of pj_open_lib() which returns the path rather than
> opening it, call fstat(fileno(fp)) and stat(pathname), and check that
> the dev/inode match.
>
> 3. On Linux, use fileno() to get a descriptor from the returned FILE*
> and look up the filename in /proc/self/fd/<fd>. Some other Unices
> support /proc, but I don't know how consistent they are.
>
> 4. On Windows, GetFinalPathNameByHandle(_get_osfhandle(_fileno(fp))).

Glynn,

Thanks. For now, I've backed off until users require the path displayed - 
I need to check out the OSX PPC endian issue first.

Best wishes,

Roger

>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no



From till at free.fr  Thu Jan 15 14:55:51 2009
From: till at free.fr (Till)
Date: Thu, 15 Jan 2009 23:55:51 +0100
Subject: [Proj] Getting Proj information after pj_init has been thrown
References: <001701c96c57$6512df60$2f389e20$@fr>
	<496234E9.2020807@pobox.com>	<000401c97056$97c6b410$c7541c30$@fr>
	<49641DE0.4070702@pobox.com> 
Message-ID: <01a001c97764$69bb5750$3d3205f0$@fr>

It looks as this mail has been lost, so I send it again, sorry if
duplication...

-----Message d'origine-----
De : Till [mailto:till at free.fr] 
Envoyé : mardi 13 janvier 2009 09:31
À : 'PROJ.4 and general Projections Discussions'
Objet : RE: [Proj] Getting Proj information after pj_init has been thrown

Hi Frank,
And many thanks for your answers.

The problem I'm facing, is that I'm using it inside another project where I
need to combine with other includes.
To help going further, Id did build a 'coordinate' class for 2D/3D Points
that carry 2 'geo'-representations of their positions. This class is about
to use Proj.4 for managing the conversion from one to the other.
As such it includes proj_api.h.
This class is also used inside another framework (not to mention Ogre3D). As
long as I'd like to provide this class to some entities in this framework, I
need to be able to include my class's prototype inside some .cpp that also
include .h from this framework.
This is where my compilation pb occurs.
There are places where this framework includes 'windows.h', and I absolutely
don't know where. Furthermore, if I knew where this occurs the solution
would probably to patch this framework, which is something I'd like to
avoid.

Maybe my lack of knowledge of hacks or tricks to overcome this is in
involved, but I don't see yet any proper way to build something robust, in a
way I'd not face it again on another framework.

I hope I explained properly my concerns, and I admit I could miss some
'building/compilation' tricks that could work around all of this.

On the second point, yes there might be a couple of fields we should be able
to access.
May be another way is to split the projects.h header in such a way, the
PVALUE is isolated.

-----Message d'origine-----
De : proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] De la part de Frank Warmerdam
Envoyé : mercredi 7 janvier 2009 04:14
À : PROJ.4 and general Projections Discussions
Objet : Re: [Proj] Getting Proj information after pj_init has been thrown

Till wrote:
> Yes, but this 'segregation' is actually hard to achieve since windows.h is
> implicitly somewhere used but not in an obvious way, as long as a project
> may rely on a couple of different library includes (like ours) and
probably
> altering the way it is done, may bring some side effects we'd like to
avoid.

Till,

Sorry for the previous reply - I read these messages out of order.

I'm really just suggesting you add a small additional C++ source file to
your project in which you do all your PJ accessing and have it only include
the bare minimum of stuff.

> On the concerns, I may understand that internal access to the whole PJ
> structure is not encouraged (although I think it should be available as
> "read only", at least).

Well, it is certainly available.

> My feeling is one may however want to be able to access basic
initialization
> data that have been generated out of the initialization (like major/minor
> axis, etc.) that we could just implement adding a pj_info(char*info)
> retriever tool or some pj_getMajor/MinorAxis whatever.

Possibly, though potentially there are a lot of fields you might want access
to.

Best regards.
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From geraldi.evenden at gmail.com  Sun Jan 18 17:57:33 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 18 Jan 2009 20:57:33 -0500
Subject: [Proj] Problems with Pittman geodesic??
Message-ID: <200901182057.33506.geraldi.evenden@gmail.com>

While checking out the accuracy of Vincenty vs. Pittman
I was fairly consistently getting agreement to micron or
better.

BUT not always!!!

I would appreciate anyone who has a Pittman geodesic routine
to test the following inverse (WGS84 ellipsoid):

point 1 at 0 lat, 0 lon and point 2 at 45N 90E.

With my version of Pittman I get a distance of 9993541.5348708
AND I get the same distance while changing the longitude of the
second point from about 89.6 to a hair over 90.

At 0,0/45,89.5:
Pittman: 9970963.0100082
Vincenty:9970963.01000801

At 0,0/45,89.6
Pittman: 9993541.5348708
Vincenty:9978847.65947167

Pittman remained constant in this longitude interval

At 0,0/45,90
Pittman:  9993541.5348708
Vincenty:10010386.3610382

Between 90.0000001 and 90.000001 Pittman finally came back
into near agreement with Vincenty.

Note: I did nothing to the Pittman FORTRAN loaned from Mugnier
other than compile it with gfortran and link to a C driver.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at sarnoff.com  Sun Jan 18 18:47:11 2009
From: ckarney at sarnoff.com (Charles Karney)
Date: Sun, 18 Jan 2009 21:47:11 -0500
Subject: [Proj]  Problems with Pittman geodesic??
Message-ID: <ssrocy4hv0w.fsf@petrel.petrel.org>

Well, for sure, the Pittman results you quote can't be right.  The back
azimuth is just about due west.  So increasing the longitude of point 2
by 0.4 deg should increase geodesic by roughly 0.4 * cos(lat2) * 10^7/90
m = 31.5 km.  Can't you nail this down with solutions to the forward
problem?

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From hamish_b at yahoo.com  Sun Jan 18 20:00:36 2009
From: hamish_b at yahoo.com (Hamish)
Date: Sun, 18 Jan 2009 20:00:36 -0800 (PST)
Subject: [Proj] Problems with Pittman geodesic??
In-Reply-To: <200901182057.33506.geraldi.evenden@gmail.com>
Message-ID: <712114.50059.qm@web110015.mail.gq1.yahoo.com>

Gerald wrote:
> While checking out the accuracy of Vincenty vs. Pittman
> I was fairly consistently getting agreement to micron or
> better.
> 
> BUT not always!!!
> 
> I would appreciate anyone who has a Pittman geodesic routine
> to test the following inverse (WGS84 ellipsoid):
> 
> point 1 at 0 lat, 0 lon and point 2 at 45N 90E.
> 
> With my version of Pittman I get a distance of 9993541.5348708
> AND I get the same distance while changing the longitude of the
> second point from about 89.6 to a hair over 90.
> 
> At 0,0/45,89.5:
> Pittman: 9970963.0100082
> Vincenty:9970963.01000801
> 
> At 0,0/45,89.6
> Pittman: 9993541.5348708
> Vincenty:9978847.65947167
> 
> Pittman remained constant in this longitude interval
> 
> At 0,0/45,90
> Pittman:  9993541.5348708
> Vincenty:10010386.3610382
> 
> Between 90.0000001 and 90.000001 Pittman finally came back
> into near agreement with Vincenty.
> 
> Note: I did nothing to the Pittman FORTRAN loaned from Mugnier
> other than compile it with gfortran and link to a C driver.


I would guess that some internal variable is defined as a REAL (float)
instead of a DOUBLE PRECISION (double), and so the effect you are seeing
is quantization due to variable precision.


Hamish



      



From geraldi.evenden at gmail.com  Mon Jan 19 07:42:04 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 19 Jan 2009 10:42:04 -0500
Subject: [Proj] Problems with Pittman geodesic??
In-Reply-To: <712114.50059.qm@web110015.mail.gq1.yahoo.com>
References: <712114.50059.qm@web110015.mail.gq1.yahoo.com>
Message-ID: <200901191042.05008.geraldi.evenden@gmail.com>

On Sunday 18 January 2009 11:00:36 pm Hamish wrote:
> Gerald wrote:
> > While checking out the accuracy of Vincenty vs. Pittman
> > I was fairly consistently getting agreement to micron or
> > better.
> >
> > BUT not always!!!
> >
> > I would appreciate anyone who has a Pittman geodesic routine
> > to test the following inverse (WGS84 ellipsoid):
> >
> > point 1 at 0 lat, 0 lon and point 2 at 45N 90E.
> >
> > With my version of Pittman I get a distance of 9993541.5348708
> > AND I get the same distance while changing the longitude of the
> > second point from about 89.6 to a hair over 90.
> >
> > At 0,0/45,89.5:
> > Pittman: 9970963.0100082
> > Vincenty:9970963.01000801
> >
> > At 0,0/45,89.6
> > Pittman: 9993541.5348708
> > Vincenty:9978847.65947167
> >
> > Pittman remained constant in this longitude interval
> >
> > At 0,0/45,90
> > Pittman:  9993541.5348708
> > Vincenty:10010386.3610382
> >
> > Between 90.0000001 and 90.000001 Pittman finally came back
> > into near agreement with Vincenty.
> >
> > Note: I did nothing to the Pittman FORTRAN loaned from Mugnier
> > other than compile it with gfortran and link to a C driver.
>
> I would guess that some internal variable is defined as a REAL (float)
> instead of a DOUBLE PRECISION (double), and so the effect you are seeing
> is quantization due to variable precision.

Both replies, so far seemed to think I was trying to debug the Pittman 
procedures.

I am not interested in fixing the Pittman procedures.  I am asking for anyone 
with the Pittman routines to check if their version has the same problem mine 
has.  My only interest in Pittman is as a comparison to the Vincenty 
procedures because Pittman has been touted as the standard for geodesic 
calculations.

Thank-you.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From Stefan.Ziegler at bd.so.ch  Mon Jan 19 08:00:06 2009
From: Stefan.Ziegler at bd.so.ch (Ziegler Stefan)
Date: Mon, 19 Jan 2009 17:00:06 +0100
Subject: [Proj] Problems using grid shift files
Message-ID: <H00002ea0412ea47.1232380806.srsofaioi6145.ktso.ch@MHS>

Dear List

we have some problems using grid shift files. We are using a grid shift
file which was developed by the Swiss Federal Office of Topography [1].
We just duplicated epsg 21781 (to 921781) and 2056 (to 902056) in the
epsg file and added  "+nadgrids=chenyx06.gsb" and "+nadgrids=@null":

21781: 
+proj=somerc +lat_0=46d57'08.66"N +lon_0=7d26'22.50"E +ellps=bessel
+x_0=600000 +y_0=200000 +towgs84=674.374,15.056,405.346 +units=m +k_0=1
+no_defs 

2056:
+proj=somerc +lat_0=46d57'08.66"N +lon_0=7d26'22.50"E +ellps=bessel
+x_0=2600000 +y_0=1200000 +towgs84=674.374,15.056,405.346 +units=m
+k_0=1 +no_defs

921781: 
+proj=somerc +lat_0=46d57'08.66"N +lon_0=7d26'22.50"E +ellps=bessel
+x_0=600000 +y_0=200000 +towgs84=674.374,15.056,405.346 +units=m
+nadgrids=chenyx06.gsb +k_0=1 +no_defs 

902056:
+proj=somerc +lat_0=46d57'08.66"N +lon_0=7d26'22.50"E +ellps=bessel
+x_0=2600000 +y_0=1200000 +towgs84=674.374,15.056,405.346 +units=m
+nadgrids=@null +k_0=1 +no_defs

4326:
+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs

904326:
+proj=longlat +ellps=WGS84 +datum=WGS84 +nadgrids=@null


Here are the results:

21781 -> 2056: correct!
921781 -> 90256: correct (with grid shift file)!

but:
921781 -> 2056: wrong!
921781 -> 4326: wrong!
921781 -> 904326: wrong!

Is the grid shift only applied if the destination definiton has a
"+nadgrids=@null"? But then why is the transformation to 904326 not
correct? Has this something to do with this bug report [2]? Or I'm just
mixing up some parameters? Same results with Proj 4.5 and 4.6.1. Any
help is appreciated.

regards
Stefan



[1]:
http://www.swisstopo.admin.ch/internet/swisstopo/en/home/topics/survey/l
v03-lv95/chenyx06/distortion_grids.html
[2]: http://trac.osgeo.org/proj/ticket/22



Mit freundlichem Gruss
Stefan Ziegler
Leiter Aufsicht

Kanton Solothurn
Bau- und Justizdepartement
Amt für Geoinformation
Rötistrasse 4
4501 Solothurn
Telefon 032 627 75 96
Telefax 032 627 75 98
stefan.ziegler at bd.so.ch
http://www.so.ch

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090119/967acd22/attachment.html>

From ovv at hetnet.nl  Mon Jan 19 10:16:38 2009
From: ovv at hetnet.nl (OvV_HN)
Date: Mon, 19 Jan 2009 19:16:38 +0100
Subject: [Proj] Problems with Pittman geodesic??
In-Reply-To: <200901182057.33506.geraldi.evenden@gmail.com>
References: <200901182057.33506.geraldi.evenden@gmail.com>
Message-ID: <74CFB550E00B4581B95B0D57F61BCC43@PCHP>

Some time ago I referred to 2 articles by Saito.
He computes the geodesic problems by numerical integration. There are some 
errors in the formulae, but his second article gives correct results for 
'normal' values. Saito attends much detail to borderline situations, but 
there are probably some errors in his descriptions.
Anyhow, he gives a couple of test points which everybody with geodesics code 
definitively should try to replicate. You might be surprised!

Saito article 2 examples.

Using the formulas and the procedure described in the article, with an 
equatorial radius of 6378388 meters and an inverse flattening of 297, the 
following results were obtained. The computation was made in double 
precision arithmetic - through twenty significant digits.

Line lat1                lat2               delta lon
1. 37d 19' 54.95367"   26d 07' 42.83946"  041d 28' 35.50729"
2. 35  16  11.24862    67  22  14.77638   137  47  28.31435
3. 01  00  00.00000   -00  59  53.83076   179  17  48.02997
4. 01  00  00.00000    01  01  15.18952   179  46  17.84244
5. 41  41  45.88000    41  41  46.20000   000  00  00.56000
6. 30  00  00.00000    37  53  32.46584   116  19  16.68843
7. 30  19  54.95367   -30  11  50.15681   179  58  17.84244
8. 00  39  49.12586   -00  45  14.13112   179  58  17.84244
9. 00  00  54.95367    00  00  42.83946   179  28  17.84244

Line  dist.           azim.                back azim.
1.  4085966.7026 m   095d 27' 59.630899"  118d 05' 58.961609"
2.  8084823.8383     015  44  23.748498   114  55  39.921473
3. 19959999.9998     088  59  59.998971   091  00  06.118356
4. 19780006.5588     004  59  59.999957   174  59  59.884800
5.       16.2839751  052  40  39.390671   052  40  39.763172
6. 10002499.9999     045  00  00.000004   129  08  12.326009
7. 19989590.5480     002  23  52.108130   177  36  19.670109
8. 19994529.4446     177  39  39.010104   002  20  21.153036
9. 19977290.7711     054  08  27.731619   125  51  32.272327

From:
THE COMPUTATION OF LONG GEODESICS ON THE ELLIPSOID
THROUGH GAUSSlAN QUADRATURE
Tsutomu SAITO
Construction College,
Kodaira-shi Tokyo, 187 Japan.


Oscar van Vlijmen


----- Original Message ----- 
From: "Gerald I. Evenden" <geraldi.evenden at gmail.com>
To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
Sent: Monday, January 19, 2009 2:57 AM
Subject: [Proj] Problems with Pittman geodesic??


> While checking out the accuracy of Vincenty vs. Pittman
> I was fairly consistently getting agreement to micron or
> better.
>
> BUT not always!!!
>
> I would appreciate anyone who has a Pittman geodesic routine
> to test the following inverse (WGS84 ellipsoid):
>

.....




From Mikael.Rittri at carmenta.com  Thu Jan 22 07:58:53 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Thu, 22 Jan 2009 16:58:53 +0100
Subject: [Proj] Problems using grid shift files
In-Reply-To: <H00002ea0412ea47.1232380806.srsofaioi6145.ktso.ch@MHS>
References: <H00002ea0412ea47.1232380806.srsofaioi6145.ktso.ch@MHS>
Message-ID: <FAF6E56B26D2044696772EBE89B15351016150C7@posty.carmenta.se>

Dear Stefan,
This is not the answer you are looking for, but maybe it helps.

>From the source code in src/pj_datum_set.c, my impression
is that +nadgrids takes precedence over +towgs84, at least 
in Proj4 (perhaps not in OGRSpatialReference etc.).  

That would mean that in your definition of CRS 902056,
where you use both +towgs84=674.374,... and +nadgrids=@null, 
the +towgs84 would be ignored and +nadgrids=@null would be 
used, which is the same thing (as far as I understand) as 
saying that the longitude/latitude in CRS 902056 is the same 
as longitude/latitude in WGS84.  

But that's not your intention, is it?  
The datum of EPSG:2056 is CH1903+, and the datum of 
EPSG:21781 is CH1903 (without the +).  

I thought CH1903+ was some kind of improved version of CH1903,
with less distortion, although I don't know if your gridshift 
file is intended for CH1903 or for CH1903+.

Anyway, I don't the see the reason for using +nadgrids=@null
in your definition of CRS 902056.  I would have expected either
the +towgs84 parameter or the +nadgrids=chenyx06.gsb.

Best regards,

--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
mikael.rittri at carmenta.com
www.carmenta.com 

________________________________

From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Ziegler Stefan
Sent: den 19 januari 2009 17:00
To: proj
Subject: [Proj] Problems using grid shift files


Dear List

we have some problems using grid shift files. We are using a grid shift file which was developed by the Swiss Federal Office of Topography [1]. We just duplicated epsg 21781 (to 921781) and 2056 (to 902056) in the epsg file and added "+nadgrids=chenyx06.gsb" and "+nadgrids=@null":

21781: 
+proj=somerc +lat_0=46d57'08.66"N +lon_0=7d26'22.50"E +ellps=bessel +x_0=600000 +y_0=200000 +towgs84=674.374,15.056,405.346 +units=m +k_0=1 +no_defs 

2056:
+proj=somerc +lat_0=46d57'08.66"N +lon_0=7d26'22.50"E +ellps=bessel +x_0=2600000 +y_0=1200000 +towgs84=674.374,15.056,405.346 +units=m +k_0=1 +no_defs

921781: 
+proj=somerc +lat_0=46d57'08.66"N +lon_0=7d26'22.50"E +ellps=bessel +x_0=600000 +y_0=200000 +towgs84=674.374,15.056,405.346 +units=m +nadgrids=chenyx06.gsb +k_0=1 +no_defs 

902056:
+proj=somerc +lat_0=46d57'08.66"N +lon_0=7d26'22.50"E +ellps=bessel +x_0=2600000 +y_0=1200000 +towgs84=674.374,15.056,405.346 +units=m +nadgrids=@null +k_0=1 +no_defs

4326:
+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs

904326:
+proj=longlat +ellps=WGS84 +datum=WGS84 +nadgrids=@null

Here are the results:

21781 -> 2056: correct!
921781 -> 90256: correct (with grid shift file)!

but:
921781 -> 2056: wrong!
921781 -> 4326: wrong!
921781 -> 904326: wrong!

Is the grid shift only applied if the destination definiton has a "+nadgrids=@null"? But then why is the transformation to 904326 not correct? Has this something to do with this bug report [2]? Or I'm just mixing up some parameters? Same results with Proj 4.5 and 4.6.1. Any help is appreciated.

regards
Stefan

[1]: http://www.swisstopo.admin.ch/internet/swisstopo/en/home/topics/survey/lv03-lv95/chenyx06/distortion_grids.html
[2]: http://trac.osgeo.org/proj/ticket/22

Mit freundlichem Gruss
Stefan Ziegler
Leiter Aufsicht

Kanton Solothurn
Bau- und Justizdepartement
Amt für Geoinformation
Rötistrasse 4
4501 Solothurn
Telefon 032 627 75 96
Telefax 032 627 75 98
stefan.ziegler at bd.so.ch
http://www.so.ch



From geraldi.evenden at gmail.com  Thu Jan 22 12:40:40 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 22 Jan 2009 15:40:40 -0500
Subject: [Proj] Problems with Pittman geodesic??
In-Reply-To: <74CFB550E00B4581B95B0D57F61BCC43@PCHP>
References: <200901182057.33506.geraldi.evenden@gmail.com>
	<74CFB550E00B4581B95B0D57F61BCC43@PCHP>
Message-ID: <200901221540.40202.geraldi.evenden@gmail.com>

On Monday 19 January 2009 1:16:38 pm OvV_HN wrote:
> Some time ago I referred to 2 articles by Saito.
> He computes the geodesic problems by numerical integration. There are some
> errors in the formulae, but his second article gives correct results for
> 'normal' values. Saito attends much detail to borderline situations, but
> there are probably some errors in his descriptions.
> Anyhow, he gives a couple of test points which everybody with geodesics
> code definitively should try to replicate. You might be surprised!

I did not find any surprises here because where problems do show up are for 
the near apodal points which Vincenty (and others) usually flunk.

I have more problems with failures with Pittman and some non-apodal points.

> Saito article 2 examples.
>
> Using the formulas and the procedure described in the article, with an
> equatorial radius of 6378388 meters and an inverse flattening of 297, the
> following results were obtained. The computation was made in double
> precision arithmetic - through twenty significant digits.

"double precision" --- "through twenty significant digits." ???  What kind of 
hardware is being used?  "double" on most 64bit systems is about 15 digits 
+-.  With so much significance, why are the following tables showing 12 at 
best?

> Line lat1                lat2               delta lon
> 1. 37d 19' 54.95367"   26d 07' 42.83946"  041d 28' 35.50729"
> 2. 35  16  11.24862    67  22  14.77638   137  47  28.31435
> 3. 01  00  00.00000   -00  59  53.83076   179  17  48.02997
> 4. 01  00  00.00000    01  01  15.18952   179  46  17.84244
> 5. 41  41  45.88000    41  41  46.20000   000  00  00.56000
> 6. 30  00  00.00000    37  53  32.46584   116  19  16.68843
> 7. 30  19  54.95367   -30  11  50.15681   179  58  17.84244
> 8. 00  39  49.12586   -00  45  14.13112   179  58  17.84244
> 9. 00  00  54.95367    00  00  42.83946   179  28  17.84244
>
> Line  dist.           azim.                back azim.
> 1.  4085966.7026 m   095d 27' 59.630899"  118d 05' 58.961609"
> 2.  8084823.8383     015  44  23.748498   114  55  39.921473
> 3. 19959999.9998     088  59  59.998971   091  00  06.118356
> 4. 19780006.5588     004  59  59.999957   174  59  59.884800
> 5.       16.2839751  052  40  39.390671   052  40  39.763172
> 6. 10002499.9999     045  00  00.000004   129  08  12.326009
> 7. 19989590.5480     002  23  52.108130   177  36  19.670109
> 8. 19994529.4446     177  39  39.010104   002  20  21.153036
> 9. 19977290.7711     054  08  27.731619   125  51  32.272327
>
> From:
> THE COMPUTATION OF LONG GEODESICS ON THE ELLIPSOID
> THROUGH GAUSSlAN QUADRATURE
> Tsutomu SAITO

Using Gaussian Quadrature is not a big thing as long as one has the integrals 
to evaluate---one does not need to use gsl to do that. ;-)  I am surprised 
that he can get away with just using that method---or does he?

Lastly, the Saito source is apparently available though "Springer -- 
something" that charges $35(presumably US) for a pdf copy of Vincenty that 
you can get for free from NOAA.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From Mikael.Rittri at carmenta.com  Fri Jan 23 06:05:11 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Fri, 23 Jan 2009 15:05:11 +0100
Subject: [Proj] Problems using grid shift files
References: <H00002ea0412ea47.1232380806.srsofaioi6145.ktso.ch@MHS> 
Message-ID: <FAF6E56B26D2044696772EBE89B1535101615169@posty.carmenta.se>

PS:
I wrote:
> ... although I don't know if your gridshift file is intended for CH1903 or for CH1903+.

I tried to check this, and it seems that chenyx06.gsb transforms 
from CH1903 (long/lat) to CH1903+ (long/lat).  

This is clear from the ASCII version of the file, chenyx06.asc, where 
lines 6 and 7 are:

SYSTEM_FCH1903  
SYSTEM_TCH1903+ 

and F presumably means From, and T means To. (Also, the shifts are 
all less than 0.1 arc seconds, or about 3 meters.  The shifts from
CH1903 or CH1903+ to WGS84 would have been much larger.)  

I think cs2cs normally assumes that a grid shift file will transform a national datum to WGS84.
So I don't know how chenyx06.gsb can be used by cs2cs, but perhaps some pipe 
construction could be used.  

Best regards,
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Ziegler Stefan
Sent: den 19 januari 2009 17:00
To: proj
Subject: [Proj] Problems using grid shift files


Dear List

we have some problems using grid shift files. We are using a grid shift file which was developed by the Swiss Federal Office of Topography [1]. We just duplicated epsg 21781 (to 921781) and 2056 (to 902056) in the epsg file and added "+nadgrids=chenyx06.gsb" and "+nadgrids=@null":

21781: 
+proj=somerc +lat_0=46d57'08.66"N +lon_0=7d26'22.50"E +ellps=bessel 
++x_0=600000 +y_0=200000 +towgs84=674.374,15.056,405.346 +units=m +k_0=1 
++no_defs

2056:
+proj=somerc +lat_0=46d57'08.66"N +lon_0=7d26'22.50"E +ellps=bessel 
++x_0=2600000 +y_0=1200000 +towgs84=674.374,15.056,405.346 +units=m 
++k_0=1 +no_defs

921781: 
+proj=somerc +lat_0=46d57'08.66"N +lon_0=7d26'22.50"E +ellps=bessel 
++x_0=600000 +y_0=200000 +towgs84=674.374,15.056,405.346 +units=m 
++nadgrids=chenyx06.gsb +k_0=1 +no_defs

902056:
+proj=somerc +lat_0=46d57'08.66"N +lon_0=7d26'22.50"E +ellps=bessel 
++x_0=2600000 +y_0=1200000 +towgs84=674.374,15.056,405.346 +units=m 
++nadgrids=@null +k_0=1 +no_defs

4326:
+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs

904326:
+proj=longlat +ellps=WGS84 +datum=WGS84 +nadgrids=@null

Here are the results:

21781 -> 2056: correct!
921781 -> 90256: correct (with grid shift file)!

but:
921781 -> 2056: wrong!
921781 -> 4326: wrong!
921781 -> 904326: wrong!

Is the grid shift only applied if the destination definiton has a "+nadgrids=@null"? But then why is the transformation to 904326 not correct? Has this something to do with this bug report [2]? Or I'm just mixing up some parameters? Same results with Proj 4.5 and 4.6.1. Any help is appreciated.

regards
Stefan

[1]: http://www.swisstopo.admin.ch/internet/swisstopo/en/home/topics/survey/lv03-lv95/chenyx06/distortion_grids.html
[2]: http://trac.osgeo.org/proj/ticket/22

Mit freundlichem Gruss
Stefan Ziegler
Leiter Aufsicht

Kanton Solothurn
Bau- und Justizdepartement
Amt für Geoinformation
Rötistrasse 4
4501 Solothurn
Telefon 032 627 75 96
Telefax 032 627 75 98
stefan.ziegler at bd.so.ch
http://www.so.ch



From paul-grass at stjohnspoint.co.uk  Fri Jan 23 07:11:56 2009
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Fri, 23 Jan 2009 15:11:56 +0000 (GMT)
Subject: [Proj] Problems using grid shift files
In-Reply-To: <FAF6E56B26D2044696772EBE89B1535101615169@posty.carmenta.se>
References: <H00002ea0412ea47.1232380806.srsofaioi6145.ktso.ch@MHS> 
	<FAF6E56B26D2044696772EBE89B1535101615169@posty.carmenta.se>
Message-ID: <Pine.LNX.4.62.0901231507320.17058@vortex.ukshells.co.uk>

On Fri, 23 Jan 2009, Mikael Rittri wrote:

> I think cs2cs normally assumes that a grid shift file will transform a national datum to WGS84.
> So I don't know how chenyx06.gsb can be used by cs2cs, but perhaps some pipe
> construction could be used.

Specify the gridshift file as part of the PROJ.4 description of the CH1903 
system, and use a +towgs84=0,0,0 datum parameter set for the CH1903+ 
location. Something along those lines should work I think, but the 
co-ordinates would need to be transformed again to get to WGS84.

Paul


From ovv at hetnet.nl  Fri Jan 23 08:41:07 2009
From: ovv at hetnet.nl (OvV_HN)
Date: Fri, 23 Jan 2009 17:41:07 +0100
Subject: [Proj] Problems with Pittman geodesic??
In-Reply-To: <200901221540.40202.geraldi.evenden@gmail.com>
References: <200901182057.33506.geraldi.evenden@gmail.com><74CFB550E00B4581B95B0D57F61BCC43@PCHP>
	<200901221540.40202.geraldi.evenden@gmail.com>
Message-ID: <778DC12DD6764A86A5E981A757CBE357@PCHP>

From: "Gerald I. Evenden" <geraldi.evenden at gmail.com>
Sent: Thursday, January 22, 2009 9:40 PM
Subject: Re: [Proj] Problems with Pittman geodesic??


> On Monday 19 January 2009 1:16:38 pm OvV_HN wrote:
>> Some time ago I referred to 2 articles by Saito.
....
>> Anyhow, he gives a couple of test points which everybody with geodesics
>> code definitively should try to replicate. You might be surprised!
> I did not find any surprises here because where problems do show up are 
> for
> the near apodal points which Vincenty (and others) usually flunk.

Nice. Indeed my implementation of NOAAs Vincenty went wrong with the 
antipodal examples 7, 8, 9. As did the earlier mentioned method of Xue-Lian 
Zhang.

>> Saito article 2 examples.
...
>> following results were obtained. The computation was made in double
>> precision arithmetic - through twenty significant digits.
> "double precision" --- "through twenty significant digits." ???  What kind 
> of
> hardware is being used?

The article is from 1978; only Fortran is mentioned.

> Using Gaussian Quadrature is not a big thing as long as one has the 
> integrals
> to evaluate---one does not need to use gsl to do that. ;-)

Then you probably don't need GNU GSL for the Mayr-Tobler projection!

Oscar van Vlijmen






From cbisegni at gmail.com  Sat Jan 24 06:10:47 2009
From: cbisegni at gmail.com (Claudio Bisegni)
Date: Sat, 24 Jan 2009 15:10:47 +0100
Subject: [Proj] gps lat/long to x/y rotated issue
Message-ID: <080F8EBF-A325-47A7-A92C-5E7A267CD95A@gmail.com>

Hi folk,
i use this init string found on google, to make the work in object:
+title= Google Mercator EPSG:900913  +proj=merc +a=6378137 +b=6378137  
+lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null  
+no_defs
It's work well except that the graf is rotated of 90° clockwise.
Any one has na idea? I'm new to proj..
Thanks in advanced.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090124/19ee8e68/attachment.html>

From support.mn at elisanet.fi  Mon Jan 26 02:44:12 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Mon, 26 Jan 2009 12:44:12 +0200 (EET)
Subject: [Proj] gps lat/long to x/y rotated issue
Message-ID: <1966708.1417031232966652642.JavaMail.support.mn@elisanet.fi>

Hello,

either you have to rotate it 90 degrees back - or swap y to x and x to -y (or
somthing similar, maybe add some false n and e values and experiment
with signs).

Regards Janne.

-------------------

Claudio Bisegni [cbisegni at gmail.com] kirjoitti: 
> Hi folk,
> i use this init string found on google, to make the work in object:
> +title= Google Mercator EPSG:900913  +proj=merc +a=6378137 +b=6378137  
> +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null  
> +no_defs
> It's work well except that the graf is rotated of 90° clockwise.
> Any one has na idea? I'm new to proj..
> Thanks in advanced.
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From j.l.h.hartmann at uva.nl  Mon Jan 26 02:54:27 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon, 26 Jan 2009 11:54:27 +0100
Subject: [Proj] Lat-Lon values under different ellipsoides
In-Reply-To: <200901141204.33985.geraldi.evenden@gmail.com>
References: <786764.69535.qm@web110015.mail.gq1.yahoo.com>
	<200901141204.33985.geraldi.evenden@gmail.com>
Message-ID: <497D9663.2040900@uva.nl>

Hi,

This is something I have long been banging my head against. I think it 
is a bug, but I am not sure. If I take a lat-lon value, computed on a 
particular ellipsoid, and convert it to the lat-lon value on another 
ellipsoid, I should get a different value, right? (e.g. cs2cs 
+proj=longlat +ellps=bessel +to +proj=longlat +ellps=WGS84). PROJ4 
always gives the same value, but I have an extensive list of coordinates 
of church towers in the Netherlands with their lat-lon values in 1850, 
based an a slightly smaller ellipsoid than we use nowadays, and the 
lat-lon of the same towers derived from our modern RD-system, based on 
the Bessel-ellipsoid, and without the WGS84 correction. There is a 
systematic difference of about 50 meters. If I do the same computation 
with the projected coordinates, I get the correct answer. Moreover, in 
that case the transformation changes when I change the 
ellipse-parameter, something that does not happen with lat-lon coordinates.

So, is this a bug in PROJ? If so, can someone with geodetic experience 
here explain to me how people can get different lat-lon values for the 
same point, based on astronomical measurements?

Thanks,

Jan


From cbisegni at gmail.com  Mon Jan 26 03:06:35 2009
From: cbisegni at gmail.com (Claudio Bisegni)
Date: Mon, 26 Jan 2009 12:06:35 +0100
Subject: [Proj] gps lat/long to x/y rotated issue
In-Reply-To: <1966708.1417031232966652642.JavaMail.support.mn@elisanet.fi>
References: <1966708.1417031232966652642.JavaMail.support.mn@elisanet.fi>
Message-ID: <77FCEE60-4DA1-41F4-9E01-E99D93060439@gmail.com>

Thank you Janne,
i'll try.
Claudio
On 26/gen/09, at 11:44, support.mn at elisanet.fi wrote:

> Hello,
>
> either you have to rotate it 90 degrees back - or swap y to x and x  
> to -y (or
> somthing similar, maybe add some false n and e values and experiment
> with signs).
>
> Regards Janne.
>
> -------------------
>
> Claudio Bisegni [cbisegni at gmail.com] kirjoitti:
>> Hi folk,
>> i use this init string found on google, to make the work in object:
>> +title= Google Mercator EPSG:900913  +proj=merc +a=6378137 +b=6378137
>> +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m  
>> +nadgrids=@null
>> +no_defs
>> It's work well except that the graf is rotated of 90° clockwise.
>> Any one has na idea? I'm new to proj..
>> Thanks in advanced.
>>
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From warmerdam at pobox.com  Mon Jan 26 08:39:13 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 26 Jan 2009 11:39:13 -0500
Subject: [Proj] Lat-Lon values under different ellipsoides
In-Reply-To: <497D9663.2040900@uva.nl>
References: <786764.69535.qm@web110015.mail.gq1.yahoo.com>
	<200901141204.33985.geraldi.evenden@gmail.com>
	<497D9663.2040900@uva.nl>
Message-ID: <497DE731.2050206@pobox.com>

Jan Hartmann wrote:
> Hi,
> 
> This is something I have long been banging my head against. I think it 
> is a bug, but I am not sure. If I take a lat-lon value, computed on a 
> particular ellipsoid, and convert it to the lat-lon value on another 
> ellipsoid, I should get a different value, right? (e.g. cs2cs 
> +proj=longlat +ellps=bessel +to +proj=longlat +ellps=WGS84). PROJ4 
> always gives the same value, but I have an extensive list of coordinates 
> of church towers in the Netherlands with their lat-lon values in 1850, 
> based an a slightly smaller ellipsoid than we use nowadays, and the 
> lat-lon of the same towers derived from our modern RD-system, based on 
> the Bessel-ellipsoid, and without the WGS84 correction. There is a 
> systematic difference of about 50 meters. If I do the same computation 
> with the projected coordinates, I get the correct answer. Moreover, in 
> that case the transformation changes when I change the 
> ellipse-parameter, something that does not happen with lat-lon coordinates.
> 
> So, is this a bug in PROJ? If so, can someone with geodetic experience 
> here explain to me how people can get different lat-lon values for the 
> same point, based on astronomical measurements?

Jan,

As of PROJ 4.6.0, the policy is to not attempt any conversion of lat/long
values between coordinate systems where only an ellipsoid is given.  So, to
get a datum shift it is now necessary to provide some sort of datum
shift information for both the source and destination coordinate systems.

This is a deliberate change of policy to avoid lots of other complaints in
the past.

I would suggest using something appropriate like +datum=potsdam for your
Bessel data, and +datum=WGS84 instead of +ellps=WGS84.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dagnew at ucsd.edu  Mon Jan 26 10:21:59 2009
From: dagnew at ucsd.edu (Duncan Agnew)
Date: Mon, 26 Jan 2009 10:21:59 -0800
Subject: [Proj] Lat-Lon values under different ellipsoides
In-Reply-To: <497D9663.2040900@uva.nl>
References: <786764.69535.qm@web110015.mail.gq1.yahoo.com>
	<200901141204.33985.geraldi.evenden@gmail.com>
	<497D9663.2040900@uva.nl>
Message-ID: <546fb4680fb90e09f1aff5e20441a539@ucsd.edu>

Jan:

         I would say that it is better not to have a different ellipsoid
change the ellipsoidal coordinates (which is what lat/long are).

         It may also be that you are looking at the difference betweeen
astronomical latitude and geodetic. The latter is what you get if the
reference for the local vertical is the normal to the ellipsoid; the
former, easier to do, assumes the local vertical is the direction of the
plumb line. The difference is the deflection of the vertical, which 
depends
on the slope of the geoid: I don't know what this is for the 
Netherlands.
It is quite possible that the 1850 values are astronomical: you'd need 
an
expert on local geodetic history to find out

Duncan Agnew



From j.l.h.hartmann at uva.nl  Tue Jan 27 03:45:56 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue, 27 Jan 2009 12:45:56 +0100
Subject: [Proj] Lat-Lon values under different ellipsoides
In-Reply-To: <546fb4680fb90e09f1aff5e20441a539@ucsd.edu>
References: <786764.69535.qm@web110015.mail.gq1.yahoo.com>	<200901141204.33985.geraldi.evenden@gmail.com>	<497D9663.2040900@uva.nl>
	<546fb4680fb90e09f1aff5e20441a539@ucsd.edu>
Message-ID: <497EF3F4.2020806@uva.nl>

Thanks Duncan, that is an excellent suggestion. There is a book about 
the geoid in the Netherlands 
(http://www.ncg.knaw.nl/eng/publications/Green/34DeMin.html) and I'll 
try to contact the author.

Even so, my question remains: how can different ellipsoids produce 
different lat-lon coordinates? Different datums certainly do: the same 
point in the Netherlands has a different lat-lon value for the WGS84 
datum than for the older Bessel ellipsoid. I would really appreciate if 
someone explained how those lat-lon values are derived for a specific 
ellipsoid.

Jan

Duncan Agnew wrote:
> Jan:
>
>          I would say that it is better not to have a different ellipsoid
> change the ellipsoidal coordinates (which is what lat/long are).
>
>          It may also be that you are looking at the difference betweeen
> astronomical latitude and geodetic. The latter is what you get if the
> reference for the local vertical is the normal to the ellipsoid; the
> former, easier to do, assumes the local vertical is the direction of the
> plumb line. The difference is the deflection of the vertical, which 
> depends
> on the slope of the geoid: I don't know what this is for the 
> Netherlands.
> It is quite possible that the 1850 values are astronomical: you'd need 
> an
> expert on local geodetic history to find out
>
> Duncan Agnew
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
>   


From michael.hovenbitzer at bkg.bund.de  Tue Jan 27 04:46:58 2009
From: michael.hovenbitzer at bkg.bund.de (michael.hovenbitzer at bkg.bund.de)
Date: Tue, 27 Jan 2009 13:46:58 +0100
Subject: [Proj] Memory leaks using proj.4 DLL
Message-ID: <371BE82A03680E4087F343D5C9883D8D01A328E7@FS029EXCH.bkg>

Hello List,

I would like to use Proj.4 in a MFC-VisualC-Program (VC++6)
to transform coordinates with the NTv2-method.
Using the newest source of proj4.6.1 I build the proj.dll
and so on. The compilation and linking of my software
went quite well (with only a few problems solved in your list).
But when I start my software I got memory leaks !
Testing the DLL with only one button I could discover that
the DLL is working correct (the transfromed point had the
right coordinates). Using all GUI-Features the transformed
coordinates are wrong, because of memory leaks (the name
of the shift file is seemingly overwritten).

Maybe someone has had a similar problem and can help me
solving my problem.

Thank you in advance !

Best regards

Michael

Federal Agency for Cartography and Geodesy (BKG)
Frankfurt, Germany

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090127/c096ec0d/attachment.html>

From j.l.h.hartmann at uva.nl  Tue Jan 27 04:55:59 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue, 27 Jan 2009 13:55:59 +0100
Subject: [Proj] Lat-Lon values under different ellipsoides
In-Reply-To: <497DE731.2050206@pobox.com>
References: <786764.69535.qm@web110015.mail.gq1.yahoo.com>	<200901141204.33985.geraldi.evenden@gmail.com>	<497D9663.2040900@uva.nl>
	<497DE731.2050206@pobox.com>
Message-ID: <497F045F.3010004@uva.nl>

Yes, this works, thanks Frank. I added the same datum definition to both 
input and output proj definitions, and now the transformation is 
correct. One very minor point: if I add the Datums in the form 
+proj=longlat +datum=WGS84 +ellps= ...  +to +proj=longlat +datum=WGS84 
+ellps=..., no ellipse transformation is computed. If I add the 
definitions in the form of a +towgs84 string (the same for both 
projections),  the ellipses are computed correctly. There is probably 
some if-statement somewhere that skips the datum (and ellipse!) 
computation when both datums are the same. Would it be possible to 
remove that if-statement when ellipse-parameters are also given?

Jan

Frank Warmerdam wrote:
> Jan Hartmann wrote:
>   
>> Hi,
>>
>> This is something I have long been banging my head against. I think it 
>> is a bug, but I am not sure. If I take a lat-lon value, computed on a 
>> particular ellipsoid, and convert it to the lat-lon value on another 
>> ellipsoid, I should get a different value, right? (e.g. cs2cs 
>> +proj=longlat +ellps=bessel +to +proj=longlat +ellps=WGS84). PROJ4 
>> always gives the same value, but I have an extensive list of coordinates 
>> of church towers in the Netherlands with their lat-lon values in 1850, 
>> based an a slightly smaller ellipsoid than we use nowadays, and the 
>> lat-lon of the same towers derived from our modern RD-system, based on 
>> the Bessel-ellipsoid, and without the WGS84 correction. There is a 
>> systematic difference of about 50 meters. If I do the same computation 
>> with the projected coordinates, I get the correct answer. Moreover, in 
>> that case the transformation changes when I change the 
>> ellipse-parameter, something that does not happen with lat-lon coordinates.
>>
>> So, is this a bug in PROJ? If so, can someone with geodetic experience 
>> here explain to me how people can get different lat-lon values for the 
>> same point, based on astronomical measurements?
>>     
>
> Jan,
>
> As of PROJ 4.6.0, the policy is to not attempt any conversion of lat/long
> values between coordinate systems where only an ellipsoid is given.  So, to
> get a datum shift it is now necessary to provide some sort of datum
> shift information for both the source and destination coordinate systems.
>
> This is a deliberate change of policy to avoid lots of other complaints in
> the past.
>
> I would suggest using something appropriate like +datum=potsdam for your
> Bessel data, and +datum=WGS84 instead of +ellps=WGS84.
>
> Best regards,
>   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090127/5fcaf815/attachment.html>

From warmerdam at pobox.com  Tue Jan 27 07:41:20 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 27 Jan 2009 10:41:20 -0500
Subject: [Proj] Lat-Lon values under different ellipsoides
In-Reply-To: <497F045F.3010004@uva.nl>
References: <786764.69535.qm@web110015.mail.gq1.yahoo.com>
	<200901141204.33985.geraldi.evenden@gmail.com>	<497D9663.2040900@uva.nl>
	<497DE731.2050206@pobox.com> <497F045F.3010004@uva.nl>
Message-ID: <497F2B20.8030701@pobox.com>

Jan Hartmann wrote:
> Yes, this works, thanks Frank. I added the same datum definition to both 
> input and output proj definitions, and now the transformation is 
> correct. One very minor point: if I add the Datums in the form 
> +proj=longlat +datum=WGS84 +ellps= ...  +to +proj=longlat +datum=WGS84 
> +ellps=..., no ellipse transformation is computed. If I add the 
> definitions in the form of a +towgs84 string (the same for both 
> projections),  the ellipses are computed correctly. There is probably 
> some if-statement somewhere that skips the datum (and ellipse!) 
> computation when both datums are the same. Would it be possible to 
> remove that if-statement when ellipse-parameters are also given?

Jan,

It is not meaningful to use +datum=WGS84 and an ellipse setting that is
not WGS84.  The +datum=WGS84 expands internally into
+towgs84=0,0,0 +ellps=WGS84 so your declaration will end up with two ellipse
settings and which one gets selected will depend on order - a rather unstable
situation!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From j.l.h.hartmann at uva.nl  Tue Jan 27 07:45:41 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue, 27 Jan 2009 16:45:41 +0100
Subject: [Proj] Lat-Lon values under different ellipsoides
In-Reply-To: <497F2B20.8030701@pobox.com>
References: <786764.69535.qm@web110015.mail.gq1.yahoo.com>	<200901141204.33985.geraldi.evenden@gmail.com>	<497D9663.2040900@uva.nl>	<497DE731.2050206@pobox.com>
	<497F045F.3010004@uva.nl> <497F2B20.8030701@pobox.com>
Message-ID: <497F2C25.20609@uva.nl>



Frank Warmerdam wrote:
> Jan,
>
> It is not meaningful to use +datum=WGS84 and an ellipse setting that is
> not WGS84.  The +datum=WGS84 expands internally into
> +towgs84=0,0,0 +ellps=WGS84 so your declaration will end up with two ellipse
> settings and which one gets selected will depend on order - a rather unstable
> situation!
>
> Best regards,
>   

OK, I understand. I find the semantics of ellipses and datums in PROJ a 
bit confusing, but I understand how they came about and can work with 
them now.

Jan


From warmerdam at pobox.com  Tue Jan 27 07:51:37 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 27 Jan 2009 10:51:37 -0500
Subject: [Proj] Memory leaks using proj.4 DLL
In-Reply-To: <371BE82A03680E4087F343D5C9883D8D01A328E7@FS029EXCH.bkg>
References: <371BE82A03680E4087F343D5C9883D8D01A328E7@FS029EXCH.bkg>
Message-ID: <497F2D89.9020207@pobox.com>

michael.hovenbitzer at bkg.bund.de wrote:
> Hello List,
> 
> I would like to use Proj.4 in a MFC-VisualC-Program (VC++6)
> 
> to transform coordinates with the NTv2-method.
> 
> Using the newest source of proj4.6.1 I build the proj.dll
> 
> and so on. The compilation and linking of my software
> 
> went quite well (with only a few problems solved in your list).
> 
> But when I start my software I got memory leaks !
> 
> Testing the DLL with only one button I could discover that
> 
> the DLL is working correct (the transfromed point had the
> 
> right coordinates). Using all GUI-Features the transformed
> 
> coordinates are wrong, because of memory leaks (the name
> 
> of the shift file is seemingly overwritten).
> 
> Maybe someone has had a similar problem and can help me
> 
> solving my problem.

Michael,

I tried the following command with one test point under valgrind
and it did not seem to indicate any memory leaks:

   cs2cs +proj=latlong +datum=NAD27 +to +proj=latlong +datum=NAD83

This did load and use the conus grid shift file.  I also tried a
point using the New Zealand NTv2 grid shift file.  Also no report of
problems.

Could you be more specific about how you have determined there is a leak?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From michael.hovenbitzer at bkg.bund.de  Wed Jan 28 04:24:15 2009
From: michael.hovenbitzer at bkg.bund.de (michael.hovenbitzer at bkg.bund.de)
Date: Wed, 28 Jan 2009 13:24:15 +0100
Subject: [Proj] Memory leaks using proj.4 DLL
In-Reply-To: <497F2D89.9020207@pobox.com>
References: <371BE82A03680E4087F343D5C9883D8D01A328E7@FS029EXCH.bkg>
	<497F2D89.9020207@pobox.com>
Message-ID: <371BE82A03680E4087F343D5C9883D8D01A328EC@FS029EXCH.bkg>

Frank,

first of all I would like to point out, that I use the proj.dll
in my own MFC-VisualC-Program. The call of the functions pj_init_plus()
and pj_transform() result in memory leaks:

static const char *pgk2 = "+proj=tmerc +lat_0=0 +lon_0=6 +k=1.000000
+x_0=2500000 +y_0=0 +ellps=bessel +nadgrids=./BETA2007.gsb +units=m +no defs" ;
quellsys = pj_init_plus(pgk2) ;
static const char *put32 = "+proj=utm +ellps=GRS80 +datum=WGS84 +zone=32" ;
zielsys = pj_init_plus(put32) ;
.....
pj_transform (quellsys, zielsys, 1, 0, &r, &h, &z) ;
.....

The following log of the debug mode appear :
....
Detected memory leaks!
Dumping objects ->
{154} normal block at 0x00463BA0, 15 bytes long.
 Data: <./BETA2007.gsb > 2E 2F 42 45 54 41 32 30 30 37 2E 67 73 62 00 
{153} .....

The DLL is working, but in most cases the coordinates
are wrong. 
I would be very happy, if the problem could be solved.

Best regards

Michael


-----Ursprüngliche Nachricht-----
Von: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] Im Auftrag von Frank Warmerdam
Gesendet: Dienstag, 27. Januar 2009 16:52
An: PROJ.4 and general Projections Discussions
Betreff: Re: [Proj] Memory leaks using proj.4 DLL

michael.hovenbitzer at bkg.bund.de wrote:
> Hello List,
> 
> I would like to use Proj.4 in a MFC-VisualC-Program (VC++6)
> 
> to transform coordinates with the NTv2-method.
> 
> Using the newest source of proj4.6.1 I build the proj.dll
> 
> and so on. The compilation and linking of my software
> 
> went quite well (with only a few problems solved in your list).
> 
> But when I start my software I got memory leaks !
> 
> Testing the DLL with only one button I could discover that
> 
> the DLL is working correct (the transfromed point had the
> 
> right coordinates). Using all GUI-Features the transformed
> 
> coordinates are wrong, because of memory leaks (the name
> 
> of the shift file is seemingly overwritten).
> 
> Maybe someone has had a similar problem and can help me
> 
> solving my problem.

Michael,

I tried the following command with one test point under valgrind
and it did not seem to indicate any memory leaks:

   cs2cs +proj=latlong +datum=NAD27 +to +proj=latlong +datum=NAD83

This did load and use the conus grid shift file.  I also tried a
point using the New Zealand NTv2 grid shift file.  Also no report of
problems.

Could you be more specific about how you have determined there is a leak?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From warmerdam at pobox.com  Wed Jan 28 06:24:29 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 28 Jan 2009 09:24:29 -0500
Subject: [Proj] Memory leaks using proj.4 DLL
In-Reply-To: <371BE82A03680E4087F343D5C9883D8D01A328EC@FS029EXCH.bkg>
References: <371BE82A03680E4087F343D5C9883D8D01A328E7@FS029EXCH.bkg>
	<497F2D89.9020207@pobox.com>
	<371BE82A03680E4087F343D5C9883D8D01A328EC@FS029EXCH.bkg>
Message-ID: <49806A9D.3060808@pobox.com>

michael.hovenbitzer at bkg.bund.de wrote:
> Frank,
> 
> first of all I would like to point out, that I use the proj.dll
> in my own MFC-VisualC-Program. The call of the functions pj_init_plus()
> and pj_transform() result in memory leaks:
> 
> static const char *pgk2 = "+proj=tmerc +lat_0=0 +lon_0=6 +k=1.000000
> +x_0=2500000 +y_0=0 +ellps=bessel +nadgrids=./BETA2007.gsb +units=m +no defs" ;
> quellsys = pj_init_plus(pgk2) ;
> static const char *put32 = "+proj=utm +ellps=GRS80 +datum=WGS84 +zone=32" ;
> zielsys = pj_init_plus(put32) ;
> .....
> pj_transform (quellsys, zielsys, 1, 0, &r, &h, &z) ;
> .....
> 
> The following log of the debug mode appear :
> ....
> Detected memory leaks!
> Dumping objects ->
> {154} normal block at 0x00463BA0, 15 bytes long.
>  Data: <./BETA2007.gsb > 2E 2F 42 45 54 41 32 30 30 37 2E 67 73 62 00 
> {153} .....

Michael,

Are you calling pj_free() on all definitions created with pj_init_plus()?
Are you calling pj_deallocate_grids() before program termination?

> The DLL is working, but in most cases the coordinates
> are wrong. 
> I would be very happy, if the problem could be solved.

I'm not familiar with BETA2007.gsb, nor your coordinate systems.  Generally
it does not make sense to specify datum=WGS84 with an ellipse other than WGS84.

Perhaps you could specify what values you pass in, what values you expect,
what values you get, what your coordinate system definitions are,and why you
think they are appropriate (ie. references to the coordinate systems you are
trying to represent).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From neteler at osgeo.org  Thu Jan 29 03:21:29 2009
From: neteler at osgeo.org (Markus Neteler)
Date: Thu, 29 Jan 2009 12:21:29 +0100
Subject: [Proj] Contribution: proj.dox and Doxyfile
Message-ID: <86782b610901290321r39837a72m93cc78f20d8d07f5@mail.gmail.com>

Hi,

to easier navigate in the PROJ4 code (using doxygen), I have created the
required proj.dox and Doxyfile files for upload into SVN (see attachments of
trac ticket: <http://trac.osgeo.org/proj/ticket/26>).

Best,
Markus

--
Markus Neteler
Fondazione Mach - Centro Ricerca e Innovazione
38100 Viote del Monte Bondone (Trento),  Italy
Web:  http://gis.fem-environment.eu/


From jhollingsworth at houston.oilfield.slb.com  Thu Jan 29 06:22:08 2009
From: jhollingsworth at houston.oilfield.slb.com (Jay Hollingsworth)
Date: Thu, 29 Jan 2009 08:22:08 -0600
Subject: [Proj] Update to GoogleEarth
Message-ID: <0KE800B2ML8X2I70@gb0135mbx01.mail.slb.com>

For those people who may not have heard, GoogleEarth is coming out 
with a major new release on Monday.

I tried to prowl around and see if they made mention of changing 
GoogleEarth's geodetic underpinnings but I didn't see any.

http://blogs.zdnet.com/Google/?p=1237&tag=nl.e550

which references the announcement from April at

http://news.cnet.com/8301-10784_3-9931412-7.html




Jay Hollingsworth

Seabed Portfolio Manager and
Principal Data Architect
Schlumberger Information Solutions
phone: 713 513 8854 fax: 713 513 2093



From ckarney at sarnoff.com  Thu Jan 29 19:14:53 2009
From: ckarney at sarnoff.com (Charles Karney)
Date: Thu, 29 Jan 2009 22:14:53 -0500
Subject: [Proj] Implementation of ECEF to geodetic coords (closed form
	solution)
Message-ID: <ssrvdrx4h8y.fsf@petrel.petrel.org>

I've updated GeographicLib to include ECEF and local Cartesian
coordinates.  Grab it at

    http://charles.karney.info/geographic

This includes a utility ECEFConvert to convert between geodetic and ECEF
or local Cartesian coordinates.

The conversion from ECEF to geodetic coordinates follows

    H. Vermeille, Direct transformation from geocentric coordinates to
    geodetic coordinates, J. Geodesy 76, 451-454 (2002).

However, I have extended the method to ensure that it works close to the
center of the ellipsoid.  I believe that the accuracy is close to the
round-off limit for all inputs.

I also investigated

    T. Fukushima, Fast transform from geocentric to geodetic
    coordinates, J. Geodesy 73, 603-610 (2003)

which also works close to the center of the earth.  However, due to the
choice of independent variable, the accuracy is substantially poorer for
points close to the equatorial plane.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Thu Jan 29 19:21:59 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 29 Jan 2009 22:21:59 -0500
Subject: [Proj] Implementation of ECEF to geodetic coords (closed form
	solution)
In-Reply-To: <ssrvdrx4h8y.fsf@petrel.petrel.org>
References: <ssrvdrx4h8y.fsf@petrel.petrel.org>
Message-ID: <200901292222.00113.geraldi.evenden@gmail.com>

On Thursday 29 January 2009 22:14:53 Charles Karney wrote:
> I've updated GeographicLib to include ECEF and local Cartesian
	...
> However, I have extended the method to ensure that it works close to the
> center of the ellipsoid.  I believe that the accuracy is close to the
> round-off limit for all inputs.

What do you mean by "close to the center of the ellipsoid"?
...
-- 
All Gods were immortal.
Stanislaw Jerzy Lec (1909-1966), Polish aphorist.


From ckarney at Sarnoff.com  Thu Jan 29 19:30:57 2009
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Thu, 29 Jan 2009 22:30:57 -0500
Subject: [Proj] Implementation of ECEF to geodetic coords (closed form
 solution)
In-Reply-To: <200901292222.00113.geraldi.evenden@gmail.com>
References: <ssrvdrx4h8y.fsf@petrel.petrel.org>,
	<200901292222.00113.geraldi.evenden@gmail.com>
Message-ID: <91F640D26AB8E54982706321A514CA263A80F60E0E@MALIBU.sarnoff.internal>

> From: Gerald I. Evenden [geraldi.evenden at gmail.com]
> Data: Thursday, January 29, 2009 22:21
>
> On Thursday 29 January 2009 22:14:53 Charles Karney wrote:
>
> > However, I have extended the method to ensure that it works close to
> > the center of the ellipsoid.  I believe that the accuracy is close
> > to the round-off limit for all inputs.
>
> What do you mean by "close to the center of the ellipsoid"?

    sqrt(x^2 + y^2 + z^2) <= a * e^2 / sqrt(1 - e^2)

(Vermeille's method breaks down in this sphere.)  This includes the
singularily of the transformation which is on the circle

    z = 0
    sqrt(x^2 + y^2) = a * e^2

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From vanzach at survey.ntua.gr  Fri Jan 30 04:12:27 2009
From: vanzach at survey.ntua.gr (vanzach at survey.ntua.gr)
Date: Fri, 30 Jan 2009 12:12:27 -0000
Subject: [Proj] bug in cs2cs or what?
Message-ID: <200901301212.n0UCCR10038353@ulysses.noc.ntua.gr>


Hi all.

I'm trying to convert 3 points from WGS84 to local datum and I noticed that
during the datum change phase the coordinates are the same.

$ cs2cs -f "%.4f" +ellps=WGS84 +proj=geocent +to +towgs84=-199.0,74.0,246.0
+ellps=GRS80 +proj=geocent < WGS84_XYZ.txt ; more WGS84_XYZ.txt 
4587235.7556	1964114.8816 3959354.7313
4584814.5890	1951028.4660 3968408.6021
4589128.8900	1935365.8050 3971034.4841
4587235.7556	1964114.8816	3959354.7312
4584814.589	1951028.466	3968408.602
4589128.890	1935365.805	3971034.484

Any ideas?
Thanks in advance,
Vangelis



From jagoncal at gmail.com  Fri Jan 30 04:24:56 2009
From: jagoncal at gmail.com (=?ISO-8859-1?Q?Jose_Gon=E7alves?=)
Date: Fri, 30 Jan 2009 12:24:56 +0000
Subject: [Proj] bug in cs2cs or what?
In-Reply-To: <200901301212.n0UCCR10038353@ulysses.noc.ntua.gr>
References: <200901301212.n0UCCR10038353@ulysses.noc.ntua.gr>
Message-ID: <6a91fcb00901300424j14895dc6l57c1cbc4be3d3cf@mail.gmail.com>

The problem is that your first coordinate system does not have a datum
information. Use for instance:

cs2cs -f "%.4f" +ellps=WGS84 +proj=geocent +towgs84=0,0,0 +to ......

or

cs2cs -f "%.4f" +datum=WGS84 +proj=geocent +to ......

Regards

Jose' Gonçalves



2009/1/30 <vanzach at survey.ntua.gr>

>
> Hi all.
>
> I'm trying to convert 3 points from WGS84 to local datum and I noticed that
> during the datum change phase the coordinates are the same.
>
> $ cs2cs -f "%.4f" +ellps=WGS84 +proj=geocent +to +towgs84=-199.0,74.0,246.0
> +ellps=GRS80 +proj=geocent < WGS84_XYZ.txt ; more WGS84_XYZ.txt
> 4587235.7556    1964114.8816 3959354.7313
> 4584814.5890    1951028.4660 3968408.6021
> 4589128.8900    1935365.8050 3971034.4841
> 4587235.7556    1964114.8816    3959354.7312
> 4584814.589     1951028.466     3968408.602
> 4589128.890     1935365.805     3971034.484
>
> Any ideas?
> Thanks in advance,
> Vangelis
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090130/aa7726e7/attachment.html>

From gdt at ir.bbn.com  Fri Jan 30 04:28:06 2009
From: gdt at ir.bbn.com (Greg Troxel)
Date: Fri, 30 Jan 2009 07:28:06 -0500
Subject: [Proj] bug in cs2cs or what?
In-Reply-To: <200901301212.n0UCCR10038353@ulysses.noc.ntua.gr>
	(vanzach@survey.ntua.gr's message of "Fri, 30 Jan 2009 12:12:27
	-0000")
References: <200901301212.n0UCCR10038353@ulysses.noc.ntua.gr>
Message-ID: <rmivdrxgeqx.fsf@fnord.ir.bbn.com>


  I'm trying to convert 3 points from WGS84 to local datum and I noticed that
  during the datum change phase the coordinates are the same.

  $ cs2cs -f "%.4f" +ellps=WGS84 +proj=geocent +to +towgs84=-199.0,74.0,246.0
  +ellps=GRS80 +proj=geocent < WGS84_XYZ.txt ; more WGS84_XYZ.txt 

Try datum=WGS84 instead of ellps.  proj no longer does datum conversions
for the case of two ellipsoids, not sure about this case.  I wonder if
proj should error out if given towgs84 and and ellipsoid, if this is
really what's going on.




From geraldi.evenden at gmail.com  Fri Jan 30 11:30:28 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Fri, 30 Jan 2009 14:30:28 -0500
Subject: [Proj] The world of ECEF aka geocentric coordinates
Message-ID: <200901301430.28664.geraldi.evenden@gmail.com>

When I was updating the code for the 'geodesic' system I ran into the 
geocentric to geodesic conversion software embedded in the 3D version of the 
Vincenty FORTRAN code.  Although not a part of the geodesic program I figured 
it may be of interest later so I translated in an included it in the geodesic 
distribution library.  Knowing the the procedures also had to be part of 
Warmerdam's proj-4 I quickly checked there and decided the stay with the NGS 
version.  At that time I miss the fact of presence of two other versions.

Later, while browsing Wikipedia I also found another non-iterative version.

When Karney recently brought up the issue I went to his library site and find 
another version.

To summarize: I now have 6, count them, 6 versions of the geocentric to 
geodetic conversion:

1. An iterative version that is part of NGS's geodesic software

Frank Warmerdam's three methods in pj_Convert_Geocentric_To_Geodetic
of file geocent.c:
2. "non-iterative by Ralph Toms"
  or iterative methods
3. "Wenzel iterative"
4. "U. of Hannover" method

5. Karney's cpp routine.

6. Wikipedia's noniterative at
http://en.wikipedia.org/wiki/Geodetic_system
No code, just math.

In terms of the iteration, the NGS version loop is short---only 4 lines and 
works with usually 3 or less iterations with excellent precision.
do {
        tglax = tgla;
        tgla = P1->z / (p - ae2 / sqrt(ell->one_es * tgla * tgla + 1.));
} while ((fabs(tgla - tglax) > TOL) && --count);

Karney's routine is limited to WGS84 as is all the software in his library.  
10 lashes with a wet noodle, Karney.

Some of these methods may be equivalent but I have not dug that far into the 
details of the morass.  I am also sure that there must be more versions out 
there.

Lastly, the use of the term ECEF suggested by Wikipedia for geocentric seems 
appropriate.  Also, where are our ENU procedures?  Tsk, tsk.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at Sarnoff.com  Fri Jan 30 13:10:33 2009
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Fri, 30 Jan 2009 16:10:33 -0500
Subject: [Proj] The world of ECEF aka geocentric coordinates
In-Reply-To: <200901301430.28664.geraldi.evenden@gmail.com>
References: <200901301430.28664.geraldi.evenden@gmail.com>
Message-ID: <91F640D26AB8E54982706321A514CA263A80F60E18@MALIBU.sarnoff.internal>

> From: Gerald I. Evenden [geraldi.evenden at gmail.com]
> Sent: Friday, January 30, 2009 14:30
>
> Karney's routine is limited to WGS84 as is all the software in his
> library.  10 lashes with a wet noodle, Karney.

"Up to a point, Lord Copper."  The simple ECEFConvert utility I provide
(merely to illustrate the code) is limited to WGS84.  The constructor
for ECEF class allows you to specify the ellipsoid.

> Some of these methods may be equivalent but I have not dug that far
> into the details of the morass.  I am also sure that there must be
> more versions out there.

There do seem to be an embarrassing number of published papers on a
mathematically trivial topic.  Of course, provided that the methods are
correct, they must me equivalent (in a mathematical sense).

The biggest differentiator, in my book, is the domain of applicability.
Many of the methods (direct or iterative) exclude the center of the
earth (and I think some also exclude very distant points).  This is
entirely appropriate for GPS units, but seems to be an unnecessary
restriction for a general-purpose library.

Incidentally, many simple iteration schemes (such as the NGS method, I
believe) just have linear convergence.  Some iterative schemes are
amenable to Newton's method with much faster (quadratic) convergence.
Presented with such a choice, I would normally go for a slightly more
complicated iteration which converges faster.

Vermeille's method is a relatively simple direct method.  It breaks down
near the center of the earth.  But fixing this was straightforward.
Finally, I had to make several fixes to avoid loss of accuracy due to
round-off.  The errors I am getting (7 nm) are within spitting distance
of the round-off limit (10^7 / 2^53 m = 1.1 nm).

Incidentally benchmarking ECEF methods for accuracy is easy because the
geodetic to ECEF transformation is stable and, if carried out with long
doubles, accurate.  This can be used to generate test data for the
reverse transformation.  When probing points near the center of the
earth you need to ensure that

    h >= - a (1 - e^2) / sqrt(1 - e^2 sin(phi)^2)

so that the ECEF point is in the same hemisphere as phi.

> Lastly, the use of the term ECEF suggested by Wikipedia for geocentric
> seems appropriate.  Also, where are our ENU procedures?  Tsk, tsk.

ENU is what I call "local Cartesian" (implemented by the LocalCartesian
class -- and this, I confess, does have WGS84 wired in).

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From cjmce at lsu.edu  Fri Jan 30 15:01:49 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 30 Jan 2009 17:01:49 -0600
Subject: [Proj] The world of ECEF aka geocentric coordinates
References: <200901301430.28664.geraldi.evenden@gmail.com>
	<91F640D26AB8E54982706321A514CA263A80F60E18@MALIBU.sarnoff.internal>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC25D4@email002.lsu.edu>

I personally find the Wiki stuff useless and misleading.  The proper reference is Bomford's Geodesy (Editions 1 thru 4), and not the other trivia listed at the end.  The term ECEF is new-age baloney.  The Geocentric Coordinate System is the original and decades-old terminology recognized in the classical literature.  The notation used in the Wiki equations is just more gobbledygook, as Bomford established the proper (and world-wide recognized) notation about 50 years ago.  As if Wiki is entitled to ignore (?) the ellipsoid normal terminated by the semi-minor axis?  The term "spheroid" is further glaring evidence of classical geodetic ignorance.  That noun is only used with an ellipsoid that has a specific datum with an associated geoid.  Applicable to OSGB36 and WGS84, but certainly not to most classical datums found throughout the world.
 
C. Mugnier
LSU

________________________________

From: proj-bounces at lists.maptools.org on behalf of Karney, Charles
Sent: Fri 30-Jan-09 15:10
To: geraldi.evenden at gmail.com; PROJ.4 andgeneral Projections Discussions
Subject: Re: [Proj] The world of ECEF aka geocentric coordinates



> From: Gerald I. Evenden [geraldi.evenden at gmail.com]
> Sent: Friday, January 30, 2009 14:30
>
> Karney's routine is limited to WGS84 as is all the software in his
> library.  10 lashes with a wet noodle, Karney.

"Up to a point, Lord Copper."  The simple ECEFConvert utility I provide
(merely to illustrate the code) is limited to WGS84.  The constructor
for ECEF class allows you to specify the ellipsoid.

> Some of these methods may be equivalent but I have not dug that far
> into the details of the morass.  I am also sure that there must be
> more versions out there.

There do seem to be an embarrassing number of published papers on a
mathematically trivial topic.  Of course, provided that the methods are
correct, they must me equivalent (in a mathematical sense).

The biggest differentiator, in my book, is the domain of applicability.
Many of the methods (direct or iterative) exclude the center of the
earth (and I think some also exclude very distant points).  This is
entirely appropriate for GPS units, but seems to be an unnecessary
restriction for a general-purpose library.

Incidentally, many simple iteration schemes (such as the NGS method, I
believe) just have linear convergence.  Some iterative schemes are
amenable to Newton's method with much faster (quadratic) convergence.
Presented with such a choice, I would normally go for a slightly more
complicated iteration which converges faster.

Vermeille's method is a relatively simple direct method.  It breaks down
near the center of the earth.  But fixing this was straightforward.
Finally, I had to make several fixes to avoid loss of accuracy due to
round-off.  The errors I am getting (7 nm) are within spitting distance
of the round-off limit (10^7 / 2^53 m = 1.1 nm).

Incidentally benchmarking ECEF methods for accuracy is easy because the
geodetic to ECEF transformation is stable and, if carried out with long
doubles, accurate.  This can be used to generate test data for the
reverse transformation.  When probing points near the center of the
earth you need to ensure that

    h >= - a (1 - e^2) / sqrt(1 - e^2 sin(phi)^2)

so that the ECEF point is in the same hemisphere as phi.

> Lastly, the use of the term ECEF suggested by Wikipedia for geocentric
> seems appropriate.  Also, where are our ENU procedures?  Tsk, tsk.

ENU is what I call "local Cartesian" (implemented by the LocalCartesian
class -- and this, I confess, does have WGS84 wired in).

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info <http://charles.karney.info/> 
Tel: +1 609 734 2312
Fax: +1 609 734 2662
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090130/196e8c40/attachment.html>

From ckarney at Sarnoff.com  Sat Jan 31 06:35:02 2009
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Sat, 31 Jan 2009 09:35:02 -0500
Subject: [Proj] The world of ECEF aka geocentric coordinates
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC25D4@email002.lsu.edu>
References: <200901301430.28664.geraldi.evenden@gmail.com>
	<91F640D26AB8E54982706321A514CA263A80F60E18@MALIBU.sarnoff.internal>,
	<B597ADFC46B67741B18EA6AA13613FF7EC25D4@email002.lsu.edu>
Message-ID: <91F640D26AB8E54982706321A514CA263A80F60E1E@MALIBU.sarnoff.internal>

> I personally find the Wiki stuff useless and misleading.  The proper
> reference is Bomford's Geodesy (Editions 1 thru 4), and not the
> other trivia listed at the end.  The term ECEF is new-age baloney.
> The Geocentric Coordinate System is the original and decades-old
> terminology recognized in the classical literature.  The notation
> used in the Wiki equations is just more gobbledygook, as Bomford
> established the proper (and world-wide recognized) notation about 50
> years ago.

The Wikipedia entry on "Geodetic system" is indeed weak.  The
inclusion of half-baked Matlab code is hardly encouraging.  In fact,
the version of the page before this was dropped in (on March 1, 2007)
seems OK.

On ECEF vs Geocentric: I welcome a return to original terminology
instead of having a multitude of names for the same thing.  I have the
Google version of Bomford (1952 edition).  Does he define "Geocentric
Coordinate System"?  (I couldn't find it there.)  If not, is there
another authoritative reference?

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Sat Jan 31 06:59:02 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sat, 31 Jan 2009 09:59:02 -0500
Subject: [Proj] The world of ECEF aka geocentric coordinates
In-Reply-To: <91F640D26AB8E54982706321A514CA263A80F60E1E@MALIBU.sarnoff.internal>
References: <200901301430.28664.geraldi.evenden@gmail.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC25D4@email002.lsu.edu>
	<91F640D26AB8E54982706321A514CA263A80F60E1E@MALIBU.sarnoff.internal>
Message-ID: <200901310959.02763.geraldi.evenden@gmail.com>

On Saturday 31 January 2009 9:35:02 am Karney, Charles wrote:
> > I personally find the Wiki stuff useless and misleading.  The proper
	...
> On ECEF vs Geocentric: I welcome a return to original terminology
> instead of having a multitude of names for the same thing.  I have the
> Google version of Bomford (1952 edition).  Does he define "Geocentric
> Coordinate System"?  (I couldn't find it there.)  If not, is there
> another authoritative reference?

In the 3rd, 1971, edition see page 593 where geocentric is discussed.  The 
conversion of geocentric to geodetic is simply dismissed as an iterative 
process.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ndzinn at comcast.net  Sat Jan 31 08:24:25 2009
From: ndzinn at comcast.net (Noel Zinn)
Date: Sat, 31 Jan 2009 10:24:25 -0600
Subject: [Proj] The world of ECEF aka geocentric coordinates
In-Reply-To: <200901310959.02763.geraldi.evenden@gmail.com>
References: <200901301430.28664.geraldi.evenden@gmail.com><B597ADFC46B67741B18EA6AA13613FF7EC25D4@email002.lsu.edu><91F640D26AB8E54982706321A514CA263A80F60E1E@MALIBU.sarnoff.internal>
	<200901310959.02763.geraldi.evenden@gmail.com>
Message-ID: <B2C313C85A824D3BBB95220F4F17B6B6@PowerSpec>

See Section 2.2 of Guidance Note 7-2 ("Coordinate Conversions and
Transformations including Formulas") available at www.epsg.org.

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Gerald I. Evenden
Sent: Saturday, January 31, 2009 8:59 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] The world of ECEF aka geocentric coordinates

On Saturday 31 January 2009 9:35:02 am Karney, Charles wrote:
> > I personally find the Wiki stuff useless and misleading.  The proper
	...
> On ECEF vs Geocentric: I welcome a return to original terminology
> instead of having a multitude of names for the same thing.  I have the
> Google version of Bomford (1952 edition).  Does he define "Geocentric
> Coordinate System"?  (I couldn't find it there.)  If not, is there
> another authoritative reference?

In the 3rd, 1971, edition see page 593 where geocentric is discussed.  The 
conversion of geocentric to geodetic is simply dismissed as an iterative 
process.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From cjmce at lsu.edu  Sat Jan 31 11:23:03 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Sat, 31 Jan 2009 13:23:03 -0600
Subject: [Proj] The world of ECEF aka geocentric coordinates
References: <200901301430.28664.geraldi.evenden@gmail.com><91F640D26AB8E54982706321A514CA263A80F60E18@MALIBU.sarnoff.internal>
	<B597ADFC46B67741B18EA6AA13613FF7EC25D4@email002.lsu.edu>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC25D5@email002.lsu.edu>

Correction.  Wrong Greek symbol.  It's not (?) ; it is (?).  The former is one of the components of the deflection of the vertical.  Remarkable what a good night's sleep will do ...

C. Mugnier
LSU
 
________________________________

From: proj-bounces at lists.maptools.org on behalf of Clifford J Mugnier
Sent: Fri 30-Jan-09 17:01
To: PROJ.4 and general Projections Discussions; geraldi.evenden at gmail.com; PROJ.4 andgeneral Projections Discussions
Subject: Re: [Proj] The world of ECEF aka geocentric coordinates


I personally find the Wiki stuff useless and misleading.  The proper reference is Bomford's Geodesy (Editions 1 thru 4), and not the other trivia listed at the end.  The term ECEF is new-age baloney.  The Geocentric Coordinate System is the original and decades-old terminology recognized in the classical literature.  The notation used in the Wiki equations is just more gobbledygook, as Bomford established the proper (and world-wide recognized) notation about 50 years ago.  As if Wiki is entitled to ignore (?) the ellipsoid normal terminated by the semi-minor axis?  The term "spheroid" is further glaring evidence of classical geodetic ignorance.  That noun is only used with an ellipsoid that has a specific datum with an associated geoid.  Applicable to OSGB36 and WGS84, but certainly not to most classical datums found throughout the world.
 
C. Mugnier
LSU

________________________________

From: proj-bounces at lists.maptools.org on behalf of Karney, Charles
Sent: Fri 30-Jan-09 15:10
To: geraldi.evenden at gmail.com; PROJ.4 andgeneral Projections Discussions
Subject: Re: [Proj] The world of ECEF aka geocentric coordinates



> From: Gerald I. Evenden [geraldi.evenden at gmail.com]
> Sent: Friday, January 30, 2009 14:30
>
> Karney's routine is limited to WGS84 as is all the software in his
> library.  10 lashes with a wet noodle, Karney.

"Up to a point, Lord Copper."  The simple ECEFConvert utility I provide
(merely to illustrate the code) is limited to WGS84.  The constructor
for ECEF class allows you to specify the ellipsoid.

> Some of these methods may be equivalent but I have not dug that far
> into the details of the morass.  I am also sure that there must be
> more versions out there.

There do seem to be an embarrassing number of published papers on a
mathematically trivial topic.  Of course, provided that the methods are
correct, they must me equivalent (in a mathematical sense).

The biggest differentiator, in my book, is the domain of applicability.
Many of the methods (direct or iterative) exclude the center of the
earth (and I think some also exclude very distant points).  This is
entirely appropriate for GPS units, but seems to be an unnecessary
restriction for a general-purpose library.

Incidentally, many simple iteration schemes (such as the NGS method, I
believe) just have linear convergence.  Some iterative schemes are
amenable to Newton's method with much faster (quadratic) convergence.
Presented with such a choice, I would normally go for a slightly more
complicated iteration which converges faster.

Vermeille's method is a relatively simple direct method.  It breaks down
near the center of the earth.  But fixing this was straightforward.
Finally, I had to make several fixes to avoid loss of accuracy due to
round-off.  The errors I am getting (7 nm) are within spitting distance
of the round-off limit (10^7 / 2^53 m = 1.1 nm).

Incidentally benchmarking ECEF methods for accuracy is easy because the
geodetic to ECEF transformation is stable and, if carried out with long
doubles, accurate.  This can be used to generate test data for the
reverse transformation.  When probing points near the center of the
earth you need to ensure that

    h >= - a (1 - e^2) / sqrt(1 - e^2 sin(phi)^2)

so that the ECEF point is in the same hemisphere as phi.

> Lastly, the use of the term ECEF suggested by Wikipedia for geocentric
> seems appropriate.  Also, where are our ENU procedures?  Tsk, tsk.

ENU is what I call "local Cartesian" (implemented by the LocalCartesian
class -- and this, I confess, does have WGS84 wired in).

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info <http://charles.karney.info/> 
Tel: +1 609 734 2312
Fax: +1 609 734 2662
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090131/0ca4b621/attachment.html>

From dagnew at ucsd.edu  Sat Jan 31 14:36:29 2009
From: dagnew at ucsd.edu (Duncan Agnew)
Date: Sat, 31 Jan 2009 14:36:29 -0800
Subject: [Proj] The world of ECEF aka geocentric coordinates
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC25D5@email002.lsu.edu>
References: <200901301430.28664.geraldi.evenden@gmail.com><91F640D26AB8E54982706321A514CA263A80F60E18@MALIBU.sarnoff.internal>
	<B597ADFC46B67741B18EA6AA13613FF7EC25D4@email002.lsu.edu>
	<B597ADFC46B67741B18EA6AA13613FF7EC25D5@email002.lsu.edu>
Message-ID: <a715f8cbcffbf42e3016654a2e80b851@ucsd.edu>

Bomford 4th edition, Appendix C gives the iterative formula, along with 
Bowring's approximation (adequate
on the Earth's surface). Pace Cliff, he uses "spheroid" for the generic 
surface, but restricted to flattened
ellipsoids rather than elongated ones (definition in Appendix A).

ECEF has meaning as a reference frame--Earth Centered Earth Fixed--but 
has no bearing on the types of coordinates used to denote a particular 
position--they might be spherical, ellipsoidal, or Cartesian. Strictly 
speaking, "geocentric" would be a subset of ECEF, since the reference 
frame used for satellite
orbits is also geocentric, but (partly) tied to inertial space rather 
than to the (average) Earth for its
orientation.

All the conversions being discussed are between coordinate triplets 
(Cartesion and ellipsoidal), and
have nothing to do with the reference frame, save that its origin is at 
the center of mass of a uniform
ellipsoid, and polar axis along its axis of symmetry. Maybe the 
conversion should just be labeled by
coordinate type?

Duncan Agnew



