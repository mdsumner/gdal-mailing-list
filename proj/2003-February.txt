From Christian.Podlasly at dwd.de  Thu Feb  6 00:16:59 2003
From: Christian.Podlasly at dwd.de (Christian Podlasly)
Date: Thu, 06 Feb 2003 08:16:59 +0000
Subject: [OSRS-PROJ] Rotated coordinates
Message-ID: <3E4219FA.E51F9302@dwd.de>

Hi there,
is it possible with proj to calculate rotated lon/lat coordinates from
unrotated lon/lat?

Best regards,

--
Christian Podlasly
DWD - Remote Sensing Division
Kaiserleistrasse 42             Phone: +49 69 8062 2697
D 63067 Offenbach               Fax:   +49 69 8062 3697
Germany                         mailto:christian.podlasly at dwd.de


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20030206/918c0be7/attachment.html>

From holleman at knmi.nl  Thu Feb  6 00:56:03 2003
From: holleman at knmi.nl (Iwan Holleman)
Date: Thu, 06 Feb 2003 08:56:03 +0000
Subject: [OSRS-PROJ] Rotated coordinates
References: <3E4219FA.E51F9302@dwd.de>
Message-ID: <3E422322.E1211A6A@knmi.nl>

Hi Christian,

It is possible! I use it to calculate the coordinates of the gridpoints
of our NWP model HIRLAM.
The proj-string I use for this is:

 +proj=ob_tran +o_proj=eqc +o_lat_p=30.0 +a=57.29578 +lon_0=-15.0

In this way: XY represent the (longitude and latitude) of the rotated
grid in degrees, and LL the unrotated longitude and latitude . The
rotation is specified by o_lat_p and lon_o.

Best regards,

Iwan Holleman


Christian Podlasly wrote:

> Hi there,
> is it possible with proj to calculate rotated lon/lat coordinates from
> unrotated lon/lat?
>
> Best regards,
>
> --
> Christian Podlasly
> DWD - Remote Sensing Division
> Kaiserleistrasse 42             Phone: +49 69 8062 2697
> D 63067 Offenbach               Fax:   +49 69 8062 3697
> Germany                         mailto:christian.podlasly at dwd.de
>
>

--
dr. Iwan Holleman,
Tel. +31-30-2206818, fax. +31-30-2210843,
KNMI, R&D Observations, P.O.box 201, NL-3730 AE De Bilt, The
Netherlands,
Homepage Internet and KNMI intranet.
--------------------------------------------------------------
Zie ook/see also: http://www.knmi.nl/maildisclaimer.html 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20030206/ad3c9997/attachment.html>

From alex.weidauer at huckfinn.de  Thu Feb  6 03:05:37 2003
From: alex.weidauer at huckfinn.de (Alexander Weidauer)
Date: Thu, 06 Feb 2003 12:05:37 +0100
Subject: [OSRS-PROJ] Rotated coordinates Alex Weidauer
References: <3E4219FA.E51F9302@dwd.de>
Message-ID: <3E424181.4080908@huckfinn.de>



Christian Podlasly schrieb:
> Hi there,
> is it possible with proj to calculate rotated lon/lat coordinates from 
> unrotated lon/lat?
> 
> Best regards,
> 
> -- 
> Christian Podlasly
> DWD - Remote Sensing Division
> Kaiserleistrasse 42             Phone: +49 69 8062 2697
> D 63067 Offenbach               Fax:   +49 69 8062 3697
> Germany                         mailto:christian.podlasly at dwd.de
> 
>  

Hi Chishan,

Die Welt is ja so klein, was machst Du denn da

Alexander Weidauer

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Sat Feb  8 11:32:34 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat, 08 Feb 2003 14:32:34 -0500
Subject: [OSRS-PROJ] Lambert Conformal Conic 1SP
Message-ID: <3E455B52.4080208@pobox.com>

Folks,

I have found what I believe to be an inaccuracy in the LCC 1SP support in
PROJ.4, and I wonder if anyone has any comment on possible solutions.

As an example, using this commandline:

proj +proj=lcc +lat_1=18 +lat_0=18 +lon_0=-77 +k_0=1 +x_0=250000 +y_0=150000 
+ellps=clrk66 +units=m

And input:

76d56'37.26"W 17d55'55.80"N

I get this output:

255968.19       142493.14

The coordinate system is EPSG 24200 - JAD69 / Jamaica National Grid and is
used as an example in the EPSG paper "Guidance note #7" available at:

   http://www.remotesensing.org/geotiff/proj_list/guid7.html

or the section on LCC 1SP excerped at:
   http://www.remotesensing.org/geotiff/proj_list/lambert_conic_conformal_1sp.html

Looking there we see the result should be (255966.58, 142493.51).  The error
is a couple of meters.  Not outragous, but significant, and plenty to trip
up my autotests.

I have run the same coordinate system through the FME software (based on the
projections engine from Mentor Software and it matches the EPSG results to
a centimeter or better.

Is it possible the problem is with using a general LCC formula for the 1SP
case when there is a more precise way of handling that?

By the way, this has come up as I am refining support in FME for coordinate
systems derived from EPSG.  As part of this effort I have produced a test
file of reference points for every projected coordinate system and the expected
result when reprojected into lat/long.  I generated the test file using PROJ.4
(bound within OGR) and then run it again using the FME projections engine.

It is my thought that such a test suite of known points could be useful for
validating other projection engines as well ... with the caveat of course that
PROJ.4 isn't "the master", but if differences are found it suggests the
need for further manual examination.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Sat Feb  8 13:17:12 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 08 Feb 2003 16:17:12 -0500
Subject: [OSRS-PROJ] Lambert Conformal Conic 1SP
In-Reply-To: <3E455B52.4080208@pobox.com>
References: <3E455B52.4080208@pobox.com>
Message-ID: <1044739033.2276.16.camel@localhost.localdomain>

My only comment at the moment is that I am surprised that no scale
parameter was used as that is usually the compensating factor for
using the tangential form versus the secant form.

Since I finally got ol' PROJ on my system a month or so ago I will
have to load it in and give your numbers a try.

Obviously, a couple of meters is not tolerable in any situation.

Bench mark data set are important provided they are well certified
by a *large* number of knowledgeable cartographers.  Unfortunately,
I have come across few such sets.

On Sat, 2003-02-08 at 14:32, Frank Warmerdam wrote:
> Folks,
> 
> I have found what I believe to be an inaccuracy in the LCC 1SP support in
> PROJ.4, and I wonder if anyone has any comment on possible solutions.
> 
> As an example, using this commandline:
> 
> proj +proj=lcc +lat_1=18 +lat_0=18 +lon_0=-77 +k_0=1 +x_0=250000 +y_0=150000 
> +ellps=clrk66 +units=m
> 
> And input:
> 
> 76d56'37.26"W 17d55'55.80"N
> 
> I get this output:
> 
> 255968.19       142493.14
> 
> The coordinate system is EPSG 24200 - JAD69 / Jamaica National Grid and is
> used as an example in the EPSG paper "Guidance note #7" available at:
> 
>    http://www.remotesensing.org/geotiff/proj_list/guid7.html
> 
> or the section on LCC 1SP excerped at:
>    http://www.remotesensing.org/geotiff/proj_list/lambert_conic_conformal_1sp.html
> 
> Looking there we see the result should be (255966.58, 142493.51).  The error
> is a couple of meters.  Not outragous, but significant, and plenty to trip
> up my autotests.
> 
> I have run the same coordinate system through the FME software (based on the
> projections engine from Mentor Software and it matches the EPSG results to
> a centimeter or better.
> 
> Is it possible the problem is with using a general LCC formula for the 1SP
> case when there is a more precise way of handling that?
> 
> By the way, this has come up as I am refining support in FME for coordinate
> systems derived from EPSG.  As part of this effort I have produced a test
> file of reference points for every projected coordinate system and the expected
> result when reprojected into lat/long.  I generated the test file using PROJ.4
> (bound within OGR) and then run it again using the FME projections engine.
> 
> It is my thought that such a test suite of known points could be useful for
> validating other projection engines as well ... with the caveat of course that
> PROJ.4 isn't "the master", but if differences are found it suggests the
> need for further manual examination.
> 
> Best regards,


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Sat Feb  8 14:54:43 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 08 Feb 2003 17:54:43 -0500
Subject: [OSRS-PROJ] Lambert Conformal Conic 1SP
In-Reply-To: <3E455B52.4080208@pobox.com>
References: <3E455B52.4080208@pobox.com>
Message-ID: <1044744885.2276.48.camel@localhost.localdomain>

I compiled and loaded PROJ on my RedHat Linux system, edited your
email into a script and executed it:

proj +proj=lcc +lat_1=18 +lat_0=18 +lon_0=-77 +k_0=1 +x_0=250000
+y_0=150000 +ellps=clrk66 +units=m <<EOF
76d56'37.26"W 17d55'55.80"N
EOF

produces:

255966.58       142493.51

These numbers seem to match the JAD69 / Jamaica National Grid
numbers in the referred to web page.

You seem to have a flawed version of proj.

However, I do agree that there should be a set of standards
which can be used to test installations of any cartographic
projection system.  I do have a set of numbers which I got
from NMD which can be used to verify SPCS conversions.  But
material for foreign systems is lacking in my shop.

On Sat, 2003-02-08 at 14:32, Frank Warmerdam wrote:
> Folks,
> 
> I have found what I believe to be an inaccuracy in the LCC 1SP support in
> PROJ.4, and I wonder if anyone has any comment on possible solutions.
> 
> As an example, using this commandline:
> 
> proj +proj=lcc +lat_1=18 +lat_0=18 +lon_0=-77 +k_0=1 +x_0=250000 +y_0=150000 
> +ellps=clrk66 +units=m
> 
> And input:
> 
> 76d56'37.26"W 17d55'55.80"N
> 
> I get this output:
> 
> 255968.19       142493.14
> 
> The coordinate system is EPSG 24200 - JAD69 / Jamaica National Grid and is
> used as an example in the EPSG paper "Guidance note #7" available at:
> 
>    http://www.remotesensing.org/geotiff/proj_list/guid7.html
> 
> or the section on LCC 1SP excerped at:
>    http://www.remotesensing.org/geotiff/proj_list/lambert_conic_conformal_1sp.html
> 
> Looking there we see the result should be (255966.58, 142493.51).  The error
> is a couple of meters.  Not outragous, but significant, and plenty to trip
> up my autotests.
> 
> I have run the same coordinate system through the FME software (based on the
> projections engine from Mentor Software and it matches the EPSG results to
> a centimeter or better.
> 
> Is it possible the problem is with using a general LCC formula for the 1SP
> case when there is a more precise way of handling that?
> 
> By the way, this has come up as I am refining support in FME for coordinate
> systems derived from EPSG.  As part of this effort I have produced a test
> file of reference points for every projected coordinate system and the expected
> result when reprojected into lat/long.  I generated the test file using PROJ.4
> (bound within OGR) and then run it again using the FME projections engine.
> 
> It is my thought that such a test suite of known points could be useful for
> validating other projection engines as well ... with the caveat of course that
> PROJ.4 isn't "the master", but if differences are found it suggests the
> need for further manual examination.
> 
> Best regards, ...

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Sat Feb  8 20:52:22 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat, 08 Feb 2003 23:52:22 -0500
Subject: [OSRS-PROJ] Lambert Conformal Conic 1SP
In-Reply-To: <1044744885.2276.48.camel@localhost.localdomain>
References: <3E455B52.4080208@pobox.com> <1044744885.2276.48.camel@localhost.localdomain>
Message-ID: <3E45DE86.3000601@pobox.com>

Gerald I. Evenden wrote:
> I compiled and loaded PROJ on my RedHat Linux system, edited your
> email into a script and executed it:
> 
> proj +proj=lcc +lat_1=18 +lat_0=18 +lon_0=-77 +k_0=1 +x_0=250000
> +y_0=150000 +ellps=clrk66 +units=m <<EOF
> 76d56'37.26"W 17d55'55.80"N
> EOF
> 
> produces:
> 
> 255966.58       142493.51
> 
> These numbers seem to match the JAD69 / Jamaica National Grid
> numbers in the referred to web page.
> 
> You seem to have a flawed version of proj.

Gerald,

Thanks for trying this out.  Seeing that you were getting the
correct results I was able to dig in deeper and figure out what
was happening differently.  It turns out that if proj finds the
proj_def.dat file, then it will pick up a default lat_2 value
of 45 from it, and this is what screws up the results.

The proj_def.dat file contains:

<lcc> # Conterminous U.S. map
lat_1=33
lat_2=45
<>

For my purposes it is sufficient to add the +no_defs item on
the commandline to supress the default values.

So in summary, for LCC1SP  use +lat_0 and +lat_1, and make sure that
the no_defs flag is used to avoid including any default parameters.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Sun Feb  9 07:35:54 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 09 Feb 2003 10:35:54 -0500
Subject: [OSRS-PROJ] Lambert Conformal Conic 1SP
In-Reply-To: <3E45DE86.3000601@pobox.com>
References: <3E455B52.4080208@pobox.com>
	<1044744885.2276.48.camel@localhost.localdomain> 
	<3E45DE86.3000601@pobox.com>
Message-ID: <1044804955.1205.27.camel@localhost.localdomain>

Aye!  That was a nasty one.  One suggestion that might have helped
is to try the -V option and look at the final list of options
that proj decides to use.

I reiterate that this problem shows the need for certification
tables usable in testing projection programs.  That is, a list of
geographic coordinates and their corresponding cartesian space
values for the worlds grid systems.  How this list can be used
with individual projection packages will, of course, vary, but
at least a list would be available and individual software can
can be constructed to use the definition data to test the
software.

As for testing the PROJ.4 system I would be glad to assist in
any way.

On Sat, 2003-02-08 at 23:52, Frank Warmerdam wrote:
> Gerald I. Evenden wrote:
> > I compiled and loaded PROJ on my RedHat Linux system, edited your
> > email into a script and executed it:
> > 
> > proj +proj=lcc +lat_1=18 +lat_0=18 +lon_0=-77 +k_0=1 +x_0=250000
> > +y_0=150000 +ellps=clrk66 +units=m <<EOF
> > 76d56'37.26"W 17d55'55.80"N
> > EOF
> > 
> > produces:
> > 
> > 255966.58       142493.51
> > 
> > These numbers seem to match the JAD69 / Jamaica National Grid
> > numbers in the referred to web page.
> > 
> > You seem to have a flawed version of proj.
> 
> Gerald,
> 
> Thanks for trying this out.  Seeing that you were getting the
> correct results I was able to dig in deeper and figure out what
> was happening differently.  It turns out that if proj finds the
> proj_def.dat file, then it will pick up a default lat_2 value
> of 45 from it, and this is what screws up the results.
> 
> The proj_def.dat file contains:
> 
> <lcc> # Conterminous U.S. map
> lat_1=33
> lat_2=45
> <>
> 
> For my purposes it is sufficient to add the +no_defs item on
> the commandline to supress the default values.
> 
> So in summary, for LCC1SP  use +lat_0 and +lat_1, and make sure that
> the no_defs flag is used to avoid including any default parameters.
> 
> Best regards,


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From cjmce at lsu.edu  Sun Feb  9 13:52:23 2003
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Sun, 9 Feb 2003 15:52:23 -0600
Subject: [OSRS-PROJ] Lambert Conformal Conic 1SP
Message-ID: <OF6F7B56A6.B27708A8-ON86256CC8.0078269B-86256CC8.00782710@lsu.edu>


Gentlemen,

The EPSG database has an objective of attaining approximately ±0.1 meters
in computational accuracy.  That is according to a personal phone
conversation I had with Mr. Roger Lott, now retired Chief Surveyor of BP
Oil in London.  EPSG has enormous holes in its database and details, but is
fair as it exists.  The computational examples show ONE MORE digit than
their basic objective.  EPSG was NOT designed to be of geodetic-quality.
It was designed to be of passable utility for hydrocarbon exploration and
development.  The addition of the French Army Truncated Lambert (partially)
Conformal Conic was at my urging.  After a couple long phone conversations
with Mr. Lott, he did a bit of research, verified what I was talking about,
and added it to the EPSG documentation and collection of math models.  This
is mainly for North Africa, but for other "vacation spots" in the Middle
East also.  These details are in many of my monthly columns that are
published in "Photogrammetric Engineering and Remote Sensing."  (Check out
Morrocco and Algeria, if you're interested).

In regard to "conformal" conic projections, there are some whopping holes
in what's been written of late.  There is only one Lambert (fully)
Conformal Conic projection.  There are two basic ways of defining the same
projection.  Those methods are the "British Definition," and the "American
(French) Definition."  Both ways may use the math found in C&GS Special
Publication 251 "Conformal Projections in Geodesy and Cartography" by Paul
D. Thomas.  John P. Snyder relied on Thomas, and those looking for
definitive derivations should consult Thomas' work.  Snyder's work was not
intended for geodetic use; it was intended for USGS applications in
medium-scale mapping.  Snyder's work is a magnificent achievement of his
objective.

The fully conformal Lambert has its developed surface in either a tangent
case or a secant case.  Period.  If we consider a tangent case, then the
scale factor at the latitude of origin is equal to unity.  If we consider a
secant case, then the scale factor at the latitude of origin is less than
unity.  Period.

One can SAY there's one or two standard parallels, but that's a
complicating factor, not a simplifying one.  The Americans and French
normally (like to) define their secant zones with two standard parallels
that are integer degrees with integer minutes or the French method of
integer grads - commonly with Paris as the Prime Meridian, too.  The
Americans and French then wind up with a scale factor at the latitude at
origin and the latitude at origin as some odd value.

The British, on the other hand, developed (in 1916), their Lambert zones
with a defining latitude of origin in integer degrees and integer minutes,
and a FRACTION OF TWO WHOLE NUMBERS.  For instance, the "Minute Mesh" Grids
of the British Survey of India developed a number of Lambert zones in
British India and its environs as:

      Latitide of Origin       Scale Factor at Origin

Zone 0:    39º 30' N                 649/650,
Zone I:    32º 30' N                 823/824,
Zone IIA:  26º N                     823/824, etc.

Most of this stuff is quite straightforward if we just look at the original
works and the original publications.

OTHER kinds of Lambert include the French Army version (still used), the
Spens of Sweden (not used anymore), and the Oblique version of Professor
Krovak used in the Czech Republic.  The Krovak method uses the Equivalent
Sphere in similar fashion as the old French Army version, they just took a
different fork in the road of implementation.

In reference to the rounded-off example computations of EPSG for the
Jamaica National Grid of 1969, for those seeking to validate
transformations, try chasing the following decimal points:

Latitude = 17º 55'55".80 N
Longitude = 76º 56' 37."26 W
X = 255,966.582 m
Y = 142,493.511 m.

In the United States, the defining equations for the State Plane Coordinate
Systems are in Jim Stem's monograph that may be downloaded in .pdf format
from the www.ngs.noaa.gov web site.  What's the criterion for computational
accuracy for the U.S.?  It's plus or minus a tenth of a millimeter.

If your objective is cartographic transformations, then Snyder's USGS
publications are ideal for use in the United States.  If your objective is
geodetic transformation, then Stem's NGS publication is the national
standard for use in the United States.

If your objective is geodetic transformations in foreign countries, then
EACH local national government's publications are the ONLY authorities.
Usually it takes a lot of historical research, some of it traditionally
military secret.  "One size fits all" will NOT work for geodetic-accuracy
transformations.

A collection of "example" transformations?  Only useful if garnered from
each soverign country's civilian geodetic agency or military mapping
directorate.  Sometimes, that is impossible.  I have been trying for 15
years to get such information out of Cyprus.  The last graduate student I
knew that went back home for a holiday (and a trip to his family's Dentist
in Cyprus), was treatened with bodily harm if he ever came back and asked
such a thing in their office!  They actually chased him out of their
building!

There's possibles, and then there's a bunch of impossibles ...

Cliff Mugnier
LOUISIANA STATE UNIVERSITY

--------------------------------------

Aye!  That was a nasty one.  One suggestion that might have helped
is to try the -V option and look at the final list of options
that proj decides to use.

I reiterate that this problem shows the need for certification
tables usable in testing projection programs.  That is, a list of
geographic coordinates and their corresponding cartesian space
values for the worlds grid systems.  How this list can be used
with individual projection packages will, of course, vary, but
at least a list would be available and individual software can
can be constructed to use the definition data to test the
software.

As for testing the PROJ.4 system I would be glad to assist in
any way.

On Sat, 2003-02-08 at 23:52, Frank Warmerdam wrote:
> Gerald I. Evenden wrote:
> > I compiled and loaded PROJ on my RedHat Linux system, edited your
> > email into a script and executed it:
> >
> > proj +proj=lcc +lat_1=18 +lat_0=18 +lon_0=-77 +k_0=1 +x_0=250000
> > +y_0=150000 +ellps=clrk66 +units=m <<EOF
> > 76d56'37.26"W 17d55'55.80"N
> > EOF
> >
> > produces:
> >
> > 255966.58       142493.51
> >
> > These numbers seem to match the JAD69 / Jamaica National Grid
> > numbers in the referred to web page.
> >
> > You seem to have a flawed version of proj.
>
> Gerald,
>
> Thanks for trying this out.  Seeing that you were getting the
> correct results I was able to dig in deeper and figure out what
> was happening differently.  It turns out that if proj finds the
> proj_def.dat file, then it will pick up a default lat_2 value
> of 45 from it, and this is what screws up the results.
>
> The proj_def.dat file contains:
>
> <lcc> # Conterminous U.S. map
> lat_1=33
> lat_2=45
> <>
>
> For my purposes it is sufficient to add the +no_defs item on
> the commandline to supress the default values.
>
> So in summary, for LCC1SP  use +lat_0 and +lat_1, and make sure that
> the no_defs flag is used to avoid including any default parameters.
>
> Best regards,


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.



----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Sun Feb  9 14:33:11 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 09 Feb 2003 17:33:11 -0500
Subject: [OSRS-PROJ] Lambert Conformal Conic 1SP
In-Reply-To: <OF6F7B56A6.B27708A8-ON86256CC8.0078269B-86256CC8.00782710@lsu.edu>
References: <OF6F7B56A6.B27708A8-ON86256CC8.0078269B-86256CC8.00782710@lsu.edu>
Message-ID: <3E46D727.5010203@pobox.com>

Clifford J Mugnier wrote:

> In reference to the rounded-off example computations of EPSG for the
> Jamaica National Grid of 1969, for those seeking to validate
> transformations, try chasing the following decimal points:
> 
> Latitude = 17º 55'55".80 N
> Longitude = 76º 56' 37."26 W
> X = 255,966.582 m
> Y = 142,493.511 m.

Cliff,

Very interesting information, though mostly over my head.  I did try this
test point and got excellent agreement.

testepsg -t EPSG:4241 EPSG:24200 -76.9436833333 17.932166666666667
(-76.943683,17.932167) -> (255966.581853,142493.511021)

"testepsg" uses PROJ.4 to do the actual transformation but pulls the
definitions from my copy of the EPSG database.  So PROJ.4's results seem
right on for this example.

I would agree that EPSG is lacking lots of coordinate system and even
transformation methods, but it is by far the dominant defacto standard
coordinate system catalog and is the basis of many GIS systems these days.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Sun Feb  9 17:45:48 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 09 Feb 2003 20:45:48 -0500
Subject: [OSRS-PROJ] Lambert Conformal Conic 1SP
In-Reply-To: 	<OF6F7B56A6.B27708A8-ON86256CC8.0078269B-86256CC8.00782710@lsu.edu>
References: 	<OF6F7B56A6.B27708A8-ON86256CC8.0078269B-86256CC8.00782710@lsu.edu>
Message-ID: <1044841549.4020.32.camel@localhost.localdomain>

> In reference to the rounded-off example computations of EPSG for the
> Jamaica National Grid of 1969, for those seeking to validate
> transformations, try chasing the following decimal points:
> 
> Latitude = 17º 55'55".80 N
> Longitude = 76º 56' 37."26 W
> X = 255,966.582 m
> Y = 142,493.511 m.

Not difficult:

Using the script:
proj +proj=lcc +lat_1=18 +lat_0=18 +lon_0=-77 +k_0=1 +x_0=250000
+y_0=150000 +ellps=clrk66 +units=m -f '%.4f'<<EOF
76d56'37.26"W 17d55'55.80"N
EOF

we get:

#Lambert Conformal Conic
#       Conic, Sph&Ell
#       lat_1= and lat_2= or lat_0
# +proj=lcc +lat_1=18 +lat_0=18 +lon_0=-77 +k_0=1 +x_0=250000
+y_0=150000
# +ellps=clrk66 +units=m
#Final Earth figure: ellipsoid
#  Major axis (a): 6378206.4000
#  1/flattening: 294.978698
#  squared eccentricity: 0.006768657997
Longitude: 76d56'37.26"W [ -76.943683333 ]
Latitude:  17d55'55.8"N [ 17.932166667 ]
Easting (x):   255966.5818
Northing (y):  142493.5110
Meridian scale (h)*: 1.00000070  ( 6.964e-05 % error )
Parallel scale (k)*: 1.00000070  ( 6.964e-05 % error )
Areal scale (s):     1.00000139  ( 0.0001393 % error )
Angular distortion (w): 0.000
Meridian/Parallel angle: 90.00000
Convergence*: -0d1'2.65" [ -0.01740281 ]
Max-min (Tissot axis a-b) scale error: 1.00000 1.00000

The scale factors are determined numerically in float and
only used as approximate tests.

Gee, that was easy.  Shall we go for 4 digits?  I'll have
to back off once we get to a total of 15 digits as double only
goes so far.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Sun Feb  9 18:22:07 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 09 Feb 2003 21:22:07 -0500
Subject: [OSRS-PROJ] Lambert Conformal Conic 1SP
In-Reply-To: 	<OF6F7B56A6.B27708A8-ON86256CC8.0078269B-86256CC8.00782710@lsu.edu>
References: 	<OF6F7B56A6.B27708A8-ON86256CC8.0078269B-86256CC8.00782710@lsu.edu>
Message-ID: <1044843728.4022.48.camel@localhost.localdomain>

On Sun, 2003-02-09 at 16:52, Clifford J Mugnier wrote:
	...
> The fully conformal Lambert has its developed surface in either a tangent
> case or a secant case.  Period.  If we consider a tangent case, then the
> scale factor at the latitude of origin is equal to unity.  If we consider a
> secant case, then the scale factor at the latitude of origin is less than
> unity.  Period.

The inference, if not outright assertation, is that scale is not
specified for the tangential form of LLC.  That seems peculiar
as I have specs for Costa Rica Norte y Sud, Cuba Norte y Sud as
well as several other central American countries that use LLC
tangential with k_0 specified.  k_0 with tangential is merely an
alternative to secant usage and totally up to local cartographers in
selection.

Also, latitude of origin for the secant form is arbitrary and does
not necessarily have to be at the point of unity scale factor.
Unity scale factor occurs at the two standard parallels for
secant LLC.

As an aside, changing the formulas for secant to tangent only
requires the replacement of one equation.

PERIOD.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From Strebe at aol.com  Sun Feb  9 18:26:12 2003
From: Strebe at aol.com (Strebe at aol.com)
Date: Sun, 9 Feb 2003 21:26:12 EST
Subject: [OSRS-PROJ] Re: Lambert Conformal Conic 1SP
Message-ID: <103.2693192f.2b7867c4@aol.com>


In a message dated 2003.02.09 18:20:17, gerald.evenden at verizon.net writes:


> Also, latitude of origin for the secant form is arbitrary and does
> not necessarily have to be at the point of unity scale factor.
> 

I don't think the latitude of minimum scale would be an arbitrary latitude of 
origin.

Regards,
daan Strebe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20030209/f7dd2019/attachment.html>

From cjmce at lsu.edu  Sun Feb  9 18:54:20 2003
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Sun, 9 Feb 2003 20:54:20 -0600
Subject: [OSRS-PROJ] Re: Lambert Conformal Conic 1SP
Message-ID: <OF0EBFF957.547D40D6-ON86256CC9.000FF5A9-86256CC9.000FF604@lsu.edu>


Strebe is correct, it is NOT arbitrary.  Just check the math; it is
directly related to the standard parallels as a defining parameter.  The
Latitude of minimum scale for a secant Lambert Conical Orthomorphic is the
same as the Latitude of Origin.

Do not confuse the Latitude of Origin with the False Origin.  The False
Origin is arbitrary, of course.  The Latitude of Origin of the projection
is close (but not exactly) to the mean of the two standard parallels.  It's
equal on the sphere, not the ellipsoid.

Cliff Mugnier
LOUISIANA STATE UNIVERSITY
-----------------------------------------------
In a message dated 2003.02.09 18:20:17, gerald.evenden at verizon.net writes:


Also, latitude of origin for the secant form is arbitrary and does
not necessarily have to be at the point of unity scale factor.


I don't think the latitude of minimum scale would be an arbitrary latitude
of origin.

Regards,
daan Strebe




----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From cjmce at lsu.edu  Sun Feb  9 19:13:40 2003
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Sun, 9 Feb 2003 21:13:40 -0600
Subject: [OSRS-PROJ] Lambert Conformal Conic 1SP
Message-ID: <OF96E91D7E.7BE42A56-ON86256CC9.0011BAF2-86256CC9.0011BB2A@lsu.edu>


Costa Rica Zona Norte is defined as:

Latitude of Origin: 10º 28'N
Scale Factor at Origin: 0.99995696

and

Costa Rica Zona Sud is defined as:

Latitude of Origin: 9º 00
Scale Factor at Origin: 0.99995696

Both are secant Lambert Conical Orthomorphic projections.

Costa Rica is NOT tangential, it is secant as are ALL other Lambert
Conformal Conics established by Army Map Service's Inter American Geodetic
Survey in the 1950's.

If it's tangential, then Scale Factor at Origin is equal to UNITY.  Still
PERIOD.  Notice above parameters have Scale Factors at Origin less than
unity.  Still PERIOD.

Latitude at Origin has nothing to do with the False Origin where False
Northing is equal to zero.  Of course, False Northing is arbitrary in that
the design area of a zone will supposedly not have any negative Northing
values.  Of course, in North Africa, the Lambert zones DO, in fact, have
occasion to go to zero with False Northings and they have actually
implemented False Northings at False Origin.  That has nothing to do with
"Tangent" or "Secant" developed surfaces.  Incidentally, those Lamberts are
French Army Truncated Cubic math models, and the fully conformal equations
will NOT work.

With proper mathematical programming, I assert, rather than imply, that
there is only ONE set of equations necessary to implement both "Tangent"
and "Secant" developed surfaces.  John P. Snyder ignored the British
Definition because USGS had no need for it.  People with applications
outside of the US, on the other hand, DO have such a need.

Check out Thomas' SP251.  If the proper math model is programmed, then only
ONE equation is needed for either definition of secant Lamberts.  Only the
equations for the coefficients need change.  Paul D. Thomas said it all on
this topic back in 1952.  This is not "new" stuff.

Cliff Mugnier
LOUISIANA STATE UNIVERSITY



On Sun, 2003-02-09 at 16:52, Clifford J Mugnier wrote:
...
> The fully conformal Lambert has its developed surface in either a tangent
> case or a secant case.  Period.  If we consider a tangent case, then the
> scale factor at the latitude of origin is equal to unity.  If we consider
a
> secant case, then the scale factor at the latitude of origin is less than
> unity.  Period.

The inference, if not outright assertation, is that scale is not
specified for the tangential form of LLC.  That seems peculiar
as I have specs for Costa Rica Norte y Sud, Cuba Norte y Sud as
well as several other central American countries that use LLC
tangential with k_0 specified.  k_0 with tangential is merely an
alternative to secant usage and totally up to local cartographers in
selection.

Also, latitude of origin for the secant form is arbitrary and does
not necessarily have to be at the point of unity scale factor.
Unity scale factor occurs at the two standard parallels for
secant LLC.

As an aside, changing the formulas for secant to tangent only
requires the replacement of one equation.

PERIOD.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.



----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From Strebe at aol.com  Sun Feb  9 19:33:39 2003
From: Strebe at aol.com (Strebe at aol.com)
Date: Sun, 9 Feb 2003 22:33:39 EST
Subject: [OSRS-PROJ] Re: Lambert Conformal Conic 1SP
Message-ID: <1a4.1028771c.2b787793@aol.com>


I don't have Thomas 1952. Out of curiosity, did he tender recommendations for 
choice of standard parallels? 

Regards,

daan Strebe
Geocart author
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20030209/0435ee5c/attachment.html>

From cjmce at lsu.edu  Sun Feb  9 19:45:58 2003
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Sun, 9 Feb 2003 21:45:58 -0600
Subject: [OSRS-PROJ] Re: Lambert Conformal Conic 1SP
Message-ID: <OF1ABD6A01.12881C9D-ON86256CC9.0014AFFB-86256CC9.0014B038@lsu.edu>


It's USC&GS Special Publcation 251, dated 1952.  "Conformal Projection in
Geodesy and Cartography."  No, he did not offer guidance on such.  He
presented the math with proofs and gave a few brief statement on usage
throughout the world as he could apparently find out about in the USC&GS
Library.  It was quite limited in comparison to what Army Map Service had,
but that was mainly classified at the time and AMS was busy with the EU50
Datum adjustment.  It is rumored that Paul D. Thomas did the math and
derivations on contract to AMS for the UTM.

Cliff Mugnier
LOUISIANA STATE UNIVERSITY

I don't have Thomas 1952. Out of curiosity, did he tender recommendations
for choice of standard parallels?

Regards,

daan Strebe
Geocart author




----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Mon Feb 10 07:42:57 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 10 Feb 2003 10:42:57 -0500
Subject: [OSRS-PROJ] Lambert Conformal Conic 1SP
In-Reply-To: 	<OF96E91D7E.7BE42A56-ON86256CC9.0011BAF2-86256CC9.0011BB2A@lsu.edu>
References: 	<OF96E91D7E.7BE42A56-ON86256CC9.0011BAF2-86256CC9.0011BB2A@lsu.edu>
Message-ID: <1044891778.1254.84.camel@localhost.localdomain>

Correct me if I am wrong but the definition of the Costa Rica
Norte projection is (in proj terms):

<costa-n> # Costa Rica Norte
        proj=lcc ellps=clrk66 lat_1=10d28N lon_0=84d20W
        x_0=500000 y_0=217820.522 k_0=0.99995696
        no_defs <>

This shows tangential specification with scale factor.

What you seem to be confusing is that a non-unity scale factor
does, in essence, turn a tangential spec into a secant form but
I find that specious when the other basic elements of the
projection ONLY specify the base of tangency.

As and aside, what if the user specifies a scale factor
greater than one?  Then we have neither tangency nor secancy. ;-)

In my book: LLC with one parallel: tangent form, LLC with two
parallels secant form.

A minor point, a LLC with two parallels can be turned into the
tangent equivalence with a appropriate scale factor greater than
unity.  This is why it is nonsense to use the terms tangency/
secancy in any other sense other than whether one or two latitudes
are specified.  The cartographer doesn't give a damn as he will
adjust the scale factor or double parallels to give the best fit
to his zone of interest.

Any, we are just squabbling over semantics.

On Sun, 2003-02-09 at 22:13, Clifford J Mugnier wrote:
> 
> Costa Rica Zona Norte is defined as:
> 
> Latitude of Origin: 10º 28'N
> Scale Factor at Origin: 0.99995696
> 
> and
> 
> Costa Rica Zona Sud is defined as:
> 
> Latitude of Origin: 9º 00
> Scale Factor at Origin: 0.99995696
> 
> Both are secant Lambert Conical Orthomorphic projections.
> 
> Costa Rica is NOT tangential, it is secant as are ALL other Lambert
> Conformal Conics established by Army Map Service's Inter American Geodetic
> Survey in the 1950's.
> 
> If it's tangential, then Scale Factor at Origin is equal to UNITY.  Still
> PERIOD.  Notice above parameters have Scale Factors at Origin less than
> unity.  Still PERIOD.
> 
	...

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Mon Feb 10 08:03:27 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 10 Feb 2003 11:03:27 -0500
Subject: [OSRS-PROJ] Re: Lambert Conformal Conic 1SP
In-Reply-To: 	<OF1ABD6A01.12881C9D-ON86256CC9.0014AFFB-86256CC9.0014B038@lsu.edu>
References: 	<OF1ABD6A01.12881C9D-ON86256CC9.0014AFFB-86256CC9.0014B038@lsu.edu>
Message-ID: <1044893008.1254.104.camel@localhost.localdomain>

251 is a useful book and a dog-eared copy sit on my shelf.

I also found a suspicious coefficient for the expression for
x in Tmerc on page 96.  For eqn 289, and the first row of
the expression for the lamda^7 term, the 6th term reads
"3,262".  I believe the value should be "3,298".

This was found when comparing extended precision Gauss
quadrature integrations, Thomas's expanded coefficients and
various "standard" versions of Tmerc.

What was a very interesting part of this endeavor is that
numerical integration allowed me to empirically determine
the correct 4 digit number that, when used in the evaluation,
the comparison was exact to 15 digits.  Just changing the
"8" up or down 1 would significantly alter the comparison.

There was no way I would carry out a re-derivation!  Thomas
was a masochist.

On Sun, 2003-02-09 at 22:45, Clifford J Mugnier wrote:
> 
> It's USC&GS Special Publcation 251, dated 1952.  "Conformal Projection in
> Geodesy and Cartography."  No, he did not offer guidance on such.  He
> presented the math with proofs and gave a few brief statement on usage
> throughout the world as he could apparently find out about in the USC&GS
> Library.  It was quite limited in comparison to what Army Map Service had,
> but that was mainly classified at the time and AMS was busy with the EU50
> Datum adjustment.  It is rumored that Paul D. Thomas did the math and
> derivations on contract to AMS for the UTM.
> 
> Cliff Mugnier
> LOUISIANA STATE UNIVERSITY
> 
> I don't have Thomas 1952. Out of curiosity, did he tender recommendations
> for choice of standard parallels?
> 
> Regards,
> 
> daan Strebe
> Geocart author
> 
> 
> 
> 
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From cjmce at lsu.edu  Mon Feb 10 18:28:16 2003
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Mon, 10 Feb 2003 20:28:16 -0600
Subject: [OSRS-PROJ] Re: Lambert Conformal Conic 1SP
Message-ID: <OF674D01C4.4640E396-ON86256CCA.000D92BE-86256CCA.000D9301@lsu.edu>


Gerald,

You must have an earlier edition of 251 than me.  In my edition, the Fifth
Printing of 1968, that term is indeed printed as 3298.

Congratulations on backing that out!  However, in comparative terms of
masochism, Oscar S. Adams beats them all in Special Publication Number 57,
"Latitude Functions."  He derived each function five different ways!

Cliff Mugnier
LOUISIANA STATE UNIVERSITY



251 is a useful book and a dog-eared copy sit on my shelf.

I also found a suspicious coefficient for the expression for
x in Tmerc on page 96.  For eqn 289, and the first row of
the expression for the lamda^7 term, the 6th term reads
"3,262".  I believe the value should be "3,298".

This was found when comparing extended precision Gauss
quadrature integrations, Thomas's expanded coefficients and
various "standard" versions of Tmerc.

What was a very interesting part of this endeavor is that
numerical integration allowed me to empirically determine
the correct 4 digit number that, when used in the evaluation,
the comparison was exact to 15 digits.  Just changing the
"8" up or down 1 would significantly alter the comparison.

There was no way I would carry out a re-derivation!  Thomas
was a masochist.

On Sun, 2003-02-09 at 22:45, Clifford J Mugnier wrote:
>
> It's USC&GS Special Publcation 251, dated 1952.  "Conformal Projection in
> Geodesy and Cartography."  No, he did not offer guidance on such.  He
> presented the math with proofs and gave a few brief statement on usage
> throughout the world as he could apparently find out about in the USC&GS
> Library.  It was quite limited in comparison to what Army Map Service
had,
> but that was mainly classified at the time and AMS was busy with the EU50
> Datum adjustment.  It is rumored that Paul D. Thomas did the math and
> derivations on contract to AMS for the UTM.
>
> Cliff Mugnier
> LOUISIANA STATE UNIVERSITY
>
> I don't have Thomas 1952. Out of curiosity, did he tender recommendations
> for choice of standard parallels?
>
> Regards,
>
> daan Strebe
> Geocart author
>
>
>
>
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.



----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Wed Feb 12 08:18:41 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 12 Feb 2003 11:18:41 -0500
Subject: [OSRS-PROJ] Horrors of the Internet
In-Reply-To: 	<OF674D01C4.4640E396-ON86256CCA.000D92BE-86256CCA.000D9301@lsu.edu>
References: 	<OF674D01C4.4640E396-ON86256CCA.000D92BE-86256CCA.000D9301@lsu.edu>
Message-ID: <1045066722.1776.38.camel@localhost.localdomain>

A few days ago I took up the seemingly minor task of installing
the Czech projection Krovak Oblique Conformal Conic in my version
of PROJ.4.  There seemed to be documentation and benchmarks on
the net, so away we go.

Wrong!!!  I have rarely seen a more screwed up mess.  Some sites
had what on the surface seemed like a proper mathematical
definition of the projection.  BUT, closer examination revealed
variables/constants appearing our of thin air and values computed
but never participating in the final solution.  I even found a
FORTRAN program that successfully compiled and yielded results
comparing with other sources.

As a defining example that can be demonstrated here without
proper math display mode is one of the first computations in the
projection's initialization:  The term is usually referred to a 'B'

B = sqrt( (1 + e^2 cos^4(phi_c)) / (1-e^2) )

Of course I was lured into coding from the nicely displayed
source but learned, after painful hours of debugging, that this
material was seriously flawed:  The above expression that was
employed in the code was the improbable expression:

B = sqrt( 1. + (e^2 cos^4(phi_c))/(1-e^2) )

This just shows how much BS floats on the Internet.

My biggest question is: are the executable sources and example
numbers listed out there correct, irrespective of the documentation?
For example one site lists:

  1 FI: 50 12 32.4416 LAMBDA: 16 50 59.1790 X:1050538.643 Y: 568990.997
  2 FI: 49 50 35.7896 LAMBDA: 12 50 23.7895 X:1053301.049 Y: 859084.699
  3 FI: 49 50 35.7896 LAMBDA: 22 19 38.8766 X:1117926.669 Y: 180241.362
  4 FI: 48 38 23.4659 LAMBDA: 22 19 38.8766 X:1251684.182 Y: 184607.141
  5 FI: 50 15 30.7008 LAMBDA: 17 25 51.1792 X:1049221.190 Y: 527189.195
  6 FI: 50 12 32.4414 LAMBDA: 16 50 59.1790 X:1050538.649 Y: 568990.997

where FI and LAMBDA are respective latitude and longitude.

Oh yes, an example site where the impressive math display has many
holes in it is:

http://www.posc.org/Epicentre.2_2/DataModel/ExamplesofUsage/eu_cs34e2.html

It is interesting how often the same material appears on different
web sites where the local web master has not paid a bit of attention
to the contents of what he/she has copied.  For shame!

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From ron at lsl.co.uk  Thu Feb 13 01:42:06 2003
From: ron at lsl.co.uk (Ron Russell)
Date: Thu, 13 Feb 2003 09:42:06 +0000
Subject: [OSRS-PROJ] Horrors of the Internet
References: <OF674D01C4.4640E396-ON86256CCA.000D92BE-86256CCA.000D9301@lsu.edu> <1045066722.1776.38.camel@localhost.localdomain>
Message-ID: <3E4B686E.11F8C69C@lsl.co.uk>

Gerald I. Evenden wrote:
> 
> A few days ago I took up the seemingly minor task of installing
> the Czech projection Krovak Oblique Conformal Conic in my version
> of PROJ.4.  There seemed to be documentation and benchmarks on
> the net, so away we go.
> 
> Wrong!!!  I have rarely seen a more screwed up mess.  Some sites
> had what on the surface seemed like a proper mathematical
> definition of the projection.  BUT, closer examination revealed
> variables/constants appearing our of thin air and values computed
> but never participating in the final solution.  I even found a
> FORTRAN program that successfully compiled and yielded results
> comparing with other sources.
> 
> As a defining example that can be demonstrated here without
> proper math display mode is one of the first computations in the
> projection's initialization:  The term is usually referred to a 'B'
> 
> B = sqrt( (1 + e^2 cos^4(phi_c)) / (1-e^2) )
> 
> Of course I was lured into coding from the nicely displayed
> source but learned, after painful hours of debugging, that this
> material was seriously flawed:  The above expression that was
> employed in the code was the improbable expression:
> 
> B = sqrt( 1. + (e^2 cos^4(phi_c))/(1-e^2) )
> 
> This just shows how much BS floats on the Internet.
> 
> My biggest question is: are the executable sources and example
> numbers listed out there correct, irrespective of the documentation?
> For example one site lists:
> 
>   1 FI: 50 12 32.4416 LAMBDA: 16 50 59.1790 X:1050538.643 Y: 568990.997
>   2 FI: 49 50 35.7896 LAMBDA: 12 50 23.7895 X:1053301.049 Y: 859084.699
>   3 FI: 49 50 35.7896 LAMBDA: 22 19 38.8766 X:1117926.669 Y: 180241.362
>   4 FI: 48 38 23.4659 LAMBDA: 22 19 38.8766 X:1251684.182 Y: 184607.141
>   5 FI: 50 15 30.7008 LAMBDA: 17 25 51.1792 X:1049221.190 Y: 527189.195
>   6 FI: 50 12 32.4414 LAMBDA: 16 50 59.1790 X:1050538.649 Y: 568990.997
> 
> where FI and LAMBDA are respective latitude and longitude.
> 
> Oh yes, an example site where the impressive math display has many
> holes in it is:
> 
> http://www.posc.org/Epicentre.2_2/DataModel/ExamplesofUsage/eu_cs34e2.html
> 
> It is interesting how often the same material appears on different
> web sites where the local web master has not paid a bit of attention
> to the contents of what he/she has copied.  For shame!
> 
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.


10 years ago I implemented this projection in Fortran in our (extended)
version of GCTPLIB. I was given a photocopy of the relevent chapter
of a Czeck publication (in Czeck!) by our clients, the Czeck Institute
for Surveying and Mapping and after a lot of interpretation of the
diagrams and figures (but with only the odd word translated) 
produced the code.

This paper used two constants for the Projection of the (Bessel) 
ellipsoid onto A Gausian Conformal Sphere, (using a latitude of
49 30N), what they called alpha and k.

I finally tracked these down, alpha is what you call B and k is much
to complicated to write out in an email!

As if the source document was not enough of a problem, the Czecks use
a left handed coordinate system (Westings and Southings) with the origin
at the apex of the cone. Our display systems assume a Easting/Northing
so in fact we produced a pseudo Krovak system with a large False Northing;
The numbers are correct but they all have the wrong sign, however the
maps come out the correct way on the paper!

The Czecks also sometimes use Ferra as their prime meridian.

My code gives exactly the same results for the points you have listed.

The last two points are the test points given in the paper I used (with
a few more decimal places)

Phi 50 12 32.44140 Lambda 34 30 59.17900 => 568990.9973W 1050538.6493S
Phi 50 15 30.70080 lambda 35 05 51.17920 => 527189.1948W 1049221.1899S

(They assume Ferra is 17 40e of Greenwich.)

Given the problems I had interpreting this document, if it is the
definitive source, I am not surprised it there are several intepretations
about!

Ron
-- 


---------------------------------------------------------------------
Ron Russell
Senior Software Engineer, Laser-Scan Ltd
+44(0)1223 420414

http://www.laser-scan.com

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Thu Feb 13 07:52:10 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 13 Feb 2003 10:52:10 -0500
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
In-Reply-To: <3E4B686E.11F8C69C@lsl.co.uk>
References: 	<OF674D01C4.4640E396-ON86256CCA.000D92BE-86256CCA.000D9301@lsu.edu>
	<1045066722.1776.38.camel@localhost.localdomain> 
	<3E4B686E.11F8C69C@lsl.co.uk>
Message-ID: <1045151531.1325.34.camel@localhost.localdomain>

I modified the title to be more explicit of the topic of this
thread.

I found and am using as a bench FORTRAN code from:

http://pecny.asu.cas.cz/publ/KROVAK/krovak.html

The author is listed as J. Kostelecky but I wonder if it is
your code.  Attribution is not one of the strong points
of the web. :-(  This code seems to be generating the bench
results.  At least the math in the front of the article
matched the code---more than I can say for other sites.
The FORTRAN code starts out with:

C TRANSFORMATION BETWEEN ELLIPSOIDAL AND PLANAR COORDINATES
C IN CZECH AND SLOVAK NATIONAL PROJECTION "KROVAK"
        PROGRAM KROTEST
C INPUT DATA must be IN FILE 'KROTEST.DAT'
C FIRST RAW : NO OF THE VARIANT: VARIANT 1 MEANS FI,
C LAMBDA --&gt; X,Y
C VARIANT 2 MEANS X,Y --&gt; FI, LAMBDA
C SECOND AND OTHER LINES: NP, FI(DEG,MIN,SEC), LAMBDA(DEG,MIN,SEC)
	...
Is that yours?

The thing I do not like so far, is I would like a general
development of the projection such that it could be transfered
to other regions.  Right now it is stuck with the specific area
and the eqns to define the constants, pulled out of the air,
are not presented.

I did find someone's effort to translate it to PROJ form in C and
I am using that as a base *after* major surgery.  It came from
Thomas Flamming in thread:

http://remotesensing.org/lists/proj_archive/msg00306.html

As for odd usage of x-y, what's one to do.  At least *our*
traditional form allows for making proper maps.

Thanks for the additional digits.

On Thu, 2003-02-13 at 04:42, Ron Russell wrote:
> Gerald I. Evenden wrote:
> > 
> > A few days ago I took up the seemingly minor task of installing
> > the Czech projection Krovak Oblique Conformal Conic in my version
> > of PROJ.4.  There seemed to be documentation and benchmarks on
	...
> 
> 10 years ago I implemented this projection in Fortran in our (extended)
> version of GCTPLIB. I was given a photocopy of the relevent chapter
> of a Czeck publication (in Czeck!) by our clients, the Czeck Institute
> for Surveying and Mapping and after a lot of interpretation of the
> diagrams and figures (but with only the odd word translated) 
> produced the code.
> 
> This paper used two constants for the Projection of the (Bessel) 
> ellipsoid onto A Gausian Conformal Sphere, (using a latitude of
> 49 30N), what they called alpha and k.
> 
> I finally tracked these down, alpha is what you call B and k is much
> to complicated to write out in an email!
> 
> As if the source document was not enough of a problem, the Czecks use
> a left handed coordinate system (Westings and Southings) with the origin
> at the apex of the cone. Our display systems assume a Easting/Northing
> so in fact we produced a pseudo Krovak system with a large False Northing;
> The numbers are correct but they all have the wrong sign, however the
> maps come out the correct way on the paper!
> 
> The Czecks also sometimes use Ferra as their prime meridian.
> 
> My code gives exactly the same results for the points you have listed.
> 
> The last two points are the test points given in the paper I used (with
> a few more decimal places)
> 
> Phi 50 12 32.44140 Lambda 34 30 59.17900 => 568990.9973W 1050538.6493S
> Phi 50 15 30.70080 lambda 35 05 51.17920 => 527189.1948W 1049221.1899S
> 
> (They assume Ferra is 17 40e of Greenwich.)
> 
> Given the problems I had interpreting this document, if it is the
> definitive source, I am not surprised it there are several intepretations
> about!
> 
> Ron


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From ron at lsl.co.uk  Thu Feb 13 09:31:44 2003
From: ron at lsl.co.uk (Ron Russell)
Date: Thu, 13 Feb 2003 17:31:44 +0000
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
References: <OF674D01C4.4640E396-ON86256CCA.000D92BE-86256CCA.000D9301@lsu.edu>
		<1045066722.1776.38.camel@localhost.localdomain> 
		<3E4B686E.11F8C69C@lsl.co.uk> <1045151531.1325.34.camel@localhost.localdomain>
Message-ID: <3E4BD680.4213DCE8@lsl.co.uk>

Gerald I. Evenden wrote:
> 
> I modified the title to be more explicit of the topic of this
> thread.
> 
> I found and am using as a bench FORTRAN code from:
> 
> http://pecny.asu.cas.cz/publ/KROVAK/krovak.html
> 
> The author is listed as J. Kostelecky but I wonder if it is
> your code.  Attribution is not one of the strong points
> of the web. :-(  This code seems to be generating the bench
> results.  At least the math in the front of the article
> matched the code---more than I can say for other sites.
> The FORTRAN code starts out with:
> 
> C TRANSFORMATION BETWEEN ELLIPSOIDAL AND PLANAR COORDINATES
> C IN CZECH AND SLOVAK NATIONAL PROJECTION "KROVAK"
>         PROGRAM KROTEST
> C INPUT DATA must be IN FILE 'KROTEST.DAT'
> C FIRST RAW : NO OF THE VARIANT: VARIANT 1 MEANS FI,
> C LAMBDA --&gt; X,Y
> C VARIANT 2 MEANS X,Y --&gt; FI, LAMBDA
> C SECOND AND OTHER LINES: NP, FI(DEG,MIN,SEC), LAMBDA(DEG,MIN,SEC)
>         ...
> Is that yours?

No, I am never so confident in my code to offer it outside the
building!

> 
> The thing I do not like so far, is I would like a general
> development of the projection such that it could be transfered
> to other regions.  Right now it is stuck with the specific area
> and the eqns to define the constants, pulled out of the air,
> are not presented.

These constants are used in the Conformal projection of the ellipsoid
to The Gausian Conformal Sphere. I think I tracked this down at
one time.

When I look back at my code, I have used your formulae to calculate
what you call B and I call the constant alpha (1.0005974983). This
is the Longitude factor.

I have a hand written formulae (from the Czecks) for the other 
Latitude constant k (0.9965924869) or 1/k (1.0034191640), but I 
do not seem to have used that; the constant is still in my code. 
Perhaps I couldn't get the formulae to give the same result or 
perhaps the code was finished by the time I had tracked down the data.

The formulae is (I hope):

k = top/bottom

top = (tan(phi0/2 + 45)*
        ((1.0 - e*sin(phi0))/(1.0 - e*sin(phi0)))^^(e/2))^^alpha

bottom = tan(U0/2 + 45)

phi0 is the latitude for the conformal projection to the sphere (49 30n)
in this case, and U0 is the conformal latitude of this, so perhaps
this needs iteration. 45 is 45 degrees.

I think I have got the brackets right, but don't sue me!

> 
> I did find someone's effort to translate it to PROJ form in C and
> I am using that as a base *after* major surgery.  It came from
> Thomas Flamming in thread:
> 
> http://remotesensing.org/lists/proj_archive/msg00306.html
> 
> As for odd usage of x-y, what's one to do.  At least *our*
> traditional form allows for making proper maps.
> 
> Thanks for the additional digits.
> 
> On Thu, 2003-02-13 at 04:42, Ron Russell wrote:
> > Gerald I. Evenden wrote:
> > >
> > > A few days ago I took up the seemingly minor task of installing
> > > the Czech projection Krovak Oblique Conformal Conic in my version
> > > of PROJ.4.  There seemed to be documentation and benchmarks on
>         ...
> >
> > 10 years ago I implemented this projection in Fortran in our (extended)
> > version of GCTPLIB. I was given a photocopy of the relevent chapter
> > of a Czeck publication (in Czeck!) by our clients, the Czeck Institute
> > for Surveying and Mapping and after a lot of interpretation of the
> > diagrams and figures (but with only the odd word translated)
> > produced the code.
> >
> > This paper used two constants for the Projection of the (Bessel)
> > ellipsoid onto A Gausian Conformal Sphere, (using a latitude of
> > 49 30N), what they called alpha and k.
> >
> > I finally tracked these down, alpha is what you call B and k is much
> > to complicated to write out in an email!
> >
> > As if the source document was not enough of a problem, the Czecks use
> > a left handed coordinate system (Westings and Southings) with the origin
> > at the apex of the cone. Our display systems assume a Easting/Northing
> > so in fact we produced a pseudo Krovak system with a large False Northing;
> > The numbers are correct but they all have the wrong sign, however the
> > maps come out the correct way on the paper!
> >
> > The Czecks also sometimes use Ferra as their prime meridian.
> >
> > My code gives exactly the same results for the points you have listed.
> >
> > The last two points are the test points given in the paper I used (with
> > a few more decimal places)
> >
> > Phi 50 12 32.44140 Lambda 34 30 59.17900 => 568990.9973W 1050538.6493S
> > Phi 50 15 30.70080 lambda 35 05 51.17920 => 527189.1948W 1049221.1899S
> >
> > (They assume Ferra is 17 40e of Greenwich.)
> >
> > Given the problems I had interpreting this document, if it is the
> > definitive source, I am not surprised it there are several intepretations
> > about!
> >
> > Ron
> 
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.

Ron
-- 


---------------------------------------------------------------------
Ron Russell
Senior Software Engineer, Laser-Scan Ltd
+44(0)1223 420414

http://www.laser-scan.com

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Thu Feb 13 23:52:00 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 14 Feb 2003 02:52:00 -0500
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
In-Reply-To: <1045151531.1325.34.camel@localhost.localdomain>
References: <OF674D01C4.4640E396-ON86256CCA.000D92BE-86256CCA.000D9301@lsu.edu>	<1045066722.1776.38.camel@localhost.localdomain> 	<3E4B686E.11F8C69C@lsl.co.uk> <1045151531.1325.34.camel@localhost.localdomain>
Message-ID: <3E4CA020.9050107@pobox.com>

Gerald I. Evenden wrote:
> I did find someone's effort to translate it to PROJ form in C and
> I am using that as a base *after* major surgery.  It came from
> Thomas Flamming in thread:
> 
> http://remotesensing.org/lists/proj_archive/msg00306.html


Gerald,

Note that I have already incorporated the Krovak projection into the
CVS version of PROJ.4 a month or so ago.  If you want to make improvements
it would have been nice to work from that.

I can't speak to the horrors of the internet though I am certainly
responsible for propagating dodgy information on this and other projections
on the GeoTIFF and PROJ.4 web sites.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Fri Feb 14 00:01:10 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 14 Feb 2003 03:01:10 -0500
Subject: [OSRS-PROJ] Oblique Stereographic 
Message-ID: <3E4CA246.2060306@pobox.com>

Folks,

I understand that there are (at least) two common forms of the Oblique
Stereographic projection.  In the Mentor Software system they are referred
to as the "International" version and the "Snyder" version.  It appears that
the "proj=stere" used like this "+proj=stere +lat_0=34.2 +lon_0=39.15
+k=0.999534 +x_0=0 +y_0=0 +a=6378249.2 +b=6356515 +units=m" implements the
Snyder version.   I am wondering if there is a version of the "international"
equations in PROJ.4 already?

The differences are on the order for 1 arcsecond for my test case ... pretty
substantial.

PS. I believe I am assuming that coordinate systems such as "Deir ez Zor /
Levant Stereographic" listed in the EPSG database with method code 9809 are
the so the called International version.  The EPSG database gives the
equations for it's method, and notes that Snyder discussed a different
formulation that produces different results.

PPS. Anyone interested in implementing the EPSG equations if they haven't
already been incorporated into PROJ.4 under another name?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From cjmce at lsu.edu  Fri Feb 14 06:23:35 2003
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 14 Feb 2003 08:23:35 -0600
Subject: [OSRS-PROJ] Oblique Stereographic
Message-ID: <OFAD207DA5.6EB9345E-ON86256CCD.004F0F52-86256CCD.004F1092@lsu.edu>


There's the Stereographic Double that is used in the Canadian Maritime
Provinces, like Prince Edward Island; there's the Roussilhe Stereographic
used by the French Armed forces, like in Syria and also in the Netherlands;
and there's the Hristow Stereographic that's used in Romania and various
other kinds of truncations of Hristow's series like in Poland and elsewhere
...

For more info on Hristow, see my past column on Bulgaria.  In English in
"PE&RS" and in Bulgarian in their national Journal of Geodesy.  Prof.
Hristow was quite a guy.

Cliff Mugnier
LOUISIANA STATE UNIVERSITY
----------------------------------
Folks,

I understand that there are (at least) two common forms of the Oblique
Stereographic projection.  In the Mentor Software system they are referred
to as the "International" version and the "Snyder" version.  It appears
that
the "proj=stere" used like this "+proj=stere +lat_0=34.2 +lon_0=39.15
+k=0.999534 +x_0=0 +y_0=0 +a=6378249.2 +b=6356515 +units=m" implements the
Snyder version.   I am wondering if there is a version of the
"international"
equations in PROJ.4 already?

The differences are on the order for 1 arcsecond for my test case ...
pretty
substantial.

PS. I believe I am assuming that coordinate systems such as "Deir ez Zor /
Levant Stereographic" listed in the EPSG database with method code 9809 are
the so the called International version.  The EPSG database gives the
equations for it's method, and notes that Snyder discussed a different
formulation that produces different results.

PPS. Anyone interested in implementing the EPSG equations if they haven't
already been incorporated into PROJ.4 under another name?

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.



----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Fri Feb 14 07:54:32 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 14 Feb 2003 10:54:32 -0500
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
In-Reply-To: <3E4CA020.9050107@pobox.com>
References: 	<OF674D01C4.4640E396-ON86256CCA.000D92BE-86256CCA.000D9301@lsu.edu>	<1045066
	 722.1776.38.camel@localhost.localdomain> 	<3E4B686E.11F8C69C@lsl.co.uk>
	<1045151531.1325.34.camel@localhost.localdomain> 
	<3E4CA020.9050107@pobox.com>
Message-ID: <1045238073.1087.79.camel@localhost.localdomain>

I follow Lobochevski's rule: "Plagiarize!  Let nothing evade your eyes!
But please, let us call it research." (from old Tom Lehar song)
(please pardon possible misspellings). ;-)

I pulled down a copy of  proj-4.4.5.tar but did not find anything
about Krovak.  I presume this code is still on your "desk."

I would be glad to look at anything.  At the moment I nearly have
the rehacked code functioning but still in need of "refinements."

I was also working on a TeX/pdf of a writeup for Krovak that contains
the math in readable form---so far, the Czech site looks like the
only reliable source---at least it matches the code.

I would do a map but I don't have any vector data suitable for
medium scale European area showing current politics.

Because of getting the "long lost sources" back onto my current
machine due to Mike Schmidt's needs, I fell into a spasm of
doing some updates to PROJ.4.

On Fri, 2003-02-14 at 02:52, Frank Warmerdam wrote:
> Gerald I. Evenden wrote:
> > I did find someone's effort to translate it to PROJ form in C and
> > I am using that as a base *after* major surgery.  It came from
> > Thomas Flamming in thread:
> > 
> > http://remotesensing.org/lists/proj_archive/msg00306.html
> 
> 
> Gerald,
> 
> Note that I have already incorporated the Krovak projection into the
> CVS version of PROJ.4 a month or so ago.  If you want to make improvements
> it would have been nice to work from that.
> 
> I can't speak to the horrors of the internet though I am certainly
> responsible for propagating dodgy information on this and other projections
> on the GeoTIFF and PROJ.4 web sites.
> 
> Best regards,


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From cjmce at lsu.edu  Fri Feb 14 08:37:27 2003
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 14 Feb 2003 10:37:27 -0600
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
Message-ID: <OF1CE1CC8D.70A752C2-ON86256CCD.005B510E-86256CCD.005B51DC@lsu.edu>


Extracted from my January 2000 column on the Grids and Datums of the Czech
Republic and still available for downloading from:

http://www.asprs.org/asprs/resources/grids/index.html

Professor Ing.  Josef Krøvák (commonly spelled Krovák or Krovak) prepared
the Conformal Oblique Conic Projection of Czechoslovakia in 1922 for the
preparation of cadastral (tax) maps and topographic maps of medium scales
for the civil geodetic service of Czechoslovakia.  The ?starting meridian?
was termed Ferro where the MGI usage differed from the civilian definition
listed above.  The MGI used the relation: Ferro = 17° 39' 45.90" East of
Greenwich.  The Krovak Projection is a double projection in that the
oblique conic is projected from the Gaussian Sphere where the radius =
6,380,703.6105 meters.  The Gaussian Sphere was ?invented? by Carl
Friederich Gauss, and is also commonly known as the ?conformal sphere.? It
is simply the geometric mean of the ellipsoidal normal (at a point)
terminated by the semi-minor axis and the radius of the ellipsoid (at the
same point) in the plane of the meridian.  .  The oblique cone has a pole
centered at φ = 59° 42' 42.6969" N, λ = 42° 30' East of Ferro (southwest of
Helsinki, Finland).  The spherical cartographic coordinates are transformed
into the rectangular plane coordinates of the uniform cadastral system.
For this purpose the reduced (0.9999) Gaussian Sphere is projected on the
surface of an oblique cone touching the sphere around the central
cartographic parallel, having a cartographic latitude of 78° 30' N, with
the vertex in the extended axis connecting the center of the sphere at the
rotation angle of 30° 17' 17.3031".  This is still in use as of 2000, and
is known as Systém - Jednotné Trigonometrické Sítì Katastrální or S-JTSK
(System of the Unified Czech/Slovak Trigonometrical Cadastral Net).  The
Czechs state (Prof.  Ing.  Bohuslav Veverka, DrSc., Prague, November 1997)
that the ?scale, location and orientation of the S-JTSK on the surface of
the Bessel?s ellipsoid was derived from the results of the historical
Austro/ Hungarian military surveys in the years 1862-98. .  There are 42
identical points on the Czech territory used for transformation
computations.  Astronomical orientation was measured only on the
Hermannskogel trigonometrical point in Austria, scale factor was derived
from the basis of the geodetic length in Josefov.? Professor Veverka
published a program written in the Pascal language that performs the direct
and inverse transformations with the Krovak Projection.  Note that the
X-axis normally coincides with the meridian 42° 30' East of Ferro
increasing South, and the orthogonal Y-axis is increasing West.  A test
point provided lists: φ = 48° 07' 46.2973, λ= 35° 42' 35.2147", Y =
504,691.675 m, X = 1,289,068.724 m.  The Krovak Projection was officially
adopted by the Czech military in 1932.

Cliff Mugnier
LOUISIANA STATE UNIVERSITY
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Fri Feb 14 10:43:35 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 14 Feb 2003 13:43:35 -0500
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
In-Reply-To: 	<OF1CE1CC8D.70A752C2-ON86256CCD.005B510E-86256CCD.005B51DC@lsu.edu>
References: 	<OF1CE1CC8D.70A752C2-ON86256CCD.005B510E-86256CCD.005B51DC@lsu.edu>
Message-ID: <1045248216.2017.6.camel@localhost.localdomain>

In the example below (and checked with the web site) the longitude
seems to be a bit odd.  The Czech Republic only extends from about
12 to 19 east longitude. The 35 lon puts the point somewhere in
Russia.  Are you using a non-Greenwich meridian?

Current progs do not work on this example although they check on
examples in the region of application.

On Fri, 2003-02-14 at 11:37, Clifford J Mugnier wrote:
> 
> Extracted from my January 2000 column on the Grids and Datums of the Czech
> Republic and still available for downloading from:
> 
> http://www.asprs.org/asprs/resources/grids/index.html
	...
> increasing South, and the orthogonal Y-axis is increasing West.  A test
> point provided lists: φ = 48° 07' 46.2973, λ= 35° 42' 35.2147", Y =
> 504,691.675 m, X = 1,289,068.724 m.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Fri Feb 14 10:39:50 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 14 Feb 2003 13:39:50 -0500
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
In-Reply-To: <1045238073.1087.79.camel@localhost.localdomain>
References: <OF674D01C4.4640E396-ON86256CCA.000D92BE-86256CCA.000D9301@lsu.edu>	<1045066	 722.1776.38.camel@localhost.localdomain> 	<3E4B686E.11F8C69C@lsl.co.uk>	<1045151531.1325.34.camel@localhost.localdomain> 	<3E4CA020.9050107@pobox.com> <1045238073.1087.79.camel@localhost.localdomain>
Message-ID: <3E4D37F6.7000301@pobox.com>

Gerald I. Evenden wrote:
> I follow Lobochevski's rule: "Plagiarize!  Let nothing evade your eyes!
> But please, let us call it research." (from old Tom Lehar song)
> (please pardon possible misspellings). ;-)
> 
> I pulled down a copy of  proj-4.4.5.tar but did not find anything
> about Krovak.  I presume this code is still on your "desk."

Gerald,

The code is in CVS, and publically available but not yet in a
published release.  You install a CVS client and grab the latest
source if you like ... I would be happy to provide update access to
the CVS repository.  But I will send the code in a separate message
to save you the trouble of setting up CVS.

I made some effort in incorporating the code to replace hardcoded
constants with parameters, but I did not succeed in extracting the
azimuth or pseudo-standard parallel.

If you produce a better normalized form I would be happy to incorporate
it.

> I would be glad to look at anything.  At the moment I nearly have
> the rehacked code functioning but still in need of "refinements."
> 
> I was also working on a TeX/pdf of a writeup for Krovak that contains
> the math in readable form---so far, the Czech site looks like the
> only reliable source---at least it matches the code.
> 
> I would do a map but I don't have any vector data suitable for
> medium scale European area showing current politics.
> 
> Because of getting the "long lost sources" back onto my current
> machine due to Mike Schmidt's needs, I fell into a spasm of
> doing some updates to PROJ.4.

Cool.  Well, I reiterate my offer to provide you with update access
to the version hosted at remotesensing.org.  It seems like a pity to
have two divergent versions of PROJ.4 with different abilities.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Fri Feb 14 11:15:43 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 14 Feb 2003 14:15:43 -0500
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
In-Reply-To: <OF1CE1CC8D.70A752C2-ON86256CCD.005B510E-86256CCD.005B51DC@lsu.edu>
References: <OF1CE1CC8D.70A752C2-ON86256CCD.005B510E-86256CCD.005B51DC@lsu.edu>
Message-ID: <3E4D405F.3030800@pobox.com>


Folks,

While I have been happy with the results that the Krovak projection in
PROJ.4 gives (subject to improvement by Gerald), I am having a devil of
a time mapping the coordinate system into a form usable in FME, based on
the libraries from Mentor Software.

In OpenGIS Well Known Text format I have converted the EPSG database dump
of EPSG:2065 to:

PROJCS["S-JTSK (Ferro) / Krovak",
     GEOGCS["S-JTSK (Ferro)",
         DATUM["S_JTSK_Ferro",
             SPHEROID["Bessel 1841",6377397.155,299.1528128,
                 AUTHORITY["EPSG","7004"]],
             AUTHORITY["EPSG","6818"]],
         PRIMEM["Ferro",-17.66666666666667,
             AUTHORITY["EPSG","8909"]],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4818"]],
     PROJECTION["Krovak"],
     PARAMETER["latitude_of_center",49.5],
     PARAMETER["longitude_of_center",42.5],
     PARAMETER["azimuth",30.28813972222222],
     PARAMETER["pseudo_standard_parallel_1",78.5],
     PARAMETER["scale_factor",0.9999],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","2065"]]

In PROJ.4 this is:

  +proj=krovak +lat_0=49.5 +lon_0=24.83333333333333
               +alpha=30.28813972222222 +k=0.9999 +x_0=0 +y_0=0
               +ellps=bessel +pm=ferro +units=m +no_defs

However, the FME/Mentor KROVAK coordinate system definition that I think
corresponds looks like this:

   CS_NAME: Krovak S-JTSK
   DESC_NM: Czechoslovakian Grid System (S-JTSK) (precise origin)
   SOURCE: Prof. ing. Bohuslav Veverka, DrSc, GEOSOFT

   PROJ: KROVAK
   EL_NAME: BESSEL

   ORG_LNG: -17.6665931666667
   ORG_LAT: 49.5
   PARM1: 42.5
   PARM2: 59.7575985555556
   PARM3: 78.5
   SCL_RED: 0.9999
   X_OFF: 0
   Y_OFF: 0
   UNIT: METER

The manner in which the projection parameters are described seems to
differ in some fundamental way. The online documentation for this
projection transform type (KROVAK) looks like this:

KROVAK: Oblique Conformal Conic for Czech and Slovak Republics

This an implementation of the Oblique Conformal Conic projection as is used
in the Czech and Slovak republics where the system was devised.

Parameter     Description
Name

PARM1    The longitude, in degrees, of oblique conic pole.
PARM2    The latitude, in degrees, of the oblique conic pole.
PARM3    Oblique Standard Parallel. This is the latitude of the standard par-
          allel of the oblique cone on the Gaussian surface. Note, only a
          single standard parallel is supported, but the effect of two stan-
          dard parallels is achieved through the use of the scale reduction
          factor.
ORG_LNG  Origin longitude for the Oblique Conformal Conic projection.
          For the Krovak system, this is usually the meridian of Ferro:  17
          39 59.735400W. An approximate value of 17 40 00.00W is often
          used.
ORG_LAT  Origin latitude for the Oblique Conformal Conic projection. This
          is usually 49 30 00N for the Krovakl systems.
X_OFF    The false easting to be applied to all X coordinates, selected to
          cause all X coordinates within the coordinate system to be posi-
          tive values of reasonable size.
Y_OFF    The false northing to be applied to all Y coordinates.

My confusion is how the EPSG latitude_of_center, longitude_of_center,
azimuth and pseudo-standard parallel relate to the PARM1, PARM2, PARM3,
ORG_LNG and ORG_LAT parameters.  It would appear there is nothing corresponding
to the azimuth, and instead the location of the "pole" implied by it is
given (as PARM1/PARM2).  Is there an obvious way to compute PARM2, given
the EPSG parameters?

Note, I have not confirmed that the FME Krovak S-JTSK projection gives the
same results as my PROJ.4 formulation.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From cjmce at lsu.edu  Fri Feb 14 11:21:55 2003
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 14 Feb 2003 13:21:55 -0600
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
Message-ID: <OF6376D6E4.016A1EFE-ON86256CCD.006A601A-86256CCD.006A607B@lsu.edu>


Gerald,

Send me your fax number.

Cliff


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Fri Feb 14 11:47:01 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 14 Feb 2003 14:47:01 -0500
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
In-Reply-To: <OF6376D6E4.016A1EFE-ON86256CCD.006A601A-86256CCD.006A607B@lsu.edu>
References: <OF6376D6E4.016A1EFE-ON86256CCD.006A601A-86256CCD.006A607B@lsu.edu>
Message-ID: <3E4D47B5.9000709@pobox.com>

Clifford J Mugnier wrote:
> Gerald,
> 
> Send me your fax number.

Cliff,

It is (905) 780-0450.

By the way, I added a link to your online Grids and Datums archive.  It is
a great resource.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Fri Feb 14 19:19:55 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 14 Feb 2003 22:19:55 -0500
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
In-Reply-To: <3E4D47B5.9000709@pobox.com>
References: 	<OF6376D6E4.016A1EFE-ON86256CCD.006A601A-86256CCD.006A607B@lsu.edu> 
	<3E4D47B5.9000709@pobox.com>
Message-ID: <1045279196.3202.89.camel@localhost.localdomain>

Indeed, this IS the horrors of Krovak.

I went back to fundamentals as the statement of the definition
of the Krovak projections seems strait forward (though a bit
weird).

1. convert latitude to Gaussian sphere.  Use Snyder Working
	Manual p. 15 or SP251 p. 86(eqn 256) (both same)

2. translate lat/lon on sphere --- see Snyder or proj doc.

3. project translated coords onto tangential cone with Lambert CC.

All the needed math seems to be available and, except for the
fuzzy logic defining the parameters, should be straight forward.

HOWEVER, in all math descriptions and code versions I have obtained
bear little resemblance to the above steps.  To be sure, reorganizing
and manipulations may change the appearance but I cannot account
for all the machinations I see.  With one exception, the axis
translations do make sense.

I must be missing something.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From cjmce at lsu.edu  Fri Feb 14 20:25:03 2003
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 14 Feb 2003 22:25:03 -0600
Subject: [OSRS-PROJ] Gerald I. Evenden - Hello?
Message-ID: <OF170FE6A8.D959077E-ON86256CCE.001843EC-86256CCE.00184438@lsu.edu>


Please contact me directly regarding the Krovak projection.

Clifford J. Mugnier (cjmce at LSU.edu)
Chief of Geodesy
Center for GeoInformatics
LOUISIANA STATE UNIVERSITY
Dept. of Civil Engineering
CEBA 3223A
Baton Rouge, LA  70810
Facsimiile (225) 578-8652
Voice       (225) 578-8536
Beep        (504) 382-4371
-----------------------------------------------------------
http://www.ASPRS.org/resources.html
http://www.ce.LSU.edu/~mugnier/
-----------------------------------------------------------


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From jnovak at novacell.com  Sat Feb 15 17:55:28 2003
From: jnovak at novacell.com (Administrator)
Date: Sat, 15 Feb 2003 17:55:28 -0800
Subject: [OSRS-PROJ] Oblique Stereographic 
Message-ID: <41CC46B3925E384BA64B1FB5041C38FA3308@www.novacell.com>

Hey Frank,

If you have the equations for this projhection, I'm willing to give it a
go.

John Novak
Novacell Technologies
www.novacell.com

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam at pobox.com] 
Sent: Friday, February 14, 2003 12:01 AM
To: PROJ.4 Discussion
Subject: [OSRS-PROJ] Oblique Stereographic 


Folks,

I understand that there are (at least) two common forms of the Oblique
Stereographic projection.  In the Mentor Software system they are
referred to as the "International" version and the "Snyder" version.  It
appears that the "proj=stere" used like this "+proj=stere +lat_0=34.2
+lon_0=39.15
+k=0.999534 +x_0=0 +y_0=0 +a=6378249.2 +b=6356515 +units=m" implements 
+the
Snyder version.   I am wondering if there is a version of the
"international"
equations in PROJ.4 already?

The differences are on the order for 1 arcsecond for my test case ...
pretty substantial.

PS. I believe I am assuming that coordinate systems such as "Deir ez Zor
/ Levant Stereographic" listed in the EPSG database with method code
9809 are the so the called International version.  The EPSG database
gives the equations for it's method, and notes that Snyder discussed a
different formulation that produces different results.

PPS. Anyone interested in implementing the EPSG equations if they
haven't already been incorporated into PROJ.4 under another name?

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From ron at lsl.co.uk  Mon Feb 17 03:01:44 2003
From: ron at lsl.co.uk (Ron Russell)
Date: Mon, 17 Feb 2003 11:01:44 +0000
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
References: <OF6376D6E4.016A1EFE-ON86256CCD.006A601A-86256CCD.006A607B@lsu.edu> <3E4D47B5.9000709@pobox.com>
Message-ID: <3E50C118.1B096A1B@lsl.co.uk>

Frank Warmerdam wrote:
> 
> Clifford J Mugnier wrote:
> > Gerald,
> >
> > Send me your fax number.
> 
> Cliff,
> 
> It is (905) 780-0450.
> 
> By the way, I added a link to your online Grids and Datums archive.  It is
> a great resource.
> 
> Best regards,
> 
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.

Gerald,

I have taken the liberty of sending a copy of my Czeck
document to this number.


Ron
-- 


---------------------------------------------------------------------
Ron Russell
Senior Software Engineer, Laser-Scan Ltd
+44(0)1223 420414

http://www.laser-scan.com

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Mon Feb 17 07:24:52 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 17 Feb 2003 10:24:52 -0500
Subject: [OSRS-PROJ] Oblique Stereographic
In-Reply-To: <41CC46B3925E384BA64B1FB5041C38FA3308@www.novacell.com>
References: <41CC46B3925E384BA64B1FB5041C38FA3308@www.novacell.com>
Message-ID: <3E50FEC4.2010805@pobox.com>

Administrator wrote:
> Hey Frank,
> 
> If you have the equations for this projhection, I'm willing to give it a
> go.

John,

The "International" form of the Oblique Stereographic projection is
described in the following document from EPSG, section 1.4.8.1.

   http://www.remotesensing.org/geotiff/proj_list/guid7.html

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Mon Feb 17 08:16:45 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 17 Feb 2003 11:16:45 -0500
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
In-Reply-To: <3E50C118.1B096A1B@lsl.co.uk>
References: 	<OF6376D6E4.016A1EFE-ON86256CCD.006A601A-86256CCD.006A607B@lsu.edu>
	<3E4D47B5.9000709@pobox.com>  <3E50C118.1B096A1B@lsl.co.uk>
Message-ID: <1045498606.1633.7.camel@localhost.localdomain>

I am a little confused here.  Are there two "Geralds" out there?
Someone did the reply about the fax number who wasn't me with
a number that is not even in my area code.  I was confused but
to shutup to avoid more confusion.

Will the real Gerald please stand up.

BTW, my fax machine is one the other half of the machine I
use for this message so to receive faxes I have to reboot
to Messysoft---which I am loath to do because it turns off
the productive half of the machine.  :-(

On Mon, 2003-02-17 at 06:01, Ron Russell wrote:
> Frank Warmerdam wrote:
> > 
> > Clifford J Mugnier wrote:
> > > Gerald,
> > >
> > > Send me your fax number.
> > 
> > Cliff,
> > 
> > It is (905) 780-0450.
> > 
> > By the way, I added a link to your online Grids and Datums archive.  It is
> > a great resource.
> > 
> > Best regards,
> > 
> > --
> > ---------------------------------------+--------------------------------------
> > I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam
> > and watch the world go round - Rush    | Geospatial Programmer for Rent
> > 
> > ----------------------------------------
> > PROJ.4 Discussion List
> > See http://www.remotesensing.org/proj for subscription, unsubscription
> > and other information.
> 
> Gerald,
> 
> I have taken the liberty of sending a copy of my Czeck
> document to this number.
> 
> 
> Ron
> -- 
> 
> 
> ---------------------------------------------------------------------
> Ron Russell
> Senior Software Engineer, Laser-Scan Ltd
> +44(0)1223 420414
> 
> http://www.laser-scan.com
> 
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From karl at kls2.com  Mon Feb 17 09:18:00 2003
From: karl at kls2.com (Karl Swartz)
Date: Mon, 17 Feb 2003 09:18:00 -0800 (PST)
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
In-Reply-To: <1045498606.1633.7.camel@localhost.localdomain> from "Gerald I.
 Evenden" at "Feb 17, 2003 11:16:45 am"
Message-ID: <200302171718.h1HHI0ML026715@orion.kls2.com>

> I am a little confused here.  Are there two "Geralds" out there?
> Someone did the reply about the fax number who wasn't me with
> a number that is not even in my area code.  I was confused but
> to shutup to avoid more confusion.

It appears that Frank responded with his fax number.  Such is the
problem that arises from sending a request to one individual to an
entire mailing list.

Of course, the configuration of the mailing list (a simple reply goes to
the list, not to the sender of the message to which you are replying)
doesn't help matters -- it's non-trivial to reply to just the one person
to whom you think you are replying.  Many people regard that as a Really
Bad Thing, and I know of at least one case where it very nearly led to a
list participant being fired for inadvertently releasing confidential
information.  (He replied to one of his colleagues, or so he thought.)

--
Karl Swartz	|Home	karl at kls2.com		http://www.kls2.com/~karl/
"The average dog is a nicer person than the average person."
  - Andrew A. Rooney
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Mon Feb 17 10:13:58 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 17 Feb 2003 13:13:58 -0500
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
In-Reply-To: <200302171718.h1HHI0ML026715@orion.kls2.com>
References: <200302171718.h1HHI0ML026715@orion.kls2.com>
Message-ID: <3E512666.6040108@pobox.com>

Karl Swartz wrote:
>>I am a little confused here.  Are there two "Geralds" out there?
>>Someone did the reply about the fax number who wasn't me with
>>a number that is not even in my area code.  I was confused but
>>to shutup to avoid more confusion.
> 
> 
> It appears that Frank responded with his fax number.  Such is the
> problem that arises from sending a request to one individual to an
> entire mailing list.

Folks,

As Karl notes, I mistook the message as having been personally to me, and
replied without checking the to address or anything.  Sorry about that.

> Of course, the configuration of the mailing list (a simple reply goes to
> the list, not to the sender of the message to which you are replying)
> doesn't help matters -- it's non-trivial to reply to just the one person
> to whom you think you are replying.  Many people regard that as a Really
> Bad Thing, and I know of at least one case where it very nearly led to a
> list participant being fired for inadvertently releasing confidential
> information.  (He replied to one of his colleagues, or so he thought.)

I understand this position, but the problem I also often encounter is that
mailing lists configured to *not* rewrite the reply-to address to the list
often fail to capture much of the discussion because by default the discussion
immediately goes off-list between the original requestor and the replier.  On
a very busy list this might be a plus, but on a less busy list it reduces
public discussion.

Of course if people were more careful about who they reply to either mechanism
would suffice.  However, I have certainly noticed that I generally just "Reply"
(rather than Reply All) and I think many others do as well.

In short, my policy on not-too-busy lists has been to have the Reply-To
rewritten to the list in order to maximize list based discussion.

Best regards,

---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From glynn.clements at virgin.net  Mon Feb 17 12:49:05 2003
From: glynn.clements at virgin.net (Glynn Clements)
Date: Mon, 17 Feb 2003 20:49:05 +0000
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
In-Reply-To: <3E512666.6040108@pobox.com>
References: <200302171718.h1HHI0ML026715@orion.kls2.com>
	<3E512666.6040108@pobox.com>
Message-ID: <15953.19137.169061.161395@cerise.nosuchdomain.co.uk>


Frank Warmerdam wrote:

> Of course if people were more careful about who they reply to either
> mechanism would suffice.

Not quite.

First, if a poster's From: address isn't valid or appropriate, and
they use the Reply-To: header to specify the correct address (this is
why the Reply-To: header exists), replacing it eliminates the
possibility of replying to the poster (unless the address is repeated
elsewhere, e.g. in the signature).

Second, because correctly-behaving mail clients completely ignore the
From: header if a Reply-To: header exists, both "reply" (reply to
sender) and "follow-up" (reply to sender and all recipients) will
usually (i.e. unless there are CCs) go solely to the list address. If
you wish to post to the From: address, you have to perform a manual
copy-and-paste.

-- 
Glynn Clements <glynn.clements at virgin.net>
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Wed Feb 19 08:59:54 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 19 Feb 2003 11:59:54 -0500
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
In-Reply-To: <15953.19137.169061.161395@cerise.nosuchdomain.co.uk>
References: <200302171718.h1HHI0ML026715@orion.kls2.com>
	<3E512666.6040108@pobox.com> 
	<15953.19137.169061.161395@cerise.nosuchdomain.co.uk>
Message-ID: <1045673995.1801.32.camel@localhost.localdomain>

This is just a short note on the status of the Krovak projection.

The forward projection appears to be working in its native
math-based mode.  Tests for conformality with the -V option
show it is OK.  Math-correct x-y are in the -x -y quadrant
for Czech geographic coordinates.

Currently the execution script looks like:

<S-JTSK> +proj=kocc +ellps=bessel +czech
     +lon_0=24d50 +lat_0=49d30
     +lat_t=59d42'42.69689 +lat_1=78d30 +k_0=.9999

To generate Czech grid system values the flag option +czech
must be used to shift math-x to Y and math-y to X, changing
the sign to positive in Czech area.  That is plus y west of
Helsinki and plus x south of Helsinki.

Another factor to resolve is the longitude used by the Czechs.
Test values of FORTRAN and C code examples us Greenwich PM
data but one example obviously must use another meridian---
perhaps the Ferro one.  The above script is set for
Greenwich.

Lastly, the inverse has to be added but once we have a
good forward, this should not take as much time.

If anyone is interested in the math I would be glad to
email a pdf file---about 26k in .gz or 50+k in uncompressed
form.  As far as I know, this is now the defining math
for the Krovak in English.  Please ask for a copy, review
it and let me know of any deficiencies.

For hassles in using the Krovak in Grass, I suggest they
use the native math form with false eastings and northings
to get positive first quadrant values and not mess with the
code.

Lastly, I tried to make the basic projection modifiable for
general applications.  Some simplifications in the cod were
made so that future mods may be required for true generality.
If I had included the total math there would have been a few
more + options to worry about.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From ron at lsl.co.uk  Thu Feb 20 00:49:02 2003
From: ron at lsl.co.uk (Ron Russell)
Date: Thu, 20 Feb 2003 08:49:02 +0000
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
References: <200302171718.h1HHI0ML026715@orion.kls2.com>
		<3E512666.6040108@pobox.com> 
		<15953.19137.169061.161395@cerise.nosuchdomain.co.uk> <1045673995.1801.32.camel@localhost.localdomain>
Message-ID: <3E54967D.78930BC1@lsl.co.uk>

Gerald I. Evenden wrote:
> 
> This is just a short note on the status of the Krovak projection.
> 
> The forward projection appears to be working in its native
> math-based mode.  Tests for conformality with the -V option
> show it is OK.  Math-correct x-y are in the -x -y quadrant
> for Czech geographic coordinates.
> 
> Currently the execution script looks like:
> 
> <S-JTSK> +proj=kocc +ellps=bessel +czech
>      +lon_0=24d50 +lat_0=49d30
>      +lat_t=59d42'42.69689 +lat_1=78d30 +k_0=.9999
> 
> To generate Czech grid system values the flag option +czech
> must be used to shift math-x to Y and math-y to X, changing
> the sign to positive in Czech area.  That is plus y west of
> Helsinki and plus x south of Helsinki.
> 
> Another factor to resolve is the longitude used by the Czechs.
> Test values of FORTRAN and C code examples us Greenwich PM
> data but one example obviously must use another meridian---
> perhaps the Ferro one.  The above script is set for
> Greenwich.
> 
> Lastly, the inverse has to be added but once we have a
> good forward, this should not take as much time.
> 
> If anyone is interested in the math I would be glad to
> email a pdf file---about 26k in .gz or 50+k in uncompressed
> form.  As far as I know, this is now the defining math
> for the Krovak in English.  Please ask for a copy, review
> it and let me know of any deficiencies.
> 
> For hassles in using the Krovak in Grass, I suggest they
> use the native math form with false eastings and northings
> to get positive first quadrant values and not mess with the
> code.
> 
> Lastly, I tried to make the basic projection modifiable for
> general applications.  Some simplifications in the cod were
> made so that future mods may be required for true generality.
> If I had included the total math there would have been a few
> more + options to worry about.
> 
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.


Gerald,

Can I please have a copy of the pdf file. The zipped version
is fine.

Ron
-- 


---------------------------------------------------------------------
Ron Russell
Senior Software Engineer, Laser-Scan Ltd
+44(0)1223 420414

http://www.laser-scan.com

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Mon Feb 24 10:46:33 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 24 Feb 2003 13:46:33 -0500
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
In-Reply-To: <15953.19137.169061.161395@cerise.nosuchdomain.co.uk>
References: <200302171718.h1HHI0ML026715@orion.kls2.com>
	<3E512666.6040108@pobox.com> 
	<15953.19137.169061.161395@cerise.nosuchdomain.co.uk>
Message-ID: <1046112394.2020.37.camel@localhost.localdomain>

I am just about to put this projection to bed but I must say that
it has taught me an important lesson than is worth passing on.

MORAL: do not post math formulas in html format.

Rank this as the 11th commandment although I feel is is more
important than some of the traditional 10.

The only suitable means that I know of at the moment is the pdf
format used in conjunction with a decent math formatter such as
TeX or LaTeX.  All this material is available for most OSs that
I am aware of and free in most cases.

The Remotesensing group should redo pages like

http:/www.remotesensing.org/geotiff/proj_list/guid7.html

to not include the contents of Guidance Note 7 directly but to
point to the pdf file.  By the time browsers, written by those
who wouldn't know an integral or partial differential from a
hole in the ground, get done displaying the formularies on
the screen one has a mess.  It is even worse with printed
results.

Enough of the "Mad as hell and I'm not going to take it anymore"
stuff:

I will shortly update my personal web site to include a directory
of PROJ.4 miscellany.  It will include a pdf of the Krovak
projection description as well as PJ_kocc.c --- all
suitable for framing as well as a README on how to install it
on PROJ.4 systems that are reasonably compatible with the old kai
distribution.

Have a nice day.  :-)

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Tue Feb 25 06:31:39 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 25 Feb 2003 09:31:39 -0500
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
In-Reply-To: <3E50C118.1B096A1B@lsl.co.uk>
References: 	<OF6376D6E4.016A1EFE-ON86256CCD.006A601A-86256CCD.006A607B@lsu.edu>
	<3E4D47B5.9000709@pobox.com>  <3E50C118.1B096A1B@lsl.co.uk>
Message-ID: <1046183500.1318.7.camel@localhost.localdomain>

Per yesterday's promise the following web site contains Krovak
documentation, PROJ.4 C code and test script:

http://members.bellatlantic.net/~vze2hc4d/proj4/

The site will also be the location of any changes made to the
original distribution of PROJ.4 by this author.

Please send contact me with any informations about failure
of the web site to correctly display or distribute information.
Complaints, errata, etc. about PROJ.4 always "welcome."

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Tue Feb 25 07:32:01 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 25 Feb 2003 10:32:01 -0500
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
In-Reply-To: <1046183500.1318.7.camel@localhost.localdomain>
References: <OF6376D6E4.016A1EFE-ON86256CCD.006A601A-86256CCD.006A607B@lsu.edu>	<3E4D47B5.9000709@pobox.com>  <3E50C118.1B096A1B@lsl.co.uk> <1046183500.1318.7.camel@localhost.localdomain>
Message-ID: <3E5B8C71.2010803@pobox.com>

Gerald I. Evenden wrote:
> Per yesterday's promise the following web site contains Krovak
> documentation, PROJ.4 C code and test script:
> 
> http://members.bellatlantic.net/~vze2hc4d/proj4/
> 
> The site will also be the location of any changes made to the
> original distribution of PROJ.4 by this author.
> 
> Please send contact me with any informations about failure
> of the web site to correctly display or distribute information.
> Complaints, errata, etc. about PROJ.4 always "welcome."

Gerald,

I have added a link to your web site from the site at RemoteSensing.org.
I hope to incorporate your version of the Krovak into my version though
I am not sure when I will get to that.  I will likely remove the existing
code and replace it with yours though I want to review how to get the
expected results with prime meridians and also the implications of the
+czech flag.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Tue Feb 25 09:37:27 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 25 Feb 2003 12:37:27 -0500
Subject: [OSRS-PROJ] Horrors of --- Krovak projection
In-Reply-To: <3E5B8C71.2010803@pobox.com>
References: 	<OF6376D6E4.016A1EFE-ON86256CCD.006A601A-86256CCD.006A607B@lsu.edu>	<3E4D47B
	 5.9000709@pobox.com>  <3E50C118.1B096A1B@lsl.co.uk>
	<1046183500.1318.7.camel@localhost.localdomain> 
	<3E5B8C71.2010803@pobox.com>
Message-ID: <1046194648.10625.34.camel@localhost.localdomain>

The test scripts as they are now constructed use the Ferro PM.  To
use Greenwich PM modify the lon_0 factor to account for the offset
of Ferro from Greenwich---17d40 if I recall correctly.  The main
thing is to keep the geographic longitude coordinates correct
relative to longitude parameters such as lon_0.  How the PM option
that was installed in your PROJ works is unknown to me at this time.
If it only translates the I/O longitude then only modify the
controls in the script to indicate the PM and use Greenwich I/O.

An aside to the Ferro PM is its exact value.  The statement has
been made that the rounded 17d40 value is often used by topographers but
the true correction is 17d39'59.7354".  What do geodesists and
cadastral users employ?

The +czech flag merely puts the x-y output in the form defined
by the Czechs for their system: Y positive to the left of the
origin longitude and X positive south from the conic apex (a point
in Finland).  Without the flag the x is negative to the left of
the origin longitude and y is negative south of the cone apex.
If you need positive numbers in this mode use false eastings/
northings.

Another aside: to test the projection's inverse, the script shows
how the -o, -i binary I/O link the forward and inverse executions
so the formatter does not get in the way of transferring the
data and thus giving slight but confusing differences in the
inverse results.

On Tue, 2003-02-25 at 10:32, Frank Warmerdam wrote:
> Gerald I. Evenden wrote:
> > Per yesterday's promise the following web site contains Krovak
> > documentation, PROJ.4 C code and test script:
> > 
> > http://members.bellatlantic.net/~vze2hc4d/proj4/
...
> Gerald,
> 
> I have added a link to your web site from the site at RemoteSensing.org.
> I hope to incorporate your version of the Krovak into my version though
> I am not sure when I will get to that.  I will likely remove the existing
> code and replace it with yours though I want to review how to get the
> expected results with prime meridians and also the implications of the
> +czech flag.
> 
> Best regards,


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


