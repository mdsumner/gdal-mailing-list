From mfinn at usgs.gov  Wed Feb  1 02:01:06 2006
From: mfinn at usgs.gov (Michael P Finn)
Date: Wed, 1 Feb 2006 04:01:06 -0600
Subject: [Proj] Michael P Finn of the USGS/ National Geospatial Technical
 Operations Center is out of the office.
Message-ID: <OF6DFC59ED.8E08D255-ON86257108.0037085C-86257108.0037085C@usgs.gov>


I will be out of the office starting  02/01/2006 and will not return until
02/07/2006.

I will be unable to check e-mail regularly while I am out. If I can't
respond to your message while I am out, then I will when I return. If you
have anything that cannot wait, please contact my colleague, Mr. Michael
Williams, at mswilliams at usgs.gov.     Mike



From cjmce at lsu.edu  Wed Feb  1 05:32:53 2006
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 1 Feb 2006 07:32:53 -0600
Subject: [Proj] System 42/83 (S42/83)
Message-ID: <OFEDD8A767.E3B1AF93-ON86257108.004A6BD6-86257108.004A6BF6@lsu.edu>





The DHG has its origin in WWII and was developed by the Germans,
specifically by Dr. Gigas.  It is identical to the UTM with only one
exception:  Scale Factor at Origin is 1.0 and NOT 0.9996 - there is no
other difference (other than the standard ellipsoid for System 42 Datum.
Furthermore, it is the identical system that is termed "Russia Belts."  The
math model is the Gauss-Kruger.

Clifford J. Mugnier
Chief of Geodesy and
Associate Director,
CENTER FOR GEOINFORMATICS
Department of Civil Engineering
CEBA 3223A
LOUISIANA STATE UNIVERSITY
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic]
Voice and Facsimile:  (225) 578-4474 [Research]
======================================================
http://www.asprs.org/resources/GRIDS/
http://www.cee.lsu.edu/facultyStaff/mugnier/index.html
======================================================


Hello all,

I'm trying to use coordinates in S42/83, a system often used in eastern
Europe
(e.g. Russia) and partially in East-Germany ("Deutsches Heeresgitter").

It's similar to Gauss-Kruger (Gauß-Krüger) (i.e a transverse mercator
projection) but it uses 6 degrees wide stripes instead of 3 degrees.

And its first meridian is at 3E.

Is there a possibility to define these parameters in cs2cs/proj4?

As ellipsoid "Krassovski" is used (+ellps=krass).

Many greetings
Erich


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj




From awilliams at rapidmap.com.au  Wed Feb  1 14:39:00 2006
From: awilliams at rapidmap.com.au (Andrew Williams)
Date: Thu, 2 Feb 2006 09:39:00 +1100
Subject: [Proj] Repost into Feb Archive Azimuthal Equidistant projection
	Northern Hemisphere centric
Message-ID: <CFE1D6CAE2D44343BF58E308C1C7EC64543902@rmg-server03.rmg.local>

Hi folks,

	I'm using GDAL to try and warp an AEQD projected image to Latlong. 
	 
	This is the syntax
	gdalwarp -s_srs "+proj=aeqd +lat_0=0 +long_0=134 +x_0=0 +y_0=0" -t_srs "+proj=latlong +datum=WGS84" input.tif output.tif
	 
	The issue is that the image is a Southern hemisphere Equatorial projection of Australia. The image is warping, but instead of "spreading" the Southern part of the image so that line of longitude no longer converge, it's spreading the Northern part of the image and making it worse.
	 
	It looks like the warp calculation is assuming a Northern aspect where the lines of longitude converge at the top of the image rather than the bottom of the image in a Southern aspect.
	 
	The reason for my enquiry here is to find out if I can (or need to) add some other parameter to the source definition to make GDAL sensitive to the fact that it's a Southern Hemisphere rather than Northern hemisphere projection.
	 
	regards
	Andrew




From ovv at hetnet.nl  Wed Feb  1 16:11:05 2006
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Thu, 02 Feb 2006 01:11:05 +0100
Subject: [Proj] System 42/83 (S42/83)
In-Reply-To: <loom.20060201T075318-529@post.gmane.org>
Message-ID: <C0070CA9.666F%ovv@hetnet.nl>

> I'm trying to use coordinates in S42/83, a system often used in eastern Europe
> (e.g. Russia) and partially in East-Germany ("Deutsches Heeresgitter").

> Is there a possibility to define these parameters in cs2cs/proj4?

One might want to give the ESRI IDs 28402 ... 28492 a try.
Inspect the PROJ - esri file.
For instance:
# Pulkovo 1942 / Gauss-Kruger zone 2
<28402> +proj=tmerc +lat_0=0 +lon_0=9 +k=1.000000 +x_0=2500000 +y_0=0
+ellps=krass +units=m 



From erich.sadlowski at gmx.de  Thu Feb  2 01:32:01 2006
From: erich.sadlowski at gmx.de (Erich Sadlowski)
Date: Thu, 2 Feb 2006 09:32:01 +0000 (UTC)
Subject: [Proj] Re: System 42/83 (S42/83)
References: <loom.20060201T075318-529@post.gmane.org>
Message-ID: <loom.20060202T100809-923@post.gmane.org>

Thanks to you, Clifford J. and you, Oscar!

Now I understand the way of proj4's thinking and the calculation of transverse
mercator much better:

The stripe's wide affects only the x_0 value, not the conversion itself.
Therefore it's the same math model for UTM, Gauss-Kruger, DHG, etc.

cs2cs doesn't calculates the stripe (zone), you have to deliver it as parameter
lon_0 - while I was thinking, lon_0 would indicate the starting meridian of UTM
(-177), GK (0), DHG (3) and therefore should be left fixed.

Now I have to re-design my application a bit, but that's o.k.

Again: Thanks a lot!

Greetings
   Erich

P.S. Isn't it confusing, that there are identical definition (i.e. 2166 <-> 2397
) or incomplete zone enumerations in the delivered epsg file ?




From warmerdam at pobox.com  Thu Feb  2 07:01:47 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 2 Feb 2006 10:01:47 -0500
Subject: [Proj] Re: System 42/83 (S42/83)
In-Reply-To: <loom.20060202T100809-923@post.gmane.org>
References: <loom.20060201T075318-529@post.gmane.org>
	<loom.20060202T100809-923@post.gmane.org>
Message-ID: <931f8ea90602020701h3ca0c7c4h4d57e2b08a9d25af@mail.gmail.com>

On 2/2/06, Erich Sadlowski <erich.sadlowski at gmx.de> wrote:
> P.S. Isn't it confusing, that there are identical definition (i.e. 2166 <-> 2397
> ) or incomplete zone enumerations in the delivered epsg file ?

Erich,

The "epsg file" is a rather pale reflection of the original
EPSG database.  I think if you went back and inspected
2166 and 2397 carefully in the original database there
would turn out to be differences that are not reflected
in the epsg file.  It may be that one is deprecated and
the other has different datum information, for instance.

But yes, it is confusing.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From holl at gdf-hannover.de  Fri Feb  3 00:10:22 2006
From: holl at gdf-hannover.de (Stephan Holl)
Date: Fri, 3 Feb 2006 09:10:22 +0100
Subject: [Proj] Compile-error on Solaris2.6 (SPARC)
Message-ID: <20060203091022.7119835f@bambule.gdf-hannover.de>

Dear proj-gurus,

I could not succeed in compiling PROJ on a Solaris2.6. The error is
given below:

<error>
.libs/vector1.o .libs/pj_release.o .libs/pj_gauss.o .libs/nad_cvt.o .libs/nad_init.o .libs/nad_intr.o .libs/emess.o .libs/pj_apply_gridshift.o .libs/pj_datums.o .libs/pj_datum_set.o .libs/pj_transform.o .libs/geocent.o .libs/pj_utils.o .libs/pj_gridinfo.o .libs/pj_gridlist.o .libs/jniproj.o
-lm -lc ld: warning: relocation error: R_SPARC_32:
file .libs/PJ_krovak.o: symbol .LLC8: external symbolic relocation
against non-allocatable section .stab; cannot be processed at runtime:
relocation ignored ld: warning: relocation error: R_SPARC_32:
file .libs/PJ_krovak.o: symbol .LLC4: external symbolic relocation
against non-allocatable section .stab; cannot be processed at runtime:
relocation ignored ld: warning: relocation error: R_SPARC_32:
file .libs/PJ_krovak.o: symbol .LLC8: external symbolic relocation
against non-allocatable section .stab; cannot be processed at runtime:
relocation ignored ld: warning: relocation error: R_SPARC_32:
file .libs/PJ_krovak.o: symbol .LLC4: external symbolic relocation
against non-allocatable section .stab; cannot be processed at runtime:
relocation ignored ld: warning: relocation error: R_SPARC_32:
file .libs/PJ_krovak.o: symbol .LLC8: external symbolic relocation
against non-allocatable section .stab; cannot be processed at runtime:
relocation ignored ld: warning: relocation error: R_SPARC_32:
file .libs/PJ_krovak.o: symbol .LLC4: external symbolic relocation
against non-allocatable section .stab; cannot be processed at runtime:
relocation ignored (cd .libs && rm -f libproj.so.0 && ln -s
libproj.so.0.5.0 libproj.so.0) (cd .libs && rm -f libproj.so && ln -s
libproj.so.0.5.0 libproj.so) ar cru .libs/libproj.a  PJ_aeqd.o
PJ_gnom.o PJ_laea.o PJ_mod_ster.o PJ_nsper.o PJ_nzmg.o PJ_ortho.o
PJ_stere.o PJ_sterea.o PJ_aea.o PJ_bipc.o PJ_bonne.o PJ_eqdc.o
PJ_imw_p.o PJ_krovak.o PJ_lcc.o PJ_mpoly.o PJ_poly.o PJ_rpoly.o
PJ_sconics.o PJ_cass.o PJ_cc.o PJ_cea.o PJ_eqc.o PJ_gall.o PJ_labrd.o
PJ_lsat.o PJ_merc.o PJ_mill.o PJ_ocea.o PJ_omerc.o PJ_somerc.o PJ_tcc.o
PJ_tcea.o PJ_tmerc.o PJ_airy.o PJ_aitoff.o PJ_august.o PJ_bacon.o
PJ_chamb.o PJ_hammer.o PJ_lagrng.o PJ_larr.o PJ_lask.o PJ_nocol.o
PJ_ob_tran.o PJ_oea.o PJ_tpeqd.o PJ_vandg.o PJ_vandg2.o PJ_vandg4.o
PJ_wag7.o PJ_lcca.o PJ_geos.o PJ_boggs.o PJ_collg.o PJ_crast.o
PJ_denoy.o PJ_eck1.o PJ_eck2.o PJ_eck3.o PJ_eck4.o PJ_eck5.o PJ_fahey.o
PJ_fouc_s.o PJ_gins8.o PJ_gn_sinu.o PJ_goode.o PJ_hatano.o PJ_loxim.o
PJ_mbt_fps.o PJ_mbtfpp.o PJ_mbtfpq.o PJ_moll.o PJ_nell.o PJ_nell_h.o
PJ_putp2.o PJ_putp3.o PJ_putp4p.o PJ_putp5.o PJ_putp6.o PJ_robin.o
PJ_sts.o PJ_urm5.o PJ_urmfps.o PJ_wag2.o PJ_wag3.o PJ_wink1.o
PJ_wink2.o pj_latlong.o pj_geocent.o aasincos.o adjlon.o bch2bps.o
bchgen.o biveval.o dmstor.o mk_cheby.o pj_auth.o pj_deriv.o
pj_ell_set.o pj_ellps.o pj_errno.o pj_factors.o pj_fwd.o pj_init.o
pj_inv.o pj_list.o pj_malloc.o pj_mlfn.o pj_msfn.o pj_open_lib.o
pj_param.o pj_phi2.o pj_pr_list.o pj_qsfn.o pj_strerrno.o pj_tsfn.o
pj_units.o pj_zpoly1.o rtodms.o vector1.o pj_release.o pj_gauss.o
nad_cvt.o nad_init.o nad_intr.o emess.o pj_apply_gridshift.o
pj_datums.o pj_datum_set.o pj_transform.o geocent.o pj_utils.o
pj_gridinfo.o pj_gridlist.o jniproj.o ranlib .libs/libproj.a creating
libproj.la (cd .libs && rm -f libproj.la && ln -s ../libproj.la
libproj.la) if gcc -DHAVE_CONFIG_H -I. -I. -I.
-DPROJ_LIB=\"/usr/local/share/proj\"    -g -O2 -MT proj.o -MD -MP -MF
".deps/proj.Tpo" -c -o proj.o proj.c; \ then mv -f ".deps/proj.Tpo"
".deps/proj.Po"; else rm -f ".deps/proj.Tpo"; exit 1; fi if gcc
-DHAVE_CONFIG_H -I. -I. -I. -DPROJ_LIB=\"/usr/local/share/proj\"    -g
-O2 -MT gen_cheb.o -MD -MP -MF ".deps/gen_cheb.Tpo" -c -o gen_cheb.o
gen_cheb.c; \ then mv -f ".deps/gen_cheb.Tpo" ".deps/gen_cheb.Po"; else
rm -f ".deps/gen_cheb.Tpo"; exit 1; fi if gcc -DHAVE_CONFIG_H -I. -I.
-I. -DPROJ_LIB=\"/usr/local/share/proj\"    -g -O2 -MT p_series.o -MD
-MP -MF ".deps/p_series.Tpo" -c -o p_series.o p_series.c; \ then mv -f
".deps/p_series.Tpo" ".deps/p_series.Po"; else rm -f
".deps/p_series.Tpo"; exit 1; fi /bin/ksh ../libtool --mode=link gcc
-g -O2   -o proj  proj.o gen_cheb.o p_series.o libproj.la -lm gcc -g
-O2 -o .libs/proj proj.o gen_cheb.o p_series.o  ./.libs/libproj.so -lm
-R/usr/local/lib Undefined			first referenced
symbol  			    in
file .LLC4                               ./.libs/libproj.so 
.LLC8                               ./.libs/libproj.so
ld: fatal: Symbol referencing errors. No output written to .libs/proj
collect2: ld returned 1 exit status make[2]: *** [proj] Error 1
make[2]: Leaving directory
`/export/home1/sourcen/proj-4.4.9/src' make[1]: ***
[all] Error 2 make[1]: Leaving directory
`/export/home1/sourcen/proj-4.4.9/src' make: ***
[all-recursive] Error 1
</error>

The posted Solaris2.8-binaries from Paul install clean and do a decent job, but I am just wondering what might have missing on the box to compile from source.

Actually I do not have any physical access to the box.

Does anybody have any clues?

Thanks in advance

	Stephan


-- 
GDF Hannover - Solutions for spatial data analysis and remote sensing
Hannover Office      -     Mengendamm 16d      -     D-30177 Hannover
Internet: www.gdf-hannover.de      -      Email: holl at gdf-hannover.de
Phone : ++49-(0)511.39088507       -        Fax: ++49-(0)511.39088508


From warmerdam at pobox.com  Mon Feb  6 16:10:38 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 6 Feb 2006 19:10:38 -0500
Subject: [Proj] Compile-error on Solaris2.6 (SPARC)
In-Reply-To: <20060203091022.7119835f@bambule.gdf-hannover.de>
References: <20060203091022.7119835f@bambule.gdf-hannover.de>
Message-ID: <931f8ea90602061610rcec827fr4b981243d3770052@mail.gmail.com>

On 2/3/06, Stephan Holl <holl at gdf-hannover.de> wrote:
> Dear proj-gurus,
>
> I could not succeed in compiling PROJ on a Solaris2.6. The error is
> given below:

Stepan,

Check out:

  http://bugzilla.remotesensing.org/show_bug.cgi?id=298

I'm not clear if the removal of C_NAMESPACE would
really help or not.   But the reduced optmization presumably
will still work.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From holl at gdf-hannover.de  Wed Feb  8 02:34:41 2006
From: holl at gdf-hannover.de (Stephan Holl)
Date: Wed, 8 Feb 2006 11:34:41 +0100
Subject: [Proj] Re: Compile-error on Solaris2.6 (SPARC)
In-Reply-To: <200602071703.k17H2lic012190@duke.maptools.org>
References: <200602071703.k17H2lic012190@duke.maptools.org>
Message-ID: <20060208113441.2fc195bd@bambule.gdf-hannover.de>

Hi Frank,

> 
> On 2/3/06, Stephan Holl <holl at gdf-hannover.de> wrote:
> > Dear proj-gurus,
> >
> > I could not succeed in compiling PROJ on a Solaris2.6. The error is
> > given below:
> 
> Stepan,
> 
> Check out:
> 
>   http://bugzilla.remotesensing.org/show_bug.cgi?id=298
> 
> I'm not clear if the removal of C_NAMESPACE would
> really help or not.   But the reduced optmization presumably
> will still work.


Thanks for pointing to the bugtracker. Since I do not have physical
access to the box I rarely can give you feedback. But we will try to
test it without the optimization.

THanks again,

	Stephan

-- 
GDF Hannover - Solutions for spatial data analysis and remote sensing
Hannover Office      -     Mengendamm 16d      -     D-30177 Hannover
Internet: www.gdf-hannover.de      -      Email: holl at gdf-hannover.de
Phone : ++49-(0)511.39088507       -        Fax: ++49-(0)511.39088508


From paul-grass at stjohnspoint.co.uk  Wed Feb  8 03:36:16 2006
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Wed, 8 Feb 2006 11:36:16 +0000 (GMT)
Subject: [Proj] Re: Compile-error on Solaris2.6 (SPARC)
In-Reply-To: <20060208113441.2fc195bd@bambule.gdf-hannover.de>
References: <200602071703.k17H2lic012190@duke.maptools.org>
	<20060208113441.2fc195bd@bambule.gdf-hannover.de>
Message-ID: <Pine.LNX.4.60.0602081134180.14466@agrippa.ukshells.co.uk>

On Wed, 8 Feb 2006, Stephan Holl wrote:

> Thanks for pointing to the bugtracker. Since I do not have physical
> access to the box I rarely can give you feedback. But we will try to
> test it without the optimization.

Perhaps something else you could also try would be a more recent version 
of libtool. I have found that to work with strange PROJ compile errors in 
the past. Except I think the current version is only a year or two old, so 
there probably wouldn't be an improvement. But you never know. You just 
need to copy the most recent version you can find of the 'libtool' script
into the PROJ source directory, overwriting the version there, and then
run configure and make as far as I know.

Best regards,

Paul



From jjholt at hiwaay.net  Wed Feb  8 19:35:18 2006
From: jjholt at hiwaay.net (Jeff Holt)
Date: Thu, 9 Feb 2006 11:35:18 +0800
Subject: [Proj] Using proj on Windows
Message-ID: <000101c62d29$d9ee9b00$6401a8c0@velocity>


I need to use proj.dll within a VC++ (version 6) project, however I can't
find a .lib file to link against. Is there a distribution that has a
proj.lib? Or do I have to get the source and create one myself?

Thanks!



From ed at topozone.com  Wed Feb  8 19:55:17 2006
From: ed at topozone.com (Ed McNierney)
Date: Wed, 8 Feb 2006 22:55:17 -0500
Subject: [Proj] Using proj on Windows
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD913@ptolemy.topozone.com>

Jeff -

You didn't say where you obtained your proj.dll file, but a normal
Windows build of the PROJ library generates a proj.lib (static library)
and a proj_i.lib (dynamic library) for linking with proj.dll.  You
should check for that library in your distribution or from your source,
since you naturally need a .lib that matches your DLL.  The PROJ
distribution is a pretty painless build on Windows

You can reference materials and links to both source and full Windows
binary distributions on http://proj.maptools.org

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: +1 (978) 251-4242
Fax: +1 (978) 251-1396
ed at topozone.com 

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Jeff Holt
Sent: Wednesday, February 08, 2006 10:35 PM
To: proj at lists.maptools.org
Subject: [Proj] Using proj on Windows


I need to use proj.dll within a VC++ (version 6) project, however I
can't find a .lib file to link against. Is there a distribution that has
a proj.lib? Or do I have to get the source and create one myself?

Thanks!

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From AnthonyD at rocketmail.com  Wed Feb  8 20:21:52 2006
From: AnthonyD at rocketmail.com (Anthony Dunk)
Date: Wed, 8 Feb 2006 20:21:52 -0800 (PST)
Subject: [Proj] Using proj on Windows
In-Reply-To: <000101c62d29$d9ee9b00$6401a8c0@velocity>
Message-ID: <20060209042152.72302.qmail@web50806.mail.yahoo.com>

Hi Jeff,

You need to dynamically load the PROJ DLL using some code such as the
following:

//
// PROJ4 DLL interface
//

static HINSTANCE g_ProjDLL = NULL;

typedef struct { double u, v; } projUV;

// Proj DLL function pointers
static projPJ       (*pfn_pj_init_plus)(const char *) = NULL;
static projPJ       (*pfn_pj_init)(int, char**) = NULL;
static projUV       (*pfn_pj_fwd)(projUV, projPJ) = NULL;
static projUV       (*pfn_pj_inv)(projUV, projPJ) = NULL;
static void     (*pfn_pj_free)(projPJ) = NULL;
static int      (*pfn_pj_transform)(projPJ, projPJ, long, int, 
                                    double *, double *, double * ) =
NULL;
static int         *(*pfn_pj_get_errno_ref)(void) = NULL;
static char        *(*pfn_pj_strerrno)(int) = NULL;
static char        *(*pfn_pj_get_def)(projPJ,int) = NULL;
static void         (*pfn_pj_dalloc)(void *) = NULL;

static BOOL LoadProjDLL()
{
	g_ProjDLL = LoadLibrary("proj.dll");
	if (g_ProjDLL==NULL) return FALSE;

    pfn_pj_init = (projPJ (*)(int, char**)) GetProcAddress( g_ProjDLL,
"pj_init");
    
    if( pfn_pj_init == NULL )  return( FALSE );

    pfn_pj_init_plus = (projPJ (*)(const char *)) GetProcAddress(
g_ProjDLL, "pj_init_plus");
    pfn_pj_fwd = (projUV (*)(projUV,projPJ))      GetProcAddress(
g_ProjDLL, "pj_fwd" );
    pfn_pj_inv = (projUV (*)(projUV,projPJ))      GetProcAddress(
g_ProjDLL, "pj_inv" );
    pfn_pj_free = (void (*)(projPJ))		      GetProcAddress( g_ProjDLL,
"pj_free" );
    pfn_pj_transform = (int (*)(projPJ,projPJ,long,int,double*,
                                double*,double*)) GetProcAddress(
g_ProjDLL, "pj_transform" );
    pfn_pj_get_errno_ref = (int *(*)(void))		  GetProcAddress(
g_ProjDLL, "pj_get_errno_ref" );
    pfn_pj_strerrno = (char *(*)(int))			  GetProcAddress( g_ProjDLL,
"pj_strerrno" );
    pfn_pj_get_def = (char *(*)(projPJ,int))      GetProcAddress(
g_ProjDLL, "pj_get_def" );
    pfn_pj_dalloc = (void (*)(void*))			  GetProcAddress( g_ProjDLL,
"pj_dalloc" );

	return TRUE;
}


Cheers,
Anthony.


--- Jeff Holt <jjholt at hiwaay.net> wrote:

> 
> I need to use proj.dll within a VC++ (version 6) project, however I
> can't
> find a .lib file to link against. Is there a distribution that has a
> proj.lib? Or do I have to get the source and create one myself?
> 
> Thanks!
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 




__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 


From holl at gdf-hannover.de  Wed Feb  8 23:51:28 2006
From: holl at gdf-hannover.de (Stephan Holl)
Date: Thu, 9 Feb 2006 08:51:28 +0100
Subject: [Proj] Re: Re: Compile-error on Solaris2.6 (SPARC)
In-Reply-To: <200602081703.k18H2tAx007592@duke.maptools.org>
References: <200602081703.k18H2tAx007592@duke.maptools.org>
Message-ID: <20060209085128.53e70981@bambule.gdf-hannover.de>

Hello Paul,

On Wed, 8 Feb 2006 12:03:36 -0500 proj-request at lists.maptools.org wrote:

> Perhaps something else you could also try would be a more recent
> version of libtool. I have found that to work with strange PROJ
> compile errors in the past. Except I think the current version is
> only a year or two old, so there probably wouldn't be an improvement.
> But you never know. You just need to copy the most recent version you
> can find of the 'libtool' script into the PROJ source directory,
> overwriting the version there, and then run configure and make as far
> as I know.

Thanks for your suggestion. But we have successfully finished
compiling without optimization using 

env CFLAGS="-g -O1" ./configure (on ksh)

So you are better not using optimization on solaris due to avoid
strange compile errors :-)

THank you all for your help.

Best
	Stephan


From sdteffen at gmail.com  Fri Feb 10 22:30:37 2006
From: sdteffen at gmail.com (Steffen Macke)
Date: Sat, 11 Feb 2006 08:30:37 +0200
Subject: [Proj] Roussilhe Projection
In-Reply-To: <200602011112.38252.gerald.evenden@verizon.net>
References: <000f01c5d726$eec4c850$6501a8c0@taxussi.com.pl>
	<200510311642.38754.gerald.evenden@verizon.net>
	<3cb1691c0601312156t621bebaaq3883a1831fc3c7c7@mail.gmail.com>
	<200602011112.38252.gerald.evenden@verizon.net>
Message-ID: <3cb1691c0602102230v78926675v5b8df13a12a9e820@mail.gmail.com>

Hello All,

> > to proj.4.4.9. I attached a patch with the changes I did to make things
> > compile. However, while Gerald Evenden's package works fine, my patched
> > proj does not work.

Missing function prototypes for the mdist part caused the problem.
An improved patch is available from here:

http://sdteffen.de/gis/proj4rouss.diff

Regards,

Steffen



From davidvaz at ncc.up.pt  Wed Feb 15 08:10:41 2006
From: davidvaz at ncc.up.pt (davidvaz)
Date: Wed, 15 Feb 2006 16:10:41 +0000
Subject: [Proj] cs2cs how to use
Message-ID: <43F35281.7090206@ncc.up.pt>

Hello,

I'm new to proj and I need to convert some coordinates from wsg84 to tmerc.

The source coordinates comes from a gps device which uses wsg84 and I
would like to convert them to:

PROJCS["Datum_73_Hayford_Gauss_IPCC",
    GEOGCS["GCS_Datum_73",
        DATUM["D_Datum_73",
            SPHEROID["International_1924",6378388.0,297.0]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["False_Easting",180.598],
    PARAMETER["False_Northing",-86.99],
    PARAMETER["Central_Meridian",-8.131906111111112],
    PARAMETER["Scale_Factor",1.0],
    PARAMETER["Latitude_Of_Origin",39.66666666666666],
    UNIT["Meter",1.0]]

This info was taken from a ESRI *.proj file and I believe that it
contains all the information needed, but I haven't found the right way
to use it.

Can anyone help?

Thanks

David Vaz



From cjmce at lsu.edu  Wed Feb 15 09:24:16 2006
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 15 Feb 2006 11:24:16 -0600
Subject: [Proj] cs2cs how to use
Message-ID: <OF3B050043.C244662D-ON86257116.005F9B47-86257116.005F9B61@lsu.edu>





David,

You cannot go directly from WGS84 Datum coordinates to a projection (tmerc)
on another Datum without FIRST performing a Datum Shift.

Presumably, you are in Portugal, and the transformation parameters FROM
WGS84 Datum TO "Datum 73" are: dX=+223.116m ±0.11m, dY=-106.825m ±0.15m,
and dZ=-36.871m ±0.11m.  You will have to first implement the Molodensky
transformation subroutine with the above parameters to change Datums before
you then transform with the tmerc.  Note that for the Central Meridian that
you propose to use, the False Easting and False Northings appear to be
incorrect.

See my column on the Grids and Datums of the Portuguese Republic in
"Photogrammetric Engineering and Remote Sensing," April 2002, pp. 305-306.
This may be downloaded (no charge) in a pdf file from:
www.ASPRS.org/resources/grids.

I suggest you also download and read my column entitled "The Basics of
Datums," April 2000.

Good luck,

Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy
Center for GeoInformatics
Department of Civil Engineering
LOUISIANA STATE UNIVERSITY
Baton Rouge, LA  70803
Voice:      (225) 578-8536
            (225) 578-4474
Facsimile:  (225) 578-8652
==========================================
http://www.ASPRS.org/resources/GRIDS
http://www.cee.lsu.edu/facultyStaff/mugnier/index.html
=========================================


Hello,

I'm new to proj and I need to convert some coordinates from wsg84 to tmerc.

The source coordinates comes from a gps device which uses wsg84 and I
would like to convert them to:

PROJCS["Datum_73_Hayford_Gauss_IPCC",
GEOGCS["GCS_Datum_73",
DATUM["D_Datum_73",
SPHEROID["International_1924",6378388.0,297.0]],
PRIMEM["Greenwich",0.0],
UNIT["Degree",0.0174532925199433]],
PROJECTION["Transverse_Mercator"],
PARAMETER["False_Easting",180.598],
PARAMETER["False_Northing",-86.99],
PARAMETER["Central_Meridian",-8.131906111111112],
PARAMETER["Scale_Factor",1.0],
PARAMETER["Latitude_Of_Origin",39.66666666666666],
UNIT["Meter",1.0]]

This info was taken from a ESRI *.proj file and I believe that it
contains all the information needed, but I haven't found the right way
to use it.

Can anyone help?

Thanks

David Vaz

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj




From warmerdam at pobox.com  Wed Feb 15 10:12:45 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 15 Feb 2006 13:12:45 -0500
Subject: [Proj] cs2cs how to use
In-Reply-To: <43F35281.7090206@ncc.up.pt>
References: <43F35281.7090206@ncc.up.pt>
Message-ID: <43F36F1D.3080503@pobox.com>

davidvaz wrote:
> Hello,
> 
> I'm new to proj and I need to convert some coordinates from wsg84 to tmerc.
> 
> The source coordinates comes from a gps device which uses wsg84 and I
> would like to convert them to:
> 
> PROJCS["Datum_73_Hayford_Gauss_IPCC",
>     GEOGCS["GCS_Datum_73",
>         DATUM["D_Datum_73",
>             SPHEROID["International_1924",6378388.0,297.0]],
>         PRIMEM["Greenwich",0.0],
>         UNIT["Degree",0.0174532925199433]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["False_Easting",180.598],
>     PARAMETER["False_Northing",-86.99],
>     PARAMETER["Central_Meridian",-8.131906111111112],
>     PARAMETER["Scale_Factor",1.0],
>     PARAMETER["Latitude_Of_Origin",39.66666666666666],
>     UNIT["Meter",1.0]]
> 
> This info was taken from a ESRI *.proj file and I believe that it
> contains all the information needed, but I haven't found the right way
> to use it.

David,

As Cliff mentions, the above does not include information on the datum
shift to be applied between WGS84 and "datum 73".  I believe the following
commandline would use the above parameters and Cliff's suggested datum
shift.

cs2cs +proj=wgs84 +datum=WGS84 +to \
       +proj=tmerc +k=1 +lon_0=-8.131906111111112 +lat_0=39d40 \
                     +x_0=180.598 +y_0=-86.66 \
                     +ellps=intl +towgs84=223.116,-106.825,-36.87

As Cliff mentions your false easting and northing seem pretty unusual.
It is also possible the signs on the towgs84 parameters need to be
changed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From davidvaz at ncc.up.pt  Wed Feb 15 11:06:07 2006
From: davidvaz at ncc.up.pt (davidvaz)
Date: Wed, 15 Feb 2006 19:06:07 +0000
Subject: [Proj] cs2cs how to use
In-Reply-To: <43F36F1D.3080503@pobox.com>
References: <43F35281.7090206@ncc.up.pt> <43F36F1D.3080503@pobox.com>
Message-ID: <43F37B9F.30407@ncc.up.pt>

It's me again!

Frank Warmerdam wrote:

> As Cliff mentions, the above does not include information on the datum
> shift to be applied between WGS84 and "datum 73".  I believe the
> following
> commandline would use the above parameters and Cliff's suggested datum
> shift.
>
> cs2cs +proj=wgs84 +datum=WGS84 +to \
>       +proj=tmerc +k=1 +lon_0=-8.131906111111112 +lat_0=39d40 \
>                     +x_0=180.598 +y_0=-86.66 \
>                     +ellps=intl +towgs84=223.116,-106.825,-36.87


I tried this commandline but all I've got was an error:

        Using from definition: proj=wgs84 datum=WGS84
        Rel. 4.4.9, 29 Oct 2004
        <lt-cs2cs>:
        projection initialization failure
        cause: unknown projection id
        program abnormally terminated

Do you know what might be the problem?

Thanks for the help.

David Vaz


From warmerdam at pobox.com  Wed Feb 15 11:29:00 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 15 Feb 2006 14:29:00 -0500
Subject: [Proj] cs2cs how to use
In-Reply-To: <43F37B9F.30407@ncc.up.pt>
References: <43F35281.7090206@ncc.up.pt> <43F36F1D.3080503@pobox.com>
	<43F37B9F.30407@ncc.up.pt>
Message-ID: <43F380FC.50709@pobox.com>

davidvaz wrote:
> It's me again!
> 
> Frank Warmerdam wrote:
> 
>> As Cliff mentions, the above does not include information on the datum
>> shift to be applied between WGS84 and "datum 73".  I believe the
>> following
>> commandline would use the above parameters and Cliff's suggested datum
>> shift.
>>
>> cs2cs +proj=wgs84 +datum=WGS84 +to \
>>       +proj=tmerc +k=1 +lon_0=-8.131906111111112 +lat_0=39d40 \
>>                     +x_0=180.598 +y_0=-86.66 \
>>                     +ellps=intl +towgs84=223.116,-106.825,-36.87
> 

Sorry the source should have been +proj=latlong


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From mfinn at usgs.gov  Wed Feb 15 14:01:15 2006
From: mfinn at usgs.gov (Michael P Finn)
Date: Wed, 15 Feb 2006 16:01:15 -0600
Subject: [Proj] Michael P Finn of the USGS/ National Geospatial Technical
 Operations Center is out of the office.
Message-ID: <OF0561825A.F51D77C7-ON86257116.0078F6D3-86257116.0078F6D4@usgs.gov>


I will be out of the office starting  02/15/2006 and will not return until
02/22/2006.

I will be unable to check e-mail regularly while I am out. If I can't
respond to your message while I am out, then I will when I return. If you
have anything that cannot wait, please contact my colleague, Mr. Michael
Williams, at mswilliams at usgs.gov.     Mike



From jagoncal at fc.up.pt  Thu Feb 16 03:44:42 2006
From: jagoncal at fc.up.pt (=?ISO-8859-1?Q?Jos=E9_Alberto_Gon=E7alves?=)
Date: Thu, 16 Feb 2006 11:44:42 +0000
Subject: [Proj] cs2cs how to use
In-Reply-To: <43F36F1D.3080503@pobox.com>
References: <43F35281.7090206@ncc.up.pt> <43F36F1D.3080503@pobox.com>
Message-ID: <43F465AA.5000604@fc.up.pt>

Frank Warmerdam wrote:

> As Cliff mentions, the above does not include information on the datum
> shift to be applied between WGS84 and "datum 73".  I believe the 
> following
> commandline would use the above parameters and Cliff's suggested datum
> shift.
>
> cs2cs +proj=wgs84 +datum=WGS84 +to \
>       +proj=tmerc +k=1 +lon_0=-8.131906111111112 +lat_0=39d40 \
>                     +x_0=180.598 +y_0=-86.66 \
>                     +ellps=intl +towgs84=223.116,-106.825,-36.87
>
> As Cliff mentions your false easting and northing seem pretty unusual.
> It is also possible the signs on the towgs84 parameters need to be
> changed.
>
> Best regards,

The shifts x_0 and y_0 are correct (or nearly; y_0 is 86.99), although 
they are in fact unusual. Portugal had an older datum, called "Datum 
Lisboa", which was replaced by "Datum 73" in the 70's. The projection 
was made with the same parameters and the false easting and northing  
would account for the datum difference, yielding cartographic 
coordinates very similar to the older ones. Confusions and mistakes are 
frequent and probably a better choice would have been to choose a 
different central point (lon_0, lat_0).

Anyway at the moment the Portuguese Geographic Institute is in the 
process of adopting a new map projection, based on ETRS-89, for all the 
cartography.

About the command line: I checked with known coordinates and it seems to 
be correct (but with changed signs). Also the syntax should be "cs2cs 
+proj=latlong ..."

Regards

José A. Gonçalves


---------------------------------------
José Alberto Gonçalves
Faculdade de Ciências, Universidade do Porto
Rua Campo Alegre, 687
P-4169-007 Porto
Portugal
Email: jagoncal at fc.up.pt
Phone: 220100837


From Rachid.Rahmoune at ba.infn.it  Thu Feb 16 06:37:21 2006
From: Rachid.Rahmoune at ba.infn.it (Rachid Rahmoune)
Date: Thu, 16 Feb 2006 15:37:21 +0100 (MET)
Subject: [Proj] geoid-ellipsoid height conversion
Message-ID: <1140100641.43f48e213d9c1@www.ba.infn.it>

Dear all,
I am a new user of the Proj software, so could anyone help me about the
geoid-ellipsoid height conversion with the proj software.

Best Regards
Rachid


From warmerdam at pobox.com  Thu Feb 16 07:10:52 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 16 Feb 2006 10:10:52 -0500
Subject: [Proj] geoid-ellipsoid height conversion
In-Reply-To: <1140100641.43f48e213d9c1@www.ba.infn.it>
References: <1140100641.43f48e213d9c1@www.ba.infn.it>
Message-ID: <43F495FC.2080901@pobox.com>

Rachid Rahmoune wrote:
> Dear all,
> I am a new user of the Proj software, so could anyone help me about the
> geoid-ellipsoid height conversion with the proj software.

Rachid,

PROJ has no knowledge of geoids.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From jagoncal at fc.up.pt  Thu Feb 16 07:15:52 2006
From: jagoncal at fc.up.pt (=?ISO-8859-1?Q?Jos=E9_Alberto_Gon=E7alves?=)
Date: Thu, 16 Feb 2006 15:15:52 +0000
Subject: [Proj] geoid-ellipsoid height conversion
In-Reply-To: <1140100641.43f48e213d9c1@www.ba.infn.it>
References: <1140100641.43f48e213d9c1@www.ba.infn.it>
Message-ID: <43F49728.4030200@fc.up.pt>

Dear Rachid

Proj doesn't do height conversions between geoid and ellipsoid 
references. For that you should use a geopotential model, such as 
EGM-96. You can use the link:

http://sps.unavco.org/geoid/

to estimate the geoid height for a given point.

Regards

Jose' Gonçalves



Rachid Rahmoune wrote:

>Dear all,
>I am a new user of the Proj software, so could anyone help me about the
>geoid-ellipsoid height conversion with the proj software.
>
>Best Regards
>Rachid
>_______________________________________________
>Proj mailing list
>Proj at lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/proj
>  
>



From ovv at hetnet.nl  Thu Feb 16 08:16:11 2006
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Thu, 16 Feb 2006 17:16:11 +0100
Subject: [Proj] geoid-ellipsoid height conversion
In-Reply-To: <43F49728.4030200@fc.up.pt>
Message-ID: <C01A63DB.67CE%ovv@hetnet.nl>

> Proj doesn't do height conversions between geoid and ellipsoid
> references. For that you should use a geopotential model, such as
> EGM-96. You can use the link:
> 
> http://sps.unavco.org/geoid/
> to estimate the geoid height for a given point.

or the official (?) one at:
<http://earth-info.nima.mil/GandG/wgs84/gravitymod/egm96/intpt.htm>




From Rachid.Rahmoune at ba.infn.it  Thu Feb 16 06:20:50 2006
From: Rachid.Rahmoune at ba.infn.it (Rachid Rahmoune)
Date: Thu, 16 Feb 2006 15:20:50 +0100 (MET)
Subject: [Proj] geoid-ellispsoid height conversion with proj
Message-ID: <1140099650.43f48a42809af@www.ba.infn.it>

Hi all,

I am a new user of Proj software, so I would like if anybody could help me
reguarding the geoid-ellispsoid height conversion with the proj program.

Thanks 
Regards,
rachid 



From warmerdam at pobox.com  Thu Feb 16 20:10:38 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 16 Feb 2006 23:10:38 -0500
Subject: [Proj] Re: [UMN_MAPSERVER-USERS] Polar reprojection (again)
In-Reply-To: <845AADAC1106E44996327D62097E4C6B860181@et.ad.sdsc.edu>
References: <845AADAC1106E44996327D62097E4C6B860181@et.ad.sdsc.edu>
Message-ID: <43F54CBE.2030207@pobox.com>

Christopher Condit wrote:
> Hi Frank-
> I'm attaching a zip file with two simple mapfiles illustrating the
> problem.  There's a README.txt in zipfile that describes everything.
> Thanks for your help!

Chris,

Gee, I hope that big attachment didn't actually go to the list!

I dug into the problem and it turned out to be unusual.

The raster resampler calls PROJ.4's pj_transform() function for one
whole row of points to transform at once.  The idea is that pj_transform()
returns a success flag for each point.  But some kinds of errors are
considered to be "non-transient", and it is assumed if they are encountered
for one point they will apply to all points.

It turns out that getting errno=33 (EDOM) or errno=34 (ERANGE) from
math library functions (like atan) were considered "non-transient" by
pj_transform(), even though they are likely to only apply to some points
in a group.  Because your initial range +-10000000 was invalid to reproject,
and because the error was improperly considered non-transient the code
was assuming all the points would fail and giving up.

Using a smaller initial EXTENT (ie +-5000000) was enough to get a reason
result.  But better than that, I was able to correct the PROJ.4
pj_transform() function.

The upshot is that if you can grab the latest PROJ.4 source from CVS and
build it, you can get correct behavior.  Since I wouldn't be surprised
if that is messy for you, I have also put the modified pj_transform.c
on my web site at:

   http://www.gdal.org/tmp/pj_transform.c

If you grab that and dump over the PROJ 4.4.9 src/pj_transform.c file,
build and install it, you should be ok.

Thanks for providing a concise demonstration of the problem so I was
able to track it down fairly easily.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From scott at topozone.com  Tue Feb 21 07:51:29 2006
From: scott at topozone.com (Scott Schulthess)
Date: Tue, 21 Feb 2006 10:51:29 -0500
Subject: [Proj] Problems Migrating to .net 2.0
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD96D@ptolemy.topozone.com>

Hello,

 

I've recently moved my project from .net 1.1 to .net 2.0

 

I've tested this code on 1.1, but there are some added restrictions and
stuff that just won't compile in 2.0.  

 

This is the C# wrapper that I'm using

 


"Attempted to read or write protected memory. This is often an
indication that other memory is corrupt."


 

 

            public static int LLtoUTM(int datumIn, int datumOut, double
p_lat, double p_lon,ref double UTMNorthing,ref double UTMEasting,ref int
UTMZone)

            {

                  int errno;

                  //This is the formula for calculating which Zone a
point is in at a particular lat/long

                  int ZoneNumber = Convert.ToInt32((p_lon + 180) / 6) +
1;

                  double[] x = new double[1];

                  double[] y = new double[1];

                  double[] z = new double[1];

                  y[0] = p_lat*proj_api.Proj.DEG_TO_RAD;

                  x[0] = p_lon*proj_api.Proj.DEG_TO_RAD;

                  z[0] = 0.0;

                  IntPtr src0=
proj_api.Proj.pj_init_plus("+proj_api.Proj=latlong +datum=NAD27");

                  IntPtr src1 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=latlong +datum=NAD83");

                  IntPtr dst0 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=utm +zone=" + ZoneNumber + "
+datum=NAD27");

                  IntPtr dst1 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=utm +zone=" + ZoneNumber + "
+datum=NAD83");

                  //This nice little bit of code below is designed to
execute pj_transfrom (the proj_api.Proj lib all around function)

                  //with the correct parameters so that a datumshift to
the correct datum is included.

                  if(datumIn==0)

                  {

                        if(datumOut==0)

                        {

                              errno = proj_api.Proj.pj_transform(src0,
dst0, 1, 1, x, y, z);//NAD27-NAD83

                        }

                        else

                        {

                              errno = proj_api.Proj.pj_transform(src0,
dst1, 1, 1, x, y, z);//NAD27-NAD27

                        }

                  }

                  else

                  {

                        if(datumOut==0)

                        {

                              errno = proj_api.Proj.pj_transform(src1,
dst0, 1, 1, x, y, z);//NAD83-NAD27

                        }

                        else

                        {

ERROR THROWN HERE    -> errno = proj_api.Proj.pj_transform(src1, dst1,
1, 1, x, y, z); //NAD83-NAD83

                        }

                  }

                  

                  proj_api.Proj.pj_free(dst1);

                  proj_api.Proj.pj_free(src1);

                  proj_api.Proj.pj_free(dst0);

                  proj_api.Proj.pj_free(src0);

                  UTMNorthing = y[0];

                  UTMEasting = x[0];

                  UTMZone = ZoneNumber;

                  return errno; 

            }

 

 


"Attempted to read or write protected memory. This is often an
indication that other memory is corrupt."


 

Any help would be appretiated.


Thanks!

 

-Scott

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060221/45f6b1a7/attachment.html>

From EMiller at dfg.ca.gov  Tue Feb 21 09:23:12 2006
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Tue, 21 Feb 2006 09:23:12 -0800
Subject: [Proj] Problems Migrating to .net 2.0
Message-ID: <s3fadc23.024@dfg.ca.gov>

Since proj doesn't come with C# wrappers, we can't guess how the C# function call imports are defined.

Nevertheless, you don't do any error checking.  Are you sure your pj_init_plus calls are succeeding?  Their definitions look suspect to me...

"""
IntPtr src0 = proj_api.Proj.pj_init_plus("+proj_api.Proj=latlong +datum=NAD27");
"""

>>> scott at topozone.com 2/21/2006 7:51:29 AM >>>
Hello,

 

I've recently moved my project from .net 1.1 to .net 2.0

 

I've tested this code on 1.1, but there are some added restrictions and
stuff that just won't compile in 2.0.  

 

This is the C# wrapper that I'm using

 


"Attempted to read or write protected memory. This is often an
indication that other memory is corrupt."


 

 

            public static int LLtoUTM(int datumIn, int datumOut, double
p_lat, double p_lon,ref double UTMNorthing,ref double UTMEasting,ref int
UTMZone)

            {

                  int errno;

                  //This is the formula for calculating which Zone a
point is in at a particular lat/long

                  int ZoneNumber = Convert.ToInt32((p_lon + 180) / 6) +
1;

                  double[] x = new double[1];

                  double[] y = new double[1];

                  double[] z = new double[1];

                  y[0] = p_lat*proj_api.Proj.DEG_TO_RAD;

                  x[0] = p_lon*proj_api.Proj.DEG_TO_RAD;

                  z[0] = 0.0;

                  IntPtr src0=
proj_api.Proj.pj_init_plus("+proj_api.Proj=latlong +datum=NAD27");

                  IntPtr src1 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=latlong +datum=NAD83");

                  IntPtr dst0 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=utm +zone=" + ZoneNumber + "
+datum=NAD27");

                  IntPtr dst1 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=utm +zone=" + ZoneNumber + "
+datum=NAD83");

                  //This nice little bit of code below is designed to
execute pj_transfrom (the proj_api.Proj lib all around function)

                  //with the correct parameters so that a datumshift to
the correct datum is included.

                  if(datumIn==0)

                  {

                        if(datumOut==0)

                        {

                              errno = proj_api.Proj.pj_transform(src0,
dst0, 1, 1, x, y, z);//NAD27-NAD83

                        }

                        else

                        {

                              errno = proj_api.Proj.pj_transform(src0,
dst1, 1, 1, x, y, z);//NAD27-NAD27

                        }

                  }

                  else

                  {

                        if(datumOut==0)

                        {

                              errno = proj_api.Proj.pj_transform(src1,
dst0, 1, 1, x, y, z);//NAD83-NAD27

                        }

                        else

                        {

ERROR THROWN HERE    -> errno = proj_api.Proj.pj_transform(src1, dst1,
1, 1, x, y, z); //NAD83-NAD83

                        }

                  }

                  

                  proj_api.Proj.pj_free(dst1);

                  proj_api.Proj.pj_free(src1);

                  proj_api.Proj.pj_free(dst0);

                  proj_api.Proj.pj_free(src0);

                  UTMNorthing = y[0];

                  UTMEasting = x[0];

                  UTMZone = ZoneNumber;

                  return errno; 

            }

 

 


"Attempted to read or write protected memory. This is often an
indication that other memory is corrupt."


 

Any help would be appretiated.


Thanks!

 

-Scott

 

 

 





From ed at topozone.com  Tue Feb 21 09:57:25 2006
From: ed at topozone.com (Ed McNierney)
Date: Tue, 21 Feb 2006 12:57:25 -0500
Subject: [Proj] Problems Migrating to .net 2.0
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD975@ptolemy.topozone.com>

Eric -

No, proj doesn't come with C# wrappers - but you wrote one!  That's the
wrapper Scott is using; see
http://lists.maptools.org/pipermail/proj/2004-September/001338.html for
the source.

	- Ed 

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Eric Miller
Sent: Tuesday, February 21, 2006 12:23 PM
To: proj at lists.maptools.org
Subject: Re: [Proj] Problems Migrating to .net 2.0

Since proj doesn't come with C# wrappers, we can't guess how the C#
function call imports are defined.

Nevertheless, you don't do any error checking.  Are you sure your
pj_init_plus calls are succeeding?  Their definitions look suspect to
me...

"""
IntPtr src0 = proj_api.Proj.pj_init_plus("+proj_api.Proj=latlong
+datum=NAD27"); """

>>> scott at topozone.com 2/21/2006 7:51:29 AM >>>
Hello,

 

I've recently moved my project from .net 1.1 to .net 2.0

 

I've tested this code on 1.1, but there are some added restrictions and
stuff that just won't compile in 2.0.  

 

This is the C# wrapper that I'm using

 


"Attempted to read or write protected memory. This is often an
indication that other memory is corrupt."


 

 

            public static int LLtoUTM(int datumIn, int datumOut, double
p_lat, double p_lon,ref double UTMNorthing,ref double UTMEasting,ref int
UTMZone)

            {

                  int errno;

                  //This is the formula for calculating which Zone a
point is in at a particular lat/long

                  int ZoneNumber = Convert.ToInt32((p_lon + 180) / 6) +
1;

                  double[] x = new double[1];

                  double[] y = new double[1];

                  double[] z = new double[1];

                  y[0] = p_lat*proj_api.Proj.DEG_TO_RAD;

                  x[0] = p_lon*proj_api.Proj.DEG_TO_RAD;

                  z[0] = 0.0;

                  IntPtr src0=
proj_api.Proj.pj_init_plus("+proj_api.Proj=latlong +datum=NAD27");

                  IntPtr src1 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=latlong +datum=NAD83");

                  IntPtr dst0 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=utm +zone=" + ZoneNumber + "
+datum=NAD27");

                  IntPtr dst1 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=utm +zone=" + ZoneNumber + "
+datum=NAD83");

                  //This nice little bit of code below is designed to
execute pj_transfrom (the proj_api.Proj lib all around function)

                  //with the correct parameters so that a datumshift to
the correct datum is included.

                  if(datumIn==0)

                  {

                        if(datumOut==0)

                        {

                              errno = proj_api.Proj.pj_transform(src0,
dst0, 1, 1, x, y, z);//NAD27-NAD83

                        }

                        else

                        {

                              errno = proj_api.Proj.pj_transform(src0,
dst1, 1, 1, x, y, z);//NAD27-NAD27

                        }

                  }

                  else

                  {

                        if(datumOut==0)

                        {

                              errno = proj_api.Proj.pj_transform(src1,
dst0, 1, 1, x, y, z);//NAD83-NAD27

                        }

                        else

                        {

ERROR THROWN HERE    -> errno = proj_api.Proj.pj_transform(src1, dst1,
1, 1, x, y, z); //NAD83-NAD83

                        }

                  }

                  

                  proj_api.Proj.pj_free(dst1);

                  proj_api.Proj.pj_free(src1);

                  proj_api.Proj.pj_free(dst0);

                  proj_api.Proj.pj_free(src0);

                  UTMNorthing = y[0];

                  UTMEasting = x[0];

                  UTMZone = ZoneNumber;

                  return errno; 

            }

 

 


"Attempted to read or write protected memory. This is often an
indication that other memory is corrupt."


 

Any help would be appretiated.


Thanks!

 

-Scott

 

 

 



_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From EMiller at dfg.ca.gov  Tue Feb 21 10:35:29 2006
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Tue, 21 Feb 2006 10:35:29 -0800
Subject: [Proj] Problems Migrating to .net 2.0
Message-ID: <s3faed11.064@dfg.ca.gov>

Okay,

Well, it wasn't clear to me since the namespace was altered from "ProjApi" to "proj_api".  That leads me to believe other things may have been altered...

Anyway, I haven't done any research on .NET 2.0, so can't be much help.  My only guess besides the invalid projection definitions is that the memory for the data arrays is being garbage collected despite the [InAttribute, OutAttribute] attributes on the import definition.  I've since learned, it'd be easier to just write "ref double[] foo" but I'm not sure that'd matter.

I'd say, fix the projection init statements and check for IntPtr.Zero after pj_init_plus() before doing anything else.  Even though the error isn't a Null Pointer exception, it still can't hurt to check.

BTW, on a worldwide scale, your UTM zone number calc will be wrong in some areas due to the exceptions around Norway and such.

>>> ed at topozone.com 2/21/2006 9:57:25 AM >>>
Eric -

No, proj doesn't come with C# wrappers - but you wrote one!  That's the
wrapper Scott is using; see
http://lists.maptools.org/pipermail/proj/2004-September/001338.html for
the source.

	- Ed 

-----Original Message-----
From: proj-bounces at lists.maptools.org 
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Eric Miller
Sent: Tuesday, February 21, 2006 12:23 PM
To: proj at lists.maptools.org 
Subject: Re: [Proj] Problems Migrating to .net 2.0

Since proj doesn't come with C# wrappers, we can't guess how the C#
function call imports are defined.

Nevertheless, you don't do any error checking.  Are you sure your
pj_init_plus calls are succeeding?  Their definitions look suspect to
me...

"""
IntPtr src0 = proj_api.Proj.pj_init_plus("+proj_api.Proj=latlong
+datum=NAD27"); """

>>> scott at topozone.com 2/21/2006 7:51:29 AM >>>
Hello,

 

I've recently moved my project from .net 1.1 to .net 2.0

 

I've tested this code on 1.1, but there are some added restrictions and
stuff that just won't compile in 2.0.  

 

This is the C# wrapper that I'm using

 


"Attempted to read or write protected memory. This is often an
indication that other memory is corrupt."


 

 

            public static int LLtoUTM(int datumIn, int datumOut, double
p_lat, double p_lon,ref double UTMNorthing,ref double UTMEasting,ref int
UTMZone)

            {

                  int errno;

                  //This is the formula for calculating which Zone a
point is in at a particular lat/long

                  int ZoneNumber = Convert.ToInt32((p_lon + 180) / 6) +
1;

                  double[] x = new double[1];

                  double[] y = new double[1];

                  double[] z = new double[1];

                  y[0] = p_lat*proj_api.Proj.DEG_TO_RAD;

                  x[0] = p_lon*proj_api.Proj.DEG_TO_RAD;

                  z[0] = 0.0;

                  IntPtr src0=
proj_api.Proj.pj_init_plus("+proj_api.Proj=latlong +datum=NAD27");

                  IntPtr src1 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=latlong +datum=NAD83");

                  IntPtr dst0 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=utm +zone=" + ZoneNumber + "
+datum=NAD27");

                  IntPtr dst1 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=utm +zone=" + ZoneNumber + "
+datum=NAD83");

                  //This nice little bit of code below is designed to
execute pj_transfrom (the proj_api.Proj lib all around function)

                  //with the correct parameters so that a datumshift to
the correct datum is included.

                  if(datumIn==0)

                  {

                        if(datumOut==0)

                        {

                              errno = proj_api.Proj.pj_transform(src0,
dst0, 1, 1, x, y, z);//NAD27-NAD83

                        }

                        else

                        {

                              errno = proj_api.Proj.pj_transform(src0,
dst1, 1, 1, x, y, z);//NAD27-NAD27

                        }

                  }

                  else

                  {

                        if(datumOut==0)

                        {

                              errno = proj_api.Proj.pj_transform(src1,
dst0, 1, 1, x, y, z);//NAD83-NAD27

                        }

                        else

                        {

ERROR THROWN HERE    -> errno = proj_api.Proj.pj_transform(src1, dst1,
1, 1, x, y, z); //NAD83-NAD83

                        }

                  }

                  

                  proj_api.Proj.pj_free(dst1);

                  proj_api.Proj.pj_free(src1);

                  proj_api.Proj.pj_free(dst0);

                  proj_api.Proj.pj_free(src0);

                  UTMNorthing = y[0];

                  UTMEasting = x[0];

                  UTMZone = ZoneNumber;

                  return errno; 

            }

 

 


"Attempted to read or write protected memory. This is often an
indication that other memory is corrupt."


 

Any help would be appretiated.


Thanks!

 

-Scott

 

 

 



_______________________________________________
Proj mailing list
Proj at lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/proj 

_______________________________________________
Proj mailing list
Proj at lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/proj



From ed at topozone.com  Tue Feb 21 11:00:43 2006
From: ed at topozone.com (Ed McNierney)
Date: Tue, 21 Feb 2006 14:00:43 -0500
Subject: [Proj] Problems Migrating to .net 2.0
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD976@ptolemy.topozone.com>

Eric -

Thanks - we'll look into the proj_api namespace change.  I don't recall
changing much when we used this under .NET 1.1, but that was a little
while ago.  Thanks for the help!  No worries on UTM zones - we're only
implementing zones in the US, and I don't think we'll be annexing
Svalbard anytime soon <g>.

	- Ed 

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Eric Miller
Sent: Tuesday, February 21, 2006 1:35 PM
To: proj at lists.maptools.org
Subject: RE: [Proj] Problems Migrating to .net 2.0

Okay,

Well, it wasn't clear to me since the namespace was altered from
"ProjApi" to "proj_api".  That leads me to believe other things may have
been altered...

Anyway, I haven't done any research on .NET 2.0, so can't be much help.
My only guess besides the invalid projection definitions is that the
memory for the data arrays is being garbage collected despite the
[InAttribute, OutAttribute] attributes on the import definition.  I've
since learned, it'd be easier to just write "ref double[] foo" but I'm
not sure that'd matter.

I'd say, fix the projection init statements and check for IntPtr.Zero
after pj_init_plus() before doing anything else.  Even though the error
isn't a Null Pointer exception, it still can't hurt to check.

BTW, on a worldwide scale, your UTM zone number calc will be wrong in
some areas due to the exceptions around Norway and such.

>>> ed at topozone.com 2/21/2006 9:57:25 AM >>>
Eric -

No, proj doesn't come with C# wrappers - but you wrote one!  That's the
wrapper Scott is using; see
http://lists.maptools.org/pipermail/proj/2004-September/001338.html for
the source.

	- Ed 

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Eric Miller
Sent: Tuesday, February 21, 2006 12:23 PM
To: proj at lists.maptools.org
Subject: Re: [Proj] Problems Migrating to .net 2.0

Since proj doesn't come with C# wrappers, we can't guess how the C#
function call imports are defined.

Nevertheless, you don't do any error checking.  Are you sure your
pj_init_plus calls are succeeding?  Their definitions look suspect to
me...

"""
IntPtr src0 = proj_api.Proj.pj_init_plus("+proj_api.Proj=latlong
+datum=NAD27"); """

>>> scott at topozone.com 2/21/2006 7:51:29 AM >>>
Hello,

 

I've recently moved my project from .net 1.1 to .net 2.0

 

I've tested this code on 1.1, but there are some added restrictions and
stuff that just won't compile in 2.0.  

 

This is the C# wrapper that I'm using

 


"Attempted to read or write protected memory. This is often an
indication that other memory is corrupt."


 

 

            public static int LLtoUTM(int datumIn, int datumOut, double
p_lat, double p_lon,ref double UTMNorthing,ref double UTMEasting,ref int
UTMZone)

            {

                  int errno;

                  //This is the formula for calculating which Zone a
point is in at a particular lat/long

                  int ZoneNumber = Convert.ToInt32((p_lon + 180) / 6) +
1;

                  double[] x = new double[1];

                  double[] y = new double[1];

                  double[] z = new double[1];

                  y[0] = p_lat*proj_api.Proj.DEG_TO_RAD;

                  x[0] = p_lon*proj_api.Proj.DEG_TO_RAD;

                  z[0] = 0.0;

                  IntPtr src0=
proj_api.Proj.pj_init_plus("+proj_api.Proj=latlong +datum=NAD27");

                  IntPtr src1 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=latlong +datum=NAD83");

                  IntPtr dst0 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=utm +zone=" + ZoneNumber + "
+datum=NAD27");

                  IntPtr dst1 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=utm +zone=" + ZoneNumber + "
+datum=NAD83");

                  //This nice little bit of code below is designed to
execute pj_transfrom (the proj_api.Proj lib all around function)

                  //with the correct parameters so that a datumshift to
the correct datum is included.

                  if(datumIn==0)

                  {

                        if(datumOut==0)

                        {

                              errno = proj_api.Proj.pj_transform(src0,
dst0, 1, 1, x, y, z);//NAD27-NAD83

                        }

                        else

                        {

                              errno = proj_api.Proj.pj_transform(src0,
dst1, 1, 1, x, y, z);//NAD27-NAD27

                        }

                  }

                  else

                  {

                        if(datumOut==0)

                        {

                              errno = proj_api.Proj.pj_transform(src1,
dst0, 1, 1, x, y, z);//NAD83-NAD27

                        }

                        else

                        {

ERROR THROWN HERE    -> errno = proj_api.Proj.pj_transform(src1, dst1,
1, 1, x, y, z); //NAD83-NAD83

                        }

                  }

                  

                  proj_api.Proj.pj_free(dst1);

                  proj_api.Proj.pj_free(src1);

                  proj_api.Proj.pj_free(dst0);

                  proj_api.Proj.pj_free(src0);

                  UTMNorthing = y[0];

                  UTMEasting = x[0];

                  UTMZone = ZoneNumber;

                  return errno; 

            }

 

 


"Attempted to read or write protected memory. This is often an
indication that other memory is corrupt."


 

Any help would be appretiated.


Thanks!

 

-Scott

 

 

 



_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj 

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From opo at hp.fciencias.unam.mx  Wed Feb 22 09:30:35 2006
From: opo at hp.fciencias.unam.mx (Octavio Paez Osuna)
Date: Wed, 22 Feb 2006 11:30:35 -0600 (CST)
Subject: [Proj] NAD27 to WGS84 ?
Message-ID: <Pine.LNX.4.44.0602221120150.902-100000@hp.fciencias.unam.mx>


Hello,

I'm new to the list, and to proj, and to Geography. I'm working in some 
maps for GPS receivers (Garming). One of the tools (graphical 
interface) for map creation (visualization) assumes the data is in 
lat/long datum WGS84.

All the vector data available for Mexico is in lcc NAD27. The data is 
available in shapefiles for which I implemented a C program that 
successfully extracts the coordinates and translate them to lat/long 
in the NAD27 datum using the proj library. 

The questions are: Is it possible to shift (?) the data to WGS84 using 
proj?

Which command/parameters should I use to do it?

Any help will be really appreciated,

Thanks,

Octavio



From cjmce at lsu.edu  Wed Feb 22 10:41:26 2006
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 22 Feb 2006 12:41:26 -0600
Subject: [Proj] NAD27 to WGS84 ?
Message-ID: <OFF5F81E3A.A8CCB7A3-ON8625711D.0066ABD8-8625711D.0066ABF1@lsu.edu>





Octavio,

I suggest you contact Mr. Dave Doyle or Dr. Tomas Soler at the U.S.
National Geodetic Survey.  There is free software that works for the U.S.,
but I do not know if there is a data set for Mexico.  Those two gentlemen
would certainly know, and Dr. Soler has done a great deal of advisory work
for the Mexican Government.

You can start at:  www.ngs.noaa.gov and there is a "Personnel Locator" on
the left-hand side of the page that will allow you to search for e-mail
addresses as well as telephone numbers.

Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy
CENTER FOR GEOINFORMATICS
Department of Civil Engineering
LOUISIANA STATE UNIVERSITY
Baton Rouge, LA 70803
Voice and Facsimile: (225) 578-8536 [Academic]
Voice and Facsimile: (225) 578-4474 [Research]
================================
http://www.ASPRS.org/resources/GRIDS
http://www.cee.lsu.edu/facultyStaff/mugnier/index.html
================================



Hello,

I'm new to the list, and to proj, and to Geography. I'm working in some
maps for GPS receivers (Garming). One of the tools (graphical
interface) for map creation (visualization) assumes the data is in
lat/long datum WGS84.

All the vector data available for Mexico is in lcc NAD27. The data is
available in shapefiles for which I implemented a C program that
successfully extracts the coordinates and translate them to lat/long
in the NAD27 datum using the proj library.

The questions are: Is it possible to shift (?) the data to WGS84 using
proj?

Which command/parameters should I use to do it?

Any help will be really appreciated,

Thanks,

Octavio

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From EMiller at dfg.ca.gov  Wed Feb 22 11:08:34 2006
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Wed, 22 Feb 2006 11:08:34 -0800
Subject: [Proj] NAD27 to WGS84 ?
Message-ID: <s3fc465a.057@dfg.ca.gov>

There are published "3-parameter" datum transformation values for NAD27 (Mexico) at: 

http://earth-info.nga.mil/GandG/coordsys/onlinedatum/CountryNorthAmericaTable.html#NASL 

You can use the DX,DY,DZ values via the +towgs84 parameter for the source projection.  Then, use the pj_transform() function to convert from LCC/NAD27 to GEO/WGS84.

Something like:

src = pj_init_plus("+proj=lcc <your parameters here> +towgs84=-12,130,190");
dst = pj_init_plus("+proj=latlong +datum=WGS84")

There's a fair amount of error in those conversions, but they're okay for small-scale mapping.

>>> opo at hp.fciencias.unam.mx 2/22/2006 9:30 AM >>>

Hello,

I'm new to the list, and to proj, and to Geography. I'm working in some 
maps for GPS receivers (Garming). One of the tools (graphical 
interface) for map creation (visualization) assumes the data is in 
lat/long datum WGS84.

All the vector data available for Mexico is in lcc NAD27. The data is 
available in shapefiles for which I implemented a C program that 
successfully extracts the coordinates and translate them to lat/long 
in the NAD27 datum using the proj library. 

The questions are: Is it possible to shift (?) the data to WGS84 using 
proj?

Which command/parameters should I use to do it?

Any help will be really appreciated,

Thanks,

Octavio

_______________________________________________
Proj mailing list
Proj at lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/proj




From opo at hp.fciencias.unam.mx  Wed Feb 22 11:23:30 2006
From: opo at hp.fciencias.unam.mx (Octavio Paez Osuna)
Date: Wed, 22 Feb 2006 13:23:30 -0600 (CST)
Subject: [Proj] NAD27 to WGS84 ?
In-Reply-To: <s3fc465a.057@dfg.ca.gov>
Message-ID: <Pine.LNX.4.44.0602221321350.902-100000@hp.fciencias.unam.mx>


Thank you Eric and everybody that contributed to answer my questions. It 
is a good thing that a list like this one with such nice people 
posting exists.

Octavio

On Wed, 22 Feb 2006, Eric Miller wrote:

> There are published "3-parameter" datum transformation values for NAD27 (Mexico) at: 
> 
> http://earth-info.nga.mil/GandG/coordsys/onlinedatum/CountryNorthAmericaTable.html#NASL 
> 
> You can use the DX,DY,DZ values via the +towgs84 parameter for the source projection.  Then, use the pj_transform() function to convert from LCC/NAD27 to GEO/WGS84.
> 
> Something like:
> 
> src = pj_init_plus("+proj=lcc <your parameters here> +towgs84=-12,130,190");
> dst = pj_init_plus("+proj=latlong +datum=WGS84")
> 
> There's a fair amount of error in those conversions, but they're okay for small-scale mapping.
> 
> >>> opo at hp.fciencias.unam.mx 2/22/2006 9:30 AM >>>
> 
> Hello,
> 
> I'm new to the list, and to proj, and to Geography. I'm working in some 
> maps for GPS receivers (Garming). One of the tools (graphical 
> interface) for map creation (visualization) assumes the data is in 
> lat/long datum WGS84.
> 
> All the vector data available for Mexico is in lcc NAD27. The data is 
> available in shapefiles for which I implemented a C program that 
> successfully extracts the coordinates and translate them to lat/long 
> in the NAD27 datum using the proj library. 
> 
> The questions are: Is it possible to shift (?) the data to WGS84 using 
> proj?
> 
> Which command/parameters should I use to do it?
> 
> Any help will be really appreciated,
> 
> Thanks,
> 
> Octavio
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org 
> http://lists.maptools.org/mailman/listinfo/proj
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 



From cjmce at lsu.edu  Wed Feb 22 12:50:35 2006
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 22 Feb 2006 14:50:35 -0600
Subject: [Proj] NAD27 to WGS84 ?
Message-ID: <OFA00F5726.7FCC3938-ON8625711D.00727E97-8625711D.00727EB4@lsu.edu>





Octavio,

Note that using those published 3-parameter values will yield no better
than 12-meter accuracy.  What I earlier suggested with respect to the
National Geodetic Survey has the potential accuracy improvement of more
than ten times better - IF such a data file exists for their software.

If accuracy to no better than 12 meters is sufficient for your needs, then
there's no need to contact NGS.

C. Mugnier

--------------------------------

Thank you Eric and everybody that contributed to answer my questions. It
is a good thing that a list like this one with such nice people
posting exists.

Octavio

On Wed, 22 Feb 2006, Eric Miller wrote:

> There are published "3-parameter" datum transformation values for NAD27
(Mexico) at:
>
>
http://earth-info.nga.mil/GandG/coordsys/onlinedatum/CountryNorthAmericaTable.html#NASL
>
> You can use the DX,DY,DZ values via the +towgs84 parameter for the source
projection.  Then, use the pj_transform() function to convert from
LCC/NAD27 to GEO/WGS84.
>
> Something like:
>
> src = pj_init_plus("+proj=lcc <your parameters here>
+towgs84=-12,130,190");
> dst = pj_init_plus("+proj=latlong +datum=WGS84")
>
> There's a fair amount of error in those conversions, but they're okay for
small-scale mapping.
>
> >>> opo at hp.fciencias.unam.mx 2/22/2006 9:30 AM >>>
>
> Hello,
>
> I'm new to the list, and to proj, and to Geography. I'm working in some
> maps for GPS receivers (Garming). One of the tools (graphical
> interface) for map creation (visualization) assumes the data is in
> lat/long datum WGS84.
>
> All the vector data available for Mexico is in lcc NAD27. The data is
> available in shapefiles for which I implemented a C program that
> successfully extracts the coordinates and translate them to lat/long
> in the NAD27 datum using the proj library.
>
> The questions are: Is it possible to shift (?) the data to WGS84 using
> proj?
>
> Which command/parameters should I use to do it?
>
> Any help will be really appreciated,
>
> Thanks,
>
> Octavio
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From opo at hp.fciencias.unam.mx  Wed Feb 22 17:26:35 2006
From: opo at hp.fciencias.unam.mx (Octavio Paez Osuna)
Date: Wed, 22 Feb 2006 19:26:35 -0600 (CST)
Subject: [Proj] NAD27 to WGS84 ?
In-Reply-To: <OFA00F5726.7FCC3938-ON8625711D.00727E97-8625711D.00727EB4@lsu.edu>
Message-ID: <Pine.LNX.4.44.0602221915500.16812-100000@hp.fciencias.unam.mx>


The data I have is in the scale of 1:1000000. Do you think it will be 
significant?

The proyect I'm working on will be a free/able to modify/improve GPS base 
map of Mexico: roads, water bodies, state limits, main streets in bigger 
cities, etc. The only vector data freely available is in the scale I 
mentioned, but it is no too far off, actually it is more accurate/detailed 
than the Garmin base map the unit comes with. The idea is for the users of 
the map to improve it over time.

Thank you,

Octavio

On Wed, 22 Feb 2006, Clifford J Mugnier wrote:

> 
> 
> 
> 
> Octavio,
> 
> Note that using those published 3-parameter values will yield no better
> than 12-meter accuracy.  What I earlier suggested with respect to the
> National Geodetic Survey has the potential accuracy improvement of more
> than ten times better - IF such a data file exists for their software.
> 
> If accuracy to no better than 12 meters is sufficient for your needs, then
> there's no need to contact NGS.
> 
> C. Mugnier
> 
> --------------------------------
> 
> Thank you Eric and everybody that contributed to answer my questions. It
> is a good thing that a list like this one with such nice people
> posting exists.
> 
> Octavio
> 
> On Wed, 22 Feb 2006, Eric Miller wrote:
> 
> > There are published "3-parameter" datum transformation values for NAD27
> (Mexico) at:
> >
> >
> http://earth-info.nga.mil/GandG/coordsys/onlinedatum/CountryNorthAmericaTable.html#NASL
> >
> > You can use the DX,DY,DZ values via the +towgs84 parameter for the source
> projection.  Then, use the pj_transform() function to convert from
> LCC/NAD27 to GEO/WGS84.
> >
> > Something like:
> >
> > src = pj_init_plus("+proj=lcc <your parameters here>
> +towgs84=-12,130,190");
> > dst = pj_init_plus("+proj=latlong +datum=WGS84")
> >
> > There's a fair amount of error in those conversions, but they're okay for
> small-scale mapping.
> >
> > >>> opo at hp.fciencias.unam.mx 2/22/2006 9:30 AM >>>
> >
> > Hello,
> >
> > I'm new to the list, and to proj, and to Geography. I'm working in some
> > maps for GPS receivers (Garming). One of the tools (graphical
> > interface) for map creation (visualization) assumes the data is in
> > lat/long datum WGS84.
> >
> > All the vector data available for Mexico is in lcc NAD27. The data is
> > available in shapefiles for which I implemented a C program that
> > successfully extracts the coordinates and translate them to lat/long
> > in the NAD27 datum using the proj library.
> >
> > The questions are: Is it possible to shift (?) the data to WGS84 using
> > proj?
> >
> > Which command/parameters should I use to do it?
> >
> > Any help will be really appreciated,
> >
> > Thanks,
> >
> > Octavio
> >
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
> >
> >
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
> >
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 



From cjmce at lsu.edu  Wed Feb 22 20:23:28 2006
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 22 Feb 2006 22:23:28 -0600
Subject: [Proj] NAD27 to WGS84 ?
Message-ID: <OF66A08B4B.6A9982C2-ON8625711E.00181F3D-8625711E.00181F58@lsu.edu>





Octavio,

At that scale (1:1,000,000), it is NOT significant.  I'd say the choice of
ellipsoid is quite "iffy."  Forget about Datums; they are meaningless at
that scale.

C. Mugnier
LSU
------------------
The data I have is in the scale of 1:1000000. Do you think it will be
significant?

The proyect I'm working on will be a free/able to modify/improve GPS base
map of Mexico: roads, water bodies, state limits, main streets in bigger
cities, etc. The only vector data freely available is in the scale I
mentioned, but it is no too far off, actually it is more accurate/detailed
than the Garmin base map the unit comes with. The idea is for the users of
the map to improve it over time.

Thank you,

Octavio

On Wed, 22 Feb 2006, Clifford J Mugnier wrote:

>
>
>
>
> Octavio,
>
> Note that using those published 3-parameter values will yield no better
> than 12-meter accuracy.  What I earlier suggested with respect to the
> National Geodetic Survey has the potential accuracy improvement of more
> than ten times better - IF such a data file exists for their software.
>
> If accuracy to no better than 12 meters is sufficient for your needs,
then
> there's no need to contact NGS.
>
> C. Mugnier
>
> --------------------------------
>
> Thank you Eric and everybody that contributed to answer my questions. It
> is a good thing that a list like this one with such nice people
> posting exists.
>
> Octavio
>
> On Wed, 22 Feb 2006, Eric Miller wrote:
>
> > There are published "3-parameter" datum transformation values for NAD27
> (Mexico) at:
> >
> >
>
http://earth-info.nga.mil/GandG/coordsys/onlinedatum/CountryNorthAmericaTable.html#NASL
> >
> > You can use the DX,DY,DZ values via the +towgs84 parameter for the
source
> projection.  Then, use the pj_transform() function to convert from
> LCC/NAD27 to GEO/WGS84.
> >
> > Something like:
> >
> > src = pj_init_plus("+proj=lcc <your parameters here>
> +towgs84=-12,130,190");
> > dst = pj_init_plus("+proj=latlong +datum=WGS84")
> >
> > There's a fair amount of error in those conversions, but they're okay
for
> small-scale mapping.
> >
> > >>> opo at hp.fciencias.unam.mx 2/22/2006 9:30 AM >>>
> >
> > Hello,
> >
> > I'm new to the list, and to proj, and to Geography. I'm working in some
> > maps for GPS receivers (Garming). One of the tools (graphical
> > interface) for map creation (visualization) assumes the data is in
> > lat/long datum WGS84.
> >
> > All the vector data available for Mexico is in lcc NAD27. The data is
> > available in shapefiles for which I implemented a C program that
> > successfully extracts the coordinates and translate them to lat/long
> > in the NAD27 datum using the proj library.
> >
> > The questions are: Is it possible to shift (?) the data to WGS84 using
> > proj?
> >
> > Which command/parameters should I use to do it?
> >
> > Any help will be really appreciated,
> >
> > Thanks,
> >
> > Octavio
> >
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
> >
> >
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
> >
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From scott at topozone.com  Thu Feb 23 09:48:52 2006
From: scott at topozone.com (Scott Schulthess)
Date: Thu, 23 Feb 2006 12:48:52 -0500
Subject: [Proj] Problems Migrating to .net 2.0
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD9A0@ptolemy.topozone.com>

Eric - 

Thanks for your help.  They added a new error namespace in 2.0 - that's
what threw that incredibly ambigious error message, which should've just
been explained as a null reference exception. Asp.net just wanted me to
check for zero before calling pj_tranform.  Checking for IntPtr.Zero
seems to work, but I haven't tested if it actually does the transform
alright yet.

-Scott


-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Eric Miller
Sent: Tuesday, February 21, 2006 1:35 PM
To: proj at lists.maptools.org
Subject: RE: [Proj] Problems Migrating to .net 2.0

Okay,

Well, it wasn't clear to me since the namespace was altered from
"ProjApi" to "proj_api".  That leads me to believe other things may have
been altered...

Anyway, I haven't done any research on .NET 2.0, so can't be much help.
My only guess besides the invalid projection definitions is that the
memory for the data arrays is being garbage collected despite the
[InAttribute, OutAttribute] attributes on the import definition.  I've
since learned, it'd be easier to just write "ref double[] foo" but I'm
not sure that'd matter.

I'd say, fix the projection init statements and check for IntPtr.Zero
after pj_init_plus() before doing anything else.  Even though the error
isn't a Null Pointer exception, it still can't hurt to check.

BTW, on a worldwide scale, your UTM zone number calc will be wrong in
some areas due to the exceptions around Norway and such.

>>> ed at topozone.com 2/21/2006 9:57:25 AM >>>
Eric -

No, proj doesn't come with C# wrappers - but you wrote one!  That's the
wrapper Scott is using; see
http://lists.maptools.org/pipermail/proj/2004-September/001338.html for
the source.

	- Ed 

-----Original Message-----
From: proj-bounces at lists.maptools.org 
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Eric Miller
Sent: Tuesday, February 21, 2006 12:23 PM
To: proj at lists.maptools.org 
Subject: Re: [Proj] Problems Migrating to .net 2.0

Since proj doesn't come with C# wrappers, we can't guess how the C#
function call imports are defined.

Nevertheless, you don't do any error checking.  Are you sure your
pj_init_plus calls are succeeding?  Their definitions look suspect to
me...

"""
IntPtr src0 = proj_api.Proj.pj_init_plus("+proj_api.Proj=latlong
+datum=NAD27"); """

>>> scott at topozone.com 2/21/2006 7:51:29 AM >>>
Hello,

 

I've recently moved my project from .net 1.1 to .net 2.0

 

I've tested this code on 1.1, but there are some added restrictions and
stuff that just won't compile in 2.0.  

 

This is the C# wrapper that I'm using

 


"Attempted to read or write protected memory. This is often an
indication that other memory is corrupt."


 

 

            public static int LLtoUTM(int datumIn, int datumOut, double
p_lat, double p_lon,ref double UTMNorthing,ref double UTMEasting,ref int
UTMZone)

            {

                  int errno;

                  //This is the formula for calculating which Zone a
point is in at a particular lat/long

                  int ZoneNumber = Convert.ToInt32((p_lon + 180) / 6) +
1;

                  double[] x = new double[1];

                  double[] y = new double[1];

                  double[] z = new double[1];

                  y[0] = p_lat*proj_api.Proj.DEG_TO_RAD;

                  x[0] = p_lon*proj_api.Proj.DEG_TO_RAD;

                  z[0] = 0.0;

                  IntPtr src0=
proj_api.Proj.pj_init_plus("+proj_api.Proj=latlong +datum=NAD27");

                  IntPtr src1 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=latlong +datum=NAD83");

                  IntPtr dst0 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=utm +zone=" + ZoneNumber + "
+datum=NAD27");

                  IntPtr dst1 =
proj_api.Proj.pj_init_plus("+proj_api.Proj=utm +zone=" + ZoneNumber + "
+datum=NAD83");

                  //This nice little bit of code below is designed to
execute pj_transfrom (the proj_api.Proj lib all around function)

                  //with the correct parameters so that a datumshift to
the correct datum is included.

                  if(datumIn==0)

                  {

                        if(datumOut==0)

                        {

                              errno = proj_api.Proj.pj_transform(src0,
dst0, 1, 1, x, y, z);//NAD27-NAD83

                        }

                        else

                        {

                              errno = proj_api.Proj.pj_transform(src0,
dst1, 1, 1, x, y, z);//NAD27-NAD27

                        }

                  }

                  else

                  {

                        if(datumOut==0)

                        {

                              errno = proj_api.Proj.pj_transform(src1,
dst0, 1, 1, x, y, z);//NAD83-NAD27

                        }

                        else

                        {

ERROR THROWN HERE    -> errno = proj_api.Proj.pj_transform(src1, dst1,
1, 1, x, y, z); //NAD83-NAD83

                        }

                  }

                  

                  proj_api.Proj.pj_free(dst1);

                  proj_api.Proj.pj_free(src1);

                  proj_api.Proj.pj_free(dst0);

                  proj_api.Proj.pj_free(src0);

                  UTMNorthing = y[0];

                  UTMEasting = x[0];

                  UTMZone = ZoneNumber;

                  return errno; 

            }

 

 


"Attempted to read or write protected memory. This is often an
indication that other memory is corrupt."


 

Any help would be appretiated.


Thanks!

 

-Scott

 

 

 



_______________________________________________
Proj mailing list
Proj at lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/proj 

_______________________________________________
Proj mailing list
Proj at lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From richard.greenwood at gmail.com  Mon Feb 27 16:49:52 2006
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Mon, 27 Feb 2006 17:49:52 -0700
Subject: [Proj] RFC Javascript Proj
Message-ID: <ae9185aa0602271649x4e47144asc9dc0e48e816f325@mail.gmail.com>

Hello Proj List Members,

Below is a RFC that I sent to the Mapbuilder developer mailing list.
Mapbuilder is a WMS client:
   http://mapbuilder.sourceforge.net/
   http://mapbuilder.codehaus.org/
It has with a fledgling set of client-side javascript projection
functions. There is considerable interest in extending the functions
into a stand alone library. While the RFC below is aimed at the
Mapbuilder developer community, I would very much appreciate any
comments from the Proj community.

Rich


=== RFC for Proj.js Future Development ===

I would like to share my observations regarding Proj.js and get a
better understanding of what other people's expectations are.
Improvements that have been discussed:

  1. split it into dynamically loaded js files
 2. add more projections
 3. add datum shift support
 4. create an interface that other projects can use
  5. move proj.js into it's own library
 6. give it a new name
  7. setup a new email list to support Proj.js

Item discussion:

  1. split it into dynamically loaded js files

Proj.js is already the largest javascript file in the lib/model
directory. Currently it supports fewer than 200 coordinate systems
(CS), as opposed to >2500 supported by Proj.4
(http://proj.maptools.org/).  Most maps would require only one or two
CS so loading all the code and data to support hundreds or thousands
of Css is undesirable in a web environment.

I suggest a separate javascript file for each supported CS using a CS
definition format similar to the existing one. I suggest a second set
of javascript files for the projection classes, for example:
  ps.js     polar stereographic    containing psinit(), ll2ps(), ps2ll()
  tm.js    transverse mercator    containing tminit(), utminit(),
ll2tm(), tm2ll()
Each CS definition file would then load the appropriate projection
class functions file.

 2. add more projections

This item probably does not require much discussion.

 3. add datum shift support

Currently, Proj.js only converts between spherical to cartesian
coordinates (projects and un-projects).  However a CS is a combination
of 3 things: a projection, a datum, and an ellipsoid. (I am not a
geodecist, so please don't flame me if you don't like my
presentation). An EPSG code defines a CS, not just a projection.
Proj.js assumes that the spherical and planar CSs refer to the same
datum and ellipsoid, or put more bluntly, Proj.js ignores the datum
and ellipsoid.

Skip the next couple paragraphs if you are a geodecist, or if your are
not interested. A datum can be thought of as the origin of a CS. The
origin is the center of the earth, and different datums define
different locations for the center of the earth. Proj.4 defines these
different locations relative to WGS84. Looking in the Proj.4 EPSG file
at the first 3 parameters of +towgs84=x, y, z, ... gives you a feel
for the magnitude of these variations (the parameters are in meters).

An ellipsoid is the definition of the size and shape of the spherical
model. An ellipsoid often has an implied datum, and a datum often has
an implied ellipsoid. The point is that a given point on the earth
will have a different longitude and latitude if that long/lat are
referenced to the Clarke 1866 ellipsoid or the GRS80 ellipsoid.

Users expect to take a WMS map layer in WGS84 and "project" it into
their local CS, but simply projecting it will not give correct results
if their local CS is on a different ellipsoid, or datum.

Proj.js is based on the US Geological Survey's General Cartographic
Transformation Package (GCTP) which, as far as I can see, does not
support transformation between datums or ellipsoids. Datum
transformations range from simple to quite complex. Complex
transformations like NAD27 <=> NAD83 may be outside of the scope of a
client-side browser-based program. The simplest transformation is just
an X, Y, Z shift so that is where I would suggest starting.

 4. create an interface that other projects can use

Various other projects might benefit from a projection, or coordinate
transformation library.
OpenLayers, ka-map, and Mapblender were mention. It would be important
to survey interested projects before any any significant changes were
made to the interface.

  5. move proj.js into it's own library

This relates to item #4 above, i.e. make it broadly useful.

 6. give it a new name

I have two concerns about the name "Proj" or "Proj.js". First, it's
sounds a lot like Proj.4, the existing OS library, but it is currently
based on GCTP. And second, I would to see it go beyond just projection
and provide functionality for full fledged CS transformations.

  7. setup a new email list to support Proj.js

This goes with items #4 and #5 above.

--
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com



From acvolcano at gmail.com  Tue Feb 28 00:33:58 2006
From: acvolcano at gmail.com (acvolcano)
Date: Tue, 28 Feb 2006 16:33:58 +0800
Subject: [Proj] Does proj can be used on embedded linux?
Message-ID: <du11u4$eit$1@sea.gmane.org>

hi, everyone,
  Recently, I have tried to use proj on the arm-linux development board,
the cpu is ARM9.
  Yeah, I can compile the library, and install it. And I still intall
the libgdal library on the board, though I just want to use ogr.
everything is ok.
  But while I run the programme on the embedded linux system installed
on my development board. Some errors occur. It complains that "ERROR
1:latitude or longitude exceeded limits". And I know the msg was sent by
the function pj_fwd in file pj_fwd.c. But the progamme can run
wonderfully on my PC. The version of the library installed is 4.4.7.
  So I change another version,4.4.9. there are also some similar
mistakes. It complains to me that "geocentric transformation missing z
or ellps". I don't know how to do!
	best regards
acvolcano



From fabien.brachere at eikonex.net  Tue Feb 28 02:42:00 2006
From: fabien.brachere at eikonex.net (Fabien Brachere)
Date: Tue, 28 Feb 2006 11:42:00 +0100
Subject: [Proj] Conversion from WGS84 to UTM31
Message-ID: <1141123320.6746.20.camel@iti.tlse.eikonex.net>

Hello ,
I'm trying to convert data from my GPS to UTM31 coordinates and I use
something like that:

./cs2cs -v +init=epsg:4326 +to +init=epsg:23031
# ---- From Coordinate System ----
#Lat/long (Geodetic)
#
# +init=epsg:4326 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
# +towgs84=0,0,0
#--- following specified but NOT used
# +ellps=WGS84
# ---- To Coordinate System ----
#Universal Transverse Mercator (UTM)
#       Cyl, Sph
#       zone= south
# +init=epsg:23031 +proj=utm +zone=31 +ellps=intl +units=m +no_defs
0.69315 42.785283333
311308.87       4739728.32 -208.92

The point is in spain and I use wms from icc
( http://shagrat.icc.es/lizardtech/iserv/ows? layer mtc50m which is
EPSG:23031 ) to see if my results are OK.
Unfortunaly the point is about 100 meters far from the real point (as
you can see here: http://map.brachere.net/stade.jpg ).

When I use circe2000 ( from french geographic institut :
http://www.ign.fr/affiche_rubrique.asp?rbr_id=1700&lng_id=FR#68081 ) or
transdat ( http://www.killetsoft.de/transdat.htm ) the conversion result
is:
311405.583 4739753.703 which is exactly where I was with my GPS ( on the
bridge, image http://map.brachere.net/stade_circe.jpg ).

Am I wrong with cs2cs parameters or is there another problem ?
Thank you for your attention.


-- 
Fabien Brachere <fabien.brachere at eikonex.net>
Eikonex



From martin.vermeer at hut.fi  Tue Feb 28 03:25:26 2006
From: martin.vermeer at hut.fi (Martin Vermeer)
Date: Tue, 28 Feb 2006 13:25:26 +0200
Subject: [Proj] Conversion from WGS84 to UTM31
In-Reply-To: <1141123320.6746.20.camel@iti.tlse.eikonex.net>
References: <1141123320.6746.20.camel@iti.tlse.eikonex.net>
Message-ID: <1141125926.8459.19.camel@geo9.hut.fi>

On Tue, 2006-02-28 at 11:42 +0100, Fabien Brachere wrote:

Hello ,
I'm trying to convert data from my GPS to UTM31 coordinates and I use
something like that:

./cs2cs -v +init=epsg:4326 +to +init=epsg:23031

Surely there must be a datum offset... UTM31 coordinates on the
international ellipsoid sounds like a terrestrial, non-geocentric datum,
even if the <23031> entry doesn't provide one. 100 m sounds about right.

- Martin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060228/d03e09bb/attachment.sig>

From fabien.brachere at eikonex.net  Tue Feb 28 04:55:58 2006
From: fabien.brachere at eikonex.net (Fabien Brachere)
Date: Tue, 28 Feb 2006 13:55:58 +0100
Subject: [Proj] Conversion from WGS84 to UTM31
In-Reply-To: <1141125926.8459.19.camel@geo9.hut.fi>
References: <1141123320.6746.20.camel@iti.tlse.eikonex.net>
	<1141125926.8459.19.camel@geo9.hut.fi>
Message-ID: <1141131358.6746.29.camel@iti.tlse.eikonex.net>

Le mardi 28 février 2006 à 13:25 +0200, Martin Vermeer a écrit :
> On Tue, 2006-02-28 at 11:42 +0100, Fabien Brachere wrote:
> 
> Hello ,
> I'm trying to convert data from my GPS to UTM31 coordinates and I use
> something like that:
> 
> ./cs2cs -v +init=epsg:4326 +to +init=epsg:23031
> 
> Surely there must be a datum offset... UTM31 coordinates on the
> international ellipsoid sounds like a terrestrial, non-geocentric datum,
> even if the <23031> entry doesn't provide one. 100 m sounds about right.
> 
> - Martin

Thank you Martin, I think the datum is ED50 but I don't know how to
apply the offset, with towgs84 parameter or a grid ? If yes, do you know
where I can find the datum offset or the grid ?


-- 
Fabien Brachere <fabien.brachere at eikonex.net>
Eikonex



From martin.vermeer at hut.fi  Tue Feb 28 05:55:37 2006
From: martin.vermeer at hut.fi (Martin Vermeer)
Date: Tue, 28 Feb 2006 15:55:37 +0200
Subject: [Proj] Conversion from WGS84 to UTM31
In-Reply-To: <1141131358.6746.29.camel@iti.tlse.eikonex.net>
References: <1141123320.6746.20.camel@iti.tlse.eikonex.net>
	<1141125926.8459.19.camel@geo9.hut.fi>
	<1141131358.6746.29.camel@iti.tlse.eikonex.net>
Message-ID: <1141134938.8459.22.camel@geo9.hut.fi>

On Tue, 2006-02-28 at 13:55 +0100, Fabien Brachere wrote:
> Le mardi 28 février 2006 à 13:25 +0200, Martin Vermeer a écrit :
> > On Tue, 2006-02-28 at 11:42 +0100, Fabien Brachere wrote:
> > 
> > Hello ,
> > I'm trying to convert data from my GPS to UTM31 coordinates and I use
> > something like that:
> > 
> > ./cs2cs -v +init=epsg:4326 +to +init=epsg:23031
> > 
> > Surely there must be a datum offset... UTM31 coordinates on the
> > international ellipsoid sounds like a terrestrial, non-geocentric datum,
> > even if the <23031> entry doesn't provide one. 100 m sounds about right.
> > 
> > - Martin
> 
> Thank you Martin, I think the datum is ED50 but I don't know how to
> apply the offset, with towgs84 parameter or a grid ? If yes, do you know
> where I can find the datum offset or the grid ?

Google is your friend...

dx = -84 m +/- 5 m
dy = -107 m +/- 6 m
dz = -120 m +/- 3 m

see http://www.asprs.org/resources/grids/07-2000-spain.pdf

- Martin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060228/62493045/attachment.sig>

From warmerdam at pobox.com  Tue Feb 28 06:09:18 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 28 Feb 2006 09:09:18 -0500
Subject: [Proj] Does proj can be used on embedded linux?
In-Reply-To: <du11u4$eit$1@sea.gmane.org>
References: <du11u4$eit$1@sea.gmane.org>
Message-ID: <4404598E.5040208@pobox.com>

acvolcano wrote:
> hi, everyone,
>   Recently, I have tried to use proj on the arm-linux development board,
> the cpu is ARM9.
>   Yeah, I can compile the library, and install it. And I still intall
> the libgdal library on the board, though I just want to use ogr.
> everything is ok.
>   But while I run the programme on the embedded linux system installed
> on my development board. Some errors occur. It complains that "ERROR
> 1:latitude or longitude exceeded limits". And I know the msg was sent by
> the function pj_fwd in file pj_fwd.c. But the progamme can run
> wonderfully on my PC. The version of the library installed is 4.4.7.
>   So I change another version,4.4.9. there are also some similar
> mistakes. It complains to me that "geocentric transformation missing z
> or ellps". I don't know how to do!

ACVolcano,

The "...missing z or ellps" generally means you are missing the ellipse.
What was the transformation you were trying to do?  Did you include an
explicit +ellps=WGS84 or something similar?  If not, PROJ.4 will need to
find a default ellpse in the defaults file which it may well not be finding
on your ARM system.

I don't know about the first message.  It may be that the ARM floating point
math is weak enough that some operations will not work well.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From fabien.brachere at eikonex.net  Tue Feb 28 08:05:11 2006
From: fabien.brachere at eikonex.net (Fabien Brachere)
Date: Tue, 28 Feb 2006 17:05:11 +0100
Subject: [Proj] Conversion from WGS84 to UTM31
In-Reply-To: <1141134938.8459.22.camel@geo9.hut.fi>
References: <1141123320.6746.20.camel@iti.tlse.eikonex.net>
	<1141125926.8459.19.camel@geo9.hut.fi>
	<1141131358.6746.29.camel@iti.tlse.eikonex.net>
	<1141134938.8459.22.camel@geo9.hut.fi>
Message-ID: <1141142711.6746.33.camel@iti.tlse.eikonex.net>

Le mardi 28 février 2006 à 15:55 +0200, Martin Vermeer a écrit :
> On Tue, 2006-02-28 at 13:55 +0100, Fabien Brachere wrote:
> > Le mardi 28 février 2006 à 13:25 +0200, Martin Vermeer a écrit :
> > > On Tue, 2006-02-28 at 11:42 +0100, Fabien Brachere wrote:
> > > 
> > > Hello ,
> > > I'm trying to convert data from my GPS to UTM31 coordinates and I use
> > > something like that:
> > > 
> > > ./cs2cs -v +init=epsg:4326 +to +init=epsg:23031
> > > 
> > > Surely there must be a datum offset... UTM31 coordinates on the
> > > international ellipsoid sounds like a terrestrial, non-geocentric datum,
> > > even if the <23031> entry doesn't provide one. 100 m sounds about right.
> > > 
> > > - Martin
> > 
> > Thank you Martin, I think the datum is ED50 but I don't know how to
> > apply the offset, with towgs84 parameter or a grid ? If yes, do you know
> > where I can find the datum offset or the grid ?
> 
> Google is your friend...
> 
> dx = -84 m +/- 5 m
> dy = -107 m +/- 6 m
> dz = -120 m +/- 3 m
> 
> see http://www.asprs.org/resources/grids/07-2000-spain.pdf
> 
> - Martin
> 

Thank you very much, I finally find the offset in Circe2000 (the
software I mentionned above):
dx = -84 m
dy = -97 m 
dz = -117 m

I put it here for interrested people.

-- 
Fabien Brachere <fabien.brachere at eikonex.net>
Eikonex



From cjmce at lsu.edu  Tue Feb 28 10:47:12 2006
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 28 Feb 2006 12:47:12 -0600
Subject: [Proj] Conversion from WGS84 to UTM31
Message-ID: <OF1B301035.CC090E49-ON86257123.006732F4-86257123.00673302@lsu.edu>





Fabien,

The difference in the shift parameters offered by Circe2000 and my column
on Spain are likely the difference between the transformation parameters
between France and Spain.

You may get better correspondence with EU50 coordinates in Spain if you use
those parameters published for Spain.

I thought you said that you are in Spain ... ?

Happy Mardi Gras!

Clifford J. Mugnier
Chief of Geodesy
CENTER FOR GEOINFORMATICS
Department of Civil Engineering
CEBA 3223A
LOUISIANA STATE UNIVERSITY
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic]
Voice and Facsimile:  (225) 578-4474 [Research]
======================================================
http://www.asprs.org/resources/GRIDS/
http://www.cee.lsu.edu/facultyStaff/mugnier/index.html
======================================================



> > > Hello ,
> > > I'm trying to convert data from my GPS to UTM31 coordinates and I use
> > > something like that:
> > >
> > > ./cs2cs -v +init=epsg:4326 +to +init=epsg:23031
> > >
> > > Surely there must be a datum offset... UTM31 coordinates on the
> > > international ellipsoid sounds like a terrestrial, non-geocentric
datum,
> > > even if the <23031> entry doesn't provide one. 100 m sounds about
right.
> > >
> > > - Martin
> >
> > Thank you Martin, I think the datum is ED50 but I don't know how to
> > apply the offset, with towgs84 parameter or a grid ? If yes, do you
know
> > where I can find the datum offset or the grid ?
>
> Google is your friend...
>
> dx = -84 m +/- 5 m
> dy = -107 m +/- 6 m
> dz = -120 m +/- 3 m
>
> see http://www.asprs.org/resources/grids/07-2000-spain.pdf
>
> - Martin
>

Thank you very much, I finally find the offset in Circe2000 (the
software I mentionned above):
dx = -84 m
dy = -97 m
dz = -117 m

I put it here for interrested people.

--
Fabien Brachere <fabien.brachere at eikonex.net>
Eikonex



From ovv at hetnet.nl  Tue Feb 28 14:24:38 2006
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Tue, 28 Feb 2006 23:24:38 +0100
Subject: [Proj] Conversion from WGS84 to UTM31
In-Reply-To: <1141123320.6746.20.camel@iti.tlse.eikonex.net>
Message-ID: <C02A8C36.68EE%ovv@hetnet.nl>

> From: Fabien Brachere <fabien.brachere-eikonex.net>
> Subject: [Proj] Conversion from WGS84 to UTM31

> I'm trying to convert data from my GPS to UTM31 coordinates and I use
> something like that:
...
> 0.69315 42.785283333
...
> transdat ( http://www.killetsoft.de/transdat.htm ) the conversion result
> is:
> 311405.583 4739753.703 which is exactly where I was with my GPS

I calculated the conversion with my stuff; it's up to you or others to get
it into cs2cs.

First a datumshift from WGS to International 1924.
Bundesamt für Kartographie und Geodäsie has good parameters.
Look for Spain - EST99.
http://crs.bkg.bund.de/crseu/crs/eu-national.php
There are parameters available for the region in question, going from
ES_ED50 to ETRS89. The ED50 datum is on an ellipsoid equal to International
1924 and ETRS89 is nearly the same as WGS84.
I understand that you want to go in the opposite direction, from WGS84 to
ED50, so the mentioned parameters should be negated.
The transformation method is ISO (like PROJ.4 does), it est, an approximated
position vector Helmert transform. So the rotation angles don't have to be
changed after the first negation of all parameters.

The parameters from ES_ED50 -> ETRS89 are:
dx=-131.0; dy=-100.3; dz=-163.4;
rx=-1.244; ry=-0.020; rz=-1.144; ds=9.39;
(units: m, m, m, ", ", ", ppm)

With your:
lat=42.785283333; lon=0.69315; ht=0;
I arrive at:
lat=42.786375; lon=0.6943564; (deg)

The (not rounded) coordinates fed to a UTM projector, set to the correct
ellipsoid (ED50 or International 1924) and zone (31), gives the coordinates:
x=311408.377; y=4739755.778; (m)
The differences of 2.8 m and 2.1 m can be attributed to the use of a
slightly different set of parameters. The "CRS-EU" parameters are meant for
applications needing an accuracy of ca. 1.5 m.

The geocentric shift you mentioned:
dx=-84; dy=-97; dz=-117;
gives indeed:
x=311405.5829; y=4739753.7031; (m)
but as mr. Mugnier said, there are better parameters suited for the region
in question. See above!








From martin.vermeer at hut.fi  Tue Feb 28 22:55:26 2006
From: martin.vermeer at hut.fi (Martin Vermeer)
Date: Wed, 01 Mar 2006 08:55:26 +0200
Subject: [Proj] Conversion from WGS84 to UTM31
In-Reply-To: <OF1B301035.CC090E49-ON86257123.006732F4-86257123.00673302@lsu.edu>
References: <OF1B301035.CC090E49-ON86257123.006732F4-86257123.00673302@lsu.edu>
Message-ID: <1141196126.15308.2.camel@geo9.hut.fi>

On Tue, 2006-02-28 at 12:47 -0600, Clifford J Mugnier wrote:
> 
> 
> 
> Fabien,
> 
> The difference in the shift parameters offered by Circe2000 and my column
> on Spain are likely the difference between the transformation parameters
> between France and Spain.

Duh. I didn't even notice it was written by you...

- Martin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060301/957dad40/attachment.sig>

