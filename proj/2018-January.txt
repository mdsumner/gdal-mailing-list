From kreve at sdfe.dk  Tue Jan  9 04:48:07 2018
From: kreve at sdfe.dk (Kristian Evers)
Date: Tue, 9 Jan 2018 12:48:07 +0000
Subject: [Proj] Status of the COM interface?
Message-ID: <2E885BB293AF0448A0181138489E9A0EAEBB7844@S000014.PROD.SITAD.DK>

All,

What is the status of the COM interface? Is anyone using it still. No functional changes has been made to the code since 2005. Can this safely be removed from the library or are there still people out there who depend on it?

/Kristian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20180109/d0f0bd68/attachment.html>

From howard at hobu.co  Wed Jan 10 08:26:20 2018
From: howard at hobu.co (Howard Butler)
Date: Wed, 10 Jan 2018 10:26:20 -0600
Subject: [Proj] Status of the COM interface?
In-Reply-To: <2E885BB293AF0448A0181138489E9A0EAEBB7844@S000014.PROD.SITAD.DK>
References: <2E885BB293AF0448A0181138489E9A0EAEBB7844@S000014.PROD.SITAD.DK>
Message-ID: <238c2d7a-b836-3af2-1bf5-aeff3c879366@hobu.co>



On 1/9/18 6:48 AM, Kristian Evers wrote:
> All,
>
> What is the status of the COM interface? Is anyone using it still. No functional changes has been made to the code since 2005. Can this safely be removed from the library or are there still people out there who depend on it?
>
+1 to kill it. It's still in the repository if someone wants to revive
it (I feel sorry for them if they need to, too).

Howard

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 548 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20180110/9326d1fc/attachment.sig>

From kreve at sdfe.dk  Thu Jan 11 00:46:36 2018
From: kreve at sdfe.dk (Kristian Evers)
Date: Thu, 11 Jan 2018 08:46:36 +0000
Subject: [Proj] Status of the COM interface?
In-Reply-To: <238c2d7a-b836-3af2-1bf5-aeff3c879366@hobu.co>
References: <2E885BB293AF0448A0181138489E9A0EAEBB7844@S000014.PROD.SITAD.DK>
	<238c2d7a-b836-3af2-1bf5-aeff3c879366@hobu.co>
Message-ID: <2E885BB293AF0448A0181138489E9A0EAEBBC27D@S000014.PROD.SITAD.DK>

> +1 to kill it. 

That's consensus enough for me :-)

I'm killing it once 5.0.0 is out, unless someone speaks up in the next few days. Putting in the release notes that COM support will be removed in 5.1.0 and not supported in the future.

-----Oprindelig meddelelse-----
Fra: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] På vegne af Howard Butler
Sendt: 10. januar 2018 17:26
Til: proj at lists.maptools.org
Emne: Re: [Proj] Status of the COM interface?



On 1/9/18 6:48 AM, Kristian Evers wrote:
> All,
>
> What is the status of the COM interface? Is anyone using it still. No functional changes has been made to the code since 2005. Can this safely be removed from the library or are there still people out there who depend on it?
>
+1 to kill it. It's still in the repository if someone wants to revive
it (I feel sorry for them if they need to, too).

Howard



From sebastic at xs4all.nl  Thu Jan 11 05:23:07 2018
From: sebastic at xs4all.nl (Bas Couwenberg)
Date: Thu, 11 Jan 2018 14:23:07 +0100
Subject: [Proj] New OSGeo website should rename Proj4 to Proj
Message-ID: <32bdca3005ca9682e0122b78c360cc49@xs4all.nl>

Hi Jody,

As discussed on the proj list [0][1][2], the "4" in the PROJ.4 name 
should be de-emphasized, since the next major release will be PROJ 
v5.0.0.

Please rename the project on the new website from "Proj4" to "Proj".

[0] http://lists.maptools.org/pipermail/proj/2017-November/007878.html
[1] http://lists.maptools.org/pipermail/proj/2017-November/007875.html
[2] http://lists.maptools.org/pipermail/proj/2017-November/007874.html

Kind Regards,

Bas


From mateusz at loskot.net  Thu Jan 11 05:40:43 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 11 Jan 2018 14:40:43 +0100
Subject: [Proj] New OSGeo website should rename Proj4 to Proj
In-Reply-To: <32bdca3005ca9682e0122b78c360cc49@xs4all.nl>
References: <32bdca3005ca9682e0122b78c360cc49@xs4all.nl>
Message-ID: <CABUeae_uHuEjEeaTcXg3mxnE6JnX2wAjv1qNiPWofz0y6qgabQ@mail.gmail.com>

On 11 January 2018 at 14:23, Bas Couwenberg <sebastic at xs4all.nl> wrote:
> Hi Jody,
>
> As discussed on the proj list [0][1][2], the "4" in the PROJ.4 name
> should be de-emphasized, since the next major release will be PROJ
> v5.0.0.
>
> Please rename the project on the new website from "Proj4" to "Proj".

Isn't it a premature call?

https://github.com/OSGeo/proj.4/issues/735

"By keeping PROJ.4 as the name of the project, rather than the
product, we avoid a lot of unneeded trouble with web presence etc."

"Keeping PROJ.4 as an identifier for the project is also a tribute in
the memory of project founder Gerald I. Evenden."

"find_package (PROJ4 5.0)"

and there has been agreement on that so far.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net


From kreve at sdfe.dk  Thu Jan 11 06:01:15 2018
From: kreve at sdfe.dk (Kristian Evers)
Date: Thu, 11 Jan 2018 14:01:15 +0000
Subject: [Proj] New OSGeo website should rename Proj4 to Proj
In-Reply-To: <CABUeae_uHuEjEeaTcXg3mxnE6JnX2wAjv1qNiPWofz0y6qgabQ@mail.gmail.com>
References: <32bdca3005ca9682e0122b78c360cc49@xs4all.nl>
	<CABUeae_uHuEjEeaTcXg3mxnE6JnX2wAjv1qNiPWofz0y6qgabQ@mail.gmail.com>
Message-ID: <2E885BB293AF0448A0181138489E9A0EAEBBC694@S000014.PROD.SITAD.DK>

> Isn't it a premature call?

I'd say so, yes. Please don't change the name until after the v. 5.0.0 release is out. At that time we will have a definitive answer regarding naming of the project and its products.

/Kristian

-----Oprindelig meddelelse-----
Fra: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] På vegne af Mateusz Loskot
Sendt: 11. januar 2018 14:41
Til: PROJ.4 and general Projections Discussions <proj at lists.maptools.org>
Cc: Jody Garnett <jody.garnett at gmail.com>
Emne: Re: [Proj] New OSGeo website should rename Proj4 to Proj

On 11 January 2018 at 14:23, Bas Couwenberg <sebastic at xs4all.nl> wrote:
> Hi Jody,
>
> As discussed on the proj list [0][1][2], the "4" in the PROJ.4 name
> should be de-emphasized, since the next major release will be PROJ
> v5.0.0.
>
> Please rename the project on the new website from "Proj4" to "Proj".

Isn't it a premature call?

https://github.com/OSGeo/proj.4/issues/735

"By keeping PROJ.4 as the name of the project, rather than the
product, we avoid a lot of unneeded trouble with web presence etc."

"Keeping PROJ.4 as an identifier for the project is also a tribute in
the memory of project founder Gerald I. Evenden."

"find_package (PROJ4 5.0)"

and there has been agreement on that so far.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From roger.oberholtzer at gmail.com  Fri Jan 12 00:03:29 2018
From: roger.oberholtzer at gmail.com (Roger Oberholtzer)
Date: Fri, 12 Jan 2018 09:03:29 +0100
Subject: [Proj] New OSGeo website should rename Proj4 to Proj
In-Reply-To: <2E885BB293AF0448A0181138489E9A0EAEBBC694@S000014.PROD.SITAD.DK>
References: <32bdca3005ca9682e0122b78c360cc49@xs4all.nl>
	<CABUeae_uHuEjEeaTcXg3mxnE6JnX2wAjv1qNiPWofz0y6qgabQ@mail.gmail.com>
	<2E885BB293AF0448A0181138489E9A0EAEBBC694@S000014.PROD.SITAD.DK>
Message-ID: <CANkOqwN+HvmeeZBx=7XsQZoHzhw2KS2QT-9rD1hUm+hzYn5+hQ@mail.gmail.com>

On Thu, Jan 11, 2018 at 3:01 PM, Kristian Evers <kreve at sdfe.dk> wrote:
>> Isn't it a premature call?

>> As discussed on the proj list [0][1][2], the "4" in the PROJ.4 name
>> should be de-emphasized, since the next major release will be PROJ
>> v5.0.0.
>>
>> Please rename the project on the new website from "Proj4" to "Proj".

I agree about the name being simply Proj. My reasoning:

The release numbers don't match the API/ABI version. Proj 4.9.3 is
actually 12. What is being called the 5.x series will go through a few
version numbers. Keeping these two independent sets of numbers
straight is always a source of error.

One set of numbers to rule them all...


-- 
Roger Oberholtzer


From knudsen.thomas at gmail.com  Fri Jan 12 01:01:56 2018
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Fri, 12 Jan 2018 10:01:56 +0100
Subject: [Proj] New OSGeo website should rename Proj4 to Proj
In-Reply-To: <CANkOqwN+HvmeeZBx=7XsQZoHzhw2KS2QT-9rD1hUm+hzYn5+hQ@mail.gmail.com>
References: <32bdca3005ca9682e0122b78c360cc49@xs4all.nl>
	<CABUeae_uHuEjEeaTcXg3mxnE6JnX2wAjv1qNiPWofz0y6qgabQ@mail.gmail.com>
	<2E885BB293AF0448A0181138489E9A0EAEBBC694@S000014.PROD.SITAD.DK>
	<CANkOqwN+HvmeeZBx=7XsQZoHzhw2KS2QT-9rD1hUm+hzYn5+hQ@mail.gmail.com>
Message-ID: <CAH0YoEPagG8kARMGxBoaOwSWoUtMCQdW1aScgc5R-=JQnSwK3g@mail.gmail.com>

Roger, these numbers are not assumed to match - cf. e.g.
https://autotools.io/libtool/version.html
which says: "For what concerns the version of the ABI, it should not,
generally, be tied to the release version;"

And please check the entire text of what I propose: The name *is* indeed
PROJ, according to that, it's just a matter of keeping PROJ.4 as the name
of the *project*, and having *PROJ* as the *product*. This is a.o. in order
to keep a reasonable connection to the URL of the proj4.org web presence (
proj.org is not available)

You may disagree with me, but if you do so strongly, please volunteer to
carry out the rebranding.


2018-01-12 9:03 GMT+01:00 Roger Oberholtzer <roger.oberholtzer at gmail.com>:

> On Thu, Jan 11, 2018 at 3:01 PM, Kristian Evers <kreve at sdfe.dk> wrote:
> >> Isn't it a premature call?
>
> >> As discussed on the proj list [0][1][2], the "4" in the PROJ.4 name
> >> should be de-emphasized, since the next major release will be PROJ
> >> v5.0.0.
> >>
> >> Please rename the project on the new website from "Proj4" to "Proj".
>
> I agree about the name being simply Proj. My reasoning:
>
> The release numbers don't match the API/ABI version. Proj 4.9.3 is
> actually 12. What is being called the 5.x series will go through a few
> version numbers. Keeping these two independent sets of numbers
> straight is always a source of error.
>
> One set of numbers to rule them all...
>
>
> --
> Roger Oberholtzer
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20180112/fce81d4a/attachment.html>

From roger.oberholtzer at gmail.com  Fri Jan 12 01:27:54 2018
From: roger.oberholtzer at gmail.com (Roger Oberholtzer)
Date: Fri, 12 Jan 2018 10:27:54 +0100
Subject: [Proj] New OSGeo website should rename Proj4 to Proj
In-Reply-To: <CAH0YoEPagG8kARMGxBoaOwSWoUtMCQdW1aScgc5R-=JQnSwK3g@mail.gmail.com>
References: <32bdca3005ca9682e0122b78c360cc49@xs4all.nl>
	<CABUeae_uHuEjEeaTcXg3mxnE6JnX2wAjv1qNiPWofz0y6qgabQ@mail.gmail.com>
	<2E885BB293AF0448A0181138489E9A0EAEBBC694@S000014.PROD.SITAD.DK>
	<CANkOqwN+HvmeeZBx=7XsQZoHzhw2KS2QT-9rD1hUm+hzYn5+hQ@mail.gmail.com>
	<CAH0YoEPagG8kARMGxBoaOwSWoUtMCQdW1aScgc5R-=JQnSwK3g@mail.gmail.com>
Message-ID: <CANkOqwMYVYVZ3HZvdeVpMPhNXMVVF6HwXsomApZyyR2vZebaJQ@mail.gmail.com>

On Fri, Jan 12, 2018 at 10:01 AM, Thomas Knudsen
<knudsen.thomas at gmail.com> wrote:

> You may disagree with me, but if you do so strongly, please volunteer to
> carry out the rebranding.

I thought I was agreeing. I like Proj instead of Proj5. Sorry if I was unclear.

Still, it would be nice if the point release number (e.g., 5.13 or
whatever, where 13 is the ABI version) was somehow tied to the ABI
version.



-- 
Roger Oberholtzer


From solarjoe at posteo.org  Thu Jan 18 00:15:06 2018
From: solarjoe at posteo.org (Joe)
Date: Thu, 18 Jan 2018 09:15:06 +0100
Subject: [Proj] Transforming coordinates to Scene ENU system
Message-ID: <503ee03a31e87b3e0d3f01e614f9d88b@posteo.de>

Hello,

I would like to transform coordinates to a ENU system, but don't know
how to do that. I found several EPSG definitions but they don't seem to
work with PROJ.

I started an issue at the pyproj page that further elaborates my 
question.

https://github.com/jswhit/pyproj/issues/129

Can you tell me how to do this?

Kind regards,
Joe


From martin.vermeer at aalto.fi  Thu Jan 18 01:45:39 2018
From: martin.vermeer at aalto.fi (Vermeer Martin)
Date: Thu, 18 Jan 2018 09:45:39 +0000
Subject: [Proj] Transforming coordinates to Scene ENU system
In-Reply-To: <503ee03a31e87b3e0d3f01e614f9d88b@posteo.de>
References: <503ee03a31e87b3e0d3f01e614f9d88b@posteo.de>
Message-ID: <6h2d7yhyiffy28blyal4loyo.1516268323478@email.android.com>

Hi,

Note that you need to specify *two* points to do this: both your target point, and the topocentric origin. It seems proj can do this (using both 5819 and 15594, together somehow) but I haven't tried.

But why bother? If you have the WGS84 XYZ of both points, all you need is the 3x3 rotation matrix to topocentric orientation, whic depends only on lat, lon of the topo origin. Then, multiply with the vector of differences DX, DY, DZ and you have your ENU!

Best

Martin


Sent from Android


-------- Alkuperäinen viesti --------
Lähettäjä: Joe
Päivämäärä:18.01.2018 10.34 (GMT+02:00)
Saaja: proj at lists.maptools.org
Aihe: [Proj] Transforming coordinates to Scene ENU system

Hello,

I would like to transform coordinates to a ENU system, but don't know
how to do that. I found several EPSG definitions but they don't seem to
work with PROJ.

I started an issue at the pyproj page that further elaborates my
question.

https://github.com/jswhit/pyproj/issues/129

Can you tell me how to do this?

Kind regards,
Joe
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20180118/4e50d4d8/attachment.html>

From martin.vermeer at aalto.fi  Thu Jan 18 02:04:27 2018
From: martin.vermeer at aalto.fi (Vermeer Martin)
Date: Thu, 18 Jan 2018 10:04:27 +0000
Subject: [Proj] Transforming coordinates to Scene ENU system
In-Reply-To: <6h2d7yhyiffy28blyal4loyo.1516268323478@email.android.com>
References: <503ee03a31e87b3e0d3f01e614f9d88b@posteo.de>,
	<6h2d7yhyiffy28blyal4loyo.1516268323478@email.android.com>
Message-ID: <et8yd315q2klks32a9ppwgdb.1516269839158@email.android.com>

The matrix is presented here:

http://www.navipedia.net/index.php/Transformations_between_ECEF_and_ENU_coordinates

Hth Martin


Sent from Android


-------- Alkuperäinen viesti --------
Lähettäjä: Vermeer Martin
Päivämäärä:18.01.2018 11.45 (GMT+02:00)
Saaja: "PROJ.4 and general Projections Discussions"
Aihe: RE: [Proj] Transforming coordinates to Scene ENU system

Hi,

Note that you need to specify *two* points to do this: both your target point, and the topocentric origin. It seems proj can do this (using both 5819 and 15594, together somehow) but I haven't tried.

But why bother? If you have the WGS84 XYZ of both points, all you need is the 3x3 rotation matrix to topocentric orientation, whic depends only on lat, lon of the topo origin. Then, multiply with the vector of differences DX, DY, DZ and you have your ENU!

Best

Martin


Sent from Android


-------- Alkuperäinen viesti --------
Lähettäjä: Joe
Päivämäärä:18.01.2018 10.34 (GMT+02:00)
Saaja: proj at lists.maptools.org
Aihe: [Proj] Transforming coordinates to Scene ENU system

Hello,

I would like to transform coordinates to a ENU system, but don't know
how to do that. I found several EPSG definitions but they don't seem to
work with PROJ.

I started an issue at the pyproj page that further elaborates my
question.

https://github.com/jswhit/pyproj/issues/129

Can you tell me how to do this?

Kind regards,
Joe
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20180118/b615a5c9/attachment.html>

From eduardo.rojas at soltig.net  Sat Jan 20 19:01:13 2018
From: eduardo.rojas at soltig.net (=?UTF-8?Q?Eduardo_Rojas_Rodr=C3=ADguez?=)
Date: Sat, 20 Jan 2018 20:01:13 -0700 (MST)
Subject: [Proj] Correction of definition of CRS EPSG 5456 and 5457
Message-ID: <1516503673411-0.post@n6.nabble.com>

Greetings to all

let me introduce myself, my name is Eduardo Rojas Rodríguez I am a
Geographer specialized in GIS, I live in Costa Rica and I work for SOLTIG
who are the official commercial support of QGIS in Costa Rica.

Personally I am a fan of all OSGeo projects and I am currently very
committed to QGIS, all OSGeo projects and free software, I am given the task
to better understand the project of PROJ4 and how it works.

For this reason I realized that there is a problem with the definition that
is currently in PROJ4 for CRS 
EPSG 5456 and EPSG 5457 (Lambert Ocotepeque 1935 / Costa Rica North and
Lambert Ocotepeque 1935 / Costa Rica South).

The current definitions are:

EPSG 5456 current definition in PROJ4: (incorrect)
+proj=lcc +lat_1=10.46666666666667 +lat_0=10.46666666666667
+lon_0=-84.33333333333333 +k_0=0.99995696 +x_0=500000 +y_0=271820.522
+ellps=clrk66 +towgs84=205,96,-98,0,0,0,0 +units=m +no_defs

EPSG 5457 current definition in PROJ4: (incorrect)
+proj=lcc +lat_1=9 +lat_0=9 +lon_0=-83.66666666666667 +k_0=0.99995696
+x_0=500000 +y_0=327987.436 +ellps=clrk66 +towgs84=205,96,-98,0,0,0,0
+units=m +no_defs

After investigating the correct definition of CRS 5456 and 5457 and its
definition in PROJ4
should be replaced by:

EPSG 5456: Ocotepeque 1935 / Costa Rica Norte (correct definition)
+proj=lcc +lat_0=10.46666666666667  +lat_1=9.933333333 +lat_2=11
+lon_0=-84.3333333333 +k_0=0.99995696 +x_0=500000 +y_0=271820.522
+ellps=clrk66 +towgs84=213.116,9.358,-74.946,1.140,-2.980,3.100,-5.22
+units=m +no_defs

EPSG: 5457: Ocotepeque 1935 / Costa Rica Sur (correct definition)
+proj=lcc +lat_0=9 +lat_1=8.4666666667+lat_2=9.533333333
+lon_0=-83.666666667 +k_0=0.99995696 +x_0=500000 +y_0=327987.436
+ellps=clrk66 +towgs84=213.116,9.358,-74.946,1.140,-2.980,3.100,-5.22
+units=m +no_defs

with these definitions, the transformations that depend on the PROJ4 library
should be correct.

If you can help me explaining how and where to generate the report to
request the change of the definition, I thank you.

Is it just generating the report at https://github.com/OSGeo/proj.4/issues?

Thank you very much for the help








-----
Eduardo Rojas Rodríguez
Analista en SIG
Soluciones en Tecnologías
Tel: 506 2505-5453
eduardo.rojas at soltig.net
http://soltig.net


--
Sent from: http://osgeo-org.1560.x6.nabble.com/PROJ-4-f3840930.html


From andre+joost at nurfuerspam.de  Sat Jan 20 23:21:19 2018
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Sun, 21 Jan 2018 08:21:19 +0100
Subject: [Proj] Correction of definition of CRS EPSG 5456 and 5457
In-Reply-To: <1516503673411-0.post@n6.nabble.com>
References: <1516503673411-0.post@n6.nabble.com>
Message-ID: <p41f2k$glb$1@blaine.gmane.org>

Hi Eduardo,

The EPSG projection definitions in PROJ.4 are always taken from the 
official EPSG database https://www.epsg-registry.org/ , so you have to 
address your issue there firstly, adding some kind of official sources.

Note that datum shifts are treated separately in the EPSG database, so 
you have to divide your problem into:

a) different lat1/lat2 values

b) different towgs84 values.

Regarding the lat1/lat2 issue, see also

https://gis.stackexchange.com/questions/253475/results-of-layers-created-with-a-custom-crs-are-loaded-with-a-generated-crs-in-q/254087#254087

HTH,
Andre Joost

Am 21.01.18 um 04:01 schrieb Eduardo Rojas Rodríguez:
> Greetings to all
>
> let me introduce myself, my name is Eduardo Rojas Rodríguez I am a
> Geographer specialized in GIS, I live in Costa Rica and I work for SOLTIG
> who are the official commercial support of QGIS in Costa Rica.
>
> Personally I am a fan of all OSGeo projects and I am currently very
> committed to QGIS, all OSGeo projects and free software, I am given the task
> to better understand the project of PROJ4 and how it works.
>
> For this reason I realized that there is a problem with the definition that
> is currently in PROJ4 for CRS
> EPSG 5456 and EPSG 5457 (Lambert Ocotepeque 1935 / Costa Rica North and
> Lambert Ocotepeque 1935 / Costa Rica South).
>
> The current definitions are:
>
> EPSG 5456 current definition in PROJ4: (incorrect)
> +proj=lcc +lat_1=10.46666666666667 +lat_0=10.46666666666667
> +lon_0=-84.33333333333333 +k_0=0.99995696 +x_0=500000 +y_0=271820.522
> +ellps=clrk66 +towgs84=205,96,-98,0,0,0,0 +units=m +no_defs
>
> EPSG 5457 current definition in PROJ4: (incorrect)
> +proj=lcc +lat_1=9 +lat_0=9 +lon_0=-83.66666666666667 +k_0=0.99995696
> +x_0=500000 +y_0=327987.436 +ellps=clrk66 +towgs84=205,96,-98,0,0,0,0
> +units=m +no_defs
>
> After investigating the correct definition of CRS 5456 and 5457 and its
> definition in PROJ4
> should be replaced by:
>
> EPSG 5456: Ocotepeque 1935 / Costa Rica Norte (correct definition)
> +proj=lcc +lat_0=10.46666666666667  +lat_1=9.933333333 +lat_2=11
> +lon_0=-84.3333333333 +k_0=0.99995696 +x_0=500000 +y_0=271820.522
> +ellps=clrk66 +towgs84=213.116,9.358,-74.946,1.140,-2.980,3.100,-5.22
> +units=m +no_defs
>
> EPSG: 5457: Ocotepeque 1935 / Costa Rica Sur (correct definition)
> +proj=lcc +lat_0=9 +lat_1=8.4666666667+lat_2=9.533333333
> +lon_0=-83.666666667 +k_0=0.99995696 +x_0=500000 +y_0=327987.436
> +ellps=clrk66 +towgs84=213.116,9.358,-74.946,1.140,-2.980,3.100,-5.22
> +units=m +no_defs
>
> with these definitions, the transformations that depend on the PROJ4 library
> should be correct.
>
> If you can help me explaining how and where to generate the report to
> request the change of the definition, I thank you.
>
> Is it just generating the report at https://github.com/OSGeo/proj.4/issues?
>
> Thank you very much for the help
>
>
>
>
>
>
>
>
> -----
> Eduardo Rojas Rodríguez
> Analista en SIG
> Soluciones en Tecnologías
> Tel: 506 2505-5453
> eduardo.rojas at soltig.net
> http://soltig.net
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/PROJ-4-f3840930.html
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>




From eduardo.rojas at soltig.net  Sun Jan 21 13:44:22 2018
From: eduardo.rojas at soltig.net (=?UTF-8?Q?Eduardo_Rojas_Rodr=C3=ADguez?=)
Date: Sun, 21 Jan 2018 14:44:22 -0700 (MST)
Subject: [Proj] Correction of definition of CRS EPSG 5456 and 5457
In-Reply-To: <p41f2k$glb$1@blaine.gmane.org>
References: <1516503673411-0.post@n6.nabble.com>
	<p41f2k$glb$1@blaine.gmane.org>
Message-ID: <1516571062788-0.post@n6.nabble.com>

Hi Andre

thanks for the reply

When reviewing the definition within the EPSG database, the definition of
5456 and 5457 are correct. as you can see in the attached image. both
definitions have defined limits that are used for lat_1 and lat_2 however
they are not present within PROJ4

If you can explain to me which is the chain of where and how PROJ4 gets the
data from EPSG and how often is it updated, I thank you. likewise note that
within the EPSG the definition of 5456 and 5457 are correct. so 

I do not know if it is a PROJ4 problem at the time of obtaining the EPSG
data. the limits of 5456 are within type area: EPSG :: 3869 and the limits
of 5457 are within type area EPSG::3870 that for de lat1 lat2 of both
definitions.

within the ESPG could not find the type of transformation to get the
"toWGS84" parameter

<http://osgeo-org.1560.x6.nabble.com/file/t381085/area5456.png> 
<http://osgeo-org.1560.x6.nabble.com/file/t381085/area5457.png> 



-----
Eduardo Rojas Rodríguez
Analista en SIG
Soluciones en Tecnologías
Tel: 506 2505-5453
eduardo.rojas at soltig.net
http://soltig.net


--
Sent from: http://osgeo-org.1560.x6.nabble.com/PROJ-4-f3840930.html


From eduardo.rojas at soltig.net  Sun Jan 21 18:51:03 2018
From: eduardo.rojas at soltig.net (=?UTF-8?Q?Eduardo_Rojas_Rodr=C3=ADguez?=)
Date: Sun, 21 Jan 2018 19:51:03 -0700 (MST)
Subject: [Proj] Correction of definition of CRS EPSG 5456 and 5457
In-Reply-To: <p41f2k$glb$1@blaine.gmane.org>
References: <1516503673411-0.post@n6.nabble.com>
	<p41f2k$glb$1@blaine.gmane.org>
Message-ID: <1516589463599-0.post@n6.nabble.com>

Hi Andre

sorry for bothering you again

I have read extensively all the information you have given me and I have
come to the following conclusions:

1. according to
https://gis.stackexchange.com/questions/253475/results-of-layers-created-with-a-custom-crs-are-loaded-with-a-generated-crs-in-q/254087#254087
and 
http://geotiff.maptools.org/proj_list/lambert_conic_conformal_2sp.html

By having proj LCC 1SP with a scale factor is basically the same as LCC 2SP.
so the definition within PROJ4
+ proj = lcc + lat_1 = 10.46666666666667 + lat_0 = 10.46666666666667 + lon_0
= -84.33333333333333 + k_0 = 0.99995696 + x_0 = 500000 + y_0 = 271820.522 +
ellps = clrk66 + towgs84 = 205.96, -98.0.0.0.0 + units = m + no_defs

is correct since it determines lat_1 equal to lat_0

is this correct?

1. Regarding the "toWGS84" + towgs84 = 205.96, -98.0,0.0.0
is a concatenation (via NAD27) of the transformations 6888 and 1171 imported
from GDAL when using this transformation I get a displacement of 2mm

3. + towgs84 = 213.116,9.358, -74.946 are within the transformation EPSG ::
5470 Coordinate Transformation [Ocotepeque 1935 to WGS 84 (1)] which is more
general and I get displacements of 8 meters

As far as I can deduce, the definition is adequate both when using LCC1
which is equal to LCC2 with the scale factor.

the only thing then is to ask the EPSG for a transformation of EPSG :: 5470
Coordinate Transformation [Ocotepeque 1935 to WGS 84 (1) more presiding
using 7 parameters. maybe?


I would like to know what you think of my conclusions, so I can tell you how
much I have learned from PROJ4 and EPSG.

Thank you very much for all the help and everything I've learned



-----
Eduardo Rojas Rodríguez
Analista en SIG
Soluciones en Tecnologías
Tel: 506 2505-5453
eduardo.rojas at soltig.net
http://soltig.net


--
Sent from: http://osgeo-org.1560.x6.nabble.com/PROJ-4-f3840930.html


From martin.desruisseaux at geomatys.com  Mon Jan 22 01:51:56 2018
From: martin.desruisseaux at geomatys.com (Martin Desruisseaux)
Date: Mon, 22 Jan 2018 10:51:56 +0100
Subject: [Proj] Correction of definition of CRS EPSG 5456 and 5457
In-Reply-To: <1516589463599-0.post@n6.nabble.com>
References: <1516503673411-0.post@n6.nabble.com>
	<p41f2k$glb$1@blaine.gmane.org> <1516589463599-0.post@n6.nabble.com>
Message-ID: <cd0cb309-9b92-5754-f9b7-048daa00cc64@geomatys.com>

Hello Eduardo

Le 22/01/2018 à 03:51, Eduardo Rojas Rodríguez a écrit :

> By having proj LCC 1SP with a scale factor is basically the same as
> LCC 2SP.
>
Indeed, EPSG /"Lambert Conic Conformal (1SP)"/ and /"Lambert Conic
Conformal (2SP)"/ are basically the same projection with different way
to specify parameters. After those parameters have been converted to
internal coefficients, both projections can be implemented by the same
formulas. The same observation applies to some other projections, for
example /"Mercator (variant A)"/, /"Mercator (variant B)"/ and
/"Mercator (variant C)"/. As a side note, the Mercator projection itself
is the limit case of Lambert Conic Conformal projection when the
standard parallel is at the equator, and similar relationships exists
between some other projections.


> the only thing then is to ask the EPSG for a transformation of EPSG ::
> 5470 Coordinate Transformation [Ocotepeque 1935 to WGS 84 (1) more
> presiding using 7 parameters. maybe?
>
Here we reach a known issue with the way Proj.4 stores its definitions.
Proj.4 is what EPSG calls an /"early-binding implementation"/, meaning
that datum shift parameters (the "+towgs84" element) are specified
together with the Coordinate Reference System (CRS) definitions (the
"+lat_0", "+lat_1", "+k_0", /etc./ elements). In the EPSG database, map
projection definitions and datum shifts information are two separated
tables, for at least two reasons:

  * Datum shifts are not necessarily between the CRS and WGS84. In some
    cases (e.g. in Martinique), passing through WGS84 can only introduce
    errors in the results.
  * Many datum shifts may be defined between the same pair of CRS for
    different area of validity.
  * (side note: with ongoing revision of ISO 19111 standard taking in
    account tectonic plate motions, dissociating the two tables will be
    yet more important).

In your case, the EPSG database gives me 3 coordinate operations from
EPSG:5451 to EPSG:4326 (in addition of two operations to NAD27 and to
CR05; this illustrates what I said before, that datum shift operations
are not necessarily toward WGS84). Among them:

  * EPSG:6891 (looks similar but not identical to what you reported the
    Proj.4 does), the domain of validity is *"Costa Rica; El Salvador;
    Guatemala; Honduras; Nicaragua"* and the reported accuracy is *14
    metres*.
  * EPSG:5470, the domain of validity is *"Costa Rica - onshore"* and
    the reported accuracy is *8 metres*.

So the datum shifts to choose depends of the desired compromise between
accuracy and domain of validity. I think that by default, parameters in
Proj.4 CSV files were selected for the datum shift operation which is
valid over the widest area. An improvement over that would be to change
Proj.4 design from /"early-binding implementation"/ to /"late-binding
implementation"/, when datum shifts operation are fetched from a
separated table once Proj.4 know the source and target CRS, the desired
domain of validity and the epoch. They were some discussion one or two
years ago about replacing the Proj.4 CSV file by a full EPSG database on
SQLite, in order to prepare Proj.4 for such evolution.

    Martin


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20180122/4ed50cc0/attachment.html>

From kreve at sdfe.dk  Mon Jan 22 02:26:25 2018
From: kreve at sdfe.dk (Kristian Evers)
Date: Mon, 22 Jan 2018 10:26:25 +0000
Subject: [Proj] Correction of definition of CRS EPSG 5456 and 5457
In-Reply-To: <cd0cb309-9b92-5754-f9b7-048daa00cc64@geomatys.com>
References: <1516503673411-0.post@n6.nabble.com>
	<p41f2k$glb$1@blaine.gmane.org> <1516589463599-0.post@n6.nabble.com>
	<cd0cb309-9b92-5754-f9b7-048daa00cc64@geomatys.com>
Message-ID: <2E885BB293AF0448A0181138489E9A0EAEBE166E@S000014.PROD.SITAD.DK>

Just a few comments regarding early-binding EPSG definitions in PROJ.4. This is indeed a shortcoming . The good news is that we are actively working towards changing the situation. With the new version, that will be released soon(-ish), we introduce “transformation pipelines” that lays the foundation for a late-binding implementation in the future. Specifically,  the a late-binding implementation logic is destined to go into the proj_create_crs_to_crs function in the new API. The discussion about this has been spread out across several GitHub issues on both the PROJ.4 and QGIS pages. Here’s a link to one of the discussions touching on the need for the possibility to specify the area for which a given transformation is needed: https://github.com/OSGeo/proj.4/issues/559

The actual work towards a late-binding implementation will probably be started in the second half of 2018. At least if I am going to take lead on it. I have a rough idea how to do it, but haven’t got the time until after summer to actually do it.

/Kristian

Fra: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] På vegne af Martin Desruisseaux
Sendt: 22. januar 2018 10:52
Til: proj at lists.maptools.org
Emne: Re: [Proj] Correction of definition of CRS EPSG 5456 and 5457


Hello Eduardo

Le 22/01/2018 à 03:51, Eduardo Rojas Rodríguez a écrit :

By having proj LCC 1SP with a scale factor is basically the same as LCC 2SP.

Indeed, EPSG "Lambert Conic Conformal (1SP)" and "Lambert Conic Conformal (2SP)" are basically the same projection with different way to specify parameters. After those parameters have been converted to internal coefficients, both projections can be implemented by the same formulas. The same observation applies to some other projections, for example "Mercator (variant A)", "Mercator (variant B)" and "Mercator (variant C)". As a side note, the Mercator projection itself is the limit case of Lambert Conic Conformal projection when the standard parallel is at the equator, and similar relationships exists between some other projections.



the only thing then is to ask the EPSG for a transformation of EPSG :: 5470 Coordinate Transformation [Ocotepeque 1935 to WGS 84 (1) more presiding using 7 parameters. maybe?

Here we reach a known issue with the way Proj.4 stores its definitions. Proj.4 is what EPSG calls an "early-binding implementation", meaning that datum shift parameters (the "+towgs84" element) are specified together with the Coordinate Reference System (CRS) definitions (the "+lat_0", "+lat_1", "+k_0", etc. elements). In the EPSG database, map projection definitions and datum shifts information are two separated tables, for at least two reasons:

  *   Datum shifts are not necessarily between the CRS and WGS84. In some cases (e.g. in Martinique), passing through WGS84 can only introduce errors in the results.
  *   Many datum shifts may be defined between the same pair of CRS for different area of validity.
  *   (side note: with ongoing revision of ISO 19111 standard taking in account tectonic plate motions, dissociating the two tables will be yet more important).

In your case, the EPSG database gives me 3 coordinate operations from EPSG:5451 to EPSG:4326 (in addition of two operations to NAD27 and to CR05; this illustrates what I said before, that datum shift operations are not necessarily toward WGS84). Among them:

  *   EPSG:6891 (looks similar but not identical to what you reported the Proj.4 does), the domain of validity is "Costa Rica; El Salvador; Guatemala; Honduras; Nicaragua" and the reported accuracy is 14 metres.
  *   EPSG:5470, the domain of validity is "Costa Rica - onshore" and the reported accuracy is 8 metres.

So the datum shifts to choose depends of the desired compromise between accuracy and domain of validity. I think that by default, parameters in Proj.4 CSV files were selected for the datum shift operation which is valid over the widest area. An improvement over that would be to change Proj.4 design from "early-binding implementation" to "late-binding implementation", when datum shifts operation are fetched from a separated table once Proj.4 know the source and target CRS, the desired domain of validity and the epoch. They were some discussion one or two years ago about replacing the Proj.4 CSV file by a full EPSG database on SQLite, in order to prepare Proj.4 for such evolution.

    Martin


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20180122/765297f1/attachment.html>

From andre+joost at nurfuerspam.de  Mon Jan 22 04:42:15 2018
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Mon, 22 Jan 2018 13:42:15 +0100
Subject: [Proj] Correction of definition of CRS EPSG 5456 and 5457
In-Reply-To: <1516589463599-0.post@n6.nabble.com>
References: <1516503673411-0.post@n6.nabble.com>	<p41f2k$glb$1@blaine.gmane.org>
	<1516589463599-0.post@n6.nabble.com>
Message-ID: <p44m80$l4h$1@blaine.gmane.org>

Hi Eduardo,

you can simply run a couple of tests using cs2cs.

Put "-85 11" in a file named CRN.txt, and the following in a batch file:

echo epsg4326-epsg5456 >out.txt
cs2cs +init=epsg:4326 +to +init=epsg:5456  -f "%%.3f" CRN.txt >>out.txt

echo 5456-5470 >>out.txt
cs2cs +init=epsg:4326  +to +proj=lcc +lat_1=10.46666666666667 
+lat_0=10.46666666666667 +lon_0=-84.33333333333333 +k_0=0.99995696 
+x_0=500000 +y_0=271820.522 +ellps=clrk66 
+towgs84=213.11,9.37,-74.95,0,0,0,0 +units=m +no_defs  +units=m +no_defs 
-f "%%.3f" CRN.txt >>out.txt

echo 5456-5473 (deprecated) >>out.txt
cs2cs +init=epsg:4326  +to +proj=lcc +lat_1=10.46666666666667 
+lat_0=10.46666666666667 +lon_0=-84.33333333333333 +k_0=0.99995696 
+x_0=500000 +y_0=271820.522 +ellps=clrk66 
+towgs84=213.116,9.358,-74.946,1.14e-05,-2.98e-07,3.1e-05,-5.22 +units=m 
+no_defs -f "%%.3f" CRN.txt >>out.txt

echo 5456-5474 (deprecated) >>out.txt
cs2cs +init=epsg:4326  +to +proj=lcc +lat_1=10.46666666666667 
+lat_0=10.46666666666667 +lon_0=-84.33333333333333 +k_0=0.99995696 
+x_0=500000 +y_0=271820.522 +ellps=clrk66 
+towgs84=205.435,-29.099,292.202,0,0,0,0 +units=m +no_defs  -f "%%.3f" 
CRN.txt >>out.txt

echo 5456-6889 >>out.txt
cs2cs +init=epsg:4326  +to +proj=lcc +lat_1=10.46666666666667 
+lat_0=10.46666666666667 +lon_0=-84.33333333333333 +k_0=0.99995696 
+x_0=500000 +y_0=271820.522 +ellps=clrk66 
+towgs84=213.11,9.37,-74.95,0,0,0,0 +units=m +no_defs  -f "%%.3f" 
CRN.txt >>out.txt

echo 5456-6891 >>out.txt
cs2cs +init=epsg:4326  +to +proj=lcc +lat_1=10.46666666666667 
+lat_0=10.46666666666667 +lon_0=-84.33333333333333 +k_0=0.99995696 
+x_0=500000 +y_0=271820.522 +ellps=clrk66 +towgs84=205,96,-98,0,0,0,0 
+units=m +no_defs  -f "%%.3f" CRN.txt >>out.txt

echo 5456(lcc from Rodriguez via proj.4-ML) >>out.txt
cs2cs +init=epsg:4326  +to +proj=lcc +lat_0=10.46666666666667 
+lat_1=9.933333333 +lat_2=11 +lon_0=-84.3333333333 +k_0=0.99995696 
+x_0=500000 +y_0=271820.522 +ellps=clrk66 +towgs84=205,96,-98,0,0,0,0 
+units=m +no_defs -f "%%.3f" CRN.txt >>out.txt

echo 5456(lcc+towgs84 from Rodriguez via proj.4-ML) >>out.txt
cs2cs +init=epsg:4326  +to +proj=lcc +lat_0=10.46666666666667 
+lat_1=9.933333333 +lat_2=11 +lon_0=-84.3333333333 +k_0=0.99995696 
+x_0=500000 +y_0=271820.522 +ellps=clrk66 
+towgs84=213.116,9.358,-74.946,1.140,-2.980,3.100,-5.22 +units=m 
+no_defs -f "%%.3f" CRN.txt >>out.txt


The results are:

epsg4326-epsg5456
426928.564	331056.442 34.278
5456-5470
426928.019	331050.421 -55.529
5456-5473 (deprecated)
426928.014	331050.378 -22.252
5456-5474 (deprecated)
426938.268	330697.171 -162.546
5456-6889
426928.019	331050.421 -55.529
5456-6891
426928.564	331056.442 34.278
5456(lcc from Rodriguez via proj.4-ML)
426931.711	331053.893 34.278
5456(lcc+towgs84 from Rodriguez via proj.4-ML)
426855.097	331075.075 -22.217

I have no clue what values are "correct", since I have not found any 
sample coordinates in both systems.

My best resource available online is

https://dialnet.unirioja.es/descarga/articulo/5381246.pdf
http://www.revistas.una.ac.cr/index.php/uniciencia/article/download/5930/5822

from Dörries and Rodriguez (obviously not you).

Another online resource is http://epsg.io/5456 , which contains also 
transformations 5473 and 5474 that are deprecated by EPSG. I added them 
to my test.

Note that transformation 6889 from the EPSG registry uses a 10-parameter 
transformation (7parms on a point on the Earth's surface with 3 
coordinates), which can not be used inside PROJ.4. so you really have 
the choice between 5470 and 6891. EPSG.io seems to fall back to the 
transformation 5470.

The paramaters in your first posting seem to be an adaptation of the 
10-parms, omitting the anchor point and the exponents.

Even the lcc1 vs lcc2 yields different results, but I have not looked 
into that.

HTH,
Andre Joost

Am 22.01.18 um 03:51 schrieb Eduardo Rojas Rodríguez:
> Hi Andre
>
> sorry for bothering you again
>
> I have read extensively all the information you have given me and I have
> come to the following conclusions:
>
> 1. according to
> https://gis.stackexchange.com/questions/253475/results-of-layers-created-with-a-custom-crs-are-loaded-with-a-generated-crs-in-q/254087#254087
> and
> http://geotiff.maptools.org/proj_list/lambert_conic_conformal_2sp.html
>
> By having proj LCC 1SP with a scale factor is basically the same as LCC 2SP.
> so the definition within PROJ4
> + proj = lcc + lat_1 = 10.46666666666667 + lat_0 = 10.46666666666667 + lon_0
> = -84.33333333333333 + k_0 = 0.99995696 + x_0 = 500000 + y_0 = 271820.522 +
> ellps = clrk66 + towgs84 = 205.96, -98.0.0.0.0 + units = m + no_defs
>
> is correct since it determines lat_1 equal to lat_0
>
> is this correct?
>
> 1. Regarding the "toWGS84" + towgs84 = 205.96, -98.0,0.0.0
> is a concatenation (via NAD27) of the transformations 6888 and 1171 imported
> from GDAL when using this transformation I get a displacement of 2mm
>
> 3. + towgs84 = 213.116,9.358, -74.946 are within the transformation EPSG ::
> 5470 Coordinate Transformation [Ocotepeque 1935 to WGS 84 (1)] which is more
> general and I get displacements of 8 meters
>
> As far as I can deduce, the definition is adequate both when using LCC1
> which is equal to LCC2 with the scale factor.
>
> the only thing then is to ask the EPSG for a transformation of EPSG :: 5470
> Coordinate Transformation [Ocotepeque 1935 to WGS 84 (1) more presiding
> using 7 parameters. maybe?
>
>
> I would like to know what you think of my conclusions, so I can tell you how
> much I have learned from PROJ4 and EPSG.
>
> Thank you very much for all the help and everything I've learned
>
>
>
> -----
> Eduardo Rojas Rodríguez
> Analista en SIG
> Soluciones en Tecnologías
> Tel: 506 2505-5453
> eduardo.rojas at soltig.net
> http://soltig.net
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/PROJ-4-f3840930.html
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>




From andre+joost at nurfuerspam.de  Mon Jan 22 08:20:19 2018
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Mon, 22 Jan 2018 17:20:19 +0100
Subject: [Proj] Correction of definition of CRS EPSG 5456 and 5457
In-Reply-To: <p44m80$l4h$1@blaine.gmane.org>
References: <1516503673411-0.post@n6.nabble.com>	<p41f2k$glb$1@blaine.gmane.org>	<1516589463599-0.post@n6.nabble.com>
	<p44m80$l4h$1@blaine.gmane.org>
Message-ID: <p4531o$o56$1@blaine.gmane.org>

Am 22.01.18 um 13:42 schrieb Andre Joost:
> Hi Eduardo,

>
> Even the lcc1 vs lcc2 yields different results, but I have not looked
> into that.
>

Got that now:

echo 5456(lcc-1SP) >>out.txt
cs2cs +init=epsg:4326  +to +proj=lcc +lat_1=10.46666666666667 
+lon_0=-84.3333333333 +k_0=0.99995696 +x_0=500000 +y_0=271820.522 
+ellps=clrk66 +towgs84=205,96,-98,0,0,0,0 +units=m +no_defs -f "%%.3f" 
CRN.txt >>out.txt

echo 5456(lcc-2SP) >>out.txt
cs2cs +init=epsg:4326  +to +proj=lcc +lat_0=10.46666666666667 
+lat_1=9.933333333 +lat_2=11 +lon_0=-84.3333333333 +x_0=500000 
+y_0=271820.522 +ellps=clrk66 +towgs84=205,96,-98,0,0,0,0 +units=m 
+no_defs -f "%%.3f" CRN.txt >>out.txt

returns:

5456(lcc-1SP)
426928.564	331056.442 34.278
5456(lcc-2SP)
426928.566	331056.443 34.278

Note that +lat_1 has a different meaning in 1SP vs 2SP, and the absence 
of +k_0 forces the lcc-2SP projection.

HTH,
Andre Joost




From andre+joost at nurfuerspam.de  Wed Jan 24 01:30:47 2018
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Wed, 24 Jan 2018 10:30:47 +0100
Subject: [Proj] Correction of definition of CRS EPSG 5456 and 5457
In-Reply-To: <p44m80$l4h$1@blaine.gmane.org>
References: <1516503673411-0.post@n6.nabble.com>	<p41f2k$glb$1@blaine.gmane.org>	<1516589463599-0.post@n6.nabble.com>
	<p44m80$l4h$1@blaine.gmane.org>
Message-ID: <p49jo7$ov3$1@blaine.gmane.org>

Am 22.01.18 um 13:42 schrieb Andre Joost:

>
> I have no clue what values are "correct", since I have not found any
> sample coordinates in both systems.
>
> My best resource available online is
>
> https://dialnet.unirioja.es/descarga/articulo/5381246.pdf
> http://www.revistas.una.ac.cr/index.php/uniciencia/article/download/5930/5822
>
> from Dörries and Rodriguez.
>

Update on that:

The paper includes a set of coordinates for 28 points within Costa Rica. 
The coordinates seem to be geocentric X,Y,Z meters based on Ocotepeque 
on the left and WGS84 on the right.

You can calculate the differences, and get mean values of:
deltX = 213.27 m
deltY = 7.72 m
deltZ = -74.65 m

That is less than 2 meters away from the center point given in 
EPSG:5470. The standard deviation is 5 meters.

You can reproject those coordinates to Costa Rica Norte with:

cs2cs +proj=geocent +ellps=clrk66 +towgs84=213.11,9.37,-74.95,0,0,0,0 
+units=m +no_defs  +to +proj=lcc +lat_1=10.46666666666667 
+lat_0=10.46666666666667 +lon_0=-84.33333333333333 +k_0=0.99995696 
+x_0=500000 +y_0=271820.522 +ellps=clrk66 
+towgs84=213.11,9.37,-74.95,0,0,0,0 +units=m +no_defs  -f "%%.3f" 
coordgeocent-ocotepeque.csv >CRN-ocotepeque.txt

cs2cs +proj=geocent +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m 
+no_defs  +to +proj=lcc +lat_1=10.46666666666667 
+lat_0=10.46666666666667 +lon_0=-84.33333333333333 +k_0=0.99995696 
+x_0=500000 +y_0=271820.522 +ellps=clrk66 
+towgs84=213.11,9.37,-74.95,0,0,0,0 +units=m +no_defs  -f "%%.3f" 
coordgeocent-wgs84.csv >CRN-wgs84.txt

Again, you can calculate the difference, and get a mean diff value of 
less than 7 centimeters, with a standard deviation of 3 meters. One 
point is 11 meters off, and another 7 meters.

The official parameters may have been calculated with more points, but 
you still have to face the fact that last centuries surveying has not 
been more accurate.

Using the standard datum shift of PROJ.4, I get a resulting shift of 7.5 
meters, with standard deviation of less than 4 meters. So it is not that 
bad.

I also tried the deprecated 7parms transformation values, resulting in a 
mean diff of 9 centimeters and 3 meters standard deviation. This is not 
a significant improvement against the 3-parms of EPSG:5470.

HTH,
Andre Joost




From eduardo.rojas at soltig.net  Sat Jan 27 16:30:33 2018
From: eduardo.rojas at soltig.net (=?UTF-8?Q?Eduardo_Rojas_Rodr=C3=ADguez?=)
Date: Sat, 27 Jan 2018 17:30:33 -0700 (MST)
Subject: [Proj] Correction of definition of CRS EPSG 5456 and 5457
In-Reply-To: <p49jo7$ov3$1@blaine.gmane.org>
References: <1516503673411-0.post@n6.nabble.com>
	<p41f2k$glb$1@blaine.gmane.org>
	<1516589463599-0.post@n6.nabble.com>
	<p44m80$l4h$1@blaine.gmane.org> <p49jo7$ov3$1@blaine.gmane.org>
Message-ID: <1517099433457-0.post@n6.nabble.com>

special thanks for you Andre 
and thanks you all for all the information and learning that I had


It seems that these are the parameters that are found in the deprecated
7parms transformation I think EPSG 5473
-213.116
-9.358
74.946
2.3514188
-0.0614669
6.394209
5.22

and these their anchor points to get the 10 parameters 
617749.7118
-6250547.7336
1102063.6099

Apparently this is the transformation that ESRI uses within Arcgis in which
they get an accuracy below 1 meter 

So for me it's a bit strange that this is deprecated and get "better"
accuracy ??? 

I also made the tests and with the EPSG 5470 transformation  and I get
similars results fron 2 to 8 meters
 
213.27 m 
7.72 m 
-74.65 m 

the EPSG 5470 is the current default transformation within the EPSG for
Lambert Costa Rica Norte, but when QGIS is used within the definition of
PROJ4 for 5456 the + toWGS84 points out the parameters: 205, 96, -98 which
are derived from the concatencation of the transformations 6888 to 1171.

I have to configure QGIS to allow me to choose which transformation to use,
however I do not think it works for the "Reproject layer" tool in
processing. And in the -toWGS84 remains the 205, 96, -98 parameters. why is
not the 5470 parameters chosen by default and and written in the prj and
pqj?


Kristian
Im looking forward the “transformation pipelines” it sounds like the
solution to these problems.

For all, I must say that thanks to your help I am in the process of making
contact and meet with the IGN (National Geographic Institute of Costa Rica)
to start the process of defining a better transformation to send it to the
EPSG data base and thus arrive at PROJ4 because not only QGIS uses PROJ4 but
also other free programs such as Postgis that are crucial for the
development of the country.

PS: I have read that it is possible to shorten a definition of 10 parameters
in 7 according to
http://lists.maptools.org/pipermail/proj/2010-October/005441.html
I will try and see what results I get





-----
Eduardo Rojas Rodríguez
Analista en SIG
Soluciones en Tecnologías
Tel: 506 2505-5453
eduardo.rojas at soltig.net
http://soltig.net


--
Sent from: http://osgeo-org.1560.x6.nabble.com/PROJ-4-f3840930.html


From andre+joost at nurfuerspam.de  Sun Jan 28 00:25:27 2018
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Sun, 28 Jan 2018 09:25:27 +0100
Subject: [Proj] Correction of definition of CRS EPSG 5456 and 5457
In-Reply-To: <1517099433457-0.post@n6.nabble.com>
References: <1516503673411-0.post@n6.nabble.com>	<p41f2k$glb$1@blaine.gmane.org>	<1516589463599-0.post@n6.nabble.com>	<p44m80$l4h$1@blaine.gmane.org>
	<p49jo7$ov3$1@blaine.gmane.org>
	<1517099433457-0.post@n6.nabble.com>
Message-ID: <p4k1db$cb3$1@blaine.gmane.org>

Am 28.01.18 um 01:30 schrieb Eduardo Rojas Rodríguez:

> So for me it's a bit strange that this is deprecated and get "better"
> accuracy ???
>

The deprecated transformation 5473 was 7parms without the anchor point. 
This was the reason for the follow-up transformation code 6889 that uses 
Molodensky-Badekas 10parms correctly (but not usable inside PROJ.4).

PROJ.4 first looks at the datum name Ocotepeque 1935 and uses the 
transformation with the largest area of validity. And that is 
transformation 6891 for five countries.

Greetings,
Andre Joost



From jicrbuh1 at gmail.com  Tue Jan 30 03:42:24 2018
From: jicrbuh1 at gmail.com (Chen Barnoy)
Date: Tue, 30 Jan 2018 13:42:24 +0200
Subject: [Proj] Converting between true north, grid north, and magnetic north
Message-ID: <CAKF-jtJyCYxnyaNJR3qXbMOq2xUpYMbOMrXrpkfUv4Ogaadp6w@mail.gmail.com>

Hi,

Is there a way to convert between grid north, true north and magnetic north
in Proj4 or another library?

Cheers,
Chen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20180130/15367d03/attachment.html>

From knudsen.thomas at gmail.com  Tue Jan 30 04:37:45 2018
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Tue, 30 Jan 2018 13:37:45 +0100
Subject: [Proj] Converting between true north, grid north,
	and magnetic north
In-Reply-To: <CAKF-jtJyCYxnyaNJR3qXbMOq2xUpYMbOMrXrpkfUv4Ogaadp6w@mail.gmail.com>
References: <CAKF-jtJyCYxnyaNJR3qXbMOq2xUpYMbOMrXrpkfUv4Ogaadp6w@mail.gmail.com>
Message-ID: <CAH0YoEPzFMaz+qAXr1EvMSguvWwMnh8tEFsNRkaFbPd-ghj=Dg@mail.gmail.com>

The magnetic north varies from location to location is not easy to handle,
but you can get deviation from grid north using the -V option to proj:

$  echo 12 55 | proj -V +proj=utm +zone=32 +ellps=GRS80

#Universal Transverse Mercator (UTM)
#    Cyl, Sph
#    zone= south
# +proj=utm +zone=32 +ellps=GRS80
#--- following specified but NOT used
# +ellps=WGS84
#Final Earth figure: ellipsoid
#  Major axis (a): 6378137.000
#  1/flattening: 298.257222
#  squared eccentricity: 0.006694380023

Longitude: 12dE [ 12 ]
Latitude:  55dN [ 55 ]
Easting (x):   691875.63
Northing (y):  6098907.83
Meridian scale (h) : 1.00005168  ( 0.005168 % error )
Parallel scale (k) : 1.00005168  ( 0.005168 % error )
Areal scale (s):     1.00010336  ( 0.01034 % error )
Angular distortion (w): 0.000
Meridian/Parallel angle: 90.00000
Convergence : 2d27'29.52" [ 2.45819987 ]
Max-min (Tissot axis a-b) scale error: 1.00005 1.00005

Where the convergence (here 2.45819987) is what you need, if I understand
your question correctly.

See the reply by Martin F over at
https://gis.stackexchange.com/questions/61743/applying-proper-conversion-from-true-to-grid-bearing
for instructions of how to apply this.



2018-01-30 12:42 GMT+01:00 Chen Barnoy <jicrbuh1 at gmail.com>:

> Hi,
>
> Is there a way to convert between grid north, true north and magnetic
> north in Proj4 or another library?
>
> Cheers,
> Chen
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20180130/ff658ca6/attachment.html>

From cjmce at lsu.edu  Tue Jan 30 05:06:07 2018
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 30 Jan 2018 13:06:07 +0000
Subject: [Proj] Converting between true north, grid north,
 and magnetic north
In-Reply-To: <CAH0YoEPzFMaz+qAXr1EvMSguvWwMnh8tEFsNRkaFbPd-ghj=Dg@mail.gmail.com>
References: <CAKF-jtJyCYxnyaNJR3qXbMOq2xUpYMbOMrXrpkfUv4Ogaadp6w@mail.gmail.com>,
	<CAH0YoEPzFMaz+qAXr1EvMSguvWwMnh8tEFsNRkaFbPd-ghj=Dg@mail.gmail.com>
Message-ID: <D491D492-6787-40DA-AF42-62D5A54AB521@lsu.edu>

The Geodesy & Geophysics web page at the NGA.mil site has the Isogonic (magnetism) model that can be downloaded.

Sent from Cliff Mugnier's iPhone

On Jan 30, 2018, at 6:37 AM, Thomas Knudsen <knudsen.thomas at gmail.com<mailto:knudsen.thomas at gmail.com>> wrote:

The magnetic north varies from location to location is not easy to handle, but you can get deviation from grid north using the -V option to proj:

$  echo 12 55 | proj -V +proj=utm +zone=32 +ellps=GRS80

#Universal Transverse Mercator (UTM)
#    Cyl, Sph
#    zone= south
# +proj=utm +zone=32 +ellps=GRS80
#--- following specified but NOT used
# +ellps=WGS84
#Final Earth figure: ellipsoid
#  Major axis (a): 6378137.000
#  1/flattening: 298.257222
#  squared eccentricity: 0.006694380023

Longitude: 12dE [ 12 ]
Latitude:  55dN [ 55 ]
Easting (x):   691875.63
Northing (y):  6098907.83
Meridian scale (h) : 1.00005168  ( 0.005168 % error )
Parallel scale (k) : 1.00005168  ( 0.005168 % error )
Areal scale (s):     1.00010336  ( 0.01034 % error )
Angular distortion (w): 0.000
Meridian/Parallel angle: 90.00000
Convergence : 2d27'29.52" [ 2.45819987 ]
Max-min (Tissot axis a-b) scale error: 1.00005 1.00005

Where the convergence (here 2.45819987) is what you need, if I understand your question correctly.

See the reply by Martin F over at https://gis.stackexchange.com/questions/61743/applying-proper-conversion-from-true-to-grid-bearing for instructions of how to apply this.



2018-01-30 12:42 GMT+01:00 Chen Barnoy <jicrbuh1 at gmail.com<mailto:jicrbuh1 at gmail.com>>:
Hi,

Is there a way to convert between grid north, true north and magnetic north in Proj4 or another library?

Cheers,
Chen

_______________________________________________
Proj mailing list
Proj at lists.maptools.org<mailto:Proj at lists.maptools.org>
http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org<mailto:Proj at lists.maptools.org>
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20180130/5c2df8fa/attachment.html>

From charles.karney at sri.com  Tue Jan 30 07:03:15 2018
From: charles.karney at sri.com (Charles Karney)
Date: Tue, 30 Jan 2018 10:03:15 -0500
Subject: [Proj] Converting between true north, grid north,
 and magnetic north
In-Reply-To: <CAKF-jtJyCYxnyaNJR3qXbMOq2xUpYMbOMrXrpkfUv4Ogaadp6w@mail.gmail.com>
References: <CAKF-jtJyCYxnyaNJR3qXbMOq2xUpYMbOMrXrpkfUv4Ogaadp6w@mail.gmail.com>
Message-ID: <de5ccb7c-30ee-4e49-2e54-37a6d395003f@sri.com>

GeographicLib https://geographiclib.sourceforge.io provides access to
several magnetic models via the MagneticField utility.  E.g.,

   echo 42.363 -71.006 | MagneticField -t now

=>

   -14.67 67.08 20228.0 19569.1 -5121.1 47840.0 51940.7

The first number is the current magnetic declination at Boston Logan
Airport using the wmm2015 magnetic model.

The magnetic models need to be downloaded separately from the
GeographicLib library using

   geographiclib-get-magnetic

On 01/30/18 06:42, Chen Barnoy wrote:
> Hi,
> 
> Is there a way to convert between grid north, true north and magnetic 
> north in Proj4 or another library?
> 
> Cheers,
> Chen
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 


From schwehr at gmail.com  Tue Jan 30 13:59:53 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 30 Jan 2018 13:59:53 -0800
Subject: [Proj] Converting between true north, grid north,
	and magnetic north
In-Reply-To: <de5ccb7c-30ee-4e49-2e54-37a6d395003f@sri.com>
References: <CAKF-jtJyCYxnyaNJR3qXbMOq2xUpYMbOMrXrpkfUv4Ogaadp6w@mail.gmail.com>
	<de5ccb7c-30ee-4e49-2e54-37a6d395003f@sri.com>
Message-ID: <CACmBxyv0LMeR2+FdS2SLo5DsfaDZzqbBHY6t8GxWojSzHzdE+g@mail.gmail.com>

Be aware that the magnetic field is time varying.  It can change pretty
quickly near the magnetic poles.

Yet another source... igrf.py

https://earthref.org/PmagPy/cookbook/#x1-1190005.2.54

On Tue, Jan 30, 2018 at 7:03 AM, Charles Karney <charles.karney at sri.com>
wrote:

> GeographicLib https://geographiclib.sourceforge.io provides access to
> several magnetic models via the MagneticField utility.  E.g.,
>
>    echo 42.363 -71.006 | MagneticField -t now
>
> =>
>
>    -14.67 67.08 20228.0 19569.1 -5121.1 47840.0 51940.7
>
> The first number is the current magnetic declination at Boston Logan
> Airport using the wmm2015 magnetic model.
>
> The magnetic models need to be downloaded separately from the
> GeographicLib library using
>
>    geographiclib-get-magnetic
>
> On 01/30/18 06:42, Chen Barnoy wrote:
> > Hi,
> >
> > Is there a way to convert between grid north, true north and magnetic
> > north in Proj4 or another library?
> >
> > Cheers,
> > Chen
> >
> >
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
> >
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20180130/1b6382d7/attachment.html>

From chris.marsh at usask.ca  Tue Jan 30 15:02:58 2018
From: chris.marsh at usask.ca (Chris Marsh)
Date: Tue, 30 Jan 2018 17:02:58 -0600
Subject: [Proj] Failed to initialize PROJ.4 with "..."
In-Reply-To: <CAFgDerG4XHqGjUfA+RZRqfbpL7i1Ub1=sfJVH8r9jLxOcYUVwg@mail.gmail.com>
References: <CAFgDerH4-JQAEhMbPVBRW-DYi9StwpT03-6Vsj3+C6W_CNi=Pw@mail.gmail.com>
	<1536764.rF7YZLUOZH@even-i700>
	<CAFgDerG4XHqGjUfA+RZRqfbpL7i1Ub1=sfJVH8r9jLxOcYUVwg@mail.gmail.com>
Message-ID: <CAFgDerHjA3vvtmpw+HdxKeYqNsLudN+8+A7w14VL5cgq4DCPbg@mail.gmail.com>

To close the loop on this, it was a name conflict with the proj4 that is in
VTK
Details here:
http://vtk.1045678.n5.nabble.com/Don-t-build-vtkproj4-tp5746073p5746269.html

Thanks everyone for their help
Cheers
Chris


On 13 October 2017 at 17:35, Chris Marsh <chris.marsh at usask.ca> wrote:

> I did not build with that option, however I have my build libproj.so in my
> LD_LIBRARY_PATH
>
> Chris Marsh
> PhD Candidate
> chrismarsh.ca
>
> 121 Research Drive
> University of Saskatchewan
>
> On 13 October 2017 at 16:32, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> On vendredi 13 octobre 2017 15:56:09 CEST Chris Marsh wrote:
>> > Hi,
>> >
>> > I'm using GDAL (and by extension proj.4) to reproject a set of WGS84
>> > coordinates to North America Albers Conic Conformal.
>> >
>> > I originally posted this to the GDAL list, however it seems like this
>> may
>> > be entirely a Proj.4 problem.
>>
>>
>> >
>> > On all but 1 computer I run my code on, this works as expected. However,
>> > when trying to run on one of Compute Canada's newest machines, I get the
>> > error
>>
>> How did you build GDAL  on that machine, --with-static-proj4 ?
>> If not, the issue is probably that you have libproj.so.XXXX installed,
>> but not
>> libproj.so
>>
>> Even
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20180130/cba53c40/attachment.html>

From jmfluis at gmail.com  Wed Jan 31 03:50:17 2018
From: jmfluis at gmail.com (J Luis)
Date: Wed, 31 Jan 2018 11:50:17 +0000
Subject: [Proj] Converting between true north, grid north,
	and magnetic north
In-Reply-To: <CACmBxyv0LMeR2+FdS2SLo5DsfaDZzqbBHY6t8GxWojSzHzdE+g@mail.gmail.com>
References: <CAKF-jtJyCYxnyaNJR3qXbMOq2xUpYMbOMrXrpkfUv4Ogaadp6w@mail.gmail.com>
	<de5ccb7c-30ee-4e49-2e54-37a6d395003f@sri.com>
	<CACmBxyv0LMeR2+FdS2SLo5DsfaDZzqbBHY6t8GxWojSzHzdE+g@mail.gmail.com>
Message-ID: <CAE_VgzN+GHPis7nJrGptFBudB2aEJof+ssmqfv=btuqZ4C_cmA@mail.gmail.com>

Or GMT that even provides an estimate of daily variation.

https://gmt.soest.hawaii.edu/doc/5.4.3/supplements/mgd77/mgd77magref.html

On Tue, Jan 30, 2018 at 9:59 PM, Kurt Schwehr <schwehr at gmail.com> wrote:

> Be aware that the magnetic field is time varying.  It can change pretty
> quickly near the magnetic poles.
>
> Yet another source... igrf.py
>
> https://earthref.org/PmagPy/cookbook/#x1-1190005.2.54
>
> On Tue, Jan 30, 2018 at 7:03 AM, Charles Karney <charles.karney at sri.com>
> wrote:
>
>> GeographicLib https://geographiclib.sourceforge.io provides access to
>> several magnetic models via the MagneticField utility.  E.g.,
>>
>>    echo 42.363 -71.006 | MagneticField -t now
>>
>> =>
>>
>>    -14.67 67.08 20228.0 19569.1 -5121.1 47840.0 51940.7
>>
>> The first number is the current magnetic declination at Boston Logan
>> Airport using the wmm2015 magnetic model.
>>
>> The magnetic models need to be downloaded separately from the
>> GeographicLib library using
>>
>>    geographiclib-get-magnetic
>>
>> On 01/30/18 06:42, Chen Barnoy wrote:
>> > Hi,
>> >
>> > Is there a way to convert between grid north, true north and magnetic
>> > north in Proj4 or another library?
>> >
>> > Cheers,
>> > Chen
>> >
>> >
>> > _______________________________________________
>> > Proj mailing list
>> > Proj at lists.maptools.org
>> > http://lists.maptools.org/mailman/listinfo/proj
>> >
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>>
>
>
>
> --
> --
> http://schwehr.org
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20180131/4f0ab200/attachment.html>

