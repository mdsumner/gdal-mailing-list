From gerald.evenden at verizon.net  Tue Jul  4 18:52:02 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Tue, 04 Jul 2006 21:52:02 -0400
Subject: [Proj] Re: Dozier's TM method---my summary
In-Reply-To: <328.6931b99.31d58450@aol.com>
References: <328.6931b99.31d58450@aol.com>
Message-ID: <200607042152.02925.gerald.evenden@verizon.net>

On Thursday 29 June 2006 3:30 pm, Strebe at aol.com wrote:
	...
> > Note that the cusp (poorly displayed in the previously mention gif url)
> > appears to be the beginning of the multiple root solution.  I say poorly
> > displayed as the gradation of the equitorial parallel should *smoothly*
> > begin
> > a swing to the north OR (importantly) to the south. 
>
> The cusp is poorly observed, not poorly displayed. The illustration is
> exact to sub-pixel resolution and it matches Lee's illustration precisely
> despite using a different method of calculation. It seems you do not know a
> continuously differentiable curve when you see one.

My goodness, such a cranky old man!  

I know you don't like me but I have tried to be civil.  Can we bury the 
hatchet sometime.  I am getting too old for this bullshit.

-- 
Jerry and the low-riders: Daisy Mae and Joshua
"Cogito cogito ergo cogito sum"
   Ambrose Bierce, The Devil's Dictionary



From gerald.evenden at verizon.net  Tue Jul  4 19:14:29 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Tue, 04 Jul 2006 22:14:29 -0400
Subject: [Proj] New ellipsoid
In-Reply-To: <loom.20060630T212949-698@post.gmane.org>
References: <loom.20060630T212949-698@post.gmane.org>
Message-ID: <200607042214.29565.gerald.evenden@verizon.net>

With any level of the proj4 software you can change the ellipsoid to any value 
you wish within "reasonable" limits.  Major axis is not a problem in any case 
as internally the projections are evaluated for a "unit ellipsoid" and the 
results multiplied by the real major axis.  A problem may occur if the 
eccentricity increases significantly over the range of the earth's value 
because many calculations are approximations that assume a value of e^2 in 
the range of 0.006.  I would suspect that for e^2 < 0.01 would work but I 
would be careful beyond that range.  Smaller e should never be a problem.

Note: in most cases the computational factor involving eccentricity is in the 
form of e^2 or e (eccentricity) so that is what I must referred to here.  To 
phrase the range in terms of flattening, minor axis, etc. you will need to do 
a little math with the equations given in the documentation relating them to 
eccentricity.

On Friday 30 June 2006 3:33 pm, Fabrizio Bernardini wrote:
> I am new in this list and I do not know if this topic has been discussed
> yet. I tried to search for it but got no useful results.
>
> My question is:
> How can I change ellipsoid and specify a completely
> new one, for instance for a planet which is NOT Earth.
> Will the projection library still work in this case?
>
> Did anybody ever discussed this issue?
> Is there a reference to that anywhere?
>
> Thanks,
>
> Fabrizio
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

-- 
Jerry and the low-riders: Daisy Mae and Joshua
"Cogito cogito ergo cogito sum"
   Ambrose Bierce, The Devil's Dictionary


From AnthonyD at rocketmail.com  Tue Jul  4 19:42:54 2006
From: AnthonyD at rocketmail.com (Anthony Dunk)
Date: Tue, 4 Jul 2006 19:42:54 -0700 (PDT)
Subject: [Proj] Command line conversion problem
In-Reply-To: <003701c69c61$906d49c0$0501a8c0@toshiba>
Message-ID: <20060705024254.34251.qmail@web50806.mail.yahoo.com>

Mike,

The EPSG code 26711 is for UTM Zone 11 NAD 27. By the looks of your
input coordinates you should have used EPSG code 4267 (Lat/Lon NAD 27)
instead.

The other thing to look out for is that you're giving the coordinates
to cs2cs in the correct order. Usually cs2cs requires longitude
followed by latitude as the input order.

Anthony.

--- Mike D'Ambrogia <miked at jamagination.com> wrote:

> Trying to convert NAD27 DD.DDDDD to WGS84 UTM
> 
> I use:
> 
> cs2cs +init=epsg:26711 +to +init=epsg:32611 
> 
> Trying to convert 38.1703 -119.7385 and all I can get out is "*      
> *
> 0.00", I should get 260102E 4228255N
> 
> I'm goofing something up, hoping it's simple and someone can quickly
> point me in the right direction
> 
> Thanks in advance
> 
> Mike
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 




__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 


From gerald.evenden at verizon.net  Tue Jul  4 20:10:38 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Tue, 04 Jul 2006 23:10:38 -0400
Subject: [Proj] Re: Dozier's TM method---my summary
In-Reply-To: <328.6931b99.31d58450@aol.com>
References: <328.6931b99.31d58450@aol.com>
Message-ID: <200607042310.38746.gerald.evenden@verizon.net>

On Thursday 29 June 2006 3:30 pm, Strebe at aol.com wrote:
> In a message dated 6/29/06 08:45:00, gerald.evenden at verizon.net writes:
> (Full text of message at end.)
>
> > ...is the Newton-Raphson method employed.  He has expanded the
> > basic real function and applied it to a complex variable.  I am not sure
> > that
> > this is appropriate...
>
> I haven't looked at Dozier in depth, but in general there is nothing less
> appropriate about Newton-Raphson when applied to complex variables than
> there is when applied to real-valued variables. It's quite easy to get
> yourself into trouble when finding roots even of real-valued functions.
> While the function in question has problematic regions, that has nothing to
> do with the fact that it is complex-valued.

Isn't that what I just said???  At this point I am picking on Dozier, not you 
nor anyone else.

> > plane.  Also, it looks like we are also dealing with multiple roots,
> > especially when longitude exceeds a certain value   (suggested to be
> > (pi/2)*(1-k))---a factor not addressed in Dozier's solution
>
> I do not understand why you think the fact of multiple roots supports your
> notion of the intractability of the solution.

Where did I say the solution did not exist nor the plot was not basically 
correct---just poorly done.

	... material previously commented on

> You have remarked previously that the projection is "not intuitive". To
> you, of course. Not necessarily to the reading audience. You didn't like

Let us stop for a moment on this "intuitive issue."  Plain old Mercator goes 
to infinity in the NS directions for both the sphere and elliptical case.  
When we flip the cylinder over on its side the projection goes to infinity in 
the east-west direction (as one might logically expect) for the spherical 
case.  SO, is it not intuitive that that the elliptical case would behave in 
a similar manner?  That is all I am saying.  I am perfectly willing to accept 
that for some weird magic of complex analysis that it defies intuition and is 
finite in all directions.  I have accepted this finiteness on faith for 
several years, but being a good atheist, I must allways view it with 
skepticism until it is appropriately demonstrated.

> the cusp; you thought it indicated the projection wasn't really conformal.
> Once the cusp was demonstrated (by means of a 30-year old peer-reviewed
> journal article) to be an attribute of the projection, you decided you

I had the impression you got the plot from Wallis.  Was he peer reviewed?  If 
so, what was the 30 year old publication.

> didn't like how it looked in an image I supplied, even though that image
> precisely matches the one on the peer-reviewed article. It is curious that
> you believe it appropriate to cast public aspersion based on your own,
> flawed notions rather than objective facts. If that is how you talk
> yourself out of a project then I don't suppose there is much anyone can do
> about it, since reason clearly has nothing to do with it.
>
> To those interested in the full-spheroid transverse Mercator, I urge you
> not to be skeptical of its existence or attainability based on Mr.
> Evenden's comments. There is nothing controversial about either. The
> mathematics has been published in peer-reviewed journals, confirmed any
> number of times by people who understand the mathematics, and expressed by
> at least three different calculational methods (whatever method Lee used;
> Dozier; and Wallis) in at least five implementations that I know of. While
> there is treacherous calculational territory to traverse, that is true of
> many projections. As always, you must understand the domain and choose
> numerical techniques appropriate to it.

Stating it another way, my surrender was to the Dozier article that while the 
method sounds interesting the execution falls short.  The code had several 
errors and some methodology is in question.  I have spent an additional week 
rooting out a complex Bulirsch routine from the old Bell lab site and spent 
several days relating Jacobi's form to Legendre in order to test against 
Abramowitz tables and GSL software for at least real arguments---they now 
agree.  But Dozier's code does not agree to better than the third or forth 
place (I am not saying Dozier's code is wrong yet).

And I still have no handle on a replacement for Newton-Raphson.

There's the old saying: "I'm from Missouri.  Show me."  Has someone have a 
reasonable reference list on this subject (other than Dozier and Wallis).  I 
am aware of Lee but I have not seen some of the other names mentioned without 
details.

> To that end, please feel free to contine the discussion on the "Complex
> Transverse Mercator" thread.
>
> Regards,
> -- daan Strebe

Lastly, I am not a grad student dependent upon the graces of the almighty 
professor and thus must speak in muted and humble tones in his presence.

Rather than complaining about my skepticism, I'd appreciate a good pointer or 
hints on complex root finding.  :-)
-- 
Jerry and the low-riders: Daisy Mae and Joshua
"Cogito cogito ergo cogito sum"
   Ambrose Bierce, The Devil's Dictionary



From ovv at hetnet.nl  Wed Jul  5 05:31:36 2006
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Wed, 05 Jul 2006 14:31:36 +0200
Subject: [Proj] Re: Dozier's TM method---my summary
In-Reply-To: <200607042310.38746.gerald.evenden@verizon.net>
Message-ID: <C0D17DC8.75D6%ovv@hetnet.nl>

> From: "Gerald I. Evenden"

> Stating it another way, my surrender was to the Dozier article that while the
> method sounds interesting the execution falls short.  The code had several
> errors and some methodology is in question.  I have spent an additional week
> rooting out a complex Bulirsch routine from the old Bell lab site and spent
> several days relating Jacobi's form to Legendre in order to test against
> Abramowitz tables and GSL software for at least real arguments---they now
> agree.  But Dozier's code does not agree to better than the third or forth
> place (I am not saying Dozier's code is wrong yet).
> 
> And I still have no handle on a replacement for Newton-Raphson.

What surprises me is that I gave an alternative twice, once in a posting on
this list dated 2006-06-13, once in a private email dated 2006-06-23,
including a web reference.
It's about ACM TOMS algorithm 365 from H. Bach. Fortran code can be found at
netlib.org and one can buy a copy of the peer reviewed TOMS article at ACM
(acm.org).
I am not happy with the method because it is horribly slow, but it is a very
robust method, at least if one knows how to tweak its control parameters.

As for a replacement of complex Jacobi elliptic functions and a complex
elliptic integral: it can be done without too much effort. I provided in the
same manner (list posting and private email) references.
I do admit that working with complex elliptics is no trivial endeavor
without knowledge or experience.






From gerald.evenden at verizon.net  Wed Jul  5 07:38:10 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Wed, 05 Jul 2006 10:38:10 -0400
Subject: [Proj] Re: Dozier's TM method---my summary
In-Reply-To: <C0D17DC8.75D6%ovv@hetnet.nl>
References: <C0D17DC8.75D6%ovv@hetnet.nl>
Message-ID: <200607051038.10885.gerald.evenden@verizon.net>

On Wednesday 05 July 2006 8:31 am, Oscar van Vlijmen wrote:
> > From: "Gerald I. Evenden"
> >
> > Stating it another way, my surrender was to the Dozier article that while
> > the method sounds interesting the execution falls short.  The code had
> > several errors and some methodology is in question.  I have spent an
> > additional week rooting out a complex Bulirsch routine from the old Bell
> > lab site and spent several days relating Jacobi's form to Legendre in
> > order to test against Abramowitz tables and GSL software for at least
> > real arguments---they now agree.  But Dozier's code does not agree to
> > better than the third or forth place (I am not saying Dozier's code is
> > wrong yet).
> >
> > And I still have no handle on a replacement for Newton-Raphson.
>
> What surprises me is that I gave an alternative twice, once in a posting on
> this list dated 2006-06-13, once in a private email dated 2006-06-23,
> including a web reference.
> It's about ACM TOMS algorithm 365 from H. Bach. Fortran code can be found
> at netlib.org and one can buy a copy of the peer reviewed TOMS article at
> ACM (acm.org).
> I am not happy with the method because it is horribly slow, but it is a
> very robust method, at least if one knows how to tweak its control
> parameters.
>
> As for a replacement of complex Jacobi elliptic functions and a complex
> elliptic integral: it can be done without too much effort. I provided in
> the same manner (list posting and private email) references.
> I do admit that working with complex elliptics is no trivial endeavor
> without knowledge or experience.

The Bulirsch code seems to work and compares in the real case (x+0i) with the 
GSL library *and* Abramowich tables--- after a lot of footwork dealing with 
figuring out how to match up the (&*^(&^ parameters to each.  The input 
parameters were what was really blowing my mind.

I ran into another, perhaps the same source, FORTRAN source but found out I 
did not have a g77 compiler (I had recently  changed versions of Linux) and 
solving that problem introduced more headaches than I wanted at the moment.

In my little bench program where I compared GSL, Bulirsch and Dozier I ran 
into consistant disagreement with Dozier code in the 3rd or 4th decimal 
place.  At the moment, this does not make sense because Dozier's code is at a 
significant point in Dozier's second phase of the forward solution I do not 
understand how it could be incorrect and yet yield correct answers in many 
areas for the overall projection.

The following is a short example of a test run:

e^2 used: 0.006722670022

x + y*i input: 0.1 0
Dozier e2ci: 0.09999998496533813  0*i
Bulirsch elco2 ret: OK
elco2: 0.0999988817825081  0*i
gsl_sf_ellint_E_e x: 0.09999888178250819 --- err: 4.44104e-17

x + y*i input: 0.2 0
Dozier e2ci: 0.19999988044241  0*i
Bulirsch elco2 ret: OK
elco2: 0.1999911075211161  0*i
gsl_sf_ellint_E_e x: 0.1999911075211167 --- err: 8.88297e-17

x + y*i input: 0.5 0
Dozier e2ci: 0.4999982088519777  0*i
Bulirsch elco2 ret: OK
elco2: 0.4998667513591754  0*i
gsl_sf_ellint_E_e x: 0.4998667513591855 --- err: 2.22222e-16

x + y*i input: 0.3 0.3
Dozier e2ci: 0.3000007837129038  0.2999991577227006*i
Bulirsch elco2 ret: OK
elco2: 0.3000583008002545  0.2999373655430532*i

In the last case, GSL not run because y != 0.

That gives you an idea where I now stand with the complex elliptical integral 
of the second kind (incomplete).

The nasty part is that even if this is solved, the problem with the first 
phase and the root finding looms as an even bigger issue.

Sigh.  :-(
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

-- 
Jerry and the low-riders: Daisy Mae and Joshua
"Cogito cogito ergo cogito sum"
   Ambrose Bierce, The Devil's Dictionary


From gerald.evenden at verizon.net  Wed Jul  5 12:20:43 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Wed, 05 Jul 2006 15:20:43 -0400
Subject: [Proj] Re: Dozier's TM method---my summary
In-Reply-To: <C0D17DC8.75D6%ovv@hetnet.nl>
References: <C0D17DC8.75D6%ovv@hetnet.nl>
Message-ID: <200607051520.43289.gerald.evenden@verizon.net>

On Wednesday 05 July 2006 8:31 am, Oscar van Vlijmen wrote:
	...
> What surprises me is that I gave an alternative twice, once in a posting on
> this list dated 2006-06-13, once in a private email dated 2006-06-23,
> including a web reference.
> It's about ACM TOMS algorithm 365 from H. Bach. Fortran code can be found
> at netlib.org and one can buy a copy of the peer reviewed TOMS article at
> ACM (acm.org).
> I am not happy with the method because it is horribly slow, but it is a
> very robust method, at least if one knows how to tweak its control
> parameters.

Not sure what you meant by slow but the example clocked in at 2ms real time 
and did not show on the millisecond user/system clocks.

Sorta looks like a steepest descent routine with no analysis from derivatives 
so it is likely to be sluggish.

So much for Dozier's idea of a speedy method.  ;-)

I stupidly missed all the control in the file so had to do about three whacks 
at getting it to compile.  Once the junk was removed it went fine.

-- 
Jerry and the low-riders: Daisy Mae and Joshua
"Cogito cogito ergo cogito sum"
   Ambrose Bierce, The Devil's Dictionary


From edward.hyer at nrlmry.navy.mil  Wed Jul  5 15:57:57 2006
From: edward.hyer at nrlmry.navy.mil (Hyer, Dr. Edward (Post Doc))
Date: Wed, 5 Jul 2006 15:57:57 -0700
Subject: [Proj] Datum conversion
Message-ID: <0C3547C820A2AC44BD317A2DB596647F012D61@zeus.w2k.nrlmry.navy.mil>

Hi,

I am interested in doing point coordinate conversions from WGS84 lat/long points to SAD69. The SAD69 datum does not appear to be natively supported in proj or cs2cs. Can someone tell me where to find the parameters to use for this conversion?

Thanks for your help,

Dr. Edward J. Hyer
Post-Doctoral Researcher
Naval Research Laboratory
Marine Meteorology Division
7 Grace Hopper Avenue, Stop 2
Monterey, California 93940
831-656-4023
FAX 831-656-4769
edward.hyer at nrlmry.navy.mil



From cjmce at lsu.edu  Wed Jul  5 16:50:19 2006
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 5 Jul 2006 18:50:19 -0500
Subject: [Proj] Datum conversion
Message-ID: <OFA974AC78.C11DF17D-ON862571A2.0082F310-862571A2.0082F32B@lsu.edu>





Look in TR 8350.2 at:

http://earth-info.nga.mil/GandG/publications/

Note that this information is considered obsolete for operational use.  For
further information, contact the good folks at the Arnold, MO office of
NGA.

Note that South America is now on SIRGAS and not SAD69.  SAD69 was "thunk
up" by Dr. Irene Fischer, a very nice lady.  She's in her 80s or 90s now,
is about 4'10", and I once watched her chew out a three-star Admiral during
a classified symposium at Cameron Station some 38+ years ago!

Good luck,

Clifford J. Mugnier, C.P., C.M.S.
National Director (2006-2008),
Photogrammetric Applications Division
American Society for Photogrammetry and Remote Sensing
and
Chief of Geodesy,
CENTER FOR GEOINFORMATICS
Department of Civil Engineering
CEBA 3223A
LOUISIANA STATE UNIVERSITY
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic]
Voice and Facsimile:  (225) 578-4474 [Research]
Honorary Life Member of the
Louisiana Society of Professional Surveyors
======================================================
http://www.asprs.org/resources/GRIDS/
http://appl003.lsu.edu/eng/ceeweb.nsf/$Content/Mugnier
======================================================



Hi,

I am interested in doing point coordinate conversions from WGS84 lat/long
points to SAD69. The SAD69 datum does not appear to be natively supported
in proj or cs2cs. Can someone tell me where to find the parameters to use
for this conversion?

Thanks for your help,

Dr. Edward J. Hyer
Post-Doctoral Researcher
Naval Research Laboratory
Marine Meteorology Division
7 Grace Hopper Avenue, Stop 2
Monterey, California 93940
831-656-4023
FAX 831-656-4769
edward.hyer at nrlmry.navy.mil

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From AnthonyD at rocketmail.com  Wed Jul  5 17:32:30 2006
From: AnthonyD at rocketmail.com (Anthony Dunk)
Date: Wed, 5 Jul 2006 17:32:30 -0700 (PDT)
Subject: [Proj] Datum conversion
In-Reply-To: <0C3547C820A2AC44BD317A2DB596647F012D61@zeus.w2k.nrlmry.navy.mil>
Message-ID: <20060706003230.29559.qmail@web50802.mail.yahoo.com>

The SAD69 datum is not directly supported so you just have to provide
the ellipsoid parameters and the "towgs84" conversion values.

The following command will convert from lat/lon WGS74 to lat/lon SAD69:

cs2cs +proj=latlong +datum=WGS84 +to +proj=latlong +a=6378160.0
+rf=298.25 +towgs84=-57,1.0,-41

Anthony


--- "Hyer, Dr. Edward (Post Doc)" <edward.hyer at nrlmry.navy.mil> wrote:

> Hi,
> 
> I am interested in doing point coordinate conversions from WGS84
> lat/long points to SAD69. The SAD69 datum does not appear to be
> natively supported in proj or cs2cs. Can someone tell me where to
> find the parameters to use for this conversion?
> 
> Thanks for your help,
> 
> Dr. Edward J. Hyer
> Post-Doctoral Researcher
> Naval Research Laboratory
> Marine Meteorology Division
> 7 Grace Hopper Avenue, Stop 2
> Monterey, California 93940
> 831-656-4023
> FAX 831-656-4769
> edward.hyer at nrlmry.navy.mil
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 




__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 


From jhrg at mac.com  Wed Jul  5 13:37:56 2006
From: jhrg at mac.com (James Gallagher)
Date: Wed, 5 Jul 2006 14:37:56 -0600
Subject: [Proj] Using libproj with array data
In-Reply-To: <200607051520.43289.gerald.evenden@verizon.net>
References: <C0D17DC8.75D6%ovv@hetnet.nl>
	<200607051520.43289.gerald.evenden@verizon.net>
Message-ID: <B1B789BE-7D50-45A9-AE7B-C2E7EB01921C@mac.com>

Hi, I hope this is not a FAQ or covered in the existing docs; I've  
checked and apologize if I missed something obvious.

I have a data server which is used to access a number of files of  
georeferenced data stored in two dimentional arrays. For each array,  
I know the longitude and latitude values at the corners as well as  
the projection and datum. Is there a way I can use libproj to map  
long/lat locations to indices within the arrays?

Thanks,
James
--
James Gallagher                jgallagher at opendap.org
OPeNDAP, Inc                   406.723.8663



From AnthonyD at rocketmail.com  Wed Jul  5 20:24:45 2006
From: AnthonyD at rocketmail.com (Anthony Dunk)
Date: Wed, 5 Jul 2006 20:24:45 -0700 (PDT)
Subject: [Proj] Using libproj with array data
In-Reply-To: <B1B789BE-7D50-45A9-AE7B-C2E7EB01921C@mac.com>
Message-ID: <20060706032445.33042.qmail@web50802.mail.yahoo.com>

James,

What you're trying to do sounds like re-projecting a grid. (A grid just
being a two dimensional array of values). I have written code to do
this previously.

To project a grid you basically have to perform a forward projection of
some points around the edge of the input grid and use these to compute
the bounding rectangle in the new coordinate system. (Remember some
projections will distort the shape of the grid).

You then create an output grid in the new coordinate system with the
appropriate dimensions.

Finally you have to go through each cell in the output grid and use
reverse projection to find the corresponding cell in the unprojected
grid. Use grid interpolation to pick up the value you need to put in
the output grid cell.

There's probably already code in the public domain which uses PROJ to
do this.

Anthony.

--- James Gallagher <jhrg at mac.com> wrote:

> Hi, I hope this is not a FAQ or covered in the existing docs; I've  
> checked and apologize if I missed something obvious.
> 
> I have a data server which is used to access a number of files of  
> georeferenced data stored in two dimentional arrays. For each array, 
> 
> I know the longitude and latitude values at the corners as well as  
> the projection and datum. Is there a way I can use libproj to map  
> long/lat locations to indices within the arrays?
> 
> Thanks,
> James
> --
> James Gallagher                jgallagher at opendap.org
> OPeNDAP, Inc                   406.723.8663
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 




__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 


From paulomarcondes at gmail.com  Thu Jul  6 03:55:08 2006
From: paulomarcondes at gmail.com (pmarc)
Date: Thu, 6 Jul 2006 07:55:08 -0300
Subject: [Proj] Datum conversion
In-Reply-To: <0C3547C820A2AC44BD317A2DB596647F012D61@zeus.w2k.nrlmry.navy.mil>
References: <0C3547C820A2AC44BD317A2DB596647F012D61@zeus.w2k.nrlmry.navy.mil>
Message-ID: <9fd2d2180607060355r35636c18o242b623c237a638@mail.gmail.com>

2006/7/5, Hyer, Dr. Edward (Post Doc) <edward.hyer at nrlmry.navy.mil>:
> Hi,
>
> I am interested in doing point coordinate conversions from WGS84 lat/long points to SAD69. The SAD69 datum does not appear to be natively supported in proj or cs2cs. Can someone tell me where to find the parameters to use for this conversion?

Please be aware that there are at least two materializations of
SAD69... The original one, and one in '96 or '97.

Contact the Brazilian Survey guys at www.ibge.org for further details.

I've been using different parameters for wgs84/sad69 conversion,
following something I found on brazilian official docs.
+towgs84=-66.87,4.37,-38.52 (note that there is +/- 0.40m to  that
dimensions, according to the same doc.)

Otherwise they say the ellipsoids are identical.

cheers from Brazil
-- 
Paulo Marcondes = PU1/PU2PIX
-22.915 -42.229 = GG87vc (http://www.amsat.org/cgi-bin/gridconv)
Debian GNU/Linux = http://rj.debianbrasil.org = http://www.debian.org


From EMiller at dfg.ca.gov  Thu Jul  6 08:16:54 2006
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Thu, 06 Jul 2006 08:16:54 -0700
Subject: [Proj] Using libproj with array data
Message-ID: <s4acc70d.025@dfg.ca.gov>

If your corner coordinates aren't too far apart, then simple linear
interpolation will probably work fine to translate coordinates to array
indices.

Something like:

X_width = Abs( X1 - X0 ) / X_count   ; ( X0, Y0 ) minimum x/y 
Y_width = Abs( Y1 - Y0 ) / Y_count   ; ( X1, Y1 ) maximum x/y

i = Floor( (Xi - X0) / X_width )   ; ( Xi, Yi ) the coordinate of
interest 
j = Floor( (Yi - Y0) / Y_width )

(Assumes X0 <= Xi < X1 and Y0 <= Yi < Y1) 

>>> jhrg at mac.com 7/5/2006 1:37:56 PM >>>
Hi, I hope this is not a FAQ or covered in the existing docs; I've  
checked and apologize if I missed something obvious.

I have a data server which is used to access a number of files of  
georeferenced data stored in two dimentional arrays. For each array,  
I know the longitude and latitude values at the corners as well as  
the projection and datum. Is there a way I can use libproj to map  
long/lat locations to indices within the arrays?

Thanks,
James
--
James Gallagher                jgallagher at opendap.org
OPeNDAP, Inc                   406.723.8663

_______________________________________________
Proj mailing list
Proj at lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/proj


From jhrg at mac.com  Thu Jul  6 08:28:19 2006
From: jhrg at mac.com (James Gallagher)
Date: Thu, 6 Jul 2006 09:28:19 -0600
Subject: [Proj] Using libproj with array data
In-Reply-To: <20060706032445.33042.qmail@web50802.mail.yahoo.com>
References: <20060706032445.33042.qmail@web50802.mail.yahoo.com>
Message-ID: <F16812B5-865C-4593-970A-958026615494@mac.com>


On Jul 5, 2006, at 9:24 PM, Anthony Dunk wrote:

> James,
>
> What you're trying to do sounds like re-projecting a grid. (A grid  
> just
> being a two dimensional array of values). I have written code to do
> this previously.

I think what I need is simpler, but maybe not. What I'm doing is  
writing a function that can be run by a data server that will return  
a region of interest. The ROI, suplied by a client, will specified by  
long/lat upper-left and lower-right corner points. What I need to get  
are the actual array indexes that correspond to those long/lat  
locations. For some of the data, the coverage is the 'global' (which  
means 80N to 80S and 180W to 180E) while for the rest it a smaller  
region.

Metadata associated with these data files are spotty and often  
somewhat odd. For example, one data set lists longitude as running  
from 20 to 380 degrees. Before I look more at libproj, I should ask  
if it will handle such oddities? I assume so, but ...

Thanks,
James


>
> To project a grid you basically have to perform a forward  
> projection of
> some points around the edge of the input grid and use these to compute
> the bounding rectangle in the new coordinate system. (Remember some
> projections will distort the shape of the grid).
>
> You then create an output grid in the new coordinate system with the
> appropriate dimensions.
>
> Finally you have to go through each cell in the output grid and use
> reverse projection to find the corresponding cell in the unprojected
> grid. Use grid interpolation to pick up the value you need to put in
> the output grid cell.
>
> There's probably already code in the public domain which uses PROJ to
> do this.
>
> Anthony.
>
> --- James Gallagher <jhrg at mac.com> wrote:
>
>> Hi, I hope this is not a FAQ or covered in the existing docs; I've
>> checked and apologize if I missed something obvious.
>>
>> I have a data server which is used to access a number of files of
>> georeferenced data stored in two dimentional arrays. For each array,
>>
>> I know the longitude and latitude values at the corners as well as
>> the projection and datum. Is there a way I can use libproj to map
>> long/lat locations to indices within the arrays?
>>
>> Thanks,
>> James
>> --
>> James Gallagher                jgallagher at opendap.org
>> OPeNDAP, Inc                   406.723.8663
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>>
>
>
>
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

--
James Gallagher                jgallagher at opendap.org
OPeNDAP, Inc                   406.723.8663



From psynowiec at gmail.com  Sun Jul  9 09:09:43 2006
From: psynowiec at gmail.com (Piotr Synowiec)
Date: Sun, 09 Jul 2006 18:09:43 +0200
Subject: [Proj] newbie problem: WGS84 lat,long => LCC x,y
Message-ID: <44B12A47.5000004@gmail.com>

hi
I have a newbie problem.
I tried to convert lat,long coordinates from my GPS to the UTM x,y

I have pair of coordinates in both systems
LAT 22 28 13.501N
LON 49 22 46.422E
Easting 333278.419
Northing 2485798.233

First attempt I tried program proj
cat wgs84deg.txt | proj +units=m +proj=utm +zone=39 +ellps=WGS84

result is
-1554377.54     5873313.44
-6114872.17     0.00

and doesn't look like expected 333278.419  2485798.233

then I tried program cs2cs
cat wgs84deg.txt | cs2cs +proj=latlong +ellps=WGS84 +datu=WGS84 +to 
+proj=utm +zone=39

result is the same like with program proj
-1554377.54     5873313.44 0.00
-6114872.17     0.00 0.00

my wgs84deg.txt with data looks like

22d28'13.501N 49d22'46.422E


This is my first attempt to use this software.

Finally I need to convert coordinates from WGS84 lat,long to Lambert 
Conformal Conic on International 1924 spheroid and Ain El Abd datum.

Projection: Lambert Conformal COnic
Lat of origin: 25d05'22.236"N
Lon of origin: 48d00'0.00"E
Norhting of origin: 0.0
Easting of origin: 0.0
Scale @ parallels: 1.0
Parallel 1: 33d00'0.000"N
Parallel 2: 17d00'0.000"N

Spheroid: International 1924
Semi-major axis: 6,378,388.0
Semi-minor axis: 6,356,911.946
Inverse flattening: 297.000

Datum: Ain El Abd
to WGS84
DX: -143.0 m
DY: -236.0 m
DZ: 7.0 m
Vertical datum: spheroidal

Could anybody help me setup command for this conversions ?

Regards
Piotr



From tutey at o2.pl  Sun Jul  9 09:45:13 2006
From: tutey at o2.pl (Maciej Sieczka)
Date: Sun, 9 Jul 2006 18:45:13 +0200
Subject: [Proj] newbie problem: WGS84 lat,long => LCC x,y
In-Reply-To: <44B12A47.5000004@gmail.com>
References: <44B12A47.5000004@gmail.com>
Message-ID: <20060709184513.06650528@sorbus>

Dnia Sun, 09 Jul 2006 18:09:43 +0200
Piotr Synowiec <psynowiec at gmail.com> napisał(a):

> hi
> I have a newbie problem.
> I tried to convert lat,long coordinates from my GPS to the UTM x,y
> 
> I have pair of coordinates in both systems
> LAT 22 28 13.501N
> LON 49 22 46.422E
> Easting 333278.419
> Northing 2485798.233
> 
> First attempt I tried program proj
> cat wgs84deg.txt | proj +units=m +proj=utm +zone=39 +ellps=WGS84
> 
> result is
> -1554377.54     5873313.44
> -6114872.17     0.00
> 
> and doesn't look like expected 333278.419  2485798.233
> 
> then I tried program cs2cs
> cat wgs84deg.txt | cs2cs +proj=latlong +ellps=WGS84 +datu=WGS84 +to 
							   ^
					missing 'm', if it matters
> +proj=utm +zone=39
 
> result is the same like with program proj
> -1554377.54     5873313.44 0.00
> -6114872.17     0.00 0.00
> 
> my wgs84deg.txt with data looks like
> 
> 22d28'13.501N 49d22'46.422E

cs2cs expects xy/lonlat order. Reverse or use -r switch. Poland, uh :D?

Maciek


From jagoncal at fc.up.pt  Sun Jul  9 09:55:49 2006
From: jagoncal at fc.up.pt (=?ISO-8859-2?Q?Jos=E9_Alberto_Gon=E7alves?=)
Date: Sun, 09 Jul 2006 17:55:49 +0100
Subject: [Proj] newbie problem: WGS84 lat,long => LCC x,y
In-Reply-To: <44B12A47.5000004@gmail.com>
References: <44B12A47.5000004@gmail.com>
Message-ID: <44B13515.40207@fc.up.pt>

The default order of the coordinates is LON LAT. Edit your file or a 
ternatively use optin -r in your proj command line to accept input in 
reverse order.

> my wgs84deg.txt with data looks like
>
> 22d28'13.501N 49d22'46.422E
>
To do your LCC projection (not the datum conversion) the proj command 
line is:

proj +ellps=intl +proj=lcc +lat_1=33 +lat_2=17 +lon_0=48 +lat_0=25.08951



Regards

Jose' A. Gonçalves




From mfinn at usgs.gov  Sun Jul  9 14:00:59 2006
From: mfinn at usgs.gov (Michael P Finn)
Date: Sun, 9 Jul 2006 16:00:59 -0500
Subject: [Proj] Michael P Finn of the USGS/ National Geospatial Technical
 Operations Center is out of the office.
Message-ID: <OFBD22D3BD.25A155CF-ON862571A6.00737278-862571A6.00737279@usgs.gov>


I will be out of the office starting  07/08/2006 and will not return until
07/12/2006.

I will be unable to check e-mail regularly while I am out. If I can't
respond to your message while I am out, then I will when I return. If you
have anything that cannot wait, please contact my colleague, Mr. Timothy
Krupinski, at tkrupinski at usgs.gov.     Mike



From sieczka at biol.uni.wroc.pl  Sun Jul  9 09:44:40 2006
From: sieczka at biol.uni.wroc.pl (Maciej Sieczka)
Date: Sun, 9 Jul 2006 18:44:40 +0200
Subject: [Proj] newbie problem: WGS84 lat,long => LCC x,y
In-Reply-To: <44B12A47.5000004@gmail.com>
References: <44B12A47.5000004@gmail.com>
Message-ID: <20060709184440.40f3bb35@sorbus>

Dnia Sun, 09 Jul 2006 18:09:43 +0200
Piotr Synowiec <psynowiec at gmail.com> napisał(a):

> hi
> I have a newbie problem.
> I tried to convert lat,long coordinates from my GPS to the UTM x,y
> 
> I have pair of coordinates in both systems
> LAT 22 28 13.501N
> LON 49 22 46.422E
> Easting 333278.419
> Northing 2485798.233
> 
> First attempt I tried program proj
> cat wgs84deg.txt | proj +units=m +proj=utm +zone=39 +ellps=WGS84
> 
> result is
> -1554377.54     5873313.44
> -6114872.17     0.00
> 
> and doesn't look like expected 333278.419  2485798.233
> 
> then I tried program cs2cs
> cat wgs84deg.txt | cs2cs +proj=latlong +ellps=WGS84 +datu=WGS84 +to 
							   ^
					missing 'm', if it matters
> +proj=utm +zone=39
 
> result is the same like with program proj
> -1554377.54     5873313.44 0.00
> -6114872.17     0.00 0.00
> 
> my wgs84deg.txt with data looks like
> 
> 22d28'13.501N 49d22'46.422E

cs2cs expects xy/lonlat order. Reverse or use -r switch. Poland, uh :D?

Maciek


From maurer at shhinfo.de  Mon Jul 10 08:17:35 2006
From: maurer at shhinfo.de (maurer at shhinfo.de)
Date: Mon, 10 Jul 2006 17:17:35 +0200
Subject: [Proj] Accuracy of projections
Message-ID: <32738.84.57.147.35.1152544655.squirrel@195.125.203.101>

Hello,

I'd like to transform GPS (DGPS) generated coordinates from WGS84
(lat/lon) to Gauss-Krueger coordinates on Bessel ellipsoid(epsg 31463). Is
it possible to receive an accuracy <1 meter using proj.4 standard epsg
file? (I don't really want to generate my own helmerttransformation and
transformationparameters...).

Kind regards
Tobias



From cjmce at lsu.edu  Mon Jul 10 09:02:58 2006
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Mon, 10 Jul 2006 11:02:58 -0500
Subject: [Proj] Accuracy of projections
Message-ID: <OFCBA3638F.5D053455-ON862571A7.0058298B-862571A7.005829A1@lsu.edu>





The mathematical accuracy of cartographic transformations used by PROJ4
such as the Gauss-Krueger Transverse Mercator are capable of yielding
excellent results (±0.1mm) when within ±3½º of the central meridian.
However, when ALSO introducing a datum shift into the transformation
process, the accuracy rapidly plummets to many ± meters!

The reason for this is that classical geodetic datums that have been
established by astronomical observations at origin points and then extended
through geodetic triangulation chains of quadrilaterals are often not
accurate within themselves to better than a meter!  No datum shift can
yield accuracies better than the basic accuracy of the datum itself.  All
datum shifts DEGRADE the accuracy of all points transformed because the
generation of transformation parameters is a "best fit" of all the
positions determined on a particular datum with relation to another datum,
commonly WGS84 or ITRFXX.

Datum shifts that use 3 parameters (common with EPSG info) will commonly
yield accuracies of better than ±25 meters.  How much better?  Depends on
the size of the area and the specifications of the original 19th/20th
century surveys.  Increasing the number of parameters may increase accuracy
over a small area. How much again depends on original accuracies of the
classical datum.

In regard to your question, better than one meter? Likely not.

Clifford J. Mugnier C.P.,C.M.S.
National Director (2006-2008)
Photogrammetric Applications Division
AMERICAN SOCIETY FOR PHOTOGRAMMETRY AND REMOTE SENSING
and
Chief of Geodesy
Center for GeoInformatics
LOUISIANA STATE UNIVERSITY
Dept. of Civil Engineering
CEBA 3223A
Baton Rouge, LA  70810
Voice:              (225) 578-8536
Facsimile:          (225) 578-8652
-----------------------------------------------------------
http://www.ASPRS.org/resources/GRIDS
http://www.cee.lsu.edu/facultyStaff/mugnier/index.html
-----------------------------------------------------------



Hello,

I'd like to transform GPS (DGPS) generated coordinates from WGS84
(lat/lon) to Gauss-Krueger coordinates on Bessel ellipsoid(epsg 31463). Is
it possible to receive an accuracy <1 meter using proj.4 standard epsg
file? (I don't really want to generate my own helmerttransformation and
transformationparameters...).

Kind regards
Tobias




From ovv at hetnet.nl  Mon Jul 10 11:10:02 2006
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Mon, 10 Jul 2006 20:10:02 +0200
Subject: [Proj] Accuracy of projections
In-Reply-To: <32738.84.57.147.35.1152544655.squirrel@195.125.203.101>
Message-ID: <C0D8649A.767C%ovv@hetnet.nl>

> I'd like to transform GPS (DGPS) generated coordinates from WGS84
> (lat/lon) to Gauss-Krueger coordinates on Bessel ellipsoid(epsg 31463). Is
> it possible to receive an accuracy <1 meter using proj.4 standard epsg
> file? (I don't really want to generate my own helmerttransformation and
> transformationparameters...).

Are you sufficiently close to a differential GPS base station to justify an
accuracy of <1 m?

After conversion to GK grid coordinates, are you sure no grid interpolation
is needed? Just converting to grid coordinates is nothing more than a
mathematical exercise. But if you want cadastral coordinates, usually a grid
interpolation has to be performed. How accurate is the interpolation?



From BartA at xs4all.nl  Mon Jul 10 13:28:22 2006
From: BartA at xs4all.nl (Bart Adriaanse)
Date: Mon, 10 Jul 2006 22:28:22 +0200
Subject: [Proj] Proj version 4.5.0 - datum shifts
Message-ID: <003001c6a45f$66b47a30$0201a8c0@bartathome>

Any news on the 4.5.0 final release date ?

I just downloaded the 4.5.0 version beta, compiled it to a dll, it seems to 
work fine.

I will be testing this on the Dutch system (Amersfoort/RDNAP) using 7 
parameter datum shifts.

I guess testing the 7 parameter shifts *before* the beta goes final is a 
good idea, so i'll post back here after i do, anybody here who tested this 
recently ?

a thread on this way back (version 4.4.3):

http://lists.maptools.org/pipermail/proj/2001-January/000132.html

thanks for your interest,

Bart Adriaanse
The Netherlands


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060710/fe907158/attachment.html>

From psynowiec at gmail.com  Mon Jul 10 14:03:29 2006
From: psynowiec at gmail.com (Piotr Synowiec)
Date: Mon, 10 Jul 2006 23:03:29 +0200
Subject: [Proj] PROJ.4 VB Wrappers 
Message-ID: <44B2C0A1.5080908@gmail.com>


link to the proj4 wrappers is not working any more.
PROJ.4 VB Wrappers 
<http://ftp.dfg.ca.gov/Outgoing/Nafwb/proj4/proj_api.zip> from Eric G. 
Miller.
http://ftp.dfg.ca.gov/Outgoing/Nafwb/proj4/proj_api.zip

Could anybody send me this file by email ?

Cheers
Piotr


From EMiller at dfg.ca.gov  Mon Jul 10 14:37:37 2006
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Mon, 10 Jul 2006 14:37:37 -0700
Subject: [Proj] PROJ.4 VB Wrappers
Message-ID: <s4b26641.071@dfg.ca.gov>

My PROJ.4 stuff had to be moved:

http://ftp.dfg.ca.gov/Public/BDB/Tools/proj4/

>>> psynowiec at gmail.com 7/10/2006 2:03 PM >>>

link to the proj4 wrappers is not working any more.
PROJ.4 VB Wrappers 
<http://ftp.dfg.ca.gov/Outgoing/Nafwb/proj4/proj_api.zip> from Eric G.

Miller.
http://ftp.dfg.ca.gov/Outgoing/Nafwb/proj4/proj_api.zip 

Could anybody send me this file by email ?

Cheers
Piotr
_______________________________________________
Proj mailing list
Proj at lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/proj


From barta at xs4all.nl  Mon Jul 10 14:51:59 2006
From: barta at xs4all.nl (Bart)
Date: Mon, 10 Jul 2006 23:51:59 +0200
Subject: [Proj] Re: PROJ.4 VB Wrappers
References: <44B2C0A1.5080908@gmail.com>
Message-ID: <e8uhmo$77t$1@sea.gmane.org>

Here's the wrapper i use from VB(6)

------ wrapper ------

' proj.dll projection info
Private Type ProjCoordSys
  ProjPointer As Long
  ProjPar() As String
  isValid As Boolean
  IsLL As Boolean
End Type

' proj.dll declarations
Private Declare Function pj_init Lib "Proj.dll" (ByVal argc As Long, ByRef 
argv As Long) As Long
Private Declare Sub pj_free Lib "Proj.dll" (ByVal pointer As Long)
Private Declare Function pj_transform Lib "Proj" (ByVal SrcPrj As Long, 
ByVal DestPrj As Long, ByVal nPoints As Long, ByVal Offset As Long, ByRef x 
As Double, ByRef y As Double, ByRef z As Double) As Long

------ /wrapper -----


Now to make this work, you do need to recompile proj.dll using MAKEFILE.VC 
after editing the source files a bit adding the __stdcall attribute for the 
functions you need to use from VB,

in pj_transform.c

int __stdcall pj_transform( PJ *srcdefn, PJ *dstdefn, long point_count, int 
point_offset,
                  double *x, double *y, double *z )

same (ad __stdcall) for pj_init, pj_free functions in pj_init.c

same for all three functions in proj_api.h

Then run NMAKE MAKEFILE.VC (command line) and voila...

I hope that helps, it's not really a wrapper, its just a calling convention 
;-)

Bart








"Piotr Synowiec" <psynowiec at gmail.com> wrote in message 
news:44B2C0A1.5080908 at gmail.com...
>
> link to the proj4 wrappers is not working any more.
> PROJ.4 VB Wrappers 
> <http://ftp.dfg.ca.gov/Outgoing/Nafwb/proj4/proj_api.zip> from Eric G. 
> Miller.
> http://ftp.dfg.ca.gov/Outgoing/Nafwb/proj4/proj_api.zip
>
> Could anybody send me this file by email ?
>
> Cheers
> Piotr
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 





From starjohn at hotmail.com  Tue Jul 11 11:29:29 2006
From: starjohn at hotmail.com (starjohn)
Date: Tue, 11 Jul 2006 21:29:29 +0300
Subject: [Proj] Newbie Polar stereographic question
References: <200607111601.k6BG1Y3H031613@duke.maptools.org>
Message-ID: <BAY102-DAV83D4AEB2AF368C7DE1EACD8680@phx.gbl>


Hello!

I got image from a korean customer which is polar stereographic with center 
Longitude=127, and center latitude = 35
The true latitude is 60. How do I use polar stereographic in this case ? Is 
it possible to specify true lat other than
90 or -90 ?

Thanks!
    John


From gerald.evenden at verizon.net  Tue Jul 11 13:07:51 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Tue, 11 Jul 2006 16:07:51 -0400
Subject: [Proj] Newbie Polar stereographic question
In-Reply-To: <BAY102-DAV83D4AEB2AF368C7DE1EACD8680@phx.gbl>
References: <200607111601.k6BG1Y3H031613@duke.maptools.org>
	<BAY102-DAV83D4AEB2AF368C7DE1EACD8680@phx.gbl>
Message-ID: <200607111607.51394.gerald.evenden@verizon.net>

On Tuesday 11 July 2006 2:29 pm, starjohn wrote:
> Hello!
>
> I got image from a korean customer which is polar stereographic with center
> Longitude=127, and center latitude = 35
> The true latitude is 60. How do I use polar stereographic in this case ? Is
> it possible to specify true lat other than
> 90 or -90 ?

"Polar" Stereographic may be a bit of a misnomer.  I suspect simple 
Steregraphic is  what is meant with the point of tangency at 127E? and 35N?.
In proj4 terms: +lat_0=127E +lat_0=35N.

I cannot imagine anyone using truly polar stereographic at a latitude of 35 
degrees.

-- 
Jerry and the low-riders: Daisy Mae and Joshua
"Cogito cogito ergo cogito sum"
   Ambrose Bierce, The Devil's Dictionary


From starjohn at hotmail.com  Wed Jul 12 11:22:36 2006
From: starjohn at hotmail.com (starjohn)
Date: Wed, 12 Jul 2006 21:22:36 +0300
Subject: [Proj] Re: Newbie Polar stereographic question
References: <200607121602.k6CG2BYb029590@duke.maptools.org>
Message-ID: <BAY102-DAV612A3A9CA05542D18655FD8690@phx.gbl>


Hello Gerald!

Thanks a lot for the reply!

As far as I know, the projection plane is on latitude 60 and parallel to the 
equator (this is the meaning of true latitude).

There is a ray from the center of earth to this plane. The center of the 
projection
is the point on this plane where the ray from the center of earth goes 
through the center
point and "meets" the plane.. this is the center of the projection. Makes a 
sense ?

There is a drawing on mathworld to see this in better detail on
http://mathworld.wolfram.com/StereographicProjection.html

Thanks again and all the best
   John

> On Tuesday 11 July 2006 2:29 pm, starjohn wrote:
>> Hello!
>>
>> I got image from a korean customer which is polar stereographic with 
>> center
>> Longitude=127, and center latitude = 35
>> The true latitude is 60. How do I use polar stereographic in this case ? 
>> Is
>> it possible to specify true lat other than
>> 90 or -90 ?
>
> "Polar" Stereographic may be a bit of a misnomer.  I suspect simple
> Steregraphic is  what is meant with the point of tangency at 127E? and 
> 35N?.
> In proj4 terms: +lat_0=127E +lat_0=35N.
>
> I cannot imagine anyone using truly polar stereographic at a latitude of 
> 35
> degrees.
>
> -- 
> Jerry and the low-riders: Daisy Mae and Joshua
> "Cogito cogito ergo cogito sum"
>   Ambrose Bierce, The Devil's Dictionary
>


From gerald.evenden at verizon.net  Wed Jul 12 14:07:35 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Wed, 12 Jul 2006 17:07:35 -0400
Subject: [Proj] Re: Newbie Polar stereographic question
In-Reply-To: <BAY102-DAV612A3A9CA05542D18655FD8690@phx.gbl>
References: <200607121602.k6CG2BYb029590@duke.maptools.org>
	<BAY102-DAV612A3A9CA05542D18655FD8690@phx.gbl>
Message-ID: <200607121707.35376.gerald.evenden@verizon.net>

On Wednesday 12 July 2006 2:22 pm, starjohn wrote:
> Hello Gerald!
>
> Thanks a lot for the reply!
>
> As far as I know, the projection plane is on latitude 60 and parallel to
> the equator (this is the meaning of true latitude).
>
> There is a ray from the center of earth to this plane. The center of the
> projection
> is the point on this plane where the ray from the center of earth goes
> through the center
> point and "meets" the plane.. this is the center of the projection. Makes a
> sense ?

Basically.  The source point of all the rays is the "antipod" of the point of 
tangency of the projection plane.  That is at a point -lat_0,-lon_0.  Thus 
the ray from the ray source to lat_0, lon_0 passes through the center of the 
earth.  And the plane of the projection is orthogonal to this ray.

> There is a drawing on mathworld to see this in better detail on
> http://mathworld.wolfram.com/StereographicProjection.html
>
> Thanks again and all the best
>    John
>
> > On Tuesday 11 July 2006 2:29 pm, starjohn wrote:
> >> Hello!
> >>
> >> I got image from a korean customer which is polar stereographic with
> >> center
> >> Longitude=127, and center latitude = 35
> >> The true latitude is 60. How do I use polar stereographic in this case ?
> >> Is
> >> it possible to specify true lat other than
> >> 90 or -90 ?
> >
> > "Polar" Stereographic may be a bit of a misnomer.  I suspect simple
> > Steregraphic is  what is meant with the point of tangency at 127E? and
> > 35N?.
> > In proj4 terms: +lat_0=127E +lat_0=35N.
> >
> > I cannot imagine anyone using truly polar stereographic at a latitude of
> > 35
> > degrees.
> >
> > --
> > Jerry and the low-riders: Daisy Mae and Joshua
> > "Cogito cogito ergo cogito sum"
> >   Ambrose Bierce, The Devil's Dictionary
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

-- 
Jerry and the low-riders: Daisy Mae and Joshua
"Cogito cogito ergo cogito sum"
   Ambrose Bierce, The Devil's Dictionary


From gerald.evenden at verizon.net  Wed Jul 12 16:34:22 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Wed, 12 Jul 2006 19:34:22 -0400
Subject: [Proj] Re: Newbie Polar stereographic question
In-Reply-To: <200607121707.35376.gerald.evenden@verizon.net>
References: <200607121602.k6CG2BYb029590@duke.maptools.org>
	<BAY102-DAV612A3A9CA05542D18655FD8690@phx.gbl>
	<200607121707.35376.gerald.evenden@verizon.net>
Message-ID: <200607121934.22754.gerald.evenden@verizon.net>

On Wednesday 12 July 2006 5:07 pm, Gerald I. Evenden wrote:
> On Wednesday 12 July 2006 2:22 pm, starjohn wrote:
> > Hello Gerald!
> >
> > Thanks a lot for the reply!
> >
> > As far as I know, the projection plane is on latitude 60 and parallel to
> > the equator (this is the meaning of true latitude).
> >
> > There is a ray from the center of earth to this plane. The center of the
> > projection
> > is the point on this plane where the ray from the center of earth goes
> > through the center
> > point and "meets" the plane.. this is the center of the projection. Makes
> > a sense ?
>
> Basically.  The source point of all the rays is the "antipod" of the point
> of tangency of the projection plane.  That is at a point -lat_0,-lon_0. 
I should say lon_0+180
> Thus the ray from the ray source to lat_0, lon_0 passes through the center
> of the earth.  And the plane of the projection is orthogonal to this ray.
>
> > There is a drawing on mathworld to see this in better detail on
> > http://mathworld.wolfram.com/StereographicProjection.html
> >
> > Thanks again and all the best
> >    John
> >
> > > On Tuesday 11 July 2006 2:29 pm, starjohn wrote:
> > >> Hello!
> > >>
> > >> I got image from a korean customer which is polar stereographic with
> > >> center
> > >> Longitude=127, and center latitude = 35
> > >> The true latitude is 60. How do I use polar stereographic in this case
> > >> ? Is
> > >> it possible to specify true lat other than
> > >> 90 or -90 ?
> > >
> > > "Polar" Stereographic may be a bit of a misnomer.  I suspect simple
> > > Steregraphic is  what is meant with the point of tangency at 127E? and
> > > 35N?.
> > > In proj4 terms: +lat_0=127E +lat_0=35N.
> > >
> > > I cannot imagine anyone using truly polar stereographic at a latitude
> > > of 35
> > > degrees.
> > >
> > > --
> > > Jerry and the low-riders: Daisy Mae and Joshua
> > > "Cogito cogito ergo cogito sum"
> > >   Ambrose Bierce, The Devil's Dictionary
> >
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj

-- 
Jerry and the low-riders: Daisy Mae and Joshua
"Cogito cogito ergo cogito sum"
   Ambrose Bierce, The Devil's Dictionary


From starjohn at hotmail.com  Wed Jul 12 23:12:52 2006
From: starjohn at hotmail.com (john star)
Date: Wed, 12 Jul 2006 23:12:52 -0700
Subject: [Proj] Re: Newbie Polar stereographic question
In-Reply-To: <BAY102-DAV612A3A9CA05542D18655FD8690@phx.gbl>
Message-ID: <BAY102-F723EFDEE2702C88A3BD4CD86E0@phx.gbl>


Hi Gerald!

Thanks, I understand now that in libproj, the plane MUST be orthogonal
to the earth, and there is no support for this plane to be "inside" the
earth..

Is there a way to use the library for this case ? by playing with parameters 
(btw,
what are the rest of parameters like lat_ts and k?), or it is just not 
supported ?

Best Regards
   John

>Basically.  The source point of all the rays is the "antipod" of the point
>of tangency of the projection plane.  That is at a point -lat_0,-lon_0.
I should say lon_0+180
>Thus the ray from the ray source to lat_0, lon_0 passes through the center
>of the earth.  And the plane of the projection is orthogonal to this ray.
>




From starjohn at hotmail.com  Wed Jul 12 23:13:41 2006
From: starjohn at hotmail.com (john star)
Date: Wed, 12 Jul 2006 23:13:41 -0700
Subject: [Proj] Re: Newbie Polar stereographic question
In-Reply-To: <BAY102-DAV612A3A9CA05542D18655FD8690@phx.gbl>
Message-ID: <BAY102-F1702352433CADBC85B5F99D86E0@phx.gbl>


Hi Gerald!

Thanks, I understand now that in libproj, the plane MUST be orthogonal
to the earth, and there is no support for this plane to be "inside" the
earth..

Is there a way to use the library for this case ? by playing with parameters 
(btw,
what are the rest of parameters like lat_ts and k?), or it is just not 
supported ?

Best Regards
   John

>Basically.  The source point of all the rays is the "antipod" of the point
>of tangency of the projection plane.  That is at a point -lat_0,-lon_0.
I should say lon_0+180
>Thus the ray from the ray source to lat_0, lon_0 passes through the center
>of the earth.  And the plane of the projection is orthogonal to this ray.
>




From gerald.evenden at verizon.net  Thu Jul 13 07:49:30 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Thu, 13 Jul 2006 10:49:30 -0400
Subject: [Proj] Re: Newbie Polar stereographic question
In-Reply-To: <BAY102-F1702352433CADBC85B5F99D86E0@phx.gbl>
References: <BAY102-F1702352433CADBC85B5F99D86E0@phx.gbl>
Message-ID: <200607131049.30497.gerald.evenden@verizon.net>

On Thursday 13 July 2006 2:13 am, john star wrote:
> Hi Gerald!
>
> Thanks, I understand now that in libproj, the plane MUST be orthogonal
> to the earth, and there is no support for this plane to be "inside" the
> earth..

In a sense, yes.  Using a scaling factor (k or k_0) of less than 1 turns the 
projection plane into a secant plane.

> Is there a way to use the library for this case ? by playing with
> parameters (btw,
> what are the rest of parameters like lat_ts and k?), or it is just not
> supported ?

+lat_ts is used for the polar aspects and denotes the latitude at which the 
scale is 1 (the place where the secant plane intersects the surface).

> Best Regards
>    John
>
> >Basically.  The source point of all the rays is the "antipod" of the point
> >of tangency of the projection plane.  That is at a point -lat_0,-lon_0.
>
> I should say lon_0+180
>
> >Thus the ray from the ray source to lat_0, lon_0 passes through the center
> >of the earth.  And the plane of the projection is orthogonal to this ray.
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

-- 
Jerry and the low-riders: Daisy Mae and Joshua
"Cogito cogito ergo cogito sum"
   Ambrose Bierce, The Devil's Dictionary


From ovv at hetnet.nl  Thu Jul 13 08:23:46 2006
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Thu, 13 Jul 2006 17:23:46 +0200
Subject: [Proj] Re: Newbie Polar stereographic question
In-Reply-To: <200607131049.30497.gerald.evenden@verizon.net>
Message-ID: <C0DC3222.76DE%ovv@hetnet.nl>

I wonder, can all 3 variants of the EPSG (OGP) stereographic projections be
calculated with (lib)proj's stere?

EPSG coordinate operation method 9810:
Polar Stereographic (variant A)
For Projected Coordinate Reference System: WGS 84 / UPS North

EPSG coordinate operation method 9829:
Polar Stereographic (variant B)
For Projected Coordinate Reference System: WGS 84 / Australian Antarctic
Polar Stereographic

EPSG coordinate operation method 9830:
Polar Stereographic (variant C)
For Projected Coordinate Reference System: Petrels 1972 / Terre Adelie Polar
Stereographic

Especially variants B and C still puzzle me a bit - in the sense of how to
do it with PROJ?

Probably not possible; the PROJ file "epsg" tells me for instance:
# Petrels 1972 / Terre Adelie Polar Stereographic
# Unable to translate coordinate system into PROJ.4 format.

Formulae and numerical examples can be found in the EPSG/OGP Guidance Note
7-2.




From gerald.evenden at verizon.net  Thu Jul 13 09:46:05 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Thu, 13 Jul 2006 12:46:05 -0400
Subject: [Proj] Re: Newbie Polar stereographic question
In-Reply-To: <C0DC3222.76DE%ovv@hetnet.nl>
References: <C0DC3222.76DE%ovv@hetnet.nl>
Message-ID: <200607131246.05982.gerald.evenden@verizon.net>

On Thursday 13 July 2006 11:23 am, Oscar van Vlijmen wrote:
> I wonder, can all 3 variants of the EPSG (OGP) stereographic projections be
> calculated with (lib)proj's stere?

+proj=stere is probably OK for most polar aspects.  However, most non-US 
oblique stereographic projections probably use +proj=sterea.  I am not sure 
about equitorial needs as the problem does not seem to come up very often.

BTW, my previous statement about the projection ray trace is not true for the 
oblique, elliptical stereographic because the normal to the projection plane 
at the point of tangency to the *ellipse* does *not* pass through the center 
of the earth.  It only passes through the center for all cases of the sphere 
and only the polar and equitorial cases of the ellipsoid.

> EPSG coordinate operation method 9810:
> Polar Stereographic (variant A)
> For Projected Coordinate Reference System: WGS 84 / UPS North
>
> EPSG coordinate operation method 9829:
> Polar Stereographic (variant B)
> For Projected Coordinate Reference System: WGS 84 / Australian Antarctic
> Polar Stereographic
>
> EPSG coordinate operation method 9830:
> Polar Stereographic (variant C)
> For Projected Coordinate Reference System: Petrels 1972 / Terre Adelie
> Polar Stereographic
>
> Especially variants B and C still puzzle me a bit - in the sense of how to
> do it with PROJ?
>
> Probably not possible; the PROJ file "epsg" tells me for instance:
> # Petrels 1972 / Terre Adelie Polar Stereographic
> # Unable to translate coordinate system into PROJ.4 format.
>
> Formulae and numerical examples can be found in the EPSG/OGP Guidance Note
> 7-2.

-- 
Jerry and the low-riders: Daisy Mae and Joshua
"Cogito cogito ergo cogito sum"
   Ambrose Bierce, The Devil's Dictionary


From ovv at hetnet.nl  Fri Jul 14 05:12:42 2006
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Fri, 14 Jul 2006 14:12:42 +0200
Subject: [Proj] Re: Newbie Polar stereographic question
In-Reply-To: <200607131246.05982.gerald.evenden@verizon.net>
Message-ID: <C0DD56DA.76F3%ovv@hetnet.nl>

> From: "Gerald I. Evenden"

>> I wonder, can all 3 variants of the EPSG (OGP) stereographic projections be
>> calculated with (lib)proj's stere?
> +proj=stere is probably OK for most polar aspects.  However, most non-US
> oblique stereographic projections probably use +proj=sterea.

I am afraid this is no useful answer for
>> EPSG coordinate operation method 9830:
>> Polar Stereographic (variant C)
>> For Projected Coordinate Reference System: Petrels 1972 / Terre Adelie
>> Polar Stereographic

Test case, from the EPSG/OGP guidance note 7.2:
International 1924 ellipsoid
lat=-66d36m8.820s; lon=140d4m17.040s;
latF=-67; lon0=140; x0=3e5; y0=2e5;
Result: x,y = 303169.521856971, 244055.720500674

The ESRI ArcGIS parameters try to 'fool' us with a false northing of
-2299363.487823496 instead of 2e5.
The parameters for (lib)proj stere are then:
International 1924 ellipsoid
lat=-66d36m8.820s; lon=140d4m17.040s;
lat_ts=-67; lon0=140; x0=3e5; y0=-2299363.487823496;
lat0=-90; k0=1;
This gives x,y: 303169.521856971, 244055.720507772

The northing is very close and an even better value of the false northing
would be -2299363.48783059.

I would suggest:

(a) Can someone give an exact formula producing a corrected false easting
for the general case, so that EPSG Polar Stereographic Variant C can be
calculated with (lib)proj.
(b) Or, add EPSG Variant C as an option to (lib)proj stere.
(c) Or simply state 'officially' that EPSG Variant C is not interesting
enough to devote any attention to it.









From gerald.evenden at verizon.net  Fri Jul 14 07:33:37 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Fri, 14 Jul 2006 10:33:37 -0400
Subject: [Proj] Re: Newbie Polar stereographic question
In-Reply-To: <C0DD56DA.76F3%ovv@hetnet.nl>
References: <C0DD56DA.76F3%ovv@hetnet.nl>
Message-ID: <200607141033.37096.gerald.evenden@verizon.net>

On Friday 14 July 2006 8:12 am, Oscar van Vlijmen wrote:
> > From: "Gerald I. Evenden"
> >
> >> I wonder, can all 3 variants of the EPSG (OGP) stereographic projections
> >> be calculated with (lib)proj's stere?
> >
> > +proj=stere is probably OK for most polar aspects.  However, most non-US
> > oblique stereographic projections probably use +proj=sterea.
>
> I am afraid this is no useful answer for
>
> >> EPSG coordinate operation method 9830:
> >> Polar Stereographic (variant C)
> >> For Projected Coordinate Reference System: Petrels 1972 / Terre Adelie
> >> Polar Stereographic
>
> Test case, from the EPSG/OGP guidance note 7.2:
> International 1924 ellipsoid
> lat=-66d36m8.820s; lon=140d4m17.040s;
> latF=-67; lon0=140; x0=3e5; y0=2e5;
> Result: x,y = 303169.521856971, 244055.720500674
>
> The ESRI ArcGIS parameters try to 'fool' us with a false northing of
> -2299363.487823496 instead of 2e5.
> The parameters for (lib)proj stere are then:
> International 1924 ellipsoid
> lat=-66d36m8.820s; lon=140d4m17.040s;
> lat_ts=-67; lon0=140; x0=3e5; y0=-2299363.487823496;
> lat0=-90; k0=1;
> This gives x,y: 303169.521856971, 244055.720507772
>
> The northing is very close and an even better value of the false northing
> would be -2299363.48783059.
>
> I would suggest:
>
> (a) Can someone give an exact formula producing a corrected false easting
> for the general case, so that EPSG Polar Stereographic Variant C can be
> calculated with (lib)proj.
> (b) Or, add EPSG Variant C as an option to (lib)proj stere.
> (c) Or simply state 'officially' that EPSG Variant C is not interesting
> enough to devote any attention to it.

I an going to make a single comment: worrying about differences in the 1 
micron range are pointless.  As long as the results compare to .1mm, call it 
a match.  And even that may be a bit of overkill.

-- 
Jerry and the low-riders: Daisy Mae and Joshua
"Cogito cogito ergo cogito sum"
   Ambrose Bierce, The Devil's Dictionary


From ovv at hetnet.nl  Fri Jul 14 10:14:27 2006
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Fri, 14 Jul 2006 19:14:27 +0200
Subject: [Proj] Re: Newbie Polar stereographic question
In-Reply-To: <200607141033.37096.gerald.evenden@verizon.net>
Message-ID: <C0DD9D93.76FB%ovv@hetnet.nl>

> From: "Gerald I. Evenden"
>>>> I wonder, can all 3 variants of the EPSG (OGP) stereographic projections
>>>> be calculated with (lib)proj's stere?
>>> +proj=stere is probably OK for most polar aspects.  However, most non-US
>>> oblique stereographic projections probably use +proj=sterea.
>> I am afraid this is no useful answer for
>>>> EPSG coordinate operation method 9830:
>>>> Polar Stereographic (variant C)
...
> I an going to make a single comment: worrying about differences in the 1
> micron range are pointless.

Probably a point is missed here.
(lib)proj is NOT capable of computing said projection.
I found out that a trick is needed: use an adapted false northing.
I asked for an equation, I got a micron :-)

Don't bother, in the mean time I've derived such an equation myself.
Anyone interested can mail me or post a reply here.
Variant B poses no difficulty if you know how to do it.



From cjmce at lsu.edu  Fri Jul 14 11:10:32 2006
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 14 Jul 2006 13:10:32 -0500
Subject: [Proj] Re: Newbie Polar stereographic question
Message-ID: <OF40319322.659674E4-ON862571AB.0063D7A4-862571AB.0063D7B3@lsu.edu>





Regarding the general philosopy of transformation accuracy alluded to
below, Mr. Evenden is correct in his statement.  The old classical
formulae, oftentimes being a "double" projection to the Equivalent Sphere
first, had an expected computational accuracy of 0.1 meter.

The new inertial datums referenced with GPS/GLONASS tools have projections
typically defined with an accuracy criterion of 0.1mm.

Expecting 0.1mm accuracy to "match" a 19th century projection math model is
as Mr. Evenden states, pointless.  It may be satisfying, but really has not
any realistic need.

Furthermore, most transforms and parameters offered by the EPSG have the
standard "oil patch" level of necessary computational accuracy, which is
0.1 meters.  Doing better than that does not do any better in finding where
to drill for oil and gas.  It's nice to have, but it's not necessary.

Clifford J. Mugnier C.P.,C.M.S.
National Director (2006-2008)
Photogrammetric Applications Division
AMERICAN SOCIETY FOR PHOTOGRAMMETRY AND REMOTE SENSING
and
Chief of Geodesy
Center for GeoInformatics
LOUISIANA STATE UNIVERSITY
Dept. of Civil Engineering
CEBA 3223A
Baton Rouge, LA  70810
Voice:              (225) 578-8536
Facsimile:          (225) 578-8652
Corps of Engineers: (504) 862-1094 [Summertime]
-----------------------------------------------------------
http://www.ASPRS.org/resources/GRIDS
http://www.cee.lsu.edu/facultyStaff/mugnier/index.html
-----------------------------------------------------------


> From: "Gerald I. Evenden"
>>>> I wonder, can all 3 variants of the EPSG (OGP) stereographic
projections
>>>> be calculated with (lib)proj's stere?
>>> +proj=stere is probably OK for most polar aspects.  However, most
non-US
>>> oblique stereographic projections probably use +proj=sterea.
>> I am afraid this is no useful answer for
>>>> EPSG coordinate operation method 9830:
>>>> Polar Stereographic (variant C)
...
> I an going to make a single comment: worrying about differences in the 1
> micron range are pointless.

Probably a point is missed here.
(lib)proj is NOT capable of computing said projection.
I found out that a trick is needed: use an adapted false northing.
I asked for an equation, I got a micron :-)

Don't bother, in the mean time I've derived such an equation myself.
Anyone interested can mail me or post a reply here.
Variant B poses no difficulty if you know how to do it.



From ovv at hetnet.nl  Fri Jul 14 12:11:55 2006
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Fri, 14 Jul 2006 21:11:55 +0200
Subject: [Proj] Re: Newbie Polar stereographic question
In-Reply-To: <C0DD9D93.76FB%ovv@hetnet.nl>
Message-ID: <C0DDB91B.7701%ovv@hetnet.nl>

>>>>> EPSG coordinate operation method 9830:
>>>>> Polar Stereographic (variant C)

> (lib)proj is NOT capable of computing said projection.
> I found out that a trick is needed: use an adapted false northing.

I know, virtually nobody is using it, so who cares?
But the one person that does need this projection in the general sense, can
do absolutely nothing with the ArcGIS fudge factor of -2299363.487823496 if
he wants to project from another ellipsoid or with another latitude of true
scale.
This needs another fudge factor or more sensibly, an equation.



From bart_doggers at yahoo.com  Fri Jul 14 12:03:36 2006
From: bart_doggers at yahoo.com (Albert Anderson)
Date: Fri, 14 Jul 2006 12:03:36 -0700 (PDT)
Subject: [Proj] having problems with proj-4.4.9
Message-ID: <20060714190336.16235.qmail@web55708.mail.re3.yahoo.com>

Hi,
 I installed the program step by step.  I am trying to project file that I am creating in a map file.  I am also using map server.  I dont know if proj-4.4.9 is install right and working.  here is my map file code

#This is Richland County Map Server
NAME "Richland"
SIZE 309 417
UNITS DD
IMAGECOLOR 189 202 222
IMAGETYPE JPEG
PROJECTION "init=epsg:26914"
END
SHAPEPATH "/home/mapdata/"
EXTENT     -97.338391 45.907505 -96.508389 46.717217  
#################################### 
# Symbol for drawing fat lines
#
SYMBOL
     NAME "BigLine"
     TYPE ELLIPSE
     POINTS 1 1 END
END

##################################### 
# Symbol for drawing dashed lines
#
SYMBOL
     NAME "DashedLine"
     TYPE ELLIPSE
     POINTS 1 1 END
     STYLE 10 10 END   
END

##################################### 
# Symbol for drawing spots
#
SYMBOL
     NAME "Circle"
     FILLED true
     TYPE ellipse
     POINTS 1 1 END
END

##################################### 
# Web object
#
WEB
  TEMPLATE '/var/www/htdocs/gismapserver_test_project_mod.html'
  IMAGEPATH '/var/www/htdocs/tmp/'
  IMAGEURL '/tmp/'
END

##################################### 
# Reference map
#
REFERENCE
     IMAGE "/home/mapdata/richland.gif"
     SIZE 136 152
     EXTENT -97.228391 45.907505 -96.628389 46.717217
     STATUS ON
     COLOR -1 -1 -1
     OUTLINECOLOR 0 0 0
END

#####################################  
# Scalebar
#
SCALEBAR
     LABEL
          COLOR 0 0 0 
          ANTIALIAS true
          SIZE small
     END
     POSITION lr
     INTERVALS 5
     STATUS embed
     SIZE 175 5
     STYLE 0
     UNITS miles
     BACKGROUNDCOLOR 0 255 0
     IMAGECOLOR 255 255 255
     COLOR 128 128 128     
     OUTLINECOLOR 0 0 255
     TRANSPARENT off
END
##################################### 
LAYER
    NAME "richland"
    STATUS default
    TYPE polygon
    DATA "RICH_bndy"
    PROJECTION "init=epsg:26914"
    END
    CLASS
      STYLE
            COLOR 255 0 0
      END
   END
END
##################################### 
LAYER
    NAME "boundary"
    STATUS on
    TYPE line
    DATA "RC_boundary_05"
    CLASS
      STYLE
            COLOR 0 0 0
      END
   END
END
##################################### 
LAYER
    NAME "roads"
    STATUS on
    TYPE line
    DATA "roads_shp"
    CLASS
      STYLE
            COLOR 255 0 0
      END
   END
END
##################################### 
LAYER
    NAME "sections"
    STATUS on
    TYPE line
    DATA "RC_sections_05"
    CLASS
      STYLE
            COLOR 255 130 171
      END
   END
END
##################################### 
LAYER
    NAME "parecles"
    STATUS on
    TYPE line
    DATA "RC_parcels_05"
    CLASS
      STYLE
            COLOR 0 0 0
      END
   END
END
END

So what would be my first step to this problem.  I am not getting the projective file showning up.

Thanks,
Albert

 		
---------------------------------
Yahoo! Messenger with Voice. Make PC-to-Phone Calls to the US (and 30+ countries) for 2¢/min or less.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060714/5fafcb79/attachment.html>

From ollerery at engr.orst.edu  Fri Jul 14 15:56:41 2006
From: ollerery at engr.orst.edu (Ryan Ollerenshaw)
Date: Fri, 14 Jul 2006 15:56:41 -0700
Subject: [Proj] Map Re-projections
Message-ID: <1152917801.44b82129b81ac@webmail.oregonstate.edu>

When using proj4 with MapServer i am having a problem reprojecting some of my
raster datasets.

Some of the datasets have a prime meridian at 0 degress and others that have a
prime meridian at 90 degrees and i need these raster datasets to line up. but
when i specify a map projection as:

PROJECTION
  "proj=cc"
  "lon_0=90w"
  "ellps=WGS84"
  "datum=WGS84"
END

and a layer projection as:

PROJECTION
  "proj=cc"
  "lon_0=0"
  "ellps=WGS84"
  "datum=WGS84"
END

Rather then the layer geting reprojected to the map projection I get a blank
image.  I do however get a different map image of i just change the projection
name of the map file to some like: lcc or merc.  But why am i getting a blank
image when i try to shift the prime meridian?

Thank you for any help you can provide,
-Ryan


From wynand at kreon.co.za  Mon Jul 17 09:09:01 2006
From: wynand at kreon.co.za (Wynand Kruger)
Date: Mon, 17 Jul 2006 18:09:01 +0200
Subject: [Proj] First attempt of porting PROJ.4 to Windows CE
Message-ID: <00bf01c6a9bb$528feba0$1600a8c0@wynand>

Hi Mateusz ,
 
I have read your comments on porting the PROJ.4 files to Windows CE.  Will
you be willing to share your project with us?  This will greatly reduce our
development time on this side.
 
Regards
Wynand
Kreon Technology (Pty) Ltd
www.kreon.co.za
 

-- 
This message was scanned for viruses by MailScanner and Sophos.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060717/894b769d/attachment.html>

From wynand at kreon.co.za  Mon Jul 17 09:11:32 2006
From: wynand at kreon.co.za (Wynand Kruger)
Date: Mon, 17 Jul 2006 18:11:32 +0200
Subject: FW: [Proj] First attempt of porting PROJ.4 to Windows CE
Message-ID: <00c401c6a9bb$ac59c2a0$1600a8c0@wynand>

Where can we find 'proj4-wince-port.zip'? 
 


  _____  

From: Wynand Kruger [mailto:wynand at kreon.co.za] 
Sent: 17 July 2006 06:09 PM
To: 'proj at lists.maptools.org'
Cc: 'Leon van Tonder'
Subject: [Proj] First attempt of porting PROJ.4 to Windows CE


Hi Mateusz ,
 
I have read your comments on porting the PROJ.4 files to Windows CE.  Will
you be willing to share your project with us?  This will greatly reduce our
development time on this side.
 
Regards
Wynand
Kreon Technology (Pty) Ltd
www.kreon.co.za
 

-- 
This message was scanned for viruses by MailScanner and Sophos.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060717/e5de5c22/attachment.html>

From mateusz at loskot.net  Tue Jul 18 03:54:56 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 18 Jul 2006 12:54:56 +0200
Subject: [Proj] First attempt of porting PROJ.4 to Windows CE
In-Reply-To: <00bf01c6a9bb$528feba0$1600a8c0@wynand>
References: <00bf01c6a9bb$528feba0$1600a8c0@wynand>
Message-ID: <44BCBE00.4060806@loskot.net>

Wynand Kruger wrote:
> Hi Mateusz ,
> 
> I have read your comments on porting the PROJ.4 files to Windows CE.
>  Will you be willing to share your project with us?  This will
> greatly reduce our development time on this side.

Hi Wynand,

I'm very happy there is someone interested in using PROJ.4 on the
Windows CE platform. May be this is a chance to keep it well tested and
up to date ;-)


Here I put small website about the Windows CE port of PROJ.4:

http://mateusz.loskot.net/projects/proj4/

There is small explanation of what is this exactly
+ you can download my working copy with Windows CE related changes
+ eVC++ 4.0 projects/workspace.

Note, that there is also "wcelibcex" project included.
This is my project with missing components of C Library on Windows CE
like time functions, mkdir, rmdir, stat, etc.

The "wcelibcex" is also used in OGR port for Windows CE (see
http://www.gdal.org/wince.html)

I'm going to put "wcelibcex" to the SourceForge.net soon:

http://sourceforge.net/projects/wcelibcex

So, you may ba also interested in this project, it may be helpful in
porting other projects to Windows CE.

I'm looking forward your comments

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net


From ollerery at engr.orst.edu  Tue Jul 18 08:02:55 2006
From: ollerery at engr.orst.edu (Ryan Ollerenshaw)
Date: Tue, 18 Jul 2006 08:02:55 -0700
Subject: [Proj] Proj.4 and PHP 
In-Reply-To: <44BCBE00.4060806@loskot.net>
References: <00bf01c6a9bb$528feba0$1600a8c0@wynand>
	<44BCBE00.4060806@loskot.net>
Message-ID: <1153234975.44bcf81f98245@webmail.oregonstate.edu>

I installed MapServer with proj4 but i am getting the following error:

Warning: [MapServer Error]: loadProjection(): Projection support is not
available. in /usr/local/mapserver/htdocs/simplemap.phtml on line 5

Any help with this would be great:

PHP code:
<?
dl("php_mapscript.so");

$map_file="./usa1.map";
$map1 = ms_newMapObj($map_file); //this is line 5
?>

Mapfile:

MAP
    NAME USA1
    STATUS ON
    SIZE 800 500
    IMAGETYPE PNG
    IMAGECOLOR 240 240 240
    SHAPEPATH "../mars_data/"
    EXTENT -8000000 300000 5000000 1500000
    UNITS METERS

  PROJECTION
        "proj=lcc"
        "lat_1=32"
        "lat_2=44"
        "lat_0=38"
        "lon_0=-100" "x_0=0" "y_0=0"
        "ellps=GRS80" "datum=NAD83"
    END

    WEB
         IMAGEPATH "/tmp/ms_tmp/"
         IMAGEURL "/ms_tmp/"
    END

        LAYER
                NAME "US state boundaries"
                TYPE POLYGON
                STATUS ON
                DATA "statesp020"
                PROJECTION
                        "proj=latlong"
                        "ellps=GRS80"
                        "datum=NAD83"
                END
                CLASS
                        NAME "US states"
                        OUTLINECOLOR 60 60 60
                        COLOR 255 255 0
                        SYMBOL 0
                END
        END
END


From ollerery at engr.orst.edu  Tue Jul 18 08:51:37 2006
From: ollerery at engr.orst.edu (Ryan Ollerenshaw)
Date: Tue, 18 Jul 2006 08:51:37 -0700
Subject: [Proj] Proj.4 and PHP 
In-Reply-To: <1153234975.44bcf81f98245@webmail.oregonstate.edu>
References: <00bf01c6a9bb$528feba0$1600a8c0@wynand>
	<44BCBE00.4060806@loskot.net>
	<1153234975.44bcf81f98245@webmail.oregonstate.edu>
Message-ID: <1153237897.44bd0389e30c2@webmail.oregonstate.edu>

When using PHP with mapserver i am getting the following error:

Fatal error: setProjection() available only with PROJ.4 support. in
/usr/local/mapserver/htdocs/simplemap.phtml on line 23

//here is line 23
$map1->setProjection("proj=latlong",MS_TRUE);

I built MapServer using the --with-proj=/usr/local and i can change my
projections in the map file itself but when i try to do it with PHP i get the
above error.  Any help would be great. I am loading php_mapscript.so in my php
file is there another library out there i should be using? i havent seen any
docs saying anything about a proj.4 library.



From Maxc at spicergroup.com  Thu Jul 20 07:23:22 2006
From: Maxc at spicergroup.com (Clever, Max)
Date: Thu, 20 Jul 2006 10:23:22 -0400
Subject: [Proj] Michigan Georef projection support?
Message-ID: <B5DFCBECD06C8246A4B1279EC6487B740292E386@sag-x225-exchg0.spicergroup.com>

Hello Proj Developers,

 

I've read a few posts and it looks like Gerald has already developed support for RSO's.  In the previous emails shown below, I have code written for Hotine Oblique Mercators that uses the Michigan Georef Parameters.  Hopefully the code you have written is more accurate.  I could not get the Northing accurate enough.  If you want the parameters for Michigan Georef they are available online if you google "Michigan Georef Projection".  This projection is very important for any Michigan Proj users since most freely available data is provided in Michigan Georef.  I think the last time I saw it in a proj format it was listed as a regular omerc which is not correct even though many sites describe it that way.  

 

Anyhow, I was just wondering what the status was on the development of this projection

 

-Max Clever

 

 

 

 

 

----------------------------------------------------------------------------------------

Max,

 

OK, well implementing new projection methods is definately Gerald's area, not mine.  So if you can interest him in it, then things should

be good.   I just not competent to do it.

 

Best regards,

-- 

---------------------------------------+--------------------------------

---------------------------------------+------

I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com

light and sound - activate the windows | http://pobox.com/~warmerdam

and watch the world go round - Rush    | President OSGF, http://osgeo.org

 

-----Original Message-----
From: Clever, Max 
Sent: Tuesday, July 18, 2006 9:26 AM
To: 'Frank Warmerdam'
Cc: MAPSERVER-USERS at LISTS.UMN.EDU
Subject: RE: [UMN_MAPSERVER-USERS] FW: Michigan Georef Projection Problems in Proj4

 

Frank,

 

First, to answer your question, the parameters Melita offered are not accurate enough and are not the true parameters of the Michigan Georef Projection.  Also, the translation from EPSG to PROJ4 is not correct.  I don't think Proj 4 supports a point azimuth method transformation for Hotine oblique Mercator (Rectified Skew Orthomorphic Projection)

 

Here is a link that contains the formulas for oblique mercator and Hotine Oblique Mercator (Michigan Georef is Hotine Oblique).

 

 http://www.posc.org/Epicentre.2_2/DataModel/ExamplesofUsage/eu_cs34i.html 

 

please note though, that in the forward case, I believe the small "v" should be computed using Log not natural log.  

 

Also, if you want it for reference, below is the code of a couple of VB forms that I wrote 3 years ago with help from my professor in college to perform the forward and reverse cases.  It is only accurate to about 7 cm in the Northing and 3 mm in the Easting when converting a point from Michigan Georef to Geographic and back.  I think there must be some lack of precision in the code that is the reason for the accuracy problem.  I hope this helps.

 

 

Const a = 6378137                         ' semi major axis of the GRS80 ellipsoid

Const e2 = 0.0066943800229                ' eccentricity^2 of the GRS80 ellipsoid

Dim Pi As Double

Dim E As Double                           ' excentricity of the GRS80 ellipsoid 

 

Public Function G2GREF(CoordIN() As Double) As Double()

    Dim M1 As Double ' Paramter

    Dim m2 As Double ' Paramter

    Dim t1 As Double ' Paramter

    Dim t2 As Double ' Paramter

    Dim t0 As Double ' Paramter 

    Dim n As Double ' Paramter

    Dim F As Double ' Paramter

    Dim Eb As Double ' Paramter

    Dim Nb As Double ' Paramter

    Dim R As Double ' Paramter

    

    MS_GeoRef = "Projection Oblique Mercator; Datum:  NAD83; Ellipsoid: GRS80 " & vbCrLf & _ 

        "Standard Units: Meters" & vbCrLf & _

        "Origin = 86° 00' 00 W and 45° 18' 33 N" & vbCrLf & _

        "Scale factor at projection's center: k= 0.9996" & vbCrLf & _ 

        "Azimuth at center of projection: 337° 15' 20" & vbCrLf & _

        "False Easting: 2546731.496, False Northing: -4354009.816"

        

    Lon1 = -86#                 ' Longitude of projection's origin: 86° 00' 00" W 

    Lon1 = Lon1 * Pi / 180#

    Lat1 = 45.30916666667       ' Latitude of projection's origin: 45° 18' 33" N

    Lat1 = Lat1 * Pi / 180#

    Az = 337.255555555556       ' Azimuth at center of projection: 337° 15' 20 

    Az = Az * Pi / 180#

    SF = 0.9996                 ' Scale factor at projection's center

    Eb = 2546731.496            ' False Easting ( Eb = 528600.24)

    Nb = -4354009.816           ' False Northing (Nb = 499839.834)

    

    B = Sqr(1 + e2 * Cos(Lat1) ^ 4 / (1 - e2))

    A1 = a * B * SF * Sqr(1 - e2) / (1 - e2 * (Sin(Lat1) ^ 2))

    Temp = ((1 - E * Sin(Lat1)) / (1 + E * Sin(Lat1))) ^ (0.5 * E)

    t0 = Tan(Pi / 4 - (Lat1) / 2) / Temp 

    D = B * Sqr(1 - e2) / (Cos(Lat1) * Sqr(1 - e2 * Sin(Lat1) ^ 2))

    F = D + Lat1 / Abs(Lat1) * Sqr(D ^ 2 - 1)       ' Eq. 4.110

    E1 = F * t0 ^ B                                 ' Eq. 4.111

    G = 0.5 * (F - 1 / F)                           ' Eq. 4.112

    Gamma0 = Isin(Sin(Az) / D)                      ' Eq. 4.113

    Lon0 = Lon1 - Isin(G * Tan(Gamma0)) / B  ' Lambda 0 at Eq. 4.114

    U0 = (Lat1 / Abs(Lat1)) * (A1 / B) * Atn(Sqr(D ^ 2 - 1) / Cos(Az))

    V0 = 0

    

    LatIN = DMS2R(CoordIN(1))

    LonIN = DMS2R(CoordIN(2))

    

    Temp = ((1 - E * Sin(LatIN)) / (1 + E * Sin(LatIN))) ^ (0.5 * E)

    t = Tan(Pi / 4 - (LatIN) / 2) / Temp            ' Eq. 4.117

    Q = E1 / (t ^ B)

    S = 0.5 * (Q - 1 / Q)

    Tc1 = 0.5 * (Q + 1 / Q)

    V1 = Sin(B * (LonIN - Lon0))

    U1 = (-V1 * Cos(Gamma0) + S * Sin(Gamma0)) / Tc1

    vl = A1 * Log((1 - U1) / (1 + U1)) / (2 * B) 

    temp1 = (S * Cos(Gamma0) + V1 * Sin(Gamma0)) / Cos(B * (LonIN - Lon0))

    ul = (A1 / B) * Atn(temp1)

    x = vl * Cos(Az) + ul * Sin(Az) + Eb

    y = ul * Cos(Az) - vl * Sin(Az) + Nb

    

    ReDim Preserve CTemp(1 To 2) As Double 

    

    CTemp(1) = x

    CTemp(2) = y

    G2GREF = CTemp

        

End Function

 

 

Public Function GREF2G(CoordIN() As Double) As Double()

    Dim M1 As Double ' Paramter

    Dim m2 As Double ' Paramter

    Dim t1 As Double ' Paramter

    Dim t2 As Double ' Paramter

    Dim t0 As Double ' Paramter

    Dim n As Double ' Paramter

    Dim F As Double ' Paramter 

    Dim Eb As Double ' Paramter

    Dim Nb As Double ' Paramter

    Dim PhiOut As Double ' Paramter

    Dim LonOut As Double ' Paramter

    

    MS_GeoRef = "Projection Oblique Mercator; Datum:  NAD83; Ellipsoid: GRS80 " & vbCrLf & _ 

        "Standard Units: Meters" & vbCrLf & _

        "Origin = 86° 00' 00 W and 45° 18' 33 N" & vbCrLf & _

        "Scale factor at projection's center: k= 0.9996" & vbCrLf & _ 

        "Azimuth at center of projection: 337° 15' 20" & vbCrLf & _

        "False Easting: 2546731.496, False Northing: -4354009.816"

        

    Lon1 = -86#                 ' Longitude of projection's origin: 86° 00' 00" W 

    Lon1 = Lon1 * Pi / 180#

    Lat1 = 45.309166666667       ' Latitude of projection's origin: 45° 18' 33" N

    Lat1 = Lat1 * Pi / 180#

    Az = 337.255555555556       ' Azimuth at center of projection: 337° 15' 20 

    Az = Az * Pi / 180#

    SF = 0.9996                 ' Scale factor at projection's center

    Eb = 2546731.496            ' False Easting ( Eb = 528600.24)

    Nb = -4354009.816           ' False Northing (Nb = 499839.834)

    

    

    ttemp = e2 * (Cos(Lat1) ^ 4) / (1 - e2)

    B = Sqr(1 + ttemp)

    A1 = a * B * SF * Sqr(1 - e2) / (1 - e2 * (Sin(Lat1)) ^ 2)

    Temp = ((1 - E * Sin(Lat1)) / (1 + E * Sin(Lat1))) ^ ( 0.5 * E)

    t0 = Tan(Pi / 4 - (Lat1) / 2) / Temp

    ttemp1 = Cos(Lat1) * Sqr(1 - e2 * (Sin(Lat1)) ^ 2)

    D = B * Sqr(1 - e2) / ttemp1

    

    F = D + Lat1 / Abs(Lat1) * Sqr(D ^ 2 - 1)       ' Eq. 4.110 

    E1 = F * t0 ^ B                                 ' Eq. 4.111

    G = 0.5 * (F - 1 / F)                           ' Eq. 4.112

    Gamma0 = Isin(Sin(Az) / D)                      ' Eq. 4.113

    Lon0 = Lon1 - Isin(G * Tan(Gamma0)) / B  ' Lambda 0 at Eq. 4.114

    

    xIN = CoordIN(1)

    yIN = CoordIN(2)

 

'Actual Computations for Reverse case Hotine Oblique Mercator

 

    xr = xIN - Eb

    yr = yIN - Nb

    

    vs = xr * Cos(Az) - yr * Sin(Az)

    us = yr * Cos(Az) + xr * Sin(Az)

    

    temp1 = -B * vs / A1

    Qp = (2.71828182845905) ^ temp1

    Sp = 0.5 * (Qp - 1 / Qp)

    Tp = 0.5 * (Qp + 1 / Qp)

    

    Vp = Sin(B * us / A1)

    Up = (Vp * Cos(Gamma0) + Sp * Sin(Gamma0)) / Tp

 

    temp2 = (1 + Up) / (1 - Up)

    t = (E1 / Sqr(temp2)) ^ (1 / B)

    

    PhiOut = Pi / 2 - 2 * Atn(t)

'Iterative Solution for Phi Out

'    For i = 1 To 30

'        Temp = ((1 - E * Sin(PhiOut)) / (1 + E * Sin(PhiOut))) ^ ( 0.5 * E)

'        PhiOut = Pi / 2 - 2 * Atn(t * Temp)

'    Next i

 

'Single Line Solution for Phi Out

 

    PhiOut = PhiOut + Sin(2 * PhiOut) * (e2 / 2 + (5 * e2 ^ 2) / 24 + (e2 ^ 4) / 12 + (13 * e2 ^ 6) / 360) + Sin(4 * PhiOut) * ((7 * e2 ^ 2) / 48 + (29 * e2 ^ 4) / 240 + (811 * e2 ^ 6) / 11520) + Sin(6 * PhiOut) * ((7 * e2 ^ 4) / 120 + (81 * e2 ^ 6) / 1120) + Sin(8 * PhiOut) * ((4279 * e2 ^ 6) / 161280) 

            

    temp3 = (Sp * Cos(Gamma0) - Vp * Sin(Gamma0)) / Cos(B * us / A1)

    

    LonOut = Lon0 - Atn(temp3) / B

       

    ReDim Preserve CTemp(1 To 2) As Double

    

    CTemp(1) = r2dms(PhiOut) 

    CTemp(2) = r2dms(LonOut)

    GREF2G = CTemp

End Function

 

 

 

 

 

 

-----Original Message-----

From: Frank Warmerdam [mailto:fwarmerdam at gmail.com] On Behalf Of Frank Warmerdam

Sent: Saturday, July 15, 2006 10:01 PM

To: Clever, Max

Subject: Re: [UMN_MAPSERVER-USERS] FW: Michigan Georef Projection Problems in Proj4

 

Clever, Max wrote:

> Hi,

> 

>  

> 

> Did anyone see this the last time I sent it?  It relates to Mapserver as 

> well since Mapserver uses Proj4 for its projections. 

 

Max,

 

I have skimmed this material, but frankly I'm not sure what action item

there is, and I find myself with limited time for work on PROJ.4.

 

Is the problem that the parameters Melita offered a couple years ago

aren't accurate enough?  Or that the underlying translation from EPSG

to PROJ.4 wasn't fixed so the epsg file keeps getting regenerated

wrong?  If it is a tranlation problem, then that is basically something

I ought to fix.  But I basically need some formulation to recognise

a distinct oblique mercator case for the michigan projection from the

EPSG codes (or parameters), and what that should map to in WKT format,

and in PROJ.4 format.  I'm happy to use the ESRI WKT representation if

there isn't an obvious existing form for this special case.

 

If you can walk me through what should be changed, I'm willing to work

on it.

 

Best regards,

...

> Two years ago, I ran into a problem with the Michigan Georef Projection 

> and the way that proj identified it.  I had sent emails back and forth 

> for a while until someone sent a temporary solution of providing false 

> parameters that worked.. *for the most part*.  This temporary solution, 

> of course, did not actually solve the problem, but instead delayed the 

> fixing of the methods that proj identifies projections and translates 

> them.  For that I am sorry for not remaining vigilant in seeing a true 

> solution being devised.  But now, since I have just now installed the 

> latest version of GRASS 6.1, I have come full circle and face this 

> problem again.  To provide a quick access to the background of what has 

> already been said on this projection please note the previous emails 

> below.  I believe, at this time still, that the *omerc* projection and 

> its parameters as used by proj cannot correctly describe or transform a 

> omerc projection with a "natural origin".  From what I understand, 

> Hotine oblique mercator and Rectified Skew Orthomorphic are one and the 

> same or depend on where the skew is corrected.  Has there been a 

> solution determined for this projection?  If not, maybe a solution to 

> this problem would be to have Proj have oblique mercators split between 

> "natural origins" and cartesian center point origins.  I hope, maybe, 

> someone has been looking at this lately but I doubt it.  Any comments or 

> solutions would be very welcome.  Thanks.

 

 

-- 

---------------------------------------+--------------------------------------

I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com

light and sound - activate the windows | http://pobox.com/~warmerdam

and watch the world go round - Rush    | President OSGF, http://osgeo.org

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060720/850d84aa/attachment.html>

From mkennedy2 at earthlink.net  Fri Jul 21 14:30:26 2006
From: mkennedy2 at earthlink.net (Melita Kennedy)
Date: Fri, 21 Jul 2006 14:30:26 -0700 (GMT-07:00)
Subject: [Proj] Re: Michigan GeoRef
Message-ID: <4898027.1153517426540.JavaMail.root@elwamui-karabash.atl.sa.earthlink.net>

Michigan GeoRef uses the same projection as State Plane Alaska zone 1. 
I don't know which projection this is in PROJ. We shouldn't need to implement 
another implementation of Hotine oblique Mercator to support Michigan GeoRef.

These are the official parameters from the Michigan DNR:

Projection: Oblique Mercator
Datum: NAD83
Ellipsoid: GRS80
Standard Units: Meters
Scale factor at projection's center: 0.9996
Longitude of projection's origin: 86° 00' 00" W
Latitude of projection's origin: 45° 18' 33" N
Azimuth at center of projection: 337.25556
False Easting: 2546731.496
False Northing: -4354009.816

Please note the azimuth value. The value in decimal degrees is not equal to the original
definition of 337d 15m 20s. Michigan GeoRef was originally defined to work with ArcInfo 
workstation which had a limitation in how many decimal places were allowed in the azimuth 
parameter. We've changed the ArcGIS version of the definition to match this--when we 
added the definition to the projection engine library, we used the DMS value--because 
Michigan clients were complaining that data wasn't lining up properly.

Melita

-- 
Melita Kennedy
ESRI Product Specialist
mkennedy at esri.com (but posting from mkennedy2 at earthlink.net)

-----Original Message-----
>Date: Thu, 20 Jul 2006 10:23:22 -0400
>From: "Clever, Max" <Maxc at spicergroup.com>
>Subject: [Proj] Michigan Georef projection support?
>To: <proj at lists.maptools.org>
>
>Hello Proj Developers,
>
>I've read a few posts and it looks like Gerald has already developed support for RSO's.  In the previous emails shown below, I have code written for Hotine Oblique Mercators that uses the Michigan Georef Parameters.  Hopefully the code you have written is more accurate.  I could not get the Northing accurate enough.  If you want the parameters for Michigan Georef they are available online if you google "Michigan Georef Projection".  This projection is very important for any Michigan Proj users since most freely available data is provided in Michigan Georef.  I think the last time I saw it in a proj format it was listed as a regular omerc which is not correct even though many sites describe it that way.  
>
>Anyhow, I was just wondering what the status was on the development of this projection
>
>-Max Clever




From Maxc at spicergroup.com  Fri Jul 21 20:19:01 2006
From: Maxc at spicergroup.com (Clever, Max)
Date: Fri, 21 Jul 2006 23:19:01 -0400
Subject: [Proj] Michigan Georef Projection Problems
Message-ID: <B5DFCBECD06C8246A4B1279EC6487B740837CE@sag-x225-exchg0.spicergroup.com>

>From reading the previous posts on proj's support for RSO's it sounds like it is already in the works.  Just to make sure though, I just want to let everyone know that the Michigan Georef Projection is not supported by proj.  The only proj definition that I have seen for it is the one described under the ESRI listing that describes it as an <omerc> which is not really correct.  
 
Michigan Georef is a Hotine Oblique Mercator.  The official parameters are listed at this website http://www.michigan.gov/documents/DNR_Map_Proj_and_MI_Georef_Info_20889_7.pdf  The parameters as given at this site require the computation of gamma, hopefully that helps you figure out whether to have gamma as a mandatory or optional parameter requirement.
 
I appreciate any help that could be given.  Please see the history of emails below for reference to this problem.  Thanks.
 
-Max
 
 
Frank,

First, to answer your question, the parameters Melita offered are not accurate enough and are not the true parameters of the Michigan Georef Projection.  Also, the translation from EPSG to PROJ4 is not correct.  I don't think Proj 4 supports a point azimuth method transformation for Hotine oblique Mercator (Rectified Skew Orthomorphic Projection)

Here is a link that contains the formulas for oblique mercator and Hotine Oblique Mercator (Michigan Georef is Hotine Oblique).

 http://www.posc.org/Epicentre.2_2/DataModel/ExamplesofUsage/eu_cs34i.html <http://www.posc.org/Epicentre.2_2/DataModel/ExamplesofUsage/eu_cs34i.html> 

please note though, that in the forward case, I believe the small "v" should be computed using Log not natural log. 

Also, if you want it for reference, below is the code of a couple of VB forms that I wrote 3 years ago with help from my professor in college to perform the forward and reverse cases.  It is only accurate to about 7 cm in the Northing and 3 mm in the Easting when converting a point from Michigan Georef to Geographic and back.  I think there must be some lack of precision in the code that is the reason for the accuracy problem.  I hope this helps.


Const a = 6378137                         ' semi major axis of the GRS80 ellipsoid
Const e2 = 0.0066943800229          ' excentricity^2 of the GRS80 ellipsoid
Dim Pi As Double
Dim E As Double                            ' excentricity of the GRS80 ellipsoid

Public Function G2GREF(CoordIN() As Double) As Double()
    Dim M1 As Double ' Paramter
    Dim m2 As Double ' Paramter
    Dim t1 As Double ' Paramter
    Dim t2 As Double ' Paramter
    Dim t0 As Double ' Paramter
    Dim n As Double ' Paramter
    Dim F As Double ' Paramter
    Dim Eb As Double ' Paramter
    Dim Nb As Double ' Paramter
    Dim R As Double ' Paramter
   
    MS_GeoRef = "Projection Oblique Mercator; Datum:  NAD83; Ellipsoid: GRS80 " & vbCrLf & _
        "Standard Units: Meters" & vbCrLf & _
        "Origin = 86° 00' 00 W and 45° 18' 33 N" & vbCrLf & _
        "Scale factor at projection's center: k= 0.9996" & vbCrLf & _
        "Azimuth at center of projection: 337° 15' 20" & vbCrLf & _
        "False Easting: 2546731.496, False Northing: -4354009.816"
       
    Lon1 = -86#                 ' Longitude of projection's origin: 86° 00' 00" W
    Lon1 = Lon1 * Pi / 180#
    Lat1 = 45.30916666667       ' Latitude of projection's origin: 45° 18' 33" N
    Lat1 = Lat1 * Pi / 180#
    Az = 337.255555555556       ' Azimuth at center of projection: 337° 15' 20
    Az = Az * Pi / 180#
    SF = 0.9996                 ' Scale factor at projection's center
    Eb = 2546731.496            ' False Easting ( Eb = 528600.24)
    Nb = -4354009.816           ' False Northing (Nb = 499839.834)
   
    B = Sqr(1 + e2 * Cos(Lat1) ^ 4 / (1 - e2))
    A1 = a * B * SF * Sqr(1 - e2) / (1 - e2 * (Sin(Lat1) ^ 2))
    Temp = ((1 - E * Sin(Lat1)) / (1 + E * Sin(Lat1))) ^ (0.5 * E)
    t0 = Tan(Pi / 4 - (Lat1) / 2) / Temp
    D = B * Sqr(1 - e2) / (Cos(Lat1) * Sqr(1 - e2 * Sin(Lat1) ^ 2))
    F = D + Lat1 / Abs(Lat1) * Sqr(D ^ 2 - 1)       ' Eq. 4.110
    E1 = F * t0 ^ B                                 ' Eq. 4.111
    G = 0.5 * (F - 1 / F)                           ' Eq. 4.112
    Gamma0 = Isin(Sin(Az) / D)                      ' Eq. 4.113
    Lon0 = Lon1 - Isin(G * Tan(Gamma0)) / B  ' Lambda 0 at Eq. 4.114
    U0 = (Lat1 / Abs(Lat1)) * (A1 / B) * Atn(Sqr(D ^ 2 - 1) / Cos(Az))
    V0 = 0
   
    LatIN = DMS2R(CoordIN(1))
    LonIN = DMS2R(CoordIN(2))
   
    Temp = ((1 - E * Sin(LatIN)) / (1 + E * Sin(LatIN))) ^ (0.5 * E)
    t = Tan(Pi / 4 - (LatIN) / 2) / Temp            ' Eq. 4.117
    Q = E1 / (t ^ B)
    S = 0.5 * (Q - 1 / Q)
    Tc1 = 0.5 * (Q + 1 / Q)
    V1 = Sin(B * (LonIN - Lon0))
    U1 = (-V1 * Cos(Gamma0) + S * Sin(Gamma0)) / Tc1
    vl = A1 * Log((1 - U1) / (1 + U1)) / (2 * B)
    temp1 = (S * Cos(Gamma0) + V1 * Sin(Gamma0)) / Cos(B * (LonIN - Lon0))
    ul = (A1 / B) * Atn(temp1)
    x = vl * Cos(Az) + ul * Sin(Az) + Eb
    y = ul * Cos(Az) - vl * Sin(Az) + Nb
   
    ReDim Preserve CTemp(1 To 2) As Double
   
    CTemp(1) = x
    CTemp(2) = y
    G2GREF = CTemp
       
End Function


Public Function GREF2G(CoordIN() As Double) As Double()
    Dim M1 As Double ' Paramter
    Dim m2 As Double ' Paramter
    Dim t1 As Double ' Paramter
    Dim t2 As Double ' Paramter
    Dim t0 As Double ' Paramter
    Dim n As Double ' Paramter
    Dim F As Double ' Paramter
    Dim Eb As Double ' Paramter
    Dim Nb As Double ' Paramter
    Dim PhiOut As Double ' Paramter
    Dim LonOut As Double ' Paramter
   
    MS_GeoRef = "Projection Oblique Mercator; Datum:  NAD83; Ellipsoid: GRS80 " & vbCrLf & _
        "Standard Units: Meters" & vbCrLf & _
        "Origin = 86° 00' 00 W and 45° 18' 33 N" & vbCrLf & _
        "Scale factor at projection's center: k= 0.9996" & vbCrLf & _
        "Azimuth at center of projection: 337° 15' 20" & vbCrLf & _
        "False Easting: 2546731.496, False Northing: -4354009.816"
       
    Lon1 = -86#                 ' Longitude of projection's origin: 86° 00' 00" W
    Lon1 = Lon1 * Pi / 180#
    Lat1 = 45.309166666667       ' Latitude of projection's origin: 45° 18' 33" N
    Lat1 = Lat1 * Pi / 180#
    Az = 337.255555555556       ' Azimuth at center of projection: 337° 15' 20
    Az = Az * Pi / 180#
    SF = 0.9996                 ' Scale factor at projection's center
    Eb = 2546731.496            ' False Easting ( Eb = 528600.24)
    Nb = -4354009.816           ' False Northing (Nb = 499839.834)
   
   
    ttemp = e2 * (Cos(Lat1) ^ 4) / (1 - e2)
    B = Sqr(1 + ttemp)
    A1 = a * B * SF * Sqr(1 - e2) / (1 - e2 * (Sin(Lat1)) ^ 2)
    Temp = ((1 - E * Sin(Lat1)) / (1 + E * Sin(Lat1))) ^ ( 0.5 * E)
    t0 = Tan(Pi / 4 - (Lat1) / 2) / Temp
    ttemp1 = Cos(Lat1) * Sqr(1 - e2 * (Sin(Lat1)) ^ 2)
    D = B * Sqr(1 - e2) / ttemp1
   
    F = D + Lat1 / Abs(Lat1) * Sqr(D ^ 2 - 1)       ' Eq. 4.110
    E1 = F * t0 ^ B                                 ' Eq. 4.111
    G = 0.5 * (F - 1 / F)                           ' Eq. 4.112
    Gamma0 = Isin(Sin(Az) / D)                      ' Eq. 4.113
    Lon0 = Lon1 - Isin(G * Tan(Gamma0)) / B  ' Lambda 0 at Eq. 4.114
   
    xIN = CoordIN(1)
    yIN = CoordIN(2)

'Actual Computations for Reverse case Hotine Oblique Mercator

    xr = xIN - Eb
    yr = yIN - Nb
   
    vs = xr * Cos(Az) - yr * Sin(Az)
    us = yr * Cos(Az) + xr * Sin(Az)
   
    temp1 = -B * vs / A1
    Qp = (2.71828182845905) ^ temp1
    Sp = 0.5 * (Qp - 1 / Qp)
    Tp = 0.5 * (Qp + 1 / Qp)
   
    Vp = Sin(B * us / A1)
    Up = (Vp * Cos(Gamma0) + Sp * Sin(Gamma0)) / Tp

    temp2 = (1 + Up) / (1 - Up)
    t = (E1 / Sqr(temp2)) ^ (1 / B)
   
    PhiOut = Pi / 2 - 2 * Atn(t)
'Iterative Solution for Phi Out
'    For i = 1 To 30
'        Temp = ((1 - E * Sin(PhiOut)) / (1 + E * Sin(PhiOut))) ^ ( 0.5 * E)
'        PhiOut = Pi / 2 - 2 * Atn(t * Temp)
'    Next i

'Single Line Solution for Phi Out

    PhiOut = PhiOut + Sin(2 * PhiOut) * (e2 / 2 + (5 * e2 ^ 2) / 24 + (e2 ^ 4) / 12 + (13 * e2 ^ 6) / 360) + Sin(4 * PhiOut) * ((7 * e2 ^ 2) / 48 + (29 * e2 ^ 4) / 240 + (811 * e2 ^ 6) / 11520) + Sin(6 * PhiOut) * ((7 * e2 ^ 4) / 120 + (81 * e2 ^ 6) / 1120) + Sin(8 * PhiOut) * ((4279 * e2 ^ 6) / 161280)
           
    temp3 = (Sp * Cos(Gamma0) - Vp * Sin(Gamma0)) / Cos(B * us / A1)
   
    LonOut = Lon0 - Atn(temp3) / B
      
    ReDim Preserve CTemp(1 To 2) As Double
   
    CTemp(1) = r2dms(PhiOut)
    CTemp(2) = r2dms(LonOut)
    GREF2G = CTemp
End Function






-----Original Message-----
From: Frank Warmerdam [mailto:fwarmerdam at gmail.com <mailto:fwarmerdam at gmail.com> ] On Behalf Of Frank Warmerdam
Sent: Saturday, July 15, 2006 10:01 PM
To: Clever, Max
Subject: Re: [UMN_MAPSERVER-USERS] FW: Michigan Georef Projection Problems in Proj4

Clever, Max wrote:
> Hi,
>
> 
>
> Did anyone see this the last time I sent it?  It relates to Mapserver as
> well since Mapserver uses Proj4 for its projections.

Max,

I have skimmed this material, but frankly I'm not sure what action item
there is, and I find myself with limited time for work on PROJ.4.

Is the problem that the parameters Melita offered a couple years ago
aren't accurate enough?  Or that the underlying translation from EPSG
to PROJ.4 wasn't fixed so the epsg file keeps getting regenerated
wrong?  If it is a tranlation problem, then that is basically something
I ought to fix.  But I basically need some formulation to recognise
a distinct oblique mercator case for the michigan projection from the
EPSG codes (or parameters), and what that should map to in WKT format,
and in PROJ.4 format.  I'm happy to use the ESRI WKT representation if
there isn't an obvious existing form for this special case.

If you can walk me through what should be changed, I'm willing to work
on it.

Best regards,
...
> Two years ago, I ran into a problem with the Michigan Georef Projection
> and the way that proj identified it.  I had sent emails back and forth
> for a while until someone sent a temporary solution of providing false
> parameters that worked.. *for the most part*.  This temporary solution,
> of course, did not actually solve the problem, but instead delayed the
> fixing of the methods that proj identifies projections and translates
> them.  For that I am sorry for not remaining vigilant in seeing a true
> solution being devised.  But now, since I have just now installed the
> latest version of GRASS 6.1, I have come full circle and face this
> problem again.  To provide a quick access to the background of what has
> already been said on this projection please note the previous emails
> below.  I believe, at this time still, that the *omerc* projection and
> its parameters as used by proj cannot correctly describe or transform a
> omerc projection with a "natural origin".  From what I understand,
> Hotine oblique mercator and Rectified Skew Orthomorphic are one and the
> same or depend on where the skew is corrected.  Has there been a
> solution determined for this projection?  If not, maybe a solution to
> this problem would be to have Proj have oblique mercators split between
> "natural origins" and cartesian center point origins.  I hope, maybe,
> someone has been looking at this lately but I doubt it.  Any comments or
> solutions would be very welcome.  Thanks.


--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam <http://pobox.com/~warmerdam> 
and watch the world go round - Rush    | President OSGF, http://osgeo.org <http://osgeo.org> 




From mateusz at loskot.net  Sat Jul 22 04:22:24 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat, 22 Jul 2006 13:22:24 +0200
Subject: FW: [Proj] First attempt of porting PROJ.4 to Windows CE
In-Reply-To: <00c401c6a9bb$ac59c2a0$1600a8c0@wynand>
References: <00c401c6a9bb$ac59c2a0$1600a8c0@wynand>
Message-ID: <44C20A70.2020600@loskot.net>

Wynand Kruger wrote:
> Where can we find 'proj4-wince-port.zip'?

Hi Wynand,

I replied to your first e-mail in you're asking about it.
Please, take a look at:
http://lists.maptools.org/pipermail/proj/2006-July/002406.html

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net


From mfinn at usgs.gov  Sat Jul 22 08:01:25 2006
From: mfinn at usgs.gov (Michael P Finn)
Date: Sat, 22 Jul 2006 10:01:25 -0500
Subject: [Proj] Michael P Finn of the USGS/ National Geospatial Technical
 Operations Center is out of the office.
Message-ID: <OFDAAE9684.8189DBFE-ON862571B3.005286F5-862571B3.005286F5@usgs.gov>


I will be out of the office starting  07/22/2006 and will not return until
07/31/2006.

I will be unable to check e-mail regularly while I am out. If I can't
respond to your message while I am out, then I will when I return. If you
have anything that cannot wait, please contact my colleague, Mr. Timothy
Krupinski, at tkrupinski at usgs.gov.     Mike



From ovv at hetnet.nl  Sun Jul 23 07:29:02 2006
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Sun, 23 Jul 2006 16:29:02 +0200
Subject: [Proj] Michigan Georef projection support?
In-Reply-To: <B5DFCBECD06C8246A4B1279EC6487B740292E386@sag-x225-exchg0.spicergroup.com>
Message-ID: <C0E9544E.7813%ovv@hetnet.nl>

From: "Clever, Max" <Maxc-spicergroup.com>
Date: Thu, 20 Jul 2006 10:23:22 -0400
Subject: [Proj] Michigan Georef projection support?

> I've read a few posts and it looks like Gerald has already developed support
> for RSO's.  In the previous emails shown below, I have code written for Hotine
> Oblique Mercators that uses the Michigan Georef Parameters. Hopefully the code
> you have written is more accurate.  I could not get the Northing accurate
> enough.  If you want the parameters for Michigan Georef they are available
> online if you google "Michigan Georef Projection".

I still haven't seen any (near) official test points (lat,lon to x,y) for
Michigan GeoRef. Not in the maptools postings, not on the internet.
If nobody will produce some serious test points, no problem can be
diagnosed.

The test points M. Kennedy gave on 2004-12-20 in a posting can be understood
as follows.
The parameters are for my code, a slightly improved version of libproj4's
omerc with additions from the EPSG/OGP Guidance Note.

lat = 43; lon = -86;
// GRS80 ellipsoid
type = 5; // Hotine-RSO according to EPSG
lat0 = 45.30916666667; // latitude of projection's origin: 45d18m33s N
lonc = -86; // longitude of projection's origin: 86d00m00s W
alfac = 337.255555555556; // azimuth at center of projection: 337d15m20s
gamma = ""; // let the code calculate gamma
k0 = 0.9996; // scale factor at projection's center
x0 = 2546731.496; // false easting
y0 = -4354009.816; // false northing
norot = 0; no_off = 0;
omerc(type,lat,lon,lat0,lonc,alfac,gamma,k0,x0,y0,norot,no_off)
Result: x,y = 499864.500077, 272108.859263

Some people get mighty nervous seeing all those decimals, but for testing
purposes they are necessary.

M. Kennedy, 2004-12-20:
"
and now the results from the ESRI Projection Engine
cymru{melita}: forward91 102123
Projection Engine Version 9.0 (Dec 15 2004)
499864.50  272108.86
"

And now for something completely different:
(only the differences with above are mentioned):

type = 1; // comparable with libproj4 omerc or the USA-type 'Hotine'
no_off = 1;
Result: 499864.500077, 272108.859263

As long as no official test points are available I would suggest:
Do the MI GeoRef with (lib)proj omerc and the no_offset flag set.






From Maxc at spicergroup.com  Sat Jul 22 23:44:49 2006
From: Maxc at spicergroup.com (Clever, Max)
Date: Sun, 23 Jul 2006 02:44:49 -0400
Subject: [Proj] Michigan Georef Projection Problems
Message-ID: <B5DFCBECD06C8246A4B1279EC6487B740837CF@sag-x225-exchg0.spicergroup.com>

Melita,
 
are you saying that since December of 2004 Proj has been corrected for the transformation of Michigan Georef?  I have downloaded what I think is the most up-to-date version of Proj4 when I installed GRASS cvs 6.1, and it still did not correctly project my data that was in Michigan Georef.  
 
Otherwise, just to refresh the subject, please read what you wrote 2 years ago on December 20th, 2004 to Gerald Evenden and others, where you basically provided manipulated parameters for the EPSG of Michigan Georef in order to make it translate to approximately the correct location.
 
Also, from what I have read in an email from Anthony Dunk dated May 18, 2006, the Alaska Zone 1, as defined in its EPSG, is not being transformed properly either.  It sounded like someone got the correct answer when they set a flag called "no_ofs".  Is this a setting that can be added to the EPSG file?  
 
-----Original Message----- 
From: proj-bounces at lists.maptools.org on behalf of proj-request at lists.maptools.org 
Sent: Sat 7/22/2006 12:00 PM 
To: proj at lists.maptools.org 
Cc: 
Subject: Proj Digest, Vol 26, Issue 13



	Send Proj mailing list submissions to
	        proj at lists.maptools.org
	
	To subscribe or unsubscribe via the World Wide Web, visit
	        http://lists.maptools.org/mailman/listinfo/proj
	or, via email, send a message with subject or body 'help' to
	        proj-request at lists.maptools.org
	
	You can reach the person managing the list at
	        proj-owner at lists.maptools.org
	
	When replying, please edit your Subject line so it is more specific
	than "Re: Contents of Proj digest..."
	
	
	Today's Topics:
	
	   1. Re: Michigan GeoRef (Melita Kennedy)
	   2. Michigan Georef Projection Problems (Clever, Max)
	   3. Re: FW: [Proj] First attempt of porting PROJ.4 to Windows CE
	      (Mateusz Loskot)
	   4. Michael P Finn of the USGS/ National Geospatial Technical
	      Operations Center is out of the office. (Michael P Finn)
	
	
	----------------------------------------------------------------------
	
	Message: 1
	Date: Fri, 21 Jul 2006 14:30:26 -0700 (GMT-07:00)
	From: Melita Kennedy <mkennedy2 at earthlink.net>
	Subject: [Proj] Re: Michigan GeoRef
	To: proj at lists.maptools.org
	Message-ID:
	        <4898027.1153517426540.JavaMail.root at elwamui-karabash.atl.sa.earthlink.net>
	       
	Content-Type: text/plain; charset=ISO-8859-1
	
	Michigan GeoRef uses the same projection as State Plane Alaska zone 1.
	I don't know which projection this is in PROJ. We shouldn't need to implement
	another implementation of Hotine oblique Mercator to support Michigan GeoRef.
	
	These are the official parameters from the Michigan DNR:
	
	Projection: Oblique Mercator
	Datum: NAD83
	Ellipsoid: GRS80
	Standard Units: Meters
	Scale factor at projection's center: 0.9996
	Longitude of projection's origin: 86° 00' 00" W
	Latitude of projection's origin: 45° 18' 33" N
	Azimuth at center of projection: 337.25556
	False Easting: 2546731.496
	False Northing: -4354009.816
	
	Please note the azimuth value. The value in decimal degrees is not equal to the original
	definition of 337d 15m 20s. Michigan GeoRef was originally defined to work with ArcInfo
	workstation which had a limitation in how many decimal places were allowed in the azimuth
	parameter. We've changed the ArcGIS version of the definition to match this--when we
	added the definition to the projection engine library, we used the DMS value--because
	Michigan clients were complaining that data wasn't lining up properly.
	
	Melita
	
	--
	Melita Kennedy
	ESRI Product Specialist
	mkennedy at esri.com (but posting from mkennedy2 at earthlink.net)
	
	-----Original Message-----
	>Date: Thu, 20 Jul 2006 10:23:22 -0400
	>From: "Clever, Max" <Maxc at spicergroup.com>
	>Subject: [Proj] Michigan Georef projection support?
	>To: <proj at lists.maptools.org>
	>
	>Hello Proj Developers,
	>
	>I've read a few posts and it looks like Gerald has already developed support for RSO's.  In the previous emails shown below, I have code written for Hotine Oblique Mercators that uses the Michigan Georef Parameters.  Hopefully the code you have written is more accurate.  I could not get the Northing accurate enough.  If you want the parameters for Michigan Georef they are available online if you google "Michigan Georef Projection".  This projection is very important for any Michigan Proj users since most freely available data is provided in Michigan Georef.  I think the last time I saw it in a proj format it was listed as a regular omerc which is not correct even though many sites describe it that way. 
	>
	>Anyhow, I was just wondering what the status was on the development of this projection
	>
	>-Max Clever
	
	
	
	
	------------------------------
	
	Message: 2
	Date: Fri, 21 Jul 2006 23:19:01 -0400
	From: "Clever, Max" <Maxc at spicergroup.com>
	Subject: [Proj] Michigan Georef Projection Problems
	To: <proj at lists.maptools.org>
	Message-ID:
	        <B5DFCBECD06C8246A4B1279EC6487B740837CE at sag-x225-exchg0.spicergroup.com>
	       
	Content-Type: text/plain;       charset="utf-8"
	
	>From reading the previous posts on proj's support for RSO's it sounds like it is already in the works.  Just to make sure though, I just want to let everyone know that the Michigan Georef Projection is not supported by proj.  The only proj definition that I have seen for it is the one described under the ESRI listing that describes it as an <omerc> which is not really correct. 
	
	Michigan Georef is a Hotine Oblique Mercator.  The official parameters are listed at this website http://www.michigan.gov/documents/DNR_Map_Proj_and_MI_Georef_Info_20889_7.pdf  The parameters as given at this site require the computation of gamma, hopefully that helps you figure out whether to have gamma as a mandatory or optional parameter requirement.
	
	I appreciate any help that could be given.  Please see the history of emails below for reference to this problem.  Thanks.
	
	-Max
	
	
	Frank,
	
	First, to answer your question, the parameters Melita offered are not accurate enough and are not the true parameters of the Michigan Georef Projection.  Also, the translation from EPSG to PROJ4 is not correct.  I don't think Proj 4 supports a point azimuth method transformation for Hotine oblique Mercator (Rectified Skew Orthomorphic Projection)
	
	Here is a link that contains the formulas for oblique mercator and Hotine Oblique Mercator (Michigan Georef is Hotine Oblique).
	
	 http://www.posc.org/Epicentre.2_2/DataModel/ExamplesofUsage/eu_cs34i.html <http://www.posc.org/Epicentre.2_2/DataModel/ExamplesofUsage/eu_cs34i.html>
	
	please note though, that in the forward case, I believe the small "v" should be computed using Log not natural log.
	
	Also, if you want it for reference, below is the code of a couple of VB forms that I wrote 3 years ago with help from my professor in college to perform the forward and reverse cases.  It is only accurate to about 7 cm in the Northing and 3 mm in the Easting when converting a point from Michigan Georef to Geographic and back.  I think there must be some lack of precision in the code that is the reason for the accuracy problem.  I hope this helps.
	
	
	Const a = 6378137                         ' semi major axis of the GRS80 ellipsoid
	Const e2 = 0.0066943800229          ' excentricity^2 of the GRS80 ellipsoid
	Dim Pi As Double
	Dim E As Double                            ' excentricity of the GRS80 ellipsoid
	
	Public Function G2GREF(CoordIN() As Double) As Double()
	    Dim M1 As Double ' Paramter
	    Dim m2 As Double ' Paramter
	    Dim t1 As Double ' Paramter
	    Dim t2 As Double ' Paramter
	    Dim t0 As Double ' Paramter
	    Dim n As Double ' Paramter
	    Dim F As Double ' Paramter
	    Dim Eb As Double ' Paramter
	    Dim Nb As Double ' Paramter
	    Dim R As Double ' Paramter
	  
	    MS_GeoRef = "Projection Oblique Mercator; Datum:  NAD83; Ellipsoid: GRS80 " & vbCrLf & _
	        "Standard Units: Meters" & vbCrLf & _
	        "Origin = 86Â° 00' 00 W and 45Â° 18' 33 N" & vbCrLf & _
	        "Scale factor at projection's center: k= 0.9996" & vbCrLf & _
	        "Azimuth at center of projection: 337Â° 15' 20" & vbCrLf & _
	        "False Easting: 2546731.496, False Northing: -4354009.816"
	      
	    Lon1 = -86#                 ' Longitude of projection's origin: 86Â° 00' 00" W
	    Lon1 = Lon1 * Pi / 180#
	    Lat1 = 45.30916666667       ' Latitude of projection's origin: 45Â° 18' 33" N
	    Lat1 = Lat1 * Pi / 180#
	    Az = 337.255555555556       ' Azimuth at center of projection: 337Â° 15' 20
	    Az = Az * Pi / 180#
	    SF = 0.9996                 ' Scale factor at projection's center
	    Eb = 2546731.496            ' False Easting ( Eb = 528600.24)
	    Nb = -4354009.816           ' False Northing (Nb = 499839.834)
	  
	    B = Sqr(1 + e2 * Cos(Lat1) ^ 4 / (1 - e2))
	    A1 = a * B * SF * Sqr(1 - e2) / (1 - e2 * (Sin(Lat1) ^ 2))
	    Temp = ((1 - E * Sin(Lat1)) / (1 + E * Sin(Lat1))) ^ (0.5 * E)
	    t0 = Tan(Pi / 4 - (Lat1) / 2) / Temp
	    D = B * Sqr(1 - e2) / (Cos(Lat1) * Sqr(1 - e2 * Sin(Lat1) ^ 2))
	    F = D + Lat1 / Abs(Lat1) * Sqr(D ^ 2 - 1)       ' Eq. 4.110
	    E1 = F * t0 ^ B                                 ' Eq. 4.111
	    G = 0.5 * (F - 1 / F)                           ' Eq. 4.112
	    Gamma0 = Isin(Sin(Az) / D)                      ' Eq. 4.113
	    Lon0 = Lon1 - Isin(G * Tan(Gamma0)) / B  ' Lambda 0 at Eq. 4.114
	    U0 = (Lat1 / Abs(Lat1)) * (A1 / B) * Atn(Sqr(D ^ 2 - 1) / Cos(Az))
	    V0 = 0
	  
	    LatIN = DMS2R(CoordIN(1))
	    LonIN = DMS2R(CoordIN(2))
	  
	    Temp = ((1 - E * Sin(LatIN)) / (1 + E * Sin(LatIN))) ^ (0.5 * E)
	    t = Tan(Pi / 4 - (LatIN) / 2) / Temp            ' Eq. 4.117
	    Q = E1 / (t ^ B)
	    S = 0.5 * (Q - 1 / Q)
	    Tc1 = 0.5 * (Q + 1 / Q)
	    V1 = Sin(B * (LonIN - Lon0))
	    U1 = (-V1 * Cos(Gamma0) + S * Sin(Gamma0)) / Tc1
	    vl = A1 * Log((1 - U1) / (1 + U1)) / (2 * B)
	    temp1 = (S * Cos(Gamma0) + V1 * Sin(Gamma0)) / Cos(B * (LonIN - Lon0))
	    ul = (A1 / B) * Atn(temp1)
	    x = vl * Cos(Az) + ul * Sin(Az) + Eb
	    y = ul * Cos(Az) - vl * Sin(Az) + Nb
	  
	    ReDim Preserve CTemp(1 To 2) As Double
	  
	    CTemp(1) = x
	    CTemp(2) = y
	    G2GREF = CTemp
	      
	End Function
	
	
	Public Function GREF2G(CoordIN() As Double) As Double()
	    Dim M1 As Double ' Paramter
	    Dim m2 As Double ' Paramter
	    Dim t1 As Double ' Paramter
	    Dim t2 As Double ' Paramter
	    Dim t0 As Double ' Paramter
	    Dim n As Double ' Paramter
	    Dim F As Double ' Paramter
	    Dim Eb As Double ' Paramter
	    Dim Nb As Double ' Paramter
	    Dim PhiOut As Double ' Paramter
	    Dim LonOut As Double ' Paramter
	  
	    MS_GeoRef = "Projection Oblique Mercator; Datum:  NAD83; Ellipsoid: GRS80 " & vbCrLf & _
	        "Standard Units: Meters" & vbCrLf & _
	        "Origin = 86Â° 00' 00 W and 45Â° 18' 33 N" & vbCrLf & _
	        "Scale factor at projection's center: k= 0.9996" & vbCrLf & _
	        "Azimuth at center of projection: 337Â° 15' 20" & vbCrLf & _
	        "False Easting: 2546731.496, False Northing: -4354009.816"
	      
	    Lon1 = -86#                 ' Longitude of projection's origin: 86Â° 00' 00" W
	    Lon1 = Lon1 * Pi / 180#
	    Lat1 = 45.309166666667       ' Latitude of projection's origin: 45Â° 18' 33" N
	    Lat1 = Lat1 * Pi / 180#
	    Az = 337.255555555556       ' Azimuth at center of projection: 337Â° 15' 20
	    Az = Az * Pi / 180#
	    SF = 0.9996                 ' Scale factor at projection's center
	    Eb = 2546731.496            ' False Easting ( Eb = 528600.24)
	    Nb = -4354009.816           ' False Northing (Nb = 499839.834)
	  
	  
	    ttemp = e2 * (Cos(Lat1) ^ 4) / (1 - e2)
	    B = Sqr(1 + ttemp)
	    A1 = a * B * SF * Sqr(1 - e2) / (1 - e2 * (Sin(Lat1)) ^ 2)
	    Temp = ((1 - E * Sin(Lat1)) / (1 + E * Sin(Lat1))) ^ ( 0.5 * E)
	    t0 = Tan(Pi / 4 - (Lat1) / 2) / Temp
	    ttemp1 = Cos(Lat1) * Sqr(1 - e2 * (Sin(Lat1)) ^ 2)
	    D = B * Sqr(1 - e2) / ttemp1
	  
	    F = D + Lat1 / Abs(Lat1) * Sqr(D ^ 2 - 1)       ' Eq. 4.110
	    E1 = F * t0 ^ B                                 ' Eq. 4.111
	    G = 0.5 * (F - 1 / F)                           ' Eq. 4.112
	    Gamma0 = Isin(Sin(Az) / D)                      ' Eq. 4.113
	    Lon0 = Lon1 - Isin(G * Tan(Gamma0)) / B  ' Lambda 0 at Eq. 4.114
	  
	    xIN = CoordIN(1)
	    yIN = CoordIN(2)
	
	'Actual Computations for Reverse case Hotine Oblique Mercator
	
	    xr = xIN - Eb
	    yr = yIN - Nb
	  
	    vs = xr * Cos(Az) - yr * Sin(Az)
	    us = yr * Cos(Az) + xr * Sin(Az)
	  
	    temp1 = -B * vs / A1
	    Qp = (2.71828182845905) ^ temp1
	    Sp = 0.5 * (Qp - 1 / Qp)
	    Tp = 0.5 * (Qp + 1 / Qp)
	  
	    Vp = Sin(B * us / A1)
	    Up = (Vp * Cos(Gamma0) + Sp * Sin(Gamma0)) / Tp
	
	    temp2 = (1 + Up) / (1 - Up)
	    t = (E1 / Sqr(temp2)) ^ (1 / B)
	  
	    PhiOut = Pi / 2 - 2 * Atn(t)
	'Iterative Solution for Phi Out
	'    For i = 1 To 30
	'        Temp = ((1 - E * Sin(PhiOut)) / (1 + E * Sin(PhiOut))) ^ ( 0.5 * E)
	'        PhiOut = Pi / 2 - 2 * Atn(t * Temp)
	'    Next i
	
	'Single Line Solution for Phi Out
	
	    PhiOut = PhiOut + Sin(2 * PhiOut) * (e2 / 2 + (5 * e2 ^ 2) / 24 + (e2 ^ 4) / 12 + (13 * e2 ^ 6) / 360) + Sin(4 * PhiOut) * ((7 * e2 ^ 2) / 48 + (29 * e2 ^ 4) / 240 + (811 * e2 ^ 6) / 11520) + Sin(6 * PhiOut) * ((7 * e2 ^ 4) / 120 + (81 * e2 ^ 6) / 1120) + Sin(8 * PhiOut) * ((4279 * e2 ^ 6) / 161280)
	          
	    temp3 = (Sp * Cos(Gamma0) - Vp * Sin(Gamma0)) / Cos(B * us / A1)
	  
	    LonOut = Lon0 - Atn(temp3) / B
	     
	    ReDim Preserve CTemp(1 To 2) As Double
	  
	    CTemp(1) = r2dms(PhiOut)
	    CTemp(2) = r2dms(LonOut)
	    GREF2G = CTemp
	End Function
	
	
	
	
	
	
	-----Original Message-----
	From: Frank Warmerdam [mailto:fwarmerdam at gmail.com <mailto:fwarmerdam at gmail.com> ] On Behalf Of Frank Warmerdam
	Sent: Saturday, July 15, 2006 10:01 PM
	To: Clever, Max
	Subject: Re: [UMN_MAPSERVER-USERS] FW: Michigan Georef Projection Problems in Proj4
	
	Clever, Max wrote:
	> Hi,
	>
	>
	>
	> Did anyone see this the last time I sent it?  It relates to Mapserver as
	> well since Mapserver uses Proj4 for its projections.
	
	Max,
	
	I have skimmed this material, but frankly I'm not sure what action item
	there is, and I find myself with limited time for work on PROJ.4.
	
	Is the problem that the parameters Melita offered a couple years ago
	aren't accurate enough?  Or that the underlying translation from EPSG
	to PROJ.4 wasn't fixed so the epsg file keeps getting regenerated
	wrong?  If it is a tranlation problem, then that is basically something
	I ought to fix.  But I basically need some formulation to recognise
	a distinct oblique mercator case for the michigan projection from the
	EPSG codes (or parameters), and what that should map to in WKT format,
	and in PROJ.4 format.  I'm happy to use the ESRI WKT representation if
	there isn't an obvious existing form for this special case.
	
	If you can walk me through what should be changed, I'm willing to work
	on it.
	
	Best regards,
	...
	> Two years ago, I ran into a problem with the Michigan Georef Projection
	> and the way that proj identified it.  I had sent emails back and forth
	> for a while until someone sent a temporary solution of providing false
	> parameters that worked.. *for the most part*.  This temporary solution,
	> of course, did not actually solve the problem, but instead delayed the
	> fixing of the methods that proj identifies projections and translates
	> them.  For that I am sorry for not remaining vigilant in seeing a true
	> solution being devised.  But now, since I have just now installed the
	> latest version of GRASS 6.1, I have come full circle and face this
	> problem again.  To provide a quick access to the background of what has
	> already been said on this projection please note the previous emails
	> below.  I believe, at this time still, that the *omerc* projection and
	> its parameters as used by proj cannot correctly describe or transform a
	> omerc projection with a "natural origin".  From what I understand,
	> Hotine oblique mercator and Rectified Skew Orthomorphic are one and the
	> same or depend on where the skew is corrected.  Has there been a
	> solution determined for this projection?  If not, maybe a solution to
	> this problem would be to have Proj have oblique mercators split between
	> "natural origins" and cartesian center point origins.  I hope, maybe,
	> someone has been looking at this lately but I doubt it.  Any comments or
	> solutions would be very welcome.  Thanks.
	
	
	--
	---------------------------------------+--------------------------------------
	I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
	light and sound - activate the windows | http://pobox.com/~warmerdam <http://pobox.com/~warmerdam>
	and watch the world go round - Rush    | President OSGF, http://osgeo.org <http://osgeo.org>
	
	
	
	
	------------------------------
	
	Message: 3
	Date: Sat, 22 Jul 2006 13:22:24 +0200
	From: Mateusz Loskot <mateusz at loskot.net>
	Subject: Re: FW: [Proj] First attempt of porting PROJ.4 to Windows CE
	To: "PROJ.4 and general Projections Discussions"
	        <proj at lists.maptools.org>
	Message-ID: <44C20A70.2020600 at loskot.net>
	Content-Type: text/plain; charset=ISO-8859-1
	
	Wynand Kruger wrote:
	> Where can we find 'proj4-wince-port.zip'?
	
	Hi Wynand,
	
	I replied to your first e-mail in you're asking about it.
	Please, take a look at:
	http://lists.maptools.org/pipermail/proj/2006-July/002406.html
	
	Best regards
	--
	Mateusz Loskot
	http://mateusz.loskot.net
	
	
	------------------------------
	
	Message: 4
	Date: Sat, 22 Jul 2006 10:01:25 -0500
	From: Michael P Finn <mfinn at usgs.gov>
	Subject: [Proj] Michael P Finn of the USGS/ National Geospatial
	        Technical Operations Center is out of the office.
	To: "PROJ.4 and general Projections Discussions"
	        <proj at lists.maptools.org>
	Message-ID:
	        <OFDAAE9684.8189DBFE-ON862571B3.005286F5-862571B3.005286F5 at usgs.gov>
	Content-Type: text/plain; charset=US-ASCII
	
	
	I will be out of the office starting  07/22/2006 and will not return until
	07/31/2006.
	
	I will be unable to check e-mail regularly while I am out. If I can't
	respond to your message while I am out, then I will when I return. If you
	have anything that cannot wait, please contact my colleague, Mr. Timothy
	Krupinski, at tkrupinski at usgs.gov.     Mike
	
	
	
	------------------------------
	
	_______________________________________________
	Proj mailing list
	Proj at lists.maptools.org
	http://lists.maptools.org/mailman/listinfo/proj
	
	End of Proj Digest, Vol 26, Issue 13
	************************************
	
	

-------------- next part --------------
A non-text attachment was scrubbed...
Name: winmail.dat
Type: application/ms-tnef
Size: 25878 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060723/c0d2430e/attachment.bin>

From aaronkoning at gmail.com  Mon Jul 24 22:47:14 2006
From: aaronkoning at gmail.com (Aaron Koning)
Date: Mon, 24 Jul 2006 22:47:14 -0700
Subject: [Proj] Client side coordinate transformation library - Call to
	developers/testers
Message-ID: <1319fbba0607242247k1a64d1c3q3776e70369326efe@mail.gmail.com>

Hello All,

A while ago I created a client side coordinate transformation library called
GCTP-JS (Open Source, GPL licence). More accurately, I ported files directly
from the General Cartographic Transformation System (GCTP) C-code to
JavaScript.
     http://datashare.gis.unbc.ca/gctp-js/

Simple example application:
     http://datashare.gis.unbc.ca/gctp-js/examples.php

Implemented easily and successfully in the Flexible Internet Spatial
Template (FIST) web mapping application:
     http://fist-mapping.org

Currently the 'port' is not complete (UTM, Albers, and Lambert projection
files have been ported). What I would like to see is a complete port of the
GCTP to JavaScript. Porting each projection file takes a few hours to a few
days depending on experience level (pretty quick I think). Then the
projection file must be tested, which is best done by someone who uses that
particular projection often.

The best reasons to get involved are:
     - porting and testing can be done file by file;
     - porting a file doesn't take very long;
     - only work on the projections you want or the whole library;
     - very little planning is needed since it is a straightforward porting
exercise;
     - there is a definite and achievable end goal!

Therefore, I would like all interested parties to contact me at the address
below and start porting and testing projection files as soon as possible. I
am eager to get going and help make this a success!
     aaronkoning at gmail.com

The GCTP C-code can be downloaded at:
     http://edcftp.cr.usgs.gov/pub//software/gctpc/gctpc_src.tar

Thank you for your time,
Aaron

+--------------------------------------------
|  Aaron Koning
|  Information Technologist
|  Prince George, BC, Canada.
+--------------------------------------------
|   http://datashare.gis.unbc.ca/fist/
|   http://datashare.gis.unbc.ca/gctp-js/
+--------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060724/3d2ac15b/attachment.html>

From ovv at hetnet.nl  Tue Jul 25 06:53:45 2006
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Tue, 25 Jul 2006 15:53:45 +0200
Subject: [Proj] Client side coordinate transformation library - Call
	to developers/testers
In-Reply-To: <1319fbba0607242247k1a64d1c3q3776e70369326efe@mail.gmail.com>
Message-ID: <C0EBEF09.785C%ovv@hetnet.nl>

From: "Aaron Koning"
Subject: [Proj] Client side coordinate transformation library - Call to
developers/testers

> A while ago I created a client side coordinate transformation library called
> GCTP-JS (Open Source, GPL licence).
....
> Then the projection file must be tested, which is best done by someone who
> uses that particular projection often.

If you want to test GCTP(-derived) programs, it seems more logical to me to
use the very extensive GCTP test suite.
There are 4 tar-balls, but the last time I looked, two projections were
missing (eqrect, equidc), so you need to d/l those two separately as text
files.
A problem with URLs is that they change often. The 'amdahl' test suite I
obtained is probably no longer available, but the C-version test suite is:
<ftp://edcftp.cr.usgs.gov/pub/software/gctpc/>





From richard.greenwood at gmail.com  Tue Jul 25 12:33:04 2006
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Tue, 25 Jul 2006 13:33:04 -0600
Subject: [Proj] Re: [webmap-discuss] Client side coordinate transformation
	library - Call to developers/testers
In-Reply-To: <1319fbba0607242247k1a64d1c3q3776e70369326efe@mail.gmail.com>
References: <1319fbba0607242247k1a64d1c3q3776e70369326efe@mail.gmail.com>
Message-ID: <ae9185aa0607251233q2c854698h34b11f018a6b1cbc@mail.gmail.com>

On 7/24/06, Aaron Koning <aaronkoning at gmail.com> wrote:
> Hello All,
>
> A while ago I created a client side coordinate transformation library called
> GCTP-JS (Open Source, GPL licence). More accurately, I ported files directly
> from the General Cartographic Transformation System (GCTP) C-code to
> JavaScript.
>      http://datashare.gis.unbc.ca/gctp-js/
>
> Simple example application:
>      http://datashare.gis.unbc.ca/gctp-js/examples.php
>
> Implemented easily and successfully in the Flexible Internet Spatial
> Template (FIST) web mapping application:
>      http://fist-mapping.org
>
> Currently the 'port' is not complete (UTM, Albers, and Lambert projection
> files have been ported). What I would like to see is a complete port of the
> GCTP to JavaScript. Porting each projection file takes a few hours to a few
> days depending on experience level (pretty quick I think). Then the
> projection file must be tested, which is best done by someone who uses that
> particular projection often.
>
> The best reasons to get involved are:
>      - porting and testing can be done file by file;
>      - porting a file doesn't take very long;
>      - only work on the projections you want or the whole library;
>       - very little planning is needed since it is a straightforward porting
> exercise;
>      - there is a definite and achievable end goal!
>
> Therefore, I would like all interested parties to contact me at the address
> below and start porting and testing projection files as soon as possible. I
> am eager to get going and help make this a success!
>      aaronkoning at gmail.com
>
>  The GCTP C-code can be downloaded at:
>
> http://edcftp.cr.usgs.gov/pub//software/gctpc/gctpc_src.tar
>
> Thank you for your time,
> Aaron
>
> +--------------------------------------------
> |  Aaron Koning
> |  Information Technologist
> |  Prince George, BC, Canada.
> +--------------------------------------------
> |   http://datashare.gis.unbc.ca/fist/
> |   http://datashare.gis.unbc.ca/gctp-js/
> +--------------------------------------------


Aaron,

We must be on the same wavelength! Just yesterday I sent an eamil to a
couple lists regarding the work that I have been doing toward porting
the Proj.4 cs2cs program to Javascript.

I went with Proj.4 over GCTP primarily because Proj.4 has support for
datum transformations. Is the GCTP license Open Source?

Would you be interested in combining our projects?

Rich

-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From Chris.Barker at noaa.gov  Tue Jul 25 13:10:32 2006
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue, 25 Jul 2006 13:10:32 -0700
Subject: [Proj] How to Scale a Mercator projection?
Message-ID: <44C67AB8.6070100@noaa.gov>

Hi all,

I'm trying to figure out how to do a Mercator projection. I think I've 
got how it's supposed to work, but I can't get the scale parameter to do 
anything at all. On the proj4 command, it's either k=scale or k_0-scale, 
neither does anything. Also, according to the docs:

"""
PROJ.4 does not support a latitude of natural origin other than the equator
"""

though that may be old. I also found:

"""
A more common formulation for Mercator is to drop the +k_0, and instead 
to provide a latitude of true scale using the +lat_ts parameter, which 
is the latitude at which the scale is 0
"""

Which I don't understand, as a scale can't be zero! in fact, if I try to 
pass in 0 for k_0, I get an error.

However, whether I specify a +lat_ts or not, it makes no difference to 
the output what I pass in for k (or k_0), except if I pass in 0 I get an 
error.

I'm totally confused! Do I need to just do the scaling myself, after the 
fact?

This is what I'm trying to do:

Nautical charts are in the Mercator projection (most of them, anyway). A 
given chart has a known scale at a given latitude. I know the resolution 
they scanned it at (pixels per inch, or whatever), so I know the scale 
in terms of pixels. There are also a bunch of reference points, so I 
should be able to figure out the false northing and false easting to 
shift to pixel coords.

However, this all goes to heck if I can't set the scale.

I've spent way more time than it would have taken me to just write a 
Mercator projection by hand, but I'd really like to figure out how to 
use proj!

Can anyone make any suggestions?

-Chris

Here's some sample info:

Chart # 11361_1
Scale 1:80000 at 29.133 degrees North
10877 X 9391 pixel image
254 pixels per inch

Point near the top left corner:
pixel:          long-lat
248,483       29.3502361111, -89.5500472222

Point near the bottom right corner:
pixel:          long-lat
10587,6885     28.8880722222,-88.7000500000

It seems that that should be enough to figure out what I need!


-- 
Christopher Barker, Ph.D.
Oceanographer
                                     		
NOAA/OR&R/HAZMAT         (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker at noaa.gov


From warmerdam at pobox.com  Tue Jul 25 13:48:37 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 25 Jul 2006 16:48:37 -0400
Subject: [Proj] How to Scale a Mercator projection?
In-Reply-To: <44C67AB8.6070100@noaa.gov>
References: <44C67AB8.6070100@noaa.gov>
Message-ID: <44C683A5.5000909@pobox.com>

Christopher Barker wrote:
> Hi all,
> 
> I'm trying to figure out how to do a Mercator projection. I think I've 
> got how it's supposed to work, but I can't get the scale parameter to do 
> anything at all. On the proj4 command, it's either k=scale or k_0-scale, 
> neither does anything. Also, according to the docs:

Christopher,

I'm sorry I haven't responded yet to any of your email on gdal-dev and
elsewhere.  I have just checked, and I definately see an effect when
specifying +k_0:

warmerda at gdal2200[82]% proj +proj=merc +ellps=WGS84 +k_0=0.998
5 5                          (input)
555484.26       552476.68    (output)
warmerda at gdal2200[83]% proj +proj=merc +ellps=WGS84 +k_0=1.0
5 5                          (input)
556597.45       553583.85    (output)

Perhaps you could be more specific about how you determined it was having
no effect?

> """
> A more common formulation for Mercator is to drop the +k_0, and instead 
> to provide a latitude of true scale using the +lat_ts parameter, which 
> is the latitude at which the scale is 0
> """

Where exactly did you see this?  You are quite right that a scale of zero
is nonsensical.

Hopefully I'll have a chance to respond on the BSB issues on gdal-dev.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org



From aaronkoning at gmail.com  Tue Jul 25 14:41:22 2006
From: aaronkoning at gmail.com (Aaron Koning)
Date: Tue, 25 Jul 2006 14:41:22 -0700
Subject: [Proj] Re: [webmap-discuss] Client side coordinate transformation
	library - Call to developers/testers
In-Reply-To: <ae9185aa0607251233q2c854698h34b11f018a6b1cbc@mail.gmail.com>
References: <1319fbba0607242247k1a64d1c3q3776e70369326efe@mail.gmail.com>
	<ae9185aa0607251233q2c854698h34b11f018a6b1cbc@mail.gmail.com>
Message-ID: <1319fbba0607251441l37de114du9c62d7e4a6bbea7c@mail.gmail.com>

Hi Richard,

Its good to hear from you again. I am mostly interested in porting GCTP to
JavaScript. I have not had much use for datum conversions on the client
side, but I'd be interested to hear from anyone who has. Right now the
GCTP-JS port has the three most important projections for my region (Albers,
Lambert, UTM) and it works very well, so I am hesitant to get involved with
recreating this functionality. In addition, I believe that the GCTP can be
ported much quicker than Proj4 since it has less than half the files of
Proj4 and since many of the GCTP files contain only a few lines that need to
be converted. Perhaps there are more compelling reasons to redirect efforts?


Aaron

On 7/25/06, Richard Greenwood <richard.greenwood at gmail.com> wrote:
>
> On 7/24/06, Aaron Koning <aaronkoning at gmail.com> wrote:
> > Hello All,
> >
> > A while ago I created a client side coordinate transformation library
> called
> > GCTP-JS (Open Source, GPL licence). More accurately, I ported files
> directly
> > from the General Cartographic Transformation System (GCTP) C-code to
> > JavaScript.
> >      http://datashare.gis.unbc.ca/gctp-js/
> >
> > Simple example application:
> >      http://datashare.gis.unbc.ca/gctp-js/examples.php
> >
> > Implemented easily and successfully in the Flexible Internet Spatial
> > Template (FIST) web mapping application:
> >      http://fist-mapping.org
> >
> > Currently the 'port' is not complete (UTM, Albers, and Lambert
> projection
> > files have been ported). What I would like to see is a complete port of
> the
> > GCTP to JavaScript. Porting each projection file takes a few hours to a
> few
> > days depending on experience level (pretty quick I think). Then the
> > projection file must be tested, which is best done by someone who uses
> that
> > particular projection often.
> >
> > The best reasons to get involved are:
> >      - porting and testing can be done file by file;
> >      - porting a file doesn't take very long;
> >      - only work on the projections you want or the whole library;
> >       - very little planning is needed since it is a straightforward
> porting
> > exercise;
> >      - there is a definite and achievable end goal!
> >
> > Therefore, I would like all interested parties to contact me at the
> address
> > below and start porting and testing projection files as soon as
> possible. I
> > am eager to get going and help make this a success!
> >      aaronkoning at gmail.com
> >
> >  The GCTP C-code can be downloaded at:
> >
> > http://edcftp.cr.usgs.gov/pub//software/gctpc/gctpc_src.tar
> >
> > Thank you for your time,
> > Aaron
> >
> > +--------------------------------------------
> > |  Aaron Koning
> > |  Information Technologist
> > |  Prince George, BC, Canada.
> > +--------------------------------------------
> > |   http://datashare.gis.unbc.ca/fist/
> > |   http://datashare.gis.unbc.ca/gctp-js/
> > +--------------------------------------------
>
>
> Aaron,
>
> We must be on the same wavelength! Just yesterday I sent an eamil to a
> couple lists regarding the work that I have been doing toward porting
> the Proj.4 cs2cs program to Javascript.
>
> I went with Proj.4 over GCTP primarily because Proj.4 has support for
> datum transformations. Is the GCTP license Open Source?
>
> Would you be interested in combining our projects?
>
> Rich
>
> --
> Richard Greenwood
> richard.greenwood at gmail.com
> www.greenwoodmap.com
>



-- 
+--------------------------------------------
|  Aaron Koning
|  Information Technologist
|  Prince George, BC, Canada.
+--------------------------------------------
|  http://datashare.gis.unbc.ca/fist/
|  http://datashare.gis.unbc.ca/gctp-js/
+--------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060725/a73c9f46/attachment.html>

From Chris.Barker at noaa.gov  Tue Jul 25 14:58:17 2006
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue, 25 Jul 2006 14:58:17 -0700
Subject: [Proj] How to Scale a Mercator projection?
In-Reply-To: <44C683A5.5000909@pobox.com>
References: <44C67AB8.6070100@noaa.gov> <44C683A5.5000909@pobox.com>
Message-ID: <44C693F9.8020909@noaa.gov>

Frank Warmerdam wrote:
> I'm sorry I haven't responded yet to any of your email on gdal-dev and
> elsewhere.  I have just checked, and I definately see an effect when
> specifying +k_0:
> 
> warmerda at gdal2200[82]% proj +proj=merc +ellps=WGS84 +k_0=0.998
> 5 5                          (input)
> 555484.26       552476.68    (output)
> warmerda at gdal2200[83]% proj +proj=merc +ellps=WGS84 +k_0=1.0
> 5 5                          (input)
> 556597.45       553583.85    (output)
> 
> Perhaps you could be more specific about how you determined it was having
> no effect?

Of course, your examples work for me too. Inspired by that, I went back 
to my examples, and found that I had always specified lat_ts. I thought 
I'd tested that, but I guess I had tested changing lat_ts to 0 or other 
values, but not removing it altogether. If you don't specify lat_ts, 
then k_0 does have the effect I'd expect. This is consistent (except for 
the 0)with:
>> """
>> A more common formulation for Mercator is to drop the +k_0, and 
>> instead to provide a latitude of true scale using the +lat_ts 
>> parameter, which is the latitude at which the scale is 0
>> """
> 
> Where exactly did you see this?  You are quite right that a scale of zero
> is nonsensical.

I found that here:
http://www.remotesensing.org/geotiff/proj_list/mercator_2sp.html

It must be a typo.

However, this is a GDAL issue. This all started with my trying to use 
the python bindings to osr. I initialized the projection with various 
versions of:

Proj.SetMercator( clat = 29.1333,
                   clong=-89.583333,
                   scale=0.0174532925199433,
                   fe=100,
                   fn=-2972000,
                   )

The scale parameter didn't make a difference. Thinking it may be an 
issue with the bindings, I then went straight to the proj command line 
tool, but I started with the command line spit out by osr.py when I 
passed in 0 as the scale:

ValueError: Failed to initialize PROJ.4 with `+proj=merc +lat_ts=29.1333 
+lon_0=-89.583333 +k=0.000000 +x_0=100 +y_0=-2972000 +ellps=WGS84 
+datum=WGS84 +units=m +no_defs '

In there, I see that lat_ts has been set, which is why scale didn't do 
anything. In fact, lat_ts is always set by osr.py, even if you set it to 
0, and, with the python bindings, you don't have the option of not 
setting it at all, as they are all non-keyword arguments.

This issue aside, I'm still a bit confused. My understanding is that the 
projection (at least on nautical charts) is defined by it being 
Mercator, and by the scale at a reference latitude. That's why I was 
trying to set lat_ts: I know the scale at a latitude near the middle of 
the chart. Given that the scale changes with latitude with a mercator 
projection, it seems that that's a needed parameter.

The other option is to calculate the scale from the reference points, 
but it would be nice to be able to do it directly with the info in the 
bsb file.

thanks for your help,

-Chris




-- 
Christopher Barker, Ph.D.
Oceanographer
                                     		
NOAA/OR&R/HAZMAT         (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker at noaa.gov


From gerald.evenden at verizon.net  Tue Jul 25 17:25:39 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Tue, 25 Jul 2006 20:25:39 -0400
Subject: [Proj] How to Scale a Mercator projection?
In-Reply-To: <44C693F9.8020909@noaa.gov>
References: <44C67AB8.6070100@noaa.gov> <44C683A5.5000909@pobox.com>
	<44C693F9.8020909@noaa.gov>
Message-ID: <200607252025.39565.gerald.evenden@verizon.net>

On Tuesday 25 July 2006 5:58 pm, Christopher Barker wrote:
	...
> ValueError: Failed to initialize PROJ.4 with `+proj=merc +lat_ts=29.1333
> +lon_0=-89.583333 +k=0.000000 +x_0=100 +y_0=-2972000 +ellps=WGS84
> +datum=WGS84 +units=m +no_defs '

The above should generate an error:

projection initialization failure
cause: k <= 0

Even when lat_ts is specified.  This is because k_0= (or k=) is always sampled 
independent of projection and generate in error when value is <= 0.

In the case of proj=merc, lat_ts= when specified overides any specification of 
k_0.

lat_ts is commonly used on navigation charts.  If k_0 is used, I suspect it is 
only used in trans-equator maps.

-- 
Jerry and the low-riders: Daisy Mae and Joshua
"Cogito cogito ergo cogito sum"
   Ambrose Bierce, The Devil's Dictionary


From warmerdam at pobox.com  Tue Jul 25 18:42:42 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 25 Jul 2006 21:42:42 -0400
Subject: [Proj] How to Scale a Mercator projection?
In-Reply-To: <44C693F9.8020909@noaa.gov>
References: <44C67AB8.6070100@noaa.gov> <44C683A5.5000909@pobox.com>
	<44C693F9.8020909@noaa.gov>
Message-ID: <44C6C892.9010809@pobox.com>

Christopher Barker wrote:
>>> """
>>> A more common formulation for Mercator is to drop the +k_0, and 
>>> instead to provide a latitude of true scale using the +lat_ts 
>>> parameter, which is the latitude at which the scale is 0
>>> """
>>
>> Where exactly did you see this?  You are quite right that a scale of zero
>> is nonsensical.
> 
> I found that here:
> http://www.remotesensing.org/geotiff/proj_list/mercator_2sp.html
> 
> It must be a typo.

Chris,

Yes, and apparently my typo.   I have fixed this.

> However, this is a GDAL issue. This all started with my trying to use 
> the python bindings to osr. I initialized the projection with various 
> versions of:
> 
> Proj.SetMercator( clat = 29.1333,
>                   clong=-89.583333,
>                   scale=0.0174532925199433,
>                   fe=100,
>                   fn=-2972000,
>                   )
> 
> The scale parameter didn't make a difference. Thinking it may be an 
> issue with the bindings, I then went straight to the proj command line 
> tool, but I started with the command line spit out by osr.py when I 
> passed in 0 as the scale:
> 
> ValueError: Failed to initialize PROJ.4 with `+proj=merc +lat_ts=29.1333 
> +lon_0=-89.583333 +k=0.000000 +x_0=100 +y_0=-2972000 +ellps=WGS84 
> +datum=WGS84 +units=m +no_defs '
> 
> In there, I see that lat_ts has been set, which is why scale didn't do 
> anything. In fact, lat_ts is always set by osr.py, even if you set it to 
> 0, and, with the python bindings, you don't have the option of not 
> setting it at all, as they are all non-keyword arguments.

Ugg.  What a nightmare.

I think I've seriously mixed things up by not properly
differentiating between the 1SP and 2SP forms of Mercator
in my OGR / WKT handling code and I'll need to do some work
to fix that.

> This issue aside, I'm still a bit confused. My understanding is that the 
> projection (at least on nautical charts) is defined by it being 
> Mercator, and by the scale at a reference latitude. That's why I was 
> trying to set lat_ts: I know the scale at a latitude near the middle of 
> the chart. Given that the scale changes with latitude with a mercator 
> projection, it seems that that's a needed parameter.

My understanding is that PROJ.4 does not support a latitude of origin
(ie. lat_0) other than the equator.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org



From Chris.Barker at noaa.gov  Tue Jul 25 23:00:02 2006
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue, 25 Jul 2006 23:00:02 -0700
Subject: [Proj] How to Scale a Mercator projection?
In-Reply-To: <200607252025.39565.gerald.evenden@verizon.net>
References: <44C67AB8.6070100@noaa.gov> <44C683A5.5000909@pobox.com>
	<44C693F9.8020909@noaa.gov>
	<200607252025.39565.gerald.evenden@verizon.net>
Message-ID: <44C704E2.8080704@noaa.gov>

Gerald I. Evenden wrote:
> On Tuesday 25 July 2006 5:58 pm, Christopher Barker wrote:
>>ValueError: Failed to initialize PROJ.4 with `+proj=merc +lat_ts=29.1333
>>+lon_0=-89.583333 +k=0.000000 +x_0=100 +y_0=-2972000 +ellps=WGS84
>>+datum=WGS84 +units=m +no_defs '

> The above should generate an error:

And indeed it does. Actually, that error was helpful, because when I got 
it, I could see what parameters were being passed into proj by the 
wrapper code.

> In the case of proj=merc, lat_ts= when specified overides any specification of 
> k_0.

I've figured that out now.

> lat_ts is commonly used on navigation charts.  If k_0 is used, I suspect it is 
> only used in trans-equator maps.

Well, I'm still confused. What does lat_ts mean? There is this 
unfortunate typo in the docs:

"the +lat_ts parameter, which is the latitude at which the scale is 0."

Clearly that isn't supposed to be zero, but what is it supposed to be?

On the NOAA Navigational charts, a latitude is given at which the given 
scale holds. That sounds to me like the latitude of true scale, but in 
that case, you'd need the k_0 paramter, in addition to lat_ts.

How do I match the projection of a nautical chart?

Frank Warmerdam wrote:
> My understanding is that PROJ.4 does not support a latitude of origin
> (ie. lat_0) other than the equator.

I did see that in the docs, but I'm not sure that a latitude of origin 
is the same as the latitude at which the given scale is correct. If it 
it is, then perhaps it's time to patch PROJ to allow that - Nautical 
charts are the most common use of the mercator projection, and the math 
is just not that hard for this one.

I found this in the FAQ about the NOAA arc-view extension for reading 
Nautical charts:

************
4.3 What's the "Latitude of True Scale" that Mercator charts ask for?

The latitude of true scale in a Mercator projection is the one latitude 
for which distance measurements are correct. In general, a Mercator 
chart will have a latitude of true scale in the center of the chart. 
However, if the latitude of true scale given in the chart were applied, 
it would not be possible to put multiple Mercator charts in a single 
view. Therefore the developers have provided a means for allowing the 
user to set the latitude of true scale that will be used for all 
Mercator charts in a given view. When setting the latitude of true scale 
for a view, two options are suggested: 0.0 degrees and the latitude of 
true scale that is read from the chart being added. The drawback to 
using 0.0 degrees is the resulting inaccurate measurements. Few, if any, 
NOAA nautical charts actually have the equator in them; thus, the scale 
is wrong everywhere in the chart and the error increases with latitude.
To allow the user to get reasonable distance measurements, a latitude of 
true scale may be entered for the first Mercator chart added to the 
view. Additional charts will use that latitude of true scale, so it is 
wise to pick a value in the center of your anticipated work area. This 
value does not have to be the original latitude of true scale of the 
chart; you may want to pick a value that is close to the center of your 
study area. Note that there will always be distortion, and therefore 
error in distance measurements not on the latitude of true scale.
************

This implies to me that you should be able to set lat_ts and k_0. A 
latitude of true scale without a scale isn't very useful. I guess you'd 
get a scale of 1 there, which I guess means that units would be in 
meters. Then I'd need to do the pixels-to-meters calculation after the 
fact. Not a big deal, but I was hoping that it wouldn't be neccesary.

As a note, it seems that the ArcView extension isn't really doing a real 
projection anyway -- all they do is determine the location of the corner 
  and the average size of the pixels from the reference points. Maybe I 
should just do that.

Thanks for your help,

-Chris




From yrusinov at gmail.com  Wed Jul 26 06:58:07 2006
From: yrusinov at gmail.com (Yuriy Rusinov)
Date: Wed, 26 Jul 2006 17:58:07 +0400
Subject: [Proj] Projections list
Message-ID: <1ac023f40607260658k45f6fc0awf0ac9a5b0051b4d5@mail.gmail.com>

Hello, All !

I have to see all projections list throw proj.  I write
proj +proj=list | more

Output is
Rel. 4.4.9, 29 Oct 2004
<proj>:
projection initialization failure
cause: unknown projection id
program abnormally terminated

What I have to do in order to see list ? My system is gentoo linux
2.6.16-r13.

-- 
Best regards,
Sincerely yours,
Yuriy Rusinov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060726/5eeb7838/attachment.html>

From warmerdam at pobox.com  Wed Jul 26 07:19:49 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 26 Jul 2006 10:19:49 -0400
Subject: [Proj] Projections list
In-Reply-To: <1ac023f40607260658k45f6fc0awf0ac9a5b0051b4d5@mail.gmail.com>
References: <1ac023f40607260658k45f6fc0awf0ac9a5b0051b4d5@mail.gmail.com>
Message-ID: <44C77A05.4040001@pobox.com>

Yuriy Rusinov wrote:
> Hello, All !
> 
> I have to see all projections list throw proj.  I write
> proj +proj=list | more
> 
> Output is
> Rel. 4.4.9, 29 Oct 2004
> <proj>:
> projection initialization failure
> cause: unknown projection id
> program abnormally terminated
> 
> What I have to do in order to see list ? My system is gentoo linux 
> 2.6.16-r13.

Yuriy,

Try:

    proj -lp | more

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org



From gerald.evenden at verizon.net  Wed Jul 26 08:27:06 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Wed, 26 Jul 2006 11:27:06 -0400
Subject: [Proj] How to Scale a Mercator projection?
In-Reply-To: <44C704E2.8080704@noaa.gov>
References: <44C67AB8.6070100@noaa.gov>
	<200607252025.39565.gerald.evenden@verizon.net>
	<44C704E2.8080704@noaa.gov>
Message-ID: <200607261127.06439.gerald.evenden@verizon.net>

On Wednesday 26 July 2006 2:00 am, Christopher Barker wrote:
> Gerald I. Evenden wrote:
> > On Tuesday 25 July 2006 5:58 pm, Christopher Barker wrote:
> >>ValueError: Failed to initialize PROJ.4 with `+proj=merc +lat_ts=29.1333
> >>+lon_0=-89.583333 +k=0.000000 +x_0=100 +y_0=-2972000 +ellps=WGS84
> >>+datum=WGS84 +units=m +no_defs '
> >
> > The above should generate an error:
>
> And indeed it does. Actually, that error was helpful, because when I got
> it, I could see what parameters were being passed into proj by the
> wrapper code.
>
> > In the case of proj=merc, lat_ts= when specified overides any
> > specification of k_0.
>
> I've figured that out now.
>
> > lat_ts is commonly used on navigation charts.  If k_0 is used, I suspect
> > it is only used in trans-equator maps.
>
> Well, I'm still confused. What does lat_ts mean? There is this
> unfortunate typo in the docs:
>
> "the +lat_ts parameter, which is the latitude at which the scale is 0."

Obviously an error.  Should read "scale factor is 1.0."

I use the term "scale factor" to mean a factor to multiply the annotated scale 
of the map to arrive at the true scale at a particular point.  For example: 
k_0=0.9996 is the scale factor along the CM of a Transverse Mercator map and 
means that the true scale is determined by 0.9996 x map-scale.

"lat_ts" means latitude of true scale or the latitude at which the scale is 
exactly that indicated by the map's margin scale.

> Clearly that isn't supposed to be zero, but what is it supposed to be?
>
> On the NOAA Navigational charts, a latitude is given at which the given
> scale holds. That sounds to me like the latitude of true scale, but in
> that case, you'd need the k_0 paramter, in addition to lat_ts.

By "true" they mean that the scale at that latitude matches the scale 
annotated in the margin of the map (1:xxx,xxx).

> How do I match the projection of a nautical chart?

The projection is Mercator (normal).

> Frank Warmerdam wrote:
> > My understanding is that PROJ.4 does not support a latitude of origin
> > (ie. lat_0) other than the equator.
>
> I did see that in the docs, but I'm not sure that a latitude of origin
> is the same as the latitude at which the given scale is correct. If it
> it is, then perhaps it's time to patch PROJ to allow that - Nautical
> charts are the most common use of the mercator projection, and the math
> is just not that hard for this one.

Latitude of origin does not necessarily have anything to do with scale.  It is 
only a point there the y(Northing)=0 for that particular latitude.  proj=merc 
does not provide for latitude of origin and y is always given from the 
equator (lat=0).

> I found this in the FAQ about the NOAA arc-view extension for reading
> Nautical charts:
>
> ************
> 4.3 What's the "Latitude of True Scale" that Mercator charts ask for?
>
> The latitude of true scale in a Mercator projection is the one latitude
> for which distance measurements are correct. In general, a Mercator
> chart will have a latitude of true scale in the center of the chart.
> However, if the latitude of true scale given in the chart were applied,
> it would not be possible to put multiple Mercator charts in a single
> view. Therefore the developers have provided a means for allowing the
> user to set the latitude of true scale that will be used for all
> Mercator charts in a given view. When setting the latitude of true scale
> for a view, two options are suggested: 0.0 degrees and the latitude of
> true scale that is read from the chart being added. The drawback to
> using 0.0 degrees is the resulting inaccurate measurements. Few, if any,
> NOAA nautical charts actually have the equator in them; thus, the scale
> is wrong everywhere in the chart and the error increases with latitude.
> To allow the user to get reasonable distance measurements, a latitude of
> true scale may be entered for the first Mercator chart added to the
> view. Additional charts will use that latitude of true scale, so it is
> wise to pick a value in the center of your anticipated work area. This
> value does not have to be the original latitude of true scale of the
> chart; you may want to pick a value that is close to the center of your
> study area. Note that there will always be distortion, and therefore
> error in distance measurements not on the latitude of true scale.
> ************

The above description seems to muddy the waters rather than clear them.

The following example might be clearer:  say that a set of maps were desired 
for the Chesapeake Bay (an elongated NS system) that should allow for smooth 
mosaicing of maps of various latitudes.  Thus a latitude of true scale may be 
picked that is the central latitude of entire extent of the bay *and* its map 
series.  Consequencely, maps at the southern and northern extremities will 
not have a latitude of true scale within the boundaries of the map.  But the 
maps will match with their neighbors.

> This implies to me that you should be able to set lat_ts and k_0. A
> latitude of true scale without a scale isn't very useful. I guess you'd
> get a scale of 1 there, which I guess means that units would be in
> meters. Then I'd need to do the pixels-to-meters calculation after the
> fact. Not a big deal, but I was hoping that it wouldn't be neccesary.

Internally, proj does not allow simultaneous use of lat_ts and k_0.  Such use 
would grossly confuse usage.

Proj does *not* determine the scale of the projection in the general sense.  
That is determined by either scaling the major axis/radius (a=) or scaling 
the x/y output by the application.  Any map making application that uses proj 
should consider the map scale as the application's duty.

> As a note, it seems that the ArcView extension isn't really doing a real
> projection anyway -- all they do is determine the location of the corner
>   and the average size of the pixels from the reference points. Maybe I
> should just do that.
>
> Thanks for your help,
>
> -Chris

-- 
Jerry and the low-riders: Daisy Mae and Joshua
"Cogito cogito ergo cogito sum"
   Ambrose Bierce, The Devil's Dictionary


From Chris.Barker at noaa.gov  Wed Jul 26 13:40:42 2006
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed, 26 Jul 2006 13:40:42 -0700
Subject: [Proj] How to Scale a Mercator projection?
In-Reply-To: <200607261127.06439.gerald.evenden@verizon.net>
References: <44C67AB8.6070100@noaa.gov>
	<200607252025.39565.gerald.evenden@verizon.net>
	<44C704E2.8080704@noaa.gov>
	<200607261127.06439.gerald.evenden@verizon.net>
Message-ID: <44C7D34A.1030801@noaa.gov>

Gerald,

Thanks for your helpful comments -- I think I'm slowly starting to get this.

Gerald I. Evenden wrote:
> I use the term "scale factor" to mean a factor to multiply the annotated scale 
> of the map to arrive at the true scale at a particular point.  For example: 
> k_0=0.9996 is the scale factor along the CM of a Transverse Mercator map and 
> means that the true scale is determined by 0.9996 x map-scale.

OK - got it. Can i assume that proj is outputting meters, then?

> By "true" they mean that the scale at that latitude matches the scale 
> annotated in the margin of the map (1:xxx,xxx).

That's what I thought.

> Internally, proj does not allow simultaneous use of lat_ts and k_0.  Such use 
> would grossly confuse usage.
> 
> Proj does *not* determine the scale of the projection in the general sense.  
> That is determined by either scaling the major axis/radius (a=) or scaling 
> the x/y output by the application.  Any map making application that uses proj 
> should consider the map scale as the application's duty.

That's key. Thanks for clarifying that for me. I was looking to have 
Proj do the whole thing for me -- now that I know that It's not supposed 
to to that, I know what to do.

But just in case, I think this is what I need to do:

use:

proj=merc +lat_ts=29.1333 +lon_0=-89.583333 +ellps=WGS84 +datum=WGS84 
+units=m

That will give me the coordinates in meters.

Then I need to multiply this by the scale (1/80000) and divide the 
pixels per meter (10,000), to get pixels. then I need to shift to get 
the coordinates to (0,0) at the appropriate place.

Another alternative is to set the false easting and false northing to 
get (0,0) in the right place. I think those are set in meters.

Is that about right?

I should be able to give this a try tomorrow.

thanks,

-Chris

-- 
Christopher Barker, Ph.D.
Oceanographer
                                     		
NOAA/OR&R/HAZMAT         (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker at noaa.gov


From gerald.evenden at verizon.net  Wed Jul 26 17:15:43 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Wed, 26 Jul 2006 20:15:43 -0400
Subject: [Proj] How to Scale a Mercator projection?
In-Reply-To: <44C7D34A.1030801@noaa.gov>
References: <44C67AB8.6070100@noaa.gov>
	<200607261127.06439.gerald.evenden@verizon.net>
	<44C7D34A.1030801@noaa.gov>
Message-ID: <200607262015.43634.gerald.evenden@verizon.net>

On Wednesday 26 July 2006 4:40 pm, Christopher Barker wrote:
> Gerald,
>
> Thanks for your helpful comments -- I think I'm slowly starting to get
> this.
>
> Gerald I. Evenden wrote:
> > I use the term "scale factor" to mean a factor to multiply the annotated
> > scale of the map to arrive at the true scale at a particular point.  For
> > example: k_0=0.9996 is the scale factor along the CM of a Transverse
> > Mercator map and means that the true scale is determined by 0.9996 x
> > map-scale.
>
> OK - got it. Can i assume that proj is outputting meters, then?
>
> > By "true" they mean that the scale at that latitude matches the scale
> > annotated in the margin of the map (1:xxx,xxx).
>
> That's what I thought.
>
> > Internally, proj does not allow simultaneous use of lat_ts and k_0.  Such
> > use would grossly confuse usage.
> >
> > Proj does *not* determine the scale of the projection in the general
> > sense. That is determined by either scaling the major axis/radius (a=) or
> > scaling the x/y output by the application.  Any map making application
> > that uses proj should consider the map scale as the application's duty.
>
> That's key. Thanks for clarifying that for me. I was looking to have
> Proj do the whole thing for me -- now that I know that It's not supposed
> to to that, I know what to do.
>
> But just in case, I think this is what I need to do:
>
> use:
>
> proj=merc +lat_ts=29.1333 +lon_0=-89.583333 +ellps=WGS84 +datum=WGS84
> +units=m

With the above parameters you should get x/y values in meters with the scale 
factor of 1. at the latitude of 29+ degrees.  The datum= option is not part 
of my libproj4 so I cannot comment on what effect that parameter has other 
than possibly altering the input geographic coordinates.

> That will give me the coordinates in meters.

A factor mentioned in the original proj Open File manual was that the units of 
the x/y values are always in the same units specified for the major axis: a= 
or R=.  In this case the internal ellipsoid table list was use where *all* 
values are in meters.

> Then I need to multiply this by the scale (1/80000) and divide the
> pixels per meter (10,000), to get pixels. then I need to shift to get
> the coordinates to (0,0) at the appropriate place.
>
> Another alternative is to set the false easting and false northing to
> get (0,0) in the right place. I think those are set in meters.

Again, any Cartesian unit value, like false easting and northing, must be in 
the same units as the major axis.  In this case meters.

If one were working in India on earlier surveys one might be using the Indian 
yard for a= and false easting and northing.  Similarly, the U.S. surveyor's 
foot might be appropriate for NAD 28 coordinates.

The simple thing to remember that any Cartesian manipulations that you expect 
proj to perform internally are in the same units of the major axis or radius.

Keep in mind that when you scale to map coordinates you will need to not only 
do the map-scale multiplication (or division) but also the scaling to the 
units of the graphic output device.  The transmogrification needed to get the 
meters to the graphic output are why I considered them to be the 
application's problem.

> Is that about right?
>
> I should be able to give this a try tomorrow.
>
> thanks,
>
> -Chris

-- 
Jerry and the low-riders: Daisy Mae and Joshua
"Cogito cogito ergo cogito sum"
   Ambrose Bierce, The Devil's Dictionary


From yrusinov at gmail.com  Wed Jul 26 23:25:24 2006
From: yrusinov at gmail.com (Yuriy Rusinov)
Date: Thu, 27 Jul 2006 10:25:24 +0400
Subject: [Proj] Projections list
In-Reply-To: <44C77A05.4040001@pobox.com>
References: <1ac023f40607260658k45f6fc0awf0ac9a5b0051b4d5@mail.gmail.com>
	<44C77A05.4040001@pobox.com>
Message-ID: <1ac023f40607262325w4fb14e40m2a670ee1c3e65178@mail.gmail.com>

Hello, Frank !

Try:
>
>     proj -lp | more


Thanks a lot, this is work, but documentation should be updated.


-- 
Best regards,
Sincerely yours,
Yuriy Rusinov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060727/8689129f/attachment.html>

From tutey at o2.pl  Thu Jul 27 04:25:38 2006
From: tutey at o2.pl (Maciej Sieczka)
Date: Thu, 27 Jul 2006 13:25:38 +0200
Subject: [Proj] Projections list
In-Reply-To: <1ac023f40607262325w4fb14e40m2a670ee1c3e65178@mail.gmail.com>
References: <1ac023f40607260658k45f6fc0awf0ac9a5b0051b4d5@mail.gmail.com>	<44C77A05.4040001@pobox.com>
	<1ac023f40607262325w4fb14e40m2a670ee1c3e65178@mail.gmail.com>
Message-ID: <44C8A2B2.6020307@o2.pl>

Yuriy Rusinov napisał(a):
> Hello, Frank !
> 
> Try:
>>
>>     proj -lp | more
> 
> 
> Thanks a lot, this is work, but documentation should be updated.


?

'man proj' says:

-l[p|P|=|e|u|d]id
              List projection identifiers with -l,  -lp
              or  -lP  (expanded)  that can be selected
              with   +proj.    -l=id   gives   expanded
              description   of   projection  id.   List
              ellipsoid identifiers with -le, that  can
              be  selected  with  +ellps,  -lu  list of
              cartesian  to  meter  conversion  factors
              that  can  be selected with +units or -ld
              list of datums that can be selected  with
              +datum.



From yrusinov at gmail.com  Thu Jul 27 04:55:47 2006
From: yrusinov at gmail.com (Yuriy Rusinov)
Date: Thu, 27 Jul 2006 15:55:47 +0400
Subject: [Proj] Projections list
In-Reply-To: <44C8A2B2.6020307@o2.pl>
References: <1ac023f40607260658k45f6fc0awf0ac9a5b0051b4d5@mail.gmail.com>
	<44C77A05.4040001@pobox.com>
	<1ac023f40607262325w4fb14e40m2a670ee1c3e65178@mail.gmail.com>
	<44C8A2B2.6020307@o2.pl>
Message-ID: <1ac023f40607270455l514849e2xd113ee482f701c94@mail.gmail.com>

Hello, All !


Yuriy Rusinov napisał(a):
> > Hello, Frank !
> >
> > Try:
> >>
> >>     proj -lp | more
> >
> >
> > Thanks a lot, this is work, but documentation should be updated.


Sorry for stupid question, I saw file OF90-284.pdf from official site and
find proj +proj=list | more that was not works.


-- 
Best regards,
Sincerely yours,
Yuriy Rusinov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060727/05d8e798/attachment.html>

From gerald.evenden at verizon.net  Thu Jul 27 08:08:00 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Thu, 27 Jul 2006 11:08:00 -0400
Subject: [Proj] Projections list
In-Reply-To: <1ac023f40607270455l514849e2xd113ee482f701c94@mail.gmail.com>
References: <1ac023f40607260658k45f6fc0awf0ac9a5b0051b4d5@mail.gmail.com>
	<44C8A2B2.6020307@o2.pl>
	<1ac023f40607270455l514849e2xd113ee482f701c94@mail.gmail.com>
Message-ID: <200607271108.00115.gerald.evenden@verizon.net>

On Thursday 27 July 2006 7:55 am, Yuriy Rusinov wrote:
	...
> Sorry for stupid question, I saw file OF90-284.pdf from official site and
> find proj +proj=list | more that was not works.

The OF90-284 report was written very early in proj's history and there are 
several items that are out of date.

When using program proj or lproj use the [l]proj.1 for program options and the 
later pdf files for projection details.

[l]proj -l      or [l]proj -lp     -> one line list of projections
[l]proj -lP                            -> expanded list of projections
[l]proj -le	                           -> list of ellipsoids  (ellps=)
[l]proj -lu                             -> list of unit conversions  (units=)

-- 
Jerry and the low-riders: Daisy Mae and Joshua
"Cogito cogito ergo cogito sum"
   Ambrose Bierce, The Devil's Dictionary


From yrusinov at gmail.com  Thu Jul 27 22:45:21 2006
From: yrusinov at gmail.com (Yuriy Rusinov)
Date: Fri, 28 Jul 2006 09:45:21 +0400
Subject: [Proj] Projections list
In-Reply-To: <200607271108.00115.gerald.evenden@verizon.net>
References: <1ac023f40607260658k45f6fc0awf0ac9a5b0051b4d5@mail.gmail.com>
	<44C8A2B2.6020307@o2.pl>
	<1ac023f40607270455l514849e2xd113ee482f701c94@mail.gmail.com>
	<200607271108.00115.gerald.evenden@verizon.net>
Message-ID: <1ac023f40607272245v1afee42ft3dc039ba96dae531@mail.gmail.com>

Hello !


> When using program proj or lproj use the [l]proj.1 for program options and
> the
> later pdf files for projection details.
>
> [l]proj -l      or [l]proj -lp     -> one line list of projections
> [l]proj -lP                            -> expanded list of projections
> [l]proj -le                                -> list of ellipsoids  (ellps=)
> [l]proj -lu                             -> list of unit
> conversions  (units=)


Thanks a lot, question is solved.

-- 
Best regards,
Sincerely yours,
Yuriy Rusinov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060728/c048ffb6/attachment.html>

From tutey at o2.pl  Sun Jul 30 11:20:21 2006
From: tutey at o2.pl (Maciej Sieczka)
Date: Sun, 30 Jul 2006 20:20:21 +0200
Subject: [Proj] new Proj release?
Message-ID: <44CCF865.6070000@o2.pl>

Frank,

I'm sure you are overloaded with work anyway, but there's another long
time pending thing.

When can we expect new release of your Proj? There's been a number of
updates in the EPSG database, which Proj CVS includes now, that should
be made available to Proj and Proj based software users. Also, there are
14 European grids which in 4.4.9 are based on 'stere' (in error) while
only the current Proj CVS uses the correct 'sterea' for them.

Sorry for bothering you but this is quite an important issue. Can you
let know what is the status?

Maciek


From wynand at kreon.co.za  Mon Jul 31 07:47:41 2006
From: wynand at kreon.co.za (Wynand Kruger)
Date: Mon, 31 Jul 2006 16:47:41 +0200
Subject: [Proj] First attempt of porting PROJ.4 to Windows CE
Message-ID: <00e801c6b4b0$48327d30$1600a8c0@wynand>

Hi Mateusz,

I apologise for taking so long to come back to you.  Thanks for the ZIP
file.  I will have a look at it and let you know.

Regards
Wynand

-- 
This message was scanned for viruses by MailScanner and Sophos.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060731/02d77ed5/attachment.html>

