From nhv at cape.com  Thu Dec  1 18:56:46 2005
From: nhv at cape.com (Norman Vine)
Date: Thu, 1 Dec 2005 21:56:46 -0500
Subject: [Proj] FW: SCAR Antarctic PS projection issue in proj
Message-ID: <EKEJIKAILPONGGENMBGAAELOOBAA.nhv@cape.com>


> -----Original Message-----
> From: Mark Fahnestock
> Sent: Thursday, December 01, 2005 5:13 PM
> To: norman vine
> Subject: SCAR Antarctic PS projection issue in proj
> 
> 
> Hi Norman,
> 
> Here is the detail on the issue I talked to you about regarding  
> setting up a WCS for the SCAR projection - this projection has an  
> EPSG identifier, but is not making it in to proj:
> 
> This projection is in the EPSG database, but doesn't survive some  
> translation stage that generates the epsg file in /usr/local/share/proj
> 
> 
> EPSG:3031 is the SCAR Antarctic Polar Stereographic Projection - lat0  
> -90  lon0 0 lat_ts -71  ellipsoid WGS84 datum WGS84  Units meters -  
> note that the scale factor is 1.0, because lat_ts is set.  I believe  
> that for PS projections, the scale factor is used (or is different  
> than 1.0) only when the latitude of true scale is not used.
> 
> the older instances of proj I have on my systems do not have this  
> entry at all, but this entry (see below) leads me to think that the  
> translation may be fixable.  Note that the <3031. is missing because  
> of the error.  I don't know if this is the only affected file, or if  
> there would be others that would need to contain this entry.
> 
> 
> from .../share/proj/epsg:
> <3027> +proj=tmerc +lat_0=0 +lon_0=15.80827777777778 +k=1.000000  
> +x_0=1500000 +y_0=0 +ellps=bessel +units=m +no_defs  <>
> # RT38 0 gon
> <3028> +proj=tmerc +lat_0=0 +lon_0=18.05827777777778 +k=1.000000  
> +x_0=1500000 +y_0=0 +ellps=bessel +units=m +no_defs  <>
> # RT38 2.5 gon O
> <3029> +proj=tmerc +lat_0=0 +lon_0=20.30827777777778 +k=1.000000  
> +x_0=1500000 +y_0=0 +ellps=bessel +units=m +no_defs  <>
> # RT38 5 gon O
> <3030> +proj=tmerc +lat_0=0 +lon_0=22.55827777777778 +k=1.000000  
> +x_0=1500000 +y_0=0 +ellps=bessel +units=m +no_defs  <>
> # WGS 84 / Antarctic Polar Stereographic
> # Unable to translate coordinate system into PROJ.4 format.
> #
> # WGS 84 / Australian Antarctic Polar Stereographic
> # Unable to translate coordinate system into PROJ.4 format.
> #
> # WGS 84 / Australian Antarctic Lambert
> <3033> +proj=lcc +lat_1=-68.5 +lat_2=-74.5 +lat_0=-50 +lon_0=70  
> +x_0=6000000 +y_0=6000000 +ellps=WGS84 +datum=WGS84 +units=m  
> +no_defs  <>
> # ETRS89 / ETRS-LCC
> <3034> +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000  
> +y_0=2800000 +ellps=GRS80 +units=m +no_defs  <>
> # ETRS89 / ETRS-LAEA
> <3035> +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000  
> +ellps=GRS80 +units=m +no_defs  <>
> # Moznet / UTM zone 36S
> <3036> +proj=utm +zone=36 +south +ellps=WGS84  
> +towgs84=0,0,0,-0,-0,-0,0 +units=m +no_defs  <>
> 
> Thanks for checking in to this,
> 
> Mark
> 
> 


From ovv at hetnet.nl  Fri Dec  2 14:28:00 2005
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Fri, 02 Dec 2005 23:28:00 +0100
Subject: [Proj] FW: SCAR Antarctic PS projection issue in proj
In-Reply-To: <EKEJIKAILPONGGENMBGAAELOOBAA.nhv@cape.com>
Message-ID: <BFB688FF.6135%ovv@hetnet.nl>


> From: "Norman Vine" <nhv-cape.com>
>> -----Original Message-----
>> From: Mark Fahnestock
>> Here is the detail on the issue I talked to you about regarding
>> setting up a WCS for the SCAR projection - this projection has an
>> EPSG identifier, but is not making it in to proj:
>> This projection is in the EPSG database, but doesn't survive some
>> translation stage that generates the epsg file in /usr/local/share/proj

There are 53 such instances.
How come? No method available to support the projections in question?

# Unable to translate coordinate system into PROJ.4 format.

# Hartebeesthoek94 / Lo15
# Hartebeesthoek94 / Lo17
# Hartebeesthoek94 / Lo19
# Hartebeesthoek94 / Lo21
# Hartebeesthoek94 / Lo23
# Hartebeesthoek94 / Lo25
# Hartebeesthoek94 / Lo27
# Hartebeesthoek94 / Lo29
# Hartebeesthoek94 / Lo31
# Hartebeesthoek94 / Lo33
# Scoresbysund 1952 / Greenland zone 5 east
# Scoresbysund 1952 / Greenland zone 6 east
# Ammassalik 1958 / Greenland zone 7 east
# Qornoq 1927 / Greenland zone 1 east
# Qornoq 1927 / Greenland zone 2 east
# Qornoq 1927 / Greenland zone 2 west
# Qornoq 1927 / Greenland zone 3 east
# Qornoq 1927 / Greenland zone 3 west
# Qornoq 1927 / Greenland zone 4 east
# Qornoq 1927 / Greenland zone 4 west
# Qornoq 1927 / Greenland zone 5 west
# Qornoq 1927 / Greenland zone 6 west
# Qornoq 1927 / Greenland zone 7 west
# Qornoq 1927 / Greenland zone 8 east
# Lisbon 1890 (Lisbon) / Portugal Bonne
# Petrels 1972 / Terre Adelie Polar Stereographic
# Perroud 1950 / Terre Adelie Polar Stereographic
# WGS 84 / Antarctic Polar Stereographic
# WGS 84 / Australian Antarctic Polar Stereographic
# Reykjavik 1900 / Lambert 1900
# Hjorsey 1955 / Lambert 1955
# South African Coordinate System zone 15
# South African Coordinate System zone 17
# South African Coordinate System zone 19
# South African Coordinate System zone 21
# South African Coordinate System zone 23
# South African Coordinate System zone 25
# South African Coordinate System zone 27
# South African Coordinate System zone 29
# South African Coordinate System zone 31
# South African Coordinate System zone 33
# Carthage (Paris) / Tunisia Mining Grid
# South West African Coord. System zone 11
# South West African Coord. System zone 13
# South West African Coord. System zone 15
# South West African Coord. System zone 17
# South West African Coord. System zone 19
# South West African Coord. System zone 21
# South West African Coord. System zone 23
# South West African Coord. System zone 25
# WGS 84 / UTM grid system (northern hemisphere)
# WGS 84 / Plate Carree
# WGS 84 / UTM grid system (southern hemisphere)





From martin.vermeer at hut.fi  Sat Dec  3 08:59:39 2005
From: martin.vermeer at hut.fi (Martin Vermeer)
Date: Sat, 3 Dec 2005 18:59:39 +0200
Subject: [Proj] FW: SCAR Antarctic PS projection issue in proj
In-Reply-To: <EKEJIKAILPONGGENMBGAAELOOBAA.nhv@cape.com>
References: <EKEJIKAILPONGGENMBGAAELOOBAA.nhv@cape.com>
Message-ID: <20051203165939.GA4896@geo9.hut.fi>

On Thu, Dec 01, 2005 at 09:56:46PM -0500, Norman Vine wrote:
> 
> > -----Original Message-----
> > From: Mark Fahnestock
> > Sent: Thursday, December 01, 2005 5:13 PM
> > To: norman vine
> > Subject: SCAR Antarctic PS projection issue in proj
> > 
> > 
> > Hi Norman,
> > 
> > Here is the detail on the issue I talked to you about regarding  
> > setting up a WCS for the SCAR projection - this projection has an  
> > EPSG identifier, but is not making it in to proj:
> > 
> > This projection is in the EPSG database, but doesn't survive some  
> > translation stage that generates the epsg file in /usr/local/share/proj
> > 
> > 
> > EPSG:3031 is the SCAR Antarctic Polar Stereographic Projection - lat0  
> > -90  lon0 0 lat_ts -71  ellipsoid WGS84 datum WGS84  Units meters -  
> > note that the scale factor is 1.0, because lat_ts is set.  I believe  
> > that for PS projections, the scale factor is used (or is different  
> > than 1.0) only when the latitude of true scale is not used.
> > 
> > # WGS 84 / Antarctic Polar Stereographic
> > # Unable to translate coordinate system into PROJ.4 format.
> > #
> > # WGS 84 / Australian Antarctic Polar Stereographic
> > # Unable to translate coordinate system into PROJ.4 format.


Googling I found the following old (2002) message by Frank Warmerdam:

"Generally this happens when there is more than one approximation available for
a datum (to WGS84) in the EPSG tables, as the auto-translation code can't
decide which to use.  I also doubt that the EPSG to PROJ.4 stuff properly
accounts for non-greenwich prime meridians.

Have you tried preparing a PROJ.4 definition yourself?"

HTH Martin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20051203/1c11596e/attachment.sig>

From werchowyna at epf.pl  Sat Dec  3 11:53:46 2005
From: werchowyna at epf.pl (Maciek Sieczka)
Date: Sat, 03 Dec 2005 20:53:46 +0100
Subject: [Proj] GRS80 vs GRS80 +towgs84=0,0,0
Message-ID: <1133639626.8045.22.camel@localhost.localdomain>

Hi,

I've encountered one small thing using cs2cs I don't understand. There
is a difference in results when converting between WGS84 and GRS80 based
systems - when the towgs84=0,0,0 is given for GRS80 and when it is not:

cs2cs -f "%.6f" +proj=latlong +ellps=WGS84 +to +proj=tmerc +lat_0=0
lon_0=19 +k=0.9993 +x_0=500000 +y_0=-5300000 +ellps=GRS80 +towgs84=0,0,0

17d01'0.0E 51d07'0.0N
361227.112181   362969.278159 0.000063

But, if I don't specify the +towgs84=0,0,0 in the target coordinate
system, I obtain a slightly different result:

cs2cs -f "%.6f" +proj=latlong +ellps=WGS84 +to +proj=tmerc +lat_0=0
+lon_0=19 +k=0.9993 +x_0=500000 +y_0=-5300000 +ellps=GRS80

17d01'0.0E 51d07'0.0N
361227.112178   362969.278057 0.000000

The difference is less than 1 mm, but anyway - why? I thought that no
matter if I specify the towgs84=0,0,0 for GRS80 or not I would obtain
the same results. 

Maciek


--------------------
Historia, kt�ra przeros�a fikcj�. Chcesz pozna� rozwi�zanie jednej z najwi�kszych tajemnic II wojny �wiatowej? 
Przeczytaj BURSZTYNOW� KOMNAT�, Catherine Scott-Clark, Adrian Levy
http://www.rebis.com.pl/rebis/strony/pokaz_ksiazke.html?id=32787



From warmerdam at pobox.com  Sat Dec  3 12:43:20 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat, 3 Dec 2005 15:43:20 -0500
Subject: [Proj] GRS80 vs GRS80 +towgs84=0,0,0
In-Reply-To: <1133639626.8045.22.camel@localhost.localdomain>
References: <1133639626.8045.22.camel@localhost.localdomain>
Message-ID: <931f8ea90512031243j4062584ft1f5037f490f87622@mail.gmail.com>

On 12/3/05, Maciek Sieczka <werchowyna at epf.pl> wrote:
> Hi,
>
> I've encountered one small thing using cs2cs I don't understand. There
> is a difference in results when converting between WGS84 and GRS80 based
> systems - when the towgs84=0,0,0 is given for GRS80 and when it is not:
>
> cs2cs -f "%.6f" +proj=latlong +ellps=WGS84 +to +proj=tmerc +lat_0=0
> lon_0=19 +k=0.9993 +x_0=500000 +y_0=-5300000 +ellps=GRS80 +towgs84=0,0,0
>
> 17d01'0.0E 51d07'0.0N
> 361227.112181   362969.278159 0.000063
>
> But, if I don't specify the +towgs84=0,0,0 in the target coordinate
> system, I obtain a slightly different result:
>
> cs2cs -f "%.6f" +proj=latlong +ellps=WGS84 +to +proj=tmerc +lat_0=0
> +lon_0=19 +k=0.9993 +x_0=500000 +y_0=-5300000 +ellps=GRS80
>
> 17d01'0.0E 51d07'0.0N
> 361227.112178   362969.278057 0.000000
>
> The difference is less than 1 mm, but anyway - why? I thought that no
> matter if I specify the towgs84=0,0,0 for GRS80 or not I would obtain
> the same results.

Maciek,

In the case you specify the +towgs84, no ellipsoid conversion
is done.  In the case without +towgs84, an ellipsoid conversion
is done.  The WGS84 and GRS80 are essentially the same
but there is a small difference.

    WGS84 a=6378137.0      rf=298.257223563 WGS 84
    GRS80 a=6378137.0      rf=298.257222101 GRS 1980(IUGG, 1980)

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From werchowyna at epf.pl  Sat Dec  3 13:00:16 2005
From: werchowyna at epf.pl (Maciek Sieczka)
Date: Sat, 03 Dec 2005 22:00:16 +0100
Subject: [Proj] GRS80 vs GRS80 +towgs84=0,0,0
In-Reply-To: <931f8ea90512031243j4062584ft1f5037f490f87622@mail.gmail.com>
References: <1133639626.8045.22.camel@localhost.localdomain>
	<931f8ea90512031243j4062584ft1f5037f490f87622@mail.gmail.com>
Message-ID: <1133643616.9707.13.camel@localhost.localdomain>

> Maciek,
> 
> In the case you specify the +towgs84, no ellipsoid conversion
> is done.  In the case without +towgs84, an ellipsoid conversion
> is done.  The WGS84 and GRS80 are essentially the same
> but there is a small difference.
> 
>     WGS84 a=6378137.0      rf=298.257223563 WGS 84
>     GRS80 a=6378137.0      rf=298.257222101 GRS 1980(IUGG, 1980)

So the formaly "right" approach is not to use any +towgs84= for GRS80,
is it?

Maciek

Best regards,
Maciek


--------------------
Historia, kt�ra przeros�a fikcj�. Chcesz pozna� rozwi�zanie jednej z najwi�kszych tajemnic II wojny �wiatowej? 
Przeczytaj BURSZTYNOW� KOMNAT�, Catherine Scott-Clark, Adrian Levy
http://www.rebis.com.pl/rebis/strony/pokaz_ksiazke.html?id=32787



From martin.vermeer at hut.fi  Sat Dec  3 13:14:58 2005
From: martin.vermeer at hut.fi (Martin Vermeer)
Date: Sat, 3 Dec 2005 23:14:58 +0200
Subject: [Proj] GRS80 vs GRS80 +towgs84=0,0,0
In-Reply-To: <1133639626.8045.22.camel@localhost.localdomain>
References: <1133639626.8045.22.camel@localhost.localdomain>
Message-ID: <20051203211457.GB6636@geo9.hut.fi>

On Sat, Dec 03, 2005 at 08:53:46PM +0100, Maciek Sieczka wrote:
> Hi,
> 
> I've encountered one small thing using cs2cs I don't understand. There
> is a difference in results when converting between WGS84 and GRS80 based
> systems - when the towgs84=0,0,0 is given for GRS80 and when it is not:
> 
> cs2cs -f "%.6f" +proj=latlong +ellps=WGS84 +to +proj=tmerc +lat_0=0
> lon_0=19 +k=0.9993 +x_0=500000 +y_0=-5300000 +ellps=GRS80 +towgs84=0,0,0
> 
> 17d01'0.0E 51d07'0.0N
> 361227.112181   362969.278159 0.000063
> 
> But, if I don't specify the +towgs84=0,0,0 in the target coordinate
> system, I obtain a slightly different result:
> 
> cs2cs -f "%.6f" +proj=latlong +ellps=WGS84 +to +proj=tmerc +lat_0=0
> +lon_0=19 +k=0.9993 +x_0=500000 +y_0=-5300000 +ellps=GRS80
> 
> 17d01'0.0E 51d07'0.0N
> 361227.112178   362969.278057 0.000000
> 
> The difference is less than 1 mm, but anyway - why? I thought that no
> matter if I specify the towgs84=0,0,0 for GRS80 or not I would obtain
> the same results. 
> 
> Maciek

I would guess this relates to the notorious "GRS80 vs WGS84
flattening" bug.

The official flattening of the GRS80 reference ellipsoid is
1/298.257222101. That of WGS84 is 1/298.257223563. Difference presumably
due to limited numerical precision when constructing WGS84. Otherwise
they are the same. This propagates into UTM coordinates on the
mm level, when using the two different ellipsoids. 

Note that I have no idea what proj does internally: perhaps adding the
+towgs84 switch overrides the earlier +ellps=GRS80 for the target's
projection ellipsoid. This is easily tested: try +ellps=WGS84 on output,
without +towgs84. You should get the same result... actually you won't:
I get

361227.112180   362969.278180 0.000000

so this is not the whole story...

Actually GRS80 and WGS84 are entirely different beasts: the former is a
reference system (ellipsoid + normal gravity model and related
parameters) while the latter is a geodetic datum realized by points on
the Earth's surface.

There are several such realizations around: ITRF, ETRF, EUREF, ... at
various epochs. On the few-decimetre level they are identical, which is
good enough for GIS applications, but for geodesy they are not.

- Martin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20051203/d7cfa69a/attachment.sig>

From j.l.h.hartmann at uva.nl  Thu Dec  1 10:23:36 2005
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu, 01 Dec 2005 19:23:36 +0100
Subject: [Proj] Meaning of 7-parameter transformation rotations
In-Reply-To: <931f8ea90511301116l1a710336t213fedb040f2f445@mail.gmail.com>
References: <OFD56614CD.D1E8C666-ON862570C9.00683744-862570C9.00683765@lsu.edu>
	<931f8ea90511301116l1a710336t213fedb040f2f445@mail.gmail.com>
Message-ID: <438F3FA8.6000700@uva.nl>

Frank Warmerdam wrote:
> On 11/30/05, Clifford J Mugnier <cjmce at lsu.edu> wrote:
> 
>>
>>
>>
>>Gentlemen:
>>
>>Note that the SENSE of the rotations have two common usages.  The American
>>Standard versus the European Standard differ!  To transform in the same
>>direction, the signs are OPPOSITE from one "standard" to another.
>>Generally speaking, a 7-parameter  transformation, whether it is a
>>Bursa-Wolfe or a Molodensky, MUST have a "test point" provided so that the
>>user knows which sense the rotations need for the desired transformation
>>direction.
>>
>>The Americans, Australians, and Luxemborgs use one SENSE, the Europeans use
>>the other.  In regard to the rest of the world, it depends on which
>>brand-name of GPS Geodetic Processing software was used to derive the
>>parameters from some collection of data points.  See my monthly column for
>>such important minutiae for country to country considerations.
>>
>>Be careful of 'dem signs!  :-)
> 
> 
> Cliff,
> 
> Your point is quite correct.  I believe that PROJ
> is using the European definition so that we can directly
> apply the numbers from EPSG.
> 

Yes, PROJ uses the "European" definition. Take as an example EPSG 
Coordinate Transformation 49, Amersfoort to ETRS89(1). The coefficients 
given here are "expressed in the standard NIMA righthanded rotation sign 
convention" (see Clifford Mugnier's column on Grids and Datums 
(http://www.asprs.org/resources/grids/ ,the Netherlands). For PROJ the 
rotation signs have to be reversed, so PROJ uses the left-handed sign 
convention common in Europe. Note also that PROJ uses arcseconds, EPSG 
microradians (in this case), so rotations have to be multiplied by 
0.206264806.

The equivalent parameters for EPSG and PROJ are in this case:
EPSG:
  565.04   49.91 465.84   1.9848  -1.7439  9.0587   4.0772
PROJ:
  565.04,  49.91 465.84  -0.4094   0.3597 -1.8685   4.0772


BTW: Dutch sources give both definitions:

http://www.rdnap.nl/download/coor-en-proj.zip, p. 44 (left)
http://www.rdnap.nl/download/rdnaptrans.pdf, p. 33 (right)

Jan



From antonin.orlik.hgf at vsb.cz  Fri Dec  2 14:13:23 2005
From: antonin.orlik.hgf at vsb.cz (Antonin Orlik)
Date: Fri, 02 Dec 2005 23:13:23 +0100
Subject: [Proj] Coordinates transformation - Proj4, GDAL, OGR, PostGIS,
	MapServer
Message-ID: <4390C703.3030105@vsb.cz>

Dear developers,

I'm not sure who is responsible for the problem that I'm going to 
describe. This problem is very serious for me and for a lot of other 
people who are trying to use Open Source GIS software (especially in the 
Czech republic).

1.
Library PROJ.4 has (next to the "*proj*" program) also program "*cs2cs*" 
("/The new *cs2cs* program performs a similar function to the *proj* 
program, but transforming from any one coordinate system to another. The 
new *pj_transform()* is used to access the extended coordinate system to 
coordinate system transformation with datum shifting/."). This program 
is a great thing, but unfortunately it looks like just a few GIS 
programs are using *cs2cs* instead of the *proj* program. For example, 
there is no problem with the coordinate transformation used in the 
PostGIS (which probably uses *cs2cs*). However,  the utilities of the 
*GDAL* and the *OGR* library, which are a base for a lot of other 
applications (MapServer, QGIS and so on), are probably using the *proj* 
program for coordinate transformations. This fact makes quite a big 
position shift after the coordinate transformation between coordinate 
systems based on diferent ellipsoids (*proj* program cannot make datum 
shifting). Finally, it is not possible to transform data correctly or to 
display more datasets based on different ellipsoids in a detailed view 
by the way of on-the-fly projection (the shift between elipsoids is 
often bigger than 100 meters).

Does somebody have any ideas? Is possible to make changes in the GDAL 
and OGR source codes and use the *cs2cs* instead of the *proj* program?


2.
(probably to Frank Warmerdam)
In the Czech Republic we are using a strange coordinate system known as 
"krovak" (S-JTSK). This system has a strange axis orientation that is 
very hard to apply in the computer world, so nobody is using this axis 
orientation in GIS. Instead everybody is using switched axis ( X = -y, Y 
= -x ). If somebody would like to use proj.4 library, they have to use a 
patch for proj.4 library ( 
http://mpa.itc.it/radim/jtsk/PJ_krovak.c.patch ). For a lot of people it 
is very hard to apply this patch because they are just users who want to 
use an open source GIS software that uses proj.4 library. I can remember 
that this problem was discused by Radim Blazek and Frank Warmerdam but 
no successfull result were found... I think.

Is there any possibility to include this patch into an official version 
of proj.4 library? Or in the case that you want to keep this a 
"well-defined" krovak system, is possible to make a new definition of 
krovak with a different EPSG code (and keep the old one (esri:102065) in 
case there is an individual person who is using this definition)?


These two problems are major for a lot of people that I know and these 
are two of the main reasons why they are not going to use open source 
GIS software (and that is pity of course)...


Thank you for feedback.

Best regards,
Antonin Orlik

-- 
Ing. Antonin Orlik
Institute of Geoinformatics
VSB-Technical University of Ostrava
17.listopadu 15/2172
708 33 Ostrava-Poruba

E-mail: antonin.orlik.hgf at vsb.cz
Office: J 327
Tel: +420 59 732 3337
Mobile: +420 604 333 744
ICQ: 54928537

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20051202/03ae966d/attachment.html>

From ovv at hetnet.nl  Sat Dec  3 14:45:38 2005
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Sat, 03 Dec 2005 23:45:38 +0100
Subject: [Proj] FW: SCAR Antarctic PS projection issue in proj
In-Reply-To: <20051203165939.GA4896@geo9.hut.fi>
Message-ID: <BFB7DEA2.6148%ovv@hetnet.nl>


>>> -----Original Message-----
>>> From: Mark Fahnestock
....
>>> Here is the detail on the issue I talked to you about regarding
>>> setting up a WCS for the SCAR projection - this projection has an
>>> EPSG identifier, but is not making it in to proj:
....
>>> # WGS 84 / Antarctic Polar Stereographic
>>> # Unable to translate coordinate system into PROJ.4 format.
>>> #
>>> # WGS 84 / Australian Antarctic Polar Stereographic
>>> # Unable to translate coordinate system into PROJ.4 format.

> From: Martin Vermeer <martin.vermeer-hut.fi>
> Googling I found the following old (2002) message by Frank Warmerdam:
> "Generally this happens when there is more than one approximation available
> for
> a datum (to WGS84) in the EPSG tables, as the auto-translation code can't
> decide which to use.  I also doubt that the EPSG to PROJ.4 stuff properly
> accounts for non-greenwich prime meridians.

Let's see how this theory relates to the actual data in the EPSG database.
I used the SQL version 6.7. There is a version 6.8, but at the moment
epsg.org is not connected.
What has the EPSG database to say about: WGS 84 / Antarctic Polar
Stereographic?
(Some not so relevant info not copied here):

>From the coordinate reference system table:

coord_ref_sys_code: 3031
coord_ref_sys_name: WGS 84 / Antarctic Polar Stereographic
area_of_use_code: 1031
coord_ref_sys_kind: projected
coord_sys_code: 4490
datum_code: Null
source_geogcrs_code: 4326
projection_conv_code: 19992
crs_scope: Antarctic Digital Database and small scale (<1:1,000,000) studies
and topographic mapping.

Following the coord_sys_code entry:

coord_sys_code: 4490
coord_sys_name: Cartesian 2D CS for APS. Axes: E,N. Orientations: E along 90
deg East, N along 0 deg meridians. UoM: m.
coord_sys_type: Cartesian
dimension: 2
remarks: Used for South Pole tangential and secant projections.

It's a derived CRS, namely from the CRS mentioned in the field
source_geogcrs_code.
This brings us after a couple of related tables to the basis, which is not
very interesting.
Let's see what the primary coordinate operation is, mentioned in the
original field projection_conv_code.

coord_op_code: 19992
coord_op_name: Antarctic Polar Stereographic
coord_op_type: conversion
source_crs_code: Null
target_crs_code: Null
coord_tfm_version: 
coord_op_variant: Null
area_of_use_code: 1031
coord_op_scope: 1: Antarctic Digital Database and small scale (<1:1,000,000)
studies and topographic mapping. 2: Medium scale studies and topographic
mapping south of 80 deg S.
coord_op_accuracy: 0
coord_op_method_code: 9829
remarks: Special studies may use a different projection using an alternative
longitude of origin. See for example projection code 19993.

The coordinate operation method is:

coord_op_method_code: 9829
coord_op_method_name: Polar Stereographic (variant B)
reverse_op: 1
formula: (see EPSG guidance note #7.2)
example: (see EPSG guidance note #7.2)

The projection parameters can be found in the table
"coordoperationparamvalue" under coord_op_code: 19992
This gives:

False easting: 0
False northing: 0
Latitude of standard parallel: -71
Longitude of origin: 0


In conclusion, my theory is that the projection method is unambiguously
clear, but that either "Polar Stereographic (variant B)" is not supported by
PROJ.4 or that it was somehow not possible to construct relevant PROJ.4
arguments for any PROJ.4 method (stere perhaps) on the fly.




From warmerdam at pobox.com  Sat Dec  3 15:18:26 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat, 3 Dec 2005 18:18:26 -0500
Subject: [Proj] FW: SCAR Antarctic PS projection issue in proj
In-Reply-To: <BFB7DEA2.6148%ovv@hetnet.nl>
References: <20051203165939.GA4896@geo9.hut.fi> <BFB7DEA2.6148%ovv@hetnet.nl>
Message-ID: <931f8ea90512031518n608fec8dl9022d61cb1ee9b45@mail.gmail.com>

On 12/3/05, Oscar van Vlijmen <ovv at hetnet.nl> wrote:
> In conclusion, my theory is that the projection method is unambiguously
> clear, but that either "Polar Stereographic (variant B)" is not supported by
> PROJ.4 or that it was somehow not possible to construct relevant PROJ.4
> arguments for any PROJ.4 method (stere perhaps) on the fly.

Oscar,

I believe you are correct.  Note, it would be more accurate to say that
I was not aware of a PROJ.4 equivelent or never even analysed it.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From martin.vermeer at hut.fi  Sun Dec  4 05:14:31 2005
From: martin.vermeer at hut.fi (Martin Vermeer)
Date: Sun, 4 Dec 2005 15:14:31 +0200
Subject: [Proj] Patch
Message-ID: <20051204131431.GA3382@geo9.hut.fi>


Slight clean-up.

- Martin

-------------- next part --------------
Index: pj_transform.c
===================================================================
RCS file: /cvs/maptools/cvsroot/proj/src/pj_transform.c,v
retrieving revision 1.14
diff -u -p -r1.14 pj_transform.c
--- pj_transform.c	5 Nov 2004 06:05:11 -0000	1.14
+++ pj_transform.c	4 Dec 2005 13:07:47 -0000
@@ -465,9 +465,9 @@ int pj_geocentric_to_wgs84( PJ *defn, 
             if( x[io] == HUGE_VAL )
                 continue;
 
-            x[io] = x[io] + defn->datum_params[0];
-            y[io] = y[io] + defn->datum_params[1];
-            z[io] = z[io] + defn->datum_params[2];
+            x[io] = x[io] + Dx_BF;
+            y[io] = y[io] + Dy_BF;
+            z[io] = z[io] + Dz_BF;
         }
     }
     else if( defn->datum_type == PJD_7PARAM )
@@ -515,9 +515,9 @@ int pj_geocentric_from_wgs84( PJ *defn, 
             if( x[io] == HUGE_VAL )
                 continue;
             
-            x[io] = x[io] - defn->datum_params[0];
-            y[io] = y[io] - defn->datum_params[1];
-            z[io] = z[io] - defn->datum_params[2];
+            x[io] = x[io] - Dx_BF;
+            y[io] = y[io] - Dy_BF;
+            z[io] = z[io] - Dz_BF;
         }
     }
     else if( defn->datum_type == PJD_7PARAM )
@@ -593,13 +593,13 @@ int pj_datum_transform( PJ *srcdefn, PJ 
         CHECK_RETURN;
 
         src_a = SRS_WGS84_SEMIMAJOR;
-        src_es = 0.006694379990;
+        src_es = SRS_WGS84_ESQUARED;
     }
 
     if( dstdefn->datum_type == PJD_GRIDSHIFT )
     {
         dst_a = SRS_WGS84_SEMIMAJOR;
-        dst_es = 0.006694379990;
+        dst_es = SRS_WGS84_ESQUARED;
     }
         
 /* ==================================================================== */
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20051204/16c245a1/attachment.sig>

From warmerdam at pobox.com  Sun Dec  4 06:47:47 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 4 Dec 2005 09:47:47 -0500
Subject: [Proj] Patch
In-Reply-To: <20051204131431.GA3382@geo9.hut.fi>
References: <20051204131431.GA3382@geo9.hut.fi>
Message-ID: <931f8ea90512040647k275700a8gf6232557fd20bdc8@mail.gmail.com>

On 12/4/05, Martin Vermeer <martin.vermeer at hut.fi> wrote:
>
> Slight clean-up.
>
> - Martin

Martin,

Patch applied.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From martin.vermeer at hut.fi  Mon Dec  5 09:47:54 2005
From: martin.vermeer at hut.fi (Martin Vermeer)
Date: Mon, 5 Dec 2005 19:47:54 +0200
Subject: [Proj] WGS84 definition
Message-ID: <20051205174754.GA19990@geo9.hut.fi>


Dear List,

I found a nice explanation of the various realizations of WGS84 at the
address

http://www.gps.gov.uk/guide4.asp

I am sorry if this has been asked before, but what is the WGS84 that
proj4 (and GIS software in general) refers to? Of course this only
matters at the better than dm level, so is really only meaningful for 
geodesy. 

The most sensible thing, I think, would be to refer to a realization
fixed to the local crust. I.e. in Europe, ETRF89. That way the
transformations are not time dependent -- though also not globally
valid.

Does this question have an answer, or a policy, within proj4?

- Martin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20051205/bc4ecdef/attachment.sig>

From cjmce at lsu.edu  Mon Dec  5 11:57:27 2005
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Mon, 5 Dec 2005 13:57:27 -0600
Subject: [Proj] WGS84 definition
Message-ID: <OF5EAF3A6B.DE678D95-ON862570CE.006DA14D-862570CE.006DA17C@lsu.edu>





Dear Martin,

I think such lofty declarations are a bit out of the ballpark for PROJ4
users.  PROJ4 does not claim to be the torchbearer for the "total answer to
Computational Geodesy."  Which reference frame is used should be restricted
to the user's conscious choice (if any), of their data and the concomitant
metadata associated with that choice.

My guess is that most PROJ4 users couldn't care less about reference frames
and the (very) basic foundations of coordinate systems and reference
frames.  For those that DO care, they should be capable of recognizing the
differences between map projection implementations and the necessary datum
shift algorithms and associated shift parameters.  PROJ4 is not intended
ONLY for Europe, so provincial declarations are more confusing to the
neophyte than helpful.

Merry Christmas,

Clifford J. Mugnier
Chief of Geodesy
CENTER FOR GEOINFORMATICS
Department of Civil Engineering
LOUISIANA STATE UNIVERSITY
CEBA 3223A
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic]
Voice and Facsimile:  (225) 578-4474 [Research]
================================
http://www.ASPRS.org/resources.GRIDS
http://www.ce.LSU.edu/~mugnier/
================================


Dear List,

I found a nice explanation of the various realizations of WGS84 at the
address

http://www.gps.gov.uk/guide4.asp

I am sorry if this has been asked before, but what is the WGS84 that
proj4 (and GIS software in general) refers to? Of course this only
matters at the better than dm level, so is really only meaningful for
geodesy.

The most sensible thing, I think, would be to refer to a realization
fixed to the local crust. I.e. in Europe, ETRF89. That way the
transformations are not time dependent -- though also not globally
valid.

Does this question have an answer, or a policy, within proj4?

- Martin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: C.DTF
Type: application/octet-stream
Size: 198 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20051205/4150eaa9/attachment.obj>

From martin.vermeer at hut.fi  Mon Dec  5 12:58:58 2005
From: martin.vermeer at hut.fi (Martin Vermeer)
Date: Mon, 5 Dec 2005 22:58:58 +0200
Subject: [Proj] WGS84 definition
In-Reply-To: <OF5EAF3A6B.DE678D95-ON862570CE.006DA14D-862570CE.006DA17C@lsu.edu>
References: <OF5EAF3A6B.DE678D95-ON862570CE.006DA14D-862570CE.006DA17C@lsu.edu>
Message-ID: <20051205205858.GA21516@geo9.hut.fi>

On Mon, Dec 05, 2005 at 01:57:27PM -0600, Clifford J Mugnier wrote:
> 
> 
> 
> 
> Dear Martin,
> 
> I think such lofty declarations are a bit out of the ballpark for PROJ4
> users.  PROJ4 does not claim to be the torchbearer for the "total answer to
> Computational Geodesy."  Which reference frame is used should be restricted
> to the user's conscious choice (if any), of their data and the concomitant
> metadata associated with that choice.
> 
> My guess is that most PROJ4 users couldn't care less about reference frames
> and the (very) basic foundations of coordinate systems and reference
> frames.  For those that DO care, they should be capable of recognizing the
> differences between map projection implementations and the necessary datum
> shift algorithms and associated shift parameters.  PROJ4 is not intended
> ONLY for Europe, so provincial declarations are more confusing to the
> neophyte than helpful.
> 
> Merry Christmas,
> 
> Clifford J. Mugnier

Dear Clifford,

I suppose you are right -- where the current user base of PROJ4 is
concerned. But I have been thinking if it would be possible to extend it
by simple means to also serve geodetic uses, as that is what interests
me. And the package has been moving from mere projections to geodetic
datums and transformations anyway.

As for Europe, that was just an example. Of course as an alternative,
ITRF with time dependent transformations is possible in principle, and
unavoidable on this precision level. This would be global in scope.

a Merry Christmas to you too

Martin Vermeer

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20051205/581050cf/attachment.sig>

From ovv at hetnet.nl  Mon Dec  5 14:53:32 2005
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Mon, 05 Dec 2005 23:53:32 +0100
Subject: [Proj] WGS84 definition
In-Reply-To: <20051205205858.GA21516@geo9.hut.fi>
Message-ID: <BFBA837C.616F%ovv@hetnet.nl>


> From: Martin Vermeer <martin.vermeer-hut.fi>

> As for Europe, that was just an example. Of course as an alternative,
> ITRF with time dependent transformations is possible in principle, and
> unavoidable on this precision level. This would be global in scope.

Does this imply that on our Christmas wish list for transforms in PROJ.4 is
a 14-parameter Helmert transform?
Hmm, can be done by the regular 7-param transform, taking care of the signs,
and including some epoch pre-calculation.
Not difficult. Read for instance the 5-page article:
"International Terrestrial Reference Frame (ITRF) to GDA94 Coordinate
Transformations", J. Dawson and J. Steed, Geoscience Australia, 2004
<http://www.ga.gov.au/image_cache/GA3795.pdf>
or if that doesn't work:
<http://www.ga.gov.au/servlet/BigObjFileManager?bigobjid=GA3795>

For NAD83 <-> ITRF transformations already several software and on-line
solutions exist.
See also the National Geodetic Survey (NGS)
<http://www.ngs.noaa.gov/>





From warmerdam at pobox.com  Mon Dec  5 15:17:24 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 5 Dec 2005 18:17:24 -0500
Subject: [Proj] WGS84 definition
In-Reply-To: <20051205205858.GA21516@geo9.hut.fi>
References: <OF5EAF3A6B.DE678D95-ON862570CE.006DA14D-862570CE.006DA17C@lsu.edu>
	<20051205205858.GA21516@geo9.hut.fi>
Message-ID: <931f8ea90512051517t54b7fcbdl3ae5b4511defe70b@mail.gmail.com>

On 12/5/05, Martin Vermeer <martin.vermeer at hut.fi> wrote:
> I suppose you are right -- where the current user base of PROJ4 is
> concerned. But I have been thinking if it would be possible to extend it
> by simple means to also serve geodetic uses, as that is what interests
> me. And the package has been moving from mere projections to geodetic
> datums and transformations anyway.

Martin,

As Cliff suggests, I think it is wrong to think there is some deep
attachment to geodetic concepts of what the different datums are.
PROJ.4 basically knows about ellipsoids, projections, and
"transformation methods" between datums.   When you say +datum=WGS84
in PROJ.4 it translates this into an ellipsoid definition and recognises that
to transform to WGS84 datum it can apply a 0,0,0 offset.  It doesn't really
know anything about geoid, or anything else.

We can try and other kinds of datum transformations but ultimately
a rigerous definition of datum does not existing in PROJ.4.  Only the
implicit definition of what it takes to convert to WGS84 (whatever
that is).

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From martin.vermeer at hut.fi  Mon Dec  5 22:12:27 2005
From: martin.vermeer at hut.fi (Martin Vermeer)
Date: Tue, 6 Dec 2005 08:12:27 +0200
Subject: [Proj] WGS84 definition
In-Reply-To: <931f8ea90512051517t54b7fcbdl3ae5b4511defe70b@mail.gmail.com>
References: <OF5EAF3A6B.DE678D95-ON862570CE.006DA14D-862570CE.006DA17C@lsu.edu>
	<20051205205858.GA21516@geo9.hut.fi>
	<931f8ea90512051517t54b7fcbdl3ae5b4511defe70b@mail.gmail.com>
Message-ID: <20051206061227.GA26455@geo9.hut.fi>

On Mon, Dec 05, 2005 at 06:17:24PM -0500, Frank Warmerdam wrote:
> On 12/5/05, Martin Vermeer <martin.vermeer at hut.fi> wrote:
> > I suppose you are right -- where the current user base of PROJ4 is
> > concerned. But I have been thinking if it would be possible to extend it
> > by simple means to also serve geodetic uses, as that is what interests
> > me. And the package has been moving from mere projections to geodetic
> > datums and transformations anyway.
> 
> Martin,
> 
> As Cliff suggests, I think it is wrong to think there is some deep
> attachment to geodetic concepts of what the different datums are.
> PROJ.4 basically knows about ellipsoids, projections, and
> "transformation methods" between datums.   When you say +datum=WGS84
> in PROJ.4 it translates this into an ellipsoid definition and recognises that
> to transform to WGS84 datum it can apply a 0,0,0 offset.  It doesn't really
> know anything about geoid, or anything else.
> 
> We can try and other kinds of datum transformations but ultimately
> a rigerous definition of datum does not existing in PROJ.4.  Only the
> implicit definition of what it takes to convert to WGS84 (whatever
> that is).

OK. If I understand this correctly, this means that if you try to
convert point set coordinates from datumA to datumB over "WGS84", is
doesn't matter what "WGS84" precisely is. Yes, I understand that notion.
But shouldn't then the PROJ4 definitions on datumA rep. datumB
implicitly agree to use _the same_ WGS84?

E.g. it appears (as I verified on the several-dm level) that the Finnish
KKJ definitions (epsg:2393 and around) transfer to EUREF-FIN, which is
in practice (?) the same as ETRF-89. However, Sweden for some time
used a national EUREF realization which differed by several cm from
ETRF-89. This gave rise to noticable (on geodetic accuracy :)
cross-border discrepancies.

BTW on an unrelated note, I believe geoid maps could be added using
something like the datum grid mechanism, if there is an interest.

And there is a difference between what _is_, and what _could be_ ;-)

Kind regards

Martin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20051206/f93b5dd6/attachment.sig>

From warmerdam at pobox.com  Mon Dec  5 22:51:27 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 6 Dec 2005 01:51:27 -0500
Subject: [Proj] FW: SCAR Antarctic PS projection issue in proj
In-Reply-To: <BFB7DEA2.6148%ovv@hetnet.nl>
References: <20051203165939.GA4896@geo9.hut.fi> <BFB7DEA2.6148%ovv@hetnet.nl>
Message-ID: <931f8ea90512052251p25e1729ar7e5e5bf2ba8316fc@mail.gmail.com>

On 12/3/05, Oscar van Vlijmen <ovv at hetnet.nl> wrote:
>
> In conclusion, my theory is that the projection method is unambiguously
> clear, but that either "Polar Stereographic (variant B)" is not supported by
> PROJ.4 or that it was somehow not possible to construct relevant PROJ.4
> arguments for any PROJ.4 method (stere perhaps) on the fly.

Oscar,

With support from Norman Vine on IRC, I have added a
translation of projection method 9829.

The script used to produce the PROJ.4 epsg definition file
now reports the following for EPSG:3031:

$ python epsg_tr.py -proj4 3031 3031
# WGS 84 / Antarctic Polar Stereographic
<3031> +proj=stere +lat_0=-90 +lat_ts=-71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS
84 +datum=WGS84 +units=m +no_defs  <>

This should appear in the next full PROJ.4 release at which point I
will regenerate the epsg files.

Please let me know if you believe the above translation to be
inproper.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From werchowyna at epf.pl  Tue Dec  6 01:41:37 2005
From: werchowyna at epf.pl (Maciek Sieczka)
Date: Tue, 06 Dec 2005 10:41:37 +0100
Subject: [Proj] FW: SCAR Antarctic PS projection issue in proj
In-Reply-To: <931f8ea90512052251p25e1729ar7e5e5bf2ba8316fc@mail.gmail.com>
References: <20051203165939.GA4896@geo9.hut.fi> <BFB7DEA2.6148%ovv@hetnet.nl>
	<931f8ea90512052251p25e1729ar7e5e5bf2ba8316fc@mail.gmail.com>
Message-ID: <1133862097.7956.31.camel@localhost.localdomain>

On wto, 2005-12-06 at 01:51 -0500, Frank Warmerdam wrote:
> On 12/3/05, Oscar van Vlijmen <ovv at hetnet.nl> wrote:
> >
> > In conclusion, my theory is that the projection method is unambiguously
> > clear, but that either "Polar Stereographic (variant B)" is not supported by
> > PROJ.4 or that it was somehow not possible to construct relevant PROJ.4
> > arguments for any PROJ.4 method (stere perhaps) on the fly.
> 
> Oscar,
> 
> With support from Norman Vine on IRC, I have added a
> translation of projection method 9829.
> 
> The script used to produce the PROJ.4 epsg definition file
> now reports the following for EPSG:3031:
> 
> $ python epsg_tr.py -proj4 3031 3031
> # WGS 84 / Antarctic Polar Stereographic
> <3031> +proj=stere +lat_0=-90 +lat_ts=-71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS
> 84 +datum=WGS84 +units=m +no_defs  <>
> 
> This should appear in the next full PROJ.4 release at which point I
> will regenerate the epsg files.

Frank,

OT the SCAR, but regarding EPSG codes - _soon_ corrections and updates
for Polish coordinate systems will arrive EPSG database. I'm currently
talking to an EPSG represenatative regarding this. There is only one
iisue left do decide about for us and by the end of December a they will
make their final decissions. I'm writing this to ask whether new PROJ.4
realease can wait for these corrections to be included or if you are
going to release erlier.

It's quite an issue for Poles. Eg. there was a serious error in code
2171 so it cannot be used directly. And prefer love using codes instead
of dozens of parameters, this simlpifies using and teaching PROJ.4.
Besides, there will be some cleanup in names, new systems added
(GUGIK-80, missing System 1942 zones) and _maybe_ EPSG will settle for
using precise, official GUGiK Krassovsky->WGS84 transformation instead
of the rounded down version, currently present in EPSG database.

For these precise paramemeters refer to instruction G-2, p. 29, bottom,
currently available at
http://www.google.pl/url?sa=U&start=3&q=http://www.gislab.ar.wroc.pl/server.ftp%3FFileID%3D1521%26View%3Dtrue%26GISLabSessionID%3D977af8cbcc7261e26f855e64241d5129&e=42

The rounded down version is present in current epsg 2171-2174.

Maciek


--------------------
W polskim Internecie s� setki milion�w stron. My przekazujemy Tobie tylko najlepsze z nich!
http://katalog.epf.pl/



From werchowyna at epf.pl  Tue Dec  6 01:50:25 2005
From: werchowyna at epf.pl (Maciek Sieczka)
Date: Tue, 06 Dec 2005 10:50:25 +0100
Subject: [Proj] Ukraine towgs84
In-Reply-To: <BFB34EFD.60F1%ovv@hetnet.nl>
References: <BFB34EFD.60F1%ovv@hetnet.nl>
Message-ID: <1133862625.7956.41.camel@localhost.localdomain>

Hi,

So far we have found a Mapinfo towgs84 definition claimed to be suitable
for Ukraine: 24,-123,-94,-0.02,0.25,0.13,1.1.

Although it yields pretty different results than the pan-Soviet Union
datum shift, I only have the word of Mapinfo authors that it is correct.

Input is WGS84 23E 49N.

Results:
former Soviet Union datum shift (28,-130,-95)
23d00'06.425689"E       49d00'01.319468"N

Mapinfo Ukrainian (24,-123,-94,-0.02,0.25,0.13,1.1)
23d00'05.992369"E       49d00'01.513576"N

Has anybody got reliable benchmarks for Ukraine WGS84->Krassovsky to
compare to by any chance?

Cheers,
Maciek


--------------------
W polskim Internecie s� setki milion�w stron. My przekazujemy Tobie tylko najlepsze z nich!
http://katalog.epf.pl/



From ovv at hetnet.nl  Tue Dec  6 08:01:15 2005
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Tue, 06 Dec 2005 17:01:15 +0100
Subject: [Proj] FW: SCAR Antarctic PS projection issue in proj
In-Reply-To: <931f8ea90512052251p25e1729ar7e5e5bf2ba8316fc@mail.gmail.com>
Message-ID: <BFBB745A.6184%ovv@hetnet.nl>

> From: Frank Warmerdam <warmerdam-pobox.com>

> The script used to produce the PROJ.4 epsg definition file
> now reports the following for EPSG:3031:
> 
> $ python epsg_tr.py -proj4 3031 3031
> # WGS 84 / Antarctic Polar Stereographic
> <3031> +proj=stere +lat_0=-90 +lat_ts=-71 +lon_0=0 +k=1 +x_0=0 +y_0=0
> +ellps=WGS
> 84 +datum=WGS84 +units=m +no_defs  <>

The USGS has it on the GRS80 ellipsoid
http://usarc.usgs.gov/ant-ogc-viewer/sps.html
but the EPSG database has it on WGS84.
Looks fine to me!




From cjmce at lsu.edu  Tue Dec  6 09:47:15 2005
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 6 Dec 2005 11:47:15 -0600
Subject: [Proj] Ukraine towgs84
Message-ID: <OF83B62156.EEF4948F-ON862570CF.0061B58B-862570CF.0061B5DD@lsu.edu>





Maciek,

To the best of my knowledge, the Ukraine continues to keep its
transformation parameters secret from the outside world.  Local citizens
can get into a great deal of trouble by divulging national secrets.
Several former satellite nations of the USSR continue to be private with
such concerns and are suspicious of outside eyes.

Topographic maps have been sold on the Black Market for years, but
possession of such maps and data continues to be considered espionage
within those countries.

It's going to take some years for these new republics to open up completely
and to change their ways that have been a part of their life for much of
the 20th century.  Some old ways die hard.  It's going to have to change at
the national legislative/parliament level first.

Remember President Clinton's first term in office?  Some young U.S.
Electrical Engineer was doing GPS scouting for cell phone towers in Russia
- on hill tops and mountain tops - the same places as classical
triangulation stations!  He got a guided tour of Treblinka Prison on
charges of espionage and it took a phone call from Clinton to Yeltsin to
get the young man sprung from prison just days before Christmas.  Russia
remains private about such stuff as I think the Ukraine does also.

Merry Christmas,

Cliff Mugnier
LOUISIANA STATE UNIVERSITY



Hi,

So far we have found a Mapinfo towgs84 definition claimed to be suitable
for Ukraine: 24,-123,-94,-0.02,0.25,0.13,1.1.

Although it yields pretty different results than the pan-Soviet Union
datum shift, I only have the word of Mapinfo authors that it is correct.

Input is WGS84 23E 49N.

Results:
former Soviet Union datum shift (28,-130,-95)
23d00'06.425689"E       49d00'01.319468"N

Mapinfo Ukrainian (24,-123,-94,-0.02,0.25,0.13,1.1)
23d00'05.992369"E       49d00'01.513576"N

Has anybody got reliable benchmarks for Ukraine WGS84->Krassovsky to
compare to by any chance?

Cheers,
Maciek


--------------------
W polskim Internecie s± setki milionów stron. My przekazujemy Tobie tylko
najlepsze z nich!
http://katalog.epf.pl/

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj




From warmerdam at pobox.com  Tue Dec  6 10:41:06 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 6 Dec 2005 13:41:06 -0500
Subject: [Proj] FW: SCAR Antarctic PS projection issue in proj
In-Reply-To: <1133862097.7956.31.camel@localhost.localdomain>
References: <20051203165939.GA4896@geo9.hut.fi> <BFB7DEA2.6148%ovv@hetnet.nl>
	<931f8ea90512052251p25e1729ar7e5e5bf2ba8316fc@mail.gmail.com>
	<1133862097.7956.31.camel@localhost.localdomain>
Message-ID: <931f8ea90512061041s1af2653bla6ebc2b1e62c58ad@mail.gmail.com>

On 12/6/05, Maciek Sieczka <werchowyna at epf.pl> wrote:
> Frank,
>
> OT the SCAR, but regarding EPSG codes - _soon_ corrections and updates
> for Polish coordinate systems will arrive EPSG database. I'm currently
> talking to an EPSG represenatative regarding this. There is only one
> iisue left do decide about for us and by the end of December a they will
> make their final decissions. I'm writing this to ask whether new PROJ.4
> realease can wait for these corrections to be included or if you are
> going to release erlier.
>
> It's quite an issue for Poles. Eg. there was a serious error in code
> 2171 so it cannot be used directly. And prefer love using codes instead
> of dozens of parameters, this simlpifies using and teaching PROJ.4.
> Besides, there will be some cleanup in names, new systems added
> (GUGIK-80, missing System 1942 zones) and _maybe_ EPSG will settle for
> using precise, official GUGiK Krassovsky->WGS84 transformation instead
> of the rounded down version, currently present in EPSG database.
>
> For these precise paramemeters refer to instruction G-2, p. 29, bottom,
> currently available at
> http://www.google.pl/url?sa=U&start=3&q=http://www.gislab.ar.wroc.pl/server.ftp%3FFileID%3D1521%26View%3Dtrue%26GISLabSessionID%3D977af8cbcc7261e26f855e64241d5129&e=42
>
> The rounded down version is present in current epsg 2171-2174.

Maciek,

If I knew a new release of the EPSG database were
arriving soon, I would be willing to hold off a bit on a
PROJ.4 epsg file update.  In reality, I have intended
to do an update for some time, and have put it off, so
when I do it is more determined by how much pressure
I get to get off my duff.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ovv at hetnet.nl  Tue Dec  6 14:59:39 2005
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Tue, 06 Dec 2005 23:59:39 +0100
Subject: [Proj] Ukraine towgs84
In-Reply-To: <1133862625.7956.41.camel@localhost.localdomain>
Message-ID: <BFBBD66A.6190%ovv@hetnet.nl>

> From: Maciek Sieczka <werchowyna-epf.pl>

> So far we have found a Mapinfo towgs84 definition claimed to be suitable
> for Ukraine: 24,-123,-94,-0.02,0.25,0.13,1.1.
> 
> Although it yields pretty different results than the pan-Soviet Union
> datum shift, I only have the word of Mapinfo authors that it is correct.
> 
> Input is WGS84 23E 49N.
> 
> Results:
> former Soviet Union datum shift (28,-130,-95)
> 23d00'06.425689"E       49d00'01.319468"N
> 
> Mapinfo Ukrainian (24,-123,-94,-0.02,0.25,0.13,1.1)
> 23d00'05.992369"E       49d00'01.513576"N

Inspecting the EPSG database I found the latter parameters under coordinate
operation codes 1310, 1674, 1675. For these the area-of-use code is 1343 and
this leads to East-Germany!
Looking in the EPSG area-of-use table there are several entries for Ukraine
and one specifically for Ukraine is number 1242. Oddly, no coordinate
operation nor CRS uses this area code in the EPSG database.

Another remark: if you take the mentioned parameters for a datum transform
in the Ukraine, then you should check the signs. It is possible that you
used the right signs just by chance.
The EPSG database gives under coordinate operation code 1310 the parameters
for Pulkovo 42 / Krasovskij to ETRS89.
dx=24; dy=-123; dz=-94; rx=-0.02; ry=0.25; rz=0.13; ds=1.1;
These parameters are for the coordinate frame method (code 9607) in the
direction Pulkovo -> ETRS89.
The correct signs for the position vector method in the opposite direction:
dx=-24; dy=123; dz=94; rx=-0.02; ry=0.25; rz=0.13; ds=-1.1;
PROJ.4 uses the (approximated) position vector method (coordinate operation
code 9606).

With an assumed height of zero, I arrive at the following coordinates (lat,
lon):

49d 00m 01.03814s, 23d 00m 06.07119s
and a meaningless height of -28.58 m

Note that the used transformation parameters seem to be the wrong ones for
Ukraine, according to EPSG.



From cjmce at lsu.edu  Tue Dec  6 16:50:15 2005
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 6 Dec 2005 18:50:15 -0600
Subject: [Proj] Ukraine towgs84
Message-ID: <OFB4B936A1.6F7242F4-ON862570D0.000499F3-862570D0.00049A12@lsu.edu>





Oscar,

An ellipsoid height that is negative is not necessarily "meaningless."  For
a sea-level elevation of zero meters, EVERYWHERE in the Continental United
States the ellipsoid height is -26 to -27 meters.  It may look "funny," but
that's what it really is - the separation between the ellipsoid and the
geoid.

C. Mugnier
LSU

> From: Maciek Sieczka <werchowyna-epf.pl>

> So far we have found a Mapinfo towgs84 definition claimed to be suitable
> for Ukraine: 24,-123,-94,-0.02,0.25,0.13,1.1.
>
> Although it yields pretty different results than the pan-Soviet Union
> datum shift, I only have the word of Mapinfo authors that it is correct.
>
> Input is WGS84 23E 49N.
>
> Results:
> former Soviet Union datum shift (28,-130,-95)
> 23d00'06.425689"E       49d00'01.319468"N
>
> Mapinfo Ukrainian (24,-123,-94,-0.02,0.25,0.13,1.1)
> 23d00'05.992369"E       49d00'01.513576"N

Inspecting the EPSG database I found the latter parameters under coordinate
operation codes 1310, 1674, 1675. For these the area-of-use code is 1343
and
this leads to East-Germany!
Looking in the EPSG area-of-use table there are several entries for Ukraine
and one specifically for Ukraine is number 1242. Oddly, no coordinate
operation nor CRS uses this area code in the EPSG database.

Another remark: if you take the mentioned parameters for a datum transform
in the Ukraine, then you should check the signs. It is possible that you
used the right signs just by chance.
The EPSG database gives under coordinate operation code 1310 the parameters
for Pulkovo 42 / Krasovskij to ETRS89.
dx=24; dy=-123; dz=-94; rx=-0.02; ry=0.25; rz=0.13; ds=1.1;
These parameters are for the coordinate frame method (code 9607) in the
direction Pulkovo -> ETRS89.
The correct signs for the position vector method in the opposite direction:
dx=-24; dy=123; dz=94; rx=-0.02; ry=0.25; rz=0.13; ds=-1.1;
PROJ.4 uses the (approximated) position vector method (coordinate operation
code 9606).

With an assumed height of zero, I arrive at the following coordinates (lat,
lon):

49d 00m 01.03814s, 23d 00m 06.07119s
and a meaningless height of -28.58 m

Note that the used transformation parameters seem to be the wrong ones for
Ukraine, according to EPSG.

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From ovv at hetnet.nl  Tue Dec  6 22:41:22 2005
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Wed, 07 Dec 2005 07:41:22 +0100
Subject: [Proj] Ukraine towgs84
In-Reply-To: <OFB4B936A1.6F7242F4-ON862570D0.000499F3-862570D0.00049A12@lsu.edu>
Message-ID: <BFBC42A2.6199%ovv@hetnet.nl>

> From: Clifford J Mugnier <cjmce-lsu.edu>

> An ellipsoid height that is negative is not necessarily "meaningless."  For
> a sea-level elevation of zero meters, EVERYWHERE in the Continental United
> States the ellipsoid height is -26 to -27 meters.  It may look "funny," but
> that's what it really is - the separation between the ellipsoid and the
> geoid.

Regarding:

> With an assumed height of zero, I arrive at the following coordinates (lat,
> lon):
> 
> 49d 00m 01.03814s, 23d 00m 06.07119s
> and a meaningless height of -28.58 m


Perfectly meaningless in this case I'm inclined to believe, because in the
original data no height was provided. The usual way is then to assume a
height of zero, which gives after transformation a meaningless number.
It has some other relevant meaning however. Since most 3D transformations
are highly sensitive to the height parameter, it's a good check for
comparing calculations!

By the way, the EGM96 geoid height on the WGS84 ellipsoid can be calculated
on-line:
<http://earth-info.nima.mil/GandG/wgs84/gravitymod/egm96/intpt.htm>
(The URL changes every year or so.)
For WGS84 lat, lon 49, 23 the calculator gives a geoid height of 36.71 m.






From werchowyna at epf.pl  Wed Dec  7 01:33:01 2005
From: werchowyna at epf.pl (Maciek Sieczka)
Date: Wed, 07 Dec 2005 10:33:01 +0100
Subject: [Proj] epsg update
In-Reply-To: <931f8ea90512061041s1af2653bla6ebc2b1e62c58ad@mail.gmail.com>
References: <20051203165939.GA4896@geo9.hut.fi> <BFB7DEA2.6148%ovv@hetnet.nl>
	<931f8ea90512052251p25e1729ar7e5e5bf2ba8316fc@mail.gmail.com>
	<1133862097.7956.31.camel@localhost.localdomain>
	<931f8ea90512061041s1af2653bla6ebc2b1e62c58ad@mail.gmail.com>
Message-ID: <1133947981.8309.5.camel@localhost.localdomain>

On wto, 2005-12-06 at 13:41 -0500, Frank Warmerdam wrote:

> Maciek,
> 
> If I knew a new release of the EPSG database were
> arriving soon, I would be willing to hold off a bit on a
> PROJ.4 epsg file update.

As far as I'm informed it is arriving soon, about a month time.

>   In reality, I have intended
> to do an update for some time, and have put it off, so
> when I do it is more determined by how much pressure
> I get to get off my duff.

If you can hold off new PROJ.4 until new ESPG database is released,
Polish (and not only them I believe) FOSS GIS folks will be thankfull.
I'll keep you up to date offlist how things are going.

Best,
Maciek


--------------------
W polskim Internecie s� setki milion�w stron. My przekazujemy Tobie tylko najlepsze z nich!
http://katalog.epf.pl/



From Roel.Nicolai at Shell.com  Wed Dec  7 05:53:26 2005
From: Roel.Nicolai at Shell.com (Nicolai, Roel R SIEP-EPT-SCIG)
Date: Wed, 7 Dec 2005 14:53:26 +0100
Subject: [Proj] Ukraine towgs84
Message-ID: <0323267D94D4FE4F9E509A338C07055E01FA32CC@Rijpat-s-341.europe.shell.com>

Maciek,

Cliff Mugnier has pretty much given a complete explanation why the EPSG database contains no transformation parameters specifically for Ukraine.
I work for Shell and can confirm that the secrecy of geodetic parameters in the entire former Soviet Union is a serious issue. When working there you need to get permission from the authorities (read Secret Service) to us any coordinate system. E.g even though we know the parameters for all the Gauss-Kruger projection zones we generally cannot use them there.
For the same reason the EPSG database carries no transformation parameters for any of the coordinate systems in China.

By the way, good work by Oscar van Vlijmen in identifiying that 7-parameter transformation!

Best regards,
on behalf of the OGP Survey and Positioning Committee (formerly EPSG)
Geodesy Subcommittee,

Roel Nicolai
Shell Exploration and Production
 

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org]On Behalf Of Oscar van Vlijmen
Sent: Wednesday, December 07, 2005 12:00 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Ukraine towgs84


> From: Maciek Sieczka <werchowyna-epf.pl>

> So far we have found a Mapinfo towgs84 definition claimed to be suitable
> for Ukraine: 24,-123,-94,-0.02,0.25,0.13,1.1.
> 
> Although it yields pretty different results than the pan-Soviet Union
> datum shift, I only have the word of Mapinfo authors that it is correct.
> 
> Input is WGS84 23E 49N.
> 
> Results:
> former Soviet Union datum shift (28,-130,-95)
> 23d00'06.425689"E       49d00'01.319468"N
> 
> Mapinfo Ukrainian (24,-123,-94,-0.02,0.25,0.13,1.1)
> 23d00'05.992369"E       49d00'01.513576"N

Inspecting the EPSG database I found the latter parameters under coordinate
operation codes 1310, 1674, 1675. For these the area-of-use code is 1343 and
this leads to East-Germany!
Looking in the EPSG area-of-use table there are several entries for Ukraine
and one specifically for Ukraine is number 1242. Oddly, no coordinate
operation nor CRS uses this area code in the EPSG database.

Another remark: if you take the mentioned parameters for a datum transform
in the Ukraine, then you should check the signs. It is possible that you
used the right signs just by chance.
The EPSG database gives under coordinate operation code 1310 the parameters
for Pulkovo 42 / Krasovskij to ETRS89.
dx=24; dy=-123; dz=-94; rx=-0.02; ry=0.25; rz=0.13; ds=1.1;
These parameters are for the coordinate frame method (code 9607) in the
direction Pulkovo -> ETRS89.
The correct signs for the position vector method in the opposite direction:
dx=-24; dy=123; dz=94; rx=-0.02; ry=0.25; rz=0.13; ds=-1.1;
PROJ.4 uses the (approximated) position vector method (coordinate operation
code 9606).

With an assumed height of zero, I arrive at the following coordinates (lat,
lon):

49d 00m 01.03814s, 23d 00m 06.07119s
and a meaningless height of -28.58 m

Note that the used transformation parameters seem to be the wrong ones for
Ukraine, according to EPSG.

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj





From werchowyna at epf.pl  Wed Dec  7 07:33:59 2005
From: werchowyna at epf.pl (Maciek Sieczka)
Date: Wed, 07 Dec 2005 16:33:59 +0100
Subject: [Proj] Ukraine towgs84
In-Reply-To: <0323267D94D4FE4F9E509A338C07055E01FA32CC@Rijpat-s-341.europe.shell.com>
References: <0323267D94D4FE4F9E509A338C07055E01FA32CC@Rijpat-s-341.europe.shell.com>
Message-ID: <1133969639.17136.32.camel@localhost.localdomain>

On śro, 2005-12-07 at 14:53 +0100, Nicolai, Roel R SIEP-EPT-SCIG wrote:
> Maciek,
> 
> Cliff Mugnier has pretty much given a complete explanation why the EPSG database contains no transformation parameters specifically for Ukraine.
> I work for Shell and can confirm that the secrecy of geodetic parameters in the entire former Soviet Union is a serious issue. When working there you need to get permission from the authorities (read Secret Service) to us any coordinate system. E.g even though we know the parameters for all the Gauss-Kruger projection zones we generally cannot use them there.
> For the same reason the EPSG database carries no transformation parameters for any of the coordinate systems in China.

Thanks Roel, Clifford and Oscar!

I should have expected the obscurity of Ukrainian towgs84 would be a
matter of secret service affairs.

I hope this will change sometime soon, especially that Ukraine wants to
be in Europe it seems. The situation was pretty much the same about 10
years ago in Poland.

> By the way, good work by Oscar van Vlijmen in identifiying that
> 7-parameter transformation!

Indeed, good shot. I should have checked it myself first, sorry!

I was wondering... My area of interest is at the Polish-Ukrainian-Slovak
border, the East Carpathians MAB reserve. See:
http://www2.unesco.org/mab/br/brdir/europe-n/Polandmap.htm
We are not going to lurk into Ukraine more than about 50 km in our GIS.
What would be the accuracy if I use Polish Pulkovo->WGS84 7par shift,
which is well known and very accurate for Poland, for the Ukrainian and
Slovak MAB parts as well? I would be happy to have about 1m.

Maciek


--------------------
W polskim Internecie są setki milionów stron. My przekazujemy Tobie tylko najlepsze z nich!
http://katalog.epf.pl/



From cjmce at lsu.edu  Wed Dec  7 16:27:31 2005
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 7 Dec 2005 18:27:31 -0600
Subject: [Proj] Ukraine towgs84
Message-ID: <OF6D4DCD45.79401AEB-ON862570D1.000284E0-862570D1.00028500@lsu.edu>





Maciek,

There is no telling if extending Polish transformation parameters into
portions of the Ukraine will yield accuracies of 1 meter or so.  Since the
details of the Soviet triangulations are not public information, there is
no way to tell if their classical chains of quadrilaterals spanned these
satellite borders or avoided the borders.  If "System 42" was computed in a
"Helmert Blocking" technique; it's possible.  However, if each satellite
country had its classical triangulations adjusted on a country-by-country
basis; then it's unlikely that there is a smooth transition of datum shift
parameters across borders.

Whoever knows the answers to this over there probably is not allowed to
give clues to such things.

Note that this type of information and data is necessary for accurate
targeting of ICBMs.  Therefore, it's a traditional secret even though the
silos are no longer manned - I think.  :-)

MANY Years ago (35+), I saw the covers temporarily opened off of the silos
for some of those silo farms in Eastern Europe and Western Asia.
Scary-looking stuff.

Cliff Mugnier
LSU

----------------------------------

> Maciek,
>
> Cliff Mugnier has pretty much given a complete explanation why the EPSG
database contains no transformation parameters specifically for Ukraine.
> I work for Shell and can confirm that the secrecy of geodetic parameters
in the entire former Soviet Union is a serious issue. When working there
you need to get permission from the authorities (read Secret Service) to us
any coordinate system. E.g even though we know the parameters for all the
Gauss-Kruger projection zones we generally cannot use them there.
> For the same reason the EPSG database carries no transformation
parameters for any of the coordinate systems in China.

Thanks Roel, Clifford and Oscar!

I should have expected the obscurity of Ukrainian towgs84 would be a
matter of secret service affairs.

I hope this will change sometime soon, especially that Ukraine wants to
be in Europe it seems. The situation was pretty much the same about 10
years ago in Poland.

> By the way, good work by Oscar van Vlijmen in identifiying that
> 7-parameter transformation!

Indeed, good shot. I should have checked it myself first, sorry!

I was wondering... My area of interest is at the Polish-Ukrainian-Slovak
border, the East Carpathians MAB reserve. See:
http://www2.unesco.org/mab/br/brdir/europe-n/Polandmap.htm
We are not going to lurk into Ukraine more than about 50 km in our GIS.
What would be the accuracy if I use Polish Pulkovo->WGS84 7par shift,
which is well known and very accurate for Poland, for the Ukrainian and
Slovak MAB parts as well? I would be happy to have about 1m.

Maciek


--------------------
W polskim Internecie s¹ setki milionów stron. My przekazujemy Tobie tylko
najlepsze z nich!
http://katalog.epf.pl/




From warmerdam at pobox.com  Sun Dec 11 15:43:26 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 11 Dec 2005 18:43:26 -0500
Subject: [Proj] Meaning of 7-parameter transformation rotations
In-Reply-To: <OFD56614CD.D1E8C666-ON862570C9.00683744-862570C9.00683765@lsu.edu>
References: <OFD56614CD.D1E8C666-ON862570C9.00683744-862570C9.00683765@lsu.edu>
Message-ID: <931f8ea90512111543y2ac13686jbf5ca92262bc1424@mail.gmail.com>

On 11/30/05, Clifford J Mugnier <cjmce at lsu.edu> wrote:
>
> Gentlemen:
>
> Note that the SENSE of the rotations have two common usages.  The American
> Standard versus the European Standard differ!  To transform in the same
> direction, the signs are OPPOSITE from one "standard" to another.
> Generally speaking, a 7-parameter  transformation, whether it is a
> Bursa-Wolfe or a Molodensky, MUST have a "test point" provided so that the
> user knows which sense the rotations need for the desired transformation
> direction.
>
> The Americans, Australians, and Luxemborgs use one SENSE, the Europeans use
> the other.  In regard to the rest of the world, it depends on which
> brand-name of GPS Geodetic Processing software was used to derive the
> parameters from some collection of data points.  See my monthly column for
> such important minutiae for country to country considerations.

Cliff,

Pursuant to this point, would it be fair to assume that if
you don't say otherwise, that you are using the "American"
sense?  For instance, I find myself needing a transformation
for Trinidad 1903 datum, and would like to use the one you
published in your column.

Also, it is a matter of some challenge to me that you don't
provide WGS84 test values for your test point (ie. the
point of origin on Naparima Hill) for me to test, though it is
handy that you provide that location in both the Naparima 1972
datum and Trinidad 1903 datum.

  http://www.asprs.org/resources/grids/11-2000-trinidad.pdf

BTW, EPSG publishes +towgs84=-61.702,284.488,472.052
for Trinidad 1903 to WGS84 which seem to different significantly
from your solution of -33.25, +232.675, +484.542.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From roger at opq.se  Mon Dec 12 07:18:57 2005
From: roger at opq.se (Roger Oberholtzer)
Date: Mon, 12 Dec 2005 16:18:57 +0100
Subject: [Proj] Finnish KKJ in proj 4.4.9
Message-ID: <1134400737.20841.55.camel@acme.pacific>


I am exploring using proj to obtain KKJ coordinates from WGS84 lat/long
values.  The values only get to within 176 meters of where they are
expected to be (according to the Finnish Road Authority). Is anyone else
using proj to obtain Finnish KKJ values?

-- 
Roger Oberholtzer
OPQ Systems AB




From martin.vermeer at hut.fi  Mon Dec 12 13:01:27 2005
From: martin.vermeer at hut.fi (Martin Vermeer)
Date: Mon, 12 Dec 2005 23:01:27 +0200
Subject: [Proj] Finnish KKJ in proj 4.4.9
In-Reply-To: <1134400737.20841.55.camel@acme.pacific>
References: <1134400737.20841.55.camel@acme.pacific>
Message-ID: <20051212210127.GA2276@geo9.hut.fi>

On Mon, Dec 12, 2005 at 04:18:57PM +0100, Roger Oberholtzer wrote:
> 
> I am exploring using proj to obtain KKJ coordinates from WGS84 lat/long
> values.  The values only get to within 176 meters of where they are
> expected to be (according to the Finnish Road Authority). Is anyone else
> using proj to obtain Finnish KKJ values?
> 
> -- 
> Roger Oberholtzer
> OPQ Systems AB

Which are you using? I tried <2393> from the epsg file:

# KKJ / Finland Uniform Coordinate System
<2393> +proj=tmerc +lat_0=0 +lon_0=27 +k=1.000000 +x_0=3500000 +y_0=0
+ellps=intl +towgs84=-90.7,-106.1,-119.2,4.09,0.218,-1.05,1.37 +units=m
+no_defs  <>

just last week, and got within decimetres of the right values according
to the Ollikainen publication.

The command I used was

./cs2cs +proj=latlong +ellps=WGS84 +to +init=epsg:2393

The test point I use is triangulation point 158:

23d55'11.134"E  63d29'4.016"N 23.847
3346722.90 7046208.88

from Matti Ollikainen (1993): GPS-koordinaattien muuntaminen
Kartastokoordinaateiksi, pages 29-31 (Finnish Geodetic Institute)

Are you sure you are using the right zone? There are four of them,
2391-2394, three degrees apart.

- Martin Vermeer

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20051212/a5e54f84/attachment.sig>

From cjmce at lsu.edu  Mon Dec 12 22:37:34 2005
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 13 Dec 2005 00:37:34 -0600
Subject: [Proj] Meaning of 7-parameter transformation rotations
Message-ID: <OF97D62E2B.82187F3E-ON862570D6.0024661E-862570D6.00246641@lsu.edu>





Frank,

It's since been published, I think, but when I was in Trinidad on my
"project,"  WGS84 didn't even exist.  The WGS84 7-parameter shift values
weren't published when I wrote my column, either.

Spring chicken, I ain't.  :-)  Been around the block and the geoid a time
or two, though ... With regard to EPSG stuff, only Roger Lott can answer
that question.

Merry Christmas!

Cliff

----------------------------

On 11/30/05, Clifford J Mugnier <cjmce at lsu.edu> wrote:
>
> Gentlemen:
>
> Note that the SENSE of the rotations have two common usages.  The
American
> Standard versus the European Standard differ!  To transform in the same
> direction, the signs are OPPOSITE from one "standard" to another.
> Generally speaking, a 7-parameter  transformation, whether it is a
> Bursa-Wolfe or a Molodensky, MUST have a "test point" provided so that
the
> user knows which sense the rotations need for the desired transformation
> direction.
>
> The Americans, Australians, and Luxemborgs use one SENSE, the Europeans
use
> the other.  In regard to the rest of the world, it depends on which
> brand-name of GPS Geodetic Processing software was used to derive the
> parameters from some collection of data points.  See my monthly column
for
> such important minutiae for country to country considerations.

Cliff,

Pursuant to this point, would it be fair to assume that if
you don't say otherwise, that you are using the "American"
sense?  For instance, I find myself needing a transformation
for Trinidad 1903 datum, and would like to use the one you
published in your column.

Also, it is a matter of some challenge to me that you don't
provide WGS84 test values for your test point (ie. the
point of origin on Naparima Hill) for me to test, though it is
handy that you provide that location in both the Naparima 1972
datum and Trinidad 1903 datum.

http://www.asprs.org/resources/grids/11-2000-trinidad.pdf

BTW, EPSG publishes +towgs84=-61.702,284.488,472.052
for Trinidad 1903 to WGS84 which seem to different significantly
from your solution of -33.25, +232.675, +484.542.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From roger at opq.se  Tue Dec 13 00:15:55 2005
From: roger at opq.se (Roger Oberholtzer)
Date: Tue, 13 Dec 2005 09:15:55 +0100
Subject: [Proj] Finnish KKJ in proj 4.4.9
In-Reply-To: <20051212210127.GA2276@geo9.hut.fi>
References: <1134400737.20841.55.camel@acme.pacific>
	<20051212210127.GA2276@geo9.hut.fi>
Message-ID: <1134461756.31610.18.camel@acme.pacific>

On Mon, 2005-12-12 at 23:01 +0200, Martin Vermeer wrote:
> On Mon, Dec 12, 2005 at 04:18:57PM +0100, Roger Oberholtzer wrote:
> > 
> > I am exploring using proj to obtain KKJ coordinates from WGS84 lat/long
> > values.  The values only get to within 176 meters of where they are
> > expected to be (according to the Finnish Road Authority). Is anyone else
> > using proj to obtain Finnish KKJ values?
> > 
> > -- 
> > Roger Oberholtzer
> > OPQ Systems AB
> 
> Which are you using? I tried <2393> from the epsg file:
> 
> # KKJ / Finland Uniform Coordinate System
> <2393> +proj=tmerc +lat_0=0 +lon_0=27 +k=1.000000 +x_0=3500000 +y_0=0
> +ellps=intl +towgs84=-90.7,-106.1,-119.2,4.09,0.218,-1.05,1.37 +units=m
> +no_defs  <>

I got closest with:

# KKJ / Finland zone 2
<2392> +proj=tmerc +lat_0=0 +lon_0=24 +k=1.000000 +x_0=2500000 +y_0=0
+ellps=intl +towgs84=-90.7,-106.1,-119.2,4.09,0.218,-1.05,1.37 +units=m
+no_defs  <>

That was the one that got me to within 176 meters.

> just last week, and got within decimetres of the right values according
> to the Ollikainen publication.
> 
> The command I used was
> 
> ./cs2cs +proj=latlong +ellps=WGS84 +to +init=epsg:2393

I have been trying via the C API. I gave that string to pj_init_plus(),
which should use those strings.

> The test point I use is triangulation point 158:
> 
> 23d55'11.134"E  63d29'4.016"N 23.847
> 3346722.90 7046208.88
> 
> from Matti Ollikainen (1993): GPS-koordinaattien muuntaminen
> Kartastokoordinaateiksi, pages 29-31 (Finnish Geodetic Institute)
> 
> Are you sure you are using the right zone? There are four of them,
> 2391-2394, three degrees apart.

I tried them all. The one above gets me closest.

I have a Windows program that claims to do the correct transformations:

	Program name EurefMuunnos

	Author and date Sakari Haljala, NLS 4.9.2003

	Copyright National Land Survey of Finland, Helsinki 2003

This is what we are trying to match. These are some sample data points
they provided:

EUREF-FIN- geographic coordinates in format: aamm.mmm = degrees+minutes
(latitude, longitude):

6011.048456 2456.961511

6011.917399 2456.117327

6012.283731 2455.387040

6013.139141 2457.086345 

6010.570229 2455.930532 

6012.467191 2456.127325

6013.045471 2458.825683 

KKJ- plane coordinates in Gauss-Krüger zone no. 2 (northing, easting):

6675107.237 2552856.284 

6676709.563 2552052.761

6677380.277 2551368.203 

6678990.902 2552915.797 

6674205.682 2551915.400 

6677730.555 2552047.542 

6678840.480 2554525.154 

How would I set that up in cs2cs? The input is EUREF-FIN, not WGS84. In
fact, my real data (not these test points) will be WGS84 from a GPS
receiver. But I would like to verify these points as well.

-- 
Roger Oberholtzer
OPQ Systems AB




From martin.vermeer at hut.fi  Tue Dec 13 01:04:03 2005
From: martin.vermeer at hut.fi (Martin Vermeer)
Date: Tue, 13 Dec 2005 11:04:03 +0200
Subject: [Proj] Finnish KKJ in proj 4.4.9
In-Reply-To: <1134461756.31610.18.camel@acme.pacific>
References: <1134400737.20841.55.camel@acme.pacific>
	<20051212210127.GA2276@geo9.hut.fi>
	<1134461756.31610.18.camel@acme.pacific>
Message-ID: <1134464643.8808.13.camel@geo9.hut.fi>

On Tue, 2005-12-13 at 09:15 +0100, Roger Oberholtzer wrote:

...

> I have a Windows program that claims to do the correct transformations:
> 
> 	Program name EurefMuunnos
> 
> 	Author and date Sakari Haljala, NLS 4.9.2003
> 
> 	Copyright National Land Survey of Finland, Helsinki 2003
> 
> This is what we are trying to match. These are some sample data points
> they provided:

I try the following:

./cs2cs +proj=latlong +ellps=WGS84 +to +init=epsg:2392

> EUREF-FIN- geographic coordinates in format: aamm.mmm = degrees+minutes
> (latitude, longitude):
> 
> 6011.048456 2456.961511

24d56.9615'E 60d11.0485'N
2552856.87      6675107.38 -24.57 (see below... matches within a metre)

> 6011.917399 2456.117327

24d56.117327'E 60d11.917399
2552053.36      6676709.62 -24.57 (again a match... the -24m is
approximately minus the geoid height, as the KKJ datum is approximately
defined on a non-geocentric ellipsoid matching the geoid surface over
Finland)

> 6012.283731 2455.387040

(Try for yourself)

> 6013.139141 2457.086345 
> 
> 6010.570229 2455.930532 
> 
> 6012.467191 2456.127325
> 
> 6013.045471 2458.825683 
> 
> KKJ- plane coordinates in Gauss-Krüger zone no. 2 (northing, easting):
> 
> 6675107.237 2552856.284 
> 
> 6676709.563 2552052.761
> 
> 6677380.277 2551368.203 
> 
> 6678990.902 2552915.797 
> 
> 6674205.682 2551915.400 
> 
> 6677730.555 2552047.542 
> 
> 6678840.480 2554525.154 
> 
> How would I set that up in cs2cs? The input is EUREF-FIN, not WGS84. In
> fact, my real data (not these test points) will be WGS84 from a GPS
> receiver. But I would like to verify these points as well.

How to do it from inside C, I don't know, but you should be getting the
same results. Sakari's program is OK (if not, thousands of customers
here would have screamed :-)

BTW EUREF-FIN is in practice the same as WGS84 on this accuracy level.
The differences are caused by

1) The Defense Dept's WGS84 and the IGS's ITRFxx (xx = year number)
differ nowadays on the few-centrimetre level, due to being different
datums based on different observational material.
2) WGS84/ITRFxx are not only geocentric, but defined to represent a
system that does not include plate tectonics. EUREF-FIN, a Finnish
realization of ETRF89, is rigidly connected to the Eurasian plate and
coincided with ITRF89 at 1989.0, _but not anymore_ due to the plate
motion.

But as said, if a few dm will do, forget about this. 

We could probably improve the precision of the KKJ transformation from
the present +/- 1 m (and up to several metres even on Åland) down to +/-
1 dm, by calculating and including a datum grid representing the
regional deformations of KKJ. That would be quite a job though.

- Martin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20051213/032af4ea/attachment.sig>

From roger at opq.se  Tue Dec 13 02:43:40 2005
From: roger at opq.se (Roger Oberholtzer)
Date: Tue, 13 Dec 2005 11:43:40 +0100
Subject: [Proj] Finnish KKJ in proj 4.4.9
In-Reply-To: <1134464643.8808.13.camel@geo9.hut.fi>
References: <1134400737.20841.55.camel@acme.pacific>
	<20051212210127.GA2276@geo9.hut.fi>
	<1134461756.31610.18.camel@acme.pacific>
	<1134464643.8808.13.camel@geo9.hut.fi>
Message-ID: <1134470621.31610.80.camel@acme.pacific>

I sorted it out. It was a combination of your info, and a change to how
I used the C API. What I seem to have missed originally was the
"+proj=latlong +ellps=WGS84" describing the input data. I assumed (silly
me...) that this would be the default. No matter. I am happy with KKJ.

Now I need to see how well (if) it does the U.K.'s OSTN.

On Tue, 2005-12-13 at 11:04 +0200, Martin Vermeer wrote:
> On Tue, 2005-12-13 at 09:15 +0100, Roger Oberholtzer wrote:
> 
> ...
> 
> > I have a Windows program that claims to do the correct transformations:
> > 
> > 	Program name EurefMuunnos
> > 
> > 	Author and date Sakari Haljala, NLS 4.9.2003
> > 
> > 	Copyright National Land Survey of Finland, Helsinki 2003
> > 
> > This is what we are trying to match. These are some sample data points
> > they provided:
> 
> I try the following:
> 
> ./cs2cs +proj=latlong +ellps=WGS84 +to +init=epsg:2392
> 
> > EUREF-FIN- geographic coordinates in format: aamm.mmm = degrees+minutes
> > (latitude, longitude):
> > 
> > 6011.048456 2456.961511
> 
> 24d56.9615'E 60d11.0485'N
> 2552856.87      6675107.38 -24.57 (see below... matches within a metre)
> 
> > 6011.917399 2456.117327
> 
> 24d56.117327'E 60d11.917399
> 2552053.36      6676709.62 -24.57 (again a match... the -24m is
> approximately minus the geoid height, as the KKJ datum is approximately
> defined on a non-geocentric ellipsoid matching the geoid surface over
> Finland)
> 
> > 6012.283731 2455.387040
> 
> (Try for yourself)
> 
> > 6013.139141 2457.086345 
> > 
> > 6010.570229 2455.930532 
> > 
> > 6012.467191 2456.127325
> > 
> > 6013.045471 2458.825683 
> > 
> > KKJ- plane coordinates in Gauss-Krüger zone no. 2 (northing, easting):
> > 
> > 6675107.237 2552856.284 
> > 
> > 6676709.563 2552052.761
> > 
> > 6677380.277 2551368.203 
> > 
> > 6678990.902 2552915.797 
> > 
> > 6674205.682 2551915.400 
> > 
> > 6677730.555 2552047.542 
> > 
> > 6678840.480 2554525.154 
> > 
> > How would I set that up in cs2cs? The input is EUREF-FIN, not WGS84. In
> > fact, my real data (not these test points) will be WGS84 from a GPS
> > receiver. But I would like to verify these points as well.
> 
> How to do it from inside C, I don't know, but you should be getting the
> same results. Sakari's program is OK (if not, thousands of customers
> here would have screamed :-)
> 
> BTW EUREF-FIN is in practice the same as WGS84 on this accuracy level.
> The differences are caused by
> 
> 1) The Defense Dept's WGS84 and the IGS's ITRFxx (xx = year number)
> differ nowadays on the few-centrimetre level, due to being different
> datums based on different observational material.
> 2) WGS84/ITRFxx are not only geocentric, but defined to represent a
> system that does not include plate tectonics. EUREF-FIN, a Finnish
> realization of ETRF89, is rigidly connected to the Eurasian plate and
> coincided with ITRF89 at 1989.0, _but not anymore_ due to the plate
> motion.
> 
> But as said, if a few dm will do, forget about this. 
> 
> We could probably improve the precision of the KKJ transformation from
> the present +/- 1 m (and up to several metres even on Åland) down to +/-
> 1 dm, by calculating and including a datum grid representing the
> regional deformations of KKJ. That would be quite a job though.
> 
> - Martin
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
-- 
Roger Oberholtzer
OPQ Systems AB




From roger at opq.se  Wed Dec 14 06:44:07 2005
From: roger at opq.se (Roger Oberholtzer)
Date: Wed, 14 Dec 2005 15:44:07 +0100
Subject: [Proj] Finnish KKJ in proj 4.4.9 - Linux vs. Windows
In-Reply-To: <1134470621.31610.80.camel@acme.pacific>
References: <1134400737.20841.55.camel@acme.pacific>
	<20051212210127.GA2276@geo9.hut.fi>
	<1134461756.31610.18.camel@acme.pacific>
	<1134464643.8808.13.camel@geo9.hut.fi>
	<1134470621.31610.80.camel@acme.pacific>
Message-ID: <1134571447.17795.107.camel@acme.pacific>



I have sorted out using proj 4.4.9 to obtain KKJ X/Y values from WGS84
LAT/LONG values.

To be more precise, I have this sorted out on Linux. I compiled the same
4.4.9 code on Windows using MS VC++ 6.0 and the makefile.vc in the proj
source. The problem is that I do not get the same results on the two
systems! The error is in the neighborhood of 100 meters.
Has anyone used proj on Windows and had any such problem? I have used
other similar libraries on both platforms before, so I did not expect
this.

I was thinking of trying the 4.4.6 binary that is available for
downloads, but it does not contain a proj.lib file, making linking
problematic. Any reason there is not a windows binary of 4.4.9, and only
of 4.4.6?



-- 
Roger Oberholtzer
OPQ Systems AB




From warmerdam at pobox.com  Wed Dec 14 07:11:38 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 14 Dec 2005 10:11:38 -0500
Subject: [Proj] Finnish KKJ in proj 4.4.9 - Linux vs. Windows
In-Reply-To: <1134571447.17795.107.camel@acme.pacific>
References: <1134400737.20841.55.camel@acme.pacific>
	<20051212210127.GA2276@geo9.hut.fi>
	<1134461756.31610.18.camel@acme.pacific>
	<1134464643.8808.13.camel@geo9.hut.fi>
	<1134470621.31610.80.camel@acme.pacific>
	<1134571447.17795.107.camel@acme.pacific>
Message-ID: <931f8ea90512140711r1973ef04h80e2c790c66c1bf2@mail.gmail.com>

On 12/14/05, Roger Oberholtzer <roger at opq.se> wrote:
> I have sorted out using proj 4.4.9 to obtain KKJ X/Y values from WGS84
> LAT/LONG values.
>
> To be more precise, I have this sorted out on Linux. I compiled the same
> 4.4.9 code on Windows using MS VC++ 6.0 and the makefile.vc in the proj
> source. The problem is that I do not get the same results on the two
> systems! The error is in the neighborhood of 100 meters.
> Has anyone used proj on Windows and had any such problem? I have used
> other similar libraries on both platforms before, so I did not expect
> this.

Roger,

I haven't run into this.  If you can demonstrate the results you get on
linux and win32 using the "proj" or "cs2cs" commands, then I could
try and see if I get the same problem here on win32.

> I was thinking of trying the 4.4.6 binary that is available for
> downloads, but it does not contain a proj.lib file, making linking
> problematic. Any reason there is not a windows binary of 4.4.9, and only
> of 4.4.6?

Producing binaries is a hassle, and so I do not make it part of
my release regimen.  The FWTools releases do include up to date
PROJ.4 binaries though I'm not sure if I include the PROJ.4 include
files and libraries for those wanting to build their own applications.

  http://fwtools.maptools.org/

You might want to see if you get the same results with the FWTools
PROJ commands as you get from the ones you built yourself.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From roger at opq.se  Wed Dec 14 23:46:31 2005
From: roger at opq.se (Roger Oberholtzer)
Date: Thu, 15 Dec 2005 08:46:31 +0100
Subject: [Proj] Finnish KKJ in proj 4.4.9 - Linux vs. Windows
In-Reply-To: <931f8ea90512140711r1973ef04h80e2c790c66c1bf2@mail.gmail.com>
References: <1134400737.20841.55.camel@acme.pacific>
	<20051212210127.GA2276@geo9.hut.fi>
	<1134461756.31610.18.camel@acme.pacific>
	<1134464643.8808.13.camel@geo9.hut.fi>
	<1134470621.31610.80.camel@acme.pacific>
	<1134571447.17795.107.camel@acme.pacific>
	<931f8ea90512140711r1973ef04h80e2c790c66c1bf2@mail.gmail.com>
Message-ID: <1134632792.4289.14.camel@acme.pacific>

On Wed, 2005-12-14 at 10:11 -0500, Frank Warmerdam wrote:
> On 12/14/05, Roger Oberholtzer <roger at opq.se> wrote:
> > I have sorted out using proj 4.4.9 to obtain KKJ X/Y values from WGS84
> > LAT/LONG values.
> >
> > To be more precise, I have this sorted out on Linux. I compiled the same
> > 4.4.9 code on Windows using MS VC++ 6.0 and the makefile.vc in the proj
> > source. The problem is that I do not get the same results on the two
> > systems! The error is in the neighborhood of 100 meters.
> > Has anyone used proj on Windows and had any such problem? I have used
> > other similar libraries on both platforms before, so I did not expect
> > this.
> 
> Roger,
> 
> I haven't run into this.  If you can demonstrate the results you get on
> linux and win32 using the "proj" or "cs2cs" commands, then I could
> try and see if I get the same problem here on win32.

I will get something out later. I want to go through all the steps again
to be sure I have not done something dumb.

> > I was thinking of trying the 4.4.6 binary that is available for
> > downloads, but it does not contain a proj.lib file, making linking
> > problematic. Any reason there is not a windows binary of 4.4.9, and only
> > of 4.4.6?
> 
> Producing binaries is a hassle, and so I do not make it part of
> my release regimen.  The FWTools releases do include up to date
> PROJ.4 binaries though I'm not sure if I include the PROJ.4 include
> files and libraries for those wanting to build their own applications.

No problem. I just wanted to be sure that there were no specific issues
with 4.4.9 on Windows. As it is a calculation library, I would have been
surprised if there had been.

In the windows bin archive, a few (not all) of the files in the nad
directory have DOS EOL sequences, while the source archive contains
files with non-DOS EOL sequences. So:

1. Why don't all the text files in nad have the same EOL sequences on
each platform.

2. Is the code really written so it makes a difference? I think it may
be, as when I changed the EOL sequences in the esri file (which I use)
the results changed. This seems unnecessary, as a text file can be read
correctly no matter if a small bit of care is taken. Is a patch needed
for this? Should I make one?

Another Windows question: if the program is compiled to run on Windows,
perhaps it could also look in the registry for the location of the
various runtime files. If this is acceptable, I can supply a patch.
Current behavior would not be altered.

It is very simple to make a nice install for the windows package via a
free program called Inno Setup Compiler. It only requires a script to
describe the package. I can provide details if it is interesting.

Gee. I sound like a Windows user. Nope. Pure Linux. But, out clients
keep us working in the strange World of Windows for libraries and
things.

>   http://fwtools.maptools.org/
> 
> You might want to see if you get the same results with the FWTools
> PROJ commands as you get from the ones you built yourself.

I will add this to my list of tasks.

-- 
Roger Oberholtzer
OPQ Systems AB




From warmerdam at pobox.com  Thu Dec 15 06:46:11 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 15 Dec 2005 09:46:11 -0500
Subject: [Proj] Finnish KKJ in proj 4.4.9 - Linux vs. Windows
In-Reply-To: <1134632792.4289.14.camel@acme.pacific>
References: <1134400737.20841.55.camel@acme.pacific>
	<20051212210127.GA2276@geo9.hut.fi>
	<1134461756.31610.18.camel@acme.pacific>
	<1134464643.8808.13.camel@geo9.hut.fi>
	<1134470621.31610.80.camel@acme.pacific>
	<1134571447.17795.107.camel@acme.pacific>
	<931f8ea90512140711r1973ef04h80e2c790c66c1bf2@mail.gmail.com>
	<1134632792.4289.14.camel@acme.pacific>
Message-ID: <931f8ea90512150646t15aaa53bq438beb67a7a3bd90@mail.gmail.com>

On 12/15/05, Roger Oberholtzer <roger at opq.se> wrote:
>
> In the windows bin archive, a few (not all) of the files in the nad
> directory have DOS EOL sequences, while the source archive contains
> files with non-DOS EOL sequences. So:
>
> 1. Why don't all the text files in nad have the same EOL sequences on
> each platform.

Roger,

As far as I know, I try to keep them in CVS in unix text mode.
How they are distributed might vary.

> 2. Is the code really written so it makes a difference? I think it may
> be, as when I changed the EOL sequences in the esri file (which I use)
> the results changed. This seems unnecessary, as a text file can be read
> correctly no matter if a small bit of care is taken. Is a patch needed
> for this? Should I make one?

The init files are opened in pj_open_lib() in "rt" (text) mode,
and fscanf(..,"%300s",...) is used to read them.  I presume this
is sufficient to handle unix or dos text modes on win32.  On unix
I think this might result in nearly blank lines but be otherwise
harmless (for dos mode files).

> Another Windows question: if the program is compiled to run on Windows,
> perhaps it could also look in the registry for the location of the
> various runtime files. If this is acceptable, I can supply a patch.
> Current behavior would not be altered.

It could, but I have avoided this in PROJ and other libraries I
work on.  If folks are writing applications using PROJ, they can
provide the search directory via API calls.  For users of the
top level PROJ commandline programs, they can use the same
environment variables as on unix.  I don't see a huge benefit
to using the registry.

> It is very simple to make a nice install for the windows package via a
> free program called Inno Setup Compiler. It only requires a script to
> describe the package. I can provide details if it is interesting.

Well, as you can see from the FWTools binaries, I am capable of
producing an installer.  But I'm not really inclined to put in the effort
for PROJ.4.  If someone (you?) would like to maintain PROJ.4 installable
packages for win32, I would be happy to point to their web page
for downloads.

I realize that "not inclined to put in the effort" sounds pretty callous,
but I am already spreading myself too thin, and so I try to minimize
the overhead of each component I maintain.  When I get my next
burst of ambition with regard to PROJ.4, I will invest it in resolving
the various EPSG->PROJ.4 translation issues with prime meridians,
and deal with the Krovak issue properly.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From pmezard at gmail.com  Thu Dec 15 11:12:25 2005
From: pmezard at gmail.com (=?ISO-8859-1?Q?Patrick_M=E9zard?=)
Date: Thu, 15 Dec 2005 20:12:25 +0100
Subject: [Proj] Finnish KKJ in proj 4.4.9 - Linux vs. Windows
In-Reply-To: <1134571447.17795.107.camel@acme.pacific>
References: <1134400737.20841.55.camel@acme.pacific>	<20051212210127.GA2276@geo9.hut.fi>	<1134461756.31610.18.camel@acme.pacific>	<1134464643.8808.13.camel@geo9.hut.fi>	<1134470621.31610.80.camel@acme.pacific>
	<1134571447.17795.107.camel@acme.pacific>
Message-ID: <43A1C019.9080807@gmail.com>

Roger Oberholtzer a écrit :

>To be more precise, I have this sorted out on Linux. I compiled the same
>4.4.9 code on Windows using MS VC++ 6.0 and the makefile.vc in the proj
>source. The problem is that I do not get the same results on the two
>systems! The error is in the neighborhood of 100 meters.
>Has anyone used proj on Windows and had any such problem? I have used
>other similar libraries on both platforms before, so I did not expect
>this.
>
Hello,
This may be irrelevant but there are flags for MSVC making floating 
point computations less hazardous, like /Op (Improve float consistency, 
http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vccore/html/_core_.2f.op.asp). 
Perhaps it is already enabled by proj.4 makefile, I do not know.

Patrick Mézard



From AnthonyD at rocketmail.com  Thu Dec 15 22:22:08 2005
From: AnthonyD at rocketmail.com (Anthony Dunk)
Date: Thu, 15 Dec 2005 22:22:08 -0800 (PST)
Subject: [Proj] Alaska State Plane Coordinates (NAD83) - Hotine Oblique
	Mercator ??
In-Reply-To: <1134470621.31610.80.camel@acme.pacific>
Message-ID: <20051216062208.93692.qmail@web50801.mail.yahoo.com>


Has anyone successfully implemented support for the Hotine Oblique
Mercator for the Alaska SPCS Zone 1 (5001) using PROJ4 ?

If so, can you share your proj command string with me and if possible a
test point in lat/lon and SPCS ?

I have been trying to find this information on the web, but have been
finding conflicting info.

According to a document on the NOAA web
page(http://www.ngs.noaa.gov/PUBS_LIB/ManualNOSNGS5.pdf) the origin of
this projection is 133d40'0"W 57d0'0"N (or 5000000m east, -5000000m
north).

I get these coordinates agreeing when I use what I believe to be the
correct parameters:

+proj=omerc +k=0.9999 +lat_0=57.0 +alpha=-36.8698976458
+lonc=-133.66667 +ellps=WGS84 +units=m

Are these parameters correct ??

But then I have to manually subtract the false easting and false
northing. Stangely I cannot get these automatically handled by proj
using the normal +x_0=5000000 and +y_0=-5000000 parameters. Any ideas
why ? Are these options only available for some projections ?

Thanks for any help you can offer!

Cheers,
Anthony.



__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 


From ovv at hetnet.nl  Fri Dec 16 03:48:26 2005
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Fri, 16 Dec 2005 12:48:26 +0100
Subject: [Proj] Alaska State Plane Coordinates (NAD83) - Hotine
	Oblique Mercator ??
In-Reply-To: <20051216062208.93692.qmail@web50801.mail.yahoo.com>
Message-ID: <BFC8681A.6248%ovv@hetnet.nl>

> From: Anthony Dunk <AnthonyD-rocketmail.com>

> Has anyone successfully implemented support for the Hotine Oblique
> Mercator for the Alaska SPCS Zone 1 (5001) using PROJ4 ?

....

> Are these parameters correct ??

Don't think so.

One 'official' test point from the GCTP test suite, including the header
information:

Alaska, Zone 1 AK_1 6101 5001
STATE PLANE PROJECTION PARAMETERS:
   Zone:      5001
   Datum:     NAD 27
OBLIQUE MERCATOR (HOTINE) PROJECTION PARAMETERS:
   Semi-Major Axis of Ellipsoid:     6378206.400000 meters
   Semi-Minor Axis of Ellipsoid:     6356583.800000 meters
   Scale Factor at C. Meridian:     0.999900
   False Easting:      818585.567227 meters
   False Northing:     575219.245107 meters
   Azimuth of Central Line:     -36.869898
   Longitude of Center:     -101.514031 degrees
   Latitude of Center:     57.000000 degrees
 INPUT LONG LAT        X              Y           OUTPUT LON      OUTPUT LAT
-135.00  58.50   740839.52660   743026.80896    -135.00000     58.50000

The "Longitude of Center" is not the correct lonc, it is indeed -133d40m
With my version of omerc (derived from Libproj4) and the following
parameters I got:

// first set Clarke 1866, NAD27 ellipsoid
lat = 58.5; lon = -135;
lat0 = 57; lonc = -133d40m;
alfac = -36.869898; gamma = "";
k0 = 0.999900; x0 = 818585.567227; y0 = 575219.245107;
Result: x = 740839.526599844; y = 743026.808961898

The alfac is officially defined as the arcsine of -0.6, so an even better
value of alfac would be -36.869897645844 degrees.





From ovv at hetnet.nl  Fri Dec 16 04:15:35 2005
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Fri, 16 Dec 2005 13:15:35 +0100
Subject: [Proj] Alaska State Plane Coordinates (NAD83) - Hotine
	Oblique Mercator ??
In-Reply-To: <20051216062208.93692.qmail@web50801.mail.yahoo.com>
Message-ID: <BFC86E77.624A%ovv@hetnet.nl>

> From: Anthony Dunk <AnthonyD-rocketmail.com>

> Has anyone successfully implemented support for the Hotine Oblique
> Mercator for the Alaska SPCS Zone 1 (5001) using PROJ4 ?

....

> Are these parameters correct ??

Don't think so.

One 'official' test point from the GCTP test suite, including the header
information:

Alaska, Zone 1 AK_1 6101 5001
STATE PLANE PROJECTION PARAMETERS:
   Zone:      5001
   Datum:     NAD 27

etc.


I forgot: there are no easy to find test points for Alaska 5001 under NAD83.

Therefore my test with the earlier mentioned NAD27 GCTP point, but now with
the correct parameters for NAD83:
(Data from the manual page 63,
http://www.ngs.noaa.gov/PUBS_LIB/ManualNOSNGS5.pdf)

// first set GRS80
lat = 58.5; lon = -135;
lat0 = 57; lonc = -133d40m;
alfac = -36.869898; gamma = "";
k0 = 0.999900; x0 = 5e6; y0 = -5e6;
Result: x = 4922256.91413097; y = -4832195.16685546

By the way, asin(-0.6) = atan(-3/4), mentioned in the 'manual'.

I hope others can verify the results.




From gerald.evenden at verizon.net  Sat Dec 17 08:58:34 2005
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Sat, 17 Dec 2005 11:58:34 -0500
Subject: [Proj] website cartographic executables---a query
Message-ID: <200512171158.34345.gerald.evenden@verizon.net>

I have been experimenting with php and various capabilities of website
options.  For example, computing the spherical geodesic is relatively
simple and should be codable as a php function.  Thus a website
could be constructed where the user can key in the coordinates of
two points and obtain distance and azimuth.  Even an elliptical
version should not be too difficult.

My experimentation is now limited to my host machine with Apache
and I am at liberty to push the limits including including using C  programs.
Unfortunately, the web space provided by my ISP does not even allow
php so I am not currently able to demonstate any of these efforts.

I am currently unaware of any website that offers the basic service
offered by program lproj (or, for that matter, proj or derivatives).
If a website would provide for C program it would seem useful to
be able to select a projection, specify its details and get a
conversion of coordinate pairs.  With data base facility, the user
should be able to select grid system specs, etc. on the browser and
do conversions.

The main purpose of such a website is to provide "instant" demonstration
of a projection or datum conversion.  It seems useful to be able to get
sample conversions related to the user's particular data problems.

I would appreciate any comments on the usefulness of the above ideas
and the feasibility of implementation.  Also, any recommendations
on website hosts would be appreciated.

Thank-you.
-- 
Jerry and the low riders:Daisy May and Joshua
"The being cannot be termed rational or virtuous,
who obeys any authority, but that of reason."
---Mary Wollstonecraft 1792


From warmerdam at pobox.com  Sat Dec 17 11:46:05 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat, 17 Dec 2005 14:46:05 -0500
Subject: [Proj] website cartographic executables---a query
In-Reply-To: <200512171158.34345.gerald.evenden@verizon.net>
References: <200512171158.34345.gerald.evenden@verizon.net>
Message-ID: <931f8ea90512171146m8a85d2cxd914b9469a75770b@mail.gmail.com>

On 12/17/05, Gerald I. Evenden <gerald.evenden at verizon.net> wrote:
>
> I am currently unaware of any website that offers the basic service
> offered by program lproj (or, for that matter, proj or derivatives).
> If a website would provide for C program it would seem useful to
> be able to select a projection, specify its details and get a
> conversion of coordinate pairs.  With data base facility, the user
> should be able to select grid system specs, etc. on the browser and
> do conversions.

Gerald,

A PROJ.4 based web based coordinate system transformer is implemented
according to an earlier version of the WCTS protocol at:
  http://maps.gdal.org/wcts/

Check out the "HTML Form" link for the interactive form, though it is
very EPSG oriented in terms of selecting coordinate systems.

> I would appreciate any comments on the usefulness of the above ideas
> and the feasibility of implementation.  Also, any recommendations
> on website hosts would be appreciated.

The OGR WCTS server is built around an OGC protocol, and
ultimately the HTML interface to this lacks some usability.  I
have encountered a few other web projections interfaces over
the years, though I can't point to any of them just now.

I think it would be nice, and not particularly hard, to build an
HTML inteface to "lproj" or similar services, using the PROJ.4
syntax for coordinate systems.

If you want, I would be happy to provide an account for this
purpose on www.gdal.org.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From gerald.evenden at verizon.net  Sat Dec 17 13:00:51 2005
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Sat, 17 Dec 2005 16:00:51 -0500
Subject: [Proj] website cartographic executables---a query
In-Reply-To: <931f8ea90512171146m8a85d2cxd914b9469a75770b@mail.gmail.com>
References: <200512171158.34345.gerald.evenden@verizon.net>
	<931f8ea90512171146m8a85d2cxd914b9469a75770b@mail.gmail.com>
Message-ID: <200512171600.51150.gerald.evenden@verizon.net>

On Saturday 17 December 2005 02:46 pm, Frank Warmerdam wrote:
	...
> Gerald,
>
> A PROJ.4 based web based coordinate system transformer is implemented
> according to an earlier version of the WCTS protocol at:
>   http://maps.gdal.org/wcts/
>
> Check out the "HTML Form" link for the interactive form, though it is
> very EPSG oriented in terms of selecting coordinate systems.

Konqueror had problems with several of the pages for "HTML Form".
Firefox did a little better as did Safari.  I have not tried M$ yet.

At the moment, I am trying to stay with the most elemental of HTML
forms and php4.
>
> > I would appreciate any comments on the usefulness of the above ideas
> > and the feasibility of implementation.  Also, any recommendations
> > on website hosts would be appreciated.
>
> The OGR WCTS server is built around an OGC protocol, and
> ultimately the HTML interface to this lacks some usability.  I
> have encountered a few other web projections interfaces over
> the years, though I can't point to any of them just now.

At the moment I am trying to minimize the alphabet soup as
it is a bit over my head.  Bad enough getting used to working with
sessions, et al..  :-)  PHP is easy enough as it is a pretty close clone
of C,  The benchmark browser is Konqueror and if it can handle it,
any other browser should consider it a breeze.

> I think it would be nice, and not particularly hard, to build an
> HTML inteface to "lproj" or similar services, using the PROJ.4
> syntax for coordinate systems.
>
> If you want, I would be happy to provide an account for this
> purpose on www.gdal.org.

Let me get a sampler with the geodesic procedure going.  We could
see about putting this simple project up as a test case.  No C binaries
required for it.  Right now my head is going in circles managing this
loop of pages.  As I imagine it now, it consists of a form page with
all the entries (freely editable) and a radio selection: forward, inverse,
reset, etc.. I have an airport file that I would also like to be able to query
to set the pt. A or pt. B coordinates.  Similarly for ellipsoid and distance
units.  Nearly every operation loops back to the main page with an
updated form.  Cosmetics and css come later. ;-)

The geodesic is a learning project.

> Best regards,
> --
> ---------------------------------------+-----------------------------------
>--- I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com light and sound - activate the windows |
> http://pobox.com/~warmerdam and watch the world go round - Rush    |
> Geospatial Programmer for Rent

-- 
Jerry and the low riders:Daisy May and Joshua
"The being cannot be termed rational or virtuous,
who obeys any authority, but that of reason."
---Mary Wollstonecraft 1792


From pramsey at refractions.net  Sat Dec 17 14:19:24 2005
From: pramsey at refractions.net (Paul Ramsey)
Date: Sat, 17 Dec 2005 14:19:24 -0800
Subject: [Proj] website cartographic executables---a query
In-Reply-To: <200512171600.51150.gerald.evenden@verizon.net>
References: <200512171158.34345.gerald.evenden@verizon.net>
	<931f8ea90512171146m8a85d2cxd914b9469a75770b@mail.gmail.com>
	<200512171600.51150.gerald.evenden@verizon.net>
Message-ID: <8C69332B-3803-409F-B097-FBED9D2A6AD2@refractions.net>

For geodesics, I think the Great Circle Mapper <http://gc.kls2.com/>  
is wonderful fun.

P

On 17-Dec-05, at 1:00 PM, Gerald I. Evenden wrote:

> On Saturday 17 December 2005 02:46 pm, Frank Warmerdam wrote:
> 	...
>> Gerald,
>>
>> A PROJ.4 based web based coordinate system transformer is implemented
>> according to an earlier version of the WCTS protocol at:
>>   http://maps.gdal.org/wcts/
>>
>> Check out the "HTML Form" link for the interactive form, though it is
>> very EPSG oriented in terms of selecting coordinate systems.
>
> Konqueror had problems with several of the pages for "HTML Form".
> Firefox did a little better as did Safari.  I have not tried M$ yet.
>
> At the moment, I am trying to stay with the most elemental of HTML
> forms and php4.
>>
>>> I would appreciate any comments on the usefulness of the above ideas
>>> and the feasibility of implementation.  Also, any recommendations
>>> on website hosts would be appreciated.
>>
>> The OGR WCTS server is built around an OGC protocol, and
>> ultimately the HTML interface to this lacks some usability.  I
>> have encountered a few other web projections interfaces over
>> the years, though I can't point to any of them just now.
>
> At the moment I am trying to minimize the alphabet soup as
> it is a bit over my head.  Bad enough getting used to working with
> sessions, et al..  :-)  PHP is easy enough as it is a pretty close  
> clone
> of C,  The benchmark browser is Konqueror and if it can handle it,
> any other browser should consider it a breeze.
>
>> I think it would be nice, and not particularly hard, to build an
>> HTML inteface to "lproj" or similar services, using the PROJ.4
>> syntax for coordinate systems.
>>
>> If you want, I would be happy to provide an account for this
>> purpose on www.gdal.org.
>
> Let me get a sampler with the geodesic procedure going.  We could
> see about putting this simple project up as a test case.  No C  
> binaries
> required for it.  Right now my head is going in circles managing this
> loop of pages.  As I imagine it now, it consists of a form page with
> all the entries (freely editable) and a radio selection: forward,  
> inverse,
> reset, etc.. I have an airport file that I would also like to be  
> able to query
> to set the pt. A or pt. B coordinates.  Similarly for ellipsoid and  
> distance
> units.  Nearly every operation loops back to the main page with an
> updated form.  Cosmetics and css come later. ;-)
>
> The geodesic is a learning project.
>
>> Best regards,
>> --
>> --------------------------------------- 
>> +-----------------------------------
>> --- I set the clouds in motion - turn up   | Frank Warmerdam,
>> warmerdam at pobox.com light and sound - activate the windows |
>> http://pobox.com/~warmerdam and watch the world go round - Rush    |
>> Geospatial Programmer for Rent
>
> -- 
> Jerry and the low riders:Daisy May and Joshua
> "The being cannot be termed rational or virtuous,
> who obeys any authority, but that of reason."
> ---Mary Wollstonecraft 1792
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From karl at kls2.com  Sun Dec 18 00:12:53 2005
From: karl at kls2.com (Karl Swartz)
Date: Sun, 18 Dec 2005 00:12:53 -0800
Subject: [Proj] website cartographic executables---a query
In-Reply-To: <8C69332B-3803-409F-B097-FBED9D2A6AD2@refractions.net>
References: <200512171158.34345.gerald.evenden@verizon.net>
	<931f8ea90512171146m8a85d2cxd914b9469a75770b@mail.gmail.com>
	<200512171600.51150.gerald.evenden@verizon.net>
	<8C69332B-3803-409F-B097-FBED9D2A6AD2@refractions.net>
Message-ID: <20051218081253.GF86572@orion.kls2.com>

> For geodesics, I think the Great Circle Mapper <http://gc.kls2.com/>  
> is wonderful fun.

Thanks!  I'm always trying to make it more useful, so suggestions for
enhancements are welcome.  8-)

 -- Karl


From roger at opq.se  Mon Dec 19 04:05:05 2005
From: roger at opq.se (Roger Oberholtzer)
Date: Mon, 19 Dec 2005 13:05:05 +0100
Subject: [Proj] U.K. OSTN02 and OSGM02
Message-ID: <1134993906.13515.26.camel@acme.pacific>

Is it possible to calculate the U.K.'s OSTN02 and OSGM02 X/Y coordinates
with proj?

-- 
Roger Oberholtzer
OPQ Systems AB




From morrishall at hotmail.com  Sat Dec 17 19:37:00 2005
From: morrishall at hotmail.com (Morrris Hall)
Date: Sat, 17 Dec 2005 21:37:00 -0600
Subject: [Proj] Sun Executables
Message-ID: <BAY103-DAV113CFF301CB649D7525709DE3C0@phx.gbl>

Hi:
I'm trying to use PROJ. for the first time..I don't have a C compiler on my Sun OS 5.8 system and was checking to see if someone might have a recent version of executables for this OS they have compiled and might be willing to share. Any assistance would be greatly appreciated.

Best regards,

Morris Hall
www.karstresearch.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20051217/9b436506/attachment.html>

From paul-grass at stjohnspoint.co.uk  Mon Dec 19 06:57:09 2005
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Mon, 19 Dec 2005 14:57:09 +0000 (GMT)
Subject: [Proj] Sun Executables
In-Reply-To: <BAY103-DAV113CFF301CB649D7525709DE3C0@phx.gbl>
References: <BAY103-DAV113CFF301CB649D7525709DE3C0@phx.gbl>
Message-ID: <Pine.LNX.4.60.0512191455340.5538@agrippa.ukshells.co.uk>

Hello Morris
I compiled some PROJ-4.4.9 Solaris 8 binaries there now. Please see 
ftp://ftp.qub.ac.uk/pub/users/paulk/grass/proj-4.4.9-solaris8-bin.tar.gz
(I will leave them there for a day or two).

If you untar the file in the root directory they will install under
/usr/local

Best regards

Paul

On Sat, 17 Dec 2005, Morrris Hall wrote:

> Hi:
> I'm trying to use PROJ. for the first time..I don't have a C compiler on my Sun OS 5.8 system and was checking to see if someone might have a recent version of executables for this OS they have compiled and might be willing to share. Any assistance would be greatly appreciated.
>
> Best regards,
>
> Morris Hall
> www.karstresearch.com


From paul-grass at stjohnspoint.co.uk  Mon Dec 19 07:26:07 2005
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Mon, 19 Dec 2005 15:26:07 +0000 (GMT)
Subject: [Proj] U.K. OSTN02 and OSGM02
In-Reply-To: <1134993906.13515.26.camel@acme.pacific>
References: <1134993906.13515.26.camel@acme.pacific>
Message-ID: <Pine.LNX.4.60.0512191452500.5538@agrippa.ukshells.co.uk>

Hello Roger

On Mon, 19 Dec 2005, Roger Oberholtzer wrote:

> Is it possible to calculate the U.K.'s OSTN02 and OSGM02 X/Y coordinates
> with proj?

OSGM02 is the geoid model that models the separation between the
WGS84/ETRS89/GRS80 ellipsoid and the Airy ellipsoid used for Ordnance Survey
heights (or the Modified Airy ellipsoid in the case of Northern Ireland, which
OSGM02 is also supposed to apply to but didn't seem quite right when I tried
it about two years ago). PROJ.4 can't make use of this information and it 
would need to be applied to the WGS84 height separately from the 
re-projection step.

OSTN02 is the transformation grid to convert Ordnance Survey National Grid 
eastings and northings to/from ETRS89/WGS84/GRS80 latitude and longitude. It 
would be possible to use this data with PROJ.4 by converting it into the 
gsb format, which PROJ.4 recognises. I did something similar for the 
national gridshift file used in France (see 
http://www.stjohnspoint.co.uk/gis/france.htm although I have recently 
recognised that this might contain a VERY small error due to slightly 
different parameters used for the Clark 1880 ellipsoid as compared to the 
parameters built into PROJ.4) and would like to do it for OSTN02 but 
haven't had time.

Sorry I haven't really been any help.

Paul



From paul-grass at stjohnspoint.co.uk  Mon Dec 19 07:41:46 2005
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Mon, 19 Dec 2005 15:41:46 +0000 (GMT)
Subject: [Proj] U.K. OSTN02 and OSGM02
In-Reply-To: <Pine.LNX.4.60.0512191452500.5538@agrippa.ukshells.co.uk>
References: <1134993906.13515.26.camel@acme.pacific>
	<Pine.LNX.4.60.0512191452500.5538@agrippa.ukshells.co.uk>
Message-ID: <Pine.LNX.4.60.0512191537310.5538@agrippa.ukshells.co.uk>

On Mon, 19 Dec 2005, Paul Kelly wrote:

> OSGM02 is the geoid model that models the separation between the
> WGS84/ETRS89/GRS80 ellipsoid and the Airy ellipsoid used for Ordnance Survey
> heights (or the Modified Airy ellipsoid in the case of Northern Ireland, 
> which
> OSGM02 is also supposed to apply to but didn't seem quite right when I tried
> it about two years ago). PROJ.4 can't make use of this information and it 
> would need to be applied to the WGS84 height separately from the 
> re-projection step.

I'm so sorry I've just made that much more confusing that it needed to be! 
Of couse the geoid is nothing to do with the ellipsoid but models instead 
the gravitational pull of the earth, which is what determines the relation 
of different heights to the sea level-based vertical datums used in 
ordnance survey maps.

So I should have said OSGM02 relates the ETRS89 ellipsoidal height (which 
is what you can get from a GPS receiver) to the height above sea level (which
is determined by the geoid). And the vertical datum used in Northern Ireland
is indeed different from that used in Great Britain.

There are many people on this list far more qualified than me to explain 
this, but I hope at least I've been able to explain roughly what it means 
from a practical point of view.

Paul



From roger at opq.se  Mon Dec 19 08:07:10 2005
From: roger at opq.se (Roger Oberholtzer)
Date: Mon, 19 Dec 2005 17:07:10 +0100
Subject: [Proj] U.K. OSTN02 and OSGM02
In-Reply-To: <Pine.LNX.4.60.0512191452500.5538@agrippa.ukshells.co.uk>
References: <1134993906.13515.26.camel@acme.pacific>
	<Pine.LNX.4.60.0512191452500.5538@agrippa.ukshells.co.uk>
Message-ID: <1135008430.31610.16.camel@acme.pacific>

On Mon, 2005-12-19 at 15:26 +0000, Paul Kelly wrote:
> Hello Roger
> 
> On Mon, 19 Dec 2005, Roger Oberholtzer wrote:
> 
> > Is it possible to calculate the U.K.'s OSTN02 and OSGM02 X/Y coordinates
> > with proj?
> 
> OSGM02 is the geoid model that models the separation between the
> WGS84/ETRS89/GRS80 ellipsoid and the Airy ellipsoid used for Ordnance Survey
> heights (or the Modified Airy ellipsoid in the case of Northern Ireland, which
> OSGM02 is also supposed to apply to but didn't seem quite right when I tried
> it about two years ago). PROJ.4 can't make use of this information and it 
> would need to be applied to the WGS84 height separately from the 
> re-projection step.

I can skip the OSGM02 bit for now.

> OSTN02 is the transformation grid to convert Ordnance Survey National Grid 
> eastings and northings to/from ETRS89/WGS84/GRS80 latitude and longitude. It 
> would be possible to use this data with PROJ.4 by converting it into the 
> gsb format, which PROJ.4 recognises. I did something similar for the 
> national gridshift file used in France (see 
> http://www.stjohnspoint.co.uk/gis/france.htm although I have recently 
> recognised that this might contain a VERY small error due to slightly 
> different parameters used for the Clark 1880 ellipsoid as compared to the 
> parameters built into PROJ.4) and would like to do it for OSTN02 but 
> haven't had time.

I plan on starting with WGS84 latitude and longitude. I get the general
idea of what you did in the link above, but I am uncertain how to do
this for OSTN02.

> Sorry I haven't really been any help.

Well, a bit. At least the answer was not that I could not get there from
here. Not that I know the way...

-- 
Roger Oberholtzer
OPQ Systems AB




From gerald.evenden at verizon.net  Mon Dec 19 11:44:37 2005
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Mon, 19 Dec 2005 14:44:37 -0500
Subject: [Proj] website cartographic executables---a query
In-Reply-To: <8C69332B-3803-409F-B097-FBED9D2A6AD2@refractions.net>
References: <200512171158.34345.gerald.evenden@verizon.net>
	<200512171600.51150.gerald.evenden@verizon.net>
	<8C69332B-3803-409F-B097-FBED9D2A6AD2@refractions.net>
Message-ID: <200512191444.37172.gerald.evenden@verizon.net>

On Saturday 17 December 2005 05:19 pm, you wrote:
> For geodesics, I think the Great Circle Mapper <http://gc.kls2.com/>
> is wonderful fun.

Just an added note here: check the NGS site for full precision online
geodesic computations:

http://www.ngs.noaa.gov/TOOLS/Inv_Fwd/Inv_Fwd.html

FORTRAN sources are also there.  Note, I f2c'ed the nucleus of this
material some time ago and used that to create a php file which I am
now debugging.  A reference to a copy of the Vincenti algorithm that
the procedures are based upon is also at that site.

-- 
Jerry and the low riders:Daisy May and Joshua
"The being cannot be termed rational or virtuous,
who obeys any authority, but that of reason."
---Mary Wollstonecraft 1792


From FRIENDDE at gru.com  Mon Dec 19 13:35:43 2005
From: FRIENDDE at gru.com (Friend, Darris E)
Date: Mon, 19 Dec 2005 16:35:43 -0500
Subject: [Proj] OT: Geotrans's Neys Projection - Modified Lambert Conformal
	Conic
Message-ID: <94FE9AAAB50C92448DCF1A4B99816F661ECA2F@GRUCLXCHGPR01.gruadmin.gru.com>

Paul, 
 
Would you be willing to share the C# code you converted?
 
Thanks
 
D. F.
GIS Technician
Gainesville Regional Utilities
 
> Hello,
> Thanks for the the information. I have now found the document. It is
> located in the users package. I was only using the developers package.
 
> By the way, I have nothing against GeoTrans. It is more suitable for
> a work I am doing now in .NET Framework. I easily ported it to C++
> and then moved it to C# without any problem.
 
> Best regard,
> Paul.
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20051219/a01b7ac1/attachment.html>

From paul at toolscenter.org  Mon Dec 19 15:23:33 2005
From: paul at toolscenter.org (Paul Selormey)
Date: Tue, 20 Dec 2005 08:23:33 +0900
Subject: [Proj] OT: Geotrans's Neys Projection - Modified Lambert
	ConformalConic
In-Reply-To: <94FE9AAAB50C92448DCF1A4B99816F661ECA2F@GRUCLXCHGPR01.gruadmin.gru.com>
Message-ID: <000701c604f3$3ed2e350$030ba8c0@SWEETJESUS>

Sorry, the C# codes were part of a work I did for my former company.
Off course, I can always do it if there is a need. But the process is simple
and should take you less than 3 days.

Each Geotrans *.h/*.c pair file is an indepedendent projection, so can be
compiled individually with the exception of the (T)Mercator.
Here are the steps: C ---> C++ ---> C#
1. Change the *.c file extension to C++, and add a C++ class
2. The *.c contains static/globals fields, move all as members of the class
3. For quick C# conversion, try to maintain all the codes in the *.h file.
4. Make functions defined in the *.h/*.c files methods of the class.
5. For the C#, make the #defines "const" or "readonly" members
6. Use the Math.* for the maths functions
7. Use exceptions for the error codes. Each *.c contains the actual
   message of the error codes in its comments, so simply copy these as
     throw new YourException("message");
   and return "void" - may be subject to your design.
8. Change the comments to the C# style and add the test sample as part of
   the comment for quick copy and paste testing codes and if you have the
time
   and need, change these for NUnit tests. Some of the codes do not give the
   expected results in the documentations though.

I should have the intermediate/C++ codes somewhere in my PC, since I did 
this at home, I could look for it if you need this one.

Best regards,
Paul.


________________________________

        From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Friend, Darris E
        Sent: Tuesday, December 20, 2005 6:36 AM
        To: proj at lists.maptools.org
        Subject: [Proj] OT: Geotrans's Neys Projection - Modified Lambert
ConformalConic

        Paul,

        Would you be willing to share the C# code you converted?
        Thanks

        D. F.
        GIS Technician
        Gainesville Regional Utilities

        > Hello,
        > Thanks for the the information. I have now found the document. It
is
        > located in the users package. I was only using the developers
package.
        
        > By the way, I have nothing against GeoTrans. It is more suitable
for
        > a work I am doing now in .NET Framework. I easily ported it to C++
        > and then moved it to C# without any problem.
        
        > Best regard,
        > Paul.

        







From EMiller at dfg.ca.gov  Mon Dec 19 16:02:44 2005
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Mon, 19 Dec 2005 16:02:44 -0800
Subject: [Proj] OT: Geotrans's Neys Projection - Modified Lambert
	ConformalConic
Message-ID: <s3a6d9c5.059@dfg.ca.gov>

Not to make this a C# and Geotrans list, but it might be a little less work to just implement "Platform Invoke" functions for those functions and data types defined in engine.h.  Then your code just loads the geotrans2.dll and calls its functions as if they were native to C# (more or less).  You have to figure out a few things like calling convention (cdecl vs. stdcall) and how to send fixed length string buffers (hint: StringBuilder).  Most pointers to simple types can be handled with "ref" or "out" modifiers and pointers to opaque types are handled with the "IntPtr" type (C#'s answer to void pointers).

To bring it back to PROJ.4, you can refer to my C# wrapper for some idea how to define external functions.  See http://ftp.dfg.ca.gov/outgoing/nafwb/proj4/csharp/
Unlike proj.4, you probably won't need any "unsafe" pointer code constructs for geotrans.

Luck,

>>> paul at toolscenter.org 12/19/2005 3:23:33 PM >>>
Sorry, the C# codes were part of a work I did for my former company.
Off course, I can always do it if there is a need. But the process is simple
and should take you less than 3 days.

Each Geotrans *.h/*.c pair file is an indepedendent projection, so can be
compiled individually with the exception of the (T)Mercator.
Here are the steps: C ---> C++ ---> C#
1. Change the *.c file extension to C++, and add a C++ class
2. The *.c contains static/globals fields, move all as members of the class
3. For quick C# conversion, try to maintain all the codes in the *.h file.
4. Make functions defined in the *.h/*.c files methods of the class.
5. For the C#, make the #defines "const" or "readonly" members
6. Use the Math.* for the maths functions
7. Use exceptions for the error codes. Each *.c contains the actual
   message of the error codes in its comments, so simply copy these as
     throw new YourException("message");
   and return "void" - may be subject to your design.
8. Change the comments to the C# style and add the test sample as part of
   the comment for quick copy and paste testing codes and if you have the
time
   and need, change these for NUnit tests. Some of the codes do not give the
   expected results in the documentations though.

I should have the intermediate/C++ codes somewhere in my PC, since I did 
this at home, I could look for it if you need this one.

Best regards,
Paul.


________________________________

        From: proj-bounces at lists.maptools.org 
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Friend, Darris E
        Sent: Tuesday, December 20, 2005 6:36 AM
        To: proj at lists.maptools.org 
        Subject: [Proj] OT: Geotrans's Neys Projection - Modified Lambert
ConformalConic

        Paul,

        Would you be willing to share the C# code you converted?
        Thanks

        D. F.
        GIS Technician
        Gainesville Regional Utilities

        > Hello,
        > Thanks for the the information. I have now found the document. It
is
        > located in the users package. I was only using the developers
package.
        
        > By the way, I have nothing against GeoTrans. It is more suitable
for
        > a work I am doing now in .NET Framework. I easily ported it to C++
        > and then moved it to C# without any problem.
        
        > Best regard,
        > Paul.

        





_______________________________________________
Proj mailing list
Proj at lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/proj




From paul at toolscenter.org  Mon Dec 19 20:28:41 2005
From: paul at toolscenter.org (paul at toolscenter.org)
Date: Tue, 20 Dec 2005 05:28:41 +0100 (CET)
Subject: [Proj] OT: Geotrans's Neys Projection - Modified Lambert 
	ConformalConic
In-Reply-To: <s3a6d9c5.059@dfg.ca.gov>
References: <s3a6d9c5.059@dfg.ca.gov>
Message-ID: <2712.219.119.146.155.1135052921.squirrel@sven-wiegand.de>

I personally do not work with P/Invoke unless there is a real reason for it.
If it will take me only 3 days to get a complete C# version of GeoTrans,
with all the .NET benefits, I will prefer that to getting P/Invoke right
or wrong not forgetting thread issues.

Just like in GeoTools, if I need Proj4 in C# application, I will port it.
I started this effort by removing all the macros in the Proj4, but Frank
was not willing to accept this as the main. With the many changes, I now
plan to do it for the libproj4 and then move it to C++ classes, and then
to the C#.

Simply, I avoid P/Invoke in my .NET application unless I am dealing with
third-party library or large code base I do not understand. For
open-sources, I will at most go for MC++ or C++/CLR.

Best regards,
Paul.

> Not to make this a C# and Geotrans list, but it might be a little less
> work to just implement "Platform Invoke" functions for those functions and
> data types defined in engine.h.  Then your code just loads the
> geotrans2.dll and calls its functions as if they were native to C# (more
> or less).  You have to figure out a few things like calling convention
> (cdecl vs. stdcall) and how to send fixed length string buffers (hint:
> StringBuilder).  Most pointers to simple types can be handled with "ref"
> or "out" modifiers and pointers to opaque types are handled with the
> "IntPtr" type (C#'s answer to void pointers).
>
> To bring it back to PROJ.4, you can refer to my C# wrapper for some idea
> how to define external functions.  See
> http://ftp.dfg.ca.gov/outgoing/nafwb/proj4/csharp/
> Unlike proj.4, you probably won't need any "unsafe" pointer code
> constructs for geotrans.
>
> Luck,
>
>>>> paul at toolscenter.org 12/19/2005 3:23:33 PM >>>
> Sorry, the C# codes were part of a work I did for my former company.
> Off course, I can always do it if there is a need. But the process is
> simple
> and should take you less than 3 days.
>
> Each Geotrans *.h/*.c pair file is an indepedendent projection, so can be
> compiled individually with the exception of the (T)Mercator.
> Here are the steps: C ---> C++ ---> C#
> 1. Change the *.c file extension to C++, and add a C++ class
> 2. The *.c contains static/globals fields, move all as members of the
> class
> 3. For quick C# conversion, try to maintain all the codes in the *.h file.
> 4. Make functions defined in the *.h/*.c files methods of the class.
> 5. For the C#, make the #defines "const" or "readonly" members
> 6. Use the Math.* for the maths functions
> 7. Use exceptions for the error codes. Each *.c contains the actual
>    message of the error codes in its comments, so simply copy these as
>      throw new YourException("message");
>    and return "void" - may be subject to your design.
> 8. Change the comments to the C# style and add the test sample as part of
>    the comment for quick copy and paste testing codes and if you have the
> time
>    and need, change these for NUnit tests. Some of the codes do not give
> the
>    expected results in the documentations though.
>
> I should have the intermediate/C++ codes somewhere in my PC, since I did
> this at home, I could look for it if you need this one.
>
> Best regards,
> Paul.
>
>
> ________________________________
>
>         From: proj-bounces at lists.maptools.org
> [mailto:proj-bounces at lists.maptools.org] On Behalf Of Friend, Darris E
>         Sent: Tuesday, December 20, 2005 6:36 AM
>         To: proj at lists.maptools.org
>         Subject: [Proj] OT: Geotrans's Neys Projection - Modified Lambert
> ConformalConic
>
>         Paul,
>
>         Would you be willing to share the C# code you converted?
>         Thanks
>
>         D. F.
>         GIS Technician
>         Gainesville Regional Utilities
>
>         > Hello,
>         > Thanks for the the information. I have now found the document.
> It
> is
>         > located in the users package. I was only using the developers
> package.
>
>         > By the way, I have nothing against GeoTrans. It is more suitable
> for
>         > a work I am doing now in .NET Framework. I easily ported it to
> C++
>         > and then moved it to C# without any problem.
>
>         > Best regard,
>         > Paul.
>
>
>
>
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>




From ovv at hetnet.nl  Mon Dec 19 21:39:24 2005
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Tue, 20 Dec 2005 06:39:24 +0100
Subject: [Proj] website cartographic executables---Inv_Fwd
In-Reply-To: <200512191444.37172.gerald.evenden@verizon.net>
Message-ID: <BFCD579C.6299%ovv@hetnet.nl>

> From: "Gerald I. Evenden" <gerald.evenden-verizon.net>

> Just an added note here: check the NGS site for full precision online
> geodesic computations:
> http://www.ngs.noaa.gov/TOOLS/Inv_Fwd/Inv_Fwd.html

Highly recommendable!
I use it since version 1. Here & there are still version 1 implementations
alive, but I strongly recommend to update to the latest version. Better
accuracy, especially around antipodal point.
One pitfall silly ol' me fell into, long ago: I thought the 3d version gave
the true arc length going from height 1 in point 1 to height 2 in point 2.
But the functions only work with ellipsoidal distances as if the heights
were zero!
The accuracy is according to Vincenty only 0.01 mm for meridional arcs, not
full machine precision.



From gerald.evenden at verizon.net  Tue Dec 20 10:20:17 2005
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Tue, 20 Dec 2005 13:20:17 -0500
Subject: [Proj] website cartographic executables---Inv_Fwd
In-Reply-To: <BFCD579C.6299%ovv@hetnet.nl>
References: <BFCD579C.6299%ovv@hetnet.nl>
Message-ID: <200512201320.17467.gerald.evenden@verizon.net>

On Tuesday 20 December 2005 12:39 am, Oscar van Vlijmen wrote:
> > From: "Gerald I. Evenden" <gerald.evenden-verizon.net>
> >
> > Just an added note here: check the NGS site for full precision online
> > geodesic computations:
> > http://www.ngs.noaa.gov/TOOLS/Inv_Fwd/Inv_Fwd.html
>
> Highly recommendable!
> I use it since version 1. Here & there are still version 1 implementations
> alive, but I strongly recommend to update to the latest version. Better
> accuracy, especially around antipodal point.
> One pitfall silly ol' me fell into, long ago: I thought the 3d version gave
> the true arc length going from height 1 in point 1 to height 2 in point 2.
> But the functions only work with ellipsoidal distances as if the heights
> were zero!
I do not follow.  But, I have never used the 3D version nor really thought
about it.
> The accuracy is according to Vincenty only 0.01 mm for meridional arcs, not
> full machine precision.

What bothers me is I cannot conceptualize the 3D version.  What does the
geodesic look like as it changes elevation?  Is it going up or down a "slope"
as one travels along the geodesic?  When I think about changing elevations
I can't help of thinking as the problem as line-of-sight.  That is, when I
look at Mt. Everest from a plain 30 miles away I feel the problem is a
matter of a simple xzy hypotenuse problem.

The near antipod problem is nasty.  The antipod must yield twice the equator-
pole distance with the azimuths 90.  The geodesic has many enigmatic 
properties.

One thing I need to look into in more detail is the NS inverse geodesic
computation.  The loop in my older version only iterates once, thus
computations are quite simple---much more simple than the traditional
series evaluation used for meridian distance.  I compared the values
with my near machine precision meridianal procedure and got results
comparible to microns.

-- 
Jerry and the low riders:Daisy May and Joshua
"The being cannot be termed rational or virtuous,
who obeys any authority, but that of reason."
---Mary Wollstonecraft 1792


From ovv at hetnet.nl  Tue Dec 20 12:06:54 2005
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Tue, 20 Dec 2005 21:06:54 +0100
Subject: [Proj] website cartographic executables---Inv_Fwd
In-Reply-To: <200512201320.17467.gerald.evenden@verizon.net>
Message-ID: <BFCE22EE.62A6%ovv@hetnet.nl>

> From: "Gerald I. Evenden" <gerald.evenden-verizon.net>

>>> geodesic computations:
>>> http://www.ngs.noaa.gov/TOOLS/Inv_Fwd/Inv_Fwd.html

> What bothers me is I cannot conceptualize the 3D version.  What does the
> geodesic look like as it changes elevation?
Now don't let it keep you awake, since invers3d.for doesn't compute it
anyway. It would have been nice though to get a geodesic-like arc along an
ellipsoid that inflates or deflates while going from a point at height 1 to
another at height 2. I cannot imagine how I could fly such a route reliably
and it's a bit difficult to find a terrain that follows such a height
development, but dreaming doesn't hurt, innit?

> I can't help of thinking as the problem as line-of-sight.  That is, when I
> look at Mt. Everest from a plain 30 miles away I feel the problem is a
> matter of a simple xzy hypotenuse problem.
invers3d.for does compute that. It does chord distances, zenith distances,
north-east-up differences, that sort of things. And of course the distance
along the geodesic with height difference zero.




From martin.vermeer at hut.fi  Tue Dec 20 12:39:29 2005
From: martin.vermeer at hut.fi (Martin Vermeer)
Date: Tue, 20 Dec 2005 22:39:29 +0200
Subject: [Proj] website cartographic executables---Inv_Fwd
In-Reply-To: <BFCE22EE.62A6%ovv@hetnet.nl>
References: <200512201320.17467.gerald.evenden@verizon.net>
	<BFCE22EE.62A6%ovv@hetnet.nl>
Message-ID: <20051220203929.GC8609@geo9.hut.fi>

On Tue, Dec 20, 2005 at 09:06:54PM +0100, Oscar van Vlijmen wrote:
> > From: "Gerald I. Evenden" <gerald.evenden-verizon.net>
> 
> >>> geodesic computations:
> >>> http://www.ngs.noaa.gov/TOOLS/Inv_Fwd/Inv_Fwd.html
> 
> > What bothers me is I cannot conceptualize the 3D version.  What does the
> > geodesic look like as it changes elevation?
> Now don't let it keep you awake, since invers3d.for doesn't compute it
> anyway. It would have been nice though to get a geodesic-like arc along an
> ellipsoid that inflates or deflates while going from a point at height 1 to
> another at height 2. I cannot imagine how I could fly such a route reliably
> and it's a bit difficult to find a terrain that follows such a height
> development, but dreaming doesn't hurt, innit?

I think it is meaningless. The geodesic is defined as the shortest path
_within_ the two-dimensional curved space of the ellipsoidal (or more
general) surface. If you go outside that space, it's not the geodesic
anymore.
 
> > I can't help of thinking as the problem as line-of-sight.  That is, when I
> > look at Mt. Everest from a plain 30 miles away I feel the problem is a
> > matter of a simple xzy hypotenuse problem.
> invers3d.for does compute that. It does chord distances, zenith distances,
> north-east-up differences, that sort of things. And of course the distance
> along the geodesic with height difference zero.

Yes... those are geodesics on three-dimensional (non-curved) space, AKA
straight lines ;-)

- Martin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20051220/4620af74/attachment.sig>

From chris at narx.net  Wed Dec 21 06:32:59 2005
From: chris at narx.net (Chris Tweedie)
Date: Wed, 21 Dec 2005 22:32:59 +0800
Subject: [Proj] Altering the +south paramter using UTM
Message-ID: <20051221143213.763937602F0@vscan01.westnet.com.au>

Hi Frank/Others .

 

Hopefully this is a quick question but I am in the process of trying to
formulate the right parameters to transform data held in a modified UTM Zone
50 projection (epsg 28350) to GDA94 (epsg4283)

 

The only modification is to the false northing, so instead of 10,000,000
which I assume is the default value for +south, this data is stored with
16,000,000. I have been trying the following but no matter what I try I
don't seem to be able to modify the default value using +south= or +y_0=. Is
there a dependency to specify any other parameters with it?

 

Eg.

cs2cs +proj=utm +zone=50 +y_0=16000000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0
+units=m +to +proj=longlat +ellps=GRS80

 

Does not work, simply ignores the false northing.

 

Thanks in advance for any advice

 

Regards,

 

Chris Tweedie

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20051221/06449fc9/attachment.html>

From gerald.evenden at verizon.net  Wed Dec 21 19:13:11 2005
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Wed, 21 Dec 2005 22:13:11 -0500
Subject: [Proj] Altering the +south paramter using UTM
In-Reply-To: <20051221143213.763937602F0@vscan01.westnet.com.au>
References: <20051221143213.763937602F0@vscan01.westnet.com.au>
Message-ID: <200512212213.11376.gerald.evenden@verizon.net>

On Wednesday 21 December 2005 09:32 am, Chris Tweedie wrote:
> Hi Frank/Others .
>
>
>
> Hopefully this is a quick question but I am in the process of trying to
> formulate the right parameters to transform data held in a modified UTM
> Zone 50 projection (epsg 28350) to GDA94 (epsg4283)
>
>
>
> The only modification is to the false northing, so instead of 10,000,000
> which I assume is the default value for +south, this data is stored with
> 16,000,000. I have been trying the following but no matter what I try I
> don't seem to be able to modify the default value using +south= or +y_0=.
> Is there a dependency to specify any other parameters with it?
>
>
>
> Eg.
>
> cs2cs +proj=utm +zone=50 +y_0=16000000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0
> +units=m +to +proj=longlat +ellps=GRS80

+y_0 is not allowed in UTM.  For southern hemisphere specify +south.
Sorry, but UTM has a strict meaning in proj.  Proj tries very hard to prevent
missuse of the definition.

If you MUST use 16,000,000 then you MUST use +proj=tmerc.

	...
> Chris Tweedie

-- 
Jerry and the low riders:Daisy May and Joshua
"The being cannot be termed rational or virtuous,
who obeys any authority, but that of reason."
---Mary Wollstonecraft 1792


From warmerdam at pobox.com  Wed Dec 21 19:13:18 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 21 Dec 2005 22:13:18 -0500
Subject: [Proj] Altering the +south paramter using UTM
In-Reply-To: <20051221143213.763937602F0@vscan01.westnet.com.au>
References: <20051221143213.763937602F0@vscan01.westnet.com.au>
Message-ID: <931f8ea90512211913p387a184bk45d31c7c866bb2b7@mail.gmail.com>

On 12/21/05, Chris Tweedie <chris at narx.net> wrote:
> Hopefully this is a quick question but I am in the process of trying to
> formulate the right parameters to transform data held in a modified UTM Zone
> 50 projection (epsg 28350) to GDA94 (epsg4283)
>
> The only modification is to the false northing, so instead of 10,000,000
> which I assume is the default value for +south, this data is stored with
> 16,000,000. I have been trying the following but no matter what I try I
> don't seem to be able to modify the default value using +south= or +y_0=. Is
> there a dependency to specify any other parameters with it?
>
> cs2cs +proj=utm +zone=50 +y_0=16000000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0
> +units=m +to +proj=longlat +ellps=GRS80

Chris,

It isn't utm anymore if you change the false northing.  Just
do it as transverse mercator.

+proj=tmerc +lat_0=0 +lon_0=117 +k=0.9996 +x_0=500000 +y_0=1600000
       +ellps=GRS80 +towgs84=0,0,0

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From mfinn at usgs.gov  Wed Dec 21 20:02:37 2005
From: mfinn at usgs.gov (Michael P Finn)
Date: Wed, 21 Dec 2005 22:02:37 -0600
Subject: [Proj] Michael P Finn of the USGS/ National Geospatial Technical
 Operations Center is out of the office.
Message-ID: <OFB0C643F6.912DDFC6-ON862570DF.0016367C-862570DF.0016367D@usgs.gov>


I will be out of the office starting  12/21/2005 and will not return until
01/03/2006.

I will be unable to check e-mail regularly while I am out. If I can't
respond to your message while I am out, then I will when I return. If you
have anything that cannot wait, please contact my colleague, Mr. Michael
Williams, at mswilliams at usgs.gov. Happy Holidays.     Mike



From pbander at picusnet.com  Wed Dec 28 11:29:28 2005
From: pbander at picusnet.com (Paul B. Anderson)
Date: Wed, 28 Dec 2005 14:29:28 -0500
Subject: [Proj] Book: Web Mapping Illustrated
References: <OFB0C643F6.912DDFC6-ON862570DF.0016367C-862570DF.0016367D@usgs.gov>
Message-ID: <000501c60be5$0709fff0$20fbec48@ISUCONNECT>

- Hi All,

I am currently exploring low cost options that allows for the creation of a 
web map of Grayson County, Virginia showing cemetery locations (Genealogy 
Stuff).  See http://www.ls.net/~newriver/graysoncem/graysoncem.htm
Note:  There is a picture of me in one section.

The web map has to be either no or low cost since the county only has 17,000 
people and not all of them are tax payers. Most of the cemeteries are out in 
the middle of someone's  pasture -- no street address. Many of the current 
web mapping apps are crippled either visually or in how you can manipulate 
them.

With those thoughts in mind, the book at the link below talks about, and 
uses, Proj.4: http://www.oreilly.com/catalog/webmapping/

Has anyone on the list worked with the book, and can comment on it?

- Paul B. Anderson FCCS (USN, Retired)
Kingsport, TN native living in Norfolk, VA

My PDF Map Projection Graphics:
http://www.ilstu.edu/microcam/map_projections/index.html





From tim.loesch at dnr.state.mn.us  Thu Dec 29 09:04:35 2005
From: tim.loesch at dnr.state.mn.us (Tim Loesch)
Date: Thu, 29 Dec 2005 11:04:35 -0600
Subject: [Proj] Re: Proj Digest, Vol 19,
	Issue 21 (NOTICE - Out of the office)
Message-ID: <s3b3c2eb.097@co5.dnr.state.mn.us>

I'm out of the office and will return Tuesday January 2nd. If this is a GIS technical related issue contact Chris Pouliot or Mike Tronrud.





From tylermitchell at shaw.ca  Thu Dec 29 09:48:59 2005
From: tylermitchell at shaw.ca (Tyler Mitchell)
Date: Thu, 29 Dec 2005 09:48:59 -0800
Subject: [Proj] Book: Web Mapping Illustrated
Message-ID: <200512290949.00044.tylermitchell@shaw.ca>


Paul Anderson wrote:
> I am currently exploring low cost options that allows for the creation of a 
> web map of Grayson County, Virginia showing cemetery locations (Genealogy 
> Stuff).  See http://www.ls.net/~newriver/graysoncem/graysoncem.htm
> Note:  There is a picture of me in one section.
> 
> The web map has to be either no or low cost since the county only has 17,000 
> people and not all of them are tax payers. Most of the cemeteries are out in 
> the middle of someone's  pasture -- no street address. Many of the current 
> web mapping apps are crippled either visually or in how you can manipulate 
> them.
> 
> With those thoughts in mind, the book at the link below talks about, and 
> uses, Proj.4: http://www.oreilly.com/catalog/webmapping/
> 
> Has anyone on the list worked with the book, and can comment on it?

Hi Paul,
Sounds like you've got your work cut out for you, but I think you'll find the 
tools are all ripe for the picking.  I can certainly comment on my book for 
you :)  Is there something in particular you want to know more about?

Tyler

------
Tyler Mitchell
Author, Web Mapping Illustrated
http://oreillynet.com/pub/au/1898


From archer at eskimo.com  Thu Dec 29 12:40:49 2005
From: archer at eskimo.com (Curt Mills)
Date: Thu, 29 Dec 2005 12:40:49 -0800 (PST)
Subject: [Proj] Book: Web Mapping Illustrated
In-Reply-To: <000501c60be5$0709fff0$20fbec48@ISUCONNECT>
References: <OFB0C643F6.912DDFC6-ON862570DF.0016367C-862570DF.0016367D@usgs.gov>
	<000501c60be5$0709fff0$20fbec48@ISUCONNECT>
Message-ID: <Pine.LNX.4.58.0512291237160.12247@wapiti.we7u.net>

On Wed, 28 Dec 2005, Paul B. Anderson wrote:

> I am currently exploring low cost options that allows for the creation of a
> web map of Grayson County, Virginia showing cemetery locations (Genealogy
> Stuff).  See http://www.ls.net/~newriver/graysoncem/graysoncem.htm
> Note:  There is a picture of me in one section.
> 
> The web map has to be either no or low cost since the county only has 17,000
> people and not all of them are tax payers. Most of the cemeteries are out in
> the middle of someone's  pasture -- no street address. Many of the current web
> mapping apps are crippled either visually or in how you can manipulate them.

One thing you might consider is some of the amateur radio APRS
applications.  I work on a couple of them, but those two aren't
suited particularly to what you're trying to do.  Others I think
probably are.  APRS is the system whereby we track moving objects
via GPS and amateur radio, but we also have the capability of
tracking resources that are more stationary.  The main thing here
is, there's software out there that does web mapping, places objects
on top of the maps, and allows you to zoom in/out and pan to various
spots.  Some of these use online map resources to do it.

Thinking about it a bit more, some of the online web map resources
that already exist have the capability of placing objects
themselves.  You may be able to do what you want without writing any
code, or perhaps with very minimal scripts to pass to their mapping
engine.

-- 
Curt, WE7U.				archer at eskimo dot com
http://www.eskimo.com/~archer
  Lotto:  A tax on people who are bad at math. - unknown
Windows:  Microsoft's tax on computer illiterates. - WE7U.
The world DOES revolve around me:  I picked the coordinate system!"


From gerald.evenden at verizon.net  Sat Dec 31 14:04:55 2005
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Sat, 31 Dec 2005 17:04:55 -0500
Subject: [Proj] Old problems
Message-ID: <200512311704.56111.gerald.evenden@verizon.net>

I was looking into downloading and installing GRASS as I do not have a current 
general purpose map making graphic on my system.  The main problem I ran into 
is that GRASS still uses the out of date PROJ.4 software.  I suppose I will 
have to download the stuff from remotesensing but I will be out of luck using 
about half the projections currently in libproj4.

While reading http://www.remotesensing.org/proj/ I ran across the line:

"Gerald Evenden's PROJ.4 site: includes some updates and documentation for his 
slimmed down libproj."

What I object to ;-) is the "slimmed down" part.  All that I can recall that I 
removed in the new system was the Cheby approximations (which I don't think 
anyone here  uses) and the referencing of external files for added + option 
information.  The "+no_opt" has been ignored for years in libproj4.  
"Simplification" seems a better word.  Unless the addition of datum 
transformations redefined PROJ.4---again, back to old "issues."

The issue is probably hopeless but it would be nice to unify libproj4 with 
PROJ.4.
-- 
Jerry and the low riders:Daisy May and Joshua
"The being cannot be termed rational or virtuous,
who obeys any authority, but that of reason."
---Mary Wollstonecraft 1792


From paul-grass at stjohnspoint.co.uk  Sat Dec 31 14:29:14 2005
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Sat, 31 Dec 2005 22:29:14 +0000
Subject: [Proj] Old problems
In-Reply-To: <200512311704.56111.gerald.evenden@verizon.net>
References: <200512311704.56111.gerald.evenden@verizon.net>
Message-ID: <43B7063A.4040400@stjohnspoint.co.uk>

Hello Gerald
There is some documentation on the discrepancies between PROJ.4 and 
libproj4 and the versions used in GRASS on Thierry Laronde's KerGIS site at:
http://www.kergis.org/doc/proj.html

I provided a lot of the information and assumptions contained in the 
description there so I'd be interested to hear if you agree or disagree 
with it.

KerGIS is kind of a spin-off GIS from GRASS, based on the last public 
domain version of the source code before it was licenced under the GNU GPL.

Best regards,

Paul


From gerald.evenden at verizon.net  Sat Dec 31 16:55:04 2005
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Sat, 31 Dec 2005 19:55:04 -0500
Subject: [Proj] Old problems
In-Reply-To: <43B7063A.4040400@stjohnspoint.co.uk>
References: <200512311704.56111.gerald.evenden@verizon.net>
	<43B7063A.4040400@stjohnspoint.co.uk>
Message-ID: <200512311955.04704.gerald.evenden@verizon.net>

On Saturday 31 December 2005 05:29 pm, Paul Kelly wrote:
> Hello Gerald
> There is some documentation on the discrepancies between PROJ.4 and
> libproj4 and the versions used in GRASS on Thierry Laronde's KerGIS site
> at: http://www.kergis.org/doc/proj.html

Indeed, you bring up the "issues" debated to some length many months ago.

My position, as then, is that the operation of projections is separate from 
the activity of datum changes.  For those whose data is in their desired 
datum (if they even know about it) and those working with small scale mapping 
are not concerned with datums.  In addition, the concepts and math 
underlaying the two issues do not intersect.

I think everyone came same conclusion but some effort had gone into the 
merging of the two processes in the remotesensing version and nobody had the 
time nor inclination to undo the merging.  Alas, we are still in the same 
situation today.

BTW: yes, "small is beautiful."  I spent several years working on a system 
where there were extra charges if your program exceeded 100k. (Seems 
unbelievable)  It was considered cheaper if I spent extra time becoming a 
whiz with JCL, tight FORTRAN coding and hours dreaming up ways to shoehorn a 
big computational effort into 100k.

> I provided a lot of the information and assumptions contained in the
> description there so I'd be interested to hear if you agree or disagree
> with it.

I think we are on the same page.

> KerGIS is kind of a spin-off GIS from GRASS, based on the last public
> domain version of the source code before it was licenced under the GNU GPL.
>
> Best regards,
>
> Paul

What I would really like to see is PROJ.4 and libproj4 merged into one 
distribution.  I would also like to see a libdatum.
-- 
Jerry and the low riders:Daisy May and Joshua
"The being cannot be termed rational or virtuous,
who obeys any authority, but that of reason."
---Mary Wollstonecraft 1792


