From daniel at ssh4.me  Wed Feb  2 06:07:54 2022
From: daniel at ssh4.me (Daniel Fischer)
Date: Wed, 2 Feb 2022 14:07:54 +0000 (UTC)
Subject: [PROJ] Proj 4 Strings in newer Proj Versions
Message-ID: <1aed271d-c4ab-448c-aa59-29f61702461a@ssh4.me>

Hello,

in our old system we had to customize one EPSG to fit our needs. Since we are upgrading to latest versions, it seems that the epsg file located in Proj_Lib isnt take effects anymore.
Could some tell me please, how to apply my epsg adjustments to that proj.db?
Also i do not really understand this all, as i'm just a admin and got old documentation hand over...
My Goal is to Update the +towgs84.... string when i query 'projinfo EPSG:31467'

Thank you.
Best Regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220202/f3360af4/attachment.html>

From sriddell at geocue.com  Mon Feb  7 05:49:21 2022
From: sriddell at geocue.com (Steve Riddell)
Date: Mon, 7 Feb 2022 13:49:21 +0000
Subject: [PROJ] Plate motion models
Message-ID: <BN6PR01MB24048FAE3B7A49E05C88CE2EA62C9@BN6PR01MB2404.prod.exchangelabs.com>

The data for the ITFR2008 & ITRF2014 plate motion models are delivered with PROJ as init files. From the documentation, 8.7, I think I see how an +init proj string can be used for changing epochs between ITFR frames (e.g. ITRF2000 to ITRF2005), but can someone please give an example of using the plate models? For example, if I have a point in ITRF2000 epoch 2022.1 and I want to use the NOAM plate model to move it to 2010.0, what would be the +init string? I'm assuming cct would be an appropriate application for processing this string?
Thanks for any assistance!
Steve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220207/d0d63deb/attachment.html>

From kreve at sdfe.dk  Mon Feb  7 06:42:59 2022
From: kreve at sdfe.dk (Kristian Evers)
Date: Mon, 7 Feb 2022 14:42:59 +0000
Subject: [PROJ] Plate motion models
In-Reply-To: <BN6PR01MB24048FAE3B7A49E05C88CE2EA62C9@BN6PR01MB2404.prod.exchangelabs.com>
References: <BN6PR01MB24048FAE3B7A49E05C88CE2EA62C9@BN6PR01MB2404.prod.exchangelabs.com>
Message-ID: <58caa31585644f098b5c08065caca94b@sdfe.dk>

Steve,

This is the original commit message [0] from when the plate motion models were introduced:

Parameters for the plate motion models (PMM) for ITRF2008 and ITRF2014
are added to the ITRF2008/2014 init-files. The PMMs allow coordinates
to be moved back and forward in time in plate fixed reference frames
such as GR96 in Greenland which is defined as ITRF94 at 1996.623.
Transforming an ITRF2014-coordinate to GR96 is done with:

+proj=pipeline +step +init=ITRF2014:NOAM   +t_epoch=1996.623 +t_obs=2017.584
               +step +init=ITRF2014:ITRF94 +t_obs=1996.623

where the first step transforms the coordinate back in time to
ITRF2014 at 1996.632 by using the ITRF2014 PMM. The second step transforms
the ITRF2014 coordinate to ITRF94.

And here's a concrete example using cct:

echo 3496746.5664 743256.4272 5264477.0556 2014.0 | cct +init=ITRF2014:EURA +t_epoch=2022.0

My memory fails me regarding how to set +t_epoch and the coordinate epoch but if you play around with them you should quickly be able to figure out how to set them. Check to see if your output coordinate moves in the direction you expect.

/Kristian

[0] https://github.com/OSGeo/PROJ/commit/403f930355926aced5caba5bfbcc230ad152cf86

From: PROJ <proj-bounces at lists.osgeo.org> On Behalf Of Steve Riddell
Sent: 7. februar 2022 14:49
To: proj at lists.osgeo.org
Subject: [PROJ] Plate motion models

The data for the ITFR2008 & ITRF2014 plate motion models are delivered with PROJ as init files. From the documentation, 8.7, I think I see how an +init proj string can be used for changing epochs between ITFR frames (e.g. ITRF2000 to ITRF2005), but can someone please give an example of using the plate models? For example, if I have a point in ITRF2000 epoch 2022.1 and I want to use the NOAM plate model to move it to 2010.0, what would be the +init string? I'm assuming cct would be an appropriate application for processing this string?
Thanks for any assistance!
Steve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220207/c736d6a8/attachment.html>

From sriddell at geocue.com  Mon Feb  7 06:54:22 2022
From: sriddell at geocue.com (Steve Riddell)
Date: Mon, 7 Feb 2022 14:54:22 +0000
Subject: [PROJ] Plate motion models
In-Reply-To: <58caa31585644f098b5c08065caca94b@sdfe.dk>
References: <BN6PR01MB24048FAE3B7A49E05C88CE2EA62C9@BN6PR01MB2404.prod.exchangelabs.com>
 <58caa31585644f098b5c08065caca94b@sdfe.dk>
Message-ID: <BN6PR01MB2404955835C883E812C59AE7A62C9@BN6PR01MB2404.prod.exchangelabs.com>

Thanks, Kristian. And the user application is responsible for deciding which plate is to be used, right? That is, there is currently no code in PROJ to identify the plate model for a particular point, right?
Best,
steve

From: Kristian Evers <kreve at sdfe.dk>
Sent: Monday, February 7, 2022 8:43 AM
To: Steve Riddell <sriddell at geocue.com>; proj at lists.osgeo.org
Subject: RE: Plate motion models

Steve,

This is the original commit message [0] from when the plate motion models were introduced:

Parameters for the plate motion models (PMM) for ITRF2008 and ITRF2014
are added to the ITRF2008/2014 init-files. The PMMs allow coordinates
to be moved back and forward in time in plate fixed reference frames
such as GR96 in Greenland which is defined as ITRF94 at 1996.623<mailto:ITRF94 at 1996.623>.
Transforming an ITRF2014-coordinate to GR96 is done with:

+proj=pipeline +step +init=ITRF2014:NOAM   +t_epoch=1996.623 +t_obs=2017.584
               +step +init=ITRF2014:ITRF94 +t_obs=1996.623

where the first step transforms the coordinate back in time to
ITRF2014 at 1996.632<mailto:ITRF2014 at 1996.632> by using the ITRF2014 PMM. The second step transforms
the ITRF2014 coordinate to ITRF94.

And here's a concrete example using cct:

echo 3496746.5664 743256.4272 5264477.0556 2014.0 | cct +init=ITRF2014:EURA +t_epoch=2022.0

My memory fails me regarding how to set +t_epoch and the coordinate epoch but if you play around with them you should quickly be able to figure out how to set them. Check to see if your output coordinate moves in the direction you expect.

/Kristian

[0] https://github.com/OSGeo/PROJ/commit/403f930355926aced5caba5bfbcc230ad152cf86

From: PROJ <proj-bounces at lists.osgeo.org<mailto:proj-bounces at lists.osgeo.org>> On Behalf Of Steve Riddell
Sent: 7. februar 2022 14:49
To: proj at lists.osgeo.org<mailto:proj at lists.osgeo.org>
Subject: [PROJ] Plate motion models

The data for the ITFR2008 & ITRF2014 plate motion models are delivered with PROJ as init files. From the documentation, 8.7, I think I see how an +init proj string can be used for changing epochs between ITFR frames (e.g. ITRF2000 to ITRF2005), but can someone please give an example of using the plate models? For example, if I have a point in ITRF2000 epoch 2022.1 and I want to use the NOAM plate model to move it to 2010.0, what would be the +init string? I'm assuming cct would be an appropriate application for processing this string?
Thanks for any assistance!
Steve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220207/7e544cfe/attachment-0001.html>

From kreve at sdfe.dk  Mon Feb  7 07:07:59 2022
From: kreve at sdfe.dk (Kristian Evers)
Date: Mon, 7 Feb 2022 15:07:59 +0000
Subject: [PROJ] Plate motion models
In-Reply-To: <BN6PR01MB2404955835C883E812C59AE7A62C9@BN6PR01MB2404.prod.exchangelabs.com>
References: <BN6PR01MB24048FAE3B7A49E05C88CE2EA62C9@BN6PR01MB2404.prod.exchangelabs.com>
 <58caa31585644f098b5c08065caca94b@sdfe.dk>
 <BN6PR01MB2404955835C883E812C59AE7A62C9@BN6PR01MB2404.prod.exchangelabs.com>
Message-ID: <8807f543b6a94535827f2292ff30fbdb@sdfe.dk>

Correct

/Kristian

From: Steve Riddell <sriddell at geocue.com>
Sent: 7. februar 2022 15:54
To: Kristian Evers <kreve at sdfe.dk>; proj at lists.osgeo.org
Subject: RE: Plate motion models

Thanks, Kristian. And the user application is responsible for deciding which plate is to be used, right? That is, there is currently no code in PROJ to identify the plate model for a particular point, right?
Best,
steve

From: Kristian Evers <kreve at sdfe.dk<mailto:kreve at sdfe.dk>>
Sent: Monday, February 7, 2022 8:43 AM
To: Steve Riddell <sriddell at geocue.com<mailto:sriddell at geocue.com>>; proj at lists.osgeo.org<mailto:proj at lists.osgeo.org>
Subject: RE: Plate motion models

Steve,

This is the original commit message [0] from when the plate motion models were introduced:

Parameters for the plate motion models (PMM) for ITRF2008 and ITRF2014
are added to the ITRF2008/2014 init-files. The PMMs allow coordinates
to be moved back and forward in time in plate fixed reference frames
such as GR96 in Greenland which is defined as ITRF94 at 1996.623<mailto:ITRF94 at 1996.623>.
Transforming an ITRF2014-coordinate to GR96 is done with:

+proj=pipeline +step +init=ITRF2014:NOAM   +t_epoch=1996.623 +t_obs=2017.584
               +step +init=ITRF2014:ITRF94 +t_obs=1996.623

where the first step transforms the coordinate back in time to
ITRF2014 at 1996.632<mailto:ITRF2014 at 1996.632> by using the ITRF2014 PMM. The second step transforms
the ITRF2014 coordinate to ITRF94.

And here's a concrete example using cct:

echo 3496746.5664 743256.4272 5264477.0556 2014.0 | cct +init=ITRF2014:EURA +t_epoch=2022.0

My memory fails me regarding how to set +t_epoch and the coordinate epoch but if you play around with them you should quickly be able to figure out how to set them. Check to see if your output coordinate moves in the direction you expect.

/Kristian

[0] https://github.com/OSGeo/PROJ/commit/403f930355926aced5caba5bfbcc230ad152cf86

From: PROJ <proj-bounces at lists.osgeo.org<mailto:proj-bounces at lists.osgeo.org>> On Behalf Of Steve Riddell
Sent: 7. februar 2022 14:49
To: proj at lists.osgeo.org<mailto:proj at lists.osgeo.org>
Subject: [PROJ] Plate motion models

The data for the ITFR2008 & ITRF2014 plate motion models are delivered with PROJ as init files. From the documentation, 8.7, I think I see how an +init proj string can be used for changing epochs between ITFR frames (e.g. ITRF2000 to ITRF2005), but can someone please give an example of using the plate models? For example, if I have a point in ITRF2000 epoch 2022.1 and I want to use the NOAM plate model to move it to 2010.0, what would be the +init string? I'm assuming cct would be an appropriate application for processing this string?
Thanks for any assistance!
Steve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220207/64ed70c7/attachment.html>

From even.rouault at spatialys.com  Mon Feb  7 07:18:15 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 7 Feb 2022 16:18:15 +0100
Subject: [PROJ] Plate motion models
In-Reply-To: <BN6PR01MB24048FAE3B7A49E05C88CE2EA62C9@BN6PR01MB2404.prod.exchangelabs.com>
References: <BN6PR01MB24048FAE3B7A49E05C88CE2EA62C9@BN6PR01MB2404.prod.exchangelabs.com>
Message-ID: <ef91676f-4978-a995-48ea-954f64586e56@spatialys.com>

Hi Steve,

Assuming lon=-100 lat=40 z=0,? I believe (not sure! and in particular if 
that's geodetically meaningful to chain so many transformations) you 
should use a pipeline like the following one, which will do:

- conversion to cartesian coordinate space

- apply the ITRF2000 to ITRF2014 transformation preserving observation 
epoch of 2022.1

- apply the ITRF2014:NOAM model using a target epoch of 2010 (hence the 
+inv, as naturally the transformation would use +t_epoch as the 
"source") for a point at observation epoch of 2022.1

- force the observation epoch to 2010

- apply the ITRF2014 to ITRF2000 transformation (at epoch 2010)

- conversion to lat, lon coordinate space

echo -100 40 0 2022.1 | cct -d 8 +proj=pipeline \
 ??? +step +proj=cart +ellps+GRS80 \
 ??? +step +inv +init=ITRF2014:ITRF2000 \
 ? ? +step +inv +init=ITRF2014:NOAM +t_epoch=2010 \
 ??? +step +proj=set +v_4=2010 \
 ? ? +step +init=ITRF2014:ITRF2000 \
 ? ? +step +inv +proj=cart +ellps+GRS80

I get:

-99.99999790???? 40.00000064??? 0.00755196???? 2010.0000

If using ITRF2008 instead of ITRF2014, I get:

 ? -99.99999854???? 40.00000065??? 0.00909276???? 2010.0000


I've also tried using a plate-fixed CRS as an intermediate using what is 
available in EPSG

First with NAD83(CORS96) since there's a direct transformation for it in 
EPSG (not quite "direct" since when looking at the comments, it already 
results from concatenation of ITRF96>97 and IERS ITRF97>2000 
transformations)

(order is lat, lon here)

$ echo 40 -100 0 2022.1 | cs2cs -d 8 "ITRF2000" "NAD83(CORS96)" | cct -d 
8 +proj=set +v_4=2010 | cs2cs -d 8 "NAD83(CORS96)" "ITRF2000"
40.00000067?? ?-99.99999766 -0.00447640???? 2010.0000

Or if using NAD83(2011) (there's a transformation between NAD83(2011) 
and ITRF2008 in EPSG (concatenation of ITRF96>97 and IERS ITRF97>2008 
transformations), and PROJ will use the ITRF2008 to ITRF2000 
transformation in addition

$ echo 40 -100 0 2022.1 | cs2cs -d 8 "ITRF2000" "NAD83(2011)" | cct -d 8 
+proj=set +v_4=2010 | cs2cs -d 8 "NAD83(2011)"? "ITRF2000"
40.00000066??? -99.99999765 -0.00447668???? 2010.0000


So results are somewhat consistent, at least in the lat, lon space (not 
for z values)

Best regards,

Even


Le 07/02/2022 ? 14:49, Steve Riddell a ?crit?:
>
> The data for the ITFR2008 & ITRF2014 plate motion models are delivered 
> with PROJ as init files. From the documentation, 8.7, I think I see 
> how an +init proj string can be used for changing epochs between ITFR 
> frames (e.g. ITRF2000 to ITRF2005), but can someone please give an 
> example of using the plate models? For example, if I have a point in 
> ITRF2000 epoch 2022.1 and I want to use the NOAM plate model to move 
> it to 2010.0, what would be the +init string? I?m assuming cct would 
> be an appropriate application for processing this string?
>
> Thanks for any assistance!
>
> Steve
>
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220207/8a1bab81/attachment.html>

From even.rouault at spatialys.com  Mon Feb  7 07:53:55 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 7 Feb 2022 16:53:55 +0100
Subject: [PROJ] Plate motion models
In-Reply-To: <ef91676f-4978-a995-48ea-954f64586e56@spatialys.com>
References: <BN6PR01MB24048FAE3B7A49E05C88CE2EA62C9@BN6PR01MB2404.prod.exchangelabs.com>
 <ef91676f-4978-a995-48ea-954f64586e56@spatialys.com>
Message-ID: <9841b9b0-b27f-b400-3070-f835f54c91bd@spatialys.com>

Correcting typo (+ellps+GRS80 ==> +ellps=GRS80), but that doesn't change 
results as this is the default ellipsoid
>
> echo -100 40 0 2022.1 | cct -d 8 +proj=pipeline \
> ??? +step +proj=cart +ellps=GRS80 \
> ??? +step +inv +init=ITRF2014:ITRF2000 \
> ? ? +step +inv +init=ITRF2014:NOAM +t_epoch=2010 \
> ??? +step +proj=set +v_4=2010 \
> ? ? +step +init=ITRF2014:ITRF2000 \
> ? ? +step +inv +proj=cart +ellps=GRS80
>
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From Jochem.Lesparre at kadaster.nl  Tue Feb  8 04:57:53 2022
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Tue, 8 Feb 2022 12:57:53 +0000
Subject: [PROJ] Correcting metadata in GeoTIFF files
In-Reply-To: <8de2516d-de67-c5b0-d95d-771878375896@spatialys.com>
References: <AM0P192MB0482A6AD0F1ADD46EEA1312AEF5E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <6c8c18a6-cd5b-4e15-5a45-13f5955280b5@spatialys.com>
 <AM0P192MB0482B9BC65DA7923F3EDF72CEF5F9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <d68584f1-bffe-e091-4ddc-5ebd7dae8446@spatialys.com>
 <AM0P192MB0482F4D50704BFD65CF704EDEF209@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <f9195fca-8b9e-8c8d-4031-7d86ecaae2d2@spatialys.com>
 <AM0P192MB0482D3E9A8BE244DD1A569CDEF229@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <6c9d19ee-9556-1c53-9692-b465309e0140@spatialys.com>
 <AM0P192MB0482CC870191B6BD4F60CD58EF259@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <8de2516d-de67-c5b0-d95d-771878375896@spatialys.com>
Message-ID: <AM0P192MB0482A60A9409B9FF5C63D852EF2D9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Hi Even and Bas,

The PROJ <6 behaviour for +nadgrids and +geoidgrids in one PROJ4-style string was confusing: Without +nadgrids it required a slightly different geoid grid (e.g. the difference between the nlgeo2008/2018 and naptrans2008/2018 VDatum grids for the Netherlands). It became even more confusing by the ?fix? of the behaviour in PROJ >=6. However, this is only a problem for legacy users. For users of PROJ >=6 the behaviour for PROJ4-style strings is better: The same grid file can be used for +geoidgrids with or without +nadgrids. So, I think it is better to leave the behaviour like it is.

Since GeoTIFF grids are not supported in PROJ <6 and the naptrans2008/2018 grids of the Netherlands are only needed with the PROJ <6 behaviour, there is no need for naptrans2008.tif or naptrans2018.tif. Could I ask to remove nl_nsgi_naptrans2018.tif (and naptrans2018.tif, if present) from PROJ (and keep the .gtx versions, if present in PROJ)? Can I do this with the same pull request as replacing some other GeoTIFF grid files for the Netherlands to correct metadata?

I think it would be a good idea to change the way a interpolation CRS should be specified in a Geodetic TIFF Grid. The only mentioned example of this was naptrans2008 and this grid is no longer needed, so this change seems not very urgent if naptrans2008.tif and naptrans2018.tif grids are removed. However, we should at least edit the documentation so it no longer mentions naptrans2008 as example in: https://proj.org/specifications/geodetictiffgrids.html

Regards, Jochem


Disclaimer:
De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor de geadresseerde(n).
Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of verstrekking van deze informatie aan derden is niet toegestaan.
Op al onze producten en diensten zijn onze algemene leveringsvoorwaarden van toepassing
[https://www.kadaster.nl/algemene-leveringsvoorwaarden].

Disclaimer:
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed.
If you are not the intended recipient, you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.
Our general terms and conditions of delivery apply to all our products and services
[https://www.kadaster.com/general-terms-and-conditions].
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220208/60a2fa9a/attachment.html>

From even.rouault at spatialys.com  Tue Feb  8 06:05:17 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 8 Feb 2022 15:05:17 +0100
Subject: [PROJ] Correcting metadata in GeoTIFF files
In-Reply-To: <AM0P192MB0482A60A9409B9FF5C63D852EF2D9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
References: <AM0P192MB0482A6AD0F1ADD46EEA1312AEF5E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <6c8c18a6-cd5b-4e15-5a45-13f5955280b5@spatialys.com>
 <AM0P192MB0482B9BC65DA7923F3EDF72CEF5F9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <d68584f1-bffe-e091-4ddc-5ebd7dae8446@spatialys.com>
 <AM0P192MB0482F4D50704BFD65CF704EDEF209@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <f9195fca-8b9e-8c8d-4031-7d86ecaae2d2@spatialys.com>
 <AM0P192MB0482D3E9A8BE244DD1A569CDEF229@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <6c9d19ee-9556-1c53-9692-b465309e0140@spatialys.com>
 <AM0P192MB0482CC870191B6BD4F60CD58EF259@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <8de2516d-de67-c5b0-d95d-771878375896@spatialys.com>
 <AM0P192MB0482A60A9409B9FF5C63D852EF2D9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
Message-ID: <066d4f45-48e0-23e8-41ab-5927d8f274e2@spatialys.com>

Jochem,
>
> Since GeoTIFF grids are not supported in PROJ <6 and the 
> naptrans2008/2018 grids of the Netherlands are only needed with the 
> PROJ <6 behaviour, there is no need for naptrans2008.tif or 
> naptrans2018.tif. Could I ask to remove nl_nsgi_naptrans2018.tif (and 
> naptrans2018.tif, if present) from PROJ (and keep the .gtx versions, 
> if present in PROJ)?
>
Fine for me.
>
> Can I do this with the same pull request as replacing some other 
> GeoTIFF grid files for the Netherlands to correct metadata?
>
Sounds ok. See 
https://github.com/OSGeo/PROJ-data/blob/master/CONTRIBUTING.md#how-to-remove-a-file 
(the next version of PROJ-data will be 1.9)
>
> I think it would be a good idea to change the way a interpolation CRS 
> should be specified in a Geodetic TIFF Grid. The only mentioned 
> example of this was naptrans2008 and this grid is no longer needed, so 
> this change seems not very urgent if naptrans2008.tif and 
> naptrans2018.tif grids are removed. However, we should at least edit 
> the documentation so it no longer mentions naptrans2008 as example in: 
> https://proj.org/specifications/geodetictiffgrids.html
>
Perhaps just change the "is" to "was" in the sentence starting with "The 
only instance we have in mind is ..."

Even

> Regards, Jochem
>
>
>
> Disclaimer:
> De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor 
> de geadresseerde(n).
> Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of 
> verstrekking van deze informatie aan derden is niet toegestaan.
> Op al onze producten en diensten zijn onze algemene 
> leveringsvoorwaarden van toepassing
> [https://www.kadaster.nl/algemene-leveringsvoorwaarden].
>
> Disclaimer:
> This email and any files transmitted with it are confidential and 
> intended solely for the use of the individual or entity to whom they 
> are addressed.
> If you are not the intended recipient, you are notified that 
> disclosing, copying, distributing or taking any action in reliance on 
> the contents of this information is strictly prohibited.
> Our general terms and conditions of delivery apply to all our products 
> and services
> [https://www.kadaster.com/general-terms-and-conditions].

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220208/41dce62e/attachment.html>

From sriddell at geocue.com  Wed Feb  9 13:42:35 2022
From: sriddell at geocue.com (Steve Riddell)
Date: Wed, 9 Feb 2022 21:42:35 +0000
Subject: [PROJ] Plate motion models
In-Reply-To: <ef91676f-4978-a995-48ea-954f64586e56@spatialys.com>
References: <BN6PR01MB24048FAE3B7A49E05C88CE2EA62C9@BN6PR01MB2404.prod.exchangelabs.com>
 <ef91676f-4978-a995-48ea-954f64586e56@spatialys.com>
Message-ID: <BN6PR01MB240483182FF3001184581F5CA62E9@BN6PR01MB2404.prod.exchangelabs.com>

Thank you again for the assistance. That was a huge help. It works as expected, based on the delivered ITRF2008/ITRF2014 init files.

Perhaps it should be noted that the delivered models support only 3-rotation parameters. The paper, ?ITRF2008 plate motion model, Z. Altamimi, et al.?, and the HTDP documentation indicates that plates NOAM, PCFC, and CARB, include translation rates as well: (0.41,0.22,0.41)mm/yr.  The practical difference then is sub-centimeter, but noticeable when comparing with HTDP (over areas not covered by HTDP?s velocity grids).

Thanks again,
steve

From: Even Rouault <even.rouault at spatialys.com>
Sent: Monday, February 7, 2022 9:18 AM
To: Steve Riddell <sriddell at geocue.com>; proj at lists.osgeo.org
Subject: Re: [PROJ] Plate motion models


Hi Steve,

Assuming lon=-100 lat=40 z=0,  I believe (not sure! and in particular if that's geodetically meaningful to chain so many transformations) you should use a pipeline like the following one, which will do:

- conversion to cartesian coordinate space

- apply the ITRF2000 to ITRF2014 transformation preserving observation epoch of 2022.1

- apply the ITRF2014:NOAM model using a target epoch of 2010 (hence the +inv, as naturally the transformation would use +t_epoch as the "source") for a point at observation epoch of 2022.1

- force the observation epoch to 2010

- apply the ITRF2014 to ITRF2000 transformation (at epoch 2010)

- conversion to lat, lon coordinate space

echo -100 40 0 2022.1 | cct -d 8 +proj=pipeline \
    +step +proj=cart +ellps+GRS80 \
    +step +inv +init=ITRF2014:ITRF2000 \
    +step +inv +init=ITRF2014:NOAM +t_epoch=2010 \
    +step +proj=set +v_4=2010 \
    +step +init=ITRF2014:ITRF2000 \
    +step +inv +proj=cart +ellps+GRS80

I get:

-99.99999790     40.00000064    0.00755196     2010.0000

If using ITRF2008 instead of ITRF2014, I get:

  -99.99999854     40.00000065    0.00909276     2010.0000



I've also tried using a plate-fixed CRS as an intermediate using what is available in EPSG

First with NAD83(CORS96) since there's a direct transformation for it in EPSG (not quite "direct" since when looking at the comments, it already results from concatenation of ITRF96>97 and IERS ITRF97>2000 transformations)

(order is lat, lon here)
$ echo 40 -100 0 2022.1 | cs2cs -d 8 "ITRF2000" "NAD83(CORS96)" | cct -d 8 +proj=set +v_4=2010 | cs2cs -d 8 "NAD83(CORS96)"  "ITRF2000"
40.00000067    -99.99999766 -0.00447640     2010.0000

Or if using NAD83(2011) (there's a transformation between NAD83(2011) and ITRF2008 in EPSG (concatenation of ITRF96>97 and IERS ITRF97>2008 transformations), and PROJ will use the ITRF2008 to ITRF2000 transformation in addition
$ echo 40 -100 0 2022.1 | cs2cs -d 8 "ITRF2000" "NAD83(2011)" | cct -d 8 +proj=set +v_4=2010 | cs2cs -d 8 "NAD83(2011)"  "ITRF2000"
40.00000066    -99.99999765 -0.00447668     2010.0000

So results are somewhat consistent, at least in the lat, lon space (not for z values)

Best regards,

Even


Le 07/02/2022 ? 14:49, Steve Riddell a ?crit :
The data for the ITFR2008 & ITRF2014 plate motion models are delivered with PROJ as init files. From the documentation, 8.7, I think I see how an +init proj string can be used for changing epochs between ITFR frames (e.g. ITRF2000 to ITRF2005), but can someone please give an example of using the plate models? For example, if I have a point in ITRF2000 epoch 2022.1 and I want to use the NOAM plate model to move it to 2010.0, what would be the +init string? I?m assuming cct would be an appropriate application for processing this string?
Thanks for any assistance!
Steve



_______________________________________________

PROJ mailing list

PROJ at lists.osgeo.org<mailto:PROJ at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/proj

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220209/830623d1/attachment.html>

From sriddell at geocue.com  Fri Feb 11 13:27:26 2022
From: sriddell at geocue.com (Steve Riddell)
Date: Fri, 11 Feb 2022 21:27:26 +0000
Subject: [PROJ] Plate motion models
In-Reply-To: <BN6PR01MB240483182FF3001184581F5CA62E9@BN6PR01MB2404.prod.exchangelabs.com>
References: <BN6PR01MB24048FAE3B7A49E05C88CE2EA62C9@BN6PR01MB2404.prod.exchangelabs.com>
 <ef91676f-4978-a995-48ea-954f64586e56@spatialys.com>
 <BN6PR01MB240483182FF3001184581F5CA62E9@BN6PR01MB2404.prod.exchangelabs.com>
Message-ID: <BN6PR01MB2404271C231AD669885A454AA6309@BN6PR01MB2404.prod.exchangelabs.com>

It did not occur to me initially, but all I had to do was add +dx/dy/dz terms in the Helmert string for NOAM in the init file. It works perfectly.

From: Steve Riddell
Sent: Wednesday, February 9, 2022 3:43 PM
To: Even Rouault <even.rouault at spatialys.com>; proj at lists.osgeo.org
Cc: Kristian Evers <kreve at sdfe.dk>
Subject: RE: [PROJ] Plate motion models

Thank you again for the assistance. That was a huge help. It works as expected, based on the delivered ITRF2008/ITRF2014 init files.

Perhaps it should be noted that the delivered models support only 3-rotation parameters. The paper, ?ITRF2008 plate motion model, Z. Altamimi, et al.?, and the HTDP documentation indicates that plates NOAM, PCFC, and CARB, include translation rates as well: (0.41,0.22,0.41)mm/yr.  The practical difference then is sub-centimeter, but noticeable when comparing with HTDP (over areas not covered by HTDP?s velocity grids).

Thanks again,
steve

From: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
Sent: Monday, February 7, 2022 9:18 AM
To: Steve Riddell <sriddell at geocue.com<mailto:sriddell at geocue.com>>; proj at lists.osgeo.org<mailto:proj at lists.osgeo.org>
Subject: Re: [PROJ] Plate motion models


Hi Steve,

Assuming lon=-100 lat=40 z=0,  I believe (not sure! and in particular if that's geodetically meaningful to chain so many transformations) you should use a pipeline like the following one, which will do:

- conversion to cartesian coordinate space

- apply the ITRF2000 to ITRF2014 transformation preserving observation epoch of 2022.1

- apply the ITRF2014:NOAM model using a target epoch of 2010 (hence the +inv, as naturally the transformation would use +t_epoch as the "source") for a point at observation epoch of 2022.1

- force the observation epoch to 2010

- apply the ITRF2014 to ITRF2000 transformation (at epoch 2010)

- conversion to lat, lon coordinate space

echo -100 40 0 2022.1 | cct -d 8 +proj=pipeline \
    +step +proj=cart +ellps+GRS80 \
    +step +inv +init=ITRF2014:ITRF2000 \
    +step +inv +init=ITRF2014:NOAM +t_epoch=2010 \
    +step +proj=set +v_4=2010 \
    +step +init=ITRF2014:ITRF2000 \
    +step +inv +proj=cart +ellps+GRS80

I get:

-99.99999790     40.00000064    0.00755196     2010.0000

If using ITRF2008 instead of ITRF2014, I get:

  -99.99999854     40.00000065    0.00909276     2010.0000



I've also tried using a plate-fixed CRS as an intermediate using what is available in EPSG

First with NAD83(CORS96) since there's a direct transformation for it in EPSG (not quite "direct" since when looking at the comments, it already results from concatenation of ITRF96>97 and IERS ITRF97>2000 transformations)

(order is lat, lon here)
$ echo 40 -100 0 2022.1 | cs2cs -d 8 "ITRF2000" "NAD83(CORS96)" | cct -d 8 +proj=set +v_4=2010 | cs2cs -d 8 "NAD83(CORS96)"  "ITRF2000"
40.00000067    -99.99999766 -0.00447640     2010.0000

Or if using NAD83(2011) (there's a transformation between NAD83(2011) and ITRF2008 in EPSG (concatenation of ITRF96>97 and IERS ITRF97>2008 transformations), and PROJ will use the ITRF2008 to ITRF2000 transformation in addition
$ echo 40 -100 0 2022.1 | cs2cs -d 8 "ITRF2000" "NAD83(2011)" | cct -d 8 +proj=set +v_4=2010 | cs2cs -d 8 "NAD83(2011)"  "ITRF2000"
40.00000066    -99.99999765 -0.00447668     2010.0000

So results are somewhat consistent, at least in the lat, lon space (not for z values)

Best regards,

Even


Le 07/02/2022 ? 14:49, Steve Riddell a ?crit :
The data for the ITFR2008 & ITRF2014 plate motion models are delivered with PROJ as init files. From the documentation, 8.7, I think I see how an +init proj string can be used for changing epochs between ITFR frames (e.g. ITRF2000 to ITRF2005), but can someone please give an example of using the plate models? For example, if I have a point in ITRF2000 epoch 2022.1 and I want to use the NOAM plate model to move it to 2010.0, what would be the +init string? I?m assuming cct would be an appropriate application for processing this string?
Thanks for any assistance!
Steve


_______________________________________________

PROJ mailing list

PROJ at lists.osgeo.org<mailto:PROJ at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/proj

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220211/a38e3de9/attachment.html>

From even.rouault at spatialys.com  Fri Feb 11 14:33:22 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Feb 2022 23:33:22 +0100
Subject: [PROJ] Plate motion models
In-Reply-To: <BN6PR01MB2404271C231AD669885A454AA6309@BN6PR01MB2404.prod.exchangelabs.com>
References: <BN6PR01MB24048FAE3B7A49E05C88CE2EA62C9@BN6PR01MB2404.prod.exchangelabs.com>
 <ef91676f-4978-a995-48ea-954f64586e56@spatialys.com>
 <BN6PR01MB240483182FF3001184581F5CA62E9@BN6PR01MB2404.prod.exchangelabs.com>
 <BN6PR01MB2404271C231AD669885A454AA6309@BN6PR01MB2404.prod.exchangelabs.com>
Message-ID: <e18e9a6c-5078-dd75-4a1f-3592a5a5db85@spatialys.com>

Interesting... The "ITRF2008 plate motion model, Z. Altamimi, et al" 
paper (https://agupubs.onlinelibrary.wiley.com/doi/10.1029/2011JB008930) 
says:

- "The estimated ORB could be considered as not significant at the 95 
per cent confidence level (i.e. two-sigma confidence level)." (and 
indeed if you look the values at one sigma dy=0.22???0.32 mm/year , the 
significance seems questionable) and "we found a small origin rate bias, 
at the level of 0.4 ? 0.6?mm/a (95 per cent confidence limits), which 
could be considered as insignificant",

- but also "However, the users are advised to use the complete 
ITRF2008-PMM parameters: the plate angular velocities (Table 3 
<https://agupubs.onlinelibrary.wiley.com/doi/10.1029/2011JB008930#jgrb17142-tbl-0003>) 
and the translation rate components (Table 2 
<https://agupubs.onlinelibrary.wiley.com/doi/10.1029/2011JB008930#jgrb17142-tbl-0002>)."

@Kristian : do you think we should alter the existing ITRF2008 values or 
add a ITRF2008_with_tr file that incorporates them (I guess from the 
ITRF2008 paper that this would be for all plates, even if HTDP only 
mentions that for the 3 plates of interest for the US), the later would 
be advised for people wanting to reproduce HTDP values ?

(note: I don't pretend to understand the paper :-))

(note2: Table 2 of 
https://geodesy.noaa.gov/TOOLS/Htdp/HTDP-user-guide.pdf has also a lot 
of values for secondary and tertiary plates for ITRF2014 coming from 
other sources than Z. Altamimi et al, 2017, ITRF2014 plate motion model


Le 11/02/2022 ? 22:27, Steve Riddell a ?crit?:
>
> It did not occur to me initially, but all I had to do was add 
> +dx/dy/dz terms in the Helmert string for NOAM in the init file. It 
> works perfectly.
>
> *From:* Steve Riddell
> *Sent:* Wednesday, February 9, 2022 3:43 PM
> *To:* Even Rouault <even.rouault at spatialys.com>; proj at lists.osgeo.org
> *Cc:* Kristian Evers <kreve at sdfe.dk>
> *Subject:* RE: [PROJ] Plate motion models
>
> Thank you again for the assistance. That was a huge help. It works as 
> expected, based on the delivered ITRF2008/ITRF2014 init files.
>
> Perhaps it should be noted that the delivered models support only 
> 3-rotation parameters. The paper, ?ITRF2008 plate motion model, Z. 
> Altamimi, et al.?, and the HTDP documentation indicates that plates 
> NOAM, PCFC, and CARB, include translation rates as well: 
> (0.41,0.22,0.41)mm/yr.? The practical difference then is 
> sub-centimeter, but noticeable when comparing with HTDP (over areas 
> not covered by HTDP?s velocity grids).
>
> Thanks again,
>
> steve
>
> *From:* Even Rouault <even.rouault at spatialys.com>
> *Sent:* Monday, February 7, 2022 9:18 AM
> *To:* Steve Riddell <sriddell at geocue.com>; proj at lists.osgeo.org
> *Subject:* Re: [PROJ] Plate motion models
>
> Hi Steve,
>
> Assuming lon=-100 lat=40 z=0,? I believe (not sure! and in particular 
> if that's geodetically meaningful to chain so many transformations) 
> you should use a pipeline like the following one, which will do:
>
> - conversion to cartesian coordinate space
>
> - apply the ITRF2000 to ITRF2014 transformation preserving observation 
> epoch of 2022.1
>
> - apply the ITRF2014:NOAM model using a target epoch of 2010 (hence 
> the +inv, as naturally the transformation would use +t_epoch as the 
> "source") for a point at observation epoch of 2022.1
>
> - force the observation epoch to 2010
>
> - apply the ITRF2014 to ITRF2000 transformation (at epoch 2010)
>
> - conversion to lat, lon coordinate space
>
> echo -100 40 0 2022.1 | cct -d 8 +proj=pipeline \
> ??? +step +proj=cart +ellps+GRS80 \
> ??? +step +inv +init=ITRF2014:ITRF2000 \
> ? ? +step +inv +init=ITRF2014:NOAM +t_epoch=2010 \
> ??? +step +proj=set +v_4=2010 \
> ? ? +step +init=ITRF2014:ITRF2000 \
> ? ? +step +inv +proj=cart +ellps+GRS80
>
> I get:
>
> -99.99999790???? 40.00000064 0.00755196???? 2010.0000
>
> If using ITRF2008 instead of ITRF2014, I get:
>
> ? -99.99999854???? 40.00000065??? 0.00909276???? 2010.0000
>
> I've also tried using a plate-fixed CRS as an intermediate using what 
> is available in EPSG
>
> First with NAD83(CORS96) since there's a direct transformation for it 
> in EPSG (not quite "direct" since when looking at the comments, it 
> already results from concatenation of ITRF96>97 and IERS ITRF97>2000 
> transformations)
>
> (order is lat, lon here)
>
> $ echo 40 -100 0 2022.1 | cs2cs -d 8 "ITRF2000" "NAD83(CORS96)" | cct 
> -d 8 +proj=set +v_4=2010 | cs2cs -d 8 "NAD83(CORS96)"? "ITRF2000"
> 40.00000067?? ?-99.99999766 -0.00447640???? 2010.0000
>
> Or if using NAD83(2011) (there's a transformation between NAD83(2011) 
> and ITRF2008 in EPSG (concatenation of ITRF96>97 and IERS ITRF97>2008 
> transformations), and PROJ will use the ITRF2008 to ITRF2000 
> transformation in addition
>
> $ echo 40 -100 0 2022.1 | cs2cs -d 8 "ITRF2000" "NAD83(2011)" | cct -d 
> 8 +proj=set +v_4=2010 | cs2cs -d 8 "NAD83(2011)"? "ITRF2000"
> 40.00000066??? -99.99999765 -0.00447668???? 2010.0000
>
>
> So results are somewhat consistent, at least in the lat, lon space 
> (not for z values)
>
> Best regards,
>
> Even
>
> Le 07/02/2022 ? 14:49, Steve Riddell a ?crit?:
>
>     The data for the ITFR2008 & ITRF2014 plate motion models are
>     delivered with PROJ as init files. From the documentation, 8.7, I
>     think I see how an +init proj string can be used for changing
>     epochs between ITFR frames (e.g. ITRF2000 to ITRF2005), but can
>     someone please give an example of using the plate models? For
>     example, if I have a point in ITRF2000 epoch 2022.1 and I want to
>     use the NOAM plate model to move it to 2010.0, what would be the
>     +init string? I?m assuming cct would be an appropriate application
>     for processing this string?
>
>     Thanks for any assistance!
>
>     Steve
>
>     _______________________________________________
>
>     PROJ mailing list
>
>     PROJ at lists.osgeo.org
>
>     https://lists.osgeo.org/mailman/listinfo/proj
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220211/e8b5073c/attachment-0001.html>

From kreve at sdfe.dk  Mon Feb 14 00:39:41 2022
From: kreve at sdfe.dk (Kristian Evers)
Date: Mon, 14 Feb 2022 08:39:41 +0000
Subject: [PROJ] Plate motion models
In-Reply-To: <e18e9a6c-5078-dd75-4a1f-3592a5a5db85@spatialys.com>
References: <BN6PR01MB24048FAE3B7A49E05C88CE2EA62C9@BN6PR01MB2404.prod.exchangelabs.com>
 <ef91676f-4978-a995-48ea-954f64586e56@spatialys.com>
 <BN6PR01MB240483182FF3001184581F5CA62E9@BN6PR01MB2404.prod.exchangelabs.com>
 <BN6PR01MB2404271C231AD669885A454AA6309@BN6PR01MB2404.prod.exchangelabs.com>
 <e18e9a6c-5078-dd75-4a1f-3592a5a5db85@spatialys.com>
Message-ID: <8ed9e2afc1ac40329d9b7442d9632151@sdfe.dk>

Even,

I clearly didn?t read the conclusion of the study very carefully when I originally added this. The conclusion is clear, we should include the translations from table 2. I don?t have a lot of time to really do a deep dive into the paper but from a quick read it is unclear to me if the translate rates in table 2 is only applicable for EURA and NOAM or if they are general translations to be used for all plates.

I would suggest to add them as new entries in the ITRF2008 init file, e.g <NOAM_T> or something like that.

/Kristian

From: Even Rouault <even.rouault at spatialys.com>
Sent: 11. februar 2022 23:33
To: Steve Riddell <sriddell at geocue.com>; proj at lists.osgeo.org
Cc: Kristian Evers <kreve at sdfe.dk>
Subject: Re: [PROJ] Plate motion models


Interesting... The "ITRF2008 plate motion model, Z. Altamimi, et al" paper (https://agupubs.onlinelibrary.wiley.com/doi/10.1029/2011JB008930) says:

- "The estimated ORB could be considered as not significant at the 95 per cent confidence level (i.e. two-sigma confidence level)." (and indeed if you look the values at one sigma dy=0.22 ? 0.32 mm/year , the significance seems questionable) and "we found a small origin rate bias, at the level of 0.4 ? 0.6 mm/a (95 per cent confidence limits), which could be considered as insignificant",

- but also "However, the users are advised to use the complete ITRF2008-PMM parameters: the plate angular velocities (Table 3<https://agupubs.onlinelibrary.wiley.com/doi/10.1029/2011JB008930#jgrb17142-tbl-0003>) and the translation rate components (Table 2<https://agupubs.onlinelibrary.wiley.com/doi/10.1029/2011JB008930#jgrb17142-tbl-0002>)."

@Kristian : do you think we should alter the existing ITRF2008 values or add a ITRF2008_with_tr file that incorporates them (I guess from the ITRF2008 paper that this would be for all plates, even if HTDP only mentions that for the 3 plates of interest for the US), the later would be advised for people wanting to reproduce HTDP values ?

(note: I don't pretend to understand the paper :-))

(note2: Table 2 of https://geodesy.noaa.gov/TOOLS/Htdp/HTDP-user-guide.pdf has also a lot of values for secondary and tertiary plates for ITRF2014 coming from other sources than Z. Altamimi et al, 2017, ITRF2014 plate motion model


Le 11/02/2022 ? 22:27, Steve Riddell a ?crit :
It did not occur to me initially, but all I had to do was add +dx/dy/dz terms in the Helmert string for NOAM in the init file. It works perfectly.

From: Steve Riddell
Sent: Wednesday, February 9, 2022 3:43 PM
To: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>; proj at lists.osgeo.org<mailto:proj at lists.osgeo.org>
Cc: Kristian Evers <kreve at sdfe.dk><mailto:kreve at sdfe.dk>
Subject: RE: [PROJ] Plate motion models

Thank you again for the assistance. That was a huge help. It works as expected, based on the delivered ITRF2008/ITRF2014 init files.

Perhaps it should be noted that the delivered models support only 3-rotation parameters. The paper, ?ITRF2008 plate motion model, Z. Altamimi, et al.?, and the HTDP documentation indicates that plates NOAM, PCFC, and CARB, include translation rates as well: (0.41,0.22,0.41)mm/yr.  The practical difference then is sub-centimeter, but noticeable when comparing with HTDP (over areas not covered by HTDP?s velocity grids).

Thanks again,
steve

From: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
Sent: Monday, February 7, 2022 9:18 AM
To: Steve Riddell <sriddell at geocue.com<mailto:sriddell at geocue.com>>; proj at lists.osgeo.org<mailto:proj at lists.osgeo.org>
Subject: Re: [PROJ] Plate motion models


Hi Steve,

Assuming lon=-100 lat=40 z=0,  I believe (not sure! and in particular if that's geodetically meaningful to chain so many transformations) you should use a pipeline like the following one, which will do:

- conversion to cartesian coordinate space

- apply the ITRF2000 to ITRF2014 transformation preserving observation epoch of 2022.1

- apply the ITRF2014:NOAM model using a target epoch of 2010 (hence the +inv, as naturally the transformation would use +t_epoch as the "source") for a point at observation epoch of 2022.1

- force the observation epoch to 2010

- apply the ITRF2014 to ITRF2000 transformation (at epoch 2010)

- conversion to lat, lon coordinate space

echo -100 40 0 2022.1 | cct -d 8 +proj=pipeline \
    +step +proj=cart +ellps+GRS80 \
    +step +inv +init=ITRF2014:ITRF2000 \
    +step +inv +init=ITRF2014:NOAM +t_epoch=2010 \
    +step +proj=set +v_4=2010 \
    +step +init=ITRF2014:ITRF2000 \
    +step +inv +proj=cart +ellps+GRS80

I get:

-99.99999790     40.00000064    0.00755196     2010.0000

If using ITRF2008 instead of ITRF2014, I get:

  -99.99999854     40.00000065    0.00909276     2010.0000



I've also tried using a plate-fixed CRS as an intermediate using what is available in EPSG

First with NAD83(CORS96) since there's a direct transformation for it in EPSG (not quite "direct" since when looking at the comments, it already results from concatenation of ITRF96>97 and IERS ITRF97>2000 transformations)

(order is lat, lon here)
$ echo 40 -100 0 2022.1 | cs2cs -d 8 "ITRF2000" "NAD83(CORS96)" | cct -d 8 +proj=set +v_4=2010 | cs2cs -d 8 "NAD83(CORS96)"  "ITRF2000"
40.00000067    -99.99999766 -0.00447640     2010.0000

Or if using NAD83(2011) (there's a transformation between NAD83(2011) and ITRF2008 in EPSG (concatenation of ITRF96>97 and IERS ITRF97>2008 transformations), and PROJ will use the ITRF2008 to ITRF2000 transformation in addition
$ echo 40 -100 0 2022.1 | cs2cs -d 8 "ITRF2000" "NAD83(2011)" | cct -d 8 +proj=set +v_4=2010 | cs2cs -d 8 "NAD83(2011)"  "ITRF2000"
40.00000066    -99.99999765 -0.00447668     2010.0000

So results are somewhat consistent, at least in the lat, lon space (not for z values)

Best regards,

Even


Le 07/02/2022 ? 14:49, Steve Riddell a ?crit :
The data for the ITFR2008 & ITRF2014 plate motion models are delivered with PROJ as init files. From the documentation, 8.7, I think I see how an +init proj string can be used for changing epochs between ITFR frames (e.g. ITRF2000 to ITRF2005), but can someone please give an example of using the plate models? For example, if I have a point in ITRF2000 epoch 2022.1 and I want to use the NOAM plate model to move it to 2010.0, what would be the +init string? I?m assuming cct would be an appropriate application for processing this string?
Thanks for any assistance!
Steve


_______________________________________________

PROJ mailing list

PROJ at lists.osgeo.org<mailto:PROJ at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/proj

--

http://www.spatialys.com

My software is free, but my time generally not.

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220214/7d170075/attachment-0001.html>

From sriddell at geocue.com  Mon Feb 14 15:23:46 2022
From: sriddell at geocue.com (Steve Riddell)
Date: Mon, 14 Feb 2022 23:23:46 +0000
Subject: [PROJ] Plate motion models
In-Reply-To: <BN6PR01MB2404271C231AD669885A454AA6309@BN6PR01MB2404.prod.exchangelabs.com>
References: <BN6PR01MB24048FAE3B7A49E05C88CE2EA62C9@BN6PR01MB2404.prod.exchangelabs.com>
 <ef91676f-4978-a995-48ea-954f64586e56@spatialys.com>
 <BN6PR01MB240483182FF3001184581F5CA62E9@BN6PR01MB2404.prod.exchangelabs.com>
 <BN6PR01MB2404271C231AD669885A454AA6309@BN6PR01MB2404.prod.exchangelabs.com>
Message-ID: <BN6PR01MB240468B8E620874439488F46A6339@BN6PR01MB2404.prod.exchangelabs.com>

Hi Even & Kristian,
It turns out there was another reason, besides translation rates, that was preventing me matching HTDP results:  for the NOAM plate, the z-rotation rate should be -0.0001 as opposed to +0.0001.  The ITRF2008 init file needs to be updated.
steve

From: Steve Riddell
Sent: Friday, February 11, 2022 3:27 PM
To: Even Rouault <even.rouault at spatialys.com>; proj at lists.osgeo.org
Cc: Kristian Evers <kreve at sdfe.dk>
Subject: RE: [PROJ] Plate motion models

It did not occur to me initially, but all I had to do was add +dx/dy/dz terms in the Helmert string for NOAM in the init file. It works perfectly.

From: Steve Riddell
Sent: Wednesday, February 9, 2022 3:43 PM
To: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>; proj at lists.osgeo.org<mailto:proj at lists.osgeo.org>
Cc: Kristian Evers <kreve at sdfe.dk<mailto:kreve at sdfe.dk>>
Subject: RE: [PROJ] Plate motion models

Thank you again for the assistance. That was a huge help. It works as expected, based on the delivered ITRF2008/ITRF2014 init files.

Perhaps it should be noted that the delivered models support only 3-rotation parameters. The paper, ?ITRF2008 plate motion model, Z. Altamimi, et al.?, and the HTDP documentation indicates that plates NOAM, PCFC, and CARB, include translation rates as well: (0.41,0.22,0.41)mm/yr.  The practical difference then is sub-centimeter, but noticeable when comparing with HTDP (over areas not covered by HTDP?s velocity grids).

Thanks again,
steve

From: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
Sent: Monday, February 7, 2022 9:18 AM
To: Steve Riddell <sriddell at geocue.com<mailto:sriddell at geocue.com>>; proj at lists.osgeo.org<mailto:proj at lists.osgeo.org>
Subject: Re: [PROJ] Plate motion models


Hi Steve,

Assuming lon=-100 lat=40 z=0,  I believe (not sure! and in particular if that's geodetically meaningful to chain so many transformations) you should use a pipeline like the following one, which will do:

- conversion to cartesian coordinate space

- apply the ITRF2000 to ITRF2014 transformation preserving observation epoch of 2022.1

- apply the ITRF2014:NOAM model using a target epoch of 2010 (hence the +inv, as naturally the transformation would use +t_epoch as the "source") for a point at observation epoch of 2022.1

- force the observation epoch to 2010

- apply the ITRF2014 to ITRF2000 transformation (at epoch 2010)

- conversion to lat, lon coordinate space

echo -100 40 0 2022.1 | cct -d 8 +proj=pipeline \
    +step +proj=cart +ellps+GRS80 \
    +step +inv +init=ITRF2014:ITRF2000 \
    +step +inv +init=ITRF2014:NOAM +t_epoch=2010 \
    +step +proj=set +v_4=2010 \
    +step +init=ITRF2014:ITRF2000 \
    +step +inv +proj=cart +ellps+GRS80

I get:

-99.99999790     40.00000064    0.00755196     2010.0000

If using ITRF2008 instead of ITRF2014, I get:

  -99.99999854     40.00000065    0.00909276     2010.0000



I've also tried using a plate-fixed CRS as an intermediate using what is available in EPSG

First with NAD83(CORS96) since there's a direct transformation for it in EPSG (not quite "direct" since when looking at the comments, it already results from concatenation of ITRF96>97 and IERS ITRF97>2000 transformations)

(order is lat, lon here)
$ echo 40 -100 0 2022.1 | cs2cs -d 8 "ITRF2000" "NAD83(CORS96)" | cct -d 8 +proj=set +v_4=2010 | cs2cs -d 8 "NAD83(CORS96)"  "ITRF2000"
40.00000067    -99.99999766 -0.00447640     2010.0000

Or if using NAD83(2011) (there's a transformation between NAD83(2011) and ITRF2008 in EPSG (concatenation of ITRF96>97 and IERS ITRF97>2008 transformations), and PROJ will use the ITRF2008 to ITRF2000 transformation in addition
$ echo 40 -100 0 2022.1 | cs2cs -d 8 "ITRF2000" "NAD83(2011)" | cct -d 8 +proj=set +v_4=2010 | cs2cs -d 8 "NAD83(2011)"  "ITRF2000"
40.00000066    -99.99999765 -0.00447668     2010.0000

So results are somewhat consistent, at least in the lat, lon space (not for z values)

Best regards,

Even


Le 07/02/2022 ? 14:49, Steve Riddell a ?crit :
The data for the ITFR2008 & ITRF2014 plate motion models are delivered with PROJ as init files. From the documentation, 8.7, I think I see how an +init proj string can be used for changing epochs between ITFR frames (e.g. ITRF2000 to ITRF2005), but can someone please give an example of using the plate models? For example, if I have a point in ITRF2000 epoch 2022.1 and I want to use the NOAM plate model to move it to 2010.0, what would be the +init string? I?m assuming cct would be an appropriate application for processing this string?
Thanks for any assistance!
Steve


_______________________________________________

PROJ mailing list

PROJ at lists.osgeo.org<mailto:PROJ at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/proj

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220214/637bce66/attachment.html>

From even.rouault at spatialys.com  Mon Feb 14 15:56:58 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Feb 2022 00:56:58 +0100
Subject: [PROJ] Plate motion models
In-Reply-To: <BN6PR01MB240468B8E620874439488F46A6339@BN6PR01MB2404.prod.exchangelabs.com>
References: <BN6PR01MB24048FAE3B7A49E05C88CE2EA62C9@BN6PR01MB2404.prod.exchangelabs.com>
 <ef91676f-4978-a995-48ea-954f64586e56@spatialys.com>
 <BN6PR01MB240483182FF3001184581F5CA62E9@BN6PR01MB2404.prod.exchangelabs.com>
 <BN6PR01MB2404271C231AD669885A454AA6309@BN6PR01MB2404.prod.exchangelabs.com>
 <BN6PR01MB240468B8E620874439488F46A6339@BN6PR01MB2404.prod.exchangelabs.com>
Message-ID: <9acd5394-3833-2a4f-c6de-e0b7560be0d9@spatialys.com>

Steve,
>
> It turns out there was another reason, besides translation rates, that 
> was preventing me matching HTDP results:? for the NOAM plate, the 
> z-rotation rate should be -0.0001 as opposed to +0.0001.? The ITRF2008 
> init file needs to be updated.
>
Good catch: fix done in 
https://github.com/OSGeo/PROJ/commit/625d4b99e0b64b3ce5ba773e4236248506ae4f99. 
There was also an error on one component of PCFC

Regarding the translation rates, I've done a proposed update in 
https://github.com/OSGeo/PROJ/pull/3058.? Would you mind trying 
https://github.com/OSGeo/PROJ/blob/518cbe5387a7f192a25156543b299e852474e791/data/ITRF2008 
with ITRF2008:NOAM_T and report if that works as expected (ideally 
before tomorrow before PROJ 9.0 RC will be cut) ?

Even

> steve
>

> *From:* Steve Riddell
> *Sent:* Friday, February 11, 2022 3:27 PM
> *To:* Even Rouault <even.rouault at spatialys.com>; proj at lists.osgeo.org
> *Cc:* Kristian Evers <kreve at sdfe.dk>
> *Subject:* RE: [PROJ] Plate motion models
>
> It did not occur to me initially, but all I had to do was add 
> +dx/dy/dz terms in the Helmert string for NOAM in the init file. It 
> works perfectly.
>
> *From:* Steve Riddell
> *Sent:* Wednesday, February 9, 2022 3:43 PM
> *To:* Even Rouault <even.rouault at spatialys.com>; proj at lists.osgeo.org
> *Cc:* Kristian Evers <kreve at sdfe.dk>
> *Subject:* RE: [PROJ] Plate motion models
>
> Thank you again for the assistance. That was a huge help. It works as 
> expected, based on the delivered ITRF2008/ITRF2014 init files.
>
> Perhaps it should be noted that the delivered models support only 
> 3-rotation parameters. The paper, ?ITRF2008 plate motion model, Z. 
> Altamimi, et al.?, and the HTDP documentation indicates that plates 
> NOAM, PCFC, and CARB, include translation rates as well: 
> (0.41,0.22,0.41)mm/yr.? The practical difference then is 
> sub-centimeter, but noticeable when comparing with HTDP (over areas 
> not covered by HTDP?s velocity grids).
>
> Thanks again,
>
> steve
>
> *From:* Even Rouault <even.rouault at spatialys.com>
> *Sent:* Monday, February 7, 2022 9:18 AM
> *To:* Steve Riddell <sriddell at geocue.com>; proj at lists.osgeo.org
> *Subject:* Re: [PROJ] Plate motion models
>
> Hi Steve,
>
> Assuming lon=-100 lat=40 z=0,? I believe (not sure! and in particular 
> if that's geodetically meaningful to chain so many transformations) 
> you should use a pipeline like the following one, which will do:
>
> - conversion to cartesian coordinate space
>
> - apply the ITRF2000 to ITRF2014 transformation preserving observation 
> epoch of 2022.1
>
> - apply the ITRF2014:NOAM model using a target epoch of 2010 (hence 
> the +inv, as naturally the transformation would use +t_epoch as the 
> "source") for a point at observation epoch of 2022.1
>
> - force the observation epoch to 2010
>
> - apply the ITRF2014 to ITRF2000 transformation (at epoch 2010)
>
> - conversion to lat, lon coordinate space
>
> echo -100 40 0 2022.1 | cct -d 8 +proj=pipeline \
> ??? +step +proj=cart +ellps+GRS80 \
> ??? +step +inv +init=ITRF2014:ITRF2000 \
> ? ? +step +inv +init=ITRF2014:NOAM +t_epoch=2010 \
> ??? +step +proj=set +v_4=2010 \
> ? ? +step +init=ITRF2014:ITRF2000 \
> ? ? +step +inv +proj=cart +ellps+GRS80
>
> I get:
>
> -99.99999790???? 40.00000064 0.00755196???? 2010.0000
>
> If using ITRF2008 instead of ITRF2014, I get:
>
> ? -99.99999854???? 40.00000065??? 0.00909276???? 2010.0000
>
> I've also tried using a plate-fixed CRS as an intermediate using what 
> is available in EPSG
>
> First with NAD83(CORS96) since there's a direct transformation for it 
> in EPSG (not quite "direct" since when looking at the comments, it 
> already results from concatenation of ITRF96>97 and IERS ITRF97>2000 
> transformations)
>
> (order is lat, lon here)
>
> $ echo 40 -100 0 2022.1 | cs2cs -d 8 "ITRF2000" "NAD83(CORS96)" | cct 
> -d 8 +proj=set +v_4=2010 | cs2cs -d 8 "NAD83(CORS96)"? "ITRF2000"
> 40.00000067?? ?-99.99999766 -0.00447640???? 2010.0000
>
> Or if using NAD83(2011) (there's a transformation between NAD83(2011) 
> and ITRF2008 in EPSG (concatenation of ITRF96>97 and IERS ITRF97>2008 
> transformations), and PROJ will use the ITRF2008 to ITRF2000 
> transformation in addition
>
> $ echo 40 -100 0 2022.1 | cs2cs -d 8 "ITRF2000" "NAD83(2011)" | cct -d 
> 8 +proj=set +v_4=2010 | cs2cs -d 8 "NAD83(2011)"? "ITRF2000"
> 40.00000066??? -99.99999765 -0.00447668???? 2010.0000
>
>
> So results are somewhat consistent, at least in the lat, lon space 
> (not for z values)
>
> Best regards,
>
> Even
>
> Le 07/02/2022 ? 14:49, Steve Riddell a ?crit?:
>
>     The data for the ITFR2008 & ITRF2014 plate motion models are
>     delivered with PROJ as init files. From the documentation, 8.7, I
>     think I see how an +init proj string can be used for changing
>     epochs between ITFR frames (e.g. ITRF2000 to ITRF2005), but can
>     someone please give an example of using the plate models? For
>     example, if I have a point in ITRF2000 epoch 2022.1 and I want to
>     use the NOAM plate model to move it to 2010.0, what would be the
>     +init string? I?m assuming cct would be an appropriate application
>     for processing this string?
>
>     Thanks for any assistance!
>
>     Steve
>
>     _______________________________________________
>
>     PROJ mailing list
>
>     PROJ at lists.osgeo.org
>
>     https://lists.osgeo.org/mailman/listinfo/proj
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220215/73f1188e/attachment-0001.html>

From sriddell at geocue.com  Tue Feb 15 06:57:57 2022
From: sriddell at geocue.com (Steve Riddell)
Date: Tue, 15 Feb 2022 14:57:57 +0000
Subject: [PROJ] Plate motion models
In-Reply-To: <9acd5394-3833-2a4f-c6de-e0b7560be0d9@spatialys.com>
References: <BN6PR01MB24048FAE3B7A49E05C88CE2EA62C9@BN6PR01MB2404.prod.exchangelabs.com>
 <ef91676f-4978-a995-48ea-954f64586e56@spatialys.com>
 <BN6PR01MB240483182FF3001184581F5CA62E9@BN6PR01MB2404.prod.exchangelabs.com>
 <BN6PR01MB2404271C231AD669885A454AA6309@BN6PR01MB2404.prod.exchangelabs.com>
 <BN6PR01MB240468B8E620874439488F46A6339@BN6PR01MB2404.prod.exchangelabs.com>
 <9acd5394-3833-2a4f-c6de-e0b7560be0d9@spatialys.com>
Message-ID: <BN6PR01MB2404325EA1ECF290B9ED262DA6349@BN6PR01MB2404.prod.exchangelabs.com>

Works as expected. Thanks again!

From: Even Rouault <even.rouault at spatialys.com>
Sent: Monday, February 14, 2022 5:57 PM
To: Steve Riddell <sriddell at geocue.com>; proj at lists.osgeo.org
Cc: Kristian Evers <kreve at sdfe.dk>
Subject: Re: [PROJ] Plate motion models

Steve,
It turns out there was another reason, besides translation rates, that was preventing me matching HTDP results:  for the NOAM plate, the z-rotation rate should be -0.0001 as opposed to +0.0001.  The ITRF2008 init file needs to be updated.

Good catch: fix done in https://github.com/OSGeo/PROJ/commit/625d4b99e0b64b3ce5ba773e4236248506ae4f99. There was also an error on one component of PCFC

Regarding the translation rates, I've done a proposed update in https://github.com/OSGeo/PROJ/pull/3058.  Would you mind trying https://github.com/OSGeo/PROJ/blob/518cbe5387a7f192a25156543b299e852474e791/data/ITRF2008 with ITRF2008:NOAM_T and report if that works as expected (ideally before tomorrow before PROJ 9.0 RC will be cut) ?

Even
steve


From: Steve Riddell
Sent: Friday, February 11, 2022 3:27 PM
To: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>; proj at lists.osgeo.org<mailto:proj at lists.osgeo.org>
Cc: Kristian Evers <kreve at sdfe.dk><mailto:kreve at sdfe.dk>
Subject: RE: [PROJ] Plate motion models

It did not occur to me initially, but all I had to do was add +dx/dy/dz terms in the Helmert string for NOAM in the init file. It works perfectly.

From: Steve Riddell
Sent: Wednesday, February 9, 2022 3:43 PM
To: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>; proj at lists.osgeo.org<mailto:proj at lists.osgeo.org>
Cc: Kristian Evers <kreve at sdfe.dk<mailto:kreve at sdfe.dk>>
Subject: RE: [PROJ] Plate motion models

Thank you again for the assistance. That was a huge help. It works as expected, based on the delivered ITRF2008/ITRF2014 init files.

Perhaps it should be noted that the delivered models support only 3-rotation parameters. The paper, ?ITRF2008 plate motion model, Z. Altamimi, et al.?, and the HTDP documentation indicates that plates NOAM, PCFC, and CARB, include translation rates as well: (0.41,0.22,0.41)mm/yr.  The practical difference then is sub-centimeter, but noticeable when comparing with HTDP (over areas not covered by HTDP?s velocity grids).

Thanks again,
steve

From: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
Sent: Monday, February 7, 2022 9:18 AM
To: Steve Riddell <sriddell at geocue.com<mailto:sriddell at geocue.com>>; proj at lists.osgeo.org<mailto:proj at lists.osgeo.org>
Subject: Re: [PROJ] Plate motion models


Hi Steve,

Assuming lon=-100 lat=40 z=0,  I believe (not sure! and in particular if that's geodetically meaningful to chain so many transformations) you should use a pipeline like the following one, which will do:

- conversion to cartesian coordinate space

- apply the ITRF2000 to ITRF2014 transformation preserving observation epoch of 2022.1

- apply the ITRF2014:NOAM model using a target epoch of 2010 (hence the +inv, as naturally the transformation would use +t_epoch as the "source") for a point at observation epoch of 2022.1

- force the observation epoch to 2010

- apply the ITRF2014 to ITRF2000 transformation (at epoch 2010)

- conversion to lat, lon coordinate space

echo -100 40 0 2022.1 | cct -d 8 +proj=pipeline \
    +step +proj=cart +ellps+GRS80 \
    +step +inv +init=ITRF2014:ITRF2000 \
    +step +inv +init=ITRF2014:NOAM +t_epoch=2010 \
    +step +proj=set +v_4=2010 \
    +step +init=ITRF2014:ITRF2000 \
    +step +inv +proj=cart +ellps+GRS80

I get:

-99.99999790     40.00000064    0.00755196     2010.0000

If using ITRF2008 instead of ITRF2014, I get:

  -99.99999854     40.00000065    0.00909276     2010.0000



I've also tried using a plate-fixed CRS as an intermediate using what is available in EPSG

First with NAD83(CORS96) since there's a direct transformation for it in EPSG (not quite "direct" since when looking at the comments, it already results from concatenation of ITRF96>97 and IERS ITRF97>2000 transformations)

(order is lat, lon here)
$ echo 40 -100 0 2022.1 | cs2cs -d 8 "ITRF2000" "NAD83(CORS96)" | cct -d 8 +proj=set +v_4=2010 | cs2cs -d 8 "NAD83(CORS96)"  "ITRF2000"
40.00000067    -99.99999766 -0.00447640     2010.0000

Or if using NAD83(2011) (there's a transformation between NAD83(2011) and ITRF2008 in EPSG (concatenation of ITRF96>97 and IERS ITRF97>2008 transformations), and PROJ will use the ITRF2008 to ITRF2000 transformation in addition
$ echo 40 -100 0 2022.1 | cs2cs -d 8 "ITRF2000" "NAD83(2011)" | cct -d 8 +proj=set +v_4=2010 | cs2cs -d 8 "NAD83(2011)"  "ITRF2000"
40.00000066    -99.99999765 -0.00447668     2010.0000

So results are somewhat consistent, at least in the lat, lon space (not for z values)

Best regards,

Even


Le 07/02/2022 ? 14:49, Steve Riddell a ?crit :
The data for the ITFR2008 & ITRF2014 plate motion models are delivered with PROJ as init files. From the documentation, 8.7, I think I see how an +init proj string can be used for changing epochs between ITFR frames (e.g. ITRF2000 to ITRF2005), but can someone please give an example of using the plate models? For example, if I have a point in ITRF2000 epoch 2022.1 and I want to use the NOAM plate model to move it to 2010.0, what would be the +init string? I?m assuming cct would be an appropriate application for processing this string?
Thanks for any assistance!
Steve


_______________________________________________

PROJ mailing list

PROJ at lists.osgeo.org<mailto:PROJ at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/proj

--

http://www.spatialys.com

My software is free, but my time generally not.

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220215/bfaba097/attachment-0001.html>

From kristianevers at gmail.com  Tue Feb 15 12:23:56 2022
From: kristianevers at gmail.com (Kristian Evers)
Date: Tue, 15 Feb 2022 21:23:56 +0100
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
Message-ID: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>

All,

I have just uploaded releases candiates for the upcoming releases of PROJ 9.0.0 and PROJ-data 1.9.

The PROJ release candidate is includes various improvements, a few bug fixes and most notably
it *doesn?t* include autotools makefiles. See the draft release notes below.

The PROJ-data packages includes new grids for the Polish ETRF2000-PL, Norwegian chart datum grids
and the Belgian hBG18 geoid model.

Download the two release candidates here:


https://download.osgeo.org/proj/proj-9.0.0RC1.tar.gz
https://download.osgeo.org/proj/proj-9.0.0RC1.zip


https://download.osgeo.org/proj/proj-data-1.9RC1.tar.gz
https://download.osgeo.org/proj/proj-data-1.9RC1.zip


As usual everyone who uses PROJ is encouraged to try out the release candidates and report
back their experiences either here on the mailing list or in the issue tracker on GitHub.

/Kristian


??????????????

9.0.0 Release Notes
-------------------

 Breaking Changes
 ----------------

 o Support for the autotools build system has been removed (#3027)
   See RFC7 for details: https://proj.org/community/rfc/rfc-7.html

 Updates
 --------

 o Database updates:

  + ESRI projection engine db to version 12.9 (#2943)

  + EPSG v10.054 (#3051)

  + Vertical grid files for PL-geoid-2011, Polish geoid model (#2960)

  + Belgian geoid model hBG18 to grid alternatives (#3044)

 o Add new option to proj_create_crs_to_crs_from_pj method to force +over on
   transformation operations (#2914)

 o Specify CMAKE_INSTALL_RPATH for macOS; use -rpath LDFLAGS for tests (#3009)

 o Implement Geographic3D to Depth/Geog2D+Depth as used by ETRS89 to CD Norway
   depth (#3010)

 o Allow PROJ_LIB paths wrapped with double quotes (#3031)

 o Use external gtest by default when possible (#3035)

 o CMake: make BUILD_SHARED_LIBS=ON the default even on Windows (#3042)

 o proj.ini: add a 'ca_bundle_path' variable (#3049)


 Bug fixes
 ----------

 o Fix extremely long parsing time on hostile PROJ strings (#2968)

 o CMake: fix warning with external googletest (#2980)

 o proj_get_crs_info_list_from_database(): report PJ_TYPE_GEODETIC_CRS for
   IAU_2015 -ocentric geodetic CRS (#3013)

 o peirce_q: rename +type parameter wrongly introduced in 8.2.1 to +shape (#3014)

 o Set more precise error code for parsing errors in proj_create() (#3037)

 o createOperations(): fix transformations from/to a BoundCRS of a
   DerivedGeographicCRS coming from WKT (#3046)

 o Better deal with importing strings like '+init=epsg:XXXX +over' (#3055)

 o Fix importing CRS definition with +proj=peirce_q and +shape different from
   square or diamond (#3057)


From sebastic at xs4all.nl  Tue Feb 15 13:06:48 2022
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 15 Feb 2022 22:06:48 +0100
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
In-Reply-To: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
References: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
Message-ID: <f05ff3fd-543e-e6d2-3c64-0759a09a11b0@xs4all.nl>

On 2/15/22 21:23, Kristian Evers wrote:
> As usual everyone who uses PROJ is encouraged to try out the release candidates and report
> back their experiences either here on the mailing list or in the issue tracker on GitHub.

The gtest download doesn't work for the Debian package as the build 
environment doesn't have network:

-- Could NOT find GTest (missing: GTEST_LIBRARY GTEST_INCLUDE_DIR 
GTEST_MAIN_LIBRARY) (Required is at least version "1.8.1")
-- Using internal GTest
-- Configuring done
-- Generating done
-- Build files have been written to: 
/build/proj-9.0.0~rc1/obj-x86_64-linux-gnu/googletest-download
gmake[2]: Entering directory 
'/build/proj-9.0.0~rc1/obj-x86_64-linux-gnu/googletest-download'
gmake[3]: Entering directory 
'/build/proj-9.0.0~rc1/obj-x86_64-linux-gnu/googletest-download'
gmake[4]: Entering directory 
'/build/proj-9.0.0~rc1/obj-x86_64-linux-gnu/googletest-download'
gmake[4]: Leaving directory 
'/build/proj-9.0.0~rc1/obj-x86_64-linux-gnu/googletest-download'
gmake[4]: Entering directory 
'/build/proj-9.0.0~rc1/obj-x86_64-linux-gnu/googletest-download'
[ 11%] Creating directories for 'googletest'
[ 22%] Performing download step (download, verify and extract) for 
'googletest'
-- Downloading...
 
dst='/build/proj-9.0.0~rc1/obj-x86_64-linux-gnu/googletest-download/googletest-prefix/src/release-1.11.0.zip'
    timeout='none'
    inactivity timeout='none'
-- Using 
src='https://github.com/google/googletest/archive/release-1.11.0.zip'
-- Retrying...
-- Using 
src='https://github.com/google/googletest/archive/release-1.11.0.zip'
-- Retry after 5 seconds (attempt #2) ...
-- Using 
src='https://github.com/google/googletest/archive/release-1.11.0.zip'
-- Retry after 5 seconds (attempt #3) ...
-- Using 
src='https://github.com/google/googletest/archive/release-1.11.0.zip'
-- Retry after 15 seconds (attempt #4) ...
-- Using 
src='https://github.com/google/googletest/archive/release-1.11.0.zip'
-- Retry after 60 seconds (attempt #5) ...

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From even.rouault at spatialys.com  Tue Feb 15 13:13:16 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Feb 2022 22:13:16 +0100
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
In-Reply-To: <f05ff3fd-543e-e6d2-3c64-0759a09a11b0@xs4all.nl>
References: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
 <f05ff3fd-543e-e6d2-3c64-0759a09a11b0@xs4all.nl>
Message-ID: <3d4858b2-94da-1ae4-b5e7-7c0e1b970d1e@spatialys.com>

Bas,
> The gtest download doesn't work for the Debian package as the build 
> environment doesn't have network:

installing the "libgtest-dev" package will solve that if you want to 
build & run the tests. Otherwise run cmake with -DBUILD_TESTING=OFF to 
disable them

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From sebastic at xs4all.nl  Tue Feb 15 13:15:29 2022
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 15 Feb 2022 22:15:29 +0100
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
In-Reply-To: <3d4858b2-94da-1ae4-b5e7-7c0e1b970d1e@spatialys.com>
References: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
 <f05ff3fd-543e-e6d2-3c64-0759a09a11b0@xs4all.nl>
 <3d4858b2-94da-1ae4-b5e7-7c0e1b970d1e@spatialys.com>
Message-ID: <e30bc415-0b96-b5ad-0c9a-f6361be2a459@xs4all.nl>

On 2/15/22 22:13, Even Rouault wrote:
> Bas,
>> The gtest download doesn't work for the Debian package as the build 
>> environment doesn't have network:
> 
> installing the "libgtest-dev" package will solve that if you want to 
> build & run the tests. Otherwise run cmake with -DBUILD_TESTING=OFF to 
> disable them

This was not required before.

test/unit/CMakeLists.txt causes the gtest download, but it seems already 
to be present in test/googletest, shouldn't that be used instead?

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From even.rouault at spatialys.com  Tue Feb 15 13:26:07 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Feb 2022 22:26:07 +0100
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
In-Reply-To: <e30bc415-0b96-b5ad-0c9a-f6361be2a459@xs4all.nl>
References: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
 <f05ff3fd-543e-e6d2-3c64-0759a09a11b0@xs4all.nl>
 <3d4858b2-94da-1ae4-b5e7-7c0e1b970d1e@spatialys.com>
 <e30bc415-0b96-b5ad-0c9a-f6361be2a459@xs4all.nl>
Message-ID: <0cc7e69b-8d8b-85fe-9ea7-93d5293673a4@spatialys.com>


>> installing the "libgtest-dev" package will solve that if you want to 
>> build & run the tests. Otherwise run cmake with -DBUILD_TESTING=OFF 
>> to disable them
>
> This was not required before.
Yes, because for autoconf, there was no downloading capabilities so we 
had to vendor googletest in the tree.
> test/unit/CMakeLists.txt causes the gtest download, but it seems 
> already to be present in test/googletest, shouldn't that be used instead?

Actually we should have completely removed test/googletest/src and 
test/googletest/include/gtest. They're a unused remain from autoconf era 
(I've just confirmed that by removing them from my tree). The CMake 
builds have never used them as far as I remember.


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Tue Feb 15 13:42:48 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Feb 2022 22:42:48 +0100
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
In-Reply-To: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
References: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
Message-ID: <5ebdb353-1159-e811-e470-2408daa990b1@spatialys.com>

Kristian,

technically as we didn't break any API or ABI compared to 8.2.1, I 
believe we could have treated that as a feature release w.r.t libtool 
like version numbers, hence with:

set(PROJ_LIBTOOL_CURRENT??? 25)
set(PROJ_LIBTOOL_REVISION?? 0)
set(PROJ_LIBTOOL_AGE??????? 3)

keeping the same SONAME at 25 -3 = 22

(if we exclude the removal of autoconf, this is closer to being a 8.3.0 
than a 9.0.0)

But I don't have a strong enough opinion w.r.t to the above to know if 
it's worth a RC2

Otherwise it builds fine here

Even


Le 15/02/2022 ? 21:23, Kristian Evers a ?crit?:
> All,
>
> I have just uploaded releases candiates for the upcoming releases of PROJ 9.0.0 and PROJ-data 1.9.
>
> The PROJ release candidate is includes various improvements, a few bug fixes and most notably
> it *doesn?t* include autotools makefiles. See the draft release notes below.
>
> The PROJ-data packages includes new grids for the Polish ETRF2000-PL, Norwegian chart datum grids
> and the Belgian hBG18 geoid model.
>
> Download the two release candidates here:
>
>
> https://download.osgeo.org/proj/proj-9.0.0RC1.tar.gz
> https://download.osgeo.org/proj/proj-9.0.0RC1.zip
>
>
> https://download.osgeo.org/proj/proj-data-1.9RC1.tar.gz
> https://download.osgeo.org/proj/proj-data-1.9RC1.zip
>
>
> As usual everyone who uses PROJ is encouraged to try out the release candidates and report
> back their experiences either here on the mailing list or in the issue tracker on GitHub.
>
> /Kristian
>
>
> ??????????????
>
> 9.0.0 Release Notes
> -------------------
>
>   Breaking Changes
>   ----------------
>
>   o Support for the autotools build system has been removed (#3027)
>     See RFC7 for details: https://proj.org/community/rfc/rfc-7.html
>
>   Updates
>   --------
>
>   o Database updates:
>
>    + ESRI projection engine db to version 12.9 (#2943)
>
>    + EPSG v10.054 (#3051)
>
>    + Vertical grid files for PL-geoid-2011, Polish geoid model (#2960)
>
>    + Belgian geoid model hBG18 to grid alternatives (#3044)
>
>   o Add new option to proj_create_crs_to_crs_from_pj method to force +over on
>     transformation operations (#2914)
>
>   o Specify CMAKE_INSTALL_RPATH for macOS; use -rpath LDFLAGS for tests (#3009)
>
>   o Implement Geographic3D to Depth/Geog2D+Depth as used by ETRS89 to CD Norway
>     depth (#3010)
>
>   o Allow PROJ_LIB paths wrapped with double quotes (#3031)
>
>   o Use external gtest by default when possible (#3035)
>
>   o CMake: make BUILD_SHARED_LIBS=ON the default even on Windows (#3042)
>
>   o proj.ini: add a 'ca_bundle_path' variable (#3049)
>
>
>   Bug fixes
>   ----------
>
>   o Fix extremely long parsing time on hostile PROJ strings (#2968)
>
>   o CMake: fix warning with external googletest (#2980)
>
>   o proj_get_crs_info_list_from_database(): report PJ_TYPE_GEODETIC_CRS for
>     IAU_2015 -ocentric geodetic CRS (#3013)
>
>   o peirce_q: rename +type parameter wrongly introduced in 8.2.1 to +shape (#3014)
>
>   o Set more precise error code for parsing errors in proj_create() (#3037)
>
>   o createOperations(): fix transformations from/to a BoundCRS of a
>     DerivedGeographicCRS coming from WKT (#3046)
>
>   o Better deal with importing strings like '+init=epsg:XXXX +over' (#3055)
>
>   o Fix importing CRS definition with +proj=peirce_q and +shape different from
>     square or diamond (#3057)
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From sebastic at xs4all.nl  Tue Feb 15 13:58:38 2022
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 15 Feb 2022 22:58:38 +0100
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
In-Reply-To: <5ebdb353-1159-e811-e470-2408daa990b1@spatialys.com>
References: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
 <5ebdb353-1159-e811-e470-2408daa990b1@spatialys.com>
Message-ID: <283451e9-0e84-dbf8-852e-ebedd4a586af@xs4all.nl>

On 2/15/22 22:42, Even Rouault wrote:
> technically as we didn't break any API or ABI compared to 8.2.1, I 
> believe we could have treated that as a feature release w.r.t libtool 
> like version numbers, hence with:
> 
> set(PROJ_LIBTOOL_CURRENT??? 25)
> set(PROJ_LIBTOOL_REVISION?? 0)
> set(PROJ_LIBTOOL_AGE??????? 3)
> 
> keeping the same SONAME at 25 -3 = 22
> 
> (if we exclude the removal of autoconf, this is closer to being a 8.3.0 
> than a 9.0.0)

Since libtool isn't used any more, you don't need to match it for the 
CMake build. Just make sure to never decrement from SOVERSION (was 22 in 
8.2.1) and increment it when breaking the ABI.

I suggest renameing PROJ_LIBTOOL_CURRENT to PROJ_SOVERSION and drop the 
other two.

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From even.rouault at spatialys.com  Tue Feb 15 14:05:19 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Feb 2022 23:05:19 +0100
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
In-Reply-To: <283451e9-0e84-dbf8-852e-ebedd4a586af@xs4all.nl>
References: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
 <5ebdb353-1159-e811-e470-2408daa990b1@spatialys.com>
 <283451e9-0e84-dbf8-852e-ebedd4a586af@xs4all.nl>
Message-ID: <c4944823-31e8-8422-464e-682d620c1592@spatialys.com>


Le 15/02/2022 ? 22:58, Sebastiaan Couwenberg a ?crit?:
> On 2/15/22 22:42, Even Rouault wrote:
>> technically as we didn't break any API or ABI compared to 8.2.1, I 
>> believe we could have treated that as a feature release w.r.t libtool 
>> like version numbers, hence with:
>>
>> set(PROJ_LIBTOOL_CURRENT??? 25)
>> set(PROJ_LIBTOOL_REVISION?? 0)
>> set(PROJ_LIBTOOL_AGE??????? 3)
>>
>> keeping the same SONAME at 25 -3 = 22
>>
>> (if we exclude the removal of autoconf, this is closer to being a 
>> 8.3.0 than a 9.0.0)
>
> Since libtool isn't used any more, you don't need to match it for the 
> CMake build. Just make sure to never decrement from SOVERSION (was 22 
> in 8.2.1) and increment it when breaking the ABI.
>
> I suggest renameing PROJ_LIBTOOL_CURRENT to PROJ_SOVERSION and drop 
> the other two.
Just noting that if we would have only one number, the generated file 
would be libproj.so.PROJ_SOVERSION, compared to libproj.so.X.Y..Z 
currently, and thus we'd loose the ability to have several versions 
installed in the same directory.
>
> Kind Regards,
>
> Bas
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From sebastic at xs4all.nl  Tue Feb 15 14:18:53 2022
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 15 Feb 2022 23:18:53 +0100
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
In-Reply-To: <c4944823-31e8-8422-464e-682d620c1592@spatialys.com>
References: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
 <5ebdb353-1159-e811-e470-2408daa990b1@spatialys.com>
 <283451e9-0e84-dbf8-852e-ebedd4a586af@xs4all.nl>
 <c4944823-31e8-8422-464e-682d620c1592@spatialys.com>
Message-ID: <86e62d35-bf2a-5416-5149-5cccee8ef38e@xs4all.nl>

On 2/15/22 23:05, Even Rouault wrote:
> Le 15/02/2022 ? 22:58, Sebastiaan Couwenberg a ?crit?:
>> On 2/15/22 22:42, Even Rouault wrote:
>>> technically as we didn't break any API or ABI compared to 8.2.1, I 
>>> believe we could have treated that as a feature release w.r.t libtool 
>>> like version numbers, hence with:
>>>
>>> set(PROJ_LIBTOOL_CURRENT??? 25)
>>> set(PROJ_LIBTOOL_REVISION?? 0)
>>> set(PROJ_LIBTOOL_AGE??????? 3)
>>>
>>> keeping the same SONAME at 25 -3 = 22
>>>
>>> (if we exclude the removal of autoconf, this is closer to being a 
>>> 8.3.0 than a 9.0.0)
>>
>> Since libtool isn't used any more, you don't need to match it for the 
>> CMake build. Just make sure to never decrement from SOVERSION (was 22 
>> in 8.2.1) and increment it when breaking the ABI.
>>
>> I suggest renameing PROJ_LIBTOOL_CURRENT to PROJ_SOVERSION and drop 
>> the other two.
> Just noting that if we would have only one number, the generated file 
> would be libproj.so.PROJ_SOVERSION, compared to libproj.so.X.Y..Z 
> currently, and thus we'd loose the ability to have several versions 
> installed in the same directory.

libproj.so.PROJ_SOVERSION is the SONAME, that has always been the case.

autotools uses magic to determine the X.Y.Z values, you can now just use 
PROJ_VERSION_MAJOR.PROJ_VERSION_MINOR.PROJ_VERSION_PATCH instead.

So you go from (8.2.1):

  /usr/lib/x86_64-linux-gnu/libproj.so -> libproj.so.22.2.1
  /usr/lib/x86_64-linux-gnu/libproj.so.22 -> libproj.so.22.2.1
  /usr/lib/x86_64-linux-gnu/libproj.so.22.2.1

To (9.0.0):

  /usr/lib/x86_64-linux-gnu/libproj.so -> libproj.so.9.0.0
  /usr/lib/x86_64-linux-gnu/libproj.so.25 -> libproj.so.9.0.0
  /usr/lib/x86_64-linux-gnu/libproj.so.9.0.0

Or use SOVERSION 23 instead of 25 as it is in 9.0.0-rc1.

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From kreve at sdfe.dk  Wed Feb 16 00:35:20 2022
From: kreve at sdfe.dk (Kristian Evers)
Date: Wed, 16 Feb 2022 08:35:20 +0000
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
In-Reply-To: <86e62d35-bf2a-5416-5149-5cccee8ef38e@xs4all.nl>
References: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
 <5ebdb353-1159-e811-e470-2408daa990b1@spatialys.com>
 <283451e9-0e84-dbf8-852e-ebedd4a586af@xs4all.nl>
 <c4944823-31e8-8422-464e-682d620c1592@spatialys.com>
 <86e62d35-bf2a-5416-5149-5cccee8ef38e@xs4all.nl>
Message-ID: <1eda51bc78e948c9a1ecc23bed341a5d@sdfe.dk>

Bas, I'm not sure how to understand this.

> So you go from (8.2.1):
> 
>   /usr/lib/x86_64-linux-gnu/libproj.so -> libproj.so.22.2.1
>   /usr/lib/x86_64-linux-gnu/libproj.so.22 -> libproj.so.22.2.1
>   /usr/lib/x86_64-linux-gnu/libproj.so.22.2.1
> 
> To (9.0.0):
> 
>   /usr/lib/x86_64-linux-gnu/libproj.so -> libproj.so.9.0.0
>   /usr/lib/x86_64-linux-gnu/libproj.so.25 -> libproj.so.9.0.0
>   /usr/lib/x86_64-linux-gnu/libproj.so.9.0.0
> 

Are you suggesting that we ONLY use the major, minor and patch version
numbers for the so-files and forget about the SOVERSION from now on?

If that is the case, personally I'm all for it since I've always found the
current/revision/age difficult (as is evident in several release candidates
in the past) but is that a common practice among project that base their
packages on CMake? 

/Kristian


From sebastic at xs4all.nl  Wed Feb 16 03:38:12 2022
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Wed, 16 Feb 2022 12:38:12 +0100
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
In-Reply-To: <1eda51bc78e948c9a1ecc23bed341a5d@sdfe.dk>
References: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
 <5ebdb353-1159-e811-e470-2408daa990b1@spatialys.com>
 <283451e9-0e84-dbf8-852e-ebedd4a586af@xs4all.nl>
 <c4944823-31e8-8422-464e-682d620c1592@spatialys.com>
 <86e62d35-bf2a-5416-5149-5cccee8ef38e@xs4all.nl>
 <1eda51bc78e948c9a1ecc23bed341a5d@sdfe.dk>
Message-ID: <fbe56c24-3f44-d9b5-d371-5c329835fae0@xs4all.nl>

On 2/16/22 09:35, Kristian Evers via PROJ wrote:
> Bas, I'm not sure how to understand this.
> 
>> So you go from (8.2.1):
>>
>>    /usr/lib/x86_64-linux-gnu/libproj.so -> libproj.so.22.2.1
>>    /usr/lib/x86_64-linux-gnu/libproj.so.22 -> libproj.so.22.2.1
>>    /usr/lib/x86_64-linux-gnu/libproj.so.22.2.1
>>
>> To (9.0.0):
>>
>>    /usr/lib/x86_64-linux-gnu/libproj.so -> libproj.so.9.0.0
>>    /usr/lib/x86_64-linux-gnu/libproj.so.25 -> libproj.so.9.0.0
>>    /usr/lib/x86_64-linux-gnu/libproj.so.9.0.0
>>
> 
> Are you suggesting that we ONLY use the major, minor and patch version
> numbers for the so-files and forget about the SOVERSION from now on?

No, SOVERSION is essential as it is part of the SONAME:

  <NAME>.so.<SOVERSION>

Where <NAME> = libproj, and <SOVERSION> = 25

> If that is the case, personally I'm all for it since I've always found the
> current/revision/age difficult (as is evident in several release candidates
> in the past) but is that a common practice among project that base their
> packages on CMake?

autotools determines the versions (both 22 and 22.2.1 in the above 
examples for 8.2.1 with version-info 24:1:2) based on the version-info.

SOVERSION (the 22 in libproj.so.22) is determined by CURRENT minus AGE, 
the filename version (22.2.1 in libproj.so.22.2.1) is determined by 
(CURRENT-AGE).AGE.REVISION or some other magic.

The SOVERSION cannot be decremented and must be incremented every 
release that breaks the ABI. This was 22 in 8.2.1, is currently 25 in 
9.0.0-rc1, and could also be 23 in 9.0.0-rc2.

You configure this in CMake with:

   set_target_properties(proj
     PROPERTIES
     VERSION <X>.<Y>.<Z>
     SOVERSION <N>
   )

This creates the files:

  libproj.so             (symlink to libproj.so.<X>.<Y>.<Z>)
  libproj.so.<N>         (symlink to libproj.so.<X>.<Y>.<Z>)
  libproj.so.<X>.<Y>.<Z>

Now that autotools and libtool are no longer used, you don't have to use 
the complicated logic to determine the VERSION value (<X>.<Y>.<Z>).

For projects that start with CMake and only support that it's common to 
use the project major version for the SOVERSION value and full project 
version for VERSION value.

That cannot be used for PROJ as it is migrating away from autotools and 
cannot decrement the SOVERSION to 9.

This situation is similar to what MapServer did some time ago, that 
currently uses:

   set_target_properties(mapserver
     PROPERTIES
     VERSION ${MapServer_VERSION_STRING}
     SOVERSION 2
   )

This is what I also suggest for PROJ to make library versioning easier 
now that the libtool complications are gone.

Since code speaks louder than words, see the attached patch for an 
example of what I mean.

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1
-------------- next part --------------
A non-text attachment was scrubbed...
Name: proj-soversion.patch
Type: text/x-patch
Size: 1730 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220216/b2c42d8e/attachment.bin>

From kreve at sdfe.dk  Thu Feb 17 01:35:18 2022
From: kreve at sdfe.dk (Kristian Evers)
Date: Thu, 17 Feb 2022 09:35:18 +0000
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
In-Reply-To: <fbe56c24-3f44-d9b5-d371-5c329835fae0@xs4all.nl>
References: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
 <5ebdb353-1159-e811-e470-2408daa990b1@spatialys.com>
 <283451e9-0e84-dbf8-852e-ebedd4a586af@xs4all.nl>
 <c4944823-31e8-8422-464e-682d620c1592@spatialys.com>
 <86e62d35-bf2a-5416-5149-5cccee8ef38e@xs4all.nl>
 <1eda51bc78e948c9a1ecc23bed341a5d@sdfe.dk>
 <fbe56c24-3f44-d9b5-d371-5c329835fae0@xs4all.nl>
Message-ID: <ce1dac6b571c4bee9ebb15d13627c161@sdfe.dk>

Thanks for the thorough explanation, Bas. It's much appreciated!

Even, Mike: I haven't got strong opinions on this. Do you guys think it is
worth the hassle to switch to the model Bas describes here?

/Kristian

> -----Original Message-----
> From: PROJ <proj-bounces at lists.osgeo.org> On Behalf Of Sebastiaan
> Couwenberg
> Sent: 16. februar 2022 12:38
> To: proj at lists.osgeo.org
> Subject: Re: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
> 
> On 2/16/22 09:35, Kristian Evers via PROJ wrote:
> > Bas, I'm not sure how to understand this.
> >
> >> So you go from (8.2.1):
> >>
> >>    /usr/lib/x86_64-linux-gnu/libproj.so -> libproj.so.22.2.1
> >>    /usr/lib/x86_64-linux-gnu/libproj.so.22 -> libproj.so.22.2.1
> >>    /usr/lib/x86_64-linux-gnu/libproj.so.22.2.1
> >>
> >> To (9.0.0):
> >>
> >>    /usr/lib/x86_64-linux-gnu/libproj.so -> libproj.so.9.0.0
> >>    /usr/lib/x86_64-linux-gnu/libproj.so.25 -> libproj.so.9.0.0
> >>    /usr/lib/x86_64-linux-gnu/libproj.so.9.0.0
> >>
> >
> > Are you suggesting that we ONLY use the major, minor and patch version
> > numbers for the so-files and forget about the SOVERSION from now on?
> 
> No, SOVERSION is essential as it is part of the SONAME:
> 
>   <NAME>.so.<SOVERSION>
> 
> Where <NAME> = libproj, and <SOVERSION> = 25
> 
> > If that is the case, personally I'm all for it since I've always found the
> > current/revision/age difficult (as is evident in several release candidates
> > in the past) but is that a common practice among project that base their
> > packages on CMake?
> 
> autotools determines the versions (both 22 and 22.2.1 in the above
> examples for 8.2.1 with version-info 24:1:2) based on the version-info.
> 
> SOVERSION (the 22 in libproj.so.22) is determined by CURRENT minus AGE,
> the filename version (22.2.1 in libproj.so.22.2.1) is determined by
> (CURRENT-AGE).AGE.REVISION or some other magic.
> 
> The SOVERSION cannot be decremented and must be incremented every
> release that breaks the ABI. This was 22 in 8.2.1, is currently 25 in
> 9.0.0-rc1, and could also be 23 in 9.0.0-rc2.
> 
> You configure this in CMake with:
> 
>    set_target_properties(proj
>      PROPERTIES
>      VERSION <X>.<Y>.<Z>
>      SOVERSION <N>
>    )
> 
> This creates the files:
> 
>   libproj.so             (symlink to libproj.so.<X>.<Y>.<Z>)
>   libproj.so.<N>         (symlink to libproj.so.<X>.<Y>.<Z>)
>   libproj.so.<X>.<Y>.<Z>
> 
> Now that autotools and libtool are no longer used, you don't have to use
> the complicated logic to determine the VERSION value (<X>.<Y>.<Z>).
> 
> For projects that start with CMake and only support that it's common to
> use the project major version for the SOVERSION value and full project
> version for VERSION value.
> 
> That cannot be used for PROJ as it is migrating away from autotools and
> cannot decrement the SOVERSION to 9.
> 
> This situation is similar to what MapServer did some time ago, that
> currently uses:
> 
>    set_target_properties(mapserver
>      PROPERTIES
>      VERSION ${MapServer_VERSION_STRING}
>      SOVERSION 2
>    )
> 
> This is what I also suggest for PROJ to make library versioning easier
> now that the libtool complications are gone.
> 
> Since code speaks louder than words, see the attached patch for an
> example of what I mean.
> 
> Kind Regards,
> 
> Bas
> 
> --
>   GPG Key ID: 4096R/6750F10AE88D4AF1
> Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From even.rouault at spatialys.com  Thu Feb 17 01:51:57 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Feb 2022 10:51:57 +0100
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
In-Reply-To: <ce1dac6b571c4bee9ebb15d13627c161@sdfe.dk>
References: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
 <5ebdb353-1159-e811-e470-2408daa990b1@spatialys.com>
 <283451e9-0e84-dbf8-852e-ebedd4a586af@xs4all.nl>
 <c4944823-31e8-8422-464e-682d620c1592@spatialys.com>
 <86e62d35-bf2a-5416-5149-5cccee8ef38e@xs4all.nl>
 <1eda51bc78e948c9a1ecc23bed341a5d@sdfe.dk>
 <fbe56c24-3f44-d9b5-d371-5c329835fae0@xs4all.nl>
 <ce1dac6b571c4bee9ebb15d13627c161@sdfe.dk>
Message-ID: <90052ff7-8804-6c6e-f177-d2b174578eb3@spatialys.com>


Le 17/02/2022 ? 10:35, Kristian Evers via PROJ a ?crit?:
> Thanks for the thorough explanation, Bas. It's much appreciated!
>
> Even, Mike: I haven't got strong opinions on this. Do you guys think it is
> worth the hassle to switch to the model Bas describes here?
I also don't have a strong opinion. One advantage is that it makes it 
more obvious which PROJ version the lib is. The only potential issue I 
can imagine is that if some day we have a PROJ 22.2.1 version installed 
together with PROJ 8.2.1, they would both be libproj.so.22.2.1, but 
that's probably mostly a theoretical concern...
>
> /Kristian
>
>> -----Original Message-----
>> From: PROJ <proj-bounces at lists.osgeo.org> On Behalf Of Sebastiaan
>> Couwenberg
>> Sent: 16. februar 2022 12:38
>> To: proj at lists.osgeo.org
>> Subject: Re: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
>>
>> On 2/16/22 09:35, Kristian Evers via PROJ wrote:
>>> Bas, I'm not sure how to understand this.
>>>
>>>> So you go from (8.2.1):
>>>>
>>>>     /usr/lib/x86_64-linux-gnu/libproj.so -> libproj.so.22.2.1
>>>>     /usr/lib/x86_64-linux-gnu/libproj.so.22 -> libproj.so.22.2.1
>>>>     /usr/lib/x86_64-linux-gnu/libproj.so.22.2.1
>>>>
>>>> To (9.0.0):
>>>>
>>>>     /usr/lib/x86_64-linux-gnu/libproj.so -> libproj.so.9.0.0
>>>>     /usr/lib/x86_64-linux-gnu/libproj.so.25 -> libproj.so.9.0.0
>>>>     /usr/lib/x86_64-linux-gnu/libproj.so.9.0.0
>>>>
>>> Are you suggesting that we ONLY use the major, minor and patch version
>>> numbers for the so-files and forget about the SOVERSION from now on?
>> No, SOVERSION is essential as it is part of the SONAME:
>>
>>    <NAME>.so.<SOVERSION>
>>
>> Where <NAME> = libproj, and <SOVERSION> = 25
>>
>>> If that is the case, personally I'm all for it since I've always found the
>>> current/revision/age difficult (as is evident in several release candidates
>>> in the past) but is that a common practice among project that base their
>>> packages on CMake?
>> autotools determines the versions (both 22 and 22.2.1 in the above
>> examples for 8.2.1 with version-info 24:1:2) based on the version-info.
>>
>> SOVERSION (the 22 in libproj.so.22) is determined by CURRENT minus AGE,
>> the filename version (22.2.1 in libproj.so.22.2.1) is determined by
>> (CURRENT-AGE).AGE.REVISION or some other magic.
>>
>> The SOVERSION cannot be decremented and must be incremented every
>> release that breaks the ABI. This was 22 in 8.2.1, is currently 25 in
>> 9.0.0-rc1, and could also be 23 in 9.0.0-rc2.
>>
>> You configure this in CMake with:
>>
>>     set_target_properties(proj
>>       PROPERTIES
>>       VERSION <X>.<Y>.<Z>
>>       SOVERSION <N>
>>     )
>>
>> This creates the files:
>>
>>    libproj.so             (symlink to libproj.so.<X>.<Y>.<Z>)
>>    libproj.so.<N>         (symlink to libproj.so.<X>.<Y>.<Z>)
>>    libproj.so.<X>.<Y>.<Z>
>>
>> Now that autotools and libtool are no longer used, you don't have to use
>> the complicated logic to determine the VERSION value (<X>.<Y>.<Z>).
>>
>> For projects that start with CMake and only support that it's common to
>> use the project major version for the SOVERSION value and full project
>> version for VERSION value.
>>
>> That cannot be used for PROJ as it is migrating away from autotools and
>> cannot decrement the SOVERSION to 9.
>>
>> This situation is similar to what MapServer did some time ago, that
>> currently uses:
>>
>>     set_target_properties(mapserver
>>       PROPERTIES
>>       VERSION ${MapServer_VERSION_STRING}
>>       SOVERSION 2
>>     )
>>
>> This is what I also suggest for PROJ to make library versioning easier
>> now that the libtool complications are gone.
>>
>> Since code speaks louder than words, see the attached patch for an
>> example of what I mean.
>>
>> Kind Regards,
>>
>> Bas
>>
>> --
>>    GPG Key ID: 4096R/6750F10AE88D4AF1
>> Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From mwtoews at gmail.com  Thu Feb 17 02:01:02 2022
From: mwtoews at gmail.com (Mike Taves)
Date: Thu, 17 Feb 2022 23:01:02 +1300
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
In-Reply-To: <ce1dac6b571c4bee9ebb15d13627c161@sdfe.dk>
References: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
 <5ebdb353-1159-e811-e470-2408daa990b1@spatialys.com>
 <283451e9-0e84-dbf8-852e-ebedd4a586af@xs4all.nl>
 <c4944823-31e8-8422-464e-682d620c1592@spatialys.com>
 <86e62d35-bf2a-5416-5149-5cccee8ef38e@xs4all.nl>
 <1eda51bc78e948c9a1ecc23bed341a5d@sdfe.dk>
 <fbe56c24-3f44-d9b5-d371-5c329835fae0@xs4all.nl>
 <ce1dac6b571c4bee9ebb15d13627c161@sdfe.dk>
Message-ID: <CAM2FmMoFPWYP_0+o+Gw5nk0WHtLdhq8FJoC+DE6WBycoSyUigg@mail.gmail.com>

On Thu, 17 Feb 2022 at 22:35, Kristian Evers via PROJ
<proj at lists.osgeo.org> wrote:
>
> Thanks for the thorough explanation, Bas. It's much appreciated!
>
> Even, Mike: I haven't got strong opinions on this. Do you guys think it is
> worth the hassle to switch to the model Bas describes here?

Thanks for the ideas Bas! I like it, as it's much simpler to see one
incrementer.

If we decide to keep the incremented SONAME, then yes, let's implement
a simpler versioning for PROJ 9.0RC2. But if we decide to keep the
previous SONAME (due to no API/ABI break), then keep it libtool-style
until the next API/ABI break.

From kreve at sdfe.dk  Thu Feb 17 02:08:59 2022
From: kreve at sdfe.dk (Kristian Evers)
Date: Thu, 17 Feb 2022 10:08:59 +0000
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
In-Reply-To: <CAM2FmMoFPWYP_0+o+Gw5nk0WHtLdhq8FJoC+DE6WBycoSyUigg@mail.gmail.com>
References: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
 <5ebdb353-1159-e811-e470-2408daa990b1@spatialys.com>
 <283451e9-0e84-dbf8-852e-ebedd4a586af@xs4all.nl>
 <c4944823-31e8-8422-464e-682d620c1592@spatialys.com>
 <86e62d35-bf2a-5416-5149-5cccee8ef38e@xs4all.nl>
 <1eda51bc78e948c9a1ecc23bed341a5d@sdfe.dk>
 <fbe56c24-3f44-d9b5-d371-5c329835fae0@xs4all.nl>
 <ce1dac6b571c4bee9ebb15d13627c161@sdfe.dk>
 <CAM2FmMoFPWYP_0+o+Gw5nk0WHtLdhq8FJoC+DE6WBycoSyUigg@mail.gmail.com>
Message-ID: <38529aced3314394ac65a18123e1f6a7@sdfe.dk>

Sounds to me like there's a preference for Bas' idea.

Let's keep the incremented SONAME and move forward
using semantic versioning as Bas suggests.

Mike, can you do the necessary changes in the CMake setup?

/Kristian


> -----Original Message-----
> From: Mike Taves <mwtoews at gmail.com>
> Sent: 17. februar 2022 11:01
> To: Kristian Evers <kreve at sdfe.dk>
> Cc: Sebastiaan Couwenberg <sebastic at xs4all.nl>; proj at lists.osgeo.org
> Subject: Re: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
> 
> On Thu, 17 Feb 2022 at 22:35, Kristian Evers via PROJ
> <proj at lists.osgeo.org> wrote:
> >
> > Thanks for the thorough explanation, Bas. It's much appreciated!
> >
> > Even, Mike: I haven't got strong opinions on this. Do you guys think it is
> > worth the hassle to switch to the model Bas describes here?
> 
> Thanks for the ideas Bas! I like it, as it's much simpler to see one
> incrementer.
> 
> If we decide to keep the incremented SONAME, then yes, let's implement
> a simpler versioning for PROJ 9.0RC2. But if we decide to keep the
> previous SONAME (due to no API/ABI break), then keep it libtool-style
> until the next API/ABI break.

From j1 at jimenezshaw.com  Thu Feb 17 02:06:55 2022
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 17 Feb 2022 11:06:55 +0100
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
In-Reply-To: <CAM2FmMoFPWYP_0+o+Gw5nk0WHtLdhq8FJoC+DE6WBycoSyUigg@mail.gmail.com>
References: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
 <5ebdb353-1159-e811-e470-2408daa990b1@spatialys.com>
 <283451e9-0e84-dbf8-852e-ebedd4a586af@xs4all.nl>
 <c4944823-31e8-8422-464e-682d620c1592@spatialys.com>
 <86e62d35-bf2a-5416-5149-5cccee8ef38e@xs4all.nl>
 <1eda51bc78e948c9a1ecc23bed341a5d@sdfe.dk>
 <fbe56c24-3f44-d9b5-d371-5c329835fae0@xs4all.nl>
 <ce1dac6b571c4bee9ebb15d13627c161@sdfe.dk>
 <CAM2FmMoFPWYP_0+o+Gw5nk0WHtLdhq8FJoC+DE6WBycoSyUigg@mail.gmail.com>
Message-ID: <CADRrdKt++S-Yu5SKKH8KdLhm1w8PjybscKZiWtPo1F1J3heK3g@mail.gmail.com>

One question. Is there an "automatic" way to know if there is an ABI (or
API) break, or is it just based on the developers' criterion?

What if there is such a break but we do not notice or forget or whatever?

Cheers,
Javier.

Mike Taves <mwtoews at gmail.com> schrieb am Do., 17. Feb. 2022, 11:01:

> On Thu, 17 Feb 2022 at 22:35, Kristian Evers via PROJ
> <proj at lists.osgeo.org> wrote:
> >
> > Thanks for the thorough explanation, Bas. It's much appreciated!
> >
> > Even, Mike: I haven't got strong opinions on this. Do you guys think it
> is
> > worth the hassle to switch to the model Bas describes here?
>
> Thanks for the ideas Bas! I like it, as it's much simpler to see one
> incrementer.
>
> If we decide to keep the incremented SONAME, then yes, let's implement
> a simpler versioning for PROJ 9.0RC2. But if we decide to keep the
> previous SONAME (due to no API/ABI break), then keep it libtool-style
> until the next API/ABI break.
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220217/1c8345c0/attachment.html>

From even.rouault at spatialys.com  Thu Feb 17 02:36:23 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Feb 2022 11:36:23 +0100
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
In-Reply-To: <CADRrdKt++S-Yu5SKKH8KdLhm1w8PjybscKZiWtPo1F1J3heK3g@mail.gmail.com>
References: <00A04322-7A9C-42AE-8DC2-ABE3F834B041@gmail.com>
 <5ebdb353-1159-e811-e470-2408daa990b1@spatialys.com>
 <283451e9-0e84-dbf8-852e-ebedd4a586af@xs4all.nl>
 <c4944823-31e8-8422-464e-682d620c1592@spatialys.com>
 <86e62d35-bf2a-5416-5149-5cccee8ef38e@xs4all.nl>
 <1eda51bc78e948c9a1ecc23bed341a5d@sdfe.dk>
 <fbe56c24-3f44-d9b5-d371-5c329835fae0@xs4all.nl>
 <ce1dac6b571c4bee9ebb15d13627c161@sdfe.dk>
 <CAM2FmMoFPWYP_0+o+Gw5nk0WHtLdhq8FJoC+DE6WBycoSyUigg@mail.gmail.com>
 <CADRrdKt++S-Yu5SKKH8KdLhm1w8PjybscKZiWtPo1F1J3heK3g@mail.gmail.com>
Message-ID: <de1ed436-25ed-baac-d3bc-cb5172bb8855@spatialys.com>

Javier,

Le 17/02/2022 ? 11:06, Javier Jimenez Shaw a ?crit?:
> One question. Is there an "automatic" way to know if there is an ABI 
> (or API) break, or is it just based on the developers' criterion?

The abi-tracker tool could be used for that. The openjpeg project uses 
it through its CI 
(https://github.com/uclouvain/openjpeg/blob/master/tools/travis-ci/abi-check.sh), 
but it requires additional effort at release time since you need to 
upload the report of the new version in some repository, and that's a 
potential new point of failure in CI.

And the problem with automated tools: looking at the output of 
https://abi-laboratory.pro/index.php?view=compat_report&l=proj&v1=7.1.0&v2=7.1.1&obj=d1298&kind=abi#Symbol_Problems_Medium 
, it flags the change of the size of the char pj_release[] as a 
potential issue...

IMHO, analyzing the output of "diff -Nur ${prefix_old_version}/include 
${prefix_new_version}/include" just before the release and using your 
best judgment has probably the better benefit/effort ratio.? Or use 
abi-tracker locally to get assistance.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From Roger.Bivand at nhh.no  Thu Feb 17 05:06:52 2022
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 17 Feb 2022 13:06:52 +0000
Subject: [PROJ] PROJ 9.0.0RC1 & PROJ-data 1.9RC1
Message-ID: <SV0P279MB04759B0571819FD65F23F882EE369@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>

Reverse dependency checks for > 1100 R spatial packages show no obvious problems (ran with GDAL 3.5.0dev to save time).

Roger

From martin.desruisseaux at geomatys.com  Mon Feb 21 06:22:16 2022
From: martin.desruisseaux at geomatys.com (Martin Desruisseaux)
Date: Mon, 21 Feb 2022 15:22:16 +0100
Subject: [PROJ] OGC/OSGeo/ASF code sprint: GIGS and GGXF proposals
Message-ID: <8a025c8d-6733-0452-c928-6f6b79f30931@geomatys.com>

Hello all

The joint OGC/OSGeo/ASF code sprint will start in 2 weeks, with a 
pre-event webinar in 2 days (Wednesday this week). This event is free 
for anyone to participate, and thanks to Ordnance Survey sponsor a 
little bit of funding will be available for participants who apply and 
who are selected as eligible (more details to be provided by OGC later). 
The schedule is below:

    https://github.com/opengeospatial/developer-events/wiki/2022-Joint-OGC-%E2%80%93-OSGeo-%E2%80%93-ASF-Code-Sprint

Any development activity related to OGC standards can be proposed. Below 
are 2 proposals that may be relevant to PROJ:


      Proposal: GGXF implementation

The Gridded Geodetic data eXchange Format (GGXF) is an OGC 
standardization effort for distributing datum shift grids, geoid models, 
and more geodetic gridded data. It has the same goal than the GeoTIFF 
files that PROJ currently uses for this purpose. Chris Crook, who worked 
on the PROJ GeoTIFF format, is also a very active participant to the 
GGXF effort, together with Roger Lott, the main editor of ISO 19111 
(referencing by coordinates) and ISO 19162 (WKT 2) standards. Some other 
participants in the working group are from ESRI or from International 
Association of Geodesy (IAG). The GGXF standard uses the netCDF-4 
format. A draft of the GGXF standard and a prototype in Python are 
available. The code sprint would be an opportunity for volunteers for 
starting an implementation in PROJ, with Chris, Roger and other peoples 
present for answering questions and collecting feedback. For more 
details, see:

    https://github.com/opengeospatial/developer-events/tree/master/2022/Joint-OGC-OSGeo-ASF-Code-Sprint%202022/ideas/GGXF


      Proposal: GIGS implementation

The Geospatial Integrity of Geoscience Software (GIGS) is an IOGP effort 
for providing tests for coordinate operations. IOGP is the organization 
maintaining the widely-used EPSG geodetic database. GIGS tests are 
available as dataset (CSV files), web service and executable JUnit 
tests. The JUnit tests can be executed on any GeoAPI 3.0 implementation, 
including PROJ through the PROJ-JNI binding. The Java language is used 
for GIGS tests because it is currently the only language providing 
implementation-neutral API for referencing services (Python could be 
another candidate but the GeoAPI interfaces in Python are still in 
development). The code sprint would be an opportunity for volunteers to 
help upgrading to GIGS 2 and complete the tests (in Java), tests them on 
PROJ, and continue development of Python interfaces.

    https://github.com/opengeospatial/developer-events/tree/master/2022/Joint-OGC-OSGeo-ASF-Code-Sprint%202022/ideas/GIGS


      Mentoring

In addition to volunteers for above proposals, the PROJ project can also 
propose tutorials for beginners. On the mentor stream, developers will 
have the opportunity to give their first steps using the standards and 
projects, and hopefully this will build an engagement which will 
continue past the code sprint. More information are there:

    https://dev.to/doublebyte/2nd-open-software-and-open-standards-code-sprint-call-for-mentors-1g0o


Home page and registration: https://developer.ogc.org/sprints/15/

 ??? Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220221/726a445c/attachment.html>

From even.rouault at spatialys.com  Mon Feb 21 07:18:27 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 21 Feb 2022 16:18:27 +0100
Subject: [PROJ] OGC/OSGeo/ASF code sprint: GIGS and GGXF proposals
In-Reply-To: <8a025c8d-6733-0452-c928-6f6b79f30931@geomatys.com>
References: <8a025c8d-6733-0452-c928-6f6b79f30931@geomatys.com>
Message-ID: <642af642-83fa-3267-7dc5-09ea5a422e05@spatialys.com>

Hi Martin,

thanks for letting us know.

A few points:

- I'm not sure the PROJ project has a plan to adopt GGXF as being a 
format it would read out-of-the-box, mostly because we're quite happy 
with the Geodetic TIFF Grids (GTG) that we have been using in production 
for more than 2 years now, including in a CDN context. And also because 
reading netCDF-4 file would mean to add a new heavy dependency to PROJ. 
If GGXF eventually comes into common usage, we'll probably use a 
converter script to create GTG files from it, unless it comes with real 
unique features, used in practice, that we can't reasonably port to GTG. 
So if someone is interested by that activity in the context of this code 
sprint, developing such script, probably using netcdf4-python to read 
GGXF and GDAL Python bindings to write GeoTIFF, would probably the most 
useful outcome.

- regarding GIGS, PROJ has a subset of (I'm not sure which version of) 
them as scripts executable by its gie utility in 
https://github.com/OSGeo/PROJ/tree/master/test/gigs

Even

Le 21/02/2022 ? 15:22, Martin Desruisseaux a ?crit?:
>
> Hello all
>
> The joint OGC/OSGeo/ASF code sprint will start in 2 weeks, with a 
> pre-event webinar in 2 days (Wednesday this week). This event is free 
> for anyone to participate, and thanks to Ordnance Survey sponsor a 
> little bit of funding will be available for participants who apply and 
> who are selected as eligible (more details to be provided by OGC 
> later). The schedule is below:
>
>     https://github.com/opengeospatial/developer-events/wiki/2022-Joint-OGC-%E2%80%93-OSGeo-%E2%80%93-ASF-Code-Sprint
>
> Any development activity related to OGC standards can be proposed. 
> Below are 2 proposals that may be relevant to PROJ:
>
>
>       Proposal: GGXF implementation
>
> The Gridded Geodetic data eXchange Format (GGXF) is an OGC 
> standardization effort for distributing datum shift grids, geoid 
> models, and more geodetic gridded data. It has the same goal than the 
> GeoTIFF files that PROJ currently uses for this purpose. Chris Crook, 
> who worked on the PROJ GeoTIFF format, is also a very active 
> participant to the GGXF effort, together with Roger Lott, the main 
> editor of ISO 19111 (referencing by coordinates) and ISO 19162 (WKT 2) 
> standards. Some other participants in the working group are from ESRI 
> or from International Association of Geodesy (IAG). The GGXF standard 
> uses the netCDF-4 format. A draft of the GGXF standard and a prototype 
> in Python are available. The code sprint would be an opportunity for 
> volunteers for starting an implementation in PROJ, with Chris, Roger 
> and other peoples present for answering questions and collecting 
> feedback. For more details, see:
>
>     https://github.com/opengeospatial/developer-events/tree/master/2022/Joint-OGC-OSGeo-ASF-Code-Sprint%202022/ideas/GGXF
>
>
>       Proposal: GIGS implementation
>
> The Geospatial Integrity of Geoscience Software (GIGS) is an IOGP 
> effort for providing tests for coordinate operations. IOGP is the 
> organization maintaining the widely-used EPSG geodetic database. GIGS 
> tests are available as dataset (CSV files), web service and executable 
> JUnit tests. The JUnit tests can be executed on any GeoAPI 3.0 
> implementation, including PROJ through the PROJ-JNI binding. The Java 
> language is used for GIGS tests because it is currently the only 
> language providing implementation-neutral API for referencing services 
> (Python could be another candidate but the GeoAPI interfaces in Python 
> are still in development). The code sprint would be an opportunity for 
> volunteers to help upgrading to GIGS 2 and complete the tests (in 
> Java), tests them on PROJ, and continue development of Python interfaces.
>
>     https://github.com/opengeospatial/developer-events/tree/master/2022/Joint-OGC-OSGeo-ASF-Code-Sprint%202022/ideas/GIGS
>
>
>       Mentoring
>
> In addition to volunteers for above proposals, the PROJ project can 
> also propose tutorials for beginners. On the mentor stream, developers 
> will have the opportunity to give their first steps using the 
> standards and projects, and hopefully this will build an engagement 
> which will continue past the code sprint. More information are there:
>
>     https://dev.to/doublebyte/2nd-open-software-and-open-standards-code-sprint-call-for-mentors-1g0o
>
>
> Home page and registration: https://developer.ogc.org/sprints/15/
>
> ??? Martin
>
>
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220221/52e7a072/attachment.html>

From martin.desruisseaux at geomatys.com  Mon Feb 21 09:30:56 2022
From: martin.desruisseaux at geomatys.com (Martin Desruisseaux)
Date: Mon, 21 Feb 2022 18:30:56 +0100
Subject: [PROJ] OGC/OSGeo/ASF code sprint: GIGS and GGXF proposals
In-Reply-To: <642af642-83fa-3267-7dc5-09ea5a422e05@spatialys.com>
References: <8a025c8d-6733-0452-c928-6f6b79f30931@geomatys.com>
 <642af642-83fa-3267-7dc5-09ea5a422e05@spatialys.com>
Message-ID: <40bbb806-9d0f-3c7d-44e2-609a1ce3868a@geomatys.com>

Le 21/02/2022 ? 16:18, Even Rouault a ?crit?:

> regarding GIGS, PROJ has a subset of (I'm not sure which version of) 
> them as scripts executable by its gie utility in 
> https://github.com/OSGeo/PROJ/tree/master/test/gigs
>
Yes, but if I understood correctly it can be run only on PROJ, isn't it?

 ??? Martin



From even.rouault at spatialys.com  Mon Feb 21 09:37:01 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 21 Feb 2022 18:37:01 +0100
Subject: [PROJ] OGC/OSGeo/ASF code sprint: GIGS and GGXF proposals
In-Reply-To: <40bbb806-9d0f-3c7d-44e2-609a1ce3868a@geomatys.com>
References: <8a025c8d-6733-0452-c928-6f6b79f30931@geomatys.com>
 <642af642-83fa-3267-7dc5-09ea5a422e05@spatialys.com>
 <40bbb806-9d0f-3c7d-44e2-609a1ce3868a@geomatys.com>
Message-ID: <5c58815a-77fb-d07d-4609-6185a6166d26@spatialys.com>


Le 21/02/2022 ? 18:30, Martin Desruisseaux a ?crit?:
> Le 21/02/2022 ? 16:18, Even Rouault a ?crit?:
>
>> regarding GIGS, PROJ has a subset of (I'm not sure which version of) 
>> them as scripts executable by its gie utility in 
>> https://github.com/OSGeo/PROJ/tree/master/test/gigs
>>
> Yes, but if I understood correctly it can be run only on PROJ, isn't it?

yes, I mentioned it to give a more complete picture on the context, as 
this is the way we give some GIGS testing in our regression and CI process.

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From martin.desruisseaux at geomatys.com  Tue Feb 22 12:40:20 2022
From: martin.desruisseaux at geomatys.com (Martin Desruisseaux)
Date: Tue, 22 Feb 2022 21:40:20 +0100
Subject: [PROJ] OGC/OSGeo/ASF code sprint funding
In-Reply-To: <2754f1c1-67ec-3a47-8875-6733fc5d28cd@geomatys.com>
References: <2754f1c1-67ec-3a47-8875-6733fc5d28cd@geomatys.com>
Message-ID: <d9e5e899-1b0d-840e-2f0c-8e1b5decca08@geomatys.com>

Hello

Reminder, the code sprint pre-event webinar 
<https://github.com/opengeospatial/developer-events/wiki/2022-Joint-OGC-%E2%80%93-OSGeo-%E2%80%93-ASF-Code-Sprint> 
is tomorrow (in less than 18 hours). OGC has announced availability of 
some funding for participants. Below is a copy of their conditions:

There may be some funding available for participants to offset their 
labor costs.

To be eligible for the funding, the participants:

  * must be OGC, OSGeo, or ASF Members in good standing or be employed
    by a Member in good standing
  * must have registered to participate in the sprint before 07:00am EST
    on March 8th, 2022
  * must spend at least 16 hours participating in the sprint during the
    three-day sprint
  * must complete and submit an application for participant funding
    before 10:00am EST on March 8th, 2022

Note that applying for the funding is not a guarantee that any funding 
will be received.

One application form may be submitted per participating 
organization/company. Therefore, even if multiple individuals from the 
same organisation/company participate, only one application form will be 
accepted.

Successful applicants will be notified by 05:00pm EST on March 15th, 2022.

Application for the participant funding is at https://t.co/zxoN70sKLF

 ??? Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220222/ef1676db/attachment.html>

From kristianevers at gmail.com  Wed Feb 23 11:04:40 2022
From: kristianevers at gmail.com (Kristian Evers)
Date: Wed, 23 Feb 2022 20:04:40 +0100
Subject: [PROJ] PROJ 9.0.0RC2 & PROJ-data 1.9RC2
Message-ID: <8EC5E56A-10B5-4881-B926-99D108D958F8@gmail.com>

All,

After a round of feedback on the first release candidates a new set of RCs are available.

For the PROJ release candidate, the SOVERSION have been modified to now be aligned
with the version number and tests that require access to the internet are only run if access
is available.

The new PROJ-data release candidate fixes a few spelling errors in the READMEs.

Download the archives here:

https://download.osgeo.org/proj/proj-9.0.0RC2.tar.gz <https://download.osgeo.org/proj/proj-9.0.0RC2.tar.gz>
https://download.osgeo.org/proj/proj-9.0.0RC2.zip <https://download.osgeo.org/proj/proj-9.0.0RC2.zip>

https://download.osgeo.org/proj/proj-data-1.9RC2.tar.gz <https://download.osgeo.org/proj/proj-data-1.9RC2.tar.gz>
https://download.osgeo.org/proj/proj-data-1.9RC2.zip <https://download.osgeo.org/proj/proj-data-1.9RC2.zip>

I hope this set of RCs will be the last but don?t hesitate to report any issues may
stumble upon.

/Kristian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220223/ff6b5b41/attachment.html>

From kristianevers at gmail.com  Sun Feb 27 21:57:40 2022
From: kristianevers at gmail.com (Kristian Evers)
Date: Mon, 28 Feb 2022 06:57:40 +0100
Subject: [PROJ] PROJ 9.0.0RC2 & PROJ-data 1.9RC2
In-Reply-To: <8EC5E56A-10B5-4881-B926-99D108D958F8@gmail.com>
References: <8EC5E56A-10B5-4881-B926-99D108D958F8@gmail.com>
Message-ID: <33E0656B-FEF5-45EE-A502-F2C693C47075@gmail.com>

PSC members,

No issues has been reported with the second round of release candidates,
I therefore motion they be promoted to final releases.

I?ll start with my +1.

/Kristian

> On 23 Feb 2022, at 20:04, Kristian Evers <kristianevers at gmail.com> wrote:
> 
> All,
> 
> After a round of feedback on the first release candidates a new set of RCs are available.
> 
> For the PROJ release candidate, the SOVERSION have been modified to now be aligned
> with the version number and tests that require access to the internet are only run if access
> is available.
> 
> The new PROJ-data release candidate fixes a few spelling errors in the READMEs.
> 
> Download the archives here:
> 
> https://download.osgeo.org/proj/proj-9.0.0RC2.tar.gz <https://download.osgeo.org/proj/proj-9.0.0RC2.tar.gz>
> https://download.osgeo.org/proj/proj-9.0.0RC2.zip <https://download.osgeo.org/proj/proj-9.0.0RC2.zip>
> 
> https://download.osgeo.org/proj/proj-data-1.9RC2.tar.gz <https://download.osgeo.org/proj/proj-data-1.9RC2.tar.gz>
> https://download.osgeo.org/proj/proj-data-1.9RC2.zip <https://download.osgeo.org/proj/proj-data-1.9RC2.zip>
> 
> I hope this set of RCs will be the last but don?t hesitate to report any issues may
> stumble upon.
> 
> /Kristian

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220228/e041c4ca/attachment.html>

From knudsen.thomas at gmail.com  Mon Feb 28 00:55:51 2022
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Mon, 28 Feb 2022 09:55:51 +0100
Subject: [PROJ] PROJ 9.0.0RC2 & PROJ-data 1.9RC2
In-Reply-To: <33E0656B-FEF5-45EE-A502-F2C693C47075@gmail.com>
References: <8EC5E56A-10B5-4881-B926-99D108D958F8@gmail.com>
 <33E0656B-FEF5-45EE-A502-F2C693C47075@gmail.com>
Message-ID: <CAH0YoEOTHKwp0z+b3pTp-ADeXZ9rBiuk4r0940Co3jxmXF-RDg@mail.gmail.com>

+1

/Thomas

Den man. 28. feb. 2022 kl. 06.57 skrev Kristian Evers <
kristianevers at gmail.com>:

> PSC members,
>
> No issues has been reported with the second round of release candidates,
> I therefore motion they be promoted to final releases.
>
> I?ll start with my +1.
>
> /Kristian
>
> On 23 Feb 2022, at 20:04, Kristian Evers <kristianevers at gmail.com> wrote:
>
> All,
>
> After a round of feedback on the first release candidates a new set of RCs
> are available.
>
> For the PROJ release candidate, the SOVERSION have been modified to now be
> aligned
> with the version number and tests that require access to the internet are
> only run if access
> is available.
>
> The new PROJ-data release candidate fixes a few spelling errors in the
> READMEs.
>
> Download the archives here:
>
> https://download.osgeo.org/proj/proj-9.0.0RC2.tar.gz
> https://download.osgeo.org/proj/proj-9.0.0RC2.zip
>
> https://download.osgeo.org/proj/proj-data-1.9RC2.tar.gz
> https://download.osgeo.org/proj/proj-data-1.9RC2.zip
>
> I hope this set of RCs will be the last but don?t hesitate to report any
> issues may
> stumble upon.
>
> /Kristian
>
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220228/4577ef39/attachment.html>

From charles.karney at gmail.com  Mon Feb 28 02:28:58 2022
From: charles.karney at gmail.com (Charles Karney)
Date: Mon, 28 Feb 2022 05:28:58 -0500
Subject: [PROJ] PROJ 9.0.0RC2 & PROJ-data 1.9RC2
In-Reply-To: <33E0656B-FEF5-45EE-A502-F2C693C47075@gmail.com>
References: <8EC5E56A-10B5-4881-B926-99D108D958F8@gmail.com>
 <33E0656B-FEF5-45EE-A502-F2C693C47075@gmail.com>
Message-ID: <ae4d95ae-db46-32ff-fe81-5597ac9d09fe@karney.com>

+1

   --Charles

On 2/28/22 00:57, Kristian Evers wrote:
> PSC members,
> 
> No issues has been reported with the second round of release candidates,
> I therefore motion they be promoted to final releases.
> 
> I?ll start with my +1.
> 
> /Kristian
> 
>> On 23 Feb 2022, at 20:04, Kristian Evers <kristianevers at gmail.com 
>> <mailto:kristianevers at gmail.com>> wrote:
>>
>> All,
>>
>> After a round of feedback on the first release candidates a new set of 
>> RCs are available.
>>
>> For the PROJ release candidate, the SOVERSION have been modified to 
>> now be aligned
>> with the version number and tests that require access to the internet 
>> are only run if access
>> is available.
>>
>> The new PROJ-data release candidate fixes a few spelling errors in the 
>> READMEs.
>>
>> Download the archives here:
>>
>> https://download.osgeo.org/proj/proj-9.0.0RC2.tar.gz 
>> <https://download.osgeo.org/proj/proj-9.0.0RC2.tar.gz>
>> https://download.osgeo.org/proj/proj-9.0.0RC2.zip 
>> <https://download.osgeo.org/proj/proj-9.0.0RC2.zip>
>>
>> https://download.osgeo.org/proj/proj-data-1.9RC2.tar.gz 
>> <https://download.osgeo.org/proj/proj-data-1.9RC2.tar.gz>
>> https://download.osgeo.org/proj/proj-data-1.9RC2.zip 
>> <https://download.osgeo.org/proj/proj-data-1.9RC2.zip>
>>
>> I hope this set of RCs will be the last but don?t hesitate to report 
>> any issues may
>> stumble upon.
>>
>> /Kristian
> 
> 
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

From even.rouault at spatialys.com  Mon Feb 28 09:13:11 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 28 Feb 2022 18:13:11 +0100
Subject: [PROJ] PROJ 9.0.0RC2 & PROJ-data 1.9RC2
In-Reply-To: <8EC5E56A-10B5-4881-B926-99D108D958F8@gmail.com>
References: <8EC5E56A-10B5-4881-B926-99D108D958F8@gmail.com>
Message-ID: <6bc16db4-2bd1-6f01-e0f5-3d65f2df2a0e@spatialys.com>

+1 Even

Le 23/02/2022 ? 20:04, Kristian Evers a ?crit?:
> All,
>
> After a round of feedback on the first release candidates a new set of 
> RCs are available.
>
> For the PROJ release candidate, the SOVERSION have been modified to 
> now be aligned
> with the version number and tests that require access to the internet 
> are only run if access
> is available.
>
> The new PROJ-data release candidate fixes a few spelling errors in the 
> READMEs.
>
> Download the archives here:
>
> https://download.osgeo.org/proj/proj-9.0.0RC2.tar.gz
> https://download.osgeo.org/proj/proj-9.0.0RC2.zip
>
> https://download.osgeo.org/proj/proj-data-1.9RC2.tar.gz
> https://download.osgeo.org/proj/proj-data-1.9RC2.zip
>
> I hope this set of RCs will be the last but don?t hesitate to report 
> any issues may
> stumble upon.
>
> /Kristian
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.


