From kristianevers at gmail.com  Sat Jan  1 07:05:54 2022
From: kristianevers at gmail.com (Kristian Evers)
Date: Sat, 1 Jan 2022 16:05:54 +0100
Subject: [PROJ] PROJ 8.2.1RC1
In-Reply-To: <CAH0YoENoxHhr5e56_Jb=xXT3cZDg=8FCLyXA-uuWQ=g2k4nAVg@mail.gmail.com>
References: <DE201988-ADF7-4BBE-9646-F149CA52C99A@gmail.com>
 <77A4DB27-522A-4020-BE7E-F4213637F059@gmail.com>
 <CAH0YoENoxHhr5e56_Jb=xXT3cZDg=8FCLyXA-uuWQ=g2k4nAVg@mail.gmail.com>
Message-ID: <D00C6F94-B589-4681-A892-DD925B00F50C@gmail.com>

With +1?s from myself, Even, Charles and Thomas I declare the motion passed.

The final release will be announced shortly.

/Kristian

> On 31 Dec 2021, at 12:18, Thomas Knudsen <knudsen.thomas at gmail.com> wrote:
> 
> +1
> 
> Den tor. 30. dec. 2021 kl. 10.30 skrev Kristian Evers <kristianevers at gmail.com <mailto:kristianevers at gmail.com>>:
> I haven?t received any complaints about the release candidate so I hereby
> motion that it be promoted to the final release. I?ll start with my +1.
> 
> /Kristian
> 
> > On 26 Dec 2021, at 16:32, Kristian Evers <kristianevers at gmail.com <mailto:kristianevers at gmail.com>> wrote:
> > 
> > All,
> > 
> > I have prepared a release candidate for PROJ 8.2.1. Links below. 
> > 
> > The PROJ release candidate includes a few updates to the database
> > contents as well as a bunch of bug fixes. See the release notes 
> > below.
> > 
> > Download the release candidate here: 
> > 
> > https://download.osgeo.org/proj/proj-8.2.1RC1.tar.gz <https://download.osgeo.org/proj/proj-8.2.1RC1.tar.gz>
> > https://download.osgeo.org/proj/proj-8.2.1RC1.zip <https://download.osgeo.org/proj/proj-8.2.1RC1.zip> 
> > 
> > As usual everyone who uses PROJ is encouraged to try out the release
> > candidates and report back their experiences either here on the mailing
> > list or in the issue tracker on GitHub.
> > 
> > 
> > /Kristian
> > 
> > 
> > 
> > 8.2.1 Release Notes
> > -------------------
> > 
> > Updates
> > -------
> > 
> > o Database updated with EPSG v. 10.041 (#2974)
> > 
> > Bug fixes
> > ---------
> > 
> > o BoundCRS WKT import: fix setting of name (#2917)
> > 
> > o PROJStringFormatter::toString(): avoid invalid iterator increment (#2932)
> > 
> > o Ensure CApi test are cross-platform (#2934)
> > 
> > o createOperations(): do not stop at the first operation in the PROJ namespace
> >   for vertical transformations (#2937)
> > 
> > o createOperationsCompoundToCompound(): fix null pointer dereference when
> >   connection to proj.db doesn't exist. (#2938)
> > 
> > o Fix windows.h conflict with Criterion::STRICT (#2950)
> > 
> > o Cache result of proj_get_type() to help for performance of
> >   proj_factors() (#2967)
> > 
> > o createOperations(): improvement for "NAD83(CSRS) + CGVD28 height" to
> >   "NAD83(CSRS) + CGVD2013(CGG2013) height" (#2977)
> > 
> > o WKT1 import: correctly deal with missing rectified_grid_angle
> >   parameter (#2986)
> > 
> > o Fix and additional options for Peirce Quincuncial projections (#2978)
> > 
> > o Fix build with Intel C++ compiler (#2995)
> > 
> 
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org <mailto:PROJ at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/proj <https://lists.osgeo.org/mailman/listinfo/proj>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220101/96819e8f/attachment.html>

From kristianevers at gmail.com  Sat Jan  1 07:54:27 2022
From: kristianevers at gmail.com (Kristian Evers)
Date: Sat, 1 Jan 2022 16:54:27 +0100
Subject: [PROJ] PROJ 8.2.1
Message-ID: <BFE8116B-6E28-4C35-8579-0C9FCF5A3721@gmail.com>

On behalf of the PROJ development team I am happy to announce
the release of PROJ 8.2.1. The release includes updates to the
database and a number of bug fixes. See the detailed release
notes below. 


Download the archives here: 


http://download.osgeo.org/proj/proj-8.2.1.tar.gz
http://download.osgeo.org/proj/proj-8.2.1.zip


Please note that from PROJ 9.0.0 and onwards (scheduled for release
March 1st 2022) CMake will be the only build system bundled with
the PROJ package. As a consequence support for Autotools builds
will stop when the 8.2 branch of PROJ reaches end of life.
We encourage everyone to adjust their build workflows as soon as
possible and report any discrepancies discovered between Autotools
and CMake builds. Details about the build system unification can be
found in PROJ RFC 7 [0].

I wish everyone in the PROJ community a very happy new year.

/Kristian


[0] https://proj.org/community/rfc/rfc-7.html

???????????

8.2.1 Release Notes
-------------------

 Updates
 -------

 o Database updated with EPSG v. 10.041 (#2974)

 Bug fixes
 ---------

 o BoundCRS WKT import: fix setting of name (#2917)

 o PROJStringFormatter::toString(): avoid invalid iterator increment (#2932)

 o Ensure CApi test are cross-platform (#2934)

 o createOperations(): do not stop at the first operation in the PROJ namespace
   for vertical transformations (#2937)

 o createOperationsCompoundToCompound(): fix null pointer dereference when
   connection to proj.db doesn't exist. (#2938)

 o Fix windows.h conflict with Criterion::STRICT (#2950)

 o Cache result of proj_get_type() to help for performance of
   proj_factors() (#2967)

 o createOperations(): improvement for "NAD83(CSRS) + CGVD28 height" to
   "NAD83(CSRS) + CGVD2013(CGG2013) height" (#2977)

 o WKT1 import: correctly deal with missing rectified_grid_angle
   parameter (#2986)

 o Fix and additional options for Peirce Quincuncial projections (#2978)

 o Fix build with Intel C++ compiler (#2995)



From j1 at jimenezshaw.com  Sat Jan  8 14:22:18 2022
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Sat, 8 Jan 2022 23:22:18 +0100
Subject: [PROJ] missing docker image osgeo/proj:8.2.1
Message-ID: <CADRrdKtw+YBPrpqYD4KiasDwCQfOrzWuaDk1_pauO-4jm-43SA@mail.gmail.com>

Hi

Trying to pull the docker image for version 8.2.1, I got an error

$ docker pull osgeo/proj:8.2.1
Error response from daemon: manifest for osgeo/proj:8.2.1 not found:
manifest unknown: manifest unknown

checking in hub.docker.com, I found it is not there:
https://hub.docker.com/r/osgeo/proj/tags?page=1&name=8.

The last tagged versioned is 8.2.0
Is there any reason for that?
Are docker images part of the release process?

note: tags 8.1.1 and 8.2.0 were pushed by user 'hobu', while the previous
tags by 'osgeo'

Thanks.
Javier
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220108/181070ea/attachment.html>

From j1 at jimenezshaw.com  Sun Jan  9 15:30:08 2022
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 10 Jan 2022 00:30:08 +0100
Subject: [PROJ] transform with external geoid file
Message-ID: <CADRrdKvMqL_D8V9vyOg=oTn3WrygQq2a-uh6OWf6pBse-rueWQ@mail.gmail.com>

Hi

I want to transform coordinates from CRS A to CRS B in C/C++ with PROJ 8.2.0
Usually A and/or B are geographic 3D or compound with the geoid file
included in PROJ-data. So far so good.

However sometimes one or both systems use a geoid file that is not in
PROJ-data. I would like to define de transformation specifying the geoid
file(s), and the interpolation reference system(s). How is the best way to
do it? Assume that the transformation from geographic to vertical is not
defined in proj.db.

Thanks
Javier
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220110/7a49776b/attachment.html>

From akelley2500 at gmail.com  Mon Jan 10 13:54:50 2022
From: akelley2500 at gmail.com (Andrew Kelley)
Date: Mon, 10 Jan 2022 14:54:50 -0700
Subject: [PROJ] Does WGS84 automatically use EGM96 in PROJ?
Message-ID: <CACJ4NW0DKH6dS+3bbea69txRzDRfXR7M4DqsT8k_+-rZv5Cf_g@mail.gmail.com>

Hello,

My team is using PROJ to convert ECEF coordinates to ENU coordinates
(relative to a fixed point on the surface of the Earth). When we use WGS84
for this, does that automatically use EGM96? What makes me think EGM96 is
used is that one website I found
<http://wiki.gis.com/wiki/index.php/WGS84> says,
"Presently WGS 84 uses the 1996 Earth Gravitational Model (EGM96) geoid,
revised in 2004."  But I found out elsewhere online
<https://en.wikipedia.org/wiki/Earth_Gravitational_Model> that there is an
EGM84, EGM96, and an EGM2008.

Note: We are currently using proj-strings, though we would be happy to use
object codes (ie. EPSG:XXXX) if we knew how to specify the origin of the
ENU coordinates when using an object code.

Thank you for your time,
Andrew Kelley
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220110/115d8ee8/attachment.html>

From cjmce at lsu.edu  Mon Jan 10 15:10:08 2022
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Mon, 10 Jan 2022 23:10:08 +0000
Subject: [PROJ] Does WGS84 automatically use EGM96 in PROJ?
In-Reply-To: <CACJ4NW0DKH6dS+3bbea69txRzDRfXR7M4DqsT8k_+-rZv5Cf_g@mail.gmail.com>
References: <CACJ4NW0DKH6dS+3bbea69txRzDRfXR7M4DqsT8k_+-rZv5Cf_g@mail.gmail.com>
Message-ID: <SN4P221MB0764FD54B6094C2F47B07135A8509@SN4P221MB0764.NAMP221.PROD.OUTLOOK.COM>

Apples and oranges.  ECEF to ENU is a purely geometric transformation.  Earth Gravity Models have no relationship in such a transformation.


Clifford J. Mugnier, c.p., c.m.s.

Chief of Geodesy, Emeritus

LSU Center for GeoInformatics (ERAD 266)

Dept. of Civil Engineering

LOUISIANA STATE UNIVERSITY

Baton Rouge, LA  70803

Research:   (225) 578-4578

Cell:           (225) 328-8975

honorary lifetime member, lsps

fellow emeritus, asprs

member, apsg

________________________________
From: PROJ <proj-bounces at lists.osgeo.org> on behalf of Andrew Kelley <akelley2500 at gmail.com>
Sent: Monday, January 10, 2022 3:54 PM
To: proj at lists.osgeo.org <proj at lists.osgeo.org>
Subject: [PROJ] Does WGS84 automatically use EssGM96 in PROJ?

Hello,

My team is using PROJ to convert ECEF coordinates to ENU coordinates (relative to a fixed point on the surface of the Earth). When we use WGS84 for this, does that automatically use EGM96? What makes me think EGM96 is used is that one website I found<http://wiki.gis.com/wiki/index.php/WGS84> says, "Presently WGS 84 uses the 1996 Earth Gravitational Model (EGM96) geoid, revised in 2004."  But I found out elsewhere online<https://en.wikipedia.org/wiki/Earth_Gravitational_Model> that there is an EGM84, EGM96, and an EGM2008.

Note: We are currently using proj-strings, though we would be happy to use object codes (ie. EPSG:XXXX) if we knew how to specify the origin of the ENU coordinates when using an object code.

Thank you for your time,
Andrew Kelley
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220110/88e2d6fa/attachment.html>

From gdt at lexort.com  Mon Jan 10 17:48:53 2022
From: gdt at lexort.com (Greg Troxel)
Date: Mon, 10 Jan 2022 20:48:53 -0500
Subject: [PROJ] Does WGS84 automatically use EGM96 in PROJ?
In-Reply-To: <SN4P221MB0764FD54B6094C2F47B07135A8509@SN4P221MB0764.NAMP221.PROD.OUTLOOK.COM>
 (Clifford J. Mugnier's message of "Mon, 10 Jan 2022 23:10:08 +0000")
References: <CACJ4NW0DKH6dS+3bbea69txRzDRfXR7M4DqsT8k_+-rZv5Cf_g@mail.gmail.com>
 <SN4P221MB0764FD54B6094C2F47B07135A8509@SN4P221MB0764.NAMP221.PROD.OUTLOOK.COM>
Message-ID: <rmir19fvy7u.fsf@s1.lexort.com>


Clifford J Mugnier <cjmce at lsu.edu> writes:

>> From: PROJ <proj-bounces at lists.osgeo.org> on behalf of Andrew Kelley <akelley2500 at gmail.com>
>> Sent: Monday, January 10, 2022 3:54 PM
>> To: proj at lists.osgeo.org <proj at lists.osgeo.org>
>> Subject: [PROJ] Does WGS84 automatically use EssGM96 in PROJ?
>>
>> My team is using PROJ to convert ECEF coordinates to ENU coordinates
>> (relative to a fixed point on the surface of the Earth). When we use
>> WGS84 for this, does that automatically use EGM96? What makes me think
>> EGM96 is used is that one website I
>> found<http://wiki.gis.com/wiki/index.php/WGS84> says, "Presently WGS
>> 84 uses the 1996 Earth Gravitational Model (EGM96) geoid, revised in
>> 2004."  But I found out elsewhere
>> online<https://en.wikipedia.org/wiki/Earth_Gravitational_Model> that
>> there is an EGM84, EGM96, and an EGM2008.

> Apples and oranges.  ECEF to ENU is a purely geometric transformation.
> Earth Gravity Models have no relationship in such a transformation.

Some additional perspective that may help Andrew:

WGS84, both ECEF/XYZ and geodetic/LLH, is purely geometric, so your
local Up within ENU is something that's almost an ellipsoidal height
offset, relative to the lat/lon/HAE of the point you choose for ENU
conversion.  It's not quite because the up axis diverges from the
ellipsoidal normal away from (0,0).

When you are converting XYZ to ENU, presumably you are giving a
latitude, longitude, and ellipsoidal height for your ENU zero point.  If
you are using an orthometric height instead, you're blurring a
coordinate system change with a geoid model application, although I
suspect errors from that blurring are small for small areas.

Almost always, when surveying people give WGS84 coordinates in LLH, the
height should be interpreted as HAE.  However, normal people often
expect some kind of orthometric height, and navigation-type GNSS
receivers generally give an "altitude" by taking HAE and applying a
gravity model.  (From memory now) the WGS84 specifications define "WGS84
orthometric height", which is relative to the equipotential surface
defined by the datum's U_0 (or maybe they call it W_0 but it's the same
parameter).  This orthometric height is ~always accessed via an
ellipsoidal height and a gravity model, even though it is defined in
terms of gravity.  WGS84 orthometric height may be written "Alt MSL" or
something similar, as many people conflate the various orthometric
heights that aim to match the standard equipotential.

I am unaware of any GNSS other than GPS defining an orthometric height
for the system's native coordinate system, and I am unaware of any
built-in orthometric height notion in ITRF, other than having a W_0.
NGS does publish geoid models to be used with IGS08:
  https://geodesy.noaa.gov/GEOID/USGG2012/

In the northeast US, NAVD88 heights and WGS84 orthometric heights are
close, relative to the ability of almost all people to measure heights.

Consider whether you want WGS84 Orthometric Height or if you are trying
to align to the US NSRS, or some other national datums.  I don't tend to
see high-accuracy coordinates in WGS84 Orthometric Height.

WGS84 is not a datum but a family of datums.  My memory is that the
first realization used EGM84, and ~nobody pays any attention to that any
more.  Then, one or more used EGM96, and later realizations, including
the ones currently in use by GPS, use EGM2008.  EGM2008 has many more
terms available.  Typical GPS receivers even today use EGM96, and even
worse they use a coarse representation, to the point where the coarse
EGM96 differs from the full EGM2008 value by 4m around me
(Massachusetts).  This truncation of EGM96 is more significant than the
EGM96/EGM2008 differences.  See
  https://geographiclib.sourceforge.io/cgi-bin/GeoidEval

It could make sense to transform WGS84 XYZ to WGS84 latitude, longtitude
and WGS84 orthometric height, but I think this requires a compound CRS
or a pipeline.

EPSG defines datum codes which represent exactly the (presumably
non-truncated) zero-height surface of the published models.
  https://epsg.io/5773
  https://epsg.io/3855

There is a CRS which is "World Mercator + EGM2008 height", but I am not
sure that anyone pays attention to it:
  https://epsg.io/6893
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220110/19343c84/attachment.sig>

From even.rouault at spatialys.com  Tue Jan 11 10:17:57 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 11 Jan 2022 19:17:57 +0100
Subject: [PROJ] transform with external geoid file
In-Reply-To: <CADRrdKvMqL_D8V9vyOg=oTn3WrygQq2a-uh6OWf6pBse-rueWQ@mail.gmail.com>
References: <CADRrdKvMqL_D8V9vyOg=oTn3WrygQq2a-uh6OWf6pBse-rueWQ@mail.gmail.com>
Message-ID: <3eb38ef9-ba77-1609-826c-5d35a5cc78ae@spatialys.com>

Hi Javier,

Le 10/01/2022 ? 00:30, Javier Jimenez Shaw a ?crit?:
> Hi
>
> I want to transform coordinates from CRS A to CRS B in C/C++ with PROJ 
> 8.2.0
> Usually A and/or B are geographic 3D or compound with the geoid file 
> included in PROJ-data. So far so good.
>
> However sometimes one or both systems use a geoid file that is not in 
> PROJ-data. I would like to define de transformation specifying the 
> geoid file(s), and the interpolation reference system(s). How is the 
> best way to do it? Assume that the transformation from geographic to 
> vertical is not defined in proj.db.

Different potential ways:

- use a manually built PROJ pipeline

- use WKT string with BoundCRS (but I don't think you can control the 
interpolation CRS that way)

- use proj_create_vertical_crs_ex()

- add new grid_transformation records in proj.db or an auxiliary DB

Even

>
> Thanks
> Javier
> .___ ._ ..._ .. . ._. .___ .. __ . _. . __..? ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220111/4e0eb713/attachment-0001.html>

From j1 at jimenezshaw.com  Wed Jan 12 02:05:20 2022
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 12 Jan 2022 11:05:20 +0100
Subject: [PROJ] missing docker image osgeo/proj:8.2.1
In-Reply-To: <CADRrdKtw+YBPrpqYD4KiasDwCQfOrzWuaDk1_pauO-4jm-43SA@mail.gmail.com>
References: <CADRrdKtw+YBPrpqYD4KiasDwCQfOrzWuaDk1_pauO-4jm-43SA@mail.gmail.com>
Message-ID: <CADRrdKtOP4hBFieyqwEdXo0yEPg0zRq38PRTq8NTpe0yYiQzYg@mail.gmail.com>

I realized that the automatic link to hub.docker.com was not including the
trailing dot (at least my mail client).
So you can add the "." in the query manually, or maybe use this stricter
filter:
https://hub.docker.com/r/osgeo/proj/tags?page=1&name=8.2

Maybe I shouldn't assume that tagged docker images are in the release
process. I was using them to update
https://github.com/jjimenezshaw/crs-explorer after every release.

Thanks.

.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Sat, 8 Jan 2022 at 23:22, Javier Jimenez Shaw <j1 at jimenezshaw.com> wrote:

> Hi
>
> Trying to pull the docker image for version 8.2.1, I got an error
>
> $ docker pull osgeo/proj:8.2.1
> Error response from daemon: manifest for osgeo/proj:8.2.1 not found:
> manifest unknown: manifest unknown
>
> checking in hub.docker.com, I found it is not there:
> https://hub.docker.com/r/osgeo/proj/tags?page=1&name=8.
>
> The last tagged versioned is 8.2.0
> Is there any reason for that?
> Are docker images part of the release process?
>
> note: tags 8.1.1 and 8.2.0 were pushed by user 'hobu', while the previous
> tags by 'osgeo'
>
> Thanks.
> Javier
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220112/078a39ce/attachment.html>

From even.rouault at spatialys.com  Wed Jan 12 08:21:30 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 12 Jan 2022 17:21:30 +0100
Subject: [PROJ] missing docker image osgeo/proj:8.2.1
In-Reply-To: <CADRrdKtOP4hBFieyqwEdXo0yEPg0zRq38PRTq8NTpe0yYiQzYg@mail.gmail.com>
References: <CADRrdKtw+YBPrpqYD4KiasDwCQfOrzWuaDk1_pauO-4jm-43SA@mail.gmail.com>
 <CADRrdKtOP4hBFieyqwEdXo0yEPg0zRq38PRTq8NTpe0yYiQzYg@mail.gmail.com>
Message-ID: <ae383e83-b8cc-bcdf-b031-b533a228ac75@spatialys.com>

I've manually pushed the image. The github action job that normally does 
that automatically 
(https://github.com/OSGeo/PROJ/actions/runs/1643807473) broke for 
another reason (proj-docs build failure, that has been solved afterwards)

Le 12/01/2022 ? 11:05, Javier Jimenez Shaw a ?crit?:
> I realized that the automatic link to hub.docker.com 
> <http://hub.docker.com> was not including the trailing dot (at least 
> my mail client).
> So you can add the "." in the query manually, or maybe use this 
> stricter filter:
> https://hub.docker.com/r/osgeo/proj/tags?page=1&name=8.2 
> <https://hub.docker.com/r/osgeo/proj/tags?page=1&name=8.2>
>
> Maybe I shouldn't assume that tagged docker images are in the release 
> process. I was using them to update 
> https://github.com/jjimenezshaw/crs-explorer 
> <https://github.com/jjimenezshaw/crs-explorer> after every release.
>
> Thanks.
>
> .___ ._ ..._ .. . ._. .___ .. __ . _. . __..? ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
>
> On Sat, 8 Jan 2022 at 23:22, Javier Jimenez Shaw <j1 at jimenezshaw.com 
> <mailto:j1 at jimenezshaw.com>> wrote:
>
>     Hi
>
>     Trying to pull the docker image for version 8.2.1, I got an error
>
>     $ docker pull osgeo/proj:8.2.1
>     Error response from daemon: manifest for osgeo/proj:8.2.1 not
>     found: manifest unknown: manifest unknown
>
>     checking in hub.docker.com <http://hub.docker.com>, I found it is
>     not there:
>     https://hub.docker.com/r/osgeo/proj/tags?page=1&name=8
>     <https://hub.docker.com/r/osgeo/proj/tags?page=1&name=8>.
>
>     The last tagged versioned is 8.2.0
>     Is there any reason for that?
>     Are docker images part of the release process?
>
>     note: tags 8.1.1 and 8.2.0 were pushed by user 'hobu', while the
>     previous tags by 'osgeo'
>
>     Thanks.
>     Javier
>     .___ ._ ..._ .. . ._.? .___ .. __ . _. . __..? ... .... ._ .__
>     Entre dos pensamientos racionales
>     hay infinitos pensamientos irracionales.
>
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220112/f67c5a8f/attachment.html>

From j1 at jimenezshaw.com  Wed Jan 12 08:23:06 2022
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 12 Jan 2022 17:23:06 +0100
Subject: [PROJ] missing docker image osgeo/proj:8.2.1
In-Reply-To: <ae383e83-b8cc-bcdf-b031-b533a228ac75@spatialys.com>
References: <CADRrdKtw+YBPrpqYD4KiasDwCQfOrzWuaDk1_pauO-4jm-43SA@mail.gmail.com>
 <CADRrdKtOP4hBFieyqwEdXo0yEPg0zRq38PRTq8NTpe0yYiQzYg@mail.gmail.com>
 <ae383e83-b8cc-bcdf-b031-b533a228ac75@spatialys.com>
Message-ID: <CADRrdKvv5djH88bfhzRjiKxPgQrGmJEwGswXhK8tJX0VVnUo+g@mail.gmail.com>

Thanks!
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Wed, 12 Jan 2022 at 17:21, Even Rouault <even.rouault at spatialys.com>
wrote:

> I've manually pushed the image. The github action job that normally does
> that automatically (https://github.com/OSGeo/PROJ/actions/runs/1643807473)
> broke for another reason (proj-docs build failure, that has been solved
> afterwards)
> Le 12/01/2022 ? 11:05, Javier Jimenez Shaw a ?crit :
>
> I realized that the automatic link to hub.docker.com was not including
> the trailing dot (at least my mail client).
> So you can add the "." in the query manually, or maybe use this stricter
> filter:
> https://hub.docker.com/r/osgeo/proj/tags?page=1&name=8.2
>
> Maybe I shouldn't assume that tagged docker images are in the release
> process. I was using them to update
> https://github.com/jjimenezshaw/crs-explorer after every release.
>
> Thanks.
>
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
>
> On Sat, 8 Jan 2022 at 23:22, Javier Jimenez Shaw <j1 at jimenezshaw.com>
> wrote:
>
>> Hi
>>
>> Trying to pull the docker image for version 8.2.1, I got an error
>>
>> $ docker pull osgeo/proj:8.2.1
>> Error response from daemon: manifest for osgeo/proj:8.2.1 not found:
>> manifest unknown: manifest unknown
>>
>> checking in hub.docker.com, I found it is not there:
>> https://hub.docker.com/r/osgeo/proj/tags?page=1&name=8.
>>
>> The last tagged versioned is 8.2.0
>> Is there any reason for that?
>> Are docker images part of the release process?
>>
>> note: tags 8.1.1 and 8.2.0 were pushed by user 'hobu', while the previous
>> tags by 'osgeo'
>>
>> Thanks.
>> Javier
>> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
>> Entre dos pensamientos racionales
>> hay infinitos pensamientos irracionales.
>>
>>
> _______________________________________________
> PROJ mailing listPROJ at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/proj
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220112/0b463ec3/attachment.html>

From even.rouault at spatialys.com  Wed Jan 12 14:28:39 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 12 Jan 2022 23:28:39 +0100
Subject: [PROJ] DOI for PROJ through Zenodo
Message-ID: <e9235596-f3d8-6799-8514-1f1beb15b72b@spatialys.com>

Hi,

See https://github.com/OSGeo/PROJ/pull/3019 for more details. I've taken 
the top committers according to github. If folks want to be removed or 
added or have their information modified (I've looked orcid identifiers 
quickly so I may have missed folks), please add comments in the ticket, 
or better create a pull request? to amend it

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From gordon.frisbie at arapenv.com  Mon Jan 17 09:30:04 2022
From: gordon.frisbie at arapenv.com (gordon frisbie)
Date: Mon, 17 Jan 2022 17:30:04 +0000
Subject: [PROJ] fliemanager.cpp build issue
Message-ID: <CY4PR14MB17172674FC5E33C43D660DD79B579@CY4PR14MB1717.namprd14.prod.outlook.com>

While building PROJ the compilation crashes while trying to build filemanager.cpp.      I'm using Cygwin on a Windows Server 2012 machine. It appears that the build is bypassing the "#if __GNU_VISIBLE" condition in Cygwin's dlfcn.h file.

filemanager.cpp:1344:5: error: 'Dl_info' was not declared in this scope
1344 |     Dl_info info;
      |     ^~~~~~~
filemanager.cpp:1345:60: error: 'info' was not declared in this scope
1345 |     if (!dladdr((const void *)pj_get_relative_share_proj, &info)) {
      |                                                            ^~~~
filemanager.cpp:1345:10: error: 'dladdr' was not declared in this scope
1345 |     if (!dladdr((const void *)pj_get_relative_share_proj, &info)) {
      |          ^~~~~~
filemanager.cpp:1348:21: error: 'info' was not declared in this scope
1348 |     std::string out(info.dli_fname);
      |                     ^~~~

Thanks,

Gordon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220117/699ea33d/attachment.html>

From even.rouault at spatialys.com  Mon Jan 17 09:35:55 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 17 Jan 2022 18:35:55 +0100
Subject: [PROJ] fliemanager.cpp build issue
In-Reply-To: <CY4PR14MB17172674FC5E33C43D660DD79B579@CY4PR14MB1717.namprd14.prod.outlook.com>
References: <CY4PR14MB17172674FC5E33C43D660DD79B579@CY4PR14MB1717.namprd14.prod.outlook.com>
Message-ID: <e5a2e3f5-cb18-b4fa-bf10-e151c0bd7161@spatialys.com>

Gordon,

can you try adding #define _GNU_SOURCE at the top of filemanager.cpp ?

Even

Le 17/01/2022 ? 18:30, gordon frisbie a ?crit?:
>
> While building PROJ the compilation crashes while trying to build 
> filemanager.cpp. ???? I'm using Cygwin on a Windows Server 2012 
> machine. It appears that the build is bypassing the "#if 
> __GNU_VISIBLE" condition in Cygwin's dlfcn.h file.
>
> filemanager.cpp:1344:5: error: ?Dl_info? was not declared in this scope
>
> 1344 |???? Dl_info info;
>
> ????? |???? ^~~~~~~
>
> filemanager.cpp:1345:60: error: ?info? was not declared in this scope
>
> 1345 |???? if (!dladdr((const void *)pj_get_relative_share_proj, &info)) {
>
> | ^~~~
>
> filemanager.cpp:1345:10: error: ?dladdr? was not declared in this scope
>
> 1345 |???? if (!dladdr((const void *)pj_get_relative_share_proj, &info)) {
>
> ????? |????????? ^~~~~~
>
> filemanager.cpp:1348:21: error: ?info? was not declared in this scope
>
> 1348 |???? std::string out(info.dli_fname);
>
> ????? |???????????????????? ^~~~
>
> Thanks,
>
> Gordon
>
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220117/af799cd1/attachment.html>

From boardman at aigllc.com  Wed Jan 19 12:25:06 2022
From: boardman at aigllc.com (Joseph Boardman)
Date: Wed, 19 Jan 2022 13:25:06 -0700
Subject: [PROJ] Fwd: some help with cm-level GRS80 to WGS-84 transformation?
In-Reply-To: <b0f9afd1-1203-d039-6311-a72e1d4a674c@aigllc.com>
References: <b0f9afd1-1203-d039-6311-a72e1d4a674c@aigllc.com>
Message-ID: <1a633aee-3adc-65bf-36c3-117471c8a734@aigllc.com>




-------- Forwarded Message --------
Subject: 	some help with cm-level GRS80 to WGS-84 transformation?
Date: 	Wed, 19 Jan 2022 11:28:24 -0700
From: 	Joseph Boardman <boardman at aigllc.com>
To: 	proj at lists.osgeo.org



Dear Proj Experts,

I'm a remote sensing geophysicist with experience in geodesy and mapping.

Right now I'm struggling trying to get a high-accuracy proj command to 
convert from GRS80 to WGS-84 at the cm level.

Any clues? cs2cs is not doing it.

cs2cs +proj=lonlat +ellps=WGS84 +to +proj=lonlat +ellps=GRS80 -d 8
-120 40
-120.00000000 40.00000000 0.00000000

Do I need to do a transformation pipeline per the 8.2.1 docs and use a 
Helmert transform? Any help much appreciated.

Best,

Joe

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220119/14da6468/attachment.html>

From kirk.waters at noaa.gov  Wed Jan 19 13:09:59 2022
From: kirk.waters at noaa.gov (Kirk Waters - NOAA Federal)
Date: Wed, 19 Jan 2022 16:09:59 -0500
Subject: [PROJ] Fwd: some help with cm-level GRS80 to WGS-84
 transformation?
In-Reply-To: <1a633aee-3adc-65bf-36c3-117471c8a734@aigllc.com>
References: <b0f9afd1-1203-d039-6311-a72e1d4a674c@aigllc.com>
 <1a633aee-3adc-65bf-36c3-117471c8a734@aigllc.com>
Message-ID: <CADm=QrRfH344q93VrwwszaZ_+gfk=Mnav_74+Tgan_cDpeycaA@mail.gmail.com>

I'm sure others with more experience will jump in, but I think the main
issue here is that WGS84 is a family of reference frames that are all based
on the GRS80 ellipsoid. So, the problem doesn't exactly make sense and the
various realizations of WGS84 differ at the cm level. Are you perhaps
trying to go from a NAD83 realization (such as NAD83(2011)) to a WGS84
realization (maybe ITRF14
or something)?

Kirk Waters, PhD
NOAA Office for Coastal Management
Applied Sciences Program
?Phone: 843-284-6962? (New as of 2022)
coast.noaa.gov/digitalcoast




On Wed, Jan 19, 2022 at 3:55 PM Joseph Boardman <boardman at aigllc.com> wrote:

>
>
>
> -------- Forwarded Message --------
> Subject: some help with cm-level GRS80 to WGS-84 transformation?
> Date: Wed, 19 Jan 2022 11:28:24 -0700
> From: Joseph Boardman <boardman at aigllc.com> <boardman at aigllc.com>
> To: proj at lists.osgeo.org
>
> Dear Proj Experts,
>
> I'm a remote sensing geophysicist with experience in geodesy and mapping.
>
> Right now I'm struggling trying to get a high-accuracy proj command to
> convert from GRS80 to WGS-84 at the cm level.
>
> Any clues? cs2cs is not doing it.
>
> cs2cs +proj=lonlat +ellps=WGS84 +to +proj=lonlat +ellps=GRS80 -d 8
> -120 40
> -120.00000000   40.00000000 0.00000000
>
> Do I need to do a transformation pipeline per the 8.2.1 docs and use a
> Helmert transform? Any help much appreciated.
>
> Best,
>
> Joe
>
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220119/bdb16059/attachment.html>

From Jochem.Lesparre at kadaster.nl  Wed Jan 19 13:03:39 2022
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Wed, 19 Jan 2022 21:03:39 +0000
Subject: [PROJ] Fwd: some help with cm-level GRS80 to WGS-84
 transformation?
In-Reply-To: <1a633aee-3adc-65bf-36c3-117471c8a734@aigllc.com>
References: <b0f9afd1-1203-d039-6311-a72e1d4a674c@aigllc.com>
 <1a633aee-3adc-65bf-36c3-117471c8a734@aigllc.com>
Message-ID: <AM0P192MB04829B54BAD869406975B352EF599@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Dear Joe,

For this case in cs2cs you have to add a +towgs84 parameter too. If you don?t want a datum transformation: +towgs84=0,0,0,0,0,0,0 on both sides.

Regards, Jochem





From: PROJ <proj-bounces at lists.osgeo.org> On Behalf Of Joseph Boardman
Sent: woensdag 19 januari 2022 21:25
To: proj at lists.osgeo.org
Subject: [PROJ] Fwd: some help with cm-level GRS80 to WGS-84 transformation?





-------- Forwarded Message --------
Subject:
some help with cm-level GRS80 to WGS-84 transformation?
Date:
Wed, 19 Jan 2022 11:28:24 -0700
From:
Joseph Boardman <boardman at aigllc.com><mailto:boardman at aigllc.com>
To:
proj at lists.osgeo.org<mailto:proj at lists.osgeo.org>


Dear Proj Experts,

I'm a remote sensing geophysicist with experience in geodesy and mapping.

Right now I'm struggling trying to get a high-accuracy proj command to convert from GRS80 to WGS-84 at the cm level.

Any clues? cs2cs is not doing it.

cs2cs +proj=lonlat +ellps=WGS84 +to +proj=lonlat +ellps=GRS80 -d 8
-120 40
-120.00000000   40.00000000 0.00000000

Do I need to do a transformation pipeline per the 8.2.1 docs and use a Helmert transform? Any help much appreciated.

Best,

Joe




Disclaimer:
De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor de geadresseerde(n).
Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of verstrekking van deze informatie aan derden is niet toegestaan.
Op al onze producten en diensten zijn onze algemene leveringsvoorwaarden van toepassing
[https://www.kadaster.nl/algemene-leveringsvoorwaarden].

Disclaimer:
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed.
If you are not the intended recipient, you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.
Our general terms and conditions of delivery apply to all our products and services
[https://www.kadaster.com/general-terms-and-conditions].
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220119/c3fe62bb/attachment-0001.html>

From gdt at lexort.com  Wed Jan 19 15:06:41 2022
From: gdt at lexort.com (Greg Troxel)
Date: Wed, 19 Jan 2022 18:06:41 -0500
Subject: [PROJ] Fwd: some help with cm-level GRS80 to WGS-84
 transformation?
In-Reply-To: <CADm=QrRfH344q93VrwwszaZ_+gfk=Mnav_74+Tgan_cDpeycaA@mail.gmail.com>
 (Kirk Waters's message of "Wed, 19 Jan 2022 16:09:59 -0500")
References: <b0f9afd1-1203-d039-6311-a72e1d4a674c@aigllc.com>
 <1a633aee-3adc-65bf-36c3-117471c8a734@aigllc.com>
 <CADm=QrRfH344q93VrwwszaZ_+gfk=Mnav_74+Tgan_cDpeycaA@mail.gmail.com>
Message-ID: <rmiwnivfhq6.fsf@s1.lexort.com>


Kirk Waters - NOAA Federal via PROJ <proj at lists.osgeo.org> writes:

> I'm sure others with more experience will jump in, but I think the main
> issue here is that WGS84 is a family of reference frames that are all based
> on the GRS80 ellipsoid. So, the problem doesn't exactly make sense and the
> various realizations of WGS84 differ at the cm level. Are you perhaps
> trying to go from a NAD83 realization (such as NAD83(2011)) to a WGS84
> realization (maybe ITRF14
> or something)?

I think Kirk has it exactly right.

Also, GRS80 is not a datum, but only a name for an ellipsoid.  So
"converting from GRS80" does not make sense.


Further into the weeds, WGS84 realizations are dynamic datums and if you
are talking about coordinates of crust-fixed objects you need to pay
attention to epoch.  If you care about a few cm, you really need to pay
attention.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220119/6d588f81/attachment.sig>

From brian.shaw at noaa.gov  Wed Jan 19 15:32:36 2022
From: brian.shaw at noaa.gov (Brian Shaw)
Date: Wed, 19 Jan 2022 16:32:36 -0700
Subject: [PROJ] Fwd: some help with cm-level GRS80 to WGS-84
 transformation?
In-Reply-To: <rmiwnivfhq6.fsf@s1.lexort.com>
References: <b0f9afd1-1203-d039-6311-a72e1d4a674c@aigllc.com>
 <1a633aee-3adc-65bf-36c3-117471c8a734@aigllc.com>
 <CADm=QrRfH344q93VrwwszaZ_+gfk=Mnav_74+Tgan_cDpeycaA@mail.gmail.com>
 <rmiwnivfhq6.fsf@s1.lexort.com>
Message-ID: <1b8349a6-b7e5-8ea3-644d-3b3b2aeb58c1@noaa.gov>

All

For anyone interested in learning more about the different realizations 
of WGS84 and deriving transformations between the various realizations 
of WGS 84 here is information for this article from the ASCE Journal of 
Survey Engineering.

*Kelly, K. M.*?and Dennis, M. L. (2022). Transforming between WGS84 
realizations. /Journal of Surveying Engineering/, 148(2). doi: 
10.1061/(ASCE)SU.1943-5428.0000389 
<https://doi.org/10.1061/(ASCE)SU.1943-5428.0000389>

If interested email me and I can share.

Cheers
Brian

On 1/19/2022 4:06 PM, Greg Troxel wrote:
> Kirk Waters - NOAA Federal via PROJ <proj at lists.osgeo.org> writes:
>
>> I'm sure others with more experience will jump in, but I think the main
>> issue here is that WGS84 is a family of reference frames that are all based
>> on the GRS80 ellipsoid. So, the problem doesn't exactly make sense and the
>> various realizations of WGS84 differ at the cm level. Are you perhaps
>> trying to go from a NAD83 realization (such as NAD83(2011)) to a WGS84
>> realization (maybe ITRF14
>> or something)?
> I think Kirk has it exactly right.
>
> Also, GRS80 is not a datum, but only a name for an ellipsoid.  So
> "converting from GRS80" does not make sense.
>
>
> Further into the weeds, WGS84 realizations are dynamic datums and if you
> are talking about coordinates of crust-fixed objects you need to pay
> attention to epoch.  If you care about a few cm, you really need to pay
> attention.
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
*************************************
Brian Shaw
Rocky Mountain Regional Advisor (CO, MT, WY)
NOAA's National Geodetic Survey (NGS)
Cell Phone # 240-988-6363

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220119/5e3b0965/attachment.html>

From boardman at aigllc.com  Wed Jan 19 15:52:10 2022
From: boardman at aigllc.com (Joseph Boardman)
Date: Wed, 19 Jan 2022 16:52:10 -0700
Subject: [PROJ] Fwd: some help with cm-level GRS80 to WGS-84
 transformation?
In-Reply-To: <rmiwnivfhq6.fsf@s1.lexort.com>
References: <b0f9afd1-1203-d039-6311-a72e1d4a674c@aigllc.com>
 <1a633aee-3adc-65bf-36c3-117471c8a734@aigllc.com>
 <CADm=QrRfH344q93VrwwszaZ_+gfk=Mnav_74+Tgan_cDpeycaA@mail.gmail.com>
 <rmiwnivfhq6.fsf@s1.lexort.com>
Message-ID: <796cec7f-6f7f-a199-1864-e4a0d63d1e3f@aigllc.com>

OK, I'll take my licks and ask again.

How would I use Proj to do a precision transform from a particular NAD83 
(GRS80) realization and a particular WGS-84 realization?

On 1/19/2022 4:06 PM, Greg Troxel wrote:
> Kirk Waters - NOAA Federal via PROJ <proj at lists.osgeo.org> writes:
>
>> I'm sure others with more experience will jump in, but I think the main
>> issue here is that WGS84 is a family of reference frames that are all based
>> on the GRS80 ellipsoid. So, the problem doesn't exactly make sense and the
>> various realizations of WGS84 differ at the cm level. Are you perhaps
>> trying to go from a NAD83 realization (such as NAD83(2011)) to a WGS84
>> realization (maybe ITRF14
>> or something)?
> I think Kirk has it exactly right.
>
> Also, GRS80 is not a datum, but only a name for an ellipsoid.  So
> "converting from GRS80" does not make sense.
>
>
> Further into the weeds, WGS84 realizations are dynamic datums and if you
> are talking about coordinates of crust-fixed objects you need to pay
> attention to epoch.  If you care about a few cm, you really need to pay
> attention.

From njacadieux.gitlab at gmail.com  Wed Jan 19 15:56:05 2022
From: njacadieux.gitlab at gmail.com (Nicolas Cadieux)
Date: Wed, 19 Jan 2022 18:56:05 -0500
Subject: [PROJ] Fwd: some help with cm-level GRS80 to WGS-84
 transformation?
In-Reply-To: <rmiwnivfhq6.fsf@s1.lexort.com>
References: <b0f9afd1-1203-d039-6311-a72e1d4a674c@aigllc.com>
 <1a633aee-3adc-65bf-36c3-117471c8a734@aigllc.com>
 <CADm=QrRfH344q93VrwwszaZ_+gfk=Mnav_74+Tgan_cDpeycaA@mail.gmail.com>
 <rmiwnivfhq6.fsf@s1.lexort.com>
Message-ID: <1fbeb2b5-a97d-acac-c0d5-8322dda815a6@gmail.com>

Hi,

I think he is trying to go from the GRS80 Ellipsoid to the WGS84 
Ellipsoid...? If this is the case, the difference is already 
sub-millimeter.?? Both have the Semi-major axis of 6378137 but the 
Inverse of flattening is 298.257223563 for wgs84 and 298.257222101 for 
GRS80.

Nicolas


On 2022-01-19 6:06 p.m., Greg Troxel wrote:
> Kirk Waters - NOAA Federal via PROJ <proj at lists.osgeo.org> writes:
>
>> I'm sure others with more experience will jump in, but I think the main
>> issue here is that WGS84 is a family of reference frames that are all based
>> on the GRS80 ellipsoid. So, the problem doesn't exactly make sense and the
>> various realizations of WGS84 differ at the cm level. Are you perhaps
>> trying to go from a NAD83 realization (such as NAD83(2011)) to a WGS84
>> realization (maybe ITRF14
>> or something)?
> I think Kirk has it exactly right.
>
> Also, GRS80 is not a datum, but only a name for an ellipsoid.  So
> "converting from GRS80" does not make sense.
>
>
> Further into the weeds, WGS84 realizations are dynamic datums and if you
> are talking about coordinates of crust-fixed objects you need to pay
> attention to epoch.  If you care about a few cm, you really need to pay
> attention.
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
Nicolas Cadieux
https://gitlab.com/njacadieux


From boardman at aigllc.com  Wed Jan 19 16:04:56 2022
From: boardman at aigllc.com (Joseph Boardman)
Date: Wed, 19 Jan 2022 17:04:56 -0700
Subject: [PROJ] Fwd: some help with cm-level GRS80 to WGS-84
 transformation?
In-Reply-To: <1fbeb2b5-a97d-acac-c0d5-8322dda815a6@gmail.com>
References: <b0f9afd1-1203-d039-6311-a72e1d4a674c@aigllc.com>
 <1a633aee-3adc-65bf-36c3-117471c8a734@aigllc.com>
 <CADm=QrRfH344q93VrwwszaZ_+gfk=Mnav_74+Tgan_cDpeycaA@mail.gmail.com>
 <rmiwnivfhq6.fsf@s1.lexort.com>
 <1fbeb2b5-a97d-acac-c0d5-8322dda815a6@gmail.com>
Message-ID: <07d6363d-7af6-2702-b189-27a144aa65f9@aigllc.com>

I can do the transform I want in the ESRI PE (used by ENVI) and get a 
dx,dy,dz grid much as in the link I just sent (say +/-1m in x,yz 
differences in conus).

But I'd like to do it in Proj if it can.

ENVI> proj1=envi_proj_create(/geographic,datum='WGS-84')
ENVI> proj2=envi_proj_create(/geographic,datum='North America 1983')
ENVI> lon=-120d
ENVI> lat=40d
ENVI> z=3500d
ENVI> 
envi_convert_projection_coordinates,lon,lat,proj1,lon2,lat2,proj2,input_z=z,output_z=z2
ENVI> lon2
 ????? -119.99998689405381
ENVI> lat2
 ?????? 39.999994689014549
ENVI> z2
 ?????? 3500.5506024310116
ENVI> proj3=envi_proj_create(/utm,zone=11,datum='WGS-84')
ENVI> envi_convert_projection_coordinates,lon,lat,proj1,x1,y1,proj3
ENVI> envi_convert_projection_coordinates,lon2,lat2,proj1,x2,y2,proj3
ENVI> x2-x1
 ?????? 1.0991263525502291
ENVI> y2-y1
 ???? -0.62730476632714272

at 120,40 I get a dx dy dz for WGS-84 to NAD83 of 1.1m, -.62m, -.62m

Can Proj fdo a similar datum shift? If so how?

Thanks!

Joe


On 1/19/2022 4:56 PM, Nicolas Cadieux wrote:
> Hi,
>
> I think he is trying to go from the GRS80 Ellipsoid to the WGS84 
> Ellipsoid...? If this is the case, the difference is already 
> sub-millimeter.?? Both have the Semi-major axis of 6378137 but the 
> Inverse of flattening is 298.257223563 for wgs84 and 298.257222101 for 
> GRS80.
>
> Nicolas
>
>
> On 2022-01-19 6:06 p.m., Greg Troxel wrote:
>> Kirk Waters - NOAA Federal via PROJ <proj at lists.osgeo.org> writes:
>>
>>> I'm sure others with more experience will jump in, but I think the main
>>> issue here is that WGS84 is a family of reference frames that are 
>>> all based
>>> on the GRS80 ellipsoid. So, the problem doesn't exactly make sense 
>>> and the
>>> various realizations of WGS84 differ at the cm level. Are you perhaps
>>> trying to go from a NAD83 realization (such as NAD83(2011)) to a WGS84
>>> realization (maybe ITRF14
>>> or something)?
>> I think Kirk has it exactly right.
>>
>> Also, GRS80 is not a datum, but only a name for an ellipsoid. So
>> "converting from GRS80" does not make sense.
>>
>>
>> Further into the weeds, WGS84 realizations are dynamic datums and if you
>> are talking about coordinates of crust-fixed objects you need to pay
>> attention to epoch.? If you care about a few cm, you really need to pay
>> attention.
>>
>> _______________________________________________
>> PROJ mailing list
>> PROJ at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/proj
>

From gdt at lexort.com  Wed Jan 19 16:43:07 2022
From: gdt at lexort.com (Greg Troxel)
Date: Wed, 19 Jan 2022 19:43:07 -0500
Subject: [PROJ] Fwd: some help with cm-level GRS80 to WGS-84
 transformation?
In-Reply-To: <796cec7f-6f7f-a199-1864-e4a0d63d1e3f@aigllc.com> (Joseph
 Boardman's message of "Wed, 19 Jan 2022 16:52:10 -0700")
References: <b0f9afd1-1203-d039-6311-a72e1d4a674c@aigllc.com>
 <1a633aee-3adc-65bf-36c3-117471c8a734@aigllc.com>
 <CADm=QrRfH344q93VrwwszaZ_+gfk=Mnav_74+Tgan_cDpeycaA@mail.gmail.com>
 <rmiwnivfhq6.fsf@s1.lexort.com>
 <796cec7f-6f7f-a199-1864-e4a0d63d1e3f@aigllc.com>
Message-ID: <rmi35ljck4k.fsf@s1.lexort.com>


Joseph Boardman <boardman at aigllc.com> writes:

> OK, I'll take my licks and ask again.
>
> How would I use Proj to do a precision transform from a particular
> NAD83 (GRS80) realization and a particular WGS-84 realization?

There are three practical problems to address:

  - The EPSG database has historically not dealt well with WGS84
    realizations.  (Try to find a datum code for WGS84(G2139).)  More
    importantly, there is an ensemble concept which results in null
    transforms when, if the people asking for the transform instead
    understood what they were trying to do and asked for a different
    transform, it would be more accurate.  That's perhaps fair in a
    theoretical sense, but it's not helpful to led the history
    WGS84(TRANSIT) affect transforms among modern realizations -- nobody
    has any remotely accurate data in WGS84(TRANSIT).

  - WGS84-GXXXX and ITRF-XXXX are dynamic and you need to understand
    what you are doing about epoch.   NAD83(2011) starts to look dynamic
    at 10 years and 1 cm, and it's more so on the Pacific plate.

  - There are close relationships between each (reasonably recent) WGS84
    and some ITRF, and you can use an ITRF as a proxy.  But then you
    aren't really doing what you are saying you are doing, so you need
    to have a story about why.

If you are really talking cm-level, then the only thing that I think
makes sense is to transform from

  EPSG:6319	NAD83(2011) epoch 2010.0

to something like

  EPSG:7912	ITRF2014 (which I am 99% sure uses default epoch 2010.0)

if you mean WGS84(G2139).

I'm pretty sure ITRF2008 is the right answer if you mean WGS84(G1762),
and it seems there is EPSG:7665 for that.

Then, you'll need to think about what epoch you want the ITRF2014
coordinates in and why.


----------------------------------------

If you mean some NAD83 other than NAD83(2011) epoch 2010.0 then you
should be using HTDP/NCAT from NGS to get to EPSG:6319 first.  And, the
idea that previous NAD83 realizations have internal accuracy at the 1 cm
level is one that I'd be highly skeptical of.

Definitely look at the results very carefully, and cross check with OPUS
results in both NAD383 and ITRFxxx for the same solution, as very few
people are really trying to deal with these transforms at cm level and
you'll be a bit of a pioneer.  (If you aren't doing 24h occupations with
dual-frequency receivers and static processing, you probably don't have
1 cm coordinates to start with.)

----------------------------------------

However, there is a more serious problem, which is that the very concept
of cm-level coordinates in WGS84 is hard to talk about until you equate
it to some ITRF and accept that you are really dealing e.g. with
ITRF2014 instead of WGS84G(xxxx).

So let me ask: are you going to be able to establish precise
WGS84(GXXXXX) coordinates for some point, and how are you doing to do
it?  How could you determine if coordinates you got via transform are
correct or not?

Basically, I am challenging you to explain how you will access the
WGS84(G2139) datum at better than meter level.  (Other than accessing
ITRF2014 or IGS08 and saying they are equivalent.)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220119/311777d0/attachment-0001.sig>

From gdt at lexort.com  Wed Jan 19 17:12:44 2022
From: gdt at lexort.com (Greg Troxel)
Date: Wed, 19 Jan 2022 20:12:44 -0500
Subject: [PROJ] Fwd: some help with cm-level GRS80 to WGS-84
 transformation?
In-Reply-To: <07d6363d-7af6-2702-b189-27a144aa65f9@aigllc.com> (Joseph
 Boardman's message of "Wed, 19 Jan 2022 17:04:56 -0700")
References: <b0f9afd1-1203-d039-6311-a72e1d4a674c@aigllc.com>
 <1a633aee-3adc-65bf-36c3-117471c8a734@aigllc.com>
 <CADm=QrRfH344q93VrwwszaZ_+gfk=Mnav_74+Tgan_cDpeycaA@mail.gmail.com>
 <rmiwnivfhq6.fsf@s1.lexort.com>
 <1fbeb2b5-a97d-acac-c0d5-8322dda815a6@gmail.com>
 <07d6363d-7af6-2702-b189-27a144aa65f9@aigllc.com>
Message-ID: <rmilezbb46r.fsf@s1.lexort.com>


Joseph Boardman <boardman at aigllc.com> writes:

> I can do the transform I want in the ESRI PE (used by ENVI) and get a
> dx,dy,dz grid much as in the link I just sent (say +/-1m in x,yz
> differences in conus).
>
> But I'd like to do it in Proj if it can.
>
> ENVI> proj1=envi_proj_create(/geographic,datum='WGS-84')
> ENVI> proj2=envi_proj_create(/geographic,datum='North America 1983')

That's making assumptions (perhaps they are reasonable) about which
NAD83 and which WGS84.  But without knowing them, and knowing what
transform it is using, there's no good basis to trust the results.
Perhaps you can find that in the docs.  It's also ignoring epoch, or
perhaps making some assumption.

I do something similar, but with specific realizations, as

  ogr2ogr -f GeoJSON -t_srs "EPSG:7912" -s_srs "EPSG:6319" foo.geojson foo.gpkg foo

which actually invokes proj.  (Actually the -s_srs is not needed as my
geopackage layer has a datum code, but my scripts have been spiffed up
over time.)   And yes, my transform gets me ITRF2014 epoch 2010.0, which
lines up well on webmaps and I have not really figured out further.


Please do report back when you figure out what you really mean and what
you are doing about epoch and why, and how you are aceessing/checking
correctness relative to WGS84.




-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220119/bdcbb307/attachment.sig>

From even.rouault at spatialys.com  Thu Jan 20 07:49:49 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 20 Jan 2022 16:49:49 +0100
Subject: [PROJ] [gdal-dev] Fwd: DOI for the GDAL project / Springer
 Handbook of Geoinformatics
In-Reply-To: <trinity-792def8c-8df6-42d2-9cb8-9b83cc30df75-1642689426503@3c-app-gmx-bs28>
References: <trinity-0675ef2b-457d-4778-9280-a4666a7abadf-1642670161257@3c-app-gmx-bs17>
 <trinity-792def8c-8df6-42d2-9cb8-9b83cc30df75-1642689426503@3c-app-gmx-bs28>
Message-ID: <0e79ae74-2c96-d7b9-95f0-a51311dc687d@spatialys.com>

Ok, I went ahead with a manual upload of GDAL 3.4.1: 
https://zenodo.org/record/5884352 , with concept DOI being 
https://zenodo.org/record/5884351

Can you ask the zenodo help desk to link the later with the github 
releases of https://github.com/OSGeo/GDAL ?

Same for PROJ 8.2.1: https://zenodo.org/record/5884395, with concept DOI 
being https://zenodo.org/record/5884394, to be associated with 
https://github.com/OSGeo/PROJ

Even


Le 20/01/2022 ? 15:37, Peter L?we a ?crit?:
> Hi,
>
> FYI here's the confirmation by Zenodo about the combined use of manual and automated software versioning:
>
> "It is possible to link manual releases to the GitHub integration automated workflow.
> You can go ahead and publish the two manual releases and share them here.
> We will then link them to the equivalent GitHub repositories so that when you activate the integration new versions will continue under the same Concept DOIs of the manual releases"
>
> -> the two repos being referred to are PROJ and GDAL.
>
> I will not be abl? to act on this as I do not have admin access to neither the GDAL nor the PROJ repo.
>
> Best,
> Peter
>
> <peter.loewe at gmx.de>
>
>
>> Gesendet: Donnerstag, 20. Januar 2022 um 10:16 Uhr
>> Von: "Peter L?we" <peter.loewe at gmx.de>
>> An: gdal-dev at lists.osgeo.org
>> Betreff: [gdal-dev] Fwd: DOI for the GDAL project / Springer Handbook of Geoinformatics
>>
>> Hello gdal-dev-list,
>>
>> regarding the current discussion on how to register DOI for GDAL, I've contacted the helpdesks of Zenodo and DataCite. DataCite is the organisation providing the global DOI-infrastructure. Zenodo is an open access repository where a growing number of OSGeo projects already have registered DOI for their codebases.
>>
>> The question is whether once a DOI for GDAL has been registered manually/retrospectively for the current release (GDAL 3.4.1) it will be feasible to switch to automated DOI versioning for all future GDAL releases.
>>
>> The DataCite helpdesk confirms, this approach from their infrastructure perspective: "From the DataCite side I don't see anything that would mean the manual workflow could not change to an automated one, but this is something that Zenodo would need to confirm."
>>
>> The Zenodo helpdesk confirmed this approach last night: "We can actually connect this record to a "virtual" release on our side as if it was actually part of the Github repo. Could you give us more details, for example, the records in question and the GitHub repos?".
>> -> I have told them that this applies to GDAL (among other projects). No response yet.
>> Maybe someone of the project community is interested and able to contact the Zenodo help desk directly on this (info at zenodo.org) ?
>>
>> The deadline to include a DOI for the GDAL project to the Open Source Chapter of the Springer Handbook on Geographic Information is today end of business Pacific Time.
>>
>> By now, ten OSGeo projects will have their DOI referenced in the Chapter (more to come in the next hours). It would be awesome if GDAL could be included, too.
>>
>> Best,
>> Peter
>>
>> <peter.loewe at gmx.de>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From Jochem.Lesparre at kadaster.nl  Mon Jan 24 11:09:15 2022
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Mon, 24 Jan 2022 19:09:15 +0000
Subject: [PROJ] Correcting metadata in GeoTIFF files
Message-ID: <AM0P192MB0482A6AD0F1ADD46EEA1312AEF5E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Dear list,



I'm from Netherlands Partnership Geodetic Infrastructure (NSGI). We published NTv2 (.gsb) and VDatum (.gtx) grid files for the national CRS of the Netherlands (RD coordinates with NAP height) in 2019. PROJ converted these to GeoTIFF (.tif) in 2020 [1]. Unfortunately, some wrong information was stored in the metadata of the GeoTIFF files in the conversion. We are now creating new GeoTIFF files with corrected metadata, using the Python scrips ntv2_to_gtiff.py [2] and vertoffset_grid_to_gtiff.py [3].



For most changes in the metadata this is straightforward, but there is one more difficult issue:

We have two variants of the horizontal transformation:

  *   Conventional 1-step transformation (variant 2): geographic coordinates of national CRS ---[nl_nsgi_rdtrans2018.tif]---> ETRS89
  *   Better 2-step transformation (variant 1): geographic coordinates of national CRS ---[nl_nsgi_rdcorr2018.tif]---> corrected geographic coordinates of national CRS ---[7_parameter_transformation]---> ETRS89

Since there is no separate EPSG code for the corrected geographic coordinates of the national CRS, we want to use the same EPSG code for both corrected and uncorrected coordinates. Or will it give problems when the source and target CRS of a GeoTIFF file are the same?



Next to this, I have some other questions:

  *   Shouldn't a GeoTIFF grid file for a vertical transformation have an accuracy band like a grid for a horizontal transformation? Is it possible with the Python script to create an accuracy band in the GeoTIFF from a VDatum grid file?
  *   Can I add a recommended_interpolation_method with the Python scripts?
  *   How should I supply the corrected GeoTIFF files to PROJ?
  *   Is it necessary for PROJ to use new files names to distinguish them from the old version with incorrect metadata?



Regards, Jochem



[1] https://github.com/OSGeo/PROJ-data/tree/master/nl_nsgi

[2] https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/ntv2_to_gtiff.py

[3] https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/vertoffset_grid_to_gtiff.py





J. Lesparre

Netherlands Partnership Geodetic Infrastructure (NSGI.nl)






Disclaimer:
De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor de geadresseerde(n).
Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of verstrekking van deze informatie aan derden is niet toegestaan.
Op al onze producten en diensten zijn onze algemene leveringsvoorwaarden van toepassing
[https://www.kadaster.nl/algemene-leveringsvoorwaarden].

Disclaimer:
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed.
If you are not the intended recipient, you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.
Our general terms and conditions of delivery apply to all our products and services
[https://www.kadaster.com/general-terms-and-conditions].
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220124/deab5a80/attachment.html>

From even.rouault at spatialys.com  Mon Jan 24 12:17:06 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 24 Jan 2022 21:17:06 +0100
Subject: [PROJ] Correcting metadata in GeoTIFF files
In-Reply-To: <AM0P192MB0482A6AD0F1ADD46EEA1312AEF5E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
References: <AM0P192MB0482A6AD0F1ADD46EEA1312AEF5E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
Message-ID: <6c8c18a6-cd5b-4e15-5a45-13f5955280b5@spatialys.com>

Jochem,

Le 24/01/2022 ? 20:09, Lesparre, Jochem via PROJ a ?crit?:
>
> Dear list,
>
> I'm from Netherlands Partnership Geodetic Infrastructure (NSGI). We 
> published NTv2 (.gsb) and VDatum (.gtx) grid files for the national 
> CRS of the Netherlands (RD coordinates with NAP height) in 2019. PROJ 
> converted these to GeoTIFF (.tif) in 2020 [1]. Unfortunately, some 
> wrong information was stored in the metadata of the GeoTIFF files in 
> the conversion. We are now creating new GeoTIFF files with corrected 
> metadata, using the Python scrips ntv2_to_gtiff.py [2] and 
> vertoffset_grid_to_gtiff.py [3].
>
> For most changes in the metadata this is straightforward, but there is 
> one more difficult issue:
>
> We have two variants of the horizontal transformation:
>
>   * Conventional 1-step transformation (variant 2): geographic
>     coordinates of national CRS ---[nl_nsgi_rdtrans2018.tif]---> ETRS89
>   * Better 2-step transformation (variant 1): geographic coordinates
>     of national CRS ---[nl_nsgi_rdcorr2018.tif]---> corrected
>     geographic coordinates of national CRS
>     ---[7_parameter_transformation]---> ETRS89
>
> Since there is no separate EPSG code for the corrected geographic 
> coordinates of the national CRS, we want to use the same EPSG code for 
> both corrected and uncorrected coordinates. Or will it give problems 
> when the source and target CRS of a GeoTIFF file are the same?
>
Instead of the target_crs_code metadata item, you could include a 
target_crw_wkt with a WKT2 string. That can be done through the 
ntv2_to_gtiff.py script as it can accept a WKT2 CRS string as the value 
for --target-crs.

> Next to this, I have some other questions:
>
>   * Shouldn't a GeoTIFF grid file for a vertical transformation have
>     an accuracy band like a grid for a horizontal transformation? Is
>     it possible with the Python script to create an accuracy band in
>     the GeoTIFF from a VDatum grid file?
>
You could possibly add with GDAL standard tools (gdal_translate, etc) a 
band with the accuracy and a description of "geoid_undulation_accuracy" 
(you may need to go through a VRT to manually add the Units to the 
band). The validate_vertical_offset_geographic_to_vertical() method of 
the check_gtiff_grid.py script would likely have to be updated so that 
it doesn't emit an information message about the new band not being 
recognized. And the spec at 
https://proj.org/specifications/geodetictiffgrids.html as well


>   * Can I add a recommended_interpolation_method with the Python scripts?
>
Not currently.? Either enhance them or add the metadata item manually 
through GDAL tools (gdal_translate -mo 
recommended_interpolation_method=foo in.tif out.tif -co COMPRESS=DEFLATE 
-co INTERLEAVE=BAND -co PREDICTOR=3). Note that PROJ itself will ignore 
that item and always apply bilinear interpolation.
>
>   * How should I supply the corrected GeoTIFF files to PROJ?
>
Pull request against https://github.com/OSGeo/PROJ-data 
<https://github.com/OSGeo/PROJ-data/tree/master/nl_nsgi>
>
>   * Is it necessary for PROJ to use new files names to distinguish
>     them from the old version with incorrect metadata?
>
No
>
>  *
>
> Regards, Jochem
>
> [1] https://github.com/OSGeo/PROJ-data/tree/master/nl_nsgi 
> <https://github.com/OSGeo/PROJ-data/tree/master/nl_nsgi>
>
> [2] 
> https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/ntv2_to_gtiff.py 
> <https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/ntv2_to_gtiff.py>
>
> [3] 
> https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/vertoffset_grid_to_gtiff.py 
> <https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/vertoffset_grid_to_gtiff.py>
>
> **
>
> J. Lesparre
>
> Netherlands Partnership Geodetic Infrastructure (NSGI.nl)
>
>
>
> Disclaimer:
> De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor 
> de geadresseerde(n).
> Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of 
> verstrekking van deze informatie aan derden is niet toegestaan.
> Op al onze producten en diensten zijn onze algemene 
> leveringsvoorwaarden van toepassing
> [https://www.kadaster.nl/algemene-leveringsvoorwaarden].
>
> Disclaimer:
> This email and any files transmitted with it are confidential and 
> intended solely for the use of the individual or entity to whom they 
> are addressed.
> If you are not the intended recipient, you are notified that 
> disclosing, copying, distributing or taking any action in reliance on 
> the contents of this information is strictly prohibited.
> Our general terms and conditions of delivery apply to all our products 
> and services
> [https://www.kadaster.com/general-terms-and-conditions].
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220124/57f8f6c1/attachment.html>

From Jochem.Lesparre at kadaster.nl  Tue Jan 25 06:43:32 2022
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Tue, 25 Jan 2022 14:43:32 +0000
Subject: [PROJ] Correcting metadata in GeoTIFF files
In-Reply-To: <6c8c18a6-cd5b-4e15-5a45-13f5955280b5@spatialys.com>
References: <AM0P192MB0482A6AD0F1ADD46EEA1312AEF5E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <6c8c18a6-cd5b-4e15-5a45-13f5955280b5@spatialys.com>
Message-ID: <AM0P192MB0482B9BC65DA7923F3EDF72CEF5F9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Thanks.

I encountered a new problem:
We use a horizontal grid as well as a vertical grid for the transformation from ETRS89 (EPSG:4937) to our national CRS: RD (EPSG:28992) with NAP height (EPSG:5709). With PROJ4-style strings [1], an interpolation CRS (EPSG:4289) is needed for the Geodetic TIFF grid of the geoid, next to the source (EPSG:4937) and target (EPSG:5709) CRS. To specify this, I have to use --type VERTICAL_TO_VERTICAL in the Python script for the conversion from the VDatum grid. This results in the description "vertical offset" instead of "geoid undulation". This is a bit strange, as the grid is in fact a geoid. Problematic is that (according to the documentation [2]) the source and target CRS both must be a vertical CRS, while one is our national levelling height system NAP, but the other is ellipsoidal ETRS89 height. The latter doesn't have a vertical EPSG code. What is the WKT string of ETRS89 ellipsoidal height? This seems way too complicated for a Geodetic TIFF grid file of a VDatum geoid grid file of a type that must have been very common under PROJ4.

Next to this, I have some new questions on the use of WKT strings instead of EPSG codes for the specification of a CRS in a Geodetic TIFF grid file:

  *   Are the simpler EPSG codes preferred over WKT strings? Is it OK to use a WKT string for the source and a EPSG code for the target, or would it be better to use a WKT string for both source and target in such case?
  *   Can I use the WKT string given by EPSG.org for a CRS with an EPSG code and edit the CRS name in this WKT string to use an alias instead of the official EPSG name (see example [3])?

Regards, Jochem



[1] PROJ4-style transformation from ETRS89 (EPSG:4937) to national horizontal and vertical CRS of the Netherlands:
cs2cs +init=epsg:4937 +to +proj=sterea +lat_0=52.156160556 +lon_0=5.387638889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +nadgrids=rdtrans2018.gsb +units=m +geoidgrids=naptrans2018.gtx +vunits=m +no_defs

[2] https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/README.md

[3] WKT string of EPSG:4289 where I replaced the official EPSG name "Amersfoort" to the official Dutch name "RD Bessel":
GEOGCRS["RD Bessel",
   DATUM["Amersfoort",
      ELLIPSOID["Bessel 1841",6377397.155,299.1528128,
         LENGTHUNIT["metre",1,
            ID["EPSG",9001]
         ],
         ID["EPSG",7004]
      ],
      ID["EPSG",6289]],
   CS[ellipsoidal,2,
      ID["EPSG",6422]
   ],
   AXIS["latitude (Lat)",north],
   AXIS["longitude (Lon)",east],
   ANGLEUNIT["degree",0.0174532925199433,
      ID["EPSG",9102]
   ],
   ID["EPSG",4289]
]


From: Even Rouault <even.rouault at spatialys.com>
Sent: maandag 24 januari 2022 21:17
To: Lesparre, Jochem <Jochem.Lesparre at kadaster.nl>; PROJ at lists.osgeo.org
Subject: Re: [PROJ] Correcting metadata in GeoTIFF files


Jochem,
Le 24/01/2022 ? 20:09, Lesparre, Jochem via PROJ a ?crit :

Dear list,



I'm from Netherlands Partnership Geodetic Infrastructure (NSGI). We published NTv2 (.gsb) and VDatum (.gtx) grid files for the national CRS of the Netherlands (RD coordinates with NAP height) in 2019. PROJ converted these to GeoTIFF (.tif) in 2020 [1]. Unfortunately, some wrong information was stored in the metadata of the GeoTIFF files in the conversion. We are now creating new GeoTIFF files with corrected metadata, using the Python scrips ntv2_to_gtiff.py [2] and vertoffset_grid_to_gtiff.py [3].



For most changes in the metadata this is straightforward, but there is one more difficult issue:

We have two variants of the horizontal transformation:

1.       Conventional 1-step transformation (variant 2): geographic coordinates of national CRS ---[nl_nsgi_rdtrans2018.tif]---> ETRS89

2.       Better 2-step transformation (variant 1): geographic coordinates of national CRS ---[nl_nsgi_rdcorr2018.tif]---> corrected geographic coordinates of national CRS ---[7_parameter_transformation]---> ETRS89

Since there is no separate EPSG code for the corrected geographic coordinates of the national CRS, we want to use the same EPSG code for both corrected and uncorrected coordinates. Or will it give problems when the source and target CRS of a GeoTIFF file are the same?

Instead of the target_crs_code metadata item, you could include a target_crw_wkt with a WKT2 string. That can be done through the ntv2_to_gtiff.py script as it can accept a WKT2 CRS string as the value for --target-crs.



Next to this, I have some other questions:

  1.  Shouldn't a GeoTIFF grid file for a vertical transformation have an accuracy band like a grid for a horizontal transformation? Is it possible with the Python script to create an accuracy band in the GeoTIFF from a VDatum grid file?

You could possibly add with GDAL standard tools (gdal_translate, etc) a band with the accuracy and a description of "geoid_undulation_accuracy" (you may need to go through a VRT to manually add the Units to the band). The validate_vertical_offset_geographic_to_vertical() method of the check_gtiff_grid.py script would likely have to be updated so that it doesn't emit an information message about the new band not being recognized. And the spec at https://proj.org/specifications/geodetictiffgrids.html<https://secure-web.cisco.com/1IPsQrcS7XiA25_SIbwFzb-QZAKsmLdiZCviwwLfntX_LP5RL4MhT86HqkIDLHoWnxjGPsOj9qatKSQRQ6s-3OgTu2NWmUxO08eXFQDCyBNoiM6PgcO9f94P0uPY5Tod4uKHZ2DYmeBgeH9t6R_uf9AxSLI6uZ7h4ReNQ8fupVoj7z9uP0to6Nlr1Kti7lJycLJvZgYL1hGJywSBwFWky-TKX6tQWP90b26Q0Iub853RFhi4Meej8qTYaHcMfPtczIIxD62IAkCtQyIv3XMdTneUYyFMRszve23cNIudpKQzeuZzt3yS_yl6bQIPnPMO6/https%3A%2F%2Fproj.org%2Fspecifications%2Fgeodetictiffgrids.html> as well



  1.  Can I add a recommended_interpolation_method with the Python scripts?
Not currently.  Either enhance them or add the metadata item manually through GDAL tools (gdal_translate -mo recommended_interpolation_method=foo in.tif out.tif -co COMPRESS=DEFLATE -co INTERLEAVE=BAND -co PREDICTOR=3). Note that PROJ itself will ignore that item and always apply bilinear interpolation.


  1.  How should I supply the corrected GeoTIFF files to PROJ?
Pull request against https://github.com/OSGeo/PROJ-data<https://github.com/OSGeo/PROJ-data/tree/master/nl_nsgi>


  1.  Is it necessary for PROJ to use new files names to distinguish them from the old version with incorrect metadata?
No


  1.



Regards, Jochem



[1] https://github.com/OSGeo/PROJ-data/tree/master/nl_nsgi

[2] https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/ntv2_to_gtiff.py

[3] https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/vertoffset_grid_to_gtiff.py





J. Lesparre

Netherlands Partnership Geodetic Infrastructure (NSGI.nl)






Disclaimer:
De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor de geadresseerde(n).
Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of verstrekking van deze informatie aan derden is niet toegestaan.
Op al onze producten en diensten zijn onze algemene leveringsvoorwaarden van toepassing
[https://www.kadaster.nl/algemene-leveringsvoorwaarden].

Disclaimer:
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed.
If you are not the intended recipient, you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.
Our general terms and conditions of delivery apply to all our products and services
[https://www.kadaster.com/general-terms-and-conditions<https://secure-web.cisco.com/1fU8sg4FrMFO4TyIW9ZofFSwdqxB0Kag8iZvKOseM_86a_Jx5Z2YV1Hrtt_e8mtlHLMQ0H8zu1i3lanHmsFjggZd1QXIC7i_zohRumwvppYst-xwoiyIzVpRIaUe7MImO2MSCS5aoznYYHb6E-LdzL2tarUM3ByI1fBzPf6EX-yQBpfd_vLLLUaYH2he7-jy3HzpLC2iu2ee6zOAfHGtKhEMeppr62m_f186VKNfXWlLwAxhGXGppzPfI_g4RpQ9OMJiT8koLCKdzzpwTMdFYDY2DaE08KWCvO9WNaB0ciQrOfxgdxfjiQ802OXi4mhKe/https%3A%2F%2Fwww.kadaster.com%2Fgeneral-terms-and-conditions>].



_______________________________________________

PROJ mailing list

PROJ at lists.osgeo.org<mailto:PROJ at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/proj

--

http://www.spatialys.com<http://secure-web.cisco.com/1fXZS9zkl1X2JBd5DEK4YAq1gPWoDfSCpDSaFlOf5HpAUYrV7SIEw12ok2xJ1dLlvazjXyElbKEjEJLnTBo5NsMUQgMzUh1-_47mgVQpSA2Wih89heEKMsI5iXG5QbxXLAERdl1W-2up80jCvknOD8vY83_Wh-5g43WZIwWQNwaJ38eTscgBCOajh8Bgq8Xmw06STQekuuToXJWmYwQ6woQiNYlE3tHnjcvuhJOGF6aedm4xTRlC4hjYeQ9b8T3HPmwawXXFsXFnlPiuOSR06jIeZ0FCvBXtbexj0ZloQCmzM8W3sBGc11dNGXri3ia7w/http%3A%2F%2Fwww.spatialys.com>

My software is free, but my time generally not.


Disclaimer:
De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor de geadresseerde(n).
Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of verstrekking van deze informatie aan derden is niet toegestaan.
Op al onze producten en diensten zijn onze algemene leveringsvoorwaarden van toepassing
[https://www.kadaster.nl/algemene-leveringsvoorwaarden].

Disclaimer:
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed.
If you are not the intended recipient, you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.
Our general terms and conditions of delivery apply to all our products and services
[https://www.kadaster.com/general-terms-and-conditions].
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220125/596f691d/attachment-0001.html>

From even.rouault at spatialys.com  Tue Jan 25 06:58:05 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 25 Jan 2022 15:58:05 +0100
Subject: [PROJ] Correcting metadata in GeoTIFF files
In-Reply-To: <AM0P192MB0482B9BC65DA7923F3EDF72CEF5F9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
References: <AM0P192MB0482A6AD0F1ADD46EEA1312AEF5E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <6c8c18a6-cd5b-4e15-5a45-13f5955280b5@spatialys.com>
 <AM0P192MB0482B9BC65DA7923F3EDF72CEF5F9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
Message-ID: <d68584f1-bffe-e091-4ddc-5ebd7dae8446@spatialys.com>


Le 25/01/2022 ? 15:43, Lesparre, Jochem a ?crit?:
>
> Thanks.
>
> I encountered a new problem:
>
> We use a horizontal grid as well as a vertical grid for the 
> transformation from ETRS89 (EPSG:4937) to our national CRS: RD 
> (EPSG:28992) with NAP height (EPSG:5709). With PROJ4-style strings 
> [1],an interpolation CRS (EPSG:4289) is needed for the Geodetic TIFF 
> grid of the geoid, next to the source (EPSG:4937) and target 
> (EPSG:5709) CRS. To specify this, I have to use --type 
> VERTICAL_TO_VERTICALin the Python script for the conversion from the 
> VDatum grid. This results in the description ?vertical offset? instead 
> of ?geoid undulation?. This is a bit strange, as the grid is in fact a 
> geoid. Problematic is that (according to the documentation [2]) the 
> source and target CRS both must be a vertical CRS, while one is our 
> national levelling height system NAP, but the other is ellipsoidal 
> ETRS89 height.
>
You should use --type GEOGRAPHIC_TO_VERTICAL if it is a geoid file (the 
name is perhaps a bit misleading as the values are to go from vertical 
CRS to geographic CRS but this is the EPSG naming convention for the 
transformation)
>
> The latter doesn?t have a vertical EPSG code. What is the WKT string 
> of ETRS89 ellipsoidal height?
>
You should use EPSG:4937 for ETRS89 geographic 3D
>
> Next to this, I have some new questions on the use of WKT strings 
> instead of EPSG codes for thespecification of a CRS in a Geodetic TIFF 
> grid file:
>
>   * Are the simpler EPSG codes preferred over WKT strings?
>
Yes
>
>   * Is it OK to use a WKT string for the source and a EPSG code for
>     the target,
>
Yes
>
>   * Can I use the WKT string given by EPSG.org for a CRS with an EPSG
>     code and edit the CRS name in this WKT string to use an alias
>     instead of the official EPSG name (see example [3])?
>
You likely need to remove the ID["EPSG",4289] node. And it is a bit 
weird to still use Amesfoort as the datum, since, as far as I 
understand, if 2 geographic 2D CRS that have same axis, units, datum and 
prime meridian, they should be the same... That said that will have 
little consequences since PROJ ignores that anyway.
>
>  *
>
> Regards, Jochem
>
> [1] PROJ4-style transformation from ETRS89 (EPSG:4937) to national 
> horizontal and vertical CRS of the Netherlands:
>
> cs2cs +init=epsg:4937 +to +proj=sterea +lat_0=52.156160556 
> +lon_0=5.387638889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel 
> +nadgrids=rdtrans2018.gsb +units=m +geoidgrids=naptrans2018.gtx 
> +vunits=m+no_defs
>
> [2] 
> https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/README.md 
> <https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/README.md>
>
> [3] WKT string of EPSG:4289 where I replaced the official EPSG name 
> ?Amersfoort? to the official Dutch name ?RD Bessel?:
>
> GEOGCRS["_RD Bessel_",
>
> DATUM["Amersfoort",
>
> ELLIPSOID["Bessel 1841",6377397.155,299.1528128,
>
> LENGTHUNIT["metre",1,
>
> ID["EPSG",9001]
>
> ],
>
> ID["EPSG",7004]
>
> ],
>
> ID["EPSG",6289]],
>
> CS[ellipsoidal,2,
>
> ID["EPSG",6422]
>
> ],
>
> AXIS["latitude (Lat)",north],
>
> AXIS["longitude (Lon)",east],
>
> ANGLEUNIT["degree",0.0174532925199433,
>
> ID["EPSG",9102]
>
> ],
>
> ID["EPSG",4289]
>
> ]
>
> *From:*Even Rouault <even.rouault at spatialys.com>
> *Sent:* maandag 24 januari 2022 21:17
> *To:* Lesparre, Jochem <Jochem.Lesparre at kadaster.nl>; PROJ at lists.osgeo.org
> *Subject:* Re: [PROJ] Correcting metadata in GeoTIFF files
>
> Jochem,
>
> Le 24/01/2022 ? 20:09, Lesparre, Jochem via PROJ a ?crit?:
>
>     Dear list,
>
>     I'm from Netherlands Partnership Geodetic Infrastructure (NSGI).
>     We published NTv2 (.gsb) and VDatum (.gtx) grid files for the
>     national CRS of the Netherlands (RD coordinates with NAP height)
>     in 2019. PROJ converted these to GeoTIFF (.tif) in 2020 [1].
>     Unfortunately, some wrong information was stored in the metadata
>     of the GeoTIFF files in the conversion. We are now creating new
>     GeoTIFF files with corrected metadata, using the Python scrips
>     ntv2_to_gtiff.py [2] and vertoffset_grid_to_gtiff.py [3].
>
>     For most changes in the metadata this is straightforward, but
>     there is one more difficult issue:
>
>     We have two variants of the horizontal transformation:
>
>     1.Conventional 1-step transformation (variant 2): geographic
>     coordinates of national CRS ---[nl_nsgi_rdtrans2018.tif]---> ETRS89
>
>     2.Better 2-step transformation (variant 1): geographic coordinates
>     of national CRS ---[nl_nsgi_rdcorr2018.tif]---> corrected
>     geographic coordinates of national CRS
>     ---[7_parameter_transformation]---> ETRS89
>
>     Since there is no separate EPSG code for the corrected geographic
>     coordinates of the national CRS, we want to use the same EPSG code
>     for both corrected and uncorrected coordinates. Or will it give
>     problems when the source and target CRS of a GeoTIFF file are the
>     same?
>
> Instead of the target_crs_code metadata item, you could include a 
> target_crw_wkt with a WKT2 string. That can be done through the 
> ntv2_to_gtiff.py script as it can accept a WKT2 CRS string as the 
> value for --target-crs.
>
>     Next to this, I have some other questions:
>
>      1. Shouldn't a GeoTIFF grid file for a vertical transformation
>         have an accuracy band like a grid for a horizontal
>         transformation? Is it possible with the Python script to
>         create an accuracy band in the GeoTIFF from a VDatum grid file?
>
> You could possibly add with GDAL standard tools (gdal_translate, etc) 
> a band with the accuracy and a description of 
> "geoid_undulation_accuracy" (you may need to go through a VRT to 
> manually add the Units to the band). The 
> validate_vertical_offset_geographic_to_vertical() method of the 
> check_gtiff_grid.py script would likely have to be updated so that it 
> doesn't emit an information message about the new band not being 
> recognized. And the spec at 
> https://proj.org/specifications/geodetictiffgrids.html 
> <https://secure-web.cisco.com/1IPsQrcS7XiA25_SIbwFzb-QZAKsmLdiZCviwwLfntX_LP5RL4MhT86HqkIDLHoWnxjGPsOj9qatKSQRQ6s-3OgTu2NWmUxO08eXFQDCyBNoiM6PgcO9f94P0uPY5Tod4uKHZ2DYmeBgeH9t6R_uf9AxSLI6uZ7h4ReNQ8fupVoj7z9uP0to6Nlr1Kti7lJycLJvZgYL1hGJywSBwFWky-TKX6tQWP90b26Q0Iub853RFhi4Meej8qTYaHcMfPtczIIxD62IAkCtQyIv3XMdTneUYyFMRszve23cNIudpKQzeuZzt3yS_yl6bQIPnPMO6/https%3A%2F%2Fproj.org%2Fspecifications%2Fgeodetictiffgrids.html>as 
> well
>
>      2. Can I add a recommended_interpolation_method with the Python
>         scripts?
>
> Not currently.? Either enhance them or add the metadata item manually 
> through GDAL tools (gdal_translate -mo 
> recommended_interpolation_method=foo in.tif out.tif -co 
> COMPRESS=DEFLATE -co INTERLEAVE=BAND -co PREDICTOR=3). Note that PROJ 
> itself will ignore that item and always apply bilinear interpolation.
>
>      3. How should I supply the corrected GeoTIFF files to PROJ?
>
> Pull request against https://github.com/OSGeo/PROJ-data 
> <https://github.com/OSGeo/PROJ-data/tree/master/nl_nsgi>
>
>      4. Is it necessary for PROJ to use new files names to distinguish
>         them from the old version with incorrect metadata?
>
> No
>
>     5.
>
>     Regards, Jochem
>
>     [1] https://github.com/OSGeo/PROJ-data/tree/master/nl_nsgi
>     <https://github.com/OSGeo/PROJ-data/tree/master/nl_nsgi>
>
>     [2]
>     https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/ntv2_to_gtiff.py
>     <https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/ntv2_to_gtiff.py>
>
>     [3]
>     https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/vertoffset_grid_to_gtiff.py
>     <https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/vertoffset_grid_to_gtiff.py>
>
>     **
>
>     J. Lesparre
>
>     Netherlands Partnership Geodetic Infrastructure (NSGI.nl)
>
>
>
>     Disclaimer:
>     De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd
>     voor de geadresseerde(n).
>     Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of
>     verstrekking van deze informatie aan derden is niet toegestaan.
>     Op al onze producten en diensten zijn onze algemene
>     leveringsvoorwaarden van toepassing
>     [https://www.kadaster.nl/algemene-leveringsvoorwaarden
>     <https://www.kadaster.nl/algemene-leveringsvoorwaarden>].
>
>     Disclaimer:
>     This email and any files transmitted with it are confidential and
>     intended solely for the use of the individual or entity to whom
>     they are addressed.
>     If you are not the intended recipient, you are notified that
>     disclosing, copying, distributing or taking any action in reliance
>     on the contents of this information is strictly prohibited.
>     Our general terms and conditions of delivery apply to all our
>     products and services
>     [https://www.kadaster.com/general-terms-and-conditions
>     <https://secure-web.cisco.com/1fU8sg4FrMFO4TyIW9ZofFSwdqxB0Kag8iZvKOseM_86a_Jx5Z2YV1Hrtt_e8mtlHLMQ0H8zu1i3lanHmsFjggZd1QXIC7i_zohRumwvppYst-xwoiyIzVpRIaUe7MImO2MSCS5aoznYYHb6E-LdzL2tarUM3ByI1fBzPf6EX-yQBpfd_vLLLUaYH2he7-jy3HzpLC2iu2ee6zOAfHGtKhEMeppr62m_f186VKNfXWlLwAxhGXGppzPfI_g4RpQ9OMJiT8koLCKdzzpwTMdFYDY2DaE08KWCvO9WNaB0ciQrOfxgdxfjiQ802OXi4mhKe/https%3A%2F%2Fwww.kadaster.com%2Fgeneral-terms-and-conditions>].
>
>
>
>     _______________________________________________
>
>     PROJ mailing list
>
>     PROJ at lists.osgeo.org  <mailto:PROJ at lists.osgeo.org>
>
>     https://lists.osgeo.org/mailman/listinfo/proj  <https://lists.osgeo.org/mailman/listinfo/proj>
>
> -- 
> http://www.spatialys.com  <http://secure-web.cisco.com/1fXZS9zkl1X2JBd5DEK4YAq1gPWoDfSCpDSaFlOf5HpAUYrV7SIEw12ok2xJ1dLlvazjXyElbKEjEJLnTBo5NsMUQgMzUh1-_47mgVQpSA2Wih89heEKMsI5iXG5QbxXLAERdl1W-2up80jCvknOD8vY83_Wh-5g43WZIwWQNwaJ38eTscgBCOajh8Bgq8Xmw06STQekuuToXJWmYwQ6woQiNYlE3tHnjcvuhJOGF6aedm4xTRlC4hjYeQ9b8T3HPmwawXXFsXFnlPiuOSR06jIeZ0FCvBXtbexj0ZloQCmzM8W3sBGc11dNGXri3ia7w/http%3A%2F%2Fwww.spatialys.com>
> My software is free, but my time generally not.
>
>
> Disclaimer:
> De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor 
> de geadresseerde(n).
> Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of 
> verstrekking van deze informatie aan derden is niet toegestaan.
> Op al onze producten en diensten zijn onze algemene 
> leveringsvoorwaarden van toepassing
> [https://www.kadaster.nl/algemene-leveringsvoorwaarden].
>
> Disclaimer:
> This email and any files transmitted with it are confidential and 
> intended solely for the use of the individual or entity to whom they 
> are addressed.
> If you are not the intended recipient, you are notified that 
> disclosing, copying, distributing or taking any action in reliance on 
> the contents of this information is strictly prohibited.
> Our general terms and conditions of delivery apply to all our products 
> and services
> [https://www.kadaster.com/general-terms-and-conditions].

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220125/610182ed/attachment-0001.html>

From Jochem.Lesparre at kadaster.nl  Wed Jan 26 11:54:17 2022
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Wed, 26 Jan 2022 19:54:17 +0000
Subject: [PROJ] Correcting metadata in GeoTIFF files
In-Reply-To: <d68584f1-bffe-e091-4ddc-5ebd7dae8446@spatialys.com>
References: <AM0P192MB0482A6AD0F1ADD46EEA1312AEF5E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <6c8c18a6-cd5b-4e15-5a45-13f5955280b5@spatialys.com>
 <AM0P192MB0482B9BC65DA7923F3EDF72CEF5F9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <d68584f1-bffe-e091-4ddc-5ebd7dae8446@spatialys.com>
Message-ID: <AM0P192MB0482F4D50704BFD65CF704EDEF209@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Hi Even,

Thanks again for your quick reply, but I think you misunderstood the problem I tried to describe in my last email. I'll try to explain our problem a bit more comprehensive:

We distribute two grid files for the quasi-geoid of the Netherlands: NLGEO2018 and NAPTRANS2018. Both expect ETRS89 (EPSG:4937) ellipsoidal height as input and give the same NAP national levelling system height (EPSG:5709) as output. However, the latlon coordinates of NLGEO2018 are in ETRS89 and the latlon coordinates of NAPTRANS2018 are in the national triangulation system "Amersfoort" (EPSG:4289). We prefer the use of the NLGEO2018. We supply NAPTRANS2018 only because this is the type of VDatum grid file that was needed for 3D transformation with PROJ4 (see [1] in my previous email).

Creating a Geodetic TIFF Grid file for NLGEO2018 is straight-forward [A]. However, I can't create a Geodetic TIFF Grid file for NAPTRANS2018. If I use GEOGRAPHIC_TO_VERTICAL the --interpolation-crs is ignored [B]. If I use VERTICAL_TO_VERTICAL, I get AssertionError due to the use of a 3D instead of a vertical --source-crs [C]. This confuses me, since our use case would probably not be the only VDatum grid with this problem.


[A] Creating a Geodetic TIFF Grid file for NLGEO2018 is straight-forward:
python vertoffset_grid_to_gtiff.py --type GEOGRAPHIC_TO_VERTICAL --area-of-use "European Netherlands including EEZ of the North Sea" --source-crs EPSG:4937 --target-crs EPSG:5709 --copyright "Nederlandse Samenwerking Geodetische Infrastructuur (NSGI). Creative Commons Attribution 4.0 International licence https://creativecommons/licenses/by/4.0/" nlgeo2018.gtx nlgeo2018.tif

Result: OK


[B] Creating a Geodetic TIFF Grid file for NAPTRANS2018 as I expected it to be done:
python vertoffset_grid_to_gtiff.py --type GEOGRAPHIC_TO_VERTICAL --area-of-use "European Netherlands including EEZ of the North Sea" --source-crs EPSG:4937 --target-crs EPSG:5709 --interpolation-crs EPSG:4289 --copyright "Nederlandse Samenwerking Geodetische Infrastructuur (NSGI). Creative Commons Attribution 4.0 International licence https://creativecommons/licenses/by/4.0/" naptrans2018.gtx naptrans2018.tif

Result: interpolation-crs ignored


[C] NAPTRANS2018 using VERTICAL_TO_VERTICAL instead
python vertoffset_grid_to_gtiff.py --type VERTICAL_TO_VERTICAL --area-of-use "European Netherlands including EEZ of the North Sea" --source-crs EPSG:4937 --target-crs EPSG:5709 --interpolation-crs EPSG:4289 --copyright "Nederlandse Samenwerking Geodetische Infrastructuur (NSGI). Creative Commons Attribution 4.0 International licence https://creativecommons/licenses/by/4.0/" naptrans2018.gtx naptrans2018.tif

Result: AssertionError due to 3D instead of vertical source-crs

Regards, Jochem



From: Even Rouault <even.rouault at spatialys.com>
Sent: dinsdag 25 januari 2022 15:58
To: Lesparre, Jochem <Jochem.Lesparre at kadaster.nl>; PROJ at lists.osgeo.org
Subject: Re: [PROJ] Correcting metadata in GeoTIFF files



Le 25/01/2022 ? 15:43, Lesparre, Jochem a ?crit :
Thanks.

I encountered a new problem:
We use a horizontal grid as well as a vertical grid for the transformation from ETRS89 (EPSG:4937) to our national CRS: RD (EPSG:28992) with NAP height (EPSG:5709). With PROJ4-style strings [1], an interpolation CRS (EPSG:4289) is needed for the Geodetic TIFF grid of the geoid, next to the source (EPSG:4937) and target (EPSG:5709) CRS. To specify this, I have to use --type VERTICAL_TO_VERTICAL in the Python script for the conversion from the VDatum grid. This results in the description "vertical offset" instead of "geoid undulation". This is a bit strange, as the grid is in fact a geoid. Problematic is that (according to the documentation [2]) the source and target CRS both must be a vertical CRS, while one is our national levelling height system NAP, but the other is ellipsoidal ETRS89 height.
You should use --type GEOGRAPHIC_TO_VERTICAL if it is a geoid file (the name is perhaps a bit misleading as the values are to go from vertical CRS to geographic CRS but this is the EPSG naming convention for the transformation)

The latter doesn't have a vertical EPSG code. What is the WKT string of ETRS89 ellipsoidal height?
You should use EPSG:4937 for ETRS89 geographic 3D


Next to this, I have some new questions on the use of WKT strings instead of EPSG codes for the specification of a CRS in a Geodetic TIFF grid file:

1.       Are the simpler EPSG codes preferred over WKT strings?
Yes


2.       Is it OK to use a WKT string for the source and a EPSG code for the target,
Yes



3.       Can I use the WKT string given by EPSG.org for a CRS with an EPSG code and edit the CRS name in this WKT string to use an alias instead of the official EPSG name (see example [3])?
You likely need to remove the ID["EPSG",4289] node. And it is a bit weird to still use Amesfoort as the datum, since, as far as I understand, if 2 geographic 2D CRS that have same axis, units, datum and prime meridian, they should be the same... That said that will have little consequences since PROJ ignores that anyway.


4.

Regards, Jochem



[1] PROJ4-style transformation from ETRS89 (EPSG:4937) to national horizontal and vertical CRS of the Netherlands:
cs2cs +init=epsg:4937 +to +proj=sterea +lat_0=52.156160556 +lon_0=5.387638889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +nadgrids=rdtrans2018.gsb +units=m +geoidgrids=naptrans2018.gtx +vunits=m +no_defs

[2] https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/README.md

[3] WKT string of EPSG:4289 where I replaced the official EPSG name "Amersfoort" to the official Dutch name "RD Bessel":
GEOGCRS["RD Bessel",
   DATUM["Amersfoort",
      ELLIPSOID["Bessel 1841",6377397.155,299.1528128,
         LENGTHUNIT["metre",1,
            ID["EPSG",9001]
         ],
         ID["EPSG",7004]
      ],
      ID["EPSG",6289]],
   CS[ellipsoidal,2,
      ID["EPSG",6422]
   ],
   AXIS["latitude (Lat)",north],
   AXIS["longitude (Lon)",east],
   ANGLEUNIT["degree",0.0174532925199433,
      ID["EPSG",9102]
   ],
   ID["EPSG",4289]
]


From: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Sent: maandag 24 januari 2022 21:17
To: Lesparre, Jochem <Jochem.Lesparre at kadaster.nl><mailto:Jochem.Lesparre at kadaster.nl>; PROJ at lists.osgeo.org<mailto:PROJ at lists.osgeo.org>
Subject: Re: [PROJ] Correcting metadata in GeoTIFF files


Jochem,
Le 24/01/2022 ? 20:09, Lesparre, Jochem via PROJ a ?crit :

Dear list,



I'm from Netherlands Partnership Geodetic Infrastructure (NSGI). We published NTv2 (.gsb) and VDatum (.gtx) grid files for the national CRS of the Netherlands (RD coordinates with NAP height) in 2019. PROJ converted these to GeoTIFF (.tif) in 2020 [1]. Unfortunately, some wrong information was stored in the metadata of the GeoTIFF files in the conversion. We are now creating new GeoTIFF files with corrected metadata, using the Python scrips ntv2_to_gtiff.py [2] and vertoffset_grid_to_gtiff.py [3].



For most changes in the metadata this is straightforward, but there is one more difficult issue:

We have two variants of the horizontal transformation:

1.       Conventional 1-step transformation (variant 2): geographic coordinates of national CRS ---[nl_nsgi_rdtrans2018.tif]---> ETRS89

2.       Better 2-step transformation (variant 1): geographic coordinates of national CRS ---[nl_nsgi_rdcorr2018.tif]---> corrected geographic coordinates of national CRS ---[7_parameter_transformation]---> ETRS89

Since there is no separate EPSG code for the corrected geographic coordinates of the national CRS, we want to use the same EPSG code for both corrected and uncorrected coordinates. Or will it give problems when the source and target CRS of a GeoTIFF file are the same?

Instead of the target_crs_code metadata item, you could include a target_crw_wkt with a WKT2 string. That can be done through the ntv2_to_gtiff.py script as it can accept a WKT2 CRS string as the value for --target-crs.



Next to this, I have some other questions:

  1.  Shouldn't a GeoTIFF grid file for a vertical transformation have an accuracy band like a grid for a horizontal transformation? Is it possible with the Python script to create an accuracy band in the GeoTIFF from a VDatum grid file?

You could possibly add with GDAL standard tools (gdal_translate, etc) a band with the accuracy and a description of "geoid_undulation_accuracy" (you may need to go through a VRT to manually add the Units to the band). The validate_vertical_offset_geographic_to_vertical() method of the check_gtiff_grid.py script would likely have to be updated so that it doesn't emit an information message about the new band not being recognized. And the spec at https://proj.org/specifications/geodetictiffgrids.html<https://secure-web.cisco.com/1IPsQrcS7XiA25_SIbwFzb-QZAKsmLdiZCviwwLfntX_LP5RL4MhT86HqkIDLHoWnxjGPsOj9qatKSQRQ6s-3OgTu2NWmUxO08eXFQDCyBNoiM6PgcO9f94P0uPY5Tod4uKHZ2DYmeBgeH9t6R_uf9AxSLI6uZ7h4ReNQ8fupVoj7z9uP0to6Nlr1Kti7lJycLJvZgYL1hGJywSBwFWky-TKX6tQWP90b26Q0Iub853RFhi4Meej8qTYaHcMfPtczIIxD62IAkCtQyIv3XMdTneUYyFMRszve23cNIudpKQzeuZzt3yS_yl6bQIPnPMO6/https%3A%2F%2Fproj.org%2Fspecifications%2Fgeodetictiffgrids.html> as well



  1.  Can I add a recommended_interpolation_method with the Python scripts?
Not currently.  Either enhance them or add the metadata item manually through GDAL tools (gdal_translate -mo recommended_interpolation_method=foo in.tif out.tif -co COMPRESS=DEFLATE -co INTERLEAVE=BAND -co PREDICTOR=3). Note that PROJ itself will ignore that item and always apply bilinear interpolation.



  1.  How should I supply the corrected GeoTIFF files to PROJ?
Pull request against https://github.com/OSGeo/PROJ-data<https://github.com/OSGeo/PROJ-data/tree/master/nl_nsgi>


  1.  Is it necessary for PROJ to use new files names to distinguish them from the old version with incorrect metadata?
No



  1.



Regards, Jochem



[1] https://github.com/OSGeo/PROJ-data/tree/master/nl_nsgi

[2] https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/ntv2_to_gtiff.py

[3] https://github.com/OSGeo/PROJ-data/blob/master/grid_tools/vertoffset_grid_to_gtiff.py





J. Lesparre

Netherlands Partnership Geodetic Infrastructure (NSGI.nl)






Disclaimer:
De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor de geadresseerde(n).
Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of verstrekking van deze informatie aan derden is niet toegestaan.
Op al onze producten en diensten zijn onze algemene leveringsvoorwaarden van toepassing
[https://www.kadaster.nl/algemene-leveringsvoorwaarden].

Disclaimer:
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed.
If you are not the intended recipient, you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.
Our general terms and conditions of delivery apply to all our products and services
[https://www.kadaster.com/general-terms-and-conditions<https://secure-web.cisco.com/1fU8sg4FrMFO4TyIW9ZofFSwdqxB0Kag8iZvKOseM_86a_Jx5Z2YV1Hrtt_e8mtlHLMQ0H8zu1i3lanHmsFjggZd1QXIC7i_zohRumwvppYst-xwoiyIzVpRIaUe7MImO2MSCS5aoznYYHb6E-LdzL2tarUM3ByI1fBzPf6EX-yQBpfd_vLLLUaYH2he7-jy3HzpLC2iu2ee6zOAfHGtKhEMeppr62m_f186VKNfXWlLwAxhGXGppzPfI_g4RpQ9OMJiT8koLCKdzzpwTMdFYDY2DaE08KWCvO9WNaB0ciQrOfxgdxfjiQ802OXi4mhKe/https%3A%2F%2Fwww.kadaster.com%2Fgeneral-terms-and-conditions>].




_______________________________________________

PROJ mailing list

PROJ at lists.osgeo.org<mailto:PROJ at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/proj

--

http://www.spatialys.com<http://secure-web.cisco.com/1fXZS9zkl1X2JBd5DEK4YAq1gPWoDfSCpDSaFlOf5HpAUYrV7SIEw12ok2xJ1dLlvazjXyElbKEjEJLnTBo5NsMUQgMzUh1-_47mgVQpSA2Wih89heEKMsI5iXG5QbxXLAERdl1W-2up80jCvknOD8vY83_Wh-5g43WZIwWQNwaJ38eTscgBCOajh8Bgq8Xmw06STQekuuToXJWmYwQ6woQiNYlE3tHnjcvuhJOGF6aedm4xTRlC4hjYeQ9b8T3HPmwawXXFsXFnlPiuOSR06jIeZ0FCvBXtbexj0ZloQCmzM8W3sBGc11dNGXri3ia7w/http%3A%2F%2Fwww.spatialys.com>

My software is free, but my time generally not.


Disclaimer:
De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor de geadresseerde(n).
Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of verstrekking van deze informatie aan derden is niet toegestaan.
Op al onze producten en diensten zijn onze algemene leveringsvoorwaarden van toepassing
[https://www.kadaster.nl/algemene-leveringsvoorwaarden].

Disclaimer:
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed.
If you are not the intended recipient, you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.
Our general terms and conditions of delivery apply to all our products and services
[https://www.kadaster.com/general-terms-and-conditions<https://secure-web.cisco.com/1Rhnb2SuM-ZisQ5-ehSorBEaEAymp3uWVHsbgnlOs1Pg5MgVrsPjC7O8qTjD4zT80_6Xn1RawtVUWqlKkCdVIMiapAnSV6eAnPZUsK2JJhMZsWvP4SEVK9tdjcphLVMKBb8TXeu7NFSS6QXoxNn9xjRjduRUV1SOtN0x7PgayMSReCgEDVClEN8TQJxMvxRfFhCldHWr6FP2eavQotePbR4Ywg-kQn1stVzboPN0PeuHNKOVfJWhmqp4AIe58aZyLwgTXIENtf7myj6SP_fzPT0RKDzdxx5Bn7Qnh0FcCeUhlH8n2FTZNj6O-eHXprtRCq8RPUiUODDiRzvSnHATXvrDLhbXeryc5xMaVfHnlhsA/https%3A%2F%2Fwww.kadaster.com%2Fgeneral-terms-and-conditions>].

--

http://www.spatialys.com<http://secure-web.cisco.com/1LU8njMfYmMFaFPapILcBM73tvtUOgBd-EEc7zqR2Vk9u3neho5DJev426ic0f46uR_eq5VF0Bqp-RFLefFqoLhaF2inDhGAZgnd5N6ho4piq66Ib4z9Ofr5VTjgAv2QzcdUtWHHHgmkCtRTNBrW46MafOphoV-gY7zxxMHnmefFFNYAHWH2dTmXr73fCLBLmrXOKOzWA8RNSBPR33Lyktcr0Fh3qpSVbr_HPcjjd4QDQWHP__uoaASTHBzE3OXCuYDzm5BeqrVuM3T9qe_P1bBy78Apc6PItZR4oQfxICykNd2aay1UZnhTBVWzaWp6AD3K8lx-f7LYv50X_XY8Oz8hPfe-0Rt2IObmC5axZy3Y/http%3A%2F%2Fwww.spatialys.com>

My software is free, but my time generally not.


Disclaimer:
De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor de geadresseerde(n).
Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of verstrekking van deze informatie aan derden is niet toegestaan.
Op al onze producten en diensten zijn onze algemene leveringsvoorwaarden van toepassing
[https://www.kadaster.nl/algemene-leveringsvoorwaarden].

Disclaimer:
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed.
If you are not the intended recipient, you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.
Our general terms and conditions of delivery apply to all our products and services
[https://www.kadaster.com/general-terms-and-conditions].
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220126/e58699a4/attachment-0001.html>

From even.rouault at spatialys.com  Wed Jan 26 12:38:12 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 26 Jan 2022 21:38:12 +0100
Subject: [PROJ] Correcting metadata in GeoTIFF files
In-Reply-To: <AM0P192MB0482F4D50704BFD65CF704EDEF209@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
References: <AM0P192MB0482A6AD0F1ADD46EEA1312AEF5E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <6c8c18a6-cd5b-4e15-5a45-13f5955280b5@spatialys.com>
 <AM0P192MB0482B9BC65DA7923F3EDF72CEF5F9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <d68584f1-bffe-e091-4ddc-5ebd7dae8446@spatialys.com>
 <AM0P192MB0482F4D50704BFD65CF704EDEF209@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
Message-ID: <f9195fca-8b9e-8c8d-4031-7d86ecaae2d2@spatialys.com>


Le 26/01/2022 ? 20:54, Lesparre, Jochem a ?crit?:
>
> Hi Even,
>
> Thanks again for your quick reply, but I think you misunderstood the 
> problem I tried to describe in my last email. I?ll try to explain our 
> problem a bit more comprehensive:
>
> We distribute two grid files for the quasi-geoid of the Netherlands: 
> NLGEO2018 and NAPTRANS2018. Both expect ETRS89 (EPSG:4937) ellipsoidal 
> height as input and give the same NAP national levelling system height 
> (EPSG:5709) as output. However, the latlon coordinates of NLGEO2018 
> are in ETRS89 and the latlon coordinates of NAPTRANS2018 are in the 
> national triangulation system ?Amersfoort? (EPSG:4289). We prefer the 
> use of the NLGEO2018. We supply NAPTRANS2018 only because this is the 
> type of VDatum grid file that was needed for 3D transformation with 
> PROJ4 (see [1] in my previous email).
>
ok got it
>
> Creating a Geodetic TIFF Grid file for NLGEO2018 is straight-forward 
> [A]. However, I can?t create a Geodetic TIFF Grid file for NAPTRANS2018.
>

> If I use GEOGRAPHIC_TO_VERTICALthe --interpolation-crsis ignored [B].
>
Yes, this is indeed ignored. That type is modeled from the EPSG 
corresponding transformation method "Geographic3D to 
GravityRelatedHeight", and it doesn't accept an interpolation CRS. Your 
best option is to use gdal_translate -mo interpolation_crs_wkt=.... to 
add it


> If I use VERTICAL_TO_VERTICAL, I get AssertionErrordue to the use of a 
> 3D instead of a vertical --source-crs[C].
>
Using VERTICAL_TO_VERTICAL is definitely not appropriate for your use case.


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220126/67c13693/attachment.html>

From mwtoews at gmail.com  Thu Jan 27 14:03:47 2022
From: mwtoews at gmail.com (Mike Taves)
Date: Fri, 28 Jan 2022 11:03:47 +1300
Subject: [PROJ] Dropping autotools on master branch
Message-ID: <CAM2FmMqk1fy7GOy8gLmbocXUA1V7XQF+tEJkrM8yhdsUXK1=oA@mail.gmail.com>

Hi all,

This is a notice to developers that are using PROJ for build scripts.
We are about to finally drop autotools out of the master branch, so
ensure that PROJ is built using CMake 3.9 or newer.

PROJ 9.0 will only support CMake
(https://proj.org/community/rfc/rfc-7.html). Expect to see at least
one release candidate in February, and a final release around 1 March.

Cheers,
Mike

From Jochem.Lesparre at kadaster.nl  Fri Jan 28 04:08:34 2022
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Fri, 28 Jan 2022 12:08:34 +0000
Subject: [PROJ] Correcting metadata in GeoTIFF files
In-Reply-To: <f9195fca-8b9e-8c8d-4031-7d86ecaae2d2@spatialys.com>
References: <AM0P192MB0482A6AD0F1ADD46EEA1312AEF5E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <6c8c18a6-cd5b-4e15-5a45-13f5955280b5@spatialys.com>
 <AM0P192MB0482B9BC65DA7923F3EDF72CEF5F9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <d68584f1-bffe-e091-4ddc-5ebd7dae8446@spatialys.com>
 <AM0P192MB0482F4D50704BFD65CF704EDEF209@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <f9195fca-8b9e-8c8d-4031-7d86ecaae2d2@spatialys.com>
Message-ID: <AM0P192MB0482D3E9A8BE244DD1A569CDEF229@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Hi Even,

Thanks for the quick and clear reply. I now found the description for this use case at proj.org, which explicitly mentions the naptrans grid of the Netherlands as example (sorry for not RTFM). I have some remaining questions, though:

  *   Why is this use case not more common? This [1] was the standard way to get a transformation to a national compound CRS in PROJ4, right?
  *   Since the CRS of the GeoTIFF is the source-crs [2], does this mean that other software will would show the grid values at the latlon of the source-crs instead of at the latlon of the interpolation-crs?

Additional question on names and aliases:

  *   For EPSG:4289, the EPSG registry uses the name ?Amersfoort?. However, we (the official authority of this CRS) never use this name. Since the name ?Amersfoort? has been in EPSG for a long time, EPSG preferred not to correct this, but to add the official name ?RD Bessel? as an alias in the EPSG registry. Can I use the official alias ?RD Bessel? instead of the EPSG name ?Amersfoort? for the WKT strings and/or the description in the metadata of the Geodetic TIFF Grids?

Regards, Jochem


[1] PROJ4-style transformation to national compound CRS of the Netherlands:

cs2cs +init=epsg:4937 +to +proj=sterea +lat_0=52.156160556 +lon_0=5.387638889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +nadgrids=rdtrans2018.gsb +units=m +geoidgrids=naptrans2018.gtx +vunits=m +no_defs


[2] Result of gdalinfo:

Driver: GTiff/GeoTIFF
Files: naptrans2018.tif
Size is 301, 481
Coordinate System is:
GEOGCRS["ETRF2000",
    DATUM["European Terrestrial Reference Frame 2000",
        ELLIPSOID["GRS 1980",6378137,298.257222101,
            LENGTHUNIT["metre",1]]],
    PRIMEM["Greenwich",0,
        ANGLEUNIT["degree",0.0174532925199433]],
    CS[ellipsoidal,3],
        AXIS["geodetic latitude (Lat)",north,
            ORDER[1],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["geodetic longitude (Lon)",east,
            ORDER[2],
            ANGLEUNIT["degree",0.0174532925199433]],
        AXIS["ellipsoidal height (h)",up,
            ORDER[3],
            LENGTHUNIT["metre",1]],
    USAGE[
        SCOPE["Geodesy."],
        AREA["Europe - onshore and offshore: Albania; Andorra; Austria; Belgium; Bosnia and Herzegovina; Bulgaria; Croatia; Cyprus; Czechia; Denmark; Estonia; Faroe Islands; Finland; France; Germany; Gibraltar; Greece; Hungary; Ireland; Italy; Kosovo; Latvia; Liechtenstein; Lithuania; Luxembourg; Malta; Moldova; Monaco; Montenegro; Netherlands; North Macedonia; Norway including Svalbard and Jan Mayen; Poland; Portugal; Romania; San Marino; Serbia; Slovakia; Slovenia; Spain; Sweden; Switzerland; United Kingdom (UK) including Channel Islands and Isle of Man; Vatican City State."],
        BBOX[32.88,-16.1,84.73,40.18]],
    ID["EPSG",7931]]
Data axis to CRS axis mapping: 2,1,3
Origin = (1.990000000000000,56.006250000000001)
Pixel Size = (0.020000000000000,-0.012500000000000)
Metadata:
  area_of_use=European Netherlands including EEZ of the North Sea
  AREA_OR_POINT=Point
  interpolation_crs_wkt=GEOGCRS[Amersfoort,DATUM[Amersfoort,ELLIPSOID[Bessel 1841,6377397.155,299.1528128,LENGTHUNIT[metre,1,ID[EPSG,9001]],ID[EPSG,7004]],ID[EPSG,6289]],CS[ellipsoidal,2,ID[EPSG,6422]],AXIS[latitude (Lat),north],AXIS[longitude (Lon),east],ANGLEUNIT[degree,0.0174532925199433,ID[EPSG,9102]],ID[EPSG,4289]]
  target_crs_epsg_code=5709
  TIFFTAG_COPYRIGHT=Nederlandse Samenwerking Geodetische Infrastructuur (NSGI). Creative Commons Attribution 4.0 International licence https://creativecommons/licenses/by/4.0/
  TIFFTAG_DATETIME=2022:01:28 00:00:00
  TIFFTAG_IMAGEDESCRIPTION=ETRF2000 (EPSG:7931) to NAP height (EPSG:5709). Converted from naptrans2018.gtx (last modified at 2019/03/22)
  TYPE=VERTICAL_OFFSET_GEOGRAPHIC_TO_VERTICAL
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (   1.9900000,  56.0062500) (  1d59'24.00"E, 56d 0'22.50"N)
Lower Left  (   1.9900000,  49.9937500) (  1d59'24.00"E, 49d59'37.50"N)
Upper Right (   8.0100000,  56.0062500) (  8d 0'36.00"E, 56d 0'22.50"N)
Lower Right (   8.0100000,  49.9937500) (  8d 0'36.00"E, 49d59'37.50"N)
Center      (   5.0000000,  53.0000000) (  5d 0' 0.00"E, 53d 0' 0.00"N)
Band 1 Block=301x6 Type=Float32, ColorInterp=Gray
  Description = geoid_undulation
  Unit Type: metre





Disclaimer:
De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor de geadresseerde(n).
Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of verstrekking van deze informatie aan derden is niet toegestaan.
Op al onze producten en diensten zijn onze algemene leveringsvoorwaarden van toepassing
[https://www.kadaster.nl/algemene-leveringsvoorwaarden].

Disclaimer:
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed.
If you are not the intended recipient, you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.
Our general terms and conditions of delivery apply to all our products and services
[https://www.kadaster.com/general-terms-and-conditions].
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220128/0f501c19/attachment-0001.html>

From even.rouault at spatialys.com  Fri Jan 28 06:58:12 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 28 Jan 2022 15:58:12 +0100
Subject: [PROJ] Correcting metadata in GeoTIFF files
In-Reply-To: <AM0P192MB0482D3E9A8BE244DD1A569CDEF229@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
References: <AM0P192MB0482A6AD0F1ADD46EEA1312AEF5E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <6c8c18a6-cd5b-4e15-5a45-13f5955280b5@spatialys.com>
 <AM0P192MB0482B9BC65DA7923F3EDF72CEF5F9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <d68584f1-bffe-e091-4ddc-5ebd7dae8446@spatialys.com>
 <AM0P192MB0482F4D50704BFD65CF704EDEF209@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <f9195fca-8b9e-8c8d-4031-7d86ecaae2d2@spatialys.com>
 <AM0P192MB0482D3E9A8BE244DD1A569CDEF229@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
Message-ID: <6c9d19ee-9556-1c53-9692-b465309e0140@spatialys.com>


Le 28/01/2022 ? 13:08, Lesparre, Jochem a ?crit?:
>
> Hi Even,
>
> Thanks for the quick and clear reply. I now found the description for 
> this use case at proj.org, which explicitly mentions the naptrans grid 
> of the Netherlands as example (sorry for not RTFM). I have some 
> remaining questions, though:
>
>   * Why is this use case not more common? This [1] was the standard
>     way to get a transformation to a national compound CRS in PROJ4,
>     right?
>
Looking at the 'epsg' file that was delivered in PROJ < 6, there's no 
single entry having both +nadgrids and +geoidgrids in it. I'm not 
completely sure if the fact that the order of those operations was the 
one you expected was a design decision or just the result of a 50% 50% 
dice throw.

Hum but now I'm lost, if doing EPSG:4937 to "+proj=sterea 
+lat_0=52.156160556 +lon_0=5.387638889 +k=0.9999079 +x_0=155000 
+y_0=463000 +ellps=bessel +nadgrids=rdtrans2018.gsb +units=m 
+geoidgrids=naptrans2018.gtx +vunits=m +no_defs"

- with recent PROJ, it? does ... +step +inv +proj=vgridshift 
+grids=naptrans2018.gtx +multiplier=1? +step +inv +proj=hgridshift 
+grids=nl_nsgi_rdtrans2018.tif , so vertical adjustment then horizontal

- but my understanding of the PROJ <6 code is that it does in the 
reverse order.

playing with cs2cs & cct, I can actually confirm this. There's a 
difference in vertical values of the order of a few millimeters, whereas 
if I modify the pipeline to do horizontal then vertical, I get the PROJ 
< 6 results with a sub-millimeter precision. Who is right, who is 
wrong:? I give up. At that point we probably just need to accept the 
discrepancy as nobody raised it. Bottom line: use cct instead of cs2cs 
to unambiguously control the order of operations.

Actually I found an older thread about that : 
https://lists.osgeo.org/pipermail/proj/2019-May/008526.html and it 
already gave me tons of headaches...

using the EPSG:7415 code gives the expected result (but I now see that 
it is because it uses the nlgeo2018 grid)

$ echo 53 6 0 | PROJ_NETWORK=ON PROJ_LIB=data bin/cs2cs -f "%.4f" 
EPSG:4937 EPSG:7415
196139.4316??? 557179.0261 -41.6949

whereas using the PROJ.4 string for EPSG:7415 results (in PROJ >= 6) in 
the reverse order for horizontal & vertical adjustments

$ echo 53 6 0 | PROJ_NETWORK=ON PROJ_LIB=data bin/cs2cs -f "%.4f" 
EPSG:4937 +to "+proj=sterea +lat_0=52.156160556 +lon_0=5.387638889 
+k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel 
+nadgrids=rdtrans2018.gsb +units=m +geoidgrids=naptrans2018.gtx 
+vunits=m +no_defs +type=crs"
196139.4316??? 557179.0261 -41.6982

>   * Since the CRS of the GeoTIFF is the source-crs [2], does this mean
>     that other software will would show the grid values at the latlon
>     of the source-crs instead of at the latlon of the interpolation-crs?
>
On reflection, it might be better to have the GeoTIFF SRS be the 
interpolation CRS (like in the VERTICAL_TO_VERTICAL case, but in that 
case there's no other sane choice), an explicit source_crs_code=7931 and 
interpolation_crs_wkt=....??? The 
https://proj.org/specifications/geodetictiffgrids.html page should be 
amended to document that, and the validation script too.? And perhaps 
the conversion script too if that's thought to be a not-so-rare use case.
>
>  *
>
>
> Additional question on names and aliases:
>
>   * For EPSG:4289, the EPSG registry uses the name ?Amersfoort?.
>     However, we (the official authority of this CRS) never use this
>     name. Since the name ?Amersfoort? has been in EPSG for a long
>     time, EPSG preferred not to correct this, but to add the official
>     name ?RD Bessel? as an alias in the EPSG registry. Can I use the
>     official alias ?RD Bessel? instead of the EPSG name ?Amersfoort?
>     for the WKT strings and/or the description in the metadata of the
>     Geodetic TIFF Grids?
>
I guess that's OK, adding just a bit more confusion to an already super 
confusing topic

Note: I'm not sure if it is a formatting issue when writing the email, 
but the value of the interpolation_crs_wkt item is wrong as it lacks 
double quoting around strings.


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220128/50bc6991/attachment.html>

From Jochem.Lesparre at kadaster.nl  Mon Jan 31 03:45:20 2022
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Mon, 31 Jan 2022 11:45:20 +0000
Subject: [PROJ] Correcting metadata in GeoTIFF files
In-Reply-To: <6c9d19ee-9556-1c53-9692-b465309e0140@spatialys.com>
References: <AM0P192MB0482A6AD0F1ADD46EEA1312AEF5E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <6c8c18a6-cd5b-4e15-5a45-13f5955280b5@spatialys.com>
 <AM0P192MB0482B9BC65DA7923F3EDF72CEF5F9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <d68584f1-bffe-e091-4ddc-5ebd7dae8446@spatialys.com>
 <AM0P192MB0482F4D50704BFD65CF704EDEF209@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <f9195fca-8b9e-8c8d-4031-7d86ecaae2d2@spatialys.com>
 <AM0P192MB0482D3E9A8BE244DD1A569CDEF229@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <6c9d19ee-9556-1c53-9692-b465309e0140@spatialys.com>
Message-ID: <AM0P192MB0482CC870191B6BD4F60CD58EF259@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Hi Even,

> Looking at the 'epsg' file that was delivered in PROJ < 6, there's no single entry having both +nadgrids and +geoidgrids in it.

That just means that countries did not take the effort to register their national projected 2D CRS and national levelling height system as a compound CRS in EPSG. Or that the precise transformation grids are not registered in EPSG. However, I expect that most countries in the world will have at least one such compound CRS in use which would need a horizontal and vertical grid.

> I'm not completely sure if the fact that the order of those operations was the one you expected was a design decision or just the result of a 50% 50% dice throw.

We noticed that PROJ4 used to do the horizontal transformation first, so we created our naptrans2008.gtx based on ?Amersfoort? instead of ETRS89 horizontally. We didn?t like this, but this was the only way of getting the hight transformation exactly right.

> Hum but now I'm lost, if doing EPSG:4937 to "+proj=sterea +lat_0=52.156160556 +lon_0=5.387638889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +nadgrids=rdtrans2018.gsb +units=m +geoidgrids=naptrans2018.gtx +vunits=m +no_defs"

- with recent PROJ, it  does ... +step +inv +proj=vgridshift +grids=naptrans2018.gtx +multiplier=1  +step +inv +proj=hgridshift +grids=nl_nsgi_rdtrans2018.tif , so vertical adjustment then horizontal

- but my understanding of the PROJ <6 code is that it does in the reverse order.

playing with cs2cs & cct, I can actually confirm this. There's a difference in vertical values of the order of a few millimeters, whereas if I modify the pipeline to do horizontal then vertical, I get the PROJ < 6 results with a sub-millimeter precision.

I didn?t realise this, but it seems you are right. It looks like the behaviour of PROJ has changed. Although I like the new order (first vertical then horizontal) better, it is very confusing that this has changed. I wonder if this was a bug, or an intended improvement?

> Who is right, who is wrong:  I give up. At that point we probably just need to accept the discrepancy as nobody raised it. Bottom line: use cct instead of cs2cs to unambiguously control the order of operations.

The procedure in both orders are a valid approach, you just need a slightly different geoid grid file for each.

> Actually I found an older thread about that : https://lists.osgeo.org/pipermail/proj/2019-May/008526.html and it already gave me tons of headaches...

I wonder how to prevent other less-experienced users from such headaches.

> using the EPSG:7415 code gives the expected result (but I now see that it is because it uses the nlgeo2018 grid)

$ echo 53 6 0 | PROJ_NETWORK=ON PROJ_LIB=data bin/cs2cs -f "%.4f" EPSG:4937 EPSG:7415
196139.4316    557179.0261 -41.6949

whereas using the PROJ.4 string for EPSG:7415 results (in PROJ >= 6) in the reverse order for horizontal & vertical adjustments

$ echo 53 6 0 | PROJ_NETWORK=ON PROJ_LIB=data bin/cs2cs -f "%.4f" EPSG:4937 +to "+proj=sterea +lat_0=52.156160556 +lon_0=5.387638889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +nadgrids=rdtrans2018.gsb +units=m +geoidgrids=naptrans2018.gtx +vunits=m +no_defs +type=crs"
196139.4316    557179.0261 -41.6982

So, if we accept the change of behaviour in PROJ >=6, we only need the naptrans2008 and 2018 grids for PROJ <6 users. PROJ >=6 users can use the nlgeo2008 and 2018 grids instead.
> On reflection, it might be better to have the GeoTIFF SRS be the interpolation CRS (like in the VERTICAL_TO_VERTICAL case, but in that case there's no other sane choice), an explicit source_crs_code=7931 and interpolation_crs_wkt=....    The https://proj.org/specifications/geodetictiffgrids.html<https://secure-web.cisco.com/16SSmij_qIqbZT7vkQpUgv3KX-6ecNxzEzEXIoOqSbC8wsdbTwfrbE_FHii5vpGRXpy7p7mDJPOV9wwZH5frOT8wENoH3KeWcaJNKsvOcWR102emBb5lTF8g_1Uy7RktJ2UUmj3z6nwbZkOZd3WQ6QeCVKSIRuOgLOe2qshPpMN0mjpyNmZCCOtzD-WFnTN9GJpjcLhgy0uPONd4jA9BqtfzV3_rO7ZZlnOt2NVivF9vXtsez9PnwTiLsFYEcz-qUn4KR6xmRX7nIWT4NeqSkOr2Nx-PEGX3Xx45MPDXKpKzAO5l7xVmeKxcee4UBtr2x8EfeJmv6rPQ8qjX_kOFdafhFPEwhG30LbhIKo8taaFs/https%3A%2F%2Fproj.org%2Fspecifications%2Fgeodetictiffgrids.html> page should be amended to document that, and the validation script too.  And perhaps the conversion script too if that's thought to be a not-so-rare use case.

That?s what I was thinking. However, you won?t need a  interpolation_crs_wkt=.... in that case, as it would be the same as the GeoTIFF SRS, right? Since the naptrans2008 and 2018 grids of the Netherlands are the only use case, and these are only needed for PROJ <6, then we might not need GeoTIFFs for these grids, I think. Maybe, this option could be removed entirely?

> I guess that's OK, adding just a bit more confusion to an already super confusing topic

Good point. I?ll reconsider if I find it worth the additional confusion.

> Note: I'm not sure if it is a formatting issue when writing the email, but the value of the interpolation_crs_wkt item is wrong as it lacks double quoting around strings.
Thanks!

Regards, Jochem



Disclaimer:
De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor de geadresseerde(n).
Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of verstrekking van deze informatie aan derden is niet toegestaan.
Op al onze producten en diensten zijn onze algemene leveringsvoorwaarden van toepassing
[https://www.kadaster.nl/algemene-leveringsvoorwaarden].

Disclaimer:
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed.
If you are not the intended recipient, you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.
Our general terms and conditions of delivery apply to all our products and services
[https://www.kadaster.com/general-terms-and-conditions].
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220131/65894da8/attachment-0001.html>

From even.rouault at spatialys.com  Mon Jan 31 04:20:06 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 31 Jan 2022 13:20:06 +0100
Subject: [PROJ] Correcting metadata in GeoTIFF files
In-Reply-To: <AM0P192MB0482CC870191B6BD4F60CD58EF259@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
References: <AM0P192MB0482A6AD0F1ADD46EEA1312AEF5E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <6c8c18a6-cd5b-4e15-5a45-13f5955280b5@spatialys.com>
 <AM0P192MB0482B9BC65DA7923F3EDF72CEF5F9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <d68584f1-bffe-e091-4ddc-5ebd7dae8446@spatialys.com>
 <AM0P192MB0482F4D50704BFD65CF704EDEF209@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <f9195fca-8b9e-8c8d-4031-7d86ecaae2d2@spatialys.com>
 <AM0P192MB0482D3E9A8BE244DD1A569CDEF229@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <6c9d19ee-9556-1c53-9692-b465309e0140@spatialys.com>
 <AM0P192MB0482CC870191B6BD4F60CD58EF259@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
Message-ID: <8de2516d-de67-c5b0-d95d-771878375896@spatialys.com>


Le 31/01/2022 ? 12:45, Lesparre, Jochem a ?crit?:
>
> I didn?t realise this, but it seems you are right. It looks like the 
> behaviour of PROJ has changed. Although I like the new order (first 
> vertical then horizontal) better, it is very confusing that this has 
> changed. I wonder if this was a bug, or an intended improvement?
>
I would say this was a case that wasn't taken at all into account during 
initial development since there was no test case in the existing 
regression test suite for it. And it is particularly difficult to model 
PROJ.4 string using +nadgrids and +geoidgrids into ISO-19111 CRS, which 
is the representation model used by the PROJ 6 coordinate transformation 
logic. So I use, or rather abuse/extend, the BoundCRS concept building a 
CompoundCRS of a BoundCRS of the horizontal CRS and a BoundCRS of the 
vertical CRS. But in the PROJ.4 syntax the "pivot" CRS was implicitly 
WGS84, so in those BoundCRS the targetCRS is WGS84. So when you 
transform to EPSG:4937, PROJ also does a WGS84 to ETRS89 transformation, 
which happens to be null luckily. And even if the target of the BoundCRS 
was known to be ETRS89, it is unclear when using such CompoundCRS of 
BoundCRS which order of operation should be applied, even more than the 
concept of interpolation CRS is also absent in the BoundCRS model. so 
all in all, there's little luck of reproducing the PROJ.4 behaviour with 
such CRS object. Or one should take into account the original PROJ.4 
string attached to the CRS and have a special transformation code path 
when detecting it. Given that this is legacy syntax, probably not worth 
the effort.

> So, if we accept the change of behaviour in PROJ >=6, we only need the 
> naptrans2008 and 2018 grids for PROJ <6 users. PROJ >=6 users can use 
> the nlgeo2008 and 2018 grids instead.
>
> > On reflection, it might be better to have the GeoTIFF SRS be the interpolation CRS (like in the 
> VERTICAL_TO_VERTICAL case, but in that case there's no other sane 
> choice), an explicit source_crs_code=7931 and 
> interpolation_crs_wkt=....??? The 
> https://proj.org/specifications/geodetictiffgrids.html 
> <https://secure-web.cisco.com/16SSmij_qIqbZT7vkQpUgv3KX-6ecNxzEzEXIoOqSbC8wsdbTwfrbE_FHii5vpGRXpy7p7mDJPOV9wwZH5frOT8wENoH3KeWcaJNKsvOcWR102emBb5lTF8g_1Uy7RktJ2UUmj3z6nwbZkOZd3WQ6QeCVKSIRuOgLOe2qshPpMN0mjpyNmZCCOtzD-WFnTN9GJpjcLhgy0uPONd4jA9BqtfzV3_rO7ZZlnOt2NVivF9vXtsez9PnwTiLsFYEcz-qUn4KR6xmRX7nIWT4NeqSkOr2Nx-PEGX3Xx45MPDXKpKzAO5l7xVmeKxcee4UBtr2x8EfeJmv6rPQ8qjX_kOFdafhFPEwhG30LbhIKo8taaFs/https%3A%2F%2Fproj.org%2Fspecifications%2Fgeodetictiffgrids.html>page 
> should be amended to document that, and the validation script too.? 
> And perhaps the conversion script too if that's thought to be a 
> not-so-rare use case.
>
> That?s what I was thinking. However, you won?t need a 
> interpolation_crs_wkt=.... in that case, as it would be the same as 
> the GeoTIFF SRS, right?
>
Yes, that was really to make it clear that the GeoTIFF SRS was the 
interpolation CRS, but it could also just be something documented in the 
spec
>
> Since the naptrans2008 and 2018 grids of the Netherlands are the only 
> use case, and these are only needed for PROJ <6, then we might not 
> need GeoTIFFs for these grids, I think. Maybe, this option could be 
> removed entirely?
>
I personally wouldn't mind, but it might potential break users who rely 
on them explictly. Maybe Sebastiaan has some thoughts on that ?

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20220131/d211420e/attachment.html>

From sebastic at xs4all.nl  Mon Jan 31 04:46:58 2022
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Mon, 31 Jan 2022 13:46:58 +0100
Subject: [PROJ] Correcting metadata in GeoTIFF files
In-Reply-To: <8de2516d-de67-c5b0-d95d-771878375896@spatialys.com>
References: <AM0P192MB0482A6AD0F1ADD46EEA1312AEF5E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <6c8c18a6-cd5b-4e15-5a45-13f5955280b5@spatialys.com>
 <AM0P192MB0482B9BC65DA7923F3EDF72CEF5F9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <d68584f1-bffe-e091-4ddc-5ebd7dae8446@spatialys.com>
 <AM0P192MB0482F4D50704BFD65CF704EDEF209@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <f9195fca-8b9e-8c8d-4031-7d86ecaae2d2@spatialys.com>
 <AM0P192MB0482D3E9A8BE244DD1A569CDEF229@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <6c9d19ee-9556-1c53-9692-b465309e0140@spatialys.com>
 <AM0P192MB0482CC870191B6BD4F60CD58EF259@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <8de2516d-de67-c5b0-d95d-771878375896@spatialys.com>
Message-ID: <c939511c-1276-4bb1-f1c4-44ad9150598c@xs4all.nl>

On 1/31/22 13:20, Even Rouault wrote:
> Le 31/01/2022 ? 12:45, Lesparre, Jochem a ?crit?:
>> Since the naptrans2008 and 2018 grids of the Netherlands are the only 
>> use case, and these are only needed for PROJ <6, then we might not 
>> need GeoTIFFs for these grids, I think. Maybe, this option could be 
>> removed entirely?
>>
> I personally wouldn't mind, but it might potential break users who rely 
> on them explictly. Maybe Sebastiaan has some thoughts on that ?

I'd like to drop the proj-rdnap package from Debian which provides the 
RDNAPTRANS 2008 and 2018 .gsb & .gtx files. These are obsolete now that 
PROJ uses the GeoTIFF grids (from the CDN).

AFAIK the GeoTIFF grids were created by converting the .gsb & .gtx files.

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From howard at hobu.co  Mon Jan 31 08:17:43 2022
From: howard at hobu.co (Howard Butler)
Date: Mon, 31 Jan 2022 10:17:43 -0600
Subject: [PROJ] Dropping autotools on master branch
In-Reply-To: <CAM2FmMqk1fy7GOy8gLmbocXUA1V7XQF+tEJkrM8yhdsUXK1=oA@mail.gmail.com>
References: <CAM2FmMqk1fy7GOy8gLmbocXUA1V7XQF+tEJkrM8yhdsUXK1=oA@mail.gmail.com>
Message-ID: <D842170D-9F65-453F-8BA3-808DF503C0D2@hobu.co>



> On Jan 27, 2022, at 4:03 PM, Mike Taves <mwtoews at gmail.com> wrote:
> 
> Hi all,
> 
> This is a notice to developers that are using PROJ for build scripts.
> We are about to finally drop autotools out of the master branch, so
> ensure that PROJ is built using CMake 3.9 or newer.
> 
> PROJ 9.0 will only support CMake
> (https://proj.org/community/rfc/rfc-7.html). Expect to see at least
> one release candidate in February, and a final release around 1 March.


*confetti ball*

Thanks for all of the efforts on this Mike!

As I've said when I have made pitches for CMake migration ? it is the *least worse* configuration generator. None of these kinds of tools are perfect given the domain they operate in, but CMake has wide(r) adoption and decent tooling support. 

With other core projects like GEOS and GDAL also making the switch to CMake, I hope the ability for people to start contributing to these projects becomes less impeded by their once formidable build and run scenarios. CMake does make things easier for an IDE-oriented developer to be productive with these libraries with much less investment.

Howard




