From charles.karney at sri.com  Tue Mar  3 06:34:58 2015
From: charles.karney at sri.com (Charles Karney)
Date: Tue, 3 Mar 2015 09:34:58 -0500
Subject: [Proj] Proj 4.9.1RC4 Released
In-Reply-To: <4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>	<rmi61atv48u.fsf@fnord.ir.bbn.com>
	<54EACCC2.1000408@xs4all.nl>	<A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>	<6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>
	<4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>
Message-ID: <54F5C692.8040501@sri.com>

To stay consistent with our previous (4.8.0) build of proj on Windows,
I'd like to build proj as a shared library.  However this triggers a
warning

nad2nad can't be build with a DLL proj4 library you need a static lib

Can anyone explain the origin of this warning?  I note that the nad2nad
executable gets created OK with the shared library and that it can
report its usage when given no arguments.

On 2015-02-24 16:28, Howard Butler wrote:
>
>> On Feb 23, 2015, at 8:04 AM, Sebastiaan Couwenberg <sebastic at xs4all.nl> wrote:
>>
>>>> https://trac.osgeo.org/proj/ticket/255
>>>
>>> I propose we dial back the precision on the test as Frank suggested.
>>
>> That's probably the best short term solution, yes.
>
> I have issued RC4 to address this issue.
>
> http://download.osgeo.org/proj/proj-4.9.1RC4.tar.gz
>
> Howard


From charles.karney at sri.com  Tue Mar  3 08:27:40 2015
From: charles.karney at sri.com (Charles Karney)
Date: Tue, 3 Mar 2015 11:27:40 -0500
Subject: [Proj] Proj 4.9.1RC4 -- cmake package name should be PROJ4 not PROJ
In-Reply-To: <54E8CCA4.90504@sri.com>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<54E8CCA4.90504@sri.com>
Message-ID: <54F5E0FC.6070606@sri.com>

In integrating 4.9.1RC4 into our build environment, I see that I chose
wrong on the cmake "package name".  I picked "PROJ"; however the
existing libgeotiff release does

   find_package(PROJ4)

At the risk of delaying the release by a day or so, I recommend that I
switch to PROJ4 as the cmake name, so that it works seamlessly with the
released version libgeotiff.

Other cmake issues that I plan to fix (or have fixed) on our internal
branch at SRI are:

* append _d to library names and executables for Windows debug
   configurations.

* stop tests from writing log files in the source tree (which may, after
   all, be on a read-only partition).

I plan to wait until *after* the release of 4.9.1 before submitting
these patches.


On 2015-02-21 13:21, Charles Karney wrote:
> Provides support for find_package(PROJ 4.9) as follows
>
>    The name of the package is "PROJ" (uppercase).
>
>    proj-config.cmake gets installed in share/cmake/PROJ (non Windows) or
>    cmake (Windows).
>
>    This defines (for example)
>      PROJ_FOUND = 1
>      PROJ_INCLUDE_DIRS = /usr/local/include
>      PROJ_LIBRARIES = proj
>      PROJ_LIBRARY_DIRS = /usr/local/lib
>      PROJ_BINARY_DIRS = /usr/local/bin
>      PROJ_VERSION = 4.9.1
>
>    Here proj is a "target" name which means that it inherits
>    dependencies, etc.
>
>    find_package will look under CMAKE_PREFIX_PATH for proj-config.cmake.


From warmerdam at pobox.com  Tue Mar  3 08:30:24 2015
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 3 Mar 2015 08:30:24 -0800
Subject: [Proj] Proj 4.9.1RC4 Released
In-Reply-To: <54F22BF1.2090704@xs4all.nl>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<rmi61atv48u.fsf@fnord.ir.bbn.com> <54EACCC2.1000408@xs4all.nl>
	<A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>
	<6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>
	<4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>
	<rmih9uan1aa.fsf@fnord.ir.bbn.com>
	<E6E7F65B-3218-4C29-96A4-B6D557451E5A@hobu.co>
	<591D9BA9-436C-40C4-B2A2-D2F737AEF2F9@hobu.co>
	<54F22BF1.2090704@xs4all.nl>
Message-ID: <CA+YzLBeuntsffS0XXHPfXf5MM9UP-4ydpNeHxbwFEkYxvdQVYg@mail.gmail.com>

Howard,

I would suggest moving these out of testvarious into a test_flakey set and
then moving forward.  I don't want to lose them entirely but they aren't
worth getting tied in knots about.

Best regards,
Frank


On Sat, Feb 28, 2015 at 12:58 PM, Sebastiaan Couwenberg <sebastic at xs4all.nl>
wrote:

> On 02/28/2015 09:45 PM, Howard Butler wrote:
> > This issue is holding me up from motioning to release 4.9.1.
> > If people do not think this issue warrants holding things up,
> > I will simply remove this test and wait for someone with experience
> > with both the healpix coordinate tests and signed zeros to fix things up.
>
> Disabling the three troublesome tests reported in #255 is reasonable in
> my opinion. I'm not sure to what extent you want to remove the test,
> removing testvarious entirely seems a bit much.
>
> I've ignore the failing tests in the Debian package build for the time
> being, to prevent the small number of architecture specific test
> failures from failing the entire build.
>
> Kind Regards,
>
> Bas
>
> --
>  GPG Key ID: 4096R/6750F10AE88D4AF1
> Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150303/ac9b1ce3/attachment.html>

From charles.karney at sri.com  Tue Mar  3 10:08:01 2015
From: charles.karney at sri.com (Charles Karney)
Date: Tue, 3 Mar 2015 13:08:01 -0500
Subject: [Proj] Proj 4.9.1RC4 -- cmake package name should be PROJ4 not
 PROJ
In-Reply-To: <54F5E0FC.6070606@sri.com>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<54E8CCA4.90504@sri.com> <54F5E0FC.6070606@sri.com>
Message-ID: <54F5F881.2090409@sri.com>

Attached is the patch (against revision 2643) implementing the change of
the cmake package name from PROJ to PROJ4.

On 2015-03-03 11:27, Charles Karney wrote:
> In integrating 4.9.1RC4 into our build environment, I see that I chose
> wrong on the cmake "package name".  I picked "PROJ"; however the
> existing libgeotiff release does
>
>    find_package(PROJ4)
>
> At the risk of delaying the release by a day or so, I recommend that I
> switch to PROJ4 as the cmake name, so that it works seamlessly with the
> released version libgeotiff.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: proj4-RC4-cmake-name-fix.patch
Type: text/x-patch
Size: 4176 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150303/57722891/attachment.bin>

From ericnico.david at gmail.com  Tue Mar  3 13:56:39 2015
From: ericnico.david at gmail.com (nicolas david)
Date: Tue, 3 Mar 2015 22:56:39 +0100
Subject: [Proj] Proj 4.9.1RC4 Released
In-Reply-To: <54F5C692.8040501@sri.com>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<rmi61atv48u.fsf@fnord.ir.bbn.com> <54EACCC2.1000408@xs4all.nl>
	<A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>
	<6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>
	<4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>
	<54F5C692.8040501@sri.com>
Message-ID: <CACuRz0suXeCa6rrnN+nU7Lk=t7mAf+cncsBD5e-BdR-_VC7k_g@mail.gmail.com>

Hi Charles

Being the guy behind proj4-cmake old repository I supect to be also the guy
who wrote this warning.
If a remember well is due to the fact that nad2nad and nad2bin include
"project.h" and not "proj_api.h". So as on windows dll only include
(export) symbol defined in proj_api.h ( more precisely in proj.def) I was
thinking that when you include "project.h" it's better to link to static
lib in order to have all symbol defined.

I'm note 100% of this fact and I could be wrong but I think it was the
explanation of this warning.  Looking deeper in the code it seems that
nad2bin only use struct defined in project.h and not function so it could
work.

Nicolas DAVID

2015-03-03 15:34 GMT+01:00 Charles Karney <charles.karney at sri.com>:

> To stay consistent with our previous (4.8.0) build of proj on Windows,
> I'd like to build proj as a shared library.  However this triggers a
> warning
>
> nad2nad can't be build with a DLL proj4 library you need a static lib
>
> Can anyone explain the origin of this warning?  I note that the nad2nad
> executable gets created OK with the shared library and that it can
> report its usage when given no arguments.
>
> On 2015-02-24 16:28, Howard Butler wrote:
> >
> >> On Feb 23, 2015, at 8:04 AM, Sebastiaan Couwenberg <sebastic at xs4all.nl>
> wrote:
> >>
> >>>> https://trac.osgeo.org/proj/ticket/255
> >>>
> >>> I propose we dial back the precision on the test as Frank suggested.
> >>
> >> That's probably the best short term solution, yes.
> >
> > I have issued RC4 to address this issue.
> >
> > http://download.osgeo.org/proj/proj-4.9.1RC4.tar.gz
> >
> > Howard
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150303/8336b524/attachment.html>

From charles.karney at sri.com  Tue Mar  3 14:13:33 2015
From: charles.karney at sri.com (Charles Karney)
Date: Tue, 3 Mar 2015 17:13:33 -0500
Subject: [Proj] Proj 4.9.1RC4 Released
In-Reply-To: <CACuRz0suXeCa6rrnN+nU7Lk=t7mAf+cncsBD5e-BdR-_VC7k_g@mail.gmail.com>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>	<rmi61atv48u.fsf@fnord.ir.bbn.com>
	<54EACCC2.1000408@xs4all.nl>	<A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>	<6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>	<4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>	<54F5C692.8040501@sri.com>
	<CACuRz0suXeCa6rrnN+nU7Lk=t7mAf+cncsBD5e-BdR-_VC7k_g@mail.gmail.com>
Message-ID: <54F6320D.8020307@sri.com>

OK, thanks for the explanation.

I only have the most tenuous grasp on the intricacies of exporting
symbols to a dll so I don't think I can have been responsible for this
warning.  It might be worth switching to a shared library as a default
for Windows *after* the release of 4.9.1 to see what breaks.  If
something does break, then there should be some way of fixing it.

   --Charles

On 2015-03-03 16:56, nicolas david wrote:
> Hi Charles
>
> Being the guy behind proj4-cmake old repository I supect to be also the
> guy who wrote this warning.
> If a remember well is due to the fact that nad2nad and nad2bin include
> "project.h" and not "proj_api.h". So as on windows dll only include
> (export) symbol defined in proj_api.h ( more precisely in proj.def) I
> was thinking that when you include "project.h" it's better to link to
> static lib in order to have all symbol defined.
>
> I'm note 100% of this fact and I could be wrong but I think it was the
> explanation of this warning.  Looking deeper in the code it seems that
> nad2bin only use struct defined in project.h and not function so it
> could work.
>
> Nicolas DAVID
>
> 2015-03-03 15:34 GMT+01:00 Charles Karney <charles.karney at sri.com
> <mailto:charles.karney at sri.com>>:
>
>     To stay consistent with our previous (4.8.0) build of proj on Windows,
>     I'd like to build proj as a shared library.  However this triggers a
>     warning
>
>     nad2nad can't be build with a DLL proj4 library you need a static lib
>
>     Can anyone explain the origin of this warning?  I note that the nad2nad
>     executable gets created OK with the shared library and that it can
>     report its usage when given no arguments.
>
>     On 2015-02-24 16:28, Howard Butler wrote:
>      >
>      >> On Feb 23, 2015, at 8:04 AM, Sebastiaan Couwenberg
>     <sebastic at xs4all.nl <mailto:sebastic at xs4all.nl>> wrote:
>      >>
>      >>>> https://trac.osgeo.org/proj/ticket/255
>      >>>
>      >>> I propose we dial back the precision on the test as Frank
>     suggested.
>      >>
>      >> That's probably the best short term solution, yes.
>     >
>     > I have issued RC4 to address this issue.
>     >
>     >http://download.osgeo.org/proj/proj-4.9.1RC4.tar.gz
>     >
>      > Howard
>     _______________________________________________
>     Proj mailing list
>     Proj at lists.maptools.org <mailto:Proj at lists.maptools.org>
>     http://lists.maptools.org/mailman/listinfo/proj
>
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>

-- 
Charles Karney <charles.karney at sri.com>
SRI International, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662


From gdt at ir.bbn.com  Tue Mar  3 16:53:23 2015
From: gdt at ir.bbn.com (Greg Troxel)
Date: Tue, 03 Mar 2015 19:53:23 -0500
Subject: [Proj] Proj 4.9.1RC4 Released
In-Reply-To: <CACuRz0suXeCa6rrnN+nU7Lk=t7mAf+cncsBD5e-BdR-_VC7k_g@mail.gmail.com>
	(nicolas david's message of "Tue, 3 Mar 2015 22:56:39 +0100")
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<rmi61atv48u.fsf@fnord.ir.bbn.com> <54EACCC2.1000408@xs4all.nl>
	<A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>
	<6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>
	<4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>
	<54F5C692.8040501@sri.com>
	<CACuRz0suXeCa6rrnN+nU7Lk=t7mAf+cncsBD5e-BdR-_VC7k_g@mail.gmail.com>
Message-ID: <rmi1tl5mvlo.fsf@fnord.ir.bbn.com>


nicolas david <ericnico.david at gmail.com> writes:

> Being the guy behind proj4-cmake old repository I supect to be also the guy
> who wrote this warning.
> If a remember well is due to the fact that nad2nad and nad2bin include
> "project.h" and not "proj_api.h". So as on windows dll only include
> (export) symbol defined in proj_api.h ( more precisely in proj.def) I was
> thinking that when you include "project.h" it's better to link to static
> lib in order to have all symbol defined.
>
> I'm note 100% of this fact and I could be wrong but I think it was the
> explanation of this warning.  Looking deeper in the code it seems that
> nad2bin only use struct defined in project.h and not function so it could
> work.

I do not understand windows linking, but this seems odd to me.  It would
seem that dynamic vs static linking of libraries in an executable should
not affect the behavior, or there's a bug.

What the shared library exports, and what is in scope for the compiling
program are at least on Unix separate issues.  What's exported are
global variables in the implementation of the library.  What's in scope
to use are declarations from the .h.   Sane practice is to compile the
implementation against the same .h (at least).

Linking to a library that doesn't defined all the used symbols should
fail, whether done static or dynmaic.

(But if this affects only Windows, then I have only minor academic
curiousity.)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 180 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150303/1d414a5f/attachment.sig>

From charles.karney at sri.com  Tue Mar  3 19:30:05 2015
From: charles.karney at sri.com (Charles Karney)
Date: Tue, 3 Mar 2015 22:30:05 -0500
Subject: [Proj] Proj 4.9.1RC4 shared library on Windows
In-Reply-To: <rmi1tl5mvlo.fsf@fnord.ir.bbn.com>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>	<rmi61atv48u.fsf@fnord.ir.bbn.com>
	<54EACCC2.1000408@xs4all.nl>	<A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>	<6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>	<4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>	<54F5C692.8040501@sri.com>	<CACuRz0suXeCa6rrnN+nU7Lk=t7mAf+cncsBD5e-BdR-_VC7k_g@mail.gmail.com>
	<rmi1tl5mvlo.fsf@fnord.ir.bbn.com>
Message-ID: <54F67C3D.8060607@sri.com>

Seen from a Unix perspective, Windows' handling of shared library seems
unduly complicated.

I'm only familiar with the style of placing a macro, e.g., LIB_EXPORT,
in front of every symbol that needs to be visible in the dll.
LIB_EXPORT expands to

* nothing for static libraries and for non-Windows machines
* __declspec(dllexport) when compiling a Windows shared library
* __declspec(dllimport) when compiling a function that will link against
   the Windows shared library.

Note that it is necessary for packages that depend on the library to
make sure that LIB_EXPORT is defined correctly (and this will in turn
depend on whether the library is shared or static).  cmake makes the
ensuing convolutions relatively painless.

However, proj puts a list of exported symbols into proj.def and cmake
evidently recognizes this file.  Unfortunately, I don't know what, if
anything, needs to be done by a dependent package.  Nevertheless, as far
as I can tell, building the shared library on Windows works fine.

On 03/03/2015 07:53 PM, Greg Troxel wrote:
>
> nicolas david <ericnico.david at gmail.com> writes:
>
>> Being the guy behind proj4-cmake old repository I supect to be also the guy
>> who wrote this warning.
>> If a remember well is due to the fact that nad2nad and nad2bin include
>> "project.h" and not "proj_api.h". So as on windows dll only include
>> (export) symbol defined in proj_api.h ( more precisely in proj.def) I was
>> thinking that when you include "project.h" it's better to link to static
>> lib in order to have all symbol defined.
>>
>> I'm note 100% of this fact and I could be wrong but I think it was the
>> explanation of this warning.  Looking deeper in the code it seems that
>> nad2bin only use struct defined in project.h and not function so it could
>> work.
>
> I do not understand windows linking, but this seems odd to me.  It would
> seem that dynamic vs static linking of libraries in an executable should
> not affect the behavior, or there's a bug.
>
> What the shared library exports, and what is in scope for the compiling
> program are at least on Unix separate issues.  What's exported are
> global variables in the implementation of the library.  What's in scope
> to use are declarations from the .h.   Sane practice is to compile the
> implementation against the same .h (at least).
>
> Linking to a library that doesn't defined all the used symbols should
> fail, whether done static or dynmaic.
>
> (But if this affects only Windows, then I have only minor academic
> curiousity.)



From howard at hobu.co  Wed Mar  4 09:36:43 2015
From: howard at hobu.co (Howard Butler)
Date: Wed, 4 Mar 2015 11:36:43 -0600
Subject: [Proj] proj 4.9.1RC5 released
Message-ID: <70BCFF7A-D1B9-46FC-8CDE-17C41165A5F1@hobu.co>

All,

I have issued a RC5 which moved the problematic test into its own, manual, test script, and Charles has made some CMake tweaks. Unless significant issues are identified, I will motion this for release by the MetaCRS committee on Friday.

http://download.osgeo.org/proj/proj-4.9.1RC5.tar.gz

Howard



From sebastic at xs4all.nl  Wed Mar  4 11:31:11 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Wed, 04 Mar 2015 20:31:11 +0100
Subject: [Proj] proj 4.9.1RC5 released
In-Reply-To: <70BCFF7A-D1B9-46FC-8CDE-17C41165A5F1@hobu.co>
References: <70BCFF7A-D1B9-46FC-8CDE-17C41165A5F1@hobu.co>
Message-ID: <54F75D7F.9060807@xs4all.nl>

On 03/04/2015 06:36 PM, Howard Butler wrote:
> I have issued a RC5 which moved the problematic test into its own, manual, test script, and Charles has made some CMake tweaks.
> Unless significant issues are identified, I will motion this for release by the MetaCRS committee on Friday.

The new testflakey & tf_out.dist are not included in the release
tarballs, is that on purpose?

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From howard at hobu.co  Wed Mar  4 12:20:19 2015
From: howard at hobu.co (Howard Butler)
Date: Wed, 4 Mar 2015 14:20:19 -0600
Subject: [Proj] proj 4.9.1RC5 released
In-Reply-To: <54F75D7F.9060807@xs4all.nl>
References: <70BCFF7A-D1B9-46FC-8CDE-17C41165A5F1@hobu.co>
	<54F75D7F.9060807@xs4all.nl>
Message-ID: <2267CD2C-0E4B-43DE-9D48-056CC22A7991@hobu.co>


> On Mar 4, 2015, at 1:31 PM, Sebastiaan Couwenberg <sebastic at xs4all.nl> wrote:
> 
> On 03/04/2015 06:36 PM, Howard Butler wrote:
>> I have issued a RC5 which moved the problematic test into its own, manual, test script, and Charles has made some CMake tweaks.
>> Unless significant issues are identified, I will motion this for release by the MetaCRS committee on Friday.
> 
> The new testflakey & tf_out.dist are not included in the release
> tarballs, is that on purpose?

D'oh. Uh, yeah, I think that was on purpose.

They will be included in the next 4.9.x release unless some other blocking issue crops up to necessitate another RC.

Howard

From gdt at ir.bbn.com  Wed Mar  4 16:50:46 2015
From: gdt at ir.bbn.com (Greg Troxel)
Date: Wed, 04 Mar 2015 19:50:46 -0500
Subject: [Proj] proj 4.9.1RC5 released
In-Reply-To: <70BCFF7A-D1B9-46FC-8CDE-17C41165A5F1@hobu.co> (Howard Butler's
	message of "Wed, 4 Mar 2015 11:36:43 -0600")
References: <70BCFF7A-D1B9-46FC-8CDE-17C41165A5F1@hobu.co>
Message-ID: <rmioao8i7x5.fsf@fnord.ir.bbn.com>


Build, package creation,  and make check succeeds  on NetBSD 6-stable,
i386.  So it looks ok to me.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 180 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150304/a1cf27fb/attachment.sig>

From roger.bivand at nhh.no  Mon Mar  9 02:06:41 2015
From: roger.bivand at nhh.no (Roger Bivand)
Date: Mon, 9 Mar 2015 09:06:41 +0000 (UTC)
Subject: [Proj] RC5 - SOVERSION
Message-ID: <loom.20150309T095827-395@post.gmane.org>

Hi,

Should I be seeing on Unix (Fedora 21) using autotools:

$ ls -l /usr/local/lib/*proj*
-rw-r--r--. 1 root root 3206058 Mar  8 20:00 /usr/local/lib/libproj.a
-rwxr-xr-x. 1 root root     955 Mar  8 20:00 /usr/local/lib/libproj.la
lrwxrwxrwx. 1 root root      16 Mar  8 20:00 /usr/local/lib/libproj.so ->
libproj.so.9.0.0
lrwxrwxrwx. 1 root root      16 Mar  8 20:00 /usr/local/lib/libproj.so.9 ->
libproj.so.9.0.0
-rwxr-xr-x. 1 root root 1593661 Mar  8 20:00 /usr/local/lib/libproj.so.9.0.0

while with the 4.9.0 RC I see:

-rw-r--r--. 1 root root 3193442 Jan 21 15:49 /usr/local/lib/libproj.a
-rwxr-xr-x. 1 root root     953 Jan 21 15:49 /usr/local/lib/libproj.la
lrwxrwxrwx. 1 root root      16 Jan 21 15:49 /usr/local/lib/libproj.so ->
libproj.so.0.8.0
lrwxrwxrwx. 1 root root      16 Jan 21 15:49 /usr/local/lib/libproj.so.0 ->
libproj.so.0.8.0
-rwxr-xr-x. 1 root root 1584463 Jan 21 15:49 /usr/local/lib/libproj.so.0.8.0

that is, was the resolution to #263 (r2629) the right one? The consequence
is, of course, that the original libproj.so.0 is now libproj.so.9, and at
least GDAL and Spatialite complain (2 of a sample of 2). This means that all
downstream use of libproj.so.0 has to be rebuilt, if I understand correctly.

I hope I'm just confused, sorry for only reporting now, I've been travelling.

Roger





From sebastic at xs4all.nl  Mon Mar  9 02:12:45 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Mon, 9 Mar 2015 10:12:45 +0100
Subject: [Proj] RC5 - SOVERSION
In-Reply-To: <loom.20150309T095827-395@post.gmane.org>
References: <loom.20150309T095827-395@post.gmane.org>
Message-ID: <bbffa468dd5218a626e06d5eb8a016c3.squirrel@webmail.xs4all.nl>

> that is, was the resolution to #263 (r2629) the right one? The consequence
> is, of course, that the original libproj.so.0 is now libproj.so.9, and at
> least GDAL and Spatialite complain (2 of a sample of 2). This means that
> all
> downstream use of libproj.so.0 has to be rebuilt, if I understand
> correctly.

Yes this is correct. During the 4.8 cycle the ABI compatibily was broken
(symbols removed) so a SONAME bump was required. See:

http://upstream.rosalinux.ru/versions/libproj.html

Kind Regards,

Bas



From howard at hobu.co  Tue Mar 10 12:44:19 2015
From: howard at hobu.co (Howard Butler)
Date: Tue, 10 Mar 2015 14:44:19 -0500
Subject: [Proj] proj 4.9.1 released
Message-ID: <245F3E35-C0EE-48AE-B650-606D29CB98F5@hobu.co>

All,

proj 4.9.1 is released as approved by the MetaCRS list. It cumulates a number of bug fixes and small updates, and it went through five release candidates before being declared final. 

http://download.osgeo.org/proj/proj-4.9.1.tar.gz

Thanks,

Howard

> o 4.9.0RC2 release was abandoned because it was not promoted in a 
>   timely fashion. Subsequent maintenance of tickets has continued, 
>   and a new 4.9.1 release was issued in its place.
> 
> o Implement inverse solution for Winkel Tripel from Drazan Tutic #250
> 
> o More CMake configuration tweaks. The CMake configuration is probably 
>   not at feature parity with the autotools builds at this point but it 
>   is converging #256
> 
> o Tweak initialization ordering around setlocal which may have caused
>   issues #237
> 
> o Support out-of-tree autoconf builds more completely #247
> 
> o Fix NaN handling by geod_inverse and geod_polygon_addedge #251 & #253
> 
> o Update config.sub and config.guess #257
> 
> o Adapt Charles Karney's CMake patches for smoother build #258
> 
> o Define default PROJ_LIB location for CMake compilation #261
> 
> o Fix Windows compilation on PJ_aitoff.c
> 
> o Align CMake SOVERSION with autotools #263
> 
> o Regenerate nad/epsg with GDAL r28536 to avoid precision loss in TOWGS84
>   parameters, e.g. on Amersfoort / RD EPSG:4289 (#260)
> 
> o Add CMake project-config.cmake scripts (#264 from Charles Karney)
> 
> o Dial back test sensitivity #255


From charles.karney at sri.com  Tue Mar 10 13:32:46 2015
From: charles.karney at sri.com (Charles Karney)
Date: Tue, 10 Mar 2015 16:32:46 -0400
Subject: [Proj] proj 4.9.1 released
In-Reply-To: <245F3E35-C0EE-48AE-B650-606D29CB98F5@hobu.co>
References: <245F3E35-C0EE-48AE-B650-606D29CB98F5@hobu.co>
Message-ID: <54FF54EE.2060206@sri.com>

Thanks Howard!  Don't forget to update the download links on

   http://trac.osgeo.org/proj/wiki/WikiStart

On 2015-03-10 15:44, Howard Butler wrote:
> All,
>
> proj 4.9.1 is released as approved by the MetaCRS list. It cumulates a number of bug fixes and small updates, and it went through five release candidates before being declared final.
>
> http://download.osgeo.org/proj/proj-4.9.1.tar.gz
>
> Thanks,
>
> Howard
>
>> o 4.9.0RC2 release was abandoned because it was not promoted in a
>>    timely fashion. Subsequent maintenance of tickets has continued,
>>    and a new 4.9.1 release was issued in its place.
>>
>> o Implement inverse solution for Winkel Tripel from Drazan Tutic #250
>>
>> o More CMake configuration tweaks. The CMake configuration is probably
>>    not at feature parity with the autotools builds at this point but it
>>    is converging #256
>>
>> o Tweak initialization ordering around setlocal which may have caused
>>    issues #237
>>
>> o Support out-of-tree autoconf builds more completely #247
>>
>> o Fix NaN handling by geod_inverse and geod_polygon_addedge #251 & #253
>>
>> o Update config.sub and config.guess #257
>>
>> o Adapt Charles Karney's CMake patches for smoother build #258
>>
>> o Define default PROJ_LIB location for CMake compilation #261
>>
>> o Fix Windows compilation on PJ_aitoff.c
>>
>> o Align CMake SOVERSION with autotools #263
>>
>> o Regenerate nad/epsg with GDAL r28536 to avoid precision loss in TOWGS84
>>    parameters, e.g. on Amersfoort / RD EPSG:4289 (#260)
>>
>> o Add CMake project-config.cmake scripts (#264 from Charles Karney)
>>
>> o Dial back test sensitivity #255
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>

-- 
Charles Karney <charles.karney at sri.com>
SRI International, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662


From richard.greenwood at gmail.com  Tue Mar 10 17:40:58 2015
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Tue, 10 Mar 2015 18:40:58 -0600
Subject: [Proj] proj 4.9.1 released
In-Reply-To: <54FF54EE.2060206@sri.com>
References: <245F3E35-C0EE-48AE-B650-606D29CB98F5@hobu.co>
	<54FF54EE.2060206@sri.com>
Message-ID: <CAHBySPaEQXOWpDPvYiyA6WNshgMS6ZdHr=T=MNwRLhz3kr-FJQ@mail.gmail.com>

Nice work Howard, et al.

On Tue, Mar 10, 2015 at 2:32 PM, Charles Karney <charles.karney at sri.com>
wrote:

> Thanks Howard!  Don't forget to update the download links on
>
>    http://trac.osgeo.org/proj/wiki/WikiStart
>
> On 2015-03-10 15:44, Howard Butler wrote:
> > All,
> >
> > proj 4.9.1 is released as approved by the MetaCRS list. It cumulates a
> number of bug fixes and small updates, and it went through five release
> candidates before being declared final.
> >
> > http://download.osgeo.org/proj/proj-4.9.1.tar.gz
> >
> > Thanks,
> >
> > Howard
> >
> >> o 4.9.0RC2 release was abandoned because it was not promoted in a
> >>    timely fashion. Subsequent maintenance of tickets has continued,
> >>    and a new 4.9.1 release was issued in its place.
> >>
> >> o Implement inverse solution for Winkel Tripel from Drazan Tutic #250
> >>
> >> o More CMake configuration tweaks. The CMake configuration is probably
> >>    not at feature parity with the autotools builds at this point but it
> >>    is converging #256
> >>
> >> o Tweak initialization ordering around setlocal which may have caused
> >>    issues #237
> >>
> >> o Support out-of-tree autoconf builds more completely #247
> >>
> >> o Fix NaN handling by geod_inverse and geod_polygon_addedge #251 & #253
> >>
> >> o Update config.sub and config.guess #257
> >>
> >> o Adapt Charles Karney's CMake patches for smoother build #258
> >>
> >> o Define default PROJ_LIB location for CMake compilation #261
> >>
> >> o Fix Windows compilation on PJ_aitoff.c
> >>
> >> o Align CMake SOVERSION with autotools #263
> >>
> >> o Regenerate nad/epsg with GDAL r28536 to avoid precision loss in
> TOWGS84
> >>    parameters, e.g. on Amersfoort / RD EPSG:4289 (#260)
> >>
> >> o Add CMake project-config.cmake scripts (#264 from Charles Karney)
> >>
> >> o Dial back test sensitivity #255
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
> >
>
> --
> Charles Karney <charles.karney at sri.com>
> SRI International, Princeton, NJ 08543-5300
>
> Tel: +1 609 734 2312
> Fax: +1 609 734 2662
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



-- 
Richard W. Greenwood, PLS
www.greenwoodmap.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150310/cd343977/attachment.html>

From sisyphus1 at optusnet.com.au  Wed Mar 11 05:12:58 2015
From: sisyphus1 at optusnet.com.au (sisyphus1 at optusnet.com.au)
Date: Wed, 11 Mar 2015 23:12:58 +1100
Subject: [Proj] proj 4.9.1 released
In-Reply-To: <245F3E35-C0EE-48AE-B650-606D29CB98F5@hobu.co>
References: <245F3E35-C0EE-48AE-B650-606D29CB98F5@hobu.co>
Message-ID: <0123E1A43D2F411E99E1E07509E09F1B@OwnerPC311012>

-----Original Message----- 
From: Howard Butler
Sent: Wednesday, March 11, 2015 6:44 AM
To: PROJ.4 and general Projections Discussions
Subject: [Proj] proj 4.9.1 released

> All,
>
> proj 4.9.1 is released as approved by the MetaCRS list. It cumulates a 
> number of bug fixes and small updates, and it went through five release 
> candidates before being declared final.
>
> http://download.osgeo.org/proj/proj-4.9.1.tar.gz

I notice that projects.h is being installed again by 'make install'. Was 
that intended ?
If so, it's a welcome re-introduction.
IIRC, recent builds of proj stopped installing projects.h because it was 
considered non-public API.
No big deal ... just curious. I kept on (manually) installing projects.h, 
anyway.

I've just built 4.9.1 on native MS Windows using a variety of mingw ports of 
32-bit and 64-bit gcc compilers - using autotools in the msys shell.
(I hope that autotools support is here to stay for a while yet - that there 
are no plans to soon *replace* it with cmake.)
It's the most trouble-free Windows build of proj that I've ever struck - 
configure and make worked flawlessly. (Not that the build usually threw up 
serious problems, anyway - but kudos to all involved.)

There's a (what strikes me as probably minor) problem with 'make test' in 
that one of the tests fail:

doing tests into file tv_out, please wait
Rel. 4.9.1, 04 March 2015
<cs2cs.exe>: while processing file: <stdin>, line 1
pj_transform(): invalid x or y
Rel. 4.9.1, 04 March 2015
<cs2cs.exe>: while processing file: <stdin>, line 2
pj_transform(): acos/asin: |arg| >1.+1e-14
diff tv_out with tv_out.dist
310c310
< -140.100000 -87.000000 
   987122.418330275450     -14429896.539530911000 0.000000000000
---
> -140.100000 -87.000000 
>    987122.418330275454     -14429896.539530910552 0.000000000000

Yes - shamefully, I hadn't tested any of the release candidates.
I note that if the results are rounded to 17 decimal digits then there's no 
discrepancy.
Assuming there's some interest in sorting out this failure for the future, 
what other info do I need to provide ?
What are some of the things I can try here to determine what has gone wrong 
?

I built proj using 32-bit ports of gcc-4.7.0 & gcc-4.8.2, and 64-bit ports 
of gcc-4.7.0, gcc-4.8.2 & gcc-4.9.2. In all cases the test failure was the 
same.

Cheers,
Rob




From howard at hobu.co  Wed Mar 11 06:24:20 2015
From: howard at hobu.co (Howard Butler)
Date: Wed, 11 Mar 2015 08:24:20 -0500
Subject: [Proj] proj 4.9.1 released
In-Reply-To: <0123E1A43D2F411E99E1E07509E09F1B@OwnerPC311012>
References: <245F3E35-C0EE-48AE-B650-606D29CB98F5@hobu.co>
	<0123E1A43D2F411E99E1E07509E09F1B@OwnerPC311012>
Message-ID: <FC9076C6-B52F-4F81-9CF5-E069625F9F05@hobu.co>


> On Mar 11, 2015, at 7:12 AM, sisyphus1 at optusnet.com.au wrote:
> 
> I notice that projects.h is being installed again by 'make install'. Was 
> that intended ?
> If so, it's a welcome re-introduction.
> IIRC, recent builds of proj stopped installing projects.h because it was 
> considered non-public API.
> No big deal ... just curious. I kept on (manually) installing projects.h, 
> anyway.

It was put back for 4.9.0, but we didn't actually have that release :) 
http://trac.osgeo.org/proj/ticket/220

> 
> I've just built 4.9.1 on native MS Windows using a variety of mingw ports of 
> 32-bit and 64-bit gcc compilers - using autotools in the msys shell.
> (I hope that autotools support is here to stay for a while yet - that there 
> are no plans to soon *replace* it with cmake.)

There is no intention to replace autotools with CMake. The CMake stuff is in addition to the autoconf build support, which has been there for eons, and it will continue to stay as painful as possible, as always. I will say there is some intention to replace the hand-rolled MSVC nmake scripts with CMake :), but the audience for that is predictably quite small.

Howard



From jmfluis at gmail.com  Wed Mar 11 06:51:26 2015
From: jmfluis at gmail.com (Joaquim Luis)
Date: Wed, 11 Mar 2015 13:51:26 -0000
Subject: [Proj] proj 4.9.1 released
In-Reply-To: <FC9076C6-B52F-4F81-9CF5-E069625F9F05@hobu.co>
References: <245F3E35-C0EE-48AE-B650-606D29CB98F5@hobu.co>
	<0123E1A43D2F411E99E1E07509E09F1B@OwnerPC311012>
	<FC9076C6-B52F-4F81-9CF5-E069625F9F05@hobu.co>
Message-ID: <op.xvb530f5q5usb8@macmarilu>


> There is no intention to replace autotools with CMake. The CMake stuff  
> is in addition to the autoconf build support, which has been there for  
> eons, and it will continue to stay as painful as possible, as always.


> I will say there is some intention to replace the hand-rolled MSVC nmake  
> scripts with CMake :), but the audience for that is predictably quite  
> small.


And even there, please let it be as is. After an initial tweak of  
nmake.opt I just do

nmake /f makefile.vc install-all

can't be simpler than that.

Joaquim


From Roger.Bivand at nhh.no  Wed Mar 11 06:58:35 2015
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 11 Mar 2015 14:58:35 +0100
Subject: [Proj] SO names in 4.9.1 and current trunk
Message-ID: <alpine.LFD.2.11.1503111450270.12827@reclus.nhh.no>

Is anyone else seeing a change in the naming of shared objects?

In PROJ trunk of January 21, 2015, and in the abandoned 4.9.0RC1 I see:

$ ls -l lib*
-rw-rw-r--. 1 rsb rsb 3193442 Jan 21 09:54 libproj.a
lrwxrwxrwx. 1 rsb rsb      13 Jan 21 09:54 libproj.la -> ../libproj.la
-rw-rw-r--. 1 rsb rsb     953 Jan 21 09:54 libproj.lai
lrwxrwxrwx. 1 rsb rsb      16 Jan 21 09:54 libproj.so -> libproj.so.0.8.0
lrwxrwxrwx. 1 rsb rsb      16 Jan 21 09:54 libproj.so.0 ->
   libproj.so.0.8.0
-rwxrwxr-x. 1 rsb rsb 1584463 Jan 21 09:54 libproj.so.0.8.0

in current trunk:

$ ls -l lib*
-rw-rw-r--. 1 rsb rsb 3205082 Mar 11 14:49 libproj.a
lrwxrwxrwx. 1 rsb rsb      13 Mar 11 14:49 libproj.la -> ../libproj.la
-rw-rw-r--. 1 rsb rsb     955 Mar 11 14:49 libproj.lai
lrwxrwxrwx. 1 rsb rsb      16 Mar 11 14:49 libproj.so -> libproj.so.9.0.0
lrwxrwxrwx. 1 rsb rsb      16 Mar 11 14:49 libproj.so.9 ->
  libproj.so.9.0.0
-rwxrwxr-x. 1 rsb rsb 1593661 Mar 11 14:49 libproj.so.9.0.0

and in the 4.9.1 tarball:

$ ls -l lib*
-rw-rw-r--. 1 rsb rsb 3206058 Mar 11 12:36 libproj.a
lrwxrwxrwx. 1 rsb rsb      13 Mar 11 12:36 libproj.la -> ../libproj.la
-rw-rw-r--. 1 rsb rsb     955 Mar 11 12:36 libproj.lai
lrwxrwxrwx. 1 rsb rsb      16 Mar 11 12:36 libproj.so -> libproj.so.9.0.0
lrwxrwxrwx. 1 rsb rsb      16 Mar 11 12:36 libproj.so.9 ->
  libproj.so.9.0.0
-rwxrwxr-x. 1 rsb rsb 1593661 Mar 11 12:36 libproj.so.9.0.0

The consequence is that downstream software linking to libproj.so.0 gets 
lost. Should libproj.so.9.0.0 be libproj.so.0.9.0? (All cases Fedora 21, 
compiled locally using autotools, not Cmake)

Roger

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 91 00
e-mail: Roger.Bivand at nhh.no



From sebastic at xs4all.nl  Wed Mar 11 07:12:54 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Wed, 11 Mar 2015 15:12:54 +0100
Subject: [Proj] SO names in 4.9.1 and current trunk
In-Reply-To: <alpine.LFD.2.11.1503111450270.12827@reclus.nhh.no>
References: <alpine.LFD.2.11.1503111450270.12827@reclus.nhh.no>
Message-ID: <7856976465b16eb40d0d9b3217e818c0.squirrel@webmail.xs4all.nl>

> Is anyone else seeing a change in the naming of shared objects?

Yes, 4.8.0 broke the ABI compatibility and 4.9.0 did too, so a SONAME bump
is required.

http://upstream.rosalinux.ru/versions/libproj.html

This issue was raised on this list before, see:

http://lists.maptools.org/pipermail/proj/2015-March/007056.html
http://lists.maptools.org/pipermail/proj/2015-February/006992.html

Kind Regards,

Bas




From howard at hobu.co  Wed Mar 11 09:04:41 2015
From: howard at hobu.co (Howard Butler)
Date: Wed, 11 Mar 2015 11:04:41 -0500
Subject: [Proj] proj 4.9.1 released
In-Reply-To: <op.xvb530f5q5usb8@macmarilu>
References: <245F3E35-C0EE-48AE-B650-606D29CB98F5@hobu.co>
	<0123E1A43D2F411E99E1E07509E09F1B@OwnerPC311012>
	<FC9076C6-B52F-4F81-9CF5-E069625F9F05@hobu.co>
	<op.xvb530f5q5usb8@macmarilu>
Message-ID: <4D282B22-DDE2-4B42-AEB5-6BB876F29AA6@hobu.co>


> On Mar 11, 2015, at 8:51 AM, Joaquim Luis <jmfluis at gmail.com> wrote:
> 
>> I will say there is some intention to replace the hand-rolled MSVC nmake scripts with CMake :), but the audience for that is predictably quite small.
> 
> 
> And even there, please let it be as is. After an initial tweak of nmake.opt I just do

We will let it be for sure, but expect it to lag as there's no developers doing windows builds that way anymore. If you want to keep building that way, keep filing tickets with patches to keep things maintained.

From pelson.pub at gmail.com  Wed Mar 11 09:28:17 2015
From: pelson.pub at gmail.com (Phil Elson)
Date: Wed, 11 Mar 2015 16:28:17 +0000
Subject: [Proj] proj 4.9.1 released
In-Reply-To: <4D282B22-DDE2-4B42-AEB5-6BB876F29AA6@hobu.co>
References: <245F3E35-C0EE-48AE-B650-606D29CB98F5@hobu.co>
	<0123E1A43D2F411E99E1E07509E09F1B@OwnerPC311012>
	<FC9076C6-B52F-4F81-9CF5-E069625F9F05@hobu.co>
	<op.xvb530f5q5usb8@macmarilu>
	<4D282B22-DDE2-4B42-AEB5-6BB876F29AA6@hobu.co>
Message-ID: <CA+L60sBYKpmcQnrT5xHw6fDmTD=E_RQn8aqx1_Ng7n2Mdwi0_A@mail.gmail.com>

Congratulations to everybody involved. It is great to have this release out
- there are some really nice additions in v4.9.

Thanks for all the hard work!

On 11 March 2015 at 16:04, Howard Butler <howard at hobu.co> wrote:

>
> > On Mar 11, 2015, at 8:51 AM, Joaquim Luis <jmfluis at gmail.com> wrote:
> >
> >> I will say there is some intention to replace the hand-rolled MSVC
> nmake scripts with CMake :), but the audience for that is predictably quite
> small.
> >
> >
> > And even there, please let it be as is. After an initial tweak of
> nmake.opt I just do
>
> We will let it be for sure, but expect it to lag as there's no developers
> doing windows builds that way anymore. If you want to keep building that
> way, keep filing tickets with patches to keep things maintained.
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150311/1e19ee1f/attachment.html>

From gdt at ir.bbn.com  Wed Mar 11 09:54:34 2015
From: gdt at ir.bbn.com (Greg Troxel)
Date: Wed, 11 Mar 2015 12:54:34 -0400
Subject: [Proj] SO names in 4.9.1 and current trunk
In-Reply-To: <alpine.LFD.2.11.1503111450270.12827@reclus.nhh.no> (Roger
	Bivand's message of "Wed, 11 Mar 2015 14:58:35 +0100")
References: <alpine.LFD.2.11.1503111450270.12827@reclus.nhh.no>
Message-ID: <rmilhj3xynp.fsf@fnord.ir.bbn.com>


Roger Bivand <Roger.Bivand at nhh.no> writes:

> -rw-rw-r--. 1 rsb rsb 3205082 Mar 11 14:49 libproj.a
> lrwxrwxrwx. 1 rsb rsb      13 Mar 11 14:49 libproj.la -> ../libproj.la
> -rw-rw-r--. 1 rsb rsb     955 Mar 11 14:49 libproj.lai
> lrwxrwxrwx. 1 rsb rsb      16 Mar 11 14:49 libproj.so -> libproj.so.9.0.0
> lrwxrwxrwx. 1 rsb rsb      16 Mar 11 14:49 libproj.so.9 ->
>   libproj.so.9.0.0
> -rwxrwxr-x. 1 rsb rsb 1593661 Mar 11 14:49 libproj.so.9.0.0

I am seeing that too in 4.9.1.  I should have noticed earlier; it seems
like a bug.   Is there a documented ABI incompatibility?
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 180 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150311/afdb6e33/attachment.sig>

From sebastic at xs4all.nl  Wed Mar 11 10:09:39 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Wed, 11 Mar 2015 18:09:39 +0100
Subject: [Proj] SO names in 4.9.1 and current trunk
In-Reply-To: <rmilhj3xynp.fsf@fnord.ir.bbn.com>
References: <alpine.LFD.2.11.1503111450270.12827@reclus.nhh.no>
	<rmilhj3xynp.fsf@fnord.ir.bbn.com>
Message-ID: <550076D3.30301@xs4all.nl>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

On 03/11/2015 05:54 PM, Greg Troxel wrote:
> I am seeing that too in 4.9.1.  I should have noticed earlier; it
> seems like a bug.

It's a feature :-)

> Is there a documented ABI incompatibility?

See Upstream-Tracker:

http://upstream.rosalinux.ru/versions/libproj.html

It documents the ABI breakage in detail.

Kind Regards,

Bas

- -- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCgAGBQJVAHbTAAoJEGdQ8QrojUrxv+wP/AuTmzb0/YzdKNuLui0fry2V
FydmDbApxvdo3KcgtQ5fWFSOof4yooOQAnxCqowzh+GJxb+A8ZbFr9Pdm1RvyEOU
dZoYageAo4aBMzBlCsq5eYiT8UI/jz7m6VdRSuuI2kPhd5A5YJKdB7mWb6Ijm1W7
js5FQBARgPRvcK04wNhHCJjviNyiI4+/kV6BZmQ0NdRJ01JrtkYO1CTYbfEd2dpU
7wKuxbPX6IXKwreKaLFJK5DOkKRcgr1ma/A3czWarrwuR4fi4MxMrKu06vNRKCPy
1ExqaQz2CkbJxkILt1smu/v7UeariZL/HwLz3it34U9oJe0Fhrr535o62CHyEcJS
bXXCIlDdBFsC3Gsy46KFh/cr4dm/Dytohx7sWPV0o6kwI+FxY0bwvVcko7j+u44y
xpvrv8v5oZzRUzoqfpWtucQMk06IaPvUuzrVQZb8QrQdn2alPHOJ7C4jl0s6wY/E
5Q+yR1uInQw/Tad1DwGUsRZSiB369ugfLPezZf96d5sRUHIFMdwqaBOYxVZ02flo
FFAAPVaAaEtGLV+FJvV2A4tdiv3HzMFMiys3K8S3QOHAllFYn3CKOWuCNx9Q/wn9
V0MyrV3dWOacBHsSJad8k9yJ/WsVV38L1eBB84PWn3/Z7pb9n7HKRw0sop6TEVag
SnIy77YJmrf51jUqQ8pY
=2JNm
-----END PGP SIGNATURE-----


From jmfluis at gmail.com  Wed Mar 11 10:32:49 2015
From: jmfluis at gmail.com (Joaquim Luis)
Date: Wed, 11 Mar 2015 17:32:49 -0000
Subject: [Proj] proj 4.9.1 released
In-Reply-To: <4D282B22-DDE2-4B42-AEB5-6BB876F29AA6@hobu.co>
References: <245F3E35-C0EE-48AE-B650-606D29CB98F5@hobu.co>
	<0123E1A43D2F411E99E1E07509E09F1B@OwnerPC311012>
	<FC9076C6-B52F-4F81-9CF5-E069625F9F05@hobu.co>
	<op.xvb530f5q5usb8@macmarilu>
	<4D282B22-DDE2-4B42-AEB5-6BB876F29AA6@hobu.co>
Message-ID: <op.xvcgczlsq5usb8@macmarilu>

On Wed, 11 Mar 2015 16:04:41 -0000, Howard Butler <howard at hobu.co> wrote:

>
>> On Mar 11, 2015, at 8:51 AM, Joaquim Luis <jmfluis at gmail.com> wrote:
>>
>>> I will say there is some intention to replace the hand-rolled MSVC  
>>> nmake scripts with CMake :), but the audience for that is predictably  
>>> quite small.
>>
>>
>> And even there, please let it be as is. After an initial tweak of  
>> nmake.opt I just do
>
> We will let it be for sure, but expect it to lag as there's no  
> developers doing windows builds that way anymore. If you want to keep  
> building that way, keep filing tickets with patches to keep things  
> maintained.

But it still builds the same binaries as the cmake solution, doesn't it?


From gdt at ir.bbn.com  Wed Mar 11 11:10:07 2015
From: gdt at ir.bbn.com (Greg Troxel)
Date: Wed, 11 Mar 2015 14:10:07 -0400
Subject: [Proj] SO names in 4.9.1 and current trunk
In-Reply-To: <550076D3.30301@xs4all.nl> (Sebastiaan Couwenberg's message of
	"Wed, 11 Mar 2015 18:09:39 +0100")
References: <alpine.LFD.2.11.1503111450270.12827@reclus.nhh.no>
	<rmilhj3xynp.fsf@fnord.ir.bbn.com> <550076D3.30301@xs4all.nl>
Message-ID: <rmia8zjwglc.fsf@fnord.ir.bbn.com>


Sebastiaan Couwenberg <sebastic at xs4all.nl> writes:

> On 03/11/2015 05:54 PM, Greg Troxel wrote:
>> I am seeing that too in 4.9.1.  I should have noticed earlier; it
>> seems like a bug.
>
> It's a feature :-)

But it still seems odd to go from 0 to 9, when it used to be 0.8.

Thanks for the upstream-tracker reference.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 180 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150311/aedb7aa5/attachment.sig>

From sebastic at xs4all.nl  Wed Mar 11 11:29:38 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Wed, 11 Mar 2015 19:29:38 +0100
Subject: [Proj] SO names in 4.9.1 and current trunk
In-Reply-To: <rmia8zjwglc.fsf@fnord.ir.bbn.com>
References: <alpine.LFD.2.11.1503111450270.12827@reclus.nhh.no>	<rmilhj3xynp.fsf@fnord.ir.bbn.com>
	<550076D3.30301@xs4all.nl> <rmia8zjwglc.fsf@fnord.ir.bbn.com>
Message-ID: <55008992.1080508@xs4all.nl>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

On 03/11/2015 07:10 PM, Greg Troxel wrote:
> 
> Sebastiaan Couwenberg <sebastic at xs4all.nl> writes:
> 
>> On 03/11/2015 05:54 PM, Greg Troxel wrote:
>>> I am seeing that too in 4.9.1.  I should have noticed earlier;
>>> it seems like a bug.
>> 
>> It's a feature :-)
> 
> But it still seems odd to go from 0 to 9, when it used to be 0.8.

- From 0 to 1 would be more in line of expectation. But this is where we
ended up following the libtool version information procedure, it was
8:0:8 before which was likely already an incorrect reflection of the
interface changes.

https://www.gnu.org/software/libtool/manual/html_node/Updating-version-info.html

Kind Regards,

Bas

- -- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCgAGBQJVAImSAAoJEGdQ8QrojUrxGR4QAIUYazxQMsta9betSAz7GyKN
WQUwWaqB7lHiYV2kcwjr38AWIC9Wcz/cl9xZ+C5DaaSWZlGUU+NvKGmP52ClElaY
AcODSskdFuVR72cTPOT3fZAJxB4arwnau+w0L4AtRLZHG3x0F5Tx7jzpYzO7xqtX
fEBqkTPCC8kKPhKiw1djlxIAREQSF8jTMz0+u6sgoRKP+FiDCpqqQmGzvev6nYXQ
0djOt1+TnyaE5IN2qkVXJZrdIOkFU7EcQtSAytR0L9/XA5D4UFzGwoRrPOzKc+zC
uj2egWGztMDVn1N2Kf0VEYd2V7wS92Bhi5Ye3iBJMRkB1LG+0naHL2FVyAqaxJ1i
0wV/Zi0X2fS8N6hiKKOzOzqJn+6w4Kp8gXsWRlDhXsyX6hwCNdRqj44ZETiMHSll
XY7eM8fQiTeg/iYHSj0qBc6DG7vVfHOssaazhr0btOkKv2jvBCAVA4VdbVB6q8bH
SPJZXdfNBYMUU5NL7QOQ6OM03eMIiZX2xWmg+Co2Gtc7PwMfHREbaKNQrLou9XNl
iYc8CHASMqKpKKV5Lf8cZhY0M+BCDNuXq9neME24hFFRzDTZHYIYpzRummM9XNd+
aDJecxStw9CMTsxYO1mhhhywkCM/tiPo9Y7AV0u1Im1P4p4Ef3yY7evx6nZqAHkO
1vakgRTH6atwWo83bJ/D
=U5qS
-----END PGP SIGNATURE-----


From devrim at gunduz.org  Thu Mar 12 01:46:09 2015
From: devrim at gunduz.org (Devrim =?ISO-8859-1?Q?G=FCnd=FCz?=)
Date: Thu, 12 Mar 2015 10:46:09 +0200
Subject: [Proj] proj 4.9.1 released
In-Reply-To: <245F3E35-C0EE-48AE-B650-606D29CB98F5@hobu.co>
References: <245F3E35-C0EE-48AE-B650-606D29CB98F5@hobu.co>
Message-ID: <1426149969.22776.88.camel@gunduz.org>


Hi,

On Tue, 2015-03-10 at 14:44 -0500, Howard Butler wrote:
> proj 4.9.1 is released as approved by the MetaCRS list. It cumulates a
> number of bug fixes and small updates, and it went through five
> release candidates before being declared final. 
> 
> http://download.osgeo.org/proj/proj-4.9.1.tar.gz

Awesome, thanks! I again want to confirm that it builds fine with Fedora
21, 22 and 23, where 23 contains GCC 5.0.

Regards,
-- 
Devrim GÜNDÜZ
Principal Systems Engineer @ EnterpriseDB: http://www.enterprisedb.com
PostgreSQL Danışmanı/Consultant, Red Hat Certified Engineer
Twitter: @DevrimGunduz , @DevrimGunduzTR

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 819 bytes
Desc: This is a digitally signed message part
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150312/e6817986/attachment.sig>

From Adrien.Barbaste at efa.gr  Thu Mar 12 06:29:21 2015
From: Adrien.Barbaste at efa.gr (Adrien Barbaste)
Date: Thu, 12 Mar 2015 13:29:21 +0000
Subject: [Proj] How to create a new EPSG for a local system
Message-ID: <3822F4CFF6B54043A8A37731216B5190D70E45@EXCEFA.efanet.efa.gr>

Hello,

I'm doing an internship for an archaeology school in Greece and I have a problem in creating of a new EPSG for local coordinates.

I use Proj4js to work on a WebGIS and I try to determine a new EPSG for the layers that are in local coordinates.
I've all the layers in a local system built by the archeologists and some of this points in the greek coordinates system too (EGSA87).

First, I can calculate a 2D transformation between the local coordinates and the greek coordinates. So I obtained the 5 parameters of transformation : the 3 translations (Tx Ty and Tz), the scale factor (K) and the angle of rotation (Rz).

Then, I don't know how to create a new EPSG, because I tried with a transverse mercator projection as the greek projection, but I think that it's impossible to insert a rotation in a proj4js (only with "+axis=", but I cannot choose the angle)
So, I tried to use an oblique mercator projection with "+alpha=" (the rotation angle) and "+gamma=" (the meridian convergence)

The results aren't good. I've an error of less than 3cm on an archaeological site when the rotation is very low, but when I try this method on another site where the rotation angle is about 33 degrees, I have an error that can reach 15-20 centimeters.

I'd like to know how I can build a good EPSG for the local coordinates system ?

Thank you for your help

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150312/e0a8ebf6/attachment.html>

From andre+joost at nurfuerspam.de  Thu Mar 12 09:07:51 2015
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Thu, 12 Mar 2015 17:07:51 +0100
Subject: [Proj] How to create a new EPSG for a local system
In-Reply-To: <3822F4CFF6B54043A8A37731216B5190D70E45@EXCEFA.efanet.efa.gr>
References: <3822F4CFF6B54043A8A37731216B5190D70E45@EXCEFA.efanet.efa.gr>
Message-ID: <mdseh4$g28$1@ger.gmane.org>

Hello Adrien,

Am 12.03.2015 um 14:29 schrieb Adrien Barbaste:

> I'm doing an internship for an archaeology school in Greece and I
> have a problem in creating of a new EPSG for local coordinates.
>
> I use Proj4js to work on a WebGIS and I try to determine a new EPSG
> for the layers that are in local coordinates. I've all the layers in
> a local system built by the archeologists and some of this points in
> the greek coordinates system too (EGSA87).

I guess you want a new custom CRS, not EPSG. EPSG codes are published by 
the EPSG (now IOGP) commitee, and can be found at 
<http://www.epsg-registry.org/>

>
> First, I can calculate a 2D transformation between the local
> coordinates and the greek coordinates. So I obtained the 5 parameters
> of transformation : the 3 translations (Tx Ty and Tz), the scale
> factor (K) and the angle of rotation (Rz).

That is only usefull for small rotations.

>
> Then, I don't know how to create a new EPSG, because I tried with a
> transverse mercator projection as the greek projection, but I think
> that it's impossible to insert a rotation in a proj4js (only with
> "+axis=", but I cannot choose the angle) So, I tried to use an
> oblique mercator projection with "+alpha=" (the rotation angle) and
> "+gamma=" (the meridian convergence)

I have given an example here: 
<http://gis.stackexchange.com/questions/83861/using-customized-coordinate-system-for-archaeological-site-data>

+lat_0 and +lonc are the geographical coordinates of the point of rotation.

If you have the coordinates in the Greek System GGRS87 (EPSG:2100), you 
have to obey the datum shift between that and WGS84:

+proj=tmerc +lat_0=0 +lon_0=24 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 
+towgs84=-199.87,74.79,246.62,0,0,0,0 +units=m +no_defs

or for geographical coordinates EPSG:4121

+proj=longlat +ellps=GRS80 +towgs84=-199.87,74.79,246.62,0,0,0,0 +no_defs

I did not use the gamma factor in my example, because the origin of my 
local CRS is on the rotation point. The gamma is used to rotate back the 
CRS to have north upwards.

>
> The results aren't good. I've an error of less than 3cm on an
> archaeological site when the rotation is very low, but when I try
> this method on another site where the rotation angle is about 33
> degrees, I have an error that can reach 15-20 centimeters.

How did you compute the angle? I would suggest to calculate it from all 
points you have in both coordinate systems. And it might be different 
from site to site. You can try to modify the k factor as well to get 
better accuracy. GGRS87 uses 0.9996, my example 1.0


HTH,
André Joost




From smpel at yahoo.com  Thu Mar 12 10:05:16 2015
From: smpel at yahoo.com (Stefanos Beligiannis)
Date: Thu, 12 Mar 2015 17:05:16 +0000 (UTC)
Subject: [Proj] How to create a new EPSG for a local system
In-Reply-To: <3822F4CFF6B54043A8A37731216B5190D70E45@EXCEFA.efanet.efa.gr>
References: <3822F4CFF6B54043A8A37731216B5190D70E45@EXCEFA.efanet.efa.gr>
Message-ID: <697283381.4977273.1426179916563.JavaMail.yahoo@mail.yahoo.com>

Hello Adrien,
In Greece we don't use the 2D Helmert or the similarity transformation to compute coordinates between a local system and from and to EGSA87.
We use instead  a 2nd degree polynomial transformation. Try this it will cover a 50km side rectangle with less than 2-3 cm error. This method applied by Prof. Agantza to compute parameters between the old HATT system and EGSA87.
If you want more support mail me.
BrgdsStefanos Beligiannis
       From: Adrien Barbaste <Adrien.Barbaste at efa.gr>
 To: "proj at lists.maptools.org" <proj at lists.maptools.org> 
 Sent: Thursday, March 12, 2015 4:29 PM
 Subject: [Proj] How to create a new EPSG for a local system
   
 <!--#yiv2579247644 _filtered #yiv2579247644 {font-family:"Cambria Math";panose-1:2 4 5 3 5 4 6 3 2 4;} _filtered #yiv2579247644 {font-family:Calibri;panose-1:2 15 5 2 2 2 4 3 2 4;}#yiv2579247644 #yiv2579247644 p.yiv2579247644MsoNormal, #yiv2579247644 li.yiv2579247644MsoNormal, #yiv2579247644 div.yiv2579247644MsoNormal {margin:0in;margin-bottom:.0001pt;font-size:11.0pt;font-family:"Calibri", "sans-serif";}#yiv2579247644 a:link, #yiv2579247644 span.yiv2579247644MsoHyperlink {color:blue;text-decoration:underline;}#yiv2579247644 a:visited, #yiv2579247644 span.yiv2579247644MsoHyperlinkFollowed {color:purple;text-decoration:underline;}#yiv2579247644 span.yiv2579247644EmailStyle17 {font-family:"Calibri", "sans-serif";color:windowtext;}#yiv2579247644 .yiv2579247644MsoChpDefault {font-family:"Calibri", "sans-serif";} _filtered #yiv2579247644 {margin:1.0in 1.0in 1.0in 1.0in;}#yiv2579247644 div.yiv2579247644WordSection1 {}-->Hello,    I’m doing an internship for an archaeology school in Greece and I have a problem in creating of a new EPSG for local coordinates.    I use Proj4js to work on a WebGIS and I try to determine a new EPSG for the layers that are in local coordinates. I've all the layers in a local system built by the archeologists and some of this points in the greek coordinates system too (EGSA87).    First, I can calculate a 2D transformation between the local coordinates and the greek coordinates. So I obtained the 5 parameters of transformation : the 3 translations (Tx Ty and Tz), the scale factor (K) and the angle of rotation (Rz).    Then, I don’t know how to create a new EPSG, because I tried with a transverse mercator projection as the greek projection, but I think that it’s impossible to insert a rotation in a proj4js (only with "+axis=", but I cannot choose the angle) So, I tried to use an oblique mercator projection with "+alpha=" (the rotation angle) and "+gamma=" (the meridian convergence)    The results aren't good. I've an error of less than 3cm on an archaeological site when the rotation is very low, but when I try this method on another site where the rotation angle is about 33 degrees, I have an error that can reach 15-20 centimeters.    I’d like to know how I can build a good EPSG for the local coordinates system ?    Thank you for your help    
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150312/7f326ff9/attachment.html>

From pelson.pub at gmail.com  Fri Mar 13 11:23:17 2015
From: pelson.pub at gmail.com (Phil Elson)
Date: Fri, 13 Mar 2015 18:23:17 +0000
Subject: [Proj] proj 4.9.1 released
In-Reply-To: <1426149969.22776.88.camel@gunduz.org>
References: <245F3E35-C0EE-48AE-B650-606D29CB98F5@hobu.co>
	<1426149969.22776.88.camel@gunduz.org>
Message-ID: <CA+L60sBqeC+M15b3e0h4ossu5BD1foVEHJAApb-4LMWhEk0E9w@mail.gmail.com>

I should have said, I've now successfully built this on 64-bit Ubuntu, OSX,
Windows 32-bit and Windows 64-bit (via travis-ci and Appveyor) without any
changes to the build process from v4.8.
(for reference, the build details are at
https://github.com/SciTools/conda-recipes-scitools/pull/60)

On 12 March 2015 at 08:46, Devrim Gündüz <devrim at gunduz.org> wrote:

>
> Hi,
>
> On Tue, 2015-03-10 at 14:44 -0500, Howard Butler wrote:
> > proj 4.9.1 is released as approved by the MetaCRS list. It cumulates a
> > number of bug fixes and small updates, and it went through five
> > release candidates before being declared final.
> >
> > http://download.osgeo.org/proj/proj-4.9.1.tar.gz
>
> Awesome, thanks! I again want to confirm that it builds fine with Fedora
> 21, 22 and 23, where 23 contains GCC 5.0.
>
> Regards,
> --
> Devrim GÜNDÜZ
> Principal Systems Engineer @ EnterpriseDB: http://www.enterprisedb.com
> PostgreSQL Danışmanı/Consultant, Red Hat Certified Engineer
> Twitter: @DevrimGunduz , @DevrimGunduzTR
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150313/35fcc041/attachment.html>

From howard at hobu.co  Fri Mar 13 11:27:51 2015
From: howard at hobu.co (Howard Butler)
Date: Fri, 13 Mar 2015 13:27:51 -0500
Subject: [Proj] Migrate to github?
Message-ID: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co>

All,

In my role as self-appointed maintainer, I became quickly aware that my brain had been poisoned by github's ticket and development workflow. I found myself rather hamstrung without it in the context of doing the proj 4.9.1 release.

I would like to migrate the proj Trac and Subversion instances, including all tickets, revision control, branches, and tags, to a github repository at http://github.com/OSGeo/proj and decommission them once there's sign-off that the migration looks good.

Unless I hear significant pushback *against* doing this, consider this message your notice that the effort is ongoing, and I will notify once a test migration is complete for people to look around. At that time I will then motion to switch over once folks are satisfied.

Note that this same migration was done in the past by Thomas Bonfort for MapServer, with a much larger Trac instance (which itself was preserved from a Bugzilla instance). It's annoying to have software survive multiple generations of bug tracking and revision control software, but I guess it's a good thing that the software is useful enough to warrant the migration in the first place.

Howard



From warmerdam at pobox.com  Fri Mar 13 11:43:35 2015
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 13 Mar 2015 11:43:35 -0700
Subject: [Proj] Migrate to github?
In-Reply-To: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co>
References: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co>
Message-ID: <CA+YzLBfXG2s2OjdmmdonLC2+Esed8JTKuPXbX8OnYT7rEHgjAA@mail.gmail.com>

Howard,

Sounds good to me!

Best regards,
Frank

On Fri, Mar 13, 2015 at 11:27 AM, Howard Butler <howard at hobu.co> wrote:
> All,
>
> In my role as self-appointed maintainer, I became quickly aware that my brain had been poisoned by github's ticket and development workflow. I found myself rather hamstrung without it in the context of doing the proj 4.9.1 release.
>
> I would like to migrate the proj Trac and Subversion instances, including all tickets, revision control, branches, and tags, to a github repository at http://github.com/OSGeo/proj and decommission them once there's sign-off that the migration looks good.
>
> Unless I hear significant pushback *against* doing this, consider this message your notice that the effort is ongoing, and I will notify once a test migration is complete for people to look around. At that time I will then motion to switch over once folks are satisfied.
>
> Note that this same migration was done in the past by Thomas Bonfort for MapServer, with a much larger Trac instance (which itself was preserved from a Bugzilla instance). It's annoying to have software survive multiple generations of bug tracking and revision control software, but I guess it's a good thing that the software is useful enough to warrant the migration in the first place.
>
> Howard
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


From Tom.Kralidis at ec.gc.ca  Fri Mar 13 11:53:15 2015
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Ontario])
Date: Fri, 13 Mar 2015 14:53:15 -0400
Subject: [Proj] Migrate to github?
In-Reply-To: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co>
References: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co>
Message-ID: <D4979196AC320B45BE4A5DD7EE80C3E40261AE3A@sdow04exmail2.ontario.int.ec.gc.ca>

+1

As seen with other projects having gone down this path, this will keep
things up to date, and encourage continued/increased improvements (3
cheers for pull requests!).

..Tom


> -----Original Message-----
> From: proj-bounces at lists.maptools.org [mailto:proj-
> bounces at lists.maptools.org] On Behalf Of Howard Butler
> Sent: 2015-03-13 14:28
> To: PROJ.4 and general Projections Discussions
> Subject: [Proj] Migrate to github?
> 
> All,
> 
> In my role as self-appointed maintainer, I became quickly aware that
my
> brain had been poisoned by github's ticket and development workflow. I
> found myself rather hamstrung without it in the context of doing the
proj
> 4.9.1 release.
> 
> I would like to migrate the proj Trac and Subversion instances,
including all
> tickets, revision control, branches, and tags, to a github repository
at
> http://github.com/OSGeo/proj and decommission them once there's sign-
> off that the migration looks good.
> 
> Unless I hear significant pushback *against* doing this, consider this
message
> your notice that the effort is ongoing, and I will notify once a test
migration is
> complete for people to look around. At that time I will then motion to
switch
> over once folks are satisfied.
> 
> Note that this same migration was done in the past by Thomas Bonfort
for
> MapServer, with a much larger Trac instance (which itself was
preserved
> from a Bugzilla instance). It's annoying to have software survive
multiple
> generations of bug tracking and revision control software, but I guess
it's a
> good thing that the software is useful enough to warrant the migration
in the
> first place.
> 
> Howard
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


From charles.karney at sri.com  Fri Mar 13 12:58:19 2015
From: charles.karney at sri.com (Charles Karney)
Date: Fri, 13 Mar 2015 15:58:19 -0400
Subject: [Proj] Migrate to github?
In-Reply-To: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co>
References: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co>
Message-ID: <5503415B.1060607@sri.com>

+1 (mainly because by now I'm more familiar with git than svn)

On 2015-03-13 14:27, Howard Butler wrote:
> All,
>
> In my role as self-appointed maintainer, I became quickly aware that my brain had been poisoned by github's ticket and development workflow. I found myself rather hamstrung without it in the context of doing the proj 4.9.1 release.
>
> I would like to migrate the proj Trac and Subversion instances, including all tickets, revision control, branches, and tags, to a github repository at http://github.com/OSGeo/proj and decommission them once there's sign-off that the migration looks good.
>
> Unless I hear significant pushback *against* doing this, consider this message your notice that the effort is ongoing, and I will notify once a test migration is complete for people to look around. At that time I will then motion to switch over once folks are satisfied.
>
> Note that this same migration was done in the past by Thomas Bonfort for MapServer, with a much larger Trac instance (which itself was preserved from a Bugzilla instance). It's annoying to have software survive multiple generations of bug tracking and revision control software, but I guess it's a good thing that the software is useful enough to warrant the migration in the first place.
>
> Howard
>


From gdt at ir.bbn.com  Fri Mar 13 13:53:19 2015
From: gdt at ir.bbn.com (Greg Troxel)
Date: Fri, 13 Mar 2015 16:53:19 -0400
Subject: [Proj] Migrate to github?
In-Reply-To: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co> (Howard Butler's
	message of "Fri, 13 Mar 2015 13:27:51 -0500")
References: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co>
Message-ID: <rmibnjwliv4.fsf@fnord.ir.bbn.com>


I am unclear on osgeo hosting, but I think that in general Free Software
projects should be hosted at Free Software-supporting nonprofits.
(But you're the one doing the work, so I'll just say this once and be
done.)


-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 180 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150313/0559534b/attachment.sig>

From roger.bivand at nhh.no  Sun Mar 15 03:59:58 2015
From: roger.bivand at nhh.no (Roger Bivand)
Date: Sun, 15 Mar 2015 10:59:58 +0000 (UTC)
Subject: [Proj] Migrate to github?
References: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co>
	<rmibnjwliv4.fsf@fnord.ir.bbn.com>
Message-ID: <loom.20150315T114810-304@post.gmane.org>

Greg Troxel <gdt <at> ir.bbn.com> writes:

> 
> 
> I am unclear on osgeo hosting, but I think that in general Free Software
> projects should be hosted at Free Software-supporting nonprofits.
> (But you're the one doing the work, so I'll just say this once and be
> done.)
> 
> 

This is a contentious but vital point, which other Free Software foundations
have found troubling. It means that someone must have an actively maintained
plan for withdrawal from github.com should the company fold, or its domain
be blocked in jurisdictions where users and developers need access to code
and documentation.

Use of cloudy-CDN for software distribution is another very controversial
topic for similar reasons.

If PROJ closes SVN read access, I will stop tracking trunk for uses in R,
and consequently not provide reports on changes in PROJ that break other
stuff. Life is too short to use only fashionable tools (and git is not
uniformly accepted as being superior to svn). 

Roger

> 
> _______________________________________________
> Proj mailing list
> Proj <at> lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj






From charles.karney at sri.com  Sun Mar 15 06:25:34 2015
From: charles.karney at sri.com (Charles Karney)
Date: Sun, 15 Mar 2015 09:25:34 -0400
Subject: [Proj] Migrate to github?
In-Reply-To: <loom.20150315T114810-304@post.gmane.org>
References: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co>	<rmibnjwliv4.fsf@fnord.ir.bbn.com>
	<loom.20150315T114810-304@post.gmane.org>
Message-ID: <5505884E.7060704@sri.com>

On 03/15/2015 06:59 AM, Roger Bivand wrote:
> Greg Troxel <gdt <at> ir.bbn.com> writes:
>
>> I am unclear on osgeo hosting, but I think that in general Free Software
>> projects should be hosted at Free Software-supporting nonprofits.
>> (But you're the one doing the work, so I'll just say this once and be
>> done.)
>
> This is a contentious but vital point, which other Free Software foundations
> have found troubling. It means that someone must have an actively maintained
> plan for withdrawal from github.com should the company fold, or its domain
> be blocked in jurisdictions where users and developers need access to code
> and documentation.
>
> Use of cloudy-CDN for software distribution is another very controversial
> topic for similar reasons.
>
> If PROJ closes SVN read access, I will stop tracking trunk for uses in R,
> and consequently not provide reports on changes in PROJ that break other
> stuff. Life is too short to use only fashionable tools (and git is not
> uniformly accepted as being superior to svn).
>
> Roger
>

I'm not a purist about hosting sites provided that the software license
isn't affected.  github seems fine to me.  The software can't just
disappear with a git repository since every contributor will have a
copy.  I suppose that the metadata (bug tracking information) can vanish
-- but that's probably true (more likely?) with the current setup.

I'm also fine using either svn or git (with a preference for git).

What I think is unacceptable is a 3-year interval between releases for
proj4.  (4.8.0 was released on 2012-03-13; 4.9.0 was never released;
4.9.1 was released on 2015-03-04.)

Howard Butler stepped up after a long period of inactivity to make the
latest release of proj4 happen.  I'm strongly inclined to defer to his
wishes going forward in the hope that we can see more timely releases.

   --Charles



From peifer at gmx.eu  Sun Mar 15 20:37:41 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon, 16 Mar 2015 04:37:41 +0100
Subject: [Proj] Migrate to github?
In-Reply-To: <5505884E.7060704@sri.com>
References: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co>	<rmibnjwliv4.fsf@fnord.ir.bbn.com>	<loom.20150315T114810-304@post.gmane.org>
	<5505884E.7060704@sri.com>
Message-ID: <55065005.7080201@gmx.eu>

On 2015-03-15 14:25, Charles Karney wrote:
>
> What I think is unacceptable is a 3-year interval between releases for
> proj4.  (4.8.0 was released on 2012-03-13; 4.9.0 was never released;
> 4.9.1 was released on 2015-03-04.)
>
> Howard Butler stepped up after a long period of inactivity to make the
> latest release of proj4 happen.  I'm strongly inclined to defer to his
> wishes going forward in the hope that we can see more timely releases.
>

I can only blow into the same horn: it hurted me seeing PROJ.4 moving 
towards abandonware, as e.g. confirmed by fact of release 4.9.0 being 
abandoned.

 From my somewhat simplistic use-PROJ.4-from-source perspective, the 
issue boils simply down to: "svn up" vs. "git pull". If I had to choose 
between abandoned code and bug reports in a politically correct 
repository vs. actively maintained code at github.com or similar: life 
is too short for not choosing the latter option.

There is also: 
https://help.github.com/articles/support-for-subversion-clients/, for 
those who have a preference for: svn up.

Hermann



From howard at hobu.co  Sun Mar 15 22:11:47 2015
From: howard at hobu.co (Howard Butler)
Date: Mon, 16 Mar 2015 00:11:47 -0500
Subject: [Proj] Migrate to github?
In-Reply-To: <55065005.7080201@gmx.eu>
References: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co>
	<rmibnjwliv4.fsf@fnord.ir.bbn.com>
	<loom.20150315T114810-304@post.gmane.org>
	<5505884E.7060704@sri.com> <55065005.7080201@gmx.eu>
Message-ID: <4801E8D5-4DF8-4E4F-9692-80A4568E9A51@hobu.co>


> On Mar 15, 2015, at 10:37 PM, Hermann Peifer <peifer at gmx.eu> wrote:
> 
> On 2015-03-15 14:25, Charles Karney wrote:
>> 
>> What I think is unacceptable is a 3-year interval between releases for
>> proj4.  (4.8.0 was released on 2012-03-13; 4.9.0 was never released;
>> 4.9.1 was released on 2015-03-04.)
>> 
>> Howard Butler stepped up after a long period of inactivity to make the
>> latest release of proj4 happen.  I'm strongly inclined to defer to his
>> wishes going forward in the hope that we can see more timely releases.
>> 
> 
> I can only blow into the same horn: it hurted me seeing PROJ.4 moving 
> towards abandonware, as e.g. confirmed by fact of release 4.9.0 being 
> abandoned.
> 
> From my somewhat simplistic use-PROJ.4-from-source perspective, the 
> issue boils simply down to: "svn up" vs. "git pull". If I had to choose 
> between abandoned code and bug reports in a politically correct 
> repository vs. actively maintained code at github.com or similar: life 
> is too short for not choosing the latter option.
> 
> There is also: 
> https://help.github.com/articles/support-for-subversion-clients/, for 
> those who have a preference for: svn up.


Hmm, I didn't expect my proposal to move to github would be controversial. I know that Trac is a PITA, especially OSGeo's somewhat custom UserID implementation, and while going through the tickets it appeared to me that if it was easier to contribute, there would be more contribution. In my opinion, it is undeniable that github makes it much easier for people to contribute. I have seen this in projects I've managed, projects I've participated in, and projects I've contributed to. 

All of the free github clones might have this property too, but then those things don't come with the built-in developer audience. And it's yet another thing to run and maintain for an organization like OSGeo that's already strapped for volunteer administration resources. I think it would be more efficient for OSGeo to pay for github infrastructure if they have to (don't need to currently) than to waste volunteer mojo on care and feeding of redundant and less-efficient self-hosting of infrastructure. 

The Pull Request is an extremely powerful way to contribute that allows drive-by contribution. proj.4 is too important of a project to let fall away, but its nature means that only when people have issues will they be compelled to contribute. That cycle needs to be as friction free, painless and convenient as possible, otherwise it's just too damn much effort and people don't bother. If we want proj.4 to continue in low-maintenance mode, we need to make sure that drive-by contribution is front-and-center visible. Even if a contributor gets over the login hump, that type of contribution ends up being buried in Trac instead of in front of other potential contributors. 

OSGeo's Trac instance is probably never going to get OAuth, meaning its logins and security access will always be kind of one-off. Trac itself is not so actively developed anymore. In combination, these facts mean OSGeo's Trac instance will slowly fall into disrepair like a crumbling city in which no one remembers why it was there in the first place. This is not because it has failed in any way, it is simply because people have moved on. It's the same thing for Google Code too. And someday in the future, the probability is not zero the same will happen to github too. 

I think the market has clearly spoken with respect to DVCS like git vs central VCS like cvs/svn. CVS/SVN incentivizes very small contributions to the codebase if you are a developer external to the project. A geriatric project like proj.4 needs to make it easy for outside contributors to hop in and contribute without friction. Artificial barriers, purposeful or not, waste that developer attention.

A number of OSGeo projects use github for hosting, as do plenty of LocationTech ones as well. I'm comfortable using it for my projects (http://github.com/PDAL/PDAL) too. For a small audience, big impact project like proj.4, it's a well-matched venue.

Howard

From roger.bivand at nhh.no  Mon Mar 16 13:11:34 2015
From: roger.bivand at nhh.no (Roger Bivand)
Date: Mon, 16 Mar 2015 20:11:34 +0000 (UTC)
Subject: [Proj] Migrate to github?
References: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co>
	<rmibnjwliv4.fsf@fnord.ir.bbn.com>
	<loom.20150315T114810-304@post.gmane.org>
	<5505884E.7060704@sri.com> <55065005.7080201@gmx.eu>
	<4801E8D5-4DF8-4E4F-9692-80A4568E9A51@hobu.co>
Message-ID: <loom.20150316T202528-186@post.gmane.org>

Howard Butler <howard <at> hobu.co> writes:

> 
> 
> > On Mar 15, 2015, at 10:37 PM, Hermann Peifer <peifer <at> gmx.eu> wrote:
> > 
> > On 2015-03-15 14:25, Charles Karney wrote:
> >> 
> >> What I think is unacceptable is a 3-year interval between releases for
> >> proj4.  (4.8.0 was released on 2012-03-13; 4.9.0 was never released;
> >> 4.9.1 was released on 2015-03-04.)
> >> 
> >> Howard Butler stepped up after a long period of inactivity to make the
> >> latest release of proj4 happen.  I'm strongly inclined to defer to his
> >> wishes going forward in the hope that we can see more timely releases.
> >> 
> > 
> > I can only blow into the same horn: it hurted me seeing PROJ.4 moving 
> > towards abandonware, as e.g. confirmed by fact of release 4.9.0 being 
> > abandoned.
> > 
> > From my somewhat simplistic use-PROJ.4-from-source perspective, the 
> > issue boils simply down to: "svn up" vs. "git pull". If I had to choose 
> > between abandoned code and bug reports in a politically correct 
> > repository vs. actively maintained code at github.com or similar: life 
> > is too short for not choosing the latter option.
> > 
> > There is also: 
> > https://help.github.com/articles/support-for-subversion-clients/, for 
> > those who have a preference for: svn up.
> 
> Hmm, I didn't expect my proposal to move to github would be controversial.
I know that Trac is a PITA,
> especially OSGeo's somewhat custom UserID implementation, and while going
through the tickets it
> appeared to me that if it was easier to contribute, there would be more
contribution. In my opinion, it is
> undeniable that github makes it much easier for people to contribute. I
have seen this in projects I've
> managed, projects I've participated in, and projects I've contributed to. 
> 
> ...
> 
> ...
> Even if a contributor gets over the login hump, that type of contribution
ends up being buried in Trac
> instead of in front of other potential contributors. 
> 
> ... This is not because it has failed in any way, it is simply because people
> have moved on. It's the same thing for Google Code too. And someday in the
future, the probability is not
> zero the same will happen to github too. 
> 
> ... A
> geriatric project like proj.4 needs to make it easy for outside
contributors to hop in and contribute
> without friction. Artificial barriers, purposeful or not, waste that
developer attention.
> 
> A number of OSGeo projects use github for hosting, as do plenty of
LocationTech ones as well. I'm
> comfortable using it for my projects (http://github.com/PDAL/PDAL) too.
For a small audience, big
> impact project like proj.4, it's a well-matched venue.

I apologise for pruning, but am posting via Gmane. As you'll have gathered,
I don't think that things are this simple. 

One reason is that we really don't want outside contributors or hip
developers without insight into the history and traditions of actually doing
projections on computers making random changes. The level of specialist
expertise needed is considerable. I know that I don't have it, but I'd be
very concerned about pull requests bazaar style becoming the norm

Another is that there is no agreement that all projects are suited by a
decentralised model for repositories. 

Yet another is the consideration that some jurisdictions may block a domain
for whatever reasons. Currently proj is hosted on osgeo.org for everything,
but if the code repository is elsewhere, will the releases also be hosted
elsewhere?

I agree that it is probable that the fashion for github will recede in some
years. Maybe git will continue, it isn't unuseful, but seems better suited
to front-end work. 

I believe that many scientists rely on proj to deliver research results of
importance, results that can be predictably reproduced from securely run and
archived repositories. 

I don't think that I'm being unnecessarily critical - finding and resolving
the init bug #229 and the uoff bug #239 show that I've been trying to track
where changes in proj break stuff in its use in R, and I'm grateful for the
resolution of these issue. However, I don't think that a quick shift to
github will solve the longer term problem of managing the project. Does
MetaCRS still exist? Should its PSC help decide? Could you put up an RFC
with a time line? Just getting handwaves on a list is too ad-hoc - I've seen
it happen before and it wasn't a constructive experience.

If you believe that this has to be done your way, it also implies affirming
your responsibility for the project in the long term, which, given your
other major commitments, is maybe over-generous. 

My conservatism is also driven by a feeling of responsibility, in my case
for many students and researchers using sp and rgdal in R, and through them
proj4, for handling spatial data. Just keeping things running is plenty of
work. 

In any case, I guess everyone will follow a lead, we certainly will.

Best wishes,

Roger


> 
> Howard
> _______________________________________________
> Proj mailing list
> Proj <at> lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 
> 






From warmerdam at pobox.com  Mon Mar 16 18:22:26 2015
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 16 Mar 2015 18:22:26 -0700
Subject: [Proj] Migrate to github?
In-Reply-To: <loom.20150316T202528-186@post.gmane.org>
References: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co>
	<rmibnjwliv4.fsf@fnord.ir.bbn.com>
	<loom.20150315T114810-304@post.gmane.org>
	<5505884E.7060704@sri.com> <55065005.7080201@gmx.eu>
	<4801E8D5-4DF8-4E4F-9692-80A4568E9A51@hobu.co>
	<loom.20150316T202528-186@post.gmane.org>
Message-ID: <CA+YzLBdcfFzaZP9AiPrX09nO=yLZRt3eYkhtOL_xWQr6HtNSPg@mail.gmail.com>

On Mon, Mar 16, 2015 at 1:11 PM, Roger Bivand <roger.bivand at nhh.no> wrote:
> I apologise for pruning, but am posting via Gmane. As you'll have gathered,
> I don't think that things are this simple.
>
> One reason is that we really don't want outside contributors or hip
> developers without insight into the history and traditions of actually doing
> projections on computers making random changes. The level of specialist
> expertise needed is considerable. I know that I don't have it, but I'd be
> very concerned about pull requests bazaar style becoming the norm

Roger,

I wanted to stress a couple points.

1) moving to github.com does not mean anyone can make changes in the
main code stream.  They can propose a pull request, but someone
responsible (an approved commiter) still needs to review and merge the
changes.  In this regard it is not much different than folks offering
patches via Trac though the process is perhaps more streamlined.

>
> Another is that there is no agreement that all projects are suited by a
> decentralised model for repositories.
>
> Yet another is the consideration that some jurisdictions may block a domain
> for whatever reasons. Currently proj is hosted on osgeo.org for everything,
> but if the code repository is elsewhere, will the releases also be hosted
> elsewhere?

My expectation would be that release tarballs would still live in the
usual location on downloads.osgeo.org.

> I agree that it is probable that the fashion for github will recede in some
> years. Maybe git will continue, it isn't unuseful, but seems better suited
> to front-end work.
>
> I believe that many scientists rely on proj to deliver research results of
> importance, results that can be predictably reproduced from securely run and
> archived repositories.
>
> I don't think that I'm being unnecessarily critical - finding and resolving
> the init bug #229 and the uoff bug #239 show that I've been trying to track
> where changes in proj break stuff in its use in R, and I'm grateful for the
> resolution of these issue. However, I don't think that a quick shift to
> github will solve the longer term problem of managing the project. Does
> MetaCRS still exist? Should its PSC help decide? Could you put up an RFC
> with a time line? Just getting handwaves on a list is too ad-hoc - I've seen
> it happen before and it wasn't a constructive experience.

I believe Howard ought to propose a migration to github (also
explaining trac, and wiki migration) as an RFC to the MetaCRS PSC.

I certainly see the MetaCRS PSC continuing to consider RFCs and final
releases and approving new commiters (ie. those allowed to merge pull
requests or commit to the osgeo organization github organization).

> If you believe that this has to be done your way, it also implies affirming
> your responsibility for the project in the long term, which, given your
> other major commitments, is maybe over-generous.
>
> My conservatism is also driven by a feeling of responsibility, in my case
> for many students and researchers using sp and rgdal in R, and through them
> proj4, for handling spatial data. Just keeping things running is plenty of
> work.
>
> In any case, I guess everyone will follow a lead, we certainly will.

I quite agree that github is no panacea.  I am concerned it will lose
a few folks who were tracking svn and understood that flow.  In fact,
I stopped tracking MapServer trunk when it moved to github.  But it
will still be accessable to anyone who wants to make an effort, and it
will be more natural for many others already on github (a transition I
have now mostly absorbed).  If Howard wasn't keen on it, I'd tend to
leave well enough alone for a while, but given his huge contributions
to PROJ.4, and his generally good instincts on this sort of thing, I'm
happy to be supportive of a transition.

Best regards,
Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


From howard at hobu.co  Tue Mar 17 08:54:26 2015
From: howard at hobu.co (Howard Butler)
Date: Tue, 17 Mar 2015 10:54:26 -0500
Subject: [Proj] Migrate to github?
In-Reply-To: <loom.20150316T202528-186@post.gmane.org>
References: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co>
	<rmibnjwliv4.fsf@fnord.ir.bbn.com>
	<loom.20150315T114810-304@post.gmane.org>
	<5505884E.7060704@sri.com> <55065005.7080201@gmx.eu>
	<4801E8D5-4DF8-4E4F-9692-80A4568E9A51@hobu.co>
	<loom.20150316T202528-186@post.gmane.org>
Message-ID: <246F500D-BF32-4797-B774-005762A2E9EF@hobu.co>


> On Mar 16, 2015, at 3:11 PM, Roger Bivand <Roger.Bivand at nhh.no> wrote:
> 
> One reason is that we really don't want outside contributors or hip
> developers without insight into the history and traditions of actually doing
> projections on computers making random changes. The level of specialist
> expertise needed is considerable. I know that I don't have it, but I'd be
> very concerned about pull requests bazaar style becoming the norm

The protection against your concern is better tests and better testing of release candidates, not limiting who can contribute. I'll grant you the maths are specialized knowledge, but a significant chunk of the ticket traffic is your normal workaday library and management stuff, not intricacies of the maths. Nearly all of my ticket efforts in the run up to the 4.9.1 release was this workaday stuff, no maths.

> Another is that there is no agreement that all projects are suited by a
> decentralised model for repositories. 

A centralized repository supposes a group of folks with the wherewithal to manage, curate, and administer that software project. PROJ.4 clearly doesn't have that anymore (and I would posit it never did -- it just had ready access to Frank and he was able to justify spending his time one it). It has a bunch of users who care but aren't empowered to make the changes they need to happen. I stepped in to do the release because my software, PDAL, depends heavily on a working PROJ.4, and I'm special in that I'm a MetaCRS member with commit access in the repository. I have historically never been a PROJ.4 developer, and without my having been previously blessed, I otherwise would have been stuck. 

A way forward is for PROJ.4 to be in (low) maintenance mode with wide contribution for any/all who feel empowered to do so, along with some people who have the authority to make a release happen. Subversion and a stove-piped Trac instance cut very hard against that mode of operation. The alternative is (no) maintenance mode with almost no one having access to the revision control to maintain the software and waiting extremely long periods between releases. No one has been comfortable with the latter scenario. 

Let's try something different. I'm willing to step in as a release manager for PROJ.4, and help out where I can and shepherd release activity. I'm also not very comfortable on the maths, but I'm willing to react to testing, and I have enough confidence on other typical open source software development activities. I want to solicit more contribution. Expertise can be acquired, historical rational can be learned, and tests can be satisfied. People will invest the time if they know that it can lead somewhere useful for them. 

> Yet another is the consideration that some jurisdictions may block a domain
> for whatever reasons. Currently proj is hosted on osgeo.org for everything,
> but if the code repository is elsewhere, will the releases also be hosted
> elsewhere?

This would frankly be worse if osgeo.org were blocked in China or whatever. The organization has no financial or legal capacity to fight anything like that. github will.

> I believe that many scientists rely on proj to deliver research results of
> importance, results that can be predictably reproduced from securely run and
> archived repositories. 

The organization that produces the release, MetaCRS, will still be responsible for promoting and releasing it. That will not change regardless of the revision control or ticket tracking system that is used.

> I don't think that I'm being unnecessarily critical - finding and resolving
> the init bug #229 and the uoff bug #239 show that I've been trying to track
> where changes in proj break stuff in its use in R, and I'm grateful for the
> resolution of these issue. However, I don't think that a quick shift to
> github will solve the longer term problem of managing the project. Does
> MetaCRS still exist? Should its PSC help decide? Could you put up an RFC
> with a time line? Just getting handwaves on a list is too ad-hoc - I've seen
> it happen before and it wasn't a constructive experience.

I'm not going to write an RFC for this. I will put a test ingest up for discussion, and when we feel ready, I will motion to the MetaCRS committee to get sign off on a github migration. 

> If you believe that this has to be done your way, it also implies affirming
> your responsibility for the project in the long term, which, given your
> other major commitments, is maybe over-generous. 

I have a project and financial stake in making sure PROJ.4 is a viable software library going forward. Without the PROJ.4, libgeotiff, OSR triumvirate, I need to find new software to support horizontal and vertical coordinate transformation for 3D geospatial point cloud data. I don't have the funding available to build something from scratch, and moving to something like CS-Map is going to cost more money and time. I won't be migrating PROJ.4 to github and walking away. My contribution history to this and other OSGeo-sphere projects should make that clear.

Howard

From richard.greenwood at gmail.com  Tue Mar 17 18:59:26 2015
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Tue, 17 Mar 2015 19:59:26 -0600
Subject: [Proj] why doesn't the epsg file reference the hpgn grids?
Message-ID: <CAHBySPa1O6JgRx8YWyjP7V3ac1-mdzW6VQE1YLCxFJEvsK=Vug@mail.gmail.com>

The epsg file included with proj has definitions for hpgn coordinate
systems that do not use the grid shift files, for example:
# NAD83(HARN) / Wyoming West (ftUS)
<3758> +proj=tmerc +lat_0=40.5 +lon_0=-110.0833333333333 +k=0.9999375
+x_0=800000 +y_0=100000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=us-ft
+no_defs  <>

So there is no datum transformation applied. But proj has the appropriate
harn grid shift files here:
http://trac.osgeo.org/proj/wiki/HarnGrids

And changing the above definition to include the grid shift files like
below seems more appropriate:
# NAD83(HARN) / Wyoming West (ftUS)
<3758> +proj=tmerc +lat_0=40.5 +lon_0=-110.0833333333333 +k=0.9999375
+x_0=800000 +y_0=100000 +ellps=GRS80 +nadgrids=wyhpgn.gsb +units=us-ft
+no_defs  <>

Does the proj epsg file get created from data at www.epsg.org? And is that
data lacking the reference to the grid shift files, or is it "lost in
translation"? It seems like there is the wonderful resource in the harn
grids that isn't getting used, but maybe I'm overlooking something.

Rich

-- 
Richard W. Greenwood, PLS
www.greenwoodmap.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150317/5e57781b/attachment.html>

From peifer at gmx.eu  Tue Mar 17 20:32:12 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed, 18 Mar 2015 04:32:12 +0100
Subject: [Proj] why doesn't the epsg file reference the hpgn grids?
In-Reply-To: <CAHBySPa1O6JgRx8YWyjP7V3ac1-mdzW6VQE1YLCxFJEvsK=Vug@mail.gmail.com>
References: <CAHBySPa1O6JgRx8YWyjP7V3ac1-mdzW6VQE1YLCxFJEvsK=Vug@mail.gmail.com>
Message-ID: <mearjs$gme$1@ger.gmane.org>

On 2015-03-18 2:59, Richard Greenwood wrote:
>
> Does the proj epsg file get created from data at www.epsg.org
> <http://www.epsg.org>? And is that data lacking the reference to the
> grid shift files, or is it "lost in translation"? It seems like there is
> the wonderful resource in the harn grids that isn't getting used, but
> maybe I'm overlooking something.
>

Here a few observations, from a simple user perspective:
There is a somewhat complex (mysterious?) epsg-to-csv conversion process 
with "upstream" elements around libgeotiff and "downstream" locations 
near PROJ.4, which results in ever surprising changes in the generated 
lookup files.

The changes are partly based on EPSG database updates (which is fine, of 
course) but also on changing conversion logic: about which parameter set 
to select in case of several available, which numeric precision to 
choose when converting radians from EPSG into arc seconds used in 
towgs84 values, and so on.

There are plenty of helpful grid shift files listed at 
http://trac.osgeo.org/proj/wiki, but PROJ.4's epsg lookup table lists 
none of them, only the null grid appears there:

$ grep nadgrids local/share/proj/epsg
<3785> +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 
+y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs <>
<3857> +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 
+y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs <>

There haven't been many releases of PROJ lately, which brought some 
stability into coordinate transformations, as the positive side-effect 
of an otherwise sad story. However, this is expected to change and what 
I did anyway some time ago was to add my own lookup table as 
local/share/proj/hermann in order to gain control over my own 
transformations.

Now I can use: +init=hermann:4314, which resolves to my transformation 
parameters (+proj=longlat +ellps=bessel +nadgrids=BETA2007.gsb), whereas 
epsg:4314 translates to: +proj=longlat +datum=potsdam +no_defs

Hope this helps, Hermann




From even.rouault at spatialys.com  Tue Mar 17 20:53:39 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Mar 2015 04:53:39 +0100
Subject: [Proj] why doesn't the epsg file reference the hpgn grids?
In-Reply-To: <mearjs$gme$1@ger.gmane.org>
References: <CAHBySPa1O6JgRx8YWyjP7V3ac1-mdzW6VQE1YLCxFJEvsK=Vug@mail.gmail.com>
	<mearjs$gme$1@ger.gmane.org>
Message-ID: <1426650819.5508f6c3dea5f@imp.free.fr>

Selon Hermann Peifer <peifer at gmx.eu>:

> On 2015-03-18 2:59, Richard Greenwood wrote:
> >
> > Does the proj epsg file get created from data at www.epsg.org
> > <http://www.epsg.org>? And is that data lacking the reference to the
> > grid shift files, or is it "lost in translation"? It seems like there is
> > the wonderful resource in the harn grids that isn't getting used, but
> > maybe I'm overlooking something.
> >
>
> Here a few observations, from a simple user perspective:
> There is a somewhat complex (mysterious?) epsg-to-csv conversion process
> with "upstream" elements around libgeotiff and "downstream" locations
> near PROJ.4, which results in ever surprising changes in the generated
> lookup files.

As an open source code, there is no real "mystery" involved, although it is
indeed non trivial. The process is decently documented here :
http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/README

>
> The changes are partly based on EPSG database updates (which is fine, of
> course) but also on changing conversion logic: about which parameter set
> to select in case of several available, which numeric precision to
> choose when converting radians from EPSG into arc seconds used in
> towgs84 values, and so on.
>
> There are plenty of helpful grid shift files listed at
> http://trac.osgeo.org/proj/wiki, but PROJ.4's epsg lookup table lists
> none of them, only the null grid appears there:
>
> $ grep nadgrids local/share/proj/epsg
> <3785> +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0
> +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs <>
> <3857> +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0
> +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs <>
>
> There haven't been many releases of PROJ lately, which brought some
> stability into coordinate transformations, as the positive side-effect
> of an otherwise sad story. However, this is expected to change and what
> I did anyway some time ago was to add my own lookup table as
> local/share/proj/hermann in order to gain control over my own
> transformations.

As most of the "heavy" grids are not directly distributed with proj, it might be
tricky to propose a reasonable +nadgrids parameter. Although we could use the @
syntax to make their presence optional. But there's currently no way of doing
the association between a datum and corresponding grids when the "raw" CSV files
are processed in the gcs.csv/pcs.csv. Perhaps something similar to
http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/datum_shift_pref.csv
could be used.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com


From peifer at gmx.eu  Tue Mar 17 21:39:29 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed, 18 Mar 2015 05:39:29 +0100
Subject: [Proj] why doesn't the epsg file reference the hpgn grids?
In-Reply-To: <1426650819.5508f6c3dea5f@imp.free.fr>
References: <CAHBySPa1O6JgRx8YWyjP7V3ac1-mdzW6VQE1YLCxFJEvsK=Vug@mail.gmail.com>
	<mearjs$gme$1@ger.gmane.org> <1426650819.5508f6c3dea5f@imp.free.fr>
Message-ID: <55090181.1060901@gmx.eu>

On 2015-03-18 4:53, Even Rouault wrote:
> Selon Hermann Peifer <peifer at gmx.eu>:
>
>> Here a few observations, from a simple user perspective: (...)
>
> As an open source code, there is no real "mystery" involved, although it is
> indeed non trivial. The process is decently documented here :
> http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/README
>

In my first line, I mentioned the "simple user" on purpose. The one who 
might not know what SVN or trunk is, or who might not speak English in 
the first place (there is machine translation, I know..)

Don't understand me wrong: local/share/epsg is more than fine for 
beginners, but somewhat advanced users might want to have more control 
and stability when it comes to transformation parameters, at least I do.

I also did not mention that the meaning of e.g. +datum=potsdam changed 
over the few years I have been using PROJ. The potsdam datum seems to be 
hard-wired into pj_datums.c.

$ grep potsdam pj_datums.c
"potsdam",  "towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7", ...

I assume that earlier changes to pj_datums.c were yet another downstream 
processing step. I can only assume, as this isn't mentioned in the 
indicated README.

In summary: local/share/epsg is probably as fine as it can be, I do 
however feel safer when using local/share/hermann.

Hermann



From Roger.Bivand at nhh.no  Wed Mar 18 01:01:23 2015
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 18 Mar 2015 08:01:23 +0000 (UTC)
Subject: [Proj] Migrate to github?
References: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co>
	<rmibnjwliv4.fsf@fnord.ir.bbn.com>
	<loom.20150315T114810-304@post.gmane.org>
	<5505884E.7060704@sri.com> <55065005.7080201@gmx.eu>
	<4801E8D5-4DF8-4E4F-9692-80A4568E9A51@hobu.co>
	<loom.20150316T202528-186@post.gmane.org>
	<246F500D-BF32-4797-B774-005762A2E9EF@hobu.co>
Message-ID: <loom.20150318T085527-960@post.gmane.org>

Howard Butler <howard <at> hobu.co> writes:

> 
> 
> > On Mar 16, 2015, at 3:11 PM, Roger Bivand <Roger.Bivand <at> nhh.no> wrote:
> > 
>...
> 
> > ...
> 
> Let's try something different. I'm willing to step in as a release manager
for PROJ.4, and help out where I
> can and shepherd release activity. I'm also not very comfortable on the
maths, but I'm willing to react to
> testing, and I have enough confidence on other typical open source
software development activities. I
> want to solicit more contribution. Expertise can be acquired, historical
rational can be learned, and
> tests can be satisfied. People will invest the time if they know that it
can lead somewhere useful for them. 
> 

Thanks for many useful clarifications. It is arguably important to have a
record of why a change is being considered - now we have it.

> > 
...
> 
> > I believe that many scientists rely on proj to deliver research results of
> > importance, results that can be predictably reproduced from securely run and
> > archived repositories. 
> 
> The organization that produces the release, MetaCRS, will still be
responsible for promoting and
> releasing it. That will not change regardless of the revision control or
ticket tracking system that is used.

OK, good.

> 
> >
...
> 
> I'm not going to write an RFC for this. I will put a test ingest up for
discussion, and when we feel ready, I will
> motion to the MetaCRS committee to get sign off on a github migration. 
> 
> ...

And a process clarification - so we know more or less where we are and where
we are going. The final point is for as many as possible to offer active
support in taking PROJ.4 forward.

Best wishes,

Roger

> 
> Howard
> _______________________________________________
> Proj mailing list
> Proj <at> lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 
> 






From richard.greenwood at gmail.com  Wed Mar 18 06:14:53 2015
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed, 18 Mar 2015 07:14:53 -0600
Subject: [Proj] why doesn't the epsg file reference the hpgn grids?
In-Reply-To: <1426650819.5508f6c3dea5f@imp.free.fr>
References: <CAHBySPa1O6JgRx8YWyjP7V3ac1-mdzW6VQE1YLCxFJEvsK=Vug@mail.gmail.com>
	<mearjs$gme$1@ger.gmane.org> <1426650819.5508f6c3dea5f@imp.free.fr>
Message-ID: <CAHBySPbjYZk703OrCPvv_OuKL7CTCMD1C-6ku0M3M2AYioGmkQ@mail.gmail.com>

On Tue, Mar 17, 2015 at 9:53 PM, Even Rouault <even.rouault at spatialys.com>
wrote:


> As most of the "heavy" grids are not directly distributed with proj, it
> might be
> tricky to propose a reasonable +nadgrids parameter. Although we could use
> the @
> syntax to make their presence optional.


What is the "@ syntax"?


> But there's currently no way of doing
> the association between a datum and corresponding grids when the "raw" CSV
> files
> are processed in the gcs.csv/pcs.csv. Perhaps something similar to
>
> http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/datum_shift_pref.csv
> could be used.
>

I'm still unclear as to how epsg.org addresses grid shifts. I randomly
surfed thru the files in
http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/
<http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/datum_shift_pref.csv>
and
found no clues. It seems like it would be nice to enhance the processing of
the epsg.org source definitions to reference grid shift files if possible.
By "if possible" I mean if there is sufficient information in the epsg.org
source definitions to do that. If not, then I agree that something
like datum_shift_pref.csv would be good.

Thanks,
Rich
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150318/f252e175/attachment.html>

From richard.greenwood at gmail.com  Wed Mar 18 07:17:56 2015
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed, 18 Mar 2015 08:17:56 -0600
Subject: [Proj] why doesn't the epsg file reference the hpgn grids?
In-Reply-To: <mearjs$gme$1@ger.gmane.org>
References: <CAHBySPa1O6JgRx8YWyjP7V3ac1-mdzW6VQE1YLCxFJEvsK=Vug@mail.gmail.com>
	<mearjs$gme$1@ger.gmane.org>
Message-ID: <CAHBySPbEd9R5uDOFBDs_=J7ZyiOgmPbAe_1r9A-Yem1GDuezdQ@mail.gmail.com>

 be used.
On Tue, Mar 17, 2015 at 9:32 PM, Hermann Peifer <peifer at gmx.eu> wrote:

>
> I did anyway some time ago was to add my own lookup table as
> local/share/proj/hermann in order to gain control over my own
> transformations.
>
> Now I can use: +init=hermann:4314, which resolves to my transformation
> parameters (+proj=longlat +ellps=bessel +nadgrids=BETA2007.gsb), whereas
> epsg:4314 translates to: +proj=longlat +datum=potsdam +no_defs
>

Hermann, thank you for the suggestion. I'm doing the same thing (creating
my own lookup file) which of course works fine for me, but doesn't help
anyone else. I believe that there are about 600 coordinate systems in the
Proj4 epsg file that say "HARN" but do actually reference the HARN grid
shift files, nor give the user any obvious clues that these grid files are
available and could, and should, be used.

Thanks,
Rich


-- 
Richard W. Greenwood, PLS
www.greenwoodmap.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150318/b893b5fe/attachment.html>

From Mikael.Rittri at carmenta.com  Wed Mar 18 08:03:23 2015
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Wed, 18 Mar 2015 15:03:23 +0000
Subject: [Proj] why doesn't the epsg file reference the hpgn grids?
In-Reply-To: <CAHBySPbEd9R5uDOFBDs_=J7ZyiOgmPbAe_1r9A-Yem1GDuezdQ@mail.gmail.com>
References: <CAHBySPa1O6JgRx8YWyjP7V3ac1-mdzW6VQE1YLCxFJEvsK=Vug@mail.gmail.com>
	<mearjs$gme$1@ger.gmane.org>
	<CAHBySPbEd9R5uDOFBDs_=J7ZyiOgmPbAe_1r9A-Yem1GDuezdQ@mail.gmail.com>
Message-ID: <E4AB3DD44D22854B819908379DE4AD493DE2756C@SETHNWS023.carmenta.se>

A problem with using HARN/HPGN is that the grid files overlap each other,
but they don't agree with each other in the common areas. I don't know what
the best practice is, but this and similar problems are discussed here:

http://trac.osgeo.org/csmap/wiki/CsMapRfc7

Best regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com<http://www.carmenta.com/>

________________________________
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Richard Greenwood
Sent: Wednesday, March 18, 2015 3:18 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] why doesn't the epsg file reference the hpgn grids?

 be used.
On Tue, Mar 17, 2015 at 9:32 PM, Hermann Peifer <peifer at gmx.eu<mailto:peifer at gmx.eu>> wrote:

I did anyway some time ago was to add my own lookup table as
local/share/proj/hermann in order to gain control over my own
transformations.

Now I can use: +init=hermann:4314, which resolves to my transformation
parameters (+proj=longlat +ellps=bessel +nadgrids=BETA2007.gsb), whereas
epsg:4314 translates to: +proj=longlat +datum=potsdam +no_defs

Hermann, thank you for the suggestion. I'm doing the same thing (creating my own lookup file) which of course works fine for me, but doesn't help anyone else. I believe that there are about 600 coordinate systems in the Proj4 epsg file that say "HARN" but do actually reference the HARN grid shift files, nor give the user any obvious clues that these grid files are available and could, and should, be used.
Thanks,
Rich


--
Richard W. Greenwood, PLS
www.greenwoodmap.com<http://www.greenwoodmap.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150318/2d887597/attachment.html>

From peifer at gmx.eu  Wed Mar 18 12:39:27 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed, 18 Mar 2015 20:39:27 +0100
Subject: [Proj] why doesn't the epsg file reference the hpgn grids?
In-Reply-To: <CAHBySPbEd9R5uDOFBDs_=J7ZyiOgmPbAe_1r9A-Yem1GDuezdQ@mail.gmail.com>
References: <CAHBySPa1O6JgRx8YWyjP7V3ac1-mdzW6VQE1YLCxFJEvsK=Vug@mail.gmail.com>	<mearjs$gme$1@ger.gmane.org>
	<CAHBySPbEd9R5uDOFBDs_=J7ZyiOgmPbAe_1r9A-Yem1GDuezdQ@mail.gmail.com>
Message-ID: <5509D46F.7070502@gmx.eu>

On 2015-03-18 15:17, Richard Greenwood wrote:
>   be used.
> On Tue, Mar 17, 2015 at 9:32 PM, Hermann Peifer <peifer at gmx.eu
> <mailto:peifer at gmx.eu>> wrote:
>
>
>     I did anyway some time ago was to add my own lookup table as
>     local/share/proj/hermann in order to gain control over my own
>     transformations.
>
>     Now I can use: +init=hermann:4314, which resolves to my transformation
>     parameters (+proj=longlat +ellps=bessel +nadgrids=BETA2007.gsb), whereas
>     epsg:4314 translates to: +proj=longlat +datum=potsdam +no_defs
>
>
> Hermann, thank you for the suggestion. I'm doing the same thing
> (creating my own lookup file) which of course works fine for me, but
> doesn't help anyone else. I believe that there are about 600 coordinate
> systems in the Proj4 epsg file that say "HARN" but do actually reference
> the HARN grid shift files, nor give the user any obvious clues that
> these grid files are available and could, and should, be used.
>

[1] has source_crs_code and target_crs_code, plus the 
coord_op_method_code. I get some 80+ results when looking for 
coord_op_method_code = 9615 = NTv2. There might be other hints in other 
csv files.

Another example, directly from EPSG database: [2]. Obviously, there are 
other grid shift file formats, which I however don't use, as the NTv2 
format is nowadays quite popular, here in Europe.

Hermann

[1] 
http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/coordinate_operation.csv 


[2] 
http://epsg-registry.org/export.htm?wkt=urn:ogc:def:coordinateOperation:EPSG::5338


From peifer at gmx.eu  Wed Mar 18 12:39:27 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed, 18 Mar 2015 20:39:27 +0100
Subject: [Proj] why doesn't the epsg file reference the hpgn grids?
In-Reply-To: <CAHBySPbEd9R5uDOFBDs_=J7ZyiOgmPbAe_1r9A-Yem1GDuezdQ@mail.gmail.com>
References: <CAHBySPa1O6JgRx8YWyjP7V3ac1-mdzW6VQE1YLCxFJEvsK=Vug@mail.gmail.com>	<mearjs$gme$1@ger.gmane.org>
	<CAHBySPbEd9R5uDOFBDs_=J7ZyiOgmPbAe_1r9A-Yem1GDuezdQ@mail.gmail.com>
Message-ID: <5509D46F.7070502@gmx.eu>

On 2015-03-18 15:17, Richard Greenwood wrote:
>   be used.
> On Tue, Mar 17, 2015 at 9:32 PM, Hermann Peifer <peifer at gmx.eu
> <mailto:peifer at gmx.eu>> wrote:
>
>
>     I did anyway some time ago was to add my own lookup table as
>     local/share/proj/hermann in order to gain control over my own
>     transformations.
>
>     Now I can use: +init=hermann:4314, which resolves to my transformation
>     parameters (+proj=longlat +ellps=bessel +nadgrids=BETA2007.gsb), whereas
>     epsg:4314 translates to: +proj=longlat +datum=potsdam +no_defs
>
>
> Hermann, thank you for the suggestion. I'm doing the same thing
> (creating my own lookup file) which of course works fine for me, but
> doesn't help anyone else. I believe that there are about 600 coordinate
> systems in the Proj4 epsg file that say "HARN" but do actually reference
> the HARN grid shift files, nor give the user any obvious clues that
> these grid files are available and could, and should, be used.
>

[1] has source_crs_code and target_crs_code, plus the 
coord_op_method_code. I get some 80+ results when looking for 
coord_op_method_code = 9615 = NTv2. There might be other hints in other 
csv files.

Another example, directly from EPSG database: [2]. Obviously, there are 
other grid shift file formats, which I however don't use, as the NTv2 
format is nowadays quite popular, here in Europe.

Hermann

[1] 
http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/coordinate_operation.csv 


[2] 
http://epsg-registry.org/export.htm?wkt=urn:ogc:def:coordinateOperation:EPSG::5338



From andre+joost at nurfuerspam.de  Wed Mar 18 10:36:05 2015
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Wed, 18 Mar 2015 18:36:05 +0100
Subject: [Proj] why doesn't the epsg file reference the hpgn grids?
In-Reply-To: <55090181.1060901@gmx.eu>
References: <CAHBySPa1O6JgRx8YWyjP7V3ac1-mdzW6VQE1YLCxFJEvsK=Vug@mail.gmail.com>	<mearjs$gme$1@ger.gmane.org>
	<1426650819.5508f6c3dea5f@imp.free.fr> <55090181.1060901@gmx.eu>
Message-ID: <meclet$806$1@ger.gmane.org>

Am 18.03.2015 um 05:39 schrieb Hermann Peifer:

>
> I also did not mention that the meaning of e.g. +datum=potsdam changed
> over the few years I have been using PROJ. The potsdam datum seems to be
> hard-wired into pj_datums.c.
>
> $ grep potsdam pj_datums.c
> "potsdam",  "towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7", ...
>
> I assume that earlier changes to pj_datums.c were yet another downstream
> processing step. I can only assume, as this isn't mentioned in the
> indicated README.


The change of the potsdam datum was a follow-up of this openstreetmap 
forum topic: http://forum.openstreetmap.org/viewtopic.php?id=12723

Since high-resolution aerial image was georeferenced with a better 
transformation than the 3-parms used before, there was a need to adjust 
the proj.4 datum definition.

BTW: In the same file you find the only predefined usage of datum shift 
grids, NADCON/CONUS for the US and ntv2 for Canada.



From gdt at ir.bbn.com  Thu Mar 19 08:55:56 2015
From: gdt at ir.bbn.com (Greg Troxel)
Date: Thu, 19 Mar 2015 11:55:56 -0400
Subject: [Proj] Migrate to github?
In-Reply-To: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co> (Howard Butler's
	message of "Fri, 13 Mar 2015 13:27:51 -0500")
References: <8622EA3B-FD34-47AE-87A6-3510A842878D@hobu.co>
Message-ID: <rmih9th2d83.fsf@fnord.ir.bbn.com>


I know you said you'd keep release tarballs on osgeo.org, but I wanted
to point out what having releases on github tends to do.  I don't mean
to pick on jswhit; this sort of not following naming conventions is very
common with github.

https://github.com/jswhit/pyproj/issues/7
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 180 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150319/bb604115/attachment.sig>

From paul.chavent at fnac.net  Mon Mar 23 15:14:26 2015
From: paul.chavent at fnac.net (Paul Chavent)
Date: Mon, 23 Mar 2015 23:14:26 +0100
Subject: [Proj] How to offset height above ellipsoid.
Message-ID: <55109042.2060101@fnac.net>

Hi.

I try to convert lat/long coordinates to eqc. The origin of the eqc projection plane is at (43.315959 1.402896 320.000). My eqc specification take into account the altitude of the projection plane, so the plane should be tangeant to a sphere with a radius of 6368437.553703493.

The specification of the translation is then :

+proj=longlat +datum=WGS84 +no_defs +to +proj=eqc +a=6368437.553703493 +lat_ts=43.315959 +lat_0=43.315959 +lon_0=1.402896 +no_defs

At this point, if i give an altitude in the LLA input, it isn't translated since no datum have been specified for my destination projection.

For datum conversion, +towgs84 and +nadgrids seems to be the preferred choice for horizontal datum shifting, although +geoidgrid seems the preferred way for vertical datum shift.

In order to add a constant offset to the LLA altitude, i could provide a "gtx" file with only one value for the whole lat/long space.

I wonder if it is a good practice, or if there is other way of doing it ?

Wouldn't be possible to specify the offset on the description string for such a simple case (that also would be easier in the case of the usage of the c API with frequent altitude offset changes) ?

The expected result is

cs2cs -rs \
     +proj=longlat \
     +datum=WGS84 \
     +no_defs \
     +to \
     +proj=eqc \
     +a=6368437.553703493 \
     +lat_ts=43.3159590 \
     +lat_0=43.3159590 \
     +lon_0=1.4028960 \
     +no_defs \
      <<EOF
43.3159590  1.4028960  320
43.3155991  1.4024014  340
43.3155991  1.4033906  360
43.3163189  1.4033906  380
43.3163189  1.4024014  300
EOF
    0     0   0
  -40   -40   20
  -40    40   40
   40    40   60
   40   -40  -20


Thanks for your help.

Regards.

Paul.


From peifer at gmx.eu  Mon Mar 23 18:56:52 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Tue, 24 Mar 2015 02:56:52 +0100
Subject: [Proj] How to offset height above ellipsoid.
In-Reply-To: <55109042.2060101@fnac.net>
References: <55109042.2060101@fnac.net>
Message-ID: <meqg95$bld$1@ger.gmane.org>

Hi Paul,

As a confessing non-programmer, I can't answer your C API related 
question, but I do have some hints below, as you mentioned cs2cs and a 
"gtx" file with only one value.

The horizontal null shift has 3 x 3 zero values. I tried to be smart the 
other day and gdal_translated it into a 3 x 3 null.gtx file, which cs2cs 
did not like (as far as I understand it), throwing a weird error 
message. The same error occurred for my 4 x 4 and 5 x 5 null.gtx file 
(which were technically OK, according to their hexdump). Eventually, I 
went for the 7 x 7 option, see [0] and [1] below.

Hermann

P.S. and by the way:
If some "inline" solution for a 0-shift (horizontal, or vertical) would 
make sense (which I obviously can't tell): it should have been invented, 
say: 10 years ago, in order to avoid the FAQ: what does the '@' mean, in 
+nadgrids=@null ?


[0] "gta" representation of my null.gtx
-90 -180 30 60 7 7
0
0
0
(46 more zeros here...)

[1] One can simply do: gdal_translate -of gtx null.asc null.gtx
$ cat null.asc
ncols        7
nrows        7
xllcorner    -210.000000000000
yllcorner    -105.000000000000
dx           60.000000000000
dy           30.000000000000
NODATA_value  -88.88880157470703125
  0 0 0 0 0 0 0
  0 0 0 0 0 0 0
  0 0 0 0 0 0 0
  0 0 0 0 0 0 0
  0 0 0 0 0 0 0
  0 0 0 0 0 0 0
  0 0 0 0 0 0 0



On 2015-03-23 23:14, Paul Chavent wrote:
> Hi.
>
> I try to convert lat/long coordinates to eqc. The origin of the eqc projection plane is at (43.315959 1.402896 320.000). My eqc specification take into account the altitude of the projection plane, so the plane should be tangeant to a sphere with a radius of 6368437.553703493.
>
> The specification of the translation is then :
>
> +proj=longlat +datum=WGS84 +no_defs +to +proj=eqc +a=6368437.553703493 +lat_ts=43.315959 +lat_0=43.315959 +lon_0=1.402896 +no_defs
>
> At this point, if i give an altitude in the LLA input, it isn't translated since no datum have been specified for my destination projection.
>
> For datum conversion, +towgs84 and +nadgrids seems to be the preferred choice for horizontal datum shifting, although +geoidgrid seems the preferred way for vertical datum shift.
>
> In order to add a constant offset to the LLA altitude, i could provide a "gtx" file with only one value for the whole lat/long space.
>
> I wonder if it is a good practice, or if there is other way of doing it ?
>
> Wouldn't be possible to specify the offset on the description string for such a simple case (that also would be easier in the case of the usage of the c API with frequent altitude offset changes) ?
>
> The expected result is
>
> cs2cs -rs \
>       +proj=longlat \
>       +datum=WGS84 \
>       +no_defs \
>       +to \
>       +proj=eqc \
>       +a=6368437.553703493 \
>       +lat_ts=43.3159590 \
>       +lat_0=43.3159590 \
>       +lon_0=1.4028960 \
>       +no_defs \
>        <<EOF
> 43.3159590  1.4028960  320
> 43.3155991  1.4024014  340
> 43.3155991  1.4033906  360
> 43.3163189  1.4033906  380
> 43.3163189  1.4024014  300
> EOF
>      0     0   0
>    -40   -40   20
>    -40    40   40
>     40    40   60
>     40   -40  -20
>
>
> Thanks for your help.
>
> Regards.
>
> Paul.
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>




From paul.chavent at fnac.net  Fri Mar 27 05:41:30 2015
From: paul.chavent at fnac.net (paul.chavent at fnac.net)
Date: Fri, 27 Mar 2015 13:41:30 +0100 (CET)
Subject: [Proj] Fix reading failure of small GTX file.
Message-ID: <9799397.1097784.1427460090737.JavaMail.www@wsfrf1120>

Hi.

As discussed in this thread (http://osgeo-org.1560.x6.nabble.com/How-to-offset-height-above-ellipsoid-td5195058.html), some GTX files fail to load as geoidgrids.

Indeed, as the smallest possible GTX file is compound of one tile (4 points), the resulting binary file may be smaller than the size of the header read by pj_gridinfo_init (160 bytes).

I've submitted a merge request on github (https://github.com/OSGeo/proj.4/pull/1) that should solve this issue Comments are welcome.

Regards.

Paul.



From paul.chavent at fnac.net  Fri Mar 27 07:52:38 2015
From: paul.chavent at fnac.net (paul.chavent at fnac.net)
Date: Fri, 27 Mar 2015 15:52:38 +0100 (CET)
Subject: [Proj] Add a "nofile" grid type.
Message-ID: <29198383.1115224.1427467958923.JavaMail.www@wsfrf1120>

Hi.

Following this thread (http://osgeo-org.1560.x6.nabble.com/How-to-offset-height-above-ellipsoid-td5195058.html ), i suggest an improvement for being able to specify a constant vertical shift with the geoidgrids parameter.

I've created a new ticket here http://trac.osgeo.org/proj/ticket/270 with patch and more description.

Regards.

Paul.


From paul.chavent at fnac.net  Fri Mar 27 08:04:44 2015
From: paul.chavent at fnac.net (paul.chavent at fnac.net)
Date: Fri, 27 Mar 2015 16:04:44 +0100 (CET)
Subject: [Proj] Use the GTX null value for vertical shift exclusion.
Message-ID: <16210181.1116834.1427468684596.JavaMail.www@wsfrf1120>

Hi.

Vertical grid shift values specified with GTX files are  rejected outside of the [-1000;1000] range. I don't know if it is the  expected behavior since the GTX files allow any values excepted the null  value.

I've opened a ticket (http://trac.osgeo.org/proj/ticket/271) to address this issue. I've submitted a patch that use the 88.88880 null value for rejecting bad values.

Perhaps a better fix would be to add a null_value (or range) field to the CTABLE and check against this value (or range).

Regards.

Paul.


From paul.chavent at fnac.net  Fri Mar 27 08:06:47 2015
From: paul.chavent at fnac.net (paul.chavent at fnac.net)
Date: Fri, 27 Mar 2015 16:06:47 +0100 (CET)
Subject: [Proj] [proj.4] Fix reading failure of small GTX file. (#1)
In-Reply-To: <OSGeo/proj.4/pull/1@github.com>
References: <OSGeo/proj.4/pull/1@github.com>
Message-ID: <28212455.1117165.1427468807640.JavaMail.www@wsfrf1120>

See http://trac.osgeo.org/proj/ticket/269

========================================

Message du : 27/03/2015 14:34
De : "Howard Butler " <notifications at github.com>
A : "OSGeo/proj.4" <proj.4 at noreply.github.com>
Copie à : paul.chavent at fnac.net
Sujet : Re: [proj.4] Fix reading failure of small GTX file. (#1)


@polch Unfortunately, this repository isn't quite ready yet. It is part of a migration to github that is not yet complete. Can you please make this patch at http://trac.osgeo.org/proj to ensure it is not lost?

http://lists.maptools.org/pipermail/proj/2015-March/007078.html

---
Reply to this email directly or view it on GitHub:
https://github.com/OSGeo/proj.4/pull/1#issuecomment-86941017


