From charles.karney at sri.com  Wed Feb  4 08:06:44 2015
From: charles.karney at sri.com (Charles Karney)
Date: Wed, 4 Feb 2015 11:06:44 -0500
Subject: [Proj] Release Estimate?
In-Reply-To: <54935122.1030401@wwwtools.com>
References: <54935122.1030401@wwwtools.com>
Message-ID: <54D24394.8070406@sri.com>

I would like to know the answer to this too.  I don't like seeing an
important package slipping into orphan status.

   --Charles

On 2014-12-18 17:11, Frank Willett wrote:
> Anyone have a guess as to when the new release will come? I'm waiting to
> update projects which use proj.
>
> Frank Willett
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


From landa.martin at gmail.com  Wed Feb  4 08:26:14 2015
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 4 Feb 2015 17:26:14 +0100
Subject: [Proj] Release Estimate?
In-Reply-To: <54D24394.8070406@sri.com>
References: <54935122.1030401@wwwtools.com>
	<54D24394.8070406@sri.com>
Message-ID: <CA+Ei1Oc7DaHfB1RvJM-826gVX-k4NdTcN8BHii=VSv=_xriwVQ@mail.gmail.com>

Hi,

2015-02-04 17:06 GMT+01:00 Charles Karney <charles.karney at sri.com>:
> I would like to know the answer to this too.  I don't like seeing an
> important package slipping into orphan status.

+1 Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.eu/mentors/landa


From Mikael.Rittri at carmenta.com  Sun Feb  8 02:26:35 2015
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Sun, 8 Feb 2015 10:26:35 +0000
Subject: [Proj] Is it possible to store a WGS84 / Pseudo Mercator image as a
 GeoTIFF?
Message-ID: <DB657884-F30F-4553-B014-9384976F9DCF@carmenta.com>

And if it is possible, since when or what version of
GeoTIFF? And do most GeoTIFF readers support it?

(I apologize if this is the wrong mailing list for the questions.)

I am writing a report on Pseudo Mercator, and I realized
that I don't know how well it is supported in GeoTIFF.

Best regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com


From andre+joost at nurfuerspam.de  Sun Feb  8 04:46:08 2015
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Sun, 08 Feb 2015 13:46:08 +0100
Subject: [Proj] Is it possible to store a WGS84 / Pseudo Mercator image
 as a GeoTIFF?
In-Reply-To: <DB657884-F30F-4553-B014-9384976F9DCF@carmenta.com>
References: <DB657884-F30F-4553-B014-9384976F9DCF@carmenta.com>
Message-ID: <mb7lt4$v76$1@ger.gmane.org>

Hi Mikael,

You should probably ask "since when it is supported correctly?".

I remember that EPSG:900913 was rejected by EPSG and GIS professionals 
for a long time, until it was adopted as EPSG:3857.

And there were several complaints about misalignments of abot 20km to 
the North, due to the non-standard transformation Google had invented.

EPSG:3395 and EPSG:3785 were some steps on the right way.

As a reference, you can look for older versions of QGIS including GDAL 
and PROJ at http://qgis.org/downloads/ back to 2010.

http://www.gisinternals.com/archive.php dates back to GDAL 1.7.3

FWtools http://fwtools.maptools.org/ might still be older.

Greetings,
André Joost

Am 08.02.2015 um 11:26 schrieb Mikael Rittri:
> And if it is possible, since when or what version of
> GeoTIFF? And do most GeoTIFF readers support it?
>
> (I apologize if this is the wrong mailing list for the questions.)
>
> I am writing a report on Pseudo Mercator, and I realized
> that I don't know how well it is supported in GeoTIFF.
>
> Best regards,
>
> Mikael Rittri
> Carmenta
> Sweden
> http://www.carmenta.com
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>




From even.rouault at spatialys.com  Sun Feb  8 05:34:23 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 8 Feb 2015 14:34:23 +0100
Subject: [Proj] Is it possible to store a WGS84 / Pseudo Mercator image
	as a GeoTIFF?
In-Reply-To: <DB657884-F30F-4553-B014-9384976F9DCF@carmenta.com>
References: <DB657884-F30F-4553-B014-9384976F9DCF@carmenta.com>
Message-ID: <201502081434.23832.even.rouault@spatialys.com>

Le dimanche 08 février 2015 11:26:35, Mikael Rittri a écrit :
> And if it is possible, since when or what version of
> GeoTIFF? And do most GeoTIFF readers support it?
> 
> (I apologize if this is the wrong mailing list for the questions.)
> 
> I am writing a report on Pseudo Mercator, and I realized
> that I don't know how well it is supported in GeoTIFF.

Mikael,

Would rather be a question the GeoTIFF list indeed.

Regarding libgeotiff, 
http://trac.osgeo.org/geotiff/changeset/1685 brought support for decoding 
EPSG:3857 in the "normalization" code (GTIFGetDefn()) 5 years ago.

But even for software using libgeotiff, it pretty much depends if they can 
interpret what libgeotiff returns and how the encoder encoded EPSG:3857.

For example, GDAL, when passed an explicit EPSG code basically only writes the 
EPSG code in the ProjectedCSTypeGeoKey key:

For example, if I do "gdal_translate foo.tif foo_3857.tif -a_srs EPSG:3857"

And then "listgeo foo_3857.tif":

Geotiff_Information:
   Version: 1
   Key_Revision: 1.0
   Tagged_Information:
      ModelTiepointTag (2,3):
         0                 0                 0                
         440720            3751320           0                
      ModelPixelScaleTag (1,3):
         60                60                0                
      End_Of_Tags.
   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
      GTCitationGeoKey (Ascii,25): "WGS 84 / Pseudo-Mercator"
      GeogCitationGeoKey (Ascii,7): "WGS 84"
      GeogAngularUnitsGeoKey (Short,1): Angular_Degree
      ProjectedCSTypeGeoKey (Short,1): Unknown-3857
      ProjLinearUnitsGeoKey (Short,1): Linear_Meter
      End_Of_Keys.
   End_Of_Geotiff.

PCS = 3857 (WGS 84 / Pseudo-Mercator)
Projection = 3856 (Popular Visualisation Pseudo-Mercator)
Projection Method: CT_Mercator
   ProjNatOriginLatGeoKey: 0.000000 (  0d 0' 0.00"N)
   ProjNatOriginLongGeoKey: 0.000000 (  0d 0' 0.00"E)
   ProjScaleAtNatOriginGeoKey: 1.000000
   ProjFalseEastingGeoKey: 0.000000 m
   ProjFalseNorthingGeoKey: 0.000000 m
GCS: 4326/WGS 84
Datum: 6326/World Geodetic System 1984
Ellipsoid: 7030/WGS 84 (6378137.00,6356752.31)
Prime Meridian: 8901/Greenwich (0.000000/  0d 0' 0.00"E)
Projection Linear Units: 9001/metre (1.000000m)

All the decoding of projection method and parameters is done by 
geo_normalize.c from the EPSG dictionnaries.

And even with that, it is not sufficient as we must fix the ellipsoid decoding 
from WGS84 to the sphere for proj.4 correct operation. So the GeoTIFF reader 
in GDAL has for example this extra hack after GTIFGetDefn():
{{{
            if (psDefn->Projection == 1024 || psDefn->Projection == 9841) // 
override hack for google mercator. 
            {
                oSRS.SetExtension( "PROJCS", "PROJ4",  
                                   "+proj=merc +a=6378137 +b=6378137 
+lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  
+no_defs" ); 
            }
}}}


On the contrary, if I generate a GeoTIFF with the proj.4 string with:
gdal_translate foo.tif foo_pseudomercator.tif -a_srs "+proj=merc +a=6378137 
+b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m 
+nadgrids=@null +wktext  +no_defs"

listgeo foo_pseudomercator.tif gives:

Geotiff_Information:
   Version: 1
   Key_Revision: 1.0
   Tagged_Information:
      ModelTiepointTag (2,3):
         0                 0                 0                
         440720            3751320           0                
      ModelPixelScaleTag (1,3):
         60                60                0                
      End_Of_Tags.
   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
      GTCitationGeoKey (Ascii,8): "unnamed"
      GeographicTypeGeoKey (Short,1): User-Defined
      GeogCitationGeoKey (Ascii,83): "GCS Name = unnamed ellipse|Datum = 
unknown|Ellipsoid = unnamed|Primem = Greenwich|"
      GeogGeodeticDatumGeoKey (Short,1): User-Defined
      GeogAngularUnitsGeoKey (Short,1): Angular_Degree
      GeogEllipsoidGeoKey (Short,1): User-Defined
      GeogSemiMajorAxisGeoKey (Double,1): 6378137          
      GeogSemiMinorAxisGeoKey (Double,1): 6378137          
      GeogPrimeMeridianLongGeoKey (Double,1): 0                
      ProjectedCSTypeGeoKey (Short,1): User-Defined
      ProjectionGeoKey (Short,1): User-Defined
      ProjCoordTransGeoKey (Short,1): CT_Mercator
      ProjLinearUnitsGeoKey (Short,1): Linear_Meter
      ProjStdParallel1GeoKey (Double,1): 0                
      ProjNatOriginLongGeoKey (Double,1): 0                
      ProjNatOriginLatGeoKey (Double,1): 0                
      ProjFalseEastingGeoKey (Double,1): 0                
      ProjFalseNorthingGeoKey (Double,1): 0                
      End_Of_Keys.
   End_Of_Geotiff.

Projection Method: CT_Mercator
   ProjNatOriginLatGeoKey: 0.000000 (  0d 0' 0.00"N)
   ProjNatOriginLongGeoKey: 0.000000 (  0d 0' 0.00"E)
   ProjStdParallel1GeoKey: 0.000000 (  0d 0' 0.00"N)
   ProjFalseEastingGeoKey: 0.000000 m
   ProjFalseNorthingGeoKey: 0.000000 m
Projection Linear Units: 9001/metre (1.000000m)

On reading, GDAL will not really identify it as being PseudoMercator but the 
georeferencing seems to be OK.

Even



> 
> Best regards,
> 
> Mikael Rittri
> Carmenta
> Sweden
> http://www.carmenta.com
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com


From ndzinn at comcast.net  Sun Feb  8 05:35:11 2015
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Sun, 8 Feb 2015 07:35:11 -0600
Subject: [Proj] Is it possible to store a WGS84 / Pseudo Mercator image
	as a GeoTIFF?
In-Reply-To: <mb7lt4$v76$1@ger.gmane.org>
References: <DB657884-F30F-4553-B014-9384976F9DCF@carmenta.com>
	<mb7lt4$v76$1@ger.gmane.org>
Message-ID: <696FC6E7DD344635BA8310F092FB014A@NoelDellPC>

Andre,

"Adopted" connotes acceptance.  Perhaps "tolerated" is closer to the truth.

Mikael,

If you're not aware of "Implications of Web Mercator and Its Use in Online 
Mapping", by Battersby, Finn, Usery and Yamamoto (Cartographica 2014), 
here's a link:

http://www.researchgate.net/publication/265895464_Implications_of_Web_Mercator_and_Its_Use_in_Online_Mapping

And even "tolerated" connotes too much acceptance for the US National 
Geospatial-Intelligence Agency.  See link following:

http://earth-info.nga.mil/GandG/wgs84/web_mercator/

Noel

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)

-----Original Message----- 
From: Andre Joost
Sent: Sunday, February 08, 2015 6:46 AM
To: proj at lists.maptools.org
Subject: Re: [Proj] Is it possible to store a WGS84 / Pseudo Mercator image 
as a GeoTIFF?

Hi Mikael,

You should probably ask "since when it is supported correctly?".

I remember that EPSG:900913 was rejected by EPSG and GIS professionals
for a long time, until it was adopted as EPSG:3857.

And there were several complaints about misalignments of abot 20km to
the North, due to the non-standard transformation Google had invented.

EPSG:3395 and EPSG:3785 were some steps on the right way.

As a reference, you can look for older versions of QGIS including GDAL
and PROJ at http://qgis.org/downloads/ back to 2010.

http://www.gisinternals.com/archive.php dates back to GDAL 1.7.3

FWtools http://fwtools.maptools.org/ might still be older.

Greetings,
André Joost

Am 08.02.2015 um 11:26 schrieb Mikael Rittri:
> And if it is possible, since when or what version of
> GeoTIFF? And do most GeoTIFF readers support it?
>
> (I apologize if this is the wrong mailing list for the questions.)
>
> I am writing a report on Pseudo Mercator, and I realized
> that I don't know how well it is supported in GeoTIFF.
>
> Best regards,
>
> Mikael Rittri
> Carmenta
> Sweden
> http://www.carmenta.com
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj 



From Mikael.Rittri at carmenta.com  Sun Feb  8 07:42:21 2015
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Sun, 8 Feb 2015 15:42:21 +0000
Subject: [Proj] Is it possible to store a WGS84 / Pseudo Mercator
	image	as a GeoTIFF?
In-Reply-To: <696FC6E7DD344635BA8310F092FB014A@NoelDellPC>
References: <DB657884-F30F-4553-B014-9384976F9DCF@carmenta.com>
	<mb7lt4$v76$1@ger.gmane.org>,
	<696FC6E7DD344635BA8310F092FB014A@NoelDellPC>
Message-ID: <72957F01-2A2B-43C0-BE84-1F7F2565F493@carmenta.com>

Many thanks for the valuable information, both Noel and Even. 

Even: I will have to spend some time digesting your
detailed information about GeoTIFF. Unless I can just
summarize it in my report, by saying that the GeoTIFF
format supports Pseudo-Mercator in some sense, but there
is no explicit representation of the "Popular Visualisation
Pseudo Mercator" map projection method as a method
separate from the kosher Ellipsoid Mercator projection
method, so it is necessary that the EPSG code 3857 is
attached to the CRS definition. (That sentence was long!)
And that some GeoTIFF readers have problems anyway. 

Noel: I was aware of the NGA advisory notice (it is, in fact,
the reason why I have been asked to write my report). 
But I was completely unaware of the journal article you
mentioned. It would have been a pity if I had neglected it. 
Many thanks.
 
      Also, "tolerated" is okay, I can live with that. In fact,
it must be said that after the EPSG  committee decided to
to tolerate it, they are tolerating it with good grace, handling related
change requests and related new  requests almost as if they had
"adopted" it willingly. 
Maybe they are secretly gritting their teeth, of course. 

Best regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

8 feb 2015 kl. 14:35 skrev "Noel Zinn (cc)" <ndzinn at comcast.net>:

> Andre,
> 
> "Adopted" connotes acceptance.  Perhaps "tolerated" is closer to the truth.
> 
> Mikael,
> 
> If you're not aware of "Implications of Web Mercator and Its Use in Online 
> Mapping", by Battersby, Finn, Usery and Yamamoto (Cartographica 2014), 
> here's a link:
> 
> http://www.researchgate.net/publication/265895464_Implications_of_Web_Mercator_and_Its_Use_in_Online_Mapping
> 
> And even "tolerated" connotes too much acceptance for the US National 
> Geospatial-Intelligence Agency.  See link following:
> 
> http://earth-info.nga.mil/GandG/wgs84/web_mercator/
> 
> Noel
> 
> Noel Zinn, Principal, Hydrometronics LLC
> +1-832-539-1472 (office), +1-281-221-0051 (cell)
> noel.zinn at hydrometronics.com (email)
> http://www.hydrometronics.com (website)
> 
> -----Original Message----- 
> From: Andre Joost
> Sent: Sunday, February 08, 2015 6:46 AM
> To: proj at lists.maptools.org
> Subject: Re: [Proj] Is it possible to store a WGS84 / Pseudo Mercator image 
> as a GeoTIFF?
> 
> Hi Mikael,
> 
> You should probably ask "since when it is supported correctly?".
> 
> I remember that EPSG:900913 was rejected by EPSG and GIS professionals
> for a long time, until it was adopted as EPSG:3857.
> 
> And there were several complaints about misalignments of abot 20km to
> the North, due to the non-standard transformation Google had invented.
> 
> EPSG:3395 and EPSG:3785 were some steps on the right way.
> 
> As a reference, you can look for older versions of QGIS including GDAL
> and PROJ at http://qgis.org/downloads/ back to 2010.
> 
> http://www.gisinternals.com/archive.php dates back to GDAL 1.7.3
> 
> FWtools http://fwtools.maptools.org/ might still be older.
> 
> Greetings,
> André Joost
> 
> Am 08.02.2015 um 11:26 schrieb Mikael Rittri:
>> And if it is possible, since when or what version of
>> GeoTIFF? And do most GeoTIFF readers support it?
>> 
>> (I apologize if this is the wrong mailing list for the questions.)
>> 
>> I am writing a report on Pseudo Mercator, and I realized
>> that I don't know how well it is supported in GeoTIFF.
>> 
>> Best regards,
>> 
>> Mikael Rittri
>> Carmenta
>> Sweden
>> http://www.carmenta.com
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>> 
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


From charles.karney at sri.com  Sun Feb  8 09:58:10 2015
From: charles.karney at sri.com (Charles Karney)
Date: Sun, 8 Feb 2015 12:58:10 -0500
Subject: [Proj] Is it possible to store a WGS84 / Pseudo Mercator image
 as a GeoTIFF?
In-Reply-To: <696FC6E7DD344635BA8310F092FB014A@NoelDellPC>
References: <DB657884-F30F-4553-B014-9384976F9DCF@carmenta.com>	<mb7lt4$v76$1@ger.gmane.org>
	<696FC6E7DD344635BA8310F092FB014A@NoelDellPC>
Message-ID: <54D7A3B2.4090309@sri.com>

On 02/08/2015 08:35 AM, Noel Zinn (cc) wrote:
> Andre,
>
> "Adopted" connotes acceptance.  Perhaps "tolerated" is closer to the truth.
>
> Mikael,
>
> If you're not aware of "Implications of Web Mercator and Its Use in Online
> Mapping", by Battersby, Finn, Usery and Yamamoto (Cartographica 2014),
> here's a link:
>
> http://www.researchgate.net/publication/265895464_Implications_of_Web_Mercator_and_Its_Use_in_Online_Mapping
>

I've given up on ResearchGate.  Here's the PDF version of the paper
courtesy of the USGS::

http://cegis.usgs.gov/projection/pdf/Battersby_Implications%20of%20Web%20Mecator%20and%20Its%20Use%20in%20Online%20Mapping.pdf


From richard.greenwood at gmail.com  Sun Feb  8 15:16:41 2015
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Sun, 8 Feb 2015 16:16:41 -0700
Subject: [Proj] Is it possible to store a WGS84 / Pseudo Mercator image
 as a GeoTIFF?
In-Reply-To: <54D7A3B2.4090309@sri.com>
References: <DB657884-F30F-4553-B014-9384976F9DCF@carmenta.com>
	<mb7lt4$v76$1@ger.gmane.org>
	<696FC6E7DD344635BA8310F092FB014A@NoelDellPC>
	<54D7A3B2.4090309@sri.com>
Message-ID: <CAHBySPbySUmrmXPVr8wiCyvR5YhK44j2d2GamtNW4x+0uu1Y7g@mail.gmail.com>

On Sun, Feb 8, 2015 at 10:58 AM, Charles Karney <charles.karney at sri.com>
wrote:

>
> I've given up on ResearchGate.  Here's the PDF version of the paper
> courtesy of the USGS::
>
>
> http://cegis.usgs.gov/projection/pdf/Battersby_Implications%20of%20Web%20Mecator%20and%20Its%20Use%20in%20Online%20Mapping.pdf
>


Thank you!

-- 
Richard W. Greenwood, PLS
www.greenwoodmap.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150208/89d24b52/attachment.html>

From acsantome at gmail.com  Wed Feb 11 09:07:59 2015
From: acsantome at gmail.com (Adri CS)
Date: Wed, 11 Feb 2015 18:07:59 +0100
Subject: [Proj] Differences in reprojection between using the cs2cs app and
	using the api
Message-ID: <CAF2KE_=zn=p8G-vWLRXGvU=0Gh5OYm8Qo1gxXW5BY1iR+YPtJQ@mail.gmail.com>

Hi,

I built Proj4 4.8.0 for Windows with MinGW. I'm trying to reproject some
WGS84 lat/long coordinates (degrees) from Brazil to UTM Sirgas 2000. The
UTM zone would be 23S.

**) Using the cs2cs app:

*cs2cs.exe -f %.6f +init=epsg:3273 +proj=latlong +to +init=epsg:31938
input.txt > output.txt*

**The input file would contain coords like this: -45.491596     -23.570147
769.750000

And the output would be: 449834.145105    7393276.784821 769.750000

/***********************************************/

**) Using the api (I omit the error checking):


*projPJ wgs = pj_init_plus("+init=epsg:32723 +proj=latlong");*

*projPJ sirgas = = pj_init_plus("+init=epsg:31983");*

*double lat = -45.491596;*



*double lon = -23.570147;double alt = 769.750000;*

*lat *= DEG_TO_RAD;*

*lon *= DEG_TO_RAD;*

*pj_transform(wgs, sirgas, 1, 1, &lon, &lat, &alt);*

This outputs: 449834.127632      7393276.821296       769.750000

In both cases, the left part of the returned UTM easting and northing
coordinates are the same, but the numbers after the decimal point are
different.

I'm only transforming the input lat/lon coordintates when using the api,
since if I transform them before calling cs2cs, it will output wron coords
(the easting will have 7 digits before the decimal points).

What's happening here? The only difference I can see it's the
transformation of the lat/lon coordinates from degrees to radians: I'm
multypling directly while in the cs2cs source, there's a call to the
*dmstor* function (which I can't call directly, it seems).

Thanks for your time & cheers!
Adri.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150211/a80c4ea6/attachment.html>

From peifer at gmx.eu  Wed Feb 11 11:00:43 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed, 11 Feb 2015 20:00:43 +0100
Subject: [Proj] Differences in reprojection between using the cs2cs app
 and using the api
In-Reply-To: <CAF2KE_=zn=p8G-vWLRXGvU=0Gh5OYm8Qo1gxXW5BY1iR+YPtJQ@mail.gmail.com>
References: <CAF2KE_=zn=p8G-vWLRXGvU=0Gh5OYm8Qo1gxXW5BY1iR+YPtJQ@mail.gmail.com>
Message-ID: <54DBA6DB.5060605@gmx.eu>


Hi,

I can only provide a few hints based on your examples below:

epsg:3273 is not the same as epsg:32723, neither are epsg:31938 and 
epsg:31983

These combinations do not make sense: +init=epsg:3273 +proj=latlong and 
init=epsg:32723 +proj=latlong

epsg:32723 resolves into: +proj=utm +zone=23 +south +datum=WGS84 
+units=m +no_defs. The projection cannot be latlong and utm at the same 
time. The same goes for latlong and lcc in the other case.

Luckily the software ignores some of the specified parameters. It would 
however be better to use this definition and see if it helps: 
+init=epsg:4326 +to +init=epsg:31983.

My results with Rel. 4.9.0, 13 September 2014
$ echo -45.491596 -23.570147 | cs2cs -f "%.6f" +init=epsg:4326 +to 
+init=epsg:31983
449834.145105	7393276.784821 0.000000

Hope this helps, Hermann

On 2015-02-11 18:07, Adri CS wrote:
> Hi,
>
> I built Proj4 4.8.0 for Windows with MinGW. I'm trying to reproject some
> WGS84 lat/long coordinates (degrees) from Brazil to UTM Sirgas 2000. The
> UTM zone would be 23S.
>
> **) Using the cs2cs app:
>
> /cs2cs.exe -f %.6f +init=epsg:3273 +proj=latlong +to +init=epsg:31938
> input.txt > output.txt/
>
> **The input file would contain coords like this: -45.491596
> -23.570147 769.750000
>
> And the output would be: 449834.145105    7393276.784821 769.750000
>
> /***********************************************/
>
> **) Using the api (I omit the error checking):
>
> /projPJ wgs = pj_init_plus("+init=epsg:32723 +proj=latlong");
> /
> /projPJ sirgas = = pj_init_plus("+init=epsg:31983");
> /
> /double lat = -45.491596;
> /
> /double lon = -23.570147;
> double alt = 769.750000;
>
> /
> /lat *= DEG_TO_RAD;
> /
> /lon *= DEG_TO_RAD;
> /
> /
> /
> /pj_transform(wgs, sirgas, 1, 1, &lon, &lat, &alt);/
>
> This outputs: 449834.127632      7393276.821296       769.750000
>
> In both cases, the left part of the returned UTM easting and northing
> coordinates are the same, but the numbers after the decimal point are
> different.
>
> I'm only transforming the input lat/lon coordintates when using the api,
> since if I transform them before calling cs2cs, it will output wron
> coords (the easting will have 7 digits before the decimal points).
>
> What's happening here? The only difference I can see it's the
> transformation of the lat/lon coordinates from degrees to radians: I'm
> multypling directly while in the cs2cs source, there's a call to the
> /dmstor/ function (which I can't call directly, it seems).
>
> Thanks for your time & cheers!
> Adri.
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



From jagoncal at gmail.com  Wed Feb 11 13:23:56 2015
From: jagoncal at gmail.com (=?UTF-8?Q?Jose_Gon=C3=A7alves?=)
Date: Wed, 11 Feb 2015 21:23:56 +0000
Subject: [Proj] Differences in reprojection between using the cs2cs app
 and using the api
In-Reply-To: <CAF2KE_=zn=p8G-vWLRXGvU=0Gh5OYm8Qo1gxXW5BY1iR+YPtJQ@mail.gmail.com>
References: <CAF2KE_=zn=p8G-vWLRXGvU=0Gh5OYm8Qo1gxXW5BY1iR+YPtJQ@mail.gmail.com>
Message-ID: <CALHLaOQ-nQepubf3zRO8E4gA_+_iUzSABRSCner0jDCqCRwqKA@mail.gmail.com>

Hi
The differences in the UTM coordinates are smaller than 5 cm. This agrees
with a rounding error in the 6th decimal place of the geographic
coordinates. Your geographic coordinates are presented with 6 decimal
places. If in some of the cases they are not actually rounded, the results
will be different.
Regards

José

2015-02-11 17:07 GMT+00:00 Adri CS <acsantome at gmail.com>:

> Hi,
>
> I built Proj4 4.8.0 for Windows with MinGW. I'm trying to reproject some
> WGS84 lat/long coordinates (degrees) from Brazil to UTM Sirgas 2000. The
> UTM zone would be 23S.
>
> **) Using the cs2cs app:
>
> *cs2cs.exe -f %.6f +init=epsg:3273 +proj=latlong +to +init=epsg:31938
> input.txt > output.txt*
>
> **The input file would contain coords like this: -45.491596     -23.570147
> 769.750000
>
> And the output would be: 449834.145105    7393276.784821 769.750000
>
> /***********************************************/
>
> **) Using the api (I omit the error checking):
>
>
> *projPJ wgs = pj_init_plus("+init=epsg:32723 +proj=latlong");*
>
> *projPJ sirgas = = pj_init_plus("+init=epsg:31983");*
>
> *double lat = -45.491596;*
>
>
>
> *double lon = -23.570147;double alt = 769.750000;*
>
> *lat *= DEG_TO_RAD;*
>
> *lon *= DEG_TO_RAD;*
>
> *pj_transform(wgs, sirgas, 1, 1, &lon, &lat, &alt);*
>
> This outputs: 449834.127632      7393276.821296       769.750000
>
> In both cases, the left part of the returned UTM easting and northing
> coordinates are the same, but the numbers after the decimal point are
> different.
>
> I'm only transforming the input lat/lon coordintates when using the api,
> since if I transform them before calling cs2cs, it will output wron coords
> (the easting will have 7 digits before the decimal points).
>
> What's happening here? The only difference I can see it's the
> transformation of the lat/lon coordinates from degrees to radians: I'm
> multypling directly while in the cs2cs source, there's a call to the
> *dmstor* function (which I can't call directly, it seems).
>
> Thanks for your time & cheers!
> Adri.
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150211/0b3192a2/attachment.html>

From acsantome at gmail.com  Thu Feb 12 04:22:51 2015
From: acsantome at gmail.com (Adri CS)
Date: Thu, 12 Feb 2015 13:22:51 +0100
Subject: [Proj] Differences in reprojection between using the cs2cs app
 and using the api
Message-ID: <CAF2KE_mBcvSoOPxsh+nurp8Z3gDKfPm1h6UZJTh-TNs2WYZeUA@mail.gmail.com>

Hi!

You're right, Hermann. The codes are different because I made a mistake
when copy/pasting. The correct EPSG codes are the ones I use with the
api: *32723
*for the source and *31983* for the target.

The input coordinates are from the Rodovida dos Tamoios. which falls in the
UTM zone 23 S. Since they're in lat/long format, I just googled *"WGS84 utm
23s" *in Google and found THIS
<http://www.spatialreference.org/ref/epsg/wgs-84-utm-zone-23s/>.

I'm using *"+init=epsg:32723 +proj=latlong"* beacuse I thought this would
initialize the projPJ var with the SIRGAS 2000 system (ellipsoid and so.)
and then, with the *latlong* string, I would made the system aware that the
input coords will be in the lat/long form.

As you suggest, using *epsg:4326 *for the source system works fine. May I
ask you what has this code of special?

/********************************************************************/

José, so supposing that I got the projection systems right (see Hermann's
answer), should I expect this little differences due to rounding?

Thanks and cheers!
Adri.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150212/ea12ddc2/attachment.html>

From devrim at gunduz.org  Thu Feb 12 04:41:11 2015
From: devrim at gunduz.org (Devrim =?ISO-8859-1?Q?G=FCnd=FCz?=)
Date: Thu, 12 Feb 2015 14:41:11 +0200
Subject: [Proj] Release Estimate?
In-Reply-To: <54D24394.8070406@sri.com>
References: <54935122.1030401@wwwtools.com> <54D24394.8070406@sri.com>
Message-ID: <1423744871.20785.1.camel@gunduz.org>

Hi,

On Wed, 2015-02-04 at 11:06 -0500, Charles Karney wrote:
> I would like to know the answer to this too.  I don't like seeing an
> important package slipping into orphan status.

Is any of the developers following this list? I also want to learn the
release date.

Regards,
-- 
Devrim GÜNDÜZ
Principal Systems Engineer @ EnterpriseDB: http://www.enterprisedb.com
PostgreSQL Danışmanı/Consultant, Red Hat Certified Engineer
Twitter: @DevrimGunduz , @DevrimGunduzTR

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 819 bytes
Desc: This is a digitally signed message part
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150212/8e8ecbe0/attachment.sig>

From kyle at pobox.com  Thu Feb 12 08:06:29 2015
From: kyle at pobox.com (Kyle Shannon)
Date: Thu, 12 Feb 2015 09:06:29 -0700
Subject: [Proj] Fwd: PROJ.4 Maintainer
In-Reply-To: <54DCCA1D.7050200@pobox.com>
References: <54DCCA1D.7050200@pobox.com>
Message-ID: <54DCCF85.70100@pobox.com>




-------- Forwarded Message --------
Subject: PROJ.4 Maintainer
Date: Thu, 12 Feb 2015 08:43:25 -0700
From: Kyle Shannon <kyle at pobox.com>
To: metacrs at lists.osgeo.org

It seems proj has fallen through the cracks.  RC1 for 4.9.0 had a motion
to promote in October, and has little attention since.  I feel like proj
is kind of important for many packages.  Can someone review and promote?
  I would be willing to help if needed, if I can.

kss

-- 
Kyle




From peifer at gmx.eu  Thu Feb 12 10:23:39 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Thu, 12 Feb 2015 19:23:39 +0100
Subject: [Proj] Differences in reprojection between using the cs2cs app
 and using the api
In-Reply-To: <CAF2KE_mBcvSoOPxsh+nurp8Z3gDKfPm1h6UZJTh-TNs2WYZeUA@mail.gmail.com>
References: <CAF2KE_mBcvSoOPxsh+nurp8Z3gDKfPm1h6UZJTh-TNs2WYZeUA@mail.gmail.com>
Message-ID: <54DCEFAB.20207@gmx.eu>

Hi again,

In simple terms, EPSG:4326 is THE code for WGS84 lat/lon coordinates. It 
resolves to:

$ testepsg epsg:4326
...
PROJ.4 rendering of [epsg:4326] = +proj=longlat +datum=WGS84 +no_defs

In return, +datum=WGS84 is a shortcut for:

$ cs2cs -ld
__datum_id__ __ellipse___ __definition/comments__
    WGS84         WGS84        towgs84=0,0,0

I have no experience with using the API and no clue what (good) reasons 
would explain the observed differences.

Hermann



On 2015-02-12 13:22, Adri CS wrote:
> Hi!
>
> You're right, Hermann. The codes are different because I made a mistake
> when copy/pasting. The correct EPSG codes are the ones I use with the
> api: /32723 /for the source and /31983/ for the target.
>
> The input coordinates are from the Rodovida dos Tamoios. which falls in
> the UTM zone 23 S. Since they're in lat/long format, I just googled
> /"WGS84 utm 23s" /in Google and found THIS
> <http://www.spatialreference.org/ref/epsg/wgs-84-utm-zone-23s/>.
>
> I'm using /"+init=epsg:32723 +proj=latlong"/ beacuse I thought this
> would initialize the projPJ var with the SIRGAS 2000 system (ellipsoid
> and so.) and then, with the /latlong/ string, I would made the system
> aware that the input coords will be in the lat/long form.
>
> As you suggest, using /epsg:4326 /for the source system works fine. May
> I ask you what has this code of special?
>
> /********************************************************************/
>
> José, so supposing that I got the projection systems right (see
> Hermann's answer), should I expect this little differences due to rounding?
>
> Thanks and cheers!
> Adri.
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



From jagoncal at gmail.com  Thu Feb 12 15:46:43 2015
From: jagoncal at gmail.com (=?UTF-8?Q?Jose_Gon=C3=A7alves?=)
Date: Thu, 12 Feb 2015 23:46:43 +0000
Subject: [Proj] Differences in reprojection between using the cs2cs app
 and using the api
In-Reply-To: <CAF2KE_mBcvSoOPxsh+nurp8Z3gDKfPm1h6UZJTh-TNs2WYZeUA@mail.gmail.com>
References: <CAF2KE_mBcvSoOPxsh+nurp8Z3gDKfPm1h6UZJTh-TNs2WYZeUA@mail.gmail.com>
Message-ID: <CALHLaOS64oSeH=HQN2AMxaS0K7N2nLgK8ReNkShS4+6f1DuhoA@mail.gmail.com>

The correct UTM coordinates are the ones you obtain with CS2CS. I don't
see reasons for rounding, if you give lat long explicitly, as doubles. Have
you tried the source code with:

*projPJ wgs = pj_init_plus("+init=epsg:4326");*?





2015-02-12 12:22 GMT+00:00 Adri CS <acsantome at gmail.com>:

> Hi!
>
> You're right, Hermann. The codes are different because I made a mistake
> when copy/pasting. The correct EPSG codes are the ones I use with the api: *32723
> *for the source and *31983* for the target.
>
> The input coordinates are from the Rodovida dos Tamoios. which falls in
> the UTM zone 23 S. Since they're in lat/long format, I just googled *"WGS84
> utm 23s" *in Google and found THIS
> <http://www.spatialreference.org/ref/epsg/wgs-84-utm-zone-23s/>.
>
> I'm using *"+init=epsg:32723 +proj=latlong"* beacuse I thought this would
> initialize the projPJ var with the SIRGAS 2000 system (ellipsoid and so.)
> and then, with the *latlong* string, I would made the system aware that
> the input coords will be in the lat/long form.
>
> As you suggest, using *epsg:4326 *for the source system works fine. May I
> ask you what has this code of special?
>
> /********************************************************************/
>
> José, so supposing that I got the projection systems right (see Hermann's
> answer), should I expect this little differences due to rounding?
>
> Thanks and cheers!
> Adri.
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150212/58847375/attachment.html>

From acsantome at gmail.com  Fri Feb 13 03:46:24 2015
From: acsantome at gmail.com (Adri CS)
Date: Fri, 13 Feb 2015 12:46:24 +0100
Subject: [Proj] Differences in reprojection between using the cs2cs app
 and using the api
In-Reply-To: <CAF2KE_mBcvSoOPxsh+nurp8Z3gDKfPm1h6UZJTh-TNs2WYZeUA@mail.gmail.com>
References: <CAF2KE_mBcvSoOPxsh+nurp8Z3gDKfPm1h6UZJTh-TNs2WYZeUA@mail.gmail.com>
Message-ID: <CAF2KE_nu2kxDtoEAS=caxnt02cOf+=V+wWUX1SbEntFJxn6AmA@mail.gmail.com>

Hi again!

Hermann: thanks for your explanation.

José: yes. I tried with the *4326* epsg code using the api, but it stills
gives me a different result than using cs2cs. Using cs2cs with 4326, gives
a correct result, as expected.

Thanks and cheers!

On 12 February 2015 at 13:22, Adri CS <acsantome at gmail.com> wrote:

> Hi!
>
> You're right, Hermann. The codes are different because I made a mistake
> when copy/pasting. The correct EPSG codes are the ones I use with the api: *32723
> *for the source and *31983* for the target.
>
> The input coordinates are from the Rodovida dos Tamoios. which falls in
> the UTM zone 23 S. Since they're in lat/long format, I just googled *"WGS84
> utm 23s" *in Google and found THIS
> <http://www.spatialreference.org/ref/epsg/wgs-84-utm-zone-23s/>.
>
> I'm using *"+init=epsg:32723 +proj=latlong"* beacuse I thought this would
> initialize the projPJ var with the SIRGAS 2000 system (ellipsoid and so.)
> and then, with the *latlong* string, I would made the system aware that
> the input coords will be in the lat/long form.
>
> As you suggest, using *epsg:4326 *for the source system works fine. May I
> ask you what has this code of special?
>
> /********************************************************************/
>
> José, so supposing that I got the projection systems right (see Hermann's
> answer), should I expect this little differences due to rounding?
>
> Thanks and cheers!
> Adri.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150213/e2c5c73d/attachment.html>

From peifer at gmx.eu  Sun Feb 15 00:41:24 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Sun, 15 Feb 2015 09:41:24 +0100
Subject: [Proj] Differences in reprojection between using the cs2cs app
 and using the api
In-Reply-To: <CAF2KE_=zn=p8G-vWLRXGvU=0Gh5OYm8Qo1gxXW5BY1iR+YPtJQ@mail.gmail.com>
References: <CAF2KE_=zn=p8G-vWLRXGvU=0Gh5OYm8Qo1gxXW5BY1iR+YPtJQ@mail.gmail.com>
Message-ID: <54E05BB4.6020605@gmx.eu>

Adri,

Just to confirm that using the API doesn't make any difference, as 
expected. See mycode.c below, based on 
https://trac.osgeo.org/proj/wiki/ProjAPI

Your own sample code below has these coordinates:
 > /double lat = -45.491596;
 > /double lon = -23.570147;

This point falls into the South Atlantic Ocean, somewhere in the middle 
between Tierra del Fuego and Cape Town. So you'd have to swap lat/lon in 
order to get to the Rodovia dos Tamoios, (SP-099).

Hope this helps, Hermann

$ echo -45.491596 -23.570147 769.750000 | ./mycode
449834.145105	7393276.784821	769.75

$ cat mycode.c
#include <stdio.h>
#include <proj_api.h>

int main(int argc, char **argv) {

	projPJ wgs, sirgas;
	double lon, lat, alt;

	if (!(wgs = pj_init_plus("+init=epsg:4326")) )
		exit(1);

	if (!(sirgas = pj_init_plus("+init=epsg:31983")) )
		exit(1);

	while (scanf("%lf %lf %lf", &lon, &lat, &alt) == 3) {
		lon *= DEG_TO_RAD;
		lat *= DEG_TO_RAD;
		pj_transform(wgs, sirgas, 1, 1, &lon, &lat, &alt);
		printf("%.6f\t%.6f\t%.2f\n", lon, lat, alt);
	}
	exit(0);
}


On 2015-02-11 18:07, Adri CS wrote:
> Hi,
>
> I built Proj4 4.8.0 for Windows with MinGW. I'm trying to reproject some
> WGS84 lat/long coordinates (degrees) from Brazil to UTM Sirgas 2000. The
> UTM zone would be 23S.
>
> **) Using the cs2cs app:
>
> /cs2cs.exe -f %.6f +init=epsg:3273 +proj=latlong +to +init=epsg:31938
> input.txt > output.txt/
>
> **The input file would contain coords like this: -45.491596
> -23.570147 769.750000
>
> And the output would be: 449834.145105    7393276.784821 769.750000
>
> /***********************************************/
>
> **) Using the api (I omit the error checking):
>
> /projPJ wgs = pj_init_plus("+init=epsg:32723 +proj=latlong");
> /
> /projPJ sirgas = = pj_init_plus("+init=epsg:31983");
> /
> /double lat = -45.491596;
> /
> /double lon = -23.570147;
> double alt = 769.750000;
>
> /
> /lat *= DEG_TO_RAD;
> /
> /lon *= DEG_TO_RAD;
> /
> /
> /
> /pj_transform(wgs, sirgas, 1, 1, &lon, &lat, &alt);/
>
> This outputs: 449834.127632      7393276.821296       769.750000
>
> In both cases, the left part of the returned UTM easting and northing
> coordinates are the same, but the numbers after the decimal point are
> different.
>
> I'm only transforming the input lat/lon coordintates when using the api,
> since if I transform them before calling cs2cs, it will output wron
> coords (the easting will have 7 digits before the decimal points).
>
> What's happening here? The only difference I can see it's the
> transformation of the lat/lon coordinates from degrees to radians: I'm
> multypling directly while in the cs2cs source, there's a call to the
> /dmstor/ function (which I can't call directly, it seems).
>
> Thanks for your time & cheers!
> Adri.
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



From howard at hobu.co  Mon Feb 16 09:39:20 2015
From: howard at hobu.co (Howard Butler)
Date: Mon, 16 Feb 2015 11:39:20 -0600
Subject: [Proj] Release Estimate?
In-Reply-To: <1423744871.20785.1.camel@gunduz.org>
References: <54935122.1030401@wwwtools.com> <54D24394.8070406@sri.com>
	<1423744871.20785.1.camel@gunduz.org>
Message-ID: <D0995D7E-244C-4644-AB76-DED18146B3EC@hobu.co>


> On Feb 12, 2015, at 6:41 AM, Devrim Gündüz <devrim at gunduz.org> wrote:
> 
> Hi,
> 
> On Wed, 2015-02-04 at 11:06 -0500, Charles Karney wrote:
>> I would like to know the answer to this too.  I don't like seeing an
>> important package slipping into orphan status.
> 
> Is any of the developers following this list? I also want to learn the
> release date.

I can try to revive this one. I think the holdup has been that the release process has been done by Frank, and no one really feels comfortable rolling the release. At least that's the case for myself.

I will try to issue of a new RC by the end of this week. No new features, but if there are have-to-fix bugs that have cropped up since the issue of the last RC, please raise awareness of them.

Sorry this has dropped off the table...

Howard



From sebastic at xs4all.nl  Mon Feb 16 10:14:03 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Mon, 16 Feb 2015 19:14:03 +0100
Subject: [Proj] Release Estimate?
In-Reply-To: <D0995D7E-244C-4644-AB76-DED18146B3EC@hobu.co>
References: <54935122.1030401@wwwtools.com> <54D24394.8070406@sri.com>
	<1423744871.20785.1.camel@gunduz.org>
	<D0995D7E-244C-4644-AB76-DED18146B3EC@hobu.co>
Message-ID: <39515893d71bb90a122e54f65dfd9bf4.squirrel@webmail.xs4all.nl>

> I will try to issue of a new RC by the end of this week. No new features,
> but if there are have-to-fix bugs that have cropped up since the issue of
> the last RC, please raise awareness of them.

The test failures on several architectures are a bit worrisome, see:
http://trac.osgeo.org/proj/ticket/255

Kind Regards,

Bas



From Mikael.Rittri at carmenta.com  Mon Feb 16 10:25:35 2015
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 16 Feb 2015 18:25:35 +0000
Subject: [Proj] Release Estimate?
In-Reply-To: <D0995D7E-244C-4644-AB76-DED18146B3EC@hobu.co>
References: <54935122.1030401@wwwtools.com> <54D24394.8070406@sri.com>
	<1423744871.20785.1.camel@gunduz.org>,
	<D0995D7E-244C-4644-AB76-DED18146B3EC@hobu.co>
Message-ID: <89CC4922-A52C-417B-8195-4D55A6FE2DE4@carmenta.com>


16 feb 2015 kl. 18:39 skrev "Howard Butler" <howard at hobu.co>:

> 
>> On Feb 12, 2015, at 6:41 AM, Devrim Gündüz <devrim at gunduz.org> wrote:
>> 
>> Hi,
>> 
>> On Wed, 2015-02-04 at 11:06 -0500, Charles Karney wrote:
>>> I would like to know the answer to this too.  I don't like seeing an
>>> important package slipping into orphan status.
>> 
>> Is any of the developers following this list? I also want to learn the
>> release date.
> 
> I can try to revive this one. I think the holdup has been that the release process has been done by Frank, and no one really feels comfortable rolling the release. At least that's the case for myself.
> 
> I will try to issue of a new RC by the end of this week. No new features, but if there are have-to-fix bugs that have cropped up since the issue of the last RC, please raise awareness of them.
> 
> Sorry this has dropped off the table...
> 
> Howard

Well, I was a little sad to see that https://trac.osgeo.org/proj/ticket/177 has
been moved to 4.9.1, although it is marked as Fixed. 
But maybe there were problems with the test data. 

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

From howard at hobu.co  Mon Feb 16 11:33:14 2015
From: howard at hobu.co (Howard Butler)
Date: Mon, 16 Feb 2015 13:33:14 -0600
Subject: [Proj] Proj.4 4.9.1: was (Re: Release Estimate?)
In-Reply-To: <89CC4922-A52C-417B-8195-4D55A6FE2DE4@carmenta.com>
References: <54935122.1030401@wwwtools.com> <54D24394.8070406@sri.com>
	<1423744871.20785.1.camel@gunduz.org> <,
	> <D0995D7E-244C-4644-AB76-DED18146B3EC@hobu.co>
	<89CC4922-A52C-417B-8195-4D55A6FE2DE4@carmenta.com>
Message-ID: <E853FF3F-7993-4B1E-ADBF-FF4B6C97EE4C@hobu.co>


> On Feb 16, 2015, at 12:25 PM, Mikael Rittri <Mikael.Rittri at carmenta.com> wrote:
> 
> Well, I was a little sad to see that https://trac.osgeo.org/proj/ticket/177 has
> been moved to 4.9.1, although it is marked as Fixed. 
> But maybe there were problems with the test data. 

I would like to propose that we abandon 4.9.0 altogether and issue 4.9.1 RC1. There has been significant activity in the tree since the 4.9.0 RC2, there's confusion about the release status, there are a few big bugs that should be cleaned up, and the proj release cycle is so damn long that we should get stuff done while the iron is hot.

Howard

From knudsen.thomas at gmail.com  Mon Feb 16 12:29:43 2015
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Mon, 16 Feb 2015 21:29:43 +0100
Subject: [Proj] Proj.4 4.9.1: was (Re: Release Estimate?)
In-Reply-To: <E853FF3F-7993-4B1E-ADBF-FF4B6C97EE4C@hobu.co>
References: <54935122.1030401@wwwtools.com> <54D24394.8070406@sri.com>
	<1423744871.20785.1.camel@gunduz.org>
	<D0995D7E-244C-4644-AB76-DED18146B3EC@hobu.co>
	<89CC4922-A52C-417B-8195-4D55A6FE2DE4@carmenta.com>
	<E853FF3F-7993-4B1E-ADBF-FF4B6C97EE4C@hobu.co>
Message-ID: <CAH0YoEM_768mCvxMK8ub8QKg=VZ72QX3uuW_dUbuJ8HHTnDdXQ@mail.gmail.com>

+1

2015-02-16 20:33 GMT+01:00 Howard Butler <howard at hobu.co>:

>
> > On Feb 16, 2015, at 12:25 PM, Mikael Rittri <Mikael.Rittri at carmenta.com>
> wrote:
> >
> > Well, I was a little sad to see that
> https://trac.osgeo.org/proj/ticket/177 has
> > been moved to 4.9.1, although it is marked as Fixed.
> > But maybe there were problems with the test data.
>
> I would like to propose that we abandon 4.9.0 altogether and issue 4.9.1
> RC1. There has been significant activity in the tree since the 4.9.0 RC2,
> there's confusion about the release status, there are a few big bugs that
> should be cleaned up, and the proj release cycle is so damn long that we
> should get stuff done while the iron is hot.
>
> Howard
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150216/d257d027/attachment.html>

From acsantome at gmail.com  Wed Feb 18 01:22:45 2015
From: acsantome at gmail.com (Adri CS)
Date: Wed, 18 Feb 2015 10:22:45 +0100
Subject: [Proj] Differences in reprojection between using the cs2cs app
 and using the api
In-Reply-To: <CAF2KE_nZJXoDaid1iFgt_gpr_8331z73ipc6A138Kc2YgUidFA@mail.gmail.com>
References: <CAF2KE_=zn=p8G-vWLRXGvU=0Gh5OYm8Qo1gxXW5BY1iR+YPtJQ@mail.gmail.com>
	<54E05BB4.6020605@gmx.eu>
	<CAF2KE_nZJXoDaid1iFgt_gpr_8331z73ipc6A138Kc2YgUidFA@mail.gmail.com>
Message-ID: <CAF2KE_m4H51w9hSWPSoi4dMMCnMYH2MknNr3EYe8ByihsfTigg@mail.gmail.com>

Hello!!

Hermann code is fine. After a new review, I've found the cause of the
disparities between cs2cs and my code's output: I forgot to set the number
of decimals places in the output file.

Thank you all for your help! :)

On 16 February 2015 at 18:41, Adri CS <acsantome at gmail.com> wrote:

> Hi!
>
> Thanks for your time! Your code works fine! I'll check mine tomorrow
> morning and see where I messed up.
>
> Thanks a lot!
>
> On 15 February 2015 at 09:41, Hermann Peifer <peifer at gmx.eu> wrote:
>
>> Adri,
>>
>> Just to confirm that using the API doesn't make any difference, as
>> expected. See mycode.c below, based on https://trac.osgeo.org/proj/
>> wiki/ProjAPI
>>
>> Your own sample code below has these coordinates:
>> > /double lat = -45.491596;
>> > /double lon = -23.570147;
>>
>> This point falls into the South Atlantic Ocean, somewhere in the middle
>> between Tierra del Fuego and Cape Town. So you'd have to swap lat/lon in
>> order to get to the Rodovia dos Tamoios, (SP-099).
>>
>> Hope this helps, Hermann
>>
>> $ echo -45.491596 -23.570147 769.750000 | ./mycode
>> 449834.145105   7393276.784821  769.75
>>
>> $ cat mycode.c
>> #include <stdio.h>
>> #include <proj_api.h>
>>
>> int main(int argc, char **argv) {
>>
>>         projPJ wgs, sirgas;
>>         double lon, lat, alt;
>>
>>         if (!(wgs = pj_init_plus("+init=epsg:4326")) )
>>                 exit(1);
>>
>>         if (!(sirgas = pj_init_plus("+init=epsg:31983")) )
>>                 exit(1);
>>
>>         while (scanf("%lf %lf %lf", &lon, &lat, &alt) == 3) {
>>                 lon *= DEG_TO_RAD;
>>                 lat *= DEG_TO_RAD;
>>                 pj_transform(wgs, sirgas, 1, 1, &lon, &lat, &alt);
>>                 printf("%.6f\t%.6f\t%.2f\n", lon, lat, alt);
>>         }
>>         exit(0);
>> }
>>
>>
>> On 2015-02-11 18:07, Adri CS wrote:
>>
>>> Hi,
>>>
>>> I built Proj4 4.8.0 for Windows with MinGW. I'm trying to reproject some
>>> WGS84 lat/long coordinates (degrees) from Brazil to UTM Sirgas 2000. The
>>> UTM zone would be 23S.
>>>
>>> **) Using the cs2cs app:
>>>
>>> /cs2cs.exe -f %.6f +init=epsg:3273 +proj=latlong +to +init=epsg:31938
>>> input.txt > output.txt/
>>>
>>> **The input file would contain coords like this: -45.491596
>>> -23.570147 769.750000
>>>
>>> And the output would be: 449834.145105    7393276.784821 769.750000
>>>
>>> /***********************************************/
>>>
>>> **) Using the api (I omit the error checking):
>>>
>>> /projPJ wgs = pj_init_plus("+init=epsg:32723 +proj=latlong");
>>> /
>>> /projPJ sirgas = = pj_init_plus("+init=epsg:31983");
>>> /
>>> /double lat = -45.491596;
>>> /
>>> /double lon = -23.570147;
>>> double alt = 769.750000;
>>>
>>> /
>>> /lat *= DEG_TO_RAD;
>>> /
>>> /lon *= DEG_TO_RAD;
>>> /
>>> /
>>> /
>>> /pj_transform(wgs, sirgas, 1, 1, &lon, &lat, &alt);/
>>>
>>> This outputs: 449834.127632      7393276.821296       769.750000
>>>
>>> In both cases, the left part of the returned UTM easting and northing
>>> coordinates are the same, but the numbers after the decimal point are
>>> different.
>>>
>>> I'm only transforming the input lat/lon coordintates when using the api,
>>> since if I transform them before calling cs2cs, it will output wron
>>> coords (the easting will have 7 digits before the decimal points).
>>>
>>> What's happening here? The only difference I can see it's the
>>> transformation of the lat/lon coordinates from degrees to radians: I'm
>>> multypling directly while in the cs2cs source, there's a call to the
>>> /dmstor/ function (which I can't call directly, it seems).
>>>
>>> Thanks for your time & cheers!
>>> Adri.
>>>
>>>
>>> _______________________________________________
>>> Proj mailing list
>>> Proj at lists.maptools.org
>>> http://lists.maptools.org/mailman/listinfo/proj
>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150218/3e5f1f34/attachment.html>

From howard at hobu.co  Fri Feb 20 13:51:46 2015
From: howard at hobu.co (Howard Butler)
Date: Fri, 20 Feb 2015 15:51:46 -0600
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <E853FF3F-7993-4B1E-ADBF-FF4B6C97EE4C@hobu.co>
References: <54935122.1030401@wwwtools.com> <54D24394.8070406@sri.com>
	<1423744871.20785.1.camel@gunduz.org> <,
	> <D0995D7E-244C-4644-AB76-DED18146B3EC@hobu.co>
	<89CC4922-A52C-417B-8195-4D55A6FE2DE4@carmenta.com>
	<E853FF3F-7993-4B1E-ADBF-FF4B6C97EE4C@hobu.co>
Message-ID: <23F60E58-BCA6-4362-97F8-6591902E15DE@hobu.co>

All,

I have issued a 4.9.1RC1 which is now available for testing. Please test and report any issues via bug tracker or email. If there are no show-stoppers, I will motion to promote this release on Wednesday Feb 25th.

http://download.osgeo.org/proj/proj-4.9.1RC1.tar.gz

Howard

> 4.9.1 Release Notes
> -------------------
>  
>  o 4.9.0RC2 release was abandoned because it was not promoted in a 
>    timely fashion. Subsequent maintenance of tickets has continued, 
>    and a new 4.9.1 release was issued in its place.
> 
>  o Implement inverse solution for Winkel Tripel from Drazan Tutic #250
> 
>  o More CMake configuration tweaks. The CMake configuration is probably 
>    not at feature parity with the autotools builds at this point but it 
>    is converging #256
>  
>  o Tweak initialization ordering around setlocal which may have caused
>    issues #237
> 
>  o Support out-of-tree autoconf builds more completely #247
> 
>  o Fix NaN handling by geod_inverse and geod_polygon_addedge #251 & #253


From sebastic at xs4all.nl  Fri Feb 20 15:09:27 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Sat, 21 Feb 2015 00:09:27 +0100
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <23F60E58-BCA6-4362-97F8-6591902E15DE@hobu.co>
References: <54935122.1030401@wwwtools.com>
	<54D24394.8070406@sri.com>	<1423744871.20785.1.camel@gunduz.org> <,
	>
	<D0995D7E-244C-4644-AB76-DED18146B3EC@hobu.co>	<89CC4922-A52C-417B-8195-4D55A6FE2DE4@carmenta.com>	<E853FF3F-7993-4B1E-ADBF-FF4B6C97EE4C@hobu.co>
	<23F60E58-BCA6-4362-97F8-6591902E15DE@hobu.co>
Message-ID: <54E7BEA7.6080301@xs4all.nl>

On 02/20/2015 10:51 PM, Howard Butler wrote:
> I have issued a 4.9.1RC1 which is now available for testing.
> Please test and report any issues via bug tracker or email.

The only I've found with 4.9.1RC1 is the missing SOVERSION bump to
reflect the removed symbols in 4.9.0b2 (PJ_healpix.c).

Upstream Tracker also reports from missing symbols in 4.8.0, see:

http://upstream.rosalinux.ru/versions/libproj.html

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From charles.karney at sri.com  Fri Feb 20 15:16:23 2015
From: charles.karney at sri.com (Charles Karney)
Date: Fri, 20 Feb 2015 18:16:23 -0500
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <23F60E58-BCA6-4362-97F8-6591902E15DE@hobu.co>
References: <54935122.1030401@wwwtools.com>
	<54D24394.8070406@sri.com>	<1423744871.20785.1.camel@gunduz.org> <,
	>
	<D0995D7E-244C-4644-AB76-DED18146B3EC@hobu.co>	<89CC4922-A52C-417B-8195-4D55A6FE2DE4@carmenta.com>	<E853FF3F-7993-4B1E-ADBF-FF4B6C97EE4C@hobu.co>
	<23F60E58-BCA6-4362-97F8-6591902E15DE@hobu.co>
Message-ID: <54E7C047.4000605@sri.com>

On 2015-02-20 16:51, Howard Butler wrote:
> All,
>
> I have issued a 4.9.1RC1 which is now available for testing. Please test and report any issues via bug tracker or email. If there are no show-stoppers, I will motion to promote this release on Wednesday Feb 25th.
>
> http://download.osgeo.org/proj/proj-4.9.1RC1.tar.gz
>
> Howard

The following patch allows a reasonably clean (and error-free)
build of proj with cmake under Linux and Windows:

--- proj-4.9.1.orig/CMakeLists.txt	2015-02-20 16:20:35.000000000 -0500
+++ proj-4.9.1/CMakeLists.txt	2015-02-20 17:37:45.268811657 -0500
@@ -80,4 +80,4 @@
  message(STATUS "")
  add_subdirectory(nad)
  add_subdirectory(src)
-
+add_subdirectory(man)
--- proj-4.9.1.orig/src/bin_cs2cs.cmake	2015-02-20 16:20:34.000000000 -0500
+++ proj-4.9.1/src/bin_cs2cs.cmake	2015-02-20 18:01:30.248811545 -0500
@@ -9,6 +9,6 @@
  endif(WIN32)

  add_executable(cs2cs ${CS2CS_SRC} ${CS2CS_INCLUDE})
-target_link_libraries(cs2cs proj m)
+target_link_libraries(cs2cs ${PROJ_LIBRARIES})
  install(TARGETS cs2cs
          RUNTIME DESTINATION ${BINDIR})
--- proj-4.9.1.orig/src/bin_nad2bin.cmake	2015-02-20 16:20:34.000000000 
-0500
+++ proj-4.9.1/src/bin_nad2bin.cmake	2015-02-20 17:43:53.178818314 -0500
@@ -1,12 +1,12 @@
-if(WIN32 AND NOT BUILD_LIBPROJ_SHARED)
+if(WIN32 AND BUILD_LIBPROJ_SHARED)
      message(warning " nad2nad can't be build with a DLL proj4 library 
you need a static lib")
-endif(WIN32 AND NOT BUILD_LIBPROJ_SHARED)
+endif(WIN32 AND BUILD_LIBPROJ_SHARED)


  set(NAD2BIN_SRC nad2bin.c)
  source_group("Source Files\\Bin" FILES ${NAD2BIN_SRC})
  if(WIN32)
-    set(NAD2BIN_SRC ${NAD2BIN_SRC} ${NAD2BIN_SRC}/emess.c)
+    set(NAD2BIN_SRC ${NAD2BIN_SRC} emess.c)
  endif(WIN32)

  #Executable
--- proj-4.9.1.orig/src/lib_proj.cmake	2015-02-20 16:20:34.000000000 -0500
+++ proj-4.9.1/src/lib_proj.cmake	2015-02-20 17:33:29.718811747 -0500
@@ -204,7 +204,7 @@
          emess.h
          projects.h
          proj_api.h
-        proj_config.h
+        ${CMAKE_CURRENT_BINARY_DIR}/proj_config.h
   )

  # Group source files for IDE source explorers (e.g. Visual Studio)
@@ -259,7 +259,7 @@
    set_target_properties(${PROJ_CORE_TARGET}
      PROPERTIES
      OUTPUT_NAME "${PROJ_CORE_TARGET_OUTPUT_NAME}"
-    VERSION  ${ ${PROJECT_INTERN_NAME}_VERSION }
+    VERSION  ${${PROJECT_INTERN_NAME}_VERSION}
      CLEAN_DIRECT_OUTPUT 1)
  elseif(BUILD_FRAMEWORKS_AND_BUNDLE)
    set_target_properties(${PROJ_CORE_TARGET}
--- proj-4.9.1.orig/src/PJ_aitoff.c	2015-02-20 16:20:34.000000000 -0500
+++ proj-4.9.1/src/PJ_aitoff.c	2015-02-20 17:52:20.248811584 -0500
@@ -34,6 +34,13 @@
  #define PJ_LIB__
  #include <projects.h>

+#ifndef M_PI
+#  define M_PI 3.14159265358979323846
+#endif
+#ifndef M_PI_2
+#  define M_PI_2 1.57079632679489661923
+#endif
+
  PJ_CVSID("$Id: PJ_aitoff.c 2609 2015-02-17 17:05:09Z hobu $");

  PROJ_HEAD(aitoff, "Aitoff") "\n\tMisc Sph";
--- proj-4.9.1.orig/src/pj_gridinfo.c	2015-02-20 16:20:34.000000000 -0500
+++ proj-4.9.1/src/pj_gridinfo.c	2015-02-20 17:22:11.109773952 -0500
@@ -41,7 +41,7 @@
   * TODO - mloskot: re-implement porting friendly assert
   */
  # define assert(exp)	((void)0)
-#else/
+#else
  # include <assert.h>
  #endif /* _WIN32_WCE */

--- /dev/null	2015-01-06 08:23:25.496203464 -0500
+++ proj-4.9.1/cmake/policies.cmake	2015-02-20 17:21:03.343189445 -0500
@@ -0,0 +1,5 @@
+if (CMAKE_MAJOR_VERSION GREATER 2)
+    cmake_policy(SET CMP0022 OLD) # interface link libraries
+    cmake_policy(SET CMP0042 NEW) # osx rpath
+    cmake_policy(SET CMP0011 NEW) # policy setting
+endif()
--- /dev/null	2015-01-06 08:23:25.496203464 -0500
+++ proj-4.9.1/man/CMakeLists.txt	2015-02-20 17:38:37.968811676 -0500
@@ -0,0 +1,5 @@
+install (FILES man1/proj.1 man1/cs2cs.1 man1/geod.1
+  DESTINATION share/man/man1)
+
+install (FILES man3/pj_init.3 man3/geodesic.3
+  DESTINATION share/man/man3)


From neteler at osgeo.org  Fri Feb 20 15:24:27 2015
From: neteler at osgeo.org (Markus Neteler)
Date: Sat, 21 Feb 2015 00:24:27 +0100
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <23F60E58-BCA6-4362-97F8-6591902E15DE@hobu.co>
References: <54935122.1030401@wwwtools.com> <54D24394.8070406@sri.com>
	<1423744871.20785.1.camel@gunduz.org>
	<D0995D7E-244C-4644-AB76-DED18146B3EC@hobu.co>
	<89CC4922-A52C-417B-8195-4D55A6FE2DE4@carmenta.com>
	<E853FF3F-7993-4B1E-ADBF-FF4B6C97EE4C@hobu.co>
	<23F60E58-BCA6-4362-97F8-6591902E15DE@hobu.co>
Message-ID: <CALFmHhtMzLp6qr81KqWZvhzke8V7Rir3Zgj2X1_Wta2KGmssmQ@mail.gmail.com>

On Fri, Feb 20, 2015 at 10:51 PM, Howard Butler <howard at hobu.co> wrote:
> All,
>
> I have issued a 4.9.1RC1 which is now available for testing. Please test and report any issues via bug tracker or email. If there are no show-stoppers, I will motion to promote this release on Wednesday Feb 25th.
>
> http://download.osgeo.org/proj/proj-4.9.1RC1.tar.gz

Howard,

please consider to update the files

proj-4.9.1/config.guess
proj-4.9.1/config.sub

to more recent versions. It is as easy as that:

     wget http://git.savannah.gnu.org/cgit/config.git/plain/config.guess
     wget http://git.savannah.gnu.org/cgit/config.git/plain/config.sub

This will helps to support seamlessly more architectures (btw, we use
the same files in GRASS GIS).

thanks
Markus


From howard at hobu.co  Fri Feb 20 19:48:56 2015
From: howard at hobu.co (Howard Butler)
Date: Fri, 20 Feb 2015 21:48:56 -0600
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <CALFmHhtMzLp6qr81KqWZvhzke8V7Rir3Zgj2X1_Wta2KGmssmQ@mail.gmail.com>
References: <54935122.1030401@wwwtools.com> <54D24394.8070406@sri.com>
	<1423744871.20785.1.camel@gunduz.org>
	<D0995D7E-244C-4644-AB76-DED18146B3EC@hobu.co>
	<89CC4922-A52C-417B-8195-4D55A6FE2DE4@carmenta.com>
	<E853FF3F-7993-4B1E-ADBF-FF4B6C97EE4C@hobu.co>
	<23F60E58-BCA6-4362-97F8-6591902E15DE@hobu.co>
	<CALFmHhtMzLp6qr81KqWZvhzke8V7Rir3Zgj2X1_Wta2KGmssmQ@mail.gmail.com>
Message-ID: <B5E578BB-A293-4FBC-8EC2-9209938731ED@hobu.co>


> On Feb 20, 2015, at 5:24 PM, Markus Neteler <neteler at osgeo.org> wrote:
> 
> On Fri, Feb 20, 2015 at 10:51 PM, Howard Butler <howard at hobu.co> wrote:
>> All,
>> 
>> I have issued a 4.9.1RC1 which is now available for testing. Please test and report any issues via bug tracker or email. If there are no show-stoppers, I will motion to promote this release on Wednesday Feb 25th.
>> 
>> http://download.osgeo.org/proj/proj-4.9.1RC1.tar.gz
> 

As requested, I have issued one more RC, with the items from Markus, Sebastiaan, and Charles. Please report any findings or issues as before.

http://download.osgeo.org/proj/proj-4.9.1RC2.tar.gz

Thanks,

Howard



From even.rouault at spatialys.com  Sat Feb 21 03:06:53 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 21 Feb 2015 12:06:53 +0100
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <B5E578BB-A293-4FBC-8EC2-9209938731ED@hobu.co>
References: <54935122.1030401@wwwtools.com>
	<CALFmHhtMzLp6qr81KqWZvhzke8V7Rir3Zgj2X1_Wta2KGmssmQ@mail.gmail.com>
	<B5E578BB-A293-4FBC-8EC2-9209938731ED@hobu.co>
Message-ID: <201502211206.53343.even.rouault@spatialys.com>

Le samedi 21 février 2015 04:48:56, Howard Butler a écrit :
> > On Feb 20, 2015, at 5:24 PM, Markus Neteler <neteler at osgeo.org> wrote:
> > 
> > On Fri, Feb 20, 2015 at 10:51 PM, Howard Butler <howard at hobu.co> wrote:
> >> All,
> >> 
> >> I have issued a 4.9.1RC1 which is now available for testing. Please test
> >> and report any issues via bug tracker or email. If there are no
> >> show-stoppers, I will motion to promote this release on Wednesday Feb
> >> 25th.
> >> 
> >> http://download.osgeo.org/proj/proj-4.9.1RC1.tar.gz
> 
> As requested, I have issued one more RC, with the items from Markus,
> Sebastiaan, and Charles. Please report any findings or issues as before.
> 
> http://download.osgeo.org/proj/proj-4.9.1RC2.tar.gz

Howard,

I've fixed 2 issues in SVN:

* cmake builds failed because cmake/policies.cmake nor man/CMakeLists.txt were 
embedded in the .tar.gz when doing "make dist-all"

Fixed by r2617:"install missing CMake support files for dist-all target"

* autoconf build failed on "make install" when no .lla files were installed in 
the nad subdirectory.

Fixed by r2618 "fix install target when no .lla files are in nad subdirectory"

With those fixes, both build systems are happy and GDAL autotest run fine.

Note: I haven't pushed the files regenerated by autogen.sh in SVN

With CMake build, I noticed that proj cannot find automatically the grid files. 
You have to manaully define the PROJ_LIB environment variable to point to the 
$PREFIX/share/proj directory. autoconf builds have the following magic in 
src/Makefile.am that sets the PROJ_LIB macro to $(pkgdatadir) so that 
src/pj_open_lib.c has a default hardcoded path.

{{{
INCLUDES =      -DPROJ_LIB=\"$(pkgdatadir)\" \
                -DMUTEX_ at MUTEX_SETTING@ @JNI_INCLUDE@
}}}

Not sure how to do that with CMake...


Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com


From sebastic at xs4all.nl  Sat Feb 21 03:12:22 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Sat, 21 Feb 2015 12:12:22 +0100
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <201502211206.53343.even.rouault@spatialys.com>
References: <54935122.1030401@wwwtools.com>	<CALFmHhtMzLp6qr81KqWZvhzke8V7Rir3Zgj2X1_Wta2KGmssmQ@mail.gmail.com>	<B5E578BB-A293-4FBC-8EC2-9209938731ED@hobu.co>
	<201502211206.53343.even.rouault@spatialys.com>
Message-ID: <54E86816.6070508@xs4all.nl>

On 02/21/2015 12:06 PM, Even Rouault wrote:
> * autoconf build failed on "make install" when no .lla files were installed in 
> the nad subdirectory.
> 
> Fixed by r2618 "fix install target when no .lla files are in nad subdirectory"

See also the related issue:

https://trac.osgeo.org/proj/ticket/249

I'll refresh the patch again so proj-datumgrids 1.6RC1 can be used in
place of 1.5.

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From sebastic at xs4all.nl  Sat Feb 21 03:43:32 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Sat, 21 Feb 2015 12:43:32 +0100
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <B5E578BB-A293-4FBC-8EC2-9209938731ED@hobu.co>
References: <54935122.1030401@wwwtools.com>
	<54D24394.8070406@sri.com>	<1423744871.20785.1.camel@gunduz.org>	<D0995D7E-244C-4644-AB76-DED18146B3EC@hobu.co>	<89CC4922-A52C-417B-8195-4D55A6FE2DE4@carmenta.com>	<E853FF3F-7993-4B1E-ADBF-FF4B6C97EE4C@hobu.co>	<23F60E58-BCA6-4362-97F8-6591902E15DE@hobu.co>	<CALFmHhtMzLp6qr81KqWZvhzke8V7Rir3Zgj2X1_Wta2KGmssmQ@mail.gmail.com>
	<B5E578BB-A293-4FBC-8EC2-9209938731ED@hobu.co>
Message-ID: <54E86F64.4010606@xs4all.nl>

On 02/21/2015 04:48 AM, Howard Butler wrote:
> As requested, I have issued one more RC, with the items from Markus, Sebastiaan, and Charles. Please report any findings or issues as before.
> 
> http://download.osgeo.org/proj/proj-4.9.1RC2.tar.gz

My issues with 4.9.1RC2, ideally fixed in 4.9.1 final:

proj-datumgrids-1.6RC1 support:
https://trac.osgeo.org/proj/ticket/249

man page issues:
https://trac.osgeo.org/proj/ticket/259

higher precision for Amersfoort / RD:
https://trac.osgeo.org/proj/ticket/260

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From even.rouault at spatialys.com  Sat Feb 21 04:26:34 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 21 Feb 2015 13:26:34 +0100
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <54E86F64.4010606@xs4all.nl>
References: <54935122.1030401@wwwtools.com>
	<B5E578BB-A293-4FBC-8EC2-9209938731ED@hobu.co>
	<54E86F64.4010606@xs4all.nl>
Message-ID: <201502211326.34415.even.rouault@spatialys.com>

Le samedi 21 février 2015 12:43:32, Sebastiaan Couwenberg a écrit :
> On 02/21/2015 04:48 AM, Howard Butler wrote:
> > As requested, I have issued one more RC, with the items from Markus,
> > Sebastiaan, and Charles. Please report any findings or issues as before.
> > 
> > http://download.osgeo.org/proj/proj-4.9.1RC2.tar.gz
> 
> My issues with 4.9.1RC2, ideally fixed in 4.9.1 final:
> 
> proj-datumgrids-1.6RC1 support:
> https://trac.osgeo.org/proj/ticket/249

Applied

> 
> man page issues:
> https://trac.osgeo.org/proj/ticket/259

Applied

> 
> higher precision for Amersfoort / RD:
> https://trac.osgeo.org/proj/ticket/260

Not applied. See comment in ticket

> 
> Kind Regards,
> 
> Bas

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com


From charles.karney at sri.com  Sat Feb 21 05:18:22 2015
From: charles.karney at sri.com (Charles Karney)
Date: Sat, 21 Feb 2015 08:18:22 -0500
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <B5E578BB-A293-4FBC-8EC2-9209938731ED@hobu.co>
References: <54935122.1030401@wwwtools.com>
	<54D24394.8070406@sri.com>	<1423744871.20785.1.camel@gunduz.org>	<D0995D7E-244C-4644-AB76-DED18146B3EC@hobu.co>	<89CC4922-A52C-417B-8195-4D55A6FE2DE4@carmenta.com>	<E853FF3F-7993-4B1E-ADBF-FF4B6C97EE4C@hobu.co>	<23F60E58-BCA6-4362-97F8-6591902E15DE@hobu.co>	<CALFmHhtMzLp6qr81KqWZvhzke8V7Rir3Zgj2X1_Wta2KGmssmQ@mail.gmail.com>
	<B5E578BB-A293-4FBC-8EC2-9209938731ED@hobu.co>
Message-ID: <54E8859E.7030802@sri.com>

On 02/20/2015 10:48 PM, Howard Butler wrote:
> As requested, I have issued one more RC, with the items from Markus, Sebastiaan, and Charles. Please report any findings or issues as before.
>
> http://download.osgeo.org/proj/proj-4.9.1RC2.tar.gz
>
> Thanks,

Please apply the following patches to proj-4.9.1RC2 (in addition to
including man/CMakeLists.txt and cmake/policies.cmake as noted by Even).
These patches fix:

src/bin_nad2bin.cmake:
   backward test for nad2nad warning
   bad directory specified for emess.c

src/lib_proj.cmake:
   remove space from variable name to suppress policy warning

src/PJ_aitoff.c
   define M_PI and M_PI_2 (needed for Windows)

src/pj_gridinfo.c
   remove trailing / from preprocessor line

Here are the patches...

diff -ru proj-4.9.1RC2/src/bin_nad2bin.cmake 
proj-4.9.1RC2-patch/src/bin_nad2bin.cmake
--- proj-4.9.1RC2/src/bin_nad2bin.cmake	2015-02-20 16:20:34.000000000 -0500
+++ proj-4.9.1RC2-patch/src/bin_nad2bin.cmake	2015-02-21 
07:54:38.958834751 -0500
@@ -1,12 +1,12 @@
-if(WIN32 AND NOT BUILD_LIBPROJ_SHARED)
+if(WIN32 AND BUILD_LIBPROJ_SHARED)
      message(warning " nad2nad can't be build with a DLL proj4 library 
you need a static lib")
-endif(WIN32 AND NOT BUILD_LIBPROJ_SHARED)
+endif(WIN32 AND BUILD_LIBPROJ_SHARED)


  set(NAD2BIN_SRC nad2bin.c)
  source_group("Source Files\\Bin" FILES ${NAD2BIN_SRC})
  if(WIN32)
-    set(NAD2BIN_SRC ${NAD2BIN_SRC} ${NAD2BIN_SRC}/emess.c)
+    set(NAD2BIN_SRC ${NAD2BIN_SRC} emess.c)
  endif(WIN32)

  #Executable
diff -ru proj-4.9.1RC2/src/lib_proj.cmake 
proj-4.9.1RC2-patch/src/lib_proj.cmake
--- proj-4.9.1RC2/src/lib_proj.cmake	2015-02-20 22:46:19.000000000 -0500
+++ proj-4.9.1RC2-patch/src/lib_proj.cmake	2015-02-21 07:53:22.472682833 
-0500
@@ -259,7 +259,7 @@
    set_target_properties(${PROJ_CORE_TARGET}
      PROPERTIES
      OUTPUT_NAME "${PROJ_CORE_TARGET_OUTPUT_NAME}"
-    VERSION  ${${PROJECT_INTERN_NAME}_VERSION }
+    VERSION  ${${PROJECT_INTERN_NAME}_VERSION}
      CLEAN_DIRECT_OUTPUT 1)
  elseif(BUILD_FRAMEWORKS_AND_BUNDLE)
    set_target_properties(${PROJ_CORE_TARGET}
diff -ru proj-4.9.1RC2/src/PJ_aitoff.c proj-4.9.1RC2-patch/src/PJ_aitoff.c
--- proj-4.9.1RC2/src/PJ_aitoff.c	2015-02-20 16:20:34.000000000 -0500
+++ proj-4.9.1RC2-patch/src/PJ_aitoff.c	2015-02-21 07:57:51.465926362 -0500
@@ -34,6 +34,13 @@
  #define PJ_LIB__
  #include <projects.h>

+#ifndef M_PI
+#  define M_PI 3.14159265358979323846
+#endif
+#ifndef M_PI_2
+#  define M_PI_2 1.57079632679489661923
+#endif
+
  PJ_CVSID("$Id: PJ_aitoff.c 2609 2015-02-17 17:05:09Z hobu $");

  PROJ_HEAD(aitoff, "Aitoff") "\n\tMisc Sph";
diff -ru proj-4.9.1RC2/src/pj_gridinfo.c 
proj-4.9.1RC2-patch/src/pj_gridinfo.c
--- proj-4.9.1RC2/src/pj_gridinfo.c	2015-02-20 16:20:34.000000000 -0500
+++ proj-4.9.1RC2-patch/src/pj_gridinfo.c	2015-02-21 07:48:14.915962953 
-0500
@@ -41,7 +41,7 @@
   * TODO - mloskot: re-implement porting friendly assert
   */
  # define assert(exp)	((void)0)
-#else/
+#else
  # include <assert.h>
  #endif /* _WIN32_WCE */




From even.rouault at spatialys.com  Sat Feb 21 06:15:54 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 21 Feb 2015 15:15:54 +0100
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <54E8859E.7030802@sri.com>
References: <54935122.1030401@wwwtools.com>
	<B5E578BB-A293-4FBC-8EC2-9209938731ED@hobu.co>
	<54E8859E.7030802@sri.com>
Message-ID: <201502211515.54340.even.rouault@spatialys.com>

Le samedi 21 février 2015 14:18:22, Charles Karney a écrit :
> On 02/20/2015 10:48 PM, Howard Butler wrote:
> > As requested, I have issued one more RC, with the items from Markus,
> > Sebastiaan, and Charles. Please report any findings or issues as before.
> > 
> > http://download.osgeo.org/proj/proj-4.9.1RC2.tar.gz
> > 
> > Thanks,
> 
> Please apply the following patches to proj-4.9.1RC2 (in addition to
> including man/CMakeLists.txt and cmake/policies.cmake as noted by Even).
> These patches fix:

Applied. I had to manually apply since the patch got somehow corrupted in the email. An attachment would have been better.

I blindly trust you for the cmake windows part...


One thing I noticed is that the set of installed headers isn't the same between autoconf and cmake :

../../install-proj-4.9.1-cmake/include/emess.h  (should be internal only no ?)
../../install-proj-4.9.1-cmake/include/proj_api.h
../../install-proj-4.9.1-cmake/include/projects.h
../../install-proj-4.9.1-cmake/include/pj_list.h (should be internal only no ?)
../../install-proj-4.9.1-cmake/include/proj_config.h (should be internal only no ?)

../../install-proj-4.9.1-autoconf/include/proj_api.h
../../install-proj-4.9.1-autoconf/include/org_proj4_Projections.h  (missing in cmake ?)
../../install-proj-4.9.1-autoconf/include/projects.h
../../install-proj-4.9.1-autoconf/include/geodesic.h  (missing in cmake ?)
../../install-proj-4.9.1-autoconf/include/org_proj4_PJ.h  (missing in cmake ?)


> 
> src/bin_nad2bin.cmake:
>    backward test for nad2nad warning
>    bad directory specified for emess.c
> 
> src/lib_proj.cmake:
>    remove space from variable name to suppress policy warning
> 
> src/PJ_aitoff.c
>    define M_PI and M_PI_2 (needed for Windows)
> 
> src/pj_gridinfo.c
>    remove trailing / from preprocessor line
> 
> Here are the patches...
> 
> diff -ru proj-4.9.1RC2/src/bin_nad2bin.cmake
> proj-4.9.1RC2-patch/src/bin_nad2bin.cmake
> --- proj-4.9.1RC2/src/bin_nad2bin.cmake	2015-02-20 16:20:34.000000000 -0500
> +++ proj-4.9.1RC2-patch/src/bin_nad2bin.cmake	2015-02-21
> 07:54:38.958834751 -0500
> @@ -1,12 +1,12 @@
> -if(WIN32 AND NOT BUILD_LIBPROJ_SHARED)
> +if(WIN32 AND BUILD_LIBPROJ_SHARED)
>       message(warning " nad2nad can't be build with a DLL proj4 library
> you need a static lib")
> -endif(WIN32 AND NOT BUILD_LIBPROJ_SHARED)
> +endif(WIN32 AND BUILD_LIBPROJ_SHARED)
> 
> 
>   set(NAD2BIN_SRC nad2bin.c)
>   source_group("Source Files\\Bin" FILES ${NAD2BIN_SRC})
>   if(WIN32)
> -    set(NAD2BIN_SRC ${NAD2BIN_SRC} ${NAD2BIN_SRC}/emess.c)
> +    set(NAD2BIN_SRC ${NAD2BIN_SRC} emess.c)
>   endif(WIN32)
> 
>   #Executable
> diff -ru proj-4.9.1RC2/src/lib_proj.cmake
> proj-4.9.1RC2-patch/src/lib_proj.cmake
> --- proj-4.9.1RC2/src/lib_proj.cmake	2015-02-20 22:46:19.000000000 -0500
> +++ proj-4.9.1RC2-patch/src/lib_proj.cmake	2015-02-21 07:53:22.472682833
> -0500
> @@ -259,7 +259,7 @@
>     set_target_properties(${PROJ_CORE_TARGET}
>       PROPERTIES
>       OUTPUT_NAME "${PROJ_CORE_TARGET_OUTPUT_NAME}"
> -    VERSION  ${${PROJECT_INTERN_NAME}_VERSION }
> +    VERSION  ${${PROJECT_INTERN_NAME}_VERSION}
>       CLEAN_DIRECT_OUTPUT 1)
>   elseif(BUILD_FRAMEWORKS_AND_BUNDLE)
>     set_target_properties(${PROJ_CORE_TARGET}
> diff -ru proj-4.9.1RC2/src/PJ_aitoff.c proj-4.9.1RC2-patch/src/PJ_aitoff.c
> --- proj-4.9.1RC2/src/PJ_aitoff.c	2015-02-20 16:20:34.000000000 -0500
> +++ proj-4.9.1RC2-patch/src/PJ_aitoff.c	2015-02-21 07:57:51.465926362 -0500
> @@ -34,6 +34,13 @@
>   #define PJ_LIB__
>   #include <projects.h>
> 
> +#ifndef M_PI
> +#  define M_PI 3.14159265358979323846
> +#endif
> +#ifndef M_PI_2
> +#  define M_PI_2 1.57079632679489661923
> +#endif
> +
>   PJ_CVSID("$Id: PJ_aitoff.c 2609 2015-02-17 17:05:09Z hobu $");
> 
>   PROJ_HEAD(aitoff, "Aitoff") "\n\tMisc Sph";
> diff -ru proj-4.9.1RC2/src/pj_gridinfo.c
> proj-4.9.1RC2-patch/src/pj_gridinfo.c
> --- proj-4.9.1RC2/src/pj_gridinfo.c	2015-02-20 16:20:34.000000000 -0500
> +++ proj-4.9.1RC2-patch/src/pj_gridinfo.c	2015-02-21 07:48:14.915962953
> -0500
> @@ -41,7 +41,7 @@
>    * TODO - mloskot: re-implement porting friendly assert
>    */
>   # define assert(exp)	((void)0)
> -#else/
> +#else
>   # include <assert.h>
>   #endif /* _WIN32_WCE */
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com


From jmckenna at gatewaygeomatics.com  Sat Feb 21 06:48:10 2015
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Sat, 21 Feb 2015 10:48:10 -0400
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <B5E578BB-A293-4FBC-8EC2-9209938731ED@hobu.co>
References: <54935122.1030401@wwwtools.com>
	<54D24394.8070406@sri.com>	<1423744871.20785.1.camel@gunduz.org>	<D0995D7E-244C-4644-AB76-DED18146B3EC@hobu.co>	<89CC4922-A52C-417B-8195-4D55A6FE2DE4@carmenta.com>	<E853FF3F-7993-4B1E-ADBF-FF4B6C97EE4C@hobu.co>	<23F60E58-BCA6-4362-97F8-6591902E15DE@hobu.co>	<CALFmHhtMzLp6qr81KqWZvhzke8V7Rir3Zgj2X1_Wta2KGmssmQ@mail.gmail.com>
	<B5E578BB-A293-4FBC-8EC2-9209938731ED@hobu.co>
Message-ID: <54E89AAA.3030804@gatewaygeomatics.com>

Using RC2 with VisualStudio, I had to add the following constants to the 
top of PJ_aitoff.c

   #ifndef M_PI
   #  define M_PI 3.14159265358979323846
   #endif

   #ifndef M_PI_2
   #  define M_PI_2 1.57079632679489661923
   #endif


-jeff




On 2015-02-20 11:48 PM, Howard Butler wrote:
>
> As requested, I have issued one more RC, with the items from Markus, Sebastiaan, and Charles. Please report any findings or issues as before.
>
> http://download.osgeo.org/proj/proj-4.9.1RC2.tar.gz
>
> Thanks,
>
> Howard
>
> _


From charles.karney at sri.com  Sat Feb 21 06:52:10 2015
From: charles.karney at sri.com (Charles Karney)
Date: Sat, 21 Feb 2015 09:52:10 -0500
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <201502211515.54340.even.rouault@spatialys.com>
References: <54935122.1030401@wwwtools.com>
	<B5E578BB-A293-4FBC-8EC2-9209938731ED@hobu.co>
	<54E8859E.7030802@sri.com>
	<201502211515.54340.even.rouault@spatialys.com>
Message-ID: <54E89B9A.5010204@sri.com>

On 02/21/2015 09:15 AM, Even Rouault wrote:
> Le samedi 21 février 2015 14:18:22, Charles Karney a écrit :
>> On 02/20/2015 10:48 PM, Howard Butler wrote:
>>> As requested, I have issued one more RC, with the items from Markus,
>>> Sebastiaan, and Charles. Please report any findings or issues as before.
>>>
>>> http://download.osgeo.org/proj/proj-4.9.1RC2.tar.gz
>>>
>>> Thanks,
>>
>> Please apply the following patches to proj-4.9.1RC2 (in addition to
>> including man/CMakeLists.txt and cmake/policies.cmake as noted by Even).
>> These patches fix:
>
> Applied. I had to manually apply since the patch got somehow corrupted in the email. An attachment would have been better.
>
> I blindly trust you for the cmake windows part...
>
>
> One thing I noticed is that the set of installed headers isn't the same between autoconf and cmake :
>
> ../../install-proj-4.9.1-cmake/include/emess.h  (should be internal only no ?)
> ../../install-proj-4.9.1-cmake/include/proj_api.h
> ../../install-proj-4.9.1-cmake/include/projects.h
> ../../install-proj-4.9.1-cmake/include/pj_list.h (should be internal only no ?)
> ../../install-proj-4.9.1-cmake/include/proj_config.h (should be internal only no ?)
>
> ../../install-proj-4.9.1-autoconf/include/proj_api.h
> ../../install-proj-4.9.1-autoconf/include/org_proj4_Projections.h  (missing in cmake ?)
> ../../install-proj-4.9.1-autoconf/include/projects.h
> ../../install-proj-4.9.1-autoconf/include/geodesic.h  (missing in cmake ?)
> ../../install-proj-4.9.1-autoconf/include/org_proj4_PJ.h  (missing in cmake ?)
>

Attached (!) is a patch to install the right headers (include geodesic.h
exclude internal headers).  The org_* headers aren't installed because
JNI support is missing from cmake.

I also added CH to be list of extra projections to be installed.

One serious discrepancy is that the numbering of the so libraries.
These are different between cmake and autoconf (and the cmake libraries
have two sets of numbers!?).  I'm not sure how best to handle this...

Another less serious issue is that proj_api.h defines

   #define PJ_VERSION 491

What's going to happen with 4.10.0?  (I assume we won't want to go to
5.0?)  I suggestion leaving this definition (for now at any rate), but
adding

   #define PROJ_VERSION_MAJOR 4
   #define PROJ_VERSION_MINOR 9
   #define PROJ_VERSION_PATCH 1

   #define PROJ_VERSION_NUM(a,b,c) ((((a) * 10000 + (b)) * 100) + (c))

   #define PROJ_VERSION \
     PROJ_VERSION_NUM(PROJ_VERSION_MAJOR, PROJ_VERSION_MINOR, 
PROJ_VERSION_PATCH)

Two other fixes to proj4 are on my list:

(A) Fix the runtime library path for the executables with the cmake
install.

(B) Install cmake config support for proj (so that other cmake projects
can find it with find_package(PROJ).  On this point:

   (1) I plan to use PROJ4 as the package name (case is significant
   here).  Any objections?  Alternatives Proj4, proj4.  Possibly the "4"
   should be left off and the user expected to do

     find_package (PROJ 4)

   I don't feel very strongly about this.  However, it will be important
   to stick with a single convention.

   (2) There's already a file in the distribution called

     cmake/Proj4Config.cmake

   This name is probably a bad idea since it will be matched by the
   find_package file lookup.  How about if I rename it to
   Proj4Configuration.cmake

-------------- next part --------------
diff -u -r proj-4.9.1RC2-patch/nad/CMakeLists.txt proj-4.9.1RC2-patch2/nad/CMakeLists.txt
--- proj-4.9.1RC2-patch/nad/CMakeLists.txt	2015-02-20 16:20:34.000000000 -0500
+++ proj-4.9.1RC2-patch2/nad/CMakeLists.txt	2015-02-21 09:06:09.266340475 -0500
@@ -11,7 +11,8 @@
                      nad27
                      GL27
                      nad83
-                     nad.lst )
+                     nad.lst
+                     CH )
 
 #
 # gridshift file
diff -u -r proj-4.9.1RC2-patch/src/lib_proj.cmake proj-4.9.1RC2-patch2/src/lib_proj.cmake
--- proj-4.9.1RC2-patch/src/lib_proj.cmake	2015-02-21 07:53:22.472682833 -0500
+++ proj-4.9.1RC2-patch2/src/lib_proj.cmake	2015-02-21 09:27:39.176943000 -0500
@@ -199,11 +199,16 @@
         vector1.c
  )
 
+set(HEADERS_LIBPROJ_INSTALL
+        projects.h
+        proj_api.h
+        geodesic.h
+)
+
 set(HEADERS_LIBPROJ
+        ${HEADERS_LIBPROJ_INSTALL}
         pj_list.h
         emess.h
-        projects.h
-        proj_api.h
         ${CMAKE_CURRENT_BINARY_DIR}/proj_config.h
  )
 
@@ -225,9 +230,9 @@
 if(JNI_SUPPORT)
   set(SRC_LIBPROJ_CORE ${SRC_LIBPROJ_CORE}
                        jniproj.c )
-  set(HEADERS_LIBPROJ ${HEADERS_LIBPROJ}
-                        org_proj4_PJ.h
-                        org_proj4_Projections.h)
+  set(HEADERS_JNI org_proj4_PJ.h org_proj4_Projections.h)
+  set(HEADERS_LIBPROJ_INSTALL ${HEADERS_LIBPROJ_INSTALL} ${HEADERS_JNI})
+  set(HEADERS_LIBPROJ ${HEADERS_LIBPROJ} ${HEADERS_JNI})
   source_group("Source Files\\JNI" FILES ${SRC_LIBPROJ_JNI})
   add_definitions(-DJNI_ENABLED)
   include_directories( ${JNI_INCLUDE_DIRS})
@@ -301,7 +306,7 @@
         FRAMEWORK DESTINATION ${FRAMEWORKDIR})
 
 if(NOT BUILD_FRAMEWORKS_AND_BUNDLE)
-  install(FILES ${ALL_LIBPROJ_HEADERS}
+  install(FILES ${HEADERS_LIBPROJ_INSTALL}
         DESTINATION ${INCLUDEDIR})
 endif(NOT BUILD_FRAMEWORKS_AND_BUNDLE)
 

From howard at hobu.co  Sat Feb 21 07:18:02 2015
From: howard at hobu.co (Howard Butler)
Date: Sat, 21 Feb 2015 09:18:02 -0600
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <201502211206.53343.even.rouault@spatialys.com>
References: <54935122.1030401@wwwtools.com>
	<CALFmHhtMzLp6qr81KqWZvhzke8V7Rir3Zgj2X1_Wta2KGmssmQ@mail.gmail.com>
	<B5E578BB-A293-4FBC-8EC2-9209938731ED@hobu.co>
	<201502211206.53343.even.rouault@spatialys.com>
Message-ID: <C4739A5D-B6D7-4938-B850-9DDEEF185C6F@hobu.co>


> On Feb 21, 2015, at 5:06 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> 
> With CMake build, I noticed that proj cannot find automatically the grid files. 
> You have to manaully define the PROJ_LIB environment variable to point to the 
> $PREFIX/share/proj directory. autoconf builds have the following magic in 
> src/Makefile.am that sets the PROJ_LIB macro to $(pkgdatadir) so that 
> src/pj_open_lib.c has a default hardcoded path.
> 
> {{{
> INCLUDES =      -DPROJ_LIB=\"$(pkgdatadir)\" \
>                -DMUTEX_ at MUTEX_SETTING@ @JNI_INCLUDE@
> }}}
> 
> Not sure how to do that with CMake...
> 

Patch applied in r2626 to implement this

https://trac.osgeo.org/proj/ticket/260

Howard

From even.rouault at spatialys.com  Sat Feb 21 07:19:33 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 21 Feb 2015 16:19:33 +0100
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <54E89B9A.5010204@sri.com>
References: <54935122.1030401@wwwtools.com>
	<201502211515.54340.even.rouault@spatialys.com>
	<54E89B9A.5010204@sri.com>
Message-ID: <201502211619.33561.even.rouault@spatialys.com>

Le samedi 21 février 2015 15:52:10, Charles Karney a écrit :
> On 02/21/2015 09:15 AM, Even Rouault wrote:
> > Le samedi 21 février 2015 14:18:22, Charles Karney a écrit :
> >> On 02/20/2015 10:48 PM, Howard Butler wrote:
> >>> As requested, I have issued one more RC, with the items from Markus,
> >>> Sebastiaan, and Charles. Please report any findings or issues as
> >>> before.
> >>> 
> >>> http://download.osgeo.org/proj/proj-4.9.1RC2.tar.gz
> >>> 
> >>> Thanks,
> >> 
> >> Please apply the following patches to proj-4.9.1RC2 (in addition to
> >> including man/CMakeLists.txt and cmake/policies.cmake as noted by Even).
> > 
> >> These patches fix:
> > Applied. I had to manually apply since the patch got somehow corrupted in
> > the email. An attachment would have been better.
> > 
> > I blindly trust you for the cmake windows part...
> > 
> > 
> > One thing I noticed is that the set of installed headers isn't the same
> > between autoconf and cmake :
> > 
> > ../../install-proj-4.9.1-cmake/include/emess.h  (should be internal only
> > no ?) ../../install-proj-4.9.1-cmake/include/proj_api.h
> > ../../install-proj-4.9.1-cmake/include/projects.h
> > ../../install-proj-4.9.1-cmake/include/pj_list.h (should be internal only
> > no ?) ../../install-proj-4.9.1-cmake/include/proj_config.h (should be
> > internal only no ?)
> > 
> > ../../install-proj-4.9.1-autoconf/include/proj_api.h
> > ../../install-proj-4.9.1-autoconf/include/org_proj4_Projections.h 
> > (missing in cmake ?)
> > ../../install-proj-4.9.1-autoconf/include/projects.h
> > ../../install-proj-4.9.1-autoconf/include/geodesic.h  (missing in cmake
> > ?) ../../install-proj-4.9.1-autoconf/include/org_proj4_PJ.h  (missing in
> > cmake ?)
> 
> Attached (!) is a patch to install the right headers (include geodesic.h
> exclude internal headers).  The org_* headers aren't installed because
> JNI support is missing from cmake.
> 
> I also added CH to be list of extra projections to be installed.

Applied

> 
> One serious discrepancy is that the numbering of the so libraries.
> These are different between cmake and autoconf (and the cmake libraries
> have two sets of numbers!?).  I'm not sure how best to handle this...
> 

Me neither. For folks looking, here's the state of things :

$ find ../install-proj-4.9.1-autoconf/lib/
../install-proj-4.9.1-autoconf/lib/
../install-proj-4.9.1-autoconf/lib/libproj.so.9
../install-proj-4.9.1-autoconf/lib/libproj.a
../install-proj-4.9.1-autoconf/lib/pkgconfig
../install-proj-4.9.1-autoconf/lib/pkgconfig/proj.pc
../install-proj-4.9.1-autoconf/lib/libproj.la
../install-proj-4.9.1-autoconf/lib/libproj.so
../install-proj-4.9.1-autoconf/lib/libproj.so.9.0.0

$ find ../install-proj-4.9.1-cmake/lib/
../install-proj-4.9.1-cmake/lib/
../install-proj-4.9.1-cmake/lib/libproj.so.4.9.1
../install-proj-4.9.1-cmake/lib/libproj.so
../install-proj-4.9.1-cmake/lib/libproj.so.9.0.0

And for reference:
$ find ../install-proj-4.8.0/lib  (autoconf build)
../install-proj-4.8.0/lib
../install-proj-4.8.0/lib/libproj.a
../install-proj-4.8.0/lib/libproj.so.0.7.0
../install-proj-4.8.0/lib/pkgconfig
../install-proj-4.8.0/lib/pkgconfig/proj.pc
../install-proj-4.8.0/lib/libproj.la
../install-proj-4.8.0/lib/libproj.so
../install-proj-4.8.0/lib/libproj.so.0

> Another less serious issue is that proj_api.h defines
> 
>    #define PJ_VERSION 491
> 
> What's going to happen with 4.10.0?  (I assume we won't want to go to
> 5.0?)
> I suggestion leaving this definition (for now at any rate), but
> adding
> 
>    #define PROJ_VERSION_MAJOR 4
>    #define PROJ_VERSION_MINOR 9
>    #define PROJ_VERSION_PATCH 1
> 
>    #define PROJ_VERSION_NUM(a,b,c) ((((a) * 10000 + (b)) * 100) + (c))
> 
>    #define PROJ_VERSION \
>      PROJ_VERSION_NUM(PROJ_VERSION_MAJOR, PROJ_VERSION_MINOR,
> PROJ_VERSION_PATCH)

Yes, that could do it. We did a similar trick when releasing GDAL 1.10. The 
new numbering rule is still compatible with the older one (that is: newer 
versions have PROJ_VERSION greater than the one of previous versions).

> 
> Two other fixes to proj4 are on my list:
> 
> (A) Fix the runtime library path for the executables with the cmake
> install.
> 
> (B) Install cmake config support for proj (so that other cmake projects
> can find it with find_package(PROJ).  On this point:
> 
>    (1) I plan to use PROJ4 as the package name (case is significant
>    here).  Any objections?  Alternatives Proj4, proj4.  Possibly the "4"
>    should be left off and the user expected to do
> 
>      find_package (PROJ 4)
> 
>    I don't feel very strongly about this.  However, it will be important
>    to stick with a single convention.

The pkgconfig name is proj. That let the door opened for proj 5

> 
>    (2) There's already a file in the distribution called
> 
>      cmake/Proj4Config.cmake
> 
>    This name is probably a bad idea since it will be matched by the
>    find_package file lookup.  How about if I rename it to
>    Proj4Configuration.cmake

Sounds reasonable to me.


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com


From charles.karney at sri.com  Sat Feb 21 08:13:55 2015
From: charles.karney at sri.com (Charles Karney)
Date: Sat, 21 Feb 2015 11:13:55 -0500
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <201502211619.33561.even.rouault@spatialys.com>
References: <54935122.1030401@wwwtools.com>
	<201502211515.54340.even.rouault@spatialys.com>
	<54E89B9A.5010204@sri.com>
	<201502211619.33561.even.rouault@spatialys.com>
Message-ID: <54E8AEC3.8000702@sri.com>

On 02/21/2015 10:19 AM, Even Rouault wrote:
>> Attached (!) is a patch to install the right headers (include geodesic.h
>> >exclude internal headers).  The org_* headers aren't installed because
>> >JNI support is missing from cmake.
>> >
>> >I also added CH to be list of extra projections to be installed.
> Applied
>

The following patch addresses 2 cmake issues

(1) includes a missing source file in the library, geodesic.c, and
cleans up the way include files are installed (partially undoing a
patch in proj-4.9.1RC2.patch2);

(2) sets the run time loader path for the executables.

   --Charles

-------------- next part --------------
diff -ur proj-4.9.1RC2-patch2/src/bin_geod.cmake proj-4.9.1RC2-patch3/src/bin_geod.cmake
--- proj-4.9.1RC2-patch2/src/bin_geod.cmake	2015-02-20 16:20:34.000000000 -0500
+++ proj-4.9.1RC2-patch3/src/bin_geod.cmake	2015-02-21 10:46:07.499520005 -0500
@@ -1,6 +1,6 @@
 set(GEOD_SRC geod.c
-             geodesic.c geod_set.c geod_interface.c )
-set(GEOD_INCLUDE  geodesic.h geod_interface.h)
+             geod_set.c geod_interface.c )
+set(GEOD_INCLUDE geod_interface.h)
 
 source_group("Source Files\\Bin" FILES ${GEOD_SRC} ${GEOD_INCLUDE})
 
diff -ur proj-4.9.1RC2-patch2/src/CMakeLists.txt proj-4.9.1RC2-patch3/src/CMakeLists.txt
--- proj-4.9.1RC2-patch2/src/CMakeLists.txt	2015-02-20 16:20:34.000000000 -0500
+++ proj-4.9.1RC2-patch3/src/CMakeLists.txt	2015-02-21 11:01:46.351214089 -0500
@@ -8,6 +8,20 @@
 option(BUILD_GEOD "Build geod (computation of geodesic lines)" ON)
 option(BUILD_NAD2BIN "Build nad2bin (format conversion tool) " ON)
 
+if(NOT MSVC)
+  if (NOT APPLE)
+    # Use relative path so that package is relocatable
+    set(CMAKE_INSTALL_RPATH "\$ORIGIN/../lib")
+  else ()
+    set (CMAKE_INSTALL_NAME_DIR "${CMAKE_INSTALL_PREFIX}/lib")
+    # TO DO: cmake 2.8.12 introduces a way to make the install tree
+    # relocatable with OSX via
+    # (1) set(CMAKE_MACOSX_RPATH ON) and
+    # (2) setting the INSTALL_RPATH property on the executables to
+    # "@loader_path/../lib"
+  endif ()
+endif ()
+
 if(BUILD_CS2CS)
  include(bin_cs2cs.cmake)
 endif(BUILD_CS2CS)
diff -ur proj-4.9.1RC2-patch2/src/lib_proj.cmake proj-4.9.1RC2-patch3/src/lib_proj.cmake
--- proj-4.9.1RC2-patch2/src/lib_proj.cmake	2015-02-21 09:27:39.176943000 -0500
+++ proj-4.9.1RC2-patch3/src/lib_proj.cmake	2015-02-21 10:51:22.395452207 -0500
@@ -145,8 +145,10 @@
         biveval.c
         dmstor.c
         emess.c
+        emess.h
         geocent.c
         geocent.h
+        geodesic.c
         mk_cheby.c
         nad_cvt.c
         nad_init.c
@@ -176,6 +178,7 @@
         pj_inv.c
         pj_latlong.c
         pj_list.c
+        pj_list.h
         pj_log.c
         pj_malloc.c
         pj_mlfn.c
@@ -197,21 +200,15 @@
         proj_rouss.c
         rtodms.c
         vector1.c
+        ${CMAKE_CURRENT_BINARY_DIR}/proj_config.h
  )
 
-set(HEADERS_LIBPROJ_INSTALL
+set(HEADERS_LIBPROJ
         projects.h
         proj_api.h
         geodesic.h
 )
 
-set(HEADERS_LIBPROJ
-        ${HEADERS_LIBPROJ_INSTALL}
-        pj_list.h
-        emess.h
-        ${CMAKE_CURRENT_BINARY_DIR}/proj_config.h
- )
-
 # Group source files for IDE source explorers (e.g. Visual Studio)
 source_group("Header Files" FILES ${HEADERS_LIBPROJ})
 source_group("Source Files\\Core" FILES ${SRC_LIBPROJ_CORE})
@@ -230,9 +227,9 @@
 if(JNI_SUPPORT)
   set(SRC_LIBPROJ_CORE ${SRC_LIBPROJ_CORE}
                        jniproj.c )
-  set(HEADERS_JNI org_proj4_PJ.h org_proj4_Projections.h)
-  set(HEADERS_LIBPROJ_INSTALL ${HEADERS_LIBPROJ_INSTALL} ${HEADERS_JNI})
-  set(HEADERS_LIBPROJ ${HEADERS_LIBPROJ} ${HEADERS_JNI})
+  set(HEADERS_LIBPROJ ${HEADERS_LIBPROJ}
+                        org_proj4_PJ.h
+                        org_proj4_Projections.h)
   source_group("Source Files\\JNI" FILES ${SRC_LIBPROJ_JNI})
   add_definitions(-DJNI_ENABLED)
   include_directories( ${JNI_INCLUDE_DIRS})
@@ -306,7 +303,7 @@
         FRAMEWORK DESTINATION ${FRAMEWORKDIR})
 
 if(NOT BUILD_FRAMEWORKS_AND_BUNDLE)
-  install(FILES ${HEADERS_LIBPROJ_INSTALL}
+  install(FILES ${ALL_LIBPROJ_HEADERS}
         DESTINATION ${INCLUDEDIR})
 endif(NOT BUILD_FRAMEWORKS_AND_BUNDLE)
 

From howard at hobu.co  Sat Feb 21 08:28:13 2015
From: howard at hobu.co (Howard Butler)
Date: Sat, 21 Feb 2015 10:28:13 -0600
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <54E8AEC3.8000702@sri.com>
References: <54935122.1030401@wwwtools.com>
	<201502211515.54340.even.rouault@spatialys.com>
	<54E89B9A.5010204@sri.com>
	<201502211619.33561.even.rouault@spatialys.com>
	<54E8AEC3.8000702@sri.com>
Message-ID: <CCC28DA0-3A16-45DD-BCA2-564AEA49F396@hobu.co>


> On Feb 21, 2015, at 10:13 AM, Charles Karney <charles.karney at sri.com> wrote:
> 
> On 02/21/2015 10:19 AM, Even Rouault wrote:
>>> Attached (!) is a patch to install the right headers (include geodesic.h
>>> >exclude internal headers).  The org_* headers aren't installed because
>>> >JNI support is missing from cmake.
>>> >
>>> >I also added CH to be list of extra projections to be installed.
>> Applied
>> 
> 
> The following patch addresses 2 cmake issues
> 
> (1) includes a missing source file in the library, geodesic.c, and
> cleans up the way include files are installed (partially undoing a
> patch in proj-4.9.1RC2.patch2);
> 
> (2) sets the run time loader path for the executables.

Applied. 

https://trac.osgeo.org/proj/ticket/262

Howard

From howard at hobu.co  Sat Feb 21 08:37:15 2015
From: howard at hobu.co (Howard Butler)
Date: Sat, 21 Feb 2015 10:37:15 -0600
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <201502211619.33561.even.rouault@spatialys.com>
References: <54935122.1030401@wwwtools.com>
	<201502211515.54340.even.rouault@spatialys.com>
	<54E89B9A.5010204@sri.com>
	<201502211619.33561.even.rouault@spatialys.com>
Message-ID: <C56314DD-4CD6-4C66-9067-C9650042E93D@hobu.co>


> On Feb 21, 2015, at 9:19 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Me neither. For folks looking, here's the state of things :
> 
> $ find ../install-proj-4.9.1-autoconf/lib/
> ../install-proj-4.9.1-autoconf/lib/
> ../install-proj-4.9.1-autoconf/lib/libproj.so.9
> ../install-proj-4.9.1-autoconf/lib/libproj.a
> ../install-proj-4.9.1-autoconf/lib/pkgconfig
> ../install-proj-4.9.1-autoconf/lib/pkgconfig/proj.pc
> ../install-proj-4.9.1-autoconf/lib/libproj.la
> ../install-proj-4.9.1-autoconf/lib/libproj.so
> ../install-proj-4.9.1-autoconf/lib/libproj.so.9.0.0
> 
> $ find ../install-proj-4.9.1-cmake/lib/
> ../install-proj-4.9.1-cmake/lib/
> ../install-proj-4.9.1-cmake/lib/libproj.so.4.9.1
> ../install-proj-4.9.1-cmake/lib/libproj.so
> ../install-proj-4.9.1-cmake/lib/libproj.so.9.0.0
> 
> And for reference:
> $ find ../install-proj-4.8.0/lib  (autoconf build)
> ../install-proj-4.8.0/lib
> ../install-proj-4.8.0/lib/libproj.a
> ../install-proj-4.8.0/lib/libproj.so.0.7.0
> ../install-proj-4.8.0/lib/pkgconfig
> ../install-proj-4.8.0/lib/pkgconfig/proj.pc
> ../install-proj-4.8.0/lib/libproj.la
> ../install-proj-4.8.0/lib/libproj.so
> ../install-proj-4.8.0/lib/libproj.so.0

Fix attempted at https://trac.osgeo.org/proj/ticket/263

The CMake configuration was using VERSION target properties which is probably not what we want.

Howard

From howard at hobu.co  Sat Feb 21 09:31:23 2015
From: howard at hobu.co (Howard Butler)
Date: Sat, 21 Feb 2015 11:31:23 -0600
Subject: [Proj] Proj 4.9.1RC3 Released
Message-ID: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>

All,

Proj4 4.9.1RC3 is now released for testing. Should no significant issues be identified, this is the last release candidate, and I will motion the MetaCRS list to promote it to final on Wednesday.  

Thanks for testing the past two RC's.

Howard

http://download.osgeo.org/proj/proj-4.9.1RC3.tar.gz

> 4.9.1 Release Notes
> -------------------
>  
>  o 4.9.0RC2 release was abandoned because it was not promoted in a 
>    timely fashion. Subsequent maintenance of tickets has continued, 
>    and a new 4.9.1 release was issued in its place.
> 
>  o Implement inverse solution for Winkel Tripel from Drazan Tutic #250
> 
>  o More CMake configuration tweaks. The CMake configuration is probably 
>    not at feature parity with the autotools builds at this point but it 
>    is converging #256
>  
>  o Tweak initialization ordering around setlocal which may have caused
>    issues #237
> 
>  o Support out-of-tree autoconf builds more completely #247
> 
>  o Fix NaN handling by geod_inverse and geod_polygon_addedge #251 & #253
> 
>  o Update config.sub and config.guess #257
>  
>  o Adapt Charles Karney's CMake patches for smoother build #258
> 
>  o Define default PROJ_LIB location for CMake compilation #261
> 
>  o Fix Windows compilation on PJ_aitoff.c
> 
>  o Align CMake SOVERSION with autotools #263
> 
>  o Regenerate nad/epsg with GDAL r28536 to avoid precision loss in TOWGS84
>    parameters, e.g. on Amersfoort / RD EPSG:4289 (#260)




From knudsen.thomas at gmail.com  Sat Feb 21 09:47:28 2015
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Sat, 21 Feb 2015 18:47:28 +0100
Subject: [Proj] 4.9.1RC1 Released
In-Reply-To: <C56314DD-4CD6-4C66-9067-C9650042E93D@hobu.co>
References: <54935122.1030401@wwwtools.com>
	<201502211515.54340.even.rouault@spatialys.com>
	<54E89B9A.5010204@sri.com>
	<201502211619.33561.even.rouault@spatialys.com>
	<C56314DD-4CD6-4C66-9067-C9650042E93D@hobu.co>
Message-ID: <CAH0YoENanad1Fhtje-ON7Qt=d-w7VXD3jFwFH-xmkUn+M6_jow@mail.gmail.com>

I have not been following proj development closely for the last years, but
I think it would be appropriate to add a few more names to the AUTHORS file:

To the "Contributors section":

Charles Karney (for, if I remember correctly, a major rewrite of the
geodesics code, and a large number of high quality patches)

Karsten Engsager and Knud Poder (for the "Engsager Extended Transverse
Mercator" code in proj_etmerc.c)

To the "Maintainers" section:

Howard Butler (apparently the new, or at least the current, maintainer :-) )


I'm probably missing some?

/Thomas

2015-02-21 17:37 GMT+01:00 Howard Butler <howard at hobu.co>:

>
> > On Feb 21, 2015, at 9:19 AM, Even Rouault <even.rouault at spatialys.com>
> wrote:
> >
> > Me neither. For folks looking, here's the state of things :
> >
> > $ find ../install-proj-4.9.1-autoconf/lib/
> > ../install-proj-4.9.1-autoconf/lib/
> > ../install-proj-4.9.1-autoconf/lib/libproj.so.9
> > ../install-proj-4.9.1-autoconf/lib/libproj.a
> > ../install-proj-4.9.1-autoconf/lib/pkgconfig
> > ../install-proj-4.9.1-autoconf/lib/pkgconfig/proj.pc
> > ../install-proj-4.9.1-autoconf/lib/libproj.la
> > ../install-proj-4.9.1-autoconf/lib/libproj.so
> > ../install-proj-4.9.1-autoconf/lib/libproj.so.9.0.0
> >
> > $ find ../install-proj-4.9.1-cmake/lib/
> > ../install-proj-4.9.1-cmake/lib/
> > ../install-proj-4.9.1-cmake/lib/libproj.so.4.9.1
> > ../install-proj-4.9.1-cmake/lib/libproj.so
> > ../install-proj-4.9.1-cmake/lib/libproj.so.9.0.0
> >
> > And for reference:
> > $ find ../install-proj-4.8.0/lib  (autoconf build)
> > ../install-proj-4.8.0/lib
> > ../install-proj-4.8.0/lib/libproj.a
> > ../install-proj-4.8.0/lib/libproj.so.0.7.0
> > ../install-proj-4.8.0/lib/pkgconfig
> > ../install-proj-4.8.0/lib/pkgconfig/proj.pc
> > ../install-proj-4.8.0/lib/libproj.la
> > ../install-proj-4.8.0/lib/libproj.so
> > ../install-proj-4.8.0/lib/libproj.so.0
>
> Fix attempted at https://trac.osgeo.org/proj/ticket/263
>
> The CMake configuration was using VERSION target properties which is
> probably not what we want.
>
> Howard
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150221/8decc316/attachment.html>

From jmckenna at gatewaygeomatics.com  Sat Feb 21 10:21:06 2015
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Sat, 21 Feb 2015 14:21:06 -0400
Subject: [Proj] Proj 4.9.1RC3 Released
In-Reply-To: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
Message-ID: <54E8CC92.100@gatewaygeomatics.com>

Works well on Windows.  Thanks Howard!

-jeff



On 2015-02-21 1:31 PM, Howard Butler wrote:
> All,
>
> Proj4 4.9.1RC3 is now released for testing. Should no significant issues be identified, this is the last release candidate, and I will motion the MetaCRS list to promote it to final on Wednesday.
>
> Thanks for testing the past two RC's.
>
> Howard
>
> http://download.osgeo.org/proj/proj-4.9.1RC3.tar.gz
>
>> 4.9.1 Release Notes
>> -------------------
>>
>>   o 4.9.0RC2 release was abandoned because it was not promoted in a
>>     timely fashion. Subsequent maintenance of tickets has continued,
>>     and a new 4.9.1 release was issued in its place.
>>
>>   o Implement inverse solution for Winkel Tripel from Drazan Tutic #250
>>
>>   o More CMake configuration tweaks. The CMake configuration is probably
>>     not at feature parity with the autotools builds at this point but it
>>     is converging #256
>>
>>   o Tweak initialization ordering around setlocal which may have caused
>>     issues #237
>>
>>   o Support out-of-tree autoconf builds more completely #247
>>
>>   o Fix NaN handling by geod_inverse and geod_polygon_addedge #251 & #253
>>
>>   o Update config.sub and config.guess #257
>>
>>   o Adapt Charles Karney's CMake patches for smoother build #258
>>
>>   o Define default PROJ_LIB location for CMake compilation #261
>>
>>   o Fix Windows compilation on PJ_aitoff.c
>>
>>   o Align CMake SOVERSION with autotools #263
>>
>>   o Regenerate nad/epsg with GDAL r28536 to avoid precision loss in TOWGS84
>>     parameters, e.g. on Amersfoort / RD EPSG:4289 (#260)
>
>


From charles.karney at sri.com  Sat Feb 21 10:21:24 2015
From: charles.karney at sri.com (Charles Karney)
Date: Sat, 21 Feb 2015 13:21:24 -0500
Subject: [Proj] Proj 4.9.1RC3 Released
In-Reply-To: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
Message-ID: <54E8CCA4.90504@sri.com>

On 02/21/2015 12:31 PM, Howard Butler wrote:
> All,
>
> Proj4 4.9.1RC3 is now released for testing. Should no significant issues be identified, this is the last release candidate, and I will motion the MetaCRS list to promote it to final on Wednesday.
>
> Thanks for testing the past two RC's.
>
> Howard
>
> http://download.osgeo.org/proj/proj-4.9.1RC3.tar.gz

The attached patch addresses the following cmake issues:

Set "build" and "api" versions on the libraries.  This way we end up
with the same installed so files as with autoconf.

Sets the CMAKE_BUILD_TYPE to Release (if not specified).

Sets the rpath using the configured library path (instead of hardcoding
"lib").

Provides support for find_package(PROJ 4.9) as follows

   The name of the package is "PROJ" (uppercase).

   proj-config.cmake gets installed in share/cmake/PROJ (non Windows) or
   cmake (Windows).

   This defines (for example)
     PROJ_FOUND = 1
     PROJ_INCLUDE_DIRS = /usr/local/include
     PROJ_LIBRARIES = proj
     PROJ_LIBRARY_DIRS = /usr/local/lib
     PROJ_BINARY_DIRS = /usr/local/bin
     PROJ_VERSION = 4.9.1

   Here proj is a "target" name which means that it inherits
   dependencies, etc.

   find_package will look under CMAKE_PREFIX_PATH for proj-config.cmake.

There are no remaining issues for me (so far!).

   --Charles

-------------- next part --------------
--- proj-4.9.1RC3/CMakeLists.txt	2015-02-20 22:46:19.000000000 -0500
+++ proj-4.9.1RC3-patch1/CMakeLists.txt	2015-02-21 12:55:33.067871841 -0500
@@ -32,7 +32,8 @@
 #################################################################################
 include(Proj4Version)
 proj_version(MAJOR 4 MINOR 9 PATCH 1)
-set(PROJ_SOVERSION "9.0.0")
+set(PROJ_API_VERSION "9")
+set(PROJ_BUILD_VERSION "9.0.0")
 
 #################################################################################
 # Build features and variants
@@ -45,6 +46,12 @@
 boost_report_value(PROJ_PLATFORM_NAME)
 boost_report_value(PROJ_COMPILER_NAME)
 
+# Set a default build type for single-configuration cmake generators if
+# no build type is set.
+if (NOT CMAKE_CONFIGURATION_TYPES AND NOT CMAKE_BUILD_TYPE)
+  set (CMAKE_BUILD_TYPE Release)
+endif ()
+
 option(PROJ4_TESTS "Enable build of collection of PROJ4 tests" ON)
 boost_report_value(PROJ4_TESTS)
 if(PROJ4_TESTS)
@@ -81,4 +88,5 @@
 add_subdirectory(nad)
 add_subdirectory(src)
 add_subdirectory(man)
+add_subdirectory(cmake)
 
--- proj-4.9.1RC3/src/CMakeLists.txt	2015-02-21 12:25:51.000000000 -0500
+++ proj-4.9.1RC3-patch1/src/CMakeLists.txt	2015-02-21 12:40:26.698144986 -0500
@@ -11,14 +11,14 @@
 if(NOT MSVC)
   if (NOT APPLE)
     # Use relative path so that package is relocatable
-    set(CMAKE_INSTALL_RPATH "\$ORIGIN/../lib")
+    set(CMAKE_INSTALL_RPATH "\$ORIGIN/../${LIBDIR}")
   else ()
-    set (CMAKE_INSTALL_NAME_DIR "${CMAKE_INSTALL_PREFIX}/lib")
+    set (CMAKE_INSTALL_NAME_DIR "${CMAKE_INSTALL_PREFIX}/${LIBDIR}")
     # TO DO: cmake 2.8.12 introduces a way to make the install tree
     # relocatable with OSX via
     # (1) set(CMAKE_MACOSX_RPATH ON) and
     # (2) setting the INSTALL_RPATH property on the executables to
-    # "@loader_path/../lib"
+    # "@loader_path/../${LIBDIR}"
   endif ()
 endif ()
 
--- proj-4.9.1RC3/src/lib_proj.cmake	2015-02-21 12:25:51.000000000 -0500
+++ proj-4.9.1RC3-patch1/src/lib_proj.cmake	2015-02-21 13:01:18.327850164 -0500
@@ -264,17 +264,20 @@
 if(WIN32)
   set_target_properties(${PROJ_CORE_TARGET}
     PROPERTIES
+    VERSION "${${PROJECT_INTERN_NAME}_BUILD_VERSION}"
     OUTPUT_NAME "${PROJ_CORE_TARGET_OUTPUT_NAME}"
     CLEAN_DIRECT_OUTPUT 1)
 elseif(BUILD_FRAMEWORKS_AND_BUNDLE)
   set_target_properties(${PROJ_CORE_TARGET}
     PROPERTIES
+    VERSION "${${PROJECT_INTERN_NAME}_BUILD_VERSION}"
     INSTALL_NAME_DIR ${PROJ_INSTALL_NAME_DIR}
     CLEAN_DIRECT_OUTPUT 1)
 else()
   set_target_properties(${PROJ_CORE_TARGET}
     PROPERTIES
-    SOVERSION "${${PROJECT_INTERN_NAME}_SOVERSION}"
+    VERSION "${${PROJECT_INTERN_NAME}_BUILD_VERSION}"
+    SOVERSION "${${PROJECT_INTERN_NAME}_API_VERSION}"
     CLEAN_DIRECT_OUTPUT 1)
 endif()
 
@@ -288,7 +291,9 @@
 set(PROJ_LIBRARIES ${PROJ_CORE_TARGET} )
 if(UNIX AND BUILD_LIBPROJ_SHARED)
     find_library(M_LIB m)
-    TARGET_LINK_LIBRARIES(${PROJ_CORE_TARGET} ${M_LIB})
+    if(M_LIB)
+      TARGET_LINK_LIBRARIES(${PROJ_CORE_TARGET} -lm)
+    endif()
 endif(UNIX AND BUILD_LIBPROJ_SHARED)
 if(USE_THREAD AND Threads_FOUND AND CMAKE_USE_PTHREADS_INIT AND BUILD_LIBPROJ_SHARED)
    TARGET_LINK_LIBRARIES(${PROJ_CORE_TARGET} ${CMAKE_THREAD_LIBS_INIT})
@@ -299,6 +304,7 @@
 # install
 ##############################################
 install(TARGETS ${PROJ_CORE_TARGET}
+        EXPORT targets
         RUNTIME DESTINATION ${BINDIR}
         LIBRARY DESTINATION ${LIBDIR}
         ARCHIVE DESTINATION ${LIBDIR}
--- /dev/null	2014-12-23 16:11:18.821437211 -0500
+++ proj-4.9.1RC3-patch1/cmake/CMakeLists.txt	2015-02-21 12:02:03.112413566 -0500
@@ -0,0 +1,29 @@
+# proj-config.cmake for the install tree.  It's installed in
+# ${INSTALL_CMAKE_DIR} and @PROJECT_ROOT_DIR@ is the relative
+# path to the root from there.  (Note that the whole install tree can
+# be relocated.)
+if (NOT WIN32)
+  set (INSTALL_CMAKE_DIR "share/cmake/${PROJECT_INTERN_NAME}")
+  set (PROJECT_ROOT_DIR "../../..")
+else ()
+  set (INSTALL_CMAKE_DIR "cmake")
+  set (PROJECT_ROOT_DIR "..")
+endif ()
+
+string(TOLOWER "${PROJECT_INTERN_NAME}" PROJECT_NAME_LOWER)
+configure_file (project-config.cmake.in project-config.cmake @ONLY)
+configure_file (project-config-version.cmake.in
+  project-config-version.cmake @ONLY)
+install (FILES
+  "${CMAKE_CURRENT_BINARY_DIR}/project-config.cmake"
+  DESTINATION "${INSTALL_CMAKE_DIR}"
+  RENAME "${PROJECT_NAME_LOWER}-config.cmake")
+install (FILES
+  "${CMAKE_CURRENT_BINARY_DIR}/project-config-version.cmake"
+  DESTINATION "${INSTALL_CMAKE_DIR}"
+  RENAME "${PROJECT_NAME_LOWER}-config-version.cmake")
+# Make information about the cmake targets (the library and the tools)
+# available.
+install (EXPORT targets
+  FILE ${PROJECT_NAME_LOWER}-targets.cmake
+  DESTINATION "${INSTALL_CMAKE_DIR}")
--- /dev/null	2014-12-23 16:11:18.821437211 -0500
+++ proj-4.9.1RC3-patch1/cmake/project-config.cmake.in	2015-02-21 12:26:54.333730492 -0500
@@ -0,0 +1,28 @@
+# Configure @PROJECT_INTERN_NAME@
+#
+# Set
+#  @PROJECT_INTERN_NAME at _FOUND = 1
+#  @PROJECT_INTERN_NAME at _INCLUDE_DIRS = /usr/local/include
+#  @PROJECT_INTERN_NAME at _LIBRARIES = proj
+#  @PROJECT_INTERN_NAME at _LIBRARY_DIRS = /usr/local/lib
+#  @PROJECT_INTERN_NAME at _BINARY_DIRS = /usr/local/bin
+#  @PROJECT_INTERN_NAME at _VERSION = 4.9.1 (for example)
+
+message (STATUS "Reading ${CMAKE_CURRENT_LIST_FILE}")
+# @PROJECT_INTERN_NAME at _VERSION is set by version file
+message (STATUS
+  "@PROJECT_INTERN_NAME@ configuration, version ${@PROJECT_INTERN_NAME at _VERSION}")
+
+# Tell the user project where to find our headers and libraries
+get_filename_component (_DIR ${CMAKE_CURRENT_LIST_FILE} PATH)
+get_filename_component (_ROOT "${_DIR}/@PROJECT_ROOT_DIR@" ABSOLUTE)
+set (@PROJECT_INTERN_NAME at _INCLUDE_DIRS "${_ROOT}/@INCLUDEDIR@")
+set (@PROJECT_INTERN_NAME at _LIBRARY_DIRS "${_ROOT}/@LIBDIR@")
+set (@PROJECT_INTERN_NAME at _BINARY_DIRS "${_ROOT}/@BINDIR@")
+
+set (@PROJECT_INTERN_NAME at _LIBRARIES proj)
+# Read in the exported definition of the library
+include ("${_DIR}/@PROJECT_NAME_LOWER at -targets.cmake")
+
+unset (_ROOT)
+unset (_DIR)
--- /dev/null	2014-12-23 16:11:18.821437211 -0500
+++ proj-4.9.1RC3-patch1/cmake/project-config-version.cmake.in	2015-02-21 12:04:25.147622450 -0500
@@ -0,0 +1,48 @@
+# Version checking for @PROJECT_INTERN_NAME@
+
+set (PACKAGE_VERSION "@PROJ_VERSION@")
+set (PACKAGE_VERSION_MAJOR "@PROJ_VERSION_MAJOR@")
+set (PACKAGE_VERSION_MINOR "@PROJ_VERSION_MINOR@")
+set (PACKAGE_VERSION_PATCH "@PROJ_VERSION_PATCH@")
+
+if (NOT PACKAGE_FIND_NAME STREQUAL "@PROJECT_INTERN_NAME@")
+  # Check package name (in particular, because of the way cmake finds
+  # package config files, the capitalization could easily be "wrong").
+  # This is necessary to ensure that the automatically generated
+  # variables, e.g., <package>_FOUND, are consistently spelled.
+  set (REASON "package = @PROJECT_INTERN_NAME@, NOT ${PACKAGE_FIND_NAME}")
+  set (PACKAGE_VERSION_UNSUITABLE TRUE)
+elseif (NOT (APPLE OR (NOT DEFINED CMAKE_SIZEOF_VOID_P) OR
+      CMAKE_SIZEOF_VOID_P EQUAL @CMAKE_SIZEOF_VOID_P@))
+  # Reject if there's a 32-bit/64-bit mismatch (not necessary with Apple
+  # since a multi-architecture library is built for that platform).
+  set (REASON "sizeof(*void) =  @CMAKE_SIZEOF_VOID_P@")
+  set (PACKAGE_VERSION_UNSUITABLE TRUE)
+elseif (MSVC AND NOT MSVC_VERSION STREQUAL "@MSVC_VERSION@")
+  # Reject if there's a mismatch in MSVC compiler versions
+  set (REASON "_MSC_VER = @MSVC_VERSION@")
+  set (PACKAGE_VERSION_UNSUITABLE TRUE)
+elseif (NOT CMAKE_CROSSCOMPILING STREQUAL "@CMAKE_CROSSCOMPILING@")
+  # Reject if there's a mismatch in ${CMAKE_CROSSCOMPILING}
+  set (REASON "cross-compiling = @CMAKE_CROSSCOMPILING@")
+  set (PACKAGE_VERSION_UNSUITABLE TRUE)
+elseif (CMAKE_CROSSCOMPILING AND
+    NOT (CMAKE_SYSTEM_NAME STREQUAL "@CMAKE_SYSTEM_NAME@" AND
+      CMAKE_SYSTEM_PROCESSOR STREQUAL "@CMAKE_SYSTEM_PROCESSOR@"))
+  # Reject if cross-compiling and there's a mismatch in the target system
+  set (REASON "target = @CMAKE_SYSTEM_NAME at -@CMAKE_SYSTEM_PROCESSOR@")
+  set (PACKAGE_VERSION_UNSUITABLE TRUE)
+elseif (PACKAGE_FIND_VERSION)
+  if (PACKAGE_FIND_VERSION VERSION_EQUAL PACKAGE_VERSION)
+    set (PACKAGE_VERSION_EXACT TRUE)
+  elseif (PACKAGE_FIND_VERSION VERSION_LESS PACKAGE_VERSION
+    AND PACKAGE_FIND_VERSION_MAJOR EQUAL PACKAGE_VERSION_MAJOR)
+    set (PACKAGE_VERSION_COMPATIBLE TRUE)
+  endif ()
+endif ()
+
+# If unsuitable, append the reason to the package version so that it's
+# visible to the user.
+if (PACKAGE_VERSION_UNSUITABLE)
+  set (PACKAGE_VERSION "${PACKAGE_VERSION} (${REASON})")
+endif ()

From peifer at gmx.eu  Sat Feb 21 11:22:02 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat, 21 Feb 2015 20:22:02 +0100
Subject: [Proj] Proj 4.9.1RC3 Released
In-Reply-To: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
Message-ID: <54E8DADA.5070604@gmx.eu>

On 2015-02-21 18:31, Howard Butler wrote:
> All,
>
> Proj4 4.9.1RC3 is now released for testing. Should no significant issues be identified, ...
(...)
>>
>>   o Regenerate nad/epsg with GDAL r28536 to avoid precision loss in TOWGS84
>>     parameters, e.g. on Amersfoort / RD EPSG:4289 (#260)

No sure if this is significant, but instead of a precision loss for 
TOWGS84's X,Y,Z-offsets, there is now a "precision gain" for the 
rotation values in several cases, e.g. for the mentioned Amersfoort / RD 
EPSG:4289. I wonder if this is as it should be.

Hermann

$ diff -u  proj/nad/epsg proj-4.9.1/nad/epsg | grep -C4 "<4289>"
@@ -433,7 +433,7 @@
  # Loma Quintana
  <4288> +proj=longlat +ellps=intl +no_defs  <>
  # Amersfoort
-<4289> +proj=longlat +ellps=bessel 
+towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725 
+no_defs  <>
+<4289> +proj=longlat +ellps=bessel 
+towgs84=565.4171,50.3319,465.5524,-0.398957388243134,0.343987817378283,-1.87740163998045,4.0725 
+no_defs  <>
  # SAD69
...


From sebastic at xs4all.nl  Sat Feb 21 11:43:45 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Sat, 21 Feb 2015 20:43:45 +0100
Subject: [Proj] Proj 4.9.1RC3 Released
In-Reply-To: <54E8DADA.5070604@gmx.eu>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<54E8DADA.5070604@gmx.eu>
Message-ID: <54E8DFF1.9050202@xs4all.nl>

On 02/21/2015 08:22 PM, Hermann Peifer wrote:
> On 2015-02-21 18:31, Howard Butler wrote:
>> All,
>>
>> Proj4 4.9.1RC3 is now released for testing. Should no significant issues be identified, ...
> (...)
>>>
>>>   o Regenerate nad/epsg with GDAL r28536 to avoid precision loss in TOWGS84
>>>     parameters, e.g. on Amersfoort / RD EPSG:4289 (#260)
> 
> No sure if this is significant, but instead of a precision loss for 
> TOWGS84's X,Y,Z-offsets, there is now a "precision gain" for the 
> rotation values in several cases, e.g. for the mentioned Amersfoort / RD 
> EPSG:4289. I wonder if this is as it should be.

The Dutch Kadaster raised the issue about the imprecise +towsg84 values
for EPSG:28992 on the dutch OSGeo list. See the link included in #260.

https://trac.osgeo.org/proj/ticket/260
http://lists.osgeo.org/pipermail/dutch/2014-October/000980.html

The correct values specified by Kadaster use 6 decimals max:

+towgs84=565.4171,50.3319,465.5524,-0.398957,0.343988,-1.877402,4.0725

This used to be:

+towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725

And is now:

+towgs84=565.4171,50.3319,465.5524,-0.398957388243134,0.343987817378283,-1.87740163998045,4.0725

The "precision gain" is better than what we had before, but it may also
make sense to limit the number of decimals in GDAL a bit.

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From charles.karney at sri.com  Sat Feb 21 11:59:39 2015
From: charles.karney at sri.com (Charles Karney)
Date: Sat, 21 Feb 2015 14:59:39 -0500
Subject: [Proj] Proj 4.9.1RC3 Released
In-Reply-To: <54E8CCA4.90504@sri.com>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<54E8CCA4.90504@sri.com>
Message-ID: <54E8E3AB.2000100@sri.com>

This patch adds 3 files in the cmake directory.  The names need to be
added to EXTRA_DIST in cmake/Makefile.am, of course.  The files are

CMakeLists.txt project-config.cmake.in project-config-version.cmake.in

On 02/21/2015 01:21 PM, Charles Karney wrote:
> On 02/21/2015 12:31 PM, Howard Butler wrote:
>> All,
>>
>> Proj4 4.9.1RC3 is now released for testing. Should no significant
>> issues be identified, this is the last release candidate, and I will
>> motion the MetaCRS list to promote it to final on Wednesday.
>>
>> Thanks for testing the past two RC's.
>>
>> Howard
>>
>> http://download.osgeo.org/proj/proj-4.9.1RC3.tar.gz
>
> The attached patch addresses the following cmake issues:
>
> Set "build" and "api" versions on the libraries.  This way we end up
> with the same installed so files as with autoconf.
>
> Sets the CMAKE_BUILD_TYPE to Release (if not specified).
>
> Sets the rpath using the configured library path (instead of hardcoding
> "lib").
>
> Provides support for find_package(PROJ 4.9) as follows
>
>    The name of the package is "PROJ" (uppercase).
>
>    proj-config.cmake gets installed in share/cmake/PROJ (non Windows) or
>    cmake (Windows).
>
>    This defines (for example)
>      PROJ_FOUND = 1
>      PROJ_INCLUDE_DIRS = /usr/local/include
>      PROJ_LIBRARIES = proj
>      PROJ_LIBRARY_DIRS = /usr/local/lib
>      PROJ_BINARY_DIRS = /usr/local/bin
>      PROJ_VERSION = 4.9.1
>
>    Here proj is a "target" name which means that it inherits
>    dependencies, etc.
>
>    find_package will look under CMAKE_PREFIX_PATH for proj-config.cmake.
>
> There are no remaining issues for me (so far!).
>
>    --Charles
>



From peifer at gmx.eu  Sat Feb 21 12:46:57 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat, 21 Feb 2015 21:46:57 +0100
Subject: [Proj] Proj 4.9.1RC3 Released
In-Reply-To: <54E8DFF1.9050202@xs4all.nl>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>	<54E8DADA.5070604@gmx.eu>
	<54E8DFF1.9050202@xs4all.nl>
Message-ID: <54E8EEC1.6040608@gmx.eu>

On 2015-02-21 20:43, Sebastiaan Couwenberg wrote:
>
> The correct values specified by Kadaster use 6 decimals max:
>
> +towgs84=565.4171,50.3319,465.5524,-0.398957,0.343988,-1.877402,4.0725
>
> This used to be:
>
> +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725
>
> And is now:
>
> +towgs84=565.4171,50.3319,465.5524,-0.398957388243134,0.343987817378283,-1.87740163998045,4.0725
>
> The "precision gain" is better than what we had before, but it may also
> make sense to limit the number of decimals in GDAL a bit.
>

As far as I can see: the EPSG database has Coordinate Frame Rotation 
values in microradian, see: 
http://epsg-registry.org/export.htm?wkt=urn:ogc:def:coordinateOperation:EPSG::4830

If one reverts the sign, converts to arc seconds and prints the result 
with "%.15g" format, one ends up with what the values are now, e.g.
rX = 1.9342 microradian => -0.398957388243134 arc seconds

The result does indeed look a bit like having some overprecision.

Hermann



From even.rouault at spatialys.com  Sat Feb 21 12:49:41 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 21 Feb 2015 21:49:41 +0100
Subject: [Proj] Proj 4.9.1RC3 Released
In-Reply-To: <54E8DFF1.9050202@xs4all.nl>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<54E8DADA.5070604@gmx.eu> <54E8DFF1.9050202@xs4all.nl>
Message-ID: <201502212149.41673.even.rouault@spatialys.com>

Le samedi 21 février 2015 20:43:45, Sebastiaan Couwenberg a écrit :
> On 02/21/2015 08:22 PM, Hermann Peifer wrote:
> > On 2015-02-21 18:31, Howard Butler wrote:
> >> All,
> >> 
> >> Proj4 4.9.1RC3 is now released for testing. Should no significant issues
> >> be identified, ...
> > 
> > (...)
> > 
> >>>   o Regenerate nad/epsg with GDAL r28536 to avoid precision loss in
> >>>   TOWGS84
> >>>   
> >>>     parameters, e.g. on Amersfoort / RD EPSG:4289 (#260)
> > 
> > No sure if this is significant, but instead of a precision loss for
> > TOWGS84's X,Y,Z-offsets, there is now a "precision gain" for the
> > rotation values in several cases, e.g. for the mentioned Amersfoort / RD
> > EPSG:4289. I wonder if this is as it should be.
> 
> The Dutch Kadaster raised the issue about the imprecise +towsg84 values
> for EPSG:28992 on the dutch OSGeo list. See the link included in #260.
> 
> https://trac.osgeo.org/proj/ticket/260
> http://lists.osgeo.org/pipermail/dutch/2014-October/000980.html
> 
> The correct values specified by Kadaster use 6 decimals max:
> 
> +towgs84=565.4171,50.3319,465.5524,-0.398957,0.343988,-1.877402,4.0725
> 
> This used to be:
> 
> +towgs84=565.417,50.3319,465.552,-0.398957,0.343988,-1.8774,4.0725
> 
> And is now:
> 
> +towgs84=565.4171,50.3319,465.5524,-0.398957388243134,0.343987817378283,-1.
> 87740163998045,4.0725
> 
> The "precision gain" is better than what we had before, but it may also
> make sense to limit the number of decimals in GDAL a bit.

GDAL nows takes the TOWGS84 components as the exact strings found in the CSV 
file produced by the libgeotiff process. 
So if truncation should be done it would be in the importer from the EPSG 
database in libgeotiff. The many decimals likely come from the conversion from 
milliradians (since it seems that the unit used by the EPSG database) to 
whatever unit is used in towgs84. They are likely not harmful.

> 
> Kind Regards,
> 
> Bas

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com


From howard at hobu.co  Sat Feb 21 13:31:42 2015
From: howard at hobu.co (Howard Butler)
Date: Sat, 21 Feb 2015 15:31:42 -0600
Subject: [Proj] Proj 4.9.1RC3 Released
In-Reply-To: <54E8E3AB.2000100@sri.com>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<54E8CCA4.90504@sri.com> <54E8E3AB.2000100@sri.com>
Message-ID: <A6B36D24-B893-4DFF-9BAF-28B1B15518BB@hobu.co>


> On Feb 21, 2015, at 1:59 PM, Charles Karney <charles.karney at sri.com> wrote:
> 
> This patch adds 3 files in the cmake directory.  The names need to be
> added to EXTRA_DIST in cmake/Makefile.am, of course.  The files are
> 
> CMakeLists.txt project-config.cmake.in project-config-version.cmake.in

Was there a specific reason this patch puts back the project VERSION target properties that I removed in r2969 [1]?

https://trac.osgeo.org/proj/changeset/2629/trunk/proj

We didn't want this due to it creating SOVERSION and file version names that are misaligned with what the libtool stuff does.

Howard

From charles.karney at sri.com  Sat Feb 21 16:10:18 2015
From: charles.karney at sri.com (Charles Karney)
Date: Sat, 21 Feb 2015 19:10:18 -0500
Subject: [Proj] Proj 4.9.1RC3 Released
In-Reply-To: <A6B36D24-B893-4DFF-9BAF-28B1B15518BB@hobu.co>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<54E8CCA4.90504@sri.com> <54E8E3AB.2000100@sri.com>
	<A6B36D24-B893-4DFF-9BAF-28B1B15518BB@hobu.co>
Message-ID: <54E91E6A.5020802@sri.com>

On 02/21/2015 04:31 PM, Howard Butler wrote:
>
>> On Feb 21, 2015, at 1:59 PM, Charles Karney <charles.karney at sri.com> wrote:
>>
>> This patch adds 3 files in the cmake directory.  The names need to be
>> added to EXTRA_DIST in cmake/Makefile.am, of course.  The files are
>>
>> CMakeLists.txt project-config.cmake.in project-config-version.cmake.in
>
> Was there a specific reason this patch puts back the project VERSION target properties that I removed in r2969 [1]?
>
> https://trac.osgeo.org/proj/changeset/2629/trunk/proj
>
> We didn't want this due to it creating SOVERSION and file version names that are misaligned with what the libtool stuff does.
>
> Howard
>

I'm explicitly trying to mimic the behavior of libtool here using the 2
versions that cmake offers.  Here's what the so libraries look like:

   autoconf

     lrwxrwxrwx.  libproj.so -> libproj.so.9.0.0
     lrwxrwxrwx.  libproj.so.9 -> libproj.so.9.0.0
     -rwxr-xr-x.  libproj.so.9.0.0

   cmake (before my patch)

     lrwxrwxrwx.  libproj.so -> libproj.so.9.0.0
     -rwxr-xr-x.  libproj.so.9.0.0

   cmake (with my patch)

     lrwxrwxrwx.  libproj.so -> libproj.so.9
     lrwxrwxrwx.  libproj.so.9 -> libproj.so.9.0.0
     -rwxr-xr-x.  libproj.so.9.0.0

There's some benefit in trying to keep the shared libraries consistent
between builds so that an executable can reliably find the necessary
shared libraries at runtime.

How do I know what numbers to put for the versions in CMakeLists.txt?  I
run the autoconf build and look at the resulting versions on the
installed libraries.

Incidentally, if I build an application linking against proj using
cmake, the shared library it looks for (after the patch) is
libproj.so.9.  This means that a later API-compatible version with bug
fixes can be installed as

     lrwxrwxrwx.  libproj.so -> libproj.so.9
     lrwxrwxrwx.  libproj.so.9 -> libproj.so.9.0.1
     -rwxr-xr-x.  libproj.so.9.0.0
     -rwxr-xr-x.  libproj.so.9.0.1

and the application automatically will switch to the new version.

However this isn't a big deal, and I can back out of this change if you
like.

   --Charles


From howard at hobu.co  Sun Feb 22 14:55:43 2015
From: howard at hobu.co (Howard Butler)
Date: Sun, 22 Feb 2015 16:55:43 -0600
Subject: [Proj] Proj 4.9.1RC3 Released
In-Reply-To: <54E91E6A.5020802@sri.com>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<54E8CCA4.90504@sri.com> <54E8E3AB.2000100@sri.com>
	<A6B36D24-B893-4DFF-9BAF-28B1B15518BB@hobu.co>
	<54E91E6A.5020802@sri.com>
Message-ID: <94185744-AA92-431C-B6EE-D2BBCF2697B5@hobu.co>


> On Feb 21, 2015, at 6:10 PM, Charles Karney <charles.karney at sri.com> wrote:
> 
> On 02/21/2015 04:31 PM, Howard Butler wrote:
>> 
>>> On Feb 21, 2015, at 1:59 PM, Charles Karney <charles.karney at sri.com> wrote:
>>> 
>>> This patch adds 3 files in the cmake directory.  The names need to be
>>> added to EXTRA_DIST in cmake/Makefile.am, of course.  The files are
>>> 
>>> CMakeLists.txt project-config.cmake.in project-config-version.cmake.in
>> 
>> Was there a specific reason this patch puts back the project VERSION target properties that I removed in r2969 [1]?
>> 
>> https://trac.osgeo.org/proj/changeset/2629/trunk/proj
>> 
>> We didn't want this due to it creating SOVERSION and file version names that are misaligned with what the libtool stuff does.
>> 
>> Howard
>> 
> 
> I'm explicitly trying to mimic the behavior of libtool here using the 2
> versions that cmake offers.  Here's what the so libraries look like:
> 
>  autoconf
> 
>    lrwxrwxrwx.  libproj.so -> libproj.so.9.0.0
>    lrwxrwxrwx.  libproj.so.9 -> libproj.so.9.0.0
>    -rwxr-xr-x.  libproj.so.9.0.0
> 
>  cmake (before my patch)
> 
>    lrwxrwxrwx.  libproj.so -> libproj.so.9.0.0
>    -rwxr-xr-x.  libproj.so.9.0.0
> 
>  cmake (with my patch)
> 
>    lrwxrwxrwx.  libproj.so -> libproj.so.9
>    lrwxrwxrwx.  libproj.so.9 -> libproj.so.9.0.0
>    -rwxr-xr-x.  libproj.so.9.0.0
> 
> There's some benefit in trying to keep the shared libraries consistent
> between builds so that an executable can reliably find the necessary
> shared libraries at runtime.
> 
> How do I know what numbers to put for the versions in CMakeLists.txt?  I
> run the autoconf build and look at the resulting versions on the
> installed libraries.
> 
> Incidentally, if I build an application linking against proj using
> cmake, the shared library it looks for (after the patch) is
> libproj.so.9.  This means that a later API-compatible version with bug
> fixes can be installed as
> 
>    lrwxrwxrwx.  libproj.so -> libproj.so.9
>    lrwxrwxrwx.  libproj.so.9 -> libproj.so.9.0.1
>    -rwxr-xr-x.  libproj.so.9.0.0
>    -rwxr-xr-x.  libproj.so.9.0.1
> 
> and the application automatically will switch to the new version.
> 
> However this isn't a big deal, and I can back out of this change if you
> like.

Yes, the SOVERSION target properties set to match libtool is just fine. It's that there's also a CMake VERSION target property that causes a libproj.4.9.1.so link to be created as well. I assume we don't want that (it's different behavior than the libtool build).

Howard



From howard at hobu.co  Sun Feb 22 15:03:26 2015
From: howard at hobu.co (Howard Butler)
Date: Sun, 22 Feb 2015 17:03:26 -0600
Subject: [Proj] Proj 4.9.1RC3 Released
In-Reply-To: <94185744-AA92-431C-B6EE-D2BBCF2697B5@hobu.co>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<54E8CCA4.90504@sri.com> <54E8E3AB.2000100@sri.com>
	<A6B36D24-B893-4DFF-9BAF-28B1B15518BB@hobu.co>
	<54E91E6A.5020802@sri.com>
	<94185744-AA92-431C-B6EE-D2BBCF2697B5@hobu.co>
Message-ID: <571102B1-62D2-460E-982F-A35CD39A134F@hobu.co>


> On Feb 22, 2015, at 4:55 PM, Howard Butler <howard at hobu.co> wrote:
>> 
>> However this isn't a big deal, and I can back out of this change if you
>> like.
> 
> Yes, the SOVERSION target properties set to match libtool is just fine. It's that there's also a CMake VERSION target property that causes a libproj.4.9.1.so link to be created as well. I assume we don't want that (it's different behavior than the libtool build).

I misspoke. The patch outputs correctly. Sorry for my confusion. 

I'll issue RC4 in tomorrow morning.

Howard

From gdt at ir.bbn.com  Sun Feb 22 16:52:17 2015
From: gdt at ir.bbn.com (Greg Troxel)
Date: Sun, 22 Feb 2015 19:52:17 -0500
Subject: [Proj] Proj 4.9.1RC3 Released
In-Reply-To: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co> (Howard Butler's
	message of "Sat, 21 Feb 2015 11:31:23 -0600")
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
Message-ID: <rmi61atv48u.fsf@fnord.ir.bbn.com>


Thanks for pushing out 4.9.1RC3.  I am the maintainer for the proj entry
in pkgsrc, a multi-OS packaging system.

4.9.1RC3 works fine (with the nit that it unpacks to proj-4.9.1 without
the RC3).  However, make check has a failure, which looks like overly
aggressive asumptions about floating point math.  This is on netbsd-6
i386, and I don't remember if that uses extended doubles or not.

----------------------------------------
=> Bootstrap dependency digest>=20010302: found digest-20121220
===> Testing for proj-4.9.1RC3
Making check in src
gmake[1]: Entering directory '/u0/n0/gdt/NetBSD-current/pkgsrc/geography/proj/work/proj-4.9.1/src'
gmake[1]: Leaving directory '/u0/n0/gdt/NetBSD-current/pkgsrc/geography/proj/work/proj-4.9.1/src'
Making check in man
gmake[1]: Entering directory '/u0/n0/gdt/NetBSD-current/pkgsrc/geography/proj/work/proj-4.9.1/man'
Making check in man1
gmake[2]: Entering directory '/u0/n0/gdt/NetBSD-current/pkgsrc/geography/proj/work/proj-4.9.1/man/man1'
gmake[2]: Nothing to be done for 'check'.
gmake[2]: Leaving directory '/u0/n0/gdt/NetBSD-current/pkgsrc/geography/proj/work/proj-4.9.1/man/man1'
Making check in man3
gmake[2]: Entering directory '/u0/n0/gdt/NetBSD-current/pkgsrc/geography/proj/work/proj-4.9.1/man/man3'
gmake[2]: Nothing to be done for 'check'.
gmake[2]: Leaving directory '/u0/n0/gdt/NetBSD-current/pkgsrc/geography/proj/work/proj-4.9.1/man/man3'
gmake[2]: Entering directory '/u0/n0/gdt/NetBSD-current/pkgsrc/geography/proj/work/proj-4.9.1/man'
gmake[2]: Nothing to be done for 'check-am'.
gmake[2]: Leaving directory '/u0/n0/gdt/NetBSD-current/pkgsrc/geography/proj/work/proj-4.9.1/man'
gmake[1]: Leaving directory '/u0/n0/gdt/NetBSD-current/pkgsrc/geography/proj/work/proj-4.9.1/man'
Making check in nad
gmake[1]: Entering directory '/u0/n0/gdt/NetBSD-current/pkgsrc/geography/proj/work/proj-4.9.1/nad'
/usr/pkg/bin/gmake  check-local
gmake[2]: Entering directory '/u0/n0/gdt/NetBSD-current/pkgsrc/geography/proj/work/proj-4.9.1/nad'
../nad/test27 ../src/proj
============================================
Running ../nad/test27 using ../src/proj:
============================================
doing tests into file proj_out27, please wait
diff proj_out27 with pj_out27.dist
TEST OK
test file proj_out27 removed

../nad/test83 ../src/proj
============================================
Running ../nad/test83 using ../src/proj:
============================================
doing tests into file proj_out83, please wait
diff proj_out83 with pj_out83.dist
TEST OK
test file proj_out83 removed

PROJ_LIB=. ../nad/testvarious ../src/cs2cs
============================================
Running ../nad/testvarious using ../src/cs2cs:
============================================
doing tests into file tv_out, please wait
Rel. 4.9.1, 17 February 2015
<cs2cs>: while processing file: <stdin>, line 1
pj_transform(): invalid x or y
Rel. 4.9.1, 17 February 2015
<cs2cs>: while processing file: <stdin>, line 2
pj_transform(): acos/asin: |arg| >1.+1e-14
diff tv_out with tv_out.dist
294c294
< 16.33 48.20	595710.37321015039925	5357598.46457545924932 -44.49510847218335
---
> 16.33 48.20	595710.37321015028283	5357598.46457545924932 -44.49510847218335
313c313
< 13 -10	2073986.9490880956873	-1680858.2722242793534 0.0000000000000
---
> 13 -10	2073986.9490880956873	-1680858.2722242795862 0.0000000000000

PROBLEMS HAVE OCCURED
test file tv_out saved

Makefile:541: recipe for target 'check-local' failed
gmake[2]: *** [check-local] Error 100
gmake[2]: Leaving directory '/u0/n0/gdt/NetBSD-current/pkgsrc/geography/proj/work/proj-4.9.1/nad'
Makefile:386: recipe for target 'check-am' failed
gmake[1]: *** [check-am] Error 2
gmake[1]: Leaving directory '/u0/n0/gdt/NetBSD-current/pkgsrc/geography/proj/work/proj-4.9.1/nad'
Makefile:428: recipe for target 'check-recursive' failed
gmake: *** [check-recursive] Error 1
*** Error code 2

Stop.
make: stopped in /u0/n0/gdt/NetBSD-current/pkgsrc/geography/proj
*** Error code 1

Stop.
make: stopped in /usr/pkgsrc/geography/proj
----------------------------------------
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 180 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150222/bdaf955e/attachment.sig>

From gdt at ir.bbn.com  Sun Feb 22 16:52:56 2015
From: gdt at ir.bbn.com (Greg Troxel)
Date: Sun, 22 Feb 2015 19:52:56 -0500
Subject: [Proj] Proj 4.9.1RC3 Released
In-Reply-To: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co> (Howard Butler's
	message of "Sat, 21 Feb 2015 11:31:23 -0600")
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
Message-ID: <rmi1tlhv47r.fsf@fnord.ir.bbn.com>


Here's a patch to the README to explain about tests.  This has been in
pkgsrc for several years.

----------------------------------------
$NetBSD: patch-README,v 1.1 2012/03/14 23:36:06 gdt Exp $

Sent upstream by email 20120309.

--- README.orig	2010-12-05 16:06:32.000000000 +0000
+++ README
@@ -40,6 +40,13 @@ After executing configure, execute:
 
 The install target will create, if necessary, all required sub-directories.
 
+To test, execute:
+
+	make check
+
+Note that you must have installed proj-datumgrid-1.5 in nad prior to
+building; the test suite includes grid shift tests.
+
 Windows Build
 -------------
 

----------------------------------------
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 180 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150222/e7c116b4/attachment.sig>

From sebastic at xs4all.nl  Sun Feb 22 22:46:26 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Mon, 23 Feb 2015 07:46:26 +0100
Subject: [Proj] Proj 4.9.1RC3 Released
In-Reply-To: <rmi61atv48u.fsf@fnord.ir.bbn.com>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<rmi61atv48u.fsf@fnord.ir.bbn.com>
Message-ID: <54EACCC2.1000408@xs4all.nl>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

On 02/23/2015 01:52 AM, Greg Troxel wrote:
> 4.9.1RC3 works fine (with the nit that it unpacks to proj-4.9.1
> without the RC3).  However, make check has a failure, which looks
> like overly aggressive asumptions about floating point math.  This
> is on netbsd-6 i386, and I don't remember if that uses extended
> doubles or not.

Those three tests fail on more architectures, see:

https://trac.osgeo.org/proj/ticket/255

Kind Regards,

Bas

- -- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCgAGBQJU6szBAAoJEGdQ8QrojUrx7x8P/00/KqkDpfF8lYhgVf7rJIMi
rw18j8/Sg1ukkBbIKS4XKbq9AJXSzGYMr9pVMFpdMfrKxQO2lhats2VqRKV2PUCE
Rv4cfsDMGy889+g4SSSXx5aaakzG6NBlXMGiy1SvXSfhD+AK99c4bMAitZLnjZuy
sIMueu0UIjQ6AIko3EBNsDCZ35heh9OrzUR5OaUGKizWrOroEz36NWCJjqIdLwl7
E/WUs3qEi3NkeoKLyI/s7dLoUa2EOBMZSM0vMtUmW4x9X4a1cvMTcm9VaS2/r7ow
6WC0OO85g9cISNew+axENYGLuCjyTUF7I1IzsxIYa+EYDM23Zj4rj7O/fRkSEF6A
WQb4hFCCbJqQgVyxgpfKnZzbq4sUaRJgcFs+PQuVOTqmyB5E3SGqqq9dPemA4X4t
K2+7WzXewUTkDna6gkBBYFKcd6X+SRt4+/2/JjSZIX6mHsMdEceHGaMiQvsAMvo6
o6vkWlNgCSSGC3/OvSg1ySka0bSiXiuGFxtK2t/upI4Yx6m1iz2kESUAN0i5ypbN
007Gp3K3vrP27xY3IadsYJ4vaybCDU3+NpqKliq1CBuPO7A9pJStIq5f+FqhhEXN
c7FxdnAf2mBTzVZiooZFdGotvcLD4Uu8HREmuApabXcm3ulLXXVZhbMPWGv0cxJw
3Y15mc+9LK1cSlYH0MDX
=tSsk
-----END PGP SIGNATURE-----


From howard at hobu.co  Mon Feb 23 05:41:09 2015
From: howard at hobu.co (Howard Butler)
Date: Mon, 23 Feb 2015 07:41:09 -0600
Subject: [Proj] Proj 4.9.1RC3 Released
In-Reply-To: <54EACCC2.1000408@xs4all.nl>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<rmi61atv48u.fsf@fnord.ir.bbn.com> <54EACCC2.1000408@xs4all.nl>
Message-ID: <A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>


> On Feb 23, 2015, at 12:46 AM, Sebastiaan Couwenberg <sebastic at xs4all.nl> wrote:
> 
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA512
> 
> On 02/23/2015 01:52 AM, Greg Troxel wrote:
>> 4.9.1RC3 works fine (with the nit that it unpacks to proj-4.9.1
>> without the RC3).  However, make check has a failure, which looks
>> like overly aggressive asumptions about floating point math.  This
>> is on netbsd-6 i386, and I don't remember if that uses extended
>> doubles or not.
> 
> Those three tests fail on more architectures, see:
> 
> https://trac.osgeo.org/proj/ticket/255

I propose we dial back the precision on the test as Frank suggested. 

Howard

From sebastic at xs4all.nl  Mon Feb 23 06:04:11 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Mon, 23 Feb 2015 15:04:11 +0100
Subject: [Proj] Proj 4.9.1RC3 Released
In-Reply-To: <A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<rmi61atv48u.fsf@fnord.ir.bbn.com> <54EACCC2.1000408@xs4all.nl>
	<A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>
Message-ID: <6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>

>> On Feb 23, 2015, at 12:46 AM, Sebastiaan Couwenberg <sebastic at xs4all.nl>
>> wrote:
>> On 02/23/2015 01:52 AM, Greg Troxel wrote:
>>> 4.9.1RC3 works fine (with the nit that it unpacks to proj-4.9.1
>>> without the RC3).  However, make check has a failure, which looks
>>> like overly aggressive asumptions about floating point math.  This
>>> is on netbsd-6 i386, and I don't remember if that uses extended
>>> doubles or not.
>>
>> Those three tests fail on more architectures, see:
>>
>> https://trac.osgeo.org/proj/ticket/255
>
> I propose we dial back the precision on the test as Frank suggested.

That's probably the best short term solution, yes.

Kind Regards,

Bas



From charles.karney at sri.com  Mon Feb 23 07:06:01 2015
From: charles.karney at sri.com (Charles Karney)
Date: Mon, 23 Feb 2015 10:06:01 -0500
Subject: [Proj] Proj 4.9.1RC3 Released
In-Reply-To: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
Message-ID: <54EB41D9.3000301@sri.com>

I've tested proj svn trunk (r2633) and can report that proj builds with
cmake with Linux and Windows (Visual Studio 10,11,12 Win64).  With
Visual Studio 11 and 12, there's a complaint about an unknown compiler,
but this just in the attempt to provide feedback to the user and cmake
compiles the code fine.  To get rid of the complaint (at least until
Visual Studio 2015 comes out), apply the following patch...


On 2015-02-21 12:31, Howard Butler wrote:
> All,
>
> Proj4 4.9.1RC3 is now released for testing. Should no significant issues be identified, this is the last release candidate, and I will motion the MetaCRS list to promote it to final on Wednesday.
>
> Thanks for testing the past two RC's.
>
> Howard
>
> http://download.osgeo.org/proj/proj-4.9.1RC3.tar.gz
>
-------------- next part --------------
Index: cmake/Proj4SystemInfo.cmake
===================================================================
--- cmake/Proj4SystemInfo.cmake	(revision 2633)
+++ cmake/Proj4SystemInfo.cmake	(working copy)
@@ -44,6 +44,12 @@
     if(MSVC_VERSION EQUAL 1600)
       set(PROJ_COMPILER_NAME "msvc-10.0") #Visual Studio 2010
     endif()
+    if(MSVC_VERSION EQUAL 1700)
+      set(PROJ_COMPILER_NAME "msvc-11.0") #Visual Studio 2012
+    endif()
+    if(MSVC_VERSION EQUAL 1800)
+      set(PROJ_COMPILER_NAME "msvc-12.0") #Visual Studio 2013
+    endif()
   endif(MSVC)
   
   if(MINGW)

From charles.karney at sri.com  Mon Feb 23 07:22:19 2015
From: charles.karney at sri.com (Charles Karney)
Date: Mon, 23 Feb 2015 10:22:19 -0500
Subject: [Proj] Proj 4.9.1RC3 Released, status of invgeod and invproj
In-Reply-To: <54EB41D9.3000301@sri.com>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<54EB41D9.3000301@sri.com>
Message-ID: <54EB45AB.3050402@sri.com>

One other minor problem I should report with the cmake installation is
that links in the bin directory

   invgeod -> geod
   invproj -> proj

are not created.  It's a little ugly to get cmake to create these links
and I'm not sure how useful they are in any case, since

  * these are just for geod -I and proj -I
  * presumably this shortcut was never available for Windows users

I propose not worrying about this until after 4.9.1 is released (if
then).

Alternatively one possible action it might be worth taking now is to
deprecate the use of these links by removing any mention of them in the
proj.1 and geod.1 man pages.  But doing nothing is also OK!

   --Charles

On 2015-02-23 10:06, Charles Karney wrote:
> I've tested proj svn trunk (r2633) and can report that proj builds with
> cmake with Linux and Windows (Visual Studio 10,11,12 Win64).  With
> Visual Studio 11 and 12, there's a complaint about an unknown compiler,
> but this just in the attempt to provide feedback to the user and cmake
> compiles the code fine.  To get rid of the complaint (at least until
> Visual Studio 2015 comes out), apply the following patch...
>
>
> On 2015-02-21 12:31, Howard Butler wrote:
>> All,
>>
>> Proj4 4.9.1RC3 is now released for testing. Should no significant
>> issues be identified, this is the last release candidate, and I will
>> motion the MetaCRS list to promote it to final on Wednesday.
>>
>> Thanks for testing the past two RC's.
>>
>> Howard
>>
>> http://download.osgeo.org/proj/proj-4.9.1RC3.tar.gz
>>

-- 
Charles Karney <charles.karney at sri.com>
SRI International, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662


From charles.karney at sri.com  Mon Feb 23 07:27:34 2015
From: charles.karney at sri.com (Charles Karney)
Date: Mon, 23 Feb 2015 10:27:34 -0500
Subject: [Proj] Proj 4.9.1RC3 Released, status of invgeod and invproj
In-Reply-To: <54EB45AB.3050402@sri.com>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<54EB41D9.3000301@sri.com> <54EB45AB.3050402@sri.com>
Message-ID: <54EB46E6.2090806@sri.com>

An argument for deprecating the links is:

   http://www.gnu.org/prep/standards/standards.html#User-Interfaces

"Please don’t make the behavior of a utility depend on the name used to
invoke it. It is useful sometimes to make a link to a utility with a
different name, and that should not change what it does."

   --Charles

On 2015-02-23 10:22, Charles Karney wrote:
> One other minor problem I should report with the cmake installation is
> that links in the bin directory
>
>    invgeod -> geod
>    invproj -> proj
>
> are not created.  It's a little ugly to get cmake to create these links
> and I'm not sure how useful they are in any case, since
>
>   * these are just for geod -I and proj -I
>   * presumably this shortcut was never available for Windows users
>
> I propose not worrying about this until after 4.9.1 is released (if
> then).
>
> Alternatively one possible action it might be worth taking now is to
> deprecate the use of these links by removing any mention of them in the
> proj.1 and geod.1 man pages.  But doing nothing is also OK!
>
>    --Charles


From ed at eweber.net  Mon Feb 23 09:51:37 2015
From: ed at eweber.net (ed at eweber.net)
Date: Mon, 23 Feb 2015 09:51:37 -0800
Subject: [Proj] Proj 4.9.1RC3 Released
Message-ID: <94DE5E61FA464E389D30FEF230F9B432@mail2world.com>

Hi Howard and all,
I have a small suggested addition to the 4.9.1 Release Notes. It would
be nice to add a bullet:
o Added the CalCOFI pseudo-projection, #135
I'm very happy that this will be released soon. Thanks for your help,
Ed
Edward D. Weber, Ph.D.
Research Fisheries Biologist
NOAA Southwest Fisheries Science Center
8601 La Jolla Shores Drive
La Jolla, CA 92037, U.S.A.
(858) 546-5676
ed.weber at noaa.gov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150223/96ac300b/attachment.html>

From jennyb at geo.oregonstate.edu  Mon Feb 23 20:03:47 2015
From: jennyb at geo.oregonstate.edu (Bernhard Jenny)
Date: Mon, 23 Feb 2015 20:03:47 -0800
Subject: [Proj] Patterson and Compact Miller projections
Message-ID: <105273C9-74DD-4AA9-8DA4-417E87549275@geo.oregonstate.edu>

All,

Attached is code for the Patterson and the Compact Miller projections for addition to PROJ.4.

The Patterson projection is a cylindrical described here: http://shadedrelief.com/patterson/
Also see Ticket #252: http://trac.osgeo.org/proj/ticket/252 

The Compact Miller is another cylindrical described in this paper: http://cartography.oregonstate.edu/pdf/2015_Jenny_etal_ACompromiseAspect-adaptiveCylindricalProjectionForWorldMaps.pdf

Below are a few test points for both projections.

Thank you,
Bernie Jenny

Assistant Professor
Cartography and Geovisualization
Oregon State University
jennyb at geo.oregonstate.edu
http://cartography.oregonstate.edu/



Patterson projection (lon, lat, 0, X, Y):

0 0.0 0 0.0 0.0
0 22.5 0 0.0 2551415.729669344
0 45.0 0 0.0 5366413.421153781
0 67.5 0 0.0 8729502.054111844
0 90.0 0 0.0 1.1409566822831295E7
45 0.0 0 5003778.588046594 0.0
45 22.5 0 5003778.588046594 2551415.729669344
45 45.0 0 5003778.588046594 5366413.421153781
45 67.5 0 5003778.588046594 8729502.054111844
45 90.0 0 5003778.588046594 1.1409566822831295E7
90 0.0 0 1.0007557176093187E7 0.0
90 22.5 0 1.0007557176093187E7 2551415.729669344
90 45.0 0 1.0007557176093187E7 5366413.421153781
90 67.5 0 1.0007557176093187E7 8729502.054111844
90 90.0 0 1.0007557176093187E7 1.1409566822831295E7
135 0.0 0 1.501133576413978E7 0.0
135 22.5 0 1.501133576413978E7 2551415.729669344
135 45.0 0 1.501133576413978E7 5366413.421153781
135 67.5 0 1.501133576413978E7 8729502.054111844
135 90.0 0 1.501133576413978E7 1.1409566822831295E7
180 0.0 0 2.0015114352186374E7 0.0
180 22.5 0 2.0015114352186374E7 2551415.729669344
180 45.0 0 2.0015114352186374E7 5366413.421153781
180 67.5 0 2.0015114352186374E7 8729502.054111844
180 90.0 0 2.0015114352186374E7 1.1409566822831295E7

Compact Miller (lon, lat, 0, X, Y):

0 0.0 0 0.0 0.0
0 22.5 0 0.0 2537439.6610749415
0 45.0 0 0.0 5391682.432264133
0 67.5 0 0.0 8661480.510260897
0 90.0 0 0.0 1.2009484264916677E7
45 0.0 0 5003778.588046594 0.0
45 22.5 0 5003778.588046594 2537439.6610749415
45 45.0 0 5003778.588046594 5391682.432264133
45 67.5 0 5003778.588046594 8661480.510260897
45 90.0 0 5003778.588046594 1.2009484264916677E7
90 0.0 0 1.0007557176093187E7 0.0
90 22.5 0 1.0007557176093187E7 2537439.6610749415
90 45.0 0 1.0007557176093187E7 5391682.432264133
90 67.5 0 1.0007557176093187E7 8661480.510260897
90 90.0 0 1.0007557176093187E7 1.2009484264916677E7
135 0.0 0 1.501133576413978E7 0.0
135 22.5 0 1.501133576413978E7 2537439.6610749415
135 45.0 0 1.501133576413978E7 5391682.432264133
135 67.5 0 1.501133576413978E7 8661480.510260897
135 90.0 0 1.501133576413978E7 1.2009484264916677E7
180 0.0 0 2.0015114352186374E7 0.0
180 22.5 0 2.0015114352186374E7 2537439.6610749415
180 45.0 0 2.0015114352186374E7 5391682.432264133
180 67.5 0 2.0015114352186374E7 8661480.510260897
180 90.0 0 2.0015114352186374E7 1.2009484264916677E7

-------------- next part --------------
A non-text attachment was scrubbed...
Name: PJ_comill.c
Type: application/octet-stream
Size: 1345 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150223/1c3a1bf8/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PJ_patterson.c
Type: application/octet-stream
Size: 1443 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150223/1c3a1bf8/attachment-0001.obj>
-------------- next part --------------


From howard at hobu.co  Tue Feb 24 13:28:05 2015
From: howard at hobu.co (Howard Butler)
Date: Tue, 24 Feb 2015 15:28:05 -0600
Subject: [Proj] Proj 4.9.1RC4 Released
In-Reply-To: <6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<rmi61atv48u.fsf@fnord.ir.bbn.com> <54EACCC2.1000408@xs4all.nl>
	<A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>
	<6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>
Message-ID: <4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>


> On Feb 23, 2015, at 8:04 AM, Sebastiaan Couwenberg <sebastic at xs4all.nl> wrote:
> 
>>> https://trac.osgeo.org/proj/ticket/255
>> 
>> I propose we dial back the precision on the test as Frank suggested.
> 
> That's probably the best short term solution, yes.

I have issued RC4 to address this issue.

http://download.osgeo.org/proj/proj-4.9.1RC4.tar.gz

Howard

From sebastic at xs4all.nl  Tue Feb 24 14:11:06 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 24 Feb 2015 23:11:06 +0100
Subject: [Proj] Proj 4.9.1RC4 Released
In-Reply-To: <4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>	<rmi61atv48u.fsf@fnord.ir.bbn.com>
	<54EACCC2.1000408@xs4all.nl>	<A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>	<6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>
	<4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>
Message-ID: <54ECF6FA.9040002@xs4all.nl>

On 02/24/2015 10:28 PM, Howard Butler wrote:
>> On Feb 23, 2015, at 8:04 AM, Sebastiaan Couwenberg <sebastic at xs4all.nl> wrote:
>>>> https://trac.osgeo.org/proj/ticket/255
>>>
>>> I propose we dial back the precision on the test as Frank suggested.
>>
>> That's probably the best short term solution, yes.
> 
> I have issued RC4 to address this issue.

Still fails on i386 at least, see:

https://trac.osgeo.org/proj/ticket/255#comment:5

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From gdt at ir.bbn.com  Tue Feb 24 19:00:13 2015
From: gdt at ir.bbn.com (Greg Troxel)
Date: Tue, 24 Feb 2015 22:00:13 -0500
Subject: [Proj] Proj 4.9.1RC4 Released
In-Reply-To: <4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co> (Howard Butler's
	message of "Tue, 24 Feb 2015 15:28:05 -0600")
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<rmi61atv48u.fsf@fnord.ir.bbn.com> <54EACCC2.1000408@xs4all.nl>
	<A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>
	<6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>
	<4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>
Message-ID: <rmih9uan1aa.fsf@fnord.ir.bbn.com>


netbsd-6 i386:

diff tv_out with tv_out.dist
313c313
< 13 -10        2073986.9490880956873   -1680858.2722242793534 0.0000000000000
---
> 13 -10        2073986.9490880956873   -1680858.2722242795862 0.0000000000000

I am getting the same answer as the debian i386 boxes, I think.

This seems to be two parts in 10^16, and it seems unreasonable to expect
that from doubles after actual computation.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 180 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150224/e1044fe9/attachment.sig>

From howard at hobu.co  Tue Feb 24 20:24:10 2015
From: howard at hobu.co (Howard Butler)
Date: Tue, 24 Feb 2015 22:24:10 -0600
Subject: [Proj] Proj 4.9.1RC4 Released
In-Reply-To: <rmih9uan1aa.fsf@fnord.ir.bbn.com>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<rmi61atv48u.fsf@fnord.ir.bbn.com> <54EACCC2.1000408@xs4all.nl>
	<A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>
	<6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>
	<4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>
	<rmih9uan1aa.fsf@fnord.ir.bbn.com>
Message-ID: <E6E7F65B-3218-4C29-96A4-B6D557451E5A@hobu.co>


> On Feb 24, 2015, at 9:00 PM, Greg Troxel <gdt at ir.bbn.com> wrote:
> 
> 
> netbsd-6 i386:
> 
> diff tv_out with tv_out.dist
> 313c313
> < 13 -10        2073986.9490880956873   -1680858.2722242793534 0.0000000000000
> ---
>> 13 -10        2073986.9490880956873   -1680858.2722242795862 0.0000000000000
> 
> I am getting the same answer as the debian i386 boxes, I think.
> 
> This seems to be two parts in 10^16, and it seems unreasonable to expect
> that from doubles after actual computation.

I have updated the test precision, but I'm getting a weird either/or.

x86_64 is returning 0.00000
i386 is returning -0.00000

accordingly, this makes it hard to set the test case.

Any ideas?

https://trac.osgeo.org/proj/ticket/255#comment:8

Howard



From peifer at gmx.eu  Tue Feb 24 23:28:35 2015
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed, 25 Feb 2015 08:28:35 +0100
Subject: [Proj] Proj 4.9.1RC4 Released
In-Reply-To: <4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>	<rmi61atv48u.fsf@fnord.ir.bbn.com>
	<54EACCC2.1000408@xs4all.nl>	<A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>	<6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>
	<4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>
Message-ID: <54ED79A3.8020404@gmx.eu>

On 2015-02-24 22:28, Howard Butler wrote:
>
> I have issued RC4 to address this issue.
>
> http://download.osgeo.org/proj/proj-4.9.1RC4.tar.gz
>

Just in case someone would be interested: some compiler warning 
attached. The warning counts are:

      91 [-Wmissing-braces]
       1 [-Wsometimes-uninitialized]
       6 [-Wunused-const-variable]
       3 [-Wunused-variable]

I'm on a MacBook, where gcc isn't really gcc [0]. For RC4, all TESTs are 
OK [1], whereas in trunk, I'm also getting the -0 issue [2].

Hermann

[0] gcc --version
Apple LLVM version 6.0 (clang-600.0.54) (based on LLVM 3.5svn)
Target: x86_64-apple-darwin14
Thread model: posix


[1] make check  # RC4
============================================
Running ../nad/test27 using ../src/proj:
============================================
...
TEST OK
============================================
Running ../nad/test83 using ../src/proj:
============================================
...
TEST OK
============================================
Running ../nad/testvarious using ../src/cs2cs:
============================================
...
TEST OK


[2] make check  # trunk
============================================
Running ../nad/testvarious using ../src/cs2cs:
============================================
...
diff tv_out with tv_out.dist
119,120c119,120
< 1.437378399445537 5.364369216432778	0.00000	60.00000 0.00000
< 1.437378399445537 -5.364369216432778	0.00000	-60.00000 0.00000
---
 > 1.437378399445537 5.364369216432778	-0.00000	60.00000 0.00000
 > 1.437378399445537 -5.364369216432778	-0.00000	-60.00000 0.00000

PROBLEMS HAVE OCCURED
test file tv_out saved

-------------- next part --------------
PJ_sterea.c:7:1: warning: unused variable 'LIBPROJ_ID' [-Wunused-const-variable]
LIBPROJ_ID[] = "$Id: PJ_sterea.c 2022 2011-05-20 13:04:08Z warmerdam $";
^
1 warning generated.
proj_rouss.c:7:1: warning: unused variable 'LIBPROJ_ID' [-Wunused-const-variable]
LIBPROJ_ID[] = "$Id: proj_rouss.c 1856 2010-06-11 03:26:04Z warmerdam $";
^
1 warning generated.
PJ_lcca.c:1:19: warning: unused variable 'RCS_ID' [-Wunused-const-variable]
static const char RCS_ID[] = "$Id: PJ_lcca.c 1856 2010-06-11 03:26:04Z warmerdam $";
                  ^
1 warning generated.
PJ_geos.c:8:1: warning: unused variable 'LIBPROJ_ID' [-Wunused-const-variable]
LIBPROJ_ID[] = "$Id: PJ_geos.c 2411 2013-12-09 18:13:15Z warmerdam $";
^
1 warning generated.
PJ_qsc.c:112:23: warning: unused variable 'nu' [-Wunused-variable]
        double t, mu, nu;
                      ^
1 warning generated.
mk_cheby.c:79:17: warning: variable 'T' is used uninitialized whenever 'if' condition is true [-Wsometimes-uninitialized]
            if (!bch2bps(a, b, w, nu, nv))
                ^~~~~~~~~~~~~~~~~~~~~~~~~
mk_cheby.c:163:9: note: uninitialized use occurs here
    if (T) { /* pj_dalloc up possible allocations */
        ^
mk_cheby.c:79:13: note: remove the 'if' if its condition is always false
            if (!bch2bps(a, b, w, nu, nv))
            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
mk_cheby.c:39:15: note: initialize the variable 'T' to silence this warning
    Tseries *T;
              ^
               = NULL
1 warning generated.
pj_ellps.c:7:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"MERIT",        "a=6378137.0", "rf=298.257", "MERIT 1983",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                        }
pj_ellps.c:8:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"SGS85",        "a=6378136.0", "rf=298.257",  "Soviet Geodetic System 85",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                        }
pj_ellps.c:9:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"GRS80",        "a=6378137.0", "rf=298.257222101", "GRS 1980(IUGG, 1980)",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                        }
pj_ellps.c:10:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"IAU76",        "a=6378140.0", "rf=298.257", "IAU 1976",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                      }
pj_ellps.c:11:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"airy",         "a=6377563.396", "b=6356256.910", "Airy 1830",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                            }
pj_ellps.c:12:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"APL4.9",       "a=6378137.0.",  "rf=298.25", "Appl. Physics. 1965",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                  }
pj_ellps.c:13:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"NWL9D",        "a=6378145.0.",  "rf=298.25", "Naval Weapons Lab., 1965",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                       }
pj_ellps.c:14:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"mod_airy",     "a=6377340.189", "b=6356034.446", "Modified Airy",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                }
pj_ellps.c:15:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"andrae",       "a=6377104.43",  "rf=300.0",    "Andrae 1876 (Den., Iclnd.)",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                           }
pj_ellps.c:16:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"aust_SA",      "a=6378160.0", "rf=298.25", "Australian Natl & S. Amer. 1969",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                            }
pj_ellps.c:17:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"GRS67",        "a=6378160.0", "rf=298.2471674270", "GRS 67(IUGG 1967)",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                      }
pj_ellps.c:18:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"bessel",       "a=6377397.155", "rf=299.1528128", "Bessel 1841",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                               }
pj_ellps.c:19:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"bess_nam",     "a=6377483.865", "rf=299.1528128", "Bessel 1841 (Namibia)",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                         }
pj_ellps.c:20:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"clrk66",       "a=6378206.4", "b=6356583.8", "Clarke 1866",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                          }
pj_ellps.c:21:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"clrk80",       "a=6378249.145", "rf=293.4663", "Clarke 1880 mod.",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                 }
pj_ellps.c:22:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"clrk80ign","a=6378249.2", "rf=293.4660212936269", "Clarke 1880 (IGN).",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                      }
pj_ellps.c:23:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"CPM",          "a=6375738.7", "rf=334.29", "Comm. des Poids et Mesures 1799",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                            }
pj_ellps.c:24:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"delmbr",       "a=6376428.",  "rf=311.5", "Delambre 1810 (Belgium)",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                   }
pj_ellps.c:25:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"engelis",      "a=6378136.05", "rf=298.2566", "Engelis 1985",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                            }
pj_ellps.c:26:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"evrst30",  "a=6377276.345", "rf=300.8017",  "Everest 1830",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                          }
pj_ellps.c:27:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"evrst48",  "a=6377304.063", "rf=300.8017",  "Everest 1948",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                          }
pj_ellps.c:28:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"evrst56",  "a=6377301.243", "rf=300.8017",  "Everest 1956",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                          }
pj_ellps.c:29:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"evrst69",  "a=6377295.664", "rf=300.8017",  "Everest 1969",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                          }
pj_ellps.c:30:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"evrstSS",  "a=6377298.556", "rf=300.8017",  "Everest (Sabah & Sarawak)",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                       }
pj_ellps.c:31:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"fschr60",  "a=6378166.",   "rf=298.3", "Fischer (Mercury Datum) 1960",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                     }
pj_ellps.c:32:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"fschr60m", "a=6378155.",   "rf=298.3", "Modified Fischer 1960",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                              }
pj_ellps.c:33:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"fschr68",  "a=6378150.",   "rf=298.3", "Fischer 1968",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                     }
pj_ellps.c:34:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"helmert",  "a=6378200.",   "rf=298.3", "Helmert 1906",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                     }
pj_ellps.c:35:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"hough",        "a=6378270.0", "rf=297.", "Hough",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                }
pj_ellps.c:36:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"intl",         "a=6378388.0", "rf=297.", "International 1909 (Hayford)",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                       }
pj_ellps.c:37:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"krass",        "a=6378245.0", "rf=298.3", "Krassovsky, 1942",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                            }
pj_ellps.c:38:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"kaula",        "a=6378163.",  "rf=298.24", "Kaula 1961",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                       }
pj_ellps.c:39:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"lerch",        "a=6378139.",  "rf=298.257", "Lerch 1979",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                        }
pj_ellps.c:40:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"mprts",        "a=6397300.",  "rf=191.", "Maupertius 1738",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                          }
pj_ellps.c:41:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"new_intl",     "a=6378157.5", "b=6356772.2", "New International 1967",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                     }
pj_ellps.c:42:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"plessis",      "a=6376523.",  "b=6355863.", "Plessis 1817 (France)",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                   }
pj_ellps.c:43:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"SEasia",       "a=6378155.0", "b=6356773.3205", "Southeast Asia",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                }
pj_ellps.c:44:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"walbeck",      "a=6376896.0", "b=6355834.8467", "Walbeck",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                         }
pj_ellps.c:45:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"WGS60",    "a=6378165.0",  "rf=298.3", "WGS 60",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                               }
pj_ellps.c:46:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"WGS66",        "a=6378145.0", "rf=298.25", "WGS 66",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                   }
pj_ellps.c:47:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"WGS72",        "a=6378135.0", "rf=298.26", "WGS 72",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                   }
pj_ellps.c:48:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"WGS84",    "a=6378137.0",  "rf=298.257223563", "WGS 84",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                       }
pj_ellps.c:49:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"sphere",   "a=6370997.0",  "b=6370997.0", "Normal Sphere (r=6370997)",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                     }
pj_ellps.c:50:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
0,0,0,0
^~~~~~~
{      }
44 warnings generated.
pj_init.c:425:19: warning: unused variable 'last' [-Wunused-variable]
        paralist *last = curr;
                  ^
1 warning generated.
proj_mdist.c:7:1: warning: unused variable 'LIBPROJ_ID' [-Wunused-const-variable]
LIBPROJ_ID[] = "$Id: proj_mdist.c 1856 2010-06-11 03:26:04Z warmerdam $";
^
1 warning generated.
pj_units.c:9:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "km",   "1000.",        "Kilometer",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                  }
pj_units.c:10:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "m",    "1.",           "Meter",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                              }
pj_units.c:11:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "dm",   "1/10",         "Decimeter",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                  }
pj_units.c:12:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "cm",   "1/100",        "Centimeter",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                   }
pj_units.c:13:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "mm",   "1/1000",       "Millimeter",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                   }
pj_units.c:14:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "kmi",  "1852.0",       "International Nautical Mile",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                                    }
pj_units.c:15:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "in",   "0.0254",       "International Inch",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                           }
pj_units.c:16:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "ft",   "0.3048",       "International Foot",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                           }
pj_units.c:17:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "yd",   "0.9144",       "International Yard",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                           }
pj_units.c:18:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "mi",   "1609.344",     "International Statute Mile",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                                   }
pj_units.c:19:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "fath", "1.8288",       "International Fathom",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                             }
pj_units.c:20:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "ch",   "20.1168",      "International Chain",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                            }
pj_units.c:21:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "link", "0.201168",     "International Link",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                           }
pj_units.c:22:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "us-in",        "1./39.37",     "U.S. Surveyor's Inch",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                                     }
pj_units.c:23:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "us-ft",        "0.304800609601219",    "U.S. Surveyor's Foot",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                                             }
pj_units.c:24:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "us-yd",        "0.914401828803658",    "U.S. Surveyor's Yard",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                                             }
pj_units.c:25:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "us-ch",        "20.11684023368047",    "U.S. Surveyor's Chain",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                                              }
pj_units.c:26:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "us-mi",        "1609.347218694437",    "U.S. Surveyor's Statute Mile",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                                                     }
pj_units.c:27:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "ind-yd",       "0.91439523",   "Indian Yard",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                            }
pj_units.c:28:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "ind-ft",       "0.30479841",   "Indian Foot",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                            }
pj_units.c:29:2: warning: suggest braces around initialization of subobject [-Wmissing-braces]
        "ind-ch",       "20.11669506",  "Indian Chain",
        ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        {                                             }
pj_units.c:30:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
(char *)0, (char *)0, (char *)0
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                              }
22 warnings generated.
pj_gauss.c:7:1: warning: unused variable 'LIBPROJ_ID' [-Wunused-const-variable]
LIBPROJ_ID[] = "$Id: pj_gauss.c 1856 2010-06-11 03:26:04Z warmerdam $";
^
1 warning generated.
pj_datums.c:43:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"WGS84",    "towgs84=0,0,0",                         "WGS84", "",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                               }
pj_datums.c:44:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"GGRS87",   "towgs84=-199.87,74.79,246.62",          "GRS80", 
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
pj_datums.c:46:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"NAD83",    "towgs84=0,0,0",                         "GRS80", 
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
pj_datums.c:48:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"NAD27",    "nadgrids=@conus, at alaska, at ntv2_0.gsb, at ntv1_can.dat",           
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
pj_datums.c:51:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"potsdam",  "towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.7",  "bessel",  "Potsdam Rauenberg 1950 DHDN",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                                                       }
pj_datums.c:52:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"carthage",  "towgs84=-263.0,6.0,431.0",  "clrk80ign",  "Carthage 1934 Tunisia",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                              }
pj_datums.c:53:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"hermannskogel", "towgs84=577.326,90.129,463.919,5.137,1.474,5.297,2.4232",  "bessel",  "Hermannskogel",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                                                      }
pj_datums.c:54:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"ire65",  "towgs84=482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",  "mod_airy",  "Ireland 1965",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                                                   }
pj_datums.c:55:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"nzgd49",    "towgs84=59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993", "intl", "New Zealand Geodetic Datum 1949",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                                                           }
pj_datums.c:56:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
"OSGB36",    "towgs84=446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894", "airy", "Airy 1830",
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                                                 }
pj_datums.c:57:1: warning: suggest braces around initialization of subobject [-Wmissing-braces]
NULL,       NULL,                                    NULL,    NULL 
^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
{                                                                 }
/usr/include/sys/_types/_null.h:29:15: note: expanded from macro 'NULL'
#define NULL  __DARWIN_NULL
              ^
/usr/include/sys/_types.h:52:23: note: expanded from macro '__DARWIN_NULL'
#define __DARWIN_NULL ((void *)0)
                      ^
pj_datums.c:69:5: warning: suggest braces around initialization of subobject [-Wmissing-braces]
    "greenwich", "0dE",
    ^~~~~~~~~~~~~~~~~~
    {                 }
pj_datums.c:70:5: warning: suggest braces around initialization of subobject [-Wmissing-braces]
    "lisbon",    "9d07'54.862\"W",
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    {                            }
pj_datums.c:71:5: warning: suggest braces around initialization of subobject [-Wmissing-braces]
    "paris",     "2d20'14.025\"E",
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    {                            }
pj_datums.c:72:5: warning: suggest braces around initialization of subobject [-Wmissing-braces]
    "bogota",    "74d04'51.3\"W",
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
    {                           }
pj_datums.c:73:5: warning: suggest braces around initialization of subobject [-Wmissing-braces]
    "madrid",    "3d41'16.58\"W",
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
    {                           }
pj_datums.c:74:5: warning: suggest braces around initialization of subobject [-Wmissing-braces]
    "rome",      "12d27'8.4\"E",
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~
    {                          }
pj_datums.c:75:5: warning: suggest braces around initialization of subobject [-Wmissing-braces]
    "bern",      "7d26'22.5\"E",
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~
    {                          }
pj_datums.c:76:5: warning: suggest braces around initialization of subobject [-Wmissing-braces]
    "jakarta",   "106d48'27.79\"E",
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    {                             }
pj_datums.c:77:5: warning: suggest braces around initialization of subobject [-Wmissing-braces]
    "ferro",     "17d40'W",
    ^~~~~~~~~~~~~~~~~~~~~~
    {                     }
pj_datums.c:78:5: warning: suggest braces around initialization of subobject [-Wmissing-braces]
    "brussels",  "4d22'4.71\"E",
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~
    {                          }
pj_datums.c:79:5: warning: suggest braces around initialization of subobject [-Wmissing-braces]
    "stockholm", "18d3'29.8\"E",
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~
    {                          }
pj_datums.c:80:5: warning: suggest braces around initialization of subobject [-Wmissing-braces]
    "athens",    "23d42'58.815\"E",
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    {                             }
pj_datums.c:81:5: warning: suggest braces around initialization of subobject [-Wmissing-braces]
    "oslo",      "10d43'22.5\"E",
    ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
    {                           }
pj_datums.c:82:5: warning: suggest braces around initialization of subobject [-Wmissing-braces]
    NULL,        NULL 
    ^~~~~~~~~~~~~~~~~
    {                }
/usr/include/sys/_types/_null.h:29:15: note: expanded from macro 'NULL'
#define NULL  __DARWIN_NULL
              ^
/usr/include/sys/_types.h:52:23: note: expanded from macro '__DARWIN_NULL'
#define __DARWIN_NULL ((void *)0)
                      ^
25 warnings generated.
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: .libs/libproj.a(jniproj.o) has no symbols
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ranlib: file: .libs/libproj.a(jniproj.o) has no symbols
cs2cs.c:56:23: warning: unused variable 'facs' [-Wunused-variable]
static struct FACTORS facs;
                      ^
1 warning generated.

From luis.a.de.sousa at gmail.com  Thu Feb 26 01:53:46 2015
From: luis.a.de.sousa at gmail.com (=?UTF-8?Q?Lu=C3=ADs_de_Sousa?=)
Date: Thu, 26 Feb 2015 10:53:46 +0100
Subject: [Proj] How to use proj from a Ruby application
Message-ID: <CAEtdG7tLVNzcXkv-8SzrR4Ticd7CUdQ3sPzOLr3hFzk3xw-T8w@mail.gmail.com>

Dear all,

I am trying to use Proj from a Ruby application. There are various
Ruby libraries out there [0, 1] typically called "proj4rb"; none seems
to have had active development for multiple years and so far I was not
able to install any of them [2].

What other alternatives are there to use proj with Ruby?

Thank you,

Luís


[0] https://github.com/cfis/proj4rb

[1] https://github.com/Caged/proj4rb

[2] http://gis.stackexchange.com/questions/136550/how-to-install-proj4rb-on-ubuntu-14-04


From support at mnspoint.com  Fri Feb 27 02:16:09 2015
From: support at mnspoint.com (support at mnspoint.com)
Date: Fri, 27 Feb 2015 12:16:09 +0200
Subject: [Proj] (no subject)
In-Reply-To: <CA+F4vi=6bc7o-7Ep51gPw+MMu2LDgH+QRin7-HrZqHDgRjdm5Q@mail.gmail.com>
References: <CA+F4vi=6bc7o-7Ep51gPw+MMu2LDgH+QRin7-HrZqHDgRjdm5Q@mail.gmail.com>
Message-ID: <b5a73890ef050e82db7e68be279cdc4b@mnspoint.com>

 

Hello, 

maybe you should first figure out what is the input system exactly? what
is the input ellipsoid and datum .. then figure out what is the output
system exactly (ellipsoid is WGS84, but does it have any datum, maybe
WGS84 also) .. then use cs2cs .. since you have no projection in either
side you can use proj=latlong as a pseudo projection .. (somebody else
might be better to explain how cs2cs exactly works) .. see also: 

https://trac.osgeo.org/proj/wiki/man_cs2cs 

Janne. 

------------------------------------- 

Artur Bercik kirjoitti 24.10.2014 09:26: 

> Dear Proj list members:
> 
> Being a very new in this field, could someone answer me about the following problem:
> 
> I have a pair of Geodetic Latitude and Geodetic Longitude (50.89524, 117.69043).
> How can I convert it into Latitude and Longitude with WGS84 Ellepsoid?
> 
> Thanks in the advance.
> 
> Artur 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj [1]

 

Links:
------
[1] http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150227/df0b99aa/attachment.html>

From gdt at ir.bbn.com  Fri Feb 27 08:24:24 2015
From: gdt at ir.bbn.com (Greg Troxel)
Date: Fri, 27 Feb 2015 11:24:24 -0500
Subject: [Proj] Proj 4.9.1RC4 Released
In-Reply-To: <E6E7F65B-3218-4C29-96A4-B6D557451E5A@hobu.co> (Howard Butler's
	message of "Tue, 24 Feb 2015 22:24:10 -0600")
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<rmi61atv48u.fsf@fnord.ir.bbn.com> <54EACCC2.1000408@xs4all.nl>
	<A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>
	<6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>
	<4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>
	<rmih9uan1aa.fsf@fnord.ir.bbn.com>
	<E6E7F65B-3218-4C29-96A4-B6D557451E5A@hobu.co>
Message-ID: <rmia8zzcog7.fsf@fnord.ir.bbn.com>


Howard Butler <howard at hobu.co> writes:

>> On Feb 24, 2015, at 9:00 PM, Greg Troxel <gdt at ir.bbn.com> wrote:
>> 
>> 
>> netbsd-6 i386:
>> 
>> diff tv_out with tv_out.dist
>> 313c313
>> < 13 -10        2073986.9490880956873   -1680858.2722242793534 0.0000000000000
>> ---
>>> 13 -10        2073986.9490880956873   -1680858.2722242795862 0.0000000000000
>> 
>> I am getting the same answer as the debian i386 boxes, I think.
>> 
>> This seems to be two parts in 10^16, and it seems unreasonable to expect
>> that from doubles after actual computation.
>
> I have updated the test precision, but I'm getting a weird either/or.
>
> x86_64 is returning 0.00000
> i386 is returning -0.00000
>
> accordingly, this makes it hard to set the test case.
>
> Any ideas?
>
> https://trac.osgeo.org/proj/ticket/255#comment:8

No good ideas, other than on amd64 with more registers more of the
computation is likely to be in 80-bit mode.   So +/- zero can end up
differently, and that's not necessarily wrong.

My current leaning is that for floating point tests, the only reasonable
thing to do is to have a range compare on the output.

It's not at all clear this should hold up a release, though.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 180 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150227/6d054939/attachment.sig>

From devrim at gunduz.org  Sat Feb 28 05:42:45 2015
From: devrim at gunduz.org (Devrim =?ISO-8859-1?Q?G=FCnd=FCz?=)
Date: Sat, 28 Feb 2015 15:42:45 +0200
Subject: [Proj] Proj 4.9.1RC4 Released
In-Reply-To: <4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<rmi61atv48u.fsf@fnord.ir.bbn.com> <54EACCC2.1000408@xs4all.nl>
	<A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>
	<6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>
	<4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>
Message-ID: <1425130965.3402.34.camel@gunduz.org>

Hi,

On Tue, 2015-02-24 at 15:28 -0600, Howard Butler wrote:
> I have issued RC4 to address this issue.
> 
> http://download.osgeo.org/proj/proj-4.9.1RC4.tar.gz

FWIW, this one builds cleanly on RHEL 7 and Fedora 21.

Regards,
-- 
Devrim GÜNDÜZ
Principal Systems Engineer @ EnterpriseDB: http://www.enterprisedb.com
PostgreSQL Danışmanı/Consultant, Red Hat Certified Engineer
Twitter: @DevrimGunduz , @DevrimGunduzTR

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 819 bytes
Desc: This is a digitally signed message part
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20150228/061b6fab/attachment.sig>

From howard at hobu.co  Sat Feb 28 12:45:50 2015
From: howard at hobu.co (Howard Butler)
Date: Sat, 28 Feb 2015 15:45:50 -0500
Subject: [Proj] Proj 4.9.1RC4 Released
In-Reply-To: <E6E7F65B-3218-4C29-96A4-B6D557451E5A@hobu.co>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>
	<rmi61atv48u.fsf@fnord.ir.bbn.com> <54EACCC2.1000408@xs4all.nl>
	<A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>
	<6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>
	<4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>
	<rmih9uan1aa.fsf@fnord.ir.bbn.com>
	<E6E7F65B-3218-4C29-96A4-B6D557451E5A@hobu.co>
Message-ID: <591D9BA9-436C-40C4-B2A2-D2F737AEF2F9@hobu.co>


> On Feb 24, 2015, at 11:24 PM, Howard Butler <howard at hobu.co> wrote:
> 
> 
>> On Feb 24, 2015, at 9:00 PM, Greg Troxel <gdt at ir.bbn.com> wrote:
>> 
>> 
>> netbsd-6 i386:
>> 
>> diff tv_out with tv_out.dist
>> 313c313
>> < 13 -10        2073986.9490880956873   -1680858.2722242793534 0.0000000000000
>> ---
>>> 13 -10        2073986.9490880956873   -1680858.2722242795862 0.0000000000000
>> 
>> I am getting the same answer as the debian i386 boxes, I think.
>> 
>> This seems to be two parts in 10^16, and it seems unreasonable to expect
>> that from doubles after actual computation.
> 
> I have updated the test precision, but I'm getting a weird either/or.
> 
> x86_64 is returning 0.00000
> i386 is returning -0.00000
> 
> accordingly, this makes it hard to set the test case.
> 
> Any ideas?
> 
> https://trac.osgeo.org/proj/ticket/255#comment:8

This issue is holding me up from motioning to release 4.9.1. If people do not think this issue warrants holding things up, I will simply remove this test and wait for someone with experience with both the healpix coordinate tests and signed zeros to fix things up.

Howard

From sebastic at xs4all.nl  Sat Feb 28 12:58:25 2015
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Sat, 28 Feb 2015 21:58:25 +0100
Subject: [Proj] Proj 4.9.1RC4 Released
In-Reply-To: <591D9BA9-436C-40C4-B2A2-D2F737AEF2F9@hobu.co>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>	<rmi61atv48u.fsf@fnord.ir.bbn.com>
	<54EACCC2.1000408@xs4all.nl>	<A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>	<6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>	<4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>	<rmih9uan1aa.fsf@fnord.ir.bbn.com>	<E6E7F65B-3218-4C29-96A4-B6D557451E5A@hobu.co>
	<591D9BA9-436C-40C4-B2A2-D2F737AEF2F9@hobu.co>
Message-ID: <54F22BF1.2090704@xs4all.nl>

On 02/28/2015 09:45 PM, Howard Butler wrote:
> This issue is holding me up from motioning to release 4.9.1.
> If people do not think this issue warrants holding things up,
> I will simply remove this test and wait for someone with experience
> with both the healpix coordinate tests and signed zeros to fix things up.

Disabling the three troublesome tests reported in #255 is reasonable in
my opinion. I'm not sure to what extent you want to remove the test,
removing testvarious entirely seems a bit much.

I've ignore the failing tests in the Debian package build for the time
being, to prevent the small number of architecture specific test
failures from failing the entire build.

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From fyw at wwwtools.com  Sat Feb 28 13:03:39 2015
From: fyw at wwwtools.com (Frank Willett)
Date: Sat, 28 Feb 2015 14:03:39 -0700
Subject: [Proj] Proj 4.9.1RC4 Released
In-Reply-To: <591D9BA9-436C-40C4-B2A2-D2F737AEF2F9@hobu.co>
References: <E1E9BF5D-0B11-41B1-B9EA-414376798A53@hobu.co>	<rmi61atv48u.fsf@fnord.ir.bbn.com>
	<54EACCC2.1000408@xs4all.nl>	<A3FF4181-1802-4027-840C-3D8A2F40E36E@hobu.co>	<6068e3d5cf9f382c2f6a328179b9584c.squirrel@webmail.xs4all.nl>	<4214AB50-DB33-4029-99C8-4B641901DA59@hobu.co>	<rmih9uan1aa.fsf@fnord.ir.bbn.com>	<E6E7F65B-3218-4C29-96A4-B6D557451E5A@hobu.co>
	<591D9BA9-436C-40C4-B2A2-D2F737AEF2F9@hobu.co>
Message-ID: <54F22D2B.4010807@wwwtools.com>

Not an issue for me.

On 02/28/2015 01:45 PM, Howard Butler wrote:
>> On Feb 24, 2015, at 11:24 PM, Howard Butler <howard at hobu.co> wrote:
>>
>>
>>> On Feb 24, 2015, at 9:00 PM, Greg Troxel <gdt at ir.bbn.com> wrote:
>>>
>>>
>>> netbsd-6 i386:
>>>
>>> diff tv_out with tv_out.dist
>>> 313c313
>>> < 13 -10        2073986.9490880956873   -1680858.2722242793534 0.0000000000000
>>> ---
>>>> 13 -10        2073986.9490880956873   -1680858.2722242795862 0.0000000000000
>>> I am getting the same answer as the debian i386 boxes, I think.
>>>
>>> This seems to be two parts in 10^16, and it seems unreasonable to expect
>>> that from doubles after actual computation.
>> I have updated the test precision, but I'm getting a weird either/or.
>>
>> x86_64 is returning 0.00000
>> i386 is returning -0.00000
>>
>> accordingly, this makes it hard to set the test case.
>>
>> Any ideas?
>>
>> https://trac.osgeo.org/proj/ticket/255#comment:8
> This issue is holding me up from motioning to release 4.9.1. If people do not think this issue warrants holding things up, I will simply remove this test and wait for someone with experience with both the healpix coordinate tests and signed zeros to fix things up.
>
> Howard
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



