From geraldi.evenden at gmail.com  Mon Sep  1 07:31:01 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 1 Sep 2008 10:31:01 -0400
Subject: [Proj] Lease block definition
Message-ID: <200809011031.01922.geraldi.evenden@gmail.com>

A few weeks ago the item of oil lease blocks came up as an item to be plotted 
on extended range TM maps.  My encounter with lease blocks was only as a 
short spectator of someone digitizing the irregular shore boundaries of said 
lease blocks.

My understanding is that the lease block boundaries are established in terms 
of UTM grid coordinates?  If so, what are the typical side lengths in meters?

My recollection was that one of the reasons for selecting TM for large area 
mapping was because of "facilitating" the plotting of lease blocks.  True, 
false?

Any information related to what has been done or proposed for large region 
mapping with TM would be appreciated.
-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From campbell.smith at gmail.com  Mon Sep  1 07:58:49 2008
From: campbell.smith at gmail.com (Campbell Smith)
Date: Mon, 1 Sep 2008 16:58:49 +0200
Subject: [Proj] Lease block definition
In-Reply-To: <200809011031.01922.geraldi.evenden@gmail.com>
References: <200809011031.01922.geraldi.evenden@gmail.com>
Message-ID: <b834374a0809010758i12d26270u55805956a62ee2ef@mail.gmail.com>

I think that the UK and Norwegian blocks are based on fractions of
lat/long in ED50 rather than sensible UTM.

Other countries may be different.

On 01/09/2008, Gerald I. Evenden <geraldi.evenden at gmail.com> wrote:
> A few weeks ago the item of oil lease blocks came up as an item to be
> plotted
> on extended range TM maps.  My encounter with lease blocks was only as a
> short spectator of someone digitizing the irregular shore boundaries of said
> lease blocks.
>
> My understanding is that the lease block boundaries are established in terms
> of UTM grid coordinates?  If so, what are the typical side lengths in
> meters?
>
> My recollection was that one of the reasons for selecting TM for large area
> mapping was because of "facilitating" the plotting of lease blocks.  True,
> false?
>
> Any information related to what has been done or proposed for large region
> mapping with TM would be appreciated.
> --
> The whole religious complexion of the modern world is due
> to the absence from Jerusalem of a lunatic asylum.
> -- Havelock Ellis (1859-1939) British psychologist
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


From ndzinn at comcast.net  Mon Sep  1 08:43:54 2008
From: ndzinn at comcast.net (Noel Zinn)
Date: Mon, 1 Sep 2008 10:43:54 -0500
Subject: [Proj] Lease block definition
In-Reply-To: <200809011031.01922.geraldi.evenden@gmail.com>
References: <200809011031.01922.geraldi.evenden@gmail.com>
Message-ID: <544E56E2C3FD4AC6871386ABD76A72F2@PowerSpec>

The US Outer Continental Shelf (Gulf of Mexico anyway) lease blocks are
defined in NAD27 UTM by zone (so extended coverage per the recent threat is
of no relevance), but in US Survey Feet.  These are federal waters.  State
waters are defines SPCS27.

Google "protraction diagram" and you'll find all the information you'll
need.

Noel

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Gerald I. Evenden
Sent: Monday, September 01, 2008 9:31 AM
To: PROJ.4 and general Projections Discussions
Subject: [Proj] Lease block definition

A few weeks ago the item of oil lease blocks came up as an item to be
plotted 
on extended range TM maps.  My encounter with lease blocks was only as a 
short spectator of someone digitizing the irregular shore boundaries of said

lease blocks.

My understanding is that the lease block boundaries are established in terms

of UTM grid coordinates?  If so, what are the typical side lengths in
meters?

My recollection was that one of the reasons for selecting TM for large area 
mapping was because of "facilitating" the plotting of lease blocks.  True, 
false?

Any information related to what has been done or proposed for large region 
mapping with TM would be appreciated.
-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From warmerdam at pobox.com  Mon Sep  1 08:51:17 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 01 Sep 2008 11:51:17 -0400
Subject: [Proj] PROJ 4.6.1 Released
Message-ID: <48BC0F75.6030301@pobox.com>

Folks,

I have promoted the PROJ 4.6.1 RC3 to being the PROJ 4.6.1 final release
since there don't seem to be any serious problems with it.  From the news
file:

4.6.1 Release Notes
-------------------

  o Upgraded to EPSG 6.17 version for nad/epsg.  Also corrected the precision
    problem introduced in the last version.

  o Added logic for tmerc projection to fail rather than return crazy results
    if more than 90 degrees away from the central meridian (#5).  This change
    may only be temporary till a more comprehensive solution is found.

  o Fixed handling of extra text in cs2cs.

  o Renamed INSTALL to INSTALL.TXT.

  o The eqc projection has been generalized to include a latitude of origin.

  o Added the glabsgm (Gauss Laborde / Sphere Geometric Mean) projection,
    and gstmerc variation.

  o nad/IGNF init catalogue created.

  o added the ntf_r93.gsb datum shift file.

  o Add /Op in nmake.opt compile options to avoid VC7 optimization bug (#12)

  o Fix testvarious test script so it works properly when grid files available


Download it from:

   http://download.osgeo.org/proj/proj-4.6.1.tar.gz
   http://download.osgeo.org/proj/proj-4.6.1.zip

I have also added a redirect from http://proj.osgeo.org/ to our
trac web site, and I'd like to consider this url our 'public identity'
in the future.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From geraldi.evenden at gmail.com  Mon Sep  1 09:35:53 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 1 Sep 2008 12:35:53 -0400
Subject: [Proj] PROJ 4.6.1 Released
In-Reply-To: <48BC0F75.6030301@pobox.com>
References: <48BC0F75.6030301@pobox.com>
Message-ID: <200809011235.54069.geraldi.evenden@gmail.com>

On Monday 01 September 2008 11:51:17 am Frank Warmerdam wrote:
> Folks,
>
> I have promoted the PROJ 4.6.1 RC3 to being the PROJ 4.6.1 final release
> since there don't seem to be any serious problems with it.  From the news
> file:
	...
>   o Added the glabsgm (Gauss Laborde / Sphere Geometric Mean) projection,
>     and gstmerc variation.

Don't they produce the same numbers?  If they do, why two entries?  If they do 
not, please let me know.  Anyway, I thought gstmerc was the consensus.

Also, I have no idea what the "Sphere Geometric Mean" applies to in this 
projection?  If anyone has any ideas, please let me know.
	...
-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From dcmikkelsen at terraetl.com  Mon Sep  1 09:43:43 2008
From: dcmikkelsen at terraetl.com (Dean C.Mikkelsen)
Date: Mon, 01 Sep 2008 09:43:43 -0700
Subject: [Proj] Lease block definition
In-Reply-To: <544E56E2C3FD4AC6871386ABD76A72F2@PowerSpec>
References: <200809011031.01922.geraldi.evenden@gmail.com>
	<544E56E2C3FD4AC6871386ABD76A72F2@PowerSpec>
Message-ID: <web-44592246@redback.webnames.ca>

Hi everyone,

Here is a useful site on the GOM Lease Blocks:

http://www.gomr.mms.gov/homepg/pubinfo/MapsandSpatialData.html

If you have any questions, let me know.

Cheers,
Dean




On Mon, 1 Sep 2008 10:43:54 -0500
  "Noel Zinn" <ndzinn at comcast.net> wrote:
> The US Outer Continental Shelf (Gulf of Mexico anyway) 
>lease blocks are
> defined in NAD27 UTM by zone (so extended coverage per 
>the recent threat is
> of no relevance), but in US Survey Feet.  These are 
>federal waters.  State
> waters are defines SPCS27.
> 
> Google "protraction diagram" and you'll find all the 
>information you'll
> need.
> 
> Noel
> 
> -----Original Message-----
>From: proj-bounces at lists.maptools.org
> [mailto:proj-bounces at lists.maptools.org] On Behalf Of 
>Gerald I. Evenden
> Sent: Monday, September 01, 2008 9:31 AM
> To: PROJ.4 and general Projections Discussions
> Subject: [Proj] Lease block definition
> 
> A few weeks ago the item of oil lease blocks came up as 
>an item to be
> plotted 
> on extended range TM maps.  My encounter with lease 
>blocks was only as a 
> short spectator of someone digitizing the irregular 
>shore boundaries of said
> 
> lease blocks.
> 
> My understanding is that the lease block boundaries are 
>established in terms
> 
> of UTM grid coordinates?  If so, what are the typical 
>side lengths in
> meters?
> 
> My recollection was that one of the reasons for 
>selecting TM for large area 
> mapping was because of "facilitating" the plotting of 
>lease blocks.  True, 
> false?
> 
> Any information related to what has been done or 
>proposed for large region 
> mapping with TM would be appreciated.
> -- 
> The whole religious complexion of the modern world is 
>due
> to the absence from Jerusalem of a lunatic asylum.
> -- Havelock Ellis (1859-1939) British psychologist
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

Dean C. Mikkelsen, B.Sc., P.Eng.
Upstream Oil & Gas Geodesy and Information Management

E-mail: dcmikkelsen at terraetl.com

http://www.terraetl.com



From didier.richard at ign.fr  Mon Sep  1 11:04:47 2008
From: didier.richard at ign.fr (RICHARD Didier)
Date: Mon, 1 Sep 2008 20:04:47 +0200 (CEST)
Subject: [Proj] PROJ 4.6.1 Released
In-Reply-To: <200809011235.54069.geraldi.evenden@gmail.com>
References: <48BC0F75.6030301@pobox.com>
	<200809011235.54069.geraldi.evenden@gmail.com>
Message-ID: <34415.87.231.96.39.1220292287.squirrel@87.231.96.39>


> On Monday 01 September 2008 11:51:17 am Frank Warmerdam wrote:
>> Folks,
>>
>> I have promoted the PROJ 4.6.1 RC3 to being the PROJ 4.6.1 final release
>> since there don't seem to be any serious problems with it.  From the
>> news
>> file:
> 	...
>>   o Added the glabsgm (Gauss Laborde / Sphere Geometric Mean)
>> projection,
>>     and gstmerc variation.
>
> Don't they produce the same numbers?  If they do, why two entries?  If
> they do
> not, please let me know.  Anyway, I thought gstmerc was the consensus.
>
> Also, I have no idea what the "Sphere Geometric Mean" applies to in this
> projection?  If anyone has any ideas, please let me know.
> 	...

Gerald, all,

Gerald you're right: the former glabsgm was to be replaced with gstmerc !-)

Regards,

didier

> --
> The whole religious complexion of the modern world is due
> to the absence from Jerusalem of a lunatic asylum.
> -- Havelock Ellis (1859-1939) British psychologist
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


-- 
RICHARD Didier - Chef du pôle technique du Géoportail
2/4, avenue Pasteur - 94165 Saint Mandé Cedex
Tél : +33 (0) 1 43 98 83 23


From warmerdam at pobox.com  Mon Sep  1 13:05:34 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 01 Sep 2008 16:05:34 -0400
Subject: [Proj] PROJ 4.6.1 Released
In-Reply-To: <200809011235.54069.geraldi.evenden@gmail.com>
References: <48BC0F75.6030301@pobox.com>
	<200809011235.54069.geraldi.evenden@gmail.com>
Message-ID: <48BC4B0E.5060902@pobox.com>

Gerald I. Evenden wrote:
> On Monday 01 September 2008 11:51:17 am Frank Warmerdam wrote:
>> Folks,
>>
>> I have promoted the PROJ 4.6.1 RC3 to being the PROJ 4.6.1 final release
>> since there don't seem to be any serious problems with it.  From the news
>> file:
> 	...
>>   o Added the glabsgm (Gauss Laborde / Sphere Geometric Mean) projection,
>>     and gstmerc variation.
> 
> Don't they produce the same numbers?  If they do, why two entries?  If they do 
> not, please let me know.  Anyway, I thought gstmerc was the consensus.
> 
> Also, I have no idea what the "Sphere Geometric Mean" applies to in this 
> projection?  If anyone has any ideas, please let me know.

Gerald,

I would note that I was unclear on how to properly finalize this NEWS
file entry.  I'm still a bit confused about the final resolution, but
understood from Didier that it represented a consensus between the two
of you and was properly applied in CVS.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From chris at mi-sledding.com  Mon Sep  1 16:30:29 2008
From: chris at mi-sledding.com (Chris Fahner)
Date: Mon, 1 Sep 2008 19:30:29 -0400
Subject: [Proj] Michigan georef projection reproject to lat-lon
Message-ID: <003701c90c8a$b8aa04a0$29fe0de0$@com>

Hello, 

I have been trying for the longest time now to convert data I received from
Michigan DNR to lat-long data so it can be used within Google maps.

The data is snowmobile trails but I can't for the life of me find a program
which does not contain an large price tag to do this for me. I can't see
spending money on it when I just need to convert the data once and then I
won't need it done anymore. Does anyone have a good program to use to do
this. They included all the files with the zip file they sent me. (.dbf,
.prj, .sbn,.sbx,.shp,.shp.xml,shx). I think I've tried to use more than a
handful of software's. The closest I got was with the program map window but
there seems to be an issue with it reprojecting.

 

Thanks,

Chris 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20080901/bdb10ed1/attachment.html>

From richard.greenwood at gmail.com  Mon Sep  1 17:11:22 2008
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Mon, 1 Sep 2008 18:11:22 -0600
Subject: [Proj] Michigan georef projection reproject to lat-lon
In-Reply-To: <003701c90c8a$b8aa04a0$29fe0de0$@com>
References: <003701c90c8a$b8aa04a0$29fe0de0$@com>
Message-ID: <ae9185aa0809011711g2aa0912kc90ed90841222ba1@mail.gmail.com>

FWTools http://fwtools.maptools.org/ (which includes Proj.4) has a
command line program called ogr2ogr which includes coordinate system
transformation. At the command prompt, you would enter something like:
   ogr2ogr destDir srcFile.shp -s_srs EPSG:codeForMichiganDNR -t_srs
EPSG:codeForLatLong
where:
  destDir is an empty destination (output) directory
  srcFile.shp is the name of the snowmobile shapefile
  codeForMichiganDNR is the EPSG number for your source data (maybe
not required)
  codeForLatLong is the EPSG number for lat-long (probably 4326)

Rich

On Mon, Sep 1, 2008 at 5:30 PM, Chris Fahner <chris at mi-sledding.com> wrote:
> Hello,
>
> I have been trying for the longest time now to convert data I received from
> Michigan DNR to lat-long data so it can be used within Google maps.
>
> The data is snowmobile trails but I can't for the life of me find a program
> which does not contain an large price tag to do this for me. I can't see
> spending money on it when I just need to convert the data once and then I
> won't need it done anymore. Does anyone have a good program to use to do
> this. They included all the files with the zip file they sent me. (.dbf,
> .prj, .sbn,.sbx,.shp,.shp.xml,shx). I think I've tried to use more than a
> handful of software's. The closest I got was with the program map window but
> there seems to be an issue with it reprojecting.
>
>
>
> Thanks,
>
> Chris
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From Mikael.Rittri at carmenta.com  Tue Sep  2 01:53:58 2008
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Tue, 2 Sep 2008 10:53:58 +0200
Subject: [Proj] What is the meaning of the "Mercator 41" projection in
	EPSG:3752 ? 
Message-ID: <FAF6E56B26D2044696772EBE89B15351011B1E21@posty.carmenta.se>

Hello,
I am trying to understand the meaning of EPSG:3752, 
"WGS 84 / Mercator 41", used around New Zealand. 

I think the EPSG description of the projection is ambiguous:

        Map Projection: Mercator 41
        Projection Method: Mercator(1SP)

        Parameter Name:
        Latitude of natural origin      41° S
        Longitude of natural origin    100° E
        Scale factor at natural origin   1
        False easting                    0 metres
        False northing                   0 metres

Now, this description contradicts the EPSG Guidance Note 7.2 
(http://www.epsg.org/guides/docs/G7-2.pdf), Table 3 on pages 
14 - 15, "Summary of Coordinate Operation Parameters required 
for some Map Projections".  Because Table 3 says that 
"Latitude of natural origin" is indeed the first parameter of
Mercator(1SP), but it should be the equator.  Well, maybe 
Table 3 was meant to say that it is _usually_ the equator,
but that does not help me.  

>From the description of "Mercator 41", I think it is clear 
that the projected point with Easting 0 m and Northing 0 m 
represents the "natural origin" at 100° E, 41° S.

But where on the map is the local scale factor equal to 1 ??? 

Since the scale factor parameter is named "Scale factor at natural origin",
it would seem that the local scale factor is 1 at latitude 41° S 
(also at 41° N), because that's where the natural origin is located. 

On the other hand, if this is the intention, I would have expected 
EPSG to say that the projection method is Mercator(2SP), since it 
has two standard parallels. So, maybe "Scale factor at natural origin"
refers to the equator, after all, despite the inconsistent terminology. 

Does anyone know the truth out there?  A test point should suffice 
to settle the matter (if distinct from 100° E, 41° S).  

Best regards,

--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07 
mikael.rittri at carmenta.com
www.carmenta.com



From geraldi.evenden at gmail.com  Tue Sep  2 13:29:16 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 2 Sep 2008 16:29:16 -0400
Subject: [Proj] What is the meaning of the "Mercator 41" projection in
	EPSG:3752 ?
In-Reply-To: <FAF6E56B26D2044696772EBE89B15351011B1E21@posty.carmenta.se>
References: <FAF6E56B26D2044696772EBE89B15351011B1E21@posty.carmenta.se>
Message-ID: <200809021629.16330.geraldi.evenden@gmail.com>

On Tuesday 02 September 2008 4:53:58 am Mikael Rittri wrote:
> Hello,
> I am trying to understand the meaning of EPSG:3752,
> "WGS 84 / Mercator 41", used around New Zealand.
>
> I think the EPSG description of the projection is ambiguous:
>
>         Map Projection: Mercator 41
>         Projection Method: Mercator(1SP)
>
>         Parameter Name:
>         Latitude of natural origin      41° S
+lat_ts=-41  ??
>         Longitude of natural origin    100° E
+lon_0=100  ??
>         Scale factor at natural origin   1

Presuming latitude of "natural origin" is latitude of true scale then it is 
implied that k at 41S is 1.

>         False easting                    0 metres
>         False northing                   0 metres

Seems a bit odd that NZ would be using Mercator.  They used to have a unique 
TMish under +proj=nzmg and now I think I read that they went to a new 
projection.  Forgot the reference but probably TM.

> Now, this description contradicts the EPSG Guidance Note 7.2
> (http://www.epsg.org/guides/docs/G7-2.pdf), Table 3 on pages
> 14 - 15, "Summary of Coordinate Operation Parameters required
> for some Map Projections".  Because Table 3 says that
> "Latitude of natural origin" is indeed the first parameter of
> Mercator(1SP), but it should be the equator.  Well, maybe
> Table 3 was meant to say that it is _usually_ the equator,
> but that does not help me.
>
> >From the description of "Mercator 41", I think it is clear
>
> that the projected point with Easting 0 m and Northing 0 m
> represents the "natural origin" at 100° E, 41° S.
>
> But where on the map is the local scale factor equal to 1 ???
>
> Since the scale factor parameter is named "Scale factor at natural origin",
> it would seem that the local scale factor is 1 at latitude 41° S
> (also at 41° N), because that's where the natural origin is located.
>
> On the other hand, if this is the intention, I would have expected
> EPSG to say that the projection method is Mercator(2SP), since it

What, may I ask is "Mercator(2SP)"????  Anytime +lat_ts is spec'ed then there 
are two standard parallels unless it is 0.

> has two standard parallels. So, maybe "Scale factor at natural origin"
> refers to the equator, after all, despite the inconsistent terminology.

Scale factor at natural origin seems a bit whacky.

If +lat_ts is used then it defines k0=1 at that latitude internally and will 
override any +k_0 parameter.  That is, "latitude of true scale" means exactly 
what it says.

I can only imaging +k_0 being used in equitorial zones in the same manner as 
TMs relationship with the CM.

> Does anyone know the truth out there?  A test point should suffice
> to settle the matter (if distinct from 100° E, 41° S).

Amen.  I can't stress the value of reference or test points to help ensure 
that the definition of a projection is understood.

(lat,lon to 0.0001")<->(x,y to millimeters) will suffice.

May the offspring of any cartographer that fails to document their 
grid/projection system with such information suffer the infestation of the 
fleas of a thousand camels.

Something like the above should be the motto of this group.  Certainly our 
standard curse.

> Best regards,

Plain old Mercator as a projection for New Zealand seems a bit strange. I 
can't imagine a poorer projection.

> --
> Mikael Rittri
> Carmenta AB
> Box 11354
> SE-404 28 Göteborg
> Visitors: Sankt Eriksgatan 5
> SWEDEN
> Tel: +46-31-775 57 37
> Mob: +46-703-60 34 07
> mikael.rittri at carmenta.com
> www.carmenta.com
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist



From ckarney at sarnoff.com  Tue Sep  2 14:46:31 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Tue, 02 Sep 2008 17:46:31 -0400
Subject: [Proj] Transverse Mercator algorithm
Message-ID: <ssrwshufcg8.fsf@puffin.sarnoff.com>

Frank:

I noticed an E-mail (dated 2008-05-27) from you to the proj mailing list
concerning the availability of an accurate Transverse Mercator
algorithm.  If you're still in need of this, I have recently implemented
and tested the version given in

   http://docs.jhs-suositukset.fi/jhs-suositukset/JHS154/JHS154.pdf

and I can send you a copy.  This is LGPL'ed C++ code, but you can easily
redo the transcription from this report if you need to use another
licence.

I've replaced with formulas in this paper for meridian convergence and
scale with more accurate ones.

The forward and reverse transforms give ~1um accuracy over quite a
large area.  The accuracy here is defined as the maximum of

   forward transform compared with the exact result
   discrepancy when applying forward transform followed by reverse

The following table summarizes the accuracy (for WGS84)

   dx = max(forward error, forwards/reverse error)
   dgam = max discrepancy in meridian convergence
   dk = max relative error in scale

   set             dx      dgam   dk
   x<50e5          74um    0.02"  0.02%%
   x<20e5, y<99e5  1.1um   1e-4"  3e-4%%
   x<5e5, y<96e5   0.22um  9e-8"  1e-6%%
   x<4e5, y<95e5   0.21um  3e-8"  4e-7%%

(x,y = easting,northing with no offsets).

In addition, I've computed additional terms in the series for the
transformations so that even more accurate transforms can be computed
(e.g., using long double).

Finally, the "exact" results I benchmarked these against are obtained
from a macsyma implementation using elliptic integrals and arbitrary
precision arithmetic (usually I use 100 digits).  I was originally
planning to code this implementation up into C++, but there are a few
loose ends in this code and stop it from being industrial strength.
(These are: checking for the correct branch cut being used in inverse
trig functions; picking safe starting values for Newton's method for the
inverse of some functions; and, related, ensuring that the correct root
is returned.)  I'm happy to send you this code too.  In case you're
unfamiliar with macsyma, it's an old computer algebra system written at
MIT.  It can be installed on many Linux distributions with "yum install
maxima".

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From hamish_b at yahoo.com  Tue Sep  2 16:54:54 2008
From: hamish_b at yahoo.com (Hamish)
Date: Tue, 2 Sep 2008 16:54:54 -0700 (PDT)
Subject: [Proj] What is the meaning of the "Mercator 41" projection in
	EPSG:3752 ?
In-Reply-To: <200809021629.16330.geraldi.evenden@gmail.com>
Message-ID: <209223.63576.qm@web110015.mail.gq1.yahoo.com>

Mikael Rittri wrote:
> > I am trying to understand the meaning of EPSG:3752,
> > "WGS 84 / Mercator 41", used around New Zealand.

note that "used around NZ" does not mean that it is widely used within NZ.

I seem to recall that the NZ Marine Environment Classification (MEC)
used some thing similar:

PROJCS["Clarke_1866_Mercator",GEOGCS["GCS_Clarke_1866",DATUM["D_Clarke_1866",SPHEROID["Clarke_1866",6378206.4,294.9786982]
],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMET
ER["False_Northing",0.0],PARAMETER["Central_Meridian",100.0],PARAMETER["Standard_Parallel_1",-46.0],UNIT["Meter",1.0]]

http://www.mfe.govt.nz/publications/ser/marine-environment-classification-jun05/

In the mailing list archives you'll find my struggles to understand why
they used that. If it of great concern


This is dealing with NZ's offshore territorial waters (EEZ) which spread
out over huge parts of the pacific due to the many offshore islands and
lack of neighbors. The dataset is primarily a 1km raster grid, so working
to the 0.1m (at sea!) isn't really too much of a practical concern.

Are you looking at this dataset or something else like gas exploration
maps from NZ's GNS? In my wanders I have not seen it used outside the MEC
dataset and do not understand the benefits or reasons for using that.

fwiw, the ESPG entry is:
# WGS 84 / Mercator 41
<3752> +proj=merc +lon_0=100 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs  <>


Gerald:
> Seems a bit odd that NZ would be using Mercator.  They used to have a
> unique TMish under +proj=nzmg and now I think I read that they went to
> a new projection.  Forgot the reference but probably TM.

The old one used nationwide is NZ Map Grid using the NZGD 1949 datum.
The new one used nationwide is "NZ TM" using the NZGD 2000 datum.

see epsg codes 27200 and 2193. see also Clifford Mugnier's Grids & Datums
article in PE&R from May 2005 for a nice history.

Especially NZMG is not meant to be used far offshore. It blows up by
the time you get to the subantarctic islands.


> Plain old Mercator as a projection for New Zealand seems a
> bit strange. I can't imagine a poorer projection.

If it helps (I suspect it doesn't), perhaps it is better to think of
this as for the southwestern pacific rather than the NZ mainland.


Hamish



      



From geraldi.evenden at gmail.com  Tue Sep  2 17:04:16 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 2 Sep 2008 20:04:16 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <ssrwshufcg8.fsf@puffin.sarnoff.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
Message-ID: <200809022004.16203.geraldi.evenden@gmail.com>

On Tuesday 02 September 2008 5:46:31 pm Charles Karney wrote:
> Frank:
>
> I noticed an E-mail (dated 2008-05-27) from you to the proj mailing list
> concerning the availability of an accurate Transverse Mercator
> algorithm.  If you're still in need of this, I have recently implemented
> and tested the version given in
>
>    http://docs.jhs-suositukset.fi/jhs-suositukset/JHS154/JHS154.pdf
>
> and I can send you a copy.  This is LGPL'ed C++ code, but you can easily
> redo the transcription from this report if you need to use another
> licence.
>
> I've replaced with formulas in this paper for meridian convergence and
> scale with more accurate ones.
>
> The forward and reverse transforms give ~1um accuracy over quite a
> large area.  The accuracy here is defined as the maximum of
>
>    forward transform compared with the exact result
>    discrepancy when applying forward transform followed by reverse
>
> The following table summarizes the accuracy (for WGS84)
>
>    dx = max(forward error, forwards/reverse error)
>    dgam = max discrepancy in meridian convergence
>    dk = max relative error in scale
>
>    set             dx      dgam   dk
>    x<50e5          74um    0.02"  0.02%%
>    x<20e5, y<99e5  1.1um   1e-4"  3e-4%%
>    x<5e5, y<96e5   0.22um  9e-8"  1e-6%%
>    x<4e5, y<95e5   0.21um  3e-8"  4e-7%%
>
> (x,y = easting,northing with no offsets).
>
> In addition, I've computed additional terms in the series for the
> transformations so that even more accurate transforms can be computed
> (e.g., using long double).
>
> Finally, the "exact" results I benchmarked these against are obtained
> from a macsyma implementation using elliptic integrals and arbitrary
> precision arithmetic (usually I use 100 digits).  I was originally
> planning to code this implementation up into C++, but there are a few
> loose ends in this code and stop it from being industrial strength.
> (These are: checking for the correct branch cut being used in inverse
> trig functions; picking safe starting values for Newton's method for the
> inverse of some functions; and, related, ensuring that the correct root
> is returned.)  I'm happy to send you this code too.  In case you're
> unfamiliar with macsyma, it's an old computer algebra system written at
> MIT.  It can be installed on many Linux distributions with "yum install
> maxima".

At the moment I have three TMs which produce equivalent accuracy except in 
the "problem area" where longitude approaches 90 degrees from the central 
meridian on the equator.  If you procedures produce finite values at 
lat=0,lon=90 I would very much like to see your efforts, especially in terms 
of math development.

You mention elliptic integrals but I did not see them in the pdf or at least 
did not recognize them.  Is  the math complete in the pdf? It seems like it 
is not. Of course the language is a barrier for me but the math is easily 
understandable.

A very quick scan of the pdf file makes me think the math is similar to what I 
call the Swedish version and I believe they made comment about their version 
being used in Finland (someone did ;-) ).  But their method fails at 0,90.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From chris at mi-sledding.com  Tue Sep  2 17:41:07 2008
From: chris at mi-sledding.com (Chris Fahner)
Date: Tue, 2 Sep 2008 20:41:07 -0400
Subject: [Proj] Michigan georef projection reproject to lat-lon
In-Reply-To: <ae9185aa0809011711g2aa0912kc90ed90841222ba1@mail.gmail.com>
References: <003701c90c8a$b8aa04a0$29fe0de0$@com>
	<ae9185aa0809011711g2aa0912kc90ed90841222ba1@mail.gmail.com>
Message-ID: <001a01c90d5d$c3570730$4a051590$@com>

When I tried to run the string I entered I received an error.
Ogr2ogr.exe D:\proj D:\snow_trails_version1.shp -s_srs EPSG: 99999 -t_srs
EPSG: 4326

The error is:
ERROR 4: Unable to open EPSG Support file gcs.csv
Try setting GDAL_DATA environment variable to point to the
Directory containing EPSG csv files.
Failed to process SRS definition: EPSG:

I am using 99999 because I had to copy the data from the .prj file that was
zipped with the shp file as it wasn't available in the epsg file.

This is what was in the .prj file
PROJCS["NAD_1983_Hotine_Oblique_Mercator_Azimuth_Natural_Origin",GEOGCS["GCS
_North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378
137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.01745329251994
33]],PROJECTION["Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],PARAMETER[
"False_Easting",2546731.496],PARAMETER["False_Northing",-4354009.816],PARAME
TER["Scale_Factor",0.9996],PARAMETER["Azimuth",337.25556],PARAMETER["Longitu
de_Of_Center",-86.0],PARAMETER["Latitude_Of_Center",45.30916666666667],UNIT[
"Meter",1.0]]


-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Richard Greenwood
Sent: Monday, September 01, 2008 8:11 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Michigan georef projection reproject to lat-lon

FWTools http://fwtools.maptools.org/ (which includes Proj.4) has a
command line program called ogr2ogr which includes coordinate system
transformation. At the command prompt, you would enter something like:
   ogr2ogr destDir srcFile.shp -s_srs EPSG:codeForMichiganDNR -t_srs
EPSG:codeForLatLong
where:
  destDir is an empty destination (output) directory
  srcFile.shp is the name of the snowmobile shapefile
  codeForMichiganDNR is the EPSG number for your source data (maybe
not required)
  codeForLatLong is the EPSG number for lat-long (probably 4326)

Rich

On Mon, Sep 1, 2008 at 5:30 PM, Chris Fahner <chris at mi-sledding.com> wrote:
> Hello,
>
> I have been trying for the longest time now to convert data I received
from
> Michigan DNR to lat-long data so it can be used within Google maps.
>
> The data is snowmobile trails but I can't for the life of me find a
program
> which does not contain an large price tag to do this for me. I can't see
> spending money on it when I just need to convert the data once and then I
> won't need it done anymore. Does anyone have a good program to use to do
> this. They included all the files with the zip file they sent me. (.dbf,
> .prj, .sbn,.sbx,.shp,.shp.xml,shx). I think I've tried to use more than a
> handful of software's. The closest I got was with the program map window
but
> there seems to be an issue with it reprojecting.
>
>
>
> Thanks,
>
> Chris
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From richard.greenwood at gmail.com  Tue Sep  2 18:21:52 2008
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Tue, 2 Sep 2008 19:21:52 -0600
Subject: [Proj] Michigan georef projection reproject to lat-lon
In-Reply-To: <001a01c90d5d$c3570730$4a051590$@com>
References: <003701c90c8a$b8aa04a0$29fe0de0$@com>
	<ae9185aa0809011711g2aa0912kc90ed90841222ba1@mail.gmail.com>
	<001a01c90d5d$c3570730$4a051590$@com>
Message-ID: <ae9185aa0809021821i7ebada63x162c03e808df40f2@mail.gmail.com>

On Tue, Sep 2, 2008 at 6:41 PM, Chris Fahner <chris at mi-sledding.com> wrote:
> When I tried to run the string I entered I received an error.
> Ogr2ogr.exe D:\proj D:\snow_trails_version1.shp -s_srs EPSG: 99999 -t_srs
> EPSG: 4326
>
> The error is:
> ERROR 4: Unable to open EPSG Support file gcs.csv
> Try setting GDAL_DATA environment variable to point to the
> Directory containing EPSG csv files.
> Failed to process SRS definition: EPSG:
>
> I am using 99999 because I had to copy the data from the .prj file that was
> zipped with the shp file as it wasn't available in the epsg file.
>
> This is what was in the .prj file
> PROJCS["NAD_1983_Hotine_Oblique_Mercator_Azimuth_Natural_Origin",GEOGCS["GCS
> _North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378
> 137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.01745329251994
> 33]],PROJECTION["Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],PARAMETER[
> "False_Easting",2546731.496],PARAMETER["False_Northing",-4354009.816],PARAME
> TER["Scale_Factor",0.9996],PARAMETER["Azimuth",337.25556],PARAMETER["Longitu
> de_Of_Center",-86.0],PARAMETER["Latitude_Of_Center",45.30916666666667],UNIT[
> "Meter",1.0]]

EPSG: 99999 isn't going to work unless there is a definition for 99999
in your epsg file.

You do not need to specify the source coordinate system (-s_srs) if
org recognizes the coordinate system. You can quickly see if ogr
recognizes the coordinate system with:
   orginfo.exe D:\snow_trails_version1.shp

Does the DNR site where you got the file say what coordinate system
the file is in?

-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From ckarney at sarnoff.com  Tue Sep  2 20:57:14 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Tue, 02 Sep 2008 23:57:14 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <200809022004.16203.geraldi.evenden@gmail.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
	<200809022004.16203.geraldi.evenden@gmail.com>
Message-ID: <48BE0B1A.7020605@sarnoff.com>

Gerald I. Evenden wrote:
 > At the moment I have three TMs which produce equivalent accuracy 
except in
 > the "problem area" where longitude approaches 90 degrees from the 
central
 > meridian on the equator.  If you procedures produce finite values at
 > lat=0,lon=90 I would very much like to see your efforts, especially 
in terms
 > of math development.
 >
 > You mention elliptic integrals but I did not see them in the pdf or 
at least
 > did not recognize them.  Is  the math complete in the pdf? It seems 
like it
 > is not. Of course the language is a barrier for me but the math is 
easily
 > understandable.
 >
 > A very quick scan of the pdf file makes me think the math is similar
 > to what I call the Swedish version and I believe they made comment
 > about their version being used in Finland (someone did ;-) ).  But
 > their method fails at 0,90.

Assuming that the "Swedish version" you refer to is

 
http://www.lantmateriet.se/upload/filer/kartor/geodesi_gps_och_detaljmatning/geodesi/Formelsamling/Gauss_Conformal_Projection.pdf

then, indeed, the Finnish report I used is very similar.  There is,
however, one noteworthy difference.  The Swedish algorithm is only
approximately conformal, whereas the Finnish method is conformal (to
round-off).  This is easily remedied by substituting the exact formula
for the conformal latitude (as is done in the Finnish report).  I
implement the inverse of this transformation by Newton's method which
converges quickly to round-off.

The Finnish method has only one essential approximation, namely,
substituting series expansions (accurate to e^8) for the transformations
between conformal and rectifying latitudes.  As you point out, there is
no derivation for these series expansions in the report.  However, I
have derived these expansions and extended them to e^16.  The math here
is standard undergraduate or first year graduate level stuff and I used
macsyma to do the tedious parts of the algebra.  In addition, I've
derived accurate expansions for the convergence and scale.

Any method based on such expansions will fail at lat=0, lon=90*(1-e)
because of a singularity in the complex plane in the transformation from
geodetic to conformal latitudes.  (To be precise the inverse
transformation becomes multi-valued.)  The singularity is mild but it
causes series expansions to fail.  My slower "exact" method can navigate
around the singularity readily enough.  In particular, there is no
singularity at 0N 90E.  For what it's worth, the result here is

     easting  = 25953592.845413590 m
     northing =  9997964.943020998 m
     convergence = 90 deg
     scale    =  18.40462279198669

WGS84: a = 6378137 m, f = 1/298.257223563, k0 = 0.9996, false easting =
false northing = 0 (i.e., 0N 0E -> 0,0).

For my purposes, the exact method serves chiefly to gauge the accuracy
of the approximate method.  In particular, the error in the Finnish and
Swedish methods is 1mm if the distance to 0N 90E is 36 deg, 1m if the
distance is 20 deg, and 1km if the distance is 10 deg.  I.e., they
"fail" well before 0N 90E is reached.  Including additional terms in the
series will probably not change this appreciably (instead it will
increase the accuracy where it's already pretty good).

The exact method and the derivations of the various series
approximations are all done in macsyma.  You'll probably need to have
macsyma installed if you want to use these.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From richard.greenwood at gmail.com  Wed Sep  3 04:41:27 2008
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed, 3 Sep 2008 05:41:27 -0600
Subject: [Proj] Michigan georef projection reproject to lat-lon
In-Reply-To: <001a01c90d5d$c3570730$4a051590$@com>
References: <003701c90c8a$b8aa04a0$29fe0de0$@com>
	<ae9185aa0809011711g2aa0912kc90ed90841222ba1@mail.gmail.com>
	<001a01c90d5d$c3570730$4a051590$@com>
Message-ID: <ae9185aa0809030441h7e3f854cj3da4fe4c58ba103c@mail.gmail.com>

Looks like your source EPSG code might be 3078

Rich

On Tue, Sep 2, 2008 at 6:41 PM, Chris Fahner <chris at mi-sledding.com> wrote:
> When I tried to run the string I entered I received an error.
> Ogr2ogr.exe D:\proj D:\snow_trails_version1.shp -s_srs EPSG: 99999 -t_srs
> EPSG: 4326
>
> The error is:
> ERROR 4: Unable to open EPSG Support file gcs.csv
> Try setting GDAL_DATA environment variable to point to the
> Directory containing EPSG csv files.
> Failed to process SRS definition: EPSG:
>
> I am using 99999 because I had to copy the data from the .prj file that was
> zipped with the shp file as it wasn't available in the epsg file.
>
> This is what was in the .prj file
> PROJCS["NAD_1983_Hotine_Oblique_Mercator_Azimuth_Natural_Origin",GEOGCS["GCS
> _North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378
> 137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.01745329251994
> 33]],PROJECTION["Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],PARAMETER[
> "False_Easting",2546731.496],PARAMETER["False_Northing",-4354009.816],PARAME
> TER["Scale_Factor",0.9996],PARAMETER["Azimuth",337.25556],PARAMETER["Longitu
> de_Of_Center",-86.0],PARAMETER["Latitude_Of_Center",45.30916666666667],UNIT[
> "Meter",1.0]]
>
>
> -----Original Message-----
> From: proj-bounces at lists.maptools.org
> [mailto:proj-bounces at lists.maptools.org] On Behalf Of Richard Greenwood
> Sent: Monday, September 01, 2008 8:11 PM
> To: PROJ.4 and general Projections Discussions
> Subject: Re: [Proj] Michigan georef projection reproject to lat-lon
>
> FWTools http://fwtools.maptools.org/ (which includes Proj.4) has a
> command line program called ogr2ogr which includes coordinate system
> transformation. At the command prompt, you would enter something like:
>   ogr2ogr destDir srcFile.shp -s_srs EPSG:codeForMichiganDNR -t_srs
> EPSG:codeForLatLong
> where:
>  destDir is an empty destination (output) directory
>  srcFile.shp is the name of the snowmobile shapefile
>  codeForMichiganDNR is the EPSG number for your source data (maybe
> not required)
>  codeForLatLong is the EPSG number for lat-long (probably 4326)
>
> Rich
>
> On Mon, Sep 1, 2008 at 5:30 PM, Chris Fahner <chris at mi-sledding.com> wrote:
>> Hello,
>>
>> I have been trying for the longest time now to convert data I received
> from
>> Michigan DNR to lat-long data so it can be used within Google maps.
>>
>> The data is snowmobile trails but I can't for the life of me find a
> program
>> which does not contain an large price tag to do this for me. I can't see
>> spending money on it when I just need to convert the data once and then I
>> won't need it done anymore. Does anyone have a good program to use to do
>> this. They included all the files with the zip file they sent me. (.dbf,
>> .prj, .sbn,.sbx,.shp,.shp.xml,shx). I think I've tried to use more than a
>> handful of software's. The closest I got was with the program map window
> but
>> there seems to be an issue with it reprojecting.
>>
>>
>>
>> Thanks,
>>
>> Chris
>>
>>
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>>
>
>
>
> --
> Richard Greenwood
> richard.greenwood at gmail.com
> www.greenwoodmap.com
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From geraldi.evenden at gmail.com  Wed Sep  3 11:51:00 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 3 Sep 2008 14:51:00 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <48BE0B1A.7020605@sarnoff.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
	<200809022004.16203.geraldi.evenden@gmail.com>
	<48BE0B1A.7020605@sarnoff.com>
Message-ID: <200809031451.00883.geraldi.evenden@gmail.com>

On Tuesday 02 September 2008 11:57:14 pm Charles Karney wrote:
> Gerald I. Evenden wrote:
>  > At the moment I have three TMs which produce equivalent accuracy
>
> except in
>
>  > the "problem area" where longitude approaches 90 degrees from the
>
> central
>
>  > meridian on the equator.  If you procedures produce finite values at
>  > lat=0,lon=90 I would very much like to see your efforts, especially
>
> in terms
>
>  > of math development.
>  >
>  > You mention elliptic integrals but I did not see them in the pdf or
>
> at least
>
>  > did not recognize them.  Is  the math complete in the pdf? It seems
>
> like it
>
>  > is not. Of course the language is a barrier for me but the math is
>
> easily
>
>  > understandable.
>  >
>  > A very quick scan of the pdf file makes me think the math is similar
>  > to what I call the Swedish version and I believe they made comment
>  > about their version being used in Finland (someone did ;-) ).  But
>  > their method fails at 0,90.
>
> Assuming that the "Swedish version" you refer to is
>
>
> http://www.lantmateriet.se/upload/filer/kartor/geodesi_gps_och_detaljmatnin
>g/geodesi/Formelsamling/Gauss_Conformal_Projection.pdf

I already have that pdf and yes, that is the one I refer to as the "Swedish 
TM".

> then, indeed, the Finnish report I used is very similar.  There is,
> however, one noteworthy difference.  The Swedish algorithm is only
> approximately conformal, whereas the Finnish method is conformal (to
> round-off).  This is easily remedied by substituting the exact formula
> for the conformal latitude (as is done in the Finnish report).  I
> implement the inverse of this transformation by Newton's method which
> converges quickly to round-off.

In general, I am not that interested in answers to machine precision merely to 
about 0,0001mm or 0,001mm would be acceptable.  The only place in libproj4 
where I went close to machine precision is the meridian distance function 
when I changed over to elliptic integrals in the computation and dropped the 
traditional sine power series expansion of the integral.

Also, (not to start an argument) I am especially forgiving on precision of 
projection procedures covering large areas as in continental or global 
mapping.  Precision is a property to be only concerned about in cadestral 
mapping and grid systems that traditionally cover small areas due to the 
increase of scale factor errors in the larger region (which has nothing to do 
with computational precision).

> The Finnish method has only one essential approximation, namely,
> substituting series expansions (accurate to e^8) for the transformations
> between conformal and rectifying latitudes.  As you point out, there is
> no derivation for these series expansions in the report.  However, I
> have derived these expansions and extended them to e^16.  The math here
> is standard undergraduate or first year graduate level stuff and I used
> macsyma to do the tedious parts of the algebra.  In addition, I've
> derived accurate expansions for the convergence and scale.
>
> Any method based on such expansions will fail at lat=0, lon=90*(1-e)
> because of a singularity in the complex plane in the transformation from
> geodetic to conformal latitudes.  (To be precise the inverse
> transformation becomes multi-valued.)  The singularity is mild but it
> causes series expansions to fail.  My slower "exact" method can navigate
> around the singularity readily enough.  In particular, there is no
> singularity at 0N 90E.  For what it's worth, the result here is
>
>      easting  = 25953592.845413590 m
>      northing =  9997964.943020998 m
>      convergence = 90 deg
>      scale    =  18.40462279198669

The nature of this singularity blows libproj4's basic capabilty but I am still 
interested in this problem purely academically as I feel there is not a 
practical use for TM to the E-W limits---especially if you have to pay dearly 
in cpu time to get there.

> WGS84: a = 6378137 m, f = 1/298.257223563, k0 = 0.9996, false easting =
> false northing = 0 (i.e., 0N 0E -> 0,0).
>
> For my purposes, the exact method serves chiefly to gauge the accuracy
> of the approximate method.  In particular, the error in the Finnish and

That is a useful and valuable asset.

> Swedish methods is 1mm if the distance to 0N 90E is 36 deg, 1m if the
> distance is 20 deg, and 1km if the distance is 10 deg.  I.e., they
> "fail" well before 0N 90E is reached.  Including additional terms in the
> series will probably not change this appreciably (instead it will
> increase the accuracy where it's already pretty good).
>
> The exact method and the derivations of the various series
> approximations are all done in macsyma.  You'll probably need to have
> macsyma installed if you want to use these.

I have maxima and wxmaxima on my machine which seem to be related some time 
ago.  It is my understanding that macsyma is a commercial product and thus 
outside my pocketbook.  I do everything on the cheap.  ;-)  It allows me to 
make everthing I do free.

The math presented by Thompson and Lee seem quite at odds with several of the 
expanded range methods in that they express the problem in Jacobian 
functions.  Is there a parallel of have you looked into their methods?

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From strebe at aol.com  Wed Sep  3 12:26:20 2008
From: strebe at aol.com (strebe at aol.com)
Date: Wed, 03 Sep 2008 15:26:20 -0400
Subject: [Proj] Re: Transverse Mercator algorithm
In-Reply-To: <200809031451.00883.geraldi.evenden@gmail.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>	<200809022004.16203.geraldi.evenden@gmail.com>	<48BE0B1A.7020605@sarnoff.com>
	<200809031451.00883.geraldi.evenden@gmail.com>
Message-ID: <8CADC12145C45C5-1388-2AE@mblk-d41.sysops.aol.com>


 
Gerald I. Evenden wrote:


 
>The math presented by Thompson and Lee seem quite at odds with several of the 
>expanded range methods in that they express the problem in Jacobian 
>functions.  Is there a parallel of have you looked into their methods?

The Jacobian elliptic functions were a way of developing two intermediate projections, and they allow for a pithy expression of the mathematics. The last projection collapses into the elliptic integral development through a sequence of substitutions and cancellations.

Regards,
-- daan Strebe



 

-----Original Message-----
From: Gerald I. Evenden <geraldi.evenden at gmail.com>
To: Charles Karney <ckarney at sarnoff.com>
Cc: proj at lists.maptools.org
Sent: Wed, 3 Sep 2008 11:51 am
Subject: Re: [Proj] Transverse Mercator algorithm










On Tuesday 02 September 2008 11:57:14 pm Charles Karney wrote:
> Gerald I. Evenden wrote:
>  > At the moment I have three TMs which produce equivalent accuracy
>
> except in
>
>  > the "problem area" where longitude approaches 90 degrees from the
>
> central
>
>  > meridian on the equator.  If you procedures produce finite values at
>  > lat=0,lon=90 I would very much like to see your efforts, especially
>
> in terms
>
>  > of math development.
>  >
>  > You mention elliptic integrals but I did not see them in the pdf or
>
> at least
>
>  > did not recognize them.  Is  the math complete in the pdf? It seems
>
> like it
>
>  > is not. Of course the language is a barrier for me but the math is
>
> easily
>
>  > understandable.
>  >
>  > A very quick scan of the pdf file makes me think the math is similar
>  > to what I call the Swedish version and I believe they made comment
>  > about their version being used in Finland (someone did ;-) ).  But
>  > their method fails at 0,90.
>
> Assuming that the "Swedish version" you refer to is
>
>
> http://www.lantmateriet.se/upload/filer/kartor/geodesi_gps_och_detaljmatnin
>g/geodesi/Formelsamling/Gauss_Conformal_Projection.pdf

I already have that pdf and yes, that is the one I refer to as the "Swedish 
TM".

> then, indeed, the Finnish report I used is very similar.  There is,
> however, one noteworthy difference.  The Swedish algorithm is only
> approximately conformal, whereas the Finnish method is conformal (to
> round-off).  This is easily remedied by substituting the exact formula
> for the conformal latitude (as is done in the Finnish report).  I
> implement the inverse of this transformation by Newton's method which
> converges quickly to round-off.

In general, I am not that interested in answers to machine precision merely to 
about 0,0001mm or 0,001mm would be acceptable.  The only place in libproj4 
where I went close to machine precision is the meridian distance function 
when I changed over to elliptic integrals in the computation and dropped the 
traditional sine power series expansion of the integral.

Also, (not to start an argument) I am especially forgiving on precision of 
projection procedures covering large areas as in continental or global 
mapping.  Precision is a property to be only concerned about in cadestral 
mapping and grid systems that traditionally cover small areas due to the 
increase of scale factor errors in the larger region (which has nothing to do 
with computational precision).

> The Finnish method has only one essential approximation, namely,
> substituting series expansions (accurate to e^8) for the transformations
> between conformal and rectifying latitudes.  As you point out, there is
> no derivation for these series expansions in the report.  However, I
> have derived these expansions and extended them to e^16.  The math here
> is standard undergraduate or first year graduate level stuff and I used
> macsyma to do the tedious parts of the algebra.  In addition, I've
> derived accurate expansions for the convergence and scale.
>
> Any method based on such expansions will fail at lat=0, lon=90*(1-e)
> because of a singularity in the complex plane in the transformation from
> geodetic to conformal latitudes.  (To be precise the inverse
> transformation becomes multi-valued.)  The singularity is mild but it
> causes series expansions to fail.  My slower "exact" method can navigate
> around the singularity readily enough.  In particular, there is no
> singularity at 0N 90E.  For what it's worth, the result here is
>
>      easting  = 25953592.845413590 m
>      northing =  9997964.943020998 m
>      convergence = 90 deg
>      scale    =  18.40462279198669

The nature of this singularity blows libproj4's basic capabilty but I am still 
interested in this problem purely academically as I feel there is not a 
practical use for TM to the E-W limits---especially if you have to pay dearly 
in cpu time to get there.

> WGS84: a = 6378137 m, f = 1/298.257223563, k0 = 0.9996, false easting =
> false northing = 0 (i.e., 0N 0E -> 0,0).
>
> For my purposes, the exact method serves chiefly to gauge the accuracy
> of the approximate method.  In particular, the error in the Finnish and

That is a useful and valuable asset.

> Swedish methods is 1mm if the distance to 0N 90E is 36 deg, 1m if the
> distance is 20 deg, and 1km if the distance is 10 deg.  I.e., they
> "fail" well before 0N 90E is reached.  Including additional terms in the
> series will probably not change this appreciably (instead it will
> increase the accuracy where it's already pretty good).
>
> The exact method and the derivations of the various series
> approximations are all done in macsyma.  You'll probably need to have
> macsyma installed if you want to use these.

I have maxima and wxmaxima on my machine which seem to be related some time 
ago.  It is my understanding that macsyma is a commercial product and thus 
outside my pocketbook.  I do everything on the cheap.  ;-)  It allows me to 
make everthing I do free.

The math presented by Thompson and Lee seem quite at odds with several of the 
expanded range methods in that they express the problem in Jacobian 
functions.  Is there a parallel of have you looked into their methods?

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20080903/5f1f677f/attachment.html>

From geraldi.evenden at gmail.com  Wed Sep  3 12:58:31 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 3 Sep 2008 15:58:31 -0400
Subject: [Proj] Re: Transverse Mercator algorithm
In-Reply-To: <8CADC12145C45C5-1388-2AE@mblk-d41.sysops.aol.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
	<200809031451.00883.geraldi.evenden@gmail.com>
	<8CADC12145C45C5-1388-2AE@mblk-d41.sysops.aol.com>
Message-ID: <200809031558.31695.geraldi.evenden@gmail.com>

On Wednesday 03 September 2008 3:26:20 pm strebe at aol.com wrote:
> Gerald I. Evenden wrote:
> >The math presented by Thompson and Lee seem quite at odds with several of
> > the expanded range methods in that they express the problem in Jacobian
> > functions.  Is there a parallel of have you looked into their methods?
>
> The Jacobian elliptic functions were a way of developing two intermediate
> projections, and they allow for a pithy expression of the mathematics. The
> last projection collapses into the elliptic integral development through a
> sequence of substitutions and cancellations.
>
> Regards,
> -- daan Strebe

I know, I know. Can't you leave this conversation alone?   PLEASE!

I know I am stupid to even respond but I do not want to get into side 
arguments about TM.  Geeees!

F__k!
-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at sarnoff.com  Wed Sep  3 13:59:53 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Wed, 03 Sep 2008 16:59:53 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <200809031451.00883.geraldi.evenden@gmail.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
	<200809022004.16203.geraldi.evenden@gmail.com>
	<48BE0B1A.7020605@sarnoff.com>
	<200809031451.00883.geraldi.evenden@gmail.com>
Message-ID: <48BEFAC9.9030100@sarnoff.com>

 >> There is, however, one noteworthy difference.  The Swedish algorithm
 >> is only approximately conformal, whereas the Finnish method is
 >> conformal (to round-off).  This is easily remedied by substituting
 >> the exact formula for the conformal latitude (as is done in the
 >> Finnish report).
 >
 > In general, I am not that interested in answers to machine precision
 > merely to about 0,0001mm or 0,001mm would be acceptable.

Fair enough.  Nevertheless, it does seem worth preserving the conformal
property to machine precision -- especially when it can be done so
easily.  (As an example of why this is useful, you can compute accurate
transformations from one UTM zone to the neighboring one which rely on
the fact that the transformation is conformal.  A 4-point fit gives 2um
accuracy over a 10km x 10km area.)

 >> For my purposes, the exact method serves chiefly to gauge the
 >> accuracy of the approximate method.  In particular, the error in the
 >> Finnish and
 >
 > That is a useful and valuable asset.
 >
 >> The exact method and the derivations of the various series
 >> approximations are all done in macsyma.  You'll probably need to have
 >> macsyma installed if you want to use these.
 >
 > I have maxima and wxmaxima on my machine which seem to be related some
 > time ago.  It is my understanding that macsyma is a commercial product
 > and thus outside my pocketbook.  I do everything on the cheap.  ;-) It
 > allows me to make everything I do free.

No need to pay.  I use the free SourceForge version.

It'll take a day or so to make my macsyma code for the exact transverse
Mercator transformation presentable.  In the meantime, perhaps you can
verify that your version of maxima functions the way I expect...

Download

     http://charles.karney.info/geographic/ellint.mac

Start maxima, and at the prompts, enter:

     load("ellint.mac")$
     ei(0.5b0+%i*0.3b0,0.1b0);

You should see something like:

     $ maxima
     Maxima 5.15.0 http://maxima.sourceforge.net
     Using Lisp CLISP 2.43 (2007-11-18)
     Distributed under the GNU Public License. See the file COPYING.
     Dedicated to the memory of William Schelter.
     The function bug_report() provides bug reporting information.
     (%i1) load("ellint.mac")$
     (%i2) ei(0.5b0+%i*0.3b0,0.1b0);
     (%o2) 2.96791299781263464924153153342948346508216221524596248948086\
     569795186664726317202946771827533813431304024592226608707871b-1 %i +
     4.99982389810326059482523070296819795538149014362475838573470325689\
     693122595700138979618859431972907386511841619290335085b-1
     (%i3)

If you get the same or equivalent output then you should be in good
shape.

 > The math presented by Thompson and Lee seem quite at odds with several
 > of the expanded range methods in that they express the problem in
 > Jacobian functions.  Is there a parallel of have you looked into their
 > methods?

The Finnish algorithm is related.  The series relating [xi,eta] and
[xi',eta'] are just expansions (in eccentricity) of the transformation
between two of the TM projections described on p. 92 of Lee's 1976
monograph (namely what he calls the spheroidal projection [xi',eta'] and
the Gauss-Krueger projection [xi,eta]).

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From chris at mi-sledding.com  Wed Sep  3 14:05:04 2008
From: chris at mi-sledding.com (Chris Fahner)
Date: Wed, 3 Sep 2008 17:05:04 -0400
Subject: [Proj] Michigan georef projection reproject to lat-lon
In-Reply-To: <ae9185aa0809030441h7e3f854cj3da4fe4c58ba103c@mail.gmail.com>
References: <003701c90c8a$b8aa04a0$29fe0de0$@com>	<ae9185aa0809011711g2aa0912kc90ed90841222ba1@mail.gmail.com>	<001a01c90d5d$c3570730$4a051590$@com>
	<ae9185aa0809030441h7e3f854cj3da4fe4c58ba103c@mail.gmail.com>
Message-ID: <001201c90e08$bda0d090$38e271b0$@com>

Tried to send the zip file last night just noticed that it is awaiting
approval from the moderator as it was over 40kb. I put that on my site. If
you want to look at what I received from Michigan DNR.


E-mail from last night.
To my knowledge this is the coordinate system for the file.
Hotine_Oblique_Mercator_Azimuth_Natural_Origin

When I run orginfo.exe on the file I returns Using driver 'ESRI Shapefile'
successful.
1: snow_trails_version1 <Line String>

File is located at. http://www.mi-sledding.com/snow_trails_version1.zip


Chris

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptool
s.org] On Behalf Of Richard Greenwood
Sent: Wednesday, September 03, 2008 7:41 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Michigan georef projection reproject to lat-lon

Looks like your source EPSG code might be 3078

Rich

On Tue, Sep 2, 2008 at 6:41 PM, Chris Fahner <chris at mi-sledding.com> wrote:
> When I tried to run the string I entered I received an error.
> Ogr2ogr.exe D:\proj D:\snow_trails_version1.shp -s_srs EPSG: 99999 -t_srs
> EPSG: 4326
>
> The error is:
> ERROR 4: Unable to open EPSG Support file gcs.csv
> Try setting GDAL_DATA environment variable to point to the
> Directory containing EPSG csv files.
> Failed to process SRS definition: EPSG:
>
> I am using 99999 because I had to copy the data from the .prj file that
was
> zipped with the shp file as it wasn't available in the epsg file.
>
> This is what was in the .prj file
>
PROJCS["NAD_1983_Hotine_Oblique_Mercator_Azimuth_Natural_Origin",GEOGCS["GCS
>
_North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378
>
137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.01745329251994
>
33]],PROJECTION["Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],PARAMETER[
>
"False_Easting",2546731.496],PARAMETER["False_Northing",-4354009.816],PARAME
>
TER["Scale_Factor",0.9996],PARAMETER["Azimuth",337.25556],PARAMETER["Longitu
>
de_Of_Center",-86.0],PARAMETER["Latitude_Of_Center",45.30916666666667],UNIT[
> "Meter",1.0]]
>
>
> -----Original Message-----
> From: proj-bounces at lists.maptools.org
> [mailto:proj-bounces at lists.maptools.org] On Behalf Of Richard Greenwood
> Sent: Monday, September 01, 2008 8:11 PM
> To: PROJ.4 and general Projections Discussions
> Subject: Re: [Proj] Michigan georef projection reproject to lat-lon
>
> FWTools http://fwtools.maptools.org/ (which includes Proj.4) has a
> command line program called ogr2ogr which includes coordinate system
> transformation. At the command prompt, you would enter something like:
>   ogr2ogr destDir srcFile.shp -s_srs EPSG:codeForMichiganDNR -t_srs
> EPSG:codeForLatLong
> where:
>  destDir is an empty destination (output) directory
>  srcFile.shp is the name of the snowmobile shapefile
>  codeForMichiganDNR is the EPSG number for your source data (maybe
> not required)
>  codeForLatLong is the EPSG number for lat-long (probably 4326)
>
> Rich
>
> On Mon, Sep 1, 2008 at 5:30 PM, Chris Fahner <chris at mi-sledding.com>
wrote:
>> Hello,
>>
>> I have been trying for the longest time now to convert data I received
> from
>> Michigan DNR to lat-long data so it can be used within Google maps.
>>
>> The data is snowmobile trails but I can't for the life of me find a
> program
>> which does not contain an large price tag to do this for me. I can't see
>> spending money on it when I just need to convert the data once and then I
>> won't need it done anymore. Does anyone have a good program to use to do
>> this. They included all the files with the zip file they sent me. (.dbf,
>> .prj, .sbn,.sbx,.shp,.shp.xml,shx). I think I've tried to use more than a
>> handful of software's. The closest I got was with the program map window
> but
>> there seems to be an issue with it reprojecting.
>>
>>
>>
>> Thanks,
>>
>> Chris
>>
>>
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>>
>
>
>
> --
> Richard Greenwood
> richard.greenwood at gmail.com
> www.greenwoodmap.com
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From geraldi.evenden at gmail.com  Wed Sep  3 14:50:14 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 3 Sep 2008 17:50:14 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <48BEFAC9.9030100@sarnoff.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
	<200809031451.00883.geraldi.evenden@gmail.com>
	<48BEFAC9.9030100@sarnoff.com>
Message-ID: <200809031750.14355.geraldi.evenden@gmail.com>

On Wednesday 03 September 2008 4:59:53 pm Charles Karney wrote:
>  >> There is, however, one noteworthy difference.  The Swedish algorithm
>  >> is only approximately conformal, whereas the Finnish method is
>  >> conformal (to round-off).  This is easily remedied by substituting
>  >> the exact formula for the conformal latitude (as is done in the
>  >> Finnish report).
>  >
>  > In general, I am not that interested in answers to machine precision
>  > merely to about 0,0001mm or 0,001mm would be acceptable.
>
> Fair enough.  Nevertheless, it does seem worth preserving the conformal
> property to machine precision -- especially when it can be done so
> easily.  (As an example of why this is useful, you can compute accurate
> transformations from one UTM zone to the neighboring one which rely on
> the fact that the transformation is conformal.  A 4-point fit gives 2um
> accuracy over a 10km x 10km area.)

I am not exactly sure that I follow what you are doing above.  In one mental 
image I have of your description I feel you would run afoul of scale error 
due to the non-equivalent distance that the particular area is away from the 
respect CM of the two zones.

I really need a step-by-step description of your operation.

>  >> For my purposes, the exact method serves chiefly to gauge the
>  >> accuracy of the approximate method.  In particular, the error in the
>  >> Finnish and
>  >
>  > That is a useful and valuable asset.
>  >
>  >> The exact method and the derivations of the various series
>  >> approximations are all done in macsyma.  You'll probably need to have
>  >> macsyma installed if you want to use these.
>  >
>  > I have maxima and wxmaxima on my machine which seem to be related some
>  > time ago.  It is my understanding that macsyma is a commercial product
>  > and thus outside my pocketbook.  I do everything on the cheap.  ;-) It
>  > allows me to make everything I do free.
>
> No need to pay.  I use the free SourceForge version.

I generally rely on the rpm method of download for my kubuntu (also Debain) 
system and so far I have not located and rpm for macsyma.  Doing a raw 
compile can be a bit of a hassle---especially on large bits of software---and 
I like to avoid it.

> It'll take a day or so to make my macsyma code for the exact transverse
> Mercator transformation presentable.  In the meantime, perhaps you can
> verify that your version of maxima functions the way I expect...

I will try this.  Back to you later on this.

> Download
>
>      http://charles.karney.info/geographic/ellint.mac
>
> Start maxima, and at the prompts, enter:
>
>      load("ellint.mac")$
>      ei(0.5b0+%i*0.3b0,0.1b0);
>
> You should see something like:
>
>      $ maxima
>      Maxima 5.15.0 http://maxima.sourceforge.net
>      Using Lisp CLISP 2.43 (2007-11-18)
>      Distributed under the GNU Public License. See the file COPYING.
>      Dedicated to the memory of William Schelter.
>      The function bug_report() provides bug reporting information.
>      (%i1) load("ellint.mac")$
>      (%i2) ei(0.5b0+%i*0.3b0,0.1b0);
>      (%o2) 2.96791299781263464924153153342948346508216221524596248948086\
>      569795186664726317202946771827533813431304024592226608707871b-1 %i +
>      4.99982389810326059482523070296819795538149014362475838573470325689\
>      693122595700138979618859431972907386511841619290335085b-1
>      (%i3)
>
> If you get the same or equivalent output then you should be in good
> shape.

Glory be!  I looked at the first couple and last couple of digits and they 
matched

(%i1) load("ellint.mac");
(%o1)                             ellint.mac
(%i2) ei(0.5b0+%i*0.3b0,0.1b0);
(%o2) 
2.9679129978126346492415315334294834650821622152459624894808656979518666\
4726317202946771827533813431304024592226608707871b-1 %i + 
4.999823898103260594\
825230702968197955381490143624758385734703256896931225957001389796188594319729\
07386511841619290335085b-1

>  > The math presented by Thompson and Lee seem quite at odds with several
>  > of the expanded range methods in that they express the problem in
>  > Jacobian functions.  Is there a parallel of have you looked into their
>  > methods?
>
> The Finnish algorithm is related.  The series relating [xi,eta] and
> [xi',eta'] are just expansions (in eccentricity) of the transformation
> between two of the TM projections described on p. 92 of Lee's 1976
> monograph (namely what he calls the spheroidal projection [xi',eta'] and
> the Gauss-Krueger projection [xi,eta]).

What really held me hostage on Lee's paper were the two equations 10 and 11 
and I was not sure what to do at that point so I decided not to waste any 
more aspirin.  Duh on my part.  After messing around with Dozier's method I 
got used to the Jacobians and ran into plenty of support software like the 
GSL library.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From chris at mi-sledding.com  Wed Sep  3 16:51:36 2008
From: chris at mi-sledding.com (Chris Fahner)
Date: Wed, 3 Sep 2008 19:51:36 -0400
Subject: [Proj] Michigan georef projection reproject to lat-lon
In-Reply-To: <ae9185aa0809030441h7e3f854cj3da4fe4c58ba103c@mail.gmail.com>
References: <003701c90c8a$b8aa04a0$29fe0de0$@com>	<ae9185aa0809011711g2aa0912kc90ed90841222ba1@mail.gmail.com>	<001a01c90d5d$c3570730$4a051590$@com>
	<ae9185aa0809030441h7e3f854cj3da4fe4c58ba103c@mail.gmail.com>
Message-ID: <001901c90e20$00b62850$022278f0$@com>

When I tried 
Ogr2ogr.exe D:\proj D:\snow_trails_version1.shp -s_srs EPSG: 3078 -t_srs
EPSG: 4326
And
Ogr2ogr.exe D:\proj D:\snow_trails_version1.shp -s_srs EPSG:

They both returned the same error code that I had last night
> ERROR 4: Unable to open EPSG Support file gcs.csv
> Try setting GDAL_DATA environment variable to point to the
> Directory containing EPSG csv files.
> Failed to process SRS definition: EPSG:

Chris

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Richard Greenwood
Sent: Wednesday, September 03, 2008 7:41 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Michigan georef projection reproject to lat-lon

Looks like your source EPSG code might be 3078

Rich




From ckarney at sarnoff.com  Wed Sep  3 20:47:06 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Wed, 03 Sep 2008 23:47:06 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <200809031750.14355.geraldi.evenden@gmail.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
	<200809031451.00883.geraldi.evenden@gmail.com>
	<48BEFAC9.9030100@sarnoff.com>
	<200809031750.14355.geraldi.evenden@gmail.com>
Message-ID: <48BF5A3A.40309@sarnoff.com>

 >> (As an example of why this is useful, you can compute accurate
 >> transformations from one UTM zone to the neighboring one which rely
 >> on the fact that the transformation is conformal.  A 4-point fit
 >> gives 2um accuracy over a 10km x 10km area.)

I checked my notes on this the UTM<->UTM error is 0.5um -- see below

 > I am not exactly sure that I follow what you are doing above.  In one
 > mental image I have of your description I feel you would run afoul of
 > scale error due to the non-equivalent distance that the particular
 > area is away from the respect CM of the two zones.
 >
 > I really need a step-by-step description of your operation.

Here goes...  Let the coordinates of a point be

    x,y in zone 38

and

    x',y' in zone 39

The mapping x,y -> x',y' is conformal; thus the mapping can be written
as

    z' = f(z)

where z = x + iy, z' = x' + iy', and f is an analytic function.  We
approximate f(z) by a polynomial in z, g(z), and we pick the polynomial
to be of (n-1)th order such that

    g(z) = f(z)

at n points z = z1, z2, z3 ... zn.  The resulting polynomial is

    g(z) = sum_i f(zi) * product_j!=n (z-zj)/(zi-zj)

(This probably isn't a convenient form of the polynomial for evaluation
-- but never mind that.)

If four points z1, z2, z3, z4 are taken at the corners of a square of
side 100km then the difference |g(z) - f(z)| ~ 5mm within the square.
(I did this test with a square whose SW corner is at 36.12N 47.33E.)
For a 10km square the error is 0.5um.

The same technique can be used to convert from UTM to geographic
coordinates by approximating the conformal mapping from UTM to Mercator
followed by the conversion from isometric to geodetic latitude.  In this
case the error for a 100km square is 2cm.

Incidentally with just a two-point fit, the approximate transformation
(which is just a linear polynomial) accounts for the changes in scale
and meridian convergence.

This procedure depends on the fact that f is a conformal mapping.  For
this reason, it's important that numerical schemes preserve
conformalality to machine precision.

 > What really held me hostage on Lee's paper were the two equations 10
 > and 11 and I was not sure what to do at that point so I decided not to
 > waste any more aspirin.

Which paper of Lee's is this?

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From Mikael.Rittri at carmenta.com  Thu Sep  4 01:59:40 2008
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Thu, 4 Sep 2008 10:59:40 +0200
Subject: [Proj] What is the meaning of the "Mercator 41" projection
	inEPSG:3752 ?
In-Reply-To: <209223.63576.qm@web110015.mail.gq1.yahoo.com>
References: <200809021629.16330.geraldi.evenden@gmail.com>
	<209223.63576.qm@web110015.mail.gq1.yahoo.com>
Message-ID: <FAF6E56B26D2044696772EBE89B15351011B203B@posty.carmenta.se>

Thanks for your replies. 

Hamish wrote: 
> Are you looking at this dataset or something else 
> like gas exploration maps from NZ's GNS? 

Well, actually, no.  I am just writing code to convert an OGRSpatialReference
to the corresponding thing in Carmenta Engine.  To create test examples for 
various projections, it is convenient to call 

    OGRSpatialReference.importFromEPSG( int nCode );

and when I was looking for examples of Mercator, I found EPSG:3752, 
which I thought was interesting, until I realized that I had no idea 
of what the result ought to be. 

> fwiw, the ESPG entry is:
> # WGS 84 / Mercator 41
> <3752> +proj=merc +lon_0=100 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs  <>

Hm. I don't think this can be correct, since the number 41 does not occur anywhere.

By the way, there is no way in Carmenta Engine to set a non-zero 
"Latitude of natural origin" for a Mercator projection. (A standard 
parallel can be set, though.) I was thinking that maybe I could emulate 
a non-equatorial natural origin by fiddling with the falseNorthing 
instead. But if this is a very unusual way to define a Mercator 
projection, I suppose I ought to throw an exception instead. 

Best regards,
       Mikael 

--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07 
mikael.rittri at carmenta.com
www.carmenta.com
-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Hamish
Sent: den 3 september 2008 01:55
To: proj at lists.maptools.org; geraldi.evenden at gmail.com
Subject: Re: [Proj] What is the meaning of the "Mercator 41" projection inEPSG:3752 ?

Mikael Rittri wrote:
> > I am trying to understand the meaning of EPSG:3752, "WGS 84 / 
> > Mercator 41", used around New Zealand.

note that "used around NZ" does not mean that it is widely used within NZ.

I seem to recall that the NZ Marine Environment Classification (MEC) used some thing similar:

PROJCS["Clarke_1866_Mercator",GEOGCS["GCS_Clarke_1866",DATUM["D_Clarke_1866",SPHEROID["Clarke_1866",6378206.4,294.9786982]
],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMET
ER["False_Northing",0.0],PARAMETER["Central_Meridian",100.0],PARAMETER["Standard_Parallel_1",-46.0],UNIT["Meter",1.0]]

http://www.mfe.govt.nz/publications/ser/marine-environment-classification-jun05/

In the mailing list archives you'll find my struggles to understand why they used that. If it of great concern


This is dealing with NZ's offshore territorial waters (EEZ) which spread out over huge parts of the pacific due to the many offshore islands and lack of neighbors. The dataset is primarily a 1km raster grid, so working to the 0.1m (at sea!) isn't really too much of a practical concern.

Are you looking at this dataset or something else like gas exploration maps from NZ's GNS? In my wanders I have not seen it used outside the MEC dataset and do not understand the benefits or reasons for using that.

fwiw, the ESPG entry is:
# WGS 84 / Mercator 41
<3752> +proj=merc +lon_0=100 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs  <>


Gerald:
> Seems a bit odd that NZ would be using Mercator.  They used to have a 
> unique TMish under +proj=nzmg and now I think I read that they went to 
> a new projection.  Forgot the reference but probably TM.

The old one used nationwide is NZ Map Grid using the NZGD 1949 datum.
The new one used nationwide is "NZ TM" using the NZGD 2000 datum.

see epsg codes 27200 and 2193. see also Clifford Mugnier's Grids & Datums article in PE&R from May 2005 for a nice history.

Especially NZMG is not meant to be used far offshore. It blows up by the time you get to the subantarctic islands.


> Plain old Mercator as a projection for New Zealand seems a bit 
> strange. I can't imagine a poorer projection.

If it helps (I suspect it doesn't), perhaps it is better to think of this as for the southwestern pacific rather than the NZ mainland.


Hamish



      

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From Mikael.Rittri at carmenta.com  Thu Sep  4 03:39:03 2008
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Thu, 4 Sep 2008 12:39:03 +0200
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <48BEFAC9.9030100@sarnoff.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com><200809022004.16203.geraldi.evenden@gmail.com><48BE0B1A.7020605@sarnoff.com><200809031451.00883.geraldi.evenden@gmail.com>
	<48BEFAC9.9030100@sarnoff.com>
Message-ID: <FAF6E56B26D2044696772EBE89B15351011B206D@posty.carmenta.se>


Charles Karney wrote:

> The Finnish algorithm is related.  The series relating [xi,eta] and [xi',eta'] are 
> just expansions (in eccentricity) of the transformation between two of the TM projections 
> described on p. 92 of Lee's 1976 monograph (namely what he calls the spheroidal 
> projection [xi',eta'] and the Gauss-Krueger projection [xi,eta]).

Am I right in thinking that the spheroidal projection [xi', eta'] is the same 
as Gauss-Schreiber?  Except that xi' and eta' are based on an ellipsoid whose 
radius is 1. (Sorry, I am not quite sure what I mean by ellipsoid radius in the 
previous sentence.)

Best regards,

--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07 
mikael.rittri at carmenta.com
www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Charles Karney
Sent: den 3 september 2008 23:00
To: geraldi.evenden at gmail.com
Cc: proj at lists.maptools.org
Subject: Re: [Proj] Transverse Mercator algorithm

 >> There is, however, one noteworthy difference.  The Swedish algorithm  >> is only approximately conformal, whereas the Finnish method is  >> conformal (to round-off).  This is easily remedied by substituting  >> the exact formula for the conformal latitude (as is done in the  >> Finnish report).
 >
 > In general, I am not that interested in answers to machine precision  > merely to about 0,0001mm or 0,001mm would be acceptable.

Fair enough.  Nevertheless, it does seem worth preserving the conformal property to machine precision -- especially when it can be done so easily.  (As an example of why this is useful, you can compute accurate transformations from one UTM zone to the neighboring one which rely on the fact that the transformation is conformal.  A 4-point fit gives 2um accuracy over a 10km x 10km area.)

 >> For my purposes, the exact method serves chiefly to gauge the  >> accuracy of the approximate method.  In particular, the error in the  >> Finnish and  >  > That is a useful and valuable asset.
 >
 >> The exact method and the derivations of the various series  >> approximations are all done in macsyma.  You'll probably need to have  >> macsyma installed if you want to use these.
 >
 > I have maxima and wxmaxima on my machine which seem to be related some  > time ago.  It is my understanding that macsyma is a commercial product  > and thus outside my pocketbook.  I do everything on the cheap.  ;-) It  > allows me to make everything I do free.

No need to pay.  I use the free SourceForge version.

It'll take a day or so to make my macsyma code for the exact transverse Mercator transformation presentable.  In the meantime, perhaps you can verify that your version of maxima functions the way I expect...

Download

     http://charles.karney.info/geographic/ellint.mac

Start maxima, and at the prompts, enter:

     load("ellint.mac")$
     ei(0.5b0+%i*0.3b0,0.1b0);

You should see something like:

     $ maxima
     Maxima 5.15.0 http://maxima.sourceforge.net
     Using Lisp CLISP 2.43 (2007-11-18)
     Distributed under the GNU Public License. See the file COPYING.
     Dedicated to the memory of William Schelter.
     The function bug_report() provides bug reporting information.
     (%i1) load("ellint.mac")$
     (%i2) ei(0.5b0+%i*0.3b0,0.1b0);
     (%o2) 2.96791299781263464924153153342948346508216221524596248948086\
     569795186664726317202946771827533813431304024592226608707871b-1 %i +
     4.99982389810326059482523070296819795538149014362475838573470325689\
     693122595700138979618859431972907386511841619290335085b-1
     (%i3)

If you get the same or equivalent output then you should be in good shape.

 > The math presented by Thompson and Lee seem quite at odds with several  > of the expanded range methods in that they express the problem in  > Jacobian functions.  Is there a parallel of have you looked into their  > methods?

The Finnish algorithm is related.  The series relating [xi,eta] and [xi',eta'] are just expansions (in eccentricity) of the transformation between two of the TM projections described on p. 92 of Lee's 1976 monograph (namely what he calls the spheroidal projection [xi',eta'] and the Gauss-Krueger projection [xi,eta]).

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From ckarney at sarnoff.com  Thu Sep  4 05:16:45 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Thu, 04 Sep 2008 08:16:45 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <FAF6E56B26D2044696772EBE89B15351011B206D@posty.carmenta.se>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com><200809022004.16203.geraldi.evenden@gmail.com><48BE0B1A.7020605@sarnoff.com><200809031451.00883.geraldi.evenden@gmail.com>	<48BEFAC9.9030100@sarnoff.com>
	<FAF6E56B26D2044696772EBE89B15351011B206D@posty.carmenta.se>
Message-ID: <48BFD1AD.9010307@sarnoff.com>

Mikael Rittri wrote:
> Charles Karney wrote:
>
>> The Finnish algorithm is related.  The series relating [xi,eta] and
>> [xi',eta'] are just expansions (in eccentricity) of the
>> transformation between two of the TM projections described on p. 92
>> of Lee's 1976 monograph (namely what he calls the spheroidal
>> projection [xi',eta'] and the Gauss-Krueger projection [xi,eta]).
>
> Am I right in thinking that the spheroidal projection [xi', eta'] is
> the same as Gauss-Schreiber?  Except that xi' and eta' are based on an
> ellipsoid whose radius is 1. (Sorry, I am not quite sure what I mean
> by ellipsoid radius in the previous sentence.)

Yes.  However, there seems to be a fair amount of confusion on the
naming of the various transverse Mercator projections...  To quote from
p. 101 of

      L. P. Lee,
      Conformal Projections Based on Elliptic Functions,
      (B. V. Gutsell, Toronto, 1976), 128pp.,
      ISBN: 0919870163.

  ...

  The projection given by (56.1) [the xi',eta' projection] was due to
  Gauss 1843, who derived it by first projecting the spheroid
  conformally upon a sphere so that all the meridians correspond, and
  then making a transverse Mercator projection of this sphere. It was
  described by Schreiber 1897, and is sometimes known as Schreiber's
  double projection. It was also described by Krueger 1914. The name
  Gauss-Laborde is used to describe it in Prance. It was derived in a
  more general form by Hotine 1947.

  The names, Gauss-Schreiber and Gauss-Krueger, as used by Lee 1962 do
  not accord with European usage.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From ckarney at sarnoff.com  Thu Sep  4 12:58:12 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Thu, 04 Sep 2008 15:58:12 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <48BEFAC9.9030100@sarnoff.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>	<200809022004.16203.geraldi.evenden@gmail.com>	<48BE0B1A.7020605@sarnoff.com>	<200809031451.00883.geraldi.evenden@gmail.com>
	<48BEFAC9.9030100@sarnoff.com>
Message-ID: <48C03DD4.5090107@sarnoff.com>

Charles Karney wrote:
> It'll take a day or so to make my macsyma code for the exact transverse
> Mercator transformation presentable.

OK, I've posted the maxima code for the arbitrary precision transversion
Mercator projection.  Go to

    http://charles.karney.info/geographic/

and download tm.mac and ellint.mac.  There's some meager documentation
in tm.mac.

Start maxima and enter

    load("tm.mac")$
    xya:tm1(0b0,90b0)$
    float(xya);
    lla:ll1(xya[1],xya[2])$
    float(lla);

This converts the point 0N 90E to transverse Mercator (for WGS84) and
back to latitude and longitude.

float(xya) gives

    [2.595359284541359E+7, 9997964.943020998, 90.0, 18.40462279198669]

which is [easting(m), northing(m), convergence(deg), scale].

float(lla) gives [- 1.600614476517369E-82, 90.0] which approximates the
starting point.

The precision is 120 digits; so you should be typically getting results
which are good to at least half that many digits.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From ckarney at sarnoff.com  Thu Sep  4 14:12:07 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Thu, 04 Sep 2008 17:12:07 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <ssrwshufcg8.fsf@puffin.sarnoff.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
Message-ID: <48C04F27.4060102@sarnoff.com>

Here are reasonably accurate formulas for meridian convergence and scale
for the transverse Mercator projection.

Input:

    phi = geodetic latitude (radians)
    l = longitude difference from central meridian (radians)
    ep2 = e^2/(1-e^2)

Output:

    gamma = meridian convergence (radians)
    k = scale (assuming scale on central meridian = 1)

    double
      c = cos(phi),
      s = sin(l),
      c2 = c * c,
      s2 = s * s,
      d = 1 - s2 * c2,
      // Accurate to order ep2^2
      carg = 1 + c2 * c2 * s2 / d * ep2 *
      (1 + c2 / (3 * d * d) *
       (2 - s2 * (c2 * ((4 * c2 - 1) * s2 - 9) + 8)) * ep2),
      // Accurate to order ep2
      cabs = 1 + c2 * c2 * s2 * ((c2 - 2) * s2 + 1) / (2 * d * d) * ep2;
    double gamma = atan2(sin(phi) * s * carg, cos(l));
    double k = cabs/sqrt(d);

For more accuracy see

    http://charles.karney.info/geographic/UTM-fi.txt

which also contains higher order terms for the computation of the
forward and reverse projection.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Thu Sep  4 17:39:49 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 4 Sep 2008 20:39:49 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <48C03DD4.5090107@sarnoff.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
	<48BEFAC9.9030100@sarnoff.com> <48C03DD4.5090107@sarnoff.com>
Message-ID: <200809042039.49244.geraldi.evenden@gmail.com>

On Thursday 04 September 2008 3:58:12 pm Charles Karney wrote:
> Charles Karney wrote:
> > It'll take a day or so to make my macsyma code for the exact transverse
> > Mercator transformation presentable.

WARNING: anyone doing test with this script needs to know that the scale 
factor is also set to 0.9996.  The ellipsoid was reference OK but not knowing 
the scale factor had be set had me running around in circles for a minute.

> Start maxima and enter
>
>     load("tm.mac")$
>     xya:tm1(0b0,90b0)$
>     float(xya);
>     lla:ll1(xya[1],xya[2])$
>     float(lla);

I was comparing this to etmerc, ftmerc, ktmerc to see where they break down.  
Initially I could not find anywhere they agreed and was about to complaing 
when it struck me that k_0 may have been set.  Seems the vanilla 
initialization had been commented out and replaced.

In lproj parlance the setup is: +ellps=WGS84 +k_0=0.9996

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at sarnoff.com  Thu Sep  4 20:38:59 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Thu, 04 Sep 2008 23:38:59 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <200809042039.49244.geraldi.evenden@gmail.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
	<48BEFAC9.9030100@sarnoff.com> <48C03DD4.5090107@sarnoff.com>
	<200809042039.49244.geraldi.evenden@gmail.com>
Message-ID: <48C0A9D3.5020906@sarnoff.com>

Gerald I. Evenden wrote:
> On Thursday 04 September 2008 3:58:12 pm Charles Karney wrote:
>> Charles Karney wrote:
>>> It'll take a day or so to make my macsyma code for the exact transverse
>>> Mercator transformation presentable.
> 
> WARNING: anyone doing test with this script needs to know that the scale 
> factor is also set to 0.9996.  The ellipsoid was reference OK but not knowing 
> the scale factor had be set had me running around in circles for a minute.

Well, I did say the documentation was meager!  Use

   setparams(a,invf,k0)$

to set the major radius, inverse flattening, and central scale factor.
The default is

   setparams(6378137b0, 298.257223563b0, 0.9996b0)$

appropriate for UTM applications.  (But note that no false easting or
false northing is applied.)
-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Fri Sep  5 09:56:35 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Fri, 5 Sep 2008 12:56:35 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <48C0A9D3.5020906@sarnoff.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
	<200809042039.49244.geraldi.evenden@gmail.com>
	<48C0A9D3.5020906@sarnoff.com>
Message-ID: <200809051256.36059.geraldi.evenden@gmail.com>

A couple of notes:

1. Of the etmerc, ktmerc and ftmerc extended range versions of TM, etmerc 
appears to be the winner in precision as one approaches 90,0.  When I figure 
out how to get maxima to generate a grid of numbers I will try to make a 
contour plot of precision comparisons.  Thus the combination of highest speed 
and best precision goes to Denmark.

2. I tried out tmerc along the CM which tests my version of M(phi) or meridian 
distance procedure that I revised a couple of years ago against the maxima 
procedure.  Scripts and results follow:

(%i12) xya:tm1(90b0,0b0)$ float(xya);
(%o13)    [0.0, 9997964.943020998, - 6.837286269353478E-119, 0.9996]

gie at charon:~$ lproj +proj=tmerc +ellps=WGS84 +k_0=0.9996 -f %.9f
0 90
0.000000000     9997964.943020998

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at sarnoff.com  Fri Sep  5 11:09:26 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Fri, 05 Sep 2008 14:09:26 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <200809051256.36059.geraldi.evenden@gmail.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
	<200809042039.49244.geraldi.evenden@gmail.com>
	<48C0A9D3.5020906@sarnoff.com>
	<200809051256.36059.geraldi.evenden@gmail.com>
Message-ID: <48C175D6.2050706@sarnoff.com>

Gerald I. Evenden wrote:
> 1. Of the etmerc, ktmerc and ftmerc extended range versions of TM,
> etmerc appears to be the winner in precision as one approaches 90,0.
> When I figure out how to get maxima to generate a grid of numbers I
> will try to make a contour plot of precision comparisons.

Maxima uses algol-like control statements.  So try

writefile("output.txt")$

for ilat:0 step 1 thru 900 do
  for ilon:0 step 1 thru 900 do
    ( lat:bfloat(ilat/10),
      lon:bfloat(ilon/10),
      res:tm(lat,lon),
      print(float(lat),float(lon),float(res[1]),float(res[2])) )$

closefile()$

Warning: print(-1); yields "- 1", so you might need to run output.txt
thru a sed script to eliminate the space before reading the data into
another program.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Fri Sep  5 13:04:12 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Fri, 5 Sep 2008 16:04:12 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <48C175D6.2050706@sarnoff.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
	<200809051256.36059.geraldi.evenden@gmail.com>
	<48C175D6.2050706@sarnoff.com>
Message-ID: <200809051604.12196.geraldi.evenden@gmail.com>

On Friday 05 September 2008 2:09:26 pm Charles Karney wrote:
> Gerald I. Evenden wrote:
> > 1. Of the etmerc, ktmerc and ftmerc extended range versions of TM,
> > etmerc appears to be the winner in precision as one approaches 90,0.
> > When I figure out how to get maxima to generate a grid of numbers I
> > will try to make a contour plot of precision comparisons.
>
> Maxima uses algol-like control statements.  So try
>
> writefile("output.txt")$
>
> for ilat:0 step 1 thru 900 do
>   for ilon:0 step 1 thru 900 do
>     ( lat:bfloat(ilat/10),
>       lon:bfloat(ilon/10),
>       res:tm(lat,lon),
>       print(float(lat),float(lon),float(res[1]),float(res[2])) )$
>
> closefile()$
>
> Warning: print(-1); yields "- 1", so you might need to run output.txt
> thru a sed script to eliminate the space before reading the data into
> another program.

Thank-you.  The manual for maxima is about a 2-year course!

BTW: have you determined scale error internal to the procedure.  lproj can run 
an option which will return k for the given point.  It is very useful when 
designing new projection areas.  For example, if the longitude width of 
a "zone" were increased, the k_0 factor should also be changed so the scale 
error at the margins somewhat matches the error at the CM so that the overall 
scale error is minimal.

Large scale error is the major reason for *not* using TM for large longitude 
extents.  It is about 20% at 40 degree longitude.  For example, it is easy to 
design a secant Lambert Conformal Conic of the Gulf of Mexico/Carribean that 
has easily half the scale error of a TM covering the same region.
 
-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at sarnoff.com  Fri Sep  5 14:21:15 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Fri, 05 Sep 2008 17:21:15 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <200809051604.12196.geraldi.evenden@gmail.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
	<200809051256.36059.geraldi.evenden@gmail.com>
	<48C175D6.2050706@sarnoff.com>
	<200809051604.12196.geraldi.evenden@gmail.com>
Message-ID: <48C1A2CB.3050800@sarnoff.com>

Gerald I. Evenden wrote:
> BTW: have you determined scale error internal to the procedure.  lproj
> can run an option which will return k for the given point.  It is very
> useful when designing new projection areas.  For example, if the
> longitude width of a "zone" were increased, the k_0 factor should also
> be changed so the scale error at the margins somewhat matches the
> error at the CM so that the overall scale error is minimal.

I posted approximate formulas for the k and convergence of the
Transverse Mercator projection in

http://lists.maptools.org/pipermail/proj/2008-September/003730.html

These approximations are quite good.  Follow the link in the E-mail for
a tabulation of the error.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From ckarney at sarnoff.com  Sat Sep  6 19:03:34 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Sat, 06 Sep 2008 22:03:34 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <200809051256.36059.geraldi.evenden@gmail.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
	<200809042039.49244.geraldi.evenden@gmail.com>
	<48C0A9D3.5020906@sarnoff.com>
	<200809051256.36059.geraldi.evenden@gmail.com>
Message-ID: <48C33676.9050301@sarnoff.com>

Gerald I. Evenden wrote:
 > A couple of notes:
 >
 > 1. Of the etmerc, ktmerc and ftmerc extended range versions of TM,
 > etmerc appears to be the winner in precision as one approaches 90,0.
 > ...  Thus the combination of highest speed and best precision goes to
 > Denmark.

I tabulate here the errors in the JHS 154 algorithm for the Transverse
Mercator projection.  In addition I give

   * the errors when additional terms (up to O(e^16)) are included in the
     series to convert from conformal latitude to rectifying latitude.

   * the errors in the convergence and scale using the formulas given in

     http://lists.maptools.org/pipermail/proj/2008-September/003730.html

Errors are relative to an arbitrary precision formulation (see tm.mac).

The errors in libproj implementation of etmerc closely matches the
errors in 5th order method (dx5), except that there's a minimum
discrepancy of about 2um in the result given by the forward
transformation followed by the reverse.  I suspect that the reverse
transformation in etmerc is badly conditioned in some way.

Define mu = asin(sin(lam) * cos(phi))
           = angular distance from meridian

Errors are primarily a function of mu (or x).

For each set, define

    dxn  = max(error in forward transformation,
               discrepancy in forward and reverse transformations)
           for nth order method (order e^(2*n))

    dgam = max error in meridian convergence

    dk   = max relative error in scale

     set         dx4     dx5     dx6     dx7     dx8   dgam   dk
x<4e5, y<95e5 .21um     4nm     4nm     4nm     4nm   3e-8"  4e-7%%
x<5e5, y<96e5 .22um     4nm     4nm     4nm     4nm   9e-8"  1e-6%%
     mu<10     .35um     5nm     4nm     4nm     4nm   5e-6"  3e-5%%
     mu<15     .70um     6nm     4nm     4nm     4nm   4e-5"  2e-4%%
     mu<20     1.5um    11nm     4nm     4nm     4nm   2e-4"  5e-4%%
     mu<25     3.6um    25nm     4nm     4nm     4nm   7e-4"  2e-3%%
     mu<30     8.7um    71nm     4nm     4nm     4nm   3e-3"  3e-3%%
     mu<35      22um   .22um     6nm     4nm     4nm   7e-3"  6e-3%%
     mu<40      61um   .75um    11nm     4nm     4nm   0.02"  0.02%%
     mu<45     .18mm   2.8um    49nm     5nm     5nm   0.05"  0.03%%
     mu<50     .62mm    12um   .27um    10nm     6nm   0.2"   0.05%%
     mu<55     2.4mm    64um   1.8um    58nm     7nm   0.4"   0.1%%
     mu<60      12mm   .42mm    17um   .69um    34nm   1"     0.3%%
     mu<65      72mm   3.8mm   .22mm    13um   .83um   4"     0.6%%
     mu<70     .67m     56mm   5.1mm   .48mm    48um   18"    1.5%%
     mu<72     1.9m    .20m     22mm   2.6mm   .32mm   35"    2.4%%
     mu<74     6.6m    .88m    .12m     18mm   2.8mm   76"    3.9%%
     mu<76      27m    4.7m    .87m    .17m     35mm   3'     7.1%%
     mu<78     .14km    33m    8.4m    2.2m    .62m    8'     1.4%
     mu<80     1.0km   .36km   .13km    52m     21m    28'    3.3%
     mu<82      14km   8.1km   4.8km   3.0km   2.0km   2.4d   10%
     mu<84     390km   380km   390km   410km   440km   14d    15%

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From mfinn at usgs.gov  Sat Sep  6 21:02:11 2008
From: mfinn at usgs.gov (Michael P Finn)
Date: Sat, 6 Sep 2008 22:02:11 -0600
Subject: [Proj] Michael P Finn of the USGS/ National Geospatial Technical
 Operations Center is out of the office.
Message-ID: <OF242CBFDF.F19122AD-ON872574BD.00162C2E-872574BD.00162C2E@usgs.gov>


I will be out of the office starting  09/06/2008 and will not return until
09/15/2008.

I will be unable to check e-mail regularly while I am out. If I can't
respond to your message while I am out, then I will when I return. If you
have anything that cannot wait, please contact my colleague, Dr. E. Lynn
Usery, at usery at usgs.gov.     Mike



From geraldi.evenden at gmail.com  Sun Sep  7 09:02:39 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 7 Sep 2008 12:02:39 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <48C33676.9050301@sarnoff.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
	<200809051256.36059.geraldi.evenden@gmail.com>
	<48C33676.9050301@sarnoff.com>
Message-ID: <200809071202.39587.geraldi.evenden@gmail.com>

On Saturday 06 September 2008 10:03:34 pm Charles Karney wrote:
> Gerald I. Evenden wrote:
>  > A couple of notes:
>  >
>  > 1. Of the etmerc, ktmerc and ftmerc extended range versions of TM,
>  > etmerc appears to be the winner in precision as one approaches 90,0.
>  > ...  Thus the combination of highest speed and best precision goes to
>  > Denmark.
>
> I tabulate here the errors in the JHS 154 algorithm for the Transverse
> Mercator projection.  In addition I give
>
>    * the errors when additional terms (up to O(e^16)) are included in the
>      series to convert from conformal latitude to rectifying latitude.
>
>    * the errors in the convergence and scale using the formulas given in
>
>      http://lists.maptools.org/pipermail/proj/2008-September/003730.html
>
> Errors are relative to an arbitrary precision formulation (see tm.mac).
>
> The errors in libproj implementation of etmerc closely matches the
> errors in 5th order method (dx5), except that there's a minimum
> discrepancy of about 2um in the result given by the forward
> transformation followed by the reverse.  I suspect that the reverse
> transformation in etmerc is badly conditioned in some way.
>
> Define mu = asin(sin(lam) * cos(phi))
>            = angular distance from meridian

I appreciate your approach to error diagnosis in the comparison of the ?tmercs 
however I must take a more brute force approach and merely look at primitive 
results.  This is due to the fact that I am *not* a theoretician  but merely 
one looking for the bottom line.

In this case, one bottom line is the comparison of the distance between 
the ?tmerc projected locations and the base point locations generated by the 
maxima program.  A slice of the comparison results along the equator follow:

# base -?tmerc distance
# lon	lat	+proj=etmerc	+proj=ktmerc	+proj=ftmerc
0	0	7.08115e-10	3.23508e-35	1.00143e-09
2	0	5.23869e-10	2.03727e-10	7.1805e-10
4	0	2.32831e-10	6.40284e-10	4.76796e-09
	...
58	0	0.000126874	0.00405273	0.00602846
60	0	0.0002965	0.00825579	0.0116592
62	0	0.000727843	0.0175187	0.0235812
64	0	0.00189299	0.0390021	0.0502297
66	0	0.00527164	0.0919147	0.113676
68	0	0.015932	0.231898	0.276412
70	0	0.0531755	0.635645	0.732767
72	0	0.200653	1.93067	2.15991
74	0	0.88438	6.67957	7.27613
76	0	4.776	27.4123	29.1701
78	0	34.0907	142.346	148.445
80	0	369.14	1052.78	1079.24
82	0	1e+30	15201.4	15360.3
84	0	1e+30	536070	536149
86	0	1e+30	8.00846e+06	7.96976e+06
88	0	1e+30	1.07293e+09	1.06239e+09
90	0	1e+30	1e+30	3.89025e+124
0	2	7.2291e-10	1.74623e-10	1.5403e-09
	...

As we approach no-man's land etmerc does better than the other two procedures.  
It is the same picture for the other latitude rows.  I will get a 3D plot 
made sometime today.  Of course, the above has one critical assumption we 
must not forget: the maxima procedure is correct and god-like.

Another interesting point about etmerc (Engsager and Poder) is that the 
trigonometric series are in multiple angle evaluated by Clenshaw and not the 
traditional power series: see

@techreport{eng:HtTM,
    author = "K. Engsager, K. Poder",
    title = "The Transverse Mercator Mapping with high accuracy
       for the entire Globe almost",
    institution = "Danish National Space Center, Geodetic Dept.,
        Danish Technical University",
    address = "Copenhagen, Denmark",
    pages = 7,
    year = "200?"
}

The title is a little optimistic.  ;-)

PS: I should probably put proj=tmerc in the list also.

After we beat the forward projection to death I'll look at the inverse and the 
turn-around closure.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at sarnoff.com  Sun Sep  7 11:53:23 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Sun, 07 Sep 2008 14:53:23 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <200809071202.39587.geraldi.evenden@gmail.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
	<200809051256.36059.geraldi.evenden@gmail.com>
	<48C33676.9050301@sarnoff.com>
	<200809071202.39587.geraldi.evenden@gmail.com>
Message-ID: <48C42323.9030606@sarnoff.com>

Gerald I. Evenden wrote:
 > I appreciate your approach to error diagnosis in the comparison of the
 > ?tmercs however I must take a more brute force approach and merely
 > look at primitive results.  This is due to the fact that I am *not* a
 > theoretician but merely one looking for the bottom line.

It's probably good to have an idea of what the error might look like as
a function of position.  The error will approximately be the first
dropped term in the series expansions.  In the case of the 4-term JHS
154 expansion this is

     ~ e^10 sin(10 xi) cosh(10 eta)
     ~ e^10 sin(10 phi) cosh(10 x/a)

or some oscillating function of y multiplying an exponential function of
x.  We are, of course, primarily interested in the potentially large
variation with x.

 > I will get a 3D plot made sometime today.

There's a good chance that this will look messy because of the
oscillatory behavior of the error with latitude and the fact that
round-off errors dominate for small x.

My methodology is:

Generate a set of random latitudes (lat0), longitudes (lon0), exact
eastings (x0), and exact northings (y0).  I posted a set of such data
(1/4 million points) at

     http://charles.karney.info/geographic/TMcoords.dat.gz

For each geographic point (lat0,lon0), compute

     (x,y) = F(lat0,lon0)
     (lat,lon) = F^-1(x,y)

where F is the numerical transverse Mercator projection being
evaluated.  Define

     err = max( hypot(x-x0, y-y0),
                1e7/90 * hypot(lat-lat0, cos(lat0)*(lon-lon0)) )

     mu = asin( sin(lon0) * cos(lat0) )

The second term in err approximately converts the lat/lon discrepancy
into a distance.  mu is the angular distance away from the central
meridian and I use this as an ersatz x of the purpose of error analysis.

You can get a feel for the behavior of the error by plotting err against
mu.  E.g., in Matlab notation:

     plot(mu, log10(err), 'x');

The tabulated error data I sent out yesterday was computed with, e.g.,

     max(err(x0<5e5 & y0<96e5))
     max(err(mu<25))

and so on.  The second statement takes the maximum of the error for all
mu < 25 and this is useful because (from the plot) err is strongly
increasing with mu.

 > Of course, the above has one critical assumption we must not forget:
 > the maxima procedure is correct and god-like.

Quite so.  The good news is that when the procedure fails, it fails
badly.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Sun Sep  7 13:29:16 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 7 Sep 2008 16:29:16 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <48C42323.9030606@sarnoff.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
	<200809071202.39587.geraldi.evenden@gmail.com>
	<48C42323.9030606@sarnoff.com>
Message-ID: <200809071629.16521.geraldi.evenden@gmail.com>

On Sunday 07 September 2008 2:53:23 pm Charles Karney wrote:
	...
>
>  > I will get a 3D plot made sometime today.
>
> There's a good chance that this will look messy because of the
> oscillatory behavior of the error with latitude and the fact that
> round-off errors dominate for small x.

On the contrary.  The error well out of the lon,lat=90,0 zone is simply a 
frothy quantum like noise around 10^-9 meters due to float precision limits.  
As one approaches 90,0 the surface is a remarkable smooth---totally without 
undulations.  Iso-error contours are nearly circular with the center at 90,0 
on an equirectangular grid.

Give it a looksee:

http://members.verizon.net/~gerald.evenden/proj4/etmerc_err.png
	...

As to generating a zillion test points, I had a gaming break while waiting for 
just 2116 or so points.  It takes nearly a second per point for starters and 
more as one nears upper limits.  With your original loops of 10 points per 
degree I figure maybe:

900*900=810000 points at 2/second gives 6750 minutes or 112 hours or a little 
more than 4 1/2 days.  And that is with my klutzy 3GHz 64 bitter.

A few more points than I have patience for.  ;-)

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at sarnoff.com  Sun Sep  7 15:49:30 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Sun, 07 Sep 2008 18:49:30 -0400
Subject: [Proj] Transverse Mercator algorithm
In-Reply-To: <200809071629.16521.geraldi.evenden@gmail.com>
References: <ssrwshufcg8.fsf@puffin.sarnoff.com>
	<200809071202.39587.geraldi.evenden@gmail.com>
	<48C42323.9030606@sarnoff.com>
	<200809071629.16521.geraldi.evenden@gmail.com>
Message-ID: <48C45A7A.9040703@sarnoff.com>

 >> There's a good chance that this will look messy because of the
 >> oscillatory behavior of the error with latitude and the fact that
 >> round-off errors dominate for small x.
 >
 > On the contrary.  The error well out of the lon,lat=90,0 zone is
 > simply a frothy quantum like noise around 10^-9 meters due to float
 > precision limits.  As one approaches 90,0 the surface is a remarkable
 > smooth---totally without undulations.

You're quite right.  I guess dx and dy are both oscillatory, but
sqrt(dx^2 + dy^2) is not.

 > Iso-error contours are nearly circular with the center at 90,0 on an
 > equirectangular grid.

It might therefore be useful to display your results as

     error vs mu

with mu = asin(sin(lon) * cos(lat)).  This might allow you to report the
results more succinctly (and compare to the error table I sent
yesterday).

 > As to generating a zillion test points, I had a gaming break while
 > waiting for just 2116 or so points.  It takes nearly a second per
 > point for starters and more as one nears upper limits.

You could download the dataset I created.  Of course these are random
points and I don't know whether your analysis tools let you use such
points.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Sun Sep  7 18:50:50 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 7 Sep 2008 21:50:50 -0400
Subject: [Proj] Scale factor for Transverse Mercator
Message-ID: <200809072150.50920.geraldi.evenden@gmail.com>

To go back to another discussion related to extending the longitude range of 
TM I also wanted to emphasize the problem of the scale factor at increasing 
distance from the central meridian (CM).

For reference I put two graphs on the my proj4 website:

http://members.verizon.net/~gerald.evenden/proj4/500er.png

and

http://members.verizon.net/~gerald.evenden/proj4/5000er.png

In both cases, the x axis is in terms of easting from the CM with degrees from 
the CM along the equator scale at the top.  The scale factor for TM is mainly 
a function of linear distance from the CM and northing or latitude  has 
little effect.

The 500er.png figure show scale factor in the range of principle usage of TM 
and demonstrates that the unadjusted percentage of scale error is less than 
0.15% over the standard 6 degree zones of most TM applications.  Note that in 
Scandinavian regions where the zones have been significantly increased in 
terms of longitude but the meaningful factor of easting has not increased.

In order to distribute the scale error more evenly though out the zone the 
scale multiplier k_0=0.9996 and now the scale error ranges between -0.05% to 
0.1%.

With larger scale errors arguments of using it for its conformal properties 
become rather meaningless and any projection with minimal visual distortion 
is usable.

ALSO, the spherical TM is quite useable at 40 degrees and gives nearly the 
same Cartesian values as well as nearly the same scale error.

When it gets to the bottom line, there seems to be little purpose in extending 
Transverse Mercator beyond its useful limits of 3 degrees.  And if there is a 
demand to ultra wide extent then the spherical form will server equally well.

To extend to the ultimate limit of 90 degrees is a bit of a problem only 
solvable with time consuming software and with results that are so distorted 
as to be unrecognizable.
-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From Mikael.Rittri at carmenta.com  Tue Sep  9 00:01:01 2008
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Tue, 9 Sep 2008 09:01:01 +0200
Subject: [Proj] Scale factor for Transverse Mercator
In-Reply-To: <200809072150.50920.geraldi.evenden@gmail.com>
References: <200809072150.50920.geraldi.evenden@gmail.com>
Message-ID: <FAF6E56B26D2044696772EBE89B15351011B2314@posty.carmenta.se>

Gerald I. Evenden wrote:

> Thus the combination of highest speed and best precision goes to Denmark.

Darn. And Sweden didn't do very well in the Olympic Games, either. 

> When it gets to the bottom line, there seems to be little purpose in 
> extending Transverse Mercator beyond its useful limits of 3 degrees.  
> And if there is a demand to ultra wide extent then the spherical form 
> will serve equally well. 

I'm curious: what you say about scale factor variation would be equally true 
for ordinary Mercator - at least if I tilt my head 90 degrees like this ;-) 

So, would you say that an implementation of ordinary Mercator should 
use ellipsoidal formulas only within 3 degrees of latitude from the 
equator?  And that farther away, one should use spherical Mercator 
formulas?  

Speaking of spherical projection formulas, I'd like your opinion about 
what kind of geodetic datum that can be associated with a spherical
projection: 

1) An ellipsoid-shaped geodetic datum, or 
2) A spherical geodetic datum, which is not a real datum at all, but 
   we have to pretend so temporarily in order to compute the projection, or 
3) No datum at all, or 
4) ....

Best regards,

--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07 
mikael.rittri at carmenta.com
www.carmenta.com
-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Gerald I. Evenden
Sent: den 8 september 2008 03:51
To: PROJ.4 and general Projections Discussions
Subject: [Proj] Scale factor for Transverse Mercator

To go back to another discussion related to extending the longitude range of TM I also wanted to emphasize the problem of the scale factor at increasing distance from the central meridian (CM).

For reference I put two graphs on the my proj4 website:

http://members.verizon.net/~gerald.evenden/proj4/500er.png

and

http://members.verizon.net/~gerald.evenden/proj4/5000er.png

In both cases, the x axis is in terms of easting from the CM with degrees from the CM along the equator scale at the top.  The scale factor for TM is mainly a function of linear distance from the CM and northing or latitude  has little effect.

The 500er.png figure show scale factor in the range of principle usage of TM and demonstrates that the unadjusted percentage of scale error is less than 0.15% over the standard 6 degree zones of most TM applications.  Note that in Scandinavian regions where the zones have been significantly increased in terms of longitude but the meaningful factor of easting has not increased.

In order to distribute the scale error more evenly though out the zone the scale multiplier k_0=0.9996 and now the scale error ranges between -0.05% to 0.1%.

With larger scale errors arguments of using it for its conformal properties become rather meaningless and any projection with minimal visual distortion is usable.

ALSO, the spherical TM is quite useable at 40 degrees and gives nearly the same Cartesian values as well as nearly the same scale error.

When it gets to the bottom line, there seems to be little purpose in extending Transverse Mercator beyond its useful limits of 3 degrees.  And if there is a demand to ultra wide extent then the spherical form will server equally well.

To extend to the ultimate limit of 90 degrees is a bit of a problem only solvable with time consuming software and with results that are so distorted as to be unrecognizable.
--
The whole religious complexion of the modern world is due to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist _______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From ckarney at sarnoff.com  Tue Sep  9 06:49:13 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Tue, 09 Sep 2008 09:49:13 -0400
Subject: [Proj] Scale factor for Transverse Mercator
In-Reply-To: <200809072150.50920.geraldi.evenden@gmail.com>
References: <200809072150.50920.geraldi.evenden@gmail.com>
Message-ID: <48C67ED9.4090609@sarnoff.com>

What you mean by "scale error" is, I believe, the amount by which the
scale deviates from unity.  Whether this is an error or a problem
depends on the application.

Sure, in the standard UTM zones, the scale is close to unity and this
allows reasonably accurate distances to be computed directly.  In other
applications it may only be important that the scale does not vary much
over an area of interest (even though it's far from the central
meridian).  And the regular Mercator projection is regularly used over
large areas even though it then has a large scale variation (you
remember the variable scale on the side of the map?).  Wikipedia claims
that Google maps uses Mercator (presumably for its joint properties of
conformality and zero meridian convergence).

So I think it's incorrect to say that the TM is only "useful" +/- 3deg
from the central meridian.  You have TM algorithms which have <1um error
out to +/- 65 deg. from the central meridian.  I recommend that libproj
provide access to these and leave it to the user to decide on the
usefulness.

It may well be that you need to stop before 90 deg. because an algorithm
with reasonable accuracy is not available.  But here again I would hold
off on statements like "so distorted as to be unrecognizable"; locally
there is NO distortion --- the projection is conformal after all.  (By
the way, it's not the case that the TM projection on an ellipsoid
"stops" at 90deg from the central meridian; it can be extended
continuously past this point.)

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From ckarney at sarnoff.com  Tue Sep  9 06:52:27 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Tue, 09 Sep 2008 09:52:27 -0400
Subject: [Proj] Relationship betweeen transverse Mercator algorithms
Message-ID: <ssrfxo977fo.fsf@puffin.sarnoff.com>

In the discussion of transverse Mercator projections, there are several
"competing" algorithms.  However, it is probably a good idea to
understand just how similar they are.  In

    http://lists.maptools.org/pipermail/proj/2006-June/002296.html

(dated 2006-06-13), Oscar van Vlijmen lists 3 "accurate" approximations
to the transverse Mercator projection

    [fi] http://docs.jhs-suositukset.fi/jhs-suositukset/JHS154/JHS154.pdf
    [fr] http://www.ign.fr/telechargement/MPro/geodesie/CIRCE/NTG_76.pdf
    [se] http://www.lantmateriet.se/upload/filer/kartor/geodesi_gps_och_detaljmatning/geodesi/Formelsamling/Gauss_Conformal_Projection.pdf

and he states

    "Each follow a slightly different route, but the differences in the
     results are small."

This comment is exactly right.  I might strengthen the statement as
follows:

    "The algorithms are all the same differing only in minor details."

To van Vlijmen's list can be added

    [dk] Engsager-Poder algorithm implemented in proj_etmerc

and my restatement applies to this algorithm too.

What is the basic forward algorithm (phi,lam) -> (x,y)?

(1) convert geodetic latitude, phi, to conformal latitude, beta
(2) convert (beta,lam) to spherical TM (x',y')
(3) apply a conformal mapping to (x',y') to get (x,y)

Note that (apart from scale factors)

  y' = conformal latitude, beta
  y = rectifying latitude

so the mapping in (3) is serves just to rescale y and the x coordinate
follows by the requirements of conformality.

The reverse algorithm (x,y) -> (phi,lam) just reverses these steps
(3') apply a conformal mapping to (x,y) to get (x',y')
(2') convert spherical TM (x',y') to (beta,lam)
(1') convert conformal latitude, beta, to geodetic latitude, phi.

So how do the algorithms differ:

(1) and (1'):

    [fi] and [fr] use exact formulas.  The formulas are different but
    mathematically equivalent.  This approach necessitates an iterative
    solution method in (1')

    [se] and [dk] use series for (1) and its reversion for (1').  [se]
    uses includes terms up to e^8 while [dk] includes terms up to e^10.

    The other difference is in the choice of small parameter used for
    the expansion.  [se] uses e^2 = f*(2-f), [dk] uses n = f/(2-f).  The
    use of different expansion parameters changes the numerical values
    at a given order.

    [se] also writes the series as a power series in sin(phi) but this
    is easily converted to a series in sin(2*k*phi).

    The use of a series expansion here breaks the conformality of the
    algorithm and for this reason I prefer the [fi] and [fr] approaches.
    However the e^8 (and certainly the e^10) series suffice to give
    accuracy close to round-off for doubles.

(2) and (2')

    All approaches use the exact transformations for thess steps.  Again
    the formulas are different (and this may affect the numerical
    accuracy) but mathematically equivalent.

(3) and (3')

    All approaches use a series and its reversion for these steps.

    [fi] and [se] use same series in n accurate to n^4 (e^8).

    [dk] extends these series out to n^5 (e^10).

    [fr] uses a series in e^2 accurate to e^8.  In addition it folds the
    overall scale normalization into the series.

    It is easy to convert from the series used by [fi], [se], and [dk]
    (truncated to n^4) to the ones used by [fr] by substituting for n in
    terms of e^2 multiplying by the normalizing factor (called ahat in
    [se] and A1 in [fr]) and expanding in e^2.

    The use of a series and its reversion means that the forward and
    backward transformation are not exact inverses of one another.  The
    discrepancy here is of the same magnitude as the error in the
    forward transformation.

So there you have it.  The methods are all essentially equivalent.

[dk] has the accuracy edge because its series are truncated at n^5
instead of n^4.  However any of the other methods can leapfrog over [dk]
by using more terms in the series for (3) and (3') (and (1) and (1') in
the case of [se]).  I posted series accurate to n^8 in

   http://charles.karney.info/geographic/UTM-fi.txt

These can be directly used in [fi] and with minor modifications are
applicable to the other methods too.  In the same file, I also give a
table of errors for the different order approximations (n^4, n^5, n^6,
n^7, and n^8).  [The maxima code that I used to compute these series is
relatively short (40 lines or so), and I will post this at some point.]

We are then just left with relatively pedestrian numerical issues which
are important in the control of round-off:

  * use of Horner representation of polynomials
  * stable summation of trig series
  * recognize that asin(tanh(Q)) is inaccurate if Q is large and use
    the mathematically equivalent atan(sinh(Q)) instead
  * and so on.

The use of these series expansions in (3) and (3') limits its
applicability.  The transformation from conformal to rectifying latitude
when extended to the complex domain has a mild singularity a phi = 0,
lam = pi/2*(1-e) = 82.62d which is enough to make the series divergent
there.  Indeed the zone of 1mm accuracy for the n^8 series is limited to
72 degrees from the central meridian.

Finally, all the methods which I have labeled by country codes derive
from the work of 2 Germans, Gauss and Krueger.  The series (accurate to
n^4) needed for (3) and (3') are given by equations 26* (p. 18) and 41
(p. 21) in Krueger's 1912 paper

    http://www.gfz-potsdam.de/bib/pub/digi/krueger2.pdf

So perhaps they all should be called [de].

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From al001 at uni-koeln.de  Tue Sep  9 11:52:46 2008
From: al001 at uni-koeln.de (Irwin Scollar)
Date: Tue, 09 Sep 2008 20:52:46 +0200
Subject: [Proj] Relationship between transverse Mercator algorithms
In-Reply-To: <200809091602.m89G2UNW008032@duke.maptools.org>
References: <200809091602.m89G2UNW008032@duke.maptools.org>
Message-ID: <200809091853.m89IqsbZ006495@smtp-auth.uni-koeln.de>


>Relationship betweeen transverse Mercator algorithms
>by Charles Karney

I have never read such a clear and concise 
explanation of the differences and similarities 
between the various TM algorithms.  Thank you!

As for good old Krüger 1912, considering that 
things were done those days using paper and 
pencil, it remains truly remarkable.

If you would you care to comment on the numerical 
properties of using Horner vs. Clenshaw for 
series expansions, I shall be most grateful.

I am also especially interested in the relevance 
of using IEEE 10 byte floating point format 
instead of 8 byte double precision, since it is 
said to be the native mode of Intel hardware 
floating point implementations, even though it's 
not available in all compilers.  I have not 
noticed any speed disadvantage when using it, and 
it perhaps provides a bit more precision at low cost.

Irwin Scollar




From strebe at aol.com  Tue Sep  9 12:31:43 2008
From: strebe at aol.com (strebe)
Date: Tue, 09 Sep 2008 12:31:43 -0700
Subject: [Proj] Re: Relationship betweeen transverse Mercator algorithms
In-Reply-To: <ssrfxo977fo.fsf@puffin.sarnoff.com>
Message-ID: <CF3455B1.ED83.47D9.8646.985BDCF00227@aol.com>

On Sep 9, 2008, at 6:52:27 AM, "Charles Karney" <ckarney at sarnoff.com> wrote:

>In the discussion of transverse Mercator projections, there are several
>"competing" algorithms. However, it is probably a good idea to
>understand just how similar they are. In

And then there's Dozier's, which is not a series expansion. I haven't looked much at his paper and I don't have it in front of me, but as I recall, it's Lee's development through Jacobian elliptic functions. Naturally it's much less efficient than series expansion, but it gives a few bits less than machine precision over the complete globe — with some caveats about a few numerically problematic regions, if I recall.

There is also Wallis (unpublished) that deviates a little from steps 1-3 below. Wallis projects directly to the plane first via the ellipsoidal polar stereographic. Then, treating the (x,y) results as the complex plane, numerically computes the inverse of of the stereographic. For the central meridian this merely gives the original coordinates; and in general it gives the complex amplitude needed for the elliptic integral that computes the meridian segment length. In practice Wallis takes advantage of some minor efficiencies that fall out of using the colatitude as the elliptic integral's amplitude, and also in practice, the numerical difficulties must be carefully  managed in some regions.

Because the ellipsoidal polar stereographic is so structurally similar to using the conformal latitude, the numerically troublesome areas are really all the same in the end. It's all about the conformal latitude function inverse...

Regards,
-- daan Strebe



On Sep 9, 2008, at 6:52:27 AM, "Charles Karney" <ckarney at sarnoff.com> wrote:
From:   "Charles Karney" <ckarney at sarnoff.com>
Subject:    [Proj] Relationship betweeen transverse Mercator algorithms
Date:   September 9, 2008 6:52:27 AM PDT
To: Proj at lists.maptools.org
In the discussion of transverse Mercator projections, there are several
"competing" algorithms. However, it is probably a good idea to
understand just how similar they are. In

http://lists.maptools.org/pipermail/proj/2006-June/002296.html

(dated 2006-06-13), Oscar van Vlijmen lists 3 "accurate" approximations
to the transverse Mercator projection

[fi] http://docs.jhs-suositukset.fi/jhs-suositukset/JHS154/JHS154.pdf
[fr] http://www.ign.fr/telechargement/MPro/geodesie/CIRCE/NTG_76.pdf
[se] http://www.lantmateriet.se/upload/filer/kartor/geodesi_gps_och_detaljmatning/geodesi/Formelsamling/Gauss_Conformal_Projection.pdf

and he states

"Each follow a slightly different route, but the differences in the
results are small."

This comment is exactly right. I might strengthen the statement as
follows:

"The algorithms are all the same differing only in minor details."

To van Vlijmen's list can be added

[dk] Engsager-Poder algorithm implemented in proj_etmerc

and my restatement applies to this algorithm too.

What is the basic forward algorithm (phi,lam) -> (x,y)?

(1) convert geodetic latitude, phi, to conformal latitude, beta
(2) convert (beta,lam) to spherical TM (x',y')
(3) apply a conformal mapping to (x',y') to get (x,y)

Note that (apart from scale factors)

y' = conformal latitude, beta
y = rectifying latitude

so the mapping in (3) is serves just to rescale y and the x coordinate
follows by the requirements of conformality.

The reverse algorithm (x,y) -> (phi,lam) just reverses these steps
(3') apply a conformal mapping to (x,y) to get (x',y')
(2') convert spherical TM (x',y') to (beta,lam)
(1') convert conformal latitude, beta, to geodetic latitude, phi.

So how do the algorithms differ:

(1) and (1'):

[fi] and [fr] use exact formulas. The formulas are different but
mathematically equivalent. This approach necessitates an iterative
solution method in (1')

[se] and [dk] use series for (1) and its reversion for (1'). [se]
uses includes terms up to e^8 while [dk] includes terms up to e^10.

The other difference is in the choice of small parameter used for
the expansion. [se] uses e^2 = f*(2-f), [dk] uses n = f/(2-f). The
use of different expansion parameters changes the numerical values
at a given order.

[se] also writes the series as a power series in sin(phi) but this
is easily converted to a series in sin(2*k*phi).

The use of a series expansion here breaks the conformality of the
algorithm and for this reason I prefer the [fi] and [fr] approaches.
However the e^8 (and certainly the e^10) series suffice to give
accuracy close to round-off for doubles.

(2) and (2')

All approaches use the exact transformations for thess steps. Again
the formulas are different (and this may affect the numerical
accuracy) but mathematically equivalent.

(3) and (3')

All approaches use a series and its reversion for these steps.

[fi] and [se] use same series in n accurate to n^4 (e^8).

[dk] extends these series out to n^5 (e^10).

[fr] uses a series in e^2 accurate to e^8. In addition it folds the
overall scale normalization into the series.

It is easy to convert from the series used by [fi], [se], and [dk]
(truncated to n^4) to the ones used by [fr] by substituting for n in
terms of e^2 multiplying by the normalizing factor (called ahat in
[se] and A1 in [fr]) and expanding in e^2.

The use of a series and its reversion means that the forward and
backward transformation are not exact inverses of one another. The
discrepancy here is of the same magnitude as the error in the
forward transformation.

So there you have it. The methods are all essentially equivalent.

[dk] has the accuracy edge because its series are truncated at n^5
instead of n^4. However any of the other methods can leapfrog over [dk]
by using more terms in the series for (3) and (3') (and (1) and (1') in
the case of [se]). I posted series accurate to n^8 in

http://charles.karney.info/geographic/UTM-fi.txt

These can be directly used in [fi] and with minor modifications are
applicable to the other methods too. In the same file, I also give a
table of errors for the different order approximations (n^4, n^5, n^6,
n^7, and n^8). [The maxima code that I used to compute these series is
relatively short (40 lines or so), and I will post this at some point.]

We are then just left with relatively pedestrian numerical issues which
are important in the control of round-off:

* use of Horner representation of polynomials
* stable summation of trig series
* recognize that asin(tanh(Q)) is inaccurate if Q is large and use
the mathematically equivalent atan(sinh(Q)) instead
* and so on.

The use of these series expansions in (3) and (3') limits its
applicability. The transformation from conformal to rectifying latitude
when extended to the complex domain has a mild singularity a phi = 0,
lam = pi/2*(1-e) = 82.62d which is enough to make the series divergent
there. Indeed the zone of 1mm accuracy for the n^8 series is limited to
72 degrees from the central meridian.

Finally, all the methods which I have labeled by country codes derive
from the work of 2 Germans, Gauss and Krueger. The series (accurate to
n^4) needed for (3) and (3') are given by equations 26* (p. 18) and 41
(p. 21) in Krueger's 1912 paper

http://www.gfz-potsdam.de/bib/pub/digi/krueger2.pdf

So perhaps they all should be called [de].

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20080909/68b895ec/attachment.html>

From geraldi.evenden at gmail.com  Tue Sep  9 15:01:32 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 9 Sep 2008 18:01:32 -0400
Subject: [Proj] Scale factor for Transverse Mercator
In-Reply-To: <48C67ED9.4090609@sarnoff.com>
References: <200809072150.50920.geraldi.evenden@gmail.com>
	<48C67ED9.4090609@sarnoff.com>
Message-ID: <200809091801.32686.geraldi.evenden@gmail.com>

On Tuesday 09 September 2008 9:49:13 am Charles Karney wrote:
> What you mean by "scale error" is, I believe, the amount by which the
> scale deviates from unity.  Whether this is an error or a problem
> depends on the application.

I agree that I may be a little free in my usage and perhaps "scale factor" is 
more appropriate.  But in the bottom line, it is what "screws up" any 
measurement process using the Cartesian grid unless the one making the 
measurements account for this factor.  I think that for the causal user or 
one not fully familiar with the factor the use of the term scale-error is 
preferred because it red-flags the usage of the coordinates without 
considering this factor.

> Sure, in the standard UTM zones, the scale is close to unity and this
> allows reasonably accurate distances to be computed directly.  In other
> applications it may only be important that the scale does not vary much
> over an area of interest (even though it's far from the central
> meridian).  And the regular Mercator projection is regularly used over
> large areas even though it then has a large scale variation (you
> remember the variable scale on the side of the map?).  Wikipedia claims
> that Google maps uses Mercator (presumably for its joint properties of
> conformality and zero meridian convergence).

Let me pose the question: why are all of the state plane zones in the US 
established to have very small scale errors (factors) over their extent?  
California divides the state into 6 zones to obviously ensure small scale 
error anywhere in the state.  Why did DOD create the 6 degree zone if it were 
not to minimize the scale error.  Of the non-US grid systems I have seen, the 
same philosophy is apparent: limit the maximum scale error of the grid 
system.

> So I think it's incorrect to say that the TM is only "useful" +/- 3deg
> from the central meridian.  You have TM algorithms which have <1um error
> out to +/- 65 deg. from the central meridian.  I recommend that libproj
> provide access to these and leave it to the user to decide on the
> usefulness.

There is little point in mixing the computational error---what we have been 
thrashing over for the last eternity---with the scale error or factor.  They 
are wo different problems.  We have *no* control over the scale error because 
that is an inherent property of the projection (other than fudging it with 
k_0).  We can only control how accurately we can compute the forward/inverse 
projection.

The use of TM as a grid system is very much limited to the 6 degree zone (at 
the equator) and its use as a grid system is the only situation where I find 
any justification in concern over the computational accuracy of the 
projection process.  Computational accuracy to 1x10-4 meter should be 
sufficient and I think we have demonstated that is sufficient for the Kruger 
(Taylor series) method with the current length of the polynomials.  I believe 
we can certify the Kruger as the Gold standard in terms of speed and accuracy 
for grid class usage.

> It may well be that you need to stop before 90 deg. because an algorithm
> with reasonable accuracy is not available.  But here again I would hold
> off on statements like "so distorted as to be unrecognizable"; locally
> there is NO distortion --- the projection is conformal after all.

Oh indeed, quite true.  But I find it a bit difficult to shrink myself to an 
infinitesimal size in order to appreciate the conformality factor.  
Conformality is an empty claim where the rate of change of the scale factor 
is so large that a feature of any extent is distorted beyond recognition.  
Please remember, conformality is a mathematical term and does not mean there 
will not be distortion over a finite extent with varying scale factor that 
we, as mere mortals, will find objectionable.

Once one leaves the requirements of small scale-error grid systems the choice 
of projection is wide open and I find it hard to find any particular feature 
of TM that makes it a better choice over many other projection.  To use a 
projection outside its range of grid system usage as a means of measurement 
is very questionable.  And why make that a criteria?  The solution to 
determining distance and azimuth has been and always will be usage of a 
geodesic algorithm using the geographic coordinates of the two points of 
interest.  The main function of a projection in any graphic system is to get 
the geographic information to the Cartesian display and similarly convert 
display selected points back to geographic coordinates for a purpose such as 
distance determination.

In computer display systems there is rare excuse to even need an elliptical 
projection.

> (By 
> the way, it's not the case that the TM projection on an ellipsoid
> "stops" at 90deg from the central meridian; it can be extended
> continuously past this point.)

I think you need to try to explain to school children what is going on with 
this bizarre projection.  It is bad enough with the ordinary Mercator.

Pursuing the super-accurate TM is purely an academic problem and does not at 
the current time show any practical application.  But one needs a little fun.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Tue Sep  9 19:18:05 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 9 Sep 2008 22:18:05 -0400
Subject: [Proj] Scale factor for Transverse Mercator
In-Reply-To: <FAF6E56B26D2044696772EBE89B15351011B2314@posty.carmenta.se>
References: <200809072150.50920.geraldi.evenden@gmail.com>
	<FAF6E56B26D2044696772EBE89B15351011B2314@posty.carmenta.se>
Message-ID: <200809092218.06068.geraldi.evenden@gmail.com>

On Tuesday 09 September 2008 3:01:01 am Mikael Rittri wrote:
> Gerald I. Evenden wrote:
> > Thus the combination of highest speed and best precision goes to Denmark.
>
> Darn. And Sweden didn't do very well in the Olympic Games, either.
>
> > When it gets to the bottom line, there seems to be little purpose in
> > extending Transverse Mercator beyond its useful limits of 3 degrees.
> > And if there is a demand to ultra wide extent then the spherical form
> > will serve equally well.
>
> I'm curious: what you say about scale factor variation would be equally
> true for ordinary Mercator - at least if I tilt my head 90 degrees like
> this ;-)

Mercator is probably the most abused projection.

If I recall correctly, Equador uses Mercator as a grid system projection and 
it would be an appropriate choice for any area on the equator with 
predominant E-W extent.

The tradition is to use Mercator for navigation charts presumably on the 
factor that you can chart rhumb line paths.  With modern navigation tools the 
choice is mute.

Mercator as a world map is an abominable choice.  Pick an equal area.

> So, would you say that an implementation of ordinary Mercator should
> use ellipsoidal formulas only within 3 degrees of latitude from the
> equator?  And that farther away, one should use spherical Mercator
> formulas?

Ellipsoidal form is proper for large scale navigation charts.

> Speaking of spherical projection formulas, I'd like your opinion about
> what kind of geodetic datum that can be associated with a spherical
> projection:

Does it make any difference.  Snyder liked to use an R in his spherical 
computation examples that was based upon a sphere with the same surface area 
of the Clarke 1866 ellipsoid.  For large scale maps try the mean radii of the 
parallel and meridian at the latitude of the map from your ellipsoid of 
choice.

> 1) An ellipsoid-shaped geodetic datum, or
> 2) A spherical geodetic datum, which is not a real datum at all, but
>    we have to pretend so temporarily in order to compute the projection, or
> 3) No datum at all, or
> 4) ....
>
> Best regards,
>
> --
> Mikael Rittri
> Carmenta AB
> Box 11354
> SE-404 28 Göteborg
> Visitors: Sankt Eriksgatan 5
> SWEDEN
> Tel: +46-31-775 57 37
> Mob: +46-703-60 34 07
> mikael.rittri at carmenta.com
> www.carmenta.com
> -----Original Message-----
> From: proj-bounces at lists.maptools.org
> [mailto:proj-bounces at lists.maptools.org] On Behalf Of Gerald I. Evenden
> Sent: den 8 september 2008 03:51
> To: PROJ.4 and general Projections Discussions
> Subject: [Proj] Scale factor for Transverse Mercator
>
> To go back to another discussion related to extending the longitude range
> of TM I also wanted to emphasize the problem of the scale factor at
> increasing distance from the central meridian (CM).
>
> For reference I put two graphs on the my proj4 website:
>
> http://members.verizon.net/~gerald.evenden/proj4/500er.png
>
> and
>
> http://members.verizon.net/~gerald.evenden/proj4/5000er.png
>
> In both cases, the x axis is in terms of easting from the CM with degrees
> from the CM along the equator scale at the top.  The scale factor for TM is
> mainly a function of linear distance from the CM and northing or latitude 
> has little effect.
>
> The 500er.png figure show scale factor in the range of principle usage of
> TM and demonstrates that the unadjusted percentage of scale error is less
> than 0.15% over the standard 6 degree zones of most TM applications.  Note
> that in Scandinavian regions where the zones have been significantly
> increased in terms of longitude but the meaningful factor of easting has
> not increased.
>
> In order to distribute the scale error more evenly though out the zone the
> scale multiplier k_0=0.9996 and now the scale error ranges between -0.05%
> to 0.1%.
>
> With larger scale errors arguments of using it for its conformal properties
> become rather meaningless and any projection with minimal visual distortion
> is usable.
>
> ALSO, the spherical TM is quite useable at 40 degrees and gives nearly the
> same Cartesian values as well as nearly the same scale error.
>
> When it gets to the bottom line, there seems to be little purpose in
> extending Transverse Mercator beyond its useful limits of 3 degrees.  And
> if there is a demand to ultra wide extent then the spherical form will
> server equally well.
>
> To extend to the ultimate limit of 90 degrees is a bit of a problem only
> solvable with time consuming software and with results that are so
> distorted as to be unrecognizable. --
> The whole religious complexion of the modern world is due to the absence
> from Jerusalem of a lunatic asylum. -- Havelock Ellis (1859-1939) British
> psychologist _______________________________________________ Proj mailing
> list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist



From ckarney at sarnoff.com  Wed Sep 10 08:28:33 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Wed, 10 Sep 2008 11:28:33 -0400
Subject: [Proj] Relationship between transverse Mercator algorithms
In-Reply-To: <200809091853.m89IqsbZ006495@smtp-auth.uni-koeln.de>
References: <200809091602.m89G2UNW008032@duke.maptools.org>
	<200809091853.m89IqsbZ006495@smtp-auth.uni-koeln.de>
Message-ID: <48C7E7A1.5000607@sarnoff.com>

> As for good old Krueger 1912, considering that things were done those
> days using paper and pencil, it remains truly remarkable.

Indeed.  One of the interesting aspects of Krueger's paper is the worked
out examples with all angles measured in seconds and a systematic method
of working with logarithms, e.g.,

    xi...5,2387755846   (... means the following number is a common log)
    xi = 173290",83112  (and here it is converted into seconds)

Or course, it's possible that Krueger used one or more computers to help
him (using "computer" in the 17th-19th century sense).

> If you would you care to comment on the numerical properties of using
> Horner vs. Clenshaw for series expansions, I shall be most grateful.

Not sure I have much to say here.  Summing up a bunch of terms is more
accurate if you start with the smallest ones.  Horner does this for
polynomials in a small variable and Clenshaw can similarly do it for
trig (and other series).  (Horner is just a special case of Clenshaw.)
And both also reduce the operation count over direct summation.

> I am also especially interested in the relevance of using IEEE 10 byte
> floating point format instead of 8 byte double precision, since it is
> said to be the native mode of Intel hardware floating point
> implementations, even though it's not available in all compilers.  I
> have not noticed any speed disadvantage when using it, and it perhaps
> provides a bit more precision at low cost.

It's probably the case that the timing of modern floating-point hardware
is insensitive to the precision.  Bigger concerns are often memory,
cache size, and the bandwidth between memory and the CPU.  As you note,
you might end up with some portability issues.  (On Intel chips, g++'s
"long double" gives you a 64-bit mantissa while MS Visual Studio 2005
silently treats it as "double".)

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From ckarney at sarnoff.com  Wed Sep 10 08:39:31 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Wed, 10 Sep 2008 11:39:31 -0400
Subject: [Proj] Scale factor for Transverse Mercator
In-Reply-To: <200809091801.32686.geraldi.evenden@gmail.com>
References: <200809072150.50920.geraldi.evenden@gmail.com>
	<48C67ED9.4090609@sarnoff.com>
	<200809091801.32686.geraldi.evenden@gmail.com>
Message-ID: <48C7EA33.6020301@sarnoff.com>

Gerald I. Evenden <geraldi.evenden at gmail.com> wrote:
> Let me pose the question: why are all of the state plane zones in the
> US established to have very small scale errors (factors) over their
> extent?

Because an important application for state maps is defining land
ownership, building roads, etc.

> Why did DOD create the 6 degree zone if it were not to minimize the
> scale error.

DOD also wants bullets to go predicable distances in straight lines on
maps.

However, both these applications are concerned with a subclass of human
activities close to the surface of the earth.

Google maps' use of Mercator is different class of application.  The
requirements here are conformality and seamless scrolling over most of
the globe with the normal application being navigating on roads rather
than plotting great circle routes between continents.  Here the
much-maligned Mercator seems to be an appropriate choice.

I also read with interest Dozier's remark in NOAA Technical Report NESS
81 that the TM projection (extended beyond +/- 3deg) is useful for
analyzing data from the NOAA A-G series of satellites.  I don't know why
this might be beyond my ascertaining that these satellites are in polar
orbits and TM can at least handle a single such orbit seamlessly.  So
here is an application unanticipated (probably) by Gauss for the TM and
beyond the narrow question of how to get a good map of Hanover.

I guess my point is that a library offering general-purpose projection
capabilities should being agnostic on questions of what is a "good"
projection.  Such issues are really in the application domain.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Wed Sep 10 10:17:28 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 10 Sep 2008 13:17:28 -0400
Subject: [Proj] Scale factor for Transverse Mercator
In-Reply-To: <48C7EA33.6020301@sarnoff.com>
References: <200809072150.50920.geraldi.evenden@gmail.com>
	<200809091801.32686.geraldi.evenden@gmail.com>
	<48C7EA33.6020301@sarnoff.com>
Message-ID: <200809101317.28912.geraldi.evenden@gmail.com>

On Wednesday 10 September 2008 11:39:31 am Charles Karney wrote:
> Gerald I. Evenden <geraldi.evenden at gmail.com> wrote:
> > Let me pose the question: why are all of the state plane zones in the
> > US established to have very small scale errors (factors) over their
> > extent?
>
> Because an important application for state maps is defining land
> ownership, building roads, etc.
>
> > Why did DOD create the 6 degree zone if it were not to minimize the
> > scale error.
>
> DOD also wants bullets to go predicable distances in straight lines on
> maps.

Indeed, but in a sense this is also the same reason for the state plane 
system---a mechanism to apply Cartesian mechanics to measurement problems.  I 
must add that military usage is also dependent upon a wide level of mental 
capability among the grunts on the ground and combined with the fog of war it 
is a little easier to deal with these problems in Cartesian coordinates.  It 
should probably be added that today's electronic warfare probably has a great 
deal of effect on how maps are used in a modern combat---UTM is a relic of 
mid 20th century warfare technology.

> However, both these applications are concerned with a subclass of human
> activities close to the surface of the earth.

To be sure.  But when we go to smaller scale we are more interested in 
thematic mapping where we are less intersted in "measuring" in a 
ruler-compass sense but visually understanding the "layout" of information.  
It is in this usage that I am much more in favor of equal area maps because I 
feel that the sense of areal extent is much more important than conformality.  
The human eyeball does not really care if the graticule lines meet at right 
angles everywhere.

> Google maps' use of Mercator is different class of application.  The
> requirements here are conformality and seamless scrolling over most of
> the globe with the normal application being navigating on roads rather
> than plotting great circle routes between continents.  Here the
> much-maligned Mercator seems to be an appropriate choice.

For what google is doing the projection makes little difference.  The roads 
are probably in arc-node data sets where the distance along road segments 
(arcs) are a matter of the data set and have nothing to do with the map 
projection.  If they are using Mercator, they would probably adjust the 
latitude of true scale as the latitude of the region displayed changes,  Thus 
the "smooth" transition aspect is void.  If they didn't adjust lat_ts then a 
street map of Brownsville, TX would look odd compared to a street map of 
Fairbanks, AK or vice versa.

Another minor point with google, I bet they are *not* using a elliptical 
projection software.  If they are, they are wasting a vast amount of computer 
time.

> I also read with interest Dozier's remark in NOAA Technical Report NESS
> 81 that the TM projection (extended beyond +/- 3deg) is useful for
> analyzing data from the NOAA A-G series of satellites.  I don't know why
> this might be beyond my ascertaining that these satellites are in polar
> orbits and TM can at least handle a single such orbit seamlessly.  So
> here is an application unanticipated (probably) by Gauss for the TM and
> beyond the narrow question of how to get a good map of Hanover.

There are lots of special projections in handling problems unique to 
satellites.  Even in a polar orbit the path is not N-S on the map because the 
earth turns as the satellite passes over head.

> I guess my point is that a library offering general-purpose projection
> capabilities should being agnostic on questions of what is a "good"
> projection.  Such issues are really in the application domain.

The question is not a moral question of good or bad but what is relevant.  
Sure, use TM beyond the 6 degree zone but don't mistreat it like Mercator and 
make a world map out of it.  In addition, do not waste cpu clicks by using 
the ellipsoid form when performing this extension.  If there is a moral issue 
then it may be to *not* develop TM to 90/0 or to make the usage so costly 
that it is never performed and thus minimize the carbon footprint of 
cartographic projections.   :-)
-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From cjmce at lsu.edu  Wed Sep 10 12:17:50 2008
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 10 Sep 2008 14:17:50 -0500
Subject: [Proj] Scale factor for Transverse Mercator
References: <200809072150.50920.geraldi.evenden@gmail.com><200809091801.32686.geraldi.evenden@gmail.com><48C7EA33.6020301@sarnoff.com>
	<200809101317.28912.geraldi.evenden@gmail.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC23FB@email002.lsu.edu>

The State Plane Coordinate Systems were originally conceived in the 1930s (from observed experiences in Indirect Artillery Fire Control during WWI), and were actually implemented in the 1940s-1950s.  The specification for Second-Order Transit Tape traverse survey closures at that time in the U.S. was 1:10,000.  In keeping with that criterion, the maximum scale factor at a point for a Zone was then intended to not be greater than that same amount.  Many Zones may exceed that by a smidgeon, though ...  The reason for that was with Surveyors having limited computational power at the time (pencil, paper, & tables of logarithms), a Surveyor could omit the correction for Scale Factor at a Point to convert from Grid Distances to Geodetic Distances and vice versa and still achieve survey closures to at least Third-Order accuracies, sometimes Second-Order.
 
The World Polyconic Grid used as the artillery grid system in the U.S. and the Netherlands East Indies for WWII by the U.S. Army was changed to the UTM in 1948 by Army Map Service.  The Scale Factor at a Point maximum of 1:2,500 at the Central Meridian was considered OK for Fire Control because for this application, the 6° Zones were limited in longitudinal extent because of the convergence angle between Grid North and Geodetic North - soldiers don't really care that much about the difference between Grid Distance and Geodetic Distance ... the blast radius of a 155mm Howitzer shell takes care of that little "problem."
 
The State Plane Coordinate Systems of the U.S.C.&G.S. and the Universal Grid Systems of the U.S. Army had entirely different criteria in their individual designs.  Both work just fine for their intended applications.  It has been observed by Military Geodesists that "A major battle will occur at every Grid Zone Boundary," and as a result they came up with the Zone-to-Zone Transformation Tables to extend a single UTM Zone up to 24° from the Central Meridian.
 
Cliff Mugnier
LSU

________________________________

From: proj-bounces at lists.maptools.org on behalf of Gerald I. Evenden
Sent: Wed 10-Sep-08 12:17
To: Charles Karney
Cc: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Scale factor for Transverse Mercator



On Wednesday 10 September 2008 11:39:31 am Charles Karney wrote:
> Gerald I. Evenden <geraldi.evenden at gmail.com> wrote:
> > Let me pose the question: why are all of the state plane zones in the
> > US established to have very small scale errors (factors) over their
> > extent?
>
> Because an important application for state maps is defining land
> ownership, building roads, etc.
>
> > Why did DOD create the 6 degree zone if it were not to minimize the
> > scale error.
>
> DOD also wants bullets to go predicable distances in straight lines on
> maps.

Indeed, but in a sense this is also the same reason for the state plane
system---a mechanism to apply Cartesian mechanics to measurement problems.  I
must add that military usage is also dependent upon a wide level of mental
capability among the grunts on the ground and combined with the fog of war it
is a little easier to deal with these problems in Cartesian coordinates.  It
should probably be added that today's electronic warfare probably has a great
deal of effect on how maps are used in a modern combat---UTM is a relic of
mid 20th century warfare technology.

> However, both these applications are concerned with a subclass of human
> activities close to the surface of the earth.

To be sure.  But when we go to smaller scale we are more interested in
thematic mapping where we are less intersted in "measuring" in a
ruler-compass sense but visually understanding the "layout" of information. 
It is in this usage that I am much more in favor of equal area maps because I
feel that the sense of areal extent is much more important than conformality. 
The human eyeball does not really care if the graticule lines meet at right
angles everywhere.

> Google maps' use of Mercator is different class of application.  The
> requirements here are conformality and seamless scrolling over most of
> the globe with the normal application being navigating on roads rather
> than plotting great circle routes between continents.  Here the
> much-maligned Mercator seems to be an appropriate choice.

For what google is doing the projection makes little difference.  The roads
are probably in arc-node data sets where the distance along road segments
(arcs) are a matter of the data set and have nothing to do with the map
projection.  If they are using Mercator, they would probably adjust the
latitude of true scale as the latitude of the region displayed changes,  Thus
the "smooth" transition aspect is void.  If they didn't adjust lat_ts then a
street map of Brownsville, TX would look odd compared to a street map of
Fairbanks, AK or vice versa.

Another minor point with google, I bet they are *not* using a elliptical
projection software.  If they are, they are wasting a vast amount of computer
time.

> I also read with interest Dozier's remark in NOAA Technical Report NESS
> 81 that the TM projection (extended beyond +/- 3deg) is useful for
> analyzing data from the NOAA A-G series of satellites.  I don't know why
> this might be beyond my ascertaining that these satellites are in polar
> orbits and TM can at least handle a single such orbit seamlessly.  So
> here is an application unanticipated (probably) by Gauss for the TM and
> beyond the narrow question of how to get a good map of Hanover.

There are lots of special projections in handling problems unique to
satellites.  Even in a polar orbit the path is not N-S on the map because the
earth turns as the satellite passes over head.

> I guess my point is that a library offering general-purpose projection
> capabilities should being agnostic on questions of what is a "good"
> projection.  Such issues are really in the application domain.

The question is not a moral question of good or bad but what is relevant. 
Sure, use TM beyond the 6 degree zone but don't mistreat it like Mercator and
make a world map out of it.  In addition, do not waste cpu clicks by using
the ellipsoid form when performing this extension.  If there is a moral issue
then it may be to *not* develop TM to 90/0 or to make the usage so costly
that it is never performed and thus minimize the carbon footprint of
cartographic projections.   :-)
--
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20080910/a72d690a/attachment.html>

From geraldi.evenden at gmail.com  Wed Sep 10 12:37:26 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 10 Sep 2008 15:37:26 -0400
Subject: [Proj] Scale factor for Transverse Mercator
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC23FB@email002.lsu.edu>
References: <200809072150.50920.geraldi.evenden@gmail.com>
	<200809101317.28912.geraldi.evenden@gmail.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC23FB@email002.lsu.edu>
Message-ID: <200809101537.26713.geraldi.evenden@gmail.com>

On Wednesday 10 September 2008 3:17:50 pm Clifford J Mugnier wrote:
> The State Plane Coordinate Systems were 
...
> The Scale Factor at a Point maximum of 
> 1:2,500 at the Central Meridian was considered OK for Fire Control because
> for this application, the 6° Zones were limited in longitudinal extent
> because of the convergence angle between Grid North and Geodetic North -
> soldiers don't really care that much about the difference between Grid
> Distance and Geodetic Distance ... the blast radius of a 155mm Howitzer
> shell takes care of that little "problem."

Under the same logic, I could never understand the reason for fuzzing the GPS 
signals because what difference does a few meters mean with the blast radius 
of an H-bomb?

The wonders of the military mind.

If one is laying in air burst of with 155 a little fuzz will not make much 
difference because you are probably doing a carpet barrage anyway.  But if 
you are trying to knock out just one house in a city block (like they do with 
the smart bombs) then ... .  Curious about the electronics in some of the 
newer artillery pieces.  New command and control is something else from what 
little I've seen and heard.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist



From cjmce at lsu.edu  Wed Sep 10 15:42:33 2008
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 10 Sep 2008 17:42:33 -0500
Subject: [Proj] Scale factor for Transverse Mercator
References: <200809072150.50920.geraldi.evenden@gmail.com><200809101317.28912.geraldi.evenden@gmail.com><B597ADFC46B67741B18EA6AA13613FF7EC23FB@email002.lsu.edu>
	<200809101537.26713.geraldi.evenden@gmail.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC23FE@email002.lsu.edu>

Originally, the military did not expect Academics to figure out a way to get around the single point-positioning mode of the NAVSTAR (GPS) system.  The DoD figured that on paper, dithering the signal would not allow our combatants to utilize our GPS system as guidance for their ordnance against us.
 
It was expected that dithering the signal would/could increase the "circle of uncertainty" to 100-300 meters, thus rendering GPS unusable to our enemies in a conventional, non-nuclear-warhead war.  Remember, NAVSTAR was originally conceived in the early 1970s, and was not envisioned as ever being useable for the civilian community - at that time.

Remember it was Niels Bohr that said, "Prediction is a pretty tough thing to do, especially in the future."

Cliff Mugnier

________________________________

From: proj-bounces at lists.maptools.org on behalf of Gerald I. Evenden
Sent: Wed 10-Sep-08 14:37
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Scale factor for Transverse Mercator



On Wednesday 10 September 2008 3:17:50 pm Clifford J Mugnier wrote:
> The State Plane Coordinate Systems were
...
> The Scale Factor at a Point maximum of
> 1:2,500 at the Central Meridian was considered OK for Fire Control because
> for this application, the 6° Zones were limited in longitudinal extent
> because of the convergence angle between Grid North and Geodetic North -
> soldiers don't really care that much about the difference between Grid
> Distance and Geodetic Distance ... the blast radius of a 155mm Howitzer
> shell takes care of that little "problem."

Under the same logic, I could never understand the reason for fuzzing the GPS
signals because what difference does a few meters mean with the blast radius
of an H-bomb?

The wonders of the military mind.

If one is laying in air burst of with 155 a little fuzz will not make much
difference because you are probably doing a carpet barrage anyway.  But if
you are trying to knock out just one house in a city block (like they do with
the smart bombs) then ... .  Curious about the electronics in some of the
newer artillery pieces.  New command and control is something else from what
little I've seen and heard.

--
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20080910/84edaa97/attachment.html>

From support.mn at elisanet.fi  Wed Sep 10 18:07:29 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Thu, 11 Sep 2008 04:07:29 +0300 (EEST)
Subject: [Proj] Perspective view to a sphere (or similar)
Message-ID: <28228259.12661221095250783.JavaMail.support.mn@elisanet.fi>

Hello,

there are situations when one would like to use a very basic
projection: perspective view to a sphere. To use directly
some photos from the space or airplanes. Or maybe a
screen shot from Google Maps. The most obvious way
would be to use them directly as they are. There are
some spherical projections
in proj-4. But is there exactly a direct view from a view point with
forward and inverse algorithms?

Here is more about that subject and how it should be calculated.

http://en.wikipedia.org/wiki/Perspective_view

http://en.wikipedia.org/wiki/Image:Perspectiva-1.svg

http://en.wikipedia.org/wiki/Image:Perspectiva-2.svg

What is needed:
1) view point coordinates
2) view direction (defaulting to the center of the earth maybe?)
3) distance to the earth surface and to the projection plane
4) rotation angles and zoom factors
5) more? maybe some most common distortion factors for cameras etc??

What is best approximation projection in proj-4
to get some results?

Regards: Janne.



From geraldi.evenden at gmail.com  Wed Sep 10 18:45:05 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 10 Sep 2008 21:45:05 -0400
Subject: [Proj] Perspective view to a sphere (or similar)
In-Reply-To: <28228259.12661221095250783.JavaMail.support.mn@elisanet.fi>
References: <28228259.12661221095250783.JavaMail.support.mn@elisanet.fi>
Message-ID: <200809102145.06061.geraldi.evenden@gmail.com>

On Wednesday 10 September 2008 9:07:29 pm support.mn at elisanet.fi wrote:
> Hello,
>
> there are situations when one would like to use a very basic
> projection: perspective view to a sphere. To use directly
> some photos from the space or airplanes. Or maybe a
> screen shot from Google Maps. The most obvious way
> would be to use them directly as they are. There are
> some spherical projections
> in proj-4. But is there exactly a direct view from a view point with
> forward and inverse algorithms?
>
> Here is more about that subject and how it should be calculated.
>
> http://en.wikipedia.org/wiki/Perspective_view
>
> http://en.wikipedia.org/wiki/Image:Perspectiva-1.svg
>
> http://en.wikipedia.org/wiki/Image:Perspectiva-2.svg
>
> What is needed:
> 1) view point coordinates
> 2) view direction (defaulting to the center of the earth maybe?)
> 3) distance to the earth surface and to the projection plane
> 4) rotation angles and zoom factors
> 5) more? maybe some most common distortion factors for cameras etc??
>
> What is best approximation projection in proj-4
> to get some results?
>
> Regards: Janne.

Try +proj=nsper   Near-sided perspective which is a view of the earth at a 
height h.  There is the tilted perspective or tpers but it is a brute to use.  
+lat_0=, +lon_0= determine the eye-sphere line intersect with the surface of 
the sphere and +h= is the height above the surface in the same units as the 
radius of the sphere. The central meridian (lon_0) is coincident with y=0.  
Projection plane is normal to the eye-center line and tangent to the sphere.

Dunno what you mean by rotation angles an zoom factors other than simple 
graphic scaling an rotation.  As for camera lens corrections:  LOL, lot'sa 
luck friend.

nsper is one of the oldest projections in proj.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From Mikael.Rittri at carmenta.com  Thu Sep 11 01:26:54 2008
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Thu, 11 Sep 2008 10:26:54 +0200
Subject: [Proj] Relationship between transverse Mercator algorithms
In-Reply-To: <200809091853.m89IqsbZ006495@smtp-auth.uni-koeln.de>
References: <200809091602.m89G2UNW008032@duke.maptools.org>
	<200809091853.m89IqsbZ006495@smtp-auth.uni-koeln.de>
Message-ID: <FAF6E56B26D2044696772EBE89B15351011B2540@posty.carmenta.se>


> >Relationship betweeen transverse Mercator algorithms by Charles Karney
> 
> I have never read such a clear and concise explanation of the differences 
> and similarities between the various TM algorithms.  Thank you!
> 
> [ --- ] 
>
> Irwin Scollar

Yes indeed! Thanks from me, too.

However, I'm wondering about a detail of how the errors are defined.

Charles Karney wrote (http://lists.maptools.org/pipermail/proj/2008-September/003737.html):
 
> For each set, define
>
>   dxn  = max(error in forward transformation,
>               discrepancy in forward and reverse transformations)
>           for nth order method (order e^(2*n))

Has the nominal error in the forward transformation been divided by the local 
scale factor?  

That is to say, I think understand the second part, the discrepancy 
between forward and inverse. If you start with P, do forward and then 
inverse, getting Q, then P and Q are both expressed in longitude and latitude, 
so the distance between P and Q is measured in true meters on the ground, 
I suppose.  

But if you do forward projection from P, getting (N0,E0) from your exact algorithm,
and (N1,E1) from a Krüger-like algorithm, then the error is - primarily - expressed
in projected coordinates.  Let us say there were a difference of 1 meter in projected
coordinates at mu = 60 degrees.  Then, since the local scale factor there would be 
about 2, the true difference on the ground is just half a meter.  In some sense. 

If you did not divide by the local scale factor, then I don't understand how you 
can take the max of the two kinds of error, since one is expressed in true meters 
and the other is expressed in nominal (projected) meters. 

I hope I am not talking nonsense here.  

Again, many thanks for the lucid explanations.

--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07 
mikael.rittri at carmenta.com
www.carmenta.com



From support.mn at elisanet.fi  Thu Sep 11 04:18:02 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Thu, 11 Sep 2008 14:18:02 +0300 (EEST)
Subject: [Proj] Perspective view to a sphere (or similar)
Message-ID: <4032524.10571221131882730.JavaMail.support.mn@elisanet.fi>

Hello,

"Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti: 
> 
> Try +proj=nsper   Near-sided perspective which is a view of the earth at a 
> height h.  There is the tilted perspective or tpers but it is a brute to use.  
> +lat_0=, +lon_0= determine the eye-sphere line intersect with the surface of 
> the sphere and +h= is the height above the surface in the same units as the 
> radius of the sphere. The central meridian (lon_0) is coincident with y=0.  
> Projection plane is normal to the eye-center line and tangent to the sphere.
> 
> Dunno what you mean by rotation angles an zoom factors other than simple 
> graphic scaling an rotation.  As for camera lens corrections:  LOL, lot'sa 
> luck friend.
> 
> nsper is one of the oldest projections in proj.
> 

Ok, thanks. How did I not notice those. What are the tpers parameters?

Janne.



From support.mn at elisanet.fi  Thu Sep 11 05:10:32 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Thu, 11 Sep 2008 15:10:32 +0300 (EEST)
Subject: [Proj] Some need for updated proj-4 manuals
Message-ID: <13861595.15601221135033485.JavaMail.support.mn@elisanet.fi>

Hello,

the proj-4 manuals might need some updating and cleaning?
There are basicly two groups whcih need them.

A) Programmers that utilise the library. More or less programming
related matters and details. This could be the "Proj-4 Programmer's
Manual".

B) End users that use the projections. They need information what
can be done. What is available and what are the exact parameters
and how to use them in each projection and datum available.
Exmples are most informative. This might be something like
"Proj-4 End User´s Manual". These people are mostly not interrested
of the programming details and those matter should be put in the
first manual. Then there is also the end application´s "User Manual",
which tells more about the application and how to use it.
That would be the third manual, written by the proj-4-application
makers. Maybe the proj-4 part would be an appendix in this
manual?

So the "Proj-4 End User Manual" goes to the end user, if the
proj-4 definition is directly visible for the end user... sometimes
not, if there is a layer above proj-4.

Now the situation is so that there are several proj-4 manuals in
pdf format and it is hard to find any specific information especially
about "how to use the projections and datums" since the
information is here and there. At least one would expect to
find all projections and their usage (and datums) in one manual .

And of course to keep those 2 manuals up to date to the latest
program versions. Manuals might have same versions as
programs so that everything would be documented.

The end application manuals and documentations keep us so
busy that any help with the projections and datums would be
highly respected. BTW: Our application can only use those
projections that have both forward and inverese projections.
So it would be nice if those projections with missing inverese
projection would be separated somehow in it´s own group.

Etc. etc.

Any ideas? Somebody might want to collect and compose
those two proj-4 manuals using the pdf originals that are
somewhere? Anyway that is what we would very much need.

We might hide all the projection and datum complexity in some
applications (ready made maps), but sometimes they are visible.

Best regards
Janne.




From ckarney at sarnoff.com  Thu Sep 11 05:56:20 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Thu, 11 Sep 2008 08:56:20 -0400
Subject: [Proj] Relationship between transverse Mercator algorithms
In-Reply-To: <FAF6E56B26D2044696772EBE89B15351011B2540@posty.carmenta.se>
References: <200809091602.m89G2UNW008032@duke.maptools.org>	<200809091853.m89IqsbZ006495@smtp-auth.uni-koeln.de>
	<FAF6E56B26D2044696772EBE89B15351011B2540@posty.carmenta.se>
Message-ID: <48C91574.50806@sarnoff.com>

Mikael Rittri wrote:
>> For each set, define
>>
>>   dxn  = max(error in forward transformation,
>>               discrepancy in forward and reverse transformations)
>>           for nth order method (order e^(2*n))
>
> Has the nominal error in the forward transformation been divided by
> the local scale factor?

No, the first term does not include the scale factor and so that "max"
is of two dissimilar quantities (a scaled distance and a distance).  So
the table I gave overestimates the errors by up to a factor of 10
particularly for mu (angular distance from central meridian) > 45.  For
mu < 20 the change in the errors will be only about 10%.

I will correct (sometime today or tomorrow) this so that the error is
really meters on the ground.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From al001 at uni-koeln.de  Thu Sep 11 07:30:54 2008
From: al001 at uni-koeln.de (Irwin Scollar)
Date: Thu, 11 Sep 2008 16:30:54 +0200
Subject: [Proj] Large scale mapping & Google
In-Reply-To: <200809101938.m8AJc9Co018162@duke.maptools.org>
References: <200809101938.m8AJc9Co018162@duke.maptools.org>
Message-ID: <200809111432.m8BEWw7p015697@smtp-auth.uni-koeln.de>

Gerald I. Evenden wrote:

>Another minor point with google, I bet they are 
>*not* using a elliptical projection software.

Indeed they are not, and this is documented on 
support sites for KML and for the GE API's both 
for COM and the ActiveX Plugin. They use Plate 
Carée with sphere A = 6378137.0.

Clifford J Mugnier wrote:

 > It has been observed by Military Geodesists 
that "A major battle will occur at every Grid Zone Boundary,"

In a number of publications and in the help for 
my AirPhoto programme which was written for those 
practicing low-level oblique aerial photography 
of archaeological sites visible as crop or soil 
discolorations to record them on large scale 
(1:1000 - 1:5000) maps for monument protection 
purposes,  I noted this phenomenon with respect 
to the original Gauss-Krueger 3 degree grid used 
on German maps (Deutsche Grundkarte 1:5000), and 
the corollary that all important aerial 
archaeological sites are located at the 
intersection of four map sheets whose boundaries are on that grid.

An even worse example is the airport of the city 
of Basle (Bâle) in Switzerland which is partly in 
France and overlooking Germany with three 
incompatible map projections (Swiss Oblique TM, 
French Lambert Polyconic and German GK 3 degree), 
so converting these on the fly to UTM WGS84 with 
the very decent datum transformation parameters 
available from each country is the only sensible thing to do.

In the former German Democratic Republic, which 
was forced to change from the GK 3 degree Bessel 
Ellipsoid grid to the Soviet 6 degree Krassovsky 
after WW2, a change is now being made to WGS84 
UTM 6 degrees for re-mapping.  In Bavaria, a 
Soldner-Cassini projection and grid centered on 
the main church in Münich is still used in many 
cadastral records, so that there are at least 
three incompatible systems within Germany today that I have encountered.

I think that the most common application of large 
scale and largely unpublished mapping in all 
developed countries is cadastral survey for 
property boundary records many of which are some 
variant of TM.  The cost of converting the 
enormous bulk of data accumulated over centuries 
which this represents is perhaps the main reason 
why few countries are converting to something 
more modern, although pious wishes in this respect are frequently expressed.

Irwin Scollar




From geraldi.evenden at gmail.com  Thu Sep 11 08:17:06 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 11 Sep 2008 11:17:06 -0400
Subject: [Proj] Some need for updated proj-4 manuals
In-Reply-To: <13861595.15601221135033485.JavaMail.support.mn@elisanet.fi>
References: <13861595.15601221135033485.JavaMail.support.mn@elisanet.fi>
Message-ID: <200809111117.06551.geraldi.evenden@gmail.com>

On Thursday 11 September 2008 8:10:32 am support.mn at elisanet.fi wrote:
> Hello,
>
> the proj-4 manuals might need some updating and cleaning?
> There are basicly two groups whcih need them.

Between answering all the emails I sometime work on the manual .

Have you looked at the libproj4 manual.pdf on:

http://members.verizon.net/~gerald.evenden/proj4/

It is 123 pages but getting a bit old.  The version in my machine is up to 128 
pages plus corrections and I am working on an improved TM section which will 
add 7 or 8 pages.  The sections on cylindricals and pseudocylindricals are 
fairly complete.  Most work is needed on conic.  Miscellaneous is fairly 
complete.  The math for all projections is given so one can see how the 
various options relate to the computations.  Internal library procedures are 
fairly complete.

The above manual does not cover lproj options (-x etc.) but they are almost 
identical to older documentation of proj.

I would like some detailed illustrations related to things like local grid 
systems but at the moment I do not have sufficiently detailed coastline file 
to do them.
 
My manuals do not do datums.

> A) Programmers that utilise the library. More or less programming
> related matters and details. This could be the "Proj-4 Programmer's
> Manual".
>
> B) End users that use the projections. They need information what
> can be done. What is available and what are the exact parameters
> and how to use them in each projection and datum available.
> Exmples are most informative. This might be something like
> "Proj-4 End User´s Manual". These people are mostly not interrested
> of the programming details and those matter should be put in the
> first manual. Then there is also the end application´s "User Manual",
> which tells more about the application and how to use it.
> That would be the third manual, written by the proj-4-application
> makers. Maybe the proj-4 part would be an appendix in this
> manual?

I do not need to take my shoes off to count the projections that are difficult 
to use---omerc is a good example of a stinker.  Also, I cannot over emphasize 
the use of the -V option with [l]proj where one can experiment with the 
options and where the output will also tell the user if an option is 
specified and not used by the projection.

> So the "Proj-4 End User Manual" goes to the end user, if the
> proj-4 definition is directly visible for the end user... sometimes
> not, if there is a layer above proj-4.
>
> Now the situation is so that there are several proj-4 manuals in
> pdf format and it is hard to find any specific information especially
> about "how to use the projections and datums" since the
> information is here and there. At least one would expect to
> find all projections and their usage (and datums) in one manual .
>
> And of course to keep those 2 manuals up to date to the latest
> program versions. Manuals might have same versions as
> programs so that everything would be documented.
>
> The end application manuals and documentations keep us so
> busy that any help with the projections and datums would be
> highly respected. BTW: Our application can only use those
> projections that have both forward and inverese projections.
> So it would be nice if those projections with missing inverese
> projection would be separated somehow in it´s own group.
>
> Etc. etc.
>
> Any ideas? Somebody might want to collect and compose
> those two proj-4 manuals using the pdf originals that are
> somewhere? Anyway that is what we would very much need.
>
> We might hide all the projection and datum complexity in some
> applications (ready made maps), but sometimes they are visible.

To be sure. there are different interest and capability levels that manuals 
address.  However, my only intererst is to provide documentation that is as 
complete as possible but also, in the interests of brevity, assumes that the 
reader has sufficient background and related skill to understand that 
material and how to properly apply it.  It is not an elementary how-to 
manual.

Please, please, please.  Anyone finding errors in the previously reference 
manual please notify this group.  Thank-you.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist



From ckarney at sarnoff.com  Thu Sep 11 11:20:41 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Thu, 11 Sep 2008 14:20:41 -0400
Subject: [Proj] Relationship between transverse Mercator algorithms
In-Reply-To: <48C91574.50806@sarnoff.com>
References: <200809091602.m89G2UNW008032@duke.maptools.org>	<200809091853.m89IqsbZ006495@smtp-auth.uni-koeln.de>	<FAF6E56B26D2044696772EBE89B15351011B2540@posty.carmenta.se>
	<48C91574.50806@sarnoff.com>
Message-ID: <48C96179.6000708@sarnoff.com>

I've posted an update of

    http://charles.karney.info/geographic/UTM-fi.txt

This contains a listing of the errors quoted as meters on the ground
(instead of meters in TM space).  This also includes the coefficients
for the 12th order series for the TM calculation and I say where the
extra terms go in Krueger's 1912 paper.

Finally, I've also posted 3 maxima files:

tmseries.mac -- maxima code to generate the coefficients for the series
    in UTM-fi.txt.

tmscale.mac -- maxima code to generate series approximations for the
    scale and meridian convergence in UTM-fi.txt.

revert.mac -- maxima code for the reversion of a series (used by
    tmseries.mac).

These were important for me because I never like coding up a series
solution unless I have some way of generating the general term in the
series.

You'll need to have maxima installed to run these.  (This is easy if
you're running Linux.)  Sorry, but this code is neither pretty nor
efficient (nor is is documented).  Ask if you have questions...

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Thu Sep 11 11:24:31 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 11 Sep 2008 14:24:31 -0400
Subject: [Proj] Scale factor for Transverse Mercator
In-Reply-To: <48C7EA33.6020301@sarnoff.com>
References: <200809072150.50920.geraldi.evenden@gmail.com>
	<200809091801.32686.geraldi.evenden@gmail.com>
	<48C7EA33.6020301@sarnoff.com>
Message-ID: <200809111424.31674.geraldi.evenden@gmail.com>

Following Charles Karney suggestion of a method for comparing all three 
extended TM projections see:

http://members.verizon.net/~gerald.evenden/proj4/scxtmerc_err.png

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at sarnoff.com  Thu Sep 11 14:14:24 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Thu, 11 Sep 2008 17:14:24 -0400
Subject: [Proj] Scale factor for Transverse Mercator
In-Reply-To: <200809111424.31674.geraldi.evenden@gmail.com>
References: <200809072150.50920.geraldi.evenden@gmail.com>	<200809091801.32686.geraldi.evenden@gmail.com>	<48C7EA33.6020301@sarnoff.com>
	<200809111424.31674.geraldi.evenden@gmail.com>
Message-ID: <48C98A30.60004@sarnoff.com>

Gerald I. Evenden wrote:
> Following Charles Karney suggestion of a method for comparing all three 
> extended TM projections see:
> 
> http://members.verizon.net/~gerald.evenden/proj4/scxtmerc_err.png

I think the x axis should be labeled asin(cos(lat)*sin(lon))
(= angular distance from central meridian)

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Thu Sep 11 14:30:22 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 11 Sep 2008 17:30:22 -0400
Subject: [Proj] Scale factor for Transverse Mercator
In-Reply-To: <48C98A30.60004@sarnoff.com>
References: <200809072150.50920.geraldi.evenden@gmail.com>
	<200809111424.31674.geraldi.evenden@gmail.com>
	<48C98A30.60004@sarnoff.com>
Message-ID: <200809111730.22795.geraldi.evenden@gmail.com>

On Thursday 11 September 2008 5:14:24 pm Charles Karney wrote:
> Gerald I. Evenden wrote:
> > Following Charles Karney suggestion of a method for comparing all three
> > extended TM projections see:
> >
> > http://members.verizon.net/~gerald.evenden/proj4/scxtmerc_err.png
>
> I think the x axis should be labeled asin(cos(lat)*sin(lon))
> (= angular distance from central meridian)

Fair enough.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From jhollingsworth at houston.oilfield.slb.com  Fri Sep 12 13:57:36 2008
From: jhollingsworth at houston.oilfield.slb.com (Jay Hollingsworth)
Date: Fri, 12 Sep 2008 15:57:36 -0500
Subject: [Proj] Re: Proj Digest, Vol 52, Issue 17
In-Reply-To: <200809111601.m8BG1Djv017407@duke.maptools.org>
References: <200809111601.m8BG1Djv017407@duke.maptools.org>
Message-ID: <0K7300C8HOVM34A0@gb0135mbx01.mail.slb.com>

At the risk of opening a floodgate of alternate 
suggestions, the EPSG is the source of the 
projection parameters and they have several 
Guidance notes at 
http://www.epsg.org/guides/index.html, including 
something for a more general audience (Guidance 
Note 1) as well as more-detailed notes on the 
transformation and projection equations and special problems.

I know these aren't proj-specific, but they have 
a lot of content to help decide what to use.


Jay

At 11:01 AM 9/11/2008, you wrote:
>----------------------------------------------------------------------
>
>Message: 1
>Date: Thu, 11 Sep 2008 11:17:06 -0400
>From: "Gerald I. Evenden" <geraldi.evenden at gmail.com>
>Subject: Re: [Proj] Some need for updated proj-4 manuals
>To: "PROJ.4 and general Projections Discussions"
>         <proj at lists.maptools.org>
>Message-ID: <200809111117.06551.geraldi.evenden at gmail.com>
>Content-Type: text/plain;  charset="iso-8859-1"
>
>On Thursday 11 September 2008 8:10:32 am support.mn at elisanet.fi wrote:
> > Hello,
> >
> > the proj-4 manuals might need some updating and cleaning?
> > There are basicly two groups whcih need them.
>
>Between answering all the emails I sometime work on the manual .
>
>Have you looked at the libproj4 manual.pdf on:
>
>http://members.verizon.net/~gerald.evenden/proj4/
>
>It is 123 pages but getting a bit old.  The 
>version in my machine is up to 128
>pages plus corrections and I am working on an improved TM section which will
>add 7 or 8 pages.  The sections on cylindricals and pseudocylindricals are
>fairly complete.  Most work is needed on conic.  Miscellaneous is fairly
>complete.  The math for all projections is given so one can see how the
>various options relate to the computations.  Internal library procedures are
>fairly complete.
>
>The above manual does not cover lproj options (-x etc.) but they are almost
>identical to older documentation of proj.
>
>I would like some detailed illustrations related to things like local grid
>systems but at the moment I do not have sufficiently detailed coastline file
>to do them.
>
>My manuals do not do datums.
>
> > A) Programmers that utilise the library. More or less programming
> > related matters and details. This could be the "Proj-4 Programmer's
> > Manual".
> >
> > B) End users that use the projections. They need information what
> > can be done. What is available and what are the exact parameters
> > and how to use them in each projection and datum available.
> > Exmples are most informative. This might be something like
> > "Proj-4 End User´s Manual". These people are mostly not interrested
> > of the programming details and those matter should be put in the
> > first manual. Then there is also the end application´s "User Manual",
> > which tells more about the application and how to use it.
> > That would be the third manual, written by the proj-4-application
> > makers. Maybe the proj-4 part would be an appendix in this
> > manual?
>
>I do not need to take my shoes off to count the 
>projections that are difficult
>to use---omerc is a good example of a stinker.  Also, I cannot over emphasize
>the use of the -V option with [l]proj where one can experiment with the
>options and where the output will also tell the user if an option is
>specified and not used by the projection.
>
> > So the "Proj-4 End User Manual" goes to the end user, if the
> > proj-4 definition is directly visible for the end user... sometimes
> > not, if there is a layer above proj-4.
> >
> > Now the situation is so that there are several proj-4 manuals in
> > pdf format and it is hard to find any specific information especially
> > about "how to use the projections and datums" since the
> > information is here and there. At least one would expect to
> > find all projections and their usage (and datums) in one manual .
> >
> > And of course to keep those 2 manuals up to date to the latest
> > program versions. Manuals might have same versions as
> > programs so that everything would be documented.
> >
> > The end application manuals and documentations keep us so
> > busy that any help with the projections and datums would be
> > highly respected. BTW: Our application can only use those
> > projections that have both forward and inverese projections.
> > So it would be nice if those projections with missing inverese
> > projection would be separated somehow in it´s own group.
> >
> > Etc. etc.
> >
> > Any ideas? Somebody might want to collect and compose
> > those two proj-4 manuals using the pdf originals that are
> > somewhere? Anyway that is what we would very much need.
> >
> > We might hide all the projection and datum complexity in some
> > applications (ready made maps), but sometimes they are visible.
>
>To be sure. there are different interest and capability levels that manuals
>address.  However, my only intererst is to provide documentation that is as
>complete as possible but also, in the interests of brevity, assumes that the
>reader has sufficient background and related skill to understand that
>material and how to properly apply it.  It is not an elementary how-to
>manual.
>
>Please, please, please.  Anyone finding errors in the previously reference
>manual please notify this group.  Thank-you.
>
>--
>The whole religious complexion of the modern world is due
>to the absence from Jerusalem of a lunatic asylum.
>-- Havelock Ellis (1859-1939) British psychologist
>


Jay Hollingsworth

Seabed Portfolio Manager and
Principal Data Architect
Schlumberger Information Solutions
phone: 713 513 8854 fax: 713 513 2093




From cjmce at lsu.edu  Fri Sep 12 14:37:20 2008
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 12 Sep 2008 16:37:20 -0500
Subject: [Proj] Re: Proj Digest, Vol 52, Issue 17
References: <200809111601.m8BG1Djv017407@duke.maptools.org>
	<0K7300C8HOVM34A0@gb0135mbx01.mail.slb.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2414@email002.lsu.edu>

I'll agree with that 100% without further suggestion.
 
Clifford J. Mugnier, C.P., C.M.S.
Past National Director (2006-2008),
Photogrammetric Applications Division
American Society for Photogrammetry and Remote Sensing 
and 
Chief of Geodesy,
CENTER FOR GEOINFORMATICS 
Department of Civil Engineering 
Patrick F. Taylor Hall 3223A
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4474 [Research] 
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Member Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group - (Part of "EPSG")
======================================================
http://www.asprs.org/resources/GRIDS/
======================================================

________________________________

From: proj-bounces at lists.maptools.org on behalf of Jay Hollingsworth
Sent: Fri 12-Sep-08 15:57
To: proj at lists.maptools.org
Subject: [Proj] Re: Proj Digest, Vol 52, Issue 17



At the risk of opening a floodgate of alternate
suggestions, the EPSG is the source of the
projection parameters and they have several
Guidance notes at
http://www.epsg.org/guides/index.html, including
something for a more general audience (Guidance
Note 1) as well as more-detailed notes on the
transformation and projection equations and special problems.

I know these aren't proj-specific, but they have
a lot of content to help decide what to use.


Jay

At 11:01 AM 9/11/2008, you wrote:
>----------------------------------------------------------------------
>
>Message: 1
>Date: Thu, 11 Sep 2008 11:17:06 -0400
>From: "Gerald I. Evenden" <geraldi.evenden at gmail.com>
>Subject: Re: [Proj] Some need for updated proj-4 manuals
>To: "PROJ.4 and general Projections Discussions"
>         <proj at lists.maptools.org>
>Message-ID: <200809111117.06551.geraldi.evenden at gmail.com>
>Content-Type: text/plain;  charset="iso-8859-1"
>
>On Thursday 11 September 2008 8:10:32 am support.mn at elisanet.fi wrote:
> > Hello,
> >
> > the proj-4 manuals might need some updating and cleaning?
> > There are basicly two groups whcih need them.
>
>Between answering all the emails I sometime work on the manual .
>
>Have you looked at the libproj4 manual.pdf on:
>
>http://members.verizon.net/~gerald.evenden/proj4/
>
>It is 123 pages but getting a bit old.  The
>version in my machine is up to 128
>pages plus corrections and I am working on an improved TM section which will
>add 7 or 8 pages.  The sections on cylindricals and pseudocylindricals are
>fairly complete.  Most work is needed on conic.  Miscellaneous is fairly
>complete.  The math for all projections is given so one can see how the
>various options relate to the computations.  Internal library procedures are
>fairly complete.
>
>The above manual does not cover lproj options (-x etc.) but they are almost
>identical to older documentation of proj.
>
>I would like some detailed illustrations related to things like local grid
>systems but at the moment I do not have sufficiently detailed coastline file
>to do them.
>
>My manuals do not do datums.
>
> > A) Programmers that utilise the library. More or less programming
> > related matters and details. This could be the "Proj-4 Programmer's
> > Manual".
> >
> > B) End users that use the projections. They need information what
> > can be done. What is available and what are the exact parameters
> > and how to use them in each projection and datum available.
> > Exmples are most informative. This might be something like
> > "Proj-4 End User´s Manual". These people are mostly not interrested
> > of the programming details and those matter should be put in the
> > first manual. Then there is also the end application´s "User Manual",
> > which tells more about the application and how to use it.
> > That would be the third manual, written by the proj-4-application
> > makers. Maybe the proj-4 part would be an appendix in this
> > manual?
>
>I do not need to take my shoes off to count the
>projections that are difficult
>to use---omerc is a good example of a stinker.  Also, I cannot over emphasize
>the use of the -V option with [l]proj where one can experiment with the
>options and where the output will also tell the user if an option is
>specified and not used by the projection.
>
> > So the "Proj-4 End User Manual" goes to the end user, if the
> > proj-4 definition is directly visible for the end user... sometimes
> > not, if there is a layer above proj-4.
> >
> > Now the situation is so that there are several proj-4 manuals in
> > pdf format and it is hard to find any specific information especially
> > about "how to use the projections and datums" since the
> > information is here and there. At least one would expect to
> > find all projections and their usage (and datums) in one manual .
> >
> > And of course to keep those 2 manuals up to date to the latest
> > program versions. Manuals might have same versions as
> > programs so that everything would be documented.
> >
> > The end application manuals and documentations keep us so
> > busy that any help with the projections and datums would be
> > highly respected. BTW: Our application can only use those
> > projections that have both forward and inverese projections.
> > So it would be nice if those projections with missing inverese
> > projection would be separated somehow in it´s own group.
> >
> > Etc. etc.
> >
> > Any ideas? Somebody might want to collect and compose
> > those two proj-4 manuals using the pdf originals that are
> > somewhere? Anyway that is what we would very much need.
> >
> > We might hide all the projection and datum complexity in some
> > applications (ready made maps), but sometimes they are visible.
>
>To be sure. there are different interest and capability levels that manuals
>address.  However, my only intererst is to provide documentation that is as
>complete as possible but also, in the interests of brevity, assumes that the
>reader has sufficient background and related skill to understand that
>material and how to properly apply it.  It is not an elementary how-to
>manual.
>
>Please, please, please.  Anyone finding errors in the previously reference
>manual please notify this group.  Thank-you.
>
>--
>The whole religious complexion of the modern world is due
>to the absence from Jerusalem of a lunatic asylum.
>-- Havelock Ellis (1859-1939) British psychologist
>


Jay Hollingsworth

Seabed Portfolio Manager and
Principal Data Architect
Schlumberger Information Solutions
phone: 713 513 8854 fax: 713 513 2093


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20080912/eb57feec/attachment.html>

From support.mn at elisanet.fi  Fri Sep 12 16:46:46 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Sat, 13 Sep 2008 02:46:46 +0300 (EEST)
Subject: [Proj] Some need for updated proj-4 manuals
Message-ID: <27259519.3641641221263207258.JavaMail.support.mn@elisanet.fi>

"Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti: 

> Between answering all the emails I sometime work on the manual .
> 
> Have you looked at the libproj4 manual.pdf on:
> 
> http://members.verizon.net/~gerald.evenden/proj4/
> 

It is very good, but as you said it is more targeted to the programmer and
implementer of the proj library. It tells how it was done and all the details.
But that is mostly what the end users (in my case) do not want to know. They
want to know "How to use it?" and all the other details they just let somebody
else (like you and me) to figure out.

Our end users only see the proj-4 projection-datum declaration
(or header). They have to figure out what header is needed
for different areas of the earth and different kind of maps. They
are conserned about what is mostly used there and how
to calibrate those maps to be used in computers. They have no idea
what calculations are done and when... and they also do not have to,
since the idea is just that. To provide a system that lets the computer
do the navigation and map projections and datum shifts. And lets
the user consentrate to his business... maybe getting to some point 
on earth.

Our map headers look like below, and that is all the end users
have to deal when using the program. The proj routines are
called and datums changed as needed.

# Google Earth view over North Europe
proj=nsper
lat_0=63d0424.33"N
lon_0=24d45'52.42"E
k=1.000000
x_0=0
y_0=0
a=6371000
h=2310420
units=m
no_defs

(There should be the "datum=WGS84" line also to be exact. But
since it is so large view, it does not make a huge difference )

-------------------

Let's take an example: We have some Windows Vista user. All he wants
to know is, what does he have to do to store the family photo album
into the computers HDD. He is not interested to know how the color
correction is calculated mathematically. He just wants to know how to
apply such a correction to a photo before storing it. So we never load
his brain with such details. It is completly an internal matter of the
Windows OS, nobody knows... and nobody cares (except the programmers
of course). He only needs some basic information what the color correction
does. but to know how it is done, just is waste of time for him.

Now we have a similar situation with this (navigation) program. The end user
only wants to know what are the parameters he have to enter with the
maps to make them work. All the details are not required.

-----

Now the average user opens some help page and trys to figure out what
is the projection. Does it look like Mercator or is it maybe Lamberts Conformal
Conic... Then he finds a list like on a help page:

"Proj-4 Parameters"

aea : Albers Equal Area
  Conic Sph&Ell
  lat_1= lat_2=

aeqd : Azimuthal Equidistant
  Azi, Sph&Ell
  lat_0 guam

etc. etc.


But he has no idea, what numbers should be given in lat_1 for "aea".

--------

Then he opens a new document... called

"Cartographic Projection Procedures for the UNIX
EnvironmentA Users Manual"

He is trying to figure out how to use "aea" and what on earth is
"lat_1"?

But the manual starts to tell him how to program that library.
No... that is not what he is looking for. Then he finds that there
is a chapter

"Projection descriptions"

Now that what he is looking fo.

Usage and options: +proj=aea +lat 0=ö0 +lat 1=ö1 +lat 2=ö2

Still he does not know what is lat_0 called? Is it "standard parallel" or
"latitude of origin" or "what ever" ??

And where are all the new projections? There seems to be a second
and third manual descriping more projections....

--------------------------------

The point is that the end user needs a manual where only the projections
and datums are descriped with the information how some change of
value affects the result. All other information just overloads his brain and
makes him angry and frustrated. ;)

> It is 123 pages but getting a bit old.  The version in my machine is up to 128 
> pages plus corrections and I am working on an improved TM section which will 
> add 7 or 8 pages.  The sections on cylindricals and pseudocylindricals are 
> fairly complete.  Most work is needed on conic.  Miscellaneous is fairly 
> complete.  The math for all projections is given so one can see how the 
> various options relate to the computations.  Internal library procedures are 
> fairly complete.
> 

As said, the point would be to separate those pages into two manuals:

1) Programmer's Manual
- all talk about implementation, how to use it, how it was done, and
the details

2) End User's Manual
- a list of available projections and datums and how to use them
and what are the parameters and how they affect the projection or
datum if altered...

> The above manual does not cover lproj options (-x etc.) but they are almost 
> identical to older documentation of proj.
> 

Well, the idea would be to keep the manual up to date with the library... at
least to some level.

> I would like some detailed illustrations related to things like local grid 
> systems but at the moment I do not have sufficiently detailed coastline file 
> to do them.
> 

That is exactly what is required: What is "Swiis Grid"?, what are the English
grid letters and numbers? Where goes Swedish grid. Australians seem to
have their own grid system. USA NAD grids are also rather soooky.. and
how to convert them to some meaningfull parameters when using
proj-4 defined maps. My opinion is that mostly you just omit the special
grid systems, since they usually just rename the projected plane's
coordinates with some minor shifts in numbers (maybe some false
northing and easting matter).

In our application the user only needs to know how to convert the grid
numbering to actual easting and northing values generated by the
calculations. So the local grid is more or less a "local joke"...

> My manuals do not do datums.
> 

Somebody should add the information related to datums, so that the end user
could use them correctly.

------------------

Our application's manuals tell what projections and datums are. What is
needed is "how to use them", "how does a change of some parameter
affect the projection", "what are the exact names of those parameters",
"which way towgs84 numbers should be given", "what projections are
used and how in different parts of the earth", etc.

Regards: Janne.




From al001 at uni-koeln.de  Sat Sep 13 01:13:32 2008
From: al001 at uni-koeln.de (Irwin Scollar)
Date: Sat, 13 Sep 2008 10:13:32 +0200
Subject: [Proj] Egypt 7 parameter datum transformation again
Message-ID: <200809130814.m8D8E8PH004441@smtp-auth.uni-koeln.de>

Egypt 7 parameter datum transformation, my recent posting:

A contact in Cairo sent me a PDF paper published in 2007 with a 
detailed discussion and 7 parameter transformation values using over 
30 primary triangulation points in Egypt.

Here's the reference:

Abdallah Saad, Mona Saad, Ahmed Shaker and Amro Hanafi, 
Remove-Restore Technique Remove-Restore Technique Remove-Restore 
Technique for Improving the Datum Transformation Process, Strategic 
Integration of Surveying Services FIG Working Week 2007 Hong Kong 
SAR, China, 13-17 May 2007

If anyone wishes to have a copy, please contact me off-list. If 
anyone can provide a link to a free version of the original, please 
post the link here.

Irwin Scollar



From support.mn at elisanet.fi  Sat Sep 13 05:38:25 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Sat, 13 Sep 2008 15:38:25 +0300 (EEST)
Subject: [Proj] Unknown projection?
Message-ID: <6918396.305541221309505496.JavaMail.support.mn@elisanet.fi>

Hello,

I have a picture from 60's and I can not figure out what is the projection
used. Can anybody help me?

Here is the map:

http://i140.photobucket.com/albums/r38/_videos_/maps/WorldRtsL.jpg

http://s140.photobucket.com/albums/r38/_videos_/maps/WorldRtsL.jpg


Regards: Janne
.


From pbander at cavtel.net  Sat Sep 13 07:59:24 2008
From: pbander at cavtel.net (Paul B. Anderson)
Date: Sat, 13 Sep 2008 10:59:24 -0400
Subject: [Proj] Unknown projection?
References: <6918396.305541221309505496.JavaMail.support.mn@elisanet.fi>
Message-ID: <6E7DBE5A80E14714941FDCD97D17297F@ISUCONNECT>

- Janne,

Your map graphic appears to be in the Winkel Tripel map projection. I would 
also suggest that it is using Oswald Winkel's original selection of 50.46667 
degrees as the Special Parallel.

Note that by the 1950s John Bartholomew was using a special parallel of 40 
degrees for his version of the Tripel, giving his graphic a more flattened 
appearance in the Y direction.

- Paul

Paul B. Anderson FCCS (USN, Retired)
Kingsport, TN native living in Norfolk, VA
My Map Projection web site:
http://www.csiss.org/map-projections/index.html

----- Original Message ----- 
From: <support.mn at elisanet.fi>
To: <proj at lists.maptools.org>
Sent: Saturday, September 13, 2008 8:38 AM
Subject: [Proj] Unknown projection?


> Hello,
>
> I have a picture from 60's and I can not figure out what is the projection
> used. Can anybody help me?
>
> Here is the map:
>
> http://i140.photobucket.com/albums/r38/_videos_/maps/WorldRtsL.jpg
>
> http://s140.photobucket.com/albums/r38/_videos_/maps/WorldRtsL.jpg
>
>
> Regards: Janne
> .
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj 



From geraldi.evenden at gmail.com  Sat Sep 13 08:16:02 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sat, 13 Sep 2008 11:16:02 -0400
Subject: [Proj] Unknown projection?
In-Reply-To: <6918396.305541221309505496.JavaMail.support.mn@elisanet.fi>
References: <6918396.305541221309505496.JavaMail.support.mn@elisanet.fi>
Message-ID: <200809131116.02322.geraldi.evenden@gmail.com>

On Saturday 13 September 2008 8:38:25 am support.mn at elisanet.fi wrote:
> Hello,
>
> I have a picture from 60's and I can not figure out what is the projection
> used. Can anybody help me?
>
> Here is the map:
>
> http://i140.photobucket.com/albums/r38/_videos_/maps/WorldRtsL.jpg
>
> http://s140.photobucket.com/albums/r38/_videos_/maps/WorldRtsL.jpg
>
>
> Regards: Janne

Most likely one of the flat-polar modified Azimuthals like the Winkel Tripel.  
See Modified Azimuthals figure in libproj4 Manual.  Unfortunately, your map's 
poles are trimmed off.

Your problem is where a lot of people would like to boil in oil publishers of 
maps that do not include margin statement about the projection used and 
possible options.  No, not boiled in oil.  Drawn and quartered is better.

PS: by "flat-polar" I mean that the meridians to not come to a point.  The 
Poles may be either a straight or a curved line.

Isn't the National Geographic Society using Winkel Tripel now instead of the 
Robinson projection?  NGS is a good example of proper map annotation.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Sat Sep 13 08:25:58 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sat, 13 Sep 2008 11:25:58 -0400
Subject: [Proj] Unknown projection?
In-Reply-To: <6E7DBE5A80E14714941FDCD97D17297F@ISUCONNECT>
References: <6918396.305541221309505496.JavaMail.support.mn@elisanet.fi>
	<6E7DBE5A80E14714941FDCD97D17297F@ISUCONNECT>
Message-ID: <200809131125.58273.geraldi.evenden@gmail.com>

On Saturday 13 September 2008 10:59:24 am Paul B. Anderson wrote:
> - Janne,
>
> Your map graphic appears to be in the Winkel Tripel map projection. I would
> also suggest that it is using Oswald Winkel's original selection of
> 50.46667 degrees as the Special Parallel.
>
> Note that by the 1950s John Bartholomew was using a special parallel of 40
> degrees for his version of the Tripel, giving his graphic a more flattened
> appearance in the Y direction.

This is exactly why I include the projection math in the manual.  The factor 
Anderson is discussing is +lat_1 option for the +proj=wintri projection.  
Select your own option value and name a new projection.  ;-)

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From support.mn at elisanet.fi  Sat Sep 13 08:42:29 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Sat, 13 Sep 2008 18:42:29 +0300 (EEST)
Subject: [Proj] Unknown projection?
Message-ID: <13499380.1417101221320549997.JavaMail.support.mn@elisanet.fi>

"Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti: 
> On Saturday 13 September 2008 10:59:24 am Paul B. Anderson wrote:
> > - Janne,
> >
> > Your map graphic appears to be in the Winkel Tripel map projection. I would
> > also suggest that it is using Oswald Winkel's original selection of
> > 50.46667 degrees as the Special Parallel.
> >
> > Note that by the 1950s John Bartholomew was using a special parallel of 40
> > degrees for his version of the Tripel, giving his graphic a more flattened
> > appearance in the Y direction.
> 
> This is exactly why I include the projection math in the manual.  The factor 
> Anderson is discussing is +lat_1 option for the +proj=wintri projection.  
> Select your own option value and name a new projection.  ;-)
> 

Ok, now the problem seems to be that "wintri" does not have any inverse projection
available. What is the reason not to have inverse projections for all routines
in the library... math is too hard?

Janne.





From cjmce at lsu.edu  Sat Sep 13 09:16:10 2008
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Sat, 13 Sep 2008 11:16:10 -0500
Subject: [Proj] Egypt 7 parameter datum transformation again
References: <200809130814.m8D8E8PH004441@smtp-auth.uni-koeln.de>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2415@email002.lsu.edu>

Irwin,
 
I don't know how to contact you off-list, but I certainly would love to receive a copy of that paper!
 
Regards,
 
Cliff Mugnier
LSU
1423 Westchester Drive
Baton Rouge, LA  70810

________________________________

From: proj-bounces at lists.maptools.org on behalf of Irwin Scollar
Sent: Sat 13-Sep-08 03:13
To: proj at lists.maptools.org
Subject: [Proj] Egypt 7 parameter datum transformation again



Egypt 7 parameter datum transformation, my recent posting:

A contact in Cairo sent me a PDF paper published in 2007 with a
detailed discussion and 7 parameter transformation values using over
30 primary triangulation points in Egypt.

Here's the reference:

Abdallah Saad, Mona Saad, Ahmed Shaker and Amro Hanafi,
Remove-Restore Technique Remove-Restore Technique Remove-Restore
Technique for Improving the Datum Transformation Process, Strategic
Integration of Surveying Services FIG Working Week 2007 Hong Kong
SAR, China, 13-17 May 2007

If anyone wishes to have a copy, please contact me off-list. If
anyone can provide a link to a free version of the original, please
post the link here.

Irwin Scollar

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20080913/5457664c/attachment.html>

From cjmce at lsu.edu  Sat Sep 13 09:28:58 2008
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Sat, 13 Sep 2008 11:28:58 -0500
Subject: [Proj] Egypt 7 parameter datum transformation again
References: <200809130814.m8D8E8PH004441@smtp-auth.uni-koeln.de>
	<B597ADFC46B67741B18EA6AA13613FF7EC2415@email002.lsu.edu>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2417@email002.lsu.edu>

Irwin,
 
Never mind; it's at: http://www.fig.net/pub/fig2007/papers/ts_1b/ts01b_03_saad_saad_1226.pdf
 
Cliff Mugnier

________________________________

From: proj-bounces at lists.maptools.org on behalf of Clifford J Mugnier
Sent: Sat 13-Sep-08 11:16
To: PROJ.4 and general Projections Discussions
Subject: RE: [Proj] Egypt 7 parameter datum transformation again


Irwin,
 
I don't know how to contact you off-list, but I certainly would love to receive a copy of that paper!
 
Regards,
 
Cliff Mugnier
LSU
1423 Westchester Drive
Baton Rouge, LA  70810

________________________________

From: proj-bounces at lists.maptools.org on behalf of Irwin Scollar
Sent: Sat 13-Sep-08 03:13
To: proj at lists.maptools.org
Subject: [Proj] Egypt 7 parameter datum transformation again



Egypt 7 parameter datum transformation, my recent posting:

A contact in Cairo sent me a PDF paper published in 2007 with a
detailed discussion and 7 parameter transformation values using over
30 primary triangulation points in Egypt.

Here's the reference:

Abdallah Saad, Mona Saad, Ahmed Shaker and Amro Hanafi,
Remove-Restore Technique Remove-Restore Technique Remove-Restore
Technique for Improving the Datum Transformation Process, Strategic
Integration of Surveying Services FIG Working Week 2007 Hong Kong
SAR, China, 13-17 May 2007

If anyone wishes to have a copy, please contact me off-list. If
anyone can provide a link to a free version of the original, please
post the link here.

Irwin Scollar

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20080913/55bd1f1f/attachment.html>

From pbander at cavtel.net  Sat Sep 13 09:26:58 2008
From: pbander at cavtel.net (Paul B. Anderson)
Date: Sat, 13 Sep 2008 12:26:58 -0400
Subject: [Proj] Unknown projection?
References: <13499380.1417101221320549997.JavaMail.support.mn@elisanet.fi>
Message-ID: <82440F293A1342F0BE081D6D97EBFB94@ISUCONNECT>

- Janne,

The difficulty comes about because the Tripel is actually composed of 2 map 
projections -- the Aitoff (pronounced 'I-toff') projection averaged with the 
Equirectangular projection (which provides the Special Parallel input). Yes, 
there are inverse formulas out there for the Tripel, but the values produced 
are approximations.

One person who has researched the inverse Winkel Tripel formulas issue is 
Dr. Robert Schmunk http://www.giss.nasa.gov/staff/rschmunk.html

BTW, a reference for this map projection is Snyder's 'Flattening the Earth'.

Paul B. Anderson FCCS (USN, Retired)
Kingsport, TN native living in Norfolk, VA
My Map Projection web site:
http://www.csiss.org/map-projections/index.html

----- Original Message ----- 
From: <support.mn at elisanet.fi>
To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>; 
<geraldi.evenden at gmail.com>
Sent: Saturday, September 13, 2008 11:42 AM
Subject: Re: [Proj] Unknown projection?


> "Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti:
>> On Saturday 13 September 2008 10:59:24 am Paul B. Anderson wrote:
>> > - Janne,
>> >
>> > Your map graphic appears to be in the Winkel Tripel map projection. I 
>> > would
>> > also suggest that it is using Oswald Winkel's original selection of
>> > 50.46667 degrees as the Special Parallel.
>> >
>> > Note that by the 1950s John Bartholomew was using a special parallel of 
>> > 40
>> > degrees for his version of the Tripel, giving his graphic a more 
>> > flattened
>> > appearance in the Y direction.
>>
>> This is exactly why I include the projection math in the manual.  The 
>> factor Anderson is discussing is +lat_1 option for the +proj=wintri 
>> projection.  Select your own option value and name a new projection.  ;-)
>>
>
> Ok, now the problem seems to be that "wintri" does not have any inverse 
> projection
> available. What is the reason not to have inverse projections for all 
> routines
> in the library... math is too hard?
>
> Janne.
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj 



From geraldi.evenden at gmail.com  Sat Sep 13 09:56:36 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sat, 13 Sep 2008 12:56:36 -0400
Subject: [Proj] Unknown projection?
In-Reply-To: <13499380.1417101221320549997.JavaMail.support.mn@elisanet.fi>
References: <13499380.1417101221320549997.JavaMail.support.mn@elisanet.fi>
Message-ID: <200809131256.37055.geraldi.evenden@gmail.com>

On Saturday 13 September 2008 11:42:29 am support.mn at elisanet.fi wrote:
> "Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti:
> > On Saturday 13 September 2008 10:59:24 am Paul B. Anderson wrote:
> > > - Janne,
> > >
> > > Your map graphic appears to be in the Winkel Tripel map projection. I
> > > would also suggest that it is using Oswald Winkel's original selection
> > > of 50.46667 degrees as the Special Parallel.
> > >
> > > Note that by the 1950s John Bartholomew was using a special parallel of
> > > 40 degrees for his version of the Tripel, giving his graphic a more
> > > flattened appearance in the Y direction.
> >
> > This is exactly why I include the projection math in the manual.  The
> > factor Anderson is discussing is +lat_1 option for the +proj=wintri
> > projection. Select your own option value and name a new projection.  ;-)
>
> Ok, now the problem seems to be that "wintri" does not have any inverse
> projection available. What is the reason not to have inverse projections
> for all routines in the library... math is too hard?
>
> Janne.

Sometimes yes; sometimes no; sometimes lack of interest.  The are several of 
the projections in this azimuthal category that do not have inverses and, 
based upon a quick look, are probably solvable.

Do you know for sure that the projection you showed is Winkel Tripel?  You do 
not need an inverse to determine this.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Sat Sep 13 10:40:12 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sat, 13 Sep 2008 13:40:12 -0400
Subject: [Proj] Unknown projection?
In-Reply-To: <82440F293A1342F0BE081D6D97EBFB94@ISUCONNECT>
References: <13499380.1417101221320549997.JavaMail.support.mn@elisanet.fi>
	<82440F293A1342F0BE081D6D97EBFB94@ISUCONNECT>
Message-ID: <200809131340.12523.geraldi.evenden@gmail.com>

On Saturday 13 September 2008 12:26:58 pm Paul B. Anderson wrote:
> - Janne,
>
> The difficulty comes about because the Tripel is actually composed of 2 map
> projections -- the Aitoff (pronounced 'I-toff') projection averaged with
> the Equirectangular projection (which provides the Special Parallel input).
> Yes, there are inverse formulas out there for the Tripel, but the values
> produced are approximations.
>
> One person who has researched the inverse Winkel Tripel formulas issue is
> Dr. Robert Schmunk http://www.giss.nasa.gov/staff/rschmunk.html
>
> BTW, a reference for this map projection is Snyder's 'Flattening the
> Earth'.
>
> Paul B. Anderson FCCS (USN, Retired)
> Kingsport, TN native living in Norfolk, VA
> My Map Projection web site:
> http://www.csiss.org/map-projections/index.html
>
> ----- Original Message -----
> From: <support.mn at elisanet.fi>
> To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>;
> <geraldi.evenden at gmail.com>
> Sent: Saturday, September 13, 2008 11:42 AM
> Subject: Re: [Proj] Unknown projection?
>
> > "Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti:
> >> On Saturday 13 September 2008 10:59:24 am Paul B. Anderson wrote:
> >> > - Janne,
> >> >
> >> > Your map graphic appears to be in the Winkel Tripel map projection. I
> >> > would
> >> > also suggest that it is using Oswald Winkel's original selection of
> >> > 50.46667 degrees as the Special Parallel.
> >> >
> >> > Note that by the 1950s John Bartholomew was using a special parallel
> >> > of 40
> >> > degrees for his version of the Tripel, giving his graphic a more
> >> > flattened
> >> > appearance in the Y direction.
> >>
> >> This is exactly why I include the projection math in the manual.  The
> >> factor Anderson is discussing is +lat_1 option for the +proj=wintri
> >> projection.  Select your own option value and name a new projection. 
> >> ;-)
> >
> > Ok, now the problem seems to be that "wintri" does not have any inverse
> > projection
> > available. What is the reason not to have inverse projections for all
> > routines
> > in the library... math is too hard?
> >
> > Janne.

I can't find any reference on his website to research on Winkel Tripel so I 
suspect he has not published it.

I take back my comment on ease of solution but it would seem to be invertible 
using iterative techniques---but slow.  Accuracy should only be dependent 
upon how many cpu ticks you want to give it.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From pbander at cavtel.net  Sat Sep 13 11:58:00 2008
From: pbander at cavtel.net (Paul B. Anderson)
Date: Sat, 13 Sep 2008 14:58:00 -0400
Subject: [Proj] Unknown projection?
In-Reply-To: <200809131340.12523.geraldi.evenden@gmail.com>
References: <13499380.1417101221320549997.JavaMail.support.mn@elisanet.fi>
	<82440F293A1342F0BE081D6D97EBFB94@ISUCONNECT>
	<200809131340.12523.geraldi.evenden@gmail.com>
Message-ID: <22d795600809131158s3b8541adtdae8d43aab5e0158@mail.gmail.com>

- Gerald,

I agree with your comments.

In regard to my comment on Dr. Schmunk -- he mentioned his research to me
during conversations he and I had when discussing various formulas and
reference material I have for use with his 'G.Projector' software. If he is
still monitoring 'Proj' he may respond to our discussion, or you could ask
him via an e-mail about this.

- Paul
On Sat, Sep 13, 2008 at 1:40 PM, Gerald I. Evenden <
geraldi.evenden at gmail.com> wrote:

>  On Saturday 13 September 2008 12:26:58 pm Paul B. Anderson wrote:
> > - Janne,
> >
> > The difficulty comes about because the Tripel is actually composed of 2
> map
> > projections -- the Aitoff (pronounced 'I-toff') projection averaged with
> > the Equirectangular projection (which provides the Special Parallel
> input).
> > Yes, there are inverse formulas out there for the Tripel, but the values
> > produced are approximations.
> >
> > One person who has researched the inverse Winkel Tripel formulas issue is
> > Dr. Robert Schmunk http://www.giss.nasa.gov/staff/rschmunk.html
> >
> > BTW, a reference for this map projection is Snyder's 'Flattening the
> > Earth'.
> >
> > Paul B. Anderson FCCS (USN, Retired)
> > Kingsport, TN native living in Norfolk, VA
> > My Map Projection web site:
> > http://www.csiss.org/map-projections/index.html
> >
> > ----- Original Message -----
> > From: <support.mn at elisanet.fi>
> > To: "PROJ.4 and general Projections Discussions" <
> proj at lists.maptools.org>;
> > <geraldi.evenden at gmail.com>
> > Sent: Saturday, September 13, 2008 11:42 AM
> > Subject: Re: [Proj] Unknown projection?
> >
> > > "Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti:
> > >> On Saturday 13 September 2008 10:59:24 am Paul B. Anderson wrote:
> > >> > - Janne,
> > >> >
> > >> > Your map graphic appears to be in the Winkel Tripel map projection.
> I
> > >> > would
> > >> > also suggest that it is using Oswald Winkel's original selection of
> > >> > 50.46667 degrees as the Special Parallel.
> > >> >
> > >> > Note that by the 1950s John Bartholomew was using a special parallel
> > >> > of 40
> > >> > degrees for his version of the Tripel, giving his graphic a more
> > >> > flattened
> > >> > appearance in the Y direction.
> > >>
> > >> This is exactly why I include the projection math in the manual.  The
> > >> factor Anderson is discussing is +lat_1 option for the +proj=wintri
> > >> projection.  Select your own option value and name a new projection.
> > >> ;-)
> > >
> > > Ok, now the problem seems to be that "wintri" does not have any inverse
> > > projection
> > > available. What is the reason not to have inverse projections for all
> > > routines
> > > in the library... math is too hard?
> > >
> > > Janne.
>
> I can't find any reference on his website to research on Winkel Tripel so I
> suspect he has not published it.
>
> I take back my comment on ease of solution but it would seem to be
> invertible
> using iterative techniques---but slow.  Accuracy should only be dependent
> upon how many cpu ticks you want to give it.
>
> --
> The whole religious complexion of the modern world is due
> to the absence from Jerusalem of a lunatic asylum.
> -- Havelock Ellis (1859-1939) British psychologist
> _______________________________________________
>  Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20080913/c78d18d4/attachment.html>

From ovv at hetnet.nl  Sat Sep 13 11:59:01 2008
From: ovv at hetnet.nl (OvV_HN)
Date: Sat, 13 Sep 2008 20:59:01 +0200
Subject: [Proj] Unknown projection?
In-Reply-To: <82440F293A1342F0BE081D6D97EBFB94@ISUCONNECT>
References: <13499380.1417101221320549997.JavaMail.support.mn@elisanet.fi>
	<82440F293A1342F0BE081D6D97EBFB94@ISUCONNECT>
Message-ID: <B1045ED5506248C78B47D1D938C141CE@PCHP>


----- Original Message ----- 
From: "Paul B. Anderson" <pbander at cavtel.net>
To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
Sent: Saturday, September 13, 2008 6:26 PM
Subject: Re: [Proj] Unknown projection?


> One person who has researched the inverse Winkel Tripel formulas issue is 
> Dr. Robert Schmunk http://www.giss.nasa.gov/staff/rschmunk.html


Let's not forget:

A GENERAL ALGORITHM FOR THE INVERSE TRANSFORMATION OF
MAP PROJECTIONS USING JACOBIAN MATRICES,
Cengizhan Ipbüker, I.Öztug Bildirici
Proceedings of the Third International Symposium Mathematical & 
Computational Applications
September 4-6, 2002. Konya, Turkey, pp. 175-182
Istanbul Tech. University Faculty of Civil Eng., Div. of Cartography, Maslak 
Istanbul,
Turkey
Selcuk University, Faculty of Eng., Dept. of Geodesy & Photogrammetry, 
Konya,
Turkey
http://atlas.selcuk.edu.tr/paperdb/papers/130.pdf

With a Newton iteration procedure for the inverse of Aitoff-Hammer, 
Winkel-Tripel and Mollweide.

Oscar van Vlijmen






From pbander at cavtel.net  Sat Sep 13 12:13:50 2008
From: pbander at cavtel.net (Paul B. Anderson)
Date: Sat, 13 Sep 2008 15:13:50 -0400
Subject: [Proj] Unknown projection?
In-Reply-To: <B1045ED5506248C78B47D1D938C141CE@PCHP>
References: <13499380.1417101221320549997.JavaMail.support.mn@elisanet.fi>
	<82440F293A1342F0BE081D6D97EBFB94@ISUCONNECT>
	<B1045ED5506248C78B47D1D938C141CE@PCHP>
Message-ID: <22d795600809131213wd698aadwa4a1cbdabdc3481a@mail.gmail.com>

- Oscar,

Thanks for the reference. I did not have it!

- Paul

On Sat, Sep 13, 2008 at 2:59 PM, OvV_HN <ovv at hetnet.nl> wrote:

>
> ----- Original Message ----- From: "Paul B. Anderson" <pbander at cavtel.net>
>
> To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
> Sent: Saturday, September 13, 2008 6:26 PM
> Subject: Re: [Proj] Unknown projection?
>
>
>  One person who has researched the inverse Winkel Tripel formulas issue is
>> Dr. Robert Schmunk http://www.giss.nasa.gov/staff/rschmunk.html
>>
>
>
> Let's not forget:
>
> A GENERAL ALGORITHM FOR THE INVERSE TRANSFORMATION OF
> MAP PROJECTIONS USING JACOBIAN MATRICES,
> Cengizhan Ipbüker, I.Öztug Bildirici
> Proceedings of the Third International Symposium Mathematical &
> Computational Applications
> September 4-6, 2002. Konya, Turkey, pp. 175-182
> Istanbul Tech. University Faculty of Civil Eng., Div. of Cartography,
> Maslak Istanbul,
> Turkey
> Selcuk University, Faculty of Eng., Dept. of Geodesy & Photogrammetry,
> Konya,
> Turkey
> http://atlas.selcuk.edu.tr/paperdb/papers/130.pdf
>
> With a Newton iteration procedure for the inverse of Aitoff-Hammer,
> Winkel-Tripel and Mollweide.
>
> Oscar van Vlijmen
>
>
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20080913/1e9421cd/attachment.html>

From geraldi.evenden at gmail.com  Sat Sep 13 12:53:30 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sat, 13 Sep 2008 15:53:30 -0400
Subject: [Proj] Unknown projection?
In-Reply-To: <B1045ED5506248C78B47D1D938C141CE@PCHP>
References: <13499380.1417101221320549997.JavaMail.support.mn@elisanet.fi>
	<82440F293A1342F0BE081D6D97EBFB94@ISUCONNECT>
	<B1045ED5506248C78B47D1D938C141CE@PCHP>
Message-ID: <200809131553.30309.geraldi.evenden@gmail.com>

On Saturday 13 September 2008 2:59:01 pm OvV_HN wrote:
> ----- Original Message -----
> From: "Paul B. Anderson" <pbander at cavtel.net>
> To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
> Sent: Saturday, September 13, 2008 6:26 PM
> Subject: Re: [Proj] Unknown projection?
>
> > One person who has researched the inverse Winkel Tripel formulas issue is
> > Dr. Robert Schmunk http://www.giss.nasa.gov/staff/rschmunk.html
>
> Let's not forget:
>
> A GENERAL ALGORITHM FOR THE INVERSE TRANSFORMATION OF
> MAP PROJECTIONS USING JACOBIAN MATRICES,
> Cengizhan Ipbüker, I.Öztug Bildirici
> Proceedings of the Third International Symposium Mathematical &
> Computational Applications
> September 4-6, 2002. Konya, Turkey, pp. 175-182
> Istanbul Tech. University Faculty of Civil Eng., Div. of Cartography,
> Maslak Istanbul,
> Turkey
> Selcuk University, Faculty of Eng., Dept. of Geodesy & Photogrammetry,
> Konya,
> Turkey
> http://atlas.selcuk.edu.tr/paperdb/papers/130.pdf
>
> With a Newton iteration procedure for the inverse of Aitoff-Hammer,
> Winkel-Tripel and Mollweide.
>
> Oscar van Vlijmen

Yes, yes, an obvious approach and, as I was referring to earlier, one that can 
cost cpu ticks because it is an iterative process---bivariate Newton-Raphson.  
In addition, there can be problems with initial phi/lamda estimates but in 
this case they should not be too difficult.  A nasty bit is coming up with 
analytic derivatives or failing that, the more costly process of making 
numerical derivatives---more iterations on the forward equations and hassles 
near the projection limits with altering the numerical steps.  Etc., 
etc. ... .

One last problem is for those who might chafe under a GNU license because I 
would use GNU's Scientific Library for such efforts.  One projection in 
libproj4 already uses GSL but makefile flags allow for its exclusion if the 
eventual user does not have nor want the GSL library on their system.

Y'all may get a feeling for why I avoid the subject.  ;-)

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist



From hamish_b at yahoo.com  Sun Sep 14 00:58:25 2008
From: hamish_b at yahoo.com (Hamish)
Date: Sun, 14 Sep 2008 00:58:25 -0700 (PDT)
Subject: [Proj] Some need for updated proj-4 manuals
In-Reply-To: <27259519.3641641221263207258.JavaMail.support.mn@elisanet.fi>
Message-ID: <538519.5438.qm@web110004.mail.gq1.yahoo.com>

> Our application's manuals tell what projections and datums are. What is
> needed is "how to use them", "how does a change of some parameter
> affect the projection", "what are the exact names of those parameters",
> "which way towgs84 numbers should be given", "what projections are
> used and how in different parts of the earth", etc.

Janne, 

with due respect, libproj's documentation responsibility ends with the library interface and internals. It is well beyond the scope of the
project to supply a linking application's end-users with a textbook
primer on geodesy. I view it as a bit ungrateful to ask them to do so
for you, regardless of the fact that they may be experts in the field
and well qualified to do so.

"What do PROJ4's +a, +lon_0, and +k terms mean? Which convention are
the 7-term towgs84 terms given in?" would be valid subjects of PROJ4
documentation.

"What projections are used and how in different parts of the earth" is
far far beyond the scope.


Having said that, I am sure the members of this list could collectively
build an excellent "For Further Reading" list. We maintain a small list
of links to useful guides in the GRASS GIS Wiki:
  http://grass.osgeo.org/wiki/Gis_Concepts#Geodesy_and_Cartography
   (direct improvements to that wiki page are most welcome)


regards,
Hamish



      



From al001 at uni-koeln.de  Sun Sep 14 02:45:22 2008
From: al001 at uni-koeln.de (Irwin Scollar)
Date: Sun, 14 Sep 2008 11:45:22 +0200
Subject: [Proj] Egypt Datum Transformation
In-Reply-To: <200809131900.m8DJ0FFW022515@duke.maptools.org>
References: <200809131900.m8DJ0FFW022515@duke.maptools.org>
Message-ID: <200809140945.m8E9jMiH016040@smtp-auth.uni-koeln.de>


>Clif Mugnier wrote:
>
>Never mind; it's at: 
>http://www.fig.net/pub/fig2007/papers/ts_1b/ts01b_03_saad_saad_1226.pdf

The correct link is:

http://www.fig.net/pub/fig2007/papers/ts_3b/ts03b_03_saad_etal_1218.pdf

Irwin Scollar




From geraldi.evenden at gmail.com  Sun Sep 14 07:59:12 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 14 Sep 2008 10:59:12 -0400
Subject: [Proj] Some need for updated proj-4 manuals
In-Reply-To: <538519.5438.qm@web110004.mail.gq1.yahoo.com>
References: <538519.5438.qm@web110004.mail.gq1.yahoo.com>
Message-ID: <200809141059.12672.geraldi.evenden@gmail.com>

On Sunday 14 September 2008 3:58:25 am Hamish wrote:
> > Our application's manuals tell what projections and datums are. What is
> > needed is "how to use them", "how does a change of some parameter
> > affect the projection", "what are the exact names of those parameters",
> > "which way towgs84 numbers should be given", "what projections are
> > used and how in different parts of the earth", etc.
>
> Janne,
>
> with due respect, libproj's documentation responsibility ends with the
> library interface and internals. It is well beyond the scope of the project
> to supply a linking application's end-users with a textbook primer on
> geodesy. I view it as a bit ungrateful to ask them to do so for you,
> regardless of the fact that they may be experts in the field and well
> qualified to do so.

There are a lot of books out there that cover the general subject but their 
coverage of projections is minimal---usually just one of each major class of 
projection like conic, cylindrical, etc..

For specific uses like grid systems that's what the EPSG data sets are for.

Libproj4 just covers the detailed niche of the math of the cartographic 
projection.  Nothing more, nothing less.  Usually. ;-)

> "What do PROJ4's +a, +lon_0, and +k terms mean? Which convention are
> the 7-term towgs84 terms given in?" would be valid subjects of PROJ4
> documentation.

+a like +b refer to the semimajor and semiminor ellipsoid axis.  For example, 
Snyder often refers to the Clarke '66 ellipsoid in this manner.

+lon_0 is normally refers to the central meridian (can't think of anyplace it 
does not  ;-)).

+k is scale multiplier but is deprecated in favor of +k_0 like in k_0=0.9996 
for UTM.

> "What projections are used and how in different parts of the earth" is
> far far beyond the scope.
>
>
> Having said that, I am sure the members of this list could collectively
> build an excellent "For Further Reading" list. We maintain a small list
> of links to useful guides in the GRASS GIS Wiki:
>   http://grass.osgeo.org/wiki/Gis_Concepts#Geodesy_and_Cartography
>    (direct improvements to that wiki page are most welcome)
>
>
> regards,
> Hamish
>
>
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From neteler at osgeo.org  Sun Sep 14 08:31:16 2008
From: neteler at osgeo.org (Markus Neteler)
Date: Sun, 14 Sep 2008 17:31:16 +0200
Subject: [Proj] Some need for updated proj-4 manuals
In-Reply-To: <538519.5438.qm@web110004.mail.gq1.yahoo.com>
References: <27259519.3641641221263207258.JavaMail.support.mn@elisanet.fi>
	<538519.5438.qm@web110004.mail.gq1.yahoo.com>
Message-ID: <86782b610809140831s6e7b2e1aoe5298e21b88c3772@mail.gmail.com>

On Sun, Sep 14, 2008 at 9:58 AM, Hamish <hamish_b at yahoo.com> wrote:
...
> "What do PROJ4's +a, +lon_0, and +k terms mean? Which convention are
> the 7-term towgs84 terms given in?" would be valid subjects of PROJ4
> documentation.

It could go into PROJ4 trac which is also a Wiki:

 http://trac.osgeo.org/proj/wiki/GenParms

Markus


From geraldi.evenden at gmail.com  Sun Sep 14 09:47:37 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 14 Sep 2008 12:47:37 -0400
Subject: [Proj] Some need for updated proj-4 manuals
In-Reply-To: <86782b610809140831s6e7b2e1aoe5298e21b88c3772@mail.gmail.com>
References: <27259519.3641641221263207258.JavaMail.support.mn@elisanet.fi>
	<538519.5438.qm@web110004.mail.gq1.yahoo.com>
	<86782b610809140831s6e7b2e1aoe5298e21b88c3772@mail.gmail.com>
Message-ID: <200809141247.37103.geraldi.evenden@gmail.com>

On Sunday 14 September 2008 11:31:16 am Markus Neteler wrote:
> On Sun, Sep 14, 2008 at 9:58 AM, Hamish <hamish_b at yahoo.com> wrote:
> ...
>
> > "What do PROJ4's +a, +lon_0, and +k terms mean? Which convention are
> > the 7-term towgs84 terms given in?" would be valid subjects of PROJ4
> > documentation.
>
> It could go into PROJ4 trac which is also a Wiki:
>
>  http://trac.osgeo.org/proj/wiki/GenParms
>
> Markus

A reminder here: I only speak for libproj4.  Proj[4] was originally my name 
for the projection system prior to its adoption into software like cs2cs and 
other material associated with maptools.

The libproj4 distribution from my site contains an application program called 
lproj ("l" for limited because the Tchebychev approximation code had been 
removed from proj).  lproj runs almost identically with my older proj[4] and 
neither product had/have anything related to datum control/conversions and 
some other manipulations unrelated to projections.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Sun Sep 14 10:05:53 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 14 Sep 2008 13:05:53 -0400
Subject: [Proj] Inverse Winkel Tripel and others
Message-ID: <200809141305.53581.geraldi.evenden@gmail.com>

After sleeping on the problem for a bit and enjoying the services of my new 
toy introduced in the tmerc circus I am now of the opinion that GSL is 
probably not needed in inversing inverseless projections.

However, libproj4 will need one or two tweeks to lib_proj.h and introduction 
of a new support routine.  I suspect the changes will warrant a boost of the 
release number from 4.3 to 4.4.  If the methods I now envision works, it will 
still take some time to apply it to all the inverse-less projections; even 
then some will probably remain inverse-less.  Worry about that later.

I will use Winkel Tripel as the first development/test case.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Sun Sep 14 10:25:05 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 14 Sep 2008 13:25:05 -0400
Subject: [Proj] Question for the math types
Message-ID: <200809141325.05718.geraldi.evenden@gmail.com>

Several projections are in the form f(phi,lam,t) where t is a third equation 
typically requiring Newton-Raphson for solution.

Question: what is the name of the function of t?

My initial reaction is to call it a parametric but I suspect that is not 
correct.
-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From support.mn at elisanet.fi  Sun Sep 14 18:36:38 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Mon, 15 Sep 2008 04:36:38 +0300 (EEST)
Subject: [Proj] Inverse Winkel Tripel and others
Message-ID: <2408329.1474711221442599157.JavaMail.support.mn@elisanet.fi>

"Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti: 
> After sleeping on the problem for a bit and enjoying the services of my new 
> toy introduced in the tmerc circus I am now of the opinion that GSL is 
> probably not needed in inversing inverseless projections.
> 
> However, libproj4 will need one or two tweeks to lib_proj.h and introduction 
> of a new support routine.  I suspect the changes will warrant a boost of the 
> release number from 4.3 to 4.4.  If the methods I now envision works, it will 
> still take some time to apply it to all the inverse-less projections; even 
> then some will probably remain inverse-less.  Worry about that later.
> 
> I will use Winkel Tripel as the first development/test case.
> 

Actually there is a very fast method to produce some inverse routine for
any projection (that can calculate forward). That is to calculate a
lookup table forward and then using that table backwards adding
some (maybe clever) interpolation?

If the error is a bit larger... it is anyway better than nothing at all.

Computers have very much memory nowadays so some extra tables
(generated on demand and request) would not be too costly. When
sombody initializes a projection he could also call an extra routine
that generates the interpolation tables etc. And those who don't need
them jsut don't generate any tables.

Tables and pre calculated values might also speed up the forward
routines in some cases? If that is required.

When a projection is initialized, there usually is a little time to spend
extra to do some precalculations. Assuming that the routine is fast
when calling it with the large point sets.

Regards: Janne.



From support.mn at elisanet.fi  Sun Sep 14 18:54:48 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Mon, 15 Sep 2008 04:54:48 +0300 (EEST)
Subject: [Proj] Some need for updated proj-4 manuals
Message-ID: <7622699.1474761221443688602.JavaMail.support.mn@elisanet.fi>

Hamish <hamish_b at yahoo.com> kirjoitti: 

> with due respect, libproj's documentation responsibility ends with
> the library interface and internals. It is well beyond the scope of the
> project to supply a linking application's end-users with a textbook
> primer on geodesy. I view it as a bit ungrateful to ask them to do so
> for you, regardless of the fact that they may be experts in the field
> and well qualified to do so.
> 

Well, my idea is simply to let those people that best know the business
to also do it. And there is actually no extra work required. Better to say
it would be only to divide what has been done so that the end user do
not need to read everything... only what they need to.

Actually the minimium would be to have a list of available projections, maybe
some picture how it looks and an accurate description of all parameters
and how they affect the result. And MOST OF THAT is already done what
I have seen. It would be just to sort them. SInce I don't have the original
scripts of the manuals and since it would benefit also the other. it would
be most efficient to be done so that the resulting material would be available
for everybody... not just some solution that uses the library.

The idea behind using libraries is that such work that can be done only
once... also would be done only once.

Janne.



From support.mn at elisanet.fi  Sun Sep 14 19:21:47 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Mon, 15 Sep 2008 05:21:47 +0300 (EEST)
Subject: [Proj] Question for the math types
Message-ID: <6762287.1474931221445307906.JavaMail.support.mn@elisanet.fi>

"Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti: 
> Several projections are in the form f(phi,lam,t) where t is a third equation 
> typically requiring Newton-Raphson for solution.
> 
> Question: what is the name of the function of t?
>

I am not a specialist in that area, but the following link?

http://en.wikipedia.org/wiki/Spherical_coordinate_system

Janne.



From hamish_b at yahoo.com  Sun Sep 14 20:34:06 2008
From: hamish_b at yahoo.com (Hamish)
Date: Sun, 14 Sep 2008 20:34:06 -0700 (PDT)
Subject: [Proj] Some need for updated proj-4 manuals
In-Reply-To: <7622699.1474761221443688602.JavaMail.support.mn@elisanet.fi>
Message-ID: <976212.25140.qm@web110007.mail.gq1.yahoo.com>

Janne wrote:
> Actually the minimium would be to have a list of available projections,

$ proj -l

> maybe some picture how it looks

http://www.galleryofmapprojections.com/  ->
http://www.csiss.org/map-projections/    (server down?)

> and an accurate description of all parameters

I wouldn't guarantee that it's a full set, but these are the ones used
in the EPSG file.

$ cat epsg | grep -v '^#' | tr ' ' '\n' | grep '^\+' | \
  cut -f1 -d'=' | sort | uniq
+a
+alpha
+b
+datum
+ellps
+k
+k_0
+lat_0
+lat_1
+lat_2
+lat_ts
+lon_0
+lonc
+no_defs
+pm
+proj
+south
+to_meter
+towgs84
+units
+x_0
+y_0
+zone

> and how they affect the result.

A short sentence/paragraph on each of the above would be nice.
As Markus suggested, the (FW/OSGeo) proj4 wiki is a nice place to work
on collaborative documents.
   http://trac.osgeo.org/proj/wiki/GenParms/

I made a start at naming the above, if others could please complete...


There you will find nice things like:
== Documentation ==
* General Parameter Notes
* Projections List page on the GeoTIFF site includes information on how
  to describe many common projections with PROJ.4 command arguments.


> The idea behind using libraries is that such work that can
> be done only once... also would be done only once.

Right.


Hamish



      



From glynn at gclements.plus.com  Sun Sep 14 23:37:06 2008
From: glynn at gclements.plus.com (Glynn Clements)
Date: Mon, 15 Sep 2008 07:37:06 +0100
Subject: [Proj] Some need for updated proj-4 manuals
In-Reply-To: <976212.25140.qm@web110007.mail.gq1.yahoo.com>
References: <7622699.1474761221443688602.JavaMail.support.mn@elisanet.fi>
	<976212.25140.qm@web110007.mail.gq1.yahoo.com>
Message-ID: <18638.658.271464.38102@cerise.gclements.plus.com>


Hamish wrote:

> > and an accurate description of all parameters
> 
> I wouldn't guarantee that it's a full set, but these are the ones used
> in the EPSG file.

[snip]

> > and how they affect the result.
> 
> A short sentence/paragraph on each of the above would be nice.
> As Markus suggested, the (FW/OSGeo) proj4 wiki is a nice place to work
> on collaborative documents.
>    http://trac.osgeo.org/proj/wiki/GenParms/
> 
> I made a start at naming the above, if others could please complete...

The following are taken from the table used by GRASS' g.setproj
module:

alpha	Azimuth angle at Cartesian Origin
azim	Azimuth Angle of Tilt in Decimal degrees
guam	
heigh	Height of Viewing Point in Meters
kfact	Scale Factor at the Central Meridian
lat0	Central Parallel
lat1	First Standard Parallel
lat2	Second Standard Parallel
lat3	Third Standard Parallel
latb	Angular Distance from Tangency Point
latts	Latitude of True Scale
lon0	Central Meridian
lon1	First Standard Meridian
lon2	Second Standard Meridian
lon3	Third Standard Meridian
lonc	Longitude of Cartesian Origin
lotsa	LOTSA
mfact	m factor
msfact	M factor
nfact	n factor
nocut	Both Hemispheres
norot	Suppress Rotation
noskew	Suppress Skew
nouoff	Suppress Offset from Pre-Rotated Axis
oalpha	
olat1	
olat2	
olatp	Latitude of New Pole
olon1	
olon2	
olonc	
olonp	Longitude of New Pole
qfact	q factor
rotconv	Origin Convergence Angle
snum	Satellite Number
south	South Hemisphere
spath	Satellite Path Number
theta	Theta Angle
tilt	Tilt Angle in Decimal Degrees
wfact	W factor
x0	False Easting
y0	False Northing
zone	Projection Zone

-- 
Glynn Clements <glynn at gclements.plus.com>


From Mikael.Rittri at carmenta.com  Mon Sep 15 00:14:28 2008
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 15 Sep 2008 09:14:28 +0200
Subject: [Proj] Unknown projection?
In-Reply-To: <B1045ED5506248C78B47D1D938C141CE@PCHP>
References: <13499380.1417101221320549997.JavaMail.support.mn@elisanet.fi><82440F293A1342F0BE081D6D97EBFB94@ISUCONNECT>
	<B1045ED5506248C78B47D1D938C141CE@PCHP>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101272301@posty.carmenta.se>

Ipbüker has also published a journal version of the conference paper:

    An Inverse Solution to the Winkel Tripel Projection Using Partial Derivatives.
    Cengizhan Ipbüker, CaGIS Journal, Vol. 29, no. 1 (Jan 2002).
    Abstract can be found at http://www.cartogis.org/publications/abstracts/cagisab0102.html

I read it some years ago. If I remember right, it was 
specifically targeted at Winkel Tripel, more so than the 
conference version.  
That is, for someone who is rusty on bivariate Newton-Raphson
- like me! - the CaGIS version may be easier to implement.
 
Best regards,
Mikael 

--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07 
mikael.rittri at carmenta.com
www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of OvV_HN
Sent: den 13 september 2008 20:59
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Unknown projection?


----- Original Message -----
From: "Paul B. Anderson" <pbander at cavtel.net>
To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
Sent: Saturday, September 13, 2008 6:26 PM
Subject: Re: [Proj] Unknown projection?


> One person who has researched the inverse Winkel Tripel formulas issue is 
> Dr. Robert Schmunk http://www.giss.nasa.gov/staff/rschmunk.html


Let's not forget:

A GENERAL ALGORITHM FOR THE INVERSE TRANSFORMATION OF
MAP PROJECTIONS USING JACOBIAN MATRICES,
Cengizhan Ipbüker, I.Öztug Bildirici
Proceedings of the Third International Symposium Mathematical & 
Computational Applications
September 4-6, 2002. Konya, Turkey, pp. 175-182
Istanbul Tech. University Faculty of Civil Eng., Div. of Cartography, Maslak 
Istanbul,
Turkey
Selcuk University, Faculty of Eng., Dept. of Geodesy & Photogrammetry, 
Konya,
Turkey
http://atlas.selcuk.edu.tr/paperdb/papers/130.pdf

With a Newton iteration procedure for the inverse of Aitoff-Hammer, 
Winkel-Tripel and Mollweide.

Oscar van Vlijmen




_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From geraldi.evenden at gmail.com  Mon Sep 15 06:56:55 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 15 Sep 2008 09:56:55 -0400
Subject: [Proj] Some need for updated proj-4 manuals
In-Reply-To: <18638.658.271464.38102@cerise.gclements.plus.com>
References: <7622699.1474761221443688602.JavaMail.support.mn@elisanet.fi>
	<976212.25140.qm@web110007.mail.gq1.yahoo.com>
	<18638.658.271464.38102@cerise.gclements.plus.com>
Message-ID: <200809150956.55936.geraldi.evenden@gmail.com>

On Monday 15 September 2008 2:37:06 am Glynn Clements wrote:
	...
> The following are taken from the table used by GRASS' g.setproj
> module:

These folks are obviously playing to a different drummer...

> alpha	Azimuth angle at Cartesian Origin
> azim	Azimuth Angle of Tilt in Decimal degrees
> guam
> heigh	Height of Viewing Point in Meters
> kfact	Scale Factor at the Central Meridian
> lat0	Central Parallel
> lat1	First Standard Parallel
> lat2	Second Standard Parallel
> lat3	Third Standard Parallel

That one gets me. ?  3rd parallel?  What kind of surface is that?

> latb	Angular Distance from Tangency Point
> latts	Latitude of True Scale
> lon0	Central Meridian
> lon1	First Standard Meridian
> lon2	Second Standard Meridian
> lon3	Third Standard Meridian

2nd and 3rd meridians!?!?

> lonc	Longitude of Cartesian Origin
> lotsa	LOTSA

'nuff said.

> mfact	m factor
> msfact	M factor
> nfact	n factor

this is like the hippy-dippy weatherman of the late, great George Carlin: " 
Some temperatures from around the country, ... 45, 50, 72, 60, 72, ... ".

Out of context, a list of options means nothing.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From roger at opq.se  Mon Sep 15 07:37:50 2008
From: roger at opq.se (Roger Oberholtzer)
Date: Mon, 15 Sep 2008 16:37:50 +0200
Subject: [Proj] SGS85 and WGS84
Message-ID: <1221489470.24676.45.camel@acme.pacific>


Using proj4 (C API), should it be possible to move values between WGS84
and SGS85? 'proj -le' lists that the SGS85 ellipsoid is known. But 'proj
-ld' does not list it as a datum/ellipsoid.

It is a little unclear from the docs (to me, but I am thick). At this
time, my user is unclear about exact requirements. I suspect that I will
need to convert from WGS84 to SRS85.


-- 
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Kapellgränd 7
P.O. Box 4205
SE-102 65 Stockholm, Sweden

Office: Int +46 8-615 60 20
Mobile: Int +46 70-815 1696

And remember:

It is RSofT and there is always something under construction. 
It is like talking about large city with all constructions finished. 
Not impossible, but very unlikely.




From pbander at cavtel.net  Mon Sep 15 08:13:57 2008
From: pbander at cavtel.net (Paul B. Anderson)
Date: Mon, 15 Sep 2008 11:13:57 -0400
Subject: [Proj] Some need for updated proj-4 manuals
References: <976212.25140.qm@web110007.mail.gq1.yahoo.com>
Message-ID: <EDBAFA8A91194942BC6F465D30B95F17@ISUCONNECT>

Hamish,

My web site is back up! This is the second time since Dr. Keith Clarke 
invited me to move my map projection material to UCSB that their servers 
have gone down. The first time was due to a forest fire. I don't know why 
the campus lost power this time (both servers were down).

Just for the record, the map projection material is actually on two 
different servers:
http://www.csiss.org/map-projections
-and-
http://www.spatial.ucsb.edu/map-projections
(at the time of my note, this server is still down)

- Paul

Paul B. Anderson FCCS (USN, Retired)
Kingsport, TN native living in Norfolk, VA
My Map Projection web site:
http://www.csiss.org/map-projections/index.html

----- Original Message ----- 
From: "Hamish" <hamish_b at yahoo.com>
To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>; 
<support.mn at elisanet.fi>
Sent: Sunday, September 14, 2008 11:34 PM
Subject: Re: [Proj] Some need for updated proj-4 manuals


> Janne wrote:
>> Actually the minimium would be to have a list of available projections,
>
> $ proj -l
>
>> maybe some picture how it looks
>
> http://www.galleryofmapprojections.com/  ->
> http://www.csiss.org/map-projections/    (server down?)
>
>> and an accurate description of all parameters
>
> I wouldn't guarantee that it's a full set, but these are the ones used
> in the EPSG file.
>
> $ cat epsg | grep -v '^#' | tr ' ' '\n' | grep '^\+' | \
>  cut -f1 -d'=' | sort | uniq
> +a
> +alpha
> +b
> +datum
> +ellps
> +k
> +k_0
> +lat_0
> +lat_1
> +lat_2
> +lat_ts
> +lon_0
> +lonc
> +no_defs
> +pm
> +proj
> +south
> +to_meter
> +towgs84
> +units
> +x_0
> +y_0
> +zone
>
>> and how they affect the result.
>
> A short sentence/paragraph on each of the above would be nice.
> As Markus suggested, the (FW/OSGeo) proj4 wiki is a nice place to work
> on collaborative documents.
>   http://trac.osgeo.org/proj/wiki/GenParms/
>
> I made a start at naming the above, if others could please complete...
>
>
> There you will find nice things like:
> == Documentation ==
> * General Parameter Notes
> * Projections List page on the GeoTIFF site includes information on how
>  to describe many common projections with PROJ.4 command arguments.
>
>
>> The idea behind using libraries is that such work that can
>> be done only once... also would be done only once.
>
> Right.
>
>
> Hamish
>
>
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj 



From geraldi.evenden at gmail.com  Mon Sep 15 08:24:52 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 15 Sep 2008 11:24:52 -0400
Subject: [Proj] Some need for updated proj-4 manuals
In-Reply-To: <976212.25140.qm@web110007.mail.gq1.yahoo.com>
References: <976212.25140.qm@web110007.mail.gq1.yahoo.com>
Message-ID: <200809151124.52946.geraldi.evenden@gmail.com>

On Sunday 14 September 2008 11:34:06 pm Hamish wrote:
> Janne wrote:
> > Actually the minimium would be to have a list of available projections,
>
> $ proj -l
>
> > maybe some picture how it looks
>
> http://www.galleryofmapprojections.com/  ->
> http://www.csiss.org/map-projections/    (server down?)

I can't get the above to work.

The libproj4 manual has pictures of most of the projections.

> > and an accurate description of all parameters
>
> I wouldn't guarantee that it's a full set, but these are the ones used
> in the EPSG file.

I am sorry but I find the following meaningless beside very misleading.

> $ cat epsg | grep -v '^#' | tr ' ' '\n' | grep '^\+' | \
>   cut -f1 -d'=' | sort | uniq
> +a
only applies to elliptical projections
What about +R and +R_V, +R_a, +R_g +R_h, +R_lat_a
> +alpha
use limited to 3 or 4 projections and possibly in different contexts
> +b
only one method besides +rf, +f, +e, +es
> +datum
not a proj option
> +ellps
> +k
deprecated
> +k_0
> +lat_0
> +lat_1
> +lat_2
only for conics
> +lat_ts
only a few projections
> +lon_0
> +lonc
only a couple of projections
> +no_defs
not in libproj4--- nasty option and out of place
> +pm
not in libproj4
> +proj
> +south
only a few projections
> +to_meter
> +towgs84
not in libproj4 --- not projection parameter
> +units
> +x_0
> +y_0
> +zone
only applies to UTM.

If you want a slightly more complete list of about 75 +options try:

a alpha azi b belgium beta czech e ellps es f gamma geoc
guam h k K k_0 lat_0 lat_1 lat_2 lat_b lat_t lat_ts lon_0
lon_1 lon_2 lonc lsat m M n no_cut no_off no_rot ns o_alpha
o_lat_1 o_lat_2 o_lat_c o_lat_p o_lon_1 o_lon_2 o_lon_c
o_lon_p o_proj over p path proj q R R_a R_A rf R_g R_h
R_lat_a R_lat_g rot R_V s south sym t theta tilt to_meter
units vopt W westo x_0 y_0 zone

>
> > and how they affect the result.

For a discussion of the above options see the libproj4 manual.

> A short sentence/paragraph on each of the above would be nice.

Only the setting of the earth's figure and a couple of the factors like x_0, 
y_0 can be discussed at a generic level.  Most operation need to be discussed 
as part of the projection description---pretty much as now available.

> As Markus suggested, the (FW/OSGeo) proj4 wiki is a nice place to work
> on collaborative documents.
>    http://trac.osgeo.org/proj/wiki/GenParms/

The above is really a web for cs2cs and and only has a smattering of proj 
related material.  Also, I am not sure whether the internals are up to 
libproj4 level.

> I made a start at naming the above, if others could please complete...

The list I made is fairly complete as I grepped it out of the RCS directory.
>
> There you will find nice things like:
> == Documentation ==
> * General Parameter Notes
> * Projections List page on the GeoTIFF site includes information on how
>   to describe many common projections with PROJ.4 command arguments.
>
> > The idea behind using libraries is that such work that can
> > be done only once... also would be done only once.

What about updates and upgrades?  That often affect manual contents.

> Right.
>
>
> Hamish
>
>
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From kees.krikke at orange.nl  Mon Sep 15 08:28:05 2008
From: kees.krikke at orange.nl (Kees Krikke)
Date: Mon, 15 Sep 2008 17:28:05 +0200
Subject: [Proj] Convergence
Message-ID: <48CE7F05.60203@orange.nl>

Hello,


I've made a piece of s/w that uses proj's convergence calculation to 
find the true north for a given grid north.

When testing with a utm and lcc projection i found some confusing 
results regarding the sign (direction) of the convergence.

To demonstrate this i modified proj.exe so it prints the convergence (in 
deg) at the end of the line when using the -S flag:


C:\proj-4.6.1\src>proj -vS +proj=utm +datum=WGS84 +lon_0=3
#Universal Transverse Mercator (UTM)
#       Cyl, Sph
#       zone= south
# +proj=utm +datum=WGS84 +lon_0=3 +ellps=WGS84 +towgs84=0,0,0
2 52
431350.30       5761510.32      <0.999658 0.999658 0.999316 1.20783e-006 
0.999658 0.999658 -0.788041>
4 52
568649.70       5761510.32      <0.999658 0.999658 0.999316 8.54066e-007 
0.999658 0.999658 0.788041>
4 52.1
568496.62       5772632.28      <0.999658 0.999658 0.999315 0 0.999658 
0.999658 0.789115>

 From the above results it seems that for utm the convergence is 
negative when west and positive when east of lon_0.
If you calculate two utm positions along the same longitude east of 
lon_0, you see that the easting reduces when going northwards.

 From this is seems that TrueNorth = GridNorth + convergence


I used the same points for a lcc projection:

C:\proj-4.6.1\src>proj -vS +proj=lcc +datum=WGS84 +lat_0=52 +lon_0=3 
+lat_1=50 +lat_2=54
#Lambert Conformal Conic
#       Conic, Sph&Ell
#       lat_1= and lat_2= or lat_0
# +proj=lcc +datum=WGS84 +lat_0=52 +lon_0=3 +lat_1=50 +lat_2=54 +ellps=WGS84
# +towgs84=0,0,0
2 52
-68634.11       472.08  <0.999392 0.999392 0.998785 0.000355057 0.999395 
0.999389 0.788173>
4 52
68634.11        472.08  <0.999392 0.999392 0.998785 0.000355708 0.999395 
0.999389 -0.788173>
4 52.1
68481.15        11591.10        <0.999393 0.999393 0.998787 0.000434814 
0.999397 0.99939 -0.788173>


The convergence sign west and east of the origin are opposite of the 
signs found with the utm. But what confuses me is that when i calculate 
two positions along a longitude east of the origin, the easting reduces 
when going northwards just like with the utm projection.

 From this is seems that TrueNorth = GridNorth - convergence


I think that either the convergence for lcc or utm has the wrong sign. 
But i can't tell which one because i don't know how convergence is defined.


Any thoughts about this?

Regards,

Kees Krikke



From ndzinn at comcast.net  Mon Sep 15 08:34:20 2008
From: ndzinn at comcast.net (Noel Zinn)
Date: Mon, 15 Sep 2008 10:34:20 -0500
Subject: [Proj] Convergence
In-Reply-To: <48CE7F05.60203@orange.nl>
References: <48CE7F05.60203@orange.nl>
Message-ID: <68C53823C38F4F7287B2E81F36D8448F@PowerSpec>

Pardon my proj4 syntax density, but are you in the south with TM and the
north with LCC?  If so, that's the reason.  -Noel

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Kees Krikke
Sent: Monday, September 15, 2008 10:28 AM
To: PROJ.4 and general Projections Discussions
Subject: [Proj] Convergence

Hello,


I've made a piece of s/w that uses proj's convergence calculation to 
find the true north for a given grid north.

When testing with a utm and lcc projection i found some confusing 
results regarding the sign (direction) of the convergence.

To demonstrate this i modified proj.exe so it prints the convergence (in 
deg) at the end of the line when using the -S flag:


C:\proj-4.6.1\src>proj -vS +proj=utm +datum=WGS84 +lon_0=3
#Universal Transverse Mercator (UTM)
#       Cyl, Sph
#       zone= south
# +proj=utm +datum=WGS84 +lon_0=3 +ellps=WGS84 +towgs84=0,0,0
2 52
431350.30       5761510.32      <0.999658 0.999658 0.999316 1.20783e-006 
0.999658 0.999658 -0.788041>
4 52
568649.70       5761510.32      <0.999658 0.999658 0.999316 8.54066e-007 
0.999658 0.999658 0.788041>
4 52.1
568496.62       5772632.28      <0.999658 0.999658 0.999315 0 0.999658 
0.999658 0.789115>

 From the above results it seems that for utm the convergence is 
negative when west and positive when east of lon_0.
If you calculate two utm positions along the same longitude east of 
lon_0, you see that the easting reduces when going northwards.

 From this is seems that TrueNorth = GridNorth + convergence


I used the same points for a lcc projection:

C:\proj-4.6.1\src>proj -vS +proj=lcc +datum=WGS84 +lat_0=52 +lon_0=3 
+lat_1=50 +lat_2=54
#Lambert Conformal Conic
#       Conic, Sph&Ell
#       lat_1= and lat_2= or lat_0
# +proj=lcc +datum=WGS84 +lat_0=52 +lon_0=3 +lat_1=50 +lat_2=54 +ellps=WGS84
# +towgs84=0,0,0
2 52
-68634.11       472.08  <0.999392 0.999392 0.998785 0.000355057 0.999395 
0.999389 0.788173>
4 52
68634.11        472.08  <0.999392 0.999392 0.998785 0.000355708 0.999395 
0.999389 -0.788173>
4 52.1
68481.15        11591.10        <0.999393 0.999393 0.998787 0.000434814 
0.999397 0.99939 -0.788173>


The convergence sign west and east of the origin are opposite of the 
signs found with the utm. But what confuses me is that when i calculate 
two positions along a longitude east of the origin, the easting reduces 
when going northwards just like with the utm projection.

 From this is seems that TrueNorth = GridNorth - convergence


I think that either the convergence for lcc or utm has the wrong sign. 
But i can't tell which one because i don't know how convergence is defined.


Any thoughts about this?

Regards,

Kees Krikke

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From kees.krikke at orange.nl  Mon Sep 15 10:42:03 2008
From: kees.krikke at orange.nl (Kees Krikke)
Date: Mon, 15 Sep 2008 19:42:03 +0200
Subject: [Proj] Convergence
In-Reply-To: <68C53823C38F4F7287B2E81F36D8448F@PowerSpec>
References: <48CE7F05.60203@orange.nl>
	<68C53823C38F4F7287B2E81F36D8448F@PowerSpec>
Message-ID: <48CE9E6B.7060901@orange.nl>

Noel,

No i'm not in the south. The line with zone= and south appears because i 
use the -v flag.

I always use the -v option with proj. It gives some additional 
information about parameters that can be used with a projection (like 
zone and south for utm) and a complete list of parameters that are 
actually used. This allows you to see all the parameters including those 
not set by directly by the user.


Regards,

Kees


Noel Zinn wrote:
> Pardon my proj4 syntax density, but are you in the south with TM and the
> north with LCC?  If so, that's the reason.  -Noel
> 
> -----Original Message-----
> From: proj-bounces at lists.maptools.org
> [mailto:proj-bounces at lists.maptools.org] On Behalf Of Kees Krikke
> Sent: Monday, September 15, 2008 10:28 AM
> To: PROJ.4 and general Projections Discussions
> Subject: [Proj] Convergence
> 
> Hello,
> 
> 
> I've made a piece of s/w that uses proj's convergence calculation to 
> find the true north for a given grid north.
> 
> When testing with a utm and lcc projection i found some confusing 
> results regarding the sign (direction) of the convergence.
> 
> To demonstrate this i modified proj.exe so it prints the convergence (in 
> deg) at the end of the line when using the -S flag:
> 
> 
> C:\proj-4.6.1\src>proj -vS +proj=utm +datum=WGS84 +lon_0=3
> #Universal Transverse Mercator (UTM)
> #       Cyl, Sph
> #       zone= south
> # +proj=utm +datum=WGS84 +lon_0=3 +ellps=WGS84 +towgs84=0,0,0
> 2 52
> 431350.30       5761510.32      <0.999658 0.999658 0.999316 1.20783e-006 
> 0.999658 0.999658 -0.788041>
> 4 52
> 568649.70       5761510.32      <0.999658 0.999658 0.999316 8.54066e-007 
> 0.999658 0.999658 0.788041>
> 4 52.1
> 568496.62       5772632.28      <0.999658 0.999658 0.999315 0 0.999658 
> 0.999658 0.789115>
> 
>  From the above results it seems that for utm the convergence is 
> negative when west and positive when east of lon_0.
> If you calculate two utm positions along the same longitude east of 
> lon_0, you see that the easting reduces when going northwards.
> 
>  From this is seems that TrueNorth = GridNorth + convergence
> 
> 
> I used the same points for a lcc projection:
> 
> C:\proj-4.6.1\src>proj -vS +proj=lcc +datum=WGS84 +lat_0=52 +lon_0=3 
> +lat_1=50 +lat_2=54
> #Lambert Conformal Conic
> #       Conic, Sph&Ell
> #       lat_1= and lat_2= or lat_0
> # +proj=lcc +datum=WGS84 +lat_0=52 +lon_0=3 +lat_1=50 +lat_2=54 +ellps=WGS84
> # +towgs84=0,0,0
> 2 52
> -68634.11       472.08  <0.999392 0.999392 0.998785 0.000355057 0.999395 
> 0.999389 0.788173>
> 4 52
> 68634.11        472.08  <0.999392 0.999392 0.998785 0.000355708 0.999395 
> 0.999389 -0.788173>
> 4 52.1
> 68481.15        11591.10        <0.999393 0.999393 0.998787 0.000434814 
> 0.999397 0.99939 -0.788173>
> 
> 
> The convergence sign west and east of the origin are opposite of the 
> signs found with the utm. But what confuses me is that when i calculate 
> two positions along a longitude east of the origin, the easting reduces 
> when going northwards just like with the utm projection.
> 
>  From this is seems that TrueNorth = GridNorth - convergence
> 
> 
> I think that either the convergence for lcc or utm has the wrong sign. 
> But i can't tell which one because i don't know how convergence is defined.
> 
> 
> Any thoughts about this?
> 
> Regards,
> 
> Kees Krikke
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 
> 



From ovv at hetnet.nl  Mon Sep 15 11:24:35 2008
From: ovv at hetnet.nl (OvV_HN)
Date: Mon, 15 Sep 2008 20:24:35 +0200
Subject: [Proj] SGS85 and WGS84
In-Reply-To: <1221489470.24676.45.camel@acme.pacific>
References: <1221489470.24676.45.camel@acme.pacific>
Message-ID: <BD39ED21F7F74BF28F0A7327F42B075E@PCHP>


----- Original Message ----- 
From: "Roger Oberholtzer" <roger at opq.se>
To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
Sent: Monday, September 15, 2008 4:37 PM
Subject: [Proj] SGS85 and WGS84


....

> It is a little unclear from the docs (to me, but I am thick). At this
> time, my user is unclear about exact requirements. I suspect that I will
> need to convert from WGS84 to SRS85.

Ha! That would be interesting, to get to know something about a piece of 
Russian (Glonass) technology!
But also read a paper by V.B. Nepoklonov about obtaining geodetic earth 
parameters.
I found a copy at
ftp://ftp.credo-dialogue.com/Publication/n1_2007/A24_7_16.pdf
See Table 2 on page 7 for some WGS84 - PZ90 (almost the same as SGS85) 
transformation parameters.
See also reference 7 (Mirsa, Abbot) in this paper; can't find a (free) 
on-line copy.
Mirsa P.N., Abbot R.I. SGS85-WGS84 Transformation // Manuscripta Geodaetica. 
1994. Vol. 19.


Oscar van Vlijmen





From dcmikkelsen at terraetl.com  Mon Sep 15 13:56:47 2008
From: dcmikkelsen at terraetl.com (Dean C.Mikkelsen)
Date: Mon, 15 Sep 2008 13:56:47 -0700
Subject: [Proj] SGS85 and WGS84
In-Reply-To: <BD39ED21F7F74BF28F0A7327F42B075E@PCHP>
References: <1221489470.24676.45.camel@acme.pacific>
	<BD39ED21F7F74BF28F0A7327F42B075E@PCHP>
Message-ID: <web-45117753@redback.webnames.ca>

Here is another on the transformation parameters:

http://www.dtic.mil/cgi-bin/GetTRDoc?AD=ADA269718&Location=U2&doc=GetTRDoc.pdf


See page 19.

Cheers,
Dean


On Mon, 15 Sep 2008 20:24:35 +0200
  "OvV_HN" <ovv at hetnet.nl> wrote:
> 
> ----- Original Message ----- From: "Roger Oberholtzer" 
><roger at opq.se>
> To: "PROJ.4 and general Projections Discussions" 
><proj at lists.maptools.org>
> Sent: Monday, September 15, 2008 4:37 PM
> Subject: [Proj] SGS85 and WGS84
> 
> 
> ....
> 
>> It is a little unclear from the docs (to me, but I am 
>>thick). At this
>> time, my user is unclear about exact requirements. I 
>>suspect that I will
>> need to convert from WGS84 to SRS85.
> 
> Ha! That would be interesting, to get to know something 
>about a piece of Russian (Glonass) technology!
> But also read a paper by V.B. Nepoklonov about obtaining 
>geodetic earth parameters.
> I found a copy at
> ftp://ftp.credo-dialogue.com/Publication/n1_2007/A24_7_16.pdf
> See Table 2 on page 7 for some WGS84 - PZ90 (almost the 
>same as SGS85) transformation parameters.
> See also reference 7 (Mirsa, Abbot) in this paper; can't 
>find a (free) on-line copy.
> Mirsa P.N., Abbot R.I. SGS85-WGS84 Transformation // 
>Manuscripta Geodaetica. 1994. Vol. 19.
> 
> 
> Oscar van Vlijmen
> 
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

Dean C. Mikkelsen, B.Sc., P.Eng.

E-mail: dcmikkelsen at terraetl.com

http://www.terraetl.com



From jrepetto at free.fr  Tue Sep 16 03:01:03 2008
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue, 16 Sep 2008 12:01:03 +0200
Subject: [Proj] Some need for updated proj-4 manuals
In-Reply-To: <EDBAFA8A91194942BC6F465D30B95F17@ISUCONNECT>
References: <976212.25140.qm@web110007.mail.gq1.yahoo.com>
	<EDBAFA8A91194942BC6F465D30B95F17@ISUCONNECT>
Message-ID: <48CF83DF.4090904@free.fr>

Paul B. Anderson a écrit :
> Hamish,
> 
> My web site is back up! This is the second time since Dr. Keith Clarke 
> invited me to move my map projection material to UCSB that their servers 
> have gone down. The first time was due to a forest fire. I don't know 
> why the campus lost power this time (both servers were down).
> 
> Just for the record, the map projection material is actually on two 
> different servers:
> http://www.csiss.org/map-projections
>

Very interesting site ! Could you add Tissot's indicatrix to the maps, 
they are very useful to show the distorsions.

Jean-Claude


From pbander at cavtel.net  Tue Sep 16 04:55:28 2008
From: pbander at cavtel.net (Paul B. Anderson)
Date: Tue, 16 Sep 2008 07:55:28 -0400
Subject: [Proj] Some need for updated proj-4 manuals
References: <976212.25140.qm@web110007.mail.gq1.yahoo.com><EDBAFA8A91194942BC6F465D30B95F17@ISUCONNECT>
	<48CF83DF.4090904@free.fr>
Message-ID: <6648039E37704ADC980D2C772C843A3C@ISUCONNECT>

- Jean-Claude,

I had considered adding the Tissot Indicatrix and other map distortion 
graphics to my web material, but, Bernhard Genny created software using a 
version of Proj.4 ported to Java that made the task unnecessary.

Look for his 'Flexprojector' link at my web site.

- Paul

Paul B. Anderson FCCS (USN, Retired)
Kingsport, TN native living in Norfolk, VA
My Map Projection web site:
http://www.csiss.org/map-projections/index.html

----- Original Message ----- 
From: "Jean-Claude Repetto" <jrepetto at free.fr>
To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
Sent: Tuesday, September 16, 2008 6:01 AM
Subject: Re: [Proj] Some need for updated proj-4 manuals


> Paul B. Anderson a écrit :
>> Hamish,
>>
>> My web site is back up! This is the second time since Dr. Keith Clarke 
>> invited me to move my map projection material to UCSB that their servers 
>> have gone down. The first time was due to a forest fire. I don't know why 
>> the campus lost power this time (both servers were down).
>>
>> Just for the record, the map projection material is actually on two 
>> different servers:
>> http://www.csiss.org/map-projections
>>
>
> Very interesting site ! Could you add Tissot's indicatrix to the maps, 
> they are very useful to show the distorsions.
>
> Jean-Claude
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj 



From ckarney at sarnoff.com  Tue Sep 16 14:51:06 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Tue, 16 Sep 2008 17:51:06 -0400
Subject: [Proj] C++ code for exact Transverse Mercator Projection
Message-ID: <ssrfxnzzrn9.fsf@puffin.sarnoff.com>

First of all, I posted maxima code for the Transverse Mercator
Projection in

    http://lists.maptools.org/pipermail/proj/2008-September/003729.html

There was a 1-letter error in ellint.mac which will have resulted in
incorrect results.  The error is in the smallest term of one of the
expansions of the elliptic integrals and most like the resulting error
is tiny (1e-40 or so).  Anyway, the corrected version is now posted.

Secondly, I've posted a C++ implementation of the Transverse Mercator
projection in

    http://charles.karney.info/geographic/TransverseMercatorExact.tgz

Accuracy is about 12 nm over the whole globe.  Unpack the tar file
somewhere convenient, change to the GeographicLib directory, and read
the comment at the top of TransverseMercatorTest.cpp for how to compile
the test program.  The code compiles under Linux and Visual Studio.

This is just a straightforward implementation of transformations given
by Lee in his 1976 monograph.  The resulting code is quite fast.  I
haven't done detailing timing on it.  However I estimate that it's no
more than a "few" times slower than a standard series solution (a la
Krueger).

Here the blurb taken from TransverseMercatorExact.cpp

Implementation of the Transverse Mercator Projection given in

   L. P. Lee,
   Conformal Projections Based on Elliptic Functions,
   (B. V. Gutsell, Toronto, 1976), 128pp.,
   ISBN: 0919870163.

   [Also appeared as:
   Monograph 16, Suppl. No. 1 to Canadian Cartographer, Vol 13.]

The method entails using the Thompson Transverse Mercator as an
intermediate projection.  The projections from the intermediate
coordinates to [phi, lam] and [x, y] are given by elliptic functions.
The inverse of these projections are found by Newton's method with a
suitable starting guess.

The same basic technique was used by

  J. Dozier,
  Improved Algorithm for Calculation of UTM and Geodetic Coordinates
  NOAA Technical Report NESS 81, Sept. 1980

The differences here are:

* Use of real instead of complex arithmetic.  This uses the separation
  into real and imaginary parts given by Lee and allows better control
  over branch cuts.

* Different (and possibly better?) algorithms for certain elliptic
  functions.

* Better starting guesses for Newton's method.  Dozier's guesses lead to
  the wrong solution is some cases.  This disqualifies his method for
  routine use.

This method gives the correct results for forward and reverse
transformations with the proviso that the reverse transformation may not
yield a sensible result if the input [x,y] is too far outside the set of
[x,y] obtained from the forward transformation.  The maximum error is
about 12nm (ground distance) for the forward and reverse
transformations.  The error in the convergence is 3e-9", the relative
error in the scale is 1e-11.  The method is "exact" in the sense that
the errors are close to the round-off limit and that no changes are
needed in the algorithms for them to be used with reals of a higher
precision (e.g., long double).

This implementation and notation closely follows Lee, with the following
exceptions:

    Lee    here    Description
    x/a    xi      Northing (unit Earth)
    y/a    eta     Easting (unit Earth)
    s/a    sigma   xi + i * eta
    y      x       Easting
    x      y       Northing
    k      e       eccentricity
    k^2    mu      elliptic function parameter
    k'^2   mv      elliptic function complementary parameter
    m      k       scale

Minor alterations have been made in some of Lee's expressions in an
attempt to control round-off.  For example atanh(sin(phi)) is replaced
by asinh(tan(phi)) which maintains accuracy near phi = pi/2.  Such
changes are noted in the code.

Loose ends:

Testing only done for WGS84 eccentricity.  Things that might go wrong
are other eccentricities: (1) Failure to converge most likely for much
higher eccentricity.  This will require refining the starting guesses
for the Newton's iterations.  (2) Failure with a sphere.  The basic
formulation carries over to the sphere with no problem.  Some attention
might need to be paid to the treatment of the singularity for phi=0,
lam=90.

The singularity at phi=90 is handled safely.  There's another
singularity (with the intermediate projection) at phi=0, lam=90*(1-e).
This is handled by using a Taylor expansion about the singularity.  This
gives a good enough starting guess for Newton's method to converge.
However detailed testing in the immediate neighborhood of the
singularity has not been done.  If there is a problem it can be handled
easily by treating the singularity specially.

The initial guesses for Newton's method are a little ad hoc.  Probably
better guesses can be used and so one or more iterations of Newton's
method can be skipped.

An analysis of the reverse transformation of "out-of-bounds" points has
not been done.  In particular it would be nice to determine the limits
of the correct reverse transformation.  These limits will of course
depend sensitively on the initial guess for Newton's method for the
reverse transformation.  (The out-of-bounds points in the "opposite"
hemisphere.)

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Tue Sep 16 18:50:24 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 16 Sep 2008 21:50:24 -0400
Subject: [Proj] C++ code for exact Transverse Mercator Projection
In-Reply-To: <ssrfxnzzrn9.fsf@puffin.sarnoff.com>
References: <ssrfxnzzrn9.fsf@puffin.sarnoff.com>
Message-ID: <200809162150.24994.geraldi.evenden@gmail.com>

On Tuesday 16 September 2008 5:51:06 pm Charles Karney wrote:
	...
> This is just a straightforward implementation of transformations given
> by Lee in his 1976 monograph.  The resulting code is quite fast.  I
> haven't done detailing timing on it.  However I estimate that it's no
> more than a "few" times slower than a standard series solution (a la
> Krueger).

Your claim that the all the code in your procedure is going to come within 
a '"few" times' of the following:

FORWARD(e_forward); /* ellipse */
    double al, als, n, cosphi, sinphi, t;

    sinphi = sin(lp.phi); cosphi = cos(lp.phi);
    t = fabs(cosphi) > 1e-10 ? sinphi/cosphi : 0.;
    t *= t;
    al = cosphi * lp.lam;
    als = al * al;
    al /= sqrt(1. - P->es * sinphi * sinphi);
    n = P->esp * cosphi * cosphi;
    xy.x = P->k0 * al * (FC1 +
        FC3 * als * (1. - t + n +
        FC5 * als * (5. + t * (t - 18.) + n * (14. - 58. * t +
         n * (13. - 64. * t + n * (4. - 24 * t)))
        + FC7 * als * (61. + t * ( t * (179. - t) - 479. ) )
        )));
    xy.y = P->k0 * (proj_mdist(lp.phi, sinphi, cosphi, P->en) - P->ml0 +
        sinphi * al * lp.lam * FC2 * ( 1. +
        FC4 * als * (5. - t + n * (9. + 4. * n) +
        FC6 * als * (61. + t * (t - 58.) + n * (270. - 330 * t +
         n * (445. - 680. * t + n * (324. - 600. * t + n * (88. - 192. * t))))
        + FC8 * als * (1385. + t * ( t * (543. - t) - 3111.) )
        ))));
   return(xy);
}
??  Hmmmm.  I am not strutting my code as the above is straight forward 
implementation of the currently accepted TM with the only exception being the 
proj_mdist procedure which is a fairly simple series procedure that is more 
precise that the standard version.  The above is about 24 lines.

Right now I am trying to get the c++ routines to compile but I can see this 
may take a bit.  First problem was reference to '/GeographicLib/*.hpp' which 
file structure no longer exists in this distribution.  That was reasonably 
simple but I have another snag at the moment.  The distribution was not ready 
for prime time.  ;-)

Surely, there will be more later.  ;-)
	...
-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From Mikael.Rittri at carmenta.com  Wed Sep 17 04:41:51 2008
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Wed, 17 Sep 2008 13:41:51 +0200
Subject: [Proj] Convergence
In-Reply-To: <48CE7F05.60203@orange.nl>
References: <48CE7F05.60203@orange.nl>
Message-ID: <FAF6E56B26D2044696772EBE89B15351012725AE@posty.carmenta.se>

I think you are right that PROJ.4 is inconsistent here. 

Before I read your post, I thought there was a standard sign convention
for meridian convergence, although I could never remember which way it went.  
But I have done some googling now, and the situation seems as bad as for 
the rotation angles in a 7-parameter transform.  

If I use a slash and a backslash to describe how a piece of a meridian 
looks in a projected grid, then: 

The National Land Survey of Sweden agrees with +proj=utm, and says:
  \ has positive meridian convergence, 
  / has negative.  
http://www.lantmateriet.se/templates/LMV_Meridiankonvergens.aspx?id=11496&lang=EN 

But the Ordnance Survey of Great Britain agrees with +proj=lcc, and says:
  \ has negative meridian convergence,
  / has positive.
http://www.ordnancesurvey.co.uk/oswebsite/gps/information/coordinatesystemsinfo/guidetonationalgrid/page19.html

I didn't search further.  Possibly, there might be a clear majority 
viewpoint among all national mapping agencies, but I got tired. 

Best regards, 

--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07 
mikael.rittri at carmenta.com
www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Kees Krikke
Sent: den 15 september 2008 17:28
To: PROJ.4 and general Projections Discussions
Subject: [Proj] Convergence

Hello,


I've made a piece of s/w that uses proj's convergence calculation to find the true north for a given grid north.

When testing with a utm and lcc projection i found some confusing results regarding the sign (direction) of the convergence.

To demonstrate this i modified proj.exe so it prints the convergence (in
deg) at the end of the line when using the -S flag:


C:\proj-4.6.1\src>proj -vS +proj=utm +datum=WGS84 +lon_0=3
#Universal Transverse Mercator (UTM)
#       Cyl, Sph
#       zone= south
# +proj=utm +datum=WGS84 +lon_0=3 +ellps=WGS84 +towgs84=0,0,0
2 52
431350.30       5761510.32      <0.999658 0.999658 0.999316 1.20783e-006 
0.999658 0.999658 -0.788041>
4 52
568649.70       5761510.32      <0.999658 0.999658 0.999316 8.54066e-007 
0.999658 0.999658 0.788041>
4 52.1
568496.62       5772632.28      <0.999658 0.999658 0.999315 0 0.999658 
0.999658 0.789115>

 From the above results it seems that for utm the convergence is 
negative when west and positive when east of lon_0.
If you calculate two utm positions along the same longitude east of 
lon_0, you see that the easting reduces when going northwards.

 From this is seems that TrueNorth = GridNorth + convergence


I used the same points for a lcc projection:

C:\proj-4.6.1\src>proj -vS +proj=lcc +datum=WGS84 +lat_0=52 +lon_0=3 
+lat_1=50 +lat_2=54
#Lambert Conformal Conic
#       Conic, Sph&Ell
#       lat_1= and lat_2= or lat_0
# +proj=lcc +datum=WGS84 +lat_0=52 +lon_0=3 +lat_1=50 +lat_2=54 +ellps=WGS84
# +towgs84=0,0,0
2 52
-68634.11       472.08  <0.999392 0.999392 0.998785 0.000355057 0.999395 
0.999389 0.788173>
4 52
68634.11        472.08  <0.999392 0.999392 0.998785 0.000355708 0.999395 
0.999389 -0.788173>
4 52.1
68481.15        11591.10        <0.999393 0.999393 0.998787 0.000434814 
0.999397 0.99939 -0.788173>


The convergence sign west and east of the origin are opposite of the 
signs found with the utm. But what confuses me is that when i calculate 
two positions along a longitude east of the origin, the easting reduces 
when going northwards just like with the utm projection.

 From this is seems that TrueNorth = GridNorth - convergence


I think that either the convergence for lcc or utm has the wrong sign. 
But i can't tell which one because i don't know how convergence is defined.


Any thoughts about this?

Regards,

Kees Krikke

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From ckarney at sarnoff.com  Wed Sep 17 05:35:09 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Wed, 17 Sep 2008 08:35:09 -0400
Subject: [Proj] C++ code for exact Transverse Mercator Projection
In-Reply-To: <200809162150.24994.geraldi.evenden@gmail.com>
References: <ssrfxnzzrn9.fsf@puffin.sarnoff.com>
	<200809162150.24994.geraldi.evenden@gmail.com>
Message-ID: <48D0F97D.20209@sarnoff.com>

Gerald I. Evenden wrote:
> On Tuesday 16 September 2008 5:51:06 pm Charles Karney wrote:
>
>> This is just a straightforward implementation of transformations
>> given by Lee in his 1976 monograph.  The resulting code is quite
>> fast.  I haven't done detailing timing on it.  However I estimate
>> that it's no more than a "few" times slower than a standard series
>> solution (a la Krueger).

The timing for the forward+reverse transformation is about 2.5 times
slower than my implementation of the Krueger-style series to sixth order
in e^2.  On my 2.6GHz Intel machine, the time for a forward+reverse
transform is 12us (g++ -O3 version 4.3.0).

> Your claim that the all the code in your procedure is going to come
> within a '"few" times' of the following:

** SNIP **

No I wasn't claiming a few times relative to tmerc but relative to the
Krueger series methods such as you've implemented as etmerc, ftmerc,
ktmerc.  I believe that these latter methods have substantially smaller
errors than tmerc and so are a more appropriate basis for comparison.

Based on the timing I quote above I would be surprised if the exact
method is as much as 10 times slower than the Krueger series.  However
even if it were 100 times slower, I still believe that this is a useful
contribution being (as far as I can tell) the only published code for
the exact projection which covers the whole globe.  (Dozier's code is
published; but it fails in several areas.  Others apparently have
working codes but have not published them.)

(Incidentally the timing comparison I cite above includes convergence
and scale calculations on both the forward and reverse transformations.)

> Right now I am trying to get the c++ routines to compile but I can see
> this may take a bit.  First problem was reference to
> '/GeographicLib/*.hpp' which file structure no longer exists in this
> distribution.

Did you include "-I.." in the compile/link line as documented at the top
of test program?  Here are the commands needed to compile and run the
test program...

    $ tar xfz TransverseMercatorExact.tgz
    $ cd GeographicLib
    $ g++ -g -O3 -I.. -o TransverseMercatorTest \
    TransverseMercatorTest.cpp TransverseMercatorExact.cpp \
    Constants.cpp EllipticFunction.cpp
    $ ./TransverseMercatorTest -h
    TransverseMercatorTest [-r]

    Read lines with latitutde and longitude (or easting and northing if
    -r is specified) from stdin and print latitude, longitude, easting,
    northing, convergence and scale.  WGS84 ellipsoid assumed, central
    meridian = 0, UTM central scale, and false easting and false
    northing are zero.
    $ echo 1 89 | ./TransverseMercatorTest
    1 89 23941118.301 8283847.395 80.3736 15.4177

> The distribution was not ready for prime time.  ;-)

This is surely possible.  In fact, I just noticed a blunder in the
convergence calculation for the reverse transform.  (I converted to
degrees twice.)  The fixed version is now posted.

-- 
Charles Karney <charles at karney.com>
702 Prospect Ave, Princeton, NJ 08540-4037

URL: http://charles.karney.info
Tel:  +1 609 497 4662 (H)
      +1 609 734 2312 (W)




From ckarney at sarnoff.com  Wed Sep 17 05:49:19 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Wed, 17 Sep 2008 08:49:19 -0400
Subject: [Proj] Convergence
In-Reply-To: <FAF6E56B26D2044696772EBE89B15351012725AE@posty.carmenta.se>
References: <48CE7F05.60203@orange.nl>
	<FAF6E56B26D2044696772EBE89B15351012725AE@posty.carmenta.se>
Message-ID: <48D0FCCF.1050206@sarnoff.com>

I believe the convention is:

    meridian convergence = bearing of grid north (measured clockwise
    	     		   from true north)

This is the sign convention suggested by those little figures at the
bottom of large scale maps (USGS and UKOS for example) which indicate
the bearing of magnetic and grid north relative to true north.  (And the
universal convention is, I believe, that "bearings" are measured
clockwise.)

This is consistent with

http://www.lantmateriet.se/templates/LMV_Meridiankonvergens.aspx?id=11496&lang=EN

The UK OS page

http://www.ordnancesurvey.co.uk/oswebsite/gps/information/coordinatesystemsinfo/guidetonationalgrid/page19.html

seems to have it backward.  However, the previous page


http://www.ordnancesurvey.co.uk/oswebsite/gps/information/coordinatesystemsinfo/guidetonationalgrid/page18.html

says

    true bearing = grid bearing + convergence

which is consistent with the convention (assuming bearing are always
measured clockwise from the reference direction).

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662



From geraldi.evenden at gmail.com  Wed Sep 17 11:07:55 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 17 Sep 2008 14:07:55 -0400
Subject: [Proj] C++ code for exact Transverse Mercator Projection
In-Reply-To: <48D0F97D.20209@sarnoff.com>
References: <ssrfxnzzrn9.fsf@puffin.sarnoff.com>
	<200809162150.24994.geraldi.evenden@gmail.com>
	<48D0F97D.20209@sarnoff.com>
Message-ID: <200809171407.55461.geraldi.evenden@gmail.com>

On Wednesday 17 September 2008 8:35:09 am Charles Karney wrote:
> Gerald I. Evenden wrote:
> > On Tuesday 16 September 2008 5:51:06 pm Charles Karney wrote:
> >> This is just a straightforward implementation of transformations
> >> given by Lee in his 1976 monograph.  The resulting code is quite
> >> fast.  I haven't done detailing timing on it.  However I estimate
> >> that it's no more than a "few" times slower than a standard series
> >> solution (a la Krueger).

I think a clarification is needed and, indeed, part of the problem is mine.  
When I speak of the Krüger solution I am referring to the Taylor series as 
expressed by PD Thomas "Conformal Projections in Geodesy and Cartography 
(1952), p. 2-3, which form the basis for standard TM as used in UTM and other 
grid system applications and is what is implemented in libproj4.  In some 
cases, the series is truncated even further.  I have not seen the Krüger 
paper but assumed it was somewhat similar to Thomas and represented the same 
basic solution.  Perhaps we/i should refer to tmerc as the Thomas TM--- 
the 't' in tmerc is for Thomas.
	...
-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist



From ckarney at sarnoff.com  Wed Sep 17 12:12:31 2008
From: ckarney at sarnoff.com (Charles Karney)
Date: Wed, 17 Sep 2008 15:12:31 -0400
Subject: [Proj] C++ code for exact Transverse Mercator Projection
In-Reply-To: <200809171407.55461.geraldi.evenden@gmail.com>
References: <ssrfxnzzrn9.fsf@puffin.sarnoff.com>	<200809162150.24994.geraldi.evenden@gmail.com>	<48D0F97D.20209@sarnoff.com>
	<200809171407.55461.geraldi.evenden@gmail.com>
Message-ID: <48D1569F.8000509@sarnoff.com>

> I think a clarification is needed and, indeed, part of the problem is
> mine.  When I speak of the Krueger solution I am referring to the
> Taylor series as expressed by PD Thomas "Conformal Projections in
> Geodesy and Cartography (1952), p. 2-3, which form the basis for
> standard TM as used in UTM and other grid system applications and is
> what is implemented in libproj4.  In some cases, the series is
> truncated even further.  I have not seen the Krueger paper but assumed
> it was somewhat similar to Thomas and represented the same basic
> solution.  Perhaps we/i should refer to tmerc as the Thomas TM--- the
> 't' in tmerc is for Thomas.

Krueger presents a Taylor series approximation accurate to e^8.  This is
what you've got with etmerc, ftmerc, and ktmerc (except that one of them
has the series extended to e^10).

Unfortunately, I don't have Thomas's book.  But from the expressions in
tmerc (and from the behavior of the errors), it looks like an ADDITIONAL
Taylor series expansion has been done in longitude.  This would
eliminate all the sinh's and cosh's of the Krueger method.

So, no, Krueger and Thomas are not the same.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Sun Sep 21 09:22:50 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 21 Sep 2008 12:22:50 -0400
Subject: [Proj] Poor example in general inverse procedure
Message-ID: <200809211222.50585.geraldi.evenden@gmail.com>

Something kept bothering me with the last example in the Ipbuker-Bildirici 
paper "A general algolrith for the inverse ... " using the 3x3 Jacobian for 
the Newton-Raphson solution for the inverse of the Mollweide projection on 
pages 180, 181.  Then it finally struck me:

You do not need an iterative process at all.  First, determine
	t=asin(Y/sqrt(2))  (from eqn. 33)
Then you get
	lambda (longitude) = X /(2*sqrt(2)*cos(t)/Pi)  (from eqn. 32)
and finally:
	phi (latitude) = asin(sin(2*t)  + 2*t)/Pi.  (from eqn. 34)

The only iterative process required is in the forward projection to solve eqn 
34 for t;

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Sun Sep 21 09:33:20 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 21 Sep 2008 12:33:20 -0400
Subject: [Proj] Poor example in general inverse procedure - Redux
Message-ID: <200809211233.20908.geraldi.evenden@gmail.com>

Of course, the obvious is already part of proj_moll.c.
-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From kees.krikke at orange.nl  Mon Sep 22 02:04:18 2008
From: kees.krikke at orange.nl (Kees Krikke)
Date: Mon, 22 Sep 2008 09:04:18 +0000 (UTC)
Subject: [Proj] Convergence
In-Reply-To: <48D0FCCF.1050206@sarnoff.com>
Message-ID: <IFBkzH8W.1222074257.9713000.kees@localhost>


Thanks Charles for your clarification. So i suppose that proj's
convergence calculation for lcc is not correct. I will try to submit a
bug report for this.

Regards,

Kees krikke

On 9/17/2008, "Charles Karney" <ckarney at sarnoff.com> wrote:

>I believe the convention is:
>
>    meridian convergence = bearing of grid north (measured clockwise
>    	     		   from true north)
>
>This is the sign convention suggested by those little figures at the
>bottom of large scale maps (USGS and UKOS for example) which indicate
>the bearing of magnetic and grid north relative to true north.  (And the
>universal convention is, I believe, that "bearings" are measured
>clockwise.)
>
>This is consistent with
>
>http://www.lantmateriet.se/templates/LMV_Meridiankonvergens.aspx?id=11496&lang=EN
>
>The UK OS page
>
>http://www.ordnancesurvey.co.uk/oswebsite/gps/information/coordinatesystemsinfo/guidetonationalgrid/page19.html
>
>seems to have it backward.  However, the previous page
>
>
>http://www.ordnancesurvey.co.uk/oswebsite/gps/information/coordinatesystemsinfo/guidetonationalgrid/page18.html
>
>says
>
>    true bearing = grid bearing + convergence
>
>which is consistent with the convention (assuming bearing are always
>measured clockwise from the reference direction).
>
>--
>Charles Karney <ckarney at sarnoff.com>
>Sarnoff Corporation, Princeton, NJ 08543-5300
>
>URL: http://charles.karney.info
>Tel: +1 609 734 2312
>Fax: +1 609 734 2662
>
>



From geraldi.evenden at gmail.com  Mon Sep 22 06:46:59 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 22 Sep 2008 09:46:59 -0400
Subject: [Proj] Convergence
In-Reply-To: <IFBkzH8W.1222074257.9713000.kees@localhost>
References: <IFBkzH8W.1222074257.9713000.kees@localhost>
Message-ID: <200809220946.59212.geraldi.evenden@gmail.com>

Something does appear to be broken.  

To fix: comment out the last assignment statement in the file proj_lcc.c.

P->spc = fac;

to

/* P->spc = fac; */

This forces the software to do numerical estimation of scale, blah, blah 
rather than use the analytic equations within lcc.

At the moment, I do no know whether the procedure that calls fac or fac itself 
is the problem but something is broken in more ways than just the 
convergence.

Recompile and link.


On Monday 22 September 2008 5:04:18 am Kees Krikke wrote:
> Thanks Charles for your clarification. So i suppose that proj's
> convergence calculation for lcc is not correct. I will try to submit a
> bug report for this.
>
> Regards,
>
> Kees krikke
>
> On 9/17/2008, "Charles Karney" <ckarney at sarnoff.com> wrote:
> >I believe the convention is:
> >
> >    meridian convergence = bearing of grid north (measured clockwise
> >    	     		   from true north)
> >
> >This is the sign convention suggested by those little figures at the
> >bottom of large scale maps (USGS and UKOS for example) which indicate
> >the bearing of magnetic and grid north relative to true north.  (And the
> >universal convention is, I believe, that "bearings" are measured
> >clockwise.)
> >
> >This is consistent with
> >
> >http://www.lantmateriet.se/templates/LMV_Meridiankonvergens.aspx?id=11496&
> >lang=EN
> >
> >The UK OS page
> >
> >http://www.ordnancesurvey.co.uk/oswebsite/gps/information/coordinatesystem
> >sinfo/guidetonationalgrid/page19.html
> >
> >seems to have it backward.  However, the previous page
> >
> >
> >http://www.ordnancesurvey.co.uk/oswebsite/gps/information/coordinatesystem
> >sinfo/guidetonationalgrid/page18.html
> >
> >says
> >
> >    true bearing = grid bearing + convergence
> >
> >which is consistent with the convention (assuming bearing are always
> >measured clockwise from the reference direction).
> >
> >--
> >Charles Karney <ckarney at sarnoff.com>
> >Sarnoff Corporation, Princeton, NJ 08543-5300
> >
> >URL: http://charles.karney.info
> >Tel: +1 609 734 2312
> >Fax: +1 609 734 2662
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From klemen.sorcnik at gmail.com  Mon Sep 22 13:00:40 2008
From: klemen.sorcnik at gmail.com (Klemen S.)
Date: Mon, 22 Sep 2008 13:00:40 -0700 (PDT)
Subject: [Proj] Non - earth projection
Message-ID: <19614234.post@talk.nabble.com>


Hi all,

i have problem with setting up projection. 
I have MapInfo file which is in Non-earth projection.
I like to use this file in MapServer (as WMS Server) but i dont know 
how to setup up Non-earth projection.

Can someone please help me ?

Thx
-- 
View this message in context: http://www.nabble.com/Non---earth-projection-tp19614234p19614234.html
Sent from the PROJ.4 mailing list archive at Nabble.com.



From warmerdam at pobox.com  Mon Sep 22 13:24:41 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 22 Sep 2008 16:24:41 -0400
Subject: [Proj] Non - earth projection
In-Reply-To: <19614234.post@talk.nabble.com>
References: <19614234.post@talk.nabble.com>
Message-ID: <48D7FF09.4050104@pobox.com>

Klemen S. wrote:
> Hi all,
> 
> i have problem with setting up projection. 
> I have MapInfo file which is in Non-earth projection.
> I like to use this file in MapServer (as WMS Server) but i dont know 
> how to setup up Non-earth projection.
> 
> Can someone please help me ?

Hi,

I believe "nonearth" in MapInfo terms means an arbitrary local
working coordinate system, is that right?  One that cannot generally
be related to a location on the earth systematically?

There is no mechanism for such a coordinate system in PROJ.4, and to
use such data in MapServer you have two general approaches:

1) Just leave coordinate system info (PROJECTION blocks) out of your
map file entirely.  MapServer will assume everything is in the same
coordinate system and everything should be fine ... assuming that is true.

2) Fake a coordinate system.  Just dummy up a fake coordinate system
with the right linear units, (anything is fine ... ie. +proj=utm +zone=11
+datum=WGS84).  But be aware you still can't overlay anything in another
coordinate system, and you can't *properly* run any services that depend
on real world coordinates like WMS.

If you have further questions on this topic it would be better to ask
on the mapserver-users list.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From support.mn at elisanet.fi  Mon Sep 22 14:10:03 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Tue, 23 Sep 2008 00:10:03 +0300 (EEST)
Subject: [Proj] Some ideas about the general inverse method
Message-ID: <30410014.603731222117804481.JavaMail.support.mn@elisanet.fi>

The basic idea might be that if the forward projection is available,
it is always possible to find the inverse just by calling the forward one,
by probing, until required amount of accuracy is achieved. 

The basic idea is the same as in binary search algotrithm.. or Newton
iteration algotrithm.

1) Assume that the requested point is exactly in the middle of the projection
space (by very good luck). Calculate forward point.

2) if not... in wihch part of the space it is.Here we compare the
coordinates we have against the coordinates given by the user.
Or use Newton methods, which are a bit similar.

3) At this point we can exclude 75% of the remaining area since the
point must be in some quarter space of the area and we know where.
Divide lattitudes and longitudes so that the point is always in the
halve which we are going to use in next iteration.

4) Now repeat the assumption that the point must be in the middle
of the remaining area.

5) Loop until required amount of accuracy is achieved.

-----

As we all know binary search is rather fast, since the area gets halved
at every iteration. Especially if we can limit the area at the beginning
strongly. We have for example some direct (hash) table, that already
gives us a very small area to start with (not the entire world).

There might be several other ways to speed up that method...

The user could supply some limiting points where the following
points must be. At that point the size of the tables and amount of
search loops could be even smaller.

Even if we first have just some version of the routine, even very
slow and large... when we continue to improve it... finally we have
something that is very fast, accurate and reliable.

The routine could use the parameter: "accepted amount of error"
in meters for example. As soon as that is achieved, no more iterations
is needed. People that need more accuracy, would also need more
computer power (and time)...

Regards: Janne.



From support.mn at elisanet.fi  Mon Sep 22 14:13:03 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Tue, 23 Sep 2008 00:13:03 +0300 (EEST)
Subject: [Proj] Some ideas about the general inverse method
Message-ID: <19105254.603791222117983832.JavaMail.support.mn@elisanet.fi>

Hello,

the basic idea might be that if the forward projection is available,
it is always possible to find the inverse just by calling the forward one,
by probing, until required amount of accuracy is achieved. 

The basic idea is the same as in binary search algotrithm.. or Newton
iteration algotrithm.

1) Assume that the requested point is exactly in the middle of the projection
space (by very good luck). Calculate forward point.

2) if not... in wihch part of the space it is.Here we compare the
coordinates we have against the coordinates given by the user.
Or use Newton methods, which are a bit similar.

3) At this point we can exclude 75% of the remaining area since the
point must be in some quarter space of the area and we know where.
Divide lattitudes and longitudes so that the point is always in the
halve which we are going to use in next iteration.

4) Now repeat the assumption that the point must be in the middle
of the remaining area.

5) Loop until required amount of accuracy is achieved.

-----

As we all know binary search is rather fast, since the area gets halved
at every iteration. Especially if we can limit the area at the beginning
strongly. We have for example some direct (hash) table, that already
gives us a very small area to start with (not the entire world).

There might be several other ways to speed up that method...

The user could supply some limiting points where the following
points must be. At that point the size of the tables and amount of
search loops could be even smaller.

Even if we first have just some version of the routine, even very
slow and large... when we continue to improve it... finally we have
something that is very fast, accurate and reliable.

The routine could use the parameter: "accepted amount of error"
in meters for example. As soon as that is achieved, no more iterations
is needed. People that need more accuracy, would also need more
computer power (and time)...

Regards: Janne.



From support.mn at elisanet.fi  Mon Sep 22 14:19:06 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Tue, 23 Sep 2008 00:19:06 +0300 (EEST)
Subject: [Proj] A bit slow mail server....
Message-ID: <4210857.603941222118346190.JavaMail.support.mn@elisanet.fi>

Hmmm,

this mail server seems to be so slow that I send it twice because
I am not getting response. What ever... you got the message?

Janne.



From geraldi.evenden at gmail.com  Mon Sep 22 14:42:14 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 22 Sep 2008 17:42:14 -0400
Subject: [Proj] A bit slow mail server....
In-Reply-To: <4210857.603941222118346190.JavaMail.support.mn@elisanet.fi>
References: <4210857.603941222118346190.JavaMail.support.mn@elisanet.fi>
Message-ID: <200809221742.15015.geraldi.evenden@gmail.com>

On Monday 22 September 2008 5:19:06 pm support.mn at elisanet.fi wrote:
> Hmmm,
>
> this mail server seems to be so slow that I send it twice because
> I am not getting response. What ever... you got the message?
>
> Janne.
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

Yes, we got it; twice.

You are lucky to get a response.  I never get one  for my own submissions and 
I must take it on faith that they get through.  Some consider it unfortunate 
that mine do get through.  ;-)

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From Joel_Cusick at nps.gov  Mon Sep 22 16:49:15 2008
From: Joel_Cusick at nps.gov (Joel_Cusick at nps.gov)
Date: Mon, 22 Sep 2008 15:49:15 -0800
Subject: [Proj] Proj4 datum transform assumption Question
Message-ID: <OFF2FF23A4.80E2BB2E-ON892574CC.0081DC80-892574CC.0082DA83@nps.gov>


Hello,
Brand new subscriber, but long time user of DNRGarmin.  I am trying to
resolve the datum transform signage in Proj 4 projection engine that is
being used by Minnesota's DNRGarmin software.  One can open up the ESRI or
EPSG files and directly observe the 7 parameters for datums.  Since
DNRGarmin loads to and from Garmins using Garmin proprietary protocols, the
Proj4 text files are used to transform to or from WGS84 depending on data
flow.  Loading from a Garmin, its expected to transform from WGS84 to
NAD83.  When Sending to a Garmin from a NAD83 shape, its expected to
transform from NAD83 to WGS84.

question:  Does Proj4 assume data is going to WGS84?  Using the same _5
ESRI transform parameters, but written in DNRGarmin, the syntax used is
"+towgs84".  This infers that Proj4 is written as a default From NAD83 to
WGS84.  This is counterintuitive to documentation presented by Soler/Snay
article (see Table 1, Page 51, last column
http://www.ngs.noaa.gov/CORS/Articles/SolerSnayASCE.pdf ) for the transform
parameters from ITR96 to NAD83.  When comparing the articles's 7
parameters, they are exactly opposite in signage to the DNRGarmin program.
Just want to confirm how exactly Proj4 is coded.

thanks.

>From DNRGarmin ESRI nad file

# NAD_1983_To_WGS_1984_5
<1515> +proj=longlat +ellps=GRS80
+towgs84=-0.991,1.9072,0.5129,-0.02579,-0.00965,-0.01166,0 +no_defs
no_defs <>
******************************************************
Joel Cusick
National Park Service
GIS Specialist/Alaska Regional Office
240 West. 5th Avenue, Anchorage, AK - 99501
(907) 644-3549  joel_cusick at nps.gov
+61 13' 01.28", -149 53' 10.58";  (NAD83 CORS96)
******************************************************



From glynn at gclements.plus.com  Mon Sep 22 19:47:08 2008
From: glynn at gclements.plus.com (Glynn Clements)
Date: Tue, 23 Sep 2008 03:47:08 +0100
Subject: [Proj] Some ideas about the general inverse method
In-Reply-To: <19105254.603791222117983832.JavaMail.support.mn@elisanet.fi>
References: <19105254.603791222117983832.JavaMail.support.mn@elisanet.fi>
Message-ID: <18648.22700.442046.852446@cerise.gclements.plus.com>


support.mn at elisanet.fi wrote:

> the basic idea might be that if the forward projection is available,
> it is always possible to find the inverse just by calling the forward one,
> by probing, until required amount of accuracy is achieved. 
> 
> The basic idea is the same as in binary search algotrithm.. or Newton
> iteration algotrithm.
> 
> 1) Assume that the requested point is exactly in the middle of the projection
> space (by very good luck). Calculate forward point.
> 
> 2) if not... in wihch part of the space it is.Here we compare the
> coordinates we have against the coordinates given by the user.
> Or use Newton methods, which are a bit similar.
> 
> 3) At this point we can exclude 75% of the remaining area since the
> point must be in some quarter space of the area and we know where.
> Divide lattitudes and longitudes so that the point is always in the
> halve which we are going to use in next iteration.
> 
> 4) Now repeat the assumption that the point must be in the middle
> of the remaining area.
> 
> 5) Loop until required amount of accuracy is achieved.

This method only works if the function is injective (two distinct
inputs never produce the same output, i.e. no "folding").

Although this is an important property for any cartographic
projection, it's only necessary for it to hold over the region for
which the projection is intended to be used. E.g. proj=alsk is a long
way from being injective once you get outside of Alaska.

In order for this method to work in general, you would need to be able
to reliably determine the initial rectangle; you can't just assume
180W-180E, 90S-90N.

Using Newton's method would require derivatives, which we don't have. 
And it would still require a reasonable starting point in order to
converge on the correct root.

> As we all know binary search is rather fast, since the area gets halved
> at every iteration. Especially if we can limit the area at the beginning
> strongly. We have for example some direct (hash) table, that already
> gives us a very small area to start with (not the entire world).
> 
> There might be several other ways to speed up that method...

The main one is to use proportional interpolation rather than a
midpoint. A couple of divisions is a trivial price to pay to reduce
the total number of pj_fwd() calls.

> The user could supply some limiting points where the following
> points must be. At that point the size of the tables and amount of
> search loops could be even smaller.

As mentioned above, this isn't just an optimisation. It's essential in
order to be able to find the correct root.

> Even if we first have just some version of the routine, even very
> slow and large... when we continue to improve it... finally we have
> something that is very fast, accurate and reliable.
> 
> The routine could use the parameter: "accepted amount of error"
> in meters for example. As soon as that is achieved, no more iterations
> is needed. People that need more accuracy, would also need more
> computer power (and time)...

Once you get to within a kilometre, the projection will be almost
affine, at which point proportional interpolation will converge very
quickly.

-- 
Glynn Clements <glynn at gclements.plus.com>


From glynn at gclements.plus.com  Mon Sep 22 19:53:12 2008
From: glynn at gclements.plus.com (Glynn Clements)
Date: Tue, 23 Sep 2008 03:53:12 +0100
Subject: [Proj] A bit slow mail server....
In-Reply-To: <200809221742.15015.geraldi.evenden@gmail.com>
References: <4210857.603941222118346190.JavaMail.support.mn@elisanet.fi>
	<200809221742.15015.geraldi.evenden@gmail.com>
Message-ID: <18648.23064.411044.535386@cerise.gclements.plus.com>


Gerald I. Evenden wrote:

> You are lucky to get a response.  I never get one  for my own submissions and 
> I must take it on faith that they get through.  Some consider it unfortunate 
> that mine do get through.  ;-)

Whether you receive copies of your own posts is determined by your
mailman preferences; follow the link in the message footer to change
them.

-- 
Glynn Clements <glynn at gclements.plus.com>


From klemen.sorcnik at gmail.com  Tue Sep 23 10:43:39 2008
From: klemen.sorcnik at gmail.com (Klemen S.)
Date: Tue, 23 Sep 2008 10:43:39 -0700 (PDT)
Subject: [Proj] Non - earth projection
In-Reply-To: <48D7FF09.4050104@pobox.com>
References: <19614234.post@talk.nabble.com> <48D7FF09.4050104@pobox.com>
Message-ID: <19633142.post@talk.nabble.com>


Thank you for your answer.

So if i understand you right i must convert layers with nonearth
coordinate system into appropriate real world coordinate system 
if i want use  WMS service ? 


Thank you for you answer.

Klemen


-- 
View this message in context: http://www.nabble.com/Non---earth-projection-tp19614234p19633142.html
Sent from the PROJ.4 mailing list archive at Nabble.com.



From geraldi.evenden at gmail.com  Tue Sep 23 10:50:51 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 23 Sep 2008 13:50:51 -0400
Subject: [Proj] A bit slow mail server....
In-Reply-To: <18648.23064.411044.535386@cerise.gclements.plus.com>
References: <4210857.603941222118346190.JavaMail.support.mn@elisanet.fi>
	<200809221742.15015.geraldi.evenden@gmail.com>
	<18648.23064.411044.535386@cerise.gclements.plus.com>
Message-ID: <200809231350.51982.geraldi.evenden@gmail.com>

On Monday 22 September 2008 10:53:12 pm Glynn Clements wrote:
> Gerald I. Evenden wrote:
> > You are lucky to get a response.  I never get one  for my own submissions
> > and I must take it on faith that they get through.  Some consider it
> > unfortunate that mine do get through.  ;-)
>
> Whether you receive copies of your own posts is determined by your
> mailman preferences; follow the link in the message footer to change
> them.

I went through the hassle some time ago and never resolved it.  Returns are 
enabled at the list but either gmail or Kontact throw them away if they are 
sent.  Dunno if it is proj.4 mailer, gmail or kontact to blame.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From warmerdam at pobox.com  Tue Sep 23 12:05:01 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 23 Sep 2008 15:05:01 -0400
Subject: [Proj] Proj4 datum transform assumption Question
In-Reply-To: <OFF2FF23A4.80E2BB2E-ON892574CC.0081DC80-892574CC.0082DA83@nps.gov>
References: <OFF2FF23A4.80E2BB2E-ON892574CC.0081DC80-892574CC.0082DA83@nps.gov>
Message-ID: <48D93DDD.4090102@pobox.com>

Joel_Cusick at nps.gov wrote:
> Hello,
> Brand new subscriber, but long time user of DNRGarmin.  I am trying to
> resolve the datum transform signage in Proj 4 projection engine that is
> being used by Minnesota's DNRGarmin software.  One can open up the ESRI or
> EPSG files and directly observe the 7 parameters for datums.  Since
> DNRGarmin loads to and from Garmins using Garmin proprietary protocols, the
> Proj4 text files are used to transform to or from WGS84 depending on data
> flow.  Loading from a Garmin, its expected to transform from WGS84 to
> NAD83.  When Sending to a Garmin from a NAD83 shape, its expected to
> transform from NAD83 to WGS84.
> 
> question:  Does Proj4 assume data is going to WGS84?  Using the same _5
> ESRI transform parameters, but written in DNRGarmin, the syntax used is
> "+towgs84".  This infers that Proj4 is written as a default From NAD83 to
> WGS84.  This is counterintuitive to documentation presented by Soler/Snay
> article (see Table 1, Page 51, last column
> http://www.ngs.noaa.gov/CORS/Articles/SolerSnayASCE.pdf ) for the transform
> parameters from ITR96 to NAD83.  When comparing the articles's 7
> parameters, they are exactly opposite in signage to the DNRGarmin program.
> Just want to confirm how exactly Proj4 is coded.

Joel,

I must confess to being confused, perhaps partly because I'm not
familiar with DNRGarmin.

The +towgs84 transformation is used to transform from other
datums to WGS84 (in geocentric space).  The transformation is
reversed when going from WGS to other datums.

I am aware there are various sign conventions for towgs84
parameters, but PROJ.4 uses the same conventions used by
mapinfo, OGC, and NIMA MUSE (from which this transformation
was derived).

> # NAD_1983_To_WGS_1984_5
> <1515> +proj=longlat +ellps=GRS80
> +towgs84=-0.991,1.9072,0.5129,-0.02579,-0.00965,-0.01166,0 +no_defs
> no_defs <>

Note that by default PROJ.4 considers NAD83 and WGS84 identical.
It is only by providing specific transformations, such as above,
that any distinction will be made between these two datums in PROJ.4.
The above definition for 1515 is not in the normal PROJ.4 definitions
list, and must have been introduced by the folks who produced DNRGarmin.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From richwestfall at sbcglobal.net  Wed Sep 24 08:56:24 2008
From: richwestfall at sbcglobal.net (Rich Westfall)
Date: Wed, 24 Sep 2008 08:56:24 -0700 (PDT)
Subject: [Proj] cs2cs output file
Message-ID: <19652024.post@talk.nabble.com>


Hello, 
I’m trying to get cs2cs script to pass other fields besides the XYZ 
from an input text file out to a text file but only seem to be getting 
the xyz to come over and nothing else. 

Here is the transformation. 
cs2cs +init=epsg:2227 +to +init=epsg:4326 -f '%.4f' -s c:\proj 
\test.txt >c:\proj\example.txt 

Which is passing the data correctly just not the other fields. Fields 
are seperated by white space. 

I have been using the win32 executable.

I'm not sure what I am doing wrong.  How do I get the other fields to come
over?
Thank you for any help, 

Rich 



-- 
View this message in context: http://www.nabble.com/cs2cs-output-file-tp19652024p19652024.html
Sent from the PROJ.4 mailing list archive at Nabble.com.




From warmerdam at pobox.com  Wed Sep 24 11:00:12 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 24 Sep 2008 14:00:12 -0400
Subject: [Proj] cs2cs output file
In-Reply-To: <19652024.post@talk.nabble.com>
References: <19652024.post@talk.nabble.com>
Message-ID: <48DA802C.6070708@pobox.com>

Rich Westfall wrote:
> Hello, 
> I’m trying to get cs2cs script to pass other fields besides the XYZ 
> from an input text file out to a text file but only seem to be getting 
> the xyz to come over and nothing else. 
> 
> Here is the transformation. 
> cs2cs +init=epsg:2227 +to +init=epsg:4326 -f '%.4f' -s c:\proj 
> \test.txt >c:\proj\example.txt 
> 
> Which is passing the data correctly just not the other fields. Fields 
> are seperated by white space. 
> 
> I have been using the win32 executable.
> 
> I'm not sure what I am doing wrong.  How do I get the other fields to come
> over?
> Thank you for any help, 

Rich,

This was broken in the past in cs2cs and was fixed for the 4.6.1 release.
Upgrade if that is practical.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From support.mn at elisanet.fi  Wed Sep 24 15:41:43 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Thu, 25 Sep 2008 01:41:43 +0300 (EEST)
Subject: [Proj] Some ideas about the general inverse method
Message-ID: <32589804.2258471222296103236.JavaMail.support.mn@elisanet.fi>

Glynn Clements <glynn at gclements.plus.com> kirjoitti: 
> 
> In order for this method to work in general, you would need to be able
> to reliably determine the initial rectangle; you can't just assume
> 180W-180E, 90S-90N.

I am 100% sure it will work, since the binary search works! And you can
assume anything! We simply generate and ordered list of let's say
for example 1000 points using the fwd-routine. Then we do the most
simple binary search in that table. For binary search it takes usually
no more than 3..4 table reads even for a large set. And I tell you that
reading a table is something very fast in modern computers (no math
at all). If we have 1000 points on the whole globe, that will allready make
the resulting area rather small, and we could use other more efficient
methods there after.

But anyway. As long as the binary searh routine works and is very fast,
there will always be a way to do the inverse projection. BUT what is the
most efficient method (or combination of several) and fastest is a
different question. And how much memory and CPU that will use. And
what is the cost of generating that table somewhere at the initialization of
the projection.

That would sure need some experimenting...

One very clever idea would be to generate the table as the user calls
the forward (inverse) routine, since it is mostly true that if a point is used
forward it will called inverse also. And vice versa.

Janne.



From dron at ak4719.spb.edu  Wed Sep 24 23:50:46 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Thu, 25 Sep 2008 10:50:46 +0400
Subject: [Proj] A bit slow mail server....
In-Reply-To: <200809231350.51982.geraldi.evenden@gmail.com>
References: <4210857.603941222118346190.JavaMail.support.mn@elisanet.fi>
	<200809221742.15015.geraldi.evenden@gmail.com>
	<18648.23064.411044.535386@cerise.gclements.plus.com>
	<200809231350.51982.geraldi.evenden@gmail.com>
Message-ID: <20080925065045.GA19328@ak4719.spb.edu>

On Tue, Sep 23, 2008 at 01:50:51PM -0400, Gerald I. Evenden wrote:
> > > You are lucky to get a response.  I never get one  for my own
> > > submissions and I must take it on faith that they get through.
> > > Some consider it unfortunate that mine do get through.  ;-)
> >
> > Whether you receive copies of your own posts is determined by your
> > mailman preferences; follow the link in the message footer to change
> > them.
> 
> I went through the hassle some time ago and never resolved it.
> Returns are enabled at the list but either gmail or Kontact throw them
> away if they are sent.  Dunno if it is proj.4 mailer, gmail or kontact
> to blame.

It could be the a well known feature of GMail:

 http://mail.google.com/support/bin/answer.py?hl=en-ch&answer=6588

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517


From geraldi.evenden at gmail.com  Thu Sep 25 07:19:41 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 25 Sep 2008 10:19:41 -0400
Subject: [Proj] A bit slow mail server....
In-Reply-To: <20080925065045.GA19328@ak4719.spb.edu>
References: <4210857.603941222118346190.JavaMail.support.mn@elisanet.fi>
	<200809231350.51982.geraldi.evenden@gmail.com>
	<20080925065045.GA19328@ak4719.spb.edu>
Message-ID: <200809251019.41153.geraldi.evenden@gmail.com>

On Thursday 25 September 2008 2:50:46 am Andrey Kiselev wrote:
> On Tue, Sep 23, 2008 at 01:50:51PM -0400, Gerald I. Evenden wrote:
> > > > You are lucky to get a response.  I never get one  for my own
> > > > submissions and I must take it on faith that they get through.
> > > > Some consider it unfortunate that mine do get through.  ;-)
> > >
> > > Whether you receive copies of your own posts is determined by your
> > > mailman preferences; follow the link in the message footer to change
> > > them.
> >
> > I went through the hassle some time ago and never resolved it.
> > Returns are enabled at the list but either gmail or Kontact throw them
> > away if they are sent.  Dunno if it is proj.4 mailer, gmail or kontact
> > to blame.
>
> It could be the a well known feature of GMail:
>
>  http://mail.google.com/support/bin/answer.py?hl=en-ch&answer=6588
>
> Best regards,
> Andrey

That is probably it.

It is hard to find a mail system that doesn't get in the way in some manner.  
I will complement gmail to the extent that I feel they do a reasonable job on 
junk mail and I rarely have to rescue a piece from the pile.

But on the down side, they have recently made "bulk" deletion of mail almost 
impossible. 

Thanks for the info.
-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From support.mn at elisanet.fi  Thu Sep 25 22:20:02 2008
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Fri, 26 Sep 2008 08:20:02 +0300 (EEST)
Subject: [Proj] A bit slow mail server....
Message-ID: <10932298.868531222406402278.JavaMail.support.mn@elisanet.fi>

About bulk deletion...

I have an old e-mail address, where I haven't been able to visit so
often and where the mass deletion of mail is difficult. At the moment
I have 28811 unread e-mails, almost 30 000. And the mail provider
is giving me an option to delete one page at a time, which is
30 e-mails at a time and I can tell you that the delete operation
it is so slow.

They are expecting me to delete 1000 pages. If each pages takes
at least 20 s to delete, due to the slow server, I would be deleting
those letters 1000 x 20 = 20 000 seconds. That is same as
20 000 / 3 600 = 5.5 hours sitting and deleting. Needless to say
that I have abandonded that mail provider and address since
long time ago. I just let it blow it's self up. (Other 30 000 e-mails
to go...)

All they needed is a button that deletes everything and I could start
using that address again. Why they don't bother to test their
own creations?

Regards. Janne J.

--------------------------------------------

"Gerald I. Evenden" <geraldi.evenden at gmail.com> kirjoitti: 
> On Thursday 25 September 2008 2:50:46 am Andrey Kiselev wrote:
> > On Tue, Sep 23, 2008 at 01:50:51PM -0400, Gerald I. Evenden wrote:
> > > > > You are lucky to get a response.  I never get one  for my own
> > > > > submissions and I must take it on faith that they get through.
> > > > > Some consider it unfortunate that mine do get through.  ;-)
> > > >
> > > > Whether you receive copies of your own posts is determined by your
> > > > mailman preferences; follow the link in the message footer to change
> > > > them.
> > >
> > > I went through the hassle some time ago and never resolved it.
> > > Returns are enabled at the list but either gmail or Kontact throw them
> > > away if they are sent.  Dunno if it is proj.4 mailer, gmail or kontact
> > > to blame.
> >
> > It could be the a well known feature of GMail:
> >
> >  http://mail.google.com/support/bin/answer.py?hl=en-ch&answer=6588
> >
> > Best regards,
> > Andrey
> 
> That is probably it.
> 
> It is hard to find a mail system that doesn't get in the way in some manner.  
> I will complement gmail to the extent that I feel they do a reasonable job on 
> junk mail and I rarely have to rescue a piece from the pile.
> 
> But on the down side, they have recently made "bulk" deletion of mail almost 
> impossible. 
> 
> Thanks for the info.
> -- 
> The whole religious complexion of the modern world is due
> to the absence from Jerusalem of a lunatic asylum.
> -- Havelock Ellis (1859-1939) British psychologist
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 



From geraldi.evenden at gmail.com  Sun Sep 28 13:25:58 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 28 Sep 2008 16:25:58 -0400
Subject: [Proj] Libproj4 manual opinion poll
Message-ID: <200809281625.58202.geraldi.evenden@gmail.com>

The libproj4 manual is becoming a big beast and often taking too long for 
upgrades.  While browsing around the web looking at various "repositories" of 
cartographic projection information one aspect came to mind: in many cases 
referring to a particular projection brought up a single page containing only 
info related to the selected projection.  For example: Anderson's projection 
plots on
http://www.csiss.org/map-projections/
is an example of selecting a category->projection_name gives a pdf picture of 
that projection.  But one trouble with this particular site is there is no 
(or very little) supplementary information.

I am suggesting that the current manual be changed to operate in a manner 
similar to Anderson's except that in addition to a sample illustration 
(reduced to reasonable screen size) there would be a description of libproj4 
control options, formula and any comments pertinent and unique to that 
projection.

A ancillary advantage of this method is that the projection illustration is 
kept with the documentation and not shifted off to a distant page as part of 
a collection of projection maps.  This was necessary to keep the overall page 
count down because of the added space required by single map figure; but this 
is not a problem in the proposed method.

Some pdf sections may cover a little broader material than just one projection 
procedure.  For example, all the material in the recent brouhaha on TM would 
be a single pdf.

This proposed format would require use of pdf as the display medium because 
html does not do a reasonable job with math.

A couple of sections of the current manual would remain the same and kept in a 
single "volume" such as the description of the internal procedure support, 
structures and material only of interest to programmers.

Please return with suggestions and/or don't do it complaints.

PS: This will take more disc space and I am not sure if my web site can 
contain this method of distribution so I may come begging for a home site.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From gdt at ir.bbn.com  Sun Sep 28 17:58:28 2008
From: gdt at ir.bbn.com (Greg Troxel)
Date: Sun, 28 Sep 2008 20:58:28 -0400
Subject: [Proj] Libproj4 manual opinion poll
In-Reply-To: <200809281625.58202.geraldi.evenden@gmail.com> (Gerald
	I. Evenden's message of "Sun, 28 Sep 2008 16:25:58 -0400")
References: <200809281625.58202.geraldi.evenden@gmail.com>
Message-ID: <rmiwsgvojij.fsf@fnord.ir.bbn.com>


  The libproj4 manual is becoming a big beast and often taking too long
  for upgrades.  While browsing around the web looking at various
  "repositories" of cartographic projection information one aspect came
  to mind: in many cases referring to a particular projection brought up
  a single page containing only info related to the selected projection.
  For example: Anderson's projection plots on
  http://www.csiss.org/map-projections/ is an example of selecting a
  category->projection_name gives a pdf picture of that projection.  But
  one trouble with this particular site is there is no (or very little)
  supplementary information.

  I am suggesting that the current manual be changed to operate in a
  manner similar to Anderson's except that in addition to a sample
  illustration (reduced to reasonable screen size) there would be a
  description of libproj4 control options, formula and any comments
  pertinent and unique to that projection.

I am not quite sure exactly what you are proposing.  My opinion, not
well considered, is that the proper role of the libproj4 manual is not
to be a tutorial in projections, but to clearly explain to a user who
*understand the projection* how they should encode parameters for use.
So particular if there are more tutorial documents available online, it
might do to take a restricted position and refer to parameters by names
matching those descriptions, along with links to them.  For example, it
would be fair to refer to USGS PP 1395, and expect people to read that
and explain how "k_0" in proj relates to some constant of a similar name
in Snyder's description.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 193 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20080928/edb3c79a/attachment.sig>

From geraldi.evenden at gmail.com  Mon Sep 29 08:35:15 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 29 Sep 2008 11:35:15 -0400
Subject: [Proj] Libproj4 manual opinion poll
In-Reply-To: <358222.999971222669604989.JavaMail.support.mn@elisanet.fi>
References: <358222.999971222669604989.JavaMail.support.mn@elisanet.fi>
Message-ID: <200809291135.15245.geraldi.evenden@gmail.com>

One thing quickly becomes apparent: the confusion as to what is the difference 
between proj.4 and libproj4.

In terms of cartographic projections, nearly nothing.  In terms of datum 
shifts and other miscellany: everything.  libproj4 as with the original 
proj.4 software had nothing to do with datum shifts other than the original 
distribution had a separate section that dealt only with the NAD datums.  The 
original proj program also had a mechanism for generating Tchebyshev 
polynomials that were designed for use with the mapgen map graphic system.

For the end user, the difference between running proj and lproj is trivial and 
the user can use the original report for proj when using lproj without 
getting into trouble.  There are a few more projections in libproj4 library 
and lproj than the old system.

There have been a few peculiarities introduced into the proj.4 material, some 
I can understand and some that I cannot (to put it very mildly). 

1. Alternate longitude origins.  Are not supported in libproj4 (nor original 
proj).  Some usefulness and a valid suggestion for libproj4.

2. Alternate origins for some projections.  I shudder when I see "two standard 
parallels" listed for plain ol' Mercator.  There is not even one standard 
parallel, let alone two.  There is a latitude of true scale and that only 
adjusts the k_0 factor so that the scale factor is 1. at the selected 
latitude.  If one wants to shift the origin then use x_0, y_0.  Stuff like 
that really raises blood pressure.

I am sure there are others but that is a starter list.
-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From cjmce at lsu.edu  Mon Sep 29 10:34:56 2008
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Mon, 29 Sep 2008 12:34:56 -0500
Subject: [Proj] Libproj4 manual opinion poll
References: <358222.999971222669604989.JavaMail.support.mn@elisanet.fi>
	<200809291135.15245.geraldi.evenden@gmail.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC244E@email002.lsu.edu>

Normal Mercator can indeed have "2 standard parallels," but they are always symmetric about the Equator.  I have done one that is legally recognized in Ecuador for the city of Guayaquil to cover a larger area of interest outside of the old city limits (for the greater Metro area), with minimal scale distortion.  It is simply done by having a scale factor at origin less than 1.0 at the Equator.
 
Watch your blood pressure.
 
C. Mugnier
Louisiana State University

________________________________

From: proj-bounces at lists.maptools.org on behalf of Gerald I. Evenden
Sent: Mon 29-Sep-08 10:35
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Libproj4 manual opinion poll



One thing quickly becomes apparent: the confusion as to what is the difference
between proj.4 and libproj4.

In terms of cartographic projections, nearly nothing.  In terms of datum
shifts and other miscellany: everything.  libproj4 as with the original
proj.4 software had nothing to do with datum shifts other than the original
distribution had a separate section that dealt only with the NAD datums.  The
original proj program also had a mechanism for generating Tchebyshev
polynomials that were designed for use with the mapgen map graphic system.

For the end user, the difference between running proj and lproj is trivial and
the user can use the original report for proj when using lproj without
getting into trouble.  There are a few more projections in libproj4 library
and lproj than the old system.

There have been a few peculiarities introduced into the proj.4 material, some
I can understand and some that I cannot (to put it very mildly).

1. Alternate longitude origins.  Are not supported in libproj4 (nor original
proj).  Some usefulness and a valid suggestion for libproj4.

2. Alternate origins for some projections.  I shudder when I see "two standard
parallels" listed for plain ol' Mercator.  There is not even one standard
parallel, let alone two.  There is a latitude of true scale and that only
adjusts the k_0 factor so that the scale factor is 1. at the selected
latitude.  If one wants to shift the origin then use x_0, y_0.  Stuff like
that really raises blood pressure.

I am sure there are others but that is a starter list.
--
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20080929/995985b3/attachment.html>

From geraldi.evenden at gmail.com  Mon Sep 29 13:05:32 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 29 Sep 2008 16:05:32 -0400
Subject: [Proj] Libproj4 manual opinion poll
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC244E@email002.lsu.edu>
References: <358222.999971222669604989.JavaMail.support.mn@elisanet.fi>
	<200809291135.15245.geraldi.evenden@gmail.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC244E@email002.lsu.edu>
Message-ID: <200809291605.32245.geraldi.evenden@gmail.com>

On Monday 29 September 2008 1:34:56 pm Clifford J Mugnier wrote:
> Normal Mercator can indeed have "2 standard parallels," but they are always
> symmetric about the Equator.  I have done one that is legally recognized in
> Ecuador for the city of Guayaquil to cover a larger area of interest
> outside of the old city limits (for the greater Metro area), with minimal
> scale distortion.  It is simply done by having a scale factor at origin
> less than 1.0 at the Equator.
>
> Watch your blood pressure.
>
> C. Mugnier
> Louisiana State University

Obviously one has symmetrical reflection of the latitude of true scale across 
the equator and "two standard parallels" but the context that was used in one 
of the sources of information about projections was that the second standard 
parallel was denoted as being the latitude of the projection origin---lat_0.  
This would actually generate 4 standard parallels considering sysmmetry. I do 
not remember whether Ecuador uses lat_ts or k_0---two means to the same end.  
Hmmm.  Looks like Ecuador normally uses k_0 which make sense for a grid 
system at the equator.

For navigation maps I have seen, lat_ts used most frequently.

What I objected to was the shifting of origin by the so-called second parallel 
and believe that in the case of Mercator shifting of origin is most easily 
taken care of by y_0 or false-northing.  I think is was the EPSG that had the 
funky spec entry but at the moment I can't find it.  This is where my blood 
boils.  ;-)

I once acquiesced to doing such nonsense of adding a lat_0 for another 
cylindrical but have kicked myself ever  since.
-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Mon Sep 29 13:24:08 2008
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 29 Sep 2008 16:24:08 -0400
Subject: [Proj] Libproj4 manual opinion poll
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC244E@email002.lsu.edu>
References: <358222.999971222669604989.JavaMail.support.mn@elisanet.fi>
	<200809291135.15245.geraldi.evenden@gmail.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC244E@email002.lsu.edu>
Message-ID: <200809291624.08435.geraldi.evenden@gmail.com>

I did forget one other important thing that was dropped from proj in going to 
libproj4; the reference to a secondary source of file of files of projection 
definitions.

That was a data base operation and did not belong as part of the basic 
projection operation.  Besides it was a neverending headache with users 
installing proj on other systems and not setting up the external global 
stuff.  I got more "calls" on that problem than anything else.

The +no_defs option has absolutely no meaning.  *ALL* specification 
information comes through the initialization array of proj_init or the 
runline of lproj.  I can't remember what the reference of external data file 
material was.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


