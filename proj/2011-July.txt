From j.l.h.hartmann at uva.nl  Fri Jul  1 03:47:59 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri, 01 Jul 2011 12:47:59 +0200
Subject: [Proj] =?iso-8859-1?q?M=FCffling?=
In-Reply-To: <201106300908.p5U9856v027677@smtp-auth.uni-koeln.de>
References: <mailman.5.1309366802.21243.proj@lists.maptools.org>
	<201106300908.p5U9856v027677@smtp-auth.uni-koeln.de>
Message-ID: <4E0DA5DF.8090509@uva.nl>

Thanks Irwin, very interesting links, especially the georeferenced map 
sheets at the NRW Geoportal. I wonder how they did the georeferencing: 
it looks quite good, but not optimal. They probably chose some reference 
points on each sheet and based on those rubber-sheeted them. I'm still 
working on a direct georeferencing procedure from the original UTM 
projection (based on the Paris meridian) to the modern Gauss-Krüger 
projection, using the original triangulation data, but to make it really 
precise we would need the data for the secondary triangles, and these 
lie hidden in an archive somewhere in France.

It's a pity they did it only for Nordrhein-Westfalen, and that they 
didn't provide a WMS service, but that's the way bureaucracies still 
work. It's a good beginning, though, for further work

Thanks again for the tips,

Jan Hartmann

On 06/30/11 11:08, Irwin Scollar wrote:
> An interesting historical link to Müffling and
> Tranchot which has biographies of both men and
> some details on their work which I have not seen elsewhere is:
>
> http://freepages.history.rootsweb.ancestry.com/~mlcarl/Qu/Karten/Tranchot.htm
>
> A link to the work of Müffling and the early
> Prussian map projection with a brief description of it's history is:
>
> http://www.geog.fu-berlin.de/2bik/Kap4/kap4_1-05.php3
>
> It's application in the Rhineland is:
>
> http://de.wikipedia.org/wiki/Topographische_Aufnahme_der_Rheinlande
>
> Scans of the original maps can be found at the
> GeoPortal of North-Rhine Westphalia:
>
> http://www.tim-online.nrw.de/tim-online/initParams.do;jsessionid=615820C15DD0F8AB73AD2368A8295302
>
> under the topic Historische Karten-Tranchot 1801-1828
>
> While searching, I also learned from the Polish
> historical military mapping site:
>
> http://english.mapywig.org/news.php
>
> that early Imperial Russian maps used the Müffling polyhedric projection:
>
> http://english.mapywig.org/Russian_and_Soviet_maps_EN.htm
>
> Please post additional links related to the theme of Müffling's work.
>
>
> Irwin Scollar
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110701/660d6956/attachment.html>

From stevejking at talktalk.net  Fri Jul  1 05:27:54 2011
From: stevejking at talktalk.net (stevejking)
Date: Fri, 1 Jul 2011 05:27:54 -0700 (PDT)
Subject: [Proj] Eric Miller VB Wrapper +nadgrids=
In-Reply-To: <4E0CBDA8.95FD.00E4.0@dfg.ca.gov>
References: <1309443749365-6533462.post@n2.nabble.com>
	<4E0C35D2.95FD.00E4.0@dfg.ca.gov>
	<1309473660558-6535330.post@n2.nabble.com>
	<1309480422655-6535733.post@n2.nabble.com>
	<4E0CBDA8.95FD.00E4.0@dfg.ca.gov>
Message-ID: <1309523274368-6537569.post@n2.nabble.com>


Eric Miller-4 wrote:
> 
> I'm not sure if the proj_api.dll needs to be recompiled.  It may just work
> with newer proj.dll files.
> 
> 
I tried a few newer proj.dll files, but your api only appears to work with
the 4.4.6 version it was made for.
Recompiling is beyond my current skill, so I'll stick with the 7 parameter
towgs84 translations for now.
Would be interested if you or anyone else recompiles against the newer
proj.dll to support NTv2 files.

Thanks for your help, and for sharing your api with the world.
Regards,
Steve
 

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Eric-Miller-VB-Wrapper-nadgrids-tp6533462p6537569.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From ndzinn at comcast.net  Sat Jul  2 08:42:41 2011
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Sat, 2 Jul 2011 10:42:41 -0500
Subject: [Proj] =?iso-8859-1?q?M=FCffling?=
In-Reply-To: <201106300908.p5U9856v027677@smtp-auth.uni-koeln.de>
References: <mailman.5.1309366802.21243.proj@lists.maptools.org>
	<201106300908.p5U9856v027677@smtp-auth.uni-koeln.de>
Message-ID: <E749B409FE494503AE2A201B5D0265D2@NoelHmPC>

Excellent.  Thanks, Irwin.  Bing translation does a remarkable job on those 
among these that need it (college German being many years behind me).  Not 
so well on the autobiography, just an image.  I'm particularly interested in 
...

http://www.geog.fu-berlin.de/2bik/Kap4/kap4_1-05.php3

... and the stitching of the polyhedron together.  Ought to be done in ECEF.

Noel

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)

-----Original Message----- 
From: Irwin Scollar
Sent: Thursday, June 30, 2011 4:08 AM
To: proj at lists.maptools.org
Subject: [Proj] Müffling

An interesting historical link to Müffling and
Tranchot which has biographies of both men and
some details on their work which I have not seen elsewhere is:

http://freepages.history.rootsweb.ancestry.com/~mlcarl/Qu/Karten/Tranchot.htm

A link to the work of Müffling and the early
Prussian map projection with a brief description of it's history is:

http://www.geog.fu-berlin.de/2bik/Kap4/kap4_1-05.php3

It's application in the Rhineland is:

http://de.wikipedia.org/wiki/Topographische_Aufnahme_der_Rheinlande

Scans of the original maps can be found at the
GeoPortal of North-Rhine Westphalia:

http://www.tim-online.nrw.de/tim-online/initParams.do;jsessionid=615820C15DD0F8AB73AD2368A8295302

under the topic Historische Karten-Tranchot 1801-1828

While searching, I also learned from the Polish
historical military mapping site:

http://english.mapywig.org/news.php

that early Imperial Russian maps used the Müffling polyhedric projection:

http://english.mapywig.org/Russian_and_Soviet_maps_EN.htm

Please post additional links related to the theme of Müffling's work.


Irwin Scollar

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj 




From al001 at uni-koeln.de  Sun Jul  3 07:09:44 2011
From: al001 at uni-koeln.de (Irwin Scollar)
Date: Sun, 03 Jul 2011 16:09:44 +0200
Subject: [Proj] =?iso-8859-1?q?M=FCffling_=26_Maps?=
In-Reply-To: <mailman.5.1309626001.5772.proj@lists.maptools.org>
References: <mailman.5.1309626001.5772.proj@lists.maptools.org>
Message-ID: <201107031409.p63E9kS1004997@smtp-auth.uni-koeln.de>

A very good history of map making in Prussia and later the rest of 
Germany going back to the very beginning is:

http://www.geog.fu-berlin.de/2bik/index.shtml

Chapter 4 contains the link on geodesy I posted previously.  It is 
the catalog of an exhibition on map making in Berlin and Brandenburg 
at the State Library of Berlin and the Free University of 
Berlin.  Click on the Links button at the top of the page for much more.

For more links than anyone may have time to read:

http://www.maphistory.info/index.html

although with limited coverage of non-English sites.

Irwin Scollar



From charles.karney at sri.com  Mon Jul  4 12:07:54 2011
From: charles.karney at sri.com (Charles Karney)
Date: Mon, 4 Jul 2011 15:07:54 -0400
Subject: [Proj] Analyzing the bumps in the EGM2008 geoid
Message-ID: <4E120F8A.2060701@sri.com>

Partly in response to Mikael Rittri's questions about compressing the
data files for the EGM models, I looked into seeing how well EGM2008 is
approximated by a few terms in its spherical harmonic expansion.  The
quick answer is not very well.  The bumps in EGM2008 are at all scales
and the coefficients in the spherical harmonic expansion decay very
slowly.

However, I thought it worth reporting on the magnitudes of the low order
terms.  Recall that the range in geoid heights (in meters) relative to
WGS84 is about [-107, 86].

The lowest order terms, Y00, Y10, Y11, Y20, Y21 are all small (less than
0.5m), "by construction".  (The volume if WGS84 is about right, the COM
of the geoid nearly matches WGS84, the flattening nearly matches WGS84.)

The biggest spherical harmonic component is the Y22 term, which is the
component that makes WGS84 into a triaxial ellipsoid.  This makes the
equator an ellipse with major/minor equatorial axes

   6378137 +/- 35 meters

The major axis is lon = -15, 165; the minor axis is lon = -105, 75.  The
amount EGM2008 deviates from this triaxial shape (WGS84 + Y22 term) is
[-72, 70].  The reason that a triaxial model of the earth is not useful
is that you add a lot of mathematical complexity going from an oblate
ellipsoid to a triaxial ellipsoid and yet you have not gained much
(about 25%) in how well you approximate the geoid.

The next biggest contributions are the Y3m components which together
with their amplitudes (meters) above/below WGS84 are

     Y31:  +/- 29
     Y33:  +/- 21
     Y30:  +/- 16
     Y32:  +/- 14

These results were derived by taking spherical harmonic moments of the
gridded EGM2008 geoid numerically using the longitude and geographic
co-latitude as the independent variables.

I found it necessary to carry out these integrals directly rather than
using the spherical harmonic expansions provided by the NGA because the
NGA provides two expansions: one for the gravitational potential and
another for an undulation correction, and both of these use geocentric
co-latitude.  I found it simplest just to perform the analysis on the
geoid height directly.

-- 
Charles Karney <charles.karney at sri.com>
SRI International, Princeton, NJ 08543-5300
Tel: +1 609 734 2312


From charles.karney at sri.com  Mon Jul  4 12:13:57 2011
From: charles.karney at sri.com (Charles Karney)
Date: Mon, 4 Jul 2011 15:13:57 -0400
Subject: [Proj] Analyzing the bumps in the EGM2008 geoid
In-Reply-To: <4E120F8A.2060701@sri.com>
References: <4E120F8A.2060701@sri.com>
Message-ID: <4E1210F5.8020501@sri.com>

I should have included the definition I used for spherical harmonics
(since different definitions are used in different fields).  I use the
DLMF definition given in

   http://dlmf.nist.gov/14.30.E1
   http://dlmf.nist.gov/14.30.E3


From charles.karney at sri.com  Mon Jul  4 13:11:02 2011
From: charles.karney at sri.com (Charles Karney)
Date: Mon, 4 Jul 2011 16:11:02 -0400
Subject: [Proj] Differential behavior of geodesics
Message-ID: <4E121E56.9020604@sri.com>

I've worked out some relationships between reduced lengths and geodesic
scales which I give here...

The story so far: Consider a geodesic from point 1 (azimuth azi1) to
point 2 with length s12.  Consider a second geodesic of length s12
starting from point 1 with azimuth azi1 + dazi1.  The end of this
geodesic lies a distance m12 * dazi1 from point 2.  It is easy to show
that m12 + m21 = 0.  m12 is called the "reduced length".

Consider a third geodesic of length s12 parallel to the first at point 1
but separated a distance dt1 from it.  At point 2 the geodesics are
separated by M12 * dt1.  M21 is defined likewise.  M12 and M21 are
called the "geodesic scales".

Together m12, M12, and M21 completely define the behavior of all
geodesics near the original one.

Derivatives holding point 1 and azi1 fixed and extending the length of
the geodesic:

    dm12/ds2 = M21
    dM12/ds2 = -(1 - M12*M21)/m12

Addition rules, points 1, 2, and 3 all lie on the same geodesic:

    m23 = m13*M12 - m12*M13
    M23 = M21*M13 + (1 - M12*M21) * m13/m12
    M32 = M31*M12 + (1 - M13*M31) * m12/m13

Hence we get Christoffel's addition rule (Theory of Geodesic Triangles,
Art 16, Eq 5) (points 1, 2, 3, and 4 all lie on the same geodesic):

    m12*m34 + m13*m42 + m14*m23 = 0

In the GIS domain, there an interest in defining "buffer regions" around
shapes.  If point 1 is on the original "reference" boundary, then a
point (point 2) on the buffer boundary is obtained by traveling a
distance s12 along a geodesic normal to the reference curve.  The buffer
boundary is therefore a geodesic parallel of the reference curve.

If the geodesic curvature of the reference curve at point 1 is K1, then
the geodesic curvature at point 2 on the buffer boundary is

    K2 = (M21*K1 - (1 - M12*M21)/m12) / (m12*K1 + M12)

If the reference curve has a corner in it, then K1 -> inf, and

    K2 = M21 / m12

is the curvature of a geodesic circle.  If K1 -> 0 then

    K2 = - (1 - M12*M21) / (M12*m12)

is the curvature of a curve parallel to a geodesic.  The test K2 -> inf
can to used to detect when the buffer boundary self-intersects and can
therefore be simplified.

These results are all general; they apply to all reasonable two
dimensional surfaces (not just ellipsoids of revolution).

-- 
Charles Karney <charles.karney at sri.com>
SRI International, Princeton, NJ 08543-5300
Tel: +1 609 734 2312


From mfinn at usgs.gov  Tue Jul  5 07:38:02 2011
From: mfinn at usgs.gov (Michael P Finn)
Date: Tue, 5 Jul 2011 08:38:02 -0600
Subject: [Proj] Analyzing the bumps in the EGM2008 geoid
In-Reply-To: <4E1210F5.8020501@sri.com>
References: <4E120F8A.2060701@sri.com> <4E1210F5.8020501@sri.com>
Message-ID: <OF0BA082AF.D2EE91F2-ON872578C4.00505597-872578C4.00505E1B@usgs.gov>

Thank you for this and the previous post. Very interesting.





From:
Charles Karney <charles.karney at sri.com>
To:
PROJ.4 and general Projections Discussions <proj at lists.maptools.org>
Date:
07/04/2011 01:59 PM
Subject:
Re: [Proj] Analyzing the bumps in the EGM2008 geoid
Sent by:
proj-bounces at lists.maptools.org



I should have included the definition I used for spherical harmonics
(since different definitions are used in different fields).  I use the
DLMF definition given in

   http://dlmf.nist.gov/14.30.E1
   http://dlmf.nist.gov/14.30.E3
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110705/38a95793/attachment.html>

From maurelio at live.it  Sat Jul 16 05:36:58 2011
From: maurelio at live.it (zagot)
Date: Sat, 16 Jul 2011 05:36:58 -0700 (PDT)
Subject: [Proj] Import Proj native library in C#
Message-ID: <1310819818492-6589496.post@n2.nabble.com>

Someone can help me to define this C struct in C#?

#if !defined(PROJECTS_H)
    typedef struct { double u, v; } projUV;
    typedef void *projPJ;
    #define projXY projUV
    #define projLP projUV
#else
    typedef PJ *projPJ;
#   define projXY   XY
#   define projLP       LP
#endif

typedef struct PJconsts {
    XY  (*fwd)(LP, struct PJconsts *);
    LP  (*inv)(XY, struct PJconsts *);
    void (*spc)(LP, struct PJconsts *, struct FACTORS *);
    void (*pfree)(struct PJconsts *);
    const char *descr;
    paralist *params;   /* parameter list */
    int over;   /* over-range flag */
    int geoc;   /* geocentric latitude flag */
        int is_latlong; /* proj=latlong ... not really a projection at all
*/
        int is_geocent; /* proj=geocent ... not really a projection at all
*/
    double
        a,  /* major axis or radius if es==0 */
                a_orig, /* major axis before any +proj related adjustment */
        es, /* e ^ 2 */
                es_orig, /* es before any +proj related adjustment */
        e,  /* eccentricity */
        ra, /* 1/A */
        one_es, /* 1 - e^2 */
        rone_es, /* 1/one_es */
        lam0, phi0, /* central longitude, latitude */
        x0, y0, /* easting and northing */
        k0, /* general scaling factor */
        to_meter, fr_meter; /* cartesian scaling */

        int     datum_type; /* PJD_UNKNOWN/3PARAM/7PARAM/GRIDSHIFT/WGS84 */
        double  datum_params[7];
        double  from_greenwich; /* prime meridian offset (in radians) */
        double  long_wrap_center; /* 0.0 for -180 to 180, actually in
radians*/

} PJ;

Thanks in advance, G.


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Import-Proj-native-library-in-C-tp6589496p6589496.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From support.mn at elisanet.fi  Sat Jul 16 06:26:09 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Sat, 16 Jul 2011 16:26:09 +0300 (EEST)
Subject: [Proj] Import Proj native library in C#
Message-ID: <1527246.6919361310822769822.JavaMail.support.mn@elisanet.fi>

Hello,

there is a manual about how to link proj.4 to your C
project. It is with the other pdf manuals and it tells
you how to do it.

Regards: Janne.

-----------------------------------------

zagot [maurelio at live.it] kirjoitti: 
> Someone can help me to define this C struct in C#?
> 
> #if !defined(PROJECTS_H)
>     typedef struct { double u, v; } projUV;
>     typedef void *projPJ;
>     #define projXY projUV
>     #define projLP projUV
> #else
>     typedef PJ *projPJ;
> #   define projXY   XY
> #   define projLP       LP
> #endif
> 
> typedef struct PJconsts {
>     XY  (*fwd)(LP, struct PJconsts *);
>     LP  (*inv)(XY, struct PJconsts *);
>     void (*spc)(LP, struct PJconsts *, struct FACTORS *);
>     void (*pfree)(struct PJconsts *);
>     const char *descr;
>     paralist *params;   /* parameter list */
>     int over;   /* over-range flag */
>     int geoc;   /* geocentric latitude flag */
>         int is_latlong; /* proj=latlong ... not really a projection at all
> */
>         int is_geocent; /* proj=geocent ... not really a projection at all
> */
>     double
>         a,  /* major axis or radius if es==0 */
>                 a_orig, /* major axis before any +proj related adjustment */
>         es, /* e ^ 2 */
>                 es_orig, /* es before any +proj related adjustment */
>         e,  /* eccentricity */
>         ra, /* 1/A */
>         one_es, /* 1 - e^2 */
>         rone_es, /* 1/one_es */
>         lam0, phi0, /* central longitude, latitude */
>         x0, y0, /* easting and northing */
>         k0, /* general scaling factor */
>         to_meter, fr_meter; /* cartesian scaling */
> 
>         int     datum_type; /* PJD_UNKNOWN/3PARAM/7PARAM/GRIDSHIFT/WGS84 */
>         double  datum_params[7];
>         double  from_greenwich; /* prime meridian offset (in radians) */
>         double  long_wrap_center; /* 0.0 for -180 to 180, actually in
> radians*/
> 
> } PJ;
> 
> Thanks in advance, G.
> 
> 
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/Import-Proj-native-library-in-C-tp6589496p6589496.html
> Sent from the PROJ.4 mailing list archive at Nabble.com.
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 



From maurelio at live.it  Sat Jul 16 08:19:02 2011
From: maurelio at live.it (zagot)
Date: Sat, 16 Jul 2011 08:19:02 -0700 (PDT)
Subject: [Proj] Import Proj native library in C#
In-Reply-To: <1527246.6919361310822769822.JavaMail.support.mn@elisanet.fi>
References: <1310819818492-6589496.post@n2.nabble.com>
	<1527246.6919361310822769822.JavaMail.support.mn@elisanet.fi>
Message-ID: <1310829542452-6589769.post@n2.nabble.com>

Sorry I have read the manuals

e.g. I follow this sample
http://trac.osgeo.org/proj/wiki/ProjAPI

but if I try to import this code in C# as follow
    unsafe class Program
    { 
        public struct projUV  {public double u; public double v;        }

        [DllImport(@"C:\Users\t\Desktop\Lib\proj.dll", CharSet =
CharSet.Auto, 
            EntryPoint = "pj_free")]
        static extern void pj_free(void* p);

        [DllImport(@"C:\Users\t\Desktop\Lib\proj.dll", CallingConvention =
CallingConvention.Cdecl, EntryPoint = "pj_init_plus")]
        static extern void*
pj_init_plus([MarshalAs(UnmanagedType.LPStr)]string m);

        [DllImport(@"C:\Users\t\Desktop\Lib\proj.dll", CallingConvention =
CallingConvention.Cdecl, CharSet = CharSet.Auto,  EntryPoint = "pj_inv")]
        static extern projUV pj_inv(projUV px, void* py);

        [DllImport(@"C:\Users\t\Desktop\Lib\proj.dll", EntryPoint =
"pj_transform")]
        static extern int pj_transform(void* src, void* dst, long
point_count, int point_offset,
                          double* x, double* y, double* z);

        static void Main(string[] args)  {

            string proSrc = "+proj=merc +ellps=clrk66 +lat_ts=33";
            string proDst = "+proj=latlong +ellps=clrk66";
	
            void* projSrc = pj_init_plus(proSrc);
	    void* projDst = pj_init_plus(proDst);

            double x = 15000;
            double y = 10000;
            double z = 0.0;

            double ris = pj_transform(projSrc, projDst, 1, 0, &x, &y, &z);

        }
    }

 I have this error:Attempted to read or write protected memory. This is
often an indication that other memory is corrupt.

Note: in the official sample there are this declaration: 
projPJ pj_merc, pj_latlong;

I use void* when call pj_init_plus (projPJ is defined as void* in
proj_api.h)

what I wrong?

thanks
p.s. sorry for my english
G.



--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Import-Proj-native-library-in-C-tp6589496p6589769.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From support.mn at elisanet.fi  Sun Jul 17 03:43:01 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Sun, 17 Jul 2011 13:43:01 +0300 (EEST)
Subject: [Proj] Proj.4 site does not open any pdf documents
Message-ID: <30697694.6890361310899381652.JavaMail.support.mn@elisanet.fi>

Hello list,

List (or Frank) - I can not open any pdf documents at the Proj.4 information
pages (maybe the monthly data transfer limit is exceeded or something?):

http://trac.osgeo.org/proj/


Regards: Janne.



From support.mn at elisanet.fi  Sun Jul 17 03:58:25 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Sun, 17 Jul 2011 13:58:25 +0300 (EEST)
Subject: [Proj] Import Proj native library in C#
Message-ID: <20333503.6890611310900305919.JavaMail.support.mn@elisanet.fi>

Zagot,

the real juice is in the pdf document

http://www.polardist.com/pub/PROJ.4.3.pdf

starting from page 26 chapter:

"Programming with the Cartographic Library"

You should read that and it gives all the answers
needed to use that in your C-sharp program. Do
not add any classes. Everything is already in the
headers.

You just need to include the header file and
start to use the procedures and data available.

Regards: Janne.

---------------------------------------------------------


zagot [maurelio at live.it] kirjoitti: 
> Sorry I have read the manuals
> 
> e.g. I follow this sample
> http://trac.osgeo.org/proj/wiki/ProjAPI
> 
> but if I try to import this code in C# as follow
>     unsafe class Program
>     { 
>         public struct projUV  {public double u; public double v;        }
> 
>         [DllImport(@"C:\Users\t\Desktop\Lib\proj.dll", CharSet =
> CharSet.Auto, 
>             EntryPoint = "pj_free")]
>         static extern void pj_free(void* p);
> 
>         [DllImport(@"C:\Users\t\Desktop\Lib\proj.dll", CallingConvention =
> CallingConvention.Cdecl, EntryPoint = "pj_init_plus")]
>         static extern void*
> pj_init_plus([MarshalAs(UnmanagedType.LPStr)]string m);
> 
>         [DllImport(@"C:\Users\t\Desktop\Lib\proj.dll", CallingConvention =
> CallingConvention.Cdecl, CharSet = CharSet.Auto,  EntryPoint = "pj_inv")]
>         static extern projUV pj_inv(projUV px, void* py);
> 
>         [DllImport(@"C:\Users\t\Desktop\Lib\proj.dll", EntryPoint =
> "pj_transform")]
>         static extern int pj_transform(void* src, void* dst, long
> point_count, int point_offset,
>                           double* x, double* y, double* z);
> 
>         static void Main(string[] args)  {
> 
>             string proSrc = "+proj=merc +ellps=clrk66 +lat_ts=33";
>             string proDst = "+proj=latlong +ellps=clrk66";
> 	
>             void* projSrc = pj_init_plus(proSrc);
> 	    void* projDst = pj_init_plus(proDst);
> 
>             double x = 15000;
>             double y = 10000;
>             double z = 0.0;
> 
>             double ris = pj_transform(projSrc, projDst, 1, 0, &x, &y, &z);
> 
>         }
>     }
> 
>  I have this error:Attempted to read or write protected memory. This is
> often an indication that other memory is corrupt.
> 
> Note: in the official sample there are this declaration: 
> projPJ pj_merc, pj_latlong;
> 
> I use void* when call pj_init_plus (projPJ is defined as void* in
> proj_api.h)
> 
> what I wrong?
> 
> thanks
> p.s. sorry for my english
> G.
> 
> 
> 
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/Import-Proj-native-library-in-C-tp6589496p6589769.html
> Sent from the PROJ.4 mailing list archive at Nabble.com.
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 



From warmerdam at pobox.com  Sun Jul 17 05:34:21 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 17 Jul 2011 05:34:21 -0700
Subject: [Proj] Proj.4 site does not open any pdf documents
In-Reply-To: <30697694.6890361310899381652.JavaMail.support.mn@elisanet.fi>
References: <30697694.6890361310899381652.JavaMail.support.mn@elisanet.fi>
Message-ID: <CA+YzLBexo7c=xOH=RKQjy4JioqLNzTc5Rmqty3Rp4Wjk24bPxg@mail.gmail.com>

Janne,

About an hour ago I saw the same problem with fetching them
from ftp.remotesensing.org but now it seems to work for me.
Possibly it was some sort of temporary problem.  Let me know if
it recurs.

Best regards,

On Sun, Jul 17, 2011 at 3:43 AM,  <support.mn at elisanet.fi> wrote:
> Hello list,
>
> List (or Frank) - I can not open any pdf documents at the Proj.4 information
> pages (maybe the monthly data transfer limit is exceeded or something?):
>
> http://trac.osgeo.org/proj/
>
>
> Regards: Janne.
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


From maurelio at live.it  Sun Jul 17 09:20:35 2011
From: maurelio at live.it (zagot)
Date: Sun, 17 Jul 2011 09:20:35 -0700 (PDT)
Subject: [Proj] Import Proj native library in C#
In-Reply-To: <20333503.6890611310900305919.JavaMail.support.mn@elisanet.fi>
References: <1310819818492-6589496.post@n2.nabble.com>
	<20333503.6890611310900305919.JavaMail.support.mn@elisanet.fi>
Message-ID: <1310919635772-6592203.post@n2.nabble.com>

Hi Janne, 

you are right ...the headers is the only we need 
...with the right definition of function calls in C# 

thanks for the reply

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Import-Proj-native-library-in-C-tp6589496p6592203.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From support.mn at elisanet.fi  Mon Jul 18 02:04:11 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Mon, 18 Jul 2011 12:04:11 +0300 (EEST)
Subject: [Proj] Proj.4 site does not open any pdf documents
Message-ID: <14354878.6950711310979852598.JavaMail.support.mn@elisanet.fi>

Frank,

the problem seems to be back again ... at least here where
I am. I keep getting this REFUSE error for any pdf document
I try to open at

http://trac.osgeo.org/proj/

//
This webpage is not available

The webpage at ftp://ftp.remotesensing.org/proj/OF90-284.pdf might be
temporarily down or it may have moved permanently to a new web address.

Error 102 (net::ERR_CONNECTION_REFUSED): The server refused the connection.
//

Regards: Janne.

----------------------------------------------------------

Frank Warmerdam [warmerdam at pobox.com] kirjoitti: 
> Janne,
> 
> About an hour ago I saw the same problem with fetching them
> from ftp.remotesensing.org but now it seems to work for me.
> Possibly it was some sort of temporary problem.  Let me know if
> it recurs.
> 
> Best regards,
> 
> On Sun, Jul 17, 2011 at 3:43 AM,  <support.mn at elisanet.fi> wrote:
> > Hello list,
> >
> > List (or Frank) - I can not open any pdf documents at the Proj.4 information
> > pages (maybe the monthly data transfer limit is exceeded or something?):
> >
> > http://trac.osgeo.org/proj/
> >
> >
> > Regards: Janne.
> >



From emiller at dfg.ca.gov  Mon Jul 18 08:05:57 2011
From: emiller at dfg.ca.gov (Eric Miller)
Date: Mon, 18 Jul 2011 08:05:57 -0700
Subject: [Proj] Import Proj native library in C#
Message-ID: <4E23E967020000E4000584DA@smtp.dfg>

I'm not sure if that sample is based on an I early version I published, but a somewhat better implementation is available in the following zip file:

http://ftp.dfg.ca.gov/Public/BDB/Tools/proj4/csharp-4.7.0.zip

It's a little dated, but is able to avoid "unsafe" code in most cases.

-- 
Eric G. Miller
Staff Programmer
Department of Fish and Game
>>> zagot <maurelio at live.it> 07/16/11 8:20 AM >>>
Sorry I have read the manuals

e.g. I follow this sample
http://trac.osgeo.org/proj/wiki/ProjAPI





From charles.karney at sri.com  Thu Jul 21 09:04:04 2011
From: charles.karney at sri.com (Charles Karney)
Date: Thu, 21 Jul 2011 12:04:04 -0400
Subject: [Proj] Javascript for geodesics
Message-ID: <4E284DF4.1050604@sri.com>

I released version 1.12 of GeographicLib today.  A couple of points of
note:

* I've switched the license to MIT/X11 which may make GeographicLib
   easier to integrate with other libraries.

* I provide Javascript and Python implementations of the geodesic
   routines.  For a sample of the Javascript in action see

     http://geographiclib.sourceforge.net/scripts/geod-google.html

   which shows geodesic lines, circles, and envelopes displayed on Google
   Maps

-- 
Charles Karney <charles.karney at sri.com>
SRI International, Princeton, NJ 08543-5300
Tel: +1 609 734 2312


From borgers at mi.fu-berlin.de  Sat Jul 23 03:00:37 2011
From: borgers at mi.fu-berlin.de (Philipp Borgers)
Date: Sat, 23 Jul 2011 12:00:37 +0200
Subject: [Proj] [Fwd: Re: [PROJ.4] #3: a patch for proj4 pkg-config support]
Message-ID: <1311415237.7881.194.camel@spaceship>

Could someone apply this patch? Would be really kind.

Thx for your awesome work!

Regards
Philipp
-------------- next part --------------
An embedded message was scrubbed...
From: "PROJ.4" <trac at osgeo.org>
Subject: Re: [PROJ.4] #3: a patch for proj4 pkg-config support
Date: Sat, 23 Jul 2011 09:49:06 -0000
Size: 3855
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110723/a5e9efb8/attachment.mht>

From warmerdam at pobox.com  Sat Jul 23 10:26:34 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat, 23 Jul 2011 10:26:34 -0700
Subject: [Proj] [Fwd: Re: [PROJ.4] #3: a patch for proj4 pkg-config
	support]
In-Reply-To: <1311415237.7881.194.camel@spaceship>
References: <1311415237.7881.194.camel@spaceship>
Message-ID: <CA+YzLBdSH+y-mVMJy68iUDToDODYAxy9z_OmHB7AXudEpdMWcg@mail.gmail.com>

Philipp,

It is in trunk now.

Best regards,

On Sat, Jul 23, 2011 at 3:00 AM, Philipp Borgers
<borgers at mi.fu-berlin.de> wrote:
> Could someone apply this patch? Would be really kind.
>
> Thx for your awesome work!
>
> Regards
> Philipp
>
>
> ---------- Forwarded message ----------
> From: "PROJ.4" <trac at osgeo.org>
> To: undisclosed-recipients:;
> Date: Sat, 23 Jul 2011 09:49:06 -0000
> Subject: Re: [PROJ.4] #3: a patch for proj4 pkg-config support
> #3: a patch for proj4 pkg-config support
> ----------------------------------+-----------------------------------------
>  Reporter:  183                   |       Owner:  warmerdam
>     Type:  enhancement           |      Status:  new
>  Priority:  trivial               |   Milestone:
> Component:  BuildConfig           |     Version:  unspecified
>  Keywords:  pkg-config configure  |
> ----------------------------------+-----------------------------------------
> Changes (by booo):
>
>  * type:  defect => enhancement
>
>
> Comment:
>
>  I fixed the patch and tested it a bit. Would be nice if you could apply
>  this patch as it makes life easier ;)
>
>  Thx for you work!
>
>  Regards
>  Philipp
>
> --
> Ticket URL: <http://trac.osgeo.org/proj/ticket/3#comment:4>
> PROJ.4 <http://proj.osgeo.org/>
> PROJ.4 Coordinate Systems Transformations Library
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


From charles.karney at sri.com  Mon Jul 25 14:58:39 2011
From: charles.karney at sri.com (Charles Karney)
Date: Mon, 25 Jul 2011 17:58:39 -0400
Subject: [Proj] Paper on transverse Mercator
Message-ID: <4E2DE70F.4060207@sri.com>

My paper on the transverse Mercator projection

   http://dx.doi.org/10.1007/s00190-011-0445-3

has been published in the August issue of J. Geodesy.  Send me E-mail if
you would like a reprint (PDF file).

-- 
Charles Karney <charles.karney at sri.com>
SRI International, Princeton, NJ 08543-5300
Tel: +1 609 734 2312


From knudsen.thomas at gmail.com  Mon Jul 25 15:32:43 2011
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Tue, 26 Jul 2011 00:32:43 +0200
Subject: [Proj] Paper on transverse Mercator
In-Reply-To: <4E2DE70F.4060207@sri.com>
References: <4E2DE70F.4060207@sri.com>
Message-ID: <CAH0YoEO4ywpn8Z_=jgMVM0g6zM_moyjQRrs7D8pbWG+PqqYFUg@mail.gmail.com>

2011/7/25 Charles Karney <charles.karney at sri.com>

> My paper on the transverse Mercator projection
>
>   http://dx.doi.org/10.1007/s00190-011-0445-3
>
> has been published in the August issue of J. Geodesy.  Send me E-mail if
> you would like a reprint (PDF file).
>


Dear Charles Karney,

I would (very much!) like a pdf reprint, since I do not currently have
access to J. Geod.

Best regards
Thomas Knudsen




>
> --
> Charles Karney <charles.karney at sri.com>
> SRI International, Princeton, NJ 08543-5300
> Tel: +1 609 734 2312
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110726/2cb545c8/attachment.html>

From charles.karney at sri.com  Tue Jul 26 08:14:59 2011
From: charles.karney at sri.com (Charles Karney)
Date: Tue, 26 Jul 2011 11:14:59 -0400
Subject: [Proj] "Reverse" graticule for the transverse Mercator projection
Message-ID: <4E2ED9F3.605@sri.com>

Projections are often visualized by plotting graticules, lines of
constant latitude or longitude, in the projected space.  With tools such
as Google Earth that allow you to see the world in 3d, it makes sense to
display the *reverse* graticule for the projection, that is lines of
constant easting and northing on the 3d world.

For your amusement, download

   http://geographiclib.sourceforge.net/tm-graticule.kml

and load into Google Earth.  This shows the reverse graticule for
transverse Mercator for the WGS84 ellipsoid with a 1000 km spacing.  I
adjusted the scale so that the distance from the equator to the pole is
10000 km and chose the prime meridian for the central meridian.  The
projection is well behaved at the north and south poles.  The projection
has a branch cut on the equator near the "meta poles", namely for
longitude in [-97.36373, -82.63627] and in [82.63627, 97.36373].

-- 
Charles Karney <charles.karney at sri.com>
SRI International, Princeton, NJ 08543-5300
Tel: +1 609 734 2312


From ndzinn at comcast.net  Tue Jul 26 11:04:12 2011
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Tue, 26 Jul 2011 13:04:12 -0500
Subject: [Proj] "Reverse" graticule for the transverse Mercator
	projection
In-Reply-To: <4E2ED9F3.605@sri.com>
References: <4E2ED9F3.605@sri.com>
Message-ID: <837993DD6E2646E585270DF5FD1810E4@NoelHmPC>

Charles,

This is too cool!  It is particularly interesting at the intersection of the 
Equator and the Y-axis (the "meta poles"?), where the TM scale factor 
decreases the size on the Earth of the 1000 grid km spacing.

Is this the Karney-Kruger TM algorithm ... or Lee?

Noel

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)

-----Original Message----- 
From: Charles Karney
Sent: Tuesday, July 26, 2011 10:14 AM
To: PROJ.4 and general Projections Discussions
Subject: [Proj] "Reverse" graticule for the transverse Mercator projection

Projections are often visualized by plotting graticules, lines of
constant latitude or longitude, in the projected space.  With tools such
as Google Earth that allow you to see the world in 3d, it makes sense to
display the *reverse* graticule for the projection, that is lines of
constant easting and northing on the 3d world.

For your amusement, download

   http://geographiclib.sourceforge.net/tm-graticule.kml

and load into Google Earth.  This shows the reverse graticule for
transverse Mercator for the WGS84 ellipsoid with a 1000 km spacing.  I
adjusted the scale so that the distance from the equator to the pole is
10000 km and chose the prime meridian for the central meridian.  The
projection is well behaved at the north and south poles.  The projection
has a branch cut on the equator near the "meta poles", namely for
longitude in [-97.36373, -82.63627] and in [82.63627, 97.36373].

-- 
Charles Karney <charles.karney at sri.com>
SRI International, Princeton, NJ 08543-5300
Tel: +1 609 734 2312
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj 




From charles.karney at sri.com  Tue Jul 26 11:31:05 2011
From: charles.karney at sri.com (Charles Karney)
Date: Tue, 26 Jul 2011 14:31:05 -0400
Subject: [Proj] "Reverse" graticule for the transverse
	Mercator	projection
In-Reply-To: <837993DD6E2646E585270DF5FD1810E4@NoelHmPC>
References: <4E2ED9F3.605@sri.com> <837993DD6E2646E585270DF5FD1810E4@NoelHmPC>
Message-ID: <4E2F07E9.4050309@sri.com>



On 07/26/11 14:04, Noel Zinn (cc) wrote:
> Charles,
>
> Is this the Karney-Kruger TM algorithm ... or Lee?

This uses the Lee-Thompson algorithm.  The Krueger series can't handle
the whole world since it diverges at the branch points.  The
calculations were done with TransverseMercatorProj, see

http://geographiclib.sourceforge.net/html/TransverseMercatorProj.1.html

   --Charles


From charles.karney at sri.com  Wed Jul 27 20:19:04 2011
From: charles.karney at sri.com (Charles Karney)
Date: Wed, 27 Jul 2011 23:19:04 -0400
Subject: [Proj] "Reverse" graticule for the transverse Mercator
	projection
In-Reply-To: <4E2ED9F3.605@sri.com>
References: <4E2ED9F3.605@sri.com>
Message-ID: <4E30D528.2060809@sri.com>

On 07/26/11 11:14, Charles Karney wrote:
> Projections are often visualized by plotting graticules, lines of
> constant latitude or longitude, in the projected space.  With tools such
> as Google Earth that allow you to see the world in 3d, it makes sense to
> display the *reverse* graticule for the projection, that is lines of
> constant easting and northing on the 3d world.

(1) Noel Zinn suggests "grid" as a better term than "reverse graticule"
and he's right (since the grid on printed maps is made up of lines of
constant easting and northing).

(2) I've added the spherical tranverse Mercator grid to the kml file and
converted it to a kmz file, which you can get from.

   http://geographiclib.sourceforge.net/tm-grid.kmz

-- 
Charles Karney <charles.karney at sri.com>
SRI International, Princeton, NJ 08543-5300
Tel: +1 609 734 2312


