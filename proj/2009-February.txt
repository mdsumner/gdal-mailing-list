From strebe at aol.com  Sun Feb  1 01:23:44 2009
From: strebe at aol.com (strebe)
Date: Sun, 01 Feb 2009 01:23:44 -0800
Subject: [Proj] Exact transverse Mercator code
In-Reply-To: <496B912E.7020404@sarnoff.com>
Message-ID: <B7189B22.D5A5.4919.BD0E.571009EE0AC9@aol.com>


Mr. Karney:

I found your work very interesting. Thank you for the excellent depth.

I've posted here and image of yet another ellipsoidal transverse Mercator variation:
     http://www.mapthematics.com/Wallis1TransverseMercator.tif

This one's properties are:
     Conformal (of course)
     Straight central meridian (of course)
     Parallels are equally spaced.

The importance of this last property is that the projection then may be squeezed through the rectifying latitude calculation as applied to the complex plane, and out pops Gauß-Krüger. I generated the map using the same eccentricity in your examples so that the 81st meridian (and 99th) will run into the singularities. The graticule is 9°. The projection is cropped at a distance of 4 arc seconds around the singularities; in point of fact the projection is infinite in extent.

There are many ways of developing this projection, since it simply requires a conformal projection onto the plane, treating the (x, y) coordinates as a single complex variable z, and then taking the inverse of the conformal projection acting upon z. This returns the x-axis to equal spacing of parallels, dragging the entire conformal plane along for the ride. In practice I use ellipsoidal stereographic as the simplest. Regardless of method, computing the inverse is onerous because it is not closed-form and not well-behaved around the singularities ±π(1±e)/2.

For reference I will call this the Wallis I transverse Mercator. The method is due to Dr. David E. Wallis.

In point of fact, you can reduce the complexity of the rectifying latitude calculation on the way to Gauß-Krüger by transforming coordinates from the Wallis 1 to their parametric co-latitudes. Thence the transformation to Gauß-Krüger needs nothing more than application of the elliptic integral of the second kind. I will call this transformation Wallis II. You can see it here:
     http://www.mapthematics.com/Wallis2TransverseMercator.tif

This version, being finite, requires no artificial clipping.

I have not looked in detail at how our results compare for the Gauß-Krüger, though spot-checking several points showed we agree to sub-micrometer precision.

Regards,
— daan Strebe


On Jan 12, 2009, at 10:51:26 AM, "Charles Karney" <ckarney at sarnoff.com> wrote:
I've posted an update to my implementation of the exact transverse
Mercator projection at

    http://charles.karney.info/geographic

This is part of a small C++ library for converting between geographic,
UTM/UPS, and MGRS coordinates.

In addition, I've included some information about the transverse
Mercator projection at

    http://charles.karney.info/geographic/transversemercator.html

This includes graticules for 3 different transverse Mercator
projections, information about continuing the projection around the
singular point, and an extended test set for the projection.

The library includes

  TransverseMercator -- projection using the Krueger series method
    extended to 6th-order which is accurate to 5 nm out to 30d from the
    central meridian.

  TransverseMercatorExact -- projection using Thompson/Lee's exact
    formulas which is accurate to 8 nm over the entire ellipsoid.  This
    is based on the code I posted on 2008-09-16.  However, it now deals
    with all the singular points, the selection of starting points for
    Newton's method has been improved, and there's an "extended" mode
    which lets you analytically continue the projection around the
    singular point.

  PolarStereographic -- projection using Snyder's formulas with Newton's
    method for the inverse in order to provide accuracy close to
    round-off.

  UTMUPS and MGRS -- conversion to and from UTM/UPS and MGRS.  MGRS is a
    potential replacement for the geotrans code.  It applies stable
    rules to the conversions and provides detailed error diagnostics.

  GeoConvert -- utility for conversion between geographic, UTM/UPS, and
    MGRS coordinates.

  TransverseMercatorTest -- utility for testing transverse Mercator
    projections.

Reports of bugs, typos, gaps in the documentation, etc. are welcome.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090201/23c73414/attachment.html>

From geraldi.evenden at gmail.com  Sun Feb  1 07:32:54 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 1 Feb 2009 10:32:54 -0500
Subject: [Proj] Exact transverse Mercator code
In-Reply-To: <B7189B22.D5A5.4919.BD0E.571009EE0AC9@aol.com>
References: <B7189B22.D5A5.4919.BD0E.571009EE0AC9@aol.com>
Message-ID: <200902011032.54266.geraldi.evenden@gmail.com>

Ah!  Nothing like more mental masturbation or should we call it 
TM---transverse mediation?

On Sunday 01 February 2009 4:23:44 am strebe wrote:
> Mr. Karney:
>
> I found your work very interesting. Thank you for the excellent depth.
>
> I've posted here and image of yet another ellipsoidal transverse Mercator
> variation: http://www.mapthematics.com/Wallis1TransverseMercator.tif

Please, there is no reason for tiff format when jpeg is *very* adequate for 
display and thus saving a great deal of download time for the speed impared.

> This one's properties are:
>      Conformal (of course)
>      Straight central meridian (of course)

Most importantly, is the scale constant along the central meridian?

>      Parallels are equally spaced.
>
> The importance of this last property is that the projection then may be
...

I'm putting a block on future TM transmissions.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at Sarnoff.com  Sun Feb  1 11:36:46 2009
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Sun, 1 Feb 2009 14:36:46 -0500
Subject: [Proj] Exact transverse Mercator code
In-Reply-To: <B7189B22.D5A5.4919.BD0E.571009EE0AC9@aol.com>
References: <496B912E.7020404@sarnoff.com>,
	<B7189B22.D5A5.4919.BD0E.571009EE0AC9@aol.com>
Message-ID: <91F640D26AB8E54982706321A514CA263A80F60E30@MALIBU.sarnoff.internal>

> From: strebe <strebe at aol.com>
> Date: Sunday, February 01, 2009 04:23
>
> I found your work very interesting. Thank you for the excellent depth.

Why, thank you.

> I've posted here and image of yet another ellipsoidal transverse
> Mercator variation:
>      http://www.mapthematics.com/Wallis1TransverseMercator.tif

By the way, why plot TM with grid north to the left instead of up?  It
seems to be yet another possible source of confusion or the unwary.

> This one's properties are:
>      Conformal (of course)
>      Straight central meridian (of course)
>      Parallels are equally spaced.
>
> ... The projection is cropped at a distance of 4 arc seconds around
> the singularities; in point of fact the projection is infinite in
> extent.

What point(s) project to infinity with this projection?  (And to answer
Gerald's question, if the parallels are equally spaced then the scale on
the central meridian must vary.)

The beauty of Lee's exposition (following Thompson, I suppose) is the
economical notation (when written in complex form).  Thus:

Define
    Mercator coordinates, complex zeta = psi + i lambda
    Thompson TM,          complex w
    Gauss-Krueger TM,     complex s
    Gauss-Schreiber TM,   complex z

Then Lee gives (with k = e):
    (9.4)   psi  = atanh(sin(phi)) - k atanh(k sin(phi))
    (54.18) zeta = atanh( sn(w)  ) - k atanh(k  sn(w)  )
    (12.3)  zeta = atanh(sin(z)  )
    (55.8)  s    = ed(w) = integral k'^2 nd(w)^2

Lee's equations (9.4), (54.18), (55.8) completely specify the
Gauss-Krueger TM.  And presumably something similar can be written to
specify Wallis' development.

The remaining tasks are:

(1) separating the equations into real and imaginary components,
(2) inverting these equations,
(3) computing derivatives to give the convergence and scale,
(4) recasting the equations for numerical accuracy.

These are non-trivial, but are merely crank-turning exercises.

(1) is not strictly necessary (but Lee provides the separated
equations).  You could just implement the complex arithmetic.  But you
are then left with the task of checking that right roots are taken with
the inverse trig and inverse hyperbolic functions.

For (2), I used Newton's method with suitable starting points, which are
typically found using low-order expansions about special points.  I
treat the singularity at lat = 0, lon = 90 (1 - e) by retaining the
starting point as the solution if the next term in the expansion is
negligible.

> I have not looked in detail at how our results compare for the
> Gauss-Krueger, though spot-checking several points showed we agree to
> sub-micrometer precision.

For systematic testing, I use the dataset available at

    http://charles.karney.info/geographic/TMcoords.dat.gz

This is a random collecting of points (geographic and TM) which I read
into testing code to compute the errors for the forward and backward
transformation.  There are extra points around potential singularities
(real or numerical).

The results are read into Matlab to analyse these with, e.g.,

    max(err(lat0 >= 0))
    scatter(x0, y0, 2, log10(err));
    and so on...

This approach was very helpful in identifying areas where there was a
loss of accuracy due to cancellation.

Incidentally, I also tested the accuracy of TransverseMercatorExact with
"double" changed to "long double" (64-bit fraction with g++).  The
errors went from 8 nm (double) to 4 pm (long double) consistent with the
extra 11 bits of precision.  (The use of numeric_limits ensured that all
the tolerances change appropriately.)

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Mon Feb  2 08:54:38 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 2 Feb 2009 11:54:38 -0500
Subject: [Proj] The world of ECEF aka geocentric coordinates
In-Reply-To: <a715f8cbcffbf42e3016654a2e80b851@ucsd.edu>
References: <200901301430.28664.geraldi.evenden@gmail.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC25D5@email002.lsu.edu>
	<a715f8cbcffbf42e3016654a2e80b851@ucsd.edu>
Message-ID: <200902021154.38983.geraldi.evenden@gmail.com>

The predominant view, if not concensus, is to forget the ECEF and stick with 
geocentric [cartesian] coordinates and that is how I will identify my 
software and documentation.

A second issue arose and is the preferred or official designation of lat-lon-h 
coordinates.  Is geographic or geodetic preferred?  I have a tendency to use 
the two designations interchageably and mix them freely in emails and 
documentation.

Anyone want to nit-pick over this usage.  :-)

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at Sarnoff.com  Tue Feb  3 02:19:12 2009
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Tue, 3 Feb 2009 05:19:12 -0500
Subject: [Proj] The world of ECEF aka geocentric coordinates
In-Reply-To: <200902021154.38983.geraldi.evenden@gmail.com>
References: <200901301430.28664.geraldi.evenden@gmail.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC25D5@email002.lsu.edu>
	<a715f8cbcffbf42e3016654a2e80b851@ucsd.edu>,
	<200902021154.38983.geraldi.evenden@gmail.com>
Message-ID: <91F640D26AB8E54982706321A514CA263A80F60E44@MALIBU.sarnoff.internal>

While we're at it, what's the consensus for the terminology for the
Cartesian system with origin at z = 0 tangent to ellipsoid, z up, y
north?  Choices so far:

    local Cartesian
    ENU
    topocentric

It seems that topocentric is the best, and this doesn't tie you down to
Cartesian coordinates.  Transforming to polar gives azimuth-elevation-
distance.

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From strebe at aol.com  Tue Feb  3 02:54:30 2009
From: strebe at aol.com (strebe)
Date: Tue, 03 Feb 2009 02:54:30 -0800
Subject: [Proj] Exact transverse Mercator code
In-Reply-To: <20090122135025.1208.12339481-22916@microsoft.windowslive.com>
Message-ID: <4B75606C.60E6.46F8.9A5F.2BA7A2489EC2@aol.com>


Charles & the interested:

>By the way, why plot TM with grid north to the left instead of up?  It
>seems to be yet another possible source of confusion or the unwary.

It is my convention to leave the orientation of the globe as it has been tilted by spherical coordinate transformation. If this were a sphere, it would become transverse by moving the pole of the original sphere to the equator and thence applying the equatorial Mercator formulæ. That puts the north pole along the left-right axis, and that is how I leave it, since I work with much more than just the Mercator and with any spherical coordinate transformation, not just transverse. In point of fact, this being an ellipsoid, there is no actual spherical coordinate transformation going on, but my software is completely general, and so I do not wish to abruptly change convention when the eccentricity edges from 0.0 to 0.000001. 

Presumably the presence of geography under the graticule suffices even for the unwary? — Not that I expect any unwary to be following this conversation!

>What point(s) project to infinity with this projection?

φ = 0.0, λ = ±90°(1±e)

Wallis happens to project to the ellipsoidal stereographic to arrive onto the plane from the ellipsoid. The specific projection to the plane is not important, other than the simpler the better for practical purposes. The point is to arrive at Wallis I, where parallels are evenly spaced on the complex plane.

Define
    Project to complex plane, ψ = X + iΥ
    Wallis I TM, complex ζ = π/2 - X⁻¹ (ψ)
    Wallis II TM, complex ξ = η⁻¹ (ζ)
    Gauß-Krüger, complex F (ξ)

where
    X (φ, λ), Υ (φ, λ) is any conformal mapping to the plane; e.g.,
        X = r cos λ 
        Υ = r sin λ
        r = [(1-sin φ)/cos φ][(1+e sin φ)/(1-e sin φ)]^(e/2).
    X⁻¹ inverts X, but acts on (ψ, 0.0), ψ being the complex "latitude"
    η⁻¹ is inverse parametric latitude, acting on a complex "latitude"
        η⁻¹ (p) = tan⁻¹ [tan (p)/√(1-e²)]
    F is the elliptic integral of the second kind with parameter e.
    e is eccentricity

As usual, the devil is in the details.

Regards,
— daan Strebe


On Feb 1, 2009, at 11:36:46 AM, "Karney, Charles" <ckarney at Sarnoff.com> wrote:
> From: strebe <strebe at aol.com>
> Date: Sunday, February 01, 2009 04:23
>
> I found your work very interesting. Thank you for the excellent depth.

Why, thank you.

> I've posted here and image of yet another ellipsoidal transverse
> Mercator variation:
>      http://www.mapthematics.com/Wallis1TransverseMercator.tif

By the way, why plot TM with grid north to the left instead of up?  It
seems to be yet another possible source of confusion or the unwary.

> This one's properties are:
>      Conformal (of course)
>      Straight central meridian (of course)
>      Parallels are equally spaced.
>
> ... The projection is cropped at a distance of 4 arc seconds around
> the singularities; in point of fact the projection is infinite in
> extent.

What point(s) project to infinity with this projection?  (And to answer
Gerald's question, if the parallels are equally spaced then the scale on
the central meridian must vary.)

The beauty of Lee's exposition (following Thompson, I suppose) is the
economical notation (when written in complex form).  Thus:

Define
    Mercator coordinates, complex zeta = psi + i lambda
    Thompson TM,          complex w
    Gauss-Krueger TM,     complex s
    Gauss-Schreiber TM,   complex z

Then Lee gives (with k = e):
    (9.4)   psi  = atanh(sin(phi)) - k atanh(k sin(phi))
    (54.18) zeta = atanh( sn(w)  ) - k atanh(k  sn(w)  )
    (12.3)  zeta = atanh(sin(z)  )
    (55.8)  s    = ed(w) = integral k'^2 nd(w)^2

Lee's equations (9.4), (54.18), (55.8) completely specify the
Gauss-Krueger TM.  And presumably something similar can be written to
specify Wallis' development.

The remaining tasks are:

(1) separating the equations into real and imaginary components,
(2) inverting these equations,
(3) computing derivatives to give the convergence and scale,
(4) recasting the equations for numerical accuracy.

These are non-trivial, but are merely crank-turning exercises.

(1) is not strictly necessary (but Lee provides the separated
equations).  You could just implement the complex arithmetic.  But you
are then left with the task of checking that right roots are taken with
the inverse trig and inverse hyperbolic functions.

For (2), I used Newton's method with suitable starting points, which are
typically found using low-order expansions about special points.  I
treat the singularity at lat = 0, lon = 90 (1 - e) by retaining the
starting point as the solution if the next term in the expansion is
negligible.

> I have not looked in detail at how our results compare for the
> Gauss-Krueger, though spot-checking several points showed we agree to
> sub-micrometer precision.

For systematic testing, I use the dataset available at

    http://charles.karney.info/geographic/TMcoords.dat.gz

This is a random collecting of points (geographic and TM) which I read
into testing code to compute the errors for the forward and backward
transformation.  There are extra points around potential singularities
(real or numerical).

The results are read into Matlab to analyse these with, e.g.,

    max(err(lat0 >= 0))
    scatter(x0, y0, 2, log10(err));
    and so on...

This approach was very helpful in identifying areas where there was a
loss of accuracy due to cancellation.

Incidentally, I also tested the accuracy of TransverseMercatorExact with
"double" changed to "long double" (64-bit fraction with g++).  The
errors went from 8 nm (double) to 4 pm (long double) consistent with the
extra 11 bits of precision.  (The use of numeric_limits ensured that all
the tolerances change appropriately.)

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090203/d94d54ff/attachment.html>

From support.mn at elisanet.fi  Tue Feb  3 04:54:54 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Tue, 3 Feb 2009 14:54:54 +0200 (EET)
Subject: [Proj] The world of ECEF aka geocentric coordinates
Message-ID: <7928433.1773321233665695210.JavaMail.support.mn@elisanet.fi>

Hello,

"Gerald I. Evenden" [geraldi.evenden at gmail.com] kirjoitti: 
> A second issue arose and is the preferred or official designation of lat-lon-h 
> coordinates.  Is geographic or geodetic preferred?  I have a tendency to use 
> the two designations interchageably and mix them freely in emails and 
> documentation.
> 

I would call lat-lon-h just "coordinates" and northings and eastings
"projection coordinates". It would be recommed to tell also in which
datum they are and if the elevation is relative to the geoid or the
reference ellipsoid (or somthing else).

Something like:
    lat N/S, lon E/W, h ref_ellipsoid/geoid name, datum name

For example:

   60.549N, 19.341E, 324.56 m WGS84 ellps, WGS84 datum

   or just

   60.549N, 19.341E, 324.56, WGS84


Regards: Janne.



From kopilists at googlemail.com  Tue Feb  3 07:54:22 2009
From: kopilists at googlemail.com (Ung)
Date: Tue, 3 Feb 2009 16:54:22 +0100
Subject: [Proj] Normal vector to a point on an Earth ellipsoid
Message-ID: <54d543eb0902030754y162cec1p5e9b891a73b6c229@mail.gmail.com>

Hi All,

Is there a function within Proj4 that would return a representation of a
normal vector to a point on an Earth ellipsoid? Perhaps something like:

getNormal( projPJ my_cs, double x, double y, double z )

Would be grateful for any clues!
-ung
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090203/cda90ea9/attachment.html>

From cjmce at lsu.edu  Tue Feb  3 08:43:00 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 3 Feb 2009 10:43:00 -0600
Subject: [Proj] The world of ECEF aka geocentric coordinates
References: <200901301430.28664.geraldi.evenden@gmail.com><B597ADFC46B67741B18EA6AA13613FF7EC25D5@email002.lsu.edu><a715f8cbcffbf42e3016654a2e80b851@ucsd.edu>,
	<200902021154.38983.geraldi.evenden@gmail.com>
	<91F640D26AB8E54982706321A514CA263A80F60E44@MALIBU.sarnoff.internal>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC25DB@email002.lsu.edu>

Local Space Rectangular (LSR) is the approximately  60-70 year old terminology used in computational photogrammetry.  
 
Polyhedric (Polyeder in Dutch or German) is the 19th century terminology for the "projection."  (Also known as the "Tampico Datum" from the 1920s or 1930s.)
 
C. Mugnier
LSU

________________________________

From: proj-bounces at lists.maptools.org on behalf of Karney, Charles
Sent: Tue 03-Feb-09 04:19
To: geraldi.evenden at gmail.com; PROJ.4 andgeneral Projections Discussions
Subject: Re: [Proj] The world of ECEF aka geocentric coordinates



While we're at it, what's the consensus for the terminology for the
Cartesian system with origin at z = 0 tangent to ellipsoid, z up, y
north?  Choices so far:

    local Cartesian
    ENU
    topocentric

It seems that topocentric is the best, and this doesn't tie you down to
Cartesian coordinates.  Transforming to polar gives azimuth-elevation-
distance.

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info <http://charles.karney.info/> 
Tel: +1 609 734 2312
Fax: +1 609 734 2662
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090203/917e15b0/attachment.html>

From geraldi.evenden at gmail.com  Tue Feb  3 09:02:11 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 3 Feb 2009 12:02:11 -0500
Subject: [Proj] Normal vector to a point on an Earth ellipsoid
In-Reply-To: <54d543eb0902030754y162cec1p5e9b891a73b6c229@mail.gmail.com>
References: <54d543eb0902030754y162cec1p5e9b891a73b6c229@mail.gmail.com>
Message-ID: <200902031202.11521.geraldi.evenden@gmail.com>

On Tuesday 03 February 2009 10:54:22 am Ung wrote:
> Hi All,
>
> Is there a function within Proj4 that would return a representation of a
> normal vector to a point on an Earth ellipsoid? Perhaps something like:
>
> getNormal( projPJ my_cs, double x, double y, double z )
>
> Would be grateful for any clues!
> -ung

Sounds like an ENU coordinate but that is *not* part of a projection 
operation.  I will probably put a function like that in my geodesy library 
but it is more related to XYZ geocentric system with a translation rotation 
involved---translation of the geocentrin origin to a local point and rotation 
about this point.

But an ENU has *nothing* to do with projections as the XY (Easting-Northings)  
in projections have no relationship to the XY in EN even though the EN stands 
for Easting-Northing.

It is unfortunate that the ENU designers stole the projected space 
nomenclature.

If you are just concerned with a z value you would have to "pass it around" 
the projections operation.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Tue Feb  3 09:19:49 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 3 Feb 2009 12:19:49 -0500
Subject: [Proj] The world of ECEF aka geocentric coordinates
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC25DB@email002.lsu.edu>
References: <200901301430.28664.geraldi.evenden@gmail.com>
	<91F640D26AB8E54982706321A514CA263A80F60E44@MALIBU.sarnoff.internal>
	<B597ADFC46B67741B18EA6AA13613FF7EC25DB@email002.lsu.edu>
Message-ID: <200902031219.50036.geraldi.evenden@gmail.com>

On Tuesday 03 February 2009 11:43:00 am Clifford J Mugnier wrote:
> Local Space Rectangular (LSR) is the approximately  60-70 year old
> terminology used in computational photogrammetry.
>
> Polyhedric (Polyeder in Dutch or German) is the 19th century terminology
> for the "projection."  (Also known as the "Tampico Datum" from the 1920s or
> 1930s.)
>
> C. Mugnier

If age has priority, it would seem to be a winner but "Rectangular' seem a 
little open to interpretation.

> From: proj-bounces at lists.maptools.org on behalf of Karney, Charles
> Sent: Tue 03-Feb-09 04:19
	...
> While we're at it, what's the consensus for the terminology for the
> Cartesian system with origin at z = 0 tangent to ellipsoid, z up, y
> north?  Choices so far:
>
>     local Cartesian
>     ENU
>     topocentric

I do have trouble with ENU because of the conflict introduced with 
Easting-Northing as part of its name and the same usage of EN with 
cartographic projections.

There is nothing in the other names that mentions the property of the XY plane 
being tangential to the ellipsoid although the U[p] might imply such.  "Topo" 
does not cut it with me as it has too much baggage with other usage.

How about "[Ellipsoid] Tangential Cartesian" or ETC.

Hey, man!  That's got it!

> It seems that topocentric is the best, and this doesn't tie you down to
> Cartesian coordinates.  Transforming to polar gives azimuth-elevation-
> distance.
>
> --
> Charles Karney <ckarney at sarnoff.com>
> Sarnoff Corporation, Princeton, NJ 08543-5300

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From strebe at aol.com  Tue Feb  3 10:17:01 2009
From: strebe at aol.com (strebe)
Date: Tue, 03 Feb 2009 10:17:01 -0800
Subject: [Proj] Exact transverse Mercator code
In-Reply-To: <4B75606C.60E6.46F8.9A5F.2BA7A2489EC2@aol.com>
Message-ID: <F2BD0336.352F.4ED5.9492.178A42511840@aol.com>


Charles & the interested:

Daylight casts unflattering light on blemishes. This line is not cogent:

>X⁻¹ inverts X, but acts on (ψ, 0.0), ψ being the complex "latitude"

Amending just that line in the complete description:

Define
    Project to complex plane, ψ = X + iΥ
    Wallis I TM, complex ζ = π/2 - X⁻¹(ψ)
    Wallis II TM, complex ξ = η⁻¹(ζ)
    Gauß-Krüger, complex F(ξ)

where
    X(φ, λ), Υ(φ, λ) is any conformal mapping to the plane; e.g.,
        X = r cos λ 
        Υ = r sin λ
        r = [(1-sin φ)/cos φ][(1+e sin φ)/(1-e sin φ)]^(e/2).
    X⁻¹ finds μ such that ψ = X(μ, 0), μ being a complex "latitude"
    η⁻¹ is inverse parametric latitude, acting on a complex "latitude"
        η⁻¹(p) = tan⁻¹ [tan(p)/√(1-e²)]
    F is the elliptic integral of the second kind with parameter e.
    e is eccentricity


Regards,
— daan Strebe


On Feb 3, 2009, at 2:54:30 AM, strebe <strebe at aol.com> wrote:
Wallis happens to project to the ellipsoidal stereographic to arrive onto the plane from the ellipsoid. The specific projection to the plane is not important, other than the simpler the better for practical purposes. The point is to arrive at Wallis I, where parallels are evenly spaced on the complex plane.

Define
    Project to complex plane, ψ = X + iΥ
    Wallis I TM, complex ζ = π/2 - X⁻¹ (ψ)
    Wallis II TM, complex ξ = η⁻¹ (ζ)
    Gauß-Krüger, complex F (ξ)

where
    X (φ, λ), Υ (φ, λ) is any conformal mapping to the plane; e.g.,
        X = r cos λ 
        Υ = r sin λ
        r = [(1-sin φ)/cos φ][(1+e sin φ)/(1-e sin φ)]^(e/2).
    X⁻¹ inverts X, but acts on (ψ, 0.0), ψ being the complex "latitude"
    η⁻¹ is inverse parametric latitude, acting on a complex "latitude"
        η⁻¹ (p) = tan⁻¹ [tan (p)/√(1-e²)]
    F is the elliptic integral of the second kind with parameter e.
    e is eccentricity

As usual, the devil is in the details.

Regards,
— daan Strebe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090203/4338ed0e/attachment.html>

From ndzinn at comcast.net  Tue Feb  3 10:25:23 2009
From: ndzinn at comcast.net (Noel Zinn)
Date: Tue, 3 Feb 2009 12:25:23 -0600
Subject: [Proj] The world of ECEF aka geocentric coordinates
In-Reply-To: <200902031219.50036.geraldi.evenden@gmail.com>
References: <200901301430.28664.geraldi.evenden@gmail.com><91F640D26AB8E54982706321A514CA263A80F60E44@MALIBU.sarnoff.internal><B597ADFC46B67741B18EA6AA13613FF7EC25DB@email002.lsu.edu>
	<200902031219.50036.geraldi.evenden@gmail.com>
Message-ID: <FC1ADFA76001438C84C95489987CF4B6@PowerSpec>

The 4th edition of the Manual of Photogrammetry (1980) page 485 section
9.4.2.3.6.2 (phew!) gives the equations and refers to this as
"geocentric-local vertical".  I believe ESRI uses the same name for this
coordinate conversion in their software.

Bugayevskiy and Snyder (1995) on page 3 section 1.1.2 (right up front in
their "Map Projections A Reference Manual") call this the "topocentric
horizon coordinate system" and give different equations than the Manual of
Photogrammetry (due to a different, more cumbersome derivation).  In fact,
both citations are equivalent mathematically with a little additional
manipulation. 

EPSG terminology is "topocentric coordinate system".  See section 2.2.2 of
Guidance Note 7-2 at www.epsg.org which offers forward and reverse
equations.

Now, it turns out that if you throw away the U of this ENU of this
coordinate system you have the (exact) ellipsoidal form of a perspective map
projection, the orthographic. Unfortunately, Bugayevskiy and Snyder, after a
cumbersome derivation that tosses the high order terms of the series they
invoke, offer an approximate form of the ellipsoidal orthographic on page
116 (when the exact form was stated on page 3). 

I vote for topocentric coordinates. 

Noel Zinn

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Gerald I. Evenden
Sent: Tuesday, February 03, 2009 11:20 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] The world of ECEF aka geocentric coordinates

On Tuesday 03 February 2009 11:43:00 am Clifford J Mugnier wrote:
> Local Space Rectangular (LSR) is the approximately  60-70 year old
> terminology used in computational photogrammetry.
>
> Polyhedric (Polyeder in Dutch or German) is the 19th century terminology
> for the "projection."  (Also known as the "Tampico Datum" from the 1920s
or
> 1930s.)
>
> C. Mugnier

If age has priority, it would seem to be a winner but "Rectangular' seem a 
little open to interpretation.

> From: proj-bounces at lists.maptools.org on behalf of Karney, Charles
> Sent: Tue 03-Feb-09 04:19
	...
> While we're at it, what's the consensus for the terminology for the
> Cartesian system with origin at z = 0 tangent to ellipsoid, z up, y
> north?  Choices so far:
>
>     local Cartesian
>     ENU
>     topocentric

I do have trouble with ENU because of the conflict introduced with 
Easting-Northing as part of its name and the same usage of EN with 
cartographic projections.

There is nothing in the other names that mentions the property of the XY
plane 
being tangential to the ellipsoid although the U[p] might imply such.
"Topo" 
does not cut it with me as it has too much baggage with other usage.

How about "[Ellipsoid] Tangential Cartesian" or ETC.

Hey, man!  That's got it!

> It seems that topocentric is the best, and this doesn't tie you down to
> Cartesian coordinates.  Transforming to polar gives azimuth-elevation-
> distance.
>
> --
> Charles Karney <ckarney at sarnoff.com>
> Sarnoff Corporation, Princeton, NJ 08543-5300

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From dagnew at ucsd.edu  Tue Feb  3 10:58:29 2009
From: dagnew at ucsd.edu (Duncan Agnew)
Date: Tue, 3 Feb 2009 10:58:29 -0800
Subject: [Proj] The world of ECEF aka geocentric coordinates
In-Reply-To: <FC1ADFA76001438C84C95489987CF4B6@PowerSpec>
References: <200901301430.28664.geraldi.evenden@gmail.com><91F640D26AB8E54982706321A514CA263A80F60E44@MALIBU.sarnoff.internal><B597ADFC46B67741B18EA6AA13613FF7EC25DB@email002.lsu.edu>
	<200902031219.50036.geraldi.evenden@gmail.com>
	<FC1ADFA76001438C84C95489987CF4B6@PowerSpec>
Message-ID: <c781e3f48be54008671cb195a8a5d826@ucsd.edu>

According to

%A Tomas Soler
%A Larry D. Hothem
%T Coordinate systems used in geodesy: basic definitions and concepts
%J J. Surv. Engrg.
%V 114
%P 84-97
%D 1988

(both authors from the US National Geodetic Survey)

there are the following reference frames and coordinates:

1. The  Conventional Terrestrial Reference Coordinate Systems (CTRS)
which are geocentric, with z-axis pointing to the pole, and x through
zero longitude. They use  x,y,z for the Cartesian coordinates. There
are different realizations of this, for example the various ITRF's.
    Note that with modern methods of space geodesy, the ellipsoid is
irrelevant: what is found is *only* straight-line distances between 
points,
deduced from time delays. The ellipsoid chosen is just a matter of
convention and convenience.
    The terminology used by the IERS is the same, with the particular
definitions adopted giving the International Terrestrial Reference
System, realized by the various International Terrestrial Reference
Frames.

2. Geodetic Coordinate Systems, Cartesian coordinates u,v,w; center
is at the center of the reference ellipsoid, w along semimajor axis,
u through the defined "zero longitude". Each datum corresponds to a
different GCS, and also includes something that gives the shape and 
size of
the ellipsoid.
    They use lambda, phi, and h for the ellipsoidal coordinates in such
a system, or for ellipsoidal coordinates in a CTRS with a given 
ellipsoid;
they refer to these as "curvilinear geodetic coordinates".

[3. Astronomic coordinates, which depend on the local vertical. Not
used in mapping since people figured out to allow for deflections of
the vertical.]

4. Local Terrestrial Frame: origin where you like, xyz parallel to
the xyz of the CTRS. Not easy to visualize.

5. Local Geodetic Frame: origin where you like, u normal to the 
ellipsoid,
e normal to u and in the geodetic meridian, n normal to both. This is
the usual enu local system, I think, and those are the letters they use.
They use alpha for geodetic azimuth, and nu for vertical angle.

[6. Local Astronomic Frame].

They do not discuss polar coordinates for the CTRS. Certainly the
standard usage is "geocentric latitude" for the polar angle. But unless
you are just approximating positions on a sphere, I'm not sure what
the point of using polar coordinates is.

I would say that the local enu should be called "Cartesian coordinates
in the local geodetic frame"--wordy, but it keeps the distinction clear
between types of coordinates and the frame they are used in. 
"Rectangular"
suggests only two dimensions, and invites confusion with the Rectangular
system of land subdivision (township/range/section).

There doesn't seem to much of a consensus, does there?

Duncan Agnew



From cjmce at lsu.edu  Tue Feb  3 11:13:15 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 3 Feb 2009 13:13:15 -0600
Subject: [Proj] The world of ECEF aka geocentric coordinates
References: <200901301430.28664.geraldi.evenden@gmail.com><91F640D26AB8E54982706321A514CA263A80F60E44@MALIBU.sarnoff.internal><B597ADFC46B67741B18EA6AA13613FF7EC25DB@email002.lsu.edu><200902031219.50036.geraldi.evenden@gmail.com>
	<FC1ADFA76001438C84C95489987CF4B6@PowerSpec>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC25DE@email002.lsu.edu>

The 5th edition of the Manual of Photogrammetry (2004) page 189, section 3.1.2.2 gives the equations and refers to this as "Local Space Rectangular."  (That's the entire page.)  I believe the earlier edition of the Manual and ESRI are incorrect in their terminology for this coordinate system.  If I recall correctly, the 3rd edition of the Manual agrees with the 5th edition ...
 
I don't agree with Roger Lott's (EPSG) notes, either.
 
I vote for LSR, especially since I wrote that chapter for the 5th edition of the Manual of Photogrammetry (2004).
 
So there.  I call your bet.
 
:-)
 
C. Mugnier
LSU
 
________________________________

From: proj-bounces at lists.maptools.org on behalf of Noel Zinn
Sent: Tue 03-Feb-09 12:25
To: 'PROJ.4 and general Projections Discussions'
Subject: Re: [Proj] The world of ECEF aka geocentric coordinates



The 4th edition of the Manual of Photogrammetry (1980) page 485 section
9.4.2.3.6.2 (phew!) gives the equations and refers to this as
"geocentric-local vertical".  I believe ESRI uses the same name for this
coordinate conversion in their software.

Bugayevskiy and Snyder (1995) on page 3 section 1.1.2 (right up front in
their "Map Projections A Reference Manual") call this the "topocentric
horizon coordinate system" and give different equations than the Manual of
Photogrammetry (due to a different, more cumbersome derivation).  In fact,
both citations are equivalent mathematically with a little additional
manipulation.

EPSG terminology is "topocentric coordinate system".  See section 2.2.2 of
Guidance Note 7-2 at www.epsg.org which offers forward and reverse
equations.

Now, it turns out that if you throw away the U of this ENU of this
coordinate system you have the (exact) ellipsoidal form of a perspective map
projection, the orthographic. Unfortunately, Bugayevskiy and Snyder, after a
cumbersome derivation that tosses the high order terms of the series they
invoke, offer an approximate form of the ellipsoidal orthographic on page
116 (when the exact form was stated on page 3).

I vote for topocentric coordinates.

Noel Zinn

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Gerald I. Evenden
Sent: Tuesday, February 03, 2009 11:20 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] The world of ECEF aka geocentric coordinates

On Tuesday 03 February 2009 11:43:00 am Clifford J Mugnier wrote:
> Local Space Rectangular (LSR) is the approximately  60-70 year old
> terminology used in computational photogrammetry.
>
> Polyhedric (Polyeder in Dutch or German) is the 19th century terminology
> for the "projection."  (Also known as the "Tampico Datum" from the 1920s
or
> 1930s.)
>
> C. Mugnier

If age has priority, it would seem to be a winner but "Rectangular' seem a
little open to interpretation.

> From: proj-bounces at lists.maptools.org on behalf of Karney, Charles
> Sent: Tue 03-Feb-09 04:19
        ...
> While we're at it, what's the consensus for the terminology for the
> Cartesian system with origin at z = 0 tangent to ellipsoid, z up, y
> north?  Choices so far:
>
>     local Cartesian
>     ENU
>     topocentric

I do have trouble with ENU because of the conflict introduced with
Easting-Northing as part of its name and the same usage of EN with
cartographic projections.

There is nothing in the other names that mentions the property of the XY
plane
being tangential to the ellipsoid although the U[p] might imply such.
"Topo"
does not cut it with me as it has too much baggage with other usage.

How about "[Ellipsoid] Tangential Cartesian" or ETC.

Hey, man!  That's got it!

> It seems that topocentric is the best, and this doesn't tie you down to
> Cartesian coordinates.  Transforming to polar gives azimuth-elevation-
> distance.
>
> --
> Charles Karney <ckarney at sarnoff.com>
> Sarnoff Corporation, Princeton, NJ 08543-5300

--
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090203/6dfb8079/attachment.html>

From ndzinn at comcast.net  Tue Feb  3 11:30:18 2009
From: ndzinn at comcast.net (Noel Zinn)
Date: Tue, 3 Feb 2009 13:30:18 -0600
Subject: [Proj] The world of ECEF aka geocentric coordinates
In-Reply-To: <c781e3f48be54008671cb195a8a5d826@ucsd.edu>
References: <200901301430.28664.geraldi.evenden@gmail.com><91F640D26AB8E54982706321A514CA263A80F60E44@MALIBU.sarnoff.internal><B597ADFC46B67741B18EA6AA13613FF7EC25DB@email002.lsu.edu><200902031219.50036.geraldi.evenden@gmail.com><FC1ADFA76001438C84C95489987CF4B6@PowerSpec>
	<c781e3f48be54008671cb195a8a5d826@ucsd.edu>
Message-ID: <0F95D1374FBE4FDA886D7197298C0D3F@PowerSpec>

Duncan,

The Local Geodetic Frame of Soler and Hothem is what we're talking about but
I respectfully offer a correction to your paraphrase.  "e" is not "in" the
meridian, but normal to it, that is in the E-W direction, which makes more
sense.  "n", then is in the northerly (meridian) direction.  

This should read: "Local Geodetic Frame: origin where you like, u normal to
the ellipsoid, e normal to u and to the geodetic meridian (tangent to the
geodetic parallel), n normal to both."

Noel

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Duncan Agnew
Sent: Tuesday, February 03, 2009 12:58 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] The world of ECEF aka geocentric coordinates

According to

%A Tomas Soler
%A Larry D. Hothem
%T Coordinate systems used in geodesy: basic definitions and concepts
%J J. Surv. Engrg.
%V 114
%P 84-97
%D 1988

(both authors from the US National Geodetic Survey)

there are the following reference frames and coordinates:

1. The  Conventional Terrestrial Reference Coordinate Systems (CTRS)
which are geocentric, with z-axis pointing to the pole, and x through
zero longitude. They use  x,y,z for the Cartesian coordinates. There
are different realizations of this, for example the various ITRF's.
    Note that with modern methods of space geodesy, the ellipsoid is
irrelevant: what is found is *only* straight-line distances between 
points,
deduced from time delays. The ellipsoid chosen is just a matter of
convention and convenience.
    The terminology used by the IERS is the same, with the particular
definitions adopted giving the International Terrestrial Reference
System, realized by the various International Terrestrial Reference
Frames.

2. Geodetic Coordinate Systems, Cartesian coordinates u,v,w; center
is at the center of the reference ellipsoid, w along semimajor axis,
u through the defined "zero longitude". Each datum corresponds to a
different GCS, and also includes something that gives the shape and 
size of
the ellipsoid.
    They use lambda, phi, and h for the ellipsoidal coordinates in such
a system, or for ellipsoidal coordinates in a CTRS with a given 
ellipsoid;
they refer to these as "curvilinear geodetic coordinates".

[3. Astronomic coordinates, which depend on the local vertical. Not
used in mapping since people figured out to allow for deflections of
the vertical.]

4. Local Terrestrial Frame: origin where you like, xyz parallel to
the xyz of the CTRS. Not easy to visualize.

5. Local Geodetic Frame: origin where you like, u normal to the 
ellipsoid,
e normal to u and in the geodetic meridian, n normal to both. This is
the usual enu local system, I think, and those are the letters they use.
They use alpha for geodetic azimuth, and nu for vertical angle.

[6. Local Astronomic Frame].

They do not discuss polar coordinates for the CTRS. Certainly the
standard usage is "geocentric latitude" for the polar angle. But unless
you are just approximating positions on a sphere, I'm not sure what
the point of using polar coordinates is.

I would say that the local enu should be called "Cartesian coordinates
in the local geodetic frame"--wordy, but it keeps the distinction clear
between types of coordinates and the frame they are used in. 
"Rectangular"
suggests only two dimensions, and invites confusion with the Rectangular
system of land subdivision (township/range/section).

There doesn't seem to much of a consensus, does there?

Duncan Agnew

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From jhollingsworth at houston.oilfield.slb.com  Tue Feb  3 12:32:48 2009
From: jhollingsworth at houston.oilfield.slb.com (Jay Hollingsworth)
Date: Tue, 03 Feb 2009 14:32:48 -0600
Subject: [Proj] Wikipedia ECEF entry
In-Reply-To: <mailman.622.1233688404.12386.proj@lists.maptools.org>
References: <mailman.622.1233688404.12386.proj@lists.maptools.org>
Message-ID: <0KEI00E9LBQPSF10@gb0135mbx01.mail.slb.com>

As long as people are asking about the term ECEF, I would like to fix 
the definition of ECEF on the Wikipedia page

http://en.wikipedia.org/wiki/ECEF

but first I want to make sure I'm not wrong. Since every high-school 
student in the world relies on Wikipedia, it would be good for it to 
be close to right.

The definition says "The z-axis is defined as being parallel to the 
earth rotational axes, pointing towards north". Isn't it actually 
coincident with the rotational axis, rather than being parallel?

I just created a discussion page under the definition so the world at 
large could comment.



Jay Hollingsworth

Seabed Portfolio Manager and
Principal Data Architect
Schlumberger Information Solutions
phone: 713 513 8854 fax: 713 513 2093



From geraldi.evenden at gmail.com  Tue Feb  3 13:48:44 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 3 Feb 2009 16:48:44 -0500
Subject: [Proj] Wikipedia ECEF entry
In-Reply-To: <0KEI00E9LBQPSF10@gb0135mbx01.mail.slb.com>
References: <mailman.622.1233688404.12386.proj@lists.maptools.org>
	<0KEI00E9LBQPSF10@gb0135mbx01.mail.slb.com>
Message-ID: <200902031648.44944.geraldi.evenden@gmail.com>

On Tuesday 03 February 2009 3:32:48 pm Jay Hollingsworth wrote:
> As long as people are asking about the term ECEF, I would like to fix
> the definition of ECEF on the Wikipedia page
>
> http://en.wikipedia.org/wiki/ECEF
>
> but first I want to make sure I'm not wrong. Since every high-school
> student in the world relies on Wikipedia, it would be good for it to
> be close to right.
>
> The definition says "The z-axis is defined as being parallel to the
> earth rotational axes, pointing towards north". Isn't it actually
> coincident with the rotational axis, rather than being parallel?
>
> I just created a discussion page under the definition so the world at
> large could comment.

I would if I could figure out how to use the *^%*)%) Wiki system.  :-(

You seem to be basically correct except for one item: the moon.  The whole 
mechanism is one big wobble so I am not sure how true the rotational axis is 
with the ellipsoid axis.  Of course the ellipsoid gets bent out of shape with 
the tides and all, and other pertubations from the sun, etc..

Anyway, I am probably nit-picking.

I remember the time I had to code the formula for tidal attraction in the cgs 
system (centimeter-gram-second) and taking the nth power of the sun-earth 
distance in centimeters blew the exponent on a DEC System 10.  Switching to 
MKS helped.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From richard.greenwood at gmail.com  Tue Feb  3 19:02:43 2009
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Tue, 3 Feb 2009 20:02:43 -0700
Subject: [Proj] Wikipedia ECEF entry
In-Reply-To: <0KEI00E9LBQPSF10@gb0135mbx01.mail.slb.com>
References: <mailman.622.1233688404.12386.proj@lists.maptools.org>
	<0KEI00E9LBQPSF10@gb0135mbx01.mail.slb.com>
Message-ID: <ae9185aa0902031902y286c4c94n1e101aa5dda89014@mail.gmail.com>

On Tue, Feb 3, 2009 at 1:32 PM, Jay Hollingsworth
<jhollingsworth at houston.oilfield.slb.com> wrote:
> As long as people are asking about the term ECEF, I would like to fix
> the definition of ECEF on the Wikipedia page
>
> http://en.wikipedia.org/wiki/ECEF
>
> but first I want to make sure I'm not wrong. Since every high-school
> student in the world relies on Wikipedia, it would be good for it to
> be close to right.
>
> The definition says "The z-axis is defined as being parallel to the
> earth rotational axes, pointing towards north". Isn't it actually
> coincident with the rotational axis, rather than being parallel?
>
> I just created a discussion page under the definition so the world at
> large could comment.
>
>
>
> Jay Hollingsworth
>
> Seabed Portfolio Manager and
> Principal Data Architect
> Schlumberger Information Solutions
> phone: 713 513 8854 fax: 713 513 2093

Well geez, if we're picking nits, grammatically it's "parallel WITH"
and "perpendicular TO".

-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From burstain at gmail.com  Tue Feb  3 21:45:13 2009
From: burstain at gmail.com (Eran Burstain)
Date: Wed, 4 Feb 2009 07:45:13 +0200
Subject: [Proj] Wikipedia ECEF entry
In-Reply-To: <0KEI00E9LBQPSF10@gb0135mbx01.mail.slb.com>
References: <mailman.622.1233688404.12386.proj@lists.maptools.org>
	<0KEI00E9LBQPSF10@gb0135mbx01.mail.slb.com>
Message-ID: <817db2970902032145p4a33c8dg8dec1492dd5ef2ee@mail.gmail.com>

Well, the rotational axis is one, but the ECEF's are many (each datum
defines different translation - not to mention the rotations for molodensky
7-params), so, 'it' or 'they' does not coincident with the rotational axis
(and maybe not all of them are parallel to it...).

On Tue, Feb 3, 2009 at 10:32 PM, Jay Hollingsworth <
jhollingsworth at houston.oilfield.slb.com> wrote:

> As long as people are asking about the term ECEF, I would like to fix
> the definition of ECEF on the Wikipedia page
>
> http://en.wikipedia.org/wiki/ECEF
>
> but first I want to make sure I'm not wrong. Since every high-school
> student in the world relies on Wikipedia, it would be good for it to
> be close to right.
>
> The definition says "The z-axis is defined as being parallel to the
> earth rotational axes, pointing towards north". Isn't it actually
> coincident with the rotational axis, rather than being parallel?
>
> I just created a discussion page under the definition so the world at
> large could comment.
>
>
>
> Jay Hollingsworth
>
> Seabed Portfolio Manager and
> Principal Data Architect
> Schlumberger Information Solutions
> phone: 713 513 8854 fax: 713 513 2093
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090204/dc3445d5/attachment.html>

From hamish_b at yahoo.com  Tue Feb  3 23:28:40 2009
From: hamish_b at yahoo.com (Hamish)
Date: Tue, 3 Feb 2009 23:28:40 -0800 (PST)
Subject: [Proj] The world of ECEF aka geocentric coordinates
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC25D4@email002.lsu.edu>
Message-ID: <913838.39450.qm@web110012.mail.gq1.yahoo.com>

Clifford J Mugnier wrote:
> I personally find the Wiki stuff useless and misleading. 
> The proper reference is Bomford's Geodesy (Editions 1
> thru 4), and not the other trivia listed at the end.  The
> term ECEF is new-age baloney.  The Geocentric Coordinate
> System is the original and decades-old terminology
> recognized in the classical literature.  The notation used
> in the Wiki equations is just more gobbledygook, as Bomford
> established the proper (and world-wide recognized) notation
> about 50 years ago.  As if Wiki is entitled to ignore (?)
> the ellipsoid normal terminated by the semi-minor axis?  The
> term "spheroid" is further glaring evidence of
> classical geodetic ignorance.  That noun is only used with
> an ellipsoid that has a specific datum with an associated
> geoid.  Applicable to OSGB36 and WGS84, but certainly not to
> most classical datums found throughout the world.


If you find that a wiki is incorrect, please please please take the time
to fit it! That's the whole point of a wiki and the best way to stop
garbage being propagated. A few minutes spent there removing/fixing
mistakes and improving the "further reading" section could help avert
countless mop-up jobs and substandard softwares for hundreds of end-users.

debate & justifications can be listed on the entry's "Discussion" page.


humbly,
Hamish



      



From ovv at hetnet.nl  Tue Feb  3 23:45:19 2009
From: ovv at hetnet.nl (OvV_HN)
Date: Wed, 4 Feb 2009 08:45:19 +0100
Subject: [Proj] Wikipedia ECEF entry
In-Reply-To: <0KEI00E9LBQPSF10@gb0135mbx01.mail.slb.com>
References: <mailman.622.1233688404.12386.proj@lists.maptools.org>
	<0KEI00E9LBQPSF10@gb0135mbx01.mail.slb.com>
Message-ID: <2592721A75EF46958872F6F35D8B9A50@PCHP>


----- Original Message ----- 
From: "Jay Hollingsworth" <jhollingsworth at houston.oilfield.slb.com>
To: <proj at lists.maptools.org>
Sent: Tuesday, February 03, 2009 9:32 PM
Subject: [Proj] Wikipedia ECEF entry


> As long as people are asking about the term ECEF, I would like to fix
> the definition of ECEF on the Wikipedia page
>
> http://en.wikipedia.org/wiki/ECEF
>
....
> The definition says "The z-axis is defined as being parallel to the
> earth rotational axes, pointing towards north". Isn't it actually
> coincident with the rotational axis, rather than being parallel?
>

Define "earth rotational axis".
Do you mean the daily wobbling actual axis, or some intermediate 'mean' 
axis, or the line between the origin (define origin) and latitude 90d in 
some coordinate system?
See also Technical Note No. 32 at iers.org

Oscar van Vlijmen




From Mikael.Rittri at carmenta.com  Wed Feb  4 02:19:12 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Wed, 4 Feb 2009 11:19:12 +0100
Subject: [Proj] Common term for geographic and projected coordinates?
In-Reply-To: <200902021154.38983.geraldi.evenden@gmail.com>
References: <200901301430.28664.geraldi.evenden@gmail.com><B597ADFC46B67741B18EA6AA13613FF7EC25D5@email002.lsu.edu><a715f8cbcffbf42e3016654a2e80b851@ucsd.edu>
	<200902021154.38983.geraldi.evenden@gmail.com>
Message-ID: <FAF6E56B26D2044696772EBE89B15351016158E8@posty.carmenta.se>

Gerald wrote: 

> A second issue arose and is the preferred or official designation of lat-lon-h coordinates.  
> Is geographic or geodetic preferred?  I have a tendency to use the two designations 
> interchangeably and mix them freely in emails and documentation.
> 
> Anyone want to nit-pick over this usage.  :-)

Well, h is a hairy issue, with all the different kinds of height.  
But for lat-lon, both "geographic coordinates" and "geodetic coordinates" 
would be correct, as far as I understand it.
   But "geographic coordinates" is probably more common (Google gives 585 000 hits 
for "geographic coordinates", and only 19 700 hits for "geodetic coordinates"). 

Now to my own question: is there a general term that includes both geographic 
coordinates (lat-lon) and projected coordinates (easting-northing), as opposed 
to pixel coordinates?  
   I am trying to document a method that tranforms pixel coordinates to 
either projected or geographic coordinates, depending on whether the 
window is presented with a map projection or just as lat-lon (all right, 
Pseudo Plate Carrée). 
   As you see, I haven't found a snappy way to express it. 
I can only think of "georeferenced coordinates", but is there a better term?

Regards,
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com


From kopilists at googlemail.com  Wed Feb  4 04:51:39 2009
From: kopilists at googlemail.com (Ung)
Date: Wed, 4 Feb 2009 13:51:39 +0100
Subject: [Proj] Proj4 cs2cs Program and the Geocentric Coord System
Message-ID: <54d543eb0902040451h389e4f58n989b1c7b77a201aa@mail.gmail.com>

Hi All,

I found that running the following command:
cs2cs +proj=geocent +ellps=WGS84 +to +proj=geocent +ellps=WGS84

with input "123 655 123" yields "-122.87 -654.29 -122.86"

As I understand it, the command would project a point from a geocentric
frame to the same frame, which should result in a point with the same
coordinates. Why the difference in output? I have only recently stepped into
the shallow parts of the deep waters of geodesy, having only learnt the term
"geodetic" two weeks ago...So while it may not be meaningful to call the
command above, I wonder if the output is as expected, and if so, I would
definitely appreciate someone setting my understanding right.

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090204/844f842b/attachment.html>

From geraldi.evenden at gmail.com  Wed Feb  4 07:22:57 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 4 Feb 2009 10:22:57 -0500
Subject: [Proj] Common term for geographic and projected coordinates?
In-Reply-To: <FAF6E56B26D2044696772EBE89B15351016158E8@posty.carmenta.se>
References: <200901301430.28664.geraldi.evenden@gmail.com>
	<200902021154.38983.geraldi.evenden@gmail.com>
	<FAF6E56B26D2044696772EBE89B15351016158E8@posty.carmenta.se>
Message-ID: <200902041022.57465.geraldi.evenden@gmail.com>

On Wednesday 04 February 2009 5:19:12 am Mikael Rittri wrote:
> Gerald wrote:
> > A second issue arose and is the preferred or official designation of
> > lat-lon-h coordinates. Is geographic or geodetic preferred?  I have a
> > tendency to use the two designations interchangeably and mix them freely
> > in emails and documentation.
> >
> > Anyone want to nit-pick over this usage.  :-)
>
> Well, h is a hairy issue, with all the different kinds of height.
> But for lat-lon, both "geographic coordinates" and "geodetic coordinates"
> would be correct, as far as I understand it.
>    But "geographic coordinates" is probably more common (Google gives 585
> 000 hits for "geographic coordinates", and only 19 700 hits for "geodetic
> coordinates").
>
> Now to my own question: is there a general term that includes both
> geographic coordinates (lat-lon) and projected coordinates
> (easting-northing), as opposed to pixel coordinates?
>    I am trying to document a method that tranforms pixel coordinates to
> either projected or geographic coordinates, depending on whether the
> window is presented with a map projection or just as lat-lon (all right,
> Pseudo Plate Carrée).
>    As you see, I haven't found a snappy way to express it.
> I can only think of "georeferenced coordinates", but is there a better
> term?

Isn't this just a "scale" issue.  That is, you are scaling and translating the 
XY from the projected data to the units of the display device.  The only 
added hassle is that a pixel represents an area rather than a point.

To go from pixels back to the projected data and eventually to geographic data 
is merely unscaling and untranslating and then inverse projection.

Why isn't "scale-translation to and from display units" a useful phrase.  May 
not be snappy but seems clear to me and, I might add, I don't think we need 
any more snappyness.  ;-)

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From warmerdam at pobox.com  Wed Feb  4 07:41:46 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 04 Feb 2009 10:41:46 -0500
Subject: [Proj] Proj4 cs2cs Program and the Geocentric Coord System
In-Reply-To: <54d543eb0902040451h389e4f58n989b1c7b77a201aa@mail.gmail.com>
References: <54d543eb0902040451h389e4f58n989b1c7b77a201aa@mail.gmail.com>
Message-ID: <4989B73A.6090804@pobox.com>

Ung wrote:
> Hi All,
> 
> I found that running the following command:
> cs2cs +proj=geocent +ellps=WGS84 +to +proj=geocent +ellps=WGS84
> 
> with input "123 655 123" yields "-122.87 -654.29 -122.86"
> 
> As I understand it, the command would project a point from a geocentric 
> frame to the same frame, which should result in a point with the same 
> coordinates. Why the difference in output? I have only recently stepped 
> into the shallow parts of the deep waters of geodesy, having only learnt 
> the term "geodetic" two weeks ago...So while it may not be meaningful to 
> call the command above, I wonder if the output is as expected, and if 
> so, I would definitely appreciate someone setting my understanding right.

Ung,

I reproduced similar results, but I find the results are much more stable
further from the center of the Earth.


cs2cs +proj=geocent +ellps=WGS84 +to +proj=geocent +ellps=WGS84
123 655 123
-122.87 -654.29 -122.86
12300 65500 12300
12300.00        65500.00 12300.00

Based on other discussions on geocentric calculations here on this list
I'm under the impression that some methods become inaccurate very close
to the origin and that is what seems to be happening here.

For the purposes of cartographic mapping I think locations so close to the
geocentric origin are rather irrelavent so I'm not personally too concerned.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From cjmce at lsu.edu  Wed Feb  4 07:51:19 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 4 Feb 2009 09:51:19 -0600
Subject: [Proj] The world of ECEF aka geocentric coordinates
References: <913838.39450.qm@web110012.mail.gq1.yahoo.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC25E3@email002.lsu.edu>

I find Wiki stuff garbage and worthless in that a knowledgeable
entry can be changed and modified by an incompetent.  How would
a potential reader be able to distinguish the difference as the 
contributors are anonymous?  Even with named attribution, the 
reader would be faced with the task of further research which is
unlikely as the reader is attempting to avoid scholarly research
by merely going to the Wiki site.
 
I find it an idealistic waste of time.
 
C. Mugnier
LSU

________________________________

From: proj-bounces at lists.maptools.org on behalf of Hamish
Sent: Wed 04-Feb-09 01:28
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] The world of ECEF aka geocentric coordinates



Clifford J Mugnier wrote:
> I personally find the Wiki stuff useless and misleading.
> The proper reference is Bomford's Geodesy (Editions 1
> thru 4), and not the other trivia listed at the end.  The
> term ECEF is new-age baloney.  The Geocentric Coordinate
> System is the original and decades-old terminology
> recognized in the classical literature.  The notation used
> in the Wiki equations is just more gobbledygook, as Bomford
> established the proper (and world-wide recognized) notation
> about 50 years ago.  As if Wiki is entitled to ignore (?)
> the ellipsoid normal terminated by the semi-minor axis?  The
> term "spheroid" is further glaring evidence of
> classical geodetic ignorance.  That noun is only used with
> an ellipsoid that has a specific datum with an associated
> geoid.  Applicable to OSGB36 and WGS84, but certainly not to
> most classical datums found throughout the world.


If you find that a wiki is incorrect, please please please take the time
to fit it! That's the whole point of a wiki and the best way to stop
garbage being propagated. A few minutes spent there removing/fixing
mistakes and improving the "further reading" section could help avert
countless mop-up jobs and substandard softwares for hundreds of end-users.

debate & justifications can be listed on the entry's "Discussion" page.


humbly,
Hamish



     

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090204/6f52ec54/attachment.html>

From ckarney at Sarnoff.com  Wed Feb  4 08:58:56 2009
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Wed, 4 Feb 2009 11:58:56 -0500
Subject: [Proj] Proj4 cs2cs Program and the Geocentric Coord System
In-Reply-To: <4989B73A.6090804@pobox.com>
References: <54d543eb0902040451h389e4f58n989b1c7b77a201aa@mail.gmail.com>,
	<4989B73A.6090804@pobox.com>
Message-ID: <91F640D26AB8E54982706321A514CA263A80F60E52@MALIBU.sarnoff.internal>

Ung wrote:
> Hi All,
>
> I found that running the following command:
> cs2cs +proj=geocent +ellps=WGS84 +to +proj=geocent +ellps=WGS84
>
> with input "123 655 123" yields "-122.87 -654.29 -122.86"

As Frank points out many algorithms to deal with geocentric coordinates
break down within 50km of the center of the earth.  If you need to do
such conversions accurately use ECEFConvert from

  http://charles.karney.info/geographic/

After compiling ECEFConvert, you can do

 echo 123 655 123 | ./ECEFConvert -r | ./ECEFConvert

which returns

 122.9999999999995 654.9999999999982 123.0000000002855

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From ckarney at Sarnoff.com  Wed Feb  4 10:19:13 2009
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Wed, 4 Feb 2009 13:19:13 -0500
Subject: [Proj] The world of ECEF aka geocentric coordinates
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC25E3@email002.lsu.edu>
References: <913838.39450.qm@web110012.mail.gq1.yahoo.com>,
	<B597ADFC46B67741B18EA6AA13613FF7EC25E3@email002.lsu.edu>
Message-ID: <91F640D26AB8E54982706321A514CA263A80F60E53@MALIBU.sarnoff.internal>

> From: Clifford J Mugnier [cjmce at lsu.edu]
> Date: Wednesday, February 04, 2009 10:51
>
> I find Wiki stuff garbage and worthless ...

My overall take on Wikipedia is that it's a fabulous resource.
Certainly there's some garbage in it.  However, I find that it's
reasonably easy to spot this.  If you smell a rat, you can check the
editing history; or it can be the starting point for checking other
sources.
--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Wed Feb  4 10:26:36 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 4 Feb 2009 13:26:36 -0500
Subject: [Proj] Proj4 cs2cs Program and the Geocentric Coord System
In-Reply-To: <91F640D26AB8E54982706321A514CA263A80F60E52@MALIBU.sarnoff.internal>
References: <54d543eb0902040451h389e4f58n989b1c7b77a201aa@mail.gmail.com>
	<4989B73A.6090804@pobox.com>
	<91F640D26AB8E54982706321A514CA263A80F60E52@MALIBU.sarnoff.internal>
Message-ID: <200902041326.36730.geraldi.evenden@gmail.com>

On Wednesday 04 February 2009 11:58:56 am Karney, Charles wrote:
> Ung wrote:
> > Hi All,
> >
> > I found that running the following command:
> > cs2cs +proj=geocent +ellps=WGS84 +to +proj=geocent +ellps=WGS84
> >
> > with input "123 655 123" yields "-122.87 -654.29 -122.86"
>
> As Frank points out many algorithms to deal with geocentric coordinates
> break down within 50km of the center of the earth.  If you need to do
> such conversions accurately use ECEFConvert from
>
>   http://charles.karney.info/geographic/
>
> After compiling ECEFConvert, you can do
>
>  echo 123 655 123 | ./ECEFConvert -r | ./ECEFConvert
>
> which returns
>
>  122.9999999999995 654.9999999999982 123.0000000002855

Are we not back to the same business associated with the dead horse issue of 
TM (Transmogrification Meditation): unneeded accuracy and extended 
computational range.  The real use of XYZ<->geographic conversion is in the 
region withing a few kilometers of the Earth's generalized elliptical shape 
for most of the readers of this list.

The old methods, with all their clay feet, seem to function quite well in this 
region and certainly spend a lot fewer electron dollars in their computation.  
Thus lets simply put a careat on these simpler proceedures to warning those 
who drill holes into the molten iron core of the earth or are flying their 
space ships beyond the local solar system may need better better methods.

Certainly, those with too much time on their hands should announce their 
efforts which produce a googleplex of significant digits and function over 
the range from the microworld of quantum mechanics to that of intergalactic 
space  travel.  We can all say "Wow!"  But beyond that ...

That is just the voice of someone who spent part of his career seeking faster 
ways of doing things; part of which was looking at accuracy needs and seeking 
approximations of hyperaccurate but computational intensive procedures that 
met the real needs of a probem and did the computations many times faster.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at Sarnoff.com  Wed Feb  4 10:37:57 2009
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Wed, 4 Feb 2009 13:37:57 -0500
Subject: [Proj] Common term for geographic and projected coordinates?
In-Reply-To: <FAF6E56B26D2044696772EBE89B15351016158E8@posty.carmenta.se>
References: <200901301430.28664.geraldi.evenden@gmail.com><B597ADFC46B67741B18EA6AA13613FF7EC25D5@email002.lsu.edu><a715f8cbcffbf42e3016654a2e80b851@ucsd.edu>
	<200902021154.38983.geraldi.evenden@gmail.com>,
	<FAF6E56B26D2044696772EBE89B15351016158E8@posty.carmenta.se>
Message-ID: <91F640D26AB8E54982706321A514CA263A80F60E54@MALIBU.sarnoff.internal>

> From: Mikael Rittri [Mikael.Rittri at carmenta.com]
> Date: Wednesday, February 04, 2009 05:19
> Subject: [Proj] Common term for geographic and projected coordinates?
>
>    I am trying to document a method that tranforms pixel coordinates
> to either projected or geographic coordinates, depending on whether
> the window is presented with a map projection or just as lat-lon (all
> right, Pseudo Plate Carrée).

In the vision world, the conversion for "world" coordinates to pixels is
accomplished by a "camera matrix"

    http://en.wikipedia.org/wiki/Camera_matrix

In general this is a projective map from 3d to 2d.  The simple case
you're considering is a similarity transform.  The transformation from
pixel to projected coordinates is given by the inverse of the camera
matrix.
--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Wed Feb  4 10:58:25 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 4 Feb 2009 13:58:25 -0500
Subject: [Proj] The world of ECEF aka geocentric coordinates
In-Reply-To: <91F640D26AB8E54982706321A514CA263A80F60E53@MALIBU.sarnoff.internal>
References: <913838.39450.qm@web110012.mail.gq1.yahoo.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC25E3@email002.lsu.edu>
	<91F640D26AB8E54982706321A514CA263A80F60E53@MALIBU.sarnoff.internal>
Message-ID: <200902041358.25868.geraldi.evenden@gmail.com>

On Wednesday 04 February 2009 1:19:13 pm Karney, Charles wrote:
> > From: Clifford J Mugnier [cjmce at lsu.edu]
> > Date: Wednesday, February 04, 2009 10:51
> >
> > I find Wiki stuff garbage and worthless ...
>
> My overall take on Wikipedia is that it's a fabulous resource.
> Certainly there's some garbage in it.  However, I find that it's
> reasonably easy to spot this.  If you smell a rat, you can check the
> editing history; or it can be the starting point for checking other
> sources.
> --
> Charles Karney <ckarney at sarnoff.com>
> Sarnoff Corporation, Princeton, NJ 08543-5300

I second that and it is one of the first places I go to for information.  But 
depending upon what I am after, I often followup on additional sites.

At the moment, I have not figured out their editing operations.  I wanted to 
add to the comments about the z axis but gave up after it looked like I would 
have to spend an afternoon learning their system.   :-(

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at Sarnoff.com  Wed Feb  4 11:32:20 2009
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Wed, 4 Feb 2009 14:32:20 -0500
Subject: [Proj] Proj4 cs2cs Program and the Geocentric Coord System
In-Reply-To: <200902041326.36730.geraldi.evenden@gmail.com>
References: <54d543eb0902040451h389e4f58n989b1c7b77a201aa@mail.gmail.com>
	<4989B73A.6090804@pobox.com>
	<91F640D26AB8E54982706321A514CA263A80F60E52@MALIBU.sarnoff.internal>,
	<200902041326.36730.geraldi.evenden@gmail.com>
Message-ID: <91F640D26AB8E54982706321A514CA263A80F60E55@MALIBU.sarnoff.internal>

> From: Gerald I. Evenden [geraldi.evenden at gmail.com]
> Sent: Wednesday, February 04, 2009 13:26
>
> Are we not back to the same business associated with the dead horse issue of
> TM (Transmogrification Meditation): unneeded accuracy and extended
> computational range.

[rest of the rant cut...]

Gerald:

I am willing to stipulate that for many purposes 1m (or 1cm or 1mm)
accuracy suffices.

However, I wish you, in turn, would recognise that there's also a need
for routines which are accurate to round-off and are valid for as wide a
range of inputs as possible.  I deal with complex hardware and software
configurations and tracking down problems in such systems can be
incredibly difficult.  Is the camera calibration wrong because:

    * someone knocked the camera
    * the sensors are out of whack
    * the geographic database is misregistered
    * the wrong vertical datum was used
    * there's a bug in the graphics card
    * the INU is acting up

The list is potentially endless.  It's really, really, useful to be able
to exclude things like

    * the UTM to geographic to UTM conversion is not an identity

I know this attention to detail can seem anal at times.  However, that's
how robust systems are built.  And in my case, people's lives are at
stake.

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From EMiller at dfg.ca.gov  Wed Feb  4 11:43:46 2009
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Wed, 04 Feb 2009 11:43:46 -0800
Subject: [Proj] Common term for geographic and projected	coordinates?
In-Reply-To: <91F640D26AB8E54982706321A514CA263A80F60E54@MALIBU.sarnoff.internal>
References: <200901301430.28664.geraldi.evenden@gmail.com><B597ADFC46B67741B18EA6AA13613FF7EC25D5@email002.lsu.edu><a715f8cbcffbf42e3016654a2e80b851@ucsd.edu>
	<200902021154.38983.geraldi.evenden@gmail.com>,
	<FAF6E56B26D2044696772EBE89B15351016158E8@posty.carmenta.se>
	<91F640D26AB8E54982706321A514CA263A80F60E54@MALIBU.sarnoff.internal>
Message-ID: <49897F72.95FD.00E4.0@dfg.ca.gov>

>>> On 2/4/2009 at 10:37 AM, "Karney, Charles" <ckarney at Sarnoff.com>
wrote:
>>  From: Mikael Rittri [Mikael.Rittri at carmenta.com] 
>> Date: Wednesday, February 04, 2009 05:19
>> Subject: [Proj] Common term for geographic and projected
coordinates?
>>
>>    I am trying to document a method that tranforms pixel
coordinates
>> to either projected or geographic coordinates, depending on whether
>> the window is presented with a map projection or just as lat-lon
(all
>> right, Pseudo Plate Carrée).
> 
> In the vision world, the conversion for "world" coordinates to pixels
is
> accomplished by a "camera matrix"
> 
>     http://en.wikipedia.org/wiki/Camera_matrix 
> 
> In general this is a projective map from 3d to 2d.  The simple case
> you're considering is a similarity transform.  The transformation
from
> pixel to projected coordinates is given by the inverse of the camera
> matrix.

I don't think that's what the op is interested in.  It's just 2D to 2D
scaling and translation with some type conversion handling (int <->
double).  I couldn't find a good explanation online but search for
"converting screen coordinates to map coordinates" or something similar.
 The map coordinates are always some projection as the op noticed.  It's
basic algebra/geometry. 

-- 

Eric G. Miller
Staff Programmer
CA Dept. of Fish & Game



From EMiller at dfg.ca.gov  Wed Feb  4 11:55:13 2009
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Wed, 04 Feb 2009 11:55:13 -0800
Subject: [Proj] The world of ECEF aka geocentric coordinates
In-Reply-To: <200902041358.25868.geraldi.evenden@gmail.com>
References: <913838.39450.qm@web110012.mail.gq1.yahoo.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC25E3@email002.lsu.edu>
	<91F640D26AB8E54982706321A514CA263A80F60E53@MALIBU.sarnoff.internal>
	<200902041358.25868.geraldi.evenden@gmail.com>
Message-ID: <49898221.95FD.00E4.0@dfg.ca.gov>

>>> On 2/4/2009 at 10:58 AM, "Gerald I. Evenden" <geraldi.evenden at gmail.com>
wrote:
> On Wednesday 04 February 2009 1:19:13 pm Karney, Charles wrote:
>> > From: Clifford J Mugnier [cjmce at lsu.edu] 
>> > Date: Wednesday, February 04, 2009 10:51
>> >
>> > I find Wiki stuff garbage and worthless ...
>>
>> My overall take on Wikipedia is that it's a fabulous resource.
>> Certainly there's some garbage in it.  However, I find that it's
>> reasonably easy to spot this.  If you smell a rat, you can check the
>> editing history; or it can be the starting point for checking other
>> sources.
>> --
>> Charles Karney <ckarney at sarnoff.com>
>> Sarnoff Corporation, Princeton, NJ 08543-5300
> 
> I second that and it is one of the first places I go to for information.  
> But 
> depending upon what I am after, I often followup on additional sites.
> 
> At the moment, I have not figured out their editing operations.  I wanted to 
> 
> add to the comments about the z axis but gave up after it looked like I 
> would 
> have to spend an afternoon learning their system.   :-(

The WGS84 documentation describes the positive z-axis as going through the north pole as defined by ...  ECEF is mentioned in section 2.1 (TR8350.2).  There can be many ECEF reference frames or coordinate systems.  I'm not convinced they all have to be "right-handed" cartesian systems like WGS84.  But, maybe they do?  It'd be helpful to know the origin of the term.



From geraldi.evenden at gmail.com  Wed Feb  4 12:16:20 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 4 Feb 2009 15:16:20 -0500
Subject: [Proj]
	=?iso-8859-15?q?Common_term_for_geographic_and_projected?=
	=?iso-8859-15?q?=09coordinates=3F?=
In-Reply-To: <49897F72.95FD.00E4.0@dfg.ca.gov>
References: <200901301430.28664.geraldi.evenden@gmail.com>
	<91F640D26AB8E54982706321A514CA263A80F60E54@MALIBU.sarnoff.internal>
	<49897F72.95FD.00E4.0@dfg.ca.gov>
Message-ID: <200902041516.20763.geraldi.evenden@gmail.com>

On Wednesday 04 February 2009 2:43:46 pm Eric Miller wrote:
> >>> On 2/4/2009 at 10:37 AM, "Karney, Charles" <ckarney at Sarnoff.com>
>
> wrote:
> >>  From: Mikael Rittri [Mikael.Rittri at carmenta.com]
> >> Date: Wednesday, February 04, 2009 05:19
> >> Subject: [Proj] Common term for geographic and projected
>
> coordinates?
>
> >>    I am trying to document a method that tranforms pixel
>
> coordinates
>
> >> to either projected or geographic coordinates, depending on whether
> >> the window is presented with a map projection or just as lat-lon
>
> (all
>
> >> right, Pseudo Plate Carrée).
> >
> > In the vision world, the conversion for "world" coordinates to pixels
>
> is
>
> > accomplished by a "camera matrix"
> >
> >     http://en.wikipedia.org/wiki/Camera_matrix
> >
> > In general this is a projective map from 3d to 2d.  The simple case
> > you're considering is a similarity transform.  The transformation
>
> from
>
> > pixel to projected coordinates is given by the inverse of the camera
> > matrix.
>
> I don't think that's what the op is interested in.  It's just 2D to 2D
> scaling and translation with some type conversion handling (int <->
> double).  I couldn't find a good explanation online but search for
> "converting screen coordinates to map coordinates" or something similar.
>  The map coordinates are always some projection as the op noticed.  It's
> basic algebra/geometry.

I certainly agree, but I was so confused by the response that I figured that 
for once I'd better keep my mouth shut.  ;-)

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From hamish_b at yahoo.com  Wed Feb  4 21:23:16 2009
From: hamish_b at yahoo.com (Hamish)
Date: Wed, 4 Feb 2009 21:23:16 -0800 (PST)
Subject: [Proj] Wikipedia ECEF entry
In-Reply-To: <49898221.95FD.00E4.0@dfg.ca.gov>
Message-ID: <124193.62752.qm@web110016.mail.gq1.yahoo.com>

Gerald wrote:
> At the moment, I have not figured out their editing operations. 
> I wanted to add to the comments about the z axis but gave up after it
> looked like I would have to spend an afternoon learning their system.
> :-(

some starting info here:
  http://grass.osgeo.org/wiki/Help:Editing

given the complication of the stuff people around here work on, I doubt
learning to use a wiki will be much of a mental strain or take an entire
weekend. It's designed from the bottom up to be simple after all. Luckily
MediaWiki (software that runs Wikipedia) is really nice to work in, in
stark contrast to many other "simplified" wiki softwares out there.

I'd be happy to help (off-list) if anyone gets stuck, as I feel it's
important that garbage is not propagated.


Clifford wrote:
> I find Wiki stuff garbage and worthless in that a knowledgeable
> entry can be changed and modified by an incompetent.

and that change can be reverted back to an earlier good version in about
15 seconds by a knowledgeable author. with justification given in the
associated "discussion" page, it becomes clear in big a hurry to the
meta-editors which author is the one that knows what they are talking about.

no doubt keeping the entries current & correct requires periodic grooming.
you can put yourself on a watch-list if you like so that you are notified
any time the page is changed and shown the lines that have changed.


I'm repeating myself, but there is a large self-interest in removing bad
information from a (like it or not) high-profile primary search point for
general information.



Hamish over&out.



      



From pieter.bosch at za.saabgroup.com  Thu Feb  5 02:31:43 2009
From: pieter.bosch at za.saabgroup.com (Pieter Bosch)
Date: Thu, 5 Feb 2009 12:31:43 +0200
Subject: [Proj] gaus-kruger projection
Message-ID: <E2B84C83ADCDE641A5B2FF714409023DCB0D77@svr-mail.GrIDS.co.za>

Hi,

 

Does anyone know if proj4's  command prompt app can do gaus-kruger
projection and if so what is the parameters to use. How would the
following statement have to change to be in Gaus-kruger.

+proj=tmerc +ellps=WGS84 +lon_0=12 +x_0=500000 

 

I've seen a pj_gauss.C file  but I cant see any abbreviation in the
projection list that identifies GAUSS-Kruger. Please help

 

Cheers

pieter

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090205/895afae0/attachment.html>

From oliver.eichler at dspsolutions.de  Thu Feb  5 02:49:34 2009
From: oliver.eichler at dspsolutions.de (Oliver Eichler)
Date: Thu, 5 Feb 2009 11:49:34 +0100
Subject: [Proj] gaus-kruger projection
In-Reply-To: <E2B84C83ADCDE641A5B2FF714409023DCB0D77@svr-mail.GrIDS.co.za>
References: <E2B84C83ADCDE641A5B2FF714409023DCB0D77@svr-mail.GrIDS.co.za>
Message-ID: <200902051149.35128.oliver.eichler@dspsolutions.de>

On Donnerstag 05 Februar 2009 11:31:43 Pieter Bosch wrote:
> Hi,
>
>
>
> Does anyone know if proj4's  command prompt app can do gaus-kruger
> projection and if so what is the parameters to use. How would the
> following statement have to change to be in Gaus-kruger.
>
> +proj=tmerc +ellps=WGS84 +lon_0=12 +x_0=500000
>
>
>
> I've seen a pj_gauss.C file  but I cant see any abbreviation in the
> projection list that identifies GAUSS-Kruger. Please help
>

"+proj=tmerc +lat_0=0 +lon_0=12 +k=1 +x_0=4500000 +y_0=0 +ellps=bessel 
+datum=potsdam +units=m +no_defs "

This is what I use for Gauss/Kruger with Potsdam datum

Oliver
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part.
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090205/5ab6a5c2/attachment.sig>

From pieter.bosch at za.saabgroup.com  Thu Feb  5 03:06:19 2009
From: pieter.bosch at za.saabgroup.com (Pieter Bosch)
Date: Thu, 5 Feb 2009 13:06:19 +0200
Subject: [Proj] gaus-kruger projection[Scanned]
Message-ID: <E2B84C83ADCDE641A5B2FF714409023DCB0D95@svr-mail.GrIDS.co.za>

Thanks for your replay . Do u know if this will also work for wgs84?

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Oliver Eichler
Sent: 05 February 2009 12:50 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] gaus-kruger projection[Scanned]

On Donnerstag 05 Februar 2009 11:31:43 Pieter Bosch wrote:
> Hi,
>
>
>
> Does anyone know if proj4's  command prompt app can do gaus-kruger
> projection and if so what is the parameters to use. How would the
> following statement have to change to be in Gaus-kruger.
>
> +proj=tmerc +ellps=WGS84 +lon_0=12 +x_0=500000
>
>
>
> I've seen a pj_gauss.C file  but I cant see any abbreviation in the
> projection list that identifies GAUSS-Kruger. Please help
>

"+proj=tmerc +lat_0=0 +lon_0=12 +k=1 +x_0=4500000 +y_0=0 +ellps=bessel 
+datum=potsdam +units=m +no_defs "

This is what I use for Gauss/Kruger with Potsdam datum

Oliver


From pieter.bosch at za.saabgroup.com  Thu Feb  5 23:44:25 2009
From: pieter.bosch at za.saabgroup.com (Pieter Bosch)
Date: Fri, 6 Feb 2009 09:44:25 +0200
Subject: [Proj] gaus-kruger projection
Message-ID: <E2B84C83ADCDE641A5B2FF714409023DCB0ED5@svr-mail.GrIDS.co.za>

 

Hi,

 

Does anyone know if proj4's  command prompt app can do gaus-kruger
projection and if so what is the parameters to use. How would the
following statement have to change to be in Gaus-kruger.

+proj=tmerc +ellps=WGS84 +lon_0=12 +x_0=500000 

 

I've seen a pj_gauss.C file  but I cant see any abbreviation in the
projection list that identifies GAUSS-Kruger. Please help

 

Cheers

pieter

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090206/9f9a07e9/attachment.html>

From support.mn at elisanet.fi  Fri Feb  6 00:55:13 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Fri, 6 Feb 2009 10:55:13 +0200 (EET)
Subject: [Proj] UTM map calibration in several zones?!?
Message-ID: <13104801.650891233910513433.JavaMail.support.mn@elisanet.fi>

I just wonder, that if a system gives UTM map calibration points in several zones so how they are going to draw that map?

I have always been assuming that a single map can only have one zone (one projection) and all reference points have to be in that zone (projection)? (Except maybe some special cases)

Regards Janne.



From support.mn at elisanet.fi  Fri Feb  6 00:58:31 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Fri, 6 Feb 2009 10:58:31 +0200 (EET)
Subject: [Proj] gaus-kruger projection
Message-ID: <14281091.651321233910712377.JavaMail.support.mn@elisanet.fi>

Hello,

I would swap the pj_tmerc.c (or what it is) to pj_gauss.c and compile it again.

It may need some additional fixing in some init areas... ??

Regards: Janne.

---------------------------------------------------

Pieter Bosch [pieter.bosch at za.saabgroup.com] kirjoitti: 
>  
> 
> Hi,
> 
>  
> 
> Does anyone know if proj4's  command prompt app can do gaus-kruger
> projection and if so what is the parameters to use. How would the
> following statement have to change to be in Gaus-kruger.
> 
> +proj=tmerc +ellps=WGS84 +lon_0=12 +x_0=500000 
> 
>  
> 
> I've seen a pj_gauss.C file  but I cant see any abbreviation in the
> projection list that identifies GAUSS-Kruger. Please help
> 
>  
> 
> Cheers
> 
> pieter
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From Mikael.Rittri at carmenta.com  Fri Feb  6 02:06:47 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Fri, 6 Feb 2009 11:06:47 +0100
Subject: [Proj] gaus-kruger projection
In-Reply-To: <14281091.651321233910712377.JavaMail.support.mn@elisanet.fi>
References: <14281091.651321233910712377.JavaMail.support.mn@elisanet.fi>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101615AB0@posty.carmenta.se>

There is no need to recompile proj.4. Gauss was a very productive guy. 
I don't think the pj_gauss.c has anything at all to do with Gauss-Kruger

projection.

My answer is: 

The projection method that is usually called "Gauss-Kruger" in 
Europe (and Asia?), is the same as the one that is usually called 
"Transverse Mercator" in USA. 

(There are also some slightly different projection methods, that should 
 have the right to be called "a kind of Transverse Mercator", but which 
 differ from Gauss-Kruger.  For example, Gauss-Schreiber.  They are 
 discussed on this list now and then, but I don't think you need them.) 

So, just use

    +proj=tmerc 

to implement what you call Gauss-Kruger. 

Pieter Bosch wrote: 
> if so, what is the parameters to use. 

If you mean the names of the parameters, they are the usual ones:

 +lat_0 // central latitude.  Often zero, but not always.
 +lon_0 // central longitude (for the central meridian).
 +k     // scale factor on the central meridian. 
 +x_0   // false easting
 +y_0   // false northing 
 +ellps // ellipsoid 
 +datum // datum (it is better to use +datum instead of +ellps, I think)

 +units // the length unit of projected coordinates
 +no_defs // I've never quite understood this one, sorry. 

I think x_0 and y_0 should normally be expressed in meters (because 
that's the length unit used for the predefined ellipsoids), even 
if +units specifies that projected coordinates are in feet, say. 

But, if you mean "what values of the parameters should I use", 
that would depend on what instance of the Gauss-Kruger projection 
that you want to implement.  You haven't told us that.  Do you have
a name for the Coordinate Reference System, or the country name and 
and a Gauss-Kruger zone number?

Best regards,
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of
support.mn at elisanet.fi
Sent: den 6 februari 2009 09:59
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] gaus-kruger projection

Hello,

I would swap the pj_tmerc.c (or what it is) to pj_gauss.c and compile it
again.

It may need some additional fixing in some init areas... ??

Regards: Janne.

---------------------------------------------------

Pieter Bosch [pieter.bosch at za.saabgroup.com] kirjoitti: 
>  
> 
> Hi,
> 
>  
> 
> Does anyone know if proj4's  command prompt app can do gaus-kruger 
> projection and if so what is the parameters to use. How would the 
> following statement have to change to be in Gaus-kruger.
> 
> +proj=tmerc +ellps=WGS84 +lon_0=12 +x_0=500000
> 
>  
> 
> I've seen a pj_gauss.C file  but I cant see any abbreviation in the 
> projection list that identifies GAUSS-Kruger. Please help
> 
>  
> 
> Cheers
> 
> pieter
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From pieter.bosch at za.saabgroup.com  Fri Feb  6 02:36:32 2009
From: pieter.bosch at za.saabgroup.com (Pieter Bosch)
Date: Fri, 6 Feb 2009 12:36:32 +0200
Subject: [Proj] gaus-kruger projection[Scanned]
Message-ID: <E2B84C83ADCDE641A5B2FF714409023DCB0F7D@svr-mail.GrIDS.co.za>

Thanks for your replay

Well I'm generating maps for the African continent with
spheroid/ellipsoid wgs84 and a datum called "Hartebeesthoek 94".  UTM
gridzone 34 is one that I will be using  -> is there a dif between gauss
zones and Utm zones?

What do you mean with "what instance of the Gauss-Kruger projection" ?
give me a example of a instance of the Gauss-Kruger projection. Pls

An example of my values 

CM =23 deg East
Datum = hartebeesthoek 94 
Ellipsoid = wgs84
UTM zone= 34J
Lat To convert= -28
Long to convert=23

As I understand (correct me if I'm wrong) there is a Lambert
Conformal(preserves the areas-I think) projection and a Gauss projection
(preserves the angles). Both of them are Transverse Mercator projections
(or a form of it) . the one is based on spherical and the latter is
based on ellipsoidal shape of the earth. So how will I know if I'm
actually using the Gauss projection . Is using wgs84(a ellipsoidal)
enough to secure this.

-----Original Message-----
From: Mikael Rittri [mailto:Mikael.Rittri at carmenta.com] 
Sent: 06 February 2009 12:07 PM
To: PROJ.4 and general Projections Discussions
Cc: Pieter Bosch
Subject: RE: [Proj] gaus-kruger projection[Scanned]

There is no need to recompile proj.4. Gauss was a very productive guy. 
I don't think the pj_gauss.c has anything at all to do with Gauss-Kruger

projection.

My answer is: 

The projection method that is usually called "Gauss-Kruger" in 
Europe (and Asia?), is the same as the one that is usually called 
"Transverse Mercator" in USA. 

(There are also some slightly different projection methods, that should 
 have the right to be called "a kind of Transverse Mercator", but which 
 differ from Gauss-Kruger.  For example, Gauss-Schreiber.  They are 
 discussed on this list now and then, but I don't think you need them.) 

So, just use

    +proj=tmerc 

to implement what you call Gauss-Kruger. 

Pieter Bosch wrote: 
> if so, what is the parameters to use. 

If you mean the names of the parameters, they are the usual ones:

 +lat_0 // central latitude.  Often zero, but not always.
 +lon_0 // central longitude (for the central meridian).
 +k     // scale factor on the central meridian. 
 +x_0   // false easting
 +y_0   // false northing 
 +ellps // ellipsoid 
 +datum // datum (it is better to use +datum instead of +ellps, I think)

 +units // the length unit of projected coordinates
 +no_defs // I've never quite understood this one, sorry. 

I think x_0 and y_0 should normally be expressed in meters (because 
that's the length unit used for the predefined ellipsoids), even 
if +units specifies that projected coordinates are in feet, say. 

But, if you mean "what values of the parameters should I use", 
that would depend on what instance of the Gauss-Kruger projection 
that you want to implement.  You haven't told us that.  Do you have
a name for the Coordinate Reference System, or the country name and 
and a Gauss-Kruger zone number?

Best regards,
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of
support.mn at elisanet.fi
Sent: den 6 februari 2009 09:59
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] gaus-kruger projection

Hello,

I would swap the pj_tmerc.c (or what it is) to pj_gauss.c and compile it
again.

It may need some additional fixing in some init areas... ??

Regards: Janne.

---------------------------------------------------

Pieter Bosch [pieter.bosch at za.saabgroup.com] kirjoitti: 
>  
> 
> Hi,
> 
>  
> 
> Does anyone know if proj4's  command prompt app can do gaus-kruger 
> projection and if so what is the parameters to use. How would the 
> following statement have to change to be in Gaus-kruger.
> 
> +proj=tmerc +ellps=WGS84 +lon_0=12 +x_0=500000
> 
>  
> 
> I've seen a pj_gauss.C file  but I cant see any abbreviation in the 
> projection list that identifies GAUSS-Kruger. Please help
> 
>  
> 
> Cheers
> 
> pieter
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From Mikael.Rittri at carmenta.com  Fri Feb  6 05:38:30 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Fri, 6 Feb 2009 14:38:30 +0100
Subject: [Proj] gauss-kruger projection
In-Reply-To: <E2B84C83ADCDE641A5B2FF714409023DCB0F7D@svr-mail.GrIDS.co.za>
References: <E2B84C83ADCDE641A5B2FF714409023DCB0F7D@svr-mail.GrIDS.co.za>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101615AFE@posty.carmenta.se>

Hello, Pieter.
 
-----Original Message-----
> From: Pieter Bosch [mailto:pieter.bosch at za.saabgroup.com] 
> Sent: den 6 februari 2009 11:37
> To: Mikael Rittri; proj at lists.maptools.org
> Subject: RE: [Proj] gaus-kruger projection[Scanned]
> 
> Thanks for your reply
>
> Well I'm generating maps for the African continent with spheroid/ellipsoid wgs84 and a datum called "Hartebeesthoek 94".  > UTM gridzone 34 is one that I will be using  

Hartebeesthoek 94 is, for almost all practical purposes, the same datum as WGS84.
The differences would be caused by contintental drift. Hartebeesthoek 94 is attached 
to the African continent, and follows it as it drifts along.  WGS84 does not. But 
the difference should be less than 1 meter or so. 

> is there a diff between gauss zones and Utm zones?

Yes, UTM zones are standardized. If someone says "UTM zone 34", 
everyone agrees what it means. The scale factor on the central meridian is 0.9996.

For Gauss-Krüger zones, the scale factor is usually 1.0 exactly, 
but there are many conflicting zone systems.
There are two different global ones (used at least in Europe and Asia), 
and many national ones as well.  So, if someone says just "Gauss-Krüger zone 4", 
you cannot really tell what they mean, without more information.

> What do you mean with "what instance of the Gauss-Kruger projection" ?
> give me a example of a instance of the Gauss-Kruger projection. Pls

Well, Gauss-Krüger is a general method to construct a map projection, 
which can be customized to be good for a particular place on Earth. 
So, by an instance, I mean one particular map grid, used for one particular
part of the word.  That is to say, +tmerc, where the parameters have 
been given concrete numerical values.  

I mean, you cannot just ask the proj list 

  "give me the numerical values for the +tmerc parameters, so that I get Gauss-Krüger".

There are an infinite number of possible numerical values, and the proj list cannot know 
which one you want!  But if you can say, for example,
    "Hartebeesthoek 94 with UTM zone 34, southern hemisphere",
or 
    "Hartebeesthoek 94 with South African Survey Grid zone 23, using South-Oriented Transverse Mercator",
that would be enough. 

The file nad/epsg, in the proj distribution, is full of instances of coordinate references systems.

> An example of my values 
> 
> CM =23 deg East
> Datum = hartebeesthoek 94
> Ellipsoid = wgs84
> UTM zone= 34J
> Lat To convert= -28
> Long to convert=23

If you look in nad/epsg, you will find 
  # WGS 84 / UTM zone 34S
  <32734> +proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs  <>

which is used for the southern hemisphere, and might be what you want. 

However, if CM means Central Meridian, note that the Central Meridian 
of UTM zone 34 is 21 deg East, not 23 deg East as you wrote. 
So, perhaps the Coordinate Reference System you want is really not 
based on a UTM projection, but is a CRS that is missing from nad/epsg:

  # Hartebeesthoek94 / Lo23
  # Unable to translate coordinate system EPSG:2050 into PROJ.4 format.

But no worries. I think the following should work: 

  +proj=tmerc +lat_0=0 +lon_0=23 +k=-1.0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs

I got the parameters from the EPSG database (www.epsg.org), except that I negated k. 
The negative sign on k ensures that the projected coordinates grow westward and southward,
as they should in the South-Oriented version of Transverse Mercator that Hartebeesthoek94 / Lo23 uses.
(However, if your map appears upside down, just remove the minus sign and try again.)  

> As I understand (correct me if I'm wrong) there is a Lambert Conformal
> (preserves the areas-I think) projection 

Yes, there is a map projection called Lambert Conformal Conic. But it preserves 
angles, not areas.  "Conformal" means angle-preserving. 

> and a Gauss projection (preserves the angles). 

Yes.

> Both of them are Transverse Mercator projections (or a form of it).

No, Lambert conformal conic is not a Transverse Mercator. 
But I do think Lambert was the first to invent a Transverse Mercator projection, 
using formulas for a spherical Earth. 

> the one is based on spherical and the latter is based on ellipsoidal shape of the earth.
 
You must be thinking of the spherical Transverse Mercator that Lambert invented. I have 
never heard that anyone uses it, these days.  

> So how will I know if I'm actually using the Gauss projection. 

I beg your pardon? If you use +proj=tmerc or +proj=utm in proj4, then I promise
that you get a Gauss-Krüger projection. (Please don't omit Krüger from the name!)
But if you are asking, how do I know what kind of coordinates my geodata file 
has, I say: ask the geodata provider.  He/she ought to know. 

> Is using wgs84(a ellipsoidal) enough to secure this.
Only if you also use +proj=tmerc or +proj=utm. Not otherwise. 

I suggest you read Furuti's site on map projections,
    http://www.progonos.com/furuti/MapProj/Normal/TOC/cartTOC.html 
After that, you can learn about geodetic datums from
    http://www.ordnancesurvey.co.uk/oswebsite/gps/information/coordinatesystemsinfo/guidecontents 

Good luck,

Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com 
 


From j.l.h.hartmann at uva.nl  Fri Feb  6 06:18:52 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri, 06 Feb 2009 15:18:52 +0100
Subject: [Proj] Lat-Lon values under different ellipsoides
In-Reply-To: <497DE731.2050206@pobox.com>
References: <786764.69535.qm@web110015.mail.gq1.yahoo.com>	<200901141204.33985.geraldi.evenden@gmail.com>	<497D9663.2040900@uva.nl>
	<497DE731.2050206@pobox.com>
Message-ID: <498C46CC.5010509@uva.nl>

As an addition, look how the British Ordnance survey solves the problem 
of converting Lat-Lon values from one ellipse to another:

" To summarise: for a simple datum change of latitude and longitude 
coordinates from datum A to datum B, first convert to Cartesian 
coordinates (formulae in annexe B) taking all ellipsoid heights as zero 
and using the ellipsoid parameters of datum A; then apply a Helmert 
transformation from datum A to datum B using equation (3); finally 
convert back to latitude and longitude using the ellipsoid parameters of 
datum B (formulae in annexe C), discarding the datum B ellipsoid height. "

This would mean that different lat-lon values for different ellipsoids 
are *derived* from projected coordinates, not the other way round, as I 
thought. I still don't get the relationship between those computed 
lat-lon values and the astronomical ones though.

Jan

Frank Warmerdam wrote:
> Jan Hartmann wrote:
>   
>> Hi,
>>
>> This is something I have long been banging my head against. I think it 
>> is a bug, but I am not sure. If I take a lat-lon value, computed on a 
>> particular ellipsoid, and convert it to the lat-lon value on another 
>> ellipsoid, I should get a different value, right? (e.g. cs2cs 
>> +proj=longlat +ellps=bessel +to +proj=longlat +ellps=WGS84). PROJ4 
>> always gives the same value, but I have an extensive list of coordinates 
>> of church towers in the Netherlands with their lat-lon values in 1850, 
>> based an a slightly smaller ellipsoid than we use nowadays, and the 
>> lat-lon of the same towers derived from our modern RD-system, based on 
>> the Bessel-ellipsoid, and without the WGS84 correction. There is a 
>> systematic difference of about 50 meters. If I do the same computation 
>> with the projected coordinates, I get the correct answer. Moreover, in 
>> that case the transformation changes when I change the 
>> ellipse-parameter, something that does not happen with lat-lon coordinates.
>>
>> So, is this a bug in PROJ? If so, can someone with geodetic experience 
>> here explain to me how people can get different lat-lon values for the 
>> same point, based on astronomical measurements?
>>     
>
> Jan,
>
> As of PROJ 4.6.0, the policy is to not attempt any conversion of lat/long
> values between coordinate systems where only an ellipsoid is given.  So, to
> get a datum shift it is now necessary to provide some sort of datum
> shift information for both the source and destination coordinate systems.
>
> This is a deliberate change of policy to avoid lots of other complaints in
> the past.
>
> I would suggest using something appropriate like +datum=potsdam for your
> Bessel data, and +datum=WGS84 instead of +ellps=WGS84.
>
> Best regards,
>   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090206/6c51a8c9/attachment.html>

From ndzinn at comcast.net  Fri Feb  6 07:01:41 2009
From: ndzinn at comcast.net (Noel Zinn)
Date: Fri, 6 Feb 2009 09:01:41 -0600
Subject: [Proj] Lat-Lon values under different ellipsoides
In-Reply-To: <498C46CC.5010509@uva.nl>
References: <786764.69535.qm@web110015.mail.gq1.yahoo.com>	<200901141204.33985.geraldi.evenden@gmail.com>	<497D9663.2040900@uva.nl><497DE731.2050206@pobox.com>
	<498C46CC.5010509@uva.nl>
Message-ID: <17FF2DF8C6C548349088C7DA44C94DB3@PowerSpec>

Jan,

 

Not derived from *projected* coordinates (i.e. 3D => 2D) at all.  The
Ordnance Survey have taken you on a tour from one 3D space (lat/lon/height)
to another 3D space (what we're calling geocentric Cartesian coordinates
X/Y/Z, also known as ECEF) and back to the original 3D space
(lat/lon/height, but referenced to a different ellipsoid).  So you've never
left three dimensions even though the Ordnance Survey suggested that you
toss datum B ellipsoid height.

 

You've previously asked about an ellipsoid switch.  If nothing happens in
the geocentric Cartesian domain (ECEF is so much easier to write!), that is,
no translations at the geocenter in X, Y or Z and no rotations about any of
these axes and no scale change, then you've *just* switched ellipsoids.
Nevertheless, the resulting change in ellipsoid height is an important clue
that you're not *on* the new ellipsoid.  Once the ellipsoid height is
tossed, the point at that lat/lon on the new ellipsoid with zero height is a
different point than that you started with.

 

Noel Zinn

 

  _____  

From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Jan Hartmann
Sent: Friday, February 06, 2009 8:19 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Lat-Lon values under different ellipsoides

 

As an addition, look how the British Ordnance survey solves the problem of
converting Lat-Lon values from one ellipse to another:

" To summarise: for a simple datum change of latitude and longitude
coordinates from datum A to datum B, first convert to Cartesian coordinates
(formulae in annexe B) taking all ellipsoid heights as zero and using the
ellipsoid parameters of datum A; then apply a Helmert transformation from
datum A to datum B using equation (3); finally convert back to latitude and
longitude using the ellipsoid parameters of datum B (formulae in annexe C),
discarding the datum B ellipsoid height. "

This would mean that different lat-lon values for different ellipsoids are
*derived* from projected coordinates, not the other way round, as I thought.
I still don't get the relationship between those computed lat-lon values and
the astronomical ones though.

Jan

Frank Warmerdam wrote: 

Jan Hartmann wrote:
  

Hi,
 
This is something I have long been banging my head against. I think it 
is a bug, but I am not sure. If I take a lat-lon value, computed on a 
particular ellipsoid, and convert it to the lat-lon value on another 
ellipsoid, I should get a different value, right? (e.g. cs2cs 
+proj=longlat +ellps=bessel +to +proj=longlat +ellps=WGS84). PROJ4 
always gives the same value, but I have an extensive list of coordinates 
of church towers in the Netherlands with their lat-lon values in 1850, 
based an a slightly smaller ellipsoid than we use nowadays, and the 
lat-lon of the same towers derived from our modern RD-system, based on 
the Bessel-ellipsoid, and without the WGS84 correction. There is a 
systematic difference of about 50 meters. If I do the same computation 
with the projected coordinates, I get the correct answer. Moreover, in 
that case the transformation changes when I change the 
ellipse-parameter, something that does not happen with lat-lon coordinates.
 
So, is this a bug in PROJ? If so, can someone with geodetic experience 
here explain to me how people can get different lat-lon values for the 
same point, based on astronomical measurements?
    

 
Jan,
 
As of PROJ 4.6.0, the policy is to not attempt any conversion of lat/long
values between coordinate systems where only an ellipsoid is given.  So, to
get a datum shift it is now necessary to provide some sort of datum
shift information for both the source and destination coordinate systems.
 
This is a deliberate change of policy to avoid lots of other complaints in
the past.
 
I would suggest using something appropriate like +datum=potsdam for your
Bessel data, and +datum=WGS84 instead of +ellps=WGS84.
 
Best regards,
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090206/df316698/attachment.html>

From cjmce at lsu.edu  Fri Feb  6 07:14:15 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 6 Feb 2009 09:14:15 -0600
Subject: [Proj] UTM map calibration in several zones?!?
References: <13104801.650891233910513433.JavaMail.support.mn@elisanet.fi>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC25F2@email002.lsu.edu>

Multiple zones of a single Grid system are often found in overlap areas.  Such is the rule rather than the exception for the U.S. Geological Survey maps of the United States with respect to the State Plane Coordinate Systems.  With respect to the military services, it is found on ALL 1:50,000 topographic maps intended to be used by NATO forces in areas of potential zone overlap.
 
Some WWII - era maps of North Africa had three, sometimes four different Grids overprinted on the same paper map.  That was the usual case with the old British Grids in which the Grid boundaries were cut along ellipsoidal loxodromes ... for Europe, too!
 
C. Mugnier
LSU

________________________________

From: proj-bounces at lists.maptools.org on behalf of support.mn at elisanet.fi
Sent: Fri 06-Feb-09 02:55
To: proj at lists.maptools.org
Subject: [Proj] UTM map calibration in several zones?!?



I just wonder, that if a system gives UTM map calibration points in several zones so how they are going to draw that map?

I have always been assuming that a single map can only have one zone (one projection) and all reference points have to be in that zone (projection)? (Except maybe some special cases)

Regards Janne.

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090206/5c0562e3/attachment.html>

From Christian.AMEIL at total.com  Fri Feb  6 10:53:58 2009
From: Christian.AMEIL at total.com (Christian AMEIL)
Date: Fri, 6 Feb 2009 19:53:58 +0100
Subject: [Proj] Christian AMEIL est absent
Message-ID: <OFE348C3D5.FCD3F684-ONC1257555.0067D17C-C1257555.0067D17C@total.com>





Je serai absent(e) du  06/02/2009 au 10/02/2009.

I am currently out of the office and will be back on the 10th of February. I can read no email
during this period. Please contact frederic.auger at total.com for anything urgent.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090206/2e739694/attachment.html>

From geraldi.evenden at gmail.com  Fri Feb  6 12:10:25 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Fri, 6 Feb 2009 15:10:25 -0500
Subject: [Proj] gaus-kruger projection
In-Reply-To: <FAF6E56B26D2044696772EBE89B1535101615AB0@posty.carmenta.se>
References: <14281091.651321233910712377.JavaMail.support.mn@elisanet.fi>
	<FAF6E56B26D2044696772EBE89B1535101615AB0@posty.carmenta.se>
Message-ID: <200902061510.25591.geraldi.evenden@gmail.com>

On Friday 06 February 2009 5:06:47 am Mikael Rittri wrote:
> There is no need to recompile proj.4. Gauss was a very productive guy.
> I don't think the pj_gauss.c has anything at all to do with Gauss-Kruger

Indeed, it does not.  pj_gauss is a conformal transformation procedure to 
transfer lat-lon from the ellipse to a sphere and is used as a part of 
projection procedures.

All notes about Gauss-Kruger being Transverse Mercator or "tmerc" are correct.

There are a lot of file names in the proj-4-x distributions that are *not* 
projections but support procedures.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From support.mn at elisanet.fi  Sat Feb  7 03:19:37 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Sat, 7 Feb 2009 13:19:37 +0200 (EET)
Subject: [Proj] UTM map calibration in several zones?!?
Message-ID: <28149394.2703311234005578432.JavaMail.support.mn@elisanet.fi>

Clifford J Mugnier [cjmce at lsu.edu] kirjoitti: 
> Multiple zones of a single Grid system are often found in overlap areas.  Such is the rule rather than the exception for the U.S. Geological Survey maps of the United States with respect to the State Plane Coordinate Systems.  With respect to the military services, it is found on ALL 1:50,000 topographic maps intended to be used by NATO forces in areas of potential zone overlap.
>  
> Some WWII - era maps of North Africa had three, sometimes four different Grids overprinted on the same paper map.  That was the usual case with the old British Grids in which the Grid boundaries were cut along ellipsoidal loxodromes ... for Europe, too!
>  

Ok. So one of the zones is used for drawing only and the others have just their grids shown on that projection.
The map is still drawn in a single projection zone. (Luckyly they have corner points inverse projected.)

Regards: Janne.



From j.l.h.hartmann at uva.nl  Sat Feb  7 07:28:46 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat, 07 Feb 2009 16:28:46 +0100
Subject: [Proj] Lat-Lon values under different ellipsoides
In-Reply-To: <17FF2DF8C6C548349088C7DA44C94DB3@PowerSpec>
References: <786764.69535.qm@web110015.mail.gq1.yahoo.com>	<200901141204.33985.geraldi.evenden@gmail.com>	<497D9663.2040900@uva.nl><497DE731.2050206@pobox.com>	<498C46CC.5010509@uva.nl>
	<17FF2DF8C6C548349088C7DA44C94DB3@PowerSpec>
Message-ID: <498DA8AE.90001@uva.nl>

Thanks Noel. It seems to be a bit more complex (they use both 3D and 2D 
transformations from appendixes B and C), but essentially you are right. 

I'm sorry to not have given the URL of this Ordnance Survey publication:

http://www.ordnancesurvey.co.uk/oswebsite/gps/docs/A_Guide_to_Coordinate_Systems_in_Great_Britain.pdf

This booklet ( I would advise everyone to print it out: it's very good) 
also answered my question about how different lat-lon values are 
computed for different Datums (p. 16). Essentially, one initial point is 
chosen with reference to the the center, orientation, size and shape of 
the chosen ellipsoid,  and with that a coordinate system is defined  in 
which all other points on the earth have unique coordinates. Different 
datums give different parameters for the initial control point, and so 
for the whole coordinate system.  I still don't get the relationship 
between these values and astronomical lat-lon values though.

This also makes clear to me a discussion on this list about the 
difference between the DATUM and ELLPS parameters in PROJ. As explained 
on p. 16 of the OS book, an ellipse has three sets of parameters: origin 
(x,y,z), rotation (around the x,y,z axes), and size (minor and major 
axes). The original ELLPS parameter only takes the third one into 
account: size, aka minor and major axis, while assuming that origin and 
rotation are the same. To transform both origin and rotation of the 
ellipsoid (but not its size), a so called Helmert transformation is 
used, needing seven parameters: three for the origin, three for the 
rotation, and one additional scale parameter (p. 32). Essentially, this 
is what the seven-number +TOWGS84 parameter in PROJ does. Also, there is 
a formula to transform both the origin and the size of the ellipsoid 
(but not the rotation): the Molodensky transformation (p. 34). I guess 
that this is the three-number +TOWGS84 parameter in PROJ, used for 
origin-translation only. There seems to be no one-for-all formula for a 
direct transformation of all three features of an ellipsoid: origin, 
rotation and size.

This may be the source of confusion in PROJ: the +ELLPS parameter 
transforms only the size of the ellipsoid, the +TOWGS84 parameter 
transforms the origin and rotation of the ellipsoid, and the +DATUM 
parameter transform all three features: origin, rotation and size. The 
+DATUM parameter is not a single transformation however: it is just 
shorthand for +ELLPS=... +TOWGS84=... Although from a mathematical and 
programming point of view there is nothing wrong with this, PROJ's 
terminology is confusing: +TOWGS84 does not transform to the WGS84 
datum: it just transforms origin and rotation between two arbitrary 
ellipsoids. To transform to the WGS84 Datum you still need the 
+ELLPS=WGS84 parameter. From a generalized point of view, the +DATUM 
parameter is unnecessary. It would be much more precise to always 
specify both the +ELLPS and the +TOWGS84 ("Helmert") parameters. I can 
understand why the DATUM solution was chosen, as almost all datum 
transforms are from and to the WGS84 datum, but it obscures the more 
general issue. Same goes for the decision to disregard the +ELLPS 
parameter in PROJ when no further DATUM information is given 
(http://lists.maptools.org/pipermail/proj/2009-January/004303.html), 
although there too I understand the immediate cause for this. And 
finally, the "nadgrids=@null"  would become superfluous with the more 
general approach: always specify two transformations for a datum shift, 
and one for an ellipsoid transformation.

I agree with Gerald Evenden on most of his remarks about the separation 
of ellipsoid and datum computations: there seems to be no complete 
analytical transformation formula for ellipsoids as there is in planar 
geometry, it is always a two-step procedure. Having said that, I 
nevertheless think that the complete procedure can be easily 
implementend within PROJ. It's more a matter of terminology than of 
mathematics.

So at last I have seen the light in this matter, although after 
considerable head-scratching. If I am wrong though, please let the list 
know. There is an enormous amount of knowledge about this matter on this 
list, and I am just a simple historian (medievalist) who happens to have 
worked a lot with old maps and had to learn something about programming 
in the meantime. I still don't know much about geodesy, but I have been 
surprised how much you need to know about the exact form of the earth 
and its geoid to get an exact georeference: that was definitely not part 
of our curriculum.  Yet, and this is a fundamental point for me, this 
precision should be aimed at. Theoretically, precisions of one to five 
meters should be possible for large scale maps, and I believe that I can 
get very far in that direction with PROJ, GDAL and the answers from this 
list. A lot of Internet cartography lacks this final precision, not only 
with historical maps, but also e.g. in the case of Google maps (there 
have been extensive discussions about Google's accuracy on this list). 
It's relatively easy to put lots and lots of maps on the Internet, but 
it is enormously difficult to get them as precise as they could (and 
should) be. Fifty meters just isn't good enough. Personally, I find it 
worthwile (and terrifically interesting) to aim at this maximum 
precision, and it will certainly pay back, but only in the long run. In 
that same long run however, much of the rubbish that is now on Internet 
can be happily thrown away.

And if someone on this list needs help with his or her medieval 
charters, I would be happy to assist :-)

Jan


Noel Zinn wrote:
>
> Jan,
>
>  
>
> Not derived from *projected* coordinates (i.e. 3D => 2D) at all.  The 
> Ordnance Survey have taken you on a tour from one 3D space 
> (lat/lon/height) to another 3D space (what we're calling geocentric 
> Cartesian coordinates X/Y/Z, also known as ECEF) and back to the 
> original 3D space (lat/lon/height, but referenced to a different 
> ellipsoid).  So you've never left three dimensions even though the 
> Ordnance Survey suggested that you toss datum B ellipsoid height.
>
>  
>
> You've previously asked about an ellipsoid switch.  If nothing happens 
> in the geocentric Cartesian domain (ECEF is so much easier to write!), 
> that is, no translations at the geocenter in X, Y or Z and no 
> rotations about any of these axes and no scale change, then you've 
> **just** switched ellipsoids.  Nevertheless, the resulting change in 
> ellipsoid height is an important clue that you're not **on** the new 
> ellipsoid.  Once the ellipsoid height is tossed, the point at that 
> lat/lon on the new ellipsoid with zero height is a different point 
> than that you started with.
>
>  
>
> Noel Zinn
>
>  
>
> ------------------------------------------------------------------------
>
> *From:* proj-bounces at lists.maptools.org 
> [mailto:proj-bounces at lists.maptools.org] *On Behalf Of *Jan Hartmann
> *Sent:* Friday, February 06, 2009 8:19 AM
> *To:* PROJ.4 and general Projections Discussions
> *Subject:* Re: [Proj] Lat-Lon values under different ellipsoides
>
>  
>
> As an addition, look how the British Ordnance survey solves the 
> problem of converting Lat-Lon values from one ellipse to another:
>
> " To summarise: for a simple datum change of latitude and longitude 
> coordinates from datum A to datum B, first convert to Cartesian 
> coordinates (formulae in annexe B) taking all ellipsoid heights as 
> zero and using the ellipsoid parameters of datum A; then apply a 
> Helmert transformation from datum A to datum B using equation (3); 
> finally convert back to latitude and longitude using the ellipsoid 
> parameters of datum B (formulae in annexe C), discarding the datum B 
> ellipsoid height. "
>
> This would mean that different lat-lon values for different ellipsoids 
> are *derived* from projected coordinates, not the other way round, as 
> I thought. I still don't get the relationship between those computed 
> lat-lon values and the astronomical ones though.
>
> Jan
>
> Frank Warmerdam wrote:
>
> Jan Hartmann wrote:
>   
>> Hi,
>>  
>> This is something I have long been banging my head against. I think it 
>> is a bug, but I am not sure. If I take a lat-lon value, computed on a 
>> particular ellipsoid, and convert it to the lat-lon value on another 
>> ellipsoid, I should get a different value, right? (e.g. cs2cs 
>> +proj=longlat +ELLPS=bessel +to +proj=longlat +ELLPS=WGS84). PROJ4 
>> always gives the same value, but I have an extensive list of coordinates 
>> of church towers in the Netherlands with their lat-lon values in 1850, 
>> based an a slightly smaller ellipsoid than we use nowadays, and the 
>> lat-lon of the same towers derived from our modern RD-system, based on 
>> the Bessel-ellipsoid, and without the WGS84 correction. There is a 
>> systematic difference of about 50 meters. If I do the same computation 
>> with the projected coordinates, I get the correct answer. Moreover, in 
>> that case the transformation changes when I change the 
>> ellipse-parameter, something that does not happen with lat-lon coordinates.
>>  
>> So, is this a bug in PROJ? If so, can someone with geodetic experience 
>> here explain to me how people can get different lat-lon values for the 
>> same point, based on astronomical measurements?
>>     
>  
> Jan,
>  
> As of PROJ 4.6.0, the policy is to not attempt any conversion of lat/long
> values between coordinate systems where only an ellipsoid is given.  So, to
> get a datum shift it is now necessary to provide some sort of datum
> shift information for both the source and destination coordinate systems.
>  
> This is a deliberate change of policy to avoid lots of other complaints in
> the past.
>  
> I would suggest using something appropriate like +datum=potsdam for your
> Bessel data, and +datum=WGS84 instead of +ELLPS=WGS84.
>  
> Best regards,
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090207/47d61e56/attachment.html>

From Christian.AMEIL at total.com  Sat Feb  7 13:02:53 2009
From: Christian.AMEIL at total.com (Christian AMEIL)
Date: Sat, 7 Feb 2009 22:02:53 +0100
Subject: [Proj] Christian AMEIL est absent
Message-ID: <OFA68ACCE7.70C11A92-ONC1257556.00739F0F-C1257556.00739F0F@total.com>





Je serai absent(e) du  07/02/2009 au 10/02/2009.

I am currently out of the office and will be back on the 11th of February. I can read no email
during this period. Please contact frederic.auger at total.com for anything urgent.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090207/3a064801/attachment.html>

From michael.hovenbitzer at bkg.bund.de  Mon Feb  9 02:26:44 2009
From: michael.hovenbitzer at bkg.bund.de (michael.hovenbitzer at bkg.bund.de)
Date: Mon, 9 Feb 2009 11:26:44 +0100
Subject: [Proj] Memory leaks using proj.4 DLL
In-Reply-To: <49806A9D.3060808@pobox.com>
References: <371BE82A03680E4087F343D5C9883D8D01A328E7@FS029EXCH.bkg><497F2D89.9020207@pobox.com><371BE82A03680E4087F343D5C9883D8D01A328EC@FS029EXCH.bkg>
	<49806A9D.3060808@pobox.com>
Message-ID: <371BE82A03680E4087F343D5C9883D8D01A328F9@FS029EXCH.bkg>

Frank,

thank you for your help !
The missing call of the function pj_deallocate_grids() 
was the reason for the memory leaks.

Best regards

Michael  

-----Ursprüngliche Nachricht-----
Von: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] Im Auftrag von Frank Warmerdam
Gesendet: Mittwoch, 28. Januar 2009 15:24
An: PROJ.4 and general Projections Discussions
Betreff: Re: [Proj] Memory leaks using proj.4 DLL

michael.hovenbitzer at bkg.bund.de wrote:
> Frank,
> 
> first of all I would like to point out, that I use the proj.dll
> in my own MFC-VisualC-Program. The call of the functions pj_init_plus()
> and pj_transform() result in memory leaks:
> 
> static const char *pgk2 = "+proj=tmerc +lat_0=0 +lon_0=6 +k=1.000000
> +x_0=2500000 +y_0=0 +ellps=bessel +nadgrids=./BETA2007.gsb +units=m +no defs" ;
> quellsys = pj_init_plus(pgk2) ;
> static const char *put32 = "+proj=utm +ellps=GRS80 +datum=WGS84 +zone=32" ;
> zielsys = pj_init_plus(put32) ;
> .....
> pj_transform (quellsys, zielsys, 1, 0, &r, &h, &z) ;
> .....
> 
> The following log of the debug mode appear :
> ....
> Detected memory leaks!
> Dumping objects ->
> {154} normal block at 0x00463BA0, 15 bytes long.
>  Data: <./BETA2007.gsb > 2E 2F 42 45 54 41 32 30 30 37 2E 67 73 62 00 
> {153} .....

Michael,

Are you calling pj_free() on all definitions created with pj_init_plus()?
Are you calling pj_deallocate_grids() before program termination?

> The DLL is working, but in most cases the coordinates
> are wrong. 
> I would be very happy, if the problem could be solved.

I'm not familiar with BETA2007.gsb, nor your coordinate systems.  Generally
it does not make sense to specify datum=WGS84 with an ellipse other than WGS84.

Perhaps you could specify what values you pass in, what values you expect,
what values you get, what your coordinate system definitions are,and why you
think they are appropriate (ie. references to the coordinate systems you are
trying to represent).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From warmerdam at pobox.com  Fri Feb 13 10:50:02 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 13 Feb 2009 13:50:02 -0500
Subject: [Proj] Projections API Reference
Message-ID: <4995C0DA.5010200@pobox.com>

Folks,

With some contributions from Markus I have started writing up more detailed
reference docs for the PROJ.4 API at:

   http://trac.osgeo.org/proj/wiki/ProjAPI

This is intended to supercede the pj_init(3) man page which was quite
incomplete.  Extensions and improvements are welcome.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From geraldi.evenden at gmail.com  Fri Feb 13 15:14:08 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Fri, 13 Feb 2009 18:14:08 -0500
Subject: [Proj] Projections API Reference
In-Reply-To: <4995C0DA.5010200@pobox.com>
References: <4995C0DA.5010200@pobox.com>
Message-ID: <200902131814.08940.geraldi.evenden@gmail.com>

On Friday 13 February 2009 1:50:02 pm Frank Warmerdam wrote:
> Folks,
>
> With some contributions from Markus I have started writing up more detailed
> reference docs for the PROJ.4 API at:
>
>    http://trac.osgeo.org/proj/wiki/ProjAPI
>
> This is intended to supercede the pj_init(3) man page which was quite
> incomplete.  Extensions and improvements are welcome.
>
> Best regards,

I notice that one of the things you completely throw away is the flexibility 
associated with using structures to define geographic and Cartesian 
coordinates.

Although, original proj and current libproj4 simply define LP as struct 
{double lam, phi} my usage of LP was expanded to include h.  By using 
stuctures, applications can adopt updates much more simply.  Similarly, XY 
simply goes to XYZ.  One can also associate ellipoid with the structure.

And for shame, you a C++ programmer an all should know better.

There is more to criticise but I don't think it is worth the effor.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From warmerdam at pobox.com  Fri Feb 13 16:49:41 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 13 Feb 2009 19:49:41 -0500
Subject: [Proj] Projections API Reference
In-Reply-To: <200902131814.08940.geraldi.evenden@gmail.com>
References: <4995C0DA.5010200@pobox.com>
	<200902131814.08940.geraldi.evenden@gmail.com>
Message-ID: <49961525.3090006@pobox.com>

Gerald I. Evenden wrote:
> On Friday 13 February 2009 1:50:02 pm Frank Warmerdam wrote:
>> Folks,
>>
>> With some contributions from Markus I have started writing up more detailed
>> reference docs for the PROJ.4 API at:
>>
>>    http://trac.osgeo.org/proj/wiki/ProjAPI
>>
>> This is intended to supercede the pj_init(3) man page which was quite
>> incomplete.  Extensions and improvements are welcome.
>>
>> Best regards,
> 
> I notice that one of the things you completely throw away is the flexibility 
> associated with using structures to define geographic and Cartesian 
> coordinates.
> 
> Although, original proj and current libproj4 simply define LP as struct 
> {double lam, phi} my usage of LP was expanded to include h.  By using 
> stuctures, applications can adopt updates much more simply. 

Gerald,

I would suggest that the way structures were used, an update to the
structures to include h would have resulted in undefined "h" values being
passed into PROJ from old applications.

 >  Similarly, XY
> simply goes to XYZ.  One can also associate ellipoid with the structure.

I'm not sure what you mean about associating an ellipsoid with the structure.

> And for shame, you a C++ programmer an all should know better.

I'm sure that C++ enthusiasts would have suggested substantially different
approaches, but I was not inclined to add a C++ dependency to PROJ.4 at
the time I was extending the API (with pj_transform() and pj_init_plus()
for instance).

I would also humble suggest that many of these points on programming
style are subjective and there is often not a right or wrong.

> There is more to criticise but I don't think it is worth the effor.

My email wasn't really a call for API criticism.  Just a pointer to
a resource, and encouragement for others to extend/correct the docs.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From geraldi.evenden at gmail.com  Mon Feb 16 07:25:03 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 16 Feb 2009 10:25:03 -0500
Subject: [Proj] cs2cs vs. proj??
Message-ID: <200902161025.03845.geraldi.evenden@gmail.com>

A question has arisen in my mind as to what is the difference between the 
programs cs2cs and proj?  What does one do that the other does not?

On the surface the names would imply that one deals with transforming data 
between datum systems, which may include projections as a suboperation, and 
the other would deal with only cartographic projections.

Obviously, as I am painfully aware, this is not the case.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From warmerdam at pobox.com  Mon Feb 16 08:04:54 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 16 Feb 2009 11:04:54 -0500
Subject: [Proj] cs2cs vs. proj??
In-Reply-To: <200902161025.03845.geraldi.evenden@gmail.com>
References: <200902161025.03845.geraldi.evenden@gmail.com>
Message-ID: <49998EA6.5050606@pobox.com>

Gerald I. Evenden wrote:
> A question has arisen in my mind as to what is the difference between the 
> programs cs2cs and proj?  What does one do that the other does not?
> 
> On the surface the names would imply that one deals with transforming data 
> between datum systems, which may include projections as a suboperation, and 
> the other would deal with only cartographic projections.

Gerald,

This is essentially the case, yes.  The cs2cs program uses the
pj_transform() functions which includes support for datum shifts,
prime meridian shifts and goes from one coordinate system to another.

The proj program on the other hand is largely unchanged from the
original, uses pj_fwd() and pj_inv() and does not support any
of the extended capabilities of pj_transform().

> Obviously, as I am painfully aware, this is not the case.

I'm not sure why you think this is not the case.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From geraldi.evenden at gmail.com  Mon Feb 16 08:57:37 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 16 Feb 2009 11:57:37 -0500
Subject: [Proj] cs2cs vs. proj??
In-Reply-To: <49998EA6.5050606@pobox.com>
References: <200902161025.03845.geraldi.evenden@gmail.com>
	<49998EA6.5050606@pobox.com>
Message-ID: <200902161157.37353.geraldi.evenden@gmail.com>

On Monday 16 February 2009 11:04:54 am Frank Warmerdam wrote:
> Gerald I. Evenden wrote:
> > A question has arisen in my mind as to what is the difference between the
> > programs cs2cs and proj?  What does one do that the other does not?
> >
> > On the surface the names would imply that one deals with transforming
> > data between datum systems, which may include projections as a
> > suboperation, and the other would deal with only cartographic
> > projections.
>
> Gerald,
>
> This is essentially the case, yes.  The cs2cs program uses the
> pj_transform() functions which includes support for datum shifts,
> prime meridian shifts and goes from one coordinate system to another.
>
> The proj program on the other hand is largely unchanged from the
> original, uses pj_fwd() and pj_inv() and does not support any
> of the extended capabilities of pj_transform().
>
> > Obviously, as I am painfully aware, this is not the case.
>
> I'm not sure why you think this is not the case.

I suspect that it is because some of the conversations are discussing the 
library as proj.

PS: the line in proj-4.4.9/man/man1/proj.1

       The geod program provides the ability to compute
       geodetic (Great Circle) computations.

should read "geodesic" and not geodetic.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From Arjan.van.Dijk at rivm.nl  Tue Feb 17 08:38:48 2009
From: Arjan.van.Dijk at rivm.nl (Arjan van Dijk)
Date: Tue, 17 Feb 2009 17:38:48 +0100
Subject: [Proj] Jacobian of transformation
Message-ID: <OFB98D85A2.5125DE29-ONC1257560.005AEEAB-C1257560.005B7129@notesmail.rivm.nl>

Hi!

I would like to know how much the coordinates of a point in one system 
will change
if I change its coordinates in another system.
Therefore I need the Jacobian dx_i/dy_j.
Can you please tell me if there is a Proj subroutine that gives the 
Jacobian?
If there is no routine that gives it already, is there a better way of 
estimating it
than via finite differences myself?

Regards,


Arjan





Disclaimer RIVM
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090217/a95083fa/attachment.html>

From Arjan.van.Dijk at rivm.nl  Tue Feb 17 11:53:03 2009
From: Arjan.van.Dijk at rivm.nl (Arjan van Dijk)
Date: Tue, 17 Feb 2009 20:53:03 +0100
Subject: [Proj] Building for and calling from g95-MinGW
Message-ID: <OFFD4A3B0C.99839462-ONC1257560.006D39FE-C1257560.006D3A17@notesmail.rivm.nl>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090217/279e2ede/attachment.html>

From geraldi.evenden at gmail.com  Tue Feb 17 12:52:17 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 17 Feb 2009 15:52:17 -0500
Subject: [Proj] Building for and calling from g95-MinGW
In-Reply-To: <OFFD4A3B0C.99839462-ONC1257560.006D39FE-C1257560.006D3A17@notesmail.rivm.nl>
References: <OFFD4A3B0C.99839462-ONC1257560.006D39FE-C1257560.006D3A17@notesmail.rivm.nl>
Message-ID: <200902171552.17277.geraldi.evenden@gmail.com>

In simple cases FORTRAN and C[++] are not too difficult to link but there is 
one issue I can't find a solution in Google searching:

How do you handle C structures in FORTRAN?  Do not include "common."

Just curious if anyone has an answer.

On Tuesday 17 February 2009 2:53:03 pm Arjan van Dijk wrote:
> Hi!
>
> I compile and run my program on linux and Windows boxes.
> Under Fortran-90 that is...
> Now I would like to use Proj. I have 2 questions about this:
>
> Question 1:
> How do I generate/download an archive file (e.g. libproj.a)
> that can be used from g95 under MinGW by just adding -lproj to the
> compile command of my program?
> The Windows binaries contain an executable and a dll, not a .a-file.
> Can I just use the linux .a-file under MinGW? I guess not.
> I downloaded the sources and called "./configure".
> This went okay. Then I tried "make", but the whole thing
> crashed... (see below this message for the rude curses it uttered)!
>
> Question 2:
> Are there any Fortran examples for using Proj?
>
> Regards,
>
>
> Arjan
>
	...


-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From Arjan.van.Dijk at rivm.nl  Tue Feb 17 14:15:01 2009
From: Arjan.van.Dijk at rivm.nl (Arjan van Dijk)
Date: Tue, 17 Feb 2009 23:15:01 +0100
Subject: [Proj] Building for and calling from g95-MinGW
In-Reply-To: <200902171552.17277.geraldi.evenden@gmail.com>
References: <OFFD4A3B0C.99839462-ONC1257560.006D39FE-C1257560.006D3A17@notesmail.rivm.nl>,
	<200902171552.17277.geraldi.evenden@gmail.com>
Message-ID: <OFB2EF35D0.6FE9FDB3-ONC1257560.007A399D-C1257560.007A39AA@notesmail.rivm.nl>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090217/7abc2f66/attachment.html>

From warmerdam at pobox.com  Tue Feb 17 14:20:18 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 17 Feb 2009 17:20:18 -0500
Subject: [Proj] Building for and calling from g95-MinGW
In-Reply-To: <OFFD4A3B0C.99839462-ONC1257560.006D39FE-C1257560.006D3A17@notesmail.rivm.nl>
References: <OFFD4A3B0C.99839462-ONC1257560.006D39FE-C1257560.006D3A17@notesmail.rivm.nl>
Message-ID: <499B3822.9020504@pobox.com>

Arjan van Dijk wrote:
> Hi!
> 
> I compile and run my program on linux and Windows boxes.
> Under Fortran-90 that is...
> Now I would like to use Proj. I have 2 questions about this:
> 
> Question 1:
> How do I generate/download an archive file (e.g. libproj.a)
> that can be used from g95 under MinGW by just adding -lproj to the
> compile command of my program?
> The Windows binaries contain an executable and a dll, not a .a-file.
> Can I just use the linux .a-file under MinGW? I guess not.
> I downloaded the sources and called "./configure".
> This went okay. Then I tried "make", but the whole thing
> crashed... (see below this message for the rude curses it uttered)!

Arjan,

I do not believe it is practical to use the proj.a file from linux
with mingw on win32.  If you have a PROJ.4 win32 .lib file, you can
just rename this to .a to use with MinGW's gcc and linker even if
the .lib file was generated with MSVC (in my experience).

> Question 2:
> Are there any Fortran examples for using Proj?

I am not aware of any.  If you are successful, I'd encourage you to add
some notes in the PROJ.4 trac wiki.

Gerald I. Evenden wrote:
 > In simple cases FORTRAN and C[++] are not too difficult to link but there is
 > one issue I can't find a solution in Google searching:
 >
 > How do you handle C structures in FORTRAN?  Do not include "common."

The XY/UV structures passed to pj_fwd() and pj_inv() can just be
passed as a REAL*8 array of size two since the structure is effectively
just an array of two doubles.

The PJ structure pointer could likely just be passed around as a
32bit integer since it is effectively opaque to application code.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From geraldi.evenden at gmail.com  Tue Feb 17 16:15:48 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 17 Feb 2009 19:15:48 -0500
Subject: [Proj] Building for and calling from g95-MinGW
In-Reply-To: <499B3822.9020504@pobox.com>
References: <OFFD4A3B0C.99839462-ONC1257560.006D39FE-C1257560.006D3A17@notesmail.rivm.nl>
	<499B3822.9020504@pobox.com>
Message-ID: <200902171915.48854.geraldi.evenden@gmail.com>

On Tuesday 17 February 2009 5:20:18 pm Frank Warmerdam wrote:
> Arjan van Dijk wrote:
	...
> Gerald I. Evenden wrote:
>  > In simple cases FORTRAN and C[++] are not too difficult to link but
>  > there is one issue I can't find a solution in Google searching:
>  >
>  > How do you handle C structures in FORTRAN?  Do not include "common."
>
> The XY/UV structures passed to pj_fwd() and pj_inv() can just be
> passed as a REAL*8 array of size two since the structure is effectively
> just an array of two doubles.

Can't remember, but there may be a "double complex"

> The PJ structure pointer could likely just be passed around as a
> 32bit integer since it is effectively opaque to application code.

Yes, as proj allocates the memory.

But I was thinking of the broader problem.  ;-)

> Best regards,



-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From Arjan.van.Dijk at rivm.nl  Wed Feb 18 00:28:46 2009
From: Arjan.van.Dijk at rivm.nl (Arjan van Dijk)
Date: Wed, 18 Feb 2009 09:28:46 +0100
Subject: [Proj] Building for and calling from g95-MinGW
In-Reply-To: <499B3822.9020504@pobox.com>
Message-ID: <OF924B1B1F.71C4405A-ONC1257561.002E58AA-C1257561.002E9463@notesmail.rivm.nl>

> I do not believe it is practical to use the proj.a file from linux
> with mingw on win32.  If you have a PROJ.4 win32 .lib file, you can
> just rename this to .a to use with MinGW's gcc and linker even if
> the .lib file was generated with MSVC (in my experience).


Where do I find a Windows .lib file? It's not in the Windows binary 
download.
And as you have seen in my message, "make" doesn't work from MinGW-MSYS.


Arjan


Disclaimer RIVM
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090218/d402ded5/attachment.html>

From Mikael.Rittri at carmenta.com  Wed Feb 18 02:48:22 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Wed, 18 Feb 2009 11:48:22 +0100
Subject: [Proj] Similar datum transforms for MGI differ too much.
Message-ID: <FAF6E56B26D2044696772EBE89B15351016B908E@posty.carmenta.se>

Hello,
here is small mystery.  We are trying to use the MGI datum in Slovenia 
(where the datum seems to be known as D48).  

First, we relied on the Sloven National Grid at http://spatialreference.org/ref/epsg/3787 , 
where the OGC WKT says 
   TOWGS84[ 577.326, 90.129, 463.919, 5.137, 1.474, 5.297, 2.4232]

However, after a while we realized that these numbers come from EPSG's 

   "MGI to WGS 84 (3)", code 1618, Area of Use: Austria, Accuracy: 1.5 m.

So, the area of use is wrong, but since Slovenia is adjacent to Austria, 
we hoped that the this transform would be fairly good in Slovenia, too. 

But we found large differences, compared to transforms designed for Slovenia. 
Among many others, EPSG gives

   "MGI to WGS 84 (5)", code 1786. Area of Use: Slovenia - onshore and offshore. Accuracy 1 m.
and
   "MGI to Slovenia 1996 (3)", code 15984. Area of Use: Slovenia - east of 14°30'E and north of 46°03'N. Accuracy: 0.5 m.
(where Slovenia 1996 is a densification of ETRS89, so it should differ less than 0.5 m from WGS84.)

We have tested these three transforms on a point on the Austrian-Sloven border, 
where all three transforms should be applicable.
The test point is at 15°E, 46.65°N.  

Testing Austrian transform "MGI to WGS 84 (3)":
C:\Program Files\FWTools2.2.8>cs2cs +proj=latlong +ellps=bessel +towgs84=577.326,90.129,463.919,5.137,1.474,5.297,2.4232 +to +proj=latlong +datum=WGS84
15dE 46.65dN
14d59'56.742"E  46d38'58.686"N 46.844

Testing transform for entire Slovenia "MGI to WGS 84 (5)":
C:\Program Files\FWTools2.2.8>cs2cs +proj=latlong +ellps=bessel +towgs84=426.9,142.6,460.1,4.91,4.49,-12.42,17.1 +to +proj=latlong +datum=WGS84
15dE 46.65dN
14d59'42.65"E   46d38'58.722"N 46.786

Testing transform for northeast Slovenia "MGI to Slovenia 1996 (3)" (remembering to negate the rotation angles):
C:\Program Files\FWTools2.2.8>cs2cs +proj=latlong +ellps=bessel +towgs84=464.939,-21.478,504.497,-0.403,4.228747,-9.954942,12.795378 +to +proj=latlong +datum=WGS84
15dE 46.65dN
14d59'42.67"E   46d38'58.724"N 47.622

I have used Ed Williams's Great Circle Calculator, http://williams.best.vwh.net/gccalc.htm , 
to determine that that the distance from the first result to the second is 299.7 meters, 
and the course from the first to the second is 270.2 degrees. 
The distance from the second to the third, though, is only about 0.4 m.

Now, since the accuracies of these transforms are 1.5 m, 1 m, and 0.5 m, according to EPSG,
and since all three transforms are applicable to my test point (as far as I understand), 
it seems mysterious that the difference can be 299.7 m between the Austrian transform and the 
Sloven transforms.  I understand that "accuracy" usually does not mean the maximal possible 
error, but even so, I wouldn't have expected a difference of more than 10 meters or so.
And to my mind, the course of 270.2 degrees is too near 270 degrees, for a random difference. 

Have I made a mistake when testing these transforms?  Or could there be an error in 
the EPSG entry "MGI to WGS 84 (3)" for Austria?  

I can add that the Sloven transforms seem to agree with Sloven test data from EuroGeographics, 
http://crs.bkg.bund.de/crs-eu/ . And the Austrian transform agrees with Austrian test data 
at the same site.  But if these test data were generated by using the published transforms, 
instead of being observed on the ground, then they will not show if a transform is wrong, 
of course.

Regards,
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com


From nhv at cape.com  Wed Feb 18 03:39:55 2009
From: nhv at cape.com (Norman Vine)
Date: Wed, 18 Feb 2009 06:39:55 -0500
Subject: [Proj] Building for and calling from g95-MinGW
In-Reply-To: <OFFD4A3B0C.99839462-ONC1257560.006D39FE-C1257560.006D3A17@notesmail.rivm.nl>
Message-ID: <20090218112322.14AD030E7C6@mrelay1.cape.com>

Arjan van Dijk writes:
>
> How do I generate/download an archive file (e.g. libproj.a) 
> that can be used from g95 under MinGW by just adding -lproj to the 
> compile command of my program?
> The Windows binaries contain an executable and a dll, not a .a-file.
> Can I just use the linux .a-file under MinGW? I guess not.
> I downloaded the sources and called "./configure".
> This went okay. Then I tried "make", but the whole thing
> crashed... (see below this message for the rude curses it uttered)!
> 
> 
> 
> $ make
> Making all in src
> c:\mingw\bin\make.exe[1]: Entering directory `e:/Proj/proj-4.6.1/src'
> c:/mingw/bin/make.exe  all-am
> make.exe[2]: Entering directory `e:/Proj/proj-4.6.1/src'
> C:/msys/1.0/bin/sh.exe ../libtool --tag=CC   --mode=compile 
> gcc -DHAVE_CONFIG_H -I. -DPROJ_LIB=\"/usr/local/share/proj\"  
>    -g -O2 -MT PJ_aeqd.lo -MD -MP -MF .deps/PJ_aeqd.Tpo -c -o 
> PJ_aeqd.lo PJ_aeqd.c
> XPJ_aeqd.Tpo -c -o PJ_aeqd.lo PJ_aeqd.lo
> libtool: compile: libobj name `PJ_aeqd.Tpo -c -o PJ_aeqd.lo 
> PJ_aeqd.lo' may not contain shell special characters.
> rm: invalid option -- c
> Try `rm --help' for more information.
> mkdir .libs
>  gcc -DHAVE_CONFIG_H -I. 
> "-DPROJ_LIB=\\/usr/local/share/proj\" -g -O2 -MT PJ_aeqd.lo 
> -MD -MP -MF .deps/PJ_aeqd.Tpo -c -o PJ_aeqd.lo PJ_aeqd.c"  
> -DDLL_EXPORT -DPIC -o .libs/PJ_aeqd.Tpo -c -o PJ_aeqd.lo PJ_aeqd.o
> gcc.exe: PJ_aeqd.o: No such file or directory
> gcc.exe: no input files
> make.exe[2]: *** [PJ_aeqd.lo] Error 1
> make.exe[2]: Leaving directory `e:/Proj/proj-4.6.1/src'
> c:\mingw\bin\make.exe[1]: *** [all] Error 2
> c:\mingw\bin\make.exe[1]: Leaving directory `e:/Proj/proj-4.6.1/src'
> c:\mingw\bin\make.exe: *** [all-recursive] Error 1

Builds fine for me


>From a MSYS shell <not a Windows Console>

Norman at LOKI /c/tmp/proj-4.6.1
$ ./configure

config.status: executing depfiles commands

Norman at LOKI /c/tmp/proj-4.6.1
$ make
Making all in src
make[1]: Entering directory `/c/tmp/proj-4.6.1/src'
make  all-am
make[2]: Entering directory `/c/tmp/proj-4.6.1/src'

.........................

/bin/sh ../libtool --tag=CC   --mode=link gcc  -g -O2   -o cs2cs.exe cs2cs.o
gen_cheb.o p_series.o libproj.la -lm 
gcc -g -O2 -o cs2cs.exe cs2cs.o gen_cheb.o p_series.o  ./.libs/libproj.a  

Norman at LOKI /c/tmp/proj-4.6.1
$ src/proj
Rel. 4.6.1, 21 August 2008
usage: proj.exe [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]


Here are the tools I used

Norman at LOKI /c/tmp/proj-4.6.1
$ gcc --version
gcc.exe (GCC) 3.4.2 (mingw-special)

Norman at LOKI /c/tmp/proj-4.6.1
$ libtool --version
ltmain.sh (GNU libtool) 1.5.24 Debian 1.5.24-1ubuntu1 (1.1220.2.456
2007/06/24 02:25:32)

Norman at LOKI /c/tmp/proj-4.6.1
$ make --version
GNU Make version 3.79.1, by Richard Stallman and Roland McGrath.
Built for i686-pc-msys



From j.l.h.hartmann at uva.nl  Wed Feb 18 04:01:00 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed, 18 Feb 2009 13:01:00 +0100
Subject: [Proj] Building for and calling from g95-MinGW
In-Reply-To: <200902171552.17277.geraldi.evenden@gmail.com>
References: <OFFD4A3B0C.99839462-ONC1257560.006D39FE-C1257560.006D3A17@notesmail.rivm.nl>
	<200902171552.17277.geraldi.evenden@gmail.com>
Message-ID: <499BF87C.4040302@uva.nl>

Long ago, I did this using named common blocks and extern C structs. Why 
won't you use named common blocks? I understand the dangers of the 
unnamed common, though.

Fortran 90 seems to have more possibilities for data representation. I 
never worked with it, but see an example at:

http://gcc.gnu.org/ml/gcc-help/2008-01/msg00170.html

Jan

Gerald I. Evenden wrote:
> In simple cases FORTRAN and C[++] are not too difficult to link but there is 
> one issue I can't find a solution in Google searching:
>
> How do you handle C structures in FORTRAN?  Do not include "common."
>
> Just curious if anyone has an answer.
>
> On Tuesday 17 February 2009 2:53:03 pm Arjan van Dijk wrote:
>   
>> Hi!
>>
>> I compile and run my program on linux and Windows boxes.
>> Under Fortran-90 that is...
>> Now I would like to use Proj. I have 2 questions about this:
>>
>> Question 1:
>> How do I generate/download an archive file (e.g. libproj.a)
>> that can be used from g95 under MinGW by just adding -lproj to the
>> compile command of my program?
>> The Windows binaries contain an executable and a dll, not a .a-file.
>> Can I just use the linux .a-file under MinGW? I guess not.
>> I downloaded the sources and called "./configure".
>> This went okay. Then I tried "make", but the whole thing
>> crashed... (see below this message for the rude curses it uttered)!
>>
>> Question 2:
>> Are there any Fortran examples for using Proj?
>>
>> Regards,
>>
>>
>> Arjan
>>
>>     
> 	...
>
>
>   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090218/f70f6e16/attachment.html>

From geraldi.evenden at gmail.com  Wed Feb 18 07:09:36 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 18 Feb 2009 10:09:36 -0500
Subject: [Proj] Building for and calling from g95-MinGW
In-Reply-To: <499BF87C.4040302@uva.nl>
References: <OFFD4A3B0C.99839462-ONC1257560.006D39FE-C1257560.006D3A17@notesmail.rivm.nl>
	<200902171552.17277.geraldi.evenden@gmail.com>
	<499BF87C.4040302@uva.nl>
Message-ID: <200902181009.36432.geraldi.evenden@gmail.com>

On Wednesday 18 February 2009 7:01:00 am Jan Hartmann wrote:
> Long ago, I did this using named common blocks and extern C structs. Why
> won't you use named common blocks? I understand the dangers of the
> unnamed common, though.
>
> Fortran 90 seems to have more possibilities for data representation. I
> never worked with it, but see an example at:
>
> http://gcc.gnu.org/ml/gcc-help/2008-01/msg00170.html
>
> Jan

My original question was not a particularly serious one and I was only 
interested if there was a trick to using FORTRAN that I was unaware of when 
dealing with C[++] structures.

I am aware of the 'common' usage and that was why I was trying to excude it 
from the conversation.  'common' is quite restrictive compared to general 
usage of passing structures and pointers through program processes.

The only other point that I would make about intermixing FORTRAN and C[++] is 
that I would only consider using C as the entry mechanism and any FORTRAN 
code would be processes called by C.

Because of my personal history of starting with machine language and then 
graduating to Balgol 58 and then Algol 60 before being sent into the 
purgatory of what I call the "Dark Ages" where I was forced to use FORTRAN 
for several years, I have a rather jaundice opinion of the language.

> Gerald I. Evenden wrote:
> > In simple cases FORTRAN and C[++] are not too difficult to link but there
> > is one issue I can't find a solution in Google searching:
> >
> > How do you handle C structures in FORTRAN?  Do not include "common."
> >
> > Just curious if anyone has an answer.
> >
> > On Tuesday 17 February 2009 2:53:03 pm Arjan van Dijk wrote:
> >> Hi!
> >>
> >> I compile and run my program on linux and Windows boxes.
> >> Under Fortran-90 that is...
> >> Now I would like to use Proj. I have 2 questions about this:
> >>
> >> Question 1:
> >> How do I generate/download an archive file (e.g. libproj.a)
> >> that can be used from g95 under MinGW by just adding -lproj to the
> >> compile command of my program?
> >> The Windows binaries contain an executable and a dll, not a .a-file.
> >> Can I just use the linux .a-file under MinGW? I guess not.
> >> I downloaded the sources and called "./configure".
> >> This went okay. Then I tried "make", but the whole thing
> >> crashed... (see below this message for the rude curses it uttered)!
> >>
> >> Question 2:
> >> Are there any Fortran examples for using Proj?
> >>
> >> Regards,
> >>
> >>
> >> Arjan
> >
> > 	...



-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From Mikael.Rittri at carmenta.com  Wed Feb 18 07:17:35 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Wed, 18 Feb 2009 16:17:35 +0100
Subject: [Proj] Similar datum transforms for MGI differ too much.
In-Reply-To: <FAF6E56B26D2044696772EBE89B15351016B908E@posty.carmenta.se>
References: <FAF6E56B26D2044696772EBE89B15351016B908E@posty.carmenta.se>
Message-ID: <FAF6E56B26D2044696772EBE89B15351016B90ED@posty.carmenta.se>

Hello again, 
I think I have had a flash of insight, but I don't have any hard evidence.
So I hope someone can confirm my theory, which is as follows: 

<theory>

The MGI datum, used in Austria and former Yugoslavia, was originally 
based on the Ferro meridian, not Greenwich.  This is the datum that 
EPSG calls "MGI (Ferro)", code 6805. 

When the mapmakers in Austria and Yugoslavia decided to adapt MGI 
to the Greenwich meridian (to get "MGI", EPSG code 6312), they used 
different values for the longitude of Ferro.  In Austria, they assumed 
that Ferro was at 
    
    17° 40' 00" West of Greenwich,

which is the value given by EPSG. But in Yugoslavia, they assumed that Ferro was at 

    17° 39' 46" West of Greenwich,

which is the value given Table 4.1, http://www.map-reading.com/ch4-1.php . 
This would mean that, although the MGI (Ferro) graticule is continuous, the
MGI (Greenwich) graticule is discontinuous at the Austrian-Sloven border.

In other words, MGI (Greenwich) is not a proper datum.  We should talk 
of Austrian MGI (Greenwich) and Yugoslavian MGI (Greenwich) as separate datums.

The results of my tests showed a difference in the MGI transforms for Austria 
and Slovenia, and I said that the difference was 299.7 meters, almost exactly 
east-west.  But expressed in longitude degrees, the difference is 14.092 arc seconds, 
which corresponds almost exactly with the 14" difference between the two Ferro longitudes.
(The remaining 0.092 arc seconds corresponds to 2 meters at this latitude, which
 can be explained by the limited accuracy of the datum transforms.)  

</theory>

So, can anyone confirm this theory? 

--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Mikael Rittri
Sent: den 18 februari 2009 11:48
To: proj at lists.maptools.org
Subject: [Proj] Similar datum transforms for MGI differ too much.

Hello,
here is small mystery.  
[-- see rest of post at http://lists.maptools.org/pipermail/proj/2009-February/004397.html --]


From support.mn at elisanet.fi  Wed Feb 18 08:24:11 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Wed, 18 Feb 2009 18:24:11 +0200 (EET)
Subject: [Proj] Similar datum transforms for MGI differ too much.
Message-ID: <14597167.3596531234974252333.JavaMail.support.mn@elisanet.fi>

Hello,

I get about the same differences using xCalc.

lon=degr(14,59,42.65)=14.99518056
lat=degr(46,38,58.722)=46.64964500
lon2=degr(14,59,56.742)=14.99909500
lat2=degr(46,38,58.686)=46.64963500

d=dist(lat2,lon2,lat,lon)=298.59269980 meters

c=cog(lat2,lon2,lat,lon)=270.21464752 degrees (almost exactly west)
c1=cog(lat,lon,lat2,lon2)=90.21180106 degrees (almost exactly east) 

Regards: Janne

---------------------------------------

Mikael Rittri [Mikael.Rittri at carmenta.com] kirjoitti: 
> Hello again, 
> I think I have had a flash of insight, but I don't have any hard evidence.
> So I hope someone can confirm my theory, which is as follows: 
> 
> <theory>
> 
> The MGI datum, used in Austria and former Yugoslavia, was originally 
> based on the Ferro meridian, not Greenwich.  This is the datum that 
> EPSG calls "MGI (Ferro)", code 6805. 
> 
> When the mapmakers in Austria and Yugoslavia decided to adapt MGI 
> to the Greenwich meridian (to get "MGI", EPSG code 6312), they used 
> different values for the longitude of Ferro.  In Austria, they assumed 
> that Ferro was at 
>     
>     17° 40' 00" West of Greenwich,
> 
> which is the value given by EPSG. But in Yugoslavia, they assumed that Ferro was at 
> 
>     17° 39' 46" West of Greenwich,
> 
> which is the value given Table 4.1, http://www.map-reading.com/ch4-1.php  
> This would mean that, although the MGI (Ferro) graticule is continuous, the
> MGI (Greenwich) graticule is discontinuous at the Austrian-Sloven border.
> 
> In other words, MGI (Greenwich) is not a proper datum.  We should talk 
> of Austrian MGI (Greenwich) and Yugoslavian MGI (Greenwich) as separate datums.
> 
> The results of my tests showed a difference in the MGI transforms for Austria 
> and Slovenia, and I said that the difference was 299.7 meters, almost exactly 
> east-west.  But expressed in longitude degrees, the difference is 14.092 arc seconds, 
> which corresponds almost exactly with the 14" difference between the two Ferro longitudes.
> (The remaining 0.092 arc seconds corresponds to 2 meters at this latitude, which
>  can be explained by the limited accuracy of the datum transforms.)  
> 
> </theory>
> 
> So, can anyone confirm this theory? 
> 
> --
> Mikael Rittri
> Carmenta AB
> SWEDEN
> www.carmenta.com
> 
> -----Original Message-----
> From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptoolsorg] On Behalf Of Mikael Rittri
> Sent: den 18 februari 2009 11:48
> To: proj at lists.maptools.org
> Subject: [Proj] Similar datum transforms for MGI differ too much.
> 
> Hello,
> here is small mystery.  
> [-- see rest of post at http://lists.maptools.org/pipermail/proj/2009-February/004397.html --]
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 



From support.mn at elisanet.fi  Wed Feb 18 08:44:24 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Wed, 18 Feb 2009 18:44:24 +0200 (EET)
Subject: [Proj] Similar datum transforms for MGI differ too much.
Message-ID: <32231805.3598111234975465533.JavaMail.support.mn@elisanet.fi>

Link to xCalc:
 
http://www.elisanet.fi/master.navigator/xCalc/
 
Janne.



From j.l.h.hartmann at uva.nl  Wed Feb 18 08:50:22 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed, 18 Feb 2009 17:50:22 +0100
Subject: [Proj] Building for and calling from g95-MinGW
In-Reply-To: <200902181009.36432.geraldi.evenden@gmail.com>
References: <OFFD4A3B0C.99839462-ONC1257560.006D39FE-C1257560.006D3A17@notesmail.rivm.nl>	<200902171552.17277.geraldi.evenden@gmail.com>	<499BF87C.4040302@uva.nl>
	<200902181009.36432.geraldi.evenden@gmail.com>
Message-ID: <499C3C4E.6000408@uva.nl>


Gerald I. Evenden wrote:
> On Wednesday 18 February 2009 7:01:00 am Jan Hartmann wrote:
>   
>> Long ago, I did this using named common blocks and extern C structs. Why
>> won't you use named common blocks? I understand the dangers of the
>> unnamed common, though.
>>
>> Fortran 90 seems to have more possibilities for data representation. I
>> never worked with it, but see an example at:
>>
>> http://gcc.gnu.org/ml/gcc-help/2008-01/msg00170.html
>>
>> Jan
>>     
>
> My original question was not a particularly serious one and I was only 
> interested if there was a trick to using FORTRAN that I was unaware of when 
> dealing with C[++] structures.
>
> I am aware of the 'common' usage and that was why I was trying to excude it 
> from the conversation.  'common' is quite restrictive compared to general 
> usage of passing structures and pointers through program processes.
>
> The only other point that I would make about intermixing FORTRAN and C[++] is 
> that I would only consider using C as the entry mechanism and any FORTRAN 
> code would be processes called by C.
>
> Because of my personal history of starting with machine language and then 
> graduating to Balgol 58 and then Algol 60 before being sent into the 
> purgatory of what I call the "Dark Ages" where I was forced to use FORTRAN 
> for several years, I have a rather jaundice opinion of the language.
>
>   
I had the singular luck to have started programming around 1980 with a 
procedural language: Simula 67, an extension of Algol 60. The nicest 
thing about it was that it had the "Class" concept, a mixture of structs 
with function, that got popular with C++ and later 5th generation 
languages like Java and Javascript, only much simpler. People *will* 
make simple concepts as complex as they can, won't they? It was really a 
beautiful language for learning purposes, and I never understood why it 
more or less disappeared. It's unbelievable how much profit I still 
have, even today, from starting off with that language, if only from not 
being tempted to use faulty programming practices. And then, I knew what 
a class was around 1980, when almost everyone was still struggling to 
debug Common Blocks, unnamed or not. It's still available on Internet I 
believe.

I only have used Fortran when nothing else would do, especially in 
linking libraries (like NAG) or with parallel computing. In my Simula 
days, a program compiled with Fortran ran three times as fast as a 
Simula program, so I translated my 3D visualisations line for line from 
Simula (or Pascal) into Fortran. They had to run in 1M of internal 
memory too (16 M if you ran them at night and used all the resources of 
the University computing center), so some kind of optimization was 
required. Funny things happen when you corrupt a common block, and send 
the code to a pen plotter. It goes absolutely haywire, and the Computing 
Center won't be amused. So I hated it! Switching array dimensions in 
multidimensional arrays when interfacing Fortran to C may seem simple 
(it is, conceptually), but *will* run you into impossibly hard to find 
bugs, like running a complete Computing Center to its knees, no matter 
how careful you are.

I really don't see any reason nowadays to program in Fortran, not even 
Fortran 90 (although I don't know that), but parallel processing. Don't 
know much about that either, but I followed a course here in Amsterdam 
at SARA computing center, and it still seems easier to optimize parallel 
programs written in Fortran than in any other language. From what I saw 
of those parallel programs (like weather forecasts) didn't look all too 
complex to me from a programming point of view, just a few differential 
equations that were repeated zillons of times. I did some user interface 
programming, and it would be fun to see that done in Fortran. Well, fun 
if you really hated the person...

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090218/3fef4853/attachment.html>

From Arjan.van.Dijk at rivm.nl  Wed Feb 18 11:02:36 2009
From: Arjan.van.Dijk at rivm.nl (Arjan van Dijk)
Date: Wed, 18 Feb 2009 20:02:36 +0100
Subject: [Proj] Building for and calling from g95-MinGW
In-Reply-To: <20090218112322.14AD030E7C6@mrelay1.cape.com>
References: <20090218112322.14AD030E7C6@mrelay1.cape.com>
Message-ID: <OFF8A9114F.767A10AC-ONC1257561.00689BE5-C1257561.00689BF4@notesmail.rivm.nl>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090218/b5ec2e18/attachment.html>

From aaron at cartopac.com  Thu Feb 19 09:20:57 2009
From: aaron at cartopac.com (Aaron Friesen)
Date: Thu, 19 Feb 2009 12:20:57 -0500
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84
Message-ID: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net>

Everyone,

I checked the archives for the past year and did not find an
answer to this.  Google did not provide me with any leads
either.

I have data in NAD83 HARN for Colorado.  I need to take the
data into the field as WGS84, update it/add to it, and get
it back as NAD83 HARN for Colorado.  The data I am collecting
has sub-foot accuracy, so "close" is not good enough.

The information on the grid files does not address the
HARN/HPGN question.

Is this type of transformation with the accuracy I need
possible with Proj?

Are HARN grid files available or are towgs84 settings defined
for the various HARN areas?

Or am I stuck looking for an alternative, commercial solution?

Thank for your assistance.

Aaron



From cjmce at lsu.edu  Thu Feb 19 10:24:35 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Thu, 19 Feb 2009 12:24:35 -0600
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84
References: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2604@email002.lsu.edu>

Mr. Friesen:
 
Such questions regarding geodetic-accuracy transformations in Colorado are best directed to the U.S. National Geodetic Survey.  NADCON indeed does have NAD83 HARNHPGN files, and can provide the necessary operations either on-line or through a download.  The same goes for current versions of CorpsCon.  Both solutions are not commercial and both are free.
 
Go to www.NOAA.NGS.gov and you'll get your problem solved for free courtesy of the U.S. Government.  A Google search will get you to the current version of CorpsCon.
 
C. Mugnier
LSU

________________________________

From: proj-bounces at lists.maptools.org on behalf of Aaron Friesen
Sent: Thu 19-Feb-09 11:20
To: proj at lists.maptools.org
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84



Everyone,

I checked the archives for the past year and did not find an
answer to this.  Google did not provide me with any leads
either.

I have data in NAD83 HARN for Colorado.  I need to take the
data into the field as WGS84, update it/add to it, and get
it back as NAD83 HARN for Colorado.  The data I am collecting
has sub-foot accuracy, so "close" is not good enough.

The information on the grid files does not address the
HARN/HPGN question.

Is this type of transformation with the accuracy I need
possible with Proj?

Are HARN grid files available or are towgs84 settings defined
for the various HARN areas?

Or am I stuck looking for an alternative, commercial solution?

Thank for your assistance.

Aaron

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090219/8de982ea/attachment.html>

From lblake at ksninc.com  Thu Feb 19 10:25:45 2009
From: lblake at ksninc.com (Landon Blake)
Date: Thu, 19 Feb 2009 10:25:45 -0800
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84
In-Reply-To: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net>
References: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net>
Message-ID: <0D544207876CDA428F17DD7EA448C192FC7B15@bailey.DOMAIN.KSNINC.PVT>

Aaron,

When you say NAD83 HARN are you using Colorado State Plane Coordinates?
Or are you dealing with lat/long values?

I don't think there isn't a huge difference between NAD83 and WGS84, but
I'd think Proj would have a conversion between the two.

If you are dealing with state plane coordinates a local surveyor can
probably point you to the conversion formulas that you need. Or you
might check with the state land surveying association in Colorado.

If you get stuck, let me know. I can bounce a message off a couple of
land surveying message boards with Colorado Surveyors listening.

Landon
Office Phone Number: (209) 946-0268
Cell Phone Number: (209) 992-0658
 
 

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Aaron Friesen
Sent: Thursday, February 19, 2009 9:21 AM
To: proj at lists.maptools.org
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84

Everyone,

I checked the archives for the past year and did not find an
answer to this.  Google did not provide me with any leads
either.

I have data in NAD83 HARN for Colorado.  I need to take the
data into the field as WGS84, update it/add to it, and get
it back as NAD83 HARN for Colorado.  The data I am collecting
has sub-foot accuracy, so "close" is not good enough.

The information on the grid files does not address the
HARN/HPGN question.

Is this type of transformation with the accuracy I need
possible with Proj?

Are HARN grid files available or are towgs84 settings defined
for the various HARN areas?

Or am I stuck looking for an alternative, commercial solution?

Thank for your assistance.

Aaron

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


Warning:
Information provided via electronic media is not guaranteed against defects including translation and transmission errors. If the reader is not the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this information in error, please notify the sender immediately.


From richard.greenwood at gmail.com  Thu Feb 19 10:42:01 2009
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Thu, 19 Feb 2009 11:42:01 -0700
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84
In-Reply-To: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net>
References: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net>
Message-ID: <ae9185aa0902191042y6052d07fx6f7a6e88bedd2e1a@mail.gmail.com>

Corpscon (http://crunch.tec.army.mil/software/corpscon/corpscon.html)
based on NADCON is a good, free, authoritative tool when working in
the US.

Regards,
Rich

On Thu, Feb 19, 2009 at 10:20 AM, Aaron Friesen <aaron at cartopac.com> wrote:
> Everyone,
>
> I checked the archives for the past year and did not find an
> answer to this.  Google did not provide me with any leads
> either.
>
> I have data in NAD83 HARN for Colorado.  I need to take the
> data into the field as WGS84, update it/add to it, and get
> it back as NAD83 HARN for Colorado.  The data I am collecting
> has sub-foot accuracy, so "close" is not good enough.
>
> The information on the grid files does not address the
> HARN/HPGN question.
>
> Is this type of transformation with the accuracy I need
> possible with Proj?
>
> Are HARN grid files available or are towgs84 settings defined
> for the various HARN areas?
>
> Or am I stuck looking for an alternative, commercial solution?
>
> Thank for your assistance.
>
> Aaron
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From lblake at ksninc.com  Thu Feb 19 11:22:07 2009
From: lblake at ksninc.com (Landon Blake)
Date: Thu, 19 Feb 2009 11:22:07 -0800
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84
In-Reply-To: <ae9185aa0902191042y6052d07fx6f7a6e88bedd2e1a@mail.gmail.com>
References: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net>
	<ae9185aa0902191042y6052d07fx6f7a6e88bedd2e1a@mail.gmail.com>
Message-ID: <0D544207876CDA428F17DD7EA448C192FC7B2A@bailey.DOMAIN.KSNINC.PVT>

I'd be careful using something like Corpscon for data that is sub-foot
accuracy and needs to stay that way.

We wouldn't use that program or any like it to convert data that needs
to be that accurate. I don't know what the purpose of Aaron's data
conversion is, but he might need to be careful.

Transforming the location of gopher holes using Corpscon is one thing.
Transforming building corner positions, or the alignment of a new
pipeline with Corpscon is another thing entirely.

Landon
Office Phone Number: (209) 946-0268
Cell Phone Number: (209) 992-0658
 
 

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Richard Greenwood
Sent: Thursday, February 19, 2009 10:42 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] How to transform between NAD83 HARN/HPGN and WGS84

Corpscon (http://crunch.tec.army.mil/software/corpscon/corpscon.html)
based on NADCON is a good, free, authoritative tool when working in
the US.

Regards,
Rich

On Thu, Feb 19, 2009 at 10:20 AM, Aaron Friesen <aaron at cartopac.com>
wrote:
> Everyone,
>
> I checked the archives for the past year and did not find an
> answer to this.  Google did not provide me with any leads
> either.
>
> I have data in NAD83 HARN for Colorado.  I need to take the
> data into the field as WGS84, update it/add to it, and get
> it back as NAD83 HARN for Colorado.  The data I am collecting
> has sub-foot accuracy, so "close" is not good enough.
>
> The information on the grid files does not address the
> HARN/HPGN question.
>
> Is this type of transformation with the accuracy I need
> possible with Proj?
>
> Are HARN grid files available or are towgs84 settings defined
> for the various HARN areas?
>
> Or am I stuck looking for an alternative, commercial solution?
>
> Thank for your assistance.
>
> Aaron
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


Warning:
Information provided via electronic media is not guaranteed against defects including translation and transmission errors. If the reader is not the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this information in error, please notify the sender immediately.


From cjmce at lsu.edu  Thu Feb 19 12:46:53 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Thu, 19 Feb 2009 14:46:53 -0600
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84
References: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net><ae9185aa0902191042y6052d07fx6f7a6e88bedd2e1a@mail.gmail.com>
	<0D544207876CDA428F17DD7EA448C192FC7B2A@bailey.DOMAIN.KSNINC.PVT>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2606@email002.lsu.edu>

The analogies are incomprehensible as offered.  CorpsCon performs State Plane and UTM transformations to better than a tenth of a millimeter round-trip accuracy.  The datum transformations are kosher NGS NADCON in that they use the original NGS data files.  There is no better tool available other than re-computing an entire original traverse on another datum using the new endpoint coordinates.
 
NADCON is the official method to transform among the U.S. North American Datums as published in the Federal Register.  CorpsCon was written by the U.S. Army Topographic Engineering Center and uses the original NADCON data files as developed by Cdr. Warren Dewhust of the U.S. National Geodetic Survey.  TEC used NGS 5 as the authoritative source for the equations for the State Plane Coordinate Systems as also declared and published in the Federal Register.
 
Whether transforming gopher holes or tiepoints for a nuclear reactor, there is no better transformation package available.
 
C. Mugnier
LSU

________________________________

From: proj-bounces at lists.maptools.org on behalf of Landon Blake
Sent: Thu 19-Feb-09 13:22
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] How to transform between NAD83 HARN/HPGN and WGS84



I'd be careful using something like Corpscon for data that is sub-foot
accuracy and needs to stay that way.

We wouldn't use that program or any like it to convert data that needs
to be that accurate. I don't know what the purpose of Aaron's data
conversion is, but he might need to be careful.

Transforming the location of gopher holes using Corpscon is one thing.
Transforming building corner positions, or the alignment of a new
pipeline with Corpscon is another thing entirely.

Landon
Office Phone Number: (209) 946-0268
Cell Phone Number: (209) 992-0658



-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Richard Greenwood
Sent: Thursday, February 19, 2009 10:42 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] How to transform between NAD83 HARN/HPGN and WGS84

Corpscon (http://crunch.tec.army.mil/software/corpscon/corpscon.html)
based on NADCON is a good, free, authoritative tool when working in
the US.

Regards,
Rich

On Thu, Feb 19, 2009 at 10:20 AM, Aaron Friesen <aaron at cartopac.com>
wrote:
> Everyone,
>
> I checked the archives for the past year and did not find an
> answer to this.  Google did not provide me with any leads
> either.
>
> I have data in NAD83 HARN for Colorado.  I need to take the
> data into the field as WGS84, update it/add to it, and get
> it back as NAD83 HARN for Colorado.  The data I am collecting
> has sub-foot accuracy, so "close" is not good enough.
>
> The information on the grid files does not address the
> HARN/HPGN question.
>
> Is this type of transformation with the accuracy I need
> possible with Proj?
>
> Are HARN grid files available or are towgs84 settings defined
> for the various HARN areas?
>
> Or am I stuck looking for an alternative, commercial solution?
>
> Thank for your assistance.
>
> Aaron
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



--
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


Warning:
Information provided via electronic media is not guaranteed against defects including translation and transmission errors. If the reader is not the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this information in error, please notify the sender immediately.
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090219/ce227c9c/attachment.html>

From lblake at ksninc.com  Thu Feb 19 13:25:47 2009
From: lblake at ksninc.com (Landon Blake)
Date: Thu, 19 Feb 2009 13:25:47 -0800
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC2606@email002.lsu.edu>
References: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net><ae9185aa0902191042y6052d07fx6f7a6e88bedd2e1a@mail.gmail.com><0D544207876CDA428F17DD7EA448C192FC7B2A@bailey.DOMAIN.KSNINC.PVT>
	<B597ADFC46B67741B18EA6AA13613FF7EC2606@email002.lsu.edu>
Message-ID: <0D544207876CDA428F17DD7EA448C192FC7B44@bailey.DOMAIN.KSNINC.PVT>

Professor,

 

I didn't intend to imply that a better transformation package existed. I
was speaking about "recomputing an entire original traverse on another
datum", but I didn't make that clear.

 

I was recommending that one consider the purpose of the data
transformation before deciding to use ANY transformation package. If I
was building a nuclear reactor I would want to perform field surveys to
tie into local survey control.

 

Aaron is probably fine using CopsCon. I just get nervous when I hear
"sub-foot" accuracy. Usually when you are dealing with coordinates at
that level of accuracy you are leaving the GIS arena and entering an
arena that demands field work to reference local control on the ground.

 

I apologize for the confusion.

 

Landon

Office Phone Number: (209) 946-0268

Cell Phone Number: (209) 992-0658

 

 

________________________________

From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Clifford J Mugnier
Sent: Thursday, February 19, 2009 12:47 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] How to transform between NAD83 HARN/HPGN and WGS84

 

The analogies are incomprehensible as offered.  CorpsCon performs State
Plane and UTM transformations to better than a tenth of a millimeter
round-trip accuracy.  The datum transformations are kosher NGS NADCON in
that they use the original NGS data files.  There is no better tool
available other than re-computing an entire original traverse on another
datum using the new endpoint coordinates.

 

NADCON is the official method to transform among the U.S. North American
Datums as published in the Federal Register.  CorpsCon was written by
the U.S. Army Topographic Engineering Center and uses the original
NADCON data files as developed by Cdr. Warren Dewhust of the U.S.
National Geodetic Survey.  TEC used NGS 5 as the authoritative source
for the equations for the State Plane Coordinate Systems as also
declared and published in the Federal Register.

 

Whether transforming gopher holes or tiepoints for a nuclear reactor,
there is no better transformation package available.

 

C. Mugnier

LSU

 

________________________________

From: proj-bounces at lists.maptools.org on behalf of Landon Blake
Sent: Thu 19-Feb-09 13:22
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] How to transform between NAD83 HARN/HPGN and WGS84

I'd be careful using something like Corpscon for data that is sub-foot
accuracy and needs to stay that way.

We wouldn't use that program or any like it to convert data that needs
to be that accurate. I don't know what the purpose of Aaron's data
conversion is, but he might need to be careful.

Transforming the location of gopher holes using Corpscon is one thing.
Transforming building corner positions, or the alignment of a new
pipeline with Corpscon is another thing entirely.

Landon
Office Phone Number: (209) 946-0268
Cell Phone Number: (209) 992-0658



-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Richard Greenwood
Sent: Thursday, February 19, 2009 10:42 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] How to transform between NAD83 HARN/HPGN and WGS84

Corpscon (http://crunch.tec.army.mil/software/corpscon/corpscon.html)
based on NADCON is a good, free, authoritative tool when working in
the US.

Regards,
Rich

On Thu, Feb 19, 2009 at 10:20 AM, Aaron Friesen <aaron at cartopac.com>
wrote:
> Everyone,
>
> I checked the archives for the past year and did not find an
> answer to this.  Google did not provide me with any leads
> either.
>
> I have data in NAD83 HARN for Colorado.  I need to take the
> data into the field as WGS84, update it/add to it, and get
> it back as NAD83 HARN for Colorado.  The data I am collecting
> has sub-foot accuracy, so "close" is not good enough.
>
> The information on the grid files does not address the
> HARN/HPGN question.
>
> Is this type of transformation with the accuracy I need
> possible with Proj?
>
> Are HARN grid files available or are towgs84 settings defined
> for the various HARN areas?
>
> Or am I stuck looking for an alternative, commercial solution?
>
> Thank for your assistance.
>
> Aaron
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



--
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


Warning:
Information provided via electronic media is not guaranteed against
defects including translation and transmission errors. If the reader is
not the intended recipient, you are hereby notified that any
dissemination, distribution or copying of this communication is strictly
prohibited. If you have received this information in error, please
notify the sender immediately.
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090219/ad7daaaa/attachment.html>

From support.mn at elisanet.fi  Thu Feb 19 18:59:23 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Fri, 20 Feb 2009 04:59:23 +0200 (EET)
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84
Message-ID: <22018305.3732991235098764851.JavaMail.support.mn@elisanet.fi>

Hello,

normal datums usually give you an accuracy of some meters best. If you want to get to sub feet accuracy you usually have to adjust your maps additional to that.

regards: Janne.

------------------------------------------------------

Aaron Friesen [aaron at cartopac.com] kirjoitti: 
> Everyone,
> 
> I checked the archives for the past year and did not find an
> answer to this.  Google did not provide me with any leads
> either.
> 
> I have data in NAD83 HARN for Colorado.  I need to take the
> data into the field as WGS84, update it/add to it, and get
> it back as NAD83 HARN for Colorado.  The data I am collecting
> has sub-foot accuracy, so "close" is not good enough.
> 
> The information on the grid files does not address the
> HARN/HPGN question.
> 
> Is this type of transformation with the accuracy I need
> possible with Proj?
> 
> Are HARN grid files available or are towgs84 settings defined
> for the various HARN areas?
> 
> Or am I stuck looking for an alternative, commercial solution?
> 
> Thank for your assistance.
> 
> Aaron
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 



From Mikael.Rittri at carmenta.com  Fri Feb 20 02:24:17 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Fri, 20 Feb 2009 11:24:17 +0100
Subject: [Proj] Similar datum transforms for MGI differ too much.
In-Reply-To: <FAF6E56B26D2044696772EBE89B15351016B90ED@posty.carmenta.se>
References: <FAF6E56B26D2044696772EBE89B15351016B908E@posty.carmenta.se>
	<FAF6E56B26D2044696772EBE89B15351016B90ED@posty.carmenta.se>
Message-ID: <FAF6E56B26D2044696772EBE89B15351016B9235@posty.carmenta.se>

Hello,
I think I have found confirmation for my theory on Wikipedia:

> According to the European longitude adjustment of Theodor Albrecht 
> (ca. 1890) the Ferro meridian is 17° 39' 46.02" west of the Greenwich meridian. 
> But for the geodetic networks of Austria, Germany and Czechoslovakia, the 
> value 17° 40' 00" was adopted in the 1920s ... 
> For the geodetic networks of Hungary and Yugoslavia, the value of 
> Albrecht was used prior to the switch to the Greenwich prime meridian.
( http://en.wikipedia.org/wiki/El_Hierro#The_.22Meridian_Island.22 ) 

That Albrecht's value is used in Yugoslavia, is also confirmed by the 
University of Pittsburgh: http://corona.eps.pitt.edu/Website/yugoslavia.html 
(except that they say 17° 39' 36", but I think the 36" must be a typo 
and 46" was intended). 

So, the MGI (Ferro) datum was surveyed in the Austro-Hungarian Empire 
in the 1800s, and covered what is now Austria and former Yugoslavia.  
This was a single, continuous geodetic datum. 

But when Greenwich replaced Ferro as the prime meridian in the 1920s, 
Yugoslavia was politically (and geodetically) independent from Austria, 
so the countries used different values for the Ferro longitude.  A "Ferro curtain"
was lowered between Austria and Yugoslavia, so that MGI (Greenwich) in Austria
differs from MGI (Greenwich) in Yugoslavia by 14 arc seconds of longitude (or
possibly only 13.98 arc seconds).  

I think it is wrong of EPSG to say that MGI (Greenwich) is a single datum that 
covers Austria and former Yugoslavia. A datum can have distortions, but an 
abrupt 300 meter discontinuity at a political boundary...?

Anyway, if a datum shift is intended for MGI in Austria, but is used for MGI 
in former Yugoslavia, the results are wrong by about 300 meters.  This means 
that the current TOWGS84 parameters are bad in the OGC WKT on the following 
pages on www.spatialreference.org : 

   MGI / Balkans zone 5, EPSG:31275, http://www.spatialreference.org/ref/epsg/31275 

   MGI / Balkans zone 6, EPSG:31276, http://www.spatialreference.org/ref/epsg/31276  

   MGI / Balkans zone 7, EPSG:31277, http://www.spatialreference.org/ref/epsg/31277 

   MGI / Balkans zone 8, EPSG:31278, http://www.spatialreference.org/ref/epsg/31278

   MGI / Slovenia Grid, EPSG:2170, http://www.spatialreference.org/ref/epsg/2170

   MGI / Sloven National Grid, EPSG:3787,  http://www.spatialreference.org/ref/epsg/2170

Because they use TOWGS84 parameters that are intended for MGI in Austria.
Also, the OGC WKT for 

   MGI, EPSG:4312, http://www.spatialreference.org/ref/epsg/4312

does the same thing, so it can be used only in Austria. 
And the OGC WKT for 

   MGI (Ferro), EPSG:4805, http://www.spatialreference.org/ref/epsg/4805 

gives the rounded value for the longitude of Ferro, which is used only in Austria.

EPSG suggests some good datums shifts for MGI in former Yugoslavia. 
However, note that EPSG's general "MGI (Ferro) to MGI (1)" datum shift, code 1757, 
uses the rounded value of the Ferro longitude, so it is applicable only in Austria,
not in former Yugoslavia as EPSG claims. 

I wonder if there are other European datums that have been divided by the "Ferro curtain"? 
 
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Mikael Rittri
Sent: den 18 februari 2009 16:18
To: PROJ.4 and general Projections Discussions
Cc: kundenservice at bev.gv.at; info at bev.gv.at; tomaz.petek at gov.si
Subject: Re: [Proj] Similar datum transforms for MGI differ too much.

Hello again,
I think I have had a flash of insight, but I don't have any hard evidence.
So I hope someone can confirm my theory, which is as follows: 

<theory>

The MGI datum, used in Austria and former Yugoslavia, was originally based on the Ferro meridian, not Greenwich.  This is the datum that EPSG calls "MGI (Ferro)", code 6805. 

When the mapmakers in Austria and Yugoslavia decided to adapt MGI to the Greenwich meridian (to get "MGI", EPSG code 6312), they used different values for the longitude of Ferro.  In Austria, they assumed that Ferro was at 
    
    17° 40' 00" West of Greenwich,

which is the value given by EPSG. But in Yugoslavia, they assumed that Ferro was at 

    17° 39' 46" West of Greenwich,

which is the value given Table 4.1, http://www.map-reading.com/ch4-1.php . 
This would mean that, although the MGI (Ferro) graticule is continuous, the MGI (Greenwich) graticule is discontinuous at the Austrian-Sloven border.

In other words, MGI (Greenwich) is not a proper datum.  We should talk of Austrian MGI (Greenwich) and Yugoslavian MGI (Greenwich) as separate datums.

The results of my tests showed a difference in the MGI transforms for Austria and Slovenia, and I said that the difference was 299.7 meters, almost exactly east-west.  But expressed in longitude degrees, the difference is 14.092 arc seconds, which corresponds almost exactly with the 14" difference between the two Ferro longitudes.
(The remaining 0.092 arc seconds corresponds to 2 meters at this latitude, which  can be explained by the limited accuracy of the datum transforms.)  

</theory>

So, can anyone confirm this theory? 

--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Mikael Rittri
Sent: den 18 februari 2009 11:48
To: proj at lists.maptools.org
Subject: [Proj] Similar datum transforms for MGI differ too much.

Hello,
here is small mystery.  
[-- see rest of post at http://lists.maptools.org/pipermail/proj/2009-February/004397.html --] _______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From aaron at cartopac.com  Fri Feb 20 11:30:52 2009
From: aaron at cartopac.com (Aaron Friesen)
Date: Fri, 20 Feb 2009 14:30:52 -0500
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC2604@email002.lsu.edu>
References: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net>
	<B597ADFC46B67741B18EA6AA13613FF7EC2604@email002.lsu.edu>
Message-ID: <90200BC582E4FF488816D357540C1D4D12F3C43654@VMBX103.ihostexchange.net>

Thank you all for your initial responses...

===== Short follow-up =====

A short follow-up question for those that don't want to read my
long-winded follow-up below:

Do either NADCON or CorpsCon provide datum transforms between a
given NAD83 and WGS84?  The websites seem to indicate that they
are only for transforms among various NAD datums and I do not
know of a NAD83 variant that is truly assumed to be equivalent
to WGS84/ITRF00.  Please correct me if I am wrong on that.

Thanks again,

Aaron

===== Long-winded follow-up that you may want to ignore =====

Hopefully, you do not mind continuing the thread.  I am responding
to multiple people in this message, hoping to keep the thread more
coherent.

Due to non-disclosure limitations, my original description of my needs
only indicated Colorado as a location under NAD83 HARN, thinking I might
be able to extrapolate responses to a more general solution.  I apologize
if I wasted your time with my original query.

Let me expand a bit and re-emphasize one point that seems to not have
been addressed (i.e., conversion to/from WGS84).

I will be working with data originating in various parts of the US.
The data represents various assets in the field where sub-foot accuracy 
is important (or claimed to be important).  The first assumption is that 
existing data has the accuracy it claims to have.  The second assumption 
is that existing data is in the datum it claims to be in.  Both of these 
assumptions may be incorrect, but need to be assumed to be true for this 
discussion.

For existing data, I need to be able to go to the field and locate that 
asset within the combined error of the original reading and the current 
reading from the GPS device used to locate the asset.  For new assets, I 
need to be able to take a reading and add that information to the data set.  
All GPS field readings for this discussion can be assumed to have sub-foot 
accuracy.  If they do not, that is an issue between me and the GPS 
manufacturer claiming such accuracy.  In any case, we are still talking
sub-foot mapping grade GPS, not sub-centimeter survey grade.

The data starts out in various projections (some in State Plane, some
in UTM, some living its entire life as lat/long).  I would also like to
assume that any projection does not add significant error.  Yes, another
assumption that may or may not be valid, but for now...

The problem is that these various data-sets are in various NAD83 incarnations,
and to take the data into the field or bring back new data from the field, one
or more datum transforms are necessary, getting it to WGS84 and back retaining
its original sub-foot accuracy.

The transform to WGS84 seems to be the point not directly addressed.  At least
I did not see it that way.  For sub-foot work, the old assumption of NAD83==WGS84
doesn't do it.

> From: C. Mugnier
> 
> Such questions regarding geodetic-accuracy transformations in Colorado
> are best directed to the U.S. National Geodetic Survey.  NADCON indeed
> does have NAD83 HARNHPGN files, and can provide the necessary
> operations either on-line or through a download.  The same goes for
> current versions of CorpsCon.  Both solutions are not commercial and
> both are free.
> 
> Go to www.NOAA.NGS.gov and you'll get your problem solved for free
> courtesy of the U.S. Government.  A Google search will get you to the
> current version of CorpsCon.

Both NADCON and CorpsCon descriptions talk of conversion between various
incarnations of NAD83, but neither seems to address the transform to/from
WGS84/ITRF00.

> From: Landon Blake
> 
> When you say NAD83 HARN are you using Colorado State Plane Coordinates?
> Or are you dealing with lat/long values?

All lat/long WGS84 in the field.

> I don't think there isn't a huge difference between NAD83 and WGS84,
> but
> I'd think Proj would have a conversion between the two.

Depending on the NAD83 incarnation, NAD83 to WGS84 can differ by several
meters.  Much of the Proj documentation implies that Proj does a null
transformation for NAD83 to WGS84 by default.  That may or may not be
true, but the documentation seems to imply it.

With the +towgs84 switch, I might be able to over-ride that, but I'm not
sure this is sufficient to meet my sub-foot requirements and cannot find
any information on what those parameters might be for a given transform.

> If you are dealing with state plane coordinates a local surveyor can
> probably point you to the conversion formulas that you need. Or you
> might check with the state land surveying association in Colorado.
> 
> If you get stuck, let me know. I can bounce a message off a couple of
> land surveying message boards with Colorado Surveyors listening.

I'm hoping to find a single conversion package (or at least a small
set) to address this problem in the general case.

> I'd be careful using something like Corpscon for data that is sub-foot
> accuracy and needs to stay that way.
> 
> We wouldn't use that program or any like it to convert data that needs
> to be that accurate. I don't know what the purpose of Aaron's data
> conversion is, but he might need to be careful.
> 
> Transforming the location of gopher holes using Corpscon is one thing.
> Transforming building corner positions, or the alignment of a new
> pipeline with Corpscon is another thing entirely.

My needs are closer to the pipeline example than the gopher hole one.

> From: Rich Greenwood
> 
> Corpscon (http://crunch.tec.army.mil/software/corpscon/corpscon.html)
> based on NADCON is a good, free, authoritative tool when working in
> the US.

(Sorry for the repeat) But neither Corpscon nor NADCON seem to be able
to get me to WGS84.

> From: Landon Blake
>
> I was recommending that one consider the purpose of the data
> transformation before deciding to use ANY transformation package. If I
> was building a nuclear reactor I would want to perform field surveys to
> tie into local survey control.
> 
> Aaron is probably fine using CopsCon. I just get nervous when I hear
> "sub-foot" accuracy. Usually when you are dealing with coordinates at
> that level of accuracy you are leaving the GIS arena and entering an
> arena that demands field work to reference local control on the ground.

Rest assured, no nuclear reactors are in the works.  I understand what
you are saying.  Many times, I deal with highly-precise but very inaccurate
data, with GPS readings recorded down to 7 or more decimal places from a
consumer grade device with only 30 meter accuracy.

Thanks again,

Aaron


From cjmce at lsu.edu  Fri Feb 20 12:32:15 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 20 Feb 2009 14:32:15 -0600
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84
References: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net><B597ADFC46B67741B18EA6AA13613FF7EC2604@email002.lsu.edu>
	<90200BC582E4FF488816D357540C1D4D12F3C43654@VMBX103.ihostexchange.net>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2607@email002.lsu.edu>

The NGS website also has the transformation parameters from the various NAD versions to the current WGS84/ITRF.
 
C. Mugnier
LSU

________________________________

From: proj-bounces at lists.maptools.org on behalf of Aaron Friesen
Sent: Fri 20-Feb-09 13:30
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] How to transform between NAD83 HARN/HPGN and WGS84



Thank you all for your initial responses...

===== Short follow-up =====

A short follow-up question for those that don't want to read my
long-winded follow-up below:

Do either NADCON or CorpsCon provide datum transforms between a
given NAD83 and WGS84?  The websites seem to indicate that they
are only for transforms among various NAD datums and I do not
know of a NAD83 variant that is truly assumed to be equivalent
to WGS84/ITRF00.  Please correct me if I am wrong on that.

Thanks again,

Aaron

===== Long-winded follow-up that you may want to ignore =====

Hopefully, you do not mind continuing the thread.  I am responding
to multiple people in this message, hoping to keep the thread more
coherent.

Due to non-disclosure limitations, my original description of my needs
only indicated Colorado as a location under NAD83 HARN, thinking I might
be able to extrapolate responses to a more general solution.  I apologize
if I wasted your time with my original query.

Let me expand a bit and re-emphasize one point that seems to not have
been addressed (i.e., conversion to/from WGS84).

I will be working with data originating in various parts of the US.
The data represents various assets in the field where sub-foot accuracy
is important (or claimed to be important).  The first assumption is that
existing data has the accuracy it claims to have.  The second assumption
is that existing data is in the datum it claims to be in.  Both of these
assumptions may be incorrect, but need to be assumed to be true for this
discussion.

For existing data, I need to be able to go to the field and locate that
asset within the combined error of the original reading and the current
reading from the GPS device used to locate the asset.  For new assets, I
need to be able to take a reading and add that information to the data set. 
All GPS field readings for this discussion can be assumed to have sub-foot
accuracy.  If they do not, that is an issue between me and the GPS
manufacturer claiming such accuracy.  In any case, we are still talking
sub-foot mapping grade GPS, not sub-centimeter survey grade.

The data starts out in various projections (some in State Plane, some
in UTM, some living its entire life as lat/long).  I would also like to
assume that any projection does not add significant error.  Yes, another
assumption that may or may not be valid, but for now...

The problem is that these various data-sets are in various NAD83 incarnations,
and to take the data into the field or bring back new data from the field, one
or more datum transforms are necessary, getting it to WGS84 and back retaining
its original sub-foot accuracy.

The transform to WGS84 seems to be the point not directly addressed.  At least
I did not see it that way.  For sub-foot work, the old assumption of NAD83==WGS84
doesn't do it.

> From: C. Mugnier
>
> Such questions regarding geodetic-accuracy transformations in Colorado
> are best directed to the U.S. National Geodetic Survey.  NADCON indeed
> does have NAD83 HARNHPGN files, and can provide the necessary
> operations either on-line or through a download.  The same goes for
> current versions of CorpsCon.  Both solutions are not commercial and
> both are free.
>
> Go to www.NOAA.NGS.gov and you'll get your problem solved for free
> courtesy of the U.S. Government.  A Google search will get you to the
> current version of CorpsCon.

Both NADCON and CorpsCon descriptions talk of conversion between various
incarnations of NAD83, but neither seems to address the transform to/from
WGS84/ITRF00.

> From: Landon Blake
>
> When you say NAD83 HARN are you using Colorado State Plane Coordinates?
> Or are you dealing with lat/long values?

All lat/long WGS84 in the field.

> I don't think there isn't a huge difference between NAD83 and WGS84,
> but
> I'd think Proj would have a conversion between the two.

Depending on the NAD83 incarnation, NAD83 to WGS84 can differ by several
meters.  Much of the Proj documentation implies that Proj does a null
transformation for NAD83 to WGS84 by default.  That may or may not be
true, but the documentation seems to imply it.

With the +towgs84 switch, I might be able to over-ride that, but I'm not
sure this is sufficient to meet my sub-foot requirements and cannot find
any information on what those parameters might be for a given transform.

> If you are dealing with state plane coordinates a local surveyor can
> probably point you to the conversion formulas that you need. Or you
> might check with the state land surveying association in Colorado.
>
> If you get stuck, let me know. I can bounce a message off a couple of
> land surveying message boards with Colorado Surveyors listening.

I'm hoping to find a single conversion package (or at least a small
set) to address this problem in the general case.

> I'd be careful using something like Corpscon for data that is sub-foot
> accuracy and needs to stay that way.
>
> We wouldn't use that program or any like it to convert data that needs
> to be that accurate. I don't know what the purpose of Aaron's data
> conversion is, but he might need to be careful.
>
> Transforming the location of gopher holes using Corpscon is one thing.
> Transforming building corner positions, or the alignment of a new
> pipeline with Corpscon is another thing entirely.

My needs are closer to the pipeline example than the gopher hole one.

> From: Rich Greenwood
>
> Corpscon (http://crunch.tec.army.mil/software/corpscon/corpscon.html)
> based on NADCON is a good, free, authoritative tool when working in
> the US.

(Sorry for the repeat) But neither Corpscon nor NADCON seem to be able
to get me to WGS84.

> From: Landon Blake
>
> I was recommending that one consider the purpose of the data
> transformation before deciding to use ANY transformation package. If I
> was building a nuclear reactor I would want to perform field surveys to
> tie into local survey control.
>
> Aaron is probably fine using CopsCon. I just get nervous when I hear
> "sub-foot" accuracy. Usually when you are dealing with coordinates at
> that level of accuracy you are leaving the GIS arena and entering an
> arena that demands field work to reference local control on the ground.

Rest assured, no nuclear reactors are in the works.  I understand what
you are saying.  Many times, I deal with highly-precise but very inaccurate
data, with GPS readings recorded down to 7 or more decimal places from a
consumer grade device with only 30 meter accuracy.

Thanks again,

Aaron
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090220/26ec7a81/attachment.html>

From lblake at ksninc.com  Fri Feb 20 12:42:44 2009
From: lblake at ksninc.com (Landon Blake)
Date: Fri, 20 Feb 2009 12:42:44 -0800
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84
In-Reply-To: <90200BC582E4FF488816D357540C1D4D12F3C43654@VMBX103.ihostexchange.net>
References: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net><B597ADFC46B67741B18EA6AA13613FF7EC2604@email002.lsu.edu>
	<90200BC582E4FF488816D357540C1D4D12F3C43654@VMBX103.ihostexchange.net>
Message-ID: <0D544207876CDA428F17DD7EA448C192FC7BE4@bailey.DOMAIN.KSNINC.PVT>

Aaron,

A quick Google search of the term "NAD83 WGS84" turned up this
interesting link:

http://forums.groundspeak.com/GC/index.php?showtopic=97337

There is quite a long discussion on your very question. I skimmed some
of the postings, and I think the answer to your question is not a simple
one. I am going to study the postings in more detail, and I may check
with some other surveyors on the topic. I'm also going to forward this
message to my boss, who is a geodesy junkie.

I'm finding it hard to understand the practical circumstances
surrounding your question. Let me take a stab at a scenario that I think
is close to your own scenario, and then I will ask some questions:

You've been provided data on all of the municipal wells in the United
States for cities with a population over 250,000 people. The position of
the wells in this data is (supposedly) sub-foot, and it is provided
(supposedly) in flavors of NAD83, including state plane coordinates.

You now need to go out and (1) verify the position of wells that are
already contained in the data set and (2) add new positions for
municipal wells for cities with a population over (let's say) 50,000.

Here is my first question:

What type of receiver are you using to obtain new sub-foot positions,
and on what datum are these positions based?

Let's say you're using a new super duper GIS grade GPS receiver from
Trimble that get's sub-foot post-processed accuracy. This means that
you've got positions that are precise to less than a foot on the WGS84
datum. 

Now you want to convert those very precise WGS84 coordinates to very
precise NAD83 coordinates.

I think you are screwed. There is no single formula conversion between
NAD83 and WGS84, based on the little bit of information that I have
read.

If you really want a data set that covers positions throughout the
United States and maintains an overall sub-foot accuracy, I think you
will have to survey every feature in your data set from scratch. This
would give you a new dataset with sub-foot WGS84 positions.

I think the only way to establish NAD83 positions is to survey in local
NAD83 control, or to use NAD83 CORS data in your post-processing. This
would be very time consuming, if not near impossible, for data all
across the United States. We have a hard time getting NAD 83 data to fit
closer than a foot from one side of California to the other. All types
of problems like ground subsidence and plate tectonics come into play.

The root cause of your problem: It may not be as easy to turn sub-foot
WGS84 positions into sub-foot NAD83 positions as one may first think.


Landon
Office Phone Number: (209) 946-0268
Cell Phone Number: (209) 992-0658
 
 

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Aaron Friesen
Sent: Friday, February 20, 2009 11:31 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] How to transform between NAD83 HARN/HPGN and WGS84

Thank you all for your initial responses...

===== Short follow-up =====

A short follow-up question for those that don't want to read my
long-winded follow-up below:

Do either NADCON or CorpsCon provide datum transforms between a
given NAD83 and WGS84?  The websites seem to indicate that they
are only for transforms among various NAD datums and I do not
know of a NAD83 variant that is truly assumed to be equivalent
to WGS84/ITRF00.  Please correct me if I am wrong on that.

Thanks again,

Aaron

===== Long-winded follow-up that you may want to ignore =====

Hopefully, you do not mind continuing the thread.  I am responding
to multiple people in this message, hoping to keep the thread more
coherent.

Due to non-disclosure limitations, my original description of my needs
only indicated Colorado as a location under NAD83 HARN, thinking I might
be able to extrapolate responses to a more general solution.  I
apologize
if I wasted your time with my original query.

Let me expand a bit and re-emphasize one point that seems to not have
been addressed (i.e., conversion to/from WGS84).

I will be working with data originating in various parts of the US.
The data represents various assets in the field where sub-foot accuracy 
is important (or claimed to be important).  The first assumption is that

existing data has the accuracy it claims to have.  The second assumption

is that existing data is in the datum it claims to be in.  Both of these

assumptions may be incorrect, but need to be assumed to be true for this

discussion.

For existing data, I need to be able to go to the field and locate that 
asset within the combined error of the original reading and the current 
reading from the GPS device used to locate the asset.  For new assets, I

need to be able to take a reading and add that information to the data
set.  
All GPS field readings for this discussion can be assumed to have
sub-foot 
accuracy.  If they do not, that is an issue between me and the GPS 
manufacturer claiming such accuracy.  In any case, we are still talking
sub-foot mapping grade GPS, not sub-centimeter survey grade.

The data starts out in various projections (some in State Plane, some
in UTM, some living its entire life as lat/long).  I would also like to
assume that any projection does not add significant error.  Yes, another
assumption that may or may not be valid, but for now...

The problem is that these various data-sets are in various NAD83
incarnations,
and to take the data into the field or bring back new data from the
field, one
or more datum transforms are necessary, getting it to WGS84 and back
retaining
its original sub-foot accuracy.

The transform to WGS84 seems to be the point not directly addressed.  At
least
I did not see it that way.  For sub-foot work, the old assumption of
NAD83==WGS84
doesn't do it.

> From: C. Mugnier
> 
> Such questions regarding geodetic-accuracy transformations in Colorado
> are best directed to the U.S. National Geodetic Survey.  NADCON indeed
> does have NAD83 HARNHPGN files, and can provide the necessary
> operations either on-line or through a download.  The same goes for
> current versions of CorpsCon.  Both solutions are not commercial and
> both are free.
> 
> Go to www.NOAA.NGS.gov and you'll get your problem solved for free
> courtesy of the U.S. Government.  A Google search will get you to the
> current version of CorpsCon.

Both NADCON and CorpsCon descriptions talk of conversion between various
incarnations of NAD83, but neither seems to address the transform
to/from
WGS84/ITRF00.

> From: Landon Blake
> 
> When you say NAD83 HARN are you using Colorado State Plane
Coordinates?
> Or are you dealing with lat/long values?

All lat/long WGS84 in the field.

> I don't think there isn't a huge difference between NAD83 and WGS84,
> but
> I'd think Proj would have a conversion between the two.

Depending on the NAD83 incarnation, NAD83 to WGS84 can differ by several
meters.  Much of the Proj documentation implies that Proj does a null
transformation for NAD83 to WGS84 by default.  That may or may not be
true, but the documentation seems to imply it.

With the +towgs84 switch, I might be able to over-ride that, but I'm not
sure this is sufficient to meet my sub-foot requirements and cannot find
any information on what those parameters might be for a given transform.

> If you are dealing with state plane coordinates a local surveyor can
> probably point you to the conversion formulas that you need. Or you
> might check with the state land surveying association in Colorado.
> 
> If you get stuck, let me know. I can bounce a message off a couple of
> land surveying message boards with Colorado Surveyors listening.

I'm hoping to find a single conversion package (or at least a small
set) to address this problem in the general case.

> I'd be careful using something like Corpscon for data that is sub-foot
> accuracy and needs to stay that way.
> 
> We wouldn't use that program or any like it to convert data that needs
> to be that accurate. I don't know what the purpose of Aaron's data
> conversion is, but he might need to be careful.
> 
> Transforming the location of gopher holes using Corpscon is one thing.
> Transforming building corner positions, or the alignment of a new
> pipeline with Corpscon is another thing entirely.

My needs are closer to the pipeline example than the gopher hole one.

> From: Rich Greenwood
> 
> Corpscon (http://crunch.tec.army.mil/software/corpscon/corpscon.html)
> based on NADCON is a good, free, authoritative tool when working in
> the US.

(Sorry for the repeat) But neither Corpscon nor NADCON seem to be able
to get me to WGS84.

> From: Landon Blake
>
> I was recommending that one consider the purpose of the data
> transformation before deciding to use ANY transformation package. If I
> was building a nuclear reactor I would want to perform field surveys
to
> tie into local survey control.
> 
> Aaron is probably fine using CopsCon. I just get nervous when I hear
> "sub-foot" accuracy. Usually when you are dealing with coordinates at
> that level of accuracy you are leaving the GIS arena and entering an
> arena that demands field work to reference local control on the
ground.

Rest assured, no nuclear reactors are in the works.  I understand what
you are saying.  Many times, I deal with highly-precise but very
inaccurate
data, with GPS readings recorded down to 7 or more decimal places from a
consumer grade device with only 30 meter accuracy.

Thanks again,

Aaron
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


Warning:
Information provided via electronic media is not guaranteed against defects including translation and transmission errors. If the reader is not the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this information in error, please notify the sender immediately.


From aaron at cartopac.com  Fri Feb 20 15:33:46 2009
From: aaron at cartopac.com (Aaron Friesen)
Date: Fri, 20 Feb 2009 18:33:46 -0500
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84
In-Reply-To: <0D544207876CDA428F17DD7EA448C192FC7BE4@bailey.DOMAIN.KSNINC.PVT>
References: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net><B597ADFC46B67741B18EA6AA13613FF7EC2604@email002.lsu.edu>
	<90200BC582E4FF488816D357540C1D4D12F3C43654@VMBX103.ihostexchange.net>
	<0D544207876CDA428F17DD7EA448C192FC7BE4@bailey.DOMAIN.KSNINC.PVT>
Message-ID: <90200BC582E4FF488816D357540C1D4D12F3C436DA@VMBX103.ihostexchange.net>

Landon,

> -----Original Message-----
> A quick Google search of the term "NAD83 WGS84" turned up this
> interesting link:
> 
> http://forums.groundspeak.com/GC/index.php?showtopic=97337
> 
> There is quite a long discussion on your very question. I skimmed some
> of the postings, and I think the answer to your question is not a
> simple one. I am going to study the postings in more detail, and I may 
> check with some other surveyors on the topic. I'm also going to forward 
> this message to my boss, who is a geodesy junkie.

Thank you for the pointer.  I have only quickly perused the info so far,
but it is very interesting and definitely on topic.

Rob/Geocacher (apparently now on the banned list on that forum) makes
the overly simplistic statement that one should just "use the datum that
is right for the job".  Unfortunately, this is also not the answer,
since the only cost-effective means to collect much of this type of
data is via GPS, but for these activites that result from government
edicts, the result still needs to be in a NAD83 variant.

> I'm finding it hard to understand the practical circumstances
> surrounding your question. Let me take a stab at a scenario that I
> think is close to your own scenario, and then I will ask some questions:
> 
> You've been provided data on all of the municipal wells in the United
> States for cities with a population over 250,000 people. The position
> of the wells in this data is (supposedly) sub-foot, and it is provided
> (supposedly) in flavors of NAD83, including state plane coordinates.

This example will do quite nicely, I think.  The NAD83 flavors are not
intermixed throughout the entire US, but are used as local variants,
such as HARN Colorado, HARN Virginia, CORS96 in various places, etc.

> You now need to go out and (1) verify the position of wells that are
> already contained in the data set and (2) add new positions for
> municipal wells for cities with a population over (let's say) 50,000.

The scenario still sounds good enough for this discussion.

> Here is my first question:
> 
> What type of receiver are you using to obtain new sub-foot positions,
> and on what datum are these positions based?
> 
> Let's say you're using a new super duper GIS grade GPS receiver from
> Trimble that get's sub-foot post-processed accuracy. This means that
> you've got positions that are precise to less than a foot on the WGS84
> datum.

I will neither confirm nor deny ;^), but lets assume Trimble GeoXH/ProXH
with post-processing, wink, wink, nudge, nudge.  

> Now you want to convert those very precise WGS84 coordinates to very
> precise NAD83 coordinates.

Yup.

> I think you are screwed. There is no single formula conversion between
> NAD83 and WGS84, based on the little bit of information that I have
> read.

I'm not necessarily needing a single formula.  Multiple formulas based
on region would be viable, it that even is possible.

> If you really want a data set that covers positions throughout the
> United States and maintains an overall sub-foot accuracy, I think you
> will have to survey every feature in your data set from scratch. This
> would give you a new dataset with sub-foot WGS84 positions.
> 
> I think the only way to establish NAD83 positions is to survey in local
> NAD83 control, or to use NAD83 CORS data in your post-processing. This
> would be very time consuming, if not near impossible, for data all
> across the United States. We have a hard time getting NAD 83 data to
> fit closer than a foot from one side of California to the other. All types
> of problems like ground subsidence and plate tectonics come into play.

Clarifying the "across the US" piece, I have data in lots of places
across the US, but it is multiple sets, not necessarily needing to
mesh into a single data set.  

Pardon my display of ignorance...

Isn't the CORS data generated from GPS readings of some sort?  How do
they make the translation?  Or do they do something like start with an 
assumed known location and simply monitor its deviation from the original 
location?

> The root cause of your problem: It may not be as easy to turn sub-foot
> WGS84 positions into sub-foot NAD83 positions as one may first think.

That may actually be the answer, but I need to be able be able to reference
reliable, if not definitive, sources on that answer.

Thanks again for your assistance and expertise,

Aaron



From lblake at ksninc.com  Fri Feb 20 16:34:11 2009
From: lblake at ksninc.com (Landon Blake)
Date: Fri, 20 Feb 2009 16:34:11 -0800
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84
In-Reply-To: <90200BC582E4FF488816D357540C1D4D12F3C436DA@VMBX103.ihostexchange.net>
References: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net><B597ADFC46B67741B18EA6AA13613FF7EC2604@email002.lsu.edu><90200BC582E4FF488816D357540C1D4D12F3C43654@VMBX103.ihostexchange.net><0D544207876CDA428F17DD7EA448C192FC7BE4@bailey.DOMAIN.KSNINC.PVT>
	<90200BC582E4FF488816D357540C1D4D12F3C436DA@VMBX103.ihostexchange.net>
Message-ID: <0D544207876CDA428F17DD7EA448C192FC7C28@bailey.DOMAIN.KSNINC.PVT>

Aaron,

This has been a great discussion. I'll try to respond to some of your
further comments and questions below.

Aaron wrote: " This example will do quite nicely, I think.  The NAD83
flavors are not
intermixed throughout the entire US, but are used as local variants,
such as HARN Colorado, HARN Virginia, CORS96 in various places, etc."

That is what I meant. :]

Aaron wrote: " I will neither confirm nor deny ;^), but lets assume
Trimble GeoXH/ProXH
with post-processing, wink, wink, nudge, nudge."

Roger that. I suspect I will be seeing more of your type of question as
more GIS users begin to obtain sub-foot positions with the new GPS
receivers Trimble is putting out. The problem is where starting to get
GIS grade positions that want to play in a survey-grade world. :]

Aaron wrote: " I'm not necessarily needing a single formula.  Multiple
formulas based
on region would be viable, it that even is possible."

I don't think this will even be possible. There is only one way that I
know of to get from GPS to NAD83. That is by surveying NGS or other
survey control in the area that has record (established) NAD83
coordinates. You have to remember that surveyors don't convert WGS84
positions directly to NAD83 either. GPS is just a measuring stick that
allows us to calculate NAD83 coordinates from existing control
monuments. You could do the same thing with conventional (optical)
survey instruments if you wanted to spend the time. In fact, before GPS
this is how NGS used to establish horizontal control.

Aaron wrote: " Clarifying the "across the US" piece, I have data in lots
of places
across the US, but it is multiple sets, not necessarily needing to
mesh into a single data set."

I don't think this is going to matter in the end game.

Aaron wrote: "Isn't the CORS data generated from GPS readings of some
sort?  How do
they make the translation?  Or do they do something like start with an 
assumed known location and simply monitor its deviation from the
original 
location?"

That is exactly how they do it! :]

They use existing NAD83 control to establish NAD83 coordinates on the
CORS. I get the raw GPS observations from the CORS in WGS84, but the
record coordinates are usually always NAD83. In this sense, the CORS is
just acting as one end of the measuring stick. :] What I'm really
interested in is the vector (or baseline) from that CORS to whatever
point I'm measuring on the other end.

Your next question will probably be "how did they come up with the
original NAD83 positions?"

Don't quote me on this, but I think it involved the following:

Large horizontal control networks created from terrestrial observations
using conventional (optical) surveying measurements, astronomical
observations (to determine latitude and longitude), and gravity
measurements (to determine the deflection of the vertical).

This NAD83 network was later adjusted using GPS measurements. But again,
GPS was just serving as a measuring stick, even in this process.

So in some sense NAD83 is really defined by a network of existing
surveying monuments located on the ground. There are mathematical
parameters (like the dimensions of the ellipsoid) that are used in
calculating the NAD83 positions of those monuments, but the monuments
are the most important thing.

If you aren't incorporating the measurement of NAD83 monuments into your
own measurements somehow, you aren't getting NAD83 positions. 

Aaron wrote: " That may actually be the answer, but I need to be able be
able to reference
reliable, if not definitive, sources on that answer.

Thanks again for your assistance and expertise,"

I must admit I am getting way out of my own area of expertise. You might
try contacting the NGS for a "reliable and definitive" answer to your
question. I can put you in touch with the NGS director for California if
you want.

Landon
Office Phone Number: (209) 946-0268
Cell Phone Number: (209) 992-0658
 
 

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Aaron Friesen
Sent: Friday, February 20, 2009 3:34 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] How to transform between NAD83 HARN/HPGN and WGS84

Landon,

> -----Original Message-----
> A quick Google search of the term "NAD83 WGS84" turned up this
> interesting link:
> 
> http://forums.groundspeak.com/GC/index.php?showtopic=97337
> 
> There is quite a long discussion on your very question. I skimmed some
> of the postings, and I think the answer to your question is not a
> simple one. I am going to study the postings in more detail, and I may

> check with some other surveyors on the topic. I'm also going to
forward 
> this message to my boss, who is a geodesy junkie.

Thank you for the pointer.  I have only quickly perused the info so far,
but it is very interesting and definitely on topic.

Rob/Geocacher (apparently now on the banned list on that forum) makes
the overly simplistic statement that one should just "use the datum that
is right for the job".  Unfortunately, this is also not the answer,
since the only cost-effective means to collect much of this type of
data is via GPS, but for these activites that result from government
edicts, the result still needs to be in a NAD83 variant.

> I'm finding it hard to understand the practical circumstances
> surrounding your question. Let me take a stab at a scenario that I
> think is close to your own scenario, and then I will ask some
questions:
> 
> You've been provided data on all of the municipal wells in the United
> States for cities with a population over 250,000 people. The position
> of the wells in this data is (supposedly) sub-foot, and it is provided
> (supposedly) in flavors of NAD83, including state plane coordinates.

This example will do quite nicely, I think.  The NAD83 flavors are not
intermixed throughout the entire US, but are used as local variants,
such as HARN Colorado, HARN Virginia, CORS96 in various places, etc.

> You now need to go out and (1) verify the position of wells that are
> already contained in the data set and (2) add new positions for
> municipal wells for cities with a population over (let's say) 50,000.

The scenario still sounds good enough for this discussion.

> Here is my first question:
> 
> What type of receiver are you using to obtain new sub-foot positions,
> and on what datum are these positions based?
> 
> Let's say you're using a new super duper GIS grade GPS receiver from
> Trimble that get's sub-foot post-processed accuracy. This means that
> you've got positions that are precise to less than a foot on the WGS84
> datum.

I will neither confirm nor deny ;^), but lets assume Trimble GeoXH/ProXH
with post-processing, wink, wink, nudge, nudge.  

> Now you want to convert those very precise WGS84 coordinates to very
> precise NAD83 coordinates.

Yup.

> I think you are screwed. There is no single formula conversion between
> NAD83 and WGS84, based on the little bit of information that I have
> read.

I'm not necessarily needing a single formula.  Multiple formulas based
on region would be viable, it that even is possible.

> If you really want a data set that covers positions throughout the
> United States and maintains an overall sub-foot accuracy, I think you
> will have to survey every feature in your data set from scratch. This
> would give you a new dataset with sub-foot WGS84 positions.
> 
> I think the only way to establish NAD83 positions is to survey in
local
> NAD83 control, or to use NAD83 CORS data in your post-processing. This
> would be very time consuming, if not near impossible, for data all
> across the United States. We have a hard time getting NAD 83 data to
> fit closer than a foot from one side of California to the other. All
types
> of problems like ground subsidence and plate tectonics come into play.

Clarifying the "across the US" piece, I have data in lots of places
across the US, but it is multiple sets, not necessarily needing to
mesh into a single data set.  

Pardon my display of ignorance...

Isn't the CORS data generated from GPS readings of some sort?  How do
they make the translation?  Or do they do something like start with an 
assumed known location and simply monitor its deviation from the
original 
location?

> The root cause of your problem: It may not be as easy to turn sub-foot
> WGS84 positions into sub-foot NAD83 positions as one may first think.

That may actually be the answer, but I need to be able be able to
reference
reliable, if not definitive, sources on that answer.

Thanks again for your assistance and expertise,

Aaron

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


Warning:
Information provided via electronic media is not guaranteed against defects including translation and transmission errors. If the reader is not the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this information in error, please notify the sender immediately.


From j.l.h.hartmann at uva.nl  Sat Feb 21 06:13:06 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat, 21 Feb 2009 15:13:06 +0100
Subject: [Proj] Downloads from mapserver.sara.nl
In-Reply-To: <499C3C4E.6000408@uva.nl>
References: <OFFD4A3B0C.99839462-ONC1257560.006D39FE-C1257560.006D3A17@notesmail.rivm.nl>	<200902171552.17277.geraldi.evenden@gmail.com>	<499BF87C.4040302@uva.nl>	<200902181009.36432.geraldi.evenden@gmail.com>
	<499C3C4E.6000408@uva.nl>
Message-ID: <49A00BF2.9030307@uva.nl>

Hi folks,

I put a few scanned and OCR-d sources that might be of interest to some 
of you at:

http://mapserver.sara.nl/downloads

- A scanned book from 1954 of all ellipsoids used from 1800 to 1925 
(German with a long English introduction)
- The official mathematical manual for the Napoleonic cadastre of 1804, 
scanned and OCR-ed by Google
- The three triangulalations of the Netherlands, 1850, 1929 and present, 
as an Excel spreadsheet.

Comments would be appreciated!

Have fun :-)

Jan


From richard.greenwood at gmail.com  Sat Feb 21 06:56:31 2009
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Sat, 21 Feb 2009 07:56:31 -0700
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84
In-Reply-To: <90200BC582E4FF488816D357540C1D4D12F3C43654@VMBX103.ihostexchange.net>
References: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net>
	<B597ADFC46B67741B18EA6AA13613FF7EC2604@email002.lsu.edu>
	<90200BC582E4FF488816D357540C1D4D12F3C43654@VMBX103.ihostexchange.net>
Message-ID: <ae9185aa0902210656k184fb0ddyb68c72b20d60f4cb@mail.gmail.com>

On Fri, Feb 20, 2009 at 12:30 PM, Aaron Friesen <aaron at cartopac.com> wrote:
> Thank you all for your initial responses...
>
> ===== Short follow-up =====
>
> A short follow-up question for those that don't want to read my
> long-winded follow-up below:
>
> Do either NADCON or CorpsCon provide datum transforms between a
> given NAD83 and WGS84?  The websites seem to indicate that they
> are only for transforms among various NAD datums and I do not
> know of a NAD83 variant that is truly assumed to be equivalent
> to WGS84/ITRF00.  Please correct me if I am wrong on that.

I consider HTDP - Horizontal Time Dependent Positioning
(http://www.ngs.noaa.gov/TOOLS/Htdp/Htdp.html) to be the authoritative
source for ITRF <-> NAD83 conversions.

-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From ovv at hetnet.nl  Sat Feb 21 10:35:30 2009
From: ovv at hetnet.nl (OvV_HN)
Date: Sat, 21 Feb 2009 19:35:30 +0100
Subject: [Proj] Downloads from mapserver.sara.nl
In-Reply-To: <49A00BF2.9030307@uva.nl>
References: <OFFD4A3B0C.99839462-ONC1257560.006D39FE-C1257560.006D3A17@notesmail.rivm.nl>	<200902171552.17277.geraldi.evenden@gmail.com>	<499BF87C.4040302@uva.nl>	<200902181009.36432.geraldi.evenden@gmail.com><499C3C4E.6000408@uva.nl>
	<49A00BF2.9030307@uva.nl>
Message-ID: <56F41D4CDB6B443BA9CD5875DAA98664@PCHP>


----- Original Message ----- 
From: "Jan Hartmann" <j.l.h.hartmann at uva.nl>
To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
Sent: Saturday, February 21, 2009 3:13 PM
Subject: [Proj] Downloads from mapserver.sara.nl


> Hi folks,
>
> I put a few scanned and OCR-d sources that might be of interest to some
> of you at:
>
> http://mapserver.sara.nl/downloads
>
....
> Comments would be appreciated!

> - A scanned book from 1954 of all ellipsoids used from 1800 to 1925
> (German with a long English introduction)

The scans of the original pages 95...102 are messed up. See part 4 of the 
pdfs.

> - The official mathematical manual for the Napoleonic cadastre of 1804,
> scanned and OCR-ed by Google

Some pages are completely messed up. Why do they do that? The book is no 
longer copyrighted, so it can be republished in full. Probably a matter of 
incompetence? Or a twisted mind?

...
> Jan

Thanks anyhow for this interesting historical information!


Oscar van Vlijmen




From aaron at cartopac.com  Mon Feb 23 08:24:32 2009
From: aaron at cartopac.com (Aaron Friesen)
Date: Mon, 23 Feb 2009 11:24:32 -0500
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84
In-Reply-To: <ae9185aa0902210656k184fb0ddyb68c72b20d60f4cb@mail.gmail.com>
References: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net>
	<B597ADFC46B67741B18EA6AA13613FF7EC2604@email002.lsu.edu>
	<90200BC582E4FF488816D357540C1D4D12F3C43654@VMBX103.ihostexchange.net>
	<ae9185aa0902210656k184fb0ddyb68c72b20d60f4cb@mail.gmail.com>
Message-ID: <90200BC582E4FF488816D357540C1D4D132658925F@VMBX103.ihostexchange.net>

Richard, et al:

> -----Original Message-----
> > Do either NADCON or CorpsCon provide datum transforms between a
> > given NAD83 and WGS84?  The websites seem to indicate that they
> > are only for transforms among various NAD datums and I do not
> > know of a NAD83 variant that is truly assumed to be equivalent
> > to WGS84/ITRF00.  Please correct me if I am wrong on that.
> 
> I consider HTDP - Horizontal Time Dependent Positioning
> (http://www.ngs.noaa.gov/TOOLS/Htdp/Htdp.html) to be the authoritative
> source for ITRF <-> NAD83 conversions.

Thanks for the pointer.  I had actually stumbled upon HTDP after
getting some leads from this list late last Friday (sorry, don't
recall who gave me the pointer last week, but thank you to you as
well).

Based on that, my current plan of attack is to document/acknowledge 
the added error from each translation that is required.  The NGS
site indicates about how much additional error is introduced with each
translation.  The short answer (numbers are approximate) is that 
utilizing HTDP with CORS96 or later data and the transform will do
pretty much what I want.  For HARN areas, add 10 cm to best case
error.  For other NAD83, add 1 m to best case error.  For NAD27
(which is not currently on my list, but...), add 10 m to best case
error.

Thanks again to everyone,

Aaron


From aaron at cartopac.com  Mon Feb 23 08:32:46 2009
From: aaron at cartopac.com (Aaron Friesen)
Date: Mon, 23 Feb 2009 11:32:46 -0500
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84
In-Reply-To: <0D544207876CDA428F17DD7EA448C192FC7C28@bailey.DOMAIN.KSNINC.PVT>
References: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net><B597ADFC46B67741B18EA6AA13613FF7EC2604@email002.lsu.edu><90200BC582E4FF488816D357540C1D4D12F3C43654@VMBX103.ihostexchange.net><0D544207876CDA428F17DD7EA448C192FC7BE4@bailey.DOMAIN.KSNINC.PVT>
	<90200BC582E4FF488816D357540C1D4D12F3C436DA@VMBX103.ihostexchange.net>
	<0D544207876CDA428F17DD7EA448C192FC7C28@bailey.DOMAIN.KSNINC.PVT>
Message-ID: <90200BC582E4FF488816D357540C1D4D1326589265@VMBX103.ihostexchange.net>

Landon, et al.

> -----Original Message-----
> This has been a great discussion. I'll try to respond to some of your
> further comments and questions below.

I'm glad you enjoy my pain.  ;^)

> Aaron wrote: " This example will do quite nicely, I think.  The NAD83
> flavors are not
> intermixed throughout the entire US, but are used as local variants,
> such as HARN Colorado, HARN Virginia, CORS96 in various places, etc."
> 
> That is what I meant. :]
> 
> Aaron wrote: " I will neither confirm nor deny ;^), but lets assume
> Trimble GeoXH/ProXH
> with post-processing, wink, wink, nudge, nudge."
> 
> Roger that. I suspect I will be seeing more of your type of question as
> more GIS users begin to obtain sub-foot positions with the new GPS
> receivers Trimble is putting out. The problem is where starting to get
> GIS grade positions that want to play in a survey-grade world. :]
>
> Aaron wrote: " I'm not necessarily needing a single formula.  Multiple
> formulas based
> on region would be viable, it that even is possible."
> 
> I don't think this will even be possible. There is only one way that I
> know of to get from GPS to NAD83. That is by surveying NGS or other
> survey control in the area that has record (established) NAD83
> coordinates. You have to remember that surveyors don't convert WGS84
> positions directly to NAD83 either. GPS is just a measuring stick that
> allows us to calculate NAD83 coordinates from existing control
> monuments. You could do the same thing with conventional (optical)
> survey instruments if you wanted to spend the time. In fact, before GPS
> this is how NGS used to establish horizontal control.
> 
> Aaron wrote: " Clarifying the "across the US" piece, I have data in
> lots of places across the US, but it is multiple sets, not necessarily 
> needing to mesh into a single data set."
> 
> I don't think this is going to matter in the end game.
> 
> Aaron wrote: "Isn't the CORS data generated from GPS readings of some
> sort?  How do they make the translation?  Or do they do something 
> like start with an assumed known location and simply monitor its 
> deviation from the original location?"
> 
> That is exactly how they do it! :]

I suspected, but wasn't sure.

> They use existing NAD83 control to establish NAD83 coordinates on the
> CORS. I get the raw GPS observations from the CORS in WGS84, but the
> record coordinates are usually always NAD83. In this sense, the CORS is
> just acting as one end of the measuring stick. :] What I'm really
> interested in is the vector (or baseline) from that CORS to whatever
> point I'm measuring on the other end.
> 
> Your next question will probably be "how did they come up with the
> original NAD83 positions?"
> 
> Don't quote me on this, but I think it involved the following:
> 
> Large horizontal control networks created from terrestrial observations
> using conventional (optical) surveying measurements, astronomical
> observations (to determine latitude and longitude), and gravity
> measurements (to determine the deflection of the vertical).
> 
> This NAD83 network was later adjusted using GPS measurements. But
> again, GPS was just serving as a measuring stick, even in this 
> process.
> 
> So in some sense NAD83 is really defined by a network of existing
> surveying monuments located on the ground. There are mathematical
> parameters (like the dimensions of the ellipsoid) that are used in
> calculating the NAD83 positions of those monuments, but the monuments
> are the most important thing.
> 
> If you aren't incorporating the measurement of NAD83 monuments into
> your own measurements somehow, you aren't getting NAD83 positions.

I will note this.

> Aaron wrote: " That may actually be the answer, but I need to be able
> be able to reference reliable, if not definitive, sources on that 
> answer.
> 
> Thanks again for your assistance and expertise,"
> 
> I must admit I am getting way out of my own area of expertise. You
> might try contacting the NGS for a "reliable and definitive" answer 
> to your question. I can put you in touch with the NGS director for 
> California if you want.

I will pass on this suggestion and offer to the higher-ups.

Thank you,

Aaron



From lblake at ksninc.com  Mon Feb 23 09:15:31 2009
From: lblake at ksninc.com (Landon Blake)
Date: Mon, 23 Feb 2009 09:15:31 -0800
Subject: [Proj] How to transform between NAD83 HARN/HPGN and WGS84
In-Reply-To: <90200BC582E4FF488816D357540C1D4D1326589265@VMBX103.ihostexchange.net>
References: <90200BC582E4FF488816D357540C1D4D12F3C43427@VMBX103.ihostexchange.net><B597ADFC46B67741B18EA6AA13613FF7EC2604@email002.lsu.edu><90200BC582E4FF488816D357540C1D4D12F3C43654@VMBX103.ihostexchange.net><0D544207876CDA428F17DD7EA448C192FC7BE4@bailey.DOMAIN.KSNINC.PVT><90200BC582E4FF488816D357540C1D4D12F3C436DA@VMBX103.ihostexchange.net><0D544207876CDA428F17DD7EA448C192FC7C28@bailey.DOMAIN.KSNINC.PVT>
	<90200BC582E4FF488816D357540C1D4D1326589265@VMBX103.ihostexchange.net>
Message-ID: <0D544207876CDA428F17DD7EA448C192FC7C7C@bailey.DOMAIN.KSNINC.PVT>

Sounds like you may have found a workable solution Aaron. I hope things
work out.

Landon
Office Phone Number: (209) 946-0268
Cell Phone Number: (209) 992-0658
 
 

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Aaron Friesen
Sent: Monday, February 23, 2009 8:33 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] How to transform between NAD83 HARN/HPGN and WGS84

Landon, et al.

> -----Original Message-----
> This has been a great discussion. I'll try to respond to some of your
> further comments and questions below.

I'm glad you enjoy my pain.  ;^)

> Aaron wrote: " This example will do quite nicely, I think.  The NAD83
> flavors are not
> intermixed throughout the entire US, but are used as local variants,
> such as HARN Colorado, HARN Virginia, CORS96 in various places, etc."
> 
> That is what I meant. :]
> 
> Aaron wrote: " I will neither confirm nor deny ;^), but lets assume
> Trimble GeoXH/ProXH
> with post-processing, wink, wink, nudge, nudge."
> 
> Roger that. I suspect I will be seeing more of your type of question
as
> more GIS users begin to obtain sub-foot positions with the new GPS
> receivers Trimble is putting out. The problem is where starting to get
> GIS grade positions that want to play in a survey-grade world. :]
>
> Aaron wrote: " I'm not necessarily needing a single formula.  Multiple
> formulas based
> on region would be viable, it that even is possible."
> 
> I don't think this will even be possible. There is only one way that I
> know of to get from GPS to NAD83. That is by surveying NGS or other
> survey control in the area that has record (established) NAD83
> coordinates. You have to remember that surveyors don't convert WGS84
> positions directly to NAD83 either. GPS is just a measuring stick that
> allows us to calculate NAD83 coordinates from existing control
> monuments. You could do the same thing with conventional (optical)
> survey instruments if you wanted to spend the time. In fact, before
GPS
> this is how NGS used to establish horizontal control.
> 
> Aaron wrote: " Clarifying the "across the US" piece, I have data in
> lots of places across the US, but it is multiple sets, not necessarily

> needing to mesh into a single data set."
> 
> I don't think this is going to matter in the end game.
> 
> Aaron wrote: "Isn't the CORS data generated from GPS readings of some
> sort?  How do they make the translation?  Or do they do something 
> like start with an assumed known location and simply monitor its 
> deviation from the original location?"
> 
> That is exactly how they do it! :]

I suspected, but wasn't sure.

> They use existing NAD83 control to establish NAD83 coordinates on the
> CORS. I get the raw GPS observations from the CORS in WGS84, but the
> record coordinates are usually always NAD83. In this sense, the CORS
is
> just acting as one end of the measuring stick. :] What I'm really
> interested in is the vector (or baseline) from that CORS to whatever
> point I'm measuring on the other end.
> 
> Your next question will probably be "how did they come up with the
> original NAD83 positions?"
> 
> Don't quote me on this, but I think it involved the following:
> 
> Large horizontal control networks created from terrestrial
observations
> using conventional (optical) surveying measurements, astronomical
> observations (to determine latitude and longitude), and gravity
> measurements (to determine the deflection of the vertical).
> 
> This NAD83 network was later adjusted using GPS measurements. But
> again, GPS was just serving as a measuring stick, even in this 
> process.
> 
> So in some sense NAD83 is really defined by a network of existing
> surveying monuments located on the ground. There are mathematical
> parameters (like the dimensions of the ellipsoid) that are used in
> calculating the NAD83 positions of those monuments, but the monuments
> are the most important thing.
> 
> If you aren't incorporating the measurement of NAD83 monuments into
> your own measurements somehow, you aren't getting NAD83 positions.

I will note this.

> Aaron wrote: " That may actually be the answer, but I need to be able
> be able to reference reliable, if not definitive, sources on that 
> answer.
> 
> Thanks again for your assistance and expertise,"
> 
> I must admit I am getting way out of my own area of expertise. You
> might try contacting the NGS for a "reliable and definitive" answer 
> to your question. I can put you in touch with the NGS director for 
> California if you want.

I will pass on this suggestion and offer to the higher-ups.

Thank you,

Aaron

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


Warning:
Information provided via electronic media is not guaranteed against defects including translation and transmission errors. If the reader is not the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this information in error, please notify the sender immediately.


From p.hiemstra at geo.uu.nl  Mon Feb 23 10:49:44 2009
From: p.hiemstra at geo.uu.nl (Paul Hiemstra)
Date: Mon, 23 Feb 2009 19:49:44 +0100
Subject: [Proj] Building for and calling from g95-MinGW
In-Reply-To: <OFFD4A3B0C.99839462-ONC1257560.006D39FE-C1257560.006D3A17@notesmail.rivm.nl>
References: <OFFD4A3B0C.99839462-ONC1257560.006D39FE-C1257560.006D3A17@notesmail.rivm.nl>
Message-ID: <49A2EFC8.2000209@geo.uu.nl>

Hi Arjan,

I downloaded a fresh install of MinGW and Msys just now and the 
./configure && make && make install worked without a glitch. So probably 
upgrading to the newest version of MinGW shoudl solve your problems. 
Looking at the error in your example it is probably some .so the 
compiler is unable to find. Maybe this file is only included in newer 
version of MinGW than you are working with.

cheers,

Paul

ps some info on my system:

Paul at PAUL-DESKTOP /../../../d/proj-4.6.1
$ proj
Rel. 4.6.1, 21 August 2008

Paul at PAUL-DESKTOP /../../../d/proj-4.6.1
$ gcc --version
gcc.exe (GCC) 3.4.5 (mingw special)
Copyright (C) 2004 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.


Paul at PAUL-DESKTOP /../../../d/proj-4.6.1
$ libtool --version
ltmain.sh (GNU libtool) 1.5.24 Debian 1.5.24-1ubuntu1 (1.1220.2.456 
2007/06/24 02:25:32)

Copyright (C) 2007  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

Paul at PAUL-DESKTOP /../../../d/proj-4.6.1
$ make --version
GNU Make version 3.79.1, by Richard Stallman and Roland McGrath.
Built for i686-pc-msys
Copyright (C) 1988, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 2000
        Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

Report bugs to <bug-make at gnu.org>


Arjan van Dijk schreef:
> Hi!
>
> I compile and run my program on linux and Windows boxes.
> Under Fortran-90 that is...
> Now I would like to use Proj. I have 2 questions about this:
>
> Question 1:
> How do I generate/download an archive file (e.g. libproj.a)
> that can be used from g95 under MinGW by just adding -lproj to the
> compile command of my program?
> The Windows binaries contain an executable and a dll, not a .a-file.
> Can I just use the linux .a-file under MinGW? I guess not.
> I downloaded the sources and called "./configure".
> This went okay. Then I tried "make", but the whole thing
> crashed... (see below this message for the rude curses it uttered)!
>
> Question 2:
> Are there any Fortran examples for using Proj?
>
> Regards,
>
>
> Arjan
>
>
>
> $ make
> Making all in src
> c:\mingw\bin\make.exe[1]: Entering directory `e:/Proj/proj-4.6.1/src'
> c:/mingw/bin/make.exe  all-am
> make.exe[2]: Entering directory `e:/Proj/proj-4.6.1/src'
> C:/msys/1.0/bin/sh.exe ../libtool --tag=CC   --mode=compile gcc 
> -DHAVE_CONFIG_H -I. -DPROJ_LIB=\"/usr/local/share/proj\"     -g -O2 
> -MT PJ_aeqd.lo -MD -MP -MF .deps/PJ_aeqd.Tpo -c -o PJ_aeqd.lo PJ_aeqd.c
> XPJ_aeqd.Tpo -c -o PJ_aeqd.lo PJ_aeqd.lo
> libtool: compile: libobj name `PJ_aeqd.Tpo -c -o PJ_aeqd.lo 
> PJ_aeqd.lo' may not contain shell special characters.
> rm: invalid option -- c
> Try `rm --help' for more information.
> mkdir .libs
>  gcc -DHAVE_CONFIG_H -I. "-DPROJ_LIB=\\/usr/local/share/proj\" -g -O2 
> -MT PJ_aeqd.lo -MD -MP -MF .deps/PJ_aeqd.Tpo -c -o PJ_aeqd.lo 
> PJ_aeqd.c"  -DDLL_EXPORT -DPIC -o .libs/PJ_aeqd.Tpo -c -o PJ_aeqd.lo 
> PJ_aeqd.o
> gcc.exe: PJ_aeqd.o: No such file or directory
> gcc.exe: no input files
> make.exe[2]: *** [PJ_aeqd.lo] Error 1
> make.exe[2]: Leaving directory `e:/Proj/proj-4.6.1/src'
> c:\mingw\bin\make.exe[1]: *** [all] Error 2
> c:\mingw\bin\make.exe[1]: Leaving directory `e:/Proj/proj-4.6.1/src'
> c:\mingw\bin\make.exe: *** [all-recursive] Error 1
>
>
>
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


-- 
Drs. Paul Hiemstra
Department of Physical Geography
Faculty of Geosciences
University of Utrecht
Heidelberglaan 2
P.O. Box 80.115
3508 TC Utrecht
Phone:     +31302535773
Fax:    +31302531145
http://intamap.geo.uu.nl/~paul



From grassgisbangladesh at gmail.com  Tue Feb 24 06:08:37 2009
From: grassgisbangladesh at gmail.com (Zahid Parvez)
Date: Tue, 24 Feb 2009 20:08:37 +0600
Subject: [Proj] problem in projection
Message-ID: <1cee8acf0902240608lf13f810nd44c6e58e3bf891e@mail.gmail.com>

hi
I have a shape file which I have to import in GRASS. Shape file is consists
of a shape file, a dbf file and a prj file.
The prj file has following information.

PROJCS["BTM",
GEOGCS["GCS_Everest_1830",
DATUM["D_Everest_1830",
SPHEROID["Everest_1830",6377299.36,300.8017]],
PRIMEM["Greenwich",0.0],
UNIT["Degree",0.0174532925199433]],
PROJECTION["Transverse_Mercator"],
PARAMETER["False_Easting",500000.0],
PARAMETER["False_Northing",-2000000.0],
PARAMETER["Central_Meridian",90.0],
PARAMETER["Scale_Factor",0.9996],
PARAMETER["Latitude_Of_Origin",0.0],
UNIT["Meter",1.0]]


I will be very grateful if anyone could help me to find the ESPG code .


Best
Md. Zahid Parvez
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090224/ee1e2990/attachment.html>

From milovanderlinden at gmail.com  Tue Feb 24 07:51:44 2009
From: milovanderlinden at gmail.com (Milo van der Linden)
Date: Tue, 24 Feb 2009 16:51:44 +0100
Subject: [Proj] problem in projection
In-Reply-To: <1cee8acf0902240608lf13f810nd44c6e58e3bf891e@mail.gmail.com>
References: <1cee8acf0902240608lf13f810nd44c6e58e3bf891e@mail.gmail.com>
Message-ID: <49A41790.3060708@gmail.com>

Hello Zahid,

You might probe around on http://spatialreference.org to see if you can 
query into the right projection.

Best of luck!

Milo

Zahid Parvez wrote:
> hi
>
> I have a shape file which I have to import in GRASS. Shape file is 
> consists of a shape file, a dbf file and a prj file.
> The prj file has following information.
>
> PROJCS["BTM",
> GEOGCS["GCS_Everest_1830",
> DATUM["D_Everest_1830",
> SPHEROID["Everest_1830",6377299.36,300.8017]],
> PRIMEM["Greenwich",0.0],
> UNIT["Degree",0.0174532925199433]],
> PROJECTION["Transverse_Mercator"],
> PARAMETER["False_Easting",500000.0],
> PARAMETER["False_Northing",-2000000.0],
> PARAMETER["Central_Meridian",90.0],
> PARAMETER["Scale_Factor",0.9996],
> PARAMETER["Latitude_Of_Origin",0.0],
> UNIT["Meter",1.0]] 
>
>
> I will be very grateful if anyone could help me to find the ESPG code .
>
>
> Best
> Md. Zahid Parvez
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From milovanderlinden at gmail.com  Tue Feb 24 07:54:13 2009
From: milovanderlinden at gmail.com (Milo van der Linden)
Date: Tue, 24 Feb 2009 16:54:13 +0100
Subject: [Proj] problem in projection
In-Reply-To: <1cee8acf0902240608lf13f810nd44c6e58e3bf891e@mail.gmail.com>
References: <1cee8acf0902240608lf13f810nd44c6e58e3bf891e@mail.gmail.com>
Message-ID: <49A41825.6040104@gmail.com>

BTM will probably be: Bangladesh transverse mercator

Zahid Parvez wrote:
> hi
>
> I have a shape file which I have to import in GRASS. Shape file is 
> consists of a shape file, a dbf file and a prj file.
> The prj file has following information.
>
> PROJCS["BTM",
> GEOGCS["GCS_Everest_1830",
> DATUM["D_Everest_1830",
> SPHEROID["Everest_1830",6377299.36,300.8017]],
> PRIMEM["Greenwich",0.0],
> UNIT["Degree",0.0174532925199433]],
> PROJECTION["Transverse_Mercator"],
> PARAMETER["False_Easting",500000.0],
> PARAMETER["False_Northing",-2000000.0],
> PARAMETER["Central_Meridian",90.0],
> PARAMETER["Scale_Factor",0.9996],
> PARAMETER["Latitude_Of_Origin",0.0],
> UNIT["Meter",1.0]] 
>
>
> I will be very grateful if anyone could help me to find the ESPG code .
>
>
> Best
> Md. Zahid Parvez
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From jrepetto at free.fr  Tue Feb 24 09:02:31 2009
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue, 24 Feb 2009 18:02:31 +0100
Subject: [Proj] problem in projection
In-Reply-To: <1cee8acf0902240608lf13f810nd44c6e58e3bf891e@mail.gmail.com>
References: <1cee8acf0902240608lf13f810nd44c6e58e3bf891e@mail.gmail.com>
Message-ID: <49A42827.9020900@free.fr>

Zahid Parvez a écrit :
> hi
> 
> I have a shape file which I have to import in GRASS. Shape file is 
> consists of a shape file, a dbf file and a prj file.
> The prj file has following information.
> 
> PROJCS["BTM",
> GEOGCS["GCS_Everest_1830",
> DATUM["D_Everest_1830",
> SPHEROID["Everest_1830",6377299.36,300.8017]],
> PRIMEM["Greenwich",0.0],
> UNIT["Degree",0.0174532925199433]],
> PROJECTION["Transverse_Mercator"],
> PARAMETER["False_Easting",500000.0],
> PARAMETER["False_Northing",-2000000.0],
> PARAMETER["Central_Meridian",90.0],
> PARAMETER["Scale_Factor",0.9996],
> PARAMETER["Latitude_Of_Origin",0.0],
> UNIT["Meter",1.0]] 
> 
> 
> I will be very grateful if anyone could help me to find the ESPG code .
> 

Hello,

The EPSG code for the datum is
EPSG::4042

The EPSG code for the projection is EPSG::16490

(found on http://www.epsg-registry.org/)

Regards,
Jean-Claude


From ndzinn at comcast.net  Tue Feb 24 09:25:12 2009
From: ndzinn at comcast.net (Noel Zinn)
Date: Tue, 24 Feb 2009 11:25:12 -0600
Subject: [Proj] problem in projection
In-Reply-To: <49A41825.6040104@gmail.com>
References: <1cee8acf0902240608lf13f810nd44c6e58e3bf891e@mail.gmail.com>
	<49A41825.6040104@gmail.com>
Message-ID: <B563A187955746FD9EA6ED99608F8AA8@PowerSpec>

EPSG Projected CRS code 3106 comes very close.  It's Bangladesh Transverse
Mercator on the Gulshan 303 datum using Everest 1830 (1937 adjustment).  The
only projection parameter that differs is the False Northing, 0 in the case
of 3106 and -2M in your case (curious).  But this will be a static offset.  

I don't see a better candidate in the current dataset (6.18) that you can
download yourself at www.epsg.org.  The (rather garbled text) below is
extracted from the dataset for 3106.

I have no idea whether this information will be useful to you in Proj4.

Noel

                          International Association of
Detailed Report on Projected
 
Coordinate Reference Systems
                          Oil and Gas Producers



                           data set version         6.18.2
Search Criteria:   *bangladesh*



# 1      Cod   3106         Name:  Gulshan 303 / Bangladesh Transverse
Mercator

                        EPSG abbreviation: Gulshan  / Bangladesh TM

Base GeogCRS:         Gulshan 303
CS
 
axes:
Geodetic Datum:       Gulshan 303
Orde      Axis Name        Abbr                Axis Units
Orientation
 
1        Easting            E                    metre
east

 
2        Northing           N                    metre
north

 
CS           Used in projected and engineering coordinate reference systems.
Semi-major axis        6377276.345      metre
remarks:
(a) =
Map                Bangladesh Transverse Mercator
Inverse flattening     300.8017
Projection:
(1/f) =
Projection         Transverse Mercator
Prime Meridian:       Greenwich
 
Parameter Name              Parameter Value             Unit of
Datum origin:         Gulshan garden, Dhaka.
Measure
 
Latitude of natural origin             0°    0'         0    N
                      observed and adjusted in 1995 by Japan
Longitude of natural origin           90°    0'         0    E
                      International Cooperation Agency (JICA).
 
Scale factor at natural origin               0.9996              unity
 
500000              metre
CRS scope:            Large and medium scale topographic mapping
False easting
                      and engineering survey.
False northing                                 0                 metre

CRS remarks:

 
Projection
 
remarks:
CRS info. source:     Survey of Bangladesh via IGN Paris and Tullow
Data         OGP           Revision      22-Jun-06   Change      2006.470
                       Oil.
source:                    date:                     id:
CRS area of use:      Bangladesh - onshore and offshore.





-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Milo van der Linden
Sent: Tuesday, February 24, 2009 9:54 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] problem in projection

BTM will probably be: Bangladesh transverse mercator

Zahid Parvez wrote:
> hi
>
> I have a shape file which I have to import in GRASS. Shape file is 
> consists of a shape file, a dbf file and a prj file.
> The prj file has following information.
>
> PROJCS["BTM",
> GEOGCS["GCS_Everest_1830",
> DATUM["D_Everest_1830",
> SPHEROID["Everest_1830",6377299.36,300.8017]],
> PRIMEM["Greenwich",0.0],
> UNIT["Degree",0.0174532925199433]],
> PROJECTION["Transverse_Mercator"],
> PARAMETER["False_Easting",500000.0],
> PARAMETER["False_Northing",-2000000.0],
> PARAMETER["Central_Meridian",90.0],
> PARAMETER["Scale_Factor",0.9996],
> PARAMETER["Latitude_Of_Origin",0.0],
> UNIT["Meter",1.0]] 
>
>
> I will be very grateful if anyone could help me to find the ESPG code .
>
>
> Best
> Md. Zahid Parvez
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From jrepetto at free.fr  Tue Feb 24 10:36:18 2009
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Tue, 24 Feb 2009 19:36:18 +0100
Subject: [Proj] problem in projection
In-Reply-To: <49A42827.9020900@free.fr>
References: <1cee8acf0902240608lf13f810nd44c6e58e3bf891e@mail.gmail.com>
	<49A42827.9020900@free.fr>
Message-ID: <49A43E22.3050004@free.fr>

Jean-Claude Repetto wrote :
> 
> The EPSG code for the projection is EPSG::16490

Sorry, this is wrong, because the false northing is different.

Jean-Claude



From jrepetto at free.fr  Tue Feb 24 10:42:58 2009
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Tue, 24 Feb 2009 19:42:58 +0100
Subject: [Proj] problem in projection
In-Reply-To: <B563A187955746FD9EA6ED99608F8AA8@PowerSpec>
References: <1cee8acf0902240608lf13f810nd44c6e58e3bf891e@mail.gmail.com>	<49A41825.6040104@gmail.com>
	<B563A187955746FD9EA6ED99608F8AA8@PowerSpec>
Message-ID: <49A43FB2.1060701@free.fr>

Noel Zinn wrote :
> EPSG Projected CRS code 3106 comes very close.  It's Bangladesh Transverse
> Mercator on the Gulshan 303 datum using Everest 1830 (1937 adjustment).  The
> only projection parameter that differs is the False Northing, 0 in the case
> of 3106 and -2M in your case (curious).

The ellipsoïd is different, too.
- Everest 1830 : a = 6377299.36
- Everest 1830 (1937 adjustment) : a = 6377276.35

Jean-Claude


From Arjan.van.Dijk at rivm.nl  Wed Feb 25 04:40:36 2009
From: Arjan.van.Dijk at rivm.nl (Arjan van Dijk)
Date: Wed, 25 Feb 2009 13:40:36 +0100
Subject: [Proj] Building for and calling from g95-MinGW
In-Reply-To: <49A2EFC8.2000209@geo.uu.nl>
Message-ID: <OF34578256.09553174-ONC1257568.0044D627-C1257568.0045A2A5@notesmail.rivm.nl>

> I downloaded a fresh install of MinGW and Msys just now and the 
> ./configure && make && make install worked without a glitch. So probably 

> upgrading to the newest version of MinGW shoudl solve your problems. 


This suggestion from Paul has led to a nice file named libproj.a.
When used in combination with a sample program based on the
bit of code shown on the Proj site under proj_api (the code
contains errors!!) this library shows its power: it works!

Then Fortran. With some help from people from comp.lang.fortran
I managed to construct a so-called Module that should interface
with the C-functions pj_init_plus and pj_transform in libproj.a.
The module compiles and produces object code. Even my sample 
Fortran program compiles, but it refuses to link: the sample 
program calling pj_init_plus cannot find routine pj_init_plus.

Does anyone have a suggestion of how to proceed?

Once I'll have a working Fortran sample, I'll post the solution 
to this list anyhow.

Regards,


Arjan




Disclaimer RIVM
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090225/a7696302/attachment.html>

From geraldi.evenden at gmail.com  Thu Feb 26 07:35:27 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 26 Feb 2009 10:35:27 -0500
Subject: [Proj] Modern C functions
Message-ID: <200902261035.27742.geraldi.evenden@gmail.com>

This is a quick probe of the programming types in this group.

In finalizing Rel. 2.0 of geodesic and libgeodesy I ran across functions under 
the <string.h> heading which are not in the typical (read Harrison & Steele) 
library references: strcasecmp and strncasecmp.  These are noted in the Gnu 
man.3 as Posix 2001 standard routines.  Obviously, these two routines replace 
strcmp and strncmp and make comparisons case independent.

As soon as I became aware of them I have included them to eliminate the nasty, 
nasty fact of having to shift when typing in WGS84 and can now use 
ellps=wgs84.

A little net browsing has yielded mixed results as to how well know these 
functions are.

Thus my question here is: do non-Gnu C compilers used by this audience 
recognize these functions?

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From warmerdam at pobox.com  Thu Feb 26 08:18:37 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 26 Feb 2009 11:18:37 -0500
Subject: [Proj] Modern C functions
In-Reply-To: <200902261035.27742.geraldi.evenden@gmail.com>
References: <200902261035.27742.geraldi.evenden@gmail.com>
Message-ID: <49A6C0DD.4020107@pobox.com>

Gerald I. Evenden wrote:
> This is a quick probe of the programming types in this group.
> 
> In finalizing Rel. 2.0 of geodesic and libgeodesy I ran across functions under 
> the <string.h> heading which are not in the typical (read Harrison & Steele) 
> library references: strcasecmp and strncasecmp.  These are noted in the Gnu 
> man.3 as Posix 2001 standard routines.  Obviously, these two routines replace 
> strcmp and strncmp and make comparisons case independent.
> 
> As soon as I became aware of them I have included them to eliminate the nasty, 
> nasty fact of having to shift when typing in WGS84 and can now use 
> ellps=wgs84.
> 
> A little net browsing has yielded mixed results as to how well know these 
> functions are.
> 
> Thus my question here is: do non-Gnu C compilers used by this audience 
> recognize these functions?

Gerald,

My experience has been that all POSIX environments have these functions, but
that Win32 (aka MSVC) instead uses strnicmp() and stricmp() to do the same
thing.  I've lived with macros like:

#ifndef EQUAL
#if defined(WIN32) || defined(WIN32CE)
#  define EQUALN(a,b,n)           (strnicmp(a,b,n)==0)
#  define EQUAL(a,b)              (stricmp(a,b)==0)
#else
#  define EQUALN(a,b,n)           (strncasecmp(a,b,n)==0)
#  define EQUAL(a,b)              (strcasecmp(a,b)==0)
#endif
#endif

so I'm not sure if the situation has improved with recent MSVC releases.

These functions have been a classic win32/unix porting hassle for two
decades.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From aaron at cartopac.com  Thu Feb 26 08:23:26 2009
From: aaron at cartopac.com (Aaron Friesen)
Date: Thu, 26 Feb 2009 11:23:26 -0500
Subject: [Proj] Modern C functions
In-Reply-To: <200902261035.27742.geraldi.evenden@gmail.com>
References: <200902261035.27742.geraldi.evenden@gmail.com>
Message-ID: <90200BC582E4FF488816D357540C1D4D1326589910@VMBX103.ihostexchange.net>

Gerald,

> -----Original Message-----
> Re: strcasecmp and strncasecmp.  
> 
> Thus my question here is: do non-Gnu C compilers used by this audience
> recognize these functions?

I do not believe Microsoft compilers use them.  _stricmp and _strnicmp
are used (or their wchar_t counterparts _wcsicmp and _wcsnicmp).

Aaron


From geraldi.evenden at gmail.com  Thu Feb 26 08:47:33 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 26 Feb 2009 11:47:33 -0500
Subject: [Proj] Modern C functions
In-Reply-To: <49A6C0DD.4020107@pobox.com>
References: <200902261035.27742.geraldi.evenden@gmail.com>
	<49A6C0DD.4020107@pobox.com>
Message-ID: <200902261147.33090.geraldi.evenden@gmail.com>

On Thursday 26 February 2009 11:18:37 am Frank Warmerdam wrote:
> Gerald I. Evenden wrote:
> > This is a quick probe of the programming types in this group.
> >
> > In finalizing Rel. 2.0 of geodesic and libgeodesy I ran across functions
	...
> My experience has been that all POSIX environments have these functions,
> but that Win32 (aka MSVC) instead uses strnicmp() and stricmp() to do the
> same thing.  I've lived with macros like:
>
> #ifndef EQUAL
> #if defined(WIN32) || defined(WIN32CE)
> #  define EQUALN(a,b,n)           (strnicmp(a,b,n)==0)
> #  define EQUAL(a,b)              (stricmp(a,b)==0)
> #else
> #  define EQUALN(a,b,n)           (strncasecmp(a,b,n)==0)
> #  define EQUAL(a,b)              (strcasecmp(a,b)==0)
> #endif
> #endif

It is pointless to make a tirade against a sebaceous entity seeking world 
domination, the embodiment of "Big Brother", but I cannot imagine who, what 
or why the "i" means in the name stricmp.

Sigh!

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From EMiller at dfg.ca.gov  Thu Feb 26 09:09:21 2009
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Thu, 26 Feb 2009 09:09:21 -0800
Subject: [Proj] Modern C functions
In-Reply-To: <200902261035.27742.geraldi.evenden@gmail.com>
References: <200902261035.27742.geraldi.evenden@gmail.com>
Message-ID: <49A65C40.95FD.00E4.0@dfg.ca.gov>

Windows recognizes strncmp, but has stricmp and strnicmp instead of strcasecmp and strncasecmp.

int stricmp(const char *, const char *);
int strnicmp(const char *, const char *, size_t);


>>> On 2/26/2009 at 7:35 AM, "Gerald I. Evenden" <geraldi.evenden at gmail.com>
wrote:
> This is a quick probe of the programming types in this group.
> 
> In finalizing Rel. 2.0 of geodesic and libgeodesy I ran across functions 
> under 
> the <string.h> heading which are not in the typical (read Harrison & Steele) 
> library references: strcasecmp and strncasecmp.  These are noted in the Gnu 
> man.3 as Posix 2001 standard routines.  Obviously, these two routines 
> replace 
> strcmp and strncmp and make comparisons case independent.
> 
> As soon as I became aware of them I have included them to eliminate the 
> nasty, 
> nasty fact of having to shift when typing in WGS84 and can now use 
> ellps=wgs84.
> 
> A little net browsing has yielded mixed results as to how well know these 
> functions are.
> 
> Thus my question here is: do non-Gnu C compilers used by this audience 
> recognize these functions?



From didier.richard at ign.fr  Thu Feb 26 09:22:55 2009
From: didier.richard at ign.fr (RICHARD Didier)
Date: Thu, 26 Feb 2009 18:22:55 +0100 (CET)
Subject: [Proj] Modern C functions
In-Reply-To: <200902261147.33090.geraldi.evenden@gmail.com>
References: <200902261035.27742.geraldi.evenden@gmail.com>
	<49A6C0DD.4020107@pobox.com>
	<200902261147.33090.geraldi.evenden@gmail.com>
Message-ID: <33525.87.231.96.39.1235668975.squirrel@webmail.ign.fr>


> On Thursday 26 February 2009 11:18:37 am Frank Warmerdam wrote:
>> Gerald I. Evenden wrote:
>> > This is a quick probe of the programming types in this group.
>> >
>> > In finalizing Rel. 2.0 of geodesic and libgeodesy I ran across
>> functions
> 	...
>> My experience has been that all POSIX environments have these functions,
>> but that Win32 (aka MSVC) instead uses strnicmp() and stricmp() to do
>> the
>> same thing.  I've lived with macros like:
>>
>> #ifndef EQUAL
>> #if defined(WIN32) || defined(WIN32CE)
>> #  define EQUALN(a,b,n)           (strnicmp(a,b,n)==0)
>> #  define EQUAL(a,b)              (stricmp(a,b)==0)
>> #else
>> #  define EQUALN(a,b,n)           (strncasecmp(a,b,n)==0)
>> #  define EQUAL(a,b)              (strcasecmp(a,b)==0)
>> #endif
>> #endif
>
> It is pointless to make a tirade against a sebaceous entity seeking world
> domination, the embodiment of "Big Brother", but I cannot imagine who,
> what
> or why the "i" means in the name stricmp.
>

i[gnore case], I guess !-)

didier

> Sigh!
>
> --
> The whole religious complexion of the modern world is due
> to the absence from Jerusalem of a lunatic asylum.
> -- Havelock Ellis (1859-1939) British psychologist
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


-- 
RICHARD Didier - Chef du pôle technique du Géoportail
2/4, avenue Pasteur - 94165 Saint Mandé Cedex
Tél : +33 (0) 1 43 98 83 23


From warmerdam at pobox.com  Thu Feb 26 09:31:47 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 26 Feb 2009 12:31:47 -0500
Subject: [Proj] Modern C functions
In-Reply-To: <200902261147.33090.geraldi.evenden@gmail.com>
References: <200902261035.27742.geraldi.evenden@gmail.com>
	<49A6C0DD.4020107@pobox.com>
	<200902261147.33090.geraldi.evenden@gmail.com>
Message-ID: <49A6D203.7070308@pobox.com>

Gerald I. Evenden wrote:
 >Frank wrote:
>> My experience has been that all POSIX environments have these functions,
>> but that Win32 (aka MSVC) instead uses strnicmp() and stricmp() to do the
>> same thing.  I've lived with macros like:
>>
>> #ifndef EQUAL
>> #if defined(WIN32) || defined(WIN32CE)
>> #  define EQUALN(a,b,n)           (strnicmp(a,b,n)==0)
>> #  define EQUAL(a,b)              (stricmp(a,b)==0)
>> #else
>> #  define EQUALN(a,b,n)           (strncasecmp(a,b,n)==0)
>> #  define EQUAL(a,b)              (strcasecmp(a,b)==0)
>> #endif
>> #endif
> 
> It is pointless to make a tirade against a sebaceous entity seeking world 
> domination, the embodiment of "Big Brother", but I cannot imagine who, what 
> or why the "i" means in the name stricmp.

Gerald,

I believe is stands for "insensitive" which applies to the case comparison
and their level of respect for developers trying build portable applications.

> Sigh!

Indeed!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From aaron at cartopac.com  Thu Feb 26 16:24:18 2009
From: aaron at cartopac.com (Aaron Friesen)
Date: Thu, 26 Feb 2009 19:24:18 -0500
Subject: [Proj] How to use +towgs84
Message-ID: <90200BC582E4FF488816D357540C1D4D1326589A50@VMBX103.ihostexchange.net>

Everyone,

I'm trying to familiarize myself with proj.

I'm trying to use cs2cs to do a datum shift where a 7-parm
transformation is used.  I want it to do the shift in
both directions.

"proj -ld" seems to provide a possible example.  The listing
for ire65 has example towgs84 settings.

Datum:      ire65
Ellipse:    modif_airy (sic)
Comment:	towgs84=482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15

What do I need to specify for cs2cs for both directions
of the transform?

+proj=latlong +ellps=mod_airy

+to

+proj=latlong +ellps=WGS84

seems like a resonable start.  Where does the +towgs84 argument go?
How do things change in the reverse direction?

Thanks for your assistance,

Aaron



From glynn at gclements.plus.com  Thu Feb 26 19:31:58 2009
From: glynn at gclements.plus.com (Glynn Clements)
Date: Fri, 27 Feb 2009 03:31:58 +0000
Subject: [Proj] Modern C functions
In-Reply-To: <200902261035.27742.geraldi.evenden@gmail.com>
References: <200902261035.27742.geraldi.evenden@gmail.com>
Message-ID: <18855.24238.679253.226779@cerise.gclements.plus.com>


Gerald I. Evenden wrote:

> This is a quick probe of the programming types in this group.
> 
> In finalizing Rel. 2.0 of geodesic and libgeodesy I ran across functions under 
> the <string.h> heading which are not in the typical (read Harrison & Steele) 
> library references: strcasecmp and strncasecmp.  These are noted in the Gnu 
> man.3 as Posix 2001 standard routines.  Obviously, these two routines replace 
> strcmp and strncmp and make comparisons case independent.
> 
> As soon as I became aware of them I have included them to eliminate the nasty, 
> nasty fact of having to shift when typing in WGS84 and can now use 
> ellps=wgs84.
> 
> A little net browsing has yielded mixed results as to how well know these 
> functions are.
> 
> Thus my question here is: do non-Gnu C compilers used by this audience 
> recognize these functions?

It's not an issue for the compiler, but for the standard library.

The are specified by POSIX, but not by ANSI C (neither C89 nor C99).

As others have already pointed out, Windows doesn't provide them. 
Also, gcc won't recognise them if you use -ansi and don't explicitly
add the POSIX feature macros, e.g. -D_POSIX_SOURCE. I don't know
whether uclibc has them.

Also, bear in mind that the behaviour depends upon the locale; using
them for strings containing anything other than alphanumeric
characters is problematic.

-- 
Glynn Clements <glynn at gclements.plus.com>


From Arjan.van.Dijk at rivm.nl  Fri Feb 27 00:54:15 2009
From: Arjan.van.Dijk at rivm.nl (Arjan van Dijk)
Date: Fri, 27 Feb 2009 09:54:15 +0100
Subject: [Proj] Building with fresh gcc snapshot on Windows-XP fails
In-Reply-To: <OF34578256.09553174-ONC1257568.0044D627-C1257568.0045A2A5@notesmail.rivm.nl>
Message-ID: <OF4CBE829C.7595D7BC-ONC125756A.002F9DC9-C125756A.0030E99C@notesmail.rivm.nl>

Hi!

After Paul Hiemstra gave me the hint to make a fresh install of MinGW,
I managed to build the Proj-4 library libproj.a on my Win-XP box.
Then I encountered problems with the gfortran version included with that 
gcc collection,
and someone pointed me at an ultimately fresh gcc snapshot, which 
can be downloaded from www.equation.com. 
My fortran performance was greatly boosted by this upgrade,
but Proj-4 now refuses to be built. Again... Of course I still have the
old library from the gcc version that I installed some days ago, but I 
don't like
having to have two gcc versions for all the different needs.

The gcc version that builds Proj-4 without problems is:

$ gcc -v 
Reading specs from c:/mingw/bin/../lib/gcc/mingw32/3.4.5/specs 
Configured with: ../gcc-3.4.5-20060117-3/configure --with-gcc --with- 
gnu-ld --with-gnu-as --host=mingw32 --target=mingw32 --prefix=/mingw 
-- 
enable-threads --disable-nls --enable-languages=c,c+ 
+,f77,ada,objc,java --disable-win32-registry --disable-shared -- 
enable- 
sjlj-exceptions --enable-libgcj --disable-java-awt --without-x -- 
enable-java-gc=boehm --disable-libgcj-debug --enable-interpreter -- 
enable-hash-synchronization --enable-libstdcxx-debug 
Thread model: win32 
gcc version 3.4.5 (mingw-vista special r3) 

The snapshot that has better Fortran support but that crashes building 
Proj-4 is:

$ gcc -v 
Built by Equation Solution <http://www.Equation.com>.
Using built-in specs.
Target: i386-pc-mingw32
Configured with: ../gcc-4.4-20090220-mingw/configure 
--host=i386-pc-mingw32 --build=x86_64-unknown-linux-gnu 
--target=i386-pc-mingw32 
--prefix=/home/gfortran/gcc-home/binary/mingw32/native/x86_32/gcc/4.4-20090220 
--with-gcc --with-gnu-ld --with-gnu-as --disable-shared --disable-nls 
--disable-tls 
--with-gmp=/home/gfortran/gcc-home/binary/mingw32/native/x86_32/gmp 
--with-mpfr=/home/gfortran/gcc-home/binary/mingw32/native/x86_32/mpfr 
--enable-languages=c,fortran,c++ 
--with-sysroot=/home/gfortran/gcc-home/binary/mingw32/cross/x86_32/gcc/4.4-20090220 
--enable-libgomp --enable-threads=win32 --disable-win32-registry
Thread model: win32
gcc version 4.4.0 20090220 (experimental) (GCC) 


Using this gcc, ./configure ran okay, but "make" crashed: 
$ make 
Making all in src 
make[1]: Entering directory `d:/Arjan/proj/proj-4.6.1/src' 
c:/mingw/bin/make  all-am 
make[2]: Entering directory `d:/Arjan/proj/proj-4.6.1/src' 
C:/msys/1.0/bin/sh.exe ../libtool --tag=CC   --mode=compile gcc - 
DHAVE_CONFIG_H -I. -DPROJ_LIB=\"/usr/local/share/proj\"     -g -O2 -MT 
jniproj.lo -MD -MP -MF .deps/jniproj.Tpo -c -o jniproj.lo jniproj.c 
Xjniproj.Tpo -c -o jniproj.lo jniproj.lo 
libtool: compile: libobj name `jniproj.Tpo -c -o jniproj.lo 
jniproj.lo' may not contain shell special characters. 
rm: invalid option -- c 
Try `rm --help' for more information. 
 gcc -DHAVE_CONFIG_H -I. "-DPROJ_LIB=\\/usr/local/share/proj\" -g -O2 - 
MT jniproj.lo -MD -MP -MF .deps/jniproj.Tpo -c -o jniproj.lo 
jniproj.c"  -DDLL_EXPORT -DPIC -o .libs/jniproj.Tpo -c -o jniproj.lo 
jniproj.o 
gcc.exe: jniproj.o: linker input file unused because linking not done 
 gcc -DHAVE_CONFIG_H -I. "-DPROJ_LIB=\\/usr/local/share/proj\" -g -O2 - 
MT jniproj.lo -MD -MP -MF .deps/jniproj.Tpo -c -o jniproj.lo 
jniproj.c" -o jniproj.Tpo -c -o jniproj.lo jniproj.o >/dev/null 2>&1 
mv -f .deps/jniproj.Tpo .deps/jniproj.Plo 
mv: cannot stat `.deps/jniproj.Tpo': No such file or directory 
make[2]: *** [jniproj.lo] Error 1 
make[2]: Leaving directory `d:/Arjan/proj/proj-4.6.1/src' 
make[1]: *** [all] Error 2 
make[1]: Leaving directory `d:/Arjan/proj/proj-4.6.1/src' 
make: *** [all-recursive] Error 1 
Somehow the new gcc version cannot compile the same code that went 
allright with the old version, and that had led to a working C sample. 
Is the Proj-4 project "very sensitive" or "less generic"? Or is there a 
bug in the gcc snapshot? 

Arjan 




Disclaimer RIVM
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090227/e5a8f8ca/attachment.html>

From jagoncal at gmail.com  Fri Feb 27 06:37:54 2009
From: jagoncal at gmail.com (=?ISO-8859-1?Q?Jose_Gon=E7alves?=)
Date: Fri, 27 Feb 2009 14:37:54 +0000
Subject: [Proj] How to use +towgs84
In-Reply-To: <90200BC582E4FF488816D357540C1D4D1326589A50@VMBX103.ihostexchange.net>
References: <90200BC582E4FF488816D357540C1D4D1326589A50@VMBX103.ihostexchange.net>
Message-ID: <6a91fcb00902270637q6c6de464n7f5de5bf6a70514@mail.gmail.com>

Any coordinate system must have a "towgs84" or any other form of conversion
to a global datum. In particular WGS84 itself has "+towgs84=0,0,0". You
should use:

  cs2cs +proj=latlong +ellps=mod_airy +towgs84=xxxxx +to +proj=latlong
+ellps=WGS84 +towgs84=0,0,0
where xxxxx is the set of 7 parameters you have. They should have signs
according to the conversion from local datum to WGS84 and rotations must
agree with the "position vector rotation" method (not "coordinate frame
rotation"). For the conversion from WGS84 to local datum just change the two
coordinate system strings, not the signs.

Instead of  using
    +proj=latlong +ellps=WGS84 +towgs84=0,0,0
you can use
    +proj=latlong +datum=WGS84
which is equivalent.

Regards

Jose' Gonçalves

2009/2/27 Aaron Friesen <aaron at cartopac.com>

> Everyone,
>
> I'm trying to familiarize myself with proj.
>
> I'm trying to use cs2cs to do a datum shift where a 7-parm
> transformation is used.  I want it to do the shift in
> both directions.
>
> "proj -ld" seems to provide a possible example.  The listing
> for ire65 has example towgs84 settings.
>
> Datum:      ire65
> Ellipse:    modif_airy (sic)
> Comment:        towgs84=482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15
>
> What do I need to specify for cs2cs for both directions
> of the transform?
>
> +proj=latlong +ellps=mod_airy
>
> +to
>
> +proj=latlong +ellps=WGS84
>
> seems like a resonable start.  Where does the +towgs84 argument go?
> How do things change in the reverse direction?
>
> Thanks for your assistance,
>
> Aaron
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090227/1cc2f4ac/attachment.html>

From geraldi.evenden at gmail.com  Fri Feb 27 07:19:44 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Fri, 27 Feb 2009 10:19:44 -0500
Subject: [Proj] Modern C functions
In-Reply-To: <18855.24238.679253.226779@cerise.gclements.plus.com>
References: <200902261035.27742.geraldi.evenden@gmail.com>
	<18855.24238.679253.226779@cerise.gclements.plus.com>
Message-ID: <200902271019.44924.geraldi.evenden@gmail.com>

On Thursday 26 February 2009 10:31:58 pm Glynn Clements wrote:
> Gerald I. Evenden wrote:
> > This is a quick probe of the programming types in this group.
> >
> > In finalizing Rel. 2.0 of geodesic and libgeodesy I ran across functions
> > under the <string.h> heading which are not in the typical (read Harrison
> > & Steele) library references: strcasecmp and strncasecmp.  These are
> > noted in the Gnu man.3 as Posix 2001 standard routines.  Obviously, these
> > two routines replace strcmp and strncmp and make comparisons case
> > independent.
> >
> > As soon as I became aware of them I have included them to eliminate the
> > nasty, nasty fact of having to shift when typing in WGS84 and can now use
> > ellps=wgs84.
> >
> > A little net browsing has yielded mixed results as to how well know these
> > functions are.
> >
> > Thus my question here is: do non-Gnu C compilers used by this audience
> > recognize these functions?
>
> It's not an issue for the compiler, but for the standard library.

IMHO, when discussing in a general context, the term "compiler" consists of 
the entire process of generating an executable module and all it constituent 
pieces.  Including libraries.

> The are specified by POSIX, but not by ANSI C (neither C89 nor C99).

I have not concerned myself with "ANSI" in 15+ years as it seems superfluous 
with so many other "standards" around.

> As others have already pointed out, Windows doesn't provide them.
> Also, gcc won't recognise them if you use -ansi and don't explicitly
> add the POSIX feature macros, e.g. -D_POSIX_SOURCE. I don't know
> whether uclibc has them.

The term "uclibc" does not make sense to me.  I am only used to the 
terminology libxxxxx.  The "uc" prefix seems odd.

As for Windoze, I understand that there are non-M$ compilers available for 
Windoze and these may not be so self righteous.

> Also, bear in mind that the behaviour depends upon the locale; using
> them for strings containing anything other than alphanumeric
> characters is problematic.

Seemingly the most common usage is for equality: strXcmp(a,b)==0.  I see no 
hassle with testing anything within the character set as long as str a and 
str b are of the  same character set type.  But yes, there may be some 
problems with some non-Latin alphabetics.  However, in the context of a given 
program and its control of the alphabet---like geodesic, proj, etc.---then we 
are only testing against an in-house alphabet.  If someone wants to convert a 
program into using a non-latin alphabet, then the problem is transferred to 
their domain.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From Arjan.van.Dijk at rivm.nl  Fri Feb 27 12:40:51 2009
From: Arjan.van.Dijk at rivm.nl (Arjan van Dijk)
Date: Fri, 27 Feb 2009 21:40:51 +0100
Subject: [Proj] Using Proj from Fortran
In-Reply-To: <OF34578256.09553174-ONC1257568.0044D627-C1257568.0045A2A5@notesmail.rivm.nl>
References: <OF34578256.09553174-ONC1257568.0044D627-C1257568.0045A2A5@notesmail.rivm.nl>
Message-ID: <OFA30DB716.F76A10CB-ONC125756A.00719ABB-C125756A.00719AC9@notesmail.rivm.nl>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090227/25d09b1e/attachment.html>

From glynn at gclements.plus.com  Fri Feb 27 14:04:31 2009
From: glynn at gclements.plus.com (Glynn Clements)
Date: Fri, 27 Feb 2009 22:04:31 +0000
Subject: [Proj] Modern C functions
In-Reply-To: <200902271019.44924.geraldi.evenden@gmail.com>
References: <200902261035.27742.geraldi.evenden@gmail.com>
	<18855.24238.679253.226779@cerise.gclements.plus.com>
	<200902271019.44924.geraldi.evenden@gmail.com>
Message-ID: <18856.25455.381595.291214@cerise.gclements.plus.com>


Gerald I. Evenden wrote:

> > > Thus my question here is: do non-Gnu C compilers used by this audience
> > > recognize these functions?
> >
> > It's not an issue for the compiler, but for the standard library.
> 
> IMHO, when discussing in a general context, the term "compiler" consists of 
> the entire process of generating an executable module and all it constituent 
> pieces.  Including libraries.

But on many platforms, the two aren't necessarily correlated, i.e. you
have a choice of compilers and/or a choice of libc versions. It's the
choice of libc which affects whether e.g. strcasecmp() is available,
not the compiler.

> > The are specified by POSIX, but not by ANSI C (neither C89 nor C99).
> 
> I have not concerned myself with "ANSI" in 15+ years as it seems superfluous 
> with so many other "standards" around.
> 
> > As others have already pointed out, Windows doesn't provide them.
> > Also, gcc won't recognise them if you use -ansi and don't explicitly
> > add the POSIX feature macros, e.g. -D_POSIX_SOURCE. I don't know
> > whether uclibc has them.
> 
> The term "uclibc" does not make sense to me.  I am only used to the 
> terminology libxxxxx.  The "uc" prefix seems odd.

uclibc is a minimal implementation of the standard C library,
originally designed for embedded systems. The "uc" prefix is an
abbreviation for "microcontroller" (u = mu = micro), although the
library is also used on (usually Linux-based) systems with "real" CPUs
but with relatively little memory (PDAs, etc).

> As for Windoze, I understand that there are non-M$ compilers available for 
> Windoze and these may not be so self righteous.

It's not about the compiler, but the standard library. E.g. MinGW is
just gcc for Windows. The "libc" which provides the ANSI/POSIX
functions is the same MSVCRT (Microsoft Visual C Runtime) that would
be used by Microsoft's toolchain.

> > Also, bear in mind that the behaviour depends upon the locale; using
> > them for strings containing anything other than alphanumeric
> > characters is problematic.
> 
> Seemingly the most common usage is for equality: strXcmp(a,b)==0.  I see no 
> hassle with testing anything within the character set as long as str a and 
> str b are of the  same character set type.  But yes, there may be some 
> problems with some non-Latin alphabetics.  However, in the context of a given 
> program and its control of the alphabet---like geodesic, proj, etc.---then we 
> are only testing against an in-house alphabet.  If someone wants to convert a 
> program into using a non-latin alphabet, then the problem is transferred to 
> their domain.

Using it just for projection names won't be a problem.

But it isn't just non-Latin alphabets which are problematic, but
anything beyond US-ASCII. Many of the ISO-646 character sets replace
less-used symbols with additional characters; e.g. ISO-646-NO
(Norwegian) replaces [\]{|} with ÆØÅæøå, so strcasecmp("[\]", "{|}")
will return zero in such a locale.

I don't know how widespread such locales are (most Latin-based
locales now use ISO-8859-1 or UTF-8), but they were common enough for
the C99 standard to add support for digraphs:

       [#3] In all aspects of the language, these six tokens

               <:  :>  <%  %>  %:  %:%:

       behave, respectively, the same as these six tokens

               [   ]   {   }   #   ##

so that C code can be written in environments where these characters
aren't available.

FWIW, GRASS' solution is to provide its own function, G_strcasecmp(),
which specifically only affects A-Z:

	if (xx >= 'A' && xx <= 'Z')
	    xx = xx + 'a' - 'A';
	if (yy >= 'A' && yy <= 'Z')
	    yy = yy + 'a' - 'A';

rather than using tolower(), which is affected by the locale.

-- 
Glynn Clements <glynn at gclements.plus.com>


From support.mn at elisanet.fi  Sat Feb 28 08:54:04 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Sat, 28 Feb 2009 18:54:04 +0200 (EET)
Subject: [Proj] Modern C functions
Message-ID: <31345148.430171235840045287.JavaMail.support.mn@elisanet.fi>

Hi,

The latest MSVC environments they would like people to use safe string functions and usually issue several warnings during compilation. In UNICODE and other multibyte character sets you have to handle charaters instead of bytes. See the next text from MSVC help:


"Safe String FunctionsString safe functions duplicate or enhance familiar string functions from the standard C run-time (CRT) library. 

Many enhancements enable the string functions to work with Unicode or extended character sets. 

The strcmp function compares string1 and string2 lexicographically and returns a value indicating their relationship. wcscmp and _mbscmp are, respectively, wide-character and multibyte-character versions of strcmp. _mbscmp recognizes multibyte-character sequences according to the current multibyte code page and returns _NLSCMPERROR on an error. (For more information, see Code Pages.) Also, if string1 or string2 is a null pointer, _mbscmp invokes the invalid parameter handler, as described in Parameter Validation. If execution is allowed to continue, _mbscmp returns _NLSCMPERROR and sets errno to EINVAL. strcmp and wcscmp do not validate their parameters. These three functions behave identically otherwise.

The _stricmp function lexicographically compares lowercase versions of string1 and string2 and returns a value indicating their relationship. _stricmp differs from _stricoll in that the _stricmp comparison is affected by LC_CTYPE, whereas the _stricoll comparison is according to the LC_CTYPE and LC_COLLATE categories of the locale. For more information on the LC_COLLATE category, see setlocale and Locale Categories. The versions of these functions without the _l suffix use the current locale for locale-dependent behavior. The versions with the suffix are identical except that they use the locale passed in instead. For more information, see Locale. 

The _strcmpi function is equivalent to _stricmp and is provided for backward compatibility only. 

Because stricmp does lowercase comparisons, it may result in unexpected behavior. 

To illustrate when case conversion by stricmp affects the outcome of a comparison, assume that you have the two strings JOHNSTON and JOHN_HENRY. The string JOHN_HENRY will be considered less than JOHNSTON because the "_" has a lower ASCII value than a lowercase S. In fact, any character that has an ASCII value between 91 and 96 will be considered less than any letter. 

If the strcmp function is used instead of stricmp, JOHN_HENRY will be greater than JOHNSTON. 

_wcsicmp and _mbsicmp are wide-character and multibyte-character versions of _stricmp. The arguments and return value of _wcsicmp are wide-character strings; those of _mbsicmp are multibyte-character strings. _mbsicmp recognizes multibyte-character sequences according to the current multibyte code page and returns _NLSCMPERROR on an error. (For more information, see Code Pages.) These three functions behave identically otherwise. 

_wcsicmp and wcscmp behave identically except that wcscmp does not convert its arguments to lowercase before comparing them. _mbsicmp and _mbscmp behave identically except that _mbscmp does not convert its arguments to lowercase before comparing them. 

You will need to call setlocale for _wcsicmp to work with Latin 1 characters. The C locale is in effect by default, so, for example, ä will not compare equal to Ä. Call setlocale with any locale other than the C locale before the call to _wcsicmp. The following sample demonstrates how _wcsicmp is sensitive to the locale: 

The strncmp function lexicographically compares, at most, the first count characters in string1 and string2 and returns a value indicating the relationship between the substrings. strncmp is a case-sensitive version of _strnicmp. wcsncmp and _mbsncmp are case-sensitive versions of _wcsnicmp and _mbsnicmp. 

wcsncmp and _mbsncmp are wide-character and multibyte-character versions of strncmp. The arguments and return value of wcsncmp are wide-character strings; those of _mbsncmp are multibyte-character strings. _mbsncmp recognizes multibyte-character sequences according to a multibyte code page and returns _NLSCMPERROR on an error. 

Also, _mbsncmp validates its parameters. If string1 or string2 is a null pointer,the invalid parameter handler is invoked, as described in Parameter Validation . If execution is allowed to continue, _mbsncmp returns _NLSCMPERROR and sets errno to EINVAL. strncmp and wcsncmp do not validate their parameters. These three functions behave identically otherwise. 

The output value is affected by the setting of the LC_CTYPE category setting of the locale; see setlocale for more information. The versions of these functions without the _l suffix use the current locale for this locale-dependent behavior; the versions with the _l suffix are identical except that they use the locale parameter passed in instead. For more information, see Locale.

 The _strnicmp function lexicographically compares, at most, the first count characters of string1 and string2. The comparison is performed without regard to case; _strnicmp is a case-insensitive version of strncmp. The comparison ends if a terminating null character is reached in either string before count characters are compared. If the strings are equal when a terminating null character is reached in either string before count characters are compared, the shorter string is lesser. 

The characters from 91 to 96 in the ASCII table ('[', '\', ']', '^', '_', and '`') will evaluate as less than any alphabetic character. This ordering is identical to that of stricmp. 

_wcsnicmp and _mbsnicmp are wide-character and multibyte-character versions of _strnicmp. The arguments and return value of _wcsnicmp are wide-character strings; those of _mbsnicmp are multibyte-character strings. _mbsnicmp recognizes multibyte-character sequences according to the current multibyte code page and returns _NLSCMPERROR on an error. For more information, see Code Pages. These three functions behave identically otherwise. These functions are affected by the locale setting. The versions without the _l suffix use the current locale for their locale-dependent behavior. The versions with the _l suffix are identical except that they use the locale passed in instead. For more information, see Locale. 

All of these functions validate their parameters. If either string1 or string2 is a null pointer, the invalid parameter handler is invoked, as described in Parameter Validation. If execution is allowed to continue, these functions return _NLSCMPERROR and set errno to EINVAL. "



What a mess might somebody think?  :)

Regards: Janne.

--------------------------------



"Gerald I. Evenden" [geraldi.evenden at gmail.com] kirjoitti: 
> This is a quick probe of the programming types in this group.
> 
> In finalizing Rel. 2.0 of geodesic and libgeodesy I ran across functions under 
> the <string.h> heading which are not in the typical (read Harrison & Steele) 
> library references: strcasecmp and strncasecmp.  These are noted in the Gnu 
> man.3 as Posix 2001 standard routines.  Obviously, these two routines replace 
> strcmp and strncmp and make comparisons case independent.
> 
> As soon as I became aware of them I have included them to eliminate the nasty, 
> nasty fact of having to shift when typing in WGS84 and can now use 
> ellps=wgs84.
> 
> A little net browsing has yielded mixed results as to how well know these 
> functions are.
> 
> Thus my question here is: do non-Gnu C compilers used by this audience 
> recognize these functions?
> 
> -- 
> The whole religious complexion of the modern world is due
> to the absence from Jerusalem of a lunatic asylum.
> -- Havelock Ellis (1859-1939) British psychologist
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 



From geraldi.evenden at gmail.com  Sat Feb 28 09:28:06 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sat, 28 Feb 2009 12:28:06 -0500
Subject: [Proj] Modern C functions
In-Reply-To: <31345148.430171235840045287.JavaMail.support.mn@elisanet.fi>
References: <31345148.430171235840045287.JavaMail.support.mn@elisanet.fi>
Message-ID: <200902281228.06756.geraldi.evenden@gmail.com>

On Saturday 28 February 2009 11:54:04 am support.mn at elisanet.fi wrote:
> Hi,
>
> The latest MSVC environments they would like people to use safe string
> functions and usually issue several warnings during compilation. In UNICODE
	etc, etc. ...
>>continue,
> these functions return _NLSCMPERROR and set errno to EINVAL. "
>
> What a mess might somebody think?  :)
>
> Regards: Janne.
Amen!

And from a previous response I made off this list:

I think some have forgotten a serious problem: what about Chinese and Kenji?

Sorry to be so un-PC but to quote Rhett Butler's response to 
Scarlett:  "Frankly my dear.  I don't give a damn."  :-)

This has gone way too far beyond my original question about the availability 
of str[n]casecmp.  All code I write is strictly designed with "Basic Latin" 
as the character set---nothing more, nothing less.  Documentation is internal 
to the code and is in fractured American English in that same character set.  
Please limit complaints to split infinitives, dangling whatevers and such.
-----------------------

Thought for today: how do you sort Chinese when making the Beijing phone book?
------------------------
PS: I will probably include my quick version in the geodesy library if 
installer cannot find routine in local library (the n is a simple update):

#include <ctype.h>
        int
strcasecmp(const char *s1, const char *s2) {
        int ret = 0;

        while (*s1 && *s2 && (ret = tolower(*s1++) - tolower(*s2++))) ;
        return ret ? (ret < 0 ? -1 : 1):0;
}
Ahhh, something more to pick on.  ;-)

Sheeeshhh!
-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ovv at hetnet.nl  Sat Feb 28 10:28:00 2009
From: ovv at hetnet.nl (OvV_HN)
Date: Sat, 28 Feb 2009 19:28:00 +0100
Subject: [Proj] Modern C functions
In-Reply-To: <200902281228.06756.geraldi.evenden@gmail.com>
References: <31345148.430171235840045287.JavaMail.support.mn@elisanet.fi>
	<200902281228.06756.geraldi.evenden@gmail.com>
Message-ID: <50F858614FB941988BEA0B56B2DA54C2@PCHP>


----- Original Message ----- 
From: "Gerald I. Evenden" <geraldi.evenden at gmail.com>
To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
Sent: Saturday, February 28, 2009 6:28 PM
Subject: Re: [Proj] Modern C functions

...
> Thought for today: how do you sort Chinese when making the Beijing phone 
> book?
Depends. Either by latin chars in the pinyin transliteration or by KangXi 
radicals.
Undoubtedly there are dozens of people who know it better and have devised 
their own sorting method, not understood by the majority of chinese 
people....
Probably some programmers will see the analogy?

Oscar van Vlijmen




From knudsen.thomas at gmail.com  Sat Feb 28 12:15:01 2009
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Sat, 28 Feb 2009 21:15:01 +0100
Subject: [Proj] Modern C functions
In-Reply-To: <200902281228.06756.geraldi.evenden@gmail.com>
References: <31345148.430171235840045287.JavaMail.support.mn@elisanet.fi>
	<200902281228.06756.geraldi.evenden@gmail.com>
Message-ID: <7e6835790902281215y6f5586d3r3bc5b46df4dae492@mail.gmail.com>

2009/2/28 Gerald I. Evenden <geraldi.evenden at gmail.com>

> Please limit complaints to split infinitives, dangling whatevers and such.

always remember to never split an infinitive :-)


From ckarney at sarnoff.com  Sat Feb 28 14:17:14 2009
From: ckarney at sarnoff.com (Charles Karney)
Date: Sat, 28 Feb 2009 17:17:14 -0500
Subject: [Proj] Accurate algorithm for geodesic calculations
Message-ID: <ssriqmuw6j9.fsf@petrel.petrel.org>

I've implemented an algorithm for geodesic calculations for an ellipsoid
with the following features:

 * It uses expansions accurate to 8th order in the ellipsoid flattening.
   This gives 12 nm accuracy using doubles and 6 pm accuracy using long
   doubles.
 * The direct calculation uses a reverted series and is therefore
   non-iterative.  A mechanism is provided to do a series of direct
   calculations on a single geodesic which is faster by a factor of 2.5.
 * The inverse calculation uses Newton's method to determine the
   azimuth.  This typically converges in 3 iterations.  I haven't found
   any cases where it fails to converge.
 * I provide a large test set geodesics for the WGS84 ellipsoid which is
   accurate to 0.1 pm and 10^-18 degree.  Thus was generated by Maxima
   using 20th order expansions (approximately accurate to 1 part in
   10^50).

Further information is available at

    http://charles.karney.info/geographic/geodesic.html

The code itself (C++ classes and a program for doing geodesic
calculations) is available at

    http://charles.karney.info/geographic

This compiles with g++ and Visual Studio 2005.

Still to do:

 * Reduce the order of the expansions to match precision available with
   doubles.
 * Improve the starting guesses for Newton's method to reduce to number
   of iterations in some cases.
 * More documentation on the method.
 * Provide Maxima code to generate the expansions.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


