From fabien.brachere at eikonex.net  Wed Mar  1 01:19:07 2006
From: fabien.brachere at eikonex.net (Fabien Brachere)
Date: Wed, 01 Mar 2006 10:19:07 +0100
Subject: [Proj] Conversion from WGS84 to UTM31
In-Reply-To: <OF1B301035.CC090E49-ON86257123.006732F4-86257123.00673302@lsu.edu>
References: <OF1B301035.CC090E49-ON86257123.006732F4-86257123.00673302@lsu.edu>
Message-ID: <1141204747.20328.6.camel@iti.tlse.eikonex.net>

Le mardi 28 février 2006 à 12:47 -0600, Clifford J Mugnier a écrit :
> Fabien,
> 
> The difference in the shift parameters offered by Circe2000 and my column
> on Spain are likely the difference between the transformation parameters
> between France and Spain.
> 
> You may get better correspondence with EU50 coordinates in Spain if you use
> those parameters published for Spain.
> 
> I thought you said that you are in Spain ... ?
> 

In fact the working zone is Pyrenees, in Spain and France (it's the
border of these 2 countries). So, I don't know which datum offset to
use, the precision has not to be very accurate (10m is sufficient), I
think it doesn't matter use one or other.

Fabien




From sven_ger at users.sourceforge.net  Thu Mar  2 08:01:06 2006
From: sven_ger at users.sourceforge.net (sven_ger at users.sourceforge.net)
Date: Thu, 02 Mar 2006 17:01:06 +0100
Subject: [Proj] c++, Visual Studio .Net project
Message-ID: <440716C2.9080708@users.sourceforge.net>

Hey all,
I don't use PROJ.4 until now.
At the moment I work at an 'little' project. In this one I should
convert some coordinates from the German GK System to WGS84.
I guess I can do it with PROJ.4.

Now my question. Is there any possibility to integrate PROJ.4 into
my existing Visual Studio .Net C++ project? I tried to link to
proj446.lib but the complier said: fatal error LNK1136.

At http://www.remotesensing.org/proj/ I don't find any example or
something like this.
I hope someone can help me.

Regards,
Sven





From EMiller at dfg.ca.gov  Thu Mar  2 09:37:20 2006
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Thu, 02 Mar 2006 09:37:20 -0800
Subject: [Proj] c++, Visual Studio .Net project
Message-ID: <s406bcea.056@dfg.ca.gov>

Haven't tried a C++ .NET combo w/ PROJ.4.  First, you might start with a more recent version of the library.

However, I think there may be threading problems trying to use proj.lib directly from a managed C++ application.  I don't think the PROJ library is compiled as multithreaded and I don't think it is safe to do so.  However, managed C++ must be compiled as multi-threaded.  I just did a rudimentary attempt with the 4.4.8 sources I have, and I couldn't get it to link due to multiply defined library functions (LINK2005).  This is most likely because single- and multi-threaded library functions of the same name are being pulled in.

You can probably use the library through Platform Invoke as I have done for C# programs.  But, it adds some work.

>>> sven_ger at users.sourceforge.net 3/2/2006 8:01:06 AM >>>
Hey all,
I don't use PROJ.4 until now.
At the moment I work at an 'little' project. In this one I should
convert some coordinates from the German GK System to WGS84.
I guess I can do it with PROJ.4.

Now my question. Is there any possibility to integrate PROJ.4 into
my existing Visual Studio .Net C++ project? I tried to link to
proj446.lib but the complier said: fatal error LNK1136.

At http://www.remotesensing.org/proj/ I don't find any example or
something like this.
I hope someone can help me.

Regards,
Sven



_______________________________________________
Proj mailing list
Proj at lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/proj




From gerald.evenden at verizon.net  Thu Mar  2 10:25:52 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Thu, 02 Mar 2006 13:25:52 -0500
Subject: [Proj] c++, Visual Studio .Net project
In-Reply-To: <s406bcea.056@dfg.ca.gov>
References: <s406bcea.056@dfg.ca.gov>
Message-ID: <200603021325.52949.gerald.evenden@verizon.net>

On Thursday 02 March 2006 12:37 pm, Eric Miller wrote:
	...
> However, I think there may be threading problems trying to use proj.lib
> directly from a managed C++ application.  I don't think the PROJ library is
> compiled as multithreaded and I don't think it is safe to do so.  However,
	...
libproj4 *is* threadsafe except for the proj_rtodms function which is not 
required by projection functions---see release 3 prelim on:

http://members.verizon.net/~gerald.evenden/proj4/

where all global references have "proj_" prefixes rather than the mixture of 
pj_ PJ_ of release 2.
-- 
Jerry and the low riders:Daisy May and Joshua
"The being cannot be termed rational or virtuous,
who obeys any authority, but that of reason."
---Mary Wollstonecraft 1792


From andy.canfield at gmail.com  Thu Mar  2 11:37:14 2006
From: andy.canfield at gmail.com (Andy Canfield)
Date: Thu, 2 Mar 2006 11:37:14 -0800
Subject: [Proj] c++, Visual Studio .Net project
In-Reply-To: <s406bcea.056@dfg.ca.gov>
References: <s406bcea.056@dfg.ca.gov>
Message-ID: <7425d0870603021137v376e3444k17e70ee6873f4ba@mail.gmail.com>

PROJ is thread safe but not garbage collection/.Net CLR safe so
whatever functions you are using you will probably have to wrap in
C++\CLI or use PInvoke if you are trying to compile with the .Net CLR
on. If you want to compile with the CLR off and just use Visual C++ as
a more or less standards compliant C++ compiler then make sure you
turn off all the CLR garbage before you try and compile it. Also see
what the .lib you are linking against was created with. If it is a
.lib created with gcc or other compiler/linker combo  then you will
get a "fatal error LNK1136" because VC++'s linker can't read the .lib
file format created by gcc and vice versa. Same with .obj and .o
files. The formats are incompatible. So try compiling the PROJ lib
using VC++ and then try linking it and see if that helps. Or just
chuck .Net out the Window and use a compliant compiler and linker ;)


On 3/2/06, Eric Miller <EMiller at dfg.ca.gov> wrote:
> Haven't tried a C++ .NET combo w/ PROJ.4.  First, you might start with a more recent version of the library.
>
> However, I think there may be threading problems trying to use proj.lib directly from a managed C++ application.  I don't think the PROJ library is compiled as multithreaded and I don't think it is safe to do so.  However, managed C++ must be compiled as multi-threaded.  I just did a rudimentary attempt with the 4.4.8 sources I have, and I couldn't get it to link due to multiply defined library functions (LINK2005).  This is most likely because single- and multi-threaded library functions of the same name are being pulled in.
>
> You can probably use the library through Platform Invoke as I have done for C# programs.  But, it adds some work.
>
> >>> sven_ger at users.sourceforge.net 3/2/2006 8:01:06 AM >>>
> Hey all,
> I don't use PROJ.4 until now.
> At the moment I work at an 'little' project. In this one I should
> convert some coordinates from the German GK System to WGS84.
> I guess I can do it with PROJ.4.
>
> Now my question. Is there any possibility to integrate PROJ.4 into
> my existing Visual Studio .Net C++ project? I tried to link to
> proj446.lib but the complier said: fatal error LNK1136.
>
> At http://www.remotesensing.org/proj/ I don't find any example or
> something like this.
> I hope someone can help me.
>
> Regards,
> Sven
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



From richard.greenwood at gmail.com  Fri Mar  3 19:19:20 2006
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Fri, 3 Mar 2006 20:19:20 -0700
Subject: [Proj] Javascript Projection Library
Message-ID: <ae9185aa0603031919w49cb0f6ai5d88ace3bfce580f@mail.gmail.com>

Hello List Subscribers,

There is some interest in creating a Javascript projection library
based on MapBuilder * Proj.js. Generally, the goals would be:
  - a client-side Javascript projection library
  - an interface that could support various web clients
  - coordinate transformation with some support for datum shifts
  - vector (not raster)

A mailing list dedicated to discussion of this project has been created at:
   https://lists.sourceforge.net/lists/listinfo/mapbuilder-proj
If you have an interest in this please subscribe to the list and share
your thoughts.

* MapBuilder is an OGC compliant web mapping client:
   http://mapbuilder.codehaus.org/
   http://mapbuilder.sourceforge.net/

Rich

--
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com



From moovida at katamail.com  Sun Mar  5 02:55:54 2006
From: moovida at katamail.com (Andrea Antonello)
Date: Sun, 5 Mar 2006 11:55:54 +0100
Subject: [Proj] JGrass 2.0 released
Message-ID: <200603051155.54188.moovida@katamail.com>

Sorry for crossposting.
______________________________________________________________________________

05. March 2006

JGrass Development Team

JGrass 2.0 Release Candidate 1 - Free Java Geographic Information System
Today the JGrass Development team released the release candidate 1 for JGrass 
2.0 - "Trento".

JGrass is Free Software under GNU GPL, the sources of which can be found at 
https://sourceforge.net/projects/jgrass

JGrass is maintained at:
HydroloGIS, Italy, at http://www.hydrologis.com
were all the information regarding the project is kept.

It is a Java based GIS built on top of the open source GIS GRASS.
JGRASS aims to bring GRASS to production environments as opposed to the 
research environment. The improved user interface and scripting facility will 
allow an application oriented user environment focused on the task to be 
performed.

This new version brings enhancements and new features:
- first vector support following the geotools approach
- visualization of geometry and attributes
- visualization of Shapefiles
- visualization of Autocad dwg file (< 2000)
- visualization of Postgis layers
- vector data preview
- first scripting engine
- console enhancement with command completion
- enhanced native GRASS command execution
     - r.proj
     - r.dem2contour
     - v.contour2dem
- queries with d.what.vect
- check on the used virtual machine

and bugfixes:
- finally bugfix for the 1/2 pixel shift in raster display
- bugfix for missing mapscale
- bugs in interactive modules that tent to freeze the gui solved
- integer reading bug with novalues
- bugfix for the refresh button freezing

References
JGrass (Java Geographic Resources Analysis and Support System) web site with 
software download:
https://sourceforge.net/project/showfiles.php?group_id=144497



-- 
____________________________________________________________________________
HydroloGIS - Environmental Safety Modelling
www.hydrologis.com

Andrea Antonello
Environmental Engineer
mobile:  +393288497722

"Let it be as much a great honour to take as to give learning,
if you want to be called wise."
Skuggsja' - The King's mirror - 1240 Reykjavik
____________________________________________________________________________



-- 
____________________________________________________________________________
HydroloGIS - Environmental Safety Modelling
www.hydrologis.com

Andrea Antonello
Environmental Engineer
mobile:  +393288497722

"Let it be as much a great honour to take as to give learning,
if you want to be called wise."
Skuggsja' - The King's mirror - 1240 Reykjavik
____________________________________________________________________________




From sven_ger at users.sourceforge.net  Sun Mar  5 04:21:56 2006
From: sven_ger at users.sourceforge.net (sven_ger at users.sourceforge.net)
Date: Sun, 05 Mar 2006 13:21:56 +0100
Subject: [Proj] c++, Visual Studio .Net project
In-Reply-To: <440716C2.9080708@users.sourceforge.net>
References: <440716C2.9080708@users.sourceforge.net>
Message-ID: <440AD7E4.4050101@users.sourceforge.net>

Hey all,
I have compiled it now with Visual Studio .Net, I used the original
Makefile. It worked very well, my first demo project works fine too. :-)


Thanks to all of you, see you,
Sven


From pdymecki at sympatico.ca  Mon Mar  6 21:28:26 2006
From: pdymecki at sympatico.ca (Paul Dymecki)
Date: Tue, 7 Mar 2006 00:28:26 -0500
Subject: [Proj] pj_init() / php_proj.dll
Message-ID: <002001c641a7$f5ff4910$7b00a8c0@paul>

Hi ,
   I  have an old application that uses pj_init() function to project points.  We've recently upgraded to mapscript4.6/php5.0.5, and am now getting an error that php_proj.dll cannot be loaded.. Any help would be appreciated ?
thx,
Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060307/fa26dafb/attachment.html>

From mfinn at usgs.gov  Tue Mar  7 02:00:55 2006
From: mfinn at usgs.gov (Michael P Finn)
Date: Tue, 7 Mar 2006 04:00:55 -0600
Subject: [Proj] Michael P Finn of the USGS/ National Geospatial Technical
 Operations Center is out of the office.
Message-ID: <OF8C8E9FE1.E6F7F14D-ON8625712A.00370410-8625712A.00370411@usgs.gov>


I will be out of the office starting  03/05/2006 and will not return until
03/15/2006.

I will be unable to check e-mail regularly while I am out. If I can't
respond to your message while I am out, then I will when I return. If you
have anything that cannot wait, please contact my colleague, Mr. Michael
Williams, at mswilliams at usgs.gov.     Mike



From rob.iverson at gmail.com  Wed Mar  8 10:26:15 2006
From: rob.iverson at gmail.com (Rob Iverson)
Date: Wed, 8 Mar 2006 11:26:15 -0700
Subject: [Proj] Using Azimuthal Equidistant for Great/Small Circle Generation
Message-ID: <5e5478c00603081026v66787ee9jb84d2b42ee964ff3@mail.gmail.com>

Sorry for the nearly-off-topic message here!  I don't know where else to
turn...

Is it valid to use the two-hemisphere form of the Azimuthal Equidistant
projection to compute great circles and small circles?

Here's what I have been doing:  I take a point that is the "center" of the
great/small circle, use that as the projection origin for azimuthal
equidistant, take the "radius" of the great/small circle (where 90 degrees
is a great circle), generate points on a circle centered at the middle of
the map, and inverse-project each of those points to get the coordinates on
the surface of the earth.

This certainly appears to give correct results, but I have no idea if it's
valid mathematically.

If it helps, I am currently using a spherical model of the earth, but I am
interested if this technique would work with the ellipsoidal models.

Thanks for your help!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060308/eeef78aa/attachment.html>

From Strebe at aol.com  Wed Mar  8 12:19:42 2006
From: Strebe at aol.com (Strebe at aol.com)
Date: Wed, 8 Mar 2006 15:19:42 EST
Subject: [Proj] Re: Using Azimuthal Equidistant for Great/Small Circle
	Generation
Message-ID: <2c1.64b2294.3140965e@aol.com>


This is a perfectly reasonable procedure. A circle centered at the center of 
an azimuthal equidistant is a path whose points are all the same distance from 
that center. That is the definition of small circle. It will also work on the 
ellipsoid, assuming the ellipsoidal form of the azimuthal equidistant is 
properly modelled -- which is not easy. I can't speak for the proj implementation.

There is no need to use the two-hemisphere form. A full-earth azimuthal 
equidistant still has the same properties.

Regards,

daan Strebe
Geocart author
http://www.mapthematics.com


In a message dated 3/8/2006 10:28:14 AM 太平洋標準時, rob.iverson at gmail.com 
writes:

> 
> Sorry for the nearly-off-topic message here!  I don't know where else to 
> turn...
> 
> Is it valid to use the two-hemisphere form of the Azimuthal Equidistant 
> projection to compute great circles and small circles? 
> 
> Here's what I have been doing:  I take a point that is the "center" of the 
> great/small circle, use that as the projection origin for azimuthal 
> equidistant, take the "radius" of the great/small circle (where 90 degrees is a great 
> circle), generate points on a circle centered at the middle of the map, and 
> inverse-project each of those points to get the coordinates on the surface of 
> the earth. 
> 
> This certainly appears to give correct results, but I have no idea if it's 
> valid mathematically.
> 
> If it helps, I am currently using a spherical model of the earth, but I am 
> interested if this technique would work with the ellipsoidal models. 
> 
> Thanks for your help!
> 
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060308/47edcaae/attachment.html>

From gerald.evenden at verizon.net  Wed Mar  8 12:54:46 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Wed, 08 Mar 2006 15:54:46 -0500
Subject: [Proj] Using Azimuthal Equidistant for Great/Small Circle
	Generation
In-Reply-To: <5e5478c00603081026v66787ee9jb84d2b42ee964ff3@mail.gmail.com>
References: <5e5478c00603081026v66787ee9jb84d2b42ee964ff3@mail.gmail.com>
Message-ID: <200603081554.46984.gerald.evenden@verizon.net>

On Wednesday 08 March 2006 01:26 pm, Rob Iverson wrote:
> Sorry for the nearly-off-topic message here!  I don't know where else to
> turn...
>
> Is it valid to use the two-hemisphere form of the Azimuthal Equidistant
> projection to compute great circles and small circles?

 No.

The only projection where straight lines are great circles is the gnomonic but 
I don't think you want to use that one.

The program 'geod' distributed with the old PROJ4 system computes geodesics 
(great circles) and will generate intermediate points along such paths or 
points on a arc that are at a constant distance from a point.

'geod' works for both a spherical  or  elliptical earth.

	...
-- 
Jerry and the low riders:Daisy May and Joshua
"The being cannot be termed rational or virtuous,
who obeys any authority, but that of reason."
---Mary Wollstonecraft 1792


From Strebe at aol.com  Wed Mar  8 15:05:11 2006
From: Strebe at aol.com (Strebe at aol.com)
Date: Wed, 8 Mar 2006 18:05:11 EST
Subject: [Proj] Re: Using Azimuthal Equidistant for Great/Small Circle
	Generation
Message-ID: <19c.46769e2d.3140bd27@aol.com>


The original poster stated:

> take the "radius" of the great/small circle (where 90 degrees is a great 
> circle)

He doesn't care whether great circles are straight lines. His question is 
whether he can trust the cartesian circle 90 degrees of arc away from the 
projection center to be a great circle. The answer is, yes. He can. Also whether 
other cartesian circles centered on the projection center can be trusted to be 
small circles. Yes. They can. His procedure works just fine.

It does sound like 'geod' is more directly what he wants, though.

Regards,

daan Strebe
Geocart author
http://www.mapthematics.com


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060308/c8b15eff/attachment.html>

From archer at eskimo.com  Thu Mar  9 10:58:01 2006
From: archer at eskimo.com (Curt, WE7U)
Date: Thu, 9 Mar 2006 10:58:01 -0800 (PST)
Subject: [Proj] proj/libgeotiff interaction: GTIFProj4ToLatLong()
In-Reply-To: <5e5478c00603081026v66787ee9jb84d2b42ee964ff3@mail.gmail.com>
References: <5e5478c00603081026v66787ee9jb84d2b42ee964ff3@mail.gmail.com>
Message-ID: <Pine.SUN.4.58.0603091047120.12513@eskimo.com>


This has to do with an interaction between proj and libgeotiff, so I
don't know which list to put it to, but since it has to do with a
proj function, I'll try here.

First, the code:


  if (GTIFGetDefn (gtif, &defn)) {
    if (debug_level & 16)
      GTIFPrintDefn (&defn, stdout);
  }
...
  if ( proj_is_latlong || GTIFProj4ToLatLong( &defn, 1, &xxx, &yyy ) )   // Do all 4 of these in one call?
  {
    if (debug_level & 16) {
      fprintf(stderr,"  (%s,", GTIFDecToDMS( xxx, "Long", 2 ) );
      fprintf(stderr,"%s)\n", GTIFDecToDMS( yyy, "Lat", 2) );
      fprintf(stderr,"%f  %f\n", xxx, yyy);
    }
  }
  else {
    fprintf(stderr,"Failed GTIFProj4ToLatLong() call\n");
  }


I'm getting the "Failed GTIFProj4ToLatLong() call" message four
times, once for each such call I make.

I'm using these packages:

    proj-datumgrid-1.3.zip
    proj-4.4.9.tar.gz
    libgeotiff-1.2.3.tar.gz

I verified by re-installing these just now that I installed proj
first, then installed libgeotiff, and the libgeotiff configure found
libproj just fine.

The geotiff I'm having a problem with has UTM zone 10 coordinates.
USGS DRG geoTIFF topo maps with Lat/Long coordinates (but UTM
projection) are read in just fine by my code.

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"


From EMiller at dfg.ca.gov  Thu Mar  9 11:40:46 2006
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Thu, 09 Mar 2006 11:40:46 -0800
Subject: [Proj] proj/libgeotiff interaction: GTIFProj4ToLatLong()
Message-ID: <s4101454.037@dfg.ca.gov>

You don't show how the variable "proj_is_latlong" is defined or assigned to.  If it's zero, GTIFProj4ToLatLong will not be called.  Also, if GTIFProj4ToLatLong returns zero for success (a typical return code) then your error message will print.

>>> "Curt, WE7U" <archer at eskimo.com> 3/9/2006 10:58 AM >>>

This has to do with an interaction between proj and libgeotiff, so I
don't know which list to put it to, but since it has to do with a
proj function, I'll try here.

First, the code:


  if (GTIFGetDefn (gtif, &defn)) {
    if (debug_level & 16)
      GTIFPrintDefn (&defn, stdout);
  }
...
  if ( proj_is_latlong || GTIFProj4ToLatLong( &defn, 1, &xxx, &yyy ) )   // Do all 4 of these in one call?
  {
    if (debug_level & 16) {
      fprintf(stderr,"  (%s,", GTIFDecToDMS( xxx, "Long", 2 ) );
      fprintf(stderr,"%s)\n", GTIFDecToDMS( yyy, "Lat", 2) );
      fprintf(stderr,"%f  %f\n", xxx, yyy);
    }
  }
  else {
    fprintf(stderr,"Failed GTIFProj4ToLatLong() call\n");
  }


I'm getting the "Failed GTIFProj4ToLatLong() call" message four
times, once for each such call I make.

I'm using these packages:

    proj-datumgrid-1.3.zip
    proj-4.4.9.tar.gz
    libgeotiff-1.2.3.tar.gz

I verified by re-installing these just now that I installed proj
first, then installed libgeotiff, and the libgeotiff configure found
libproj just fine.

The geotiff I'm having a problem with has UTM zone 10 coordinates.
USGS DRG geoTIFF topo maps with Lat/Long coordinates (but UTM
projection) are read in just fine by my code.

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer 
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"
_______________________________________________
Proj mailing list
Proj at lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/proj




From archer at eskimo.com  Thu Mar  9 12:28:33 2006
From: archer at eskimo.com (Curt, WE7U)
Date: Thu, 9 Mar 2006 12:28:33 -0800 (PST)
Subject: [Proj] proj/libgeotiff interaction: GTIFProj4ToLatLong()
In-Reply-To: <s4101454.037@dfg.ca.gov>
References: <s4101454.037@dfg.ca.gov>
Message-ID: <Pine.SUN.4.58.0603091224410.12513@eskimo.com>

On Thu, 9 Mar 2006, Eric Miller wrote:

> You don't show how the variable "proj_is_latlong" is defined or
> assigned to.  If it's zero, GTIFProj4ToLatLong will not be called.
> Also, if GTIFProj4ToLatLong returns zero for success (a typical
> return code) then your error message will print.

Thanks.  That "proj_is_latlong" stuff was added by someone else
since I wrote the code.  I just tweaked it so that the error message
is decoupled from that variable.

The GTIFProj4ToLatLong return code checks still look correct to me.

I traced the problem down:  It was linking that function in from
GDAL instead of libgeotiff.  Our code uses shapelib, proj,
libgeotiff, and GDAL if available.  By configuring my project
without GDAL support I was able to read the DOQQ file in just fine
with the UTM numbers.

I'll check out the latest released GDAL later to see if it still has
the problem, if so, report it to Frank.  CVS GDAL didn't compile for
me just now.

So... Problem solved with respect to the original problem.

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"


From hamish_nospam at yahoo.com  Thu Mar  9 17:15:25 2006
From: hamish_nospam at yahoo.com (Hamish)
Date: Fri, 10 Mar 2006 14:15:25 +1300
Subject: [Proj] help with clark66 as datum
Message-ID: <20060310141525.4b61f9fe.hamish_nospam@yahoo.com>

Hi,

I'm trying to figure out PROJ.4 parameters for a newly published
dataset that has been widely distributed down here in New Zealand.


ERSI Shapefile .prj file that came with it:

PROJCS["Clarke_1866_Mercator",GEOGCS["GCS_Clarke_1866",
DATUM["D_Clarke_1866",SPHEROID["Clarke_1866",6378206.4,294.9786982]],
PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],
PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",100.0],
PARAMETER["Standard_Parallel_1",-46.0],UNIT["Meter",1.0]]


Documentation that came with it:

The projection used [...] is:
Mercator Projection
Central Meridian = 100
Standard Parallel = -46
False Easting = 0
False Northing = 0
Spheroid/Datum = Clarke 1866


This confuses both me & the GRASS GIS projection auto-import tool.
Does clark66 define a datum??
Is this meaningful:  DATUM["D_Clarke_1866",  ??
Should I give up and just assume +towgs84=0,0,0 ?

I have no idea why they used clark66 or a point in the ocean 1500km SW
of Perth Australia as the center of projection for a modern New Zealand
dataset. But so it is.

see GRASS bug #4160  https://intevation.de/rt/webrt?serial_num=4160 
for a link to the data and the error it causes in GRASS.

Resoution of the data is 1km, so I'm not too worried about 5m shifts, but
100m gets into the unacceptable levels.


cheers and thanks for any insights,

Hamish


From warmerdam at pobox.com  Thu Mar  9 20:09:09 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 09 Mar 2006 23:09:09 -0500
Subject: [Proj] help with clark66 as datum
In-Reply-To: <20060310141525.4b61f9fe.hamish_nospam@yahoo.com>
References: <20060310141525.4b61f9fe.hamish_nospam@yahoo.com>
Message-ID: <4410FBE5.8020400@pobox.com>

Hamish wrote:
> Hi,
> 
> I'm trying to figure out PROJ.4 parameters for a newly published
> dataset that has been widely distributed down here in New Zealand.
> 
> 
> ERSI Shapefile .prj file that came with it:
> 
> PROJCS["Clarke_1866_Mercator",GEOGCS["GCS_Clarke_1866",
> DATUM["D_Clarke_1866",SPHEROID["Clarke_1866",6378206.4,294.9786982]],
> PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
> PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],
> PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",100.0],
> PARAMETER["Standard_Parallel_1",-46.0],UNIT["Meter",1.0]]
> 
> 
> Documentation that came with it:
> 
> The projection used [...] is:
> Mercator Projection
> Central Meridian = 100
> Standard Parallel = -46
> False Easting = 0
> False Northing = 0
> Spheroid/Datum = Clarke 1866
> 
> 
> This confuses both me & the GRASS GIS projection auto-import tool.
> Does clark66 define a datum??
> Is this meaningful:  DATUM["D_Clarke_1866",  ??
> Should I give up and just assume +towgs84=0,0,0 ?
> 
> I have no idea why they used clark66 or a point in the ocean 1500km SW
> of Perth Australia as the center of projection for a modern New Zealand
> dataset. But so it is.
> 
> see GRASS bug #4160  https://intevation.de/rt/webrt?serial_num=4160 
> for a link to the data and the error it causes in GRASS.
> 
> Resoution of the data is 1km, so I'm not too worried about 5m shifts, but
> 100m gets into the unacceptable levels.

Hamish,

The projection is straight forward.  But D_Clark_1866 does not relate to
anything I have know of as a datum.  The ESRI .prj files don't any indication
of what mechanism to use to relate the datum name to WGS84, so this is
really not enough information to go on.  Somewhere inn ArcGIS there is some
sort of definition of what parameters to use for datums.  If you can dig
that up you should know what to use.

I would add +towgs84=0,0,0 is a pretty bold thing to do when using
such an ancient ellipsoid that is quite different than WGS84.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org



From richard.greenwood at gmail.com  Thu Mar  9 20:24:36 2006
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Thu, 9 Mar 2006 21:24:36 -0700
Subject: [Proj] help with clark66 as datum
In-Reply-To: <20060310141525.4b61f9fe.hamish_nospam@yahoo.com>
References: <20060310141525.4b61f9fe.hamish_nospam@yahoo.com>
Message-ID: <ae9185aa0603092024k74b5381fjbc99f52ea997c977@mail.gmail.com>

On 3/9/06, Hamish <hamish_nospam at yahoo.com> wrote:
> Hi,
>
> I'm trying to figure out PROJ.4 parameters for a newly published
> dataset that has been widely distributed down here in New Zealand.
>
>
> ERSI Shapefile .prj file that came with it:
>
> PROJCS["Clarke_1866_Mercator",GEOGCS["GCS_Clarke_1866",
> DATUM["D_Clarke_1866",SPHEROID["Clarke_1866",6378206.4,294.9786982]],
> PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
> PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],
> PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",100.0],
> PARAMETER["Standard_Parallel_1",-46.0],UNIT["Meter",1.0]]
>
>
> Documentation that came with it:
>
> The projection used [...] is:
> Mercator Projection
> Central Meridian = 100
> Standard Parallel = -46
> False Easting = 0
> False Northing = 0
> Spheroid/Datum = Clarke 1866
>
>
> This confuses both me & the GRASS GIS projection auto-import tool.
> Does clark66 define a datum??
> Is this meaningful:  DATUM["D_Clarke_1866",  ??
> Should I give up and just assume +towgs84=0,0,0 ?
>
> I have no idea why they used clark66 or a point in the ocean 1500km SW
> of Perth Australia as the center of projection for a modern New Zealand
> dataset. But so it is.
>
> Hamish
>

That's pretty lame. Clarke 1866 is an ellipsoid, not a datum. But
that's ESRI. The provided definition is not enough that you could put
it to any other software, or any standard algorithm, and verify it.

If I were in your shoes, I would assume towgs84=0,0,0, but it seems
like you would need to run it thru ESRI software to confirm that. If
you don't have access to ArcGIS or something, send me a few
coordinates in the new projection and I'll try to convert them w/
ArcGIS to WGS84 or another system.

Having the origin somewhere way the the southwest is pretty common.
That way you don't have any negative coordinates in the area actually
covered by the projection. And using clarke 1866 is probably a
perfectly legitimate ellipsoid, but it does not specify a datum.

Rich

--
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com



From pramsey at refractions.net  Thu Mar  9 21:47:44 2006
From: pramsey at refractions.net (Paul Ramsey)
Date: Thu, 09 Mar 2006 21:47:44 -0800
Subject: [Proj] help with clark66 as datum
In-Reply-To: <ae9185aa0603092024k74b5381fjbc99f52ea997c977@mail.gmail.com>
References: <20060310141525.4b61f9fe.hamish_nospam@yahoo.com>
	<ae9185aa0603092024k74b5381fjbc99f52ea997c977@mail.gmail.com>
Message-ID: <C6E3D3F8-D688-45B5-A2AD-B5E491AF42AA@refractions.net>


I would assume that the "D_Clarke" stuff is just a mistake, and that  
all they mean is a Clarke 1866 spheroid.  Does this work?

+proj=merc +lon_0=100 +lat_ts=-46 +ellps=clrk66

Paul

On 3/9/06, Hamish <hamish_nospam at yahoo.com> wrote:
> Hi,
>
> I'm trying to figure out PROJ.4 parameters for a newly published
> dataset that has been widely distributed down here in New Zealand.
>
>
> ERSI Shapefile .prj file that came with it:
>
> PROJCS["Clarke_1866_Mercator",GEOGCS["GCS_Clarke_1866",
> DATUM["D_Clarke_1866",SPHEROID["Clarke_1866",6378206.4,294.9786982]],
> PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
> PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],
> PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",100.0],
> PARAMETER["Standard_Parallel_1",-46.0],UNIT["Meter",1.0]]
>
>
> Documentation that came with it:
>
> The projection used [...] is:
> Mercator Projection
> Central Meridian = 100
> Standard Parallel = -46
> False Easting = 0
> False Northing = 0
> Spheroid/Datum = Clarke 1866
>
>
> This confuses both me & the GRASS GIS projection auto-import tool.
> Does clark66 define a datum??
> Is this meaningful:  DATUM["D_Clarke_1866",  ??
> Should I give up and just assume +towgs84=0,0,0 ?
>
> I have no idea why they used clark66 or a point in the ocean 1500km SW
> of Perth Australia as the center of projection for a modern New  
> Zealand
> dataset. But so it is.
>
> Hamish


From meems at soilcompany.nl  Thu Mar  9 22:45:46 2006
From: meems at soilcompany.nl (Paul Meems)
Date: Thu, 9 Mar 2006 22:45:46 -0800 (PST)
Subject: [Proj] Need a working PROJ4 string for the dutch grid
Message-ID: <3334245.post@talk.nabble.com>


I've got some trouble finding a working PROJ4 string for the dutch grid.
I'm on the developing team of MapWindow ( www.mapwindow.org ) and we use
PROJ4 for our (re)projection. The most projections work fine but the one I'm
interesting in the Dutch Grid projection (I live in The Netherlands) isn't
working correctly.
Does anybody knows the working PROJ4 string?

For more info, please look at:  bugs.mapwindow.org 

Thanks
Paul

--
View this message in context: http://www.nabble.com/Need-a-working-PROJ4-string-for-the-dutch-grid-t1257346.html#a3334245
Sent from the PROJ.4 forum at Nabble.com.



From roger at opq.se  Fri Mar 10 01:15:34 2006
From: roger at opq.se (Roger Oberholtzer)
Date: Fri, 10 Mar 2006 10:15:34 +0100
Subject: [Proj] Need a working PROJ4 string for the dutch grid
In-Reply-To: <3334245.post@talk.nabble.com>
References: <3334245.post@talk.nabble.com>
Message-ID: <1141982134.15887.9.camel@acme>

On Thu, 2006-03-09 at 22:45 -0800, Paul Meems wrote:
> I've got some trouble finding a working PROJ4 string for the dutch grid.
> I'm on the developing team of MapWindow ( www.mapwindow.org ) and we use
> PROJ4 for our (re)projection. The most projections work fine but the one I'm
> interesting in the Dutch Grid projection (I live in The Netherlands) isn't
> working correctly.
> Does anybody knows the working PROJ4 string?

When converting from WGS84 lat/longs, (like from a GPS) I use:

+proj=latlong +ellps=WGS84 +to +proj=sterea +lat_0=52.15616055555555
+lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000
+ellps=bessel +units=m +no_defs

I hope I copied that correctly. I do this from the C API, but these
should be the same.

I did have some data that required the +ellps=WGS84 be changed to
+ellps=bessel, which I think was because of something undocumented that
was done to the source data.


> 
> For more info, please look at:  bugs.mapwindow.org 
> 
> Thanks
> Paul
> 
> --
> View this message in context: http://www.nabble.com/Need-a-working-PROJ4-string-for-the-dutch-grid-t1257346.html#a3334245
> Sent from the PROJ.4 forum at Nabble.com.
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
-- 
Roger Oberholtzer

OPQ Systems AB
Ramböll Sverige AB
Kapellgränd 7
P.O. Box 4205
SE-102 65 Stockholm, Sweden

Tel: Int +46 8-615 60 20
Fax: Int +46 8-31 42 23



From cjmce at lsu.edu  Fri Mar 10 07:07:17 2006
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 10 Mar 2006 09:07:17 -0600
Subject: [Proj] help with clark66 as datum
Message-ID: <OF2C197713.3166B407-ON8625712D.005310A2-8625712D.005310BD@lsu.edu>





Very early versions of ESRI software were on Unix machines that were
running Arc/Info, long before personal computers were invented.  The
initial implementations of projection math were based on GCTP, a Fortran
translation of John P. Snyer's first book (GCTP was written by Dr. Atef
Elassal).  All examples used the Clarke 1866 ellipsoid, because that was
the legal ellipsoid in use (for the NAD27) by the U.S. Geological Survey in
the U.S. before 1983.

You merely have an ancient dataset, and you may change it to any ellipsoid
that you wish without degrading any of the data.  The Normal Mercator
projection is rarely used for large-scale mapping where an actual datum is
of importance.  The exceptions are for all of Indonesia and for the city of
Guyaquil, Ecuador.

It's not a mistake, it was correct at the time.  John P. Snyder NEVER
concerned himself with datum transformations.  He considered that datums
were geodesy and not cartography, so he deferred to me on that stuff.
(John had a Master's Degree in Chemical Engineering.)

Cliff Mugnier
LSU

--------------------------------------

I would assume that the "D_Clarke" stuff is just a mistake, and that
all they mean is a Clarke 1866 spheroid.  Does this work?

+proj=merc +lon_0=100 +lat_ts=-46 +ellps=clrk66

Paul

On 3/9/06, Hamish <hamish_nospam at yahoo.com> wrote:
> Hi,
>
> I'm trying to figure out PROJ.4 parameters for a newly published
> dataset that has been widely distributed down here in New Zealand.
>
>
> ERSI Shapefile .prj file that came with it:
>
> PROJCS["Clarke_1866_Mercator",GEOGCS["GCS_Clarke_1866",
> DATUM["D_Clarke_1866",SPHEROID["Clarke_1866",6378206.4,294.9786982]],
> PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
> PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],
> PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",100.0],
> PARAMETER["Standard_Parallel_1",-46.0],UNIT["Meter",1.0]]
>
>
> Documentation that came with it:
>
> The projection used [...] is:
> Mercator Projection
> Central Meridian = 100
> Standard Parallel = -46
> False Easting = 0
> False Northing = 0
> Spheroid/Datum = Clarke 1866
>
>
> This confuses both me & the GRASS GIS projection auto-import tool.
> Does clark66 define a datum??
> Is this meaningful:  DATUM["D_Clarke_1866",  ??
> Should I give up and just assume +towgs84=0,0,0 ?
>
> I have no idea why they used clark66 or a point in the ocean 1500km SW
> of Perth Australia as the center of projection for a modern New
> Zealand
> dataset. But so it is.
>
> Hamish
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From cjmce at lsu.edu  Fri Mar 10 07:30:27 2006
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 10 Mar 2006 09:30:27 -0600
Subject: [Proj] help with clark66 as datum
Message-ID: <OFC151E9E8.417E0998-ON8625712D.00552FAA-8625712D.00552FB9@lsu.edu>





The DCW - Digital Chart of the World was HAND digitized by the Defense
Mapping Agency in the early 80s from small scale "ONC" Operational
Navigation Charts.  That became the defacto FREE dataset of the world's
coastlines, rivers, etc used by all software companies including ESRI.  (It
came on a 9-Track tape from DMA as did the GCTP come on a 9-track tape from
the U.S. Geological Survey.)  The ellipsoid used as a default then was the
Clarke 1866.  That is how it wound up being used for New Zealand.  (So was
the entire world.)

You have to be old enough to be able to remember this stuff!

-----------------------
Very early versions of ESRI software were on Unix machines that were
running Arc/Info, long before personal computers were invented.  The
initial implementations of projection math were based on GCTP, a Fortran
translation of John P. Snyer's first book (GCTP was written by Dr. Atef
Elassal).  All examples used the Clarke 1866 ellipsoid, because that was
the legal ellipsoid in use (for the NAD27) by the U.S. Geological Survey in
the U.S. before 1983.

You merely have an ancient dataset, and you may change it to any ellipsoid
that you wish without degrading any of the data.  The Normal Mercator
projection is rarely used for large-scale mapping where an actual datum is
of importance.  The exceptions are for all of Indonesia and for the city of
Guyaquil, Ecuador.

It's not a mistake, it was correct at the time.  John P. Snyder NEVER
concerned himself with datum transformations.  He considered that datums
were geodesy and not cartography, so he deferred to me on that stuff.
(John had a Master's Degree in Chemical Engineering.)

Cliff Mugnier
LSU

--------------------------------------

I would assume that the "D_Clarke" stuff is just a mistake, and that
all they mean is a Clarke 1866 spheroid.  Does this work?

+proj=merc +lon_0=100 +lat_ts=-46 +ellps=clrk66

Paul

On 3/9/06, Hamish <hamish_nospam at yahoo.com> wrote:
> Hi,
>
> I'm trying to figure out PROJ.4 parameters for a newly published
> dataset that has been widely distributed down here in New Zealand.
>
>
> ERSI Shapefile .prj file that came with it:
>
> PROJCS["Clarke_1866_Mercator",GEOGCS["GCS_Clarke_1866",
> DATUM["D_Clarke_1866",SPHEROID["Clarke_1866",6378206.4,294.9786982]],
> PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
> PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],
> PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",100.0],
> PARAMETER["Standard_Parallel_1",-46.0],UNIT["Meter",1.0]]
>
>
> Documentation that came with it:
>
> The projection used [...] is:
> Mercator Projection
> Central Meridian = 100
> Standard Parallel = -46
> False Easting = 0
> False Northing = 0
> Spheroid/Datum = Clarke 1866
>
>
> This confuses both me & the GRASS GIS projection auto-import tool.
> Does clark66 define a datum??
> Is this meaningful:  DATUM["D_Clarke_1866",  ??
> Should I give up and just assume +towgs84=0,0,0 ?
>
> I have no idea why they used clark66 or a point in the ocean 1500km SW
> of Perth Australia as the center of projection for a modern New
> Zealand
> dataset. But so it is.
>
> Hamish
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From pramsey at refractions.net  Fri Mar 10 07:58:05 2006
From: pramsey at refractions.net (Paul Ramsey)
Date: Fri, 10 Mar 2006 07:58:05 -0800
Subject: [Proj] help with clark66 as datum
In-Reply-To: <OFC151E9E8.417E0998-ON8625712D.00552FAA-8625712D.00552FB9@lsu.edu>
References: <OFC151E9E8.417E0998-ON8625712D.00552FAA-8625712D.00552FB9@lsu.edu>
Message-ID: <371576DF-1D67-4CDC-B442-4EFD334F4664@refractions.net>

I live for these nuggets! More, more! One of the most powerful pieces  
of knowledge of a discipline is an understanding of its history and  
evolution.

P

On 10-Mar-06, at 7:30 AM, Clifford J Mugnier wrote:

> The DCW - Digital Chart of the World was HAND digitized by the Defense
> Mapping Agency in the early 80s from small scale "ONC" Operational
> Navigation Charts.  That became the defacto FREE dataset of the  
> world's
> coastlines, rivers, etc used by all software companies including  
> ESRI.  (It
> came on a 9-Track tape from DMA as did the GCTP come on a 9-track  
> tape from
> the U.S. Geological Survey.)  The ellipsoid used as a default then  
> was the
> Clarke 1866.  That is how it wound up being used for New Zealand.   
> (So was
> the entire world.)
>
> You have to be old enough to be able to remember this stuff!
>
> -----------------------
> Very early versions of ESRI software were on Unix machines that were
> running Arc/Info, long before personal computers were invented.  The
> initial implementations of projection math were based on GCTP, a  
> Fortran
> translation of John P. Snyer's first book (GCTP was written by Dr.  
> Atef
> Elassal).  All examples used the Clarke 1866 ellipsoid, because  
> that was
> the legal ellipsoid in use (for the NAD27) by the U.S. Geological  
> Survey in
> the U.S. before 1983.
>
> You merely have an ancient dataset, and you may change it to any  
> ellipsoid
> that you wish without degrading any of the data.  The Normal Mercator
> projection is rarely used for large-scale mapping where an actual  
> datum is
> of importance.  The exceptions are for all of Indonesia and for the  
> city of
> Guyaquil, Ecuador.
>
> It's not a mistake, it was correct at the time.  John P. Snyder NEVER
> concerned himself with datum transformations.  He considered that  
> datums
> were geodesy and not cartography, so he deferred to me on that stuff.
> (John had a Master's Degree in Chemical Engineering.)
>
> Cliff Mugnier
> LSU
>
> --------------------------------------
>
> I would assume that the "D_Clarke" stuff is just a mistake, and that
> all they mean is a Clarke 1866 spheroid.  Does this work?
>
> +proj=merc +lon_0=100 +lat_ts=-46 +ellps=clrk66
>
> Paul
>
> On 3/9/06, Hamish <hamish_nospam at yahoo.com> wrote:
>> Hi,
>>
>> I'm trying to figure out PROJ.4 parameters for a newly published
>> dataset that has been widely distributed down here in New Zealand.
>>
>>
>> ERSI Shapefile .prj file that came with it:
>>
>> PROJCS["Clarke_1866_Mercator",GEOGCS["GCS_Clarke_1866",
>> DATUM["D_Clarke_1866",SPHEROID["Clarke_1866",6378206.4,294.9786982]],
>> PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
>> PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],
>> PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",100.0],
>> PARAMETER["Standard_Parallel_1",-46.0],UNIT["Meter",1.0]]
>>
>>
>> Documentation that came with it:
>>
>> The projection used [...] is:
>> Mercator Projection
>> Central Meridian = 100
>> Standard Parallel = -46
>> False Easting = 0
>> False Northing = 0
>> Spheroid/Datum = Clarke 1866
>>
>>
>> This confuses both me & the GRASS GIS projection auto-import tool.
>> Does clark66 define a datum??
>> Is this meaningful:  DATUM["D_Clarke_1866",  ??
>> Should I give up and just assume +towgs84=0,0,0 ?
>>
>> I have no idea why they used clark66 or a point in the ocean  
>> 1500km SW
>> of Perth Australia as the center of projection for a modern New
>> Zealand
>> dataset. But so it is.
>>
>> Hamish
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From gerald.evenden at verizon.net  Fri Mar 10 08:01:27 2006
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: Fri, 10 Mar 2006 11:01:27 -0500
Subject: [Proj] help with clark66 as datum
In-Reply-To: <OFC151E9E8.417E0998-ON8625712D.00552FAA-8625712D.00552FB9@lsu.edu>
References: <OFC151E9E8.417E0998-ON8625712D.00552FAA-8625712D.00552FB9@lsu.edu>
Message-ID: <200603101101.27475.gerald.evenden@verizon.net>

On Friday 10 March 2006 10:30 am, Clifford J Mugnier wrote:
	...
>    ...            John P. Snyder NEVER
> concerned himself with datum transformations.  He considered that datums
> were geodesy and not cartography, so he 	...

For those who wonder why I am so inflexible on this issue.

-- 
Jerry and the low riders:Daisy May and Joshua
"The being cannot be termed rational or virtuous,
who obeys any authority, but that of reason."
---Mary Wollstonecraft 1792


From ed at topozone.com  Fri Mar 10 08:17:18 2006
From: ed at topozone.com (Ed McNierney)
Date: Fri, 10 Mar 2006 11:17:18 -0500
Subject: [Proj] help with clark66 as datum
Message-ID: <4BF377919225F449BB097CB76FFE9BC8734C@ptolemy.topozone.com>

Paul -
 
Well, it's off-topic and nit-picking, but (for the historical footnote crowd) ESRI's Arc/Info software was first released on a Prime minicomputer rather than UNIX, and there were plenty of personal computers around at the time (1982).  Arc/Info was shortly ported to UNIX, and the first PC Arc/Info product was released in 1986.
 
     - Ed (old enough to remember <g>)
 
Ed McNierney
TopoZone.com

________________________________

From: proj-bounces at lists.maptools.org on behalf of Paul Ramsey
Sent: Fri 3/10/2006 10:58 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] help with clark66 as datum



I live for these nuggets! More, more! One of the most powerful pieces 
of knowledge of a discipline is an understanding of its history and 
evolution.

P

On 10-Mar-06, at 7:30 AM, Clifford J Mugnier wrote:

> The DCW - Digital Chart of the World was HAND digitized by the Defense
> Mapping Agency in the early 80s from small scale "ONC" Operational
> Navigation Charts.  That became the defacto FREE dataset of the 
> world's
> coastlines, rivers, etc used by all software companies including 
> ESRI.  (It
> came on a 9-Track tape from DMA as did the GCTP come on a 9-track 
> tape from
> the U.S. Geological Survey.)  The ellipsoid used as a default then 
> was the
> Clarke 1866.  That is how it wound up being used for New Zealand.  
> (So was
> the entire world.)
>
> You have to be old enough to be able to remember this stuff!
>
> -----------------------
> Very early versions of ESRI software were on Unix machines that were
> running Arc/Info, long before personal computers were invented.  The
> initial implementations of projection math were based on GCTP, a 
> Fortran
> translation of John P. Snyer's first book (GCTP was written by Dr. 
> Atef
> Elassal).  All examples used the Clarke 1866 ellipsoid, because 
> that was
> the legal ellipsoid in use (for the NAD27) by the U.S. Geological 
> Survey in
> the U.S. before 1983.
>
> You merely have an ancient dataset, and you may change it to any 
> ellipsoid
> that you wish without degrading any of the data.  The Normal Mercator
> projection is rarely used for large-scale mapping where an actual 
> datum is
> of importance.  The exceptions are for all of Indonesia and for the 
> city of
> Guyaquil, Ecuador.
>
> It's not a mistake, it was correct at the time.  John P. Snyder NEVER
> concerned himself with datum transformations.  He considered that 
> datums
> were geodesy and not cartography, so he deferred to me on that stuff.
> (John had a Master's Degree in Chemical Engineering.)
>
> Cliff Mugnier
> LSU
>
> --------------------------------------
>
> I would assume that the "D_Clarke" stuff is just a mistake, and that
> all they mean is a Clarke 1866 spheroid.  Does this work?
>
> +proj=merc +lon_0=100 +lat_ts=-46 +ellps=clrk66
>
> Paul
>
> On 3/9/06, Hamish <hamish_nospam at yahoo.com> wrote:
>> Hi,
>>
>> I'm trying to figure out PROJ.4 parameters for a newly published
>> dataset that has been widely distributed down here in New Zealand.
>>
>>
>> ERSI Shapefile .prj file that came with it:
>>
>> PROJCS["Clarke_1866_Mercator",GEOGCS["GCS_Clarke_1866",
>> DATUM["D_Clarke_1866",SPHEROID["Clarke_1866",6378206.4,294.9786982]],
>> PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
>> PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],
>> PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",100.0],
>> PARAMETER["Standard_Parallel_1",-46.0],UNIT["Meter",1.0]]
>>
>>
>> Documentation that came with it:
>>
>> The projection used [...] is:
>> Mercator Projection
>> Central Meridian = 100
>> Standard Parallel = -46
>> False Easting = 0
>> False Northing = 0
>> Spheroid/Datum = Clarke 1866
>>
>>
>> This confuses both me & the GRASS GIS projection auto-import tool.
>> Does clark66 define a datum??
>> Is this meaningful:  DATUM["D_Clarke_1866",  ??
>> Should I give up and just assume +towgs84=0,0,0 ?
>>
>> I have no idea why they used clark66 or a point in the ocean 
>> 1500km SW
>> of Perth Australia as the center of projection for a modern New
>> Zealand
>> dataset. But so it is.
>>
>> Hamish
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060310/d15b8208/attachment.html>

From cjmce at lsu.edu  Fri Mar 10 09:38:49 2006
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 10 Mar 2006 11:38:49 -0600
Subject: [Proj] help with clark66 as datum
Message-ID: <OF3AC97165.AEDD5171-ON8625712D.0060EFF2-8625712D.0060F012@lsu.edu>





I stand corrected.  My nits have been picked!

:-)

Cliff Mugnier
LSU
------------------------------
Paul -

Well, it's off-topic and nit-picking, but  (for the historical footnote
crowd) ESRI's Arc/Info software was first  released on a Prime minicomputer
rather than UNIX, and there were plenty of  personal computers around at
the time (1982).  Arc/Info was shortly ported  to UNIX, and the first PC
Arc/Info product was released in 1986.

     - Ed (old enough  to remember <g>)

Ed McNierney
TopoZone.com


From: proj-bounces at lists.maptools.org on behalf  of Paul Ramsey
Sent: Fri 3/10/2006 10:58 AM
To: PROJ.4 and  general Projections Discussions
Subject: Re: [Proj] help with clark66  as datum


I live for these nuggets! More, more! One of the most powerful  pieces
of knowledge of a discipline is an understanding of its history  and
evolution.

P

On 10-Mar-06, at 7:30 AM, Clifford J  Mugnier wrote:

> The DCW - Digital Chart of the World was HAND  digitized by the Defense
> Mapping Agency in the early 80s from small  scale "ONC" Operational
> Navigation Charts.  That became the defacto  FREE dataset of the
> world's
> coastlines, rivers, etc used  by all software companies including
> ESRI.  (It
> came  on a 9-Track tape from DMA as did the GCTP come on a 9-track
> tape  from
> the U.S. Geological Survey.)  The ellipsoid used as a default  then
> was the
> Clarke 1866.  That is how it wound up  being used for New Zealand.
> (So was
> the entire  world.)
>
> You have to be old enough to be able to remember this  stuff!
>
> -----------------------
> Very early versions of  ESRI software were on Unix machines that were
> running Arc/Info, long  before personal computers were invented.  The
> initial  implementations of projection math were based on GCTP, a
>  Fortran
> translation of John P. Snyer's first book (GCTP was written by  Dr.
> Atef
> Elassal).  All examples used the Clarke 1866  ellipsoid, because
> that was
> the legal ellipsoid in use  (for the NAD27) by the U.S. Geological
> Survey in
> the U.S.  before 1983.
>
> You merely have an ancient dataset, and you may  change it to any
> ellipsoid
> that you wish without degrading  any of the data.  The Normal Mercator
> projection is rarely used for  large-scale mapping where an actual
> datum is
> of  importance.  The exceptions are for all of Indonesia and for  the
> city of
> Guyaquil, Ecuador.
>
> It's not a  mistake, it was correct at the time.  John P. Snyder NEVER
>  concerned himself with datum transformations.  He considered  that
> datums
> were geodesy and not cartography, so he  deferred to me on that stuff.
> (John had a Master's Degree in Chemical  Engineering.)
>
> Cliff Mugnier
> LSU
>
>  --------------------------------------
>
> I would assume that the  "D_Clarke" stuff is just a mistake, and that
> all they mean is a Clarke  1866 spheroid.  Does this work?
>
> +proj=merc +lon_0=100  +lat_ts=-46 +ellps=clrk66
>
> Paul
>
> On 3/9/06, Hamish  <hamish_nospam at yahoo.com> wrote:
>> Hi,
>>
>>  I'm trying to figure out PROJ.4 parameters for a newly published
>>  dataset that has been widely distributed down here in New  Zealand.
>>
>>
>> ERSI Shapefile .prj file that came  with it:
>>
>>  PROJCS["Clarke_1866_Mercator",GEOGCS["GCS_Clarke_1866",
>>  DATUM["D_Clarke_1866",SPHEROID["Clarke_1866",6378206.4,294.9786982]],
>>  PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
>>  PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],
>>  PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",100.0],
>>  PARAMETER["Standard_Parallel_1",-46.0],UNIT["Meter",1.0]]
>>
>>
>>  Documentation that came with it:
>>
>> The projection used  [...] is:
>> Mercator Projection
>> Central Meridian =  100
>> Standard Parallel = -46
>> False Easting =  0
>> False Northing = 0
>> Spheroid/Datum = Clarke  1866
>>
>>
>> This confuses both me & the GRASS  GIS projection auto-import tool.
>> Does clark66 define a  datum??
>> Is this meaningful:  DATUM["D_Clarke_1866",   ??
>> Should I give up and just assume +towgs84=0,0,0  ?
>>
>> I have no idea why they used clark66 or a point in the  ocean
>> 1500km SW
>> of Perth Australia as the center  of projection for a modern New
>> Zealand
>> dataset. But so  it is.
>>
>> Hamish
>  _______________________________________________
> Proj mailing  list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
>  _______________________________________________
> Proj mailing  list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
>  _______________________________________________
> Proj mailing  list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj  mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj




From martin.vermeer at hut.fi  Fri Mar 10 10:19:20 2006
From: martin.vermeer at hut.fi (Martin Vermeer)
Date: Fri, 10 Mar 2006 20:19:20 +0200
Subject: [Proj] help with clark66 as datum
In-Reply-To: <OFC151E9E8.417E0998-ON8625712D.00552FAA-8625712D.00552FB9@lsu.edu>
References: <OFC151E9E8.417E0998-ON8625712D.00552FAA-8625712D.00552FB9@lsu.edu>
Message-ID: <20060310181919.GA18341@geo9.hut.fi>

On Fri, Mar 10, 2006 at 09:30:27AM -0600, Clifford J Mugnier wrote:
> 
> 
> 
> 
> The DCW - Digital Chart of the World was HAND digitized by the Defense
> Mapping Agency in the early 80s from small scale "ONC" Operational
> Navigation Charts.  That became the defacto FREE dataset of the world's
> coastlines, rivers, etc used by all software companies including ESRI.  (It
> came on a 9-Track tape from DMA as did the GCTP come on a 9-track tape from
> the U.S. Geological Survey.)  The ellipsoid used as a default then was the
> Clarke 1866.  That is how it wound up being used for New Zealand.  (So was
> the entire world.)
> 
> You have to be old enough to be able to remember this stuff!

Does this perhaps relate to the global coastline file 'ciakyst' ("CIA
coast") that I used in Denmark in the late 80s for plotting geoid maps?

- Martin

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060310/f915b34e/attachment.sig>

From mkennedy2 at earthlink.net  Fri Mar 10 16:29:19 2006
From: mkennedy2 at earthlink.net (Melita Kennedy)
Date: Fri, 10 Mar 2006 19:29:19 -0500 (EST)
Subject: [Proj] Clarke 1866
Message-ID: <17278302.1142036960180.JavaMail.root@elwamui-hybrid.atl.sa.earthlink.net>

In ArcInfo workstation which includes the ESRI coverage, GRID, and TIN 
data formats, if you don't explicitly use the DATUM keyword when defining
the coordinate system, the default spheroid is Clarke 1866. 

ArcGIS (desktop) which uses the projection engine library, requires a 'full' 
geographic coordinate system definition. Faced with a definition that only 
has "Spheroid Clarke1866", we expand it out into "GCS_Clarke_1866". 
There aren't any geographic/datum transformations for it of course.

If I see data with GCS_Clarke_1866, I know it was probably a coverage 
or a GRID at some point in its life. 

Melita

-- 
Melita Kennedy
ESRI Product Specialist
mkennedy at esri.com


From robert.swain at gmail.com  Sat Mar 11 19:51:37 2006
From: robert.swain at gmail.com (Robert Swain)
Date: Sun, 12 Mar 2006 03:51:37 +0000
Subject: [Proj] Proj 4 parameter string for Mars MOLA data
Message-ID: <200603120351.37154.robert.swain@gmail.com>

Hello,

I'm trying to figure out an appropriate proj 4 parameter string for the 
1/128th of a degree Mars MOLA data. Here is the information I'm working from:
http://rafb.net/paste/results/5WRQ0f27.html

Kind regards,
Robert Swain


From j.l.h.hartmann at uva.nl  Tue Mar 14 07:37:00 2006
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue, 14 Mar 2006 16:37:00 +0100
Subject: [Proj] Need a working PROJ4 string for the dutch grid
In-Reply-To: <1141982134.15887.9.camel@acme>
References: <3334245.post@talk.nabble.com> <1141982134.15887.9.camel@acme>
Message-ID: <4416E31C.5050609@uva.nl>

Roger Oberholtzer wrote:
> On Thu, 2006-03-09 at 22:45 -0800, Paul Meems wrote:
> 
>>I've got some trouble finding a working PROJ4 string for the dutch grid.
>>I'm on the developing team of MapWindow ( www.mapwindow.org ) and we use
>>PROJ4 for our (re)projection. The most projections work fine but the one I'm
>>interesting in the Dutch Grid projection (I live in The Netherlands) isn't
>>working correctly.
>>Does anybody knows the working PROJ4 string?
> 
> 
> When converting from WGS84 lat/longs, (like from a GPS) I use:
> 
> +proj=latlong +ellps=WGS84 +to +proj=sterea +lat_0=52.15616055555555
> +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000
> +ellps=bessel +units=m +no_defs
> 

Note that the  proj  program  is  limited to converting coordinates 
within one datum. Conversion from WGS84 latlong to Dutch RD needs a 
datum shift from the Dutch Bessel ellipsoid to WGS84. The above 
transformation does not include this shift and gives errors up to 200 m. 
A more precise transformation is possible with "cs2cs" and the following 
parameters:

+proj=latlong +datum=WGS84 +to +proj=sterea +lat_0=52.15616055555555 
+lon_0=5.38763888888889 +k=0.999908 +x_0=155000 +y_0=463000 
+ellps=bessel +units=m +no_defs 
+towgs84=565.2369,50.0087,465.658,-0.406857330322398,0.350732676542563,-1.8703473836068,4.0812 

		
This reduces errors to 25 cm at most, due to slight irregularities in 
the Dutch grid. See the documentation in the download section of 
http://www.rdnap.nl/
		

Jan


From jachym.cepicky at centrum.cz  Wed Mar 15 12:02:18 2006
From: jachym.cepicky at centrum.cz (Jachym Cepicky)
Date: Wed, 15 Mar 2006 21:02:18 +0100
Subject: [Proj] compilation error on windows
Message-ID: <20060315200218.GB5263@trava>

Hallo,
I try to compile proj (obtained from
ftp://ftp.remotesensing.org/proj/proj-4.4.9.zip) on Windows using
Microsoft C++ Visual Studio

In the README file, there is:

     C:\> cd proj\src
     C:>\PROJ\SRC> nmake /f makefile.vc all
     
But I get

nmake /f makefile.vc all

[...]

NMAKE : fatal  error U1077: '"C:\Program Files\Microsof Visual Studio
8\VC\bin\cl.EXE"' : return code '0x80'
Stop.

What to do?

Thank you

jachym
-- 
Jachym Cepicky                                  
e-mail: jachym.cepicky at centrum.cz           
URL: http://les-ejk.cz                      
GPG: http://les-ejk.cz/gnupg_public_key/    
-----------------------------------------   
OFFICE:                                     
Department of Geoinformation Technologies   
LDF MZLU v Brně                             
Zemědělská 3                                
613 00 Brno                                 
e-mail: xcepicky at node.mendelu.cz            
URL:    http://mapserver.mendelu.cz
Tel.:   +420 545 134 514


From mateusz at loskot.net  Wed Mar 15 12:05:04 2006
From: mateusz at loskot.net (=?ISO-8859-2?Q?Mateusz_=A3oskot?=)
Date: Wed, 15 Mar 2006 21:05:04 +0100
Subject: [Proj] compilation error on windows
In-Reply-To: <20060315200218.GB5263@trava>
References: <20060315200218.GB5263@trava>
Message-ID: <44187370.3050506@loskot.net>

Jachym Cepicky wrote:
> Hallo,
> I try to compile proj (obtained from
> ftp://ftp.remotesensing.org/proj/proj-4.4.9.zip) on Windows using
> Microsoft C++ Visual Studio
> 
> In the README file, there is:
> 
>      C:\> cd proj\src
>      C:>\PROJ\SRC> nmake /f makefile.vc all
>      
> But I get
> 
> nmake /f makefile.vc all
> 
> [...]
> 
> NMAKE : fatal  error U1077: '"C:\Program Files\Microsof Visual Studio
> 8\VC\bin\cl.EXE"' : return code '0x80'
> Stop.
> 
> What to do?

Have you run
"C:\Program Files\Microsoft Visual Studio 8\VC\bin\vcvars32.bat"
script to configure environment first?
I mean, in the console box in which you're running nmake.

I've just checked.
I downloaded proj-4.4.9 and it builds well using VC++ 8.0 without any 
problems.

1. open console
2. run "C:\Program Files\Microsoft Visual Studio 8\VC\bin\vcvars32.bat"
3. go to \proj-4.4.9\src directory
4. run nmake -f makefile.vc
5. it should work

Cheers
-- 
Mateusz Łoskot
http://mateusz.loskot.net


From jachym.cepicky at centrum.cz  Wed Mar 15 15:08:54 2006
From: jachym.cepicky at centrum.cz (Jachym Cepicky)
Date: Thu, 16 Mar 2006 00:08:54 +0100
Subject: [Proj] confused from krovak
Message-ID: <20060315230853.GD5263@trava>

Hallo, 
after successful compilation of proj on ms windows (thank you, Mateusz),
I try to get "expected" results from UMN MapServer.

My data are stored in Krovak projection (known as S-JTSK). All the data
are in "GIS version of Krovak", which means for the axes, that X=-y and
Y=-x. I used patch of PJ_krovak.c from Radim Blazek's site.

Output of cs2cs gives me expected result:

echo "-603056 -1.16353e+006" | cs2cs +proj=krovak +ellps=bessel +a=6377397.1550000003 +es=0.0066743722 +f=299.1528128000 +towgs84=570.8,85.7,462.8,4.998,1.587,5.261,3.56 +to +proj=latlong +datum=WGS84 +ellps=WGS84 +no_defs
16d32'43.318"E  49d9'55.923"N 44.706

this corresponds more or less with the output from GRASS GIS. Parameters
for projection informations are taken from PROJ_INFO file from my GRASS
locations.

Now I would like to share some data via UMN MapServer as WMS. What is
the right way, how to define the projection "krovak" in Mapfile when I
would like view the data also in other projections?

To use EPSG code seems not to be working -- Krovak is defined with

<2065> +proj=krovak +lat_0=49.5 +lon_0=60.16666666666667 +alpha=30.28813972222222 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +pm=ferro +units=m +no_defs

and using this parameters with cs2cs gives

echo "-603056 -1.16353e+006" | cs2cs +proj=krovak +lat_0=49.5 +lon_0=60.16666666666667 +alpha=30.28813972222222 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +pm=ferro +units=m +no_defs +to +proj=latlong +datum=WGS84 +ellps=WGS84 +no_defs
34d12'48.052"E  49d10'0.227"N -701.834

which is definitely bad result

So I have 
    
    EXTENT -603055.58 -1163534.63 -578334.19 -1138794.16
    WEB
        "wms_srs" "EPSG:4326"
    END
    PROJECTION
        "proj=krovak"
        "ellps=bessel"
        "a=6377397.155"
        "es=0.0066746722"
        "f=299.1528128"
        "towgs84=570.8,85.7,462.8,4.998,1.587,5.261,3.56"
    END
    
In my mapfile

However GetCapabilities gives me strange result:
     <LatLonBoundingBox minx="37.9432" miny="69.5973" maxx="38.6756" maxy="69.8515" />

Using GRASSs  g.region w=-603055.58 s=-1163534.63 e=-578334.19 n=-1138794.16 -gb

returns

n=-1138794.16
s=-1163534.63
w=-603055.58
e=-578334.19
nsres=4.96696848
ewres=4.96712678
rows=4981
cols=4977
LL_W=16.50846607
LL_E=16.88255667
LL_N=49.41034697
LL_S=49.16549325

So what to do? How to setup my mapfile correctly? Why is actualy version
of Krovak in EPSG as it is (2065)? I know lot of people and companyes, who are having their
maps in "Krovakgis" projection (-x,-y), but none, who is using some
S-JTSK - Ferro X,Y version. This significantly complicates usage of e.g.
grass, qgis and other programs.

Results can be viewed on 

GetCapabilities: http://indica.mendelu.cz/cgi-bin/mapserv.exe?map=c:\mapservdata\data\data_slp\krtiny.map&version=1.1.1&service=WMS&request=GetCapabilities
GetMap (default): http://indica.mendelu.cz/cgi-bin/mapserv.exe?map=c:\mapservdata\data\data_slp\krtiny.map&version=1.1.1&service=WMS&request=GetMap&layers=landuse&format=image/png

Proj compilation and installation:

windows: > cp proj-4.9.src c:\proj
windows: > cd c:\proj\src
cygwin:  > patch PJ_krovak.c PJ_krovak.c.patch
windows: > nmake /f makefile.vc all
cygwin:  > cd /cygdrive/c/proj/
cygwin:  > ./configure --prefix=/cygdrive/c/proj
cygwin:  > make
cygwin:  > make install

Thank you for any reply 

Jachym
-- 
Jachym Cepicky                                  
e-mail: jachym.cepicky at centrum.cz           
URL: http://les-ejk.cz                      
GPG: http://les-ejk.cz/gnupg_public_key/    
-----------------------------------------   
OFFICE:                                     
Department of Geoinformation Technologies   
LDF MZLU v Brně                             
Zemědělská 3                                
613 00 Brno                                 
e-mail: xcepicky at node.mendelu.cz            
URL:    http://mapserver.mendelu.cz
Tel.:   +420 545 134 514


From tim.loesch at dnr.state.mn.us  Thu Mar 16 09:21:19 2006
From: tim.loesch at dnr.state.mn.us (Tim Loesch)
Date: Thu, 16 Mar 2006 11:21:19 -0600
Subject: [Proj] Re: Proj Digest, Vol 22,
	Issue 13 (NOTICE - Out of the office)
Message-ID: <s4194a40.003@co5.dnr.state.mn.us>

I'm out of the office and will return Monday March 20th. If this is a GIS technical related issue contact Chris Pouliot or Mike Tronrud.





From miked at jamagination.com  Thu Mar 16 10:49:42 2006
From: miked at jamagination.com (mike d'ambrogia)
Date: Thu, 16 Mar 2006 10:49:42 -0800
Subject: [Proj] Clark 66 projection help
In-Reply-To: <20060315230853.GD5263@trava>
Message-ID: <006b01c6492a$63e2a650$0501a8c0@toshiba>

All,

New to the GIS world but having fun so far (not that being new to GIS
shouldn't be fun...).  I've hit my first roadblock on a project that I'm
trying to move over to mapserver and looking for some help.

This is an arcview project that I'm trying to convert to mapserver for
the Forest Service here in Central Calif so I'm dealing with NAD27 and
clark 66 which are apparently favorites of all.  The map raster images
that I have span from UTM 10 into UTM 11 but interstingly they use UTM10
values even if the area in question is within UTM11.   This leaves me
with some really big easting values for some areas on the map, never
seen this before.  I'm wondering how the projection for that would be
different, if at all?

The arcview prj files show the following:

PROJCS["NAD_1927_UTM_Zone_10N",GEOGCS["GCS_North_American_1927",DATUM["D
_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRI
MEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Tran
sverse_Mercator"],PARAMETER["False_Easting",500000],PARAMETER["False_Nor
thing",0],PARAMETER["Central_Meridian",-123],PARAMETER["Scale_Factor",0.
9996],PARAMETER["Latitude_Of_Origin",0],UNIT["Meter",1]]

I can't find an epsg code that seems to match up well, but I may not
know exactly what I am looking at either...

I'm not sure where to go next with this, any suggestions on how to come
up with a valid proj.4 projection from the info above would be greatly
appreicated.  

Mike



From pramsey at refractions.net  Thu Mar 16 13:12:16 2006
From: pramsey at refractions.net (Paul Ramsey)
Date: Thu, 16 Mar 2006 13:12:16 -0800
Subject: [Proj] Clark 66 projection help
In-Reply-To: <006b01c6492a$63e2a650$0501a8c0@toshiba>
References: <006b01c6492a$63e2a650$0501a8c0@toshiba>
Message-ID: <EBE09964-14D4-481A-AD84-AC2C32368023@refractions.net>

+init=epsg:26710

equivalent to

+proj=utm +zone=10 +ellps=clrk66 +datum=NAD27 +units=m

On Mar 16, 2006, at 10:49 AM, mike d'ambrogia wrote:

> All,
>
> New to the GIS world but having fun so far (not that being new to GIS
> shouldn't be fun...).  I've hit my first roadblock on a project  
> that I'm
> trying to move over to mapserver and looking for some help.
>
> This is an arcview project that I'm trying to convert to mapserver for
> the Forest Service here in Central Calif so I'm dealing with NAD27 and
> clark 66 which are apparently favorites of all.  The map raster images
> that I have span from UTM 10 into UTM 11 but interstingly they use  
> UTM10
> values even if the area in question is within UTM11.   This leaves me
> with some really big easting values for some areas on the map, never
> seen this before.  I'm wondering how the projection for that would be
> different, if at all?
>
> The arcview prj files show the following:
>
> PROJCS["NAD_1927_UTM_Zone_10N",GEOGCS 
> ["GCS_North_American_1927",DATUM["D
> _North_American_1927",SPHEROID["Clarke_1866", 
> 6378206.4,294.9786982]],PRI
> MEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION 
> ["Tran
> sverse_Mercator"],PARAMETER["False_Easting",500000],PARAMETER 
> ["False_Nor
> thing",0],PARAMETER["Central_Meridian",-123],PARAMETER 
> ["Scale_Factor",0.
> 9996],PARAMETER["Latitude_Of_Origin",0],UNIT["Meter",1]]
>
> I can't find an epsg code that seems to match up well, but I may not
> know exactly what I am looking at either...
>
> I'm not sure where to go next with this, any suggestions on how to  
> come
> up with a valid proj.4 projection from the info above would be greatly
> appreicated.
>
> Mike
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From ovv at hetnet.nl  Fri Mar 17 02:00:28 2006
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Fri, 17 Mar 2006 11:00:28 +0100
Subject: [Proj] confused from krovak
In-Reply-To: <20060315230853.GD5263@trava>
Message-ID: <C040474C.6A2F%ovv@hetnet.nl>

> From: Jachym Cepicky
> Subject: [Proj] confused from krovak

> My data are stored in Krovak projection (known as S-JTSK). All the data
> are in "GIS version of Krovak", which means for the axes, that X=-y and
> Y=-x. I used patch of PJ_krovak.c from Radim Blazek's site.
> Output of cs2cs gives me expected result:
> echo "-603056 -1.16353e+006" | cs2cs +proj=krovak +ellps=bessel
> +a=6377397.1550000003 +es=0.0066743722 +f=299.1528128000
> +towgs84=570.8,85.7,462.8,4.998,1.587,5.261,3.56 +to +proj=latlong
> +datum=WGS84 +ellps=WGS84 +no_defs
> 16d32'43.318"E  49d9'55.923"N 44.706

I can confirm this:
With my krovak function (not derived from (lib)proj) and the input
x=1163530; y=603056; (note the +)
I arrive at lat, lon wrt Greenwich:
lat=49.1661377; lon=16.5466812 decimal degrees
which after datum transform with your parameters gives:
lat=49d 09m 55.9232s; lon=16d 32m 43.3178s; h=44.7065 m

> ....
> To use EPSG code seems not to be working -- Krovak is defined with
> <2065> +proj=krovak +lat_0=49.5 +lon_0=60.16666666666667
> +alpha=30.28813972222222 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +pm=ferro
> +units=m +no_defs

In the mean time EPSG has updated the parameters (alpha for 0.1
milliarcsec), but this won't make any difference.

> and using this parameters with cs2cs gives
> echo "-603056 -1.16353e+006" | cs2cs +proj=krovak +lat_0=49.5
> +lon_0=60.16666666666667 +alpha=30.28813972222222 +k=0.9999 +x_0=0 +y_0=0
> +ellps=bessel +pm=ferro +units=m +no_defs +to +proj=latlong +datum=WGS84
> +ellps=WGS84 +no_defs
> 34d12'48.052"E  49d10'0.227"N -701.834
> which is definitely bad result

Remains to be seen. With my 'krovak' set to Ferro as prime meridian I
obtain:
lat=49d 09m 58.0958s; lon=34d 12m 48.0524s
This is still on the Bessel ellipsoid!!!
For your excessive height (depth) I have no explanation. Your latitude
differs by 2" with mine, which is not very significant.
Probably this information will help you to cure the cs2cs command line?




From cjmce at lsu.edu  Fri Mar 17 06:10:03 2006
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 17 Mar 2006 08:10:03 -0600
Subject: [Proj] confused from krovak
Message-ID: <OFE1504C72.0FF7137E-ON86257134.004DD356-86257134.004DD36F@lsu.edu>





The comment below regarding transformed ellipsoid height is getting quite
far from the general topic of cartography, GIS, and map projections.  When
concern is voiced over ellipsoid heights in combined datum shift and
projection transformations, the user is now deep into geodesy.

In fact, the topic is termed PHYSICAL Geodesy, and the appropriate
application of "GEOIDS" is in order.

The Bessel ellipsoid was cooked up in 1841.  The Krovak projection was
cooked up in 1922.  The Czech Republic is still referenced to the
Hermannskoegel Datum of 1871 when using the Krovak projection.  Note that
these are systems with origins from two centuries ago!  Trying to reconcile
these ancient systems with a GPS system is mostly a waste of time with
respect to ellipsoid heights.  That old datum does NOT have a geoid
associated with it.  It does not even have an old-timey astrogeodetic
deflection geoid computed muchless a geoid that could be comparable to the
EGM96 geoid.

The PROJ4 collection of cartographic and geometric utilities is not a
panacea to all problems geodetic!  If the Czech Republic is prepared to
sink several hundred million dollars into defining a geoid for its old
datum, then ellipsoid heights will make then make (more) sense to the
neophyte GIS user.  Until that happens, don't expect miracles from PROJ4.
You will need a Hermannskoegel 1871 Datum Geoid for that to happen, and
that's not going to happen.  It would be a waste of money.

I believe the Czech Republic government is working on a local national
geoid to be compatible with a new inertial datum that is associated with
the International Terrestrial Reference Frame (ITRF); a proper use of
public money.

Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
CENTER FOR GEOINFORMATICS
Department of Civil Engineering
CEBA 3223A
LOUISIANA STATE UNIVERSITY
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic]
Voice and Facsimile:  (225) 578-4474 [Research]
======================================================
http://www.asprs.org/resources/GRIDS/
http://www.cee.lsu.edu/facultyStaff/mugnier/index.html
======================================================



> From: Jachym Cepicky
> Subject: [Proj] confused from krovak

> My data are stored in Krovak projection (known as S-JTSK). All the data
> are in "GIS version of Krovak", which means for the axes, that X=-y and
> Y=-x. I used patch of PJ_krovak.c from Radim Blazek's site.
> Output of cs2cs gives me expected result:
> echo "-603056 -1.16353e+006" | cs2cs +proj=krovak +ellps=bessel
> +a=6377397.1550000003 +es=0.0066743722 +f=299.1528128000
> +towgs84=570.8,85.7,462.8,4.998,1.587,5.261,3.56 +to +proj=latlong
> +datum=WGS84 +ellps=WGS84 +no_defs
> 16d32'43.318"E  49d9'55.923"N 44.706

I can confirm this:
With my krovak function (not derived from (lib)proj) and the input
x=1163530; y=603056; (note the +)
I arrive at lat, lon wrt Greenwich:
lat=49.1661377; lon=16.5466812 decimal degrees
which after datum transform with your parameters gives:
lat=49d 09m 55.9232s; lon=16d 32m 43.3178s; h=44.7065 m

> ....
> To use EPSG code seems not to be working -- Krovak is defined with
> <2065> +proj=krovak +lat_0=49.5 +lon_0=60.16666666666667
> +alpha=30.28813972222222 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +pm=ferro
> +units=m +no_defs

In the mean time EPSG has updated the parameters (alpha for 0.1
milliarcsec), but this won't make any difference.

> and using this parameters with cs2cs gives
> echo "-603056 -1.16353e+006" | cs2cs +proj=krovak +lat_0=49.5
> +lon_0=60.16666666666667 +alpha=30.28813972222222 +k=0.9999 +x_0=0 +y_0=0
> +ellps=bessel +pm=ferro +units=m +no_defs +to +proj=latlong +datum=WGS84
> +ellps=WGS84 +no_defs
> 34d12'48.052"E  49d10'0.227"N -701.834
> which is definitely bad result

Remains to be seen. With my 'krovak' set to Ferro as prime meridian I
obtain:
lat=49d 09m 58.0958s; lon=34d 12m 48.0524s
This is still on the Bessel ellipsoid!!!
For your excessive height (depth) I have no explanation. Your latitude
differs by 2" with mine, which is not very significant.
Probably this information will help you to cure the cs2cs command line?



From phm4 at kent.ac.uk  Tue Mar 21 03:27:04 2006
From: phm4 at kent.ac.uk (Philipp H. Mohr)
Date: Tue, 21 Mar 2006 11:27:04 +0000 (GMT)
Subject: [Proj] OSGB36 to wgs84 decimal
Message-ID: <Pine.GSO.4.58.0603211103170.28093@myrtle.ukc.ac.uk>

Hello,

I am new to proj.4 and cs2cs and I am utterly confused by all the options.
I would like to convert from British National Grid OSGB36 into wgs84. I am
aware that this topic has been covered already, but not the output I am
after.

I would like to convert, e.g.: 158427.13145307 615597.12638647

into e.g.: 51.29647 1.06660333333


When I use:


cs2cs  +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000
+y_0=-100000 +ellps=airy
+towgs84=446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894 +units=m
+no_defs  +to +proj=latlong +ellps=WGS84 +towgs84=0,0,0 +nodefs


I don't get the decimal output I am after. It would be great if some one
can also check the parameters and tell me if they are correct.

Thank you very much for your help.

Cheers,
Phil


From warmerdam at pobox.com  Tue Mar 21 07:41:27 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 21 Mar 2006 10:41:27 -0500
Subject: [Proj] OSGB36 to wgs84 decimal
In-Reply-To: <Pine.GSO.4.58.0603211103170.28093@myrtle.ukc.ac.uk>
References: <Pine.GSO.4.58.0603211103170.28093@myrtle.ukc.ac.uk>
Message-ID: <44201EA7.2050703@pobox.com>

Philipp H. Mohr wrote:
> Hello,
> 
> I am new to proj.4 and cs2cs and I am utterly confused by all the options.
> I would like to convert from British National Grid OSGB36 into wgs84. I am
> aware that this topic has been covered already, but not the output I am
> after.
> 
> I would like to convert, e.g.: 158427.13145307 615597.12638647
> 
> into e.g.: 51.29647 1.06660333333

Phil,

Can you be more specific about what error you are seeing?  I get a small
difference but I'm not sure if that is what you are concerned about.

I would also encourage you to be more specific about axis direction.
I first assumed you expected the output near 51E, 1N and fairly quickly
realized that was crazy for the UK national grid.  But of course you
meant 1E, 51N.

But even more perversely you reversed the easting and northing which
isn't so obvious from the raw values.  I only determined this by
trying them the other way around.   I get:


cs2cs +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 
+ellps=airy +towgs84=446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894 
+units=m +no_defs +to +proj=latlong +ellps=WGS84 +towgs84=0,0,0 +nodefs
615597.12638647 158427.13145307                   (input)
1d5'25.031"E    51d17'2.982"N 44.150              (output)

This is reasonably close to your target location but still off by
a more than a second.  (BTW your location in DMS is 1d3'59.772"E, 51d17'47.292"N)

Is this the difference you are concerned about?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org



From phm4 at kent.ac.uk  Tue Mar 21 07:58:47 2006
From: phm4 at kent.ac.uk (Philipp H. Mohr)
Date: Tue, 21 Mar 2006 15:58:47 +0000 (GMT)
Subject: [Proj] OSGB36 to wgs84 decimal
In-Reply-To: <44201EA7.2050703@pobox.com>
References: <Pine.GSO.4.58.0603211103170.28093@myrtle.ukc.ac.uk>
	<44201EA7.2050703@pobox.com>
Message-ID: <Pine.GSO.4.58.0603211554430.28093@myrtle.ukc.ac.uk>

Hello,

thank you very much for your reply.

> > I am new to proj.4 and cs2cs and I am utterly confused by all the options.
> > I would like to convert from British National Grid OSGB36 into wgs84. I am
> > aware that this topic has been covered already, but not the output I am
> > after.
> >
> > I would like to convert, e.g.: 158427.13145307 615597.12638647
> >
> > into e.g.: 51.29647 1.06660333333
>
> Can you be more specific about what error you are seeing?  I get a small
> difference but I'm not sure if that is what you are concerned about.

I haven't converted one to the other, this was just meant as an example
for the format I am interested in.


> I would also encourage you to be more specific about axis direction.
> I first assumed you expected the output near 51E, 1N and fairly quickly
> realized that was crazy for the UK national grid.  But of course you
> meant 1E, 51N.

Ok, I agree, wasn't sure which way around is the standard - now I know :-)

> But even more perversely you reversed the easting and northing which
> isn't so obvious from the raw values.  I only determined this by
> trying them the other way around.   I get:
>
>
> cs2cs +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000
> +ellps=airy +towgs84=446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894
> +units=m +no_defs +to +proj=latlong +ellps=WGS84 +towgs84=0,0,0 +nodefs
> 615597.12638647 158427.13145307                   (input)
> 1d5'25.031"E    51d17'2.982"N 44.150              (output)
>
> This is reasonably close to your target location but still off by
> a more than a second.  (BTW your location in DMS is 1d3'59.772"E, 51d17'47.292"N)
>
> Is this the difference you are concerned about?


I would like to get an accurate conversion which outputs the wgs84
co-ordinates in decimal degree and not in degree minutes and seconds.


Thank you very much,
Phil


From warmerdam at pobox.com  Tue Mar 21 08:55:02 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 21 Mar 2006 11:55:02 -0500
Subject: [Proj] OSGB36 to wgs84 decimal
In-Reply-To: <Pine.GSO.4.58.0603211554430.28093@myrtle.ukc.ac.uk>
References: <Pine.GSO.4.58.0603211103170.28093@myrtle.ukc.ac.uk>	<44201EA7.2050703@pobox.com>
	<Pine.GSO.4.58.0603211554430.28093@myrtle.ukc.ac.uk>
Message-ID: <44202FE6.4050203@pobox.com>

Philipp H. Mohr wrote:
>> I would also encourage you to be more specific about axis direction.
>> I first assumed you expected the output near 51E, 1N and fairly quickly
>> realized that was crazy for the UK national grid.  But of course you
>> meant 1E, 51N.
> 
> Ok, I agree, wasn't sure which way around is the standard - now I know :-)

Phil,

Well, for lat/long values there are various practices, so it is really
helpful to actually append NS and EW indicators to the values.  For
projected coordinates (easting,northing) is by far the most common,
but it doesn't hurt to indicate axis direction there either.

>> But even more perversely you reversed the easting and northing which
>> isn't so obvious from the raw values.  I only determined this by
>> trying them the other way around.   I get:
>>
>>
>> cs2cs +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000
>> +ellps=airy +towgs84=446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894
>> +units=m +no_defs +to +proj=latlong +ellps=WGS84 +towgs84=0,0,0 +nodefs
>> 615597.12638647 158427.13145307                   (input)
>> 1d5'25.031"E    51d17'2.982"N 44.150              (output)
>>
>> This is reasonably close to your target location but still off by
>> a more than a second.  (BTW your location in DMS is 1d3'59.772"E, 51d17'47.292"N)
>>
>> Is this the difference you are concerned about?
> 
> 
> I would like to get an accurate conversion which outputs the wgs84
> co-ordinates in decimal degree and not in degree minutes and seconds.

You can use the -f parameter to specify output formatting.

eg.

cs2cs -f '%.8f' +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.999601 +x_0=400000 
+y_0=-100000 +ellps=airy 
+towgs84=446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894 +units=m 
+no_defs +to +proj=latlong +ellps=WGS84 +towgs84=0,0,0 +nodefs
615597.12638647 158427.13145307
1.09028724      51.28416240 44.15014616

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org



From jachym.cepicky at centrum.cz  Tue Mar 21 10:16:33 2006
From: jachym.cepicky at centrum.cz (Jachym Cepicky)
Date: Tue, 21 Mar 2006 19:16:33 +0100
Subject: [Proj] confused from krovak
In-Reply-To: <C040474C.6A2F%ovv@hetnet.nl>
References: <20060315230853.GD5263@trava> <C040474C.6A2F%ovv@hetnet.nl>
Message-ID: <20060321181633.GA25804@trava.q.mendelu.cz>

Hallo,
I tested the whole problem one more time and I would say now, that I did
not compile  PROJ on MS Windows with the patch corectly. I setuped the
same configuration on Linux and everything worked well.

Here is the part of the mapfile:

 EXTENT  -603055.584603 -1163534.631291 -578334.193874 -1138794.167715
 PROJECTION
	"proj=krovak"
	"ellps=bessel"
	"a=6377397.155"
	"es=0.0066746722"
	"f=299.1528128"
	"towgs84=570.8,85.7,462.8,4.998,1.587,5.261,3.56"
 END

And the resulting GetCapabilities from Linux server with applayed patch
on PJ_krovak.c from Radim Blazek

[...]
 <LatLonBoundingBox minx="16.5098" miny="49.1661" maxx="16.8839" maxy="49.411" />
[...]

Which is what I would expect.

The same input but different output I get from Proj and MapServer
installed on MS Windows server:
[...]
 <LatLonBoundingBox minx="37.9432" miny="69.5973" maxx="38.6756" maxy="69.8515" />
[...]

The way, how I try to apply the patch on MS Windows is following:

cygwin: > cd /cygdrive/c/
cygwin: > rm -rf proj
cygwin: > wget ftp://ftp.remotesensing.org/proj/proj-4.4.9.zip
cygwin: > unzip proj-4.4.9.zip
cygwin: > mv proj-4.4.9 proj
cygwin: > cd proj/src/
cygwin: > cat PJ_krovak.c |grep "\(xy\.y\)\|\(xy\.x\)"

        xy.y = ro * cos(eps) / a;
        xy.x = ro * sin(eps) / a;
        xy0=xy.x;
        xy.x=xy.y;
        xy.y=xy0;
        ro = sqrt(xy.x * xy.x + xy.y * xy.y);
        eps = atan2(xy.y, xy.x);

cygwin: > wget http://mpa.itc.it/radim/jtsk/PJ_krovak.c.patch
cygwin: > patch PJ_krovak.c PJ_krovak.c.patch
cygwin: > cat PJ_krovak.c |grep "\(xy\.y\)\|\(xy\.x\)"

        xy.y = -ro * cos(eps) / a;
        xy.x = -ro * sin(eps) / a;
        xy0=xy.x;
        xy.x = -xy.y;
        xy.y = -xy0;
        ro = sqrt(xy.x * xy.x + xy.y * xy.y);
        eps = atan2(xy.y, xy.x);

Right, now in Windows command line

wincmd: > cd c:\proj\src
wincmd: > vcvars32.bat
wincmd: > nmake /f makefile.vc all

Now the test:

wget -O - "http://indica.mendelu.cz/cgi-bin/mapserv.exe?map=c:\mapservdata\data\data_slp\krtiny_krovak.map&version=1.1.1&service=WMS&request=GetCapabilities" | grep LatLonBoundingBox

<LatLonBoundingBox minx="37.9432" miny="69.5973" maxx="38.6756" maxy="69.8515" />


and the same with linux server

wget -O - "http://mapserver.mendelu.cz/wms/?&service=WMS&request=GetCapabilities" | grep LatLonBoundingBox

<LatLonBoundingBox minx="16.5098" miny="49.1661" maxx="16.8839" maxy="49.411" />

Could somebody tell me, what I am doing wrong?

Thank you

Jachym

On Fri, Mar 17, 2006 at 11:00:28AM +0100, Oscar van Vlijmen wrote:
> > From: Jachym Cepicky
> > Subject: [Proj] confused from krovak
> 
> > My data are stored in Krovak projection (known as S-JTSK). All the data
> > are in "GIS version of Krovak", which means for the axes, that X=-y and
> > Y=-x. I used patch of PJ_krovak.c from Radim Blazek's site.
> > Output of cs2cs gives me expected result:
> > echo "-603056 -1.16353e+006" | cs2cs +proj=krovak +ellps=bessel
> > +a=6377397.1550000003 +es=0.0066743722 +f=299.1528128000
> > +towgs84=570.8,85.7,462.8,4.998,1.587,5.261,3.56 +to +proj=latlong
> > +datum=WGS84 +ellps=WGS84 +no_defs
> > 16d32'43.318"E  49d9'55.923"N 44.706
> 
> I can confirm this:
> With my krovak function (not derived from (lib)proj) and the input
> x=1163530; y=603056; (note the +)
> I arrive at lat, lon wrt Greenwich:
> lat=49.1661377; lon=16.5466812 decimal degrees
> which after datum transform with your parameters gives:
> lat=49d 09m 55.9232s; lon=16d 32m 43.3178s; h=44.7065 m
> 
> > ....
> > To use EPSG code seems not to be working -- Krovak is defined with
> > <2065> +proj=krovak +lat_0=49.5 +lon_0=60.16666666666667
> > +alpha=30.28813972222222 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +pm=ferro
> > +units=m +no_defs
> 
> In the mean time EPSG has updated the parameters (alpha for 0.1
> milliarcsec), but this won't make any difference.
> 
> > and using this parameters with cs2cs gives
> > echo "-603056 -1.16353e+006" | cs2cs +proj=krovak +lat_0=49.5
> > +lon_0=60.16666666666667 +alpha=30.28813972222222 +k=0.9999 +x_0=0 +y_0=0
> > +ellps=bessel +pm=ferro +units=m +no_defs +to +proj=latlong +datum=WGS84
> > +ellps=WGS84 +no_defs
> > 34d12'48.052"E  49d10'0.227"N -701.834
> > which is definitely bad result
> 
> Remains to be seen. With my 'krovak' set to Ferro as prime meridian I
> obtain:
> lat=49d 09m 58.0958s; lon=34d 12m 48.0524s
> This is still on the Bessel ellipsoid!!!
> For your excessive height (depth) I have no explanation. Your latitude
> differs by 2" with mine, which is not very significant.
> Probably this information will help you to cure the cs2cs command line?
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

-- 
Jachym Cepicky                                  
e-mail: jachym.cepicky at centrum.cz           
URL: http://les-ejk.cz                      
GPG: http://les-ejk.cz/gnupg_public_key/    
-----------------------------------------   
OFFICE:                                     
Department of Geoinformation Technologies   
LDF MZLU v Brně                             
Zemědělská 3                                
613 00 Brno                                 
e-mail: xcepicky at node.mendelu.cz            
URL:    http://mapserver.mendelu.cz
Tel.:   +420 545 134 514


From maria.piles at gmail.com  Tue Mar 21 08:17:15 2006
From: maria.piles at gmail.com (=?ISO-8859-1?Q?Mar=EDa?=)
Date: Tue, 21 Mar 2006 17:17:15 +0100
Subject: [Proj] Snyder ISEA
Message-ID: <a8012b3a0603210817g2b3c7618i7110490c410ca571@mail.gmail.com>

Hello,

I'm a Ph.D student at the Polytechnical University of Catalonia. I am
working with remote sensing images from different sensors and I pretend to
represent all the data in the ISEA 4-9 grid. I haven't found many
information about how to covert from lat/lon to ISEA and about the Snyder's
projection on the net. I have happened to read on a maptools chat that you
are familiar with John P. Snyder work, and this is the reason for which I am
writing to you. Do you know where I can find the article 'An Equal-area Map
Projection for Polyhedral Globes' or any useful information for the tasks I
am dealing with?

Thanks in advance,

María Piles Guillem
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060321/1dda586d/attachment.html>

From Strebe at aol.com  Tue Mar 21 15:15:12 2006
From: Strebe at aol.com (Strebe at aol.com)
Date: Tue, 21 Mar 2006 18:15:12 EST
Subject: [Proj] Re: Snyder ISEA
Message-ID: <334.6868dd.3151e300@aol.com>


"An Equal-area Map Projection for Polyhedral Globes" is from Cartographia 
Vol. 29 No. 1 (Spring 1992) pp. 10-21. I have not seen the formulae reproduced 
elsewhere.

Regards,
daan Strebe


In a message dated 3/21/06 14:19:03, maria.piles at gmail.com writes:


> Hello,
> 
> I'm a Ph.D student at the Polytechnical University of Catalonia. I am 
> working with remote sensing images from different sensors and I pretend to 
> represent all the data in the ISEA 4-9 grid. I haven't found many information about 
> how to covert from lat/lon to ISEA and about the Snyder's projection on the 
> net. I have happened to read on a maptools chat that you are familiar with John 
> P. Snyder work, and this is the reason for which I am writing to you. Do you 
> know where I can find the article 'An Equal-area Map Projection for 
> Polyhedral Globes' or any useful information for the tasks I am dealing with?
> 
> Thanks in advance,
> 
> María Piles Guillem
> 
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060321/790582ea/attachment.html>

From ovv at hetnet.nl  Wed Mar 22 02:55:54 2006
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Wed, 22 Mar 2006 11:55:54 +0100
Subject: [Proj] Snyder ISEA
In-Reply-To: <a8012b3a0603210817g2b3c7618i7110490c410ca571@mail.gmail.com>
Message-ID: <C046EBCA.6A99%ovv@hetnet.nl>

> From: "María" <maria.piles-gmail.com>
> Subject: [Proj] Snyder ISEA

> I'm a Ph.D student at the Polytechnical University of Catalonia. I am working
> with remote sensing images from different sensors and I pretend to represent >
> all the data in the ISEA 4-9 grid.

Also see the posting from mr. Anderson, dated 2005-10-19, regarding "Snyder
ISEA". He has several routines from the late Snyder himself.

Probably interesting is the web site
http://www.sou.edu/cs/sahr/dgg/isea/isea.html
"ISEA Based DGGs" (Discrete Global Grids).
This research group develops public domain DGG software.
See for instance the code in:
/dggrid.v43b/src/lib/dglib/lib/DgProjSnyder.C






From richard.greenwood at gmail.com  Sun Mar 26 20:19:45 2006
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Sun, 26 Mar 2006 21:19:45 -0700
Subject: [Proj] verify a transformation
Message-ID: <ae9185aa0603262019lce75e92t137fd12b017fdc35@mail.gmail.com>

I am trying to verify, or get a "second opinion" on, a cs2cs
transformation from EPSG:26591 (Monte Mario Italy) to WGS84 geodetic.
Could anyone offer a suggestion for non PROJ.4 solution (preferably
free) that they would trust to verify the cs2cs results?

Thanks,
Rich

--
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com



From mateusz at loskot.net  Wed Mar 29 16:18:46 2006
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Thu, 30 Mar 2006 02:18:46 +0200
Subject: [Proj] DEBUG preprocessor definition
Message-ID: <442B23E6.1020100@loskot.net>

Hi,

As I see, in PROJ.4 sources DEBUG macro is used.
But I'm not sure if it's defined in default building configuration.
I'm building PROJ.4 using VC++ and as I noticed, after I defined DEBUG
macro, I got errors about undefined/unresolved symbols like MessageBox.
It seems <windows.h> is not included and user32.lib is not linked with.

So, does it mean those #ifdef DEBUG clauses can be removed?

One note more, there is no DEBUG definition used by Visual C++ but it
uses _DEBUG instead.

Cheers
-- 
Mateusz Łoskot
http://mateusz.loskot.net


From warmerdam at pobox.com  Wed Mar 29 17:23:36 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 29 Mar 2006 20:23:36 -0500
Subject: [Proj] DEBUG preprocessor definition
In-Reply-To: <442B23E6.1020100@loskot.net>
References: <442B23E6.1020100@loskot.net>
Message-ID: <442B3318.20704@pobox.com>

Mateusz Łoskot wrote:
> Hi,
> 
> As I see, in PROJ.4 sources DEBUG macro is used.
> But I'm not sure if it's defined in default building configuration.
> I'm building PROJ.4 using VC++ and as I noticed, after I defined DEBUG
> macro, I got errors about undefined/unresolved symbols like MessageBox.
> It seems <windows.h> is not included and user32.lib is not linked with.
> 
> So, does it mean those #ifdef DEBUG clauses can be removed?

Mateusz,

I have stripped out this DEBUG stuff in pj_krovak.c in CVS.
It is not our practice to include debugging stuff that uses MessageBox.
That apparently just slipped through.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org



From mateusz at loskot.net  Wed Mar 29 18:04:31 2006
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Thu, 30 Mar 2006 04:04:31 +0200
Subject: [Proj] DEBUG preprocessor definition
In-Reply-To: <442B3318.20704@pobox.com>
References: <442B23E6.1020100@loskot.net> <442B3318.20704@pobox.com>
Message-ID: <442B3CAF.2070609@loskot.net>

Frank Warmerdam wrote:
> Mateusz Łoskot wrote:
>> As I see, in PROJ.4 sources DEBUG macro is used.
>> But I'm not sure if it's defined in default building configuration.
>> I'm building PROJ.4 using VC++ and as I noticed, after I defined DEBUG
>> macro, I got errors about undefined/unresolved symbols like MessageBox.
>> It seems <windows.h> is not included and user32.lib is not linked with.
>>
>> So, does it mean those #ifdef DEBUG clauses can be removed?
> 
> Mateusz,
> 
> I have stripped out this DEBUG stuff in pj_krovak.c in CVS.
> It is not our practice to include debugging stuff that uses MessageBox.
> That apparently just slipped through.

Hi Frank,
That's exactly what I supposed.

Cheers
-- 
Mateusz Łoskot
http://mateusz.loskot.net


From mateusz at loskot.net  Wed Mar 29 18:24:59 2006
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Thu, 30 Mar 2006 04:24:59 +0200
Subject: [Proj] First attempt of porting PROJ.4 to Windows CE
Message-ID: <442B417B.2090507@loskot.net>

Hi,

I've just managed to build PROJ.4 as a static library using eMbedded
Visual C+++ 4.0, compiler for Windows CE platform.

I had to apply pretty much changes but most of them are trivial macros
or #ifdef's.
The only serious change I had to do was to rename all occurances of LP
type to LPP. This step was required because LP is a typedef
of wide-char string defined in the winnt.h file from Windows CE SDK.

I also added projects_wince.h file which is a copy of projects.h with
additional #ifdefs related to Windows CE.

I attached projects_wince.h file together with "big patch" with my
changes to this post (proj4-wince-port.zip archive).

This is my first attempt of porting PROJ.4 to Windows CE and the purpose
of this post is to present what changes are required to use PROJ.4 on
Windows CE. This port has not been tested in details yet. I'm going to
test it soon.

Now, the question is: is this port interesting and should it be included
to the official CVS repo?

I can imagine that this port requires quite much changes and not
everyone would wish to handle them during further development so that's
why I'm asking.

Another option is to publish this port as a separate project or
subprojects, similarly as sqlite-wince - Windows CE port of SQLite
library - is published on the SourceForge.net.

Please, share your opinion how should I proceed to put this port
available to users.

Best regards
-- 
Mateusz Łoskot
http://mateusz.loskot.net
-------------- next part --------------
A non-text attachment was scrubbed...
Name: proj4-wince-port.zip
Type: application/x-zip-compressed
Size: 16903 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20060330/a1336977/attachment.bin>

From mfinn at usgs.gov  Wed Mar 29 20:02:24 2006
From: mfinn at usgs.gov (Michael P Finn)
Date: Wed, 29 Mar 2006 22:02:24 -0600
Subject: [Proj] Michael P Finn of the USGS/ National Geospatial Technical
 Operations Center is out of the office.
Message-ID: <OF40A8B7DD.7D49573C-ON86257141.00163188-86257141.00163189@usgs.gov>


I will be out of the office starting  03/28/2006 and will not return until
03/30/2006.

I will be unable to check e-mail regularly while I am out. If I can't
respond to your message while I am out, then I will when I return. If you
have anything that cannot wait, please contact my colleague, Mr. Michael
Williams, at mswilliams at usgs.gov.     Mike



From luca.casagrande at gmail.com  Thu Mar 30 05:18:40 2006
From: luca.casagrande at gmail.com (Luca Casagrande)
Date: Thu, 30 Mar 2006 13:18:40 +0000
Subject: [Proj] Italian Catastal System
Message-ID: <200603301318.40236.luca.casagrande@gmail.com>

Hi guys!
Due some my free time, I'd like to add to PROJ the Italian Catastal System...

This system uses Cassini Soldner with Bessel Ellipsoid. This Ellipsoid has got 
differents guideline  for 3 zones of Italy and in each of those zones, we 
have got 7 Natural Origin.
In this page I found the Cassini-Soldner PROJ parameter 

http://www.remotesensing.org/geotiff/proj_list/cassini_soldner.html

What other information does I need to make some tests?

Right now i have got the WGS coordinates of all the 21 Natural Origin.

Thx

Luca

-- 
"E' molto più bello sapere qualcosa di tutto, che tutto di una cosa (Blaise 
Pascal)."

GENTOO-GIS Development Team
jabber: casagrande at jabber.linux.it

 



From luca.casagrande at gmail.com  Thu Mar 30 10:34:23 2006
From: luca.casagrande at gmail.com (Luca Casagrande)
Date: Thu, 30 Mar 2006 18:34:23 +0000
Subject: [Proj] Italian Catastal System
In-Reply-To: <OFF80CD9A7.D59DDF83-ON86257141.0058EB24-86257141.0058EB40@lsu.edu>
References: <OFF80CD9A7.D59DDF83-ON86257141.0058EB24-86257141.0058EB40@lsu.edu>
Message-ID: <200603301834.23452.luca.casagrande@gmail.com>

Hi Cliff and thx for your help (also from all the italian GFOSS comunity)

One of those is Monte Mario...its coordinates are:

WGS84
lat 41°55’27.851’’ 
long 12°27’07.658’’

ROMA 40
lat 41°55’25.51’’
long 0°

No false E or N.

If you can send me the proj line, I'll do the others on my own...

Thank you very much!

Luca


Alle 16:11, giovedì 30 marzo 2006, Clifford J Mugnier ha scritto:
> Dear Luca,
>
> Would you please send that list of coordinated to me?  Do you have both the
> Roma 1940 AND WGS84 coordinates of those origins?  Do these systems have
> False Eastings and/or False Northings also?
>
> Regards,
>
> Cliff

>>  Hi guys!
> > Due some my free time, I'd like to add to PROJ the Italian Catastal
> > System...
> >
> > This system uses Cassini Soldner with Bessel Ellipsoid. This Ellipsoid
> > has got
> > differents guideline  for 3 zones of Italy and in each of those zones, we
> > have got 7 Natural Origin.
> > In this page I found the Cassini-Soldner PROJ parameter
> >
> > http://www.remotesensing.org/geotiff/proj_list/cassini_soldner.html
> >
> > What other information does I need to make some tests?
> >
> > Right now i have got the WGS coordinates of all the 21 Natural Origin.
> >
> > Thx
> >
> > Luca

-- 
"E' molto più bello sapere qualcosa di tutto, che tutto di una cosa (Blaise 
Pascal)."

GENTOO-GIS Development Team
jabber: casagrande at jabber.linux.it

 



