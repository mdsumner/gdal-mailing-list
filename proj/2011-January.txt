From dersh at alum.mit.edu  Wed Jan  5 16:18:45 2011
From: dersh at alum.mit.edu (Adam Dershowitz)
Date: Wed, 5 Jan 2011 16:18:45 -0800
Subject: [Proj] Lat/long to utm easting error
Message-ID: <3B249FC1-7798-495F-BB92-0E239F51A760@alum.mit.edu>

I have run into something that I don't understand, and I hope someone can help explain.
I was doing some conversions of points, and ran into a problem.  I finally narrowed it down to the following:

If I take two points, at the identical longitude, with a small change in latitude, and convert them each to UTM, I would expect nearly identical easting values.  But I am not seeing that.  For example:

cs2cs +proj=latlong +datum=WGS84 +to +proj=utm +datum=WGS84 +zone=17 -r

42d37'3.77503"N 83d59'35"W
254524.57	4722707.58 0.00
42d37'0.02186"N 83d59'35"W
254520.47	4722591.80 0.00


Above there is  ~4 m easting difference, with just a small (~120m) change in latitude.  Since these points are exactly North-south of each other, shouldn't they have the same easting, at least when they are this close to each other in latitude?  

Thanks much for any explanations, 

--Adam





From ndzinn at comcast.net  Wed Jan  5 17:52:56 2011
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Wed, 5 Jan 2011 19:52:56 -0600
Subject: [Proj] Lat/long to utm easting error
In-Reply-To: <3B249FC1-7798-495F-BB92-0E239F51A760@alum.mit.edu>
References: <3B249FC1-7798-495F-BB92-0E239F51A760@alum.mit.edu>
Message-ID: <9637973DFB2E4867A30A66F8DC5306B9@NoelHmPC>

Adam,

What you're expecting works only on the Central Meridian (CM) and not 
elsewhere due to convergence of the meridians.

Google "convergence of the meridians" for a fuller explanation.

Noel

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)

-----Original Message----- 
From: Adam Dershowitz
Sent: Wednesday, January 05, 2011 6:18 PM
To: proj at lists.maptools.org
Subject: [Proj] Lat/long to utm easting error

I have run into something that I don't understand, and I hope someone can 
help explain.
I was doing some conversions of points, and ran into a problem.  I finally 
narrowed it down to the following:

If I take two points, at the identical longitude, with a small change in 
latitude, and convert them each to UTM, I would expect nearly identical 
easting values.  But I am not seeing that.  For example:

cs2cs +proj=latlong +datum=WGS84 +to +proj=utm +datum=WGS84 +zone=17 -r

42d37'3.77503"N 83d59'35"W
254524.57 4722707.58 0.00
42d37'0.02186"N 83d59'35"W
254520.47 4722591.80 0.00


Above there is  ~4 m easting difference, with just a small (~120m) change in 
latitude.  Since these points are exactly North-south of each other, 
shouldn't they have the same easting, at least when they are this close to 
each other in latitude?

Thanks much for any explanations,

--Adam



_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj 




From jerome at georezo.net  Thu Jan  6 00:23:04 2011
From: jerome at georezo.net (=?ISO-8859-1?Q?J=E9r=F4me_Cuinet?=)
Date: Thu, 6 Jan 2011 09:23:04 +0100
Subject: [Proj] Lat/long to utm easting error
In-Reply-To: <9637973DFB2E4867A30A66F8DC5306B9@NoelHmPC>
References: <3B249FC1-7798-495F-BB92-0E239F51A760@alum.mit.edu>
	<9637973DFB2E4867A30A66F8DC5306B9@NoelHmPC>
Message-ID: <AANLkTi=aY-bj7NwhusKYLWmMg5tuYj0sQxp3iYLdJaeG@mail.gmail.com>

Or you use a direct cylindric projection such as Cylindric Lambert, Behrman,
Peters... :)


Jérôme

2011/1/6 Noel Zinn (cc) <ndzinn at comcast.net>

> Adam,
>
> What you're expecting works only on the Central Meridian (CM) and not
> elsewhere due to convergence of the meridians.
>
> Google "convergence of the meridians" for a fuller explanation.
>
> Noel
>
> Noel Zinn, Principal, Hydrometronics LLC
> +1-832-539-1472 (office), +1-281-221-0051 (cell)
> noel.zinn at hydrometronics.com (email)
> http://www.hydrometronics.com (website)
>
> -----Original Message-----
> From: Adam Dershowitz
> Sent: Wednesday, January 05, 2011 6:18 PM
> To: proj at lists.maptools.org
> Subject: [Proj] Lat/long to utm easting error
>
> I have run into something that I don't understand, and I hope someone can
> help explain.
> I was doing some conversions of points, and ran into a problem.  I finally
> narrowed it down to the following:
>
> If I take two points, at the identical longitude, with a small change in
> latitude, and convert them each to UTM, I would expect nearly identical
> easting values.  But I am not seeing that.  For example:
>
> cs2cs +proj=latlong +datum=WGS84 +to +proj=utm +datum=WGS84 +zone=17 -r
>
> 42d37'3.77503"N 83d59'35"W
> 254524.57 4722707.58 0.00
> 42d37'0.02186"N 83d59'35"W
> 254520.47 4722591.80 0.00
>
>
> Above there is  ~4 m easting difference, with just a small (~120m) change
> in
> latitude.  Since these points are exactly North-south of each other,
> shouldn't they have the same easting, at least when they are this close to
> each other in latitude?
>
> Thanks much for any explanations,
>
> --Adam
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110106/dd3b6b93/attachment.html>

From j.l.h.hartmann at uva.nl  Fri Jan  7 06:49:52 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri, 07 Jan 2011 15:49:52 +0100
Subject: [Proj] [mapserver-users] Projection problems
In-Reply-To: <AANLkTi=PcskVh3svFYM4WWNvJFQR+-mCQd5NZqAhrp7k@mail.gmail.com>
References: <1294395961732-5898717.post@n2.nabble.com>
	<AANLkTi=PcskVh3svFYM4WWNvJFQR+-mCQd5NZqAhrp7k@mail.gmail.com>
Message-ID: <4D272810.6070901@uva.nl>

(Sorry for crossposting to the PROJ list, but this has been a problem 
for years going)

Yes, the transformation to WGS84 for the Dutch coordinate system 
("Amersfoort", "Rijksdriehoeksnet) is still *not* part of the latest 
PROJ4 release (4.7.0, downloaded yesterday). You need to change the 
formula for epsg:28992 in PROJ's epsg table and in PosGIS's 
"spatial_ref_sys" table, like Milo describes, else your maps will be 
about 100 meters off. You can read an extensive discussion about this, 
including an Excel spreadsheet to compute the towgs84 parameters from 
the official EPSG database at:

http://trac.osgeo.org/geotiff/ticket/22

PROJ gets its parameters from EPSG, but somehow it still doesn't manage 
to include the WGS84 transform.

Vriendelijke groeten,

Jan



On 01/07/11 15:22, Milo van der Linden wrote:
> Funny,
>
> Everytime I read "projection problems" on this list I think: Hey, this 
> might be someone from the Netherlands.
>
>
> You mean you would really like to have your bedrijventerreinen like this?
>
> http://www.locatiemonitor.nl/LocationDetails2.aspx?lid=1437
>
> (please wait for the bedrijventerreinen wms to appear)
>
> I created the wms service for locatiemonitor and as I can see, we are 
> "fishing in the same vijver"
>
> Please read my blog post at 
> http://blog.dogodigi.net/2010/08/19/dutch-coordinate-system-ellipsoid-correction/
>
> And write a small thank you comment if it helped you solve your issue
>
> ;-)
>
> Kind regards,
>
> Milo van der Linden
>
> 2011/1/7 basvmrs <bas at cipix.nl <mailto:bas at cipix.nl>>
>
>
>     Hi,
>
>     I've created a map server in which I try to output data that was
>     entered
>     using Google Maps V2 (drawing polygons). I used openlayers to
>     display the
>     results over a Bing layer.
>
>     There seems to be a problem in the projection, which is best
>     described using
>     an image and a link:
>
>     http://bir.cipixtest.nl/resources/gis/demo.html Demo
>     http://osgeo-org.1803224.n2.nabble.com/file/n5898717/forum.png
>
>     Notice how the areas seem to 'shift' when zooming in.
>
>     My mapfile looks like this:
>
>
>     #
>     # Start of map file
>     #
>     MAP
>            NAME BIR
>            STATUS ON
>            SIZE 600 600
>            EXTENT 4.4 51.85 4.6 51.95
>            UNITS METERS
>
>            IMAGETYPE PNG
>
>            PROJECTION
>                    "init=epsg:900913"
>            END
>
>            TRANSPARENT ON
>
>            LAYER
>                    NAME bedrijventerreinen
>                    TYPE POLYGON
>                    STATUS DEFAULT
>                    CONNECTIONTYPE OGR
>                    CONNECTION
>     "MySQL:bir,host=XXXXX,user=XXXXX,password=XXXXXXX,port=3306"
>                    DATA "SELECT * from gis_object"
>                    DUMP TRUE
>                    CLASS
>                            NAME 'Bedrijventerreinen'
>                            STYLE
>                                    OUTLINECOLOR 0 0 0
>                                    COLOR 200 200 200
>                            END
>                    END
>                    TEMPLATE "object.html"
>
>                    METADATA
>                            gml_include_items "all"
>                            WMS_TITLE "Bedrijventerreinen"
>                            WMS_ABSTRACT "Bedrijventerreinen in de
>     Regio Rotterdam; de gebieden zijn
>     een benadering en er kunnen geen rechten aan worden ontleend."
>                            WMS_SRS "EPSG:28992 EPSG:900913 EPSG:4326"
>                    END
>            END
>
>     END # Map File
>
>     I don't have a clue why this is happening. I hope that someone can
>     explain
>     to me why this is happening and how to fix it.
>
>     Kind regards,
>     Bas
>     --
>     View this message in context:
>     http://osgeo-org.1803224.n2.nabble.com/Projection-problems-tp5898717p5898717.html
>     Sent from the Mapserver - User mailing list archive at Nabble.com.
>     _______________________________________________
>     mapserver-users mailing list
>     mapserver-users at lists.osgeo.org
>     <mailto:mapserver-users at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/mapserver-users
>
>
>
> _______________________________________________
> mapserver-users mailing list
> mapserver-users at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/mapserver-users
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110107/22b2f680/attachment.html>

From Mikael.Rittri at carmenta.com  Mon Jan 10 02:15:48 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 10 Jan 2011 10:15:48 +0000
Subject: [Proj] [mapserver-users] Projection problems
In-Reply-To: <4D272810.6070901@uva.nl>
References: <1294395961732-5898717.post@n2.nabble.com>
	<AANLkTi=PcskVh3svFYM4WWNvJFQR+-mCQd5NZqAhrp7k@mail.gmail.com>
	<4D272810.6070901@uva.nl>
Message-ID: <E4AB3DD44D22854B819908379DE4AD492F846736@SETHNWS023.carmenta.se>

Hello Jan,

Frank has recently done great improvements in the generation 
of a preferred datum shift for each datum in the EPSG database.
This is a more cumbersome task than one might think (trust me!). 

His improvements are visible in the trunk for libgeotiff, 

   http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv

but are not included in the latest released version, 
libgeotiff 1.3.0 from May 2010.

I expect the improvements will eventually make it to 
Proj, I would guess version 4.8.0, but I don't know 
when that is planned.  Nor do I know if there is 
preliminary Proj/epsg file available that has been 
generated from the libgeotiff trunk. 

Regards,

Mikael Rittri
Carmenta AB
Sweden
www.carmenta.com

________________________________

From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Jan Hartmann
Sent: Friday, January 07, 2011 3:50 PM
To: Milo van der Linden
Cc: proj at lists.maptools.org; mapserver-users at lists.osgeo.org; basvmrs
Subject: Re: [Proj] [mapserver-users] Projection problems

[-- text deleted, see http://lists.maptools.org/pipermail/proj/2011-January/005504.html --]


From horacio.samaniego at gmail.com  Mon Jan 10 19:22:54 2011
From: horacio.samaniego at gmail.com (Horacio Samaniego)
Date: Tue, 11 Jan 2011 00:22:54 -0300
Subject: [Proj] MODIS' sinusoidal to latlon
Message-ID: <1294716174.2133.11.camel@burque>

I am trying to figure out how I can transform some MODIS data. 
Unfortunately, I have performed some operations on a set of tiles
(merge, sum, etc...) using GDAL and now have two Gtif files with yearly
EVI for South America. However, I'm not successfully putting my result
in a common projection with the rest of my dataset. MRT is only good for
hdf files. 

Any suggestion on how to automate the process of moving from MODIS
sinusoidal to old plain lat/lon (wgs84)?

An little enhancement on this topic in the forums will help future
users... and any help will be greatly appreciate.

thanks in advance!

Horacio

**here's the original MODIS projection definition:

PROJCS["unnamed",                                                                 
    GEOGCS["Unknown datum based upon the custom spheroid",
DATUM["Not_specified_based_on_custom_spheroid",                           
            SPHEROID["Custom
spheroid",6371007.181,0]],                           
PRIMEM["Greenwich",0],                                                    
UNIT["degree",0.0174532925199433]],
PROJECTION["Sinusoidal"],                                                     
PARAMETER["longitude_of_center",0],                                           
PARAMETER["false_easting",0],                                                 
PARAMETER["false_northing",0],                                                
UNIT["metre",1,                                                               
        AUTHORITY["EPSG","9001"]]]  




-- 
Horacio Samaniego <horacio.samaniego at gmail.com>




From neteler at osgeo.org  Mon Jan 10 23:54:43 2011
From: neteler at osgeo.org (Markus Neteler)
Date: Tue, 11 Jan 2011 08:54:43 +0100
Subject: [Proj] MODIS' sinusoidal to latlon
In-Reply-To: <1294716174.2133.11.camel@burque>
References: <1294716174.2133.11.camel@burque>
Message-ID: <AANLkTikQGrD8ON5MrjrAxrY__eQOwZEFh645yz7+Y2n=@mail.gmail.com>

Horacio,

on our Web site, at
 http://gis.cri.fmach.it/modis-sinusoidal-gis-files/
you can find a ZIP file with a Sinusoidal/LL SHAPE file
and a README how the reprojection was done.

Hopefully helpful for you,

Markus

On Tue, Jan 11, 2011 at 4:22 AM, Horacio Samaniego
<horacio.samaniego at gmail.com> wrote:
> I am trying to figure out how I can transform some MODIS data.
> Unfortunately, I have performed some operations on a set of tiles
> (merge, sum, etc...) using GDAL and now have two Gtif files with yearly
> EVI for South America. However, I'm not successfully putting my result
> in a common projection with the rest of my dataset. MRT is only good for
> hdf files.
>
> Any suggestion on how to automate the process of moving from MODIS
> sinusoidal to old plain lat/lon (wgs84)?
>
> An little enhancement on this topic in the forums will help future
> users... and any help will be greatly appreciate.
>
> thanks in advance!
>
> Horacio
>
> **here's the original MODIS projection definition:
>
> PROJCS["unnamed",
>    GEOGCS["Unknown datum based upon the custom spheroid",
> DATUM["Not_specified_based_on_custom_spheroid",
>            SPHEROID["Custom
> spheroid",6371007.181,0]],
> PRIMEM["Greenwich",0],
> UNIT["degree",0.0174532925199433]],
> PROJECTION["Sinusoidal"],
> PARAMETER["longitude_of_center",0],
> PARAMETER["false_easting",0],
> PARAMETER["false_northing",0],
> UNIT["metre",1,
>        AUTHORITY["EPSG","9001"]]]
>
>
>
>
> --
> Horacio Samaniego <horacio.samaniego at gmail.com>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


From woklist at kyngchaos.com  Tue Jan 11 08:44:43 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue, 11 Jan 2011 10:44:43 -0600
Subject: [Proj] hammer parameters?
Message-ID: <4591D0A4-9D25-473B-AAD2-49376DDF9B4E@kyngchaos.com>

I need to replicate a Breisemeister projection.  So far I've figured out that it's a special case of the Hammer.

GRASS tell me that the Hammer needs a lat/long center, and also an "M" and "W" factor which default to 1 and 0.5 respectively.  What are these?  All I know is that the Breisemeister has an ellipse (shape) ratio of 1.75:1 (and the center is 45N 10E).  Info on the Hammer says the ratio is 2:1, which matches GRASS' default M/W of 1/0.5.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that the past isn't a fiction designed to account for the discrepancy between my immediate physical sensations and my state of mind?"

- The Ruler of the Universe




From jflaming at uw.edu  Tue Jan 11 11:47:34 2011
From: jflaming at uw.edu (R. Jay Flaming)
Date: Tue, 11 Jan 2011 11:47:34 -0800
Subject: [Proj] cs2cs returns error then 0s with datum conversion
Message-ID: <AANLkTikbX-Q9yB1qbrgXMXW0RfDudWVutmv-=E0CxkDs@mail.gmail.com>

I'm trying to de-arcgis a script I have written in python for
processing some database coordinates by using proj to replace the ESRI
geoprocessor.  I have installed proj4 and I call it from subprocess
popen.
Proj itself works fine, but cs2cs is not working for me, either in
python or directly from the command line.  No matter what I enter, if
I use a nad27 to nad83 conversion or vice versa, the first pair of
coordinates I enter return asterisks, and all further requests yield
0s.
Windows 7, 64 bit workstation, with Proj installed to the default
directory (c:\proj).  I've set the path.
I'm sure I'm missing something simple... can anyone help?



~~~~~~~~~~~~~~~~~~~~~~~
R. Jay Flaming
Digital Archaeology Research Laboratory, University of Washington
jay.flaming at gmail.com
~~~~~~~~~~~~~~~~~~~~~~~


From EMiller at dfg.ca.gov  Tue Jan 11 14:10:04 2011
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Tue, 11 Jan 2011 14:10:04 -0800
Subject: [Proj] cs2cs returns error then 0s with datum conversion
In-Reply-To: <AANLkTikbX-Q9yB1qbrgXMXW0RfDudWVutmv-=E0CxkDs@mail.gmail.com>
References: <AANLkTikbX-Q9yB1qbrgXMXW0RfDudWVutmv-=E0CxkDs@mail.gmail.com>
Message-ID: <4D2C64BC.95FD.00E4.0@dfg.ca.gov>

I'm going to guess that your binary NAD files (conus, etc.) do not match your architecture.  If your Proj.4 binaries are 64-bit, you need 64-bit NAD files.  Likewise, if you have 32-bit binaries, you need 32-bit NAD files.  You can confirm that is the problem by using cs2cs with +towgs84 parameters instead of +nadgrids.

The NAD *.lla files are converted to platform specific binary data structures during the build process (via nad2bin.exe).  Maybe someday an enterprising soul will convert cs2cs to use National Geodetic Survey's current correction file format directly...   
-- 

Eric G. Miller
Staff Programmer
CA Dept. of Fish & Game


>>> On 1/11/2011 at 11:47 AM, "R. Jay Flaming" <jflaming at uw.edu> wrote:
> I'm trying to de-arcgis a script I have written in python for
> processing some database coordinates by using proj to replace the ESRI
> geoprocessor.  I have installed proj4 and I call it from subprocess
> popen.
> Proj itself works fine, but cs2cs is not working for me, either in
> python or directly from the command line.  No matter what I enter, if
> I use a nad27 to nad83 conversion or vice versa, the first pair of
> coordinates I enter return asterisks, and all further requests yield
> 0s.
> Windows 7, 64 bit workstation, with Proj installed to the default
> directory (c:\proj).  I've set the path.
> I'm sure I'm missing something simple... can anyone help?
> 
> 
> 
> ~~~~~~~~~~~~~~~~~~~~~~~
> R. Jay Flaming
> Digital Archaeology Research Laboratory, University of Washington
> jay.flaming at gmail.com 
> ~~~~~~~~~~~~~~~~~~~~~~~
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org 
> http://lists.maptools.org/mailman/listinfo/proj




From Mikael.Rittri at carmenta.com  Wed Jan 12 01:31:48 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Wed, 12 Jan 2011 09:31:48 +0000
Subject: [Proj] cs2cs returns error then 0s with datum conversion
In-Reply-To: <4D2C64BC.95FD.00E4.0@dfg.ca.gov>
References: <AANLkTikbX-Q9yB1qbrgXMXW0RfDudWVutmv-=E0CxkDs@mail.gmail.com>
	<4D2C64BC.95FD.00E4.0@dfg.ca.gov>
Message-ID: <E4AB3DD44D22854B819908379DE4AD492F84686B@SETHNWS023.carmenta.se>

Eric wrote:

> Maybe someday an enterprising soul will convert cs2cs to use National Geodetic Survey's 
> current correction file format directly...  

Or maybe Frank would be willing to convert these files (conus, alaska, etc.) 
to the NTv2 format (and publish them), since he has already developed tools 
for that conversion, and since cs2cs already understands that format.

(See http://lists.maptools.org/pipermail/proj/2010-August/005330.html )

Of course, this would help only if the NTv2 format is unaffected by
the 32-bit/64-bit issue.  I don't know for certain if that's true.

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Eric Miller
Sent: Tuesday, January 11, 2011 11:10 PM
To: proj at lists.maptools.org
Subject: Re: [Proj] cs2cs returns error then 0s with datum conversion

I'm going to guess that your binary NAD files (conus, etc.) do not match your architecture.  If your Proj.4 binaries are 64-bit, you need 64-bit NAD files.  Likewise, if you have 32-bit binaries, you need 32-bit NAD files.  You can confirm that is the problem by using cs2cs with +towgs84 parameters instead of +nadgrids.

The NAD *.lla files are converted to platform specific binary data structures during the build process (via nad2bin.exe).  Maybe someday an enterprising soul will convert cs2cs to use National Geodetic Survey's current correction file format directly...   
-- 

Eric G. Miller
Staff Programmer
CA Dept. of Fish & Game


>>> On 1/11/2011 at 11:47 AM, "R. Jay Flaming" <jflaming at uw.edu> wrote:
> I'm trying to de-arcgis a script I have written in python for 
> processing some database coordinates by using proj to replace the ESRI 
> geoprocessor.  I have installed proj4 and I call it from subprocess 
> popen.
> Proj itself works fine, but cs2cs is not working for me, either in 
> python or directly from the command line.  No matter what I enter, if 
> I use a nad27 to nad83 conversion or vice versa, the first pair of 
> coordinates I enter return asterisks, and all further requests yield 
> 0s.
> Windows 7, 64 bit workstation, with Proj installed to the default 
> directory (c:\proj).  I've set the path.
> I'm sure I'm missing something simple... can anyone help?
> 
> 
> 
> ~~~~~~~~~~~~~~~~~~~~~~~
> R. Jay Flaming
> Digital Archaeology Research Laboratory, University of Washington 
> jay.flaming at gmail.com ~~~~~~~~~~~~~~~~~~~~~~~ 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From Mikael.Rittri at carmenta.com  Wed Jan 12 07:40:18 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Wed, 12 Jan 2011 15:40:18 +0000
Subject: [Proj] [mapserver-users] Projection problems
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD492F846736@SETHNWS023.carmenta.se>
References: <1294395961732-5898717.post@n2.nabble.com>
	<AANLkTi=PcskVh3svFYM4WWNvJFQR+-mCQd5NZqAhrp7k@mail.gmail.com>
	<4D272810.6070901@uva.nl>
	<E4AB3DD44D22854B819908379DE4AD492F846736@SETHNWS023.carmenta.se>
Message-ID: <E4AB3DD44D22854B819908379DE4AD492F8468AD@SETHNWS023.carmenta.se>

PS:

The trunk version of proj/nad/epsg, at 

http://svn.osgeo.org/metacrs/proj/trunk/proj/nad/epsg

does seem to be based on the libgeotiff trunk. The entry for 
epsg:28992 (Amersfoort / RD New) has a correct +towgs84 parameter.

I am not sure if you can use Proj version 4.7.0 and just
replace its proj/nad/epsg file by the trunk version, 
since the trunk version might contain some new projection
types.  But it could be worth a try.

Regards,
Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com


-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Mikael Rittri
Sent: Monday, January 10, 2011 11:16 AM
To: PROJ.4 and general Projections Discussions
Cc: Milo van der Linden
Subject: Re: [Proj] [mapserver-users] Projection problems

Hello Jan,

Frank has recently done great improvements in the generation of a preferred datum shift for each datum in the EPSG database.
This is a more cumbersome task than one might think (trust me!). 

His improvements are visible in the trunk for libgeotiff, 

   http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv

but are not included in the latest released version, libgeotiff 1.3.0 from May 2010.

I expect the improvements will eventually make it to Proj, I would guess version 4.8.0, but I don't know when that is planned.  Nor do I know if there is preliminary Proj/epsg file available that has been generated from the libgeotiff trunk. 

Regards,

Mikael Rittri
Carmenta AB
Sweden
www.carmenta.com

________________________________

From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Jan Hartmann
Sent: Friday, January 07, 2011 3:50 PM
To: Milo van der Linden
Cc: proj at lists.maptools.org; mapserver-users at lists.osgeo.org; basvmrs
Subject: Re: [Proj] [mapserver-users] Projection problems

[-- text deleted, see http://lists.maptools.org/pipermail/proj/2011-January/005504.html --] _______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From warmerdam at pobox.com  Wed Jan 12 11:25:11 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 12 Jan 2011 14:25:11 -0500
Subject: [Proj] cs2cs returns error then 0s with datum conversion
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD492F84686B@SETHNWS023.carmenta.se>
References: <AANLkTikbX-Q9yB1qbrgXMXW0RfDudWVutmv-=E0CxkDs@mail.gmail.com>
	<4D2C64BC.95FD.00E4.0@dfg.ca.gov>
	<E4AB3DD44D22854B819908379DE4AD492F84686B@SETHNWS023.carmenta.se>
Message-ID: <4D2E0017.90605@pobox.com>

On 11-01-12 04:31 AM, Mikael Rittri wrote:
> Eric wrote:
>
>> Maybe someday an enterprising soul will convert cs2cs to use National Geodetic Survey's
>> current correction file format directly...
>
> Or maybe Frank would be willing to convert these files (conus, alaska, etc.)
> to the NTv2 format (and publish them), since he has already developed tools
> for that conversion, and since cs2cs already understands that format.
>
> (See http://lists.maptools.org/pipermail/proj/2010-August/005330.html )
>
> Of course, this would help only if the NTv2 format is unaffected by
> the 32-bit/64-bit issue.  I don't know for certain if that's true.

Folks,

The NTv2 format is not affected by structure packing, byte order or word
size and is a good candidate for a cross platform replacement for the
binary format into which the conus and related files are currently translated.
Unfortunately my work in GDAL with NTv2 format does not include support for
the .lla format yet, but I would love to replace it.  I think I have seen
the same data in .los/.las format, so perhaps I could just find and translate
those.  It would be wonderful to cleanup this aspect of proj.4 datum handling.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ovv at hetnet.nl  Wed Jan 12 11:28:32 2011
From: ovv at hetnet.nl (OvV_HN)
Date: Wed, 12 Jan 2011 20:28:32 +0100
Subject: [Proj] hammer parameters?
Message-ID: <D1EDDED1391640EE80CF9B80D4B5B4BF@PCHP>

In reply to:

From: William Kyngesburye <woklist <at> kyngchaos.com>
Subject: hammer parameters?
Date: 2011-01-11 16:44:43 GMT

Reply:

Information about the Briesemeister projection:

An album of map projections
John P. Snyder, Philip M. Voxland
Professional Paper 1453
Reprint 1989
pag 232: Modified azimuthal projections: Briesemeister
http://pubs.er.usgs.gov/publication/pp1453

libproj4: A Comprehensive Library of Cartographic Projection Functions 
(Preliminary Draft)
Gerald I. Evenden
November 22, 2008
pag 132: Table 9.2: Oblique projections using +ob_tran
http://home.comcast.net/~gevenden56/proj/index.html


Oscar van Vlijmen




From cjmce at lsu.edu  Wed Jan 12 12:04:42 2011
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 12 Jan 2011 14:04:42 -0600
Subject: [Proj] cs2cs returns error then 0s with datum conversion
References: <AANLkTikbX-Q9yB1qbrgXMXW0RfDudWVutmv-=E0CxkDs@mail.gmail.com><4D2C64BC.95FD.00E4.0@dfg.ca.gov><E4AB3DD44D22854B819908379DE4AD492F84686B@SETHNWS023.carmenta.se>
	<4D2E0017.90605@pobox.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7026A6716@email002.lsu.edu>

NADCON is a U.S. Federal standard.  Converting its data files to NTv2 format would be useless for applications within the U.S. as it would no longer be compliant with the Federal Register mandate.  
 
The converse would likely apply to some other countries, including Canada and the Union of South Africa.  Other countries may have not (yet) enacted legislation that codifies the specific methodology, but I have never seen a study of such a topic.
 
When working with National Coordinate Systems and Reference Frames, one can get into trouble quickly through ignorance of local laws.
 
Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3223A
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group


________________________________

From: proj-bounces at lists.maptools.org on behalf of Frank Warmerdam
Sent: Wed 12-Jan-11 13:25
To: Mikael Rittri
Cc: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] cs2cs returns error then 0s with datum conversion



On 11-01-12 04:31 AM, Mikael Rittri wrote:
> Eric wrote:
>
>> Maybe someday an enterprising soul will convert cs2cs to use National Geodetic Survey's
>> current correction file format directly...
>
> Or maybe Frank would be willing to convert these files (conus, alaska, etc.)
> to the NTv2 format (and publish them), since he has already developed tools
> for that conversion, and since cs2cs already understands that format.
>
> (See http://lists.maptools.org/pipermail/proj/2010-August/005330.html )
>
> Of course, this would help only if the NTv2 format is unaffected by
> the 32-bit/64-bit issue.  I don't know for certain if that's true.

Folks,

The NTv2 format is not affected by structure packing, byte order or word
size and is a good candidate for a cross platform replacement for the
binary format into which the conus and related files are currently translated.
Unfortunately my work in GDAL with NTv2 format does not include support for
the .lla format yet, but I would love to replace it.  I think I have seen
the same data in .los/.las format, so perhaps I could just find and translate
those.  It would be wonderful to cleanup this aspect of proj.4 datum handling.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110112/c2036687/attachment.html>

From woklist at kyngchaos.com  Wed Jan 12 12:59:24 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed, 12 Jan 2011 14:59:24 -0600
Subject: [Proj] hammer parameters?
In-Reply-To: <D1EDDED1391640EE80CF9B80D4B5B4BF@PCHP>
References: <D1EDDED1391640EE80CF9B80D4B5B4BF@PCHP>
Message-ID: <1A1EE0B6-7608-4F57-B4C6-A32FE35024B8@kyngchaos.com>

On Jan 12, 2011, at 1:28 PM, OvV_HN wrote:

> In reply to:
> 
> From: William Kyngesburye <woklist <at> kyngchaos.com>
> Subject: hammer parameters?
> Date: 2011-01-11 16:44:43 GMT
> 
> Reply:
> 
> libproj4: A Comprehensive Library of Cartographic Projection Functions 
> (Preliminary Draft)
> Gerald I. Evenden
> November 22, 2008
> pag 132: Table 9.2: Oblique projections using +ob_tran
> http://home.comcast.net/~gevenden56/proj/index.html

OK, the ob_tran thing seems to work in proj4, though it doesn't really explain the M and W parameters, and I don't see what that M=0.9354143 value has to do with the 1.75 ratio of the Breisemeister, or why the hammer projection is not used directly.

But, GDAL rejects ob_tran, so I can't really do anything useful with it.  I can't use GRASS to project a raster because hammer appears to not have an inverse (I saw a patch posted to the list last December, but code didn't appear to correctly match the formulas on the mentioned page), and I don't know if GRASS supports ob_tran either.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that the past isn't a fiction designed to account for the discrepancy between my immediate physical sensations and my state of mind?"

- The Ruler of the Universe




From hamish_b at yahoo.com  Wed Jan 12 15:01:10 2011
From: hamish_b at yahoo.com (Hamish)
Date: Wed, 12 Jan 2011 15:01:10 -0800 (PST)
Subject: [Proj] hammer parameters?
In-Reply-To: <1A1EE0B6-7608-4F57-B4C6-A32FE35024B8@kyngchaos.com>
Message-ID: <523392.9967.qm@web110001.mail.gq1.yahoo.com>

William wrote:
> But, GDAL rejects ob_tran, so I can't really do anything
> useful with it.  I can't use GRASS to project a raster
> because hammer appears to not have an inverse (I saw a patch
> posted to the list last December, but code didn't appear to
> correctly match the formulas on the mentioned page),

to get around that limitation of r.proj in GRASS, either 

- r.to.vect (skip topology), then v.proj

- or..
the no topology thing can be problematic, so what I did recently
for reprojecting the ETOPO1 dataset to Winkel Tripel (see [1])
was output to a text file with r.out.xyz, then in the destination
location import that with cs2cs | r.in.xyz.

[1] http://adhoc.osgeo.osuosl.org/grass/alternate_projections/earthquakes_wintri.png

> and I don't know if GRASS supports ob_tran either.

AFAIK grass supports anything proj4 does, plus some more.
If GDAL rejects something the chances are that GRASS might as
well, but perhaps not. proj4 support is the much more important
test.


fwiw, the line in $GISBASE/etc/proj-params.table reads:

HAMMER:Hammer & Eckert-Greifendorff:LAT0=ask,0.0;LON0=ask,20.0;MSFACT=ask,1.0;WFACT=ask,0.5

(value after the "ask" is the default answer)


Hamish



      


From jflaming at uw.edu  Wed Jan 12 15:06:27 2011
From: jflaming at uw.edu (R. Jay Flaming)
Date: Wed, 12 Jan 2011 15:06:27 -0800
Subject: [Proj] Proj Digest, Vol 80, Issue 5
In-Reply-To: <mailman.3.1294851601.18994.proj@lists.maptools.org>
References: <mailman.3.1294851601.18994.proj@lists.maptools.org>
Message-ID: <AANLkTi=G+CtAhwMuMLx4m3TKnGDnKDps-xyf2jjeG_zs@mail.gmail.com>

I think maybe I'm missing something more basic.  I tried running it in
a 32 bit machine, but I'm still getting fails on the first entry.  For
example, if I load this data into a file (JunkDataUTM):
553749.32 5255410.43
552739.32 5255400.43
552749.52 5255410.63

And then run:
c:\proj\bin>C:/proj/bin/cs2cs.exe +proj=utm +zone=10 +datum=NAD27 +to
+proj=latlong +datum=NAD83 c:/proj/bin/JunkDataUTM

This is the output:

*       * 0.000
47d27'14.454"E  42d12'42.477"N 0.000
47d27'14.784"E  42d12'42.7"N 0.000

No matter what I put in my first entry (whether from a file or by
stdin), I get the
 *       * 0.000 result.


Other weirdness... if I try the examples from the man page
(http://trac.osgeo.org/proj/wiki/man_cs2cs)
and enter this command:
c:\proj\bin>cs2cs +proj=latlong +datum=NAD83 +to +proj=utm +zone=10
+datum=NAD27 -r

and then first try:
45d15'33.1" 111.5W

this is the result:
*       * 0.000

if I repeat the same numbers on a second try:
45d15'33.1" 111.5W

the second time I get this result:
53329298.26     0.00 0.000


Jay




On Wed, Jan 12, 2011 at 9:00 AM,  <proj-request at lists.maptools.org> wrote:
> I'm going to guess that your binary NAD files (conus, etc.) do not match your architecture.  If your Proj.4 binaries are 64-bit, you need 64-bit NAD files.  Likewise, if you have 32-bit binaries, you need 32-bit NAD files.  You can confirm that is the problem by using cs2cs with +towgs84 parameters instead of +nadgrids.
>


From EMiller at dfg.ca.gov  Wed Jan 12 15:20:26 2011
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Wed, 12 Jan 2011 15:20:26 -0800
Subject: [Proj] cs2cs returns error then 0s with datum conversion
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7026A6716@email002.lsu.edu>
References: <AANLkTikbX-Q9yB1qbrgXMXW0RfDudWVutmv-=E0CxkDs@mail.gmail.com><4D2C64BC.95FD.00E4.0@dfg.ca.gov><E4AB3DD44D22854B819908379DE4AD492F84686B@SETHNWS023.carmenta.se>
	<4D2E0017.90605@pobox.com>
	<B597ADFC46B67741B18EA6AA13613FF7026A6716@email002.lsu.edu>
Message-ID: <4D2DC6BA.95FD.00E4.0@dfg.ca.gov>

Well, the first question is whether cs2cs would even be considered NADCON.  I would guess not unless NGS has a process for certifying implementations and cs2cs was certified.

Still, if cs2cs (or really, the underlying grid handling) were to support the las/los file format directly, then at least it's be a trivial matter to drop new files into an installation.  No need to mess with transforming the files.  I guess Frank already did that work for GDAL (http://svn.osgeo.org/gdal/trunk/gdal/frmts/raw/loslasdataset.cpp) but it can't just be copied to PROJ.4.

>>> On 1/12/2011 at 12:04 PM, Clifford J Mugnier <cjmce at lsu.edu> wrote:
> NADCON is a U.S. Federal standard.  Converting its data files to NTv2 format 
> would be useless for applications within the U.S. as it would no longer be 
> compliant with the Federal Register mandate.  
>  
> The converse would likely apply to some other countries, including Canada 
> and the Union of South Africa.  Other countries may have not (yet) enacted 
> legislation that codifies the specific methodology, but I have never seen a 
> study of such a topic.
>  
> When working with National Coordinate Systems and Reference Frames, one can 
> get into trouble quickly through ignorance of local laws.
>  
> Clifford J. Mugnier, C.P., C.M.S.
> Chief of Geodesy,
> Center for GeoInformatics
> Department of Civil Engineering 
> Patrick F. Taylor Hall 3223A
> LOUISIANA STATE UNIVERSITY 
> Baton Rouge, LA  70803
> Voice and Facsimile:  (225) 578-8536 [Academic] 
> Voice and Facsimile:  (225) 578-4578 [Research] 
> Cell: (225) 328-8975 [Academic & Research]
> Honorary Life Member of the 
> Louisiana Society of Professional Surveyors 
> Fellow Emeritus of the ASPRS 
> Member of the Americas Petroleum Survey Group
> 
> 
> ________________________________
> 
> From: proj-bounces at lists.maptools.org on behalf of Frank Warmerdam
> Sent: Wed 12-Jan-11 13:25
> To: Mikael Rittri
> Cc: PROJ.4 and general Projections Discussions
> Subject: Re: [Proj] cs2cs returns error then 0s with datum conversion
> 
> 
> 
> On 11-01-12 04:31 AM, Mikael Rittri wrote:
>> Eric wrote:
>>
>>> Maybe someday an enterprising soul will convert cs2cs to use National 
> Geodetic Survey's
>>> current correction file format directly...
>>
>> Or maybe Frank would be willing to convert these files (conus, alaska, etc.)
>> to the NTv2 format (and publish them), since he has already developed tools
>> for that conversion, and since cs2cs already understands that format.
>>
>> (See http://lists.maptools.org/pipermail/proj/2010-August/005330.html )
>>
>> Of course, this would help only if the NTv2 format is unaffected by
>> the 32-bit/64-bit issue.  I don't know for certain if that's true.
> 
> Folks,
> 
> The NTv2 format is not affected by structure packing, byte order or word
> size and is a good candidate for a cross platform replacement for the
> binary format into which the conus and related files are currently 
> translated.
> Unfortunately my work in GDAL with NTv2 format does not include support for
> the .lla format yet, but I would love to replace it.  I think I have seen
> the same data in .los/.las format, so perhaps I could just find and 
> translate
> those.  It would be wonderful to cleanup this aspect of proj.4 datum 
> handling.
> 
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com 
> light and sound - activate the windows | http://pobox.com/~warmerdam 
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org 
> http://lists.maptools.org/mailman/listinfo/proj




From warmerdam at pobox.com  Wed Jan 12 15:33:48 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 12 Jan 2011 18:33:48 -0500
Subject: [Proj] hammer parameters?
In-Reply-To: <523392.9967.qm@web110001.mail.gq1.yahoo.com>
References: <523392.9967.qm@web110001.mail.gq1.yahoo.com>
Message-ID: <4D2E3A5C.9060106@pobox.com>

On 11-01-12 06:01 PM, Hamish wrote:
> William wrote:
>> But, GDAL rejects ob_tran, so I can't really do anything
>> useful with it.  I can't use GRASS to project a raster
>> because hammer appears to not have an inverse (I saw a patch
>> posted to the list last December, but code didn't appear to
>> correctly match the formulas on the mentioned page),
>
> to get around that limitation of r.proj in GRASS, either
>
> - r.to.vect (skip topology), then v.proj
>
> - or..
> the no topology thing can be problematic, so what I did recently
> for reprojecting the ETOPO1 dataset to Winkel Tripel (see [1])
> was output to a text file with r.out.xyz, then in the destination
> location import that with cs2cs | r.in.xyz.
>
> [1] http://adhoc.osgeo.osuosl.org/grass/alternate_projections/earthquakes_wintri.png
>
>> and I don't know if GRASS supports ob_tran either.
>
> AFAIK grass supports anything proj4 does, plus some more.
> If GDAL rejects something the chances are that GRASS might as
> well, but perhaps not. proj4 support is the much more important
> test.
>
>
> fwiw, the line in $GISBASE/etc/proj-params.table reads:
>
> HAMMER:Hammer&  Eckert-Greifendorff:LAT0=ask,0.0;LON0=ask,20.0;MSFACT=ask,1.0;WFACT=ask,0.5
>
> (value after the "ask" is the default answer)

Folks,

For what it is worth, it is possible to embed a literal PROJ.4 string
in GDAL/OGR WKT in which case that will be used as the translation to
PROJ.4 format.

eg.
PROJCS["UTM Zone 11, Northern Hemisphere",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             TOWGS84[0,0,0,0,0,0,0],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.0174532925199433,
             AUTHORITY["EPSG","9108"]],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",-117],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["Meter",1],
     EXTENSION["PROJ4","+proj=utm +zone=11 +datum=WGS84 +wktext"]]

When passing proj.4 strings to GDAL utilities which take
PROJ.4 as input you can include the +wktext option to force
literal inclusion of the PROJ.4 string.  For projections
completely not supported by GDAL you will need to create
WKT with some sort of fake projection (perhaps just use
the above and update the EXTENSION[] portion.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From EMiller at dfg.ca.gov  Wed Jan 12 15:51:59 2011
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Wed, 12 Jan 2011 15:51:59 -0800
Subject: [Proj] Proj Digest, Vol 80, Issue 5
In-Reply-To: <AANLkTi=G+CtAhwMuMLx4m3TKnGDnKDps-xyf2jjeG_zs@mail.gmail.com>
References: <mailman.3.1294851601.18994.proj@lists.maptools.org>
	<AANLkTi=G+CtAhwMuMLx4m3TKnGDnKDps-xyf2jjeG_zs@mail.gmail.com>
Message-ID: <4D2DCE1F.95FD.00E4.0@dfg.ca.gov>

Does it work correctly if you use the same input and output datum?  That is, just have cs2cs run through one or two projections without a datum shift.

For instance:

C:\proj\bin> cs2cs +proj=latlong +datum=NAD83 +to +proj=utm +zone=10 +datum=NAD83 -r
45d15'33.1 111.5W
1402197.69      5076490.88 0.00
^C

If that works, then I still suspect a problem with the grid files.  It could be something as silly as copying the files over FTP in ASCII mode...

>>> On 1/12/2011 at 3:06 PM, "R. Jay Flaming" <jflaming at uw.edu> wrote:
> I think maybe I'm missing something more basic.  I tried running it in
> a 32 bit machine, but I'm still getting fails on the first entry.  For
> example, if I load this data into a file (JunkDataUTM):
> 553749.32 5255410.43
> 552739.32 5255400.43
> 552749.52 5255410.63
> 
> And then run:
> c:\proj\bin>C:/proj/bin/cs2cs.exe +proj=utm +zone=10 +datum=NAD27 +to
> +proj=latlong +datum=NAD83 c:/proj/bin/JunkDataUTM
> 
> This is the output:
> 
> *       * 0.000
> 47d27'14.454"E  42d12'42.477"N 0.000
> 47d27'14.784"E  42d12'42.7"N 0.000
> 
> No matter what I put in my first entry (whether from a file or by
> stdin), I get the
>  *       * 0.000 result.
> 
> 
> Other weirdness... if I try the examples from the man page
> (http://trac.osgeo.org/proj/wiki/man_cs2cs)
> and enter this command:
> c:\proj\bin>cs2cs +proj=latlong +datum=NAD83 +to +proj=utm +zone=10
> +datum=NAD27 -r
> 
> and then first try:
> 45d15'33.1" 111.5W
> 
> this is the result:
> *       * 0.000
> 
> if I repeat the same numbers on a second try:
> 45d15'33.1" 111.5W
> 
> the second time I get this result:
> 53329298.26     0.00 0.000
> 
> 
> Jay
> 
> 
> 
> 
> On Wed, Jan 12, 2011 at 9:00 AM,  <proj-request at lists.maptools.org> wrote:
>> I'm going to guess that your binary NAD files (conus, etc.) do not match 
> your architecture.  If your Proj.4 binaries are 64-bit, you need 64-bit NAD 
> files.  Likewise, if you have 32-bit binaries, you need 32-bit NAD files.  You 
> can confirm that is the problem by using cs2cs with +towgs84 parameters 
> instead of +nadgrids.
>>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org 
> http://lists.maptools.org/mailman/listinfo/proj




From horacio.samaniego at gmail.com  Thu Jan 13 03:09:50 2011
From: horacio.samaniego at gmail.com (Horacio Samaniego)
Date: Thu, 13 Jan 2011 08:09:50 -0300
Subject: [Proj] MODIS' sinusoidal to latlon
In-Reply-To: <AANLkTikQGrD8ON5MrjrAxrY__eQOwZEFh645yz7+Y2n=@mail.gmail.com>
References: <1294716174.2133.11.camel@burque>
	<AANLkTikQGrD8ON5MrjrAxrY__eQOwZEFh645yz7+Y2n=@mail.gmail.com>
Message-ID: <AANLkTinh28WAQXf43zW6Co=NJdisehfzdO8F7Mftn0tr@mail.gmail.com>

Thank you all...

The URL Markus N sent shows that it is possible to convert LL to
Sinusoidal (better to say that parameters for the conversion are
successfully implemented in GRASS)

However the question on how to convert the MODIS file is not
explicitly answered. So, here is my experience with it!

Problem: I had a MODIS cover (for Southamerica) previously processed
using GDAL in GeoTiff format that needes to be reprojected to some UTM
(19S, as I will only be interested in the Chilean portion of the
continent)

Solution: Thanks to all the members who provided answers....

 the simplest answer to this simple problem was: just use the correct
-s_srs definition with gdalwarp!


gdalwarp -s_srs '+proj=sinu +R=6371007.181 +nadgrids=@null +wktext'
-t_srs EPSG:32719 -r cubic  ${INFILE} ${OUTFILE}


special thanks to Vincent Schut,


I hope this wil help others

H

On Tue, Jan 11, 2011 at 4:54 AM, Markus Neteler <neteler at osgeo.org> wrote:
> Horacio,
>
> on our Web site, at
>  http://gis.cri.fmach.it/modis-sinusoidal-gis-files/
> you can find a ZIP file with a Sinusoidal/LL SHAPE file
> and a README how the reprojection was done.
>
> Hopefully helpful for you,
>
> Markus
>
> On Tue, Jan 11, 2011 at 4:22 AM, Horacio Samaniego
> <horacio.samaniego at gmail.com> wrote:
>> I am trying to figure out how I can transform some MODIS data.
>> Unfortunately, I have performed some operations on a set of tiles
>> (merge, sum, etc...) using GDAL and now have two Gtif files with yearly
>> EVI for South America. However, I'm not successfully putting my result
>> in a common projection with the rest of my dataset. MRT is only good for
>> hdf files.
>>
>> Any suggestion on how to automate the process of moving from MODIS
>> sinusoidal to old plain lat/lon (wgs84)?
>>
>> An little enhancement on this topic in the forums will help future
>> users... and any help will be greatly appreciate.
>>
>> thanks in advance!
>>
>> Horacio
>>
>> **here's the original MODIS projection definition:
>>
>> PROJCS["unnamed",
>>    GEOGCS["Unknown datum based upon the custom spheroid",
>> DATUM["Not_specified_based_on_custom_spheroid",
>>            SPHEROID["Custom
>> spheroid",6371007.181,0]],
>> PRIMEM["Greenwich",0],
>> UNIT["degree",0.0174532925199433]],
>> PROJECTION["Sinusoidal"],
>> PARAMETER["longitude_of_center",0],
>> PARAMETER["false_easting",0],
>> PARAMETER["false_northing",0],
>> UNIT["metre",1,
>>        AUTHORITY["EPSG","9001"]]]
>>
>>
>>
>>
>> --
>> Horacio Samaniego <horacio.samaniego at gmail.com>
>>
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



-- 
Instituto de Silvicultura
Universidad Austral de Chile
Isla Teja, Valdivia, Chile

+56 (63) 222480 [of.]
http://www.ecoinformatica.cl


From Mikael.Rittri at carmenta.com  Thu Jan 13 06:54:06 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Thu, 13 Jan 2011 14:54:06 +0000
Subject: [Proj] cs2cs returns error then 0s with datum conversion
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7026A6716@email002.lsu.edu>
References: <AANLkTikbX-Q9yB1qbrgXMXW0RfDudWVutmv-=E0CxkDs@mail.gmail.com><4D2C64BC.95FD.00E4.0@dfg.ca.gov><E4AB3DD44D22854B819908379DE4AD492F84686B@SETHNWS023.carmenta.se>
	<4D2E0017.90605@pobox.com>
	<B597ADFC46B67741B18EA6AA13613FF7026A6716@email002.lsu.edu>
Message-ID: <E4AB3DD44D22854B819908379DE4AD492F8469C4@SETHNWS023.carmenta.se>

Clifford,
you wrote:

> NADCON is a U.S. Federal standard.  Converting its data files to NTv2 format 
> would be useless for applications within the U.S. as it would no longer be 
> compliant with the Federal Register mandate.  
> [...]
> When working with National Coordinate Systems and Reference Frames, 
> one can get into trouble quickly through ignorance of local laws.

Right, I should have added "this suggestion is void where prohibited by law". 

Well, seriously, I would have agreed with you if we had discussed Great Britain
and its national grid shift file, for two reasons:

1) Great Britain has redefined its OSGB 1936 datum, so that
   their grid shift file is now exactly right by definition. 
   http://www.ordnancesurvey.co.uk/oswebsite/gps/docs/Geomatics_world.pdf

2) The British grid shift file is rectangular in a projected plane, 
   while NTv2 is rectangular in Lat/Long, so you cannot get millimeter
   agreement, unless you used a much denser NTv2 grid, perhaps. 
   (I have tested Paul Kelly's NTv2 version for Great Britain, 
    see http://lists.maptools.org/pipermail/proj/2006-November/002658.html , 
    and the errors were usually a couple of centimeters, if I remember right.)

But it's different for the U.S., isn't it?  The NADCON does not redefine 
the meaning of NAD27, so any software-based datum shift will be slightly 
wrong anyway.  And NTv2 and NADCON are both rectangular in Lat/Long
and use the same bilinear interpolation technique, so I expect
that you can get sub-millimeter agreement between their results.
(Maybe Frank knows whether this is true.) 

As for NADCON being a Federal Standard, I found the following notice:
 
http://www.ngs.noaa.gov/PUBS_LIB/FedRegister/FRdoc90-18809.pdf

but it says

    "It is not the intent of the notice to declare when to 
     use a datum transformation or by what method, but only 
     to declare that when a mathematical transformation is
     appropriate, NADCON is recommended."

As I understand this, other mathematical transformations (or 
other software) are still legal, though not recommended. And 
if an NTv2 version would give sub-millimeter agreement with
NADCON, I would say that it would follow the spirit of the 
recommendation, anyway. 

Just my 20 öre,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

________________________________

From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Clifford J Mugnier
Sent: Wednesday, January 12, 2011 9:05 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] cs2cs returns error then 0s with datum conversion


NADCON is a U.S. Federal standard.  Converting its data files to NTv2 format would be useless for applications within the U.S. as it would no longer be compliant with the Federal Register mandate.  
 
The converse would likely apply to some other countries, including Canada and the Union of South Africa.  Other countries may have not (yet) enacted legislation that codifies the specific methodology, but I have never seen a study of such a topic.
 
When working with National Coordinate Systems and Reference Frames, one can get into trouble quickly through ignorance of local laws.
 
Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3223A
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group


________________________________

From: proj-bounces at lists.maptools.org on behalf of Frank Warmerdam
Sent: Wed 12-Jan-11 13:25
To: Mikael Rittri
Cc: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] cs2cs returns error then 0s with datum conversion



On 11-01-12 04:31 AM, Mikael Rittri wrote:
> Eric wrote:
>
>> Maybe someday an enterprising soul will convert cs2cs to use National Geodetic Survey's
>> current correction file format directly...
>
> Or maybe Frank would be willing to convert these files (conus, alaska, etc.)
> to the NTv2 format (and publish them), since he has already developed tools
> for that conversion, and since cs2cs already understands that format.
>
> (See http://lists.maptools.org/pipermail/proj/2010-August/005330.html )
>
> Of course, this would help only if the NTv2 format is unaffected by
> the 32-bit/64-bit issue.  I don't know for certain if that's true.

Folks,

The NTv2 format is not affected by structure packing, byte order or word
size and is a good candidate for a cross platform replacement for the
binary format into which the conus and related files are currently translated.
Unfortunately my work in GDAL with NTv2 format does not include support for
the .lla format yet, but I would love to replace it.  I think I have seen
the same data in .los/.las format, so perhaps I could just find and translate
those.  It would be wonderful to cleanup this aspect of proj.4 datum handling.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj




From charles.karney at sri.com  Thu Jan 13 07:27:31 2011
From: charles.karney at sri.com (Charles Karney)
Date: Thu, 13 Jan 2011 10:27:31 -0500
Subject: [Proj] Vincenty's unpublished report on antipodal geodesics
Message-ID: <19759.6627.646060.847939@puffin.sarnoff.com>

I've got hold of a copy of

    T. Vincenty,
    Geodetic inverse solution between antipodal points,
    unpublished report dated Aug. 28 1975.

In this report, Vincenty describes how to modify his solution for the
inverse geodesic problem (Survey Review 23(176), 88-93, 1975) to handle
nearly antipodal points.

I've added the report to the bibliography

    http://trac.osgeo.org/proj/wiki/GeodesicCalculations#TheHistory

and the report itself is available at

    http://geographiclib.sf.net/geodesic-papers/vincenty75b.pdf

Implementors of Vincenty's method should add

    cos(sigma) =  - sqrt(1 - sin(sigma)^2)

after his Eq. (10).

-- 
Charles Karney <charles.karney at sri.com>
SRI International, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662


From cjmce at lsu.edu  Thu Jan 13 08:47:57 2011
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Thu, 13 Jan 2011 10:47:57 -0600
Subject: [Proj] cs2cs returns error then 0s with datum conversion
References: <AANLkTikbX-Q9yB1qbrgXMXW0RfDudWVutmv-=E0CxkDs@mail.gmail.com><4D2C64BC.95FD.00E4.0@dfg.ca.gov><E4AB3DD44D22854B819908379DE4AD492F84686B@SETHNWS023.carmenta.se><4D2E0017.90605@pobox.com><B597ADFC46B67741B18EA6AA13613FF7026A6716@email002.lsu.edu>
	<E4AB3DD44D22854B819908379DE4AD492F8469C4@SETHNWS023.carmenta.se>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7026A6718@email002.lsu.edu>

Mikael,
 
It is mandated for datum transformations in the Gulf of Mexico by the Minerals Management Service, part of the Bureau of Land Management, Department of the Interior.  (See the Americas Petroleum Studies Group in Houston.)
 
Cliff
 
Louisiana State University


________________________________

From: proj-bounces at lists.maptools.org on behalf of Mikael Rittri
Sent: Thu 13-Jan-11 08:54
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] cs2cs returns error then 0s with datum conversion



Clifford,
you wrote:

> NADCON is a U.S. Federal standard.  Converting its data files to NTv2 format
> would be useless for applications within the U.S. as it would no longer be
> compliant with the Federal Register mandate. 
> [...]
> When working with National Coordinate Systems and Reference Frames,
> one can get into trouble quickly through ignorance of local laws.

Right, I should have added "this suggestion is void where prohibited by law".

Well, seriously, I would have agreed with you if we had discussed Great Britain
and its national grid shift file, for two reasons:

1) Great Britain has redefined its OSGB 1936 datum, so that
   their grid shift file is now exactly right by definition.
   http://www.ordnancesurvey.co.uk/oswebsite/gps/docs/Geomatics_world.pdf

2) The British grid shift file is rectangular in a projected plane,
   while NTv2 is rectangular in Lat/Long, so you cannot get millimeter
   agreement, unless you used a much denser NTv2 grid, perhaps.
   (I have tested Paul Kelly's NTv2 version for Great Britain,
    see http://lists.maptools.org/pipermail/proj/2006-November/002658.html ,
    and the errors were usually a couple of centimeters, if I remember right.)

But it's different for the U.S., isn't it?  The NADCON does not redefine
the meaning of NAD27, so any software-based datum shift will be slightly
wrong anyway.  And NTv2 and NADCON are both rectangular in Lat/Long
and use the same bilinear interpolation technique, so I expect
that you can get sub-millimeter agreement between their results.
(Maybe Frank knows whether this is true.)

As for NADCON being a Federal Standard, I found the following notice:

http://www.ngs.noaa.gov/PUBS_LIB/FedRegister/FRdoc90-18809.pdf

but it says

    "It is not the intent of the notice to declare when to
     use a datum transformation or by what method, but only
     to declare that when a mathematical transformation is
     appropriate, NADCON is recommended."

As I understand this, other mathematical transformations (or
other software) are still legal, though not recommended. And
if an NTv2 version would give sub-millimeter agreement with
NADCON, I would say that it would follow the spirit of the
recommendation, anyway.

Just my 20 öre,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com <http://www.carmenta.com/> 

________________________________

From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Clifford J Mugnier
Sent: Wednesday, January 12, 2011 9:05 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] cs2cs returns error then 0s with datum conversion


NADCON is a U.S. Federal standard.  Converting its data files to NTv2 format would be useless for applications within the U.S. as it would no longer be compliant with the Federal Register mandate. 

The converse would likely apply to some other countries, including Canada and the Union of South Africa.  Other countries may have not (yet) enacted legislation that codifies the specific methodology, but I have never seen a study of such a topic.

When working with National Coordinate Systems and Reference Frames, one can get into trouble quickly through ignorance of local laws.

Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering
Patrick F. Taylor Hall 3223A
LOUISIANA STATE UNIVERSITY
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic]
Voice and Facsimile:  (225) 578-4578 [Research]
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the
Louisiana Society of Professional Surveyors
Fellow Emeritus of the ASPRS
Member of the Americas Petroleum Survey Group


________________________________

From: proj-bounces at lists.maptools.org on behalf of Frank Warmerdam
Sent: Wed 12-Jan-11 13:25
To: Mikael Rittri
Cc: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] cs2cs returns error then 0s with datum conversion



On 11-01-12 04:31 AM, Mikael Rittri wrote:
> Eric wrote:
>
>> Maybe someday an enterprising soul will convert cs2cs to use National Geodetic Survey's
>> current correction file format directly...
>
> Or maybe Frank would be willing to convert these files (conus, alaska, etc.)
> to the NTv2 format (and publish them), since he has already developed tools
> for that conversion, and since cs2cs already understands that format.
>
> (See http://lists.maptools.org/pipermail/proj/2010-August/005330.html )
>
> Of course, this would help only if the NTv2 format is unaffected by
> the 32-bit/64-bit issue.  I don't know for certain if that's true.

Folks,

The NTv2 format is not affected by structure packing, byte order or word
size and is a good candidate for a cross platform replacement for the
binary format into which the conus and related files are currently translated.
Unfortunately my work in GDAL with NTv2 format does not include support for
the .lla format yet, but I would love to replace it.  I think I have seen
the same data in .los/.las format, so perhaps I could just find and translate
those.  It would be wonderful to cleanup this aspect of proj.4 datum handling.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110113/1e79b1dd/attachment.html>

From woklist at kyngchaos.com  Thu Jan 13 09:01:12 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu, 13 Jan 2011 11:01:12 -0600
Subject: [Proj] hammer parameters?
In-Reply-To: <4D2E3A5C.9060106@pobox.com>
References: <523392.9967.qm@web110001.mail.gq1.yahoo.com>
	<4D2E3A5C.9060106@pobox.com>
Message-ID: <0F13D514-0910-41D7-80DE-C8825A864B5E@kyngchaos.com>

On Jan 12, 2011, at 5:33 PM, Frank Warmerdam wrote:

> Folks,
> 
> For what it is worth, it is possible to embed a literal PROJ.4 string
> in GDAL/OGR WKT in which case that will be used as the translation to
> PROJ.4 format.
> 
> eg.
> PROJCS["UTM Zone 11, Northern Hemisphere",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             TOWGS84[0,0,0,0,0,0,0],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0,
>             AUTHORITY["EPSG","8901"]],
>         UNIT["degree",0.0174532925199433,
>             AUTHORITY["EPSG","9108"]],
>         AUTHORITY["EPSG","4326"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",-117],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",0],
>     UNIT["Meter",1],
>     EXTENSION["PROJ4","+proj=utm +zone=11 +datum=WGS84 +wktext"]]
> 
> When passing proj.4 strings to GDAL utilities which take
> PROJ.4 as input you can include the +wktext option to force
> literal inclusion of the PROJ.4 string.  For projections
> completely not supported by GDAL you will need to create
> WKT with some sort of fake projection (perhaps just use
> the above and update the EXTENSION[] portion.
> 
I tried this a few months ago for another unsupported projection in GDAL with no luck.  Doesn't work here either.  Quote from Evan Rouault:

"+wktext cannot help when OSR doesn't recognize the projection. It only helps 
to keep the extra options that OSR doesn't handle by itself."

So, if GDAL doesn't support ob_tran, +wktext won't help.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy




From jrepetto at free.fr  Mon Jan 17 05:07:27 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon, 17 Jan 2011 14:07:27 +0100
Subject: [Proj] gdaltransform and cs2cs don't agree ...
Message-ID: <4D343F0F.6040700@free.fr>

Hello,
I have found a case where gdaltransform and cs2cs don't give the same 
results :

$ gdaltransform -s_srs +init=IGNF:MILLER -t_srs EPSG:4326
-20037504 10018752
179.798600354466 72.943850852954 12400.9953186931

$ cs2cs  -f "%.11f" +init=IGNF:MILLER +to +init=epsg:4326
-20037504 10018752
-179.99996098806	72.78284247593 0.00000000000


Can somebody confirm the bug ? If it is not a bug, is there an explanation ?

I am using PROJ-4.7.0 and GDAL-1.8.0.

Regards,
Jean-Claude


From jagoncal at gmail.com  Mon Jan 17 05:36:22 2011
From: jagoncal at gmail.com (=?ISO-8859-1?Q?Jose_Gon=E7alves?=)
Date: Mon, 17 Jan 2011 13:36:22 +0000
Subject: [Proj] gdaltransform and cs2cs don't agree ...
In-Reply-To: <4D343F0F.6040700@free.fr>
References: <4D343F0F.6040700@free.fr>
Message-ID: <AANLkTim_vjbepHCcPTaLXdXeUP_0GNrSsFeAt2tHne3D@mail.gmail.com>

If you add the +wktext control to the strings the result becomes the same:

C:\>gdaltransform -s_srs "+init=IGNF:MILLER +wktext" -t_srs "EPSG:4326
+wktext"
-20037504 10018752
-179.999960988061 72.7828424759274 0


Regards

José A. Gonçalves



2011/1/17 Jean-Claude Repetto <jrepetto at free.fr>

> Hello,
> I have found a case where gdaltransform and cs2cs don't give the same
> results :
>
> $ gdaltransform -s_srs +init=IGNF:MILLER -t_srs EPSG:4326
> -20037504 10018752
> 179.798600354466 72.943850852954 12400.9953186931
>
> $ cs2cs  -f "%.11f" +init=IGNF:MILLER +to +init=epsg:4326
> -20037504 10018752
> -179.99996098806        72.78284247593 0.00000000000
>
>
> Can somebody confirm the bug ? If it is not a bug, is there an explanation
> ?
>
> I am using PROJ-4.7.0 and GDAL-1.8.0.
>
> Regards,
> Jean-Claude
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110117/cba9fb09/attachment.html>

From theconor at yahoo.com  Mon Jan 17 11:56:45 2011
From: theconor at yahoo.com (Conor O&#39;Donoghue)
Date: Mon, 17 Jan 2011 11:56:45 -0800 (PST)
Subject: [Proj] (no subject)
Message-ID: <162492.25229.qm@web31807.mail.mud.yahoo.com>

http://www.kusa-y.or.kr/m28sx.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110117/cba47a4d/attachment.html>

From mikhail_tche at sbcglobal.net  Mon Jan 17 21:24:57 2011
From: mikhail_tche at sbcglobal.net (Mikhail Tchernychev)
Date: Mon, 17 Jan 2011 21:24:57 -0800
Subject: [Proj] Geotrans, PCTrans and cs2cs - different angle signs?
In-Reply-To: <AANLkTim_vjbepHCcPTaLXdXeUP_0GNrSsFeAt2tHne3D@mail.gmail.com>
References: <4D343F0F.6040700@free.fr>
	<AANLkTim_vjbepHCcPTaLXdXeUP_0GNrSsFeAt2tHne3D@mail.gmail.com>
Message-ID: <4D352429.3030905@sbcglobal.net>

Hello List,

It came to my attention that 7-parameters values should be different for 
cs2cs and
programs like Geotrans  and PCTrans. It seems all 3 angles should have 
different
sign to match cs2cs results. Shifts stay the same, as well as scaling 
(well, for
geotrans it is not in ppm).  I wonder if it is something well known or 
am I missing
something?

Thank you,

Mikhail


From j.l.h.hartmann at uva.nl  Mon Jan 17 23:59:39 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue, 18 Jan 2011 08:59:39 +0100
Subject: [Proj] Geotrans, PCTrans and cs2cs - different angle signs?
In-Reply-To: <4D352429.3030905@sbcglobal.net>
References: <4D343F0F.6040700@free.fr>	<AANLkTim_vjbepHCcPTaLXdXeUP_0GNrSsFeAt2tHne3D@mail.gmail.com>
	<4D352429.3030905@sbcglobal.net>
Message-ID: <4D35486B.2060304@uva.nl>

Yes, the angles can be given either in "right-hand" (American) or 
"left-hand" (European) convention. See the thread on:

http://lists.maptools.org/pipermail/proj/2010-April/005198.html

Mind that angles can be given either in (micro)degrees (PROJ) or radians 
(EPSG). You can find a discussion about the conversion from EPSG numbers 
to PROJ, with both sign and radians conversion in:

http://trac.osgeo.org/geotiff/ticket/22

with an attached spreadsheet to perform the computation for the Dutch 
coordinate system (EPSG:28992)

Jan

On 01/18/11 06:24, Mikhail Tchernychev wrote:
> Hello List,
>
> It came to my attention that 7-parameters values should be different for
> cs2cs and
> programs like Geotrans  and PCTrans. It seems all 3 angles should have
> different
> sign to match cs2cs results. Shifts stay the same, as well as scaling
> (well, for
> geotrans it is not in ppm).  I wonder if it is something well known or
> am I missing
> something?
>
> Thank you,
>
> Mikhail
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110118/0a6df9d0/attachment.html>

From jrepetto at free.fr  Tue Jan 18 00:36:15 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue, 18 Jan 2011 09:36:15 +0100
Subject: [Proj] gdaltransform and cs2cs don't agree ...
In-Reply-To: <4D35486B.2060304@uva.nl>
References: <4D343F0F.6040700@free.fr>	<AANLkTim_vjbepHCcPTaLXdXeUP_0GNrSsFeAt2tHne3D@mail.gmail.com>	<4D352429.3030905@sbcglobal.net>
	<4D35486B.2060304@uva.nl>
Message-ID: <4D3550FF.3040701@free.fr>

Le 17/01/2011 14:36, Jose Gonçalves a écrit :
 > If you add the +wktext control to the strings the result becomes
 > the same:
 >
 > C:\>gdaltransform -s_srs "+init=IGNF:MILLER +wktext" -t_srs
 > "EPSG:4326 +wktext"
 > -20037504 10018752
 > -179.999960988061 72.7828424759274 0
 >
 > José A. Gonçalves
 >

Yes, you are right ! It seems that gdaltransform adds the +R_A parameter 
which is not present in the original definition of the projection.

Regards,
Jean-Claude


From Mikael.Rittri at carmenta.com  Tue Jan 18 01:44:41 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Tue, 18 Jan 2011 09:44:41 +0000
Subject: [Proj] Geotrans, PCTrans and cs2cs - different angle signs?
In-Reply-To: <4D35486B.2060304@uva.nl>
References: <4D343F0F.6040700@free.fr>
	<AANLkTim_vjbepHCcPTaLXdXeUP_0GNrSsFeAt2tHne3D@mail.gmail.com>
	<4D352429.3030905@sbcglobal.net> <4D35486B.2060304@uva.nl>
Message-ID: <E4AB3DD44D22854B819908379DE4AD492F846D2C@SETHNWS023.carmenta.se>

Jan wrote:
> Yes, the angles can be given either in "right-hand" (American) 
> or "left-hand" (European) convention.

The two rotation sign conventions have formal names, which are 
useful to know since they are used by EPSG.

* The "American" sign convention is formally known as 
  "Coordinate Frame Rotation", and it is actually used
  by many European countries too (although a minority).  

* The "European" sign convention is formally known as 
  "Position Vector Transformation", and it is the convention 
  used by cs2cs.  It is also the NATO standard, and (I think)
  the Eurogeographics standard.  

EPSG hasn't standardized on one sign convention. For each 7-parameter
datum shift, they use the sign convention of the original information
source, and then they document which one it was. When you look up a 
7-parameter datum shift at www.epsg-registry.org, you must remember
to scroll down, since the sign convention is given below the parameters. 

Jan also wrote:
> Mind that angles can be given either in (micro)degrees (PROJ) or radians (EPSG).  

Not quite. In cs2cs (PROJ), the rotation angles must be given in 
arc seconds (1 arc second = 1/3600 degree.)  

As for EPSG, it is true that the formulas in Guidance Note 7.2 assumes 
that the rotation angles are in radians. However, for a 7-parameter
datum shift published in the EPSG database, the angle unit isn't
standardized.  Instead, it is the angle unit used by the information 
source.  
   This means that the rotation angles in EPSG are usually in arc seconds,
but there are some datum shifts for the Netherlands and for Jan Mayen 
where they are in microradians, and a datum shift for Canada where they
are in radians. 

Regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com
 
________________________________

From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Jan Hartmann
Sent: Tuesday, January 18, 2011 9:00 AM
To: misha at mail.geometrics.com; PROJ.4 and general Projections Discussions
Cc: Mikhail Tchernychev
Subject: Re: [Proj] Geotrans, PCTrans and cs2cs - different angle signs?


Yes, the angles can be given either in "right-hand" (American) or "left-hand" (European) convention. See the thread on:

http://lists.maptools.org/pipermail/proj/2010-April/005198.html

Mind that angles can be given either in (micro)degrees (PROJ) or radians (EPSG). You can find a discussion about the conversion from EPSG numbers to PROJ, with both sign and radians conversion in:

http://trac.osgeo.org/geotiff/ticket/22

with an attached spreadsheet to perform the computation for the Dutch coordinate system (EPSG:28992)

Jan

On 01/18/11 06:24, Mikhail Tchernychev wrote: 

	Hello List,
	
	It came to my attention that 7-parameters values should be different for 
	cs2cs and
	programs like Geotrans  and PCTrans. It seems all 3 angles should have 
	different
	sign to match cs2cs results. Shifts stay the same, as well as scaling 
	(well, for
	geotrans it is not in ppm).  I wonder if it is something well known or 
	am I missing
	something?
	
	Thank you,
	
	Mikhail
	_______________________________________________
	Proj mailing list
	Proj at lists.maptools.org
	http://lists.maptools.org/mailman/listinfo/proj
	



From misha at mail.geometrics.com  Tue Jan 18 09:55:15 2011
From: misha at mail.geometrics.com (Mikhail Tchernychev)
Date: Tue, 18 Jan 2011 09:55:15 -0800
Subject: [Proj] Geotrans, PCTrans and cs2cs - different angle signs?
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD492F846D2C@SETHNWS023.carmenta.se>
References: <4D343F0F.6040700@free.fr>	<AANLkTim_vjbepHCcPTaLXdXeUP_0GNrSsFeAt2tHne3D@mail.gmail.com>	<4D352429.3030905@sbcglobal.net>
	<4D35486B.2060304@uva.nl>
	<E4AB3DD44D22854B819908379DE4AD492F846D2C@SETHNWS023.carmenta.se>
Message-ID: <4D35D403.6050406@mail.geometrics.com>

Thank you all for clarification on this issue. I did not know about it
and I learn it hard way - I had to transform data and cs2cs worked, but 
geotrans
no... My original idea was to use geotrans but I used cs2cs, which as I 
see now
is way better from other perspectives as well.  Apparently geotrans 
assumes American
convention, because it is DoD program.

Thanks again,

Cheers

Mikhail

On 01/18/2011 01:44 AM, Mikael Rittri wrote:
> Jan wrote:
>> Yes, the angles can be given either in "right-hand" (American)
>> or "left-hand" (European) convention.
> The two rotation sign conventions have formal names, which are
> useful to know since they are used by EPSG.
>
> * The "American" sign convention is formally known as
>    "Coordinate Frame Rotation", and it is actually used
>    by many European countries too (although a minority).
>
> * The "European" sign convention is formally known as
>    "Position Vector Transformation", and it is the convention
>    used by cs2cs.  It is also the NATO standard, and (I think)
>    the Eurogeographics standard.
>
> EPSG hasn't standardized on one sign convention. For each 7-parameter
> datum shift, they use the sign convention of the original information
> source, and then they document which one it was. When you look up a
> 7-parameter datum shift at www.epsg-registry.org, you must remember
> to scroll down, since the sign convention is given below the parameters.
>
> Jan also wrote:
>> Mind that angles can be given either in (micro)degrees (PROJ) or radians (EPSG).
> Not quite. In cs2cs (PROJ), the rotation angles must be given in
> arc seconds (1 arc second = 1/3600 degree.)
>
> As for EPSG, it is true that the formulas in Guidance Note 7.2 assumes
> that the rotation angles are in radians. However, for a 7-parameter
> datum shift published in the EPSG database, the angle unit isn't
> standardized.  Instead, it is the angle unit used by the information
> source.
>     This means that the rotation angles in EPSG are usually in arc seconds,
> but there are some datum shifts for the Netherlands and for Jan Mayen
> where they are in microradians, and a datum shift for Canada where they
> are in radians.
>
> Regards,
>
> Mikael Rittri
> Carmenta
> Sweden
> http://www.carmenta.com
>
> ________________________________
>
> From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Jan Hartmann
> Sent: Tuesday, January 18, 2011 9:00 AM
> To: misha at mail.geometrics.com; PROJ.4 and general Projections Discussions
> Cc: Mikhail Tchernychev
> Subject: Re: [Proj] Geotrans, PCTrans and cs2cs - different angle signs?
>
>
> Yes, the angles can be given either in "right-hand" (American) or "left-hand" (European) convention. See the thread on:
>
> http://lists.maptools.org/pipermail/proj/2010-April/005198.html
>
> Mind that angles can be given either in (micro)degrees (PROJ) or radians (EPSG). You can find a discussion about the conversion from EPSG numbers to PROJ, with both sign and radians conversion in:
>
> http://trac.osgeo.org/geotiff/ticket/22
>
> with an attached spreadsheet to perform the computation for the Dutch coordinate system (EPSG:28992)
>
> Jan
>
> On 01/18/11 06:24, Mikhail Tchernychev wrote:
>
> 	Hello List,
> 	
> 	It came to my attention that 7-parameters values should be different for
> 	cs2cs and
> 	programs like Geotrans  and PCTrans. It seems all 3 angles should have
> 	different
> 	sign to match cs2cs results. Shifts stay the same, as well as scaling
> 	(well, for
> 	geotrans it is not in ppm).  I wonder if it is something well known or
> 	am I missing
> 	something?
> 	
> 	Thank you,
> 	
> 	Mikhail
> 	_______________________________________________
> 	Proj mailing list
> 	Proj at lists.maptools.org
> 	http://lists.maptools.org/mailman/listinfo/proj
> 	
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From martin.raspaud at smhi.se  Wed Jan 19 02:41:48 2011
From: martin.raspaud at smhi.se (Raspaud Martin)
Date: Wed, 19 Jan 2011 11:41:48 +0100
Subject: [Proj] Mollweide projection: coordinate wrapping ?
Message-ID: <783F32138ED65D4A9CF016980481B6BF03198F76@CORRE.ad.smhi.se>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi all,

I just noticed that coordinates are wrapped when using proj to compute
lon/lats from projection coordinates for the mollweide projection (I
have not checked with other projections though):

[a001673 at nrlx052 ~]$ proj +proj=moll +lon_0=0 +ellps=WGS84
180 0
18040095.70	0.00
180 45
14538644.71	5340244.91
180 90
0.00	9020047.85

[a001673 at nrlx052 ~]$ invproj +proj=moll +lon_0=0 +ellps=WGS84
15000000 5340244.91
174d17'16.995"W	45dN


when running invproj here, the x y value is outside the "main globe"
picture. The mathematical formula allows for this, but I was wondering
if there was a way to return * * instead when we go out from the "main
globe" ?

Thanks,
Martin
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.14 (GNU/Linux)
Comment: Using GnuPG with Red Hat - http://enigmail.mozdev.org/

iQEcBAEBAgAGBQJNNr/sAAoJEBdvyODiyJI4SMMH/17zwVwl0/TmYELErC5wr75z
7IaqyePyxYzpEKqjicQZYQ2mliws1GxsOYCuNYdwUPEmuHuQTQxtNVzR8baEW1ih
Nt4GrYldqsyR3/ll+IVC3oEUeKhMegGj7BfwYDEZKNmAuuw1458jUGOJtrW9IvCx
X0BE2nyk860uOA/LfXjdU53khJrHiuLunJg3OESFOFNhbs0p3893beL1/0wUYDWF
bIXJN/opgroN53V+4b8LKB7LyT8Fbl92hafDuApmFiS/qvx7fFmTj/BTG0QpLI1R
I5xyoy4feBdYzKCh2ADGJb/qda+W6bOKN0cD9CS1whTvFKQjQOEe61z23V3tmnw=
=36RB
-----END PGP SIGNATURE-----
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110119/57fa901d/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: martin_raspaud.vcf
Type: text/x-vcard
Size: 260 bytes
Desc: martin_raspaud.vcf
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110119/57fa901d/attachment.vcf>

From woklist at kyngchaos.com  Wed Jan 19 11:47:39 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed, 19 Jan 2011 13:47:39 -0600
Subject: [Proj] hammer parameters?
In-Reply-To: <0F13D514-0910-41D7-80DE-C8825A864B5E@kyngchaos.com>
References: <523392.9967.qm@web110001.mail.gq1.yahoo.com>
	<4D2E3A5C.9060106@pobox.com>
	<0F13D514-0910-41D7-80DE-C8825A864B5E@kyngchaos.com>
Message-ID: <B0D9B098-FED0-4581-A97B-E9950CA37D08@kyngchaos.com>

So, can anyone tell me what the M and W parameters mean, or at least what values to use to get the Breisemeister (without using ob_tran)?

On Jan 13, 2011, at 11:01 AM, William Kyngesburye wrote:

> On Jan 12, 2011, at 5:33 PM, Frank Warmerdam wrote:
> 
>> Folks,
>> 
>> For what it is worth, it is possible to embed a literal PROJ.4 string
>> in GDAL/OGR WKT in which case that will be used as the translation to
>> PROJ.4 format.
>> 
>> eg.
>> PROJCS["UTM Zone 11, Northern Hemisphere",
>>    GEOGCS["WGS 84",
>>        DATUM["WGS_1984",
>>            SPHEROID["WGS 84",6378137,298.257223563,
>>                AUTHORITY["EPSG","7030"]],
>>            TOWGS84[0,0,0,0,0,0,0],
>>            AUTHORITY["EPSG","6326"]],
>>        PRIMEM["Greenwich",0,
>>            AUTHORITY["EPSG","8901"]],
>>        UNIT["degree",0.0174532925199433,
>>            AUTHORITY["EPSG","9108"]],
>>        AUTHORITY["EPSG","4326"]],
>>    PROJECTION["Transverse_Mercator"],
>>    PARAMETER["latitude_of_origin",0],
>>    PARAMETER["central_meridian",-117],
>>    PARAMETER["scale_factor",0.9996],
>>    PARAMETER["false_easting",500000],
>>    PARAMETER["false_northing",0],
>>    UNIT["Meter",1],
>>    EXTENSION["PROJ4","+proj=utm +zone=11 +datum=WGS84 +wktext"]]
>> 
>> When passing proj.4 strings to GDAL utilities which take
>> PROJ.4 as input you can include the +wktext option to force
>> literal inclusion of the PROJ.4 string.  For projections
>> completely not supported by GDAL you will need to create
>> WKT with some sort of fake projection (perhaps just use
>> the above and update the EXTENSION[] portion.
>> 
> I tried this a few months ago for another unsupported projection in GDAL with no luck.  Doesn't work here either.  Quote from Evan Rouault:
> 
> "+wktext cannot help when OSR doesn't recognize the projection. It only helps 
> to keep the extra options that OSR doesn't handle by itself."
> 
> So, if GDAL doesn't support ob_tran, +wktext won't help.
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> First Pogril: Why is life like sticking your head in a bucket filled with hyena offal?
> Second Pogril: I don't know.  Why IS life like sticking your head in a bucket filled with hyena offal?
> First Pogril: I don't know either.  Wretched, isn't it?
> 
> -HitchHiker's Guide to the Galaxy
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

All generalizations are dangerous, even this one.




From strebe at aol.com  Wed Jan 19 12:03:09 2011
From: strebe at aol.com (strebe at aol.com)
Date: Wed, 19 Jan 2011 15:03:09 -0500
Subject: [Proj] hammer parameters?
In-Reply-To: <B0D9B098-FED0-4581-A97B-E9950CA37D08@kyngchaos.com>
References: <523392.9967.qm@web110001.mail.gq1.yahoo.com><4D2E3A5C.9060106@pobox.com><0F13D514-0910-41D7-80DE-C8825A864B5E@kyngchaos.com>
	<B0D9B098-FED0-4581-A97B-E9950CA37D08@kyngchaos.com>
Message-ID: <8CD862B07229AE3-E08-13806@webmail-d029.sysops.aol.com>

I have been assuming that someone who knows something about proj would speak up. I don’t know anything about proj. However, Snyder’s formulation of Hammer includes a W parameter which controls the amount of bending in the parallels. The standard Hammar uses W = 1/2. Eckert-Greiffendorf uses W=1/4.

Perhaps M is the horizontal compression/vertical exaggeration.

To achieve Briesemeister under these assumptions, you would set W = 1/2, M = 0.93541 (or perhaps its reciprocal), and the projection center to 45°N. So, again, though I know nothing about proj, I assume you will need “ob_tran”, which I infer to mean oblique transformation or somesuch.

 

 — daan Strebe
http://www.mapthematics.com

 

 

-----Original Message-----
From: William Kyngesburye <woklist at kyngchaos.com>
To: PROJ.4 and general Projections Discussions <proj at lists.maptools.org>
Sent: Wed, Jan 19, 2011 11:47 am
Subject: Re: [Proj] hammer parameters?


So, can anyone tell me what the M and W parameters mean, or at least what values 

to use to get the Breisemeister (without using ob_tran)?



On Jan 13, 2011, at 11:01 AM, William Kyngesburye wrote:



> On Jan 12, 2011, at 5:33 PM, Frank Warmerdam wrote:

> 

>> Folks,

>> 

>> For what it is worth, it is possible to embed a literal PROJ.4 string

>> in GDAL/OGR WKT in which case that will be used as the translation to

>> PROJ.4 format.

>> 

>> eg.

>> PROJCS["UTM Zone 11, Northern Hemisphere",

>>    GEOGCS["WGS 84",

>>        DATUM["WGS_1984",

>>            SPHEROID["WGS 84",6378137,298.257223563,

>>                AUTHORITY["EPSG","7030"]],

>>            TOWGS84[0,0,0,0,0,0,0],

>>            AUTHORITY["EPSG","6326"]],

>>        PRIMEM["Greenwich",0,

>>            AUTHORITY["EPSG","8901"]],

>>        UNIT["degree",0.0174532925199433,

>>            AUTHORITY["EPSG","9108"]],

>>        AUTHORITY["EPSG","4326"]],

>>    PROJECTION["Transverse_Mercator"],

>>    PARAMETER["latitude_of_origin",0],

>>    PARAMETER["central_meridian",-117],

>>    PARAMETER["scale_factor",0.9996],

>>    PARAMETER["false_easting",500000],

>>    PARAMETER["false_northing",0],

>>    UNIT["Meter",1],

>>    EXTENSION["PROJ4","+proj=utm +zone=11 +datum=WGS84 +wktext"]]

>> 

>> When passing proj.4 strings to GDAL utilities which take

>> PROJ.4 as input you can include the +wktext option to force

>> literal inclusion of the PROJ.4 string.  For projections

>> completely not supported by GDAL you will need to create

>> WKT with some sort of fake projection (perhaps just use

>> the above and update the EXTENSION[] portion.

>> 

> I tried this a few months ago for another unsupported projection in GDAL with 

no luck.  Doesn't work here either.  Quote from Evan Rouault:

> 

> "+wktext cannot help when OSR doesn't recognize the projection. It only helps 

> to keep the extra options that OSR doesn't handle by itself."

> 

> So, if GDAL doesn't support ob_tran, +wktext won't help.

> 

> -----

> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>

> http://www.kyngchaos.com/

> 

> First Pogril: Why is life like sticking your head in a bucket filled with 

hyena offal?

> Second Pogril: I don't know.  Why IS life like sticking your head in a bucket 

filled with hyena offal?

> First Pogril: I don't know either.  Wretched, isn't it?

> 

> -HitchHiker's Guide to the Galaxy

> 

> 

> _______________________________________________

> Proj mailing list

> Proj at lists.maptools.org

> http://lists.maptools.org/mailman/listinfo/proj



-----

William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>

http://www.kyngchaos.com/



All generalizations are dangerous, even this one.





_______________________________________________

Proj mailing list

Proj at lists.maptools.org

http://lists.maptools.org/mailman/listinfo/proj


 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110119/4c8193f6/attachment.html>

From woklist at kyngchaos.com  Wed Jan 19 12:33:53 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed, 19 Jan 2011 14:33:53 -0600
Subject: [Proj] hammer parameters?
In-Reply-To: <8CD862B07229AE3-E08-13806@webmail-d029.sysops.aol.com>
References: <523392.9967.qm@web110001.mail.gq1.yahoo.com><4D2E3A5C.9060106@pobox.com><0F13D514-0910-41D7-80DE-C8825A864B5E@kyngchaos.com>
	<B0D9B098-FED0-4581-A97B-E9950CA37D08@kyngchaos.com>
	<8CD862B07229AE3-E08-13806@webmail-d029.sysops.aol.com>
Message-ID: <8F9A7254-AD6D-4037-9194-D275ED99C319@kyngchaos.com>

On Jan 19, 2011, at 2:03 PM, strebe at aol.com wrote:

> I have been assuming that someone who knows something about proj would speak up. I don’t know anything about proj. However, Snyder’s formulation of Hammer includes a W parameter which controls the amount of bending in the parallels. The standard Hammar uses W = 1/2. Eckert-Greiffendorf uses W=1/4.
> 
W=0.5 makes sense, as this is the default GRASS uses, so that parameter is probably the same as in Snyder's.

> Perhaps M is the horizontal compression/vertical exaggeration.
> 
> To achieve Briesemeister under these assumptions, you would set W = 1/2, M = 0.93541 (or perhaps its reciprocal), and the projection center to 45°N.

I tried that already.  Still no good with W=0.5 and M=0.57142857 or M=1.75.

> So, again, though I know nothing about proj, I assume you will need “ob_tran”, which I infer to mean oblique transformation or somesuch.
> 
> — daan Strebe
> http://www.mapthematics.com
> 
> 
> -----Original Message-----
> From: William Kyngesburye <woklist at kyngchaos.com>
> To: PROJ.4 and general Projections Discussions <proj at lists.maptools.org>
> Sent: Wed, Jan 19, 2011 11:47 am
> Subject: Re: [Proj] hammer parameters?
> 
> So, can anyone tell me what the M and W parameters mean, or at least what values 
> 
> 
> to use to get the Breisemeister (without using ob_tran)?
> 
> 
> 
> 
> 
> 
> 
> On Jan 13, 2011, at 11:01 AM, William Kyngesburye wrote:
> 
> 
> 
> 
> 
> 
> 
> > On Jan 12, 2011, at 5:33 PM, Frank Warmerdam wrote:
> 
> 
> 
> > 
> 
> 
> 
> >> Folks,
> 
> 
> 
> >> 
> 
> 
> 
> >> For what it is worth, it is possible to embed a literal PROJ.4 string
> 
> 
> 
> >> in GDAL/OGR WKT in which case that will be used as the translation to
> 
> 
> 
> >> PROJ.4 format.
> 
> 
> 
> >> 
> 
> 
> 
> >> eg.
> 
> 
> 
> >> PROJCS["UTM Zone 11, Northern Hemisphere",
> 
> 
> 
> >>    GEOGCS["WGS 84",
> 
> 
> 
> >>        DATUM["WGS_1984",
> 
> 
> 
> >>            SPHEROID["WGS 84",6378137,298.257223563,
> 
> 
> 
> >>                AUTHORITY["EPSG","7030"]],
> 
> 
> 
> >>            TOWGS84[0,0,0,0,0,0,0],
> 
> 
> 
> >>            AUTHORITY["EPSG","6326"]],
> 
> 
> 
> >>        PRIMEM["Greenwich",0,
> 
> 
> 
> >>            AUTHORITY["EPSG","8901"]],
> 
> 
> 
> >>        UNIT["degree",0.0174532925199433,
> 
> 
> 
> >>            AUTHORITY["EPSG","9108"]],
> 
> 
> 
> >>        AUTHORITY["EPSG","4326"]],
> 
> 
> 
> >>    PROJECTION["Transverse_Mercator"],
> 
> 
> 
> >>    PARAMETER["latitude_of_origin",0],
> 
> 
> 
> >>    PARAMETER["central_meridian",-117],
> 
> 
> 
> >>    PARAMETER["scale_factor",0.9996],
> 
> 
> 
> >>    PARAMETER["false_easting",500000],
> 
> 
> 
> >>    PARAMETER["false_northing",0],
> 
> 
> 
> >>    UNIT["Meter",1],
> 
> 
> 
> >>    EXTENSION["PROJ4","+proj=utm +zone=11 +datum=WGS84 +wktext"]]
> 
> 
> 
> >> 
> 
> 
> 
> >> When passing proj.4 strings to GDAL utilities which take
> 
> 
> 
> >> PROJ.4 as input you can include the +wktext option to force
> 
> 
> 
> >> literal inclusion of the PROJ.4 string.  For projections
> 
> 
> 
> >> completely not supported by GDAL you will need to create
> 
> 
> 
> >> WKT with some sort of fake projection (perhaps just use
> 
> 
> 
> >> the above and update the EXTENSION[] portion.
> 
> 
> 
> >> 
> 
> 
> 
> > I tried this a few months ago for another unsupported projection in GDAL with 
> 
> 
> 
> no luck.  Doesn't work here either.  Quote from Evan Rouault:
> 
> 
> 
> > 
> 
> 
> 
> > "+wktext cannot help when OSR doesn't recognize the projection. It only helps 
> 
> 
> 
> > to keep the extra options that OSR doesn't handle by itself."
> 
> 
> 
> > 
> 
> 
> 
> > So, if GDAL doesn't support ob_tran, +wktext won't help.
> 
> 
> 
> > 
> 
> 
> 
> > -----
> 
> 
> 
> > William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> 
> 
> 
> > 
> http://www.kyngchaos.com/
> 
> 
> > 
> 
> 
> 
> > First Pogril: Why is life like sticking your head in a bucket filled with 
> 
> 
> 
> hyena offal?
> 
> 
> 
> > Second Pogril: I don't know.  Why IS life like sticking your head in a bucket 
> 
> 
> 
> filled with hyena offal?
> 
> 
> 
> > First Pogril: I don't know either.  Wretched, isn't it?
> 
> 
> 
> > 
> 
> 
> 
> > -HitchHiker's Guide to the Galaxy
> 
> 
> 
> > 
> 
> 
> 
> > 
> 
> 
> 
> > _______________________________________________
> 
> 
> 
> > Proj mailing list
> 
> 
> 
> > 
> Proj at lists.maptools.org
> 
> 
> > 
> http://lists.maptools.org/mailman/listinfo/proj
> 
> 
> 
> 
> 
> 
> -----
> 
> 
> 
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> 
> 
> 
> 
> http://www.kyngchaos.com/
> 
> 
> 
> 
> 
> 
> All generalizations are dangerous, even this one.
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> _______________________________________________
> 
> 
> 
> Proj mailing list
> 
> 
> 
> 
> Proj at lists.maptools.org
> 
> 
> 
> http://lists.maptools.org/mailman/listinfo/proj
> 
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying, fighting, and all for things that the beasts of the jungle would not deign to possess - money to purchase the effeminate pleasures of weaklings.  And yet withal bound down by silly customs that make them slaves to their unhappy lot while firm in the belief that they be the lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan




From misha at mail.geometrics.com  Thu Jan 20 11:21:46 2011
From: misha at mail.geometrics.com (Mikhail Tchernychev)
Date: Thu, 20 Jan 2011 11:21:46 -0800
Subject: [Proj] Little geod problem
In-Reply-To: <8F9A7254-AD6D-4037-9194-D275ED99C319@kyngchaos.com>
References: <523392.9967.qm@web110001.mail.gq1.yahoo.com><4D2E3A5C.9060106@pobox.com><0F13D514-0910-41D7-80DE-C8825A864B5E@kyngchaos.com>	<B0D9B098-FED0-4581-A97B-E9950CA37D08@kyngchaos.com>	<8CD862B07229AE3-E08-13806@webmail-d029.sysops.aol.com>
	<8F9A7254-AD6D-4037-9194-D275ED99C319@kyngchaos.com>
Message-ID: <4D388B4A.9070103@mail.geometrics.com>

  Hello list,

I came across a small inconsistency in the geod program. What I use is:

geod +ellps=WGS84  -I -f "%.3lf" data_file

With data file:

-12.4989444 130.88649687 -12.4989444 130.8864967

What I got is:

-1.#IO  -1.#IO  -1.#IO

These two points are very close to each other however are not identical. 
I would
not be surprised if geod would return 0 0 0. If fact this is what it 
does if points
are simply identical.  I would suggest to round result to 0, even if it 
is not but say
smaller than some reasonable number (0.01 m?)

  I hope this would help to improve great proj software even more.

Thank you,

Mikhail


From pcifuentes at siigsa.cl  Mon Jan 24 07:42:35 2011
From: pcifuentes at siigsa.cl (Patricio Cifuentes Ithal)
Date: Mon, 24 Jan 2011 12:42:35 -0300
Subject: [Proj] problem in transform 32719 to 24879
Message-ID: <005701cbbbdd$570457a0$050d06e0$@cl>

Hi list!,

I have a problem,  I need transforrm one point  of projection 32719to
24879,

 

Point 32719

362802.140         7955337.740

 

Example:

 

cs2cs +proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs
+to +proj=utm +zone=19 +south +ellps=intl +units=m +no_defs

362802.140      7955337.740

362796.55       7955312.55 0.00 (is incorrect!!)

 

 

The real transform is

362996.74417800002      7955670.922740000

 

Why not transform correctly? I missing something?

 

 

 

Patricio Cifuentes Ithal

Ingeniero en Informática

Unidad de Informática

Fono : 02 - 334 73 69

www.siigsa.cl

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110124/0c7df80b/attachment.html>

From jagoncal at gmail.com  Mon Jan 24 08:08:04 2011
From: jagoncal at gmail.com (=?ISO-8859-1?Q?Jose_Gon=E7alves?=)
Date: Mon, 24 Jan 2011 16:08:04 +0000
Subject: [Proj] problem in transform 32719 to 24879
In-Reply-To: <005701cbbbdd$570457a0$050d06e0$@cl>
References: <005701cbbbdd$570457a0$050d06e0$@cl>
Message-ID: <AANLkTimT9gCnZTj7+Gz-gsVXQ+TcsqtPhpnNh2b+GA4K@mail.gmail.com>

Patricio

The problem is that you don't have a datum transformation for the second
coordinate system. You should have something like:

.... +to +proj=utm +zone=19 +south +ellps=intl +units=m +no_defs
+towgs84=-288,175,-376

I got these parameters from ArcGIS. There are several other sets of datum
parameters, probably more adequate for different areas.

Regards

José A. Gonçalves







2011/1/24 Patricio Cifuentes Ithal <pcifuentes at siigsa.cl>

> Hi list!,
>
> I’ have a problem,  I’ need transforrm one point  of projection 32719to
> 24879,
>
>
>
> Point 32719
>
> 362802.140         7955337.740
>
>
>
> Example:
>
>
>
> cs2cs +proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs
> +to +proj=utm +zone=19 +south +ellps=intl +units=m +no_defs
>
> 362802.140      7955337.740
>
> 362796.55       7955312.55 0.00 (is incorrect!!)
>
>
>
>
>
> The real transform is
>
> 362996.74417800002      7955670.922740000
>
>
>
> Why not transform correctly? I missing something?
>
>
>
>
>
>
>
> *Patricio Cifuentes Ithal*
>
> Ingeniero en Informática
>
> Unidad de Informática
>
> Fono : 02 - 334 73 69
>
> www.siigsa.cl
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110124/c3740e52/attachment.html>

From pcifuentes at siigsa.cl  Tue Jan 25 11:55:41 2011
From: pcifuentes at siigsa.cl (Patricio Cifuentes Ithal)
Date: Tue, 25 Jan 2011 16:55:41 -0300
Subject: [Proj] problem in transform 32719 to 24879
In-Reply-To: <AANLkTimT9gCnZTj7+Gz-gsVXQ+TcsqtPhpnNh2b+GA4K@mail.gmail.com>
References: <005701cbbbdd$570457a0$050d06e0$@cl>
	<AANLkTimT9gCnZTj7+Gz-gsVXQ+TcsqtPhpnNh2b+GA4K@mail.gmail.com>
Message-ID: <004b01cbbcc9$dadff5b0$909fe110$@cl>

José,

Exactly!!! 

Thanks for the help!

 

Patricio Cifuentes Ithal

Ingeniero en Informática

Unidad de Informática

Fono : 02 - 334 73 69

www.siigsa.cl

 

De: Jose Gonçalves [mailto:jagoncal at gmail.com] 
Enviado el: lunes, 24 de enero de 2011 13:08
Para: pcifuentes at siigsa.cl; PROJ.4 and general Projections Discussions
Asunto: Re: [Proj] problem in transform 32719 to 24879

 

Patricio 

The problem is that you don't have a datum transformation for the second
coordinate system. You should have something like:

.... +to +proj=utm +zone=19 +south +ellps=intl +units=m +no_defs
+towgs84=-288,175,-376

I got these parameters from ArcGIS. There are several other sets of datum
parameters, probably more adequate for different areas.

Regards

José A. Gonçalves

 






2011/1/24 Patricio Cifuentes Ithal <pcifuentes at siigsa.cl>

Hi list!,

I have a problem,  I need transforrm one point  of projection 32719to
24879,

 

Point 32719

362802.140         7955337.740

 

Example:

 

cs2cs +proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs
+to +proj=utm +zone=19 +south +ellps=intl +units=m +no_defs

362802.140      7955337.740

362796.55       7955312.55 0.00 (is incorrect!!)

 

 

The real transform is

362996.74417800002      7955670.922740000

 

Why not transform correctly? I missing something?

 

 

 

Patricio Cifuentes Ithal

Ingeniero en Informática

Unidad de Informática

Fono : 02 - 334 73 69

www.siigsa.cl

 


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110125/3103652d/attachment.html>

From bkr at devonor.com  Thu Jan 27 07:45:54 2011
From: bkr at devonor.com (=?iso-8859-1?Q?Bj=F8rn_Krangnes?=)
Date: Thu, 27 Jan 2011 16:45:54 +0100
Subject: [Proj] cs2cs giving different result than ImportportFromProj4 in a
	C# program
Message-ID: <E8A6416B4B344BD6A03BDDCFDA28429E@bjornk>

cs2cs is giving this result (Irish Transverse Mercator to IrishGrid75):

C:\Program Files (x86)\FWTools2.4.7>cs2cs +proj=tmerc +lat_0=53.5 +lon_0=-8
+k=0

.999820 +x_0=600000 +y_0=750000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
+no

_defs +to +proj=tmerc +lat_0=53.5 +lon_0=-8 +k=1.000035 +x_0=200000
+y_0=250000

+a=6377340.189 +b=6356034.447938534
+towgs84=482.530,-130.596,564.557,-1.042,-0.

214,-0.631,8.15 +units=m +no_defs

600000.0 700000.0

200049.28       199965.72 -54.78

 

The correct result is:  E: 200049.410 N: 199965.743

The result from cs2cs is very close to the correct result.

 

But when I use the following code in a c# program the result is not the same
as cs2cs

 

SpatialReference input = new OSGeo.OSR.SpatialReference(null);

SpatialReference output = new OSGeo.OSR.SpatialReference(null);

 

int istati = input.ImportFromProj4("+proj=tmerc +lat_0=53.5 +lon_0=-8
+k=0.999820 +x_0=600000 +y_0=750000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0
+units=m +no_defs");   // ITM

int istato = output.ImportFromProj4("+proj=tmerc +lat_0=53.5 +lon_0=-8
+k=1.000035 +x_0=200000 +y_0=250000 +a=6377340.189 +b=6356034.447938534
+towgs84=482.530,-130.596,564.557,-1.42,-0.214,-0.631,8.15 +units=m +wktext
+no_defs <>)");   // IG

CoordinateTransformation tra = new CoordinateTransformation(input, output);

double[] xy = new double[3];

xy[0] = 600000.0;

xy[1] = 700000.0;

xy[2] = 0;

tra.TransformPoint(xy);

 

After execution xy[0]= 200040.069 and xy[1]= 199964.097. This is about 9
meters off in east and 1.7 in north.

 

Any reason why I should get 2 different results? 

 

Regards

Bjørn

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110127/fa3d93fe/attachment.html>

From support.mn at elisanet.fi  Fri Jan 28 01:50:37 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Fri, 28 Jan 2011 11:50:37 +0200 (EET)
Subject: [Proj] cs2cs giving different result than ImportportFromProj4
 in a C# program
Message-ID: <16143219.9493301296208237332.JavaMail.support.mn@elisanet.fi>

Bjørn ,

all I can come up with in a short time is
this 16 digit number -> 6356034.447938534 ??

Are you sure that both versions can read all those digits?
Test both with shorter numbers?

Does both programs really get all the numbers exactly
the same. Make some tests and traces? What numbers
do those programs actually use?

Regards: Janne.

------------------------------------------

Bjørn Krangnes [bkr at devonor.com] kirjoitti: 
> cs2cs is giving this result (Irish Transverse Mercator to IrishGrid75):
> 
> C:\Program Files (x86)\FWTools2.4.7>cs2cs +proj=tmerc +lat_0=53.5 +lon_0=-8
> +k=0
> 
> .999820 +x_0=600000 +y_0=750000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
> +no
> 
> _defs +to +proj=tmerc +lat_0=53.5 +lon_0=-8 +k=1.000035 +x_0=200000
> +y_0=250000
> 
> +a=6377340.189 +b=6356034.447938534
> +towgs84=482.530,-130.596,564.557,-1.042,-0.
> 
> 214,-0.631,8.15 +units=m +no_defs
> 
> 600000.0 700000.0
> 
> 200049.28       199965.72 -54.78
> 
>  
> 
> The correct result is:  E: 200049.410 N: 199965.743
> 
> The result from cs2cs is very close to the correct result.
> 
>  
> 
> But when I use the following code in a c# program the result is not the same
> as cs2cs
> 
>  
> 
> SpatialReference input = new OSGeo.OSR.SpatialReference(null);
> 
> SpatialReference output = new OSGeo.OSR.SpatialReference(null);
> 
>  
> 
> int istati = input.ImportFromProj4("+proj=tmerc +lat_0=53.5 +lon_0=-8
> +k=0.999820 +x_0=600000 +y_0=750000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0
> +units=m +no_defs");   // ITM
> 
> int istato = output.ImportFromProj4("+proj=tmerc +lat_0=53.5 +lon_0=-8
> +k=1.000035 +x_0=200000 +y_0=250000 +a=6377340.189 +b=6356034.447938534
> +towgs84=482.530,-130.596,564.557,-1.42,-0.214,-0.631,8.15 +units=m +wktext
> +no_defs <>)");   // IG
> 
> CoordinateTransformation tra = new CoordinateTransformation(input, output);
> 
> double[] xy = new double[3];
> 
> xy[0] = 600000.0;
> 
> xy[1] = 700000.0;
> 
> xy[2] = 0;
> 
> tra.TransformPoint(xy);
> 
>  
> 
> After execution xy[0]= 200040.069 and xy[1]= 199964.097. This is about 9
> meters off in east and 1.7 in north.
> 
>  
> 
> Any reason why I should get 2 different results? 
> 
>  
> 
> Regards
> 
> Bjørn
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From bkr at devonor.com  Fri Jan 28 06:56:59 2011
From: bkr at devonor.com (=?iso-8859-1?Q?Bj=F8rn_Krangnes?=)
Date: Fri, 28 Jan 2011 15:56:59 +0100
Subject: [Proj] cs2cs giving different result than ImportportFromProj4
	in a C# program
In-Reply-To: <16143219.9493301296208237332.JavaMail.support.mn@elisanet.fi>
References: <16143219.9493301296208237332.JavaMail.support.mn@elisanet.fi>
Message-ID: <B4A07351B733418F89B7781A2ACFB3FC@bjornk>

Janne,
My fault, one of the datumshift parameter was wrong (-1.42 should be -1.042)
By putting in the correct value the result using ImportFromProj4 is ok.
Thanks.

Regards: Bjørn

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of support.mn at elisanet.fi
Sent: 28. januar 2011 10:51
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] cs2cs giving different result than ImportportFromProj4
in a C# program

Bjørn ,

all I can come up with in a short time is
this 16 digit number -> 6356034.447938534 ??

Are you sure that both versions can read all those digits?
Test both with shorter numbers?

Does both programs really get all the numbers exactly
the same. Make some tests and traces? What numbers
do those programs actually use?

Regards: Janne.

------------------------------------------

Bjørn Krangnes [bkr at devonor.com] kirjoitti: 
> cs2cs is giving this result (Irish Transverse Mercator to IrishGrid75):
> 
> C:\Program Files (x86)\FWTools2.4.7>cs2cs +proj=tmerc +lat_0=53.5
+lon_0=-8
> +k=0
> 
> .999820 +x_0=600000 +y_0=750000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0
+units=m
> +no
> 
> _defs +to +proj=tmerc +lat_0=53.5 +lon_0=-8 +k=1.000035 +x_0=200000
> +y_0=250000
> 
> +a=6377340.189 +b=6356034.447938534
> +towgs84=482.530,-130.596,564.557,-1.042,-0.
> 
> 214,-0.631,8.15 +units=m +no_defs
> 
> 600000.0 700000.0
> 
> 200049.28       199965.72 -54.78
> 
>  
> 
> The correct result is:  E: 200049.410 N: 199965.743
> 
> The result from cs2cs is very close to the correct result.
> 
>  
> 
> But when I use the following code in a c# program the result is not the
same
> as cs2cs
> 
>  
> 
> SpatialReference input = new OSGeo.OSR.SpatialReference(null);
> 
> SpatialReference output = new OSGeo.OSR.SpatialReference(null);
> 
>  
> 
> int istati = input.ImportFromProj4("+proj=tmerc +lat_0=53.5 +lon_0=-8
> +k=0.999820 +x_0=600000 +y_0=750000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0
> +units=m +no_defs");   // ITM
> 
> int istato = output.ImportFromProj4("+proj=tmerc +lat_0=53.5 +lon_0=-8
> +k=1.000035 +x_0=200000 +y_0=250000 +a=6377340.189 +b=6356034.447938534
> +towgs84=482.530,-130.596,564.557,-1.42,-0.214,-0.631,8.15 +units=m
+wktext
> +no_defs <>)");   // IG
> 
> CoordinateTransformation tra = new CoordinateTransformation(input,
output);
> 
> double[] xy = new double[3];
> 
> xy[0] = 600000.0;
> 
> xy[1] = 700000.0;
> 
> xy[2] = 0;
> 
> tra.TransformPoint(xy);
> 
>  
> 
> After execution xy[0]= 200040.069 and xy[1]= 199964.097. This is about 9
> meters off in east and 1.7 in north.
> 
>  
> 
> Any reason why I should get 2 different results? 
> 
>  
> 
> Regards
> 
> Bjørn
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From mohammedrashadkm at gmail.com  Fri Jan 28 23:46:59 2011
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Sat, 29 Jan 2011 13:16:59 +0530
Subject: [Proj] reproject shapefile
Message-ID: <AANLkTim9owH+XEi8B-tRTDkJOs+L+9xCKjusgqe1iDJt@mail.gmail.com>

how to reproject a shapefile from UTM 44N to latlon?

-- 
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110129/4e644bb8/attachment.html>

From neteler at osgeo.org  Sat Jan 29 10:02:29 2011
From: neteler at osgeo.org (Markus Neteler)
Date: Sat, 29 Jan 2011 19:02:29 +0100
Subject: [Proj] reproject shapefile
In-Reply-To: <AANLkTim9owH+XEi8B-tRTDkJOs+L+9xCKjusgqe1iDJt@mail.gmail.com>
References: <AANLkTim9owH+XEi8B-tRTDkJOs+L+9xCKjusgqe1iDJt@mail.gmail.com>
Message-ID: <AANLkTikoPqgQXeG1K6iJHr6r0yApyEyYTcoHoyP=SUVO@mail.gmail.com>

On Sat, Jan 29, 2011 at 8:46 AM, Mohammed Rashad
<mohammedrashadkm at gmail.com> wrote:
> how to reproject a shapefile from UTM 44N to latlon?

With OGR:

ogr2ogr -t_srs epsg:4326 outfile_LL.shp infile_utm44n_shp

Markus

-- 
http://gis.cri.fmach.it/


