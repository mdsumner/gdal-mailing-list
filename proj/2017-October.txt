From mateusz at loskot.net  Mon Oct  2 00:33:52 2017
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 2 Oct 2017 09:33:52 +0200
Subject: [Proj] Remove Windows CE cruft (wince/msvc80)
In-Reply-To: <C2DFC6A70DE88413.4dfd7289-e024-46d4-94d1-063a14d9200e@mail.outlook.com>
References: <CABUeae8k=aKXAt6FGL9y6bTVsSjW9rVVSby_FiRKk8pq8a=m=A@mail.gmail.com>
	<1962753.eTknMG5LWR@even-i700>
	<CAH0YoEMBHmF=QGDK61g-yoX=1Pkaw2+9vJ8im8o7fhrF-drvNA@mail.gmail.com>
	<CACmBxyvw=pa-PDohMbWnuPa-qsydr5f_VCDv0LFQMJ7TA0TLEg@mail.gmail.com>
	<C2DFC6A70DE88413.4dfd7289-e024-46d4-94d1-063a14d9200e@mail.outlook.com>
Message-ID: <CABUeae-RXcNenMq3TiQEexjsM2OwWp1qxgBoRZKvOsgGDS8x-g@mail.gmail.com>

On 29 September 2017 at 09:56, Kristian Evers <kreve at sdfe.dk> wrote:
>
> I suggest that we keep it in version 4.10.0/4.9.4 (whatever it ends up
> being), and announce in the release notes that this will be the final
> version with support for  WinCE. That way anyone who still rely on it has
> amble time to react.

I don't think that build configuration even still works, it is for VS2005.

If the decision is to keep it, I will wait.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net


From kreve at sdfe.dk  Thu Oct  5 01:34:40 2017
From: kreve at sdfe.dk (Kristian Evers)
Date: Thu, 5 Oct 2017 08:34:40 +0000
Subject: [Proj] Several versions of the EGM96 grid
Message-ID: <2E885BB293AF0448A0181138489E9A0EAEA7B078@S000014.PROD.SITAD.DK>

All,

Just a word of caution. It has recently come to my attention that there's in fact several versions of the egm96_15.gtx grid being distributed. Thomas discovered it whilst trying to debug some failing tests. One version of the grid is distributed with OSGeo4W and the other is distributed on the OSGeo download website: http://download.osgeo.org/proj/vdatum/egm96_15/egm96_15.gtx

It is not clear to me which of the two versions of the grid is the correct one, but it is obvious that they are different. The image at https://i.imgur.com/eG80Wv5.jpg  shows the difference between the two grids (download.osgeo.org - OSGeo4W). There is upwards of a meters difference in some places. Quite significant, and potentially a problem for some users. In the OSGeo4W-grid the grid values seem to be limited to two decimals, whereas the other grid has more decimal places (4-7, normal floating point behavior). I have a suspicion that the two grids are offset slightly in the east-west direction, but haven't been able to confirm it.

Has anyone on the list got any insight as to which of the two versions of the grid is the correct one?

Cheers,
Kristian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20171005/71e428f8/attachment.html>

From andre+joost at nurfuerspam.de  Thu Oct  5 02:31:26 2017
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Thu, 05 Oct 2017 11:31:26 +0200
Subject: [Proj] Several versions of the EGM96 grid
In-Reply-To: <2E885BB293AF0448A0181138489E9A0EAEA7B078@S000014.PROD.SITAD.DK>
References: <2E885BB293AF0448A0181138489E9A0EAEA7B078@S000014.PROD.SITAD.DK>
Message-ID: <or4u76$ar4$1@blaine.gmane.org>

Am 05.10.2017 um 10:34 schrieb Kristian Evers:
> All,
>
> Just a word of caution. It has recently come to my attention that
> there's in fact several versions of the egm96_15.gtx grid being
> distributed. Thomas discovered it whilst trying to debug some failing
> tests. One version of the grid is distributed with OSGeo4W and the
> other is distributed on the OSGeo download website:
> http://download.osgeo.org/proj/vdatum/egm96_15/egm96_15.gtx
>
>
> Has anyone on the list got any insight as to which of the two
> versions of the grid is the correct one?
>

If you look at:

http://download.osgeo.org/proj/vdatum/egm96_15/

You see a egm96_15-incorrect.gtx from 2010, and a "correct" one from 2014.

OSGEO4W64 has the one from 2010.

HTH,
andré Joost





From andre+joost at nurfuerspam.de  Thu Oct  5 02:38:15 2017
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Thu, 05 Oct 2017 11:38:15 +0200
Subject: [Proj] Several versions of the EGM96 grid
In-Reply-To: <or4u76$ar4$1@blaine.gmane.org>
References: <2E885BB293AF0448A0181138489E9A0EAEA7B078@S000014.PROD.SITAD.DK>
	<or4u76$ar4$1@blaine.gmane.org>
Message-ID: <or4uk0$d41$1@blaine.gmane.org>

Am 05.10.2017 um 11:31 schrieb Andre Joost:

> If you look at:
>
> http://download.osgeo.org/proj/vdatum/egm96_15/
>
> You see a egm96_15-incorrect.gtx from 2010, and a "correct" one from 2014.
>
> OSGEO4W64 has the one from 2010.
>

And the related ticket is .....:

https://github.com/OSGeo/proj.4/issues/126

So soemone should update the OSGEO4W file as well.

Greetings,
André Joost




From kreve at sdfe.dk  Thu Oct  5 02:56:50 2017
From: kreve at sdfe.dk (Kristian Evers)
Date: Thu, 5 Oct 2017 09:56:50 +0000
Subject: [Proj] Several versions of the EGM96 grid
In-Reply-To: <or4uk0$d41$1@blaine.gmane.org>
References: <2E885BB293AF0448A0181138489E9A0EAEA7B078@S000014.PROD.SITAD.DK>
	<or4u76$ar4$1@blaine.gmane.org> <or4uk0$d41$1@blaine.gmane.org>
Message-ID: <2E885BB293AF0448A0181138489E9A0EAEA7B14B@S000014.PROD.SITAD.DK>

Andre,

Well that clears that up. I see that you have already create a ticket with the OSGeo4W guys. Thanks!

/Kristian 

-----Oprindelig meddelelse-----
Fra: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] På vegne af Andre Joost
Sendt: 5. oktober 2017 11:38
Til: proj at lists.maptools.org
Emne: Re: [Proj] Several versions of the EGM96 grid

Am 05.10.2017 um 11:31 schrieb Andre Joost:

> If you look at:
>
> http://download.osgeo.org/proj/vdatum/egm96_15/
>
> You see a egm96_15-incorrect.gtx from 2010, and a "correct" one from 2014.
>
> OSGEO4W64 has the one from 2010.
>

And the related ticket is .....:

https://github.com/OSGeo/proj.4/issues/126

So soemone should update the OSGEO4W file as well.

Greetings,
André Joost


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From jmfluis at gmail.com  Thu Oct  5 03:58:01 2017
From: jmfluis at gmail.com (Joaquim Luis)
Date: Thu, 5 Oct 2017 11:58:01 +0100
Subject: [Proj] Several versions of the EGM96 grid
In-Reply-To: <2E885BB293AF0448A0181138489E9A0EAEA7B14B@S000014.PROD.SITAD.DK>
References: <2E885BB293AF0448A0181138489E9A0EAEA7B078@S000014.PROD.SITAD.DK>
	<or4u76$ar4$1@blaine.gmane.org> <or4uk0$d41$1@blaine.gmane.org>
	<2E885BB293AF0448A0181138489E9A0EAEA7B14B@S000014.PROD.SITAD.DK>
Message-ID: <152900CF-6BC8-4361-ABCF-E743774FBE8B@gmail.com>

And why still use the EGM96 instead of at least the EGM2008?

Joaquim 

Sent from my iDedo

No dia 05/10/2017, às 10:56, Kristian Evers <kreve at sdfe.dk> escreveu:

> Andre,
> 
> Well that clears that up. I see that you have already create a ticket with the OSGeo4W guys. Thanks!
> 
> /Kristian 
> 
> -----Oprindelig meddelelse-----
> Fra: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] På vegne af Andre Joost
> Sendt: 5. oktober 2017 11:38
> Til: proj at lists.maptools.org
> Emne: Re: [Proj] Several versions of the EGM96 grid
> 
>> Am 05.10.2017 um 11:31 schrieb Andre Joost:
>> 
>> If you look at:
>> 
>> http://download.osgeo.org/proj/vdatum/egm96_15/
>> 
>> You see a egm96_15-incorrect.gtx from 2010, and a "correct" one from 2014.
>> 
>> OSGEO4W64 has the one from 2010.
>> 
> 
> And the related ticket is .....:
> 
> https://github.com/OSGeo/proj.4/issues/126
> 
> So soemone should update the OSGEO4W file as well.
> 
> Greetings,
> André Joost
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


From kreve at sdfe.dk  Thu Oct  5 04:57:06 2017
From: kreve at sdfe.dk (Kristian Evers)
Date: Thu, 5 Oct 2017 11:57:06 +0000
Subject: [Proj] Several versions of the EGM96 grid
In-Reply-To: <152900CF-6BC8-4361-ABCF-E743774FBE8B@gmail.com>
References: <2E885BB293AF0448A0181138489E9A0EAEA7B078@S000014.PROD.SITAD.DK>
	<or4u76$ar4$1@blaine.gmane.org> <or4uk0$d41$1@blaine.gmane.org>
	<2E885BB293AF0448A0181138489E9A0EAEA7B14B@S000014.PROD.SITAD.DK>
	<152900CF-6BC8-4361-ABCF-E743774FBE8B@gmail.com>
Message-ID: <2E885BB293AF0448A0181138489E9A0EAEA7B42E@S000014.PROD.SITAD.DK>

Joaquim,

In case you have some dataset that is defined in terms of EGM96 that you want to convert to something else, for instance.

In this particular case I have been using the egm96_15.gtx file for testing various grid-shifting operations for the vertical component in PROJ.4. I use the EGM96 grid because it is readily available in most grid distributions. Something that cannot be said about EGM2008 (i.e. not part of the OSGeo vdatums package).

/Kristian

-----Oprindelig meddelelse-----
Fra: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] På vegne af Joaquim Luis
Sendt: 5. oktober 2017 12:58
Til: PROJ.4 and general Projections Discussions <proj at lists.maptools.org>
Emne: Re: [Proj] Several versions of the EGM96 grid

And why still use the EGM96 instead of at least the EGM2008?

Joaquim 

Sent from my iDedo

No dia 05/10/2017, às 10:56, Kristian Evers <kreve at sdfe.dk> escreveu:

> Andre,
> 
> Well that clears that up. I see that you have already create a ticket with the OSGeo4W guys. Thanks!
> 
> /Kristian 
> 
> -----Oprindelig meddelelse-----
> Fra: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] På vegne af Andre Joost
> Sendt: 5. oktober 2017 11:38
> Til: proj at lists.maptools.org
> Emne: Re: [Proj] Several versions of the EGM96 grid
> 
>> Am 05.10.2017 um 11:31 schrieb Andre Joost:
>> 
>> If you look at:
>> 
>> http://download.osgeo.org/proj/vdatum/egm96_15/
>> 
>> You see a egm96_15-incorrect.gtx from 2010, and a "correct" one from 2014.
>> 
>> OSGEO4W64 has the one from 2010.
>> 
> 
> And the related ticket is .....:
> 
> https://github.com/OSGeo/proj.4/issues/126
> 
> So soemone should update the OSGEO4W file as well.
> 
> Greetings,
> André Joost
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

From stevejking at talktalk.net  Thu Oct  5 05:35:17 2017
From: stevejking at talktalk.net (stevejking)
Date: Thu, 5 Oct 2017 05:35:17 -0700 (MST)
Subject: [Proj] Several versions of the EGM96 grid
In-Reply-To: <2E885BB293AF0448A0181138489E9A0EAEA7B42E@S000014.PROD.SITAD.DK>
References: <2E885BB293AF0448A0181138489E9A0EAEA7B078@S000014.PROD.SITAD.DK>
	<or4u76$ar4$1@blaine.gmane.org> <or4uk0$d41$1@blaine.gmane.org>
	<2E885BB293AF0448A0181138489E9A0EAEA7B14B@S000014.PROD.SITAD.DK>
	<152900CF-6BC8-4361-ABCF-E743774FBE8B@gmail.com>
	<2E885BB293AF0448A0181138489E9A0EAEA7B42E@S000014.PROD.SITAD.DK>
Message-ID: <1507206917270-0.post@n6.nabble.com>

Joaquim 
Also EGM96 is the geoid specified in the KML2.2 specification.
Steve



--
Sent from: http://osgeo-org.1560.x6.nabble.com/PROJ-4-f3840930.html


From chris.marsh at usask.ca  Fri Oct 13 08:56:09 2017
From: chris.marsh at usask.ca (Chris Marsh)
Date: Fri, 13 Oct 2017 15:56:09 +0000
Subject: [Proj] Failed to initialize PROJ.4 with "..."
Message-ID: <CAFgDerH4-JQAEhMbPVBRW-DYi9StwpT03-6Vsj3+C6W_CNi=Pw@mail.gmail.com>

Hi,

I'm using GDAL (and by extension proj.4) to reproject a set of WGS84
coordinates to North America Albers Conic Conformal.

I originally posted this to the GDAL list, however it seems like this may
be entirely a Proj.4 problem.

On all but 1 computer I run my code on, this works as expected. However,
when trying to run on one of Compute Canada's newest machines, I get the
error

ERROR 6: Failed to initialize PROJ.4 with `+proj=aea +lat_1=20 +lat_2=60
+lat_0=40 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0
+units=m +no_defs'.

I have tried building and linking against various proj.4 versions, none of
which solves this problem.

The code  is straightfoward
OGRSpatialReference insrs;
    insrs.SetWellKnownGeogCS("WGS84");

    OGRSpatialReference outsrs;
    outsrs.importFromProj4("+proj=aea +lat_1=20 +lat_2=60 +lat_0=40
+lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
+no_defs");

    OGRCoordinateTransformation* coordTrans =  NULL;
    coordTrans = OGRCreateCoordinateTransformation(&insrs, &outsrs);

    coordTrans->Transform(1, &longitude, &latitude)

with the error appearing on the Transform call. The proj.4 string is from
using the ExportToWkt of GDAL for the WKT of Albers Conic Conformal. (long
story as to why i'm doing this). I have tried using the WKT string and that
results in the same error -- seems like it is just converted to proj.4
behind the scenes.

I am using gdal 2.2.1 and proj4 4.8 (4.9 has other issues I'm running into)

$gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/cvmfs/soft.computecanada.ca/nix/store/
lvjwgn6hpngyy6k4xqcqa9h2cxy3fl30-gfortran-5.4.0/libexec/gcc/
x86_64-unknown-linux-gnu/5.4.0/lto-wrapper
Target: x86_64-unknown-linux-gnu
Configured with:
Thread model: posix
gcc version 5.4.0 (GCC)

$uname -a
Linux gra-login4 3.10.0-514.21.1.el7.x86_64 #1 SMP Thu May 25 17:04:51 UTC
2017 x86_64 GNU/Linux

Cheers
Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20171013/46880ff3/attachment.html>

From stevejking at talktalk.net  Fri Oct 13 12:13:46 2017
From: stevejking at talktalk.net (stevejking)
Date: Fri, 13 Oct 2017 12:13:46 -0700 (MST)
Subject: [Proj] Failed to initialize PROJ.4 with "..."
In-Reply-To: <CAFgDerH4-JQAEhMbPVBRW-DYi9StwpT03-6Vsj3+C6W_CNi=Pw@mail.gmail.com>
References: <CAFgDerH4-JQAEhMbPVBRW-DYi9StwpT03-6Vsj3+C6W_CNi=Pw@mail.gmail.com>
Message-ID: <1507922026004-0.post@n6.nabble.com>

If it's not working with any transform could be a library or library
dependency not present or not found. Or using a 32bit instead of 64bit
library or visa versa.

On Windows you can use Dependency Walker and sysInternals Process Monitor to
debug the problem machine. On Linux maybe strace can help?

Steve


Chris Marsh wrote
> Hi,
> 
> I'm using GDAL (and by extension proj.4) to reproject a set of WGS84
> coordinates to North America Albers Conic Conformal.
> 
> I originally posted this to the GDAL list, however it seems like this may
> be entirely a Proj.4 problem.
> 
> On all but 1 computer I run my code on, this works as expected. However,
> when trying to run on one of Compute Canada's newest machines, I get the
> error
> 
> ERROR 6: Failed to initialize PROJ.4 with `+proj=aea +lat_1=20 +lat_2=60
> +lat_0=40 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0
> +units=m +no_defs'.
> 
> I have tried building and linking against various proj.4 versions, none of
> which solves this problem.
> 
> The code  is straightfoward
> OGRSpatialReference insrs;
>     insrs.SetWellKnownGeogCS("WGS84");
> 
>     OGRSpatialReference outsrs;
>     outsrs.importFromProj4("+proj=aea +lat_1=20 +lat_2=60 +lat_0=40
> +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
> +no_defs");
> 
>     OGRCoordinateTransformation* coordTrans =  NULL;
>     coordTrans = OGRCreateCoordinateTransformation(&insrs, &outsrs);
> 
>     coordTrans->Transform(1, &longitude, &latitude)
> 
> with the error appearing on the Transform call. The proj.4 string is from
> using the ExportToWkt of GDAL for the WKT of Albers Conic Conformal. (long
> story as to why i'm doing this). I have tried using the WKT string and
> that
> results in the same error -- seems like it is just converted to proj.4
> behind the scenes.
> 
> I am using gdal 2.2.1 and proj4 4.8 (4.9 has other issues I'm running
> into)
> 
> $gcc -v
> Using built-in specs.
> COLLECT_GCC=gcc
> COLLECT_LTO_WRAPPER=/cvmfs/soft.computecanada.ca/nix/store/
> lvjwgn6hpngyy6k4xqcqa9h2cxy3fl30-gfortran-5.4.0/libexec/gcc/
> x86_64-unknown-linux-gnu/5.4.0/lto-wrapper
> Target: x86_64-unknown-linux-gnu
> Configured with:
> Thread model: posix
> gcc version 5.4.0 (GCC)
> 
> $uname -a
> Linux gra-login4 3.10.0-514.21.1.el7.x86_64 #1 SMP Thu May 25 17:04:51 UTC
> 2017 x86_64 GNU/Linux
> 
> Cheers
> Chris
> 
> _______________________________________________
> Proj mailing list

> Proj at .maptools

> http://lists.maptools.org/mailman/listinfo/proj





--
Sent from: http://osgeo-org.1560.x6.nabble.com/PROJ-4-f3840930.html


From kreve at sdfe.dk  Fri Oct 13 12:30:47 2017
From: kreve at sdfe.dk (Kristian Evers)
Date: Fri, 13 Oct 2017 19:30:47 +0000
Subject: [Proj] Failed to initialize PROJ.4 with "..."
In-Reply-To: <CAFgDerH4-JQAEhMbPVBRW-DYi9StwpT03-6Vsj3+C6W_CNi=Pw@mail.gmail.com>
References: <CAFgDerH4-JQAEhMbPVBRW-DYi9StwpT03-6Vsj3+C6W_CNi=Pw@mail.gmail.com>
Message-ID: <2E885BB293AF0448A0181138489E9A0EAEA82560@S000014.PROD.SITAD.DK>

Chris,

It would be beneficial if you could try to reproduce this problem just using PROJ.4 and a few simple coordinates. Either on the command line with a call to cs2cs or by a small C program. I tried initialising the projection with a recent version of PROJ.4 without problems and I can't see any obvious problem in the proj string. It is likely that if this indeed is a bug in PROJ.4 that it has already been fixed.

/Kristian

________________________________
Fra: proj-bounces at lists.maptools.org [proj-bounces at lists.maptools.org] på vegne af Chris Marsh [chris.marsh at usask.ca]
Sendt: 13. oktober 2017 17:56
Til: proj at lists.maptools.org
Emne: [Proj] Failed to initialize PROJ.4 with "..."

Hi,

I'm using GDAL (and by extension proj.4) to reproject a set of WGS84 coordinates to North America Albers Conic Conformal.

I originally posted this to the GDAL list, however it seems like this may be entirely a Proj.4 problem.

On all but 1 computer I run my code on, this works as expected. However, when trying to run on one of Compute Canada's newest machines, I get the error

ERROR 6: Failed to initialize PROJ.4 with `+proj=aea +lat_1=20 +lat_2=60 +lat_0=40 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs'.

I have tried building and linking against various proj.4 versions, none of which solves this problem.

The code  is straightfoward
OGRSpatialReference insrs;
    insrs.SetWellKnownGeogCS("WGS84");

    OGRSpatialReference outsrs;
    outsrs.importFromProj4("+proj=aea +lat_1=20 +lat_2=60 +lat_0=40 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs");

    OGRCoordinateTransformation* coordTrans =  NULL;
    coordTrans = OGRCreateCoordinateTransformation(&insrs, &outsrs);

    coordTrans->Transform(1, &longitude, &latitude)

with the error appearing on the Transform call. The proj.4 string is from using the ExportToWkt of GDAL for the WKT of Albers Conic Conformal. (long story as to why i'm doing this). I have tried using the WKT string and that results in the same error -- seems like it is just converted to proj.4 behind the scenes.

I am using gdal 2.2.1 and proj4 4.8 (4.9 has other issues I'm running into)

$gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/cvmfs/soft.computecanada.ca/nix/store/lvjwgn6hpngyy6k4xqcqa9h2cxy3fl30-gfortran-5.4.0/libexec/gcc/x86_64-unknown-linux-gnu/5.4.0/lto-wrapper<http://soft.computecanada.ca/nix/store/lvjwgn6hpngyy6k4xqcqa9h2cxy3fl30-gfortran-5.4.0/libexec/gcc/x86_64-unknown-linux-gnu/5.4.0/lto-wrapper>
Target: x86_64-unknown-linux-gnu
Configured with:
Thread model: posix
gcc version 5.4.0 (GCC)

$uname -a
Linux gra-login4 3.10.0-514.21.1.el7.x86_64 #1 SMP Thu May 25 17:04:51 UTC 2017 x86_64 GNU/Linux

Cheers
Chris


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20171013/a508f0a3/attachment.html>

From stevejking at talktalk.net  Fri Oct 13 13:41:05 2017
From: stevejking at talktalk.net (stevejking)
Date: Fri, 13 Oct 2017 13:41:05 -0700 (MST)
Subject: [Proj] Failed to initialize PROJ.4 with "..."
In-Reply-To: <2E885BB293AF0448A0181138489E9A0EAEA82560@S000014.PROD.SITAD.DK>
References: <CAFgDerH4-JQAEhMbPVBRW-DYi9StwpT03-6Vsj3+C6W_CNi=Pw@mail.gmail.com>
	<2E885BB293AF0448A0181138489E9A0EAEA82560@S000014.PROD.SITAD.DK>
Message-ID: <1507927265037-0.post@n6.nabble.com>

Kristian, 
Is that a Proj4 error code? 

The Proj4 codes seem more specific. My reference says code 6 is "effective
eccentricity = 1."

Is it even a GDAL error code?

Steve


Kristian Evers-2 wrote
> Chris,
> 
> It would be beneficial if you could try to reproduce this problem just
> using PROJ.4 and a few simple coordinates. Either on the command line with
> a call to cs2cs or by a small C program. I tried initialising the
> projection with a recent version of PROJ.4 without problems and I can't
> see any obvious problem in the proj string. It is likely that if this
> indeed is a bug in PROJ.4 that it has already been fixed.
> 
> /Kristian
> 
> ________________________________
> Fra: 

> proj-bounces at .maptools

>  [

> proj-bounces at .maptools

> ] på vegne af Chris Marsh [

> chris.marsh@

> ]
> Sendt: 13. oktober 2017 17:56
> Til: 

> proj at .maptools

> Emne: [Proj] Failed to initialize PROJ.4 with "..."
> 
> Hi,
> 
> ...
> 
> ERROR 6: Failed to initialize PROJ.4 with `+proj=aea +lat_1=20 +lat_2=60
> +lat_0=40 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0
> +units=m +no_defs'.
> 
> ...Cheers
> Chris
> 
> 
> 
> _______________________________________________
> Proj mailing list

> Proj at .maptools

> http://lists.maptools.org/mailman/listinfo/proj





--
Sent from: http://osgeo-org.1560.x6.nabble.com/PROJ-4-f3840930.html


From kreve at sdfe.dk  Fri Oct 13 14:23:49 2017
From: kreve at sdfe.dk (Kristian Evers)
Date: Fri, 13 Oct 2017 21:23:49 +0000
Subject: [Proj] Failed to initialize PROJ.4 with "..."
In-Reply-To: <1507927265037-0.post@n6.nabble.com>
References: <CAFgDerH4-JQAEhMbPVBRW-DYi9StwpT03-6Vsj3+C6W_CNi=Pw@mail.gmail.com>
	<2E885BB293AF0448A0181138489E9A0EAEA82560@S000014.PROD.SITAD.DK>,
	<1507927265037-0.post@n6.nabble.com>
Message-ID: <2E885BB293AF0448A0181138489E9A0EAEA826C4@S000014.PROD.SITAD.DK>

Chris,

The "ERROR: 6" is GDAL. I am not sure if GDAL is forwarding the error code from PROJ.4, although I don't think so since PROJ.4 error codes are negative. This is why I want you to reproduce the problem just by using PROJ.4. 
Try running "cs2cs +proj=latlon +datum=WGS84 +to +proj=aea +lat_1=20 +lat_2=60 +lat_0=40 +lon_0=-96 +ellps=GRS80 +units=m +no_defs" on the computer in question. If it fails the problem is definitely related to PROJ.4.

Kristian

________________________________________
Fra: proj-bounces at lists.maptools.org [proj-bounces at lists.maptools.org] p&#229; vegne af stevejking [stevejking at talktalk.net]
Sendt: 13. oktober 2017 22:41
Til: proj at lists.maptools.org
Emne: Re: [Proj] Failed to initialize PROJ.4 with "..."

Kristian,
Is that a Proj4 error code?

The Proj4 codes seem more specific. My reference says code 6 is "effective
eccentricity = 1."

Is it even a GDAL error code?

Steve


Kristian Evers-2 wrote
> Chris,
>
> It would be beneficial if you could try to reproduce this problem just
> using PROJ.4 and a few simple coordinates. Either on the command line with
> a call to cs2cs or by a small C program. I tried initialising the
> projection with a recent version of PROJ.4 without problems and I can't
> see any obvious problem in the proj string. It is likely that if this
> indeed is a bug in PROJ.4 that it has already been fixed.
>
> /Kristian
>
> ________________________________
> Fra:

> proj-bounces at .maptools

>  [

> proj-bounces at .maptools

> ] på vegne af Chris Marsh [

> chris.marsh@

> ]
> Sendt: 13. oktober 2017 17:56
> Til:

> proj at .maptools

> Emne: [Proj] Failed to initialize PROJ.4 with "..."
>
> Hi,
>
> ...
>
> ERROR 6: Failed to initialize PROJ.4 with `+proj=aea +lat_1=20 +lat_2=60
> +lat_0=40 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0
> +units=m +no_defs'.
>
> ...Cheers
> Chris
>
>
>
> _______________________________________________
> Proj mailing list

> Proj at .maptools

> http://lists.maptools.org/mailman/listinfo/proj





--
Sent from: http://osgeo-org.1560.x6.nabble.com/PROJ-4-f3840930.html
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From chris.marsh at usask.ca  Fri Oct 13 15:00:22 2017
From: chris.marsh at usask.ca (Chris Marsh)
Date: Fri, 13 Oct 2017 22:00:22 +0000
Subject: [Proj] Failed to initialize PROJ.4 with "..."
In-Reply-To: <2E885BB293AF0448A0181138489E9A0EAEA826C4@S000014.PROD.SITAD.DK>
References: <CAFgDerH4-JQAEhMbPVBRW-DYi9StwpT03-6Vsj3+C6W_CNi=Pw@mail.gmail.com>
	<2E885BB293AF0448A0181138489E9A0EAEA82560@S000014.PROD.SITAD.DK>
	<1507927265037-0.post@n6.nabble.com>
	<2E885BB293AF0448A0181138489E9A0EAEA826C4@S000014.PROD.SITAD.DK>
Message-ID: <CAFgDerGkAi9B8SOXgin89P+CryaVCc9inSZM9Cs5dxKvARPCig@mail.gmail.com>

Hi,

Thanks for the thoughts.
Yes ERROR 6 is the GDAL wrapper error.


On the computer that 'works':
cs2cs +proj=latlon +datum=WGS84 +to +proj=aea +lat_1=20 +lat_2=60 +lat_0=40
+lon_0=-96 +ellps=GRS80 +units=m +no_defs
-135.197151 60.52163
-2102114.41 2828965.44 0.00

On the computer that doesn't

./cs2cs +proj=latlon +datum=WGS84 +to +proj=aea +lat_1=20 +lat_2=60
+lat_0=40 +lon_0=-96 +ellps=GRS80 +units=m +no_defs
-135.197151 60.52163
-2102114.41 2828965.44 0.00

So that seems like that works....

Would this point to GDAL being 100% the culprit?

Cheers
Chris

On 13 October 2017 at 21:23, Kristian Evers <kreve at sdfe.dk> wrote:

> Chris,
>
> The "ERROR: 6" is GDAL. I am not sure if GDAL is forwarding the error code
> from PROJ.4, although I don't think so since PROJ.4 error codes are
> negative. This is why I want you to reproduce the problem just by using
> PROJ.4.
> Try running "cs2cs +proj=latlon +datum=WGS84 +to +proj=aea +lat_1=20
> +lat_2=60 +lat_0=40 +lon_0=-96 +ellps=GRS80 +units=m +no_defs" on the
> computer in question. If it fails the problem is definitely related to
> PROJ.4.
>
> Kristian
>
> ________________________________________
> Fra: proj-bounces at lists.maptools.org [proj-bounces at lists.maptools.org]
> p&#229; vegne af stevejking [stevejking at talktalk.net]
> Sendt: 13. oktober 2017 22:41
> Til: proj at lists.maptools.org
> Emne: Re: [Proj] Failed to initialize PROJ.4 with "..."
>
> Kristian,
> Is that a Proj4 error code?
>
> The Proj4 codes seem more specific. My reference says code 6 is "effective
> eccentricity = 1."
>
> Is it even a GDAL error code?
>
> Steve
>
>
> Kristian Evers-2 wrote
> > Chris,
> >
> > It would be beneficial if you could try to reproduce this problem just
> > using PROJ.4 and a few simple coordinates. Either on the command line
> with
> > a call to cs2cs or by a small C program. I tried initialising the
> > projection with a recent version of PROJ.4 without problems and I can't
> > see any obvious problem in the proj string. It is likely that if this
> > indeed is a bug in PROJ.4 that it has already been fixed.
> >
> > /Kristian
> >
> > ________________________________
> > Fra:
>
> > proj-bounces at .maptools
>
> >  [
>
> > proj-bounces at .maptools
>
> > ] på vegne af Chris Marsh [
>
> > chris.marsh@
>
> > ]
> > Sendt: 13. oktober 2017 17:56
> > Til:
>
> > proj at .maptools
>
> > Emne: [Proj] Failed to initialize PROJ.4 with "..."
> >
> > Hi,
> >
> > ...
> >
> > ERROR 6: Failed to initialize PROJ.4 with `+proj=aea +lat_1=20 +lat_2=60
> > +lat_0=40 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0
> > +units=m +no_defs'.
> >
> > ...Cheers
> > Chris
> >
> >
> >
> > _______________________________________________
> > Proj mailing list
>
> > Proj at .maptools
>
> > http://lists.maptools.org/mailman/listinfo/proj
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/PROJ-4-f3840930.html
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20171013/4d7d2b3b/attachment.html>

From even.rouault at spatialys.com  Fri Oct 13 15:32:16 2017
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 14 Oct 2017 00:32:16 +0200
Subject: [Proj] Failed to initialize PROJ.4 with "..."
In-Reply-To: <CAFgDerH4-JQAEhMbPVBRW-DYi9StwpT03-6Vsj3+C6W_CNi=Pw@mail.gmail.com>
References: <CAFgDerH4-JQAEhMbPVBRW-DYi9StwpT03-6Vsj3+C6W_CNi=Pw@mail.gmail.com>
Message-ID: <1536764.rF7YZLUOZH@even-i700>

On vendredi 13 octobre 2017 15:56:09 CEST Chris Marsh wrote:
> Hi,
> 
> I'm using GDAL (and by extension proj.4) to reproject a set of WGS84
> coordinates to North America Albers Conic Conformal.
> 
> I originally posted this to the GDAL list, however it seems like this may
> be entirely a Proj.4 problem.


> 
> On all but 1 computer I run my code on, this works as expected. However,
> when trying to run on one of Compute Canada's newest machines, I get the
> error

How did you build GDAL  on that machine, --with-static-proj4 ?
If not, the issue is probably that you have libproj.so.XXXX installed, but not 
libproj.so

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com


From chris.marsh at usask.ca  Fri Oct 13 15:35:38 2017
From: chris.marsh at usask.ca (Chris Marsh)
Date: Fri, 13 Oct 2017 16:35:38 -0600
Subject: [Proj] Failed to initialize PROJ.4 with "..."
In-Reply-To: <1536764.rF7YZLUOZH@even-i700>
References: <CAFgDerH4-JQAEhMbPVBRW-DYi9StwpT03-6Vsj3+C6W_CNi=Pw@mail.gmail.com>
	<1536764.rF7YZLUOZH@even-i700>
Message-ID: <CAFgDerG4XHqGjUfA+RZRqfbpL7i1Ub1=sfJVH8r9jLxOcYUVwg@mail.gmail.com>

I did not build with that option, however I have my build libproj.so in my
LD_LIBRARY_PATH

Chris Marsh
PhD Candidate
chrismarsh.ca

121 Research Drive
University of Saskatchewan

On 13 October 2017 at 16:32, Even Rouault <even.rouault at spatialys.com>
wrote:

> On vendredi 13 octobre 2017 15:56:09 CEST Chris Marsh wrote:
> > Hi,
> >
> > I'm using GDAL (and by extension proj.4) to reproject a set of WGS84
> > coordinates to North America Albers Conic Conformal.
> >
> > I originally posted this to the GDAL list, however it seems like this may
> > be entirely a Proj.4 problem.
>
>
> >
> > On all but 1 computer I run my code on, this works as expected. However,
> > when trying to run on one of Compute Canada's newest machines, I get the
> > error
>
> How did you build GDAL  on that machine, --with-static-proj4 ?
> If not, the issue is probably that you have libproj.so.XXXX installed, but
> not
> libproj.so
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20171013/96ce549f/attachment.html>

From mkennedy2 at earthlink.net  Fri Oct 13 16:17:02 2017
From: mkennedy2 at earthlink.net (Melita Kennedy)
Date: Fri, 13 Oct 2017 16:17:02 -0700 (GMT-07:00)
Subject: [Proj] Proj Digest, Vol 157, Issue 4
Message-ID: <25262732.4156.1507936623653@wamui-marley.atl.sa.earthlink.net>


Chris, 

Do you still get the error message if you change the output '+ellps=grs80' to '+datum=wgs84'? You also omitted the '+towgs84' parameter when you tested using cs2cs. The grs80 and wgs84 flattening are almost equal so I wonder if GDAL is doing some calculation connected to the '+towgs84' parameter using the grs80 and wgs84 ellipsoids incorrectly.

Melita

-----Original Message-----

>Date: Fri, 13 Oct 2017 22:00:22 +0000
>From: Chris Marsh <chris.marsh at usask.ca>
>Subject: Re: [Proj] Failed to initialize PROJ.4 with "..."
>To: PROJ.4 and general Projections Discussions
>	<proj at lists.maptools.org>
>
>Hi,
>
>Thanks for the thoughts.
>Yes ERROR 6 is the GDAL wrapper error.
>
>
>On the computer that 'works':
>cs2cs +proj=latlon +datum=WGS84 +to +proj=aea +lat_1=20 +lat_2=60 +lat_0=40
>+lon_0=-96 +ellps=GRS80 +units=m +no_defs
>-135.197151 60.52163
>-2102114.41 2828965.44 0.00
>
>On the computer that doesn't
>
>./cs2cs +proj=latlon +datum=WGS84 +to +proj=aea +lat_1=20 +lat_2=60
>+lat_0=40 +lon_0=-96 +ellps=GRS80 +units=m +no_defs
>-135.197151 60.52163
>-2102114.41 2828965.44 0.00
>
>So that seems like that works....
>
>Would this point to GDAL being 100% the culprit?
>
>Cheers
>Chris
>
>On 13 October 2017 at 21:23, Kristian Evers <kreve at sdfe.dk> wrote:
>
>> Chris,
>>
>> The "ERROR: 6" is GDAL. I am not sure if GDAL is forwarding the error code
>> from PROJ.4, although I don't think so since PROJ.4 error codes are
>> negative. This is why I want you to reproduce the problem just by using
>> PROJ.4.
>> Try running "cs2cs +proj=latlon +datum=WGS84 +to +proj=aea +lat_1=20
>> +lat_2=60 +lat_0=40 +lon_0=-96 +ellps=GRS80 +units=m +no_defs" on the
>> computer in question. If it fails the problem is definitely related to
>> PROJ.4.
>>
>> Kristian
>>
>> ________________________________________
>> Fra: proj-bounces at lists.maptools.org [proj-bounces at lists.maptools.org]
>> p&#229; vegne af stevejking [stevejking at talktalk.net]
>> Sendt: 13. oktober 2017 22:41
>> Til: proj at lists.maptools.org
>> Emne: Re: [Proj] Failed to initialize PROJ.4 with "..."
>>
>> Kristian,
>> Is that a Proj4 error code?
>>
>> The Proj4 codes seem more specific. My reference says code 6 is "effective
>> eccentricity = 1."
>>
>> Is it even a GDAL error code?
>>
>> Steve
>>
>>
>> Kristian Evers-2 wrote
>> > Chris,
>> >
>> > It would be beneficial if you could try to reproduce this problem just
>> > using PROJ.4 and a few simple coordinates. Either on the command line
>> with
>> > a call to cs2cs or by a small C program. I tried initialising the
>> > projection with a recent version of PROJ.4 without problems and I can't
>> > see any obvious problem in the proj string. It is likely that if this
>> > indeed is a bug in PROJ.4 that it has already been fixed.
>> >
>> > /Kristian
>> >
>> > ________________________________
>> > Fra:
>>
>> > proj-bounces at .maptools
>>
>> >  [
>>
>> > proj-bounces at .maptools
>>
>> > ] p? vegne af Chris Marsh [
>>
>> > chris.marsh@
>>
>> > ]
>> > Sendt: 13. oktober 2017 17:56
>> > Til:
>>
>> > proj at .maptools
>>
>> > Emne: [Proj] Failed to initialize PROJ.4 with "..."
>> >
>> > Hi,
>> >
>> > ...
>> >
>> > ERROR 6: Failed to initialize PROJ.4 with `+proj=aea +lat_1=20 +lat_2=60
>> > +lat_0=40 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0
>> > +units=m +no_defs'.
>> >
>> > ...Cheers
>> > Chris
>> >
>> >
>> >
>> > _______________________________________________
>> > Proj mailing list
>>
>> > Proj at .maptools
>>
>> > http://lists.maptools.org/mailman/listinfo/proj





From chris.marsh at usask.ca  Fri Oct 13 17:00:26 2017
From: chris.marsh at usask.ca (Chris Marsh)
Date: Fri, 13 Oct 2017 18:00:26 -0600
Subject: [Proj] Proj Digest, Vol 157, Issue 4
In-Reply-To: <25262732.4156.1507936623653@wamui-marley.atl.sa.earthlink.net>
References: <25262732.4156.1507936623653@wamui-marley.atl.sa.earthlink.net>
Message-ID: <CAFgDerHiQdx1KDRAwvy6dUh2KMwi_WUFzvfYkOkubwOvf+pTGg@mail.gmail.com>

Hi,

With +datum=wgs84 cs2cs does not work, regardless of the inclusion of +towgs

./cs2cs +proj=latlon +datum=WGS84 +to +proj=aea +lat_1=20 +lat_2=60
+lat_0=40 +lon_0=-96 +datum=wgs84 +units=m +no_defs
Using to definition: proj=aea lat_1=20 lat_2=60 lat_0=40 lon_0=-96
datum=wgs84 units=m no_defs
Rel. 4.9.3, 15 August 2016
<cs2cs>:
projection initialization failure
cause: unknown elliptical parameter name
program abnormally terminated

./cs2cs +proj=latlon +datum=WGS84 +to +proj=aea +lat_1=20 +lat_2=60
+lat_0=40 +lon_0=-96 +datum=wgs84 +units=m +no_defs +towgs84=0,0,0,0,0,0,0
Using to definition: proj=aea lat_1=20 lat_2=60 lat_0=40 lon_0=-96
datum=wgs84 units=m no_defs towgs84=0,0,0,0,0,0,0
Rel. 4.9.3, 15 August 2016
<cs2cs>:
projection initialization failure
cause: unknown elliptical parameter name
program abnormally terminated

Adding +towgs to the cs2cs works correctly:

./cs2cs +proj=latlon +datum=WGS84 +to +proj=aea +lat_1=20 +lat_2=60
+lat_0=40 +lon_0=-96 +ellps=GRS80 +units=m +no_defs +towgs84=0,0,0,0,0,0,0
-135.197151 60.52163
-2102114.41 2828965.44 0.00

Cheers
Chris


On 13 October 2017 at 17:17, Melita Kennedy <mkennedy2 at earthlink.net> wrote:

>
> Chris,
>
> Do you still get the error message if you change the output '+ellps=grs80'
> to '+datum=wgs84'? You also omitted the '+towgs84' parameter when you
> tested using cs2cs. The grs80 and wgs84 flattening are almost equal so I
> wonder if GDAL is doing some calculation connected to the '+towgs84'
> parameter using the grs80 and wgs84 ellipsoids incorrectly.
>
> Melita
>
> -----Original Message-----
>
> >Date: Fri, 13 Oct 2017 22:00:22 +0000
> >From: Chris Marsh <chris.marsh at usask.ca>
> >Subject: Re: [Proj] Failed to initialize PROJ.4 with "..."
> >To: PROJ.4 and general Projections Discussions
> >       <proj at lists.maptools.org>
> >
> >Hi,
> >
> >Thanks for the thoughts.
> >Yes ERROR 6 is the GDAL wrapper error.
> >
> >
> >On the computer that 'works':
> >cs2cs +proj=latlon +datum=WGS84 +to +proj=aea +lat_1=20 +lat_2=60
> +lat_0=40
> >+lon_0=-96 +ellps=GRS80 +units=m +no_defs
> >-135.197151 60.52163
> >-2102114.41 2828965.44 0.00
> >
> >On the computer that doesn't
> >
> >./cs2cs +proj=latlon +datum=WGS84 +to +proj=aea +lat_1=20 +lat_2=60
> >+lat_0=40 +lon_0=-96 +ellps=GRS80 +units=m +no_defs
> >-135.197151 60.52163
> >-2102114.41 2828965.44 0.00
> >
> >So that seems like that works....
> >
> >Would this point to GDAL being 100% the culprit?
> >
> >Cheers
> >Chris
> >
> >On 13 October 2017 at 21:23, Kristian Evers <kreve at sdfe.dk> wrote:
> >
> >> Chris,
> >>
> >> The "ERROR: 6" is GDAL. I am not sure if GDAL is forwarding the error
> code
> >> from PROJ.4, although I don't think so since PROJ.4 error codes are
> >> negative. This is why I want you to reproduce the problem just by using
> >> PROJ.4.
> >> Try running "cs2cs +proj=latlon +datum=WGS84 +to +proj=aea +lat_1=20
> >> +lat_2=60 +lat_0=40 +lon_0=-96 +ellps=GRS80 +units=m +no_defs" on the
> >> computer in question. If it fails the problem is definitely related to
> >> PROJ.4.
> >>
> >> Kristian
> >>
> >> ________________________________________
> >> Fra: proj-bounces at lists.maptools.org [proj-bounces at lists.maptools.org]
> >> p&#229; vegne af stevejking [stevejking at talktalk.net]
> >> Sendt: 13. oktober 2017 22:41
> >> Til: proj at lists.maptools.org
> >> Emne: Re: [Proj] Failed to initialize PROJ.4 with "..."
> >>
> >> Kristian,
> >> Is that a Proj4 error code?
> >>
> >> The Proj4 codes seem more specific. My reference says code 6 is
> "effective
> >> eccentricity = 1."
> >>
> >> Is it even a GDAL error code?
> >>
> >> Steve
> >>
> >>
> >> Kristian Evers-2 wrote
> >> > Chris,
> >> >
> >> > It would be beneficial if you could try to reproduce this problem just
> >> > using PROJ.4 and a few simple coordinates. Either on the command line
> >> with
> >> > a call to cs2cs or by a small C program. I tried initialising the
> >> > projection with a recent version of PROJ.4 without problems and I
> can't
> >> > see any obvious problem in the proj string. It is likely that if this
> >> > indeed is a bug in PROJ.4 that it has already been fixed.
> >> >
> >> > /Kristian
> >> >
> >> > ________________________________
> >> > Fra:
> >>
> >> > proj-bounces at .maptools
> >>
> >> >  [
> >>
> >> > proj-bounces at .maptools
> >>
> >> > ] p? vegne af Chris Marsh [
> >>
> >> > chris.marsh@
> >>
> >> > ]
> >> > Sendt: 13. oktober 2017 17:56
> >> > Til:
> >>
> >> > proj at .maptools
> >>
> >> > Emne: [Proj] Failed to initialize PROJ.4 with "..."
> >> >
> >> > Hi,
> >> >
> >> > ...
> >> >
> >> > ERROR 6: Failed to initialize PROJ.4 with `+proj=aea +lat_1=20
> +lat_2=60
> >> > +lat_0=40 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0
> >> > +units=m +no_defs'.
> >> >
> >> > ...Cheers
> >> > Chris
> >> >
> >> >
> >> >
> >> > _______________________________________________
> >> > Proj mailing list
> >>
> >> > Proj at .maptools
> >>
> >> > http://lists.maptools.org/mailman/listinfo/proj
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20171013/a732df80/attachment.html>

From david.grundberg at oryx.se  Thu Oct 19 01:26:48 2017
From: david.grundberg at oryx.se (David Grundberg)
Date: Thu, 19 Oct 2017 10:26:48 +0200
Subject: [Proj] How can I convert between cartesian space and WGS84?
Message-ID: <1ef0f867-5be2-6f4f-ec26-5f9ec1b426ec@oryx.se>

Hello,

I'd like to have a cartesian space, ideally in meters, axis-aligned with 
north/east/up, centered on a WGS84 position, so that I can transform 
between this cartesian space and WGS84 coordinates. I attempted to make 
a Mercator projection but quickly ran into problems. Just to illustrate, 
I tested with geocentric projection and known coordinates.

I tested it with coordinates for a track and it should be 100 meters 
between the points.

<https://kartor.eniro.se/?c=63.821347,20.321247&z=18&l=aerial&d={%22l%22:[[63.821477,20.321209,63.820758,20.322454,null,0]]}> 
or https://tinyurl.com/ybcxe3sb

$ printf "63.821477N 20.321209E\n63.820758N 20.322454E" | cs2cs -v 
+proj=latlong +ellps=WGS84 +datum=WGS84 +no_defs +to +proj=geocent 
+datum=WGS84 +to_meters
# ---- From Coordinate System ----
#Lat/long (Geodetic alias)
#
# +proj=latlong +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0
#--- following specified but NOT used
# +ellps=WGS84
# ---- To Coordinate System ----
#Geocentric
#
# +proj=geocent +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
#--- following specified but NOT used
# +to_meters
2639773.20    5369807.65 2201077.86
2639819.46    5369731.56 2201207.11
$ octave
octave:1> norm([2639773.20 5369807.65 2201077.86] - [2639819.46 
5369731.56 2201207.11])
ans =  156.96 # Should be about 100.7 meters!
octave:2>
$

Any advice appreciated!
David


From jagoncal at gmail.com  Thu Oct 19 02:46:02 2017
From: jagoncal at gmail.com (=?UTF-8?Q?Jose_Gon=C3=A7alves?=)
Date: Thu, 19 Oct 2017 10:46:02 +0100
Subject: [Proj] How can I convert between cartesian space and WGS84?
In-Reply-To: <1ef0f867-5be2-6f4f-ec26-5f9ec1b426ec@oryx.se>
References: <1ef0f867-5be2-6f4f-ec26-5f9ec1b426ec@oryx.se>
Message-ID: <CALHLaOQ9ekpnjMgGN=h29P+66UUntpnt7h1wF18SsmC-kbxOcA@mail.gmail.com>

Hi
You must have longitude first, or use option -r in cs2cs, to reverse the
order.
Regards

José Gonçalves



2017-10-19 9:26 GMT+01:00 David Grundberg <david.grundberg at oryx.se>:

> Hello,
>
> I'd like to have a cartesian space, ideally in meters, axis-aligned with
> north/east/up, centered on a WGS84 position, so that I can transform
> between this cartesian space and WGS84 coordinates. I attempted to make
> a Mercator projection but quickly ran into problems. Just to illustrate,
> I tested with geocentric projection and known coordinates.
>
> I tested it with coordinates for a track and it should be 100 meters
> between the points.
>
> <https://kartor.eniro.se/?c=63.821347,20.321247&z=18&l=
> aerial&d={%22l%22:[[63.821477,20.321209,63.820758,20.322454,null,0]]}>
> or https://tinyurl.com/ybcxe3sb
>
> $ printf "63.821477N 20.321209E\n63.820758N 20.322454E" | cs2cs -v
> +proj=latlong +ellps=WGS84 +datum=WGS84 +no_defs +to +proj=geocent
> +datum=WGS84 +to_meters
> # ---- From Coordinate System ----
> #Lat/long (Geodetic alias)
> #
> # +proj=latlong +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0
> #--- following specified but NOT used
> # +ellps=WGS84
> # ---- To Coordinate System ----
> #Geocentric
> #
> # +proj=geocent +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
> #--- following specified but NOT used
> # +to_meters
> 2639773.20    5369807.65 2201077.86
> 2639819.46    5369731.56 2201207.11
> $ octave
> octave:1> norm([2639773.20 5369807.65 2201077.86] - [2639819.46
> 5369731.56 2201207.11])
> ans =  156.96 # Should be about 100.7 meters!
> octave:2>
> $
>
> Any advice appreciated!
> David
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20171019/9f4b3678/attachment.html>

From david.grundberg at oryx.se  Thu Oct 19 03:01:42 2017
From: david.grundberg at oryx.se (David Grundberg)
Date: Thu, 19 Oct 2017 12:01:42 +0200
Subject: [Proj] How can I convert between cartesian space and WGS84?
In-Reply-To: <CALHLaOQ9ekpnjMgGN=h29P+66UUntpnt7h1wF18SsmC-kbxOcA@mail.gmail.com>
References: <1ef0f867-5be2-6f4f-ec26-5f9ec1b426ec@oryx.se>
	<CALHLaOQ9ekpnjMgGN=h29P+66UUntpnt7h1wF18SsmC-kbxOcA@mail.gmail.com>
Message-ID: <e2eab630-e0bd-3293-840b-1aba7a2cb036@oryx.se>

Ah, thanks!

On 10/19/2017 11:46 AM, Jose Gonçalves wrote:
> Hi
> You must have longitude first, or use option -r in cs2cs, to reverse 
> the order.
> Regards
>
> José Gonçalves
>
>
>
> 2017-10-19 9:26 GMT+01:00 David Grundberg <david.grundberg at oryx.se 
> <mailto:david.grundberg at oryx.se>>:
>
>     Hello,
>
>     I'd like to have a cartesian space, ideally in meters,
>     axis-aligned with
>     north/east/up, centered on a WGS84 position, so that I can transform
>     between this cartesian space and WGS84 coordinates. I attempted to
>     make
>     a Mercator projection but quickly ran into problems. Just to
>     illustrate,
>     I tested with geocentric projection and known coordinates.
>
>     I tested it with coordinates for a track and it should be 100 meters
>     between the points.
>
>     <https://kartor.eniro.se/?c=63.821347,20.321247&z=18&l=aerial&d={%22l%22:[[63.821477,20.321209,63.820758,20.322454,null,0]]}
>     <https://kartor.eniro.se/?c=63.821347,20.321247&z=18&l=aerial&d=%7B%22l%22:[[63.821477,20.321209,63.820758,20.322454,null,0]]%7D>>
>     or https://tinyurl.com/ybcxe3sb
>
>     $ printf "63.821477N 20.321209E\n63.820758N 20.322454E" | cs2cs -v
>     +proj=latlong +ellps=WGS84 +datum=WGS84 +no_defs +to +proj=geocent
>     +datum=WGS84 +to_meters
>     # ---- From Coordinate System ----
>     #Lat/long (Geodetic alias)
>     #
>     # +proj=latlong +ellps=WGS84 +datum=WGS84 +no_defs +towgs84=0,0,0
>     #--- following specified but NOT used
>     # +ellps=WGS84
>     # ---- To Coordinate System ----
>     #Geocentric
>     #
>     # +proj=geocent +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
>     #--- following specified but NOT used
>     # +to_meters
>     2639773.20    5369807.65 2201077.86
>     2639819.46    5369731.56 2201207.11
>     $ octave
>     octave:1> norm([2639773.20 5369807.65 2201077.86] - [2639819.46
>     5369731.56 2201207.11])
>     ans =  156.96 # Should be about 100.7 meters!
>     octave:2>
>     $
>
>     Any advice appreciated!
>     David
>     _______________________________________________
>     Proj mailing list
>     Proj at lists.maptools.org <mailto:Proj at lists.maptools.org>
>     http://lists.maptools.org/mailman/listinfo/proj
>     <http://lists.maptools.org/mailman/listinfo/proj>
>
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


-- 

David Grundberg
Developer, System Development

Phone: +46 90 348 49 28
E-mail: david.grundberg at oryx.se <mailto:david.grundberg at oryx.se>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20171019/b1bdf3dc/attachment.html>

From roger.oberholtzer at gmail.com  Fri Oct 27 02:45:13 2017
From: roger.oberholtzer at gmail.com (Roger Oberholtzer)
Date: Fri, 27 Oct 2017 11:45:13 +0200
Subject: [Proj] ABI version numbers
Message-ID: <CANkOqwMjR0_eViv8awBV+41S6vFXLCqBun6Pye2E8pm+AvwAzA@mail.gmail.com>

Is there a document that describes which proj releases correspond to
which ABI version? For example, something that tells that 4.8.0 is ABI
9, and 4.9.3 is ABI 12. And so on?

-- 
Roger Oberholtzer


From kreve at sdfe.dk  Fri Oct 27 03:05:21 2017
From: kreve at sdfe.dk (Kristian Evers)
Date: Fri, 27 Oct 2017 10:05:21 +0000
Subject: [Proj] ABI version numbers
In-Reply-To: <CANkOqwMjR0_eViv8awBV+41S6vFXLCqBun6Pye2E8pm+AvwAzA@mail.gmail.com>
References: <CANkOqwMjR0_eViv8awBV+41S6vFXLCqBun6Pye2E8pm+AvwAzA@mail.gmail.com>
Message-ID: <2E885BB293AF0448A0181138489E9A0EAEAA17D7@S000014.PROD.SITAD.DK>

Not that I am aware of. There is this https://github.com/OSGeo/proj.4/issues/501 though, which gives you some idea of how the binaries how changed over time.

If you volunteer to create an overview of the ABI versions I am sure we can find somewhere in the docs to put it :-)

/Kristian

-----Oprindelig meddelelse-----
Fra: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] På vegne af Roger Oberholtzer
Sendt: 27. oktober 2017 11:45
Til: PROJ.4 and general Projections Discussions <proj at lists.maptools.org>
Emne: [Proj] ABI version numbers

Is there a document that describes which proj releases correspond to
which ABI version? For example, something that tells that 4.8.0 is ABI
9, and 4.9.3 is ABI 12. And so on?

-- 
Roger Oberholtzer
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From roger.oberholtzer at gmail.com  Fri Oct 27 03:37:37 2017
From: roger.oberholtzer at gmail.com (Roger Oberholtzer)
Date: Fri, 27 Oct 2017 12:37:37 +0200
Subject: [Proj] ABI version numbers
In-Reply-To: <2E885BB293AF0448A0181138489E9A0EAEAA17D7@S000014.PROD.SITAD.DK>
References: <CANkOqwMjR0_eViv8awBV+41S6vFXLCqBun6Pye2E8pm+AvwAzA@mail.gmail.com>
	<2E885BB293AF0448A0181138489E9A0EAEAA17D7@S000014.PROD.SITAD.DK>
Message-ID: <CANkOqwOLOVwtGHOzGWyr=dOc1iaE_V7PBV0uT1d5Z=4oRTi44Q@mail.gmail.com>

On Fri, Oct 27, 2017 at 12:05 PM, Kristian Evers <kreve at sdfe.dk> wrote:
> Not that I am aware of. There is this https://github.com/OSGeo/proj.4/issues/501 though, which gives you some idea of how the binaries how changed over time.
>
> If you volunteer to create an overview of the ABI versions I am sure we can find somewhere in the docs to put it :-)

The reason I ask is that openSUSE use these numbers when naming the
package. The numbers do come from the build:

4.8.0 -> libproj.so.0.7.0
4.9.2 -> libproj.so.9.1.0
4.9.3 -> libproj.so.12.0.0

And so on. So they name the packages libproj0-4.8.0, libproj9-4.9.2,
libproj12-4.9.3.

I accused them of randomly generating the 0, 9 and 12. They said - no
- it comes from the library itself. Which it indeed does seem to do.
So I thought I would see if this is recorded somewhere.

-- 
Roger Oberholtzer


From sebastic at xs4all.nl  Fri Oct 27 15:15:10 2017
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Sat, 28 Oct 2017 00:15:10 +0200
Subject: [Proj] ABI version numbers
In-Reply-To: <CANkOqwOLOVwtGHOzGWyr=dOc1iaE_V7PBV0uT1d5Z=4oRTi44Q@mail.gmail.com>
References: <CANkOqwMjR0_eViv8awBV+41S6vFXLCqBun6Pye2E8pm+AvwAzA@mail.gmail.com>
	<2E885BB293AF0448A0181138489E9A0EAEAA17D7@S000014.PROD.SITAD.DK>
	<CANkOqwOLOVwtGHOzGWyr=dOc1iaE_V7PBV0uT1d5Z=4oRTi44Q@mail.gmail.com>
Message-ID: <ab37f0ff-9f7a-90d2-c56f-935e28f5ffe0@xs4all.nl>

On 10/27/2017 12:37 PM, Roger Oberholtzer wrote:
> On Fri, Oct 27, 2017 at 12:05 PM, Kristian Evers <kreve at sdfe.dk> wrote:
>> Not that I am aware of. There is this https://github.com/OSGeo/proj.4/issues/501 though, which gives you some idea of how the binaries how changed over time.
>>
>> If you volunteer to create an overview of the ABI versions I am sure we can find somewhere in the docs to put it :-)
> 
> The reason I ask is that openSUSE use these numbers when naming the
> package. The numbers do come from the build:
> 
> 4.8.0 -> libproj.so.0.7.0
> 4.9.2 -> libproj.so.9.1.0
> 4.9.3 -> libproj.so.12.0.0
> 
> And so on. So they name the packages libproj0-4.8.0, libproj9-4.9.2,
> libproj12-4.9.3.
> 
> I accused them of randomly generating the 0, 9 and 12. They said - no
> - it comes from the library itself. Which it indeed does seem to do.
> So I thought I would see if this is recorded somewhere.

The SOVERSION is calculated using the libtool -version-info arguments.

 https://www.gnu.org/software/libtool/manual/html_node/Updating-version-info.html

The ABI tracker has an overview of the SOVERSION for past releases:

 https://abi-laboratory.pro/tracker/timeline/proj/

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From dmitrymefed at gmail.com  Mon Oct 30 23:50:08 2017
From: dmitrymefed at gmail.com (Dmitry Mefed)
Date: Tue, 31 Oct 2017 09:50:08 +0300
Subject: [Proj] Grown error if re-projecting from 4269 to LCC (2285) and
 backward multiple times
In-Reply-To: <CALjJ2jNWD80w=kDRj3KJnXy9cJZSuF4raXiKOcpvcVEmJEJGGA@mail.gmail.com>
References: <CALjJ2jNWD80w=kDRj3KJnXy9cJZSuF4raXiKOcpvcVEmJEJGGA@mail.gmail.com>
Message-ID: <CALjJ2jOy5BSiD-fN86HGMW1OYunCcvoNeaMm4vha6SCtvoV5mA@mail.gmail.com>

Hi,


Our software stores the data with EPSG 4269 and present to the User in a
local projected CRS, EPSG 2285 in examples described below. In case if an
entity is modified on the UI we need to push the changes back. In that
scenario we have to do

1.       4269 -> 2285 projection,

2.       then User modifies the entity (in 2285 CRS),

3.       In order to store the changes, we do 2285 -> 4269 projection

4.       and next time the entity is requested we do 4269 -> 2285
projection again.

The problem is that proj4 does not produce same results in step 2 and 4. It
would be expected behavior as 2285 provides more precision due to used
units US-ft, in comparison to 4269 which units are degrees. But the real
issue for us is that subsequent transformations between 2285 -> 4269 ->
2285… produces growing error. Please consider the following output of cs2cs
program, (in parallel I did inverse projection to obtain coordinates in
EPSG 4269):

C:\PROJ\bin>cs2cs.exe -v +init=epsg:2285 +to +init=epsg:4269 -f %.16f

pj_open_lib(epsg): call fopen(C:\proj\share\epsg) - succeeded



pj_open_lib(epsg): call fopen(C:\proj\share\epsg) - succeeded



# ---- From Coordinate System ----

#Lambert Conformal Conic

#       Conic, Sph&Ell

#       lat_1= and lat_2= or lat_0

# +init=epsg:2285 +proj=lcc +lat_1=48.73333333333333 +lat_2=47.5 +lat_0=47

# +lon_0=-120.8333333333333 +x_0=500000.0001016001 +y_0=0 +datum=NAD83

# +units=us-ft +no_defs +ellps=GRS80 +towgs84=0,0,0

# ---- To Coordinate System ----

#Lat/long (Geodetic alias)

#

# +init=epsg:4269 +proj=longlat +datum=NAD83 +no_defs +ellps=GRS80

# +towgs84=0,0,0

2196293.3184066000 643350.39301622100

-118.5293900000000300   48.7408309999860520 0.0000000000000000

2196293.3184067495000000        643350.3930111383100000

-118.5293900000000300   48.7408309999721180 0.0000000000000000

2196293.3184069018000000        643350.3930060574800000

-118.5293900000000300   48.7408309999581850 0.0000000000000000

2196293.3184070541000000        643350.3930009742000000

-118.5293900000000300   48.7408309999442440 0.0000000000000000

2196293.3184072063000000        643350.3929958911600000

-118.5293900000000300   48.7408309999302960 0.0000000000000000

2196293.3184073586000000        643350.3929908055600000

-118.5293900000000300   48.7408309999163550 0.0000000000000000

2196293.3184075109000000        643350.3929857177400000

-118.5293900000000300   48.7408309999023930 0.0000000000000000

2196293.3184076636000000        643350.3929806276000000

-118.5293900000000300   48.7408309998884450 0.0000000000000000



*Simple Excel based analysis shows the following deltas on each step:*

X

dX

Y

dY

0,31840660000



0,39301622100



0,31840674950

0,00000014950

0,39301113831

-0,00000508269

0,31840690180

0,00000015230

0,39300605748

-0,00000508083

0,31840705410

0,00000015230

0,39300097420

-0,00000508328

0,31840720630

0,00000015220

0,39299589116

-0,00000508304

0,31840735860

0,00000015230

0,39299080556

-0,00000508560

0,31840751090

0,00000015230

0,39298571774

-0,00000508782

0,31840766360

0,00000015270

0,39298062760

-0,00000509014



I also tried other LCC CRSs the picture is similar. And I also tried
Mercator projection EPSG 3857 it does not seem to have such issue, after
full cycle of projections, it produces constant results in both directions.

Please let me know if it is known issue or it is WAD (Works As Designed) or
if I can do something with this.


PS

this is the second window output:

C:\PROJ\bin>cs2cs.exe -v +init=epsg:4269 +to +init=epsg:2285 -f %.16f
# ---- From Coordinate System ----
#Lat/long (Geodetic alias)
#
# +init=epsg:4269 +proj=longlat +datum=NAD83 +no_defs +ellps=GRS80
# +towgs84=0,0,0
# ---- To Coordinate System ----
#Lambert Conformal Conic
#       Conic, Sph&Ell
#       lat_1= and lat_2= or lat_0
# +init=epsg:2285 +proj=lcc +lat_1=48.73333333333333 +lat_2=47.5 +lat_0=47
# +lon_0=-120.8333333333333 +x_0=500000.0001016001 +y_0=0 +datum=NAD83
# +units=us-ft +no_defs +ellps=GRS80 +towgs84=0,0,0
-118.5293900000000300   48.7408309999860520
2196293.3184067495000000        643350.3930111383100000 0.0000000000000000
-118.5293900000000300   48.7408309999721180
2196293.3184069018000000        643350.3930060574800000 0.0000000000000000
-118.5293900000000300   48.7408309999581850
2196293.3184070541000000        643350.3930009742000000 0.0000000000000000
-118.5293900000000300   48.7408309999442440
2196293.3184072063000000        643350.3929958911600000 0.0000000000000000
        -118.5293900000000300   48.7408309999302960
2196293.3184073586000000        643350.3929908055600000 0.0000000000000000
-118.5293900000000300   48.7408309999163550
2196293.3184075109000000        643350.3929857177400000 0.0000000000000000
-118.5293900000000300   48.7408309999023930
2196293.3184076636000000        643350.3929806276000000 0.0000000000000000


Thanks,

-Dmitry Mefed
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20171031/e406a14e/attachment.html>

From knudsen.thomas at gmail.com  Tue Oct 31 05:59:02 2017
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Tue, 31 Oct 2017 13:59:02 +0100
Subject: [Proj] Grown error if re-projecting from 4269 to LCC (2285) and
 backward multiple times
In-Reply-To: <CALjJ2jOy5BSiD-fN86HGMW1OYunCcvoNeaMm4vha6SCtvoV5mA@mail.gmail.com>
References: <CALjJ2jNWD80w=kDRj3KJnXy9cJZSuF4raXiKOcpvcVEmJEJGGA@mail.gmail.com>
	<CALjJ2jOy5BSiD-fN86HGMW1OYunCcvoNeaMm4vha6SCtvoV5mA@mail.gmail.com>
Message-ID: <CAH0YoENYS2KeP3Wrc1jrxnP2TN4jVXq1sg83FRDCz7XjJhZR+A@mail.gmail.com>

Thanks for an admirably complete question, with sufficient information
to meaningfully attempt to answer it.

Unfortunately, my answer will probably disappoint you.

After 7 iterations your deviation from the origin is less than a micrometre
in X and less than one tenth of a millimetre in Y.

Since PROJ.4 uses numerical, not analytical, mathematics, and since the
resolution is limited by the mantissa size of IEEE-754 64 bit doubles, the
roundtrips will never (for a rather all-encompassing value of never) be
exact.
Typically, they will converge after a few hundred iterations, after which
the
deviation will cease to grow overall, but they will still not be exact.

To me, it is slightly surprising that you get exact roundtrips for mercator,
although the ellipsoidal mercator projection is somewhat simpler than
ellipsoidal LCC, so it will probably be more probable.

So my overall message is that you should not expect exact roundtrips.
Another thing is that it surprises me you need exact roundtrips after
an operation that involves direct user interaction. Which human
interaction is it that touches up data at the micrometer level, and needs
exact replication? If you could tell a bit about this it might be easier to
see potential workarounds.





2017-10-31 7:50 GMT+01:00 Dmitry Mefed <dmitrymefed at gmail.com>:

> Hi,
>
>
> Our software stores the data with EPSG 4269 and present to the User in a
> local projected CRS, EPSG 2285 in examples described below. In case if an
> entity is modified on the UI we need to push the changes back. In that
> scenario we have to do
>
> 1.       4269 -> 2285 projection,
>
> 2.       then User modifies the entity (in 2285 CRS),
>
> 3.       In order to store the changes, we do 2285 -> 4269 projection
>
> 4.       and next time the entity is requested we do 4269 -> 2285
> projection again.
>
> The problem is that proj4 does not produce same results in step 2 and 4.
> It would be expected behavior as 2285 provides more precision due to used
> units US-ft, in comparison to 4269 which units are degrees. But the real
> issue for us is that subsequent transformations between 2285 -> 4269 ->
> 2285… produces growing error. Please consider the following output of cs2cs
> program, (in parallel I did inverse projection to obtain coordinates in
> EPSG 4269):
>
> C:\PROJ\bin>cs2cs.exe -v +init=epsg:2285 +to +init=epsg:4269 -f %.16f
>
> pj_open_lib(epsg): call fopen(C:\proj\share\epsg) - succeeded
>
>
>
> pj_open_lib(epsg): call fopen(C:\proj\share\epsg) - succeeded
>
>
>
> # ---- From Coordinate System ----
>
> #Lambert Conformal Conic
>
> #       Conic, Sph&Ell
>
> #       lat_1= and lat_2= or lat_0
>
> # +init=epsg:2285 +proj=lcc +lat_1=48.73333333333333 +lat_2=47.5 +lat_0=47
>
> # +lon_0=-120.8333333333333 +x_0=500000.0001016001 +y_0=0 +datum=NAD83
>
> # +units=us-ft +no_defs +ellps=GRS80 +towgs84=0,0,0
>
> # ---- To Coordinate System ----
>
> #Lat/long (Geodetic alias)
>
> #
>
> # +init=epsg:4269 +proj=longlat +datum=NAD83 +no_defs +ellps=GRS80
>
> # +towgs84=0,0,0
>
> 2196293.3184066000 <(318)%20406-6000> 643350.39301622100
>
> -118.5293900000000300   48.7408309999860520 0.0000000000000000
>
> 2196293.3184067495000000        643350.3930111383100000
>
> -118.5293900000000300   48.7408309999721180 0.0000000000000000
>
> 2196293.3184069018000000        643350.3930060574800000
>
> -118.5293900000000300   48.7408309999581850 0.0000000000000000
>
> 2196293.3184070541000000        643350.3930009742000000
>
> -118.5293900000000300   48.7408309999442440 0.0000000000000000
>
> 2196293.3184072063000000        643350.3929958911600000
>
> -118.5293900000000300   48.7408309999302960 0.0000000000000000
>
> 2196293.3184073586000000        643350.3929908055600000
>
> -118.5293900000000300   48.7408309999163550 0.0000000000000000
>
> 2196293.3184075109000000        643350.3929857177400000
>
> -118.5293900000000300   48.7408309999023930 0.0000000000000000
>
> 2196293.3184076636000000        643350.3929806276000000
>
> -118.5293900000000300   48.7408309998884450 0.0000000000000000
>
>
>
> *Simple Excel based analysis shows the following deltas on each step:*
>
> X
>
> dX
>
> Y
>
> dY
>
> 0,31840660000
>
>
>
> 0,39301622100
>
>
>
> 0,31840674950
>
> 0,00000014950
>
> 0,39301113831
>
> -0,00000508269
>
> 0,31840690180
>
> 0,00000015230
>
> 0,39300605748
>
> -0,00000508083
>
> 0,31840705410
>
> 0,00000015230
>
> 0,39300097420
>
> -0,00000508328
>
> 0,31840720630
>
> 0,00000015220
>
> 0,39299589116
>
> -0,00000508304
>
> 0,31840735860
>
> 0,00000015230
>
> 0,39299080556
>
> -0,00000508560
>
> 0,31840751090
>
> 0,00000015230
>
> 0,39298571774
>
> -0,00000508782
>
> 0,31840766360
>
> 0,00000015270
>
> 0,39298062760
>
> -0,00000509014
>
>
>
> I also tried other LCC CRSs the picture is similar. And I also tried
> Mercator projection EPSG 3857 it does not seem to have such issue, after
> full cycle of projections, it produces constant results in both directions.
>
> Please let me know if it is known issue or it is WAD (Works As Designed)
> or if I can do something with this.
>
>
> PS
>
> this is the second window output:
>
> C:\PROJ\bin>cs2cs.exe -v +init=epsg:4269 +to +init=epsg:2285 -f %.16f
> # ---- From Coordinate System ----
> #Lat/long (Geodetic alias)
> #
> # +init=epsg:4269 +proj=longlat +datum=NAD83 +no_defs +ellps=GRS80
> # +towgs84=0,0,0
> # ---- To Coordinate System ----
> #Lambert Conformal Conic
> #       Conic, Sph&Ell
> #       lat_1= and lat_2= or lat_0
> # +init=epsg:2285 +proj=lcc +lat_1=48.73333333333333 +lat_2=47.5 +lat_0=47
> # +lon_0=-120.8333333333333 +x_0=500000.0001016001 +y_0=0 +datum=NAD83
> # +units=us-ft +no_defs +ellps=GRS80 +towgs84=0,0,0
> -118.5293900000000300   48.7408309999860520
> 2196293.3184067495000000        643350.3930111383100000 0.0000000000000000
> -118.5293900000000300   48.7408309999721180
> 2196293.3184069018000000        643350.3930060574800000 0.0000000000000000
> -118.5293900000000300   48.7408309999581850
> 2196293.3184070541000000        643350.3930009742000000 0.0000000000000000
> -118.5293900000000300   48.7408309999442440
> 2196293.3184072063000000        643350.3929958911600000 0.0000000000000000
>         -118.5293900000000300   48.7408309999302960
> 2196293.3184073586000000        643350.3929908055600000 0.0000000000000000
> -118.5293900000000300   48.7408309999163550
> 2196293.3184075109000000        643350.3929857177400000 0.0000000000000000
> -118.5293900000000300   48.7408309999023930
> 2196293.3184076636000000        643350.3929806276000000 0.0000000000000000
>
>
> Thanks,
>
> -Dmitry Mefed
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20171031/da30f417/attachment.html>

From vanadovv at hetnet.nl  Tue Oct 31 13:11:45 2017
From: vanadovv at hetnet.nl (vanadovv at hetnet.nl)
Date: Tue, 31 Oct 2017 21:11:45 +0100 (CET)
Subject: [Proj] Grown error if re-projecting from 4269 to LCC (2285) and
 backward multiple times
In-Reply-To: <CALjJ2jOy5BSiD-fN86HGMW1OYunCcvoNeaMm4vha6SCtvoV5mA@mail.gmail.com>
References: <CALjJ2jNWD80w=kDRj3KJnXy9cJZSuF4raXiKOcpvcVEmJEJGGA@mail.gmail.com>
	<CALjJ2jOy5BSiD-fN86HGMW1OYunCcvoNeaMm4vha6SCtvoV5mA@mail.gmail.com>
Message-ID: <24235513.30018.1509480705787.JavaMail.defaultUser@defaultHost>

Hi,
With my independent software, using the EPSG Guidance Note 7-2 formulae, I arrive for this problem at a difference of 9.3e-10 m in the easting and 1.7e-9 m in the northing for the first round-trip calculation.
Thirty years ago I would expect that with an accuracy of merely around 1e-7 someone could have calculated things with single instead of double precision.
Nowadays I could expect fewer iteration steps or a looser iteration stopping criterion, or accuracy problems with transcendental functions (sin, cos, atan, log etc.), which are not part of PROJ.
Greetings,
Oscar van Vlijmen
----Origineel Bericht----
Van : dmitrymefed at gmail.com
Datum : 31/10/2017 07:50
Aan : proj at lists.maptools.org
Onderwerp : Re: [Proj] Grown error if re-projecting from 4269 to LCC (2285) and backward multiple times
 
Hi,
 
 
Our software stores the data with EPSG 4269 and present to the User in a local projected CRS, EPSG 2285 in examples described below. In case if an entity is modified on the UI we need to push the changes back. In that scenario we have to do 
 
1.       4269 -> 2285 projection, 
 
2.       then User modifies the entity (in 2285 CRS), 
 
3.       In order to store the changes, we do 2285 -> 4269 projection 
 
4.       and next time the entity is requested we do 4269 -> 2285 projection again.
 
The problem is that proj4 does not produce same results in step 2 and 4. It would be expected behavior as 2285 provides more precision due to used units US-ft, in comparison to 4269 which units are degrees. But the real issue for us is that subsequent transformations between 2285 -> 4269 -> 2285… produces growing error. Please consider the following output of cs2cs program, (in parallel I did inverse projection to obtain coordinates in EPSG 4269):
 
C:\PROJ\bin>cs2cs.exe -v +init=epsg:2285 +to +init=epsg:4269 -f %.16f
 
 
pj_open_lib(epsg): call fopen(C:\proj\share\epsg) - succeeded
 
 
 
 
 
pj_open_lib(epsg): call fopen(C:\proj\share\epsg) - succeeded
 
 
 
 
 
# ---- From Coordinate System ----
 
 
#Lambert Conformal Conic
 
 
#       Conic, Sph&Ell
 
 
#       lat_1= and lat_2= or lat_0
 
 
# +init=epsg:2285 +proj=lcc +lat_1=48.73333333333333 +lat_2=47.5 +lat_0=47
 
 
# +lon_0=-120.8333333333333 +x_0=500000.0001016001 +y_0=0 +datum=NAD83
 
 
# +units=us-ft +no_defs +ellps=GRS80 +towgs84=0,0,0
 
 
# ---- To Coordinate System ----
 
 
#Lat/long (Geodetic alias)
 
 
#
 
 
# +init=epsg:4269 +proj=longlat +datum=NAD83 +no_defs +ellps=GRS80
 
 
# +towgs84=0,0,0
 
 
2196293.3184066000 643350.39301622100
 
 
-118.5293900000000300   48.7408309999860520 0.0000000000000000
 
 
2196293.3184067495000000      
       643350.3930111383100000
 
 
-118.5293900000000300   48.7408309999721180 0.0000000000000000
 
 
2196293.3184069018000000      
       643350.3930060574800000
 
 
-118.5293900000000300   48.7408309999581850 0.0000000000000000
 
 
2196293.3184070541000000      
       643350.3930009742000000
 
 
-118.5293900000000300   48.7408309999442440 0.0000000000000000
 
 
2196293.3184072063000000      
       643350.3929958911600000
 
 
-118.5293900000000300   48.7408309999302960 0.0000000000000000
 
 
2196293.3184073586000000      
       643350.3929908055600000
 
 
-118.5293900000000300   48.7408309999163550 0.0000000000000000
 
 
2196293.3184075109000000      
       643350.3929857177400000
 
 
-118.5293900000000300   48.7408309999023930 0.0000000000000000
 
 
2196293.3184076636000000      
       643350.3929806276000000
 
 
-118.5293900000000300   48.7408309998884450 0.0000000000000000
 
 
ETC. ETC.
 
Thanks,
 
-Dmitry Mefed
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20171031/150e088d/attachment.html>

From knudsen.thomas at gmail.com  Tue Oct 31 23:58:16 2017
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Wed, 1 Nov 2017 07:58:16 +0100
Subject: [Proj] Grown error if re-projecting from 4269 to LCC (2285) and
 backward multiple times
In-Reply-To: <24235513.30018.1509480705787.JavaMail.defaultUser@defaultHost>
References: <CALjJ2jNWD80w=kDRj3KJnXy9cJZSuF4raXiKOcpvcVEmJEJGGA@mail.gmail.com>
	<CALjJ2jOy5BSiD-fN86HGMW1OYunCcvoNeaMm4vha6SCtvoV5mA@mail.gmail.com>
	<24235513.30018.1509480705787.JavaMail.defaultUser@defaultHost>
Message-ID: <CAH0YoEPKMePj-yc=+aVOb9BLJ5ZsJ448v4x+4aU9wEqeBgyC7Q@mail.gmail.com>

Oscar,

I certainly agree that the deviation is quite high - my comment was more
related
to the expection of exact roundtrips, which I find unrealistic.

Nevertheless, looking into the PROJ.4 code, I see there is an alternative
implementation of LCC, called LCCA, which I had forgotten about, which
actually seems to roundtrip exactly.

In the master branch of PROJ.4, over at https://github.com/OSGeo/proj.4,
and comming in the next release, there is a tool "gie" for doing (a.o.)
roundtrip tests. It is still lacking in docs, but I think you can follow
this example:

With this input file:

$ cat lcc-lcca.gie

BEGIN

-------------------------------------------------------------------------------
operation +proj=lcc +lat_1=48.73333333333333 +lat_2=47.5 \
                    +lat_0=47  +lon_0=-120.8333333333333 \
                    +x_0=500000.0001016001 +y_0=0        \
                    +units=us-ft +ellps=GRS80 +towgs84=0,0,0  +no_defs
-------------------------------------------------------------------------------
tolerance   0.0010 mm
accept     -118.5293900000000300   48.7408309999860520
roundtrip   1000


-------------------------------------------------------------------------------
operation +proj=lcca +lat_1=48.73333333333333 +lat_2=47.5 \
                     +lat_0=47  +lon_0=-120.8333333333333 \
                     +x_0=500000.0001016001 +y_0=0        \
                     +units=us-ft +ellps=GRS80 +towgs84=0,0,0  +no_defs
-------------------------------------------------------------------------------
tolerance   0.0 mm
accept     -118.5293900000000300   48.7408309999860520
roundtrip   1000
END

I get this output:

$ gie lcc-lcca.gie

-------------------------------------------------------------------------------
Reading file '..\..\..\proj\lcc-lcca.gie'
-------------------------------------------------------------------------------
+proj=lcc +lat_1=48.73333333333333 +lat_2=47.5 +lat_0=47  +lon_0=-120....
-------------------------------------------------------------------------------
     FAILURE in lcc-lcca.gie(11):
     roundtrip deviation: 1.550 mm, expected: 0.001 mm
-------------------------------------------------------------------------------
total:  1 tests succeeded,   1 tests FAILED!
-------------------------------------------------------------------------------

i.e. lcca roundtrips exactly, while lcc diverges heavily.

So Dmitry: This seems to be your workaround - define your projection using
lcca,
rather than letting the epsg-list select lcc for you.

/Thomas


2017-10-31 21:11 GMT+01:00 vanadovv at hetnet.nl <vanadovv at hetnet.nl>:

> Hi,
>
> With my independent software, using the EPSG Guidance Note 7-2 formulae, I
> arrive for this problem at a difference of 9.3e-10 m in the easting and
> 1.7e-9 m in the northing for the first round-trip calculation.
>
> Thirty years ago I would expect that with an accuracy of merely around
> 1e-7 someone could have calculated things with single instead of double
> precision.
> Nowadays I could expect fewer iteration steps or a looser iteration
> stopping criterion, or accuracy problems with transcendental functions
> (sin, cos, atan, log etc.), which are not part of PROJ.
>
> Greetings,
> Oscar van Vlijmen
>
>
> ----Origineel Bericht----
> Van : dmitrymefed at gmail.com
> Datum : 31/10/2017 07:50
> Aan : proj at lists.maptools.org
> Onderwerp : Re: [Proj] Grown error if re-projecting from 4269 to LCC
> (2285) and backward multiple times
>
> Hi,
>
>
> Our software stores the data with EPSG 4269 and present to the User in a
> local projected CRS, EPSG 2285 in examples described below. In case if an
> entity is modified on the UI we need to push the changes back. In that
> scenario we have to do
>
> 1.       4269 -> 2285 projection,
>
> 2.       then User modifies the entity (in 2285 CRS),
>
> 3.       In order to store the changes, we do 2285 -> 4269 projection
>
> 4.       and next time the entity is requested we do 4269 -> 2285
> projection again.
>
> The problem is that proj4 does not produce same results in step 2 and 4.
> It would be expected behavior as 2285 provides more precision due to used
> units US-ft, in comparison to 4269 which units are degrees. But the real
> issue for us is that subsequent transformations between 2285 -> 4269 ->
> 2285… produces growing error. Please consider the following output of cs2cs
> program, (in parallel I did inverse projection to obtain coordinates in
> EPSG 4269):
>
> C:\PROJ\bin>cs2cs.exe -v +init=epsg:2285 +to +init=epsg:4269 -f %.16f
>
> pj_open_lib(epsg): call fopen(C:\proj\share\epsg) - succeeded
>
>
>
> pj_open_lib(epsg): call fopen(C:\proj\share\epsg) - succeeded
>
>
>
> # ---- From Coordinate System ----
>
> #Lambert Conformal Conic
>
> #       Conic, Sph&Ell
>
> #       lat_1= and lat_2= or lat_0
>
> # +init=epsg:2285 +proj=lcc +lat_1=48.73333333333333 +lat_2=47.5 +lat_0=47
>
> # +lon_0=-120.8333333333333 +x_0=500000.0001016001 +y_0=0 +datum=NAD83
>
> # +units=us-ft +no_defs +ellps=GRS80 +towgs84=0,0,0
>
> # ---- To Coordinate System ----
>
> #Lat/long (Geodetic alias)
>
> #
>
> # +init=epsg:4269 +proj=longlat +datum=NAD83 +no_defs +ellps=GRS80
>
> # +towgs84=0,0,0
>
> 2196293.3184066000 643350.39301622100
>
> -118.5293900000000300   48.7408309999860520 0.0000000000000000
>
> 2196293.3184067495000000         643350.3930111383100000
>
> -118.5293900000000300   48.7408309999721180 0.0000000000000000
>
> 2196293.3184069018000000         643350.3930060574800000
>
> -118.5293900000000300   48.7408309999581850 0.0000000000000000
>
> 2196293.3184070541000000         643350.3930009742000000
>
> -118.5293900000000300   48.7408309999442440 0.0000000000000000
>
> 2196293.3184072063000000         643350.3929958911600000
>
> -118.5293900000000300   48.7408309999302960 0.0000000000000000
>
> 2196293.3184073586000000         643350.3929908055600000
>
> -118.5293900000000300   48.7408309999163550 0.0000000000000000
>
> 2196293.3184075109000000         643350.3929857177400000
>
> -118.5293900000000300   48.7408309999023930 0.0000000000000000
>
> 2196293.3184076636000000         643350.3929806276000000
>
> -118.5293900000000300   48.7408309998884450 0.0000000000000000
>
>
>
> ETC. ETC.
>
>
>
> Thanks,
>
> -Dmitry Mefed
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20171101/fb551ac5/attachment.html>

