From support.mn at elisanet.fi  Wed Jun  1 09:11:53 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Wed, 1 Jun 2011 19:11:53 +0300 (EEST)
Subject: [Proj] Proj4 definitions file
Message-ID: <26101483.5099261306944714069.JavaMail.support.mn@elisanet.fi>

Hello,

here is a link to a fresh (4.7.0 fresh) .pin file.

http://www.polardist.com/pub/proj4.7.pin

[size 1.30 MB (1,368,201 bytes)]

It is compiled using Proj.4.7.0 distribution files:

epsg, esri, esri.extra, GL27, IGNF, nad27, nad83
other.extra and world

There are 7793 proj.4 definitions. It is a text file and
can be examined and edited with a std. text editor. The
old fashion "title=" statements are converted to "#"
comment lines.  Comments are inside the <block>
and white space is converted to CRLF for clarity.

Names are converted from plain numbers to include
the source, such as ESRI:32149.

Here is an example definition block. The name is
included in the block as a comment line.

# EPSG:32149
# NAD83 / Washington South
proj=lcc
lat_1=47.33333333333334
lat_2=45.83333333333334
lat_0=45.33333333333334
lon_0=-120.5
x_0=500000
y_0=0
ellps=GRS80
datum=NAD83
units=m
no_defs

Regards: Janne.



From support.mn at elisanet.fi  Wed Jun  1 09:13:58 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Wed, 1 Jun 2011 19:13:58 +0300 (EEST)
Subject: [Proj] Single Proj.4.7.0 Definitions File
Message-ID: <23213472.5099341306944838986.JavaMail.support.mn@elisanet.fi>

Hello,

here is a link to a fresh (4.7.0 fresh) .pin file.

http://www.polardist.com/pub/proj4.7.pin

[size 1.30 MB (1,368,201 bytes)]

It is compiled using Proj.4.7.0 distribution files:

epsg, esri, esri.extra, GL27, IGNF, nad27, nad83
other.extra and world

There are 7793 proj.4 definitions. It is a text file and
can be examined and edited with a std. text editor. The
old fashion "title=" statements are converted to "#"
comment lines.  Comments are inside the <block>
and white space is converted to CRLF for clarity.

Names are converted from plain numbers to include
the source, such as ESRI:32149.

Here is an example definition block. The name is
included in the block as a comment line.

# EPSG:32149
# NAD83 / Washington South
proj=lcc
lat_1=47.33333333333334
lat_2=45.83333333333334
lat_0=45.33333333333334
lon_0=-120.5
x_0=500000
y_0=0
ellps=GRS80
datum=NAD83
units=m
no_defs

Regards: Janne.



From jenny at karto.baug.ethz.ch  Mon Jun  6 03:11:33 2011
From: jenny at karto.baug.ethz.ch (Bernhard Jenny)
Date: Mon, 6 Jun 2011 12:11:33 +0200
Subject: [Proj] Robinson projection
Message-ID: <B36B919C-EF6E-4A5F-9E46-03AB56A89291@karto.baug.ethz.ch>

I think I found an inconsistency in the PROJ.4 implementation of the Robinson projection. Robinson specifies the vertical distribution and length of parallels in his 1974 text for every 5 degrees of increasing latitude.  PROJ.4 places the 40 degree latitude at 0.4968, whereas Robinson places it at 0.4958. This corresponds to a vertical shift of about 9 km at 40 degrees north and south. Is this a simple mistyping, or are there any reasons to change Robinson's definition?

Reference:
Robinson, A. (1974). A New Map Projection: Its Development and Characteristics. International Yearbook of Cartography, p. 145-155.

Thanks,
Bernie
 
Bernhard Jenny
Institute of Cartography and Geoinformation ETH Zurich
jenny at karto.baug.ethz.ch
http://jenny.cartography.ch




From support.mn at elisanet.fi  Mon Jun  6 06:09:05 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Mon, 6 Jun 2011 16:09:05 +0300 (EEST)
Subject: [Proj] Single Proj.4.7.0 Definitions File
Message-ID: <4404048.7684981307365745874.JavaMail.support.mn@elisanet.fi>

Hello,

here is a link to a fresh (4.7.0 fresh) .pin file.

http://www.polardist.com/pub/proj4.7.pin

[size 1.30 MB (1,368,201 bytes)]

It is compiled using Proj.4.7.0 distribution files:

epsg, esri, esri.extra, GL27, IGNF, nad27, nad83
other.extra and world

There are 7793 proj.4 definitions. It is a text file and
can be examined and edited with a std. text editor. The
old fashion "title=" statements are converted to "#"
comment lines. Comments are inside the <block>
and white space is converted to CRLF for clarity.

Names are converted from plain numbers to include
the source, such as ESRI:32149.

Here is an example definition block. The name is
included in the block as a comment line.

# EPSG:32149
# NAD83 / Washington South
proj=lcc
lat_1=47.33333333333334
lat_2=45.83333333333334
lat_0=45.33333333333334
lon_0=-120.5
x_0=500000
y_0=0
ellps=GRS80
datum=NAD83
units=m
no_defs

Regards: Janne.



From support.mn at elisanet.fi  Wed Jun  8 07:05:01 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Wed, 8 Jun 2011 17:05:01 +0300 (EEST)
Subject: [Proj] Robinson projection
Message-ID: <25840206.5397001307541902027.JavaMail.support.mn@elisanet.fi>

Hello,

here is the PJ_Robin.c source, feel free to fix it and send back :)

Regards: Janne.

#ifndef lint
static const char SCCSID[]="@(#)PJ_robin.c	4.1 94/02/15     GIE     REL";
#endif
#define PJ_LIB__
#include	<projects.h>
PROJ_HEAD(robin, "Robinson") "\n\tPCyl., Sph.";
#define V(C,z) (C.c0 + z * (C.c1 + z * (C.c2 + z * C.c3)))
#define DV(C,z) (C.c1 + z * (C.c2 + C.c2 + z * 3. * C.c3))
/* note: following terms based upon 5 deg. intervals in degrees. */
static struct COEFS {
	float c0, c1, c2, c3;
} X[] = {
1,	-5.67239e-12,	-7.15511e-05,	3.11028e-06,
0.9986,	-0.000482241,	-2.4897e-05,	-1.33094e-06,
0.9954,	-0.000831031,	-4.4861e-05,	-9.86588e-07,
0.99,	-0.00135363,	-5.96598e-05,	3.67749e-06,
0.9822,	-0.00167442,	-4.4975e-06,	-5.72394e-06,
0.973,	-0.00214869,	-9.03565e-05,	1.88767e-08,
0.96,	-0.00305084,	-9.00732e-05,	1.64869e-06,
0.9427,	-0.00382792,	-6.53428e-05,	-2.61493e-06,
0.9216,	-0.00467747,	-0.000104566,	4.8122e-06,
0.8962,	-0.00536222,	-3.23834e-05,	-5.43445e-06,
0.8679,	-0.00609364,	-0.0001139,	3.32521e-06,
0.835,	-0.00698325,	-6.40219e-05,	9.34582e-07,
0.7986,	-0.00755337,	-5.00038e-05,	9.35532e-07,
0.7597,	-0.00798325,	-3.59716e-05,	-2.27604e-06,
0.7186,	-0.00851366,	-7.0112e-05,	-8.63072e-06,
0.6732,	-0.00986209,	-0.000199572,	1.91978e-05,
0.6213,	-0.010418,	8.83948e-05,	6.24031e-06,
0.5722,	-0.00906601,	0.000181999,	6.24033e-06,
0.5322, 0.,0.,0.  },
Y[] = {
0,	0.0124,	3.72529e-10,	1.15484e-09,
0.062,	0.0124001,	1.76951e-08,	-5.92321e-09,
0.124,	0.0123998,	-7.09668e-08,	2.25753e-08,
0.186,	0.0124008,	2.66917e-07,	-8.44523e-08,
0.248,	0.0123971,	-9.99682e-07,	3.15569e-07,
0.31,	0.0124108,	3.73349e-06,	-1.1779e-06,
0.372,	0.0123598,	-1.3935e-05,	4.39588e-06,
0.434,	0.0125501,	5.20034e-05,	-1.00051e-05,
0.4968,	0.0123198,	-9.80735e-05,	9.22397e-06,
0.5571,	0.0120308,	4.02857e-05,	-5.2901e-06,
0.6176,	0.0120369,	-3.90662e-05,	7.36117e-07,
0.6769,	0.0117015,	-2.80246e-05,	-8.54283e-07,
0.7346,	0.0113572,	-4.08389e-05,	-5.18524e-07,
0.7903,	0.0109099,	-4.86169e-05,	-1.0718e-06,
0.8435,	0.0103433,	-6.46934e-05,	5.36384e-09,
0.8936,	0.00969679,	-6.46129e-05,	-8.54894e-06,
0.9394,	0.00840949,	-0.000192847,	-4.21023e-06,
0.9761,	0.00616525,	-0.000256001,	-4.21021e-06,
1., 0.,0.,0 };
#define FXC	0.8487
#define FYC	1.3523
#define C1	11.45915590261646417544
#define RC1	0.08726646259971647884
#define NODES	18
#define ONEEPS	1.000001
#define EPS	1e-8
FORWARD(s_forward); /* spheroid */
	int i;
	double dphi;

	i = floor((dphi = fabs(lp.phi)) * C1);
	if (i >= NODES) i = NODES - 1;
	dphi = RAD_TO_DEG * (dphi - RC1 * i);
	xy.x = V(X[i], dphi) * FXC * lp.lam;
	xy.y = V(Y[i], dphi) * FYC;
	if (lp.phi < 0.) xy.y = -xy.y;
	return (xy);
}
INVERSE(s_inverse); /* spheroid */
	int i;
	double t, t1;
	struct COEFS T;

	lp.lam = xy.x / FXC;
	lp.phi = fabs(xy.y / FYC);
	if (lp.phi >= 1.) { /* simple pathologic cases */
		if (lp.phi > ONEEPS) I_ERROR
		else {
			lp.phi = xy.y < 0. ? -HALFPI : HALFPI;
			lp.lam /= X[NODES].c0;
		}
	} else { /* general problem */
		/* in Y space, reduce to table interval */
		for (i = floor(lp.phi * NODES);;) {
			if (Y[i].c0 > lp.phi) --i;
			else if (Y[i+1].c0 <= lp.phi) ++i;
			else break;
		}
		T = Y[i];
		/* first guess, linear interp */
		t = 5. * (lp.phi - T.c0)/(Y[i+1].c0 - T.c0);
		/* make into root */
		T.c0 -= lp.phi;
		for (;;) { /* Newton-Raphson reduction */
			t -= t1 = V(T,t) / DV(T,t);
			if (fabs(t1) < EPS)
				break;
		}
		lp.phi = (5 * i + t) * DEG_TO_RAD;
		if (xy.y < 0.) lp.phi = -lp.phi;
		lp.lam /= V(X[i], t);
	}
	return (lp);
}
FREEUP; if (P) pj_dalloc(P); }
ENTRY0(robin) P->es = 0.; P->inv = s_inverse; P->fwd = s_forward; ENDENTRY(P)

------------------------------------------------------------

Bernhard Jenny [jenny at karto.baug.ethz.ch] kirjoitti: 
> I think I found an inconsistency in the PROJ.4 implementation of the Robinson projection. Robinson specifies the vertical distribution and length of parallels in his 1974 text for every 5 degrees of increasing latitude.  PROJ.4 places the 40 degree latitude at 0.4968, whereas Robinson places it at 0.4958. This corresponds to a vertical shift of about 9 km at 40 degrees north and south. Is this a simple mistyping, or are there any reasons to change Robinson's definition?
> 
> Reference:
> Robinson, A. (1974). A New Map Projection: Its Development and Characteristics. International Yearbook of Cartography, p. 145-155.
> 
> Thanks,
> Bernie
>  
> Bernhard Jenny
> Institute of Cartography and Geoinformation ETH Zurich
> jenny at karto.baug.ethz.ch
> http://jenny.cartography.ch
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 



From Mikael.Rittri at carmenta.com  Thu Jun  9 02:37:13 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Thu, 9 Jun 2011 09:37:13 +0000
Subject: [Proj] Robinson projection
In-Reply-To: <B36B919C-EF6E-4A5F-9E46-03AB56A89291@karto.baug.ethz.ch>
References: <B36B919C-EF6E-4A5F-9E46-03AB56A89291@karto.baug.ethz.ch>
Message-ID: <E4AB3DD44D22854B819908379DE4AD4938859E45@SETHNWS023.carmenta.se>

Bernie wrote:

> PROJ.4 places the 40 degree latitude at 0.4968, whereas Robinson places it at 0.4958.
> [ --- ]
> Is this a simple mistyping,

Yes, it must be. Well spotted. 

I don't have the Robinson article, but the tables can be 
found on http://en.wikipedia.org/wiki/Robinson_projection ,
where the PDFE value for latitude 40 is 0.4958 as you say. 

Out of curiosity, I computed the first, second and third 
differences of the PDFE column from Wikipedia. I give them 
here (multiplied by 10000):

First	Second  Third differences
620
	   0
620		  0
	   0
620		  0
	   0
620		  0
	   0
620		  0
	   0
620		  0
	   0
620		 -2
	  -2
618		 -3
	  -5
613		 -3
	  -8
605		 -4
	 -12
593		 -4
	 -16
577		 -4
	 -20
557		 -5
	 -25
532		 -6	
	 -31
501		-12
	 -43
458		-48
	 -91
367		-37
	-128
239

Even though the PDFE column is not specified by a formula, it seems
to define a nice and smooth function, since the third differences 
decrease smoothly (except the final one, from the highest latitudes).

If one replaces the latitude 40 value by 0.4968, as the Proj.4 code
has done, the hiccup is clearly seen in the differences:

First	Second  Third differences
620
	   0
620		  0
	   0
620		  0
	   0
620		  0
	   0
620		  0
	   0
620		  0
	   0
620		 +8
	  +8
628		-33
	 -25
603		+27
	  +2
605		-14
	 -12
593		 -4
	 -16
577		 -4
	 -20
557		 -5
	 -25
532		 -6	
	 -31
501		-12
	 -43
458		-48
	 -91
367		-37
	-128
239

By the way, the Robinson projection is analysed in this article:

Cengizhan Ipbuker:
Numerical Evaluation of the Robinson Projection.
Cartography and Geographic Information Science, 
Volume 31, Number 2, April 2004, pages 79-88.
http://www.ingentaconnect.com/content/acsm/cagis/2004/00000031/00000002/art00002

Regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Bernhard Jenny
Sent: den 6 juni 2011 12:12
To: proj at lists.maptools.org
Subject: [Proj] Robinson projection

I think I found an inconsistency in the PROJ.4 implementation of the Robinson projection. Robinson specifies the vertical distribution and length of parallels in his 1974 text for every 5 degrees of increasing latitude.  PROJ.4 places the 40 degree latitude at 0.4968, whereas Robinson places it at 0.4958. This corresponds to a vertical shift of about 9 km at 40 degrees north and south. Is this a simple mistyping, or are there any reasons to change Robinson's definition?

Reference:
Robinson, A. (1974). A New Map Projection: Its Development and Characteristics. International Yearbook of Cartography, p. 145-155.

Thanks,
Bernie
 
Bernhard Jenny
Institute of Cartography and Geoinformation ETH Zurich jenny at karto.baug.ethz.ch http://jenny.cartography.ch


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From support.mn at elisanet.fi  Fri Jun 10 09:57:03 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Fri, 10 Jun 2011 19:57:03 +0300 (EEST)
Subject: [Proj] Robinson projection
Message-ID: <28638014.8019691307725024123.JavaMail.support.mn@elisanet.fi>

Mikael,
so if I swap the following line in PJ_Robin.c

0.4968,	0.0123198,	-9.80735e-05,	9.22397e-06,

to

0.4958,	0.0123198,	-9.80735e-05,	9.22397e-06,

is that enough? Frank might fix the next distribution
package?

Regards: Janne.


-----------------------------------------------------------


Mikael Rittri [Mikael.Rittri at carmenta.com] kirjoitti: 
> Bernie wrote:
> 
> > PROJ.4 places the 40 degree latitude at 0.4968, whereas Robinson places it at 0.4958.
> > [ --- ]
> > Is this a simple mistyping,
> 
> Yes, it must be. Well spotted. 
> 



From warmerdam at pobox.com  Fri Jun 10 10:36:15 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 10 Jun 2011 13:36:15 -0400
Subject: [Proj] Robinson projection
In-Reply-To: <28638014.8019691307725024123.JavaMail.support.mn@elisanet.fi>
References: <28638014.8019691307725024123.JavaMail.support.mn@elisanet.fi>
Message-ID: <4DF2560F.7050701@pobox.com>

On 11-06-10 12:57 PM, support.mn at elisanet.fi wrote:
> Mikael,
> so if I swap the following line in PJ_Robin.c
>
> 0.4968,	0.0123198,	-9.80735e-05,	9.22397e-06,
>
> to
>
> 0.4958,	0.0123198,	-9.80735e-05,	9.22397e-06,
>
> is that enough? Frank might fix the next distribution
> package?

I have made that change in trunk for the upcoming 4.8.0 release:

   http://trac.osgeo.org/proj/changeset/2051

   http://trac.osgeo.org/proj/ticket/113

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From maurelio at live.it  Mon Jun 13 07:36:53 2011
From: maurelio at live.it (zagot)
Date: Mon, 13 Jun 2011 07:36:53 -0700 (PDT)
Subject: [Proj] help with proj.4
Message-ID: <1307975813968-6470395.post@n2.nabble.com>

Hi to all

if i run this with cs2cs

cs2cs +proj=tmerc +lat_0=0 +lon_0=-3.45233333333333 +k=0.999600 +x_0=1500000
+y_0=0 +ellps=intl +pm=rome +units=m
+towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68
+to +proj=latlong +datum=WGS84 
1514905.27  5034551.13

i have this result

3d15'42.057"W 45d27'48.522"N 0.00

i need to do this with programmatic but with this code

char proj4Gauss[]="+proj=tmerc +lat_0=0 +lon_0=-3.45233333333333 +k=0.999600
+x_0=1500000 +y_0=0 +ellps=intl +pm=rome +units=m
+towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68";

char projWgs84[]="+proj=latlong +datum=WGS84 ";
	
projPJ projGauss = pj_init_plus(proj4Gauss);
	
double x=1514905.27 ;
double y=5034551.13;
double z=0;

double ris = pj_transform(projGauss, projWgs84, 1, 0, &x, &y, &z);

i have this result (in decimals point)

4423479.3363604508      715679.13023441052

waths I wrong? in the source code

thanks

sorry for my english

m.



--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/help-with-proj-4-tp6470395p6470395.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From warmerdam at pobox.com  Mon Jun 13 08:37:24 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 13 Jun 2011 11:37:24 -0400
Subject: [Proj] help with proj.4
In-Reply-To: <1307975813968-6470395.post@n2.nabble.com>
References: <1307975813968-6470395.post@n2.nabble.com>
Message-ID: <4DF62EB4.6080109@pobox.com>

On 11-06-13 10:36 AM, zagot wrote:
> Hi to all
>
> if i run this with cs2cs
>
> cs2cs +proj=tmerc +lat_0=0 +lon_0=-3.45233333333333 +k=0.999600 +x_0=1500000
> +y_0=0 +ellps=intl +pm=rome +units=m
> +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68
> +to +proj=latlong +datum=WGS84
> 1514905.27  5034551.13
>
> i have this result
>
> 3d15'42.057"W 45d27'48.522"N 0.00
>
> i need to do this with programmatic but with this code
>
> char proj4Gauss[]="+proj=tmerc +lat_0=0 +lon_0=-3.45233333333333 +k=0.999600
> +x_0=1500000 +y_0=0 +ellps=intl +pm=rome +units=m
> +towgs84=-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68";
>
> char projWgs84[]="+proj=latlong +datum=WGS84 ";
> 	
> projPJ projGauss = pj_init_plus(proj4Gauss);
> 	
> double x=1514905.27 ;
> double y=5034551.13;
> double z=0;
>
> double ris = pj_transform(projGauss, projWgs84, 1, 0,&x,&y,&z);
>
> i have this result (in decimals point)
>
> 4423479.3363604508      715679.13023441052
>
> waths I wrong? in the source code

Zagot,

Are you really passing a string valued projWgs84 to pj_transform()
directly without first turning it into a projPJ structure using
pj_init_plus() like you did for the projGauss?  If so, it's a wonder
things didn't crash.

Otherwise, I don't see any obvious problem.  Do be aware that geographic
coordinates will be in radians, not decimal degrees so you will need to
adjust for that.  But the values you are getting back are clearly not
radians.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From maurelio at live.it  Mon Jun 13 10:56:57 2011
From: maurelio at live.it (zagot)
Date: Mon, 13 Jun 2011 10:56:57 -0700 (PDT)
Subject: [Proj] help with proj.4
In-Reply-To: <4DF62EB4.6080109@pobox.com>
References: <1307975813968-6470395.post@n2.nabble.com>
	<4DF62EB4.6080109@pobox.com>
Message-ID: <1307987817796-6471129.post@n2.nabble.com>


Hi Frank Warmerdam,

thanks for the reply

yes I have omitted the init code
projPJ projGauss = pj_init_plus(proj4Gauss);
projPJ projWgs84 = pj_init_plus(proj4Wgs84);

the result in decimal point is the result of the funtcion:
pj_transform(projGauss, projWgs84, 1, 0,&x,&y,&z); 

:(

thanks 

m.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/help-with-proj-4-tp6470395p6471129.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From maurelio at live.it  Mon Jun 13 12:44:21 2011
From: maurelio at live.it (zagot)
Date: Mon, 13 Jun 2011 12:44:21 -0700 (PDT)
Subject: [Proj] help with proj.4
In-Reply-To: <1307987817796-6471129.post@n2.nabble.com>
References: <1307975813968-6470395.post@n2.nabble.com>
	<4DF62EB4.6080109@pobox.com>
	<1307987817796-6471129.post@n2.nabble.com>
Message-ID: <1307994261993-6471521.post@n2.nabble.com>

ops... sorry you're right the result of trasformationa are in radians :)

as described here

http://trac.osgeo.org/proj/wiki/ProjAPI

then 
x *= RAD_TO_DEG;
y *= RAD_TO_DEG;

the result is ok

thanks to you :)

m.




--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/help-with-proj-4-tp6470395p6471521.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From support.mn at elisanet.fi  Sun Jun 19 03:29:32 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Sun, 19 Jun 2011 13:29:32 +0300 (EEST)
Subject: [Proj] proj=undef ??
Message-ID: <8424230.8824961308479373084.JavaMail.support.mn@elisanet.fi>

Hello,

there is a need to have an undefined projection with
possible datum shift like:

proj=undef
ellps=bessel
towgs84=.....
no_defs

That would then transfer the projection input to output
without doing any forward or inverse calculations even
if those routines called but allowing datum shifting.

So the absolutely minimal definition would be

proj=undef
datum=undef

or shorter version

proj=undef

and that would feed all input directly to the
output. Those switches would allow the
end user to control the handling of the data.

So the "proj=undef" is same as not doing anything
by the projection library if called but not giving any error
messages about missing projection but doing all
datum shifting if requested. Any ideas?

Regards: Janne.



From Mikael.Rittri at carmenta.com  Mon Jun 20 06:07:33 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 20 Jun 2011 13:07:33 +0000
Subject: [Proj] proj=undef ??
In-Reply-To: <8424230.8824961308479373084.JavaMail.support.mn@elisanet.fi>
References: <8424230.8824961308479373084.JavaMail.support.mn@elisanet.fi>
Message-ID: <E4AB3DD44D22854B819908379DE4AD493885A3C8@SETHNWS023.carmenta.se>

Hello Janne,
if I understand you right, what you want is impossible.  

If the projection is unknown, any input coordinates 
will be non-georeferenced. So, how could the datum shift
machinery do anything on coordinates that cannot be
interpreted? 

Maybe I misunderstand what you want to do.

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of support.mn at elisanet.fi
Sent: den 19 juni 2011 12:30
To: proj at lists.maptools.org
Subject: [Proj] proj=undef ??

Hello,

there is a need to have an undefined projection with possible datum shift like:

proj=undef
ellps=bessel
towgs84=.....
no_defs

That would then transfer the projection input to output without doing any forward or inverse calculations even if those routines called but allowing datum shifting.

So the absolutely minimal definition would be

proj=undef
datum=undef

or shorter version

proj=undef

and that would feed all input directly to the output. Those switches would allow the end user to control the handling of the data.

So the "proj=undef" is same as not doing anything by the projection library if called but not giving any error messages about missing projection but doing all datum shifting if requested. Any ideas?

Regards: Janne.

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From Mikael.Rittri at carmenta.com  Tue Jun 21 02:29:14 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Tue, 21 Jun 2011 09:29:14 +0000
Subject: [Proj] MGRS notation in extended UTM zones?
Message-ID: <E4AB3DD44D22854B819908379DE4AD493885A69D@SETHNWS023.carmenta.se>

I have a question on MGRS notation and overlapping zones. 

On maps with the UTM/UPS grids, the displayed grid 
for one zone may extend a bit into an adjacent zone: 

    "Overlap: On large-scale maps and trig lists, 
     the data for each zone, datum, or ellipsoid 
     overlaps the adjacent zone, datum, or ellipsoid 
     a minimum of 40 kilometers. The UTM grid extends
     to 80°30'S and 84°30'N, providing a 30-minute
     overlap with the UPS grid." 
         -- DMA TECHNICAL MANUAL 8358.1
		Datums, Ellipsoids, Grids, and Grid Reference Systems.
		Section 2-6.3.1: Universal Transverse Mercator (UTM) Grid. 

    "Overlap: The UPS grid extends to 83°30'N and 79°30'S, 
     providing a 30-minute overlap with the UTM grid."
		same reference,
		Section 2-6.3.2: Universal Polar Stereographic (UPS) Grid. 
		http://earth-info.nga.mil/GandG/publications/tm8358.1/tr83581b.html#ZZ26

I am not sure how this should be applied to MGRS notation.  
Perhaps not at all?  

For example, grid zone 30X (covering 6°W to 0°E, 
and 72°N to 84°N) contains a 100-km square named WS, 
but it only about 44.3 km wide, because it is clipped 
by the east zone boundary. So, should the MGRS reference

  30XWS5000050000

be considered legal? Is would represent a position 
about 5.7 km into UTM zone 31, but maybe that's okay
due to the 40 km overlap of UTM zones? Or is the overlap 
intended only to make measurements easier on a printed 
map, and not intended for MGRS notation? 

I guess some common sense judgement is required here.
A software system could reject all MGRS references that 
would be the slightest bit outside their proper UTM zone,
and the system would then catch more mistakes, but it might
also reject some slight, innocent trespassing across the 
UTM zone boundaries. 

I just wonder if there is some standard, or recommendation,
about how this error-checking should be done. 

Regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

From charles.karney at sri.com  Tue Jun 21 03:47:32 2011
From: charles.karney at sri.com (Charles Karney)
Date: Tue, 21 Jun 2011 06:47:32 -0400
Subject: [Proj] MGRS notation in extended UTM zones?
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD493885A69D@SETHNWS023.carmenta.se>
References: <E4AB3DD44D22854B819908379DE4AD493885A69D@SETHNWS023.carmenta.se>
Message-ID: <4E0076C4.8020103@sri.com>

Mikael,

Take a look at

http://geographiclib.sourceforge.net/html/classGeographicLib_1_1MGRS.html

to see the rules that GeographicLib uses for its MGRS class.  You can 
perform the conversions with the web interface

http://geographiclib.sourceforge.net/cgi-bin/GeoConvert

When I started writing this class (Aug 2008) I tried using GeoTrans as
the authority; see

http://earth-info.nga.mil/GandG/geotrans/index.html

However it quickly became clear the GeoTrans used inconsistent rules.  A
big problem was that MGRS coordinates were obtained by rounding eastings
and northings instead of by truncation.  As a result a conversion from
UTM to MGRS might result in an MGRS coordinate which could not be
converted back to UTM.  Partly as a result of my prodding, GeoTrans 3.0
and later fix this particular problem (but others remain).

So instead I devised my own set of rules.  In response to Mikael's
query, my zone overlap rules are as generous as possible consistent with
staying within the MGRS lettering scheme.  In the east-west direction
this means that UTM eastings in [100km,900km) are legal.  The rule for
the latitude band letter is that if a latitude band boundary intersects
a 100 km MGRS block then either letter is valid for any coordinate in
that block.

I can expand on my reasons for these choices if anyone's interested.
Also I can unearth my most recent E-mails with the GeoTrans developers
to document what I perceive as the shortcomings of the current version
of GeoTrans.


On 06/21/11 05:29, Mikael Rittri wrote:
> I have a question on MGRS notation and overlapping zones.
>
> On maps with the UTM/UPS grids, the displayed grid
> for one zone may extend a bit into an adjacent zone:
>
>      "Overlap: On large-scale maps and trig lists,
>       the data for each zone, datum, or ellipsoid
>       overlaps the adjacent zone, datum, or ellipsoid
>       a minimum of 40 kilometers. The UTM grid extends
>       to 80°30'S and 84°30'N, providing a 30-minute
>       overlap with the UPS grid."
>           -- DMA TECHNICAL MANUAL 8358.1
> 		Datums, Ellipsoids, Grids, and Grid Reference Systems.
> 		Section 2-6.3.1: Universal Transverse Mercator (UTM) Grid.
>
>      "Overlap: The UPS grid extends to 83°30'N and 79°30'S,
>       providing a 30-minute overlap with the UTM grid."
> 		same reference,
> 		Section 2-6.3.2: Universal Polar Stereographic (UPS) Grid.
> 		http://earth-info.nga.mil/GandG/publications/tm8358.1/tr83581b.html#ZZ26
>
> I am not sure how this should be applied to MGRS notation.
> Perhaps not at all?
>
> For example, grid zone 30X (covering 6°W to 0°E,
> and 72°N to 84°N) contains a 100-km square named WS,
> but it only about 44.3 km wide, because it is clipped
> by the east zone boundary. So, should the MGRS reference
>
>    30XWS5000050000
>
> be considered legal? Is would represent a position
> about 5.7 km into UTM zone 31, but maybe that's okay
> due to the 40 km overlap of UTM zones? Or is the overlap
> intended only to make measurements easier on a printed
> map, and not intended for MGRS notation?
>
> I guess some common sense judgement is required here.
> A software system could reject all MGRS references that
> would be the slightest bit outside their proper UTM zone,
> and the system would then catch more mistakes, but it might
> also reject some slight, innocent trespassing across the
> UTM zone boundaries.
>
> I just wonder if there is some standard, or recommendation,
> about how this error-checking should be done.

-- 
Charles Karney <charles.karney at sri.com>
SRI International, Princeton, NJ 08543-5300
Tel: +1 609 734 2312


From charles.karney at sri.com  Tue Jun 21 06:30:45 2011
From: charles.karney at sri.com (Charles Karney)
Date: Tue, 21 Jun 2011 09:30:45 -0400
Subject: [Proj] MGRS notation in extended UTM zones?
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD493885A70F@SETHNWS023.carmenta.se>
References: <E4AB3DD44D22854B819908379DE4AD493885A69D@SETHNWS023.carmenta.se>
	<4E0076C4.8020103@sri.com>
	<E4AB3DD44D22854B819908379DE4AD493885A70F@SETHNWS023.carmenta.se>
Message-ID: <4E009D05.1050206@sri.com>

On 06/21/11 07:35, Mikael Rittri wrote:
>
>> Also I can unearth my most recent E-mails with the GeoTrans developers
>> to document what I perceive as the shortcomings of the current version
>> of GeoTrans.
>
> That could also be interesting.

Here are 3 "bugs" with MGRS conversions with GeoTrans 3.1

(1) Geotrans converts from UTM to MGRS via truncation *except* for a
pesky 0.5m offset

38N 444999   3688999   -> 38SMB4488 (OK)
38N 444999.5 3688999.5 -> 38SMB4589 (no, should be 38SMB4488)

(2) Geotrans converts from MGRS to UTM using the SW corner of the
square.  THis is inconsistent with the truncation rule for the reverse
transform (using the center of the square is the consistent choice).
Repeated forward and backward transformations lead to a drift.

38SMB => (1km accuracy) 32.53 43.94
       => (100km) 38SMA
       => (1km) 31.63 43.95
       => (100km) 38RMV

Maybe this is a misfeature rather than a bug.  The GeoTrans maintainers
say this is a feature.

(3) Geotrans is too lax about latitude bands, e.g.,

38RNL0099 is accepted and converts to 45E 41.54N

However band R covers [24N, 32N) so the north edge of the band is 1000km
away from 41.54N.

   --Charles


From charles.karney at sri.com  Tue Jun 21 07:17:44 2011
From: charles.karney at sri.com (Charles Karney)
Date: Tue, 21 Jun 2011 10:17:44 -0400
Subject: [Proj] MGRS notation in extended UTM zones?
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD493885A70F@SETHNWS023.carmenta.se>
References: <E4AB3DD44D22854B819908379DE4AD493885A69D@SETHNWS023.carmenta.se>
	<4E0076C4.8020103@sri.com>
	<E4AB3DD44D22854B819908379DE4AD493885A70F@SETHNWS023.carmenta.se>
Message-ID: <4E00A808.8010509@sri.com>

On 06/21/11 07:35, Mikael Rittri wrote:
> Thanks, Charles.
>
> I suppose this means that there are no official guidelines,
> unless one would accept GeoTrans as an authority. But I don't
> have much confidence in GeoTrans (although I haven't
> investigated it in detail, as you have).
>
>> In the east-west direction this means that UTM eastings
>> in [100km,900km) are legal.
>
>> The rule for the latitude band letter is that if a latitude
>> band boundary intersects a 100 km MGRS block then either
>> letter is valid for any coordinate in that block.
>
> I agree that the second rule is necessary (more or less) and harmless.
> But I am less sure about the first rule.
>
>> I can expand on my reasons for these choices if anyone's interested.
>
> Yes, I would be interested in more details.

Motivations for the rules for allowed MGRS conversions:

(1) Repeated conversions should be stable.  Given that UTM/UPS -> MGRS
conversion is by truncation, then MGRS -> UTM/UPS should return the
center of the square (at the appropriate precision).

(2) Truncating a legal MGRS coordinate should result in a legal MGRS
coordinate; similarly adding precision to an legal MGRS coordinate
should result in a legal MGRS coordinate.

(3) MGRS lettering boundaries should be adhered to since these supply
redundancy checks.  Thus zone 02 can only use column letters J-R.  It
shouldn't be extended further east by using letter S, because zone 03
uses column letters S-Z and doing so would lose a check.  Similarly the
use of latitude band letters should be as strict as possible consistent
with (2).  (These rule allow various bits of the MGRS code, e.g., the
UTM zone number, to be dropped with the nearest point of possible
confusion being reasonably far away.)

A consequence of rule (2) is that the extent of a numeric zone should
follow the boundaries of the 100km MGRS blocks.

The maximum extent of a UTM zone [100km,900km] in the E-W direction (due
to rule 3), and GeographicLib imposes a limit in the N-S direction in
order to guarantee a 0.5 deg overlap with UPS.  This defines a
rectangular regions in projected space for each UTM zone (and similarly
for the S and N UPS zones).

The only remaining question is to make the legal regions smaller than
these in order to make the overlap region no more than about 0.5 deg.
The boundary would then zig-zag to follow the 100km block boundaries.  I
elected not to do this in GeographicLib, because

(a) this would be tricky to get right (especially with the exceptions
for Norway and Svalbard)

(b) there's nowhere I can since in the US DoD documentation that says
that the overlap should be restricted to 0.5 deg.  GeoTrans once (and
may still) enforced this overlap restriction but that's for a bad
reason: that the GeoTrans UTM algorithm is inaccurate much beyond 3 deg
from the central meridian

(c) the sort of coordinate transformations I need to do, e.g., integrate
Lidar collects in different UTM zones, a stricter overlap region would
inevitably "get in my way".  Being generous allows, for example, a user
to use "doubled" UTM zones in Greenland and the north of Canada similar
to the double-wide Svalbard zones.

(d) if restrictions are needed then they can be enforced by a separate
layer outside GeographicLib.


From Mikael.Rittri at carmenta.com  Tue Jun 21 07:49:12 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Tue, 21 Jun 2011 14:49:12 +0000
Subject: [Proj] MGRS notation in extended UTM zones?
In-Reply-To: <4E00A808.8010509@sri.com>
References: <E4AB3DD44D22854B819908379DE4AD493885A69D@SETHNWS023.carmenta.se>
	<4E0076C4.8020103@sri.com>
	<E4AB3DD44D22854B819908379DE4AD493885A70F@SETHNWS023.carmenta.se>
	<4E00A808.8010509@sri.com>
Message-ID: <E4AB3DD44D22854B819908379DE4AD493885A7D4@SETHNWS023.carmenta.se>

Well argued. I hadn't thought of your motivation (2), 
but it makes sense. I think I am convinced.  

Thanks again,

Mikael 
 
-----Original Message-----
From: Charles Karney [mailto:charles.karney at sri.com] 
Sent: den 21 juni 2011 16:18
To: Mikael Rittri
Cc: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] MGRS notation in extended UTM zones?

On 06/21/11 07:35, Mikael Rittri wrote:
> Thanks, Charles.
>
> I suppose this means that there are no official guidelines, unless one 
> would accept GeoTrans as an authority. But I don't have much 
> confidence in GeoTrans (although I haven't investigated it in detail, 
> as you have).
>
>> In the east-west direction this means that UTM eastings in 
>> [100km,900km) are legal.
>
>> The rule for the latitude band letter is that if a latitude band 
>> boundary intersects a 100 km MGRS block then either letter is valid 
>> for any coordinate in that block.
>
> I agree that the second rule is necessary (more or less) and harmless.
> But I am less sure about the first rule.
>
>> I can expand on my reasons for these choices if anyone's interested.
>
> Yes, I would be interested in more details.

Motivations for the rules for allowed MGRS conversions:

(1) Repeated conversions should be stable.  Given that UTM/UPS -> MGRS conversion is by truncation, then MGRS -> UTM/UPS should return the center of the square (at the appropriate precision).

(2) Truncating a legal MGRS coordinate should result in a legal MGRS coordinate; similarly adding precision to an legal MGRS coordinate should result in a legal MGRS coordinate.

(3) MGRS lettering boundaries should be adhered to since these supply redundancy checks.  Thus zone 02 can only use column letters J-R.  It shouldn't be extended further east by using letter S, because zone 03 uses column letters S-Z and doing so would lose a check.  Similarly the use of latitude band letters should be as strict as possible consistent with (2).  (These rule allow various bits of the MGRS code, e.g., the UTM zone number, to be dropped with the nearest point of possible confusion being reasonably far away.)

A consequence of rule (2) is that the extent of a numeric zone should follow the boundaries of the 100km MGRS blocks.

The maximum extent of a UTM zone [100km,900km] in the E-W direction (due to rule 3), and GeographicLib imposes a limit in the N-S direction in order to guarantee a 0.5 deg overlap with UPS.  This defines a rectangular regions in projected space for each UTM zone (and similarly for the S and N UPS zones).

The only remaining question is to make the legal regions smaller than these in order to make the overlap region no more than about 0.5 deg.
The boundary would then zig-zag to follow the 100km block boundaries.  I elected not to do this in GeographicLib, because

(a) this would be tricky to get right (especially with the exceptions for Norway and Svalbard)

(b) there's nowhere I can since in the US DoD documentation that says that the overlap should be restricted to 0.5 deg.  GeoTrans once (and may still) enforced this overlap restriction but that's for a bad
reason: that the GeoTrans UTM algorithm is inaccurate much beyond 3 deg from the central meridian

(c) the sort of coordinate transformations I need to do, e.g., integrate Lidar collects in different UTM zones, a stricter overlap region would inevitably "get in my way".  Being generous allows, for example, a user to use "doubled" UTM zones in Greenland and the north of Canada similar to the double-wide Svalbard zones.

(d) if restrictions are needed then they can be enforced by a separate layer outside GeographicLib.


From robert at dgi.com  Tue Jun 21 09:45:12 2011
From: robert at dgi.com (Robert McFaul)
Date: Tue, 21 Jun 2011 09:45:12 -0700
Subject: [Proj] NGS Control Points
Message-ID: <4E00CA98.8040909@dgi.com>

Hello,

I have noticed that control points from the National Geodetic Survey (USA)
NAD83 to NAD27 transform values do not agree with transforms done using BM.

I have applied the 1983 to 1927 shift values provided in the data sheets and
compared these to an actual transform run. The transform shows a 
difference,
for instance for point HT0774, of a small amount.


    Data sheet (NAD83):   37.77092832 N     -122.39812240
    Data sheet (NAD27):   37.77098056 N     -122.39707500

    Transform 83 to 27:   37.77099882 N     -122.39704051


Are these differences so small that one need not worry? If I calculated this
correctly the difference is around 3.5 feet for the latitude. I'm not a
geodecist and realize that the process is not absolute.

Why the difference?

Thanks.

Robert McFaul
Dynamic Graphics, Inc.
Alameda, CA. USA


From support.mn at elisanet.fi  Tue Jun 21 11:43:19 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Tue, 21 Jun 2011 21:43:19 +0300 (EEST)
Subject: [Proj] proj=undef ??
Message-ID: <29293893.9027591308681799896.JavaMail.support.mn@elisanet.fi>

Mikael,

simply since you don't need any prjection to do
datum calculations.

Janne.

----------------------------

Mikael Rittri [Mikael.Rittri at carmenta.com] kirjoitti: 
> Hello Janne,
> if I understand you right, what you want is impossible.  
> 
> If the projection is unknown, any input coordinates 
> will be non-georeferenced. So, how could the datum shift
> machinery do anything on coordinates that cannot be
> interpreted? 
> 
> Maybe I misunderstand what you want to do.
> 
> Mikael Rittri
> Carmenta
> Sweden
> http://www.carmenta.com
> 
> -----Original Message-----
> From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of support.mn at elisanet.fi
> Sent: den 19 juni 2011 12:30
> To: proj at lists.maptools.org
> Subject: [Proj] proj=undef ??
> 
> Hello,
> 
> there is a need to have an undefined projection with possible datum shift like:
> 
> proj=undef
> ellps=bessel
> towgs84=.....
> no_defs
> 
> That would then transfer the projection input to output without doing any forward or inverse calculations even if those routines called but allowing datum shifting.
> 
> So the absolutely minimal definition would be
> 
> proj=undef
> datum=undef
> 
> or shorter version
> 
> proj=undef
> 
> and that would feed all input directly to the output. Those switches would allow the end user to control the handling of the data.
> 
> So the "proj=undef" is same as not doing anything by the projection library if called but not giving any error messages about missing projection but doing all datum shifting if requested. Any ideas?
> 
> Regards: Janne.
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 



From richard.greenwood at gmail.com  Tue Jun 21 12:32:27 2011
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Tue, 21 Jun 2011 13:32:27 -0600
Subject: [Proj] NGS Control Points
In-Reply-To: <4E00CA98.8040909@dgi.com>
References: <4E00CA98.8040909@dgi.com>
Message-ID: <BANLkTinWC2xoPb-_MO7698jasuiN1PEudw@mail.gmail.com>

On Tue, Jun 21, 2011 at 10:45 AM, Robert McFaul <robert at dgi.com> wrote:
> Hello,
>
> I have noticed that control points from the National Geodetic Survey (USA)
> NAD83 to NAD27 transform values do not agree with transforms done using BM.

What is "BM"?

> I have applied the 1983 to 1927 shift values provided in the data sheets and
> compared these to an actual transform run. The transform shows a
> difference,
> for instance for point HT0774, of a small amount.
>
>
>    Data sheet (NAD83):   37.77092832 N     -122.39812240
>    Data sheet (NAD27):   37.77098056 N     -122.39707500
>
>    Transform 83 to 27:   37.77099882 N     -122.39704051

Are you using the "conus" grid file? If so, I think you are outside of
its bounds. Another possible source of error is which NAD83 the NGS
datasheet is referring to. Might it be a newer NAD83 such as NAD83/96
or "HARN" or similar?

Rich


-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From gdt at ir.bbn.com  Tue Jun 21 18:45:52 2011
From: gdt at ir.bbn.com (Greg Troxel)
Date: Tue, 21 Jun 2011 21:45:52 -0400
Subject: [Proj] NGS Control Points
In-Reply-To: <4E00CA98.8040909@dgi.com> (Robert McFaul's message of "Tue, 21
	Jun 2011 09:45:12 -0700")
References: <4E00CA98.8040909@dgi.com>
Message-ID: <rmiboxqzlin.fsf@fnord.ir.bbn.com>


  I have noticed that control points from the National Geodetic Survey (USA)
  NAD83 to NAD27 transform values do not agree with transforms done using BM.

BM?

Coordinates for stations in both NAD27 and NAD83 are the result of
large-scale adjustments.  All coordinates have errors, generally more so
in NAD27.  Datum shifts are meant to apply over areas, and will not
match any particular control point.

Someone more knowledgable with your area will have to comment on whether
a 1m discrepancy indicates a problem; my guess is that it does not.


From ndzinn at comcast.net  Tue Jun 21 19:17:40 2011
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Tue, 21 Jun 2011 21:17:40 -0500
Subject: [Proj] NGS Control Points
Message-ID: <DA35F0C43C134AA1B0F343C8E8580127@NoelHmPC>

> BM?

Blue Marble, perhaps ... a commercial "geographic calculator", which can do
this transformation in many ways depending upon one's choice of method.

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)

-----Original Message----- 
From: Greg Troxel
Sent: Tuesday, June 21, 2011 8:45 PM
To: Robert McFaul
Cc: proj at lists.maptools.org
Subject: Re: [Proj] NGS Control Points


  I have noticed that control points from the National Geodetic Survey (USA)
  NAD83 to NAD27 transform values do not agree with transforms done using
BM.

BM?

Coordinates for stations in both NAD27 and NAD83 are the result of
large-scale adjustments.  All coordinates have errors, generally more so
in NAD27.  Datum shifts are meant to apply over areas, and will not
match any particular control point.

Someone more knowledgable with your area will have to comment on whether
a 1m discrepancy indicates a problem; my guess is that it does not.
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj 




From Mikael.Rittri at carmenta.com  Wed Jun 22 03:44:26 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Wed, 22 Jun 2011 10:44:26 +0000
Subject: [Proj] proj=undef ??
In-Reply-To: <29293893.9027591308681799896.JavaMail.support.mn@elisanet.fi>
References: <29293893.9027591308681799896.JavaMail.support.mn@elisanet.fi>
Message-ID: <E4AB3DD44D22854B819908379DE4AD493885AA2E@SETHNWS023.carmenta.se>

Janne, you wrote:

> simply since you don't need any projection to do datum calculations.

Do you mean that datum shifts can be done in longlat? True, but it 
was you who said that the coordinates were not in longlat but in 
some "undef" projection.  I though "undef" meant that you had no 
idea of how those coordinates are related to longlat.  

Let't take a concrete example:

proj=undef
ellps=bessel
towgs84=123,456,789
no_defs 

Now, I say that the input point is 

53479811	97344703

Can you tell me how this point could possibly be translated to 

proj=undef
datum=WGS84

Or maybe you can tell me under what circumstances you want to 
use such a feature?

-- Mikael 

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of support.mn at elisanet.fi
Sent: den 21 juni 2011 20:43
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] proj=undef ??

Mikael,

simply since you don't need any prjection to do datum calculations.

Janne.

----------------------------

Mikael Rittri [Mikael.Rittri at carmenta.com] kirjoitti: 
> Hello Janne,
> if I understand you right, what you want is impossible.  
> 
> If the projection is unknown, any input coordinates will be 
> non-georeferenced. So, how could the datum shift machinery do anything 
> on coordinates that cannot be interpreted?
> 
> Maybe I misunderstand what you want to do.
> 
> Mikael Rittri
> Carmenta
> Sweden
> http://www.carmenta.com
> 
> -----Original Message-----
> From: proj-bounces at lists.maptools.org 
> [mailto:proj-bounces at lists.maptools.org] On Behalf Of 
> support.mn at elisanet.fi
> Sent: den 19 juni 2011 12:30
> To: proj at lists.maptools.org
> Subject: [Proj] proj=undef ??
> 
> Hello,
> 
> there is a need to have an undefined projection with possible datum shift like:
> 
> proj=undef
> ellps=bessel
> towgs84=.....
> no_defs
> 
> That would then transfer the projection input to output without doing any forward or inverse calculations even if those routines called but allowing datum shifting.
> 
> So the absolutely minimal definition would be
> 
> proj=undef
> datum=undef
> 
> or shorter version
> 
> proj=undef
> 
> and that would feed all input directly to the output. Those switches would allow the end user to control the handling of the data.
> 
> So the "proj=undef" is same as not doing anything by the projection library if called but not giving any error messages about missing projection but doing all datum shifting if requested. Any ideas?
> 
> Regards: Janne.
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From cjmce at lsu.edu  Wed Jun 22 12:21:54 2011
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 22 Jun 2011 14:21:54 -0500
Subject: [Proj] NGS Control Points
References: <4E00CA98.8040909@dgi.com>
	<BANLkTinWC2xoPb-_MO7698jasuiN1PEudw@mail.gmail.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7026A6A2B@email002.lsu.edu>

I did a search on this "Bench Mark."  It has practically zero records in the National Database other than an elevation listed as an integer (6) and a horizontal position truncated to integer arc seconds.  This is apparently a coordinate that was scaled off of a topographic map and such "positions" are not considered good to better than  ±100 feet.
 
Now using an official datum transformation package such as NADCON can commonly yield positions to an accuracy of up to ±0.1 foot, but the final value can not be better than the original accuracy of the point.  There's more than one lookup table for NADCPN depending on whether you are using original NAD83 adjustment values, or one of the more specialized adjustments since NAD83 was first published.  As far as I know, there's only two available versions of lookup tables for NADCON: the original adjustment and the HARN adjustment and the latter can only be used in concert with the former - it is a sequential process.
 
I suspect the point you used as an example is at best an intersection stations and was never occupied.
  
         Pid    Name                                    Lat        Lon           Elev    O o Hv
  ------ ----------------------------- ---------- ----------- --------- - - --
>HT0774 A C OF SF                     37 46 15. /122 23 53.       6.     1     N 

There's a new adjustment of the NAD83 that is being published on July 15th of this year.  The new "biggie" will be NAD22 in 2022.

 
Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3531
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group


________________________________

From: proj-bounces at lists.maptools.org on behalf of Richard Greenwood
Sent: Tue 21-Jun-11 14:32
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] NGS Control Points



On Tue, Jun 21, 2011 at 10:45 AM, Robert McFaul <robert at dgi.com> wrote:
> Hello,
>
> I have noticed that control points from the National Geodetic Survey (USA)
> NAD83 to NAD27 transform values do not agree with transforms done using BM.

What is "BM"?

> I have applied the 1983 to 1927 shift values provided in the data sheets and
> compared these to an actual transform run. The transform shows a
> difference,
> for instance for point HT0774, of a small amount.
>
>
>    Data sheet (NAD83):   37.77092832 N     -122.39812240
>    Data sheet (NAD27):   37.77098056 N     -122.39707500
>
>    Transform 83 to 27:   37.77099882 N     -122.39704051

Are you using the "conus" grid file? If so, I think you are outside of
its bounds. Another possible source of error is which NAD83 the NGS
datasheet is referring to. Might it be a newer NAD83 such as NAD83/96
or "HARN" or similar?

Rich


--
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110622/5d5bcf85/attachment.html>

From richard.greenwood at gmail.com  Wed Jun 22 19:14:54 2011
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed, 22 Jun 2011 20:14:54 -0600
Subject: [Proj] NGS Control Points
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7026A6A2B@email002.lsu.edu>
References: <4E00CA98.8040909@dgi.com>
	<BANLkTinWC2xoPb-_MO7698jasuiN1PEudw@mail.gmail.com>
	<B597ADFC46B67741B18EA6AA13613FF7026A6A2B@email002.lsu.edu>
Message-ID: <BANLkTikc2ruDZq6Q_3OmJUWRK4mXy0TpDw@mail.gmail.com>

On Wed, Jun 22, 2011 at 1:21 PM, Clifford J Mugnier <cjmce at lsu.edu> wrote:

> As far as I know, there's only two
> available versions of lookup tables for NADCON: the original adjustment and
> the HARN adjustment and the latter can only be used in concert with the
> former - it is a sequential process.

That's very interesting - I didn't realize that it was sequential, but
it surely makes sense when I think about it. Thanks.

Following up on my original reply to the original question - I
attempted to transform the point from NAD83 to NAD27 with NADCON
(actually I used CORPSCON) and it refused to process the
transformation because it was outside the conus grid shift files,
which are the only datum shift files that I have.

Rich

-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From leonidas_liakos at yahoo.gr  Thu Jun 23 02:43:03 2011
From: leonidas_liakos at yahoo.gr (leonidas)
Date: Thu, 23 Jun 2011 02:43:03 -0700 (PDT)
Subject: [Proj] Convert coordinates from ED50 to Greek Grid
Message-ID: <1308822183559-6507750.post@n2.nabble.com>

I need to convert some coordinates from ED50 (EPSG:4230) to Greek Grid
(EPSG:2100).I'm using the following parameters for cs2cs:
cs2cs +init=epsg:4230 +to +init=epsg:2100
but compared to already valid results, the output greek grid coordinates are
wrong. Do I have to use any datum shift. And If so, what are the appropriate
parameters for that? 


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Convert-coordinates-from-ED50-to-Greek-Grid-tp6507750p6507750.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From support.mn at elisanet.fi  Thu Jun 23 03:16:59 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Thu, 23 Jun 2011 13:16:59 +0300 (EEST)
Subject: [Proj] proj=undef ??
Message-ID: <9522542.9148441308824220485.JavaMail.support.mn@elisanet.fi>

Mikael,

if the projection is "undef" then you can not enter any
projected points, since there is no known projection!

But you can still enter latitudes and longitudes, and
that is exactly what people are doing.

Janne.

----------------------------------

Mikael Rittri [Mikael.Rittri at carmenta.com] kirjoitti: 
> Janne, you wrote:
> 
> > simply since you don't need any projection to do datum calculations.
> 
> Do you mean that datum shifts can be done in longlat? True, but it 
> was you who said that the coordinates were not in longlat but in 
> some "undef" projection.  I though "undef" meant that you had no 
> idea of how those coordinates are related to longlat.  
> 
> Let't take a concrete example:
> 
> proj=undef
> ellps=bessel
> towgs84=123,456,789
> no_defs 
> 
> Now, I say that the input point is 
> 
> 53479811	97344703

this is clearly a projected coordinate since
the values are  too large to be lat or lon. As
said if the proj="undef" then the coordinates
are passed through and are earth angular
(lat and lon).

You should here enter:

65.12312N 34.56W

for example.

> 
> Can you tell me how this point could possibly be translated to 
> 
> proj=undef
> datum=WGS84
> 

With datum shift that might give output such as:
65.2342N 34.52344W

> Or maybe you can tell me under what circumstances you want to 
> use such a feature?
> 

Many point file formats give values earth angular (lat and lon) and
never bother to project them to anything. They can still be datum shifted
but mostly in WGS84 nowadays.

My idea is that it is better to let the proj.4 library to handle this case than
to program an additional layer over it just to check if the projection is
undef and do nothing in that case.

So as the proj.4 library now can short circuit the case when one of the
datums is "undef" it should also be able to short circuit the case when
one of the projections is "undef" and it should pass all the values from
input to output assuming that the projection (or inverse projection) is
not required.

This feature would not affect any other calculations and mechanisms at
all it is just a short cut.

Janne.



From jagoncal at gmail.com  Thu Jun 23 04:59:29 2011
From: jagoncal at gmail.com (=?ISO-8859-1?Q?Jose_Gon=E7alves?=)
Date: Thu, 23 Jun 2011 12:59:29 +0100
Subject: [Proj] proj=undef ??
In-Reply-To: <9522542.9148441308824220485.JavaMail.support.mn@elisanet.fi>
References: <9522542.9148441308824220485.JavaMail.support.mn@elisanet.fi>
Message-ID: <BANLkTimxAQTSG7o7sLhoaQ56fHXnHp_dAQ@mail.gmail.com>

Isn't the "undef" projection the same as "+proj=longlat"? You do a datum
transformation of geographic coordinates with a command line as:

cs2cs +proj=longlat +ellps=bessel +towgs84=123,456,789 +to +proj=longlat
+ellps=GRS80 +towgs84=1,2,3

Regards

Jose Gonçalves



2011/6/23 <support.mn at elisanet.fi>

> Mikael,
>
> if the projection is "undef" then you can not enter any
> projected points, since there is no known projection!
>
> But you can still enter latitudes and longitudes, and
> that is exactly what people are doing.
>
> Janne.
>
> ----------------------------------
>
> Mikael Rittri [Mikael.Rittri at carmenta.com] kirjoitti:
> > Janne, you wrote:
> >
> > > simply since you don't need any projection to do datum calculations.
> >
> > Do you mean that datum shifts can be done in longlat? True, but it
> > was you who said that the coordinates were not in longlat but in
> > some "undef" projection.  I though "undef" meant that you had no
> > idea of how those coordinates are related to longlat.
> >
> > Let't take a concrete example:
> >
> > proj=undef
> > ellps=bessel
> > towgs84=123,456,789
> > no_defs
> >
> > Now, I say that the input point is
> >
> > 53479811      97344703
>
> this is clearly a projected coordinate since
> the values are  too large to be lat or lon. As
> said if the proj="undef" then the coordinates
> are passed through and are earth angular
> (lat and lon).
>
> You should here enter:
>
> 65.12312N 34.56W
>
> for example.
>
> >
> > Can you tell me how this point could possibly be translated to
> >
> > proj=undef
> > datum=WGS84
> >
>
> With datum shift that might give output such as:
> 65.2342N 34.52344W
>
> > Or maybe you can tell me under what circumstances you want to
> > use such a feature?
> >
>
> Many point file formats give values earth angular (lat and lon) and
> never bother to project them to anything. They can still be datum shifted
> but mostly in WGS84 nowadays.
>
> My idea is that it is better to let the proj.4 library to handle this case
> than
> to program an additional layer over it just to check if the projection is
> undef and do nothing in that case.
>
> So as the proj.4 library now can short circuit the case when one of the
> datums is "undef" it should also be able to short circuit the case when
> one of the projections is "undef" and it should pass all the values from
> input to output assuming that the projection (or inverse projection) is
> not required.
>
> This feature would not affect any other calculations and mechanisms at
> all it is just a short cut.
>
> Janne.
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110623/502070ff/attachment.html>

From EMiller at dfg.ca.gov  Thu Jun 23 07:45:57 2011
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Thu, 23 Jun 2011 07:45:57 -0700
Subject: [Proj] NGS Control Points
In-Reply-To: <BANLkTikc2ruDZq6Q_3OmJUWRK4mXy0TpDw@mail.gmail.com>
References: <4E00CA98.8040909@dgi.com>
	<BANLkTinWC2xoPb-_MO7698jasuiN1PEudw@mail.gmail.com>
	<B597ADFC46B67741B18EA6AA13613FF7026A6A2B@email002.lsu.edu>
	<BANLkTikc2ruDZq6Q_3OmJUWRK4mXy0TpDw@mail.gmail.com>
Message-ID: <4E02EF35.95FD.00E4.0@dfg.ca.gov>

>>> On 6/22/2011 at 7:14 PM, Richard Greenwood <richard.greenwood at gmail.com>
wrote:
 
> Following up on my original reply to the original question - I
> attempted to transform the point from NAD83 to NAD27 with NADCON
> (actually I used CORPSCON) and it refused to process the
> transformation because it was outside the conus grid shift files,
> which are the only datum shift files that I have.

That's interesting. The transform seems to work fine with the online NADCON tool.  And, considering that the position is on land in the city of San Francisco it should!

I know it's the "left coast" and all, but the position isn't even as far west as Cape Mendocino -- which is the farthest west point in California at roughly -124.41 longitude.

http://en.wikipedia.org/wiki/Cape_Mendocino (Geologically interesting and beautiful!)
-- 

Eric G. Miller
Staff Programmer
CA Dept. of Fish & Game





From richard.greenwood at gmail.com  Thu Jun 23 19:22:16 2011
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Thu, 23 Jun 2011 20:22:16 -0600
Subject: [Proj] NGS Control Points
In-Reply-To: <4E02EF35.95FD.00E4.0@dfg.ca.gov>
References: <4E00CA98.8040909@dgi.com>
	<BANLkTinWC2xoPb-_MO7698jasuiN1PEudw@mail.gmail.com>
	<B597ADFC46B67741B18EA6AA13613FF7026A6A2B@email002.lsu.edu>
	<BANLkTikc2ruDZq6Q_3OmJUWRK4mXy0TpDw@mail.gmail.com>
	<4E02EF35.95FD.00E4.0@dfg.ca.gov>
Message-ID: <BANLkTi=GW3BXosR8hNeLAjWKh660_sHpWg@mail.gmail.com>

On Thu, Jun 23, 2011 at 8:45 AM, Eric Miller <EMiller at dfg.ca.gov> wrote:
>>>> On 6/22/2011 at 7:14 PM, Richard Greenwood <richard.greenwood at gmail.com>
> wrote:
>
>> Following up on my original reply to the original question - I
>> attempted to transform the point from NAD83 to NAD27 with NADCON
>> (actually I used CORPSCON) and it refused to process the
>> transformation because it was outside the conus grid shift files,
>> which are the only datum shift files that I have.
>
> That's interesting. The transform seems to work fine with the online NADCON tool.  And, considering that the position is on land in the city of San Francisco it should!

My bad. I had entered the longitude as -122.39812240 (negative), but
122.39812240 (positive) works. CORPSCON is rather provincial.
Apologies for the confusion.

Rich

-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From strebe at aol.com  Fri Jun 24 13:36:00 2011
From: strebe at aol.com (strebe)
Date: Fri, 24 Jun 2011 13:36:00 -0700
Subject: [Proj] Optimal Albers Standard Parallels
Message-ID: <69ED2B82.846E.4BDD.88BE.AA9B2535F738@aol.com>

Colleagues:

I received an inquiry off list about the posting below from February 2010, so I will update the thread with recent developments.

I have since stumbled onto N. Tissot’s work on this problem* and found that his solution yields the same results as mine. He was a lot smarter than I am, though, so his formulation is much more compact. He rolled the constraints into the Albers formula itself, a move that collapses away much of the calculation.

phiN = northern limit of region of interest
phiS = southern limit of region of interest

      Initialization:
	double		delta (0.5 * (phiN - phiS));
	double 		phi0 (0.5 * (phiN + phiS));
	double		cosDelta = cos (delta);

	n = sin (phi0);
	rN = 1.0 / n;
	C = 0.5 * (n/cosDelta + cosDelta*rN);

     Per point:
	double		rho = sqrt (2.0 * rN * (C - sin (phi)));
	double		theta = n * lambda;

	x = rho * sin (theta);
	y = -rho * cos (theta);


Regards,
— daan Strebe

* 1881, Mémoire sur la représentation des surfaces et les projections des cartes géographiques: Paris, Gauthier Villars, 337 p. + 60 p. tables.

______

[Resending minus tables, since they exceeded the 40K limit for posting.]

On Feb 16, 2010, at 3:01:04 AM, "Jan Hartmann" <[hidden email]> wrote:
Do you have a programmatic version of the algorithm? It's something that would be really useful for a global map provider. I am working with the Royal Tropical Institute here in Amsterdam (www.kit.nl), on an index for their 10.000s of historical maps from all over the globe. In the long run we would like to offer  some thematic functionality, with an optimal projection
I have no program code (that I can find or recall), though I found the Maple V worksheet I constructed at the time, and from which I made the corrections noted below. I also found tables I calculated giving optimal standard parallels for pairs of bounding parallels.

On Feb 16, 2010, at 3:57:03 AM, Oscar van Vlijmen <ovv at hetnet.nl> wrote:
Very interesting!
But, could you please balance the parentheses in equation 4 (and 3), because 
equation 4 cannot be calculated.

Eek. Yes. Correcting, and using more uniform notation:

1) sin (phi[0]) = A +/- sqrt (A^2 - 1)
2) A = [sin (phi[N]) * cos^2 (phi[S]) - sin (phi[S]) * cos^2 (phi[N])] /
    [cos^2 (phi[S]) - cos^2 (phi[N])]
3) sin (phi[2]) = [sin (phi[1]) - 2 * sin (phi[0]) + sin (phi[1]) * sin^2 (phi[0])] /
    [2 * sin (phi[0]) * sin (phi[1]) - sin^2 (phi[0]) - 1]
4) cos^2 (phi[1]) * sqrt [1 + sin^2 (phi[0]) - 2 * sin (phi[0]) * sin (phi[S])] -
 cos (phi[S]) * [1 + sin^2 (phi[0]) - 2 * sin (phi[0]) * sin (phi[1])] = 0

Equation (4) is of the form

5) a * cos^2 (phi[1]) + b * sin (phi[1]) + c = 0

which has a closed-form solution, though it is a little messy. There

a = sqrt [1 + sin^2 (phi[0]) - 2 * sin (phi[0]) * sin (phi[S])]
b = 2 * cos (phi[S]) * sin (phi[0])
c = - cos (phi[S]) - cos (phi[S]) * sin^2 (phi[0])

with solution

6) phi[1] = Atan2 (-[a*x^2 + c]/b], x)

where

7) x = +/- sqrt (-4*a*c - 2*b^2 +/- 2*z) / (2*a)

and

8) z = sqrt (4*a*b^2*c + b^4 + 4*a^2*b^2)

The sign for (1) is chosen as the opposite of the average of the signs of the northern and southern bounding parallels. Using all combinations of signs in (7) yields four solutions. The two that are between phiS and phiN are the two of interest. (3) becomes superfluous in this scenario, since it yields the same as one of the combinations. I have supplied a few examples below. rn is the inset of the northern standard parallel as a ratio of the latitudinal span of the region of interest; rs is the southern.

Regards,
— daan Strebe


phi[S] = 20    phi[2] = 46.34188   rn = 0.12192
phi[N] = 50 phi[1] = 25.06720   rs = 0.16890

phi[S] = 25 phi[2] = 77.03289   rn = 0.05393
phi[N] = 80 phi[1] = 37.74930   rs = 0.23181

phi[S] = 30 phi[2] = 38.61324   rn = 0.13860
phi[N] = 40 phi[1] = 31.53993   rs = 0.15390

phi[S] = 50 phi[2] = 58.69310   rn = 0.13068
phi[N] = 60 phi[1] = 51.61978   rs = 0.16200


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110624/35580af8/attachment.html>

From support.mn at elisanet.fi  Sat Jun 25 08:49:42 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Sat, 25 Jun 2011 18:49:42 +0300 (EEST)
Subject: [Proj] proj=undef ??
Message-ID: <25068074.9145611309016983363.JavaMail.support.mn@elisanet.fi>

Jose,

no it is not... "latlong" is defined as follows:

FORWARD(forward);
        xy.x = lp.lam / P->a;
        xy.y = lp.phi / P->a;
        return xy;
}

INVERSE(inverse);
        lp.phi = xy.y * P->a;
        lp.lam = xy.x * P->a;
        return lp;
}

it looks like they are multiplied by the major axis a.



I think what we needed for "nodef" is ...

FORWARD(forward);
        xy.x = lp.lam ;
        xy.y = lp.phi;
        return xy;
}

INVERSE(inverse);
        lp.phi = xy.y;
        lp.lam = xy.x;
        return lp;
}

Regards: Janne.

------------------------------------

Jose Gonçalves [jagoncal at gmail.com] kirjoitti: 
> Isn't the "undef" projection the same as "+proj=longlat"? You do a datum
> transformation of geographic coordinates with a command line as:
> 
> cs2cs +proj=longlat +ellps=bessel +towgs84=123,456,789 +to +proj=longlat
> +ellps=GRS80 +towgs84=1,2,3
> 
> Regards
> 
> Jose Gonçalves
> 
> 
> 
> 2011/6/23 <support.mn at elisanet.fi>
> 
> > Mikael,
> >
> > if the projection is "undef" then you can not enter any
> > projected points, since there is no known projection!
> >
> > But you can still enter latitudes and longitudes, and
> > that is exactly what people are doing.
> >
> > Janne.
> >
> > ----------------------------------
> >
> > Mikael Rittri [Mikael.Rittri at carmenta.com] kirjoitti:
> > > Janne, you wrote:
> > >
> > > > simply since you don't need any projection to do datum calculations.
> > >
> > > Do you mean that datum shifts can be done in longlat? True, but it
> > > was you who said that the coordinates were not in longlat but in
> > > some "undef" projection.  I though "undef" meant that you had no
> > > idea of how those coordinates are related to longlat.
> > >
> > > Let't take a concrete example:
> > >
> > > proj=undef
> > > ellps=bessel
> > > towgs84=123,456,789
> > > no_defs
> > >
> > > Now, I say that the input point is
> > >
> > > 53479811      97344703
> >
> > this is clearly a projected coordinate since
> > the values are  too large to be lat or lon. As
> > said if the proj="undef" then the coordinates
> > are passed through and are earth angular
> > (lat and lon).
> >
> > You should here enter:
> >
> > 65.12312N 34.56W
> >
> > for example.
> >
> > >
> > > Can you tell me how this point could possibly be translated to
> > >
> > > proj=undef
> > > datum=WGS84
> > >
> >
> > With datum shift that might give output such as:
> > 65.2342N 34.52344W
> >
> > > Or maybe you can tell me under what circumstances you want to
> > > use such a feature?
> > >
> >
> > Many point file formats give values earth angular (lat and lon) and
> > never bother to project them to anything. They can still be datum shifted
> > but mostly in WGS84 nowadays.
> >
> > My idea is that it is better to let the proj.4 library to handle this case
> > than
> > to program an additional layer over it just to check if the projection is
> > undef and do nothing in that case.
> >
> > So as the proj.4 library now can short circuit the case when one of the
> > datums is "undef" it should also be able to short circuit the case when
> > one of the projections is "undef" and it should pass all the values from
> > input to output assuming that the projection (or inverse projection) is
> > not required.
> >
> > This feature would not affect any other calculations and mechanisms at
> > all it is just a short cut.
> >
> > Janne.
> >
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
> >
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From support.mn at elisanet.fi  Sat Jun 25 10:42:41 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Sat, 25 Jun 2011 20:42:41 +0300 (EEST)
Subject: [Proj] proj=undef ??
Message-ID: <906323.9147901309023761666.JavaMail.support.mn@elisanet.fi>

Hello,

to be exact, we needed pseudo projections
for degrees and radians:

"proj=degr"

FORWARD(forward);
xy.x = lp.lam*RAD_TO_DEG;
xy.y = lp.phi*RAD_TO_DEG;
return xy;
}

INVERSE(inverse);
lp.phi = xy.y*DEG_TO_RAD;
lp.lam = xy.x*DEG_TO_RAD;
return lp;
}


and "proj=rad" or  "proj=undef"

FORWARD(forward);
xy.x = lp.lam;
xy.y = lp.phi;
return xy;
}

INVERSE(inverse);
lp.phi = xy.y;
lp.lam = xy.x;
return lp;
}

Regards: Janne.




From warmerdam at pobox.com  Sat Jun 25 11:12:08 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat, 25 Jun 2011 14:12:08 -0400
Subject: [Proj] proj=undef ??
In-Reply-To: <906323.9147901309023761666.JavaMail.support.mn@elisanet.fi>
References: <906323.9147901309023761666.JavaMail.support.mn@elisanet.fi>
Message-ID: <4E0624F8.1050301@pobox.com>

On 11-06-25 01:42 PM, support.mn at elisanet.fi wrote:
> Hello,
>
> to be exact, we needed pseudo projections
> for degrees and radians:
>
> "proj=degr"

Janne,

I would think adding an angular units keyword would be a better
approach to this though it is confusing since the user facing units
have always been degrees and the API level units have always been
radians.  I'm not really clear how this relates to applying datum
shifts.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From Mikael.Rittri at carmenta.com  Mon Jun 27 04:09:15 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 27 Jun 2011 11:09:15 +0000
Subject: [Proj] Convert coordinates from ED50 to Greek Grid
In-Reply-To: <1308822183559-6507750.post@n2.nabble.com>
References: <1308822183559-6507750.post@n2.nabble.com>
Message-ID: <E4AB3DD44D22854B819908379DE4AD493885B0DB@SETHNWS023.carmenta.se>

Hello Leonidas,
you wrote:

> I need to convert some coordinates from ED50 (EPSG:4230) 
> to Greek Grid (EPSG:2100).I'm using the following parameters
> for cs2cs:
> 
>     cs2cs +init=epsg:4230 +to +init=epsg:2100 
>
> but compared to already valid results, the output greek grid 
> coordinates are wrong. Do I have to use any datum shift. And
> if so, what are the appropriate parameters for that? 


Short answer: 

I suggest using

    cs2cs +init=epsg:4230 +towgs84=-86,-92.2,-127.5 +to +init=epsg:2100

but the datum shift may not be accurate enough (should be better than
nothing, though).


Long answer:

The Greek Grid is based on GGRS87 (Greek Geodetic Reference System 1987), 
and this datum has an appropriate datum shift in the file nad/epsg, at
least since Proj version 4.6.1.  

However, ED50 has a datum shift in the trunk, but I think not in Proj 
version 4.7. So you need to add one.  

At http://www.epsg-registry.org , I have searched with "query by filter", using

Type: Coordinate Transformation
Area: Greece

This gives three published datum shifts from ED50 to WGS 84:

Proj syntax			 Name			   Code	   Accuracy	 Area of Use				Information Source

towgs84=-87,-98,-121	 ED50 to WGS 84 (1)  EPSG:1133	 10 m	 West Europe (including Greece)	U.S. DMA TR8350.2

towgs84=-84,-95,-130 	 ED50 to WGS 84 (8)  EPSG:1140	 44 m	 Greece - onshore and offshore	U.S. DMA TR8350.2

towgs84=-86,-92.2,-127.5 ED50 to WGS 84 (19) EPSG:1440	999 m	 Greece - onshore and offshore	Geodesy Department; Hellenic Petroleum s.a. 

If you would use Proj from the trunk, you will automatically get the 
first datum shift for ED50. 

Otherwise, you must choose manually. In this case, the Accuracy field 
isn't much help when choosing. The confidence of the accuracy is not 
specified by EPSG, but varies with the information source.  When it 
happens to be U.S. DMA TR8350.2, I think it is one sigma, so the error
is worse about one third of the time. If so, then the accuraries of 
the first two datum shifts cannot be usefully compared, even though 
they come from the same information source, since they cover different
areas.  
   On the other hand, since DMA has bothered to give a specific Greek
datum shift, in addition to the general for West Europe, they must 
think it is more accurate in Greece. 
   Personally, I would use the third datum shift, simply because it
comes from a Greek information source. The Accuracy 999 m is used by
EPSG to mean "don't know".  (This datum shift doesn't differ from the 
Greek DMA datum shift by more than about 4 meters horizontally.) 

I don't know why the accuracy for ED50 in Greece should be as bad as
44 m. Maybe it is a pessimistic estimate, or maybe all those islands 
made the ED50 realisation more difficult. 

Best regards,
Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of leonidas
Sent: den 23 juni 2011 11:43
To: proj at lists.maptools.org
Subject: [Proj] Convert coordinates from ED50 to Greek Grid

I need to convert some coordinates from ED50 (EPSG:4230) to Greek Grid (EPSG:2100).I'm using the following parameters for cs2cs:
cs2cs +init=epsg:4230 +to +init=epsg:2100 but compared to already valid results, the output greek grid coordinates are wrong. Do I have to use any datum shift. And If so, what are the appropriate parameters for that? 


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Convert-coordinates-from-ED50-to-Greek-Grid-tp6507750p6507750.html
Sent from the PROJ.4 mailing list archive at Nabble.com.
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From support.mn at elisanet.fi  Mon Jun 27 08:01:57 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Mon, 27 Jun 2011 18:01:57 +0300 (EEST)
Subject: [Proj] proj=undef ??
Message-ID: <6050748.6226191309186918047.JavaMail.support.mn@elisanet.fi>

Frank,

mayby there are 2 possibilities to give these pseudo
projections. Either:

proj=undef
units=degr

or directly:

proj=degr

----------

proj=undef
units=rad

or directly:

proj=rad

I am not sure what would be the exact difference? What
does the "units=...." statement exactly do?

Regarding to datum shifts this should not affect them
at all... they should continue to work as they always
have... the projection in this case is just very simple..
it does nothing at all just transfers the input to output
[the data is already earth angular forward or inverse].

BTW: I have somewhere seen

proj=wgs84

is that a legal proj.4 projection? and what does it
mean?

Janne.

-------------------------

Frank Warmerdam [warmerdam at pobox.com] kirjoitti: 
> On 11-06-25 01:42 PM, support.mn at elisanet.fi wrote:
> > Hello,
> >
> > to be exact, we needed pseudo projections
> > for degrees and radians:
> >
> > "proj=degr"
> 
> Janne,
> 
> I would think adding an angular units keyword would be a better
> approach to this though it is confusing since the user facing units
> have always been degrees and the API level units have always been
> radians.  I'm not really clear how this relates to applying datum
> shifts.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From ndzinn at comcast.net  Tue Jun 28 04:43:47 2011
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Tue, 28 Jun 2011 06:43:47 -0500
Subject: [Proj] Ellipsoidal Orthographic
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD493885B0DB@SETHNWS023.carmenta.se>
References: <1308822183559-6507750.post@n2.nabble.com>
	<E4AB3DD44D22854B819908379DE4AD493885B0DB@SETHNWS023.carmenta.se>
Message-ID: <0918836EC51E45AC9CFD2301E9B53CB4@NoelHmPC>

The only equations for the ellipsoidal orthographic that I've ever found 
published (in a book or journal) are those of Bugayevskiy and Snyder (1995), 
which are complicated and (the authors acknowledge) truncated.  Following 
EPSG Guidance Note 7, Part 2, I've prepared a presentation on the 
ellipsoidal orthographic that offers simple, exact equations.  The 
derivation also suggests that the ellipsoidal orthographic is unique among 
projections, being transitional between distorted cartography in 2D and 
undistorted visualization in 3D on a computer in ECEF or ENU (topocentric) 
coordinates.  A link to the presentation follows:

http://www.hydrometronics.com/downloads/Ellipsoidal%20Orthographic%20Projection.pdf

Does anyone in this group have other sources of information on the 
ellipsoidal orthographic?

Noel

PS - Scroll the page if it presents in black

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)




From cjmce at lsu.edu  Tue Jun 28 07:20:02 2011
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 28 Jun 2011 09:20:02 -0500
Subject: [Proj] Ellipsoidal Orthographic
References: <1308822183559-6507750.post@n2.nabble.com><E4AB3DD44D22854B819908379DE4AD493885B0DB@SETHNWS023.carmenta.se>
	<0918836EC51E45AC9CFD2301E9B53CB4@NoelHmPC>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7026A6A52@email002.lsu.edu>

I have always considered the identical equations to represent the Polyhedric projection (also known as the Müffling projection).  At large scales 1:100,000, 1:50,000 it seems to fit perfectly in my personal experience.  My first experience with the Local Space Rectangular was in 1968 at Army Map Service for the photo-triangulation of the Apollo Lunar Landing Map series.  It's a standard transformation in many photogrammetric photo-triangulation software packages.  See my treatment of the Polyhedric/Müffling projection in the Manual of Photogrammetry, 5th edition, 2004, Chapter 3, Section 3.1.2.2, page 189.  John Snyder and I did discuss that back in the 1980s, and I explained to him that this was exactly what I used to solve the infamous "Tampico Datum" problem of Mexico when I was doing some consulting work over at Offshore Navigation, Inc. back then.
 
Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3531
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group


________________________________

From: proj-bounces at lists.maptools.org on behalf of Noel Zinn (cc)
Sent: Tue 28-Jun-11 06:43
To: PROJ.4 and general Projections Discussions
Subject: [Proj] Ellipsoidal Orthographic



The only equations for the ellipsoidal orthographic that I've ever found
published (in a book or journal) are those of Bugayevskiy and Snyder (1995),
which are complicated and (the authors acknowledge) truncated.  Following
EPSG Guidance Note 7, Part 2, I've prepared a presentation on the
ellipsoidal orthographic that offers simple, exact equations.  The
derivation also suggests that the ellipsoidal orthographic is unique among
projections, being transitional between distorted cartography in 2D and
undistorted visualization in 3D on a computer in ECEF or ENU (topocentric)
coordinates.  A link to the presentation follows:

http://www.hydrometronics.com/downloads/Ellipsoidal%20Orthographic%20Projection.pdf

Does anyone in this group have other sources of information on the
ellipsoidal orthographic?

Noel

PS - Scroll the page if it presents in black

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com <http://www.hydrometronics.com/>  (website)


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110628/c58607f0/attachment.html>

From charles.karney at sri.com  Tue Jun 28 10:59:17 2011
From: charles.karney at sri.com (Charles Karney)
Date: Tue, 28 Jun 2011 13:59:17 -0400
Subject: [Proj] Ellipsoidal Orthographic
In-Reply-To: <0918836EC51E45AC9CFD2301E9B53CB4@NoelHmPC>
References: <1308822183559-6507750.post@n2.nabble.com>
	<E4AB3DD44D22854B819908379DE4AD493885B0DB@SETHNWS023.carmenta.se>
	<0918836EC51E45AC9CFD2301E9B53CB4@NoelHmPC>
Message-ID: <4E0A1675.4010308@sri.com>

Noel,

You use an iterative method to solve for the reverse projection.  But
the reverse projection can be written in closed form.  Recovering the 3d
position [x,y,z] from the easting and northing entails solving a
quadratic equation, so that you get 2 or 0 (or exceptionally 1) root, as
expected.

I can provide you with the outline of the solution if you want.

   --Charles


On 06/28/11 07:43, Noel Zinn (cc) wrote:
> The only equations for the ellipsoidal orthographic that I've ever found
> published (in a book or journal) are those of Bugayevskiy and Snyder (1995),
> which are complicated and (the authors acknowledge) truncated.  Following
> EPSG Guidance Note 7, Part 2, I've prepared a presentation on the
> ellipsoidal orthographic that offers simple, exact equations.  The
> derivation also suggests that the ellipsoidal orthographic is unique among
> projections, being transitional between distorted cartography in 2D and
> undistorted visualization in 3D on a computer in ECEF or ENU (topocentric)
> coordinates.  A link to the presentation follows:
>
> http://www.hydrometronics.com/downloads/Ellipsoidal%20Orthographic%20Projection.pdf
>
> Does anyone in this group have other sources of information on the
> ellipsoidal orthographic?


From cjmce at lsu.edu  Tue Jun 28 11:41:28 2011
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 28 Jun 2011 13:41:28 -0500
Subject: [Proj] Ellipsoidal Orthographic
References: <1308822183559-6507750.post@n2.nabble.com><E4AB3DD44D22854B819908379DE4AD493885B0DB@SETHNWS023.carmenta.se><0918836EC51E45AC9CFD2301E9B53CB4@NoelHmPC>
	<4E0A1675.4010308@sri.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7026A6A5B@email002.lsu.edu>

Charles,
 
Using the closed form for the geocentric inverse is OK for surface mapping, but for a more universal application that will work with aerial photography and particularly with satellite imagery, the closed form deteriorates with altitude above the ellipsoid.  The iterative form will accommodate orbital imagery altitudes with no loss in computational precision.  That's a significant consideration since the "Oil Patch" indeed uses orbital imagery in their exploration activities.
 
Cliff
 
Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3531
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group


________________________________

From: proj-bounces at lists.maptools.org on behalf of Charles Karney
Sent: Tue 28-Jun-11 12:59
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Ellipsoidal Orthographic



Noel,

You use an iterative method to solve for the reverse projection.  But
the reverse projection can be written in closed form.  Recovering the 3d
position [x,y,z] from the easting and northing entails solving a
quadratic equation, so that you get 2 or 0 (or exceptionally 1) root, as
expected.

I can provide you with the outline of the solution if you want.

   --Charles


On 06/28/11 07:43, Noel Zinn (cc) wrote:
> The only equations for the ellipsoidal orthographic that I've ever found
> published (in a book or journal) are those of Bugayevskiy and Snyder (1995),
> which are complicated and (the authors acknowledge) truncated.  Following
> EPSG Guidance Note 7, Part 2, I've prepared a presentation on the
> ellipsoidal orthographic that offers simple, exact equations.  The
> derivation also suggests that the ellipsoidal orthographic is unique among
> projections, being transitional between distorted cartography in 2D and
> undistorted visualization in 3D on a computer in ECEF or ENU (topocentric)
> coordinates.  A link to the presentation follows:
>
> http://www.hydrometronics.com/downloads/Ellipsoidal%20Orthographic%20Projection.pdf
>
> Does anyone in this group have other sources of information on the
> ellipsoidal orthographic?
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110628/4b492a9e/attachment.html>

From charles.karney at sri.com  Tue Jun 28 12:13:58 2011
From: charles.karney at sri.com (Charles Karney)
Date: Tue, 28 Jun 2011 15:13:58 -0400
Subject: [Proj] Ellipsoidal Orthographic
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7026A6A5B@email002.lsu.edu>
References: <1308822183559-6507750.post@n2.nabble.com>
	<E4AB3DD44D22854B819908379DE4AD493885B0DB@SETHNWS023.carmenta.se>
	<0918836EC51E45AC9CFD2301E9B53CB4@NoelHmPC>
	<4E0A1675.4010308@sri.com>
	<B597ADFC46B67741B18EA6AA13613FF7026A6A5B@email002.lsu.edu>
Message-ID: <4E0A27F6.7070206@sri.com>

Cliff,

My remarks were about the orthographic projection; so in this case we
are talking about a point on the surface of the ellipsoid.

However, the closed form solution of the 3d problem (given [x,y,z], find
[phi,lam,h]) which entails solving a quartic equation *can* be made
accurate for any values of [x,y,z].  If you want to give me some
"challenge" coordinates to test out, I can feed them into
GeographicLib's CartConvert to see what pops out.

   --Charles

On 06/28/11 14:41, Clifford J Mugnier wrote:
> Charles,
> Using the closed form for the geocentric inverse is OK for surface
> mapping, but for a more universal application that will work with aerial
> photography and particularly with satellite imagery, the closed form
> deteriorates with altitude above the ellipsoid. The iterative form will
> accommodate orbital imagery altitudes with no loss in computational
> precision. That's a significant consideration since the "Oil Patch"
> indeed uses orbital imagery in their exploration activities.
> Cliff
> Clifford J. Mugnier, C.P., C.M.S.
> Chief of Geodesy,
> *Center for GeoInformatics*
> Department of Civil Engineering
> Patrick F. Taylor Hall 3531
> *LOUISIANA STATE UNIVERSITY *
> Baton Rouge, LA70803
> Voice and Facsimile:(225) 578-8536 [Academic]
> Voice and Facsimile:(225) 578-4578 [Research]
> Cell: (225) 328-8975 [Academic & Research]
> Honorary Life Member of the
> Louisiana Society of Professional Surveyors
> Fellow Emeritus of the ASPRS
> Member of the Americas Petroleum Survey Group
>
>
> ------------------------------------------------------------------------
> *From:* proj-bounces at lists.maptools.org on behalf of Charles Karney
> *Sent:* Tue 28-Jun-11 12:59
> *To:* PROJ.4 and general Projections Discussions
> *Subject:* Re: [Proj] Ellipsoidal Orthographic
>
> Noel,
>
> You use an iterative method to solve for the reverse projection. But
> the reverse projection can be written in closed form. Recovering the 3d
> position [x,y,z] from the easting and northing entails solving a
> quadratic equation, so that you get 2 or 0 (or exceptionally 1) root, as
> expected.
>
> I can provide you with the outline of the solution if you want.
>
> --Charles
>
>
> On 06/28/11 07:43, Noel Zinn (cc) wrote:
>  > The only equations for the ellipsoidal orthographic that I've ever found
>  > published (in a book or journal) are those of Bugayevskiy and Snyder
> (1995),
>  > which are complicated and (the authors acknowledge) truncated. Following
>  > EPSG Guidance Note 7, Part 2, I've prepared a presentation on the
>  > ellipsoidal orthographic that offers simple, exact equations. The
>  > derivation also suggests that the ellipsoidal orthographic is unique
> among
>  > projections, being transitional between distorted cartography in 2D and
>  > undistorted visualization in 3D on a computer in ECEF or ENU
> (topocentric)
>  > coordinates. A link to the presentation follows:
>  >
>  >
> http://www.hydrometronics.com/downloads/Ellipsoidal%20Orthographic%20Projection.pdf
>  >
>  > Does anyone in this group have other sources of information on the
>  > ellipsoidal orthographic?
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>

-- 
Charles Karney <charles.karney at sri.com>
SRI International, Princeton, NJ 08543-5300
Tel: +1 609 734 2312


From ndzinn at comcast.net  Tue Jun 28 13:25:32 2011
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Tue, 28 Jun 2011 15:25:32 -0500
Subject: [Proj] Ellipsoidal Orthographic
In-Reply-To: <4E0A1675.4010308@sri.com>
References: <1308822183559-6507750.post@n2.nabble.com>
	<E4AB3DD44D22854B819908379DE4AD493885B0DB@SETHNWS023.carmenta.se>
	<0918836EC51E45AC9CFD2301E9B53CB4@NoelHmPC>
	<4E0A1675.4010308@sri.com>
Message-ID: <746120DA53934ED98BAAFA1B16FCF560@NoelHmPC>

Thanks, Charles.  I'd like to see that.  You have my e-dress ... or post to 
the list.  -Noel

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)

-----Original Message----- 
From: Charles Karney
Sent: Tuesday, June 28, 2011 12:59 PM
To: PROJ.4 and general Projections Discussions
Cc: Noel Zinn (cc)
Subject: Re: [Proj] Ellipsoidal Orthographic

Noel,

You use an iterative method to solve for the reverse projection.  But
the reverse projection can be written in closed form.  Recovering the 3d
position [x,y,z] from the easting and northing entails solving a
quadratic equation, so that you get 2 or 0 (or exceptionally 1) root, as
expected.

I can provide you with the outline of the solution if you want.

   --Charles


On 06/28/11 07:43, Noel Zinn (cc) wrote:
> The only equations for the ellipsoidal orthographic that I've ever found
> published (in a book or journal) are those of Bugayevskiy and Snyder 
> (1995),
> which are complicated and (the authors acknowledge) truncated.  Following
> EPSG Guidance Note 7, Part 2, I've prepared a presentation on the
> ellipsoidal orthographic that offers simple, exact equations.  The
> derivation also suggests that the ellipsoidal orthographic is unique among
> projections, being transitional between distorted cartography in 2D and
> undistorted visualization in 3D on a computer in ECEF or ENU (topocentric)
> coordinates.  A link to the presentation follows:
>
> http://www.hydrometronics.com/downloads/Ellipsoidal%20Orthographic%20Projection.pdf
>
> Does anyone in this group have other sources of information on the
> ellipsoidal orthographic? 




From ndzinn at comcast.net  Tue Jun 28 15:14:00 2011
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Tue, 28 Jun 2011 17:14:00 -0500
Subject: [Proj] Ellipsoidal Orthographic
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7026A6A52@email002.lsu.edu>
References: <1308822183559-6507750.post@n2.nabble.com><E4AB3DD44D22854B819908379DE4AD493885B0DB@SETHNWS023.carmenta.se><0918836EC51E45AC9CFD2301E9B53CB4@NoelHmPC>
	<B597ADFC46B67741B18EA6AA13613FF7026A6A52@email002.lsu.edu>
Message-ID: <9FCAF7A9B13543A1A0D00947C1F50560@NoelHmPC>

[Proj] Ellipsoidal OrthographicThanks, Cliff.  A search of “Polyhedric Müffling” turns up a trail of your postings in many forums, but no “beef” (equations).  I’m off to the library tomorrow to find the 2004 photogrammetry manual.  Cheers.

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)


From: Clifford J Mugnier 
Sent: Tuesday, June 28, 2011 9:20 AM
To: PROJ.4 and general Projections Discussions 
Subject: Re: [Proj] Ellipsoidal Orthographic

I have always considered the identical equations to represent the Polyhedric projection (also known as the Müffling projection).  At large scales 1:100,000, 1:50,000 it seems to fit perfectly in my personal experience.  My first experience with the Local Space Rectangular was in 1968 at Army Map Service for the photo-triangulation of the Apollo Lunar Landing Map series.  It's a standard transformation in many photogrammetric photo-triangulation software packages.  See my treatment of the Polyhedric/Müffling projection in the Manual of Photogrammetry, 5th edition, 2004, Chapter 3, Section 3.1.2.2, page 189.  John Snyder and I did discuss that back in the 1980s, and I explained to him that this was exactly what I used to solve the infamous "Tampico Datum" problem of Mexico when I was doing some consulting work over at Offshore Navigation, Inc. back then.

Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3531
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group




--------------------------------------------------------------------------------
From: proj-bounces at lists.maptools.org on behalf of Noel Zinn (cc)
Sent: Tue 28-Jun-11 06:43
To: PROJ.4 and general Projections Discussions
Subject: [Proj] Ellipsoidal Orthographic


The only equations for the ellipsoidal orthographic that I've ever found
published (in a book or journal) are those of Bugayevskiy and Snyder (1995),
which are complicated and (the authors acknowledge) truncated.  Following
EPSG Guidance Note 7, Part 2, I've prepared a presentation on the
ellipsoidal orthographic that offers simple, exact equations.  The
derivation also suggests that the ellipsoidal orthographic is unique among
projections, being transitional between distorted cartography in 2D and
undistorted visualization in 3D on a computer in ECEF or ENU (topocentric)
coordinates.  A link to the presentation follows:

http://www.hydrometronics.com/downloads/Ellipsoidal%20Orthographic%20Projection.pdf

Does anyone in this group have other sources of information on the
ellipsoidal orthographic?

Noel

PS - Scroll the page if it presents in black

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj




--------------------------------------------------------------------------------
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110628/e43e512c/attachment.html>

From ndzinn at comcast.net  Wed Jun 29 07:33:52 2011
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Wed, 29 Jun 2011 09:33:52 -0500
Subject: [Proj] Ellipsoidal Orthographic
In-Reply-To: <9FCAF7A9B13543A1A0D00947C1F50560@NoelHmPC>
References: <1308822183559-6507750.post@n2.nabble.com><E4AB3DD44D22854B819908379DE4AD493885B0DB@SETHNWS023.carmenta.se><0918836EC51E45AC9CFD2301E9B53CB4@NoelHmPC><B597ADFC46B67741B18EA6AA13613FF7026A6A52@email002.lsu.edu>
	<9FCAF7A9B13543A1A0D00947C1F50560@NoelHmPC>
Message-ID: <4FD4D0F2F04B4C008AC5F8A1322B1B20@NoelHmPC>

[Proj] Ellipsoidal OrthographicCliff has saved me a trip to the "old-timey" library by sending me a PDF of the relevant chapter of the 2004 Manual of Photogrammetry.  The LSR equations are there as they were in 1980 by the name of geocentric local vertical (see Ellipsoidal Orthographic presentation).  There is also the statement, "When h0 = 0, and used only in a 2-dimensional case, it is equivalent to the old European Müffling or Polyeder (Polyhedric) projection commonly found in 18th and 19th century maps compiled with plane table and alidade."  As noted previously, Cliff has asserted similarly here and in other forums.  



You're peerless at what you do, Cliff, but what I mean by "beef" is more than an assertion, but corroboration in the form (for example) of a photocopy of some hoary document in Dutch or in von Müffling penmanship from your geodetic antiquarium.  When you were working for ONI in the eighties, I was doing a similar job for NCS.  You'll remember that our clients' motto was "trust but verify".  



One issue is whether von Müffling was using the LSR equations, but the other issue is whether he realized he was dealing with the ellipsoidal orthographic.  Have the authors of the Manual of Photogrammetry realized that?  It's not mentioned.  It first dawned on me in 2005.  I don't know when ESRI made the connection, but Dave Burrows communicated it to me 2007 and ESRI knew it before then.  I wish I knew if these were Snyder's equations for the ellipsoidal orthographic back in 1979, which he choose not to share.



Noel



Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)


From: Noel Zinn (cc) 
Sent: Tuesday, June 28, 2011 5:14 PM
To: PROJ.4 and general Projections Discussions 
Subject: Re: [Proj] Ellipsoidal Orthographic

Thanks, Cliff.  A search of “Polyhedric Müffling” turns up a trail of your postings in many forums, but no “beef” (equations).  I’m off to the library tomorrow to find the 2004 photogrammetry manual.  Cheers.

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)


From: Clifford J Mugnier 
Sent: Tuesday, June 28, 2011 9:20 AM
To: PROJ.4 and general Projections Discussions 
Subject: Re: [Proj] Ellipsoidal Orthographic

I have always considered the identical equations to represent the Polyhedric projection (also known as the Müffling projection).  At large scales 1:100,000, 1:50,000 it seems to fit perfectly in my personal experience.  My first experience with the Local Space Rectangular was in 1968 at Army Map Service for the photo-triangulation of the Apollo Lunar Landing Map series.  It's a standard transformation in many photogrammetric photo-triangulation software packages.  See my treatment of the Polyhedric/Müffling projection in the Manual of Photogrammetry, 5th edition, 2004, Chapter 3, Section 3.1.2.2, page 189.  John Snyder and I did discuss that back in the 1980s, and I explained to him that this was exactly what I used to solve the infamous "Tampico Datum" problem of Mexico when I was doing some consulting work over at Offshore Navigation, Inc. back then.

Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3531
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group




--------------------------------------------------------------------------------
From: proj-bounces at lists.maptools.org on behalf of Noel Zinn (cc)
Sent: Tue 28-Jun-11 06:43
To: PROJ.4 and general Projections Discussions
Subject: [Proj] Ellipsoidal Orthographic


The only equations for the ellipsoidal orthographic that I've ever found
published (in a book or journal) are those of Bugayevskiy and Snyder (1995),
which are complicated and (the authors acknowledge) truncated.  Following
EPSG Guidance Note 7, Part 2, I've prepared a presentation on the
ellipsoidal orthographic that offers simple, exact equations.  The
derivation also suggests that the ellipsoidal orthographic is unique among
projections, being transitional between distorted cartography in 2D and
undistorted visualization in 3D on a computer in ECEF or ENU (topocentric)
coordinates.  A link to the presentation follows:

http://www.hydrometronics.com/downloads/Ellipsoidal%20Orthographic%20Projection.pdf

Does anyone in this group have other sources of information on the
ellipsoidal orthographic?

Noel

PS - Scroll the page if it presents in black

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj




--------------------------------------------------------------------------------
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


--------------------------------------------------------------------------------
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110629/4638c28d/attachment.html>

From cjmce at lsu.edu  Wed Jun 29 10:14:34 2011
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 29 Jun 2011 12:14:34 -0500
Subject: [Proj] Ellipsoidal Orthographic
References: <1308822183559-6507750.post@n2.nabble.com><E4AB3DD44D22854B819908379DE4AD493885B0DB@SETHNWS023.carmenta.se><0918836EC51E45AC9CFD2301E9B53CB4@NoelHmPC><B597ADFC46B67741B18EA6AA13613FF7026A6A52@email002.lsu.edu><9FCAF7A9B13543A1A0D00947C1F50560@NoelHmPC>
	<4FD4D0F2F04B4C008AC5F8A1322B1B20@NoelHmPC>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7026A6A66@email002.lsu.edu>

Noel,
 
Facing a July 1 deadline for a new edition of the Manual, but I'll try to look up some hoary details afterwards.  I've got Jordan-Eggert as well as Helmert, Driencourt & Laborde, and some others that probably have the citations you need in various languages.
 
I am pretty certain that the original equations did not even come close to the LSR on the ellipsoid.  My contention is that the LSR is equivalent to the intention of the Polyhedric/Polyeder for the ellipsoid.  The old stuff always employed equivalent spheres, anyway.  That's where so much of the stuff came from back then that is now screwy-looking.  A few hold-outs are like the Rosenmund Oblique Cyllindrical and the Krovak Oblique Conic.
 
Cliff
 
Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3531
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group


________________________________

From: proj-bounces at lists.maptools.org on behalf of Noel Zinn (cc)
Sent: Wed 29-Jun-11 09:33
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Ellipsoidal Orthographic



Cliff has saved me a trip to the "old-timey" library by sending me a PDF of the relevant chapter of the 2004 Manual of Photogrammetry.  The LSR equations are there as they were in 1980 by the name of geocentric local vertical (see Ellipsoidal Orthographic presentation).  There is also the statement, "When h0 = 0, and used only in a 2-dimensional case, it is equivalent to the old European Müffling or Polyeder (Polyhedric) projection commonly found in 18th and 19th century maps compiled with plane table and alidade."  As noted previously, Cliff has asserted similarly here and in other forums.  

 

You're peerless at what you do, Cliff, but what I mean by "beef" is more than an assertion, but corroboration in the form (for example) of a photocopy of some hoary document in Dutch or in von Müffling penmanship from your geodetic antiquarium.  When you were working for ONI in the eighties, I was doing a similar job for NCS.  You'll remember that our clients' motto was "trust but verify".  

 

One issue is whether von Müffling was using the LSR equations, but the other issue is whether he realized he was dealing with the ellipsoidal orthographic.  Have the authors of the Manual of Photogrammetry realized that?  It's not mentioned.  It first dawned on me in 2005.  I don't know when ESRI made the connection, but Dave Burrows communicated it to me 2007 and ESRI knew it before then.  I wish I knew if these were Snyder's equations for the ellipsoidal orthographic back in 1979, which he choose not to share.

 

Noel

 

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)

 
From: Noel Zinn (cc) <mailto:ndzinn at comcast.net>  
Sent: Tuesday, June 28, 2011 5:14 PM
To: PROJ.4 and general Projections Discussions <mailto:proj at lists.maptools.org>  
Subject: Re: [Proj] Ellipsoidal Orthographic
 
Thanks, Cliff.  A search of "Polyhedric Müffling" turns up a trail of your postings in many forums, but no "beef" (equations).  I'm off to the library tomorrow to find the 2004 photogrammetry manual.  Cheers.
 
Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)

 
From: Clifford J Mugnier <mailto:cjmce at lsu.edu>  
Sent: Tuesday, June 28, 2011 9:20 AM
To: PROJ.4 and general Projections Discussions <mailto:proj at lists.maptools.org>  
Subject: Re: [Proj] Ellipsoidal Orthographic
 
I have always considered the identical equations to represent the Polyhedric projection (also known as the Müffling projection).  At large scales 1:100,000, 1:50,000 it seems to fit perfectly in my personal experience.  My first experience with the Local Space Rectangular was in 1968 at Army Map Service for the photo-triangulation of the Apollo Lunar Landing Map series.  It's a standard transformation in many photogrammetric photo-triangulation software packages.  See my treatment of the Polyhedric/Müffling projection in the Manual of Photogrammetry, 5th edition, 2004, Chapter 3, Section 3.1.2.2, page 189.  John Snyder and I did discuss that back in the 1980s, and I explained to him that this was exactly what I used to solve the infamous "Tampico Datum" problem of Mexico when I was doing some consulting work over at Offshore Navigation, Inc. back then.
 
Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3531
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group


________________________________

From: proj-bounces at lists.maptools.org on behalf of Noel Zinn (cc)
Sent: Tue 28-Jun-11 06:43
To: PROJ.4 and general Projections Discussions
Subject: [Proj] Ellipsoidal Orthographic



The only equations for the ellipsoidal orthographic that I've ever found
published (in a book or journal) are those of Bugayevskiy and Snyder (1995),
which are complicated and (the authors acknowledge) truncated.  Following
EPSG Guidance Note 7, Part 2, I've prepared a presentation on the
ellipsoidal orthographic that offers simple, exact equations.  The
derivation also suggests that the ellipsoidal orthographic is unique among
projections, being transitional between distorted cartography in 2D and
undistorted visualization in 3D on a computer in ECEF or ENU (topocentric)
coordinates.  A link to the presentation follows:

http://www.hydrometronics.com/downloads/Ellipsoidal%20Orthographic%20Projection.pdf

Does anyone in this group have other sources of information on the
ellipsoidal orthographic?

Noel

PS - Scroll the page if it presents in black

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com <http://www.hydrometronics.com/>  (website)


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


________________________________

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

________________________________

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110629/01803fc6/attachment.html>

From al001 at uni-koeln.de  Thu Jun 30 02:08:04 2011
From: al001 at uni-koeln.de (Irwin Scollar)
Date: Thu, 30 Jun 2011 11:08:04 +0200
Subject: [Proj] =?iso-8859-1?q?M=FCffling?=
In-Reply-To: <mailman.5.1309366802.21243.proj@lists.maptools.org>
References: <mailman.5.1309366802.21243.proj@lists.maptools.org>
Message-ID: <201106300908.p5U9856v027677@smtp-auth.uni-koeln.de>

An interesting historical link to Müffling and 
Tranchot which has biographies of both men and 
some details on their work which I have not seen elsewhere is:

http://freepages.history.rootsweb.ancestry.com/~mlcarl/Qu/Karten/Tranchot.htm

A link to the work of Müffling and the early 
Prussian map projection with a brief description of it's history is:

http://www.geog.fu-berlin.de/2bik/Kap4/kap4_1-05.php3

It's application in the Rhineland is:

http://de.wikipedia.org/wiki/Topographische_Aufnahme_der_Rheinlande

Scans of the original maps can be found at the 
GeoPortal of North-Rhine Westphalia:

http://www.tim-online.nrw.de/tim-online/initParams.do;jsessionid=615820C15DD0F8AB73AD2368A8295302

under the topic Historische Karten-Tranchot 1801-1828

While searching, I also learned from the Polish 
historical military mapping site:

http://english.mapywig.org/news.php

that early Imperial Russian maps used the Müffling polyhedric projection:

http://english.mapywig.org/Russian_and_Soviet_maps_EN.htm

Please post additional links related to the theme of Müffling's work.


Irwin Scollar



From charles.karney at sri.com  Thu Jun 30 04:35:33 2011
From: charles.karney at sri.com (Charles Karney)
Date: Thu, 30 Jun 2011 07:35:33 -0400
Subject: [Proj] =?iso-8859-1?q?M=FCffling?=
In-Reply-To: <201106300908.p5U9856v027677@smtp-auth.uni-koeln.de>
References: <mailman.5.1309366802.21243.proj@lists.maptools.org>
	<201106300908.p5U9856v027677@smtp-auth.uni-koeln.de>
Message-ID: <4E0C5F85.5010207@sri.com>

Bessel uses v. Mueffling's survey from Seeberg to Dunkirk as his worked
example in his paper on geodesics.

v. Mueffling's original paper
   http://adsabs.harvard.edu/full/1823AN......2...33V

Bessel's original paper
   http://adsabs.harvard.edu/full/1825AN......4..241B

and translation
   http://arxiv.org/abs/0908.1824
   http://dx.doi.org/10.1002/asna.201011352


From sperry2 at gov.nu.ca  Thu Jun 30 06:51:42 2011
From: sperry2 at gov.nu.ca (steveperry)
Date: Thu, 30 Jun 2011 06:51:42 -0700 (PDT)
Subject: [Proj] Optimal Albers Standard Parallels
In-Reply-To: <69ED2B82.846E.4BDD.88BE.AA9B2535F738@aol.com>
References: <69ED2B82.846E.4BDD.88BE.AA9B2535F738@aol.com>
Message-ID: <1309441902262-6533311.post@n2.nabble.com>

Daan:

I've noticed that your variable "lambda" is undefined. Is it a constant, or
calculated value?

Thanks,
Steve

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Re-Optimal-Albers-Standard-Parallels-tp6513439p6533311.html
Sent from the PROJ.4 mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110630/043221df/attachment.html>

From stevejking at talktalk.net  Thu Jun 30 07:22:29 2011
From: stevejking at talktalk.net (stevejking)
Date: Thu, 30 Jun 2011 07:22:29 -0700 (PDT)
Subject: [Proj] Eric Miller VB Wrapper +nadgrids=
Message-ID: <1309443749365-6533462.post@n2.nabble.com>

I'm trying to use Eric Millers VB api with Excel to convert from OSGB36 to
WGS84. I'm sucessfully using

>From "+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.999601 +x_0=400000 +y_0=-100000
+ellps=airy +towgs84=446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894
+units=m +no_defs"

To "+proj=longlat +a=6378137 +b=6378137 +datum=WGS84 +no_defs"

But when I try to use a grid shift file for better accuracy I get a DLL
Error 123. I'm using:

>From "+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.999601 +x_0=400000 +y_0=-100000
+ellps=airy +nadgrids=C:\Program Files\MapWindow\PROJ_NAD\OSTN02_NTv2.gsb
+units=m +no_defs"
 
*Does anyone know how to use a grid shift / nadgrids file with the VB api
please?*

The Proj_Lib environment variable is set as C:\Program
Files\MapWindow\PROJ_NAD. But I've also tried C:\proj\nad and moving the gsb
file.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Eric-Miller-VB-Wrapper-nadgrids-tp6533462p6533462.html
Sent from the PROJ.4 mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110630/fb92c366/attachment.html>

From stevejking at talktalk.net  Thu Jun 30 08:32:23 2011
From: stevejking at talktalk.net (stevejking)
Date: Thu, 30 Jun 2011 08:32:23 -0700 (PDT)
Subject: [Proj] About UTM projection: sphere, ellipsoid or both?
In-Reply-To: <BANLkTikk_jSeU7n0JZxLQ6R8T_woNiw6EA@mail.gmail.com>
References: <BANLkTikk_jSeU7n0JZxLQ6R8T_woNiw6EA@mail.gmail.com>
Message-ID: <1309447943140-6533779.post@n2.nabble.com>

Not sure if it answers your question. I've used UTM with the WGS84 ellipsoid.

"+proj=utm +zone=40 +north +ellps=WGS84 +datum=WGS84 +units=m  no_defs"

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/About-UTM-projection-sphere-ellipsoid-or-both-tp6399235p6533779.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From EMiller at dfg.ca.gov  Thu Jun 30 08:37:38 2011
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Thu, 30 Jun 2011 08:37:38 -0700
Subject: [Proj] Eric Miller VB Wrapper +nadgrids=
In-Reply-To: <1309443749365-6533462.post@n2.nabble.com>
References: <1309443749365-6533462.post@n2.nabble.com>
Message-ID: <4E0C35D2.95FD.00E4.0@dfg.ca.gov>

>>> On 6/30/2011 at 7:22 AM, stevejking <stevejking at talktalk.net> wrote:
> I'm trying to use Eric Millers VB api with Excel to convert from OSGB36 to
> WGS84. I'm sucessfully using
> 
> From "+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.999601 +x_0=400000 +y_0=-100000
> +ellps=airy +towgs84=446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894
> +units=m +no_defs"
> 
> To "+proj=longlat +a=6378137 +b=6378137 +datum=WGS84 +no_defs"
> 
> But when I try to use a grid shift file for better accuracy I get a DLL
> Error 123. I'm using:
> 
> From "+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.999601 +x_0=400000 +y_0=-100000
> +ellps=airy +nadgrids=C:\Program Files\MapWindow\PROJ_NAD\OSTN02_NTv2.gsb
> +units=m +no_defs"
>  
> *Does anyone know how to use a grid shift / nadgrids file with the VB api
> please?*
> 
> The Proj_Lib environment variable is set as C:\Program
> Files\MapWindow\PROJ_NAD. But I've also tried C:\proj\nad and moving the gsb
> file.

Verify that your transform works via the command line tool cs2cs.exe.

That old shim just basically exports a few function wrappers with the stdcall semantics so that they can be consumed by VB[A] code.  The arguments are passed straight to the functions that are wrapped.

The handling of file paths with spaces has historically been a problem.
-- 

Eric G. Miller
Staff Programmer
CA Dept. of Fish & Game





From al001 at uni-koeln.de  Thu Jun 30 08:53:27 2011
From: al001 at uni-koeln.de (Irwin Scollar)
Date: Thu, 30 Jun 2011 17:53:27 +0200
Subject: [Proj] =?iso-8859-1?q?M=FCffling?=
In-Reply-To: <mailman.422.1309433757.23818.proj@lists.maptools.org>
References: <mailman.422.1309433757.23818.proj@lists.maptools.org>
Message-ID: <201106301553.p5UFrRiO023547@smtp-auth.uni-koeln.de>

I forgot to include Müffling's autobiography. See Google Books for selections:

http://books.google.com/books?id=isbmzJQwFSkC&pg=PA14&dq=M%C3%BCffling&hl=en&ei=q5sMTqWXIYqj8QPfk9SbDg&sa=X&oi=book_result&ct=result&resnum=2&ved=0CDEQ6AEwAQ#v=onepage&q&f=false

Irwin Scollar



From strebe at aol.com  Thu Jun 30 10:20:22 2011
From: strebe at aol.com (strebe at aol.com)
Date: Thu, 30 Jun 2011 13:20:22 -0400
Subject: [Proj] Optimal Albers Standard Parallels
In-Reply-To: <1309441902262-6533311.post@n2.nabble.com>
References: <69ED2B82.846E.4BDD.88BE.AA9B2535F738@aol.com>
	<1309441902262-6533311.post@n2.nabble.com>
Message-ID: <8CE056120DB79E5-17C0-45035@webmail-m013.sysops.aol.com>


 
 Steve:


 Lambda would be the coordinate’s longitude, and phi the latitude.

Best,
— daan Strebe


 

 

-----Original Message-----
From: steveperry <sperry2 at gov.nu.ca>
To: proj at lists.maptools.org
Sent: Thu, Jun 30, 2011 6:51 am
Subject: Re: [Proj] Optimal Albers Standard Parallels


Daan:I've noticed that your variable "lambda" is undefined. Is it a constant, or calculated value?Thanks,Steve    

View this message in context: Re: Optimal Albers Standard Parallels
Sent from the PROJ.4 mailing list archive at Nabble.com.

 
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20110630/bfbb92b4/attachment.html>

From stevejking at talktalk.net  Thu Jun 30 15:41:00 2011
From: stevejking at talktalk.net (stevejking)
Date: Thu, 30 Jun 2011 15:41:00 -0700 (PDT)
Subject: [Proj] Eric Miller VB Wrapper +nadgrids=
In-Reply-To: <4E0C35D2.95FD.00E4.0@dfg.ca.gov>
References: <1309443749365-6533462.post@n2.nabble.com>
	<4E0C35D2.95FD.00E4.0@dfg.ca.gov>
Message-ID: <1309473660558-6535330.post@n2.nabble.com>

Thanks for your reply.
I've checked my transformation using cs2cs and it works great replacing the
+towgs84 bit with
+nadgrids=c:\proj\nad\OSTN02_TNv2.gsb

But for some reason in the VBA wrapper the nadgrids version returns a DLL
error 123, even when the less accurate +towgs84 version works.

Thanks again,
Steve

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Eric-Miller-VB-Wrapper-nadgrids-tp6533462p6535330.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From stevejking at talktalk.net  Thu Jun 30 17:33:42 2011
From: stevejking at talktalk.net (stevejking)
Date: Thu, 30 Jun 2011 17:33:42 -0700 (PDT)
Subject: [Proj] Eric Miller VB Wrapper +nadgrids=
In-Reply-To: <1309473660558-6535330.post@n2.nabble.com>
References: <1309443749365-6533462.post@n2.nabble.com>
	<4E0C35D2.95FD.00E4.0@dfg.ca.gov>
	<1309473660558-6535330.post@n2.nabble.com>
Message-ID: <1309480422655-6535733.post@n2.nabble.com>


stevejking wrote:
> 
> Thanks for your reply.
> I've checked my transformation using cs2cs and it works great replacing
> the +towgs84 bit with
> +nadgrids=c:\proj\nad\OSTN02_TNv2.gsb
> 
> 
Sorry, this worked with cs2cs Rel 4.7.1 (which I had with FWTools), but does
not work with cs2cs Rel 4.4.6 (the version that came with my proj.dll and
proj_api.dll). 4.4.6 returns *    *0.00 as the coordinates. So guess it's a
problem with the proj.dll version not supporting the nadgrids gsb file. 

Think I read somewhere how to make the proj_api.dll from a more recent
proj.dll. Where?

Cheers,
Steve 

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Eric-Miller-VB-Wrapper-nadgrids-tp6533462p6535733.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From EMiller at dfg.ca.gov  Thu Jun 30 18:17:13 2011
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Thu, 30 Jun 2011 18:17:13 -0700
Subject: [Proj] Eric Miller VB Wrapper +nadgrids=
In-Reply-To: <1309480422655-6535733.post@n2.nabble.com>
References: <1309443749365-6533462.post@n2.nabble.com>
	<4E0C35D2.95FD.00E4.0@dfg.ca.gov>
	<1309473660558-6535330.post@n2.nabble.com>
	<1309480422655-6535733.post@n2.nabble.com>
Message-ID: <4E0CBDA8.95FD.00E4.0@dfg.ca.gov>

>>> On 6/30/2011 at 5:33 PM, stevejking <stevejking at talktalk.net> wrote:

> stevejking wrote:
>> 
>> Thanks for your reply.
>> I've checked my transformation using cs2cs and it works great replacing
>> the +towgs84 bit with
>> +nadgrids=c:\proj\nad\OSTN02_TNv2.gsb
>> 
>> 
> Sorry, this worked with cs2cs Rel 4.7.1 (which I had with FWTools), but does
> not work with cs2cs Rel 4.4.6 (the version that came with my proj.dll and
> proj_api.dll). 4.4.6 returns *    *0.00 as the coordinates. So guess it's a
> problem with the proj.dll version not supporting the nadgrids gsb file. 
> 
> Think I read somewhere how to make the proj_api.dll from a more recent
> proj.dll. Where?

The source? See the proj_api.zip file.  I'm not sure if the proj_api.dll needs to be recompiled.  It may just work with newer proj.dll files.

http://ftp.dfg.ca.gov/Public/BDB/Tools/proj4/
-- 

Eric G. Miller
Staff Programmer
CA Dept. of Fish & Game





