From hamish_b at yahoo.com  Sun Mar  1 03:00:05 2009
From: hamish_b at yahoo.com (Hamish)
Date: Sun, 1 Mar 2009 03:00:05 -0800 (PST)
Subject: [Proj] Modern C functions
In-Reply-To: <200902281228.06756.geraldi.evenden@gmail.com>
Message-ID: <605398.24129.qm@web110012.mail.gq1.yahoo.com>


Gerald wrote:
> Thought for today: how do you sort Chinese when making the
> Beijing phone book?

No idea, but AIU the Icelandic phonebook is sorted by first name.
(no, seriously- surname lineage is based on your father's first name &
so only survives 1 generation; and sons and daughters from the same family
enjoy different last names)


well, you asked. (sort of)

have fun,
Hamish



      



From geraldi.evenden at gmail.com  Sun Mar  1 07:52:47 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 1 Mar 2009 10:52:47 -0500
Subject: [Proj] Accurate algorithm for geodesic calculations
In-Reply-To: <ssriqmuw6j9.fsf@petrel.petrel.org>
References: <ssriqmuw6j9.fsf@petrel.petrel.org>
Message-ID: <200903011052.47255.geraldi.evenden@gmail.com>

On Saturday 28 February 2009 5:17:14 pm Charles Karney wrote:
> I've implemented an algorithm for geodesic calculations for an ellipsoid
> with the following features:
>
>  * It uses expansions accurate to 8th order in the ellipsoid flattening.
>    This gives 12 nm accuracy using doubles and 6 pm accuracy using long
>    doubles.

Ahh!  Nothing like overkilling a subject.   ;-)

Given that all other work with the Earth misses by many order of magnitude the 
need for such precision.

Oh well.

	...

> The code itself (C++ classes and a program for doing geodesic
> calculations) is available at

Not to throw cold water on C++ which I can understand provides a useful 
service in certain applications but I feel that C++ contributes little, if 
anything, to small, limited application procedures.  Certainly, for someone 
with less than expert experience with C++, your code is nearly unreadable 
based upon previous experience.  In the TM code, C++ only obfuscated the 
algorithm.

Again, this is not a language war, only a comment on how to reach the widest 
audience.  Anyone who is an expert in C++ can easily understand a C procedure 
but the reverse in not true.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From support.mn at elisanet.fi  Mon Mar  2 00:36:14 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Mon, 2 Mar 2009 10:36:14 +0200 (EET)
Subject: [Proj] Accurate algorithm for geodesic calculations
Message-ID: <12039812.4354191235982974161.JavaMail.support.mn@elisanet.fi>

Ok,

I am assuming that this calculates the elliptic path (on some reference ellipsoid)
between any 2 points, without elevation? Yes?

Can sombody post  same for a direct "laser line" between any two points and
with elevation on both ends. This must be a more common problem when doing
shorter ground measurements.

Actually there might be some use for all those versions...

I know that they correct GPS signals about 30 m at the equator max. due to earth
rotation (Sagnac term). If using a laser, should one do the same adjustment? What
would that measure then be (at the equator)?

Janne.

--------------------------------------------

Charles Karney [ckarney at sarnoff.com] kirjoitti: 
> I've implemented an algorithm for geodesic calculations for an ellipsoid
> with the following features:
> 
>  * It uses expansions accurate to 8th order in the ellipsoid flattening.
>    This gives 12 nm accuracy using doubles and 6 pm accuracy using long
>    doubles.
>  * The direct calculation uses a reverted series and is therefore
>    non-iterative.  A mechanism is provided to do a series of direct
>    calculations on a single geodesic which is faster by a factor of 2.5.
>  * The inverse calculation uses Newton's method to determine the
>    azimuth.  This typically converges in 3 iterations.  I haven't found
>    any cases where it fails to converge.
>  * I provide a large test set geodesics for the WGS84 ellipsoid which is
>    accurate to 0.1 pm and 10^-18 degree.  Thus was generated by Maxima
>    using 20th order expansions (approximately accurate to 1 part in
>    10^50).
> 
> Further information is available at
> 
>     http://charles.karney.info/geographic/geodesic.html
> 
> The code itself (C++ classes and a program for doing geodesic
> calculations) is available at
> 
>     http://charles.karney.info/geographic
> 
> This compiles with g++ and Visual Studio 2005.
> 
> Still to do:
> 
>  * Reduce the order of the expansions to match precision available with
>    doubles.
>  * Improve the starting guesses for Newton's method to reduce to number
>    of iterations in some cases.
>  * More documentation on the method.
>  * Provide Maxima code to generate the expansions.
> 
> -- 
> Charles Karney <ckarney at sarnoff.com>
> Sarnoff Corporation, Princeton, NJ 08543-5300
> 
> URL: http://charles.karney.info
> Tel: +1 609 734 2312
> Fax: +1 609 734 2662
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 



From ckarney at Sarnoff.com  Mon Mar  2 03:15:25 2009
From: ckarney at Sarnoff.com (Karney, Charles F.)
Date: Mon, 2 Mar 2009 06:15:25 -0500
Subject: [Proj] Accurate algorithm for geodesic calculations
In-Reply-To: <12039812.4354191235982974161.JavaMail.support.mn@elisanet.fi>
References: <12039812.4354191235982974161.JavaMail.support.mn@elisanet.fi>
Message-ID: <91F640D26AB8E54982706321A514CA264E857D7602@MALIBU.sarnoff.internal>

> I am assuming that this calculates the elliptic path (on some
> reference ellipsoid) between any 2 points, without elevation? Yes?

Correct.  Elevation doesn't come into this treatment.  However the
geodesic path is not an ellipse -- in general the geodesic for an ellipsoid
doesn't lie in a plane.

> Can somebody post same for a direct "laser line" between any two points
> and with elevation on both ends. This must be a more common problem
> when doing shorter ground measurements.

The simple way of doing this is to convert both geodetic points to
geocentric and use Pythagoras.  I've used this method to obtain range
maps for a terrain from a particular viewpoint.

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From ckarney at Sarnoff.com  Mon Mar  2 12:05:46 2009
From: ckarney at Sarnoff.com (Karney, Charles F.)
Date: Mon, 2 Mar 2009 15:05:46 -0500
Subject: [Proj] Accurate algorithm for geodesic calculations
In-Reply-To: <200903011052.47255.geraldi.evenden@gmail.com>
References: <ssriqmuw6j9.fsf@petrel.petrel.org>,
	<200903011052.47255.geraldi.evenden@gmail.com>
Message-ID: <91F640D26AB8E54982706321A514CA264E857D7606@MALIBU.sarnoff.internal>

> Again, this is not a language war, only a comment on how to reach the
> widest audience.  Anyone who is an expert in C++ can easily understand
> a C procedure but the reverse in not true.

Ahh..., but it's not the case that anyone who can write passable C++
code can write equivalently decent C code.  I went straight from Fortran
to C++ without stopping off at C.  And no, I'm not going to go back to
using Fortran.
--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Mon Mar  2 13:04:32 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 2 Mar 2009 16:04:32 -0500
Subject: [Proj] Accurate algorithm for geodesic calculations
In-Reply-To: <91F640D26AB8E54982706321A514CA264E857D7606@MALIBU.sarnoff.internal>
References: <ssriqmuw6j9.fsf@petrel.petrel.org>
	<200903011052.47255.geraldi.evenden@gmail.com>
	<91F640D26AB8E54982706321A514CA264E857D7606@MALIBU.sarnoff.internal>
Message-ID: <200903021604.32122.geraldi.evenden@gmail.com>

On Monday 02 March 2009 3:05:46 pm Karney, Charles F. wrote:
> > Again, this is not a language war, only a comment on how to reach the
> > widest audience.  Anyone who is an expert in C++ can easily understand
> > a C procedure but the reverse in not true.
>
> Ahh..., but it's not the case that anyone who can write passable C++
> code can write equivalently decent C code.  I went straight from Fortran
> to C++ without stopping off at C.  And no, I'm not going to go back to
> using Fortran.

Of course, that is an absurd statement.  C very much a subset of C++ and using 
C as an alternative is merely ignoring the superfluous parts of C++ that do 
little in facilitating most mathematical intensive procedures.

For clarity of code, FORTRAN is infinitely superior to C++.  That is as far as 
I will go in supporting FORTRAN.  

For sub-Mensa class individuals, such as myself, it is quite difficult to 
follow C++ and aspects of highly mathematical procedures that would be much 
clearer in a lower language.  This is especially true because of the 
multitude of techniques available in C++---none of which can be demonstrated 
as the best---to solve a problem.

However, forget the computer code, the clearest way to make your efforts 
available to everyone is to use the universal language of mathematics.  Then 
everyone can participate in newfound knowledge.  I can read a paper written 
in Chinese and still understand the math it contains.

Be a saint and publish in pdf!

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at Sarnoff.com  Mon Mar  2 14:29:01 2009
From: ckarney at Sarnoff.com (Karney, Charles F.)
Date: Mon, 2 Mar 2009 17:29:01 -0500
Subject: [Proj] Accurate algorithm for geodesic calculations
In-Reply-To: <200903021604.32122.geraldi.evenden@gmail.com>
References: <ssriqmuw6j9.fsf@petrel.petrel.org>
	<200903011052.47255.geraldi.evenden@gmail.com>
	<91F640D26AB8E54982706321A514CA264E857D7606@MALIBU.sarnoff.internal>,
	<200903021604.32122.geraldi.evenden@gmail.com>
Message-ID: <91F640D26AB8E54982706321A514CA264E857D760A@MALIBU.sarnoff.internal>

> > Ahh..., but it's not the case that anyone who can write passable C++
> > code can write equivalently decent C code.
>
> Of course, that is an absurd statement.  C very much a subset of C++
> and using C as an alternative is merely ignoring the superfluous parts
> of C++ that do little in facilitating most mathematical intensive
> procedures.

C may be a subset of C++.  However, people learning C++ as a new
language do themselves a favor by NOT learning about

    storing strings in char[]
    strcmp, strcpy, index, rindex
    malloc, free
    much of the C use of pointers
    much use of macros (like those for max/min and numeric constants)

because C++ provides strings, the STL, etc.  So, your assumption that a
C++ programmer can either (a) write code in the C subset of C++ or (b)
trivially strip his code down to a C core is simply not true.

> Be a saint and publish in pdf!

>From my original posting:

> Still to do:
> ...
>  * More documentation on the method.

I.e., be patient.

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From roger at opq.se  Mon Mar  2 22:56:41 2009
From: roger at opq.se (Roger Oberholtzer)
Date: Tue, 03 Mar 2009 07:56:41 +0100
Subject: [Proj] lat/long to northing/easting and back again
Message-ID: <1236063401.18280.24.camel@acme.pacific>


I have always used proj to convert WGS84 lat/long values to
northing/easting values in various parts of the world. In doing so, I
usually need to interpolate between points to find specific locations.
These interpolated locations have always been reported as
northing/easting values in meters. Job finished.

I now have a use where, after determining the interpolated
northing/easting, I need to convert the location back into lat/long in
degrees. This I have never done with proj.

My question is, if you had to locate a position between two lat/long
values, how would you best do this with proj? The source data in my case
is WGS84 values from a Trimble GPS. The 'interpolated' lat/longs should
also be reported in WGS84. In reality, the values will be collected
throughout Germany. But everything is requested to be provided in WGS84.

I use the C API for this. But any pointers are welcome. If I have left
out any important detail, just ask.


-- 
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden

Office: Int +46 8-615 60 20
Mobile: Int +46 70-815 1696



From aaron at cartopac.com  Tue Mar  3 15:33:28 2009
From: aaron at cartopac.com (Aaron Friesen)
Date: Tue, 3 Mar 2009 18:33:28 -0500
Subject: [Proj] How to use +towgs84
In-Reply-To: <6a91fcb00902270637q6c6de464n7f5de5bf6a70514@mail.gmail.com>
References: <90200BC582E4FF488816D357540C1D4D1326589A50@VMBX103.ihostexchange.net>
	<6a91fcb00902270637q6c6de464n7f5de5bf6a70514@mail.gmail.com>
Message-ID: <90200BC582E4FF488816D357540C1D4D13267789E2@VMBX103.ihostexchange.net>

Jose' (et al),

> -----Original Message-----
> Any coordinate system must have a "towgs84" or any other form of
> conversion to a global datum. In particular WGS84 itself has
> "+towgs84=0,0,0". You should use:
> 
>   cs2cs +proj=latlong +ellps=mod_airy +towgs84=xxxxx +to +proj=latlong
> +ellps=WGS84 +towgs84=0,0,0
> 
> where xxxxx is the set of 7 parameters you have. They should have signs
> according to the conversion from local datum to WGS84 and rotations
> must agree with the "position vector rotation" method (not "coordinate
> frame rotation"). For the conversion from WGS84 to local datum just
> change the two coordinate system strings, not the signs.
> 
> Instead of  using
>     +proj=latlong +ellps=WGS84 +towgs84=0,0,0 you can use
>     +proj=latlong +datum=WGS84
> which is equivalent.

Is +towgs84 actually a misnomer?  Is it not in general the means to
apply a 3 or 7-parm transform?

Aaron


From mfinn at usgs.gov  Wed Mar  4 09:58:38 2009
From: mfinn at usgs.gov (Michael P Finn)
Date: Wed, 4 Mar 2009 10:58:38 -0700
Subject: [Proj] Fw: Save the Date - AutoCarto 2010  - November 15-19, 2010
Message-ID: <OF432906B8.6C835DD1-ON8725756E.007847B4-8725756F.0062C2C8@usgs.gov>

FYI.

(Apologies for cross posts.)


----- Forwarded by Michael P Finn/GIO/USGS/DOI on 03/03/2009 02:53 PM 
-----

From:
"CaGIS Membership Information" <Memberinfo at acsm.net>
To:
<mfinn at usgs.gov>
Date:
02/10/2009 07:37 AM
Subject:
Save the Date - AutoCarto 2010  - November 15-19, 2010



AutoCarto 2010
 
Save the Date!  Sponsored by the Cartography and Geographic Information 
Society (CaGIS), AutoCarto 2010 will take place November 15-19, 2010 in 
Orlando, Florida.  The 18th in the series, this international research 
symposium on computer-based cartography and GIScience will be held in 
conjunction with the American Society for Photogrammetry and Remote 
Sensing and the International Society for Photogrammetry and Remote 
Sensing Technical Commission IV: Geodatabases and Digital Mapping.
 
The focus of this joint meeting is Geospatial Data and Geovisualization 
for the Environments, Security, and Society.  The International 
Cartographic Association will also hold a number of its commission 
meetings here.  Additionally, a number of workshops will be offered.
 
As is customary, selected papers from the symposium will be published in a 
special issue of the Cartography and Geographic Information Science 
Journal ? it will be slated for April 2011.  Look for the AutoCarto 2010 
Call for Papers and Posters around December 2009.
 
The meeting site is the Doubletree Hotel, located at the entrance to 
Universal Orlando http://www.doubletreeorlando.com/.  Watch the CaGIS 
website (www.cartogis.org) for further information and details.
 
Mark your calendars now!  Come join cartographers, geographers, geospatial 
analysts, GIScientists, and others conducting research on the cutting edge 
of the geospatial sciences from around the globe.
 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090304/9295e4e6/attachment.html>

From j.l.h.hartmann at uva.nl  Wed Mar  4 15:00:02 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu, 05 Mar 2009 00:00:02 +0100
Subject: [Proj] How to use +towgs84
In-Reply-To: <90200BC582E4FF488816D357540C1D4D13267789E2@VMBX103.ihostexchange.net>
References: <90200BC582E4FF488816D357540C1D4D1326589A50@VMBX103.ihostexchange.net>	<6a91fcb00902270637q6c6de464n7f5de5bf6a70514@mail.gmail.com>
	<90200BC582E4FF488816D357540C1D4D13267789E2@VMBX103.ihostexchange.net>
Message-ID: <49AF07F2.6030903@uva.nl>



Aaron Friesen wrote:
> Is +towgs84 actually a misnomer?  Is it not in general the means to
> apply a 3 or 7-parm transform?
>
>
>   
Although I work at a University, I hate to cite myself, but perhaps in 
this case it's legitimate:

http://lists.maptools.org/pipermail/proj/2009-February/004381.html

I tried to give an answer to this question and a few others that have 
been hotly debated on this list. I got no response at all to this (too?) 
long posting. As this list is generally not very inhibited on speaking 
its mind when it doesn't like something, I hope there are not too many 
idiocies in it (my mailing, I mean). Even so, some casual comments would 
be really appreciated.

Cheers,

Jan


From j.l.h.hartmann at uva.nl  Wed Mar  4 15:48:12 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu, 05 Mar 2009 00:48:12 +0100
Subject: [Proj] Completely off-topic
In-Reply-To: <200902181009.36432.geraldi.evenden@gmail.com>
References: <OFFD4A3B0C.99839462-ONC1257560.006D39FE-C1257560.006D3A17@notesmail.rivm.nl>	<200902171552.17277.geraldi.evenden@gmail.com>	<499BF87C.4040302@uva.nl>
	<200902181009.36432.geraldi.evenden@gmail.com>
Message-ID: <49AF133C.6080504@uva.nl>

Hi Gerald, List,

I hate to disagree for once with the most eminent person on this list 
and the one we have all to thank for PROJ, and, even worse,  on 
something completely off-topic, but as it as about the signature he has 
appended to all of his postings, I hope I may forgiven.

The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


There was no asylum in the *old* Jerusalem, but there certainly are 
several ones in the *new* one, the city of Rembrandt, the city were the 
persecuted Jews of Europe found their home until 1940, and the city were 
I happen to live: Amsterdam. See: 
http://www.codart.nl/exhibitions/details/1225/ . The madhouse was more 
or less *invented* in Amsterdam. I work in one myself. Here is a 
world-famous study about the development of madhouses from the equally 
eminent French philosopher Michel Foucault: Madness and Civilization - 
History of Insanity. There is a Internet translation available at

http://www.scribd.com/doc/11920598/Michel-Foucault-Madness-and-Civilization-History-of-Insanity 


but I would advise you to read it from a paper book, if you are really 
interested and have lots of time. Foucault is one of the greatest 
philososphers/historians of this century, but his style is *not* easy, 
especially if you have to read it in French. When you take the trouble 
however, he is fascinating (like projections).

Of course, one could debate whether Amsterdam is really the new 
Jerusalem. Some people would say it was the successor of another 
Old-Testament city, or perhaps even two. Personally, I don't believe 
that, although I can't prove it.

Cheers,

Jan




From EMiller at dfg.ca.gov  Wed Mar  4 16:53:15 2009
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Wed, 04 Mar 2009 16:53:15 -0800
Subject: [Proj] How to use +towgs84
In-Reply-To: <49AF07F2.6030903@uva.nl>
References: <90200BC582E4FF488816D357540C1D4D1326589A50@VMBX103.ihostexchange.net>	<6a91fcb00902270637q6c6de464n7f5de5bf6a70514@mail.gmail.com>
	<90200BC582E4FF488816D357540C1D4D13267789E2@VMBX103.ihostexchange.net><90200BC582E4FF488816D357540C1D4D13267789E2@VMBX103.ihostexchange.net>
	<49AF07F2.6030903@uva.nl>
Message-ID: <49AEB1FA.95FD.00E4.0@dfg.ca.gov>

>>> On 3/4/2009 at 3:00 PM, Jan Hartmann <j.l.h.hartmann at uva.nl> wrote:

> 
> Aaron Friesen wrote:
>> Is +towgs84 actually a misnomer?  Is it not in general the means to
>> apply a 3 or 7-parm transform?
>>
>>
>>   
> Although I work at a University, I hate to cite myself, but perhaps in 
> this case it's legitimate:
> 
> http://lists.maptools.org/pipermail/proj/2009-February/004381.html 
> 
> I tried to give an answer to this question and a few others that have 
> been hotly debated on this list. I got no response at all to this (too?) 
> long posting. As this list is generally not very inhibited on speaking 
> its mind when it doesn't like something, I hope there are not too many 
> idiocies in it (my mailing, I mean). Even so, some casual comments would 
> be really appreciated.

The assumption with +towgs84 is that the transformation parameters will convert the coordinates to or from WGS84.  If you have transformation parameters that go from one datum to another, neither of which are WGS84, it should work.  But, I'd be careful about defining coordinate systems in an +init file (like "epsg") that have datum transformation parameters that aren't for WGS84.  It could cause some serious problems.

Regarding your other message: The +datum parameter doesn't always expand to +ellps and +towgs84.  In the case of NAD27 it expands to +ellps and +nadgrids. (src/pj_datums.c)



From warmerdam at pobox.com  Thu Mar  5 07:00:43 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 05 Mar 2009 10:00:43 -0500
Subject: [Proj] How to use +towgs84
In-Reply-To: <49AF07F2.6030903@uva.nl>
References: <90200BC582E4FF488816D357540C1D4D1326589A50@VMBX103.ihostexchange.net>
	<6a91fcb00902270637q6c6de464n7f5de5bf6a70514@mail.gmail.com>
	<90200BC582E4FF488816D357540C1D4D13267789E2@VMBX103.ihostexchange.net>
	<49AF07F2.6030903@uva.nl>
Message-ID: <49AFE91B.9000501@pobox.com>

Jan Hartmann wrote:
> 
> Aaron Friesen wrote:
>> Is +towgs84 actually a misnomer?  Is it not in general the means to
>> apply a 3 or 7-parm transform?
>>
>>
>>   
> Although I work at a University, I hate to cite myself, but perhaps in 
> this case it's legitimate:
> 
> http://lists.maptools.org/pipermail/proj/2009-February/004381.html
> 
> I tried to give an answer to this question and a few others that have 
> been hotly debated on this list. I got no response at all to this (too?) 
> long posting. As this list is generally not very inhibited on speaking 
> its mind when it doesn't like something, I hope there are not too many 
> idiocies in it (my mailing, I mean). Even so, some casual comments would 
> be really appreciated.

Jan,

Perhaps there was no response because everything it said was sensible and
there was no obvious question?

In choosing WGS84 as a "pivot datum" PROJ.4 is replicating a relatively
common practice with other GIS software though this approach does have
some pitfalls.

It is possible to use +towgs84 to apply datum shifts that aren't really
to or from WGS84 (likewise with +nadgrids) but this must be done with some
care and caution since the library conceptually considers it is using
WGS84 as the pivot datum.  So trick the library carefully if you wish/need
to do this.  If someone wants to carefully consider how to do this and
document it, it would be a nice addition to the FAQ list in Trac.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ajarosch at eos.ubc.ca  Thu Mar  5 11:40:53 2009
From: ajarosch at eos.ubc.ca (Alexander Jarosch)
Date: Thu, 05 Mar 2009 11:40:53 -0800
Subject: [Proj] Rotated Polar Stereographic Projection in Proj4
Message-ID: <49B02AC5.4070006@eos.ubc.ca>

Hello!

I have a rather simple question, but I could not find any documentation
so far on how to do this with proj4. A college of mine has maps on a
"polar stereographic projection" with the following details:

Pole_lat = 50.0
Pole_lon = -150.0
Central_lat = 50.0
Central _lon = -126.0

These are the definitions he gave me. Now I think this is a
stereographic projection with a given pole lat/lon and should maybe not
be called polar stereographic, but that is not the problem. I want to
set up proj4 (or cs2cs for that matter) to this projection to transform
coordinates from lat/lon and I assume the same ellipsoid. My problem is
that I did not find any documentation on how to set up this rotated
stereographic projection with proj4.

Any help would be really appreciated.

Cheers,
Alex



From aaron at cartopac.com  Thu Mar  5 12:26:08 2009
From: aaron at cartopac.com (Aaron Friesen)
Date: Thu, 5 Mar 2009 15:26:08 -0500
Subject: [Proj] How to use +towgs84
In-Reply-To: <49AFE91B.9000501@pobox.com>
References: <90200BC582E4FF488816D357540C1D4D1326589A50@VMBX103.ihostexchange.net>
	<6a91fcb00902270637q6c6de464n7f5de5bf6a70514@mail.gmail.com>
	<90200BC582E4FF488816D357540C1D4D13267789E2@VMBX103.ihostexchange.net>
	<49AF07F2.6030903@uva.nl> <49AFE91B.9000501@pobox.com>
Message-ID: <90200BC582E4FF488816D357540C1D4D1326778DEF@VMBX103.ihostexchange.net>



> -----Original Message-----
> In choosing WGS84 as a "pivot datum" PROJ.4 is replicating a relatively
> common practice with other GIS software though this approach does have
> some pitfalls.
> 
> It is possible to use +towgs84 to apply datum shifts that aren't really
> to or from WGS84 (likewise with +nadgrids) but this must be done with
> some care and caution since the library conceptually considers it is 
> using WGS84 as the pivot datum.  So trick the library carefully if you
> wish/need to do this.  If someone wants to carefully consider how to do 
> this and document it, it would be a nice addition to the FAQ list in Trac.

Just to clarify, however, if I am taking for example UTM NAD83 to latlong
NAD83 without a datum shift, I do not need +towgs84 specified.  Correct?

Aaron



From geraldi.evenden at gmail.com  Thu Mar  5 12:37:59 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 5 Mar 2009 15:37:59 -0500
Subject: [Proj] Rotated Polar Stereographic Projection in Proj4
In-Reply-To: <49B02AC5.4070006@eos.ubc.ca>
References: <49B02AC5.4070006@eos.ubc.ca>
Message-ID: <200903051537.59969.geraldi.evenden@gmail.com>

On Thursday 05 March 2009 2:40:53 pm Alexander Jarosch wrote:
> Hello!
>
> I have a rather simple question, but I could not find any documentation
> so far on how to do this with proj4. A college of mine has maps on a
> "polar stereographic projection" with the following details:
>
> Pole_lat = 50.0
> Pole_lon = -150.0
> Central_lat = 50.0
> Central _lon = -126.0
>
> These are the definitions he gave me. Now I think this is a
> stereographic projection with a given pole lat/lon and should maybe not
> be called polar stereographic, but that is not the problem. I want to
> set up proj4 (or cs2cs for that matter) to this projection to transform
> coordinates from lat/lon and I assume the same ellipsoid. My problem is
> that I did not find any documentation on how to set up this rotated
> stereographic projection with proj4.
>
> Any help would be really appreciated.

Appears to be a truely oblique projection and not in the tradition of 
proj=stere where the pole is on the CM.

Is a spherical earth used?  In the case of a spherical earth one could use the 
combination of proj=ob_tran and stere.  Otherwise, if it is a azimuthal 
stereographic, I do not know of anyway proj or libproj could handle it 
without development.

Sheeesh.  I wonder what the rational for this beast was?  Class exercise?

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From warmerdam at pobox.com  Thu Mar  5 13:06:29 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 05 Mar 2009 16:06:29 -0500
Subject: [Proj] How to use +towgs84
In-Reply-To: <90200BC582E4FF488816D357540C1D4D1326778DEF@VMBX103.ihostexchange.net>
References: <90200BC582E4FF488816D357540C1D4D1326589A50@VMBX103.ihostexchange.net>
	<6a91fcb00902270637q6c6de464n7f5de5bf6a70514@mail.gmail.com>
	<90200BC582E4FF488816D357540C1D4D13267789E2@VMBX103.ihostexchange.net>
	<49AF07F2.6030903@uva.nl> <49AFE91B.9000501@pobox.com>
	<90200BC582E4FF488816D357540C1D4D1326778DEF@VMBX103.ihostexchange.net>
Message-ID: <49B03ED5.9030309@pobox.com>

Aaron Friesen wrote:
> Just to clarify, however, if I am taking for example UTM NAD83 to latlong
> NAD83 without a datum shift, I do not need +towgs84 specified.  Correct?

Aaron,

That is correct.

And, even if you did, as long as the shifts match no datum shifting
work will be done.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From aaron at cartopac.com  Thu Mar  5 13:50:22 2009
From: aaron at cartopac.com (Aaron Friesen)
Date: Thu, 5 Mar 2009 16:50:22 -0500
Subject: [Proj] How to use +towgs84
In-Reply-To: <49B03ED5.9030309@pobox.com>
References: <90200BC582E4FF488816D357540C1D4D1326589A50@VMBX103.ihostexchange.net>
	<6a91fcb00902270637q6c6de464n7f5de5bf6a70514@mail.gmail.com>
	<90200BC582E4FF488816D357540C1D4D13267789E2@VMBX103.ihostexchange.net>
	<49AF07F2.6030903@uva.nl> <49AFE91B.9000501@pobox.com>
	<90200BC582E4FF488816D357540C1D4D1326778DEF@VMBX103.ihostexchange.net>
	<49B03ED5.9030309@pobox.com>
Message-ID: <90200BC582E4FF488816D357540C1D4D1326778E45@VMBX103.ihostexchange.net>

Everyone,

One last +towgs84 question...

If I use Proj4 and the resulting datum is WGS84, which realization
of WGS84 should I consider the result?

Original, G1150, ???

Thanks again,

Aaron



From ajarosch at eos.ubc.ca  Thu Mar  5 13:58:39 2009
From: ajarosch at eos.ubc.ca (Alexander Jarosch)
Date: Thu, 05 Mar 2009 13:58:39 -0800
Subject: [Proj] Rotated Polar Stereographic Projection in Proj4
In-Reply-To: <200903051537.59969.geraldi.evenden@gmail.com>
References: <49B02AC5.4070006@eos.ubc.ca>
	<200903051537.59969.geraldi.evenden@gmail.com>
Message-ID: <49B04B0F.40807@eos.ubc.ca>

Gerald I. Evenden wrote:
> On Thursday 05 March 2009 2:40:53 pm Alexander Jarosch wrote:
>   
>> Hello!
>>
>> I have a rather simple question, but I could not find any documentation
>> so far on how to do this with proj4. A college of mine has maps on a
>> "polar stereographic projection" with the following details:
>>
>> Pole_lat = 50.0
>> Pole_lon = -150.0
>> Central_lat = 50.0
>> Central _lon = -126.0
>>
>> These are the definitions he gave me. Now I think this is a
>> stereographic projection with a given pole lat/lon and should maybe not
>> be called polar stereographic, but that is not the problem. I want to
>> set up proj4 (or cs2cs for that matter) to this projection to transform
>> coordinates from lat/lon and I assume the same ellipsoid. My problem is
>> that I did not find any documentation on how to set up this rotated
>> stereographic projection with proj4.
>>
>> Any help would be really appreciated.
>>     
>
> Appears to be a truely oblique projection and not in the tradition of 
> proj=stere where the pole is on the CM.
>
> Is a spherical earth used?  In the case of a spherical earth one could use the 
> combination of proj=ob_tran and stere.  Otherwise, if it is a azimuthal 
> stereographic, I do not know of anyway proj or libproj could handle it 
> without development.
>
> Sheeesh.  I wonder what the rational for this beast was?  Class exercise?
>
>   
Nope that beast comes from a climate model ;-). Anyway, is it fairly
simple to work out the combination of +proj=ob_tran and stere for this
projection I mentioned, because it assumes a spherical earth, like
almost all climate models.

Thanks.
Alex

-- 
Alexander H. Jarosch
Post-Doctoral Fellow
Department of Earth and Ocean Sciences,
The University of British Columbia,
6339 Stores Road,
Vancouver, British Columbia
Canada, V6T 1Z4.

Tel.: +1 604 822 3063
Fax.: +1 604 822 6088



From EMiller at dfg.ca.gov  Thu Mar  5 15:33:17 2009
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Thu, 05 Mar 2009 15:33:17 -0800
Subject: [Proj] How to use +towgs84
In-Reply-To: <90200BC582E4FF488816D357540C1D4D1326778E45@VMBX103.ihostexchange.net>
References: <90200BC582E4FF488816D357540C1D4D1326589A50@VMBX103.ihostexchange.net>
	<6a91fcb00902270637q6c6de464n7f5de5bf6a70514@mail.gmail.com>
	<90200BC582E4FF488816D357540C1D4D13267789E2@VMBX103.ihostexchange.net>
	<49AF07F2.6030903@uva.nl> <49AFE91B.9000501@pobox.com>
	<90200BC582E4FF488816D357540C1D4D1326778DEF@VMBX103.ihostexchange.net>
	<49B03ED5.9030309@pobox.com>
	<90200BC582E4FF488816D357540C1D4D1326778E45@VMBX103.ihostexchange.net>
Message-ID: <49AFF0BD.95FD.00E4.0@dfg.ca.gov>

Proj4 doesn't know about the different realizations. (Actually, it doesn't really know that much about any datum.)  I believe most of the towgs84 conversion parameters in epsg and elsewhere are based on the original realization.  I'd guess that the error introduced by the 3- and 7-parameter datum conversion methods greatly exceeds the differences between the WGS84 realizations.  So, if you need to retain the accuracy of a specific epoch you probably should avoid any datum conversion.

The NGS has a tool for the U.S. HPGN/HARN, WGS84 and ITRS epoch conversions.  I'm not sure how valid it is for areas outside the U.S. for handling just the WGS84 and ITRS. See: http://www.ngs.noaa.gov/TOOLS/Htdp/Htdp.shtml 

>>> On 3/5/2009 at 1:50 PM, Aaron Friesen <aaron at cartopac.com> wrote:
> Everyone,
> 
> One last +towgs84 question...
> 
> If I use Proj4 and the resulting datum is WGS84, which realization
> of WGS84 should I consider the result?
> 
> Original, G1150, ???
> 
> Thanks again,
> 
> Aaron
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org 
> http://lists.maptools.org/mailman/listinfo/proj



From aaron at cartopac.com  Thu Mar  5 16:14:50 2009
From: aaron at cartopac.com (Aaron Friesen)
Date: Thu, 5 Mar 2009 19:14:50 -0500
Subject: [Proj] How to use +towgs84
In-Reply-To: <49AFF0BD.95FD.00E4.0@dfg.ca.gov>
References: <90200BC582E4FF488816D357540C1D4D1326589A50@VMBX103.ihostexchange.net>
	<6a91fcb00902270637q6c6de464n7f5de5bf6a70514@mail.gmail.com>
	<90200BC582E4FF488816D357540C1D4D13267789E2@VMBX103.ihostexchange.net>
	<49AF07F2.6030903@uva.nl> <49AFE91B.9000501@pobox.com>
	<90200BC582E4FF488816D357540C1D4D1326778DEF@VMBX103.ihostexchange.net>
	<49B03ED5.9030309@pobox.com>
	<90200BC582E4FF488816D357540C1D4D1326778E45@VMBX103.ihostexchange.net>
	<49AFF0BD.95FD.00E4.0@dfg.ca.gov>
Message-ID: <90200BC582E4FF488816D357540C1D4D1326778E9E@VMBX103.ihostexchange.net>

Eric, et al,

> -----Original Message-----
> Proj4 doesn't know about the different realizations. (Actually, it
> doesn't really know that much about any datum.)  I believe most of the
> towgs84 conversion parameters in epsg and elsewhere are based on the
> original realization.  I'd guess that the error introduced by the 3-
> and 7-parameter datum conversion methods greatly exceeds the
> differences between the WGS84 realizations.  So, if you need to retain
> the accuracy of a specific epoch you probably should avoid any datum
> conversion.

That was my assumption.  Thanks for the clarification.

Unfortunately, with non-WGS84 data going to/from a GPS, avoiding any 
datum conversion is impossible.  I simply need to be aware of the
approximate error introduced in the conversion.

> The NGS has a tool for the U.S. HPGN/HARN, WGS84 and ITRS epoch
> conversions.  I'm not sure how valid it is for areas outside the U.S.
> for handling just the WGS84 and ITRS. See:
> http://www.ngs.noaa.gov/TOOLS/Htdp/Htdp.shtml

I am using HTDP for NAD83 to WGS84 transforms, thanks.

FYI, HTDP does not transform HARN data.  CORS96 is the earliest
NAD83 realization supported.  For my use with HARN data, I simply
assume the HARN data is CORS96 (1997.0) with an additional
10cm error.

Aaron


From al001 at uni-koeln.de  Fri Mar  6 11:55:48 2009
From: al001 at uni-koeln.de (Irwin Scollar)
Date: Fri, 06 Mar 2009 20:55:48 +0100
Subject: [Proj] Cadastral Grid - Slovenia
In-Reply-To: <mailman.9.1236358802.13627.proj@lists.maptools.org>
References: <mailman.9.1236358802.13627.proj@lists.maptools.org>
Message-ID: <200903061955.n26JtqeU025564@smtp-auth.uni-koeln.de>

Given the recent discussion concerning the change of longitude for 
Ferro in the Austrian grid systems before and after World War 
One,  can anyone tell me if this change was applied to what is now 
Slovenia or if the older Albrecht value is still used, or if a 
completely different grid is currently in force?

Irwin Scollar



From massimodisasha at yahoo.it  Mon Mar  9 08:14:08 2009
From: massimodisasha at yahoo.it (massimo di stefano)
Date: Mon, 9 Mar 2009 16:14:08 +0100
Subject: [Proj] towgs params and epsg code for Italy regions
Message-ID: <FC930CA7-B0FF-4905-ACAF-367A2B764B07@yahoo.it>


Hi All,

usually i need to reproject Italian data

from
Gauss Boaga rRome 40

to
Wgs 84

and inverse

when i need a good precision on a local scale extent, i use a set of  
control points (IGM95 vertex)
and apply last sqare methods to perform 2 different geometrics  
transformation :

1)  conforme transformation (4 parameters valid for only planimetry) ->

Tx (longitude - tanslation)
Ty (latitude - translation)
λ (scale factor)
α (rigid rotation)

2) affine transformation (6 parameters valid for only planimetry) ->

Tx (longitude - tanslation)
Ty (latitude - translation)
λx (longitude scale factor)
λy (latitude scale factor)
α (rigid rotation)
ϒ (angular sliding)


to transform vector files i apply the transformation parameters using  
pythn-gdal
but maybe (really i don't know) ...
it is possible to use these params directly in proj
(like we can do with cs2cs or including it inside an epsg code?)

....

an oher question :-/ ...

when i don't need more acuracy i use the follow +towgs params :

all the Italian region :

towgs84 = −225.000, −65.000, 9.000

Italian peninsular part :

towgs : −104.1, −49.1, −9.9, 0.971, −2.917, 0.714, −11.68

Sardinia :

towgs84 = −168.6, −34.0, 38.6, −0.374, −0.679, −1.379, −9.48

Sicily :

towgs84 = −50.2, −50.4, 84.8, −0.690, −2.012, 0.459, −28.08

i have taken the above params directly from grass gis and i include it  
in the epsg file that come with the proj source code.
Using it inside the epsg code 3004 - 3003 the errors is drastically  
reduced.

... my question :

instead of setting manually a customized projection,
is it possible to define new epsg code based on the +towgs paprameters  
inside the epsg file
and redistribuite it with the proj source code ?

.... a lot of software student and newbie gis users can beneficiate of  
it.

i agree i can manually add it to the epsg file, but mybe there is a  
reason beacouse these parameters are not already inside it ?
a license problem ?

Thanks to All for any answers,


Massimo Di Stefano
massimodisasha at yahoo.it

epifanio on   irc.freenode.net  /join gfoss









Massimo Di Stefano
massimodisasha at yahoo.it

epifanio on   irc.freenode.net  /join gfoss







-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090309/af0cfa1b/attachment.html>

From Mikael.Rittri at carmenta.com  Tue Mar 10 07:12:40 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Tue, 10 Mar 2009 15:12:40 +0100
Subject: [Proj] towgs params and epsg code for Italy regions
In-Reply-To: <FC930CA7-B0FF-4905-ACAF-367A2B764B07@yahoo.it>
References: <FC930CA7-B0FF-4905-ACAF-367A2B764B07@yahoo.it>
Message-ID: <FAF6E56B26D2044696772EBE89B15351017658B1@posty.carmenta.se>

Hello Massimo,
You wrote
 
> when I don't need more accuracy I use the following +towgs params :
> 
> all the Italian region :
> towgs84 = −225.000, −65.000, 9.000 
> 
> Italian peninsular part :
> towgs : −104.1, −49.1, −9.9, 0.971, −2.917, 0.714, −11.68 
>
> Sardinia :
> towgs84 = −168.6, −34.0, 38.6, −0.374, −0.679, −1.379, −9.48 
> 
> Sicily :
> towgs84 = −50.2, −50.4, 84.8, −0.690, −2.012, 0.459, −28.08 

...

> I agree I can manually add it to the epsg file, but maybe there is a reason 
> because these parameters are not already inside it?  A license problem? 

The country-wide transform is not defined in the EPSG database, as far 
as I know.  Where did you find it?  But the other three are defined, 
plus several more for offshore areas around Italy. 
  So, the problem is ambiguity. There are many possibilities, but there 
is only one Rome40 datum. The policy of Proj.4 is that when a datum has 
several alternative towgs84-shifts in the EPSG database, then Proj.4 
cannot know which one is best, so no one at all is chosen. (Until you 
add some towgs84 parameters manually, I mean.)   

Other GIS software makes other design choices. I have read about some 
- I think it was GeoTools - that attempts to choose the best datum shift
of several possibilies (or at least an arbitrary one).  
But that optimistic approach is sometimes dangerous.  

Best regards,

--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com 

________________________________

From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of massimo di stefano
Sent: den 9 mars 2009 16:14
To: proj at lists.maptools.org
Subject: [Proj] towgs params and epsg code for Italy regions



Hi All,

usually i need to reproject Italian data
 
from
Gauss Boaga rRome 40 

to 
Wgs 84 

and inverse 

when i need a good precision on a local scale extent, i use a set of control points (IGM95 vertex) 
and apply last sqare methods to perform 2 different geometrics transformation :

1)  conforme transformation (4 parameters valid for only planimetry) ->  

Tx (longitude - tanslation) 
Ty (latitude - translation) 
λ (scale factor) 
α (rigid rotation)

2) affine transformation (6 parameters valid for only planimetry) ->

Tx (longitude - tanslation) 
Ty (latitude - translation) 
λx (longitude scale factor) 
λy (latitude scale factor) 
α (rigid rotation) 
ϒ (angular sliding)


to transform vector files i apply the transformation parameters using pythn-gdal
but maybe (really i don't know) ...
it is possible to use these params directly in proj 
(like we can do with cs2cs or including it inside an epsg code?)

...

an oher question :-/ ...

when i don't need more acuracy i use the follow +towgs params :

all the Italian region :

towgs84 = −225.000, −65.000, 9.000 


Italian peninsular part :


towgs : −104.1, −49.1, −9.9, 0.971, −2.917, 0.714, −11.68 

Sardinia :

towgs84 = −168.6, −34.0, 38.6, −0.374, −0.679, −1.379, −9.48 

Sicily :

towgs84 = −50.2, −50.4, 84.8, −0.690, −2.012, 0.459, −28.08 

i have taken the above params directly from grass gis and i include it in the epsg file that come with the proj source code.
Using it inside the epsg code 3004 - 3003 the errors is drastically reduced.

.. my question :

instead of setting manually a customized projection,
is it possible to define new epsg code based on the +towgs paprameters inside the epsg file 
and redistribuite it with the proj source code ?

... a lot of software student and newbie gis users can beneficiate of it.

i agree i can manually add it to the epsg file, but mybe there is a reason beacouse these parameters are not already inside it ?
a license problem ? 

Thanks to All for any answers,


Massimo Di Stefano
massimodisasha at yahoo.it

epifanio on   irc.freenode.net  /join gfoss











Massimo Di Stefano
massimodisasha at yahoo.it

epifanio on   irc.freenode.net  /join gfoss










From stephan.holl at intevation.de  Wed Mar 11 03:07:12 2009
From: stephan.holl at intevation.de (Stephan Holl)
Date: Wed, 11 Mar 2009 11:07:12 +0100
Subject: [Proj] Errors between proj 4.5 and 4.6.1 with epsg:31467
Message-ID: <20090311110712.25e7b536@thoe.hq.intevation.de>

Dear proj-users,

a customer has updated a test-server from proj 4.5.0 to 4.6.1 linked to
a PostGIS-DB and a UMN MapServer with a WMS on top.

The result of the identical WMS-request on a server working with proj
4.5.0 and 4.6.1 have different results in their accurancy, about a 100m
north-shift.

Did anybody came accross this problem? 

I tried to scan the ChangeLog of 4.6.1 but did not find any relevant
entries which might be the cause of this change.

TIA.

Best

	Stephan

-- 
Stephan Holl <stephan.holl at intevation.de> | Tel.: +49 (0)541-33 508 3663
Intevation GmbH, Neuer Graben 17, 49074 OS  |  AG Osnabrück - HR B 18998
Geschäftsführer:  Frank Koormann, Bernhard Reiter, Dr. Jan-Oliver Wagner
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 206 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090311/427f2f34/attachment.sig>

From richard.greenwood at gmail.com  Wed Mar 11 05:34:19 2009
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed, 11 Mar 2009 06:34:19 -0600
Subject: [Proj] Errors between proj 4.5 and 4.6.1 with epsg:31467
In-Reply-To: <20090311110712.25e7b536@thoe.hq.intevation.de>
References: <20090311110712.25e7b536@thoe.hq.intevation.de>
Message-ID: <ae9185aa0903110534lef72ea1n6ccd516277a78497@mail.gmail.com>

On Wed, Mar 11, 2009 at 4:07 AM, Stephan Holl
<stephan.holl at intevation.de> wrote:
> Dear proj-users,
>
> a customer has updated a test-server from proj 4.5.0 to 4.6.1 linked to
> a PostGIS-DB and a UMN MapServer with a WMS on top.
>
> The result of the identical WMS-request on a server working with proj
> 4.5.0 and 4.6.1 have different results in their accurancy, about a 100m
> north-shift.
>
> Did anybody came accross this problem?
>
> I tried to scan the ChangeLog of 4.6.1 but did not find any relevant
> entries which might be the cause of this change.
>
> TIA.
>
> Best
>
>        Stephan

Stephan,

>From PROJ 4.6.0 on datum shifts are only applied if datum information
for both the source and destination coordinate systems is defined.
EPSG:31467 defines a datum. I am guessing that is the coordinate
system of your source data. Do you know what coordinate system the WMS
request is asking for, and does that coordinate system have a datum
defined, or twgs84 parameters?

Regards,
Rich	

-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From stephan.holl at intevation.de  Thu Mar 12 01:24:23 2009
From: stephan.holl at intevation.de (Stephan Holl)
Date: Thu, 12 Mar 2009 09:24:23 +0100
Subject: [Proj] Proj Digest, Vol 58, Issue 10
In-Reply-To: <mailman.9.1236790802.29319.proj@lists.maptools.org>
References: <mailman.9.1236790802.29319.proj@lists.maptools.org>
Message-ID: <20090312092423.6ac919b2@thoe.hq.intevation.de>

Hello Richard,

proj-request at lists.maptools.org, [20090311 - 12:00:02]

> Date: Wed, 11 Mar 2009 06:34:19 -0600
> From: Richard Greenwood <richard.greenwood at gmail.com>
> Subject: Re: [Proj] Errors between proj 4.5 and 4.6.1 with epsg:31467
> To: "PROJ.4 and general Projections Discussions"
> 	<proj at lists.maptools.org>
> Message-ID:
> 	<ae9185aa0903110534lef72ea1n6ccd516277a78497 at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
> 
> On Wed, Mar 11, 2009 at 4:07 AM, Stephan Holl
> <stephan.holl at intevation.de> wrote:
> > Dear proj-users,
> >
> > a customer has updated a test-server from proj 4.5.0 to 4.6.1
> > linked to a PostGIS-DB and a UMN MapServer with a WMS on top.
> >
> > The result of the identical WMS-request on a server working with
> > proj 4.5.0 and 4.6.1 have different results in their accurancy,
> > about a 100m north-shift.
> >
> > Did anybody came accross this problem?
> >
> > I tried to scan the ChangeLog of 4.6.1 but did not find any relevant
> > entries which might be the cause of this change.
> >
> > TIA.
> 
> Stephan,
> 
> >From PROJ 4.6.0 on datum shifts are only applied if datum
> >information  
> for both the source and destination coordinate systems is defined.
> EPSG:31467 defines a datum. I am guessing that is the coordinate
> system of your source data. Do you know what coordinate system the WMS
> request is asking for, and does that coordinate system have a datum
> defined, or twgs84 parameters?

Thanks for your quick answer. This is good news, but I am not quite
sure which values to add so that the results will be identical of the
proj 4.5.0-version.

I do have a source-projection of epsg:25832 which is defined (in both
pproj4.5.0 and 4.6.1) as
# ETRS89 / UTM zone 32N
<25832> +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs  <>

So towgs84 is missing here and I have to add this here in my MapFile?

So adding a +datum=wgs84 will suffice?

TIA

	Stephan

-- 
Stephan Holl <stephan.holl at intevation.de> | Tel.: +49 (0)541-33 508 3663
Intevation GmbH, Neuer Graben 17, 49074 OS  |  AG Osnabrück - HR B 18998
Geschäftsführer:  Frank Koormann, Bernhard Reiter, Dr. Jan-Oliver Wagner
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 206 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090312/aef4c0eb/attachment.sig>

From Mikael.Rittri at carmenta.com  Thu Mar 12 02:17:51 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Thu, 12 Mar 2009 10:17:51 +0100
Subject: [Proj] Cadastral Grid - Slovenia
In-Reply-To: <200903061955.n26JtqeU025564@smtp-auth.uni-koeln.de>
References: <mailman.9.1236358802.13627.proj@lists.maptools.org>
	<200903061955.n26JtqeU025564@smtp-auth.uni-koeln.de>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101765A17@posty.carmenta.se>

Hello,
Irwin Scollar wrote:
> Given the recent discussion concerning the change of longitude for 
> Ferro in the Austrian grid systems before and after World War One,
> can anyone tell me if this change was applied to what is now Slovenia
> or if the older Albrecht value is still used, or if a completely 
> different grid is currently in force?
> 
> Irwin Scollar 

(The recent discussion can be found in the Proj.4 February archive, 
 see http://lists.maptools.org/pipermail/proj/2009-February/004415.html )

This issue has become EPSG Change Request 2009.015, which can 
be read at http://www.epsg-registry.org (choose "query by filter", 
and let the Type be "Change Request"). 

Roger Lott of EPSG has been investigating this, but all details 
are not clear yet, and the OGP geodesy subcommittee has not made
any formal decision.  

However, Mr. Lott has been kind enough to keep me informed, and 
has allowed me to post a tentative summary here. So remember:

1) These are not official EPSG opinions, 
2) There is a risk that I have misunderstood some details. 

Anyway:

My February post (see link above) was basically correct.
That is, the MGI (Ferro) datum covered both Austria and former 
Yugoslavia, but when the countries switched to the Greenwich 
meridian, Austria assumed that Ferro was 17° 40' 00" west of 
Greenwich, while Yugoslavia assumed it was 17° 39' 46.02" west 
(the Albrecht value). 
    So, when using MGI with Greenwich, one must distinguish 
between MGI (Greenwich, Austria) and MGI (Greenwich, Yugoslavia),
since longitudes differ by 13.98", about 300 meters. The MGI datum 
was finalised in 1901, but the switch to Greenwich occurred later 
(in the 1920s?). 

A new adjustment was made in Yugoslavia in 1948.  This datum is 
known as D48, at least in Slovenia, and it was (probably) designed 
to be a minor improvement, in the sense that some distortion was 
removed, but that coordinates are not changed more than a couple 
of meters (compared to MGI 1901).  This D48 system was definitely 
adopted in Slovenia, but is hasn't been confirmed that it was adopted 
in all of Yugoslavia, although it is probable. 

Slovenia has later made a densification of the European ETRS89 datum;
this is known as D96 in Slovenia, or "Slovenia Geodetic Datum 1996" 
in the EPSG database (EPSG:6765). 

Slovenia is currently working on a new and improved densification of ETRS89,
see http://www.ec-gis.org/Workshops/inspire_2008/presentations/11_4_mozetic.pdf 

And here is a site with a lot of Slovene 7-parameter transformations between D48 and D96:
http://prostor.gov.si/vstop/sistem_zbirk_prostorskih_podatkov/drzavni_koordinatni_sistem/horizontalni_drzavni_koordinatni_sistem_d96tm/d96tm/transformacijski_parametri/ 
All these transformations are also in the current EPSG database, I think. 
But EPSG describes their Areas of Use in words; on this site you can see 
maps as well. 

I think the datum transformations currently published by EPSG from "MGI" 
to WGS84 will work fine, if you respect their Area of Use.  Just remember 
that if the Area of Use is in Austria, then "MGI" is really the Austrian MGI.  
And if the Area of Use is in former Yugoslavia, then "MGI" is really 
the Yugoslavian MGI (or possibly the 1948 version of the Yugoslavian MGI). 

Best regards, 
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com



From richard.greenwood at gmail.com  Thu Mar 12 05:54:22 2009
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Thu, 12 Mar 2009 06:54:22 -0600
Subject: [Proj] Proj Digest, Vol 58, Issue 10
In-Reply-To: <20090312092423.6ac919b2@thoe.hq.intevation.de>
References: <mailman.9.1236790802.29319.proj@lists.maptools.org>
	<20090312092423.6ac919b2@thoe.hq.intevation.de>
Message-ID: <ae9185aa0903120554w2061326bqcb35993199d28583@mail.gmail.com>

On Thu, Mar 12, 2009 at 2:24 AM, Stephan Holl
<stephan.holl at intevation.de> wrote:
> Hello Richard,
>
> proj-request at lists.maptools.org, [20090311 - 12:00:02]
>
>> Date: Wed, 11 Mar 2009 06:34:19 -0600
>> From: Richard Greenwood <richard.greenwood at gmail.com>
>> Subject: Re: [Proj] Errors between proj 4.5 and 4.6.1 with epsg:31467
>> To: "PROJ.4 and general Projections Discussions"
>>       <proj at lists.maptools.org>
>> Message-ID:
>>       <ae9185aa0903110534lef72ea1n6ccd516277a78497 at mail.gmail.com>
>> Content-Type: text/plain; charset=ISO-8859-1
>>
>> On Wed, Mar 11, 2009 at 4:07 AM, Stephan Holl
>> <stephan.holl at intevation.de> wrote:
>> > Dear proj-users,
>> >
>> > a customer has updated a test-server from proj 4.5.0 to 4.6.1
>> > linked to a PostGIS-DB and a UMN MapServer with a WMS on top.
>> >
>> > The result of the identical WMS-request on a server working with
>> > proj 4.5.0 and 4.6.1 have different results in their accurancy,
>> > about a 100m north-shift.
>> >
>> > Did anybody came accross this problem?
>> >
>> > I tried to scan the ChangeLog of 4.6.1 but did not find any relevant
>> > entries which might be the cause of this change.
>> >
>> > TIA.
>>
>> Stephan,
>>
>> >From PROJ 4.6.0 on datum shifts are only applied if datum
>> >information
>> for both the source and destination coordinate systems is defined.
>> EPSG:31467 defines a datum. I am guessing that is the coordinate
>> system of your source data. Do you know what coordinate system the WMS
>> request is asking for, and does that coordinate system have a datum
>> defined, or twgs84 parameters?
>
> Thanks for your quick answer. This is good news, but I am not quite
> sure which values to add so that the results will be identical of the
> proj 4.5.0-version.
>
> I do have a source-projection of epsg:25832 which is defined (in both
> pproj4.5.0 and 4.6.1) as
> # ETRS89 / UTM zone 32N
> <25832> +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs  <>
>
> So towgs84 is missing here and I have to add this here in my MapFile?
>
> So adding a +datum=wgs84 will suffice?
>
> TIA
>
>        Stephan
>
> --
> Stephan Holl <stephan.holl at intevation.de> | Tel.: +49 (0)541-33 508 3663
> Intevation GmbH, Neuer Graben 17, 49074 OS  |  AG Osnabrück - HR B 18998
> Geschäftsführer:  Frank Koormann, Bernhard Reiter, Dr. Jan-Oliver Wagner
>

Yes, that should work. I notice that it is usually upper case:
+datum=WGS84, or adding +towgs84=0,0,0 should do the trick also.

-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From aaron at cartopac.com  Thu Mar 12 12:41:52 2009
From: aaron at cartopac.com (Aaron Friesen)
Date: Thu, 12 Mar 2009 15:41:52 -0400
Subject: [Proj] Proj4 vs. NADCON for NAD27/NAD83 translation
Message-ID: <90200BC582E4FF488816D357540C1D4D1326779936@VMBX103.ihostexchange.net>

Everyone,

Both Proj4 and NADCON use grids for NAD27/NAD83 translation.
Do they both provide equivalent translation?  Will Proj4
handle HARN as well, if HARN grid files are installed and
configured?

Thank you,

Aaron



From neteler at osgeo.org  Thu Mar 12 13:21:12 2009
From: neteler at osgeo.org (Markus Neteler)
Date: Thu, 12 Mar 2009 21:21:12 +0100
Subject: [Proj] MODIS Sinusoidal grid SHAPE files available
Message-ID: <86782b610903121321n567b30b2j862c1611de473e79@mail.gmail.com>

hi,

I have created MODIS Sinusoidal grid SHAPE files:
http://gis.fem-environment.eu/modis-sinusoidal-gis-files/

to more easily identify tiles, see
http://nsidc.org/data/modis/images/data_summaries/sinusoidal_v5.gif

Maybe useful for some users here.

Best,
Markus


From stephan.holl at intevation.de  Thu Mar 12 23:20:24 2009
From: stephan.holl at intevation.de (Stephan Holl)
Date: Fri, 13 Mar 2009 07:20:24 +0100
Subject: [Proj] Proj Digest, Vol 58, Issue 10
In-Reply-To: <ae9185aa0903120554w2061326bqcb35993199d28583@mail.gmail.com>
References: <mailman.9.1236790802.29319.proj@lists.maptools.org>
	<20090312092423.6ac919b2@thoe.hq.intevation.de>
	<ae9185aa0903120554w2061326bqcb35993199d28583@mail.gmail.com>
Message-ID: <20090313072024.4cd495fd@keto>

Hallo Richard,

Richard Greenwood <richard.greenwood at gmail.com>, [20090312 - 06:54:22]

> On Thu, Mar 12, 2009 at 2:24 AM, Stephan Holl
> <stephan.holl at intevation.de> wrote:
> > Hello Richard,
> >
> > proj-request at lists.maptools.org, [20090311 - 12:00:02]
> >
> >> Date: Wed, 11 Mar 2009 06:34:19 -0600
> >> From: Richard Greenwood <richard.greenwood at gmail.com>
> >> Subject: Re: [Proj] Errors between proj 4.5 and 4.6.1 with
> >> epsg:31467 To: "PROJ.4 and general Projections Discussions"
> >>       <proj at lists.maptools.org>
> >> Message-ID:
> >>       <ae9185aa0903110534lef72ea1n6ccd516277a78497 at mail.gmail.com>
> >> Content-Type: text/plain; charset=ISO-8859-1
> >>
> >> On Wed, Mar 11, 2009 at 4:07 AM, Stephan Holl
> >> <stephan.holl at intevation.de> wrote:
> >> > Dear proj-users,
> >> >
> >> > a customer has updated a test-server from proj 4.5.0 to 4.6.1
> >> > linked to a PostGIS-DB and a UMN MapServer with a WMS on top.
> >> >
> >> > The result of the identical WMS-request on a server working with
> >> > proj 4.5.0 and 4.6.1 have different results in their accurancy,
> >> > about a 100m north-shift.
> >> >
> >> > Did anybody came accross this problem?
> >> >
> >> > I tried to scan the ChangeLog of 4.6.1 but did not find any
> >> > relevant entries which might be the cause of this change.
> >> >
> >> > TIA.
> >>
> >> Stephan,
> >>
> >> >From PROJ 4.6.0 on datum shifts are only applied if datum
> >> >information
> >> for both the source and destination coordinate systems is defined.
> >> EPSG:31467 defines a datum. I am guessing that is the coordinate
> >> system of your source data. Do you know what coordinate system the
> >> WMS request is asking for, and does that coordinate system have a
> >> datum defined, or twgs84 parameters?
> >
> > Thanks for your quick answer. This is good news, but I am not quite
> > sure which values to add so that the results will be identical of
> > the proj 4.5.0-version.
> >
> > I do have a source-projection of epsg:25832 which is defined (in
> > both pproj4.5.0 and 4.6.1) as
> > # ETRS89 / UTM zone 32N
> > <25832> +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs  <>
> >
> > So towgs84 is missing here and I have to add this here in my
> > MapFile?
> >
> > So adding a +datum=wgs84 will suffice?
> >
> > TIA
> >
> >        Stephan
> >
> > --
> > Stephan Holl <stephan.holl at intevation.de> | Tel.: +49 (0)541-33 508
> > 3663 Intevation GmbH, Neuer Graben 17, 49074 OS  |  AG Osnabrück -
> > HR B 18998 Geschäftsführer:  Frank Koormann, Bernhard Reiter, Dr.
> > Jan-Oliver Wagner
> >
> 
> Yes, that should work. I notice that it is usually upper case:
> +datum=WGS84, or adding +towgs84=0,0,0 should do the trick also.

Confirmed, this worked. I accidently must have missed the change in the
readmes...
Thank you for your help

	Stephan

-- 
Stephan Holl <stephan.holl at intevation.de> | Tel.: +49 (0)541-33 508 3663
Intevation GmbH, Neuer Graben 17, 49074 OS  |  AG Osnabrück - HR B 18998
Geschäftsführer:  Frank Koormann, Bernhard Reiter, Dr. Jan-Oliver Wagner
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 197 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090313/669506e6/attachment.sig>

From geraldi.evenden at gmail.com  Fri Mar 13 09:21:22 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Fri, 13 Mar 2009 12:21:22 -0400
Subject: [Proj] Programming languages redux
Message-ID: <200903131221.22644.geraldi.evenden@gmail.com>

While bowsing on details for cleaning up distribution tars I ran across this:

http://www.gnu.org/prep/standards/html_node/Source-Language.html#Source-Language

which reminded me of my complaint some weeks ago of unnecessarily using an 
overly complex compiler language for distributing an interesting solution to 
a problem of general interest.

It is always nice to find something to vindicate ones righteous position.  :-)

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at sarnoff.com  Sat Mar 14 15:24:52 2009
From: ckarney at sarnoff.com (Charles Karney)
Date: Sat, 14 Mar 2009 18:24:52 -0400
Subject: [Proj] Need info on Pittman's paper on geodesics
Message-ID: <ssr63ib4ua3.fsf@petrel.petrel.org>

I'm looking for Pittman's paper on geodesics:

    M. E. Pittman.
    Precision direct and inverse solutions of the
    geodesic, Surveying and Mapping 46, 47-54 (1986)

Does anyone know how to get hold of this paper?  (Paying is OK, up to a
point.)

Also, does anyone know Pittman's method in enough detain to describe it?

Thanks!

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From ckarney at Sarnoff.com  Sun Mar 15 16:51:42 2009
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Sun, 15 Mar 2009 19:51:42 -0400
Subject: [Proj] Need info on Pittman's paper on geodesics
In-Reply-To: <ssr63ib4ua3.fsf@petrel.petrel.org>
References: <ssr63ib4ua3.fsf@petrel.petrel.org>
Message-ID: <91F640D26AB8E54982706321A514CA264E86364BCD@MALIBU.sarnoff.internal>

> I'm looking for Pittman's paper on geodesics:
>
>    M. E. Pittman.
>    Precision direct and inverse solutions of the
>    geodesic, Surveying and Mapping 46, 47-54 (1986)

Thank you to those who replied...

Although Princeton Univ doesn't have Surveying and Mapping in its
collection of online journals, the Engineering Library does have a paper
version of this journal.  So I now have a copy of Pittman's article.

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From roger at opq.se  Mon Mar 16 00:43:14 2009
From: roger at opq.se (Roger Oberholtzer)
Date: Mon, 16 Mar 2009 08:43:14 +0100
Subject: [Proj] lat/long to northing/easting and back again
In-Reply-To: <1236063401.18280.24.camel@acme.pacific>
References: <1236063401.18280.24.camel@acme.pacific>
Message-ID: <1237189394.13273.13.camel@acme.pacific>

Gee, no opinions/suggestions? Especially on the best way to convert
northings/eastings back into wgs84?

On Tue, 2009-03-03 at 07:56 +0100, Roger Oberholtzer wrote:
> I have always used proj to convert WGS84 lat/long values to
> northing/easting values in various parts of the world. In doing so, I
> usually need to interpolate between points to find specific locations.
> These interpolated locations have always been reported as
> northing/easting values in meters. Job finished.
> 
> I now have a use where, after determining the interpolated
> northing/easting, I need to convert the location back into lat/long in
> degrees. This I have never done with proj.
> 
> My question is, if you had to locate a position between two lat/long
> values, how would you best do this with proj? The source data in my case
> is WGS84 values from a Trimble GPS. The 'interpolated' lat/longs should
> also be reported in WGS84. In reality, the values will be collected
> throughout Germany. But everything is requested to be provided in WGS84.
> 
> I use the C API for this. But any pointers are welcome. If I have left
> out any important detail, just ask.
> 
> 
> -- 
> Roger Oberholtzer
> 
> OPQ Systems / Ramböll RST
> 
> Ramböll Sverige AB
> Krukmakargatan 21
> P.O. Box 17009
> SE-104 62 Stockholm, Sweden
> 
> Office: Int +46 8-615 60 20
> Mobile: Int +46 70-815 1696
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
-- 
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden

Office: Int +46 8-615 60 20
Mobile: Int +46 70-815 1696



From support.mn at elisanet.fi  Mon Mar 16 04:38:48 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Mon, 16 Mar 2009 13:38:48 +0200 (EET)
Subject: [Proj] lat/long to northing/easting and back again
Message-ID: <1287092.427521237203528569.JavaMail.support.mn@elisanet.fi>

Hello,

how about using pj_inv() in the proj.4 library?

regards: Janne.

-------------------------------------------------

Roger Oberholtzer [roger at opq.se] kirjoitti: 
> Gee, no opinions/suggestions? Especially on the best way to convert
> northings/eastings back into wgs84?
> 
> On Tue, 2009-03-03 at 07:56 +0100, Roger Oberholtzer wrote:
> > I have always used proj to convert WGS84 lat/long values to
> > northing/easting values in various parts of the world. In doing so, I
> > usually need to interpolate between points to find specific locations.
> > These interpolated locations have always been reported as
> > northing/easting values in meters. Job finished.
> > 
> > I now have a use where, after determining the interpolated
> > northing/easting, I need to convert the location back into lat/long in
> > degrees. This I have never done with proj.
> > 
> > My question is, if you had to locate a position between two lat/long
> > values, how would you best do this with proj? The source data in my case
> > is WGS84 values from a Trimble GPS. The 'interpolated' lat/longs should
> > also be reported in WGS84. In reality, the values will be collected
> > throughout Germany. But everything is requested to be provided in WGS84.
> > 
> > I use the C API for this. But any pointers are welcome. If I have left
> > out any important detail, just ask.
> > 
> > 
> > -- 
> > Roger Oberholtzer
> > 
> > OPQ Systems / Ramböll RST
> > 
> > Ramböll Sverige AB
> > Krukmakargatan 21
> > P.O. Box 17009
> > SE-104 62 Stockholm, Sweden
> > 
> > Office: Int +46 8-615 60 20
> > Mobile: Int +46 70-815 1696
> > 
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
> -- 
> Roger Oberholtzer
> 
> OPQ Systems / Ramböll RST
> 
> Ramböll Sverige AB
> Krukmakargatan 21
> P.O. Box 17009
> SE-104 62 Stockholm, Sweden
> 
> Office: Int +46 8-615 60 20
> Mobile: Int +46 70-815 1696
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From roger at opq.se  Mon Mar 16 05:37:30 2009
From: roger at opq.se (Roger Oberholtzer)
Date: Mon, 16 Mar 2009 13:37:30 +0100
Subject: [Proj] lat/long to northing/easting and back again
In-Reply-To: <1287092.427521237203528569.JavaMail.support.mn@elisanet.fi>
References: <1287092.427521237203528569.JavaMail.support.mn@elisanet.fi>
Message-ID: <1237207050.13273.49.camel@acme.pacific>

On Mon, 2009-03-16 at 13:38 +0200, support.mn at elisanet.fi wrote:
> Hello,
> 
> how about using pj_inv() in the proj.4 library?

OK. But does that do an inverse of all projections? I seem to recall a
discussion a few months ago about this. IIRC, not all inverse
calculations has the same accuracy. In fact, I have some flexibility in
which forward calculation is done: it will only be used internally.
Externally, all will be WGS84 lat/longs. 

> 
> regards: Janne.
> 
> -------------------------------------------------
> 
> Roger Oberholtzer [roger at opq.se] kirjoitti: 
> > Gee, no opinions/suggestions? Especially on the best way to convert
> > northings/eastings back into wgs84?
> > 
> > On Tue, 2009-03-03 at 07:56 +0100, Roger Oberholtzer wrote:
> > > I have always used proj to convert WGS84 lat/long values to
> > > northing/easting values in various parts of the world. In doing so, I
> > > usually need to interpolate between points to find specific locations.
> > > These interpolated locations have always been reported as
> > > northing/easting values in meters. Job finished.
> > > 
> > > I now have a use where, after determining the interpolated
> > > northing/easting, I need to convert the location back into lat/long in
> > > degrees. This I have never done with proj.
> > > 
> > > My question is, if you had to locate a position between two lat/long
> > > values, how would you best do this with proj? The source data in my case
> > > is WGS84 values from a Trimble GPS. The 'interpolated' lat/longs should
> > > also be reported in WGS84. In reality, the values will be collected
> > > throughout Germany. But everything is requested to be provided in WGS84.
> > > 
> > > I use the C API for this. But any pointers are welcome. If I have left
> > > out any important detail, just ask.
> > > 
> > > 
> > > -- 
> > > Roger Oberholtzer
> > > 
> > > OPQ Systems / Ramböll RST
> > > 
> > > Ramböll Sverige AB
> > > Krukmakargatan 21
> > > P.O. Box 17009
> > > SE-104 62 Stockholm, Sweden
> > > 
> > > Office: Int +46 8-615 60 20
> > > Mobile: Int +46 70-815 1696
> > > 
> > > _______________________________________________
> > > Proj mailing list
> > > Proj at lists.maptools.org
> > > http://lists.maptools.org/mailman/listinfo/proj
> > -- 
> > Roger Oberholtzer
> > 
> > OPQ Systems / Ramböll RST
> > 
> > Ramböll Sverige AB
> > Krukmakargatan 21
> > P.O. Box 17009
> > SE-104 62 Stockholm, Sweden
> > 
> > Office: Int +46 8-615 60 20
> > Mobile: Int +46 70-815 1696
> > 
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
-- 
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden

Office: Int +46 8-615 60 20
Mobile: Int +46 70-815 1696



From geraldi.evenden at gmail.com  Mon Mar 16 08:04:41 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Mon, 16 Mar 2009 11:04:41 -0400
Subject: [Proj] lat/long to northing/easting and back again
In-Reply-To: <1237207050.13273.49.camel@acme.pacific>
References: <1287092.427521237203528569.JavaMail.support.mn@elisanet.fi>
	<1237207050.13273.49.camel@acme.pacific>
Message-ID: <200903161104.42044.geraldi.evenden@gmail.com>

On Monday 16 March 2009 8:37:30 am Roger Oberholtzer wrote:
> On Mon, 2009-03-16 at 13:38 +0200, support.mn at elisanet.fi wrote:
> > Hello,
> >
> > how about using pj_inv() in the proj.4 library?
>
> OK. But does that do an inverse of all projections? I seem to recall a
> discussion a few months ago about this. IIRC, not all inverse
> calculations has the same accuracy. In fact, I have some flexibility in
> which forward calculation is done: it will only be used internally.
> Externally, all will be WGS84 lat/longs.

I tremble at the thought of getting into this thread but here goes:

First, interpolating positions from easting/northing values is shaky and 
accuracy of such efforts is highly dependent upon the distance between points 
used in the operation.

RECOMENDATION/REQUIREMENT: Doing this operation requires someone who is 
familiar with projections (or at least the one selected) and their proper use 
and limitations.

Secondly, before starting on this project check if the projection selected has 
an inverse.  Fairly easy to do: 1) do a forward and 2) see if the inverse of 
the just computed forward x/y executes and returns the original lat/lon.

Not too complicated.

> > regards: Janne.
> >
> > -------------------------------------------------
> >
> > Roger Oberholtzer [roger at opq.se] kirjoitti:
> > > Gee, no opinions/suggestions? Especially on the best way to convert
> > > northings/eastings back into wgs84?
> > >
> > > On Tue, 2009-03-03 at 07:56 +0100, Roger Oberholtzer wrote:
> > > > I have always used proj to convert WGS84 lat/long values to
> > > > northing/easting values in various parts of the world. In doing so, I
> > > > usually need to interpolate between points to find specific
> > > > locations. These interpolated locations have always been reported as
> > > > northing/easting values in meters. Job finished.
> > > >
> > > > I now have a use where, after determining the interpolated
> > > > northing/easting, I need to convert the location back into lat/long
> > > > in degrees. This I have never done with proj.
> > > >
> > > > My question is, if you had to locate a position between two lat/long
> > > > values, how would you best do this with proj? The source data in my
> > > > case is WGS84 values from a Trimble GPS. The 'interpolated' lat/longs
> > > > should also be reported in WGS84. In reality, the values will be
> > > > collected throughout Germany. But everything is requested to be
> > > > provided in WGS84.
> > > >
> > > > I use the C API for this. But any pointers are welcome. If I have
> > > > left out any important detail, just ask.
> > > >
> > > >
> > > > --
> > > > Roger Oberholtzer
> > > >
> > > > OPQ Systems / Ramböll RST
> > > >
> > > > Ramböll Sverige AB
> > > > Krukmakargatan 21
> > > > P.O. Box 17009
> > > > SE-104 62 Stockholm, Sweden
> > > >
> > > > Office: Int +46 8-615 60 20
> > > > Mobile: Int +46 70-815 1696
> > > >
> > > > _______________________________________________
> > > > Proj mailing list
> > > > Proj at lists.maptools.org
> > > > http://lists.maptools.org/mailman/listinfo/proj
> > >
> > > --
> > > Roger Oberholtzer
> > >
> > > OPQ Systems / Ramböll RST
> > >
> > > Ramböll Sverige AB
> > > Krukmakargatan 21
> > > P.O. Box 17009
> > > SE-104 62 Stockholm, Sweden
> > >
> > > Office: Int +46 8-615 60 20
> > > Mobile: Int +46 70-815 1696
> > >
> > > _______________________________________________
> > > Proj mailing list
> > > Proj at lists.maptools.org
> > > http://lists.maptools.org/mailman/listinfo/proj
> >
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj



-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From roger at opq.se  Mon Mar 16 08:39:30 2009
From: roger at opq.se (Roger Oberholtzer)
Date: Mon, 16 Mar 2009 16:39:30 +0100
Subject: [Proj] lat/long to northing/easting and back again
In-Reply-To: <200903161104.42044.geraldi.evenden@gmail.com>
References: <1287092.427521237203528569.JavaMail.support.mn@elisanet.fi>
	<1237207050.13273.49.camel@acme.pacific>
	<200903161104.42044.geraldi.evenden@gmail.com>
Message-ID: <1237217970.11252.10.camel@acme.pacific>

On Mon, 2009-03-16 at 11:04 -0400, Gerald I. Evenden wrote:
> On Monday 16 March 2009 8:37:30 am Roger Oberholtzer wrote:
> > On Mon, 2009-03-16 at 13:38 +0200, support.mn at elisanet.fi wrote:
> > > Hello,
> > >
> > > how about using pj_inv() in the proj.4 library?
> >
> > OK. But does that do an inverse of all projections? I seem to recall a
> > discussion a few months ago about this. IIRC, not all inverse
> > calculations has the same accuracy. In fact, I have some flexibility in
> > which forward calculation is done: it will only be used internally.
> > Externally, all will be WGS84 lat/longs.
> 
> I tremble at the thought of getting into this thread but here goes:
> 
> First, interpolating positions from easting/northing values is shaky and 
> accuracy of such efforts is highly dependent upon the distance between points 
> used in the operation.

The distance is in the order of meters. Typically less than 10. Why
interpolate in such small distances? Don't ask...

> RECOMENDATION/REQUIREMENT: Doing this operation requires someone who is 
> familiar with projections (or at least the one selected) and their proper use 
> and limitations.
> 
> Secondly, before starting on this project check if the projection selected has 
> an inverse.  Fairly easy to do: 1) do a forward and 2) see if the inverse of 
> the just computed forward x/y executes and returns the original lat/lon.
> 
> Not too complicated.

That is what I am doing now. I am trying to see how to use the library
to do this. My use thus far has been to go the opposite direction, using
pj_init_plus and pj_transform. Works like a charm.

I am guessing I would reverse the first two parameters to pj_transform
to get the inverse. Or is that too simplistic?

-- 
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden

Office: Int +46 8-615 60 20
Mobile: Int +46 70-815 1696



From warmerdam at pobox.com  Mon Mar 16 08:47:29 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 16 Mar 2009 11:47:29 -0400
Subject: [Proj] lat/long to northing/easting and back again
In-Reply-To: <1237217970.11252.10.camel@acme.pacific>
References: <1287092.427521237203528569.JavaMail.support.mn@elisanet.fi>
	<1237207050.13273.49.camel@acme.pacific>
	<200903161104.42044.geraldi.evenden@gmail.com>
	<1237217970.11252.10.camel@acme.pacific>
Message-ID: <49BE7491.9030506@pobox.com>

Roger Oberholtzer wrote:
> That is what I am doing now. I am trying to see how to use the library
> to do this. My use thus far has been to go the opposite direction, using
> pj_init_plus and pj_transform. Works like a charm.
> 
> I am guessing I would reverse the first two parameters to pj_transform
> to get the inverse. Or is that too simplistic?

Roger,

That is correct.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From lavuunit at yahoo.fr  Mon Mar 16 09:12:16 2009
From: lavuunit at yahoo.fr (Lavver)
Date: Mon, 16 Mar 2009 09:12:16 -0700 (PDT)
Subject: [Proj]  Create custum projection definition PROJ4 for rwanda
Message-ID: <1237219936633-2486989.post@n2.nabble.com>


Hi,

I'm struggling to create a custom projection definition for QGis for the
national system used for Rwanda. I am new to the PROJ.4 syntax. 

The ArcView prj file (which works fine) shows:
PROJCS["Rwanda1",GEOGCS["GCS_Clarke_1880",DATUM["D_Clarke_1880",
SPHEROID["Clarke_1880",6378249.138,293.466307656]],
PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
PROJECTION["Gauss_Kruger"],
PARAMETER["False_Easting",500000.0],PARAMETER["False_Northing",10000000.0],
PARAMETER["Central_Meridian",30.0],PARAMETER["Scale_Factor",0.9999],
PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0]]

I translated it to 

+proj=tmerc +ellps=clrk80 +a=6378249.138 +rf=293.466307656 +lon_0=30
+k=0.999900 +units=m +x_0=500000 +y_0=10000000

But I'm still 200m to 300m away from reality

The following WGS84 N/E coordinates should give the projected Coordinates
-1.57741 N /29.93690 E   =>    9825897/492907
-1.57763 N /29.93723 E   =>    9825873/492943
-1.61141 N /29.92847 E   =>    9822138/491968

Could someone help me please ? Maybe  I am omitting a parameter...

How can I adjust the parameters? 

Cheers

Lavuun





-- 
View this message in context: http://n2.nabble.com/Create-custum-projection-definition-PROJ4-for-rwanda-tp2486989p2486989.html
Sent from the PROJ.4 mailing list archive at Nabble.com.



From warmerdam at pobox.com  Mon Mar 16 09:20:11 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 16 Mar 2009 12:20:11 -0400
Subject: [Proj] Create custum projection definition PROJ4 for rwanda
In-Reply-To: <1237219936633-2486989.post@n2.nabble.com>
References: <1237219936633-2486989.post@n2.nabble.com>
Message-ID: <49BE7C3B.6060006@pobox.com>

Lavver wrote:
> Hi,
> 
> I'm struggling to create a custom projection definition for QGis for the
> national system used for Rwanda. I am new to the PROJ.4 syntax. 
> 
> The ArcView prj file (which works fine) shows:
> PROJCS["Rwanda1",GEOGCS["GCS_Clarke_1880",DATUM["D_Clarke_1880",
> SPHEROID["Clarke_1880",6378249.138,293.466307656]],
> PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
> PROJECTION["Gauss_Kruger"],
> PARAMETER["False_Easting",500000.0],PARAMETER["False_Northing",10000000.0],
> PARAMETER["Central_Meridian",30.0],PARAMETER["Scale_Factor",0.9999],
> PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0]]
> 
> I translated it to 
> 
> +proj=tmerc +ellps=clrk80 +a=6378249.138 +rf=293.466307656 +lon_0=30
> +k=0.999900 +units=m +x_0=500000 +y_0=10000000
> 
> But I'm still 200m to 300m away from reality
> 
> The following WGS84 N/E coordinates should give the projected Coordinates
> -1.57741 N /29.93690 E   =>    9825897/492907
> -1.57763 N /29.93723 E   =>    9825873/492943
> -1.61141 N /29.92847 E   =>    9822138/491968
> 
> Could someone help me please ? Maybe  I am omitting a parameter...

Lavuun,

It sounds to me like you are running into datum shifting issues.
I think you need to determine acceptable "towgs84" parameters for
your datum (D_Clarke_1880 isn't really a datum description by
the way, it just says it is a generic datum based on the Clarke 1880
ellipsoid).

This material on towgs84 may be somewhat helpful:

http://trac.osgeo.org/proj/wiki/GenParms#towgs84-DatumtransformationtoWGS84

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From Chris.Barker at noaa.gov  Mon Mar 16 09:28:27 2009
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Mon, 16 Mar 2009 09:28:27 -0700
Subject: [Proj] lat/long to northing/easting and back again
In-Reply-To: <1237217970.11252.10.camel@acme.pacific>
References: <1287092.427521237203528569.JavaMail.support.mn@elisanet.fi>
	<1237207050.13273.49.camel@acme.pacific>
	<200903161104.42044.geraldi.evenden@gmail.com>
	<1237217970.11252.10.camel@acme.pacific>
Message-ID: <49BE7E2B.8020609@noaa.gov>

Roger Oberholtzer wrote:
>> First, interpolating positions from easting/northing values is shaky and 
>> accuracy of such efforts is highly dependent upon the distance between points 
>> used in the operation.

My first thought is -- why so this in projected space? It sounds like 
you have lat-long, and you want to interpolate between two points, and 
get back lat/long again. So could you do this in lat-long space?

To answer that, we need to know what you mean by interpolate?

Do you have two points and want to know what the midpoint is, for 
example? If so, what does "mid point" mean? That's not obvious on a 
globe, which may be why you're using projected coordinates, but with 
Gerald's recently released geodetic (geodesic?) tools, it should be 
doable to find a point along a great circle connecting two points, for 
instance.

> The distance is in the order of meters. Typically less than 10.

In that case, you can probably get pretty darn close by pretending that 
that lat-long units are Cartesian -- and that would be really easy! How 
accurate do you really need to be?

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker at noaa.gov


From cjmce at lsu.edu  Mon Mar 16 09:31:23 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Mon, 16 Mar 2009 11:31:23 -0500
Subject: [Proj] lat/long to northing/easting and back again
References: <1287092.427521237203528569.JavaMail.support.mn@elisanet.fi><1237207050.13273.49.camel@acme.pacific><200903161104.42044.geraldi.evenden@gmail.com><1237217970.11252.10.camel@acme.pacific>
	<49BE7E2B.8020609@noaa.gov>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2642@email002.lsu.edu>

I'd like to point out that NADCON and its derivatives do exactly that - the algorithm does a bi-linear interpolation in terms of the graticule.  The ultimate "accuracy" is dependant on the fineness of the "mesh" of the graticule, and not on the interpolation.
 
C. Mugnier
LSU

________________________________

From: proj-bounces at lists.maptools.org on behalf of Christopher Barker
Sent: Mon 16-Mar-09 11:28
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] lat/long to northing/easting and back again



Roger Oberholtzer wrote:
>> First, interpolating positions from easting/northing values is shaky and
>> accuracy of such efforts is highly dependent upon the distance between points
>> used in the operation.

My first thought is -- why so this in projected space? It sounds like
you have lat-long, and you want to interpolate between two points, and
get back lat/long again. So could you do this in lat-long space?

To answer that, we need to know what you mean by interpolate?

Do you have two points and want to know what the midpoint is, for
example? If so, what does "mid point" mean? That's not obvious on a
globe, which may be why you're using projected coordinates, but with
Gerald's recently released geodetic (geodesic?) tools, it should be
doable to find a point along a great circle connecting two points, for
instance.

> The distance is in the order of meters. Typically less than 10.

In that case, you can probably get pretty darn close by pretending that
that lat-long units are Cartesian -- and that would be really easy! How
accurate do you really need to be?

-Chris


--
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker at noaa.gov
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090316/880197f4/attachment.html>

From roger at opq.se  Mon Mar 16 11:24:09 2009
From: roger at opq.se (Roger Oberholtzer)
Date: Mon, 16 Mar 2009 19:24:09 +0100
Subject: [Proj] lat/long to northing/easting and back again
In-Reply-To: <49BE7E2B.8020609@noaa.gov>
References: <1287092.427521237203528569.JavaMail.support.mn@elisanet.fi>
	<1237207050.13273.49.camel@acme.pacific>
	<200903161104.42044.geraldi.evenden@gmail.com>
	<1237217970.11252.10.camel@acme.pacific>  <49BE7E2B.8020609@noaa.gov>
Message-ID: <1237227849.11252.55.camel@acme.pacific>

On Mon, 2009-03-16 at 09:28 -0700, Christopher Barker wrote:
> Roger Oberholtzer wrote:
> >> First, interpolating positions from easting/northing values is shaky and 
> >> accuracy of such efforts is highly dependent upon the distance between points 
> >> used in the operation.
> 
> My first thought is -- why so this in projected space? It sounds like 
> you have lat-long, and you want to interpolate between two points, and 
> get back lat/long again. So could you do this in lat-long space?

We need to involve the odd gyroscope, inclinometer, and pulse distance
transducer at this point. All are calculating distances in meters. That
could probably be changed. If it was a GPS-only solution, then the
question would not have to be asked.

> To answer that, we need to know what you mean by interpolate?

Our data is tagged with time that has been synchronized with our GPS.
When we want to know where we are, we start by determining when we were
at the point we want to know the location of.

> Do you have two points and want to know what the midpoint is, for 
> example? If so, what does "mid point" mean? That's not obvious on a 
> globe, which may be why you're using projected coordinates, but with 
> Gerald's recently released geodetic (geodesic?) tools, it should be 
> doable to find a point along a great circle connecting two points, for 
> instance.

The distances are luckily too small to have to involve the great circle.

> > The distance is in the order of meters. Typically less than 10.
> 
> In that case, you can probably get pretty darn close by pretending that 
> that lat-long units are Cartesian -- and that would be really easy! How 
> accurate do you really need to be?
> 
> -Chris
> 
> 
-- 
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden

Office: Int +46 8-615 60 20
Mobile: Int +46 70-815 1696



From ckarney at Sarnoff.com  Mon Mar 16 14:12:50 2009
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Mon, 16 Mar 2009 17:12:50 -0400
Subject: [Proj] Problems with Pittman geodesic??
In-Reply-To: <200901182057.33506.geraldi.evenden@gmail.com>
References: <200901182057.33506.geraldi.evenden@gmail.com>
Message-ID: <91F640D26AB8E54982706321A514CA264E86364BD5@MALIBU.sarnoff.internal>

> From: Gerald I. Evenden [geraldi.evenden at gmail.com]
> Sent: Sunday, January 18, 2009 20:57
> To: PROJ.4 and general Projections Discussions
> Subject: [Proj] Problems with Pittman geodesic??
>
> While checking out the accuracy of Vincenty vs. Pittman I was fairly
> consistently getting agreement to micron or better.
>
> BUT not always!!!
>
> I would appreciate anyone who has a Pittman geodesic routine to test
> the following inverse (WGS84 ellipsoid):
>
> point 1 at 0 lat, 0 lon and point 2 at 45N 90E.
>
> With my version of Pittman I get a distance of 9993541.5348708 AND I
> get the same distance while changing the longitude of the second point
> from about 89.6 to a hair over 90.
>
> At 0,0/45,89.5:
> Pittman: 9970963.0100082
> Vincenty:9970963.01000801
>
> At 0,0/45,89.6
> Pittman: 9993541.5348708
> Vincenty:9978847.65947167
>
> Pittman remained constant in this longitude interval
>
> At 0,0/45,90
> Pittman:  9993541.5348708
> Vincenty:10010386.3610382
>
> Between 90.0000001 and 90.000001 Pittman finally came back into near
> agreement with Vincenty.
>
> Note: I did nothing to the Pittman FORTRAN loaned from Mugnier other
> than compile it with gfortran and link to a C driver.

Gerald:

I've coded up Pittman's algorithm (as given in his 1986 paper) in C++.
I left the order alone (N = 5), but increased the number of allowed
iterations in the inverse method to 100.  I followed the Fortran code
fairly slavishly, but used long doubles for double precision.  (Pittman
was on a machine where 1.0d0 - 1.0d-18 differed from 1.  In addition,
there are numerous places in his algorithm where the method is sensitive
to roundoff; so I figured I'd provide the extra 11 bits of precision to
be safe.)  Here are the results I get for the inverse calculation (for
the WGS84 ellipsoid).  Lat1 = lon1 = 0, lat2 = 45; the other columns are

lon2 azi1 azi2 s12 niter

89.0 45.093504806662311 89.443934945243591  9931540.5187563721 6
89.1 45.094149622603338 89.514653188105030  9939424.8761606768 6
89.2 45.094706860005074 89.585369717060000  9947309.3159994913 7
89.3 45.095176523124121 89.656084748302839  9955193.8262614792 7
89.4 45.095558615682521 89.726798498013506  9963078.3949346433 7
89.5 45.095853140867789 89.797511182358922  9970963.0100083940 7
89.6 45.096212150579780 90.000000000000000  9993541.5243879881 100
89.7 45.096212150579780 90.000000000000000  9993541.5243879881 100
89.8 45.096212150579780 90.000000000000000  9993541.5243879881 100
89.9 45.096212150579780 90.000000000000000  9993541.5243879881 100
90.0 45.096012330347754 90.151066188700727 10010386.3610382384 10
90.1 45.095781488302975 90.221777019794016 10018271.0023121920 7
90.2 45.095463086233842 90.292488298435018 10026155.6059209196 7
90.3 45.095057123052886 90.363200240733359 10034040.1598547278 7
90.4 45.094563597138410 90.433913062797377 10041924.6521030197 6
90.5 45.093982506334513 90.504626980735483 10049809.0706572333 6

This confirms your observation and offers an explanation.  Pittman's
inverse method fails to converge in the interval lon2 in [89.6, 89.9]
where the returned distance is constant.

I was going to spend another day checking over my transcription of the
code; but I figured that, given you see the same behavior, the problem
is likely to be in the algorithm.

The iterative method Pittman uses for the inverse is Newton's method
where he has substituted an approximate expression for the derivative.
Unsurprisingly, this sometimes fails to converge.  Another possible
limitation of Pittman's method is that the code needs to know the number
of vertices between the endpoints.  As the iteration proceeds, the
estimate of the number of vertices isn't updated but should be(?).  This
would explain why problems occur near azi2 = 90.

I've also found a couple of bugs in the the published code.
(Uninitialized variables are accessed in a couple of places; the guards
against taking square roots of negative numbers are not always correct.)
However, it's possible that the version of the code you got from Mugnier
has these fixed.

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From cjmce at lsu.edu  Mon Mar 16 14:54:28 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Mon, 16 Mar 2009 16:54:28 -0500
Subject: [Proj] Problems with Pittman geodesic??
References: <200901182057.33506.geraldi.evenden@gmail.com>
	<91F640D26AB8E54982706321A514CA264E86364BD5@MALIBU.sarnoff.internal>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2644@email002.lsu.edu>

I do recall that Pittman had several telephone conversations with Thaddeus Vincenty before T.V. passed away.   I recall that Pittman indeed made some modifications to his published Fortran code as a result of his conversations.  I do not know or recall what they were other than it was sometbing about singularities.  The compiler Pittman used was Lahey Fortran 77; I don't recall which version, but it was the current one as of his paper.
 
C. Mugnier
LSU

________________________________

From: proj-bounces at lists.maptools.org on behalf of Karney, Charles
Sent: Mon 16-Mar-09 16:12
To: geraldi.evenden at gmail.com; PROJ.4 andgeneral Projections Discussions
Subject: Re: [Proj] Problems with Pittman geodesic??



> From: Gerald I. Evenden [geraldi.evenden at gmail.com]
> Sent: Sunday, January 18, 2009 20:57
> To: PROJ.4 and general Projections Discussions
> Subject: [Proj] Problems with Pittman geodesic??
>
> While checking out the accuracy of Vincenty vs. Pittman I was fairly
> consistently getting agreement to micron or better.
>
> BUT not always!!!
>
> I would appreciate anyone who has a Pittman geodesic routine to test
> the following inverse (WGS84 ellipsoid):
>
> point 1 at 0 lat, 0 lon and point 2 at 45N 90E.
>
> With my version of Pittman I get a distance of 9993541.5348708 AND I
> get the same distance while changing the longitude of the second point
> from about 89.6 to a hair over 90.
>
> At 0,0/45,89.5:
> Pittman: 9970963.0100082
> Vincenty:9970963.01000801
>
> At 0,0/45,89.6
> Pittman: 9993541.5348708
> Vincenty:9978847.65947167
>
> Pittman remained constant in this longitude interval
>
> At 0,0/45,90
> Pittman:  9993541.5348708
> Vincenty:10010386.3610382
>
> Between 90.0000001 and 90.000001 Pittman finally came back into near
> agreement with Vincenty.
>
> Note: I did nothing to the Pittman FORTRAN loaned from Mugnier other
> than compile it with gfortran and link to a C driver.

Gerald:

I've coded up Pittman's algorithm (as given in his 1986 paper) in C++.
I left the order alone (N = 5), but increased the number of allowed
iterations in the inverse method to 100.  I followed the Fortran code
fairly slavishly, but used long doubles for double precision.  (Pittman
was on a machine where 1.0d0 - 1.0d-18 differed from 1.  In addition,
there are numerous places in his algorithm where the method is sensitive
to roundoff; so I figured I'd provide the extra 11 bits of precision to
be safe.)  Here are the results I get for the inverse calculation (for
the WGS84 ellipsoid).  Lat1 = lon1 = 0, lat2 = 45; the other columns are

lon2 azi1 azi2 s12 niter

89.0 45.093504806662311 89.443934945243591  9931540.5187563721 6
89.1 45.094149622603338 89.514653188105030  9939424.8761606768 6
89.2 45.094706860005074 89.585369717060000  9947309.3159994913 7
89.3 45.095176523124121 89.656084748302839  9955193.8262614792 7
89.4 45.095558615682521 89.726798498013506  9963078.3949346433 7
89.5 45.095853140867789 89.797511182358922  9970963.0100083940 7
89.6 45.096212150579780 90.000000000000000  9993541.5243879881 100
89.7 45.096212150579780 90.000000000000000  9993541.5243879881 100
89.8 45.096212150579780 90.000000000000000  9993541.5243879881 100
89.9 45.096212150579780 90.000000000000000  9993541.5243879881 100
90.0 45.096012330347754 90.151066188700727 10010386.3610382384 10
90.1 45.095781488302975 90.221777019794016 10018271.0023121920 7
90.2 45.095463086233842 90.292488298435018 10026155.6059209196 7
90.3 45.095057123052886 90.363200240733359 10034040.1598547278 7
90.4 45.094563597138410 90.433913062797377 10041924.6521030197 6
90.5 45.093982506334513 90.504626980735483 10049809.0706572333 6

This confirms your observation and offers an explanation.  Pittman's
inverse method fails to converge in the interval lon2 in [89.6, 89.9]
where the returned distance is constant.

I was going to spend another day checking over my transcription of the
code; but I figured that, given you see the same behavior, the problem
is likely to be in the algorithm.

The iterative method Pittman uses for the inverse is Newton's method
where he has substituted an approximate expression for the derivative.
Unsurprisingly, this sometimes fails to converge.  Another possible
limitation of Pittman's method is that the code needs to know the number
of vertices between the endpoints.  As the iteration proceeds, the
estimate of the number of vertices isn't updated but should be(?).  This
would explain why problems occur near azi2 = 90.

I've also found a couple of bugs in the the published code.
(Uninitialized variables are accessed in a couple of places; the guards
against taking square roots of negative numbers are not always correct.)
However, it's possible that the version of the code you got from Mugnier
has these fixed.

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info <http://charles.karney.info/> 
Tel: +1 609 734 2312
Fax: +1 609 734 2662
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090316/981d3045/attachment.html>

From lavuunit at yahoo.fr  Tue Mar 17 01:30:07 2009
From: lavuunit at yahoo.fr (Lavver)
Date: Tue, 17 Mar 2009 01:30:07 -0700 (PDT)
Subject: [Proj] Create custum projection definition PROJ4 for rwanda
In-Reply-To: <49BE7C3B.6060006@pobox.com>
References: <1237219936633-2486989.post@n2.nabble.com>
	<49BE7C3B.6060006@pobox.com>
Message-ID: <1237278607327-2490170.post@n2.nabble.com>


Hi Frank, 

Thanks a lot for the tip. I added the +towgs84=-157,-7,-300 for a 3
parameter spatial translation. 

I found the approximate parameters for coordinate transformation  Arc 1960
to WGS 84 in the EPSG database and adapted them slightly. Now I have still
an error of 1m (which is acceptable for our usage)

Kind regards

Lavuun



Frank Warmerdam wrote:
> 
> Lavver wrote:
>> Hi,
>> 
>> I'm struggling to create a custom projection definition for QGis for the
>> national system used for Rwanda. I am new to the PROJ.4 syntax. 
>> 
>> The ArcView prj file (which works fine) shows:
>> PROJCS["Rwanda1",GEOGCS["GCS_Clarke_1880",DATUM["D_Clarke_1880",
>> SPHEROID["Clarke_1880",6378249.138,293.466307656]],
>> PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
>> PROJECTION["Gauss_Kruger"],
>> PARAMETER["False_Easting",500000.0],PARAMETER["False_Northing",10000000.0],
>> PARAMETER["Central_Meridian",30.0],PARAMETER["Scale_Factor",0.9999],
>> PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0]]
>> 
>> I translated it to 
>> 
>> +proj=tmerc +ellps=clrk80 +a=6378249.138 +rf=293.466307656 +lon_0=30
>> +k=0.999900 +units=m +x_0=500000 +y_0=10000000
>> 
>> But I'm still 200m to 300m away from reality
>> 
>> The following WGS84 N/E coordinates should give the projected Coordinates
>> -1.57741 N /29.93690 E   =>    9825897/492907
>> -1.57763 N /29.93723 E   =>    9825873/492943
>> -1.61141 N /29.92847 E   =>    9822138/491968
>> 
>> Could someone help me please ? Maybe  I am omitting a parameter...
> 
> Lavuun,
> 
> It sounds to me like you are running into datum shifting issues.
> I think you need to determine acceptable "towgs84" parameters for
> your datum (D_Clarke_1880 isn't really a datum description by
> the way, it just says it is a generic datum based on the Clarke 1880
> ellipsoid).
> 
> This material on towgs84 may be somewhat helpful:
> 
> http://trac.osgeo.org/proj/wiki/GenParms#towgs84-DatumtransformationtoWGS84
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 
> 

-- 
View this message in context: http://n2.nabble.com/Create-custum-projection-definition-PROJ4-for-rwanda-tp2486989p2490170.html
Sent from the PROJ.4 mailing list archive at Nabble.com.



From pieter.bosch at za.saabgroup.com  Tue Mar 17 03:05:17 2009
From: pieter.bosch at za.saabgroup.com (Pieter Bosch)
Date: Tue, 17 Mar 2009 12:05:17 +0200
Subject: [Proj] Hi
Message-ID: <E2B84C83ADCDE641A5B2FF714409023DD70504@svr-mail.GrIDS.co.za>

Need some info.

 

I've got some information from the web that indicates that Gauss-Kruger
divides zones of width 3*. I also found text saying its is the same as
UTM with zones of 6* and that only the scale factor changes to 1.0 .
Does any one know the real answer?

 

If I do a UTM with a scalefactor of 1.0 will that be a gauss kruger
projection? 

 

Anyone?

 

thanks 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090317/34b65c74/attachment.html>

From Mikael.Rittri at carmenta.com  Tue Mar 17 03:58:38 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Tue, 17 Mar 2009 11:58:38 +0100
Subject: [Proj] Hi
In-Reply-To: <E2B84C83ADCDE641A5B2FF714409023DD70504@svr-mail.GrIDS.co.za>
References: <E2B84C83ADCDE641A5B2FF714409023DD70504@svr-mail.GrIDS.co.za>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101765D7E@posty.carmenta.se>

Pieter wrote:

> I've got some information from the web that indicates that Gauss-Kruger divides zones of width 3*. 
> I also found text saying its is the same as UTM with zones of 6* and that only the scale factor changes to 1.0 . Does any one know the real answer?

Both conventions exist, and a few more national ones.
See http://www.cartotalk.com/lofiversion/index.php?t3633.html for a discussion, and some more links.  
In summary, if someone says "Gauss-Krüger zone number n", then you have not the slightest idea what it means... 

Best regards,
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com 

 _______________________________

From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Pieter Bosch
Sent: den 17 mars 2009 11:05
To: proj at lists.maptools.org
Subject: [Proj] Hi

Need some info.

I've got some information from the web that indicates that Gauss-Kruger divides zones of width 3*. I also found text saying its is the same as UTM with zones of 6* and that only the scale factor changes to 1.0 . Does any one know the real answer?

If I do a UTM with a scalefactor of 1.0 will that be a gauss kruger projection? 

Anyone?

thanks 



From pieter.bosch at za.saabgroup.com  Tue Mar 17 05:03:45 2009
From: pieter.bosch at za.saabgroup.com (Pieter Bosch)
Date: Tue, 17 Mar 2009 14:03:45 +0200
Subject: [Proj] Hi
Message-ID: <E2B84C83ADCDE641A5B2FF714409023DD70558@svr-mail.GrIDS.co.za>

Hi,

I've seen your text, and its been very help full.

I was asking this question because I've got a military map in my possession that states that it is in a Gauss Conformal projection and that the central meridian is at 23*East and also using wgs84 spheroid.

That central meridian of 23*East is not an interval of a Central meridian of a 6* or 3* zone width system 



 

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Mikael Rittri
Sent: 17 March 2009 12:59 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Hi

Pieter wrote:

> I've got some information from the web that indicates that Gauss-Kruger divides zones of width 3*. 
> I also found text saying its is the same as UTM with zones of 6* and that only the scale factor changes to 1.0 . Does any one know the real answer?

Both conventions exist, and a few more national ones.
See http://www.cartotalk.com/lofiversion/index.php?t3633.html for a discussion, and some more links.  
In summary, if someone says "Gauss-Krüger zone number n", then you have not the slightest idea what it means... 

Best regards,
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com 

 _______________________________

From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Pieter Bosch
Sent: den 17 mars 2009 11:05
To: proj at lists.maptools.org
Subject: [Proj] Hi

Need some info.

I've got some information from the web that indicates that Gauss-Kruger divides zones of width 3*. I also found text saying its is the same as UTM with zones of 6* and that only the scale factor changes to 1.0 . Does any one know the real answer?

If I do a UTM with a scalefactor of 1.0 will that be a gauss kruger projection? 

Anyone?

thanks 

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From Mikael.Rittri at carmenta.com  Tue Mar 17 06:06:13 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Tue, 17 Mar 2009 14:06:13 +0100
Subject: [Proj] Hi
Message-ID: <FAF6E56B26D2044696772EBE89B1535101765DA1@posty.carmenta.se>

Hello,
"Gauss conformal" means the same thing as "Gauss-Krüger" or "Transverse Mercator". 
With the central longitude 23°E, it looks like a national definition. 

I looked for "23" in the pcs.csv file that is shipped with GDAL.  
Assuming that your coordinate reference system is included in the EPSG dataset, 
I think it must be one of these: 

  CODE        NAME                          AREA OF USE
  EPSG:2050,  "Hartebeesthoek94 / Lo23",    South Africa 22°E to 24°E
  EPSG:2075,  "ELD79 / Libya zone 12",      Libya 22°E to 24°E
  EPSG:3130,  "ETRS89 / ETRS-GK23FIN",      Finland 22.5°E to 23.5°E
  EPSG:3197,  "LGD2006 / Libya TM zone 12", Libya 22°E to 24°E
  EPSG:22283, "Cape / Lo23",                South Africa 22°E to 24°E 
  EPSG:29383, "Schwarzeck / Lo22/23",       Namibia 22°E to 24°E

Probably, only some of these datums can be considered to be equivalent 
to WGS84, so you can rule out those with other datums. 
You can find the details of the datums and the projection parameters 
on www.epsg-registry.org or on http://spatialreference.org .

To implement the south-oriented Transverse Mercator used in South Africa, you 
may need to use a negative scale factor (use +k=-1 instead of +k=1 ) in Proj.4.

Good luck,
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Pieter Bosch
Sent: den 17 mars 2009 13:04
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Hi

Hi,

I've seen your text, and its been very help full.

I was asking this question because I've got a military map in my possession that states that it is in a Gauss Conformal projection and that the central meridian is at 23*East and also using wgs84 spheroid.

That central meridian of 23*East is not an interval of a Central meridian of a 6* or 3* zone width system 



 

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Mikael Rittri
Sent: 17 March 2009 12:59 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Hi

Pieter wrote:

> I've got some information from the web that indicates that Gauss-Kruger divides zones of width 3*. 
> I also found text saying its is the same as UTM with zones of 6* and that only the scale factor changes to 1.0 . Does any one know the real answer?

Both conventions exist, and a few more national ones.
See http://www.cartotalk.com/lofiversion/index.php?t3633.html for a discussion, and some more links.  
In summary, if someone says "Gauss-Krüger zone number n", then you have not the slightest idea what it means... 

Best regards,
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com 

 _______________________________

From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Pieter Bosch
Sent: den 17 mars 2009 11:05
To: proj at lists.maptools.org
Subject: [Proj] Hi

Need some info.

I've got some information from the web that indicates that Gauss-Kruger divides zones of width 3*. I also found text saying its is the same as UTM with zones of 6* and that only the scale factor changes to 1.0 . Does any one know the real answer?

If I do a UTM with a scalefactor of 1.0 will that be a gauss kruger projection? 

Anyone?

thanks 

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From Chris.Barker at noaa.gov  Tue Mar 17 09:16:57 2009
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue, 17 Mar 2009 09:16:57 -0700
Subject: [Proj] lat/long to northing/easting and back again
In-Reply-To: <1237227849.11252.55.camel@acme.pacific>
References: <1287092.427521237203528569.JavaMail.support.mn@elisanet.fi>
	<1237207050.13273.49.camel@acme.pacific>
	<200903161104.42044.geraldi.evenden@gmail.com>
	<1237217970.11252.10.camel@acme.pacific> <49BE7E2B.8020609@noaa.gov>
	<1237227849.11252.55.camel@acme.pacific>
Message-ID: <49BFCCF9.2030808@noaa.gov>

Roger Oberholtzer wrote:
> We need to involve the odd gyroscope, inclinometer, and pulse distance
> transducer at this point. All are calculating distances in meters.

going lat-long to meters isn't so hard -- in fact, if I'm right about 
geodesics (geodetics?) that's exactly what you can do:

start at point A, and go X meters at a given bearing, and it tells you 
where are you are in lat-long.

> Our data is tagged with time that has been synchronized with our GPS.
> When we want to know where we are, we start by determining when we were
> at the point we want to know the location of.

you should be able to do this in lat-long too.

I guess my thought is that if you have a bunch of data in a given 
projects, then by all means use it. But if you are only going through a 
projection to do geometric calculations, then going back to lat-long, 
you may well be better off staying in lat-long.

> The distances are luckily too small to have to involve the great circle.

Then it really doesn't matter much how you do it! -- you could probably 
stick to spherical geometry, or even straight Cartesian in lat-long and 
be fine.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker at noaa.gov


From geraldi.evenden at gmail.com  Tue Mar 17 13:18:29 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 17 Mar 2009 16:18:29 -0400
Subject: [Proj] Program Geod
Message-ID: <200903171618.29680.geraldi.evenden@gmail.com>

I noticed a factor with Karney's geodesic program Geod where the azimuth of 
the geodesic at point 2, usually referred to as the "back azimuth", pointed 
away from the first point.  That is, it is off by Pi.

To demonstrate what I believe to be the normal way that the back azimuth is 
presented I have attached example runs from NGS and my routine geodesic.
I appologize for claiming to be a "source".
-------------------------------------------------------------------------------------------------------
Inverse from   
http://www.ngs.noaa.gov/cgi-bin/Inv_Fwd/inverse2.prl
(NGS' Vincente procedure)

Ellipsoid : GRS80 / WGS84  (NAD83)        
  Equatorial axis,    a   =    6378137.0000
  Polar axis,         b   =    6356752.3141
  Inverse flattening, 1/f =  298.25722210088
   
  First  Station : p1                            
   ---------------- 
    LAT =  10  0  0.00000 North 
    LON =   5  0  0.00000 East  
   
  Second Station : p2                            
   ---------------- 
    LAT =  60  0  0.00000 North 
    LON = 140  0  0.00000 East  
   
  Forward azimuth        FAZ =  21  9 40.4155 From North
  Back azimuth           BAZ = 314 49 18.3799 From North
  Ellipsoidal distance     S =  11287082.3529 m
----------------------------------------------------------------------------------------------------
From geodesic on charon:

$ geodesic -- "earth ellps=wgs84" "display prec=4"
Geodesic Computer v. 2.0
Free software under X11 license
geod: p1 5 10
geod: p2 140 60
   Point 1
      Lon:    5d00'00.000000"E
      Lat:   10d00'00.000000"N
      Hgt:   0.000000
   Point 2
      Lon:  140d00'00.000000"E
      Lat:   60d00'00.000000"N
      Hgt:   0.000000
   Azimuth p1->p2: 21d9'40.4154961"
   Distance: 11287082.3529
   Azimuth p2->p1: 314d49'18.3799053"
------------------------------------------------------------------------------------------------
From Karney's program Geod

$ ./Geod -i -d -p 4
10 5 60 140
021d09'40.41550" 134d49'18.37991" 11287082.3529

   ^forward azi          ^"back" azi - pi        ^dist

---------------------------------
C makes prettier output  ;-)
-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at Sarnoff.com  Tue Mar 17 14:11:47 2009
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Tue, 17 Mar 2009 17:11:47 -0400
Subject: [Proj] Program Geod
In-Reply-To: <200903171618.29680.geraldi.evenden@gmail.com>
References: <200903171618.29680.geraldi.evenden@gmail.com>
Message-ID: <91F640D26AB8E54982706321A514CA264E86364BDE@MALIBU.sarnoff.internal>

> I noticed a factor with Karney's geodesic program Geod where the
> azimuth of the geodesic at point 2, usually referred to as the "back
> azimuth", pointed away from the first point.  That is, it is off by
> Pi.

The documentation of the Geodesic class specifies

    'azi2 is the "forward" azimuth, i.e., the heading that takes you
    beyond point 2 not back to point 1.'

I'll fix it so that the help printed with Geod -h includes this
definition.

I'm in good company using the forward azimuth at the second point.  This
is the convention used by Rainsford, Vincenty, and Rapp.  I prefer this
choice because when solving the direct problem with a negative distance,
the meaning of both azi1 and azi2 remain the same (they are the heading
in the +s direction).

If you want to change the output, then edit Geod.cpp, changing

   AzimuthString(azi2, prec, dms);

to

   AzimuthString(azi2 + 180, prec, dms);

wherever it occurs.  (AzimuthString folds the result to [0,360).)

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Tue Mar 17 14:23:39 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Tue, 17 Mar 2009 17:23:39 -0400
Subject: [Proj] Program Geod
In-Reply-To: <91F640D26AB8E54982706321A514CA264E86364BDE@MALIBU.sarnoff.internal>
References: <200903171618.29680.geraldi.evenden@gmail.com>
	<91F640D26AB8E54982706321A514CA264E86364BDE@MALIBU.sarnoff.internal>
Message-ID: <200903171723.39188.geraldi.evenden@gmail.com>

On Tuesday 17 March 2009 5:11:47 pm Karney, Charles wrote:
> > I noticed a factor with Karney's geodesic program Geod where the
> > azimuth of the geodesic at point 2, usually referred to as the "back
> > azimuth", pointed away from the first point.  That is, it is off by
> > Pi.
>
> The documentation of the Geodesic class specifies
>
>     'azi2 is the "forward" azimuth, i.e., the heading that takes you
>     beyond point 2 not back to point 1.'
>
> I'll fix it so that the help printed with Geod -h includes this
> definition.
>
> I'm in good company using the forward azimuth at the second point.  This
> is the convention used by Rainsford, Vincenty, and Rapp.  I prefer this
> choice because when solving the direct problem with a negative distance,
> the meaning of both azi1 and azi2 remain the same (they are the heading
> in the +s direction).

Interesting that the company that paid for Vincente's work uses the standard I 
am used to on the NGS online computer.

I only use the logic that if I turn the points around, the output should 
mirror the operation.  Continuing the forward azimuth does not do that.

> If you want to change the output, then edit Geod.cpp, changing
>
>    AzimuthString(azi2, prec, dms);
>
> to
>
>    AzimuthString(azi2 + 180, prec, dms);
>
> wherever it occurs.  (AzimuthString folds the result to [0,360).)
>
> --
> Charles Karney <ckarney at sarnoff.com>
> Sarnoff Corporation, Princeton, NJ 08543-5300
>
> URL: http://charles.karney.info
> Tel: +1 609 734 2312
> Fax: +1 609 734 2662



-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ckarney at Sarnoff.com  Wed Mar 18 05:12:28 2009
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Wed, 18 Mar 2009 08:12:28 -0400
Subject: [Proj] Program Geod
In-Reply-To: <200903171723.39188.geraldi.evenden@gmail.com>
References: <200903171618.29680.geraldi.evenden@gmail.com>
	<91F640D26AB8E54982706321A514CA264E86364BDE@MALIBU.sarnoff.internal>,
	<200903171723.39188.geraldi.evenden@gmail.com>
Message-ID: <91F640D26AB8E54982706321A514CA264E86364BE2@MALIBU.sarnoff.internal>

> Interesting that the company that paid for Vincente's work uses the
> standard I am used to on the NGS online computer.

Damn government bureaucrats!

> > If you want to change the output, then edit Geod.cpp, changing
> >    AzimuthString(azi2, prec, dms);
> > to
> >    AzimuthString(azi2 + 180, prec, dms);
> > wherever it occurs.  (AzimuthString folds the result to [0,360).)

This option will be available in the next release of the software by
including a -b flag on the command line.

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

URL: http://charles.karney.info
Tel: +1 609 734 2312
Fax: +1 609 734 2662


From geraldi.evenden at gmail.com  Thu Mar 19 11:11:32 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 19 Mar 2009 14:11:32 -0400
Subject: [Proj] Status of revised lib proj distribution
Message-ID: <200903191411.32552.geraldi.evenden@gmail.com>

It is not that I have not been working on it, it is just taken time reread 
automake/conf/libtool about 30 or 40 times and do trial and error layouts of 
all the stuff.

Current  intentions are to organize in the following manner:

1. Distribution directory project will only contain material included in the 
generation of the file libproject.[] with configure to be a share library for 
unix/linux based systems.
   a. namespace for all user entries will be "proj_*" and (following gnu 
recommentations) internal routines namespace will be "_proj*".  For example, 
all projection routines will be under _proj* as they are not directly called 
by users.
   b. "PROJ_" will be used for structures and typedefs and macros.
   c. library may contain nonprojection entries such as geodesic procedures, 
etc.
   d. many projection library entries will be compatible with current libproj4 
and, in basic support, proj.4.
   e. in the case of projection procedures, current character desciptor 
elements will be expanded and available for help usage---like -V option in 
lproj.  There will be some changes in the content of the projection 
structures.
   f. all code and library functions will be confined to C99 standards,  As 
already discussed, str[n]casecmp falls under POSIX but this is supported with 
clone included in library when not available on distination machine.

2. The geodesic application directory will hopefully be reissued as soon as 
the project library is out.  This represents the "flavor" of program project 
which will replace lproj.  Heavy on the help.

3. Most applications will consist of a separate tarball.

Constructive comments appreciated but do not complain about C99.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From Mikael.Rittri at carmenta.com  Fri Mar 20 02:34:00 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Fri, 20 Mar 2009 10:34:00 +0100
Subject: [Proj] Cosmetic latitudes,
	and the diacritics of Josef Krovak and others
Message-ID: <FAF6E56B26D2044696772EBE89B153510176609D@posty.carmenta.se>

Hello,
I lump together some unrelated light-weight questions here: 

A) For some projections, a parameter for central latitude can be given,
but it does not really affect the shape of the map - it just creates
an extra offset in the northing values (in addition to the offset 
due to the FalseNorthing).  
    My question: is there an established terminology for such 
a central latitude?  
    When documenting projections, I would like to write something 
like "the central latitude can be specified but is just cosmetic", 
with a link to a glossary entry for "cosmetic central latitude".  
    But is "cosmetic" the best word? 


B) What are the correct diacritical marks for Krovak? (As in Josef
Krovak,
inventor of the Krovak projection for Czechoslovakia.) 
Clifford Mugnier gave two diacritial alternatives for "Krovak" in his
Czech
column ( http://www.asprs.org/resources/grids/01-2000-czech.pdf ):

  1) a slash through the "o" as in the Danish letter (or a lower-case 
     symbol for the empty set), and an acute accent on the "a". 

  2) a hacek (small v) above the "r", no slash through the "o", but
acute accent on the "a". 

His third alternative is to omit the diacritical marks, which most 
people on the Internet seem to do.  Of course, when "Krovak" is the 
name of a projection, it seems best to omit them.  But Mugnier's text 
implies that alternative 1) is the correct version for Josef Krovak 
himself, which puzzled me since there is no slashed o in the Czech 
or Slovak alphabets (according to http://www.omniglot.com/writing ).
   So, does anyone know a definitive answer? (Otherwise, how much 
would omitted diacritics have offended Josef Krovak?) 


C) Is it correct that "Bursa-Wolf" should have a hacek on the "s",
and no "e" in "Wolf"? 
   

Best regards,
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com


From marceivissa at gmail.com  Fri Mar 20 06:59:00 2009
From: marceivissa at gmail.com (=?ISO-8859-1?Q?Marc_Mar=ED_Dell=27Olmo?=)
Date: Fri, 20 Mar 2009 14:59:00 +0100
Subject: [Proj] ED50 Spain Portugal to WSG 84
Message-ID: <e0379d960903200659n1b79e336w48c1373b553e8268@mail.gmail.com>

Dear all,

Can anyone tell me how to convert coordinates ED50 Spain/Portugal (not
only ED50) to  WSG84 (google maps coordinates). I'm new in these
issues.

Can anyone tell me the instructions +proj, +k, +ellps, etc. that I
have to use for conversion?

Thank you,

Marc


From geraldi.evenden at gmail.com  Fri Mar 20 07:26:49 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Fri, 20 Mar 2009 10:26:49 -0400
Subject: [Proj] Cosmetic latitudes,
	and the diacritics of Josef Krovak and others
In-Reply-To: <FAF6E56B26D2044696772EBE89B153510176609D@posty.carmenta.se>
References: <FAF6E56B26D2044696772EBE89B153510176609D@posty.carmenta.se>
Message-ID: <200903201026.50113.geraldi.evenden@gmail.com>

On Friday 20 March 2009 5:34:00 am Mikael Rittri wrote:
> Hello,
> I lump together some unrelated light-weight questions here:
>
> A) For some projections, a parameter for central latitude can be given,
> but it does not really affect the shape of the map - it just creates
> an extra offset in the northing values (in addition to the offset
> due to the FalseNorthing).
>     My question: is there an established terminology for such
> a central latitude?
>     When documenting projections, I would like to write something
> like "the central latitude can be specified but is just cosmetic",
> with a link to a glossary entry for "cosmetic central latitude".
>     But is "cosmetic" the best word?

This is a case of deja vu all over again.  ;-)

Not long ago I went through a debate with someone who wanted a "lat_0" for a 
cylindrical projection.  As commented above, I responded that y_0 would do 
the job and that lat_0 was totally unnecessary.  In this case the use of 
lat_0 was simple lazyness or the creation by someone completely ignorant of 
the basics.

Note: lat_0 in the above case had nothing to do with the lat_ts or true scale 
specification.

The only legitimate use of lat_0 is when the location of mathematical origin 
is necessary to determine the overall character of the projection such as in 
the azimuthal projections where it determines the point of tangency of the 
projection plane with the earth (when k_0=1).  I would tend to call it 
the "natural" orgin.

In the case of normal cylindrical projections the "natural origin" is *always* 
at the equator and thus lat_0 is always 0 and omitted.  If a lat_0 is present 
in the cylindrical projections, it might be called a "geographical origin 
offset" as contrasted to the the Cartesian origin offset of the false 
eastings and northings.

Much of this argument can also be carried over to lon_0.

I would tend to call it "geographical origin offset."

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From roger at opq.se  Fri Mar 20 07:50:25 2009
From: roger at opq.se (Roger Oberholtzer)
Date: Fri, 20 Mar 2009 15:50:25 +0100
Subject: [Proj] ED50 Spain Portugal to WSG 84
In-Reply-To: <e0379d960903200659n1b79e336w48c1373b553e8268@mail.gmail.com>
References: <e0379d960903200659n1b79e336w48c1373b553e8268@mail.gmail.com>
Message-ID: <1237560625.5030.57.camel@acme.pacific>

On Fri, 2009-03-20 at 14:59 +0100, Marc Marí Dell'Olmo wrote:
> Dear all,
> 
> Can anyone tell me how to convert coordinates ED50 Spain/Portugal (not
> only ED50) to  WSG84 (google maps coordinates). I'm new in these
> issues.

Perhaps something like:

 +proj=utm 
 +ellps=intl 
 +k=0.999600 
 +x_0=500000.0 
 +y_0=0.0 
 +zone=30 
 +units=m
 +towgs84=-125.098545,-76.000054,-156.198703,0.0,0.0,-1.129,8.30463103 "
 +to
 +proj=latlong
 +ellps=WGS84

I do this from the C API, so I may have a command line option missing.
But the values are what I use.

Hope this gets you started.

-- 
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden

Office: Int +46 8-615 60 20
Mobile: Int +46 70-815 1696



From jagoncal at gmail.com  Fri Mar 20 08:24:05 2009
From: jagoncal at gmail.com (=?ISO-8859-1?Q?Jose_Gon=E7alves?=)
Date: Fri, 20 Mar 2009 15:24:05 +0000
Subject: [Proj] ED50 Spain Portugal to WSG 84
In-Reply-To: <e0379d960903200659n1b79e336w48c1373b553e8268@mail.gmail.com>
References: <e0379d960903200659n1b79e336w48c1373b553e8268@mail.gmail.com>
Message-ID: <6a91fcb00903200824g5bbb6d03gee7b8e191096ad82@mail.gmail.com>

Assuming that the ED50 data are in UTM projection, you can use:

   cs2cs +proj=utm +ellps=intl +zone=30 +towgs84=-84,-107,-120 +to
+proj=latlong +datum=WGS84

Depending on the longitude the zone can also be 31 or 29 (Portugal is all
29). The datum shift parameters (+towgs84) introduce errors of a few meters.


Regards

José Gonçalves




2009/3/20 Marc Marí Dell'Olmo <marceivissa at gmail.com>

> Dear all,
>
> Can anyone tell me how to convert coordinates ED50 Spain/Portugal (not
> only ED50) to  WSG84 (google maps coordinates). I'm new in these
> issues.
>
> Can anyone tell me the instructions +proj, +k, +ellps, etc. that I
> have to use for conversion?
>
> Thank you,
>
> Marc
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090320/6438a898/attachment.html>

From Mikael.Rittri at carmenta.com  Fri Mar 20 08:52:21 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Fri, 20 Mar 2009 16:52:21 +0100
Subject: [Proj] Cosmetic latitudes,
	and the diacritics of Josef Krovak and others
In-Reply-To: <200903201026.50113.geraldi.evenden@gmail.com>
References: <FAF6E56B26D2044696772EBE89B153510176609D@posty.carmenta.se>
	<200903201026.50113.geraldi.evenden@gmail.com>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101766113@posty.carmenta.se>

Gerald,
you wrote:

> The only legitimate use of lat_0 is when the location of mathematical
> origin is necessary to determine the overall character of the projection ... 

Yes, I agree.

> In the case of normal cylindrical projections the "natural origin" is *always*
> at the equator and thus lat_0 is always 0 and omitted.

Yes, I think you are right. At least, I hope so, and I think EPSG Guidance Note 7.2
agrees with you. 

But there are other kinds of projections where the lat_0 is cosmetic,
although it is common practice to let it be non-zero anyway.

For example, lat_0 is cosmetic in 

 * Gauss-Krüger Transverse Mercator (I am not sure about Gauss-Schreiber),
 * Lambert Conformal Conic (2SP) (but not in Lambert Conformal Conic (1SP), EPSG-style).

(For LCC, I think lat_0 is cosmetic in Proj.4 with +proj=lcc, even in 
 the one-standard-parallel case, since both lat_1 and lat_2 must be given 
 even if they are equal. Right?)

In common practice, lat_0 is usually non-zero for LCC(2SP), and sometimes 
non-zero for Transverse Mercator, too.  (I am not saying this is good, 
just that many people are doing it.) 

In EPSG terminology, lat_0 for Transverse Mercator is called "Latitude of Natural Origin",
while lat_0 for Lambert Conformal Conic (2SP) is called "Latitude of False Origin". 
In Carmenta Engine, the lat_0 is always called the "CentralLatitude".

Your term "geographical origin offset" is perhaps better than "cosmetic", though. 
Thanks! 

Best Regards,
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com

-----Original Message-----
From: Gerald I. Evenden [mailto:geraldi.evenden at gmail.com] 
Sent: den 20 mars 2009 15:27
To: proj at lists.maptools.org
Cc: Mikael Rittri
Subject: Re: [Proj] Cosmetic latitudes, and the diacritics of Josef Krovak and others

On Friday 20 March 2009 5:34:00 am Mikael Rittri wrote:
> Hello,
> I lump together some unrelated light-weight questions here:
>
> A) For some projections, a parameter for central latitude can be 
> given, but it does not really affect the shape of the map - it just 
> creates an extra offset in the northing values (in addition to the 
> offset due to the FalseNorthing).
>     My question: is there an established terminology for such a 
> central latitude?
>     When documenting projections, I would like to write something like 
> "the central latitude can be specified but is just cosmetic", with a 
> link to a glossary entry for "cosmetic central latitude".
>     But is "cosmetic" the best word?

This is a case of deja vu all over again.  ;-)

Not long ago I went through a debate with someone who wanted a "lat_0" for a cylindrical projection.  As commented above, I responded that y_0 would do the job and that lat_0 was totally unnecessary.  In this case the use of lat_0 was simple lazyness or the creation by someone completely ignorant of the basics.

Note: lat_0 in the above case had nothing to do with the lat_ts or true scale specification.

The only legitimate use of lat_0 is when the location of mathematical origin is necessary to determine the overall character of the projection such as in the azimuthal projections where it determines the point of tangency of the projection plane with the earth (when k_0=1).  I would tend to call it the "natural" orgin.

In the case of normal cylindrical projections the "natural origin" is *always* at the equator and thus lat_0 is always 0 and omitted.  If a lat_0 is present in the cylindrical projections, it might be called a "geographical origin offset" as contrasted to the the Cartesian origin offset of the false eastings and northings.

Much of this argument can also be carried over to lon_0.

I would tend to call it "geographical origin offset."

--
The whole religious complexion of the modern world is due to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From ovv at hetnet.nl  Fri Mar 20 09:31:18 2009
From: ovv at hetnet.nl (OvV_HN)
Date: Fri, 20 Mar 2009 17:31:18 +0100
Subject: [Proj] Cosmetic latitudes,
	and the diacritics of Josef Krovak and others
In-Reply-To: <FAF6E56B26D2044696772EBE89B153510176609D@posty.carmenta.se>
References: <FAF6E56B26D2044696772EBE89B153510176609D@posty.carmenta.se>
Message-ID: <27A8BF427F924A96B8A00D0789E612EA@PCHP>


----- Original Message ----- 
From: "Mikael Rittri" <Mikael.Rittri at carmenta.com>
To: <proj at lists.maptools.org>
Sent: Friday, March 20, 2009 10:34 AM
Subject: [Proj] Cosmetic latitudes,and the diacritics of Josef Krovak and 
others




> B) What are the correct diacritical marks for Krovak? (As in Josef
> Krovak,
> inventor of the Krovak projection for Czechoslovakia.)

>  2) a hacek (small v) above the "r", no slash through the "o", but
> acute accent on the "a".

This is the only correct spelling. Can be checked by consulting a couple of 
serious Czech resources (web sites).
Pictures of him:
http://krovak.webpark.cz/obr/Krovak_1.htm
http://krovak.webpark.cz/obr/Krovak_2.htm

Reliable source:
Prof. Ing. Bohuslav Veverka, DrSc.
Czech Technical University, Department of Mapping and Cartography
http://krovak.webpark.cz/



Oscar van Vlijmen






From jhollingsworth at houston.oilfield.slb.com  Fri Mar 20 09:56:53 2009
From: jhollingsworth at houston.oilfield.slb.com (Jay Hollingsworth)
Date: Fri, 20 Mar 2009 11:56:53 -0500
Subject: [Proj] Geodesic distances away from the ellipsoid
In-Reply-To: <mailman.7.1237395602.27577.proj@lists.maptools.org>
References: <mailman.7.1237395602.27577.proj@lists.maptools.org>
Message-ID: <0KGT00AEIDROJ9A0@gb0135mbx01.mail.slb.com>

At the risk of asking a dumb question, do any of the geodesic 
algorithms allow calculation of the geodesic distance if the path is 
not on the ellipsoid? Like in an airplane or satellite whose path 
could be assumed to be a constant height above the ellipsoid?

Or do you have to define an ellipsoid matching the satellite orbit 
and use the normal equations on that ellipsoid? If so, how would you 
define an ellipsoid for a long airplane flight?

I've poked around and nothing has jumped out at me. I assume 
aero-engineers guys figured this out long ago....


Jay Hollingsworth

Seabed Portfolio Manager and
Principal Data Architect
Schlumberger Information Solutions
phone: 713 513 8854 fax: 713 513 2093



From geraldi.evenden at gmail.com  Fri Mar 20 10:10:46 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Fri, 20 Mar 2009 13:10:46 -0400
Subject: [Proj] Cosmetic latitudes,
	and the diacritics of Josef Krovak and others
In-Reply-To: <27A8BF427F924A96B8A00D0789E612EA@PCHP>
References: <FAF6E56B26D2044696772EBE89B153510176609D@posty.carmenta.se>
	<27A8BF427F924A96B8A00D0789E612EA@PCHP>
Message-ID: <200903201310.46289.geraldi.evenden@gmail.com>

On Friday 20 March 2009 12:31:18 pm OvV_HN wrote:
> ----- Original Message -----
> From: "Mikael Rittri" <Mikael.Rittri at carmenta.com>
> To: <proj at lists.maptools.org>
> Sent: Friday, March 20, 2009 10:34 AM
> Subject: [Proj] Cosmetic latitudes,and the diacritics of Josef Krovak and
> others
>
> > B) What are the correct diacritical marks for Krovak? (As in Josef
> > Krovak,
> > inventor of the Krovak projection for Czechoslovakia.)
> >
> >  2) a hacek (small v) above the "r", no slash through the "o", but
> > acute accent on the "a".
>
> This is the only correct spelling. Can be checked by consulting a couple of
> serious Czech resources (web sites).
> Pictures of him:
> http://krovak.webpark.cz/obr/Krovak_1.htm
> http://krovak.webpark.cz/obr/Krovak_2.htm

From the libproj4 LaTeX manual source, use:

\def\KRO{K\v{r}ov\'{a}k }

At least I got something right.  ;-)

Been that way for long time so I could not remember where my source was but it 
seems correct.

For the other anglicized name:

\def\PUT{Putni\d n\u s}

> Reliable source:
> Prof. Ing. Bohuslav Veverka, DrSc.
> Czech Technical University, Department of Mapping and Cartography
> http://krovak.webpark.cz/
>
>
>
> Oscar van Vlijmen
>
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Fri Mar 20 10:24:43 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Fri, 20 Mar 2009 13:24:43 -0400
Subject: [Proj] Geodesic distances away from the ellipsoid
In-Reply-To: <0KGT00AEIDROJ9A0@gb0135mbx01.mail.slb.com>
References: <mailman.7.1237395602.27577.proj@lists.maptools.org>
	<0KGT00AEIDROJ9A0@gb0135mbx01.mail.slb.com>
Message-ID: <200903201324.43817.geraldi.evenden@gmail.com>

On Friday 20 March 2009 12:56:53 pm Jay Hollingsworth wrote:
> At the risk of asking a dumb question, do any of the geodesic
> algorithms allow calculation of the geodesic distance if the path is
> not on the ellipsoid? Like in an airplane or satellite whose path
> could be assumed to be a constant height above the ellipsoid?
>
> Or do you have to define an ellipsoid matching the satellite orbit
> and use the normal equations on that ellipsoid? If so, how would you
> define an ellipsoid for a long airplane flight?
>
> I've poked around and nothing has jumped out at me. I assume
> aero-engineers guys figured this out long ago....

I think the solution is fairly simple: just scale you path by the ratio:

R = approximate radius of the Earth over flights path
h = flight height

geodesic length * (R+h)/R

There is also the 3D geodesic at the NGS site which might apply and give a 
better answer.  But I think the above would be good enough for most purposes.  
Try both and see what happens.

PS: I did not convert the NGS 3D because it was hard-wired for WGS84 and the 
description was confusing enough that I decided against bothering for the 
time being.  Also, I could not get a mental image of what was happening when 
there was a difference of altitude at the two end points.

> Jay Hollingsworth
>
> Seabed Portfolio Manager and
> Principal Data Architect
> Schlumberger Information Solutions
> phone: 713 513 8854 fax: 713 513 2093
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From karl at kls2.com  Fri Mar 20 10:30:45 2009
From: karl at kls2.com (Karl Swartz)
Date: Fri, 20 Mar 2009 10:30:45 -0700
Subject: [Proj] Geodesic distances away from the ellipsoid
In-Reply-To: <0KGT00AEIDROJ9A0@gb0135mbx01.mail.slb.com>
References: <mailman.7.1237395602.27577.proj@lists.maptools.org>
	<0KGT00AEIDROJ9A0@gb0135mbx01.mail.slb.com>
Message-ID: <20090320173045.GD69967@orion2.kls2.com>

> At the risk of asking a dumb question, do any of the geodesic 
> algorithms allow calculation of the geodesic distance if the path is 
> not on the ellipsoid? Like in an airplane or satellite whose path 
> could be assumed to be a constant height above the ellipsoid?

It doesn't answer your real question but for airlines the altitude is
not factored in, at least not anywhere that I've seen.  The geodesic
distance is just a theoretical value since the actual path flown is
often quite different due to winds and other factors.  Time aloft is
what drives fuel burn, pilot legalities, etc., regardless of the
distance flown.  In addition, for topics like frequent flier miles,
it wouldn't go over well if my SFO-LHR flight accrued more miles than
yours because we flew at a higher altitude.

Satellites aren't my area but for most missions I'd guess they just use
the orbital ellipse, defined by apogee and perigee, without regard to
the terrain underneath.  Some missions might notice the gravitational
variation but I doubt most would.  The question goes away for satellites
in geosynchronous orbit, of course, since they stay over the equator --
one expect spot on the equator.

 -- Karl


From cjmce at lsu.edu  Fri Mar 20 11:03:07 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 20 Mar 2009 13:03:07 -0500
Subject: [Proj] Geodesic distances away from the ellipsoid
References: <mailman.7.1237395602.27577.proj@lists.maptools.org>
	<0KGT00AEIDROJ9A0@gb0135mbx01.mail.slb.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2647@email002.lsu.edu>

Jay,
 
There is an old ESSA or NOAA publication that directly addressed "The Great Ellipse" and also included all the math for hyperbolic lattice computations as well as for Rho-Rho systems.  I don't remember the exact title, but it was mainly addressed to the Hydrographic Surveyor.  My guess is that's exactly what you are looking for.  It's somewhere in my office library on campus, but I won't get there until Monday.  Call me and remind me after 10:00 AM and I'll look it up, I think I know the bookcase it's in.  I'll bet John Stigant and Noel have a copy, too.
 
Cliff
 
Clifford J. Mugnier, C.P., C.M.S.
Past National Director (2006-2008),
Photogrammetric Applications Division
American Society for Photogrammetry and Remote Sensing 
and 
Chief of Geodesy,
CENTER FOR GEOINFORMATICS 
Department of Civil Engineering 
Patrick F. Taylor Hall 3223A
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Member Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group
======================================================
http://www.asprs.org/resources/GRIDS/
======================================================
 

________________________________

From: proj-bounces at lists.maptools.org on behalf of Jay Hollingsworth
Sent: Fri 20-Mar-09 11:56
To: proj at lists.maptools.org
Subject: [Proj] Geodesic distances away from the ellipsoid



At the risk of asking a dumb question, do any of the geodesic
algorithms allow calculation of the geodesic distance if the path is
not on the ellipsoid? Like in an airplane or satellite whose path
could be assumed to be a constant height above the ellipsoid?

Or do you have to define an ellipsoid matching the satellite orbit
and use the normal equations on that ellipsoid? If so, how would you
define an ellipsoid for a long airplane flight?

I've poked around and nothing has jumped out at me. I assume
aero-engineers guys figured this out long ago....


Jay Hollingsworth

Seabed Portfolio Manager and
Principal Data Architect
Schlumberger Information Solutions
phone: 713 513 8854 fax: 713 513 2093

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090320/91641657/attachment.html>

From ovv at hetnet.nl  Fri Mar 20 11:49:55 2009
From: ovv at hetnet.nl (OvV_HN)
Date: Fri, 20 Mar 2009 19:49:55 +0100
Subject: [Proj] Geodesic distances away from the ellipsoid
In-Reply-To: <200903201324.43817.geraldi.evenden@gmail.com>
References: <mailman.7.1237395602.27577.proj@lists.maptools.org><0KGT00AEIDROJ9A0@gb0135mbx01.mail.slb.com>
	<200903201324.43817.geraldi.evenden@gmail.com>
Message-ID: <E68DBA205F64461DAB8C0A0A867D169D@PCHP>


----- Original Message ----- 
From: "Gerald I. Evenden" <geraldi.evenden at gmail.com>
To: <proj at lists.maptools.org>
Sent: Friday, March 20, 2009 6:24 PM
Subject: Re: [Proj] Geodesic distances away from the ellipsoid



> There is also the 3D geodesic at the NGS site which might apply and give a
> better answer.  But I think the above would be good enough for most 
> purposes.
> Try both and see what happens.
>
> PS: I did not convert the NGS 3D because it was hard-wired for WGS84 and 
> the
> description was confusing enough that I decided against bothering for the
> time being.  Also, I could not get a mental image of what was happening 
> when
> there was a difference of altitude at the two end points.

The last time I looked at the code the geodesic was calculated for an 
altitude of 0 meters above the ellipsoid, all the way. I forgot where the 3D 
information was used for, probably the chord distance or the north-east-up 
coordinate difference.

Oscar van Vlijmen







From Kieran.Ames at us.ngrid.com  Fri Mar 20 11:46:13 2009
From: Kieran.Ames at us.ngrid.com (Ames, Kieran J.)
Date: Fri, 20 Mar 2009 14:46:13 -0400
Subject: [Proj] cs2cs
Message-ID: <2AE2A04AD8F40244AFEB71A07EECF130659DE0@NYHCBMSG41.NA.NGRID.NET>

Can I please ask the list for some guidance?
 
In an attempt to convert some data from projected to lat/lon, I'm
attempting to use cs2cs.
 
The data:
My coordinates of 2174727 164482 are based on NAD27 3104 (Long Island).
My lat/lon of -73.370096 40.675382 is based on a geocoding calculation
from a Sagent geocoding engine.
 
I'm attempting to use cs2cs to calculate lat/lon values for a rather
large file.
 
In testing, I use the command:
echo 2174727 164482 nad27:3104  |c:\ms4w\proj\bin\cs2cs    -E  -f %3.6f
+init=nad27:3104  +to +proj=latlong +datum=NAD83
 
This returns coordinates of -55.478096 40.211109... somewhere out in the
Atlantic Ocean. 
 
I've tried a brute force approach against all the NAD27, NAD83 and EPSG
definitions but cannot come up with anything close to the lat/lon I
expect.
 
I've been told that the coordinates I'm using are actual and not
"padded" for any reason.
 
If anyone has any insight as to how I could resolve this issue, I'd be
most appreciative.
 
Thank you
 
Kieran Ames



********************************************************************************
This e-mail and any files transmitted with it, are confidential to National Grid and are intended solely for the use of the individual or entity to whom they are addressed.  If you have received this e-mail in error, please reply to this message and let the sender know.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090320/527d94bc/attachment.html>

From EMiller at dfg.ca.gov  Fri Mar 20 13:51:36 2009
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Fri, 20 Mar 2009 13:51:36 -0700
Subject: [Proj] cs2cs
In-Reply-To: <2AE2A04AD8F40244AFEB71A07EECF130659DE0@NYHCBMSG41.NA.NGRID.NET>
References: <2AE2A04AD8F40244AFEB71A07EECF130659DE0@NYHCBMSG41.NA.NGRID.NET>
Message-ID: <49C39F68.95FD.00E4.0@dfg.ca.gov>

I believe the problem is that the "nad27" file doesn't specify the critical parameter "+unit=us-ft".  When added, I get almost the same result as what you're expecting.

I have little faith in any of those "init" files and never use them...
-- 

Eric G. Miller
Staff Programmer
CA Dept. of Fish & Game


>>> On 3/20/2009 at 11:46 AM, "Ames, Kieran J." <Kieran.Ames at us.ngrid.com> wrote:
> Can I please ask the list for some guidance?
>  
> In an attempt to convert some data from projected to lat/lon, I'm
> attempting to use cs2cs.
>  
> The data:
> My coordinates of 2174727 164482 are based on NAD27 3104 (Long Island).
> My lat/lon of -73.370096 40.675382 is based on a geocoding calculation
> from a Sagent geocoding engine.
>  
> I'm attempting to use cs2cs to calculate lat/lon values for a rather
> large file.
>  
> In testing, I use the command:
> echo 2174727 164482 nad27:3104  |c:\ms4w\proj\bin\cs2cs    -E  -f %3.6f
> +init=nad27:3104  +to +proj=latlong +datum=NAD83
>  
> This returns coordinates of -55.478096 40.211109... somewhere out in the
> Atlantic Ocean. 
>  
> I've tried a brute force approach against all the NAD27, NAD83 and EPSG
> definitions but cannot come up with anything close to the lat/lon I
> expect.
>  
> I've been told that the coordinates I'm using are actual and not
> "padded" for any reason.
>  
> If anyone has any insight as to how I could resolve this issue, I'd be
> most appreciative.
>  
> Thank you
>  
> Kieran Ames
> 
> 
> 




From geraldi.evenden at gmail.com  Fri Mar 20 14:49:26 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Fri, 20 Mar 2009 17:49:26 -0400
Subject: [Proj] cs2cs
In-Reply-To: <49C39F68.95FD.00E4.0@dfg.ca.gov>
References: <2AE2A04AD8F40244AFEB71A07EECF130659DE0@NYHCBMSG41.NA.NGRID.NET>
	<49C39F68.95FD.00E4.0@dfg.ca.gov>
Message-ID: <200903201749.26634.geraldi.evenden@gmail.com>

On Friday 20 March 2009 4:51:36 pm Eric Miller wrote:
> I believe the problem is that the "nad27" file doesn't specify the critical
> parameter "+unit=us-ft".  When added, I get almost the same result as what
> you're expecting.
>
> I have little faith in any of those "init" files and never use them...

Amen.

Blame them on me as the init file was my idea a long time ago.

I finally saw the light and init disappeared from later versions of proj 
library.

The system really needs a honest Mysql or Postgres system external to the proj 
library.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From strebe at aol.com  Fri Mar 20 18:26:56 2009
From: strebe at aol.com (strebe)
Date: Fri, 20 Mar 2009 18:26:56 -0700
Subject: [Proj] Cosmetic latitudes...
In-Reply-To: <FAF6E56B26D2044696772EBE89B153510176609D@posty.carmenta.se>
Message-ID: <C6AEAB90.6C8C.439A.8F4B.1358C4F96B80@aol.com>


On Mar 20, 2009, at 2:34:00 AM, "Mikael Rittri" <Mikael.Rittri at carmenta.com> wrote:
A) For some projections, a parameter for central latitude can be given,
but it does not really affect the shape of the map - it just creates
an extra offset in the northing values (in addition to the offset 
due to the FalseNorthing).  
    My question: is there an established terminology for such 
a central latitude?  
    When documenting projections, I would like to write something 
like "the central latitude can be specified but is just cosmetic", 
with a link to a glossary entry for "cosmetic central latitude".  
    But is "cosmetic" the best word? 

Being merely a coordinate translation, most of the small-scale map projection literature ignores the "central latitude". Snyder includes it explicitly in his formulations, referring to it as the "latitude of origin" and denoting it as φ₀. See, for example:

Snyder, J.P. 1987. Map Projections — A Working Manual, p. 100. (US Geological Survey Professional Paper 1395). US Government Printing Office, Washington D.C.

Deetz & Adams (Elements of Map Projection) includes what is effectively the radius of the latitude of origin in their formulations of conic projections, but do not attempt to name it.

"Latitude of origin" seems sufficient and unambiguous. The central meridian and latitude of origin project to the cartesian origin. Rather than using the term "cosmetic" I would note that it is just a simple translation that does not bear on the geometry of the projection, and thenceforth label it the "latitude of origin".

Regards,
— daan Strebe

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090320/acec0046/attachment.html>

From support.mn at elisanet.fi  Sat Mar 21 06:35:25 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Sat, 21 Mar 2009 15:35:25 +0200 (EET)
Subject: [Proj] Geodesic distances away from the ellipsoid
Message-ID: <23635552.1149761237642526769.JavaMail.support.mn@elisanet.fi>

Hello,

I think one method is to convert all coordinates to Cartesian
using Helmert's equations and forget the earth shape, since you
are more or less in the free space now... where the satellites rule.
The earth reference ellipsoid just adds complexity there.

Now you have vectors (x, y and z) and can calculate anything
using simple vector arithmetic.

A "laser line" distance is now very easy to calculate:

dist=sqrt((x2-x1)^2 + (y2-y1)^2 + (z2-z1)^2)

if your path is a set of 3D-curves, just calculate the perimeters
and add them together. This is more efficient especially for
space travellers (?)

regards: Janne.

----------------------------------------------------------

Jay Hollingsworth [jhollingsworth at houston.oilfield.slb.com] kirjoitti: 
> At the risk of asking a dumb question, do any of the geodesic 
> algorithms allow calculation of the geodesic distance if the path is 
> not on the ellipsoid? Like in an airplane or satellite whose path 
> could be assumed to be a constant height above the ellipsoid?
> 
> Or do you have to define an ellipsoid matching the satellite orbit 
> and use the normal equations on that ellipsoid? If so, how would you 
> define an ellipsoid for a long airplane flight?
> 
> I've poked around and nothing has jumped out at me. I assume 
> aero-engineers guys figured this out long ago....
> 
> 
> Jay Hollingsworth
> 
> Seabed Portfolio Manager and
> Principal Data Architect
> Schlumberger Information Solutions
> phone: 713 513 8854 fax: 713 513 2093
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 



From Mikael.Rittri at carmenta.com  Mon Mar 23 05:08:11 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 23 Mar 2009 13:08:11 +0100
Subject: [Proj] Cosmetic latitudes,
	and the diacritics of Josef Krovak and others
In-Reply-To: <C6AEAB90.6C8C.439A.8F4B.1358C4F96B80@aol.com>
References: <FAF6E56B26D2044696772EBE89B153510176609D@posty.carmenta.se>
	<C6AEAB90.6C8C.439A.8F4B.1358C4F96B80@aol.com>
Message-ID: <FAF6E56B26D2044696772EBE89B15351017661BA@posty.carmenta.se>

Gerald wrote:

>    \def\KRO{K\v{r}ov\'{a}k }

Oscar wrote: 

> This is the only correct spelling. - - - 

Thanks, Oscar and Gerald. (Diacritical marks always worry me.) Nice portrait links, too. 


daan wrote (about a central latitude that doesn't affect the shape of the projection): 

> Snyder includes it explicitly in his formulations, referring 
> to it as the "latitude of origin" and denoting it as φ₀.

Yes, now that you mention it. I have never noticed it before, but Snyder 
uses phi_0 when the parameter does not affect the projection shape, but 
otherwise he uses phi_1 (which he often calls the "latitude of the center of 
the projection and origin"), or else phi_1 and phi_2 for two standard parallels.  
This convention is, in fact, stated in his list of symbols on pages viii - ix, 
which I hadn't read carefully enough before.  

"Latitude of origin" sounds fine, but I am not too fond of using 
many different names for what is called lat_0 in Proj.4.  The 
EPSG Guidance Note 7.2 has gone too far in this direction, I think. 
I like "central latitude" as the only name.

To be honest, I was wondering if I ought to implement support for a non-zero 
lat_0 for normal cylindrical projections, just in case others were doing it.

But Gerald wrote:
> In this case [normal cylindrical projections] the use of lat_0 was simple 
> lazyness or the creation by someone completely ignorant of the basics.

which reminded me of an older post by Melita Kennedy on the MetaCRS list: 
> I have had requests to add a latitude of origin parameter to 
> the ESRI Mercator implementation. So far we haven't done it, as 
> you can get the same results through the false northing parameter. 
  ( http://lists.osgeo.org/pipermail/metacrs/2008-November/000178.html )

So, all right. I don't want to be the first to introduce a completely 
useless feature.  (Fourth or fifth would be okay :-> ) 
I guess I should just describe the situation in words for each projection
where it occurs.  There can't be many, without the normal cylindrical ones. 
 
Thanks for all advice,
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com 

________________________________

From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of strebe
Sent: den 21 mars 2009 02:27
To: PROJ.4 and general Projections Discussions; proj at lists.maptools.org
Subject: Re: [Proj] Cosmetic latitudes...

On Mar 20, 2009, at 2:34:00 AM, "Mikael Rittri" <Mikael.Rittri at carmenta.com> wrote:


>		A) For some projections, a parameter for central latitude can be given,
>	but it does not really affect the shape of the map - it just creates
>	an extra offset in the northing values (in addition to the offset 
>	due to the FalseNorthing).  
>	    My question: is there an established terminology for such 
>	a central latitude?  
>	    When documenting projections, I would like to write something 
>	like "the central latitude can be specified but is just cosmetic", 
>	with a link to a glossary entry for "cosmetic central latitude".  
>	    But is "cosmetic" the best word? 
	

Being merely a coordinate translation, most of the small-scale map projection literature ignores the "central latitude". Snyder includes it explicitly in his formulations, referring to it as the "latitude of origin" and denoting it as φ₀. See, for example:


Snyder, J.P. 1987. Map Projections — A Working Manual, p. 100. (US Geological Survey Professional Paper 1395). US Government Printing Office, Washington D.C.

Deetz & Adams (Elements of Map Projection) includes what is effectively the radius of the latitude of origin in their formulations of conic projections, but do not attempt to name it.

"Latitude of origin" seems sufficient and unambiguous. The central meridian and latitude of origin project to the cartesian origin. Rather than using the term "cosmetic" I would note that it is just a simple translation that does not bear on the geometry of the projection, and thenceforth label it the "latitude of origin". 

Regards,
— daan Strebe

From strebe at aol.com  Mon Mar 23 10:59:21 2009
From: strebe at aol.com (strebe at aol.com)
Date: Mon, 23 Mar 2009 13:59:21 -0400
Subject: [Proj] Cosmetic latitudes,
 and the diacritics of Josef Krovak and others
In-Reply-To: <FAF6E56B26D2044696772EBE89B15351017661BA@posty.carmenta.se>
References: <FAF6E56B26D2044696772EBE89B153510176609D@posty.carmenta.se><C6AEAB90.6C8C.439A.8F4B.1358C4F96B80@aol.com>
	<FAF6E56B26D2044696772EBE89B15351017661BA@posty.carmenta.se>
Message-ID: <8CB79F83A725D5B-11F8-61B@WEBMAIL-MY08.sysops.aol.com>


 



daan wrote (about a central latitude that doesn't affect the shape of the 
projection): 

> Snyder includes it explicitly in his formulations, referring 
> to it as the "latitude of origin" and denoting it as φ₀.

Yes, now that you mention it. I have never noticed it before, but Snyder 
uses phi_0 when the parameter does not affect the projection shape, but 
otherwise he uses phi_1 (which he often calls the "latitude of the center of 
the projection and origin"), or else phi_1 and phi_2 for two standard parallels.  

This convention is, in fact, stated in his list of symbols on pages viii - ix, 
which I hadn't read carefully enough before.  

"Latitude of origin" sounds fine, but I am not too fond of using 
many different names for what is called lat_0 in Proj.4.  The 
EPSG Guidance Note 7.2 has gone too far in this direction, I think. 
I like "central latitude" as the only name.



 


 

Please note also that "Latitude of origin" is the  name in the Well Known Text format specification.
E.g.,

PARAMETER["latitude_of_origin",49],


Regards,
— daan Strebe


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090323/759ce1a4/attachment.html>

From Mikael.Rittri at carmenta.com  Tue Mar 24 02:19:09 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Tue, 24 Mar 2009 10:19:09 +0100
Subject: [Proj] Cosmetic latitudes...
In-Reply-To: <8CB79F83A725D5B-11F8-61B@WEBMAIL-MY08.sysops.aol.com>
References: <FAF6E56B26D2044696772EBE89B153510176609D@posty.carmenta.se><C6AEAB90.6C8C.439A.8F4B.1358C4F96B80@aol.com><FAF6E56B26D2044696772EBE89B15351017661BA@posty.carmenta.se>
	<8CB79F83A725D5B-11F8-61B@WEBMAIL-MY08.sysops.aol.com>
Message-ID: <FAF6E56B26D2044696772EBE89B15351017662A3@posty.carmenta.se>

> Mikael wrote:
> 
> >   [-- text deleted --]
> >
> >	"Latitude of origin" sounds fine, but I am not too fond of using

> >	many different names for what is called lat_0 in Proj.4.  The 	
> > 	EPSG Guidance Note 7.2 has gone too far in this direction, I
think. 	
> > 	I like "central latitude" as the only name.
> 	
> Please note also that "Latitude of origin" is the  name in the Well
Known Text 
> format specification.
> E.g.,
> 
> PARAMETER["latitude_of_origin",49],
> 
> Regards,
> - daan Strebe

For some projections, yes. Perhaps for the majority. But for some
projections,
it is "latitude_of_center".
And some projections have "central_meridian", while others have
"longitude_of_center" instead.

I have tried to figure out the reasons why, by looking at the OGC WKT
names 
at http://www.remotesensing.org/geotiff/proj_list , and first I thought
that
"central_meridian" is used if and only if the central meridian appears
as a straight vertical line.  When the meridian is curved, it seems that
"longitude_of_center" is used instead, and the "center" suffix spills
over 
and renames "latitude_of_origin" to "latitude_of_center", even when
there 
is no particular reason that it should spill over. 
   However, things aren't that simple.  The central meridian of Krovak
appears 
as a straight vertical line, but it is called "longitude_of_center"
anyway.  
And the central meridian of the New Zealand Map Grid is called
"central_meridian",
even though it appears as a curved line.
   I just can't see the logic. And aren't there plenty of WKT flavours
with different 
parameter names? 
   If one prefers a single name for all versions of lat_0, then
"latitude_of_origin"
is not a good name, since it would be misleading for the Hotine Oblique
Mercator 
(the origin is near the equator, not on the central latitude), and for
the Krovak 
(the origin is at the oblique cone apex near Finland, not on the central
latitude).  

Regards,
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com


From strebe at aol.com  Tue Mar 24 18:40:52 2009
From: strebe at aol.com (strebe)
Date: Tue, 24 Mar 2009 18:40:52 -0700
Subject: [Proj] Cosmetic latitudes...
In-Reply-To: <FAF6E56B26D2044696772EBE89B15351017662A3@posty.carmenta.se>
Message-ID: <75C00C61.612D.411F.8573.132A2449605A@aol.com>


On Mar 24, 2009, at 2:19:09 AM, "Mikael Rittri" <Mikael.Rittri at carmenta.com> wrote:  

>I just can't see the logic.

It is a mess, isn't it?

>And aren't there plenty of WKT flavours with different parameter names?

Yes, presumably any projection description is technically free to name its parameters whatever it likes.
>If one prefers a single name for all versions of lat_0, then "latitude_of_origin"
>is not a good name, since it would be misleading for the Hotine Oblique Mercator 
>(the origin is near the equator, not on the central latitude), and for the Krovak 
>(the origin is at the oblique cone apex near Finland, not on the central latitude).  
If the latitude of origin and the central meridian do not, in fact, project to the Cartesian origin, then the term really ought not apply. It is unfortunate that Snyder has used the same symbology (Φ₀) to denote the latitude of the map center in the Hotine as he has elsewhere to denote the latitude of origin. But that is a conflation of symbology, not terminology. His annotations for that projection call Φ₀ the latitude at the center of the map. I can't speak about the Krovac, since I have never studied it.

"Latitude of center" seems even more problematic for the same reason: unless the projection is vertically symmetrical, the "latitude of center" generally is not at the center of the projection. There are two different principles at play here: a latitude of origin and a latitude of center.. They should be distinguished by terminology. It is unfortunate that we must live with legacy conflations and confusions of terminology and symbology, but I do not think the situation would be helped by simply adopting a single term for distinct things.

Hence, if it is the latitude of the projection's  "center", then should we not call it the latitude of center (or central latitude)? (In point of fact, since Hotine is infinite in extent there is no mathematical "center", but at least symmetry allows a reasonable choice for a center..) If it is the latitude at the origin, then should we not call it the latitude of origin?

Regards,
— daan Strebe


On Mar 24, 2009, at 2:19:09 AM, "Mikael Rittri" <Mikael.Rittri at carmenta.com> wrote:
> Mikael wrote:
> 
> >   [-- text deleted --]
> >
> > "Latitude of origin" sounds fine, but I am not too fond of using

> > many different names for what is called lat_0 in Proj.4.  The   
> >     EPSG Guidance Note 7.2 has gone too far in this direction, I
think.  
> >     I like "central latitude" as the only name.
>   
> Please note also that "Latitude of origin" is the  name in the Well
Known Text 
> format specification.
> E.g.,
> 
> PARAMETER["latitude_of_origin",49],
> 
> Regards,
> - daan Strebe

For some projections, yes. Perhaps for the majority. But for some
projections,
it is "latitude_of_center".
And some projections have "central_meridian", while others have
"longitude_of_center" instead.

I have tried to figure out the reasons why, by looking at the OGC WKT
names 
at http://www.remotesensing.org/geotiff/proj_list , and first I thought
that
"central_meridian" is used if and only if the central meridian appears
as a straight vertical line.  When the meridian is curved, it seems that
"longitude_of_center" is used instead, and the "center" suffix spills
over 
and renames "latitude_of_origin" to "latitude_of_center", even when
there 
is no particular reason that it should spill over. 
   However, things aren't that simple.  The central meridian of Krovak
appears 
as a straight vertical line, but it is called "longitude_of_center"
anyway.  
And the central meridian of the New Zealand Map Grid is called
"central_meridian",
even though it appears as a curved line.
   I just can't see the logic. And aren't there plenty of WKT flavours
with different 
parameter names? 
   If one prefers a single name for all versions of lat_0, then
"latitude_of_origin"
is not a good name, since it would be misleading for the Hotine Oblique
Mercator 
(the origin is near the equator, not on the central latitude), and for
the Krovak 
(the origin is at the oblique cone apex near Finland, not on the central
latitude).  

Regards,
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090324/f07f1f68/attachment.html>

From Mikael.Rittri at carmenta.com  Wed Mar 25 01:55:52 2009
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Wed, 25 Mar 2009 09:55:52 +0100
Subject: [Proj] Cosmetic latitudes...
In-Reply-To: <75C00C61.612D.411F.8573.132A2449605A@aol.com>
References: <FAF6E56B26D2044696772EBE89B15351017662A3@posty.carmenta.se>
	<75C00C61.612D.411F.8573.132A2449605A@aol.com>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101766354@posty.carmenta.se>

daan wrote:
 
> "Latitude of center" seems even more problematic for the same reason:
> unless the projection is vertically symmetrical, the "latitude of center" 
> generally is not at the center of the projection. 
 
That's true.  If nothing else, the "latitude of center" can be far 
outside the area of interest.  (For example, the traditional 
Swedish Grid is based on a Transverse Mercator with origin 
at the equator, far from Sweden.  I admit that "center" is not a 
very good term for this point. I could argue that this projection 
in theory extends to Antarctica, but on the other hand its associated
datum RT90 is not defined outside Sweden.) 
 
> Hence, if it is the latitude of the projection's  "center", then should we not call
> it the latitude of center (or central latitude)? (In point of fact, since Hotine is 
> infinite in extent there is no mathematical "center", but at least symmetry allows
> a reasonable choice for a center.) If it is the latitude at the origin, then should
> we not call it the latitude of origin?
 
Well, that makes sense.  It could be both, of course, but I suppose 
you prefer the term "latitude of origin" in that case.  It should be easy
to determine whether a point projects to the Cartesian origin.  It seems 
harder to define "center" in a formal way, so we could resort to the 
"center" term only when necessary.  If so, I  know only two or three projections
where "center" would be necessary: Krovak, Hotine Oblique Mercator (with
origin at the natural origin near the equator), and possibly EPSG's 
Polar Stereographic Variant C, depending on which parameters 
that are used to define it.  Do you know any more examples? 
 
Disclaimer: these are not official opinions of Carmenta AB. But I can work on it. 

--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com 

________________________________

From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of strebe
Sent: den 25 mars 2009 02:41
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Cosmetic latitudes...



On Mar 24, 2009, at 2:19:09 AM, "Mikael Rittri" <Mikael.Rittri at carmenta.com> wrote:  


>I just can't see the logic.


It is a mess, isn't it?


>And aren't there plenty of WKT flavours with different parameter names?


Yes, presumably any projection description is technically free to name its parameters whatever it likes.
>If one prefers a single name for all versions of lat_0, then "latitude_of_origin"
>is not a good name, since it would be misleading for the Hotine Oblique Mercator 
>(the origin is near the equator, not on the central latitude), and for the Krovak 
>(the origin is at the oblique cone apex near Finland, not on the central latitude).  

If the latitude of origin and the central meridian do not, in fact, project to the Cartesian origin, then the term really ought not apply. It is unfortunate that Snyder has used the same symbology (Φ₀) to denote the latitude of the map center in the Hotine as he has elsewhere to denote the latitude of origin. But that is a conflation of symbology, not terminology. His annotations for that projection call Φ₀ the latitude at the center of the map. I can't speak about the Krovac, since I have never studied it.

"Latitude of center" seems even more problematic for the same reason: unless the projection is vertically symmetrical, the "latitude of center" generally is not at the center of the projection. There are two different principles at play here: a latitude of origin and a latitude of center. They should be distinguished by terminology. It is unfortunate that we must live with legacy conflations and confusions of terminology and symbology, but I do not think the situation would be helped by simply adopting a single term for distinct things.

Hence, if it is the latitude of the projection's  "center", then should we not call it the latitude of center (or central latitude)? (In point of fact, since Hotine is infinite in extent there is no mathematical "center", but at least symmetry allows a reasonable choice for a center.) If it is the latitude at the origin, then should we not call it the latitude of origin?


Regards,
— daan Strebe


On Mar 24, 2009, at 2:19:09 AM, "Mikael Rittri" <Mikael.Rittri at carmenta.com> wrote:


	
	> Mikael wrote:
	> 
	> >   [-- text deleted --]
	> >
	> > "Latitude of origin" sounds fine, but I am not too fond of using
	
	> > many different names for what is called lat_0 in Proj.4.  The   
	> >     EPSG Guidance Note 7.2 has gone too far in this direction, I
	think.  
	> >     I like "central latitude" as the only name.
	>   
	> Please note also that "Latitude of origin" is the  name in the Well
	Known Text 
	> format specification.
	> E.g.,
	> 
	> PARAMETER["latitude_of_origin",49],
	> 
	> Regards,
	> - daan Strebe
	
	For some projections, yes. Perhaps for the majority. But for some
	projections,
	it is "latitude_of_center".
	And some projections have "central_meridian", while others have
	"longitude_of_center" instead.
	
	I have tried to figure out the reasons why, by looking at the OGC WKT
	names 
	at http://www.remotesensing.org/geotiff/proj_list , and first I thought
	that
	"central_meridian" is used if and only if the central meridian appears
	as a straight vertical line.  When the meridian is curved, it seems that
	"longitude_of_center" is used instead, and the "center" suffix spills
	over 
	and renames "latitude_of_origin" to "latitude_of_center", even when
	there 
	is no particular reason that it should spill over. 
	   However, things aren't that simple.  The central meridian of Krovak
	appears 
	as a straight vertical line, but it is called "longitude_of_center"
	anyway.  
	And the central meridian of the New Zealand Map Grid is called
	"central_meridian",
	even though it appears as a curved line.
	   I just can't see the logic. And aren't there plenty of WKT flavours
	with different 
	parameter names? 
	   If one prefers a single name for all versions of lat_0, then
	"latitude_of_origin"
	is not a good name, since it would be misleading for the Hotine Oblique
	Mercator 
	(the origin is near the equator, not on the central latitude), and for
	the Krovak 
	(the origin is at the oblique cone apex near Finland, not on the central
	latitude).  
	
	Regards,
	--
	Mikael Rittri
	Carmenta AB
	SWEDEN
	www.carmenta.com



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090325/5316ecaf/attachment.html>

From bks at centrum.cz  Wed Mar 25 02:45:59 2009
From: bks at centrum.cz (Stanislav Bek)
Date: Wed, 25 Mar 2009 10:45:59 +0100
Subject: [Proj] transformation in c
In-Reply-To: <200903251045.9782@centrum.cz>
References: <200903251040.7405@centrum.cz> <200903251041.10066@centrum.cz>
	<200903251042.16684@centrum.cz> <200903251043.11266@centrum.cz>
	<200903251044.9830@centrum.cz> <200903251045.9782@centrum.cz>
Message-ID: <200903251045.10901@centrum.cz>

Hi,

I would like to use Proj4 in my C program, particularly I want to have an easy function
which transforms coordinates x,y of epsg:xxx1 to x',y' of epsg:xxx2.

Please, give me an advice how I can do easily... 

Best regards,
Stanislav Bek



From warmerdam at pobox.com  Wed Mar 25 08:48:01 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 25 Mar 2009 11:48:01 -0400
Subject: [Proj] transformation in c
In-Reply-To: <200903251045.10901@centrum.cz>
References: <200903251040.7405@centrum.cz> <200903251041.10066@centrum.cz>
	<200903251042.16684@centrum.cz> <200903251043.11266@centrum.cz>
	<200903251044.9830@centrum.cz> <200903251045.9782@centrum.cz>
	<200903251045.10901@centrum.cz>
Message-ID: <931f8ea90903250848s4a8e4bb0u6e6e99e22cb39df5@mail.gmail.com>

Stanislav,

There is pretty good information on using the PROJ C API at:

  http://trac.osgeo.org/proj/wiki/ProjAPI

You will presumably want to use coordinate system
definition strings like "+init=epsg:xxx1" in your case.

Best regards,

On Wed, Mar 25, 2009 at 5:45 AM, Stanislav Bek <bks at centrum.cz> wrote:
> Hi,
>
> I would like to use Proj4 in my C program, particularly I want to have an easy function
> which transforms coordinates x,y of epsg:xxx1 to x',y' of epsg:xxx2.
>
> Please, give me an advice how I can do easily...
>
> Best regards,
> Stanislav Bek
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From antocomisso at gmail.com  Wed Mar 25 09:37:43 2009
From: antocomisso at gmail.com (Anto C.)
Date: Wed, 25 Mar 2009 13:37:43 -0300
Subject: [Proj] input file
Message-ID: <8251dcd00903250937k78953ebl3d91fd4b4fdcc9c6@mail.gmail.com>

Hello everyone out there..!
I'm a college student completely new at this. I need to know how to get
started....
mine is a very simple question: what is the command line i need to use to
input a file with many points to be project? do i also need to specify the
output file?
What I'm basically trying to do is to project an enormous number of lat/long
point into x/y....
Also...i will be projecting points in Argentina (South America) any
suggestions on the kind of projection i should use?
Thank you very much! and sorry if i'm being to basic with my questions...i'm
really knew at this whole thing..! THANKS!
Antonela
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090325/47f6ce9d/attachment.html>

From geraldi.evenden at gmail.com  Wed Mar 25 10:01:36 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 25 Mar 2009 13:01:36 -0400
Subject: [Proj] transformation in c
In-Reply-To: <931f8ea90903250848s4a8e4bb0u6e6e99e22cb39df5@mail.gmail.com>
References: <200903251040.7405@centrum.cz> <200903251045.10901@centrum.cz>
	<931f8ea90903250848s4a8e4bb0u6e6e99e22cb39df5@mail.gmail.com>
Message-ID: <200903251301.36319.geraldi.evenden@gmail.com>

On Wednesday 25 March 2009 11:48:01 am Frank Warmerdam wrote:
> Stanislav,
>
> There is pretty good information on using the PROJ C API at:
>
>   http://trac.osgeo.org/proj/wiki/ProjAPI

I can't help but find the above website very weak and merely an exercise in  
reformulating the previously simple usage of proj and then having the 
contempt to call pj_fwd, pj_inv and pj_init obsolete.

To compound the issue of pj_fwd/inv, these functions are used withing 
pj_transform!  So how can they be obsolete yet required by the replacing 
procedure?

And, of course, the same problem occurs with the "obsolescence" of pj_init 
which is called by pj_initplus within the file pj_init.c.  It is interesting 
to note that libproj4 added the string initialization option about 3 years 
ago with the following code internal to proj_init.c:

    PROJ *
proj_initstr(char *str) {
    char * plist[1];
    plist[0] = str;
    return(proj_init(1, plist));
}
which is comparable to about 50 lines of code in pj_init.c.

That was easy because any single array element of argc of proj_init can take a 
compound field of arguments such as: "+proj=tmerc ellps=WGS84 lon_0=90W"

Also, "+" prefixes are so passe!

All this was done years ago..

Please, I am completely insulted by that web page.

If anything is obsolete, it is proj-4*** .

> You will presumably want to use coordinate system
> definition strings like "+init=epsg:xxx1" in your case.
>
> Best regards,
>
> On Wed, Mar 25, 2009 at 5:45 AM, Stanislav Bek <bks at centrum.cz> wrote:
> > Hi,
> >
> > I would like to use Proj4 in my C program, particularly I want to have an
> > easy function which transforms coordinates x,y of epsg:xxx1 to x',y' of
> > epsg:xxx2.
> >
> > Please, give me an advice how I can do easily...
> >
> > Best regards,v
> > Stanislav Bek
> >
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj



-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From strebe at aol.com  Wed Mar 25 10:12:07 2009
From: strebe at aol.com (strebe)
Date: Wed, 25 Mar 2009 10:12:07 -0700
Subject: [Proj] Cosmetic latitudes...
In-Reply-To: <FAF6E56B26D2044696772EBE89B1535101766354@posty.carmenta.se>
Message-ID: <4A737B67.95C1.4020.8E36.78E7CF336E86@aol.com>


Mikael:

I think that sorts it out well, and I agree that "center" is harder to pinpoint, as well as having less precedence in the literature, and therefore less desirable when latitude of origin and latitude of center coincide.

I realized after I sent my last response that I had not addressed your original inquiry, which is the category term for what you have proposed "cosmetic latitudes". I have never seen such a term in the literature, so I don't think you would be causing trouble by inventing your own term. If I were to do it (which I might!), I would use something like "positioning latitude", in the sense that the latitude contributes to the graticule's position on the Cartesian plane, but nothing else.

>Disclaimer: these are not official opinions of Carmenta AB. But I can work on it.

(laugh)

Regards,
— daan Strebe


On Mar 25, 2009, at 1:55:52 AM, "Mikael Rittri" <Mikael.Rittri at carmenta.com> wrote:
daan wrote:
 
> "Latitude of center" seems even more problematic for the same reason:
> unless the projection is vertically symmetrical, the "latitude of center"
> generally is not at the center of the projection.
 
That's true.  If nothing else, the "latitude of center" can be far
outside the area of interest.  (For example, the traditional
Swedish Grid is based on a Transverse Mercator with origin
at the equator, far from Sweden.  I admit that "center" is not a
very good term for this point. I could argue that this projection
in theory extends to Antarctica, but on the other hand its associated
datum RT90 is not defined outside Sweden.)
 
> Hence, if it is the latitude of the projection's  "center", then should we not call
> it the latitude of center (or central latitude)? (In point of fact, since Hotine is
> infinite in extent there is no mathematical "center", but at least symmetry allows
> a reasonable choice for a center.) If it is the latitude at the origin, then should
> we not call it the latitude of origin?
 
Well, that makes sense.  It could be both, of course, but I suppose
you prefer the term "latitude of origin" in that case.  It should be easy
to determine whether a point projects to the Cartesian origin.  It seems
harder to define "center" in a formal way, so we could resort to the
"center" term only when necessary.  If so, I  know only two or three projections
where "center" would be necessary: Krovak, Hotine Oblique Mercator (with
origin at the natural origin near the equator), and possibly EPSG's
Polar Stereographic Variant C, depending on which parameters
that are used to define it.  Do you know any more examples?
 
Disclaimer: these are not official opinions of Carmenta AB. But I can work on it.
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090325/4a562f39/attachment.html>

From richard.greenwood at gmail.com  Wed Mar 25 19:57:59 2009
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed, 25 Mar 2009 20:57:59 -0600
Subject: [Proj] transformation in c
In-Reply-To: <200903251301.36319.geraldi.evenden@gmail.com>
References: <200903251040.7405@centrum.cz> <200903251045.10901@centrum.cz>
	<931f8ea90903250848s4a8e4bb0u6e6e99e22cb39df5@mail.gmail.com>
	<200903251301.36319.geraldi.evenden@gmail.com>
Message-ID: <ae9185aa0903251957o1711212ax45a8673350d48cc0@mail.gmail.com>

On Wed, Mar 25, 2009 at 11:01 AM, Gerald I. Evenden
<geraldi.evenden at gmail.com> wrote:
> On Wednesday 25 March 2009 11:48:01 am Frank Warmerdam wrote:
>> Stanislav,
>>
>> There is pretty good information on using the PROJ C API at:
>>
>>   http://trac.osgeo.org/proj/wiki/ProjAPI
>
> I can't help but find the above website very weak and merely an exercise in
> reformulating the previously simple usage of proj and then having the
> contempt to call pj_fwd, pj_inv and pj_init obsolete.
>
> To compound the issue of pj_fwd/inv, these functions are used withing
> pj_transform!  So how can they be obsolete yet required by the replacing
> procedure?

I would discourage the use of pj_fwd and pj_inv. If "obsolete" is
offensive, how about "private". It is so provincial in this day and
age to think that we merely project and un-project without concern for
datum.

Regards,
Rich

-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From bks at centrum.cz  Thu Mar 26 02:49:09 2009
From: bks at centrum.cz (Stanislav Bek)
Date: Thu, 26 Mar 2009 10:49:09 +0100
Subject: [Proj] transformation in c
In-Reply-To: <931f8ea90903250848s4a8e4bb0u6e6e99e22cb39df5@mail.gmail.com>
References: <200903251040.7405@centrum.cz> <200903251041.10066@centrum.cz>
	<200903251045.10901@centrum.cz>
	<931f8ea90903250848s4a8e4bb0u6e6e99e22cb39df5@mail.gmail.com>
Message-ID: <200903261049.19954@centrum.cz>

Thank you!  very helpful.

Though... While building all the proj4-files (using MS Visual C++), the following error occurs:
Compiling...
jniproj.c
e:praceinternetprojektzkouska2jniproj.c(47) : fatal error C1083: Cannot open include file: 'proj_config.h': No such file or directory.
Would be only a part of the files sufficient for my purpose?
(I used proj-4.6.1/src) 

Best regards,
Stanislav 

______________________________________________________________
> Od: warmerdam at pobox.com
> Komu: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
> Datum: 25.03.2009 16:52
> Předmět: Re: [Proj] transformation in c
>
>Stanislav,
>
>There is pretty good information on using the PROJ C API at:
>
>  http://trac.osgeo.org/proj/wiki/ProjAPI
>
>You will presumably want to use coordinate system
>definition strings like "+init=epsg:xxx1" in your case.
>
>Best regards,
>
>On Wed, Mar 25, 2009 at 5:45 AM, Stanislav Bek <bks at centrum.cz> wrote:
>> Hi,
>>
>> I would like to use Proj4 in my C program, particularly I want to have an easy function
>> which transforms coordinates x,y of epsg:xxx1 to x',y' of epsg:xxx2.
>>
>> Please, give me an advice how I can do easily...
>>
>> Best regards,
>> Stanislav Bek
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>>
>
>
>
>-- 
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>_______________________________________________
>Proj mailing list
>Proj at lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/proj
>



From geraldi.evenden at gmail.com  Thu Mar 26 07:14:21 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 26 Mar 2009 10:14:21 -0400
Subject: [Proj] transformation in c
In-Reply-To: <ae9185aa0903251957o1711212ax45a8673350d48cc0@mail.gmail.com>
References: <200903251040.7405@centrum.cz>
	<200903251301.36319.geraldi.evenden@gmail.com>
	<ae9185aa0903251957o1711212ax45a8673350d48cc0@mail.gmail.com>
Message-ID: <200903261014.21921.geraldi.evenden@gmail.com>

On Wednesday 25 March 2009 10:57:59 pm Richard Greenwood wrote:
> On Wed, Mar 25, 2009 at 11:01 AM, Gerald I. Evenden
>
> <geraldi.evenden at gmail.com> wrote:
> > On Wednesday 25 March 2009 11:48:01 am Frank Warmerdam wrote:
> >> Stanislav,
> >>
> >> There is pretty good information on using the PROJ C API at:
> >>
> >>   http://trac.osgeo.org/proj/wiki/ProjAPI
> >
> > I can't help but find the above website very weak and merely an exercise
> > in reformulating the previously simple usage of proj and then having the
> > contempt to call pj_fwd, pj_inv and pj_init obsolete.
> >
> > To compound the issue of pj_fwd/inv, these functions are used withing
> > pj_transform!  So how can they be obsolete yet required by the replacing
> > procedure?
>
> I would discourage the use of pj_fwd and pj_inv. If "obsolete" is
> offensive, how about "private". It is so provincial in this day and
> age to think that we merely project and un-project without concern for
> datum.
>
> Regards,
> Rich

That, of course, is the most ignorant and absurd statement and underlies my 
decision to sign off this list.  I am tired of responding and otherwise 
wasting my time writing emails in an attempt to correct this erroneous 
position.

Nowhere in the definition of a cartographic projection is there any aspect of 
datum involved.  Many books and articles have been written about cartographic 
projections and datums are rarely mentioned and when they are, it is in 
association with the status of the data involved and not in the act of the 
cartographic projection.

Enough said here as I am obviously writing to the proverbial brick wall of 
ignorance.

Anyone who wants to talk about cartographic projects knows my email address an 
I am always willing to discuss issues germane to this subject.  I am also 
willing to listen and discuss issues related to datum transformations but 
*not* when is assumed that they are part of the projection process.

Yes, I am taking my marbles and going home.

Bye.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From warmerdam at pobox.com  Thu Mar 26 20:47:42 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 26 Mar 2009 20:47:42 -0700
Subject: [Proj] transformation in c
In-Reply-To: <200903261014.21921.geraldi.evenden@gmail.com>
References: <200903251040.7405@centrum.cz>
	<200903251301.36319.geraldi.evenden@gmail.com>
	<ae9185aa0903251957o1711212ax45a8673350d48cc0@mail.gmail.com>
	<200903261014.21921.geraldi.evenden@gmail.com>
Message-ID: <931f8ea90903262047ibafc00bsbf35b09c3b1c01d0@mail.gmail.com>

On Thu, Mar 26, 2009 at 7:14 AM, Gerald I. Evenden
<geraldi.evenden at gmail.com> wrote:
> Enough said here as I am obviously writing to the proverbial brick wall of
> ignorance.
>
> Anyone who wants to talk about cartographic projects knows my email address an
> I am always willing to discuss issues germane to this subject.  I am also
> willing to listen and discuss issues related to datum transformations but
> *not* when is assumed that they are part of the projection process.
>
> Yes, I am taking my marbles and going home.
>
> Bye.

Sigh.  Well, most of your contributions were appreciated.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Mar 26 21:00:22 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 26 Mar 2009 21:00:22 -0700
Subject: [Proj] transformation in c
In-Reply-To: <200903251301.36319.geraldi.evenden@gmail.com>
References: <200903251040.7405@centrum.cz> <200903251045.10901@centrum.cz>
	<931f8ea90903250848s4a8e4bb0u6e6e99e22cb39df5@mail.gmail.com>
	<200903251301.36319.geraldi.evenden@gmail.com>
Message-ID: <931f8ea90903262100j5346bbe3yadb92fd09258dd75@mail.gmail.com>

On Wed, Mar 25, 2009 at 10:01 AM, Gerald I. Evenden
<geraldi.evenden at gmail.com> wrote:
> I can't help but find the above website very weak and merely an exercise in
> reformulating the previously simple usage of proj and then having the
> contempt to call pj_fwd, pj_inv and pj_init obsolete.

Folks,

I'm not sure there is much point in responding to this, but for completeness
the pj_fwd() and pj_inv() functions are deprecated in order to avoid
presenting too many API entry points to the application developer,
potentially leading to confusion about which to use.  The functions
continue to be available, but their use is not encouraged by me.

> To compound the issue of pj_fwd/inv, these functions are used withing
> pj_transform!  So how can they be obsolete yet required by the replacing
> procedure?

As Richard suggested, I see them as primarily for internal
use, or specialized applications.

> And, of course, the same problem occurs with the "obsolescence" of pj_init
> which is called by pj_initplus within the file pj_init.c.  It is interesting
> to note that libproj4 added the string initialization option about 3 years
> ago with the following code internal to proj_init.c:

I think if we dug we would find that pj_init_plus() was implemented
in PROJ.4 after I took up maintenance, and before Gerald started
work on libproj.4.

>
>    PROJ *
> proj_initstr(char *str) {
>    char * plist[1];
>    plist[0] = str;
>    return(proj_init(1, plist));
> }
> which is comparable to about 50 lines of code in pj_init.c.
>
> That was easy because any single array element of argc of proj_init can take a
> compound field of arguments such as: "+proj=tmerc ellps=WGS84 lon_0=90W"

This is certainly news to me.  I'm not sure it was documented or obvious.

> Also, "+" prefixes are so passe!

I find them an explicit way of introducing PROJ.4 arguments.  I can
certainly understand that they aren't strictly necessary but it is
now my practice to encourage their use, and PROJ.4 string
parsers like that in GDAL/OGR will not understand PROJ.4
coordinate systems without the '+'s.

> All this was done years ago..
>
> Please, I am completely insulted by that web page.
>
> If anything is obsolete, it is proj-4*** .

Well, this is getting subjective, so I'll avoid responding.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bks at centrum.cz  Fri Mar 27 02:48:22 2009
From: bks at centrum.cz (Stanislav Bek)
Date: Fri, 27 Mar 2009 10:48:22 +0100
Subject: [Proj] transformation in c
In-Reply-To: <931f8ea90903262100j5346bbe3yadb92fd09258dd75@mail.gmail.com>
References: <200903251040.7405@centrum.cz> <200903251045.10901@centrum.cz>
	<200903251301.36319.geraldi.evenden@gmail.com>
	<931f8ea90903262100j5346bbe3yadb92fd09258dd75@mail.gmail.com>
Message-ID: <200903271048.21974@centrum.cz>

The example on the recommended site: http://trac.osgeo.org/proj/wiki/ProjAPI
can work only if I build it with some other files. Please, advice me, with WHICH?
(I cannot build all the src because "proj_config.h" is not present.)

Best regards,
Stanislav 



From warmerdam at pobox.com  Fri Mar 27 04:30:04 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 27 Mar 2009 04:30:04 -0700
Subject: [Proj] transformation in c
In-Reply-To: <200903261049.19954@centrum.cz>
References: <200903251040.7405@centrum.cz> <200903251041.10066@centrum.cz>
	<200903251045.10901@centrum.cz>
	<931f8ea90903250848s4a8e4bb0u6e6e99e22cb39df5@mail.gmail.com>
	<200903261049.19954@centrum.cz>
Message-ID: <931f8ea90903270430h7f4ed922xf24a2c936c9b6015@mail.gmail.com>

On Thu, Mar 26, 2009 at 2:49 AM, Stanislav Bek <bks at centrum.cz> wrote:
> Thank you!  very helpful.
>
> Though... While building all the proj4-files (using MS Visual C++), the following error occurs:
> Compiling...
> jniproj.c
> e:praceinternetprojektzkouska2jniproj.c(47) : fatal error C1083: Cannot open include file: 'proj_config.h': No such file or directory.
> Would be only a part of the files sufficient for my purpose?
> (I used proj-4.6.1/src)

Stanislav,

You have not provided any detail how you got to this point.
Are you building using the nmake makefiles provided with
PROJ.4?   Something like:

nmake /f makefile.vc all\

as described in the README file for building on windows?

If you choose to create your own MSVC project file,
then it is up to you to properly define the include path
and select just the appropriate files for the library.  This
is non-trivial, and should likely only be done if you
understand the makefile already.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bks at centrum.cz  Fri Mar 27 07:08:46 2009
From: bks at centrum.cz (Stanislav Bek)
Date: Fri, 27 Mar 2009 15:08:46 +0100
Subject: [Proj] transformation in c
In-Reply-To: <931f8ea90903270430h7f4ed922xf24a2c936c9b6015@mail.gmail.com>
References: <200903251040.7405@centrum.cz> <200903251041.10066@centrum.cz>
	<200903261049.19954@centrum.cz>
	<931f8ea90903270430h7f4ed922xf24a2c936c9b6015@mail.gmail.com>
Message-ID: <200903271508.23191@centrum.cz>

It does not work yet. In attachment, I send the error
received by running nmake.

Sorry for this beginners' stuff...
Best regards,
Stanislav 

______________________________________________________________
> Od: warmerdam at pobox.com
> Komu: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
> Datum: 27.03.2009 12:31
> Předmět: Re: [Proj] transformation in c
>
>On Thu, Mar 26, 2009 at 2:49 AM, Stanislav Bek <bks at centrum.cz> wrote:
>> Thank you!  very helpful.
>>
>> Though... While building all the proj4-files (using MS Visual C++), the following error occurs:
>> Compiling...
>> jniproj.c
>> e:praceinternetprojektzkouska2jniproj.c(47) : fatal error C1083: Cannot open include file: 'proj_config.h': No such file or directory.
>> Would be only a part of the files sufficient for my purpose?
>> (I used proj-4.6.1/src)
>
>Stanislav,
>
>You have not provided any detail how you got to this point.
>Are you building using the nmake makefiles provided with
>PROJ.4?   Something like:
>
>nmake /f makefile.vc all
>
>as described in the README file for building on windows?
>
>If you choose to create your own MSVC project file,
>then it is up to you to properly define the include path
>and select just the appropriate files for the library.  This
>is non-trivial, and should likely only be done if you
>understand the makefile already.
>
>Best regards,
>-- ---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>_______________________________________________
>Proj mailing list
>Proj at lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/proj
>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: error.png
Type: image/png
Size: 23931 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090327/47f2e8f6/attachment.png>

From warmerdam at pobox.com  Sat Mar 28 09:48:16 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat, 28 Mar 2009 12:48:16 -0400
Subject: [Proj] transformation in c
In-Reply-To: <200903271508.23191@centrum.cz>
References: <200903251040.7405@centrum.cz> <200903251041.10066@centrum.cz>
	<200903261049.19954@centrum.cz>
	<931f8ea90903270430h7f4ed922xf24a2c936c9b6015@mail.gmail.com>
	<200903271508.23191@centrum.cz>
Message-ID: <49CE54D0.6050302@pobox.com>

Stanislav Bek wrote:
> It does not work yet. In attachment, I send the error
> received by running nmake.
> 

Stanislav,

Unfortunately, I can't translate the response you are getting which does
not seem related to the earlier jni binding related problem.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From richard.greenwood at gmail.com  Sat Mar 28 17:09:36 2009
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Sat, 28 Mar 2009 18:09:36 -0600
Subject: [Proj] datum matters
Message-ID: <ae9185aa0903281709l51eaea20v744b5ce5742921ae@mail.gmail.com>

I made a post to this list earlier this week that offended at least
one member of the list. I’ll try here to clarify my position and
hopefully not start a flame war. I know that 90% of the subscribers to
this list have already forgotten more than I will ever know about
projections and datums, so please be tolerant of my simplistic
comments.

In this era we must think in terms coordinate systems, not just
projections, despite the name of the list and library. I’m using
“coordinate system” as a projection + datum, or lat/long + datum. To
tie a position to the earth you need both. Many users, both C
programmers incorporating the library in their own work, and end users
accessing the library thru the various OSGEO stack applications that
use the library, do not distinguish between a “projection” and a
“coordinate system”.

Two subtle, but important, changes that I have noticed in the library
are: (1) No longer assuming a datum of WGS84 when either a source or
destination system lacks an explicit datum (2) depredicating pj_fwd()
and pj_inv() in favor of pj_transform(). These changes encourage users
to think in terms of the coordinate system as a whole and may keep
people out of trouble. Thanks to Frank or who ever deserves credit for
these changes.

-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From ndzinn at comcast.net  Sat Mar 28 18:23:26 2009
From: ndzinn at comcast.net (Noel Zinn)
Date: Sat, 28 Mar 2009 20:23:26 -0500
Subject: [Proj] datum matters
In-Reply-To: <ae9185aa0903281709l51eaea20v744b5ce5742921ae@mail.gmail.com>
References: <ae9185aa0903281709l51eaea20v744b5ce5742921ae@mail.gmail.com>
Message-ID: <FF3764338AF64FFBA51AE068967F989F@PowerSpec>

Interesting subject of surprising sensitivity.  Let me offer some
terminology that helps me parse the issue, with an acknowledgement of EPSG
for some of it.

Conversions are mathematically exact (within the quality of the algorithm
and machine precision) changes among coordinate systems (in the EPSG sense,
not the Richard Greenwood sense), for example, lat/lon to projected
Northing/Easting, or lat/lon to ECEF geocentric Cartesians.  

Transformations are changes in datums, what Richard calls coordinate
systems, a term that I have redefined above.  Transformations are always
inexact since the parameters are always empirically derived (measurements
have errors) and because datum relationships vary spatially and (probably)
temporally, for example, NAD27 lat/lon to WGS84 lat/lon, NGVD29 normal
orthometric heights to NAVD88 Helmert orthometric heights. 

Some of us prefer the mathematically purity (and entertainment) of
conversions and others prefer the dirty-fingernail (and remunerative) task
of quantifying relationships among real-world datums.  Courses for horses,
as they say in the UK.  

Now the EPSG (or maybe the ISO before them) have conflated these concepts
into the coordinate reference system (CRS), for example, Geographical CRS
for the lat/lon coordinate system of a particular datum, or Projected CRS
for a particular projection on a particular datum (what Richard calls a
coordinate system).  I am not convinced that this taxonomy is an advance
(agreeing with the recently departed), but I am so in awe of the enormous
compendium of useful, real-world information that this taxonomy supports
that I happily accept it as the de facto standard.  

Noel Zinn

PS - Shouldn't pj_transform() be pj_convert() if you accept the definitions
above?


-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Richard Greenwood
Sent: Saturday, March 28, 2009 7:10 PM
To: PROJ.4 and general Projections Discussions
Subject: [Proj] datum matters

I made a post to this list earlier this week that offended at least
one member of the list. I'll try here to clarify my position and
hopefully not start a flame war. I know that 90% of the subscribers to
this list have already forgotten more than I will ever know about
projections and datums, so please be tolerant of my simplistic
comments.

In this era we must think in terms coordinate systems, not just
projections, despite the name of the list and library. I'm using
"coordinate system" as a projection + datum, or lat/long + datum. To
tie a position to the earth you need both. Many users, both C
programmers incorporating the library in their own work, and end users
accessing the library thru the various OSGEO stack applications that
use the library, do not distinguish between a "projection" and a
"coordinate system".

Two subtle, but important, changes that I have noticed in the library
are: (1) No longer assuming a datum of WGS84 when either a source or
destination system lacks an explicit datum (2) depredicating pj_fwd()
and pj_inv() in favor of pj_transform(). These changes encourage users
to think in terms of the coordinate system as a whole and may keep
people out of trouble. Thanks to Frank or who ever deserves credit for
these changes.

-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From richard.greenwood at gmail.com  Sat Mar 28 18:43:11 2009
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Sat, 28 Mar 2009 19:43:11 -0600
Subject: [Proj] datum matters
In-Reply-To: <FF3764338AF64FFBA51AE068967F989F@PowerSpec>
References: <ae9185aa0903281709l51eaea20v744b5ce5742921ae@mail.gmail.com>
	<FF3764338AF64FFBA51AE068967F989F@PowerSpec>
Message-ID: <ae9185aa0903281843uc73f402q797068e1de878f18@mail.gmail.com>

On Sat, Mar 28, 2009 at 7:23 PM, Noel Zinn <ndzinn at comcast.net> wrote:
> Interesting subject of surprising sensitivity.  Let me offer some
> terminology that helps me parse the issue, with an acknowledgement of EPSG
> for some of it.
>
> Conversions are mathematically exact (within the quality of the algorithm
> and machine precision) changes among coordinate systems (in the EPSG sense,
> not the Richard Greenwood sense), for example, lat/lon to projected
> Northing/Easting, or lat/lon to ECEF geocentric Cartesians.
>
> Transformations are changes in datums, what Richard calls coordinate
> systems, a term that I have redefined above.  Transformations are always
> inexact since the parameters are always empirically derived (measurements
> have errors) and because datum relationships vary spatially and (probably)
> temporally, for example, NAD27 lat/lon to WGS84 lat/lon, NGVD29 normal
> orthometric heights to NAVD88 Helmert orthometric heights.
>
> Some of us prefer the mathematically purity (and entertainment) of
> conversions and others prefer the dirty-fingernail (and remunerative) task
> of quantifying relationships among real-world datums.  Courses for horses,
> as they say in the UK.
>
> Now the EPSG (or maybe the ISO before them) have conflated these concepts
> into the coordinate reference system (CRS), for example, Geographical CRS
> for the lat/lon coordinate system of a particular datum, or Projected CRS
> for a particular projection on a particular datum (what Richard calls a
> coordinate system).  I am not convinced that this taxonomy is an advance
> (agreeing with the recently departed), but I am so in awe of the enormous
> compendium of useful, real-world information that this taxonomy supports
> that I happily accept it as the de facto standard.
>
> Noel Zinn
>
> PS - Shouldn't pj_transform() be pj_convert() if you accept the definitions
> above?

I'm thinking of projections and coordinate systems as nouns, things,
definitions. And I see conversions and transformations as verbs,
actions that one performs on data. I agree that conversions are
rigorous and transformations not necessarily so. I believe that
pj_transform() supports 3 types of datum transformation in addition to
conversions.

-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From strebe at aol.com  Sat Mar 28 21:28:35 2009
From: strebe at aol.com (strebe)
Date: Sat, 28 Mar 2009 21:28:35 -0700
Subject: [Proj] datum matters
In-Reply-To: <ae9185aa0903281709l51eaea20v744b5ce5742921ae@mail.gmail.com>
Message-ID: <FFF34B2A.13F7.4A35.9935.FF209CBCB1FA@aol.com>


On Mar 28, 2009, at 5:09:36 PM, "Richard Greenwood" <richard.greenwood at gmail.com> wrote:
In this era we must think in terms coordinate systems, not just
projections, despite the name of the list and library. I’m using
“coordinate system” as a projection + datum, or lat/long + datum. To
tie a position to the earth you need both. Many users, both C
programmers incorporating the library in their own work, and end users
accessing the library thru the various OSGEO stack applications that
use the library, do not distinguish between a “projection” and a
“coordinate system”.
This notion of having to think in terms of coordinate systems, not just projections, is only true within some domains. Large-scale maps? Yes. Medium and especially small-scale maps? No. Analysis of projection distortion? No. Believe it or not, a LOT of medium and small-scale maps are made. People tend to view the world through their own myopic interests.

Gerald Evenden and I do not agree on many things, as the years have demonstrated, and I certainly do not understand flouncing off in a huff over something so obscure. Still, I do think it is more reasonable to keep projections and coordinate systems distinct than it is to conflate them. They ARE distinct. Perhaps we save some people from their own ignorance by insisting on an integration of the two, but then we impose a computational and conceptual burden upon those who don't need them, as well as encourage those who do need them to confuse themselves into believing their own interests are the norm.

Regards,
— daan Strebe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090328/e70f41db/attachment.html>

From richard.greenwood at gmail.com  Sun Mar 29 09:10:46 2009
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Sun, 29 Mar 2009 10:10:46 -0600
Subject: [Proj] datum matters
In-Reply-To: <FFF34B2A.13F7.4A35.9935.FF209CBCB1FA@aol.com>
References: <ae9185aa0903281709l51eaea20v744b5ce5742921ae@mail.gmail.com>
	<FFF34B2A.13F7.4A35.9935.FF209CBCB1FA@aol.com>
Message-ID: <ae9185aa0903290910m2f35ecdo499a686b634c09e1@mail.gmail.com>

2009/3/28 strebe <strebe at aol.com>:

> This notion of having to think in terms of coordinate systems, not just projections, is only true within some domains. Large-scale maps? Yes. Medium and especially small-scale maps? No. Analysis of projection distortion? No. Believe it or not, a LOT of medium and small-scale maps are made. People tend to view the world through their own myopic interests.

Datum has nothing to do with scale. Even the smallest scale maps can
benefit from being related to a datum. Look at the very interesting
work Jan Hartman is doing bring maps that are many hundreds of years
old onto a modern coordinate system.

> Gerald Evenden and I do not agree on many things, as the years have demonstrated, and I certainly do not understand flouncing off in a huff over something so obscure. Still, I do think it is more reasonable to keep projections and coordinate systems distinct than it is to conflate them. They ARE distinct. Perhaps we save some people from their own ignorance by insisting on an integration of the two, but then we impose a computational and conceptual burden upon those who don't need them, as well as encourage those who do need them to confuse themselves into believing their own interests are the norm.

The "computational burden" of comparing the input and output datum is
no more intensive than converting from radians to degrees. Hopefully
you will not argue that we limit ourselves to radians. The "conceptual
burden" is more subjective, but closer to my point: That to a growing
number of users, datum does matter.

-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From richard.greenwood at gmail.com  Sun Mar 29 09:52:59 2009
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Sun, 29 Mar 2009 10:52:59 -0600
Subject: [Proj] datum matters
In-Reply-To: <ae9185aa0903290910m2f35ecdo499a686b634c09e1@mail.gmail.com>
References: <ae9185aa0903281709l51eaea20v744b5ce5742921ae@mail.gmail.com>
	<FFF34B2A.13F7.4A35.9935.FF209CBCB1FA@aol.com>
	<ae9185aa0903290910m2f35ecdo499a686b634c09e1@mail.gmail.com>
Message-ID: <ae9185aa0903290952o4b133b03i1d376973d0c987b0@mail.gmail.com>

Oops, where's the un-send button? I totally misunderstood daan
Strebe's message, reversing small scale and large scale. How
embarrassing. I do agree that datum is more important the larger the
scale. I got your point. I do however, still advocate "conflating"
projection and datum. EPSG seems to have done it, many of the proj
users do it without knowing it. So let's do it right.

Rich


On Sun, Mar 29, 2009 at 10:10 AM, Richard Greenwood
<richard.greenwood at gmail.com> wrote:
> 2009/3/28 strebe <strebe at aol.com>:
>
>> This notion of having to think in terms of coordinate systems, not just projections, is only true within some domains. Large-scale maps? Yes. Medium and especially small-scale maps? No. Analysis of projection distortion? No. Believe it or not, a LOT of medium and small-scale maps are made. People tend to view the world through their own myopic interests.
>
> Datum has nothing to do with scale. Even the smallest scale maps can
> benefit from being related to a datum. Look at the very interesting
> work Jan Hartman is doing bring maps that are many hundreds of years
> old onto a modern coordinate system.
>
>> Gerald Evenden and I do not agree on many things, as the years have demonstrated, and I certainly do not understand flouncing off in a huff over something so obscure. Still, I do think it is more reasonable to keep projections and coordinate systems distinct than it is to conflate them. They ARE distinct. Perhaps we save some people from their own ignorance by insisting on an integration of the two, but then we impose a computational and conceptual burden upon those who don't need them, as well as encourage those who do need them to confuse themselves into believing their own interests are the norm.
>
> The "computational burden" of comparing the input and output datum is
> no more intensive than converting from radians to degrees. Hopefully
> you will not argue that we limit ourselves to radians. The "conceptual
> burden" is more subjective, but closer to my point: That to a growing
> number of users, datum does matter.
>
> --
> Richard Greenwood
> richard.greenwood at gmail.com
> www.greenwoodmap.com
>



-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From paul-grass at stjohnspoint.co.uk  Sun Mar 29 10:38:07 2009
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Sun, 29 Mar 2009 18:38:07 +0100 (BST)
Subject: [Proj] datum matters
In-Reply-To: <ae9185aa0903290952o4b133b03i1d376973d0c987b0@mail.gmail.com>
References: <ae9185aa0903281709l51eaea20v744b5ce5742921ae@mail.gmail.com>
	<FFF34B2A.13F7.4A35.9935.FF209CBCB1FA@aol.com>
	<ae9185aa0903290910m2f35ecdo499a686b634c09e1@mail.gmail.com>
	<ae9185aa0903290952o4b133b03i1d376973d0c987b0@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0903291800330.30289@vortex.ukshells.co.uk>

On Sun, 29 Mar 2009, Richard Greenwood wrote:

> I do however, still advocate "conflating"
> projection and datum. EPSG seems to have done it, many of the proj
> users do it without knowing it. So let's do it right.

I think the sentiment to "do it right" is the key point of contention 
here. As I see it, it has been the consensus on this list for several 
years that the way the existing PROJ.4 does this "conflation" is not the 
best. Indeed PROJ.4 maintainer Frank W has stated several times that it is 
his long-term intention to refactor the library into a separate 
"mathematically pure" core (my words not his), probably based on Gerald's 
libproj4, with a separate level of abstraction on top of that supporting 
the "less exact" science of co-ordinate system and datum conversions. I 
don't think anybody has ever seriously disagreed that that was not the 
best way forward, hence why any suggestion that the current slightly messy 
way (again my opinion) that projections and co-ordinate systems are mixed 
in the pj_transform() API is a great idea and the way we should all be 
doing things is bound to cause a bit of contention ;)

If I may be permitted to stir things up by adding another bit of my own 
personal opinion here, Gerald has not done himself any favours in support 
of use of his libproj4 as a mathematically pure core projection library by 
his ambivalent attitude towards the inclusion of improved mathematical 
algorithms for some projections - I'm thinking particularly of the recent 
discussion on transverse mercator algorithms and Charles Karney's improved 
version, and Gerald's defence that the existing versions were "good 
enough" for all reasonable uses of the projection. IMHO the discussion of 
what is a reasonable use and the the choice of projection algorithm for a 
particular co-ordinate system belongs in the abstracted co-ordinate system 
library, not the core projection library. (I realise of course that there 
are several different versions of the tmerc algorithm already and I'm 
stetching the issue a bit to make a point, but I do feel that it's a valid 
point).

Just a couple of thoughts anyway...

Paul


From strebe at aol.com  Sun Mar 29 12:15:25 2009
From: strebe at aol.com (strebe)
Date: Sun, 29 Mar 2009 12:15:25 -0700
Subject: [Proj] datum matters
In-Reply-To: <ae9185aa0903290910m2f35ecdo499a686b634c09e1@mail.gmail.com>
Message-ID: <8B05358B.4546.43D2.93C5.F41A79766CDA@aol.com>


On Mar 29, 2009, at 9:10:46 AM, "Richard Greenwood" <richard.greenwood at gmail.com> wrote:
The "computational burden" of comparing the input and output datum is
no more intensive than converting from radians to degrees.

But this is quite my point about misplaced conceptual burdens. Many people do not even have datums attached to their cartographic data because the datum is irrelevant at the scale they are working. What is the use of forcing them  to declare a fictitious datum in order to satisfy an ideological conflation of datum and projection?

Hopefully
you will not argue that we limit ourselves to radians. The "conceptual
burden" is more subjective, but closer to my point: That to a growing
number of users, datum does matter.
The number may be growing, but they will never be even close to everyone.. I do not agree everyone should be forced into artificial procedures in order to save some fraction of them from their own ignorance. That is arrogance, if nothing else. No one knows what is best for everyone. Datum and projection are distinct. Let those who need to treat them distinctly, treat them distinctly. Let those who may or must ignore datums, ignore datums.

Regards,
— daan Strebe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090329/7e5af963/attachment.html>

From ndzinn at comcast.net  Sun Mar 29 13:45:42 2009
From: ndzinn at comcast.net (Noel Zinn)
Date: Sun, 29 Mar 2009 15:45:42 -0500
Subject: [Proj] datum matters
In-Reply-To: <8B05358B.4546.43D2.93C5.F41A79766CDA@aol.com>
References: <ae9185aa0903290910m2f35ecdo499a686b634c09e1@mail.gmail.com>
	<8B05358B.4546.43D2.93C5.F41A79766CDA@aol.com>
Message-ID: <17B00F0B7B7847B6BFF30DC284C9F2C4@PowerSpec>

Fictitious datum?  That's offensive, daan.  When the datum is ignored,
cartography is an entertainment merely purporting to represent the real
world.  That's fine, but (the) datum is hardly fictitious.  -Noel

 

  _____  

From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of strebe
Sent: Sunday, March 29, 2009 2:15 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] datum matters

 


On Mar 29, 2009, at 9:10:46 AM, "Richard Greenwood"
<richard.greenwood at gmail.com> wrote:

The "computational burden" of comparing the input and output datum is
no more intensive than converting from radians to degrees.

 

But this is quite my point about misplaced conceptual burdens. Many people
do not even have datums attached to their cartographic data because the
datum is irrelevant at the scale they are working.. What is the use of
forcing them  to declare a fictitious datum in order to satisfy an
ideological conflation of datum and projection?

 

Hopefully
you will not argue that we limit ourselves to radians. The "conceptual
burden" is more subjective, but closer to my point: That to a growing
number of users, datum does matter.



The number may be growing, but they will never be even close to everyone. I
do not agree everyone should be forced into artificial procedures in order
to save some fraction of them from their own ignorance. That is arrogance,
if nothing else. No one knows what is best for everyone. Datum and
projection are distinct. Let those who need to treat them distinctly, treat
them distinctly. Let those who may or must ignore datums, ignore datums.

 

Regards,

- daan Strebe

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090329/9a2dcbcc/attachment.html>

From warmerdam at pobox.com  Sun Mar 29 14:21:19 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 29 Mar 2009 17:21:19 -0400
Subject: [Proj] datum matters
In-Reply-To: <Pine.LNX.4.62.0903291800330.30289@vortex.ukshells.co.uk>
References: <ae9185aa0903281709l51eaea20v744b5ce5742921ae@mail.gmail.com>
	<FFF34B2A.13F7.4A35.9935.FF209CBCB1FA@aol.com>
	<ae9185aa0903290910m2f35ecdo499a686b634c09e1@mail.gmail.com>
	<ae9185aa0903290952o4b133b03i1d376973d0c987b0@mail.gmail.com>
	<Pine.LNX.4.62.0903291800330.30289@vortex.ukshells.co.uk>
Message-ID: <49CFE64F.7000006@pobox.com>

Paul Kelly wrote:
> I think the sentiment to "do it right" is the key point of contention 
> here. As I see it, it has been the consensus on this list for several 
> years that the way the existing PROJ.4 does this "conflation" is not the 
> best. Indeed PROJ.4 maintainer Frank W has stated several times that it is 
> his long-term intention to refactor the library into a separate 
> "mathematically pure" core (my words not his), probably based on Gerald's 
> libproj4, with a separate level of abstraction on top of that supporting 
> the "less exact" science of co-ordinate system and datum conversions. I 
> don't think anybody has ever seriously disagreed that that was not the 
> best way forward, hence why any suggestion that the current slightly messy 
> way (again my opinion) that projections and co-ordinate systems are mixed 
> in the pj_transform() API is a great idea and the way we should all be 
> doing things is bound to cause a bit of contention ;)

Paul,

I am less enthusiastic about the refactoring of PROJ.4 into a low level
libproj4 + high level datum/coordinatesystems/etc library now.  My interest
in this was primarily intended to break things into parts where Gerald would
maintain one, and I could maintain the other.  Personally I would have been
happy enough to have the two components conflated for similar reasons to those
mentioned by Richard.

I *feel* that Gerald's recent exit is a sign that he and I are unlikely to
be able to work together effectively on such a two part project and so I am
now inclined to not make any substantive changes in the architecture of
PROJ.4.  In any event the refactoring was predicated on my having a
substantial amount of time to invest which has not materialized over the
last several years.

Frankly, PROJ.4 does what I need now, and I am inclined to continue the
current approach with minimal changes.  If there are other folks who would
like to be contributors in an effort to refactor things, and if they
can convince me they are reasonably sensitive to the impact of changes on
existing users, I would be willing to consider a refactoring effort.

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From strebe at aol.com  Sun Mar 29 15:31:03 2009
From: strebe at aol.com (strebe)
Date: Sun, 29 Mar 2009 15:31:03 -0700
Subject: [Proj] datum matters
In-Reply-To: <17B00F0B7B7847B6BFF30DC284C9F2C4@PowerSpec>
Message-ID: <80FC6532.6951.4E6E.8047.E11319D45D78@aol.com>


On Mar 29, 2009, at 1:45:42 PM, "Noel Zinn" <ndzinn at comcast.net> wrote:
Fictitious datum?  That’s offensive, daan.  When the datum is ignored, cartography is an entertainment merely purporting to represent the real world.  That’s fine, but (the) datum is hardly fictitious.  -Noel 


Noel: I did not call the datum fictitious in general. Please read more carefully so that people do not get attributed with and then taken to task for words and ideas they do not espouse.

If no datum is attached to the coordinates, and if the projection/coordinate conversion software requires a datum because it has conflated projection and coordinate transformation, then the user would be forced to declare some fictitious datum in order to satisfy the ideological requirements of the software. That is what I referred to as a "fictitious datum".. If that is "offensive", then feel free to elaborate, though I am very much at the point of bowing out of the conversation. (I will not, however, take my marbles and go home.)

Regards,
— daan Strebe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090329/994826aa/attachment.html>

From ndzinn at comcast.net  Sun Mar 29 16:04:09 2009
From: ndzinn at comcast.net (Noel Zinn)
Date: Sun, 29 Mar 2009 18:04:09 -0500
Subject: [Proj] datum matters
In-Reply-To: <80FC6532.6951.4E6E.8047.E11319D45D78@aol.com>
References: <17B00F0B7B7847B6BFF30DC284C9F2C4@PowerSpec>
	<80FC6532.6951.4E6E.8047.E11319D45D78@aol.com>
Message-ID: <975BC06540DF4512BA4644C0765F1CCD@PowerSpec>

daan,

Good!  And thanks for your clarification, with which I agree.  I am betwixt
and between on this issue.  Cartography is a marvelous entertainment in the
abstract that needn't be / shouldn't be encumbered with a datum.  However,
once culture is presented on the map (other than a cartoon coastline or some
such for reference), then the geodetic datum is critical.  In this era of
computers and GIS, the issue of small scale versus large scale is
irrelevant.  Before culture ever gets to a paper map where scale is
relevant, it lives forever in a database and can be re-presented at any
scale one might (mistakenly) desire.  That's not good.  So, I guess I agree
with you for cartoons, but not for real data.  

Noel

 

  _____  

From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of strebe
Sent: Sunday, March 29, 2009 5:31 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] datum matters

 


On Mar 29, 2009, at 1:45:42 PM, "Noel Zinn" <ndzinn at comcast.net> wrote:

Fictitious datum?  That's offensive, daan.  When the datum is ignored,
cartography is an entertainment merely purporting to represent the real
world.  That's fine, but (the) datum is hardly fictitious.  -Noel 

 

Noel: I did not call the datum fictitious in general. Please read more
carefully so that people do not get attributed with and then taken to task
for words and ideas they do not espouse.

 

If no datum is attached to the coordinates, and if the projection/coordinate
conversion software requires a datum because it has conflated projection and
coordinate transformation, then the user would be forced to declare some
fictitious datum in order to satisfy the ideological requirements of the
software. That is what I referred to as a "fictitious datum". If that is
"offensive", then feel free to elaborate, though I am very much at the point
of bowing out of the conversation. (I will not, however, take my marbles and
go home.)

 

Regards,

- daan Strebe

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090329/225e7e8e/attachment.html>

From cjmce at lsu.edu  Sun Mar 29 18:36:29 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Sun, 29 Mar 2009 20:36:29 -0500
Subject: [Proj] datum matters
References: <17B00F0B7B7847B6BFF30DC284C9F2C4@PowerSpec><80FC6532.6951.4E6E.8047.E11319D45D78@aol.com>
	<975BC06540DF4512BA4644C0765F1CCD@PowerSpec>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2657@email002.lsu.edu>

In regard to this thread, I shall offer my two cents' worth of opinions:
 
For Large scale mapping generally at 1:50,000 and larger, the classical geodetic Datum is the primary consideration before delving into cartographic projections of various flavors.  However, with such considerations taken into account there are a very finite number of mathematical models appropriate for use with any specific Datum.  Those models are generally specifically legislated by some political body that has venue over that specific geographic region.  Since PROJ does not "connect" specific Datums with specific mathematical models, e.g., Rome 1940 with either a Gauss-Boaga Transverse Mercator projection (East or West Zone), for a national system or a Cassini-Soldner projection for a local cadastral system (some several hundred currently exist), ... both being the ONLY appropriate projections to be used with Rome 1940 ... the user needs to be educated enough to know that a Krovak Oblique Conic is entirely inappropriate to use with that Datum for that country.
 
What does that?  EPSG attempts to provide the guidance for the appropriate mathematical models for the specific classical geodetic Datums they list in their data base, e.g. the French Army Truncated Cubic Lambert for some areas in North Africa.
 
I do not see PROJ doing that ... essentially it would be an attempt to duplicate the EPSG contrivance.
 
Separation of true geodetic concerns from classical cartographic applications seems to be a reasonable approach.  Remember, the late John P. Snyder never attempted to write about the connections between projections and Datums with respect to large scale topographic mapping.  John did not care for such intricacies, and he mostly left such to me except for his private consulting work when he actually used my software.  The various versions of Transverse Mercator are indeed an excellent resource when the user needs to couple specific math models with specific Datums.
 
For large-scale stuff, I think separating the two is the way to go.  Let the user figure it out at the user's peril.  If the user is apprehensive about such decisions, there indeed are people in private practice that will recommend such decisions for a fee - most are associated with the "Oil Patch" since it does make a difference for them and their clinetle.
 
Cliff Mugnier
LSU
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090329/72998f8d/attachment.html>

From mfinn at usgs.gov  Mon Mar 30 14:47:55 2009
From: mfinn at usgs.gov (Michael P Finn)
Date: Mon, 30 Mar 2009 15:47:55 -0600
Subject: [Proj] datum matters
In-Reply-To: <FF3764338AF64FFBA51AE068967F989F@PowerSpec>
References: <ae9185aa0903281709l51eaea20v744b5ce5742921ae@mail.gmail.com>
	<FF3764338AF64FFBA51AE068967F989F@PowerSpec>
Message-ID: <OF1C33341C.D8793BDD-ON87257589.00778A04-87257589.0077C1A8@usgs.gov>

Nice summary.

The problem of semantics is always worse than the problem of computation.





From:
"Noel Zinn" <ndzinn at comcast.net>
To:
"'PROJ.4 and general Projections Discussions'" <proj at lists.maptools.org>
Date:
03/28/2009 07:25 PM
Subject:
Re: [Proj] datum matters
Sent by:
proj-bounces at lists.maptools.org



Interesting subject of surprising sensitivity.  Let me offer some
terminology that helps me parse the issue, with an acknowledgement of EPSG
for some of it.

Conversions are mathematically exact (within the quality of the algorithm
and machine precision) changes among coordinate systems (in the EPSG 
sense,
not the Richard Greenwood sense), for example, lat/lon to projected
Northing/Easting, or lat/lon to ECEF geocentric Cartesians. 

Transformations are changes in datums, what Richard calls coordinate
systems, a term that I have redefined above.  Transformations are always
inexact since the parameters are always empirically derived (measurements
have errors) and because datum relationships vary spatially and (probably)
temporally, for example, NAD27 lat/lon to WGS84 lat/lon, NGVD29 normal
orthometric heights to NAVD88 Helmert orthometric heights. 

Some of us prefer the mathematically purity (and entertainment) of
conversions and others prefer the dirty-fingernail (and remunerative) task
of quantifying relationships among real-world datums.  Courses for horses,
as they say in the UK. 

Now the EPSG (or maybe the ISO before them) have conflated these concepts
into the coordinate reference system (CRS), for example, Geographical CRS
for the lat/lon coordinate system of a particular datum, or Projected CRS
for a particular projection on a particular datum (what Richard calls a
coordinate system).  I am not convinced that this taxonomy is an advance
(agreeing with the recently departed), but I am so in awe of the enormous
compendium of useful, real-world information that this taxonomy supports
that I happily accept it as the de facto standard. 

Noel Zinn

PS - Shouldn't pj_transform() be pj_convert() if you accept the 
definitions
above?


-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Richard Greenwood
Sent: Saturday, March 28, 2009 7:10 PM
To: PROJ.4 and general Projections Discussions
Subject: [Proj] datum matters

I made a post to this list earlier this week that offended at least
one member of the list. I'll try here to clarify my position and
hopefully not start a flame war. I know that 90% of the subscribers to
this list have already forgotten more than I will ever know about
projections and datums, so please be tolerant of my simplistic
comments.

In this era we must think in terms coordinate systems, not just
projections, despite the name of the list and library. I'm using
"coordinate system" as a projection + datum, or lat/long + datum. To
tie a position to the earth you need both. Many users, both C
programmers incorporating the library in their own work, and end users
accessing the library thru the various OSGEO stack applications that
use the library, do not distinguish between a "projection" and a
"coordinate system".

Two subtle, but important, changes that I have noticed in the library
are: (1) No longer assuming a datum of WGS84 when either a source or
destination system lacks an explicit datum (2) depredicating pj_fwd()
and pj_inv() in favor of pj_transform(). These changes encourage users
to think in terms of the coordinate system as a whole and may keep
people out of trouble. Thanks to Frank or who ever deserves credit for
these changes.

-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090330/71515849/attachment.html>

From j.l.h.hartmann at uva.nl  Mon Mar 30 14:57:59 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon, 30 Mar 2009 23:57:59 +0200
Subject: [Proj] datum matters
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC2657@email002.lsu.edu>
References: <17B00F0B7B7847B6BFF30DC284C9F2C4@PowerSpec><80FC6532.6951.4E6E.8047.E11319D45D78@aol.com>	<975BC06540DF4512BA4644C0765F1CCD@PowerSpec>
	<B597ADFC46B67741B18EA6AA13613FF7EC2657@email002.lsu.edu>
Message-ID: <49D14067.1070109@uva.nl>

Agree wholeheartedly! Even Gerald Evenden would agree, I guess: separate 
projections from datums and you get a much clearer viewof the process. 
Pity he isn't on this list any more. Projections are about getting data 
from an ellipsoid on to a flat surface, datums are about translating and 
rotating the ellipsoid itself.  I completely agree with Cliff that the 
user should know what he/she is doing.

Jan

Dr. J. Hartmann
Department of Geography
University of Amsterdam

Clifford J Mugnier wrote:
> In regard to this thread, I shall offer my two cents' worth of opinions:
>  
> For Large scale mapping generally at 1:50,000 and larger, the 
> classical geodetic Datum is the primary consideration before delving 
> into cartographic projections of various flavors.  However, with such 
> considerations taken into account there are a very finite number of 
> mathematical models appropriate for use with any specific Datum.  
> Those models are generally specifically legislated by some political 
> body that has venue over that specific geographic region.  Since PROJ 
> does not "connect" specific Datums with specific mathematical models, 
> /e.g/., Rome 1940 with either a Gauss-Boaga Transverse Mercator 
> projection (East or West Zone), for a national system or a 
> Cassini-Soldner projection for a local cadastral system (some several 
> hundred currently exist), ... both being the ONLY appropriate 
> projections to be used with Rome 1940 ... the user needs to be 
> educated enough to know that a Krovak Oblique Conic is entirely 
> inappropriate to use with that Datum for that country.
>  
> What does that?  EPSG attempts to provide the guidance for the 
> appropriate mathematical models for the specific classical geodetic 
> Datums they list in their data base, /e.g./ the French Army Truncated 
> Cubic Lambert for some areas in North Africa.
>  
> I do not see PROJ doing that ... essentially it would be an attempt to 
> duplicate the EPSG contrivance.
>  
> Separation of true geodetic concerns from classical cartographic 
> applications seems to be a reasonable approach.  Remember, the late 
> John P. Snyder never attempted to write about the connections between 
> projections and Datums with respect to large scale topographic 
> mapping.  John did not care for such intricacies, and he mostly left 
> such to me except for his private consulting work when he actually 
> used my software.  The various versions of Transverse Mercator are 
> indeed an excellent resource when the user needs to couple specific 
> math models with specific Datums.
>  
> For large-scale stuff, I think separating the two is the way to go.  
> Let the user figure it out at the user's peril.  If the user is 
> apprehensive about such decisions, there indeed are people in private 
> practice that will recommend such decisions for a fee - most are 
> associated with the "Oil Patch" since it does make a difference for 
> them and their clinetle.
>  
> Cliff Mugnier
> LSU
> ------------------------------------------------------------------------
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090330/8724d0d1/attachment.html>

From peifer at gmx.eu  Tue Mar 31 09:22:26 2009
From: peifer at gmx.eu (Hermann Peifer)
Date: Tue, 31 Mar 2009 18:22:26 +0200
Subject: [Proj] ERROR 6: No translation for Double_Stereographic to PROJ.4
 format is known.
Message-ID: <gqtg0j$ui4$1@ger.gmane.org>

Hi,

I see that there is a Trac ticket related to some problems with the 
Double_Stereographic projection: http://trac.osgeo.org/gdal/ticket/2487

... but the problem seems to continue. Can this be fixed?

Hermann


ERROR 6: No translation for Double_Stereographic to PROJ.4 format is known.
Failed to create coordinate transformation between the
following coordinate systems.  This may be because they
are not transformable, or because projection services
(PROJ.4 DLL/.so) could not be loaded.
Source:
PROJCS["Stereo_70",
     GEOGCS["GCS_Dealul_Piscului_1970",
         DATUM["Dealul_Piscului_1970",
             SPHEROID["Krasovsky_1940",6378245.0,298.3]],
         PRIMEM["Greenwich",0.0],
         UNIT["Degree",0.0174532925199433]],
     PROJECTION["Double_Stereographic"],
     PARAMETER["False_Easting",500000.0],
     PARAMETER["False_Northing",500000.0],
     PARAMETER["Longitude_Of_Origin",25.0],
     PARAMETER["Scale_Factor",0.99975],
     PARAMETER["Latitude_Of_Origin",46.0],
     UNIT["Meter",1.0]]
Target:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.01745329251994328,
         AUTHORITY["EPSG","9122"]],
     AUTHORITY["EPSG","4326"]]





From warmerdam at pobox.com  Tue Mar 31 09:47:04 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 31 Mar 2009 12:47:04 -0400
Subject: [Proj] ERROR 6: No translation for Double_Stereographic to
 PROJ.4 format is known.
In-Reply-To: <gqtg0j$ui4$1@ger.gmane.org>
References: <gqtg0j$ui4$1@ger.gmane.org>
Message-ID: <49D24908.1060202@pobox.com>

Hermann Peifer wrote:
> Hi,
> 
> I see that there is a Trac ticket related to some problems with the 
> Double_Stereographic projection: http://trac.osgeo.org/gdal/ticket/2487
> 
> ... but the problem seems to continue. Can this be fixed?

Hermann,

As far as I know we are still in the same situation where Double Stereographic
is not supported by PROJ.4.   I don't know how to resolve this.  We really
need someone like Gerald to implement the underlying projection formulas.  :-)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ovv at hetnet.nl  Tue Mar 31 11:14:40 2009
From: ovv at hetnet.nl (OvV_HN)
Date: Tue, 31 Mar 2009 20:14:40 +0200
Subject: [Proj] ERROR 6: No translation for Double_Stereographic to
	PROJ.4 format is known.
In-Reply-To: <49D24908.1060202@pobox.com>
References: <gqtg0j$ui4$1@ger.gmane.org> <49D24908.1060202@pobox.com>
Message-ID: <495743997A4F45069F44D4DC788DF50B@PCHP>

I don't get it. I always thought the existing PROJ (and libproj) function 
sterea was a full implementation of the double stereographic projection, 
suited for Dutch RD, New Brunswick / Prince Edward Island stereo and 
Romanian Stereo 70.

Oscar van Vlijmen


----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam at pobox.com>
To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
Sent: Tuesday, March 31, 2009 6:47 PM
Subject: Re: [Proj] ERROR 6: No translation for Double_Stereographic to 
PROJ.4 format is known.


> Hermann Peifer wrote:
>> Hi,
>>
>> I see that there is a Trac ticket related to some problems with the
>> Double_Stereographic projection: http://trac.osgeo.org/gdal/ticket/2487
>>
>> ... but the problem seems to continue. Can this be fixed?
>
> Hermann,
>
> As far as I know we are still in the same situation where Double 
> Stereographic
> is not supported by PROJ.4.   I don't know how to resolve this.  We really
> need someone like Gerald to implement the underlying projection formulas. 
> :-)
>
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 




From warmerdam at pobox.com  Tue Mar 31 12:27:09 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 31 Mar 2009 15:27:09 -0400
Subject: [Proj] ERROR 6: No translation for Double_Stereographic to
 PROJ.4 format is known.
In-Reply-To: <495743997A4F45069F44D4DC788DF50B@PCHP>
References: <gqtg0j$ui4$1@ger.gmane.org> <49D24908.1060202@pobox.com>
	<495743997A4F45069F44D4DC788DF50B@PCHP>
Message-ID: <49D26E8D.3040507@pobox.com>

OvV_HN wrote:
> I don't get it. I always thought the existing PROJ (and libproj) function 
> sterea was a full implementation of the double stereographic projection, 
> suited for Dutch RD, New Brunswick / Prince Edward Island stereo and 
> Romanian Stereo 70.

Oscar,

Well, that is possible.  Is someone willing to do some leg work confirming
if that is the case, and documenting the correct formulation of the
coordinate systems described in http://trac.osgeo.org/gdal/ticket/2487
for PROJ.4?  Some sample test points would also be helpful.  Given that
I would be happy to update GDAL to support double stereographic and
update some other resources.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From fluyoz at hotmail.com  Tue Mar 31 14:11:15 2009
From: fluyoz at hotmail.com (Fernando Javier Luyo Zegarra)
Date: Tue, 31 Mar 2009 16:11:15 -0500
Subject: [Proj] =?windows-1256?q?Error_during_the_coordinate_transformatio?=
 =?windows-1256?q?n=FE?=
In-Reply-To: <49D26E8D.3040507@pobox.com>
References: <gqtg0j$ui4$1@ger.gmane.org> <49D24908.1060202@pobox.com>
	<495743997A4F45069F44D4DC788DF50B@PCHP> <49D26E8D.3040507@pobox.com> 
Message-ID: <BLU107-W1B8D05BE9B89A0D52C569DC8A0@phx.gbl>









Hello,

I'm developed a routine for transforming coordinates of
points which are in PSAD56 Zone 18S (srid = 24878) to Wgs84 Zone 18s
(srid = 32718)

The items are stored in the fields "geom" the table "MyTable" (srid = 24878).

To perform the operation using the following syntax:


       select Transform (geom, 32718) from MyTable


Reviewing the results found that there is an error:


Example:

Point in Psad56 Zn 18s

        X = 264365.2955 Y = 8665287.3660 Z = 0.0000

The result of the transformation is:

        X = 264366.1196 Y = 8665292.17 Z = 0.0000

However, the same point in cartografia WGS84 Zone 18S has the following coordinates:

        X = 264143.0640 Y = 8664919.0231 Z = 0.0000

Apparently the SRID of the parameters are not properly used or applied incorrectly the function Transform ()

While waiting for your help


Fernando Luyo
pd: Sorry for my bad English

**************************************************

Hola

Estoy
elaborando una rutina para transformar coordenadas de puntos que estan
en PSAD56 Zona 18S (srid=24878) a Wgs84 Zona 18s (srid=32718)

Los puntos estan almacenados en el campo "geom" de la tabla "MyTable" (srid=24878).


Para realizar la operacion estoy usando la siguiente sintaxis:


select Transform(geom,32718) from MyTable

Al revisar los resultados encontre que hay un error :

Ejemplo : 

Punto en Psad56 Zn 18s

X = 264365.2955     Y = 8665287.3660     Z = 0.0000

El resultado de la transformacion es: 

X = 264366.1196     Y = 8665292.17       Z = 0.0000

Sin embargo, el mismo punto en cartografia en WGS84 Zona 18S tiene las siguientes coordenadas:

X = 264143.0640     Y = 8664919.0231     Z = 0.0000

Al parecer los parametros de los SRID usado no estan correctos o estoy aplicando mal la funcion Transform()

A la espera de su ayuda

saludos

Fernando Luyo

**************************************************



_________________________________________________________________
Discover the new Windows Vista
http://search.msn.com/results.aspx?q=windows+vista&mkt=en-US&form=QBRE
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090331/375fc197/attachment.html>

From cjmce at lsu.edu  Tue Mar 31 14:17:29 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 31 Mar 2009 16:17:29 -0500
Subject: [Proj] Error during the coordinate transformation?
References: <gqtg0j$ui4$1@ger.gmane.org> <49D24908.1060202@pobox.com>
	<495743997A4F45069F44D4DC788DF50B@PCHP>
	<49D26E8D.3040507@pobox.com>
	<BLU107-W1B8D05BE9B89A0D52C569DC8A0@phx.gbl>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2664@email002.lsu.edu>

Dear Fernando:
 
What country is this, and what parameters did you use.  I suspect you're in Venezuela ... please confirm.
 
Estan usted en la Republica de Venezuela?  Esta verdad?
 
C. Mugnier
Louisiana State University

________________________________

From: proj-bounces at lists.maptools.org on behalf of Fernando Javier Luyo Zegarra
Sent: Tue 31-Mar-09 16:11
To: proj at lists.maptools.org
Subject: [Proj] Error during the coordinate transformation?



Hello,

I'm developed a routine for transforming coordinates of points which are in PSAD56 Zone 18S (srid = 24878) to Wgs84 Zone 18s (srid = 32718)

The items are stored in the fields "geom" the table "MyTable" (srid = 24878).

To perform the operation using the following syntax:


       select Transform (geom, 32718) from MyTable


Reviewing the results found that there is an error:


Example:

Point in Psad56 Zn 18s

        X = 264365.2955 Y = 8665287.3660 Z = 0.0000

The result of the transformation is:

        X = 264366.1196 Y = 8665292.17 Z = 0.0000

However, the same point in cartografia WGS84 Zone 18S has the following coordinates:

        X = 264143.0640 Y = 8664919.0231 Z = 0.0000

Apparently the SRID of the parameters are not properly used or applied incorrectly the function Transform ()

While waiting for your help


Fernando Luyo
pd: Sorry for my bad English
**************************************************

Hola

Estoy elaborando una rutina para transformar coordenadas de puntos que estan en PSAD56 Zona 18S (srid=24878) a Wgs84 Zona 18s (srid=32718)

Los puntos estan almacenados en el campo "geom" de la tabla "MyTable" (srid=24878).


Para realizar la operacion estoy usando la siguiente sintaxis:


select Transform(geom,32718) from MyTable

Al revisar los resultados encontre que hay un error :

Ejemplo : 

Punto en Psad56 Zn 18s

X = 264365.2955     Y = 8665287.3660     Z = 0.0000

El resultado de la transformacion es: 

X = 264366.1196     Y = 8665292.17       Z = 0.0000

Sin embargo, el mismo punto en cartografia en WGS84 Zona 18S tiene las siguientes coordenadas:

X = 264143.0640     Y = 8664919.0231     Z = 0.0000

Al parecer los parametros de los SRID usado no estan correctos o estoy aplicando mal la funcion Transform()

A la espera de su ayuda< br>
saludos

Fernando Luyo

**************************************************




________________________________

Discover the new Windows Vista Learn more! <http://search.msn.com/results.aspx?q=windows+vista&mkt=en-US&form=QBRE>  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090331/51a42956/attachment.html>

From warmerdam at pobox.com  Tue Mar 31 14:21:11 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 31 Mar 2009 17:21:11 -0400
Subject: [Proj]
 =?windows-1256?q?Error_during_the_coordinate_transformatio?=
 =?windows-1256?q?n=FE?=
In-Reply-To: <BLU107-W1B8D05BE9B89A0D52C569DC8A0@phx.gbl>
References: <gqtg0j$ui4$1@ger.gmane.org> <49D24908.1060202@pobox.com>
	<495743997A4F45069F44D4DC788DF50B@PCHP> <49D26E8D.3040507@pobox.com>
	<BLU107-W1B8D05BE9B89A0D52C569DC8A0@phx.gbl>
Message-ID: <49D28947.3060305@pobox.com>

Fernando Javier Luyo Zegarra wrote:
> 
> Hello,
> 
> I'm developed a routine for transforming coordinates of points which are 
> in PSAD56 Zone 18S (srid = 24878) to Wgs84 Zone 18s (srid = 32718)
> 
> The items are stored in the fields "geom" the table "MyTable" (srid = 
> 24878).
> 
> To perform the operation using the following syntax:
> 
> 
>        select Transform (geom, 32718) from MyTable
> 
> 
> Reviewing the results found that there is an error:
> 
> 
> Example:
> 
> Point in Psad56 Zn 18s
> 
>         X = 264365.2955 Y = 8665287.3660 Z = 0.0000
> 
> The result of the transformation is:
> 
>         X = 264366.1196 Y = 8665292.17 Z = 0.0000
> 
> However, the same point in cartografia WGS84 Zone 18S has the following 
> coordinates:
> 
>         X = 264143.0640 Y = 8664919.0231 Z = 0.0000
> 
> Apparently the SRID of the parameters are not properly used or applied 
> incorrectly the function Transform ()

Fernando,

I would encourage you to determine what PROJ.4 init strings are associated
with 32718 and 24878.  It looks like there is a missing or incorrect datum
shift being applied.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



