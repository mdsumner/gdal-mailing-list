From jmace at benchmarkrs.com  Tue May  1 09:08:54 2007
From: jmace at benchmarkrs.com (Jim Mace)
Date: Tue, 1 May 2007 09:08:54 -0700
Subject: [Proj] Creating ShapeFiles
Message-ID: <00df01c78c0b$04983000$6601a8c0@jim>

Is there a Windows API for creating shapedfiles out there somewhere in open
source?  If not, is there a commercial one that will not break the bank
like, say, ArcObjects and/or other ESRI products?

Jim

-- 
I am using the free version of SPAMfighter for private users.
It has removed 13307 spam emails to date.
Paying users do not have this message in their emails.
Get the free SPAMfighter here: http://www.spamfighter.com/len



From ed at topozone.com  Tue May  1 09:25:39 2007
From: ed at topozone.com (Ed McNierney)
Date: Tue, 01 May 2007 12:25:39 -0400
Subject: [Proj] Creating ShapeFiles
In-Reply-To: <00df01c78c0b$04983000$6601a8c0@jim>
Message-ID: <C25CE243.28E42%ed@topozone.com>

Please look at Shapelib, at http://shapelib.maptools.org/

(or, http://www.google.com/search?q=Windows+shapefile+API ;-)

    - Ed

-- 
Ed McNierney
President and Chief Mapmaker
Maps a la carte, Inc. / TopoZone.com
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242
Fax: (978) 251-1396
ed at topozone.com

> From: Jim Mace <jmace at benchmarkrs.com>
> Organization: Benchmark Research & Safety Inc.
> Reply-To: <jmace at benchmarkrs.com>, "PROJ.4 and general Projections
> Discussions" <proj at lists.maptools.org>
> Date: Tue, 1 May 2007 09:08:54 -0700
> To: <proj at lists.maptools.org>
> Subject: [Proj] Creating ShapeFiles
> 
> Is there a Windows API for creating shapedfiles out there somewhere in open
> source?  If not, is there a commercial one that will not break the bank
> like, say, ArcObjects and/or other ESRI products?
> 
> Jim
> 
> -- 
> I am using the free version of SPAMfighter for private users.
> It has removed 13307 spam emails to date.
> Paying users do not have this message in their emails.
> Get the free SPAMfighter here: http://www.spamfighter.com/len
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From MChapman at sanz.com  Tue May  1 09:27:06 2007
From: MChapman at sanz.com (Chapman, Martin)
Date: Tue, 1 May 2007 10:27:06 -0600
Subject: [Proj] Creating ShapeFiles
In-Reply-To: <00df01c78c0b$04983000$6601a8c0@jim>
References: <00df01c78c0b$04983000$6601a8c0@jim>
Message-ID: <ED3A48B9840E594890A2BC172D1194650BB5902C@mailman.san.com>

Jim,

See http://www.gdal.org/ogr/ .  Follow the build instructions at
http://trac.osgeo.org/gdal/wiki/BuildHints


Martin Chapman
SANZ Inc.
Software Developer
http://www.earthwhere.com
W - 303.495.6326
C  - 303.898.0397
-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Jim Mace
Sent: Tuesday, May 01, 2007 10:09 AM
To: proj at lists.maptools.org
Subject: [Proj] Creating ShapeFiles

Is there a Windows API for creating shapedfiles out there somewhere in
open
source?  If not, is there a commercial one that will not break the bank
like, say, ArcObjects and/or other ESRI products?

Jim

-- 
I am using the free version of SPAMfighter for private users.
It has removed 13307 spam emails to date.
Paying users do not have this message in their emails.
Get the free SPAMfighter here: http://www.spamfighter.com/len

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From ealpert at digitalglobe.com  Tue May  1 09:27:57 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Tue, 1 May 2007 10:27:57 -0600
Subject: [Proj] Creating ShapeFiles
In-Reply-To: <00df01c78c0b$04983000$6601a8c0@jim>
References: <00df01c78c0b$04983000$6601a8c0@jim>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23301135933@COMAIL01.digitalglobe.com>


Have you checked out FWTools?

http://fwtools.maptools.org/

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Jim Mace
Sent: Tuesday, May 01, 2007 10:09 AM
To: proj at lists.maptools.org
Subject: [Proj] Creating ShapeFiles

Is there a Windows API for creating shapedfiles out there somewhere in
open
source?  If not, is there a commercial one that will not break the bank
like, say, ArcObjects and/or other ESRI products?

Jim

-- 
I am using the free version of SPAMfighter for private users.
It has removed 13307 spam emails to date.
Paying users do not have this message in their emails.
Get the free SPAMfighter here: http://www.spamfighter.com/len

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From mfinn at usgs.gov  Tue May  1 14:01:22 2007
From: mfinn at usgs.gov (Michael P Finn)
Date: Tue, 1 May 2007 16:01:22 -0500
Subject: [Proj] Michael P Finn of the USGS/ National Geospatial Technical
 Operations Center is out of the office.
Message-ID: <OF0D4FC11A.4809E9AA-ON862572CE.00737B81-862572CE.00737B81@usgs.gov>


I will be out of the office starting  04/28/2007 and will not return until
05/07/2007.

I will be unable to check e-mail regularly while I am out. If I can't
respond to your message while I am out, then I will when I return. If you
have anything that cannot wait, please contact my colleague, Mr. Ryanne
Dolan, at rdolan at usgs.gov.     Mike



From bkr at devonor.com  Fri May  4 06:51:40 2007
From: bkr at devonor.com (=?iso-8859-15?Q?Bj=F8rn_Krangnes?=)
Date: Fri, 4 May 2007 15:51:40 +0200 (CEST)
Subject: [Proj] GDM2000 for Malaysia
Message-ID: <60150.80.203.142.177.1178286700.squirrel@webmail2.uniweb.no>

I am trying convert GDM2000 &#8211; MRSO (Peninsular)
I am using C# and GDAL
The code look as follows

            stat3 = input.ImportFromProj4("+proj=longlat +ellps=GRS80
+no_defs  <>");
            stat4 = output.ImportFromProj4("+proj=omerc +lat_0=4
+lonc=102.25 +alpha=323.0257964666666 +k=0.99984 +x_0=804671
+y_0=0 +ellps=GRS80 +units=m +no_defs  <>");
            xyz[0] = 1.827764875;
            xyz[1] = 103.64025987222223;
            xyz[2] = 10.0;
            OGR.CoordinateTransformation tram = new
OGR.CoordinateTransformation(input, output);
            tram.TransformPoint(xyz);
The result I am getting is : 0.0319005150210526
            xyz[0] = 0.0319005150210526;
            xyz[1] = 1.8088637723928358;
            xyz[2] = 10.0;

The expected result is :

Easting =   627096.132 m
Northing = 202122.062 m

Anyone who knows what the problem is ?

Bjørn Krangnes
Devonor AS
Telephone: +47 32 29 96 90
Direct Line: +47 32 29 96 91
Mobile: +47 45035640
E-mail: bkr at devonor.com
Web: www.devonor.com




From warmerdam at pobox.com  Fri May  4 16:01:18 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 4 May 2007 19:01:18 -0400
Subject: [Proj] GDM2000 for Malaysia
In-Reply-To: <60150.80.203.142.177.1178286700.squirrel@webmail2.uniweb.no>
References: <60150.80.203.142.177.1178286700.squirrel@webmail2.uniweb.no>
Message-ID: <931f8ea90705041601n5a344bc6hdc57d4726c7d12d3@mail.gmail.com>

On 5/4/07, Bjørn Krangnes <bkr at devonor.com> wrote:
> I am trying convert GDM2000 &#8211; MRSO (Peninsular)
> I am using C# and GDAL
> The code look as follows
>
>             stat3 = input.ImportFromProj4("+proj=longlat +ellps=GRS80
> +no_defs  <>");
>             stat4 = output.ImportFromProj4("+proj=omerc +lat_0=4
> +lonc=102.25 +alpha=323.0257964666666 +k=0.99984 +x_0=804671
> +y_0=0 +ellps=GRS80 +units=m +no_defs  <>");
>             xyz[0] = 1.827764875;
>             xyz[1] = 103.64025987222223;
>             xyz[2] = 10.0;
>             OGR.CoordinateTransformation tram = new
> OGR.CoordinateTransformation(input, output);
>             tram.TransformPoint(xyz);
> The result I am getting is : 0.0319005150210526
>             xyz[0] = 0.0319005150210526;
>             xyz[1] = 1.8088637723928358;
>             xyz[2] = 10.0;
>
> The expected result is :
>
> Easting =   627096.132 m
> Northing = 202122.062 m
>
> Anyone who knows what the problem is ?

Bjorn,

Do you check the return result from TransformPoint().  My guess would
be that the code is giving up at some point in the transformtion in which
case it should be returning an error code. Possibly it fails just after
converting the values in degrees to radians?

I tried something close to this with cs2cs before realizing that the
core error is that you are presumably mixing up x and y.  The
xyz[0] should be x or longitude, and xyz[1] should y or latitude.
A latitude of 103 is out of bounds (-90 to 90) so the transformation
terminates.  Unfortunately, when I switch things, I don't get a value
very close to what you are expecting though at least it does produce
a value.

warmerda at iBook% cs2cs +proj=longlat +ellps=GRS80 +to +proj=omerc
+lat_0=4 +lonc=102.25 +alpha=323.02579 +k=0.99984 +x_0=804671
+ellps=GRS80
1.8 103
*       * 0.00
103 1.8
888148.42       -243199.56 0.00

Perhaps this helps a little?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From bkr at devonor.com  Sat May  5 07:08:02 2007
From: bkr at devonor.com (=?iso-8859-15?Q?Bj=F8rn_Krangnes?=)
Date: Sat, 5 May 2007 16:08:02 +0200 (CEST)
Subject: [Proj] GDM2000 for Malaysia
In-Reply-To: <931f8ea90705041601n5a344bc6hdc57d4726c7d12d3@mail.gmail.com>
References: <60150.80.203.142.177.1178286700.squirrel@webmail2.uniweb.no>
	<931f8ea90705041601n5a344bc6hdc57d4726c7d12d3@mail.gmail.com>
Message-ID: <1928.82.146.82.19.1178374082.squirrel@webmail2.uniweb.no>

Hi,
TransformPoint() is a public void function (TransformPoint(double[]
inout)) and give no return value.
You were right I have mixed x and y and by using 103 and 1.8 I am getting
same result as you 888148.415 and -243199.561.
This is far from the expected result. Any idea what could be wrong ...

Regards
Bjørn


> On 5/4/07, Bjørn Krangnes <bkr at devonor.com> wrote:
>> I am trying convert GDM2000 &#8211; MRSO (Peninsular)
>> I am using C# and GDAL
>> The code look as follows
>>
>>             stat3 = input.ImportFromProj4("+proj=longlat +ellps=GRS80
>> +no_defs  <>");
>>             stat4 = output.ImportFromProj4("+proj=omerc +lat_0=4
>> +lonc=102.25 +alpha=323.0257964666666 +k=0.99984 +x_0=804671
>> +y_0=0 +ellps=GRS80 +units=m +no_defs  <>");
>>             xyz[0] = 1.827764875;
>>             xyz[1] = 103.64025987222223;
>>             xyz[2] = 10.0;
>>             OGR.CoordinateTransformation tram = new
>> OGR.CoordinateTransformation(input, output);
>>             tram.TransformPoint(xyz);
>> The result I am getting is : 0.0319005150210526
>>             xyz[0] = 0.0319005150210526;
>>             xyz[1] = 1.8088637723928358;
>>             xyz[2] = 10.0;
>>
>> The expected result is :
>>
>> Easting =   627096.132 m
>> Northing = 202122.062 m
>>
>> Anyone who knows what the problem is ?
>
> Bjorn,
>
> Do you check the return result from TransformPoint().  My guess would
> be that the code is giving up at some point in the transformtion in which
> case it should be returning an error code. Possibly it fails just after
> converting the values in degrees to radians?
>
> I tried something close to this with cs2cs before realizing that the
> core error is that you are presumably mixing up x and y.  The
> xyz[0] should be x or longitude, and xyz[1] should y or latitude.
> A latitude of 103 is out of bounds (-90 to 90) so the transformation
> terminates.  Unfortunately, when I switch things, I don't get a value
> very close to what you are expecting though at least it does produce
> a value.
>
> warmerda at iBook% cs2cs +proj=longlat +ellps=GRS80 +to +proj=omerc
> +lat_0=4 +lonc=102.25 +alpha=323.02579 +k=0.99984 +x_0=804671
> +ellps=GRS80
> 1.8 103
> *       * 0.00
> 103 1.8
> 888148.42       -243199.56 0.00
>
> Perhaps this helps a little?
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


Bjørn Krangnes
Devonor AS
Telephone: +47 32 29 96 90
Direct Line: +47 32 29 96 91
Mobile: +47 45035640
E-mail: bkr at devonor.com
Web: www.devonor.com




From ovv at hetnet.nl  Mon May  7 01:41:24 2007
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Mon, 07 May 2007 10:41:24 +0200
Subject: [Proj] GDM2000 for Malaysia
In-Reply-To: <60150.80.203.142.177.1178286700.squirrel@webmail2.uniweb.no>
Message-ID: <C264B2D4.C07D%ovv@hetnet.nl>

> From: Bjørn Krangnes
> Date: Fri, 4 May 2007 15:51:40 +0200 (CEST)
> Subject: [Proj] GDM2000 for Malaysia
> 
> I am trying convert GDM2000 &#8211; MRSO (Peninsular)
> I am using C# and GDAL
> The code look as follows
> 
> stat3 = input.ImportFromProj4("+proj=longlat +ellps=GRS80
> +no_defs  <>");
> stat4 = output.ImportFromProj4("+proj=omerc +lat_0=4
> +lonc=102.25 +alpha=323.0257964666666 +k=0.99984 +x_0=804671
> +y_0=0 +ellps=GRS80 +units=m +no_defs  <>");
> xyz[0] = 1.827764875;
> xyz[1] = 103.64025987222223;
> xyz[2] = 10.0;
.....

> The expected result is :
> Easting =   627096.132 m
> Northing = 202122.062 m
> 
> Anyone who knows what the problem is ?

Yep. There really should be some tutorial, at least for the oblique mercator
and some stereographic projections, since the same questions are put time
after time again.
Your PROJ string is not complete. The correct results could emerge if you
add the options no_uoff rot_conv.
See also the entry <malay> in the /nad/world file in the PROJ distribution.
With my stuff I get 627096.13171, 202122.06248 m.





From bkr at devonor.com  Mon May  7 04:32:31 2007
From: bkr at devonor.com (=?iso-8859-15?Q?Bj=F8rn_Krangnes?=)
Date: Mon, 7 May 2007 13:32:31 +0200 (CEST)
Subject: [Proj] GDM2000 for Malaysia
In-Reply-To: <C264B2D4.C07D%ovv@hetnet.nl>
References: <60150.80.203.142.177.1178286700.squirrel@webmail2.uniweb.no>
	<C264B2D4.C07D%ovv@hetnet.nl>
Message-ID: <62800.80.203.142.177.1178537551.squirrel@webmail2.uniweb.no>

I have modified my proj string and looks as follows:
            stat3 = input.ImportFromProj4("+proj=longlat +ellps=GRS80
+no_defs  <>");
            stat4 = output.ImportFromProj4("+proj=omerc +lat_0=4
+lonc=102.25 +alpha=323.0257964666666 +k=0.99984 +x_0=804671
+y_0=0 +ellps=GRS80 +units=m +no_uoff +rot_conv +no_defs 
<>");

The result I get is 959373.969 and -240050.800 which again is far off.
What am I doing doing wrong or missing ....

>> From: Bjørn Krangnes
>> Date: Fri, 4 May 2007 15:51:40 +0200 (CEST)
>> Subject: [Proj] GDM2000 for Malaysia
>>
>> I am trying convert GDM2000 &#8211; MRSO (Peninsular)
>> I am using C# and GDAL
>> The code look as follows
>>
>> stat3 = input.ImportFromProj4("+proj=longlat +ellps=GRS80
>> +no_defs  <>");
>> stat4 = output.ImportFromProj4("+proj=omerc +lat_0=4
>> +lonc=102.25 +alpha=323.0257964666666 +k=0.99984 +x_0=804671
>> +y_0=0 +ellps=GRS80 +units=m +no_defs  <>");
>> xyz[0] = 1.827764875;
>> xyz[1] = 103.64025987222223;
>> xyz[2] = 10.0;
> .....
>
>> The expected result is :
>> Easting =   627096.132 m
>> Northing = 202122.062 m
>>
>> Anyone who knows what the problem is ?
>
> Yep. There really should be some tutorial, at least for the oblique
> mercator
> and some stereographic projections, since the same questions are put time
> after time again.
> Your PROJ string is not complete. The correct results could emerge if you
> add the options no_uoff rot_conv.
> See also the entry <malay> in the /nad/world file in the PROJ
> distribution.
> With my stuff I get 627096.13171, 202122.06248 m.
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


Bjørn Krangnes
Devonor AS
Telephone: +47 32 29 96 90
Direct Line: +47 32 29 96 91
Mobile: +47 45035640
E-mail: bkr at devonor.com
Web: www.devonor.com




From ovv at hetnet.nl  Mon May  7 06:15:01 2007
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Mon, 07 May 2007 15:15:01 +0200
Subject: [Proj] GDM2000 for Malaysia
In-Reply-To: <62800.80.203.142.177.1178537551.squirrel@webmail2.uniweb.no>
Message-ID: <C264F2F5.C089%ovv@hetnet.nl>

> From: Bjørn Krangnes
> Date: Mon, 7 May 2007 13:32:31 +0200 (CEST)
> Subject: Re: [Proj] GDM2000 for Malaysia
> 
> I have modified my proj string and looks as follows:
> stat3 = input.ImportFromProj4("+proj=longlat +ellps=GRS80
> +no_defs  <>");
> stat4 = output.ImportFromProj4("+proj=omerc +lat_0=4
> +lonc=102.25 +alpha=323.0257964666666 +k=0.99984 +x_0=804671
> +y_0=0 +ellps=GRS80 +units=m +no_uoff +rot_conv +no_defs
> <>");
> 
> The result I get is 959373.969 and -240050.800 which again is far off.
> What am I doing doing wrong or missing ....
> 

I can reproduce your results exactly by assuming that no_uoff and rot_conv
do not work. So, by calculating a normal oblique mercator, where the
software calculates the gamma from alpha.
Your problem seems to be not PROJ related?





From bkr at devonor.com  Tue May  8 00:35:24 2007
From: bkr at devonor.com (=?iso-8859-15?Q?Bj=F8rn_Krangnes?=)
Date: Tue, 8 May 2007 09:35:24 +0200 (CEST)
Subject: [Proj] GDM2000 for Malaysia
In-Reply-To: <C264F2F5.C089%ovv@hetnet.nl>
References: <62800.80.203.142.177.1178537551.squirrel@webmail2.uniweb.no>
	<C264F2F5.C089%ovv@hetnet.nl>
Message-ID: <65340.80.203.142.177.1178609724.squirrel@webmail2.uniweb.no>

I am using GDAL 1.4.0 and C#.
I am getting other coordinate transformations to work.
The TransformPoint function returns no status (void function).
You are saying that my proj strings are ok.

How should I proceed to sort out my problem ...

>> From: Bjørn Krangnes
>> Date: Mon, 7 May 2007 13:32:31 +0200 (CEST)
>> Subject: Re: [Proj] GDM2000 for Malaysia
>>
>> I have modified my proj string and looks as follows:
>> stat3 = input.ImportFromProj4("+proj=longlat +ellps=GRS80
>> +no_defs  <>");
>> stat4 = output.ImportFromProj4("+proj=omerc +lat_0=4
>> +lonc=102.25 +alpha=323.0257964666666 +k=0.99984 +x_0=804671
>> +y_0=0 +ellps=GRS80 +units=m +no_uoff +rot_conv +no_defs
>> <>");
>>
>> The result I get is 959373.969 and -240050.800 which again is far off.
>> What am I doing doing wrong or missing ....
>>
>
> I can reproduce your results exactly by assuming that no_uoff and rot_conv
> do not work. So, by calculating a normal oblique mercator, where the
> software calculates the gamma from alpha.
> Your problem seems to be not PROJ related?
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


Bjørn Krangnes
Devonor AS
Telephone: +47 32 29 96 90
Direct Line: +47 32 29 96 91
Mobile: +47 45035640
E-mail: bkr at devonor.com
Web: www.devonor.com




From warmerdam at pobox.com  Tue May  8 07:05:29 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 08 May 2007 10:05:29 -0400
Subject: [Proj] GDM2000 for Malaysia
In-Reply-To: <65340.80.203.142.177.1178609724.squirrel@webmail2.uniweb.no>
References: <62800.80.203.142.177.1178537551.squirrel@webmail2.uniweb.no>
	<C264F2F5.C089%ovv@hetnet.nl>
	<65340.80.203.142.177.1178609724.squirrel@webmail2.uniweb.no>
Message-ID: <464083A9.3010709@pobox.com>

Bjørn Krangnes wrote:
> I am using GDAL 1.4.0 and C#.
> I am getting other coordinate transformations to work.
> The TransformPoint function returns no status (void function).
> You are saying that my proj strings are ok.
> 
> How should I proceed to sort out my problem ...

Bjørn,

First, it does not appear the problem is related to GDAL or C# since
people get the same results with cs2cs which is a much more direct
connection to the proj libraries.  So I think you can focus here on
why you get the wrong results from cs2cs.

You have posted the issue here, and clearly at least a couple people
have looked at it quickly with no obvious solution.

I can see two further steps:

  o You can dig up papers on the coordinate system in question and try to
    understand the parameters better and see if you can come up with a
    better PROJ.4 string to represent the parameters.  Possibly this would
    invole comparing how this projections works in other systems.

  o You could attempt to commercially engage someone to help you with the
    problem.  Possibly you could interest Gerald in the issue with some
    inducement.  I might be willing to take a crack at it on a
    no-risk-if-I-fail basis.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org



From warmerdam at pobox.com  Tue May  8 07:09:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 08 May 2007 10:09:56 -0400
Subject: [Proj] PROJ.4 Consultants
Message-ID: <464084B4.6000209@pobox.com>

Folks,

Related to my last email, I'd like to encourage folks on this list who
are interested in providing commercial support for PROJ.4 to consider
signing up on the OSGeo Service Provider Directory.  It is a directory
of service providers and consultants willing to provide support for a
variety of open source geospatial technologies - PROJ.4 amoung them.

Some details are available at:

   http://www.osgeo.org/spd_help

Select (at least) the PROJ.4 technology in the technology list when
setting up your profile.

I am doubtful there is a lot of commercial work to be had in this realm, but
at least this provides an organization mechanism to register availability.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org



From theconor at yahoo.com  Thu May 10 15:45:29 2007
From: theconor at yahoo.com (Conor O'Donoghue)
Date: Thu, 10 May 2007 15:45:29 -0700 (PDT)
Subject: [Proj] FW Tools 1.2.2 beginner
Message-ID: <162973.61135.qm@web31802.mail.mud.yahoo.com>

I have just installed FW tools 1.2.2 (successfully, I
believe)but I am do not know how to proceed.

Two Questions
1) I need help with choosing the most appropriate
utilitiy (GDAL or Proj for example). My objective is
to forward re-project, or warp, tiff's (vector files
later). I have no need to use the functionality with
another program, so i think the command line should be
fine.

2) I need some guidance in getting started. I have
read much of Gerald L. Evenden's Proj.4 User's manuals
and i believe i can manage the command line syntax.
Since I have no programming knowledge and can only
limp around in DOS I am not sure how to get the
command line working in the dos shell. (For example,
when in the FWTools1.2.2 or proj_lib directories when
I type "$ proj" I get '$' is not recognized as an
internal or external command, operable program or
batch file.) in that case i am not invoking the
proj.exe. 
Where could i get guidance on getting started with the
reccomended utility.
Apologies for such an entry level question

Conor o'Donoghue


From warmerdam at pobox.com  Thu May 10 16:04:01 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 10 May 2007 19:04:01 -0400
Subject: [Proj] FW Tools 1.2.2 beginner
In-Reply-To: <162973.61135.qm@web31802.mail.mud.yahoo.com>
References: <162973.61135.qm@web31802.mail.mud.yahoo.com>
Message-ID: <4643A4E1.40900@pobox.com>

Conor O'Donoghue wrote:
> I have just installed FW tools 1.2.2 (successfully, I
> believe)but I am do not know how to proceed.
> 
> Two Questions
> 1) I need help with choosing the most appropriate
> utilitiy (GDAL or Proj for example). My objective is
> to forward re-project, or warp, tiff's (vector files
> later). I have no need to use the functionality with
> another program, so i think the command line should be
> fine.

Conor,

Generally speaking you would use gdalwarp to warp a raster
image.   For instance if you have a geotiff currently samples
on a WGS84 grid, and you wanted to reproject it to UTM 11 WGS84
you might do:

gdalwarp -s_srs '+proj=latlong +datum=WGS84' \
   -t_srs '+proj=utm +zone=11 +datum=WGS84' in.tif out.tif

> 2) I need some guidance in getting started. I have
> read much of Gerald L. Evenden's Proj.4 User's manuals
> and i believe i can manage the command line syntax.
> Since I have no programming knowledge and can only
> limp around in DOS I am not sure how to get the
> command line working in the dos shell. (For example,
> when in the FWTools1.2.2 or proj_lib directories when
> I type "$ proj" I get '$' is not recognized as an
> internal or external command, operable program or
> batch file.) in that case i am not invoking the
> proj.exe. 

The "$" is the command prompt in some examples.  Don't actually
type it in.  Likewise if you see commands prefixed by C:\> or
% it is likely the same thing.

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org



From theconor at yahoo.com  Thu May 10 17:02:53 2007
From: theconor at yahoo.com (Conor O'Donoghue)
Date: Thu, 10 May 2007 17:02:53 -0700 (PDT)
Subject: [Proj] FW Tools 1.2.2 beginner
In-Reply-To: <4643A4E1.40900@pobox.com>
Message-ID: <387213.44536.qm@web31806.mail.mud.yahoo.com>

Frank,
Thanks for the quick reply.

Based on your replies I should be able to get started
with using GDALwarp and am happy to do so. 

However, before I start I would like to be
clearer....... Could I run proj.4 from the command
line directly without GDALwarp and if so, why would I
need to use GDALwarp?

thanks again

Conor O'Donoghue

--- Frank Warmerdam <warmerdam at pobox.com> wrote:

> Conor O'Donoghue wrote:
> > I have just installed FW tools 1.2.2
> (successfully, I
> > believe)but I am do not know how to proceed.
> > 
> > Two Questions
> > 1) I need help with choosing the most appropriate
> > utilitiy (GDAL or Proj for example). My objective
> is
> > to forward re-project, or warp, tiff's (vector
> files
> > later). I have no need to use the functionality
> with
> > another program, so i think the command line
> should be
> > fine.
> 
> Conor,
> 
> Generally speaking you would use gdalwarp to warp a
> raster
> image.   For instance if you have a geotiff
> currently samples
> on a WGS84 grid, and you wanted to reproject it to
> UTM 11 WGS84
> you might do:
> 
> gdalwarp -s_srs '+proj=latlong +datum=WGS84' \
>    -t_srs '+proj=utm +zone=11 +datum=WGS84' in.tif
> out.tif
> 
> > 2) I need some guidance in getting started. I have
> > read much of Gerald L. Evenden's Proj.4 User's
> manuals
> > and i believe i can manage the command line
> syntax.
> > Since I have no programming knowledge and can only
> > limp around in DOS I am not sure how to get the
> > command line working in the dos shell. (For
> example,
> > when in the FWTools1.2.2 or proj_lib directories
> when
> > I type "$ proj" I get '$' is not recognized as an
> > internal or external command, operable program or
> > batch file.) in that case i am not invoking the
> > proj.exe. 
> 
> The "$" is the command prompt in some examples. 
> Don't actually
> type it in.  Likewise if you see commands prefixed
> by C:\> or
> % it is likely the same thing.
> 
> Good luck,
> -- 
>
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank
> Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows |
> http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President
> OSGeo, http://osgeo.org
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 



From hamish_nospam at yahoo.com  Thu May 10 20:47:01 2007
From: hamish_nospam at yahoo.com (Hamish)
Date: Fri, 11 May 2007 15:47:01 +1200
Subject: [Proj] FW Tools 1.2.2 beginner
In-Reply-To: <387213.44536.qm@web31806.mail.mud.yahoo.com>
References: <4643A4E1.40900@pobox.com>
	<387213.44536.qm@web31806.mail.mud.yahoo.com>
Message-ID: <20070511154701.7b46a6da.hamish_nospam@yahoo.com>

> Conor O'Donoghue wrote:
> > 1) I need help with choosing the most appropriate
> > utilitiy (GDAL or Proj for example). My objective
> > is to forward re-project, or warp, tiff's (vector files
> > later). I have no need to use the functionality with
> > another program, so i think the command line should be
> > fine.

Frank:
> Generally speaking you would use gdalwarp to warp a
> raster image.

Conor:
> However, before I start I would like to be
> clearer....... Could I run proj.4 from the command
> line directly without GDALwarp and if so, why would I
> need to use GDALwarp?

proj will reproject between coordinate systems (pure numbers).
   (e.g. convert a lat/lon position to UTM coords)

gdalwarp will twist/turn/strech/warp a GeoTIFF image.



Hamish


From jmace at benchmarkrs.com  Fri May 11 14:20:04 2007
From: jmace at benchmarkrs.com (Jim Mace)
Date: Fri, 11 May 2007 14:20:04 -0700
Subject: [Proj] Proj.4 and ESRI projection files...
Message-ID: <00ff01c79412$24c5e660$0300a8c0@DCCF44B1>

My client wants to be able to upload shapefiles that can then be displayed
on top of VE that uses an obscure Mercator projection.  Is there a way that
I can: a) Convert a projection file to a proj.4 string programmatically, or
b) Use a projection file as a source projection parameter in some utility
like ogr2ogr or the like?

Jim Mace
Application Programmer

Benchmark Research & Safety Inc.
201 W. Sprague Ave
Suite 222
Spokane, Washington 99201



-- 
I am using the free version of SPAMfighter for private users.
It has removed 1654 spam emails to date.
Paying users do not have this message in their emails.
Get the free SPAMfighter here: http://www.spamfighter.com/len




From jmace at benchmarkrs.com  Fri May 11 14:54:00 2007
From: jmace at benchmarkrs.com (Jim Mace)
Date: Fri, 11 May 2007 14:54:00 -0700
Subject: [Proj] Proj.4 and ESRI projection files...
In-Reply-To: <00ff01c79412$24c5e660$0300a8c0@DCCF44B1>
References: <00ff01c79412$24c5e660$0300a8c0@DCCF44B1>
Message-ID: <011801c79416$e2ad7b80$0300a8c0@DCCF44B1>

I tried to use ShapeLibrary's shpproj, but after I type in my parameters and
press [Enter] it crashes on me... :-(

Jim Mace
Application Programmer

Benchmark Research & Safety Inc.
201 W. Sprague Ave
Suite 222
Spokane, Washington 99201


-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Jim Mace
Sent: Friday, May 11, 2007 2:20 PM
To: 'PROJ.4 and general Projections Discussions'
Subject: [Proj] Proj.4 and ESRI projection files...

My client wants to be able to upload shapefiles that can then be displayed
on top of VE that uses an obscure Mercator projection.  Is there a way that
I can: a) Convert a projection file to a proj.4 string programmatically, or
b) Use a projection file as a source projection parameter in some utility
like ogr2ogr or the like?

Jim Mace
Application Programmer

Benchmark Research & Safety Inc.
201 W. Sprague Ave
Suite 222
Spokane, Washington 99201



-- 
I am using the free version of SPAMfighter for private users.
It has removed 1654 spam emails to date.
Paying users do not have this message in their emails.
Get the free SPAMfighter here: http://www.spamfighter.com/len


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

-- 
I am using the free version of SPAMfighter for private users.
It has removed 1654 spam emails to date.
Paying users do not have this message in their emails.
Get the free SPAMfighter here: http://www.spamfighter.com/len




From leonidas_liakos at yahoo.gr  Sat May 12 08:56:13 2007
From: leonidas_liakos at yahoo.gr (Leonidas)
Date: Sat, 12 May 2007 15:56:13 +0000 (UTC)
Subject: [Proj] cs2cs and Visual Basic .NET
Message-ID: <loom.20070512T175412-919@post.gmane.org>

How can I use cs2cs in my Visual Basic .NET?



From szekerest at gmail.com  Sat May 12 11:16:49 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat, 12 May 2007 20:16:49 +0200
Subject: [Proj] cs2cs and Visual Basic .NET
In-Reply-To: <loom.20070512T175412-919@post.gmane.org>
References: <loom.20070512T175412-919@post.gmane.org>
Message-ID: <f3b73b7d0705121116w3dea3729h1d07f15ede7d52a9@mail.gmail.com>

If you want to use cs2cs exterally, you might use the
System.Diagnostics.Process to spawn cs2cs in your application.

If you want to implement similar functionality internally you might
use the SpatialReference and GeoTransformation classes from the
GDAL/OGR .NET API. You might add a reference to ogr_csharp.dll or
osr_csharp.dll in your application.
The FWTools package contains the binaries for using this functionality.
http://test.gdal.org/fwtools/FWTools130.exe

Best regards,

Tamas Szekeres



2007/5/12, Leonidas <leonidas_liakos at yahoo.gr>:
> How can I use cs2cs in my Visual Basic .NET?
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


From jmace at benchmarkrs.com  Sat May 12 11:32:32 2007
From: jmace at benchmarkrs.com (Jim Mace)
Date: Sat, 12 May 2007 11:32:32 -0700
Subject: [Proj] cs2cs and Visual Basic .NET
In-Reply-To: <f3b73b7d0705121116w3dea3729h1d07f15ede7d52a9@mail.gmail.com>
References: <loom.20070512T175412-919@post.gmane.org>
	<f3b73b7d0705121116w3dea3729h1d07f15ede7d52a9@mail.gmail.com>
Message-ID: <047901c794c3$e8125e80$6601a8c0@jim>

I am doing something somewhat similar using ogr2ogr to convert shapedfiles
from one projection to another from the command line.  I am using C#, but
you should be able to easily convert this to VB.net without much trouble.
Among other things the GeoSpatial class contains the proj strings that I use
to convert points from one projection, spatial reference to the other.  They
are represented by the enumerators EPGS.Albers and EPGS.Mercator.  There's
also another one that I use, EPGS.WGS84.  This is verifiable code, so the
conversions work correctly.  I am using SharpMap to display the shapefile on
top of Virtual Earth, and everything lines up correctly.

String oldFilePath = @"C:\farsite4\examples\ashley\Output\ash1_perim2.shp";
String newFilePath =
@"C:\Inetpub\Websites\firesite_us\App_Data\VEMercatorPerimeter.shp";

GeoSpatial spatial = new GeoSpatial();
ProcessStartInfo psi = new ProcessStartInfo(@"C:\Program
Files\FWTools1.2.2\bin\ogr2ogr.exe",
	" -s_srs \"" +spatial.GetEPGS(GeoSpatial.EPGS.Albers)+ "\" -t_srs
\"" 	+ spatial.GetEPGS(GeoSpatial.EPGS.Mercator)+ "\" "+ newFilePath + "
" 	+ oldFilePath);

Process.Start(psi);

I hope this helps...

Jim

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Tamas Szekeres
Sent: Saturday, May 12, 2007 11:17 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] cs2cs and Visual Basic .NET

If you want to use cs2cs exterally, you might use the
System.Diagnostics.Process to spawn cs2cs in your application.

If you want to implement similar functionality internally you might
use the SpatialReference and GeoTransformation classes from the
GDAL/OGR .NET API. You might add a reference to ogr_csharp.dll or
osr_csharp.dll in your application.
The FWTools package contains the binaries for using this functionality.
http://test.gdal.org/fwtools/FWTools130.exe

Best regards,

Tamas Szekeres



2007/5/12, Leonidas <leonidas_liakos at yahoo.gr>:
> How can I use cs2cs in my Visual Basic .NET?
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

-- 
I am using the free version of SPAMfighter for private users.
It has removed 14339 spam emails to date.
Paying users do not have this message in their emails.
Get the free SPAMfighter here: http://www.spamfighter.com/len



From leonidas_liakos at yahoo.gr  Sun May 13 12:35:20 2007
From: leonidas_liakos at yahoo.gr (Leonidas)
Date: Sun, 13 May 2007 19:35:20 +0000 (UTC)
Subject: [Proj] Re: cs2cs and Visual Basic .NET
Message-ID: <loom.20070513T213424-415@post.gmane.org>

Thanks for the replies.
I'm interested to implement the functionality internally using ogr_csharp.dll or
osr_csharp.dll.Is there any documentation or samples how to do that.Thanks
again,Leonidas 



From szekerest at gmail.com  Sun May 13 14:01:23 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun, 13 May 2007 23:01:23 +0200
Subject: [Proj] Re: cs2cs and Visual Basic .NET
In-Reply-To: <loom.20070513T213424-415@post.gmane.org>
References: <loom.20070513T213424-415@post.gmane.org>
Message-ID: <f3b73b7d0705131401q548aa6ddy27a35d238ac7b7a2@mail.gmail.com>

You can see some C# examples about using this API at:
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps

Best regards,

Tamas Szekeres


2007/5/13, Leonidas <leonidas_liakos at yahoo.gr>:
> Thanks for the replies.
> I'm interested to implement the functionality internally using ogr_csharp.dll or
> osr_csharp.dll.Is there any documentation or samples how to do that.Thanks
> again,Leonidas
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


From leonidas_liakos at yahoo.gr  Mon May 14 02:57:31 2007
From: leonidas_liakos at yahoo.gr (Leonidas)
Date: Mon, 14 May 2007 09:57:31 +0000 (UTC)
Subject: [Proj] Re: cs2cs and Visual Basic .NET
Message-ID: <loom.20070514T115106-96@post.gmane.org>

I tried to declare a new SpatialReference object and I get an
TypeInitializationException.

I declare the object using VB.NET like that
Dim src As SpatialReference = New SpatialReference("")




From szekerest at gmail.com  Mon May 14 03:53:31 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 14 May 2007 12:53:31 +0200
Subject: [Proj] Re: cs2cs and Visual Basic .NET
In-Reply-To: <loom.20070514T115106-96@post.gmane.org>
References: <loom.20070514T115106-96@post.gmane.org>
Message-ID: <f3b73b7d0705140353u36f08762n224cbace63ddfc11@mail.gmail.com>

I guess some of the dependent dll-s could not be loaded. You might
want to copy at least

*_csharp.dll,
*_wrap.dll,
gdal14.dll
proj.dll

in you application folder.

You can find these items in FWTools/bin for example

Best regards,

Tamas

2007/5/14, Leonidas <leonidas_liakos at yahoo.gr>:
> I tried to declare a new SpatialReference object and I get an
> TypeInitializationException.
>
> I declare the object using VB.NET like that
> Dim src As SpatialReference = New SpatialReference("")
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


From leonidas_liakos at yahoo.gr  Mon May 14 03:27:50 2007
From: leonidas_liakos at yahoo.gr (Leonidas)
Date: Mon, 14 May 2007 10:27:50 +0000 (UTC)
Subject: [Proj] Re: cs2cs and Visual Basic .NET
Message-ID: <loom.20070514T115106-96@post.gmane.org>

I tried to declare a new SpatialReference object and I get an
TypeInitializationException.

I declare the object using VB.NET like that
Dim src As SpatialReference = New SpatialReference("")




From leonidas_liakos at yahoo.gr  Mon May 14 04:27:51 2007
From: leonidas_liakos at yahoo.gr (Leonidas)
Date: Mon, 14 May 2007 11:27:51 +0000 (UTC)
Subject: [Proj] Re: cs2cs and Visual Basic .NET
Message-ID: <loom.20070514T132351-673@post.gmane.org>

I have already copy the following dlls in my app folder but the problem still
exists.proj.dll and gdal14.dll weren't in any folder of FWtools and I downloaded
them.I hope to downloaded the right files.So the dlls in my app folder are 

gdal14.dll
gdalconst_csharp.dll
gdalconst_wrap.dll
gdal_csharp.dll
gdal_wrap.dll
ogr_csharp.dll
ogr_wrap.dll
osr_csharp.dll
osr_wrap.dll
proj.dll



From szekerest at gmail.com  Mon May 14 05:39:07 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 14 May 2007 14:39:07 +0200
Subject: [Proj] Re: cs2cs and Visual Basic .NET
In-Reply-To: <loom.20070514T132351-673@post.gmane.org>
References: <loom.20070514T132351-673@post.gmane.org>
Message-ID: <f3b73b7d0705140539y7f7fcfe3md6f012e6ef981791@mail.gmail.com>

Leonidas,

I propose to use the latest FWTools

http://test.gdal.org/fwtools/FWTools130.exe

In this package gdal14.dll and proj.dll have been renamed to
gdal_fw.dll and proj_fw.dll to avoid the collision with the existing
dll-s on a development machine. So these dll-s should be renamed back.

Could you post a more detailed error message you have.

Best regards,

Tamas



2007/5/14, Leonidas <leonidas_liakos at yahoo.gr>:
> I have already copy the following dlls in my app folder but the problem still
> exists.proj.dll and gdal14.dll weren't in any folder of FWtools and I downloaded
> them.I hope to downloaded the right files.So the dlls in my app folder are
>
> gdal14.dll
> gdalconst_csharp.dll
> gdalconst_wrap.dll
> gdal_csharp.dll
> gdal_wrap.dll
> ogr_csharp.dll
> ogr_wrap.dll
> osr_csharp.dll
> osr_wrap.dll
> proj.dll
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


From EMiller at dfg.ca.gov  Mon May 14 08:30:25 2007
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Mon, 14 May 2007 08:30:25 -0700
Subject: [Proj] Re: cs2cs and Visual Basic .NET
In-Reply-To: <loom.20070514T132351-673@post.gmane.org>
References: <loom.20070514T132351-673@post.gmane.org>
Message-ID: <46481E20.95FD.00E4.0@dfg.ca.gov>

If you don't want/need all of the gdal/ogr functionality, I wrote a
little wrapper for PROJ.4 in C#.  If you compile it to a DLL, then you
just need the proj.dll and the wrapper DLL.

http://ftp.dfg.ca.gov/Public/BDB/Tools/proj4/csharp.zip 
-- 

Eric G. Miller
Staff Programmer
CA Dept. of Fish & Game


>>> On 5/14/2007 at 4:27 AM, Leonidas <leonidas_liakos at yahoo.gr>
wrote:
> I have already copy the following dlls in my app folder but the
problem still
> exists.proj.dll and gdal14.dll weren't in any folder of FWtools and I

> downloaded
> them.I hope to downloaded the right files.So the dlls in my app
folder are 
> 
> gdal14.dll
> gdalconst_csharp.dll
> gdalconst_wrap.dll
> gdal_csharp.dll
> gdal_wrap.dll
> ogr_csharp.dll
> ogr_wrap.dll
> osr_csharp.dll
> osr_wrap.dll
> proj.dll
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org 
> http://lists.maptools.org/mailman/listinfo/proj


From sdteffen at gmail.com  Mon May 14 12:41:52 2007
From: sdteffen at gmail.com (Steffen Macke)
Date: Mon, 14 May 2007 21:41:52 +0200
Subject: [Proj] Proj.4 and ESRI projection files...
In-Reply-To: <011801c79416$e2ad7b80$0300a8c0@DCCF44B1>
References: <00ff01c79412$24c5e660$0300a8c0@DCCF44B1>
	<011801c79416$e2ad7b80$0300a8c0@DCCF44B1>
Message-ID: <3cb1691c0705141241y50d58284jb5c8086531570621@mail.gmail.com>

Jim,

we worked around a similar problem by creating *.prj files that shpproj likes.
Does your problem include datum transformation? That was added quite
recently to shpproj - there might not be a release for it and you may
have to compile from CVS.

Regards,

Steffen

> I tried to use ShapeLibrary's shpproj, but after I type in my parameters and
> press [Enter] it crashes on me... :-(


From frode at tennebo.com  Tue May 15 01:05:46 2007
From: frode at tennebo.com (Frode =?utf-8?b?VGVubmViw7g=?=)
Date: Tue, 15 May 2007 08:05:46 +0000 (UTC)
Subject: [Proj] Local cartesian to UTM using PROJ.4
Message-ID: <loom.20070515T093733-604@post.gmane.org>

I'm trying to perform a transformation of a position in a local carteisan 
system, grid north in meters (XYZ) relative to a UTM/WGS84 (ENA) center with 
the result in UTM/WGS84.  I have tried Geotrans (Local cartesian -> UTM, WGE/
WGS84), but have discovered some discrepancies.  I would like to use PROJ.4 to 
verify one or the other.  How can this be done in PROJ.4?

Regards,
 -Frode



From gdt at ir.bbn.com  Tue May 15 11:42:52 2007
From: gdt at ir.bbn.com (Greg Troxel)
Date: Tue, 15 May 2007 14:42:52 -0400
Subject: [Proj] Local cartesian to UTM using PROJ.4
In-Reply-To: <loom.20070515T093733-604@post.gmane.org> ("Frode
	=?iso-8859-1?Q?Tenneb=F8=22's?=
	message of "Tue\, 15 May 2007 08\:05\:46 +0000 \(UTC\)")
References: <loom.20070515T093733-604@post.gmane.org>
Message-ID: <rmi8xbq6i8j.fsf@fnord.ir.bbn.com>


Frode Tennebø <frode at tennebo.com> writes:

> I'm trying to perform a transformation of a position in a local
> carteisan system, grid north in meters (XYZ) relative to a UTM/WGS84
> (ENA) center with the result in UTM/WGS84.  I have tried Geotrans
> (Local cartesian -> UTM, WGE/ WGS84), but have discovered some
> discrepancies.  I would like to use PROJ.4 to verify one or the other.
> How can this be done in PROJ.4?

I had a similar problem, I think.  I defined a local system relative to
Massachusetts state plane, putting (40,30) in my grid at some SPC
coordinates.  Then I had a rotation - my Y axis was more or less north,
but not really.  (The point was to have a natural coordinate system in a
parking lot.)

I tried to do this in proj by using the oblique mercator projection, but
never succeeded.  I ended up hand-writing the code, since it was just a
rotation and translation from the state plane system.

Rereading your question: are your X and Y axes along the ellipsoid, or
is this a translation of an ECEF system?  I think it would be helpful
for you to be far more precise about what you are doing.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 185 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20070515/b101d81b/attachment.sig>

From frode at tennebo.com  Tue May 15 15:30:41 2007
From: frode at tennebo.com (Frode =?utf-8?b?VGVubmViw7g=?=)
Date: Tue, 15 May 2007 22:30:41 +0000 (UTC)
Subject: [Proj] Re: Local cartesian to UTM using PROJ.4
References: <loom.20070515T093733-604@post.gmane.org>
	<rmi8xbq6i8j.fsf@fnord.ir.bbn.com>
Message-ID: <loom.20070516T003001-303@post.gmane.org>

Greg Troxel <gdt <at> ir.bbn.com> writes:
> Frode Tennebø <frode <at> tennebo.com> writes:
> 
> > I'm trying to perform a transformation of a position in a local
> > carteisan system, grid north in meters (XYZ) relative to a UTM/WGS84
> > (ENA) center with the result in UTM/WGS84.  I have tried Geotrans
> > (Local cartesian -> UTM, WGE/ WGS84), but have discovered some
> > discrepancies.  I would like to use PROJ.4 to verify one or the other.
> > How can this be done in PROJ.4?
> 
> I had a similar problem, I think.  I defined a local system relative to
> Massachusetts state plane, putting (40,30) in my grid at some SPC
> coordinates.  Then I had a rotation - my Y axis was more or less north,
> but not really.  (The point was to have a natural coordinate system in a
> parking lot.)
> 
> I tried to do this in proj by using the oblique mercator projection, but
> never succeeded.  I ended up hand-writing the code, since it was just a
> rotation and translation from the state plane system.

I'm not familiar with the US state plane, but from your description this is 
more like the trivial example below.

> Rereading your question: are your X and Y axes along the ellipsoid, or
> is this a translation of an ECEF system?  I think it would be helpful
> for you to be far more precise about what you are doing.

I had hoped I was quite precise.  :)  When I said local cartesian, I meant that 
in the strictes sense.  I have an origin in UTM (ENA) and a position vector 
relative to that origin in meters (XYZ) where Y is grid north (INS delivered - 
I just got a bit uncertain if the INS actually delivers true north, I'll have 
to re-check that, but for the sake of this argument it's grid north).  I assume 
by "along the ellipsoid" you mean along the projected north, hence grid north?

So, for a trivial example:  Origin is UTM/WGS84 (500000, 6000000, 10) position 
vector is (1000, 2000, 100) (1000 meters east, 2000 north and 100 up) -> 
UTM/WGS84 (501000, 6002000, 110).  Not factoring in scaling.

It's the reverse of the "what's the distance from A to B?" problem so I was 
hoping that PROJ had some mechanism for this...?

Regards,
 -Frode



From mb0 at km.ru  Wed May 16 02:08:01 2007
From: mb0 at km.ru (Sergey)
Date: Wed, 16 May 2007 09:08:01 +0000 (UTC)
Subject: [Proj] Winkel Tripel inverse coord transformation
Message-ID: <loom.20070516T110636-204@post.gmane.org>

Hello all!

I have jpeg image with Winkel Tripel projection map.
I need to detect longitude and latitude for each pixel of projection.
Please advice me what library can i use (proj4 or libproj4)?
What functions must be called and with what parameters?
Please help me! I can't find example, showing me how to do it.




From gdt at ir.bbn.com  Wed May 16 05:25:38 2007
From: gdt at ir.bbn.com (Greg Troxel)
Date: Wed, 16 May 2007 08:25:38 -0400
Subject: [Proj] Re: Local cartesian to UTM using PROJ.4
In-Reply-To: <loom.20070516T003001-303@post.gmane.org> ("Frode
	=?iso-8859-1?Q?Tenneb=F8=22's?=
	message of "Tue\, 15 May 2007 22\:30\:41 +0000 \(UTC\)")
References: <loom.20070515T093733-604@post.gmane.org>
	<rmi8xbq6i8j.fsf@fnord.ir.bbn.com>
	<loom.20070516T003001-303@post.gmane.org>
Message-ID: <rmimz05kla5.fsf@fnord.ir.bbn.com>

Frode Tennebø <frode at tennebo.com> writes:

> Greg Troxel <gdt <at> ir.bbn.com> writes:
>> Frode Tennebø <frode <at> tennebo.com> writes:
>> 
> I'm not familiar with the US state plane, but from your description this is 
> more like the trivial example below.

Each state is different.  There are many projections, but most are TM or
Lambert Conformal Conic.  Mass (mainland zone) is LCC
(http://www.mass.gov/mgis/dd-over.htm if you want to see the details).

>> Rereading your question: are your X and Y axes along the ellipsoid, or
>> is this a translation of an ECEF system?  I think it would be helpful
>> for you to be far more precise about what you are doing.
>
> I had hoped I was quite precise.  :)

Rereading, I think I follow, and it was inappropriate for me to say
"far more precise" - I apologize for overreacting.

> When I said local cartesian, I meant that 
> in the strictes sense.  I have an origin in UTM (ENA) and a position vector 
> relative to that origin in meters (XYZ) where Y is grid north (INS delivered - 
> I just got a bit uncertain if the INS actually delivers true north, I'll have 
> to re-check that, but for the sake of this argument it's grid north).  I assume 
> by "along the ellipsoid" you mean along the projected north, hence grid north?

I think that you mean that both X (east) and Y (in the direction of UTM
grid north) are both in the plane that's tangent to the ellipsoid, with
Z being the normal to the ellipsoid.  So for small X, Y, you could just
add the UTM values of the origin.  The key difference from UTM is that
it's truly cartesian from there instead of projected.

> So, for a trivial example:  Origin is UTM/WGS84 (500000, 6000000, 10) position 
> vector is (1000, 2000, 100) (1000 meters east, 2000 north and 100 up) -> 
> UTM/WGS84 (501000, 6002000, 110).  Not factoring in scaling.

I don't think this is the right answer.  By moving out (1000,2000) in
your system, you move in the plane that's tangent to the ellipsoid at
the origin.  So your elevation will be more than 100m.  Granted this
will be small at a few km distance, but consider 1000 km.

My coordinate system only extended a maximum of 100m or so from the
origin, and I ignored all this, equating subtracting UTM of a point from
UTM of origin (really MA SPC) with measurements from total station which
really was local cartesian.  This is wrong, but is the standard plane
surveying assumption.

To solve your problem, I think you could take the UTM values, transform
to ECEF, and then apply translation/rotation, move in your space, and
then untranslate/rotate and convert back.  Surely proj can convert
geodetic to ECEF, but I don't see it in 'proj -lp'.  These two messages
may be helpful.

http://lists.maptools.org/pipermail/proj/2005-February/001515.html
http://lists.maptools.org/pipermail/proj/2005-February/001519.html

> It's the reverse of the "what's the distance from A to B?" problem so I was 
> hoping that PROJ had some mechanism for this...?

I suspect you could add a new 'local ecef' projection.



From ovv at hetnet.nl  Fri May 18 11:50:02 2007
From: ovv at hetnet.nl (Oscar van Vlijmen)
Date: Fri, 18 May 2007 20:50:02 +0200
Subject: [Proj] Winkel Tripel inverse coord transformation
In-Reply-To: <loom.20070516T110636-204@post.gmane.org>
Message-ID: <C273C1FA.C2E0%ovv@hetnet.nl>

> From: Sergey
> Date: Wed, 16 May 2007 09:08:01 +0000 (UTC)
> Subject: [Proj] Winkel Tripel inverse coord transformation

> I have jpeg image with Winkel Tripel projection map.
> I need to detect longitude and latitude for each pixel of projection.
> Please advice me what library can i use (proj4 or libproj4)?

libproj nor proj have an inverse Winkel Tripel projection.
Can only be done iteratively, as is shown in a couple of articles, one of
which is:
"A general algorithm for the inverse transformation of map projections using
jacobian matrices"
Cengizhan Ipbüker, I. Öztug Bildirici
Istanbul Tech. University Faculty of Civil Eng., Div. of Cartography &
Selcuk University, Faculty of Eng., Dept. of Geodesy & Photogrammetry; Sep.
2002
http://atlas.selcuk.edu.tr/paperdb/papers/130.pdf

The article gives an algorithm for the inverse of Aitoff-Hammer, Winkel
Tripel and Mollweide.





From frode at tennebo.com  Fri May 25 03:27:46 2007
From: frode at tennebo.com (Frode =?utf-8?b?VGVubmViw7g=?=)
Date: Fri, 25 May 2007 10:27:46 +0000 (UTC)
Subject: [Proj] Re: Local cartesian to UTM using PROJ.4
References: <loom.20070515T093733-604@post.gmane.org>
	<rmi8xbq6i8j.fsf@fnord.ir.bbn.com>
	<loom.20070516T003001-303@post.gmane.org>
	<rmimz05kla5.fsf@fnord.ir.bbn.com>
Message-ID: <loom.20070525T120349-455@post.gmane.org>

Greg Troxel <gdt <at> ir.bbn.com> writes:

> Rereading, I think I follow, and it was inappropriate for me to say
> "far more precise" - I apologize for overreacting.

NP. :-)
 
> I think that you mean that both X (east) and Y (in the direction of UTM
> grid north) are both in the plane that's tangent to the ellipsoid, with
> Z being the normal to the ellipsoid. 

Correct.

> So for small X, Y, you could just
> add the UTM values of the origin.  The key difference from UTM is that
> it's truly cartesian from there instead of projected.

This was also my assumption.

> > So, for a trivial example:  Origin is UTM/WGS84 (500000, 6000000, 10) 
position 
> > vector is (1000, 2000, 100) (1000 meters east, 2000 north and 100 up) -> 
> > UTM/WGS84 (501000, 6002000, 110).  Not factoring in scaling.
> 
> I don't think this is the right answer.  By moving out (1000,2000) in
> your system, you move in the plane that's tangent to the ellipsoid at
> the origin.  So your elevation will be more than 100m.  Granted this
> will be small at a few km distance, but consider 1000 km.

Yes, my simple model also compensates for earth curvature (which I did not show 
in the trivial example above) and rotation.  This appears to work well for most 
distances as long as the origin is near the central meridian.  Now, I'd like to 
modify the calculation for scale as this results to 4 meters per 10000 meters.

However, while doing some tests I noticed that as the origin moves away from 
the central meridian, the actual rotation becomes distorted between my simple 
model and a reference program, Geotrans.

I would like to test some inputs with a third party, hopefully proj.4.

> To solve your problem, I think you could take the UTM values, transform
> to ECEF, and then apply translation/rotation, move in your space, and
> then untranslate/rotate and convert back.

Yes, I asume that would give the *correct* values.  However, the work involved 
would be substantial, unless I can find some free Ada routines for the job. :-)

> Surely proj can convert
> geodetic to ECEF, but I don't see it in 'proj -lp'.  These two messages
> may be helpful.
> 
> http://lists.maptools.org/pipermail/proj/2005-February/001515.html
> http://lists.maptools.org/pipermail/proj/2005-February/001519.html

I didn't quite see how......
 
 -Frode





