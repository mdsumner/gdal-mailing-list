From warmerdam at pobox.com  Mon Aug  4 21:57:12 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 05 Aug 2003 00:57:12 -0400
Subject: [OSRS-PROJ] proj mirror
Message-ID: <3F2F3928.3000901@pobox.com>

Folks,

DM Solutions Group has kindly provided hosting for a PROJ.4 mirror site at
their new maptools.org.

web:
   http://proj.maptools.org/

download:
   http://proj.maptools.org/dl/

I have updated the proj web page to show the mirror.

While the mailing list, CVS and bugzilla for PROJ.4 are only available at
remotesensing.org, we now have some redundency for the web pages and download
information for when remotesensing.org is occationally down.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From tom at scriptsupport.co.uk  Wed Aug 13 09:50:22 2003
From: tom at scriptsupport.co.uk (Tom H)
Date: Wed, 13 Aug 2003 17:50:22 +0100
Subject: [OSRS-PROJ] orthographic projection with proj4 and mapserver.
In-Reply-To: <200308131610.h7DGAdY06474@yoda.imagelinks.com>
Message-ID: <GEEDJNOBNPDFCHGBHPNDIEAKDPAA.tom@scriptsupport.co.uk>


Hi list,

I have an orthographic projection working with mapserver and proj4 here;
http://www.scriptsupport.co.uk/images/mapserv3.png

the problem is that around the edges, the on-the-fly projection seems to
be creating area that is not defined on the projection, and is being dumped
into the centre of the image. and the interpolation of the boundary is creating
lines that cause that "shards" effect on the image.

Is there any way to modify the projection parameters to correct for that overlap?

my projection section is like this;
Map projection;

 	PROJECTION
 	  #"proj=laea"
 	  "proj=ortho"
 	  "ellps=WGS84" <--- maybe change this to something else
 	  "lat_0=51.0000"
 	  "lon_0=0.0000"
 	  "x_0=0.00"
 	  "y_0=0.00"
 	END

Layer;	

	PROJECTION
		"proj=latlong"
		"ellps=WGS84" <--- maybe change this to something else
	END

Thanks in Advance.

T.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Wed Aug 13 12:14:25 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 13 Aug 2003 15:14:25 -0400
Subject: [OSRS-PROJ] orthographic projection with proj4 and mapserver.
In-Reply-To: <GEEDJNOBNPDFCHGBHPNDIEAKDPAA.tom@scriptsupport.co.uk>
References: <GEEDJNOBNPDFCHGBHPNDIEAKDPAA.tom@scriptsupport.co.uk>
Message-ID: <1060802065.2358.5.camel@localhost>

Whatever "on-the-fly" means?

Presumably "mapserver" is some kind of graphic program.

On the surface, it appears that points beyond the visible rim
are not being properly sensed for their "invisiblity."  PROJ
should return an error for such points and the graphic program
should properly sense them.  With information provided, it is
difficult to know who to blame.

PS: the colors on the *.png file make for a *very* hard read.
 
On Wed, 2003-08-13 at 12:50, Tom H wrote:
> Hi list,
> 
> I have an orthographic projection working with mapserver and proj4 here;
> http://www.scriptsupport.co.uk/images/mapserv3.png
> 
> the problem is that around the edges, the on-the-fly projection seems to
> be creating area that is not defined on the projection, and is being dumped
> into the centre of the image. and the interpolation of the boundary is creating
> lines that cause that "shards" effect on the image.
> 
> Is there any way to modify the projection parameters to correct for that overlap?
> 
> my projection section is like this;
> Map projection;
> 
>  	PROJECTION
>  	  #"proj=laea"
>  	  "proj=ortho"
>  	  "ellps=WGS84" <--- maybe change this to something else
>  	  "lat_0=51.0000"
>  	  "lon_0=0.0000"
>  	  "x_0=0.00"
>  	  "y_0=0.00"
>  	END
> 
> Layer;	
> 
> 	PROJECTION
> 		"proj=latlong"
> 		"ellps=WGS84" <--- maybe change this to something else
> 	END
> 
> Thanks in Advance.
> 
> T.
> 
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From csbruce at cubewerx.com  Wed Aug 13 15:32:05 2003
From: csbruce at cubewerx.com (Craig Bruce)
Date: Wed, 13 Aug 2003 18:32:05 -0400
Subject: [OSRS-PROJ] orthographic projection with proj4 and mapserver.
Message-ID: <200308132232.h7DMW5np008332@tux.cubewerx.com>

"Gerald I. Evenden" <gerald.evenden at verizon.net> wrote:

> Whatever "on-the-fly" means?
>
> Presumably "mapserver" is some kind of graphic program.

"On-the-fly" presumably means that the source data is reprojected in real
time as requested when the map is drawn.  The "map server" is likely an
OpenGIS® Consortium Web Map Server (OGC WMS):

http://www.opengis.org/techno/specs/01-068r3.pdf

Our OGC-compatible map server and client have the same feature (long URL):

http://demo.cubewerx.com/demo/cubexplor/cubexplor.cgi?imageClick.x=297&imageClick.y=199&clickMode=zoom+in&layerToQuery=%28value+of+%22Layers%22+field%29&pixelSensitivity=3&featureCount=5&dataStores=Foundation&themes=Boundaries&layers=Barrier+Line+Features&styles=%28default%29&newScale=230M&newX=0&newY=0&newImageWidth=600&newImageHeight=400&newImageType=image%2Fpng&newQuality=BEST&zoomFactor=2&newSrs=42003+%28WGS+84+%2F+Auto+Orthographic%29&sldUrl=&layersToPlot=Coastlines%2CPolitical+Boundaries%2CGlobal+30+Second+Elevations%2CTwo+Minute+Shaded+Relief&currentY=-8.00433241552028e-11&currentX=0&currentScale=230M&currentImageWidth=600&currentImageHeight=400&currentSrs=AUTO%3A42003%2C9001%2C2.136416958402712%2C52.37936226431053&currentImageType=image%2Fpng&currentQuality=BEST

> On the surface, it appears that points beyond the visible rim
> are not being properly sensed for their "invisiblity."  PROJ
> should return an error for such points and the graphic program
> should properly sense them.  With information provided, it is
> difficult to know who to blame.

Proper graphical clipping is a tough problem.  It looks like the specific
problem in this case is with the polygons that are half visible and half
invisible.  The invisible vertices appear to be all substituted with (0,0)
coordinates, though I thought that the PROJ.4 library used -infinity as
its 'invalid coordinate' value.  To plot such a polygon mathematically
correctly, you'd need to cut it in two (or more) pieces along the line of
the horizon of the projection, which would be a smooth curve in this case.
Other short-cut cheats are also possible.

--------------------------+------------------------+--------------------------
Dr. Craig S. Bruce        | Tel: 819-771-8303 x205 |             CubeWerx Inc.
Senior Software Developer |    Fax: 613-771-8388   |  Gatineau, Québec, Canada
csbruce at cubewerx.com      | http://www.csbruce.com |  http://www.cubewerx.com/
--------------------------+------------------------+--------------------------
          "Do not try to think outside the box.  That's impossible.
           Instead, realize the truth.  There is no box." -- unknown
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Wed Aug 13 17:58:27 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 13 Aug 2003 20:58:27 -0400
Subject: [OSRS-PROJ] orthographic projection with proj4 and mapserver.
In-Reply-To: <200308132232.h7DMW5np008332@tux.cubewerx.com>
References: <200308132232.h7DMW5np008332@tux.cubewerx.com>
Message-ID: <1060822707.3479.16.camel@localhost>

On Wed, 2003-08-13 at 18:32, Craig Bruce wrote:
> "Gerald I. Evenden" <gerald.evenden at verizon.net> wrote:
> 
> > Whatever "on-the-fly" means?
> >
> > Presumably "mapserver" is some kind of graphic program.
> 
> "On-the-fly" presumably means that the source data is reprojected in real
> time as requested when the map is drawn.  The "map server" is likely an
> OpenGIS® Consortium Web Map Server (OGC WMS):

Hmmm, "on-the-fly", I didn't know there was any other way.
	...
> 
> Proper graphical clipping is a tough problem.  It looks like the specific
> problem in this case is with the polygons that are half visible and half
> invisible.  The invisible vertices appear to be all substituted with (0,0)
> coordinates, though I thought that the PROJ.4 library used -infinity as
> its 'invalid coordinate' value.  To plot such a polygon mathematically
> correctly, you'd need to cut it in two (or more) pieces along the line of
> the horizon of the projection, which would be a smooth curve in this case.
> Other short-cut cheats are also possible.

Indeed, not a trivial problem.  In all the map graphics that I use in
the PROJ.4 manuals, only vector plotting was performed.  The clipping
problem for vectors is much simpler than polygons---that's why I didn't
fill the continental outlines.  ;-)

BTW, libproj4 forward routine returns HUGE_VAL when it cannot project a
point.  Program [l]proj returns an "*".  The HUGE_VAL method has been
in PROJ.4 use for a *long* time so I suspect that the problem lay in
the calling software.

-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From tom at scriptsupport.co.uk  Wed Aug 13 18:24:05 2003
From: tom at scriptsupport.co.uk (Tom H)
Date: Thu, 14 Aug 2003 02:24:05 +0100
Subject: [OSRS-PROJ] orthographic projection with proj4 and mapserver.
In-Reply-To: <1060822707.3479.16.camel@localhost>
Message-ID: <GEEDJNOBNPDFCHGBHPNDIECBDPAA.tom@scriptsupport.co.uk>


> > 
> > Proper graphical clipping is a tough problem.  It looks like 
> the specific
> > problem in this case is with the polygons that are half visible and half
> > invisible.  The invisible vertices appear to be all substituted 
> with (0,0)
> > coordinates, though I thought that the PROJ.4 library used -infinity as
> > its 'invalid coordinate' value.  To plot such a polygon mathematically
> > correctly, you'd need to cut it in two (or more) pieces along 
> the line of
> > the horizon of the projection, which would be a smooth curve in 
> this case.
> > Other short-cut cheats are also possible.
> 
> Indeed, not a trivial problem.  In all the map graphics that I use in
> the PROJ.4 manuals, only vector plotting was performed.  The clipping
> problem for vectors is much simpler than polygons---that's why I didn't
> fill the continental outlines.  ;-)
> 
> BTW, libproj4 forward routine returns HUGE_VAL when it cannot project a
> point.  Program [l]proj returns an "*".  The HUGE_VAL method has been
> in PROJ.4 use for a *long* time so I suspect that the problem lay in
> the calling software.
> 
> 

If HUGE_VAL was returned against the 0,0 would the image have had shards out
to infinity rather than to 0,0?

Thanks for your help.

T.



----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Wed Aug 13 19:06:43 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 13 Aug 2003 22:06:43 -0400
Subject: [OSRS-PROJ] orthographic projection with proj4 and mapserver.
In-Reply-To: <GEEDJNOBNPDFCHGBHPNDIECBDPAA.tom@scriptsupport.co.uk>
References: <GEEDJNOBNPDFCHGBHPNDIECBDPAA.tom@scriptsupport.co.uk>
Message-ID: <1060826803.3480.41.camel@localhost>

On Wed, 2003-08-13 at 21:24, Tom H wrote:
	...
> > BTW, libproj4 forward routine returns HUGE_VAL when it cannot project a
> > point.  Program [l]proj returns an "*".  The HUGE_VAL method has been
> > in PROJ.4 use for a *long* time so I suspect that the problem lay in
> > the calling software.
> > 
> > 
> 
> If HUGE_VAL was returned against the 0,0 would the image have had shards out
> to infinity rather than to 0,0?
> 

I have no idea where the 0,0 values comes from.  In theory, libproj
procedures should produce HUGE_VAL,HUGE_VAL for invisible or non-
projectable points.  It is up to the calling program to make sense
of this condition---making 0,0 does no make sense.

The only condition that I will address is that libproj is producing
0,0 for invisible points.  So far, no evidence has been given to
demonstrate libproj is producing 0,0.  A quick check with lproj
gives *,*s for invisible points so presumably the library is working.
The illustrations I made many years ago indicated that *,* was
being correctly produced as the graphic routines depended upon
this return for invisible points.

To demonstrate that libproj is in error I need values for the
pj_fwd input and its return values.  A graphic is not considered
evidence of failure because of too many operations external to
libproj library calls that can be in error.

As an unrelated aside, why is an elliptical earth specified for a
global scale illustration?  A lot of unnecessary work for such a
small scale.
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Thu Aug 14 06:53:12 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 14 Aug 2003 09:53:12 -0400
Subject: [OSRS-PROJ] orthographic projection with proj4 and mapserver.
In-Reply-To: <GEEDJNOBNPDFCHGBHPNDIEAKDPAA.tom@scriptsupport.co.uk>
References: <GEEDJNOBNPDFCHGBHPNDIEAKDPAA.tom@scriptsupport.co.uk>
Message-ID: <3F3B9448.8090600@pobox.com>

Tom H wrote:
> Hi list,
> 
> I have an orthographic projection working with mapserver and proj4 here;
> http://www.scriptsupport.co.uk/images/mapserv3.png
> 
> the problem is that around the edges, the on-the-fly projection seems to
> be creating area that is not defined on the projection, and is being dumped
> into the centre of the image. and the interpolation of the boundary is creating
> lines that cause that "shards" effect on the image.

Tom,

I think this problem is in either the pj_transform() function in PROJ, or the
mapproj.c code in mapserver, not checking for projection errors properly (or
at all!).  If you can prepare a sample mapfile, data file and "shp2img"
argument list that produces the errors you showed then please submit as a
bug in the MapServer bugzilla and I will try to dig into it.

As Gerald points out, the returning of 0,0 is not likely caused by the core
PROJ.4 functions which seem to work fine.

Thanks,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From judd at seas.marine.usf.edu  Thu Aug 14 07:21:04 2003
From: judd at seas.marine.usf.edu (Judd Taylor)
Date: Thu, 14 Aug 2003 10:21:04 -0400
Subject: [OSRS-PROJ] orthographic projection with proj4 and mapserver.
References: <200308132232.h7DMW5np008332@tux.cubewerx.com>
Message-ID: <043201c3626f$4ba93c60$cb88f783@marine.usf.edu>


----- Original Message ----- 
From: "Craig Bruce" <csbruce at cubewerx.com>
To: "[OSRS-PROJ]" <osrs-proj at remotesensing.org>
Sent: Wednesday, August 13, 2003 6:32 PM
Subject: Re: [OSRS-PROJ] orthographic projection with proj4 and mapserver.


> "Gerald I. Evenden" <gerald.evenden at verizon.net> wrote:
>
> > On the surface, it appears that points beyond the visible rim
> > are not being properly sensed for their "invisiblity."  PROJ
> > should return an error for such points and the graphic program
> > should properly sense them.  With information provided, it is
> > difficult to know who to blame.
>
> Proper graphical clipping is a tough problem.  It looks like the specific
> problem in this case is with the polygons that are half visible and half
> invisible.  The invisible vertices appear to be all substituted with (0,0)
> coordinates, though I thought that the PROJ.4 library used -infinity as
> its 'invalid coordinate' value.  To plot such a polygon mathematically
> correctly, you'd need to cut it in two (or more) pieces along the line of
> the horizon of the projection, which would be a smooth curve in this case.
> Other short-cut cheats are also possible.
>

I could use some pointers in this arena as well, if anyone on this list has
any. Right now I'm using the General Polygon Clipping (GPC) library to clip
my polygons from the GSHHS coastline set (GPC website:
http://www.cs.man.ac.uk/aig/staff/alan/software/gpc.html). Unfortunately,
this takes forever to clip the larger polygons in that coastline set (~1.4
million points).

Anyone know how I can speed this up? Maybe a different library? Maybe a
different format for the polygons? I can't seem to find any good references
for this sort of thing anywhere online. Any advice would be appreciated!

Thanks,
    Judd Taylor




----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Thu Aug 14 08:03:17 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 14 Aug 2003 11:03:17 -0400
Subject: [OSRS-PROJ] orthographic projection with proj4 and mapserver.
In-Reply-To: <043201c3626f$4ba93c60$cb88f783@marine.usf.edu>
References: <200308132232.h7DMW5np008332@tux.cubewerx.com>
	 <043201c3626f$4ba93c60$cb88f783@marine.usf.edu>
Message-ID: <1060873396.2358.8.camel@localhost>

On Thu, 2003-08-14 at 10:21, Judd Taylor wrote:
> ----- Original Message ----- 
> From: "Craig Bruce" <csbruce at cubewerx.com>
> To: "[OSRS-PROJ]" <osrs-proj at remotesensing.org>
	...
> http://www.cs.man.ac.uk/aig/staff/alan/software/gpc.html). Unfortunately,
> this takes forever to clip the larger polygons in that coastline set (~1.4
> million points).

~1.4m points seems like overkill for global maps.  I use a 5+k file to
do most of the small global plots on the PROJ.4 documentation.  If the
figure really fills a page I might go to a 50+k file.  Doing work for a
PC screen shouldn't need more than a 5k point file.

I am only talking here about coast line data 

PS, many times I only use every third point of a 5k pt. file.
...
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From nhv at cape.com  Thu Aug 14 08:24:32 2003
From: nhv at cape.com (Norman Vine)
Date: Thu, 14 Aug 2003 11:24:32 -0400
Subject: [OSRS-PROJ] orthographic projection with proj4 and mapserver.
In-Reply-To: <043201c3626f$4ba93c60$cb88f783@marine.usf.edu>
Message-ID: <EKEJIKAILPONGGENMBGAMECGEGAA.nhv@cape.com>

Judd Taylor writes:
> 
> > "Gerald I. Evenden" <gerald.evenden at verizon.net> wrote:
> >
> >
> > Proper graphical clipping is a tough problem.  I
> 
> I could use some pointers in this arena as well, if anyone on this list has
> any. Right now I'm using the General Polygon Clipping (GPC) library to clip
> my polygons from the GSHHS coastline set (GPC website:
> http://www.cs.man.ac.uk/aig/staff/alan/software/gpc.html). Unfortunately,
> this takes forever to clip the larger polygons in that coastline set (~1.4
> million points).
> 
> Anyone know how I can speed this up? Maybe a different library? Maybe a
> different format for the polygons? I can't seem to find any good references
> for this sort of thing anywhere online. Any advice would be appreciated!

Itertively reduce the resolution of the data so that you have several data sets
each appropriate for a range of scales

You could also clip these into areas and then you would only need be
concerned with polygons in those areas that are in view

HTH

Norman
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Thu Aug 14 08:27:58 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 14 Aug 2003 11:27:58 -0400
Subject: [OSRS-PROJ] orthographic projection with proj4 and mapserver.
In-Reply-To: <043201c3626f$4ba93c60$cb88f783@marine.usf.edu>
References: <200308132232.h7DMW5np008332@tux.cubewerx.com>
	 <043201c3626f$4ba93c60$cb88f783@marine.usf.edu>
Message-ID: <1060874878.2359.21.camel@localhost>

On Thu, 2003-08-14 at 10:21, Judd Taylor wrote:
> ----- Original Message ----- 
> From: "Craig Bruce" <csbruce at cubewerx.com>
> To: "[OSRS-PROJ]" <osrs-proj at remotesensing.org>
	...
> I could use some pointers in this arena as well, if anyone on this list has
> any. Right now I'm using the General Polygon Clipping (GPC) library to clip
> my polygons from the GSHHS coastline set (GPC website:
> http://www.cs.man.ac.uk/aig/staff/alan/software/gpc.html). Unfortunately,
> this takes forever to clip the larger polygons in that coastline set (~1.4
> million points).

I forgot to mention on my previous email that the coastline files I use
are not set up as "closed figures" and thus may not function with some
clipping functions.  This brings up a second set of questions:

1. the above mentions a clipping program source but no source for the
	coastline data source.  What data source was used?  A url?

2. Does the source file(s) include political boundaries?  Current?

3. Anyone know of current "erosion" programs?  Programs that remove
	points from a coastline file based on the complexity of the
	coastline itself.  15 years ago I had a couple of reasonable
	procedures but have since lost them.

Thanks.
	...
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From neteler at itc.it  Thu Aug 14 08:36:03 2003
From: neteler at itc.it (Markus Neteler)
Date: Thu, 14 Aug 2003 17:36:03 +0200
Subject: [OSRS-PROJ] orthographic projection with proj4 and mapserver.
In-Reply-To: <1060874878.2359.21.camel@localhost>; from gerald.evenden@verizon.net on Thu, Aug 14, 2003 at 11:27:58AM -0400
References: <200308132232.h7DMW5np008332@tux.cubewerx.com> <043201c3626f$4ba93c60$cb88f783@marine.usf.edu> <1060874878.2359.21.camel@localhost>
Message-ID: <20030814173603.H6039@itc.it>

On Thu, Aug 14, 2003 at 11:27:58AM -0400, Gerald I. Evenden wrote:
[..]
> 3. Anyone know of current "erosion" programs?  Programs that remove
> 	points from a coastline file based on the complexity of the
> 	coastline itself.  15 years ago I had a couple of reasonable
> 	procedures but have since lost them.

Yes, the GSHHS project provides such code:
http://www.soest.hawaii.edu/wessel/gshhs/gshhs.html
->
  ftp://gmt.soest.hawaii.edu/pub/pwessel/gshhs
  -> gshhs_dp.c
	"/*	@(#)gshhs_dp.c	1.1  05/18/99
	 *
	 * gshhs_dp applies the Douglas-Peucker algorithm to simplify a line
	 * segment given a tolerance.  The algorithm is based on the paper
	 * Douglas, D. H., and T. K. Peucker, Algorithms for the reduction
	 *   of the number of points required to represent a digitized line
	 *   of its caricature, Can. Cartogr., 10, 112-122, 1973.
	 * The impmementation of this algorightm has been kindly provided by
	 * Dr. Gary J. Robinson, Environmental Systems Science Centre,
	 * University of Reading, Reading, UK
	 *
	 * Paul Wessel, 18-MAY-1999
	 * Version: 1.1 Added byte flipping
	 *	    1.2 Explicit binary read for DOS.  POSIX compliance
	 */
	"

Kind regards

-- 
Markus Neteler     <neteler at itc.it>       http://mpa.itc.it
ITC-irst, Istituto per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis
Via Sommarive, 18        -       38050 Povo (Trento), Italy
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From nhv at cape.com  Thu Aug 14 08:45:57 2003
From: nhv at cape.com (Norman Vine)
Date: Thu, 14 Aug 2003 11:45:57 -0400
Subject: [OSRS-PROJ] orthographic projection with proj4 and mapserver.
In-Reply-To: <1060874878.2359.21.camel@localhost>
Message-ID: <EKEJIKAILPONGGENMBGAKECIEGAA.nhv@cape.com>

Gerald I. Evenden writes:
> 
> 3. Anyone know of current "erosion" programs?  Programs that remove
> 	points from a coastline file based on the complexity of the
> 	coastline itself.  15 years ago I had a couple of reasonable
> 	procedures but have since lost them.

This is a classic
http://www.cs.sunysb.edu/~algorith/implement/DPsimp/implement.shtml

HTH

Norman
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From judd at seas.marine.usf.edu  Thu Aug 14 09:56:04 2003
From: judd at seas.marine.usf.edu (Judd Taylor)
Date: Thu, 14 Aug 2003 12:56:04 -0400
Subject: [OSRS-PROJ] orthographic projection with proj4 and mapserver.
References: <EKEJIKAILPONGGENMBGAKECIEGAA.nhv@cape.com>
Message-ID: <048401c36284$f31b17b0$cb88f783@marine.usf.edu>

Wow! Thanks for all of the help.

With the GSHHS code that was mentioned earlier in the thread, there is a bit
of code to decimate the polygons to lower resolutions, and also a program to
convert the dataset to GRASS format. The dataset doesn't include political
boundries, just coastlines.

For my maps, I need the full resolution data set, since my areas are small
(florida keys for instance), but the polygons (closed figures) are setup in
the files as continuous coastlines, ie, the coastline for the mainland of
florida is part of the polygon that includes all of North America (and maybe
South Am as well).

Most of my attempts to just ignore most of the data points that are outside
of my map area don't work b/c some of the more complicated clipping issues
on some maps (one that usually fails my attempts shows part of florida in
the top, part of cuba, and part of the yucatan in the bottom, which is the
same polygon as florida...).

Here are some of the maps I'm producing now:
http://modis.marine.usf.edu/products/flbay/rgb/MODIS.2003225.162301.flbay.rgb.png
http://modis.marine.usf.edu/products/seacoos/chl/MODIS.2003225.174927.seacoos.chlor_MODIS.png

I'd be very interested in any algorithms like Norman described  that clip
the main polygons into areas, without showing the boundries between areas.
Any links/examples?

Thanks again,
    Judd Taylor


----- Original Message ----- 
From: "Norman Vine" <nhv at cape.com>
To: <osrs-proj at remotesensing.org>
Sent: Thursday, August 14, 2003 11:45 AM
Subject: RE: [OSRS-PROJ] orthographic projection with proj4 and mapserver.


> Gerald I. Evenden writes:
> >
> > 3. Anyone know of current "erosion" programs?  Programs that remove
> > points from a coastline file based on the complexity of the
> > coastline itself.  15 years ago I had a couple of reasonable
> > procedures but have since lost them.
>
> This is a classic
> http://www.cs.sunysb.edu/~algorith/implement/DPsimp/implement.shtml
>
> HTH
>
> Norman
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.
>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From nhv at cape.com  Thu Aug 14 10:23:30 2003
From: nhv at cape.com (Norman Vine)
Date: Thu, 14 Aug 2003 13:23:30 -0400
Subject: [OSRS-PROJ] orthographic projection with proj4 and mapserver.
In-Reply-To: <048401c36284$f31b17b0$cb88f783@marine.usf.edu>
Message-ID: <EKEJIKAILPONGGENMBGAOECNEGAA.nhv@cape.com>

Judd Taylor writes:
> 
> I'd be very interested in any algorithms like Norman described  that clip
> the main polygons into areas, without showing the boundries between areas.
> Any links/examples?

Umm.... didn't mention you were using GPC
some simplistic but effective areas for the globe
might be just the upper and lower quadrants 
( 8 areas total)

More sophisticated areas can be based on a
recursive platonic solid, but any structure 
topologically equivalant to a sphere will do

No reasons the boundaries will show unless
you draw them as the polygonal pieces should
just abut if the math is done correctly

HTH

Norman
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Thu Aug 14 19:49:19 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 14 Aug 2003 22:49:19 -0400
Subject: [OSRS-PROJ] PROJ.4 usage in mapserver system - orthographic usage thread
Message-ID: <1060915758.3926.20.camel@localhost>

I got curious about this "mapserver" system and its relation to
PROJ.4 so I pulled it down and took a look at it.

Routines of interest seem to be mapproject.c and mapresample.c
and calls to pj_transform and pj_fwd.

I noted that the output of pj_fwd was *not* tested for error
in mapproject.c.  The output of pj_transform was checked
(functional return) but I could not find it in the mapserver
distribution and assume it was your value added to PROJ.4.

If the program was used so that data went directly through
pj_fwd/inv, per the second half of the function  msProjectPoint
then failure will occur since the return will be MS_SUCCESS
regardless of the success of the pj_fwd/inv call.

The patch appears obvious but I will not attempt it until I
successfully install the system.  I suspect the pj_transform
is related to datum changes so I can ignore it (dummy procedure)
for non datum shift usage.
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Fri Aug 15 08:38:07 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 15 Aug 2003 11:38:07 -0400
Subject: [OSRS-PROJ] PROJ.4 usage in mapserver system - orthographic
	usage thread
In-Reply-To: <1060915758.3926.20.camel@localhost>
References: <1060915758.3926.20.camel@localhost>
Message-ID: <1060961886.2390.6.camel@localhost>

Further evaluation of mapserver seems to indicate that examination
of the return of procedure msProjectPoint's return value is not
made.  It appears that a fundamental flaw may exist within mapserver
that makes it fail when points cannot be projected because they
are out of range of the projection procedure.

An expert in the internals of mapserver needs to respond to this
assessment before anyone can proceed.

PS: traffic on this group seems to have dwindled---NE power outage?

On Thu, 2003-08-14 at 22:49, Gerald I. Evenden wrote:
> I got curious about this "mapserver" system and its relation to
> PROJ.4 so I pulled it down and took a look at it.
> 
> Routines of interest seem to be mapproject.c and mapresample.c
> and calls to pj_transform and pj_fwd.
> 
> I noted that the output of pj_fwd was *not* tested for error
> in mapproject.c.  The output of pj_transform was checked
> (functional return) but I could not find it in the mapserver
> distribution and assume it was your value added to PROJ.4.
> 
> If the program was used so that data went directly through
> pj_fwd/inv, per the second half of the function  msProjectPoint
> then failure will occur since the return will be MS_SUCCESS
> regardless of the success of the pj_fwd/inv call.
> 
> The patch appears obvious but I will not attempt it until I
> successfully install the system.  I suspect the pj_transform
> is related to datum changes so I can ignore it (dummy procedure)
> for non datum shift usage.
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From paul at toolscenter.org  Tue Aug 19 23:58:02 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Wed, 20 Aug 2003 15:58:02 +0900
Subject: [OSRS-PROJ] pj_gridinfo.c file and C++ compilation
References: <1060915758.3926.20.camel@localhost>
Message-ID: <000701c366e8$6ba9ecd0$700201c0@MAPQUEST.local>

In the function
static int pj_gridinfo_init_ntv2( FILE *fid, PJ_GRIDINFO *gilist )
{
    unsigned char header[11*16];
}

the "header" variable as defined will pass through most C/C++ string
functions
like "strncmp".

VC++ 6.x gives the following error:

-------------------------------------------------------------------------
C:\...\pj_gridinfo.cpp(372) : error C2664: 'strncmp' : cannot convert
parameter 1 from
'unsigned char [176]' to 'const char *'
        Types pointed to are unrelated; conversion requires
reinterpret_cast,
C-style cast or function-style cast
-------------------------------------------------------------------------

Since I do not know the format of the NTV2 file, I cannot tell if the
"unsigned char"
is necessary. Any suggestions for work around? Will the cast to "const
char*" be safe?

Best regards,
Paul.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Wed Aug 20 06:24:55 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 20 Aug 2003 09:24:55 -0400
Subject: [OSRS-PROJ] pj_gridinfo.c file and C++ compilation
In-Reply-To: <000701c366e8$6ba9ecd0$700201c0@MAPQUEST.local>
References: <1060915758.3926.20.camel@localhost> <000701c366e8$6ba9ecd0$700201c0@MAPQUEST.local>
Message-ID: <3F4376A7.6080700@pobox.com>

Paul Selormey wrote:
> In the function
> static int pj_gridinfo_init_ntv2( FILE *fid, PJ_GRIDINFO *gilist )
> {
>     unsigned char header[11*16];
> }
> 
> the "header" variable as defined will pass through most C/C++ string
> functions
> like "strncmp".
> 
> VC++ 6.x gives the following error:
> 
> -------------------------------------------------------------------------
> C:\...\pj_gridinfo.cpp(372) : error C2664: 'strncmp' : cannot convert
> parameter 1 from
> 'unsigned char [176]' to 'const char *'
>         Types pointed to are unrelated; conversion requires
> reinterpret_cast,
> C-style cast or function-style cast
> -------------------------------------------------------------------------
> 
> Since I do not know the format of the NTV2 file, I cannot tell if the
> "unsigned char"
> is necessary. Any suggestions for work around? Will the cast to "const
> char*" be safe?

Paul,

Many of the uses of the "header" array do require it to be unsigned char.
However, I have committed changes to pj_gridinfo.c casting it to const
char * in places where it is appropriate (the various string functions).

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From steve.lime at dnr.state.mn.us  Wed Aug 20 09:17:44 2003
From: steve.lime at dnr.state.mn.us (Steve Lime)
Date: Wed, 20 Aug 2003 11:17:44 -0500
Subject: [OSRS-PROJ] PROJ.4 usage in mapserver system -
	orthographicusage thread
Message-ID: <sf4358ef.082@co5.dnr.state.mn.us>

Has this discussion gone on off the list, I've seen no other follow-ups?
As one of the lead MapServer developers I'm certainly interested in
seeing problems resolved if they exist. I'm not however, an expert in
the current projection support within the software. I'm curious how, in
practice, other graphically oriented systems deal with the problem. 

Steve

Stephen Lime
Data & Applications Manager

Minnesota DNR
500 Lafayette Road
St. Paul, MN 55155
651-297-2937

>>> gerald.evenden at verizon.net 08/15/03 10:38AM >>>
Further evaluation of mapserver seems to indicate that examination
of the return of procedure msProjectPoint's return value is not
made.  It appears that a fundamental flaw may exist within mapserver
that makes it fail when points cannot be projected because they
are out of range of the projection procedure.

An expert in the internals of mapserver needs to respond to this
assessment before anyone can proceed.

PS: traffic on this group seems to have dwindled---NE power outage?

On Thu, 2003-08-14 at 22:49, Gerald I. Evenden wrote:
> I got curious about this "mapserver" system and its relation to
> PROJ.4 so I pulled it down and took a look at it.
> 
> Routines of interest seem to be mapproject.c and mapresample.c
> and calls to pj_transform and pj_fwd.
> 
> I noted that the output of pj_fwd was *not* tested for error
> in mapproject.c.  The output of pj_transform was checked
> (functional return) but I could not find it in the mapserver
> distribution and assume it was your value added to PROJ.4.
> 
> If the program was used so that data went directly through
> pj_fwd/inv, per the second half of the function  msProjectPoint
> then failure will occur since the return will be MS_SUCCESS
> regardless of the success of the pj_fwd/inv call.
> 
> The patch appears obvious but I will not attempt it until I
> successfully install the system.  I suspect the pj_transform
> is related to datum changes so I can ignore it (dummy procedure)
> for non datum shift usage.
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Wed Aug 20 09:30:46 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 20 Aug 2003 12:30:46 -0400
Subject: [OSRS-PROJ] PROJ.4 usage in mapserver system -	orthographicusage
 thread
In-Reply-To: <sf4358ef.082@co5.dnr.state.mn.us>
References: <sf4358ef.082@co5.dnr.state.mn.us>
Message-ID: <3F43A236.9040205@pobox.com>

Steve Lime wrote:
> Has this discussion gone on off the list, I've seen no other follow-ups?
> As one of the lead MapServer developers I'm certainly interested in
> seeing problems resolved if they exist. I'm not however, an expert in
> the current projection support within the software. I'm curious how, in
> practice, other graphically oriented systems deal with the problem. 

Steve,

It is my intention to try and address the orthographic problem in mapserver
- really the problem is that most, if not all, of the mapproject.c functions
don't check for failures coming out of PROJ.4.  I have asked the original
reporter to submit a bug report in the MapServer bugzilla which I don't
think has happened yet.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Wed Aug 20 10:08:20 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 20 Aug 2003 13:08:20 -0400
Subject: [OSRS-PROJ] PROJ.4 usage in mapserver system
	-	orthographicusage thread
In-Reply-To: <3F43A236.9040205@pobox.com>
References: <sf4358ef.082@co5.dnr.state.mn.us>  <3F43A236.9040205@pobox.com>
Message-ID: <1061399300.2365.51.camel@localhost>

Any of the perspective routines will cause forward errors when the
points are "invisible."  Orthographic is just the extreme case where
the focal point is at infinity.  Near Sided Perspective (nsper) will
also have invisible points.  Stereographic also fails for the
apodal point.

On Wed, 2003-08-20 at 12:30, Frank Warmerdam wrote:
> Steve Lime wrote:
> > Has this discussion gone on off the list, I've seen no other follow-ups?
> > As one of the lead MapServer developers I'm certainly interested in
> > seeing problems resolved if they exist. I'm not however, an expert in
> > the current projection support within the software. I'm curious how, in
> > practice, other graphically oriented systems deal with the problem. 
> 
> Steve,
> 
> It is my intention to try and address the orthographic problem in mapserver
> - really the problem is that most, if not all, of the mapproject.c functions
> don't check for failures coming out of PROJ.4.  I have asked the original
> reporter to submit a bug report in the MapServer bugzilla which I don't
> think has happened yet.
> 
> Best regards,
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From paul at toolscenter.org  Wed Aug 20 21:12:36 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Thu, 21 Aug 2003 13:12:36 +0900
Subject: [OSRS-PROJ] pj_gridinfo.c file and C++ compilation
References: <1060915758.3926.20.camel@localhost> <000701c366e8$6ba9ecd0$700201c0@MAPQUEST.local> <3F4376A7.6080700@pobox.com>
Message-ID: <002801c3679a$75f87eb0$700201c0@MAPQUEST.local>

Thanks.

Best regards,
Paul.

----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam at pobox.com>
To: <osrs-proj at remotesensing.org>
Sent: Wednesday, August 20, 2003 10:24 PM
Subject: Re: [OSRS-PROJ] pj_gridinfo.c file and C++ compilation


> Paul Selormey wrote:
> > In the function
> > static int pj_gridinfo_init_ntv2( FILE *fid, PJ_GRIDINFO *gilist )
> > {
> >     unsigned char header[11*16];
> > }
> >
> > the "header" variable as defined will pass through most C/C++ string
> > functions
> > like "strncmp".
> >
> > VC++ 6.x gives the following error:
> >
>
> -------------------------------------------------------------------------
> > C:\...\pj_gridinfo.cpp(372) : error C2664: 'strncmp' : cannot convert
> > parameter 1 from
> > 'unsigned char [176]' to 'const char *'
> >         Types pointed to are unrelated; conversion requires
> > reinterpret_cast,
> > C-style cast or function-style cast
>
> -------------------------------------------------------------------------
> >
> > Since I do not know the format of the NTV2 file, I cannot tell if the
> > "unsigned char"
> > is necessary. Any suggestions for work around? Will the cast to "const
> > char*" be safe?
>
> Paul,
>
> Many of the uses of the "header" array do require it to be unsigned char.
> However, I have committed changes to pj_gridinfo.c casting it to const
> char * in places where it is appropriate (the various string functions).
>
> Best regards,
>
> -- 
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Thu Aug 21 07:48:00 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 21 Aug 2003 10:48:00 -0400
Subject: [OSRS-PROJ] Orthographic Projections and MapServer
Message-ID: <3F44DBA0.3050202@pobox.com>

Folks,

I thought I should summarize my findings on the problems that Tom H ran into
using an orthographic projection for a world image in MapServer.   While the
bugs are essentially in MapServer, there is a more general question for
projections folks so bear with me.

Basically, he was getting an image at this url, the extra triangles
representing some sort of bug:

   http://www.scriptsupport.co.uk/images/mapserv.png

The bug report is available at:

   http://mapserver.gis.umn.edu/bugs/show_bug.cgi?id=411

In tracking through, the problem is that MapServer wasn't checking error
results from pj_transform() properly.  Some points in the polygons were not
reprojecting because they were over the horizon but MapServer was not
checking whether msProjectPoint() was successful in msProjectLine(), and
msProjectShape() was not checking if msProjectLine() was successful. So
msDrawShape() proceeded to drawing polygons that were not successfully
reprojected to orthographic meters resulting in some or all points being
essentially at 0,0 (the center of the map).

I will commit changes to msProjectLine() and msProjectShape() to return
MS_FAILURE when any points fail to reproject, but this still leaves a question
as to what functions like msDrawShape() should do when a shape files to
reproject.  Should it be a fatal error?  If so, Tom's goal can't be accomplished
since there will always be some polygons that aren't completely reprojectable.
If we just skip drawing such shapes, but return MS_SUCCESS from msDrawShape()
then we get results like:

   http://mapserver.gis.umn.edu/bugs/attachment.cgi?id=60&action=view

As you can see some polygons (such as the continental United States) that
go over the horizon are completely dropped even though much of the polygon
would be visible.

So now the more general question for projection folks.  Does anyone have
a suggestion for how to plot polygons that partially go over the horizon?
What I want is a way to figure out what part of a polygon would be visible
and plot that.

One very crude solution I could imagine is to split polygons that don't
completely reproject successfully into chunks (perhaps 1degree x 1 degree
peices) and draw all of those that reproject.  That would give essentially all
the stuff that should be visible to the user, but it could be pretty messy to
implement, and it would be somewhat difficult to plot the original polygon
edges properly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From B at rt.nl  Thu Aug 21 10:14:02 2003
From: B at rt.nl (Bart Adriaanse)
Date: Thu, 21 Aug 2003 19:14:02 +0200
Subject: [OSRS-PROJ] Orthographic Projections and MapServer
References: <3F44DBA0.3050202@pobox.com>
Message-ID: <000701c36807$a10d77a0$0201a8c0@home>

Frank,

I remember having tried to tackle this problem about a year ago in a
different context but i gut stuck at about this point.

One solution would be to somehow detect the points which are beyond the
horizon and project those to lie on the horizon instead, this would
potentially render some polygon border lines at the horizon which shouldn't
really be there, but it seems like a good compromise.

However, even befor thinking about how to reproject them to the horizon, i
had problems detecting which points were beyond the horizon to begin with,
they end up being projected to the center of the earth  somehow, but the
flat, projected plane there might be valid coordinates ending up at this x,y
coordinate. It would help if pj_transform could label individual coordinates
as "unprojectable" by assigning something like -99999999, but that of course
is just a small part of the solution.

I remember ESRI projection engine solves this by projecting these points to
the horizon by default, maybe GTCP would contains some tricks we all could
learn from here ? Actually Gerald Evenden replied to my posts in this forum
back then saying he would not consider this a task for the projection engine
and the application using it should deal with this, but it would be mighty
helpfull if a projection engine could like "project" them to the horizon in
my perception ;-)

Best regards,

Bart Adriaanse
www.demis.nl


----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam at pobox.com>
To: "PROJ.4 Discussion" <osrs-proj at remotesensing.org>; "UMN MapServer"
<mapserver-users at lists.gis.umn.edu>
Sent: Thursday, August 21, 2003 4:48 PM
Subject: [OSRS-PROJ] Orthographic Projections and MapServer


> Folks,
>
> I thought I should summarize my findings on the problems that Tom H ran
into
> using an orthographic projection for a world image in MapServer.   While
the
> bugs are essentially in MapServer, there is a more general question for
> projections folks so bear with me.
>
> Basically, he was getting an image at this url, the extra triangles
> representing some sort of bug:
>
>    http://www.scriptsupport.co.uk/images/mapserv.png
>
> The bug report is available at:
>
>    http://mapserver.gis.umn.edu/bugs/show_bug.cgi?id=411
>
> In tracking through, the problem is that MapServer wasn't checking error
> results from pj_transform() properly.  Some points in the polygons were
not
> reprojecting because they were over the horizon but MapServer was not
> checking whether msProjectPoint() was successful in msProjectLine(), and
> msProjectShape() was not checking if msProjectLine() was successful. So
> msDrawShape() proceeded to drawing polygons that were not successfully
> reprojected to orthographic meters resulting in some or all points being
> essentially at 0,0 (the center of the map).
>
> I will commit changes to msProjectLine() and msProjectShape() to return
> MS_FAILURE when any points fail to reproject, but this still leaves a
question
> as to what functions like msDrawShape() should do when a shape files to
> reproject.  Should it be a fatal error?  If so, Tom's goal can't be
accomplished
> since there will always be some polygons that aren't completely
reprojectable.
> If we just skip drawing such shapes, but return MS_SUCCESS from
msDrawShape()
> then we get results like:
>
>    http://mapserver.gis.umn.edu/bugs/attachment.cgi?id=60&action=view
>
> As you can see some polygons (such as the continental United States) that
> go over the horizon are completely dropped even though much of the polygon
> would be visible.
>
> So now the more general question for projection folks.  Does anyone have
> a suggestion for how to plot polygons that partially go over the horizon?
> What I want is a way to figure out what part of a polygon would be visible
> and plot that.
>
> One very crude solution I could imagine is to split polygons that don't
> completely reproject successfully into chunks (perhaps 1degree x 1 degree
> peices) and draw all of those that reproject.  That would give essentially
all
> the stuff that should be visible to the user, but it could be pretty messy
to
> implement, and it would be somewhat difficult to plot the original polygon
> edges properly.
>
> Best regards,
> -- 
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From nhv at cape.com  Thu Aug 21 11:09:56 2003
From: nhv at cape.com (Norman Vine)
Date: Thu, 21 Aug 2003 14:09:56 -0400
Subject: [OSRS-PROJ] Orthographic Projections and MapServer
In-Reply-To: <000701c36807$a10d77a0$0201a8c0@home>
Message-ID: <EKEJIKAILPONGGENMBGAGEFHEHAA.nhv@cape.com>

Bart Adriaanse writes:
>
> Frank Warmerdam writes:
> >
> > I thought I should summarize my findings on the problems that Tom H ran into
> > using an orthographic projection for a world image in MapServer.   While the
> > bugs are essentially in MapServer, there is a more general question for
> > projections folks so bear with me.

> > In tracking through, the problem is that MapServer wasn't checking error
> > results from pj_transform() properly.  Some points in the polygons were not
> > reprojecting because they were over the horizon but MapServer was not
> > checking whether msProjectPoint() was successful in msProjectLine(), and
> > msProjectShape() was not checking if msProjectLine() was successful. So
> > msDrawShape() proceeded to drawing polygons that were not successfully
> > reprojected to orthographic meters resulting in some or all points being
> > essentially at 0,0 (the center of the map).

> > As you can see some polygons (such as the continental United States) that
> > go over the horizon are completely dropped even though much of the polygon
> > would be visible.
> >
> > So now the more general question for projection folks.  Does anyone have
> > a suggestion for how to plot polygons that partially go over the horizon?
> > What I want is a way to figure out what part of a polygon would be visible
> > and plot that.

The only sure method I know of is to clip the polygon to the great circle that 
is the 'rim' of the projection prior to submitting it to the draw routine and 
perhaps also the proj forward projection.
 
> One solution would be to somehow detect the points which are beyond the
> horizon and project those to lie on the horizon instead, this would
> potentially render some polygon border lines at the horizon which shouldn't
> really be there, but it seems like a good compromise.
> 
> However, even befor thinking about how to reproject them to the horizon, i
> had problems detecting which points were beyond the horizon to begin with,

For the spherical orthographic case, which at the scale where the Earth's 'rim' 
is visible is the most sensible, if a point is more then 90* from the center of 
the projection: it is beyond the horizon.  This is probably easiest to do in the 
direction cosine form < X,Y,Z unit vectors instead of Lat Lon > of the point

HTH

Norman

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From B at rt.nl  Thu Aug 21 11:30:52 2003
From: B at rt.nl (Bart Adriaanse)
Date: Thu, 21 Aug 2003 20:30:52 +0200
Subject: [OSRS-PROJ] Orthographic Projections and MapServer
References: <EKEJIKAILPONGGENMBGAGEFHEHAA.nhv@cape.com>
Message-ID: <001301c36812$5b19e6b0$0201a8c0@home>

Norman,


> The only sure method I know of is to clip the polygon to the great circle
that
> is the 'rim' of the projection prior to submitting it to the draw routine
and
> perhaps also the proj forward projection.
>
> > One solution would be to somehow detect the points which are beyond the
> > horizon and project those to lie on the horizon instead, this would
> > potentially render some polygon border lines at the horizon which
shouldn't
> > really be there, but it seems like a good compromise.

I suppose we agree on this, but would you agree it would be a nice feature
of the projection engine to have this sensible solution built in by default
?

> > However, even befor thinking about how to reproject them to the horizon,
i
> > had problems detecting which points were beyond the horizon to begin
with,
>
> For the spherical orthographic case, which at the scale where the Earth's
'rim'
> is visible is the most sensible, if a point is more then 90* from the
center of
> the projection: it is beyond the horizon.  This is probably easiest to do
in the
> direction cosine form < X,Y,Z unit vectors instead of Lat Lon > of the
point

When i ran into this problem i think i was using another projection, the
fact that many projections will encounter the horizon problem (sometimes in
extreme cases only) pleads for having the projection engine deal with
instead of expecting the calling application to solve such a basic problem.

I'm affraid there's little more i can contribute at this point, just
wishfull thinking... ;-)

Bart


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Thu Aug 21 12:32:35 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 21 Aug 2003 15:32:35 -0400
Subject: [OSRS-PROJ] Orthographic Projections and MapServer
In-Reply-To: <001301c36812$5b19e6b0$0201a8c0@home>
References: <EKEJIKAILPONGGENMBGAGEFHEHAA.nhv@cape.com>
	 <001301c36812$5b19e6b0$0201a8c0@home>
Message-ID: <1061494355.2360.39.camel@localhost>

This problem is a purely a graphical problem and hence not a fault
nor limitation of cartographic projection software other than to
indicate what points cannot be projected due to invisibility.

The graphical problem is much the same a the typical window or clipping
problem except that the data is defining the window and not a separate
set of information such as the limits of the map display---typically
a rectangular region handled by well known software.

In this case, the border of visibility is a curve which is a circle
in the spherical earth model.  Note: using the elliptical model makes
no sense for global presentation scales.  The astronomical term "limb"
applies to this edge of the visible part of the projection.

The first part of the problem is finding the point where a line segment
intersects the limb---where the last points is visible and the next is
not.  This problem is fairly easy by recursively dividing the line into
halves and adjust the first or last point based upon the visibility of
the center point.  This is what I do for my coastline maps in my
documentation.  But since I do not fill I quit the problem at this
point.

What to do to fill?  Basically, the problem is to join the point
where the line went beyond the limb and connect a circle with the
limb's radius to the point where it reentered the limb.  Ah, but which
way?  If the fill area were always to the left of the line segments, the
arc would be counter clockwise.

The limb cut is easy and the more I think about it, the limb edge is not
too bad if the right-/left-handedness of the fill area is known.

Ah yes, there is the problem when all points are outside the limb.
This is a problem with clipping fill where it needs to be
determined if the clipping area is totally inside or outside the window.
I belive this problem also exists here but I have not mentally imaged
how the area outline would look.

Any comments, flames, ... ?

-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From nhv at cape.com  Thu Aug 21 12:54:25 2003
From: nhv at cape.com (Norman Vine)
Date: Thu, 21 Aug 2003 15:54:25 -0400
Subject: [OSRS-PROJ] Orthographic Projections and MapServer
In-Reply-To: <001301c36812$5b19e6b0$0201a8c0@home>
Message-ID: <EKEJIKAILPONGGENMBGAOEFKEHAA.nhv@cape.com>

Bart Adriaanse writes:
> 
> > The only sure method I know of is to clip the polygon to the great circle that
> > is the 'rim' of the projection prior to submitting it to the draw routine and
> > perhaps also the proj forward projection.
> 
> I suppose we agree on this, but would you agree it would be a nice feature
> of the projection engine to have this sensible solution built in by default
> ?

I agree and AFAICT Proj does have a sensible solution

my_project_point(...)
{
  ...
  PJ_FWD(...)
  if( !pj_errno)
  { 
     OK - Do my thing
   } else {
     Handle_Error_Condition
  }
  ...
}

IMHO What we need to have is a 'rendering engine' that does the 
'sensible thing' for HANDLE_ERROR_CONDITION

So 'all' we need todo is hash out just what the 'sensible thing' is for
those cases that we know 'apriori' will fail.  :-)

Cheers

Norman


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From B at rt.nl  Thu Aug 21 13:12:35 2003
From: B at rt.nl (Bart Adriaanse)
Date: Thu, 21 Aug 2003 22:12:35 +0200
Subject: [OSRS-PROJ] Orthographic Projections and MapServer
References: <EKEJIKAILPONGGENMBGAGEFHEHAA.nhv@cape.com> <001301c36812$5b19e6b0$0201a8c0@home> <1061494355.2360.39.camel@localhost>
Message-ID: <002a01c36820$90da8cb0$0201a8c0@home>

Gerald,

No flames, just comments, and wishfull thinking...

Being a typical user who knows what a projection is and how to work with
them, but prefers to use a tool like Proj or the GIS at hand rather then
even attempt to do my own this is mostly wishfull thinking i suppose.

I can see clearly now there seems to be no simple solution, you opened my
eyes to realize expecting Proj to deal with this is not realistic, i mean
how would it anticipate on me drawing a polygon or polyline, or maybe even a
transparent globe where points beyond the horizon show through half
transparently ;-)

I guess you're right...

So my comment would boil down to simply the need to be able to find out
which points of a polyline processed by pj_forward were over the horizon,
from what i understand by now i could process the points one by one and
assess the return code, right ?

Best regards,

Bart Adriaanse
www.demis.nl

Original Message ----- 
From: "Gerald I. Evenden" <gerald.evenden at verizon.net>
To: "[OSRS-PROJ]" <osrs-proj at remotesensing.org>
Sent: Thursday, August 21, 2003 9:32 PM
Subject: Re: [OSRS-PROJ] Orthographic Projections and MapServer


> This problem is a purely a graphical problem and hence not a fault
> nor limitation of cartographic projection software other than to
> indicate what points cannot be projected due to invisibility.
>
> The graphical problem is much the same a the typical window or clipping
> problem except that the data is defining the window and not a separate
> set of information such as the limits of the map display---typically
> a rectangular region handled by well known software.
>
> In this case, the border of visibility is a curve which is a circle
> in the spherical earth model.  Note: using the elliptical model makes
> no sense for global presentation scales.  The astronomical term "limb"
> applies to this edge of the visible part of the projection.
>
> The first part of the problem is finding the point where a line segment
> intersects the limb---where the last points is visible and the next is
> not.  This problem is fairly easy by recursively dividing the line into
> halves and adjust the first or last point based upon the visibility of
> the center point.  This is what I do for my coastline maps in my
> documentation.  But since I do not fill I quit the problem at this
> point.
>
> What to do to fill?  Basically, the problem is to join the point
> where the line went beyond the limb and connect a circle with the
> limb's radius to the point where it reentered the limb.  Ah, but which
> way?  If the fill area were always to the left of the line segments, the
> arc would be counter clockwise.
>
> The limb cut is easy and the more I think about it, the limb edge is not
> too bad if the right-/left-handedness of the fill area is known.
>
> Ah yes, there is the problem when all points are outside the limb.
> This is a problem with clipping fill where it needs to be
> determined if the clipping area is totally inside or outside the window.
> I belive this problem also exists here but I have not mentally imaged
> how the area outline would look.
>
> Any comments, flames, ... ?
>
> -- 
> Gerald I. Evenden <gerald.evenden at verizon.net>
>
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Thu Aug 21 14:18:55 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 21 Aug 2003 17:18:55 -0400
Subject: [OSRS-PROJ] Orthographic Projections and MapServer
In-Reply-To: <002a01c36820$90da8cb0$0201a8c0@home>
References: <EKEJIKAILPONGGENMBGAGEFHEHAA.nhv@cape.com>
	 <001301c36812$5b19e6b0$0201a8c0@home> <1061494355.2360.39.camel@localhost>
	 <002a01c36820$90da8cb0$0201a8c0@home>
Message-ID: <1061500735.2361.79.camel@localhost>

Probably senseless to reply to sarcasm.

PROJ is a part of a now defunct graphic system called MAPGEN that we
used several years ago.  It functioned fairly well for large scale
mapping and would produce accurate mylar overlays for USGS base maps.

Please note that I said "part of."  The mapping system eventually
became dated and replaced by commercial products but since my interest
was basically in the projection part I maintained and expanded the
the projection system.  Carefully note that the map drafting
system was always delivered as a two part package: MAPGEN and PROJ.
As most of you know, PROJ has applications in non-map making activities
and thus retained its usefulness in spite of the demise of the
graphic system.

To say that the PROJ system should make maps is like requiring the
same activities from sine and tangent procedures.  PROJ is only involved
in the process of transforming geographic coordinates to Cartesian so
they can be presented on a flat sheet of paper with suitable graphic
software (or even hand plotted on graph paper).

On Thu, 2003-08-21 at 16:12, Bart Adriaanse wrote:
> Gerald,
> 
> No flames, just comments, and wishfull thinking...
> 
> Being a typical user who knows what a projection is and how to work with
> them, but prefers to use a tool like Proj or the GIS at hand rather then
> even attempt to do my own this is mostly wishfull thinking i suppose.
> 
> I can see clearly now there seems to be no simple solution, you opened my
> eyes to realize expecting Proj to deal with this is not realistic, i mean
> how would it anticipate on me drawing a polygon or polyline, or maybe even a
> transparent globe where points beyond the horizon show through half
> transparently ;-)
> 
> I guess you're right...
> 
> So my comment would boil down to simply the need to be able to find out
> which points of a polyline processed by pj_forward were over the horizon,
> from what i understand by now i could process the points one by one and
> assess the return code, right ?
> 
> Best regards,
> 
> Bart Adriaanse
> www.demis.nl
	...
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From B at rt.nl  Thu Aug 21 14:44:48 2003
From: B at rt.nl (Bart Adriaanse)
Date: Thu, 21 Aug 2003 23:44:48 +0200
Subject: [OSRS-PROJ] Orthographic Projections and MapServer
References: <EKEJIKAILPONGGENMBGAGEFHEHAA.nhv@cape.com> <001301c36812$5b19e6b0$0201a8c0@home> <1061494355.2360.39.camel@localhost> <002a01c36820$90da8cb0$0201a8c0@home> <1061500735.2361.79.camel@localhost>
Message-ID: <002501c3682d$727a4aa0$0201a8c0@home>

Gerald,

I don't mean to be sarcastic, excuse me, we have been employing Poj.4
gratefully for a few years, it works fine and we gratefully apreciate the
works of you and Frank and other "guru's" alike...

I take a mailing list like this to be a good place to talk about this kind
of projection related "wishfull thinking", sorry i my suggestions were like
to suggestive, i didn't mean for them to be sarcastic by any means....

Bart

----- Original Message ----- 
From: "Gerald I. Evenden" <gerald.evenden at verizon.net>
To: "[OSRS-PROJ]" <osrs-proj at remotesensing.org>
Sent: Thursday, August 21, 2003 11:18 PM
Subject: Re: [OSRS-PROJ] Orthographic Projections and MapServer


> Probably senseless to reply to sarcasm.
>
> PROJ is a part of a now defunct graphic system called MAPGEN that we
> used several years ago.  It functioned fairly well for large scale
> mapping and would produce accurate mylar overlays for USGS base maps.
>
> Please note that I said "part of."  The mapping system eventually
> became dated and replaced by commercial products but since my interest
> was basically in the projection part I maintained and expanded the
> the projection system.  Carefully note that the map drafting
> system was always delivered as a two part package: MAPGEN and PROJ.
> As most of you know, PROJ has applications in non-map making activities
> and thus retained its usefulness in spite of the demise of the
> graphic system.
>
> To say that the PROJ system should make maps is like requiring the
> same activities from sine and tangent procedures.  PROJ is only involved
> in the process of transforming geographic coordinates to Cartesian so
> they can be presented on a flat sheet of paper with suitable graphic
> software (or even hand plotted on graph paper).
>
> On Thu, 2003-08-21 at 16:12, Bart Adriaanse wrote:
> > Gerald,
> >
> > No flames, just comments, and wishfull thinking...
> >
> > Being a typical user who knows what a projection is and how to work with
> > them, but prefers to use a tool like Proj or the GIS at hand rather then
> > even attempt to do my own this is mostly wishfull thinking i suppose.
> >
> > I can see clearly now there seems to be no simple solution, you opened
my
> > eyes to realize expecting Proj to deal with this is not realistic, i
mean
> > how would it anticipate on me drawing a polygon or polyline, or maybe
even a
> > transparent globe where points beyond the horizon show through half
> > transparently ;-)
> >
> > I guess you're right...
> >
> > So my comment would boil down to simply the need to be able to find out
> > which points of a polyline processed by pj_forward were over the
horizon,
> > from what i understand by now i could process the points one by one and
> > assess the return code, right ?
> >
> > Best regards,
> >
> > Bart Adriaanse
> > www.demis.nl
> ...
> -- 
> Gerald I. Evenden <gerald.evenden at verizon.net>
>
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From agnew at bilby.ucsd.edu  Thu Aug 21 14:57:15 2003
From: agnew at bilby.ucsd.edu (Duncan Agnew)
Date: Thu, 21 Aug 2003 14:57:15 -0700 (PDT)
Subject: [OSRS-PROJ] Orthographic Projections and MapServer
Message-ID: <200308212157.OAA27012@bilby.ucsd.edu>


Some thoughts that might be useful. This discussion suggests a way of
classifying projections:

	A. Map the sphere to a finite region on the plane; most projections
do this, even those defined for limited regions (in the sense that the math
will go from [lat,long] to [x,y]). (NB I am using "map" in the mathematical
sense).

	B. Map the sphere into an infinite region on the plane; eg Mercator.

	C. Map only a part of the sphere to a finite region on the plane;
eg orthographic.

	D. Map only a part of the sphere to an infinite region; eg gnomonic.

	It seems to me that this discussion raises a legitimate question about 
class C, and one that does fall within the domain of projections: how do we
want to define the mapping for the "unmapped" part of the sphere? We can
	
	1. Declare that the mapping function to be undefined, and return an
error code.

	2. Map such points to the edge of the mapped region on the plane.

	Option (2) would be historically nonstandard, but is just as much a
"valid function" as option (1)--there is no reason (that I can see) not to
define a "proj orthographic" (say) to map points on the rear hemisphere to the
edge, rather than declaring an error--and if this makes the graphics easier,
why not? (It does not solve the problem of how to continue a line to the
edge, but I agree that this is a graphics problem, not a projection one).
A quick review suggests that the number of projections in class (C) is small,
so perhaps a move from Option 1 to Option 2 would not be that difficult to
implement.

	Any of this make sense?

Thanks
Duncan Agnew
dagnew at ucsd.edu

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From Strebe at aol.com  Thu Aug 21 15:41:39 2003
From: Strebe at aol.com (Strebe at aol.com)
Date: Thu, 21 Aug 2003 18:41:39 -0400
Subject: [OSRS-PROJ] Orthographic Projections and MapServer
Message-ID: <42C74E21.00B7C72E.00055439@aol.com>


With regard to Option (2) and analysis, it seems very unwise to fail to distinguish between "unprojectable" and "horizon". There are critical reasons one might want to know whether a point is unprojectable:

a) A path construction engine will know to clip the path, rather than construct a crazy, manifold, bloated, "unidimensional" polygon. A crazy polygon cannot be edited practically afterward using vector graphics software, and may severely degrade performance in rasterization and color fills, or even cause such operations to fail entirely.

b) Distortion analysis software will know to discard the point from consideration rather than spuriously including it in statistics.

Regards,

daan Strebe
Geocart author
http://www.mapthematics.com/

_______________

Duncan Agnew <dagnew at ucsd.edu> writes:

Some thoughts that might be useful. This discussion suggests a way of
 classifying projections:
 
     A. Map the sphere to a finite region on the plane; most projections
 do this, even those defined for limited regions (in the sense that the math
 will go from [lat,long] to [x,y]). (NB I am using "map" in the mathematical
 sense).
 
     B. Map the sphere into an infinite region on the plane; eg Mercator.
 
     C. Map only a part of the sphere to a finite region on the plane;
 eg orthographic.
 
     D. Map only a part of the sphere to an infinite region; eg gnomonic.
 
     It seems to me that this discussion raises a legitimate question about 
 class C, and one that does fall within the domain of projections: how do we
 want to define the mapping for the "unmapped" part of the sphere? We can
     
     1. Declare that the mapping function to be undefined, and return an
 error code.
 
     2. Map such points to the edge of the mapped region on the plane.
 
     Option (2) would be historically nonstandard, but is just as much a
 "valid function" as option (1)--there is no reason (that I can see) not to
 define a "proj orthographic" (say) to map points on the rear hemisphere to the
 edge, rather than declaring an error--and if this makes the graphics easier,
 why not? (It does not solve the problem of how to continue a line to the
 edge, but I agree that this is a graphics problem, not a projection one).
 A quick review suggests that the number of projections in class (C) is small,
 so perhaps a move from Option 1 to Option 2 would not be that difficult to
 implement.
 
     Any of this make sense?
 
 Thanks
 Duncan Agnew
 dagnew at ucsd.edu
 

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Thu Aug 21 16:52:15 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 21 Aug 2003 19:52:15 -0400
Subject: [OSRS-PROJ] Orthographic Projections and MapServer
In-Reply-To: <42C74E21.00B7C72E.00055439@aol.com>
References: <42C74E21.00B7C72E.00055439@aol.com>
Message-ID: <1061509934.3534.19.camel@localhost>

The more I think about it, the more I think there may be a moderately
easy solution to limb clipping.  The stickiest problem I see at the
moment is how to determine what the condition is when all the points
defining the area to be filled are invisible.

Imagine this problem:

An orthographic view of the North Pole.  A set of data for the
Antarctic continent is given but all the points are invisible.

1. If the Antarctic continent area was to be filled then no
	fill operation is made.

2. If everything BUT the Antarctic continent is to be filled
	then everything inside the circular limb is filled.

Hmmm.  I think the solution to this problem again boils down to
the left-/right-handedness of the fill area to the vector sequence.

An additional note, I think previous notes about variations with
different projection will create different clipping problems is
correct and a table of methods will have to be established for
a graphic program.  I have done this manually in using my
ad hoc graphic procedure for PROJ.4 illustrations.
 
Time to dig out the dusty old graphics books and study the fill
problem.  :-(

-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From ron at lsl.co.uk  Fri Aug 22 01:16:31 2003
From: ron at lsl.co.uk (Ron Russell)
Date: Fri, 22 Aug 2003 09:16:31 +0100
Subject: [OSRS-PROJ] Orthographic Projections and MapServer
References: <42C74E21.00B7C72E.00055439@aol.com> <1061509934.3534.19.camel@localhost>
Message-ID: <010901c36885$b18fb470$2b5aa8c0@int.lsl.co.uk>

This discussion is surely about the limiting case of a more
general problem of how to define the limits of a particular
projection. 

For example it would be good to be able to
define the limits of a Transverse Mercator projection to
avoid the sillyness we have had of people trying to display
New Zealand in the British National Grid! ("The projected
space was available, so why not?"  was the response I
got!).

More seriously, we currently have a project that uses
world data as a background. There are two huge polygons
in this data (The American continent and Europe, Asia and
Africa). When this is displayed in British National Grid parts
of what I assume to be Siberia/Alaska appear in Europe
(presumably an artifact of the clipping of coordinates
approaching infinity).

I assume that these limits would have to be stored in terms of
Geographical Coordinates which leads to problems of deciding
their granularity. (I am assuming that the projection is independent
of the data; it certainly is in our systems).

Clipping to the limits would be done before projection using
spherical/ellipsoidal geometry. This seems
horrific, particularly for polygons, but then computing power is
becoming cheaper!

Finally, in my experience, clipping of polygons cannot be done
on the fly. You have to bite the bullet and do it all at once. Our
polygons contain holes (like the Great Lakes and the Caspian
Sea).

---------------------------------------------------------------------
Ron Russell
Senior Software Engineer, Laser-Scan
+44(0)1223 420414

http://www.laser-scan.com

> 


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Fri Aug 22 07:09:48 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 22 Aug 2003 10:09:48 -0400
Subject: [OSRS-PROJ] Orthographic Projections and MapServer
In-Reply-To: <010901c36885$b18fb470$2b5aa8c0@int.lsl.co.uk>
References: <42C74E21.00B7C72E.00055439@aol.com>
	 <1061509934.3534.19.camel@localhost>
	 <010901c36885$b18fb470$2b5aa8c0@int.lsl.co.uk>
Message-ID: <1061561388.2360.42.camel@localhost>

On Fri, 2003-08-22 at 04:16, Ron Russell wrote:
	...
> For example it would be good to be able to
> define the limits of a Transverse Mercator projection to
> avoid the sillyness we have had of people trying to display
> New Zealand in the British National Grid! ("The projected
> space was available, so why not?"  was the response I
> got!).

LOL.  I've seen the problem many times.  A frequent problem
for me were people who wanted to extend UTM across 10° of
longitude and expect the portions of the map to overlay
AMS sheets.

At one time I thought about putting a limit on the UTM
projection and reject points that were beyond the 3½° limit
but decided that I didn't want to listen to the bitching
and screaming from the users.  Let'em hang themselves.  ;-)
There's also the N/S limits.

> More seriously, we currently have a project that uses
> world data as a background. There are two huge polygons
> in this data (The American continent and Europe, Asia and
> Africa). When this is displayed in British National Grid parts
> of what I assume to be Siberia/Alaska appear in Europe
> (presumably an artifact of the clipping of coordinates
> approaching infinity).

You certainly do have problems.  What graphic package are you
using?

> I assume that these limits would have to be stored in terms of
> Geographical Coordinates which leads to problems of deciding
> their granularity. (I am assuming that the projection is independent
> of the data; it certainly is in our systems).
> 
> Clipping to the limits would be done before projection using
> spherical/ellipsoidal geometry. This seems
> horrific, particularly for polygons, but then computing power is
> becoming cheaper!

Two levels of clipping is certainly reasonable: first in the
geographic domain and secondly in the Cartesian domain.  I do
exactly that in my graphic applications.  Normally, clipping
in the geographic domain is not that computational intense---
about the same as Cartesian clipping.  But clipping in the
geographic domain is normally only done done on 180° delta
longitude from CM "wrap around."

> Finally, in my experience, clipping of polygons cannot be done
> on the fly. You have to bite the bullet and do it all at once. Our
> polygons contain holes (like the Great Lakes and the Caspian
> Sea).

The hole problem need not be done in the geographic domain but
deferred to the Cartesian level where standard procedures compensate
for data holes.  The linkage between the hole and outling vector sets
does need to be maintained.  See the PostScript manual for comments
about how they handle holes in fills.

> ---------------------------------------------------------------------
> Ron Russell
> Senior Software Engineer, Laser-Scan
> +44(0)1223 420414
> 
> http://www.laser-scan.com
	...
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From Strebe at aol.com  Fri Aug 22 08:53:07 2003
From: Strebe at aol.com (Strebe at aol.com)
Date: Fri, 22 Aug 2003 11:53:07 EDT
Subject: [OSRS-PROJ] Re: Orthographic Projections and MapServer
Message-ID: <a3.478fa12a.2c779663@aol.com>

Ron Russell <ron at lsl.co.uk> writes:

> I assume that these limits would have to be stored in terms of
> Geographical Coordinates which leads to problems of deciding
> their granularity. (I am assuming that the projection is independent
> of the data; it certainly is in our systems).
> 
> Clipping to the limits would be done before projection using
> spherical/ellipsoidal geometry. This seems
> horrific, particularly for polygons, but then computing power is
> becoming cheaper!
> 
> Finally, in my experience, clipping of polygons cannot be done
> on the fly. You have to bite the bullet and do it all at once. Our
> polygons contain holes (like the Great Lakes and the Caspian
> Sea).
> 

A properly written projection system supplies the domain of projection to 
client applications. This domain is the mathematical limits of the projection; 
not the "practical" limits. The projection system would also supply default 
outer boundaries in each aspect so that client applications don't do stupid things 
out of the box.

Hence, in the case of UTM, there would be no domain restrication but the 
projection would supply default boundaries of 3-1/2 degrees on either side of the 
prime meridian. (It is a little-known fact that the entire sphere is projected 
to a finite map in the ellipsoidal transverse Mercator; and in fact, it's an 
excellent world map as conformal projections go. [That contrasts with the 
spherical transverse Mercator, which projects to a map of infinite extent.] Having 
said that, however, UTM implementations normally employ series whose accuracy 
trends toward uselessness a few degrees away from the central meridian. In 
those cases the projection should declare a mathematical limit wherever the 
series breaks down into topological nonsense. Unfortunately few people bother to 
analyze their implementations that carefully, and in the end it doesn't much 
matter for a series approximation to Gauss-Kruger.)

The projection must supply a correct representation of the mathematical 
boundary. In some cases that would be a great circle or geodesic; in some cases a 
rhumb; in some cases something else entirely. The client application need know 
nothing specific about the outer path; it only needs a parametric 
representation. In other words, the projection package supplies an abstract path from 
which the client application can extract a lat/long pair given a parameter between 
0 and 1, inclusive. It should be clear that the outer path is the 
responsibility of the projection package, since it is the mathematics of the projection 
that defines the domain and range of projection.

The amount of computation required for this is not "horrific"; Geocart was 
doing it at quite useful speeds in 1990 on consumer hardware. And clipping 
polygons "on the fly" is a perfectly reasonable thing to be doing, whether your 
polygons contain holes or not.

If your work is limited to geodetic applications the some of this is 
irrelevant. It's critical in projections for small-scale maps, though.

Regards,

daan Strebe
Geocart author
<A HREF="http://www.mapthematics.com">http://www.mapthematics.com</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20030822/8091a73e/attachment.html>

From gerald.evenden at verizon.net  Fri Aug 22 11:25:03 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 22 Aug 2003 14:25:03 -0400
Subject: [OSRS-PROJ] Re: Orthographic Projections and MapServer
In-Reply-To: <a3.478fa12a.2c779663@aol.com>
References: <a3.478fa12a.2c779663@aol.com>
Message-ID: <1061576703.2360.85.camel@localhost>

On Fri, 2003-08-22 at 11:53, Strebe at aol.com wrote:
> Ron Russell <ron at lsl.co.uk> writes:
> 
> > I assume that these limits would have to be stored in terms of
> > Geographical Coordinates which leads to problems of deciding
> > their granularity. (I am assuming that the projection is independent
> > of the data; it certainly is in our systems).

I never understood the meaning of "granularity" here.

> > Clipping to the limits would be done before projection using
> > spherical/ellipsoidal geometry. This seems
> > horrific, particularly for polygons, but then computing power is
> > becoming cheaper!
> > 
> > Finally, in my experience, clipping of polygons cannot be done
> > on the fly. You have to bite the bullet and do it all at once. Our
> > polygons contain holes (like the Great Lakes and the Caspian
> > Sea).
> 
> 
> A properly written projection system supplies the domain of projection
> to client applications. This domain is the mathematical limits of the
> projection; not the "practical" limits. The projection system would
> also supply default outer boundaries in each aspect so that client
> applications don't do stupid things out of the box.


> Hence, in the case of UTM, there would be no domain restrication but
> the projection would supply default boundaries of 3-1/2 degrees on
> either side of the prime meridian. (It is a little-known fact that the
> entire sphere is projected to a finite map in the ellipsoidal
> transverse Mercator; and in fact, it's an excellent world map as
> conformal projections go. [That contrasts with the spherical
> transverse Mercator, which projects to a map of infinite extent.]

What nonsense.  If there was a closed form of the transverse Mercator
for the elliptical case, it would extend to infinity also.  The basis
of the math requires it.

>  Having said that, however, UTM implementations normally employ series
> whose accuracy trends toward uselessness a few degrees away from the
> central meridian. In those cases the projection should declare a
> mathematical limit wherever the series breaks down into topological
> nonsense. Unfortunately few people bother to analyze their
> implementations that carefully, and in the end it doesn't much matter
> for a series approximation to Gauss-Kruger.)

Extending more than 4° to 5° is pointless anyway.  Distortion starts
to take over and the map becomes useless as a cadastral tool.  For
larger extents (smaller scale) switching to spherical form is most
justified.  Mercator is just as useless a few degree from the equator
as the transverse form is from the CM.  The only reason Mercator is
so popular is for navigational maps is because simplified navigation
can be done with rhumb (straight) lines on the map.  For world
scale mapping Mercator in any form is terrible.

> The projection must supply a correct representation of the
> mathematical boundary. In some cases that would be a great circle or
> geodesic; in some cases a rhumb; in some cases something else
> entirely. The client application need know nothing specific about the
> outer path; it only needs a parametric representation. In other words,
> the projection package supplies an abstract path from which the client
> application can extract a lat/long pair given a parameter between 0
> and 1, inclusive. It should be clear that the outer path is the
> responsibility of the projection package, since it is the mathematics
> of the projection that defines the domain and range of projection.

Many projections do not have mathematical limits other than the
polar limit and one can extent the longitude indefinitely.  It
is not the projections duty to supply "boundary" information other
than indicate when the limits of the projection are exceeded because
they have no meaning in non-graphical usage.

In general, these comments are getting off track as I feel the basis
of the thread was to solve the problems of "mapserve" and not advertise
a graphics package.  A package, I might add, that package seems to be
only available for Apple systems.

> The amount of computation required for this is not "horrific"; Geocart
> was doing it at quite useful speeds in 1990 on consumer hardware. And
> clipping polygons "on the fly" is a perfectly reasonable thing to be
> doing, whether your polygons contain holes or not.

I do agree here, as I have indicated on previous comments in this
thread.

> If your work is limited to geodetic applications the some of this is
> irrelevant. It's critical in projections for small-scale maps, though.
> 

BTW, is the math for your Strebe-X projections published?

> Regards,
> 
> daan Strebe
> Geocart author
> http://www.mapthematics.com
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Fri Aug 22 11:43:25 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 22 Aug 2003 14:43:25 -0400
Subject: [OSRS-PROJ] Re: Orthographic Projections and MapServer
In-Reply-To: <1061576703.2360.85.camel@localhost>
References: <a3.478fa12a.2c779663@aol.com> <1061576703.2360.85.camel@localhost>
Message-ID: <3F46644D.3020002@pobox.com>

Gerald I. Evenden wrote:
> In general, these comments are getting off track as I feel the basis
> of the thread was to solve the problems of "mapserve" and not advertise
> a graphics package.  A package, I might add, that package seems to be
> only available for Apple systems.

daan / Gerald,

While I raised this issue with regard to MapServer, I brought it to the
osrs-proj list because I thought there might be a more general issue
that many applications using PROJ might need to solve dealing with "limits"
of various projections, and that it might be useful to include aspects of the
solution within PROJ.  So, I certainly feel that the discussion is going very
well, and I have learned alot.

Also, I am very pleased that daan (and others) are contributing and giving
some context on the issue from other projections packages and application
environments.  I don't think daan was out of line at all in relating his
experiences with his package.  It was hardly spammy self promotion without
relationship to the discussion.

One thing about which I have been very pleased is the evolution of the
osrs-proj list with members who don't even use the PROJ package, but who
have an interest in projections, and geodesy.

My take so far from the discussion is that:
  o It is not unreasonable for a coordinate systems package (taking the
    broader view of PROJ) to offer information about bounds of validity
    for a projection, though I for one don't forsee this being engineered into
    PROJ in the near future.

  o For the particular case of orthographic mapping, it should be practical to
    do some sort of polygon clipping in geographic space discarding anything
    more than 90 degrees away from the projection center.

  o More generally, it should be possible to use repeated subdivision to fairly
    closely identify where line segments cross the horizon, and though not
    trivial, even to clip polygons using a similar mechanism for the general
    case.

I would like to implement the polygon clipping methods in MapServer, but it
sounds hard enough that I am unlikely to do it on my own in the near future.
If Gerald, or anyone else wants to take a crack at it in a general form I
would be willing to take the time to adopt it in MapServer.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From nhv at cape.com  Fri Aug 22 12:15:09 2003
From: nhv at cape.com (Norman Vine)
Date: Fri, 22 Aug 2003 15:15:09 -0400
Subject: [OSRS-PROJ] Orthographic Projections and MapServer
In-Reply-To: <1061509934.3534.19.camel@localhost>
Message-ID: <EKEJIKAILPONGGENMBGAIEJAEHAA.nhv@cape.com>

Gerald I. Evenden writes:
> 
> The more I think about it, the more I think there may be a moderately
> easy solution to limb clipping.  The stickiest problem I see at the
> moment is how to determine what the condition is when all the points
> defining the area to be filled are invisible.
> 
> Imagine this problem:
> 
> An orthographic view of the North Pole.  A set of data for the
> Antarctic continent is given but all the points are invisible.
> 
> 1. If the Antarctic continent area was to be filled then no
> 	fill operation is made.
> 
> 2. If everything BUT the Antarctic continent is to be filled
> 	then everything inside the circular limb is filled.
> 
> Hmmm.  I think the solution to this problem again boils down to
> the left-/right-handedness of the fill area to the vector sequence.

HeHe a good one, but luckily one with a reasonably simple solution.

For case (2) above you aren't trying to draw the polgon representing 
the Antartic continent. You are drawing the polygon that is obtained by 
subtracting the polygon that represents the Antartic continent from a sphere.
Once one has derived this polygon it is a straight forward operation again

Cheers

Norman
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Fri Aug 22 17:27:13 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 22 Aug 2003 20:27:13 -0400
Subject: [OSRS-PROJ] Re: Orthographic Projections and MapServer
In-Reply-To: <3F46644D.3020002@pobox.com>
References: <a3.478fa12a.2c779663@aol.com>
	 <1061576703.2360.85.camel@localhost>  <3F46644D.3020002@pobox.com>
Message-ID: <1061598430.2389.68.camel@localhost>

On Fri, 2003-08-22 at 14:43, Frank Warmerdam wrote:
	...
> My take so far from the discussion is that:
>   o It is not unreasonable for a coordinate systems package (taking the
>     broader view of PROJ) to offer information about bounds of validity
>     for a projection, though I for one don't forsee this being engineered into
>     PROJ in the near future.

Here I take the same position that I do with datum operations and
maintain that the projection operations are as independent
parts as many other mathematical/programmatic aspect of a larger
operation.
 
>   o For the particular case of orthographic mapping, it should be practical to
>     do some sort of polygon clipping in geographic space discarding anything
>     more than 90 degrees away from the projection center.

I would say the general class of azimuthal perspectives have the same
problem.

>   o More generally, it should be possible to use repeated subdivision to fairly
>     closely identify where line segments cross the horizon, and though not
>     trivial, even to clip polygons using a similar mechanism for the general
>     case.

Code exists clipping lines on the limb.  The hassle here is handling
the problem of how to join the polygon-limb intersects and the
hidden region problem.

> I would like to implement the polygon clipping methods in MapServer, but it
> sounds hard enough that I am unlikely to do it on my own in the near future.
> If Gerald, or anyone else wants to take a crack at it in a general form I
> would be willing to take the time to adopt it in MapServer.

I have looked at portions of the MapServer code and I am fairly
comfortable with the style.  But, and a big but, I am not familiar
with:

1. the overall flow,

2. the graphic engine it uses

3. and working in the networking environment.

If it can function on a stand alone system then I think I can work on
it and leave network testing for someone else.

I did run configure and determined that I need to plug a couple of
packages into my system and modify the code to link to libproj4
(this looks easy).  I think I have all the stuff on my source
distribution DVD.  But I will have to download a couple of items
from OSRS-PROJ.

I do note one problem, configure looks for GD 2.0.12 or higher
and I only have 2.0.9 on a 2003 distribution disk.  Hmmmm.
Have to google around and find the home for this package.

I wish this package output to PostScript so it would be useful
for Hi-res hard copy like pdf.

Looks like a few days just to install this thing and several
more learning how to use it.  Modifying it is another story.

If someone is willing to be bugged a few times a day for about
a week, I would give it a try.

> Best regards,
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From warmerdam at pobox.com  Fri Aug 22 19:17:01 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 22 Aug 2003 22:17:01 -0400
Subject: [OSRS-PROJ] Re: Orthographic Projections and MapServer
In-Reply-To: <1061598430.2389.68.camel@localhost>
References: <a3.478fa12a.2c779663@aol.com>	 <1061576703.2360.85.camel@localhost>  <3F46644D.3020002@pobox.com> <1061598430.2389.68.camel@localhost>
Message-ID: <3F46CE9D.8020202@pobox.com>

Gerald I. Evenden wrote:
> I have looked at portions of the MapServer code and I am fairly
> comfortable with the style.  But, and a big but, I am not familiar
> with:
> 
> 1. the overall flow,
> 
> 2. the graphic engine it uses
> 
> 3. and working in the networking environment.
> 
> If it can function on a stand alone system then I think I can work on
> it and leave network testing for someone else.
> 
> I did run configure and determined that I need to plug a couple of
> packages into my system and modify the code to link to libproj4
> (this looks easy).  I think I have all the stuff on my source
> distribution DVD.  But I will have to download a couple of items
> from OSRS-PROJ.

Gerald,

You shouldn't need to many other packages other than GD.  You can do
without GDAL if you just want to do shapefile to PNG.  I can provide
the world shapefile dataset and a .map file demonstrating the orthographic
problem.  You can also use mapserver in "command line" form, which I do
for most of my testing.  So for instance, something like:

shp2img -m test.map -o out.png

Easy to debug though it then, no network interaction then.

For working on the code, I would suggest you implement an
msProjectShapeWithClipping() function in mapproject.c to the
same API as msProjectShape() or something to that effect.   The
msProjectShape() function is called for all reprojections of points,
lines and areas.  If you investigate the shapeObj closely you should
be able to see how the different geometry types are handled.

> I do note one problem, configure looks for GD 2.0.12 or higher
> and I only have 2.0.9 on a 2003 distribution disk.  Hmmmm.
> Have to google around and find the home for this package.

GD can be found at:
   http://www.boutell.com/gd/

> I wish this package output to PostScript so it would be useful
> for Hi-res hard copy like pdf.

There is support for output to pdf format (and flash) but I
don't know how good the quality of this rendering engine is.  The
"gd" renderer is most widely used.  If you want pdf support you
will need to configure and link with pdflib.

> Looks like a few days just to install this thing and several
> more learning how to use it.  Modifying it is another story.
> 
> If someone is willing to be bugged a few times a day for about
> a week, I would give it a try.

I would be happy to answer any questions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From Strebe at aol.com  Fri Aug 22 20:59:00 2003
From: Strebe at aol.com (Strebe at aol.com)
Date: Fri, 22 Aug 2003 23:59:00 EDT
Subject: [OSRS-PROJ] Concerning calumny and the ellipsoidal transverse Mercator
Message-ID: <cc.215a26bf.2c784084@aol.com>


In the "Orthographic Projections and MapServer" thread, Gerald I. Evenden <
gerald.evenden at verizon.net> writes:

> What nonsense.  If there was a closed form of the transverse Mercator
> for the elliptical case, it would extend to infinity also.  The basis
> of the math requires it.
> 
No, Mr. Evenden; I'm afraid it is your objection which is nonsense, though I 
certainly understand the skepticism: exceedingly few people know of the finite 
nature of the ellipsoidal transverse Mercator, and it certainly defies 
intuition. It was first brought to my attention by a Dr. David E. Wallis of 
Glendale, California, who is expert in elliptical integrals and harmonic functions. I 
gather he discovered that fact independently, though it hardly seems likely 
that Krüger or the great Gauss was unaware of it.

The lower the eccentricity, the greater the extent of the map on the plane, 
until at zero eccentricity the map becomes infinite. For earthlike spheroids, 
however, the map is indeed finite and a very pleasing and unexpected shape, and 
its areal inflation is vastly less than any other conformal map of the entire 
sphere (or spheroid) in my acquaintance. I would be happy to introduce you to 
the mathematics. My own very modest contribution was to construct an 
iterative solution to the basic equations, one which can be computed to any desired 
accuracy. I'll publish that, as well as a large number of other papers on the 
topic of small scale map projections, after I finish rewriting Geocart.

Because the finite nature of the ellipsoidal transverse Mercator is so rarely 
known, and because no numeric solutions have ever been published, and because 
there is no geodetic need for such a projection, it is entirely likely that I 
have produced the only images of the projection ever made. I would be happy 
to make some available if anyone is interested.

> Extending more than 4° to 5° is pointless anyway.  Distortion starts
> to take over and the map becomes useless as a cadastral tool.
> 
Naturally; that is why I clearly stated that my comments apply to small-scale 
projections.

> For world scale mapping Mercator in any form is terrible.
> 
While it is true that the Mercator has been misused commonly for centuries, 
it seems hyperbole to dismiss it entirely. Firstly, straight rhumbs are 
interesting and useful even on world maps, as long as that reason for choosing 
Mercator is clear to the observer; secondly, if it is reasonable to produce an 
equal-area cylindrical world map (Peters) then it is also reasonable to produce a 
conformal cylindrical world map; and thirdly, as I mention above, the 
ellipsoidal transverse Mercator makes an unexpectedly good conformal world map.

> Many projections do not have mathematical limits other than the
> polar limit and one can extent the longitude indefinitely.  It
> is not the projections duty to supply "boundary" information other
> than indicate when the limits of the projection are exceeded because
> they have no meaning in non-graphical usage.
> 
The fact that many projections have no mathematical bounds does not excuse 
the projection engine from supplying bounds for those many projections that do 
have mathematical bounds. It is the projection, and the projection only, that 
knows what those bounds are. It makes no sense to supply a projection to a 
graphics engine if the graphics engine cannot properly draw it due to incomplete 
information. I have no quarrel with PROJ's philosophy if its intent is purely 
cadastral. However, the topic arose in the context of the orthographic 
projection, which has no cadastral use. It is clear that graphics programs *are* 
having difficulty drawing small-scale maps, and they will continue having problems 
drawing small-scale maps if they are not supplied complete information. If you 
do not view that responsibility to be PROJ's, yet you do view the 
orthographic projection transformation to be the responsibility of PROJ's, then I'm 
completely confused about your philosophy, and I doubt from any failing in my 
intellect.

> In general, these comments are getting off track as I feel the basis
> of the thread was to solve the problems of "mapserve" and not advertise
> a graphics package.  A package, I might add, that package seems to be
> only available for Apple systems.
> 
I am disappointed that you have chosen to interpret my intent so cynically. 
The fact that Geocart is available only on Macintosh is irrelevant, since I am 
not advertising Geocart on this list. My comments, I believe, bore direct 
relevance to solving, or at least clarifying, mapserve's problem. Because I wrote 
Geocart and because Geocart has solved all these problems this thread has been 
discussing, it hardly seems inappropriate for me to invoke it. I've been a 
member of this list for several years now. If my intent were to spam you with 
advertising, it would have happened long ago.

> BTW, is the math for your Strebe-X projections published?
> 
It is not, and I don't consider most of them worth publishing. However, the 
one titled simply "Strebe" is a particular case of a completely general and 
heretofore unobserved method of generating useful equal-area projections. I will 
publish that one. The theory is simple enough: If Projection A is equal-area, 
and Projection B is equal-area, and Projection C is equal-area, then you may 
produce an equal-area projection D by applying the transformation

A->B

to C, insofar as you have first scaled C such that its range lies entirely 
within A's range. The same strategem can be employed in conformal maps.

Regards,

daan Strebe
Geocart author
http://www.mapthematics.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20030822/e3f269d8/attachment.html>

From steve.lime at dnr.state.mn.us  Fri Aug 22 21:03:24 2003
From: steve.lime at dnr.state.mn.us (Steve Lime)
Date: Fri, 22 Aug 2003 23:03:24 -0500
Subject: [OSRS-PROJ] Re: Orthographic Projections and MapServer
Message-ID: <sf46a146.091@co5.dnr.state.mn.us>

I'd also be glad to help with details on internals, rendering engine and
so on. Just let me know what you need. We appreciate the help!

Steve

>>> warmerdam at pobox.com 08/22/03 9:17 PM >>>
Gerald I. Evenden wrote:
> I have looked at portions of the MapServer code and I am fairly
> comfortable with the style.  But, and a big but, I am not familiar
> with:
> 
> 1. the overall flow,
> 
> 2. the graphic engine it uses
> 
> 3. and working in the networking environment.
> 
> If it can function on a stand alone system then I think I can work on
> it and leave network testing for someone else.
> 
> I did run configure and determined that I need to plug a couple of
> packages into my system and modify the code to link to libproj4
> (this looks easy).  I think I have all the stuff on my source
> distribution DVD.  But I will have to download a couple of items
> from OSRS-PROJ.

Gerald,

You shouldn't need to many other packages other than GD.  You can do
without GDAL if you just want to do shapefile to PNG.  I can provide
the world shapefile dataset and a .map file demonstrating the
orthographic
problem.  You can also use mapserver in "command line" form, which I do
for most of my testing.  So for instance, something like:

shp2img -m test.map -o out.png

Easy to debug though it then, no network interaction then.

For working on the code, I would suggest you implement an
msProjectShapeWithClipping() function in mapproject.c to the
same API as msProjectShape() or something to that effect.   The
msProjectShape() function is called for all reprojections of points,
lines and areas.  If you investigate the shapeObj closely you should
be able to see how the different geometry types are handled.

> I do note one problem, configure looks for GD 2.0.12 or higher
> and I only have 2.0.9 on a 2003 distribution disk.  Hmmmm.
> Have to google around and find the home for this package.

GD can be found at:
   http://www.boutell.com/gd/

> I wish this package output to PostScript so it would be useful
> for Hi-res hard copy like pdf.

There is support for output to pdf format (and flash) but I
don't know how good the quality of this rendering engine is.  The
"gd" renderer is most widely used.  If you want pdf support you
will need to configure and link with pdflib.

> Looks like a few days just to install this thing and several
> more learning how to use it.  Modifying it is another story.
> 
> If someone is willing to be bugged a few times a day for about
> a week, I would give it a try.

I would be happy to answer any questions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From paul at toolscenter.org  Sat Aug 23 06:14:39 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Sat, 23 Aug 2003 22:14:39 +0900
Subject: [OSRS-PROJ] Winkel Tripel or Winkel 3 Projection
References: <sf46a146.091@co5.dnr.state.mn.us>
Message-ID: <000c01c36978$84bfa510$700201c0@MAPQUEST.local>

Hello All,
Is there a proj4-based implementation of these projection type anywhere?
Or is there any proj4 support for compound projections?

Finally, is Gerald I. Evenden's site down?
http://members.bellatlantic.net/~vze2hc4d/proj4/

I have tried several times to access it without success.

Best regards,
Paul.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Sat Aug 23 06:44:21 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 23 Aug 2003 09:44:21 -0400
Subject: [OSRS-PROJ] Winkel Tripel or Winkel 3 Projection
In-Reply-To: <000c01c36978$84bfa510$700201c0@MAPQUEST.local>
References: <sf46a146.091@co5.dnr.state.mn.us>
	 <000c01c36978$84bfa510$700201c0@MAPQUEST.local>
Message-ID: <1061646261.2371.12.camel@localhost>

On Sat, 2003-08-23 at 09:14, Paul Selormey wrote:
> Hello All,
> Is there a proj4-based implementation of these projection type anywhere?
> Or is there any proj4 support for compound projections?

Winkel Tripel is in the proj system.

Can't find any reference to Winkel III in Snyder's works.
If you have a reference, I'd like to look at it.

> Finally, is Gerald I. Evenden's site down?
> http://members.bellatlantic.net/~vze2hc4d/proj4/

Not that I know of.  I clicked the above and it came up.

> I have tried several times to access it without success.

Someone else try and report, please.  Thanks.

> Best regards,
> Paul.
> 
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From nhv at cape.com  Sat Aug 23 07:13:46 2003
From: nhv at cape.com (Norman Vine)
Date: Sat, 23 Aug 2003 10:13:46 -0400
Subject: [OSRS-PROJ] Winkel Tripel or Winkel 3 Projection
In-Reply-To: <1061646261.2371.12.camel@localhost>
Message-ID: <EKEJIKAILPONGGENMBGAGELAEHAA.nhv@cape.com>

Gerald I. Evenden writes:
>
> > Finally, is Gerald I. Evenden's site down?
> > http://members.bellatlantic.net/~vze2hc4d/proj4/
> 
> Not that I know of.  I clicked the above and it came up.
> 
> > I have tried several times to access it without success.
> 
> Someone else try and report, please.

Works from here

Norman
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From paul at toolscenter.org  Sat Aug 23 07:17:28 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Sat, 23 Aug 2003 23:17:28 +0900
Subject: [OSRS-PROJ] Winkel Tripel or Winkel 3 Projection
References: <sf46a146.091@co5.dnr.state.mn.us> <000c01c36978$84bfa510$700201c0@MAPQUEST.local> <1061646261.2371.12.camel@localhost>
Message-ID: <001401c36981$4a232220$700201c0@MAPQUEST.local>

Thanks for the reply and the information.

> Winkel Tripel is in the proj system.

Sorry, I found it in the Aitoff implementation file, I was looking for
a file solely Winkel Tripel :-( since there as one for Winkel 1 and 2.

> Can't find any reference to Winkel III in Snyder's works.
> If you have a reference, I'd like to look at it.

I do not know, but is it different from Winkel Tripel? I was looking for
something of compound projections to satisfy the OpenGIS interfaces.
We found a Japanese document which named one as Winkel 3. ESRI's
"Understanding Map Projections" book named Winkel Tripel, not using
the term compound projection anyway.

> > Finally, is Gerald I. Evenden's site down?
> > http://members.bellatlantic.net/~vze2hc4d/proj4/
>
> Not that I know of.  I clicked the above and it came up.
>
> > I have tried several times to access it without success.

I do not know why, I was using IE 6.x. I have just tried it again in
Mozilla Firebird and without success. The firebird displayed a message box

"The connection was refused when attempting to contact
members.bellatlantic.net"

Best regards,
Paul.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From ed at topozone.com  Sat Aug 23 07:16:49 2003
From: ed at topozone.com (Ed McNierney)
Date: Sat, 23 Aug 2003 10:16:49 -0400
Subject: [OSRS-PROJ] Winkel Tripel or Winkel 3 Projection
Message-ID: <13858AA1A74F30419F319ACB66A9D1222C0004@mercator.topozone.com>

Yes, works for me, too.  At least Norman and I can confirm it seems to
work within Massachusetts <g>.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242  Fax: (978) 251-1396
ed at topozone.com


-----Original Message-----
From: Norman Vine [mailto:nhv at cape.com] 
Sent: Saturday, August 23, 2003 10:14 AM
To: osrs-proj at remotesensing.org
Subject: RE: [OSRS-PROJ] Winkel Tripel or Winkel 3 Projection

Gerald I. Evenden writes:
>
> > Finally, is Gerald I. Evenden's site down?
> > http://members.bellatlantic.net/~vze2hc4d/proj4/
> 
> Not that I know of.  I clicked the above and it came up.
> 
> > I have tried several times to access it without success.
> 
> Someone else try and report, please.

Works from here

Norman
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.
----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From paul at toolscenter.org  Sat Aug 23 07:21:32 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Sat, 23 Aug 2003 23:21:32 +0900
Subject: [OSRS-PROJ] Vertical Projection
References: <sf46a146.091@co5.dnr.state.mn.us> <000c01c36978$84bfa510$700201c0@MAPQUEST.local> <1061646261.2371.12.camel@localhost>
Message-ID: <001f01c36981$dbacabd0$700201c0@MAPQUEST.local>

Any open source/public domain work on vertical projections/datums
similar to proj4?

Also, Engineering projection as defined in the EPSG projections reference?

Just trying to see if I could work out a package what will satisfy the 
OpenGIS specifications.

Best regards,
Paul.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Sat Aug 23 08:25:37 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 23 Aug 2003 11:25:37 -0400
Subject: [OSRS-PROJ] Concerning calumny and the ellipsoidal transverse
	Mercator
In-Reply-To: <cc.215a26bf.2c784084@aol.com>
References: <cc.215a26bf.2c784084@aol.com>
Message-ID: <1061652336.2371.113.camel@localhost>

On Fri, 2003-08-22 at 23:59, Strebe at aol.com wrote:
> In the "Orthographic Projections and MapServer" thread, Gerald I.
> Evenden <gerald.evenden at verizon.net> writes:
> 
> > What nonsense.  If there was a closed form of the transverse
> > Mercator
> > for the elliptical case, it would extend to infinity also.  The
> > basis
> > of the math requires it.
> 
> No, Mr. Evenden; I'm afraid it is your objection which is nonsense,
> though I certainly understand the skepticism: exceedingly few people
> know of the finite nature of the ellipsoidal transverse Mercator, and
> it certainly defies intuition. It was first brought to my attention by
> a Dr. David E. Wallis of Glendale, California, who is expert in
> elliptical integrals and harmonic functions. I gather he discovered
> that fact independently, though it hardly seems likely that Krüger or
> the great Gauss was unaware of it.
>
> The lower the eccentricity, the greater the extent of the map on the
> plane, until at zero eccentricity the map becomes infinite. For
> earthlike spheroids, however, the map is indeed finite and a very
> pleasing and unexpected shape, and its areal inflation is vastly less
> than any other conformal map of the entire sphere (or spheroid) in my
> acquaintance. I would be happy to introduce you to the mathematics. My
> own very modest contribution was to construct an iterative solution to
> the basic equations, one which can be computed to any desired
> accuracy. I'll publish that, as well as a large number of other papers
> on the topic of small scale map projections, after I finish rewriting
> Geocart.
> 
> Because the finite nature of the ellipsoidal transverse Mercator is so
> rarely known, and because no numeric solutions have ever been
> published, and because there is no geodetic need for such a
> projection, it is entirely likely that I have produced the only images
> of the projection ever made. I would be happy to make some available
> if anyone is interested.

It is difficult for me to refrain from becoming a bit sarcastic here
as your story sounds like a tabloid exposure.  I will remain a
sceptic until I see peer review publication.

> > Extending more than 4° to 5° is pointless anyway.  Distortion starts
> > to take over and the map becomes useless as a cadastral tool.
> 
> Naturally; that is why I clearly stated that my comments apply to
> small-scale projections.
> 
> > For world scale mapping Mercator in any form is terrible.
> 
> While it is true that the Mercator has been misused commonly for
> centuries, it seems hyperbole to dismiss it entirely. Firstly,
> straight rhumbs are interesting and useful even on world maps, as long
> as that reason for choosing Mercator is clear to the observer;
> secondly, if it is reasonable to produce an equal-area cylindrical
> world map (Peters) then it is also reasonable to produce a conformal
> cylindrical world map; and thirdly, as I mention above, the
> ellipsoidal transverse Mercator makes an unexpectedly good conformal
> world map.

Use of Mercator in a cartographic educational sense is OK, certainly
in demonstration of its distortion and rhumb lines.  At the moment I
can't think of any practical application of rhumb lines except in
large-scale manual navigation.

As for conformity, its application is limited to large-scale
cadastral mapping.  Conformity is a concept which only
applies to the infinitesimal region about a point.  At a distance
distortion is quickly apparent and eventually becomes extreme.
Conformal projection for global presentations is most useful to
demonstrate the limitation of conformal projections.

As for the Peter's projection (a perverse use of the well known
cylindrical equal area) it has been severely criticized by well
know cartographers.

There are reasons for picking certain projections but in general,
my basic recommendation is one of the equal area systems which preserve
the concept of region size.  There are also some good small scale
projections which minimize overall distortion but are neither
conformal nor equal area.

> > Many projections do not have mathematical limits other than the
> > polar limit and one can extent the longitude indefinitely.  It
> > is not the projections duty to supply "boundary" information other
> > than indicate when the limits of the projection are exceeded because
> > they have no meaning in non-graphical usage.
> 
> The fact that many projections have no mathematical bounds does not
> excuse the projection engine from supplying bounds for those many
> projections that do have mathematical bounds. It is the projection,
> and the projection only, that knows what those bounds are. It makes no
> sense to supply a projection to a graphics engine if the graphics
> engine cannot properly draw it due to incomplete information. I have
> no quarrel with PROJ's philosophy if its intent is purely cadastral.
> However, the topic arose in the context of the orthographic
> projection, which has no cadastral use. It is clear that graphics
> programs *are* having difficulty drawing small-scale maps, and they
> will continue having problems drawing small-scale maps if they are not
> supplied complete information. If you do not view that responsibility
> to be PROJ's, yet you do view the orthographic projection
> transformation to be the responsibility of PROJ's, then I'm completely
> confused about your philosophy, and I doubt from any failing in my
> intellect.

>From my own experience plotting global maps, the problem is not where
the boundary is but what do you do with it.  My mapping as been purely
vector so the effect of the edges more easily handled than the fill
problem.

The proj library does indicate when points are out of bounds.  In some
cases it would be very difficult to provide an analytic function
defining the projection boundary and the nature of this function
will mathematically.  Even if the function is known, the determination
of the intersect with the limiting function and the vector is just
about as complicated as determining the intersection by using the
projection itself.

Lastly, like the cadastral people supply their addenda to meet their
need, the datum conversion group add their addenda, then why shouldn't
the graphic types do the same.

	<deleted material>
> 
> Regards,
> 
> daan Strebe
> Geocart author
http://www.mapthematics.com/
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Sat Aug 23 09:03:52 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 23 Aug 2003 12:03:52 -0400
Subject: [OSRS-PROJ] Winkel Tripel or Winkel 3 Projection
In-Reply-To: <001401c36981$4a232220$700201c0@MAPQUEST.local>
References: <sf46a146.091@co5.dnr.state.mn.us>
	 <000c01c36978$84bfa510$700201c0@MAPQUEST.local>
	 <1061646261.2371.12.camel@localhost>
	 <001401c36981$4a232220$700201c0@MAPQUEST.local>
Message-ID: <1061654632.2372.146.camel@localhost>

On Sat, 2003-08-23 at 10:17, Paul Selormey wrote:
> Thanks for the reply and the information.
> 
> > Winkel Tripel is in the proj system.
> 
> Sorry, I found it in the Aitoff implementation file, I was looking for
> a file solely Winkel Tripel :-( since there as one for Winkel 1 and 2.

Many projections have very similar computations and can be
processed with one set of equations that have constants altered
or minor path variations.  These are lumped into a single
C file with multiple initialization entry points.

> > Can't find any reference to Winkel III in Snyder's works.
> > If you have a reference, I'd like to look at it.
> 
> I do not know, but is it different from Winkel Tripel? I was looking for
> something of compound projections to satisfy the OpenGIS interfaces.
> We found a Japanese document which named one as Winkel 3. ESRI's
> "Understanding Map Projections" book named Winkel Tripel, not using
> the term compound projection anyway.

I think the term "composite" needs some defining.  At first
I thought you meant something like Goode's projection where
two different projections are used in two different regions.
In Winkel-Tripel, the Aitoff projection and the equirectangular
are averaged.

The time-line for W1, W2 and WT is 1914, 1915 and 1921 so
WT might be Winkel's third projection. (?)

> > > Finally, is Gerald I. Evenden's site down?
> > > http://members.bellatlantic.net/~vze2hc4d/proj4/
> >
> > Not that I know of.  I clicked the above and it came up.
> >
> > > I have tried several times to access it without success.
> 
> I do not know why, I was using IE 6.x. I have just tried it again in
> Mozilla Firebird and without success. The firebird displayed a message box
> 
> "The connection was refused when attempting to contact
> members.bellatlantic.net"
> 
> Best regards,
> Paul.
> 
> ----------------------------------------
> PROJ.4 Discussion List
> See http://www.remotesensing.org/proj for subscription, unsubscription
> and other information.
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From Strebe at aol.com  Sat Aug 23 16:53:06 2003
From: Strebe at aol.com (Strebe at aol.com)
Date: Sat, 23 Aug 2003 19:53:06 EDT
Subject: [OSRS-PROJ] Re: Concerning calumny and the ellipsoidal transverse Mercator
Message-ID: <c1.35aa65a8.2c795862@aol.com>


Gerald I. Evenden <gerald.evenden at verizon.net> writes:

   I wrote:
> > Because the finite nature of the ellipsoidal transverse Mercator is so
> > rarely known, and because no numeric solutions have ever been
> > published, and because there is no geodetic need for such a
> > projection, it is entirely likely that I have produced the only images
> > of the projection ever made. I would be happy to make some available
> > if anyone is interested.
> 
> It is difficult for me to refrain from becoming a bit sarcastic here
> as your story sounds like a tabloid exposure.  I will remain a
> sceptic until I see peer review publication.
> 
So, I offered to supply the mathematics of the scenario, which is the final 
authority. However, you prefer to see an annotation in a peer-reviewed journal. 
Presumably that is because you do not feel qualified to analyze the 
mathematics. If that is so then it seems odd that you feel qualified to dispense 
skepticism, not to mention ridicule.

Here is one reference; I imagine there are more, probably in Lee's and 
Thompson's papers:

"The transverse Mercator projection is one of the most extensively used in 
large scale topographic mapping. Closed equations of chiefly academic  interest 
are given here, rearranged from Lee's and Thompson's work with the Gauss-Kr
üger ellipsoidal adaptation of Lambert's original work. In this version, the map 
is conformal everywhere, and the central meridian is standard. The entire map 
is finite, unlike the spherical version which extends to infinity."

-- J.P. Snyder, "Calculating Map Projections for the Ellipsoid", The American 
Cartographer, Vol. 6, No. 1, April 1979.


> As for conformity, its application is limited to large-scale
> cadastral mapping.  Conformity is a concept which only
> applies to the infinitesimal region about a point.  At a distance
> distortion is quickly apparent and eventually becomes extreme.
> Conformal projection for global presentations is most useful to
> demonstrate the limitation of conformal projections.
> 
Not so. Conformal maps of any extent are useful for showing accurate shapes 
over short distances. The shapes of (for example) small islands, short 
coastline segments, or provincial boundaries are correct on any conformal map. That is 
a valuable property. It is also true that local directions are correct once 
north has been established. I encourage you to loosen up your thinking a bit. 
Rigidity is not rigor.

> As for the Peter's projection (a perverse use of the well known
> cylindrical equal area) it has been severely criticized by well
> know cartographers.
> 
Peters made all sorts of ridiculous claims concerning "his" projection. On 
the other hand, cylindrical equal-area projections do have reasonable, if 
limited, uses. For instance, if you need a single, basic projection whose central 
meridian must be able to move freely without changing the shapes of mapped 
objects, then you are restricted to cylindrical projections. You yourself recommend 
equal-area projections; hence Peters must be useful. Yes, that's a limited 
use, but any small-scale projection is limited in use.

> In some
> cases it would be very difficult to provide an analytic function
> defining the projection boundary and the nature of this function
> will mathematically.  Even if the function is known, the determination
> of the intersect with the limiting function and the vector is just
> about as complicated as determining the intersection by using the
> projection itself.
> 
As I indicated in my original post, it is not necessary to provide an 
analytic function defining the projection boundary. It is only necessary to supply a 
parametric function that provides spherical coordinates defining boundary 
segments. Yes; it's a bit of work, but it's also impossible to draw boundaries 
without it. If that is not PROJ's purview, then fine, but you cannot dismiss the 
need for such facility amongst perfectly reasonable clients of software 
packages such as PROJ.

> Lastly, like the cadastral people supply their addenda to meet their
> need, the datum conversion group add their addenda, then why shouldn't
> the graphic types do the same.
> 
Because the job of describing the outer boundary is that of the projection's, 
not the client's. It's the projection which knows, or ought to know, its own 
boundary. If the client must supply the boundary definition for any arbitrary 
projection then the client might as well just implement the projection 
transformations as well. The two are not separable. If your position is that PROJ is 
not for graphical clients then your position seems tenable to me; otherwise it 
does not.

My intent is not to criticize PROJ. My intent is to discuss matters relevant 
to those who use   it. A particular graphical user has run into a problem, one 
he probably considered to be minor. Far from minor, the problem is 
fundamental to the graphical display of map projections. It's not to be taken lightly. 
In any case, I am finished discussing these topics with Mr. Evenden publicly. 
If anyone needs further information on these topics feel free to contact me 
directly or on the list if it merits public attention.

Regards,

daan Strebe
Geocart author
http://www.mapthematics.com/


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20030823/c5b24452/attachment.html>

From paul at toolscenter.org  Sat Aug 23 17:06:29 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Sun, 24 Aug 2003 09:06:29 +0900
Subject: [OSRS-PROJ] Winkel Tripel or Winkel 3 Projection
References: <sf46a146.091@co5.dnr.state.mn.us> <000c01c36978$84bfa510$700201c0@MAPQUEST.local> <1061646261.2371.12.camel@localhost> <001401c36981$4a232220$700201c0@MAPQUEST.local> <1061654632.2372.146.camel@localhost>
Message-ID: <000e01c369d3$92fe6f70$700201c0@MAPQUEST.local>

Thanks for the reply.

> I think the term "composite" needs some defining.  At first
> I thought you meant something like Goode's projection where
> two different projections are used in two different regions.
> In Winkel-Tripel, the Aitoff projection and the equirectangular
> are averaged.

The OpenGIS and EPSG used the term "Compound" and the meaning
could be taken from this extract from the OpenGIS specifications

"This indicates a compound coordinate system, which combines the coordinate
of two other
coordinate systems. For example, a compound 3D coordinate system could be
made up of a
horizontal coordinate system and a vertical coordinate system."

> The time-line for W1, W2 and WT is 1914, 1915 and 1921 so
> WT might be Winkel's third projection. (?)

We were probably misled by the Japanese document to think there was a "W3".
Could be a language/translation problem - or yet another Japanese simplified
term :-)

Best regards,
Paul.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Sat Aug 23 18:59:34 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 23 Aug 2003 21:59:34 -0400
Subject: [OSRS-PROJ] Re: Concerning calumny and the ellipsoidal
	transverse Mercator
In-Reply-To: <c1.35aa65a8.2c795862@aol.com>
References: <c1.35aa65a8.2c795862@aol.com>
Message-ID: <1061690374.2371.281.camel@localhost>

On Sat, 2003-08-23 at 19:53, Strebe at aol.com wrote:
> Gerald I. Evenden <gerald.evenden at verizon.net> writes:
> 
>   I wrote:
> > > Because the finite nature of the ellipsoidal transverse Mercator
> > is so
> > > rarely known, and because no numeric solutions have ever been
> > > published, and because there is no geodetic need for such a
> > > projection, it is entirely likely that I have produced the only
> > images
> > > of the projection ever made. I would be happy to make some
> > available
> > > if anyone is interested.
> 
> > It is difficult for me to refrain from becoming a bit sarcastic here
> > as your story sounds like a tabloid exposure.  I will remain a
> > sceptic until I see peer review publication.
> 
> So, I offered to supply the mathematics of the scenario, which is the
> final authority. However, you prefer to see an annotation in a
> peer-reviewed journal. Presumably that is because you do not feel
> qualified to analyze the mathematics. If that is so then it seems odd
> that you feel qualified to dispense skepticism, not to mention
> ridicule.

Absolutely, and without apologies.  No, I am not a mathematician
and never claimed to be but I always react to unsubstantiated claims.
One should *always* be from Missouri and have a "show me attitude." 
In this case I would rely upon review and consensus among of the
cartographic community.  If I had the equations, I would code them
and check them out with various numeric procedures.

> Here is one reference; I imagine there are more, probably in Lee's and
> Thompson's papers:
> 
> "The transverse Mercator projection is one of the most extensively
> used in large scale topographic mapping. Closed equations of chiefly
> academic interest are given here, rearranged from Lee's and Thompson's
> work with the Gauss-Krüger ellipsoidal adaptation of Lambert's
> original work. In this version, the map is conformal everywhere, and
> the central meridian is standard. The entire map is finite, unlike the
> spherical version which extends to infinity."
> 
> -- J.P. Snyder, "Calculating Map Projections for the Ellipsoid", The
> American Cartographer, Vol. 6, No. 1, April 1979.

Quite interesting.  But it amazes me that Snyder seems to ignore
this work in his later publications.  I suppose one reason is that
the finite and extended limits are of no use in small scale mapping
as there is no need for ellipsoidal calculations at these scales
and distortions limiting usefulness.  Nonetheless, it would be helpful
the have the math available---"for academic reasons."  One thing
that bothers me in the above quote is "central meridian is standard"
and does that mean the scale is constant along the CM?

I need bibliography for Lee/Thompson as the general bib titles
are too vague to be sure if they point to the applicable articles.
Getting an article from through my local library typically takes
more than 30 days.

> > As for conformity, its application is limited to large-scale
> > cadastral mapping.  Conformity is a concept which only
> > applies to the infinitesimal region about a point.  At a distance
> > distortion is quickly apparent and eventually becomes extreme.
> > Conformal projection for global presentations is most useful to
> > demonstrate the limitation of conformal projections.
> 
> Not so. Conformal maps of any extent are useful for showing accurate
> shapes over short distances. The shapes of (for example) small
> islands, short coastline segments, or provincial boundaries are
> correct on any conformal map. That is a valuable property. It is also
> true that local directions are correct once north has been
> established. I encourage you to loosen up your thinking a bit.
> Rigidity is not rigor.

The only region where shape of finite objects is reasonable is near
the zone of tangency.  For example, Greenland looks ridiculous
on a Mercator map.

> > As for the Peter's projection (a perverse use of the well known
> > cylindrical equal area) it has been severely criticized by well
> > know cartographers.
> 
> Peters made all sorts of ridiculous claims concerning "his"
> projection. On the other hand, cylindrical equal-area projections do
> have reasonable, if limited, uses. For instance, if you need a single,
> basic projection whose central meridian must be able to move freely
> without changing the shapes of mapped objects, then you are restricted
> to cylindrical projections. You yourself recommend equal-area
> projections; hence Peters must be useful. Yes, that's a limited use,
> but any small-scale projection is limited in use.

The Peters projection is a special case of the general equal-area
cylindrical projection where the latitude of true scale is set
to about 50° latitude.  Usage is reasonable in vicinity of this
latitude but the trouble arose when the UN decided to use this
as their world map and a storm of criticism arose from some well
known cartographers because of the excessive extortion for the
global display.  As I recall, a rational for its use was because
third world people in equatorial regions would not feel inferior
to the non-equatorial countries whose size was exaggerated by the
Mercator projection.

The cylindrical equal-area is certainly applicable in certain
applications where other factors are involved---like matching
the charts when sliding the CM.  But for general use without
special requirements, I generally go to the pseudocylindicals. 

There are many factors that go into choosing an appropriate
projection and many of these factors have contributed to the hundreds
of different projections we may choose from.  The global display
remains the most difficult and thus accounts for most of the
mapping attempts.

	<material deleted>
> 
> Regards,
> 
> daan Strebe
> Geocart author
> http://www.mapthematics.com/
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From paul at toolscenter.org  Sun Aug 24 06:03:11 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Sun, 24 Aug 2003 22:03:11 +0900
Subject: [OSRS-PROJ] Re: Concerning calumny and the ellipsoidaltransverse Mercator
References: <c1.35aa65a8.2c795862@aol.com> <1061690374.2371.281.camel@localhost>
Message-ID: <001401c36a40$1427f500$700201c0@MAPQUEST.local>

Hello,
This thread is becoming a two-man discussion and I will suggest a private
emails to further discuss the issues involved.

Best regards,
Paul.

----- Original Message ----- 
From: "Gerald I. Evenden" <gerald.evenden at verizon.net>
To: "[OSRS-PROJ]" <osrs-proj at remotesensing.org>
Sent: Sunday, August 24, 2003 10:59 AM
Subject: Re: [OSRS-PROJ] Re: Concerning calumny and the
ellipsoidaltransverse Mercator


On Sat, 2003-08-23 at 19:53, Strebe at aol.com wrote:
> Gerald I. Evenden <gerald.evenden at verizon.net> writes:
>
>   I wrote:
> > > Because the finite nature of the ellipsoidal transverse Mercator
> > is so
> > > rarely known, and because no numeric solutions have ever been
> > > published, and because there is no geodetic need for such a
> > > projection, it is entirely likely that I have produced the only
> > images
> > > of the projection ever made. I would be happy to make some
> > available
> > > if anyone is interested.
>
> > It is difficult for me to refrain from becoming a bit sarcastic here
> > as your story sounds like a tabloid exposure.  I will remain a
> > sceptic until I see peer review publication.
>
> So, I offered to supply the mathematics of the scenario, which is the
> final authority. However, you prefer to see an annotation in a
> peer-reviewed journal. Presumably that is because you do not feel
> qualified to analyze the mathematics. If that is so then it seems odd
> that you feel qualified to dispense skepticism, not to mention
> ridicule.

Absolutely, and without apologies.  No, I am not a mathematician
and never claimed to be but I always react to unsubstantiated claims.
One should *always* be from Missouri and have a "show me attitude."
In this case I would rely upon review and consensus among of the
cartographic community.  If I had the equations, I would code them
and check them out with various numeric procedures.

> Here is one reference; I imagine there are more, probably in Lee's and
> Thompson's papers:
>
> "The transverse Mercator projection is one of the most extensively
> used in large scale topographic mapping. Closed equations of chiefly
> academic interest are given here, rearranged from Lee's and Thompson's
> work with the Gauss-Krüger ellipsoidal adaptation of Lambert's
> original work. In this version, the map is conformal everywhere, and
> the central meridian is standard. The entire map is finite, unlike the
> spherical version which extends to infinity."
>
> -- J.P. Snyder, "Calculating Map Projections for the Ellipsoid", The
> American Cartographer, Vol. 6, No. 1, April 1979.

Quite interesting.  But it amazes me that Snyder seems to ignore
this work in his later publications.  I suppose one reason is that
the finite and extended limits are of no use in small scale mapping
as there is no need for ellipsoidal calculations at these scales
and distortions limiting usefulness.  Nonetheless, it would be helpful
the have the math available---"for academic reasons."  One thing
that bothers me in the above quote is "central meridian is standard"
and does that mean the scale is constant along the CM?

I need bibliography for Lee/Thompson as the general bib titles
are too vague to be sure if they point to the applicable articles.
Getting an article from through my local library typically takes
more than 30 days.

> > As for conformity, its application is limited to large-scale
> > cadastral mapping.  Conformity is a concept which only
> > applies to the infinitesimal region about a point.  At a distance
> > distortion is quickly apparent and eventually becomes extreme.
> > Conformal projection for global presentations is most useful to
> > demonstrate the limitation of conformal projections.
>
> Not so. Conformal maps of any extent are useful for showing accurate
> shapes over short distances. The shapes of (for example) small
> islands, short coastline segments, or provincial boundaries are
> correct on any conformal map. That is a valuable property. It is also
> true that local directions are correct once north has been
> established. I encourage you to loosen up your thinking a bit.
> Rigidity is not rigor.

The only region where shape of finite objects is reasonable is near
the zone of tangency.  For example, Greenland looks ridiculous
on a Mercator map.

> > As for the Peter's projection (a perverse use of the well known
> > cylindrical equal area) it has been severely criticized by well
> > know cartographers.
>
> Peters made all sorts of ridiculous claims concerning "his"
> projection. On the other hand, cylindrical equal-area projections do
> have reasonable, if limited, uses. For instance, if you need a single,
> basic projection whose central meridian must be able to move freely
> without changing the shapes of mapped objects, then you are restricted
> to cylindrical projections. You yourself recommend equal-area
> projections; hence Peters must be useful. Yes, that's a limited use,
> but any small-scale projection is limited in use.

The Peters projection is a special case of the general equal-area
cylindrical projection where the latitude of true scale is set
to about 50° latitude.  Usage is reasonable in vicinity of this
latitude but the trouble arose when the UN decided to use this
as their world map and a storm of criticism arose from some well
known cartographers because of the excessive extortion for the
global display.  As I recall, a rational for its use was because
third world people in equatorial regions would not feel inferior
to the non-equatorial countries whose size was exaggerated by the
Mercator projection.

The cylindrical equal-area is certainly applicable in certain
applications where other factors are involved---like matching
the charts when sliding the CM.  But for general use without
special requirements, I generally go to the pseudocylindicals.

There are many factors that go into choosing an appropriate
projection and many of these factors have contributed to the hundreds
of different projections we may choose from.  The global display
remains the most difficult and thus accounts for most of the
mapping attempts.

<material deleted>
>
> Regards,
>
> daan Strebe
> Geocart author
> http://www.mapthematics.com/
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From cjmce at lsu.edu  Sun Aug 24 08:45:47 2003
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Sun, 24 Aug 2003 10:45:47 -0500
Subject: [OSRS-PROJ] Re: Concerning calumny and the ellipsoidaltransverse
 Mercator
Message-ID: <OF3A88B772.2E41EC79-ON86256D8C.00569682-86256D8C.005696DA@lsu.edu>





I gave a one-day seminar at the ESRI Annual Convention this past July on
Grids and Datums.  Ms. Melita Kennedy, the staff Geodesist at ESRI,
informed me that they have developed an iterative Transverse Mercator
direct and inverse that will be implemented soon in ESRI projection
engines.  She said it will do ±90º from the central meridian.  Ms. Kennedy
acknowledged that it was based on an obscure NOAA publication (Not NGS)
published about 15 years ago in the form of a "C" program.

Breast beating and teeth gnashing aside, there are practical applications
to using the Transverse Mercator in greater expansions from the central
meridian than 3º for LARGE Scale topographic mapping, and there are a
number of practical applications for ellipsoidal loxodromes in geodetic
computations and LARGE scale mapping.

The biggest difficulty in using accurate and reliable algorithms for large
zone extensions with the Transverse Mercator is being able to duplicate or
to "undo" the transform with a second software package.  I have used the
standard Army formulae for doing ±24º for over 15 years, but I have never
found anyone else that had implemented it so it was more or less useless
for practical dissemination.

Just because something appears to be a "two-man" discussion does not mean
that others do not watch the "tennis match."

Cliff Mugnier
LOUISIANA STATE UNIVERSITY
-------------------------------------------------
Hello,
This thread is becoming a two-man discussion and I will suggest a private
emails to further discuss the issues involved.

Best regards,
Paul.

----- Original Message -----
From: "Gerald I. Evenden" <gerald.evenden at verizon.net>
To: "[OSRS-PROJ]" <osrs-proj at remotesensing.org>
Sent: Sunday, August 24, 2003 10:59 AM
Subject: Re: [OSRS-PROJ] Re: Concerning calumny and the
ellipsoidaltransverse Mercator


On Sat, 2003-08-23 at 19:53, Strebe at aol.com wrote:
> Gerald I. Evenden <gerald.evenden at verizon.net> writes:
>
>   I wrote:
> > > Because the finite nature of the ellipsoidal transverse Mercator
> > is so
> > > rarely known, and because no numeric solutions have ever been
> > > published, and because there is no geodetic need for such a
> > > projection, it is entirely likely that I have produced the only
> > images
> > > of the projection ever made. I would be happy to make some
> > available
> > > if anyone is interested.
>
> > It is difficult for me to refrain from becoming a bit sarcastic here
> > as your story sounds like a tabloid exposure.  I will remain a
> > sceptic until I see peer review publication.
>
> So, I offered to supply the mathematics of the scenario, which is the
> final authority. However, you prefer to see an annotation in a
> peer-reviewed journal. Presumably that is because you do not feel
> qualified to analyze the mathematics. If that is so then it seems odd
> that you feel qualified to dispense skepticism, not to mention
> ridicule.

Absolutely, and without apologies.  No, I am not a mathematician
and never claimed to be but I always react to unsubstantiated claims.
One should *always* be from Missouri and have a "show me attitude."
In this case I would rely upon review and consensus among of the
cartographic community.  If I had the equations, I would code them
and check them out with various numeric procedures.

> Here is one reference; I imagine there are more, probably in Lee's and
> Thompson's papers:
>
> "The transverse Mercator projection is one of the most extensively
> used in large scale topographic mapping. Closed equations of chiefly
> academic interest are given here, rearranged from Lee's and Thompson's
> work with the Gauss-Krüger ellipsoidal adaptation of Lambert's
> original work. In this version, the map is conformal everywhere, and
> the central meridian is standard. The entire map is finite, unlike the
> spherical version which extends to infinity."
>
> -- J.P. Snyder, "Calculating Map Projections for the Ellipsoid", The
> American Cartographer, Vol. 6, No. 1, April 1979.

Quite interesting.  But it amazes me that Snyder seems to ignore
this work in his later publications.  I suppose one reason is that
the finite and extended limits are of no use in small scale mapping
as there is no need for ellipsoidal calculations at these scales
and distortions limiting usefulness.  Nonetheless, it would be helpful
the have the math available---"for academic reasons."  One thing
that bothers me in the above quote is "central meridian is standard"
and does that mean the scale is constant along the CM?

I need bibliography for Lee/Thompson as the general bib titles
are too vague to be sure if they point to the applicable articles.
Getting an article from through my local library typically takes
more than 30 days.

> > As for conformity, its application is limited to large-scale
> > cadastral mapping.  Conformity is a concept which only
> > applies to the infinitesimal region about a point.  At a distance
> > distortion is quickly apparent and eventually becomes extreme.
> > Conformal projection for global presentations is most useful to
> > demonstrate the limitation of conformal projections.
>
> Not so. Conformal maps of any extent are useful for showing accurate
> shapes over short distances. The shapes of (for example) small
> islands, short coastline segments, or provincial boundaries are
> correct on any conformal map. That is a valuable property. It is also
> true that local directions are correct once north has been
> established. I encourage you to loosen up your thinking a bit.
> Rigidity is not rigor.

The only region where shape of finite objects is reasonable is near
the zone of tangency.  For example, Greenland looks ridiculous
on a Mercator map.

> > As for the Peter's projection (a perverse use of the well known
> > cylindrical equal area) it has been severely criticized by well
> > know cartographers.
>
> Peters made all sorts of ridiculous claims concerning "his"
> projection. On the other hand, cylindrical equal-area projections do
> have reasonable, if limited, uses. For instance, if you need a single,
> basic projection whose central meridian must be able to move freely
> without changing the shapes of mapped objects, then you are restricted
> to cylindrical projections. You yourself recommend equal-area
> projections; hence Peters must be useful. Yes, that's a limited use,
> but any small-scale projection is limited in use.

The Peters projection is a special case of the general equal-area
cylindrical projection where the latitude of true scale is set
to about 50° latitude.  Usage is reasonable in vicinity of this
latitude but the trouble arose when the UN decided to use this
as their world map and a storm of criticism arose from some well
known cartographers because of the excessive extortion for the
global display.  As I recall, a rational for its use was because
third world people in equatorial regions would not feel inferior
to the non-equatorial countries whose size was exaggerated by the
Mercator projection.

The cylindrical equal-area is certainly applicable in certain
applications where other factors are involved---like matching
the charts when sliding the CM.  But for general use without
special requirements, I generally go to the pseudocylindicals.

There are many factors that go into choosing an appropriate
projection and many of these factors have contributed to the hundreds
of different projections we may choose from.  The global display
remains the most difficult and thus accounts for most of the
mapping attempts.

<material deleted>
>
> Regards,
>
> daan Strebe
> Geocart author
> http://www.mapthematics.com/
--
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From gerald.evenden at verizon.net  Sun Aug 24 09:47:06 2003
From: gerald.evenden at verizon.net (Gerald I. Evenden)
Date: 24 Aug 2003 12:47:06 -0400
Subject: [OSRS-PROJ] Re: Concerning calumny and the
	ellipsoidaltransverse Mercator
In-Reply-To: <OF3A88B772.2E41EC79-ON86256D8C.00569682-86256D8C.005696DA@lsu.edu>
References: 	 <OF3A88B772.2E41EC79-ON86256D8C.00569682-86256D8C.005696DA@lsu.edu>
Message-ID: <1061743626.2372.92.camel@localhost>

On Sun, 2003-08-24 at 11:45, Clifford J Mugnier wrote:
> 
> 
> I gave a one-day seminar at the ESRI Annual Convention this past July on
> Grids and Datums.  Ms. Melita Kennedy, the staff Geodesist at ESRI,
> informed me that they have developed an iterative Transverse Mercator
> direct and inverse that will be implemented soon in ESRI projection
> engines.  She said it will do ±90º from the central meridian.  Ms. Kennedy
> acknowledged that it was based on an obscure NOAA publication (Not NGS)
> published about 15 years ago in the form of a "C" program.

>From our continued boxing off group Strebe made the following
reference:

    "Jeff Dozier, "Improved Algorithm for Calculation of UTM and
    Geodetic Coordinates", NOAA Technical Reprot NESS 81"

Seems to fit Kennedy's statement.

> Breast beating and teeth gnashing aside, there are practical applications
> to using the Transverse Mercator in greater expansions from the central
> meridian than 3º for LARGE Scale topographic mapping, and there are a
> number of practical applications for ellipsoidal loxodromes in geodetic
> computations and LARGE scale mapping.

I recall that the UTM limit was spec'd at 3½° limit.  But it will go
to a larger extent without too much distortion.  Besides precision
needs drop off with smaller scale associated with larger extent.

I wonder why ESRI bothered as it seems to not be worth the effort
as an economic activity.  As you say, there's nothing the cadastral
world that has any use for it and it only confuses the issue.

<snip>

> Just because something appears to be a "two-man" discussion does not mean
> that others do not watch the "tennis match."
> 
> Cliff Mugnier
> LOUISIANA STATE UNIVERSITY
	<snip>
-- 
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From cjmce at lsu.edu  Sun Aug 24 17:53:40 2003
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Sun, 24 Aug 2003 19:53:40 -0500
Subject: [OSRS-PROJ] Re: Concerning calumny and the	ellipsoidaltransverse
 Mercator
Message-ID: <OFFEA13848.C61CC7B0-ON86256D8D.0004E906-86256D8D.0004E9D0@lsu.edu>





Army Technical Manual TM 5-241-10 is the Official manual for zone
extentions of ±24º from the central meridian.  It is "kosher" UTM for
extending out for artillery fire control and/or datum computations.
(That's how European Datum 1950 was computed.)  It really DOES have
practical applications including using one zone for offshore mapping of the
entire Gulf of Mexico.

In the oil patch, there is a constant request for such a facility.  It just
becomes problemmatic if everyone does not use the same software.  Since
ESRI is so pervasive in the oil patch, it appears it will be warmly (and
widely) accepted.  Pun intended.

Cliff Mugnier
LOUISIANA STATE UNIVERSITY
--------------------------------------
On Sun, 2003-08-24 at 11:45, Clifford J Mugnier wrote:
>
>
> I gave a one-day seminar at the ESRI Annual Convention this past July on
> Grids and Datums.  Ms. Melita Kennedy, the staff Geodesist at ESRI,
> informed me that they have developed an iterative Transverse Mercator
> direct and inverse that will be implemented soon in ESRI projection
> engines.  She said it will do ±90º from the central meridian.  Ms.
Kennedy
> acknowledged that it was based on an obscure NOAA publication (Not NGS)
> published about 15 years ago in the form of a "C" program.

>From our continued boxing off group Strebe made the following
reference:

"Jeff Dozier, "Improved Algorithm for Calculation of UTM and
Geodetic Coordinates", NOAA Technical Reprot NESS 81"

Seems to fit Kennedy's statement.

> Breast beating and teeth gnashing aside, there are practical applications
> to using the Transverse Mercator in greater expansions from the central
> meridian than 3º for LARGE Scale topographic mapping, and there are a
> number of practical applications for ellipsoidal loxodromes in geodetic
> computations and LARGE scale mapping.

I recall that the UTM limit was spec'd at 3½° limit.  But it will go
to a larger extent without too much distortion.  Besides precision
needs drop off with smaller scale associated with larger extent.

I wonder why ESRI bothered as it seems to not be worth the effort
as an economic activity.  As you say, there's nothing the cadastral
world that has any use for it and it only confuses the issue.

<snip>

> Just because something appears to be a "two-man" discussion does not mean
> that others do not watch the "tennis match."
>
> Cliff Mugnier
> LOUISIANA STATE UNIVERSITY
<snip>
--
Gerald I. Evenden <gerald.evenden at verizon.net>

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.

----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From greg_ggl at yahoo.fr  Tue Aug 26 01:50:13 2003
From: greg_ggl at yahoo.fr (=?iso-8859-1?q?Gracia-Lorca=20Gregory?=)
Date: Tue, 26 Aug 2003 10:50:13 +0200 (CEST)
Subject: [OSRS-PROJ] how use "proj"????
Message-ID: <20030826085013.92186.qmail@web10007.mail.yahoo.com>

I would use "proj" to convert points in lambert 2 to lambert 3,
I have done :
 
proj +init=esri:27572 +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=2.33722917 +k_0=0.999877499 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0  <<EOF
807000  1842000
EOF
 
but the result is
 
*  *
 
Any idea?
Can you tell me how use "proj" or "cs2cs"?
 
Thanks, Greg.
 



---------------------------------
Do You Yahoo!? -- Une adresse @yahoo.fr gratuite et en français !
Testez le nouveau Yahoo! Mail
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20030826/0c1e3f46/attachment.html>

From warmerdam at pobox.com  Tue Aug 26 05:39:43 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 26 Aug 2003 08:39:43 -0400
Subject: [OSRS-PROJ] how use "proj"????
In-Reply-To: <20030826085013.92186.qmail@web10007.mail.yahoo.com>
References: <20030826085013.92186.qmail@web10007.mail.yahoo.com>
Message-ID: <3F4B550F.2080107@pobox.com>

Gracia-Lorca Gregory wrote:
> I would use "proj" to convert points in lambert 2 to lambert 3,
> I have done :
>  
> proj +init=esri:27572 +proj=lcc +lat_1=44.10000000000001 
> +lat_0=44.10000000000001 +lon_0=2.33722917 +k_0=0.999877499 +x_0=600000 
> +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0  <<EOF
> 807000  1842000
> EOF
>  
> but the result is
>  
> *  *
>  
> Any idea?
> Can you tell me how use "proj" or "cs2cs"?

Greg,

With proj you could accomplish this as a two stage process if there is no datum
change required.

warmerda at gdal2200[3]% proj -I +init=esri:27572 | proj +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 
+lon_0=2.33722917 +k_0=0.999877499 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0
807000 1842000

result:
806696.79       3142093.82

With the cs2cs commmand it can be done in one program:

cs2cs +init=esri:27572 +to +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=2.33722917 
+k_0=0.999877499 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0
807000 1842000

result:
806707.71       3141745.34 -165.43

The difference in results in presumably because cs2cs is applying the
datum shift, though I haven't verified this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


----------------------------------------
PROJ.4 Discussion List
See http://www.remotesensing.org/proj for subscription, unsubscription
and other information.


From greg_ggl at yahoo.fr  Wed Aug 27 02:43:10 2003
From: greg_ggl at yahoo.fr (=?iso-8859-1?q?Gracia-Lorca=20Gregory?=)
Date: Wed, 27 Aug 2003 11:43:10 +0200 (CEST)
Subject: [OSRS-PROJ] how use "proj"????
In-Reply-To: <3F4B550F.2080107@pobox.com>
Message-ID: <20030827094310.43475.qmail@web10008.mail.yahoo.com>

thanks for this tips, but i think that there is a antoher problem..

i have a point in lambert 2 and i knew the same point in lambert 3 :
 
lambert 2 : 845265,7-  1818412,7
lambert 3 : 844852,6 - 118461,4
 
and i used "proj" like this : 
proj -I +init=esri:27572 | proj  +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=2.33722917 +k_0=0.999877499 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m
 
845265,7-  1818412,7
 
result :
844871.71       3118490.64

 
 
i use also "cs2cs" :
cs2cs +init=esri:27572 +to +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=2.33722917 +k_0=0.999877499 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m
 
845265,7-  1818412,7
 
result :
844884.59       3118142.39 -164.06


thanks tfor help..
 
 
 



---------------------------------
Do You Yahoo!? -- Une adresse @yahoo.fr gratuite et en français !
Testez le nouveau Yahoo! Mail
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20030827/f0dc6b73/attachment.html>

