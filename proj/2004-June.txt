From Magnus.Hagdorn at glg.ed.ac.uk  Thu Jun 10 02:58:22 2004
From: Magnus.Hagdorn at glg.ed.ac.uk (Magnus Hagdorn)
Date: 10 Jun 2004 10:58:22 +0100
Subject: [Proj] f77 and f90 bindings for proj4
Message-ID: <1086861500.11461.18.camel@sedge>

Hi all,
I've just written f77 and f90 bindings for proj4 using cfortran.h.
Undoubtedly there are many issues with it, but hey, it's a start. You
can a tarball from the NeSCForge site:
https://forge.nesc.ac.uk/project/showfiles.php?group_id=26
or browse the cvs repository:
https://forge.nesc.ac.uk/cgi-bin/cvsweb.cgi/proj4/?cvsroot=glimmer
Cheers
magi
PS: I am not subscribed to the ML, please CC
-- 
Magnus Hagdorn
School of GeoSciences
The University of Edinburgh
Grant Institute
West Mains Road
Edinburgh EH9 3JW
Scotland
PHONE: (+44) 131 650 8523
FAX:   (+44) 131 668 3184
email: Magnus.Hagdorn at glg.ed.ac.uk

_______________________________________________
Proj mailing list
Proj at remotesensing.org
http://www.remotesensing.org/mailman/listinfo/proj


From gino-proj4 at lucrezi.net  Sat Jun 19 05:27:20 2004
From: gino-proj4 at lucrezi.net (Gino Lucrezi)
Date: Sat, 19 Jun 2004 14:27:20 +0200
Subject: [Proj] Incorrect translations to the Gauss-Boaga system
Message-ID: <qne6klck5j3u3i2.190620041427@hostingtrader.com>

I am currently using version 4.4.8 of the proj4 libraries. I mostly use them from within PostGIS, but I get the same results calling them on a stand-alone basis.

One widely used coordinate system here in Italy is Gauss-Boaga,
corresponding to EPSG codes 26591 and 26592.

So, I often have to convert between Gauss Boaga and UTM 33 (epsg:23033)

Here are the results for two known points:
cs2cs +init=epsg:26592 +to +init=epsg:23033 -v <<EOF
2413000.0000 4669000.0
2389238.48 4690935.27
EOF

# ---- From Coordinate System ----
#Transverse Mercator
#       Cyl, Sph&Ell
# +init=epsg:26592 +proj=tmerc +lat_0=0 +lon_0=2.54766666666667 
+k=0.999600
# +x_0=2520000 +y_0=0 +ellps=intl +pm=rome +units=m +no_defs
# ---- To Coordinate System ----
#Universal Transverse Mercator (UTM)
#       Cyl, Sph
#       zone= south
# +init=epsg:23033 +proj=utm +zone=33 +ellps=intl +units=m +no_defs
393000.00       4669000.00 0.00
369238.48       4690935.27 0.00

The first point I could check on a map, and it should have been
393070 4669190 I used a good ruler, and I am sure I got this point with an error smaller than 10 metres.

The second point was converted using another (interactive) program, which is usually regarded as authoritative, and it resulted in 369301 4691118

In either case, the resulting point is about 200 metres off from the correct result.

I didn't modify the epsg file in any way.

Did I do anything wrong?

Gino Lucrezi
Penta Consulting Services Srl



From warmerdam at pobox.com  Sat Jun 19 08:29:34 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat, 19 Jun 2004 11:29:34 -0400
Subject: [Proj] Incorrect translations to the Gauss-Boaga system
In-Reply-To: <qne6klck5j3u3i2.190620041427@hostingtrader.com>
References: <qne6klck5j3u3i2.190620041427@hostingtrader.com>
Message-ID: <40D45BDE.2050601@pobox.com>

Gino Lucrezi wrote:
> I am currently using version 4.4.8 of the proj4 libraries. I mostly use them from within PostGIS, but I get the same results calling them on a stand-alone basis.
> 
> One widely used coordinate system here in Italy is Gauss-Boaga,
> corresponding to EPSG codes 26591 and 26592.
> 
> So, I often have to convert between Gauss Boaga and UTM 33 (epsg:23033)
> 
> Here are the results for two known points:
> cs2cs +init=epsg:26592 +to +init=epsg:23033 -v <<EOF
> 2413000.0000 4669000.0
> 2389238.48 4690935.27
> EOF
> 
> # ---- From Coordinate System ----
> #Transverse Mercator
> #       Cyl, Sph&Ell
> # +init=epsg:26592 +proj=tmerc +lat_0=0 +lon_0=2.54766666666667 
> +k=0.999600
> # +x_0=2520000 +y_0=0 +ellps=intl +pm=rome +units=m +no_defs
> # ---- To Coordinate System ----
> #Universal Transverse Mercator (UTM)
> #       Cyl, Sph
> #       zone= south
> # +init=epsg:23033 +proj=utm +zone=33 +ellps=intl +units=m +no_defs
> 393000.00       4669000.00 0.00
> 369238.48       4690935.27 0.00
> 
> The first point I could check on a map, and it should have been
> 393070 4669190 I used a good ruler, and I am sure I got this point with an error smaller than 10 metres.
> 
> The second point was converted using another (interactive) program, which is usually regarded as authoritative, and it resulted in 369301 4691118
> 
> In either case, the resulting point is about 200 metres off from the correct result.
> 
> I didn't modify the epsg file in any way.

Gino,

It seems that there is no datum shifting information available for either
coordinate system.  The Guass Boaga is using the Monte Mario datum while the
UTM coordinate system is using ED50.

I *think* the ED50 is relatively close to WGS84, but you may need to find
some approximation for the datum shift needed for ED50.  You might even be
able to derive a reasonable approximation from your observed errors.

PS. The proj mailing list isn't really working yet.  You and I are currently
the only subscribes.  Hopefully by late monday it will be back fully populated.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From gino at lucrezi.net  Sun Jun 20 03:15:06 2004
From: gino at lucrezi.net (Gino Lucrezi)
Date: Sun, 20 Jun 2004 12:15:06 +0200
Subject: [Proj] Incorrect translations to the Gauss-Boaga system
In-Reply-To: <40D45BDE.2050601@pobox.com>
References: <qne6klck5j3u3i2.190620041427@hostingtrader.com>
Message-ID: <40D57FCA.12256.202541@localhost>

On 19 Jun 2004 at 11:29, Frank Warmerdam wrote:

> It seems that there is no datum shifting information available for either
> coordinate system.  The Guass Boaga is using the Monte Mario datum while
> the UTM coordinate system is using ED50.

What kind of information would be needed?

> I *think* the ED50 is relatively close to WGS84, but you may need to find
> some approximation for the datum shift needed for ED50.  You might even be
> able to derive a reasonable approximation from your observed errors.

I have a good approximation, the error is about 200 metres for all of the 
area I am interested in. However I don't know how to use it. There is no 
way to "add" a constant to every point in a PostGIS database, AFAIK :-(

> PS. The proj mailing list isn't really working yet.  You and I are
> currently the only subscribes.  Hopefully by late monday it will be back
> fully populated.

Do you think it could be useful if I re-posted it monday?

Gino Lucrezi
Penta Consulting Services Srl




From tokar at tokar.ru  Sun Jun 20 13:08:51 2004
From: tokar at tokar.ru (Konstantin Tokar)
Date: Mon, 21 Jun 2004 00:08:51 +0400
Subject: [Proj] proj.4 and Blue Marble Geographics Geographic Calculator
	question
Message-ID: <cb4qrr$qmg$1@sea.gmane.org>

How to execute transformation from latlon to Gauss-Kruger
GK-PULKOVO, " Gauss-Kruger (Pulkovo 1942) Coordinate Systems ", PULKOVO 
1942, TM
GK-12, " GK Zone 12 ", (Pulkovo 1942), METERS, TM, 69, 0, 1, 12500000, 
0, " ", 28412
(so she is called in Blue Marble Geographics Geographic Calculator)
Geographic Calculator RETURNS coordinates in meters:

	 lon 		 lat
latlon 	 45 		 51 		
meters 	 10826898.08 	 5931828.02 	


proj.exe +proj=tmerc +lat_0=0 +lon_0=69 +k=1.000000 +x_0=12500000 +y_0=0 
+ellps=krass +units=m +no_defs

Returns

lon 		 lat
45 		 51
10826825.65 	 5931859.27

That is not that. What it is necessary to correct?



From warmerdam at pobox.com  Mon Jun 21 07:34:51 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 21 Jun 2004 10:34:51 -0400
Subject: [Proj] proj.4 and Blue Marble Geographics Geographic Calculator
	question
In-Reply-To: <cb4qrr$qmg$1@sea.gmane.org>
References: <cb4qrr$qmg$1@sea.gmane.org>
Message-ID: <40D6F20B.8010806@pobox.com>

Konstantin Tokar wrote:
> How to execute transformation from latlon to Gauss-Kruger
> GK-PULKOVO, " Gauss-Kruger (Pulkovo 1942) Coordinate Systems ", PULKOVO 
> 1942, TM
> GK-12, " GK Zone 12 ", (Pulkovo 1942), METERS, TM, 69, 0, 1, 12500000, 
> 0, " ", 28412
> (so she is called in Blue Marble Geographics Geographic Calculator)
> Geographic Calculator RETURNS coordinates in meters:
> 
>      lon          lat
> latlon      45          51        
> meters      10826898.08      5931828.02    
> 
> 
> proj.exe +proj=tmerc +lat_0=0 +lon_0=69 +k=1.000000 +x_0=12500000 +y_0=0 
> +ellps=krass +units=m +no_defs
> 
> Returns
> 
> lon          lat
> 45          51
> 10826825.65      5931859.27
> 
> That is not that. What it is necessary to correct?

Konstantin,

You are reprojecting a poin at longitude 45, which is 24 degrees away from
the central meridian of the transverse mercator projection in question.  I
don't think it is appropriate to use transverse mercator this far from
the central meridian and the error accumulation may vary substantially in
different packages.

Try comparing a point much closer to the central meridian and see if it
agrees with Blue Marble.

eg.

68 51
12429801.89     5652661.14

In general, if you use different packages to reproject transverse mercator data
a long ways away from the central meridian you are likely to get substantially
error, and differing errors in each package.

PS. This mailing list is currently in transition.  It should be properly
populated in a day or two.  In the meantime only two or three people are
currently on the list.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From neteler at itc.it  Mon Jun 21 06:59:48 2004
From: neteler at itc.it (Markus Neteler)
Date: Mon, 21 Jun 2004 15:59:48 +0200
Subject: [Proj] wrong values for shift utm ed50 to utm wgs84
In-Reply-To: <200405270806.56372.chdohmen@gmx.de>
References: <200405270806.56372.chdohmen@gmx.de>
Message-ID: <20040621135948.GP15101@thuille.itc.it>

On Thu, May 27, 2004 at 08:06:56AM +0200, Christoph Dohmen wrote:
> Hi all,
> 
> I have to translate several values from utm ed50 to utm wgs84. I tried this 
> with several tools and got different values :-( And especially using cs2cs I 
> got definitly _wrong_ values. Just an example:
> 
> values to translate as metre values from zone 32 north in ed50:
> 488000 E 
> 5902000 N
> 
> using the demo-version of transdat I get the following:
> 487916.915498 E 
> 5901796.048890 N
> 
> using the online-tool from http://www-ipf.bau-verm.uni-karlsruhe.de/cgi-bin/
> trafo.tcl I get:
> 487921.76 E
> 5901788.00 N
> 
> and using cs2cs (from proj 4.4.8) I get:
> 488000.00 E
> 5902000.00 N
> with the params: cs2cs +proj=utm +ellip=intl +to +proj=utm +ellip=WGS84 
> +datum=WGS84  << EOF
> > 488000 5902000
> > EOF

It should be ellps, not ellip, I think.
Hint: Use the -v flag to see which parameters are really used.
 
> using cs2cs +proj=utm +a=6378388.0 +b=6356911.94613 +zone=32 +to +proj=utm 
> +ellps=WGS84 +zone=32 << EOF with the same values result in:
> 488000.36 E
> 5901787.27 N
> 
> and cs2cs -v +init=epsg:23032 +to +init=epsg:32632 << EOF for the above 
> mentioned point results also in:
> 488000.36 E
> 5901787.27 N
> 
> >From several sources I read the there should be an offset in germany from 
> round about -80m east and -200m north. Those values are 'nearly' calculated 
> by the first two tools. But using cs2cs there is an offset of +0.36m east and 
> -212.73m north. The northing offset seems to look allright but the easting 
> offset must be wrong.
> 
> So, what is the mistake I made? Wrong params for cs2cs??
> Can anyone help me or even just give me a hint how to translate utm ed50 to 
> utm wgs84?

It seems that you are missing the ED50 Datum (here the "whole country" Potsdam datum):

cs2cs -v +init=epsg:23032 +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.70 +to +init=epsg:32632
# ---- From Coordinate System ----
#Universal Transverse Mercator (UTM)
#       Cyl, Sph
#       zone= south
# +init=epsg:23032 +towgs84=598.1,73.7,418.2,0.202,0.045,-2.455,6.70
# +proj=utm +zone=32 +ellps=intl +units=m +no_defs
# ---- To Coordinate System ----
#Universal Transverse Mercator (UTM)
#       Cyl, Sph
#       zone= south
# +init=epsg:32632 +proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m
# +no_defs +towgs84=0,0,0
#--- following specified but NOT used
# +ellps=WGS84
488000 5902000
487930.33       5901554.44 930.44


You may want to select the appropriate Potsdam datum for your zone.

Hope this helps

 Markus

-- 
Markus Neteler     <neteler itc it>       http://mpa.itc.it
ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis
Via Sommarive, 18        -       38050 Povo (Trento), Italy


From renato.grazioli at tin.it  Mon Jun 21 08:57:23 2004
From: renato.grazioli at tin.it (RENATO GRAZIOLI)
Date: Mon, 21 Jun 2004 17:57:23 +0200
Subject: [Proj] Help me, program proj
Message-ID: <000801c457a8$8917b110$5d633052@alfa8tvvmeuwlu>

Blank 
I am one student of the polytechnic of Milan.  
Recently I have unloaded on situated www.remotesensing.org\proj the program "proj446 win32 bin.zip" that it allows me to pass from a DATUM NAD27 to a DATUM NAD83.  In this program they are contained of file.lla (the example:  conus.lla, FL.lla etc.); I wanted to know that type of rows is, like I have been produced and structured and the meant one of the numbers to the Distinguished inside of file.lla 
Sure of one the ready answer 

Distinguished salutes  Grazioli Alberto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20040621/311b2ae4/attachment.html>

From paul-grass at stjohnspoint.co.uk  Tue Jun  1 03:28:24 2004
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Tue, 1 Jun 2004 11:28:24 +0100 (BST)
Subject: [Proj] Re: Hungarian grid
In-Reply-To: <freemail.20040501085201.28136@fm5.freemail.hu>
References: <freemail.20040501085201.28136@fm5.freemail.hu>
Message-ID: <Pine.LNX.4.60.0406011039020.7201@agrippa.ukshells.co.uk>

Hello Gabor,
(Cc to PROJ list)

On Tue, 1 Jun 2004, [ISO-8859-2] Bert�k G�bor wrote:

> Dear Paul,
>
> Maybe you remember our request posted approx. a month ago in
> connection with the addition of the Hungarian national grid
> to the list of available projections in the proj module of
> GRASS.

Yes, thank you for reminding me. There didn't seem to be anything 
obvious for me to do so I put it to one side and then forgot about it with 
the pressures of other work. Sorry. Anyway what the document appeared to 
have was a list of parameters for the Hotine Oblique Mercator, which 
shouldn't be overly complicated to implement in PROJ.4 or GRASS if you 
work through the PROJ documentation (see http://proj.maptools.org/ ).

I have copied the English section from the pdf file you sent me below; 
perhaps someone on the PROJ list will be able to help you with formulating 
the projection in PROJ.4 format but it should not be too difficult. Maybe 
you can provide the full Hungarian PDF file if anyone needs it; it is a 
bit big (170kB) to send on the mailing list.

If you think any modifications to GRASS are necessary (e.g. you have datum 
transformation parameters that can be added), don't hesitate to ask again 
on the GRASS developers' mailing list.

Paul


High accuracy Hotine Oblique Mercator
approximation of the Hungarian EOV
coordinates
G. Molnr G. Timr
Summary
The precise Hungarian Datum 1972 (HD72;geodetic coordinates)---Hungarian
EOV coordinate transformation is a special oblique Mercator projection:
its normal parallel slightly but intentionally differs from the parallel
of the central point of the projection.However,the HD72--EOV
transformation can be approximated with high precision by defining
appropriate values of a standard Hotine Oblique Mercator projection.The
maximum horizontal error of the approaching projection is 0.17
millimeters in Hungary.This enables the definition of the Hungarian EOV
projection in worldwide used GIS software packages,and even for
precision-claiming geodetic applications.The parameters are the
following:
Latitude of the central point:
F 0 =47 08'39.8174";
Longitude of the central point:
. c =19 02'54.8584";
Scale factor:
k_0 =0.99993;
Azimuth of the central line at the central point:
a =90 ;
False Northings:
y_0 =200000.00114 m;
False Eastings:
x_0 =-9370549.28432 m.

From sammyh at 3rddim.com  Tue Jun  1 07:35:33 2004
From: sammyh at 3rddim.com (Sam Harrell)
Date: Tue, 1 Jun 2004 10:35:33 -0400
Subject: [myjunk] [Proj] compilation faults in PROJ4
In-Reply-To: <00ca01c4466d$0987f0a0$d55a4cd5@n7a3h9>
Message-ID: <200406011435.i51EZcq04370@yoda.imagelinks.com>

>> I have no experience in installing from source.

The distributions of proj includes pre-compiled executables, libraries and a
dll to link to.  See projects.h and proj_api.h for function prototypes.
Sorry, can't help with build errors.



-----Original Message-----
From: proj-admin at remotesensing.org [mailto:proj-admin at remotesensing.org] On
Behalf Of Maciek Sieczka
Sent: Sunday, May 30, 2004 1:38 PM
To: proj at remotesensing.org
Subject: [myjunk] [Proj] compilation faults in PROJ4

Hi all!

I installed PROJ.4 (Rel. 4.4.8 2004-05-04) from source but in the log files
I found plenty of errors and warnings.

Could someone help me? My questions are:
1. are these errors serious?
2. what may be the reasons?
3. how do I get rid of them?

Forgive me please if I'm waisting your time. I have no experience in
installing from source. It's my first attempt.
My Linux is Mandrake 9.2, GCC 3.3.1, kernel 2.4.22-26mdk, bison-1.875.
Should I provide any more info please tell me.
Listed below are faults extracted from log files. COMPLETE "./configure" and
"make" logs are attached.


./configure errors:

...
configure:2651: gcc -c -g -O2  conftest.c >&5
conftest.c:2: error: syntax error before "me"
configure:2657: $? = 1
configure: failed program was:
| #ifndef __cplusplus
|   choke me
| #endif


./configure warnings:

...
configure:5362: checking if gcc supports -fno-rtti -fno-exceptions
configure:5384: gcc -c -g -O2 -fno-rtti -fno-exceptions -c conftest.c
conftest.c >&5
cc1: warning: "-fno-rtti" is valid for C++ but not for C/ObjC
cc1: warning: "-fno-rtti" is valid for C++ but not for C/ObjC
...
configure:7955: checking for exp in -lm
configure:7985: gcc -o conftest -g -O2   conftest.c -lm   >&5
conftest.c:29: warning: conflicting types for built-in function `exp'


./configure other "failed":

...
configure:3796: gcc -E  conftest.c
conftest.c:11:28: ac_nonexistent.h: No such file or directory
configure:3802: $? = 1
configure: failed program was:
| /* confdefs.h.  */
|
| #define PACKAGE_NAME ""
| #define PACKAGE_TARNAME ""
| #define PACKAGE_VERSION ""
| #define PACKAGE_STRING ""
| #define PACKAGE_BUGREPORT ""
| #define PACKAGE "proj"
| #define VERSION "4.4.8"
| /* end confdefs.h.  */
| #include <ac_nonexistent.h>
configure:3841: result: gcc -E
configure:3865: gcc -E  conftest.c
configure:3871: $? = 0
configure:3903: gcc -E  conftest.c
conftest.c:11:28: ac_nonexistent.h: No such file or directory
configure:3909: $? = 1
configure: failed program was:
| /* confdefs.h.  */
|
| #define PACKAGE_NAME ""
| #define PACKAGE_TARNAME ""
| #define PACKAGE_VERSION ""
| #define PACKAGE_STRING ""
| #define PACKAGE_BUGREPORT ""
| #define PACKAGE "proj"
| #define VERSION "4.4.8"
| /* end confdefs.h.  */
| #include <ac_nonexistent.h>
...
configure:5142: checking if gcc static flag -static works
configure:5166: gcc -o conftest -g -O2   -static conftest.c  >&5
/usr/bin/ld: cannot find -lc
collect2: ld returned 1 exit status
configure:5172: $? = 1
configure: failed program was:
| /* confdefs.h.  */
|
| #define PACKAGE_NAME ""
| #define PACKAGE_TARNAME ""
| #define PACKAGE_VERSION ""
| #define PACKAGE_STRING ""
| #define PACKAGE_BUGREPORT ""
| #define PACKAGE "proj"
| #define VERSION "4.4.8"
| #define STDC_HEADERS 1
| #define HAVE_SYS_TYPES_H 1
| #define HAVE_SYS_STAT_H 1
| #define HAVE_STDLIB_H 1
| #define HAVE_STRING_H 1
| #define HAVE_MEMORY_H 1
| #define HAVE_STRINGS_H 1
| #define HAVE_INTTYPES_H 1
| #define HAVE_STDINT_H 1
| #define HAVE_UNISTD_H 1
| #define HAVE_DLFCN_H 1
| /* end confdefs.h.  */
|
| int
| main ()
| {
|
|   ;
|   return 0;
| }


make warnings:

...
gcc -DHAVE_CONFIG_H -I. -I. -I. -DPROJ_LIB=\"/usr/local/share/proj\" -g -O2
-c pj_ellps.c -MT pj_ellps.lo -MD -MP -MF
.deps/pj_ellps.TPlo  -fPIC -DPIC -o .libs/pj_ellps.lo
pj_ellps.c:9: warning: `pj_ellps' initialized and declared `extern'
...
gcc -DHAVE_CONFIG_H -I. -I. -I. -DPROJ_LIB=\"/usr/local/share/proj\" -g -O2
-c pj_errno.c -MT pj_errno.lo -MD -MP -MF
.deps/pj_errno.TPlo  -fPIC -DPIC -o .libs/pj_errno.lo
pj_errno.c:8: warning: `pj_errno' initialized and declared `extern'
...
gcc -DHAVE_CONFIG_H -I. -I. -I. -DPROJ_LIB=\"/usr/local/share/proj\" -g -O2
-c pj_units.c -MT pj_units.lo -MD -MP -MF
.deps/pj_units.TPlo  -fPIC -DPIC -o .libs/pj_units.lo
pj_units.c:11: warning: `pj_units' initialized and declared `extern'
...
gcc -DHAVE_CONFIG_H -I. -I. -I. -DPROJ_LIB=\"/usr/local/share/proj\" -g -O2
-c pj_datums.c -MT pj_datums.lo -MD -MP -MF
.deps/pj_datums.TPlo  -fPIC -DPIC -o .libs/pj_datums.lo
pj_datums.c:70: warning: `pj_datums' initialized and declared `extern'
pj_datums.c:89: warning: `pj_prime_meridians' initialized and declared
`extern'
...
gcc -DHAVE_CONFIG_H -I. -I. -I. -DPROJ_LIB=\"/usr/local/share/proj\"    -g -
O2 -c `test -f 'nad2nad.c' || echo './'`nad2nad.c
nad2nad.c: In function `main':
nad2nad.c:229: warning: return type of `main' is not `int'
...
gcc -DHAVE_CONFIG_H -I. -I. -I. -DPROJ_LIB=\"/usr/local/share/proj\"    -g -
O2 -c `test -f 'nad2bin.c' || echo './'`nad2bin.c
nad2bin.c: In function `main':
nad2bin.c:13: warning: return type of `main' is not `int'



From jaime at maintask.com  Sat Jun  5 14:52:14 2004
From: jaime at maintask.com (=?ISO-8859-1?Q?Jaime_Mej=EDa?=)
Date: Sat, 05 Jun 2004 16:52:14 -0500
Subject: [Proj] SRS ogr2ogr - cs2cs - postgis
Message-ID: <40C2408E.9070709@maintask.com>

Hello.

I've simplified my problem, in order to get some help:
I have a shape file (attached) containing a single point (994097.623824 
1003980.4918) in DATUM BOGOTA, called punto_prueba.shp.

When I try to transform it to WGS84 DATUM using ogr2ogr:
----------------------
ogr2ogr -s_srs EPSG:21892 -t_srs EPSG:4326 /home/jaime/resultado_wgs84 
/home/jaime/punto_prueba.shp
----------------------
The point now have the following coordinates: -74.1341093150,4.6350408295

If I take the shape into postgis, and try to transform it, I get the 
following:

----------------------
 SELECT num_radicacion,the_geom,transform(the_geom,1) AS wgs84 FROM 
expedientes WHERE num_radicacion=199931011;
 num_radicacion |                 the_geom                 
|                      wgs84
----------------+------------------------------------------+--------------------------------------------------
      199931011 | SRID=2;POINT(994097.623824 1003980.4918) | 
SRID=1;POINT(-74.1306989066892 4.63219422246886)
----------------------

Finally, using cs2cs:
----------------------
jaime at fileserver[/maintask/clientes/creg]# cs2cs -v +proj=tmerc 
+lat_0=4.599047222 +lon_0=-74.080916667 +k=1.000000 +x_0=1000000.000 
+y_0=1tl +towgs84=307,304,-318,0,0,0,0 +to +proj=latlong +datum=WGS84
# ---- From Coordinate System ----
#Transverse Mercator
#       Cyl, Sph&Ell
# +proj=tmerc +lat_0=4.599047222 +lon_0=-74.080916667 +k=1.000000
# +x_0=1000000.000 +y_0=1000000.000 +ellps=intl
# +towgs84=307,304,-318,0,0,0,0
#--- following specified but NOT used
# +ellps=clrk66
# ---- To Coordinate System ----
#Lat/long (Geodetic)
#
# +proj=latlong +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
994097.623824 1003980.4918
74d7'50.516"W   4d37'55.899"N 16.920
----------------------
74d7'50.516"W   4d37'55.899"N => -74.13069888888 4.63219416666

As you can see, the results are different (+/- 500 m):
With ogr2ogr: -74.1341093150,4.6350408295
With postgis: -74.1306989066892 4.63219422246886
With cs2cs:-74.13069888888 4.63219416666

So, I assume there is an error in the ogr2ogr command, or in ogr2ogr itself.

Somebody can help?




-------------- next part --------------
A non-text attachment was scrubbed...
Name: punto_prueba.dbf
Type: application/octet-stream
Size: 153 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20040605/d3e84bd6/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: punto_prueba.shp
Type: application/octet-stream
Size: 128 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20040605/d3e84bd6/attachment-0001.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: punto_prueba.shx
Type: application/octet-stream
Size: 108 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20040605/d3e84bd6/attachment-0002.obj>

From paul-grass at stjohnspoint.co.uk  Sun Jun  6 06:20:12 2004
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Sun, 6 Jun 2004 14:20:12 +0100 (BST)
Subject: [Proj] SRS ogr2ogr - cs2cs - postgis
In-Reply-To: <40C2408E.9070709@maintask.com>
References: <40C2408E.9070709@maintask.com>
Message-ID: <Pine.LNX.4.60.0406061411170.32067@agrippa.ukshells.co.uk>

On Sat, 5 Jun 2004, [ISO-8859-1] Jaime Mej�a wrote:

> Hello.
>
> I've simplified my problem, in order to get some help:
> I have a shape file (attached) containing a single point (994097.623824 
> 1003980.4918) in DATUM BOGOTA, called punto_prueba.shp.
>
> When I try to transform it to WGS84 DATUM using ogr2ogr:
> ----------------------
> ogr2ogr -s_srs EPSG:21892 -t_srs EPSG:4326 /home/jaime/resultado_wgs84 
> /home/jaime/punto_prueba.shp
> ----------------------
> The point now have the following coordinates: -74.1341093150,4.6350408295
>
> If I take the shape into postgis, and try to transform it, I get the 
> following:
>
> ----------------------
> SELECT num_radicacion,the_geom,transform(the_geom,1) AS wgs84 FROM 
> expedientes WHERE num_radicacion=199931011;
> num_radicacion |                 the_geom                 | 
> wgs84
> ----------------+------------------------------------------+--------------------------------------------------
>     199931011 | SRID=2;POINT(994097.623824 1003980.4918) | 
> SRID=1;POINT(-74.1306989066892 4.63219422246886)
> ----------------------
>
> Finally, using cs2cs:
> ----------------------
> jaime at fileserver[/maintask/clientes/creg]# cs2cs -v +proj=tmerc 
> +lat_0=4.599047222 +lon_0=-74.080916667 +k=1.000000 +x_0=1000000.000 +y_0=1tl 
> +towgs84=307,304,-318,0,0,0,0 +to +proj=latlong +datum=WGS84
> # ---- From Coordinate System ----
> #Transverse Mercator
> #       Cyl, Sph&Ell
> # +proj=tmerc +lat_0=4.599047222 +lon_0=-74.080916667 +k=1.000000
> # +x_0=1000000.000 +y_0=1000000.000 +ellps=intl
> # +towgs84=307,304,-318,0,0,0,0
> #--- following specified but NOT used
> # +ellps=clrk66
> # ---- To Coordinate System ----
> #Lat/long (Geodetic)
> #
> # +proj=latlong +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
> 994097.623824 1003980.4918
> 74d7'50.516"W   4d37'55.899"N 16.920
> ----------------------
> 74d7'50.516"W   4d37'55.899"N => -74.13069888888 4.63219416666
>
> As you can see, the results are different (+/- 500 m):
> With ogr2ogr: -74.1341093150,4.6350408295
> With postgis: -74.1306989066892 4.63219422246886
> With cs2cs:-74.13069888888 4.63219416666
>
> So, I assume there is an error in the ogr2ogr command, or in ogr2ogr itself.

No reason to assume an error---you gave ogr2ogr and cs2cs different input.

For ogr2ogr you said "EPSG:21892", which doesn't include any datum 
transformation parameters, whereas for cs2cs you gave the parameters 
specifically as +towgs84=307,304,-318
It's not clear to me where the parameters are coming from in the PostGIS 
example. The cs2cs example also looks like it's missing ellipsoid 
information.

If you want to reproduce the erroneous and correct result with cs2cs, try:

echo 994097.623824 1003980.4918 | cs2cs +init=epsg:21892 \
+to +init=epsg:4326

74d8'2.794"W    4d38'5.669"N (wrong?)

echo 994097.623824 1003980.4918 | cs2cs +init=epsg:21892 +towgs84=307,304,-318 \
+to +init=epsg:4326
74d7'50.516"W   4d37'55.899"N (correct?)

So something like -s_srs "+init=epsg:21892 +towgs84=307,304,-318" in the 
ogr2ogr command line should probably work (if these parameters are correct 
for the Bogota_1975 datum).

Paul K

From mfinn at usgs.gov  Sun Jun  6 23:02:35 2004
From: mfinn at usgs.gov (Michael P Finn)
Date: Mon, 7 Jun 2004 01:02:35 -0500
Subject: [Proj] Michael P Finn/NMD/USGS/DOI is out of the office.
Message-ID: <OF47FE0548.6FAE1149-ON86256EAC.0021324B-86256EAC.0021324D@er.usgs.gov>

I will be out of the office starting  06/05/2004 and will not return until
06/14/2004.

I am out of the office until 14 Jun. I will most likely be unable to check
e-mail in the meantime. I will respond to your message when I return. If
you have anything that can't wait, please contact my supervisor, Phyllis
Altheide, at paltheide at usgs.gov. Thanks.     Mike






From EMiller at dfg.ca.gov  Mon Jun  7 08:40:01 2004
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Mon, 07 Jun 2004 08:40:01 -0700
Subject: [Proj] Re: [OSRS-PROJ] proj_api DLL wrapper for VB
Message-ID: <s0c429f6.011@dfg.ca.gov>

Our FTP has changed to HTTP -->
http://ftp.dfg.ca.gov/Outgoing/Nafwb/proj4/

Eric G. Miller
GIS Analyst
Wildlife and Habitat Data Analysis Branch
Department of Fish and Game

>>> "Simon Greener" <Simon.Greener at forestrytas.com.au> 6/6/2004 7:35:30
PM >>>
Eric,
I am after just such a wrapper. Can you email it to me as your FTP
reference seems to be old?
S.
=====================
I wrote a small wrapper for the proj dll currently available (4.4.6)
so
that I could
use the library in VB/VBA code with some success.  It basically just
wraps __stdcall
around the API; nothing as fancy as a COM dll.

Anyway, others might have some use for it: 
ftp://maphost.dfg.ca.gov/outgoing/nafwb/proj4/proj_api.zip 

Includes: C source file, Makefile, DLL, DEF, lib archive (used
MinGW/MSys).

Eric G. Miller
GIS Analyst
Wildlife and Habitat Data Analysis Branch
Department of Fish and Game
=====================================



GIS - A Great Profession, and a lifelong Passion!
---------------------------------------------------------------------------------
Simon Greener           email: simon.greener at forestrytas.com.au 
GIS Manager                 Ph: +61 3 6233 8143
Forestry Tasmania        Fax: +61 3 6233 8252 
79 Melville Street, Hobart, Tasmania,  7000,  Australia
This transmission is intended solely for the person
or organisation to whom it is addressed.
It is confidential and may contain legally privileged information.
If you have received this transmission in error, 
you may not use, copy or distribute it.
Please advise us by return e-mail or by phoning 61 3 62338203 
and immediately delete the transmission in its entirety.
We will meet your reasonable expenses of notifying us.
Despite our use of anti-virus software, Forestry Tasmania cannot
guarantee 
that this transmission is virus-free.



From jaime at maintask.com  Mon Jun  7 12:34:35 2004
From: jaime at maintask.com (=?ISO-8859-1?Q?Jaime_Mej=EDa?=)
Date: Mon, 07 Jun 2004 14:34:35 -0500
Subject: [Proj] SRS ogr2ogr - cs2cs - postgis
In-Reply-To: <Pine.LNX.4.60.0406061411170.32067@agrippa.ukshells.co.uk>
References: <40C2408E.9070709@maintask.com> <Pine.LNX.4.60.0406061411170.32067@agrippa.ukshells.co.uk>
Message-ID: <40C4C34B.6070907@maintask.com>

Paul Kelly wrote:

> On Sat, 5 Jun 2004, [ISO-8859-1] Jaime Mej?a wrote:
>
>> Hello.
>>
>> I've simplified my problem, in order to get some help:
>> I have a shape file (attached) containing a single point 
>> (994097.623824 1003980.4918) in DATUM BOGOTA, called punto_prueba.shp.
>>
>> When I try to transform it to WGS84 DATUM using ogr2ogr:
>> ----------------------
>> ogr2ogr -s_srs EPSG:21892 -t_srs EPSG:4326 
>> /home/jaime/resultado_wgs84 /home/jaime/punto_prueba.shp
>> ----------------------
>> The point now have the following coordinates: 
>> -74.1341093150,4.6350408295
>>
>> If I take the shape into postgis, and try to transform it, I get the 
>> following:
>>
>> ----------------------
>> SELECT num_radicacion,the_geom,transform(the_geom,1) AS wgs84 FROM 
>> expedientes WHERE num_radicacion=199931011;
>> num_radicacion |                 the_geom                 | wgs84
>> ----------------+------------------------------------------+-------------------------------------------------- 
>>
>>     199931011 | SRID=2;POINT(994097.623824 1003980.4918) | 
>> SRID=1;POINT(-74.1306989066892 4.63219422246886)
>> ----------------------
>>
>> Finally, using cs2cs:
>> ----------------------
>> jaime at fileserver[/maintask/clientes/creg]# cs2cs -v +proj=tmerc 
>> +lat_0=4.599047222 +lon_0=-74.080916667 +k=1.000000 +x_0=1000000.000 
>> +y_0=1tl +towgs84=307,304,-318,0,0,0,0 +to +proj=latlong +datum=WGS84
>> # ---- From Coordinate System ----
>> #Transverse Mercator
>> #       Cyl, Sph&Ell
>> # +proj=tmerc +lat_0=4.599047222 +lon_0=-74.080916667 +k=1.000000
>> # +x_0=1000000.000 +y_0=1000000.000 +ellps=intl
>> # +towgs84=307,304,-318,0,0,0,0
>> #--- following specified but NOT used
>> # +ellps=clrk66
>> # ---- To Coordinate System ----
>> #Lat/long (Geodetic)
>> #
>> # +proj=latlong +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
>> 994097.623824 1003980.4918
>> 74d7'50.516"W   4d37'55.899"N 16.920
>> ----------------------
>> 74d7'50.516"W   4d37'55.899"N => -74.13069888888 4.63219416666
>>
>> As you can see, the results are different (+/- 500 m):
>> With ogr2ogr: -74.1341093150,4.6350408295
>> With postgis: -74.1306989066892 4.63219422246886
>> With cs2cs:-74.13069888888 4.63219416666
>>
>> So, I assume there is an error in the ogr2ogr command, or in ogr2ogr 
>> itself.
>
>
> No reason to assume an error---you gave ogr2ogr and cs2cs different 
> input.
>
> For ogr2ogr you said "EPSG:21892", which doesn't include any datum 
> transformation parameters, whereas for cs2cs you gave the parameters 
> specifically as +towgs84=307,304,-318
> It's not clear to me where the parameters are coming from in the 
> PostGIS example. The cs2cs example also looks like it's missing 
> ellipsoid information.
>
> If you want to reproduce the erroneous and correct result with cs2cs, 
> try:
>
> echo 994097.623824 1003980.4918 | cs2cs +init=epsg:21892 \
> +to +init=epsg:4326
>
> 74d8'2.794"W    4d38'5.669"N (wrong?)
>
> echo 994097.623824 1003980.4918 | cs2cs +init=epsg:21892 
> +towgs84=307,304,-318 \
> +to +init=epsg:4326
> 74d7'50.516"W   4d37'55.899"N (correct?)
>
> So something like -s_srs "+init=epsg:21892 +towgs84=307,304,-318" in 
> the ogr2ogr command line should probably work (if these parameters are 
> correct for the Bogota_1975 datum).
>
> Paul
> K

Paul,

We've tried with those parameters in the command line, but allways the 
command failed with error.

So we've tried with an external file:
-----------------------------------
ogr2ogr -s_srs merc_bogota -t_srs WGS84 resultado_wgs84 punto_prueba.shp
-----------------------------------
where the file merc_bogota contains the following line with the required
parameters to perform the transformation from BOGOTA DATUM to WGS84 DATUM:
+proj=tmerc +lat_0=4.599047222 +lon_0=-74.080916667 +k=1.000000
+x_0=1000000.000 +y_0=1000000.000 +ellps=intl +towgs84=307,304,-318,0,0,0,0
-----------------------------------
And this is the result:
-----------------------------------
jaime at centella[/pruebas]# ogrinfo -al resultado_wgs84/punto_prueba.shp
INFO: Open of `resultado_wgs84/punto_prueba.shp'
using driver `ESRI Shapefile' successful.

Layer name: punto_prueba
Geometry: Point
Feature Count: 1
Extent: (-74.134109, 4.635041) - (-74.134109, 4.635041)
Layer SRS WKT:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
PROG_ID: Integer (5.0)
LABEL: String (50.0)
OGRFeature(punto_prueba):0
  PROG_ID (Integer) = 1
  LABEL (String) = Ramirez Elsa Graciela
  POINT (-74.13410932 4.63504083)

And the result (-74.13410932 4.63504083) is the same that with the command:
----------------------
ogr2ogr -s_srs EPSG:21892 -t_srs EPSG:4326 /home/jaime/resultado_wgs84 
/home/jaime/punto_prueba.shp
----------------------
The point now have the following coordinates: -74.1341093150,4.6350408295


In both cases, it seems that ogr ommits the 
+towgs84=307,304,-318,0,0,0,0 parameter.
What could I be doing wrong?

Thanks a lot.





From Magnus.Hagdorn at glg.ed.ac.uk  Thu Jun 10 02:58:22 2004
From: Magnus.Hagdorn at glg.ed.ac.uk (Magnus Hagdorn)
Date: 10 Jun 2004 10:58:22 +0100
Subject: [Proj] f77 and f90 bindings for proj4
Message-ID: <1086861500.11461.18.camel@sedge>

Hi all,
I've just written f77 and f90 bindings for proj4 using cfortran.h.
Undoubtedly there are many issues with it, but hey, it's a start. You
can a tarball from the NeSCForge site:
https://forge.nesc.ac.uk/project/showfiles.php?group_id=26
or browse the cvs repository:
https://forge.nesc.ac.uk/cgi-bin/cvsweb.cgi/proj4/?cvsroot=glimmer
Cheers
magi
PS: I am not subscribed to the ML, please CC
-- 
Magnus Hagdorn
School of GeoSciences
The University of Edinburgh
Grant Institute
West Mains Road
Edinburgh EH9 3JW
Scotland
PHONE: (+44) 131 650 8523
FAX:   (+44) 131 668 3184
email: Magnus.Hagdorn at glg.ed.ac.uk



From gino-proj4 at lucrezi.net  Wed Jun 23 04:44:07 2004
From: gino-proj4 at lucrezi.net (Gino Lucrezi)
Date: Wed, 23 Jun 2004 13:44:07 +0200
Subject: [Proj] Incorrect translations to the Gauss-Boaga system (resend)
Message-ID: <c1x8ly2h3kntz53.230620041344@hostingtrader.com>

A few days ago I sent the following message to this mailing list, but there were no subscribers yet (except for Frank and me) so I am sending it again.

--------8<----cut-here----8<------
I am currently using version 4.4.8 of the proj4 libraries. I mostly use them from within PostGIS, but I get the same results calling them on a stand-alone basis.

One widely used coordinate system here in Italy is Gauss-Boaga,
corresponding to EPSG codes 26591 and 26592.

So, I often have to convert between Gauss Boaga and UTM 33 (epsg:23033)

Here are the results for two known points:
cs2cs +init=epsg:26592 +to +init=epsg:23033 -v <<EOF
2413000.0000 4669000.0
2389238.48 4690935.27
EOF

# ---- From Coordinate System ----
#Transverse Mercator
#       Cyl, Sph&Ell
# +init=epsg:26592 +proj=tmerc +lat_0=0 +lon_0=2.54766666666667 
+k=0.999600
# +x_0=2520000 +y_0=0 +ellps=intl +pm=rome +units=m +no_defs
# ---- To Coordinate System ----
#Universal Transverse Mercator (UTM)
#       Cyl, Sph
#       zone= south
# +init=epsg:23033 +proj=utm +zone=33 +ellps=intl +units=m +no_defs
393000.00       4669000.00 0.00
369238.48       4690935.27 0.00

The first point I could check on a map, and it should have been
393070 4669190 I used a good ruler, and I am sure I got this point with an error smaller than 10 metres.

The second point was converted using another (interactive) program, which is usually regarded as authoritative, and it resulted in 369301 4691118

In either case, the resulting point is about 200 metres off from the correct result.

I didn't modify the epsg file in any way.

Did I do anything wrong?

Gino Lucrezi
Penta Consulting Services Srl
--------8<----cut-here----8<------

Frank replied (among other things):

> It seems that there is no datum shifting information available for either
> coordinate system.  The Guass Boaga is using the Monte Mario datum while the
> UTM coordinate system is using ED50.

> I *think* the ED50 is relatively close to WGS84, but you may need to find
> some approximation for the datum shift needed for ED50.  You might even be
> able to derive a reasonable approximation from your observed errors.

So, if I understand correctly, I need one more parameter like +towgs84= for both systems.

Does anyone have correct values for it?
Should it go in the epsg file?


Gino Lucrezi
Penta Consulting Services Srl



From renato.grazioli at tin.it  Mon Jun 21 08:59:58 2004
From: renato.grazioli at tin.it (RENATO GRAZIOLI)
Date: Mon, 21 Jun 2004 17:59:58 +0200
Subject: [Proj] Help me program proj
Message-ID: <000201c45954$8ad3ae70$e2423252@alfa8tvvmeuwlu>

Blank 
I am one student of the polytechnic of Milan.  
Recently I have unloaded on situated www.remotesensing.org\proj the program "proj446 win32 bin.zip" that it allows me to pass from a DATUM NAD27 to a DATUM NAD83.  In this program they are contained of file.lla (the example:  conus.lla, FL.lla etc.); I wanted to know that type of rows is, like I have been produced and structured and the meant one of the numbers to the Distinguished inside of file.lla
 Sure of one the ready answer 


Distinguished salutes   Grazioli Alberto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20040621/d43d3ead/attachment.html>

From renato.grazioli at tin.it  Mon Jun 21 09:05:33 2004
From: renato.grazioli at tin.it (RENATO GRAZIOLI)
Date: Mon, 21 Jun 2004 18:05:33 +0200
Subject: [Proj] Help me program proj
Message-ID: <000301c45954$8afe67f0$e2423252@alfa8tvvmeuwlu>

Blank 
I am one student of the polytechnic of Milan.  Recently I have unloaded on situated www.remotesensing.org\proj the program "proj446 win32 bin.zip" that it allows me to pass from a DATUM NAD27 to a DATUM NAD83.  In this program they are contained of file.lla (the example:  conus.lla, FL.lla etc.); I wanted to know that type of rows is, like I have been produced and structured and the meant one of the numbers to the Distinguished inside of file.lla Sure of one the ready answer 

 Salutes Grazioli Alberto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20040621/a310dac1/attachment.html>

From neteler at itc.it  Thu Jun 24 09:16:24 2004
From: neteler at itc.it (Markus Neteler)
Date: Thu, 24 Jun 2004 18:16:24 +0200
Subject: [Proj] Incorrect translations to the Gauss-Boaga system (resend)
In-Reply-To: <c1x8ly2h3kntz53.230620041344@hostingtrader.com>
References: <c1x8ly2h3kntz53.230620041344@hostingtrader.com>
Message-ID: <20040624161624.GO20643@thuille.itc.it>

On Wed, Jun 23, 2004 at 01:44:07PM +0200, Gino Lucrezi wrote:
> A few days ago I sent the following message to this mailing list, but there were no subscribers yet (except for Frank and me) so I am sending it again.
> 
> --------8<----cut-here----8<------
> I am currently using version 4.4.8 of the proj4 libraries. I mostly use them from within PostGIS, but I get the same results calling them on a stand-alone basis.
> 
> One widely used coordinate system here in Italy is Gauss-Boaga,
> corresponding to EPSG codes 26591 and 26592.
> 
> So, I often have to convert between Gauss Boaga and UTM 33 (epsg:23033)
> 
[...]
> In either case, the resulting point is about 200 metres off from the correct result.
> 
> I didn't modify the epsg file in any way.

The file does not contain datum transformation parameters for Italy.

You can fetch them from
 http://crs.bkg.bund.de/crs-eu
 -> CRS Description
   -> national European CRS
     -> Italy

or some from GRASS CVS

 http://freegis.org/cgi-bin/viewcvs.cgi/*checkout*/grass/src/libes/gis/datumtransform.table?rev=HEAD&content-type=text/plain

[...]

Regards

 Markus Neteler


From bsupnik at xsquawkbox.net  Thu Jun 24 18:41:26 2004
From: bsupnik at xsquawkbox.net (bsupnik)
Date: Thu, 24 Jun 2004 18:41:26 -0700
Subject: [Proj] Help with multiply defined globals in Proj4 - Mac
Message-ID: <40DB82C6.1090005@xsquawkbox.net>

Hi Y'all,

First of all, thanks Gerald Evenden, Niles Ritter and Frank Warmerdam 
for libGeoTiff and Proj4...I'm working on decoding Geotiff images and 
their coordiantes and they're a life saver, especially for UTM->geo 
conversion.

Anyway, here's my compile issue...since I'm working in a Mac IDE I'm not 
using the unix makefiles, which may be how I got into trouble:

geodesic.h defines a few global variables:

n_alpha, n_S;
	double
to_meter, fr_meter, del_alpha;


And is then included in multiple translation units.  Since they are not 
externed and not initialized, my compiler can't tell which declaration 
is the master one, and I am getting a duplicate definition link error.

What is the correct way to solve this?  Should I have all of the 
translation units (geod_for.c, geod_inv.c, geod_set.c) or do I only need 
some of them?  Should I simply declare them extern?

Thanks!
Ben



From warmerdam at pobox.com  Thu Jun 24 18:48:29 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 24 Jun 2004 21:48:29 -0400
Subject: [Proj] Help with multiply defined globals in Proj4 - Mac
In-Reply-To: <40DB82C6.1090005@xsquawkbox.net>
References: <40DB82C6.1090005@xsquawkbox.net>
Message-ID: <40DB846D.70404@pobox.com>

bsupnik wrote:
> Hi Y'all,
> 
> First of all, thanks Gerald Evenden, Niles Ritter and Frank Warmerdam 
> for libGeoTiff and Proj4...I'm working on decoding Geotiff images and 
> their coordiantes and they're a life saver, especially for UTM->geo 
> conversion.
> 
> Anyway, here's my compile issue...since I'm working in a Mac IDE I'm not 
> using the unix makefiles, which may be how I got into trouble:
> 
> geodesic.h defines a few global variables:
> 
> n_alpha, n_S;
>     double
> to_meter, fr_meter, del_alpha;
> 
> And is then included in multiple translation units.  Since they are not 
> externed and not initialized, my compiler can't tell which declaration 
> is the master one, and I am getting a duplicate definition link error.
> 
> What is the correct way to solve this?  Should I have all of the 
> translation units (geod_for.c, geod_inv.c, geod_set.c) or do I only need 
> some of them?  Should I simply declare them extern?

Ben,

The geodesic.h I have looks like this:

#ifndef _IN_GEOD_SET
#  define GEOD_EXTERN extern
#else
#  define GEOD_EXTERN
#endif

GEOD_EXTERN struct geodesic {
	double	A;
	double	LAM1, PHI1, ALPHA12;
	double	LAM2, PHI2, ALPHA21;
	double	DIST;
	double	ONEF, FLAT, FLAT2, FLAT4, FLAT64;
	int	ELLIPSE;
} GEODESIC;

...

GEOD_EXTERN int n_alpha, n_S;
GEOD_EXTERN double to_meter, fr_meter, del_alpha;

The geod_set.c module define _IN_GEOD_SET before includes geodesic.h.  This
should make all definitions of this stuff use "extern" except in the
geo_set.c module where they would be defined.  If you don't have the same
code then you are using old PROJ.4 code.  Substantial effort has gone into
making the PROJ.4 code compile on a wide variety of operating systems
in recent years.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



