From jamesmikedupont at googlemail.com  Sat Jan  2 15:15:35 2010
From: jamesmikedupont at googlemail.com (jamesmikedupont at googlemail.com)
Date: Sun, 3 Jan 2010 00:15:35 +0100
Subject: [Proj] Welcome to the "Proj" mailing list
In-Reply-To: <mailman.0.1262474061.24734.proj@lists.maptools.org>
References: <mailman.0.1262474061.24734.proj@lists.maptools.org>
Message-ID: <ee9cc731001021515m52326e9bx3680aa1b53a457c5@mail.gmail.com>

http://www.openstreetmap.org/user/h4ck3rm1k3/diary/9117

Please help :
I am doing the coord transform like that :

echo 358376.5 7753537 | cs2cs -v +proj=utm +south +ellps=intl
+zone=24K +units=m -f "%.7f"a
# ---- From Coordinate System ----
#Universal Transverse Mercator (UTM)
# Cyl, Sph
# zone= south
# +proj=utm +south +ellps=intl +zone=24K +units=m
# ---- To Coordinate System ----
#Lat/long (Geodetic alias)
#
# +proj=latlong +ellps=intl
-40.3564136a -20.3105983a 0.0000000a

and it works, but now I want to do this in c++

see the code in MText.cpp
http://github.com/h4ck3rm1k3/TwoNickels


void convertPoint(double x, double y, double & rx, double & ry)

{

  projPJ pj_merc, pj_latlong;


if (!(pj_merc = pj_init_plus("+proj=utm +south +ellps=intl +zone=24K
+units=m")) )
exit(1);


if (!(pj_latlong = pj_init_plus("+proj=latlong +ellps=intl")) )
exit(1);


point_offset, double *x, double *y, double *z );
double ax[1], ay[1], az[1];
ax[0] = x * DEG_TO_RAD;
ay[0] = y * DEG_TO_RAD;
az[0] = 0;

/** end of "caution" section. */

pj_transform(pj_merc, pj_latlong, 1, 1, ax, ay, az);

//printf("%.4f\t%.4f -> %.4f\t%.4f\n", *lat, *lon, y[0], x[0]);
rx = ay[0];
ry = ax[0];


}

Program produces ERROR::
node id='-905' version='1' ' lat='-26.92552447' ' lon='0.01349053807'
k='easting' v=358360.6875
k='northing' v=7753529

On Sun, Jan 3, 2010 at 12:14 AM,  <proj-request at lists.maptools.org> wrote:
> Welcome to the Proj at lists.maptools.org mailing list!
>
> To post to this list, send your email to:
>
>  proj at lists.maptools.org
>
> General information about the mailing list is at:
>
>  http://lists.maptools.org/mailman/listinfo/proj
>
> If you ever want to unsubscribe or change your options (eg, switch to
> or from digest mode, change your password, etc.), visit your
> subscription page at:
>
>  http://lists.maptools.org/mailman/options/proj/jamesmikedupont%40googlemail.com
>
>
> You can also make such adjustments via email by sending a message to:
>
>  Proj-request at lists.maptools.org
>
> with the word `help' in the subject or body (don't include the
> quotes), and you will get back a message with instructions.
>
> You must know your password to change your options (including changing
> the password, itself) or to unsubscribe.  It is:
>
>  etepsiwe
>
> Normally, Mailman will remind you of your lists.maptools.org mailing
> list passwords once every month, although you can disable this if you
> prefer.  This reminder will also include instructions on how to
> unsubscribe or change your account options.  There is also a button on
> your options page that will email your current password to you.
>


From warmerdam at pobox.com  Sun Jan  3 14:41:03 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 03 Jan 2010 17:41:03 -0500
Subject: [Proj] Welcome to the "Proj" mailing list
In-Reply-To: <ee9cc731001021515m52326e9bx3680aa1b53a457c5@mail.gmail.com>
References: <mailman.0.1262474061.24734.proj@lists.maptools.org>
	<ee9cc731001021515m52326e9bx3680aa1b53a457c5@mail.gmail.com>
Message-ID: <4B411CFF.6070606@pobox.com>

jamesmikedupont at googlemail.com wrote:
> void convertPoint(double x, double y, double & rx, double & ry)
> 
> {
> 
>   projPJ pj_merc, pj_latlong;
> 
> 
> if (!(pj_merc = pj_init_plus("+proj=utm +south +ellps=intl +zone=24K
> +units=m")) )
> exit(1);
> 
> 
> if (!(pj_latlong = pj_init_plus("+proj=latlong +ellps=intl")) )
> exit(1);
> 
> 
> point_offset, double *x, double *y, double *z );
> double ax[1], ay[1], az[1];
> ax[0] = x * DEG_TO_RAD;
> ay[0] = y * DEG_TO_RAD;
> az[0] = 0;

James,

The above five lines (point_offset on) appear to be corrupted in the email.
I followed your link and searched around a bit for MText.cpp with no luck.
The print statement commented out does not seem to reflect the text you
report so it is hard to know how things were being run.

I would suggest you recompose your question to be easier for folks to
address.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From jamesmikedupont at googlemail.com  Sun Jan  3 23:47:21 2010
From: jamesmikedupont at googlemail.com (jamesmikedupont at googlemail.com)
Date: Mon, 4 Jan 2010 08:47:21 +0100
Subject: [Proj] Welcome to the "Proj" mailing list
In-Reply-To: <4B411CFF.6070606@pobox.com>
References: <mailman.0.1262474061.24734.proj@lists.maptools.org>
	<ee9cc731001021515m52326e9bx3680aa1b53a457c5@mail.gmail.com>
	<4B411CFF.6070606@pobox.com>
Message-ID: <ee9cc731001032347x3cc34eb5ice2895a92d14091c@mail.gmail.com>

I fixed the problem :
http://www.openstreetmap.org/user/h4ck3rm1k3/diary/9117

I converted the UTM to Radians before, that was wrong. I needed to
convert from radians to degs . By debugging cs2cs in parallel, I was
able to do it.

In addition, I have started a c++ branch of proj4, and have resolved
some compile problems.
Feel free to check it out
http://github.com/h4ck3rm1k3/ProjC--/

mike

On Sun, Jan 3, 2010 at 11:41 PM, Frank Warmerdam <warmerdam at pobox.com> wrote:
> jamesmikedupont at googlemail.com wrote:
>> void convertPoint(double x, double y, double & rx, double & ry)
>>
>> {
>>
>>   projPJ pj_merc, pj_latlong;
>>
>>
>> if (!(pj_merc = pj_init_plus("+proj=utm +south +ellps=intl +zone=24K
>> +units=m")) )
>> exit(1);
>>
>>
>> if (!(pj_latlong = pj_init_plus("+proj=latlong +ellps=intl")) )
>> exit(1);
>>
>>
>> point_offset, double *x, double *y, double *z );
>> double ax[1], ay[1], az[1];
>> ax[0] = x * DEG_TO_RAD;
>> ay[0] = y * DEG_TO_RAD;
>> az[0] = 0;
>
> James,
>
> The above five lines (point_offset on) appear to be corrupted in the email.
> I followed your link and searched around a bit for MText.cpp with no luck.
> The print statement commented out does not seem to reflect the text you
> report so it is hard to know how things were being run.
>
> I would suggest you recompose your question to be easier for folks to
> address.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


From j.l.h.hartmann at uva.nl  Mon Jan  4 03:09:13 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon, 04 Jan 2010 12:09:13 +0100
Subject: [Proj] Welcome to the "Proj" mailing list
In-Reply-To: <ee9cc731001032347x3cc34eb5ice2895a92d14091c@mail.gmail.com>
References: <mailman.0.1262474061.24734.proj@lists.maptools.org>	<ee9cc731001021515m52326e9bx3680aa1b53a457c5@mail.gmail.com>	<4B411CFF.6070606@pobox.com>
	<ee9cc731001032347x3cc34eb5ice2895a92d14091c@mail.gmail.com>
Message-ID: <4B41CC59.30500@uva.nl>



On 4-1-2010 8:47, jamesmikedupont at googlemail.com wrote:
> In addition, I have started a c++ branch of proj4, and have resolved
> some compile problems.
> Feel free to check it out
> http://github.com/h4ck3rm1k3/ProjC--/
>
> mike
>
Just curious, what does this branch do that the main tree doesn' t?

Jan


From jamesmikedupont at googlemail.com  Mon Jan  4 03:10:38 2010
From: jamesmikedupont at googlemail.com (jamesmikedupont at googlemail.com)
Date: Mon, 4 Jan 2010 12:10:38 +0100
Subject: [Proj] Welcome to the "Proj" mailing list
In-Reply-To: <4B41CC59.30500@uva.nl>
References: <mailman.0.1262474061.24734.proj@lists.maptools.org>
	<ee9cc731001021515m52326e9bx3680aa1b53a457c5@mail.gmail.com>
	<4B411CFF.6070606@pobox.com>
	<ee9cc731001032347x3cc34eb5ice2895a92d14091c@mail.gmail.com>
	<4B41CC59.30500@uva.nl>
Message-ID: <ee9cc731001040310s5c3ab1eey13b493f46c599a1b@mail.gmail.com>

It does not do anything more at the moment.

This is just compiling with c++, you can apply the patch if you like.

mike


On Mon, Jan 4, 2010 at 12:09 PM, Jan Hartmann <j.l.h.hartmann at uva.nl> wrote:
>
>
> On 4-1-2010 8:47, jamesmikedupont at googlemail.com wrote:
>>
>> In addition, I have started a c++ branch of proj4, and have resolved
>> some compile problems.
>> Feel free to check it out
>> http://github.com/h4ck3rm1k3/ProjC--/
>>
>> mike
>>
> Just curious, what does this branch do that the main tree doesn' t?
>
> Jan
>


From j.l.h.hartmann at uva.nl  Mon Jan  4 03:20:22 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon, 04 Jan 2010 12:20:22 +0100
Subject: [Proj] Welcome to the "Proj" mailing list
In-Reply-To: <ee9cc731001040310s5c3ab1eey13b493f46c599a1b@mail.gmail.com>
References: <mailman.0.1262474061.24734.proj@lists.maptools.org>	
	<ee9cc731001021515m52326e9bx3680aa1b53a457c5@mail.gmail.com>	
	<4B411CFF.6070606@pobox.com>	
	<ee9cc731001032347x3cc34eb5ice2895a92d14091c@mail.gmail.com>	
	<4B41CC59.30500@uva.nl>
	<ee9cc731001040310s5c3ab1eey13b493f46c599a1b@mail.gmail.com>
Message-ID: <4B41CEF6.8030208@uva.nl>

If it is just a patch to make the source code c++ compliant, IMHO it 
belongs in the main branch. Useful for indepentdent C++ projects that 
would like to link in the PROJ4 library.

Jan

On 4-1-2010 12:10, jamesmikedupont at googlemail.com wrote:
> It does not do anything more at the moment.
>
> This is just compiling with c++, you can apply the patch if you like.
>
> mike
>
>
> On Mon, Jan 4, 2010 at 12:09 PM, Jan Hartmann<j.l.h.hartmann at uva.nl>  wrote:
>    
>>
>> On 4-1-2010 8:47, jamesmikedupont at googlemail.com wrote:
>>      
>>> In addition, I have started a c++ branch of proj4, and have resolved
>>> some compile problems.
>>> Feel free to check it out
>>> http://github.com/h4ck3rm1k3/ProjC--/
>>>
>>> mike
>>>
>>>        
>> Just curious, what does this branch do that the main tree doesn' t?
>>
>> Jan
>>
>>      


From jamesmikedupont at googlemail.com  Mon Jan  4 03:27:54 2010
From: jamesmikedupont at googlemail.com (jamesmikedupont at googlemail.com)
Date: Mon, 4 Jan 2010 12:27:54 +0100
Subject: [Proj] Welcome to the "Proj" mailing list
In-Reply-To: <4B41CEF6.8030208@uva.nl>
References: <mailman.0.1262474061.24734.proj@lists.maptools.org>
	<ee9cc731001021515m52326e9bx3680aa1b53a457c5@mail.gmail.com>
	<4B411CFF.6070606@pobox.com>
	<ee9cc731001032347x3cc34eb5ice2895a92d14091c@mail.gmail.com>
	<4B41CC59.30500@uva.nl>
	<ee9cc731001040310s5c3ab1eey13b493f46c599a1b@mail.gmail.com>
	<4B41CEF6.8030208@uva.nl>
Message-ID: <ee9cc731001040327y1c2a4085yb296a5f5395a89a9@mail.gmail.com>

Yes,
Of course. My plan was to test this and submit it to the main branch.
In fact, I would not have published this at all, but was having
problems and wanted help. Now I have resolved the issues and this
branch is not needed any more.

This is just a working snapshot.
Ideally there more work to do with c++ and proj.
Like to move the configuration of the projections to templates..


mike

On Mon, Jan 4, 2010 at 12:20 PM, Jan Hartmann <j.l.h.hartmann at uva.nl> wrote:
> If it is just a patch to make the source code c++ compliant, IMHO it belongs
> in the main branch. Useful for indepentdent C++ projects that would like to
> link in the PROJ4 library.
>
> Jan
>
> On 4-1-2010 12:10, jamesmikedupont at googlemail.com wrote:
>>
>> It does not do anything more at the moment.
>>
>> This is just compiling with c++, you can apply the patch if you like.
>>
>> mike
>>
>>
>> On Mon, Jan 4, 2010 at 12:09 PM, Jan Hartmann<j.l.h.hartmann at uva.nl>
>>  wrote:
>>
>>>
>>> On 4-1-2010 8:47, jamesmikedupont at googlemail.com wrote:
>>>
>>>>
>>>> In addition, I have started a c++ branch of proj4, and have resolved
>>>> some compile problems.
>>>> Feel free to check it out
>>>> http://github.com/h4ck3rm1k3/ProjC--/
>>>>
>>>> mike
>>>>
>>>>
>>>
>>> Just curious, what does this branch do that the main tree doesn' t?
>>>
>>> Jan
>>>
>>>
>


From j.l.h.hartmann at uva.nl  Mon Jan  4 03:38:41 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon, 04 Jan 2010 12:38:41 +0100
Subject: [Proj] Welcome to the "Proj" mailing list
In-Reply-To: <ee9cc731001040327y1c2a4085yb296a5f5395a89a9@mail.gmail.com>
References: <mailman.0.1262474061.24734.proj@lists.maptools.org>	
	<ee9cc731001021515m52326e9bx3680aa1b53a457c5@mail.gmail.com>	
	<4B411CFF.6070606@pobox.com>	
	<ee9cc731001032347x3cc34eb5ice2895a92d14091c@mail.gmail.com>	
	<4B41CC59.30500@uva.nl>	
	<ee9cc731001040310s5c3ab1eey13b493f46c599a1b@mail.gmail.com>	
	<4B41CEF6.8030208@uva.nl>
	<ee9cc731001040327y1c2a4085yb296a5f5395a89a9@mail.gmail.com>
Message-ID: <4B41D341.7030804@uva.nl>

I would prefer to keep the code of the library itself as standard-C like 
as possible. It is scientific programming, could be done just as well in 
Fortran (preferably not, of course :-)). On the other hand, what someone 
does on top of this library (e.g. building user interfaces in Fortran), 
should be doable in any other language.

Jan

On 4-1-2010 12:27, jamesmikedupont at googlemail.com wrote:
> Yes,
> Of course. My plan was to test this and submit it to the main branch.
> In fact, I would not have published this at all, but was having
> problems and wanted help. Now I have resolved the issues and this
> branch is not needed any more.
>
> This is just a working snapshot.
> Ideally there more work to do with c++ and proj.
> Like to move the configuration of the projections to templates..
>
>
> mike
>
> On Mon, Jan 4, 2010 at 12:20 PM, Jan Hartmann<j.l.h.hartmann at uva.nl>  wrote:
>    
>> If it is just a patch to make the source code c++ compliant, IMHO it belongs
>> in the main branch. Useful for indepentdent C++ projects that would like to
>> link in the PROJ4 library.
>>
>> Jan
>>
>> On 4-1-2010 12:10, jamesmikedupont at googlemail.com wrote:
>>      
>>> It does not do anything more at the moment.
>>>
>>> This is just compiling with c++, you can apply the patch if you like.
>>>
>>> mike
>>>
>>>
>>> On Mon, Jan 4, 2010 at 12:09 PM, Jan Hartmann<j.l.h.hartmann at uva.nl>
>>>   wrote:
>>>
>>>        
>>>> On 4-1-2010 8:47, jamesmikedupont at googlemail.com wrote:
>>>>
>>>>          
>>>>> In addition, I have started a c++ branch of proj4, and have resolved
>>>>> some compile problems.
>>>>> Feel free to check it out
>>>>> http://github.com/h4ck3rm1k3/ProjC--/
>>>>>
>>>>> mike
>>>>>
>>>>>
>>>>>            
>>>> Just curious, what does this branch do that the main tree doesn' t?
>>>>
>>>> Jan
>>>>
>>>>
>>>>          
>>      


From jamesmikedupont at googlemail.com  Mon Jan  4 03:44:56 2010
From: jamesmikedupont at googlemail.com (jamesmikedupont at googlemail.com)
Date: Mon, 4 Jan 2010 12:44:56 +0100
Subject: [Proj] Welcome to the "Proj" mailing list
In-Reply-To: <4B41D341.7030804@uva.nl>
References: <mailman.0.1262474061.24734.proj@lists.maptools.org>
	<ee9cc731001021515m52326e9bx3680aa1b53a457c5@mail.gmail.com>
	<4B411CFF.6070606@pobox.com>
	<ee9cc731001032347x3cc34eb5ice2895a92d14091c@mail.gmail.com>
	<4B41CC59.30500@uva.nl>
	<ee9cc731001040310s5c3ab1eey13b493f46c599a1b@mail.gmail.com>
	<4B41CEF6.8030208@uva.nl>
	<ee9cc731001040327y1c2a4085yb296a5f5395a89a9@mail.gmail.com>
	<4B41D341.7030804@uva.nl>
Message-ID: <ee9cc731001040344n11759bccr3494b6340b9764df@mail.gmail.com>

here is my patch so far.

I can understand the desire to keep things simple. I would have never
even bothered to compile this at all if I did not have problems. My
problem was the usage of radians that is dependant on the combination
of projections. This is something that could be hidden by the
templates and done automatically. It is done in cs2cs but not in the
api.

My idea about the templates is very simple, to be able to create a
single function

newcood= f<fromproj,toproj>(coord)

it would not need any initialization of the projections, but the
projections would be selected via templates. That would allow for a
very fast usage.

mike


On Mon, Jan 4, 2010 at 12:38 PM, Jan Hartmann <j.l.h.hartmann at uva.nl> wrote:
> I would prefer to keep the code of the library itself as standard-C like as
> possible. It is scientific programming, could be done just as well in
> Fortran (preferably not, of course :-)). On the other hand, what someone
> does on top of this library (e.g. building user interfaces in Fortran),
> should be doable in any other language.
>
> Jan
>
> On 4-1-2010 12:27, jamesmikedupont at googlemail.com wrote:
>>
>> Yes,
>> Of course. My plan was to test this and submit it to the main branch.
>> In fact, I would not have published this at all, but was having
>> problems and wanted help. Now I have resolved the issues and this
>> branch is not needed any more.
>>
>> This is just a working snapshot.
>> Ideally there more work to do with c++ and proj.
>> Like to move the configuration of the projections to templates..
>>
>>
>> mike
>>
>> On Mon, Jan 4, 2010 at 12:20 PM, Jan Hartmann<j.l.h.hartmann at uva.nl>
>>  wrote:
>>
>>>
>>> If it is just a patch to make the source code c++ compliant, IMHO it
>>> belongs
>>> in the main branch. Useful for indepentdent C++ projects that would like
>>> to
>>> link in the PROJ4 library.
>>>
>>> Jan
>>>
>>> On 4-1-2010 12:10, jamesmikedupont at googlemail.com wrote:
>>>
>>>>
>>>> It does not do anything more at the moment.
>>>>
>>>> This is just compiling with c++, you can apply the patch if you like.
>>>>
>>>> mike
>>>>
>>>>
>>>> On Mon, Jan 4, 2010 at 12:09 PM, Jan Hartmann<j.l.h.hartmann at uva.nl>
>>>>  wrote:
>>>>
>>>>
>>>>>
>>>>> On 4-1-2010 8:47, jamesmikedupont at googlemail.com wrote:
>>>>>
>>>>>
>>>>>>
>>>>>> In addition, I have started a c++ branch of proj4, and have resolved
>>>>>> some compile problems.
>>>>>> Feel free to check it out
>>>>>> http://github.com/h4ck3rm1k3/ProjC--/
>>>>>>
>>>>>> mike
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>> Just curious, what does this branch do that the main tree doesn' t?
>>>>>
>>>>> Jan
>>>>>
>>>>>
>>>>>
>>>
>>>
>
-------------- next part --------------
Index: src/pj_transform.c
===================================================================
--- src/pj_transform.c	(revision 2650)
+++ src/pj_transform.c	(working copy)
@@ -142,6 +142,8 @@
         {
             XY         projected_loc;
             LP	       geodetic_loc;
+	    projected_loc.u = 0.0;
+            projected_loc.v = 0.0;
 
             projected_loc.u = x[point_offset*i];
             projected_loc.v = y[point_offset*i];
Index: src/pj_ell_set.c
===================================================================
--- src/pj_ell_set.c	(revision 2650)
+++ src/pj_ell_set.c	(working copy)
@@ -74,7 +74,15 @@
 			pj_param(pl, "tR_lat_g").i) { /* or geom. mean at latitude */
 			double tmp;
 
-			tmp = sin(pj_param(pl, i ? "rR_lat_a" : "rR_lat_g").f);
+
+			char temp[10];
+			strcpy(temp,i ? "rR_lat_a" : "rR_lat_g");
+			tmp = sin(
+				  pj_param(pl, 
+					   temp
+					   ).f
+				  );
+
 			if (fabs(tmp) > HALFPI) {
 				pj_errno = -11;
 				goto bomb;
Index: src/dmstor.c
===================================================================
--- src/dmstor.c	(revision 2650)
+++ src/dmstor.c	(working copy)
@@ -65,7 +65,11 @@
 		++s;
 	}
 		/* postfix sign */
-	if (*s && (p = strchr(sym, *s))) {
+	char temp[sizeof(sym)+1];
+	strcpy(temp,sym);
+	if (*s && (p = 
+		   strchr(temp, *s)
+		   )) {
 		sign = (p - sym) >= 4 ? '-' : '+';
 		++s;
 	}
Index: src/projects.h
===================================================================
--- src/projects.h	(revision 2650)
+++ src/projects.h	(working copy)
@@ -136,7 +136,17 @@
 
 #define USE_PROJUV 
 
-typedef struct { double u, v; } projUV;
+  typedef 
+  struct TprojUV
+  {     
+  TprojUV() :
+    u(0.0),v(0.0) {}
+
+  TprojUV(double u, double v) :
+    u(u),v(v) {}
+    double u, v; 
+
+} projUV;
 typedef struct { double r, i; }	COMPLEX;
 
 #ifndef PJ_LIB__
Index: src/pj_open_lib.c
===================================================================
--- src/pj_open_lib.c	(revision 2650)
+++ src/pj_open_lib.c	(working copy)
@@ -83,10 +83,14 @@
 
     if( count > 0 )
     {
-        search_path = pj_malloc(sizeof *search_path * count);
+      search_path = (char **)pj_malloc(
+				sizeof (
+					search_path)
+				* count
+				);
         for (i = 0; i < count; i++)
         {
-            search_path[i] = pj_malloc(strlen(path[i]) + 1);
+	  search_path[i] = (char *)pj_malloc(strlen(path[i]) + 1);
             strcpy(search_path[i], path[i]);
         }
     }
Index: src/nad2nad.c
===================================================================
--- src/nad2nad.c	(revision 2650)
+++ src/nad2nad.c	(working copy)
@@ -72,7 +72,7 @@
 			io->nprojc = 2; /* no other options allowed */
 			io->projc[0] = "proj=utm";
 			sprintf(tmp, "zone=%d", io->zone);
-			io->projc[1] = io->t83 ? "ellps=GRS80" : "ellps=clrk66";
+			strcpy(io->projc[1], io->t83 ? "ellps=GRS80" : "ellps=clrk66");
 		} else /* SPCS zone */
 			sprintf(tmp, "init=nad%s:%d", io->t83 ? "83" : "27", io->zone);
 		io->projc[io->nprojc++] = tmp;
Index: src/Makefile.am
===================================================================
--- src/Makefile.am	(revision 2650)
+++ src/Makefile.am	(working copy)
@@ -1,7 +1,10 @@
+CC= g++
+
 bin_PROGRAMS =	proj nad2nad nad2bin geod cs2cs
 
 INCLUDES =	-DPROJ_LIB=\"$(pkgdatadir)\" \
-		-DMUTEX_ at MUTEX_SETTING@ @JNI_INCLUDE@
+		-DMUTEX_ at MUTEX_SETTING@ 
+#@JNI_INCLUDE@
 
 include_HEADERS = projects.h nad_list.h proj_api.h org_proj4_Projections.h
 
@@ -60,9 +63,11 @@
 	nad_cvt.c nad_init.c nad_intr.c emess.c emess.h \
 	pj_apply_gridshift.c pj_datums.c pj_datum_set.c pj_transform.c \
 	geocent.c geocent.h pj_utils.c pj_gridinfo.c pj_gridlist.c \
-	jniproj.c pj_mutex.c pj_initcache.c
+	pj_mutex.c pj_initcache.c
 
+#jniproj.c 
 
+
 install-exec-local:
 	rm -f $(DESTDIR)$(bindir)/invproj$(EXEEXT)
 	(cd $(DESTDIR)$(bindir); ln -s proj$(EXEEXT) invproj$(EXEEXT))
Index: src/bch2bps.c
===================================================================
--- src/bch2bps.c	(revision 2650)
+++ src/bch2bps.c	(working copy)
@@ -2,7 +2,11 @@
 #include <projects.h>
 /* basic support procedures */
 	static void /* clear vector to zero */
-clear(projUV *p, int n) { static const projUV c = {0., 0.}; while (n--) *p++ = c; }
+clear(projUV *p, int n) { 
+	  static const projUV c (0., 0.); 
+	  while (n--) 
+	    *p++ = c; 
+	}
 	static void /* clear matrix rows to zero */
 bclear(projUV **p, int n, int m) { while (n--) clear(*p++, m); }
 	static void /* move vector */
Index: Makefile.am
===================================================================
--- Makefile.am	(revision 2650)
+++ Makefile.am	(working copy)
@@ -1,4 +1,5 @@
-SUBDIRS	=	src man nad jniwrap
+SUBDIRS	=	src man nad 
+#jniwrap
 
 EXTRA_DIST = makefile.vc nmake.opt
 

From j.l.h.hartmann at uva.nl  Mon Jan  4 12:48:42 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon, 04 Jan 2010 21:48:42 +0100
Subject: [Proj] Welcome to the "Proj" mailing list
In-Reply-To: <ee9cc731001040344n11759bccr3494b6340b9764df@mail.gmail.com>
References: <mailman.0.1262474061.24734.proj@lists.maptools.org>	
	<ee9cc731001021515m52326e9bx3680aa1b53a457c5@mail.gmail.com>	
	<4B411CFF.6070606@pobox.com>	
	<ee9cc731001032347x3cc34eb5ice2895a92d14091c@mail.gmail.com>	
	<4B41CC59.30500@uva.nl>	
	<ee9cc731001040310s5c3ab1eey13b493f46c599a1b@mail.gmail.com>	
	<4B41CEF6.8030208@uva.nl>	
	<ee9cc731001040327y1c2a4085yb296a5f5395a89a9@mail.gmail.com>	
	<4B41D341.7030804@uva.nl>
	<ee9cc731001040344n11759bccr3494b6340b9764df@mail.gmail.com>
Message-ID: <4B42542A.90003@uva.nl>

Why don't you write a small stub C++ library on top of C-PROJ, just to 
enable this sort of calls?

Jan

On 4-1-2010 12:44, jamesmikedupont at googlemail.com wrote:
> here is my patch so far.
>
> I can understand the desire to keep things simple. I would have never
> even bothered to compile this at all if I did not have problems. My
> problem was the usage of radians that is dependant on the combination
> of projections. This is something that could be hidden by the
> templates and done automatically. It is done in cs2cs but not in the
> api.
>
> My idea about the templates is very simple, to be able to create a
> single function
>
> newcood= f<fromproj,toproj>(coord)
>
> it would not need any initialization of the projections, but the
> projections would be selected via templates. That would allow for a
> very fast usage.
>
> mike
>
>
> On Mon, Jan 4, 2010 at 12:38 PM, Jan Hartmann<j.l.h.hartmann at uva.nl>  wrote:
>    
>> I would prefer to keep the code of the library itself as standard-C like as
>> possible. It is scientific programming, could be done just as well in
>> Fortran (preferably not, of course :-)). On the other hand, what someone
>> does on top of this library (e.g. building user interfaces in Fortran),
>> should be doable in any other language.
>>
>> Jan
>>
>> On 4-1-2010 12:27, jamesmikedupont at googlemail.com wrote:
>>      
>>> Yes,
>>> Of course. My plan was to test this and submit it to the main branch.
>>> In fact, I would not have published this at all, but was having
>>> problems and wanted help. Now I have resolved the issues and this
>>> branch is not needed any more.
>>>
>>> This is just a working snapshot.
>>> Ideally there more work to do with c++ and proj.
>>> Like to move the configuration of the projections to templates..
>>>
>>>
>>> mike
>>>
>>> On Mon, Jan 4, 2010 at 12:20 PM, Jan Hartmann<j.l.h.hartmann at uva.nl>
>>>   wrote:
>>>
>>>        
>>>> If it is just a patch to make the source code c++ compliant, IMHO it
>>>> belongs
>>>> in the main branch. Useful for indepentdent C++ projects that would like
>>>> to
>>>> link in the PROJ4 library.
>>>>
>>>> Jan
>>>>
>>>> On 4-1-2010 12:10, jamesmikedupont at googlemail.com wrote:
>>>>
>>>>          
>>>>> It does not do anything more at the moment.
>>>>>
>>>>> This is just compiling with c++, you can apply the patch if you like.
>>>>>
>>>>> mike
>>>>>
>>>>>
>>>>> On Mon, Jan 4, 2010 at 12:09 PM, Jan Hartmann<j.l.h.hartmann at uva.nl>
>>>>>   wrote:
>>>>>
>>>>>
>>>>>            
>>>>>> On 4-1-2010 8:47, jamesmikedupont at googlemail.com wrote:
>>>>>>
>>>>>>
>>>>>>              
>>>>>>> In addition, I have started a c++ branch of proj4, and have resolved
>>>>>>> some compile problems.
>>>>>>> Feel free to check it out
>>>>>>> http://github.com/h4ck3rm1k3/ProjC--/
>>>>>>>
>>>>>>> mike
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>                
>>>>>> Just curious, what does this branch do that the main tree doesn' t?
>>>>>>
>>>>>> Jan
>>>>>>
>>>>>>
>>>>>>
>>>>>>              
>>>>
>>>>          
>>      


From jamesmikedupont at googlemail.com  Mon Jan  4 12:51:24 2010
From: jamesmikedupont at googlemail.com (jamesmikedupont at googlemail.com)
Date: Mon, 4 Jan 2010 21:51:24 +0100
Subject: [Proj] Welcome to the "Proj" mailing list
In-Reply-To: <4B42542A.90003@uva.nl>
References: <mailman.0.1262474061.24734.proj@lists.maptools.org>
	<4B411CFF.6070606@pobox.com>
	<ee9cc731001032347x3cc34eb5ice2895a92d14091c@mail.gmail.com>
	<4B41CC59.30500@uva.nl>
	<ee9cc731001040310s5c3ab1eey13b493f46c599a1b@mail.gmail.com>
	<4B41CEF6.8030208@uva.nl>
	<ee9cc731001040327y1c2a4085yb296a5f5395a89a9@mail.gmail.com>
	<4B41D341.7030804@uva.nl>
	<ee9cc731001040344n11759bccr3494b6340b9764df@mail.gmail.com>
	<4B42542A.90003@uva.nl>
Message-ID: <ee9cc731001041251h2bb41c5cu43fe1caedc81d767@mail.gmail.com>

my plan is to integrate the code via some templates.
I can imagine that inline templates can generate much more efficient code.
we would select the exact operations on the native data. I am going to
look into this more.

mike

On Mon, Jan 4, 2010 at 9:48 PM, Jan Hartmann <j.l.h.hartmann at uva.nl> wrote:
> Why don't you write a small stub C++ library on top of C-PROJ, just to
> enable this sort of calls?
>
> Jan
>
> On 4-1-2010 12:44, jamesmikedupont at googlemail.com wrote:
>>
>> here is my patch so far.
>>
>> I can understand the desire to keep things simple. I would have never
>> even bothered to compile this at all if I did not have problems. My
>> problem was the usage of radians that is dependant on the combination
>> of projections. This is something that could be hidden by the
>> templates and done automatically. It is done in cs2cs but not in the
>> api.
>>
>> My idea about the templates is very simple, to be able to create a
>> single function
>>
>> newcood= f<fromproj,toproj>(coord)
>>
>> it would not need any initialization of the projections, but the
>> projections would be selected via templates. That would allow for a
>> very fast usage.
>>
>> mike
>>
>>
>> On Mon, Jan 4, 2010 at 12:38 PM, Jan Hartmann<j.l.h.hartmann at uva.nl>
>>  wrote:
>>
>>>
>>> I would prefer to keep the code of the library itself as standard-C like
>>> as
>>> possible. It is scientific programming, could be done just as well in
>>> Fortran (preferably not, of course :-)). On the other hand, what someone
>>> does on top of this library (e.g. building user interfaces in Fortran),
>>> should be doable in any other language.
>>>
>>> Jan
>>>
>>> On 4-1-2010 12:27, jamesmikedupont at googlemail.com wrote:
>>>
>>>>
>>>> Yes,
>>>> Of course. My plan was to test this and submit it to the main branch.
>>>> In fact, I would not have published this at all, but was having
>>>> problems and wanted help. Now I have resolved the issues and this
>>>> branch is not needed any more.
>>>>
>>>> This is just a working snapshot.
>>>> Ideally there more work to do with c++ and proj.
>>>> Like to move the configuration of the projections to templates..
>>>>
>>>>
>>>> mike
>>>>
>>>> On Mon, Jan 4, 2010 at 12:20 PM, Jan Hartmann<j.l.h.hartmann at uva.nl>
>>>>  wrote:
>>>>
>>>>
>>>>>
>>>>> If it is just a patch to make the source code c++ compliant, IMHO it
>>>>> belongs
>>>>> in the main branch. Useful for indepentdent C++ projects that would
>>>>> like
>>>>> to
>>>>> link in the PROJ4 library.
>>>>>
>>>>> Jan
>>>>>
>>>>> On 4-1-2010 12:10, jamesmikedupont at googlemail.com wrote:
>>>>>
>>>>>
>>>>>>
>>>>>> It does not do anything more at the moment.
>>>>>>
>>>>>> This is just compiling with c++, you can apply the patch if you like.
>>>>>>
>>>>>> mike
>>>>>>
>>>>>>
>>>>>> On Mon, Jan 4, 2010 at 12:09 PM, Jan Hartmann<j.l.h.hartmann at uva.nl>
>>>>>>  wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>>
>>>>>>> On 4-1-2010 8:47, jamesmikedupont at googlemail.com wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>>
>>>>>>>> In addition, I have started a c++ branch of proj4, and have resolved
>>>>>>>> some compile problems.
>>>>>>>> Feel free to check it out
>>>>>>>> http://github.com/h4ck3rm1k3/ProjC--/
>>>>>>>>
>>>>>>>> mike
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>> Just curious, what does this branch do that the main tree doesn' t?
>>>>>>>
>>>>>>> Jan
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>
>>>>>
>>>
>>>
>


From John.C.Cartwright at noaa.gov  Tue Jan  5 14:45:54 2010
From: John.C.Cartwright at noaa.gov (John Cartwright)
Date: Tue, 05 Jan 2010 15:45:54 -0700
Subject: [Proj] cs2cs and PDC Mercator
Message-ID: <4B43C122.8060906@noaa.gov>

Hello All,

I'm trying to convert geographic coords (EPSG 4326) to PDC Mercator
(EPSG 3349) and was using the command line listed below.  I was
surprised to find that the PDC mercator X values were the same for
-179.999999 or +179.999999.  Can someone please explain what I'm doing
wrong?

Thanks!

--john


cs2cs +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs  +to +proj=merc
+lon_0=-150 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m
+no_defs <<EOF
> -179.999999 -89.999999
> 179.999999 -89.999999
> 179.999999 89.999999
> -179.999999 89.999999
EOF

-3339584.61   -118315559.69 0.00
-3339584.84     -118315559.69 0.00
-3339584.84     118315559.73 0.00
-3339584.61     118315559.73 0.00



From jagoncal at gmail.com  Tue Jan  5 16:22:16 2010
From: jagoncal at gmail.com (=?ISO-8859-1?Q?Jose_Gon=E7alves?=)
Date: Wed, 6 Jan 2010 00:22:16 +0000
Subject: [Proj] cs2cs and PDC Mercator
In-Reply-To: <4B43C122.8060906@noaa.gov>
References: <4B43C122.8060906@noaa.gov>
Message-ID: <6a91fcb01001051622i5518c182y3ccd6d8347c1ac9c@mail.gmail.com>

Hello

I think that is the expected result. The formula for the X coordinate is:
X=a*(lon-lon_0)*PI/180
where a is the semi-major axis and longitudes are in degrees. If the
result of the longitude difference is out of the interval (-180,+180)
it is reduced to this interval by adding or subtracting 360 degrees.

 -179.999999 + 150 =  -29.999999   ===>  -29.999999

+179.999999 + 150 = +329.999999   ===>  -30.000001

So the result is approximately the same (2 microdegree difference,
which corresponds to approx. 22 cm).
Probably you get the result you want by changing +lon_0 to 0 and
including the appropriate x_0 value.

Regards

José Gonçalves




2010/1/5 John Cartwright <John.C.Cartwright at noaa.gov>:
> Hello All,
>
> I'm trying to convert geographic coords (EPSG 4326) to PDC Mercator
> (EPSG 3349) and was using the command line listed below.  I was
> surprised to find that the PDC mercator X values were the same for
> -179.999999 or +179.999999.  Can someone please explain what I'm doing
> wrong?
>
> Thanks!
>
> --john
>
>
> cs2cs +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs  +to +proj=merc
> +lon_0=-150 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m
> +no_defs <<EOF
>> -179.999999 -89.999999
>> 179.999999 -89.999999
>> 179.999999 89.999999
>> -179.999999 89.999999
> EOF
>
> -3339584.61   -118315559.69 0.00
> -3339584.84     -118315559.69 0.00
> -3339584.84     118315559.73 0.00
> -3339584.61     118315559.73 0.00
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


From ckarney at sarnoff.com  Fri Jan  8 12:00:25 2010
From: ckarney at sarnoff.com (Charles Karney)
Date: Fri, 08 Jan 2010 15:00:25 -0500
Subject: [Proj] New home for GeographicLib
Message-ID: <ssrzl4oe59i.fsf@puffin.sarnoff.com>

GeographicLib, which used to be hosted on my home computer, is now
hosted by sourceforge.  See

  http://geographiclib.sourceforge.net/

for library downloads and documentation.  This site also provides online
calculators for

* UTM/UPS/MGRS conversions
  http://geographiclib.sourceforge.net/cgi-bin/GeoConvert

* Geodesic problems
  http://geographiclib.sourceforge.net/cgi-bin/Geod

* Geoid heights
  http://geographiclib.sourceforge.net/cgi-bin/GeoidEval

(These just run the corresponding GeographicLib utilities.)

I recently released a new version (1.0) which fixes a couple of bugs (in
PolarStereographic and Geoid) and which adds a LambertConformalConic
class.

  --Charles
-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662


From jamesmikedupont at googlemail.com  Fri Jan  8 12:05:49 2010
From: jamesmikedupont at googlemail.com (jamesmikedupont at googlemail.com)
Date: Fri, 8 Jan 2010 21:05:49 +0100
Subject: [Proj] New home for GeographicLib
In-Reply-To: <ssrzl4oe59i.fsf@puffin.sarnoff.com>
References: <ssrzl4oe59i.fsf@puffin.sarnoff.com>
Message-ID: <ee9cc731001081205q2a9e2b9bnf2d5c6f837184b26@mail.gmail.com>

Congrats!

On Fri, Jan 8, 2010 at 9:00 PM, Charles Karney <ckarney at sarnoff.com> wrote:
> GeographicLib, which used to be hosted on my home computer, is now
> hosted by sourceforge.  See
>
>  http://geographiclib.sourceforge.net/
>
> for library downloads and documentation.  This site also provides online
> calculators for
>
> * UTM/UPS/MGRS conversions
>  http://geographiclib.sourceforge.net/cgi-bin/GeoConvert
>
> * Geodesic problems
>  http://geographiclib.sourceforge.net/cgi-bin/Geod
>
> * Geoid heights
>  http://geographiclib.sourceforge.net/cgi-bin/GeoidEval
>
> (These just run the corresponding GeographicLib utilities.)
>
> I recently released a new version (1.0) which fixes a couple of bugs (in
> PolarStereographic and Geoid) and which adds a LambertConformalConic
> class.
>
>  --Charles
> --
> Charles Karney <ckarney at sarnoff.com>
> Sarnoff Corporation, Princeton, NJ 08543-5300
>
> Tel: +1 609 734 2312
> Fax: +1 609 734 2662
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


From ckarney at Sarnoff.com  Fri Jan  8 12:20:07 2010
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Fri, 8 Jan 2010 15:20:07 -0500
Subject: [Proj] New home for GeographicLib
In-Reply-To: <ee9cc731001081205q2a9e2b9bnf2d5c6f837184b26@mail.gmail.com>
References: <ssrzl4oe59i.fsf@puffin.sarnoff.com>,
	<ee9cc731001081205q2a9e2b9bnf2d5c6f837184b26@mail.gmail.com>
Message-ID: <CED6B4B383C5F0418DAFEA443A0033C2E66F004AD4@MALIBU.sarnoff.internal>

Thanks!  I should point out that there's no qualification a package has
to satisfy before being put on put on sourceforge besides
  open source
  its name isn't already used

  --Charles

________________________________________
From: jamesmikedupont at googlemail.com [jamesmikedupont at googlemail.com]
Sent: Friday, January 08, 2010 15:05
To: Karney, Charles; PROJ.4 and general Projections Discussions
Subject: Re: [Proj] New home for GeographicLib

Congrats!

On Fri, Jan 8, 2010 at 9:00 PM, Charles Karney <ckarney at sarnoff.com> wrote:
> GeographicLib, which used to be hosted on my home computer, is now
> hosted by sourceforge.  See
>
>  http://geographiclib.sourceforge.net/
>
> for library downloads and documentation.  This site also provides online
> calculators for
>
> * UTM/UPS/MGRS conversions
>  http://geographiclib.sourceforge.net/cgi-bin/GeoConvert
>
> * Geodesic problems
>  http://geographiclib.sourceforge.net/cgi-bin/Geod
>
> * Geoid heights
>  http://geographiclib.sourceforge.net/cgi-bin/GeoidEval
>
> (These just run the corresponding GeographicLib utilities.)
>
> I recently released a new version (1.0) which fixes a couple of bugs (in
> PolarStereographic and Geoid) and which adds a LambertConformalConic
> class.
>
>  --Charles
> --
> Charles Karney <ckarney at sarnoff.com>
> Sarnoff Corporation, Princeton, NJ 08543-5300
>
> Tel: +1 609 734 2312
> Fax: +1 609 734 2662
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



From anisha.kaul at hitechroboticsystemz.com  Sat Jan  9 04:29:01 2010
From: anisha.kaul at hitechroboticsystemz.com (Anisha Kaul)
Date: Sat, 9 Jan 2010 17:59:01 +0530
Subject: [Proj] Projections with respect to India
Message-ID: <201001091759.01463.anisha.kaul@hitechroboticsystemz.com>

Hello to all,

I downloaded an OSM map file namely "india.osm.bz2".
I transported it in PostgreSQL database "gis" with the command :

./osm2pgsql -m -d gis india.osm.bz2 

The above command resulted in the creation of the following tables filled with data in database "gis"

gis=# \d
                 List of relations
 Schema |        Name        |   Type   |  Owner
--------+--------------------+----------+----------
 public | geometry_columns   | table    | anisha
 public | planet_osm_line    | table    | anisha
 public | planet_osm_point   | table    | anisha
 public | planet_osm_polygon | table    | anisha
 public | planet_osm_roads   | table    | anisha
 public | polygon_oid_seq    | sequence | postgres
 public | spatial_ref_sys    | table    | anisha

Now to convert the map data of one of the above tables in a shape file, I issued the following command:

pgsql2shp -f myfile gis planet_osm_line

The projection file now generated namely "myfile.prj" contains the following !

PROJCS["WGS84 / Simple Mercator",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS_1984", 6378137.0, 
298.257223563]],PRIMEM["Greenwich", 0.0],UNIT["degree", 0.017453292519943295],AXIS["Longitude", 
EAST],AXIS["Latitude", NORTH]],PROJECTION["Mercator_1SP_Google"],PARAMETER["latitude_of_origin", 
0.0],PARAMETER["central_meridian", 0.0],PARAMETER["scale_factor", 1.0],PARAMETER["false_easting", 
0.0],PARAMETER["false_northing", 0.0],UNIT["m", 1.0],AXIS["x", EAST],AXIS["y", NORTH],AUTHORITY["EPSG","900913"]]

I am confused with the resultant projection file,
Now how should I specify the projection values/SRS with respect to India ?

I tried to write projection as follows in a python file with respect to the above generated projection file:

+proj=merc +lon_0=0.0 +k=1.0 +x_0=0.0 +y_0=0.0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs

But still not maps were generated !! 

Kindly guide where I am wrong ???

Thanking you in anticipation,

-- 
Regards,
Anisha Kaul


-------------------------------------
Hi-Tech Gears Limited, Gurgaon, India

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100109/f6f55803/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: company-logo.gif
Type: application/octet-stream
Size: 6200 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100109/f6f55803/attachment.obj>

From hamish_b at yahoo.com  Sat Jan  9 06:09:04 2010
From: hamish_b at yahoo.com (Hamish)
Date: Sat, 9 Jan 2010 06:09:04 -0800 (PST)
Subject: [Proj] Projections with respect to India
Message-ID: <802844.93908.qm@web110008.mail.gq1.yahoo.com>

> But still not maps were generated !! 

I don't know enough about the OSM stuff to give you much advice there,
but I do suggest you install QGIS (www.qgis.org) and connect to the
PostGIS database that way. That will let you know if the problem is
with getting it into the PG data base or with rendering the database
in GpsDrive.


good luck,
Hamish




      


From gdt at ir.bbn.com  Sat Jan  9 07:06:19 2010
From: gdt at ir.bbn.com (Greg Troxel)
Date: Sat, 09 Jan 2010 10:06:19 -0500
Subject: [Proj] Projections with respect to India
In-Reply-To: <201001091759.01463.anisha.kaul@hitechroboticsystemz.com> (Anisha
	Kaul's message of "Sat, 9 Jan 2010 17:59:01 +0530")
References: <201001091759.01463.anisha.kaul@hitechroboticsystemz.com>
Message-ID: <rmiocl3l3mc.fsf@fnord.ir.bbn.com>


  I downloaded an OSM map file namely "india.osm.bz2".
  I transported it in PostgreSQL database "gis" with the command :

  ./osm2pgsql -m -d gis india.osm.bz2 


  pgsql2shp -f myfile gis planet_osm_line

  The projection file now generated namely "myfile.prj" contains the following !

  PROJCS["WGS84 / Simple Mercator",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS_1984", 6378137.0, 
  298.257223563]],PRIMEM["Greenwich", 0.0],UNIT["degree", 0.017453292519943295],AXIS["Longitude", 
  EAST],AXIS["Latitude", NORTH]],PROJECTION["Mercator_1SP_Google"],PARAMETER["latitude_of_origin", 
  0.0],PARAMETER["central_meridian", 0.0],PARAMETER["scale_factor", 1.0],PARAMETER["false_easting", 
  0.0],PARAMETER["false_northing", 0.0],UNIT["m", 1.0],AXIS["x", EAST],AXIS["y", NORTH],AUTHORITY["EPSG","900913"]]

This is really an OSM question more than a proj question.

OSM stores data in WGS84 EPGS4326 (in the xml file).  But, osm2pgsql by
default converts to Google Spherical Mercator EPGS:900913.  If you are
trying to use this data in a local coordinate system (an Indian TM or
lambert conformal conic system?), then you are probably better off
importing in EPSG4326.


http://wiki.openstreetmap.org/wiki/Osm2pgsql
http://wiki.openstreetmap.org/wiki/Mapnik#osm2pgsql
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100109/ffd1416a/attachment.sig>

From milovanderlinden at gmail.com  Sat Jan  9 07:44:10 2010
From: milovanderlinden at gmail.com (Milo van der Linden)
Date: Sat, 09 Jan 2010 16:44:10 +0100
Subject: [Proj] Projections with respect to India
In-Reply-To: <rmiocl3l3mc.fsf@fnord.ir.bbn.com>
References: <201001091759.01463.anisha.kaul@hitechroboticsystemz.com>
	<rmiocl3l3mc.fsf@fnord.ir.bbn.com>
Message-ID: <4B48A44A.7060209@gmail.com>

Which can easily be done with using the -l or --latlong parameter:

./osm2pgsql -l -d gis india.osm.bz2 


> This is really an OSM question more than a proj question.
>
> OSM stores data in WGS84 EPGS4326 (in the xml file).  But, osm2pgsql by
> default converts to Google Spherical Mercator EPGS:900913.  If you are
> trying to use this data in a local coordinate system (an Indian TM or
> lambert conformal conic system?), then you are probably better off
> importing in EPSG4326.
>
>
> http://wiki.openstreetmap.org/wiki/Osm2pgsql
> http://wiki.openstreetmap.org/wiki/Mapnik#osm2pgsql
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From jamesmikedupont at googlemail.com  Sat Jan  9 07:59:25 2010
From: jamesmikedupont at googlemail.com (jamesmikedupont at googlemail.com)
Date: Sat, 9 Jan 2010 16:59:25 +0100
Subject: [Proj] Projections with respect to India
In-Reply-To: <4B48A44A.7060209@gmail.com>
References: <201001091759.01463.anisha.kaul@hitechroboticsystemz.com>
	<rmiocl3l3mc.fsf@fnord.ir.bbn.com> <4B48A44A.7060209@gmail.com>
Message-ID: <ee9cc731001090759i7aef92e8y9183027e131cdcec@mail.gmail.com>

Here is a map of indian utms :
http://mapsof.net/asia/static-maps/png/la2-india-utm-zones

I found these tools good, you plug in the corrds and they give you the utm info
http://www.cibolasar.org/UTMConverter.shtml
http://www.dmap.co.uk/ll2tm.htm
hope that helps,

mike

On Sat, Jan 9, 2010 at 4:44 PM, Milo van der Linden
<milovanderlinden at gmail.com> wrote:
> Which can easily be done with using the -l or --latlong parameter:
>
> ./osm2pgsql -l -d gis india.osm.bz2
>
>
>> This is really an OSM question more than a proj question.
>>
>> OSM stores data in WGS84 EPGS4326 (in the xml file).  But, osm2pgsql by
>> default converts to Google Spherical Mercator EPGS:900913.  If you are
>> trying to use this data in a local coordinate system (an Indian TM or
>> lambert conformal conic system?), then you are probably better off
>> importing in EPSG4326.
>>
>>
>> http://wiki.openstreetmap.org/wiki/Osm2pgsql
>> http://wiki.openstreetmap.org/wiki/Mapnik#osm2pgsql
>>
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


From anisha.kaul at hitechroboticsystemz.com  Sun Jan 10 23:11:37 2010
From: anisha.kaul at hitechroboticsystemz.com (Anisha Kaul)
Date: Mon, 11 Jan 2010 12:41:37 +0530
Subject: [Proj] Projections with respect to India
In-Reply-To: <201001091759.01463.anisha.kaul@hitechroboticsystemz.com>
References: <201001091759.01463.anisha.kaul@hitechroboticsystemz.com>
Message-ID: <201001111241.37710.anisha.kaul@hitechroboticsystemz.com>

Many thanks to all of you for bothering to reply !!

>From Greg Troxel
> OSM stores data in WGS84 EPGS4326 (in the xml file).  But, osm2pgsql by
> default converts to Google Spherical Mercator EPGS:900913.  If you are
> trying to use this data in a local coordinate system (an Indian TM or
> lambert conformal conic system?), then you are probably better off
> importing in EPSG4326.

>From Milo van der Linden
> Which can easily be done with using the -l or --latlong parameter:
> ./osm2pgsql -l -d gis india.osm.bz2 

According to both your suggestions, I droped the database "gis", and recreated it !

Now when I did execute the following command 
____________________________________________________________
./osm2pgsql -l -E EPSG:4326 -d gis ~/mapnik-0.6.0/osmFiles/india.osm.bz2


It resulted in the following output:
____________________________________________________________
osm2pgsql SVN version 0.69-19270

Using projection SRS 4326 (Latlong)
Setting up table: planet_osm_point
NOTICE:  table "planet_osm_point" does not exist, skipping
NOTICE:  table "planet_osm_point_tmp" does not exist, skipping
SELECT AddGeometryColumn('planet_osm_point', 'way', 4326, 'POINT', 2 );
 failed: ERROR:  AddGeometryColumns() - invalid SRID
CONTEXT:  SQL statement "SELECT AddGeometryColumn('','', $1 , $2 , $3 , $4 , $5 )"
PL/pgSQL function "addgeometrycolumn" line 4 at SQL statement

Error occurred, cleaning up

====================================================================
Then I executed the following command:
psql -f 900913.sql -d gis

It resulted in the following output:
INSERT 0 1

====================================================================
Then I executed the following command 
____________________________________________________________
./osm2pgsql -l -E EPSG:4326 -d gis ~/mapnik-0.6.0/osmFiles/india.osm.bz2


and again it resulted in the following output:
____________________________________________________________
osm2pgsql SVN version 0.69-19270

Using projection SRS 4326 (Latlong)
Setting up table: planet_osm_point
NOTICE:  table "planet_osm_point" does not exist, skipping
NOTICE:  table "planet_osm_point_tmp" does not exist, skipping
SELECT AddGeometryColumn('planet_osm_point', 'way', 4326, 'POINT', 2 );
 failed: ERROR:  AddGeometryColumns() - invalid SRID
CONTEXT:  SQL statement "SELECT AddGeometryColumn('','', $1 , $2 , $3 , $4 , $5 )"
PL/pgSQL function "addgeometrycolumn" line 4 at SQL statement

Error occurred, cleaning up


PLEASE HELP, IF YOU CAN !!

-- 
Regards,
Anisha Kaul


-------------------------------------
Hi-Tech Gears Limited, Gurgaon, India

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100111/5c05c142/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: company-logo.gif
Type: application/octet-stream
Size: 6200 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100111/5c05c142/attachment.obj>

From anisha.kaul at hitechroboticsystemz.com  Sun Jan 10 23:24:12 2010
From: anisha.kaul at hitechroboticsystemz.com (Anisha Kaul)
Date: Mon, 11 Jan 2010 12:54:12 +0530
Subject: [Proj] Projections with respect to India
Message-ID: <201001111254.12818.anisha.kaul@hitechroboticsystemz.com>

Many thanks to all of you for bothering to reply !!

>From Greg Troxel
> OSM stores data in WGS84 EPGS4326 (in the xml file).  But, osm2pgsql by
> default converts to Google Spherical Mercator EPGS:900913.  If you are
> trying to use this data in a local coordinate system (an Indian TM or
> lambert conformal conic system?), then you are probably better off
> importing in EPSG4326.

>From Milo van der Linden
> Which can easily be done with using the -l or --latlong parameter:
> ./osm2pgsql -l -d gis india.osm.bz2 

According to both your suggestions, I droped the database "gis", and recreated it !

Now when I did execute the following command 
____________________________________________________________
./osm2pgsql -l -E EPSG:4326 -d gis ~/mapnik-0.6.0/osmFiles/india.osm.bz2


It resulted in the following output:
____________________________________________________________
osm2pgsql SVN version 0.69-19270

Using projection SRS 4326 (Latlong)
Setting up table: planet_osm_point
NOTICE:  table "planet_osm_point" does not exist, skipping
NOTICE:  table "planet_osm_point_tmp" does not exist, skipping
SELECT AddGeometryColumn('planet_osm_point', 'way', 4326, 'POINT', 2 );
 failed: ERROR:  AddGeometryColumns() - invalid SRID
CONTEXT:  SQL statement "SELECT AddGeometryColumn('','', $1 , $2 , $3 , $4 , $5 )"
PL/pgSQL function "addgeometrycolumn" line 4 at SQL statement

Error occurred, cleaning up

====================================================================
Then I executed the following command:
psql -f 900913.sql -d gis

It resulted in the following output:
INSERT 0 1

====================================================================
Then I executed the following command 
____________________________________________________________
./osm2pgsql -l -E EPSG:4326 -d gis ~/mapnik-0.6.0/osmFiles/india.osm.bz2


and again it resulted in the following output:
____________________________________________________________
osm2pgsql SVN version 0.69-19270

Using projection SRS 4326 (Latlong)
Setting up table: planet_osm_point
NOTICE:  table "planet_osm_point" does not exist, skipping
NOTICE:  table "planet_osm_point_tmp" does not exist, skipping
SELECT AddGeometryColumn('planet_osm_point', 'way', 4326, 'POINT', 2 );
 failed: ERROR:  AddGeometryColumns() - invalid SRID
CONTEXT:  SQL statement "SELECT AddGeometryColumn('','', $1 , $2 , $3 , $4 , $5 )"
PL/pgSQL function "addgeometrycolumn" line 4 at SQL statement

Error occurred, cleaning up


PLEASE HELP, IF YOU CAN !!

-- 
Regards,
Anisha Kaul

-------------------------------------
Hi-Tech Gears Limited, Gurgaon, India






From anisha.kaul at hitechroboticsystemz.com  Sun Jan 10 23:31:32 2010
From: anisha.kaul at hitechroboticsystemz.com (Anisha Kaul)
Date: Mon, 11 Jan 2010 13:01:32 +0530
Subject: [Proj] Projections with respect to India
Message-ID: <201001111301.32589.anisha.kaul@hitechroboticsystemz.com>

Many thanks to all of you for bothering to reply !!

Data in my previous mail was missing :
http://lists.maptools.org/pipermail/proj/2010-January/005005.html

Greg Troxel wrote:
> OSM stores data in WGS84 EPGS4326 (in the xml file).  But, osm2pgsql by
> default converts to Google Spherical Mercator EPGS:900913.  If you are
> trying to use this data in a local coordinate system (an Indian TM or
> lambert conformal conic system?), then you are probably better off
> importing in EPSG4326.

Milo van der Linden wrote:
> Which can easily be done with using the -l or --latlong parameter:
> ./osm2pgsql -l -d gis india.osm.bz2 

According to both your suggestions, I droped the database "gis", and recreated it !

Now when I did execute the following command 
____________________________________________________________
./osm2pgsql -l -E EPSG:4326 -d gis ~/mapnik-0.6.0/osmFiles/india.osm.bz2


It resulted in the following output:
____________________________________________________________
osm2pgsql SVN version 0.69-19270

Using projection SRS 4326 (Latlong)
Setting up table: planet_osm_point
NOTICE:  table "planet_osm_point" does not exist, skipping
NOTICE:  table "planet_osm_point_tmp" does not exist, skipping
SELECT AddGeometryColumn('planet_osm_point', 'way', 4326, 'POINT', 2 );
 failed: ERROR:  AddGeometryColumns() - invalid SRID
CONTEXT:  SQL statement "SELECT AddGeometryColumn('','', $1 , $2 , $3 , $4 , $5 )"
PL/pgSQL function "addgeometrycolumn" line 4 at SQL statement

Error occurred, cleaning up

====================================================================
Then I executed the following command:
psql -f 900913.sql -d gis

It resulted in the following output:
INSERT 0 1

====================================================================
Then I executed the following command 
____________________________________________________________
./osm2pgsql -l -E EPSG:4326 -d gis ~/mapnik-0.6.0/osmFiles/india.osm.bz2


and again it resulted in the following output:
____________________________________________________________
osm2pgsql SVN version 0.69-19270

Using projection SRS 4326 (Latlong)
Setting up table: planet_osm_point
NOTICE:  table "planet_osm_point" does not exist, skipping
NOTICE:  table "planet_osm_point_tmp" does not exist, skipping
SELECT AddGeometryColumn('planet_osm_point', 'way', 4326, 'POINT', 2 );
 failed: ERROR:  AddGeometryColumns() - invalid SRID
CONTEXT:  SQL statement "SELECT AddGeometryColumn('','', $1 , $2 , $3 , $4 , $5 )"
PL/pgSQL function "addgeometrycolumn" line 4 at SQL statement

Error occurred, cleaning up


PLEASE HELP, IF YOU CAN !!

-- 
Regards,
Anisha Kaul

-------------------------------------
Hi-Tech Gears Limited, Gurgaon, India






From Mikael.Rittri at carmenta.com  Mon Jan 11 00:23:39 2010
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 11 Jan 2010 09:23:39 +0100
Subject: [Proj] cs2cs and PDC Mercator
In-Reply-To: <6a91fcb01001051622i5518c182y3ccd6d8347c1ac9c@mail.gmail.com>
References: <4B43C122.8060906@noaa.gov>
	<6a91fcb01001051622i5518c182y3ccd6d8347c1ac9c@mail.gmail.com>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101BDDEE5@posty.carmenta.se>

José Gonçalves wrote:
 
> I think that is the expected result.

I agree. The interrupted meridian (where the Mercator cylinder is cut)
should be antipodal to the central meridian.  For PDC Mercator, this 
means that projected coordinates should be continuous in the entire 
Pacific Ocean. (PDC = Pacific Disaster Center, Hawaii.)

By the way, note that EPSG:3349 was deprecated in 2008 and replaced 
by EPSG:3832.  The corrected CRS has central meridian at 150 E,
instead of 150 W. 

Regards,
--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Jose Gonçalves
Sent: den 6 januari 2010 01:22
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] cs2cs and PDC Mercator

Hello

I think that is the expected result. The formula for the X coordinate is:
X=a*(lon-lon_0)*PI/180
where a is the semi-major axis and longitudes are in degrees. If the result of the longitude difference is out of the interval (-180,+180) it is reduced to this interval by adding or subtracting 360 degrees.

 -179.999999 + 150 =  -29.999999   ===>  -29.999999

+179.999999 + 150 = +329.999999   ===>  -30.000001

So the result is approximately the same (2 microdegree difference, which corresponds to approx. 22 cm).
Probably you get the result you want by changing +lon_0 to 0 and including the appropriate x_0 value.

Regards

José Gonçalves




2010/1/5 John Cartwright <John.C.Cartwright at noaa.gov>:
> Hello All,
>
> I'm trying to convert geographic coords (EPSG 4326) to PDC Mercator 
> (EPSG 3349) and was using the command line listed below.  I was 
> surprised to find that the PDC mercator X values were the same for
> -179.999999 or +179.999999.  Can someone please explain what I'm doing 
> wrong?
>
> Thanks!
>
> --john
>
>
> cs2cs +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs  +to +proj=merc
> +lon_0=-150 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m 
> +no_defs <<EOF
>> -179.999999 -89.999999
>> 179.999999 -89.999999
>> 179.999999 89.999999
>> -179.999999 89.999999
> EOF
>
> -3339584.61   -118315559.69 0.00
> -3339584.84     -118315559.69 0.00
> -3339584.84     118315559.73 0.00
> -3339584.61     118315559.73 0.00
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From atermens at gmail.com  Mon Jan 11 01:37:21 2010
From: atermens at gmail.com (Assumpcio Termens)
Date: Mon, 11 Jan 2010 10:37:21 +0100
Subject: [Proj] How to apply an affine transformation?
Message-ID: <39e9932e1001110137y644849f0n3f9eae43d1855cd2@mail.gmail.com>

Hello to all,

I'm a new user of PROJ library. I have to apply a transformation from
EPSG:23031 to EPSG:25831. The parametrization of the datum transformation is
an affine 2D transformation which has to be applied directly to UTM
coordinates. This parametrization is very useful in CAD environments, but I
don't know how to use in cs2cs or in GDAL/OGR library.

Can I use this type of transformation in "cs2cs"?
Which options have to put in the comand line?
Or which files have to be modified?

Thank you very much,

Assumpció Termens
Geoprocess Department
ICC
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100111/a4b8db34/attachment.html>

From jagoncal at gmail.com  Mon Jan 11 02:20:43 2010
From: jagoncal at gmail.com (=?ISO-8859-1?Q?Jose_Gon=E7alves?=)
Date: Mon, 11 Jan 2010 10:20:43 +0000
Subject: [Proj] How to apply an affine transformation?
In-Reply-To: <39e9932e1001110137y644849f0n3f9eae43d1855cd2@mail.gmail.com>
References: <39e9932e1001110137y644849f0n3f9eae43d1855cd2@mail.gmail.com>
Message-ID: <6a91fcb01001110220r316f7f97ud624cb46384d6630@mail.gmail.com>

Hello

I think there is no way of doing direct transformations between two
cartographic coordinate systems (affine or other polynomial) with
program CS2CS.
Using command awk (unix/linux but also available for windows) you can
do something like:

awk '{print $1*A+$2*B+E,$1*C+$2*D+F}' < input_file.txt > output_file.txt

where A,B,C,D,E and F are the parameters of your affine
transformation. The input file must be a text file with Easting and
Northing separated by space or tab, in the same way you would give to
program CS2CS.

If you really want to use CS2CS (or GDAL/OGR programs) you can create
a datum shift grid file (GSB extension), with longitude and latitude
differences, agreeing with the 2D direct affine transformation.
There is the spanish grid file SPED2ETV2.gsb, which is available with
the GVSIG software (and ArcGIS 9.3), which should do the conversion
for all Spain with an accuracy of some 10 or 20 cm. Isn't it very
close to your direct affine transformation?

Regards

José Gonçalves


2010/1/11 Assumpcio Termens <atermens at gmail.com>:
> Hello to all,
>
> I'm a new user of PROJ library. I have to apply a transformation from
> EPSG:23031 to EPSG:25831. The parametrization of the datum transformation is
> an affine 2D transformation which has to be applied directly to UTM
> coordinates. This parametrization is very useful in CAD environments, but I
> don't know how to use in cs2cs or in GDAL/OGR library.
>
> Can I use this type of transformation in "cs2cs"?
> Which options have to put in the comand line?
> Or which files have to be modified?
>
> Thank you very much,
>
> Assumpció Termens
> Geoprocess Department
> ICC
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


From atermens at gmail.com  Mon Jan 11 02:56:03 2010
From: atermens at gmail.com (Assumpcio Termens)
Date: Mon, 11 Jan 2010 11:56:03 +0100
Subject: [Proj] How to apply an affine transformation?
In-Reply-To: <6a91fcb01001110220r316f7f97ud624cb46384d6630@mail.gmail.com>
References: <39e9932e1001110137y644849f0n3f9eae43d1855cd2@mail.gmail.com>
	<6a91fcb01001110220r316f7f97ud624cb46384d6630@mail.gmail.com>
Message-ID: <39e9932e1001110256y7e238492s5f8d15c4b92ae994@mail.gmail.com>

Thank you very much for your answer,

Generate a NTv2 grid was the first idea to apply, but I try to find if a
direct application would be possible and avoid datum shift files.

Thanks also for the information about the Spanish datum shift, I know it.
But in Catalonia -I'm working at the cartograhic agency for the local
government- we have our local datum transformation that it is more accurate
than Spanish one...

Best regards,

Assumpció.

2010/1/11 Jose Gonçalves <jagoncal at gmail.com>

> Hello
>
> I think there is no way of doing direct transformations between two
> cartographic coordinate systems (affine or other polynomial) with
> program CS2CS.
> Using command awk (unix/linux but also available for windows) you can
> do something like:
>
> awk '{print $1*A+$2*B+E,$1*C+$2*D+F}' < input_file.txt > output_file.txt
>
> where A,B,C,D,E and F are the parameters of your affine
> transformation. The input file must be a text file with Easting and
> Northing separated by space or tab, in the same way you would give to
> program CS2CS.
>
> If you really want to use CS2CS (or GDAL/OGR programs) you can create
> a datum shift grid file (GSB extension), with longitude and latitude
> differences, agreeing with the 2D direct affine transformation.
> There is the spanish grid file SPED2ETV2.gsb, which is available with
> the GVSIG software (and ArcGIS 9.3), which should do the conversion
> for all Spain with an accuracy of some 10 or 20 cm. Isn't it very
> close to your direct affine transformation?
>
> Regards
>
> José Gonçalves
>
>
> 2010/1/11 Assumpcio Termens <atermens at gmail.com>:
> > Hello to all,
> >
> > I'm a new user of PROJ library. I have to apply a transformation from
> > EPSG:23031 to EPSG:25831. The parametrization of the datum transformation
> is
> > an affine 2D transformation which has to be applied directly to UTM
> > coordinates. This parametrization is very useful in CAD environments, but
> I
> > don't know how to use in cs2cs or in GDAL/OGR library.
> >
> > Can I use this type of transformation in "cs2cs"?
> > Which options have to put in the comand line?
> > Or which files have to be modified?
> >
> > Thank you very much,
> >
> > Assumpció Termens
> > Geoprocess Department
> > ICC
> >
> >
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100111/8d40cfff/attachment.html>

From hamish_b at yahoo.com  Mon Jan 11 07:40:09 2010
From: hamish_b at yahoo.com (Hamish)
Date: Mon, 11 Jan 2010 07:40:09 -0800 (PST)
Subject: [Proj] How to apply an affine transformation?
In-Reply-To: <39e9932e1001110256y7e238492s5f8d15c4b92ae994@mail.gmail.com>
Message-ID: <939727.21315.qm@web110010.mail.gq1.yahoo.com>

Assumpcio Termens wrote:
> Generate a NTv2 grid was the first idea to apply, but I try
> to find if a direct application would be possible and avoid
> datum shift files. 

perhaps this could help:

"v.transform - Performs an affine transformation (shift, scale
and rotate, or GPCs) on vector map."

http://grass.osgeo.org/grass64/manuals/html64_user/v.transform.html


the help page indicates that similar transforms are available
in PostGIS and R-statistics.


Hamish



      


From ckarney at Sarnoff.com  Tue Jan 12 06:21:44 2010
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Tue, 12 Jan 2010 09:21:44 -0500
Subject: [Proj] Thomas,
	Conformal projections in geodesy and cartography (1952)
Message-ID: <CED6B4B383C5F0418DAFEA443A0033C2E66F004ADE@MALIBU.sarnoff.internal>

A while back (Sept 2008), I was looking for a copy of

  P. D. Thomas,
  Conformal projections in geodesy and cartography,
  Publ. No. 251 (US Coast and Geodetic Survey, 1952).

and Janne Kovanen kindly sent me a scan of some sections of the report.
I've recently discovered that NOAA has published this report on its web
site.  See

  http://docs.lib.noaa.gov/rescue/cgs_specpubs/QB275U35no2511952.pdf

This web site includes a full(?) set of scans of "Special Publications"
of the US Coast and Geodetic Survey.  See

  http://docs.lib.noaa.gov/rescue/cgs_specpubs/data_rescue_cgs_specpubs.html

There are lots of interesting reports included here.  Enjoy!

  --Charles
--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662


From ckarney at Sarnoff.com  Tue Jan 12 06:55:36 2010
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Tue, 12 Jan 2010 09:55:36 -0500
Subject: [Proj]
 =?iso-8859-1?q?M=E9moire_sur_la_repr=E9sentation_des_surfa?=
 =?iso-8859-1?q?ces_et_les_projections_des_cartes_=28Auguste_Tissot=2C_188?=
 =?iso-8859-1?q?1=29?=
In-Reply-To: <OF0C609EDF.3E0AD6C3-ON87257679.00744DDC-87257679.00753D67@usgs.gov>
References: <OF4BAE87AF.193A9873-ON85257670.0078EED5@usgs.gov>,
	<OFF8C32224.62D45080-ON87257671.0002A7F3-87257671.0003AE6D@usgs.gov>
	<CED6B4B383C5F0418DAFEA443A0033C2E66F0049AC@MALIBU.sarnoff.internal>
	<OFB3DAA45A.CC45D83F-ON87257672.0050FE97-87257672.005247DB@LocalDomain>,
	<OF7F8907E5.F73B0681-ON87257677.00640EE9-87257677.0065F12C@usgs.gov>
	<CED6B4B383C5F0418DAFEA443A0033C2E66F0049E2@MALIBU.sarnoff.internal>,
	<OF0C609EDF.3E0AD6C3-ON87257679.00744DDC-87257679.00753D67@usgs.gov>
Message-ID: <CED6B4B383C5F0418DAFEA443A0033C2E66F004ADF@MALIBU.sarnoff.internal>

Thanks for the E-mail and my apologies for not replying sooner.  I see
that the Google link is to a search, which, in general, may return
multiple (often, irrelevant) results.  I've typically use a reference
to a specific work within Google, e.g., for Tissot's book

    http://books.google.com/books?id=a5YOAAAAYAAJ

It's also possible to refer to a specific page of a book.  This is
really important when refering to journal articles (for which Google
search will be distinctly iffy), e.g., here's a paper by Chebychev in
a St. Petersburg journal (1856):

    http://books.google.com/books?id=wIE-AAAAcAAJ&pg=RA2-PA256

I've started assembling a list of articles on map projections.  Here's
what I've got so far:

P. Murdoch,
On the best form of geographical maps,
Phil. Trans. 50, Pt. 2, 553-562 (1758, publ. 1759).
http://books.google.com/books?id=5IIFAAAAQAAJ&pg=PA553 (figure missing)

J. H. Lambert,
Anmerkungen und Zusätze zur Entwerfung der Land- und Himmelscharten,
in Beyträge zum Gebrauche der Mathematik und deren Anwendung
(Part 3, Berlin, 1772), pp. 105-199.
http://books.google.com/books?id=sf82AAAAMAAJ&pg=PA105
Reprint: Edited by A. Wangerin, Ostwald's Klassiker, No. 54,
(Engelmann, Leipzig, 1894)
http://books.google.com/books?id=o_s_MR3NUD4C
English translation:
Notes and Comments on the Composition of Terrestrial
and Celestial Maps, by W. R. Tobler,
Michigan Geographical Publication No. 8 (U. Mich., 1972)

L. Euler,
De Repraestentatione Superficiei Sphaericae super Plano
[On the representation of spherical surfaces on a plane],
Acta Acad. Sci. Imp. Petropolitanae 1, 107-132 (1777, publ. 1778).
http://books.google.com/books?id=IPnQAAAAMAAJ&pg=RA1-PA107 (figures missing)
alt: http://math.dartmouth.edu/~euler/pages/E490.html
German translation:
Ueber die Abbildung einer Kugelfläche in einer Ebene, by A. Wangerin,
in Drei Abhandlungen über Kartenprojection,
(Ostwald's Klassiker, No. 93, Engelmann, Leipzig, 1898),
pp. 3-37.
http://books.google.com/books?id=IIAOAAAAYAAJ&pg=PA3

L. Euler,
De Projectione Geographica Superficiei Sphaericae
[On the geographical projections of spherical surfaces],
Acta Acad. Sci. Imp. Petropolitanae 1, 133-142 (1777, publ. 1778).
http://books.google.com/books?id=IPnQAAAAMAAJ&pg=RA1-PA133 (figures missing)
alt: http://math.dartmouth.edu/~euler/pages/E491.html
English translation:
On a geographic projection of the surface of the sphere, by G. W. Heine (2008).
http://math.dartmouth.edu/~euler/docs/translations/E491.pdf
German translation:
Ueber die Darstellung einer Kugelfläche auf einer Karte, by A. Wangerin,
in Drei Abhandlungen über Kartenprojection (op. cit.)
pp. 38-52.
http://books.google.com/books?id=IIAOAAAAYAAJ&pg=PA38

L. Euler,
De Projectione Geographica de Lisliana in Mappa Generali Imperii Russici
Usitata,
Acta Acad. Sci. Imp. Petropolitanae 1, 143-153 (1777, publ. 1778).
http://books.google.com/books?id=IPnQAAAAMAAJ&pg=RA1-PA143 (figures missing)
alt: http://math.dartmouth.edu/~euler/pages/E492.html
English translation:
On de Lisle's geographic projection and its use in the general map of
the Russian Empire, by G. W. Heine (2007).
http://math.dartmouth.edu/~euler/docs/translations/E492.pdf
German translation:
Ueber die De Lisle'sche Kartenprojection und ihre Anwendung auf die
Gesammtkarte des russischen Reiches, by A. Wangerin,
in Drei Abhandlungen über Kartenprojection (op. cit.)
pp. 38-52.
http://books.google.com/books?id=IIAOAAAAYAAJ&pg=PA53

L. Euler,
Trigonometria sphaerica universa, ex primis principiis breviter et
dilucide derivata [A universal spherical trigonometry, derived briefly
and from first prinicples],
Acta Acad. Sci. Imp. Petropolitanae 3, Pt. 1, 72-86 (1779, publ. 1782).
http://books.google.com/books?id=GScZAAAAYAAJ&pg=RA1-PA72 (figures missing)
alt: http://math.dartmouth.edu/~euler/pages/E524.html
German translation:
Allgemeine sphärische Trigonometrie in kurzer und durchsichtiger Entwicklung,
von den einfachsten Voraussetzungen ausgehend, in
''Zwei Abhandlungen über sphärische Trigonometrie'' by E. Hammer
(Ostwald's Klassiker, No. 73, Engelmann, Leipzig 1896), pp. 40-54.
http://books.google.com/books?id=dPbhs0MSJOgC&pg=PA40

J. L. Lagrange,
Sur la Construction des Cartes Géographiques
[On the construcation of maps],
Nouveau Mém. de l'Acad. Roy. des Sciences de Berlin, 161-201 (1779, publ. 1781),
http://books.google.com/books?id=Jv0NAAAAQAAJ&pg=RA1-PA161
German translation:
Ueber die Construction geographischer Karten, by A. Wangerin,
in Ueber Kartenprojection,
Abhandlungen von Lagrange (1779) und Gauss (1822),
(Ostwald's Klassiker, No. 55, Engelmann, Leipzig, 1894),
pp. 3-56.
http://books.google.com/books?id=O4AOAAAAYAAJ&pg=PA3

H. C. Albers,
Über Murdoch's drey Kegelprojection [Murdoch's three conic projections],
Monat. Corr. Zach 11, 97-114, 240-250 (Gotha, 1805).
http://books.google.com/books?id=454AAAAAMAAJ&pg=PA97
http://books.google.com/books?id=454AAAAAMAAJ&pg=PA240

H. C. Albers,
Beschreibung einer neuen Kegelprojection [A new conic projection],
Monat. Corr. Zach 12, 450-459 (Gotha, 1805).
http://books.google.com/books?id=YZ8AAAAAMAAJ&pg=PA450

C. B. Mollweide,
Ueber die vom Prof. Schmidt in Gießen in der zweyten Abteilung seines
Handbuchs der Naturlehre S. 595 angegebene Projection der
Halbkugelfläche
[On Schmidt's  projection of the half sphere],
Monat. Corr. Zach 12, 152-163 (Gotha, 1805).
http://books.google.com/books?id=YZ8AAAAAMAAJ&pg=PA152

C. F. Gauss,
Allgemeine Auflösung der Aufgabe: die Theile einer gegeben Fläche auf
einer andern gegeben Fläche so abzubilden, daß die Abbildung dem
Abgebildeten in den kleinsten Theilen ähnlich wird
{General solution of the conformal projections],
Schumacher's Astron. Abhandlungen 3, 1-30 (Altona, 1825).
http://books.google.com/books?id=odTPAAAAMAAJ&pg=RA3-PA1
Reprint: edited by A. Wangerin,
in Ueber Kartenprojection (op. cit.), pp. 57-81
http://books.google.com/books?id=O4AOAAAAYAAJ&pg=PA57

P. L. Chebyshev,
Sur la Construction des Cartes Géographiques
[On Constructing Maps],
Bull. Cl. Phys.-Math. de l'Acad. Imp. Sci. 14 (329), 257-261
(St. Petersburg, 1856).
http://books.google.com/books?id=wIE-AAAAcAAJ&pg=RA2-PA256

G. B. Airy,
Explanation of a Projection by Balance of Errors for Maps applying to a
very large extent of the Earth's Surface and Comparison of this
projection with other projections,
Phil. Mag. 22 (4th ser.), 409-421 (1861).
http://books.google.com/books?id=lFYEAAAAYAAJ&pg=PA409-IA4

M. A. P. d'Avezac,
Coup d'oeil historique sur la projection des cartes de géographie,
[Survey of the history of cartography],
extract of Bull. Soc. Géog. 1863
(Paris, 1863).
http://books.google.com/books?id=sE61C24WMTcC

E. Beltrami,
Ricerche di analisi applicata alla geometria,
Gior. di Matematiche
2, 267-282 and 297-306 and 331-339 and 355-375 (Naples, 1864);
3, 15-22 and 33-41 and 82-91 and 228-240 and 311-314 (Naples, 1865).
http://books.google.com/books?id=IvVNAAAAMAAJ&pg=RA1-PA267
http://books.google.com/books?id=IvVNAAAAMAAJ&pg=RA1-PA297
http://books.google.com/books?id=IvVNAAAAMAAJ&pg=RA2-PA331
http://books.google.com/books?id=IvVNAAAAMAAJ&pg=RA2-PA355
http://books.google.com/books?id=pPVNAAAAMAAJ&pg=PA15
http://books.google.com/books?id=pPVNAAAAMAAJ&pg=PA33
http://books.google.com/books?id=pPVNAAAAMAAJ&pg=PA82
http://books.google.com/books?id=pPVNAAAAMAAJ&pg=PA228
http://books.google.com/books?id=pPVNAAAAMAAJ&pg=PA311

F. Eisenlohr,
Ueber Flächenabbildung,
Jour. Crelle 72, 143-151 (1870).
http://books.google.com/books?id=VwcPAAAAIAAJ&pg=PA143

C. P. Daly,
On the early history of cartography, or what we know of maps and
map-making before the time of Mercator,
J. Am. Geog. Soc. of New York 11, 1-40 (1879).
http://books.google.com/books?id=uyZkloR4VQcC&pg=PA1

A. Tissot,
Mémoire sur la représentation des surfaces et les projections des cartes
[On the representation of surfaces and map projections]
(Gauthier-Villars, Paris, 1881).
http://books.google.com/books?id=a5YOAAAAYAAJ

T. Craig,
A Treatise on Projections
(US Coast and Geodetic Survey, 1882).
http://books.google.com/books?id=XmRFuOPz9uIC

J. Gall,
Use of Cylindrical Projections for Geographical, Astronomical, and
Scientific Purposes,
Scottish Geographical Mag. 1,119-123 (Edinburgh,1885).
http://books.google.com/books?id=q7cBAAAAYAAJ&pg=PA119

T. G. Rylands,
The geography of Ptolemy elucidated
(Dublin, 1893).
http://books.google.com/books?id=E-A-AAAAYAAJ

O. Schreiber,
Zur konformen Doppelprojection der Preussischen Landesaufnahme
Z. f. Vermessungswesen 28, 491-502 and 593-613 (1899);
29, 257-281 and 289-310 (1900)
http://books.google.com/books?id=6JZIAAAAMAAJ&pg=PA491
http://books.google.com/books?id=6JZIAAAAMAAJ&pg=PA593
http://books.google.com/books?id=JZhIAAAAMAAJ&pg=PA257
http://books.google.com/books?id=JZhIAAAAMAAJ&pg=PA289

G. W. Hill,
Application of Tchébychef's principle in the projection of maps,
Ann. Math. 10 (2nd Ser.), 23-36 (Cambridge, MA, 1908).
http://books.google.com/books?id=3O8EAAAAYAAJ&pg=RA1-PA23

J. K. Whittemore, 
Two principles of map making,
Ann. Math. 10 (2nd Ser.), 9-22 (Cambridge, MA, 1908).
http://books.google.com/books?id=3O8EAAAAYAAJ&pg=RA1-PA9

L. Krüger,
Konforme Abbildung des Erdellipsoids in der Ebene
[Conformal mapping of the earth ellipsoid to the plane]
New Series 52, 172 pp. (Kön. Preuss. Geod. Inst., 1912).
http://dx.doi.org/10.2312/GFZ.b103-krueger28

L. Krüger,
Formeln zur konformen Abbildung des Erdellipsoids in der Ebene
[Formulas for the conformal projection of the earth ellipsoid to the
plane]
(Berlin, 1919).
http://dx.doi.org/10.2312/GFZ.b103-krueger15

E. L. Jones,
Elements of chart making,
Publ. No. 38 (US Coast and Geodetic Survey, 1916).
http://docs.lib.noaa.gov/rescue/cgs_specpubs/QB275U35no38.pdf

C. H. Deetz,
The Lambert conformal conic projection with two standard parallels
including a comparison of the Lambert projection with the Bonne and
polyconic projections,
Publ. No. 47 (US Coast and Geodetic Survey, 1918).
http://docs.lib.noaa.gov/rescue/cgs_specpubs/QB275U35no47.pdf

C. H. Deetz and O. S. Adams,
Elements of map projection with applications to map and chart
construction,
Publ. No. 68 (US Coast and Geodetic Survey, 1928).
http://docs.lib.noaa.gov/rescue/cgs_specpubs/QB275U35no681928.pdf

C. H. Deetz,
Cartography,
Publ. No. 205 (US Coast and Geodetic Survey, 1936).
http://docs.lib.noaa.gov/rescue/cgs_specpubs/QB275U35no2051936.pdf

O. S. Adams,
General theory of the Lambert conformal conic projection,
Publ. No. 53 (US Coast and Geodetic Survey, 1918).
http://books.google.com/books?id=DNgNAAAAYAAJ
http://docs.lib.noaa.gov/rescue/cgs_specpubs/QB275U35no531918.pdf

O. S. Adams,
General theory of polyconic projections,
Publ. No. 57 (US Coast and Geodetic Survey, 1919).
http://docs.lib.noaa.gov/rescue/cgs_specpubs/QB275U35no571919.pdf

O. S. Adams,
A study of map projections in general,
Publ. No. 60 (US Coast and Geodetic Survey, 1919).
http://docs.lib.noaa.gov/rescue/cgs_specpubs/QB275U35no601919.pdf

O. S. Adams,
Elliptic functions applied to conformal world maps,
Publ. No. 112 (US Coast and Geodetic Survey, 1925).
http://docs.lib.noaa.gov/rescue/cgs_specpubs/QB275U35no1121925.pdf

O. S. Adams,
Conformal projection of the sphere within a square,
Publ. No. 153 (US Coast and Geodetic Survey, 1929).
http://docs.lib.noaa.gov/rescue/cgs_specpubs/QB275U35no1531929.pdf

O. S. Adams,
General theory of equivalent projections,
Publ. No. 236 (US Coast and Geodetic Survey, 1945).
http://docs.lib.noaa.gov/rescue/cgs_specpubs/QB275U35no2361945.pdf

P. D. Thomas,
Conformal projections in geodesy and cartography,
Publ. No. 251 (US Coast and Geodetic Survey, 1952).
http://docs.lib.noaa.gov/rescue/cgs_specpubs/QB275U35no2511952.pdf


From gheysen.t at gmail.com  Wed Jan 20 01:18:17 2010
From: gheysen.t at gmail.com (Thibaut Gheysen)
Date: Wed, 20 Jan 2010 10:18:17 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370) - towgs84 parameters
Message-ID: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>

Hi,

I have a problem in QGIS 1.4.0 when I reproject a gpx file into Belgian
lambert 72 coordinate system : the waypoints are not correctly placed on the
map (see this image :
http://www.fsagx.ac.be/gf/outilslogiciels/Garbel/proj4.jpg). I already have
a similar problem when writing a GPS software (
http://lists.maptools.org/pipermail/proj/2006-August/002447.html). To solve
this I have used this towgs84 parameters :
+towgs84=-99.059,53.322,-112.486,0.419,-0.83,1.885,-0.999999. In QGIS, the
towgs84 parameters are different
(+towgs84=106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1). When I use
my GPS software to reproject into Belgian Lambert 72 the waypoints are
correctly placed (red points in the image) but not when I use QGIS (yellow
points). I think thus there is a problem in the epsg 31370 definition.

Best regards,
Thibaut.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100120/47964437/attachment.html>

From j.l.h.hartmann at uva.nl  Wed Jan 20 02:28:50 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed, 20 Jan 2010 11:28:50 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370) - towgs84
	parameters
In-Reply-To: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>
Message-ID: <4B56DAE2.2030309@uva.nl>

Hi Thibaut,

the most recent version of the EPSG database, 7.4, (www.epsg.org) has 
two definitions for the datum shift from Belge Lambert to WGS84 (they 
call it a coordinate transformation). I'l give the parameters as a PROJ 
string, with rotations converted from radians to degrees and sign-converted

nr 162 and 164 (accurate to a meter) :  +proj=lcc 
+lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90 
+lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl 
+towgs84=-99.059,53.322,-112.486,0.419,-0.830,1.885,-1 +units=m +no_defs

nr 163 and 166: (accurate to 20 cm): +proj=lcc +lat_1=51.16666723333333 
+lat_2=49.8333339 +lat_0=90 +lon_0=4.367486666666666 +x_0=150000.013 
+y_0=5400088.438 +ellps=intl  
+towgs84=-106.8686,52.2978,-103.7329,-0.3366,0.457,-1.8422,-1.2747 
+units=m +no_defs

The second one if the official one from the Belgian National Geographic 
Institute (http://www.ngi.be/FR/FR4-4.shtm). Both should give 
approximately the same results. I have used epsg:31370, which uses the 
second definition without errors. The errors in your picture, about 100 
meters, look as if no datum transformation has been applied at all.

You could test this by transforming your data points manually with cs2cs 
for both towgs84 strings, and compare the results with the position of 
the WGS84 coordinates in QGIS

Jan

On 20-1-2010 10:18, Thibaut Gheysen wrote:
> Hi,
>
> I have a problem in QGIS 1.4.0 when I reproject a gpx file into 
> Belgian lambert 72 coordinate system : the waypoints are not correctly 
> placed on the map (see this image : 
> http://www.fsagx.ac.be/gf/outilslogiciels/Garbel/proj4.jpg). I already 
> have a similar problem when writing a GPS software 
> (http://lists.maptools.org/pipermail/proj/2006-August/002447.html). To 
> solve this I have used this towgs84 parameters : 
> +towgs84=-99.059,53.322,-112.486,0.419,-0.83,1.885,-0.999999. In QGIS, 
> the towgs84 parameters are different 
> (+towgs84=106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1). When 
> I use my GPS software to reproject into Belgian Lambert 72 the 
> waypoints are correctly placed (red points in the image) but not when 
> I use QGIS (yellow points). I think thus there is a problem in the 
> epsg 31370 definition.
>
> Best regards,
> Thibaut.
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100120/65884f3a/attachment.html>

From Mikael.Rittri at carmenta.com  Wed Jan 20 05:04:32 2010
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Wed, 20 Jan 2010 14:04:32 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370) -
	towgs84parameters
In-Reply-To: <4B56DAE2.2030309@uva.nl>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>
	<4B56DAE2.2030309@uva.nl>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se>

Hello Thibaut and Jan,
The towgs84 parameters you say that QGIS is using, seems to come from
the file 
 
 
http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/gcs.override.c
sv
 
that is used by libgeotiff and GDAL.  The datum shifts in this file have
been 
constructed manually.  For Belge 72 they seem to be wrong, as you noted:
 
      The signs of DX, DY and DZ are wrong,
      The signs of RX, RY and RZ are correct, provided that the
COORD_OP_METHOD_CODE is changed to 9607,
      The DS is 1.0000012747, but should be -1.2747 (expressed in unity
instead of parts per million, and wrong sign). 
 
(This is assuming that the datum shift EPSG:15928 is correct.)
 
I think the parameters in gcs.override.csv came from an information
source
that gave the datum shift in the direction from WGS84 to Belge 72.  
 
Best regards,

--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com 

________________________________

From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Jan Hartmann
Sent: Wednesday, January 20, 2010 11:29 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Belge 1972 / Belgian Lambert 72 (31370) -
towgs84parameters


Hi Thibaut,

the most recent version of the EPSG database, 7.4, (www.epsg.org) has
two definitions for the datum shift from Belge Lambert to WGS84 (they
call it a coordinate transformation). I'l give the parameters as a PROJ
string, with rotations converted from radians to degrees and
sign-converted

nr 162 and 164 (accurate to a meter) :  +proj=lcc
+lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90
+lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl
+towgs84=-99.059,53.322,-112.486,0.419,-0.830,1.885,-1 +units=m +no_defs

nr 163 and 166: (accurate to 20 cm): +proj=lcc +lat_1=51.16666723333333
+lat_2=49.8333339 +lat_0=90 +lon_0=4.367486666666666 +x_0=150000.013
+y_0=5400088.438 +ellps=intl
+towgs84=-106.8686,52.2978,-103.7329,-0.3366,0.457,-1.8422,-1.2747
+units=m +no_defs 

The second one if the official one from the Belgian National Geographic
Institute (http://www.ngi.be/FR/FR4-4.shtm). Both should give
approximately the same results. I have used epsg:31370, which uses the
second definition without errors. The errors in your picture, about 100
meters, look as if no datum transformation has been applied at all.

You could test this by transforming your data points manually with cs2cs
for both towgs84 strings, and compare the results with the position of
the WGS84 coordinates in QGIS  

Jan

On 20-1-2010 10:18, Thibaut Gheysen wrote: 

	Hi,
	
	I have a problem in QGIS 1.4.0 when I reproject a gpx file into
Belgian lambert 72 coordinate system : the waypoints are not correctly
placed on the map (see this image :
http://www.fsagx.ac.be/gf/outilslogiciels/Garbel/proj4.jpg). I already
have a similar problem when writing a GPS software
(http://lists.maptools.org/pipermail/proj/2006-August/002447.html). To
solve this I have used this towgs84 parameters :
+towgs84=-99.059,53.322,-112.486,0.419,-0.83,1.885,-0.999999. In QGIS,
the towgs84 parameters are different
(+towgs84=106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1). When I
use my GPS software to reproject into Belgian Lambert 72 the waypoints
are correctly placed (red points in the image) but not when I use QGIS
(yellow points). I think thus there is a problem in the epsg 31370
definition.
	
	Best regards,
	Thibaut.
	
	
	_______________________________________________
	Proj mailing list
	Proj at lists.maptools.org
	http://lists.maptools.org/mailman/listinfo/proj

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100120/ade21cfd/attachment.html>

From j.l.h.hartmann at uva.nl  Wed Jan 20 06:22:47 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed, 20 Jan 2010 15:22:47 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370)
	-	towgs84parameters
In-Reply-To: <FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>	<4B56DAE2.2030309@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se>
Message-ID: <4B5711B7.8090805@uva.nl>

No, if QGIS uses PROJ, this is just an error. PROJ and EPSG  use 
opposite rotational formulas, and PROJ uses degrees,  EPSG radians. 
Could you report this bug to the the QGIS team?

Jan

On 20-1-2010 14:04, Mikael Rittri wrote:
> Hello Thibaut and Jan,
> The towgs84 parameters you say that QGIS is using, seems to come from 
> the file
> http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/gcs.override.csv
> that is used by libgeotiff and GDAL.  The datum shifts in this file 
> have been
> constructed manually.  For Belge 72 they seem to be wrong, as you noted:
>       The signs of DX, DY and DZ are wrong,
>       The signs of RX, RY and RZ are correct, provided that the 
> COORD_OP_METHOD_CODE is changed to 9607,
>       The DS is 1.0000012747, but should be -1.2747 (expressed in 
> unity instead of parts per million, and wrong sign).
> (This is assuming that the datum shift EPSG:15928 is correct.)
> I think the parameters in gcs.override.csv came from an information source
> that gave the datum shift in the direction /from/ WGS84 /to/ Belge 72.
> Best regards,
>
> --
> Mikael Rittri
> Carmenta AB
> SWEDEN
> www.carmenta.com
>
> ------------------------------------------------------------------------
> *From:* proj-bounces at lists.maptools.org 
> [mailto:proj-bounces at lists.maptools.org] *On Behalf Of *Jan Hartmann
> *Sent:* Wednesday, January 20, 2010 11:29 AM
> *To:* PROJ.4 and general Projections Discussions
> *Subject:* Re: [Proj] Belge 1972 / Belgian Lambert 72 (31370) - 
> towgs84parameters
>
> Hi Thibaut,
>
> the most recent version of the EPSG database, 7.4, (www.epsg.org) has 
> two definitions for the datum shift from Belge Lambert to WGS84 (they 
> call it a coordinate transformation). I'l give the parameters as a 
> PROJ string, with rotations converted from radians to degrees and 
> sign-converted
>
> nr 162 and 164 (accurate to a meter) :  +proj=lcc 
> +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90 
> +lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl 
> +towgs84=-99.059,53.322,-112.486,0.419,-0.830,1.885,-1 +units=m +no_defs
>
> nr 163 and 166: (accurate to 20 cm): +proj=lcc 
> +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90 
> +lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl  
> +towgs84=-106.8686,52.2978,-103.7329,-0.3366,0.457,-1.8422,-1.2747 
> +units=m +no_defs
>
> The second one if the official one from the Belgian National 
> Geographic Institute (http://www.ngi.be/FR/FR4-4.shtm). Both should 
> give approximately the same results. I have used epsg:31370, which 
> uses the second definition without errors. The errors in your picture, 
> about 100 meters, look as if no datum transformation has been applied 
> at all.
>
> You could test this by transforming your data points manually with 
> cs2cs for both towgs84 strings, and compare the results with the 
> position of the WGS84 coordinates in QGIS
>
> Jan
>
> On 20-1-2010 10:18, Thibaut Gheysen wrote:
>> Hi,
>>
>> I have a problem in QGIS 1.4.0 when I reproject a gpx file into 
>> Belgian lambert 72 coordinate system : the waypoints are not 
>> correctly placed on the map (see this image : 
>> http://www.fsagx.ac.be/gf/outilslogiciels/Garbel/proj4.jpg). I 
>> already have a similar problem when writing a GPS software 
>> (http://lists.maptools.org/pipermail/proj/2006-August/002447.html). 
>> To solve this I have used this towgs84 parameters : 
>> +towgs84=-99.059,53.322,-112.486,0.419,-0.83,1.885,-0.999999. In 
>> QGIS, the towgs84 parameters are different 
>> (+towgs84=106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1). 
>> When I use my GPS software to reproject into Belgian Lambert 72 the 
>> waypoints are correctly placed (red points in the image) but not when 
>> I use QGIS (yellow points). I think thus there is a problem in the 
>> epsg 31370 definition.
>>
>> Best regards,
>> Thibaut.
>>
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100120/87663aa6/attachment.html>

From Mikael.Rittri at carmenta.com  Thu Jan 21 03:52:03 2010
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Thu, 21 Jan 2010 12:52:03 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370) -
	towgs84parameters
In-Reply-To: <4B5711B7.8090805@uva.nl>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>	<4B56DAE2.2030309@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se>
	<4B5711B7.8090805@uva.nl>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101BDE688@posty.carmenta.se>

Jan Hartmann wrote: 
 
> No, if QGIS uses PROJ, this is just an error. 
 
Okay, you may be right that QGIS does not use the file gcs.override.csv.

But I see that the nad/epsg file of PROJ.4 contains the same erroneous 
+towgs84 parameters for Belge 1972 as the gcs.override.csv.  
(At least PROJ version 4.6.1). 
 
> PROJ and EPSG use opposite rotational formulas, and PROJ uses degrees,
EPSG radians. 
 
I don't agree in the general case.  PROJ uses the Position Vector 
Transform, while EPSG is neutral on the rotation sign convention: 
they use the same sign convention as the original source. 
And PROJ uses arc seconds for rotations, while EPSG is neutral 
on the angle unit: they use the same angle unit as the original source
(usually arc seconds, but sometimes microradians or radians). 
     For the EPSG transforms you quote, EPSG use arc-seconds
for the rotations, but either the Position Vector Transform or the
Coordinate Frame Rotation depending on whether they got the 
transform from Eurogeographics or directly from Belgium. 
 
Regards,

--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com 

________________________________

From: Jan Hartmann [mailto:j.l.h.hartmann at uva.nl] 
Sent: Wednesday, January 20, 2010 3:23 PM
To: PROJ.4 and general Projections Discussions
Cc: Mikael Rittri
Subject: Re: [Proj] Belge 1972 / Belgian Lambert 72 (31370) -
towgs84parameters


No, if QGIS uses PROJ, this is just an error. PROJ and EPSG  use
opposite rotational formulas, and PROJ uses degrees,  EPSG radians.
Could you report this bug to the the QGIS team?

Jan 

On 20-1-2010 14:04, Mikael Rittri wrote: 

	Hello Thibaut and Jan,
	The towgs84 parameters you say that QGIS is using, seems to come
from the file 
	 
	
http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/gcs.override.c
sv
	 
	that is used by libgeotiff and GDAL.  The datum shifts in this
file have been 
	constructed manually.  For Belge 72 they seem to be wrong, as
you noted:
	 
	      The signs of DX, DY and DZ are wrong,
	      The signs of RX, RY and RZ are correct, provided that the
COORD_OP_METHOD_CODE is changed to 9607,
	      The DS is 1.0000012747, but should be -1.2747 (expressed
in unity instead of parts per million, and wrong sign). 
	 
	(This is assuming that the datum shift EPSG:15928 is correct.)
	 
	I think the parameters in gcs.override.csv came from an
information source
	that gave the datum shift in the direction from WGS84 to Belge
72.  
	 
	Best regards,

	--
	Mikael Rittri
	Carmenta AB
	SWEDEN
	www.carmenta.com 

________________________________

	From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Jan Hartmann
	Sent: Wednesday, January 20, 2010 11:29 AM
	To: PROJ.4 and general Projections Discussions
	Subject: Re: [Proj] Belge 1972 / Belgian Lambert 72 (31370) -
towgs84parameters
	
	
	Hi Thibaut,
	
	the most recent version of the EPSG database, 7.4,
(www.epsg.org) has two definitions for the datum shift from Belge
Lambert to WGS84 (they call it a coordinate transformation). I'l give
the parameters as a PROJ string, with rotations converted from radians
to degrees and sign-converted
	
	nr 162 and 164 (accurate to a meter) :  +proj=lcc
+lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90
+lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl
+towgs84=-99.059,53.322,-112.486,0.419,-0.830,1.885,-1 +units=m +no_defs
	
	nr 163 and 166: (accurate to 20 cm): +proj=lcc
+lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90
+lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl
+towgs84=-106.8686,52.2978,-103.7329,-0.3366,0.457,-1.8422,-1.2747
+units=m +no_defs 
	
	The second one if the official one from the Belgian National
Geographic Institute (http://www.ngi.be/FR/FR4-4.shtm). Both should give
approximately the same results. I have used epsg:31370, which uses the
second definition without errors. The errors in your picture, about 100
meters, look as if no datum transformation has been applied at all.
	
	You could test this by transforming your data points manually
with cs2cs for both towgs84 strings, and compare the results with the
position of the WGS84 coordinates in QGIS  
	
	Jan
	
	On 20-1-2010 10:18, Thibaut Gheysen wrote: 

		Hi,
		
		I have a problem in QGIS 1.4.0 when I reproject a gpx
file into Belgian lambert 72 coordinate system : the waypoints are not
correctly placed on the map (see this image :
http://www.fsagx.ac.be/gf/outilslogiciels/Garbel/proj4.jpg). I already
have a similar problem when writing a GPS software
(http://lists.maptools.org/pipermail/proj/2006-August/002447.html). To
solve this I have used this towgs84 parameters :
+towgs84=-99.059,53.322,-112.486,0.419,-0.83,1.885,-0.999999. In QGIS,
the towgs84 parameters are different
(+towgs84=106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1). When I
use my GPS software to reproject into Belgian Lambert 72 the waypoints
are correctly placed (red points in the image) but not when I use QGIS
(yellow points). I think thus there is a problem in the epsg 31370
definition.
		
		Best regards,
		Thibaut.
		
		
		_______________________________________________
		Proj mailing list
		Proj at lists.maptools.org
		http://lists.maptools.org/mailman/listinfo/proj

	
	_______________________________________________
	Proj mailing list
	Proj at lists.maptools.org
	http://lists.maptools.org/mailman/listinfo/proj

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100121/6ab94ff2/attachment.html>

From j.l.h.hartmann at uva.nl  Thu Jan 21 14:51:28 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu, 21 Jan 2010 23:51:28 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370) -
	towgs84parameters
In-Reply-To: <FAF6E56B26D2044696772EBE89B1535101BDE688@posty.carmenta.se>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>	<4B56DAE2.2030309@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se>
	<4B5711B7.8090805@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE688@posty.carmenta.se>
Message-ID: <4B58DA70.1030108@uva.nl>



On 21-Jan-10 12:52, Mikael Rittri wrote:
> Jan Hartmann wrote:
> > No, if QGIS uses PROJ, this is just an error.
> Okay, you may be right that QGIS does not use the file gcs.override.csv.
> But I see that the nad/epsg file of PROJ.4 contains the same erroneous
> +towgs84 parameters for Belge 1972 as the gcs.override.csv.
> (At least PROJ version 4.6.1).
I have been quoting from PROJ 4.7. The older towgs parameter is not 
exactly erroneous, it's just a bit les exact
> > PROJ and EPSG use opposite rotational formulas, and PROJ uses 
> degrees,  EPSG radians.
> I don't agree in the general case.  PROJ uses the Position Vector
> Transform, while EPSG is neutral on the rotation sign convention:
> they use the same sign convention as the original source.
> And PROJ uses arc seconds for rotations, while EPSG is neutral
> on the angle unit: they use the same angle unit as the original source
> (usually arc seconds, but sometimes microradians or radians).
>      For the EPSG transforms you quote, EPSG use arc-seconds
> for the rotations, but either the Position Vector Transform or the
> Coordinate Frame Rotation depending on whether they got the
> transform from Eurogeographics or directly from Belgium.
>
My information was for the Dutch and Belgian cases, as from the official 
documents. I don't know on what principles EPSG operates, I guess they 
just take it as they get it. It is not an easy-to-use database.

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100121/dea49a93/attachment.html>

From gheysen.t at gmail.com  Fri Jan 22 00:37:05 2010
From: gheysen.t at gmail.com (Thibaut Gheysen)
Date: Fri, 22 Jan 2010 09:37:05 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370) -
	towgs84parameters
In-Reply-To: <4B58DA70.1030108@uva.nl>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>
	<4B56DAE2.2030309@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se>
	<4B5711B7.8090805@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE688@posty.carmenta.se>
	<4B58DA70.1030108@uva.nl>
Message-ID: <94e91cde1001220037j7dfb2433n73a92c5534c42628@mail.gmail.com>

Thanks Jan and Mikael for your responses.
As suggested, I have forwarded this bug to the QGIS developer mailing list.

Thibaut.


2010/1/21 Jan Hartmann <j.l.h.hartmann at uva.nl>

>
>
> On 21-Jan-10 12:52, Mikael Rittri wrote:
>
> Jan Hartmann wrote:
>
> > No, if QGIS uses PROJ, this is just an error.
>
> Okay, you may be right that QGIS does not use the file gcs.override.csv.
> But I see that the nad/epsg file of PROJ.4 contains the same erroneous
> +towgs84 parameters for Belge 1972 as the gcs.override.csv.
> (At least PROJ version 4.6.1).
>
> I have been quoting from PROJ 4.7. The older towgs parameter is not exactly
> erroneous, it's just a bit les exact
>
>
> > PROJ and EPSG use opposite rotational formulas, and PROJ uses degrees,
> EPSG radians.
>
> I don't agree in the general case.  PROJ uses the Position Vector
> Transform, while EPSG is neutral on the rotation sign convention:
> they use the same sign convention as the original source.
> And PROJ uses arc seconds for rotations, while EPSG is neutral
> on the angle unit: they use the same angle unit as the original source
> (usually arc seconds, but sometimes microradians or radians).
>      For the EPSG transforms you quote, EPSG use arc-seconds
> for the rotations, but either the Position Vector Transform or the
> Coordinate Frame Rotation depending on whether they got the
> transform from Eurogeographics or directly from Belgium.
>
>  My information was for the Dutch and Belgian cases, as from the official
> documents. I don't know on what principles EPSG operates, I guess they just
> take it as they get it. It is not an easy-to-use database.
>
> Jan
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100122/737b79e7/attachment.html>

From j.l.h.hartmann at uva.nl  Fri Jan 22 03:42:59 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri, 22 Jan 2010 12:42:59 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370)
	-	towgs84parameters
In-Reply-To: <94e91cde1001220037j7dfb2433n73a92c5534c42628@mail.gmail.com>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>	<4B56DAE2.2030309@uva.nl>	<FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se>	<4B5711B7.8090805@uva.nl>	<FAF6E56B26D2044696772EBE89B1535101BDE688@posty.carmenta.se>	<4B58DA70.1030108@uva.nl>
	<94e91cde1001220037j7dfb2433n73a92c5534c42628@mail.gmail.com>
Message-ID: <4B598F43.6040506@uva.nl>

Hi Thibaut, your problem doesn't have anything to do with the two 
different Belgian parameters; the error in your picture is too big. It 
looks as if the WGS84 datum shift has not been applied at all. You could 
test this by projecting the points from the Belgian Lambert projection 
to Google without any towgs parameter.

Jan

On 22-1-2010 9:37, Thibaut Gheysen wrote:
> Thanks Jan and Mikael for your responses.
> As suggested, I have forwarded this bug to the QGIS developer mailing 
> list.
>
> Thibaut.
>
>
> 2010/1/21 Jan Hartmann <j.l.h.hartmann at uva.nl 
> <mailto:j.l.h.hartmann at uva.nl>>
>
>
>
>     On 21-Jan-10 12:52, Mikael Rittri wrote:
>>     Jan Hartmann wrote:
>>     > No, if QGIS uses PROJ, this is just an error.
>>     Okay, you may be right that QGIS does not use the file
>>     gcs.override.csv.
>>     But I see that the nad/epsg file of PROJ.4 contains the same
>>     erroneous
>>     +towgs84 parameters for Belge 1972 as the gcs.override.csv.
>>     (At least PROJ version 4.6.1).
>     I have been quoting from PROJ 4.7. The older towgs parameter is
>     not exactly erroneous, it's just a bit les exact
>
>>     > PROJ and EPSG use opposite rotational formulas, and PROJ uses
>>     degrees,  EPSG radians.
>>     I don't agree in the general case.  PROJ uses the Position Vector
>>     Transform, while EPSG is neutral on the rotation sign convention:
>>     they use the same sign convention as the original source.
>>     And PROJ uses arc seconds for rotations, while EPSG is neutral
>>     on the angle unit: they use the same angle unit as the original
>>     source
>>     (usually arc seconds, but sometimes microradians or radians).
>>          For the EPSG transforms you quote, EPSG use arc-seconds
>>     for the rotations, but either the Position Vector Transform or the
>>     Coordinate Frame Rotation depending on whether they got the
>>     transform from Eurogeographics or directly from Belgium.
>>
>     My information was for the Dutch and Belgian cases, as from the
>     official documents. I don't know on what principles EPSG operates,
>     I guess they just take it as they get it. It is not an easy-to-use
>     database.
>
>     Jan
>
>     _______________________________________________
>     Proj mailing list
>     Proj at lists.maptools.org <mailto:Proj at lists.maptools.org>
>     http://lists.maptools.org/mailman/listinfo/proj
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100122/1b04d18e/attachment.html>

From Mikael.Rittri at carmenta.com  Fri Jan 22 04:31:58 2010
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Fri, 22 Jan 2010 13:31:58 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370) -
	towgs84parameters
In-Reply-To: <4B58DA70.1030108@uva.nl>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>	<4B56DAE2.2030309@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se>
	<4B5711B7.8090805@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE688@posty.carmenta.se>
	<4B58DA70.1030108@uva.nl>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101BDE7B6@posty.carmenta.se>

Jan Hartmann wrote:
 
> I have been quoting from PROJ 4.7. The older towgs parameter is not exactly erroneous, it's just a bit less exact.
 
But Thibaut's image showed an displacement of about 190 meters.  I call that erroneous.
 
Well, if by "older", you mean the EPSG datum shifts 
 
        1652 "BD72 to ETRS89 (1)" and 1609 "BD72 to WGS 84 (1)"
 
you are right that they are just a bit less exact than EPSG datum shifts 
 
        15928 "BD72 to ETRS89 (1)" and 15929 "BD72 to WGS 84 (3)"
 
But the towgs84 found in the current gcs.override.csv, as well as in PROJ's nad/epsg file 
(at least in 4.6.1), are just wrong.  I think the wrong sign for DX, DY and DZ causes most 
of the 190 meter error. 
 
By the way, in your first letter, you gave the older transforms as 
 
>   +towgs84=-99.059,53.322,-112.486,0.419,-0.830,1.885,-1
 
which I think is correct, but you gave the newer transforms as 
 
> +towgs84=-106.8686,52.2978,-103.7329,-0.3366,0.457,-1.8422,-1.2747 
 
which I think has the wrong sign for the rotation angles: it should be 
 
> +towgs84=-106.8686,52.2978,-103.7329,0.3366,-0.457,1.8422,-1.2747 
 
instead.  (I base this correction on the fact that EPSG claims that their datum shifts 15928 and 15929
use the Coordinate Frame Rotation, so the rotation signs have to be reversed for PROJ.4.  If the 
claim of EPSG contradicts the official documents - it happens now and then -  please notify EPSG.)  
 
Regards,

--
Mikael Rittri
Carmenta AB
Box 11354
SE-404 28 Göteborg
Visitors: Sankt Eriksgatan 5
SWEDEN
Tel: +46-31-775 57 37
Mob: +46-703-60 34 07
mikael.rittri at carmenta.com
www.carmenta.com 

 

________________________________

From: Jan Hartmann [mailto:j.l.h.hartmann at uva.nl] 
Sent: Thursday, January 21, 2010 11:51 PM
To: Mikael Rittri
Cc: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Belge 1972 / Belgian Lambert 72 (31370) - towgs84parameters




On 21-Jan-10 12:52, Mikael Rittri wrote: 

	Jan Hartmann wrote: 
	 
	> No, if QGIS uses PROJ, this is just an error. 
	 
	Okay, you may be right that QGIS does not use the file gcs.override.csv.  
	But I see that the nad/epsg file of PROJ.4 contains the same erroneous 
	+towgs84 parameters for Belge 1972 as the gcs.override.csv.  
	(At least PROJ version 4.6.1). 
	

I have been quoting from PROJ 4.7. The older towgs parameter is not exactly erroneous, it's just a bit les exact


	 
	> PROJ and EPSG use opposite rotational formulas, and PROJ uses degrees,  EPSG radians. 
	 
	I don't agree in the general case.  PROJ uses the Position Vector 
	Transform, while EPSG is neutral on the rotation sign convention: 
	they use the same sign convention as the original source. 
	And PROJ uses arc seconds for rotations, while EPSG is neutral 
	on the angle unit: they use the same angle unit as the original source
	(usually arc seconds, but sometimes microradians or radians). 
	     For the EPSG transforms you quote, EPSG use arc-seconds
	for the rotations, but either the Position Vector Transform or the
	Coordinate Frame Rotation depending on whether they got the 
	transform from Eurogeographics or directly from Belgium. 
	
	

My information was for the Dutch and Belgian cases, as from the official documents. I don't know on what principles EPSG operates, I guess they just take it as they get it. It is not an easy-to-use database.

Jan

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100122/446e2d0c/attachment.html>

From j.l.h.hartmann at uva.nl  Fri Jan 22 06:26:40 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri, 22 Jan 2010 15:26:40 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370) -
	towgs84parameters
In-Reply-To: <FAF6E56B26D2044696772EBE89B1535101BDE7B6@posty.carmenta.se>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>	<4B56DAE2.2030309@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se>
	<4B5711B7.8090805@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE688@posty.carmenta.se>
	<4B58DA70.1030108@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE7B6@posty.carmenta.se>
Message-ID: <4B59B5A0.4090703@uva.nl>

Mikael,

All my observations about the towgs parameters have been tested with 
real Belgian coordinates overlaid over Google. As I said before, the 
EPSG database is not very systematical in the way it represents its 
formulas, it just takes them from whatever source is available, untested 
AFAIK. Never use them without testing them with real world coordinates.

Jan

On 22-1-2010 13:31, Mikael Rittri wrote:
> Jan Hartmann wrote:
> > I have been quoting from PROJ 4.7. The older towgs parameter is not 
> exactly erroneous, it's just a bit less exact.
> But Thibaut's image showed an displacement of about 190 meters.  I 
> call that erroneous.
> Well, if by "older", you mean the EPSG datum shifts
>         1652 "BD72 to ETRS89 (1)" and 1609 "BD72 to WGS 84 (1)"
> you are right that they are just a bit less exact than EPSG datum shifts
>         15928 "BD72 to ETRS89 (1)" and 15929 "BD72 to WGS 84 (3)"
> But the towgs84 found in the current gcs.override.csv, as well as in 
> PROJ's nad/epsg file
> (at least in 4.6.1), are just wrong.  I think the wrong sign for DX, 
> DY and DZ causes most
> of the 190 meter error.
> By the way, in your first letter, you gave the older transforms as
> >   +towgs84=-99.059,53.322,-112.486,0.419,-0.830,1.885,-1
> which I think is correct, but you gave the newer transforms as
> > +towgs84=-106.8686,52.2978,-103.7329,-0.3366,0.457,-1.8422,-1.2747
> which I think has the wrong sign for the rotation angles: it should be
> > +towgs84=-106.8686,52.2978,-103.7329,0.3366,-0.457,1.8422,-1.2747
> instead.  (I base this correction on the fact that EPSG claims that 
> their datum shifts 15928 and 15929
> use the Coordinate Frame Rotation, so the rotation signs have to be 
> reversed for PROJ.4.  If the
> claim of EPSG contradicts the official documents - it happens now and 
> then -  please notify EPSG.)
> Regards,
>
> --
> Mikael Rittri
> Carmenta AB
> Box 11354
> SE-404 28 Göteborg
> Visitors: Sankt Eriksgatan 5
> SWEDEN
> Tel: +46-31-775 57 37
> Mob: +46-703-60 34 07
> mikael.rittri at carmenta.com
> www.carmenta.com
>
>
> ------------------------------------------------------------------------
> *From:* Jan Hartmann [mailto:j.l.h.hartmann at uva.nl]
> *Sent:* Thursday, January 21, 2010 11:51 PM
> *To:* Mikael Rittri
> *Cc:* PROJ.4 and general Projections Discussions
> *Subject:* Re: [Proj] Belge 1972 / Belgian Lambert 72 (31370) - 
> towgs84parameters
>
>
>
> On 21-Jan-10 12:52, Mikael Rittri wrote:
>> Jan Hartmann wrote:
>> > No, if QGIS uses PROJ, this is just an error.
>> Okay, you may be right that QGIS does not use the file gcs.override.csv.
>> But I see that the nad/epsg file of PROJ.4 contains the same erroneous
>> +towgs84 parameters for Belge 1972 as the gcs.override.csv.
>> (At least PROJ version 4.6.1).
> I have been quoting from PROJ 4.7. The older towgs parameter is not 
> exactly erroneous, it's just a bit les exact
>> > PROJ and EPSG use opposite rotational formulas, and PROJ uses 
>> degrees,  EPSG radians.
>> I don't agree in the general case.  PROJ uses the Position Vector
>> Transform, while EPSG is neutral on the rotation sign convention:
>> they use the same sign convention as the original source.
>> And PROJ uses arc seconds for rotations, while EPSG is neutral
>> on the angle unit: they use the same angle unit as the original source
>> (usually arc seconds, but sometimes microradians or radians).
>>      For the EPSG transforms you quote, EPSG use arc-seconds
>> for the rotations, but either the Position Vector Transform or the
>> Coordinate Frame Rotation depending on whether they got the
>> transform from Eurogeographics or directly from Belgium.
>>
> My information was for the Dutch and Belgian cases, as from the 
> official documents. I don't know on what principles EPSG operates, I 
> guess they just take it as they get it. It is not an easy-to-use database.
>
> Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100122/c1a38a3b/attachment.html>

From j.l.h.hartmann at uva.nl  Fri Jan 22 06:27:15 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri, 22 Jan 2010 15:27:15 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370) -
	towgs84parameters
In-Reply-To: <94e91cde1001220434je5a6991m4c25195e536f2aa5@mail.gmail.com>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>	
	<4B56DAE2.2030309@uva.nl>	
	<FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se>	
	<4B5711B7.8090805@uva.nl>	
	<FAF6E56B26D2044696772EBE89B1535101BDE688@posty.carmenta.se>	
	<4B58DA70.1030108@uva.nl>	
	<94e91cde1001220037j7dfb2433n73a92c5534c42628@mail.gmail.com>	
	<4B598F43.6040506@uva.nl>
	<94e91cde1001220434je5a6991m4c25195e536f2aa5@mail.gmail.com>
Message-ID: <4B59B5C3.6070501@uva.nl>

It really looks like a QGIS problem. Perhaps you should send a 
bug-report to QGIS, that the correct +towgs84 parameter is the one which 
displays your points correctly. If possible, add both images to it.

Jan

On 22-1-2010 13:34, Thibaut Gheysen wrote:
> Hi Jan,
>
> When I replace towgs84 parameters in QGIS by 
> '+towgs84=-99.059,53.322,-112.486,0.419,-0.83,1.885,-0.999999' the 
> points are correctly placed (red points in the image). When I remove 
> towgs84 parameters, I have a error similar to this with original QGIS 
> parameters but the points are not placed at same place 
> (http://www.fsagx.ac.be/gf/outilslogiciels/Garbel/proj4-2.jpg). I have 
> thus supposed that error come from towgs84 parameters but I'm not a 
> proj.4 specialist at all.
>
> Thibaut.
>
>
>
> 2010/1/22 Jan Hartmann <j.l.h.hartmann at uva.nl 
> <mailto:j.l.h.hartmann at uva.nl>>
>
>     Hi Thibaut, your problem doesn't have anything to do with the two
>     different Belgian parameters; the error in your picture is too
>     big. It looks as if the WGS84 datum shift has not been applied at
>     all. You could test this by projecting the points from the Belgian
>     Lambert projection to Google without any towgs parameter.
>
>     Jan
>
>
>     On 22-1-2010 9:37, Thibaut Gheysen wrote:
>>     Thanks Jan and Mikael for your responses.
>>     As suggested, I have forwarded this bug to the QGIS developer
>>     mailing list.
>>
>>     Thibaut.
>>
>>
>>     2010/1/21 Jan Hartmann <j.l.h.hartmann at uva.nl
>>     <mailto:j.l.h.hartmann at uva.nl>>
>>
>>
>>
>>         On 21-Jan-10 12:52, Mikael Rittri wrote:
>>>         Jan Hartmann wrote:
>>>         > No, if QGIS uses PROJ, this is just an error.
>>>         Okay, you may be right that QGIS does not use the file
>>>         gcs.override.csv.
>>>         But I see that the nad/epsg file of PROJ.4 contains the same
>>>         erroneous
>>>         +towgs84 parameters for Belge 1972 as the gcs.override.csv.
>>>         (At least PROJ version 4.6.1).
>>         I have been quoting from PROJ 4.7. The older towgs parameter
>>         is not exactly erroneous, it's just a bit les exact
>>
>>>         > PROJ and EPSG use opposite rotational formulas, and PROJ
>>>         uses degrees,  EPSG radians.
>>>         I don't agree in the general case.  PROJ uses the Position
>>>         Vector
>>>         Transform, while EPSG is neutral on the rotation sign
>>>         convention:
>>>         they use the same sign convention as the original source.
>>>         And PROJ uses arc seconds for rotations, while EPSG is neutral
>>>         on the angle unit: they use the same angle unit as the
>>>         original source
>>>         (usually arc seconds, but sometimes microradians or radians).
>>>              For the EPSG transforms you quote, EPSG use arc-seconds
>>>         for the rotations, but either the Position Vector Transform
>>>         or the
>>>         Coordinate Frame Rotation depending on whether they got the
>>>         transform from Eurogeographics or directly from Belgium.
>>>
>>         My information was for the Dutch and Belgian cases, as from
>>         the official documents. I don't know on what principles EPSG
>>         operates, I guess they just take it as they get it. It is not
>>         an easy-to-use database.
>>
>>         Jan
>>
>>         _______________________________________________
>>         Proj mailing list
>>         Proj at lists.maptools.org <mailto:Proj at lists.maptools.org>
>>         http://lists.maptools.org/mailman/listinfo/proj
>>
>>
>>
>>     _______________________________________________
>>     Proj mailing list
>>     Proj at lists.maptools.org  <mailto:Proj at lists.maptools.org>
>>     http://lists.maptools.org/mailman/listinfo/proj
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100122/af9c4fe7/attachment.html>

From Mikael.Rittri at carmenta.com  Fri Jan 22 06:40:33 2010
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Fri, 22 Jan 2010 15:40:33 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370) -
	towgs84parameters
In-Reply-To: <4B59B5A0.4090703@uva.nl>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>	<4B56DAE2.2030309@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se>
	<4B5711B7.8090805@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE688@posty.carmenta.se>
	<4B58DA70.1030108@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE7B6@posty.carmenta.se>
	<4B59B5A0.4090703@uva.nl>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101BDE7F4@posty.carmenta.se>

Jan, you wrote 
 
> All my observations about the towgs parameters have been tested with real Belgian coordinates overlaid over Google.
 
Fine.  But if you did make an error when transcribing the newer transforms into Proj.4 syntax, and 
the error was just in the rotation angles, then the effect may be too small to notice.  
 
I mean, the angles describe a rotation, so there is presumably a fixed point in Belgium where 
the rotation has no effect.  If your test points happened to be near the fixed point, the 
effect of the reversed angle signs could be very small.  
 
> As I said before, the EPSG database is not very systematical in the way it represents its formulas, 
> it just takes them from whatever source is available, untested AFAIK. Never use them without testing them with real world coordinates.
 
I agree completely.  But I am not yet convinced that you are right and EPSG wrong for the newer transforms,
although that is certainly possible.  Do you have some link to the offician Belgian documents? 


Best regards,

--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com 


________________________________

From: Jan Hartmann [mailto:j.l.h.hartmann at uva.nl] 
Sent: Friday, January 22, 2010 3:27 PM
To: Mikael Rittri
Cc: PROJ.4 and general Projections Discussions; Thibaut Gheysen
Subject: Re: [Proj] Belge 1972 / Belgian Lambert 72 (31370) - towgs84parameters


Mikael,

All my observations about the towgs parameters have been tested with real Belgian coordinates overlaid over Google. As I said before, the EPSG database is not very systematical in the way it represents its formulas, it just takes them from whatever source is available, untested AFAIK. Never use them without testing them with real world coordinates.

Jan

On 22-1-2010 13:31, Mikael Rittri wrote: 

	Jan Hartmann wrote:
	 
	> I have been quoting from PROJ 4.7. The older towgs parameter is not exactly erroneous, it's just a bit less exact.
	 
	But Thibaut's image showed an displacement of about 190 meters.  I call that erroneous.
	 
	Well, if by "older", you mean the EPSG datum shifts 
	 
	        1652 "BD72 to ETRS89 (1)" and 1609 "BD72 to WGS 84 (1)"
	 
	you are right that they are just a bit less exact than EPSG datum shifts 
	 
	        15928 "BD72 to ETRS89 (1)" and 15929 "BD72 to WGS 84 (3)"
	 
	But the towgs84 found in the current gcs.override.csv, as well as in PROJ's nad/epsg file 
	(at least in 4.6.1), are just wrong.  I think the wrong sign for DX, DY and DZ causes most 
	of the 190 meter error. 
	 
	By the way, in your first letter, you gave the older transforms as 
	 
	>   +towgs84=-99.059,53.322,-112.486,0.419,-0.830,1.885,-1
	 
	which I think is correct, but you gave the newer transforms as 
	 
	> +towgs84=-106.8686,52.2978,-103.7329,-0.3366,0.457,-1.8422,-1.2747 
	 
	which I think has the wrong sign for the rotation angles: it should be 
	 
	
	> +towgs84=-106.8686,52.2978,-103.7329,0.3366,-0.457,1.8422,-1.2747 
	 
	instead.  (I base this correction on the fact that EPSG claims that their datum shifts 15928 and 15929
	use the Coordinate Frame Rotation, so the rotation signs have to be reversed for PROJ.4.  If the 
	claim of EPSG contradicts the official documents - it happens now and then -  please notify EPSG.)  
	 
	Regards,

	--
	Mikael Rittri
	Carmenta AB
	Box 11354
	SE-404 28 Göteborg
	Visitors: Sankt Eriksgatan 5
	SWEDEN
	Tel: +46-31-775 57 37
	Mob: +46-703-60 34 07
	mikael.rittri at carmenta.com
	www.carmenta.com 

	 

________________________________

	From: Jan Hartmann [mailto:j.l.h.hartmann at uva.nl] 
	Sent: Thursday, January 21, 2010 11:51 PM
	To: Mikael Rittri
	Cc: PROJ.4 and general Projections Discussions
	Subject: Re: [Proj] Belge 1972 / Belgian Lambert 72 (31370) - towgs84parameters
	
	


	On 21-Jan-10 12:52, Mikael Rittri wrote: 

		Jan Hartmann wrote: 
		 
		> No, if QGIS uses PROJ, this is just an error. 
		 
		Okay, you may be right that QGIS does not use the file gcs.override.csv.  
		But I see that the nad/epsg file of PROJ.4 contains the same erroneous 
		+towgs84 parameters for Belge 1972 as the gcs.override.csv.  
		(At least PROJ version 4.6.1). 
		

	I have been quoting from PROJ 4.7. The older towgs parameter is not exactly erroneous, it's just a bit les exact
	

		 
		> PROJ and EPSG use opposite rotational formulas, and PROJ uses degrees,  EPSG radians. 
		 
		I don't agree in the general case.  PROJ uses the Position Vector 
		Transform, while EPSG is neutral on the rotation sign convention: 
		they use the same sign convention as the original source. 
		And PROJ uses arc seconds for rotations, while EPSG is neutral 
		on the angle unit: they use the same angle unit as the original source
		(usually arc seconds, but sometimes microradians or radians). 
		     For the EPSG transforms you quote, EPSG use arc-seconds
		for the rotations, but either the Position Vector Transform or the
		Coordinate Frame Rotation depending on whether they got the 
		transform from Eurogeographics or directly from Belgium. 
		
		

	My information was for the Dutch and Belgian cases, as from the official documents. I don't know on what principles EPSG operates, I guess they just take it as they get it. It is not an easy-to-use database.
	
	Jan
	

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100122/cc7aa9f6/attachment.html>

From j.l.h.hartmann at uva.nl  Fri Jan 22 07:03:34 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri, 22 Jan 2010 16:03:34 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370) -
	towgs84parameters
In-Reply-To: <FAF6E56B26D2044696772EBE89B1535101BDE7F4@posty.carmenta.se>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>	<4B56DAE2.2030309@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se>
	<4B5711B7.8090805@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE688@posty.carmenta.se>
	<4B58DA70.1030108@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE7B6@posty.carmenta.se>
	<4B59B5A0.4090703@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE7F4@posty.carmenta.se>
Message-ID: <4B59BE46.8010207@uva.nl>



On 22-1-2010 15:40, Mikael Rittri wrote:
> Jan, you wrote
> > All my observations about the towgs parameters have been tested with 
> real Belgian coordinates overlaid over Google.
> Fine.  But if you did make an error when transcribing the newer 
> transforms into Proj.4 syntax, and
> the error was just in the rotation angles, then the effect may be too 
> small to notice.
> I mean, the angles describe a rotation, so there is presumably a fixed 
> point in Belgium where
> the rotation has no effect.  If your test points happened to be near 
> the fixed point, the
> effect of the reversed angle signs could be very small.
> > As I said before, the EPSG database is not very systematical in the 
> way it represents its formulas,
> > it just takes them from whatever source is available, untested AFAIK. 
> Never use them without testing them with real world coordinates.
> I agree completely.  But I am not yet convinced that you are right and 
> EPSG wrong for the newer transforms,
> although that is certainly possible.  Do you have some link to the 
> offician Belgian documents?
>

As I said in a previous email:

http://www.ngi.be/FR/FR4-4.shtm
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100122/da97e8be/attachment.html>

From jamesmikedupont at googlemail.com  Sun Jan 24 04:12:24 2010
From: jamesmikedupont at googlemail.com (jamesmikedupont at googlemail.com)
Date: Sun, 24 Jan 2010 13:12:24 +0100
Subject: [Proj] please help transform of coords for Prishtina DXF
Message-ID: <ee9cc731001240412p138ed576kae5e030a01436a18@mail.gmail.com>

I have here a dxf file of Prishtina in high quality.
http://www.archive.org/details/PrishtinaStreets

I have been able to convert it to lat/lon like this
cs2cs +proj=utm  +zone=34T +ellps=WGS84 +datum=WGS84 +units=m -f \"%.7f\"

Problem is that most of the points are in relative position, there is a grid.

I have pushed a version of two nickels that can process alot of this :
To git at github.com:h4ck3rm1k3/TwoNickels.git
   c8e4009..41f23f1  master -> master

It produces osm files with data in three groups :

1. points that are exact on the mark, (few)
2. points on the equator (0,0) relative to something
3. points that seem to be shifted over from utm34T

         720496.25, 506444.9375 -> 22.987450699423831679, 4.5791053696411907481

I have created averages of good points versus the shifted ones and
came up with these constant shifts:
	$n -= 187380;
	$e += 4228672;

They are still 15km off of prishtina..


So I would like one of you to please help with the autocad and
transform all coordinates into some single form so I can convert them.
Or please advice on these points.

thanks,
mike


From Mikael.Rittri at carmenta.com  Mon Jan 25 01:20:07 2010
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 25 Jan 2010 10:20:07 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370) -
	towgs84parameters
In-Reply-To: <4B59BE46.8010207@uva.nl>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>	<4B56DAE2.2030309@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se>
	<4B5711B7.8090805@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE688@posty.carmenta.se>
	<4B58DA70.1030108@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE7B6@posty.carmenta.se>
	<4B59B5A0.4090703@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE7F4@posty.carmenta.se>
	<4B59BE46.8010207@uva.nl>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101BDE862@posty.carmenta.se>

Jan, you wrote:

> As I said in a previous email:
> 
> http://www.ngi.be/FR/FR4-4.shtm
 
Thanks. 
This page does not specify the rotation sign convention, as far as I could see, 
but I downloaded the converter.  Then I tried to convert the sample point 2°30' E, 51°N 
(west Belgium) from BD72 to WGS84, and compared the results with PROJ.4.
 
(A) Older transform, according to Jan.
    FWTools2.2.8> cs2cs +proj=longlat +ellps=intl +towgs84=-99.059,53.322,-112.486,0.419,-0.830,1.885,-1 +to +proj=longlat +datum=WGS84
    2.5 51
    2d30'4.369"E    50d59'58.092"N 41.378
 
(B) Newer transform according to Jan, assumes www.ngi.be/FR/FR4-4.shtm <http://www.ngi.be/FR/FR4-4.shtm>  uses Position Vector Transform:
    FWTools2.2.8> cs2cs +proj=longlat +ellps=intl +towgs84=-106.8686,52.2978,-103.7329,-0.3366,0.457,-1.8422,-1.2747 +to +proj=longlat +datum=WGS84
    2.5 51
    2d30'1.464"E    50d59'57.151"N 41.359
 
(C) Newer transform, but assuming that www.ngi.be/FR/FR4-4.shtm <http://www.ngi.be/FR/FR4-4.shtm>  uses Coordinate Frame Rotation:
    FWTools2.2.8> cs2cs +proj=longlat +ellps=intl +towgs84=-106.8686,52.2978,-103.7329,0.3366,-0.457,1.8422,-1.2747 +to +proj=longlat +datum=WGS84
    2.5 51
    2d30'4.373"E    50d59'58.093"N 41.455
 
(D) Result from Dutch converter, downloaded via www.ngi.be/FR/FR4-4.shtm <http://www.ngi.be/FR/FR4-4.shtm> 
    2°30'04.37266" E,  50°59'58.09273" N  
 
Distance (A) to (D):  0.08 m
Distance (B) to (D): 63.75 m 
Distance (C) to (D):  0.01 m 
(all measured by http://williams.best.vwh.net/gccalc.htm)
 
I conclude that www.ngi.be/FR/FR4-4.shtm <http://www.ngi.be/FR/FR4-4.shtm>  uses the Coordinate Frame Rotation, just like 
EPSG says in EPSG:15929, "BD72 to WGS 84(3)", and therefore, the three rotation
angles should be reversed when constructing a +towgs84 clause for PROJ.4, as in (C) above.
(EPSG has in fact reversed all parameter signs given in FR4-4, but that's because FR4-4 gives 
 the parameters _from_ ETRS89 (or WGS84) _to_ BD72.)  
 
Best regards,

--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com 

________________________________

From: Jan Hartmann [mailto:j.l.h.hartmann at uva.nl] 
Sent: Friday, January 22, 2010 4:04 PM
To: Mikael Rittri
Cc: PROJ.4 and general Projections Discussions; Thibaut Gheysen
Subject: Re: [Proj] Belge 1972 / Belgian Lambert 72 (31370) - towgs84parameters




On 22-1-2010 15:40, Mikael Rittri wrote: 

	Jan, you wrote 
	 
	> All my observations about the towgs parameters have been tested with real Belgian coordinates overlaid over Google.
	 
	Fine.  But if you did make an error when transcribing the newer transforms into Proj.4 syntax, and 
	the error was just in the rotation angles, then the effect may be too small to notice.  
	 
	I mean, the angles describe a rotation, so there is presumably a fixed point in Belgium where 
	the rotation has no effect.  If your test points happened to be near the fixed point, the 
	effect of the reversed angle signs could be very small.  
	 
	> As I said before, the EPSG database is not very systematical in the way it represents its formulas, 
	> it just takes them from whatever source is available, untested AFAIK. Never use them without testing them with real world coordinates.
	 
	I agree completely.  But I am not yet convinced that you are right and EPSG wrong for the newer transforms,
	although that is certainly possible.  Do you have some link to the offician Belgian documents? 
	
	


As I said in a previous email:

http://www.ngi.be/FR/FR4-4.shtm

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100125/c54b38b0/attachment.html>

From dssmailing at yahoo.com  Mon Jan 25 17:01:54 2010
From: dssmailing at yahoo.com (Dan Scheirer)
Date: Mon, 25 Jan 2010 17:01:54 -0800 (PST)
Subject: [Proj] PROJ.4 installation question under Solaris
In-Reply-To: <ee9cc731001240412p138ed576kae5e030a01436a18@mail.gmail.com>
References: <ee9cc731001240412p138ed576kae5e030a01436a18@mail.gmail.com>
Message-ID: <357861.30075.qm@web46011.mail.sp1.yahoo.com>

Greetings,

I'm hoping someone can provide advice to building multiple versions
of proj on Solaris machines.  I wasn't able to find answers at:
http://trac.osgeo.org/proj/

I wish to manually build/install the latest PROJ.4 (from proj-4.7.0.tar.gz)
in my own user-space on two Solaris machines.  I do not have root-access
on these machines.  Old versions of PROJ.4 (4.5.0 and 4.4.9)
are installed in /usr/local/bin.

The "./configure --prefix=..." and "make" steps seem to complete
without error.  However, I am puzzled by the proj version that I have created.

When I execute the ksh-wrapper, I get the expected result:
% proj-4.7.0/src/proj
Rel. 4.7.1, 23 September 2009
usage: proj [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]

However, when I execute the executable pointed-to by
the ksh-wrapper, I get an old version string...equivalent to
the one built in /usr/local/bin:
% proj-4.7.0/src/.libs/proj
Rel. 4.5.0, 22 Oct 2006
usage: proj [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
% /usr/local/bin/proj
Rel. 4.5.0, 22 Oct 2006
usage: proj [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]

If I "make install", I simply get the results seen in proj-4.7.0/src/.libs/proj
placed into my BINDIR.  I ran the above proj commands with
the -lp option, and I see indeed that the projection lists are different
(and correspond to the 4.7.0 and 4.5.0 versions...e.g. gstmerc
is only in the more recent release).

My difficulty probably stems from my lack-of-knowledge of
ksh's exec command.  It's possible, too, that I'm mixing GNU
and non-GNU program-building tools, but I tried some configure
flags (CC=, F77=) that I thought would separate things
entirely...but no difference.

Any advice to get the updated proj in: proj-4.7.0/src/.libs/proj
and thus in my BINDIR?  Any on-line place to look for
this sort of information?

Many thanks,
Dan Scheirer


FYI, the two machines have:

% uname -irms
SunOS 5.10 sun4u SUNW,Sun-Fire-480R

% uname -irms
SunOS 5.7 sun4u SUNW,Ultra-Enterprise


      


From warmerdam at pobox.com  Mon Jan 25 20:17:06 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 26 Jan 2010 12:17:06 +0800
Subject: [Proj] PROJ.4 installation question under Solaris
In-Reply-To: <357861.30075.qm@web46011.mail.sp1.yahoo.com>
References: <ee9cc731001240412p138ed576kae5e030a01436a18@mail.gmail.com>
	<357861.30075.qm@web46011.mail.sp1.yahoo.com>
Message-ID: <931f8ea91001252017y50407419v87420367a7d25cd5@mail.gmail.com>

On Tue, Jan 26, 2010 at 9:01 AM, Dan Scheirer <dssmailing at yahoo.com> wrote:
> The "./configure --prefix=..." and "make" steps seem to complete
> without error.  However, I am puzzled by the proj version that I have created.
>
> When I execute the ksh-wrapper, I get the expected result:
> % proj-4.7.0/src/proj
> Rel. 4.7.1, 23 September 2009
> usage: proj [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
>
> However, when I execute the executable pointed-to by
> the ksh-wrapper, I get an old version string...equivalent to
> the one built in /usr/local/bin:
> % proj-4.7.0/src/.libs/proj
> Rel. 4.5.0, 22 Oct 2006
> usage: proj [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
> % /usr/local/bin/proj
> Rel. 4.5.0, 22 Oct 2006
> usage: proj [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]

Dan,

The problem is if you execute the executable directly it
does a normal search of the shared library path to find
the libproj.so shared library to use, and ends up getting
the old one from /usr/local/lib.

If you run the wrapper script, it does some magic to ensure
it picks up the right shared library.

What I would normally do in this case is define the
LD_LIBRARY_PATH environment variable with
my local build ahead of the default locations.   I'm
not sure if things work exactly the same on Solaris
though - the env. variable name may be different.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From stephane.saragaglia at robosoft.fr  Tue Jan 26 02:24:48 2010
From: stephane.saragaglia at robosoft.fr (=?UTF-8?B?U3TDqXBoYW5lIFNBUkFHQUdMSUE=?=)
Date: Tue, 26 Jan 2010 11:24:48 +0100
Subject: [Proj] Installation or usage problems
Message-ID: <4B5EC2F0.4090604@robosoft.fr>

Hello everyone,

First of all, thank you for the Proj.4 lib which is useful in the 
painful world of Cartographic Projections.

But I am encountering some troubles using nad files.

- I have downloaded sources 
(http://download.osgeo.org/proj/proj-4.7.0.tar.gz) and datum shift grids 
(http://download.osgeo.org/proj/proj-datumgrid-1.5.zip).
- I have compiled cs2cs with VC6 for Windows.
- I have installed binaries in PATH and set PROJ_LIB to point to nad files.

I want to convert WGS84 coords to French Lambert3 ones.
When I use the following command, all is fine :
$ ./cs2cs.exe +init=epsg:4326 +to +proj=lcc +lat_1=44.10000000000001 
+lat_0=44.10000000000001 +lon_0=0 +k_0=0.999877499 +x_0=600000 
+y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 
+pm=paris +units=m +no_defs
pj_open_lib(epsg): call fopen(C:\Program Files\Pges\proj\nad\epsg) - 
succeeded
5d47'17.2"E 45d12'37.7"N 270
871086.51 329076.60 228.46

But when I use the following one, I obtain wrongs results :
$ ./cs2cs.exe +init=epsg:4326 +to +init=epsg:27563
pj_open_lib(epsg): call fopen(C:\Program Files\Pges\proj\nad\epsg) - 
succeeded
pj_open_lib(epsg): call fopen(C:\Program Files\Pges\proj\nad\epsg) - 
succeeded
5d47'17.2"E 45d12'37.7"N 270
687492.97 323984.26 270.00

The parameters used in the first command line are taken from the epsg 
file used in the second one. I guess I am missing something. Perhaps a 
wrong install or a wrong usage.

Could you give me some advice ?

Regards,

-- 
-----------------------------------------------------------------------
Stéphane SARAGAGLIA
http://www.robosoft.com
ROBOSOFT PGES – 4 bis Chemin des Prés – F-38240 MEYLAN
Tel : + 33 (0)4 76 18 21 50 – Fax : + 33 (0)4 76 18 90 42
----------------------------------------------------------------------



From dssmailing at yahoo.com  Tue Jan 26 11:13:19 2010
From: dssmailing at yahoo.com (Dan Scheirer)
Date: Tue, 26 Jan 2010 11:13:19 -0800 (PST)
Subject: [Proj] PROJ.4 installation question under Solaris
In-Reply-To: <931f8ea91001252017y50407419v87420367a7d25cd5@mail.gmail.com>
References: <ee9cc731001240412p138ed576kae5e030a01436a18@mail.gmail.com>
	<357861.30075.qm@web46011.mail.sp1.yahoo.com>
	<931f8ea91001252017y50407419v87420367a7d25cd5@mail.gmail.com>
Message-ID: <474663.62610.qm@web46016.mail.sp1.yahoo.com>

Frank,

Re-ordering my LD_LIBRARY_PATH in Solaris, giving precedence
to my local build's lib, indeed gives me the desired results.

Much obliged,
Dan



----- Original Message ----
> From: Frank Warmerdam <warmerdam at pobox.com>
> To: PROJ.4 and general Projections Discussions <proj at lists.maptools.org>
> Sent: Mon, January 25, 2010 8:17:06 PM
> Subject: Re: [Proj] PROJ.4 installation question under Solaris
> 
> On Tue, Jan 26, 2010 at 9:01 AM, Dan Scheirer wrote:
> > The "./configure --prefix=..." and "make" steps seem to complete
> > without error.  However, I am puzzled by the proj version that I have created.
> >
> > When I execute the ksh-wrapper, I get the expected result:
> > % proj-4.7.0/src/proj
> > Rel. 4.7.1, 23 September 2009
> > usage: proj [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
> >
> > However, when I execute the executable pointed-to by
> > the ksh-wrapper, I get an old version string...equivalent to
> > the one built in /usr/local/bin:
> > % proj-4.7.0/src/.libs/proj
> > Rel. 4.5.0, 22 Oct 2006
> > usage: proj [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
> > % /usr/local/bin/proj
> > Rel. 4.5.0, 22 Oct 2006
> > usage: proj [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
> 
> Dan,
> 
> The problem is if you execute the executable directly it
> does a normal search of the shared library path to find
> the libproj.so shared library to use, and ends up getting
> the old one from /usr/local/lib.
> 
> If you run the wrapper script, it does some magic to ensure
> it picks up the right shared library.
> 
> What I would normally do in this case is define the
> LD_LIBRARY_PATH environment variable with
> my local build ahead of the default locations.   I'm
> not sure if things work exactly the same on Solaris
> though - the env. variable name may be different.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



      


From j.l.h.hartmann at uva.nl  Wed Jan 27 04:28:03 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed, 27 Jan 2010 13:28:03 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370) -
	towgs84parameters
In-Reply-To: <FAF6E56B26D2044696772EBE89B1535101BDE862@posty.carmenta.se>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>	<4B56DAE2.2030309@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se>
	<4B5711B7.8090805@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE688@posty.carmenta.se>
	<4B58DA70.1030108@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE7B6@posty.carmenta.se>
	<4B59B5A0.4090703@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE7F4@posty.carmenta.se>
	<4B59BE46.8010207@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE862@posty.carmenta.se>
Message-ID: <4B603153.6090806@uva.nl>

Thanks Mikael. Looks like I made an error with the rotation signs. Your 
PROJ parameters in (C) are the right ones. My faulty version (B) was 
taken over from the EPSG file in the latest (4.7) PROJ, which should be 
corrected too. I don't know how the parameters in the epsg-file are 
derived form the EPSG database, but in this case, the derivation isn't 
correct.

The whole problem of datum conversions is a permanent pain in the head, 
to express it mildly. Contributions like yours should be stored in some 
sort of central place, e.g. a Wiki, instead of lying around all over the 
Internet, together with all kind of faulty comments (like mine). Perhaps 
you should have a look at http://trac.osgeo.org/metacrs/, and think 
about setting up such a wiki about datum conversions, not only from and 
to WGS84, but also for other historical datums.

Thanks for the trouble you have taken,

Jan



On 25-1-2010 10:20, Mikael Rittri wrote:
> Jan, you wrote:
> > As I said in a previous email:
> >
> > http://www.ngi.be/FR/FR4-4.shtm
> Thanks.
> This page does not specify the rotation sign convention, as far as I 
> could see,
> but I downloaded the converter.  Then I tried to convert the sample 
> point 2°30' E, 51°N
> (west Belgium) from BD72 to WGS84, and compared the results with PROJ.4.
> (A) Older transform, according to Jan.
> FWTools2.2.8> cs2cs +proj=longlat +ellps=intl 
> +towgs84=-99.059,53.322,-112.486,0.419,-0.830,1.885,-1 +to 
> +proj=longlat +datum=WGS84
> 2.5 51
> 2d30'4.369"E    50d59'58.092"N 41.378
> (B) Newer transform according to Jan, assumes www.ngi.be/FR/FR4-4.shtm 
> <http://www.ngi.be/FR/FR4-4.shtm> uses Position Vector Transform:
> FWTools2.2.8> cs2cs +proj=longlat +ellps=intl 
> +towgs84=-106.8686,52.2978,-103.7329,-0.3366,0.457,-1.8422,-1.2747 +to 
> +proj=longlat +datum=WGS84
> 2.5 51
> 2d30'1.464"E    50d59'57.151"N 41.359
> (C) Newer transform, but assuming that www.ngi.be/FR/FR4-4.shtm 
> <http://www.ngi.be/FR/FR4-4.shtm> uses Coordinate Frame Rotation:
> FWTools2.2.8> cs2cs +proj=longlat +ellps=intl 
> +towgs84=-106.8686,52.2978,-103.7329,0.3366,-0.457,1.8422,-1.2747 +to 
> +proj=longlat +datum=WGS84
> 2.5 51
> 2d30'4.373"E    50d59'58.093"N 41.455
> (D) Result from Dutch converter, downloaded via 
> www.ngi.be/FR/FR4-4.shtm <http://www.ngi.be/FR/FR4-4.shtm>
> 2°30'04.37266" E,  50°59'58.09273" N
> Distance (A) to (D): 0.08 m
> Distance (B) to (D): 63.75 m
> Distance (C) to (D): 0.01 m
> (all measured by http://williams.best.vwh.net/gccalc.htm)
> I conclude that www.ngi.be/FR/FR4-4.shtm 
> <http://www.ngi.be/FR/FR4-4.shtm> uses the Coordinate Frame Rotation, 
> just like
> EPSG says in EPSG:15929, "BD72 to WGS 84(3)", and therefore, the three 
> rotation
> angles should be reversed when constructing a +towgs84 clause for 
> PROJ.4, as in (C) above.
> (EPSG has in fact reversed all parameter signs given in FR4-4, but 
> that's because FR4-4 gives
>  the parameters _from_ ETRS89 (or WGS84) _to_ BD72.)
>
> Best regards,
> --
> Mikael Rittri
> Carmenta AB
> SWEDEN
> www.carmenta.com
> ------------------------------------------------------------------------
> *From:* Jan Hartmann [mailto:j.l.h.hartmann at uva.nl]
> *Sent:* Friday, January 22, 2010 4:04 PM
> *To:* Mikael Rittri
> *Cc:* PROJ.4 and general Projections Discussions; Thibaut Gheysen
> *Subject:* Re: [Proj] Belge 1972 / Belgian Lambert 72 (31370) - 
> towgs84parameters
>
>
>
> On 22-1-2010 15:40, Mikael Rittri wrote:
>> Jan, you wrote
>> > All my observations about the towgs parameters have been tested with 
>> real Belgian coordinates overlaid over Google.
>> Fine.  But if you did make an error when transcribing the newer 
>> transforms into Proj.4 syntax, and
>> the error was just in the rotation angles, then the effect may be too 
>> small to notice.
>> I mean, the angles describe a rotation, so there is presumably a 
>> fixed point in Belgium where
>> the rotation has no effect.  If your test points happened to be near 
>> the fixed point, the
>> effect of the reversed angle signs could be very small.
>> > As I said before, the EPSG database is not very systematical in the 
>> way it represents its formulas,
>> > it just takes them from whatever source is available, untested 
>> AFAIK. Never use them without testing them with real world coordinates.
>> I agree completely.  But I am not yet convinced that you are right 
>> and EPSG wrong for the newer transforms,
>> although that is certainly possible.  Do you have some link to the 
>> offician Belgian documents?
>>
>
> As I said in a previous email:
>
> http://www.ngi.be/FR/FR4-4.shtm
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100127/23eccde9/attachment.html>

From ovv at hetnet.nl  Wed Jan 27 08:41:48 2010
From: ovv at hetnet.nl (OvV_HN)
Date: Wed, 27 Jan 2010 17:41:48 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370)
	-towgs84parameters
In-Reply-To: <FAF6E56B26D2044696772EBE89B1535101BDE862@posty.carmenta.se>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>	<4B56DAE2.2030309@uva.nl><FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se><4B5711B7.8090805@uva.nl><FAF6E56B26D2044696772EBE89B1535101BDE688@posty.carmenta.se><4B58DA70.1030108@uva.nl><FAF6E56B26D2044696772EBE89B1535101BDE7B6@posty.carmenta.se><4B59B5A0.4090703@uva.nl><FAF6E56B26D2044696772EBE89B1535101BDE7F4@posty.carmenta.se><4B59BE46.8010207@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE862@posty.carmenta.se>
Message-ID: <DF42CEC5D1ED4109B03FE73D7487F063@PCHP>


----- Original Message ----- 
From: "Mikael Rittri" <Mikael.Rittri at carmenta.com>
To: "Jan Hartmann" <j.l.h.hartmann at uva.nl>
Cc: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
Sent: Monday, January 25, 2010 10:20 AM
Subject: Re: [Proj] Belge 1972 / Belgian Lambert 72 
(31370) -towgs84parameters


Jan, you wrote:

> As I said in a previous email:
>
> http://www.ngi.be/FR/FR4-4.shtm

Thanks.
This page does not specify the rotation sign convention, as far as I could 
see,


Reply:

But a Dutch language page does:
http://www.ngi.be/Common/Lambert2008/Schema_Lambert_1972_2008_nl.pdf
This page also gives a couple of extra decimals.



Oscar van Vlijmen




From j.l.h.hartmann at uva.nl  Wed Jan 27 10:59:21 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed, 27 Jan 2010 19:59:21 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72
	(31370)	-towgs84parameters
In-Reply-To: <DF42CEC5D1ED4109B03FE73D7487F063@PCHP>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>	<4B56DAE2.2030309@uva.nl><FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se><4B5711B7.8090805@uva.nl><FAF6E56B26D2044696772EBE89B1535101BDE688@posty.carmenta.se><4B58DA70.1030108@uva.nl><FAF6E56B26D2044696772EBE89B1535101BDE7B6@posty.carmenta.se><4B59B5A0.4090703@uva.nl><FAF6E56B26D2044696772EBE89B1535101BDE7F4@posty.carmenta.se><4B59BE46.8010207@uva.nl>	<FAF6E56B26D2044696772EBE89B1535101BDE862@posty.carmenta.se>
	<DF42CEC5D1ED4109B03FE73D7487F063@PCHP>
Message-ID: <4B608D09.3040006@uva.nl>

Thanks Oscar, good to know. How did you find this page? Is it reachable 
from within the ngi site or did you find it with Google.

Jan

On 27-1-2010 17:41, OvV_HN wrote:
> ----- Original Message -----
> From: "Mikael Rittri"<Mikael.Rittri at carmenta.com>
> To: "Jan Hartmann"<j.l.h.hartmann at uva.nl>
> Cc: "PROJ.4 and general Projections Discussions"<proj at lists.maptools.org>
> Sent: Monday, January 25, 2010 10:20 AM
> Subject: Re: [Proj] Belge 1972 / Belgian Lambert 72
> (31370) -towgs84parameters
>
>
> Jan, you wrote:
>
>    
>> As I said in a previous email:
>>
>> http://www.ngi.be/FR/FR4-4.shtm
>>      
> Thanks.
> This page does not specify the rotation sign convention, as far as I could
> see,
>
>
> Reply:
>
> But a Dutch language page does:
> http://www.ngi.be/Common/Lambert2008/Schema_Lambert_1972_2008_nl.pdf
> This page also gives a couple of extra decimals.
>
>
>
> Oscar van Vlijmen
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>    


From nhopton at gmail.com  Wed Jan 27 11:11:55 2010
From: nhopton at gmail.com (Nick Hopton)
Date: Wed, 27 Jan 2010 19:11:55 +0000
Subject: [Proj] EPSG:27700
Message-ID: <304bf2491001271111o62b08816vf508d4b183eb111b@mail.gmail.com>

I've just downloaded the latest version of Proj
(proj446_win32_bin.zip) and notice that the parameters for EPSG:27700
in the 'epsg' file are as follows:

# OSGB 1936 / British National Grid
<27700> +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.999601 +x_0=400000
+y_0=-100000 +ellps=airy +units=m +no_defs  no_defs <>

The problem is (I think!) that this doesn't take the datum shift into
account, which leads to errors in the order of a hundred metres (112
point-something metres at Greenwich). Shouldn't there be something
like '+datum=OSGB36' in there? If I have this wrong please accept my
apologies in advance, I'm not an expert.

Regards,
Nick.

-- 
Nick Hopton, Caversham, Reading, England.


From j.l.h.hartmann at uva.nl  Wed Jan 27 12:35:46 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed, 27 Jan 2010 21:35:46 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72
	(31370)	-towgs84parameters
In-Reply-To: <07E75E8BCCF049B4BFF1B6976A515459@PCHP>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>	<4B56DAE2.2030309@uva.nl><FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se><4B5711B7.8090805@uva.nl><FAF6E56B26D2044696772EBE89B1535101BDE688@posty.carmenta.se><4B58DA70.1030108@uva.nl><FAF6E56B26D2044696772EBE89B1535101BDE7B6@posty.carmenta.se><4B59B5A0.4090703@uva.nl><FAF6E56B26D2044696772EBE89B1535101BDE7F4@posty.carmenta.se><4B59BE46.8010207@uva.nl>	<FAF6E56B26D2044696772EBE89B1535101BDE862@posty.carmenta.se>
	<DF42CEC5D1ED4109B03FE73D7487F063@PCHP> <4B608D09.3040006@uva.nl>
	<07E75E8BCCF049B4BFF1B6976A515459@PCHP>
Message-ID: <4B60A3A2.9010900@uva.nl>


Nice. Our Belgian friends seem to have changed their national 
projection. I don't understand this page (Dutch: 
http://www.ngi.be/FR/FR4-4.shtm; French: 
http://www.ngi.be/FR/FR2-1-7.shtm, no English need apply). It says:

"Due to the too small deviation (1 kilometer) between the coordinates of 
the Lambert 1972 projection and those of the Lambert 2005 projection, 
the NGI has changed the parameters of the Lambert 2005 projection, and 
created the Lambert 2008 projection".

What they did was just adding 499.000 to both x and y coordinates of 
Lambert 2005.

Lambert 1972 is the projection as defined in PROJ's epsg file (nr 
31370), derived from the EPSG database (coordinate reference nr 411). 
Its datum is intl (=Hayford). First standard parallel is 51.166667, 
second standard parallel 49.833333, central parallel 90 (?), central 
meridian 4.367486666. x_0 = 150000.01256, y_0 = 5400088.4378

Lambert 2005, as defined on the above page (nothing in the EPSG 
database): datum GRS80 (=WGS84, approximately). First standard parallel 
51.166667, second standard parallel 49.833333, central parallel 
50.7977777, central meridian 4.35916666666. x_0 = 150328, y_0 = 166262

Lambert 2008 is Lambert 2005 with 499 km added to both x and y coordinates

So, without additional information, I really don't see the relationship 
between the 1972, 2005 and 2008 systems. What's the difference between 
1972 and 2005, and why did they add 500 km in 2008? Did they change each 
and every coordinate on each and every Belgian map in 2005 and are they 
changing it again in 2008? Has anyone ever seen a Lambert 2005 
coordinate? They are not in the EPSG database.

If anyone can make sense of this gobbledygook, I would be happy to know.

Jan




On 27-1-2010 20:12, OvV_HN wrote:
>
> ----- Original Message ----- From: "Jan Hartmann" <j.l.h.hartmann at uva.nl>
> To: "PROJ.4 and general Projections Discussions" 
> <proj at lists.maptools.org>
> Cc: "OvV_HN" <ovv at hetnet.nl>
> Sent: Wednesday, January 27, 2010 7:59 PM
> Subject: Re: [Proj] Belge 1972 / Belgian Lambert 72 (31370) 
> -towgs84parameters
>
>
>> Thanks Oscar, good to know. How did you find this page? Is it 
>> reachable from within the ngi site or did you find it with Google.
>>
>> Jan
>>
>
>
> The path starting from the Dutch language home page is:
> home > know-how > geodetische diensten > Lambert 2008
> http://www.ngi.be/NL/NL2-1-7.shtm
>
> Scroll down to:
> "Relatie tussen de geodetische referentiesystemen van 1972 en 2008"
> ...
> "> uitgebeider schema in pdf"
>
> This last link goes to the page I mentioned.
>
>
> Oscar van Vlijmen
>
>


From jagoncal at gmail.com  Wed Jan 27 16:02:40 2010
From: jagoncal at gmail.com (=?ISO-8859-1?Q?Jose_Gon=E7alves?=)
Date: Thu, 28 Jan 2010 00:02:40 +0000
Subject: [Proj] EPSG:27700
In-Reply-To: <304bf2491001271111o62b08816vf508d4b183eb111b@mail.gmail.com>
References: <304bf2491001271111o62b08816vf508d4b183eb111b@mail.gmail.com>
Message-ID: <6a91fcb01001271602m50093971hc97af3dd73d4102@mail.gmail.com>

I think datum definition is not included in the epsg file when there
are different sets of parameters or forms of transformation from the
local datum to WGS84. +datum=OSGB36 corresponds to a given set of
parameters, which may not be the most appropriate for some
applications. You can also do the datum transformation using NTv2
grids instead of Bursa-Wolf transformation (see for example
http://lists.maptools.org/pipermail/proj/2006-November/002658.html).
Users are free to combine projection 27700 with their own datum
transformation. You can have for example:

cs2cs +init=4326 +to +init=27700 +datum=OSGB36
or
cs2cs +init=4326 +to +init=27700 +towgs84=.....
or
cs2cs +init=4326 +to +init=27700 +nadgrids=c:/england-wales.gsb

Regards


José


---------------------------------------------------------------------
José A. Gonçalves, University of Porto, Portugal





2010/1/27 Nick Hopton <nhopton at gmail.com>:
> I've just downloaded the latest version of Proj
> (proj446_win32_bin.zip) and notice that the parameters for EPSG:27700
> in the 'epsg' file are as follows:
>
> # OSGB 1936 / British National Grid
> <27700> +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.999601 +x_0=400000
> +y_0=-100000 +ellps=airy +units=m +no_defs  no_defs <>
>
> The problem is (I think!) that this doesn't take the datum shift into
> account, which leads to errors in the order of a hundred metres (112
> point-something metres at Greenwich). Shouldn't there be something
> like '+datum=OSGB36' in there? If I have this wrong please accept my
> apologies in advance, I'm not an expert.
>
> Regards,
> Nick.
>
> --
> Nick Hopton, Caversham, Reading, England.
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


From gheysen.t at gmail.com  Thu Jan 28 00:20:30 2010
From: gheysen.t at gmail.com (Thibaut Gheysen)
Date: Thu, 28 Jan 2010 09:20:30 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370)
	-towgs84parameters
In-Reply-To: <4B60A3A2.9010900@uva.nl>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>
	<FAF6E56B26D2044696772EBE89B1535101BDE7B6@posty.carmenta.se>
	<4B59B5A0.4090703@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE7F4@posty.carmenta.se>
	<4B59BE46.8010207@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE862@posty.carmenta.se>
	<DF42CEC5D1ED4109B03FE73D7487F063@PCHP> <4B608D09.3040006@uva.nl>
	<07E75E8BCCF049B4BFF1B6976A515459@PCHP> <4B60A3A2.9010900@uva.nl>
Message-ID: <94e91cde1001280020q34d52013ref97a6317143a882@mail.gmail.com>

Hi,

The development of the Lambert coordinate system 2005 follows the
introduction of ETRS89 in Europe. From 1989 to 2002, the IGN has reviewed
the national geodetic network using the GPS network. This changes has led to
the Lambert 2005 projection. For a given location, the difference between
the coordinates in Lambert 1972 and 2005 are relatively low (+ / - 1
kilometer). Considering this small difference, when we received map data in
Lambert 2005 without the coordinate system used has been specified, you
might think, if you don't pay too much attention, that the data were still
in Lambert 1972. Therefore, the IGN has added 500 kilometers in X and Y
(Lambert 2008) : you see thus immediately that the projection system used is
no longer the Lambert 1972.

Thibaut.


2010/1/27 Jan Hartmann <j.l.h.hartmann at uva.nl>

>
> Nice. Our Belgian friends seem to have changed their national
> projection. I don't understand this page (Dutch:
> http://www.ngi.be/FR/FR4-4.shtm; French:
> http://www.ngi.be/FR/FR2-1-7.shtm, no English need apply). It says:
>
> "Due to the too small deviation (1 kilometer) between the coordinates of
> the Lambert 1972 projection and those of the Lambert 2005 projection,
> the NGI has changed the parameters of the Lambert 2005 projection, and
> created the Lambert 2008 projection".
>
> What they did was just adding 499.000 to both x and y coordinates of
> Lambert 2005.
>
> Lambert 1972 is the projection as defined in PROJ's epsg file (nr
> 31370), derived from the EPSG database (coordinate reference nr 411).
> Its datum is intl (=Hayford). First standard parallel is 51.166667,
> second standard parallel 49.833333, central parallel 90 (?), central
> meridian 4.367486666. x_0 = 150000.01256, y_0 = 5400088.4378
>
> Lambert 2005, as defined on the above page (nothing in the EPSG
> database): datum GRS80 (=WGS84, approximately). First standard parallel
> 51.166667, second standard parallel 49.833333, central parallel
> 50.7977777, central meridian 4.35916666666. x_0 = 150328, y_0 = 166262
>
> Lambert 2008 is Lambert 2005 Hi,with 499 km added to both x and y
> coordinates
>
> So, without additional information, I really don't see the relationship
> between the 1972, 2005 and 2008 systems. What's the difference between
> 1972 and 2005, and why did they add 500 km in 2008? Did they change each
> and every coordinate on each and every Belgian map in 2005 and are they
> changing it again in 2008? Has anyone ever seen a Lambert 2005
> coordinate? They are not in the EPSG database.
>
> If anyone can make sense of this gobbledygook, I would be happy to know.
>
> Jan
>
>
>
>
> On 27-1-2010 20:12, OvV_HN wrote:
> >
> > ----- Original Message ----- From: "Jan Hartmann" <j.l.h.hartmann at uva.nl
> >
> > To: "PROJ.4 and general Projections Discussions"
> > <proj at lists.maptools.org>
> > Cc: "OvV_HN" <ovv at hetnet.nl>
> > Sent: Wednesday, January 27, 2010 7:59 PM
> > Subject: Re: [Proj] Belge 1972 / Belgian Lambert 72 (31370)
> > -towgs84parameters
> >
> >
> >> Thanks Oscar, good to know. How did you find this page? Is it
> >> reachable from within the ngi site or did you find it with Google.
> >>
> >> Jan
> >>
> >
> >
> > The path starting from the Dutch language home page is:
> > home > know-how > geodetische diensten > Lambert 2008
> > http://www.ngi.be/NL/NL2-1-7.shtm
> >
> > Scroll down to:
> > "Relatie tussen de geodetische referentiesystemen van 1972 en 2008"
> > ...
> > "> uitgebeider schema in pdf"
> >
> > This last link goes to the page I mentioned.
> >
> >
> > Oscar van Vlijmen
> >
> >
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100128/8f15c0cc/attachment.html>

From Mikael.Rittri at carmenta.com  Thu Jan 28 01:05:00 2010
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Thu, 28 Jan 2010 10:05:00 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370) -
	towgs84parameters
In-Reply-To: <4B603153.6090806@uva.nl>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>	<4B56DAE2.2030309@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE5A4@posty.carmenta.se>
	<4B5711B7.8090805@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE688@posty.carmenta.se>
	<4B58DA70.1030108@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE7B6@posty.carmenta.se>
	<4B59B5A0.4090703@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE7F4@posty.carmenta.se>
	<4B59BE46.8010207@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE862@posty.carmenta.se>
	<4B603153.6090806@uva.nl>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101BDEB11@posty.carmenta.se>

Jan wrote:
 
> Contributions like yours should be stored in some sort of central
place, e.g. a Wiki,
 
Well, I have filed tickets, http://trac.osgeo.org/proj/ticket/65 and
http://trac.osgeo.org/gdal/ticket/3362 .
 
> Your PROJ parameters in (C) are the right ones.
 
Yes, almost.  For the record, I happened to notice that the  -103.7329
in (C) should really have been  -103.7239  ! 
But that's only a 9 millimeter error.  (I corrected that in the
tickets.) 
 
Best regards,

--
Mikael Rittri
Carmenta AB
SWEDEN
www.carmenta.com 


________________________________

From: Jan Hartmann [mailto:j.l.h.hartmann at uva.nl] 
Sent: Wednesday, January 27, 2010 1:28 PM
To: Mikael Rittri
Cc: PROJ.4 and general Projections Discussions; Thibaut Gheysen
Subject: Re: [Proj] Belge 1972 / Belgian Lambert 72 (31370) -
towgs84parameters
 
   [  http://lists.maptools.org/pipermail/proj/2010-January/005035.html
]   

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100128/0ae61749/attachment.html>

From j.l.h.hartmann at uva.nl  Thu Jan 28 01:51:20 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu, 28 Jan 2010 10:51:20 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72
	(31370)	-towgs84parameters
In-Reply-To: <94e91cde1001280020q34d52013ref97a6317143a882@mail.gmail.com>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>	<FAF6E56B26D2044696772EBE89B1535101BDE7B6@posty.carmenta.se>	<4B59B5A0.4090703@uva.nl>	<FAF6E56B26D2044696772EBE89B1535101BDE7F4@posty.carmenta.se>	<4B59BE46.8010207@uva.nl>	<FAF6E56B26D2044696772EBE89B1535101BDE862@posty.carmenta.se>	<DF42CEC5D1ED4109B03FE73D7487F063@PCHP>
	<4B608D09.3040006@uva.nl>	<07E75E8BCCF049B4BFF1B6976A515459@PCHP>
	<4B60A3A2.9010900@uva.nl>
	<94e91cde1001280020q34d52013ref97a6317143a882@mail.gmail.com>
Message-ID: <4B615E18.8090205@uva.nl>

Hi Thibaut,

Why did they do this in 2005? In Holland we still use the RD system with 
the Bessel ellipse. Nowadays, there is no problem at all in converting 
from whatever projection and datum to WGS84. Before 2005 you had to 
convert from Lambert 1972, after that from Lambert 2005, and now you 
have to add 500000 to each coordinate. Given that you can convert from 
every system, why going to the hassle of changing the datun and zero 
point of an existing Lambert system, only to end up with something that 
also has te be converted to WGS84?

Jan

On 28-1-2010 9:20, Thibaut Gheysen wrote:
> Hi,
>
> The development of the Lambert coordinate system 2005 follows the 
> introduction of ETRS89 in Europe. From 1989 to 2002, the IGN has 
> reviewed the national geodetic network using the GPS network. This 
> changes has led to the Lambert 2005 projection. For a given location, 
> the difference between the coordinates in Lambert 1972 and 2005 are 
> relatively low (+ / - 1 kilometer). Considering this small difference, 
> when we received map data in Lambert 2005 without the coordinate 
> system used has been specified, you might think, if you don't pay too 
> much attention, that the data were still in Lambert 1972. Therefore, 
> the IGN has added 500 kilometers in X and Y (Lambert 2008) : you see 
> thus immediately that the projection system used is no longer the 
> Lambert 1972.
>
> Thibaut.
>
>
> 2010/1/27 Jan Hartmann <j.l.h.hartmann at uva.nl 
> <mailto:j.l.h.hartmann at uva.nl>>
>
>
>     Nice. Our Belgian friends seem to have changed their national
>     projection. I don't understand this page (Dutch:
>     http://www.ngi.be/FR/FR4-4.shtm; French:
>     http://www.ngi.be/FR/FR2-1-7.shtm, no English need apply). It says:
>
>     "Due to the too small deviation (1 kilometer) between the
>     coordinates of
>     the Lambert 1972 projection and those of the Lambert 2005 projection,
>     the NGI has changed the parameters of the Lambert 2005 projection, and
>     created the Lambert 2008 projection".
>
>     What they did was just adding 499.000 to both x and y coordinates of
>     Lambert 2005.
>
>     Lambert 1972 is the projection as defined in PROJ's epsg file (nr
>     31370), derived from the EPSG database (coordinate reference nr 411).
>     Its datum is intl (=Hayford). First standard parallel is 51.166667,
>     second standard parallel 49.833333, central parallel 90 (?), central
>     meridian 4.367486666. x_0 = 150000.01256, y_0 = 5400088.4378
>
>     Lambert 2005, as defined on the above page (nothing in the EPSG
>     database): datum GRS80 (=WGS84, approximately). First standard
>     parallel
>     51.166667, second standard parallel 49.833333, central parallel
>     50.7977777, central meridian 4.35916666666. x_0 = 150328, y_0 = 166262
>
>     Lambert 2008 is Lambert 2005 Hi,with 499 km added to both x and y
>     coordinates
>
>     So, without additional information, I really don't see the
>     relationship
>     between the 1972, 2005 and 2008 systems. What's the difference between
>     1972 and 2005, and why did they add 500 km in 2008? Did they
>     change each
>     and every coordinate on each and every Belgian map in 2005 and are
>     they
>     changing it again in 2008? Has anyone ever seen a Lambert 2005
>     coordinate? They are not in the EPSG database.
>
>     If anyone can make sense of this gobbledygook, I would be happy to
>     know.
>
>     Jan
>
>
>
>
>     On 27-1-2010 20:12, OvV_HN wrote:
>     >
>     > ----- Original Message ----- From: "Jan Hartmann"
>     <j.l.h.hartmann at uva.nl <mailto:j.l.h.hartmann at uva.nl>>
>     > To: "PROJ.4 and general Projections Discussions"
>     > <proj at lists.maptools.org <mailto:proj at lists.maptools.org>>
>     > Cc: "OvV_HN" <ovv at hetnet.nl <mailto:ovv at hetnet.nl>>
>     > Sent: Wednesday, January 27, 2010 7:59 PM
>     > Subject: Re: [Proj] Belge 1972 / Belgian Lambert 72 (31370)
>     > -towgs84parameters
>     >
>     >
>     >> Thanks Oscar, good to know. How did you find this page? Is it
>     >> reachable from within the ngi site or did you find it with Google.
>     >>
>     >> Jan
>     >>
>     >
>     >
>     > The path starting from the Dutch language home page is:
>     > home > know-how > geodetische diensten > Lambert 2008
>     > http://www.ngi.be/NL/NL2-1-7.shtm
>     >
>     > Scroll down to:
>     > "Relatie tussen de geodetische referentiesystemen van 1972 en 2008"
>     > ...
>     > "> uitgebeider schema in pdf"
>     >
>     > This last link goes to the page I mentioned.
>     >
>     >
>     > Oscar van Vlijmen
>     >
>     >
>     _______________________________________________
>     Proj mailing list
>     Proj at lists.maptools.org <mailto:Proj at lists.maptools.org>
>     http://lists.maptools.org/mailman/listinfo/proj
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100128/052c46d9/attachment.html>

From schneider.matthias at tu-ilmenau.de  Thu Jan 28 02:20:15 2010
From: schneider.matthias at tu-ilmenau.de (Matthias Schneider)
Date: Thu, 28 Jan 2010 11:20:15 +0100
Subject: [Proj] undefined cache functions
Message-ID: <4B6164DF.7070903@tu-ilmenau.de>

Hi,

when I try to build the proj4 4.7.0 with Visual Studio 2005 I got some 
warnings which I have to solve:

********************
1>.\src\proj-4.7.0\src\pj_init.c(119) : warning C4013: 
'pj_search_initcache' undefined; Assumption: extern with return type int
********************

There are several problems related to "pj_insert_initcache", 
"pj_acquire_lock" and "pj_release_lock".

Is there a solution for that problem? I found nothing so far. With 4.6.1 
everything runs fine :(

Regards,
Matthias


From nhopton at gmail.com  Thu Jan 28 02:36:12 2010
From: nhopton at gmail.com (Nick Hopton)
Date: Thu, 28 Jan 2010 10:36:12 +0000
Subject: [Proj] EPSG:27700
Message-ID: <304bf2491001280236k1ee9edc0i2c8fefc2050e04d1@mail.gmail.com>

Jose wrote:

> I think datum definition is not included in the epsg file when there
> are different sets of parameters or forms of transformation from the
> local datum to WGS84. +datum=OSGB36 corresponds to a given set of
> parameters, which may not be the most appropriate for some
> applications. You can also do the datum transformation using NTv2
> grids instead of Bursa-Wolf transformation (see for example
> http://lists.maptools.org/pipermail/proj/2006-November/002658.html).
> Users are free to combine projection 27700 with their own datum
> transformation. You can have for example:
>
> cs2cs +init=4326 +to +init=27700 +datum=OSGB36
> or
> cs2cs +init=4326 +to +init=27700 +towgs84=.....
> or
> cs2cs +init=4326 +to +init=27700 +nadgrids=c:/england-wales.gsb
>
> Regards

Thanks for this. I think that EPSG: 27700 is specific to the Ordnance
Survey of Great Britain and is meant to stand alone. People using Proj
to project or reproject from or to 27700 will be getting errors in
excess of a hundred metres, which is a large enough error to cause
problems, but not necessarily large enough to be noticed at first
sight.

Regards,
Nick.


From roger at opq.se  Thu Jan 28 05:21:15 2010
From: roger at opq.se (Roger Oberholtzer)
Date: Thu, 28 Jan 2010 14:21:15 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370)
 -towgs84parameters
In-Reply-To: <4B615E18.8090205@uva.nl>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>
	<FAF6E56B26D2044696772EBE89B1535101BDE7B6@posty.carmenta.se>
	<4B59B5A0.4090703@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE7F4@posty.carmenta.se>
	<4B59BE46.8010207@uva.nl>
	<FAF6E56B26D2044696772EBE89B1535101BDE862@posty.carmenta.se>
	<DF42CEC5D1ED4109B03FE73D7487F063@PCHP> <4B608D09.3040006@uva.nl>
	<07E75E8BCCF049B4BFF1B6976A515459@PCHP> <4B60A3A2.9010900@uva.nl>
	<94e91cde1001280020q34d52013ref97a6317143a882@mail.gmail.com>
	<4B615E18.8090205@uva.nl>
Message-ID: <1264684875.17560.34.camel@acme.pacific>

On Thu, 2010-01-28 at 10:51 +0100, Jan Hartmann wrote:
> Hi Thibaut,
> 
> Why did they do this in 2005? In Holland we still use the RD system
> with the Bessel ellipse. 

OOC, how do you configure proj for RD? I am using this (WGS84 Lat/Long
is the source) in the C-API:

 "+proj=sterea "
 "+lat_0=52.15616055555555 "
 "+lon_0=5.38763888888889 "
 "+k=0.9999079 "
 "+x_0=155000 "
 "+y_0=463000 "
 "+ellps=bessel "
 "+towgs84=565.040,49.910,465.840,-0.40939,0.35971,-1.86849,4.0772"
 "+units=m "
 "+no_defs"

I just want to verify that nothing has gone wrong in my library. Bit rot
and all that.

Is there a good (official?) set of test data for RD? Something that has
WGS84 lat/longs, and the corresponding RD northings/eastings.  I can
never have too many tests!


-- 
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696



From gordon.johnston at exxonmobil.com  Thu Jan 28 09:15:47 2010
From: gordon.johnston at exxonmobil.com (gordon.johnston at exxonmobil.com)
Date: Thu, 28 Jan 2010 17:15:47 +0000
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370)
In-Reply-To: <mailman.3.1264698001.5682.proj@lists.maptools.org>
Message-ID: <OFA73747DA.EB121350-ON802576B9.005E0C2E-802576B9.005ED894@exxonmobil.com>

Roger, there are test RD to ETRS89 values included in the European
Coordinate Reference Systems website at

http://www.crs-geo.eu/nn_124392/crseu/EN/CRS__Description/crs-national__node.html?__nnn=true

go to the bottom of the page and follow the verification button.

It also briefly notes that the Belgian Lambert 2005 was only in use for
about 4 months. See:

http://www.crs-geo.eu/nn_124226/crseu/EN/CRS__Description/crs-national__node.html?__nnn=true

BTW the Euro CRS site is best started from here:

http://www.crs-geo.eu/nn_124226/crseu/EN/CRS__Description/crs-national__node.html?__nnn=true

Regards
Gordon Johnston, UK



                                                                           
             proj-request at l                                                
             ists.maptools.                                                
             org                                                        To 
             Sent by:                 proj at lists.maptools.org              
             proj-bounces at l                                             cc 
             ists.maptools.                                                
             org                                                   Subject 
                                      Proj Digest, Vol 68, Issue 20        
                                                                           
             28/01/2010                                                    
             17:00                                                         
                                                                           
                                                                           
             Please respond                                                
                   to                                                      
             proj at lists.map                                                
               tools.org                                                   
                                                                           
                                                                           
                                                                           
                                                                           




Send Proj mailing list submissions to
             proj at lists.maptools.org

To subscribe or unsubscribe via the World Wide Web, visit
             http://lists.maptools.org/mailman/listinfo/proj
or, via email, send a message with subject or body 'help' to
             proj-request at lists.maptools.org

You can reach the person managing the list at
             proj-owner at lists.maptools.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of Proj digest..."


Today's Topics:

   1. Re: Belge 1972 / Belgian Lambert 72        (31370)
      -towgs84parameters (Jan Hartmann)
   2. undefined cache functions (Matthias Schneider)
   3. Re: EPSG:27700 (Nick Hopton)
   4. Re: Belge 1972 / Belgian Lambert 72 (31370)
      -towgs84parameters (Roger Oberholtzer)


----------------------------------------------------------------------

Message: 1
Date: Thu, 28 Jan 2010 10:51:20 +0100
From: Jan Hartmann <j.l.h.hartmann at uva.nl>
Subject: Re: [Proj] Belge 1972 / Belgian Lambert 72          (31370)
             -towgs84parameters
To: "PROJ.4 and general Projections Discussions"
             <proj at lists.maptools.org>
Message-ID: <4B615E18.8090205 at uva.nl>
Content-Type: text/plain; charset="iso-8859-1"

Hi Thibaut,

Why did they do this in 2005? In Holland we still use the RD system with
the Bessel ellipse. Nowadays, there is no problem at all in converting
from whatever projection and datum to WGS84. Before 2005 you had to
convert from Lambert 1972, after that from Lambert 2005, and now you
have to add 500000 to each coordinate. Given that you can convert from
every system, why going to the hassle of changing the datun and zero
point of an existing Lambert system, only to end up with something that
also has te be converted to WGS84?

Jan

On 28-1-2010 9:20, Thibaut Gheysen wrote:
> Hi,
>
> The development of the Lambert coordinate system 2005 follows the
> introduction of ETRS89 in Europe. From 1989 to 2002, the IGN has
> reviewed the national geodetic network using the GPS network. This
> changes has led to the Lambert 2005 projection. For a given location,
> the difference between the coordinates in Lambert 1972 and 2005 are
> relatively low (+ / - 1 kilometer). Considering this small difference,
> when we received map data in Lambert 2005 without the coordinate
> system used has been specified, you might think, if you don't pay too
> much attention, that the data were still in Lambert 1972. Therefore,
> the IGN has added 500 kilometers in X and Y (Lambert 2008) : you see
> thus immediately that the projection system used is no longer the
> Lambert 1972.
>
> Thibaut.
>
>
> 2010/1/27 Jan Hartmann <j.l.h.hartmann at uva.nl
> <mailto:j.l.h.hartmann at uva.nl>>
>
>
>     Nice. Our Belgian friends seem to have changed their national
>     projection. I don't understand this page (Dutch:
>     http://www.ngi.be/FR/FR4-4.shtm; French:
>     http://www.ngi.be/FR/FR2-1-7.shtm, no English need apply). It says:
>
>     "Due to the too small deviation (1 kilometer) between the
>     coordinates of
>     the Lambert 1972 projection and those of the Lambert 2005 projection,
>     the NGI has changed the parameters of the Lambert 2005 projection,
and
>     created the Lambert 2008 projection".
>
>     What they did was just adding 499.000 to both x and y coordinates of
>     Lambert 2005.
>
>     Lambert 1972 is the projection as defined in PROJ's epsg file (nr
>     31370), derived from the EPSG database (coordinate reference nr 411).
>     Its datum is intl (=Hayford). First standard parallel is 51.166667,
>     second standard parallel 49.833333, central parallel 90 (?), central
>     meridian 4.367486666. x_0 = 150000.01256, y_0 = 5400088.4378
>
>     Lambert 2005, as defined on the above page (nothing in the EPSG
>     database): datum GRS80 (=WGS84, approximately). First standard
>     parallel
>     51.166667, second standard parallel 49.833333, central parallel
>     50.7977777, central meridian 4.35916666666. x_0 = 150328, y_0 =
166262
>
>     Lambert 2008 is Lambert 2005 Hi,with 499 km added to both x and y
>     coordinates
>
>     So, without additional information, I really don't see the
>     relationship
>     between the 1972, 2005 and 2008 systems. What's the difference
between
>     1972 and 2005, and why did they add 500 km in 2008? Did they
>     change each
>     and every coordinate on each and every Belgian map in 2005 and are
>     they
>     changing it again in 2008? Has anyone ever seen a Lambert 2005
>     coordinate? They are not in the EPSG database.
>
>     If anyone can make sense of this gobbledygook, I would be happy to
>     know.
>
>     Jan
>
>
>
>
>     On 27-1-2010 20:12, OvV_HN wrote:
>     >
>     > ----- Original Message ----- From: "Jan Hartmann"
>     <j.l.h.hartmann at uva.nl <mailto:j.l.h.hartmann at uva.nl>>
>     > To: "PROJ.4 and general Projections Discussions"
>     > <proj at lists.maptools.org <mailto:proj at lists.maptools.org>>
>     > Cc: "OvV_HN" <ovv at hetnet.nl <mailto:ovv at hetnet.nl>>
>     > Sent: Wednesday, January 27, 2010 7:59 PM
>     > Subject: Re: [Proj] Belge 1972 / Belgian Lambert 72 (31370)
>     > -towgs84parameters
>     >
>     >
>     >> Thanks Oscar, good to know. How did you find this page? Is it
>     >> reachable from within the ngi site or did you find it with Google.
>     >>
>     >> Jan
>     >>
>     >
>     >
>     > The path starting from the Dutch language home page is:
>     > home > know-how > geodetische diensten > Lambert 2008
>     > http://www.ngi.be/NL/NL2-1-7.shtm
>     >
>     > Scroll down to:
>     > "Relatie tussen de geodetische referentiesystemen van 1972 en 2008"
>     > ...
>     > "> uitgebeider schema in pdf"
>     >
>     > This last link goes to the page I mentioned.
>     >
>     >
>     > Oscar van Vlijmen
>     >
>     >
>     _______________________________________________
>     Proj mailing list
>     Proj at lists.maptools.org <mailto:Proj at lists.maptools.org>
>     http://lists.maptools.org/mailman/listinfo/proj
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL:
http://lists.maptools.org/pipermail/proj/attachments/20100128/052c46d9/attachment.html


------------------------------

Message: 2
Date: Thu, 28 Jan 2010 11:20:15 +0100
From: Matthias Schneider <schneider.matthias at tu-ilmenau.de>
Subject: [Proj] undefined cache functions
To: "PROJ.4 and general Projections Discussions"
             <proj at lists.maptools.org>
Message-ID: <4B6164DF.7070903 at tu-ilmenau.de>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed

Hi,

when I try to build the proj4 4.7.0 with Visual Studio 2005 I got some
warnings which I have to solve:

********************
1>.\src\proj-4.7.0\src\pj_init.c(119) : warning C4013:
'pj_search_initcache' undefined; Assumption: extern with return type int
********************

There are several problems related to "pj_insert_initcache",
"pj_acquire_lock" and "pj_release_lock".

Is there a solution for that problem? I found nothing so far. With 4.6.1
everything runs fine :(

Regards,
Matthias


------------------------------

Message: 3
Date: Thu, 28 Jan 2010 10:36:12 +0000
From: Nick Hopton <nhopton at gmail.com>
Subject: Re: [Proj] EPSG:27700
To: proj at lists.maptools.org
Message-ID:
             <304bf2491001280236k1ee9edc0i2c8fefc2050e04d1 at mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Jose wrote:

> I think datum definition is not included in the epsg file when there
> are different sets of parameters or forms of transformation from the
> local datum to WGS84. +datum=OSGB36 corresponds to a given set of
> parameters, which may not be the most appropriate for some
> applications. You can also do the datum transformation using NTv2
> grids instead of Bursa-Wolf transformation (see for example
> http://lists.maptools.org/pipermail/proj/2006-November/002658.html).
> Users are free to combine projection 27700 with their own datum
> transformation. You can have for example:
>
> cs2cs +init=4326 +to +init=27700 +datum=OSGB36
> or
> cs2cs +init=4326 +to +init=27700 +towgs84=.....
> or
> cs2cs +init=4326 +to +init=27700 +nadgrids=c:/england-wales.gsb
>
> Regards

Thanks for this. I think that EPSG: 27700 is specific to the Ordnance
Survey of Great Britain and is meant to stand alone. People using Proj
to project or reproject from or to 27700 will be getting errors in
excess of a hundred metres, which is a large enough error to cause
problems, but not necessarily large enough to be noticed at first
sight.

Regards,
Nick.


------------------------------

Message: 4
Date: Thu, 28 Jan 2010 14:21:15 +0100
From: Roger Oberholtzer <roger at opq.se>
Subject: Re: [Proj] Belge 1972 / Belgian Lambert 72 (31370)
             -towgs84parameters
To: "PROJ.4 and general Projections Discussions"
             <proj at lists.maptools.org>
Message-ID: <1264684875.17560.34.camel at acme.pacific>
Content-Type: text/plain; charset="UTF-8"

On Thu, 2010-01-28 at 10:51 +0100, Jan Hartmann wrote:
> Hi Thibaut,
>
> Why did they do this in 2005? In Holland we still use the RD system
> with the Bessel ellipse.

OOC, how do you configure proj for RD? I am using this (WGS84 Lat/Long
is the source) in the C-API:

 "+proj=sterea "
 "+lat_0=52.15616055555555 "
 "+lon_0=5.38763888888889 "
 "+k=0.9999079 "
 "+x_0=155000 "
 "+y_0=463000 "
 "+ellps=bessel "
 "+towgs84=565.040,49.910,465.840,-0.40939,0.35971,-1.86849,4.0772"
 "+units=m "
 "+no_defs"

I just want to verify that nothing has gone wrong in my library. Bit rot
and all that.

Is there a good (official?) set of test data for RD? Something that has
WGS84 lat/longs, and the corresponding RD northings/eastings.  I can
never have too many tests!


--
Roger Oberholtzer

OPQ Systems / Ramb?ll RST

Ramb?ll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696



------------------------------

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

End of Proj Digest, Vol 68, Issue 20
************************************




From j.l.h.hartmann at uva.nl  Thu Jan 28 11:31:58 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu, 28 Jan 2010 20:31:58 +0100
Subject: [Proj] Belge 1972 / Belgian Lambert 72 (31370)
	-towgs84parameters
In-Reply-To: <1264684875.17560.34.camel@acme.pacific>
References: <94e91cde1001200118x16b58727x21ce687c3598e4d3@mail.gmail.com>	<FAF6E56B26D2044696772EBE89B1535101BDE7B6@posty.carmenta.se>	<4B59B5A0.4090703@uva.nl>	<FAF6E56B26D2044696772EBE89B1535101BDE7F4@posty.carmenta.se>	<4B59BE46.8010207@uva.nl>	<FAF6E56B26D2044696772EBE89B1535101BDE862@posty.carmenta.se>	<DF42CEC5D1ED4109B03FE73D7487F063@PCHP>
	<4B608D09.3040006@uva.nl>	<07E75E8BCCF049B4BFF1B6976A515459@PCHP>
	<4B60A3A2.9010900@uva.nl>	<94e91cde1001280020q34d52013ref97a6317143a882@mail.gmail.com>	<4B615E18.8090205@uva.nl>
	<1264684875.17560.34.camel@acme.pacific>
Message-ID: <4B61E62E.3070507@uva.nl>

Hi Roger,

For RD I use: +proj=sterea +lat_0=52.15616055555555 
+lon_0=5.38763888888889 +k=0.999908 +x_0=155000 +y_0=463000 
+ellps=bessel +units=m 
+towgs84=565.2369,50.0087,465.658,-0.406857330322398,0.350732676542563,-1.8703473836068,4.0812 
+no_defs

Yours is a older, slightly different version from the EPSG database. In 
practice, it doesn't make much difference, both are accurate up to about 
25 cm.

For a converter between Dutch and a number of neighboring projections, see:

http://www.hydro.nl/pgs/en/pctrans_en.htm/


On 28-1-2010 14:21, Roger Oberholtzer wrote:
> OOC, how do you configure proj for RD? I am using this (WGS84 Lat/Long
> is the source) in the C-API:
>
>   "+proj=sterea "
>   "+lat_0=52.15616055555555 "
>   "+lon_0=5.38763888888889 "
>   "+k=0.9999079 "
>   "+x_0=155000 "
>   "+y_0=463000 "
>   "+ellps=bessel "
>   "+towgs84=565.040,49.910,465.840,-0.40939,0.35971,-1.86849,4.0772"
>   "+units=m "
>   "+no_defs"
>
> I just want to verify that nothing has gone wrong in my library. Bit rot
> and all that.
>
> Is there a good (official?) set of test data for RD? Something that has
> WGS84 lat/longs, and the corresponding RD northings/eastings.  I can
> never have too many tests!
>
>
>    


