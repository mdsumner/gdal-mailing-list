From sgh at sgh.dk  Mon Jul  1 00:03:09 2019
From: sgh at sgh.dk (=?ISO-8859-1?Q?S=F8ren?= Holm)
Date: Mon, 01 Jul 2019 09:03:09 +0200
Subject: [PROJ] Regarding deprecated API
In-Reply-To: <2273182F-6D70-4FA7-99C7-F7D137512015@sdfe.dk>
References: <3138816.tcK9HqR71F@koontz>
 <2273182F-6D70-4FA7-99C7-F7D137512015@sdfe.dk>
Message-ID: <4808391.QQE4zgiPLN@koontz>

Thanks Kristian ...... I must be blind not seeing that :)

mandag den 1. juli 2019 08.28.23 CEST skrev Kristian Evers:
> Søren,
> 
> Take a look at https://proj.org/development/migration.html.
> 
> /Kristian
> 
> 
> On 1 Jul 2019, at 08:19, Søren Holm <sgh at sgh.dk<mailto:sgh at sgh.dk>> wrote:
> 
> Hi
> 
> I can't seem to find and description of the actual current API in relation
> to
 the deprecated API.
> 
> My current use of the old API is quite limited. Currently I use
> pj_init_plus
 for the initialization, pj_transform for the transforms and
> pj_strerrno. 
> Are thee there any guidelines available for migrating?
> 
> Thanks.
> 
> --
> Søren Holm
> 
> 
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org<mailto:PROJ at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/proj
> 


-- 
Søren Holm



From kreve at sdfe.dk  Mon Jul  1 00:25:00 2019
From: kreve at sdfe.dk (Kristian Evers)
Date: Mon, 1 Jul 2019 07:25:00 +0000
Subject: [PROJ] Announcing PROJ 6.1.1
Message-ID: <8AFCC05B-8768-4012-90F4-8DD2A3377E05@sdfe.dk>

On behalf of the PROJ development team I am happy to announce the
release of PROJ 6.1.1. This release is a patch release which fixes
9 bugs and updates the EPSG database to the most recent version.
See release notes below for details.

Download the source distribution here: 

  https://download.osgeo.org/proj/proj-6.1.1.tar.gz
  https://download.osgeo.org/proj/proj-6.1.1.zip



6.1.1 Release Notes
-------------------

 Updates
 -------

 o Update EPSG registry to version 9.6.3 (1485)


 Bug Fixes
 ---------

 o Take the passed authority into account when identifying
   objects (#1466)

 o Avoid exception when transforming from NAD83 to projected
   CRS using NAD83(2011) (#1477)

 o Avoid off-by-one reading of name argument if name of resource
   file has length 1 (#1489)

 o Do not include PROJ_LIB in proj_info().searchpath when context
   search path is set (#1498)

 o Use  correct delimeter for the current platform when parsing
   PROJ_LIB (#1497)

 o Do not confuse 'ID74' CRS with WKT2 ID[] node (#1506)

 o WKT1 importer: do case insensitive comparison for axis
   direction (#1509)

 o Avoid compile errors on GCC 4.9.3 (#1512)

 o Make sure that pipelines including +proj=ob_tran can be
   created (#1526)


 THANKS TO
 ------------

 Version 6.1.1 is made possible by the following contributors:


 Alan D. Snow
 Paul Menzel
 Mateusz Łoskot
 Bas Couwenberg
 Peter Limkilde Svendsen
 Mike Taves
 Howard Butler
 Nyall Dawson
 Andrew Bell
 Kristian Evers
 Even Rouault

From kreve at sdfe.dk  Mon Jul  8 03:25:45 2019
From: kreve at sdfe.dk (Kristian Evers)
Date: Mon, 8 Jul 2019 10:25:45 +0000
Subject: [PROJ] RFC4: PROJ Java Native Interface overhaul
Message-ID: <2E885BB293AF0448A0181138489E9A0EB15E5EDE@S000014.PROD.SITAD.DK>

All,

I have secured funding for a much needed overhaul of the JNI bindings to PROJ.
In collaboration with Martin Desruisseaux I have written an RFC that details the
process. You can find it on GitHub here: https://github.com/OSGeo/PROJ/pull/1551.

The RFC is obviously still in draft mode and your suggestions, questions and general
feedback is appreciated and will be incorporated in the final RFC that will be
submitted to the PSC. I plan on putting the RFC up for a PSC vote next week so please
provide feedback before then.

/Kristian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190708/1536a9ea/attachment.html>

From even.rouault at spatialys.com  Mon Jul  8 03:57:16 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 08 Jul 2019 12:57:16 +0200
Subject: [PROJ] CRS JSON
Message-ID: <5392311.puaqCvg7Uy@even-i700>

Hi,

following a recent Tweeter discussion, I've taken a crack at implementing a 
JSON representation for CRS objects, based on the ISO_19111:2019 
abstract model and compatible with WKT2:2019.
See my proposal in https://github.com/OSGeo/PROJ/pull/1547

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From helene.touyeras-ext at onf.fr  Tue Jul  9 02:15:45 2019
From: helene.touyeras-ext at onf.fr (TOUYERAS Helene (ext))
Date: Tue, 9 Jul 2019 09:15:45 +0000
Subject: [PROJ] EPSG:5490 - How do I know if it is included in PROJ?
Message-ID: <acb7302fa194476aa6eee0b3ace7891a@SXCH98-002.arbre.foret.onf.fr>


Good morning proj users,

Apologies if this is extra-basic : as a newbie, I was looking for a list of projections covered by PROJ, and can't find any so far.

More specifically, I was wondering whether the horizontal system EPSG:5490 (RGAF09) is covered by PROJ - I guess it is, but I cannot confirm that it is (and need to prove that it is... or is not!).


Many thanks for your help & pointers!

With kind regards,

Hélène.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190709/0b7deb74/attachment.html>

From even.rouault at spatialys.com  Tue Jul  9 02:57:46 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 09 Jul 2019 11:57:46 +0200
Subject: [PROJ] EPSG:5490 - How do I know if it is included in PROJ?
In-Reply-To: <acb7302fa194476aa6eee0b3ace7891a@SXCH98-002.arbre.foret.onf.fr>
References: <acb7302fa194476aa6eee0b3ace7891a@SXCH98-002.arbre.foret.onf.fr>
Message-ID: <6762908.1dzGD2RlPm@even-i700>

Hélène,

> 
> Apologies if this is extra-basic : as a newbie, I was looking for a list of
> projections covered by PROJ, and can't find any so far.

In a general way, this might depend on the PROJ version you are considering.

For PROJ 5.2 or older, you have to look at the epsg file:
https://github.com/OSGeo/PROJ/blob/5.2/nad/epsg

For PROJ 6 or newer, in one of those files depending on the nature of the CRS:
https://github.com/OSGeo/PROJ/blob/master/data/sql/geodetic_crs.sql
https://github.com/OSGeo/PROJ/blob/master/data/sql/projected_crs.sql

Or use the projinfo utility:

projinfo EPSG:5490
PROJ.4 string:
+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs 
+type=crs

WKT2_2018 string:
PROJCRS["RGAF09 / UTM zone 20N",
    BASEGEOGCRS["RGAF09",
        DATUM["Reseau Geodesique des Antilles Francaises 2009",
            ELLIPSOID["GRS 1980",6378137,298.257222101,
                LENGTHUNIT["metre",1]]],
        PRIMEM["Greenwich",0,
            ANGLEUNIT["degree",0.0174532925199433]],
        ID["EPSG",5489]],
    CONVERSION["UTM zone 20N",
        METHOD["Transverse Mercator",
            ID["EPSG",9807]],
        PARAMETER["Latitude of natural origin",0,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8801]],
        PARAMETER["Longitude of natural origin",-63,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8802]],
        PARAMETER["Scale factor at natural origin",0.9996,
            SCALEUNIT["unity",1],
            ID["EPSG",8805]],
        PARAMETER["False easting",500000,
            LENGTHUNIT["metre",1],
            ID["EPSG",8806]],
        PARAMETER["False northing",0,
            LENGTHUNIT["metre",1],
            ID["EPSG",8807]]],
    CS[Cartesian,2],
        AXIS["(E)",east,
            ORDER[1],
            LENGTHUNIT["metre",1]],
        AXIS["(N)",north,
            ORDER[2],
            LENGTHUNIT["metre",1]],
    USAGE[
        SCOPE["unknown"],
        AREA["Caribbean - French Antilles west of 60°W"],
        BBOX[14.08,-63.66,18.32,-60]],
    ID["EPSG",5490]]

> More specifically, I was wondering whether the horizontal system EPSG:5490
> (RGAF09) is covered by PROJ -

The answer is yes for all recent enough PROJ versions.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From helene.touyeras-ext at onf.fr  Tue Jul  9 03:05:50 2019
From: helene.touyeras-ext at onf.fr (TOUYERAS Helene (ext))
Date: Tue, 9 Jul 2019 10:05:50 +0000
Subject: [PROJ] EPSG:5490 - How do I know if it is included in PROJ?
In-Reply-To: <6762908.1dzGD2RlPm@even-i700>
References: <acb7302fa194476aa6eee0b3ace7891a@SXCH98-002.arbre.foret.onf.fr>
 <6762908.1dzGD2RlPm@even-i700>
Message-ID: <807dea3cd10d4ef587222ceef546e831@SXCH98-002.arbre.foret.onf.fr>


Many thanks for the very complete and very fast reply, Even!


-----Message d'origine-----
De : Even Rouault <even.rouault at spatialys.com> 
Envoyé : mardi 9 juillet 2019 11:58
À : proj at lists.osgeo.org
Cc : TOUYERAS Helene (ext) <helene.touyeras-ext at onf.fr>
Objet : Re: [PROJ] EPSG:5490 - How do I know if it is included in PROJ?

Hélène,

> 
> Apologies if this is extra-basic : as a newbie, I was looking for a 
> list of projections covered by PROJ, and can't find any so far.

In a general way, this might depend on the PROJ version you are considering.

For PROJ 5.2 or older, you have to look at the epsg file:
https://github.com/OSGeo/PROJ/blob/5.2/nad/epsg

For PROJ 6 or newer, in one of those files depending on the nature of the CRS:
https://github.com/OSGeo/PROJ/blob/master/data/sql/geodetic_crs.sql
https://github.com/OSGeo/PROJ/blob/master/data/sql/projected_crs.sql

Or use the projinfo utility:

projinfo EPSG:5490
PROJ.4 string:
+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs 
+type=crs

WKT2_2018 string:
PROJCRS["RGAF09 / UTM zone 20N",
    BASEGEOGCRS["RGAF09",
        DATUM["Reseau Geodesique des Antilles Francaises 2009",
            ELLIPSOID["GRS 1980",6378137,298.257222101,
                LENGTHUNIT["metre",1]]],
        PRIMEM["Greenwich",0,
            ANGLEUNIT["degree",0.0174532925199433]],
        ID["EPSG",5489]],
    CONVERSION["UTM zone 20N",
        METHOD["Transverse Mercator",
            ID["EPSG",9807]],
        PARAMETER["Latitude of natural origin",0,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8801]],
        PARAMETER["Longitude of natural origin",-63,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8802]],
        PARAMETER["Scale factor at natural origin",0.9996,
            SCALEUNIT["unity",1],
            ID["EPSG",8805]],
        PARAMETER["False easting",500000,
            LENGTHUNIT["metre",1],
            ID["EPSG",8806]],
        PARAMETER["False northing",0,
            LENGTHUNIT["metre",1],
            ID["EPSG",8807]]],
    CS[Cartesian,2],
        AXIS["(E)",east,
            ORDER[1],
            LENGTHUNIT["metre",1]],
        AXIS["(N)",north,
            ORDER[2],
            LENGTHUNIT["metre",1]],
    USAGE[
        SCOPE["unknown"],
        AREA["Caribbean - French Antilles west of 60°W"],
        BBOX[14.08,-63.66,18.32,-60]],
    ID["EPSG",5490]]

> More specifically, I was wondering whether the horizontal system 
> EPSG:5490
> (RGAF09) is covered by PROJ -

The answer is yes for all recent enough PROJ versions.

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com

From cameron.shorter at gmail.com  Fri Jul 12 05:32:46 2019
From: cameron.shorter at gmail.com (Cameron Shorter)
Date: Fri, 12 Jul 2019 22:32:46 +1000
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
Message-ID: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>

Hi folks,
I've incorporated a lot of feeback from people on this list, and from the
Australian geospatial people and have restarted the Static/Dynamic
Webmapping Problem.

Comments are encouraged.

If commenting, please log so we know who says what. Please don't change the
text as it quickly becomes difficult to read.

I'm very mindful that this is a challenging problem, requiring
collaboration to solve, and we still have quite a bit of work in achieving
this.

Doc here:
https://docs.google.com/document/d/1A4Q8-863fKQ-BJzh0ruz7bKvk3itiy8LmmWrwUR1J9g/edit#heading=h.nn4r38g65fhf

Original problem statement:

>* > Our Australian spatial data users are about to face a systematic mismatch **challenge when trying to use multiple static datums (GDA2020, GDA94) with **the dynamic datum (WGS84). At the moment, it is government agencies** grappling with the problem, but it is about to become a mainstream issue.*

Cheers, Cameron


-- 
Cameron Shorter
Technology Demystifier
Open Technologies and Geospatial Consultant

M +61 (0) 419 142 254
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190712/ebd70cd5/attachment.html>

From cameron.shorter at gmail.com  Fri Jul 12 05:38:15 2019
From: cameron.shorter at gmail.com (Cameron Shorter)
Date: Fri, 12 Jul 2019 22:38:15 +1000
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
Message-ID: <CABqeU+hRn98VCDAGyfjZuedGBHWVb1P663QoUYKnTwOxM=zp5g@mail.gmail.com>

Oops, sorry, gave the wrong URL for the working document. Use this one:
https://docs.google.com/document/d/15uBX2qICODRkiHXeksT0zEy6TuysanIxuc4anV0o5F0/edit#heading=h.nn4r38g65fhf

On Fri, 12 Jul 2019 at 22:32, Cameron Shorter <cameron.shorter at gmail.com>
wrote:

> Hi folks,
> I've incorporated a lot of feeback from people on this list, and from the
> Australian geospatial people and have restarted the Static/Dynamic
> Webmapping Problem.
>
> Comments are encouraged.
>
> If commenting, please log so we know who says what. Please don't change
> the text as it quickly becomes difficult to read.
>
> I'm very mindful that this is a challenging problem, requiring
> collaboration to solve, and we still have quite a bit of work in achieving
> this.
>
> Doc here:
>
> https://docs.google.com/document/d/1A4Q8-863fKQ-BJzh0ruz7bKvk3itiy8LmmWrwUR1J9g/edit#heading=h.nn4r38g65fhf
>
> Original problem statement:
>
> >* > Our Australian spatial data users are about to face a systematic mismatch **challenge when trying to use multiple static datums (GDA2020, GDA94) with **the dynamic datum (WGS84). At the moment, it is government agencies** grappling with the problem, but it is about to become a mainstream issue.*
>
> Cheers, Cameron
>
>
> --
> Cameron Shorter
> Technology Demystifier
> Open Technologies and Geospatial Consultant
>
> M +61 (0) 419 142 254
>
>
>
>

-- 
Cameron Shorter
Technology Demystifier
Open Technologies and Geospatial Consultant

M +61 (0) 419 142 254
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190712/5326537d/attachment.html>

From cameron.shorter at gmail.com  Sun Jul 14 16:59:55 2019
From: cameron.shorter at gmail.com (Cameron Shorter)
Date: Mon, 15 Jul 2019 09:59:55 +1000
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
Message-ID: <CABqeU+hcqmqcBwOciG-61U=ghGwVaLfZ8o2FDYwPMqoDzHZUMQ@mail.gmail.com>

I'm a little nervous that I've overwhelmed people by the number of pages
I've used to describe the web-mapping misaligned maps problem.

The key message I'm hoping to get feedback on is:

* We are currently using the dynamic WGS84 datum as if it were a static
datum (locked to a different epoch in different regions).
* This appears to be suitable for current web mapping requirements.
* Realigning static and dynamic datums (as started by Australia, with
others to follow) is tripping a map misalignment problem.

Proposed solution:
* Define an EPSG code which describes current practice of a static datum,
which is fixed to different epochs in different regions.
* Move to using the new EPSG code in web-mapping.

Question to techies:
* Is it technically possible to create a reference frame realisation
(datum) which is fixed to different epochs in different regions?

Warm regards, Cameron

On Fri, 12 Jul 2019 at 22:32, Cameron Shorter <cameron.shorter at gmail.com>
wrote:

> Hi folks,
> I've incorporated a lot of feeback from people on this list, and from the
> Australian geospatial people and have restarted the Static/Dynamic
> Webmapping Problem.
>
> Comments are encouraged.
>
> If commenting, please log so we know who says what. Please don't change
> the text as it quickly becomes difficult to read.
>
> I'm very mindful that this is a challenging problem, requiring
> collaboration to solve, and we still have quite a bit of work in achieving
> this.
>
> Doc here:
>
> https://docs.google.com/document/d/1A4Q8-863fKQ-BJzh0ruz7bKvk3itiy8LmmWrwUR1J9g/edit#heading=h.nn4r38g65fhf
>
> Original problem statement:
>
> >* > Our Australian spatial data users are about to face a systematic mismatch **challenge when trying to use multiple static datums (GDA2020, GDA94) with **the dynamic datum (WGS84). At the moment, it is government agencies** grappling with the problem, but it is about to become a mainstream issue.*
>
> Cheers, Cameron
>
>
> --
> Cameron Shorter
> Technology Demystifier
> Open Technologies and Geospatial Consultant
>
> M +61 (0) 419 142 254
>
>
>
>

-- 
Cameron Shorter
Technology Demystifier
Open Technologies and Geospatial Consultant

M +61 (0) 419 142 254
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190715/2d4ea82e/attachment.html>

From martin.desruisseaux at geomatys.com  Mon Jul 15 04:17:31 2019
From: martin.desruisseaux at geomatys.com (Martin Desruisseaux)
Date: Mon, 15 Jul 2019 13:17:31 +0200
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <CABqeU+hcqmqcBwOciG-61U=ghGwVaLfZ8o2FDYwPMqoDzHZUMQ@mail.gmail.com>
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <CABqeU+hcqmqcBwOciG-61U=ghGwVaLfZ8o2FDYwPMqoDzHZUMQ@mail.gmail.com>
Message-ID: <63f47524-ccab-489f-f949-5165fadf4dce@geomatys.com>

Hello Cameron

Le 15/07/2019 à 01:59, Cameron Shorter a écrit :

> * We are currently using the dynamic WGS84 datum as if it were a
> static datum (locked to a different epoch in different regions).
> * This appears to be suitable for current web mapping requirements.
> * Realigning static and dynamic datums (as started by Australia, with
> others to follow) is tripping a map misalignment problem.

I'm not sure which "dynamic WGS84 datum" we are talking about. If we are
talking about EPSG::4326, in my understanding this is now an "ensemble
datum", i.e. a group of many different WGS84 datum (there is at least 6
different WGS84 datum today) to be considered as equivalent for
applications that do not need an accuracy better than a few meters. An
"ensemble datum" is not the same as a "static datum" in the sense that
it does not mean "a datum that does not move", but rather "we don't
really know which datum it is, but we don't need to care if the desired
accuracy is only a few meters".

I'm also not sure what me mean by "suitable for current web mapping
requirements". Do we we mean "an accuracy of a few meters is
sufficient"? If yes, then this requirement is addressed by above-cited
"ensemble datum", which is a new concept introduced in ISO 19111:2019.


> Question to techies:
> * Is it technically possible to create a reference frame realisation
> (datum) which is fixed to different epochs in different regions?

One implication of this approach would be that coordinate operations
would need to identify in which zone (e.g. using a R-Tree) are located
the coordinate values to transform, which is potentially a costly
operation. Another issue is that it would introduce discontinuities at
the frontier between different zones. It is possible that those
inconvenient would bring bigger problems than the problem we are trying
to solve.

    Regards,

        Martin




From kreve at sdfe.dk  Mon Jul 15 04:43:47 2019
From: kreve at sdfe.dk (Kristian Evers)
Date: Mon, 15 Jul 2019 11:43:47 +0000
Subject: [PROJ] Motion: Accept RFC4 (PROJ JNI Overhaul)
Message-ID: <3771054cac8145f7b6ebaf57f858e9cd@sdfe.dk>

RFC4 about updating the Java bindings for PROJ has now been up for review
for a week [0]. Some clarification has been given in the comments on GitHub
but no changes has been made to the actual RFC.

I hereby motion that the RFC is accepted. I'll start with my +1.

/Kristian

[0] https://github.com/OSGeo/PROJ/pull/1551
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190715/0044973a/attachment.html>

From gdt at lexort.com  Mon Jul 15 04:58:21 2019
From: gdt at lexort.com (Greg Troxel)
Date: Mon, 15 Jul 2019 07:58:21 -0400
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <CABqeU+hcqmqcBwOciG-61U=ghGwVaLfZ8o2FDYwPMqoDzHZUMQ@mail.gmail.com>
 (Cameron Shorter's message of "Mon, 15 Jul 2019 09:59:55 +1000")
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <CABqeU+hcqmqcBwOciG-61U=ghGwVaLfZ8o2FDYwPMqoDzHZUMQ@mail.gmail.com>
Message-ID: <rmi1ryrh5lu.fsf@s1.lexort.com>

  I'm a little nervous that I've overwhelmed people by the number of pages
  I've used to describe the web-mapping misaligned maps problem.

It might also help to have your notes in plain text and actually send
them to the list, after editing for minimum length :-)


I can certainly see the issues of datum epoch in high precision data,
but I'm having a little trouble following the linking of "web mapping"
into this.

Are you saying that the datum labeling is correct in the underlying
data, and the only issue is in sending it across web-type interfaces,
due to lack of codepoints?

Are you expecting coordinates for objects to have velocities as well as
xyz/llh values?

Is this at all related to questions lIke "Openstreetmap says they use
"WGS84" coordinates for objects.  What does that really mean?".  (And
there are similar questions for other databases, with the addition or
"but we can't actually see the underlying data so this is even harder to
talk about".)


From kreve at sdfe.dk  Mon Jul 15 07:20:00 2019
From: kreve at sdfe.dk (Kristian Evers)
Date: Mon, 15 Jul 2019 14:20:00 +0000
Subject: [PROJ] Motion: Accept RFC4 (PROJ JNI Overhaul)
In-Reply-To: <CACmBxyt1_xBLmraap6tmV1+nFy=+j5uDHM=PASqL1L0oUHFb6g@mail.gmail.com>
References: <3771054cac8145f7b6ebaf57f858e9cd@sdfe.dk>
 <CACmBxyt1_xBLmraap6tmV1+nFy=+j5uDHM=PASqL1L0oUHFb6g@mail.gmail.com>
Message-ID: <613ed2cf9ed347f4a0ff1421fbf8f3dd@sdfe.dk>

Don’t worry, I seem to have submitted the draft in prime vacationing time. Howard has also just caught up today and provided some useful insights which may result in changes to the RFC. Looking forward to your input!

/Kristian

From: Kurt Schwehr <schwehr at gmail.com>
Sent: 15. juli 2019 16:15
To: Kristian Evers <kreve at sdfe.dk>
Subject: Re: [PROJ] Motion: Accept RFC4 (PROJ JNI Overhaul)

Hey,. I will read the RFC in the next couple hours.  Sorry for not being up on these things.

On Mon, Jul 15, 2019, 4:43 AM Kristian Evers <kreve at sdfe.dk<mailto:kreve at sdfe.dk>> wrote:
RFC4 about updating the Java bindings for PROJ has now been up for review
for a week [0]. Some clarification has been given in the comments on GitHub
but no changes has been made to the actual RFC.

I hereby motion that the RFC is accepted. I’ll start with my +1.

/Kristian

[0] https://github.com/OSGeo/PROJ/pull/1551
_______________________________________________
PROJ mailing list
PROJ at lists.osgeo.org<mailto:PROJ at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190715/deba0a36/attachment-0001.html>

From schwehr at gmail.com  Mon Jul 15 08:18:17 2019
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 15 Jul 2019 08:18:17 -0700
Subject: [PROJ] Motion: Accept RFC4 (PROJ JNI Overhaul)
In-Reply-To: <613ed2cf9ed347f4a0ff1421fbf8f3dd@sdfe.dk>
References: <3771054cac8145f7b6ebaf57f858e9cd@sdfe.dk>
 <CACmBxyt1_xBLmraap6tmV1+nFy=+j5uDHM=PASqL1L0oUHFb6g@mail.gmail.com>
 <613ed2cf9ed347f4a0ff1421fbf8f3dd@sdfe.dk>
Message-ID: <CACmBxysDgikSPPswuY9Wng325MSquMT=8DWbw2WTaKvAU2A5MQ@mail.gmail.com>

+1 Kurt

And +1 to all who comment in the PR.  I'll add my reason for the +1 in the
PR.

On Mon, Jul 15, 2019 at 7:20 AM Kristian Evers <kreve at sdfe.dk> wrote:

> Don’t worry, I seem to have submitted the draft in prime vacationing time.
> Howard has also just caught up today and provided some useful insights
> which may result in changes to the RFC. Looking forward to your input!
>
>
>
> /Kristian
>
>
>
> *From:* Kurt Schwehr <schwehr at gmail.com>
> *Sent:* 15. juli 2019 16:15
> *To:* Kristian Evers <kreve at sdfe.dk>
> *Subject:* Re: [PROJ] Motion: Accept RFC4 (PROJ JNI Overhaul)
>
>
>
> Hey,. I will read the RFC in the next couple hours.  Sorry for not being
> up on these things.
>
>
>
> On Mon, Jul 15, 2019, 4:43 AM Kristian Evers <kreve at sdfe.dk> wrote:
>
> RFC4 about updating the Java bindings for PROJ has now been up for review
>
> for a week [0]. Some clarification has been given in the comments on GitHub
>
> but no changes has been made to the actual RFC.
>
>
>
> I hereby motion that the RFC is accepted. I’ll start with my +1.
>
>
>
> /Kristian
>
>
>
> [0] https://github.com/OSGeo/PROJ/pull/1551
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190715/ba1c6626/attachment.html>

From nyall.dawson at gmail.com  Mon Jul 15 15:30:57 2019
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 16 Jul 2019 08:30:57 +1000
Subject: [PROJ] Proj 6.2 - release date fixed?
Message-ID: <CAB28AsgYeFHJKcpmG1eipjmR+VyKfUjdWrpqVR8Q3ki8Oz0vFw@mail.gmail.com>

Hi list,

Are proj release dates set in stone? Looking at the milestones on
github, I see that 6.2 is targeted for September. Is there any chance
this could be moved forward?

I'd like to push the QGIS Windows and Macos builds to use proj 6 (and
gdal 3) after the upcoming QGIS 3.8.1 patch release (due later this
week), so that we get maximum testing and feedback prior to the final
3.10 release (and just because things are so much better in the proj 6
world). While we could do this using the current proj 6.1 release, the
user experience is MUCH improved with 6.2 due to the availability of
scope and remark data.

Sooo.... any chance this schedule is flexible?

Regards,
Nyall

From nick_mein at trimble.com  Mon Jul 15 19:05:12 2019
From: nick_mein at trimble.com (Nick Mein)
Date: Tue, 16 Jul 2019 14:05:12 +1200
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <rmi1ryrh5lu.fsf@s1.lexort.com>
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <CABqeU+hcqmqcBwOciG-61U=ghGwVaLfZ8o2FDYwPMqoDzHZUMQ@mail.gmail.com>
 <rmi1ryrh5lu.fsf@s1.lexort.com>
Message-ID: <CAF3Sn4WzhosiYk0ahhoPW-35eAgHPZoZ7UXbwcET+OW=W1NXOQ@mail.gmail.com>

Well put Greg.

Cameron is correct that Australia is encountering issues earlier than (most
of?) the rest of the world, due to the GDA94 -> GDA2020 datum modernisation
program. The USA is going to encounter the same issues with the NSRS 2022
datum modernisation.
But they are not intractable issues. If you have one (high precision)
dataset that is GDA94 and another (high precision) dataset is GDA2020 then
you can combine them, using one of the transformations published on
https://www.icsm.gov.au/datum/gda-transformation-products-and-tools. Since
velocities in both GDA94 and GDA2020 are virtually zero, you don't need to
know the epoch of measurement.

If you have a dataset that is "WGS84", then who knows what you will get.

Regards,
Nick.

On Tue, 16 Jul 2019 at 00:04, Greg Troxel <gdt at lexort.com> wrote:

>   I'm a little nervous that I've overwhelmed people by the number of pages
>   I've used to describe the web-mapping misaligned maps problem.
>
> It might also help to have your notes in plain text and actually send
> them to the list, after editing for minimum length :-)
>
>
> I can certainly see the issues of datum epoch in high precision data,
> but I'm having a little trouble following the linking of "web mapping"
> into this.
>
> Are you saying that the datum labeling is correct in the underlying
> data, and the only issue is in sending it across web-type interfaces,
> due to lack of codepoints?
>
> Are you expecting coordinates for objects to have velocities as well as
> xyz/llh values?
>
> Is this at all related to questions lIke "Openstreetmap says they use
> "WGS84" coordinates for objects.  What does that really mean?".  (And
> there are similar questions for other databases, with the addition or
> "but we can't actually see the underlying data so this is even harder to
> talk about".)
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190716/66cb42a0/attachment.html>

From kreve at sdfe.dk  Mon Jul 15 23:02:35 2019
From: kreve at sdfe.dk (Kristian Evers)
Date: Tue, 16 Jul 2019 06:02:35 +0000
Subject: [PROJ] Proj 6.2 - release date fixed?
In-Reply-To: <CAB28AsgYeFHJKcpmG1eipjmR+VyKfUjdWrpqVR8Q3ki8Oz0vFw@mail.gmail.com>
References: <CAB28AsgYeFHJKcpmG1eipjmR+VyKfUjdWrpqVR8Q3ki8Oz0vFw@mail.gmail.com>
Message-ID: <D549F094-8A02-4EC4-9D6F-DEE0F8A96E1E@sdfe.dk>

Nyall,

When would you propose to have the release instead?

/Kristian

> On 16 Jul 2019, at 00:30, Nyall Dawson <nyall.dawson at gmail.com> wrote:
> 
> Hi list,
> 
> Are proj release dates set in stone? Looking at the milestones on
> github, I see that 6.2 is targeted for September. Is there any chance
> this could be moved forward?
> 
> I'd like to push the QGIS Windows and Macos builds to use proj 6 (and
> gdal 3) after the upcoming QGIS 3.8.1 patch release (due later this
> week), so that we get maximum testing and feedback prior to the final
> 3.10 release (and just because things are so much better in the proj 6
> world). While we could do this using the current proj 6.1 release, the
> user experience is MUCH improved with 6.2 due to the availability of
> scope and remark data.
> 
> Sooo.... any chance this schedule is flexible?
> 
> Regards,
> Nyall
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj


From nyall.dawson at gmail.com  Mon Jul 15 23:04:18 2019
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 16 Jul 2019 16:04:18 +1000
Subject: [PROJ] Proj 6.2 - release date fixed?
In-Reply-To: <D549F094-8A02-4EC4-9D6F-DEE0F8A96E1E@sdfe.dk>
References: <CAB28AsgYeFHJKcpmG1eipjmR+VyKfUjdWrpqVR8Q3ki8Oz0vFw@mail.gmail.com>
 <D549F094-8A02-4EC4-9D6F-DEE0F8A96E1E@sdfe.dk>
Message-ID: <CAB28Asgmm6gSwYL9AR5SZxFHOmmZd9mTo5sFejdZyhJ4knXenw@mail.gmail.com>

On Tue, 16 Jul 2019 at 16:02, Kristian Evers <kreve at sdfe.dk> wrote:
>
> Nyall,
>
> When would you propose to have the release instead?

Well... master is nice and super stable currently. Or after your java
work lands?

Nyall

>
> /Kristian
>
> > On 16 Jul 2019, at 00:30, Nyall Dawson <nyall.dawson at gmail.com> wrote:
> >
> > Hi list,
> >
> > Are proj release dates set in stone? Looking at the milestones on
> > github, I see that 6.2 is targeted for September. Is there any chance
> > this could be moved forward?
> >
> > I'd like to push the QGIS Windows and Macos builds to use proj 6 (and
> > gdal 3) after the upcoming QGIS 3.8.1 patch release (due later this
> > week), so that we get maximum testing and feedback prior to the final
> > 3.10 release (and just because things are so much better in the proj 6
> > world). While we could do this using the current proj 6.1 release, the
> > user experience is MUCH improved with 6.2 due to the availability of
> > scope and remark data.
> >
> > Sooo.... any chance this schedule is flexible?
> >
> > Regards,
> > Nyall
> > _______________________________________________
> > PROJ mailing list
> > PROJ at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/proj
>

From kreve at sdfe.dk  Mon Jul 15 23:34:28 2019
From: kreve at sdfe.dk (Kristian Evers)
Date: Tue, 16 Jul 2019 06:34:28 +0000
Subject: [PROJ] Proj 6.2 - release date fixed?
In-Reply-To: <CAB28Asgmm6gSwYL9AR5SZxFHOmmZd9mTo5sFejdZyhJ4knXenw@mail.gmail.com>
References: <CAB28AsgYeFHJKcpmG1eipjmR+VyKfUjdWrpqVR8Q3ki8Oz0vFw@mail.gmail.com>
 <D549F094-8A02-4EC4-9D6F-DEE0F8A96E1E@sdfe.dk>
 <CAB28Asgmm6gSwYL9AR5SZxFHOmmZd9mTo5sFejdZyhJ4knXenw@mail.gmail.com>
Message-ID: <CD4159F9-2277-464B-B04D-0CD4D87C5384@sdfe.dk>

Between now and the scheduled September 1st release I don’t have much
time for preparing a new release. I will be vacationing for the majority of the
time and in the limited time that is left I have higher priority work that needs
to be done. So based on that alone I am inclined to say no, I am not going
To fast track the 6.2.0 release.

Looking at the QGIS release schedule it doesn’t seem catastrophic to me.
As far as I can tell you have 3.8.3 coming up September 13 and 3.10.0 on
October 25. That gives you a month of real world user exposure of the
PROJ6.2+GDAL3+QGIS combination. While it is not perfect, surely the most
immediate issues will be found within that timespan?

/Kristian

> On 16 Jul 2019, at 08:04, Nyall Dawson <nyall.dawson at gmail.com> wrote:
> 
> On Tue, 16 Jul 2019 at 16:02, Kristian Evers <kreve at sdfe.dk> wrote:
>> 
>> Nyall,
>> 
>> When would you propose to have the release instead?
> 
> Well... master is nice and super stable currently. Or after your java
> work lands?
> 
> Nyall
> 
>> 
>> /Kristian
>> 
>>> On 16 Jul 2019, at 00:30, Nyall Dawson <nyall.dawson at gmail.com> wrote:
>>> 
>>> Hi list,
>>> 
>>> Are proj release dates set in stone? Looking at the milestones on
>>> github, I see that 6.2 is targeted for September. Is there any chance
>>> this could be moved forward?
>>> 
>>> I'd like to push the QGIS Windows and Macos builds to use proj 6 (and
>>> gdal 3) after the upcoming QGIS 3.8.1 patch release (due later this
>>> week), so that we get maximum testing and feedback prior to the final
>>> 3.10 release (and just because things are so much better in the proj 6
>>> world). While we could do this using the current proj 6.1 release, the
>>> user experience is MUCH improved with 6.2 due to the availability of
>>> scope and remark data.
>>> 
>>> Sooo.... any chance this schedule is flexible?
>>> 
>>> Regards,
>>> Nyall
>>> _______________________________________________
>>> PROJ mailing list
>>> PROJ at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/proj
>> 
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj


From nyall.dawson at gmail.com  Tue Jul 16 00:06:38 2019
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 16 Jul 2019 17:06:38 +1000
Subject: [PROJ] Proj 6.2 - release date fixed?
In-Reply-To: <CD4159F9-2277-464B-B04D-0CD4D87C5384@sdfe.dk>
References: <CAB28AsgYeFHJKcpmG1eipjmR+VyKfUjdWrpqVR8Q3ki8Oz0vFw@mail.gmail.com>
 <D549F094-8A02-4EC4-9D6F-DEE0F8A96E1E@sdfe.dk>
 <CAB28Asgmm6gSwYL9AR5SZxFHOmmZd9mTo5sFejdZyhJ4knXenw@mail.gmail.com>
 <CD4159F9-2277-464B-B04D-0CD4D87C5384@sdfe.dk>
Message-ID: <CAB28AshgJdNUf_2szMAzDeD+poPK2_3_0brRoQmUXBuaZL-ptg@mail.gmail.com>

On Tue, 16 Jul 2019 at 16:34, Kristian Evers <kreve at sdfe.dk> wrote:
>
> Between now and the scheduled September 1st release I don’t have much
> time for preparing a new release. I will be vacationing for the majority of the
> time and in the limited time that is left I have higher priority work that needs
> to be done. So based on that alone I am inclined to say no, I am not going
> To fast track the 6.2.0 release.

Fair enough! Enjoy the vacations!

> Looking at the QGIS release schedule it doesn’t seem catastrophic to me.
> As far as I can tell you have 3.8.3 coming up September 13 and 3.10.0 on
> October 25. That gives you a month of real world user exposure of the
> PROJ6.2+GDAL3+QGIS combination. While it is not perfect, surely the most
> immediate issues will be found within that timespan?

There's no real issue with using proj 6.1 here, life is just better
with 6.2 :) I'm going to be pushing for the transition to happen
sometime over the next fortnight, so that the change will happen with
3.8.2. (I'm wanting maximum testing before the 3.10 LTR release).

Nyall


>
> /Kristian
>
> > On 16 Jul 2019, at 08:04, Nyall Dawson <nyall.dawson at gmail.com> wrote:
> >
> > On Tue, 16 Jul 2019 at 16:02, Kristian Evers <kreve at sdfe.dk> wrote:
> >>
> >> Nyall,
> >>
> >> When would you propose to have the release instead?
> >
> > Well... master is nice and super stable currently. Or after your java
> > work lands?
> >
> > Nyall
> >
> >>
> >> /Kristian
> >>
> >>> On 16 Jul 2019, at 00:30, Nyall Dawson <nyall.dawson at gmail.com> wrote:
> >>>
> >>> Hi list,
> >>>
> >>> Are proj release dates set in stone? Looking at the milestones on
> >>> github, I see that 6.2 is targeted for September. Is there any chance
> >>> this could be moved forward?
> >>>
> >>> I'd like to push the QGIS Windows and Macos builds to use proj 6 (and
> >>> gdal 3) after the upcoming QGIS 3.8.1 patch release (due later this
> >>> week), so that we get maximum testing and feedback prior to the final
> >>> 3.10 release (and just because things are so much better in the proj 6
> >>> world). While we could do this using the current proj 6.1 release, the
> >>> user experience is MUCH improved with 6.2 due to the availability of
> >>> scope and remark data.
> >>>
> >>> Sooo.... any chance this schedule is flexible?
> >>>
> >>> Regards,
> >>> Nyall
> >>> _______________________________________________
> >>> PROJ mailing list
> >>> PROJ at lists.osgeo.org
> >>> https://lists.osgeo.org/mailman/listinfo/proj
> >>
> > _______________________________________________
> > PROJ mailing list
> > PROJ at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/proj
>

From cameron.shorter at gmail.com  Tue Jul 16 00:22:08 2019
From: cameron.shorter at gmail.com (Cameron Shorter)
Date: Tue, 16 Jul 2019 17:22:08 +1000
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <63f47524-ccab-489f-f949-5165fadf4dce@geomatys.com>
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <CABqeU+hcqmqcBwOciG-61U=ghGwVaLfZ8o2FDYwPMqoDzHZUMQ@mail.gmail.com>
 <63f47524-ccab-489f-f949-5165fadf4dce@geomatys.com>
Message-ID: <fa42a4a6-d37f-84f4-c39e-1fd882b94279@gmail.com>

Thanks for feedback so far. I'm aggregating answers into one email, and 
copying your comments into the master working doc here: 
https://docs.google.com/document/d/15uBX2qICODRkiHXeksT0zEy6TuysanIxuc4anV0o5F0/edit#

On 15/7/19 9:58 pm, Greg Troxel wrote:
>    I'm a little nervous that I've overwhelmed people by the number of pages
>    I've used to describe the web-mapping misaligned maps problem.
>
> It might also help to have your notes in plain text and actually send
> them to the list, after editing for minimum length

Greg, you are asking good questions, but it would be bad manners for me 
dump my long, half baked paper onto this list. Instead I'll copy the 
introduction, and hopefully you might be tempted to read the details in 
doc reference above:

**


    *The challenge*

*

Increasing demands for location accuracy has exposed design flaws in 
current “good-enough” approaches to web-mapping. Prior implementations 
haven’t accounted for tectonic plate shifts, resulting in systematic 
metre-level inaccuracies which are increasing over time.

The problem we’ve inherited is that a dynamicdatum is being used as if 
it were static. (Think of a datum as a mathematical model and associated 
coordinate system for the earth.)

  *

    Web-mapping applications use pre-rendered map tiles to improve
    performance and scalability. This freezes map tiles at a point in time.

  *

    To facilitate interoperability, implementers have selected a
    defacto-standard map projection of WGS84 Web Mercatorwhich is
    <https://www.epsg-registry.org/report.htm?type=selection&entity=urn:ogc:def:crs:EPSG::3857&reportDetail=short&style=urn:uuid:report-style:default-with-code&style_name=OGP%20Default%20With%20Code&title=EPSG:3857>based
    on the WGS84 datum.

  *

    However the WGS84 datum is dynamic (time dependant),meaning that a
    feature’s coordinates change over time as the tectonic plates drift
    across the earth.

  *

    This results in misaligned map layers.


To address these challenges we suggest:

  *

    Explaining the web-mapping challenges to facilitate understanding.

  *

    Adopting a static datum for web mapping, probably using the WGS84
    realisations currently in use.

  *

    Extending spatial standards, data types, software, and workflows to
    address time dependence.

This will be achieved most effectively through international collaboration.

*

On 15/7/19 9:17 pm, Martin Desruisseaux wrote:
> Hello Cameron
>
> Le 15/07/2019 à 01:59, Cameron Shorter a écrit :
>
>> * We are currently using the dynamic WGS84 datum as if it were a
>> static datum (locked to a different epoch in different regions).
>> * This appears to be suitable for current web mapping requirements.
>> * Realigning static and dynamic datums (as started by Australia, with
>> others to follow) is tripping a map misalignment problem.
> I'm not sure which "dynamic WGS84 datum" we are talking about. If we are
> talking about EPSG::4326, in my understanding this is now an "ensemble
> datum", i.e. a group of many different WGS84 datum (there is at least 6
> different WGS84 datum today) to be considered as equivalent for
> applications that do not need an accuracy better than a few meters. An
> "ensemble datum" is not the same as a "static datum" in the sense that
> it does not mean "a datum that does not move", but rather "we don't
> really know which datum it is, but we don't need to care if the desired
> accuracy is only a few meters".

Yes Martin, we discuss here: 
https://docs.google.com/document/d/15uBX2qICODRkiHXeksT0zEy6TuysanIxuc4anV0o5F0/edit#

*

Problem 1.1 Non-unique datum:

*

*The WGS84 datum (EPSG::6326) used in web-mapping is not unique; it has 
been updated six times 
<https://confluence.qps.nl/qinsy/en/world-geodetic-system-1984-wgs84-29855173.html>to 
date. Each update (called a realisation) refines the datum’s ellipsoid 
parameters to account for our improved measurements of the earth’s shape 
(which is different to tectonic plate movement).*

On 16/7/19 9:49 am, HIGGINS Matt wrote:
> Re: "Each update (called a realisation) refines the datum’s ellipsoid parameters to account for our improved measurements of the earth’s shape".
>
> That is incorrect, the ellipsoidal parameters for WGS84 have never changed, i.e. the size and shape of the ellipsoid are the same it is how well the position and orientation of the ellipsoid fit the centre of the earth and rotational axis. That is why I chose my original words very carefully.
Thanks Matt, I'll need to dig up your previous suggested wording.


*On 15/7/19 9:17 pm, Martin Desruisseaux wrote:*

> I'm also not sure what me mean by "suitable for current web mapping
> requirements". Do we we mean "an accuracy of a few meters is
> sufficient"? If yes, then this requirement is addressed by above-cited
> "ensemble datum", which is a new concept introduced in ISO 19111:2019.

To date, Australian web-mapping has had all our layers off center by ~ 
1.8 meters. This has been considered okay because layers were 
topologically aligned. We are now about to see map *mis-alignment* of 
1.8 metres in web mapping. We believe this is going to be unacceptable.

Described in more detail here: 
https://docs.google.com/document/d/15uBX2qICODRkiHXeksT0zEy6TuysanIxuc4anV0o5F0/edit#heading=h.bphraumy10yi

*4. Australia’s misaligned web-maps … is an international problem*

**

On 15/7/19 9:17 pm, Martin Desruisseaux wrote:

> Question to techies:
>> * Is it technically possible to create a reference frame realisation
>> (datum) which is fixed to different epochs in different regions?
> One implication of this approach would be that coordinate operations
> would need to identify in which zone (e.g. using a R-Tree) are located
> the coordinate values to transform, which is potentially a costly
> operation. Another issue is that it would introduce discontinuities at
> the frontier between different zones. It is possible that those
> inconvenient would bring bigger problems than the problem we are trying
> to solve.
>
Thanks for your insights Martin, understanding the implications of this 
question is likely to be very important for our decisions moving forward.


-- 
Cameron Shorter
Technology Demystifier
Open Technologies and Geospatial Consultant

M +61 (0) 419 142 254

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190716/fc37d4e4/attachment-0001.html>

From gdt at lexort.com  Tue Jul 16 07:22:16 2019
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 16 Jul 2019 10:22:16 -0400
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <fa42a4a6-d37f-84f4-c39e-1fd882b94279@gmail.com> (Cameron
 Shorter's message of "Tue, 16 Jul 2019 17:22:08 +1000")
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <CABqeU+hcqmqcBwOciG-61U=ghGwVaLfZ8o2FDYwPMqoDzHZUMQ@mail.gmail.com>
 <63f47524-ccab-489f-f949-5165fadf4dce@geomatys.com>
 <fa42a4a6-d37f-84f4-c39e-1fd882b94279@gmail.com>
Message-ID: <rmih87m6ovb.fsf@s1.lexort.com>

Cameron Shorter <cameron.shorter at gmail.com> writes:

> Thanks for feedback so far. I'm aggregating answers into one email,
> and copying your comments into the master working doc here:
> https://docs.google.com/document/d/15uBX2qICODRkiHXeksT0zEy6TuysanIxuc4anV0o5F0/edit#
>
> On 15/7/19 9:58 pm, Greg Troxel wrote:
>> It might also help to have your notes in plain text and actually send
>> them to the list, after editing for minimum length
>
> Greg, you are asking good questions, but it would be bad manners for
> me dump my long, half baked paper onto this list. Instead I'll copy
> the introduction, and hopefully you might be tempted to read the
> details in doc reference above:

I would suggest that you first write something that presumes the
appropriate background and is as short as possible.  Explaining it to
people who don't understand surveuying/geodesy is much harder of course.

> Increasing demands for location accuracy has exposed design flaws in
> current “good-enough” approaches to web-mapping. Prior implementations
> haven’t accounted for tectonic plate shifts, resulting in systematic
> metre-level inaccuracies which are increasing over time.

This is not about web mapping.  I think you are conflating issues with
fuzzy or old datum use with web presentation.


> The problem we’ve inherited is that a dynamicdatum is being used as if
> it were static. (Think of a datum as a mathematical model and
> associated coordinate system for the earth.)

So this is a clue that you are writing for a different audience than I
suggest.  I realize that may be your end goal, but I think you should
have the professional audience crisp version peer reviewed first.

>    Web-mapping applications use pre-rendered map tiles to improve
>    performance and scalability. This freezes map tiles at a point in time.

Yes, but typically the underlying databases are updated and tiles are
rebuilt.  In openstreetmap my impression is that tiles rarely get to be
30 days old.

Are you really talking about station velocities that are so large that a
tile from even a year ago has a big enough shift to be perceptible at
z19?  z20?  I have not done the math, but this seems hard to believe.

At z19 (mid latitude) on a normal computer, it seems that 20m is about
100 pixels (very roughly).  So that's 20 cm/pixel.  How far apart do
epochs needto be for trouble?  (Note that I'm assuming all the data has
been transformed into the same datum.)

>  To facilitate interoperability, implementers have selected a
>    defacto-standard map projection of WGS84 Web Mercatorwhich is
>    <https://www.epsg-registry.org/report.htm?type=selection&entity=urn:ogc:def:crs:EPSG::3857&reportDetail=short&style=urn:uuid:report-style:default-with-code&style_name=OGP%20Default%20With%20Code&title=EPSG:3857>based
>    on the WGS84 datum.

Yes, but the notion of which WGS84 has been fuzzy, because it has not
been that important.   It seems obvious as new WGS84 realizations happen
over time that the database/projection should be interpreted as the
recent one, for people that care about meter-level accuracy.

>    However the WGS84 datum is dynamic (time dependant),meaning that a
>    feature’s coordinates change over time as the tectonic plates drift
>    across the earth.

This would be a really good place to insert the velocity of typical
stations in your country in the latest WGS84 realization.  Or perhaps
the 90th percentile of velocity.   Are you talking 1 cm/year, or is it
much higher?

>    This results in misaligned map layers.

"misaligned" is an odd word, because I'm not sure what is misaligned to
what.  If you mean multiple map layers, because one  is epoch 2010.0 and
one ecpoh 2014.0, then I can see the point.  But again, what are the
velocities, and what is the resulting position error?   How does that
compare to the uncertainties in the positions in the first place?

>    Adopting a static datum for web mapping, probably using the WGS84
>    realisations currently in use.

If you mean, "for web mapping, specify that we use some recent flavor of
WGS84 (or ITRFXxx?), and some epoch", I can see the point, but who is it
you want to adopt?   And, how is that epoch going to be chosen, and when
will it be updated?



Please note that I'm not saying that epochs can be ignored always.  In
the glorious future, the type used for positions will have velocities
and an epoch.  But I am having a hard time seeing this as a web mapping
problem now.

From cameron.shorter at gmail.com  Tue Jul 16 12:40:13 2019
From: cameron.shorter at gmail.com (Cameron Shorter)
Date: Wed, 17 Jul 2019 05:40:13 +1000
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <rmih87m6ovb.fsf@s1.lexort.com>
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <CABqeU+hcqmqcBwOciG-61U=ghGwVaLfZ8o2FDYwPMqoDzHZUMQ@mail.gmail.com>
 <63f47524-ccab-489f-f949-5165fadf4dce@geomatys.com>
 <fa42a4a6-d37f-84f4-c39e-1fd882b94279@gmail.com>
 <rmih87m6ovb.fsf@s1.lexort.com>
Message-ID: <4d5f05d0-b284-b4c7-fccd-9a1a0733006f@gmail.com>

Hi Greg,

I can see that you have put quite a bit of effort into thinking about 
the questions below. Could I ask for another 15 mins of your time to 
read the 8 page position paper? I think half your questions are answered 
in the doc.

You are asking understandably questions which I feel is really 
important, and I hope you can help with that. Please login before adding 
comments so we know who said what. Comments are welcome, but please 
don't use track changes in the text (as the doc becomes hard to read).

https://docs.google.com/document/d/15uBX2qICODRkiHXeksT0zEy6TuysanIxuc4anV0o5F0/edit#

Cheers, Cameron

On 17/7/19 12:22 am, Greg Troxel wrote:
> Cameron Shorter <cameron.shorter at gmail.com> writes:
>
>> Thanks for feedback so far. I'm aggregating answers into one email,
>> and copying your comments into the master working doc here:
>> https://docs.google.com/document/d/15uBX2qICODRkiHXeksT0zEy6TuysanIxuc4anV0o5F0/edit#
>>
>> On 15/7/19 9:58 pm, Greg Troxel wrote:
>>> It might also help to have your notes in plain text and actually send
>>> them to the list, after editing for minimum length
>> Greg, you are asking good questions, but it would be bad manners for
>> me dump my long, half baked paper onto this list. Instead I'll copy
>> the introduction, and hopefully you might be tempted to read the
>> details in doc reference above:
> I would suggest that you first write something that presumes the
> appropriate background and is as short as possible.  Explaining it to
> people who don't understand surveuying/geodesy is much harder of course.
>
>> Increasing demands for location accuracy has exposed design flaws in
>> current “good-enough” approaches to web-mapping. Prior implementations
>> haven’t accounted for tectonic plate shifts, resulting in systematic
>> metre-level inaccuracies which are increasing over time.
> This is not about web mapping.  I think you are conflating issues with
> fuzzy or old datum use with web presentation.
>
>
>> The problem we’ve inherited is that a dynamicdatum is being used as if
>> it were static. (Think of a datum as a mathematical model and
>> associated coordinate system for the earth.)
> So this is a clue that you are writing for a different audience than I
> suggest.  I realize that may be your end goal, but I think you should
> have the professional audience crisp version peer reviewed first.
>
>>     Web-mapping applications use pre-rendered map tiles to improve
>>     performance and scalability. This freezes map tiles at a point in time.
> Yes, but typically the underlying databases are updated and tiles are
> rebuilt.  In openstreetmap my impression is that tiles rarely get to be
> 30 days old.
>
> Are you really talking about station velocities that are so large that a
> tile from even a year ago has a big enough shift to be perceptible at
> z19?  z20?  I have not done the math, but this seems hard to believe.
>
> At z19 (mid latitude) on a normal computer, it seems that 20m is about
> 100 pixels (very roughly).  So that's 20 cm/pixel.  How far apart do
> epochs needto be for trouble?  (Note that I'm assuming all the data has
> been transformed into the same datum.)
>
>>   To facilitate interoperability, implementers have selected a
>>     defacto-standard map projection of WGS84 Web Mercatorwhich is
>>     <https://www.epsg-registry.org/report.htm?type=selection&entity=urn:ogc:def:crs:EPSG::3857&reportDetail=short&style=urn:uuid:report-style:default-with-code&style_name=OGP%20Default%20With%20Code&title=EPSG:3857>based
>>     on the WGS84 datum.
> Yes, but the notion of which WGS84 has been fuzzy, because it has not
> been that important.   It seems obvious as new WGS84 realizations happen
> over time that the database/projection should be interpreted as the
> recent one, for people that care about meter-level accuracy.
>
>>     However the WGS84 datum is dynamic (time dependant),meaning that a
>>     feature’s coordinates change over time as the tectonic plates drift
>>     across the earth.
> This would be a really good place to insert the velocity of typical
> stations in your country in the latest WGS84 realization.  Or perhaps
> the 90th percentile of velocity.   Are you talking 1 cm/year, or is it
> much higher?
>
>>     This results in misaligned map layers.
> "misaligned" is an odd word, because I'm not sure what is misaligned to
> what.  If you mean multiple map layers, because one  is epoch 2010.0 and
> one ecpoh 2014.0, then I can see the point.  But again, what are the
> velocities, and what is the resulting position error?   How does that
> compare to the uncertainties in the positions in the first place?
>
>>     Adopting a static datum for web mapping, probably using the WGS84
>>     realisations currently in use.
> If you mean, "for web mapping, specify that we use some recent flavor of
> WGS84 (or ITRFXxx?), and some epoch", I can see the point, but who is it
> you want to adopt?   And, how is that epoch going to be chosen, and when
> will it be updated?
>
>
>
> Please note that I'm not saying that epochs can be ignored always.  In
> the glorious future, the type used for positions will have velocities
> and an epoch.  But I am having a hard time seeing this as a web mapping
> problem now.

-- 
Cameron Shorter
Technology Demystifier
Open Technologies and Geospatial Consultant

M +61 (0) 419 142 254


From nick_mein at trimble.com  Tue Jul 16 16:34:50 2019
From: nick_mein at trimble.com (Nick Mein)
Date: Wed, 17 Jul 2019 11:34:50 +1200
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <4d5f05d0-b284-b4c7-fccd-9a1a0733006f@gmail.com>
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <CABqeU+hcqmqcBwOciG-61U=ghGwVaLfZ8o2FDYwPMqoDzHZUMQ@mail.gmail.com>
 <63f47524-ccab-489f-f949-5165fadf4dce@geomatys.com>
 <fa42a4a6-d37f-84f4-c39e-1fd882b94279@gmail.com>
 <rmih87m6ovb.fsf@s1.lexort.com>
 <4d5f05d0-b284-b4c7-fccd-9a1a0733006f@gmail.com>
Message-ID: <CAF3Sn4UQ-8n1EcQoYLYM84EbCLAJ+J75-DRT2dY8YdGLeWgCGg@mail.gmail.com>

I'll take the liberty of responding to a couple of Greg's (excellent)
points:

> This would be a really good place to insert the velocity of typical
> stations in your country in the latest WGS84 realization.  Or perhaps
> the 90th percentile of velocity.   Are you talking 1 cm/year, or is it

All of Australia is moving at approximately 7cm/year relative to the ITRF.

> "misaligned" is an odd word, because I'm not sure what is misaligned to
> what.  If you mean multiple map layers, because one  is epoch 2010.0 and
> one ecpoh 2014.0, then I can see the point.  But again, what are the
> velocities, and what is the resulting position error?

The example that Cameron is using is GDA94 -> GDA2020. The shift is around
1.8m.
http://www.ga.gov.au/scientific-topics/positioning-navigation/geodesy/datums-projections/gda2020


The situation will be similar (for different reasons) when the USA moves to
NSRS 2022. The horizontal shift will be around 1.5m.
https://www.ngs.noaa.gov/datums/newdatums/WhatToExpect.shtml

 > It seems obvious as new WGS84 realizations happen
> over time that the database/projection should be interpreted as the
> recent one, for people that care about meter-level accuracy.

Interesting comment. To me, "high precision" means cm level, or better,
which is why I've been saying that there is no such thing as a precise
WGS84 coordinate (unless perhaps you are working for the US military).
Although the basic requirements are the same - any spatial dataset should
include meta-data that (correctly) identifies the reference frame, the
epoch, and the precision of the data.

Regards,
Nick


On Wed, 17 Jul 2019 at 07:40, Cameron Shorter <cameron.shorter at gmail.com>
wrote:

> Hi Greg,
>
> I can see that you have put quite a bit of effort into thinking about
> the questions below. Could I ask for another 15 mins of your time to
> read the 8 page position paper? I think half your questions are answered
> in the doc.
>
> You are asking understandably questions which I feel is really
> important, and I hope you can help with that. Please login before adding
> comments so we know who said what. Comments are welcome, but please
> don't use track changes in the text (as the doc becomes hard to read).
>
>
> https://docs.google.com/document/d/15uBX2qICODRkiHXeksT0zEy6TuysanIxuc4anV0o5F0/edit#
>
> Cheers, Cameron
>
> On 17/7/19 12:22 am, Greg Troxel wrote:
> > Cameron Shorter <cameron.shorter at gmail.com> writes:
> >
> >> Thanks for feedback so far. I'm aggregating answers into one email,
> >> and copying your comments into the master working doc here:
> >>
> https://docs.google.com/document/d/15uBX2qICODRkiHXeksT0zEy6TuysanIxuc4anV0o5F0/edit#
> >>
> >> On 15/7/19 9:58 pm, Greg Troxel wrote:
> >>> It might also help to have your notes in plain text and actually send
> >>> them to the list, after editing for minimum length
> >> Greg, you are asking good questions, but it would be bad manners for
> >> me dump my long, half baked paper onto this list. Instead I'll copy
> >> the introduction, and hopefully you might be tempted to read the
> >> details in doc reference above:
> > I would suggest that you first write something that presumes the
> > appropriate background and is as short as possible.  Explaining it to
> > people who don't understand surveuying/geodesy is much harder of course.
> >
> >> Increasing demands for location accuracy has exposed design flaws in
> >> current “good-enough” approaches to web-mapping. Prior implementations
> >> haven’t accounted for tectonic plate shifts, resulting in systematic
> >> metre-level inaccuracies which are increasing over time.
> > This is not about web mapping.  I think you are conflating issues with
> > fuzzy or old datum use with web presentation.
> >
> >
> >> The problem we’ve inherited is that a dynamicdatum is being used as if
> >> it were static. (Think of a datum as a mathematical model and
> >> associated coordinate system for the earth.)
> > So this is a clue that you are writing for a different audience than I
> > suggest.  I realize that may be your end goal, but I think you should
> > have the professional audience crisp version peer reviewed first.
> >
> >>     Web-mapping applications use pre-rendered map tiles to improve
> >>     performance and scalability. This freezes map tiles at a point in
> time.
> > Yes, but typically the underlying databases are updated and tiles are
> > rebuilt.  In openstreetmap my impression is that tiles rarely get to be
> > 30 days old.
> >
> > Are you really talking about station velocities that are so large that a
> > tile from even a year ago has a big enough shift to be perceptible at
> > z19?  z20?  I have not done the math, but this seems hard to believe.
> >
> > At z19 (mid latitude) on a normal computer, it seems that 20m is about
> > 100 pixels (very roughly).  So that's 20 cm/pixel.  How far apart do
> > epochs needto be for trouble?  (Note that I'm assuming all the data has
> > been transformed into the same datum.)
> >
> >>   To facilitate interoperability, implementers have selected a
> >>     defacto-standard map projection of WGS84 Web Mercatorwhich is
> >>     <
> https://www.epsg-registry.org/report.htm?type=selection&entity=urn:ogc:def:crs:EPSG::3857&reportDetail=short&style=urn:uuid:report-style:default-with-code&style_name=OGP%20Default%20With%20Code&title=EPSG:3857
> >based
> >>     on the WGS84 datum.
> > Yes, but the notion of which WGS84 has been fuzzy, because it has not
> > been that important.   It seems obvious as new WGS84 realizations happen
> > over time that the database/projection should be interpreted as the
> > recent one, for people that care about meter-level accuracy.
> >
> >>     However the WGS84 datum is dynamic (time dependant),meaning that a
> >>     feature’s coordinates change over time as the tectonic plates drift
> >>     across the earth.
> > This would be a really good place to insert the velocity of typical
> > stations in your country in the latest WGS84 realization.  Or perhaps
> > the 90th percentile of velocity.   Are you talking 1 cm/year, or is it
> > much higher?
> >
> >>     This results in misaligned map layers.
> > "misaligned" is an odd word, because I'm not sure what is misaligned to
> > what.  If you mean multiple map layers, because one  is epoch 2010.0 and
> > one ecpoh 2014.0, then I can see the point.  But again, what are the
> > velocities, and what is the resulting position error?   How does that
> > compare to the uncertainties in the positions in the first place?
> >
> >>     Adopting a static datum for web mapping, probably using the WGS84
> >>     realisations currently in use.
> > If you mean, "for web mapping, specify that we use some recent flavor of
> > WGS84 (or ITRFXxx?), and some epoch", I can see the point, but who is it
> > you want to adopt?   And, how is that epoch going to be chosen, and when
> > will it be updated?
> >
> >
> >
> > Please note that I'm not saying that epochs can be ignored always.  In
> > the glorious future, the type used for positions will have velocities
> > and an epoch.  But I am having a hard time seeing this as a web mapping
> > problem now.
>
> --
> Cameron Shorter
> Technology Demystifier
> Open Technologies and Geospatial Consultant
>
> M +61 (0) 419 142 254
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190717/54f775d5/attachment-0001.html>

From even.rouault at spatialys.com  Wed Jul 17 02:15:25 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 17 Jul 2019 11:15:25 +0200
Subject: [PROJ] Motion: Accept RFC4 (PROJ JNI Overhaul)
In-Reply-To: <3771054cac8145f7b6ebaf57f858e9cd@sdfe.dk>
References: <3771054cac8145f7b6ebaf57f858e9cd@sdfe.dk>
Message-ID: <2541951.JhyMyR7Bbo@even-i700>

Hi,

I vote +0

- I'm supportive of having rejuvenated Java bindings.
- I won't likely be a user / contributor to them myself.
- I've some doubts that having them in OSGeo/PROJ repo is the best thing, but 
as the RFC mentions the use of only public PROJ C or C++ API, it could be 
possible to exfiltrate them if needed.

Ah, the RFC doesn't mention licensing consideration. I assume the code will be 
under the PROJ X/MIT license ? At least, the native part, especially if it is 
bundled into libproj.

Other nitpicking detail. The RFC currently mentions: "The PROJ Java Native 
Interface exposes the ``proj_api.h`". This is not actually true. src/
jniproj.cpp includes proj_internal.h and uses functions that were part of 
former projects.h

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From martin.desruisseaux at geomatys.com  Wed Jul 17 02:36:32 2019
From: martin.desruisseaux at geomatys.com (Martin Desruisseaux)
Date: Wed, 17 Jul 2019 11:36:32 +0200
Subject: [PROJ] Motion: Accept RFC4 (PROJ JNI Overhaul)
In-Reply-To: <2541951.JhyMyR7Bbo@even-i700>
References: <3771054cac8145f7b6ebaf57f858e9cd@sdfe.dk>
 <2541951.JhyMyR7Bbo@even-i700>
Message-ID: <11e949a6-528c-5f50-d7d6-7bd1e454e167@geomatys.com>

Le 17/07/2019 à 11:15, Even Rouault a écrit :

> Ah, the RFC doesn't mention licensing consideration. I assume the code
> will be under the PROJ X/MIT license ?
>
I would said yes, both the native and Java parts.

    Martin



From howard at hobu.co  Wed Jul 17 07:28:47 2019
From: howard at hobu.co (Howard Butler)
Date: Wed, 17 Jul 2019 09:28:47 -0500
Subject: [PROJ] Motion: Accept RFC4 (PROJ JNI Overhaul)
In-Reply-To: <2541951.JhyMyR7Bbo@even-i700>
References: <3771054cac8145f7b6ebaf57f858e9cd@sdfe.dk>
 <2541951.JhyMyR7Bbo@even-i700>
Message-ID: <C70E6696-98D3-4514-B943-002AB605C8DB@hobu.co>

I'm -0 for the same reasons as Even states. If the Java bindings weren't already in PROJ for 15 years, I would be vetoing, but the ship has sailed. The updated Java bindings should be architected in such a way that if they stale again in 5-10 years that they can be ejected out of the tree into their own repository.

I am not supportive of any other language bindings coming into the PROJ source tree. We do not want to bless any bindings as official because this is likely to squash any innovation that might go on. This action also has a bad side effect of tying the release of the bindings to the release of the main library, which may or may not be a good idea. These things are separate and should evolve and be maintained separately. 

Howard

> On Jul 17, 2019, at 4:15 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Hi,
> 
> I vote +0
> 
> - I'm supportive of having rejuvenated Java bindings.
> - I won't likely be a user / contributor to them myself.
> - I've some doubts that having them in OSGeo/PROJ repo is the best thing, but 
> as the RFC mentions the use of only public PROJ C or C++ API, it could be 
> possible to exfiltrate them if needed.
> 
> Ah, the RFC doesn't mention licensing consideration. I assume the code will be 
> under the PROJ X/MIT license ? At least, the native part, especially if it is 
> bundled into libproj.
> 
> Other nitpicking detail. The RFC currently mentions: "The PROJ Java Native 
> Interface exposes the ``proj_api.h`". This is not actually true. src/
> jniproj.cpp includes proj_internal.h and uses functions that were part of 
> former projects.h
> 
> Even
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj


From martin.desruisseaux at geomatys.com  Wed Jul 17 07:59:05 2019
From: martin.desruisseaux at geomatys.com (Martin Desruisseaux)
Date: Wed, 17 Jul 2019 16:59:05 +0200
Subject: [PROJ] Motion: Accept RFC4 (PROJ JNI Overhaul)
In-Reply-To: <C70E6696-98D3-4514-B943-002AB605C8DB@hobu.co>
References: <3771054cac8145f7b6ebaf57f858e9cd@sdfe.dk>
 <2541951.JhyMyR7Bbo@even-i700> <C70E6696-98D3-4514-B943-002AB605C8DB@hobu.co>
Message-ID: <c9d6753c-fecf-be92-16ce-f9a7309437d2@geomatys.com>

Le 17/07/2019 à 16:28, Howard Butler a écrit :
> We do not want to bless any bindings as official because this is likely to squash any innovation that might go on.

I think there is two parts:

 1. Defining an API in another language.
 2. Providing a binding between PROJ and that other API.

Current PROJ and GDAL bindings merged those two parts, basically
reflecting the PROJ/GDAL API in the other language. I agree that other
communities are in better position for defining an API in their
language. By keeping part #1 out of this RFC and hosting only part #2 on
the PROJ repository, I think the situation become more similar to
PostgreSQL project providing a JDBC driver, not an API for accessing
databases.

    Martin


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190717/aa1b9d14/attachment.html>

From gdt at lexort.com  Wed Jul 17 08:02:00 2019
From: gdt at lexort.com (Greg Troxel)
Date: Wed, 17 Jul 2019 11:02:00 -0400
Subject: [PROJ] Motion: Accept RFC4 (PROJ JNI Overhaul)
In-Reply-To: <C70E6696-98D3-4514-B943-002AB605C8DB@hobu.co> (Howard Butler's
 message of "Wed, 17 Jul 2019 09:28:47 -0500")
References: <3771054cac8145f7b6ebaf57f858e9cd@sdfe.dk>
 <2541951.JhyMyR7Bbo@even-i700>
 <C70E6696-98D3-4514-B943-002AB605C8DB@hobu.co>
Message-ID: <rmi8ssw4sd3.fsf@s1.lexort.com>

I'm not PSC of course, but with a lot of +0 sentiment (which I interpret
as "I don't really like this, but I don't feel like it's reasonable to
object"), it seems like it might be a good time to have the java binding
in it's own package.

>From a packaging system point of view, separate is better, as it would
be crazy to require java to be installed to build the basic proj
package, and thus you end up building a proj package and then a
proj-java package.  If the java bindings are in a subdir and have their
own entirely separate build system (such that building proj doesn't
build them, and building the java bindings uses the installed proj and
doesn't build it locally), that's not really a problem, but it then also
doesn't really help to have them in the same source tarball.

So were I PSC, I'd be inclined to -1 and +1 in favor of "put this in a
separate repo".   That's not meant to be criticism of the code or java,
just a strong bias to having separable things separate.



From gdt at lexort.com  Wed Jul 17 11:26:38 2019
From: gdt at lexort.com (Greg Troxel)
Date: Wed, 17 Jul 2019 14:26:38 -0400
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <CAF3Sn4UQ-8n1EcQoYLYM84EbCLAJ+J75-DRT2dY8YdGLeWgCGg@mail.gmail.com>
 (Nick Mein's message of "Wed, 17 Jul 2019 11:34:50 +1200")
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <CABqeU+hcqmqcBwOciG-61U=ghGwVaLfZ8o2FDYwPMqoDzHZUMQ@mail.gmail.com>
 <63f47524-ccab-489f-f949-5165fadf4dce@geomatys.com>
 <fa42a4a6-d37f-84f4-c39e-1fd882b94279@gmail.com>
 <rmih87m6ovb.fsf@s1.lexort.com>
 <4d5f05d0-b284-b4c7-fccd-9a1a0733006f@gmail.com>
 <CAF3Sn4UQ-8n1EcQoYLYM84EbCLAJ+J75-DRT2dY8YdGLeWgCGg@mail.gmail.com>
Message-ID: <rmitvbk1pr5.fsf@s1.lexort.com>

Nick Mein <nick_mein at trimble.com> writes:

>> This would be a really good place to insert the velocity of typical
>> stations in your country in the latest WGS84 realization.  Or perhaps
>> the 90th percentile of velocity.   Are you talking 1 cm/year, or is it
>
> All of Australia is moving at approximately 7cm/year relative to the ITRF.

Thanks - that's certainly a lot faster than my ground is moving.  Trying
to ground this in acceptable accuracies and fitness for use of data, it
feels like 5 years of fuzz is not a big deal (35cm) for anything called
"web mapping", as opposed to "GNSS vectors used for geodetic surveying".

> The example that Cameron is using is GDA94 -> GDA2020. The shift is around
> 1.8m.
> http://www.ga.gov.au/scientific-topics/positioning-navigation/geodesy/datums-projections/gda2020

I see - a shift between two datums that are each nominally fixed to the
plate.

So I think dealing with this is first a basic issue of having datum
metadata carried alongside coordinates, and everybody has to get that
right if either:

  they are not using essentially WGS84, or
  they care about 2m

Then some subset have to carry epoch of data as well; presumably that's
people who aspire to cm-level accuracy and people with data in a frame
with a significant velocity relative to the plate containing the object
(where significant perhaps means an error of velocity*10y makes them
unhappy).

(In the US, we've largely forgotten NAD27, but the shift in coordinates
from NAD27 to NAD83 is on the order of 40m, at least in New England.
That was not reasonably ignorable even back in 1990.)

OSM doesn't handle this; when importing data from state GIS agencies, we
transform from NAD83 to WGS84 (not sure how well) and then it's just
stored.  But if we are sub-meter, we're pretty happy.

> The situation will be similar (for different reasons) when the USA moves to
> NSRS 2022. The horizontal shift will be around 1.5m.
> https://www.ngs.noaa.gov/datums/newdatums/WhatToExpect.shtml

Thanks for the link; I've downloaded the 3 documents for reading.

>> It seems obvious as new WGS84 realizations happen over time that the
>> database/projection should be interpreted as the recent one, for
>> people that care about meter-level accuracy.
>
> Interesting comment

Perhaps a bit strong on my end, but I was thinking about the
Openstreetmap database, which has always had the notion of "coordinates
of objects are in WGS84".  That seemed like a good choice in 2004, and
my ipmression is that successive realizations of WGS84 are ever closer
to the successive ITRFxx realizations.  Also that the differences in
successive realizations are reasonably small compared to the accuracy
achievable with non-differential GPS.  So were I to try to put accurate
(cm level) coordinates in the OSM database for a point, I'd be trying to
use the most recent WGS84 realization expecting to to more or less be
equal to a recent ITRF.  Looking this up, it seems WGS84(G1762) is more
or less ITRF2008 epoch 2005.0.

Taking a coordinate from the db, I'd treat it as being from the latest
WGS84, but with an unknown accuracy, perhaps from somebody eyeballing
the map and drawing things, and additionally from fuzz between the older
revisions and the current.

OSM has not yet grappled with the concept of mapped objects having
velocities relative to WGS84(Gwwww)/ITRFyyyy.

> To me, "high precision" means cm level, or better, which is why I've
> been saying that there is no such thing as a precise WGS84 coordinate
> (unless perhaps you are working for the US military).

I don't follow the reference to being part of the military but perhaps
there is non-public data.

The US NGS seems to publish coordinates for CORS in IGS08 epcoh 2005.0
and NAD83(2011) epoch 2010.0.  As far as I can tell WGS84(G1762), IGS08
and ITRF08 are essentially the same.

> Although the basic requirements are the same - any spatial dataset
> should include meta-data that (correctly) identifies the reference
> frame, the epoch, and the precision of the data.

Sure.  But that becomes per-object data in a dataset of mixed origin
(which is where my head is because of OSM), and I suspect one then runs
into missing software support.

Trying to get back to point for proj, then, I guess the question is what
operations do people need to do are missing or awkward.  One thing I
wonder about based on your metadata comments and my reaction is the
notion of

  T=createtransform(src_datum, src_epoch, dst_datum, dst_epoch)
  apply_transform(T, vector_of_points[lat, lon, ellipsoidal_height])

versus the notion that the point object (rather than the transform) has
an epoch, to end up with something that feels like

  T=createtransform(src_datum, dst_datum, dst_epoch)
  apply_transform(T, vector_of_points[lat, lon, ellipsoidal_height, epoch])

Probably that's too messy to contemplate for now, without a clear enough
need.

From dagnew at ucsd.edu  Wed Jul 17 11:35:46 2019
From: dagnew at ucsd.edu (Duncan Agnew)
Date: Wed, 17 Jul 2019 11:35:46 -0700
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <rmih87m6ovb.fsf@s1.lexort.com>
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <CABqeU+hcqmqcBwOciG-61U=ghGwVaLfZ8o2FDYwPMqoDzHZUMQ@mail.gmail.com>
 <63f47524-ccab-489f-f949-5165fadf4dce@geomatys.com>
 <fa42a4a6-d37f-84f4-c39e-1fd882b94279@gmail.com>
 <rmih87m6ovb.fsf@s1.lexort.com>
Message-ID: <CAG6Em0AErpkqyJSMMQxqZoYX8LbKd5wSJ2hJSLudW04pFnTXpg@mail.gmail.com>

Just to add to this discussion, I note that the NGS HTDP program assumes
the following:

WGS84(G730) is equivalent to  ITRF91
WGS84(G873) is equivalent to  ITRF94
WGS84(G1150) is equivalent to  ITRF2000
WGS84(G1674) is equivalent to  ITRF2008

and the transformations between these ITRF's are at the 1-2 cm level at
most, and are a few mm for the latest frames. I'd note that the later ITRF
frames now all have an epoch and velocities for at least some things:
again, not important at the 0.1 m level (and probably the 0.01m level as
well.

So the changes in WGS84 are, for just about any application, irrelevant.

The problem is *entirely* that WGS/ITRF is tied to a global everage of
plate velocities, not fixed to any plate, so repeated measurements over the
same ground point in those systems will show changing coordinates because
of motion of whatever plate it is on.

My understanding is that both GDA2020 and GDA94 are "snapshots" of the
ITRF, with different transformation parameters to allow for plate motion.
So if you start out in 1994 and keep measuring the same point in GDA94, its
coordinates will change and get increasingly far from their initial value.
In GDA2020 they will also change with time, but instead will approach the
GDA94 numbers measured in 1994, until in 2020 they will be the same--but
then start diverging again. The point is that the coordinate values
measured at a place in 1994, expressed in GDA94, will match the values
measured at the same place in 2020 expressed in GDA2020. Neither is
plate-fixed.  There will be a time-dependent reference frame known as the
Australian Terrestrial Reference Frame (ATRF) that is plate-fixed: in 2020
it will match GDA2020.

I continue to prefer "plate-fixed" to "static" because it is immediately
obvious what is meant; "static" clearly means that something doesn't
change, but what, the frame or the coordinates of a ground point?

Duncan Agnew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190717/d542f8a5/attachment-0001.html>

From even.rouault at spatialys.com  Wed Jul 17 12:05:16 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 17 Jul 2019 21:05:16 +0200
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <rmitvbk1pr5.fsf@s1.lexort.com>
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <CAF3Sn4UQ-8n1EcQoYLYM84EbCLAJ+J75-DRT2dY8YdGLeWgCGg@mail.gmail.com>
 <rmitvbk1pr5.fsf@s1.lexort.com>
Message-ID: <4859287.dTvQpnVfjV@even-i700>

> Thanks - that's certainly a lot faster than my ground is moving.  Trying
> to ground this in acceptable accuracies and fitness for use of data, it
> feels like 5 years of fuzz is not a big deal (35cm) for anything called
> "web mapping", as opposed to "GNSS vectors used for geodetic surveying".

That's questionable. There are a lot of people doing webmapping with aerial 
photographies with < 10cm resolution ...

> Perhaps a bit strong on my end, but I was thinking about the
> Openstreetmap database, which has always had the notion of "coordinates
> of objects are in WGS84".  That seemed like a good choice in 2004, and
> my ipmression is that successive realizations of WGS84 are ever closer
> to the successive ITRFxx realizations.  Also that the differences in
> successive realizations are reasonably small compared to the accuracy
> achievable with non-differential GPS.  So were I to try to put accurate
> (cm level) coordinates in the OSM database for a point, I'd be trying to
> use the most recent WGS84 realization expecting to to more or less be
> equal to a recent ITRF.  Looking this up, it seems WGS84(G1762) is more
> or less ITRF2008 epoch 2005.0.

The issue with OSM is more than you don't have the coordinate epoch specified. 
You could use the creation timestampof the object as a hint, but the time 
where the object is entered in the database isn't necessary the epoch at which 
the coordinate was collected (for example, if you import from another 
database, like a cadastre, which was built a few years before)

> 
> Trying to get back to point for proj, then, I guess the question is what
> operations do people need to do are missing or awkward.  One thing I
> wonder about based on your metadata comments and my reaction is the
> notion of
> 
>   T=createtransform(src_datum, src_epoch, dst_datum, dst_epoch)
>   apply_transform(T, vector_of_points[lat, lon, ellipsoidal_height])
> 
> versus the notion that the point object (rather than the transform) has
> an epoch, to end up with something that feels like
> 
>   T=createtransform(src_datum, dst_datum, dst_epoch)
>   apply_transform(T, vector_of_points[lat, lon, ellipsoidal_height, epoch])
> 
> Probably that's too messy to contemplate for now, without a clear enough
> need.

We discussed about that in:

https://lists.osgeo.org/pipermail/proj/2019-June/008668.html
https://lists.osgeo.org/pipermail/proj/2019-June/008669.html
https://lists.osgeo.org/pipermail/proj/2019-June/008670.html

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From martin.desruisseaux at geomatys.com  Wed Jul 17 12:05:42 2019
From: martin.desruisseaux at geomatys.com (Martin Desruisseaux)
Date: Wed, 17 Jul 2019 21:05:42 +0200
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <CAG6Em0AErpkqyJSMMQxqZoYX8LbKd5wSJ2hJSLudW04pFnTXpg@mail.gmail.com>
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <CABqeU+hcqmqcBwOciG-61U=ghGwVaLfZ8o2FDYwPMqoDzHZUMQ@mail.gmail.com>
 <63f47524-ccab-489f-f949-5165fadf4dce@geomatys.com>
 <fa42a4a6-d37f-84f4-c39e-1fd882b94279@gmail.com>
 <rmih87m6ovb.fsf@s1.lexort.com>
 <CAG6Em0AErpkqyJSMMQxqZoYX8LbKd5wSJ2hJSLudW04pFnTXpg@mail.gmail.com>
Message-ID: <6a95aeb0-9583-360d-578a-9c31b1a7a658@geomatys.com>

I did not yet had the time to follow this thread closely (will try to do
later), but I would like to react on some points:

  * In my reading of ISO 19111 §3.1.16 [1], the difference between WGS84
    realizations can be close to one meter. Note huge, but not
    irrelevant neither.
  * ISO 19111 §3.1.62 seems to define a static reference frame as a
    frame without time evolution, regardless if fixed to the plate or not.
  * In past emails I have seen WGS84 cited as a "dynamic datum". In my
    understanding, it is rather a "datum ensemble", which is not the
    same thing.

Useful quote from ISO 19111:

    “WGS 84” as an undifferentiated group of realizations including WGS
    84 (TRANSIT), WGS 84 (G730), WGS 84 (G873), WGS 84 (G1150), WGS 84
    (G1674) and WGS 84 (G1762). At the surface of the Earth these have
    changed on average by 0.7m between the TRANSIT and G730
    realizations, a further 0.2m between G730 and G873, 0.06m between
    G873 and G1150, 0.2m between G1150 and G1674 and 0.02m between G1674
    and G1762).

Regards,

    Martin

[1] http://docs.opengeospatial.org/as/18-005r4/18-005r4.html

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190717/b7ce3871/attachment.html>

From even.rouault at spatialys.com  Wed Jul 17 12:16:20 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 17 Jul 2019 21:16:20 +0200
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <CAG6Em0AErpkqyJSMMQxqZoYX8LbKd5wSJ2hJSLudW04pFnTXpg@mail.gmail.com>
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <rmih87m6ovb.fsf@s1.lexort.com>
 <CAG6Em0AErpkqyJSMMQxqZoYX8LbKd5wSJ2hJSLudW04pFnTXpg@mail.gmail.com>
Message-ID: <3302331.88qmV10lXp@even-i700>

> So if you start out in 1994 and keep measuring the same point in GDA94, its
> coordinates will change and get increasingly far from their initial value.

When you say "same point", you mean a point at fixed coordinates in ITRF right 
? (so contrary to common langage where when talking about "same point" we 
generally think of a point physically attached to the plate (not talking about 
region subject to crustal deformation/earthquakes)).

> In GDA2020 they will also change with time, but instead will approach the
> GDA94 numbers measured in 1994, until in 2020 they will be the same--but
> then start diverging again. The point is that the coordinate values
> measured at a place in 1994, expressed in GDA94, will match the values
> measured at the same place in 2020 expressed in GDA2020. Neither is
> plate-fixed. 

> There will be a time-dependent reference frame known as the
> Australian Terrestrial Reference Frame (ATRF) that is plate-fixed: in 2020
> it will match GDA2020.

Hum, my understanding of ATRF (based on 
http://spatialservices.finance.nsw.gov.au/__data/assets/pdf_file/
0018/217224/2017_Janssen_Position90_GDA2020_AUSGeoid2020_and_ATRF_explained.pdf 
) is that it is NOT plate-fixed. It is a realization of ITRF, so it is as 
Earth-fixed as ITRF is. Basically coordinates in ATRF at yyyy.yy should be pretty 
much the same as if expressed in WGS84(G1762)@yyyy.yy

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gdt at lexort.com  Wed Jul 17 16:24:39 2019
From: gdt at lexort.com (Greg Troxel)
Date: Wed, 17 Jul 2019 19:24:39 -0400
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <6a95aeb0-9583-360d-578a-9c31b1a7a658@geomatys.com> (Martin
 Desruisseaux's message of "Wed, 17 Jul 2019 21:05:42 +0200")
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <CABqeU+hcqmqcBwOciG-61U=ghGwVaLfZ8o2FDYwPMqoDzHZUMQ@mail.gmail.com>
 <63f47524-ccab-489f-f949-5165fadf4dce@geomatys.com>
 <fa42a4a6-d37f-84f4-c39e-1fd882b94279@gmail.com>
 <rmih87m6ovb.fsf@s1.lexort.com>
 <CAG6Em0AErpkqyJSMMQxqZoYX8LbKd5wSJ2hJSLudW04pFnTXpg@mail.gmail.com>
 <6a95aeb0-9583-360d-578a-9c31b1a7a658@geomatys.com>
Message-ID: <rmimuhcz1l4.fsf@s1.lexort.com>

Martin Desruisseaux <martin.desruisseaux at geomatys.com> writes:

> I did not yet had the time to follow this thread closely (will try to do
> later), but I would like to react on some points:
>
>   * In my reading of ISO 19111 §3.1.16 [1], the difference between WGS84
>     realizations can be close to one meter. Note huge, but not
>     irrelevant neither.
>   * ISO 19111 §3.1.62 seems to define a static reference frame as a
>     frame without time evolution, regardless if fixed to the plate or not.
>   * In past emails I have seen WGS84 cited as a "dynamic datum". In my
>     understanding, it is rather a "datum ensemble", which is not the
>     same thing.

I think the differing usages stem from there being three interpretations
of an unqualified "WGS84":

   The original, WGS84(TRANSIT)
   The one currently used by GPS, WGS84(G1762)
   A set of all of them, and the notion that one doesn't know which one

It's not useful to argue about which concept the bare word should
properly be bound to, but I think it is a leap to assume that any time
anyone uses the bare word that they are intentionally referring to the
set/ensemble meaning and intending to include WGS84(TRANSIT), superceded
in 1994.

You have succeeded in convincing me that I am not sure what static and
dynamic really mean!

> Useful quote from ISO 19111:
>
>     “WGS 84” as an undifferentiated group of realizations including WGS
>     84 (TRANSIT), WGS 84 (G730), WGS 84 (G873), WGS 84 (G1150), WGS 84
>     (G1674) and WGS 84 (G1762). At the surface of the Earth these have
>     changed on average by 0.7m between the TRANSIT and G730
>     realizations, a further 0.2m between G730 and G873, 0.06m between
>     G873 and G1150, 0.2m between G1150 and G1674 and 0.02m between G1674
>     and G1762).

Thanks for digging that out.  There's a useful chart at

 https://confluence.qps.nl/qinsy/latest/en/world-geodetic-system-1984-wgs84-29855173.html

While it seems pedantically true about WGS84 being a group of datums
with a difference close to a meter, note that WGS 84 (G1150) was
introduced in 1997, and the variations from G1150 on are about 0.22m by
what you quote, and 0.02m from the page I linked.  So if one qualify
WGS84 to "WGS 84 from the last 20 years", the scary large variance is
not so present.  (I agree that without some metadata you can't assume
that, but non-differential positions from pre-1997 GPS are much worse
than 1m anyway, SA and all.)

> [1] http://docs.opengeospatial.org/as/18-005r4/18-005r4.html

From dagnew at ucsd.edu  Wed Jul 17 17:24:49 2019
From: dagnew at ucsd.edu (Duncan Agnew)
Date: Wed, 17 Jul 2019 17:24:49 -0700
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <3302331.88qmV10lXp@even-i700>
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <rmih87m6ovb.fsf@s1.lexort.com>
 <CAG6Em0AErpkqyJSMMQxqZoYX8LbKd5wSJ2hJSLudW04pFnTXpg@mail.gmail.com>
 <3302331.88qmV10lXp@even-i700>
Message-ID: <CAG6Em0CXE5YwcT3TSfFgoXTMxPu6T2MXcT5ufwuDXnVB8pLteA@mail.gmail.com>

No, "same point" means "same monument set in the ground". If I understand
things properly, a measurement in 1994
(which is analyzed in IRTF and then converted to GDA94) will have some XYZ
value, call it XYZ94. And a measurement
in 2020 (analyzed in ITRF and then converted to GDA2020) will have XYZ
numbers that have the same values as XYZ94.
Of course the 2020 data, in GDA94, will show a different coordinate for the
point. The equivalence of the numbers is very close
only when data from an epoch is in the reference frame (fixed to ITRF) for
that epoch.

You are probably right about ATRF: I just assumed that it would be set up
as NGS is setting up the new NA frame: a
frame that moves relative to ITRF so that coordinates of places on the NA
plate will, in the NA frame, stay the same, as most surveyors prefer. To
get these coordinates out of your data you do need to have the epoch (to
use the right parameters
for the moving NA frame)--but so long as you and everyone else does that
with their data, everybody will get the same numbers for a given monument,
whenever they make the measurement. I would have thought this would be
perfect for
Australia, since it doesn't deform hardly at all.


On Wed, Jul 17, 2019 at 12:16 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> > So if you start out in 1994 and keep measuring the same point in GDA94,
> its
> > coordinates will change and get increasingly far from their initial
> value.
>
> When you say "same point", you mean a point at fixed coordinates in ITRF
> right
> ? (so contrary to common langage where when talking about "same point" we
> generally think of a point physically attached to the plate (not talking
> about
> region subject to crustal deformation/earthquakes)).
>
> > In GDA2020 they will also change with time, but instead will approach the
> > GDA94 numbers measured in 1994, until in 2020 they will be the same--but
> > then start diverging again. The point is that the coordinate values
> > measured at a place in 1994, expressed in GDA94, will match the values
> > measured at the same place in 2020 expressed in GDA2020. Neither is
> > plate-fixed.
>
> > There will be a time-dependent reference frame known as the
> > Australian Terrestrial Reference Frame (ATRF) that is plate-fixed: in
> 2020
> > it will match GDA2020.
>
> Hum, my understanding of ATRF (based on
> http://spatialservices.finance.nsw.gov.au/__data/assets/pdf_file/
>
> 0018/217224/2017_Janssen_Position90_GDA2020_AUSGeoid2020_and_ATRF_explained.pdf
> <http://spatialservices.finance.nsw.gov.au/__data/assets/pdf_file/0018/217224/2017_Janssen_Position90_GDA2020_AUSGeoid2020_and_ATRF_explained.pdf>
> ) is that it is NOT plate-fixed. It is a realization of ITRF, so it is as
> Earth-fixed as ITRF is. Basically coordinates in ATRF at yyyy.yy should be
> pretty
> much the same as if expressed in WGS84(G1762)@yyyy.yy
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190717/31027f88/attachment-0001.html>

From even.rouault at spatialys.com  Wed Jul 17 17:47:34 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 18 Jul 2019 02:47:34 +0200
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <CAG6Em0CXE5YwcT3TSfFgoXTMxPu6T2MXcT5ufwuDXnVB8pLteA@mail.gmail.com>
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <3302331.88qmV10lXp@even-i700>
 <CAG6Em0CXE5YwcT3TSfFgoXTMxPu6T2MXcT5ufwuDXnVB8pLteA@mail.gmail.com>
Message-ID: <2074780.iiVI1gWNxD@even-i700>

On mercredi 17 juillet 2019 17:24:49 CEST Duncan Agnew wrote:
> No, "same point" means "same monument set in the ground". If I understand
> things properly, a measurement in 1994
> (which is analyzed in IRTF and then converted to GDA94) will have some XYZ
> value, call it XYZ94. And a measurement
> in 2020 (analyzed in ITRF and then converted to GDA2020) will have XYZ
> numbers that have the same values as XYZ94.

That doesn't make sense to me. There will be a ~1.8 m shift between the 
coordinates of the same monument expressed in GDA94 and GDA2020 due to plate 
motion between 1994 and 2020. That's the whole point of having GDA2020 
"resynchronized" with ITRF at 2020.00, or I'm missing something...

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Scott.Strong at dpipwe.tas.gov.au  Wed Jul 17 22:54:16 2019
From: Scott.Strong at dpipwe.tas.gov.au (Strong, Scott (DPIPWE))
Date: Thu, 18 Jul 2019 05:54:16 +0000
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <2074780.iiVI1gWNxD@even-i700>
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <3302331.88qmV10lXp@even-i700>
 <CAG6Em0CXE5YwcT3TSfFgoXTMxPu6T2MXcT5ufwuDXnVB8pLteA@mail.gmail.com>
 <2074780.iiVI1gWNxD@even-i700>
Message-ID: <3F34230841524C43A9488F6EA69F99A1A7112A71@EXM2-4.connect.tas.gov.au>

On mercredi 17 juillet 2019 17:47:34 Even Rouault <even.rouault at spatialys.com>
wrote:

>That doesn't make sense to me. There will be a ~1.8 m shift between the
>coordinates of the same monument expressed in GDA94 and GDA2020 due to plate
>motion between 1994 and 2020. That's the whole point of having GDA2020
>"resynchronized" with ITRF at 2020.00, or I'm missing something...

Correct - you are not missing something.

See https://www.icsm.gov.au/gda2020 but in particular the 3 minute video embedded in the page - https://vimeo.com/191566518

Scott

________________________________

CONFIDENTIALITY NOTICE AND DISCLAIMER
The information in this transmission may be confidential and/or protected by legal professional privilege, and is intended only for the person or persons to whom it is addressed. If you are not such a person, you are warned that any disclosure, copying or dissemination of the information is unauthorised. If you have received the transmission in error, please immediately contact this office by telephone, fax or email, to inform us of the error and to enable arrangements to be made for the destruction of the transmission, or its return at our cost. No liability is accepted for any unauthorised use of the information contained in this transmission.

From nick_mein at trimble.com  Wed Jul 17 23:21:46 2019
From: nick_mein at trimble.com (Nick Mein)
Date: Thu, 18 Jul 2019 18:21:46 +1200
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <rmitvbk1pr5.fsf@s1.lexort.com>
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <CABqeU+hcqmqcBwOciG-61U=ghGwVaLfZ8o2FDYwPMqoDzHZUMQ@mail.gmail.com>
 <63f47524-ccab-489f-f949-5165fadf4dce@geomatys.com>
 <fa42a4a6-d37f-84f4-c39e-1fd882b94279@gmail.com>
 <rmih87m6ovb.fsf@s1.lexort.com>
 <4d5f05d0-b284-b4c7-fccd-9a1a0733006f@gmail.com>
 <CAF3Sn4UQ-8n1EcQoYLYM84EbCLAJ+J75-DRT2dY8YdGLeWgCGg@mail.gmail.com>
 <rmitvbk1pr5.fsf@s1.lexort.com>
Message-ID: <CAF3Sn4U4L9WF6Ye209pw4RP=jqS5w1bKuQR-kyPaR9mdV8sJQg@mail.gmail.com>

>> To me, "high precision" means cm level, or better, which is why I've
>> been saying that there is no such thing as a precise WGS84 coordinate
>> (unless perhaps you are working for the US military).

> I don't follow the reference to being part of the military but perhaps
> there is non-public data.

> The US NGS seems to publish coordinates for CORS in IGS08 epcoh 2005.0
>and NAD83(2011) epoch 2010.0.  As far as I can tell WGS84(G1762), IGS08
>and ITRF08 are essentially the same.

Maybe I'm being a bit pedantic here. But the trouble is that a coordinate
that is described as being "WGS84" is generally either not precise (because
it is derived from broadcast orbits), or not WGS84 (because it is actually
some in some national datum that some piece of software decided was
equivalent to WGS84). So yes, if your precise point positioning service
gives you a ISG08 coordinate, that is essentially the same as a
WGS84(G1762) or ITRF08 or ITRF14 coordinate. But calling it "WGS84" doesn't
seem to help anyone.


On Thu, 18 Jul 2019 at 06:26, Greg Troxel <gdt at lexort.com> wrote:

> Nick Mein <nick_mein at trimble.com> writes:
>
> >> This would be a really good place to insert the velocity of typical
> >> stations in your country in the latest WGS84 realization.  Or perhaps
> >> the 90th percentile of velocity.   Are you talking 1 cm/year, or is it
> >
> > All of Australia is moving at approximately 7cm/year relative to the
> ITRF.
>
> Thanks - that's certainly a lot faster than my ground is moving.  Trying
> to ground this in acceptable accuracies and fitness for use of data, it
> feels like 5 years of fuzz is not a big deal (35cm) for anything called
> "web mapping", as opposed to "GNSS vectors used for geodetic surveying".
>
> > The example that Cameron is using is GDA94 -> GDA2020. The shift is
> around
> > 1.8m.
> >
> http://www.ga.gov.au/scientific-topics/positioning-navigation/geodesy/datums-projections/gda2020
>
> I see - a shift between two datums that are each nominally fixed to the
> plate.
>
> So I think dealing with this is first a basic issue of having datum
> metadata carried alongside coordinates, and everybody has to get that
> right if either:
>
>   they are not using essentially WGS84, or
>   they care about 2m
>
> Then some subset have to carry epoch of data as well; presumably that's
> people who aspire to cm-level accuracy and people with data in a frame
> with a significant velocity relative to the plate containing the object
> (where significant perhaps means an error of velocity*10y makes them
> unhappy).
>
> (In the US, we've largely forgotten NAD27, but the shift in coordinates
> from NAD27 to NAD83 is on the order of 40m, at least in New England.
> That was not reasonably ignorable even back in 1990.)
>
> OSM doesn't handle this; when importing data from state GIS agencies, we
> transform from NAD83 to WGS84 (not sure how well) and then it's just
> stored.  But if we are sub-meter, we're pretty happy.
>
> > The situation will be similar (for different reasons) when the USA moves
> to
> > NSRS 2022. The horizontal shift will be around 1.5m.
> > https://www.ngs.noaa.gov/datums/newdatums/WhatToExpect.shtml
>
> Thanks for the link; I've downloaded the 3 documents for reading.
>
> >> It seems obvious as new WGS84 realizations happen over time that the
> >> database/projection should be interpreted as the recent one, for
> >> people that care about meter-level accuracy.
> >
> > Interesting comment
>
> Perhaps a bit strong on my end, but I was thinking about the
> Openstreetmap database, which has always had the notion of "coordinates
> of objects are in WGS84".  That seemed like a good choice in 2004, and
> my ipmression is that successive realizations of WGS84 are ever closer
> to the successive ITRFxx realizations.  Also that the differences in
> successive realizations are reasonably small compared to the accuracy
> achievable with non-differential GPS.  So were I to try to put accurate
> (cm level) coordinates in the OSM database for a point, I'd be trying to
> use the most recent WGS84 realization expecting to to more or less be
> equal to a recent ITRF.  Looking this up, it seems WGS84(G1762) is more
> or less ITRF2008 epoch 2005.0.
>
> Taking a coordinate from the db, I'd treat it as being from the latest
> WGS84, but with an unknown accuracy, perhaps from somebody eyeballing
> the map and drawing things, and additionally from fuzz between the older
> revisions and the current.
>
> OSM has not yet grappled with the concept of mapped objects having
> velocities relative to WGS84(Gwwww)/ITRFyyyy.
>
> > To me, "high precision" means cm level, or better, which is why I've
> > been saying that there is no such thing as a precise WGS84 coordinate
> > (unless perhaps you are working for the US military).
>
> I don't follow the reference to being part of the military but perhaps
> there is non-public data.
>
> The US NGS seems to publish coordinates for CORS in IGS08 epcoh 2005.0
> and NAD83(2011) epoch 2010.0.  As far as I can tell WGS84(G1762), IGS08
> and ITRF08 are essentially the same.
>
> > Although the basic requirements are the same - any spatial dataset
> > should include meta-data that (correctly) identifies the reference
> > frame, the epoch, and the precision of the data.
>
> Sure.  But that becomes per-object data in a dataset of mixed origin
> (which is where my head is because of OSM), and I suspect one then runs
> into missing software support.
>
> Trying to get back to point for proj, then, I guess the question is what
> operations do people need to do are missing or awkward.  One thing I
> wonder about based on your metadata comments and my reaction is the
> notion of
>
>   T=createtransform(src_datum, src_epoch, dst_datum, dst_epoch)
>   apply_transform(T, vector_of_points[lat, lon, ellipsoidal_height])
>
> versus the notion that the point object (rather than the transform) has
> an epoch, to end up with something that feels like
>
>   T=createtransform(src_datum, dst_datum, dst_epoch)
>   apply_transform(T, vector_of_points[lat, lon, ellipsoidal_height, epoch])
>
> Probably that's too messy to contemplate for now, without a clear enough
> need.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190718/2775e3ca/attachment.html>

From kreve at sdfe.dk  Thu Jul 18 10:10:33 2019
From: kreve at sdfe.dk (Kristian Evers)
Date: Thu, 18 Jul 2019 17:10:33 +0000
Subject: [PROJ] Motion: Accept RFC4 (PROJ JNI Overhaul)
In-Reply-To: <rmi8ssw4sd3.fsf@s1.lexort.com>
References: <3771054cac8145f7b6ebaf57f858e9cd@sdfe.dk>
 <2541951.JhyMyR7Bbo@even-i700> <C70E6696-98D3-4514-B943-002AB605C8DB@hobu.co>
 <rmi8ssw4sd3.fsf@s1.lexort.com>
Message-ID: <58026EEE-B4F7-41DD-BA36-D74DDB53109C@sdfe.dk>



> On 17 Jul 2019, at 17:02, Greg Troxel <gdt at lexort.com> wrote:
> 
> I'm not PSC of course, but with a lot of +0 sentiment (which I interpret
> as "I don't really like this, but I don't feel like it's reasonable to
> object"), it seems like it might be a good time to have the java binding
> in it's own package.
> 

This is exactly how I am reading things as well. Thanks for putting it in
writing, Greg. 

I am withdrawing the RFC and will instead work towards providing a
Java interface for PROJ in a stand-alone repository. Exactly where is
yet to be decided. Maybe as part of the OSGeo GitHub organisation?

Thanks to everyone for the feedback on this RFC. Many of the comments
we’ve received are still valid for a stand-alone package and will definitely
help improve these new bindings.

As for the current Java bindings in the PROJ repository, I would say
that the logical extension to this debate is that they will have to be
removed in the near future. More on that later.

/Kristian

> From a packaging system point of view, separate is better, as it would
> be crazy to require java to be installed to build the basic proj
> package, and thus you end up building a proj package and then a
> proj-java package.  If the java bindings are in a subdir and have their
> own entirely separate build system (such that building proj doesn't
> build them, and building the java bindings uses the installed proj and
> doesn't build it locally), that's not really a problem, but it then also
> doesn't really help to have them in the same source tarball.
> 
> So were I PSC, I'd be inclined to -1 and +1 in favor of "put this in a
> separate repo".   That's not meant to be criticism of the code or java,
> just a strong bias to having separable things separate.
> 
> 
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj


From gdt at lexort.com  Thu Jul 18 13:10:19 2019
From: gdt at lexort.com (Greg Troxel)
Date: Thu, 18 Jul 2019 16:10:19 -0400
Subject: [PROJ] Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <CAF3Sn4U4L9WF6Ye209pw4RP=jqS5w1bKuQR-kyPaR9mdV8sJQg@mail.gmail.com>
 (Nick Mein's message of "Thu, 18 Jul 2019 18:21:46 +1200")
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <CABqeU+hcqmqcBwOciG-61U=ghGwVaLfZ8o2FDYwPMqoDzHZUMQ@mail.gmail.com>
 <63f47524-ccab-489f-f949-5165fadf4dce@geomatys.com>
 <fa42a4a6-d37f-84f4-c39e-1fd882b94279@gmail.com>
 <rmih87m6ovb.fsf@s1.lexort.com>
 <4d5f05d0-b284-b4c7-fccd-9a1a0733006f@gmail.com>
 <CAF3Sn4UQ-8n1EcQoYLYM84EbCLAJ+J75-DRT2dY8YdGLeWgCGg@mail.gmail.com>
 <rmitvbk1pr5.fsf@s1.lexort.com>
 <CAF3Sn4U4L9WF6Ye209pw4RP=jqS5w1bKuQR-kyPaR9mdV8sJQg@mail.gmail.com>
Message-ID: <rmih87jw1ck.fsf@s1.lexort.com>

Nick Mein <nick_mein at trimble.com> writes:

>>> To me, "high precision" means cm level, or better, which is why I've
>>> been saying that there is no such thing as a precise WGS84 coordinate
>>> (unless perhaps you are working for the US military).
>
>> I don't follow the reference to being part of the military but perhaps
>> there is non-public data.
>
>> The US NGS seems to publish coordinates for CORS in IGS08 epcoh 2005.0
>>and NAD83(2011) epoch 2010.0.  As far as I can tell WGS84(G1762), IGS08
>>and ITRF08 are essentially the same.
>
> Maybe I'm being a bit pedantic here. But the trouble is that a coordinate
> that is described as being "WGS84" is generally either not precise (because
> it is derived from broadcast orbits), or not WGS84 (because it is actually
> some in some national datum that some piece of software decided was
> equivalent to WGS84). So yes, if your precise point positioning service
> gives you a ISG08 coordinate, that is essentially the same as a
> WGS84(G1762) or ITRF08 or ITRF14 coordinate. But calling it "WGS84" doesn't
> seem to help anyone.

Totally fair, and now I understand what you mean.

I was separating in my mind, but not saying it, the intrinsic quality of
the datum, and accuracy issues surrounding coordinates obtained in that
datum.  I now realize that there is effectively no path to access WGS84
at a precise level because nobody publishes WGS84 coordinates of CORS
stations, etc.  That explains the "outside DOD" comment too.

Agreed that precise use of GPS is invariably in some other datum.  At
least these days IGSxx ITRFxx and WGS84(recent) are all basically the
same.

I have a hard time finding clear statements about WAAS, but it seems to
be defined to be some ITRF, last I was able to find it.   I had wondered
if it would be in NAD83, given the FAA.   So I now expect to get the
same coordinates out of nav-grade GPS with waas and without (modulo
errors of course).

From support at mnspoint.com  Tue Jul 23 06:12:45 2019
From: support at mnspoint.com (support at mnspoint.com)
Date: Tue, 23 Jul 2019 15:12:45 +0200
Subject: [PROJ] Fwd: Re:  Static/Dynamic Webmapping Problem version 2.0
In-Reply-To: <4e0b335124fc9992557cb1111be30891@mnspoint.com>
References: <CABqeU+gkjWBkjpMNnbh+7oNLUSfSLCRwbFjKfw=hdFt_NHQogw@mail.gmail.com>
 <4e0b335124fc9992557cb1111be30891@mnspoint.com>
Message-ID: <9993bb8697b7a26d3f453f88774b5d24@mnspoint.com>

Hello,

we use a very simple approach to handle plate shiftings related to
whatever datums:

We simply add always a date with the point coordinates. Additionally we
have the datum reference also stored (or use wgs84 always when storing).
So if there is any need to shift the point later related to the date
when it was defined and when it is later referenced we can do it (the
program does it). As said by storing the date with the coordinates and
datum takes care of any later shifts.

Basically this is exatly the same as creating a new datum (ex. GDA2020)
every now and then but it is much more accurate also since it is
accurate to a day and not just some time year 2020.

Regards. Janne.

------------------------------------------------------

Cameron Shorter kirjoitti 2019-07-12 15:32:

> Hi folks,
> I've incorporated a lot of feeback from people on this list, and from
> the Australian geospatial people and have restarted the Static/Dynamic
> Webmapping Problem.
> 
> Comments are encouraged.
> 
> If commenting, please log so we know who says what. Please don't
> change the text as it quickly becomes difficult to read.
> 
> I'm very mindful that this is a challenging problem, requiring
> collaboration to solve, and we still have quite a bit of work in
> achieving this.
> 
> Doc here:
> 
https://docs.google.com/document/d/1A4Q8-863fKQ-BJzh0ruz7bKvk3itiy8LmmWrwUR1J9g/edit#heading=h.nn4r38g65fhf
> 
> 
> Original problem statement:
> 
>> _ > Our Australian spatial data users are about to face a systematic
> mismatch __challenge when trying to use multiple static datums
> (GDA2020, GDA94) with __the dynamic datum (WGS84). At the moment, it
> is government agencies__ grappling with the problem, but it is about
> to become a mainstream issue._
> 
> Cheers, Cameron
> 
> --
> 
> Cameron Shorter
> Technology Demystifier
> Open Technologies and Geospatial Consultant
> 
> M +61 (0) 419 142 254

From cameron.shorter at gmail.com  Tue Jul 23 19:38:45 2019
From: cameron.shorter at gmail.com (Cameron Shorter)
Date: Wed, 24 Jul 2019 12:38:45 +1000
Subject: [PROJ] FW: WGS84 / Web Mercator
In-Reply-To: <SYBPR01MB4652959716EF5A88CD77212C8EC60@SYBPR01MB4652.ausprd01.prod.outlook.com>
References: <51a5c286-5065-4ff3-a431-485de3d86efb@EXA2-4.connect.tas.gov.au>
 <A8579F79E9007744A0741017D49253312B29466D@CHQMAIL01.lands.resnet.qg>
 <ME2PR01MB5155ECEC8A57596660F7B205FAC80@ME2PR01MB5155.ausprd01.prod.outlook.com>
 <SY2PR01MB2826BA54BFC1B8BF42893FD4F1C80@SY2PR01MB2826.ausprd01.prod.outlook.com>
 <A8579F79E9007744A0741017D49253312B294799@CHQMAIL01.lands.resnet.qg>
 <SY2PR01MB28269C323ABE2DB324D51AFEF1C80@SY2PR01MB2826.ausprd01.prod.outlook.com>
 <5baa4dea-d042-4b5f-a573-5f5147b88ff8@EXA2-3.connect.tas.gov.au>
 <SY2PR01MB28263BBD72C3D650B73B1E78F1C60@SY2PR01MB2826.ausprd01.prod.outlook.com>
 <SYBPR01MB4652E8B5F7CE40C7A0D71ECC8EC60@SYBPR01MB4652.ausprd01.prod.outlook.com>
 <SY2PR01MB2826A37AB02F36C85C7FE7F6F1C60@SY2PR01MB2826.ausprd01.prod.outlook.com>
 <SYBPR01MB4652959716EF5A88CD77212C8EC60@SYBPR01MB4652.ausprd01.prod.outlook.com>
Message-ID: <d4db29bd-fefe-3fd4-f962-ab0bd76e2f48@gmail.com>

With permission, I'm forwarding through this email from ESRI, which 
provides some great clarifications to some of the questions being asked 
in this email list.

Thanks Gordon and Keith for this detailed response.

On 24/7/19 12:30 pm, Cameron Shorter wrote:
>
> *From:*Gordon Sumerling [mailto:GSumerling at esriaustralia.com.au]
> *Sent:* Wednesday, 24 July 2019 10:04 AM
> *Subject:* RE: WGS84 / Web Mercator - next steps
>
> Hello Michael and Cameron,
>
> I have asked Kevin Kelly and Melita Kennedy from Esri on their 
> thoughts on your proposal. The response from Kevin is as follows:
>
> /Geodetically, the proposed solution makes much more sense than 
> equating GDA2020 with WGS84. It also maintains the equivalence of 
> GDA94 and WGS84. Below are a few fine points of clarification. I am 
> certain this will be confusing, but it’s the new normal in geodetic 
> datum management./
>
> /GDA94 is aligned to ITRF92 at epoch 1994.0 and GDA2020 is aligned to 
> ITRF2014 at epoch 2020.0. In the WGS84 series of realizations, GDA94 
> is most closely aligned with WGS84(G730), which is itself aligned to 
> ITRF91 at epoch 1994.0. /
>
> /The proposed solution, essentially defines a non-null 
> WGS84-to-GDA2020 transformation that accounts for the roughly 1.8 
> meter difference between the two frames (GDA94/WGS84(G730) and 
> GDA2020). This is good. More correctly though, the transformation 
> should read: WGS84(G730)-to-GDA2020. It is understood that the dynamic 
> part of WGS84 is neglected in this transformation, meaning that over 
> time WGS84 and GDA2020 will drift apart. /
>
> /Now, the current realization of WGS84 is WGS84(G1762) which is 
> aligned to ITRF2008 at epoch 2005.0. And, I hear through the U.S. 
> government grapevine that a new realization of WGS84 aligned to 
> ITRF2014 is soon to be announced. Since GDA2020 is aligned with 
> ITRF2014 at epoch 2020.0, there is a slight misalignment between 
> GDA2020 and WGS84(G1762), which does not include plate motion between 
> the two defining epochs. /
>
> /The upshot of all this is that the proposed solution to get data into 
> WGS84 from GDA2020 will actually yield GDA94/WGS84(G730) coordinates, 
> it will not provide WGS84(G1762) coordinates, nor values in the 
> forthcoming realization of WGS84, WGS84(G-Something). The reverse, 
> getting data into GDA2020 from WGS84, is somewhat different. Users 
> with data in any WGS84 realization after WGS84(G730), using the 
> proposed solution, will neglect the misalignment between their 
> realization and WGS84(G730), because the transformation parameters 
> assume WGS84 coordinates are actually WGS84(G730) values./
>
> /Though confusing, just some facts to be aware of to better educate 
> users./
>
> Regards
>
> *Gordon Sumerling | Principal Consultant *
>
> Esri Australia | Ground Floor, 15 Bentham Street | Adelaide, SA 5000 | 
> Australia
>
-- 
Cameron Shorter
Technology Demystifier
Open Technologies and Geospatial Consultant

M +61 (0) 419 142 254

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190724/b762f4aa/attachment.html>

From nyall.dawson at gmail.com  Sun Jul 28 23:19:40 2019
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 29 Jul 2019 16:19:40 +1000
Subject: [PROJ] Reviews requested: On GDA2020, PROJ 6 and QGIS
Message-ID: <CAB28AsjyzRrBvpPpJ65JiLJBCMprL_nSEqLTBcJVf_9thuNhRg@mail.gmail.com>

Hi list!

I recently spent some time writing up my experiences with porting QGIS
to proj 6, and the lessons learnt and recommendations for other
applications which want to port to proj 6 OR (more specifically)
ensure that they correctly handle the Australian/GDA2020 use case.

If I can push my luck and ask anything more of this community -- I'd
love some peer reviews of this document!

When it's finalised, we'll be distributing it widely as our
recommendations for handling this situation, and likely presenting on
it at conferences such as FOSS4G Oceania.

A draft copy is available for review at:
https://docs.google.com/document/d/1bYp9oYvKx5VnkAtv5OffNRcTuLrevd8DHAjxzRzXFoU/edit?usp=sharing

Many thanks in advance!
Nyall

From kreve at sdfe.dk  Mon Jul 29 03:20:28 2019
From: kreve at sdfe.dk (Kristian Evers)
Date: Mon, 29 Jul 2019 10:20:28 +0000
Subject: [PROJ] Reviews requested: On GDA2020, PROJ 6 and QGIS
In-Reply-To: <CAB28AsjyzRrBvpPpJ65JiLJBCMprL_nSEqLTBcJVf_9thuNhRg@mail.gmail.com>
References: <CAB28AsjyzRrBvpPpJ65JiLJBCMprL_nSEqLTBcJVf_9thuNhRg@mail.gmail.com>
Message-ID: <3ab47e037ed34c5f890ed296ff436f35@sdfe.dk>

Nyall,

I think you've wrapped up you experiences very nicely. In fact, I think what you've
written is a great introduction to the intricacies of using the PROJ API. With a bit of
modification it could serve as a chapter in the API documentation, if you'd be
willing to let use it, that is :-)

As you've seen, I have suggested a few changes and commented on some minor
details. All in all it is a very well-written document that explains nicely what you
have learned in the process of adopting the new PROJ API into QGIS. Good job!

/Kristian

-----Original Message-----
From: PROJ <proj-bounces at lists.osgeo.org> On Behalf Of Nyall Dawson
Sent: 29. juli 2019 08:20
To: PROJ <proj at lists.osgeo.org>
Subject: [PROJ] Reviews requested: On GDA2020, PROJ 6 and QGIS

Hi list!

I recently spent some time writing up my experiences with porting QGIS
to proj 6, and the lessons learnt and recommendations for other
applications which want to port to proj 6 OR (more specifically)
ensure that they correctly handle the Australian/GDA2020 use case.

If I can push my luck and ask anything more of this community -- I'd
love some peer reviews of this document!

When it's finalised, we'll be distributing it widely as our
recommendations for handling this situation, and likely presenting on
it at conferences such as FOSS4G Oceania.

A draft copy is available for review at:
https://docs.google.com/document/d/1bYp9oYvKx5VnkAtv5OffNRcTuLrevd8DHAjxzRzXFoU/edit?usp=sharing

Many thanks in advance!
Nyall
_______________________________________________
PROJ mailing list
PROJ at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/proj

From nyall.dawson at gmail.com  Mon Jul 29 17:20:54 2019
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 30 Jul 2019 10:20:54 +1000
Subject: [PROJ] Reviews requested: On GDA2020, PROJ 6 and QGIS
In-Reply-To: <3ab47e037ed34c5f890ed296ff436f35@sdfe.dk>
References: <CAB28AsjyzRrBvpPpJ65JiLJBCMprL_nSEqLTBcJVf_9thuNhRg@mail.gmail.com>
 <3ab47e037ed34c5f890ed296ff436f35@sdfe.dk>
Message-ID: <CAB28Asj=eZFOgE2Le9417jW7NK99=NkhVODwPqyVJS8byTzcvw@mail.gmail.com>

On Mon, 29 Jul 2019 at 20:20, Kristian Evers <kreve at sdfe.dk> wrote:
>
> Nyall,
>
> I think you've wrapped up you experiences very nicely. In fact, I think what you've
> written is a great introduction to the intricacies of using the PROJ API. With a bit of
> modification it could serve as a chapter in the API documentation, if you'd be
> willing to let use it, that is :-)

Thanks for the kind words! I'd certainly be open to re-use of any part
of this within the PROJ API documentation.

> As you've seen, I have suggested a few changes and commented on some minor
> details. All in all it is a very well-written document that explains nicely what you
> have learned in the process of adopting the new PROJ API into QGIS. Good job!

Great, thanks reviewing Kristian -- it's VERY much appreciated! I've
revised based on your feedback now.

Nyall

From knudsen.thomas at gmail.com  Tue Jul 30 04:37:05 2019
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Tue, 30 Jul 2019 13:37:05 +0200
Subject: [PROJ] Reviews requested: On GDA2020, PROJ 6 and QGIS
In-Reply-To: <CAB28Asj=eZFOgE2Le9417jW7NK99=NkhVODwPqyVJS8byTzcvw@mail.gmail.com>
References: <CAB28AsjyzRrBvpPpJ65JiLJBCMprL_nSEqLTBcJVf_9thuNhRg@mail.gmail.com>
 <3ab47e037ed34c5f890ed296ff436f35@sdfe.dk>
 <CAB28Asj=eZFOgE2Le9417jW7NK99=NkhVODwPqyVJS8byTzcvw@mail.gmail.com>
Message-ID: <CAH0YoEO2Q+=6xocMbbEH1j3saczPbvDRCmV2JSeVv6-hx_tagg@mail.gmail.com>

Nyall, I am on vacation right now, and have not had time to read all your
work (although at a first glance, it looks excellent). I have, however,
added suggested changes correcting the actual  chronology of PROJ
development (pipelines and geodetic building bricks arriving in PROJ v 5,
and the results of the GDAL barn raising in v 6).

I have also added references to the two conference papers introducing the
pipeline operator: Kristian Evers did the presentation for the surveying
crowd during FIG working week, 2017, while I introduced pipelines to the
geodesy/geoinformatics crowd during European Geosciences Union General
Assembly, also in the spring of 2017.

I have allowed myself to put the reference to the "Knudsen and Evers" paper
before the "Evers and Knudsen" one. This is solely to assert my academic
priority as the designer and implementer of the PROJ pipeline concept.
While unimportant to my current "operational geodesist"-role, it is of
importance to my prior (and perhaps future) "research geodesist"-role. Feel
free to change the order if this seems like too much vanity for an
otherwise perfectly fine day :-)

/Thomas





Den tir. 30. jul. 2019 kl. 02.21 skrev Nyall Dawson <nyall.dawson at gmail.com
>:

> On Mon, 29 Jul 2019 at 20:20, Kristian Evers <kreve at sdfe.dk> wrote:
> >
> > Nyall,
> >
> > I think you've wrapped up you experiences very nicely. In fact, I think
> what you've
> > written is a great introduction to the intricacies of using the PROJ
> API. With a bit of
> > modification it could serve as a chapter in the API documentation, if
> you'd be
> > willing to let use it, that is :-)
>
> Thanks for the kind words! I'd certainly be open to re-use of any part
> of this within the PROJ API documentation.
>
> > As you've seen, I have suggested a few changes and commented on some
> minor
> > details. All in all it is a very well-written document that explains
> nicely what you
> > have learned in the process of adopting the new PROJ API into QGIS. Good
> job!
>
> Great, thanks reviewing Kristian -- it's VERY much appreciated! I've
> revised based on your feedback now.
>
> Nyall
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190730/36a999e8/attachment.html>

From nyall.dawson at gmail.com  Tue Jul 30 15:37:14 2019
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 31 Jul 2019 08:37:14 +1000
Subject: [PROJ] Reviews requested: On GDA2020, PROJ 6 and QGIS
In-Reply-To: <CAH0YoEO2Q+=6xocMbbEH1j3saczPbvDRCmV2JSeVv6-hx_tagg@mail.gmail.com>
References: <CAB28AsjyzRrBvpPpJ65JiLJBCMprL_nSEqLTBcJVf_9thuNhRg@mail.gmail.com>
 <3ab47e037ed34c5f890ed296ff436f35@sdfe.dk>
 <CAB28Asj=eZFOgE2Le9417jW7NK99=NkhVODwPqyVJS8byTzcvw@mail.gmail.com>
 <CAH0YoEO2Q+=6xocMbbEH1j3saczPbvDRCmV2JSeVv6-hx_tagg@mail.gmail.com>
Message-ID: <CAB28AsgiceirrO2h34fSxEyKGw8wbQRZZN0r8L658kAX0PHZOw@mail.gmail.com>

On Tue, 30 Jul 2019 at 21:37, Thomas Knudsen <knudsen.thomas at gmail.com> wrote:
>
> Nyall, I am on vacation right now, and have not had time to read all your work (although at a first glance, it looks excellent). I have, however, added suggested changes correcting the actual  chronology of PROJ development (pipelines and geodetic building bricks arriving in PROJ v 5, and the results of the GDAL barn raising in v 6).

Thank you -- I've incorporated your improvements, they are much appreciated!

> I have also added references to the two conference papers introducing the pipeline operator: Kristian Evers did the presentation for the surveying crowd during FIG working week, 2017, while I introduced pipelines to the geodesy/geoinformatics crowd during European Geosciences Union General Assembly, also in the spring of 2017.
>
> I have allowed myself to put the reference to the "Knudsen and Evers" paper before the "Evers and Knudsen" one. This is solely to assert my academic priority as the designer and implementer of the PROJ pipeline concept. While unimportant to my current "operational geodesist"-role, it is of importance to my prior (and perhaps future) "research geodesist"-role. Feel free to change the order if this seems like too much vanity for an otherwise perfectly fine day :-)

Perfectly understandable, I've accepted the change.

Enjoy the rest of your vacation!
Nyall


>
> /Thomas
>
>
>
>
>
> Den tir. 30. jul. 2019 kl. 02.21 skrev Nyall Dawson <nyall.dawson at gmail.com>:
>>
>> On Mon, 29 Jul 2019 at 20:20, Kristian Evers <kreve at sdfe.dk> wrote:
>> >
>> > Nyall,
>> >
>> > I think you've wrapped up you experiences very nicely. In fact, I think what you've
>> > written is a great introduction to the intricacies of using the PROJ API. With a bit of
>> > modification it could serve as a chapter in the API documentation, if you'd be
>> > willing to let use it, that is :-)
>>
>> Thanks for the kind words! I'd certainly be open to re-use of any part
>> of this within the PROJ API documentation.
>>
>> > As you've seen, I have suggested a few changes and commented on some minor
>> > details. All in all it is a very well-written document that explains nicely what you
>> > have learned in the process of adopting the new PROJ API into QGIS. Good job!
>>
>> Great, thanks reviewing Kristian -- it's VERY much appreciated! I've
>> revised based on your feedback now.
>>
>> Nyall
>> _______________________________________________
>> PROJ mailing list
>> PROJ at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/proj

From cameron.shorter at gmail.com  Tue Jul 30 22:23:53 2019
From: cameron.shorter at gmail.com (Cameron Shorter)
Date: Wed, 31 Jul 2019 15:23:53 +1000
Subject: [PROJ] Dynamic/static WGS84 datum problem with web-mapping and
 map misalignment
Message-ID: <395e939e-6fc4-7d4a-a35e-01b8be1d1a82@gmail.com>

Sharing email thread from Roger Lott and Joel Haasdyk on this topic, 
with permission. (changed to plain text to fit under email list size limit).

On 31/7/19 2:32 am, Roger Lott (EPSG) wrote:
Australia is not the only place with this problem – it is global. But 
because the Australian plate is moving faster than most, the problem is 
more acute for you. There are a number of issues here. Joel has 
summarised many of the geodetic aspects. But as I see it the real 
problems are (i) lack of publicity/education, (ii) software inadequacies 
(in part as a result of (i)).

·        First we have the issue of dynamic reference 
frames/datums/CRSs. The issue has been well understood for a long time 
in the geodetic community but not much outside that community. It is 
therefore an issue of education. It has become significant only 
recently, partially through improvements in real-time positioning 
technology and partially due to the time lapse since satellite 
technology was first used for defining national CRSs and the plate 
movement over that period since then. ISO and OGC standards for defining 
CRSs have recently been updated to emphasise the distinction between 
static and dynamic frames/datums. This update potentially provides a 
vehicle for some education.

·        The ISO/OGC data model includes a 'transformation accuracy' 
attribute. Joel cites that for the EPSG transformations from GDA to WGS 
84 which have an accuracy of 3m (agreed by Geoscience Australia geodesy 
division – talk to Dan Jaksa). But unfortunately very little if any 
software uses the information. The equality of two CRSs is only true 
within that accuracy. That is not widely understood and therefore is an 
issue of education. Deprecating these 'null' transformations as Joel 
suggests might alleviate the problem, but will not solve it. What 'null' 
means needs to be more generally understood.

·        GIS software typically uses a hub approach for transforming 
between two local datums/reference frames. Ideally, when a direct 
transformation such as GDA94 > GDA2020 is available, this should be 
used. Unfortunately much transformation software has been developed 
without that capability.. There is hope though. The Proj open source 
software library which underpins quite a lot of GIS software has 
recently been updated to proj.6 https://proj.org/ and this now chooses 
the direct route if available. Proj.6 is populated with EPSG data and 
will therefore choose one of the GDA94 to GDA2020 direct options 
(Helmert 7-parameter, NTv2 conformal or NTv2 conformal+ distortion), 
EPSG codes 8048, 8446 and 8447 respectively). (By default I imagine it 
will use the Helmert transformation, but I have cc'd this to Even 
Rouault who will be able to clarify this).

·        The hub approach has been emphasised through some extensions to 
well-known text definitions of CRSs that include a TOWGS84 attribute. 
The well-known text definition of CRSs was updated through so-called 
WKT2 deliberately omitted the TOWGS84 function, but phasing out of WKT1 
has been difficult. WKT2 has itself recently been updated to include the 
differentiation between static and dynamic CRSs and this perhaps is an 
opportunity to highlight the general issue. OGC's revised documentation 
is on the verge of publication, but is yet to be made. We should take 
the opportunity of using the OGS press release for that for highlighting 
this issue.

·        If a hub approach is to be used then the choice of the hub CRS 
may be critical. Using ETRS89 in Europe is a requirement of the INSPIRE 
Directives, but software rarely uses it, instead using WGS 84. The 
choice of WGS 84 has historic background, based on information available 
through the predecessor's of the US National Geospatial Agency and that 
agencies procurement requirements. 30 years ago it was a valid choice. 
Now it is less so. For two reasons:

o   Using a dynamic CRS as a hub will be problematic if no account is 
made of time dependency – an educational issue, but also a software 
problem in that there is little non-geodetic software currently 
implementing time-dependent transformation methods..

o    'WGS 84' is ambiguous. There have been six realizations of WGS 84, 
and this is not well known in the GIS community. This is about to be 
exposed as later this year IOGP will be changing its definition of 
EPSG::4326 to be based on a datum ensemble (currently only indicated by 
remarks in the datum definition, which nobody reads) and I am expecting 
an avalanche of uniformed comment on internet forums

o    The formal realizations of WGS 84 – Transit and all G realizations 
– are dynamic. Coordinates change with time. To be unambiguous 
coordinate metadata needs to include coordinate epoch.

o    WGS 84 as described through EPSG::4326 represents any or all of the 
formal realizations, without distinction. It is considered to be static, 
with a several metre uncertainty.

In populating the EPSG dataset with copies of transformations to WGS 84, 
IOGP has assisted the use of the hub transformation technique. We will 
be reviewing our policy for that in our October meeting, so if anyone 
has any views that they would like to be taken into consideration, let 
me know.

In association with that meeting in Houston we will be hosting an 
'industry day' conference devoted to the theme of dynamic CRSs. Although 
geared to the oil industry some of the material being prepared for it 
may have broader application.

For web mapping purposes, I believe that consideration is being given to 
updating the OGC WMS specification. If a revision of WMS is to happen, 
this is a huge opportunity to expose the issues discussed in this email 
trail to the geospatial software development community. But we have to 
remain cognoscente of the fact that anyone who is happy with spatial 
referencing no better than 2 or 3 metres accuracy has no interest in 
these complications. There is a balance to be struck in explaining that 
although of particular interest to geodesists chasing mm, it cannot be 
avoided for many 'normal' spatial referencing requirements. However it 
seems to me that a WMS spec revision is a huge opportunity to make WMS 
developers aware of the issues associated with dynamic CRSs and problems 
associated with the near-ubiquitous use of WGS 84.

Roger

---

From: Joel Haasdyk [mailto:joel.haasdyk at customerservice.nsw.gov.au]
Sent: 29 July 2019 21:32
To: Cameron Shorter; Roger Lott; Keith Ryden; Gobe Hobona
Cc: Cameron Shorter; Scott Simmons; Joseph Abhayaratna; Giudici, Michael 
(DPIPWE); Nicholas.Brown
Subject: RE: Dynamic/static WGS84 datum problem with web-mapping and map 
misalignment

Thanks Cameron, and Joe for this introduction,

If I were going to distil the immediate issue down to one page:

·       WGS84 ‘Web Mercator’, the defacto standard projection used for 
web-mapping, has simplified the datum on which it is based, of the same 
name, WGS84.

·       In practice, Web-Mercator ignores the fact that the true WGS84 
coordinates of a feature actually change over time to reflect the 
movement of the tectonic plates, and also that WGS84 itself has been 
redefined several times. WGS84 is ‘dynamic’.

·       Web-mapping based on Web-Mercator has generally implicitly 
chosen a time-stamp or ‘epoch’, usually based on the local national 
datum, at which to describe coordinates:
e.g. 01 Jan 1994 for the national ‘GDA94’ datum of Australia, and 01 Jan 
1989 for ETRS89 in Europe. WGS84 is treated as ‘static’ for web-mapping 
purposes.

·       Large amounts of data have historically been tiled and cached in 
WGS84 at this ‘local’ epoch.

·       As nations modernise datums, we will see new national datums 
defined, based on new modern epochs. For example, GDA2020 in Australia 
is a new static datum expressed at 01 Jan 2020. GDA94 ó GDA2020 
transformations describe the ~1.8 metre movement of the Australian 
tectonic plate over 26 years between epochs 1994.0 and 2020.0.

·       EPSG codes, which define how most software current define and 
transform between datums often include NULL transformations to WGS84. In 
Australia, this includes:

o   EPSG::1150 NULL transformation GDA94 ó WGS84 (nominal 3m accuracy)
o   EPSG::8450 NULL transformation GDA2020 ó WGS84 (nominal 3m accuracy)

·       Standard web-mapping applications apply these EPSG codes and 
transformations.  As a result, mapping data in both GDA94 and GDA2020, 
which represent Australian coordinates at different epochs, will result 
in misaligned datasets in WGS84 Web Mercator.

·       International collaboration is required to create and 
disseminate a solution to this issue before it affects an increasing 
number of regions who are modernising their datums;
e.g. Australia released GDA2020 in 2017; The U.S.A. plans to release new 
modernised datums in 2022.

·       The proposed solution is likely to be in two parts:

1)         Adopt a short term solution for the Australian context.
One proposal is to deprecate an existing EPSG code (e.g. the EPSG::8450 
WGS84 ó GDA2020 NULL transformation) and replace it with a 
transformation which brings all local data back into alignment at a 
conventional time-stamp.
The existing 1994.0 epoch, at which much WGS84 data already is tiled and 
stored, is a likely candidate, but the actual solution is currently up 
for debate.

2)         Pursue a longer-term solution for the global context.

For example, explicitly define a WGS84 version for web-mapping at 
conventional epoch. Perhaps even adopt a different epoch per region to 
reflect current practice in web-mapping..
Define a datum (or employ an existing datum such as ITRF) which more 
explicitly caters for time-dependent coordination, and update 
web-mapping applications to cater for the realities of tectonic plates, 
local deformation and coordinates that change over time.

Thanks,
Joel Haasdyk

<snipped the rest of the thread>

-- 
Cameron Shorter
Technology Demystifier
Open Technologies and Geospatial Consultant

M +61 (0) 419 142 254


From cameron.shorter at gmail.com  Tue Jul 30 22:55:51 2019
From: cameron.shorter at gmail.com (Cameron Shorter)
Date: Wed, 31 Jul 2019 15:55:51 +1000
Subject: [PROJ] Reviews requested: On GDA2020, PROJ 6 and QGIS
In-Reply-To: <CAB28AsjyzRrBvpPpJ65JiLJBCMprL_nSEqLTBcJVf_9thuNhRg@mail.gmail.com>
References: <CAB28AsjyzRrBvpPpJ65JiLJBCMprL_nSEqLTBcJVf_9thuNhRg@mail.gmail.com>
Message-ID: <CABqeU+jKkkC63FYzO5pwrK5L=A0UNZozsJD017DEJui=Gv+3Ew@mail.gmail.com>

Nicely written Nyall,
I found this very informative and feel it will be very useful for those
following your footsteps.
I've made a few minor suggestions, mostly limited to syntax and writing
style.
Warm regards, Cameron

On Mon, 29 Jul 2019 at 16:19, Nyall Dawson <nyall.dawson at gmail.com> wrote:

> Hi list!
>
> I recently spent some time writing up my experiences with porting QGIS
> to proj 6, and the lessons learnt and recommendations for other
> applications which want to port to proj 6 OR (more specifically)
> ensure that they correctly handle the Australian/GDA2020 use case.
>
> If I can push my luck and ask anything more of this community -- I'd
> love some peer reviews of this document!
>
> When it's finalised, we'll be distributing it widely as our
> recommendations for handling this situation, and likely presenting on
> it at conferences such as FOSS4G Oceania.
>
> A draft copy is available for review at:
>
> https://docs.google.com/document/d/1bYp9oYvKx5VnkAtv5OffNRcTuLrevd8DHAjxzRzXFoU/edit?usp=sharing
>
> Many thanks in advance!
> Nyall
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>


-- 
Cameron Shorter
Technology Demystifier
Open Technologies and Geospatial Consultant

M +61 (0) 419 142 254
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190731/eb8ec8c5/attachment.html>

From martin.desruisseaux at geomatys.com  Wed Jul 31 02:53:47 2019
From: martin.desruisseaux at geomatys.com (Martin Desruisseaux)
Date: Wed, 31 Jul 2019 11:53:47 +0200
Subject: [PROJ] Dynamic/static WGS84 datum problem with web-mapping and
 map misalignment
In-Reply-To: <395e939e-6fc4-7d4a-a35e-01b8be1d1a82@gmail.com>
References: <395e939e-6fc4-7d4a-a35e-01b8be1d1a82@gmail.com>
Message-ID: <1b960bd8-3f72-f679-1940-938d9137c95a@geomatys.com>

Thanks Cameron, Roger and all for sharing this email. A note on
terminology: the "hub transformation technique" described by Roger is
also named "early-binding" in EPSG guidance notes. The better technique,
now implemented by PROJ 6, is named "late-binding" in guidance notes. I
mention that because we used the "early/late-binding" terminology in
past discussions.

Martin



From martin.desruisseaux at geomatys.com  Wed Jul 31 07:43:13 2019
From: martin.desruisseaux at geomatys.com (Martin Desruisseaux)
Date: Wed, 31 Jul 2019 16:43:13 +0200
Subject: [PROJ] Reviews requested: On GDA2020, PROJ 6 and QGIS
In-Reply-To: <3ab47e037ed34c5f890ed296ff436f35@sdfe.dk>
References: <CAB28AsjyzRrBvpPpJ65JiLJBCMprL_nSEqLTBcJVf_9thuNhRg@mail.gmail.com>
 <3ab47e037ed34c5f890ed296ff436f35@sdfe.dk>
Message-ID: <486e8a66-814e-cfdb-8168-534f1add0554@geomatys.com>

I would like to bring a little bit of additional context. This is not a
request to modify the document, only a point of view from outside the
PROJ community.

While the Australian CRS are good examples of "static versus dynamic
datum" and "early-binding versus late-binding implementations" problems,
those problems existed long before. I mentioned in a previous post [1]
the example of transformation from Martinique 1938 (EPSG:4625) to RGAF09
(EPSG:5489), which can not be represented accurately in "early-binding"
implementations like PROJ 4. Other examples exist in Chile and Japan.
Improving the accuracy of those transformations involve two parts: the
introduction of dynamic datum, and the use of "late-binding" technique
in software. Dynamic datum is a recent addition in OGC/ISO standards,
but the "late-binding" technique is known for a long time. It was
explicitly recommended by OGP in 2011 [2] and enabled in OGC standards
since 2001 (admittedly in a way that coexisted with early-binding until
2007).

So the need for "late-binding" approach was known for a long time. It is
implemented in GeoTools (and later Apache SIS) for 15 years. What is
recent is the publicity that this issue got thanks to PROJ 6 upgrade.
But before this very welcome effort, I had trouble to convince peoples
in FOSS4G or other events that PROJ 4 early-binding approach was an
issue. Because PROJ is the most popular open-source referencing library,
it tends to be considered as a de-facto standard and that if a
referencing feature is not supported by PROJ, it probably means that
this feature is not worthy.

A consequence of PROJ position is that PROJ action (or inaction) impacts
a community much larger than the PROJ ecosystem. For example ESRI were
the first to implement WKT 2 in an open-source prototype [3] (I have
been told that they now have their own referencing engine in replacement
of PROJ). If I understood correctly, ESRI has WKT2-ready products for a
few years but had hesitations to activate that feature because of its
incompatibility with GDAL-based software. They were discussions in OGC
meetings saying that even for a vendor as big as ESRI, moving to WKT 2
before PROJ is risky because they would probably get feedback from some
users claiming that the new products are broken because QGIS can not
read their files. In my understanding, unblocking that situation was
part of the motivations for some gdalbarn sponsors.

Today PROJ 6 may be the most advanced open-source referencing library
(Apache SIS does not yet support dynamic datum). But it is unclear if
the previous situation, where progress in referencing services have been
impeded by PROJ 4 widespread position, could happen again in the future.
Some techniques exist for reducing vendor-locking for applications that
depend on a referencing library. WKT 2 will hopefully be a great help,
but another technique could be a clear separation between API and
implementation. Such separation is familiar to Java developers through
Java interfaces, but seems more unfamiliar in C/C++ world were APIs seem
more often defined by implementations. I understand that there is few
incentive from a PROJ community point of view to enable more
implementation-independence on API side, but I just wanted to point out
that PROJ influence goes beyond the PROJ community and that it is
possible to increase the chances to keep this influence more positive
(compared to PROJ 4) in the future.

Regards,

    Martin

[1] https://www.geomatys.com/en/2017/09/20/proj-4-versus-apache-sis-an-accuracy-comparison-2/
[2] Geospatial Integrity of Geoscience Software (GIGS), Part 1, §3.4
[3] https://github.com/Esri/ogc-crs-wkt-parser

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190731/cb0d57de/attachment-0001.html>

From cameron.shorter at gmail.com  Wed Jul 31 19:32:30 2019
From: cameron.shorter at gmail.com (Cameron Shorter)
Date: Thu, 1 Aug 2019 12:32:30 +1000
Subject: [PROJ] Early vs Late binding
In-Reply-To: <486e8a66-814e-cfdb-8168-534f1add0554@geomatys.com>
References: <CAB28AsjyzRrBvpPpJ65JiLJBCMprL_nSEqLTBcJVf_9thuNhRg@mail.gmail.com>
 <3ab47e037ed34c5f890ed296ff436f35@sdfe.dk>
 <486e8a66-814e-cfdb-8168-534f1add0554@geomatys.com>
Message-ID: <CABqeU+i32PrydoB8Rnd=ZUkqJcfhb_8DNEc-AbW=dv4hLM5zCA@mail.gmail.com>

Hi Martin,
I'm hoping to expand upon descriptions of potential solutions to our
GDA2020/GDA94/WGS84 Web Mercator map misalignment problem, (possibly
extended to discuss a time-dependent reference frame).

I'm confused about the meaning of: "early-binding versus late-binding
implementations". Is it relevant to problems relevant to WGS84
map-misalignment or a time-dependent reference frame? If so, I'm hoping you
might be able to help explain how it might need to be described in
suggested solutions.

Warm regards, Cameron

On Thu, 1 Aug 2019 at 00:43, Martin Desruisseaux <
martin.desruisseaux at geomatys.com> wrote:

> I would like to bring a little bit of additional context. This is not a
> request to modify the document, only a point of view from outside the PROJ
> community.
>
> While the Australian CRS are good examples of "static versus dynamic
> datum" and "early-binding versus late-binding implementations" problems,
> those problems existed long before. I mentioned in a previous post [1] the
> example of transformation from Martinique 1938 (EPSG:4625) to RGAF09
> (EPSG:5489), which can not be represented accurately in "early-binding"
> implementations like PROJ 4. Other examples exist in Chile and Japan.
> Improving the accuracy of those transformations involve two parts: the
> introduction of dynamic datum, and the use of "late-binding" technique in
> software. Dynamic datum is a recent addition in OGC/ISO standards, but the
> "late-binding" technique is known for a long time. It was explicitly
> recommended by OGP in 2011 [2] and enabled in OGC standards since 2001
> (admittedly in a way that coexisted with early-binding until 2007).
>
> So the need for "late-binding" approach was known for a long time. It is
> implemented in GeoTools (and later Apache SIS) for 15 years. What is recent
> is the publicity that this issue got thanks to PROJ 6 upgrade. But before
> this very welcome effort, I had trouble to convince peoples in FOSS4G or
> other events that PROJ 4 early-binding approach was an issue. Because PROJ
> is the most popular open-source referencing library, it tends to be
> considered as a de-facto standard and that if a referencing feature is not
> supported by PROJ, it probably means that this feature is not worthy.
>
> A consequence of PROJ position is that PROJ action (or inaction) impacts a
> community much larger than the PROJ ecosystem. For example ESRI were the
> first to implement WKT 2 in an open-source prototype [3] (I have been told
> that they now have their own referencing engine in replacement of PROJ). If
> I understood correctly, ESRI has WKT2-ready products for a few years but
> had hesitations to activate that feature because of its incompatibility
> with GDAL-based software. They were discussions in OGC meetings saying that
> even for a vendor as big as ESRI, moving to WKT 2 before PROJ is risky
> because they would probably get feedback from some users claiming that the
> new products are broken because QGIS can not read their files. In my
> understanding, unblocking that situation was part of the motivations for
> some gdalbarn sponsors.
>
> Today PROJ 6 may be the most advanced open-source referencing library
> (Apache SIS does not yet support dynamic datum). But it is unclear if the
> previous situation, where progress in referencing services have been
> impeded by PROJ 4 widespread position, could happen again in the future.
> Some techniques exist for reducing vendor-locking for applications that
> depend on a referencing library. WKT 2 will hopefully be a great help, but
> another technique could be a clear separation between API and
> implementation. Such separation is familiar to Java developers through Java
> interfaces, but seems more unfamiliar in C/C++ world were APIs seem more
> often defined by implementations. I understand that there is few incentive
> from a PROJ community point of view to enable more
> implementation-independence on API side, but I just wanted to point out
> that PROJ influence goes beyond the PROJ community and that it is possible
> to increase the chances to keep this influence more positive (compared to
> PROJ 4) in the future.
>
> Regards,
>     Martin
>
> [1] https://www.geomatys.com/en/2017/09/20/proj-4-versus-apache-sis-an-accuracy-comparison-2/
> [2] Geospatial Integrity of Geoscience Software (GIGS), Part 1, §3.4
> [3] https://github.com/Esri/ogc-crs-wkt-parser
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>


-- 
Cameron Shorter
Technology Demystifier
Open Technologies and Geospatial Consultant

M +61 (0) 419 142 254
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20190801/a0067f83/attachment.html>

