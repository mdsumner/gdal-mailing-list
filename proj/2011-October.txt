From support.mn at elisanet.fi  Mon Oct  3 14:21:32 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Tue, 4 Oct 2011 00:21:32 +0300 (EEST)
Subject: [Proj] EPSG 7.9 Upgrade in Trunk
Message-ID: <18938453.10662901317676893271.JavaMail.support.mn@elisanet.fi>

Frank,

I hate geotiff since it does not carry the full information inside the
tiff file but can make an outside reference which nobody knows
where it leads. One should not allow any external references
except those that were once available when the geotiff was
created since all current and old programs can not handle new
external references since they do not carry the fresh database
with them. New definitions should carry all the data inside the
geotiff file but does geotiff even allow you to have any free datum
or similar?

The whole geotiff should be rewritten so that it would be more
stable and able to handle all current and future references
without any updates to the standard or databases. Preferably
a standard that would not need any external databases (which
BTW: the proj.4 definition almost is [if you count out those few
ellipses and datum names]).

Regards: Janne.

-------------------------------------


Frank Warmerdam [warmerdam at pobox.com] kirjoitti: 
> Folks,
> 
> I have upgraded libgeotiff, PROJ.4 and GDAL with EPSG definitions regenerated
> from the EPSG 7.9 database.  New "preferred datum shift selection" rules are
> also in place which will give preference to 7 parameter datum shifts over
> 3 parameter datum shifts are also in place causing a fair amount of churn
> in the definitions.
> 
> The updates are in "trunk" for each of the projects.  I plan to produce
> libgeotiff and PROJ.4 release candidates soon with the new definitions
> so if you think you might have objections please investigate and speak
> up promptly.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/warmerda
> and watch the world go round - Rush    | Geospatial Software Developer
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 



From schubert.seb at googlemail.com  Tue Oct  4 06:35:14 2011
From: schubert.seb at googlemail.com (Sebastian Schubert)
Date: Tue, 4 Oct 2011 15:35:14 +0200
Subject: [Proj] Projection from proj call
Message-ID: <201110041535.18913.schubert.seb@googlemail.com>

Hi,

I need to transform a wgs84 latlon to a latlon with the same properties 
except a moved pole (rotated system). Searching, I found the follwing

invproj -f "%f" -m 57.2957795130823 +proj=ob_tran +o_proj=latlon 
+o_lon_p=-166.6 +o_lat_p=37.483 +lon_0=180

which gives the correct result for the new pole coordinates 
+o_lon_p=-166.6 and +o_lat_p=37.483 .

Now I want to use qgis to rotate a map. However, I don't know how to 
specify a custom coordinate system correctly. I want to have exactly the 
same effect as above with the call of invproj when transforming a wgs84 
latlon. I tried to use some combination of the call above, but I always 
got the message that this is not a valid proj4 projection.

Thank you for any help!
Sebastian
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part.
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111004/d7bc4a15/attachment.sig>

From spethm at landcareresearch.co.nz  Tue Oct  4 16:05:59 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Wed, 05 Oct 2011 12:05:59 +1300
Subject: [Proj] Novice Examples?
Message-ID: <4E8B9157.2010104@landcareresearch.co.nz>

Greetings,
   I am a new proj.4 user and I would like to try some simple examples.  
I have been reading the user doc as well as the update (proj.4.3.pdf); 
however, I have been unsuccessful with executing the examples listed.

---- [ System Information] ----
System: Ubuntu 11.04 64-bit
Kernel: 2.6.38-11-generic
Proj.4 Version: 4.7.0 compiled from tarball

Here are two examples that show my problem:
---- [Example 1] ----
/opt/proj-4.7.0/src$ ./proj +proj=poly +lon_0=-66 +lat_0=40 -v
Rel. 4.7.1, 23 September 2009
<lt-proj>:
projection initialization failure
cause: major axis or radius = 0 or not given
program abnormally terminated

---- [Example 2] -----
/opt/proj-4.7.0/src$ ./proj +proj=poly +lon_0=-60 -E <<EOF
 > # sample points
 > 65W 43d15N
 > -55 37.33
 > EOF
Rel. 4.7.1, 23 September 2009
<lt-proj>:
projection initialization failure
cause: major axis or radius = 0 or not given
program abnormally terminated
---------------------------

It seems that I am not providing the radius or major axis.  Is this 
correct, if so, how do I provide this information?

Thank you for your help

--
Michael Speth
Landcare Research
Scientific Programmer



From warmerdam at pobox.com  Tue Oct  4 16:25:31 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 4 Oct 2011 16:25:31 -0700
Subject: [Proj] Novice Examples?
In-Reply-To: <4E8B9157.2010104@landcareresearch.co.nz>
References: <4E8B9157.2010104@landcareresearch.co.nz>
Message-ID: <CA+YzLBf=4hdnGFebQ9qwP7=VC87rj8NL4LUXopOuvgtRVbUuGA@mail.gmail.com>

On Tue, Oct 4, 2011 at 4:05 PM, Michael Speth
<spethm at landcareresearch.co.nz> wrote:
> Greetings,
>   I am a new proj.4 user and I would like to try some simple examples.
> I have been reading the user doc as well as the update (proj.4.3.pdf);
> however, I have been unsuccessful with executing the examples listed.
>
> ---- [ System Information] ----
> System: Ubuntu 11.04 64-bit
> Kernel: 2.6.38-11-generic
> Proj.4 Version: 4.7.0 compiled from tarball
>
> Here are two examples that show my problem:
> ---- [Example 1] ----
> /opt/proj-4.7.0/src$ ./proj +proj=poly +lon_0=-66 +lat_0=40 -v
> Rel. 4.7.1, 23 September 2009
> <lt-proj>:
> projection initialization failure
> cause: major axis or radius = 0 or not given
> program abnormally terminated
>
> ---- [Example 2] -----
> /opt/proj-4.7.0/src$ ./proj +proj=poly +lon_0=-60 -E <<EOF
>  > # sample points
>  > 65W 43d15N
>  > -55 37.33
>  > EOF
> Rel. 4.7.1, 23 September 2009
> <lt-proj>:
> projection initialization failure
> cause: major axis or radius = 0 or not given
> program abnormally terminated
> ---------------------------
>
> It seems that I am not providing the radius or major axis.  Is this
> correct, if so, how do I provide this information?

Michael,

You can specify the earth model several ways, but adding +ellps=WGS84
is a fairly simple way.

eg.
 ./proj +proj=poly +lon_0=-60 +ellps=WGS84 -E <<EOF

Note that PROJ usually picks up the default ellipsoid from an initialization
file but that doesn't work if you are running proj locally instead of first
installing it.  The main thing fetched from the defaults initialization file
is a default ellipsoid.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


From Mikael.Rittri at carmenta.com  Wed Oct  5 06:23:29 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Wed, 5 Oct 2011 13:23:29 +0000
Subject: [Proj] Is egm08_25.gtx misplaced half a pixel?
Message-ID: <E4AB3DD44D22854B819908379DE4AD493888042B@SETHNWS023.carmenta.se>


Hello,

I have tried to use the geoid height file 

   http://download.osgeo.org/proj/vdatum/egm08_25/egm08_25.gtx,

which is discussed here:

   http://trac.osgeo.org/proj/wiki/VerticalDatums

But I am beginning to think that the file is misaligned
(well, at least if ones uses GDAL 1.8 or later to read it).

>From gdalinfo (version 1.8.1), I get

  Origin = (-180.041666666666660,90.041666666666686)
  Pixel Size = (0.041666666666667,-0.041666666666667)

But I think the correct origin of the data is really

           (-180.020833333333333,90.020833333333333)

that is, half a pixel farther east and south. 

I suspect this may be caused by the nasty AREA_OR_POINT issue.
The file is dated 3 Sep 2010, so I guess it was created before
GDAL 1.8, when the semantics of AREA_OR_POINT = POINT changed.

http://trac.osgeo.org/gdal/wiki/rfc33_gtiff_pixelispoint

Or maybe the cause is something else.

Some evidence: I have used the gtx file to look up the geoid 
height (using a Carmenta Engine version that uses GDAL 1.8.1), 
at a position where the geoid slopes towards southeast, 

    145dE 13dN

and I found the value 44.925678 m.  

But according to Charles Karney's online geoid calculator 
http://geographiclib.sourceforge.net/cgi-bin/GeoidEval
the value should be 45.7529 m (with a few millimeters 
uncertainty, perhaps).  So the difference is 0.8272 m. On the 
other hand, if I move the position half a pixel = 1.25 arc 
minutes east and south, that is

    145d1.25'E 12d58.75'N

then Charles's calculator gives me 44.9287 m, so the difference
is now just 3 mm from the gtx result for the original position.

More evidence: gdalinfo on Charles's file egm2008-2_5.pgm 
(from http://geographiclib.sourceforge.net/html/geoid.html) says

Origin = (-0.020833333333333,90.020833333333329)
Pixel Size = (0.041666666666667,-0.041666666666667)

so its origin is, indeed, half a pixel farther east and south
(well, there is a also 180 degree longitude difference due to 
 the longitude range being 0 to 360 in this file). 

I guess I could file a ticket, but I am not quite convinced 
that I am right.  Has anyone else noticed any problems with
the gtx file? 

Another issue with the gtx file: I would have preferred if it had
one more column; that is, if the column for 180dW was repeated 
for 180dE. That would make it simpler to interpolate results for
a position slightly west of 180dE.  

Regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com



From spethm at landcareresearch.co.nz  Thu Oct  6 16:04:30 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Fri, 07 Oct 2011 12:04:30 +1300
Subject: [Proj] Novice Examples?
In-Reply-To: <CA+YzLBf=4hdnGFebQ9qwP7=VC87rj8NL4LUXopOuvgtRVbUuGA@mail.gmail.com>
References: <4E8B9157.2010104@landcareresearch.co.nz>
	<CA+YzLBf=4hdnGFebQ9qwP7=VC87rj8NL4LUXopOuvgtRVbUuGA@mail.gmail.com>
Message-ID: <4E8E33FE.8070500@landcareresearch.co.nz>

Thank you Frank for helping me with the initial parameters for testing 
Spheroids!  I am now trying to test Ellipsoidals  and I have a problem 
with the parameters I am passing proj.4.

Here are the arguments that I am trying to use:

    ./proj +proj=cea +lon_0=0 +e=0.5 +R_A=1 +ellps=WGS84 -E <<EOF
    0 0
    EOF

And the resulting output:

    Rel. 4.7.1, 23 September 2009
    <lt-proj>:
    projection initialization failure
    cause: invalid boolean param argument
    program abnormally terminated

Anyone know what I've done incorrectly?

Thank you for your help.

On 05/10/11 12:25, Frank Warmerdam wrote:
> On Tue, Oct 4, 2011 at 4:05 PM, Michael Speth
> <spethm at landcareresearch.co.nz>  wrote:
>> Greetings,
>>    I am a new proj.4 user and I would like to try some simple examples.
>> I have been reading the user doc as well as the update (proj.4.3.pdf);
>> however, I have been unsuccessful with executing the examples listed.
>>
>> ---- [ System Information] ----
>> System: Ubuntu 11.04 64-bit
>> Kernel: 2.6.38-11-generic
>> Proj.4 Version: 4.7.0 compiled from tarball
>>
>> Here are two examples that show my problem:
>> ---- [Example 1] ----
>> /opt/proj-4.7.0/src$ ./proj +proj=poly +lon_0=-66 +lat_0=40 -v
>> Rel. 4.7.1, 23 September 2009
>> <lt-proj>:
>> projection initialization failure
>> cause: major axis or radius = 0 or not given
>> program abnormally terminated
>>
>> ---- [Example 2] -----
>> /opt/proj-4.7.0/src$ ./proj +proj=poly +lon_0=-60 -E<<EOF
>>   >  # sample points
>>   >  65W 43d15N
>>   >  -55 37.33
>>   >  EOF
>> Rel. 4.7.1, 23 September 2009
>> <lt-proj>:
>> projection initialization failure
>> cause: major axis or radius = 0 or not given
>> program abnormally terminated
>> ---------------------------
>>
>> It seems that I am not providing the radius or major axis.  Is this
>> correct, if so, how do I provide this information?
> Michael,
>
> You can specify the earth model several ways, but adding +ellps=WGS84
> is a fairly simple way.
>
> eg.
>   ./proj +proj=poly +lon_0=-60 +ellps=WGS84 -E<<EOF
>
> Note that PROJ usually picks up the default ellipsoid from an initialization
> file but that doesn't work if you are running proj locally instead of first
> installing it.  The main thing fetched from the defaults initialization file
> is a default ellipsoid.
>
> Best regards,

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111007/4fc80433/attachment.html>

From Mikael.Rittri at carmenta.com  Fri Oct  7 03:00:11 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Fri, 7 Oct 2011 10:00:11 +0000
Subject: [Proj] Novice Examples?
In-Reply-To: <4E8E33FE.8070500@landcareresearch.co.nz>
References: <4E8B9157.2010104@landcareresearch.co.nz>
	<CA+YzLBf=4hdnGFebQ9qwP7=VC87rj8NL4LUXopOuvgtRVbUuGA@mail.gmail.com>
	<4E8E33FE.8070500@landcareresearch.co.nz>
Message-ID: <E4AB3DD44D22854B819908379DE4AD49388809D1@SETHNWS023.carmenta.se>

Hello Michael,

I believe +R_A does not take any value; it is enough if it is present.

And the +e=0.5 looks strange. Isn't +e the eccentricity of the ellipsoid?
You should not need to specify +e, since you have already specified the
ellipsoid to be WGS84 (which is overridden by R_A which says to use a
sphere with the same area as the WGS84 ellipsoid).
  
Anyway, the value of +e for the Earth should be something like 0.082.
A value of 0.5 is so far outside the usual range that some projections
may stop working, I believe.

If I use

>proj +proj=cea +lon_0=0 +R_A +ellps=WGS84

I get 

in:  0 0
out: 0.00    0.00

in:  30 30
out: 3335851.56      3185503.59

in:  0 90
out: 0.00    6371007.18

in:  90 0
out: 10007554.68     0.00

Don't know if these values are what you want (I am not so familiar with +proj=cea),
but at least it doesn't crash.

Best regards,
  
Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

________________________________

From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Michael Speth
Sent: Friday, October 07, 2011 1:05 AM
To: proj at lists.maptools.org
Subject: Re: [Proj] Novice Examples?


Thank you Frank for helping me with the initial parameters for testing Spheroids!  I am now trying to test Ellipsoidals  and I have a problem with the parameters I am passing proj.4.

Here are the arguments that I am trying to use:


	./proj +proj=cea +lon_0=0 +e=0.5 +R_A=1 +ellps=WGS84 -E <<EOF
	0 0
	EOF
	

And the resulting output:


	Rel. 4.7.1, 23 September 2009
	<lt-proj>: 
	projection initialization failure
	cause: invalid boolean param argument
	program abnormally terminated
	

Anyone know what I've done incorrectly?

Thank you for your help.

On 05/10/11 12:25, Frank Warmerdam wrote: 

	On Tue, Oct 4, 2011 at 4:05 PM, Michael Speth
	<spethm at landcareresearch.co.nz> <mailto:spethm at landcareresearch.co.nz>  wrote:
	

		Greetings,
		  I am a new proj.4 user and I would like to try some simple examples.
		I have been reading the user doc as well as the update (proj.4.3.pdf);
		however, I have been unsuccessful with executing the examples listed.
		
		---- [ System Information] ----
		System: Ubuntu 11.04 64-bit
		Kernel: 2.6.38-11-generic
		Proj.4 Version: 4.7.0 compiled from tarball
		
		Here are two examples that show my problem:
		---- [Example 1] ----
		/opt/proj-4.7.0/src$ ./proj +proj=poly +lon_0=-66 +lat_0=40 -v
		Rel. 4.7.1, 23 September 2009
		<lt-proj>:
		projection initialization failure
		cause: major axis or radius = 0 or not given
		program abnormally terminated
		
		---- [Example 2] -----
		/opt/proj-4.7.0/src$ ./proj +proj=poly +lon_0=-60 -E <<EOF
		 > # sample points
		 > 65W 43d15N
		 > -55 37.33
		 > EOF
		Rel. 4.7.1, 23 September 2009
		<lt-proj>:
		projection initialization failure
		cause: major axis or radius = 0 or not given
		program abnormally terminated
		---------------------------
		
		It seems that I am not providing the radius or major axis.  Is this
		correct, if so, how do I provide this information?
		

	Michael,
	
	You can specify the earth model several ways, but adding +ellps=WGS84
	is a fairly simple way.
	
	eg.
	 ./proj +proj=poly +lon_0=-60 +ellps=WGS84 -E <<EOF
	
	Note that PROJ usually picks up the default ellipsoid from an initialization
	file but that doesn't work if you are running proj locally instead of first
	installing it.  The main thing fetched from the defaults initialization file
	is a default ellipsoid.
	
	Best regards,
	




From peifer at gmx.eu  Sun Oct  9 07:06:41 2011
From: peifer at gmx.eu (Hermann Peifer)
Date: Sun, 09 Oct 2011 16:06:41 +0200
Subject: [Proj] forward/inverse projection logic for ob_tran
Message-ID: <j6s9ph$pk3$1@dough.gmane.org>

Hi,

I am currently dealing with regional climate models, where the data 
comes in form of "rotated pole lat/lon grids", with the North Pole at 
39.25N, 162W.

I am able to convert "rotated pole coordinates" to "normal lat/lon 
coordinates" by using:

$ proj -f "%.6f" -m 57.2957795130823 +proj=ob_tran +o_proj=latlon 
+o_lon_p=-162 +o_lat_p=39.25 +lon_0=180

It looks to me that the proj/invproj (i.e. forward/inverse) projection 
logic is opposite to what I would expect: I need to run proj (i.e. the 
forward projection) in order get from the "rotated lat/lon" coordinates 
(say: lon=0,lat=0) back to the "normal lat/lon coordinates" (here: 
lon=18.0,lat=50.75), and vice versa.

Is this expected behaviour? If yes: what am I missing?

Thanks for your time, Hermann



From spethm at landcareresearch.co.nz  Sun Oct  9 14:06:54 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Mon, 10 Oct 2011 10:06:54 +1300
Subject: [Proj] Projection Dev - How to call other projections from a
	projection?
Message-ID: <4E920CEE.9020605@landcareresearch.co.nz>

Greetings,
   I am working on implementing a new projection and stumped on how to 
call a projection from within a projection.

For example, the projection has both a spheroid and ellipsoid.  The 
function for determine the projection of the ellipsoid (both forward and 
inverse) use their respective spheroid projections during calculation.  
Unfortunately, I'm not sure if the ENTRY function can be used because 
for the ellipsoid calculation, but the spheroid function is only an 
intermediate step int the calculation and there exists additional 
computations after the spheroid function is called.

Consider this example:

INVERSE(e_inverse);
    lp = INVERSE(p_inverse);
    lp.phi = auth_lat(...);
    return lp;

Does this make sense?  If so, is there any way of calling the inverse 
function for sphere within the inverse function for ellipsoid?

Thank you for your help
Michael Speth
Landcare Research
Scientific Programmer




From ndzinn at comcast.net  Sun Oct  9 16:43:40 2011
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Sun, 9 Oct 2011 18:43:40 -0500
Subject: [Proj] Projection Dev - How to call other projections from
	aprojection?
In-Reply-To: <4E920CEE.9020605@landcareresearch.co.nz>
References: <4E920CEE.9020605@landcareresearch.co.nz>
Message-ID: <196F96E78A6243D5A254D550CA7914CA@NoelHmPC>

"Spheroid" and "ellipsoid" are synonyms for the same thing in geodesy and 
cartography.  See:

http://en.wikipedia.org/wiki/Spheroid

Do you mean that you have an ellipsoid and a sphere, maybe a conformal 
sphere intermediate between the ellipsoid and the plane?

What "new" projection are you implementing?  Does it have a name or is it 
something you invented?  Is it conformal?

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)

-----Original Message----- 
From: Michael Speth
Sent: Sunday, October 09, 2011 4:06 PM
To: proj at lists.maptools.org
Subject: [Proj] Projection Dev - How to call other projections from 
aprojection?

Greetings,
   I am working on implementing a new projection and stumped on how to
call a projection from within a projection.

For example, the projection has both a spheroid and ellipsoid.  The
function for determine the projection of the ellipsoid (both forward and
inverse) use their respective spheroid projections during calculation.
Unfortunately, I'm not sure if the ENTRY function can be used because
for the ellipsoid calculation, but the spheroid function is only an
intermediate step int the calculation and there exists additional
computations after the spheroid function is called.

Consider this example:

INVERSE(e_inverse);
    lp = INVERSE(p_inverse);
    lp.phi = auth_lat(...);
    return lp;

Does this make sense?  If so, is there any way of calling the inverse
function for sphere within the inverse function for ellipsoid?

Thank you for your help
Michael Speth
Landcare Research
Scientific Programmer


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj 




From spethm at landcareresearch.co.nz  Sun Oct  9 16:56:48 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Mon, 10 Oct 2011 12:56:48 +1300
Subject: [Proj] Projection Dev - How to call other projections from
	aprojection?
In-Reply-To: <196F96E78A6243D5A254D550CA7914CA@NoelHmPC>
References: <4E920CEE.9020605@landcareresearch.co.nz>
	<196F96E78A6243D5A254D550CA7914CA@NoelHmPC>
Message-ID: <4E9234C0.8020400@landcareresearch.co.nz>

I meant ellipsoid and sphere; I apologize for confusing those terms.

I am trying to implement the HEALPix projection from a python 
implementation from one of our team members.  The python version has 
methods for projecting onto an ellipsoid as well as a sphere.  The 
python version's forward and inverse ellipsoid functions call the 
forward and inverse sphere functions.

We will also be implementing a new projection called an rHEALPix which 
is documented here: 
http://code.scenzgrid.org/index.php/p/scenzgrid-py/source/tree/master/docs/scenzgrid_math.pdf

Thank you for your help!

On 10/10/11 12:43, Noel Zinn (cc) wrote:
> "Spheroid" and "ellipsoid" are synonyms for the same thing in geodesy and
> cartography.  See:
>
> http://en.wikipedia.org/wiki/Spheroid
>
> Do you mean that you have an ellipsoid and a sphere, maybe a conformal
> sphere intermediate between the ellipsoid and the plane?
>
> What "new" projection are you implementing?  Does it have a name or is it
> something you invented?  Is it conformal?
>
> Noel Zinn, Principal, Hydrometronics LLC
> +1-832-539-1472 (office), +1-281-221-0051 (cell)
> noel.zinn at hydrometronics.com (email)
> http://www.hydrometronics.com (website)
>
> -----Original Message-----
> From: Michael Speth
> Sent: Sunday, October 09, 2011 4:06 PM
> To: proj at lists.maptools.org
> Subject: [Proj] Projection Dev - How to call other projections from
> aprojection?
>
> Greetings,
>     I am working on implementing a new projection and stumped on how to
> call a projection from within a projection.
>
> For example, the projection has both a spheroid and ellipsoid.  The
> function for determine the projection of the ellipsoid (both forward and
> inverse) use their respective spheroid projections during calculation.
> Unfortunately, I'm not sure if the ENTRY function can be used because
> for the ellipsoid calculation, but the spheroid function is only an
> intermediate step int the calculation and there exists additional
> computations after the spheroid function is called.
>
> Consider this example:
>
> INVERSE(e_inverse);
>      lp = INVERSE(p_inverse);
>      lp.phi = auth_lat(...);
>      return lp;
>
> Does this make sense?  If so, is there any way of calling the inverse
> function for sphere within the inverse function for ellipsoid?
>
> Thank you for your help
> Michael Speth
> Landcare Research
> Scientific Programmer
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From ndzinn at comcast.net  Sun Oct  9 17:27:33 2011
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Sun, 9 Oct 2011 19:27:33 -0500
Subject: [Proj] Projection Dev - How to call other projections
	fromaprojection?
In-Reply-To: <4E9234C0.8020400@landcareresearch.co.nz>
References: <4E920CEE.9020605@landcareresearch.co.nz><196F96E78A6243D5A254D550CA7914CA@NoelHmPC>
	<4E9234C0.8020400@landcareresearch.co.nz>
Message-ID: <61DD1082EC3F4B49BED55300B1518F57@NoelHmPC>

Thanks.  Please clarify what you mean by "implementing"?  You're looking for 
the Proj.4 commands that will pull this off?  Or you're coding this as an 
additional projection in your instance of Proj.4?  Or you are coding this 
projection in some language other than Python independent of Proj.4 and 
thought the members of this forum could offer some guidance.  Pardon me if 
I've missed the obvious.  -Noel

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)

-----Original Message----- 
From: Michael Speth
Sent: Sunday, October 09, 2011 6:56 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Projection Dev - How to call other projections 
fromaprojection?

I meant ellipsoid and sphere; I apologize for confusing those terms.

I am trying to implement the HEALPix projection from a python
implementation from one of our team members.  The python version has
methods for projecting onto an ellipsoid as well as a sphere.  The
python version's forward and inverse ellipsoid functions call the
forward and inverse sphere functions.

We will also be implementing a new projection called an rHEALPix which
is documented here:
http://code.scenzgrid.org/index.php/p/scenzgrid-py/source/tree/master/docs/scenzgrid_math.pdf

Thank you for your help!

On 10/10/11 12:43, Noel Zinn (cc) wrote:
> "Spheroid" and "ellipsoid" are synonyms for the same thing in geodesy and
> cartography.  See:
>
> http://en.wikipedia.org/wiki/Spheroid
>
> Do you mean that you have an ellipsoid and a sphere, maybe a conformal
> sphere intermediate between the ellipsoid and the plane?
>
> What "new" projection are you implementing?  Does it have a name or is it
> something you invented?  Is it conformal?
>
> Noel Zinn, Principal, Hydrometronics LLC
> +1-832-539-1472 (office), +1-281-221-0051 (cell)
> noel.zinn at hydrometronics.com (email)
> http://www.hydrometronics.com (website)
>
> -----Original Message-----
> From: Michael Speth
> Sent: Sunday, October 09, 2011 4:06 PM
> To: proj at lists.maptools.org
> Subject: [Proj] Projection Dev - How to call other projections from
> aprojection?
>
> Greetings,
>     I am working on implementing a new projection and stumped on how to
> call a projection from within a projection.
>
> For example, the projection has both a spheroid and ellipsoid.  The
> function for determine the projection of the ellipsoid (both forward and
> inverse) use their respective spheroid projections during calculation.
> Unfortunately, I'm not sure if the ENTRY function can be used because
> for the ellipsoid calculation, but the spheroid function is only an
> intermediate step int the calculation and there exists additional
> computations after the spheroid function is called.
>
> Consider this example:
>
> INVERSE(e_inverse);
>      lp = INVERSE(p_inverse);
>      lp.phi = auth_lat(...);
>      return lp;
>
> Does this make sense?  If so, is there any way of calling the inverse
> function for sphere within the inverse function for ellipsoid?
>
> Thank you for your help
> Michael Speth
> Landcare Research
> Scientific Programmer
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj 




From spethm at landcareresearch.co.nz  Sun Oct  9 17:50:15 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Mon, 10 Oct 2011 13:50:15 +1300
Subject: [Proj] Projection Dev - How to call other projections
	fromaprojection?
In-Reply-To: <61DD1082EC3F4B49BED55300B1518F57@NoelHmPC>
References: <4E920CEE.9020605@landcareresearch.co.nz><196F96E78A6243D5A254D550CA7914CA@NoelHmPC>
	<4E9234C0.8020400@landcareresearch.co.nz>
	<61DD1082EC3F4B49BED55300B1518F57@NoelHmPC>
Message-ID: <4E924147.9070408@landcareresearch.co.nz>

I am adding a new proj.4 projection to my local copy of the proj.4 
source code.  Its our team's hopes that eventually once the projection 
has gone through the proper testing that we can contribute back to proj.4.

So "implementing" more specifically means "porting" since another team 
member is responsible for the development of the algorithms for these 2 
projections.  He coded his algorithms in python and tested them in 
Sage.  Its my task to port what he developed in python to the proj.4 
library (adding to the proj.4 library).

I am trying to find out how to call a function declared as 2 #define 
(INVERSE and e_inverse/s_inverse).  Meaning, from within the 
INVERSE(e_inverse); function, I want to call INVERSE(s_inverse);.  It 
seems that there is only 2 function pointers available in the PJConsts 
struct so I don't think I can use those since those function pointers 
(from what I understand) need to be assigned to the functions that need 
to be called.

For instance, in order for INVERSE(e_inverse); to be called, then the 
P->inv function pointer needs to be set to e_inverse (which happens in 
the ENTRY function).

Does this make sense?

On 10/10/11 13:27, Noel Zinn (cc) wrote:
> Thanks.  Please clarify what you mean by "implementing"?  You're looking for
> the Proj.4 commands that will pull this off?  Or you're coding this as an
> additional projection in your instance of Proj.4?  Or you are coding this
> projection in some language other than Python independent of Proj.4 and
> thought the members of this forum could offer some guidance.  Pardon me if
> I've missed the obvious.  -Noel
>
> Noel Zinn, Principal, Hydrometronics LLC
> +1-832-539-1472 (office), +1-281-221-0051 (cell)
> noel.zinn at hydrometronics.com (email)
> http://www.hydrometronics.com (website)
>
> -----Original Message-----
> From: Michael Speth
> Sent: Sunday, October 09, 2011 6:56 PM
> To: PROJ.4 and general Projections Discussions
> Subject: Re: [Proj] Projection Dev - How to call other projections
> fromaprojection?
>
> I meant ellipsoid and sphere; I apologize for confusing those terms.
>
> I am trying to implement the HEALPix projection from a python
> implementation from one of our team members.  The python version has
> methods for projecting onto an ellipsoid as well as a sphere.  The
> python version's forward and inverse ellipsoid functions call the
> forward and inverse sphere functions.
>
> We will also be implementing a new projection called an rHEALPix which
> is documented here:
> http://code.scenzgrid.org/index.php/p/scenzgrid-py/source/tree/master/docs/scenzgrid_math.pdf
>
> Thank you for your help!
>
> On 10/10/11 12:43, Noel Zinn (cc) wrote:
>> "Spheroid" and "ellipsoid" are synonyms for the same thing in geodesy and
>> cartography.  See:
>>
>> http://en.wikipedia.org/wiki/Spheroid
>>
>> Do you mean that you have an ellipsoid and a sphere, maybe a conformal
>> sphere intermediate between the ellipsoid and the plane?
>>
>> What "new" projection are you implementing?  Does it have a name or is it
>> something you invented?  Is it conformal?
>>
>> Noel Zinn, Principal, Hydrometronics LLC
>> +1-832-539-1472 (office), +1-281-221-0051 (cell)
>> noel.zinn at hydrometronics.com (email)
>> http://www.hydrometronics.com (website)
>>
>> -----Original Message-----
>> From: Michael Speth
>> Sent: Sunday, October 09, 2011 4:06 PM
>> To: proj at lists.maptools.org
>> Subject: [Proj] Projection Dev - How to call other projections from
>> aprojection?
>>
>> Greetings,
>>      I am working on implementing a new projection and stumped on how to
>> call a projection from within a projection.
>>
>> For example, the projection has both a spheroid and ellipsoid.  The
>> function for determine the projection of the ellipsoid (both forward and
>> inverse) use their respective spheroid projections during calculation.
>> Unfortunately, I'm not sure if the ENTRY function can be used because
>> for the ellipsoid calculation, but the spheroid function is only an
>> intermediate step int the calculation and there exists additional
>> computations after the spheroid function is called.
>>
>> Consider this example:
>>
>> INVERSE(e_inverse);
>>       lp = INVERSE(p_inverse);
>>       lp.phi = auth_lat(...);
>>       return lp;
>>
>> Does this make sense?  If so, is there any way of calling the inverse
>> function for sphere within the inverse function for ellipsoid?
>>
>> Thank you for your help
>> Michael Speth
>> Landcare Research
>> Scientific Programmer
>>
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>>
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From ndzinn at comcast.net  Sun Oct  9 17:57:54 2011
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Sun, 9 Oct 2011 19:57:54 -0500
Subject: [Proj] Projection Dev - How to call other
	projectionsfromaprojection?
In-Reply-To: <4E924147.9070408@landcareresearch.co.nz>
References: <4E920CEE.9020605@landcareresearch.co.nz><196F96E78A6243D5A254D550CA7914CA@NoelHmPC><4E9234C0.8020400@landcareresearch.co.nz><61DD1082EC3F4B49BED55300B1518F57@NoelHmPC>
	<4E924147.9070408@landcareresearch.co.nz>
Message-ID: <40C927B436D94B39913AAED5047646F6@NoelHmPC>

It does.  This also helps:

http://lists.maptools.org/pipermail/proj/2011-August/005842.html

Hopefully someone more knowledgeable than I will help with the Proj.4 
commands.

I'm curious about which standard area preserving projection from an oblate 
spheroid to a sphere you've chosen.

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)

-----Original Message----- 
From: Michael Speth
Sent: Sunday, October 09, 2011 7:50 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Projection Dev - How to call other 
projectionsfromaprojection?

I am adding a new proj.4 projection to my local copy of the proj.4
source code.  Its our team's hopes that eventually once the projection
has gone through the proper testing that we can contribute back to proj.4.

So "implementing" more specifically means "porting" since another team
member is responsible for the development of the algorithms for these 2
projections.  He coded his algorithms in python and tested them in
Sage.  Its my task to port what he developed in python to the proj.4
library (adding to the proj.4 library).

I am trying to find out how to call a function declared as 2 #define
(INVERSE and e_inverse/s_inverse).  Meaning, from within the
INVERSE(e_inverse); function, I want to call INVERSE(s_inverse);.  It
seems that there is only 2 function pointers available in the PJConsts
struct so I don't think I can use those since those function pointers
(from what I understand) need to be assigned to the functions that need
to be called.

For instance, in order for INVERSE(e_inverse); to be called, then the
P->inv function pointer needs to be set to e_inverse (which happens in
the ENTRY function).

Does this make sense?

On 10/10/11 13:27, Noel Zinn (cc) wrote:
> Thanks.  Please clarify what you mean by "implementing"?  You're looking 
> for
> the Proj.4 commands that will pull this off?  Or you're coding this as an
> additional projection in your instance of Proj.4?  Or you are coding this
> projection in some language other than Python independent of Proj.4 and
> thought the members of this forum could offer some guidance.  Pardon me if
> I've missed the obvious.  -Noel
>
> Noel Zinn, Principal, Hydrometronics LLC
> +1-832-539-1472 (office), +1-281-221-0051 (cell)
> noel.zinn at hydrometronics.com (email)
> http://www.hydrometronics.com (website)
>
> -----Original Message-----
> From: Michael Speth
> Sent: Sunday, October 09, 2011 6:56 PM
> To: PROJ.4 and general Projections Discussions
> Subject: Re: [Proj] Projection Dev - How to call other projections
> fromaprojection?
>
> I meant ellipsoid and sphere; I apologize for confusing those terms.
>
> I am trying to implement the HEALPix projection from a python
> implementation from one of our team members.  The python version has
> methods for projecting onto an ellipsoid as well as a sphere.  The
> python version's forward and inverse ellipsoid functions call the
> forward and inverse sphere functions.
>
> We will also be implementing a new projection called an rHEALPix which
> is documented here:
> http://code.scenzgrid.org/index.php/p/scenzgrid-py/source/tree/master/docs/scenzgrid_math.pdf
>
> Thank you for your help!
>
> On 10/10/11 12:43, Noel Zinn (cc) wrote:
>> "Spheroid" and "ellipsoid" are synonyms for the same thing in geodesy and
>> cartography.  See:
>>
>> http://en.wikipedia.org/wiki/Spheroid
>>
>> Do you mean that you have an ellipsoid and a sphere, maybe a conformal
>> sphere intermediate between the ellipsoid and the plane?
>>
>> What "new" projection are you implementing?  Does it have a name or is it
>> something you invented?  Is it conformal?
>>
>> Noel Zinn, Principal, Hydrometronics LLC
>> +1-832-539-1472 (office), +1-281-221-0051 (cell)
>> noel.zinn at hydrometronics.com (email)
>> http://www.hydrometronics.com (website)
>>
>> -----Original Message-----
>> From: Michael Speth
>> Sent: Sunday, October 09, 2011 4:06 PM
>> To: proj at lists.maptools.org
>> Subject: [Proj] Projection Dev - How to call other projections from
>> aprojection?
>>
>> Greetings,
>>      I am working on implementing a new projection and stumped on how to
>> call a projection from within a projection.
>>
>> For example, the projection has both a spheroid and ellipsoid.  The
>> function for determine the projection of the ellipsoid (both forward and
>> inverse) use their respective spheroid projections during calculation.
>> Unfortunately, I'm not sure if the ENTRY function can be used because
>> for the ellipsoid calculation, but the spheroid function is only an
>> intermediate step int the calculation and there exists additional
>> computations after the spheroid function is called.
>>
>> Consider this example:
>>
>> INVERSE(e_inverse);
>>       lp = INVERSE(p_inverse);
>>       lp.phi = auth_lat(...);
>>       return lp;
>>
>> Does this make sense?  If so, is there any way of calling the inverse
>> function for sphere within the inverse function for ellipsoid?
>>
>> Thank you for your help
>> Michael Speth
>> Landcare Research
>> Scientific Programmer
>>
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>>
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj 




From dcesari at arpa.emr.it  Mon Oct 10 00:54:14 2011
From: dcesari at arpa.emr.it (Davide Cesari)
Date: Mon, 10 Oct 2011 09:54:14 +0200
Subject: [Proj] forward/inverse projection logic for ob_tran
In-Reply-To: <j6s9ph$pk3$1@dough.gmane.org>
References: <j6s9ph$pk3$1@dough.gmane.org>
Message-ID: <4E92A4A6.4090805@arpa.emr.it>

Il -10/01/-28163 20:59, Hermann Peifer ha scritto:
> Hi,
>
> I am currently dealing with regional climate models, where the data
> comes in form of "rotated pole lat/lon grids", with the North Pole at
> 39.25N, 162W.
>
> I am able to convert "rotated pole coordinates" to "normal lat/lon
> coordinates" by using:
>
> $ proj -f "%.6f" -m 57.2957795130823 +proj=ob_tran +o_proj=latlon
> +o_lon_p=-162 +o_lat_p=39.25 +lon_0=180
>
> It looks to me that the proj/invproj (i.e. forward/inverse) projection
> logic is opposite to what I would expect: I need to run proj (i.e. the
> forward projection) in order get from the "rotated lat/lon" coordinates
> (say: lon=0,lat=0) back to the "normal lat/lon coordinates" (here:
> lon=18.0,lat=50.75), and vice versa.
>
> Is this expected behaviour? If yes: what am I missing?
>
> Thanks for your time, Hermann

Hi Hermann, thank you the message, I had also raised the problem some 
time ago, see e.g. this message in the proj mail archive:

http://osgeo-org.1803224.n2.nabble.com/Re-rotated-pole-ob-tran-help-needed-td5149504.html

but there was not much reaction, I think the problem is simply that the 
use of this kind of rotation in Numerical Weather Prediction models and 
in Cartography is the opposite. Maybe an additional set of switches 
could be added to the ob_tran transform in order to get the expected (by 
us) behavior, unfortunately I have no time to dedicate to that at the 
moment, but I would like to do it if there is a chance that it will be 
accepted in the main proj code.
	best regards, Davide

-- 
============================= Davide Cesari ============================
Servizio IdroMeteoClima - ARPA Emilia Romagna
NWP modelling - Modellistica numerica previsionale
  Phone/Fax: +39 051525926/+39 0516497501
  E-mail:    dcesari at arpa.emr.it
  Home page: http://www.webalice.it/o.drofa/davide/
  Address:   ARPA-SIM, Viale Silvani 6, 40122 Bologna, Italy
========================================================================


This message has been scanned for malware by Websense. www.websense.com


From charles.karney at sri.com  Mon Oct 10 06:32:22 2011
From: charles.karney at sri.com (Charles Karney)
Date: Mon, 10 Oct 2011 09:32:22 -0400
Subject: [Proj] Projection Dev - How to call other projections from
	aprojection?
In-Reply-To: <196F96E78A6243D5A254D550CA7914CA@NoelHmPC>
References: <4E920CEE.9020605@landcareresearch.co.nz>
	<196F96E78A6243D5A254D550CA7914CA@NoelHmPC>
Message-ID: <4E92F3E6.4050201@sri.com>

This may be true is cartography.  It's only partly true in geodesy --
some authors make a distinction, e.g.,

   W. A. Heiskanen and H. Moritz, Physical Geodesy,
   (Freeman, San Fransisco, 1967)

use spheroid to refer to an approximately spherical shape.  (This was,
presumably, its original meaning.)


On 10/09/11 19:43, Noel Zinn (cc) wrote:
> "Spheroid" and "ellipsoid" are synonyms for the same thing in geodesy and
> cartography.


From cjmce at lsu.edu  Mon Oct 10 07:32:55 2011
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Mon, 10 Oct 2011 09:32:55 -0500
Subject: [Proj] Projection Dev - How to call other projections
	fromaprojection?
References: <4E920CEE.9020605@landcareresearch.co.nz><196F96E78A6243D5A254D550CA7914CA@NoelHmPC>
	<4E92F3E6.4050201@sri.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7026A6C59@email002.lsu.edu>

A spheroid is an ellipsoid associated with a classical datum that ALSO has a geoid model such as:  NAD27, Clarke 1866 spheroid; European Datum 1950, International spheroid.  Conversely, the Camacupa Datum of Angola has the Clarke 1866 ellipsoid, etc.
 
Most people ignore the distinction, though.  (I suspect through ignorance.)
 
:-)
 
Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3531
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group


________________________________

From: proj-bounces at lists.maptools.org on behalf of Charles Karney
Sent: Mon 10-Oct-11 08:32
To: proj at lists.maptools.org
Subject: Re: [Proj] Projection Dev - How to call other projections fromaprojection?



This may be true is cartography.  It's only partly true in geodesy --
some authors make a distinction, e.g.,

   W. A. Heiskanen and H. Moritz, Physical Geodesy,
   (Freeman, San Fransisco, 1967)

use spheroid to refer to an approximately spherical shape.  (This was,
presumably, its original meaning.)


On 10/09/11 19:43, Noel Zinn (cc) wrote:
> "Spheroid" and "ellipsoid" are synonyms for the same thing in geodesy and
> cartography.
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111010/a49dbe77/attachment.html>

From mfinn at usgs.gov  Mon Oct 10 11:11:33 2011
From: mfinn at usgs.gov (Michael P Finn)
Date: Mon, 10 Oct 2011 12:11:33 -0600
Subject: [Proj] Projection Dev - How to call other projections from	a
	projection?
In-Reply-To: <196F96E78A6243D5A254D550CA7914CA@NoelHmPC>
References: <4E920CEE.9020605@landcareresearch.co.nz>
	<196F96E78A6243D5A254D550CA7914CA@NoelHmPC>
Message-ID: <OF84B305B6.0FF8BA50-ON87257925.0063A8CD-87257925.0063F737@usgs.gov>

Yes, the "same thing" is a huge confusion for many users.

I am a professional cartographer but have had a fair amount of course work 
in geodesy. I prefer the term ELLIPSOID because it isn't as easily 
confused with a sphere as spheroid is.





From:
"Noel Zinn \(cc\)" <ndzinn at comcast.net>
To:
<proj at lists.maptools.org>
Date:
10/09/2011 05:46 PM
Subject:
Re: [Proj] Projection Dev - How to call other projections from 
aprojection?
Sent by:
proj-bounces at lists.maptools.org



"Spheroid" and "ellipsoid" are synonyms for the same thing in geodesy and 
cartography.  See:

http://en.wikipedia.org/wiki/Spheroid

Do you mean that you have an ellipsoid and a sphere, maybe a conformal 
sphere intermediate between the ellipsoid and the plane?

What "new" projection are you implementing?  Does it have a name or is it 
something you invented?  Is it conformal?

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)

-----Original Message----- 
From: Michael Speth
Sent: Sunday, October 09, 2011 4:06 PM
To: proj at lists.maptools.org
Subject: [Proj] Projection Dev - How to call other projections from 
aprojection?

Greetings,
   I am working on implementing a new projection and stumped on how to
call a projection from within a projection.

For example, the projection has both a spheroid and ellipsoid.  The
function for determine the projection of the ellipsoid (both forward and
inverse) use their respective spheroid projections during calculation.
Unfortunately, I'm not sure if the ENTRY function can be used because
for the ellipsoid calculation, but the spheroid function is only an
intermediate step int the calculation and there exists additional
computations after the spheroid function is called.

Consider this example:

INVERSE(e_inverse);
    lp = INVERSE(p_inverse);
    lp.phi = auth_lat(...);
    return lp;

Does this make sense?  If so, is there any way of calling the inverse
function for sphere within the inverse function for ellipsoid?

Thank you for your help
Michael Speth
Landcare Research
Scientific Programmer


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj 


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111010/7be16f9c/attachment.html>

From mfinn at usgs.gov  Mon Oct 10 11:24:32 2011
From: mfinn at usgs.gov (Michael P Finn)
Date: Mon, 10 Oct 2011 12:24:32 -0600
Subject: [Proj] Projection Dev - How to call other projections from	a
	projection?
In-Reply-To: <4E92F3E6.4050201@sri.com>
References: <4E920CEE.9020605@landcareresearch.co.nz>	<196F96E78A6243D5A254D550CA7914CA@NoelHmPC>
	<4E92F3E6.4050201@sri.com>
Message-ID: <OF586FC424.C3CBE30B-ON87257925.0064BEC9-87257925.0065278B@usgs.gov>

Interesting.

So where is a threshold (that turns a spheroid into an ellipsoid)? 
Technically all spheroids are ellipsoids, mathematically. (Further, a 
sphere is also an ellipsoid whose semi-major and semi-minor axes are 
identical.)





From:
Charles Karney <charles.karney at sri.com>
To:
<proj at lists.maptools.org>
Date:
10/10/2011 07:34 AM
Subject:
Re: [Proj] Projection Dev - How to call other projections from 
aprojection?
Sent by:
proj-bounces at lists.maptools.org



This may be true is cartography.  It's only partly true in geodesy --
some authors make a distinction, e.g.,

   W. A. Heiskanen and H. Moritz, Physical Geodesy,
   (Freeman, San Fransisco, 1967)

use spheroid to refer to an approximately spherical shape.  (This was,
presumably, its original meaning.)


On 10/09/11 19:43, Noel Zinn (cc) wrote:
> "Spheroid" and "ellipsoid" are synonyms for the same thing in geodesy 
and
> cartography.
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111010/48970292/attachment.html>

From thy at 42.dk  Mon Oct 10 12:13:50 2011
From: thy at 42.dk (Kristian Thy)
Date: Mon, 10 Oct 2011 21:13:50 +0200
Subject: [Proj] Projection Dev - How to call other projections from
	a	projection?
In-Reply-To: <OF84B305B6.0FF8BA50-ON87257925.0063A8CD-87257925.0063F737@usgs.gov>
References: <4E920CEE.9020605@landcareresearch.co.nz>
	<196F96E78A6243D5A254D550CA7914CA@NoelHmPC>
	<OF84B305B6.0FF8BA50-ON87257925.0063A8CD-87257925.0063F737@usgs.gov>
Message-ID: <20111010191350.GA22804@42.dk>

On Mon, Oct 10, Michael P Finn wrote:
> I am a professional cartographer but have had a fair amount of course work 
> in geodesy. I prefer the term ELLIPSOID because it isn't as easily 
> confused with a sphere as spheroid is.

Do people also confuse a table and a tabloid?

\\kristian
-- 
... et nemo ex vobis interrogat me: »Quo vadis?«


From mfinn at usgs.gov  Mon Oct 10 12:20:43 2011
From: mfinn at usgs.gov (Michael P Finn)
Date: Mon, 10 Oct 2011 13:20:43 -0600
Subject: [Proj] Projection Dev - How to call other projections
	from	a	projection?
In-Reply-To: <20111010191350.GA22804@42.dk>
References: <4E920CEE.9020605@landcareresearch.co.nz>	<196F96E78A6243D5A254D550CA7914CA@NoelHmPC>
	<OF84B305B6.0FF8BA50-ON87257925.0063A8CD-87257925.0063F737@usgs.gov>
	<20111010191350.GA22804@42.dk>
Message-ID: <OF53E255C4.953EA7A5-ON87257925.006A39DE-87257925.006A4CAC@usgs.gov>

:)





From:
Kristian Thy <thy at 42.dk>
To:
proj at lists.maptools.org
Date:
10/10/2011 01:18 PM
Subject:
Re: [Proj] Projection Dev - How to call other projections from  a 
projection?
Sent by:
proj-bounces at lists.maptools.org



On Mon, Oct 10, Michael P Finn wrote:
> I am a professional cartographer but have had a fair amount of course 
work 
> in geodesy. I prefer the term ELLIPSOID because it isn't as easily 
> confused with a sphere as spheroid is.

Do people also confuse a table and a tabloid?

\\kristian
-- 
... et nemo ex vobis interrogat me: »Quo vadis?«
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111010/a4330737/attachment.html>

From ndzinn at comcast.net  Mon Oct 10 12:21:45 2011
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Mon, 10 Oct 2011 14:21:45 -0500
Subject: [Proj] Projection Dev - How to call other projections
	from	aprojection?
In-Reply-To: <OF586FC424.C3CBE30B-ON87257925.0064BEC9-87257925.0065278B@usgs.gov>
References: <4E920CEE.9020605@landcareresearch.co.nz>	<196F96E78A6243D5A254D550CA7914CA@NoelHmPC><4E92F3E6.4050201@sri.com>
	<OF586FC424.C3CBE30B-ON87257925.0064BEC9-87257925.0065278B@usgs.gov>
Message-ID: <02C1B845812D4DBD8944BEB51DF18D96@NoelHmPC>

>From the Geodetic Glossary, NGS, NOAA, 1986



“spheroid 



(1) Any surface differing but little from a sphere, (2) An ellipsoid of revolution, (3) A surface derived, by use of a standard formula for the Earth's potential, by giving the potential one specific value (Such a surface is intended to be an approximation to the geoid), (4) By extension, a surface close to the geoid or approximating the geoid.  



Although sense (2) has been widely used in geodetic literature, modern practice is to employ "ellipsoid of revolution" as a specific figure, and "spheroid" in sense (1) as a general term.  Many reference ellipsoids of older vintage have been called spheroids (e.g., Bessel spheroid) and are so listed in this glossary.”


Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)


From: Michael P Finn 
Sent: Monday, October 10, 2011 1:24 PM
To: PROJ.4 and general Projections Discussions 
Cc: proj at lists.maptools.org ; proj-bounces at lists.maptools.org 
Subject: Re: [Proj] Projection Dev - How to call other projections from aprojection?


Interesting. 

So where is a threshold (that turns a spheroid into an ellipsoid)? Technically all spheroids are ellipsoids, mathematically. (Further, a sphere is also an ellipsoid whose semi-major and semi-minor axes are identical.) 




      From:  Charles Karney <charles.karney at sri.com>  
      To:  <proj at lists.maptools.org>  
      Date:  10/10/2011 07:34 AM  
      Subject:  Re: [Proj] Projection Dev - How to call other projections from        aprojection?  
      Sent by:  proj-bounces at lists.maptools.org 


--------------------------------------------------------------------------------



This may be true is cartography.  It's only partly true in geodesy --
some authors make a distinction, e.g.,

  W. A. Heiskanen and H. Moritz, Physical Geodesy,
  (Freeman, San Fransisco, 1967)

use spheroid to refer to an approximately spherical shape.  (This was,
presumably, its original meaning.)


On 10/09/11 19:43, Noel Zinn (cc) wrote:
> "Spheroid" and "ellipsoid" are synonyms for the same thing in geodesy and
> cartography.
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj





--------------------------------------------------------------------------------
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111010/cd355a67/attachment.html>

From cjmce at lsu.edu  Mon Oct 10 12:28:48 2011
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Mon, 10 Oct 2011 14:28:48 -0500
Subject: [Proj] Projection Dev - How to call other
	projectionsfrom	aprojection?
References: <4E920CEE.9020605@landcareresearch.co.nz>	<196F96E78A6243D5A254D550CA7914CA@NoelHmPC><4E92F3E6.4050201@sri.com>
	<OF586FC424.C3CBE30B-ON87257925.0064BEC9-87257925.0065278B@usgs.gov>
	<02C1B845812D4DBD8944BEB51DF18D96@NoelHmPC>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7026A6C62@email002.lsu.edu>

I got my definition/distinction from Dr. Muneendra Kumar who probably got it from Dr. Ivan I. Mueller.
 
Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3531
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group


________________________________

From: proj-bounces at lists.maptools.org on behalf of Noel Zinn (cc)
Sent: Mon 10-Oct-11 14:21
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Projection Dev - How to call other projectionsfrom aprojection?



>From the Geodetic Glossary, NGS, NOAA, 1986

 

"spheroid 

 

(1) Any surface differing but little from a sphere, (2) An ellipsoid of revolution, (3) A surface derived, by use of a standard formula for the Earth's potential, by giving the potential one specific value (Such a surface is intended to be an approximation to the geoid), (4) By extension, a surface close to the geoid or approximating the geoid.  

 

Although sense (2) has been widely used in geodetic literature, modern practice is to employ "ellipsoid of revolution" as a specific figure, and "spheroid" in sense (1) as a general term.  Many reference ellipsoids of older vintage have been called spheroids (e.g., Bessel spheroid) and are so listed in this glossary."

 
Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)

 
From: Michael P Finn <mailto:mfinn at usgs.gov>  
Sent: Monday, October 10, 2011 1:24 PM
To: PROJ.4 and general Projections Discussions <mailto:proj at lists.maptools.org>  
Cc: proj at lists.maptools.org ; proj-bounces at lists.maptools.org 
Subject: Re: [Proj] Projection Dev - How to call other projections from aprojection?
 

Interesting. 

So where is a threshold (that turns a spheroid into an ellipsoid)? Technically all spheroids are ellipsoids, mathematically. (Further, a sphere is also an ellipsoid whose semi-major and semi-minor axes are identical.) 





From: 	Charles Karney <charles.karney at sri.com> 
To: 	<proj at lists.maptools.org> 
Date: 	10/10/2011 07:34 AM 
Subject: 	Re: [Proj] Projection Dev - How to call other projections from        aprojection? 
Sent by: 	proj-bounces at lists.maptools.org	

________________________________




This may be true is cartography.  It's only partly true in geodesy --
some authors make a distinction, e.g.,

  W. A. Heiskanen and H. Moritz, Physical Geodesy,
  (Freeman, San Fransisco, 1967)

use spheroid to refer to an approximately spherical shape.  (This was,
presumably, its original meaning.)


On 10/09/11 19:43, Noel Zinn (cc) wrote:
> "Spheroid" and "ellipsoid" are synonyms for the same thing in geodesy and
> cartography.
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj <http://lists.maptools.org/mailman/listinfo/proj> 




________________________________

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111010/acf05792/attachment.html>

From ndzinn at comcast.net  Mon Oct 10 12:41:29 2011
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Mon, 10 Oct 2011 14:41:29 -0500
Subject: [Proj] Projection Dev - How to call
	otherprojectionsfrom	aprojection?
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7026A6C62@email002.lsu.edu>
References: <4E920CEE.9020605@landcareresearch.co.nz>	<196F96E78A6243D5A254D550CA7914CA@NoelHmPC><4E92F3E6.4050201@sri.com><OF586FC424.C3CBE30B-ON87257925.0064BEC9-87257925.0065278B@usgs.gov><02C1B845812D4DBD8944BEB51DF18D96@NoelHmPC>
	<B597ADFC46B67741B18EA6AA13613FF7026A6C62@email002.lsu.edu>
Message-ID: <787A5344D12C4D75A719D7A289ECE54E@NoelHmPC>

Both of whom likely influenced the NGS definitions (3) and (4), which, loosely, is where you’re pointing.  -Noel

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)


From: Clifford J Mugnier 
Sent: Monday, October 10, 2011 2:28 PM
To: PROJ.4 and general Projections Discussions 
Subject: Re: [Proj] Projection Dev - How to call otherprojectionsfrom aprojection?

I got my definition/distinction from Dr. Muneendra Kumar who probably got it from Dr. Ivan I. Mueller.

Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3531
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group




--------------------------------------------------------------------------------
From: proj-bounces at lists.maptools.org on behalf of Noel Zinn (cc)
Sent: Mon 10-Oct-11 14:21
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Projection Dev - How to call other projectionsfrom aprojection?


>From the Geodetic Glossary, NGS, NOAA, 1986



“spheroid 



(1) Any surface differing but little from a sphere, (2) An ellipsoid of revolution, (3) A surface derived, by use of a standard formula for the Earth's potential, by giving the potential one specific value (Such a surface is intended to be an approximation to the geoid), (4) By extension, a surface close to the geoid or approximating the geoid.  



Although sense (2) has been widely used in geodetic literature, modern practice is to employ "ellipsoid of revolution" as a specific figure, and "spheroid" in sense (1) as a general term.  Many reference ellipsoids of older vintage have been called spheroids (e.g., Bessel spheroid) and are so listed in this glossary.”


Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)


From: Michael P Finn 
Sent: Monday, October 10, 2011 1:24 PM
To: PROJ.4 and general Projections Discussions 
Cc: proj at lists.maptools.org ; proj-bounces at lists.maptools.org 
Subject: Re: [Proj] Projection Dev - How to call other projections from aprojection?


Interesting. 

So where is a threshold (that turns a spheroid into an ellipsoid)? Technically all spheroids are ellipsoids, mathematically. (Further, a sphere is also an ellipsoid whose semi-major and semi-minor axes are identical.) 




      From:  Charles Karney <charles.karney at sri.com>  
      To:  <proj at lists.maptools.org>  
      Date:  10/10/2011 07:34 AM  
      Subject:  Re: [Proj] Projection Dev - How to call other projections from        aprojection?  
      Sent by:  proj-bounces at lists.maptools.org 


--------------------------------------------------------------------------------



This may be true is cartography.  It's only partly true in geodesy --
some authors make a distinction, e.g.,

  W. A. Heiskanen and H. Moritz, Physical Geodesy,
  (Freeman, San Fransisco, 1967)

use spheroid to refer to an approximately spherical shape.  (This was,
presumably, its original meaning.)


On 10/09/11 19:43, Noel Zinn (cc) wrote:
> "Spheroid" and "ellipsoid" are synonyms for the same thing in geodesy and
> cartography.
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj





--------------------------------------------------------------------------------
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


--------------------------------------------------------------------------------
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111010/4c11d758/attachment.html>

From spethm at landcareresearch.co.nz  Mon Oct 10 16:00:46 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Tue, 11 Oct 2011 12:00:46 +1300
Subject: [Proj] Projection Dev - How to call other projections
	fromaprojection?
In-Reply-To: <61DD1082EC3F4B49BED55300B1518F57@NoelHmPC>
References: <4E920CEE.9020605@landcareresearch.co.nz><196F96E78A6243D5A254D550CA7914CA@NoelHmPC>
	<4E9234C0.8020400@landcareresearch.co.nz>
	<61DD1082EC3F4B49BED55300B1518F57@NoelHmPC>
Message-ID: <4E93791E.4070205@landcareresearch.co.nz>

Well, there has been very interesting discussion on the terms of Sphere, 
Spheroid, and Ellipsoid.  I'm new to the GIS world so thank you for 
helping me realize the importantance of terminology :)

As for my problem, I figured out a solution.  Instead of calling the 
#define'd function within a #define'd function, I just created a new 
static function that both the FORWARD and INVERSE functions call.

Thank for helping me think though the problem.

Regards

On 10/10/11 13:27, Noel Zinn (cc) wrote:
> Thanks.  Please clarify what you mean by "implementing"?  You're looking for
> the Proj.4 commands that will pull this off?  Or you're coding this as an
> additional projection in your instance of Proj.4?  Or you are coding this
> projection in some language other than Python independent of Proj.4 and
> thought the members of this forum could offer some guidance.  Pardon me if
> I've missed the obvious.  -Noel
>
> Noel Zinn, Principal, Hydrometronics LLC
> +1-832-539-1472 (office), +1-281-221-0051 (cell)
> noel.zinn at hydrometronics.com (email)
> http://www.hydrometronics.com (website)
>
> -----Original Message-----
> From: Michael Speth
> Sent: Sunday, October 09, 2011 6:56 PM
> To: PROJ.4 and general Projections Discussions
> Subject: Re: [Proj] Projection Dev - How to call other projections
> fromaprojection?
>
> I meant ellipsoid and sphere; I apologize for confusing those terms.
>
> I am trying to implement the HEALPix projection from a python
> implementation from one of our team members.  The python version has
> methods for projecting onto an ellipsoid as well as a sphere.  The
> python version's forward and inverse ellipsoid functions call the
> forward and inverse sphere functions.
>
> We will also be implementing a new projection called an rHEALPix which
> is documented here:
> http://code.scenzgrid.org/index.php/p/scenzgrid-py/source/tree/master/docs/scenzgrid_math.pdf
>
> Thank you for your help!
>
> On 10/10/11 12:43, Noel Zinn (cc) wrote:
>> "Spheroid" and "ellipsoid" are synonyms for the same thing in geodesy and
>> cartography.  See:
>>
>> http://en.wikipedia.org/wiki/Spheroid
>>
>> Do you mean that you have an ellipsoid and a sphere, maybe a conformal
>> sphere intermediate between the ellipsoid and the plane?
>>
>> What "new" projection are you implementing?  Does it have a name or is it
>> something you invented?  Is it conformal?
>>
>> Noel Zinn, Principal, Hydrometronics LLC
>> +1-832-539-1472 (office), +1-281-221-0051 (cell)
>> noel.zinn at hydrometronics.com (email)
>> http://www.hydrometronics.com (website)
>>
>> -----Original Message-----
>> From: Michael Speth
>> Sent: Sunday, October 09, 2011 4:06 PM
>> To: proj at lists.maptools.org
>> Subject: [Proj] Projection Dev - How to call other projections from
>> aprojection?
>>
>> Greetings,
>>      I am working on implementing a new projection and stumped on how to
>> call a projection from within a projection.
>>
>> For example, the projection has both a spheroid and ellipsoid.  The
>> function for determine the projection of the ellipsoid (both forward and
>> inverse) use their respective spheroid projections during calculation.
>> Unfortunately, I'm not sure if the ENTRY function can be used because
>> for the ellipsoid calculation, but the spheroid function is only an
>> intermediate step int the calculation and there exists additional
>> computations after the spheroid function is called.
>>
>> Consider this example:
>>
>> INVERSE(e_inverse);
>>       lp = INVERSE(p_inverse);
>>       lp.phi = auth_lat(...);
>>       return lp;
>>
>> Does this make sense?  If so, is there any way of calling the inverse
>> function for sphere within the inverse function for ellipsoid?
>>
>> Thank you for your help
>> Michael Speth
>> Landcare Research
>> Scientific Programmer
>>
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>>
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From spethm at landcareresearch.co.nz  Tue Oct 11 18:25:24 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Wed, 12 Oct 2011 14:25:24 +1300
Subject: [Proj] How to validate a new projection?
Message-ID: <4E94EC84.60703@landcareresearch.co.nz>

Greetings,
   As I've written to this list before, our team is working on 
implementing the HEALPix projection and developing a new projection for 
proj.4.

We have tested the forward and inverse projections against our python 
implementation and we believe the mathematical formulas are correct 
based on what has already been published for HEALPix; however, how can 
we determine that the outputs from the projection are correct?

Are there any standard procedures for validating new projections for 
proj.4?

Thank you for your help.

--
Michael Speth
Scientific Programmer
Landcare Research


From garret.duffy at nuigalway.ie  Wed Oct 12 04:13:02 2011
From: garret.duffy at nuigalway.ie (Duffy, Garret)
Date: Wed, 12 Oct 2011 12:13:02 +0100
Subject: [Proj] apply plane rotation after transverse Mercator projection
Message-ID: <1612FB018DB27B449265FE30F163AF5D05640864@EVS1.ac.nuigalway.ie>

Hi,

I would like to design a projection that is similar to a TM projection
except append the parameter "XY_Plane_Rotation", i.e. rotate the XY
axes.  Is this possible to do in PROJ4?  I note the tmerc doesn't have
an alpha parameter or similar.  I already tried using RSO but it's
overkill for what I want to do, all I want to do is apply a simple
cartesian rotation to the projected XY axes.

Another thing I tried was editing a PRJ file for a TM projected data and
then appending "PARAMETER["XY_Plane_Rotation",XX]" to the file but that
doesn't seem to work.

Do I have to define a custom PROJCS that is based on tmerc but allows
for the XY_Plane_Rotation parameter?

Any suggestions gratefully would be (very) gratefully received as I have
been trying to do this supposedly simple thing all week.

Regards,

Garret
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111012/d8e0a3bf/attachment.html>

From cjmce at lsu.edu  Wed Oct 12 06:50:44 2011
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 12 Oct 2011 08:50:44 -0500
Subject: [Proj] apply plane rotation after transverse Mercator projection
References: <1612FB018DB27B449265FE30F163AF5D05640864@EVS1.ac.nuigalway.ie>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7026A6C6E@email002.lsu.edu>

I don't know if PROJ4 has it, but the Rosenmund projection as used in Switzerland sounds like what you want.
 
Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3531
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group


________________________________

From: proj-bounces at lists.maptools.org on behalf of Duffy, Garret
Sent: Wed 12-Oct-11 06:13
To: proj at lists.maptools.org
Subject: [Proj] apply plane rotation after transverse Mercator projection



Hi, 

I would like to design a projection that is similar to a TM projection except append the parameter "XY_Plane_Rotation", i.e. rotate the XY axes.  Is this possible to do in PROJ4?  I note the tmerc doesn't have an alpha parameter or similar.  I already tried using RSO but it's overkill for what I want to do, all I want to do is apply a simple cartesian rotation to the projected XY axes.

Another thing I tried was editing a PRJ file for a TM projected data and then appending "PARAMETER["XY_Plane_Rotation",XX]" to the file but that doesn't seem to work.

Do I have to define a custom PROJCS that is based on tmerc but allows for the XY_Plane_Rotation parameter? 

Any suggestions gratefully would be (very) gratefully received as I have been trying to do this supposedly simple thing all week.

Regards, 

Garret 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111012/181fca24/attachment.html>

From Mikael.Rittri at carmenta.com  Wed Oct 12 11:46:06 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Wed, 12 Oct 2011 18:46:06 +0000
Subject: [Proj] apply plane rotation after transverse Mercator projection
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7026A6C6E@email002.lsu.edu>
References: <1612FB018DB27B449265FE30F163AF5D05640864@EVS1.ac.nuigalway.ie>
	<B597ADFC46B67741B18EA6AA13613FF7026A6C6E@email002.lsu.edu>
Message-ID: <11AC4CEB-F5B7-45A1-BE18-730A3FABD1C2@carmenta.com>

The Rosenmund projection is called +proj=somerc (Swiss Oblique Mercator),
but I don't see why that should be better than the RSO (+proj=omerc) for this purpose.

I don't think there is any built-in support in Proj.4 to do an arbitrary rotation of the projected plane.
However, if you just need to rotate 90, 180 or 270 degrees, then you could perhaps use the +axis parameter.

Best regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

Den 12 okt 2011 kl. 15:53 skrev "Clifford J Mugnier" <cjmce at lsu.edu<mailto:cjmce at lsu.edu>>:

I don't know if PROJ4 has it, but the Rosenmund projection as used in Switzerland sounds like what you want.

Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering
Patrick F. Taylor Hall 3531
LOUISIANA STATE UNIVERSITY
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic]
Voice and Facsimile:  (225) 578-4578 [Research]
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the
Louisiana Society of Professional Surveyors
Fellow Emeritus of the ASPRS
Member of the Americas Petroleum Survey Group


________________________________
From: proj-bounces at lists.maptools.org<mailto:proj-bounces at lists.maptools.org> on behalf of Duffy, Garret
Sent: Wed 12-Oct-11 06:13
To: <mailto:proj at lists.maptools.org> proj at lists.maptools.org<mailto:proj at lists.maptools.org>
Subject: [Proj] apply plane rotation after transverse Mercator projection


Hi,

I would like to design a projection that is similar to a TM projection except append the parameter "XY_Plane_Rotation", i.e. rotate the XY axes.  Is this possible to do in PROJ4?  I note the tmerc doesn't have an alpha parameter or similar.  I already tried using RSO but it's overkill for what I want to do, all I want to do is apply a simple cartesian rotation to the projected XY axes.

Another thing I tried was editing a PRJ file for a TM projected data and then appending "PARAMETER["XY_Plane_Rotation",XX]" to the file but that doesn't seem to work.

Do I have to define a custom PROJCS that is based on tmerc but allows for the XY_Plane_Rotation parameter?

Any suggestions gratefully would be (very) gratefully received as I have been trying to do this supposedly simple thing all week.

Regards,

Garret

_______________________________________________
Proj mailing list
Proj at lists.maptools.org<mailto:Proj at lists.maptools.org>
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111012/4ced34fa/attachment.html>

From garret.duffy at nuigalway.ie  Thu Oct 13 02:09:23 2011
From: garret.duffy at nuigalway.ie (Garret Duffy)
Date: Thu, 13 Oct 2011 10:09:23 +0100
Subject: [Proj] apply plane rotation after transverse Mercator projection
References: <1612FB018DB27B449265FE30F163AF5D05640864@EVS1.ac.nuigalway.ie><B597ADFC46B67741B18EA6AA13613FF7026A6C6E@email002.lsu.edu>
	<11AC4CEB-F5B7-45A1-BE18-730A3FABD1C2@carmenta.com>
Message-ID: <j769s3$ts3$1@dough.gmane.org>

Yes, I've tried the omerc projection with +rot_conv and +no_uoff but the
issue is the alpha azimuth parameter is actually the angle of the rotated
cylinder about the ellipsoid (I think the limits are +/- 90?  Can anyone
confirm??) and this angle bears little or no relation to the azimuth of the
projected y-axis relative to true north.  I tried making a bunch of
projections with different alpha angles and +rot_conv and +no_uoff but is
was very hard to precisely control the rotation of the linear features I was
interested in measuring.

I think this thread involving Mikael and Frank discusses it well

http://osgeo-org.1803224.n2.nabble.com/looking-for-the-right-params-for-RSO-td5468455.html

It appears that the gamma parameter should actuate an XY_PLANE_ROTATION...

So this leads to two question and one request:

Q1) does omerc take the gamma parameter now? I am running v. 4.5

Q2) what are the limits of alpha?

R3) Would it be possible to design a new CRS similar to tmerc but taking a
gamma parameter?

Thanks everyone for your advice.

Garret
"Mikael Rittri" <Mikael.Rittri at carmenta.com> wrote in message
news:11AC4CEB-F5B7-45A1-BE18-730A3FABD1C2 at carmenta.com...
The Rosenmund projection is called +proj=somerc (Swiss Oblique Mercator),
but I don't see why that should be better than the RSO (+proj=omerc) for
this purpose.


I don't think there is any built-in support in Proj.4 to do an arbitrary
rotation of the projected plane.
However, if you just need to rotate 90, 180 or 270 degrees, then you could
perhaps use the +axis parameter.


Best regards,


Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com


Den 12 okt 2011 kl. 15:53 skrev "Clifford J Mugnier" <cjmce at lsu.edu>:


I don't know if PROJ4 has it, but the Rosenmund projection as used in
Switzerland sounds like what you want.

Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering
Patrick F. Taylor Hall 3531
LOUISIANA STATE UNIVERSITY
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic]
Voice and Facsimile:  (225) 578-4578 [Research]
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the
Louisiana Society of Professional Surveyors
Fellow Emeritus of the ASPRS
Member of the Americas Petroleum Survey Group





From: proj-bounces at lists.maptools.org on behalf of Duffy, Garret
Sent: Wed 12-Oct-11 06:13
To: proj at lists.maptools.org
Subject: [Proj] apply plane rotation after transverse Mercator projection


Hi,
I would like to design a projection that is similar to a TM projection
except append the parameter "XY_Plane_Rotation", i.e. rotate the XY axes.
Is this possible to do in PROJ4?  I note the tmerc doesn't have an alpha
parameter or similar.  I already tried using RSO but it's overkill for what
I want to do, all I want to do is apply a simple cartesian rotation to the
projected XY axes.
Another thing I tried was editing a PRJ file for a TM projected data and
then appending "PARAMETER["XY_Plane_Rotation",XX]" to the file but that
doesn't seem to work.
Do I have to define a custom PROJCS that is based on tmerc but allows for
the XY_Plane_Rotation parameter?
Any suggestions gratefully would be (very) gratefully received as I have
been trying to do this supposedly simple thing all week.
Regards,
Garret
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj






From garret.duffy at nuigalway.ie  Thu Oct 13 02:43:08 2011
From: garret.duffy at nuigalway.ie (Garret Duffy)
Date: Thu, 13 Oct 2011 10:43:08 +0100
Subject: [Proj] general question about upgrading PROJ.4
Message-ID: <j76brd$bll$1@dough.gmane.org>

Hi,

I have installed PROJ.4 version 4.7.0-9.1 using OpenSUSE YaST2 with the 
Geo/SLE_11 Repository.

Everything installs fine and according to YaST2, the correct version has 
just been installed.

However, when I run /usr/bin/proj, I get the message that version 4.5 is 
still installed even though the new version is supposed to be installed to 
that location.  I have the same issue with GDAL, I upgraded it but when I 
run gdalinfo --version, it states the old version is still installed.

I'm hoping someone can help.

Garret 





From roger at opq.se  Thu Oct 13 03:15:05 2011
From: roger at opq.se (Roger Oberholtzer)
Date: Thu, 13 Oct 2011 12:15:05 +0200
Subject: [Proj] general question about upgrading PROJ.4
In-Reply-To: <j76brd$bll$1@dough.gmane.org>
References: <j76brd$bll$1@dough.gmane.org>
Message-ID: <1318500905.9020.74.camel@acme.pacific>

On Thu, 2011-10-13 at 10:43 +0100, Garret Duffy wrote:
> Hi,
> 
> I have installed PROJ.4 version 4.7.0-9.1 using OpenSUSE YaST2 with the 
> Geo/SLE_11 Repository.

If you are using openSUSE, why are you taking things from the SLE_11
repository? Which version of openSUSE are you using?

What do you get for:

	rpm -qa | grep proj


> 
> Everything installs fine and according to YaST2, the correct version has 
> just been installed.
> 
> However, when I run /usr/bin/proj, I get the message that version 4.5 is 
> still installed even though the new version is supposed to be installed to 
> that location.  I have the same issue with GDAL, I upgraded it but when I 
> run gdalinfo --version, it states the old version is still installed.
> 
> I'm hoping someone can help.
> 
> Garret 
> 
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

Yours sincerely,

Roger Oberholtzer

OPQ Systems / Ramböll RST

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696
roger.oberholtzer at ramboll.se
________________________________________

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden
www.rambollrst.se




From garret.duffy at nuigalway.ie  Thu Oct 13 04:18:11 2011
From: garret.duffy at nuigalway.ie (Garret Duffy)
Date: Thu, 13 Oct 2011 12:18:11 +0100
Subject: [Proj] general question about upgrading PROJ.4
References: <j76brd$bll$1@dough.gmane.org>
	<1318500905.9020.74.camel@acme.pacific>
Message-ID: <j76hdj$ife$1@dough.gmane.org>

Hi,

Thanks for the reply.  When I run the command, I get:

libproj0-4.7.0-9.1
proj-4.7.0-9.1
libproj-devel-4.7.0-9.1

I have OpenSUSE 11.0 installed with repositories for 11.1 and 11.2 added to 
YaST2

I used SLE_11 because the list of OSs in the GEO repository are:
 Parent Directory                                 -
 CentOS_5/                   10-Oct-2011 02:11    -
 RHEL_4/                     18-Aug-2011 13:59    -
 RHEL_5/                     10-Oct-2011 02:11    -
 SLES_9/                     07-Oct-2011 18:05    -
 SLE_10/                     07-Oct-2011 18:04    -
 SLE_11/                     10-Oct-2011 20:35    -
 openSUSE_11.2/              10-Oct-2011 20:38    -
 openSUSE_11.3/              10-Oct-2011 20:43    -
 openSUSE_11.4/              10-Oct-2011 20:39    -
 openSUSE_Factory/           10-Oct-2011 22:33    -
 openSUSE_Tumblewe

I didn't see an entry for openSUSE 11.0 so I thought SLE_11 was it...  is 
that where I went wrong?

I don't use linux every day, I only use it for grass and proj so you 
probably see that I am not an expert user by any means...

Thanks,

Garret


"Roger Oberholtzer" <roger at opq.se> wrote in message 
news:1318500905.9020.74.camel at acme.pacific...
> On Thu, 2011-10-13 at 10:43 +0100, Garret Duffy wrote:
>> Hi,
>>
>> I have installed PROJ.4 version 4.7.0-9.1 using OpenSUSE YaST2 with the
>> Geo/SLE_11 Repository.
>
> If you are using openSUSE, why are you taking things from the SLE_11
> repository? Which version of openSUSE are you using?
>
> What do you get for:
>
> rpm -qa | grep proj
>
>
>>
>> Everything installs fine and according to YaST2, the correct version has
>> just been installed.
>>
>> However, when I run /usr/bin/proj, I get the message that version 4.5 is
>> still installed even though the new version is supposed to be installed 
>> to
>> that location.  I have the same issue with GDAL, I upgraded it but when I
>> run gdalinfo --version, it states the old version is still installed.
>>
>> I'm hoping someone can help.
>>
>> Garret
>>
>>
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>
> Yours sincerely,
>
> Roger Oberholtzer
>
> OPQ Systems / Ramb�ll RST
>
> Office: Int +46 10-615 60 20
> Mobile: Int +46 70-815 1696
> roger.oberholtzer at ramboll.se
> ________________________________________
>
> Ramb�ll Sverige AB
> Krukmakargatan 21
> P.O. Box 17009
> SE-104 62 Stockholm, Sweden
> www.rambollrst.se
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj 


begin 666 up.png
MB5!.1PT*&@H````-24A$4@```!8````6" 8```#$M&P[````!F)+1T0`_P#_
M`/^@O:>3````"7!(67,```L2```+$@'2W7[\````!W1)344'TPD"%3<BH.WN
MD ```CA)1$%4>-KME3UH$V$8QW]W27.V:6.DQ11:))&"E")-$031H047X806
MU$%$+JN#'Z6#>T?%4A%Q$*YS%P,Y* XE+FX.J8M0T%Q;8ZN-YFPNYI+<AT-*
MVM*F6K2#X //\N=Y?[S/P_]]7L'S/ XC1 XI_CVP(,OR+O'U8$H1)52WPLSY
MA<N)OW+C^:Z48N50)T]GB10+RGQ72OEC\%PX-6P[J ]&<PP.Q)B\YJ-3*JIS
MX8/#&V"M(QEW7._%_8L?"1[K87$53"?$O4L>1Z6RJG4DE0.#M>!L',].)\ZN
MAFVIE\55&IFW0MPX5R7@<U4M./O;<(&K&W$$,7VF3PJ?C/B;%FZ4JKQ\*X!C
M)>3R]9E?@Z]\*R &PBU2$ "_#RZ<VBK0U^L)4*O5P#8!AF3K9F8_L!_/'<.Q
MJ/VPZH<]>^K+]T@\U%HO<#VHE3X;"&("1 - KBA-H5K@>1Q([_*QYG^F=A[O
M4?JZM[0W'\ Q5S+ B&S?,II"_4_O at C@%)'>#?4^&\1U)#_1%\&\SX\*2`Z5E
M`Y@&9F3WM at Z@B8^CP"AP!X@"!H(8V_/E:<*C-&V]P_TG6G?H^2*L%\I07 at .W
MNCG,-F@)U0U6_F0 at B".R-Y[9VP:>.T9I.?MN)1J.1:2&W"Y!>W<K$&MH51MR
M7RM at Z@8P(GOCF:9+2&;"`(8P]4QV*8>>![,"5FTK\T7(KI7)K;P'4T\",9F)
MS+Y+:,=8>*ALSB^.&*BW7C4`=. 5,+T=V #__T$.'?P3(N;@\5,A'B\`````
(245.1*Y"8((`
`
end

begin 666 folder.png
MB5!.1PT*&@H````-24A$4@```!8````6" 8```#$M&P[````!&=!34$``+&.
M?/M1DP```"!C2%)-``!Z)0``@(,``/G_``" Z0``=3 ``.I@```ZF ``%V^2
M7\5&````!F)+1T0`_P#_`/^@O:>3````"7!(67,```L3```+$P$`FIP8```$
MR$E$050XRYV4:6Q4513'__>]-Z_S9CHS+6VG"Z5I*66 at 34HIH0(I*!;+8ENB
M5F65A"4:1(W$)7S2J!\PT1AB8F*,-E:)0 at 11,2RFH!5,D+!(K=24MA:FG<J4
MMK.]-V^[QP_3`D$3*;^O]^:7_SWGW"/B7G!XE?R:K<U+-NSY<#2B.W0]>5UR
MY^9P+3PZ<85-3N at 1?26U\^?5K7NVYH%E3:;H\_Y\Y%B'/],=[;S4T=?WPZX=
M(","`-)="04)2E[ES.I5.YY9NG+YNO3<W-R>`1W62 QSJA<%SO^I=HUJ`_D0
MI S8_R&6/'ZG)[^LG%L&HL$_?B=#-9Q3J_)GU:[=4-^X>EM9><F,:U%B5X,1
M>+B 03X%%WM,=NUJPI8H*X,YO%/(5OMOBIE#$0H6/3Y_6?/6YU8MKEP1CB?Y
M9ZT'/HU>'^RO7[UFX\*:0'6,"U+O@ 91M^!VN'$I*",XS,!%)KE$.=^DS#B3
MLPHI.70!`"11\3H6;MF]??N6#:\\4.XI$&4 at 9OE05O+T3ETGDF51[!HTD(@F
MD24[<%5UX\IUAC$UU2!!%)A+3,L<LUPD. N+>;0S53U?H+9TVZ:U+S17>0K2
M9, D@ #D98A"9H8D7 at GI\#!"NMN-8,*)<(*!<X H53XR",P4';"="E.F!P#(
M`"!8:D2W=,WF2 DG( !)@T,F#I<K#<.J`--*'=P4<P)%37!+$!A3%.:<&8#H
MS ``(5"_N6%JECO[]B9.S.#0J 6W+""J,Q '^+B4$T V`3$;7+5AVX H.1VR
M4EHJ./W%`"#D^/V!606>#!H7,@!QG=#1K\-4;;A<,A+FN'1";!(HP<$U&Y9)
M($ZHGDW"QL;<PO3LV34`($;C6KQZ\?*'9^8I;IT(5VYP7!XPD>,2X//*"*L"
M$AJ at ZH"J`O$XH$: 9(Q#UP@>R41330QKZB(HF\;$B]TQ<ZCGEZ-"N+/]['=M
M9]J3%A"*< S>L#&W6(8WTX&$Q6"//]TT`<,`+ .P3( X4%5LX.7'8GABJ88I
M7 at 9&-G+RBN<@S5\FDJE98[J()74K&YE#E"2!P>,3$4NF4B:20"0!Q-5;B17&
MT5BI87UM'-.R+7";H[L_BI9O+H5.G3RPUQCK/"$!P$!'^X_?ME^^N*FI:D%0
MMY!MIVII<\"P`,L&; L at 3JB<RK$BH&%&M@';$C \8N/(Z:#Q^5?'3G>?W_<^
M)?K:`$0E`#!'_ at I_?W#?%PWW5]08!@FF2>#$8-J :0.6!7AD8&DE84&1"44"
MDDF&R[TQ?+3_U]#1PWM;X\&3+>!:-P`.`.+$B(V&0T/YY0\^5%3H]X,!%@1$
M5""I`T4>H*D"J"DB."4@%C?P=5N?\=:>+]O;#^]YS1@^VPJR!N_X"K>H:'CI
MQ=8S4?- at ET9'0T3[NXG.A8 at TDXB(R+(X_=9U at S;O.A3T%C?L!E,"`(3_W8Z2
M;UKN4V^?//7)F3B=&^84UH at X3TG5I$W[CO<DYS6^<5QPES0!\$QJE^?->[)Y
M^\>]T>Z_=9J at +Z31SG?;KF7-6OTF!.>,NTIY)TSV*"6/?M#2\M,(Z2;1H=.#
MR<7KWSDN^4H;`:1/6G@[CIPY%?6OMEUX_KT3O?[*1UZ'J-Q;RG_'%EE:WMS[
>I(SI=9.NY3C_`'?'9X.OGHHO`````$E%3D2N0F""
`
end




From roger at opq.se  Thu Oct 13 06:05:27 2011
From: roger at opq.se (Roger Oberholtzer)
Date: Thu, 13 Oct 2011 15:05:27 +0200
Subject: [Proj] general question about upgrading PROJ.4
In-Reply-To: <j76hdj$ife$1@dough.gmane.org>
References: <j76brd$bll$1@dough.gmane.org>
	<1318500905.9020.74.camel@acme.pacific> <j76hdj$ife$1@dough.gmane.org>
Message-ID: <1318511127.9020.110.camel@acme.pacific>

On Thu, 2011-10-13 at 12:18 +0100, Garret Duffy wrote:
> Hi,
> 
> Thanks for the reply.  When I run the command, I get:
> 
> libproj0-4.7.0-9.1
> proj-4.7.0-9.1
> libproj-devel-4.7.0-9.1

So at least the 4.5 RPM is not installed.

How about these commands:

% ldd /usr/bin/proj
        linux-gate.so.1 =>  (0xffffe000)
        libproj.so.0 => /usr/lib/libproj.so.0 (0xb76d0000)
        libm.so.6 => /lib/libm.so.6 (0xb766d000)
        libc.so.6 => /lib/libc.so.6 (0xb750d000)
        /lib/ld-linux.so.2 (0xb770f000)

% ll /usr/lib/libproj.so*
lrwxrwxrwx 1 root root     16 2011-03-28 13:07 /usr/lib/libproj.so -> libproj.so.0.6.6
lrwxrwxrwx 1 root root     16 2011-03-28 13:05 /usr/lib/libproj.so.0 -> libproj.so.0.6.6
-rw-r--r-- 1 root root 247676 2011-03-18 14:38 /usr/lib/libproj.so.0.6.6

% rpm -ql libproj0-4.7.0-9.1
/usr/lib/libproj.so.0
/usr/lib/libproj.so.0.6.6

What I want to see is that /usr/bin/proj is using the libs in the
installed RPM. Yours may contain a lib ending with .0.6.6. What do you
get for these?

> 
> I have OpenSUSE 11.0 installed with repositories for 11.1 and 11.2 added to 
> YaST2
> 
> I used SLE_11 because the list of OSs in the GEO repository are:
>  Parent Directory                                 -
>  CentOS_5/                   10-Oct-2011 02:11    -
>  RHEL_4/                     18-Aug-2011 13:59    -
>  RHEL_5/                     10-Oct-2011 02:11    -
>  SLES_9/                     07-Oct-2011 18:05    -
>  SLE_10/                     07-Oct-2011 18:04    -
>  SLE_11/                     10-Oct-2011 20:35    -
>  openSUSE_11.2/              10-Oct-2011 20:38    -
>  openSUSE_11.3/              10-Oct-2011 20:43    -
>  openSUSE_11.4/              10-Oct-2011 20:39    -
>  openSUSE_Factory/           10-Oct-2011 22:33    -
>  openSUSE_Tumblewe
> 
> I didn't see an entry for openSUSE 11.0 so I thought SLE_11 was it...  is 
> that where I went wrong?

I think perhaps. The problem is that 11.0 is no longer supported. I have
11.2 and am in the same boat.

I would try openSUSE_Factory/ and disable all the other ones. And not
only in the Geo area. I cannot think of any package that is in the
CentOS/RedHat/SLED repos that is not in an openSUSE repo. In fact, I
wonder if any RPM from those repos have been installed. Those other
repos are for users of those operating systems. openSUSE wants to
provide a one-stop location for all distros. But that does not mean you
can mix them on your system!

If the same version of an RPM is in openSUSE_11.4/ or earlier, I would
use the one closest to 11.0. It minimizes the chance of other things
needing to be changed.


> I don't use linux every day, I only use it for grass and proj so you 
> probably see that I am not an expert user by any means...
> 
> Thanks,
> 
> Garret
> 
> 
> "Roger Oberholtzer" <roger at opq.se> wrote in message 
> news:1318500905.9020.74.camel at acme.pacific...
> > On Thu, 2011-10-13 at 10:43 +0100, Garret Duffy wrote:
> >> Hi,
> >>
> >> I have installed PROJ.4 version 4.7.0-9.1 using OpenSUSE YaST2 with the
> >> Geo/SLE_11 Repository.
> >
> > If you are using openSUSE, why are you taking things from the SLE_11
> > repository? Which version of openSUSE are you using?
> >
> > What do you get for:
> >
> > rpm -qa | grep proj
> >
> >
> >>
> >> Everything installs fine and according to YaST2, the correct version has
> >> just been installed.
> >>
> >> However, when I run /usr/bin/proj, I get the message that version 4.5 is
> >> still installed even though the new version is supposed to be installed 
> >> to
> >> that location.  I have the same issue with GDAL, I upgraded it but when I
> >> run gdalinfo --version, it states the old version is still installed.
> >>
> >> I'm hoping someone can help.
> >>
> >> Garret
> >>
> >>
> >>
> >> _______________________________________________
> >> Proj mailing list
> >> Proj at lists.maptools.org
> >> http://lists.maptools.org/mailman/listinfo/proj
> >
> > Yours sincerely,
> >
> > Roger Oberholtzer
> >
> > OPQ Systems / Rambll RST
> >
> > Office: Int +46 10-615 60 20
> > Mobile: Int +46 70-815 1696
> > roger.oberholtzer at ramboll.se
> > ________________________________________
> >
> > Rambll Sverige AB
> > Krukmakargatan 21
> > P.O. Box 17009
> > SE-104 62 Stockholm, Sweden
> > www.rambollrst.se
> >
> >
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj 
> 
> 
> begin 666 up.png
> MB5!.1PT*&@H````-24A$4@```!8````6" 8```#$M&P[````!F)+1T0`_P#_
> M`/^@O:>3````"7!(67,```L2```+$@'2W7[\````!W1)344'TPD"%3<BH.WN
> MD ```CA)1$%4>-KME3UH$V$8QW]W27.V:6.DQ11:))&"E")-$031H047X806
> MU$%$+JN#'Z6#>T?%4A%Q$*YS%P,Y* XE+FX.J8M0T%Q;8ZN-YFPNYI+<AT-*
> MVM*F6K2#X //\N=Y?[S/P_]]7L'S/ XC1 XI_CVP(,OR+O'U8$H1)52WPLSY
> MA<N)OW+C^:Z48N50)T]GB10+RGQ72OEC\%PX-6P[J ]&<PP.Q)B\YJ-3*JIS
> MX8/#&V"M(QEW7._%_8L?"1[K87$53"?$O4L>1Z6RJG4DE0.#M>!L',].)\ZN
> MAFVIE\55&IFW0MPX5R7@<U4M./O;<(&K&W$$,7VF3PJ?C/B;%FZ4JKQ\*X!C
> M)>3R]9E?@Z]\*R &PBU2$ "_#RZ<VBK0U^L)4*O5P#8!AF3K9F8_L!_/'<.Q
> MJ/VPZH<]>^K+]T@\U%HO<#VHE3X;"&("1 - KBA-H5K@>1Q([_*QYG^F=A[O
> M4?JZM[0W'\ Q5S+ B&S?,II"_4_O at C@%)'>#?4^&\1U)#_1%\&\SX\*2`Z5E
> M`Y@&9F3WM at Z@B8^CP"AP!X@"!H(8V_/E:<*C-&V]P_TG6G?H^2*L%\I07 at .W
> MNCG,-F@)U0U6_F0 at B".R-Y[9VP:>.T9I.?MN)1J.1:2&W"Y!>W<K$&MH51MR
> M7RM at Z@8P(GOCF:9+2&;"`(8P]4QV*8>>![,"5FTK\T7(KI7)K;P'4T\",9F)
> MS+Y+:,=8>*ALSB^.&*BW7C4`=. 5,+T=V #__T$.'?P3(N;@\5,A'B\`````
> (245.1*Y"8((`
> `
> end
> 
> begin 666 folder.png
> MB5!.1PT*&@H````-24A$4@```!8````6" 8```#$M&P[````!&=!34$``+&.
> M?/M1DP```"!C2%)-``!Z)0``@(,``/G_``" Z0``=3 ``.I@```ZF ``%V^2
> M7\5&````!F)+1T0`_P#_`/^@O:>3````"7!(67,```L3```+$P$`FIP8```$
> MR$E$050XRYV4:6Q4513'__>]-Z_S9CHS+6VG"Z5I*66 at 34HIH0(I*!;+8ENB
> M5F65A"4:1(W$)7S2J!\PT1AB8F*,-E:)0 at 11,2RFH!5,D+!(K=24MA:FG<J4
> MMK.]-V^[QP_3`D$3*;^O]^:7_SWGW"/B7G!XE?R:K<U+-NSY<#2B.W0]>5UR
> MY^9P+3PZ<85-3N at 1?26U\^?5K7NVYH%E3:;H\_Y\Y%B'/],=[;S4T=?WPZX=
> M(","`-)="04)2E[ES.I5.YY9NG+YNO3<W-R>`1W62 QSJA<%SO^I=HUJ`_D0
> MI S8_R&6/'ZG)[^LG%L&HL$_?B=#-9Q3J_)GU:[=4-^X>EM9><F,:U%B5X,1
> M>+B 03X%%WM,=NUJPI8H*X,YO%/(5OMOBIE#$0H6/3Y_6?/6YU8MKEP1CB?Y
> M9ZT'/HU>'^RO7[UFX\*:0'6,"U+O@ 91M^!VN'$I*",XS,!%)KE$.=^DS#B3
> MLPHI.70!`"11\3H6;MF]??N6#:\\4.XI$&4 at 9OE05O+T3ETGDF51[!HTD(@F
> MD24[<%5UX\IUAC$UU2!!%)A+3,L<LUPD. N+>;0S53U?H+9TVZ:U+S17>0K2
> M9, D@ #D98A"9H8D7 at GI\#!"NMN-8,*)<(*!<X H53XR",P4';"="E.F!P#(
> M`"!8:D2W=,WF2 DG( !)@T,F#I<K#<.J`--*'=P4<P)%37!+$!A3%.:<&8#H
> MS ``(5"_N6%JECO[]B9.S.#0J 6W+""J,Q '^+B4$T V`3$;7+5AVX H.1VR
> M4EHJ./W%`"#D^/V!606>#!H7,@!QG=#1K\-4;;A<,A+FN'1";!(HP<$U&Y9)
> M($ZHGDW"QL;<PO3LV34`($;C6KQZ\?*'9^8I;IT(5VYP7!XPD>,2X//*"*L"
> M$AJ at ZH"J`O$XH$: 9(Q#UP@>R41330QKZB(HF\;$B]TQ<ZCGEZ-"N+/]['=M
> M9]J3%A"*< S>L#&W6(8WTX&$Q6"//]TT`<,`+ .P3( X4%5LX.7'8GABJ88I
> M7 at 9&-G+RBN<@S5\FDJE98[J()74K&YE#E"2!P>,3$4NF4B:20"0!Q-5;B17&
> MT5BI87UM'-.R+7";H[L_BI9O+H5.G3RPUQCK/"$!P$!'^X_?ME^^N*FI:D%0
> MMY!MIVII<\"P`,L&; L at 3JB<RK$BH&%&M@';$C \8N/(Z:#Q^5?'3G>?W_<^
> M)?K:`$0E`#!'_ at I_?W#?%PWW5]08!@FF2>#$8-J :0.6!7AD8&DE84&1"44"
> MDDF&R[TQ?+3_U]#1PWM;X\&3+>!:-P`.`.+$B(V&0T/YY0\^5%3H]X,!%@1$
> M5""I`T4>H*D"J"DB."4@%C?P=5N?\=:>+]O;#^]YS1@^VPJR!N_X"K>H:'CI
> MQ=8S4?- at ET9'0T3[NXG.A8 at TDXB(R+(X_=9U at S;O.A3T%C?L!E,"`(3_W8Z2
> M;UKN4V^?//7)F3B=&^84UH at X3TG5I$W[CO<DYS6^<5QPES0!\$QJE^?->[)Y
> M^\>]T>Z_=9J at +Z31SG?;KF7-6OTF!.>,NTIY)TSV*"6/?M#2\M,(Z2;1H=.#
> MR<7KWSDN^4H;`:1/6G@[CIPY%?6OMEUX_KT3O?[*1UZ'J-Q;RG_'%EE:WMS[
> >I(SI=9.NY3C_`'?'9X.OGHHO`````$E%3D2N0F""
> `
> end
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

Yours sincerely,

Roger Oberholtzer

OPQ Systems / Ramböll RST

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696
roger.oberholtzer at ramboll.se
________________________________________

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden
www.rambollrst.se




From garret.duffy at nuigalway.ie  Thu Oct 13 06:50:05 2011
From: garret.duffy at nuigalway.ie (Duffy, Garret)
Date: Thu, 13 Oct 2011 14:50:05 +0100
Subject: [Proj] general question about upgrading PROJ.4
In-Reply-To: <1318511127.9020.110.camel@acme.pacific>
References: <j76brd$bll$1@dough.gmane.org><1318500905.9020.74.camel@acme.pacific>
	<j76hdj$ife$1@dough.gmane.org>
	<1318511127.9020.110.camel@acme.pacific>
Message-ID: <1612FB018DB27B449265FE30F163AF5D056A47E4@EVS1.ac.nuigalway.ie>

Hi Roger,

This is what is returned when I type the commands:

garret at linux-gky9:~> ldd /usr/bin/proj
        linux-gate.so.1 =>  (0xffffe000)
        libproj.so.0 => /usr/local/lib/libproj.so.0 (0xb7fdb000)
        libm.so.6 => /lib/libm.so.6 (0xb7fb5000)
        libc.so.6 => /lib/libc.so.6 (0xb7e72000)
        /lib/ld-linux.so.2 (0xb8031000)

garret at linux-gky9:~> ll /usr/lib/libproj.so*
-rw-r--r-- 1 root root 230K 2011-08-18 12:43 /usr/lib/libproj.so.0.6.6
lrwxrwxrwx 1 root root   16 2011-10-06 09:54 /usr/lib/libproj.so.0 -> libproj.so.0.6.6
lrwxrwxrwx 1 root root   16 2011-10-06 09:54 /usr/lib/libproj.so -> libproj.so.0.6.6

garret at linux-gky9:~> rpm -ql libproj0-4.7.0-9.1
/usr/lib/libproj.so.0
/usr/lib/libproj.so.0.6.6

garret at linux-gky9:~> proj
Rel. 4.5.0, 22 Oct 2006

So, I think the same as you had.

I will try what you suggest, remove the SLE11 Geo repo and suse repos with suse version greater than 11 and add susefactory.  So, should I just reinstall grass and proj with this new configuration?

The reason I added the suse repos with version greater than 11 was to get python 2.6... but I guess you can't do that...

I wonder can I upgrade to from 11.0 to 11.2 without doing a clean install?

Thanks again for your help.

Garret

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Roger Oberholtzer
Sent: 13-Oct-11 2:05 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] general question about upgrading PROJ.4

On Thu, 2011-10-13 at 12:18 +0100, Garret Duffy wrote:
> Hi,
> 
> Thanks for the reply.  When I run the command, I get:
> 
> libproj0-4.7.0-9.1
> proj-4.7.0-9.1
> libproj-devel-4.7.0-9.1

So at least the 4.5 RPM is not installed.

How about these commands:

% ldd /usr/bin/proj
        linux-gate.so.1 =>  (0xffffe000)
        libproj.so.0 => /usr/lib/libproj.so.0 (0xb76d0000)
        libm.so.6 => /lib/libm.so.6 (0xb766d000)
        libc.so.6 => /lib/libc.so.6 (0xb750d000)
        /lib/ld-linux.so.2 (0xb770f000)

% ll /usr/lib/libproj.so*
lrwxrwxrwx 1 root root     16 2011-03-28 13:07 /usr/lib/libproj.so -> libproj.so.0.6.6
lrwxrwxrwx 1 root root     16 2011-03-28 13:05 /usr/lib/libproj.so.0 -> libproj.so.0.6.6
-rw-r--r-- 1 root root 247676 2011-03-18 14:38 /usr/lib/libproj.so.0.6.6

% rpm -ql libproj0-4.7.0-9.1
/usr/lib/libproj.so.0
/usr/lib/libproj.so.0.6.6

What I want to see is that /usr/bin/proj is using the libs in the installed RPM. Yours may contain a lib ending with .0.6.6. What do you get for these?

> 
> I have OpenSUSE 11.0 installed with repositories for 11.1 and 11.2 
> added to
> YaST2
> 
> I used SLE_11 because the list of OSs in the GEO repository are:
>  Parent Directory                                 -
>  CentOS_5/                   10-Oct-2011 02:11    -
>  RHEL_4/                     18-Aug-2011 13:59    -
>  RHEL_5/                     10-Oct-2011 02:11    -
>  SLES_9/                     07-Oct-2011 18:05    -
>  SLE_10/                     07-Oct-2011 18:04    -
>  SLE_11/                     10-Oct-2011 20:35    -
>  openSUSE_11.2/              10-Oct-2011 20:38    -
>  openSUSE_11.3/              10-Oct-2011 20:43    -
>  openSUSE_11.4/              10-Oct-2011 20:39    -
>  openSUSE_Factory/           10-Oct-2011 22:33    -
>  openSUSE_Tumblewe
> 
> I didn't see an entry for openSUSE 11.0 so I thought SLE_11 was it...  
> is that where I went wrong?

I think perhaps. The problem is that 11.0 is no longer supported. I have
11.2 and am in the same boat.

I would try openSUSE_Factory/ and disable all the other ones. And not only in the Geo area. I cannot think of any package that is in the CentOS/RedHat/SLED repos that is not in an openSUSE repo. In fact, I wonder if any RPM from those repos have been installed. Those other repos are for users of those operating systems. openSUSE wants to provide a one-stop location for all distros. But that does not mean you can mix them on your system!

If the same version of an RPM is in openSUSE_11.4/ or earlier, I would use the one closest to 11.0. It minimizes the chance of other things needing to be changed.


> I don't use linux every day, I only use it for grass and proj so you 
> probably see that I am not an expert user by any means...
> 
> Thanks,
> 
> Garret
> 
> 
> "Roger Oberholtzer" <roger at opq.se> wrote in message 
> news:1318500905.9020.74.camel at acme.pacific...
> > On Thu, 2011-10-13 at 10:43 +0100, Garret Duffy wrote:
> >> Hi,
> >>
> >> I have installed PROJ.4 version 4.7.0-9.1 using OpenSUSE YaST2 with 
> >> the
> >> Geo/SLE_11 Repository.
> >
> > If you are using openSUSE, why are you taking things from the SLE_11 
> > repository? Which version of openSUSE are you using?
> >
> > What do you get for:
> >
> > rpm -qa | grep proj
> >
> >
> >>
> >> Everything installs fine and according to YaST2, the correct 
> >> version has just been installed.
> >>
> >> However, when I run /usr/bin/proj, I get the message that version 
> >> 4.5 is still installed even though the new version is supposed to 
> >> be installed to that location.  I have the same issue with GDAL, I 
> >> upgraded it but when I run gdalinfo --version, it states the old 
> >> version is still installed.
> >>
> >> I'm hoping someone can help.
> >>
> >> Garret
> >>
> >>
> >>
> >> _______________________________________________
> >> Proj mailing list
> >> Proj at lists.maptools.org
> >> http://lists.maptools.org/mailman/listinfo/proj
> >
> > Yours sincerely,
> >
> > Roger Oberholtzer
> >
> > OPQ Systems / Rambll RST
> >
> > Office: Int +46 10-615 60 20
> > Mobile: Int +46 70-815 1696
> > roger.oberholtzer at ramboll.se
> > ________________________________________
> >
> > Rambll Sverige AB
> > Krukmakargatan 21
> > P.O. Box 17009
> > SE-104 62 Stockholm, Sweden
> > www.rambollrst.se
> >
> >
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
> 
> 
> begin 666 up.png
> MB5!.1PT*&@H````-24A$4@```!8````6" 8```#$M&P[````!F)+1T0`_P#_ 
> M`/^@O:>3````"7!(67,```L2```+$@'2W7[\````!W1)344'TPD"%3<BH.WN
> MD ```CA)1$%4>-KME3UH$V$8QW]W27.V:6.DQ11:))&"E")-$031H047X806
> MU$%$+JN#'Z6#>T?%4A%Q$*YS%P,Y* XE+FX.J8M0T%Q;8ZN-YFPNYI+<AT-* 
> MVM*F6K2#X //\N=Y?[S/P_]]7L'S/ XC1 XI_CVP(,OR+O'U8$H1)52WPLSY 
> MA<N)OW+C^:Z48N50)T]GB10+RGQ72OEC\%PX-6P[J ]&<PP.Q)B\YJ-3*JIS 
> MX8/#&V"M(QEW7._%_8L?"1[K87$53"?$O4L>1Z6RJG4DE0.#M>!L',].)\ZN
> MAFVIE\55&IFW0MPX5R7@<U4M./O;<(&K&W$$,7VF3PJ?C/B;%FZ4JKQ\*X!C
> M)>3R]9E?@Z]\*R &PBU2$ "_#RZ<VBK0U^L)4*O5P#8!AF3K9F8_L!_/'<.Q
> MJ/VPZH<]>^K+]T@\U%HO<#VHE3X;"&("1 - KBA-H5K@>1Q([_*QYG^F=A[O 
> M4?JZM[0W'\ Q5S+ B&S?,II"_4_O at C@%)'>#?4^&\1U)#_1%\&\SX\*2`Z5E
> M`Y@&9F3WM at Z@B8^CP"AP!X@"!H(8V_/E:<*C-&V]P_TG6G?H^2*L%\I07 at .W
> MNCG,-F@)U0U6_F0 at B".R-Y[9VP:>.T9I.?MN)1J.1:2&W"Y!>W<K$&MH51MR
> M7RM at Z@8P(GOCF:9+2&;"`(8P]4QV*8>>![,"5FTK\T7(KI7)K;P'4T\",9F)
> MS+Y+:,=8>*ALSB^.&*BW7C4`=. 5,+T=V #__T$.'?P3(N;@\5,A'B\`````
> (245.1*Y"8((`
> `
> end
> 
> begin 666 folder.png
> MB5!.1PT*&@H````-24A$4@```!8````6" 8```#$M&P[````!&=!34$``+&.
> M?/M1DP```"!C2%)-``!Z)0``@(,``/G_``" Z0``=3 ``.I@```ZF ``%V^2 
> M7\5&````!F)+1T0`_P#_`/^@O:>3````"7!(67,```L3```+$P$`FIP8```$
> MR$E$050XRYV4:6Q4513'__>]-Z_S9CHS+6VG"Z5I*66 at 34HIH0(I*!;+8ENB
> M5F65A"4:1(W$)7S2J!\PT1AB8F*,-E:)0 at 11,2RFH!5,D+!(K=24MA:FG<J4
> MMK.]-V^[QP_3`D$3*;^O]^:7_SWGW"/B7G!XE?R:K<U+-NSY<#2B.W0]>5UR
> MY^9P+3PZ<85-3N at 1?26U\^?5K7NVYH%E3:;H\_Y\Y%B'/],=[;S4T=?WPZX=
> M(","`-)="04)2E[ES.I5.YY9NG+YNO3<W-R>`1W62 QSJA<%SO^I=HUJ`_D0 MI 
> S8_R&6/'ZG)[^LG%L&HL$_?B=#-9Q3J_)GU:[=4-^X>EM9><F,:U%B5X,1
> M>+B 03X%%WM,=NUJPI8H*X,YO%/(5OMOBIE#$0H6/3Y_6?/6YU8MKEP1CB?Y
> M9ZT'/HU>'^RO7[UFX\*:0'6,"U+O@ 91M^!VN'$I*",XS,!%)KE$.=^DS#B3 
> MLPHI.70!`"11\3H6;MF]??N6#:\\4.XI$&4 at 9OE05O+T3ETGDF51[!HTD(@F
> MD24[<%5UX\IUAC$UU2!!%)A+3,L<LUPD. N+>;0S53U?H+9TVZ:U+S17>0K2 M9, D@ 
> #D98A"9H8D7 at GI\#!"NMN-8,*)<(*!<X H53XR",P4';"="E.F!P#(
> M`"!8:D2W=,WF2 DG( !)@T,F#I<K#<.J`--*'=P4<P)%37!+$!A3%.:<&8#H
> MS ``(5"_N6%JECO[]B9.S.#0J 6W+""J,Q '^+B4$T V`3$;7+5AVX H.1VR
> M4EHJ./W%`"#D^/V!606>#!H7,@!QG=#1K\-4;;A<,A+FN'1";!(HP<$U&Y9)
> M($ZHGDW"QL;<PO3LV34`($;C6KQZ\?*'9^8I;IT(5VYP7!XPD>,2X//*"*L"
> M$AJ at ZH"J`O$XH$: 9(Q#UP@>R41330QKZB(HF\;$B]TQ<ZCGEZ-"N+/]['=M
> M9]J3%A"*< S>L#&W6(8WTX&$Q6"//]TT`<,`+ .P3( X4%5LX.7'8GABJ88I 
> M7 at 9&-G+RBN<@S5\FDJE98[J()74K&YE#E"2!P>,3$4NF4B:20"0!Q-5;B17&
> MT5BI87UM'-.R+7";H[L_BI9O+H5.G3RPUQCK/"$!P$!'^X_?ME^^N*FI:D%0
> MMY!MIVII<\"P`,L&; L at 3JB<RK$BH&%&M@';$C \8N/(Z:#Q^5?'3G>?W_<^ 
> M)?K:`$0E`#!'_ at I_?W#?%PWW5]08!@FF2>#$8-J :0.6!7AD8&DE84&1"44"
> MDDF&R[TQ?+3_U]#1PWM;X\&3+>!:-P`.`.+$B(V&0T/YY0\^5%3H]X,!%@1$
> M5""I`T4>H*D"J"DB."4@%C?P=5N?\=:>+]O;#^]YS1@^VPJR!N_X"K>H:'CI
> MQ=8S4?- at ET9'0T3[NXG.A8 at TDXB(R+(X_=9U at S;O.A3T%C?L!E,"`(3_W8Z2
> M;UKN4V^?//7)F3B=&^84UH at X3TG5I$W[CO<DYS6^<5QPES0!\$QJE^?->[)Y
> M^\>]T>Z_=9J at +Z31SG?;KF7-6OTF!.>,NTIY)TSV*"6/?M#2\M,(Z2;1H=.#
> MR<7KWSDN^4H;`:1/6G@[CIPY%?6OMEUX_KT3O?[*1UZ'J-Q;RG_'%EE:WMS[
> >I(SI=9.NY3C_`'?'9X.OGHHO`````$E%3D2N0F""
> `
> end
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

Yours sincerely,

Roger Oberholtzer

OPQ Systems / Ramböll RST

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696
roger.oberholtzer at ramboll.se
________________________________________

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden
www.rambollrst.se


_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From roger at opq.se  Thu Oct 13 07:51:46 2011
From: roger at opq.se (Roger Oberholtzer)
Date: Thu, 13 Oct 2011 16:51:46 +0200
Subject: [Proj] general question about upgrading PROJ.4
In-Reply-To: <1612FB018DB27B449265FE30F163AF5D056A47E4@EVS1.ac.nuigalway.ie>
References: <j76brd$bll$1@dough.gmane.org>
	<1318500905.9020.74.camel@acme.pacific> <j76hdj$ife$1@dough.gmane.org>
	<1318511127.9020.110.camel@acme.pacific>
	<1612FB018DB27B449265FE30F163AF5D056A47E4@EVS1.ac.nuigalway.ie>
Message-ID: <1318517506.9020.126.camel@acme.pacific>

On Thu, 2011-10-13 at 14:50 +0100, Duffy, Garret wrote:
> Hi Roger,
> 
> This is what is returned when I type the commands:
> 
> garret at linux-gky9:~> ldd /usr/bin/proj
>         linux-gate.so.1 =>  (0xffffe000)
>         libproj.so.0 => /usr/local/lib/libproj.so.0 (0xb7fdb000)
>         libm.so.6 => /lib/libm.so.6 (0xb7fb5000)
>         libc.so.6 => /lib/libc.so.6 (0xb7e72000)
>         /lib/ld-linux.so.2 (0xb8031000)
> 
> garret at linux-gky9:~> ll /usr/lib/libproj.so*
> -rw-r--r-- 1 root root 230K 2011-08-18 12:43 /usr/lib/libproj.so.0.6.6
> lrwxrwxrwx 1 root root   16 2011-10-06 09:54 /usr/lib/libproj.so.0 -> libproj.so.0.6.6
> lrwxrwxrwx 1 root root   16 2011-10-06 09:54 /usr/lib/libproj.so -> libproj.so.0.6.6
> 
> garret at linux-gky9:~> rpm -ql libproj0-4.7.0-9.1
> /usr/lib/libproj.so.0
> /usr/lib/libproj.so.0.6.6
> 
> garret at linux-gky9:~> proj
> Rel. 4.5.0, 22 Oct 2006


I think I see your problem. What are the /usr/local/lib/libproj.so*
files? That is what the proj program is using. Not the ones in the
installed RPM. This must be wrong.

Get rid (safely of course) of /usr/local/lib/libproj.so* and things may
look different. Hopefully even look better. (Run 'ldconfig' after
removing the files.)


> 
> So, I think the same as you had.
> 
> I will try what you suggest, remove the SLE11 Geo repo and suse repos with suse version greater than 11 and add susefactory.  So, should I just reinstall grass and proj with this new configuration?
> 
> The reason I added the suse repos with version greater than 11 was to get python 2.6... but I guess you can't do that...

I don't know about that. 2.6 may be available. That is perhaps off topic
here. Send me a message off-list and maybe I can help.


> 
> I wonder can I upgrade to from 11.0 to 11.2 without doing a clean install?

No idea. 

> 
> Thanks again for your help.
> 
> Garret
> 
> -----Original Message-----
> From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Roger Oberholtzer
> Sent: 13-Oct-11 2:05 PM
> To: PROJ.4 and general Projections Discussions
> Subject: Re: [Proj] general question about upgrading PROJ.4
> 
> On Thu, 2011-10-13 at 12:18 +0100, Garret Duffy wrote:
> > Hi,
> > 
> > Thanks for the reply.  When I run the command, I get:
> > 
> > libproj0-4.7.0-9.1
> > proj-4.7.0-9.1
> > libproj-devel-4.7.0-9.1
> 
> So at least the 4.5 RPM is not installed.
> 
> How about these commands:
> 
> % ldd /usr/bin/proj
>         linux-gate.so.1 =>  (0xffffe000)
>         libproj.so.0 => /usr/lib/libproj.so.0 (0xb76d0000)
>         libm.so.6 => /lib/libm.so.6 (0xb766d000)
>         libc.so.6 => /lib/libc.so.6 (0xb750d000)
>         /lib/ld-linux.so.2 (0xb770f000)
> 
> % ll /usr/lib/libproj.so*
> lrwxrwxrwx 1 root root     16 2011-03-28 13:07 /usr/lib/libproj.so -> libproj.so.0.6.6
> lrwxrwxrwx 1 root root     16 2011-03-28 13:05 /usr/lib/libproj.so.0 -> libproj.so.0.6.6
> -rw-r--r-- 1 root root 247676 2011-03-18 14:38 /usr/lib/libproj.so.0.6.6
> 
> % rpm -ql libproj0-4.7.0-9.1
> /usr/lib/libproj.so.0
> /usr/lib/libproj.so.0.6.6
> 
> What I want to see is that /usr/bin/proj is using the libs in the installed RPM. Yours may contain a lib ending with .0.6.6. What do you get for these?
> 
> > 
> > I have OpenSUSE 11.0 installed with repositories for 11.1 and 11.2 
> > added to
> > YaST2
> > 
> > I used SLE_11 because the list of OSs in the GEO repository are:
> >  Parent Directory                                 -
> >  CentOS_5/                   10-Oct-2011 02:11    -
> >  RHEL_4/                     18-Aug-2011 13:59    -
> >  RHEL_5/                     10-Oct-2011 02:11    -
> >  SLES_9/                     07-Oct-2011 18:05    -
> >  SLE_10/                     07-Oct-2011 18:04    -
> >  SLE_11/                     10-Oct-2011 20:35    -
> >  openSUSE_11.2/              10-Oct-2011 20:38    -
> >  openSUSE_11.3/              10-Oct-2011 20:43    -
> >  openSUSE_11.4/              10-Oct-2011 20:39    -
> >  openSUSE_Factory/           10-Oct-2011 22:33    -
> >  openSUSE_Tumblewe
> > 
> > I didn't see an entry for openSUSE 11.0 so I thought SLE_11 was it...  
> > is that where I went wrong?
> 
> I think perhaps. The problem is that 11.0 is no longer supported. I have
> 11.2 and am in the same boat.
> 
> I would try openSUSE_Factory/ and disable all the other ones. And not only in the Geo area. I cannot think of any package that is in the CentOS/RedHat/SLED repos that is not in an openSUSE repo. In fact, I wonder if any RPM from those repos have been installed. Those other repos are for users of those operating systems. openSUSE wants to provide a one-stop location for all distros. But that does not mean you can mix them on your system!
> 
> If the same version of an RPM is in openSUSE_11.4/ or earlier, I would use the one closest to 11.0. It minimizes the chance of other things needing to be changed.
> 
> 
> > I don't use linux every day, I only use it for grass and proj so you 
> > probably see that I am not an expert user by any means...
> > 
> > Thanks,
> > 
> > Garret
> > 
> > 
> > "Roger Oberholtzer" <roger at opq.se> wrote in message 
> > news:1318500905.9020.74.camel at acme.pacific...
> > > On Thu, 2011-10-13 at 10:43 +0100, Garret Duffy wrote:
> > >> Hi,
> > >>
> > >> I have installed PROJ.4 version 4.7.0-9.1 using OpenSUSE YaST2 with 
> > >> the
> > >> Geo/SLE_11 Repository.
> > >
> > > If you are using openSUSE, why are you taking things from the SLE_11 
> > > repository? Which version of openSUSE are you using?
> > >
> > > What do you get for:
> > >
> > > rpm -qa | grep proj
> > >
> > >
> > >>
> > >> Everything installs fine and according to YaST2, the correct 
> > >> version has just been installed.
> > >>
> > >> However, when I run /usr/bin/proj, I get the message that version 
> > >> 4.5 is still installed even though the new version is supposed to 
> > >> be installed to that location.  I have the same issue with GDAL, I 
> > >> upgraded it but when I run gdalinfo --version, it states the old 
> > >> version is still installed.
> > >>
> > >> I'm hoping someone can help.
> > >>
> > >> Garret
> > >>
> > >>
> > >>
> > >> _______________________________________________
> > >> Proj mailing list
> > >> Proj at lists.maptools.org
> > >> http://lists.maptools.org/mailman/listinfo/proj
> > >
> > > Yours sincerely,
> > >
> > > Roger Oberholtzer
> > >
> > > OPQ Systems / Rambll RST
> > >
> > > Office: Int +46 10-615 60 20
> > > Mobile: Int +46 70-815 1696
> > > roger.oberholtzer at ramboll.se
> > > ________________________________________
> > >
> > > Rambll Sverige AB
> > > Krukmakargatan 21
> > > P.O. Box 17009
> > > SE-104 62 Stockholm, Sweden
> > > www.rambollrst.se
> > >
> > >
> > > _______________________________________________
> > > Proj mailing list
> > > Proj at lists.maptools.org
> > > http://lists.maptools.org/mailman/listinfo/proj
> > 
> > 
> > begin 666 up.png
> > MB5!.1PT*&@H````-24A$4@```!8````6" 8```#$M&P[````!F)+1T0`_P#_ 
> > M`/^@O:>3````"7!(67,```L2```+$@'2W7[\````!W1)344'TPD"%3<BH.WN
> > MD ```CA)1$%4>-KME3UH$V$8QW]W27.V:6.DQ11:))&"E")-$031H047X806
> > MU$%$+JN#'Z6#>T?%4A%Q$*YS%P,Y* XE+FX.J8M0T%Q;8ZN-YFPNYI+<AT-* 
> > MVM*F6K2#X //\N=Y?[S/P_]]7L'S/ XC1 XI_CVP(,OR+O'U8$H1)52WPLSY 
> > MA<N)OW+C^:Z48N50)T]GB10+RGQ72OEC\%PX-6P[J ]&<PP.Q)B\YJ-3*JIS 
> > MX8/#&V"M(QEW7._%_8L?"1[K87$53"?$O4L>1Z6RJG4DE0.#M>!L',].)\ZN
> > MAFVIE\55&IFW0MPX5R7@<U4M./O;<(&K&W$$,7VF3PJ?C/B;%FZ4JKQ\*X!C
> > M)>3R]9E?@Z]\*R &PBU2$ "_#RZ<VBK0U^L)4*O5P#8!AF3K9F8_L!_/'<.Q
> > MJ/VPZH<]>^K+]T@\U%HO<#VHE3X;"&("1 - KBA-H5K@>1Q([_*QYG^F=A[O 
> > M4?JZM[0W'\ Q5S+ B&S?,II"_4_O at C@%)'>#?4^&\1U)#_1%\&\SX\*2`Z5E
> > M`Y@&9F3WM at Z@B8^CP"AP!X@"!H(8V_/E:<*C-&V]P_TG6G?H^2*L%\I07 at .W
> > MNCG,-F@)U0U6_F0 at B".R-Y[9VP:>.T9I.?MN)1J.1:2&W"Y!>W<K$&MH51MR
> > M7RM at Z@8P(GOCF:9+2&;"`(8P]4QV*8>>![,"5FTK\T7(KI7)K;P'4T\",9F)
> > MS+Y+:,=8>*ALSB^.&*BW7C4`=. 5,+T=V #__T$.'?P3(N;@\5,A'B\`````
> > (245.1*Y"8((`
> > `
> > end
> > 
> > begin 666 folder.png
> > MB5!.1PT*&@H````-24A$4@```!8````6" 8```#$M&P[````!&=!34$``+&.
> > M?/M1DP```"!C2%)-``!Z)0``@(,``/G_``" Z0``=3 ``.I@```ZF ``%V^2 
> > M7\5&````!F)+1T0`_P#_`/^@O:>3````"7!(67,```L3```+$P$`FIP8```$
> > MR$E$050XRYV4:6Q4513'__>]-Z_S9CHS+6VG"Z5I*66 at 34HIH0(I*!;+8ENB
> > M5F65A"4:1(W$)7S2J!\PT1AB8F*,-E:)0 at 11,2RFH!5,D+!(K=24MA:FG<J4
> > MMK.]-V^[QP_3`D$3*;^O]^:7_SWGW"/B7G!XE?R:K<U+-NSY<#2B.W0]>5UR
> > MY^9P+3PZ<85-3N at 1?26U\^?5K7NVYH%E3:;H\_Y\Y%B'/],=[;S4T=?WPZX=
> > M(","`-)="04)2E[ES.I5.YY9NG+YNO3<W-R>`1W62 QSJA<%SO^I=HUJ`_D0 MI 
> > S8_R&6/'ZG)[^LG%L&HL$_?B=#-9Q3J_)GU:[=4-^X>EM9><F,:U%B5X,1
> > M>+B 03X%%WM,=NUJPI8H*X,YO%/(5OMOBIE#$0H6/3Y_6?/6YU8MKEP1CB?Y
> > M9ZT'/HU>'^RO7[UFX\*:0'6,"U+O@ 91M^!VN'$I*",XS,!%)KE$.=^DS#B3 
> > MLPHI.70!`"11\3H6;MF]??N6#:\\4.XI$&4 at 9OE05O+T3ETGDF51[!HTD(@F
> > MD24[<%5UX\IUAC$UU2!!%)A+3,L<LUPD. N+>;0S53U?H+9TVZ:U+S17>0K2 M9, D@ 
> > #D98A"9H8D7 at GI\#!"NMN-8,*)<(*!<X H53XR",P4';"="E.F!P#(
> > M`"!8:D2W=,WF2 DG( !)@T,F#I<K#<.J`--*'=P4<P)%37!+$!A3%.:<&8#H
> > MS ``(5"_N6%JECO[]B9.S.#0J 6W+""J,Q '^+B4$T V`3$;7+5AVX H.1VR
> > M4EHJ./W%`"#D^/V!606>#!H7,@!QG=#1K\-4;;A<,A+FN'1";!(HP<$U&Y9)
> > M($ZHGDW"QL;<PO3LV34`($;C6KQZ\?*'9^8I;IT(5VYP7!XPD>,2X//*"*L"
> > M$AJ at ZH"J`O$XH$: 9(Q#UP@>R41330QKZB(HF\;$B]TQ<ZCGEZ-"N+/]['=M
> > M9]J3%A"*< S>L#&W6(8WTX&$Q6"//]TT`<,`+ .P3( X4%5LX.7'8GABJ88I 
> > M7 at 9&-G+RBN<@S5\FDJE98[J()74K&YE#E"2!P>,3$4NF4B:20"0!Q-5;B17&
> > MT5BI87UM'-.R+7";H[L_BI9O+H5.G3RPUQCK/"$!P$!'^X_?ME^^N*FI:D%0
> > MMY!MIVII<\"P`,L&; L at 3JB<RK$BH&%&M@';$C \8N/(Z:#Q^5?'3G>?W_<^ 
> > M)?K:`$0E`#!'_ at I_?W#?%PWW5]08!@FF2>#$8-J :0.6!7AD8&DE84&1"44"
> > MDDF&R[TQ?+3_U]#1PWM;X\&3+>!:-P`.`.+$B(V&0T/YY0\^5%3H]X,!%@1$
> > M5""I`T4>H*D"J"DB."4@%C?P=5N?\=:>+]O;#^]YS1@^VPJR!N_X"K>H:'CI
> > MQ=8S4?- at ET9'0T3[NXG.A8 at TDXB(R+(X_=9U at S;O.A3T%C?L!E,"`(3_W8Z2
> > M;UKN4V^?//7)F3B=&^84UH at X3TG5I$W[CO<DYS6^<5QPES0!\$QJE^?->[)Y
> > M^\>]T>Z_=9J at +Z31SG?;KF7-6OTF!.>,NTIY)TSV*"6/?M#2\M,(Z2;1H=.#
> > MR<7KWSDN^4H;`:1/6G@[CIPY%?6OMEUX_KT3O?[*1UZ'J-Q;RG_'%EE:WMS[
> > >I(SI=9.NY3C_`'?'9X.OGHHO`````$E%3D2N0F""
> > `
> > end
> > 
> > 
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
> 
> Yours sincerely,
> 
> Roger Oberholtzer
> 
> OPQ Systems / Ramböll RST
> 
> Office: Int +46 10-615 60 20
> Mobile: Int +46 70-815 1696
> roger.oberholtzer at ramboll.se
> ________________________________________
> 
> Ramböll Sverige AB
> Krukmakargatan 21
> P.O. Box 17009
> SE-104 62 Stockholm, Sweden
> www.rambollrst.se
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

Yours sincerely,

Roger Oberholtzer

OPQ Systems / Ramböll RST

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696
roger.oberholtzer at ramboll.se
________________________________________

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden
www.rambollrst.se




From spethm at landcareresearch.co.nz  Thu Oct 13 18:22:23 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Fri, 14 Oct 2011 14:22:23 +1300
Subject: [Proj] rHEALPix new parameters
Message-ID: <4E978ECF.9010000@landcareresearch.co.nz>

Greetings,
   I've implemented the HEALPix projection and have now moved on to 
implementing a new projection called rHEALPix.  I have two questions 
regarding this implementation.

* rHEALPix requires 2 new parameters (spole and npole).  How do I 
specify those parameters on the command line?  (In the code I am using 
the pr_param function.

* The rHEALPix projection uses the HEALPix projection.  So is it 
possible to create a header with corresponding c file that shares common 
functions between the HEALPix and rHEALPix projections?  If so, how 
should I name the files?

Thanks

-- 
Michael Speth
Scientific Programmer
Landcare Research



From warmerdam at pobox.com  Thu Oct 13 21:43:58 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 13 Oct 2011 21:43:58 -0700
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <4E978ECF.9010000@landcareresearch.co.nz>
References: <4E978ECF.9010000@landcareresearch.co.nz>
Message-ID: <4E97BE0E.8070601@pobox.com>

On 11-10-13 06:22 PM, Michael Speth wrote:
> Greetings,
>     I've implemented the HEALPix projection and have now moved on to
> implementing a new projection called rHEALPix.  I have two questions
> regarding this implementation.
>
> * rHEALPix requires 2 new parameters (spole and npole).  How do I
> specify those parameters on the command line?  (In the code I am using
> the pr_param function.

Michael,

To the best of my knowledge you just grab them with pj_param().  You
don't need to do anything special to declare them.

> * The rHEALPix projection uses the HEALPix projection.  So is it
> possible to create a header with corresponding c file that shares common
> functions between the HEALPix and rHEALPix projections?  If so, how
> should I name the files?

I would suggest just putting both projections in one source file to avoid
needing the external header file.  It is not uncommon to have more than one
related projection in a single file (eg. tmerc and utm in PJ_tmerc).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer



From Mikael.Rittri at carmenta.com  Fri Oct 14 02:47:31 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Fri, 14 Oct 2011 09:47:31 +0000
Subject: [Proj] apply plane rotation after transverse Mercator projection
In-Reply-To: <j769s3$ts3$1@dough.gmane.org>
References: <1612FB018DB27B449265FE30F163AF5D05640864@EVS1.ac.nuigalway.ie><B597ADFC46B67741B18EA6AA13613FF7026A6C6E@email002.lsu.edu>
	<11AC4CEB-F5B7-45A1-BE18-730A3FABD1C2@carmenta.com>
	<j769s3$ts3$1@dough.gmane.org>
Message-ID: <E4AB3DD44D22854B819908379DE4AD493888212E@SETHNWS023.carmenta.se>

Garret Duffy wrote:

> So this leads to two question and one request:
> 
> Q1) does omerc take the gamma parameter now? I am running v. 4.5

Depends on what you mean by "now". I think the status remains as
it was reported in the thread you linked to.  That is, there is 
no official release that supports omerc with gamma, but the trunk
does, and apparently you can get the proj.4 trunk from OSGeo4W 
(I haven't tried to use gamma in OSGeo4W.)

> Q2) what are the limits of alpha?

Don't know, but I would think that two alpha values that differ 
by 180 degrees give equivalent results. I mean, it should not matter
if you say that the initial line goes southwest or northeast from
the projection center; it is the same line that is specified. 
(I haven't tested this either.)

> R3) Would it be possible to design a new CRS similar to tmerc
>     but taking a gamma parameter?

I have implemented something similar in Carmenta Engine: the
RotatedProjection takes a base projection and modifies it by rotating
the projected plane a specified angle around a specified projected point.
I don't know if something similar would fit in the Proj.4 framework.  
But a gamma parameter could be added to any projection in Proj.4, I believe.  

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com
 
-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Garret Duffy
Sent: Thursday, October 13, 2011 11:09 AM
To: proj at lists.maptools.org
Subject: Re: [Proj] apply plane rotation after transverse Mercator projection

Yes, I've tried the omerc projection with +rot_conv and +no_uoff but the issue is the alpha azimuth parameter is actually the angle of the rotated cylinder about the ellipsoid (I think the limits are +/- 90?  Can anyone
confirm??) and this angle bears little or no relation to the azimuth of the projected y-axis relative to true north.  I tried making a bunch of projections with different alpha angles and +rot_conv and +no_uoff but is was very hard to precisely control the rotation of the linear features I was interested in measuring.

I think this thread involving Mikael and Frank discusses it well

http://osgeo-org.1803224.n2.nabble.com/looking-for-the-right-params-for-RSO-td5468455.html

It appears that the gamma parameter should actuate an XY_PLANE_ROTATION...

So this leads to two question and one request:

Q1) does omerc take the gamma parameter now? I am running v. 4.5

Q2) what are the limits of alpha?

R3) Would it be possible to design a new CRS similar to tmerc but taking a gamma parameter?

Thanks everyone for your advice.

Garret
"Mikael Rittri" <Mikael.Rittri at carmenta.com> wrote in message news:11AC4CEB-F5B7-45A1-BE18-730A3FABD1C2 at carmenta.com...
The Rosenmund projection is called +proj=somerc (Swiss Oblique Mercator), but I don't see why that should be better than the RSO (+proj=omerc) for this purpose.


I don't think there is any built-in support in Proj.4 to do an arbitrary rotation of the projected plane.
However, if you just need to rotate 90, 180 or 270 degrees, then you could perhaps use the +axis parameter.


Best regards,


Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com


Den 12 okt 2011 kl. 15:53 skrev "Clifford J Mugnier" <cjmce at lsu.edu>:


I don't know if PROJ4 has it, but the Rosenmund projection as used in Switzerland sounds like what you want.

Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering
Patrick F. Taylor Hall 3531
LOUISIANA STATE UNIVERSITY
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] Voice and Facsimile:  (225) 578-4578 [Research]
Cell: (225) 328-8975 [Academic & Research] Honorary Life Member of the Louisiana Society of Professional Surveyors Fellow Emeritus of the ASPRS Member of the Americas Petroleum Survey Group





From: proj-bounces at lists.maptools.org on behalf of Duffy, Garret
Sent: Wed 12-Oct-11 06:13
To: proj at lists.maptools.org
Subject: [Proj] apply plane rotation after transverse Mercator projection


Hi,
I would like to design a projection that is similar to a TM projection except append the parameter "XY_Plane_Rotation", i.e. rotate the XY axes.
Is this possible to do in PROJ4?  I note the tmerc doesn't have an alpha parameter or similar.  I already tried using RSO but it's overkill for what I want to do, all I want to do is apply a simple cartesian rotation to the projected XY axes.
Another thing I tried was editing a PRJ file for a TM projected data and then appending "PARAMETER["XY_Plane_Rotation",XX]" to the file but that doesn't seem to work.
Do I have to define a custom PROJCS that is based on tmerc but allows for the XY_Plane_Rotation parameter?
Any suggestions gratefully would be (very) gratefully received as I have been trying to do this supposedly simple thing all week.
Regards,
Garret
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj




_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From ndzinn at comcast.net  Fri Oct 14 12:06:51 2011
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Fri, 14 Oct 2011 14:06:51 -0500
Subject: [Proj] Is egm08_25.gtx misplaced half a pixel?
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD493888042B@SETHNWS023.carmenta.se>
References: <E4AB3DD44D22854B819908379DE4AD493888042B@SETHNWS023.carmenta.se>
Message-ID: <E7D0FE7244B5483EA59FB1B2A64194AB@NoelHmPC>

Mikael,

I can't address the registration issues with egm08_25.gtx that you raise, 
but egm08_25.gtx would have been derived from this file:

Und_min2.5x2.5_egm2008_isw=82_WGS84_TideFree

or its little endian equivalent.

I can confirm that the file I cite ranges from -90 to 90 in latitude (every 
2.5 minutes, for 4321 "rows") and 0 to 359+57.5/60 in longitude (every 2.5 
minutes, for 8640 "columns").

For what it's worth.

Noel

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)

-----Original Message----- 
From: Mikael Rittri
Sent: Wednesday, October 05, 2011 8:23 AM
To: proj at lists.maptools.org
Subject: [Proj] Is egm08_25.gtx misplaced half a pixel?


Hello,

I have tried to use the geoid height file

   http://download.osgeo.org/proj/vdatum/egm08_25/egm08_25.gtx,

which is discussed here:

   http://trac.osgeo.org/proj/wiki/VerticalDatums

But I am beginning to think that the file is misaligned
(well, at least if ones uses GDAL 1.8 or later to read it).

>From gdalinfo (version 1.8.1), I get

  Origin = (-180.041666666666660,90.041666666666686)
  Pixel Size = (0.041666666666667,-0.041666666666667)

But I think the correct origin of the data is really

           (-180.020833333333333,90.020833333333333)

that is, half a pixel farther east and south.

I suspect this may be caused by the nasty AREA_OR_POINT issue.
The file is dated 3 Sep 2010, so I guess it was created before
GDAL 1.8, when the semantics of AREA_OR_POINT = POINT changed.

http://trac.osgeo.org/gdal/wiki/rfc33_gtiff_pixelispoint

Or maybe the cause is something else.

Some evidence: I have used the gtx file to look up the geoid
height (using a Carmenta Engine version that uses GDAL 1.8.1),
at a position where the geoid slopes towards southeast,

    145dE 13dN

and I found the value 44.925678 m.

But according to Charles Karney's online geoid calculator
http://geographiclib.sourceforge.net/cgi-bin/GeoidEval
the value should be 45.7529 m (with a few millimeters
uncertainty, perhaps).  So the difference is 0.8272 m. On the
other hand, if I move the position half a pixel = 1.25 arc
minutes east and south, that is

    145d1.25'E 12d58.75'N

then Charles's calculator gives me 44.9287 m, so the difference
is now just 3 mm from the gtx result for the original position.

More evidence: gdalinfo on Charles's file egm2008-2_5.pgm
(from http://geographiclib.sourceforge.net/html/geoid.html) says

Origin = (-0.020833333333333,90.020833333333329)
Pixel Size = (0.041666666666667,-0.041666666666667)

so its origin is, indeed, half a pixel farther east and south
(well, there is a also 180 degree longitude difference due to
the longitude range being 0 to 360 in this file).

I guess I could file a ticket, but I am not quite convinced
that I am right.  Has anyone else noticed any problems with
the gtx file?

Another issue with the gtx file: I would have preferred if it had
one more column; that is, if the column for 180dW was repeated
for 180dE. That would make it simpler to interpolate results for
a position slightly west of 180dE.

Regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj 




From scottdehainaut at comcast.net  Fri Oct 14 19:38:04 2011
From: scottdehainaut at comcast.net (Scott DeHainaut)
Date: Fri, 14 Oct 2011 19:38:04 -0700 (PDT)
Subject: [Proj] Proj4js EPSG:4326 to EPSG:26786 (SP NAD27) 100+ feet Off
Message-ID: <1318646284126-6894605.post@n2.nabble.com>

Greetings,

I'm working on a web project and using Proj4js for the first time to project
coordinates from Google Maps lat/lon WGS84 into Massachusetts Stateplane
NAD27 feet.  To test my process I'm using a surveyed point for which I have
both lat/lon and MA SP NAD27 feet coordinates.  The surveyed coordinates in
SP are easting 866074.86 and northing 231916.59.

When I use Proj4js to go from lat/lon to MA SP NAD27, I'm 100+ feet from the
surveyed coordinates.  Here's the javascript snippet that's performing the
conversion:

var latGeo = 41.63238400230
var lonGeo = -70.52620887720
var source = new Proj4js.Proj('EPSG:4326');  /* Lat/Lon projection */
var dest = new Proj4js.Proj('EPSG:26786');  /* MA SP Mainland NAD27
projection */
var p = new Proj4js.Point(lonGeo,latGeo);
Proj4js.transform(source,dest,p);

The coordinates that it produces are easting 866209.68 and northing
232732.59 (I'm rounding to 2 decimal places).  These are quite different
from the surveyed coordinates.

I'm using the following projection files:

Proj4js.defs["EPSG:4326"]="+title=WGS +proj=longlat +ellps=WGS84
+datum=WGS84 +no_defs"
and
 which contains
Proj4js.defs["EPSG:26786"] = "+title=MA Stateplane Mainland NAD27 feet
+proj=lcc +lat_1=41.71666666666667 +lat_2=42.68333333333333 +lat_0=41
+lon_0=-71.5 +x_0=182880.3657607315 +y_0=0 +ellps=clrk66 +datum=NAD27
+to_meter=0.3048006096012192 +units=feet +no_defs";

To check my work I fired up the Corpscon (v.6.0.1) utility and performed the
same conversion using the following parameters:
Input - Geographic, 1983 NAD 83(86)
Output - State Plane, 1927 - NAD 27, 2001 - Massachusetts Mainland, US
Survey Foot

The coordinates that Corpscon produces are easting 866074.86 and northing
231916.58, which are essentially the same as the survey coordinates but
quite a bit different from what I'm getting with Proj4js.  I'm still feeling
my way around this process so I'd appreciate any thoughts on what I might be
missing.

Many thanks for any help or guidance!

-Scott DeHainaut




--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Proj4js-EPSG-4326-to-EPSG-26786-SP-NAD27-100-feet-Off-tp6894605p6894605.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From warmerdam at pobox.com  Fri Oct 14 19:57:28 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 14 Oct 2011 19:57:28 -0700
Subject: [Proj] Proj4js EPSG:4326 to EPSG:26786 (SP NAD27) 100+ feet Off
In-Reply-To: <1318646284126-6894605.post@n2.nabble.com>
References: <1318646284126-6894605.post@n2.nabble.com>
Message-ID: <CA+YzLBeqkHmAdohKLGaiJbJY5yKYgQYHThO0ceVH4G+C3rjOsA@mail.gmail.com>

On Fri, Oct 14, 2011 at 7:38 PM, Scott DeHainaut
<scottdehainaut at comcast.net> wrote:
> Greetings,
>
> I'm working on a web project and using Proj4js for the first time to project
> coordinates from Google Maps lat/lon WGS84 into Massachusetts Stateplane
> NAD27 feet.  To test my process I'm using a surveyed point for which I have
> both lat/lon and MA SP NAD27 feet coordinates.  The surveyed coordinates in
> SP are easting 866074.86 and northing 231916.59.
>
> When I use Proj4js to go from lat/lon to MA SP NAD27, I'm 100+ feet from the
> surveyed coordinates.  Here's the javascript snippet that's performing the
> conversion:
>
> var latGeo = 41.63238400230
> var lonGeo = -70.52620887720
> var source = new Proj4js.Proj('EPSG:4326');  /* Lat/Lon projection */
> var dest = new Proj4js.Proj('EPSG:26786');  /* MA SP Mainland NAD27
> projection */

Scott,

I do not think that Proj4JS does datum shifts that
involve grid shift files (like NAD27 to WGS84).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


From scottdehainaut at comcast.net  Sat Oct 15 05:26:57 2011
From: scottdehainaut at comcast.net (Scott DeHainaut)
Date: Sat, 15 Oct 2011 05:26:57 -0700 (PDT)
Subject: [Proj] Proj4js EPSG:4326 to EPSG:26786 (SP NAD27) 100+ feet Off
In-Reply-To: <CA+YzLBeqkHmAdohKLGaiJbJY5yKYgQYHThO0ceVH4G+C3rjOsA@mail.gmail.com>
References: <1318646284126-6894605.post@n2.nabble.com>
	<CA+YzLBeqkHmAdohKLGaiJbJY5yKYgQYHThO0ceVH4G+C3rjOsA@mail.gmail.com>
Message-ID: <1318681617140-6895453.post@n2.nabble.com>

Frank - Thanks for the quick reply!  I was afraid of something like that...
are there any javascript or browser-accesible solutions that I could use?

Cheers,

-Scott DeHainaut

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Proj4js-EPSG-4326-to-EPSG-26786-SP-NAD27-100-feet-Off-tp6894605p6895453.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From warmerdam at pobox.com  Sat Oct 15 10:47:28 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat, 15 Oct 2011 10:47:28 -0700
Subject: [Proj] Proj4js EPSG:4326 to EPSG:26786 (SP NAD27) 100+ feet Off
In-Reply-To: <1318681617140-6895453.post@n2.nabble.com>
References: <1318646284126-6894605.post@n2.nabble.com>
	<CA+YzLBeqkHmAdohKLGaiJbJY5yKYgQYHThO0ceVH4G+C3rjOsA@mail.gmail.com>
	<1318681617140-6895453.post@n2.nabble.com>
Message-ID: <4E99C730.3040808@pobox.com>

On 11-10-15 05:26 AM, Scott DeHainaut wrote:
> Frank - Thanks for the quick reply!  I was afraid of something like that...
> are there any javascript or browser-accesible solutions that I could use?

Scott,

Mike Adair might know of solutions, but generally speaking it is clumsy
to push the grid shift files over http for doing grid shifts.  You might
be better off with a solution using a webservice to do the transformation.

I've built a couple of these over the years, but I'm not aware of any of
them available for use now.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer



From Mikael.Rittri at carmenta.com  Sat Oct 15 10:50:36 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Sat, 15 Oct 2011 17:50:36 +0000
Subject: [Proj] Proj4js EPSG:4326 to EPSG:26786 (SP NAD27) 100+ feet Off
In-Reply-To: <1318681617140-6895453.post@n2.nabble.com>
References: <1318646284126-6894605.post@n2.nabble.com>
	<CA+YzLBeqkHmAdohKLGaiJbJY5yKYgQYHThO0ceVH4G+C3rjOsA@mail.gmail.com>
	<1318681617140-6895453.post@n2.nabble.com>
Message-ID: <39CEDBA2-5A6E-46BB-A851-8BBD8C2CC44D@carmenta.com>

I think Proj4js supports a +towgs84 argument.
If so, you can replace +datum=NAD27 by an appropiate +towgs84, the problem is just that the published 3- or 7-parameter datum shifts for NAD27 give poor accuracy. 
The best one in EPSG is +towgs84=-9,161,179 intended for CONUS east of Mississippi river,
but its accuracy is 11 m (one sigma).
On your test point, it is wrong by 38.3 ft (11.7 m). 

So, I tried to construct a better 3-parameter datum shift for Massachussets. 
Based on one point in Worcester, I got the result +towgs84=-5.16,143.64,208.44. 

When I then tried your example, I got 

866077.79    231920.98

which is just 5.3 feet wrong. 

Of course, my three parameters are not the optimal +towgs84 values for Massachussets NAD27,
and I don't know their accuracy in general, but I hope they can be of some use. 

Best regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

15 okt 2011 kl. 14:48 skrev "Scott DeHainaut" <scottdehainaut at comcast.net>:

> Frank - Thanks for the quick reply!  I was afraid of something like that...
> are there any javascript or browser-accesible solutions that I could use?
> 
> Cheers,
> 
> -Scott DeHainaut
> 
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/Proj4js-EPSG-4326-to-EPSG-26786-SP-NAD27-100-feet-Off-tp6894605p6895453.html
> Sent from the PROJ.4 mailing list archive at Nabble.com.
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


From Mikael.Rittri at carmenta.com  Sun Oct 16 05:53:47 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Sun, 16 Oct 2011 12:53:47 +0000
Subject: [Proj] Proj4js EPSG:4326 to EPSG:26786 (SP NAD27) 100+ feet Off
In-Reply-To: <39CEDBA2-5A6E-46BB-A851-8BBD8C2CC44D@carmenta.com>
References: <1318646284126-6894605.post@n2.nabble.com>
	<CA+YzLBeqkHmAdohKLGaiJbJY5yKYgQYHThO0ceVH4G+C3rjOsA@mail.gmail.com>
	<1318681617140-6895453.post@n2.nabble.com>
	<39CEDBA2-5A6E-46BB-A851-8BBD8C2CC44D@carmenta.com>
Message-ID: <10EC99F8-3F31-4406-AF1E-A2C5361DADBB@carmenta.com>

PS:
Here is another transformation from NAD27 to NAD83(86), designed for Massachusetts:

   +towgs84=-38.67,117.84,209.59,0.0091,-0.9236,2.5411,-1.75953

which I think is better, but use it at your own risk. 
It is expressed as a Position Vector Transformation, as Proj.4 wants it. 

I got it from the SEVENPAR program, by entering six sample points that I had transformed with an online NADCON calculator. 
The max horizontal error for my six sample points was 37 cm (1.21 ft).
For your test point, the horizontal error is 16 cm (0.53 ft). I don't know the maximal error in the whole state. 

Regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

15 okt 2011 kl. 20:18 skrev "Mikael Rittri" <Mikael.Rittri at carmenta.com>:

> I think Proj4js supports a +towgs84 argument.
> If so, you can replace +datum=NAD27 by an appropiate +towgs84, the problem is just that the published 3- or 7-parameter datum shifts for NAD27 give poor accuracy. 
> The best one in EPSG is +towgs84=-9,161,179 intended for CONUS east of Mississippi river,
> but its accuracy is 11 m (one sigma).
> On your test point, it is wrong by 38.3 ft (11.7 m). 
> 
> So, I tried to construct a better 3-parameter datum shift for Massachussets. 
> Based on one point in Worcester, I got the result +towgs84=-5.16,143.64,208.44. 
> 
> When I then tried your example, I got 
> 
> 866077.79    231920.98
> 
> which is just 5.3 feet wrong. 
> 
> Of course, my three parameters are not the optimal +towgs84 values for Massachussets NAD27,
> and I don't know their accuracy in general, but I hope they can be of some use. 
> 
> Best regards,
> 
> Mikael Rittri
> Carmenta
> Sweden
> http://www.carmenta.com
> 
> 15 okt 2011 kl. 14:48 skrev "Scott DeHainaut" <scottdehainaut at comcast.net>:
> 
>> Frank - Thanks for the quick reply!  I was afraid of something like that...
>> are there any javascript or browser-accesible solutions that I could use?
>> 
>> Cheers,
>> 
>> -Scott DeHainaut
>> 
>> --
>> View this message in context: http://osgeo-org.1803224.n2.nabble.com/Proj4js-EPSG-4326-to-EPSG-26786-SP-NAD27-100-feet-Off-tp6894605p6895453.html
>> Sent from the PROJ.4 mailing list archive at Nabble.com.
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


From Mikael.Rittri at carmenta.com  Sun Oct 16 09:35:27 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Sun, 16 Oct 2011 16:35:27 +0000
Subject: [Proj] Is egm08_25.gtx misplaced half a pixel?
In-Reply-To: <E7D0FE7244B5483EA59FB1B2A64194AB@NoelHmPC>
References: <E4AB3DD44D22854B819908379DE4AD493888042B@SETHNWS023.carmenta.se>
	<E7D0FE7244B5483EA59FB1B2A64194AB@NoelHmPC>
Message-ID: <739BAF3C-FA4D-4D14-96E3-A90B34D0AC4D@carmenta.com>

Thanks, Noel. That's what I thought. 

I am still not sure what's going on, but I have opened a ticket:

http://trac.osgeo.org/proj/ticket/126

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

14 okt 2011 kl. 21:28 skrev "Noel Zinn (cc)" <ndzinn at comcast.net>:

> Mikael,
> 
> I can't address the registration issues with egm08_25.gtx that you raise, 
> but egm08_25.gtx would have been derived from this file:
> 
> Und_min2.5x2.5_egm2008_isw=82_WGS84_TideFree
> 
> or its little endian equivalent.
> 
> I can confirm that the file I cite ranges from -90 to 90 in latitude (every 
> 2.5 minutes, for 4321 "rows") and 0 to 359+57.5/60 in longitude (every 2.5 
> minutes, for 8640 "columns").
> 
> For what it's worth.
> 
> Noel
> 
> Noel Zinn, Principal, Hydrometronics LLC
> +1-832-539-1472 (office), +1-281-221-0051 (cell)
> noel.zinn at hydrometronics.com (email)
> http://www.hydrometronics.com (website)
> 
> -----Original Message----- 
> From: Mikael Rittri
> Sent: Wednesday, October 05, 2011 8:23 AM
> To: proj at lists.maptools.org
> Subject: [Proj] Is egm08_25.gtx misplaced half a pixel?
> 
> 
> Hello,
> 
> I have tried to use the geoid height file
> 
>   http://download.osgeo.org/proj/vdatum/egm08_25/egm08_25.gtx,
> 
> which is discussed here:
> 
>   http://trac.osgeo.org/proj/wiki/VerticalDatums
> 
> But I am beginning to think that the file is misaligned
> (well, at least if ones uses GDAL 1.8 or later to read it).
> 
> From gdalinfo (version 1.8.1), I get
> 
>  Origin = (-180.041666666666660,90.041666666666686)
>  Pixel Size = (0.041666666666667,-0.041666666666667)
> 
> But I think the correct origin of the data is really
> 
>           (-180.020833333333333,90.020833333333333)
> 
> that is, half a pixel farther east and south.
> 
> I suspect this may be caused by the nasty AREA_OR_POINT issue.
> The file is dated 3 Sep 2010, so I guess it was created before
> GDAL 1.8, when the semantics of AREA_OR_POINT = POINT changed.
> 
> http://trac.osgeo.org/gdal/wiki/rfc33_gtiff_pixelispoint
> 
> Or maybe the cause is something else.
> 
> Some evidence: I have used the gtx file to look up the geoid
> height (using a Carmenta Engine version that uses GDAL 1.8.1),
> at a position where the geoid slopes towards southeast,
> 
>    145dE 13dN
> 
> and I found the value 44.925678 m.
> 
> But according to Charles Karney's online geoid calculator
> http://geographiclib.sourceforge.net/cgi-bin/GeoidEval
> the value should be 45.7529 m (with a few millimeters
> uncertainty, perhaps).  So the difference is 0.8272 m. On the
> other hand, if I move the position half a pixel = 1.25 arc
> minutes east and south, that is
> 
>    145d1.25'E 12d58.75'N
> 
> then Charles's calculator gives me 44.9287 m, so the difference
> is now just 3 mm from the gtx result for the original position.
> 
> More evidence: gdalinfo on Charles's file egm2008-2_5.pgm
> (from http://geographiclib.sourceforge.net/html/geoid.html) says
> 
> Origin = (-0.020833333333333,90.020833333333329)
> Pixel Size = (0.041666666666667,-0.041666666666667)
> 
> so its origin is, indeed, half a pixel farther east and south
> (well, there is a also 180 degree longitude difference due to
> the longitude range being 0 to 360 in this file).
> 
> I guess I could file a ticket, but I am not quite convinced
> that I am right.  Has anyone else noticed any problems with
> the gtx file?
> 
> Another issue with the gtx file: I would have preferred if it had
> one more column; that is, if the column for 180dW was repeated
> for 180dE. That would make it simpler to interpolate results for
> a position slightly west of 180dE.
> 
> Regards,
> 
> Mikael Rittri
> Carmenta
> Sweden
> http://www.carmenta.com
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj 
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


From scottdehainaut at comcast.net  Sun Oct 16 11:37:17 2011
From: scottdehainaut at comcast.net (Scott DeHainaut)
Date: Sun, 16 Oct 2011 11:37:17 -0700 (PDT)
Subject: [Proj] Proj4js EPSG:4326 to EPSG:26786 (SP NAD27) 100+ feet Off
In-Reply-To: <10EC99F8-3F31-4406-AF1E-A2C5361DADBB@carmenta.com>
References: <1318646284126-6894605.post@n2.nabble.com>
	<CA+YzLBeqkHmAdohKLGaiJbJY5yKYgQYHThO0ceVH4G+C3rjOsA@mail.gmail.com>
	<1318681617140-6895453.post@n2.nabble.com>
	<39CEDBA2-5A6E-46BB-A851-8BBD8C2CC44D@carmenta.com>
	<10EC99F8-3F31-4406-AF1E-A2C5361DADBB@carmenta.com>
Message-ID: <1318790237642-6898300.post@n2.nabble.com>

Mikael,

The Proj4js definition files are a bit of a black box for me but I used your
latest transformation and was able to reproduce your 0.53 error which tells
me I'm on the same page.  The area for which this application is focused is
fairly specific within the State of Massachusetts, about 144 square miles
(approx 12x12 miles).  Another (admittedly low-tech) approach I was
considering was 1) round the coordinate readout for the user to the nearest
foot and 2) simply introduce an appropriate X and Y offset to the original
transformed coordinates.  I've used several other known survey points and
determined an average horizontal offset of -134.98 and vertical offset of
-815.74.  When I add these offset values to three different sets of
transformed coordinates my average distance error is 0.32 from their
surveyed locations.  As I sample additional known points across the
application's region I'll be curious to see if this error remains
consistent.  Both this method and your "+towgs84" method are producing
distance errors under 1 foot which, for this application, are acceptable
given the final component of my approach is to 3) include a standard
disclaimer that the results are not intended to replace engineering-class
field survey methods.

Many thanks for your help with this!

-Scott DeHainaut


Mikael Rittri wrote:
> 
> PS:
> Here is another transformation from NAD27 to NAD83(86), designed for
> Massachusetts:
> 
>    +towgs84=-38.67,117.84,209.59,0.0091,-0.9236,2.5411,-1.75953
> 
> which I think is better, but use it at your own risk. 
> It is expressed as a Position Vector Transformation, as Proj.4 wants it. 
> 
> I got it from the SEVENPAR program, by entering six sample points that I
> had transformed with an online NADCON calculator. 
> The max horizontal error for my six sample points was 37 cm (1.21 ft).
> For your test point, the horizontal error is 16 cm (0.53 ft). I don't know
> the maximal error in the whole state. 
> 


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Proj4js-EPSG-4326-to-EPSG-26786-SP-NAD27-100-feet-Off-tp6894605p6898300.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From spethm at landcareresearch.co.nz  Sun Oct 16 15:27:25 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Mon, 17 Oct 2011 11:27:25 +1300
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <4E97BE0E.8070601@pobox.com>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>
Message-ID: <4E9B5A4D.5010501@landcareresearch.co.nz>

Thanks Frank!
* New Parameters *
For adding new parameters, what is the command line syntax?

Example: proj -v +proj=rhealpix +lon_0=0 +a=1 +R_A +ellps=WGS84 npole=0 
spole=0 -E <<EOF 0 0 EOF

This doesn't seem to work.  I've also tried using +npole=0 and +spole=0 
and also doesn't work.  How do I fix this?

* On Combining 2 Projections into 1 File
Typically, there are 2 to 4 Functions FORWARD(s_forward), 
INVERSE(s_forward), and etc.  Would I need to create 8 of these 
functions (4 for each projection)?

For instance, can I do the following:
ENTRY0(healpix)
if(P->es){
         P->inv = e_inverse; P->fwd = e_h_forward;
     }else{
         P->inv = s_inverse; P->fwd = s_h_forward;
     }
ENDENTRY(P)
ENTRY0(rhealpix)
if(P->es){
         P->inv = e_inverse; P->fwd = e_rh_forward;
     }else{
         P->inv = s_inverse; P->fwd = s_rh_forward;
     }
ENDENTRY(P)
Note, e_h_forward would correspond to the function FOWARD(e_h_forward) 
and etc.

Thank you for your help.



On 14/10/11 17:43, Frank Warmerdam wrote:
> On 11-10-13 06:22 PM, Michael Speth wrote:
>> Greetings,
>>      I've implemented the HEALPix projection and have now moved on to
>> implementing a new projection called rHEALPix.  I have two questions
>> regarding this implementation.
>>
>> * rHEALPix requires 2 new parameters (spole and npole).  How do I
>> specify those parameters on the command line?  (In the code I am using
>> the pr_param function.
> Michael,
>
> To the best of my knowledge you just grab them with pj_param().  You
> don't need to do anything special to declare them.
>
>> * The rHEALPix projection uses the HEALPix projection.  So is it
>> possible to create a header with corresponding c file that shares common
>> functions between the HEALPix and rHEALPix projections?  If so, how
>> should I name the files?
> I would suggest just putting both projections in one source file to avoid
> needing the external header file.  It is not uncommon to have more than one
> related projection in a single file (eg. tmerc and utm in PJ_tmerc).
>
> Best regards,


-- 
Michael Speth
Scientific Programmer
Landcare Research

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111017/bdc80ddd/attachment.html>

From warmerdam at pobox.com  Sun Oct 16 15:55:06 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 16 Oct 2011 15:55:06 -0700
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <4E9B5A4D.5010501@landcareresearch.co.nz>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>
	<4E9B5A4D.5010501@landcareresearch.co.nz>
Message-ID: <CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>

On Sun, Oct 16, 2011 at 3:27 PM, Michael Speth
<spethm at landcareresearch.co.nz> wrote:
> Thanks Frank!
> * New Parameters *
> For adding new parameters, what is the command line syntax?
>
> Example: proj -v +proj=rhealpix +lon_0=0 +a=1 +R_A +ellps=WGS84 npole=0
> spole=0 -E <<EOF 0 0 EOF
>
> This doesn't seem to work.  I've also tried using +npole=0 and +spole=0 and
> also doesn't work.  How do I fix this?


Michael,

I'm not sure.  With the "+" prefix, they should be available for pj_params
calls.  If you provide your code I could investigate.

> * On Combining 2 Projections into 1 File
> Typically, there are 2 to 4 Functions FORWARD(s_forward),
> INVERSE(s_forward), and etc.  Would I need to create 8 of these functions (4
> for each projection)?


Yes, I imagine so.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


From spethm at landcareresearch.co.nz  Sun Oct 16 17:38:08 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Mon, 17 Oct 2011 13:38:08 +1300
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>	<4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
Message-ID: <4E9B78F0.8010708@landcareresearch.co.nz>

Thanks for looking into this.  Here is a link to the source.  Note, I 
have combined the healpix and rhealpix (still have more to implement on 
rhealpix).  The spole and npole parameters used can be found on lines 
471, 472, 493, and 494.

http://code.scenzgrid.org/index.php/p/scenzgrid-proj4/source/tree/master/src/PJ_healpix.c

Thanks

On 17/10/11 11:55, Frank Warmerdam wrote:
> On Sun, Oct 16, 2011 at 3:27 PM, Michael Speth
> <spethm at landcareresearch.co.nz>  wrote:
>> Thanks Frank!
>> * New Parameters *
>> For adding new parameters, what is the command line syntax?
>>
>> Example: proj -v +proj=rhealpix +lon_0=0 +a=1 +R_A +ellps=WGS84 npole=0
>> spole=0 -E<<EOF 0 0 EOF
>>
>> This doesn't seem to work.  I've also tried using +npole=0 and +spole=0 and
>> also doesn't work.  How do I fix this?
>
> Michael,
>
> I'm not sure.  With the "+" prefix, they should be available for pj_params
> calls.  If you provide your code I could investigate.
>
>> * On Combining 2 Projections into 1 File
>> Typically, there are 2 to 4 Functions FORWARD(s_forward),
>> INVERSE(s_forward), and etc.  Would I need to create 8 of these functions (4
>> for each projection)?
>
> Yes, I imagine so.
>
> Best regards,


-- 
Michael Speth
Scientific Programmer
Landcare Research

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111017/0a8d8372/attachment.html>

From warmerdam at pobox.com  Sun Oct 16 18:14:16 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 16 Oct 2011 18:14:16 -0700
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <4E9B78F0.8010708@landcareresearch.co.nz>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>
	<4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
	<4E9B78F0.8010708@landcareresearch.co.nz>
Message-ID: <CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>

Michael,

I see you have not been working against PROJ trunk.  PROJ trunk
has moved to using a "context" structure for thread safety reasons in
many calls and you are clearly not yet caught up to that.  I'm not really
inclined to make a lot of changes to just get things working against
trunk.  If you can update to trunk I'll take another look.

Best regards,


On Sun, Oct 16, 2011 at 5:38 PM, Michael Speth
<spethm at landcareresearch.co.nz> wrote:
> Thanks for looking into this.  Here is a link to the source.  Note, I have
> combined the healpix and rhealpix (still have more to implement on
> rhealpix).  The spole and npole parameters used can be found on lines 471,
> 472, 493, and 494.
>
> http://code.scenzgrid.org/index.php/p/scenzgrid-proj4/source/tree/master/src/PJ_healpix.c
>
> Thanks
>
> On 17/10/11 11:55, Frank Warmerdam wrote:
>
> On Sun, Oct 16, 2011 at 3:27 PM, Michael Speth
> <spethm at landcareresearch.co.nz> wrote:
>
> Thanks Frank!
> * New Parameters *
> For adding new parameters, what is the command line syntax?
>
> Example: proj -v +proj=rhealpix +lon_0=0 +a=1 +R_A +ellps=WGS84 npole=0
> spole=0 -E <<EOF 0 0 EOF
>
> This doesn't seem to work.  I've also tried using +npole=0 and +spole=0 and
> also doesn't work.  How do I fix this?
>
> Michael,
>
> I'm not sure.  With the "+" prefix, they should be available for pj_params
> calls.  If you provide your code I could investigate.
>
> * On Combining 2 Projections into 1 File
> Typically, there are 2 to 4 Functions FORWARD(s_forward),
> INVERSE(s_forward), and etc.  Would I need to create 8 of these functions (4
> for each projection)?
>
> Yes, I imagine so.
>
> Best regards,
>
>
> --
> Michael Speth
> Scientific Programmer
> Landcare Research
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


From spethm at landcareresearch.co.nz  Sun Oct 16 19:18:01 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Mon, 17 Oct 2011 15:18:01 +1300
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>	<4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
	<4E9B78F0.8010708@landcareresearch.co.nz>
	<CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
Message-ID: <4E9B9059.8010609@landcareresearch.co.nz>

Hello.  I updated the source to use the trunk.  Here are the updated 
changes.

http://code.scenzgrid.org/index.php/p/scenzgrid-proj4/source/tree/master/src/PJ_healpix.c

Thank you for looking over the source!

On 17/10/11 14:14, Frank Warmerdam wrote:
> Michael,
>
> I see you have not been working against PROJ trunk.  PROJ trunk
> has moved to using a "context" structure for thread safety reasons in
> many calls and you are clearly not yet caught up to that.  I'm not really
> inclined to make a lot of changes to just get things working against
> trunk.  If you can update to trunk I'll take another look.
>
> Best regards,
>
>
> On Sun, Oct 16, 2011 at 5:38 PM, Michael Speth
> <spethm at landcareresearch.co.nz>  wrote:
>> Thanks for looking into this.  Here is a link to the source.  Note, I have
>> combined the healpix and rhealpix (still have more to implement on
>> rhealpix).  The spole and npole parameters used can be found on lines 471,
>> 472, 493, and 494.
>>
>> http://code.scenzgrid.org/index.php/p/scenzgrid-proj4/source/tree/master/src/PJ_healpix.c
>>
>> Thanks
>>
>> On 17/10/11 11:55, Frank Warmerdam wrote:
>>
>> On Sun, Oct 16, 2011 at 3:27 PM, Michael Speth
>> <spethm at landcareresearch.co.nz>  wrote:
>>
>> Thanks Frank!
>> * New Parameters *
>> For adding new parameters, what is the command line syntax?
>>
>> Example: proj -v +proj=rhealpix +lon_0=0 +a=1 +R_A +ellps=WGS84 npole=0
>> spole=0 -E<<EOF 0 0 EOF
>>
>> This doesn't seem to work.  I've also tried using +npole=0 and +spole=0 and
>> also doesn't work.  How do I fix this?
>>
>> Michael,
>>
>> I'm not sure.  With the "+" prefix, they should be available for pj_params
>> calls.  If you provide your code I could investigate.
>>
>> * On Combining 2 Projections into 1 File
>> Typically, there are 2 to 4 Functions FORWARD(s_forward),
>> INVERSE(s_forward), and etc.  Would I need to create 8 of these functions (4
>> for each projection)?
>>
>> Yes, I imagine so.
>>
>> Best regards,
>>
>>
>> --
>> Michael Speth
>> Scientific Programmer
>> Landcare Research
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>>
>
>


-- 
Michael Speth
Scientific Programmer
Landcare Research

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111017/90530ee7/attachment.html>

From warmerdam at pobox.com  Sun Oct 16 20:19:23 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 16 Oct 2011 20:19:23 -0700
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <4E9B9059.8010609@landcareresearch.co.nz>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>
	<4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
	<4E9B78F0.8010708@landcareresearch.co.nz>
	<CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
	<4E9B9059.8010609@landcareresearch.co.nz>
Message-ID: <CA+YzLBejdyiYNDSoseBiuU8BqHXB1m_z8n5gPzT=H+p9RagoFw@mail.gmail.com>

On Sun, Oct 16, 2011 at 7:18 PM, Michael Speth
<spethm at landcareresearch.co.nz> wrote:
> Hello.  I updated the source to use the trunk.  Here are the updated
> changes.
>
> http://code.scenzgrid.org/index.php/p/scenzgrid-proj4/source/tree/master/src/PJ_healpix.c
>
> Thank you for looking over the source!

Michael,

Ah, you called my bluff!  Debugging through the code
I see the problem is (at least) that you did not specify a
type code in the pj_param code.  You need to prefix the
parameter name with a type code character - 'i' for an
integer parameter.

eg.
    int npole = pj_param(P->ctx, P->params,"inpole").i;
    int spole = pj_param(P->ctx,P->params,"ispole").i;

By the way, it is more conventional to collect such parameters
in your initialization functions and to declare them as part of
your projection details via the PROJ_PARMS__ macro.  You can
see an example of this early in PJ_gstmerc.c for instance.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


From spethm at landcareresearch.co.nz  Mon Oct 17 19:00:02 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Tue, 18 Oct 2011 15:00:02 +1300
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <CA+YzLBejdyiYNDSoseBiuU8BqHXB1m_z8n5gPzT=H+p9RagoFw@mail.gmail.com>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>	<4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
	<4E9B78F0.8010708@landcareresearch.co.nz>
	<CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
	<4E9B9059.8010609@landcareresearch.co.nz>
	<CA+YzLBejdyiYNDSoseBiuU8BqHXB1m_z8n5gPzT=H+p9RagoFw@mail.gmail.com>
Message-ID: <4E9CDDA2.10802@landcareresearch.co.nz>

Thank you Frank!
   I've added your recommended fixes and it works!  We will now start 
thoroughly testing.  Do you have any suggestions for testing?

Thanks

On 17/10/11 16:19, Frank Warmerdam wrote:
> On Sun, Oct 16, 2011 at 7:18 PM, Michael Speth
> <spethm at landcareresearch.co.nz>  wrote:
>> Hello.  I updated the source to use the trunk.  Here are the updated
>> changes.
>>
>> http://code.scenzgrid.org/index.php/p/scenzgrid-proj4/source/tree/master/src/PJ_healpix.c
>>
>> Thank you for looking over the source!
> Michael,
>
> Ah, you called my bluff!  Debugging through the code
> I see the problem is (at least) that you did not specify a
> type code in the pj_param code.  You need to prefix the
> parameter name with a type code character - 'i' for an
> integer parameter.
>
> eg.
>      int npole = pj_param(P->ctx, P->params,"inpole").i;
>      int spole = pj_param(P->ctx,P->params,"ispole").i;
>
> By the way, it is more conventional to collect such parameters
> in your initialization functions and to declare them as part of
> your projection details via the PROJ_PARMS__ macro.  You can
> see an example of this early in PJ_gstmerc.c for instance.
>
> Best regards,


-- 
Michael Speth
Scientific Programmer
Landcare Research



From warmerdam at pobox.com  Mon Oct 17 19:41:19 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 17 Oct 2011 19:41:19 -0700
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <4E9CDDA2.10802@landcareresearch.co.nz>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>
	<4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
	<4E9B78F0.8010708@landcareresearch.co.nz>
	<CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
	<4E9B9059.8010609@landcareresearch.co.nz>
	<CA+YzLBejdyiYNDSoseBiuU8BqHXB1m_z8n5gPzT=H+p9RagoFw@mail.gmail.com>
	<4E9CDDA2.10802@landcareresearch.co.nz>
Message-ID: <CA+YzLBcb0wEP1azwNWt-8AWzj0cBb35cvumu9yLK57HynVGhZA@mail.gmail.com>

On Mon, Oct 17, 2011 at 7:00 PM, Michael Speth
<spethm at landcareresearch.co.nz> wrote:
> Thank you Frank!
>   I've added your recommended fixes and it works!  We will now start
> thoroughly testing.  Do you have any suggestions for testing?

Michael,

Nothing deep, no.  But I would like to have a few representative
test points to incorporate into proj/nad/testvarious so you might
want to consider including that in the submission patch.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


From hanlie.pretorius at gmail.com  Wed Oct 19 00:03:45 2011
From: hanlie.pretorius at gmail.com (Hanlie Pretorius)
Date: Wed, 19 Oct 2011 09:03:45 +0200
Subject: [Proj] Setting up a proj4 specification
Message-ID: <CAFpCUPqvKrcnoShBf2woXRHohnZ1uhahE8Ok4AgskTb1h0r1pQ@mail.gmail.com>

Hi,

Can someone please tell me or point me to documentation that explains
how to put the following information into a proj4 string for use in
QGIS?

Datum:
D_Arc_1960
Spheroid:
Clarke_1880_RGS
Semimajor Axis:
6378249.144999999600000000
Semiminor Axis:
6356514.869549775500000000
Inverse Flattening:
293.46630000
False_Easting
500000.000000000000000000
False_Northing
0.000000000000000000
Central_Meridian
33.000000000000000000
Scale_Factor
0.999600000000000040
Latitude_Of_Origin
0.000000000000000000

Thanks
Hanlie


From jrepetto at free.fr  Wed Oct 19 00:43:27 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed, 19 Oct 2011 09:43:27 +0200
Subject: [Proj] Setting up a proj4 specification
In-Reply-To: <CAFpCUPqvKrcnoShBf2woXRHohnZ1uhahE8Ok4AgskTb1h0r1pQ@mail.gmail.com>
References: <CAFpCUPqvKrcnoShBf2woXRHohnZ1uhahE8Ok4AgskTb1h0r1pQ@mail.gmail.com>
Message-ID: <4E9E7F9F.1020503@free.fr>

Le 19/10/2011 09:03, Hanlie Pretorius a écrit :
> Hi,
>
> Can someone please tell me or point me to documentation that explains
> how to put the following information into a proj4 string for use in
> QGIS?
>
> Datum:
> D_Arc_1960
> Spheroid:
> Clarke_1880_RGS
> Semimajor Axis:
> 6378249.144999999600000000
> Semiminor Axis:
> 6356514.869549775500000000
> Inverse Flattening:
> 293.46630000
> False_Easting
> 500000.000000000000000000
> False_Northing
> 0.000000000000000000
> Central_Meridian
> 33.000000000000000000
> Scale_Factor
> 0.999600000000000040
> Latitude_Of_Origin
> 0.000000000000000000
>
> Thanks
> Hanlie

Hi,

This information is not sufficient. It does not specify the projection. 
It may be UTM, or Lambert Conformal Conic, or other ones.
The parameters of the datum transformation to WGS84 are also missing.

The documentation on the proj4 parameters can be found at 
http://trac.osgeo.org/proj/wiki/GenParms .

Jean-Claude


From jrepetto at free.fr  Wed Oct 19 01:02:19 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed, 19 Oct 2011 10:02:19 +0200
Subject: [Proj] Setting up a proj4 specification
In-Reply-To: <4E9E7F9F.1020503@free.fr>
References: <CAFpCUPqvKrcnoShBf2woXRHohnZ1uhahE8Ok4AgskTb1h0r1pQ@mail.gmail.com>
	<4E9E7F9F.1020503@free.fr>
Message-ID: <4E9E840B.4010705@free.fr>

And you may find useful informations in the archives of this mailing list :
<http://osgeo-org.1803224.n2.nabble.com/Datum-Shift-WGS84-to-Arc1960-not-working-propberly-td3410479.html>


From Mikael.Rittri at carmenta.com  Wed Oct 19 02:10:13 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Wed, 19 Oct 2011 09:10:13 +0000
Subject: [Proj] Setting up a proj4 specification
In-Reply-To: <4E9E7F9F.1020503@free.fr>
References: <CAFpCUPqvKrcnoShBf2woXRHohnZ1uhahE8Ok4AgskTb1h0r1pQ@mail.gmail.com>
	<4E9E7F9F.1020503@free.fr>
Message-ID: <E4AB3DD44D22854B819908379DE4AD49388847F2@SETHNWS023.carmenta.se>

Hello, Hanlie.

Jean-Claude is right that one needs to know the kind of projection, 
but if we assume it is a Transverse Mercator projection, the projection
would be UTM zone 36N, so it is very likely that it is 

   "Arc 1960 / UTM zone 36N", EPSG:21096,

with area of use "Kenya and Uganda - north of equator and 30°E to 36°E".

As for the datum shift from Arc 1960 to WGS84, the EPSG gives four 
possibilities, valid in Kenya and Tanzania, just Kenya, just Tanzania, 
and Burundi, respectively. (Just go to http://www.epsg-registry.org/ ,
and query by filter with Name: "Arc 1960" and Type: Coordinate Transformation.)

Since Tanzania and Burundi is south of the equator, and since the 
datum shift for Kenya and Tanzania is less accurate than the one 
just for Kenya, you can probably use

   +towgs84=-157,-2,-299

which is the datum shift "Arc 1960 to WGS 84 (2)", EPSG:1284,
Area of use: Kenya - onshore and offshore, accuracy 6 meters (one sigma).
This can probably be used in Uganda, too, but with worse accuracy. 

I am not sure about the ellipsoid. EPSG gives seven(!) variants of
the Clarke 1880 ellipsoid, while the only predefined Clarke 1880 
ellipsoid in Proj.4 is 

   clrk80 a=6378249.145    rf=293.4663      Clarke 1880 mod.

which agrees with your specification. 

(According to EPSG, the ellipsoid for the Arc 1960 datum 
 is "Clarke 1880 (RGS)" with
   
   semi-major axis = 6378249.145 m
   inverse flattening = 293.465 

 The name agrees with your specification, but the inverse flattening
 differs slightly. This might be an error in EPSG, and the difference
 could be insignificant in practice.)

So, let's assume that clrk80 is correct. Then, you can try with 

    +proj=utm +zone=36 +ellps=clrk80 +units=m +towgs84=-157,-2,-299 +no_defs

Better datum shifts may be available from national authorities. 

Best regards,

Mikael Rittri
Carmenta
Sweden 
http://www.carmenta.com
 
-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Jean-Claude Repetto
Sent: Wednesday, October 19, 2011 9:43 AM
To: PROJ.4 and general Projections Discussions
Cc: Hanlie Pretorius
Subject: Re: [Proj] Setting up a proj4 specification

Le 19/10/2011 09:03, Hanlie Pretorius a écrit :
> Hi,
>
> Can someone please tell me or point me to documentation that explains 
> how to put the following information into a proj4 string for use in 
> QGIS?
>
> Datum:
> D_Arc_1960
> Spheroid:
> Clarke_1880_RGS
> Semimajor Axis:
> 6378249.144999999600000000
> Semiminor Axis:
> 6356514.869549775500000000
> Inverse Flattening:
> 293.46630000
> False_Easting
> 500000.000000000000000000
> False_Northing
> 0.000000000000000000
> Central_Meridian
> 33.000000000000000000
> Scale_Factor
> 0.999600000000000040
> Latitude_Of_Origin
> 0.000000000000000000
>
> Thanks
> Hanlie

Hi,

This information is not sufficient. It does not specify the projection. 
It may be UTM, or Lambert Conformal Conic, or other ones.
The parameters of the datum transformation to WGS84 are also missing.

The documentation on the proj4 parameters can be found at http://trac.osgeo.org/proj/wiki/GenParms .

Jean-Claude
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From Mikael.Rittri at carmenta.com  Wed Oct 19 03:55:14 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Wed, 19 Oct 2011 10:55:14 +0000
Subject: [Proj] Setting up a proj4 specification
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD49388847F2@SETHNWS023.carmenta.se>
References: <CAFpCUPqvKrcnoShBf2woXRHohnZ1uhahE8Ok4AgskTb1h0r1pQ@mail.gmail.com>
	<4E9E7F9F.1020503@free.fr>
	<E4AB3DD44D22854B819908379DE4AD49388847F2@SETHNWS023.carmenta.se>
Message-ID: <E4AB3DD44D22854B819908379DE4AD493888487B@SETHNWS023.carmenta.se>

PS:

Another datum shift for Arc 1960 to WGS 84 in Kenya is 

   +towgs84=-179.1,-44.7,-302.6

which is probably more accurate. See Clifford Mugnier's column on Kenya, 

http://www.asprs.org/a/resources/grids/06-2003-kenya.pdf

regards,

Mikael Rittri
Carmenta

I wrote:

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Mikael Rittri
Sent: Wednesday, October 19, 2011 11:10 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Setting up a proj4 specification

Hello, Hanlie.

Jean-Claude is right that one needs to know the kind of projection, but if we assume it is a Transverse Mercator projection, the projection would be UTM zone 36N, so it is very likely that it is 

   "Arc 1960 / UTM zone 36N", EPSG:21096,

with area of use "Kenya and Uganda - north of equator and 30°E to 36°E".

As for the datum shift from Arc 1960 to WGS84, the EPSG gives four possibilities, valid in Kenya and Tanzania, just Kenya, just Tanzania, and Burundi, respectively. (Just go to http://www.epsg-registry.org/ , and query by filter with Name: "Arc 1960" and Type: Coordinate Transformation.)

Since Tanzania and Burundi is south of the equator, and since the datum shift for Kenya and Tanzania is less accurate than the one just for Kenya, you can probably use

   +towgs84=-157,-2,-299

which is the datum shift "Arc 1960 to WGS 84 (2)", EPSG:1284, Area of use: Kenya - onshore and offshore, accuracy 6 meters (one sigma).
This can probably be used in Uganda, too, but with worse accuracy. 

I am not sure about the ellipsoid. EPSG gives seven(!) variants of the Clarke 1880 ellipsoid, while the only predefined Clarke 1880 ellipsoid in Proj.4 is 

   clrk80 a=6378249.145    rf=293.4663      Clarke 1880 mod.

which agrees with your specification. 

(According to EPSG, the ellipsoid for the Arc 1960 datum  is "Clarke 1880 (RGS)" with
   
   semi-major axis = 6378249.145 m
   inverse flattening = 293.465 

 The name agrees with your specification, but the inverse flattening  differs slightly. This might be an error in EPSG, and the difference  could be insignificant in practice.)

So, let's assume that clrk80 is correct. Then, you can try with 

    +proj=utm +zone=36 +ellps=clrk80 +units=m +towgs84=-157,-2,-299 +no_defs

Better datum shifts may be available from national authorities. 

Best regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com
 
-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Jean-Claude Repetto
Sent: Wednesday, October 19, 2011 9:43 AM
To: PROJ.4 and general Projections Discussions
Cc: Hanlie Pretorius
Subject: Re: [Proj] Setting up a proj4 specification

Le 19/10/2011 09:03, Hanlie Pretorius a écrit :
> Hi,
>
> Can someone please tell me or point me to documentation that explains 
> how to put the following information into a proj4 string for use in 
> QGIS?
>
> Datum:
> D_Arc_1960
> Spheroid:
> Clarke_1880_RGS
> Semimajor Axis:
> 6378249.144999999600000000
> Semiminor Axis:
> 6356514.869549775500000000
> Inverse Flattening:
> 293.46630000
> False_Easting
> 500000.000000000000000000
> False_Northing
> 0.000000000000000000
> Central_Meridian
> 33.000000000000000000
> Scale_Factor
> 0.999600000000000040
> Latitude_Of_Origin
> 0.000000000000000000
>
> Thanks
> Hanlie

Hi,

This information is not sufficient. It does not specify the projection. 
It may be UTM, or Lambert Conformal Conic, or other ones.
The parameters of the datum transformation to WGS84 are also missing.

The documentation on the proj4 parameters can be found at http://trac.osgeo.org/proj/wiki/GenParms .

Jean-Claude
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From Mikael.Rittri at carmenta.com  Wed Oct 19 06:58:21 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Wed, 19 Oct 2011 13:58:21 +0000
Subject: [Proj] Setting up a proj4 specification
References: <CAFpCUPqvKrcnoShBf2woXRHohnZ1uhahE8Ok4AgskTb1h0r1pQ@mail.gmail.com>
	<4E9E7F9F.1020503@free.fr>
	<E4AB3DD44D22854B819908379DE4AD49388847F2@SETHNWS023.carmenta.se> 
Message-ID: <E4AB3DD44D22854B819908379DE4AD4938884916@SETHNWS023.carmenta.se>

PS again:

The AFREF newsletter No.5, January 2008,

http://facility.unavco.org/kb/getattachment.php?data=ODR8SkFOIDIwMDggQUZSRUYgbmV3c2xldHRlci5wZGY%3D

publishes what they call a "Molodensky-Badekas 7-Parameters transformation" 
that is "between WGS 84 and Arc 1960 datum for Kenya". I think that means that
the published transformation goes in the direction from WGS 84 to Arc 1960. 
So one would need to reverse the signs of all parameters for use in Proj.4.

Also, I think "Molodensky-Badekas" usually means that the rotation sign
convention is Coordinate Frame Rotation, while Proj.4 uses the opposite 
Position Vector Transformation.  If I am right, the signs of the rotation 
parameters must be reversed once more!  

If I am not mistaken, the Proj.4 syntax for the transformation should be 

   +towgs84=-148.5133,3.4865,-298.0307,-5.9464,7.1414,2.8544,4.3955

Regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com 


-----Original Message-----
From: Mikael Rittri 
Sent: Wednesday, October 19, 2011 12:55 PM
To: 'PROJ.4 and general Projections Discussions'
Subject: RE: [Proj] Setting up a proj4 specification

PS:

Another datum shift for Arc 1960 to WGS 84 in Kenya is 

   +towgs84=-179.1,-44.7,-302.6

which is probably more accurate. See Clifford Mugnier's column on Kenya, 

http://www.asprs.org/a/resources/grids/06-2003-kenya.pdf

regards,

Mikael Rittri
Carmenta

-----Original Message-----
From: proj-bounces at lists.maptools.org [mailto:proj-bounces at lists.maptools.org] On Behalf Of Mikael Rittri
Sent: Wednesday, October 19, 2011 11:10 AM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Setting up a proj4 specification

Hello, Hanlie.

[-- see  http://lists.maptools.org/pipermail/proj/2011-October/005962.html  --]

From spethm at landcareresearch.co.nz  Wed Oct 19 13:35:35 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Thu, 20 Oct 2011 09:35:35 +1300
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <CA+YzLBcb0wEP1azwNWt-8AWzj0cBb35cvumu9yLK57HynVGhZA@mail.gmail.com>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>	<4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
	<4E9B78F0.8010708@landcareresearch.co.nz>
	<CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
	<4E9B9059.8010609@landcareresearch.co.nz>
	<CA+YzLBejdyiYNDSoseBiuU8BqHXB1m_z8n5gPzT=H+p9RagoFw@mail.gmail.com>
	<4E9CDDA2.10802@landcareresearch.co.nz>
	<CA+YzLBcb0wEP1azwNWt-8AWzj0cBb35cvumu9yLK57HynVGhZA@mail.gmail.com>
Message-ID: <4E9F3497.6000604@landcareresearch.co.nz>

Greetings,
   How is the tv_out.dist file generated?
   Also, does Proj.4 have any conventions for indicating that a given 
set of parameters for a projection are invalid?

Thanks for your help!

On 18/10/11 15:41, Frank Warmerdam wrote:
> On Mon, Oct 17, 2011 at 7:00 PM, Michael Speth
> <spethm at landcareresearch.co.nz>  wrote:
>> Thank you Frank!
>>    I've added your recommended fixes and it works!  We will now start
>> thoroughly testing.  Do you have any suggestions for testing?
> Michael,
>
> Nothing deep, no.  But I would like to have a few representative
> test points to incorporate into proj/nad/testvarious so you might
> want to consider including that in the submission patch.
>
> Best regards,


-- 
Michael Speth
Scientific Programmer
Landcare Research



From warmerdam at pobox.com  Wed Oct 19 13:54:08 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 19 Oct 2011 13:54:08 -0700
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <4E9F3497.6000604@landcareresearch.co.nz>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>
	<4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
	<4E9B78F0.8010708@landcareresearch.co.nz>
	<CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
	<4E9B9059.8010609@landcareresearch.co.nz>
	<CA+YzLBejdyiYNDSoseBiuU8BqHXB1m_z8n5gPzT=H+p9RagoFw@mail.gmail.com>
	<4E9CDDA2.10802@landcareresearch.co.nz>
	<CA+YzLBcb0wEP1azwNWt-8AWzj0cBb35cvumu9yLK57HynVGhZA@mail.gmail.com>
	<4E9F3497.6000604@landcareresearch.co.nz>
Message-ID: <CA+YzLBdqo55Ve38vGBmuTK+Cw0mb1h_F+-zb_urehp6M0KzOBA@mail.gmail.com>

On Wed, Oct 19, 2011 at 1:35 PM, Michael Speth
<spethm at landcareresearch.co.nz> wrote:
> Greetings,
>   How is the tv_out.dist file generated?

Michael,

The file is generated by running the script and renaming the
output file after human review shows any diffs are due to newly
added good results.


>   Also, does Proj.4 have any conventions for indicating that a given
> set of parameters for a projection are invalid?

I'm not sure how you mean.  In the cs2cs output?  In the code?  In
the docs?

In the code for PJ_tmerc.c you can see how errors in +zone=
values are reported with E_ERROR() during projection initialization.

Best regards,

> Thanks for your help!
>
> On 18/10/11 15:41, Frank Warmerdam wrote:
>> On Mon, Oct 17, 2011 at 7:00 PM, Michael Speth
>> <spethm at landcareresearch.co.nz>  wrote:
>>> Thank you Frank!
>>>    I've added your recommended fixes and it works!  We will now start
>>> thoroughly testing.  Do you have any suggestions for testing?
>> Michael,
>>
>> Nothing deep, no.  But I would like to have a few representative
>> test points to incorporate into proj/nad/testvarious so you might
>> want to consider including that in the submission patch.
>>
>> Best regards,
>
>
> --
> Michael Speth
> Scientific Programmer
> Landcare Research
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


From EMiller at dfg.ca.gov  Wed Oct 19 14:33:02 2011
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Wed, 19 Oct 2011 14:33:02 -0700
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <CA+YzLBdqo55Ve38vGBmuTK+Cw0mb1h_F+-zb_urehp6M0KzOBA@mail.gmail.com>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com> <4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
	<4E9B78F0.8010708@landcareresearch.co.nz>
	<CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
	<4E9B9059.8010609@landcareresearch.co.nz>
	<CA+YzLBejdyiYNDSoseBiuU8BqHXB1m_z8n5gPzT=H+p9RagoFw@mail.gmail.com>
	<4E9CDDA2.10802@landcareresearch.co.nz>
	<CA+YzLBcb0wEP1azwNWt-8AWzj0cBb35cvumu9yLK57HynVGhZA@mail.gmail.com>
	<4E9F3497.6000604@landcareresearch.co.nz>
	<CA+YzLBdqo55Ve38vGBmuTK+Cw0mb1h_F+-zb_urehp6M0KzOBA@mail.gmail.com>
Message-ID: <4E9EDF9D.95FD.00E4.1@dfg.ca.gov>

Frank,

Did you have any thoughts on dealing with the minus zero problem in the test comparisons?  I guess some compilers (Intel, others?) will print "-0.00" in some cases which causes the textual comparison to "0.00" to fail.

See the message from "brick <brickflying at gmail.com>" on 9/27.
-- 

Eric G. Miller
Staff Programmer
CA Dept. of Fish & Game


>>> On 10/19/2011 at  1:54 PM, Frank Warmerdam <warmerdam at pobox.com> wrote:
> On Wed, Oct 19, 2011 at 1:35 PM, Michael Speth
> <spethm at landcareresearch.co.nz> wrote:
>> Greetings,
>>   How is the tv_out.dist file generated?
> 
> Michael,
> 
> The file is generated by running the script and renaming the
> output file after human review shows any diffs are due to newly
> added good results.
> 
> 
>>   Also, does Proj.4 have any conventions for indicating that a given
>> set of parameters for a projection are invalid?
> 
> I'm not sure how you mean.  In the cs2cs output?  In the code?  In
> the docs?
> 
> In the code for PJ_tmerc.c you can see how errors in +zone=
> values are reported with E_ERROR() during projection initialization.
> 
> Best regards,
> 
>> Thanks for your help!
>>
>> On 18/10/11 15:41, Frank Warmerdam wrote:
>>> On Mon, Oct 17, 2011 at 7:00 PM, Michael Speth
>>> <spethm at landcareresearch.co.nz>  wrote:
>>>> Thank you Frank!
>>>>    I've added your recommended fixes and it works!  We will now start
>>>> thoroughly testing.  Do you have any suggestions for testing?
>>> Michael,
>>>
>>> Nothing deep, no.  But I would like to have a few representative
>>> test points to incorporate into proj/nad/testvarious so you might
>>> want to consider including that in the submission patch.
>>>
>>> Best regards,
>>
>>
>> --
>> Michael Speth
>> Scientific Programmer
>> Landcare Research
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org 
>> http://lists.maptools.org/mailman/listinfo/proj 
>>
> 
> 




From warmerdam at pobox.com  Wed Oct 19 15:14:53 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 19 Oct 2011 15:14:53 -0700
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <4E9EDF9D.95FD.00E4.1@dfg.ca.gov>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>
	<4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
	<4E9B78F0.8010708@landcareresearch.co.nz>
	<CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
	<4E9B9059.8010609@landcareresearch.co.nz>
	<CA+YzLBejdyiYNDSoseBiuU8BqHXB1m_z8n5gPzT=H+p9RagoFw@mail.gmail.com>
	<4E9CDDA2.10802@landcareresearch.co.nz>
	<CA+YzLBcb0wEP1azwNWt-8AWzj0cBb35cvumu9yLK57HynVGhZA@mail.gmail.com>
	<4E9F3497.6000604@landcareresearch.co.nz>
	<CA+YzLBdqo55Ve38vGBmuTK+Cw0mb1h_F+-zb_urehp6M0KzOBA@mail.gmail.com>
	<4E9EDF9D.95FD.00E4.1@dfg.ca.gov>
Message-ID: <CA+YzLBeQPnNxEoTh7B5GZA7-=gtLj8mBznPTCYvnTnQDOWLysw@mail.gmail.com>

On Wed, Oct 19, 2011 at 2:33 PM, Eric Miller <EMiller at dfg.ca.gov> wrote:
> Frank,
>
> Did you have any thoughts on dealing with the minus zero problem in the test comparisons?  I guess some compilers (Intel, others?) will print "-0.00" in some cases which causes the textual comparison to "0.00" to fail.
>
> See the message from "brick <brickflying at gmail.com>" on 9/27.

Eric,

My suggestion would be that we pick test points that don't result in a
zero result.  :-)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


From hanlie.pretorius at gmail.com  Wed Oct 19 19:30:54 2011
From: hanlie.pretorius at gmail.com (Hanlie Pretorius)
Date: Thu, 20 Oct 2011 04:30:54 +0200
Subject: [Proj] Setting up a proj4 specification
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD4938884916@SETHNWS023.carmenta.se>
References: <CAFpCUPqvKrcnoShBf2woXRHohnZ1uhahE8Ok4AgskTb1h0r1pQ@mail.gmail.com>
	<4E9E7F9F.1020503@free.fr>
	<E4AB3DD44D22854B819908379DE4AD49388847F2@SETHNWS023.carmenta.se>
	<E4AB3DD44D22854B819908379DE4AD4938884916@SETHNWS023.carmenta.se>
Message-ID: <CAFpCUPr-CqTd3eTVRxnvvpgkuD5kE5+KcvXpX7VSH0=62u+=Ww@mail.gmail.com>

Thanks for all the help.

2011/10/19, Mikael Rittri <Mikael.Rittri at carmenta.com>:
> PS again:
>
> The AFREF newsletter No.5, January 2008,
>
> http://facility.unavco.org/kb/getattachment.php?data=ODR8SkFOIDIwMDggQUZSRUYgbmV3c2xldHRlci5wZGY%3D
>
> publishes what they call a "Molodensky-Badekas 7-Parameters transformation"
> that is "between WGS 84 and Arc 1960 datum for Kenya". I think that means
> that
> the published transformation goes in the direction from WGS 84 to Arc 1960.
> So one would need to reverse the signs of all parameters for use in Proj.4.
>
> Also, I think "Molodensky-Badekas" usually means that the rotation sign
> convention is Coordinate Frame Rotation, while Proj.4 uses the opposite
> Position Vector Transformation.  If I am right, the signs of the rotation
> parameters must be reversed once more!
>
> If I am not mistaken, the Proj.4 syntax for the transformation should be
>
>    +towgs84=-148.5133,3.4865,-298.0307,-5.9464,7.1414,2.8544,4.3955
>
> Regards,
>
> Mikael Rittri
> Carmenta
> Sweden
> http://www.carmenta.com
>
>
> -----Original Message-----
> From: Mikael Rittri
> Sent: Wednesday, October 19, 2011 12:55 PM
> To: 'PROJ.4 and general Projections Discussions'
> Subject: RE: [Proj] Setting up a proj4 specification
>
> PS:
>
> Another datum shift for Arc 1960 to WGS 84 in Kenya is
>
>    +towgs84=-179.1,-44.7,-302.6
>
> which is probably more accurate. See Clifford Mugnier's column on Kenya,
>
> http://www.asprs.org/a/resources/grids/06-2003-kenya.pdf
>
> regards,
>
> Mikael Rittri
> Carmenta
>
> -----Original Message-----
> From: proj-bounces at lists.maptools.org
> [mailto:proj-bounces at lists.maptools.org] On Behalf Of Mikael Rittri
> Sent: Wednesday, October 19, 2011 11:10 AM
> To: PROJ.4 and general Projections Discussions
> Subject: Re: [Proj] Setting up a proj4 specification
>
> Hello, Hanlie.
>
> [-- see  http://lists.maptools.org/pipermail/proj/2011-October/005962.html
> --]


From support.mn at elisanet.fi  Thu Oct 20 03:17:23 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Thu, 20 Oct 2011 13:17:23 +0300 (EEST)
Subject: [Proj] rHEALPix new parameters
Message-ID: <23110213.3349441319105843589.JavaMail.support.mn@elisanet.fi>

Michael,

Proj.4 does not have any deep checking for parameters, it is
very basic and simple library. It just usually makes something
wrong without giving any error messages about the wrong
results. There was a discussion about to add a syntax checker
in front of proj.4, kind of a pre processor which would sort out
the most obvious errors. But that addition is waiting for a better
day to be done. Until then the user must be very careful not to
enter anything wrong to it.

Janne.

----------------------------------------------------------------

Michael Speth [spethm at landcareresearch.co.nz] kirjoitti: 
> Greetings,
>    How is the tv_out.dist file generated?
>    Also, does Proj.4 have any conventions for indicating that a given 
> set of parameters for a projection are invalid?
> 



From garret.duffy at nuigalway.ie  Thu Oct 27 06:14:55 2011
From: garret.duffy at nuigalway.ie (Garret Duffy)
Date: Thu, 27 Oct 2011 14:14:55 +0100
Subject: [Proj] newbie question: would like to download and install trunk
	version
Message-ID: <j8blgg$6tq$1@dough.gmane.org>

Hi,

I would like to download and install PROJ.4 from the trunk (I need the 
version ov omerc that supports gamma).

Supposedly, this can be done anonymously and even though I have an osgeo 
login, I am getting authorization failed.

I am using command:

svn import ./path/to/project http://svn.osgeo.org/metacrs/proj/trunk/proj/

but I am getting authorization issue.

Apologies, I've never used svn before and I only would like to run the trunk 
version, I am not planning on developing.

Regards,

Garret 





From richard.greenwood at gmail.com  Thu Oct 27 06:31:50 2011
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Thu, 27 Oct 2011 07:31:50 -0600
Subject: [Proj] newbie question: would like to download and install
	trunk version
In-Reply-To: <j8blgg$6tq$1@dough.gmane.org>
References: <j8blgg$6tq$1@dough.gmane.org>
Message-ID: <CAHBySPaoOyHdJOMsN2aVP6NLP7e3XWH5XE55g+v2Y7S4-yLK5Q@mail.gmail.com>

On Thu, Oct 27, 2011 at 7:14 AM, Garret Duffy <garret.duffy at nuigalway.ie> wrote:
> Hi,
>
> I would like to download and install PROJ.4 from the trunk (I need the
> version ov omerc that supports gamma).
>
> Supposedly, this can be done anonymously and even though I have an osgeo
> login, I am getting authorization failed.
>
> I am using command:
>
> svn import ./path/to/project http://svn.osgeo.org/metacrs/proj/trunk/proj/
>
> but I am getting authorization issue.
>
> Apologies, I've never used svn before and I only would like to run the trunk
> version, I am not planning on developing.
>
> Regards,
>
> Garret


Try:
svn checkout http://svn.osgeo.org/metacrs/proj/trunk/proj/ proj

which will put it in ./proj

-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From jrepetto at free.fr  Thu Oct 27 06:35:33 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu, 27 Oct 2011 15:35:33 +0200
Subject: [Proj] newbie question: would like to download and install
 trunk version
In-Reply-To: <j8blgg$6tq$1@dough.gmane.org>
References: <j8blgg$6tq$1@dough.gmane.org>
Message-ID: <4EA95E25.801@free.fr>

Le 27/10/2011 15:14, Garret Duffy a écrit :
> Hi,
>
> I would like to download and install PROJ.4 from the trunk (I need the
> version ov omerc that supports gamma).
>
> Supposedly, this can be done anonymously and even though I have an osgeo
> login, I am getting authorization failed.
>
> I am using command:
>
> svn import ./path/to/project http://svn.osgeo.org/metacrs/proj/trunk/proj/
>
> but I am getting authorization issue.

Hi,
Try :
svn export http://svn.osgeo.org/metacrs/proj/trunk/proj/ ./path/to/project

Jean-Claude




From garret.duffy at nuigalway.ie  Thu Oct 27 06:50:12 2011
From: garret.duffy at nuigalway.ie (Duffy, Garret)
Date: Thu, 27 Oct 2011 14:50:12 +0100
Subject: [Proj] newbie question: would like to download and installtrunk
	version
In-Reply-To: <CAHBySPaoOyHdJOMsN2aVP6NLP7e3XWH5XE55g+v2Y7S4-yLK5Q@mail.gmail.com>
References: <j8blgg$6tq$1@dough.gmane.org>
	<CAHBySPaoOyHdJOMsN2aVP6NLP7e3XWH5XE55g+v2Y7S4-yLK5Q@mail.gmail.com>
Message-ID: <1612FB018DB27B449265FE30F163AF5D057E7DB5@EVS1.ac.nuigalway.ie>

Thanks for the swift reply everyone!
G


-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Richard Greenwood
Sent: 27-Oct-11 2:32 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] newbie question: would like to download and
installtrunk version

On Thu, Oct 27, 2011 at 7:14 AM, Garret Duffy
<garret.duffy at nuigalway.ie> wrote:
> Hi,
>
> I would like to download and install PROJ.4 from the trunk (I need the

> version ov omerc that supports gamma).
>
> Supposedly, this can be done anonymously and even though I have an 
> osgeo login, I am getting authorization failed.
>
> I am using command:
>
> svn import ./path/to/project 
> http://svn.osgeo.org/metacrs/proj/trunk/proj/
>
> but I am getting authorization issue.
>
> Apologies, I've never used svn before and I only would like to run the

> trunk version, I am not planning on developing.
>
> Regards,
>
> Garret


Try:
svn checkout http://svn.osgeo.org/metacrs/proj/trunk/proj/ proj

which will put it in ./proj

--
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From spethm at landcareresearch.co.nz  Mon Oct 31 12:20:05 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Tue, 01 Nov 2011 08:20:05 +1300
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <CA+YzLBdqo55Ve38vGBmuTK+Cw0mb1h_F+-zb_urehp6M0KzOBA@mail.gmail.com>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>	<4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
	<4E9B78F0.8010708@landcareresearch.co.nz>
	<CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
	<4E9B9059.8010609@landcareresearch.co.nz>
	<CA+YzLBejdyiYNDSoseBiuU8BqHXB1m_z8n5gPzT=H+p9RagoFw@mail.gmail.com>
	<4E9CDDA2.10802@landcareresearch.co.nz>
	<CA+YzLBcb0wEP1azwNWt-8AWzj0cBb35cvumu9yLK57HynVGhZA@mail.gmail.com>
	<4E9F3497.6000604@landcareresearch.co.nz>
	<CA+YzLBdqo55Ve38vGBmuTK+Cw0mb1h_F+-zb_urehp6M0KzOBA@mail.gmail.com>
Message-ID: <4EAEF4E5.3000803@landcareresearch.co.nz>

Greetings,
    The E_ERROR calls the set_errno function.  Is there a header file 
that contains a reference to the error codes for proj.4?  In the case of 
HEALPix and rHEALPix, I want to report that for the inverse of these 
projections, that the point is not within the projection space.  Also, 
for the rHEALPix, I want to report that the values for npole and spole 
are invalid.

How should I choose the the values to pass to errno?

Thanks

On 20/10/11 09:54, Frank Warmerdam wrote:
> On Wed, Oct 19, 2011 at 1:35 PM, Michael Speth
> <spethm at landcareresearch.co.nz>  wrote:
>> Greetings,
>>    How is the tv_out.dist file generated?
> Michael,
>
> The file is generated by running the script and renaming the
> output file after human review shows any diffs are due to newly
> added good results.
>
>
>>    Also, does Proj.4 have any conventions for indicating that a given
>> set of parameters for a projection are invalid?
> I'm not sure how you mean.  In the cs2cs output?  In the code?  In
> the docs?
>
> In the code for PJ_tmerc.c you can see how errors in +zone=
> values are reported with E_ERROR() during projection initialization.
>
> Best regards,
>
>> Thanks for your help!
>>
>> On 18/10/11 15:41, Frank Warmerdam wrote:
>>> On Mon, Oct 17, 2011 at 7:00 PM, Michael Speth
>>> <spethm at landcareresearch.co.nz>    wrote:
>>>> Thank you Frank!
>>>>     I've added your recommended fixes and it works!  We will now start
>>>> thoroughly testing.  Do you have any suggestions for testing?
>>> Michael,
>>>
>>> Nothing deep, no.  But I would like to have a few representative
>>> test points to incorporate into proj/nad/testvarious so you might
>>> want to consider including that in the submission patch.
>>>
>>> Best regards,
>>
>> --
>> Michael Speth
>> Scientific Programmer
>> Landcare Research
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>>
>
>


-- 
Michael Speth
Scientific Programmer
Landcare Research

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111101/71407667/attachment.html>

From warmerdam at pobox.com  Mon Oct 31 12:28:39 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 31 Oct 2011 12:28:39 -0700
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <4EAEF4E5.3000803@landcareresearch.co.nz>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>
	<4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
	<4E9B78F0.8010708@landcareresearch.co.nz>
	<CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
	<4E9B9059.8010609@landcareresearch.co.nz>
	<CA+YzLBejdyiYNDSoseBiuU8BqHXB1m_z8n5gPzT=H+p9RagoFw@mail.gmail.com>
	<4E9CDDA2.10802@landcareresearch.co.nz>
	<CA+YzLBcb0wEP1azwNWt-8AWzj0cBb35cvumu9yLK57HynVGhZA@mail.gmail.com>
	<4E9F3497.6000604@landcareresearch.co.nz>
	<CA+YzLBdqo55Ve38vGBmuTK+Cw0mb1h_F+-zb_urehp6M0KzOBA@mail.gmail.com>
	<4EAEF4E5.3000803@landcareresearch.co.nz>
Message-ID: <CA+YzLBe58LB16G=5KfpmaDFhiYBohgn4LKLfb1MdqWpdXTssTQ@mail.gmail.com>

Michael,

The full list of proj.4 errors are in pj_strerrno.c.  I have added
a few #define constants for errors in projects.h, but I haven't
tried to add these for older errors.  Right now it can be relatively
hard to find all the places a particular error code might come from!

On Mon, Oct 31, 2011 at 12:20 PM, Michael Speth
<spethm at landcareresearch.co.nz> wrote:
> Greetings,
>    The E_ERROR calls the set_errno function.  Is there a header file that
> contains a reference to the error codes for proj.4?  In the case of HEALPix
> and rHEALPix, I want to report that for the inverse of these projections,
> that the point is not within the projection space.  Also, for the rHEALPix,
> I want to report that the values for npole and spole are invalid.
>
> How should I choose the the values to pass to errno?

I guess just look at the error text and try to chose something appropriate.
I'd generally not encourage adding new error codes if avoidable.

Note that a point not being in the projection space on inverse
projection is (I think) normally just represented by returning
HUGE_VAL, not by setting an error number.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


From spethm at landcareresearch.co.nz  Mon Oct 31 13:31:27 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Tue, 01 Nov 2011 09:31:27 +1300
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <CA+YzLBe58LB16G=5KfpmaDFhiYBohgn4LKLfb1MdqWpdXTssTQ@mail.gmail.com>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>	<4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
	<4E9B78F0.8010708@landcareresearch.co.nz>
	<CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
	<4E9B9059.8010609@landcareresearch.co.nz>
	<CA+YzLBejdyiYNDSoseBiuU8BqHXB1m_z8n5gPzT=H+p9RagoFw@mail.gmail.com>
	<4E9CDDA2.10802@landcareresearch.co.nz>
	<CA+YzLBcb0wEP1azwNWt-8AWzj0cBb35cvumu9yLK57HynVGhZA@mail.gmail.com>
	<4E9F3497.6000604@landcareresearch.co.nz>
	<CA+YzLBdqo55Ve38vGBmuTK+Cw0mb1h_F+-zb_urehp6M0KzOBA@mail.gmail.com>
	<4EAEF4E5.3000803@landcareresearch.co.nz>
	<CA+YzLBe58LB16G=5KfpmaDFhiYBohgn4LKLfb1MdqWpdXTssTQ@mail.gmail.com>
Message-ID: <4EAF059F.3040008@landcareresearch.co.nz>

Hi Frank,
There are 4 errors that I want to generate which are only in the inverse 
projections and not the forward.  However, the E_ERROR directive seems 
to only work in the ENTRY and SETUP functions (because it returns an int).

 From looking at proj.c, the forward or inverse functions are called 
after the setup code which includes the ENTRY0; I think that I am unable 
to check in the ENTRY0 directive for the error conditions for inverse 
projections.  Is this correct?

So should I use the I_ERROR directive in this case?  If so, it doesn't 
seem to allow for entering errno values (its defined as -20).  Can I 
create a new directive similar to E_ERROR(err) but for I_ERROR?

Thanks

On 01/11/11 08:28, Frank Warmerdam wrote:
> Michael,
>
> The full list of proj.4 errors are in pj_strerrno.c.  I have added
> a few #define constants for errors in projects.h, but I haven't
> tried to add these for older errors.  Right now it can be relatively
> hard to find all the places a particular error code might come from!
>
> On Mon, Oct 31, 2011 at 12:20 PM, Michael Speth
> <spethm at landcareresearch.co.nz>  wrote:
>> Greetings,
>>     The E_ERROR calls the set_errno function.  Is there a header file that
>> contains a reference to the error codes for proj.4?  In the case of HEALPix
>> and rHEALPix, I want to report that for the inverse of these projections,
>> that the point is not within the projection space.  Also, for the rHEALPix,
>> I want to report that the values for npole and spole are invalid.
>>
>> How should I choose the the values to pass to errno?
> I guess just look at the error text and try to chose something appropriate.
> I'd generally not encourage adding new error codes if avoidable.
>
> Note that a point not being in the projection space on inverse
> projection is (I think) normally just represented by returning
> HUGE_VAL, not by setting an error number.
>
> Best regards,


-- 
Michael Speth
Scientific Programmer
Landcare Research

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111101/4f086b8a/attachment.html>

From warmerdam at pobox.com  Mon Oct 31 13:45:19 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 31 Oct 2011 13:45:19 -0700
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <4EAF059F.3040008@landcareresearch.co.nz>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>
	<4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
	<4E9B78F0.8010708@landcareresearch.co.nz>
	<CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
	<4E9B9059.8010609@landcareresearch.co.nz>
	<CA+YzLBejdyiYNDSoseBiuU8BqHXB1m_z8n5gPzT=H+p9RagoFw@mail.gmail.com>
	<4E9CDDA2.10802@landcareresearch.co.nz>
	<CA+YzLBcb0wEP1azwNWt-8AWzj0cBb35cvumu9yLK57HynVGhZA@mail.gmail.com>
	<4E9F3497.6000604@landcareresearch.co.nz>
	<CA+YzLBdqo55Ve38vGBmuTK+Cw0mb1h_F+-zb_urehp6M0KzOBA@mail.gmail.com>
	<4EAEF4E5.3000803@landcareresearch.co.nz>
	<CA+YzLBe58LB16G=5KfpmaDFhiYBohgn4LKLfb1MdqWpdXTssTQ@mail.gmail.com>
	<4EAF059F.3040008@landcareresearch.co.nz>
Message-ID: <CA+YzLBdrsjnz8-WMCWMZoSyprFDMo4E0s-MRrtkT+Dr7-zDbmg@mail.gmail.com>

On Mon, Oct 31, 2011 at 1:31 PM, Michael Speth
<spethm at landcareresearch.co.nz> wrote:
> Hi Frank,
>   There are 4 errors that I want to generate which are only in the inverse
> projections and not the forward.  However, the E_ERROR directive seems to
> only work in the ENTRY and SETUP functions (because it returns an int).
>
> From looking at proj.c, the forward or inverse functions are called after
> the setup code which includes the ENTRY0; I think that I am unable to check
> in the ENTRY0 directive for the error conditions for inverse projections.
> Is this correct?
>
> So should I use the I_ERROR directive in this case?  If so, it doesn't seem
> to allow for entering errno values (its defined as -20).  Can I create a new
> directive similar to E_ERROR(err) but for I_ERROR?

Michael,

I would actually encourage you to actually explicitly call
the error code instead of using the opaque I_ERROR
or a similar macro.  For instance in PJ_tmerc.c I now do:

        /*
         * Fail if our longitude is more than 90 degrees from the
         * central meridian since the results are essentially garbage.
         * Is error -20 really an appropriate return value?
         *
         *  http://trac.osgeo.org/proj/ticket/5
         */
        if( lp.lam < -HALFPI || lp.lam > HALFPI )
        {
            xy.x = HUGE_VAL;
            xy.y = HUGE_VAL;
            pj_ctx_set_errno( P->ctx, -14 );
            return xy;
        }

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


