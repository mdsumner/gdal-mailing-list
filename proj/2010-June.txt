From ckarney at sarnoff.com  Tue Jun  1 10:42:59 2010
From: ckarney at sarnoff.com (Charles Karney)
Date: Tue, 01 Jun 2010 13:42:59 -0400
Subject: [Proj] Spheroidal gnomonic projection
Message-ID: <ssr7hmi7ios.fsf@puffin.sarnoff.com>

The gnomonic map projection is a central projection of the sphere on a
tangent plane.  The key property of the projection is that all geodesics
map to straight lines in the projection.

This property cannot be preserved for an ellipsoid.  However, we can
obtain a projection where the projected geodesics are approximately
straight close to the center of the projection.  It is obtained as the
limit of a 2-point azimuthal projection as the two points approach one
another.  The method generalizes to any 2-dimensional surface; but I
only have the necessary formulas worked out for the ellipsoid.

This projection has the following properties:

 (1) azimuthal, all azimuths from the center are correct;
 (2) hence, all lines through the center are geodesics;
 (3) all other lines are *approximately* geodesics.

To quantify point 3, consider this projection with some specified center
on the WGS84 ellipsoid.  Take an arbitrary pair of points within r =
1000 km of the center.  Draw a straight line between these on the map;
then back project this line onto the ellipsoid.  How close is this line
to a geodesic?  I find that *at worst*,

  max error in initial/final azimuth = 1.0" = 0.39 * f*(r/a)^3
  max deviation from geodesic = 1.66 m = 0.13 * f*(r/a)^3*r

(a = major radius, f = flattening, and the formulas show the scaling of
the errors).  For comparison, for a gnomonic projection obtained by
projecting from the center of the ellipsoid (i.e., approximating the
geodesic by a great ellipse), the equivalent figures are about 100 times
worse:

  max error in initial/final azimuth = 108" = 1.0 * f*(r/a)
  max deviation from geodesic = 265 m = 0.5 * f*(r/a)*r

The method of constructing the projection entails defining two
quantities,

  * m, the reduced length.  Take two geodesics of length s which start
    from the center with azimuths differing by dalpha.  The endpoints
    are separated by m * dalpha.

  * M, the geodesic scale.  Take two geodesics of length s which are
    parallel close to the center and initially separated by dt.  The
    endpoints are separated by M * dt.

The reduced length was introduced by Gauss (1827) and Christoffel
(1868).  Helmert (1880), Sec. 6.5, gives an explicit formula for the
ellipsoid.  The geodesic scale was introduced (I think) by

  G. V. Bagratuni,
  Course in spheroidal geodesy,
  FTD-MT-64-390 (US Air Force, 1967), Sec. 17
  [Kurs sferoidicheskoi geodezii, (Moscow, 1962)].
  http://handle.dtic.mil/100.2/AD650520

(Bagratuni uses the symbol n.)  An explicit formula for the ellipsoid is
given in version 1.2 of GeographicLib by GeodesicLine::Scale.

To carry out the projection for an arbitrary point, solve the inverse
geodesic problem between the center and the point.  Let alpha be the
azimuth of the geodesic at the center and s be its length.  Compute

  rho = m/M

Then the projected point is

  x = rho * sin(alpha); y = rho * cos(alpha)

The radial scale is 1/M^2 and the transverse scale is 1/M.  For a
sphere, m = a * sin(s/a) and M = cos(s/a), thus

  rho = a * tan(s/a)

which gives the spherical gnomonic projection.

In order to reverse the projection, compute

  alpha = atan2(x, y); rho = sqrt(x^2 + y^2)

Use Newton's method to solve for s given rho; for this we need drho/ds
which is given by the radial scale = 1/M^2.  Solve the direct geodesic
problem from the center using length s and azimuth alpha to recover the
original point.

I just checked in a Gnomonic class for GeographicLib that implements the
forward and reverse projections.  It's available through svn from
SourceForge.

This projection minimizes the error in the straightness of geodesics
near the center.  If, instead, you want to minimize the error over some
region, then use a two-point azimuthal projection with two base points
judiciously chosen within the region.

Questions:

(1) Is this new?
(2) Is Bagratuni this first person to define M?
(3) Is GeographicLib the first place where the formula for M for an
    ellipsoid is given?
(4) Does anyone have a better copy of Bagratuni than the one given
    above.  (I'll even take a good copy in the Russian original.)

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662


From cjmce at lsu.edu  Tue Jun  1 11:18:50 2010
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 1 Jun 2010 13:18:50 -0500
Subject: [Proj] Spheroidal gnomonic projection
References: <ssr7hmi7ios.fsf@puffin.sarnoff.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7026A621C@email002.lsu.edu>

Cole did the two-point azimuthal equidistant on the Helmert ellipsoid back in the early 1900's for the Survey of Egypt.  I do not have a copy, though.  It's pretty obscure, but the intent was to provide a graphic for determining the direction to face for daily prayers.
 
Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3223A
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 238-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group


________________________________

From: proj-bounces at lists.maptools.org on behalf of Charles Karney
Sent: Tue 01-Jun-10 12:42
To: proj at lists.maptools.org
Cc: deakin at rmit.edu.au; william at karney.com; kevin at karney.com; knud.poder at mail.dk; Craig.M.Rollins at nga.mil
Subject: [Proj] Spheroidal gnomonic projection



The gnomonic map projection is a central projection of the sphere on a
tangent plane.  The key property of the projection is that all geodesics
map to straight lines in the projection.

This property cannot be preserved for an ellipsoid.  However, we can
obtain a projection where the projected geodesics are approximately
straight close to the center of the projection.  It is obtained as the
limit of a 2-point azimuthal projection as the two points approach one
another.  The method generalizes to any 2-dimensional surface; but I
only have the necessary formulas worked out for the ellipsoid.

This projection has the following properties:

 (1) azimuthal, all azimuths from the center are correct;
 (2) hence, all lines through the center are geodesics;
 (3) all other lines are *approximately* geodesics.

To quantify point 3, consider this projection with some specified center
on the WGS84 ellipsoid.  Take an arbitrary pair of points within r =
1000 km of the center.  Draw a straight line between these on the map;
then back project this line onto the ellipsoid.  How close is this line
to a geodesic?  I find that *at worst*,

  max error in initial/final azimuth = 1.0" = 0.39 * f*(r/a)^3
  max deviation from geodesic = 1.66 m = 0.13 * f*(r/a)^3*r

(a = major radius, f = flattening, and the formulas show the scaling of
the errors).  For comparison, for a gnomonic projection obtained by
projecting from the center of the ellipsoid (i.e., approximating the
geodesic by a great ellipse), the equivalent figures are about 100 times
worse:

  max error in initial/final azimuth = 108" = 1.0 * f*(r/a)
  max deviation from geodesic = 265 m = 0.5 * f*(r/a)*r

The method of constructing the projection entails defining two
quantities,

  * m, the reduced length.  Take two geodesics of length s which start
    from the center with azimuths differing by dalpha.  The endpoints
    are separated by m * dalpha.

  * M, the geodesic scale.  Take two geodesics of length s which are
    parallel close to the center and initially separated by dt.  The
    endpoints are separated by M * dt.

The reduced length was introduced by Gauss (1827) and Christoffel
(1868).  Helmert (1880), Sec. 6.5, gives an explicit formula for the
ellipsoid.  The geodesic scale was introduced (I think) by

  G. V. Bagratuni,
  Course in spheroidal geodesy,
  FTD-MT-64-390 (US Air Force, 1967), Sec. 17
  [Kurs sferoidicheskoi geodezii, (Moscow, 1962)].
  http://handle.dtic.mil/100.2/AD650520

(Bagratuni uses the symbol n.)  An explicit formula for the ellipsoid is
given in version 1.2 of GeographicLib by GeodesicLine::Scale.

To carry out the projection for an arbitrary point, solve the inverse
geodesic problem between the center and the point.  Let alpha be the
azimuth of the geodesic at the center and s be its length.  Compute

  rho = m/M

Then the projected point is

  x = rho * sin(alpha); y = rho * cos(alpha)

The radial scale is 1/M^2 and the transverse scale is 1/M.  For a
sphere, m = a * sin(s/a) and M = cos(s/a), thus

  rho = a * tan(s/a)

which gives the spherical gnomonic projection.

In order to reverse the projection, compute

  alpha = atan2(x, y); rho = sqrt(x^2 + y^2)

Use Newton's method to solve for s given rho; for this we need drho/ds
which is given by the radial scale = 1/M^2.  Solve the direct geodesic
problem from the center using length s and azimuth alpha to recover the
original point.

I just checked in a Gnomonic class for GeographicLib that implements the
forward and reverse projections.  It's available through svn from
SourceForge.

This projection minimizes the error in the straightness of geodesics
near the center.  If, instead, you want to minimize the error over some
region, then use a two-point azimuthal projection with two base points
judiciously chosen within the region.

Questions:

(1) Is this new?
(2) Is Bagratuni this first person to define M?
(3) Is GeographicLib the first place where the formula for M for an
    ellipsoid is given?
(4) Does anyone have a better copy of Bagratuni than the one given
    above.  (I'll even take a good copy in the Russian original.)

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100601/90d685be/attachment.html>

From ckarney at Sarnoff.com  Tue Jun  1 14:58:12 2010
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Tue, 1 Jun 2010 17:58:12 -0400
Subject: [Proj] Spheroidal gnomonic projection
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7026A621C@email002.lsu.edu>
References: <ssr7hmi7ios.fsf@puffin.sarnoff.com>,
	<B597ADFC46B67741B18EA6AA13613FF7026A621C@email002.lsu.edu>
Message-ID: <CED6B4B383C5F0418DAFEA443A0033C2F90E27947E@MALIBU.sarnoff.internal>

> From: Clifford J Mugnier [cjmce at lsu.edu]
> Sent: Tuesday, June 01, 2010 14:18
> 
> Cole did the two-point azimuthal equidistant on the Helmert ellipsoid
> back in the early 1900's for the Survey of Egypt.  I do not have a
> copy, though.  It's pretty obscure, but the intent was to provide a
> graphic for determining the direction to face for daily prayers.

Thanks, this gives me something to track down.  I assume that "two-point
azimuthal equidistant" means the azimuth from basepoint A is correct and
the distance from basepoint B is correct?  I had thought that Close (and
not Cole) was the originator of this projection:

  C. F. Close, 1935, Two-Point Azimuthal-Equidistant projection,
  Geographical Journal, v. 86, no. 5, p. 445-446.

But maybe Cole generalizes this the the ellipsoid?

The gnomonic projection is the limit of a "two-point azimuthal"
projection where the two azimuths from A and B are correct, and this was
given (for the sphere only?) by Maurer, Immler, and Close (again).  All
of these are in papers I haven't been able to get hold of yet.

  --Charles
--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662


From roger at opq.se  Mon Jun  7 00:38:00 2010
From: roger at opq.se (Roger Oberholtzer)
Date: Mon, 07 Jun 2010 09:38:00 +0200
Subject: [Proj] TM06 for Portugal
In-Reply-To: <1266507614.17319.92.camel@acme.pacific>
References: <1266320435.3745.52.camel@acme.pacific>
	<4FBEAF2799F44DB3906B6DF5FB3AA0B7@PCHP>
	<1266323739.3745.78.camel@acme.pacific>
	<8F23F861654A437D9EED357D6AFCDE41@PCHP>
	<1266333252.3745.112.camel@acme.pacific>
	<6a91fcb01002160934m4e88af07ka702f59dab11826b@mail.gmail.com>
	<1266398836.1127.57.camel@acme.pacific>
	<6a91fcb01002180524x518af47v737e90c88a630ab3@mail.gmail.com>
	<1266507614.17319.92.camel@acme.pacific>
Message-ID: <1275896280.28023.35.camel@acme.pacific>

On Thu, 2010-02-18 at 16:40 +0100, Roger Oberholtzer wrote:

I now have some test data for the conversion from WGS84 lat/long to TM06
northing/eastings. The suggested proj conversion of:

      "+proj=tmerc "
      "+ellps=GRS80 "
      "+k=1.0 "
      "+x_0=0 "
      "+y_0=0 "
      "+lon_0=-8.133108333333334 "
      "+lat_0=39.66825833333333 "
      "+towgs84=0,0,0,0,0,0,0 "

seems in fact to work with ETRS89 lat/long, not WGS84 lat/long. When
provided with WGS84 lat/long, the resulting northings/eastings are a few
meters away. (Assuming my test data from the Portuguese Road Department
is correct. I have double checked, so it might very well be.)  In fact,
it is a small error, but I want to provide the best I can. I am guessing
that I need to change my +towgs84= to cause the WGS84 lat/longs to be
converted to ETRS89. Does anyone know the proper values?

This begs the question: what does
http://spatialreference.org/ref/epsg/3763/ assume is the datum of the
original lat/longs? Seems it assumes ETRS89, not WGS84.

Here is a sample location that I have been provided (all altitudes set
to 0.0):

 Ref (WGS84):    Latitude:   41.6743830556 Longitude:   -8.3312663889
Ref (ETRS98):    Latitude:   41.6744052222 Longitude:   -8.3312324722
  Ref (TM06):    Easting:    -16498.151 Northing:       222796.720

The proj conversion above properly converts the ETRS98 locations to
TM06. But I want to convert the WGS84 locations to TM06. When I try
that, I get:

  Easting: -16500.981 Northing: 222794.265

which is 3.747 meters away.

-- 
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696



From jagoncal at gmail.com  Mon Jun  7 02:18:24 2010
From: jagoncal at gmail.com (=?ISO-8859-1?Q?Jose_Gon=E7alves?=)
Date: Mon, 7 Jun 2010 10:18:24 +0100
Subject: [Proj] TM06 for Portugal
In-Reply-To: <1275896280.28023.35.camel@acme.pacific>
References: <1266320435.3745.52.camel@acme.pacific>
	<4FBEAF2799F44DB3906B6DF5FB3AA0B7@PCHP>
	<1266323739.3745.78.camel@acme.pacific>
	<8F23F861654A437D9EED357D6AFCDE41@PCHP>
	<1266333252.3745.112.camel@acme.pacific>
	<6a91fcb01002160934m4e88af07ka702f59dab11826b@mail.gmail.com>
	<1266398836.1127.57.camel@acme.pacific>
	<6a91fcb01002180524x518af47v737e90c88a630ab3@mail.gmail.com>
	<1266507614.17319.92.camel@acme.pacific>
	<1275896280.28023.35.camel@acme.pacific>
Message-ID: <AANLkTilH_XHGZVhaB3ZKNGaJnXCLzFpTxEbcHmCXs5Bt@mail.gmail.com>

Roger

The test data cannot be correct. ETRS89 coincides with WGS84 (or better
ITRF) in 1989 and the current discplacement is only a few decimeters. The
lat-long differences between your coordinates are 0.080" and 0.122", which
correspond to approximately 2.9 m in lat and 2.5 m in long, i. e the
differences you get in the projected coordinates.

Yout test point belongs to the portuguese geodetic network. The ETRS89
coordinates are correct, as you can check in:

http://www.igeo.pt/produtos/geodesia/vg/rgn/ficha.asp?num=873
(open with Internet Explorer)

Where did you get the WGS84 coordinates? They must be wrong.

Regards

José A. Gonçalves
Univ. of Porto, Portugal



2010/6/7 Roger Oberholtzer <roger at opq.se>

> On Thu, 2010-02-18 at 16:40 +0100, Roger Oberholtzer wrote:
>
> I now have some test data for the conversion from WGS84 lat/long to TM06
> northing/eastings. The suggested proj conversion of:
>
>      "+proj=tmerc "
>      "+ellps=GRS80 "
>      "+k=1.0 "
>      "+x_0=0 "
>      "+y_0=0 "
>      "+lon_0=-8.133108333333334 "
>      "+lat_0=39.66825833333333 "
>      "+towgs84=0,0,0,0,0,0,0 "
>
> seems in fact to work with ETRS89 lat/long, not WGS84 lat/long. When
> provided with WGS84 lat/long, the resulting northings/eastings are a few
> meters away. (Assuming my test data from the Portuguese Road Department
> is correct. I have double checked, so it might very well be.)  In fact,
> it is a small error, but I want to provide the best I can. I am guessing
> that I need to change my +towgs84= to cause the WGS84 lat/longs to be
> converted to ETRS89. Does anyone know the proper values?
>
> This begs the question: what does
> http://spatialreference.org/ref/epsg/3763/ assume is the datum of the
> original lat/longs? Seems it assumes ETRS89, not WGS84.
>
> Here is a sample location that I have been provided (all altitudes set
> to 0.0):
>
>  Ref (WGS84):    Latitude:   41.6743830556 Longitude:   -8.3312663889
> Ref (ETRS98):    Latitude:   41.6744052222 Longitude:   -8.3312324722
>  Ref (TM06):    Easting:    -16498.151 Northing:       222796.720
>
> The proj conversion above properly converts the ETRS98 locations to
> TM06. But I want to convert the WGS84 locations to TM06. When I try
> that, I get:
>
>  Easting: -16500.981 Northing: 222794.265
>
> which is 3.747 meters away.
>
> --
> Roger Oberholtzer
>
> OPQ Systems / Ramböll RST
>
> Ramböll Sverige AB
> Krukmakargatan 21
> P.O. Box 17009
> SE-104 62 Stockholm, Sweden
>
> Office: Int +46 10-615 60 20
> Mobile: Int +46 70-815 1696
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100607/5486d23a/attachment.html>

From roger at opq.se  Mon Jun  7 04:38:24 2010
From: roger at opq.se (Roger Oberholtzer)
Date: Mon, 07 Jun 2010 13:38:24 +0200
Subject: [Proj] TM06 for Portugal
In-Reply-To: <AANLkTilH_XHGZVhaB3ZKNGaJnXCLzFpTxEbcHmCXs5Bt@mail.gmail.com>
References: <1266320435.3745.52.camel@acme.pacific>
	<4FBEAF2799F44DB3906B6DF5FB3AA0B7@PCHP>
	<1266323739.3745.78.camel@acme.pacific>
	<8F23F861654A437D9EED357D6AFCDE41@PCHP>
	<1266333252.3745.112.camel@acme.pacific>
	<6a91fcb01002160934m4e88af07ka702f59dab11826b@mail.gmail.com>
	<1266398836.1127.57.camel@acme.pacific>
	<6a91fcb01002180524x518af47v737e90c88a630ab3@mail.gmail.com>
	<1266507614.17319.92.camel@acme.pacific>
	<1275896280.28023.35.camel@acme.pacific>
	<AANLkTilH_XHGZVhaB3ZKNGaJnXCLzFpTxEbcHmCXs5Bt@mail.gmail.com>
Message-ID: <1275910704.28023.151.camel@acme.pacific>

On Mon, 2010-06-07 at 10:18 +0100, Jose Gonçalves wrote:
> Roger
> 
> The test data cannot be correct. ETRS89 coincides with WGS84 (or
> better ITRF) in 1989 and the current discplacement is only a few
> decimeters. The lat-long differences between your coordinates are
> 0.080" and 0.122", which correspond to approximately 2.9 m in lat and
> 2.5 m in long, i. e the differences you get in the projected
> coordinates.
> 
> Yout test point belongs to the portuguese geodetic network. The ETRS89
> coordinates are correct, as you can check in:
> 
> http://www.igeo.pt/produtos/geodesia/vg/rgn/ficha.asp?num=873
> (open with Internet Explorer)
> 
> Where did you get the WGS84 coordinates? They must be wrong.

>From Estradas de Portugal. I agree about the ETRS89 being correct
(meaning that given the proj transformation I described, the expected
northing/easting values are derived). I was surprised when they provided
two sets of lat/long values. They explained them by saying that the two
sets of LAT/LONG describe the same physical location, one in WGS84 and
the other in ETRS89. I have to trust that they have not mislabeled the
data. Especially after I asked for a confirmation.

What I am trying to accomplish is transforming WGS84 LAT/LONG from a GPS
receiver to both TM06 and MPG73 northings/eastings. I have started with
TM06. I will not have any ETRS89 lat/long values. The only reason they
might exist would be if proj makes them internally as a step in
converting the source WGS84 lat/longs into the desired TM06
northing/eastings.

How would you convert WGS84 lat/long into TM06 northing/easting? I know
that WGS84 is so close to ETR89 here that one 'could' use the WGS84
values in the transform from ETRS89 to TM06. But how would I do it the
'proper' way with proj?

> 
> Regards
> 
> José A. Gonçalves
> Univ. of Porto, Portugal
> 
> 
> 
> 2010/6/7 Roger Oberholtzer <roger at opq.se>
>         On Thu, 2010-02-18 at 16:40 +0100, Roger Oberholtzer wrote:
>         
>         I now have some test data for the conversion from WGS84
>         lat/long to TM06
>         northing/eastings. The suggested proj conversion of:
>         
>              "+proj=tmerc "
>              "+ellps=GRS80 "
>              "+k=1.0 "
>              "+x_0=0 "
>              "+y_0=0 "
>              "+lon_0=-8.133108333333334 "
>              "+lat_0=39.66825833333333 "
>              "+towgs84=0,0,0,0,0,0,0 "
>         
>         seems in fact to work with ETRS89 lat/long, not WGS84
>         lat/long. When
>         provided with WGS84 lat/long, the resulting northings/eastings
>         are a few
>         meters away. (Assuming my test data from the Portuguese Road
>         Department
>         is correct. I have double checked, so it might very well be.)
>          In fact,
>         it is a small error, but I want to provide the best I can. I
>         am guessing
>         that I need to change my +towgs84= to cause the WGS84
>         lat/longs to be
>         converted to ETRS89. Does anyone know the proper values?
>         
>         This begs the question: what does
>         http://spatialreference.org/ref/epsg/3763/ assume is the datum
>         of the
>         original lat/longs? Seems it assumes ETRS89, not WGS84.
>         
>         Here is a sample location that I have been provided (all
>         altitudes set
>         to 0.0):
>         
>          Ref (WGS84):    Latitude:   41.6743830556 Longitude:
>         -8.3312663889
>         Ref (ETRS98):    Latitude:   41.6744052222 Longitude:
>         -8.3312324722
>          Ref (TM06):    Easting:    -16498.151 Northing:
>         222796.720
>         
>         The proj conversion above properly converts the ETRS98
>         locations to
>         TM06. But I want to convert the WGS84 locations to TM06. When
>         I try
>         that, I get:
>         
>          Easting: -16500.981 Northing: 222794.265
>         
>         which is 3.747 meters away.
>         
>         --
>         Roger Oberholtzer
>         
>         OPQ Systems / Ramböll RST
>         
>         Ramböll Sverige AB
>         Krukmakargatan 21
>         P.O. Box 17009
>         SE-104 62 Stockholm, Sweden
>         
>         Office: Int +46 10-615 60 20
>         Mobile: Int +46 70-815 1696
>         
>         _______________________________________________
>         Proj mailing list
>         Proj at lists.maptools.org
>         http://lists.maptools.org/mailman/listinfo/proj
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

-- 
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696



From dcesari at arpa.emr.it  Mon Jun  7 08:04:31 2010
From: dcesari at arpa.emr.it (Davide Cesari)
Date: Mon, 07 Jun 2010 17:04:31 +0200
Subject: [Proj] rotated pole ob_tran help needed!
Message-ID: <4C0D0A7F.9020108@arpa.emr.it>


Haileye wrote

> Hello All,
>
> I am trying to convert rotated pole coordinates to regular lat & lon coordinates. I have both coordinates, but am trying to get the right proj4 definition (or at least close). The rotated pole projection coordinates are defined as yc & xc, the projection description is described below:
>         double yc(yc) ;
>                 yc:axis = "Y" ;
>                 yc:standard_name = "grid_latitude" ;
>                 yc:long_name = "latitude in rotated grid" ;
>                 yc:units = "degrees" ;
>         double xc(xc) ;
>                 xc:axis = "X" ;
>                 xc:standard_name = "grid_longitude" ;
>                 xc:long_name = "longitude in rotated pole grid" ;
>                 xc:units = "degrees" ;
>         char rotated_pole ;
>                 rotated_pole:grid_mapping_name = "rotated_latitude_longitude" ;
>                 rotated_pole:grid_north_pole_latitude = 42.5 ;
>                 rotated_pole:grid_north_pole_longitude = 83. ;

Hi, I am quite new to proj and trying to use it probably for the same 
purpose as indicated here (processing of Numerical Weather Prediction 
model data on rotated grids), so I come back to this old thread. This is 
the link to the archive, in case it has been forgotten:

http://osgeo-org.1803224.n2.nabble.com/rotated-pole-ob-tran-help-needed-td4257959.html

I can reproduce haileye's result with the following command line 
parameters to proj:

invproj -f "%f" -m 57.295779506 +proj=ob_tran +o_proj=latlon +o_lon_p=83 
+o_lat_p=42.5 +lon_0=180
in> -127.163970947 12.5568675995
out> -33.880011	-28.379995

then the opposite transformation:

proj -f "%f" -m 57.295779506 +proj=ob_tran +o_proj=latlon +o_lon_p=83 
+o_lat_p=42.5 +lon_0=180
in> -33.880011	-28.379995
out> -127.163971	12.556868

-m 57.295779506 is needed for getting output or providing input in 
degrees, otherwise it is radians.
+lon_0=180 is required otherwise there is a shift of 180 degrees, 
probably because the transformation is underdetermined with only the 
given parameters?!

 From what I could understand, the point here is that the interpretation 
of pole coordinates is the opposite in the GIS/Cartography community and 
in the Numerical Weather Prediction community: in the first case they 
are the coordinates of the Earth NP in the map system, while in the 
second case they are the geographical coordinates of the rotated NP. For 
this reason the transformations are used in the opposite way as designed.
It would be nice to hear the opinion from some proj guru on whether this 
is a correct use, or a different approach should be used. I enclose the 
definition of "rotated grid" from the World Meteorological Organization" 
document, here Southern Pole is used and point (c), angle of rotation 
should be 0 in the examples examined here.

=== WMO specification ===
(6) Three parameters define a general latitude/longitude coordinate 
system, formed by a general rotation of the sphere. One
     choice for these parameters is:
     (a)  The geographic latitude in degrees of the southern pole of the 
coordinate system, θp for example;

     (b)  The geographic longitude in degrees of the southern pole of 
the coordinate system, λp for example;

     (c)  The angle of rotation in degrees about the new polar axis 
(measured clockwise when looking from the southern to
          the northern pole) of the coordinate system, assuming the new 
axis to have been obtained by first rotating the
          sphere through λp degrees about the geographic polar axis, and 
then rotating through (90 + θp) degrees so that
          the southern pole moved along the (previously rotated) 
Greenwich meridian.
=== end WMO specification ===

Thank you very much for your attention, bye, Davide

-- 
============================= Davide Cesari ============================
Servizio IdroMeteorologico ARPA Emilia Romagna
Area Modellistica Numerica e Radarmeteorologia
  Phone/Fax: +39 051525926/+39 0516497501
  E-mail:    dcesari at arpa.emr.it
  Home page: http://www.webalice.it/o.drofa/davide/
  Address:   ARPA-SIM, Viale Silvani 6, 40122 Bologna, Italy
========================================================================


This message has been scanned for malware by Websense. www.websense.com


From stephane.poirier at usherbrooke.ca  Mon Jun  7 15:07:49 2010
From: stephane.poirier at usherbrooke.ca (Stephane Poirier)
Date: Mon, 7 Jun 2010 18:07:49 -0400
Subject: [Proj] Fw: postgis-users Digest, Vol 98, Issue 6
Message-ID: <E48EE8B64FC24F8C8E5D0772D838E6C5@geog.local>

Hi All,

How can I determine the proper PROJ4 parameters considering I have the 
following projection parameters for my data files (see PARAM for the North 
American CRCM grid herein below my signature)? Is it documented somewhere 
within POSTGIS documentation? Or somewhere within PROJ4 documentation?

Here's the best hack I can come up with for the PROJ4 definition: 
Proj4js.defs["SR-ORG:6728"]="+proj=stere +lat_0=49.65698 +lat_ts=60 
+lon_0=-96.99443 +k=1 +x_0=-1300000 +y_0=100000 +ellps=WGS84 +datum=WGS84 
+units=m +no_defs"; But it is not valid. Need some help in adjusting these 
parameters. Are the basics PROJ4 parameters documented somewhere?.

Stephane

--------------------------------------------------------------------
Stephane Poirier, M.Sc. Optical Physics
Remote Sensing Application Software Developer
Geography Department, Burnside Hall
McGill University, Montreal, QC, Canada
http://geog.mcgill.ca
Stephane.Poirier2 at mcgill.ca
Cell. (514) 994-3532
Fax: (514) 509-8833
--------------------------------------------------------------------



PARAM for the North American Canadian Regional Climate Model (CRCM) grid:
"
     float yc(yc) ;
               yc:units = "m" ;
               yc:long_name = "y-coordinate of polar-stereographic
projection" ;
               yc:standard_name = "projection_y_coordinate" ;
               yc:axis = "y" ;
               yc:coordinate_defines = "point" ;
               yc:actual_range = 22500.f, 7807500.f ;
       float xc(xc) ;
               xc:units = "m" ;
               xc:long_name = "x-coordinate of polar-stereographic
projection" ;
               xc:standard_name = "projection_x_coordinate" ;
               xc:axis = "x" ;
               xc:coordinate_defines = "point" ;
               xc:actual_range = 22500.f, 8167500.f ;
           float lon(yc, xc) ;
               lon:units = "degrees_east" ;
               lon:long_name = "longitude" ;
               lon:standard_name = "longitude" ;
               lon:actual_range = 160.4761f, 332.2443f ;
       float lat(yc, xc) ;
               lat:units = "degrees_north" ;
               lat:long_name = "latitude" ;
               lat:standard_name = "latitude" ;
               lat:actual_range = 11.56135f, 87.47531f ;
       char polar_stereographic ;
               polar_stereographic:straight_vertical_longitude_from_pole =
245.f ;
               polar_stereographic:standard_parallel = 60.f ;
               polar_stereographic:false_easting = -2790000.f ;
               polar_stereographic:false_northing = -8113500.f ;
               polar_stereographic:hemisphere_of_standard_parallel = 1.f ;
               polar_stereographic:resolution_at_standard_parallel = 45000.f
;
"


Stephane 



From jrepetto at free.fr  Mon Jun  7 23:15:01 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Tue, 08 Jun 2010 08:15:01 +0200
Subject: [Proj] Fw: postgis-users Digest, Vol 98, Issue 6
In-Reply-To: <E48EE8B64FC24F8C8E5D0772D838E6C5@geog.local>
References: <E48EE8B64FC24F8C8E5D0772D838E6C5@geog.local>
Message-ID: <4C0DDFE5.6000101@free.fr>

On 06/08/10 00:07, Stephane Poirier wrote:
> Hi All,
>
> How can I determine the proper PROJ4 parameters considering I have the
> following projection parameters for my data files (see PARAM for the North
> American CRCM grid herein below my signature)? Is it documented somewhere
> within POSTGIS documentation? Or somewhere within PROJ4 documentation?
>
> Stephane

Bonjour Stéphane,

You can find the PROJ4 parameters for this projection on the 
spatialreference.org web site :
http://spatialreference.org/ref/sr-org/6728/proj4/
I am not sure they are valid, because they miss the +towgs84 parameter.

The documentation of the PROJ4 parameters is at 
http://trac.osgeo.org/proj/wiki/GenParms

Jean-Claude


From Mikael.Rittri at carmenta.com  Tue Jun  8 00:40:35 2010
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Tue, 8 Jun 2010 09:40:35 +0200
Subject: [Proj] TM06 for Portugal
In-Reply-To: <1275910704.28023.151.camel@acme.pacific>
References: <1266320435.3745.52.camel@acme.pacific><4FBEAF2799F44DB3906B6DF5FB3AA0B7@PCHP><1266323739.3745.78.camel@acme.pacific><8F23F861654A437D9EED357D6AFCDE41@PCHP><1266333252.3745.112.camel@acme.pacific><6a91fcb01002160934m4e88af07ka702f59dab11826b@mail.gmail.com><1266398836.1127.57.camel@acme.pacific><6a91fcb01002180524x518af47v737e90c88a630ab3@mail.gmail.com><1266507614.17319.92.camel@acme.pacific><1275896280.28023.35.camel@acme.pacific><AANLkTilH_XHGZVhaB3ZKNGaJnXCLzFpTxEbcHmCXs5Bt@mail.gmail.com>
	<1275910704.28023.151.camel@acme.pacific>
Message-ID: <FAF6E56B26D2044696772EBE89B1535101E0F4A1@posty.carmenta.se>

Roger Oberholtzer wrote:

> How would you convert WGS84 lat/long into TM06 
> northing/easting? I know that WGS84 is so close 
> to ETR89 here that one 'could' use the WGS84 values
> in the transform from ETRS89 to TM06. But how 
> would I do it the 'proper' way with proj? 

For this purpose, there are seven-parameter 
transformations that are time-dependent (since 
the ETRS89 follows the contintental drift of 
Eurasia, while WGS84 does not).  

The British Ordnance Survey cites the following 
datum shift from ITRS2005 to ETRS89: 

tX =  0.056 m
tY =  0.048 m
tZ = -0.037 m
rX =  0.000054 sec * deltatime
rY =  0.000518 sec * deltatime
rZ = -0.000781 sec * deltatime
s  =  0 ppm

where deltatime is the difference, in years, between 
the time when the ITRS2005 coordinates were observed,
and the fixed epoch of ETRS89, which is 1989.0. 
http://www.ordnancesurvey.co.uk/oswebsite/gps/information/coordinatesyst
emsinfo/guidecontents/guide6.html

For example, today its June 8, 2010, which is the 
159th day of the year, so expressed in decimal years
it is today 2010 + 159/365 = 2010.44.  So deltatime
would be 2010.44 - 1989.0 = 21.44.  

I believe ITRS2005 can be regarded as equivalent to 
WGS84 with centimeter accuracy (although I am a bit
out of my depth here).  If so, the datum shift can 
be interpreted as going from from WGS84 to ETRS89, 
and in Proj.4 we want to express it in the opposite
direction.  So we reverse all signs.  (The Ordnance 
Survey uses the same rotation sign convention as
Proj.4, so that is one worry less.)

So, as an accurate datum shift for ETRS89, we get 

  +towgs84=-0.056,-0.048,0.037, < -0.000054 * 21.44 >, < -0.000518 *
21.44 >, < 0.000781 * 21.44 >, 0

or 

  +towgs84=-0.056,-0.048,0.037,-0.00115776,-0.01110592,0.01674464,0

At least today.  

There may be more recent versions of this kind of 
transformation.  I believe they are known as 
"14 parameter transformations" in general.  
Also, there may be regional versions that are 
more accurate for Portugal.

Disclaimer: I am not a geodesist, and I haven't
tested this datum shift on any real data. 

Mikael Rittri
Carmenta AB
Sweden
www.carmenta.com

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Roger Oberholtzer
Sent: Monday, June 07, 2010 1:38 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] TM06 for Portugal

(full text at
http://lists.maptools.org/pipermail/proj/2010-June/005233.html )



From roger at opq.se  Tue Jun  8 23:07:25 2010
From: roger at opq.se (Roger Oberholtzer)
Date: Wed, 09 Jun 2010 08:07:25 +0200
Subject: [Proj] TM06 for Portugal
In-Reply-To: <FAF6E56B26D2044696772EBE89B1535101E0F4A1@posty.carmenta.se>
References: <1266320435.3745.52.camel@acme.pacific>
	<4FBEAF2799F44DB3906B6DF5FB3AA0B7@PCHP>
	<1266323739.3745.78.camel@acme.pacific>
	<8F23F861654A437D9EED357D6AFCDE41@PCHP>
	<1266333252.3745.112.camel@acme.pacific>
	<6a91fcb01002160934m4e88af07ka702f59dab11826b@mail.gmail.com>
	<1266398836.1127.57.camel@acme.pacific>
	<6a91fcb01002180524x518af47v737e90c88a630ab3@mail.gmail.com>
	<1266507614.17319.92.camel@acme.pacific>
	<1275896280.28023.35.camel@acme.pacific>
	<AANLkTilH_XHGZVhaB3ZKNGaJnXCLzFpTxEbcHmCXs5Bt@mail.gmail.com>
	<1275910704.28023.151.camel@acme.pacific>
	<FAF6E56B26D2044696772EBE89B1535101E0F4A1@posty.carmenta.se>
Message-ID: <1276063645.15609.7.camel@acme.pacific>

On Tue, 2010-06-08 at 09:40 +0200, Mikael Rittri wrote:
> Roger Oberholtzer wrote:
> 
> > How would you convert WGS84 lat/long into TM06 
> > northing/easting? I know that WGS84 is so close 
> > to ETR89 here that one 'could' use the WGS84 values
> > in the transform from ETRS89 to TM06. But how 
> > would I do it the 'proper' way with proj? 
> 
> For this purpose, there are seven-parameter 
> transformations that are time-dependent (since 
> the ETRS89 follows the contintental drift of 
> Eurasia, while WGS84 does not).  
> 
> The British Ordnance Survey cites the following 
> datum shift from ITRS2005 to ETRS89: 
> 
> tX =  0.056 m
> tY =  0.048 m
> tZ = -0.037 m
> rX =  0.000054 sec * deltatime
> rY =  0.000518 sec * deltatime
> rZ = -0.000781 sec * deltatime
> s  =  0 ppm
> 
> where deltatime is the difference, in years, between 
> the time when the ITRS2005 coordinates were observed,
> and the fixed epoch of ETRS89, which is 1989.0. 
> http://www.ordnancesurvey.co.uk/oswebsite/gps/information/coordinatesyst
> emsinfo/guidecontents/guide6.html
> 
> For example, today its June 8, 2010, which is the 
> 159th day of the year, so expressed in decimal years
> it is today 2010 + 159/365 = 2010.44.  So deltatime
> would be 2010.44 - 1989.0 = 21.44.  
> 
> I believe ITRS2005 can be regarded as equivalent to 
> WGS84 with centimeter accuracy (although I am a bit
> out of my depth here).  If so, the datum shift can 
> be interpreted as going from from WGS84 to ETRS89, 
> and in Proj.4 we want to express it in the opposite
> direction.  So we reverse all signs.  (The Ordnance 
> Survey uses the same rotation sign convention as
> Proj.4, so that is one worry less.)
> 
> So, as an accurate datum shift for ETRS89, we get 
> 
>   +towgs84=-0.056,-0.048,0.037, < -0.000054 * 21.44 >, < -0.000518 *
> 21.44 >, < 0.000781 * 21.44 >, 0
> 
> or 
> 
>   +towgs84=-0.056,-0.048,0.037,-0.00115776,-0.01110592,0.01674464,0

I have tried that. I now get the following. The Ref lines are the data I
have been provided. The Calc line is what I get with the statement
above. It was an improvement. 
                                 
PATAIAS:                                      
        Ref:    Latitude:   39.6871677778 Longitude:   -9.0025450000 Altitude:      0.000
        Ref:    Easting:       -74582.612 Northing:         2460.852 Altitude:      0.000
        Calc:   Easting:       -74583.114 Northing:         2460.470 Altitude:      0.012    0.631 meters from Ref
        Inv:    Latitude:   39.6871712662 Longitude:   -9.0025391909 Altitude:     -0.691                         
        Diff:               -0.0000034884              -0.0000058091                0.691                         

BARROCAL 2:
        Ref:    Latitude:   40.7508825000 Longitude:   -7.1747969444 Altitude:      0.000
        Ref:    Easting:        80930.409 Northing:       120655.780 Altitude:      0.000
        Calc:   Easting:        80930.751 Northing:       120654.564 Altitude:      0.012    1.263 meters from Ref
        Inv:    Latitude:   40.7508934786 Longitude:   -7.1748008314 Altitude:     -0.705                         
        Diff:               -0.0000109786               0.0000038870                0.705                         

BATEL:
        Ref:    Latitude:   38.7409769444 Longitude:   -8.9387027778 Altitude:      0.000
        Ref:    Easting:       -70039.439 Northing:      -102638.301 Altitude:      0.000
        Calc:   Easting:       -70040.321 Northing:      -102638.468 Altitude:      0.013    0.897 meters from Ref
        Inv:    Latitude:   38.7409785180 Longitude:   -8.9386926531 Altitude:     -0.750                         
        Diff:               -0.0000015735              -0.0000101246                0.750                         

CASCALHEIRA:
        Ref:    Latitude:   38.6597175000 Longitude:   -8.4014394444 Altitude:      0.000
        Ref:    Easting:       -23355.156 Northing:      -111932.822 Altitude:      0.000
        Calc:   Easting:       -23355.845 Northing:      -111933.048 Altitude:      0.014    0.725 meters from Ref
        Inv:    Latitude:   38.6597195517 Longitude:   -8.4014315342 Altitude:     -0.778                         
        Diff:               -0.0000020517              -0.0000079102                0.778                         

CRASTA ALTA:
        Ref:    Latitude:   39.9583455556 Longitude:   -8.8866494444 Altitude:      0.000
        Ref:    Easting:       -64387.200 Northing:        32480.388 Altitude:      0.000
        Calc:   Easting:       -64387.527 Northing:        32480.218 Altitude:      0.012    0.368 meters from Ref
        Inv:    Latitude:   39.9583471081 Longitude:   -8.8866456341 Altitude:     -0.680                         
        Diff:               -0.0000015525              -0.0000038104                0.680                         

FANADIA:
        Ref:    Latitude:   39.3653083333 Longitude:   -9.0732191667 Altitude:      0.000
        Ref:    Easting:       -81019.923 Northing:       -33212.510 Altitude:      0.000
        Calc:   Easting:       -81019.052 Northing:       -33213.931 Altitude:      0.012    1.667 meters from Ref
        Inv:    Latitude:   39.3653210517 Longitude:   -9.0732294452 Altitude:     -0.707                         
        Diff:               -0.0000127183               0.0000102785                0.707                         

MARCO GRANDE:
        Ref:    Latitude:   39.1389694444 Longitude:   -9.3360900000 Altitude:      0.000
        Ref:    Easting:      -104009.123 Northing:       -58072.988 Altitude:      0.000
        Calc:   Easting:      -104007.727 Northing:       -58074.495 Altitude:      0.012    2.054 meters from Ref
        Inv:    Latitude:   39.1389828464 Longitude:   -9.3361063738 Altitude:     -0.709                         
        Diff:               -0.0000134020               0.0000163738                0.709                         

NASCE ÁGUA:
        Ref:    Latitude:   39.2484761111 Longitude:   -7.2524100000 Altitude:      0.000
        Ref:    Easting:        76024.744 Northing:       -46237.481 Altitude:      0.000
        Calc:   Easting:        76024.440 Northing:       -46236.723 Altitude:      0.014    0.817 meters from Ref
        Inv:    Latitude:   39.2484692585 Longitude:   -7.2524065676 Altitude:     -0.792                         
        Diff:                0.0000068526              -0.0000034324                0.792                         

SALMANHA:
        Ref:    Latitude:   40.1534963889 Longitude:   -8.8332422222 Altitude:      0.000
        Ref:    Easting:       -59653.458 Northing:        54112.120 Altitude:      0.000
        Calc:   Easting:       -59653.634 Northing:        54112.029 Altitude:      0.012    0.198 meters from Ref
        Inv:    Latitude:   40.1534972202 Longitude:   -8.8332401686 Altitude:     -0.671                         
        Diff:               -0.0000008313              -0.0000020536                0.671                         

SANTA CRUZ:
        Ref:    Latitude:   41.6743830556 Longitude:   -8.3312663889 Altitude:      0.000
        Ref:    Easting:       -16498.151 Northing:       222796.720 Altitude:      0.000
        Calc:   Easting:       -16501.304 Northing:       222793.861 Altitude:      0.010    4.256 meters from Ref
        Inv:    Latitude:   41.6744088589 Longitude:   -8.3312286018 Altitude:     -0.601                         
        Diff:               -0.0000258033              -0.0000377871                0.601                         

These are the calculations with +towgs84=0,0,0,0,0,0,0:

PATAIAS:                                                                                                                                               
        Ref:    Latitude:   39.6871677778 Longitude:   -9.0025450000 Altitude:      0.000                                                              
        Ref:    Easting:       -74582.612 Northing:         2460.852 Altitude:      0.000                                                              
        Calc:   Easting:       -74582.779 Northing:         2460.870 Altitude:      0.000    0.168 meters from Ref                                     
        Inv:    Latitude:   39.6871676346 Longitude:   -9.0025430513 Altitude:      0.000                                                              
        Diff:                0.0000001432              -0.0000019487                0.000                                                              

BARROCAL 2:
        Ref:    Latitude:   40.7508825000 Longitude:   -7.1747969444 Altitude:      0.000
        Ref:    Easting:        80930.409 Northing:       120655.780 Altitude:      0.000
        Calc:   Easting:        80931.080 Northing:       120654.973 Altitude:      0.000    1.049 meters from Ref
        Inv:    Latitude:   40.7508898317 Longitude:   -7.1748047793 Altitude:      0.000                         
        Diff:               -0.0000073317               0.0000078348                0.000                         

BATEL:
        Ref:    Latitude:   38.7409769444 Longitude:   -8.9387027778 Altitude:      0.000
        Ref:    Easting:       -70039.439 Northing:      -102638.301 Altitude:      0.000
        Calc:   Easting:       -70039.980 Northing:      -102638.068 Altitude:      0.000    0.589 meters from Ref
        Inv:    Latitude:   38.7409748871 Longitude:   -8.9386965301 Altitude:      0.000                         
        Diff:                0.0000020573              -0.0000062476                0.000                         

CASCALHEIRA:
        Ref:    Latitude:   38.6597175000 Longitude:   -8.4014394444 Altitude:      0.000
        Ref:    Easting:       -23355.156 Northing:      -111932.822 Altitude:      0.000
        Calc:   Easting:       -23355.504 Northing:      -111932.645 Altitude:      0.000    0.390 meters from Ref
        Inv:    Latitude:   38.6597159166 Longitude:   -8.4014354406 Altitude:      0.000                         
        Diff:                0.0000015834              -0.0000040039                0.000                         

CRASTA ALTA:
        Ref:    Latitude:   39.9583455556 Longitude:   -8.8866494444 Altitude:      0.000
        Ref:    Easting:       -64387.200 Northing:        32480.388 Altitude:      0.000
        Calc:   Easting:       -64387.194 Northing:        32480.619 Altitude:      0.000    0.231 meters from Ref
        Inv:    Latitude:   39.9583434751 Longitude:   -8.8866494969 Altitude:      0.000                         
        Diff:                0.0000020804               0.0000000525                0.000                         

FANADIA:
        Ref:    Latitude:   39.3653083333 Longitude:   -9.0732191667 Altitude:      0.000
        Ref:    Easting:       -81019.923 Northing:       -33212.510 Altitude:      0.000
        Calc:   Easting:       -81018.715 Northing:       -33213.532 Altitude:      0.000    1.582 meters from Ref
        Inv:    Latitude:   39.3653174211 Longitude:   -9.0732333063 Altitude:      0.000                         
        Diff:               -0.0000090877               0.0000141397                0.000                         

MARCO GRANDE:
        Ref:    Latitude:   39.1389694444 Longitude:   -9.3360900000 Altitude:      0.000
        Ref:    Easting:      -104009.123 Northing:       -58072.988 Altitude:      0.000
        Calc:   Easting:      -104007.389 Northing:       -58074.096 Altitude:      0.000    2.058 meters from Ref
        Inv:    Latitude:   39.1389792184 Longitude:   -9.3361102241 Altitude:      0.000                         
        Diff:               -0.0000097740               0.0000202241                0.000                         

NASCE ÁGUA:
        Ref:    Latitude:   39.2484761111 Longitude:   -7.2524100000 Altitude:      0.000
        Ref:    Easting:        76024.744 Northing:       -46237.481 Altitude:      0.000
        Calc:   Easting:        76024.778 Northing:       -46236.315 Altitude:      0.000    1.166 meters from Ref
        Inv:    Latitude:   39.2484656142 Longitude:   -7.2524105282 Altitude:      0.000                         
        Diff:                0.0000104969               0.0000005282                0.000                         

SALMANHA:
        Ref:    Latitude:   40.1534963889 Longitude:   -8.8332422222 Altitude:      0.000
        Ref:    Easting:       -59653.458 Northing:        54112.120 Altitude:      0.000
        Calc:   Easting:       -59653.301 Northing:        54112.430 Altitude:      0.000    0.347 meters from Ref
        Inv:    Latitude:   40.1534935866 Longitude:   -8.8332440316 Altitude:      0.000                         
        Diff:                0.0000028023               0.0000018094                0.000                         

SANTA CRUZ:
        Ref:    Latitude:   41.6743830556 Longitude:   -8.3312663889 Altitude:      0.000
        Ref:    Easting:       -16498.151 Northing:       222796.720 Altitude:      0.000
        Calc:   Easting:       -16500.981 Northing:       222794.265 Altitude:      0.000    3.747 meters from Ref
        Inv:    Latitude:   41.6744052195 Longitude:   -8.3312324714 Altitude:      0.000                         
        Diff:               -0.0000221639              -0.0000339175                0.000   


> At least today.  
> 
> There may be more recent versions of this kind of 
> transformation.  I believe they are known as 
> "14 parameter transformations" in general.  
> Also, there may be regional versions that are 
> more accurate for Portugal.

I am wondering if this is the case. I have not been successful getting
this information. I think the software they use is a black box to them,
and so they do not know where to look to find the settings they really
use. Sigh...

> 
> Disclaimer: I am not a geodesist, and I haven't
> tested this datum shift on any real data. 
> 
> Mikael Rittri
> Carmenta AB
> Sweden
> www.carmenta.com
> 
> -----Original Message-----
> From: proj-bounces at lists.maptools.org
> [mailto:proj-bounces at lists.maptools.org] On Behalf Of Roger Oberholtzer
> Sent: Monday, June 07, 2010 1:38 PM
> To: PROJ.4 and general Projections Discussions
> Subject: Re: [Proj] TM06 for Portugal
> 
> (full text at
> http://lists.maptools.org/pipermail/proj/2010-June/005233.html )
> 

-- 
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696



From warmerdam at pobox.com  Thu Jun 10 19:00:16 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 10 Jun 2010 22:00:16 -0400
Subject: [Proj] threadsafety and PROJ.4 - the projCtx API Update
Message-ID: <4C1198B0.1080807@pobox.com>

Folks,

For a project I'm involved in (a spatial capability for Ingres), it is
desirable to make PROJ.4 threadsafe.  In the past some work has been
done to protect some parts of PROJ.4 with mutexes (ie. grid loading
code).  However, at least one major hole remained in the thread safety
of the library, and that was the use of "pj_errno" as a global error
variable.  It is not only used to report to the application, but also
for various internal checks.

I have struggled for a while with how to address this, and I have decided
to implement a sort of thread context structure in PROJ.4 called projCtx.
It includes a "last error" variable which is intended to replace use of
pj_errno within the library and for applications that wish to support
multi-threading.

I have written up a page on this, and just committed preliminary
implementation of this structure.

   http://trac.osgeo.org/proj/wiki/ThreadSafety
   http://trac.osgeo.org/proj/changeset/1854

The short story is that applications which don't care about thread safety
can continue to call the API as they do now.  Those that do care, can create
a projCtx with pj_ctx_alloc(), and then call pj_init_ctx() or
pj_init_plus_ctx() with that context.  These functions push a pointer to
the context into the projPJ structure so it is not necessary to be aware
of the context in other parts of the high level API.

I must confess I've just gone ahead and done this without seeking
permission, but if there are strong reasons not to use this approach
I'd consider backing it out in favor of another solution.   So I'm seeking
feedback on the approach and if anyone sees other problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From support.mn at elisanet.fi  Thu Jun 10 23:52:07 2010
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Fri, 11 Jun 2010 09:52:07 +0300 (EEST)
Subject: [Proj] threadsafety and PROJ.4 - the projCtx API Update
Message-ID: <18779463.14704951276239127907.JavaMail.support.mn@elisanet.fi>

Hello,

Frank, it is ok as long as you keep it downward compatible.
We mostly just call proj-4 from within a single thread so
we don't usually have any problems.

Regards: Janne

------------------------------------

Frank Warmerdam [warmerdam at pobox.com] kirjoitti: 
> Folks,
> 
> For a project I'm involved in (a spatial capability for Ingres), it is
> desirable to make PROJ.4 threadsafe.  In the past some work has been
> done to protect some parts of PROJ.4 with mutexes (ie. grid loading
> code).  However, at least one major hole remained in the thread safety
> of the library, and that was the use of "pj_errno" as a global error
> variable.  It is not only used to report to the application, but also
> for various internal checks.
> 
> I have struggled for a while with how to address this, and I have decided
> to implement a sort of thread context structure in PROJ.4 called projCtx.
> It includes a "last error" variable which is intended to replace use of
> pj_errno within the library and for applications that wish to support
> multi-threading.
> 
> I have written up a page on this, and just committed preliminary
> implementation of this structure.
> 
>    http://trac.osgeo.org/proj/wiki/ThreadSafety
>    http://trac.osgeo.org/proj/changeset/1854
> 
> The short story is that applications which don't care about thread safety
> can continue to call the API as they do now.  Those that do care, can create
> a projCtx with pj_ctx_alloc(), and then call pj_init_ctx() or
> pj_init_plus_ctx() with that context.  These functions push a pointer to
> the context into the projPJ structure so it is not necessary to be aware
> of the context in other parts of the high level API.
> 
> I must confess I've just gone ahead and done this without seeking
> permission, but if there are strong reasons not to use this approach
> I'd consider backing it out in favor of another solution.   So I'm seeking
> feedback on the approach and if anyone sees other problems.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 



From glynn at gclements.plus.com  Fri Jun 11 03:54:24 2010
From: glynn at gclements.plus.com (Glynn Clements)
Date: Fri, 11 Jun 2010 11:54:24 +0100
Subject: [Proj] threadsafety and PROJ.4 - the projCtx API Update
In-Reply-To: <4C1198B0.1080807@pobox.com>
References: <4C1198B0.1080807@pobox.com>
Message-ID: <19474.5600.646802.671108@cerise.gclements.plus.com>


Frank Warmerdam wrote:

> For a project I'm involved in (a spatial capability for Ingres), it is
> desirable to make PROJ.4 threadsafe.  In the past some work has been
> done to protect some parts of PROJ.4 with mutexes (ie. grid loading
> code).  However, at least one major hole remained in the thread safety
> of the library, and that was the use of "pj_errno" as a global error
> variable.  It is not only used to report to the application, but also
> for various internal checks.

> I must confess I've just gone ahead and done this without seeking
> permission, but if there are strong reasons not to use this approach
> I'd consider backing it out in favor of another solution.   So I'm seeking
> feedback on the approach and if anyone sees other problems.

Is there a reason for not using thread-local state, as is done for
errno?

-- 
Glynn Clements <glynn at gclements.plus.com>


From gdt at ir.bbn.com  Fri Jun 11 05:36:54 2010
From: gdt at ir.bbn.com (Greg Troxel)
Date: Fri, 11 Jun 2010 08:36:54 -0400
Subject: [Proj] threadsafety and PROJ.4 - the projCtx API Update
In-Reply-To: <19474.5600.646802.671108@cerise.gclements.plus.com> (Glynn
	Clements's message of "Fri, 11 Jun 2010 11:54:24 +0100")
References: <4C1198B0.1080807@pobox.com>
	<19474.5600.646802.671108@cerise.gclements.plus.com>
Message-ID: <rmizkz13fvd.fsf@fnord.ir.bbn.com>


  Is there a reason for not using thread-local state, as is done for
  errno?

My impression is that not all platforms that support threads have solid
tls support.
But that may not be a good reason not to use the standard feature.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100611/31bea843/attachment.sig>

From warmerdam at pobox.com  Fri Jun 11 05:52:41 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 11 Jun 2010 08:52:41 -0400
Subject: [Proj] threadsafety and PROJ.4 - the projCtx API Update
In-Reply-To: <rmizkz13fvd.fsf@fnord.ir.bbn.com>
References: <4C1198B0.1080807@pobox.com>
	<19474.5600.646802.671108@cerise.gclements.plus.com>
	<rmizkz13fvd.fsf@fnord.ir.bbn.com>
Message-ID: <4C123199.9050501@pobox.com>

Greg Troxel wrote:
>   Is there a reason for not using thread-local state, as is done for
>   errno?
> 
> My impression is that not all platforms that support threads have solid
> tls support.
> But that may not be a good reason not to use the standard feature.

Glynn / Greg,

I did a review of thread local variable support on different platforms
several years ago and came to the conclusion that it was not available
cross platform.   I'm assuming this is still the case.  So this is
intended to be a cross platform solution.

I would add that this also gives the opportunity for some other future
facilities like context specific loggers that might be mildly useful.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ckarney at Sarnoff.com  Sun Jun 13 19:49:10 2010
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Sun, 13 Jun 2010 22:49:10 -0400
Subject: [Proj] Spheroidal gnomonic projection
In-Reply-To: <ssr7hmi7ios.fsf@puffin.sarnoff.com>
References: <ssr7hmi7ios.fsf@puffin.sarnoff.com>
Message-ID: <CED6B4B383C5F0418DAFEA443A0033C2F90E2794C8@MALIBU.sarnoff.internal>

I've tracked down another ellipsoidal gnomonic projection

  I. G. Letoval'tsev, Generalization of the Gnomonic Projection for a
  Spheroid and the Principal Geodetic Problems Involved in the Alignment
  of Surface Routes, Geodesy and Aerophotography (5), 271-274 (1963).

As described by Bugayevskiy and Snyder, this consists of a conformal
projection to a sphere followed by a central projection onto a tangent
plane.  However, on reading the paper I see that there's an important
wrinkle: the conformal projection is offset in latitude in order to make
the geographic and conformal latitudes match at the center point
(instead of the equator), i.e.,

  asinh(tan(beta)) = asinh(tan(phi)) 
         - e * ( atanh( e * sin(phi) ) - atanh( e * sin(phi0) ) )

With this projection, normal sections are mapped to straight lines.  The
maximum error in the direction of a geodesic within a radius r of the
center point scales as f*(r/a)^2.

In summary, we have 3 ellipsoidal gnomonic projections

* center projection, Williams (1998)
  great ellipses are straight
  error in azimuth for geodesics = f*(r/a) = 108" for r = 1000km

* conformal mapping, Letoval'tsev (1963)
  normal sections through center point are straight
  error in azimuth for geodesics = f*(r/a)^2 = 17.4" for r = 1000km

* geodesic mapping, Karney (2010)
  geodesics through center point are straight
  error in azimuth for geodesics = 0.4*f*(r/a)^3 = 1.04" for r = 1000km

Postscript: The affiliation of Letoval'tsev is listed as "Moscow
Institute of Railroad Transportation Engineers".  I wonder how often you
see "Railroad" appearing in the addresses of articles on geodesy
nowadays.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662

From ndzinn at comcast.net  Mon Jun 14 06:25:37 2010
From: ndzinn at comcast.net (Noel Zinn)
Date: Mon, 14 Jun 2010 08:25:37 -0500
Subject: [Proj] Spheroidal gnomonic projection
In-Reply-To: <CED6B4B383C5F0418DAFEA443A0033C2F90E2794C8@MALIBU.sarnoff.internal>
References: <ssr7hmi7ios.fsf@puffin.sarnoff.com>
	<CED6B4B383C5F0418DAFEA443A0033C2F90E2794C8@MALIBU.sarnoff.internal>
Message-ID: <05FFA359D2874F50BD854FB4C71CECB9@PowerSpec>

Charles,

Here's an algorithm for an ellipsoidal gnomonic that is a direct perspective
from the geocenter through the ellipsoid onto the tangential plane via ECEF,
topocentric coordinates and a little matrix algebra.  No intermediate
mappings.  No truncations.  No approximations.  

Choose an oblique point of tangency (lat, lon, hgt=0).  Compute the ECEF XYZ
as you have described.  Define that as (0,0,0) topocentric UVW.  Chose a
point to the east (100000,0,0) and a point to the north (0,100000,0).
Convert these points from topocentric UVW to ECEF XYZ.  EPSG Guidance Note
7-2 Section 2.2.2 will do (www.epsg.org) or, if Bugayevskiy and Snyder is
your slug of vodka, use the equations on page 3 (less elegant).  You now
have three points in ECEF XYZ that define the tangential plane.  Any point
on the ellipsoid can be converted to ECEF XYZ.  The geocenter is (0,0,0) in
ECEF XYZ.  Those two points define the perspective ray.  Now, we need the
point of intersection of the ray with the plane.  Wikipedia
(http://en.wikipedia.org/wiki/Line-plane_intersection) provides the answer,
which requires the inversion of a 3x3 matrix, but we've already computed all
the required xyz points.  Multiply the parameter 't' (throw away 'u' and
'v') by the ECEF XYZ coordinates of the point on the ellipsoid to get the
ECEF XYZ coordinates on the tangential plane.  Convert those XYZ coordinates
to topocentric UVW.  The W will be zero (because we're on the plane).  The U
and V coordinates are our ellipsoidal gnomonic Easting and Northing.  

On the 'downloads' page of my website (link below) I've posted a
presentation containing a mapping of some simple North American coastline
culture in the ellipsoidal gnomonic perspective projection and the essential
Matlab code that accomplishes this.  You may prefer to use Octave.
Assessing the linearity of a geodesic on this implementation is left as an
exercise for the interested.  

Regards,
Noel Zinn, Principal
Hydrometronics LLC, Consultancy and Technical Software
+1-832-539-1472, noel.zinn at hydrometronics.com
http://www.hydrometronics.com

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Karney, Charles
Sent: Sunday, June 13, 2010 9:49 PM
To: proj at lists.maptools.org
Cc: deakin at rmit.edu.au; knud.poder at mail.dk; Craig.M.Rollins at nga.mil
Subject: Re: [Proj] Spheroidal gnomonic projection

I've tracked down another ellipsoidal gnomonic projection

  I. G. Letoval'tsev, Generalization of the Gnomonic Projection for a
  Spheroid and the Principal Geodetic Problems Involved in the Alignment
  of Surface Routes, Geodesy and Aerophotography (5), 271-274 (1963).

As described by Bugayevskiy and Snyder, this consists of a conformal
projection to a sphere followed by a central projection onto a tangent
plane.  However, on reading the paper I see that there's an important
wrinkle: the conformal projection is offset in latitude in order to make
the geographic and conformal latitudes match at the center point
(instead of the equator), i.e.,

  asinh(tan(beta)) = asinh(tan(phi)) 
         - e * ( atanh( e * sin(phi) ) - atanh( e * sin(phi0) ) )

With this projection, normal sections are mapped to straight lines.  The
maximum error in the direction of a geodesic within a radius r of the
center point scales as f*(r/a)^2.

In summary, we have 3 ellipsoidal gnomonic projections

* center projection, Williams (1998)
  great ellipses are straight
  error in azimuth for geodesics = f*(r/a) = 108" for r = 1000km

* conformal mapping, Letoval'tsev (1963)
  normal sections through center point are straight
  error in azimuth for geodesics = f*(r/a)^2 = 17.4" for r = 1000km

* geodesic mapping, Karney (2010)
  geodesics through center point are straight
  error in azimuth for geodesics = 0.4*f*(r/a)^3 = 1.04" for r = 1000km

Postscript: The affiliation of Letoval'tsev is listed as "Moscow
Institute of Railroad Transportation Engineers".  I wonder how often you
see "Railroad" appearing in the addresses of articles on geodesy
nowadays.

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From ckarney at Sarnoff.com  Mon Jun 14 08:46:23 2010
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Mon, 14 Jun 2010 11:46:23 -0400
Subject: [Proj] Spheroidal gnomonic projection
In-Reply-To: <05FFA359D2874F50BD854FB4C71CECB9@PowerSpec>
References: <ssr7hmi7ios.fsf@puffin.sarnoff.com>
	<CED6B4B383C5F0418DAFEA443A0033C2F90E2794C8@MALIBU.sarnoff.internal>,
	<05FFA359D2874F50BD854FB4C71CECB9@PowerSpec>
Message-ID: <CED6B4B383C5F0418DAFEA443A0033C2F90E2794CB@MALIBU.sarnoff.internal>

Noel,

Thanks for the E-mail.  Your method is same as given by Roy Williams,
Geometry of Navigation (Horwood, Chichester, 1998), pp 29-37.  (Google
books will allow you to "preview" these pages.)

Incidentally the "neatest" way to project from a point to a plane is via
homogeneous 4-vectors.  A point X is given by [x, y, z, 1]^t (possibly
multiplied by a constant).  A plane P is defined by P^t.X = 0.  The
operation which projects a point X from a center point C onto a plane P
is given by

   Y = M.X

where

   M = (C^t.P) I - C.P^t

The nice thing about 4-vectors is that you can deal with orthogonal
projections (from a point at infinity) easily.

I've measured deviations of straight lines in this projection from
geodesics and within 1000km of the center point the errors in the
initial/final azimuths are up to 108".  This is OK, but not great.

The "geodesic" version (which, I might add, also entails no intermediate
mappings, no truncations, and no approximations) gets this error down to
1.04".  With the conformal method (also free of approximations), the
error is 17".

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662


From ckarney at Sarnoff.com  Mon Jun 14 11:08:44 2010
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Mon, 14 Jun 2010 14:08:44 -0400
Subject: [Proj] Deepwater Horizon.  Where is the bottom of the well?
Message-ID: <CED6B4B383C5F0418DAFEA443A0033C2F90E2794CC@MALIBU.sarnoff.internal>

Here are some questions related to the Deepwater Horizon accident and
the drilling of relief wells for the readers of this list in the oil
industry.

(1) What is the method of determining the position of an instrument 3km
down a well?  Is it seismic, dead reckoning, or what?

(2) What is the typical absolute accuracy of the measured position,
horizontally and vertically (and, if possible, specifically with
reference to the leaking well)?  What is the *relative* accuracy?
(I.e., I can imagine that the absolute accuracy is poor because of the
unknown properties of the intervening rock.  However, it might be
possible to "find" the same position when drilling the relief well if
the same method is used.)

(3) Is the drill bit instrumented to return the position?  How?  Or does
a separate logging package need to be inserted into the well?  At what
frequency would this be done?

I can piece together some of the answers from wikipedia.  However, maybe
I can get more autoritative and more specific answers from this list.

	  --Charles

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662

From cjmce at lsu.edu  Mon Jun 14 11:54:03 2010
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Mon, 14 Jun 2010 13:54:03 -0500
Subject: [Proj] Deepwater Horizon.  Where is the bottom of the well?
References: <CED6B4B383C5F0418DAFEA443A0033C2F90E2794CC@MALIBU.sarnoff.internal>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7026A6257@email002.lsu.edu>

Inertial systems and their accuracies degrade as a function of time, so it's pretty easy to calculate the expected error envelope in all three components.  Numerous ZUPTs  (Zero velocity Update PoinTs) can help.  The fiber optic ring lasers with absolutely zero moving parts, although more expensive, are the best alternative to the ring laser gyros that indeed have one moving part.
 
I do not know if IXsea has any downhole applications yet, though ...
 
I used to sell UTM/State Plane transformation software that would run on an HP-41 calculator to Directional Drilling companies in the Gulf of Mexico about 25 years ago.  They were quite concerned with correcting for magnetic declination and Grid System convergence angles back then before small inertial strapdown packages were available for non-DoD applications.
 
Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3223A
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 238-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group


________________________________

From: proj-bounces at lists.maptools.org on behalf of Karney, Charles
Sent: Mon 14-Jun-10 13:08
To: PROJ.4 and general Projections Discussions
Subject: [Proj] Deepwater Horizon. Where is the bottom of the well?



Here are some questions related to the Deepwater Horizon accident and
the drilling of relief wells for the readers of this list in the oil
industry.

(1) What is the method of determining the position of an instrument 3km
down a well?  Is it seismic, dead reckoning, or what?

(2) What is the typical absolute accuracy of the measured position,
horizontally and vertically (and, if possible, specifically with
reference to the leaking well)?  What is the *relative* accuracy?
(I.e., I can imagine that the absolute accuracy is poor because of the
unknown properties of the intervening rock.  However, it might be
possible to "find" the same position when drilling the relief well if
the same method is used.)

(3) Is the drill bit instrumented to return the position?  How?  Or does
a separate logging package need to be inserted into the well?  At what
frequency would this be done?

I can piece together some of the answers from wikipedia.  However, maybe
I can get more autoritative and more specific answers from this list.

          --Charles

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100614/ece8aa4e/attachment.html>

From jt_kilroy at yahoo.com  Mon Jun 14 12:03:54 2010
From: jt_kilroy at yahoo.com (James Kilroy)
Date: Mon, 14 Jun 2010 14:03:54 -0500
Subject: [Proj] Trouble integrating Proj4 into application
Message-ID: <00c701cb0bf4$562174b0$0a00a8c0@jaysxpc>

Hello All,
 
My name is James Kilroy and I am a brand new user of Proj4.  I have an
extensive GIS back ground so I have a good grasp of the concepts, and I have
been coding professionally (C/C++) for over 20 years.  I have installed the
code base for Proj4 on my Linux server (Fedora, very recent build).  The
build went without a hitch, all programs test out fine.  My problem is I
can't get the lib to compile into my project.  Keeps giving me lib not found
errors, though the lib is built, in place, and has proper permissions.  Are
there any specific compiler directives required or ENV variables that are
needed that I am not aware of?
 
Thanks,
 
James Kilroy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100614/8a345aac/attachment.html>

From ericnico.david at gmail.com  Mon Jun 14 12:17:22 2010
From: ericnico.david at gmail.com (nicolas david)
Date: Mon, 14 Jun 2010 21:17:22 +0200
Subject: [Proj] Trouble integrating Proj4 into application
In-Reply-To: <00c701cb0bf4$562174b0$0a00a8c0@jaysxpc>
References: <00c701cb0bf4$562174b0$0a00a8c0@jaysxpc>
Message-ID: <AANLkTinm_bO3vbrj2UejVmTpQUD5C_AEX_o09aLBAPSE@mail.gmail.com>

Hi

I've done quite same thing recently ( debian and ubuntu) and don't have any
specific problems.
a) you have to take care when including proj4 files, because it's an ANSI C
library and not a C++ lib. So, within a C++ project you have to use
proj_api.h.
b) Concerning ENV variable. I know two of them and one is needed in order to
find data file.
PROJ_LIB : path to your proj data file ( nad, epsg etc..)
PROJ_DEBUG : if set to 1 make proj4 more verbose.

Hope it's helpful.

Nicolas David

2010/6/14 James Kilroy <jt_kilroy at yahoo.com>

>  Hello All,
>
> My name is James Kilroy and I am a brand new user of Proj4.  I have an
> extensive GIS back ground so I have a good grasp of the concepts, and I have
> been coding professionally (C/C++) for over 20 years.  I have installed the
> code base for Proj4 on my Linux server (Fedora, very recent build).  The
> build went without a hitch, all programs test out fine.  My problem is I
> can't get the lib to compile into my project.  Keeps giving me lib not found
> errors, though the lib is built, in place, and has proper permissions.  Are
> there any specific compiler directives required or ENV variables that are
> needed that I am not aware of?
>
> Thanks,
>
>  James Kilroy
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100614/1931fb3d/attachment.html>

From jt_kilroy at yahoo.com  Mon Jun 14 13:26:15 2010
From: jt_kilroy at yahoo.com (James Kilroy)
Date: Mon, 14 Jun 2010 13:26:15 -0700 (PDT)
Subject: [Proj] Trouble integrating Proj4 into application
In-Reply-To: <AANLkTinm_bO3vbrj2UejVmTpQUD5C_AEX_o09aLBAPSE@mail.gmail.com>
References: <00c701cb0bf4$562174b0$0a00a8c0@jaysxpc>
	<AANLkTinm_bO3vbrj2UejVmTpQUD5C_AEX_o09aLBAPSE@mail.gmail.com>
Message-ID: <380132.94378.qm@web53008.mail.re2.yahoo.com>

Thanks, I'll look at the ENV variables a bit more.  I am already using proj_api.h for my include.

 James T. Kilroy
Instrumental Solutions Inc.
721 China St.
Vicksburg MS 39183


(Office) 601-636-1637
(Cell) 601-415-0589




________________________________
From: nicolas david <ericnico.david at gmail.com>
To: PROJ.4 and general Projections Discussions <proj at lists.maptools.org>
Sent: Mon, June 14, 2010 2:17:22 PM
Subject: Re: [Proj] Trouble integrating Proj4 into application

Hi

I've done quite same thing recently ( debian and ubuntu) and don't have any specific problems. 
a) you have to take care when including proj4 files, because it's an ANSI C library and not a C++ lib. So, within a C++ project you have to use proj_api.h.
b) Concerning ENV variable. I know two of them and one is needed in order to find data file. 
PROJ_LIB : path to your proj data file ( nad, epsg etc..)
PROJ_DEBUG : if set to 1 make proj4 more verbose.

Hope it's helpful.

Nicolas David


2010/6/14 James Kilroy <jt_kilroy at yahoo.com>

>
>
>
>
>
>
>Hello 
>All,
> 
>My name is James 
>Kilroy and I am a brand new user of Proj4.  I have an extensive GIS back 
>ground so I have a good grasp of the concepts, and I have been coding 
>professionally (C/C++) for over 20 years.  I have installed the code base 
>for Proj4 on my Linux server (Fedora, very recent build).  The build went 
>without a hitch, all programs test out fine.  My problem is I can't get the 
>lib to compile into my project.  Keeps giving me lib not found errors, 
>though the lib is built, in place, and has proper permissions.  Are there 
>any specific compiler directives required or ENV variables that are needed that 
>I am not aware of?
> 
>Thanks,
> James 
>Kilroy
>_______________________________________________
>>Proj mailing list
>Proj at lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100614/54c251e4/attachment.html>

From EMiller at dfg.ca.gov  Mon Jun 14 14:27:06 2010
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Mon, 14 Jun 2010 14:27:06 -0700
Subject: [Proj] Trouble integrating Proj4 into application
In-Reply-To: <00c701cb0bf4$562174b0$0a00a8c0@jaysxpc>
References: <00c701cb0bf4$562174b0$0a00a8c0@jaysxpc>
Message-ID: <4C163C3A.95FD.00E4.0@dfg.ca.gov>

James,

If I understand your message, you are having a build error, not a runtime problem. I think you might be missing the library search path for the linker (-L/usr/local/proj4/lib or whatever).  It probably is similar to whatever you used for the include search path (-I/usr/local/proj4/include or whatever).
-- 

Eric G. Miller
Staff Programmer
CA Dept. of Fish & Game


>>> On 6/14/2010 at 12:03 PM, "James Kilroy" <jt_kilroy at yahoo.com> wrote:
> Hello All,
>  
> My name is James Kilroy and I am a brand new user of Proj4.  I have an
> extensive GIS back ground so I have a good grasp of the concepts, and I have
> been coding professionally (C/C++) for over 20 years.  I have installed the
> code base for Proj4 on my Linux server (Fedora, very recent build).  The
> build went without a hitch, all programs test out fine.  My problem is I
> can't get the lib to compile into my project.  Keeps giving me lib not found
> errors, though the lib is built, in place, and has proper permissions.  Are
> there any specific compiler directives required or ENV variables that are
> needed that I am not aware of?
>  
> Thanks,
>  
> James Kilroy



From jt_kilroy at yahoo.com  Mon Jun 14 15:12:44 2010
From: jt_kilroy at yahoo.com (James Kilroy)
Date: Mon, 14 Jun 2010 17:12:44 -0500
Subject: [Proj] Trouble integrating Proj4 into application
In-Reply-To: <AANLkTinm_bO3vbrj2UejVmTpQUD5C_AEX_o09aLBAPSE@mail.gmail.com>
Message-ID: <00ec01cb0c0e$b7374800$0a00a8c0@jaysxpc>

So I have my code comiling and linking fine at this point, thanks for the
assistance.  Now any pointers on how to get my application to find the .so
file?  The .so is in the same directory as the lib file and the PROJ_LIB
points to that directory.  Permissions are such that the .so is rw.
 
Thanks,
 
James Kilroy

-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of nicolas david
Sent: Monday, June 14, 2010 2:17 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Trouble integrating Proj4 into application


Hi

I've done quite same thing recently ( debian and ubuntu) and don't have any
specific problems. 
a) you have to take care when including proj4 files, because it's an ANSI C
library and not a C++ lib. So, within a C++ project you have to use
proj_api.h.
b) Concerning ENV variable. I know two of them and one is needed in order to
find data file. 
PROJ_LIB : path to your proj data file ( nad, epsg etc..)
PROJ_DEBUG : if set to 1 make proj4 more verbose.

Hope it's helpful.

Nicolas David


2010/6/14 James Kilroy <jt_kilroy at yahoo.com>


Hello All,
 
My name is James Kilroy and I am a brand new user of Proj4.  I have an
extensive GIS back ground so I have a good grasp of the concepts, and I have
been coding professionally (C/C++) for over 20 years.  I have installed the
code base for Proj4 on my Linux server (Fedora, very recent build).  The
build went without a hitch, all programs test out fine.  My problem is I
can't get the lib to compile into my project.  Keeps giving me lib not found
errors, though the lib is built, in place, and has proper permissions.  Are
there any specific compiler directives required or ENV variables that are
needed that I am not aware of?
 
Thanks,
 


James Kilroy

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



No virus found in this incoming message.
Checked by AVG - www.avg.com
Version: 8.5.437 / Virus Database: 271.1.1/2929 - Release Date: 06/14/10
06:35:00




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100614/c58f7d7a/attachment.html>

From ndzinn at comcast.net  Mon Jun 14 15:46:05 2010
From: ndzinn at comcast.net (Noel Zinn)
Date: Mon, 14 Jun 2010 17:46:05 -0500
Subject: [Proj] Deepwater Horizon.  Where is the bottom of the well?
In-Reply-To: <CED6B4B383C5F0418DAFEA443A0033C2F90E2794CC@MALIBU.sarnoff.internal>
References: <CED6B4B383C5F0418DAFEA443A0033C2F90E2794CC@MALIBU.sarnoff.internal>
Message-ID: <F8126A664D27475C924503F191ACD0C0@PowerSpec>

A lot of science goes into wellbore surveying nowadays, and that applies to
assessing the quality of the survey, too.  Wells are surveyed while drilling
(MWD, measurement while drilling) with instruments in the bottom hole
assembly (BHA) that includes the drill bit.  Typically, those instruments
are magnetometers (magnetic azimuth) and accelerometers (inclination).
Wells are also surveyed when the BHA has "tripped out" with instruments
(typically gyros for true azimuth and accelerometers) that are lowered on a
wire line.  Distance along the wellbore trajectory (measured depth, MD) is
determined by drilling pipe tally or wire line length.  All these
instruments have biases that must be compensated and different random errors
that must be propagated from surface to TD (total depth).  Stochastic models
for MWD and gyro surveys have been published by the Industry Steering
Committee for Wellbore Survey Accuracy (ISCWSA), which is now the Wellbore
Survey Accuracy Technical Committee of the Society of Petroleum Engineers
(SPE).  BP provided early leadership of the ISCWSA.  For more information
follow this link => http://www.iscwsa.org/.  Given all this technology,
there are also geodetic and cartographic corrections that must be applied,
especially with deviated, extended-reach wells, which are common in deep
water.  

Regards,
Noel Zinn, Principal
Hydrometronics LLC, Consultancy and Technical Software
+1-832-539-1472, noel.zinn at hydrometronics.com
http://www.hydrometronics.com


-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Karney, Charles
Sent: Monday, June 14, 2010 1:09 PM
To: PROJ.4 and general Projections Discussions
Subject: [Proj] Deepwater Horizon. Where is the bottom of the well?

Here are some questions related to the Deepwater Horizon accident and
the drilling of relief wells for the readers of this list in the oil
industry.

(1) What is the method of determining the position of an instrument 3km
down a well?  Is it seismic, dead reckoning, or what?

(2) What is the typical absolute accuracy of the measured position,
horizontally and vertically (and, if possible, specifically with
reference to the leaking well)?  What is the *relative* accuracy?
(I.e., I can imagine that the absolute accuracy is poor because of the
unknown properties of the intervening rock.  However, it might be
possible to "find" the same position when drilling the relief well if
the same method is used.)

(3) Is the drill bit instrumented to return the position?  How?  Or does
a separate logging package need to be inserted into the well?  At what
frequency would this be done?

I can piece together some of the answers from wikipedia.  However, maybe
I can get more autoritative and more specific answers from this list.

	  --Charles

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From ericnico.david at gmail.com  Mon Jun 14 23:31:12 2010
From: ericnico.david at gmail.com (nicolas david)
Date: Tue, 15 Jun 2010 08:31:12 +0200
Subject: [Proj] Trouble integrating Proj4 into application
In-Reply-To: <00ec01cb0c0e$b7374800$0a00a8c0@jaysxpc>
References: <AANLkTinm_bO3vbrj2UejVmTpQUD5C_AEX_o09aLBAPSE@mail.gmail.com>
	<00ec01cb0c0e$b7374800$0a00a8c0@jaysxpc>
Message-ID: <AANLkTinhR5kVcot8PP6q1vmfJTa-D65cM5JoJECk-QY_@mail.gmail.com>

on terminal try to see which shared libraries are found with the "ldd"
utility :
 $ ldd my_program

The path to shared librairies could be configured with the /etc/ld.so.conf
file. Standart paths are "/usr/lib" and "/usr/local/lib". If you change
theses paths you need to run "/sbin/ldconfig" or re-run your terminal to
take this change into account.
Another way is to copy or sym-link your librairies on the same directory
that your program/executable.

REM : PROJ_LIB is not the directory of the .so file, but the path to the
data file ( the epsg / nad27 files for example).

2010/6/15 James Kilroy <jt_kilroy at yahoo.com>

>  So I have my code comiling and linking fine at this point, thanks for the
> assistance.  Now any pointers on how to get my application to find the .so
> file?  The .so is in the same directory as the lib file and the PROJ_LIB
> points to that directory.  Permissions are such that the .so is rw.
>
> Thanks,
>
> James Kilroy
>
>  -----Original Message-----
> *From:* proj-bounces at lists.maptools.org [mailto:
> proj-bounces at lists.maptools.org] *On Behalf Of *nicolas david
> *Sent:* Monday, June 14, 2010 2:17 PM
> *To:* PROJ.4 and general Projections Discussions
> *Subject:* Re: [Proj] Trouble integrating Proj4 into application
>
> Hi
>
> I've done quite same thing recently ( debian and ubuntu) and don't have any
> specific problems.
> a) you have to take care when including proj4 files, because it's an ANSI C
> library and not a C++ lib. So, within a C++ project you have to use
> proj_api.h.
> b) Concerning ENV variable. I know two of them and one is needed in order
> to find data file.
> PROJ_LIB : path to your proj data file ( nad, epsg etc..)
> PROJ_DEBUG : if set to 1 make proj4 more verbose.
>
> Hope it's helpful.
>
> Nicolas David
>
> 2010/6/14 James Kilroy <jt_kilroy at yahoo.com>
>
>>  Hello All,
>>
>> My name is James Kilroy and I am a brand new user of Proj4.  I have an
>> extensive GIS back ground so I have a good grasp of the concepts, and I have
>> been coding professionally (C/C++) for over 20 years.  I have installed the
>> code base for Proj4 on my Linux server (Fedora, very recent build).  The
>> build went without a hitch, all programs test out fine.  My problem is I
>> can't get the lib to compile into my project.  Keeps giving me lib not found
>> errors, though the lib is built, in place, and has proper permissions.  Are
>> there any specific compiler directives required or ENV variables that are
>> needed that I am not aware of?
>>
>> Thanks,
>>
>>  James Kilroy
>>
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>>
>
> No virus found in this incoming message.
> Checked by AVG - www.avg.com
> Version: 8.5.437 / Virus Database: 271.1.1/2929 - Release Date: 06/14/10
> 06:35:00
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100615/5f53da7d/attachment.html>

From hamish_b at yahoo.com  Tue Jun 15 03:36:17 2010
From: hamish_b at yahoo.com (Hamish)
Date: Tue, 15 Jun 2010 03:36:17 -0700 (PDT)
Subject: [Proj] Trouble integrating Proj4 into application
Message-ID: <682995.58957.qm@web110014.mail.gq1.yahoo.com>

James wrote:
> I have installed the code base for Proj4 on my 
> Linux server (Fedora, very recent build).  The build went without a 
> hitch, all programs test out fine.  My problem is I can't get the lib 
> to compile into my project.  Keeps giving me lib not found errors,
> though the lib is built, in place, and has proper permissions.

you've encountered a classic:

1. add /usr/local/lib to /etc/ld.so.conf
2. as root run ldconfig.


regards,
Hamish


      


From ckarney at Sarnoff.com  Tue Jun 15 05:32:37 2010
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Tue, 15 Jun 2010 08:32:37 -0400
Subject: [Proj] Trouble integrating Proj4 into application
In-Reply-To: <682995.58957.qm@web110014.mail.gq1.yahoo.com>
References: <682995.58957.qm@web110014.mail.gq1.yahoo.com>
Message-ID: <CED6B4B383C5F0418DAFEA443A0033C2F90E2794D2@MALIBU.sarnoff.internal>

If you don't want to muck around with the system files, there are two
other possible solutions.

(1) Define LD_LIBRARY_PATH, with one of

  export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH
  export LD_LIBRARY_PATH=/usr/local/lib

(depending on whether LD_LIBRARY_PATH is already defined or not).  This
tells the program loader where to look for shared libraries with running
an executable.

(2) Alternatively, link with

  -Wl,"-rpath=/usr/local/lib" -L/usr/local/lib

The rpath command writes the search path for shared libraries into the
executable.

________________________________________
From: proj-bounces at lists.maptools.org [proj-bounces at lists.maptools.org] On Behalf Of Hamish [hamish_b at yahoo.com]
Sent: Tuesday, June 15, 2010 06:36
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Trouble integrating Proj4 into application

James wrote:
> I have installed the code base for Proj4 on my
> Linux server (Fedora, very recent build).  The build went without a
> hitch, all programs test out fine.  My problem is I can't get the lib
> to compile into my project.  Keeps giving me lib not found errors,
> though the lib is built, in place, and has proper permissions.

you've encountered a classic:

1. add /usr/local/lib to /etc/ld.so.conf
2. as root run ldconfig.


regards,
Hamish



_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From jt_kilroy at yahoo.com  Tue Jun 15 13:17:00 2010
From: jt_kilroy at yahoo.com (James Kilroy)
Date: Tue, 15 Jun 2010 13:17:00 -0700 (PDT)
Subject: [Proj] Trouble integrating Proj4 into application
In-Reply-To: <CED6B4B383C5F0418DAFEA443A0033C2F90E2794D2@MALIBU.sarnoff.internal>
References: <682995.58957.qm@web110014.mail.gq1.yahoo.com>
	<CED6B4B383C5F0418DAFEA443A0033C2F90E2794D2@MALIBU.sarnoff.internal>
Message-ID: <610020.56786.qm@web53004.mail.re2.yahoo.com>

Thanks for the help guys, got all of my issues worked out, the lib is working beautifully.  

 James T. Kilroy




----- Original Message ----
From: "Karney, Charles" <ckarney at Sarnoff.com>
To: PROJ.4 and general Projections Discussions <proj at lists.maptools.org>
Sent: Tue, June 15, 2010 7:32:37 AM
Subject: Re: [Proj] Trouble integrating Proj4 into application

If you don't want to muck around with the system files, there are two
other possible solutions.

(1) Define LD_LIBRARY_PATH, with one of

  export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH
  export LD_LIBRARY_PATH=/usr/local/lib

(depending on whether LD_LIBRARY_PATH is already defined or not).  This
tells the program loader where to look for shared libraries with running
an executable.

(2) Alternatively, link with

  -Wl,"-rpath=/usr/local/lib" -L/usr/local/lib

The rpath command writes the search path for shared libraries into the
executable.

________________________________________
From: proj-bounces at lists.maptools.org [proj-bounces at lists.maptools.org] On Behalf Of Hamish [hamish_b at yahoo.com]
Sent: Tuesday, June 15, 2010 06:36
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Trouble integrating Proj4 into application

James wrote:
> I have installed the code base for Proj4 on my
> Linux server (Fedora, very recent build).  The build went without a
> hitch, all programs test out fine.  My problem is I can't get the lib
> to compile into my project.  Keeps giving me lib not found errors,
> though the lib is built, in place, and has proper permissions.

you've encountered a classic:

1. add /usr/local/lib to /etc/ld.so.conf
2. as root run ldconfig.


regards,
Hamish



_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj



From ckarney at Sarnoff.com  Wed Jun 16 20:35:05 2010
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Wed, 16 Jun 2010 23:35:05 -0400
Subject: [Proj] Spheroidal gnomonic projection
In-Reply-To: <ssr7hmi7ios.fsf@puffin.sarnoff.com>
References: <ssr7hmi7ios.fsf@puffin.sarnoff.com>
Message-ID: <CED6B4B383C5F0418DAFEA443A0033C2F90E2794E0@MALIBU.sarnoff.internal>

> From: Charles Karney [ckarney at sarnoff.com]
> Sent: Tuesday, June 01, 2010 13:42
> 
> ...  The geodesic scale was introduced (I think) by
> 
>   G. V. Bagratuni,
>   Course in spheroidal geodesy,
>   FTD-MT-64-390 (US Air Force, 1967), Sec. 17
>   [Kurs sferoidicheskoi geodezii, (Moscow, 1962)].
>   http://handle.dtic.mil/100.2/AD650520
> 
> ...
> 
> Questions:
> 
> (4) Does anyone have a better copy of Bagratuni than the one given
>     above.  (I'll even take a good copy in the Russian original.)

My local library located a paper copy of Bagratuni, Course in spheroidal
geodesy.  I've scanned it at 400dpi and the scan is available at

  http://geographiclib.sourceforge.net/geodesic-papers/bagratuni67.pdf

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662


From strebe at aol.com  Wed Jun 16 20:45:57 2010
From: strebe at aol.com (strebe)
Date: Wed, 16 Jun 2010 20:45:57 -0700
Subject: [Proj] Spheroidal gnomonic projection
In-Reply-To: <CED6B4B383C5F0418DAFEA443A0033C2F90E2794E0@MALIBU.sarnoff.internal>
Message-ID: <CB9EA24F.E5BA.4D59.8D1F.2E77D42F8ACB@aol.com>


As always, thanks for posting these documents.

— daan Strebe


On Jun 16, 2010, at 8:35:05 PM, "Karney, Charles" <ckarney at Sarnoff.com> wrote:

From:   "Karney, Charles" <ckarney at Sarnoff.com>
Subject:    Re: [Proj] Spheroidal gnomonic projection
Date:   June 16, 2010 8:35:05 PM PDT
To: "proj at lists.maptools.org" <proj at lists.maptools.org>
Cc: "deakin at rmit.edu.au" <deakin at rmit.edu.au>, "knud.poder at mail.dk" <knud.poder at mail.dk>, "Craig.M.Rollins at nga.mil" <Craig.M.Rollins at nga.mil>
> From: Charles Karney [ckarney at sarnoff.com]
> Sent: Tuesday, June 01, 2010 13:42
> 
> ...  The geodesic scale was introduced (I think) by
> 
>   G. V. Bagratuni,
>   Course in spheroidal geodesy,
>   FTD-MT-64-390 (US Air Force, 1967), Sec. 17
>   [Kurs sferoidicheskoi geodezii, (Moscow, 1962)].
>   http://handle.dtic.mil/100.2/AD650520
> 
> ...
> 
> Questions:
> 
> (4) Does anyone have a better copy of Bagratuni than the one given
>     above.  (I'll even take a good copy in the Russian original.)

My local library located a paper copy of Bagratuni, Course in spheroidal
geodesy.  I've scanned it at 400dpi and the scan is available at

  http://geographiclib.sourceforge.net/geodesic-papers/bagratuni67.pdf

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100616/ef248eac/attachment.html>

From mfinn at usgs.gov  Sat Jun 19 17:18:25 2010
From: mfinn at usgs.gov (Michael P Finn)
Date: Sat, 19 Jun 2010 18:18:25 -0600
Subject: [Proj] Deepwater Horizon.  Where is the bottom of the well?
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7026A6257@email002.lsu.edu>
References: <CED6B4B383C5F0418DAFEA443A0033C2F90E2794CC@MALIBU.sarnoff.internal>
	<B597ADFC46B67741B18EA6AA13613FF7026A6257@email002.lsu.edu>
Message-ID: <OF94980FC0.33F7F035-ON87257748.0001A978-87257748.0001B0A5@usgs.gov>

Thanks. Very interesting.





From:
"Clifford J Mugnier" <cjmce at lsu.edu>
To:
"PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
Date:
06/14/2010 01:05 PM
Subject:
Re: [Proj] Deepwater Horizon.  Where is the bottom of the well?
Sent by:
proj-bounces at lists.maptools.org



Inertial systems and their accuracies degrade as a function of time, so 
it's pretty easy to calculate the expected error envelope in all three 
components.  Numerous ZUPTs  (Zero velocity Update PoinTs) can help.  The 
fiber optic ring lasers with absolutely zero moving parts, although more 
expensive, are the best alternative to the ring laser gyros that indeed 
have one moving part.
 
I do not know if IXsea has any downhole applications yet, though ...
 
I used to sell UTM/State Plane transformation software that would run on 
an HP-41 calculator to Directional Drilling companies in the Gulf of 
Mexico about 25 years ago.  They were quite concerned with correcting for 
magnetic declination and Grid System convergence angles back then before 
small inertial strapdown packages were available for non-DoD applications.
 
Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3223A
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 238-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group

From: proj-bounces at lists.maptools.org on behalf of Karney, Charles
Sent: Mon 14-Jun-10 13:08
To: PROJ.4 and general Projections Discussions
Subject: [Proj] Deepwater Horizon. Where is the bottom of the well?

Here are some questions related to the Deepwater Horizon accident and
the drilling of relief wells for the readers of this list in the oil
industry.

(1) What is the method of determining the position of an instrument 3km
down a well?  Is it seismic, dead reckoning, or what?

(2) What is the typical absolute accuracy of the measured position,
horizontally and vertically (and, if possible, specifically with
reference to the leaking well)?  What is the *relative* accuracy?
(I.e., I can imagine that the absolute accuracy is poor because of the
unknown properties of the intervening rock.  However, it might be
possible to "find" the same position when drilling the relief well if
the same method is used.)

(3) Is the drill bit instrumented to return the position?  How?  Or does
a separate logging package need to be inserted into the well?  At what
frequency would this be done?

I can piece together some of the answers from wikipedia.  However, maybe
I can get more autoritative and more specific answers from this list.

          --Charles

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100619/1a0e640c/attachment.html>

From mfinn at usgs.gov  Sat Jun 19 17:20:05 2010
From: mfinn at usgs.gov (Michael P Finn)
Date: Sat, 19 Jun 2010 18:20:05 -0600
Subject: [Proj] Deepwater Horizon.  Where is the bottom of the well?
In-Reply-To: <F8126A664D27475C924503F191ACD0C0@PowerSpec>
References: <CED6B4B383C5F0418DAFEA443A0033C2F90E2794CC@MALIBU.sarnoff.internal>
	<F8126A664D27475C924503F191ACD0C0@PowerSpec>
Message-ID: <OF4D47EB50.C63775C5-ON87257748.0001CC81-87257748.0001D7C5@usgs.gov>

Ditto. Thanks. Very interesting.




From:
"Noel Zinn" <ndzinn at comcast.net>
To:
"'PROJ.4 and general Projections Discussions'" <proj at lists.maptools.org>
Date:
06/14/2010 04:50 PM
Subject:
Re: [Proj] Deepwater Horizon.  Where is the bottom of the well?
Sent by:
proj-bounces at lists.maptools.org



A lot of science goes into wellbore surveying nowadays, and that applies 
to
assessing the quality of the survey, too.  Wells are surveyed while 
drilling
(MWD, measurement while drilling) with instruments in the bottom hole
assembly (BHA) that includes the drill bit.  Typically, those instruments
are magnetometers (magnetic azimuth) and accelerometers (inclination).
Wells are also surveyed when the BHA has "tripped out" with instruments
(typically gyros for true azimuth and accelerometers) that are lowered on 
a
wire line.  Distance along the wellbore trajectory (measured depth, MD) is
determined by drilling pipe tally or wire line length.  All these
instruments have biases that must be compensated and different random 
errors
that must be propagated from surface to TD (total depth).  Stochastic 
models
for MWD and gyro surveys have been published by the Industry Steering
Committee for Wellbore Survey Accuracy (ISCWSA), which is now the Wellbore
Survey Accuracy Technical Committee of the Society of Petroleum Engineers
(SPE).  BP provided early leadership of the ISCWSA.  For more information
follow this link => http://www.iscwsa.org/.  Given all this technology,
there are also geodetic and cartographic corrections that must be applied,
especially with deviated, extended-reach wells, which are common in deep
water. 

Regards,
Noel Zinn, Principal
Hydrometronics LLC, Consultancy and Technical Software
+1-832-539-1472, noel.zinn at hydrometronics.com
http://www.hydrometronics.com


-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Karney, Charles
Sent: Monday, June 14, 2010 1:09 PM
To: PROJ.4 and general Projections Discussions
Subject: [Proj] Deepwater Horizon. Where is the bottom of the well?

Here are some questions related to the Deepwater Horizon accident and
the drilling of relief wells for the readers of this list in the oil
industry.

(1) What is the method of determining the position of an instrument 3km
down a well?  Is it seismic, dead reckoning, or what?

(2) What is the typical absolute accuracy of the measured position,
horizontally and vertically (and, if possible, specifically with
reference to the leaking well)?  What is the *relative* accuracy?
(I.e., I can imagine that the absolute accuracy is poor because of the
unknown properties of the intervening rock.  However, it might be
possible to "find" the same position when drilling the relief well if
the same method is used.)

(3) Is the drill bit instrumented to return the position?  How?  Or does
a separate logging package need to be inserted into the well?  At what
frequency would this be done?

I can piece together some of the answers from wikipedia.  However, maybe
I can get more autoritative and more specific answers from this list.

                   --Charles

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100619/86c6b488/attachment.html>

From jrepetto at free.fr  Tue Jun 22 03:09:26 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Tue, 22 Jun 2010 12:09:26 +0200
Subject: [Proj] PROJ.4 parameters for EPSG:3053
Message-ID: <4C208BD6.8050404@free.fr>

Hello,

I am looking for the projection parameters of the Hjorsey 1955 / Lambert 
1955 projection (Iceland).
The epsg file shipped with PROJ4 contains this warning:

Unable to translate coordinate system EPSG:3053 into PROJ.4  format.

I don't know the reason of this warning, may be it is because the LCC 
projection is west oriented ?

Are the following parameters correct for this projection :
+proj=lcc +lat_1=65 +lat_0=65 +lon_0=-18 +k_0=1 +x_0=500000 +y_0=500000 
+ellps=intl +towgs84=-73,46,-86,0,0,0,0 +units=m +no_defs
?

Does anybody know sample maps or GCPs using this projection, to check 
the parameters ?

Thanks for your help,
Jean-Claude



From warmerdam at pobox.com  Tue Jun 22 07:17:11 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 22 Jun 2010 10:17:11 -0400
Subject: [Proj] PROJ.4 parameters for EPSG:3053
In-Reply-To: <4C208BD6.8050404@free.fr>
References: <4C208BD6.8050404@free.fr>
Message-ID: <4C20C5E7.2000804@pobox.com>

Jean-Claude REPETTO wrote:
> Hello,
> 
> I am looking for the projection parameters of the Hjorsey 1955 / Lambert 
> 1955 projection (Iceland).
> The epsg file shipped with PROJ4 contains this warning:
> 
> Unable to translate coordinate system EPSG:3053 into PROJ.4  format.
> 
> I don't know the reason of this warning, may be it is because the LCC 
> projection is west oriented ?
> 
> Are the following parameters correct for this projection :
> +proj=lcc +lat_1=65 +lat_0=65 +lon_0=-18 +k_0=1 +x_0=500000 +y_0=500000 
> +ellps=intl +towgs84=-73,46,-86,0,0,0,0 +units=m +no_defs
> ?
> 
> Does anybody know sample maps or GCPs using this projection, to check 
> the parameters ?

Jean-Claude,

The problem is EPSG:3053 uses method 9826 which is LCC west oriented.  I
would appreciate it if you could file a ticket in the PROJ.4 track on this
coordinate system, and I should be able to add support for it in a future
version of PROJ.4 using the new axis orientation support.

Please include any test points you are confident of in the ticket so I
can confirm whatever comes out is right.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ckarney at Sarnoff.com  Tue Jun 22 11:37:52 2010
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Tue, 22 Jun 2010 14:37:52 -0400
Subject: [Proj] Spheroidal gnomonic projection
In-Reply-To: <ssr7hmi7ios.fsf@puffin.sarnoff.com>
References: <ssr7hmi7ios.fsf@puffin.sarnoff.com>
Message-ID: <CED6B4B383C5F0418DAFEA443A0033C2F90E2794F8@MALIBU.sarnoff.internal>

> From: Charles Karney [ckarney at sarnoff.com]
> Sent: Tuesday, June 01, 2010 13:42
>
> ...
> The method of constructing the projection entails defining
> ...
>   * M, the geodesic scale.  Take two geodesics of length s which are
>     parallel close to the center and initially separated by dt.  The
>     endpoints are separated by M * dt.
> 
> ... The geodesic scale was introduced (I think) by G. V. Bagratuni,
> ...
> Questions:
> ...
> (2) Is Bagratuni this first person to define M?

No, that would be Gauss (of course!).  He uses the symbol n (which
Bagratuni adopts).  See

  http://books.google.com/books?id=a1wTJR3kHwUC&pg=PA35


From al001 at uni-koeln.de  Wed Jun 23 01:07:21 2010
From: al001 at uni-koeln.de (Irwin Scollar)
Date: Wed, 23 Jun 2010 10:07:21 +0200
Subject: [Proj] Iceland's Grids
In-Reply-To: <mailman.3.1277226002.27220.proj@lists.maptools.org>
References: <mailman.3.1277226002.27220.proj@lists.maptools.org>
Message-ID: <201006230807.o5N87MIC004224@smtp-auth.uni-koeln.de>

See the very complete official on-line calculator for all the 
varieties of Icelandic coordinate systems:

http://cocodati.lmi.is/cocodati/cocodat-i.jsp

available from the Iceland mapping service in English.

The manual by Marcus Rennen:

http://cocodati.lmi.is/cocodati/cocodati-manual.pdf

contains all the details.

Irwin Scollar



From roger at opq.se  Wed Jun 23 05:41:59 2010
From: roger at opq.se (Roger Oberholtzer)
Date: Wed, 23 Jun 2010 14:41:59 +0200
Subject: [Proj] Portuguese Modified Grid - Datum 73
In-Reply-To: <6a91fcb01002180524x518af47v737e90c88a630ab3@mail.gmail.com>
References: <1266320435.3745.52.camel@acme.pacific>
	<4FBEAF2799F44DB3906B6DF5FB3AA0B7@PCHP>
	<1266323739.3745.78.camel@acme.pacific>
	<8F23F861654A437D9EED357D6AFCDE41@PCHP>
	<1266333252.3745.112.camel@acme.pacific>
	<6a91fcb01002160934m4e88af07ka702f59dab11826b@mail.gmail.com>
	<1266398836.1127.57.camel@acme.pacific>
	<6a91fcb01002180524x518af47v737e90c88a630ab3@mail.gmail.com>
Message-ID: <1277296919.14989.84.camel@acme.pacific>

On Thu, 2010-02-18 at 13:24 +0000, Jose Gonçalves wrote:
> Hello
> 
> Some history about that projection: that central point was chosen at a
> mid latitude of the country and 1d00'00"E of the Lisbon Meridian
> (9d07'54.862"W). The small false easting/northing of a few hundred
> meters, which is quite unusual, was chosen in order to create
> projected coordinates similar to projected coordinates in an older
> datum (datum Lisboa).

I have finally obtained test data for conversion from WGS84 lat/longs
into D73 northings/eastings. After earlier discussions on this list
(between Feb 16 and 18, 2010), it was suggested that the appropriate
specification for proj would be:

 "+proj=tmerc "                  // Projection
 "+ellps=intl "                  // Spheroid
 "+k=1.0 "                       // Scale factor at central meridian
 "+x_0=180.598 "                 // False easting
 "+y_0=-86.98999999999999 "      // False northing
 "+lon_0=-8.131906111111112 "    // Longitude of central meridian
 "+lat_0=39.66666666666666 "     // Latitude of origin
 "+towgs84=0,0,0,0,0,0,0 "
 "+no_defs"

With test locations, I have a rather large error.

Reference point (Santa Cruz):

   Latitude: 41.6743830556 Longitude: -8.3312663889 (WGS84)
   Easting:     -16493.683 Northing:     222799.692

Using the above definition, I get this:

   Easting:     -16421.042 Northing:     222981.401

Which is 195.691 meters from the reference calculation. I have points
all around Portugal, and the all seem to be around 195 meters from the
expected location.

Either I am missing something, or the test data is in error. Or both.

Does anyone know what they would expect for the D73 northing/easting at
the WGS84 lat/long test point above?

-- 
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696



From jrepetto at free.fr  Wed Jun 23 06:11:48 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Wed, 23 Jun 2010 15:11:48 +0200
Subject: [Proj] Portuguese Modified Grid - Datum 73
In-Reply-To: <1277296919.14989.84.camel@acme.pacific>
References: <1266320435.3745.52.camel@acme.pacific>	<4FBEAF2799F44DB3906B6DF5FB3AA0B7@PCHP>	<1266323739.3745.78.camel@acme.pacific>	<8F23F861654A437D9EED357D6AFCDE41@PCHP>	<1266333252.3745.112.camel@acme.pacific>	<6a91fcb01002160934m4e88af07ka702f59dab11826b@mail.gmail.com>	<1266398836.1127.57.camel@acme.pacific>	<6a91fcb01002180524x518af47v737e90c88a630ab3@mail.gmail.com>
	<1277296919.14989.84.camel@acme.pacific>
Message-ID: <4C220814.4010107@free.fr>

Le 23/06/2010 14:41, Roger Oberholtzer a écrit :
>
>   "+proj=tmerc "                  // Projection
>   "+ellps=intl "                  // Spheroid
>   "+k=1.0 "                       // Scale factor at central meridian
>   "+x_0=180.598 "                 // False easting
>   "+y_0=-86.98999999999999 "      // False northing
>   "+lon_0=-8.131906111111112 "    // Longitude of central meridian
>   "+lat_0=39.66666666666666 "     // Latitude of origin
>   "+towgs84=0,0,0,0,0,0,0 "
>   "+no_defs"
>
> With test locations, I have a rather large error.
>
> Reference point (Santa Cruz):
>
>     Latitude: 41.6743830556 Longitude: -8.3312663889 (WGS84)
>     Easting:     -16493.683 Northing:     222799.692
>
> Using the above definition, I get this:
>
>     Easting:     -16421.042 Northing:     222981.401

Hello Roger,

I am using these parameters in ttMaps :

+proj=tmerc +lat_0=39.66666666666666 +lon_0=-8.131906111111112  +k=1 
+x_0=180.598  +y_0=-86.98999999999999  +ellps=intl 
+towgs84=-239.749,88.181,30.488,0.263,0.082,1.211,2.229 +units=m +no_defs

The result is :
-16496.92	222796.31
that is far better than with your parameters.

Obviously your +towgs84 parameter is wrong, since the datums are different.

Jean-Claude



From roger at opq.se  Wed Jun 23 06:37:04 2010
From: roger at opq.se (Roger Oberholtzer)
Date: Wed, 23 Jun 2010 15:37:04 +0200
Subject: [Proj] Portuguese Modified Grid - Datum 73
In-Reply-To: <4C220814.4010107@free.fr>
References: <1266320435.3745.52.camel@acme.pacific>
	<4FBEAF2799F44DB3906B6DF5FB3AA0B7@PCHP>
	<1266323739.3745.78.camel@acme.pacific>
	<8F23F861654A437D9EED357D6AFCDE41@PCHP>
	<1266333252.3745.112.camel@acme.pacific>
	<6a91fcb01002160934m4e88af07ka702f59dab11826b@mail.gmail.com>
	<1266398836.1127.57.camel@acme.pacific>
	<6a91fcb01002180524x518af47v737e90c88a630ab3@mail.gmail.com>
	<1277296919.14989.84.camel@acme.pacific>  <4C220814.4010107@free.fr>
Message-ID: <1277300224.14989.104.camel@acme.pacific>

On Wed, 2010-06-23 at 15:11 +0200, Jean-Claude REPETTO wrote:
> +towgs84=-239.749,88.181,30.488,0.263,0.082,1.211,2.229

That does indeed make all the difference. I still have some very small
errors. But I am now willing to think they are errors in the test data.

Once again. Thanks!!

-- 
Roger Oberholtzer

OPQ Systems / Ramböll RST

Ramböll Sverige AB
Krukmakargatan 21
P.O. Box 17009
SE-104 62 Stockholm, Sweden

Office: Int +46 10-615 60 20
Mobile: Int +46 70-815 1696



From alobolistas at gmail.com  Thu Jun 24 03:29:44 2010
From: alobolistas at gmail.com (Agustin Lobo)
Date: Thu, 24 Jun 2010 12:29:44 +0200
Subject: [Proj] Fwd: proj4 definition for European Forest Map
In-Reply-To: <AANLkTinVmwD4PRab1akbfmDwKXSHw-xHyvhhEZ9mR8j-@mail.gmail.com>
References: <AANLkTim0u77ysK8Fl8UdMyMRQqXMrUF6Br2eAdByF-A3@mail.gmail.com>
	<AANLkTinVmwD4PRab1akbfmDwKXSHw-xHyvhhEZ9mR8j-@mail.gmail.com>
Message-ID: <AANLkTin2ux9rAFejWc5ur6Kdb8Urs8R33zmLcfrhDWoY@mail.gmail.com>

Hi!

The European Forest Map has the following projection (according to a
file distributed along with the file):

Projection: Lambert_Azimuthal_Equal_Area
Parameters:
 False_Easting: 0.000000
 False_Northing: 0.000000
 Central_Meridian: 9.000000
 Latitude_Of_Origin: 48.000000
Linear Unit: Meter (1.000000)
Coordinate system
Geographic Coordinate System:
Name: GCS_User_Defined
Angular Unit: Degree (0.017453292519943299)
Prime Meridian: Greenwich (0.000000000000000000)
Datum: D_User_Defined
 Spheroid: User_Defined_Spheroid
 Semimajor Axis: 6378388.000000000000000000
 Semiminor Axis: 6378388.000000000000000000
 Inverse Flattening: 0.000000000000000000

I've made several trials to set up a custom projection (in QGIS):
1.
+proj=laea +lat_0=48 +lon_0=9 +x_0=0.000 +y_0=0.000 +a=6378388.0000
+b=6378388.000 +rf=0.000 +units=m +no_defs
Rejected by the custom projection tool as erroneous

2.
+proj=laea +lat_0=48 +lon_0=9 +x_0=0.000 +y_0=0.000 +a=6378388.0000
+b=6378388.000 +f=0.000 +units=m +no_defs
Accepted by the custom projection tool but the Properties dialog does
not accept it

3.
+proj=laea +lat_0=48 +lon_0=9 +x_0=0.000 +y_0=0.000 +a=6378388.0000
+b=6378388.000 +units=m +no_defs
Seems to work fine.

I'd like if someone could actually confirm that the third proj4
definition is actually
in accordance with the definition provided in the server and that I
have reproduced at the beginning of this
message. I'm not sure if option 1 and 2 are rejected because they are wrong or
this is a QGIS problem (message sent to the QGIS list remains unanswered).

I also would like answer if there is a document instructing how to
translate PROJCS specifications
into proj4 format.

Thanks!

Agus


From jagoncal at gmail.com  Thu Jun 24 04:12:32 2010
From: jagoncal at gmail.com (=?ISO-8859-1?Q?Jose_Gon=E7alves?=)
Date: Thu, 24 Jun 2010 12:12:32 +0100
Subject: [Proj] Fwd: proj4 definition for European Forest Map
In-Reply-To: <AANLkTin2ux9rAFejWc5ur6Kdb8Urs8R33zmLcfrhDWoY@mail.gmail.com>
References: <AANLkTim0u77ysK8Fl8UdMyMRQqXMrUF6Br2eAdByF-A3@mail.gmail.com>
	<AANLkTinVmwD4PRab1akbfmDwKXSHw-xHyvhhEZ9mR8j-@mail.gmail.com>
	<AANLkTin2ux9rAFejWc5ur6Kdb8Urs8R33zmLcfrhDWoY@mail.gmail.com>
Message-ID: <AANLkTinthloeLoxRI3XpOe5g4CPMjdvCUA7ffEWsIbg3@mail.gmail.com>

Hello

The third definition is ok. Since you are specifying both semi-axis the
flattening is redundant. The first is wrong because +rf should be infinite
in the case of the sphere. Within PROJ syntax you could also use:

proj +proj=laea +lat_0=48 +lon_0=9 +x_0=0 +y_0=0 +R=6378388 +units=m
+no_defs

Regards

José A. Gonçalves



2010/6/24 Agustin Lobo <alobolistas at gmail.com>

> Hi!
>
> The European Forest Map has the following projection (according to a
> file distributed along with the file):
>
> Projection: Lambert_Azimuthal_Equal_Area
> Parameters:
>  False_Easting: 0.000000
>  False_Northing: 0.000000
>  Central_Meridian: 9.000000
>  Latitude_Of_Origin: 48.000000
> Linear Unit: Meter (1.000000)
> Coordinate system
> Geographic Coordinate System:
> Name: GCS_User_Defined
> Angular Unit: Degree (0.017453292519943299)
> Prime Meridian: Greenwich (0.000000000000000000)
> Datum: D_User_Defined
>  Spheroid: User_Defined_Spheroid
>  Semimajor Axis: 6378388.000000000000000000
>  Semiminor Axis: 6378388.000000000000000000
>  Inverse Flattening: 0.000000000000000000
>
> I've made several trials to set up a custom projection (in QGIS):
> 1.
> +proj=laea +lat_0=48 +lon_0=9 +x_0=0.000 +y_0=0.000 +a=6378388.0000
> +b=6378388.000 +rf=0.000 +units=m +no_defs
> Rejected by the custom projection tool as erroneous
>
> 2.
> +proj=laea +lat_0=48 +lon_0=9 +x_0=0.000 +y_0=0.000 +a=6378388.0000
> +b=6378388.000 +f=0.000 +units=m +no_defs
> Accepted by the custom projection tool but the Properties dialog does
> not accept it
>
> 3.
> +proj=laea +lat_0=48 +lon_0=9 +x_0=0.000 +y_0=0.000 +a=6378388.0000
> +b=6378388.000 +units=m +no_defs
> Seems to work fine.
>
> I'd like if someone could actually confirm that the third proj4
> definition is actually
> in accordance with the definition provided in the server and that I
> have reproduced at the beginning of this
> message. I'm not sure if option 1 and 2 are rejected because they are wrong
> or
> this is a QGIS problem (message sent to the QGIS list remains unanswered).
>
> I also would like answer if there is a document instructing how to
> translate PROJCS specifications
> into proj4 format.
>
> Thanks!
>
> Agus
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100624/700c11d9/attachment.html>

From alobolistas at gmail.com  Thu Jun 24 05:26:22 2010
From: alobolistas at gmail.com (Agustin Lobo)
Date: Thu, 24 Jun 2010 14:26:22 +0200
Subject: [Proj] Fwd: proj4 definition for European Forest Map
In-Reply-To: <AANLkTinthloeLoxRI3XpOe5g4CPMjdvCUA7ffEWsIbg3@mail.gmail.com>
References: <AANLkTim0u77ysK8Fl8UdMyMRQqXMrUF6Br2eAdByF-A3@mail.gmail.com>
	<AANLkTinVmwD4PRab1akbfmDwKXSHw-xHyvhhEZ9mR8j-@mail.gmail.com>
	<AANLkTin2ux9rAFejWc5ur6Kdb8Urs8R33zmLcfrhDWoY@mail.gmail.com>
	<AANLkTinthloeLoxRI3XpOe5g4CPMjdvCUA7ffEWsIbg3@mail.gmail.com>
Message-ID: <AANLkTim_oifidTY5JRSdaRs32hm4rEVxum8XdI1FkJ8R@mail.gmail.com>

Obrigado!
Agus

2010/6/24 Jose Gonçalves <jagoncal at gmail.com>:
> Hello
>
> The third definition is ok. Since you are specifying both semi-axis the
> flattening is redundant. The first is wrong because +rf should be infinite
> in the case of the sphere. Within PROJ syntax you could also use:
>
> proj +proj=laea +lat_0=48 +lon_0=9 +x_0=0 +y_0=0 +R=6378388 +units=m
> +no_defs
>
> Regards
>
> José A. Gonçalves
>
>
>
> 2010/6/24 Agustin Lobo <alobolistas at gmail.com>
>>
>> Hi!
>>
>> The European Forest Map has the following projection (according to a
>> file distributed along with the file):
>>
>> Projection: Lambert_Azimuthal_Equal_Area
>> Parameters:
>>  False_Easting: 0.000000
>>  False_Northing: 0.000000
>>  Central_Meridian: 9.000000
>>  Latitude_Of_Origin: 48.000000
>> Linear Unit: Meter (1.000000)
>> Coordinate system
>> Geographic Coordinate System:
>> Name: GCS_User_Defined
>> Angular Unit: Degree (0.017453292519943299)
>> Prime Meridian: Greenwich (0.000000000000000000)
>> Datum: D_User_Defined
>>  Spheroid: User_Defined_Spheroid
>>  Semimajor Axis: 6378388.000000000000000000
>>  Semiminor Axis: 6378388.000000000000000000
>>  Inverse Flattening: 0.000000000000000000
>>
>> I've made several trials to set up a custom projection (in QGIS):
>> 1.
>> +proj=laea +lat_0=48 +lon_0=9 +x_0=0.000 +y_0=0.000 +a=6378388.0000
>> +b=6378388.000 +rf=0.000 +units=m +no_defs
>> Rejected by the custom projection tool as erroneous
>>
>> 2.
>> +proj=laea +lat_0=48 +lon_0=9 +x_0=0.000 +y_0=0.000 +a=6378388.0000
>> +b=6378388.000 +f=0.000 +units=m +no_defs
>> Accepted by the custom projection tool but the Properties dialog does
>> not accept it
>>
>> 3.
>> +proj=laea +lat_0=48 +lon_0=9 +x_0=0.000 +y_0=0.000 +a=6378388.0000
>> +b=6378388.000 +units=m +no_defs
>> Seems to work fine.
>>
>> I'd like if someone could actually confirm that the third proj4
>> definition is actually
>> in accordance with the definition provided in the server and that I
>> have reproduced at the beginning of this
>> message. I'm not sure if option 1 and 2 are rejected because they are
>> wrong or
>> this is a QGIS problem (message sent to the QGIS list remains unanswered).
>>
>> I also would like answer if there is a document instructing how to
>> translate PROJCS specifications
>> into proj4 format.
>>
>> Thanks!
>>
>> Agus
>> _______________________________________________
>> Proj mailing list
>> Proj at lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/proj
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>


From jagoncal at gmail.com  Thu Jun 24 17:36:52 2010
From: jagoncal at gmail.com (=?ISO-8859-1?Q?Jose_Gon=E7alves?=)
Date: Fri, 25 Jun 2010 01:36:52 +0100
Subject: [Proj] Portuguese Modified Grid - Datum 73
In-Reply-To: <1277300224.14989.104.camel@acme.pacific>
References: <1266320435.3745.52.camel@acme.pacific>
	<4FBEAF2799F44DB3906B6DF5FB3AA0B7@PCHP>
	<1266323739.3745.78.camel@acme.pacific>
	<8F23F861654A437D9EED357D6AFCDE41@PCHP>
	<1266333252.3745.112.camel@acme.pacific>
	<6a91fcb01002160934m4e88af07ka702f59dab11826b@mail.gmail.com>
	<1266398836.1127.57.camel@acme.pacific>
	<6a91fcb01002180524x518af47v737e90c88a630ab3@mail.gmail.com>
	<1277296919.14989.84.camel@acme.pacific> <4C220814.4010107@free.fr>
	<1277300224.14989.104.camel@acme.pacific>
Message-ID: <AANLkTilmdbTasoSPUpwuXK1HOX0MH1BLCEQ73Aaq5Zkj@mail.gmail.com>

2010/6/23 Roger Oberholtzer <roger at opq.se>

> On Wed, 2010-06-23 at 15:11 +0200, Jean-Claude REPETTO wrote:
> > +towgs84=-239.749,88.181,30.488,0.263,0.082,1.211,2.229
>


Those +towgs84 parameters convert Datum73 to WGS84 with errors of the order
of 1 meter. I have a datum shift grid file to convert from Datum 73 to
ETRS89 available on the address:

http://www.fc.up.pt/pessoas/jagoncal/coordenadas/pt73_e89.gsb


You can convert ETRS89 long-lat to projected Datum73 with the follwoing
command line (errors in general smaller than 10 cm) :

cs2cs +init=epsg:4258 +towgs84=0,0,0 +to +init=epsg:27492
+nadgrids=pt73_e89.gsb


The WGS84 coordinates of your test point are not very accurate.


Regards

José A. Gonçalves
University of Porto, Portugal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100625/75fd6e15/attachment.html>

From sisyphus1 at optusnet.com.au  Wed Jun 30 00:40:08 2010
From: sisyphus1 at optusnet.com.au (Sisyphus)
Date: Wed, 30 Jun 2010 17:40:08 +1000
Subject: [Proj] Looking for MinGW Makefiles
Message-ID: <7133B904B5374609BC0DFAA907A52EF1@desktop2>

Hi,

proj-4.7.0 ships with some makefiles (makefile.vc) that work fine with 
MSVC++.

Does anyone here have any such makefiles that work on Windows with the MinGW 
port of the gcc compiler ?

We can build using MinGW in the msys shell, but msys can be a bit of a 
handful to install (especially the latest version, for which no installer 
exists), and it would be a lot simpler if we can find some makefiles that 
work with MinGW in the cmd.exe shell - written for either mingw32-make or 
dmake.

Cheers,
Rob 



