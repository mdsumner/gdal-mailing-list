From schubert.seb at googlemail.com  Fri Jul  3 02:10:24 2009
From: schubert.seb at googlemail.com (Sebastian Schubert)
Date: Fri, 3 Jul 2009 11:10:24 +0200
Subject: [Proj] Accuracy Cassini Solder -> lat lon 200m?!
Message-ID: <200907031110.29429.schubert.seb@googlemail.com>

Dear,

I want to convert from Solder system used in the city of Berlin 
(EPSG:3068) to the standard lat lon system.

Here is what I did:

schubert at linux-8ubn:~> cs2cs -v +init=epsg:3068
# ---- From Coordinate System ----
#Cassini
#       Cyl, Sph&Ell
# +init=epsg:3068 +proj=cass +lat_0=52.41864827777778
# +lon_0=13.62720366666667 +x_0=40000 +y_0=10000 +ellps=bessel
# +datum=potsdam +units=m +no_defs +towgs84=606.0,23.0,413.0
#--- following specified but NOT used
# +ellps=bessel
# ---- To Coordinate System ----
#Lat/long (Geodetic alias)
#
# +proj=latlong +datum=potsdam +ellps=bessel +towgs84=606.0,23.0,413.0

20281.021 19760.743
13d20'12.334"E  52d30'21.666"N 0.000

20302.749 19797.597
13d20'13.478"E  52d30'22.861"N 0.000

(I entered some newlines for a better overview). These are virtually the 
same results I get when I use the conversion formula given on the epsg 
website with the parameter listed there.

The problem is that the result is about 200m away from the place it 
represents! I had a look in google earth and on a couple of different 
other sites:
http://stable.toolserver.org/geohack/geohack.php?params=52_30_21_N_13_20_12_E
The data represents the Gedaechtniskirche in Berlin,  52°30'17.33"N, 
13°20'6.49"E using google earth. It is also depicted in this screen 
shot:
http://img443.imageshack.us/img443/6214/74483355.jpg

Do you know where the problem is? In the conversion, the data or the 
parameter?

Cheers
Sebastian
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part.
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090703/09118991/attachment.sig>

From support.mn at elisanet.fi  Fri Jul  3 02:39:09 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Fri, 3 Jul 2009 12:39:09 +0300 (EEST)
Subject: [Proj] Accuracy Cassini Solder -> lat lon 200m?!
Message-ID: <25541873.1477491246613950165.JavaMail.support.mn@elisanet.fi>

Sebastian Schubert [schubert.seb at googlemail.com] kirjoitti: 

# ---- From Coordinate System ----
#Cassini
# Cyl, Sph&Ell
# +init=epsg:3068 +proj=cass +lat_0=52.41864827777778
# +lon_0=13.62720366666667 +x_0=40000 +y_0=10000 +ellps=bessel
# +datum=potsdam +units=m +no_defs +towgs84=606.0,23.0,413.0
#--- following specified but NOT used
# +ellps=bessel
# ---- To Coordinate System ----
#Lat/long (Geodetic alias)
#
# +proj=latlong +datum=potsdam +ellps=bessel +towgs84=606.0,23.0,413.0

-----------------------------------------

Some notes:

There are 3 datums given?

Source datum is "potsdam" and/or (?) "towgs84..."
Destination datum is "towgs84..."

Source ellipse given "bessel", but the program is telling that
it is NOT used?

I am assuming that some wrong ellipse is maybe used (check
postdam)? Or that some datum is not correct, either specified
or used.

Janne./MNS Support



From jrepetto at free.fr  Fri Jul  3 02:39:31 2009
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Fri, 03 Jul 2009 11:39:31 +0200
Subject: [Proj] Accuracy Cassini Solder -> lat lon 200m?!
In-Reply-To: <200907031110.29429.schubert.seb@googlemail.com>
References: <200907031110.29429.schubert.seb@googlemail.com>
Message-ID: <4A4DD1D3.4020306@free.fr>

Sebastian Schubert a écrit :
> 
> I want to convert from Solder system used in the city of Berlin 
> (EPSG:3068) to the standard lat lon system.

What do you mean "standard lat lon system" ? If you mean WGS84, you 
should try :
cs2cs -v +init=epsg:3068 +to +init=epsg:4326

Jean-Claude



From schubert.seb at googlemail.com  Fri Jul  3 04:03:45 2009
From: schubert.seb at googlemail.com (Sebastian Schubert)
Date: Fri, 3 Jul 2009 13:03:45 +0200
Subject: [Proj] Accuracy Cassini Solder -> lat lon 200m?!
In-Reply-To: <4A4DD1D3.4020306@free.fr>
References: <200907031110.29429.schubert.seb@googlemail.com>
	<4A4DD1D3.4020306@free.fr>
Message-ID: <200907031303.54487.schubert.seb@googlemail.com>

Dear Jean-Claude, dear all,

* On Friday 03 July 2009, 11:39:31, Jean-Claude Repetto wrote:
> Sebastian Schubert a écrit :
> > I want to convert from Solder system used in the city of Berlin
> > (EPSG:3068) to the standard lat lon system.
>
> What do you mean "standard lat lon system" ? If you mean WGS84, you
> should try :
> cs2cs -v +init=epsg:3068 +to +init=epsg:4326

merci beaucoup, you were absolutely right! This works.


Thank you,
Sebastian
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part.
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090703/8ce76c54/attachment.sig>

From geraldi.evenden at gmail.com  Sat Jul  4 08:24:49 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sat, 4 Jul 2009 11:24:49 -0400
Subject: [Proj] The trouble with grid datum correction files
Message-ID: <200907041124.49114.geraldi.evenden@gmail.com>

In lazily working my way through the various forms forms of the correction 
grids (NADCON, HPGN, NTv1 and NTv2) a problem much more serious than the sign 
of longitude has appeared: endian of the binary integer and floating point 
data.

At first I thought the problem was solved with big endian data files and, for 
Intel (and clone) users, little endian cpu's.  BUT when I got to NTv1 the 
file data appears to be little endian for the source file that I was referred 
to by Warmerdam.  I bring Frank's name into it because I am not sure the data 
was not regurgitated after it left the Canadian government.

This brings up a *very* serious issue with distributing data in a binary form 
such as in these datum correction files.

In the case of the Canadian documentation, ("NTv2 National Transformation, 
version 2: Developer's Guide" by Junkins and Farley)  a search of the 
document made no mention of file endian status nor, for that matter, the 
characteristics of the floating point values (IEEE?).  I believe the US NGS 
similarly ignores the problem.

I suggest two possible solutions to this problem:

1) revise all documentation for active binary formats in use to clearly 
specify the endian and technical nature of binary number system recorded  and 
ensure that *all* data issues follow these specifications

-- or --

2) issue the data in ASCII form.

I consider the second form the preferable mode; something that can be 
immediately viewed with the simplest software and most easily understood by 
personnel with all levels of computer skills.  Certainly, the size of the 
data files will increase but this can considerably be reduced with any of the 
freely available compression procedures.

If, in the interests of usage efficiency, the data is to be reference as a 
local binary file, this is an issue of the using site and a factor that could 
be facilitated with a suitable to-binary converter procedure supplied by the 
distributor of the data---as a supplement to current user programs supplied.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From postmaster at boxbe.com  Sat Jul  4 10:24:24 2009
From: postmaster at boxbe.com (postmaster at boxbe.com)
Date: Sat, 4 Jul 2009 10:24:24 -0700 (PDT)
Subject: [Proj] Proj Digest, Vol 62, Issue 3 (Action Required)
Message-ID: <829530890.145473.1246728264758.JavaMail.prod@app003.boxbe.com>


  Dear sender,

  This message serves as notification that you will not receive any more courtesy notices 
  from our members for two days. Messages you have sent will remain in a lower 
  priority queue for our member to review at their leisure.

  Future messages will be more likely to be viewed if you are on our member's priority
  Guest List.



  Thank you,
  ltsiaw at gmail.com


About Boxbe
This courtesy notice is part of a free service to make email
more reliable and useful.  Boxbe (http://www.boxbe.com) uses
your existing social network and that of your friends to keep
your inbox clean and make sure you receive email from people
who matter to you.

Boxbe: Say Goodbye to Email Overload
Visit http://www.boxbe.com/how-it-works?tc=196001955_485839593



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090704/c03a2a90/attachment.html>
-------------- next part --------------
An embedded message was scrubbed...
From: proj-request at lists.maptools.org
Subject: Proj Digest, Vol 62, Issue 3
Date: Sat, 04 Jul 2009 12:00:01 -0500
Size: 2060
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090704/c03a2a90/attachment.mht>

From huntc at mac.com  Sat Jul  4 16:27:25 2009
From: huntc at mac.com (Christopher Hunt)
Date: Sun, 05 Jul 2009 09:27:25 +1000
Subject: [Proj] The trouble with grid datum correction files
In-Reply-To: <mailman.1.1246726801.6511.proj@lists.maptools.org>
References: <mailman.1.1246726801.6511.proj@lists.maptools.org>
Message-ID: <01365F1C-FA29-4F0E-B808-A15418BBEAB1@mac.com>

Hi there,

I do not claim to fully understand the context of the issue here, but  
as a software developer I have an expectation for portable binary data  
to be presented in big endian form. My expectation is derived from the  
big endian nature of data in binary network protocols (http://en.wikipedia.org/wiki/Endian#Endianness_in_networking 
).

Kind regards,
Christopher


From geraldi.evenden at gmail.com  Sat Jul  4 17:10:55 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sat, 4 Jul 2009 20:10:55 -0400
Subject: [Proj] The trouble with grid datum correction files
In-Reply-To: <01365F1C-FA29-4F0E-B808-A15418BBEAB1@mac.com>
References: <mailman.1.1246726801.6511.proj@lists.maptools.org>
	<01365F1C-FA29-4F0E-B808-A15418BBEAB1@mac.com>
Message-ID: <200907042010.55392.geraldi.evenden@gmail.com>

On Saturday 04 July 2009 7:27:25 pm Christopher Hunt wrote:
> Hi there,
>
> I do not claim to fully understand the context of the issue here, but
> as a software developer I have an expectation for portable binary data
> to be presented in big endian form. My expectation is derived from the
> big endian nature of data in binary network protocols
> (http://en.wikipedia.org/wiki/Endian#Endianness_in_networking ).

For the moment, I do not think we should concern ourselves with binary data 
*and* network protocol.  This introduces an additional complex layer on a 
problem which may already be out of anyones control --- at least in this 
group's.

At the moment what bothers me most is the fact that I have the strong feeling 
that those who assembled these data bases were either ignorant of the problem 
or chose to ignore it.  This is evidenced by the total lack of any comment 
about the subject by the distributers.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From strebe at aol.com  Sat Jul  4 19:11:38 2009
From: strebe at aol.com (strebe)
Date: Sat, 04 Jul 2009 19:11:38 -0700
Subject: [Proj] The trouble with grid datum correction files
In-Reply-To: <01365F1C-FA29-4F0E-B808-A15418BBEAB1@mac.com>
Message-ID: <EBB123D6.3AE0.44D8.9BA9.DD45684FE8AF@aol.com>


I advise revising that expectation. There is no such standard or convention in the broader context of computer science. Indeed, the Shapefile specification, for an example directly relevant to this list, even mixes big- and little endian byte sex within the format. Graphic image formats such as TIFF allow the TIFF writer to specify which endian. Many other binary formats are exclusively little endian because of their development and propagation on the i86 platform.

Regards,
— daan Strebe


On Jul 4, 2009, at 4:27:25 PM, "Christopher Hunt" <huntc at mac.com> wrote:
Hi there,

I do not claim to fully understand the context of the issue here, but 
as a software developer I have an expectation for portable binary data 
to be presented in big endian form. My expectation is derived from the 
big endian nature of data in binary network protocols (http://en.wikipedia.org/wiki/Endian#Endianness_in_networking 
).

Kind regards,
Christopher

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090704/3f9e2b3c/attachment.html>

From support.mn at elisanet.fi  Sun Jul  5 02:49:43 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Sun, 5 Jul 2009 12:49:43 +0300 (EEST)
Subject: [Proj] The trouble with grid datum correction files
Message-ID: <28582519.1531601246787384374.JavaMail.support.mn@elisanet.fi>

Hello,

why not but a BOM in the beginning of every (binary) file, and if that is missing
then assume that it is little endian, if that yiels bad scanning then switch to
big endian and restart... and finally if that does not work either... assume that
the data file is not in right format or corrupted. With that strategy there is no
way to fail. I assume that most editors do it just like that... they simply try to
figure it out them self each time (Tiff reader at least does so).

Janne. / MNS Support

--------------------------------------

strebe [strebe at aol.com] kirjoitti: 
> 
> I advise revising that expectation. There is no such standard or convention in the broader context of computer science. Indeed, the Shapefile specification, for an example directly relevant to this list, even mixes big- and little endian byte sex within the format. Graphic image formats such as TIFF allow the TIFF writer to specify which endian. Many other binary formats are exclusively little endian because of their development and propagation on the i86 platform.
> 
> Regards,
>  daan Strebe
> 
> 
> On Jul 4, 2009, at 4:27:25 PM, "Christopher Hunt" <huntc at mac.com> wrote:
> Hi there,
> 
> I do not claim to fully understand the context of the issue here, but 
> as a software developer I have an expectation for portable binary data 
> to be presented in big endian form. My expectation is derived from the 
> big endian nature of data in binary network protocols (http://en.wikipedia.org/wiki/Endian#Endianness_in_networking 
> ).
> 
> Kind regards,
> Christopher
> 
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From glynn at gclements.plus.com  Sun Jul  5 06:29:26 2009
From: glynn at gclements.plus.com (Glynn Clements)
Date: Sun, 5 Jul 2009 14:29:26 +0100
Subject: [Proj] The trouble with grid datum correction files
In-Reply-To: <01365F1C-FA29-4F0E-B808-A15418BBEAB1@mac.com>
References: <mailman.1.1246726801.6511.proj@lists.maptools.org>
	<01365F1C-FA29-4F0E-B808-A15418BBEAB1@mac.com>
Message-ID: <19024.43702.503839.175125@cerise.gclements.plus.com>


Christopher Hunt wrote:

> I do not claim to fully understand the context of the issue here, but  
> as a software developer I have an expectation for portable binary data  
> to be presented in big endian form.

I guess that you're not familiar with Windows ;)

Microsoft even invented UCS2-LE (all of the standard Unicode formats
are big-endian) so that it could read text files directly into memory
without any deserialisation.

The biggest factor in favour of big-endian formats is the dominance of
little-endian architectures: if you forget to deal with endianness
issues, you'll find out sooner rather than later.

-- 
Glynn Clements <glynn at gclements.plus.com>


From geraldi.evenden at gmail.com  Sun Jul  5 07:26:58 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 5 Jul 2009 10:26:58 -0400
Subject: [Proj] The trouble with grid datum correction files
In-Reply-To: <19024.43702.503839.175125@cerise.gclements.plus.com>
References: <mailman.1.1246726801.6511.proj@lists.maptools.org>
	<01365F1C-FA29-4F0E-B808-A15418BBEAB1@mac.com>
	<19024.43702.503839.175125@cerise.gclements.plus.com>
Message-ID: <200907051026.58312.geraldi.evenden@gmail.com>

On Sunday 05 July 2009 9:29:26 am Glynn Clements wrote:
> Christopher Hunt wrote:
> > I do not claim to fully understand the context of the issue here, but
> > as a software developer I have an expectation for portable binary data
> > to be presented in big endian form.
>
> I guess that you're not familiar with Windows ;)

LOL.  Very good.

> Microsoft even invented UCS2-LE (all of the standard Unicode formats
> are big-endian) so that it could read text files directly into memory
> without any deserialisation.
>
> The biggest factor in favour of big-endian formats is the dominance of
> little-endian architectures: if you forget to deal with endianness
> issues, you'll find out sooner rather than later.

A corollary seems to be that you must first cut a finger  with saw before 
being allowed to use the saw.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From karl at kls2.com  Sun Jul  5 10:31:47 2009
From: karl at kls2.com (Karl Swartz)
Date: Sun, 5 Jul 2009 10:31:47 -0700
Subject: [Proj] The trouble with grid datum correction files
In-Reply-To: <200907042010.55392.geraldi.evenden@gmail.com>
References: <mailman.1.1246726801.6511.proj@lists.maptools.org>
	<01365F1C-FA29-4F0E-B808-A15418BBEAB1@mac.com>
	<200907042010.55392.geraldi.evenden@gmail.com>
Message-ID: <20090705173147.GA98281@orion2.kls2.com>

> > (http://en.wikipedia.org/wiki/Endian#Endianness_in_networking ).
> 
> For the moment, I do not think we should concern ourselves with binary
> data *and* network protocol.  This introduces an additional complex
> layer ...

If a problem has already been solved in one space, it seems silly to
blindly reinvent the wheel.  In various binary formats I've developed,
borrowing the nton{s,l}() routines from the networking space is simple
and portable.

> At the moment what bothers me most is the fact that I have the strong
> feeling that those who assembled these data bases were either ignorant
> of the problem or chose to ignore it.

Given that some of these formats may have their roots in times when CPU
cycles (to convert data) were precious and networking was a research
project, you may not be too far off the mark because there was no more
near-term need than there was for four-digit years.  Look at the number
of files in the petromeum exploration space that use EBCDIC, 370 FP
formats, and are sized to fit on a 3390 tapes!

 -- Karl


From geraldi.evenden at gmail.com  Sun Jul  5 11:49:25 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Sun, 5 Jul 2009 14:49:25 -0400
Subject: [Proj] The trouble with grid datum correction files
In-Reply-To: <20090705173147.GA98281@orion2.kls2.com>
References: <mailman.1.1246726801.6511.proj@lists.maptools.org>
	<200907042010.55392.geraldi.evenden@gmail.com>
	<20090705173147.GA98281@orion2.kls2.com>
Message-ID: <200907051449.25659.geraldi.evenden@gmail.com>

On Sunday 05 July 2009 1:31:47 pm Karl Swartz wrote:
> > > (http://en.wikipedia.org/wiki/Endian#Endianness_in_networking ).
> >
> > For the moment, I do not think we should concern ourselves with binary
> > data *and* network protocol.  This introduces an additional complex
> > layer ...
>
> If a problem has already been solved in one space, it seems silly to
> blindly reinvent the wheel.  In various binary formats I've developed,
> borrowing the nton{s,l}() routines from the networking space is simple
> and portable.

The matter of conversion is not an issue to me other than the nuisance *and* 
that if one is to develop transportable software it brings up the issue of 
*another* damn machine dependent factor to test in transferring code.

> > At the moment what bothers me most is the fact that I have the strong
> > feeling that those who assembled these data bases were either ignorant
> > of the problem or chose to ignore it.
>
> Given that some of these formats may have their roots in times when CPU
> cycles (to convert data) were precious and networking was a research
> project, you may not be too far off the mark because there was no more
> near-term need than there was for four-digit years.  Look at the number
> of files in the petromeum exploration space that use EBCDIC, 370 FP
> formats, and are sized to fit on a 3390 tapes!

Good ol' EBCDIC.  I haven't thought about that in eons.  I used to keep a card 
list of it as a souveneer.

Getting back to the case at hand: what principally concerns me is that endian 
was not specified as part of the details of format description of the NT2v 
format and I think that that factor needs to be addressed by the powers in 
control of the format.  Same with the US files.  What I was hoping for was 
that there were some in this group who might have some clout with those who 
control these formats and put a bug in their ear.

The Swiss distribution, chenyx06.zip, makes strong case for ASCII 
distribution.  The compressed ascii version of the NTv2 file is a few bytes 
smaller than the original binary.  No endian problems here!

The Swiss always seem to have their act together.

gie at charon:~/NEW_CARTO/geodesy/gridcon$ m CHENYX06.asc
NUM_OREC 11
NUM_SREC 11
NUM_FILE  1
GS_TYPE SECONDS
VERSION NTv2.0
SYSTEM_FCH1903
SYSTEM_TCH1903+
MAJOR_F  6377397.155
MINOR_F  6356078.963
MAJOR_T  6377397.155
MINOR_T  6356078.963
SUB_NAMECHENyx06
PARENT  NONE
CREATED 08-06-12
UPDATED 08-06-12
S_LAT     163680.000000
N_LAT     173040.000000
E_LONG    -39780.000000
W_LONG    -19980.000000
LAT_INC       30.000000
LONG_INC      30.000000
GS_COUNT206893
  -.000001   .000002   .001000   .001000
  -.000001   .000002   .001000   .001000
   ...

The rediculous thing is having a "-" in front of the longitude values, but 
that is not the Swiss' fault.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From huntc at mac.com  Sun Jul  5 16:10:45 2009
From: huntc at mac.com (Christopher Hunt)
Date: Mon, 6 Jul 2009 09:10:45 +1000
Subject: [Proj] The trouble with grid datum correction files
In-Reply-To: <01365F1C-FA29-4F0E-B808-A15418BBEAB1@mac.com>
References: <mailman.1.1246726801.6511.proj@lists.maptools.org>
	<01365F1C-FA29-4F0E-B808-A15418BBEAB1@mac.com>
Message-ID: <EFEF4B6F-6FD7-4042-9721-A1902C277E27@mac.com>

Hi Evan et. al.,

What I am trying to state here is that IF you are in a position to  
prescribe the binary format of a file then prescribing big endian is  
reasonable where there is nothing else declaring the endianess.  
Furthermore whether the data is being streamed from a file or a  
network socket should be irrelevant.

However it appears that you are not in a position to prescribe the  
format of the data so I suppose my message is mute. :-)

Kind regards,
Christopher

On 05/07/2009, at 9:27 AM, Christopher Hunt wrote:

> Hi there,
>
> I do not claim to fully understand the context of the issue here,  
> but as a software developer I have an expectation for portable  
> binary data to be presented in big endian form. My expectation is  
> derived from the big endian nature of data in binary network  
> protocols (http://en.wikipedia.org/wiki/Endian#Endianness_in_networking 
> ).
>
> Kind regards,
> Christopher



From huntc at mac.com  Sun Jul  5 16:12:44 2009
From: huntc at mac.com (Christopher Hunt)
Date: Mon, 6 Jul 2009 09:12:44 +1000
Subject: [Proj] The trouble with grid datum correction files
In-Reply-To: <EFEF4B6F-6FD7-4042-9721-A1902C277E27@mac.com>
References: <mailman.1.1246726801.6511.proj@lists.maptools.org>
	<01365F1C-FA29-4F0E-B808-A15418BBEAB1@mac.com>
	<EFEF4B6F-6FD7-4042-9721-A1902C277E27@mac.com>
Message-ID: <0B4CFCB3-75B6-4234-ABC2-C8FBAF48D4AF@mac.com>

Sorry, I meant to address Gerald, not Evan.

On 06/07/2009, at 9:10 AM, Christopher Hunt wrote:

> Hi Evan et. al.,
>
> What I am trying to state here is that IF you are in a position to  
> prescribe the binary format of a file then prescribing big endian is  
> reasonable where there is nothing else declaring the endianess.  
> Furthermore whether the data is being streamed from a file or a  
> network socket should be irrelevant.
>
> However it appears that you are not in a position to prescribe the  
> format of the data so I suppose my message is mute. :-)
>
> Kind regards,
> Christopher
>
> On 05/07/2009, at 9:27 AM, Christopher Hunt wrote:
>
>> Hi there,
>>
>> I do not claim to fully understand the context of the issue here,  
>> but as a software developer I have an expectation for portable  
>> binary data to be presented in big endian form. My expectation is  
>> derived from the big endian nature of data in binary network  
>> protocols (http://en.wikipedia.org/wiki/Endian#Endianness_in_networking 
>> ).
>>
>> Kind regards,
>> Christopher
>



From schubert.seb at googlemail.com  Mon Jul  6 03:27:09 2009
From: schubert.seb at googlemail.com (Sebastian Schubert)
Date: Mon, 6 Jul 2009 12:27:09 +0200
Subject: [Proj] Accuracy Cassini Solder -> lat lon 200m?!
In-Reply-To: <4A4DD1D3.4020306@free.fr>
References: <200907031110.29429.schubert.seb@googlemail.com>
	<4A4DD1D3.4020306@free.fr>
Message-ID: <200907061227.15219.schubert.seb@googlemail.com>

Dear all,

* On Friday 03 July 2009, 11:39:31, Jean-Claude Repetto wrote:
> Sebastian Schubert a écrit :
> > I want to convert from Solder system used in the city of Berlin
> > (EPSG:3068) to the standard lat lon system.
>
> What do you mean "standard lat lon system" ? If you mean WGS84, you
> should try :
> cs2cs -v +init=epsg:3068 +to +init=epsg:4326

I would like to understand this a bit more. I know this is probably not 
the perfect place to ask but I do not know where to ask. I would be 
also very happy to be given a hint where to find the solution myself.

As far as I understand, the standard settings, I applied before:

schubert at linux-8ubn:~> cs2cs -v +init=epsg:3068
...
# ---- To Coordinate System ----
#Lat/long (Geodetic alias)
#
# +proj=latlong +datum=potsdam +ellps=bessel +towgs84=606.0,23.0,413.0

refer to the EPSG::6314 Deutsches Hauptdreiecksnetz. The not vanishing 
values of towgs84 show that this is not wgs84. This gives the same 
results as the formulas found in the epsg guide
http://www.epsg.org/guides/G7-2.html
when using the parameters for the ellipsoid given in the epsg database 
for EPSG::6314 Deutsches Hauptdreiecksnetz.

However, I thought that when I replace these parameters with the ones of 
wgs84, I should actually get wgs84 coordinates. This does not seem to 
be true. Does this mean that eg the ellipsiod has another centre? So 
the formulas given in the guide are only applicable for exactly one 
Base Geodetic CRS (in this case DHDN)? So proj does a two step 
conversion when I want to convert to wgs84: convert to Base Geodatic 
system, then convert to wgs84? Are the formulas for the latter given 
somewhere?

Thanks a lot!
Sebastian
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 197 bytes
Desc: This is a digitally signed message part.
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090706/b2283e5a/attachment.sig>

From cjmce at lsu.edu  Mon Jul  6 06:34:15 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Mon, 6 Jul 2009 08:34:15 -0500
Subject: [Proj] Accuracy Cassini Solder -> lat lon 200m?!
References: <200907031110.29429.schubert.seb@googlemail.com><4A4DD1D3.4020306@free.fr>
	<200907061227.15219.schubert.seb@googlemail.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC275B@email002.lsu.edu>

Sebastian,
 
Whether you use EPSG parameters or any other set of parameters, you will never get exact conversion to the WGS84 datum from an old classical datum.  For all intents and purposes, WGS84 is "perfect" and the old systems developed with classical triangulation and widely-spaced baselines physically measured on the ground with invar tapes were never "perfect."  All of the datum shift algorithms are compromises ... none offer an exact conversion.  Adding additional parameters such as changing from a three-parameter transformation to a seven-parameter transformation will give a better conversion, but will still fall short of perfection.
 
As a general rule, for a given number of parameters for a transformation from a classical datum to an inertial datum such as WGS84, the smaller the area from which the parameters have been derived, then the higher the accuracy of the transformation for that given area.
 
National governments commonly offer the best compromise for such datum transformations ... if they so choose to do so.  That is because they have access to the entire database of all of their geodetic control, and rarely does anyone else.  

C. Mugnier
LOUISIANA STATE UNIVERSITY
 
P.S. Consider reading some of my past columns - they may help understanding some of this material.
www.ASPRS.org/resources/grids 

________________________________

From: proj-bounces at lists.maptools.org on behalf of Sebastian Schubert
Sent: Mon 06-Jul-09 05:27
To: proj at lists.maptools.org
Subject: Re: [Proj] Accuracy Cassini Solder -> lat lon 200m?!



Dear all,

* On Friday 03 July 2009, 11:39:31, Jean-Claude Repetto wrote:
> Sebastian Schubert a écrit :
> > I want to convert from Solder system used in the city of Berlin
> > (EPSG:3068) to the standard lat lon system.
>
> What do you mean "standard lat lon system" ? If you mean WGS84, you
> should try :
> cs2cs -v +init=epsg:3068 +to +init=epsg:4326

I would like to understand this a bit more. I know this is probably not
the perfect place to ask but I do not know where to ask. I would be
also very happy to be given a hint where to find the solution myself.

As far as I understand, the standard settings, I applied before:

schubert at linux-8ubn:~> cs2cs -v +init=epsg:3068
...
# ---- To Coordinate System ----
#Lat/long (Geodetic alias)
#
# +proj=latlong +datum=potsdam +ellps=bessel +towgs84=606.0,23.0,413.0

refer to the EPSG::6314 Deutsches Hauptdreiecksnetz. The not vanishing
values of towgs84 show that this is not wgs84. This gives the same
results as the formulas found in the epsg guide
http://www.epsg.org/guides/G7-2.html
when using the parameters for the ellipsoid given in the epsg database
for EPSG::6314 Deutsches Hauptdreiecksnetz.

However, I thought that when I replace these parameters with the ones of
wgs84, I should actually get wgs84 coordinates. This does not seem to
be true. Does this mean that eg the ellipsiod has another centre? So
the formulas given in the guide are only applicable for exactly one
Base Geodetic CRS (in this case DHDN)? So proj does a two step
conversion when I want to convert to wgs84: convert to Base Geodatic
system, then convert to wgs84? Are the formulas for the latter given
somewhere?

Thanks a lot!
Sebastian


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090706/a1305683/attachment.html>

From mlennert at club.worldonline.be  Tue Jul  7 07:14:50 2009
From: mlennert at club.worldonline.be (Moritz Lennert)
Date: Tue, 07 Jul 2009 16:14:50 +0200
Subject: [Proj] trying to understand results of reprojecting from epsg 4326
 to epsg 31370
Message-ID: <4A53585A.9000208@club.worldonline.be>

Hello,

I'm trying to reproject the following WGS84 Lat-Long (EPSG 4326) 
coordinates to the Belgian 1972 projection EPSG 31370:

4.468493 50.856057

Using the official software from the Belgian National Geographic 
Institute, I get the following coordinates (confirmed by a contact in 
the Institute):

157022.870 171745.084

Using cs2cs +init=epsg:4326 +to +init=epsg:31370, I get

157201.51    171803.24

i.e. way off the official response.

31370 is defined as

+proj=lcc +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90 
+lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl 
+towgs84=106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1 +units=m 
+no_defs

so datum transformation is defined.

The transformation parameters are confirmed by the Belgian Institute 
(http://www.ign.be/FR/FR2-1-2.shtm), which considers ETRS89 to be 
equivalent to WGS84:

Paramètres de ETRS89 vers BD72
Tx 	106.868628
Ty 	-52.297783
Tz 	103.723893
Rx 	0.336570
Ry 	-0.456955
Rz 	1.842183
scale 	1.0000012747

As these parameters are in the direction fromwgs84, they should be 
negated to get the inverse transformation. So, IIUC, 31370 should 
actually be defined as:

+proj=lcc +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90 
+lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl 
+towgs84=-106.869,52.2978,-103.724,-0.33657,0.456955,-1.84218,1 +units=m 
+no_defs

When I try this, I get:
157080.62	171775.09

Much close, but still no good. The Institute also use a correction grid, 
but this should only change accuracy at the centimeter level.

Interestingly enough, when I use the 3-parameter transformation given by 
EPSG 1610:

+proj=lcc +lat_2=51.16666723333333 +lat_1=49.8333339 +lat_0=90 
+lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl 
+towgs84=-125.8,79.9,-100.5 +units=m +no_defs

I get perfect results:
157022.80    171745.11

Does anyone have an explanation for this behaviour ?

Moritz


From cjmce at lsu.edu  Tue Jul  7 07:53:17 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 7 Jul 2009 09:53:17 -0500
Subject: [Proj] trying to understand results of reprojecting from epsg
	4326 to epsg 31370
References: <4A53585A.9000208@club.worldonline.be>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2761@email002.lsu.edu>

Consider not changing the signs of the rotation elements.
 
C. Mugnier
LOUISIANA STATE UNIVERSITY

________________________________

From: proj-bounces at lists.maptools.org on behalf of Moritz Lennert
Sent: Tue 07-Jul-09 09:14
To: Proj at lists.maptools.org
Subject: [Proj] trying to understand results of reprojecting from epsg 4326 to epsg 31370



Hello,

I'm trying to reproject the following WGS84 Lat-Long (EPSG 4326)
coordinates to the Belgian 1972 projection EPSG 31370:

4.468493 50.856057

Using the official software from the Belgian National Geographic
Institute, I get the following coordinates (confirmed by a contact in
the Institute):

157022.870 171745.084

Using cs2cs +init=epsg:4326 +to +init=epsg:31370, I get

157201.51    171803.24

i.e. way off the official response.

31370 is defined as

+proj=lcc +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90
+lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl
+towgs84=106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1 +units=m
+no_defs

so datum transformation is defined.

The transformation parameters are confirmed by the Belgian Institute
(http://www.ign.be/FR/FR2-1-2.shtm), which considers ETRS89 to be
equivalent to WGS84:

Paramètres de ETRS89 vers BD72
Tx      106.868628
Ty      -52.297783
Tz      103.723893
Rx      0.336570
Ry      -0.456955
Rz      1.842183
scale   1.0000012747

As these parameters are in the direction fromwgs84, they should be
negated to get the inverse transformation. So, IIUC, 31370 should
actually be defined as:

+proj=lcc +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90
+lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl
+towgs84=-106.869,52.2978,-103.724,-0.33657,0.456955,-1.84218,1 +units=m
+no_defs

When I try this, I get:
157080.62       171775.09

Much close, but still no good. The Institute also use a correction grid,
but this should only change accuracy at the centimeter level.

Interestingly enough, when I use the 3-parameter transformation given by
EPSG 1610:

+proj=lcc +lat_2=51.16666723333333 +lat_1=49.8333339 +lat_0=90
+lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl
+towgs84=-125.8,79.9,-100.5 +units=m +no_defs

I get perfect results:
157022.80    171745.11

Does anyone have an explanation for this behaviour ?

Moritz
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090707/fe858495/attachment.html>

From ndzinn at comcast.net  Tue Jul  7 07:56:23 2009
From: ndzinn at comcast.net (Noel Zinn)
Date: Tue, 7 Jul 2009 09:56:23 -0500
Subject: [Proj] trying to understand results of reprojecting from epsg
	4326 to epsg 31370
References: <4A53585A.9000208@club.worldonline.be>
Message-ID: <13519873274147E4B5A0134A6EE82568@Noeleee>

Consider changing the signs of the three rotations if you can do that 
manually, or the rotation sense of the 7-parameter transformation.
-Noel

----- Original Message ----- 
From: "Moritz Lennert" <mlennert at club.worldonline.be>
To: <Proj at lists.maptools.org>
Sent: Tuesday, July 07, 2009 9:14 AM
Subject: [Proj] trying to understand results of reprojecting from epsg 4326 
to epsg 31370


Hello,

I'm trying to reproject the following WGS84 Lat-Long (EPSG 4326)
coordinates to the Belgian 1972 projection EPSG 31370:

4.468493 50.856057

Using the official software from the Belgian National Geographic
Institute, I get the following coordinates (confirmed by a contact in
the Institute):

157022.870 171745.084

Using cs2cs +init=epsg:4326 +to +init=epsg:31370, I get

157201.51    171803.24

i.e. way off the official response.

31370 is defined as

+proj=lcc +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90
+lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl
+towgs84=106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1 +units=m
+no_defs

so datum transformation is defined.

The transformation parameters are confirmed by the Belgian Institute
(http://www.ign.be/FR/FR2-1-2.shtm), which considers ETRS89 to be
equivalent to WGS84:

Paramètres de ETRS89 vers BD72
Tx 106.868628
Ty -52.297783
Tz 103.723893
Rx 0.336570
Ry -0.456955
Rz 1.842183
scale 1.0000012747

As these parameters are in the direction fromwgs84, they should be
negated to get the inverse transformation. So, IIUC, 31370 should
actually be defined as:

+proj=lcc +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90
+lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl
+towgs84=-106.869,52.2978,-103.724,-0.33657,0.456955,-1.84218,1 +units=m
+no_defs

When I try this, I get:
157080.62 171775.09

Much close, but still no good. The Institute also use a correction grid,
but this should only change accuracy at the centimeter level.

Interestingly enough, when I use the 3-parameter transformation given by
EPSG 1610:

+proj=lcc +lat_2=51.16666723333333 +lat_1=49.8333339 +lat_0=90
+lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl
+towgs84=-125.8,79.9,-100.5 +units=m +no_defs

I get perfect results:
157022.80    171745.11

Does anyone have an explanation for this behaviour ?

Moritz
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj 



From ovv at hetnet.nl  Tue Jul  7 08:46:42 2009
From: ovv at hetnet.nl (OvV_HN)
Date: Tue, 7 Jul 2009 17:46:42 +0200
Subject: [Proj] trying to understand results of reprojecting from epsg
	4326 to epsg 31370
In-Reply-To: <4A53585A.9000208@club.worldonline.be>
References: <4A53585A.9000208@club.worldonline.be>
Message-ID: <514C96B58C02411889BCFCBE09080C6A@PCHP>


----- Original Message ----- 
From: "Moritz Lennert" <mlennert at club.worldonline.be>
To: <Proj at lists.maptools.org>
Sent: Tuesday, July 07, 2009 4:14 PM
Subject: [Proj] trying to understand results of reprojecting from epsg 4326 
to epsg 31370


Hello,

I'm trying to reproject the following WGS84 Lat-Long (EPSG 4326)
coordinates to the Belgian 1972 projection EPSG 31370:

4.468493 50.856057

Using the official software from the Belgian National Geographic
Institute, I get the following coordinates (confirmed by a contact in
the Institute):

157022.870 171745.084


etc.


Reply:

With my software I get x,y:
157022.916, 171745.224
I used your official transformation parameters.
Note however the following:
(a) The scaling factor I used is ds=1.2747, since usually one gives the 
difference with 1.0 in units of 1e-6. The value you stated was: scale 
1.0000012747
(b) PROJ does a position vector datum transform, I did a coordinate frame 
transform with the values and signs of the parameters you stated. I  haven't 
checked whether the Belgian NGI (= IGN) actually uses this, but I got values 
very close to the needed values.
(c) I used the LCC version with fixed values of some projection constants, 
as stated by the Belgian NGI.
With the calculated projection constants I get for Y 171745.182 m; X is at 
the mm level the same.
(d) Note that my values are without grid interpolation.

Oscar van Vlijmen







From mlennert at club.worldonline.be  Tue Jul  7 09:00:17 2009
From: mlennert at club.worldonline.be (Moritz Lennert)
Date: Tue, 07 Jul 2009 18:00:17 +0200
Subject: [Proj] trying to understand results of reprojecting from epsg
 4326 to epsg 31370
In-Reply-To: <13519873274147E4B5A0134A6EE82568@Noeleee>
References: <4A53585A.9000208@club.worldonline.be>
	<13519873274147E4B5A0134A6EE82568@Noeleee>
Message-ID: <4A537111.20108@club.worldonline.be>

On 07/07/09 16:56, Noel Zinn wrote:
> Consider changing the signs of the three rotations if you can do that 
> manually, or the rotation sense of the 7-parameter transformation.

That was it. Thanks also to Clifford for the same hint. Could someone 
explain the logic to me ? Why negate the translation, but not the 
rotation compared to the WGS84->Bel72 transformation ?

And: should the information linked to EPSG code 31370 be corrected ? How 
should I go about doing this ?

Moritz


From jrepetto at free.fr  Tue Jul  7 09:05:01 2009
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue, 07 Jul 2009 18:05:01 +0200
Subject: [Proj] trying to understand results of reprojecting from epsg
 4326 to epsg 31370
In-Reply-To: <4A53585A.9000208@club.worldonline.be>
References: <4A53585A.9000208@club.worldonline.be>
Message-ID: <4A53722D.5090803@free.fr>

Hello,

Moritz Lennert a écrit :
> 
> I'm trying to reproject the following WGS84 Lat-Long (EPSG 4326) 
> coordinates to the Belgian 1972 projection EPSG 31370:
> 
> 4.468493 50.856057
> 
> Using the official software from the Belgian National Geographic 
> Institute, I get the following coordinates (confirmed by a contact in 
> the Institute):
> 
> 157022.870 171745.084
> 
> Using cs2cs +init=epsg:4326 +to +init=epsg:31370, I get
> 
> 157201.51    171803.24
> 
> i.e. way off the official response.
> 
> 31370 is defined as
> 
> +proj=lcc +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90 
> +lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl 
> +towgs84=106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1 +units=m 
> +no_defs
>

The correct parameters are :

+proj=lcc +lat_1=51.16666723333333 +lat_2=49.8333339 +lat_0=90 
+lon_0=4.367486666666666 +x_0=150000.013 +y_0=5400088.438 +ellps=intl 
+towgs84=-106.868628,52.297783,-103.723893,0.33657,-0.456955,1.842183,-1.2747 
+units=m +no_defs

(your 7th parameter is incorrect).

The results are :
157022.92	171745.23 -42.92

I spend several hours last week to clarify that problem !

Jean-Claude



From cjmce at lsu.edu  Tue Jul  7 09:36:26 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Tue, 7 Jul 2009 11:36:26 -0500
Subject: [Proj] trying to understand results of reprojecting from epsg
	4326 to epsg 31370
References: <4A53585A.9000208@club.worldonline.be><13519873274147E4B5A0134A6EE82568@Noeleee>
	<4A537111.20108@club.worldonline.be>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2764@email002.lsu.edu>

There are two different geodetic conventions to the sense of the rotations used for 7-parameter transformations.  There is the right-handed rule used by the Americans and the Australians, and the left-handed rule used by the Europeans.  
 
Explanations regarding which is "correct" generally deteriorate into ethnocentric insults ...  :-)
 
Cliff Mugnier
LOUISIANA STATE UNIVERSITY

________________________________

From: proj-bounces at lists.maptools.org on behalf of Moritz Lennert
Sent: Tue 07-Jul-09 11:00
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] trying to understand results of reprojecting from epsg 4326 to epsg 31370



On 07/07/09 16:56, Noel Zinn wrote:
> Consider changing the signs of the three rotations if you can do that
> manually, or the rotation sense of the 7-parameter transformation.

That was it. Thanks also to Clifford for the same hint. Could someone
explain the logic to me ? Why negate the translation, but not the
rotation compared to the WGS84->Bel72 transformation ?

And: should the information linked to EPSG code 31370 be corrected ? How
should I go about doing this ?

Moritz
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090707/12bcb1ad/attachment.html>

From warmerdam at pobox.com  Tue Jul  7 09:55:31 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 07 Jul 2009 12:55:31 -0400
Subject: [Proj] trying to understand results of reprojecting from epsg
 4326 to epsg 31370
In-Reply-To: <4A537111.20108@club.worldonline.be>
References: <4A53585A.9000208@club.worldonline.be>
	<13519873274147E4B5A0134A6EE82568@Noeleee>
	<4A537111.20108@club.worldonline.be>
Message-ID: <4A537E03.5060709@pobox.com>

Moritz Lennert wrote:
> On 07/07/09 16:56, Noel Zinn wrote:
>> Consider changing the signs of the three rotations if you can do that 
>> manually, or the rotation sense of the 7-parameter transformation.
> 
> That was it. Thanks also to Clifford for the same hint. Could someone 
> explain the logic to me ? Why negate the translation, but not the 
> rotation compared to the WGS84->Bel72 transformation ?
> 
> And: should the information linked to EPSG code 31370 be corrected ? How 
> should I go about doing this ?

Moritz,

File a PROJ.4 ticket and I'll look into it. I need to establish if the
problem is a systematic one in how I translate the parameter from EPSG,
or if it is an incorrect local override or if there is a problem in the
EPSG database itself.  I suspect there are two "towgs84" forumulations
in the EPSG database with different handedness and I'm not properly
differentiating them.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From jrepetto at free.fr  Tue Jul  7 09:57:13 2009
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Tue, 07 Jul 2009 18:57:13 +0200
Subject: [Proj] trying to understand results of reprojecting from epsg
 4326 to epsg 31370
In-Reply-To: <514C96B58C02411889BCFCBE09080C6A@PCHP>
References: <4A53585A.9000208@club.worldonline.be>
	<514C96B58C02411889BCFCBE09080C6A@PCHP>
Message-ID: <4A537E69.70602@free.fr>

OvV_HN wrote :
> (a) The scaling factor I used is ds=1.2747, since usually one gives the 
> difference with 1.0 in units of 1e-6. The value you stated was: scale 
> 1.0000012747

I think the scale factor must be inverted.


From jrepetto at free.fr  Tue Jul  7 09:58:39 2009
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Tue, 07 Jul 2009 18:58:39 +0200
Subject: [Proj] trying to understand results of reprojecting from epsg
 4326 to epsg 31370
In-Reply-To: <4A537111.20108@club.worldonline.be>
References: <4A53585A.9000208@club.worldonline.be>	<13519873274147E4B5A0134A6EE82568@Noeleee>
	<4A537111.20108@club.worldonline.be>
Message-ID: <4A537EBF.4070407@free.fr>

Moritz Lennert a écrit :
> And: should the information linked to EPSG code 31370 be corrected ? How 
> should I go about doing this ?

You can create a ticket on :
http://trac.osgeo.org/proj/report


From andrew.deklerk at gmail.com  Wed Jul  8 04:32:23 2009
From: andrew.deklerk at gmail.com (stretch)
Date: Wed, 8 Jul 2009 04:32:23 -0700 (PDT)
Subject: [Proj]  map coordinates in different coordinate system
Message-ID: <1247052743060-3224904.post@n2.nabble.com>


Hi 

I recently posted this to the openlayers forum, and was recommended to post
the question here:
I am trying to display my map coordinates in a different coordinate system
to what the map is in. I have followed the instructions with using proj4js
and have the following setup:

-------------------------------- 
I am referencing the proj4js combined and compressed js file, and I am
referencing the two additional EPSG2054.js and EPSG4148.js, which contain: 

Proj4js.defs["EPSG:2054"] = "+proj=tmerc +south +ellips=WGS84 +datum=WGS84
+lon_o=31 +k_0=1 +units=m +no_defs"; 
and 
Proj4js.defs["EPSG:4148"]  = "+proj=longlat +ellps=WGS84
+towgs84=0,0,0,0,0,0,0 +no_defs "; 
----------------------------------
The openlayers code for reference is:

var options = { scales: [50000, 35000, 25000, 20000,
15000,10000,7500,5000,2500,1000,500], 
                            maxExtent: new
OpenLayers.Bounds(-80999,-3309314,-74182,-3305038), 
                            'projection':'EPSG:2054', 
                            units:'m' }; 

    map = new OpenLayers.Map( $('map'),options); 

var mp=new OpenLayers.Control.MousePosition({div:$('coordsdd')}); 
    mp.displayProjection = new OpenLayers.Projection("EPSG:4148"); 
    map.addControl(mp); 
----------------------------------
The coordinates are changed, but not correctly - i.e they are converted from
metres to metres, where they should be displaying dd. 
The first thing you will notice is that 2054 is not a standard. Would
someone be able to verify the correctness of this format?.

I have successfully translated coordinates previously using just
"+proj=tmerc +ellips=WGS84 +datum=WGS84 +lon_o=31"

Thanks in advance
Andrew

Thanks in advance 
Andrew 

-- 
View this message in context: http://n2.nabble.com/map-coordinates-in-different-coordinate-system-tp3224904p3224904.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From plieger at knmi.nl  Wed Jul  8 08:25:11 2009
From: plieger at knmi.nl (Maarten Plieger)
Date: Wed, 08 Jul 2009 15:25:11 +0000
Subject: [Proj] Error in make check for version 4.6.1 in test 'testvarious',
 does not occur in version 4.6.0
Message-ID: <4A54BA57.4070107@knmi.nl>

Hi All,

We are having a problem with compiling proj4 version 4.6.1, when running 
'make check' a problem occurs in one of the tests:

./testvarious ../src/cs2cs
============================================
Running ./testvarious using ../src/cs2cs:
============================================
doing tests into file td_out, please wait
diff td_out with td_out.dist
3,4c3,4
< 111d00'00.000"W 44d00'00.000"N 0.0 111dW 44dN 0.000
< 111d00'00.000"W 39d00'00.000"N 0.0 111dW 39dN 0.000
---
 > 111d00'00.000"W 44d00'00.000"N 0.0 111d0'3.085"W 43d59'59.756"N 0.000
 > 111d00'00.000"W 39d00'00.000"N 0.0 111d0'2.604"W 38d59'59.912"N 0.000
7,8c7,8
< 111d00'00.000"W 44d00'00.000"N 0.0 111dW 44dN 0.000
< 111d00'00.000"W 39d00'00.000"N 0.0 111dW 39dN 0.000
---
 > 111d00'00.000"W 44d00'00.000"N 0.0 111d0'2.788"W 43d59'59.725"N 0.000
 > 111d00'00.000"W 39d00'00.000"N 0.0 111d0'2.604"W 38d59'59.912"N 0.000
11,14c11,14
< 79d58'00.000"W 37d02'00.000"N 0.0 79d58'W 37d2'N 0.000
< 79d58'00.000"W 36d58'00.000"N 0.0 79d58'W 36d58'N 0.000
< 79d58'00.000"W 37d02'00.000"N 0.0 79d58'W 37d2'N 0.000
< 79d58'00.000"W 36d58'00.000"N 0.0 79d58'W 36d58'N 0.000
---
 > 79d58'00.000"W 37d02'00.000"N 0.0 79d58'0.005"W 37d1'59.998"N 0.000
 > 79d58'00.000"W 36d58'00.000"N 0.0 79d57'59.128"W 36d58'0.501"N 0.000
 > 79d58'00.000"W 37d02'00.000"N 0.0 79d57'59.126"W 37d2'0.501"N 0.000
 > 79d58'00.000"W 36d58'00.000"N 0.0 79d57'59.128"W 36d58'0.501"N 0.000

PROBLEMS HAVE OCCURED
test file td_out saved

make[2]: *** [check-local] Error 100
make[2]: Leaving directory 
`/nfs/libs/nadc/swmaint/RHE5_20090707/packages/proj-4.6.1/nad'
make[1]: *** [check-am] Error 2
make[1]: Leaving directory 
`/nfs/libs/nadc/swmaint/RHE5_20090707/packages/proj-4.6.1/nad'
make: *** [check-recursive] Error 1

Is there a problem with 4.6.1 or is there a problem with our 
configuration? We will stay currently at version 4.6.0 which runs fine.

Thanks in advance,
 Maarten Plieger

-- 
Maarten Plieger
KNMI, R&D Information and Observation Technology, De Bilt
(t) +31 30 2206330 



From warmerdam at pobox.com  Wed Jul  8 08:28:15 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 08 Jul 2009 11:28:15 -0400
Subject: [Proj] map coordinates in different coordinate system
In-Reply-To: <1247052743060-3224904.post@n2.nabble.com>
References: <1247052743060-3224904.post@n2.nabble.com>
Message-ID: <4A54BB0F.7030501@pobox.com>

stretch wrote:
...
> -------------------------------- 
> I am referencing the proj4js combined and compressed js file, and I am
> referencing the two additional EPSG2054.js and EPSG4148.js, which contain: 
> 
> Proj4js.defs["EPSG:2054"] = "+proj=tmerc +south +ellips=WGS84 +datum=WGS84
> +lon_o=31 +k_0=1 +units=m +no_defs"; 
> and 
...
> The coordinates are changed, but not correctly - i.e they are converted from
> metres to metres, where they should be displaying dd. 
> The first thing you will notice is that 2054 is not a standard. Would
> someone be able to verify the correctness of this format?.
> 
> I have successfully translated coordinates previously using just
> "+proj=tmerc +ellips=WGS84 +datum=WGS84 +lon_o=31"

Andrew,

I think the proj4js project uses the MetaCRS mailing list for discussions.
However, I suspect Mike Adair is also on this list.  I'm not to familiar
with the details of proj4js's implementation so I'll speak briefly from
the PROJ.4 point of view.

I am not sure why you say that EPSG:2054 is not a standard. It is a normal
part of the EPSG database. However, it uses the projection method
Transverse Mercator South Orientated.  The normal software used to translate
the EPSG database to a PROJ.4 dictionary does not handle this projection
method since I'm uncertain if it is plain transverse mercator, or if there
is also an implicit change in direction of the Y values (to southings
instead of northings).

I believe that for PROJ.4 the +south parameter is only used with UTM,
not transverse mercator.  So it is likely not being used in this
situation.

I also suspect that +lon_o should be +lon_0 (note use of a zero instead
of a lower case letter "O").

I'm not sure if any of this will help you though.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ovv at hetnet.nl  Wed Jul  8 08:34:18 2009
From: ovv at hetnet.nl (OvV_HN)
Date: Wed, 8 Jul 2009 17:34:18 +0200
Subject: [Proj] trying to understand results of reprojecting from
	epsg4326 to epsg 31370
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC2764@email002.lsu.edu>
References: <4A53585A.9000208@club.worldonline.be><13519873274147E4B5A0134A6EE82568@Noeleee><4A537111.20108@club.worldonline.be>
	<B597ADFC46B67741B18EA6AA13613FF7EC2764@email002.lsu.edu>
Message-ID: <1D93022CC40D4015891CCA1759F5E1BA@PCHP>


----- Original Message ----- 
From: "Clifford J Mugnier" <cjmce at lsu.edu>
To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
Sent: Tuesday, July 07, 2009 6:36 PM
Subject: Re: [Proj] trying to understand results of reprojecting from 
epsg4326 to epsg 31370


There are two different geodetic conventions to the sense of the rotations 
used for 7-parameter transformations.  There is the right-handed rule used 
by the Americans and the Australians, and the left-handed rule used by the 
Europeans.



Reply from Oscar van Vlijmen:

Then again, it really helps to read the fu... (erm... fabulous) manual.
In the pdf article found under
"Transformaties tussen geografische cöordinaten (φ,λ) en vlakke coördinaten 
(x,y) voor Lambert 1972 en 2008."
on the page
http://www.ngi.be/NL/NL2-1-7.shtm
everything regarding rotation models, signs, errors wrt the Lambert 1972 
projection is clearly explained.
It is possible that there is also a French version of that article 
available.







From andrew.deklerk at gmail.com  Wed Jul  8 11:46:40 2009
From: andrew.deklerk at gmail.com (stretch)
Date: Wed, 8 Jul 2009 11:46:40 -0700 (PDT)
Subject: [Proj] map coordinates in different coordinate system
In-Reply-To: <4A54BB0F.7030501@pobox.com>
References: <1247052743060-3224904.post@n2.nabble.com>
	<4A54BB0F.7030501@pobox.com>
Message-ID: <1247078800968-3227241.post@n2.nabble.com>




Frank Warmerdam wrote:
> 
> 
> I am not sure why you say that EPSG:2054 is not a standard. It is a normal
> part of the EPSG database. However, it uses the projection method
> Transverse Mercator South Orientated.  The normal software used to
> translate
> the EPSG database to a PROJ.4 dictionary does not handle this projection
> method since I'm uncertain if it is plain transverse mercator, or if there
> is also an implicit change in direction of the Y values (to southings
> instead of northings).
> 
> 

Frank 
- Thanks for the response. Why i say it is not standard is because the proj4
definition is not there as standard with the epsg files distributed with
gdal etc. This is eveident if you browse it at
http://www.spatialreference.org/ref/epsg/2054/

There is nothing special about 2054. It is merely transverse mercator using
WGS84 datum. if I translate coordinates using cs2cs from metres to degrees
decimal using "+proj=tmerc +lon_0=31 +datum=WGS84" the answer is correct.
Without knowing enough about projections, i am 99% sure that it is not South
orientated. 

I therefore first tried that, then kept on adding bits until I found someone
using the definition posted above. and yes the "o" is a typo. I also tries
without the +south, but had no luck.

So - I can ask the proj4js list, but I would love to get clarity on the
correct format proj4 format assuming that 2054 is not south orientated and
merely TM with WGS84 datum. That would help immensly. I assume it is:
"+proj=tmerc +ellips=WGS84 +datum=WGS84 +lon_0=31 +k_0=1 +units=m +no_defs"


Thanks
Andrew
-- 
View this message in context: http://n2.nabble.com/map-coordinates-in-different-coordinate-system-tp3224904p3227241.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From mlennert at club.worldonline.be  Thu Jul  9 00:12:54 2009
From: mlennert at club.worldonline.be (Moritz Lennert)
Date: Thu, 09 Jul 2009 09:12:54 +0200
Subject: [Proj] trying to understand results of reprojecting
 from	epsg4326 to epsg 31370
In-Reply-To: <1D93022CC40D4015891CCA1759F5E1BA@PCHP>
References: <4A53585A.9000208@club.worldonline.be><13519873274147E4B5A0134A6EE82568@Noeleee><4A537111.20108@club.worldonline.be>	<B597ADFC46B67741B18EA6AA13613FF7EC2764@email002.lsu.edu>
	<1D93022CC40D4015891CCA1759F5E1BA@PCHP>
Message-ID: <4A559876.1040501@club.worldonline.be>

On 08/07/09 17:34, OvV_HN wrote:
> ----- Original Message ----- 
> From: "Clifford J Mugnier" <cjmce at lsu.edu>
> To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
> Sent: Tuesday, July 07, 2009 6:36 PM
> Subject: Re: [Proj] trying to understand results of reprojecting from 
> epsg4326 to epsg 31370
> 
> 
> There are two different geodetic conventions to the sense of the rotations 
> used for 7-parameter transformations.  There is the right-handed rule used 
> by the Americans and the Australians, and the left-handed rule used by the 
> Europeans.
> 
> 
> 
> Reply from Oscar van Vlijmen:
> 
> Then again, it really helps to read the fu... (erm... fabulous) manual.
> In the pdf article found under
> "Transformaties tussen geografische cöordinaten (φ,λ) en vlakke coördinaten 
> (x,y) voor Lambert 1972 en 2008."
> on the page
> http://www.ngi.be/NL/NL2-1-7.shtm
> everything regarding rotation models, signs, errors wrt the Lambert 1972 
> projection is clearly explained.
> It is possible that there is also a French version of that article 
> available.

I'm sorry, but I don't see where in this document I can see a hint about 
different geodetic conventions concering the sense of rotation, be it in 
the Dutch or the French version...

Moritz


From ovv at hetnet.nl  Thu Jul  9 09:22:30 2009
From: ovv at hetnet.nl (OvV_HN)
Date: Thu, 9 Jul 2009 18:22:30 +0200
Subject: [Proj] map coordinates in different coordinate system
In-Reply-To: <1247078800968-3227241.post@n2.nabble.com>
References: <1247052743060-3224904.post@n2.nabble.com><4A54BB0F.7030501@pobox.com>
	<1247078800968-3227241.post@n2.nabble.com>
Message-ID: <8F00B7F966AE4E308E12ABF5341E4BE7@PCHP>

Seems to me that EPSG:2054 is the Lon_0 = 31d Hartebeesthoek_1994 Transverse 
Mercator projection.
This has a south-west orientation.
Haven't I read somewhere that you can put a minus sign in front of the k_0 
in (lib)proj to get the axes in south-west orientation?

Oscar van Vlijmen



----- Original Message ----- 
From: "stretch" <andrew.deklerk at gmail.com>
To: <proj at lists.maptools.org>
Sent: Wednesday, July 08, 2009 8:46 PM
Subject: Re: [Proj] map coordinates in different coordinate system



> Frank Warmerdam wrote:
>>
>>
>> I am not sure why you say that EPSG:2054 is not a standard. It is a 
>> normal
>> part of the EPSG database. However, it uses the projection method
>> Transverse Mercator South Orientated.  The normal software used to
>> translate
>> the EPSG database to a PROJ.4 dictionary does not handle this projection
>> method since I'm uncertain if it is plain transverse mercator, or if 
>> there
>> is also an implicit change in direction of the Y values (to southings
>> instead of northings).
>>

.....





From ovv at hetnet.nl  Thu Jul  9 09:33:43 2009
From: ovv at hetnet.nl (OvV_HN)
Date: Thu, 9 Jul 2009 18:33:43 +0200
Subject: [Proj] trying to understand results of reprojecting
	from	epsg4326 to epsg 31370
In-Reply-To: <4A559876.1040501@club.worldonline.be>
References: <4A53585A.9000208@club.worldonline.be><13519873274147E4B5A0134A6EE82568@Noeleee><4A537111.20108@club.worldonline.be>	<B597ADFC46B67741B18EA6AA13613FF7EC2764@email002.lsu.edu><1D93022CC40D4015891CCA1759F5E1BA@PCHP>
	<4A559876.1040501@club.worldonline.be>
Message-ID: <A83FBE321B4C4C7BB3D753953A764C91@PCHP>


----- Original Message ----- 
From: "Moritz Lennert" <mlennert at club.worldonline.be>
To: "PROJ.4 and general Projections Discussions" <proj at lists.maptools.org>
Sent: Thursday, July 09, 2009 9:12 AM
Subject: Re: [Proj] trying to understand results of reprojecting from 
epsg4326 to epsg 31370


....

>> In the pdf article found under
>> "Transformaties tussen geografische cöordinaten (φ,λ) en vlakke 
>> coördinaten
>> (x,y) voor Lambert 1972 en 2008."
>> on the page
>> http://www.ngi.be/NL/NL2-1-7.shtm
>> everything regarding rotation models, signs, errors wrt the Lambert 1972
>> projection is clearly explained.
>> It is possible that there is also a French version of that article
>> available.
>
> I'm sorry, but I don't see where in this document I can see a hint about
> different geodetic conventions concering the sense of rotation, be it in
> the Dutch or the French version...
>
> Moritz


So sorry; to me the following line said it all:

"De 7 parameters welke door het NGI worden gepubliceerd (tabel-1) steunen op 
de
‘Coordinate Frame Rotation’ conventie ; als men gebruik maakt van de 
‘Position Vector’
conventie, moet het teken van de drie rotatieparameters veranderd worden 
(tabel-2)."

For the non-Dutch reading audience watching this game from the bleachers a 
translation:
<<The 7 parameters published by the NGI (Table 1) are based on the 
coordinate frame rotation convention; if one uses the position vector 
convention, change the sign of the 3 rotation parameters (Table 2).>>

Oscar van Vlijmen.








From mlennert at club.worldonline.be  Thu Jul  9 10:13:28 2009
From: mlennert at club.worldonline.be (Moritz Lennert)
Date: Thu, 09 Jul 2009 19:13:28 +0200
Subject: [Proj] trying to understand results of reprojecting from epsg
 4326 to epsg 31370
In-Reply-To: <4A537E03.5060709@pobox.com>
References: <4A53585A.9000208@club.worldonline.be>	<13519873274147E4B5A0134A6EE82568@Noeleee>	<4A537111.20108@club.worldonline.be>
	<4A537E03.5060709@pobox.com>
Message-ID: <4A562538.5010400@club.worldonline.be>

On 07/07/09 18:55, Frank Warmerdam wrote:
> Moritz Lennert wrote:
>> On 07/07/09 16:56, Noel Zinn wrote:
>>> Consider changing the signs of the three rotations if you can do that 
>>> manually, or the rotation sense of the 7-parameter transformation.
>> That was it. Thanks also to Clifford for the same hint. Could someone 
>> explain the logic to me ? Why negate the translation, but not the 
>> rotation compared to the WGS84->Bel72 transformation ?
>>
>> And: should the information linked to EPSG code 31370 be corrected ? How 
>> should I go about doing this ?
> 
> Moritz,
> 
> File a PROJ.4 ticket and I'll look into it. 


done

http://trac.osgeo.org/proj/ticket/47

> need to establish if the
> problem is a systematic one in how I translate the parameter from EPSG,
> or if it is an incorrect local override or if there is a problem in the
> EPSG database itself.  I suspect there are two "towgs84" forumulations
> in the EPSG database with different handedness and I'm not properly
> differentiating them.

Not really both the bel72 -> wgs84 and bel72 -> etrs89 use the same 
handedness.

Moritz


From geraldi.evenden at gmail.com  Thu Jul  9 10:25:42 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 9 Jul 2009 13:25:42 -0400
Subject: [Proj] map coordinates in different coordinate system
In-Reply-To: <8F00B7F966AE4E308E12ABF5341E4BE7@PCHP>
References: <1247052743060-3224904.post@n2.nabble.com>
	<1247078800968-3227241.post@n2.nabble.com>
	<8F00B7F966AE4E308E12ABF5341E4BE7@PCHP>
Message-ID: <200907091325.42964.geraldi.evenden@gmail.com>

On Thursday 09 July 2009 12:22:30 pm OvV_HN wrote:
> Seems to me that EPSG:2054 is the Lon_0 = 31d Hartebeesthoek_1994
> Transverse Mercator projection.
> This has a south-west orientation.
> Haven't I read somewhere that you can put a minus sign in front of the k_0
> in (lib)proj to get the axes in south-west orientation?
>
> Oscar van Vlijmen

If just changing the sign of *both* the x and y (easting-northing) is all that 
is involved with the so call "south" orientation, then a negative k_0 will do 
the trick.  Standard proj4 does not make any check on [+]k_0 (aka k).

*However,* understand that k_0 multiplication is carried out on the basic 
projected Cartesian values before the false offsets are added.

As pointed out before, the [+]south option only applies to [+]proj=utm and 
causes the addition of  10,000,000 meters to the northing (y) value so that 
it is positive in the southern hemisphere.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From hamish_b at yahoo.com  Thu Jul  9 17:31:29 2009
From: hamish_b at yahoo.com (Hamish)
Date: Thu, 9 Jul 2009 17:31:29 -0700 (PDT)
Subject: [Proj] map coordinates in different coordinate system
Message-ID: <610211.99183.qm@web110009.mail.gq1.yahoo.com>


Gerald wrote:
> As pointed out before, the [+]south option only applies to
> [+]proj=utm and causes the addition of  10,000,000 meters
> to the northing (y) value so that it is positive in the
> southern hemisphere.

FWIW (in "Frank's" PROJ.4 at least) aea and stere also consider
+south, but in those cases it changes the sign of Pi/2.


Hamish
(mid-winter)



      



From geraldi.evenden at gmail.com  Thu Jul  9 18:13:43 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 9 Jul 2009 21:13:43 -0400
Subject: [Proj] map coordinates in different coordinate system
In-Reply-To: <610211.99183.qm@web110009.mail.gq1.yahoo.com>
References: <610211.99183.qm@web110009.mail.gq1.yahoo.com>
Message-ID: <200907092113.43653.geraldi.evenden@gmail.com>

On Thursday 09 July 2009 8:31:29 pm Hamish wrote:
> Gerald wrote:
> > As pointed out before, the [+]south option only applies to
> > [+]proj=utm and causes the addition of  10,000,000 meters
> > to the northing (y) value so that it is positive in the
> > southern hemisphere.
>
> FWIW (in "Frank's" PROJ.4 at least) aea and stere also consider
> +south, but in those cases it changes the sign of Pi/2.
>
>
> Hamish
> (mid-winter)

The above usages are longtime standard proj.4.

I was purely referring to the TM area previousl discussed.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From neteler at osgeo.org  Fri Jul 10 05:59:25 2009
From: neteler at osgeo.org (Markus Neteler)
Date: Fri, 10 Jul 2009 14:59:25 +0200
Subject: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique Mercator
	Azimuth Natural Origin?
In-Reply-To: <86782b610906080824k782f0ae6j552360b1933e9c5b@mail.gmail.com>
References: <86782b610906080824k782f0ae6j552360b1933e9c5b@mail.gmail.com>
Message-ID: <86782b610907100559j72bfc0c7ucda8b79d4d818bfe@mail.gmail.com>

Dear list members,

I was earlier sending this message to the gdal-dev list without
answer. trying here now:

On Mon, Jun 8, 2009 at 5:24 PM, Markus Neteler<neteler at osgeo.org> wrote:
> hi,
>
> I am trying to reproject the Swiss CORINE data CLC90 [1] into LAEA.
> The .prj file is attached. Unfortunately the transformation fails:
>
> ogr2ogr -t_srs eu_etrs89_laea.prj /tmp/clc90_eu_laea.shp /geodata/clcbn85p.shp
> ERROR 6: Failed to initialize PROJ.4 with `+proj=omerc
> +lat_0=46.95240555555556 +lonc=7.439583333333333 +alpha=90 +k=1
> +x_0=-9419820.590700001 +y_0=200000 +ellps=bessel +units=m +no_defs '.
> lat_0 = 0 or 90 or alpha = 90
> Failed to create coordinate transformation between the
> following coordinate systems.  This may be because they
> are not transformable, or because projection services
> (PROJ.4 DLL/.so) could not be loaded.
> Source:
> PROJCS["Bessel_1841_Hotine_Oblique_Mercator_Azimuth_Natural_Origin",
>    GEOGCS["GCS_Bessel_1841",
>        DATUM["Not_specified_based_on_Bessel_1841_ellipsoid",
>            SPHEROID["Bessel_1841",6377397.155,299.1528128]],
>        PRIMEM["Greenwich",0.0],
>        UNIT["Degree",0.0174532925199433]],
>    PROJECTION["Hotine_Oblique_Mercator"],
>    PARAMETER["False_Easting",-9419820.5907],
>    PARAMETER["False_Northing",200000.0],
>    PARAMETER["Scale_Factor",1.0],
>    PARAMETER["Azimuth",90.0],
>    PARAMETER["Longitude_Of_Center",7.439583333333333],
>    PARAMETER["Latitude_Of_Center",46.95240555555556],
>    UNIT["Meter",1.0]]
> Target:
> PROJCS["ETRS89 / ETRS-LAEA",
>    GEOGCS["ETRS89",
>        DATUM["European_Terrestrial_Reference_System_1989",
>            SPHEROID["GRS 1980",6378137,298.2572221010042,
>                AUTHORITY["EPSG","7019"]],
>            AUTHORITY["EPSG","6258"]],
>        PRIMEM["Greenwich",0],
>        UNIT["degree",0.0174532925199433],
>        AUTHORITY["EPSG","4258"]],
>    UNIT["metre",1,
>        AUTHORITY["EPSG","9001"]],
>    AUTHORITY["EPSG","3035"]]
>
> Suggestions welcome to reproject this data set...
>
> thanks
> Markus
>
> [1] http://www.bfs.admin.ch/bfs/portal/de/index/dienstleistungen/geostat/datenbeschreibung/corine_land_cover.html
>    Data: -> GIS-Daten CORINE Land Cover Schweiz 1990 (ZIP file)
>

Is there a way to enable PROJ4 to support this projection?

thank in advance,
Markus


From cjmce at lsu.edu  Fri Jul 10 06:35:59 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 10 Jul 2009 08:35:59 -0500
Subject: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique MercatorAzimuth
	Natural Origin?
References: <86782b610906080824k782f0ae6j552360b1933e9c5b@mail.gmail.com>
	<86782b610907100559j72bfc0c7ucda8b79d4d818bfe@mail.gmail.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC276E@email002.lsu.edu>

Switzerland dropped the Rosenmund Oblique in favor of the Hotine Oblique RSO?
 
Since when?
 
C. Mugnier
LOUISIANA STATE UNIVERSITY

________________________________

From: proj-bounces at lists.maptools.org on behalf of Markus Neteler
Sent: Fri 10-Jul-09 07:59
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique MercatorAzimuth Natural Origin?



Dear list members,

I was earlier sending this message to the gdal-dev list without
answer. trying here now:

On Mon, Jun 8, 2009 at 5:24 PM, Markus Neteler<neteler at osgeo.org> wrote:
> hi,
>
> I am trying to reproject the Swiss CORINE data CLC90 [1] into LAEA.
> The .prj file is attached. Unfortunately the transformation fails:
>
> ogr2ogr -t_srs eu_etrs89_laea.prj /tmp/clc90_eu_laea.shp /geodata/clcbn85p.shp
> ERROR 6: Failed to initialize PROJ.4 with `+proj=omerc
> +lat_0=46.95240555555556 +lonc=7.439583333333333 +alpha=90 +k=1
> +x_0=-9419820.590700001 +y_0=200000 +ellps=bessel +units=m +no_defs '.
> lat_0 = 0 or 90 or alpha = 90
> Failed to create coordinate transformation between the
> following coordinate systems.  This may be because they
> are not transformable, or because projection services
> (PROJ.4 DLL/.so) could not be loaded.
> Source:
> PROJCS["Bessel_1841_Hotine_Oblique_Mercator_Azimuth_Natural_Origin",
>    GEOGCS["GCS_Bessel_1841",
>        DATUM["Not_specified_based_on_Bessel_1841_ellipsoid",
>            SPHEROID["Bessel_1841",6377397.155,299.1528128]],
>        PRIMEM["Greenwich",0.0],
>        UNIT["Degree",0.0174532925199433]],
>    PROJECTION["Hotine_Oblique_Mercator"],
>    PARAMETER["False_Easting",-9419820.5907],
>    PARAMETER["False_Northing",200000.0],
>    PARAMETER["Scale_Factor",1.0],
>    PARAMETER["Azimuth",90.0],
>    PARAMETER["Longitude_Of_Center",7.439583333333333],
>    PARAMETER["Latitude_Of_Center",46.95240555555556],
>    UNIT["Meter",1.0]]
> Target:
> PROJCS["ETRS89 / ETRS-LAEA",
>    GEOGCS["ETRS89",
>        DATUM["European_Terrestrial_Reference_System_1989",
>            SPHEROID["GRS 1980",6378137,298.2572221010042,
>                AUTHORITY["EPSG","7019"]],
>            AUTHORITY["EPSG","6258"]],
>        PRIMEM["Greenwich",0],
>        UNIT["degree",0.0174532925199433],
>        AUTHORITY["EPSG","4258"]],
>    UNIT["metre",1,
>        AUTHORITY["EPSG","9001"]],
>    AUTHORITY["EPSG","3035"]]
>
> Suggestions welcome to reproject this data set...
>
> thanks
> Markus
>
> [1] http://www.bfs.admin.ch/bfs/portal/de/index/dienstleistungen/geostat/datenbeschreibung/corine_land_cover.html
>    Data: -> GIS-Daten CORINE Land Cover Schweiz 1990 (ZIP file)
>

Is there a way to enable PROJ4 to support this projection?

thank in advance,
Markus
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090710/0b0ccc3e/attachment.html>

From Stefan.Ziegler at bd.so.ch  Fri Jul 10 07:07:44 2009
From: Stefan.Ziegler at bd.so.ch (Ziegler Stefan)
Date: Fri, 10 Jul 2009 16:07:44 +0200
Subject: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique Mercator
	Azimuth Natural Origin?
Message-ID: <H00002ea0523c9d1.1247234863.srsofaioi6145.ktso.ch@MHS>

Hi Markus

try this:

ogr2ogr shp_dir/ -s_srs epsg:21781 -t_srs epsg:3035 clcbn85p.shp

epsg:21781 is forcing ogr2ogr to use the real swiss prj-definition.
Forget the strange definition in the delivered prj-file.

regards
Stefan


> -----Ursprüngliche Nachricht-----
> Von: Markus Neteler [mailto:neteler at osgeo.org]
> Gesendet am: Freitag, 10. Juli 2009 14:59
> An: PROJ.4 and general Projections Discussions
> Betreff: Re: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique Mercator
> Azimuth Natural Origin?
> 
> Dear list members,
> 
> I was earlier sending this message to the gdal-dev list without
> answer. trying here now:
> 
> On Mon, Jun 8, 2009 at 5:24 PM, Markus 
> Neteler<neteler at osgeo.org> wrote:
> > hi,
> >
> > I am trying to reproject the Swiss CORINE data CLC90 [1] into LAEA.
> > The .prj file is attached. Unfortunately the transformation fails:
> >
> > ogr2ogr -t_srs eu_etrs89_laea.prj /tmp/clc90_eu_laea.shp 
> /geodata/clcbn85p.shp
> > ERROR 6: Failed to initialize PROJ.4 with `+proj=omerc
> > +lat_0=46.95240555555556 +lonc=7.439583333333333 +alpha=90 +k=1
> > +x_0=-9419820.590700001 +y_0=200000 +ellps=bessel +units=m 
> +no_defs '.
> > lat_0 = 0 or 90 or alpha = 90
> > Failed to create coordinate transformation between the
> > following coordinate systems.  This may be because they
> > are not transformable, or because projection services
> > (PROJ.4 DLL/.so) could not be loaded.
> > Source:
> > PROJCS["Bessel_1841_Hotine_Oblique_Mercator_Azimuth_Natural_Origin",
> >    GEOGCS["GCS_Bessel_1841",
> >        DATUM["Not_specified_based_on_Bessel_1841_ellipsoid",
> >            SPHEROID["Bessel_1841",6377397.155,299.1528128]],
> >        PRIMEM["Greenwich",0.0],
> >        UNIT["Degree",0.0174532925199433]],
> >    PROJECTION["Hotine_Oblique_Mercator"],
> >    PARAMETER["False_Easting",-9419820.5907],
> >    PARAMETER["False_Northing",200000.0],
> >    PARAMETER["Scale_Factor",1.0],
> >    PARAMETER["Azimuth",90.0],
> >    PARAMETER["Longitude_Of_Center",7.439583333333333],
> >    PARAMETER["Latitude_Of_Center",46.95240555555556],
> >    UNIT["Meter",1.0]]
> > Target:
> > PROJCS["ETRS89 / ETRS-LAEA",
> >    GEOGCS["ETRS89",
> >        DATUM["European_Terrestrial_Reference_System_1989",
> >            SPHEROID["GRS 1980",6378137,298.2572221010042,
> >                AUTHORITY["EPSG","7019"]],
> >            AUTHORITY["EPSG","6258"]],
> >        PRIMEM["Greenwich",0],
> >        UNIT["degree",0.0174532925199433],
> >        AUTHORITY["EPSG","4258"]],
> >    UNIT["metre",1,
> >        AUTHORITY["EPSG","9001"]],
> >    AUTHORITY["EPSG","3035"]]
> >
> > Suggestions welcome to reproject this data set...
> >
> > thanks
> > Markus
> >
> > [1] 
> http://www.bfs.admin.ch/bfs/portal/de/index/dienstleistungen/g
eostat/datenbeschreibung/corine_land_cover.html
>    Data: -> GIS-Daten CORINE Land Cover Schweiz 1990 (ZIP file)
>

Is there a way to enable PROJ4 to support this projection?

thank in advance,
Markus
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090710/e641810d/attachment.html>

From neteler at osgeo.org  Fri Jul 10 07:18:20 2009
From: neteler at osgeo.org (Markus Neteler)
Date: Fri, 10 Jul 2009 16:18:20 +0200
Subject: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique Mercator
	Azimuth Natural Origin?
In-Reply-To: <H00002ea0523c9d1.1247234863.srsofaioi6145.ktso.ch@MHS>
References: <H00002ea0523c9d1.1247234863.srsofaioi6145.ktso.ch@MHS>
Message-ID: <86782b610907100718v153c66abtf97fe6b423ae9558@mail.gmail.com>

Hi Stefan,

I should have asked earlier here :) Thanks a lot.
However, the map seems to be shifted for 200-300 meters.
If there any datum which I should specify? This reminds me
of
http://trac.osgeo.org/grass/ticket/35

Best regards
Markus Neteler

On Fri, Jul 10, 2009 at 4:07 PM, Ziegler Stefan<Stefan.Ziegler at bd.so.ch> wrote:
> Hi Markus
> try this:
> ogr2ogr shp_dir/ -s_srs epsg:21781 -t_srs epsg:3035 clcbn85p.shp
> epsg:21781 is forcing ogr2ogr to use the real swiss prj-definition. Forget
> the strange definition in the delivered prj-file.
> regards
> Stefan
>> -----Ursprüngliche Nachricht-----
>> Von: Markus Neteler [mailto:neteler at osgeo.org]
>> Gesendet am: Freitag, 10. Juli 2009 14:59
>> An: PROJ.4 and general Projections Discussions
>> Betreff: Re: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique Mercator
>> Azimuth Natural Origin?
>>
>> Dear list members,
>>
>> I was earlier sending this message to the gdal-dev list without
>> answer. trying here now:
>>
>> On Mon, Jun 8, 2009 at 5:24 PM, Markus
>> Neteler<neteler at osgeo.org> wrote:
>> > hi,
>> >
>> > I am trying to reproject the Swiss CORINE data CLC90 [1] into LAEA.
>> > The .prj file is attached. Unfortunately the transformation fails:
>> >
>> > ogr2ogr -t_srs eu_etrs89_laea.prj /tmp/clc90_eu_laea.shp
>> /geodata/clcbn85p.shp
>> > ERROR 6: Failed to initialize PROJ.4 with `+proj=omerc
>> > +lat_0=46.95240555555556 +lonc=7.439583333333333 +alpha=90 +k=1
>> > +x_0=-9419820.590700001 +y_0=200000 +ellps=bessel +units=m
>> +no_defs '.
>> > lat_0 = 0 or 90 or alpha = 90
>> > Failed to create coordinate transformation between the
>> > following coordinate systems.  This may be because they
>> > are not transformable, or because projection services
>> > (PROJ.4 DLL/.so) could not be loaded.
>> > Source:
>> > PROJCS["Bessel_1841_Hotine_Oblique_Mercator_Azimuth_Natural_Origin",
>> >    GEOGCS["GCS_Bessel_1841",
>> >        DATUM["Not_specified_based_on_Bessel_1841_ellipsoid",
>> >            SPHEROID["Bessel_1841",6377397.155,299.1528128]],
>> >        PRIMEM["Greenwich",0.0],
>> >        UNIT["Degree",0.0174532925199433]],
>> >    PROJECTION["Hotine_Oblique_Mercator"],
>> >    PARAMETER["False_Easting",-9419820.5907],
>> >    PARAMETER["False_Northing",200000.0],
>> >    PARAMETER["Scale_Factor",1.0],
>> >    PARAMETER["Azimuth",90.0],
>> >    PARAMETER["Longitude_Of_Center",7.439583333333333],
>> >    PARAMETER["Latitude_Of_Center",46.95240555555556],
>> >    UNIT["Meter",1.0]]
>> > Target:
>> > PROJCS["ETRS89 / ETRS-LAEA",
>> >    GEOGCS["ETRS89",
>> >        DATUM["European_Terrestrial_Reference_System_1989",
>> >            SPHEROID["GRS 1980",6378137,298.2572221010042,
>> >                AUTHORITY["EPSG","7019"]],
>> >            AUTHORITY["EPSG","6258"]],
>> >        PRIMEM["Greenwich",0],
>> >        UNIT["degree",0.0174532925199433],
>> >        AUTHORITY["EPSG","4258"]],
>> >    UNIT["metre",1,
>> >        AUTHORITY["EPSG","9001"]],
>> >    AUTHORITY["EPSG","3035"]]
>> >
>> > Suggestions welcome to reproject this data set...
>> >
>> > thanks
>> > Markus
>> >
>> > [1]
>> http://www.bfs.admin.ch/bfs/portal/de/index/dienstleistungen/g
> eostat/datenbeschreibung/corine_land_cover.html
>>    Data: -> GIS-Daten CORINE Land Cover Schweiz 1990 (ZIP file)
>>
> Is there a way to enable PROJ4 to support this projection?
> thank in advance,
> Markus
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


From geraldi.evenden at gmail.com  Fri Jul 10 07:53:18 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Fri, 10 Jul 2009 10:53:18 -0400
Subject: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique MercatorAzimuth
	Natural Origin?
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC276E@email002.lsu.edu>
References: <86782b610906080824k782f0ae6j552360b1933e9c5b@mail.gmail.com>
	<86782b610907100559j72bfc0c7ucda8b79d4d818bfe@mail.gmail.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC276E@email002.lsu.edu>
Message-ID: <200907101053.18499.geraldi.evenden@gmail.com>

On Friday 10 July 2009 9:35:59 am Clifford J Mugnier wrote:
> Switzerland dropped the Rosenmund Oblique in favor of the Hotine Oblique
> RSO?
>
> Since when?
>
> C. Mugnier
> LOUISIANA STATE UNIVERSITY

Except for the false easting and northing, the other factors look similar to 
proj's proj=somerc projection parameters which brings up a point: I never saw 
a name declared anywhere for this projection which is basically a Gauss 
transformation to the sphere followed by coordinate shift on the shere.  In 
the case of the Swiss usage the polar axis is shifted in the plane of the 
central meridian until the equator is at the central point:

lon_0=7d26'22.50"
lat_0=46d57'08.66"

Hotine usage for Swiss projections keep comming up but I question that the 
Swiss ever used Hotine for anything domestic.

>
> ________________________________
>
> From: proj-bounces at lists.maptools.org on behalf of Markus Neteler
> Sent: Fri 10-Jul-09 07:59
> To: PROJ.4 and general Projections Discussions
> Subject: Re: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique
> MercatorAzimuth Natural Origin?
>
>
>
> Dear list members,
>
> I was earlier sending this message to the gdal-dev list without
> answer. trying here now:
>
> On Mon, Jun 8, 2009 at 5:24 PM, Markus Neteler<neteler at osgeo.org> wrote:
> > hi,
> >
> > I am trying to reproject the Swiss CORINE data CLC90 [1] into LAEA.
> > The .prj file is attached. Unfortunately the transformation fails:
> >
> > ogr2ogr -t_srs eu_etrs89_laea.prj /tmp/clc90_eu_laea.shp
> > /geodata/clcbn85p.shp ERROR 6: Failed to initialize PROJ.4 with
> > `+proj=omerc
> > +lat_0=46.95240555555556 +lonc=7.439583333333333 +alpha=90 +k=1
> > +x_0=-9419820.590700001 +y_0=200000 +ellps=bessel +units=m +no_defs '.
> > lat_0 = 0 or 90 or alpha = 90
> > Failed to create coordinate transformation between the
> > following coordinate systems.  This may be because they
> > are not transformable, or because projection services
> > (PROJ.4 DLL/.so) could not be loaded.
> > Source:
> > PROJCS["Bessel_1841_Hotine_Oblique_Mercator_Azimuth_Natural_Origin",
> >    GEOGCS["GCS_Bessel_1841",
> >        DATUM["Not_specified_based_on_Bessel_1841_ellipsoid",
> >            SPHEROID["Bessel_1841",6377397.155,299.1528128]],
> >        PRIMEM["Greenwich",0.0],
> >        UNIT["Degree",0.0174532925199433]],
> >    PROJECTION["Hotine_Oblique_Mercator"],
> >    PARAMETER["False_Easting",-9419820.5907],
> >    PARAMETER["False_Northing",200000.0],
> >    PARAMETER["Scale_Factor",1.0],
> >    PARAMETER["Azimuth",90.0],
> >    PARAMETER["Longitude_Of_Center",7.439583333333333],
> >    PARAMETER["Latitude_Of_Center",46.95240555555556],
> >    UNIT["Meter",1.0]]
> > Target:
> > PROJCS["ETRS89 / ETRS-LAEA",
> >    GEOGCS["ETRS89",
> >        DATUM["European_Terrestrial_Reference_System_1989",
> >            SPHEROID["GRS 1980",6378137,298.2572221010042,
> >                AUTHORITY["EPSG","7019"]],
> >            AUTHORITY["EPSG","6258"]],
> >        PRIMEM["Greenwich",0],
> >        UNIT["degree",0.0174532925199433],
> >        AUTHORITY["EPSG","4258"]],
> >    UNIT["metre",1,
> >        AUTHORITY["EPSG","9001"]],
> >    AUTHORITY["EPSG","3035"]]
> >
> > Suggestions welcome to reproject this data set...
> >
> > thanks
> > Markus
> >
> > [1]
> > http://www.bfs.admin.ch/bfs/portal/de/index/dienstleistungen/geostat/date
> >nbeschreibung/corine_land_cover.html Data: -> GIS-Daten CORINE Land Cover
> > Schweiz 1990 (ZIP file)
>
> Is there a way to enable PROJ4 to support this projection?
>
> thank in advance,
> Markus

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From cjmce at lsu.edu  Fri Jul 10 09:48:12 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 10 Jul 2009 11:48:12 -0500
Subject: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique
	MercatorAzimuthNatural Origin?
References: <86782b610906080824k782f0ae6j552360b1933e9c5b@mail.gmail.com><86782b610907100559j72bfc0c7ucda8b79d4d818bfe@mail.gmail.com><B597ADFC46B67741B18EA6AA13613FF7EC276E@email002.lsu.edu>
	<200907101053.18499.geraldi.evenden@gmail.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC276F@email002.lsu.edu>

Prof. Rosenmund cooked up his projection in 1910 for the national projection of Switzerland.  Brigadier Martin Hotine cooked up his in 1948 for Malaya and Borneo.
 
C. Mugnier

________________________________

From: proj-bounces at lists.maptools.org on behalf of Gerald I. Evenden
Sent: Fri 10-Jul-09 09:53
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique MercatorAzimuthNatural Origin?



On Friday 10 July 2009 9:35:59 am Clifford J Mugnier wrote:
> Switzerland dropped the Rosenmund Oblique in favor of the Hotine Oblique
> RSO?
>
> Since when?
>
> C. Mugnier
> LOUISIANA STATE UNIVERSITY

Except for the false easting and northing, the other factors look similar to
proj's proj=somerc projection parameters which brings up a point: I never saw
a name declared anywhere for this projection which is basically a Gauss
transformation to the sphere followed by coordinate shift on the shere.  In
the case of the Swiss usage the polar axis is shifted in the plane of the
central meridian until the equator is at the central point:

lon_0=7d26'22.50"
lat_0=46d57'08.66"

Hotine usage for Swiss projections keep comming up but I question that the
Swiss ever used Hotine for anything domestic.

>
> ________________________________
>
> From: proj-bounces at lists.maptools.org on behalf of Markus Neteler
> Sent: Fri 10-Jul-09 07:59
> To: PROJ.4 and general Projections Discussions
> Subject: Re: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique
> MercatorAzimuth Natural Origin?
>
>
>
> Dear list members,
>
> I was earlier sending this message to the gdal-dev list without
> answer. trying here now:
>
> On Mon, Jun 8, 2009 at 5:24 PM, Markus Neteler<neteler at osgeo.org> wrote:
> > hi,
> >
> > I am trying to reproject the Swiss CORINE data CLC90 [1] into LAEA.
> > The .prj file is attached. Unfortunately the transformation fails:
> >
> > ogr2ogr -t_srs eu_etrs89_laea.prj /tmp/clc90_eu_laea.shp
> > /geodata/clcbn85p.shp ERROR 6: Failed to initialize PROJ.4 with
> > `+proj=omerc
> > +lat_0=46.95240555555556 +lonc=7.439583333333333 +alpha=90 +k=1
> > +x_0=-9419820.590700001 +y_0=200000 +ellps=bessel +units=m +no_defs '.
> > lat_0 = 0 or 90 or alpha = 90
> > Failed to create coordinate transformation between the
> > following coordinate systems.  This may be because they
> > are not transformable, or because projection services
> > (PROJ.4 DLL/.so) could not be loaded.
> > Source:
> > PROJCS["Bessel_1841_Hotine_Oblique_Mercator_Azimuth_Natural_Origin",
> >    GEOGCS["GCS_Bessel_1841",
> >        DATUM["Not_specified_based_on_Bessel_1841_ellipsoid",
> >            SPHEROID["Bessel_1841",6377397.155,299.1528128]],
> >        PRIMEM["Greenwich",0.0],
> >        UNIT["Degree",0.0174532925199433]],
> >    PROJECTION["Hotine_Oblique_Mercator"],
> >    PARAMETER["False_Easting",-9419820.5907],
> >    PARAMETER["False_Northing",200000.0],
> >    PARAMETER["Scale_Factor",1.0],
> >    PARAMETER["Azimuth",90.0],
> >    PARAMETER["Longitude_Of_Center",7.439583333333333],
> >    PARAMETER["Latitude_Of_Center",46.95240555555556],
> >    UNIT["Meter",1.0]]
> > Target:
> > PROJCS["ETRS89 / ETRS-LAEA",
> >    GEOGCS["ETRS89",
> >        DATUM["European_Terrestrial_Reference_System_1989",
> >            SPHEROID["GRS 1980",6378137,298.2572221010042,
> >                AUTHORITY["EPSG","7019"]],
> >            AUTHORITY["EPSG","6258"]],
> >        PRIMEM["Greenwich",0],
> >        UNIT["degree",0.0174532925199433],
> >        AUTHORITY["EPSG","4258"]],
> >    UNIT["metre",1,
> >        AUTHORITY["EPSG","9001"]],
> >    AUTHORITY["EPSG","3035"]]
> >
> > Suggestions welcome to reproject this data set...
> >
> > thanks
> > Markus
> >
> > [1]
> > http://www.bfs.admin.ch/bfs/portal/de/index/dienstleistungen/geostat/date
> >nbeschreibung/corine_land_cover.html Data: -> GIS-Daten CORINE Land Cover
> > Schweiz 1990 (ZIP file)
>
> Is there a way to enable PROJ4 to support this projection?
>
> thank in advance,
> Markus

--
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090710/cee3e8fc/attachment.html>

From cjmce at lsu.edu  Fri Jul 10 10:00:27 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 10 Jul 2009 12:00:27 -0500
Subject: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique MercatorAzimuth
	Natural Origin?
References: <H00002ea0523c9d1.1247234863.srsofaioi6145.ktso.ch@MHS>
	<86782b610907100718v153c66abtf97fe6b423ae9558@mail.gmail.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2770@email002.lsu.edu>

I believe the current datums are: "CH1903+" and "CHTRS95."
 
See my August 2001 column on Switzerland at: www.ASPRS.org/resources/grids .
 
C. Mugnier

________________________________

From: proj-bounces at lists.maptools.org on behalf of Markus Neteler
Sent: Fri 10-Jul-09 09:18
To: Ziegler Stefan
Cc: proj
Subject: Re: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique MercatorAzimuth Natural Origin?



Hi Stefan,

I should have asked earlier here :) Thanks a lot.
However, the map seems to be shifted for 200-300 meters.
If there any datum which I should specify? This reminds me
of
http://trac.osgeo.org/grass/ticket/35

Best regards
Markus Neteler

On Fri, Jul 10, 2009 at 4:07 PM, Ziegler Stefan<Stefan.Ziegler at bd.so.ch> wrote:
> Hi Markus
> try this:
> ogr2ogr shp_dir/ -s_srs epsg:21781 -t_srs epsg:3035 clcbn85p.shp
> epsg:21781 is forcing ogr2ogr to use the real swiss prj-definition. Forget
> the strange definition in the delivered prj-file.
> regards
> Stefan
>> -----Ursprüngliche Nachricht-----
>> Von: Markus Neteler [mailto:neteler at osgeo.org]
>> Gesendet am: Freitag, 10. Juli 2009 14:59
>> An: PROJ.4 and general Projections Discussions
>> Betreff: Re: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique Mercator
>> Azimuth Natural Origin?
>>
>> Dear list members,
>>
>> I was earlier sending this message to the gdal-dev list without
>> answer. trying here now:
>>
>> On Mon, Jun 8, 2009 at 5:24 PM, Markus
>> Neteler<neteler at osgeo.org> wrote:
>> > hi,
>> >
>> > I am trying to reproject the Swiss CORINE data CLC90 [1] into LAEA.
>> > The .prj file is attached. Unfortunately the transformation fails:
>> >
>> > ogr2ogr -t_srs eu_etrs89_laea.prj /tmp/clc90_eu_laea.shp
>> /geodata/clcbn85p.shp
>> > ERROR 6: Failed to initialize PROJ.4 with `+proj=omerc
>> > +lat_0=46.95240555555556 +lonc=7.439583333333333 +alpha=90 +k=1
>> > +x_0=-9419820.590700001 +y_0=200000 +ellps=bessel +units=m
>> +no_defs '.
>> > lat_0 = 0 or 90 or alpha = 90
>> > Failed to create coordinate transformation between the
>> > following coordinate systems.  This may be because they
>> > are not transformable, or because projection services
>> > (PROJ.4 DLL/.so) could not be loaded.
>> > Source:
>> > PROJCS["Bessel_1841_Hotine_Oblique_Mercator_Azimuth_Natural_Origin",
>> >    GEOGCS["GCS_Bessel_1841",
>> >        DATUM["Not_specified_based_on_Bessel_1841_ellipsoid",
>> >            SPHEROID["Bessel_1841",6377397.155,299.1528128]],
>> >        PRIMEM["Greenwich",0.0],
>> >        UNIT["Degree",0.0174532925199433]],
>> >    PROJECTION["Hotine_Oblique_Mercator"],
>> >    PARAMETER["False_Easting",-9419820.5907],
>> >    PARAMETER["False_Northing",200000.0],
>> >    PARAMETER["Scale_Factor",1.0],
>> >    PARAMETER["Azimuth",90.0],
>> >    PARAMETER["Longitude_Of_Center",7.439583333333333],
>> >    PARAMETER["Latitude_Of_Center",46.95240555555556],
>> >    UNIT["Meter",1.0]]
>> > Target:
>> > PROJCS["ETRS89 / ETRS-LAEA",
>> >    GEOGCS["ETRS89",
>> >        DATUM["European_Terrestrial_Reference_System_1989",
>> >            SPHEROID["GRS 1980",6378137,298.2572221010042,
>> >                AUTHORITY["EPSG","7019"]],
>> >            AUTHORITY["EPSG","6258"]],
>> >        PRIMEM["Greenwich",0],
>> >        UNIT["degree",0.0174532925199433],
>> >        AUTHORITY["EPSG","4258"]],
>> >    UNIT["metre",1,
>> >        AUTHORITY["EPSG","9001"]],
>> >    AUTHORITY["EPSG","3035"]]
>> >
>> > Suggestions welcome to reproject this data set...
>> >
>> > thanks
>> > Markus
>> >
>> > [1]
>> http://www.bfs.admin.ch/bfs/portal/de/index/dienstleistungen/g
> eostat/datenbeschreibung/corine_land_cover.html
>>    Data: -> GIS-Daten CORINE Land Cover Schweiz 1990 (ZIP file)
>>
> Is there a way to enable PROJ4 to support this projection?
> thank in advance,
> Markus
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090710/256cfe44/attachment.html>

From cgodkin at gmail.com  Fri Jul 10 11:07:44 2009
From: cgodkin at gmail.com (Carl Godkin)
Date: Fri, 10 Jul 2009 11:07:44 -0700
Subject: [Proj] Costa Rica Norte in nad/world definition...
Message-ID: <b042fc280907101107j6196efc0gf40ea73d7fe6db9b@mail.gmail.com>

Hi,

The PROJ.4 file nad/world contains a definition for the "Costa Rica Norte"
coordinate
system (costa-n) that may have a typo.

The false northing is listed in this file (in current SVN) with
   y_0=217820.522

but I believe that it's really supposed to be y_0=271820.522 instead.

We received some data for this coordinate system from a customer and it uses
this definition.  With the "corrected" numbers, the customer's locations in
geographic and projected coordinates match when converted using "proj."

However, I can't find another source for it on the web anywhere to confirm.

Does someone have a way to check this out?

Thanks,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090710/88a12551/attachment.html>

From cjmce at lsu.edu  Fri Jul 10 12:26:39 2009
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Fri, 10 Jul 2009 14:26:39 -0500
Subject: [Proj] Costa Rica Norte in nad/world definition...
References: <b042fc280907101107j6196efc0gf40ea73d7fe6db9b@mail.gmail.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7EC2772@email002.lsu.edu>

April 2008 issue of my Grids and Datums column is on Costa Rica.  It can be downloaded from:
 
www.ASPRS.org/resources/grids
 
C. Mugnier
LOUISIANA STATE UNIVERSITY

________________________________

From: proj-bounces at lists.maptools.org on behalf of Carl Godkin
Sent: Fri 10-Jul-09 13:07
To: proj at lists.maptools.org
Subject: [Proj] Costa Rica Norte in nad/world definition...


Hi,

The PROJ.4 file nad/world contains a definition for the "Costa Rica Norte" coordinate
system (costa-n) that may have a typo.

The false northing is listed in this file (in current SVN) with 
   y_0=217820.522 

but I believe that it's really supposed to be y_0=271820.522 instead.

We received some data for this coordinate system from a customer and it uses
this definition.  With the "corrected" numbers, the customer's locations in
geographic and projected coordinates match when converted using "proj."

However, I can't find another source for it on the web anywhere to confirm.

Does someone have a way to check this out?

Thanks,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090710/af54ad03/attachment.html>

From cgodkin at gmail.com  Fri Jul 10 13:54:06 2009
From: cgodkin at gmail.com (Carl Godkin)
Date: Fri, 10 Jul 2009 13:54:06 -0700
Subject: [Proj] Costa Rica Norte in nad/world definition...
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC2772@email002.lsu.edu>
References: <b042fc280907101107j6196efc0gf40ea73d7fe6db9b@mail.gmail.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC2772@email002.lsu.edu>
Message-ID: <b042fc280907101354y4ae23dc0m965903ee7f8bfe76@mail.gmail.com>

On Fri, Jul 10, 2009 at 12:26 PM, Clifford J Mugnier <cjmce at lsu.edu> wrote:

>  April 2008 issue of my *Grids and Datums* column is on *Costa Rica*.  It
> can be downloaded from:
>
> www.ASPRS.org/resources/grids
>
>


Dr. Mugnier's paper uses  False Easting = 271,820.522 as well, so I believe
this is a bug in the PROJ.4 nad/world file.

Thanks,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090710/80cfa107/attachment.html>

From Stefan.Ziegler at bd.so.ch  Fri Jul 10 15:05:09 2009
From: Stefan.Ziegler at bd.so.ch (Ziegler Stefan)
Date: Sat, 11 Jul 2009 00:05:09 +0200
Subject: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique Mercator
	Azimuth Natural Origin?
Message-ID: <H00002ea05240c24.1247263508.srsofaioi6145.ktso.ch@MHS>

Hi Markus

please check in the proj4 epsg-file the definition of 21781. It needs
the +towgs84 parameter:

+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333
+x_0=600000 +y_0=200000 +ellps=bessel
+towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs  

The 200 meters shift sounds a bit like a forgotten towgs84 parameter but
that's just a guess. 
Does the Grass ticket still needs some clarification?

regards
Stefan

> -----Ursprüngliche Nachricht-----
> Von: Markus Neteler [mailto:neteler at osgeo.org]
> Gesendet am: Freitag, 10. Juli 2009 16:18
> An: Ziegler Stefan
> Cc: proj
> Betreff: Re: Re: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique
> Mercator Azimuth Natural Origin?
> 
> Hi Stefan,
> 
> I should have asked earlier here :) Thanks a lot.
> However, the map seems to be shifted for 200-300 meters.
> If there any datum which I should specify? This reminds me
> of
> http://trac.osgeo.org/grass/ticket/35
> 
> Best regards
> Markus Neteler
> 
> On Fri, Jul 10, 2009 at 4:07 PM, Ziegler 
> Stefan<Stefan.Ziegler at bd.so.ch> wrote:
> > Hi Markus
> > try this:
> > ogr2ogr shp_dir/ -s_srs epsg:21781 -t_srs epsg:3035 clcbn85p.shp
> > epsg:21781 is forcing ogr2ogr to use the real swiss 
> prj-definition. Forget
> > the strange definition in the delivered prj-file.
> > regards
> > Stefan
> >> -----Ursprüngliche Nachricht-----
> >> Von: Markus Neteler [mailto:neteler at osgeo.org]
> >> Gesendet am: Freitag, 10. Juli 2009 14:59
> >> An: PROJ.4 and general Projections Discussions
> >> Betreff: Re: [Proj] Swiss CORINE: Bessel 1841 Hotine 
> Oblique Mercator
> >> Azimuth Natural Origin?
> >>
> >> Dear list members,
> >>
> >> I was earlier sending this message to the gdal-dev list without
> >> answer. trying here now:
> >>
> >> On Mon, Jun 8, 2009 at 5:24 PM, Markus
> >> Neteler<neteler at osgeo.org> wrote:
> >> > hi,
> >> >
> >> > I am trying to reproject the Swiss CORINE data CLC90 [1] 
> into LAEA.
> >> > The .prj file is attached. Unfortunately the 
> transformation fails:
> >> >
> >> > ogr2ogr -t_srs eu_etrs89_laea.prj /tmp/clc90_eu_laea.shp
> >> /geodata/clcbn85p.shp
> >> > ERROR 6: Failed to initialize PROJ.4 with `+proj=omerc
> >> > +lat_0=46.95240555555556 +lonc=7.439583333333333 +alpha=90 +k=1
> >> > +x_0=-9419820.590700001 +y_0=200000 +ellps=bessel +units=m
> >> +no_defs '.
> >> > lat_0 = 0 or 90 or alpha = 90
> >> > Failed to create coordinate transformation between the
> >> > following coordinate systems.  This may be because they
> >> > are not transformable, or because projection services
> >> > (PROJ.4 DLL/.so) could not be loaded.
> >> > Source:
> >> > 
> PROJCS["Bessel_1841_Hotine_Oblique_Mercator_Azimuth_Natural_Origin",
> >> >    GEOGCS["GCS_Bessel_1841",
> >> >        DATUM["Not_specified_based_on_Bessel_1841_ellipsoid",
> >> >            SPHEROID["Bessel_1841",6377397.155,299.1528128]],
> >> >        PRIMEM["Greenwich",0.0],
> >> >        UNIT["Degree",0.0174532925199433]],
> >> >    PROJECTION["Hotine_Oblique_Mercator"],
> >> >    PARAMETER["False_Easting",-9419820.5907],
> >> >    PARAMETER["False_Northing",200000.0],
> >> >    PARAMETER["Scale_Factor",1.0],
> >> >    PARAMETER["Azimuth",90.0],
> >> >    PARAMETER["Longitude_Of_Center",7.439583333333333],
> >> >    PARAMETER["Latitude_Of_Center",46.95240555555556],
> >> >    UNIT["Meter",1.0]]
> >> > Target:
> >> > PROJCS["ETRS89 / ETRS-LAEA",
> >> >    GEOGCS["ETRS89",
> >> >        DATUM["European_Terrestrial_Reference_System_1989",
> >> >            SPHEROID["GRS 1980",6378137,298.2572221010042,
> >> >                AUTHORITY["EPSG","7019"]],
> >> >            AUTHORITY["EPSG","6258"]],
> >> >        PRIMEM["Greenwich",0],
> >> >        UNIT["degree",0.0174532925199433],
> >> >        AUTHORITY["EPSG","4258"]],
> >> >    UNIT["metre",1,
> >> >        AUTHORITY["EPSG","9001"]],
> >> >    AUTHORITY["EPSG","3035"]]
> >> >
> >> > Suggestions welcome to reproject this data set...
> >> >
> >> > thanks
> >> > Markus
> >> >
> >> > [1]
> >> http://www.bfs.admin.ch/bfs/portal/de/index/dienstleistungen/g
> > eostat/datenbeschreibung/corine_land_cover.html
> >>    Data: -> GIS-Daten CORINE Land Cover Schweiz 1990 (ZIP file)
> >>
> > Is there a way to enable PROJ4 to support this projection?
> > thank in advance,
> > Markus
> > _______________________________________________
> > Proj mailing list
> > Proj at lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090711/f9492156/attachment.html>

From paul-grass at stjohnspoint.co.uk  Sat Jul 11 02:52:19 2009
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Sat, 11 Jul 2009 10:52:19 +0100 (BST)
Subject: [Proj] Swiss CORINE: Bessel 1841 Hotine Oblique
 Mercator	Azimuth Natural Origin?
In-Reply-To: <H00002ea05240c24.1247263508.srsofaioi6145.ktso.ch@MHS>
References: <H00002ea05240c24.1247263508.srsofaioi6145.ktso.ch@MHS>
Message-ID: <Pine.LNX.4.62.0907111038040.18845@vortex.ukshells.co.uk>

On Sat, 11 Jul 2009, Ziegler Stefan wrote:

> Hi Markus
>
> please check in the proj4 epsg-file the definition of 21781. It needs
> the +towgs84 parameter:
>
> +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333
> +x_0=600000 +y_0=200000 +ellps=bessel
> +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs
>
> The 200 meters shift sounds a bit like a forgotten towgs84 parameter but 
> that's just a guess. Does the Grass ticket still needs some 
> clarification?

What would be really interesting to understand would be the origins of the 
parameters given in the August 2001 PE & RS Grids & Datums Column on 
Switzerland (<http://www.asprs.org/resources/grids/08-2001-swiss.pdf>) as 
they are what the parameters in GRASS were originally based on. The 
article states:

"Transforming the CH1903+ Datum the to CHTRS95 Datum (WGS84 ellipsoid) 
then is accomplished by dX = +674.253m, dY = +015.053m, dZ = +405.324m, 
according to the Swiss Federal Office of Topography."

This is what GRASS has been using up to now. So why the subtle difference 
in the parameters from the set previously given?

In addition the article goes on to state:

"According to the Swiss Federal Office of Topography, the seven-parameter 
Datum shift from CH1903+ to WGS84 is: dX = +660.077m +/- 4.055m, dY = 
+013.551m +/- 4.816m, dZ = +369.344m +/- 3.914m, alpha = 2.484 cc +/- 
0.417cc, beta = 1.783 cc +/- 0.455cc, gamma = 2.939 cc +/- 0.411cc, and M 
= 1.000000566 +/- 0.000000052."

What do these parameters relate to? I'm very confused.

The other point worth mentioning is that we won't be able to use the NTv2 
grid file in GRASS since (as previously discussed on this list) it 
transforms from CH1903 to CH1903+, rather than to WGS84 (or a closely
"WGS84-compatible" datum) as most gridshift files do.

Best regards

Paul


From peifer at gmx.eu  Sat Jul 11 03:28:25 2009
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat, 11 Jul 2009 12:28:25 +0200
Subject: [Proj] Costa Rica Norte in nad/world definition...
In-Reply-To: <b042fc280907101354y4ae23dc0m965903ee7f8bfe76@mail.gmail.com>
References: <b042fc280907101107j6196efc0gf40ea73d7fe6db9b@mail.gmail.com>	<B597ADFC46B67741B18EA6AA13613FF7EC2772@email002.lsu.edu>
	<b042fc280907101354y4ae23dc0m965903ee7f8bfe76@mail.gmail.com>
Message-ID: <h39pg9$mqe$1@ger.gmane.org>

Carl Godkin wrote:
> On Fri, Jul 10, 2009 at 12:26 PM, Clifford J Mugnier <cjmce at lsu.edu> wrote:
> 
>>  April 2008 issue of my *Grids and Datums* column is on *Costa Rica*.  It
>> can be downloaded from:
>>
>> www.ASPRS.org/resources/grids
>>
>>
> 
> 
> Dr. Mugnier's paper uses  False Easting = 271,820.522 as well, so I believe
> this is a bug in the PROJ.4 nad/world file.
> 
> Thanks,
> 

BTW: most results from a random Internet search on 'costa rica norte 271820.522' indicate that this is the False Northing, rather than the False Easting value.

The country's Instituto Geográfico Nacional also mentions 271820.522 as the FN value, see page 3 at http://www.mopt.go.cr/ign/documentos/Lambert.pdf

Hermann
 



From cgodkin at gmail.com  Sat Jul 11 07:00:33 2009
From: cgodkin at gmail.com (Carl Godkin)
Date: Sat, 11 Jul 2009 07:00:33 -0700
Subject: [Proj] Costa Rica Norte in nad/world definition...
In-Reply-To: <h39pg9$mqe$1@ger.gmane.org>
References: <b042fc280907101107j6196efc0gf40ea73d7fe6db9b@mail.gmail.com>
	<B597ADFC46B67741B18EA6AA13613FF7EC2772@email002.lsu.edu>
	<b042fc280907101354y4ae23dc0m965903ee7f8bfe76@mail.gmail.com>
	<h39pg9$mqe$1@ger.gmane.org>
Message-ID: <b042fc280907110700s26572976k3e55ed52371d07b8@mail.gmail.com>

On Sat, Jul 11, 2009 at 3:28 AM, Hermann Peifer <peifer at gmx.eu> wrote:

> Carl Godkin wrote:
> > On Fri, Jul 10, 2009 at 12:26 PM, Clifford J Mugnier <cjmce at lsu.edu>
> wrote:
> >
> >>  April 2008 issue of my *Grids and Datums* column is on *Costa Rica*.
>  It
> >> can be downloaded from:
> >>
> >> www.ASPRS.org/resources/grids
> >>
> >>
> >
> >
> > Dr. Mugnier's paper uses  False Easting = 271,820.522 as well, so I
> believe
> > this is a bug in the PROJ.4 nad/world file.
> >
> > Thanks,
> >
>
> BTW: most results from a random Internet search on 'costa rica norte
> 271820.522' indicate that this is the False Northing, rather than the False
> Easting value.
>
> The country's Instituto Geográfico Nacional also mentions 271820.522 as the
> FN value, see page 3 at http://www.mopt.go.cr/ign/documentos/Lambert.pdf
>


Yes, you're right.  I just copied a typo out of Dr Mugnier's paper without
thinking about
it.  This value is apparently very slippery.  Our customer had this as FN
also.

Thanks for pointing that out,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090711/ed5a91b1/attachment.html>

From ckarney at Sarnoff.com  Sat Jul 11 09:03:17 2009
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Sat, 11 Jul 2009 12:03:17 -0400
Subject: [Proj] Geodesic distances away from the ellipsoid
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7EC2647@email002.lsu.edu>
References: <mailman.7.1237395602.27577.proj@lists.maptools.org>
	<0KGT00AEIDROJ9A0@gb0135mbx01.mail.slb.com>,
	<B597ADFC46B67741B18EA6AA13613FF7EC2647@email002.lsu.edu>
Message-ID: <CED6B4B383C5F0418DAFEA443A0033C2C181D32F9A@MALIBU.sarnoff.internal>

> From: Jay Hollingsworth <jhollingsworth at houston.oilfield.slb.com>
> Sent: Fri 20-Mar-09 11:56
> Subject: [Proj] Geodesic distances away from the ellipsoid

> At the risk of asking a dumb question, do any of the geodesic
> algorithms allow calculation of the geodesic distance if the path is
> not on the ellipsoid? Like in an airplane or satellite whose path
> could be assumed to be a constant height above the ellipsoid?

The paper

  Richard Mathar
  Geodetic Line at Constant Altitude above the Ellipsoid
  http://arxiv.org/abs/0711.0642

addresses this problem.  However, I believe there is a simple solution.

Let E be the ellipsoid and S a surface a constant height h above it.
A normal section through a point on E is a normal section through the
corresponding point on S.  Thus mapping a geodesic on E to S by
elevating it by h results in a geodesic on S.  This directly gives you
the course of the geodesic.  A little extra work gives you the azimuth
and length.

A couple of questions suggest themselves:

(1) is this observation true?
(2) is it new?

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662


From strebe at aol.com  Sat Jul 11 13:14:00 2009
From: strebe at aol.com (strebe)
Date: Sat, 11 Jul 2009 13:14:00 -0700
Subject: [Proj] Geodesic distances away from the ellipsoid
In-Reply-To: <CED6B4B383C5F0418DAFEA443A0033C2C181D32F9A@MALIBU.sarnoff.internal>
Message-ID: <C3070659.4E6B.44B5.B9BE.4F8D81007329@aol.com>


Charles Karney asks:
>(1) is this observation true?
No.

In order for it to be true, the surface of constant height above an ellipsoid must also be an ellipsoid, and must be the same ellipsoid but scaled by a constant. That this is not true can be seen by the two-dimensional case: If you scale an ellipse, the new ellipse's major axis and minor axis are scaled by the same amount, but since the major and minor axes are different lengths, scaling by the same amount cannot result in the same differential added to both axes. If the differentials are not the same, the height of the new ellipse over the old one cannot be constant. This generalizes to three dimensions.

The exception is the sphere.

Regards,
— daan Strebe


On Jul 11, 2009, at 9:03:17 AM, "Karney, Charles" <ckarney at Sarnoff.com> wrote:
Let E be the ellipsoid and S a surface a constant height h above it.
A normal section through a point on E is a normal section through the
corresponding point on S.  Thus mapping a geodesic on E to S by
elevating it by h results in a geodesic on S.  This directly gives you
the course of the geodesic.  A little extra work gives you the azimuth
and length.

A couple of questions suggest themselves:

(1) is this observation true?
(2) is it new?

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090711/379e9aea/attachment.html>

From al001 at uni-koeln.de  Sun Jul 12 01:29:19 2009
From: al001 at uni-koeln.de (Irwin Scollar)
Date: Sun, 12 Jul 2009 10:29:19 +0200
Subject: [Proj] Swiss Grid Systems
In-Reply-To: <mailman.1.1247331601.830.proj@lists.maptools.org>
References: <mailman.1.1247331601.830.proj@lists.maptools.org>
Message-ID: <200907120829.n6C8TLdQ015133@smtp-auth.uni-koeln.de>

Swiss Grid Systems

May I suggest that interested participants in this discussion thread open:

http://www.swisstopo.admin.ch/internet/swisstopo/en/home/apps/calc.html

and on the documentation entry on the right click on Reference system 
CH as well as on the Transformation CH1903<->WGS84  for the official 
version dated 19.11.2008?

They are available in English, German and French.

For those requiring higher accuracy for non-GIS geodetic 
purposes,  browse through the superb pages of the Swisstopo site for 
the finest documentation I have seen anywhere.

http://www.swisstopo.admin.ch/internet/swisstopo/en/home.html

The NTv2 grid data is available in the topic Transformation data and 
formulae CHENyx06 of March 2007. See for example

http://www.swisstopo.admin.ch/internet/swisstopo/de/home/products/downloads/software.html 
for much more.

Irwin Scollar



From paul-grass at stjohnspoint.co.uk  Sun Jul 12 03:08:17 2009
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Sun, 12 Jul 2009 11:08:17 +0100 (BST)
Subject: [Proj] Swiss Grid Systems
In-Reply-To: <200907120829.n6C8TLdQ015133@smtp-auth.uni-koeln.de>
References: <mailman.1.1247331601.830.proj@lists.maptools.org>
	<200907120829.n6C8TLdQ015133@smtp-auth.uni-koeln.de>
Message-ID: <Pine.LNX.4.62.0907121104180.18331@vortex.ukshells.co.uk>

On Sun, 12 Jul 2009, Irwin Scollar wrote:

> Swiss Grid Systems
>
> May I suggest that interested participants in this discussion thread open:
>
> http://www.swisstopo.admin.ch/internet/swisstopo/en/home/apps/calc.html

Thanks, that was quite helpful. It also led me to the discovery that 
exactly the same thing was being discussed on *this* list just under 8 
years ago:
<http://lists.maptools.org/pipermail/proj/2001-September/000248.html>

In summary, all the sources seem to suggest that the old 7-parameter 
transformation given in the Grids & Datums column was simply inaccurate 
and has been recalculated more accurately since it was originally 
publicised. I'm still curious as to the subtle difference between the 
3-parameter transformation given in the column and that that is now 
generally accepted, but in my mind anyway things are a lot clearer - 
thanks.

Paul


From ckarney at Sarnoff.com  Sun Jul 12 04:10:00 2009
From: ckarney at Sarnoff.com (Karney, Charles)
Date: Sun, 12 Jul 2009 07:10:00 -0400
Subject: [Proj] Geodesic distances away from the ellipsoid
In-Reply-To: <C3070659.4E6B.44B5.B9BE.4F8D81007329@aol.com>
References: <CED6B4B383C5F0418DAFEA443A0033C2C181D32F9A@MALIBU.sarnoff.internal>,
	<C3070659.4E6B.44B5.B9BE.4F8D81007329@aol.com>
Message-ID: <CED6B4B383C5F0418DAFEA443A0033C2C181D32F9B@MALIBU.sarnoff.internal>

> > From: Charles Karney
> >
> > Let E be the ellipsoid and S a surface a constant height h above it.
> > A normal section through a point on E is a normal section through the
> > corresponding point on S.  Thus mapping a geodesic on E to S by
> > elevating it by h results in a geodesic on S.  This directly gives you
> > the course of the geodesic.  A little extra work gives you the azimuth
> > and length.
> >
> > A couple of questions suggest themselves:
> >
> > (1) is this observation true?

> From: daan Stebe
>
> No.
>
> In order for it to be true, the surface of constant height above an
> ellipsoid must also be an ellipsoid, and must be the same ellipsoid
> but scaled by a constant.

Indeed my statement is false.

But your way of showing this doesn't work because while an ellipsoid
raised by h stops being an ellipsoid, an ellipsoidal geodesic raised
by h also ceases to have the properties of an ellipsoidal geodesic.

A simple counter-example is a cylinder with a cross section which is a
stadium (two semi circles joined by straight segments).  When the
cylinder is unfolded, the geodesic spiralling up such a surface is a
straight line.  However if the surface is mapped into another cylinder
a distance h away, this straight line maps into a connected sequence
of straight lines which have different slopes corresponding to the
flat and round portions of the stadium.  This obviously is not the
geodesic for the expanded cylinder.

--
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662


From strebe at aol.com  Mon Jul 13 19:40:52 2009
From: strebe at aol.com (strebe)
Date: Mon, 13 Jul 2009 19:40:52 -0700
Subject: [Proj] Geodesic distances away from the ellipsoid
In-Reply-To: <8CBCCE345398010-AA8-221A@Webmail-mg02.sim.aol.com>
Message-ID: <F33BA045.75E6.4729.A575.C3F5D1910D34@aol.com>


I agree that a geodesic on a projected surface need not be a simple scaling of a geodesic on the original surface even if the paths of the geodesics coincide. While I wrote "the surface of constant height above an ellipsoid must also be an ellipsoid" as if "must be an ellipsoid" were a constraint for any solution, in fact I merely thought it was a constraint of the posed problem. I did not realize (or recall) that other surfaces were up for consideration. Presumably constant height is of interest for... flying? Or...? (I cannot imagine any practical use for a precise solution, but there's no reason that should shut off consideration.)

You originally stated that the geodesics should coincide because a normal section through a point on E is a normal section through the corresponding point on S. Surely that's insufficient to claim a geodesic would coincide, since all it gives is a local direction for the geodesic, not the derivative of the direction that informs the direction of the next infinitesimal section in the geodesic's path. What might be two "adjacent" normal sections on the ellipsoid along its geodesic would belong to two different geodesics on the raised surface. Not a proof by any means, but I think it's analogous to saying the slope along a two-dimensional path tells you nothing about the behavior of the path away from that point. Presumably a rigorous form of this observation is what convinced you of the error.

Regards,
— daan Strebe


On Jul 12, 2009, at 4:10:00 AM, "Karney, Charles" <ckarney at Sarnoff.com> wrote:
> From: daan Stebe
>
> No.
>
> In order for it to be true, the surface of constant height above an
> ellipsoid must also be an ellipsoid, and must be the same ellipsoid
> but scaled by a constant.

Indeed my statement is false.

But your way of showing this doesn't work because while an ellipsoid
raised by h stops being an ellipsoid, an ellipsoidal geodesic raised
by h also ceases to have the properties of an ellipsoidal geodesic.

A simple counter-example is a cylinder with a cross section which is a
stadium (two semi circles joined by straight segments). When the
cylinder is unfolded, the geodesic spiralling up such a surface is a
straight line. However if the surface is mapped into another cylinder
a distance h away, this straight line maps into a connected sequence
of straight lines which have different slopes corresponding to the
flat and round portions of the stadium. This obviously is not the
geodesic for the expanded cylinder.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20090713/7a026771/attachment.html>

From support.mn at elisanet.fi  Wed Jul 15 01:30:45 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Wed, 15 Jul 2009 11:30:45 +0300 (EEST)
Subject: [Proj] Geodesic distances away from the ellipsoid
Message-ID: <16488893.193091247646645773.JavaMail.support.mn@elisanet.fi>

strebe [strebe at aol.com] kirjoitti: 
> Presumably constant height is of interest for... flying? Or...? (I cannot imagine any practical use for a precise solution, but there's no reason that should shut off consideration.)
> 

Not exactly,
they are talking about flight levels and that is defined as:

"A Flight Level (FL) is a standard nominal altitude of an aircraft, in hundreds of feet. This altitude is calculated from a world-wide fixed pressure datum of 1013.25 hPa (29.921 inHg), the average sea-level pressure, and therefore is not necessarily the same as the aircraft's true altitude either above mean sea level or above ground level."

http://en.wikipedia.org/wiki/Flight_level

The WGS84 ellipsoid and the average sea level can differ several hundreds meters. So to be exact one should first calculate the geoid height and then transform that to an ellipsoid height. And even adjust for the fact that the actual sea level pressure at that point is far from the average.

Janne. / MNS Support



From orion at cora.nwra.com  Thu Jul 16 09:30:36 2009
From: orion at cora.nwra.com (Orion Poplawski)
Date: Thu, 16 Jul 2009 10:30:36 -0600
Subject: [Proj] Change in +prog=eqc behavior from 4.5.0 to 4.6.1
Message-ID: <4A5F55AC.40103@cora.nwra.com>

With 4.5.0:

proj +proj=eqc +lon_0=0 +a=5.3049894774131808e-315

does not complain.

With 4.6.1:

proj +proj=eqc +lon_0=0 +a=5.3049894774131808e-315
Rel. 4.6.1, 21 August 2008
<proj>:
projection initialization failure
cause: no system list, errno: 34

program abnormally terminated


Is this expected?  If so, what needs to be done to get it to work in 4.6.1?

Thanks for any help.

-- 
Orion Poplawski
Technical Manager                     303-415-9701 x222
NWRA/CoRA Division                    FAX: 303-415-9702
3380 Mitchell Lane                  orion at cora.nwra.com
Boulder, CO 80301              http://www.cora.nwra.com


From geraldi.evenden at gmail.com  Thu Jul 16 10:25:34 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 16 Jul 2009 13:25:34 -0400
Subject: [Proj] Change in +prog=eqc behavior from 4.5.0 to 4.6.1
In-Reply-To: <4A5F55AC.40103@cora.nwra.com>
References: <4A5F55AC.40103@cora.nwra.com>
Message-ID: <200907161325.34393.geraldi.evenden@gmail.com>

On Thursday 16 July 2009 12:30:36 pm Orion Poplawski wrote:
> With 4.5.0:
>
> proj +proj=eqc +lon_0=0 +a=5.3049894774131808e-315
>
> does not complain.
>
> With 4.6.1:
>
> proj +proj=eqc +lon_0=0 +a=5.3049894774131808e-315
> Rel. 4.6.1, 21 August 2008
> <proj>:
> projection initialization failure
> cause: no system list, errno: 34
>
> program abnormally terminated
>
>
> Is this expected?  If so, what needs to be done to get it to work in 4.6.1?
>
> Thanks for any help.

I do not get the point with the absurd value of +a=?

Does the program fail with a more sane specification of +a?

gie at charon:~$ lproj +proj=eqc +lon_0=0 +a=5.3049894774131808e-315
1 1
0.00    0.00
20 20
0.00    0.00
gie at charon:~$ lproj +proj=eqc +lon_0=0 +a=1000
10 10
174.53  174.53
gie at charon:~$

In my case, lproj just returns junk zeroes for a junk major axis.  Dunno why, 
don't care.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From orion at cora.nwra.com  Thu Jul 16 10:34:01 2009
From: orion at cora.nwra.com (Orion Poplawski)
Date: Thu, 16 Jul 2009 11:34:01 -0600
Subject: [Proj] Change in +prog=eqc behavior from 4.5.0 to 4.6.1
In-Reply-To: <200907161325.34393.geraldi.evenden@gmail.com>
References: <4A5F55AC.40103@cora.nwra.com>
	<200907161325.34393.geraldi.evenden@gmail.com>
Message-ID: <4A5F6489.9070404@cora.nwra.com>

On 07/16/2009 11:25 AM, Gerald I. Evenden wrote:
>
> I do not get the point with the absurd value of +a=?

Me neither, it's from a test suite for Perl-PDL so it's probably testing 
extremes.

> Does the program fail with a more sane specification of +a?
>

Yes.  So, more of a number parsing issue?

-- 
Orion Poplawski
Technical Manager                     303-415-9701 x222
NWRA/CoRA Division                    FAX: 303-415-9702
3380 Mitchell Lane                  orion at cora.nwra.com
Boulder, CO 80301              http://www.cora.nwra.com


From orion at cora.nwra.com  Thu Jul 16 13:29:17 2009
From: orion at cora.nwra.com (Orion Poplawski)
Date: Thu, 16 Jul 2009 14:29:17 -0600
Subject: [Proj] Change in +prog=eqc behavior from 4.5.0 to 4.6.1
In-Reply-To: <4A5F6489.9070404@cora.nwra.com>
References: <4A5F55AC.40103@cora.nwra.com>	<200907161325.34393.geraldi.evenden@gmail.com>
	<4A5F6489.9070404@cora.nwra.com>
Message-ID: <4A5F8D9D.1060706@cora.nwra.com>

On 07/16/2009 11:34 AM, Orion Poplawski wrote:
> Yes.  So, more of a number parsing issue?
>

Turns out that somewhere between glibc 2.9 and 2.10.1, atof/strtod for 
"5.3049894774131808e-315" starting setting errno to ERANGE.  Having 
errno set causes pj_init to abort.  I believe this is a bug in glibc 
(file here: http://sourceware.org/bugzilla/show_bug.cgi?id=10404).

--
Orion Poplawski
Technical Manager                     303-415-9701 x222
NWRA/CoRA Division                    FAX: 303-415-9702
3380 Mitchell Lane                  orion at cora.nwra.com
Boulder, CO 80301              http://www.cora.nwra.com


From orion at cora.nwra.com  Thu Jul 16 14:53:57 2009
From: orion at cora.nwra.com (Orion Poplawski)
Date: Thu, 16 Jul 2009 15:53:57 -0600
Subject: [Proj] Change in +prog=eqc behavior from 4.5.0 to 4.6.1
In-Reply-To: <4A5F8D9D.1060706@cora.nwra.com>
References: <4A5F55AC.40103@cora.nwra.com>	<200907161325.34393.geraldi.evenden@gmail.com>	<4A5F6489.9070404@cora.nwra.com>
	<4A5F8D9D.1060706@cora.nwra.com>
Message-ID: <4A5FA175.9080907@cora.nwra.com>

On 07/16/2009 02:29 PM, Orion Poplawski wrote:
> Turns out that somewhere between glibc 2.9 and 2.10.1, atof/strtod for
> "5.3049894774131808e-315" starting setting errno to ERANGE.  Having
> errno set causes pj_init to abort.  I believe this is a bug in glibc
> (file here: http://sourceware.org/bugzilla/show_bug.cgi?id=10404).

Well, apparently the glibc maintainer doesn't agree with me (big 
surprise), so it seems that proj should be made so that it can handle 
errno getting set to ERANGE.  I'm not sure what the best way would be. 
I'd be tempted for now just to set errno to 0 after calling atof, but 
that is not very good form.

-- 
Orion Poplawski
Technical Manager                     303-415-9701 x222
NWRA/CoRA Division                    FAX: 303-415-9702
3380 Mitchell Lane                  orion at cora.nwra.com
Boulder, CO 80301              http://www.cora.nwra.com


From glynn at gclements.plus.com  Thu Jul 16 16:43:12 2009
From: glynn at gclements.plus.com (Glynn Clements)
Date: Fri, 17 Jul 2009 00:43:12 +0100
Subject: [Proj] Change in +prog=eqc behavior from 4.5.0 to 4.6.1
In-Reply-To: <4A5FA175.9080907@cora.nwra.com>
References: <4A5F55AC.40103@cora.nwra.com>
	<200907161325.34393.geraldi.evenden@gmail.com>
	<4A5F6489.9070404@cora.nwra.com> <4A5F8D9D.1060706@cora.nwra.com>
	<4A5FA175.9080907@cora.nwra.com>
Message-ID: <19039.47888.83726.883849@cerise.gclements.plus.com>


Orion Poplawski wrote:

> On 07/16/2009 02:29 PM, Orion Poplawski wrote:
> > Turns out that somewhere between glibc 2.9 and 2.10.1, atof/strtod for
> > "5.3049894774131808e-315" starting setting errno to ERANGE.  Having
> > errno set causes pj_init to abort.  I believe this is a bug in glibc
> > (file here: http://sourceware.org/bugzilla/show_bug.cgi?id=10404).
> 
> Well, apparently the glibc maintainer doesn't agree with me (big 
> surprise),

C99 and POSIX permit atof() to set errno to ERANGE on underflow. C99
permits strtod() to set errno to ERANGE on underflow, while POSIX
requires it.

-- 
Glynn Clements <glynn at gclements.plus.com>


From aaron at cartopac.com  Thu Jul 16 17:15:20 2009
From: aaron at cartopac.com (Aaron Friesen)
Date: Thu, 16 Jul 2009 20:15:20 -0400
Subject: [Proj] Change in +prog=eqc behavior from 4.5.0 to 4.6.1
In-Reply-To: <4A5FA175.9080907@cora.nwra.com>
References: <4A5F55AC.40103@cora.nwra.com>
	<200907161325.34393.geraldi.evenden@gmail.com>
	<4A5F6489.9070404@cora.nwra.com>	<4A5F8D9D.1060706@cora.nwra.com>
	<4A5FA175.9080907@cora.nwra.com>
Message-ID: <90200BC582E4FF488816D357540C1D4D1416AE9488@VMBX103.ihostexchange.net>



> -----Original Message-----
> On 07/16/2009 02:29 PM, Orion Poplawski wrote:
> > Turns out that somewhere between glibc 2.9 and 2.10.1, atof/strtod
> for
> > "5.3049894774131808e-315" starting setting errno to ERANGE.  Having
> > errno set causes pj_init to abort.  I believe this is a bug in glibc
> > (file here: http://sourceware.org/bugzilla/show_bug.cgi?id=10404).
> 
> Well, apparently the glibc maintainer doesn't agree with me (big
> surprise), so it seems that proj should be made so that it can handle
> errno getting set to ERANGE.  I'm not sure what the best way would be.
> I'd be tempted for now just to set errno to 0 after calling atof, but
> that is not very good form.

If I'm reading the IEEE spec correctly, the smallest normalized double
precision floating point value that can be stored has a hex pattern of
0x0020000000000000 (the right-most exponent bit set, all other bits
zero), which is approximately 4.4501477170144028e-308.  With denormalized
values, it is possible to represent smaller numbers, but the conversion
routines (atof/strtod) cannot (or at least should not) produce
denormalized values.

I would agree with the glibc maintainer, that ERANGE is a proper
response when attempting to convert "5.3049894774131808e-315".

By the way, the Visual Studio debugger shows 5.304989477413e-315 for the 
denormalized value with hex pattern 0x0000000040000000.

Aaron


From dturover at student.santarosa.edu  Tue Jul 21 23:39:52 2009
From: dturover at student.santarosa.edu (David Turover)
Date: Tue, 21 Jul 2009 23:39:52 -0700
Subject: [Proj] Need help converting Goode to latlon
Message-ID: <20090722063952.GA32373@busstudent.santarosa.edu>

I have shapefiles made in ArcGIS that use the Interrupted Goode Homolosine
projection. I am trying to use libproj to reproject them to lat/lon, but the
resulting shapes do not align correctly to the corresponding features in
Google Earth. Everything is pulled to the west by a small amount near the
equator and a larger amount further away from the equator.

Example: http://segfault.cs.sonoma.edu/~dturover/gisbug/projectionError.jpg

The projection in ESRI format is Goode%20Homolosine%206378137%20sphere.prj
in that directory. The proj arguments that I am using to define Goode are:

+proj=goode +lon_0=0 +x_0=0 +y_0=0 +a=6378137 +b=6378137 +units=m +no_defs

What sort of things might be going wrong here? How might I be able to
adjust whatever algorithm is being run to attempt to fix it? I am too new
to projections to know what is possible in these areas.

I see that the .prj file has a "<custom>" datum, but I do not know what
this implies or how to make sure proj is using it. The custom datum is:
DATUM[
        "<custom>",
        SPHEROID[
                "WGS_1984_Major_Auxiliary_Sphere",
                6378137.0,0.0
        ]
]

Also, proj -lP lists PCyl and Sph as different projection classes under
+proj=goode but I cannot find anything in the proj4 documentation on
how to specify a projection class. The .prj file says that I should be
using a spherical projection. If proj defaults to a pseudocylindrical
algorithm for Goode, would it produce different results? If so, how
could I force it to run a spherical algorithm?

Thanks in advance for any help.

 - David T. 


From geraldi.evenden at gmail.com  Wed Jul 22 07:04:18 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Wed, 22 Jul 2009 10:04:18 -0400
Subject: [Proj] Need help converting Goode to latlon
In-Reply-To: <20090722063952.GA32373@busstudent.santarosa.edu>
References: <20090722063952.GA32373@busstudent.santarosa.edu>
Message-ID: <200907221004.18183.geraldi.evenden@gmail.com>

On Wednesday 22 July 2009 2:39:52 am David Turover wrote:
> I have shapefiles made in ArcGIS that use the Interrupted Goode Homolosine
> projection. I am trying to use libproj to reproject them to lat/lon, but
> the resulting shapes do not align correctly to the corresponding features
> in Google Earth. Everything is pulled to the west by a small amount near
> the equator and a larger amount further away from the equator.
>
> Example: http://segfault.cs.sonoma.edu/~dturover/gisbug/projectionError.jpg

The projection in the above jpeg looks like Near-sided perspective.  At any 
rate, it certainly is not Goode's pseudocylindrical Homolosine.

> The projection in ESRI format is Goode%20Homolosine%206378137%20sphere.prj
> in that directory. The proj arguments that I am using to define Goode are:
>
> +proj=goode +lon_0=0 +x_0=0 +y_0=0 +a=6378137 +b=6378137 +units=m +no_defs

+b= is not necessary as Goode is only available as a spherical earth and +b is 
the minor axis of an ellipsoidal earth.

> What sort of things might be going wrong here? How might I be able to
> adjust whatever algorithm is being run to attempt to fix it? I am too new
> to projections to know what is possible in these areas.
>
> I see that the .prj file has a "<custom>" datum, but I do not know what
> this implies or how to make sure proj is using it. The custom datum is:
> DATUM[
>         "<custom>",
>         SPHEROID[
>                 "WGS_1984_Major_Auxiliary_Sphere",
>                 6378137.0,0.0
>         ]
> ]

At this point, and especially at global scales, I do not think you need to 
worry about datums.

> Also, proj -lP lists PCyl and Sph as different projection classes under
> +proj=goode but I cannot find anything in the proj4 documentation on
> how to specify a projection class.

PCyl : pseudocylindrical

Sph: spherical earth

Just FYI info and not something you specify in selecting a projection.

> The .prj file says that I should be 
> using a spherical projection. If proj defaults to a pseudocylindrical
> algorithm for Goode, would it produce different results? If so, how
> could I force it to run a spherical algorithm?
>
> Thanks in advance for any help.

Help is very difficult because of the confusion caused by the jpeg figure.  
Certainly a Goode projection is not going to come anyway come near matching 
your referenced jpeg figure except in a very limited form near the center of 
the projection.  See:

http://www.csiss.org/map-projections/Pseudocylindrical/Goode_Homolosine_a.pdf

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From support.mn at elisanet.fi  Wed Jul 22 09:37:51 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Wed, 22 Jul 2009 19:37:51 +0300 (EEST)
Subject: [Proj] Need help converting Goode to latlon
Message-ID: <17405947.500621248280672503.JavaMail.support.mn@elisanet.fi>

David Turover [dturover at student.santarosa.edu] kirjoitti: 
> 
> Example: http://segfault.cs.sonoma.edu/~dturover/gisbug/projectionError.jpg
> 
> 
> +proj=goode +lon_0=0 +x_0=0 +y_0=0 +a=6378137 +b=6378137 +units=m +no_defs
> 

If the lon_0 parameter should be -90, since that is on USA??

Janne. - MNS Support



From Joel_Cusick at nps.gov  Wed Jul 22 11:02:27 2009
From: Joel_Cusick at nps.gov (Joel_Cusick at nps.gov)
Date: Wed, 22 Jul 2009 10:02:27 -0800
Subject: [Proj] Joel Cusick/AKSO/NPS is out of office
Message-ID: <OFE0985C60.B15091B7-ON892575FB.00631A4F-892575FB.00631A4F@nps.gov>


I will be out of the office starting  07/22/2009 and will not return until
07/27/2009.




From dturover at student.santarosa.edu  Wed Jul 22 22:14:46 2009
From: dturover at student.santarosa.edu (David Turover)
Date: Wed, 22 Jul 2009 22:14:46 -0700
Subject: [Proj] Need help converting Goode to latlon
In-Reply-To: <200907221004.18183.geraldi.evenden@gmail.com>
References: <20090722063952.GA32373@busstudent.santarosa.edu>
	<200907221004.18183.geraldi.evenden@gmail.com>
Message-ID: <20090723051446.GA26464@busstudent.santarosa.edu>

On Wed, Jul 22, 2009 at 10:04:18AM -0400, Gerald I. Evenden wrote:
> On Wednesday 22 July 2009 2:39:52 am David Turover wrote:
> >
> > Example: http://segfault.cs.sonoma.edu/~dturover/gisbug/projectionError.jpg
> 
> The projection in the above jpeg looks like Near-sided perspective.  At any 
> rate, it certainly is not Goode's pseudocylindrical Homolosine.

The jpeg is the result of attempting to reproject from Goode to geographic
coordinates. I have confirmed with an ESRI tool that the original shape is
in Goode, so the problem is in my use of proj.

Additional notes:

+proj=sinu produces similar results except that the tip of South America
is pulled further west. Since sinu is the middle half of goode and the
polar regions use a different algorithm, this should be expected.
However, it may be worth mentioning that I can't get sinu to match the
country shapes to their borders either.

Most tweaks that I attempted to make to the proj arguments resulted in
no change in the output, including turning off +no_defs and giving both
the input and output projections the same datum "+datum=WGS84".

I had the output projection as a null string to default to geographical
coordinates. "+proj=latlon +units=degrees" gives the same result.

Overstating +a (the earth's radius?) will pull shapes to the east as
they are stretched, including things at the equator that were well
placed before.

"+lon_0=-90" drew the South America shapes in the middle of the Pacific
Ocean. This makes sense since the original projection is based on the
Greenwich meridian, so this just moved everything west.

I turned on the PROJ_DEBUG environment variable but the only notice it
gave was that proj_def.dat could not be opened. I fixed this by exporting
PROJ_LIB so it searched in the right place. This did not affect the
projection.

The ESRI projection definition includes an option named "Option" that
is set to 1. This does not sound very important, but might it have an
effect?


 - David T. 


From support.mn at elisanet.fi  Thu Jul 23 02:00:10 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Thu, 23 Jul 2009 12:00:10 +0300 (EEST)
Subject: [Proj] Need help converting Goode to latlon
Message-ID: <24531530.507011248339610621.JavaMail.support.mn@elisanet.fi>

David Turover [dturover at student.santarosa.edu] kirjoitti: 
> "+lon_0=-90" drew the South America shapes in the middle of the Pacific
> Ocean. This makes sense since the original projection is based on the
> Greenwich meridian, so this just moved everything west.
> 

Sure, but did the shape get any better? Some projections distort when
they are off the center. If the result is just shifted it is easy to fix that by
for example giving some flase easting (x_0=...).

1) Try to get right shape.
2) Shift and resize it to the right place.

Janne / MNS SUpport



From geraldi.evenden at gmail.com  Thu Jul 23 07:56:19 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 23 Jul 2009 10:56:19 -0400
Subject: [Proj] Need help converting Goode to latlon
In-Reply-To: <20090723051446.GA26464@busstudent.santarosa.edu>
References: <20090722063952.GA32373@busstudent.santarosa.edu>
	<200907221004.18183.geraldi.evenden@gmail.com>
	<20090723051446.GA26464@busstudent.santarosa.edu>
Message-ID: <200907231056.19606.geraldi.evenden@gmail.com>

On Thursday 23 July 2009 1:14:46 am David Turover wrote:
> On Wed, Jul 22, 2009 at 10:04:18AM -0400, Gerald I. Evenden wrote:
> > On Wednesday 22 July 2009 2:39:52 am David Turover wrote:
> > > Example:
> > > http://segfault.cs.sonoma.edu/~dturover/gisbug/projectionError.jpg
> >
> > The projection in the above jpeg looks like Near-sided perspective.  At
> > any rate, it certainly is not Goode's pseudocylindrical Homolosine.
>
> The jpeg is the result of attempting to reproject from Goode to geographic
> coordinates. I have confirmed with an ESRI tool that the original shape is
> in Goode, so the problem is in my use of proj.

I am sorry, but the above sentence makes no sense to me.  What does the jpeg 
figure have to do with anything then?  It is not a representation 
of "geographic coordinates" but a display of said coordinates in a particular 
projection.

It would appear that your original data is in Goode projection coordinates and 
you want to *inverse project* these values to geographic coordinate.

> Additional notes:
>
> +proj=sinu produces similar results except that the tip of South America
> is pulled further west. Since sinu is the middle half of goode and the
> polar regions use a different algorithm, this should be expected.
> However, it may be worth mentioning that I can't get sinu to match the
> country shapes to their borders either.

Goode's projection is a combination of the the Sinusoidal projection for 
    |latitude|<40°44'
and Mollweide for all other latitudes.  It is most often used in an interupted 
form. 

> Most tweaks that I attempted to make to the proj arguments resulted in
> no change in the output, including turning off +no_defs and giving both
> the input and output projections the same datum "+datum=WGS84".

If you were using lproj then:

lproj -I +proj=goode +lon_0=90 +R=val <input_cart.dat >output_geog.dat

The radius val needs to be determined based upon the cartesian units and scale 
of your cartesian input data.  Output in output.dat will be geographic 
coordinates.  +a may be substituded for +R.  lon_0 is based upon the central 
meridian used in the original Goode projection.

The lproj usage should apply to Warmardam's proj.  +no_defs should not make 
any difference in this case.  lon_0 and R (a) are the only two options that 
really make any difference with this projection.  Note: if proj were as I 
originally wrote it, then executing proj would be identical to the lproj 
execition.

> I had the output projection as a null string to default to geographical
> coordinates. "+proj=latlon +units=degrees" gives the same result.
>
> Overstating +a (the earth's radius?) will pull shapes to the east as
> they are stretched, including things at the equator that were well
> placed before.

I should "stretch" things in all directions!!!

> "+lon_0=-90" drew the South America shapes in the middle of the Pacific
> Ocean. This makes sense since the original projection is based on the
> Greenwich meridian, so this just moved everything west.

???

> I turned on the PROJ_DEBUG environment variable but the only notice it
> gave was that proj_def.dat could not be opened. I fixed this by exporting
> PROJ_LIB so it searched in the right place. This did not affect the
> projection.
>
> The ESRI projection definition includes an option named "Option" that
> is set to 1. This does not sound very important, but might it have an
> effect?

I think there is a great communication problem here.

Basic questions:

1. what are the original coordinates you are dealing with?  Goode cartesian?
2. What is the central meridian used by the Goode projection to create these 
coodinates?
3. What earth radius and units were used in the projection?

These questions *must* be answered before using any projection procedure.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From geraldi.evenden at gmail.com  Thu Jul 23 08:01:18 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 23 Jul 2009 11:01:18 -0400
Subject: [Proj] Need help converting Goode to latlon
In-Reply-To: <20090723051446.GA26464@busstudent.santarosa.edu>
References: <20090722063952.GA32373@busstudent.santarosa.edu>
	<200907221004.18183.geraldi.evenden@gmail.com>
	<20090723051446.GA26464@busstudent.santarosa.edu>
Message-ID: <200907231101.18944.geraldi.evenden@gmail.com>

ERROR ERROR ERROR

Please my correct previous email on this thread.

Regarding the lproj execution line, it should read:

lproj -I +proj=goode +lon_0=-90 +R=val <input_cart.dat >output_geog.dat


Note sigh of +lon_0 value.

I've been spending too much time with US and Canadian datum correction 
processes.  :-(

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From dturover at student.santarosa.edu  Thu Jul 23 10:12:02 2009
From: dturover at student.santarosa.edu (David Turover)
Date: Thu, 23 Jul 2009 10:12:02 -0700
Subject: [Proj] Need help converting Goode to latlon
In-Reply-To: <200907231056.19606.geraldi.evenden@gmail.com>
References: <20090722063952.GA32373@busstudent.santarosa.edu>
	<200907221004.18183.geraldi.evenden@gmail.com>
	<20090723051446.GA26464@busstudent.santarosa.edu>
	<200907231056.19606.geraldi.evenden@gmail.com>
Message-ID: <20090723171202.GA4725@busstudent.santarosa.edu>

On Thu, Jul 23, 2009 at 10:56:19AM -0400, Gerald I. Evenden wrote:
> On Thursday 23 July 2009 1:14:46 am David Turover wrote:
> > The jpeg is the result of attempting to reproject from Goode to geographic
> > coordinates. I have confirmed with an ESRI tool that the original shape is
> > in Goode, so the problem is in my use of proj.
> 
> I am sorry, but the above sentence makes no sense to me.  What does the jpeg 
> figure have to do with anything then?  It is not a representation 
> of "geographic coordinates" but a display of said coordinates in a particular 
> projection.

The jpeg shows my Goode-to-latlon results laid onto Google Earth as
coordinate-based KML so my output can be compared against Google Earth's
known-good representations of country positions in lat/lon coordinates.
Since they do not line up, I am doing something wrong. I hoped the picture
might offer more experienced people a hint as to the specific problem. 

> It would appear that your original data is in Goode projection coordinates
> and you want to *inverse project* these values to geographic coordinate.

I forgot to mention that I have been adding "+inv" to the proj arguments
programmatically. When I get into work I will make sure this is working
and I will also try leaving it off to see if that makes a difference.
Let's watch this be the source of the problem since it is something that
I should have mentioned two days ago. 

> I think there is a great communication problem here.
>
> Basic questions:
>
> 1. what are the original coordinates you are dealing with?  Goode cartesian?
> 2. What is the central meridian used by the Goode projection to create these
> coodinates?
> 3. What earth radius and units were used in the projection?
>
> These questions *must* be answered before using any projection procedure.

1. The input projection is "Goode_Homolosine_6378137_sphere". The coordinate
values are decimal numbers six figures long plus a fractional amount. The
full projection definition is here:
http://segfault.cs.sonoma.edu/~dturover/gisbug/Goode%20Homolosine%206378137%20sphere.prj

2. The central meridian is Greenwich.

3. Input units are meters, output units are degrees. The earth radius in
the input projection is 6378137.0.


 - David T. 


From geraldi.evenden at gmail.com  Thu Jul 23 11:18:39 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 23 Jul 2009 14:18:39 -0400
Subject: [Proj] Need help converting Goode to latlon
In-Reply-To: <20090723171202.GA4725@busstudent.santarosa.edu>
References: <20090722063952.GA32373@busstudent.santarosa.edu>
	<200907231056.19606.geraldi.evenden@gmail.com>
	<20090723171202.GA4725@busstudent.santarosa.edu>
Message-ID: <200907231418.39584.geraldi.evenden@gmail.com>

On Thursday 23 July 2009 1:12:02 pm David Turover wrote:
> On Thu, Jul 23, 2009 at 10:56:19AM -0400, Gerald I. Evenden wrote:
> > On Thursday 23 July 2009 1:14:46 am David Turover wrote:
> > > The jpeg is the result of attempting to reproject from Goode to
> > > geographic coordinates. I have confirmed with an ESRI tool that the
> > > original shape is in Goode, so the problem is in my use of proj.
> >
> > I am sorry, but the above sentence makes no sense to me.  What does the
> > jpeg figure have to do with anything then?  It is not a representation of
> > "geographic coordinates" but a display of said coordinates in a
> > particular projection.
>
> The jpeg shows my Goode-to-latlon results laid onto Google Earth as
> coordinate-based KML so my output can be compared against Google Earth's
> known-good representations of country positions in lat/lon coordinates.
> Since they do not line up, I am doing something wrong. I hoped the picture
> might offer more experienced people a hint as to the specific problem.

I do not know when Google became the benchmark for projection stardards but 
that is another issue.  Secondly, comparing results graphically, especially 
with a projection like nsper, leaves something to be desired.

In the future, I woult strongly suggest that in seeking verification of 
projection operations that a short, randomly selected collection of the 
source data values being converted be given and simply ask for a conversion 
of these values from a knowledgeable source.

> > It would appear that your original data is in Goode projection
> > coordinates and you want to *inverse project* these values to geographic
> > coordinate.
>
> I forgot to mention that I have been adding "+inv" to the proj arguments
> programmatically. When I get into work I will make sure this is working
> and I will also try leaving it off to see if that makes a difference.
> Let's watch this be the source of the problem since it is something that
> I should have mentioned two days ago.

I have no idea what "+inv" is so I assume it is part of Warmerdam's version.  
Early proj and lproj use -I runline option to designate inverse projection.

#!/bin/bash
# run off a few test examples of Goode projection
lproj +proj=goode +R=6378137.0 <<EOF >test_cart.dat
0 45
-80 30
-120 -10
60 50
10 10
EOF
#
# run the cartesian file back to geographic coordinates
#
lproj -I +proj=goode +R=6378137.0 <test_cart.dat >test_geog.dat
#
echo done

after running above script:

gie at charon:~/tmp$ m *.dat
::::::::::::::
test_cart.dat
::::::::::::::
0.00    5003479.28
-7712440.56     3339584.72
-13155395.71    -1113194.91
4563799.12      5536706.32
1096282.98      1113194.91
::::::::::::::
test_geog.dat
::::::::::::::
0dE     45dN
80dW    30dN
120dW   10dS
60dE    50dN
10dE    10dN
gie at charon:~/tmp$

OK?

> > I think there is a great communication problem here.
> >
> > Basic questions:
> >
> > 1. what are the original coordinates you are dealing with?  Goode
> > cartesian? 2. What is the central meridian used by the Goode projection
> > to create these coodinates?
> > 3. What earth radius and units were used in the projection?
> >
> > These questions *must* be answered before using any projection procedure.
>
> 1. The input projection is "Goode_Homolosine_6378137_sphere". The
> coordinate values are decimal numbers six figures long plus a fractional
> amount. The full projection definition is here:
> http://segfault.cs.sonoma.edu/~dturover/gisbug/Goode%20Homolosine%206378137
>%20sphere.prj
>
> 2. The central meridian is Greenwich.
>
> 3. Input units are meters, output units are degrees. The earth radius in
> the input projection is 6378137.0.
>
>
>  - David T.
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From support.mn at elisanet.fi  Thu Jul 23 12:34:17 2009
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Thu, 23 Jul 2009 22:34:17 +0300 (EEST)
Subject: [Proj] Need help converting Goode to latlon
Message-ID: <16908807.527051248377658102.JavaMail.support.mn@elisanet.fi>

Hello

I am almost 100% sure that the problem is wrong central
meridian, since the resulting picture shows increasing
error to the north and south. Goode projection does just
that if the central meridian (lon_0) is wrong.

The data is on Americas and that uses usually lon_0=-90.
If the inverse uses lon_0=0, the distortion is evident.

Do some experimenting with lon_0 (central meridian).

Janne. / MNS Support


From EMiller at dfg.ca.gov  Thu Jul 23 12:49:34 2009
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Thu, 23 Jul 2009 12:49:34 -0700
Subject: [Proj] Need help converting Goode to latlon
In-Reply-To: <200907231418.39584.geraldi.evenden@gmail.com>
References: <20090722063952.GA32373@busstudent.santarosa.edu>
	<200907231056.19606.geraldi.evenden@gmail.com>
	<20090723171202.GA4725@busstudent.santarosa.edu>
	<200907231418.39584.geraldi.evenden@gmail.com>
Message-ID: <4A685C5E.95FD.00E4.0@dfg.ca.gov>

>>> On 7/23/2009 at 11:18 AM, "Gerald I. Evenden" <geraldi.evenden at gmail.com>
wrote:
> On Thursday 23 July 2009 1:12:02 pm David Turover wrote:

>> I forgot to mention that I have been adding "+inv" to the proj arguments
>> programmatically. When I get into work I will make sure this is working
>> and I will also try leaving it off to see if that makes a difference.
>> Let's watch this be the source of the problem since it is something that
>> I should have mentioned two days ago.
> 
> I have no idea what "+inv" is so I assume it is part of Warmerdam's version. 
>  
> Early proj and lproj use -I runline option to designate inverse projection.

As far as I can tell +inv is not a valid argument.  It just gets passed to the projection initialization
routine which then ignores it.  The -I flag is still the correct way to tell "proj" program to do an inverse
projection.

Programmatically, you must use pj_inv to do an inverse projection (or use pj_transform).

-- 

Eric G. Miller
Staff Programmer
CA Dept. of Fish & Game




From mkennedy2 at earthlink.net  Thu Jul 23 13:23:07 2009
From: mkennedy2 at earthlink.net (Melita Kennedy)
Date: Thu, 23 Jul 2009 13:23:07 -0700 (GMT-07:00)
Subject: [Proj] Need help converting Goode to latlon
Message-ID: <3943895.1248380587931.JavaMail.root@elwamui-chisos.atl.sa.earthlink.net>



-----Original Message-----

>Message: 2
>Date: Wed, 22 Jul 2009 22:14:46 -0700
>From: David Turover <dturover at student.santarosa.edu>
>Subject: Re: [Proj] Need help converting Goode to latlon
>To: proj at lists.maptools.org
>Message-ID: <20090723051446.GA26464 at busstudent.santarosa.edu>
>Content-Type: text/plain; charset=us-ascii
>
>On Wed, Jul 22, 2009 at 10:04:18AM -0400, Gerald I. Evenden wrote:
>> On Wednesday 22 July 2009 2:39:52 am David Turover wrote:
>> >
>> > Example: http://segfault.cs.sonoma.edu/~dturover/gisbug/projectionError.jpg
>> 
>> The projection in the above jpeg looks like Near-sided perspective.  At any 
>> rate, it certainly is not Goode's pseudocylindrical Homolosine.
>
>The jpeg is the result of attempting to reproject from Goode to geographic
>coordinates. I have confirmed with an ESRI tool that the original shape is
>in Goode, so the problem is in my use of proj.
>
>Additional notes:
>
>+proj=sinu produces similar results except that the tip of South America
>is pulled further west. Since sinu is the middle half of goode and the
>polar regions use a different algorithm, this should be expected.
>However, it may be worth mentioning that I can't get sinu to match the
>country shapes to their borders either.
>
>Most tweaks that I attempted to make to the proj arguments resulted in
>no change in the output, including turning off +no_defs and giving both
>the input and output projections the same datum "+datum=WGS84".
>
>I had the output projection as a null string to default to geographical
>coordinates. "+proj=latlon +units=degrees" gives the same result.
>
>Overstating +a (the earth's radius?) will pull shapes to the east as
>they are stretched, including things at the equator that were well
>placed before.
>
>"+lon_0=-90" drew the South America shapes in the middle of the Pacific
>Ocean. This makes sense since the original projection is based on the
>Greenwich meridian, so this just moved everything west.
>
>I turned on the PROJ_DEBUG environment variable but the only notice it
>gave was that proj_def.dat could not be opened. I fixed this by exporting
>PROJ_LIB so it searched in the right place. This did not affect the
>projection.
>
>The ESRI projection definition includes an option named "Option" that
>is set to 1. This does not sound very important, but might it have an
>effect?
>
>
> - David T. 

David,

The 'option' parameter is used to determine whether to use the 'land' or 
'ocean' version. That is, if '1', the interruptions will occur in the oceans. 
If '2', the interruptions will occur on land. The standard Goode's (land) prj 
file is using WGS84, so the radius is 6378137.0. 

Melita Kennedy
ESRI, Inc.


From geraldi.evenden at gmail.com  Thu Jul 23 16:37:55 2009
From: geraldi.evenden at gmail.com (Gerald I. Evenden)
Date: Thu, 23 Jul 2009 19:37:55 -0400
Subject: [Proj] Need help converting Goode to latlon
In-Reply-To: <3943895.1248380587931.JavaMail.root@elwamui-chisos.atl.sa.earthlink.net>
References: <3943895.1248380587931.JavaMail.root@elwamui-chisos.atl.sa.earthlink.net>
Message-ID: <200907231937.56091.geraldi.evenden@gmail.com>

On Thursday 23 July 2009 4:23:07 pm Melita Kennedy wrote:
> -----Original Message-----
>
> >Message: 2
	...
>
> The 'option' parameter is used to determine whether to use the 'land' or
> 'ocean' version. That is, if '1', the interruptions will occur in the
> oceans. If '2', the interruptions will occur on land. The standard Goode's
> (land) prj file is using WGS84, so the radius is 6378137.0.
>
> Melita Kennedy
> ESRI, Inc.

If the interupted version of Goode is used then *NO* standard version of 
[l]proj will handle it without the user segmenting the data into the 
subregions of the interuptions.

A closer examination of jpeg does seem to verify the idea of an interrupted 
projection.

As an aside, for the America continents segment: +lon_0=-100.  In addition, 
one needs the appropriate +x_0=-1.745329 for unit sphere (multiply that value 
by the radius used to get a proper value for this case).  These values apply 
for Goode's land map.

In addition, because of the wide variation of segmentation used, it is not 
likely that a proj inverse for segmented projections will be an integral part 
of the basic software.

-- 
The whole religious complexion of the modern world is due
to the absence from Jerusalem of a lunatic asylum.
-- Havelock Ellis (1859-1939) British psychologist


From kupen at wippies.fi  Thu Jul 30 00:19:40 2009
From: kupen at wippies.fi (Pena Kupen)
Date: Thu, 30 Jul 2009 10:19:40 +0300 (EEST)
Subject: [Proj] Proj cannot been found by postgis
Message-ID: <1570193211.4421248938381093.JavaMail.kupen@wippies.fi>

Hi all,

I'm new on this list.

I have problem when try to install postGIS from distro repo. I think my problem is installation of proj from source?

*I'm using CentOs 5.3

*Postgres 8.4. installed from rpm
*Proj.4 4.6.1 from source
*CEOS 3.1.1 from source
*try to install PostGIS 1.3.6 from repo with yum, but I got dependency errors:

yum install postgis

Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * updates: centos.siirappi.com
 * base: centos.siirappi.com
 * addons: centos.siirappi.com
 * extras: centos.siirappi.com
Setting up Install Process
Parsing package install arguments
Resolving Dependencies
--> Running transaction check
---> Package postgis.i386 0:1.3.6-1.rhel5 set to be updated
--> Processing Dependency: libgeos_c.so.1 for package: postgis
--> Processing Dependency: proj for package: postgis
--> Processing Dependency: libproj.so.0 for package: postgis
--> Processing Dependency: /usr/bin/rebuild-gcj-db for package: postgis
--> Processing Dependency: geos for package: postgis
--> Running transaction check
---> Package geos.i386 0:2.2.3-3.rhel5 set to be updated
---> Package java-1.4.2-gcj-compat.i386 0:1.4.2.0-40jpp.115 set to be updated
filelists.xml.gz                                         | 139 kB     00:00
filelists.xml.gz                                         | 1.9 MB     00:00
filelists.sqlite.bz2                                     | 109 kB     00:00
--> Processing Dependency: jpackage-utils >= 1.6.6-1jpp_1rh for package: java-1.                                4.2-gcj-compat
--> Processing Dependency: jpackage-utils >= 1.6.6-1jpp_1rh for package: java-1.                                4.2-gcj-compat
--> Processing Dependency: libgcj >= 4.0.0-0.42 for package: java-1.4.2-gcj-comp                                at
--> Processing Dependency: libgcj >= 4.0.0-0.42 for package: java-1.4.2-gcj-comp                                at
--> Processing Dependency: /usr/bin/rebuild-security-providers for package: java                                -1.4.2-gcj-compat
--> Processing Dependency: /usr/lib/gcj-4.1.1/libjvm.so for package: java-14.2-                                gcj-compat
--> Processing Dependency: /usr/bin/gcj-dbtool for package: java-1.4.2-gcj-compa                                t
--> Processing Dependency: /usr/bin/gij for package: java-1.4.2-gcj-compat
--> Processing Dependency: /usr/bin/rebuild-security-providers for package: java                                -1.4.2-gcj-compat
--> Processing Dependency: /usr/bin/gcj-dbtool for package: java-1.4.2-gcj-compa                                t
--> Processing Dependency: /usr/bin/gij for package: java-1.4.2-gcj-compat
--> Processing Dependency: /usr/lib/gcj-4.1.1/libjvm.so for package: java-14.2-                                gcj-compat
--> Processing Dependency: gjdoc for package: java-1.4.2-gcj-compat
---> Package postgis.i386 0:1.3.6-1.rhel5 set to be updated
--> Processing Dependency: proj for package: postgis
--> Processing Dependency: libproj.so.0 for package: postgis
--> Running transaction check
---> Package jpackage-utils.noarch 0:1.7.3-1jpp.2.el5 set to be updated
---> Package postgis.i386 0:1.3.6-1.rhel5 set to be updated
--> Processing Dependency: proj for package: postgis
--> Processing Dependency: libproj.so.0 for package: postgis
---> Package libgcj.i386 0:4.1.2-44.el5 set to be updated
---> Package gjdoc.i386 0:0.7.7-12.el5 set to be updated
--> Processing Dependency: antlr for package: gjdoc
--> Running transaction check
---> Package antlr.i386 0:2.7.6-4jpp.2 set to be updated
---> Package postgis.i386 0:1.3.6-1.rhel5 set to be updated
--> Processing Dependency: proj for package: postgis
--> Processing Dependency: libproj.so.0 for package: postgis
--> Finished Dependency Resolution
postgis-1.3.6-1.rhel5.i386 from pgdg84 has depsolving problems
  --> Missing Dependency: proj is needed by package postgis-1.3.6-1.rhel5.i386 (                                pgdg84)
postgis-1.3.6-1.rhel5.i386 from pgdg84 has depsolving problems
  --> Missing Dependency: libproj.so.0 is needed by package postgis-1.3.6-1rhel                                5.i386 (pgdg84)
Error: Missing Dependency: proj is needed by package postgis-1.3.6-1.rhel5.i386                                 (pgdg84)
Error: Missing Dependency: libproj.so.0 is needed by package postgis-1.3.6-1.rhe                                l5.i386 (pgdg84)

At least libproj - files are there


/usr/local/lib/libproj.a
/usr/local/lib/libproj.la
/usr/local/lib/libproj.so
/usr/local/lib/libproj.so.0
/usr/local/lib/libproj.so.0.5.5

What am I missing?

--
pk


-- 
Saunalahti DataPaketti - tilaa nyt, saat 2 kk veloituksetta ja Nettitikun kaupan päälle!
http://saunalahti.fi/gsm/gsmdatapaketti.php 



From dturover at student.santarosa.edu  Thu Jul 30 17:02:09 2009
From: dturover at student.santarosa.edu (David Turover)
Date: Thu, 30 Jul 2009 17:02:09 -0700
Subject: [Proj] Proj cannot been found by postgis
In-Reply-To: <1570193211.4421248938381093.JavaMail.kupen@wippies.fi>
References: <1570193211.4421248938381093.JavaMail.kupen@wippies.fi>
Message-ID: <20090731000209.GA4984@busstudent.santarosa.edu>

On Thu, Jul 30, 2009 at 10:19:40AM +0300, Pena Kupen wrote:
> I have problem when try to install postGIS from distro repo. I think my problem is installation of proj from source?


yum might be looking for proj in its own database of installed rpms, in
which case it would not find anything that was compiled manually. 
The easy solution, if possible, is to get an official rpm of proj from
your distro.

But it looks like you already know this (and Google is fast):
http://www.linuxforums.org/forum/redhat-fedora-linux-help/150648-solved-centos-yum-dependency-problem-postgis.html

 - David T. 


From dturover at student.santarosa.edu  Thu Jul 30 17:08:48 2009
From: dturover at student.santarosa.edu (David Turover)
Date: Thu, 30 Jul 2009 17:08:48 -0700
Subject: [Proj] Need help converting Goode to latlon
In-Reply-To: <200907231937.56091.geraldi.evenden@gmail.com>
References: <3943895.1248380587931.JavaMail.root@elwamui-chisos.atl.sa.earthlink.net>
	<200907231937.56091.geraldi.evenden@gmail.com>
Message-ID: <20090731000848.GB4984@busstudent.santarosa.edu>

On Thu, Jul 23, 2009 at 07:37:55PM -0400, Gerald I. Evenden wrote:
> If the interupted version of Goode is used then *NO* standard version of 
> [l]proj will handle it without the user segmenting the data into the 
> subregions of the interuptions.

Thanks. If attachments work on this list, this post should carry a
rough modified version of PJ_goode which seems to work for at least
the three regions that I'm working in. I have not tested it more fully. 

 - David T. 
-------------- next part --------------
#ifndef lint
static const char SCCSID[]="@(#)PJ_goode.c	4.1 94/02/15     GIE     REL";
#endif
#define PROJ_PARMS__ \
	struct PJconsts	*sinu; \
	struct PJconsts	*moll;
#define PJ_LIB__
#include	<projects.h>
PROJ_HEAD(goode_interrupted, "Goode Homolosine Interrupted") "\n\tPCyl, Sph.";
	C_NAMESPACE PJ
*pj_sinu(PJ *), *pj_moll(PJ *);
#define Y_COR		0.05280
#define PHI_LIM	.71093078197902358062

/* Goode interruption parameters from:
 * http://edc2.usgs.gov/1KM/goodesarticle.php
 * A goode map for visual reference is Figure 5 from here: 
 * http://proceedings.esri.com/library/userconf/proc98/proceed/to850/pap844/p844.htm
 */
static const double goode_center_x_for_region[] = {
	 0, /* Default. */
	/* Use radians. */
	PI * -100.0 / 180.0,  /* Region 1 */
	PI *   30.0 / 180.0,  /* Region 2 */
	PI * -100.0 / 180.0,  /* Region 3 */
	PI *   30.0 / 180.0,  /* Region 4 */
	PI * -160.0 / 180.0,  /* Region 5 */
	PI * - 60.0 / 180.0,  /* Region 6 */
	PI *   20.0 / 180.0,  /* Region 7 */
	PI *  140.0 / 180.0,  /* Region 8 */
	PI * -160.0 / 180.0,  /* Region 9 */
	PI * - 60.0 / 180.0,  /* Region 10*/
	PI *   20.0 / 180.0,  /* Region 11*/
	PI *  140.0 / 180.0,  /* Region 12*/
};

int goode_get_region_from_lat_lon(double lat, double lon){
	if(lon > 0 ){ /* North */
		if(lon > 0.45259259259 * PI){ /* Norther */
			if(lat < -.2222222222 * PI){ 
				return 1; 
			} else {
				return 2;
			}
		} else {
			/* Note: Duped code */
			if(lat < -.2222222222 * PI){ 
				return 3; 
			} else {
				return 4;
			}
		}

	} else { /* South */
		if(lon > -0.45259259259 * PI){ /* First section south of equator */ 
			if(lat < .1111111111 * PI){ 
				if(lat < -.8888888888 * PI){ 
					return 5;
				} else {
					return 6;
				}
			} else {
				if(lat < .7777777777 * PI){ 
					return 7;
				} else {
					return 8;
				}
			}
		} else {
			/* Note: Duped code */
			if(lat < .1111111111 * PI){ 
				if(lat < -.8888888888 * PI){ 
					return 9;
				} else {
					return 10;
				}
			} else {
				if(lat < .7777777777 * PI){ 
					return 11;
				} else {
					return 12;
				}
			}
		}
	}
	return 0;
}

/* Macro alternative to the function. */
/* Note: Using a macro does not appear to save much time. */
#define GOODE_REGION_FROM_LATLON(lat, lon) \
( \
	(lon > 0.0) \
	?( \
		1 + \
		( 0x01 & (lat > (- PI * 40.0 / 180.0)) \
		| 0x02 & (lon < (PI * (40.0 + 44.0/60.0) / 90.0 )) \
		) \
	):( \
		5 +  \
		( 0x01 & (lat < (PI * 140.0 / 180.0)) \
		| 0x02 & (lat > (PI * 20.0 / 180.0)) \
		| 0x04 & (lon < (- PI * (40.0 + 44.0/60.0) / 90.0 )) \
		)\
	)\
)
		

FORWARD(s_forward); /* spheroid */
	/* int goode_current_region = goode_get_region_from_lat_lon(lp.lam, lp.phi); */
	int goode_current_region = GOODE_REGION_FROM_LATLON(lp.lam, lp.phi);
	
	fprintf(stderr, "In forward, sinu %x moll %x reg %d, lam0 %.4f, l,p are: %.4f, %.4f\n",
	P->sinu, P->moll, 
	goode_current_region, P->lam0, lp.lam, lp.phi);

	lp.lam -= goode_center_x_for_region[goode_current_region];

	if (fabs(lp.phi) <= PHI_LIM)
		xy = P->sinu->fwd(lp, P->sinu);
	else {
		xy = P->moll->fwd(lp, P->moll);
		xy.y -= lp.phi >= 0.0 ? Y_COR : -Y_COR;
	}

	fprintf(stderr, "In forward after mods lam0 %.4f, x,y are: %.4f, %.4f lp is %.4f, %.4f\n", 
	P->lam0, xy.x, xy.y, lp.lam, lp.phi);

	xy.x += goode_center_x_for_region[goode_current_region];
	return (xy);
}
INVERSE(s_inverse); /* spheroid */
	/* int goode_current_region = goode_get_region_from_lat_lon(xy.x, xy.y);*/
	int goode_current_region = GOODE_REGION_FROM_LATLON(xy.x, xy.y);

	fprintf(stderr, "In inverse, reg %d, x,y are: %.4f, %.4f\n",
	goode_current_region, xy.x, xy.y);

	xy.x -= goode_center_x_for_region[goode_current_region];

	if (fabs(xy.y) <= PHI_LIM)
		lp = P->sinu->inv(xy, P->sinu);
	else {
		xy.y += xy.y >= 0.0 ? Y_COR : -Y_COR;
		lp = P->moll->inv(xy, P->moll);
	}

	fprintf(stderr, "In inverse after mods lam0 %.4f, x,y are: %.4f, %.4f lp is %.4f, %.4f\n", 
	P->lam0, xy.x, xy.y, lp.lam, lp.phi);

	lp.lam += goode_center_x_for_region[goode_current_region];
	return (lp);
}
FREEUP;
	if (P) {
		if (P->sinu)
			(*(P->sinu->pfree))(P->sinu);
		if (P->moll)
			(*(P->moll->pfree))(P->moll);
		pj_dalloc(P);
	}
}
ENTRY2(goode_interrupted, sinu, moll)
	P->es = 0.;
	if (!(P->sinu = pj_sinu(0)) || !(P->moll = pj_moll(0)))
		E_ERROR_0;
	if (!(P->sinu = pj_sinu(P->sinu)) || !(P->moll = pj_moll(P->moll)))
		E_ERROR_0;
	P->fwd = s_forward;
	P->inv = s_inverse;
ENDENTRY(P)

From kupen at wippies.fi  Thu Jul 30 21:51:53 2009
From: kupen at wippies.fi (Pena Kupen)
Date: Fri, 31 Jul 2009 07:51:53 +0300 (EEST)
Subject: [Proj] Proj cannot been found by postgis
Message-ID: <757473376.14851249015914198.JavaMail.kupen@wippies.fi>

Yeps you are right. I found reason for that:

Yum's CentOS-Base.repo file was not updated.

"In yum repo there where no exclude for postgres*. I add on sections [base] [upddates]
exclude=postgresql*"

And Google is fast!

--
pk

David Turover <dturover at student.santarosa.edu> kirjoitti: 
> On Thu, Jul 30, 2009 at 10:19:40AM +0300, Pena Kupen wrote:
> > I have problem when try to install postGIS from distro repo. I think my problem is installation of proj from source?
> 
> 
> yum might be looking for proj in its own database of installed rpms, in
> which case it would not find anything that was compiled manually. 
> The easy solution, if possible, is to get an official rpm of proj from
> your distro.
> 
> But it looks like you already know this (and Google is fast):
> http://www.linuxforums.org/forum/redhat-fedora-linux-help/150648-solved-centos-yum-dependency-problem-postgis.html
> 
>  - David T. 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 


-- 
Saunalahti DataPaketti - tilaa nyt, saat 2 kk veloituksetta ja Nettitikun kaupan päälle!
http://saunalahti.fi/gsm/gsmdatapaketti.php 



