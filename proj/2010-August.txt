From glynn at gclements.plus.com  Sun Aug  1 08:30:22 2010
From: glynn at gclements.plus.com (Glynn Clements)
Date: Sun, 1 Aug 2010 16:30:22 +0100
Subject: [Proj] quoting +nadgrids ?
In-Reply-To: <4C54237D.3010109@pobox.com>
References: <827486.53924.qm@web110005.mail.gq1.yahoo.com>
	<4C52E09C.3050904@pobox.com>
	<19540.6592.798019.240944@cerise.gclements.plus.com>
	<4C54237D.3010109@pobox.com>
Message-ID: <19541.37646.72856.435985@cerise.gclements.plus.com>


Frank Warmerdam wrote:

> Based on this, I'm starting to think that the PROJ.4
> parameter parser just ought to have a special escape
> sequence for embedding a space.  Ideally something not
> likely to "activate" other escape sequence parsers.
> Something like:
> 
> +nadgrids=C:\Program@@@space@@@Files\GRASS...
> 
> If you would like me to incorporate such a change, let me know
> via a proj.4 ticket and I'll proceed.

Personally, I'm not inclined to suggest that PROJ should be
introducing this sort of workaround for issues with software which
uses it.

However, if you decide to go that route, URL encoding (%##, e.g. %20
for space) serves roughly this purpose (although the use of '+' for
space wouldn't be desirable here). This assumes that % is uncommon in
PROJ parameter values.

Another option would be to provide utility functions to convert
between an argument list (i.e. a list of strings) and a string. This
would make it easier for GDAL (etc) to "do it right".

The two options aren't mutually exclusive, although the latter would
eliminate the need to perform encoding/decoding of arguments when
invoking proj or cs2cs directly.

-- 
Glynn Clements <glynn at gclements.plus.com>


From warmerdam at pobox.com  Sun Aug  1 09:03:44 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 01 Aug 2010 12:03:44 -0400
Subject: [Proj] quoting +nadgrids ?
In-Reply-To: <19541.37646.72856.435985@cerise.gclements.plus.com>
References: <827486.53924.qm@web110005.mail.gq1.yahoo.com>
	<4C52E09C.3050904@pobox.com>
	<19540.6592.798019.240944@cerise.gclements.plus.com>
	<4C54237D.3010109@pobox.com>
	<19541.37646.72856.435985@cerise.gclements.plus.com>
Message-ID: <4C559AE0.6070906@pobox.com>

Glynn Clements wrote:
> Personally, I'm not inclined to suggest that PROJ should be
> introducing this sort of workaround for issues with software which
> uses it.
> 
> However, if you decide to go that route, URL encoding (%##, e.g. %20
> for space) serves roughly this purpose (although the use of '+' for
> space wouldn't be desirable here). This assumes that % is uncommon in
> PROJ parameter values.

Glynn,

I had been avoiding "normal" escaping schemes primarily to avoid
the escaping getting interpreted earlier in the processing chain,
though I suppose url encoding would not be widely used.  Also, to
the best of my knowledge the only things we might need to escape
would be " " and "+".

> Another option would be to provide utility functions to convert
> between an argument list (i.e. a list of strings) and a string. This
> would make it easier for GDAL (etc) to "do it right".

In fact GDAL uses pj_init_plus() which takes the whole string rather
than a set of pre-separated options.  So PROJ.4 already does have
a natural place to put the parsing rules for applications that use it.

Earlier I suggested this issue wasn't really a PROJ.4 issue, but now
that I think about pj_init_plus() it clearly is a PROJ.4 issue.  Based
on that it seems to come down to how to do the escaping for interpretation
by pj_init_plus().

I had proposed the @@@space@@@ idea just because it wouldn't be interpreted
anywhere else, though it is somewhat peculiar.  Can you, or anyone,
provide an argument for a different approach?  Were you suggesting url
encoding because it was easily extended to other escaping operations?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From paul-grass at stjohnspoint.co.uk  Sun Aug  1 10:30:10 2010
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Sun, 1 Aug 2010 18:30:10 +0100 (BST)
Subject: [Proj] quoting +nadgrids ?
In-Reply-To: <4C559AE0.6070906@pobox.com>
References: <827486.53924.qm@web110005.mail.gq1.yahoo.com>
	<4C52E09C.3050904@pobox.com>
	<19540.6592.798019.240944@cerise.gclements.plus.com>
	<4C54237D.3010109@pobox.com>
	<19541.37646.72856.435985@cerise.gclements.plus.com>
	<4C559AE0.6070906@pobox.com>
Message-ID: <Pine.LNX.4.62.1008011822250.5080@vortex.ukshells.co.uk>

On Sun, 1 Aug 2010, Frank Warmerdam wrote:

> In fact GDAL uses pj_init_plus() which takes the whole string rather
> than a set of pre-separated options.  So PROJ.4 already does have
> a natural place to put the parsing rules for applications that use it.
>
> Earlier I suggested this issue wasn't really a PROJ.4 issue, but now
> that I think about pj_init_plus() it clearly is a PROJ.4 issue.  Based
> on that it seems to come down to how to do the escaping for interpretation
> by pj_init_plus().

Hi Frank,
I have no specific comments on how the escaping it should be done, just 
that it would be great if pj_get_def() can add escaping using whatever 
method is decided, as well as pj_init_plus() interpreting it. That is, it 
should be possible for an application to generate a PROJ string with 
pj_get_def() and pass it to another application unmodified, which then 
processes it using pj_init_plus(), and all the escaping would pass through 
intact.

Paul


From glynn at gclements.plus.com  Sun Aug  1 11:04:33 2010
From: glynn at gclements.plus.com (Glynn Clements)
Date: Sun, 1 Aug 2010 19:04:33 +0100
Subject: [Proj] quoting +nadgrids ?
In-Reply-To: <4C559AE0.6070906@pobox.com>
References: <827486.53924.qm@web110005.mail.gq1.yahoo.com>
	<4C52E09C.3050904@pobox.com>
	<19540.6592.798019.240944@cerise.gclements.plus.com>
	<4C54237D.3010109@pobox.com>
	<19541.37646.72856.435985@cerise.gclements.plus.com>
	<4C559AE0.6070906@pobox.com>
Message-ID: <19541.46897.798213.309972@cerise.gclements.plus.com>


Frank Warmerdam wrote:

> I had proposed the @@@space@@@ idea just because it wouldn't be interpreted
> anywhere else, though it is somewhat peculiar.  Can you, or anyone,
> provide an argument for a different approach?  Were you suggesting url
> encoding because it was easily extended to other escaping operations?

Mostly because it's already known, can be used to escape arbitrary
characters, the % sign seems (to me) unlikely to occur in an argument,
and the worst case for the size of an escaped string isn't too bad
(three times the size of the original string).

[Needless to say, the first question which crossed my mind regarding
the @@@space@@@ idea was: what happens if the text "@@@space@@@"
occurs in an argument value? Replacing each @ with @@@atsign@@@ would
get ugly. But that's more of a theoretical issue than a practical
one.]

-- 
Glynn Clements <glynn at gclements.plus.com>


From dodobasic at gmail.com  Mon Aug  2 06:27:19 2010
From: dodobasic at gmail.com (=?UTF-8?B?RHJhxb5lbiBPZG9iYcWhacSH?=)
Date: Mon, 02 Aug 2010 15:27:19 +0200
Subject: [Proj] Projection doesn't use +towgs84 parameters
Message-ID: <4C56C7B7.6040000@gmail.com>

Hi,

i'm having an issue with transformation between two coordinate systems 
using cs2cs. I've noticed this while trying to use gdalwrap, but using 
cs2cs has same results.

This is what im trying to execute:

cs2cs +proj=tmerc +lat_0=0 +lon_0=15 +k=0.9999 +x_0=5500000 +y_0=0 
+ellps=bessel 
+towgs84=514.0188,155.448,507.0461,5.6136,3.676,-11.4667,0.9999979090043 
+units=m +no_defs +to +proj=tmerc +lat_0=0 +lon_0=16.5 +k_0=0.9999 
+x_0=500000 +ellps=WGS84 +units=m +no_defs -v
#
# ---- From Coordinate System ----
#
#Transverse Mercator
#
#       Cyl, Sph&Ell
#
# +proj=tmerc +lat_0=0 +lon_0=15 +k=0.9999 +x_0=5500000 +y_0=0 +ellps=bessel
#
# +towgs84=514.0188,155.448,507.0461,5.6136,3.676,-11.4667,0.9999979090043
#
# +units=m +no_defs
#
# ---- To Coordinate System ----
#
#Transverse Mercator
#
#       Cyl, Sph&Ell
#
# +proj=tmerc +lat_0=0 +lon_0=16.5 +k_0=0.9999 +x_0=500000 +ellps=WGS84
#
# +units=m +no_defs
#
5549500.250000 5060999.750000
#
432679.49       5061680.25 0.00


When i try to set any other +towgs84 params, the result is the same:


cs2cs +proj=tmerc +lat_0=0 +lon_0=15 +k=0.9999 +x_0=5500000 +y_0=0 
+ellps=bessel +towgs84=1,1,1,1,1,1,1 +units=m +no_defs +to +proj=tmerc 
+lat_0=0 +lon_0=16.5 +k_0=0.9999 +x_0=500000 +ellps=WGS84 +units=m 
+no_defs -v# ---- From Coordinate System ----
#
#Transverse Mercator
#
#       Cyl, Sph&Ell
#
# +proj=tmerc +lat_0=0 +lon_0=15 +k=0.9999 +x_0=5500000 +y_0=0 +ellps=bessel
#
# +towgs84=1,1,1,1,1,1,1
#
# +units=m +no_defs
#
# ---- To Coordinate System ----
#
#Transverse Mercator
#
#       Cyl, Sph&Ell
#
# +proj=tmerc +lat_0=0 +lon_0=16.5 +k_0=0.9999 +x_0=500000 +ellps=WGS84
#
# +units=m +no_defs
#
5549500.250000 5060999.750000
#
432679.49       5061680.25 0.00


I'm using proj.4 4.7.1, and i've tried using 4.6.1, with the same 
results. Am i doing something wrong?


From jrepetto at free.fr  Mon Aug  2 07:03:42 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Mon, 02 Aug 2010 16:03:42 +0200
Subject: [Proj] Projection doesn't use +towgs84 parameters
In-Reply-To: <4C56C7B7.6040000@gmail.com>
References: <4C56C7B7.6040000@gmail.com>
Message-ID: <4C56D03E.7090801@free.fr>

Le 02/08/2010 15:27, Dražen Odobašić a écrit :
> Hi,
>
> i'm having an issue with transformation between two coordinate systems
> using cs2cs. I've noticed this while trying to use gdalwrap, but using
> cs2cs has same results.
>
> This is what im trying to execute:
>
> cs2cs +proj=tmerc +lat_0=0 +lon_0=15 +k=0.9999 +x_0=5500000 +y_0=0
> +ellps=bessel
> +towgs84=514.0188,155.448,507.0461,5.6136,3.676,-11.4667,0.9999979090043
> +units=m +no_defs +to +proj=tmerc +lat_0=0 +lon_0=16.5 +k_0=0.9999
> +x_0=500000 +ellps=WGS84 +units=m +no_defs -v

You have forgotten to give the +towgs84 parameters for the second CS.
Alternately, you could write "+datum=WGS84" instead of "+ellps=WGS84" .

Jean-Claude


From EMiller at dfg.ca.gov  Mon Aug  2 08:31:16 2010
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Mon, 2 Aug 2010 08:31:16 -0700
Subject: [Proj] quoting +nadgrids ?
In-Reply-To: <19541.46897.798213.309972@cerise.gclements.plus.com>
References: <827486.53924.qm@web110005.mail.gq1.yahoo.com>
	<4C52E09C.3050904@pobox.com>
	<19540.6592.798019.240944@cerise.gclements.plus.com>
	<4C54237D.3010109@pobox.com>
	<19541.37646.72856.435985@cerise.gclements.plus.com>
	<4C559AE0.6070906@pobox.com>
	<19541.46897.798213.309972@cerise.gclements.plus.com>
Message-ID: <4C568254.95FD.00E4.0@dfg.ca.gov>

>>> On 8/1/2010 at 11:04 AM, Glynn Clements <glynn at gclements.plus.com> wrote:

> Frank Warmerdam wrote:
> 
>> I had proposed the @@@space@@@ idea just because it wouldn't be interpreted
>> anywhere else, though it is somewhat peculiar.  Can you, or anyone,
>> provide an argument for a different approach?  Were you suggesting url
>> encoding because it was easily extended to other escaping operations?
> 
> Mostly because it's already known, can be used to escape arbitrary
> characters, the % sign seems (to me) unlikely to occur in an argument,
> and the worst case for the size of an escaped string isn't too bad
> (three times the size of the original string).
> 
> [Needless to say, the first question which crossed my mind regarding
> the @@@space@@@ idea was: what happens if the text "@@@space@@@"
> occurs in an argument value? Replacing each @ with @@@atsign@@@ would
> get ugly. But that's more of a theoretical issue than a practical
> one.]

For whatever reason, the escape character for cmd.exe is the caret ^.  Besides the space character, the following characters must be escaped: <, >, |, &, and ^ (of course).  Obviously, if you use this escaping mechanism on Windows, the result won't be portable. URL encoding would not escape the ampersand, which could be trouble.

http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds_shelloverview.mspx?mfr=true 
-- 

Eric G. Miller
Staff Programmer
CA Dept. of Fish & Game





From dodobasic at gmail.com  Mon Aug  2 09:30:13 2010
From: dodobasic at gmail.com (=?UTF-8?B?RHJhxb5lbiBPZG9iYcWhacSH?=)
Date: Mon, 02 Aug 2010 18:30:13 +0200
Subject: [Proj] Projection doesn't use +towgs84 parameters
In-Reply-To: <4C56D03E.7090801@free.fr>
References: <4C56C7B7.6040000@gmail.com> <4C56D03E.7090801@free.fr>
Message-ID: <4C56F295.4030304@gmail.com>

On 02.08.2010 16:03, Jean-Claude REPETTO wrote:
> Le 02/08/2010 15:27, Dražen Odobašić a écrit :
>> Hi,
>>
>> i'm having an issue with transformation between two coordinate systems
>> using cs2cs. I've noticed this while trying to use gdalwrap, but using
>> cs2cs has same results.
>>
>> This is what im trying to execute:
>>
>> cs2cs +proj=tmerc +lat_0=0 +lon_0=15 +k=0.9999 +x_0=5500000 +y_0=0
>> +ellps=bessel
>> +towgs84=514.0188,155.448,507.0461,5.6136,3.676,-11.4667,0.9999979090043
>> +units=m +no_defs +to +proj=tmerc +lat_0=0 +lon_0=16.5 +k_0=0.9999
>> +x_0=500000 +ellps=WGS84 +units=m +no_defs -v
>
> You have forgotten to give the +towgs84 parameters for the second CS.
> Alternately, you could write "+datum=WGS84" instead of "+ellps=WGS84" .
>
> Jean-Claude

Oh, yes, now it makes sense, to define a projection system one needs to 
define a datum.

Thank you very much


From glynn at gclements.plus.com  Mon Aug  2 12:52:22 2010
From: glynn at gclements.plus.com (Glynn Clements)
Date: Mon, 2 Aug 2010 20:52:22 +0100
Subject: [Proj] quoting +nadgrids ?
In-Reply-To: <4C568254.95FD.00E4.0@dfg.ca.gov>
References: <827486.53924.qm@web110005.mail.gq1.yahoo.com>
	<4C52E09C.3050904@pobox.com>
	<19540.6592.798019.240944@cerise.gclements.plus.com>
	<4C54237D.3010109@pobox.com>
	<19541.37646.72856.435985@cerise.gclements.plus.com>
	<4C559AE0.6070906@pobox.com>
	<19541.46897.798213.309972@cerise.gclements.plus.com>
	<4C568254.95FD.00E4.0@dfg.ca.gov>
Message-ID: <19543.8694.509694.127940@cerise.gclements.plus.com>


Eric Miller wrote:

> >> I had proposed the @@@space@@@ idea just because it wouldn't be interpreted
> >> anywhere else, though it is somewhat peculiar.  Can you, or anyone,
> >> provide an argument for a different approach?  Were you suggesting url
> >> encoding because it was easily extended to other escaping operations?
> > 
> > Mostly because it's already known, can be used to escape arbitrary
> > characters, the % sign seems (to me) unlikely to occur in an argument,
> > and the worst case for the size of an escaped string isn't too bad
> > (three times the size of the original string).
> > 
> > [Needless to say, the first question which crossed my mind regarding
> > the @@@space@@@ idea was: what happens if the text "@@@space@@@"
> > occurs in an argument value? Replacing each @ with @@@atsign@@@ would
> > get ugly. But that's more of a theoretical issue than a practical
> > one.]
> 
> For whatever reason, the escape character for cmd.exe is the caret
> ^. Besides the space character, the following characters must be
> escaped: <, >, |, &, and ^ (of course). Obviously, if you use this
> escaping mechanism on Windows, the result won't be portable. URL
> encoding would not escape the ampersand, which could be trouble.

This issue has nothing (directly) to do with the shell on any
platform. It's simply an issue of how to represent a list of strings
as a single string.

Also, URL encoding can encode any character. The choice of which
characters are encoded doesn't affect the decoding algorithm.

-- 
Glynn Clements <glynn at gclements.plus.com>


From EMiller at dfg.ca.gov  Mon Aug  2 15:02:11 2010
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Mon, 2 Aug 2010 15:02:11 -0700
Subject: [Proj] quoting +nadgrids ?
In-Reply-To: <19543.8694.509694.127940@cerise.gclements.plus.com>
References: <827486.53924.qm@web110005.mail.gq1.yahoo.com>
	<4C52E09C.3050904@pobox.com>
	<19540.6592.798019.240944@cerise.gclements.plus.com>
	<4C54237D.3010109@pobox.com>
	<19541.37646.72856.435985@cerise.gclements.plus.com>
	<4C559AE0.6070906@pobox.com>
	<19541.46897.798213.309972@cerise.gclements.plus.com>
	<4C568254.95FD.00E4.0@dfg.ca.gov>
	<19543.8694.509694.127940@cerise.gclements.plus.com>
Message-ID: <4C56DDF3.95FD.00E4.0@dfg.ca.gov>

>>> On 8/2/2010 at 12:52 PM, Glynn Clements <glynn at gclements.plus.com> wrote:

> Eric Miller wrote:
> 
>> >> I had proposed the @@@space@@@ idea just because it wouldn't be interpreted
>> >> anywhere else, though it is somewhat peculiar.  Can you, or anyone,
>> >> provide an argument for a different approach?  Were you suggesting url
>> >> encoding because it was easily extended to other escaping operations?
>> > 
>> > Mostly because it's already known, can be used to escape arbitrary
>> > characters, the % sign seems (to me) unlikely to occur in an argument,
>> > and the worst case for the size of an escaped string isn't too bad
>> > (three times the size of the original string).
>> > 
>> > [Needless to say, the first question which crossed my mind regarding
>> > the @@@space@@@ idea was: what happens if the text "@@@space@@@"
>> > occurs in an argument value? Replacing each @ with @@@atsign@@@ would
>> > get ugly. But that's more of a theoretical issue than a practical
>> > one.]
>> 
>> For whatever reason, the escape character for cmd.exe is the caret
>> ^. Besides the space character, the following characters must be
>> escaped: <, >, |, &, and ^ (of course). Obviously, if you use this
>> escaping mechanism on Windows, the result won't be portable. URL
>> encoding would not escape the ampersand, which could be trouble.
> 
> This issue has nothing (directly) to do with the shell on any
> platform. It's simply an issue of how to represent a list of strings
> as a single string.

I understood the OP was getting the "projection definition" so that it could be used by cs2cs at some later date.
"""
So when this string is passed as a CRS to cs2cs it only reads as far as the "C:\Program" part for the grid file and all goes downhill fast from there.
"""
He didn't say anything about the shell, but I assumed there'd be one if cs2cs was being used.

> Also, URL encoding can encode any character. The choice of which
> characters are encoded doesn't affect the decoding algorithm.

Perhaps it is better to call it percent encoding for the general case.




From hamish_b at yahoo.com  Mon Aug  2 20:26:52 2010
From: hamish_b at yahoo.com (Hamish)
Date: Mon, 2 Aug 2010 20:26:52 -0700 (PDT)
Subject: [Proj] quoting +nadgrids ?
In-Reply-To: <4C56DDF3.95FD.00E4.0@dfg.ca.gov>
Message-ID: <439661.20034.qm@web110005.mail.gq1.yahoo.com>

Eric wrote:
> I understood the OP was getting the "projection definition"
> so that it could be used by cs2cs at some later date.

Hamish wrote:
> """
> So when this string is passed as a CRS to cs2cs it only
> reads as far as the "C:\Program" part for the grid file and
> all goes downhill fast from there.
> """

Yes, that's what it started out as, but cs2cs was fixed with Glynn's
suggestion:

replacing:
   IN_PROJ=`g.proj -j`

with:
   IN_PROJ=`g.proj -j | (
       IN_PROJ=
       while read line ; do
           IN_PROJ="$IN_PROJ '$line'"
       done
       echo "$IN_PROJ"
   )`

after applying that, and audit showed that is was also a problem for
gdalwarp, but in that case there was no work around as it only takes
a single (quoted) argument for the entire +proj string, with no way
to quote individual terms within it. cs2cs takes a series of arguments
each of which can be individually quoted.

[there was also a bug fix by Paul, but that's tangential]

> He didn't say anything about the shell, but I assumed
> there'd be one if cs2cs was being used.

fwiw this is being done within a bourne shell script, run on MS-Windows
using MinGW's MSys build of the GNU unix powertools.

But the gdalwarp problem transcends shell and OS. 


regards,
Hamish



      


From antocomisso at gmail.com  Mon Aug  2 22:19:47 2010
From: antocomisso at gmail.com (Anto C.)
Date: Tue, 3 Aug 2010 02:19:47 -0300
Subject: [Proj] unsubscrib me
Message-ID: <AANLkTim8ggasGQW_Y8o-1S2_u76tOhzStDu_3r0+AMQa@mail.gmail.com>

i would like to be unsubscribe from this list.
thank you!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100803/5cff0560/attachment.html>

From hamish_b at yahoo.com  Mon Aug  2 23:58:41 2010
From: hamish_b at yahoo.com (Hamish)
Date: Mon, 2 Aug 2010 23:58:41 -0700 (PDT)
Subject: [Proj] unsubscrib me
In-Reply-To: <AANLkTim8ggasGQW_Y8o-1S2_u76tOhzStDu_3r0+AMQa@mail.gmail.com>
Message-ID: <887831.41527.qm@web110005.mail.gq1.yahoo.com>



--- On Mon, 8/2/10, Anto C. <antocomisso at gmail.com> wrote:

From: Anto C. <antocomisso at gmail.com>
Subject: [Proj] unsubscrib me
To: Proj at lists.maptools.org
Date: Monday, August 2, 2010, 10:19 PM

i would like to be unsubscribe from this list.thank you!

-----Inline Attachment Follows-----

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
             ^^^^^^^^^^^^^^^ go to this URL, the unsubscribe button is there






      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100802/48b82f1d/attachment.html>

From glynn at gclements.plus.com  Tue Aug  3 03:35:03 2010
From: glynn at gclements.plus.com (Glynn Clements)
Date: Tue, 3 Aug 2010 11:35:03 +0100
Subject: [Proj] quoting +nadgrids ?
In-Reply-To: <4C56DDF3.95FD.00E4.0@dfg.ca.gov>
References: <827486.53924.qm@web110005.mail.gq1.yahoo.com>
	<4C52E09C.3050904@pobox.com>
	<19540.6592.798019.240944@cerise.gclements.plus.com>
	<4C54237D.3010109@pobox.com>
	<19541.37646.72856.435985@cerise.gclements.plus.com>
	<4C559AE0.6070906@pobox.com>
	<19541.46897.798213.309972@cerise.gclements.plus.com>
	<4C568254.95FD.00E4.0@dfg.ca.gov>
	<19543.8694.509694.127940@cerise.gclements.plus.com>
	<4C56DDF3.95FD.00E4.0@dfg.ca.gov>
Message-ID: <19543.61655.95492.969539@cerise.gclements.plus.com>


Eric Miller wrote:

> > This issue has nothing (directly) to do with the shell on any
> > platform. It's simply an issue of how to represent a list of strings
> > as a single string.
> 
> I understood the OP was getting the "projection definition" so that
> it could be used by cs2cs at some later date.
> """
> So when this string is passed as a CRS to cs2cs it only reads as far
> as the "C:\Program" part for the grid file and all goes downhill
> fast from there.
> """
> He didn't say anything about the shell, but I assumed there'd be one
> if cs2cs was being used.

The issues apply even if no shell is used.

In GRASS, I've been systematically replacing calls to system(),
popen() etc with functions which don't use the shell. And in 7.0,
shell scripts have been replaced by Python scripts, which pass an
argument list (as a list) to subprocess.Popen().

The problems are:

1. pj_get_def() returns a PROJ argument list as a string, with
arguments separated by spaces. Fortunately, each argument starts with
a "+", so we can convert this back to a list (so long as no argument
contains a space followed by a plus).

2. gdalwarp's -t_srs and -s_srs options expect a PROJ argument list as
a string, which is split on spaces (regardless of the presence or
absence of a "+"). This precludes any argument containing spaces.

-- 
Glynn Clements <glynn at gclements.plus.com>


From massimodisasha at yahoo.it  Tue Aug  3 05:00:49 2010
From: massimodisasha at yahoo.it (Massimo Di Stefano)
Date: Tue, 3 Aug 2010 14:00:49 +0200
Subject: [Proj] problems with m.proj (grass)
Message-ID: <2D305B4C-43EC-4BDA-BDE8-58A7DA1975B9@yahoo.it>

Hello All,

i'm using a fresh virtual machine where i installed gdal+grass6.5 from svn

trying to run the command m.proj on a text file "lonlatfile" ,  like :

-103.749769548 44.4373443836

i have :


(Tue Aug  3 11:12:35 2010)                                                      
m.proj -i input=/home/planetsasha/Desktop/PlanetSasha/lonlatfile                
input parameters=[+proj=longlat +datum=WGS84]
output parameters=[ '+proj=utm' '+zone=13' '+a=6378206.4' '+rf=294.9786982' '+no_defs' '+nadgrids=/usr/local/src/gis/local/grass-6.5.svn/etc/nad/conus' '+to_meter=1.0']
Rel. 4.7.1, 23 September 2009
<cs2cs>:
Sys errno: 2: <system mess. texts unavail.>
'+proj=utm'
Rel. 4.7.1, 23 September 2009
<cs2cs>:
Sys errno: 2: <system mess. texts unavail.>
'+zone=13'
Rel. 4.7.1, 23 September 2009
<cs2cs>:
Sys errno: 2: <system mess. texts unavail.>
'+a=6378206.4'
Rel. 4.7.1, 23 September 2009
<cs2cs>:
Sys errno: 2: <system mess. texts unavail.>
'+rf=294.9786982'
Rel. 4.7.1, 23 September 2009
<cs2cs>:
Sys errno: 2: <system mess. texts unavail.>
'+no_defs'
Rel. 4.7.1, 23 September 2009
<cs2cs>:
Sys errno: 2: <system mess. texts unavail.>
'+nadgrids=/usr/local/src/gis/local/grass-6.5.svn/etc/nad/co
nus'
Rel. 4.7.1, 23 September 2009
<cs2cs>:
Sys errno: 2: <system mess. texts unavail.>
'+to_meter=1.0'
(Tue Aug  3 11:12:36 2010) Command finished (1 sec)  


have you any clue on what i'm missing ?
maybe something goes wrong with proj shared data ?

thanks for any suggestion,

Massimo.

From hamish_b at yahoo.com  Tue Aug  3 21:23:42 2010
From: hamish_b at yahoo.com (Hamish)
Date: Tue, 3 Aug 2010 21:23:42 -0700 (PDT)
Subject: [Proj] problems with m.proj (grass)
In-Reply-To: <2D305B4C-43EC-4BDA-BDE8-58A7DA1975B9@yahoo.it>
Message-ID: <274101.57260.qm@web110007.mail.gq1.yahoo.com>

Hamish:
> > Yes, that's what it started out as, but cs2cs was fixed with Glynn's
> > suggestion:
> > 
> > replacing:
> >    IN_PROJ=`g.proj -j`
> > 
> > with:
> >    IN_PROJ=`g.proj -j | (
> >        IN_PROJ=
> >        while read line ; do
> >            IN_PROJ="$IN_PROJ '$line'"
> >        done
> >        echo "$IN_PROJ"
> >    )`

Massimo wrote:
> input parameters=[+proj=longlat +datum=WGS84]
> output parameters=[ '+proj=utm' '+zone=13' '+a=6378206.4' '+rf=294.9786982' '+no_defs' '+nadgrids=/usr/local/src/gis/local/grass-6.5.svn/etc/nad/conus' '+to_meter=1.0']
> Rel. 4.7.1, 23 September 2009
> <cs2cs>:
> Sys errno: 2: <system mess. texts unavail.>
> '+proj=utm'
> Rel. 4.7.1, 23 September 2009
> <cs2cs>:
> Sys errno: 2: <system mess. texts unavail.>
> '+zone=13'
...

erm, maybe it's not fixed after all.


Massimo, until we've got this sorted out you'll have to use the version
from the 6.4 stable branch.

the $OUT_PROJ variable is passed to cs2cs unquoted, so I wouldn't have
expected to need to use `eval` there, but will have to do some more
testing to verify that. [continued on the grass-dev mailing list....]



Hamish



      


From ckarney at sarnoff.com  Thu Aug  5 08:44:03 2010
From: ckarney at sarnoff.com (Charles Karney)
Date: Thu, 05 Aug 2010 11:44:03 -0400
Subject: [Proj] Arc length of meridian, parametric latitude,
	elliptic functions
Message-ID: <wvrlj8l9i9o.fsf@puffin.sarnoff.com>

A note on the arc length of the meridian, parametric latitude, elliptic
functions.

The arc length of the meridian can be written in terms of the geographic
or parametric (= reduced) latitudes.  The conversion between the two
forms is simple enough.  However when expressed in terms of elliptic
functions the relation becomes simpler still.

Consider an ellipse (x/a)^2 + (z/b)^2 = 1.  Let

  phi = geographic latitude
  beta = parametric latitude
  y = arc length from equator
  k' = b/a
  k = sqrt(1 - k'^2)
  a*E = quarter meridian (E = 2nd complete elliptic integral)

The modulus for the elliptic integrals and functions here is k.

Define beta', phi', and y' as the complementary quantities:

  beta + beta' = phi + phi' = pi/2
  y + y' = a*E

Note that beta and phi and their complements have a dual relationship,
namely

  tan(beta) = k' * tan(phi)
  tan(phi') = k' * tan(beta')

Now, the parametric equations for the meridian are

  x = a * sin(beta') =   a   * cos(phi) / sqrt(1 - k^2 * sin(phi)^2)
  z = b * cos(beta') = b^2/a * sin(phi) / sqrt(1 - k^2 * sin(phi)^2)

Computing y' and y as integrals over beta' and phi

  y' =   a   * integrate( (1 - k^2 * sin(beta')^2)^( 1/2), beta' )
  y  = b^2/a * integrate( (1 - k^2 * sin( phi )^2)^(-3/2),  phi  )

Introduce u such that (am = Jacobi amplitude function)

  phi = am(u)

Define its complement by (K = 1st complete elliptic integral)

  u + u' = K

Then it is easily verified that

  beta' = am(u')

The equations for x, z above become

  x = a * sn(u') =   a   * cd(u)
  z = b * cn(u') = b^2/a * sd(u)

Similarly y' and y as integrals over u' and u

  y' =   a   * integrate( dn(u')^2, u' ) = a *      Eps(u')
  y  = b^2/a * integrate( nd(u )^2, u  ) = a * (E - Eps(u'))

where Eps is the Jacobi's Epsilon function http://dlmf.nist.gov/22.16.ii
(Beware: the upper limit of Eq. 22.16.14 should be sn(x,k).)  Note that

  Eps(u') = E(beta')

(Here, E = 2nd incomplete elliptic integral.)

The interrelation implied by phi = am(u) and beta' = am(u') can be
expressed as

  F(phi) + F(beta') = K

(F = 1st incomplete elliptic integral).  http://dlmf.nist.gov/19.11.E9
gives the relation explicitly

  tan(phi) = 1/(k' * tan(beta'))
  tan(beta) = k' * tan(phi)

i.e., the standard definition of the parametric latitude.

Connection with the transverse Mercator projection:

  y = Gauss-Krueger northing on the central meridian
  u = Thompson northing on the central meridian

  --Charles

-- 
Charles Karney <ckarney at sarnoff.com>
Sarnoff Corporation, Princeton, NJ 08543-5300

Tel: +1 609 734 2312
Fax: +1 609 734 2662


From haileyeckstrand at gmail.com  Tue Aug 10 16:02:06 2010
From: haileyeckstrand at gmail.com (haileye)
Date: Tue, 10 Aug 2010 16:02:06 -0700 (PDT)
Subject: [Proj] proj4 definition for transverse mercator projection from
 RegCM3 model for North America
In-Reply-To: <loom.20100727T222513-636@post.gmane.org>
References: <AANLkTin6GWIFnaIChTjLOWMRntkw-Ub9BgdcqJ60etzl@mail.gmail.com>
	<27671997.1280104122461.JavaMail.root@elwamui-darkeyed.atl.sa.earthlink.net>
	<loom.20100727T222513-636@post.gmane.org>
Message-ID: <1281481326256-5410338.post@n2.nabble.com>


The projection type was not originally named transverse mercator. The reason
that was entered was due to the netcdf metadata requirements not having
rotated mercator projection as an option. The projection is rotated
mercator. The RegCM3 source code Melita referred to when finding the earth
radius is included below.  I am not very experienced with this level of
detail. Is anyone able to read this fortran code & properly define what the
projection type should be (ex. swiss oblique mercator, oblique mercator) and
what parameters I may be missing for the proj string (ex. +alpha ?, what
does S**-1 mean?)

Again, the parameters provided were: 
"transverse_mercator" ;
               Transverse_Mercator:longitude_of_central_meridian = -97. ;
               Transverse_Mercator:latitude_of_projection_origin = 47.5 ;
               Transverse_Mercator:scale_factor_at_central_meridian = 1. ;
               Transverse_Mercator:false_easting = 3925000. ;
               Transverse_Mercator:false_northing = 3175000. ;

Here is the fortran code:
This code was obtained from:
http://www.ictp.trieste.it/~pubregcm/RegCM3/regcm.tar.gz
This is a subroutine located within:
RegCM/PreProc/Terrain/terrain.f

CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC
      SUBROUTINE ROTMER( XLON, XLAT, XMAP, CORIOL, IY, JX
     A                 , CLON,CLAT, POLLON, POLLAT, DS, IDOT)
      implicit none
C---------------------------------------------------------------------
C  COMPUTE LATS, LONS, MAP-SCALE FACTORS, AND CORIOLIS PARAMETER FOR
C  ROTATED POLE MAP CENTERED AT CLON,CLAT. ORIGIN OF ROTATED GRID IS
C  GIVEN BY POLLON AND POLLAT.
C  IMX,JMX,KSV,KSH AND LSIG2 MUST CORRESPOND TO IY,JMAX,KSTRPV,KSTRPH
C  AND NVERT2 IN THE MASTER INPUT FILE; OTHERWISE THE PROGRAM WILL
C  ABORT:LMX MUST BE THE MAXIMUM NUMBER OF LEVELS (PRESSURE--OR--SIGMA)
C  IMAXN AND IMXC ARE NESTED AND NON-EXPANDED GRID DIMENSIONS. IMXC IS
C  EQUAL TO IMX IF YOU ARE NOT USING THE EXPANDED GRID. SAME FOR J.

      INTEGER IY,JX,IDOT
      REAL*4  XLAT(IY,JX),XLON(IY,JX), CORIOL(IY,JX),XMAP(IY,JX)
      REAL*4  CLON,CLAT,POLLON,POLLAT,DS
C
      REAL*4  XOMEGA,d2r,r2d,A,CNTRJ,CNTRI,DDEG,XOFF,YOFF
      REAL*4  XR,YR,X,Y,FAI,XOMEGA2
      INTEGER I,J
C
      XOMEGA = 7.2722E-5                       ! ANG. ROT OF EARTH IN S**-1
      d2r = ATAN(1.)/45.                     ! CONVERT DEGREES TO RADIANS
      r2d = 1./d2r                         ! CONVERT RADIANS TO DEGREES
      A = 6371229.                             ! RADIUS OF EARTH IN METERS
C-----CENTER OF GRID
      CNTRJ = (JX+IDOT)/2.
      CNTRI = (IY+IDOT)/2.

      DDEG=DS*r2d/A                          ! GRID SPACING IN DEGREES
      XOFF=CLON-POLLON
      YOFF=clat-pollat
C-----CALCULATE X AND Y POSITIONS OF GRID
      DO 41 I=1,IY
      DO 41 J=1,JX
        XR = XOFF + (J-CNTRJ)*DDEG
        YR = YOFF + (I-CNTRI)*DDEG
C-----NOW CALCULATE LAT AND LON OF THIS POINT
C-----  ROTATE COORDINATES BACK TO NONRATED POLE
        CALL ROT2NROT(XR,YR,POLLON,pollat,X,Y)
        XLON(I,J) = X
        XLAT(I,J) = Y
        FAI = d2r*YR
        XMAP(I,J) = 1.0/COS(FAI)
   41 CONTINUE

      IF(IDOT.EQ.1) THEN
         XOMEGA2=2.*XOMEGA
         DO 45 I=1,IY
         DO 45 J=1,JX
            CORIOL(I,J)=XOMEGA2*SIN(XLAT(I,J)*d2r)
   45    CONTINUE
      END IF

      RETURN
      END



-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/proj4-definition-for-transverse-mercator-projection-from-RegCM3-model-for-North-America-tp5322756p5410338.html
Sent from the PROJ.4 mailing list archive at Nabble.com.


From j.l.h.hartmann at uva.nl  Thu Aug 12 04:08:34 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu, 12 Aug 2010 13:08:34 +0200
Subject: [Proj] tmerc projection and inversion don't match
In-Reply-To: <AANLkTim_JWEi9xTE6tR90kLqcU3pB7wEx6h2NsT9WyKn@mail.gmail.com>
References: <4C6303A6.3010108@slagkryssaren.com>	<AANLkTin4TvWR=ccBxSHM4WW3o1nt23B2nf49sJtAUGPg@mail.gmail.com>
	<AANLkTim_JWEi9xTE6tR90kLqcU3pB7wEx6h2NsT9WyKn@mail.gmail.com>
Message-ID: <4C63D632.5030209@uva.nl>

  I have taken the liberty to forward this question on the postgis list 
to the proj list. It's about a transformation that doesn't return the 
original values when inverted. I don't understand it either.

Jan

On 08/11/10 22:39, Paul Ramsey wrote:
> Removing the EPSG lookup from the equation changes nothing:
>
> echo "59 21" | proj +proj=tmerc +lat_0=0 +lon_0=15.80827777777778 +k=1
> +x_0=1500000 +y_0=0 +ellps=bessel +units=m +no_defs | invproj
> +proj=tmerc +lat_0=0 +lon_0=15.80827777777778 +k=1 +x_0=1500000 +y_0=0
> +ellps=bessel +units=m +no_defs
>
> 58d49'47.733"E	21d2'54.745"N
>
> P.
>
> On Wed, Aug 11, 2010 at 1:35 PM, Paul Ramsey<pramsey at opengeo.org>  wrote:
>> Seems to be an underlying problem with proj4:
>>
>> echo "59 21" | proj "+init=epsg:3021" | invproj "+init=epsg:3021"
>>
>> 58d49'47.733"E  21d2'54.745"N
>>
>> And that's without doing the datum shift part.
>>
>> P
>>
>> On Wed, Aug 11, 2010 at 1:10 PM, Erik Rehn<erik at slagkryssaren.com>  wrote:
>>> Hello Postgis Users!
>>>
>>> This is my first post on this list so I will start by asking
>>> a simple (and probably stupid) question. :)
>>>
>>> While using ST_AsKml() to produce an overlay for Google Earth I
>>> noticed that all my geometries where shifted slightly south-east.
>>> I figured this had something to do with the transformation between
>>> the projection that my geometries are stored in (SRID 3021) and WGS84 (4326)
>>> that is outputted by ST_AsKml()
>>>
>>> Just to test I ran this:
>>>
>>> SELECT ST_AsText(
>>>     ST_Transform(
>>>         ST_Transform(
>>>             ST_GeomFromText('POINT(59 18)',4326),
>>>         3021),
>>>     4326));
>>>
>>> I input a point in WGS84 (59,18), transforms it to 3021 and then back to
>>> WGS84. The result I get is:
>>> POINT(58.8672757036296 18.0394763349359)
>>>
>>> Can anyone explain this? Am I missing something regarding ST_Transform()?
>>>
>>> Im running Postgis 1.5 on Windows.
>>>
>>> Thank you for any help!
>>> /Erik
>>>
>>> --
>>> Erik Rehn
>>> Slagkryssaren
>>> erik at slagkryssaren.com
>>> www.slagkryssaren.com
>>> _______________________________________________
>>> postgis-users mailing list
>>> postgis-users at postgis.refractions.net
>>> http://postgis.refractions.net/mailman/listinfo/postgis-users
>>>
> _______________________________________________
> postgis-users mailing list
> postgis-users at postgis.refractions.net
> http://postgis.refractions.net/mailman/listinfo/postgis-users


From haileyeckstrand at gmail.com  Thu Aug 12 12:53:34 2010
From: haileyeckstrand at gmail.com (Hailey Eckstrand)
Date: Thu, 12 Aug 2010 19:53:34 +0000 (UTC)
Subject: [Proj] proj4 definition for transverse mercator projection from
	RegCM3 model for North America
References: <27671997.1280104122461.JavaMail.root@elwamui-darkeyed.atl.sa.earthlink.net>
Message-ID: <loom.20100812T214931-212@post.gmane.org>


I've figured out my problem. The projection was documented as transverse
Mercator as there was no option for rotated Mercator in the netcdf metadata
requirements. The projection type ended up being Swiss oblique Mercator & the
north_easting & false_easting were off by 25000. 
Thanks for all the help. 
The final correct definition ended up being:

+proj=somerc +lat_0=47.5 +y_0=3150000.0 +x_0=3900000.0 +lon_0=-97.0 +k_0=1.0
+units=m +a=6371229.0

Hailey



From Kieran.Ames at us.ngrid.com  Tue Aug 17 10:26:25 2010
From: Kieran.Ames at us.ngrid.com (Ames, Kieran J.)
Date: Tue, 17 Aug 2010 13:26:25 -0400
Subject: [Proj] File Format Translation
Message-ID: <2AE2A04AD8F40244AFEB71A07EECF130012A628B@NYHCBMSG41.NA.NGRID.NET>

Hello list,
I'd appreciate some guidance on translating MrSID files to geotiffs.
Using gdal_translate, I can convert a MrSID file to geotiff. However,
the resulting file size is on the order of 15 times larger (a 4MB .sid
file becomes a 62MB .tif file).
gdalinfo tells me that the files dimensions and other attributes are the
same. However, I see the following differences that make me wonder if I
can reduce file size.
 
The .sid file:
Band 1 Block=1024x128 Type=Byte, ColorInterp=Gray
  Minimum=59.000, Maximum=189.000, Mean=119.865, StdDev=17.205
  Overviews: 4000x4000, 2000x2000, 1000x1000, 500x500, 250x250, 125x125,
63x63,32x32
 
the resulting .tif file after gdal_translate:
Band 1 Block=8000x1 Type=Byte, ColorInterp=Gray
 
Is there any information here that tells me about gdal_translate
options/switches that may be available to me to make the .tif files
smaller?
 
I have .tif files from other geographies that support viewing reasonably
clear information that are of sizes of about 150KB. I'm guessing that
the MrSID files contain much more information than I'd need in order to
reasonable present the data in a useful form.
 
As background info (FWIW), the mrSID files are utilized in a SmallWorld
app and we'd like to make this raster info available in other
applications. We have no MrSID server in house and, with my limited
knowledge, I am trying to make these rasters available to this new app
as tiffs (since the other area's tiffs seem to work quite well) at no
cost other than my time and my available disk space.
 
Thanks for any suggestions.
 
Kieran
 
 


********************************************************************************
This e-mail and any files transmitted with it, are confidential to National Grid and are intended solely for the use of the individual or entity to whom they are addressed.  If you have received this e-mail in error, please reply to this message and let the sender know.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100817/f7f94cb1/attachment.html>

From ChDohmen at gmx.de  Thu Aug 19 01:29:27 2010
From: ChDohmen at gmx.de (Christoph Dohmen)
Date: Thu, 19 Aug 2010 10:29:27 +0200
Subject: [Proj] different params for "Kertau_RSO_Malaya_Meters" found
Message-ID: <20100819082927.178540@gmx.net>

Hi list,

I got some data which report the "Kertau_RSO_Malaya_Meters" as coordinatesystem. But I'm not sure how to deal with those data
because the epsg-file from trunk defines this as:

<3168> +proj=omerc +lat_0=4 +lonc=102.25 +alpha=323.0257905 +k=0.99984 +x_0=804670.24 +y_0=0 +gamma=323.1301023611111 +a=6377295.664 +b=6356094.667915204 +units=m +no_defs  <>

and from spatialreference.org I found the following projection 6792:

PROJCS["Kertau_RSO_Malaya_Meters",
    GEOGCS["GCS_Kertau",
        DATUM["D_Kertau",
            SPHEROID["Everest_1830_Modified",6377304.063,300.8017]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Rectified_Skew_Orthomorphic_Natural_Origin"],
    PARAMETER["False_Easting",804671.299775],
    PARAMETER["False_Northing",0.0],
    PARAMETER["Scale_Factor",0.99984],
    PARAMETER["Azimuth",-36.97420943711801],
    PARAMETER["Longitude_Of_Center",102.25],
    PARAMETER["Latitude_Of_Center",4.0],
    PARAMETER["XY_Plane_Rotation",-36.86989764584402],
    UNIT["Meter",1.0]]

The differences are the spheroid-parameter and false easting. Getting
the wkt-projection from the data shows up that these are using the 
second one.

Can anyone outthere describe what's the difference between those two
projections? Will the second one be integrated into the epsg file?

And another question, are there any ideas concerning when to release 
proj 4.8.0?

Best regards

Christoph
-- 
GRATIS für alle GMX-Mitglieder: Die maxdome Movie-FLAT!
Jetzt freischalten unter http://portal.gmx.net/de/go/maxdome01


From warmerdam at pobox.com  Fri Aug 20 18:37:09 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 20 Aug 2010 21:37:09 -0400
Subject: [Proj] HARN/HPGN
Message-ID: <4C6F2DC5.9060408@pobox.com>

Folks,

At the request of a client, I have developed some tools to translate
between the .los/.las format used for datum grid shift files distributed
by NOAA for NADCON to NTv2 for convenient use with PROJ.4.  This was
done primarily to make use of the NOAA HARN datum shift files practical.
This has gone ok.

However, now that I look at utilizing the data I find that there are
distinct HARN grid shift files for each state.  On examination I find
that they overlap, and that the overlapping areas do not agree.  I read a
bit of material from NOAA/NGS which seems to suggest each state does it's
own thing.

When I look in the EPSG database, there seems to be only one GCS mentioning
HARN which is EPSG:4152 NAD83(HARN).

The online HARN conversion tool on the NGS site requires you to pick a
state grid file.

So my question is basically - is there really a distinct HARN datum for
each state?  Does it make sense to treat HARN as a datum, or should it be
treated as ~52 datums?

I'd appreciate a bit of educating on this...

PS. If you want the NGS HPGN files in NTv2 let me know.  I'm also hoping
the NTv2 writing capability I have integrated into GDAL will be useful
to convert other ideosyncratic datum grids into a common format.  It also
allows easy examination of NTv2 files in GDAL based applications.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From gdt at ir.bbn.com  Sat Aug 21 18:27:55 2010
From: gdt at ir.bbn.com (Greg Troxel)
Date: Sat, 21 Aug 2010 21:27:55 -0400
Subject: [Proj] HARN/HPGN
In-Reply-To: <4C6F2DC5.9060408@pobox.com> (Frank Warmerdam's message of "Fri, 
	20 Aug 2010 21:37:09 -0400")
References: <4C6F2DC5.9060408@pobox.com>
Message-ID: <rmihbinmo6c.fsf@fnord.ir.bbn.com>


  So my question is basically - is there really a distinct HARN datum for
  each state?  Does it make sense to treat HARN as a datum, or should it be
  treated as ~52 datums?

I think the answer is "in theory, each HARN project is a more accurate
realization of NAD83, but in practice, each state network's coordinates
have a different relationship to CORS/ITRFxx/etc.".  But I don't have a
good basis for claiming that.

Surprisingly little of the information on the web addressses this point,
but this paper is interesting.  It talks about minor misalignments
between HARNs of different states (on the order of 10 cm), due to
choices of what data to hold constrained during adjustments:

http://www.ngs.noaa.gov/PUBS_LIB/HARN_CORS_COMP/eval_harn_to_cors.html
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100821/c5f0eab7/attachment.sig>

From mohammedrashadkm at gmail.com  Sat Aug 21 22:31:02 2010
From: mohammedrashadkm at gmail.com (Mohammed Rashad)
Date: Sun, 22 Aug 2010 11:01:02 +0530
Subject: [Proj] proj4j
Message-ID: <AANLkTik-LmW3BJkq5+pqyU=kkw0c+YVUG1yCT8Q4F=+N@mail.gmail.com>

Does proj4j for java has all the functionality as the C/C+ version proj4
has?
I would like to implement proj4j in openjump (java). How to start
implementing proj4. What all things/features are needed to implement proj4.
What steps should I follow?

Anybody has worked on proj4j (Java) version in any java based GIS platforms?
-- 
Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100822/7fdd5745/attachment.html>

From peifer at gmx.eu  Sun Aug 22 01:27:38 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Sun, 22 Aug 2010 10:27:38 +0200
Subject: [Proj] File Format Translation
In-Reply-To: <2AE2A04AD8F40244AFEB71A07EECF130012A628B@NYHCBMSG41.NA.NGRID.NET>
References: <2AE2A04AD8F40244AFEB71A07EECF130012A628B@NYHCBMSG41.NA.NGRID.NET>
Message-ID: <4C70DF7A.4030008@gmx.eu>

Kieran,

You can compress your GeoTIFF, see creation option COMPRESS=... on this 
page: http://www.gdal.org/frmt_gtiff.html

I usually do: -co compress=lzw

Hermann

PS:
I guess that this type of questions around GDAL tools is better sent to 
the gdal-dev mailing list.


On 17/08/2010 19:26, Ames, Kieran J. wrote:
> Hello list,
> I'd appreciate some guidance on translating MrSID files to geotiffs.
> Using gdal_translate, I can convert a MrSID file to geotiff. However,
> the resulting file size is on the order of 15 times larger (a 4MB .sid
> file becomes a 62MB .tif file).
> gdalinfo tells me that the files dimensions and other attributes are the
> same. However, I see the following differences that make me wonder if I
> can reduce file size.
> The .sid file:
> Band 1 Block=1024x128 Type=Byte, ColorInterp=Gray
> Minimum=59.000, Maximum=189.000, Mean=119.865, StdDev=17.205
> Overviews: 4000x4000, 2000x2000, 1000x1000, 500x500, 250x250, 125x125,
> 63x63,32x32
> the resulting .tif file after gdal_translate:
> Band 1 Block=8000x1 Type=Byte, ColorInterp=Gray
> Is there any information here that tells me about gdal_translate
> options/switches that may be available to me to make the .tif files smaller?
> I have .tif files from other geographies that support viewing reasonably
> clear information that are of sizes of about 150KB. I'm guessing that
> the MrSID files contain much more information than I'd need in order to
> reasonable present the data in a useful form.
> As background info (FWIW), the mrSID files are utilized in a SmallWorld
> app and we'd like to make this raster info available in other
> applications. We have no MrSID server in house and, with my limited
> knowledge, I am trying to make these rasters available to this new app
> as tiffs (since the other area's tiffs seem to work quite well) at no
> cost other than my time and my available disk space.
> Thanks for any suggestions.
> Kieran
>
> ********************************************************************************
> This e-mail and any files transmitted with it, are confidential to
> National Grid and are intended solely for the use of the individual or
> entity to whom they are addressed.  If you have received this e-mail in
> error, please reply to this message and let the sender know.
>
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj



From peifer at gmx.eu  Sun Aug 22 02:28:16 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Sun, 22 Aug 2010 11:28:16 +0200
Subject: [Proj] tmerc projection and inversion don't match
In-Reply-To: <4C63D632.5030209@uva.nl>
References: <4C6303A6.3010108@slagkryssaren.com>	<AANLkTin4TvWR=ccBxSHM4WW3o1nt23B2nf49sJtAUGPg@mail.gmail.com>	<AANLkTim_JWEi9xTE6tR90kLqcU3pB7wEx6h2NsT9WyKn@mail.gmail.com>
	<4C63D632.5030209@uva.nl>
Message-ID: <4C70EDB0.8060304@gmx.eu>

It looks to me that your input values are simply outside the valid area 
of EPSG:3021, which are:

--- snippet from http://epsg-registry.org/ ---
Bounding Box Boundary	 Value (Decimal Degrees)
West Bound Longitude     14.09
East Bound Longitude     16.94
North Bound Latitude     68
South Bound Latitude     56
--- snip ---

Here some other expamples:

echo 15 62 | proj +init=epsg:3021 | invproj +init=epsg:3021
15dE    62dN

echo 62 15 | proj +init=epsg:3021 | invproj +init=epsg:3021
61d46'4.814"E   15d4'41.775"N


Hermann



On 12/08/2010 13:08, Jan Hartmann wrote:
>    I have taken the liberty to forward this question on the postgis list
> to the proj list. It's about a transformation that doesn't return the
> original values when inverted. I don't understand it either.
>
> Jan
>
> On 08/11/10 22:39, Paul Ramsey wrote:
>> Removing the EPSG lookup from the equation changes nothing:
>>
>> echo "59 21" | proj +proj=tmerc +lat_0=0 +lon_0=15.80827777777778 +k=1
>> +x_0=1500000 +y_0=0 +ellps=bessel +units=m +no_defs | invproj
>> +proj=tmerc +lat_0=0 +lon_0=15.80827777777778 +k=1 +x_0=1500000 +y_0=0
>> +ellps=bessel +units=m +no_defs
>>
>> 58d49'47.733"E	21d2'54.745"N
>>
>> P.
>>
>> On Wed, Aug 11, 2010 at 1:35 PM, Paul Ramsey<pramsey at opengeo.org>   wrote:
>>> Seems to be an underlying problem with proj4:
>>>
>>> echo "59 21" | proj "+init=epsg:3021" | invproj "+init=epsg:3021"
>>>
>>> 58d49'47.733"E  21d2'54.745"N
>>>
>>> And that's without doing the datum shift part.
>>>
>>> P
>>>
>>> On Wed, Aug 11, 2010 at 1:10 PM, Erik Rehn<erik at slagkryssaren.com>   wrote:
>>>> Hello Postgis Users!
>>>>
>>>> This is my first post on this list so I will start by asking
>>>> a simple (and probably stupid) question. :)
>>>>
>>>> While using ST_AsKml() to produce an overlay for Google Earth I
>>>> noticed that all my geometries where shifted slightly south-east.
>>>> I figured this had something to do with the transformation between
>>>> the projection that my geometries are stored in (SRID 3021) and WGS84 (4326)
>>>> that is outputted by ST_AsKml()
>>>>
>>>> Just to test I ran this:
>>>>
>>>> SELECT ST_AsText(
>>>>      ST_Transform(
>>>>          ST_Transform(
>>>>              ST_GeomFromText('POINT(59 18)',4326),
>>>>          3021),
>>>>      4326));
>>>>
>>>> I input a point in WGS84 (59,18), transforms it to 3021 and then back to
>>>> WGS84. The result I get is:
>>>> POINT(58.8672757036296 18.0394763349359)
>>>>
>>>> Can anyone explain this? Am I missing something regarding ST_Transform()?
>>>>
>>>> Im running Postgis 1.5 on Windows.
>>>>
>>>> Thank you for any help!
>>>> /Erik
>>>>
>>>> --
>>>> Erik Rehn
>>>> Slagkryssaren
>>>> erik at slagkryssaren.com
>>>> www.slagkryssaren.com
>>>> _______________________________________________
>>>> postgis-users mailing list
>>>> postgis-users at postgis.refractions.net
>>>> http://postgis.refractions.net/mailman/listinfo/postgis-users
>>>>
>> _______________________________________________
>> postgis-users mailing list
>> postgis-users at postgis.refractions.net
>> http://postgis.refractions.net/mailman/listinfo/postgis-users
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>



From knudsen.thomas at gmail.com  Sun Aug 22 23:47:45 2010
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Mon, 23 Aug 2010 08:47:45 +0200
Subject: [Proj] File Format Translation
In-Reply-To: <4C70DF7A.4030008@gmx.eu>
References: <2AE2A04AD8F40244AFEB71A07EECF130012A628B@NYHCBMSG41.NA.NGRID.NET>
	<4C70DF7A.4030008@gmx.eu>
Message-ID: <AANLkTin6-hBfqUGqbBMM2A=NRd=KF9uqyt=ut+kSgeGf@mail.gmail.com>

2010/8/22 Hermann Peifer <peifer at gmx.eu>

> Kieran,
>
> You can compress your GeoTIFF, see creation option COMPRESS=... on this
> page: http://www.gdal.org/frmt_gtiff.html
>
> I usually do: -co compress=lzw
>


if the MrSID files contain imagery (rather than "rasterized map" style
data), "compress=JPEG" will probably work better.

/thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100823/d420b3ef/attachment.html>

From richard.greenwood at gmail.com  Tue Aug 24 05:02:16 2010
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Tue, 24 Aug 2010 06:02:16 -0600
Subject: [Proj] HARN/HPGN
In-Reply-To: <4C6F2DC5.9060408@pobox.com>
References: <4C6F2DC5.9060408@pobox.com>
Message-ID: <AANLkTimTgdEF-D5TcQZJMwPufuoKTSJkKVHqQavMjzpe@mail.gmail.com>

On Fri, Aug 20, 2010 at 7:37 PM, Frank Warmerdam <warmerdam at pobox.com> wrote:
> Folks,
>
> At the request of a client, I have developed some tools to translate
> between the .los/.las format used for datum grid shift files distributed
> by NOAA for NADCON to NTv2 for convenient use with PROJ.4.  This was
> done primarily to make use of the NOAA HARN datum shift files practical.
> This has gone ok.
>
> However, now that I look at utilizing the data I find that there are
> distinct HARN grid shift files for each state.  On examination I find
> that they overlap, and that the overlapping areas do not agree.  I read a
> bit of material from NOAA/NGS which seems to suggest each state does it's
> own thing.
>
> When I look in the EPSG database, there seems to be only one GCS mentioning
> HARN which is EPSG:4152 NAD83(HARN).
>
> The online HARN conversion tool on the NGS site requires you to pick a
> state grid file.
>
> So my question is basically - is there really a distinct HARN datum for
> each state?  Does it make sense to treat HARN as a datum, or should it be
> treated as ~52 datums?

I consider them to be ~52 different datums and the user needs to
select them for them self. It's not something that can or should be
done automatically.

I am very happy to see this addition, thanks!

Rich

-- 
Richard Greenwood
richard.greenwood at gmail.com
www.greenwoodmap.com


From hamish_b at yahoo.com  Thu Aug 26 03:17:46 2010
From: hamish_b at yahoo.com (Hamish)
Date: Thu, 26 Aug 2010 03:17:46 -0700 (PDT)
Subject: [Proj] quoting +nadgrids ?
Message-ID: <222284.85889.qm@web110012.mail.gq1.yahoo.com>

Hamish wrote:
> > """
> > So when this string is passed as a CRS to cs2cs it only
> > reads as far as the "C:\Program" part for the grid file and
> > all goes downhill fast from there.
> > """
...
> cs2cs was fixed with Glynn's suggestion:
> 
> replacing:
>    IN_PROJ=`g.proj -j`
> 
> with:
>    IN_PROJ=`g.proj -j | (
>        IN_PROJ=
>        while read line ; do
>        
>    IN_PROJ="$IN_PROJ '$line'"
>        done
>        echo "$IN_PROJ"
>    )`
> 
> after applying that, and audit showed that is was also a problem for
> gdalwarp, but in that case there was no work around as it only takes
> a single (quoted) argument for the entire +proj string, with no way
> to quote individual terms within it. cs2cs takes a series of arguments
> each of which can be individually quoted.


hmph, actually this one is not fixed, and I'm afraid the shell
scripting magic to fix it has me stumped.


copy the NTv2 file somewhere with a space in it:

 mkdir "/tmp/nad test"
 cp "$GISBASE"/etc/nad/nzgd2kgrid0005.gsb "/tmp/nad test/"

 IN_PROJ="'+proj=nzmg' '+lat_0=-41' '+lon_0=173' '+x_0=2510000' '+y_0=6023150' '+no_defs' '+a=6378388' '+rf=297' '+nadgrids=/tmp/nad test/etc/nad/nzgd2kgrid0005.gsb' '+to_meter=1'"

 OUT_PROJ="+proj=longlat +datum=WGS84"


then feed a point to cs2cs using those shell variables:

 echo "2006797  5490896" | cs2cs -w5 $IN_PROJ  +to $OUT_PROJ
Using from definition: 
Rel. 4.6.0, 21 Dec 2007
<cs2cs>: 
projection initialization failure
cause: no arguments in initialization list
program abnormally terminated


same exact thing, but with expanded variables, and it works ?!:

 echo "2006797  5490896" | cs2cs -w5 '+proj=nzmg' '+lat_0=-41' '+lon_0=173' \
   '+x_0=2510000' '+y_0=6023150' '+no_defs' '+a=6378388' '+rf=297' \
   '+nadgrids=/tmp/nad test/nzgd2kgrid0005.gsb' '+to_meter=1' \
   +to +proj=longlat +datum=WGS84
166d32'36.78939"E       45d36'42.47115"S 0.000


I've tried a number of permutations of eval, `echo $IN_PROJ`, and
different flavours of quoting styles, but I just can't seem to
get the literal expansion to work.


any ideas?

thanks,
Hamish



      


From gdt at ir.bbn.com  Thu Aug 26 05:32:05 2010
From: gdt at ir.bbn.com (Greg Troxel)
Date: Thu, 26 Aug 2010 08:32:05 -0400
Subject: [Proj] quoting +nadgrids ?
In-Reply-To: <222284.85889.qm@web110012.mail.gq1.yahoo.com> (Hamish's message
	of "Thu, 26 Aug 2010 03:17:46 -0700 (PDT)")
References: <222284.85889.qm@web110012.mail.gq1.yahoo.com>
Message-ID: <rmi1v9llflm.fsf@fnord.ir.bbn.com>


Normally I'm in the "people should learn not to use spaces in file
names" camp.  I find that the set of people who can fix problems from
spaces is a subset of the people who know enough not to use spaces.
That said:

I think the problem is that cs2cs doesn't parse quotes.  One should pass
a single argument whose contents are shown within the / characters:

  /+nadgrids=/tmp/nad test/nzgd2kgrid0005.gsb/

but using ' inside of " causes the variable IN_PROJ to have ' in it.

The following shell script may be helpful in figuring this out.  Note
that the attempt to remove ' doesn't work because the argument is broken
on the space inside the '.


#!/bin/sh

rm -rf "/tmp/nad test"
mkdir "/tmp/nad test"
cp /usr/pkg/share/proj/nzgd2kgrid0005.gsb "/tmp/nad test/"

#IN_PROJ="'+proj=nzmg' '+lat_0=-41' '+lon_0=173' '+x_0=2510000' '+y_0=6023150' '+no_defs' '+a=6378388' '+rf=297' '+nadgrids=/tmp/nad test/nzgd2kgrid0005.gsb' '+to_meter=1'"

IN_PROJ="+proj=nzmg +lat_0=-41 +lon_0=173 +x_0=2510000 +y_0=6023150 +no_defs +a=6378388 +rf=297 +nadgrids=/tmp/nad\ test//nzgd2kgrid0005.gsb +to_meter=1"

OUT_PROJ="+proj=longlat +datum=WGS84"

echo IN_PROJ /$IN_PROJ/
echo OUT_PROJ /$OUT_PROJ/

echo "WITHOUT QUOTES:"
for i in $IN_PROJ; do
    echo /$i/
done
echo "."

echo "WITH QUOTES:"
for i in "$IN_PROJ"; do
    echo /$i/
done
echo "."

set -x
echo "2006797  5490896" | \
   cs2cs -w5 "$IN_PROJ" +to `echo $OUT_PROJ`

echo "2006797  5490896" | \
   cs2cs -w5 "`for i in $IN_PROJ; do echo $i | sed "s/'//g"; done`" +to `echo $OUT_PROJ`


echo "2006797  5490896" | cs2cs -w5 '+proj=nzmg' '+lat_0=-41' '+lon_0=173' \
    '+x_0=2510000' '+y_0=6023150' '+no_defs' '+a=6378388' '+rf=297' \
    '+nadgrids=/tmp/nad test/nzgd2kgrid0005.gsb' '+to_meter=1' \
    +to +proj=longlat +datum=WGS84
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20100826/b7ffcaa4/attachment.sig>

From glynn at gclements.plus.com  Thu Aug 26 09:13:53 2010
From: glynn at gclements.plus.com (Glynn Clements)
Date: Thu, 26 Aug 2010 17:13:53 +0100
Subject: [Proj] quoting +nadgrids ?
In-Reply-To: <rmi1v9llflm.fsf@fnord.ir.bbn.com>
References: <222284.85889.qm@web110012.mail.gq1.yahoo.com>
	<rmi1v9llflm.fsf@fnord.ir.bbn.com>
Message-ID: <19574.37569.975477.335512@cerise.gclements.plus.com>


Greg Troxel wrote:

> Normally I'm in the "people should learn not to use spaces in file
> names" camp.

However, we want GRASS to work on Windows, and not having spaces in
pathnames may require Administrator privileges (normal users may be
unable to create files outside of the "Documents and Settings" and/or
"Program Files" directories).

Also, in complex, networked environments, using non-standard
directories may require investing substantial effort in both impact
analysis and actual implementation. Which may well translate to "if
you can't make this software use the standard directories, you can't
use it".

-- 
Glynn Clements <glynn at gclements.plus.com>


From ChDohmen at gmx.de  Thu Aug 26 23:57:14 2010
From: ChDohmen at gmx.de (Christoph Dohmen)
Date: Fri, 27 Aug 2010 08:57:14 +0200
Subject: [Proj] looking for the right params for RSO
Message-ID: <20100827065714.317880@gmx.net>

Hi list,

I'm searching for the right parameter set for RSO projected coordinates.

Given a dedicated point from google earth with lat-long = 100.563743E 5.389524N

Having a raster dataset with a projection set as the following:

PROJCS["Kertau_RSO_Malaya_Meters",
    GEOGCS["GCS_Kertau",
        DATUM["D_Kertau",
            SPHEROID["Everest_1830_Modified",6377304.063,300.8017]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Rectified_Skew_Orthomorphic_Natural_Origin"],
    PARAMETER["False_Easting",804671.299775],
    PARAMETER["False_Northing",0.0],
    PARAMETER["Scale_Factor",0.99984],
    PARAMETER["Azimuth",-36.97420943711801],
    PARAMETER["Longitude_Of_Center",102.25],
    PARAMETER["Latitude_Of_Center",4.0],
    PARAMETER["XY_Plane_Rotation",-36.86989764584402],
    UNIT["Meter",1.0]]

Inside the dedicated point has the coordinates 286400m east 596700m north.

Now I want to set up a translation first via proj directly and later on 
for a gdal-warp to transform the rasterdataset.

I tried out the parameter:

cs2cs +init=epsg:4326 +to +proj=omerc +a=6377304.063 +rf=300.8017 +lat_0=4.0 +lonc=102.25 +alpha=323.025790562881987 +gamma=323.13010235415598 +k_0=0.99984 +x_0=804671.299775

but the result is 617824.69 153846.36

Using the other way round I used

cs2cs +proj=omerc +a=6377304.063 +rf=300.8017 +lat_0=4.0 +lonc=102.25 +alpha=323.025790562881987 +gamma=323.13010235415598 +k_0=0.99984 +x_0=804671.299775 +to +init=epsg:4326

With the input of 286400m east 596700m north I got 97d32'10.232"E  9d22'35.287"N.

Is there anyone who can give me any hint how to setup this
translation from "RSO Malay" to Lat-Long or UTM?

Some information for the background, I use the latest proj from
svn. The projection in can be found at http://spatialreference.org/ref/sr-org/6792/ but it seems that there is no comparable epsg-code :-(

thanks

Christoph
-- 
GMX DSL SOMMER-SPECIAL: Surf & Phone Flat 16.000 für nur 19,99 ¿/mtl.!*
http://portal.gmx.net/de/go/dsl


From peifer at gmx.eu  Sun Aug 29 09:32:08 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Sun, 29 Aug 2010 18:32:08 +0200
Subject: [Proj] looking for the right params for RSO
In-Reply-To: <20100827065714.317880@gmx.net>
References: <20100827065714.317880@gmx.net>
Message-ID: <4C7A8B88.1010904@gmx.eu>

On 27/08/2010 08:57, Christoph Dohmen wrote:
> Hi list,
>
> I'm searching for the right parameter set for RSO projected coordinates.
>
> Given a dedicated point from google earth with lat-long = 100.563743E 5.389524N
>
> Having a raster dataset with a projection set as the following:
>
> PROJCS["Kertau_RSO_Malaya_Meters",
>      GEOGCS["GCS_Kertau",
>          DATUM["D_Kertau",
>              SPHEROID["Everest_1830_Modified",6377304.063,300.8017]],
>          PRIMEM["Greenwich",0.0],
>          UNIT["Degree",0.0174532925199433]],
>      PROJECTION["Rectified_Skew_Orthomorphic_Natural_Origin"],
>      PARAMETER["False_Easting",804671.299775],
>      PARAMETER["False_Northing",0.0],
>      PARAMETER["Scale_Factor",0.99984],
>      PARAMETER["Azimuth",-36.97420943711801],
>      PARAMETER["Longitude_Of_Center",102.25],
>      PARAMETER["Latitude_Of_Center",4.0],
>      PARAMETER["XY_Plane_Rotation",-36.86989764584402],
>      UNIT["Meter",1.0]]
>
> Inside the dedicated point has the coordinates 286400m east 596700m north.
>
> Now I want to set up a translation first via proj directly and later on
> for a gdal-warp to transform the rasterdataset.
>
> I tried out the parameter:
>
> cs2cs +init=epsg:4326 +to +proj=omerc +a=6377304.063 +rf=300.8017 +lat_0=4.0 +lonc=102.25 +alpha=323.025790562881987 +gamma=323.13010235415598 +k_0=0.99984 +x_0=804671.299775
>
> but the result is 617824.69 153846.36
>

You are getting somewhat closer to the expected result with:

cs2cs -v +init=epsg:4326 +to +proj=omerc +a=6377304.063 +rf=300.8017 
+lat_0=4.0 +lonc=102.25 +alpha=323.025790562881987 +k_0=0.99984 
+x_0=804671.299775 +no_uoff +rot_conv

286289.13  596607.56 0.00

You might have to look for appropriate towgs84 parameter values.

Hermann


From hamish_b at yahoo.com  Mon Aug 30 21:20:40 2010
From: hamish_b at yahoo.com (Hamish)
Date: Mon, 30 Aug 2010 21:20:40 -0700 (PDT)
Subject: [Proj] quoting +nadgrids ?
Message-ID: <515042.44244.qm@web110002.mail.gq1.yahoo.com>

I do believe I have finally cracked this nut.

(at least for cs2cs with spaces in the +nadgrids's pathname, but not for
gdalwarp +s_srs)


####
IN_PROJ=`g.proj -j | (
    IN_PROJ=
    while read line ; do
	IN_PROJ="$IN_PROJ '$line'"
    done
    echo "$IN_PROJ"
)`

#aka

mkdir "/tmp/nad test"
cp /usr/share/proj/nad/nzgd2kgrid0005.gsb "/tmp/nad test"

IN_PROJ="'+proj=nzmg' '+lat_0=-41' '+lon_0=173' '+x_0=2510000' '+y_0=6023150' \
   '+no_defs' '+a=6378388' '+rf=297' '+nadgrids=/tmp/nad test/nzgd2kgrid0005.gsb' '+to_meter=1'"



OUT_PROJ="+proj=longlat +datum=WGS84"

echo "2006797  5490896" | eval cs2cs `echo $IN_PROJ` +to `echo $OUT_PROJ`
#166d32'36.789"E 45d36'42.471"S 0.000



thanks,
Hamish



      


From hanlie.pretorius at gmail.com  Tue Aug 31 23:43:23 2010
From: hanlie.pretorius at gmail.com (Hanlie Pretorius)
Date: Wed, 1 Sep 2010 08:43:23 +0200
Subject: [Proj] Conferting from WGS84 latlong to Transverse Mercator
Message-ID: <AANLkTikQ5BcWyg2tx9qSEMaL-1agoyq50=vL=0fFMrkB@mail.gmail.com>

Hi,

I'm just a bit confused about the signs of my converted coordinates.

My latlong coordinates are in South Africa: 28.375E and 27.375S

I'm using pyproj to convert from latlong to a Transverse Meractor PCS
centred on 29 deg East:

---
import pyproj

pr_tm = pyproj.Proj('+proj=tmerc +lat_0=0 +lon_0=29 +k=1 +x_0=0 +y_0=0
+ellps=WGS84 +units=m +no_defs')

x_latlong = 28.375
y_latlong = -27.375

x_tm, y_tm = pr_tm(x_latlong, y_latlong)

print x_tm,y_tm
-----

output:
-----
-61827.9202408 -3029337.78594
-----

My question is this: why is the x-coordinate in the TM PCS negative?
It is in the eastern hemisphere, so surely it should be positive? Or
am I missing something?

Thanks
Hanlie


