From Nicolas.Bellaiche at ign.fr  Wed Feb  3 15:51:57 2021
From: Nicolas.Bellaiche at ign.fr (Nicolas Bellaiche)
Date: Wed, 3 Feb 2021 23:51:57 +0000
Subject: [PROJ] computing proj_factors with the C API
Message-ID: <C6A3E3CA0FD04E47839C6B26C02B803A0136B9D357@mailex1.ign.fr>

Hi,

Two major problems I'm struggling with:

1) computing the proj_factors with the C API.

My code seems very simple:


my_proj = proj_create(nullptr, "IGNF:LAMB93");

auto geodetic_crs = proj_crs_get_geodetic_crs(nullptr, my_proj);

PJ_FACTORS facs = proj_factors(geodetic_crs, coord);


the error message sent by proj_factors is "latitude or longitude exceeded limits" but when I look into the code, it seems the geodetic_crs->fwd is not initialized.


The problem disappears if I call proj_init_plus but then I can't use the useful proj_crs_get_horizontal_datum, proj_create_ellipsoidal_2D_cs with the PJ object created.


Anybody understanding what's wrong with my code?



2) if I initialize my PJ object with proj.db, it seems the geoid grid of IGNF:LAMB93 is not loaded, so I can't compute the ellipsoidal height from the altitude and vice versa. I can do it with the old format of proj4 (by copying the file IGNF of PROJ4 in the PROJ_LIB directory and using "+init=IGNF:LAMB93") but then the object is not recognized as an iso object and once again I can't use proj_crs_get_horizontal_datum, proj_create_ellipsoidal_2D_cs etc...


Is there anything I did wrong or is it an issue with PROJ7?


I hope I've been clear enough, any help would be really appreciated,


Thanks a lot for your answers,


Nicolas Bellaiche
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210203/e01af577/attachment.html>

From JasonD at TheTranstecGroup.com  Fri Feb  5 10:50:08 2021
From: JasonD at TheTranstecGroup.com (Jason Dick)
Date: Fri, 5 Feb 2021 12:50:08 -0600
Subject: [PROJ] Projection type required for proj_lp_dist
Message-ID: <9c437ec2-276f-6f11-8390-a1420fd61de6@TheTranstecGroup.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210205/7a8f2841/attachment.html>

From Jochem.Lesparre at kadaster.nl  Sun Feb  7 12:36:51 2021
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Sun, 7 Feb 2021 20:36:51 +0000
Subject: [PROJ] How to do Helmert transformation with +exact option in QGIS?
Message-ID: <AM0P192MB04823964FF6CA9C6A645603EEFB09@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

I want to use a 7-parameter transformation with sub-decimetre precision, but with quite large rotation angles (up to 480? = 8?), so I need to use the +exact option of +proj=helmert. Without +exact, I get discrepancies of several metres after transforming back and forth. This is a problem when defining a custom CRS in QGIS using a PROJ.4-style string, as it does +proj=helmert without +exact. Is there an equivalent of +exact for +towgs84?

An other option is to switch to a WKT string in QGIS to define the custom CRS. The autogenerated WKT string from the PROJ.4-style string refers to EPSG method 9606 which is the 3D Helmert transformation, not the exact variant. I had a look in the EPSG.org registry, but I could not find the rigorous 3D similarity transformation of +exact. Is there a way refer to the exact transformation with WKT?

Regards, Jochem



Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
dit direct te melden aan de verzender en het bericht te vernietigen.
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent
of the Kadaster is unlawful. If you have received this message, but are not the addressee,
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210207/092f4e57/attachment.html>

From markus.metz.giswork at gmail.com  Mon Feb  8 14:10:30 2021
From: markus.metz.giswork at gmail.com (Markus Metz)
Date: Mon, 8 Feb 2021 23:10:30 +0100
Subject: [PROJ] computing proj_factors with the C API
In-Reply-To: <C6A3E3CA0FD04E47839C6B26C02B803A0136B9D357@mailex1.ign.fr>
References: <C6A3E3CA0FD04E47839C6B26C02B803A0136B9D357@mailex1.ign.fr>
Message-ID: <CAG+h=FEKCB3x3ZvUMWtAk_yrFJ-VH5+dV7U9UWc3NMiaa-gOew@mail.gmail.com>

On Thu, Feb 4, 2021 at 12:58 AM Nicolas Bellaiche <Nicolas.Bellaiche at ign.fr>
wrote:
>
> Hi,
>
> Two major problems I'm struggling with:
>
> 1) computing the proj_factors with the C API.
>
> My code seems very simple:
>
> my_proj = proj_create(nullptr, "IGNF:LAMB93");
>
> auto geodetic_crs = proj_crs_get_geodetic_crs(nullptr, my_proj);
>
> PJ_FACTORS facs = proj_factors(geodetic_crs, coord);
>
>
> the error message sent by proj_factors is "latitude or longitude exceeded
limits" but when I look into the code, it seems the geodetic_crs->fwd is
not initialized.

According to "projinfo -o WKT2:2019 IGNF:LAMB93", the bbox is
       BBOX[41,-5.5,52,10]]
here, easting and northing seem to be swapped, the WKT2 output says that
easting is the first axis.

Following your code and using
        coord = proj_coord(5.0, 47.0, 0.0, 0.0);
which is somewhere inside the reported bbox, I don't get any errors. Maybe
your coords are outside the bbox, thus "latitude or longitude exceeded
limits"?

>
>
> The problem disappears if I call proj_init_plus but then I can't use the
useful proj_crs_get_horizontal_datum, proj_create_ellipsoidal_2D_cs with
the PJ object created.

proj_crs_get_horizontal_datum() is independent of any PJ_COORD and may fail
if there is no horizontal datum, but "IGNF:LAMB93" has "Reseau Geodesique
Francais 1993" as datum. In my test with "IGNF:LAMB93",
proj_crs_get_horizontal_datum() works with both the original crs and the
crs from proj_crs_get_geodetic_crs();

proj_create_ellipsoidal_2D_cs() is experimental.
>
>
> Anybody understanding what's wrong with my code?

Wrong coordinates? Using experimental code?

Markus M
>
>
>
> 2) if I initialize my PJ object with proj.db, it seems the geoid grid of
IGNF:LAMB93 is not loaded, so I can't compute the ellipsoidal height from
the altitude and vice versa. I can do it with the old format of proj4 (by
copying the file IGNF of PROJ4 in the PROJ_LIB directory and using
"+init=IGNF:LAMB93") but then the object is not recognized as an iso object
and once again I can't use proj_crs_get_horizontal_datum,
proj_create_ellipsoidal_2D_cs etc...
>
>
> Is there anything I did wrong or is it an issue with PROJ7?
>
>
> I hope I've been clear enough, any help would be really appreciated,
>
>
> Thanks a lot for your answers,
>
>
> Nicolas Bellaiche
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210208/ba99ed87/attachment.html>

From kreve at sdfe.dk  Tue Feb  9 10:56:33 2021
From: kreve at sdfe.dk (Kristian Evers)
Date: Tue, 9 Feb 2021 18:56:33 +0000
Subject: [PROJ] How to do Helmert transformation with +exact option in
 QGIS?
In-Reply-To: <AM0P192MB04823964FF6CA9C6A645603EEFB09@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
References: <AM0P192MB04823964FF6CA9C6A645603EEFB09@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
Message-ID: <55A5E206-06E1-49B5-AA78-4495A77E82C3@sdfe.dk>

Jochem,

There is no +towgs84 equivalent of +exact. One of the many reasons to not use the old style syntax. Unfortunately that doesn?t solve your problem with QGIS. Unfortunately the QGIS custom CRS is still based on the PROJ.4 way of thinking (as far as I know, it?s been a while since I last tried it). If it is super important to you, you may be able to hack the proj.db that QGIS opens and add your own custom CRS and transformations. Not sure I would recommend that though :-)

Unfortunately I can?t answer your WKT question. Perhaps you can investigate how the WKT of other CRS that require the +exact flag is implemented?

Best,
Kristian

On 7 Feb 2021, at 21:36, Lesparre, Jochem via PROJ <proj at lists.osgeo.org<mailto:proj at lists.osgeo.org>> wrote:

I want to use a 7-parameter transformation with sub-decimetre precision, but with quite large rotation angles (up to 480? = 8?), so I need to use the +exact option of +proj=helmert. Without +exact, I get discrepancies of several metres after transforming back and forth. This is a problem when defining a custom CRS in QGIS using a PROJ.4-style string, as it does +proj=helmert without +exact. Is there an equivalent of +exact for +towgs84?

An other option is to switch to a WKT string in QGIS to define the custom CRS. The autogenerated WKT string from the PROJ.4-style string refers to EPSG method 9606 which is the 3D Helmert transformation, not the exact variant. I had a look in the EPSG.org<http://epsg.org/> registry, but I could not find the rigorous 3D similarity transformation of +exact. Is there a way refer to the exact transformation with WKT?

Regards, Jochem



Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
dit direct te melden aan de verzender en het bericht te vernietigen.
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent
of the Kadaster is unlawful. If you have received this message, but are not the addressee,
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message.
_______________________________________________
PROJ mailing list
PROJ at lists.osgeo.org<mailto:PROJ at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/proj

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210209/0a1f540c/attachment.html>

From nyall.dawson at gmail.com  Tue Feb  9 14:38:55 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 10 Feb 2021 08:38:55 +1000
Subject: [PROJ] Tie breakers used when ordering candidate operations
Message-ID: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>

Hi list,

I'm after a quick summary of what tie-breakers are used to sort
candidate operations when a number of operations have the same
reported accuracy.

I have a vague recollection that one logic is that larger number
transforms are picked, .i.e. " WGS 84 to GDA2020 (3)" is picked over
"WGS 84 to GDA2020 (2)", but I may be mistaken!

Is anyone able to quickly summarise the sorting order of operations or
can direct me to the relevant part of the code for me to determine
this?

Thanks!
Nyall

From nyall.dawson at gmail.com  Tue Feb  9 14:40:06 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 10 Feb 2021 08:40:06 +1000
Subject: [PROJ] How to do Helmert transformation with +exact option in
 QGIS?
In-Reply-To: <55A5E206-06E1-49B5-AA78-4495A77E82C3@sdfe.dk>
References: <AM0P192MB04823964FF6CA9C6A645603EEFB09@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <55A5E206-06E1-49B5-AA78-4495A77E82C3@sdfe.dk>
Message-ID: <CAB28AsjVYzYJrwL=rgDDvR1JqeHJLm-kL8ru4iHT7zn6e8huow@mail.gmail.com>

On Wed, 10 Feb 2021 at 04:56, Kristian Evers via PROJ
<proj at lists.osgeo.org> wrote:
>
> Jochem,
>
> There is no +towgs84 equivalent of +exact. One of the many reasons to not use the old style syntax. Unfortunately that doesn?t solve your problem with QGIS. Unfortunately the QGIS custom CRS is still based on the PROJ.4 way of thinking (as far as I know, it?s been a while since I last tried it)

Actually since 3.10 we've also supported direct WKT(2) definitions of
custom CRS, and the GUI strongly pushes users towards defining custom
projections using WKT over PROJ now :)

Nyall

. If it is super important to you, you may be able to hack the proj.db
that QGIS opens and add your own custom CRS and transformations. Not
sure I would recommend that though :-)
>
> Unfortunately I can?t answer your WKT question. Perhaps you can investigate how the WKT of other CRS that require the +exact flag is implemented?
>
> Best,
> Kristian
>
> On 7 Feb 2021, at 21:36, Lesparre, Jochem via PROJ <proj at lists.osgeo.org> wrote:
>
> I want to use a 7-parameter transformation with sub-decimetre precision, but with quite large rotation angles (up to 480? = 8?), so I need to use the +exact option of +proj=helmert. Without +exact, I get discrepancies of several metres after transforming back and forth. This is a problem when defining a custom CRS in QGIS using a PROJ.4-style string, as it does +proj=helmert without +exact. Is there an equivalent of +exact for +towgs84?
>
> An other option is to switch to a WKT string in QGIS to define the custom CRS. The autogenerated WKT string from the PROJ.4-style string refers to EPSG method 9606 which is the 3D Helmert transformation, not the exact variant. I had a look in the EPSG.org registry, but I could not find the rigorous 3D similarity transformation of +exact. Is there a way refer to the exact transformation with WKT?
>
> Regards, Jochem
>
>
>
> Disclaimer:
> De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
> Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
> is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
> dit direct te melden aan de verzender en het bericht te vernietigen.
> Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.
>
> Disclaimer:
> The content of this message is meant to be received by the addressee only.
> Use of the content of this message by anyone other than the addressee without the consent
> of the Kadaster is unlawful. If you have received this message, but are not the addressee,
> please contact the sender immediately and destroy the message.
> No rights can be derived from the content of this message.
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

From kreve at sdfe.dk  Tue Feb  9 14:45:03 2021
From: kreve at sdfe.dk (Kristian Evers)
Date: Tue, 9 Feb 2021 22:45:03 +0000
Subject: [PROJ] How to do Helmert transformation with +exact option in
 QGIS?
In-Reply-To: <CAB28AsjVYzYJrwL=rgDDvR1JqeHJLm-kL8ru4iHT7zn6e8huow@mail.gmail.com>
References: <AM0P192MB04823964FF6CA9C6A645603EEFB09@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <55A5E206-06E1-49B5-AA78-4495A77E82C3@sdfe.dk>
 <CAB28AsjVYzYJrwL=rgDDvR1JqeHJLm-kL8ru4iHT7zn6e8huow@mail.gmail.com>
Message-ID: <4228D0AE-B3B8-475E-A523-54537AFE11B4@sdfe.dk>



On 9 Feb 2021, at 23:40, Nyall Dawson <nyall.dawson at gmail.com<mailto:nyall.dawson at gmail.com>> wrote:

On Wed, 10 Feb 2021 at 04:56, Kristian Evers via PROJ
<proj at lists.osgeo.org<mailto:proj at lists.osgeo.org>> wrote:

Jochem,

There is no +towgs84 equivalent of +exact. One of the many reasons to not use the old style syntax. Unfortunately that doesn?t solve your problem with QGIS. Unfortunately the QGIS custom CRS is still based on the PROJ.4 way of thinking (as far as I know, it?s been a while since I last tried it)

Actually since 3.10 we've also supported direct WKT(2) definitions of
custom CRS, and the GUI strongly pushes users towards defining custom
projections using WKT over PROJ now :)


Well that?s good news! Any chance I might be able to define my own PROJ transformation pipeline between a layer CRS and the project CRS then? That?d be handy from time to time and would probably also fix Jochems problem.

/Kristian

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210209/b781081a/attachment.html>

From kristianevers at gmail.com  Tue Feb  9 14:46:57 2021
From: kristianevers at gmail.com (Kristian Evers)
Date: Tue, 9 Feb 2021 23:46:57 +0100
Subject: [PROJ] Tie breakers used when ordering candidate operations
In-Reply-To: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>
References: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>
Message-ID: <2793C012-A2BC-4BAA-871B-FD0EE564858C@gmail.com>

Nyall,

Have you had a look at https://proj.org/operations/operations_computation.html <https://proj.org/operations/operations_computation.html> ?
It?s a bit of a long read but it explains the logic behind what transformations are
chosen under various circumstances.

/Kristian

> On 9 Feb 2021, at 23:38, Nyall Dawson <nyall.dawson at gmail.com> wrote:
> 
> Hi list,
> 
> I'm after a quick summary of what tie-breakers are used to sort
> candidate operations when a number of operations have the same
> reported accuracy.
> 
> I have a vague recollection that one logic is that larger number
> transforms are picked, .i.e. " WGS 84 to GDA2020 (3)" is picked over
> "WGS 84 to GDA2020 (2)", but I may be mistaken!
> 
> Is anyone able to quickly summarise the sorting order of operations or
> can direct me to the relevant part of the code for me to determine
> this?
> 
> Thanks!
> Nyall
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210209/0c253973/attachment-0001.html>

From nyall.dawson at gmail.com  Tue Feb  9 14:54:50 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 10 Feb 2021 08:54:50 +1000
Subject: [PROJ] Tie breakers used when ordering candidate operations
In-Reply-To: <2793C012-A2BC-4BAA-871B-FD0EE564858C@gmail.com>
References: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>
 <2793C012-A2BC-4BAA-871B-FD0EE564858C@gmail.com>
Message-ID: <CAB28AsjK17q5bT21G6bmH+qWOzhWFrA=sYyQT1pS+b=Nv+AWVg@mail.gmail.com>

On Wed, 10 Feb 2021 at 08:47, Kristian Evers <kristianevers at gmail.com> wrote:
>
> Nyall,
>
> Have you had a look at https://proj.org/operations/operations_computation.html ?
> It?s a bit of a long read but it explains the logic behind what transformations are
> chosen under various circumstances.

Perfect, thanks!

Nyall

>
> /Kristian
>
> On 9 Feb 2021, at 23:38, Nyall Dawson <nyall.dawson at gmail.com> wrote:
>
> Hi list,
>
> I'm after a quick summary of what tie-breakers are used to sort
> candidate operations when a number of operations have the same
> reported accuracy.
>
> I have a vague recollection that one logic is that larger number
> transforms are picked, .i.e. " WGS 84 to GDA2020 (3)" is picked over
> "WGS 84 to GDA2020 (2)", but I may be mistaken!
>
> Is anyone able to quickly summarise the sorting order of operations or
> can direct me to the relevant part of the code for me to determine
> this?
>
> Thanks!
> Nyall
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
>

From nyall.dawson at gmail.com  Tue Feb  9 14:56:42 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 10 Feb 2021 08:56:42 +1000
Subject: [PROJ] How to do Helmert transformation with +exact option in
 QGIS?
In-Reply-To: <4228D0AE-B3B8-475E-A523-54537AFE11B4@sdfe.dk>
References: <AM0P192MB04823964FF6CA9C6A645603EEFB09@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <55A5E206-06E1-49B5-AA78-4495A77E82C3@sdfe.dk>
 <CAB28AsjVYzYJrwL=rgDDvR1JqeHJLm-kL8ru4iHT7zn6e8huow@mail.gmail.com>
 <4228D0AE-B3B8-475E-A523-54537AFE11B4@sdfe.dk>
Message-ID: <CAB28Ashk+5rDEvxj0L-0GEYqhHO4G63qSSP7bjR0N4SP5cfpFQ@mail.gmail.com>

On Wed, 10 Feb 2021 at 08:45, Kristian Evers <kreve at sdfe.dk> wrote:
>
>
>
> On 9 Feb 2021, at 23:40, Nyall Dawson <nyall.dawson at gmail.com> wrote:
>
> On Wed, 10 Feb 2021 at 04:56, Kristian Evers via PROJ
> <proj at lists.osgeo.org> wrote:
>
>
> Jochem,
>
> There is no +towgs84 equivalent of +exact. One of the many reasons to not use the old style syntax. Unfortunately that doesn?t solve your problem with QGIS. Unfortunately the QGIS custom CRS is still based on the PROJ.4 way of thinking (as far as I know, it?s been a while since I last tried it)
>
>
> Actually since 3.10 we've also supported direct WKT(2) definitions of
> custom CRS, and the GUI strongly pushes users towards defining custom
> projections using WKT over PROJ now :)
>
>
> Well that?s good news! Any chance I might be able to define my own PROJ transformation pipeline between a layer CRS and the project CRS then? That?d be handy from time to time and would probably also fix Jochems problem.

That's still an open feature request (
https://github.com/qgis/QGIS/issues/31106), although it's purely a GUI
limitation really.

Nyall


>
> /Kristian
>

From nyall.dawson at gmail.com  Tue Feb  9 15:09:49 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 10 Feb 2021 09:09:49 +1000
Subject: [PROJ] Tie breakers used when ordering candidate operations
In-Reply-To: <CAB28AsjK17q5bT21G6bmH+qWOzhWFrA=sYyQT1pS+b=Nv+AWVg@mail.gmail.com>
References: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>
 <2793C012-A2BC-4BAA-871B-FD0EE564858C@gmail.com>
 <CAB28AsjK17q5bT21G6bmH+qWOzhWFrA=sYyQT1pS+b=Nv+AWVg@mail.gmail.com>
Message-ID: <CAB28AsjHUWTWuaMUzV_QmGoCYdocVSu1uBFzm5x252j_R9PVbQ@mail.gmail.com>

On Wed, 10 Feb 2021 at 08:54, Nyall Dawson <nyall.dawson at gmail.com> wrote:
>
> On Wed, 10 Feb 2021 at 08:47, Kristian Evers <kristianevers at gmail.com> wrote:
> >
> > Nyall,
> >
> > Have you had a look at https://proj.org/operations/operations_computation.html ?
> > It?s a bit of a long read but it explains the logic behind what transformations are
> > chosen under various circumstances.
>
> Perfect, thanks!
>

A follow up question: on master using
projinfo -t EPSG:7844 -s EPSG:4326 --spatial-test intersects

I get three candidates:

1 EPSG:9690, WGS 84 to GDA2020 (3), 3.0 m, Australia including Lord
Howe Island, Macquarie Islands, Ashmore and Cartier Islands, Christmas
Island, Cocos (Keeling) Islands, Norfolk Island. All onshore and
offshore.
2 INVERSE(EPSG):8450, Inverse of GDA2020 to WGS 84 (2), 3.0 m,
Australia including Lord Howe Island, Macquarie Islands, Ashmore and
Cartier Islands, Christmas Island, Cocos (Keeling) Islands, Norfolk
Island. All onshore and offshore.
3 DERIVED_FROM(EPSG):9691, WGS 84 to GDA2020 (4), 3.0 m, Australia -
Australian Capital Territory; New South Wales; Northern Territory;
Queensland; South Australia; Tasmania; Western Australia; Victoria.

I'm trying to determine what dictates the order of 1 and 2.

Running through the list of sorting criteria:

1. consider as more relevant an operation that can be expressed as a
PROJ operation string (the database might list operations whose method
is not (yet) implemented by PROJ)
N/A - both can be expressed as proj strings

2. if both operations evaluate identically with respect to the above
criterion, consider as more relevant an operation that does not
include a synthetic ballpark vertical transformation (occurs when
there is a geoid model).
N/A - neither has a vertical transform

3. if both operations evaluate identically with respect to the above
criterion, consider as more relevant an operation that does not
include a synthetic ballpark horizontal transformation.
I believe N/A (but not 100% sure)

4. consider as more relevant an operation that refers to shift grids
that are locally available.
5. consider as more relevant an operation that refers to grids that
are available in one of the proj-datumgrid packages, but not
necessarily locally available
N/A neither op uses a grid

6. consider as more relevant an operation that has a known accuracy.
N/A - both have the same reported accuracy of 3m

7. if two operations have unknown accuracy, consider as more relevant
an operation that uses grid(s) if the other one does not (grid based
operations are assumed to be more precise than operations relying on a
few parameters)
N/A neither op uses a grid

8. consider as more relevant an operation whose area of use is larger
(note: the computation of the are of use is approximate, based on a
bounding box)
N/A both have identical area of use

9. consider as more relevant an operation that has a better accuracy.
N/A both have reported 3m accuracy

10. in case of same accuracy, consider as more relevant an operation
that does not use grids (operations that use only parameters will be
faster)
N/A

11. consider as more relevant an operation that involves less
transformation steps

Here I'd have thought 8450 (with a single noop step) would be picked
over 9690, which has a pipeline of:

+proj=pipeline
  +step +proj=axisswap +order=2,1
  +step +proj=unitconvert +xy_in=deg +xy_out=rad
  +step +proj=push +v_3
  +step +proj=cart +ellps=WGS84
  +step +proj=helmert +x=0.06155 +y=-0.01087 +z=-0.04019 +rx=-0.0394924
        +ry=-0.0327221 +rz=-0.0328979 +s=-0.009994 +convention=coordinate_frame
  +step +inv +proj=cart +ellps=GRS80
  +step +proj=pop +v_3
  +step +proj=unitconvert +xy_in=rad +xy_out=deg
  +step +proj=axisswap +order=2,1

What am I missing here?

Nyall

From Jochem.Lesparre at kadaster.nl  Tue Feb  9 15:46:39 2021
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Tue, 9 Feb 2021 23:46:39 +0000
Subject: [PROJ] How to do Helmert transformation with +exact option in
 QGIS?
In-Reply-To: <CAB28AsjVYzYJrwL=rgDDvR1JqeHJLm-kL8ru4iHT7zn6e8huow@mail.gmail.com>
References: <AM0P192MB04823964FF6CA9C6A645603EEFB09@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <55A5E206-06E1-49B5-AA78-4495A77E82C3@sdfe.dk>
 <CAB28AsjVYzYJrwL=rgDDvR1JqeHJLm-kL8ru4iHT7zn6e8huow@mail.gmail.com>
Message-ID: <AM0P192MB04823AB3CEBDF508303D6099EF8E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Nyall wrote:
> Actually since 3.10 we've also supported direct WKT(2) definitions of custom CRS, and the GUI strongly pushes users towards defining custom projections using WKT over PROJ now :)

Yes, I noticed. It's good to have that option too. Although, I do not find it so easy to define a CRS like that, as WKT is not very compact and it is really hard for a human to get the parenthesis right. But, I willing to accept that if there is a way to refer to the exact Helmert transformation with WKT! Is this possible?

Kristian wrote:
> If it is super important to you, you may be able to hack the proj.db that QGIS opens and add your own custom CRS and transformations. Not sure I would recommend that though :-)

I have no objection against editing the proj.db myself, however the CRS should be usable by other people too. My idea was to provide a simple instruction on how to add a custom CRS in QGIS, until I would get this CRS added to the EPSG registry. But I might need to get the exact Helmert method added to EPSG first.

Kristian wrote:
> Any chance I might be able to define my own PROJ transformation pipeline between a layer CRS and the project CRS then? That?d be handy from time to time and would probably also fix Jochems problem.

I'm not sure how this would work. I start to think that the best available solution is to create a hgridshift file. Unfortunately, that would give me the same horizontal coordinates at any height. Due to the large rotations of the CRS and a volcano in the area of interest, this would cause a horizontal error of 0.1 metre between points at sea level and the highest point. Unless, I create a really dense hgridshift file to let it give the right horizontal results at DTM height. But that would be bit complex.

Regards, Jochem



Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
dit direct te melden aan de verzender en het bericht te vernietigen.
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent
of the Kadaster is unlawful. If you have received this message, but are not the addressee,
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message.

From nyall.dawson at gmail.com  Tue Feb  9 15:53:58 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 10 Feb 2021 09:53:58 +1000
Subject: [PROJ] How to do Helmert transformation with +exact option in
 QGIS?
In-Reply-To: <AM0P192MB04823AB3CEBDF508303D6099EF8E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
References: <AM0P192MB04823964FF6CA9C6A645603EEFB09@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <55A5E206-06E1-49B5-AA78-4495A77E82C3@sdfe.dk>
 <CAB28AsjVYzYJrwL=rgDDvR1JqeHJLm-kL8ru4iHT7zn6e8huow@mail.gmail.com>
 <AM0P192MB04823AB3CEBDF508303D6099EF8E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
Message-ID: <CAB28Asi89rPY=EKR9uFkjiftXjHVghvNT0fTjGUiJJApdY3xHQ@mail.gmail.com>

On Wed, 10 Feb 2021 at 09:46, Lesparre, Jochem
<Jochem.Lesparre at kadaster.nl> wrote:
>
> Nyall wrote:
> > Actually since 3.10 we've also supported direct WKT(2) definitions of custom CRS, and the GUI strongly pushes users towards defining custom projections using WKT over PROJ now :)
>
> Yes, I noticed. It's good to have that option too. Although, I do not find it so easy to define a CRS like that, as WKT is not very compact and it is really hard for a human to get the parenthesis right. But, I willing to accept that if there is a way to refer to the exact Helmert transformation with WKT! Is this possible?
>
> Kristian wrote:
> > If it is super important to you, you may be able to hack the proj.db that QGIS opens and add your own custom CRS and transformations. Not sure I would recommend that though :-)
>
> I have no objection against editing the proj.db myself, however the CRS should be usable by other people too. My idea was to provide a simple instruction on how to add a custom CRS in QGIS, until I would get this CRS added to the EPSG registry. But I might need to get the exact Helmert method added to EPSG first.

It's pretty straightforward to do via python:

crs = QgsCoordinateReferenceSystem.fromWkt( ' ... ' )
crs.saveAsUserCrs("My first projection",
nativeFormat=QgsCoordinateReferenceSystem.FormatWkt)

or if using a proj string

crs = QgsCoordinateReferenceSystem.fromProj( ... )
crs.saveAsUserCrs("My first projection",
nativeFormat=QgsCoordinateReferenceSystem.FormatProj)

That's the easiest approach I can think of for users. At its simplest
you could save this as a .py file and get users to drag and drop it
over their QGIS. (Or deploy in an organisation's startup script, or
make a tiny plugin which adds this projection for users, or ... !)

Nyal



>
> Kristian wrote:
> > Any chance I might be able to define my own PROJ transformation pipeline between a layer CRS and the project CRS then? That?d be handy from time to time and would probably also fix Jochems problem.
>
> I'm not sure how this would work. I start to think that the best available solution is to create a hgridshift file. Unfortunately, that would give me the same horizontal coordinates at any height. Due to the large rotations of the CRS and a volcano in the area of interest, this would cause a horizontal error of 0.1 metre between points at sea level and the highest point. Unless, I create a really dense hgridshift file to let it give the right horizontal results at DTM height. But that would be bit complex.
>
> Regards, Jochem
>
>
>
> Disclaimer:
> De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
> Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
> is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
> dit direct te melden aan de verzender en het bericht te vernietigen.
> Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.
>
> Disclaimer:
> The content of this message is meant to be received by the addressee only.
> Use of the content of this message by anyone other than the addressee without the consent
> of the Kadaster is unlawful. If you have received this message, but are not the addressee,
> please contact the sender immediately and destroy the message.
> No rights can be derived from the content of this message.

From Jochem.Lesparre at kadaster.nl  Wed Feb 10 01:34:09 2021
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Wed, 10 Feb 2021 09:34:09 +0000
Subject: [PROJ] How to do Helmert transformation with +exact option in
 QGIS?
In-Reply-To: <CAB28Asi89rPY=EKR9uFkjiftXjHVghvNT0fTjGUiJJApdY3xHQ@mail.gmail.com>
References: <AM0P192MB04823964FF6CA9C6A645603EEFB09@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <55A5E206-06E1-49B5-AA78-4495A77E82C3@sdfe.dk>
 <CAB28AsjVYzYJrwL=rgDDvR1JqeHJLm-kL8ru4iHT7zn6e8huow@mail.gmail.com>
 <AM0P192MB04823AB3CEBDF508303D6099EF8E9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <CAB28Asi89rPY=EKR9uFkjiftXjHVghvNT0fTjGUiJJApdY3xHQ@mail.gmail.com>
Message-ID: <AM0P192MB0482F1DEAF67AC55354FDDE3EF8D9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Nyall wrote:
> It's pretty straightforward to do via python:

That would indeed make it very easy for users to add our predefined custom CRS. However, in the python command I would still have the same limitations for the PROJ.4-style string and the WKT string, thus no exact Helmert transformation, right?

Regards, Jochem


Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
dit direct te melden aan de verzender en het bericht te vernietigen.
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent
of the Kadaster is unlawful. If you have received this message, but are not the addressee,
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message.

From even.rouault at spatialys.com  Wed Feb 10 06:51:14 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Feb 2021 15:51:14 +0100
Subject: [PROJ] How to do Helmert transformation with +exact option in
 QGIS?
In-Reply-To: <AM0P192MB04823964FF6CA9C6A645603EEFB09@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
References: <AM0P192MB04823964FF6CA9C6A645603EEFB09@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
Message-ID: <4497487.NiNIYYMj0d@even-i700>

Jochem,

> I want to use a 7-parameter transformation with sub-decimetre precision, but
> with quite large rotation angles (up to 480? = 8?), so I need to use the
> +exact option of +proj=helmert. Without +exact, I get discrepancies of
> several metres after transforming back and forth. This is a problem when
> defining a custom CRS in QGIS using a PROJ.4-style string, as it does
> +proj=helmert without +exact. Is there an equivalent of +exact for
> +towgs84?
 
> An other option is to switch to a WKT string in QGIS to define the custom
> CRS. The autogenerated WKT string from the PROJ.4-style string refers to
> EPSG method 9606 which is the 3D Helmert transformation, not the exact
> variant. I had a look in the EPSG.org registry, but I could not find the
> rigorous 3D similarity transformation of +exact. Is there a way refer to
> the exact transformation with WKT?

A clean solution would indeed to have EPSG register a method for an exact 
Helmert transformation and that could then be used as an abridged 
transformation of a BoundCRS

In the mean time, I've implemented something that enables to embed an 
arbitrary PROJ string pipeline in a BoundCRS:
https://github.com/OSGeo/PROJ/pull/2521
Of course that will not be interoperable outside of PROJ.

Even

-- 
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Feb 10 07:01:33 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Feb 2021 16:01:33 +0100
Subject: [PROJ] Tie breakers used when ordering candidate operations
In-Reply-To: <CAB28AsjHUWTWuaMUzV_QmGoCYdocVSu1uBFzm5x252j_R9PVbQ@mail.gmail.com>
References: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>
 <CAB28AsjK17q5bT21G6bmH+qWOzhWFrA=sYyQT1pS+b=Nv+AWVg@mail.gmail.com>
 <CAB28AsjHUWTWuaMUzV_QmGoCYdocVSu1uBFzm5x252j_R9PVbQ@mail.gmail.com>
Message-ID: <3712514.cAoalJbAhN@even-i700>

Hi Nyall,

Obviously the doc was lagging a bit behind the latest state of the code. 
Update in https://github.com/OSGeo/PROJ/pull/2522

> 11. consider as more relevant an operation that involves less
> transformation steps
> 
> Here I'd have thought 8450 (with a single noop step) would be picked
> over 9690, which has a pipeline of:
> 
> +proj=pipeline
>   +step +proj=axisswap +order=2,1
>   +step +proj=unitconvert +xy_in=deg +xy_out=rad
>   +step +proj=push +v_3
>   +step +proj=cart +ellps=WGS84
>   +step +proj=helmert +x=0.06155 +y=-0.01087 +z=-0.04019 +rx=-0.0394924
>         +ry=-0.0327221 +rz=-0.0328979 +s=-0.009994
> +convention=coordinate_frame +step +inv +proj=cart +ellps=GRS80
>   +step +proj=pop +v_3
>   +step +proj=unitconvert +xy_in=rad +xy_out=deg
>   +step +proj=axisswap +order=2,1

If you look at the WKT output, you'll see that both have a single 
transformation step, which is what is considered by the sorting algorithm. But 
a helmert transformation with no translation and no rotation can be simplified 
in a single PROJ operation.

So here only the final criterion apply. Given that "WGS 84 to GDA2020 (3)" > 
"Inverse of GDA2020 to WGS 84 (2)" in lexicographic order, it has higher 
precedence. Completely arbitrary here obviously...

Even

-- 
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Feb 10 07:09:09 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Feb 2021 16:09:09 +0100
Subject: [PROJ] Tie breakers used when ordering candidate operations
In-Reply-To: <3712514.cAoalJbAhN@even-i700>
References: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>
 <CAB28AsjHUWTWuaMUzV_QmGoCYdocVSu1uBFzm5x252j_R9PVbQ@mail.gmail.com>
 <3712514.cAoalJbAhN@even-i700>
Message-ID: <13790605.oCarGiSyK4@even-i700>

On mercredi 10 f?vrier 2021 16:01:33 CET Even Rouault wrote:
> Hi Nyall,
> 
> Obviously the doc was lagging a bit behind the latest state of the code.

And I forgot to mention the relevant code is at
https://github.com/OSGeo/PROJ/blob/a7f6b407446b35a50b5601650aed993c706fe8ee/src/iso19111/operation/coordinateoperationfactory.cpp#L717

-- 
http://www.spatialys.com

From nyall.dawson at gmail.com  Wed Feb 10 17:17:58 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 11 Feb 2021 11:17:58 +1000
Subject: [PROJ] Tie breakers used when ordering candidate operations
In-Reply-To: <3712514.cAoalJbAhN@even-i700>
References: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>
 <CAB28AsjK17q5bT21G6bmH+qWOzhWFrA=sYyQT1pS+b=Nv+AWVg@mail.gmail.com>
 <CAB28AsjHUWTWuaMUzV_QmGoCYdocVSu1uBFzm5x252j_R9PVbQ@mail.gmail.com>
 <3712514.cAoalJbAhN@even-i700>
Message-ID: <CAB28Ash3ScVQ+T-YpuhihiKp7qkYHuoOYdvSHByRRV3TvqZbFg@mail.gmail.com>

On Thu, 11 Feb 2021 at 01:01, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Hi Nyall,
>
> Obviously the doc was lagging a bit behind the latest state of the code.
> Update in https://github.com/OSGeo/PROJ/pull/2522
>
> > 11. consider as more relevant an operation that involves less
> > transformation steps
> >
> > Here I'd have thought 8450 (with a single noop step) would be picked
> > over 9690, which has a pipeline of:
> >
> > +proj=pipeline
> >   +step +proj=axisswap +order=2,1
> >   +step +proj=unitconvert +xy_in=deg +xy_out=rad
> >   +step +proj=push +v_3
> >   +step +proj=cart +ellps=WGS84
> >   +step +proj=helmert +x=0.06155 +y=-0.01087 +z=-0.04019 +rx=-0.0394924
> >         +ry=-0.0327221 +rz=-0.0328979 +s=-0.009994
> > +convention=coordinate_frame +step +inv +proj=cart +ellps=GRS80
> >   +step +proj=pop +v_3
> >   +step +proj=unitconvert +xy_in=rad +xy_out=deg
> >   +step +proj=axisswap +order=2,1
>
> If you look at the WKT output, you'll see that both have a single
> transformation step, which is what is considered by the sorting algorithm. But
> a helmert transformation with no translation and no rotation can be simplified
> in a single PROJ operation.
>
> So here only the final criterion apply. Given that "WGS 84 to GDA2020 (3)" >
> "Inverse of GDA2020 to WGS 84 (2)" in lexicographic order, it has higher
> precedence. Completely arbitrary here obviously...

Many thanks Even -- now everything is completely understandable.

Related question: do you think the EPSG registry should include some
kind of numerical "preference ranking" field to allow for better
selection in ambiguous cases? Are you aware if this has ever been
discussed before?

Nyall


>
> Even
>
> --
> http://www.spatialys.com

From even.rouault at spatialys.com  Thu Feb 11 02:02:09 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 11 Feb 2021 11:02:09 +0100
Subject: [PROJ] Tie breakers used when ordering candidate operations
In-Reply-To: <CAB28Ash3ScVQ+T-YpuhihiKp7qkYHuoOYdvSHByRRV3TvqZbFg@mail.gmail.com>
References: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>
 <3712514.cAoalJbAhN@even-i700>
 <CAB28Ash3ScVQ+T-YpuhihiKp7qkYHuoOYdvSHByRRV3TvqZbFg@mail.gmail.com>
Message-ID: <21532788.U59uNm2VTq@even-i700>

> Related question: do you think the EPSG registry should include some
> kind of numerical "preference ranking" field to allow for better
> selection in ambiguous cases? Are you aware if this has ever been
> discussed before?

I believe nobody (maintaining a geodetic database) wants to go into that 
business of saying what is prefered or not. This depends on too many factors, 
and this would make the maintenance of the database even more complicated (I'd 
say that I have to notify IOGP about issues found by the PROJ import script 
for half of the recent EPSG releases). Furthermore, accuracy values in EPSG 
for a transformation involving the generic WGS 84 CRS are generally derived 
from accuracies of other transformations between plate-fixed CRS, and adding 1 
or 2 m to it to reflect the accuracy of the WGS 84 datum ensemble.

Even

-- 
http://www.spatialys.com

From Jochem.Lesparre at kadaster.nl  Thu Feb 11 02:52:10 2021
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Thu, 11 Feb 2021 10:52:10 +0000
Subject: [PROJ] How to do Helmert transformation with +exact option in
 QGIS?
In-Reply-To: <4497487.NiNIYYMj0d@even-i700>
References: <AM0P192MB04823964FF6CA9C6A645603EEFB09@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <4497487.NiNIYYMj0d@even-i700>
Message-ID: <AM0P192MB0482654D1EC65C4B3B8ED322EF8C9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Even wrote:
> In the mean time, I've implemented something that enables to embed an arbitrary PROJ string pipeline in a BoundCRS:
https://github.com/OSGeo/PROJ/pull/2521 Of course that will not be interoperable outside of PROJ.

Thanks! I will probably ask EPSG to include de exact Helmert as transformation method when I ask them to include the CRS with the large rotation angles. But it will probably take a long time before this is available in QGIS. The new feature you have implemented will probably be available sooner, so it is very useful for solving my problem (and for all kind of other future applications). In which PROJ version will this new feature become available?

It will take some extra time before that PROJ version will be available in QGIS, so I still need a workaround for the mean time. I created a hgridshift file (with just 4 points at medium height) and that works good enough as workaround for now (typical horizontal error of 2 cm with a maximum of 7 cm).

Regards, Jochem




Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
dit direct te melden aan de verzender en het bericht te vernietigen.
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent
of the Kadaster is unlawful. If you have received this message, but are not the addressee,
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message.

From Jochem.Lesparre at kadaster.nl  Thu Feb 11 03:16:47 2021
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Thu, 11 Feb 2021 11:16:47 +0000
Subject: [PROJ] Tie breakers used when ordering candidate operations
In-Reply-To: <21532788.U59uNm2VTq@even-i700>
References: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>
 <3712514.cAoalJbAhN@even-i700>
 <CAB28Ash3ScVQ+T-YpuhihiKp7qkYHuoOYdvSHByRRV3TvqZbFg@mail.gmail.com>
 <21532788.U59uNm2VTq@even-i700>
Message-ID: <AM0P192MB0482E50B54439441B2BE8F70EF8C9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

I didn't study the current way of finding the best transformation between to CRSs. So if I say something stupid, please excuse me.

Instead of a "preference ranking", would it be an option to introduce an "official flag" for transformations defined by the official agency for that CRS? Since most agencies defining a CRS will publish an official transformation of their CRS to a CRS one level higher in the CRS hierarchy: ITRS - ETRS89 - national_CRS - local_CRS. With a flag to recognise these official transformations, the shortest route in the hierarchical tree can be found. This won't work for all CRS, but if a route in the hierarchical tree can be found, it will often be a good choice for the transformation.

Regards, Jochem



Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
dit direct te melden aan de verzender en het bericht te vernietigen.
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent
of the Kadaster is unlawful. If you have received this message, but are not the addressee,
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message.

From nyall.dawson at gmail.com  Thu Feb 11 14:47:07 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 12 Feb 2021 08:47:07 +1000
Subject: [PROJ] Tie breakers used when ordering candidate operations
In-Reply-To: <21532788.U59uNm2VTq@even-i700>
References: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>
 <3712514.cAoalJbAhN@even-i700>
 <CAB28Ash3ScVQ+T-YpuhihiKp7qkYHuoOYdvSHByRRV3TvqZbFg@mail.gmail.com>
 <21532788.U59uNm2VTq@even-i700>
Message-ID: <CAB28Asg-OVxfrGbftQ9WFWYKJT9PESd2Mudvib1__LCt_=fjgg@mail.gmail.com>

On Thu, 11 Feb 2021 at 20:02, Even Rouault <even.rouault at spatialys.com> wrote:
>
> > Related question: do you think the EPSG registry should include some
> > kind of numerical "preference ranking" field to allow for better
> > selection in ambiguous cases? Are you aware if this has ever been
> > discussed before?
>
> I believe nobody (maintaining a geodetic database) wants to go into that
> business of saying what is prefered or not.

Well - as background I've been asked by ICSM (Australia) what's
required to get proj's ordering of the operations for conversion of
EPSG:4326 to 4283.

Proj master:
4326 <-> 4283
1. EPSG:9688, GDA94 to WGS 84 (2), 3.0 m, Australia including Lord
Howe Island, Macquarie Islands, Ashmore and Cartier Islands, Christmas
Island, Cocos (Keeling) Islands, Norfolk Island. All onshore and
offshore.
2. EPSG:1150, GDA94 to WGS 84 (1), 3.0 m, Australia including Lord
Howe Island, Macquarie Islands, Ashmore and Cartier Islands, Christmas
Island, Cocos (Keeling) Islands, Norfolk Island. All onshore and
offshore.
3. DERIVED_FROM(EPSG):9689, GDA94 to WGS 84 (3), 3.0 m, Australia -
Australian Capital Territory; New South Wales; Northern Territory;
Queensland; South Australia; Tasmania; Western Australia; Victoria.

Officially recommended by ICSM:
9688 (7P) highest priority > 9689 (NTv2) > 1150 (Null)

ie. ideally operations 2 and 3 would be flipped in proj's sorted list
to match with ICSM's recommendations

To clarify -- there's no bug in proj here, and proj's candidate
ordering is giving the expected results. It's just that they'd like to
know what they could do to get the ordering given by proj to match
their recommendations.

That's why I was wondering about some free-form way to influence the
ordering for tie-breakers...


> This depends on too many factors,
> and this would make the maintenance of the database even more complicated (I'd
> say that I have to notify IOGP about issues found by the PROJ import script
> for half of the recent EPSG releases).

Sounds like IOGP should contract you to update their in-house scripts
and add testing to those :D

Nyall


 Furthermore, accuracy values in EPSG
> for a transformation involving the generic WGS 84 CRS are generally derived
> from accuracies of other transformations between plate-fixed CRS, and adding 1
> or 2 m to it to reflect the accuracy of the WGS 84 datum ensemble.
>
> Even
>
> --
> http://www.spatialys.com

From even.rouault at spatialys.com  Thu Feb 11 15:07:42 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 12 Feb 2021 00:07:42 +0100
Subject: [PROJ] Tie breakers used when ordering candidate operations
In-Reply-To: <CAB28Asg-OVxfrGbftQ9WFWYKJT9PESd2Mudvib1__LCt_=fjgg@mail.gmail.com>
References: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>
 <21532788.U59uNm2VTq@even-i700>
 <CAB28Asg-OVxfrGbftQ9WFWYKJT9PESd2Mudvib1__LCt_=fjgg@mail.gmail.com>
Message-ID: <6529993.X8hQGd2euA@even-i700>

> To clarify -- there's no bug in proj here, and proj's candidate
> ordering is giving the expected results. It's just that they'd like to
> know what they could do to get the ordering given by proj to match
> their recommendations.
> 
> That's why I was wondering about some free-form way to influence the
> ordering for tie-breakers...

The easiest way would be that they declare slightly different accuracies for 
the corresponding EPSG records, like 3.00, 3.01, 3.02, according to the order 
they wish.


-- 
http://www.spatialys.com

From JasonD at TheTranstecGroup.com  Thu Feb 11 16:05:22 2021
From: JasonD at TheTranstecGroup.com (Jason Dick)
Date: Thu, 11 Feb 2021 18:05:22 -0600
Subject: [PROJ] Projection type required for proj_lp_dist
In-Reply-To: <9c437ec2-276f-6f11-8390-a1420fd61de6@TheTranstecGroup.com>
References: <9c437ec2-276f-6f11-8390-a1420fd61de6@TheTranstecGroup.com>
Message-ID: <23c47670-5bb8-d936-6fb9-9ab5fbb9d936@TheTranstecGroup.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210211/1b3520d0/attachment.html>

From gdt at lexort.com  Thu Feb 11 16:19:09 2021
From: gdt at lexort.com (Greg Troxel)
Date: Thu, 11 Feb 2021 19:19:09 -0500
Subject: [PROJ] Tie breakers used when ordering candidate operations
In-Reply-To: <CAB28Asg-OVxfrGbftQ9WFWYKJT9PESd2Mudvib1__LCt_=fjgg@mail.gmail.com>
 (Nyall Dawson's message of "Fri, 12 Feb 2021 08:47:07 +1000")
References: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>
 <3712514.cAoalJbAhN@even-i700>
 <CAB28Ash3ScVQ+T-YpuhihiKp7qkYHuoOYdvSHByRRV3TvqZbFg@mail.gmail.com>
 <21532788.U59uNm2VTq@even-i700>
 <CAB28Asg-OVxfrGbftQ9WFWYKJT9PESd2Mudvib1__LCt_=fjgg@mail.gmail.com>
Message-ID: <rmiwnvew32a.fsf@s1.lexort.com>


Nyall Dawson <nyall.dawson at gmail.com> writes:

> Well - as background I've been asked by ICSM (Australia) what's
> required to get proj's ordering of the operations for conversion of
> EPSG:4326 to 4283.

<wicked cantankerous (as we say in Boston)>

Stepping way back:

1) One bug in EPSG, from my viewpoint, is that they use the declared
accuracies of transforms as provided by the transform publisher.  I
realize that departing from that is hard.  But these are not really
consistent.  EPSG does not intend these accuracies to be compared.  Yet
proj does compare them.  So EPSG probably would see this as a bug in
proj, yet not have a good answer for "is this transform better than the
other transform".

2) WGS84 is a datum ensemble:

  While it's ok to accept data in WGS84, it is in 2020 not ok to produce
  data labeled as WGS84, rather than say WGS84(G7162).

  People talk about WGS84, but there is no accurate way to *access* any
  of the members of the WGS84 ensemble, let alone accessing the
  ensemble.  AIUI, the most accurate way (for a person outside US DoD)
  to access even WGS84(G1762) is via a non-differential (meaning not
  even WAAS) solution of L1/L2C.  If you use WAAS you are then in the
  coordinate systme of the WAAS reference stations, which is really hard
  to understand, but I think it's ITRF2008.  However, ITRF2014 and
  ITRF2008 are very close, ITRF2008 is pretty much the same thing as
  WGS84(G1762), and ITRF2014 can be accessed.
  https://www.unoosa.org/pdf/icg/2016/icg11/wgd/02wgd.pdf

3) The difficult problem here is the TMS spec defaulting to WGS84.  I
have seen TMS data that turns out to actually be in WGS85(G1762)
published by MassGIS that checks at the 10 cm level vs positions in
NAD83(2011) epoch 2010.0 relative to the source imagery's native CRS and
RTK.  I see this as a serious bug and TMS should be amended to specify
some ITRF instead.  Until then, I see TMS as meaning that that data
should be in the realization of WGS84 that is in operational use for
GPS, and definitely not be considered to be in an ensemble.

So, I think people who ask for transforms to WGS84 should be told "That
doesn't really make sense any more; I will assume you mean WGS84(G1762)
which is basically the same as ITRF2014" and then you should use those
transforms instead.

</>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210211/16315cec/attachment.sig>

From Jochem.Lesparre at kadaster.nl  Fri Feb 12 01:03:49 2021
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Fri, 12 Feb 2021 09:03:49 +0000
Subject: [PROJ] Tie breakers used when ordering candidate operations
In-Reply-To: <rmiwnvew32a.fsf@s1.lexort.com>
References: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>
 <3712514.cAoalJbAhN@even-i700>
 <CAB28Ash3ScVQ+T-YpuhihiKp7qkYHuoOYdvSHByRRV3TvqZbFg@mail.gmail.com>
 <21532788.U59uNm2VTq@even-i700>
 <CAB28Asg-OVxfrGbftQ9WFWYKJT9PESd2Mudvib1__LCt_=fjgg@mail.gmail.com>
 <rmiwnvew32a.fsf@s1.lexort.com>
Message-ID: <AM0P192MB0482013903725243E0858B17EF8B9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Greg wrote:
>  People talk about WGS84

Everyone should stop doing that and avoid EPSG:4326 at all times. ITRS is the one official international system, recognised by the UN.


Greg wrote:
> ITRF2008 is pretty much the same thing as WGS84(G1762) ), and ITRF2014

The major difference is that WGS84(G1762) is really messy at centimetre-level. It ignores the tracking station velocities during the year and uses an annual step-wise update (at a random date in January) of tracking station coordinates used to generate ephemeris broadcast message.
https://earth-info.nga.mil/GandG/publications/NGA_STND_0036_1_0_0_WGS84/NGA.STND.0036_1.0.0_WGS84.pdf


Greg wrote:
> So, I think people who ask for transforms to WGS84 should be told "That doesn't really make sense any more; I will assume you mean WGS84(G1762) which is basically the same as ITRF2014" and then you should use those transforms instead.

That is what I am doing all the time, except that I first ask them "Do you really want time-dependent international coordinates? Otherwise, I will assume you mean ETRF2000".


Regards, Jochem


Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
dit direct te melden aan de verzender en het bericht te vernietigen.
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent
of the Kadaster is unlawful. If you have received this message, but are not the addressee,
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message.

From gdt at lexort.com  Fri Feb 12 08:26:09 2021
From: gdt at lexort.com (Greg Troxel)
Date: Fri, 12 Feb 2021 11:26:09 -0500
Subject: [PROJ] Tie breakers used when ordering candidate operations
In-Reply-To: <AM0P192MB0482013903725243E0858B17EF8B9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 (Jochem Lesparre's message of "Fri, 12 Feb 2021 09:03:49 +0000")
References: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>
 <3712514.cAoalJbAhN@even-i700>
 <CAB28Ash3ScVQ+T-YpuhihiKp7qkYHuoOYdvSHByRRV3TvqZbFg@mail.gmail.com>
 <21532788.U59uNm2VTq@even-i700>
 <CAB28Asg-OVxfrGbftQ9WFWYKJT9PESd2Mudvib1__LCt_=fjgg@mail.gmail.com>
 <rmiwnvew32a.fsf@s1.lexort.com>
 <AM0P192MB0482013903725243E0858B17EF8B9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
Message-ID: <rmia6s9uuam.fsf@s1.lexort.com>


"Lesparre, Jochem" <Jochem.Lesparre at kadaster.nl> writes:

> Greg wrote:
>>  People talk about WGS84
>
> Everyone should stop doing that and avoid EPSG:4326 at all times. ITRS
> is the one official international system, recognised by the UN.

That's an entirely different argument, dragging in the UN and hence
poltics :-(

I was trying to make the point that transforming coordinates to WGS84 is
problematic because it is an ensemble -- which is orthogonal to opinions
about which government is preferred.  And, One can view recent WGS84
realizations as esssentially being realizations of ITRS.

> The major difference is that WGS84(G1762) is really messy at
> centimetre-level. It ignores the tracking station velocities during
> the year and uses an annual step-wise update (at a random date in
> January) of tracking station coordinates used to generate ephemeris
> broadcast message.
> https://earth-info.nga.mil/GandG/publications/NGA_STND_0036_1_0_0_WGS84/NGA.STND.0036_1.0.0_WGS84.pdf

Interesting point that I had previously missed, but given that there is
no way to access WGS84(G1762) at anywhere near a cm, that's basically a
rounding error that has been operationally accepted.  If all the people
trying to use WGS84 had as their biggest problem this several cm of
fuzz, we'd be in a far better place.

As I read that, it's not WGS84(G1762) that has a stepwise change, but
rather that GPS itself adopts new station coordinates once a year, and
ignores the difference between reference epcoh coordinates and current
coordinates over the year.

> That is what I am doing all the time, except that I first ask them "Do
> you really want time-dependent international coordinates? Otherwise, I
> will assume you mean ETRF2000".

I don't see why WGS84(G1762) has a different time-dependent story than
ITRF2014.

The problem is that for global datasets (e.g. OSM), and TMS, there is a
need for a single CRS.  I don't see that everyone can be told to use a
regional/national crust-fixed frame, especially as that reduces but does
eliminate the problem -- stations are me have non-zero (albeit much
smaller) velocities even in NAD83.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210212/9a85b554/attachment.sig>

From Jochem.Lesparre at kadaster.nl  Fri Feb 12 16:52:05 2021
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Sat, 13 Feb 2021 00:52:05 +0000
Subject: [PROJ] Tie breakers used when ordering candidate operations
In-Reply-To: <rmia6s9uuam.fsf@s1.lexort.com>
References: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>
 <3712514.cAoalJbAhN@even-i700>
 <CAB28Ash3ScVQ+T-YpuhihiKp7qkYHuoOYdvSHByRRV3TvqZbFg@mail.gmail.com>
 <21532788.U59uNm2VTq@even-i700>
 <CAB28Asg-OVxfrGbftQ9WFWYKJT9PESd2Mudvib1__LCt_=fjgg@mail.gmail.com>
 <rmiwnvew32a.fsf@s1.lexort.com>
 <AM0P192MB0482013903725243E0858B17EF8B9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>,
 <rmia6s9uuam.fsf@s1.lexort.com>
Message-ID: <AM0P192MB0482C8937AF3CBBD78BF4D47EF8A9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Greg wrote:
> dragging in the UN and hence poltics

I agree with you that the use of an ensemble is by far the most problematic aspect of the label WGS84. However, if we try to teach people to use another label, we should use the opportunity to stress that WGS84(G1672) is the reference frame of just one of the GNSS in the world, owned by a specific country. Not the best, nor the worst. If you want to avoid politics, it is better to use a neutral reference frame. So use ITRF2014, not because the UN recommends it, but because it is the most neutral choice.

Kind regards, Jochem



Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
dit direct te melden aan de verzender en het bericht te vernietigen.
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent
of the Kadaster is unlawful. If you have received this message, but are not the addressee,
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210213/41e404a5/attachment.html>

From Jochem.Lesparre at kadaster.nl  Fri Feb 12 17:05:04 2021
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Sat, 13 Feb 2021 01:05:04 +0000
Subject: [PROJ] Tie breakers used when ordering candidate operations
In-Reply-To: <AM0P192MB0482C8937AF3CBBD78BF4D47EF8A9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
References: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>
 <3712514.cAoalJbAhN@even-i700>
 <CAB28Ash3ScVQ+T-YpuhihiKp7qkYHuoOYdvSHByRRV3TvqZbFg@mail.gmail.com>
 <21532788.U59uNm2VTq@even-i700>
 <CAB28Asg-OVxfrGbftQ9WFWYKJT9PESd2Mudvib1__LCt_=fjgg@mail.gmail.com>
 <rmiwnvew32a.fsf@s1.lexort.com>
 <AM0P192MB0482013903725243E0858B17EF8B9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>,
 <rmia6s9uuam.fsf@s1.lexort.com>,
 <AM0P192MB0482C8937AF3CBBD78BF4D47EF8A9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
Message-ID: <AM0P192MB048208834D8D5B34D4676D22EF8A9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

PS: How to get people aware that coordinates are time-depentent is an interesting other problem. As long as there is still little software that enables people to deal with time-depentent coordinates, recommending plate-fixed refrence frame is an easy temporary solution for some applications.


Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
dit direct te melden aan de verzender en het bericht te vernietigen.
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent
of the Kadaster is unlawful. If you have received this message, but are not the addressee,
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210213/a1c40361/attachment.html>

From brian.shaw at noaa.gov  Tue Feb 16 16:02:32 2021
From: brian.shaw at noaa.gov (Brian Shaw)
Date: Tue, 16 Feb 2021 17:02:32 -0700
Subject: [PROJ] Tie breakers used when ordering candidate operations
In-Reply-To: <AM0P192MB0482013903725243E0858B17EF8B9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
References: <CAB28AsiHdD3hENPKarkCgDR6mvG-7N0fK3C35FU_wjAidT2xWA@mail.gmail.com>
 <3712514.cAoalJbAhN@even-i700>
 <CAB28Ash3ScVQ+T-YpuhihiKp7qkYHuoOYdvSHByRRV3TvqZbFg@mail.gmail.com>
 <21532788.U59uNm2VTq@even-i700>
 <CAB28Asg-OVxfrGbftQ9WFWYKJT9PESd2Mudvib1__LCt_=fjgg@mail.gmail.com>
 <rmiwnvew32a.fsf@s1.lexort.com>
 <AM0P192MB0482013903725243E0858B17EF8B9@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
Message-ID: <1a88d5eb-2621-20a8-d827-5f3614f2423e@noaa.gov>

All

There have been many discussions here and at NGS about WGS84 and how it 
should or should not be used.? While it is not published yet there is a 
paper that is close to being published about WGS84 that is coauthored by 
an NGS Geodesist Michael Dennis and Esri Geodesist Kevin Kelly.? It 
discusses all of the versions of WGS84 and their relationships to ITRF 
that NGA says are roughly equivalent.

One reason for recommending people use ITRF over WGS84 is that WGS84 
only uses 16 tracking stations for the global solution where ITRF2014 
used 884 GNSS sites, 124 VLBI sites, 96 SLR sites and 71 DORIS sites 
(according to these slides 
https://www.iau.org/static/science/scientific_bodies/divisions/a/2018/Altamimi.pdf).

When I was talking with our Chief Geodesist about WGS84 he summed it up 
( to the best of my memory for 2-3 years ago ) that WGS84 should/can be 
used for navigation but should not be used for positioning (unless you 
have military receivers).? WGS84's 2-3 meters of uncertainty is fine 
while you are moving in a vehicle but not for determining coordinates at 
a specific location unless that uncertainty works for your needs.

Ill make sure to email the PROJ list when this is published.

Cheers
Brian


On 2/12/2021 2:03 AM, Lesparre, Jochem via PROJ wrote:
> Greg wrote:
>>   People talk about WGS84
> Everyone should stop doing that and avoid EPSG:4326 at all times. ITRS is the one official international system, recognised by the UN.
>
>
> Greg wrote:
>> ITRF2008 is pretty much the same thing as WGS84(G1762) ), and ITRF2014
> The major difference is that WGS84(G1762) is really messy at centimetre-level. It ignores the tracking station velocities during the year and uses an annual step-wise update (at a random date in January) of tracking station coordinates used to generate ephemeris broadcast message.
> https://earth-info.nga.mil/GandG/publications/NGA_STND_0036_1_0_0_WGS84/NGA.STND.0036_1.0.0_WGS84.pdf
>
>
> Greg wrote:
>> So, I think people who ask for transforms to WGS84 should be told "That doesn't really make sense any more; I will assume you mean WGS84(G1762) which is basically the same as ITRF2014" and then you should use those transforms instead.
> That is what I am doing all the time, except that I first ask them "Do you really want time-dependent international coordinates? Otherwise, I will assume you mean ETRF2000".
>
>
> Regards, Jochem
>
>
> Disclaimer:
> De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
> Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
> is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
> dit direct te melden aan de verzender en het bericht te vernietigen.
> Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.
>
> Disclaimer:
> The content of this message is meant to be received by the addressee only.
> Use of the content of this message by anyone other than the addressee without the consent
> of the Kadaster is unlawful. If you have received this message, but are not the addressee,
> please contact the sender immediately and destroy the message.
> No rights can be derived from the content of this message.
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
*************************************
Brian Shaw
Rocky Mountain Regional Advisor (CO, MT, WY)
NOAA's National Geodetic Survey (NGS)
Cell Phone # 240-988-6363


From Roger.Bivand at nhh.no  Thu Feb 18 00:59:35 2021
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 18 Feb 2021 09:59:35 +0100
Subject: [PROJ] PROJ 8
Message-ID: <db0a5d2-a761-f222-cdb4-46d0299e965b@reclus.nhh.no>

Could I please ask for dates for alpha/beta/RC for PROJ 8? Should we 
anticipate 1 March (in roughly 10 days) as before, or is there another 
timmetable? 10 days is a bit tight for downstream to adapt code if 
necessary. Is the current state of the main branch what should be expected 
as alpha?

Roger

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From kreve at sdfe.dk  Thu Feb 18 01:50:37 2021
From: kreve at sdfe.dk (Kristian Evers)
Date: Thu, 18 Feb 2021 09:50:37 +0000
Subject: [PROJ] PROJ 8
In-Reply-To: <db0a5d2-a761-f222-cdb4-46d0299e965b@reclus.nhh.no>
References: <db0a5d2-a761-f222-cdb4-46d0299e965b@reclus.nhh.no>
Message-ID: <12268090dd964f238eaf2dec0902f3e1@sdfe.dk>

Roger,

The release is scheduled for March 1st and I will put out a release candidate within the next 2 or 3 days. As usual. 

The schedule for upcoming release can be found here https://github.com/OSGeo/PROJ/milestones. I will add the next years' worth of releases soon, but generally we do bi-monthly  releases with alternating patch and minor version releases. Release candidates go out roughly a week before the release. We don't do alpha or beta versions. For that you will have to track changes in master. You probably already knew that.

The major change this time is the removal of proj_api.h. This has been announced well in advance so I don't think a larger time gap between RC and final release will make any difference if downstream projects haven't adapted yet.

I don't anticipate any major issues with the upcoming release but since this is a major version bump there is always a risk. I would expect any problems to be related to changes in the autotools/CMake setups, those are usually found quickly by the packagers and easily resolved. In case something larger surfaces we can postpone the final release until that is taken care of.

On a related note, if someone out there should be eager to take on the role of release manager for PROJ I am happy to hand over that responsibility. It is definitely possible to run a tighter ship, unfortunately I just haven't got the available time for that.

Best,
Kristian

> -----Original Message-----
> From: PROJ <proj-bounces at lists.osgeo.org> On Behalf Of Roger Bivand
> Sent: 18. februar 2021 10:00
> To: PROJ <proj at lists.osgeo.org>
> Subject: [PROJ] PROJ 8
> 
> Could I please ask for dates for alpha/beta/RC for PROJ 8? Should we
> anticipate 1 March (in roughly 10 days) as before, or is there another
> timmetable? 10 days is a bit tight for downstream to adapt code if
> necessary. Is the current state of the main branch what should be expected
> as alpha?
> 
> Roger
> 
> --
> Roger Bivand
> Department of Economics, Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
> https://orcid.org/0000-0003-2392-6140
> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

From Roger.Bivand at nhh.no  Thu Feb 18 02:33:17 2021
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 18 Feb 2021 11:33:17 +0100
Subject: [PROJ] PROJ 8
In-Reply-To: <12268090dd964f238eaf2dec0902f3e1@sdfe.dk>
References: <db0a5d2-a761-f222-cdb4-46d0299e965b@reclus.nhh.no>
 <12268090dd964f238eaf2dec0902f3e1@sdfe.dk>
Message-ID: <95acb41d-be85-7184-9c96-735251bd2e92@reclus.nhh.no>

Thanks, Kristian!

On Thu, 18 Feb 2021, Kristian Evers wrote:

> Roger,
>
> The release is scheduled for March 1st and I will put out a release 
> candidate within the next 2 or 3 days. As usual.
>

Good.

> The schedule for upcoming release can be found here 
> https://github.com/OSGeo/PROJ/milestones. I will add the next years' 
> worth of releases soon, but generally we do bi-monthly releases with 
> alternating patch and minor version releases. Release candidates go out 
> roughly a week before the release. We don't do alpha or beta versions. 
> For that you will have to track changes in master. You probably already 
> knew that.
>

Yes.

> The major change this time is the removal of proj_api.h. This has been 
> announced well in advance so I don't think a larger time gap between RC 
> and final release will make any difference if downstream projects 
> haven't adapted yet.
>

Right, R packages are OK and condition on PROJ version (the Solaris test 
platform is stuck at 5.2.0).

> I don't anticipate any major issues with the upcoming release but since 
> this is a major version bump there is always a risk. I would expect any 
> problems to be related to changes in the autotools/CMake setups, those 
> are usually found quickly by the packagers and easily resolved. In case 
> something larger surfaces we can postpone the final release until that 
> is taken care of.
>
> On a related note, if someone out there should be eager to take on the 
> role of release manager for PROJ I am happy to hand over that 
> responsibility. It is definitely possible to run a tighter ship, 
> unfortunately I just haven't got the available time for that.

I understand; other important components are in the same position. I 
think, however, that the introuction of pipelines, the transition to an 
SQL database, and the availability of the CDN have moved PROJ to a much 
better position. Thanks very much for having really made a difference!

Roger

>
> Best,
> Kristian
>
>> -----Original Message-----
>> From: PROJ <proj-bounces at lists.osgeo.org> On Behalf Of Roger Bivand
>> Sent: 18. februar 2021 10:00
>> To: PROJ <proj at lists.osgeo.org>
>> Subject: [PROJ] PROJ 8
>>
>> Could I please ask for dates for alpha/beta/RC for PROJ 8? Should we
>> anticipate 1 March (in roughly 10 days) as before, or is there another
>> timmetable? 10 days is a bit tight for downstream to adapt code if
>> necessary. Is the current state of the main branch what should be expected
>> as alpha?
>>
>> Roger
>>
>> --
>> Roger Bivand
>> Department of Economics, Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
>> https://orcid.org/0000-0003-2392-6140
>> https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en
>> _______________________________________________
>> PROJ mailing list
>> PROJ at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/proj
>

-- 
Roger Bivand
Department of Economics, Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; e-mail: Roger.Bivand at nhh.no
https://orcid.org/0000-0003-2392-6140
https://scholar.google.no/citations?user=AWeghB0AAAAJ&hl=en

From kristianevers at gmail.com  Sat Feb 20 05:24:45 2021
From: kristianevers at gmail.com (Kristian Evers)
Date: Sat, 20 Feb 2021 14:24:45 +0100
Subject: [PROJ] PROJ 8.0.0RC1 and PROJ-data 1.5RC1
Message-ID: <7C5FEB24-89C8-4D24-B66F-04C0A1C57BD0@gmail.com>

All,

I have just uploaded releases candiates for the upcoming releases of PROJ 8.0.0 and PROJ-data 1.5.

The PROJ release candidate is includes various improvements, a few bug fixes and most notably
it *doesn?t* include the proj_api.h header. See the draft release notes below.

The PROJ-data packages includes new grids for the Norwegian NN1954 and NN2000 height systems
as well as NODATA fixes to dk_sdfe_dnn.tif and no_kv_HREF2018B_NN2000_EUREF89.tif.

Download the two release candidates here:

http://download.osgeo.org/proj/proj-8.0.0RC1.tar.gz
http://download.osgeo.org/proj/proj-8.0.0RC1.zip

http://download.osgeo.org/proj/proj-data-1.5RC1.tar.gz
http://download.osgeo.org/proj/proj-data-1.5RC1.zip

As usual everyone who uses PROJ is encouraged to try out the release candidates and report
back their experiences either here on the mailing list or in the issue tracker on GitHub.

/Kristian


????????

8.0.0 Release Notes
-------------------

With the release of PROJ 8 the proj_api.h API is finally removed. See
https://proj.org/development/migration.html for more info on how to migrate
from the old to the proj.h API.

With the removal of proj_api.h it has been possible to simplify error codes
and messages given by the software. The error codes are exposed in the API.

Several improvements has been made to the command line utilities as well as
tweaks in the underlying API.

 Updates
 -------

 o Public header file proj_api.h removed (#837)

 o Improved accuracy of the Mercator projection (#2397)

 o Copyright statement wording updated (#2417)

 o Allow cct to instantiate operations via object codes or names (#2419)

 o Allow @filename syntax in cct (#2420)

 o Added geocentric->topocentric conversion (+proj=topocentric) (#2444)

 o Update GeographicLib to version 1.51 (#2445)

 o Added option to allow export of Geographic/Projected 3D CRS
   in WKT1_GDAL (#2450)

 o Added --area and --bbox options in cs2cs to restrict candidate
   coordinate operations (#2466)

 o Added build time option to make PROJ_LIB env var tested last (#2476)

 o Added --authority switch in cs2cs to control where coordinate operations
   are looked for. C API function proj_create_crs_to_crs_from_pj() updated
   accordingly (#2477)

 o Error codes revised and exposed in the public API (#2487)

 o Added --accuracy options to projinfo. C API function
   proj_create_crs_to_crs_from_pj() updated accordingly (#2488)

 o Added proj_crs_is_derived() function to C API (#2496)

 o Enabled linking against static cURL on Windows (#2514)

 o Updated ESRI CRS database to 12.7 (10.8.1/2.6) (#2519)

 o Allow a WKT BoundCRS to use a PROJ string transformation (#2521)

 o Update to EPSG v10.015 (#2539)

 o Default log level set to PJ_LOG_ERROR #2542)

 Bug fixes
 ---------

 o Do not restrict longitude to [-90;90] range in spherical transver Mercator
   forward projection (#2471)

 o createOperations(): fix Compound to Geog3D/Projected3D CRS with non-metre ellipsoidal height (#2500)

 o Avoid error messages to be emitted log level is set to PJ_LOG_NONE (#2527)

 o Close database connection when autoclose set to True (#2532)


From a.furieri at lqt.it  Sat Feb 20 13:33:32 2021
From: a.furieri at lqt.it (a.furieri at lqt.it)
Date: Sat, 20 Feb 2021 22:33:32 +0100
Subject: [PROJ] PROJ 8.0.0RC1 and PROJ-data 1.5RC1
In-Reply-To: <7C5FEB24-89C8-4D24-B66F-04C0A1C57BD0@gmail.com>
References: <7C5FEB24-89C8-4D24-B66F-04C0A1C57BD0@gmail.com>
Message-ID: <d8dda931e5cca44120ca22c2fbaff160@lqt.it>

On Sat, 20 Feb 2021 14:24:45 +0100, Kristian Evers wrote:
> As usual everyone who uses PROJ is encouraged to try out the release
> candidates and report
> back their experiences either here on the mailing list or in the
> issue tracker on GitHub.
>

Hi Kristian,

all is well for what concerns SpatiaLite, on both Linux and
Windows mingw.
I've absolutely nothing to report about 8.0.0-RC1, building
and  testing was absolutely smooth and without any problem
whatsoever. for me it seems ready for final delivery.

bye Sandro

From sebastic at xs4all.nl  Sat Feb 20 23:18:15 2021
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Sun, 21 Feb 2021 08:18:15 +0100
Subject: [PROJ] PROJ 8.0.0RC1 and PROJ-data 1.5RC1
In-Reply-To: <7C5FEB24-89C8-4D24-B66F-04C0A1C57BD0@gmail.com>
References: <7C5FEB24-89C8-4D24-B66F-04C0A1C57BD0@gmail.com>
Message-ID: <7e91c832-334a-c561-3334-4d5d038ec170@xs4all.nl>

On 2/20/21 2:24 PM, Kristian Evers wrote:
> As usual everyone who uses PROJ is encouraged to try out the release candidates and report
> back their experiences either here on the mailing list or in the issue tracker on GitHub.
libgeotiff needs an update:

make[3]: Entering directory '/build/libgeotiff-1.6.0/test'
../test/testlistgeo ../bin/listgeo
============================================
Running ../test/testlistgeo using ../bin/listgeo:
============================================
proj_create: unrecognized format / unknown name
proj_create: unrecognized format / unknown name
proj_create: unrecognized format / unknown name
proj_create: unrecognized format / unknown name
proj_create: unrecognized format / unknown name
proj_create: unrecognized format / unknown name
proj_create: unrecognized format / unknown name
proj_create: unrecognized format / unknown name
proj_create: unrecognized format / unknown name
proj_create: unrecognized format / unknown name
diff testlistgeo_out with testlistgeo_out.dist
--- testlistgeo_out     2021-02-21 07:01:34.961336363 +0000
+++ testlistgeo_out.dist.tmp    2021-02-21 07:01:34.957336392 +0000
@@ -1566,6 +1566,9 @@
    ProjFalseEastingGeoKey: 649328.000000 m
    ProjFalseNorthingGeoKey: 665262.000000 m
 GCS: 4258/ETRS89
+Datum: 6258/European Terrestrial Reference System 1989
+Ellipsoid: 7019/GRS 1980 (6378137.00,6356752.31)
+Prime Meridian: 8901/Greenwich (0.000000/  0d 0' 0.00"E)
 Projection Linear Units: 9001/metre (1.000000m)

 Corner Coordinates:
@@ -1616,6 +1619,9 @@
    ProjFalseEastingGeoKey: 649328.000000 m
    ProjFalseNorthingGeoKey: 665262.000000 m
 GCS: 4258/ETRS89
+Datum: 6258/European Terrestrial Reference System 1989
+Ellipsoid: 7019/GRS 1980 (6378137.00,6356752.31)
+Prime Meridian: 8901/Greenwich (0.000000/  0d 0' 0.00"E)
 Projection Linear Units: 9001/metre (1.000000m)

 Corner Coordinates:
@@ -1744,6 +1750,9 @@
    ProjFalseEastingGeoKey: 4321000.000000 m
    ProjFalseNorthingGeoKey: 3210000.000000 m
 GCS: 4258/ETRS89
+Datum: 6258/European Terrestrial Reference System 1989
+Ellipsoid: 7019/GRS 1980 (6378137.00,6356752.31)
+Prime Meridian: 8901/Greenwich (0.000000/  0d 0' 0.00"E)
 Projection Linear Units: 9001/metre (1.000000m)

 Corner Coordinates:
@@ -1790,6 +1799,9 @@
    ProjFalseEastingGeoKey: 4321000.000000 m
    ProjFalseNorthingGeoKey: 3210000.000000 m
 GCS: 4258/ETRS89
+Datum: 6258/European Terrestrial Reference System 1989
+Ellipsoid: 7019/GRS 1980 (6378137.00,6356752.31)
+Prime Meridian: 8901/Greenwich (0.000000/  0d 0' 0.00"E)
 Projection Linear Units: 9001/metre (1.000000m)

 Corner Coordinates:

PROBLEMS HAVE OCCURRED
test file testlistgeo_out saved

make[3]: *** [Makefile:540: check-local] Error 100
make[3]: Leaving directory '/build/libgeotiff-1.6.0/test'


Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From even.rouault at spatialys.com  Sun Feb 21 04:34:43 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 21 Feb 2021 13:34:43 +0100
Subject: [PROJ] PROJ 8.0.0RC1 and PROJ-data 1.5RC1
In-Reply-To: <7e91c832-334a-c561-3334-4d5d038ec170@xs4all.nl>
References: <7C5FEB24-89C8-4D24-B66F-04C0A1C57BD0@gmail.com>
 <7e91c832-334a-c561-3334-4d5d038ec170@xs4all.nl>
Message-ID: <52081184.x7fVqSXyYt@even-i700>

On dimanche 21 f?vrier 2021 08:18:15 CET Sebastiaan Couwenberg wrote:
> On 2/20/21 2:24 PM, Kristian Evers wrote:
> > As usual everyone who uses PROJ is encouraged to try out the release
> > candidates and report back their experiences either here on the mailing
> > list or in the issue tracker on GitHub.
> libgeotiff needs an update:

libgeotiff update has been committed in libgeotiff master:
https://github.com/OSGeo/libgeotiff/commit/622a4b2ac416d5907fe00025ace50f31729e55ed

Even

-- 
http://www.spatialys.com

From sebastic at xs4all.nl  Mon Feb 22 05:05:25 2021
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Mon, 22 Feb 2021 14:05:25 +0100
Subject: [PROJ] PROJ 8.0.0RC1 and PROJ-data 1.5RC1
In-Reply-To: <7C5FEB24-89C8-4D24-B66F-04C0A1C57BD0@gmail.com>
References: <7C5FEB24-89C8-4D24-B66F-04C0A1C57BD0@gmail.com>
Message-ID: <64f4497a-0fbc-e6fc-21fc-4dcb5aa59f7c@xs4all.nl>

On 2/20/21 2:24 PM, Kristian Evers wrote:
> As usual everyone who uses PROJ is encouraged to try out the release candidates and report
> back their experiences either here on the mailing list or in the issue tracker on GitHub.

All the packages in Debian have been rebuilt with PROJ 8.0.0RC1, see:

 https://lists.debian.org/debian-gis/2021/02/msg00006.html

Quite a lot of failures due to projects still using proj_api.h, as can
also be seen on:

 https://github.com/OSGeo/PROJ/wiki/proj.h-adoption-status

There are also some projects that do support proj.h like QGIS & PostGIS,
but their build system still assumes that proj_api.h is always present
and fails when it isn't.

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From jmckenna at gatewaygeomatics.com  Mon Feb 22 10:57:49 2021
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon, 22 Feb 2021 14:57:49 -0400
Subject: [PROJ] PROJ 8.0.0RC1 and PROJ-data 1.5RC1
In-Reply-To: <7C5FEB24-89C8-4D24-B66F-04C0A1C57BD0@gmail.com>
References: <7C5FEB24-89C8-4D24-B66F-04C0A1C57BD0@gmail.com>
Message-ID: <50f41752-068c-ef06-9c31-dfec43551c77@gatewaygeomatics.com>

Hi Kristian, all,

I've been testing locally with RC1, so far so good with Visual Studio on 
Windows.  (with GDAL3, MapServer-dev, libgeotiff-master, 
libspatialite-5.0.1, etc.)

Will continue to play with it...

-jeff




-- 
Jeff McKenna
GatewayGeo: MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/



On 2021-02-20 9:24 a.m., Kristian Evers wrote:
> All,
> 
> I have just uploaded releases candiates for the upcoming releases of PROJ 8.0.0 and PROJ-data 1.5.
> 
> The PROJ release candidate is includes various improvements, a few bug fixes and most notably
> it *doesn?t* include the proj_api.h header. See the draft release notes below.
> 
> The PROJ-data packages includes new grids for the Norwegian NN1954 and NN2000 height systems
> as well as NODATA fixes to dk_sdfe_dnn.tif and no_kv_HREF2018B_NN2000_EUREF89.tif.
> 
> Download the two release candidates here:
> 
> http://download.osgeo.org/proj/proj-8.0.0RC1.tar.gz
> http://download.osgeo.org/proj/proj-8.0.0RC1.zip
> 
> http://download.osgeo.org/proj/proj-data-1.5RC1.tar.gz
> http://download.osgeo.org/proj/proj-data-1.5RC1.zip
> 
> As usual everyone who uses PROJ is encouraged to try out the release candidates and report
> back their experiences either here on the mailing list or in the issue tracker on GitHub.
> 
> /Kristian
> 
> 
> ????????
> 
> 8.0.0 Release Notes
> -------------------
> 
> With the release of PROJ 8 the proj_api.h API is finally removed. See
> https://proj.org/development/migration.html for more info on how to migrate
> from the old to the proj.h API.
> 
> With the removal of proj_api.h it has been possible to simplify error codes
> and messages given by the software. The error codes are exposed in the API.
> 
> Several improvements has been made to the command line utilities as well as
> tweaks in the underlying API.
> 
>   Updates
>   -------
> 
>   o Public header file proj_api.h removed (#837)
> 
>   o Improved accuracy of the Mercator projection (#2397)
> 
>   o Copyright statement wording updated (#2417)
> 
>   o Allow cct to instantiate operations via object codes or names (#2419)
> 
>   o Allow @filename syntax in cct (#2420)
> 
>   o Added geocentric->topocentric conversion (+proj=topocentric) (#2444)
> 
>   o Update GeographicLib to version 1.51 (#2445)
> 
>   o Added option to allow export of Geographic/Projected 3D CRS
>     in WKT1_GDAL (#2450)
> 
>   o Added --area and --bbox options in cs2cs to restrict candidate
>     coordinate operations (#2466)
> 
>   o Added build time option to make PROJ_LIB env var tested last (#2476)
> 
>   o Added --authority switch in cs2cs to control where coordinate operations
>     are looked for. C API function proj_create_crs_to_crs_from_pj() updated
>     accordingly (#2477)
> 
>   o Error codes revised and exposed in the public API (#2487)
> 
>   o Added --accuracy options to projinfo. C API function
>     proj_create_crs_to_crs_from_pj() updated accordingly (#2488)
> 
>   o Added proj_crs_is_derived() function to C API (#2496)
> 
>   o Enabled linking against static cURL on Windows (#2514)
> 
>   o Updated ESRI CRS database to 12.7 (10.8.1/2.6) (#2519)
> 
>   o Allow a WKT BoundCRS to use a PROJ string transformation (#2521)
> 
>   o Update to EPSG v10.015 (#2539)
> 
>   o Default log level set to PJ_LOG_ERROR #2542)
> 
>   Bug fixes
>   ---------
> 
>   o Do not restrict longitude to [-90;90] range in spherical transver Mercator
>     forward projection (#2471)
> 
>   o createOperations(): fix Compound to Geog3D/Projected3D CRS with non-metre ellipsoidal height (#2500)
> 
>   o Avoid error messages to be emitted log level is set to PJ_LOG_NONE (#2527)
> 
>   o Close database connection when autoclose set to True (#2532)
> 
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
> 


From rwagle at umich.edu  Tue Feb 23 12:43:05 2021
From: rwagle at umich.edu (Rohan Wagle)
Date: Tue, 23 Feb 2021 15:43:05 -0500
Subject: [PROJ] Question Regarding GPU Acceleration
Message-ID: <CABjYmYRsE1Q+4sQFDsODRuHnEWpU+Z+OQsJi547FAWEP4mnmGw@mail.gmail.com>

Hello everyone,

We are a group of computer engineering graduate students from The
University of Michigan, currently taking a course on parallel computer
architecture (https://www.eecs.umich.edu/courses/eecs570/). As part of our
course?s curriculum, we will be working on an open ended semester-long
project, related to parallel computing. For this project, we are very
interested in contributing code to the Proj codebase to parallelize
computations, using GPU multithreading.

>From our cursory evaluation of Proj?s documentation and git repository, it
appears many of the projections, conversions, and transforms exhibit data
parallelism, presenting an opportunity for acceleration via multithreading.
We explored the codebase and documentation to check if any prior work had
been done in parallelizing Proj modules, which led us to some references to
cpu multithreading, but nothing GPU-based.

We are interested in writing Nvidia CUDA GPU kernels to accelerate certain
modules of Proj. However, we first wanted to check with the Proj community
to see whether anyone is aware of prior efforts in parallelizing Proj
modules with GPU kernels, or could point us towards more information
regarding the previous work with cpu-multithreading. Additionally, does
anyone have recommendations of modules which the community would greatly
benefit from, if GPU support was added?

Thank you,
Alhad Daftardar, Vaanshik Mahindroo, Venkat Vetsa, Rohan Wagle
The University of Michigan - EECS Department
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210223/ca108be1/attachment.html>

From kreve at sdfe.dk  Wed Feb 24 02:11:26 2021
From: kreve at sdfe.dk (Kristian Evers)
Date: Wed, 24 Feb 2021 10:11:26 +0000
Subject: [PROJ] Question Regarding GPU Acceleration
In-Reply-To: <CABjYmYRsE1Q+4sQFDsODRuHnEWpU+Z+OQsJi547FAWEP4mnmGw@mail.gmail.com>
References: <CABjYmYRsE1Q+4sQFDsODRuHnEWpU+Z+OQsJi547FAWEP4mnmGw@mail.gmail.com>
Message-ID: <617c28836acd4ae2bb095b4020c8b1b4@sdfe.dk>

Guys,

Not much has been done in terms of parallelizing the PROJ code. We?ve made it somewhat simple for users of the library to do their own parallelizing by instantiating several PJ transformations objects. I am in no way an expert in parallel computing so take all of this with a grain of salt. My gut feeling is that the biggest gains can be found by parallelizing function suchs a proj_trans_generic() effectively letting the library handle the parallelizing rather than the user of the library. But if you are looking to speed up individual conversions there would certainly be some gains to find as well. For the biggest (user) impact I would look at the Mercator family of projections and the Helmert transformation to start with. Those would be some of the most used parts of the code. There will be other projections where better gains can be had I am sure but I don?t know of the top of my head which ones they are.

Are you considering contributing your work to the project? If so you need to be aware that we generally don?t accept new build dependencies for the library. Such an addition will need an RFC to be approved by the project steering committee and would probably need to be backed by a proof of concept implementation. Don?t worry too much about that just yet, it?s just a heads up in case you are thinking about contributing back to the project.

/Kristian

From: PROJ <proj-bounces at lists.osgeo.org> On Behalf Of Rohan Wagle
Sent: 23. februar 2021 21:43
To: proj at lists.osgeo.org
Subject: [PROJ] Question Regarding GPU Acceleration

Hello everyone,

We are a group of computer engineering graduate students from The University of Michigan, currently taking a course on parallel computer architecture (https://www.eecs.umich.edu/courses/eecs570/). As part of our course?s curriculum, we will be working on an open ended semester-long project, related to parallel computing. For this project, we are very interested in contributing code to the Proj codebase to parallelize computations, using GPU multithreading.

From our cursory evaluation of Proj?s documentation and git repository, it appears many of the projections, conversions, and transforms exhibit data parallelism, presenting an opportunity for acceleration via multithreading. We explored the codebase and documentation to check if any prior work had been done in parallelizing Proj modules, which led us to some references to cpu multithreading, but nothing GPU-based.

We are interested in writing Nvidia CUDA GPU kernels to accelerate certain modules of Proj. However, we first wanted to check with the Proj community to see whether anyone is aware of prior efforts in parallelizing Proj modules with GPU kernels, or could point us towards more information regarding the previous work with cpu-multithreading. Additionally, does anyone have recommendations of modules which the community would greatly benefit from, if GPU support was added?

Thank you,
Alhad Daftardar, Vaanshik Mahindroo, Venkat Vetsa, Rohan Wagle
The University of Michigan - EECS Department
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210224/fc92fca5/attachment.html>

From even.rouault at spatialys.com  Wed Feb 24 02:29:11 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Feb 2021 11:29:11 +0100
Subject: [PROJ] Question Regarding GPU Acceleration
In-Reply-To: <617c28836acd4ae2bb095b4020c8b1b4@sdfe.dk>
References: <CABjYmYRsE1Q+4sQFDsODRuHnEWpU+Z+OQsJi547FAWEP4mnmGw@mail.gmail.com>
 <617c28836acd4ae2bb095b4020c8b1b4@sdfe.dk>
Message-ID: <53824961.T847AxuJdG@even-i700>

On mercredi 24 f?vrier 2021 10:11:26 CET Kristian Evers via PROJ wrote:
> Guys,
> 
> Not much has been done in terms of parallelizing the PROJ code.

See https://lists.osgeo.org/pipermail/proj/2020-April/thread.html#9548 for an 
experiment I did some time ago regarding using SIMD Vector intrinsincs to 
process several points at a time.

Even

-- 
http://www.spatialys.com

From kristianevers at gmail.com  Thu Feb 25 10:46:59 2021
From: kristianevers at gmail.com (Kristian Evers)
Date: Thu, 25 Feb 2021 19:46:59 +0100
Subject: [PROJ] PROJ 8.0.0RC2
Message-ID: <7F3522F7-6CE6-40AB-91FA-04E64FFC6BA1@gmail.com>

All,

Thanks for the feedback on the first release candidate. A few minor issues were
found in 8.0.0RC1 so I?ve uploaded a new release candidate which deals with those.

Get the archives here:

http://download.osgeo.org/proj/proj-8.0.0RC2.tar.gz
http://download.osgeo.org/proj/proj-8.0.0RC2.zip

I hope this will be the last release candidate this time around.

/Kristian

From dave at stellacore.com  Thu Feb 25 11:05:41 2021
From: dave at stellacore.com (Dave Knopp)
Date: Thu, 25 Feb 2021 12:05:41 -0700
Subject: [PROJ] General Geodesy: Lightweight LLA/XYZ Transformation Code
 (C++)
Message-ID: <4c1b0ecb-242a-d218-726b-4892840ad09d@stellacore.com>


RE: specialized geodetic coordinate transformation utility code for s/w
developers.


I recently created a small geodesy code utility for a particular
development need. I found the results very useful for that situation and
thought worth contributing back as open source.

The two fundamental capabilities are already provided within Proj (as
well as OSGeo projects like GeographicLib and indirectly in other
packages). The key distinction of Peridetic is the lightweight package
(only a C++ header file pair) and computation speed with no dependencies
or complexities beyond the language standard.

Info and links below.

Dave


Peridetic -- Lightweight Geodetic LLA/XYZ Transformation Code (C++) --
v1.0.1 available:

	https://github.com/Stellacore/peridetic

Peridetic is an extremely lightweight, easy-to-use and *simple* C++
header file implementation that provides precise, accurate and fast
transformations between Geodetic (lon/lat/alt) from/into Cartesian
(x/y/z) coordinate expressions. (E.g. for converting between Geodetic
locations and GNSS coordinate data). Peridetic provides a "bare-bones"
implementation of *only* these two transformation capabilities without
introducing other overhead into the consuming product development
environments.

In the context of existing OSGeo projects, Peridetic is an extremely
focused specialization of a specific geodetic transformation capability.
E.g. ref "context and alternatives" section of project readme doc:

https://github.com/Stellacore/peridetic#Context-and-Alternatives

###

From kristianevers at gmail.com  Sun Feb 28 02:44:12 2021
From: kristianevers at gmail.com (Kristian Evers)
Date: Sun, 28 Feb 2021 11:44:12 +0100
Subject: [PROJ] Motion: Promote PROJ 8.0.0RC2 and PROJ-data 1.5RC1 to final
Message-ID: <B7D8FB49-3296-4A1E-A043-79AB28D9E6FF@gmail.com>

PSC members,

With the issues found in the first PROJ release candidate fixed and no known issues in the PROJ-data release candidate,
I hereby motion that they be promoted to final.

I?ll start with my +1.

/Kristian


From charles at karney.com  Sun Feb 28 04:07:26 2021
From: charles at karney.com (Charles Karney)
Date: Sun, 28 Feb 2021 12:07:26 +0000
Subject: [PROJ] Motion: Promote PROJ 8.0.0RC2 and PROJ-data 1.5RC1 to
 final
In-Reply-To: <B7D8FB49-3296-4A1E-A043-79AB28D9E6FF@gmail.com>
References: <B7D8FB49-3296-4A1E-A043-79AB28D9E6FF@gmail.com>
Message-ID: <BL0PR1701MB2562E01CAEF2FEEF58E8450FA99B9@BL0PR1701MB2562.namprd17.prod.outlook.com>

+1

?-----Original Message-----
From: PROJ <proj-bounces at lists.osgeo.org> on behalf of Kristian Evers <kristianevers at gmail.com>
Date: Sunday, February 28, 2021 at 5:44 AM
To: PROJ <proj at lists.osgeo.org>
Subject: [PROJ] Motion: Promote PROJ 8.0.0RC2 and PROJ-data 1.5RC1 to final

    PSC members,

    With the issues found in the first PROJ release candidate fixed and no known issues in the PROJ-data release candidate,
    I hereby motion that they be promoted to final.

    I?ll start with my +1.

    /Kristian

    _______________________________________________
    PROJ mailing list
    PROJ at lists.osgeo.org
    https://lists.osgeo.org/mailman/listinfo/proj

From knudsen.thomas at gmail.com  Sun Feb 28 06:42:36 2021
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Sun, 28 Feb 2021 15:42:36 +0100
Subject: [PROJ] Motion: Promote PROJ 8.0.0RC2 and PROJ-data 1.5RC1 to
 final
In-Reply-To: <B7D8FB49-3296-4A1E-A043-79AB28D9E6FF@gmail.com>
References: <B7D8FB49-3296-4A1E-A043-79AB28D9E6FF@gmail.com>
Message-ID: <CAH0YoEMGtvyU4AzRA=sL6JM1Oy583RMtxh=dxjrhq4XvRAFSNQ@mail.gmail.com>

+1

s?n. 28. feb. 2021 11.44 skrev Kristian Evers <kristianevers at gmail.com>:

> PSC members,
>
> With the issues found in the first PROJ release candidate fixed and no
> known issues in the PROJ-data release candidate,
> I hereby motion that they be promoted to final.
>
> I?ll start with my +1.
>
> /Kristian
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210228/0d9d1df9/attachment.html>

From even.rouault at spatialys.com  Sun Feb 28 09:29:04 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 28 Feb 2021 18:29:04 +0100
Subject: [PROJ] Motion: Promote PROJ 8.0.0RC2 and PROJ-data 1.5RC1 to
 final
In-Reply-To: <B7D8FB49-3296-4A1E-A043-79AB28D9E6FF@gmail.com>
References: <B7D8FB49-3296-4A1E-A043-79AB28D9E6FF@gmail.com>
Message-ID: <2207192.ZOBBFu19Gx@even-i700>

On dimanche 28 f?vrier 2021 11:44:12 CET Kristian Evers wrote:
> PSC members,
> 
> With the issues found in the first PROJ release candidate fixed and no known
> issues in the PROJ-data release candidate, I hereby motion that they be
> promoted to final.
> 
> I?ll start with my +1.

+1 Even

-- 
http://www.spatialys.com

From howard at hobu.co  Sun Feb 28 10:17:39 2021
From: howard at hobu.co (Howard Butler)
Date: Sun, 28 Feb 2021 12:17:39 -0600
Subject: [PROJ] Motion: Promote PROJ 8.0.0RC2 and PROJ-data 1.5RC1 to
 final
In-Reply-To: <2207192.ZOBBFu19Gx@even-i700>
References: <2207192.ZOBBFu19Gx@even-i700>
Message-ID: <6563312E-B721-45C2-8133-AB4788554C58@hobu.co>



> On Feb 28, 2021, at 11:29 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> ?On dimanche 28 f?vrier 2021 11:44:12 CET Kristian Evers wrote:
>> PSC members,
>> 
>> With the issues found in the first PROJ release candidate fixed and no known
>> issues in the PROJ-data release candidate, I hereby motion that they be
>> promoted to final.
>> 
>> I?ll start with my +1.
> 
> +1 Even


+1 Howard


