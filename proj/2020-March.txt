From kreve at sdfe.dk  Sun Mar  1 00:24:35 2020
From: kreve at sdfe.dk (Kristian Evers)
Date: Sun, 1 Mar 2020 08:24:35 +0000
Subject: [PROJ] PROJ 7.0.0RC2
In-Reply-To: <CAKyBbG7FbNaMeu26SYnY8k1uZSv26yXQBjOq0kcYHL2dewtFWg@mail.gmail.com>
References: <D5DFB69D-D789-403A-81A3-C6FFB5637A22@sdfe.dk>
 <db776eabd9e846828d4ed9b50e1b13a9@sdfe.dk>
 <CAH0YoEP5=oYuv_djRAHVBZqoNXF4J8GijcJcuD4YJV+BLxUXUQ@mail.gmail.com>
 <CAKyBbG7FbNaMeu26SYnY8k1uZSv26yXQBjOq0kcYHL2dewtFWg@mail.gmail.com>
Message-ID: <49CD6C13-102E-44B6-88EB-35A3BABE5EE9@sdfe.dk>

With +1’s from Even, Thomas, Howard and myself I declare the motion passed.

I’ll announce the release shortly.

/Kristian

On 28 Feb 2020, at 15:38, Howard Butler <howard at hobu.co<mailto:howard at hobu.co>> wrote:

+1

On Fri, Feb 28, 2020 at 5:27 AM Thomas Knudsen <knudsen.thomas at gmail.com<mailto:knudsen.thomas at gmail.com>> wrote:
+1

fre. 28. feb. 2020 10.17 skrev Kristian Evers <kreve at sdfe.dk<mailto:kreve at sdfe.dk>>:
We have not received any feedback on the second release candidates. I take that as
a sign that we’ve taken care of all the immediate issues and that they are ready for
final release.

So, I hereby motion that we promote the following release candidate to their final
versions:

proj-7.0.0RC2
proj-data-1.0RC2
proj-datumgrid-europe-1.6RC1
proj-datumgrid-north-america-1.4RC1
proj-datumgrid-oceania-1.2RC1

I’ll start with my +1

/Kristian


From: PROJ <proj-bounces at lists.osgeo.org<mailto:proj-bounces at lists.osgeo.org>> On Behalf Of Kristian Evers
Sent: 25. februar 2020 20:37
To: PROJ <proj at lists.osgeo.org<mailto:proj at lists.osgeo.org>>
Subject: [PROJ] PROJ 7.0.0RC2

All,

I’ve just uploaded PROJ 7.0.0RC2 and proj-data-1.0.0RC2. All reported issues
should be resolved in the new release candidates. As always, we welcome your
feedback after testing the release candidates. No problems has been reported
with the proj-datumgrid series of release candidates so they are still at RC1.

Download the packages here:

http://download.osgeo.org/proj/proj-7.0.0RC2.tar.gz
http://download.osgeo.org/proj/proj-7.0.0RC2.zip

http://download.osgeo.org/proj/proj-data-1.0RC2.tar.gz
http://download.osgeo.org/proj/proj-data-1.0RC2.zip

It has been highlighted that for builds on computers without internet access
‘make check’ will fail because of missing grid files. If you are building on
such a system we advice to install the now legacy proj-datumgrid-1.8 package,
which can be downloaded here:

http://download.osgeo.org/proj/proj-datumgrid-1.8.tar.gz

If no serious issues are found within the next couple of days I will call for a vote
for promotion to final release on Friday the 28th with the aim of releasing the
final version on March 1st.

/Kristian
_______________________________________________
PROJ mailing list
PROJ at lists.osgeo.org<mailto:PROJ at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/proj
_______________________________________________
PROJ mailing list
PROJ at lists.osgeo.org<mailto:PROJ at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/proj

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200301/3e932b8e/attachment.html>

From kreve at sdfe.dk  Sun Mar  1 02:43:36 2020
From: kreve at sdfe.dk (Kristian Evers)
Date: Sun, 1 Mar 2020 10:43:36 +0000
Subject: [PROJ] PROJ 7.0.0
Message-ID: <D23CCA6E-A265-48F3-BA1E-3752E43A2B17@sdfe.dk>

It is my pleasure to announce new releases of PROJ and related packages.

The major feature in PROJ 7 is significantly improved handling of gridded
models. This was implemented in RFC4 [0]. The main features of the RFC4
work is that PROJ now implements a new grid format, Geodetic TIFF grids,
for exchaning gridded transformation models. In addition to the new grid format,
PROJ can now also access grids online using a data store in the cloud.

The grids that was previously available via the proj-datumgrid packages are now
available in two places:

  1. The new PROJ-data package
  2. From the cloud via https://cdn.proj.org

The PROJ-data package includes all grids and other resources previously tracked
by the proj-datumgrid series of packages as well as some new grids. All grids in the
PROJ-data package have been converted to the new Geodetic Tiff Grid (GTG)
format introduced in PROJ with RFC4. The advantages of the GTG format are 

* Grids can contain more metadata than previous formats used by PROJ
* Grids are compressed, taking up significantly less space
* Cloud optimized, for easy on-the-fly access to grids online via https://cdn.proj.org/
* Advanced gridded models previously consisting of several files can now be
  contained in one file

The data in the PROJ-data package is mirrored on https://cdn.proj.org/. A
network-enabled PROJ build can leverage the CDN and retrieve (parts of) grids as
specific transformations need them on the fly.

PROJ-data can only be used with PROJ 7.0.0 and newer.

Provided with PROJ is a utility called projsync that can be used download grids
from the data store in the cloud.

The use of the new grid format and the data from the cloud requires that
PROJ is build against libtiff and libcurl. Both are optional dependencies
to PROJ but it is highly encouraged that the software is build against both.

PROJ 7.0.0 and the accompanying PROJ-data package can be download here:

http://download.osgeo.org/proj/proj-7.0.0.tar.gz
http://download.osgeo.org/proj/proj-7.0.0.zip

http://download.osgeo.org/proj/proj-data-1.0.tar.gz
http://download.osgeo.org/proj/proj-data-1.0.zip

In addition the PROJ-data package the old proj-datumgrid series of packages
has also been updated, to extend the life-time of the PROJ 6.x branch a bit
longer. These will be the last updates to the proj-datumgrid packages. The
Updated packages can be downloaded here:

http://download.osgeo.org/proj/proj-datumgrid-europe-1.6.tar.gz
http://download.osgeo.org/proj/proj-datumgrid-europe-1.6.zip

http://download.osgeo.org/proj/proj-datumgrid-north-america-1.4.tar.gz
http://download.osgeo.org/proj/proj-datumgrid-north-america-1.4.zip

http://download.osgeo.org/proj/proj-datumgrid-oceania-1.2.tar.gz
http://download.osgeo.org/proj/proj-datumgrid-oceania-1.2.zip


ATTENTION: PROJ 7 will be last major release version that includes the proj_api.h
header. The functionality in proj_api.h is deprecated and only supported in
maintenance mode. It is inferior to the functionality provided by functions
in the proj.h header and all projects still relying on proj_api.h are encouraged
to migrate to the new API in proj.h. See https://proj.org/development/migration.html
for more info on how to migrate from the old to the new API.

[0] https://proj.org/community/rfc/rfc-4.html


——————————————————————————————————————

Release notes


Updates
 -------
 o Added new file access API to proj.h #866

 o Updated the name of the most recent version of the WKT2 standard from
   WKT2_2018 to WKT2_2019 to reflect the proper name of the standard (#1585)

 o Improvements in transformations from/to WGS 84 (Gxxxx) realizations and
   vertical <--> geog transormations #1608

 o Update to version 1.50 of the geodesic library (#1629)

 o Promote proj_assign_context to proj.h from proj_experimental.h (#1630)

 o Add rotation support to the HEALPix projection (#1638)

 o Add c function proj_crs_create_bound_vertical_crs() (#1689)

 o Use Win32 Unicode APIs and expect all strings to be UTF-8 (#1765)

 o Improved name aliases lookup (#1827)

 o CMake: Employ better use of CTest with the BUILD_TESTING option (#1870)

 o Grid correction: fix handling grids spanning antimeridian (#1882)

 o Remove legacy CMake target name "proj" #1883

 o projinfo: add --searchpaths switch (#1892)

 o Add +proj=set operation to set component(s) of a coordinate to a fixed
   value (#1896)

 o Add EPSG records for 'Geocentric translation by Grid Interpolation (IGN)'
   (gr3df97a.txt) and map them to new +proj=xyzgridshift (#1897)

 o Remove 'null' grid file as it is now a special hardcoded case in grid
   code (#1898)

 o Add projsync utility (#1903)

 o Make PROJ the CMake project name #1910

 o Use relative directory to locate PROJ resource files (#1921)


 Bug fixes
 ---------
 
 o Horizontal grid shift: fix failures on points slightly outside a
   subgrid (#209)
 
 o Fix ASAN issue with SQLite3VFS class (#1902)

 o tests: force use of bash for proj_add_test_script_sh (#1905)


 Breaking changes
 ----------------

 o Reject NTV2 files where GS_TYPE != SECONDS #1294

 o On Windows the name of the library is now fixed to ``proj.lib`` instead
   of encoding the version number in the library name (#1581)

 o Require C99 compiler (#1624)

 o Remove deprecated JNI bindings (#1825)

 o Remove -ld option from proj and cs2cs (#1844)

 o Increase CMake minimum version from 3.5 to 3.9 (#1907)


From alansnow21 at gmail.com  Sun Mar  1 06:17:35 2020
From: alansnow21 at gmail.com (Alan Snow)
Date: Sun, 1 Mar 2020 08:17:35 -0600
Subject: [PROJ] 6.3.x release schedule
Message-ID: <CAGybdFRY9VXRHOs7iKzmXpakiEZnPDiVu3dqM7NAGvpUnQ4=_w@mail.gmail.com>

What are the plans for releases for 6.3.x?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200301/8f22927d/attachment.html>

From kristianevers at gmail.com  Sun Mar  1 08:31:17 2020
From: kristianevers at gmail.com (Kristian Evers)
Date: Sun, 1 Mar 2020 17:31:17 +0100
Subject: [PROJ] 6.3.x release schedule
In-Reply-To: <CAGybdFRY9VXRHOs7iKzmXpakiEZnPDiVu3dqM7NAGvpUnQ4=_w@mail.gmail.com>
References: <CAGybdFRY9VXRHOs7iKzmXpakiEZnPDiVu3dqM7NAGvpUnQ4=_w@mail.gmail.com>
Message-ID: <CALECs+eLcd2wKCRvVwYj6mhutiePZDYDrPctQqfpS-dQMQMHDA@mail.gmail.com>

Alan,

There are no immediate plans for further releases of the 6.3.x branch but
we will continue to backport bug fixes for the foreseeable future and will
likely issue a new release alongside 7.0.1. I don't know how long we will
be able to keep that up as backporting will become increasingly difficult
as time goes.

/Kristian


søn. 1. mar. 2020 15.17 skrev Alan Snow <alansnow21 at gmail.com>:

> What are the plans for releases for 6.3.x?
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200301/41dc2f72/attachment.html>

From alansnow21 at gmail.com  Sun Mar  1 12:13:10 2020
From: alansnow21 at gmail.com (Alan Snow)
Date: Sun, 1 Mar 2020 14:13:10 -0600
Subject: [PROJ] 6.3.x release schedule
In-Reply-To: <CALECs+eLcd2wKCRvVwYj6mhutiePZDYDrPctQqfpS-dQMQMHDA@mail.gmail.com>
References: <CAGybdFRY9VXRHOs7iKzmXpakiEZnPDiVu3dqM7NAGvpUnQ4=_w@mail.gmail.com>
 <CALECs+eLcd2wKCRvVwYj6mhutiePZDYDrPctQqfpS-dQMQMHDA@mail.gmail.com>
Message-ID: <CAGybdFQY6bwgKkP5w7d=7+G-MO-ZJULfyV1gGJp36UOxbygy_w@mail.gmail.com>

Hi Christian,

That sounds like a sensible plan to me. Thanks for the update.

Best,
Alan

On Sun, Mar 1, 2020, 10:31 AM Kristian Evers <kristianevers at gmail.com>
wrote:

> Alan,
>
> There are no immediate plans for further releases of the 6.3.x branch but
> we will continue to backport bug fixes for the foreseeable future and will
> likely issue a new release alongside 7.0.1. I don't know how long we will
> be able to keep that up as backporting will become increasingly difficult
> as time goes.
>
> /Kristian
>
>
> søn. 1. mar. 2020 15.17 skrev Alan Snow <alansnow21 at gmail.com>:
>
>> What are the plans for releases for 6.3.x?
>> _______________________________________________
>> PROJ mailing list
>> PROJ at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/proj
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200301/fc682181/attachment.html>

From nyall.dawson at gmail.com  Sun Mar  1 14:16:39 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 2 Mar 2020 08:16:39 +1000
Subject: [PROJ] PROJ 7.0.0
In-Reply-To: <D23CCA6E-A265-48F3-BA1E-3752E43A2B17@sdfe.dk>
References: <D23CCA6E-A265-48F3-BA1E-3752E43A2B17@sdfe.dk>
Message-ID: <CAB28AsjqqQ6twi2XSRvcJynu9njXjpqx_QunnuVeL-HyyPhTTg@mail.gmail.com>

On Sun, 1 Mar 2020 at 20:43, Kristian Evers <kreve at sdfe.dk> wrote:
>
> It is my pleasure to announce new releases of PROJ and related packages.

Great work PROJ team! It's fantastic to see this incredibly important
library getting better and better with these recent releases!

Nyall

From sean at cesium.com  Mon Mar  2 18:15:43 2020
From: sean at cesium.com (Sean Lilley)
Date: Mon, 2 Mar 2020 21:15:43 -0500
Subject: [PROJ] Best practices for converting 2D CRS to 3D CRS
In-Reply-To: <35981704.u3MmqRr869@even-i700>
References: <CABKG1zU7eau3pxpFHa8nP7+zcA_0=SQOHtotbxHRy=m=2P_xsA@mail.gmail.com>
 <35981704.u3MmqRr869@even-i700>
Message-ID: <CABKG1zXqQRMTo4Nd2tC1yBEwndr0XJm4ogzHK6hz-gqe+QaADQ@mail.gmail.com>

Thanks Even. It's good to hear the unit selection is arbitrary instead of
plain out wrong. I noticed cs2cs was doing the legacy behavior too.

On Fri, Feb 28, 2020 at 12:47 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Sean,
>
> > I want to confirm if this change is intentional.
>
> Not really, but the previous behaviour wasn't fully intentional either.
>
> > I'm guessing that it is and that promoting 2D to 3D is not a simple
> problem.
>
> Any choice you make, using the same unit as the horizontal component or
> metre
> is somewhat arbitrary...
>
> > Nevertheless does
> > anyone have a workaround that infers the expected vertical units from the
> > 2D CRS most of the time?
>
> If you use PROJ C API, you can use proj_cs_get_axis_info() +
> proj_crs_promote_to_3D() + proj_crs_alter_cs_linear_unit() (in
> proj_experimental.h)
>
> If you want to integrate this with GDAL, you'll have to use an export /
> import
> from/to WKT.
>
> As you mention EPSG:2263, which relies on NAD83(86), I think I've read in
> some
> NOAA documentation that NAD83(86) is not well defined for ellipsoidal
> heights.
> At least, there is only a EPSG code for the NAD83 Geographic 2D CRS, but
> not
> for a corresponding Geographic 3D CRS. PROJ cannot find any non-ballpark
> transformation between NAD83 and WGS84 regarding the Z component, so the
> accuracy you'll get on it is likely to be greater than 1 metre
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200302/560ce193/attachment.html>

From stefano.iacovella at gmail.com  Tue Mar  3 02:49:53 2020
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Tue, 3 Mar 2020 11:49:53 +0100
Subject: [PROJ] Libtiff-4 error when compiling 7.0.0
Message-ID: <CAG9OqYoFD8EcbJvyhRhHu9eia5sJqpUyz5z0m27xipi4+9S2Bw@mail.gmail.com>

Hi all,

I'm upgrading to new release 7.0.0 compiling from sources in a Linux Mint
box.
In the same server I previously installed 6.3.1 with no issues.
When I run the ,/configure command with 7.0.0 I got this error:

checking for SQLITE3... yes
checking for sqlite3... yes
checking for TIFF... configure: error: Package requirements (libtiff-4)
were not met:

No package 'libtiff-4' found

Consider adjusting the PKG_CONFIG_PATH environment variable if you
installed software in a non-standard prefix.

Alternatively, you may set the environment variables TIFF_CFLAGS
and TIFF_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details.

I checked the packages installed on the server and there is a libtiff5 one.
It seems there is no libtiff-4 package in the repository:

~/sources/proj-7.0.0$ dpkg -l | grep libtiff
ii  libtiff5:amd64                             4.0.9-5ubuntu0.3
                    amd64        Tag Image File Format (TIFF) library

Any hint?

Thank you very much

Stefano
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200303/bff2d24d/attachment.html>

From sebastic at xs4all.nl  Tue Mar  3 02:56:25 2020
From: sebastic at xs4all.nl (Bas Couwenberg)
Date: Tue, 03 Mar 2020 11:56:25 +0100
Subject: [PROJ] Libtiff-4 error when compiling 7.0.0
In-Reply-To: <CAG9OqYoFD8EcbJvyhRhHu9eia5sJqpUyz5z0m27xipi4+9S2Bw@mail.gmail.com>
References: <CAG9OqYoFD8EcbJvyhRhHu9eia5sJqpUyz5z0m27xipi4+9S2Bw@mail.gmail.com>
Message-ID: <e0390fa77462a7f5591d3382f640b2fd@xs4all.nl>

On 2020-03-03 11:49, Stefano Iacovella wrote:
> ~/sources/proj-7.0.0$ dpkg -l | grep libtiff
> ii  libtiff5:amd64                             4.0.9-5ubuntu0.3
>                     amd64        Tag Image File Format (TIFF) library

Install libtiff-dev (and libcurl4-gnutls-dev), see:

  
https://salsa.debian.org/debian-gis-team/proj/-/blob/debian/7.0.0-1_exp1/debian/control#L7

Kind Regards,

Bas

From stefano.iacovella at gmail.com  Tue Mar  3 02:56:52 2020
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Tue, 3 Mar 2020 11:56:52 +0100
Subject: [PROJ] Libtiff-4 error when compiling 7.0.0
In-Reply-To: <CAG9OqYoFD8EcbJvyhRhHu9eia5sJqpUyz5z0m27xipi4+9S2Bw@mail.gmail.com>
References: <CAG9OqYoFD8EcbJvyhRhHu9eia5sJqpUyz5z0m27xipi4+9S2Bw@mail.gmail.com>
Message-ID: <CAG9OqYrNLxhJV+RKQtEm5q0c4WrMpf=qFi83vU3+XdOk5hKbDw@mail.gmail.com>

I just realised what I missed was libtiff5-dev package.
Sorry for the dumb question :(

All the best

Stefano

Il giorno mar 3 mar 2020 alle ore 11:49 Stefano Iacovella <
stefano.iacovella at gmail.com> ha scritto:

> Hi all,
>
> I'm upgrading to new release 7.0.0 compiling from sources in a Linux Mint
> box.
> In the same server I previously installed 6.3.1 with no issues.
> When I run the ,/configure command with 7.0.0 I got this error:
>
> checking for SQLITE3... yes
> checking for sqlite3... yes
> checking for TIFF... configure: error: Package requirements (libtiff-4)
> were not met:
>
> No package 'libtiff-4' found
>
> Consider adjusting the PKG_CONFIG_PATH environment variable if you
> installed software in a non-standard prefix.
>
> Alternatively, you may set the environment variables TIFF_CFLAGS
> and TIFF_LIBS to avoid the need to call pkg-config.
> See the pkg-config man page for more details.
>
> I checked the packages installed on the server and there is a libtiff5
> one. It seems there is no libtiff-4 package in the repository:
>
> ~/sources/proj-7.0.0$ dpkg -l | grep libtiff
> ii  libtiff5:amd64                             4.0.9-5ubuntu0.3
>                       amd64        Tag Image File Format (TIFF) library
>
> Any hint?
>
> Thank you very much
>
> Stefano
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200303/d25def37/attachment.html>

From stefano.iacovella at gmail.com  Tue Mar  3 02:58:23 2020
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Tue, 3 Mar 2020 11:58:23 +0100
Subject: [PROJ] Libtiff-4 error when compiling 7.0.0
In-Reply-To: <e0390fa77462a7f5591d3382f640b2fd@xs4all.nl>
References: <CAG9OqYoFD8EcbJvyhRhHu9eia5sJqpUyz5z0m27xipi4+9S2Bw@mail.gmail.com>
 <e0390fa77462a7f5591d3382f640b2fd@xs4all.nl>
Message-ID: <CAG9OqYqrcOcgcamg+aG7Kt_ZqkJknLx+rpDXYurO-igzMjzSKQ@mail.gmail.com>

thank you very much Bas, I just realised it.

It was the 4 release number misleading me

Stefano

Il giorno mar 3 mar 2020 alle ore 11:56 Bas Couwenberg <sebastic at xs4all.nl>
ha scritto:

> On 2020-03-03 11:49, Stefano Iacovella wrote:
> > ~/sources/proj-7.0.0$ dpkg -l | grep libtiff
> > ii  libtiff5:amd64                             4.0.9-5ubuntu0.3
> >                     amd64        Tag Image File Format (TIFF) library
>
> Install libtiff-dev (and libcurl4-gnutls-dev), see:
>
>
>
> https://salsa.debian.org/debian-gis-team/proj/-/blob/debian/7.0.0-1_exp1/debian/control#L7
>
> Kind Regards,
>
> Bas
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200303/df0385ce/attachment.html>

From kreve at sdfe.dk  Tue Mar  3 10:54:33 2020
From: kreve at sdfe.dk (Kristian Evers)
Date: Tue, 3 Mar 2020 18:54:33 +0000
Subject: [PROJ] Release schedule
In-Reply-To: <450ad4c658714cdcaeb02dd147018e6a@sdfe.dk>
References: <450ad4c658714cdcaeb02dd147018e6a@sdfe.dk>
Message-ID: <F29A37E1-2BF5-4D99-9304-17B88A5C2C45@sdfe.dk>

No objections, as it were. This will be the release schedule for the next couple of years.
I’ve added the releases up til 8.0.0 as milestones on GitHub:

https://github.com/OSGeo/PROJ/milestones?direction=asc&sort=due_date&state=open

I’m sure circumstances will warrant changes to the schedule. I expect that a bugfix
release migt be changed to a new-feature release at some point. I intend to stick with
the bimonthly schedule though.

I have only put in one milestone for the 6.x branch but there may be more than one
release of that branch if it isn’t too complicated to backport fixes. Basically I don’t want
promise anything but we’ll try to keep it going as long as possible.

/Kristian

On 26 Feb 2020, at 15:55, Kristian Evers <kreve at sdfe.dk<mailto:kreve at sdfe.dk>> wrote:

All,

With the release of PROJ 7 we are out of scheduled releases. I want to put in place a new schedule so that downstream projects can plan their own releases accordingly. Lately we've seen a few interconnected bugs in QGIS where an unfortunate combination of new PROJ and GDAL was used in a QGIS version build for an older combination of PROJ/GDAL. This was no-ones fault but could have been avoided with a bit of planning across the projects. This is a step in that direction.

I propose we continue the release frequency that was used between 6.0.0 and 7.0.0. That is, bimonthly releases alternating between bug fix releases (patch) and new-feature releases (minor version number) culminating in a major release version in March. Of course with the option of promoting a bug fix release to a minor version release if that is deemed preferable. Ad hoc releases like 6.3.1 will also be a possibility but only for bug fixes and shouldn't mess up the overall schedule.

I've looked into other OSGeo projects release schedules but unfortunately it seems to be only QGIS that has a long-term plan for their releases [0]. I haven't been able to find the same for projects like GDAL, PostGIS, Mapserver, etc.

Below I have made a list of up-coming my proposed PROJ release and intertwined them with planned (or presumed [1]) QGIS releases in the future:

PROJ 6.3.1:  2020-02-13
QGIS 3.12.0: 2020-02-21
PROJ 7.0.0:  2020-03-01
PROJ 7.0.1:  2020-05-01
QGIS 3.14.0: 2020-06-19
PROJ 7.1.0:  2020-07-01
PROJ 7.1.1:  2020-09-01
QGIS 3.16.0: 2020-10-23 (LTR)
PROJ 7.2.0:  2020-11-01
PROJ 7.2.1:  2021-01-01
QGIS 3.18.0: 2021-02-xx
PROJ 8.0.0:  2021-03-01
PROJ 8.0.1:  2021-05-01
QGIS 3.20.0: 2021-06-xx
PROJ 8.1.0:  2021-07-01
PROJ 8.1.1:  2021-09-01
QGIS 3.22.0: 2021-10-xx (LTR)
PROJ 8.2.0:  2021-11-01
PROJ 8.2.1:  2022-01-01
PROJ 8.3.0:  2022-03-01

As it can be seen from the list the two schedules generally fit well together with QGIS long-term releases being issued roughly two months after PROJ as had the fix bug fix release of a new minor version branch. Or put in another way, we've had four releases to weed out bugs in a new major version release, which should provide a solid release for QGIS to build on.

I tried to look up the release schedules of various Linux distributions to see how those would fit since in the end the packaging systems will be the limiting factor for the whole OSGeo stack. I found it hard to come to any form of conclusion that could guide our release schedule though. I assume most distributions will be a major version branch behind when it comes to PROJ for the next year or two, until we have weeded out proj_api.h for good.

It would be great to get feedback on the release schedule from PROJ developers, developers of other packages depending on PROJ and the packagers as well.

/Kristian

[0] https://www.qgis.org/en/site/getinvolved/development/roadmap.html
[1] QGIS release dates ending in xx are presumed releases that doesn't figure in the road map

_______________________________________________
PROJ mailing list
PROJ at lists.osgeo.org<mailto:PROJ at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/proj

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200303/5c4f8155/attachment-0001.html>

From nyall.dawson at gmail.com  Wed Mar  4 13:49:09 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 5 Mar 2020 07:49:09 +1000
Subject: [PROJ] "eck_greif" projection, "libproject"?
Message-ID: <CAB28AshNqX2nrgd5tJjJSEaRHAcE=5ukGhjvVQz4cFYgX4MyJg@mail.gmail.com>

Hey list,

Does anyone know what the "+proj=eck_greif" mentioned in section 7.2.1
of http://priede.bf.lu.lv/ftp/pub/TIS/bibliotekas/PROJ.4/libproj4_manual.pdf
refers to? I can't find any reference to this in master proj code base
at all. (It's also referenced here:
https://github.com/Esri/projection-engine-db-doc/blob/master/other/proj4-esri.txt#L154,
which is why I'm asking the question)

The proj4-esri.txt file also states:

"Names marked with a * are only in the libproject distribution
Names marked with a @ are only in the PROJ4      distribution"
(https://github.com/Esri/projection-engine-db-doc/blob/master/other/proj4-esri.txt#L21)

Does anyone have any clues as to what "libproject distribution" is? I
can't find anything relevant from my searching, but given the context
it sounds like some historic proj fork?

Nyall

From even.rouault at spatialys.com  Wed Mar  4 14:11:23 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 04 Mar 2020 23:11:23 +0100
Subject: [PROJ] "eck_greif" projection, "libproject"?
In-Reply-To: <CAB28AshNqX2nrgd5tJjJSEaRHAcE=5ukGhjvVQz4cFYgX4MyJg@mail.gmail.com>
References: <CAB28AshNqX2nrgd5tJjJSEaRHAcE=5ukGhjvVQz4cFYgX4MyJg@mail.gmail.com>
Message-ID: <1681385.qVoDU0zLAP@even-i700>

Nyall,

> 
> Does anyone know what the "+proj=eck_greif" mentioned in section 7.2.1
> of http://priede.bf.lu.lv/ftp/pub/TIS/bibliotekas/PROJ.4/libproj4_manual.pdf
> refers to? I can't find any reference to this in master proj code base at
> all. (It's also referenced here:
> https://github.com/Esri/projection-engine-db-doc/blob/master/other/proj4-esr
> i.txt#L154, which is why I'm asking the question)
> 
> The proj4-esri.txt file also states:
> 
> "Names marked with a * are only in the libproject distribution
> Names marked with a @ are only in the PROJ4      distribution"
> (https://github.com/Esri/projection-engine-db-doc/blob/master/other/proj4-es
> ri.txt#L21)
> 
> Does anyone have any clues as to what "libproject distribution" is? I
> can't find anything relevant from my searching, but given the context
> it sounds like some historic proj fork?

This is likely the libproj4, that was forked from PROJ4 in 2002 by Jerry 
Evenden when he disagreed with the project directions :
http://libproj4.maptools.org/

Particularly the lbp4_050319S.tar.gz source archive. Unfortunately I can't 
find any mention of eck_greif into it.

There's also the
https://github.com/jeffbaumes/jeffbaumes-vtk/tree/master/Utilities/vtklibproj4 
sources that Kristian identified in 
https://github.com/OSGeo/PROJ/issues/1851#issuecomment-574878542 but no trace 
of eck_greif into it

The most promising would be to start from
https://www.javatips.net/api/onebusaway-jmapprojlib-master/src/main/java/com/
jhlabs/map/proj/EckertGreifendorffProjection.java

whose header indicates "This file was semi-automatically converted from the 
public-domain USGS PROJ source.
 * 
 * Bernhard Jenny, May 07: split Hammer and Eckert-Greifendorff projections."

So, with that hint, looking in PROJ src/projections/hammer.cpp, the projection 
name is  "Hammer & Eckert-Greifendorff"

And when comparing hammer.cpp with EckertGreifendorffProjection.java, it seems  
Eckert-Greifendorff is actually just "+proj=hammer +W=0.25 +m=1"

End of treasure hunt :-)

(but there must another libproj4 or whatever variant name archive somewhere!)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Mar  4 14:23:35 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 04 Mar 2020 23:23:35 +0100
Subject: [PROJ] "eck_greif" projection, "libproject"?
In-Reply-To: <1681385.qVoDU0zLAP@even-i700>
References: <CAB28AshNqX2nrgd5tJjJSEaRHAcE=5ukGhjvVQz4cFYgX4MyJg@mail.gmail.com>
 <1681385.qVoDU0zLAP@even-i700>
Message-ID: <6141153.T2nte3iDVg@even-i700>

> And when comparing hammer.cpp with EckertGreifendorffProjection.java, it
> seems Eckert-Greifendorff is actually just "+proj=hammer +W=0.25 +m=1"

Correction: should read '+M=' uppercase (but as M=1 is the default value, that 
won't change anything to the result):

+proj=hammer +W=0.25 +M=1

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mwtoews at gmail.com  Wed Mar  4 14:40:39 2020
From: mwtoews at gmail.com (Mike Taves)
Date: Thu, 5 Mar 2020 11:40:39 +1300
Subject: [PROJ] "eck_greif" projection, "libproject"?
In-Reply-To: <CAB28AshNqX2nrgd5tJjJSEaRHAcE=5ukGhjvVQz4cFYgX4MyJg@mail.gmail.com>
References: <CAB28AshNqX2nrgd5tJjJSEaRHAcE=5ukGhjvVQz4cFYgX4MyJg@mail.gmail.com>
Message-ID: <CAM2FmMpx1byyH7Sn2mTCCTzpTT6MgNJFV9Teoi7XtF503hXcMQ@mail.gmail.com>

On Thu, 5 Mar 2020 at 10:49, Nyall Dawson <nyall.dawson at gmail.com> wrote:
> Does anyone know what the "+proj=eck_greif" mentioned in section 7.2.1
> of http://priede.bf.lu.lv/ftp/pub/TIS/bibliotekas/PROJ.4/libproj4_manual.pdf
> refers to? I can't find any reference to this in master proj code base

See https://en.wikipedia.org/wiki/Eckert-Greifendorff_projection

From nyall.dawson at gmail.com  Wed Mar  4 15:02:52 2020
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 5 Mar 2020 09:02:52 +1000
Subject: [PROJ] "eck_greif" projection, "libproject"?
In-Reply-To: <1681385.qVoDU0zLAP@even-i700>
References: <CAB28AshNqX2nrgd5tJjJSEaRHAcE=5ukGhjvVQz4cFYgX4MyJg@mail.gmail.com>
 <1681385.qVoDU0zLAP@even-i700>
Message-ID: <CAB28AshDFywWw+jr5niAKJBdXFPVdwyzO6jFy86KhTB6dmL7gA@mail.gmail.com>

On Thu, 5 Mar 2020 at 08:11, Even Rouault <even.rouault at spatialys.com> wrote:

>
> And when comparing hammer.cpp with EckertGreifendorffProjection.java, it seems
> Eckert-Greifendorff is actually just "+proj=hammer +W=0.25 +m=1"

Thanks, that's very helpful!

And FWIW, it turns out this is already documented:
https://proj.org/operations/projections/hammer.html#cmdoption-arg-w !

Nyall


>
> End of treasure hunt :-)
>
> (but there must another libproj4 or whatever variant name archive somewhere!)
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From even.rouault at spatialys.com  Wed Mar  4 15:41:40 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 05 Mar 2020 00:41:40 +0100
Subject: [PROJ] libproj4 archived in a github repo [was Re: "eck_greif"
	projection, "libproject"?]
In-Reply-To: <1681385.qVoDU0zLAP@even-i700>
References: <CAB28AshNqX2nrgd5tJjJSEaRHAcE=5ukGhjvVQz4cFYgX4MyJg@mail.gmail.com>
 <1681385.qVoDU0zLAP@even-i700>
Message-ID: <10999689.fCIiRoOSn1@even-i700>

> This is likely the libproj4, that was forked from PROJ4 in 2002 by Jerry
> Evenden when he disagreed with the project directions :
> http://libproj4.maptools.org/
> 
> Particularly the lbp4_050319S.tar.gz source archive. Unfortunately I can't
> find any mention of eck_greif into it.

For the sake of historical preservation and easier digging into that code 
base, I've imported it in an archived github repo at:
https://github.com/rouault/libproj4

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From thy at 42.dk  Thu Mar  5 06:32:55 2020
From: thy at 42.dk (Kristian Thy)
Date: Thu, 5 Mar 2020 15:32:55 +0100
Subject: [PROJ] libproj4 archived in a github repo [was Re: "eck_greif"
 projection, "libproject"?]
In-Reply-To: <10999689.fCIiRoOSn1@even-i700>
References: <CAB28AshNqX2nrgd5tJjJSEaRHAcE=5ukGhjvVQz4cFYgX4MyJg@mail.gmail.com>
 <1681385.qVoDU0zLAP@even-i700> <10999689.fCIiRoOSn1@even-i700>
Message-ID: <20200305143255.sjanlv6wgb5y7ir5@42.dk>

On Thu, Mar 05, Even Rouault wrote:
> > This is likely the libproj4, that was forked from PROJ4 in 2002 by Jerry
> > Evenden when he disagreed with the project directions :
> > http://libproj4.maptools.org/
> > 
> > Particularly the lbp4_050319S.tar.gz source archive. Unfortunately I can't
> > find any mention of eck_greif into it.
> 
> For the sake of historical preservation and easier digging into that code 
> base, I've imported it in an archived github repo at:
> https://github.com/rouault/libproj4

Nice initiative. Might I suggest briefly unarchiving it to add a link
from Gerald's name in the readme to https://www.wikidata.org/wiki/Q30467686 ?

Cheers,
Kristian Thy

From even.rouault at spatialys.com  Thu Mar  5 06:46:29 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 05 Mar 2020 15:46:29 +0100
Subject: [PROJ] libproj4 archived in a github repo [was Re: "eck_greif"
	projection, "libproject"?]
In-Reply-To: <20200305143255.sjanlv6wgb5y7ir5@42.dk>
References: <CAB28AshNqX2nrgd5tJjJSEaRHAcE=5ukGhjvVQz4cFYgX4MyJg@mail.gmail.com>
 <10999689.fCIiRoOSn1@even-i700> <20200305143255.sjanlv6wgb5y7ir5@42.dk>
Message-ID: <2120968.oKEOzM4v6n@even-i700>

On jeudi 5 mars 2020 15:32:55 CET Kristian Thy wrote:
> On Thu, Mar 05, Even Rouault wrote:
> > > This is likely the libproj4, that was forked from PROJ4 in 2002 by Jerry
> > > Evenden when he disagreed with the project directions :
> > > http://libproj4.maptools.org/
> > > 
> > > Particularly the lbp4_050319S.tar.gz source archive. Unfortunately I
> > > can't
> > > find any mention of eck_greif into it.
> > 
> > For the sake of historical preservation and easier digging into that code
> > base, I've imported it in an archived github repo at:
> > https://github.com/rouault/libproj4
> 
> Nice initiative. Might I suggest briefly unarchiving it to add a link
> from Gerald's name in the readme to https://www.wikidata.org/wiki/Q30467686

Link added


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From vanadovv at hetnet.nl  Thu Mar  5 07:39:04 2020
From: vanadovv at hetnet.nl (Oscar van Vlijmen)
Date: Thu, 5 Mar 2020 16:39:04 +0100 (CET)
Subject: [PROJ] libproj4 archived in a github repo [was Re: "eck_greif"
 projection, "libproject"?]
In-Reply-To: <10999689.fCIiRoOSn1@even-i700>
References: <CAB28AshNqX2nrgd5tJjJSEaRHAcE=5ukGhjvVQz4cFYgX4MyJg@mail.gmail.com>
 <1681385.qVoDU0zLAP@even-i700> <10999689.fCIiRoOSn1@even-i700>
Message-ID: <1961834328.156903.1583422744686@kpc.webmail.kpnmail.nl>

I still have a copy of libproj 4.3 from November 2008.
This is probably Evenden's last version, that includes for instance proj_etmerc.c.

The eck_greif projection can be found in the file proj_hammer.c
PROJ_HEAD(eck_greif, "Eckert-Greifendorff")
	"\n\tMisc Sph, \n";
ENTRY0(eck_greif)
	P->mode = MODE_ECK_GREIF;
	P->w = 0.25;

So indeed, Hammer with w = 0.25.


Yours,
Oscar van Vlijmen







> Op 5 maart 2020 om 0:41 schreef Even Rouault <even.rouault at spatialys.com>:
> 
> 
> > This is likely the libproj4, that was forked from PROJ4 in 2002 by Jerry
> > Evenden when he disagreed with the project directions :
> > http://libproj4.maptools.org/
> > 
> > Particularly the lbp4_050319S.tar.gz source archive. Unfortunately I can't
> > find any mention of eck_greif into it.
> 
> For the sake of historical preservation and easier digging into that code 
> base, I've imported it in an archived github repo at:
> https://github.com/rouault/libproj4
> 
> Even
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

From even.rouault at spatialys.com  Thu Mar  5 07:53:12 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 05 Mar 2020 16:53:12 +0100
Subject: [PROJ] libproj4 archived in a github repo [was Re: "eck_greif"
	projection, "libproject"?]
In-Reply-To: <1961834328.156903.1583422744686@kpc.webmail.kpnmail.nl>
References: <CAB28AshNqX2nrgd5tJjJSEaRHAcE=5ukGhjvVQz4cFYgX4MyJg@mail.gmail.com>
 <10999689.fCIiRoOSn1@even-i700>
 <1961834328.156903.1583422744686@kpc.webmail.kpnmail.nl>
Message-ID: <2683324.2TkdPDQSQE@even-i700>

On jeudi 5 mars 2020 16:39:04 CET Oscar van Vlijmen wrote:
> I still have a copy of libproj 4.3 from November 2008.

oh cool! Can you provide a link to it ?
I do see that in https://download.osgeo.org/proj/from_kai/ we have a PROJ.
4.3.3.tar.gz, but it includes a pj_hammer.c without explicit eck_greif...

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From vanadovv at hetnet.nl  Thu Mar  5 12:12:42 2020
From: vanadovv at hetnet.nl (Oscar van Vlijmen)
Date: Thu, 5 Mar 2020 21:12:42 +0100 (CET)
Subject: [PROJ] libproj4 archived in a github repo [was Re: "eck_greif"
 projection, "libproject"?]
In-Reply-To: <2683324.2TkdPDQSQE@even-i700>
References: <CAB28AshNqX2nrgd5tJjJSEaRHAcE=5ukGhjvVQz4cFYgX4MyJg@mail.gmail.com>
 <10999689.fCIiRoOSn1@even-i700>
 <1961834328.156903.1583422744686@kpc.webmail.kpnmail.nl>
 <2683324.2TkdPDQSQE@even-i700>
Message-ID: <199596805.176172.1583439162281@kpc.webmail.kpnmail.nl>

libproj4.3_20081120
Cartographic Projections
libproject C library
http://home.comcast.net/~gevenden56/proj/index.html

This is the link I donwloaded the latest version of Libproj from.
It could be that this link is dead.

I noticed that a lot of projections coded in Libproj are missing in Proj.
Take the Mayr projection. Horrible, since Evenden in a later version enforced the inclusion of GNU GSL, totally unnecessary since the quadrature integration doesn't provide much more accuracy.
Anyhow, Libproj could provide some amusement to some.......


Greetings,
Oscar van Vlijmen



> Op 5 maart 2020 om 16:53 schreef Even Rouault <even.rouault at spatialys.com>:
> 
> 
> On jeudi 5 mars 2020 16:39:04 CET Oscar van Vlijmen wrote:
> > I still have a copy of libproj 4.3 from November 2008.
> 
> oh cool! Can you provide a link to it ?
> I do see that in https://download.osgeo.org/proj/from_kai/ we have a PROJ.
> 4.3.3.tar.gz, but it includes a pj_hammer.c without explicit eck_greif...
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From kristianevers at gmail.com  Thu Mar  5 12:30:50 2020
From: kristianevers at gmail.com (Kristian Evers)
Date: Thu, 5 Mar 2020 21:30:50 +0100
Subject: [PROJ] libproj4 archived in a github repo [was Re: "eck_greif"
 projection, "libproject"?]
In-Reply-To: <199596805.176172.1583439162281@kpc.webmail.kpnmail.nl>
References: <CAB28AshNqX2nrgd5tJjJSEaRHAcE=5ukGhjvVQz4cFYgX4MyJg@mail.gmail.com>
 <10999689.fCIiRoOSn1@even-i700>
 <1961834328.156903.1583422744686@kpc.webmail.kpnmail.nl>
 <2683324.2TkdPDQSQE@even-i700>
 <199596805.176172.1583439162281@kpc.webmail.kpnmail.nl>
Message-ID: <37A7194E-70AB-4D12-AA94-C0A45BC14603@gmail.com>



> On 5 Mar 2020, at 21:12, Oscar van Vlijmen <vanadovv at hetnet.nl> wrote:
> 
> libproj4.3_20081120
> Cartographic Projections
> libproject C library
> http://home.comcast.net/~gevenden56/proj/index.html
> 

Unfortunately that link is dead. A bit of googling reveals 
https://karczmarczuk.users.greyc.fr/TEACH/InfoGeo/Work/libproj4.3_20081120.tar.bz2 <https://karczmarczuk.users.greyc.fr/TEACH/InfoGeo/Work/libproj4.3_20081120.tar.bz2>

It seems the file structure is different from the code base Even has put in his
repostory. I don’t know if that means this code is more recent or not.

> This is the link I donwloaded the latest version of Libproj from.
> It could be that this link is dead.
> 
> I noticed that a lot of projections coded in Libproj are missing in Proj.

Yeah, that has been highlighted a few times recently. It would be cool if
someone could find the time to incorporate them in current PROJ. I’m
happy to provide guidance if someone should want to take on this job.

/Kristian

> Take the Mayr projection. Horrible, since Evenden in a later version enforced the inclusion of GNU GSL, totally unnecessary since the quadrature integration doesn't provide much more accuracy.
> Anyhow, Libproj could provide some amusement to some.......
> 
> 
> Greetings,
> Oscar van Vlijmen
> 
> 
> 
>> Op 5 maart 2020 om 16:53 schreef Even Rouault <even.rouault at spatialys.com>:
>> 
>> 
>> On jeudi 5 mars 2020 16:39:04 CET Oscar van Vlijmen wrote:
>>> I still have a copy of libproj 4.3 from November 2008.
>> 
>> oh cool! Can you provide a link to it ?
>> I do see that in https://download.osgeo.org/proj/from_kai/ we have a PROJ.
>> 4.3.3.tar.gz, but it includes a pj_hammer.c without explicit eck_greif...
>> 
>> -- 
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200305/bc366970/attachment.html>

From even.rouault at spatialys.com  Thu Mar  5 12:54:49 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 05 Mar 2020 21:54:49 +0100
Subject: [PROJ] libproj4 archived in a github repo [was Re: "eck_greif"
	projection, "libproject"?]
In-Reply-To: <37A7194E-70AB-4D12-AA94-C0A45BC14603@gmail.com>
References: <CAB28AshNqX2nrgd5tJjJSEaRHAcE=5ukGhjvVQz4cFYgX4MyJg@mail.gmail.com>
 <199596805.176172.1583439162281@kpc.webmail.kpnmail.nl>
 <37A7194E-70AB-4D12-AA94-C0A45BC14603@gmail.com>
Message-ID: <2656428.uGqaU1L0yJ@even-i700>

> Unfortunately that link is dead. A bit of googling reveals
> https://karczmarczuk.users.greyc.fr/TEACH/InfoGeo/Work/libproj4.3_20081120.t
> ar.bz2
> <https://karczmarczuk.users.greyc.fr/TEACH/InfoGeo/Work/libproj4.3_20081120
> .tar.bz2>
> 
> It seems the file structure is different from the code base Even has put in
> his repostory. I don’t know if that means this code is more recent or not.

Your archive is more recent. It dates from 2008/11/20, whereas the one I found was
from 2005/03/19, with no identified version number (I've verified that there are
actually files modified at that date in the CVS ids, and none afterward.
I've updated my repo to tag both versions, and default as master to one you exhibited.

git is smart enough to detect the file move and different naming conventions (PJ_foo vs proj_foo)
and give a reasonably reviewable (huge) diff between both:
https://github.com/rouault/libproj4/commit/81a8bcb91d1fb9d5c5894286e6fcbef8fa1269bd

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From neteler at osgeo.org  Thu Mar  5 22:06:29 2020
From: neteler at osgeo.org (Markus Neteler)
Date: Fri, 6 Mar 2020 07:06:29 +0100
Subject: [PROJ] libproj4 archived in a github repo [was Re: "eck_greif"
 projection, "libproject"?]
In-Reply-To: <199596805.176172.1583439162281@kpc.webmail.kpnmail.nl>
References: <CAB28AshNqX2nrgd5tJjJSEaRHAcE=5ukGhjvVQz4cFYgX4MyJg@mail.gmail.com>
 <10999689.fCIiRoOSn1@even-i700>
 <1961834328.156903.1583422744686@kpc.webmail.kpnmail.nl>
 <2683324.2TkdPDQSQE@even-i700>
 <199596805.176172.1583439162281@kpc.webmail.kpnmail.nl>
Message-ID: <CALFmHhvjMqd1C6cu8Ai=OYFwROQNe7nJehaJKPMx3HyTzgjYUQ@mail.gmail.com>

On Thu, Mar 5, 2020 at 9:12 PM Oscar van Vlijmen <vanadovv at hetnet.nl> wrote:
>
> libproj4.3_20081120
> Cartographic Projections
> libproject C library
> http://home.comcast.net/~gevenden56/proj/index.html
>
> This is the link I donwloaded the latest version of Libproj from.
> It could be that this link is dead.

FWIW:
https://web.archive.org/web/2015*/home.comcast.net/~gevenden56/proj/index.html

Archive.org has saved the page 2 times between August 2, 2013 and
October 2, 2015.
Maybe of interest here.

Best,
Markus

From even.rouault at spatialys.com  Fri Mar  6 01:51:28 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 06 Mar 2020 10:51:28 +0100
Subject: [PROJ] libproj4 archived in a github repo [was Re: "eck_greif"
	projection, "libproject"?]
In-Reply-To: <CALFmHhvjMqd1C6cu8Ai=OYFwROQNe7nJehaJKPMx3HyTzgjYUQ@mail.gmail.com>
References: <CAB28AshNqX2nrgd5tJjJSEaRHAcE=5ukGhjvVQz4cFYgX4MyJg@mail.gmail.com>
 <199596805.176172.1583439162281@kpc.webmail.kpnmail.nl>
 <CALFmHhvjMqd1C6cu8Ai=OYFwROQNe7nJehaJKPMx3HyTzgjYUQ@mail.gmail.com>
Message-ID: <4366323.drbToR98fI@even-i700>

On vendredi 6 mars 2020 07:06:29 CET Markus Neteler wrote:
> On Thu, Mar 5, 2020 at 9:12 PM Oscar van Vlijmen <vanadovv at hetnet.nl> wrote:
> > libproj4.3_20081120
> > Cartographic Projections
> > libproject C library
> > http://home.comcast.net/~gevenden56/proj/index.html
> > 
> > This is the link I donwloaded the latest version of Libproj from.
> > It could be that this link is dead.
> 
> FWIW:
> https://web.archive.org/web/2015*/home.comcast.net/~gevenden56/proj/index.ht
> ml
> 
> Archive.org has saved the page 2 times between August 2, 2013 and
> October 2, 2015.
> Maybe of interest here.

Thanks Markus. Definitely of interest. I think we have now most major pieces 
of history of this brother of PROJ.4/PROJ.
So it turns out that libproject 1.01 is a successor of libproj4.3_20081120. 
Mostly with some code cleanups, comments and autoconf support, but nothing 
major on the computational part AFAICS. I've updated the source to it, and 
updated README.md.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From luis.de.sousa at protonmail.ch  Tue Mar 10 04:20:18 2020
From: luis.de.sousa at protonmail.ch (=?UTF-8?Q?Lu=C3=AD=C2=ADs_Moreira_de_Sousa?=)
Date: Tue, 10 Mar 2020 11:20:18 +0000
Subject: [PROJ] Relevant descrepancies between Sinusoidal and Homolosine
In-Reply-To: <ZsykyKxONMAuWLmLJWl1SclSYaxXCCFBDkLRQXu5QQ8h8kNtPM-nYdRSXEtL8pcd6zWSHjNJM2eQGJQlIz-4trEJbYBy2Yjky3S1Yb2a-X4=@protonmail.ch>
References: <ZsykyKxONMAuWLmLJWl1SclSYaxXCCFBDkLRQXu5QQ8h8kNtPM-nYdRSXEtL8pcd6zWSHjNJM2eQGJQlIz-4trEJbYBy2Yjky3S1Yb2a-X4=@protonmail.ch>
Message-ID: <p4kPXC1M3DA99_iLqI8Sb0du4nFc6m41rpnFZunu0Sudoy41-3nrwQ2Xu_yr6nTO0Q9TTC-MMb2ad7YVkyUeNDRFiwjGmek3AcLtztkYuE0=@protonmail.ch>

Dear all,

after some more trials I can only but conclude that Daan is correct: the current implementation of the SInusoidal projection in PROJ does not match the historical equal-area projection associated with cartographers like Cossin, Sanson, Flamsteed or Mercator. I confirmed in Snyder's "Flattening the Earth" (pag. 113) the expressions for this projection, the relationship between latitude and northing is the identity (btw, Wikipaedia currently claims the same).

In the spreadsheet attached you can verify that the current Sinusoidal implementation only respects this northing relationship for the sphere. With a very exaggerated ellipsoid it becomes clear that a linear relationship between northing and Pi no longer exists.

Whomever implemented the  Homolosine projection must had thus to implement the real Sinusoidal internally, otherwise the scale would not match the Mollweide projection at the prescribed latitude (~ 40.75 º). Whether with the sphere or the ellipsoid, this implementation respects the expected relationship with latitude (and Pi).

I would recommend re-naming the current implementation to something else (perhaps MacBryde, but in truth I do not know this projection). And in tandem raise the internal implementation in the Homolosine to a stand-alone class named as Sinusoidal. Should issues be opened on this?

There is always a chance I am mistaken somehow. Please let me know if this makes sense.

Thank you.

--
Luís
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200310/a6d6cd0e/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: HomolosineSinusoidal.ods
Type: application/vnd.oasis.opendocument.spreadsheet
Size: 21247 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200310/a6d6cd0e/attachment-0001.ods>

From even.rouault at spatialys.com  Tue Mar 10 05:21:57 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Mar 2020 13:21:57 +0100
Subject: [PROJ] Relevant descrepancies between Sinusoidal and Homolosine
In-Reply-To: <p4kPXC1M3DA99_iLqI8Sb0du4nFc6m41rpnFZunu0Sudoy41-3nrwQ2Xu_yr6nTO0Q9TTC-MMb2ad7YVkyUeNDRFiwjGmek3AcLtztkYuE0=@protonmail.ch>
References: <ZsykyKxONMAuWLmLJWl1SclSYaxXCCFBDkLRQXu5QQ8h8kNtPM-nYdRSXEtL8pcd6zWSHjNJM2eQGJQlIz-4trEJbYBy2Yjky3S1Yb2a-X4=@protonmail.ch>
 <p4kPXC1M3DA99_iLqI8Sb0du4nFc6m41rpnFZunu0Sudoy41-3nrwQ2Xu_yr6nTO0Q9TTC-MMb2ad7YVkyUeNDRFiwjGmek3AcLtztkYuE0=@protonmail.ch>
Message-ID: <3345537.nxPGHc3dhq@even-i700>

Luí­s,

> after some more trials I can only but conclude that Daan is correct: the
> current implementation of the SInusoidal projection in PROJ does not match
> the historical equal-area projection associated with cartographers like
> Cossin, Sanson, Flamsteed or Mercator. I confirmed in Snyder's "Flattening
> the Earth" (pag. 113) the expressions for this projection, the relationship
> between latitude and northing is the identity (btw, Wikipaedia currently
> claims the same).

For the sphere, yes.
But for the ellipsoid, if I trust https://pubs.usgs.gov/pp/1395/report.pdf, 
Snyder's "MAP PROJECTIONS-A WORKING MANUAL ", at page 148, equations (30-9) 
and (3-21) show the northing is not the identity of latitude. And while I've 
not checked in depth, I believe that the M expression must hopefully match the 
pj_mlfn() function.

> Whomever implemented the  Homolosine projection must had thus to implement
> the real Sinusoidal internally, otherwise the scale would not match the
> Mollweide projection at the prescribed latitude (~ 40.75 º). Whether with
> the sphere or the ellipsoid, this implementation respects the expected
> relationship with latitude (and Pi).

I believe I found what is wrong with igh. igh implementation is only meant to 
work on the sphere, as there is a P->es = 0 in it. Mollweide implementation is 
only meant to work on the sphere. But Sinusoidal has a separate spherical and 
ellipsoidal implementation. The issue was that igh was forcing P->es = 0 too 
late, that is after the sinusoidal has been instanciated. Thus if using igh 
with an ellipsoid, you got the ellipsoidal sinusoidal and the spherical 
mollweide.
I've submitted https://github.com/OSGeo/PROJ/pull/2042, to make sure the 
spherical shape is force early so that spherical sinusoidal is used, which I 
believe is how igh should be fixed.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Mar 10 05:55:08 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Mar 2020 13:55:08 +0100
Subject: [PROJ] Relevant descrepancies between Sinusoidal and Homolosine
In-Reply-To: <A9uANuJ5OfznBiqpj7t--7imz-7E7cCw0P0vsF6gfZzpW2aB6zH1XSWd7q62Ai-UuxbC2E7s8HvhsSkqxkQXcPUpT3c_cgUwyLK_y2iT9WE=@protonmail.ch>
References: <ZsykyKxONMAuWLmLJWl1SclSYaxXCCFBDkLRQXu5QQ8h8kNtPM-nYdRSXEtL8pcd6zWSHjNJM2eQGJQlIz-4trEJbYBy2Yjky3S1Yb2a-X4=@protonmail.ch>
 <3345537.nxPGHc3dhq@even-i700>
 <A9uANuJ5OfznBiqpj7t--7imz-7E7cCw0P0vsF6gfZzpW2aB6zH1XSWd7q62Ai-UuxbC2E7s8HvhsSkqxkQXcPUpT3c_cgUwyLK_y2iT9WE=@protonmail.ch>
Message-ID: <2088103.iZRH7hAEfh@even-i700>

On mardi 10 mars 2020 12:42:15 CET Luí­s Moreira de Sousa wrote:
> Hi Even,
> 
> I have not yet checked the formulas from that source, but regarding the
> current Homolosine implementation, its outputs are the expected. So perhaps
> it is applying the spherical Sinusoidal and the ellipsoidal Mollweide?

No, before my PR, that would be the reverse: it would apply the ellipsoidal 
Sinusoidal and the (spherical, but there's only spherical implemented) 
Mollweide. igh doesn't do real computations by itself: it just dispatches to 
the existing sinu or moll methods depending on the input coordinate.

Maybe, a proper fix would probably be add an ellipsoidal formulation to 
Mollweide. But igh would then be much more complicated because the dispatching 
logic strongly relies on the fact that there's an identity between northing 
and latitude from what I can see.

So I guess making sure igh uses spherical formulas for both sinuosidal and 
mollweide, as I intented in my PR, is probably better than the current 
situation where there's a mix ?

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From luis.de.sousa at protonmail.ch  Tue Mar 10 05:42:15 2020
From: luis.de.sousa at protonmail.ch (=?UTF-8?Q?Lu=C3=AD=C2=ADs_Moreira_de_Sousa?=)
Date: Tue, 10 Mar 2020 12:42:15 +0000
Subject: [PROJ] Relevant descrepancies between Sinusoidal and Homolosine
In-Reply-To: <3345537.nxPGHc3dhq@even-i700>
References: <ZsykyKxONMAuWLmLJWl1SclSYaxXCCFBDkLRQXu5QQ8h8kNtPM-nYdRSXEtL8pcd6zWSHjNJM2eQGJQlIz-4trEJbYBy2Yjky3S1Yb2a-X4=@protonmail.ch>
 <p4kPXC1M3DA99_iLqI8Sb0du4nFc6m41rpnFZunu0Sudoy41-3nrwQ2Xu_yr6nTO0Q9TTC-MMb2ad7YVkyUeNDRFiwjGmek3AcLtztkYuE0=@protonmail.ch>
 <3345537.nxPGHc3dhq@even-i700>
Message-ID: <A9uANuJ5OfznBiqpj7t--7imz-7E7cCw0P0vsF6gfZzpW2aB6zH1XSWd7q62Ai-UuxbC2E7s8HvhsSkqxkQXcPUpT3c_cgUwyLK_y2iT9WE=@protonmail.ch>

Hi Even,

I have not yet checked the formulas from that source, but regarding the current Homolosine implementation, its outputs are the expected. So perhaps it is applying the spherical Sinusoidal and the ellipsoidal Mollweide?

--
Luís

‐‐‐‐‐‐‐ Original Message ‐‐‐‐‐‐‐
On Tuesday, March 10, 2020 1:21 PM, Even Rouault <even.rouault at spatialys.com> wrote:

> Luí­s,
>
> > after some more trials I can only but conclude that Daan is correct: the
> > current implementation of the SInusoidal projection in PROJ does not match
> > the historical equal-area projection associated with cartographers like
> > Cossin, Sanson, Flamsteed or Mercator. I confirmed in Snyder's "Flattening
> > the Earth" (pag. 113) the expressions for this projection, the relationship
> > between latitude and northing is the identity (btw, Wikipaedia currently
> > claims the same).
>
> For the sphere, yes.
> But for the ellipsoid, if I trust https://pubs.usgs.gov/pp/1395/report.pdf,
> Snyder's "MAP PROJECTIONS-A WORKING MANUAL ", at page 148, equations (30-9)
> and (3-21) show the northing is not the identity of latitude. And while I've
> not checked in depth, I believe that the M expression must hopefully match the
> pj_mlfn() function.
>
> > Whomever implemented the Homolosine projection must had thus to implement
> > the real Sinusoidal internally, otherwise the scale would not match the
> > Mollweide projection at the prescribed latitude (~ 40.75 º). Whether with
> > the sphere or the ellipsoid, this implementation respects the expected
> > relationship with latitude (and Pi).
>
> I believe I found what is wrong with igh. igh implementation is only meant to
> work on the sphere, as there is a P->es = 0 in it. Mollweide implementation is
> only meant to work on the sphere. But Sinusoidal has a separate spherical and
> ellipsoidal implementation. The issue was that igh was forcing P->es = 0 too
>
> late, that is after the sinusoidal has been instanciated. Thus if using igh
> with an ellipsoid, you got the ellipsoidal sinusoidal and the spherical
> mollweide.
> I've submitted https://github.com/OSGeo/PROJ/pull/2042, to make sure the
> spherical shape is force early so that spherical sinusoidal is used, which I
> believe is how igh should be fixed.
>
> Even
>
> ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
>
> Spatialys - Geospatial professional services
> http://www.spatialys.com



From luis.de.sousa at protonmail.ch  Tue Mar 10 07:49:37 2020
From: luis.de.sousa at protonmail.ch (=?UTF-8?Q?Lu=C3=AD=C2=ADs_Moreira_de_Sousa?=)
Date: Tue, 10 Mar 2020 14:49:37 +0000
Subject: [PROJ] Relevant descrepancies between Sinusoidal and Homolosine
In-Reply-To: <2088103.iZRH7hAEfh@even-i700>
References: <ZsykyKxONMAuWLmLJWl1SclSYaxXCCFBDkLRQXu5QQ8h8kNtPM-nYdRSXEtL8pcd6zWSHjNJM2eQGJQlIz-4trEJbYBy2Yjky3S1Yb2a-X4=@protonmail.ch>
 <3345537.nxPGHc3dhq@even-i700>
 <A9uANuJ5OfznBiqpj7t--7imz-7E7cCw0P0vsF6gfZzpW2aB6zH1XSWd7q62Ai-UuxbC2E7s8HvhsSkqxkQXcPUpT3c_cgUwyLK_y2iT9WE=@protonmail.ch>
 <2088103.iZRH7hAEfh@even-i700>
Message-ID: <J_1r2DgXygsJNN-nwau9AAry3bfYCn1ABOPxwq_vtFBIzUZZX2hnP8GWqtgZVO1qGvBHJeopY7SNEs8Xz3n778avO1b4LCROT2hekQeIlqY=@protonmail.ch>

Hi again Even, apologies for insisting. In the .ods I sent earlier you can verify that the Homolosine is preserving the northing-latitude identity, even with the ellipsoid. And also that it does not match the Sinusoidal.

My guess is that the Homolosine is already spherical-spherical as it is. Note that I am still using PROJ 5.2.

Thank you.

--
Luís

‐‐‐‐‐‐‐ Original Message ‐‐‐‐‐‐‐
On Tuesday, March 10, 2020 1:55 PM, Even Rouault <even.rouault at spatialys.com> wrote:

> On mardi 10 mars 2020 12:42:15 CET Luí­s Moreira de Sousa wrote:
>
> > Hi Even,
> > I have not yet checked the formulas from that source, but regarding the
> > current Homolosine implementation, its outputs are the expected. So perhaps
> > it is applying the spherical Sinusoidal and the ellipsoidal Mollweide?
>
> No, before my PR, that would be the reverse: it would apply the ellipsoidal
> Sinusoidal and the (spherical, but there's only spherical implemented)
> Mollweide. igh doesn't do real computations by itself: it just dispatches to
> the existing sinu or moll methods depending on the input coordinate.
>
> Maybe, a proper fix would probably be add an ellipsoidal formulation to
> Mollweide. But igh would then be much more complicated because the dispatching
> logic strongly relies on the fact that there's an identity between northing
> and latitude from what I can see.
>
> So I guess making sure igh uses spherical formulas for both sinuosidal and
> mollweide, as I intented in my PR, is probably better than the current
> situation where there's a mix ?
>
> ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
>
> Spatialys - Geospatial professional services
> http://www.spatialys.com



From gdt at lexort.com  Tue Mar 10 08:00:27 2020
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 10 Mar 2020 11:00:27 -0400
Subject: [PROJ] new bashism (in 6.3.1?)
Message-ID: <rmi7dzsntkk.fsf@s1.lexort.com>

In data/Makefile.am there is:

         if [[ $$(echo "pragma foreign_key_check;" | sqlite3 proj.db | head -c1 | wc -c) -ne 0 ]]; then \

which does not conform to POSIX sh.  Probably it should just be `` or
$(), and [[ I think is just an unnecessary bashism.

I wonder if the CI infrastructure could somehow avoid exposing
non-standard extensions and catch these things.   I don't know if bash
has an environment variable to strictly conform to POSIX, but that would
be a good atonement for the sins of extensions that lead to nonportable
code :-)

From even.rouault at spatialys.com  Tue Mar 10 08:12:20 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Mar 2020 16:12:20 +0100
Subject: [PROJ] new bashism (in 6.3.1?)
In-Reply-To: <rmi7dzsntkk.fsf@s1.lexort.com>
References: <rmi7dzsntkk.fsf@s1.lexort.com>
Message-ID: <7582341.ziNdz45uhe@even-i700>

On mardi 10 mars 2020 11:00:27 CET Greg Troxel wrote:
> In data/Makefile.am there is:
> 
>          if [[ $$(echo "pragma foreign_key_check;" | sqlite3 proj.db | head
> -c1 | wc -c) -ne 0 ]]; then \
> 
> which does not conform to POSIX sh.  Probably it should just be `` or
> $(), and [[ I think is just an unnecessary bashism.

The double $$ might be needed because of autmake stuff (otherwise it would be 
replaced too early). At least I remember having had issues with that.

Feel free to submit a pull request that removes this bashism. I've no idea 
myself when I use a bashism or not :-)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sebastic at xs4all.nl  Tue Mar 10 08:20:21 2020
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 10 Mar 2020 16:20:21 +0100
Subject: [PROJ] new bashism (in 6.3.1?)
In-Reply-To: <7582341.ziNdz45uhe@even-i700>
References: <rmi7dzsntkk.fsf@s1.lexort.com> <7582341.ziNdz45uhe@even-i700>
Message-ID: <f8ced9ee-4924-5581-9d5c-42e8b57801a6@xs4all.nl>

On 3/10/20 4:12 PM, Even Rouault wrote:
> I've no idea myself when I use a bashism or not :-)

checkbashisms and shellcheck are your friend.

https://manpages.debian.org/unstable/devscripts/checkbashisms.1.en.html
https://manpages.debian.org/unstable/shellcheck/shellcheck.1.en.html

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From even.rouault at spatialys.com  Tue Mar 10 08:22:48 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Mar 2020 16:22:48 +0100
Subject: [PROJ] Relevant descrepancies between Sinusoidal and Homolosine
In-Reply-To: <J_1r2DgXygsJNN-nwau9AAry3bfYCn1ABOPxwq_vtFBIzUZZX2hnP8GWqtgZVO1qGvBHJeopY7SNEs8Xz3n778avO1b4LCROT2hekQeIlqY=@protonmail.ch>
References: <ZsykyKxONMAuWLmLJWl1SclSYaxXCCFBDkLRQXu5QQ8h8kNtPM-nYdRSXEtL8pcd6zWSHjNJM2eQGJQlIz-4trEJbYBy2Yjky3S1Yb2a-X4=@protonmail.ch>
 <2088103.iZRH7hAEfh@even-i700>
 <J_1r2DgXygsJNN-nwau9AAry3bfYCn1ABOPxwq_vtFBIzUZZX2hnP8GWqtgZVO1qGvBHJeopY7SNEs8Xz3n778avO1b4LCROT2hekQeIlqY=@protonmail.ch>
Message-ID: <1889637.WKEaZsBNBP@even-i700>

On mardi 10 mars 2020 14:49:37 CET Luí­s Moreira de Sousa wrote:
> Hi again Even, apologies for insisting. In the .ods I sent earlier you can
> verify that the Homolosine is preserving the northing-latitude identity,
> even with the ellipsoid. And also that it does not match the Sinusoidal.
> 
> My guess is that the Homolosine is already spherical-spherical as it is.

Ah indeed... This P->es = 0 thing wasn't used for the instanciation of the 
sinusoidal, so yes my PR was completely useless. Sorry for the noise.

So, igh preserves the identity because it does force es = 0 to the underlying 
sinu... Whereas sinusoidal standalone will use an ellipsoidal formulation for 
an ellipsoid.

As far as whether sinusoidal for the ellipsoidal case is correctly implemented 
or not, I've no idea. I'm not sure your CSV file clearly demonstrates the loss 
of the equal-area property(at least, this is not obvious to me), since it 
probably compares spherical vs ellipsoidal formulations of different 
projections.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From luis.de.sousa at protonmail.ch  Tue Mar 10 08:47:57 2020
From: luis.de.sousa at protonmail.ch (=?UTF-8?Q?Lu=C3=AD=C2=ADs_Moreira_de_Sousa?=)
Date: Tue, 10 Mar 2020 15:47:57 +0000
Subject: [PROJ] Relevant descrepancies between Sinusoidal and Homolosine
In-Reply-To: <1889637.WKEaZsBNBP@even-i700>
References: <ZsykyKxONMAuWLmLJWl1SclSYaxXCCFBDkLRQXu5QQ8h8kNtPM-nYdRSXEtL8pcd6zWSHjNJM2eQGJQlIz-4trEJbYBy2Yjky3S1Yb2a-X4=@protonmail.ch>
 <2088103.iZRH7hAEfh@even-i700>
 <J_1r2DgXygsJNN-nwau9AAry3bfYCn1ABOPxwq_vtFBIzUZZX2hnP8GWqtgZVO1qGvBHJeopY7SNEs8Xz3n778avO1b4LCROT2hekQeIlqY=@protonmail.ch>
 <1889637.WKEaZsBNBP@even-i700>
Message-ID: <Omz0l0Res2DoW-OolrJ1vUQZV67am7ULu_1b-Nu6gZIsqLz3W4R-N7u_tZ5wxi8Y657RjCB6QShuYl6LX0Jr9T4nKBt94oOJ7eFL1nzaHGE=@protonmail.ch>

Thank you Even for following up on this. To summarise:

1. The current implementation of the Homolosine is strictly spherical and should stay like so at least until an ellipsoidal implementation of the Mollweide pops up.

2. The Sinusoidal is implemented both in spherical and ellipsoidal forms, but doubts remain on the accuracy of the latter.

3. Differences in area however are relatively small, I will not worry with them for now.

While differences between the spherical and the ellipsoidal implementations are expected, in this case they run up to dozens of kilometres. I could be wrong, but this looks too wide for comfort. I will keep investigating this.

Regards.

--
Luís

‐‐‐‐‐‐‐ Original Message ‐‐‐‐‐‐‐
On Tuesday, March 10, 2020 4:22 PM, Even Rouault <even.rouault at spatialys.com> wrote:

> On mardi 10 mars 2020 14:49:37 CET Luí­s Moreira de Sousa wrote:
>
> > Hi again Even, apologies for insisting. In the .ods I sent earlier you can
> > verify that the Homolosine is preserving the northing-latitude identity,
> > even with the ellipsoid. And also that it does not match the Sinusoidal.
> > My guess is that the Homolosine is already spherical-spherical as it is.
>
> Ah indeed... This P->es = 0 thing wasn't used for the instanciation of the
>
> sinusoidal, so yes my PR was completely useless. Sorry for the noise.
>
> So, igh preserves the identity because it does force es = 0 to the underlying
> sinu... Whereas sinusoidal standalone will use an ellipsoidal formulation for
> an ellipsoid.
>
> As far as whether sinusoidal for the ellipsoidal case is correctly implemented
> or not, I've no idea. I'm not sure your CSV file clearly demonstrates the loss
> of the equal-area property(at least, this is not obvious to me), since it
> probably compares spherical vs ellipsoidal formulations of different
> projections.
>
> Even
>
> ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
>
> Spatialys - Geospatial professional services
> http://www.spatialys.com



From even.rouault at spatialys.com  Tue Mar 10 09:00:34 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Mar 2020 17:00:34 +0100
Subject: [PROJ] new bashism (in 6.3.1?)
In-Reply-To: <f8ced9ee-4924-5581-9d5c-42e8b57801a6@xs4all.nl>
References: <rmi7dzsntkk.fsf@s1.lexort.com> <7582341.ziNdz45uhe@even-i700>
 <f8ced9ee-4924-5581-9d5c-42e8b57801a6@xs4all.nl>
Message-ID: <14946135.RhgyRyKNSU@even-i700>

On mardi 10 mars 2020 16:20:21 CET Sebastiaan Couwenberg wrote:
> On 3/10/20 4:12 PM, Even Rouault wrote:
> > I've no idea myself when I use a bashism or not :-)
> 
> checkbashisms and shellcheck are your friend.
> 
> https://manpages.debian.org/unstable/devscripts/checkbashisms.1.en.html
> https://manpages.debian.org/unstable/shellcheck/shellcheck.1.en.html

Thanks, that's helpful

I've issued https://github.com/OSGeo/PROJ/pull/2044 to remove the [[ ]] 
bashism.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gdt at lexort.com  Tue Mar 10 09:31:53 2020
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 10 Mar 2020 12:31:53 -0400
Subject: [PROJ] new bashism (in 6.3.1?)
In-Reply-To: <14946135.RhgyRyKNSU@even-i700> (Even Rouault's message of "Tue, 
 10 Mar 2020 17:00:34 +0100")
References: <rmi7dzsntkk.fsf@s1.lexort.com> <7582341.ziNdz45uhe@even-i700>
 <f8ced9ee-4924-5581-9d5c-42e8b57801a6@xs4all.nl>
 <14946135.RhgyRyKNSU@even-i700>
Message-ID: <rmid09kmarq.fsf@s1.lexort.com>

Even Rouault <even.rouault at spatialys.com> writes:

> On mardi 10 mars 2020 16:20:21 CET Sebastiaan Couwenberg wrote:
>> On 3/10/20 4:12 PM, Even Rouault wrote:
>> > I've no idea myself when I use a bashism or not :-)
>> 
>> checkbashisms and shellcheck are your friend.
>> 
>> https://manpages.debian.org/unstable/devscripts/checkbashisms.1.en.html
>> https://manpages.debian.org/unstable/shellcheck/shellcheck.1.en.html
>
> Thanks, that's helpful
>
> I've issued https://github.com/OSGeo/PROJ/pull/2044 to remove the [[ ]] 
> bashism.

I have a local patch, which does result in it running ok.  Thanks for
beating me to the PR.

I have just committed an update to pkgsrc, moving it to 6.3.1 from
5.2.0.  I think not too much will break; we'll see.   On to 7.0.0 in my
staging area!

patch was merely:

--- data/Makefile.in.orig       2020-02-10 10:16:34.000000000 +0000
+++ data/Makefile.in
@@ -594,7 +594,7 @@ proj.db: $(DATAPATH)/sql/*.sql
        echo "" | head -c1; \
         if [ $$? -eq 0 ] ; then \
          echo "Running foreign_key_check"; \
-        if [[ $$(echo "pragma foreign_key_check;" | sqlite3 proj.db | head -c1 | wc -c) -ne 0 ]]; then \
+        if [ $$(echo "pragma foreign_key_check;" | sqlite3 proj.db | head -c1 | wc -c) -ne 0 ]; then \
                echo "Foreign key check failed"; \
                $(RM) proj.db; \
                exit 1; \
g

From gdt at lexort.com  Tue Mar 10 10:38:12 2020
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 10 Mar 2020 13:38:12 -0400
Subject: [PROJ] ugprade notes for 6.3.1 to 7.0.0
Message-ID: <rmiftegkt4r.fsf@s1.lexort.com>

I just updated my staging pkgsrc package for proj to 7.0.0 from 6.3.1.
As usual I look at what files are added/removed and make sure they are
intended changes.

Dropping context and commenting:

  diff --git a/proj/PLIST b/proj/PLIST
  index d3c77117c7..be208e34f6 100644
  --- a/proj/PLIST
  +++ b/proj/PLIST
  @@ -7,8 +7,8 @@ bin/invgeod
  +bin/projsync

Documented in NEWS.

  -include/org_proj4_PJ.h

Documented in NEWS.

  @@ -31,8 +31,7 @@ man/man1/geod.1
  -man/man3/geodesic.3

Not mentioned, and not expected by me.  I'm guessing this is just not
installing a man page for a library that was not installed, and hence an
uninteresting bug fix.  Correct?

  -man/man3/pj_init.3

Implied by documented deprecation of proj_api.

  +man/man1/projsync.1

(Goes with projsync.)

  @@ -222,7 +221,7 @@ ${PLIST.grids}share/proj/nmhpgn.gsb
  -share/proj/null

Docuemnted in NEWS.

  @@ -234,6 +233,7 @@ ${PLIST.grids}share/proj/ontpht1964-nzvd2016.gtx
  +share/proj/proj.ini

Not mentioned in NEWS.

This looks like a config file, in which case it's in the wrong place
(etc vs share -- share is supposed to be read only by users).

Also, I see a cache, but not a cache path, and I'm guessing because it
goes in $HOME/.cache for the uid invoking proj.

(Actually, pkgsrc puts config files into /usr/pkg/share/examples/proj
and then copies them into /usr/pkg/etc where the program is expected to
read them.  They are deleted on uninstall and updated if they are
unchanged.)

Greg

From sebastic at xs4all.nl  Tue Mar 10 10:44:55 2020
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 10 Mar 2020 18:44:55 +0100
Subject: [PROJ] ugprade notes for 6.3.1 to 7.0.0
In-Reply-To: <rmiftegkt4r.fsf@s1.lexort.com>
References: <rmiftegkt4r.fsf@s1.lexort.com>
Message-ID: <a4f7350d-9e62-4fb6-db5c-381c591c6e70@xs4all.nl>

On 3/10/20 6:38 PM, Greg Troxel wrote:
>   @@ -234,6 +233,7 @@ ${PLIST.grids}share/proj/ontpht1964-nzvd2016.gtx
>   +share/proj/proj.ini
> 
> Not mentioned in NEWS.
> 
> This looks like a config file, in which case it's in the wrong place
> (etc vs share -- share is supposed to be read only by users).

It was deemed too much work to use $sysconfdir, see:

 https://github.com/OSGeo/PROJ/issues/1979

As long as it's not in $sysconfdir I don't consider it a config file,
hence users should make changes and expect the packaging system to
preserve them.

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From luis.de.sousa at protonmail.ch  Tue Mar 10 11:05:45 2020
From: luis.de.sousa at protonmail.ch (=?UTF-8?Q?Lu=C3=AD=C2=ADs_Moreira_de_Sousa?=)
Date: Tue, 10 Mar 2020 18:05:45 +0000
Subject: [PROJ] ugprade notes for 6.3.1 to 7.0.0
In-Reply-To: <a4f7350d-9e62-4fb6-db5c-381c591c6e70@xs4all.nl>
References: <rmiftegkt4r.fsf@s1.lexort.com>
 <a4f7350d-9e62-4fb6-db5c-381c591c6e70@xs4all.nl>
Message-ID: <bnevE9C2nlxi41zCE5lec8xBxdIP0hjNoSrNm-cM-65pZCLL0p8OiIXzap9T3ynfpnIrGhd0qGdnixYYGt3dQ4jAdTI9FvQ-ga3OyehMcq0=@protonmail.ch>

Perhaps it is my friend, but it can't bring back the missing executable or symlink. It can't correct man pages either.

Cheers.

--
Luís

‐‐‐‐‐‐‐ Original Message ‐‐‐‐‐‐‐
On Tuesday, March 10, 2020 6:44 PM, Sebastiaan Couwenberg <sebastic at xs4all.nl> wrote:

> On 3/10/20 6:38 PM, Greg Troxel wrote:
>
> > @@ -234,6 +233,7 @@ ${PLIST.grids}share/proj/ontpht1964-nzvd2016.gtx
> > +share/proj/proj.ini
> > Not mentioned in NEWS.
> > This looks like a config file, in which case it's in the wrong place
> > (etc vs share -- share is supposed to be read only by users).
>
> It was deemed too much work to use $sysconfdir, see:
>
> https://github.com/OSGeo/PROJ/issues/1979
>
> As long as it's not in $sysconfdir I don't consider it a config file,
> hence users should make changes and expect the packaging system to
> preserve them.
>
> Kind Regards,
>
> Bas
>
> -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
>
> GPG Key ID: 4096R/6750F10AE88D4AF1
> Fingerprint: 8182 DE41 7056 408D 6146 50D1 6750 F10A E88D 4AF1
>
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj



From gdt at lexort.com  Tue Mar 10 12:21:59 2020
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 10 Mar 2020 15:21:59 -0400
Subject: [PROJ] ugprade notes for 6.3.1 to 7.0.0
In-Reply-To: <a4f7350d-9e62-4fb6-db5c-381c591c6e70@xs4all.nl> (Sebastiaan
 Couwenberg's message of "Tue, 10 Mar 2020 18:44:55 +0100")
References: <rmiftegkt4r.fsf@s1.lexort.com>
 <a4f7350d-9e62-4fb6-db5c-381c591c6e70@xs4all.nl>
Message-ID: <rmiy2s8j9rc.fsf@s1.lexort.com>

Sebastiaan Couwenberg <sebastic at xs4all.nl> writes:

> On 3/10/20 6:38 PM, Greg Troxel wrote:
>>   @@ -234,6 +233,7 @@ ${PLIST.grids}share/proj/ontpht1964-nzvd2016.gtx
>>   +share/proj/proj.ini
>> 
>> Not mentioned in NEWS.
>> 
>> This looks like a config file, in which case it's in the wrong place
>> (etc vs share -- share is supposed to be read only by users).
>
> It was deemed too much work to use $sysconfdir, see:
>
>  https://github.com/OSGeo/PROJ/issues/1979

Thanks.  I ranted a bit ;-)

> As long as it's not in $sysconfdir I don't consider it a config file,

Agreed.

> hence users should make changes and expect the packaging system to
> preserve them.

I think you mean "users should not have the expectation that any changes
they make will be preserved", and if so, agreed.

From pablogabrieldeluca at gmail.com  Thu Mar 12 21:41:48 2020
From: pablogabrieldeluca at gmail.com (Gabriel De Luca)
Date: Fri, 13 Mar 2020 01:41:48 -0300
Subject: [PROJ] Is DERIVEDPROJCRS implemented?
Message-ID: <CAB-dfs12uBjtg7hNZkA+h6y-N_RoLWQwteGJcfDcG706i4zOJQ@mail.gmail.com>

Hi PROJ list,

  I am trying to create *DERIVEDPROJCRS* WKT representations, but without
success.

  The attached text file is the example definition given in section 14.4.2
(with some quotation marks corrected, and I don't know if well corrected)
of the http://docs.opengeospatial.org/is/18-010r7/18-010r7.html document.

 projinfo (Rel. 6.3.1, February 10th, 2020), OSGeo4W Win10 install,
returns:

Too many parameters: BASEPROJCRS[NAD27 / Texas South Central,

  I don't know if *DERIVEDPROJCRS* is already implemented or if there is
something wrong with this representation.

Thank you for all your work!

Kind Regards,
Gabriel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200313/c711f87c/attachment.html>
-------------- next part --------------
DERIVEDPROJCRS["Gulf of Mexico speculative seismic survey bin grid", BASEPROJCRS["NAD27 / Texas South Central", BASEGEOGCRS["NAD27", DATUM["North American Datum 1927", ELLIPSOID["Clarke 1866",20925832.164,294.97869821, LENGTHUNIT["US survey foot",0.304800609601219] ] ] ], CONVERSION["Texas South Central SPCS27", METHOD["Lambert Conic Conformal (2SP)",ID["EPSG",9802]], PARAMETER["Latitude of false origin",27.83333333333333, ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8821]], PARAMETER["Longitude of false origin",-99.0, ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8822]], PARAMETER["Latitude of 1st standard parallel",28.383333333333, ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8823]], PARAMETER["Latitude of 2nd standard parallel",30.283333333333, ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8824]], PARAMETER["Easting at false origin",2000000.0, LENGTHUNIT["US survey foot",0.304800609601219],ID["EPSG",8826]], PARAMETER["Northing at false origin",0.0, LENGTHUNIT["US survey foot",0.304800609601219],ID["EPSG",8827]] ] ], DERIVINGCONVERSION["Gulf of Mexico speculative survey bin grid", METHOD["P6 (I = J-90°) seismic bin grid transformation",ID["EPSG",1049]], PARAMETER["Bin grid origin I",5000,SCALEUNIT["Bin",1.0],ID["EPSG",8733]], PARAMETER["Bin grid origin J",0,SCALEUNIT["Bin",1.0],ID["EPSG",8734]], PARAMETER["Bin grid origin Easting",871200, LENGTHUNIT["US survey foot",0.304800609601219],ID["EPSG",8735]], PARAMETER["Bin grid origin Northing", 10280160, LENGTHUNIT["US survey foot",0.304800609601219],ID["EPSG",8736]], PARAMETER["Scale factor of bin grid",1.0, SCALEUNIT["Unity",1.0],ID["EPSG",8737]], PARAMETER["Bin width on I-axis",82.5, LENGTHUNIT["US survey foot",0.304800609601219],ID["EPSG",8738]], PARAMETER["Bin width on J-axis",41.25, LENGTHUNIT["US survey foot",0.304800609601219],ID["EPSG",8739]], PARAMETER["Map grid bearing of bin grid J-axis",340, ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8740]], PARAMETER["Bin node increment on I-axis",1.0, SCALEUNIT["Bin",1.0],ID["EPSG",8741]], PARAMETER["Bin node increment on J-axis",1.0, SCALEUNIT["Bin",1.0],ID["EPSG",8742]] ], CS[ordinal,2], AXIS["Inline (I)",northNorthWest], AXIS["Crossline (J)",westSouthWest] ]

From even.rouault at spatialys.com  Fri Mar 13 00:33:37 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 13 Mar 2020 08:33:37 +0100
Subject: [PROJ] Is DERIVEDPROJCRS implemented?
In-Reply-To: <CAB-dfs12uBjtg7hNZkA+h6y-N_RoLWQwteGJcfDcG706i4zOJQ@mail.gmail.com>
References: <CAB-dfs12uBjtg7hNZkA+h6y-N_RoLWQwteGJcfDcG706i4zOJQ@mail.gmail.com>
Message-ID: <5981862.Fl2edYFHqm@even-i700>

Grabriel,

"Works" for me, in the meaning that

projinfo @derivedprojcrs_wkt.txt 

outputs the WKT after ingestion & re-export

However PROJ won't be able to do currently something really useful with it, 
namely to use it to perform coordinate transformations, because it doesn't 
implement yet the "P6 (I = J-90°) seismic bin grid transformation" method.

The affine transformation is probably the only method it currently implements 
that can be used with derived projected CRS.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From pablogabrieldeluca at gmail.com  Fri Mar 13 02:09:52 2020
From: pablogabrieldeluca at gmail.com (Gabriel De Luca)
Date: Fri, 13 Mar 2020 06:09:52 -0300
Subject: [PROJ] Is DERIVEDPROJCRS implemented?
In-Reply-To: <5981862.Fl2edYFHqm@even-i700>
References: <CAB-dfs12uBjtg7hNZkA+h6y-N_RoLWQwteGJcfDcG706i4zOJQ@mail.gmail.com>
 <5981862.Fl2edYFHqm@even-i700>
Message-ID: <CAB-dfs0pydaS-n_s2Gd7Pu21NR6fG6PJS7O69BD2UKgNLZngcQ@mail.gmail.com>

Hi Even,

  I was trying to paste the string in the command shell,
  I am seeing now that projinfo @derivedprojcrs_wkt.txt returns the same
WKT.

 I will try to create it with an affine transformation method.

Thank you very much,
Gabriel

El vie., 13 de mar. de 2020 a la(s) 04:33, Even Rouault (
even.rouault at spatialys.com) escribió:

> Grabriel,
>
> "Works" for me, in the meaning that
>
> projinfo @derivedprojcrs_wkt.txt
>
> outputs the WKT after ingestion & re-export
>
> However PROJ won't be able to do currently something really useful with
> it,
> namely to use it to perform coordinate transformations, because it doesn't
> implement yet the "P6 (I = J-90°) seismic bin grid transformation" method.
>
> The affine transformation is probably the only method it currently
> implements
> that can be used with derived projected CRS.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200313/bc83b4ad/attachment.html>

From pcreso at yahoo.com  Fri Mar 13 15:51:38 2020
From: pcreso at yahoo.com (Brent Wood)
Date: Fri, 13 Mar 2020 22:51:38 +0000 (UTC)
Subject: [PROJ] Fw: custom CRS issue
In-Reply-To: <1829152608.7384007.1583868724635@mail.yahoo.com>
References: <1829152608.7384007.1583868724635.ref@mail.yahoo.com>
 <1829152608.7384007.1583868724635@mail.yahoo.com>
Message-ID: <1750896526.444146.1584139898956@mail.yahoo.com>


Hi,
I have been using a custom Albers Equal Area for gridding data for some years - setting it up in Postgis, R & QGIS. 
+proj=aea +lat_1=-30 +lat_2=-50 +lat_0=-40 +lon_0=175 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs

It is still working fine in my old QGIS 2.18, and in Postgis v2.4.eg (with this projection added to spatial_ref_sys as #27201):
select ST_ASText(ST_Transform(ST_SetSRID(ST_MakePoint(175,-40),4326),27201));(returns)POINT(0 0)
I have installed QGIS 3.10 and it rejects this definition - "This proj projection definition is not valid" and just says ERROR when testing it with 175/-40 (which should give the 0,0 coords that both QGIS v2.18 & Postgis v2.4 return)

This was ratified as EPSG::9191 last year - and I can't see why it fails. I'm not sure if it is a proj or QGIS issue?

Any advice appreciated!!
Thanks,
  Brent Wood  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200313/05bb72d0/attachment.html>

From andrew.bell.ia at gmail.com  Fri Mar 20 11:54:53 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Fri, 20 Mar 2020 14:54:53 -0400
Subject: [PROJ] Can't Find proj.db
Message-ID: <CACJ51z1-g8o7vFELuJ_EgDGkQdfTmgFPGqhVZ-5fO=uqk2302A@mail.gmail.com>

Hi,

I'm running a program linked to PROJ on docker.  I have verified that
proj.db is in the directory /usr/share/proj.  I have verified that my
application is linking to /usr/lib/libproj.so.15.  Yet when I run my
program I get:

GDAL failure (1) PROJ: proj_create_from_database: Cannot find proj.db

Setting PROJ_LIB explicitly to /usr/share/proj fixes the issue.  Is there
some way I can trace the cause of this failure?  I tried setting PROJ_DEBUG
to 3 but got no extra information.

Of note:

- I created the items in this docker container by moving files from another
location to /usr/lib, /usr/share, etc.
- I don't know if the path-relative finding is in this version, but I wrote
a small program to verify that dladdr() resolves to the correct
libproj.so.15 location.

>From the header files, I believe I'm using PROJ 6.3.  The library is
libproj.so.15.3.1.

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200320/6292ccaf/attachment.html>

From even.rouault at spatialys.com  Fri Mar 20 12:20:51 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 20 Mar 2020 20:20:51 +0100
Subject: [PROJ] Can't Find proj.db
In-Reply-To: <CACJ51z1-g8o7vFELuJ_EgDGkQdfTmgFPGqhVZ-5fO=uqk2302A@mail.gmail.com>
References: <CACJ51z1-g8o7vFELuJ_EgDGkQdfTmgFPGqhVZ-5fO=uqk2302A@mail.gmail.com>
Message-ID: <2277831.SCDscVYej7@even-i700>

Andrew,

> - I created the items in this docker container by moving files from another
> location to /usr/lib, /usr/share, etc.

That's the likely issue. Running under strace will show you which paths are 
attempted.

> - I don't know if the path-relative finding is in this version, but I wrote
> a small program to verify that dladdr() resolves to the correct
> libproj.so.15 location.

Path-relative finding logic has been added in 7.0, so that explains what you 
see.

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andrew.bell.ia at gmail.com  Fri Mar 20 13:08:05 2020
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Fri, 20 Mar 2020 16:08:05 -0400
Subject: [PROJ] Can't Find proj.db
In-Reply-To: <2277831.SCDscVYej7@even-i700>
References: <CACJ51z1-g8o7vFELuJ_EgDGkQdfTmgFPGqhVZ-5fO=uqk2302A@mail.gmail.com>
 <2277831.SCDscVYej7@even-i700>
Message-ID: <CACJ51z1B+0azJQt4XedSO0CDaM=0MyMFCJjiV1bFWtKBt-Hp1Q@mail.gmail.com>

On Fri, Mar 20, 2020 at 3:20 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Andrew,
>
> > - I created the items in this docker container by moving files from
> another
> > location to /usr/lib, /usr/share, etc.
>
> That's the likely issue. Running under strace will show you which paths
> are
> attempted.
>

Thanks,

Seems like I need to give the documentation a little love.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200320/bd34dd7b/attachment.html>

From devrim at gunduz.org  Tue Mar 24 05:46:25 2020
From: devrim at gunduz.org (Devrim =?ISO-8859-1?Q?G=FCnd=FCz?=)
Date: Tue, 24 Mar 2020 12:46:25 +0000
Subject: [PROJ] Calling for 7.0.1 release
Message-ID: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>


Hi,

Greetings first: I'm the PostgreSQL.org RPM packager for
RHEL/CentOS/Fedora/SLES.

This issue is blocking me to release 7.0 on RHEL 7:

https://github.com/OSGeo/PROJ/issues/2070

I found automake 1.6 on SLES, but RHEL 7 does not have it. I'm not too eager to
build a custom RPM just for that one.

So, any chance to release 7.0.1 earlier than planned? RHEL/CentOS 7 is a
majority of our user base, and this blocks other updates in the repo as well.

Thanks!

Regards,
-- 
Devrim Gündüz
Open Source Solution Architect, Red Hat Certified Engineer
Twitter: @DevrimGunduz , @DevrimGunduzTR
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200324/0ed86e67/attachment.sig>

From kreve at sdfe.dk  Tue Mar 24 06:05:20 2020
From: kreve at sdfe.dk (Kristian Evers)
Date: Tue, 24 Mar 2020 13:05:20 +0000
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
Message-ID: <e82837fa33404db68511367a093ae19e@sdfe.dk>

Devrim,

Welcome to the list! We're always happy to hear from the packagers of PROJ.

As you may already be aware, the next release is scheduled for May 1st. I am
curious as to why this can't wait about a month to be dealt with? What are
the other packages that are blocked by this?

Ideally I would push out new packages maybe once a month but that is simply
not feasible for me to do. I can't set time aside that often to put out a new release.
We are currently doing bi-monthly releases which I think is rather frequent and
most importantly (to me) it fits my work schedule fairly well. With that said,
exceptions can be made, I just need the arguments to be convincing.

Best regards,
Kristian



-----Original Message-----
From: PROJ <proj-bounces at lists.osgeo.org> On Behalf Of Devrim Gündüz
Sent: 24. marts 2020 13:46
To: PROJ <proj at lists.osgeo.org>
Subject: [PROJ] Calling for 7.0.1 release


Hi,

Greetings first: I'm the PostgreSQL.org RPM packager for
RHEL/CentOS/Fedora/SLES.

This issue is blocking me to release 7.0 on RHEL 7:

https://github.com/OSGeo/PROJ/issues/2070

I found automake 1.6 on SLES, but RHEL 7 does not have it. I'm not too eager to
build a custom RPM just for that one.

So, any chance to release 7.0.1 earlier than planned? RHEL/CentOS 7 is a
majority of our user base, and this blocks other updates in the repo as well.

Thanks!

Regards,
-- 
Devrim Gündüz
Open Source Solution Architect, Red Hat Certified Engineer
Twitter: @DevrimGunduz , @DevrimGunduzTR

From sebastic at xs4all.nl  Tue Mar 24 06:12:15 2020
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 24 Mar 2020 14:12:15 +0100
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
Message-ID: <54996935-bc59-bb36-b45d-c69476e65b46@xs4all.nl>

On 3/24/20 1:46 PM, Devrim Gündüz wrote:
> So, any chance to release 7.0.1 earlier than planned? RHEL/CentOS 7 is a
> majority of our user base, and this blocks other updates in the repo as well.

Why don't you just add a patch to the RPM package for the time being, we
did that for the Debian package:

 https://salsa.debian.org/debian-gis-team/proj/-/commit/8b7f0161d0786265362af5be6bedd2b001bad297

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200324/36e77f6b/attachment.sig>

From devrim at gunduz.org  Tue Mar 24 08:58:36 2020
From: devrim at gunduz.org (Devrim =?ISO-8859-1?Q?G=FCnd=FCz?=)
Date: Tue, 24 Mar 2020 15:58:36 +0000
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <54996935-bc59-bb36-b45d-c69476e65b46@xs4all.nl>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
 <54996935-bc59-bb36-b45d-c69476e65b46@xs4all.nl>
Message-ID: <ab8b5f2df7c5adcaa620b632a73b41697ae36e8b.camel@gunduz.org>


Hi Sebastiaan,

On Tue, 2020-03-24 at 14:12 +0100, Sebastiaan Couwenberg wrote:
> 
> Why don't you just add a patch to the RPM package for the time being, we
> did that for the Debian package:
> 
>  
> https://salsa.debian.org/debian-gis-team/proj/-/commit/8b7f0161d0786265362af5be6bedd2b001bad297

I did, too:
https://git.postgresql.org/gitweb/?p=pgrpms.git;a=blob;f=rpm/redhat/master/proj70/master/proj-7.0.0-sles12-pkgconfig.patch;h=33800266a9b8f7826a5ff6d499e12282ef8a45e7;hb=60ff67711307eb403fc1369aa5c92cccd86856fc

But this requires aclocal-1.6 to build -- which is not available on RHEL 7.

-HTH

Regards,
-- 
Devrim Gündüz
Open Source Solution Architect, Red Hat Certified Engineer
Twitter: @DevrimGunduz , @DevrimGunduzTR
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200324/119258d0/attachment.sig>

From devrim at gunduz.org  Tue Mar 24 09:01:05 2020
From: devrim at gunduz.org (Devrim =?ISO-8859-1?Q?G=FCnd=FCz?=)
Date: Tue, 24 Mar 2020 16:01:05 +0000
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <e82837fa33404db68511367a093ae19e@sdfe.dk>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
 <e82837fa33404db68511367a093ae19e@sdfe.dk>
Message-ID: <33f7a62e6225c53f441b3237c389625cae42eb66.camel@gunduz.org>


Hi Kristian,

On Tue, 2020-03-24 at 13:05 +0000, Kristian Evers wrote:
> Welcome to the list! We're always happy to hear from the packagers of PROJ.

Thanks!

> As you may already be aware, the next release is scheduled for May 1st. I am
> curious as to why this can't wait about a month to be dealt with? What are
> the other packages that are blocked by this?

I cannot comment on your release cycle (and respect that), but OTOH 7.0.0
cannot be built on RHEL 7, a major distro.

> Ideally I would push out new packages maybe once a month but that is simply
> not feasible for me to do. I can't set time aside that often to put out a new
> release. We are currently doing bi-monthly releases which I think is rather
> frequent and most importantly (to me) it fits my work schedule fairly well.
> With that said, exceptions can be made, I just need the arguments to be
> convincing.

I'm very excited to push Proj 7.0 to the community repos, so that people can
benefit from the new features -- but then there is that build failure. I would
not pester you if it was a Fedora 31 or RHEL 6 issue, but RHEL 7 is still very
widely used.

Regards,


-- 
Devrim Gündüz
Open Source Solution Architect, Red Hat Certified Engineer
Twitter: @DevrimGunduz , @DevrimGunduzTR
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200324/60abb211/attachment.sig>

From sebastic at xs4all.nl  Tue Mar 24 09:05:00 2020
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 24 Mar 2020 17:05:00 +0100
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <ab8b5f2df7c5adcaa620b632a73b41697ae36e8b.camel@gunduz.org>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
 <54996935-bc59-bb36-b45d-c69476e65b46@xs4all.nl>
 <ab8b5f2df7c5adcaa620b632a73b41697ae36e8b.camel@gunduz.org>
Message-ID: <65497dab-7506-ddcf-a523-e14c23041ad2@xs4all.nl>

On 3/24/20 4:58 PM, Devrim Gündüz wrote:
> On Tue, 2020-03-24 at 14:12 +0100, Sebastiaan Couwenberg wrote:
>>
>> Why don't you just add a patch to the RPM package for the time being, we
>> did that for the Debian package:
>>
>>  
>> https://salsa.debian.org/debian-gis-team/proj/-/commit/8b7f0161d0786265362af5be6bedd2b001bad297
> 
> I did, too:
> https://git.postgresql.org/gitweb/?p=pgrpms.git;a=blob;f=rpm/redhat/master/proj70/master/proj-7.0.0-sles12-pkgconfig.patch;h=33800266a9b8f7826a5ff6d499e12282ef8a45e7;hb=60ff67711307eb403fc1369aa5c92cccd86856fc
> 
> But this requires aclocal-1.6 to build -- which is not available on RHEL 7.

Then I don't really see how a 7.0.1 release is going to help unless you
don't retool the sources.

You can also patch proj.pc to have the expected patch to not require
automake to generate it for you.

Seems easy enough to workaround on systems where the toolchain is too old.

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200324/92376055/attachment-0001.sig>

From sebastic at xs4all.nl  Tue Mar 24 09:13:44 2020
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Tue, 24 Mar 2020 17:13:44 +0100
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <33f7a62e6225c53f441b3237c389625cae42eb66.camel@gunduz.org>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
 <e82837fa33404db68511367a093ae19e@sdfe.dk>
 <33f7a62e6225c53f441b3237c389625cae42eb66.camel@gunduz.org>
Message-ID: <9b632a6d-ebbe-a5ee-179c-407f9dd67b02@xs4all.nl>

On 3/24/20 5:01 PM, Devrim Gündüz wrote:
> I'm very excited to push Proj 7.0 to the community repos, so that people can
> benefit from the new features -- but then there is that build failure. I would
> not pester you if it was a Fedora 31 or RHEL 6 issue, but RHEL 7 is still very
> widely used.

The problem with RHEL 7 is that is was released in 2014 around the same
time as Ubuntu trusty which is EOL since 2019.

While RHEL 7 is still widely used, partially because you cannot easily
upgrade running systems to RHEL 8, its packages are quite old by now.

Packaging recent upstream releases on LTS distribution tends to have
these problems, and it's not shame to conclude that those recent
upstream releases cannot reasonably be provided on those LTS distributions.

We see this in UbuntuGIS for example too, it's becoming increasingly
difficult to backports geospatial packages to xenial (released in 2016),
QGIS being a prime example.

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200324/dd44ad15/attachment.sig>

From gdt at lexort.com  Tue Mar 24 10:11:46 2020
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 24 Mar 2020 13:11:46 -0400
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <33f7a62e6225c53f441b3237c389625cae42eb66.camel@gunduz.org>
 ("Devrim =?utf-8?B?R8O8bmTDvHoiJ3M=?= message of "Tue, 24 Mar 2020 16:01:05
 +0000")
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
 <e82837fa33404db68511367a093ae19e@sdfe.dk>
 <33f7a62e6225c53f441b3237c389625cae42eb66.camel@gunduz.org>
Message-ID: <rmisghxvfsd.fsf@s1.lexort.com>

Devrim Gündüz <devrim at gunduz.org> writes:

>> As you may already be aware, the next release is scheduled for May 1st. I am
>> curious as to why this can't wait about a month to be dealt with? What are
>> the other packages that are blocked by this?
>
> I cannot comment on your release cycle (and respect that), but OTOH 7.0.0
> cannot be built on RHEL 7, a major distro.

This is something I really do not understand.  It seems RHEL 7 is a
"long term stable" kind of thing, which intentionally has older
("stable") versions of software with bug fixes.  Presumably it has an
older version of proj already.

In general, expecting arbitrary current versions of things to build with
an arbitrary old set of things cannot work, especially when there are N
such expectations for N LTS distributions.   While I think it's good for
packages such as proj to avoid gratuitously requiring very recent
versions of dependencies, 6 years is a long time.

Do I understand correctly that RHEL 7 contains versions of software that
were current in 2014?

From devrim at gunduz.org  Tue Mar 24 13:41:09 2020
From: devrim at gunduz.org (Devrim =?ISO-8859-1?Q?G=FCnd=FCz?=)
Date: Tue, 24 Mar 2020 20:41:09 +0000
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <65497dab-7506-ddcf-a523-e14c23041ad2@xs4all.nl>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
 <54996935-bc59-bb36-b45d-c69476e65b46@xs4all.nl>
 <ab8b5f2df7c5adcaa620b632a73b41697ae36e8b.camel@gunduz.org>
 <65497dab-7506-ddcf-a523-e14c23041ad2@xs4all.nl>
Message-ID: <2ccf61b476aa7a9be70646f6d679a3a8ffd55571.camel@gunduz.org>


Hi,

On Tue, 2020-03-24 at 17:05 +0100, Sebastiaan Couwenberg wrote:

> Then I don't really see how a 7.0.1 release is going to help unless you
> don't retool the sources.

I won't patch configure.ac. Is that an enough reason?

> You can also patch proj.pc to have the expected patch to not require
> automake to generate it for you.

Did you see the patch that I sent you in this thread?

Anyway, this is what I get after applying that patch:

make[1]: Entering directory `/home/pgsql/git/pgrpms/rpm/redhat/master/proj70/EL-7/proj-7.0.0'
CDPATH="${ZSH_VERSION+.}:" && cd . && /bin/sh /var/lib/pgsql/git/pgrpms/rpm/redhat/master/proj70/EL-7/proj-7.0.0/missing aclocal-1.16 -I m4
/var/lib/pgsql/git/pgrpms/rpm/redhat/master/proj70/EL-7/proj-7.0.0/missing: line 81: aclocal-1.16: command not found
WARNING: 'aclocal-1.16' is missing on your system.
         You should only need it if you modified 'acinclude.m4' or
         'configure.ac' or m4 files included by 'configure.ac'.
         The 'aclocal' program is part of the GNU Automake package:
         <https://www.gnu.org/software/automake>
         It also requires GNU Autoconf, GNU m4 and Perl in order to run:
         <https://www.gnu.org/software/autoconf>
         <https://www.gnu.org/software/m4/>
         <https://www.perl.org/>
make[1]: *** [aclocal.m4] Error 127
make[1]: Leaving directory `/home/pgsql/git/pgrpms/rpm/redhat/master/proj70/EL-7/proj-7.0.0'
error: Bad exit status from /var/tmp/rpm-tmp.SWFIwE (%build)

> Seems easy enough to workaround on systems where the toolchain is too old.

You are missing a point from packaging point of view. A packager should not
need aclocal while building from tarball.

Regards,

-- 
Devrim Gündüz
Open Source Solution Architect, Red Hat Certified Engineer
Twitter: @DevrimGunduz , @DevrimGunduzTR
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200324/9585bf95/attachment.sig>

From devrim at gunduz.org  Tue Mar 24 13:42:51 2020
From: devrim at gunduz.org (Devrim =?ISO-8859-1?Q?G=FCnd=FCz?=)
Date: Tue, 24 Mar 2020 20:42:51 +0000
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <9b632a6d-ebbe-a5ee-179c-407f9dd67b02@xs4all.nl>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
 <e82837fa33404db68511367a093ae19e@sdfe.dk>
 <33f7a62e6225c53f441b3237c389625cae42eb66.camel@gunduz.org>
 <9b632a6d-ebbe-a5ee-179c-407f9dd67b02@xs4all.nl>
Message-ID: <7910f3958117a960ff8ab73f1162066cc9b15b40.camel@gunduz.org>


Hi,

On Tue, 2020-03-24 at 17:13 +0100, Sebastiaan Couwenberg wrote:

> Packaging recent upstream releases on LTS distribution tends to have
> these problems, and it's not shame to conclude that those recent
> upstream releases cannot reasonably be provided on those LTS distributions.

That does not make much sense on my end. The PostgreSQL RPM repo tries to
provide recent versions of the dependencies. I can say that 7.0.1 will include
this fix, so?

Regards,
-- 
Devrim Gündüz
Open Source Solution Architect, Red Hat Certified Engineer
Twitter: @DevrimGunduz , @DevrimGunduzTR
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200324/6a08c901/attachment.sig>

From devrim at gunduz.org  Tue Mar 24 13:44:20 2020
From: devrim at gunduz.org (Devrim =?ISO-8859-1?Q?G=FCnd=FCz?=)
Date: Tue, 24 Mar 2020 20:44:20 +0000
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <rmisghxvfsd.fsf@s1.lexort.com>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
 <e82837fa33404db68511367a093ae19e@sdfe.dk>
 <33f7a62e6225c53f441b3237c389625cae42eb66.camel@gunduz.org>
 <rmisghxvfsd.fsf@s1.lexort.com>
Message-ID: <1ae0add7f85e646c44f546509b2aa9145e13f3f9.camel@gunduz.org>


Hi Greg,

On Tue, 2020-03-24 at 13:11 -0400, Greg Troxel wrote:
> > I cannot comment on your release cycle (and respect that), but OTOH 7.0.0
> > cannot be built on RHEL 7, a major distro.
> 
> This is something I really do not understand.  It seems RHEL 7 is a
> "long term stable" kind of thing, which intentionally has older
> ("stable") versions of software with bug fixes.  Presumably it has an
> older version of proj already.

The PostGIS packages that I build depend on "our" custom Proj version (6.3.1,
and working on 7.0.X now). So, I don't care whether it has an older proj or
not.

Regards,
-- 
Devrim Gündüz
Open Source Solution Architect, Red Hat Certified Engineer
Twitter: @DevrimGunduz , @DevrimGunduzTR
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200324/dacc3388/attachment.sig>

From sebastic at xs4all.nl  Tue Mar 24 21:50:36 2020
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Wed, 25 Mar 2020 05:50:36 +0100
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <7910f3958117a960ff8ab73f1162066cc9b15b40.camel@gunduz.org>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
 <e82837fa33404db68511367a093ae19e@sdfe.dk>
 <33f7a62e6225c53f441b3237c389625cae42eb66.camel@gunduz.org>
 <9b632a6d-ebbe-a5ee-179c-407f9dd67b02@xs4all.nl>
 <7910f3958117a960ff8ab73f1162066cc9b15b40.camel@gunduz.org>
Message-ID: <42e3a438-ef0e-eb19-aa1e-53c40f044867@xs4all.nl>

On 3/24/20 9:42 PM, Devrim Gündüz wrote:
> On Tue, 2020-03-24 at 17:13 +0100, Sebastiaan Couwenberg wrote:
> 
>> Packaging recent upstream releases on LTS distribution tends to have
>> these problems, and it's not shame to conclude that those recent
>> upstream releases cannot reasonably be provided on those LTS distributions.
> 
> That does not make much sense on my end. The PostgreSQL RPM repo tries to
> provide recent versions of the dependencies. I can say that 7.0.1 will include
> this fix, so?

The you should consider automake a dependency that you need to provide
as well.

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200325/fed05f84/attachment.sig>

From sebastic at xs4all.nl  Tue Mar 24 22:00:20 2020
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Wed, 25 Mar 2020 06:00:20 +0100
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <2ccf61b476aa7a9be70646f6d679a3a8ffd55571.camel@gunduz.org>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
 <54996935-bc59-bb36-b45d-c69476e65b46@xs4all.nl>
 <ab8b5f2df7c5adcaa620b632a73b41697ae36e8b.camel@gunduz.org>
 <65497dab-7506-ddcf-a523-e14c23041ad2@xs4all.nl>
 <2ccf61b476aa7a9be70646f6d679a3a8ffd55571.camel@gunduz.org>
Message-ID: <e4be0294-5eea-fda2-813e-31f32a4e4e29@xs4all.nl>

On 3/24/20 9:41 PM, Devrim Gündüz wrote:
>> You can also patch proj.pc to have the expected patch to not require
>> automake to generate it for you.
> 
> Did you see the patch that I sent you in this thread?

I did. It's the same commit we included in the Debian package.

That is not what I meant by patching proj.pc, you can add a patch to the
RPM package that creates the resulting proj.pc without needing autoconf
the generate it for you from proj.pc.in.

That way you remove the need for the newer aclocal.

> Anyway, this is what I get after applying that patch:
> 
> make[1]: Entering directory `/home/pgsql/git/pgrpms/rpm/redhat/master/proj70/EL-7/proj-7.0.0'
> CDPATH="${ZSH_VERSION+.}:" && cd . && /bin/sh /var/lib/pgsql/git/pgrpms/rpm/redhat/master/proj70/EL-7/proj-7.0.0/missing aclocal-1.16 -I m4
> /var/lib/pgsql/git/pgrpms/rpm/redhat/master/proj70/EL-7/proj-7.0.0/missing: line 81: aclocal-1.16: command not found
> WARNING: 'aclocal-1.16' is missing on your system.
>          You should only need it if you modified 'acinclude.m4' or
>          'configure.ac' or m4 files included by 'configure.ac'.
>          The 'aclocal' program is part of the GNU Automake package:
>          <https://www.gnu.org/software/automake>
>          It also requires GNU Autoconf, GNU m4 and Perl in order to run:
>          <https://www.gnu.org/software/autoconf>
>          <https://www.gnu.org/software/m4/>
>          <https://www.perl.org/>
> make[1]: *** [aclocal.m4] Error 127
> make[1]: Leaving directory `/home/pgsql/git/pgrpms/rpm/redhat/master/proj70/EL-7/proj-7.0.0'
> error: Bad exit status from /var/tmp/rpm-tmp.SWFIwE (%build)

So you need to provide a newer automake for your backports as well.

>> Seems easy enough to workaround on systems where the toolchain is too old.
> 
> You are missing a point from packaging point of view. A packager should not
> need aclocal while building from tarball.

Debian packages call autoreconf to regenerate the autotools files as
part of the build process, it's considered a best practice. So from my
point of view packagers should call aclocal (via autoreconf) when
building upstream sources, whether from a VCS or tarball.

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200325/2435b08c/attachment-0001.sig>

From devrim at gunduz.org  Wed Mar 25 03:18:00 2020
From: devrim at gunduz.org (Devrim =?ISO-8859-1?Q?G=FCnd=FCz?=)
Date: Wed, 25 Mar 2020 10:18:00 +0000
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <42e3a438-ef0e-eb19-aa1e-53c40f044867@xs4all.nl>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
 <e82837fa33404db68511367a093ae19e@sdfe.dk>
 <33f7a62e6225c53f441b3237c389625cae42eb66.camel@gunduz.org>
 <9b632a6d-ebbe-a5ee-179c-407f9dd67b02@xs4all.nl>
 <7910f3958117a960ff8ab73f1162066cc9b15b40.camel@gunduz.org>
 <42e3a438-ef0e-eb19-aa1e-53c40f044867@xs4all.nl>
Message-ID: <36fecd4521c694fca0ee0c7a576de6c227db706f.camel@gunduz.org>


Hi,

On Wed, 2020-03-25 at 05:50 +0100, Sebastiaan Couwenberg wrote:
> The you should consider automake a dependency that you need to provide
> as well.

You have zero idea about RHEL world, right? 

I hope this does not reflect the vision of the Proj community.

Regards,
-- 
Devrim Gündüz
Open Source Solution Architect, Red Hat Certified Engineer
Twitter: @DevrimGunduz , @DevrimGunduzTR
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200325/8ced8ee4/attachment.sig>

From devrim at gunduz.org  Wed Mar 25 03:41:22 2020
From: devrim at gunduz.org (Devrim =?ISO-8859-1?Q?G=FCnd=FCz?=)
Date: Wed, 25 Mar 2020 10:41:22 +0000
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
Message-ID: <8fad346625b61d4c4c2b15305f464ae593c63e03.camel@gunduz.org>


Hi,

On Tue, 2020-03-24 at 12:46 +0000, Devrim Gündüz wrote:
> So, any chance to release 7.0.1 earlier than planned? RHEL/CentOS 7 is a
> majority of our user base, and this blocks other updates in the repo as well.

I'm taking this request back. Sorry for the noise.

Regards,
-- 
Devrim Gündüz
Open Source Solution Architect, Red Hat Certified Engineer
Twitter: @DevrimGunduz , @DevrimGunduzTR
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200325/64e08b05/attachment.sig>

From sebastic at xs4all.nl  Wed Mar 25 03:42:52 2020
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Wed, 25 Mar 2020 11:42:52 +0100
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <36fecd4521c694fca0ee0c7a576de6c227db706f.camel@gunduz.org>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
 <e82837fa33404db68511367a093ae19e@sdfe.dk>
 <33f7a62e6225c53f441b3237c389625cae42eb66.camel@gunduz.org>
 <9b632a6d-ebbe-a5ee-179c-407f9dd67b02@xs4all.nl>
 <7910f3958117a960ff8ab73f1162066cc9b15b40.camel@gunduz.org>
 <42e3a438-ef0e-eb19-aa1e-53c40f044867@xs4all.nl>
 <36fecd4521c694fca0ee0c7a576de6c227db706f.camel@gunduz.org>
Message-ID: <702317a5-fcbb-2be4-94f6-7422431af783@xs4all.nl>

On 3/25/20 11:18 AM, Devrim Gündüz wrote:
> On Wed, 2020-03-25 at 05:50 +0100, Sebastiaan Couwenberg wrote:
>> The you should consider automake a dependency that you need to provide
>> as well.
> 
> You have zero idea about RHEL world, right? 

You obviously don't know me, I'm actually quite familiar with the RHEL
world.

> I hope this does not reflect the vision of the Proj community.

It reflects my vision as a fellow PROJ packager.

My advise for yum.postgresql.org is to be much more conservative when it
comes to including dependencies that are not required for PostgreSQL or
its extensions. PostGIS does not require PROJ >= 6.

apt.postgresql.org used to include backports of gdal & geos, mostly for
postgis. Fortunately it doesn't do that any more. When you're providing
backports of core geospatial libraries you should also provide backports
of their dependent packages like spatialite, qgis, etc. Otherwise users
will have a bad time when postgresql is using a newer version than the
other packages they use.

Since geospatial support via postgis is only an extension for
postgresql, providing backports of geospatial libraries used by postgis
should be considered out of scope yum.postgresql.org.

Updating PROJ to >= 5 is also not appropriate for EPEL 7 because it's
too disruptive. yum.postgresql.org would do well with a similar
conservative policy.

Kind Regards,

Bas

-- 
 GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1

From kreve at sdfe.dk  Wed Mar 25 03:43:30 2020
From: kreve at sdfe.dk (Kristian Evers)
Date: Wed, 25 Mar 2020 10:43:30 +0000
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <36fecd4521c694fca0ee0c7a576de6c227db706f.camel@gunduz.org>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
 <e82837fa33404db68511367a093ae19e@sdfe.dk>
 <33f7a62e6225c53f441b3237c389625cae42eb66.camel@gunduz.org>
 <9b632a6d-ebbe-a5ee-179c-407f9dd67b02@xs4all.nl>
 <7910f3958117a960ff8ab73f1162066cc9b15b40.camel@gunduz.org>
 <42e3a438-ef0e-eb19-aa1e-53c40f044867@xs4all.nl>
 <36fecd4521c694fca0ee0c7a576de6c227db706f.camel@gunduz.org>
Message-ID: <7ec89c180f3a4ed494de85324db319a8@sdfe.dk>

Devrim,

Please keep the discussion civil. We all come from different backgrounds and
complete knowledge on each other areas of expertise can't be expected. Both Bas
and Greg are experienced packagers in their respective Unix/Linux distributions
and they've given you as good advice as they can. There's no need to get snarky
if that advice doesn't apply to the RHEL world.

With that being said, I don't find it necessary to disturb the established
release schedule based on this bug. I agree that the 7.0.0 release has a flaw
but as far as I am aware it has been fixed in master and will be available in
about a month's time. If this was something that affected all packaging systems
it would be higher priority to get 7.0.1 out as fast as possible. This issue
should have been caught at the release candidate stage but unfortunately it
wasn't found soon enough. I would encourage you to keep an eye on coming release
candidates and report back your feedback when something doesn't work as
expected. We can only fix the problems if we are aware of them.

/Kristian



-----Original Message-----
From: PROJ <proj-bounces at lists.osgeo.org> On Behalf Of Devrim Gündüz
Sent: 25. marts 2020 11:18
To: Sebastiaan Couwenberg <sebastic at xs4all.nl>; proj at lists.osgeo.org
Subject: Re: [PROJ] Calling for 7.0.1 release


Hi,

On Wed, 2020-03-25 at 05:50 +0100, Sebastiaan Couwenberg wrote:
> The you should consider automake a dependency that you need to provide
> as well.

You have zero idea about RHEL world, right? 

I hope this does not reflect the vision of the Proj community.

Regards,
-- 
Devrim Gündüz
Open Source Solution Architect, Red Hat Certified Engineer
Twitter: @DevrimGunduz , @DevrimGunduzTR

From even.rouault at spatialys.com  Wed Mar 25 03:47:28 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 25 Mar 2020 11:47:28 +0100
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <2ccf61b476aa7a9be70646f6d679a3a8ffd55571.camel@gunduz.org>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
 <65497dab-7506-ddcf-a523-e14c23041ad2@xs4all.nl>
 <2ccf61b476aa7a9be70646f6d679a3a8ffd55571.camel@gunduz.org>
Message-ID: <1977958.DRLPbXoZno@even-i700>

On mardi 24 mars 2020 20:41:09 CET Devrim Gündüz wrote:
> Hi,
> 
> On Tue, 2020-03-24 at 17:05 +0100, Sebastiaan Couwenberg wrote:
> > Then I don't really see how a 7.0.1 release is going to help unless you
> > don't retool the sources.
> 
> I won't patch configure.ac. Is that an enough reason?

Sorry if I got lost a bit in the arguments but why, as an interim workaround, 
not create a tarball generated on something more recent than RHEL 7 with a 
modern tooling chain, and use that to build on RHEL 7 ?

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From devrim at gunduz.org  Wed Mar 25 06:53:37 2020
From: devrim at gunduz.org (Devrim =?ISO-8859-1?Q?G=FCnd=FCz?=)
Date: Wed, 25 Mar 2020 13:53:37 +0000
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <702317a5-fcbb-2be4-94f6-7422431af783@xs4all.nl>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
 <e82837fa33404db68511367a093ae19e@sdfe.dk>
 <33f7a62e6225c53f441b3237c389625cae42eb66.camel@gunduz.org>
 <9b632a6d-ebbe-a5ee-179c-407f9dd67b02@xs4all.nl>
 <7910f3958117a960ff8ab73f1162066cc9b15b40.camel@gunduz.org>
 <42e3a438-ef0e-eb19-aa1e-53c40f044867@xs4all.nl>
 <36fecd4521c694fca0ee0c7a576de6c227db706f.camel@gunduz.org>
 <702317a5-fcbb-2be4-94f6-7422431af783@xs4all.nl>
Message-ID: <79d43f58957d2bfc5a2acec8b864637cab7e2faf.camel@gunduz.org>


Hi,

On Wed, 2020-03-25 at 11:42 +0100, Sebastiaan Couwenberg wrote:
> You obviously don't know me, I'm actually quite familiar with the RHEL
> world.

I want to publicly apologize from you and from all of the list members.

Regards,
-- 
Devrim Gündüz
Open Source Solution Architect, Red Hat Certified Engineer
Twitter: @DevrimGunduz , @DevrimGunduzTR
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: This is a digitally signed message part
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200325/61d02518/attachment.sig>

From mwtoews at gmail.com  Wed Mar 25 14:16:23 2020
From: mwtoews at gmail.com (Mike Taves)
Date: Thu, 26 Mar 2020 10:16:23 +1300
Subject: [PROJ] Calling for 7.0.1 release
In-Reply-To: <79d43f58957d2bfc5a2acec8b864637cab7e2faf.camel@gunduz.org>
References: <fcbaa4db937b6a1398dc4e5711abb4a99c338b91.camel@gunduz.org>
 <e82837fa33404db68511367a093ae19e@sdfe.dk>
 <33f7a62e6225c53f441b3237c389625cae42eb66.camel@gunduz.org>
 <9b632a6d-ebbe-a5ee-179c-407f9dd67b02@xs4all.nl>
 <7910f3958117a960ff8ab73f1162066cc9b15b40.camel@gunduz.org>
 <42e3a438-ef0e-eb19-aa1e-53c40f044867@xs4all.nl>
 <36fecd4521c694fca0ee0c7a576de6c227db706f.camel@gunduz.org>
 <702317a5-fcbb-2be4-94f6-7422431af783@xs4all.nl>
 <79d43f58957d2bfc5a2acec8b864637cab7e2faf.camel@gunduz.org>
Message-ID: <CAM2FmMoc2O=sfa0u8Xcmn4+bWu+oGmOqhabdfFmVypx0CnaHoA@mail.gmail.com>

Hi all,
Also apologies from my end too, as I'm responsible for the pkg-config
break for the 7.0.0 release [1]. The good news is that it was easy to
fix [2], and I've added further safeguards to do post-install checks
[3] using pkg-config (Unix-like) and CMake (Unix-like and Windows), so
we should be able to catch these types of bugs thru CI.

[1] https://github.com/OSGeo/PROJ/pull/1950
[2] https://github.com/OSGeo/PROJ/pull/2067
[3] https://github.com/OSGeo/PROJ/pull/2077

From Brendan.DeTracey at dfo-mpo.gc.ca  Sat Mar 28 07:58:53 2020
From: Brendan.DeTracey at dfo-mpo.gc.ca (DeTracey, Brendan)
Date: Sat, 28 Mar 2020 14:58:53 +0000
Subject: [PROJ] How does proj deal with ellipsoid with respect to
	reprojection
Message-ID: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>

Hi,

I am using a gnomonic projection for point in polygon testing. The transformation is:

projinfo -s EPSG:4326 -t ' +type=crs +ellps=WGS84  +datum=WGS84 +proj=gnom +lat_0=61.39107201212929 +lon_0=-58.56360634793518'

Will transformed great circles still be straight lines? Or does the fact that my source and target ellipse/datum are the same mean the gnomonic projection has the WGS4 coordinates passed directly to it? My confusion comes from gnomonic only being defined for a sphere, not an ellipsoid. 

Any clarification would be appreciated.

Thanks,
Brendan



From even.rouault at spatialys.com  Sat Mar 28 08:30:43 2020
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 28 Mar 2020 16:30:43 +0100
Subject: [PROJ] How does proj deal with ellipsoid with respect to
	reprojection
In-Reply-To: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>
References: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>
Message-ID: <1711759.14SRXLAJzD@even-i700>

Brendan,

> Or does the fact
> that my source and target ellipse/datum are the same mean the gnomonic
> projection has the WGS4 coordinates passed directly to it?

Yes, given that the source and target datums are the same, no change in geographic 
coordinate is done.

And given that the implementation of gnomonic is for a sphere only, the flattening 
of WGS84 is ignored. So you'll get the same result as if it was a sphere of radius 
6378137 metres

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200328/fbbbbbcb/attachment.html>

From martin.desruisseaux at geomatys.com  Sat Mar 28 09:02:10 2020
From: martin.desruisseaux at geomatys.com (Martin Desruisseaux)
Date: Sat, 28 Mar 2020 17:02:10 +0100
Subject: [PROJ] How does proj deal with ellipsoid with respect to
 reprojection
In-Reply-To: <1711759.14SRXLAJzD@even-i700>
References: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>
 <1711759.14SRXLAJzD@even-i700>
Message-ID: <2af2d3d1-4db7-26ca-7b33-3cda173e2c8d@geomatys.com>

Le 28/03/2020 à 16:30, Even Rouault a écrit :

> And given that the implementation of gnomonic is for a sphere only, 
> the flattening of WGS84 is ignored. So you'll get the same result as 
> if it was a sphere of radius 6378137 metres.
>
Just a little note in case it may be considered worth to apply: in 
situations where spherical formulas are used with an ellipsoid, EPSG 
approach is often to use the authalic radius (the radius of a sphere of 
same surface than the ellipsoid) instead than the semi-major axis length.

https://en.wikipedia.org/wiki/Earth_radius#Authalic_radius

     Martin


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200328/b1187786/attachment.html>

From Brendan.DeTracey at dfo-mpo.gc.ca  Sat Mar 28 09:12:20 2020
From: Brendan.DeTracey at dfo-mpo.gc.ca (DeTracey, Brendan)
Date: Sat, 28 Mar 2020 16:12:20 +0000
Subject: [PROJ] How does proj deal with ellipsoid with respect to
 reprojection
In-Reply-To: <2af2d3d1-4db7-26ca-7b33-3cda173e2c8d@geomatys.com>
References: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>
 <1711759.14SRXLAJzD@even-i700>,
 <2af2d3d1-4db7-26ca-7b33-3cda173e2c8d@geomatys.com>
Message-ID: <22C6A8A4889F0C45B71BF3272671822ED268BC06@SVNSBIOMBX02.ENT.dfo-mpo.ca>

 Even and Martin. Thanks so much for your replies. Stay safe my friends!


From: PROJ [proj-bounces at lists.osgeo.org] on behalf of Martin Desruisseaux [martin.desruisseaux at geomatys.com]

Sent: March 28, 2020 1:02 PM

To: proj at lists.osgeo.org

Subject: Re: [PROJ] How does proj deal with ellipsoid with respect to reprojection







Le 28/03/2020 à 16:30, Even Rouault a écrit :



<!--
p, li
	{white-space:pre-w}
-->
And given that the implementation of gnomonic is for a sphere only, the flattening of WGS84 is ignored. So you'll get the same result as if it was a sphere of radius 6378137 metres.

Just a little note in case it may be considered worth to apply: in situations where spherical formulas are used with an ellipsoid, EPSG approach is often to use the authalic radius (the radius of a sphere of same surface than the ellipsoid) instead than
 the semi-major axis length.
https://en.wikipedia.org/wiki/Earth_radius#Authalic_radius
    Martin







From charles at karney.com  Sat Mar 28 09:47:55 2020
From: charles at karney.com (Charles Karney)
Date: Sat, 28 Mar 2020 12:47:55 -0400
Subject: [PROJ] How does proj deal with ellipsoid with respect to
 reprojection
In-Reply-To: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>
References: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>
Message-ID: <4d4df07c-d7ee-8c98-42b4-71015ba9aaeb@karney.com>

Maybe one of these days I'll get around to implementing the ellipsoidal
version of the gnomonic projection in PROJ.  I derived this in
Algorithms for Geodesics (2013) and it's been in GeographicLib since
2010.  With this projection, geodesics on the ellipsoid and *nearly*
straight.  It's a good way of converting several problems involving
geodesics into equivalent 2d problems.

By the way, the documentation labels the gnomonic projection as
"pseudocylindrical".  This should be "azimuthal".

On 3/28/20 10:58 AM, DeTracey, Brendan wrote:
> Hi,
> 
> I am using a gnomonic projection for point in polygon testing. The transformation is:
> 
> projinfo -s EPSG:4326 -t ' +type=crs +ellps=WGS84  +datum=WGS84 +proj=gnom +lat_0=61.39107201212929 +lon_0=-58.56360634793518'
> 
> Will transformed great circles still be straight lines? Or does the fact that my source and target ellipse/datum are the same mean the gnomonic projection has the WGS4 coordinates passed directly to it? My confusion comes from gnomonic only being defined for a sphere, not an ellipsoid.
> 
> Any clarification would be appreciated.
> 
> Thanks,
> Brendan
> 

From phma at bezitopo.org  Sat Mar 28 17:27:00 2020
From: phma at bezitopo.org (Pierre Abbat)
Date: Sat, 28 Mar 2020 20:27:00 -0400
Subject: [PROJ] How does proj deal with ellipsoid with respect
	to	reprojection
In-Reply-To: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>
References: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>
Message-ID: <2909130.FKYitx7BoF@puma>

On Saturday, 28 March 2020 10:58:53 EDT DeTracey, Brendan wrote:
> Hi,
> 
> I am using a gnomonic projection for point in polygon testing. The
> transformation is:
> 
> projinfo -s EPSG:4326 -t ' +type=crs +ellps=WGS84  +datum=WGS84 +proj=gnom
> +lat_0=61.39107201212929 +lon_0=-58.56360634793518'
> 
> Will transformed great circles still be straight lines? Or does the fact
> that my source and target ellipse/datum are the same mean the gnomonic
> projection has the WGS4 coordinates passed directly to it? My confusion
> comes from gnomonic only being defined for a sphere, not an ellipsoid.

In Bezitopo, I use a stereographic projection for point-in-polygon testing. 
This avoids the problem with the gnomonic projection that a polygon may cross 
the great circle which is projected to infinity. In stereographic, only one 
point is projected to infinity, and I chose it to be in the ocean, more than a 
megameter from any land, and with unround coordinates. Stereographic turns 
great circles into circles, so a spherical polygon turns into a polyarc in the 
plane, which I can handle easily.

Pierre
-- 
When a barnacle settles down, its brain disintegrates.
Já não percebe nada, já não percebe nada.




From Jochem.Lesparre at kadaster.nl  Sat Mar 28 23:28:57 2020
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Sun, 29 Mar 2020 06:28:57 +0000
Subject: [PROJ] How does proj deal with ellipsoid with
	respect	to	reprojection
In-Reply-To: <2909130.FKYitx7BoF@puma>
References: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>,
 <2909130.FKYitx7BoF@puma>
Message-ID: <AM6P192MB04704F3F5D3A6C486A6C2F71EFCA0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>

Doing point in polygon in a projection will result in occasional wrong conclusions. A point near de edge can seem to be inside the polygon while it's outside, or the other way around, since a straight line in the projection deviates from the geodesic.

I analysed this problem for the Netherlands (51 - 55 degrees north) in the azimuthal projection (+proj=sterea) of the national coordinate reference system RD (epsg:28992) and in plate-caree projection (+proj=lonlat). The deviation depends on the length, orientation and location of a polygon segment. I computed the maximum possible deviation in the Netherlands for both projections to advise the Dutch government not to allow any segments longer than 200 m in a new digital storage system for policy and zoning borders.

Table for the Netherlands:
Segment length, RD deviation, lonlat deviation;

500 km, 160 m, 6 km;
200 km, 25 m, 1 km;
100 km, 6.4 m, 0.2 km;
50 km, 1.6 m, 60 m;
20 km, 26 cm, 9.7 m;
10 km, 8 cm, 2.4 m;
5 km, 3 cm, 60 cm;
2 km, 5 mm, 9.7 cm;
1 km, 1.3 mm, 2.4 cm;
500 m, 0.3 mm, 6 mm;
200 m, <0.1 mm, 1 mm;
100 m, <0.1 mm, 0.2 mm;
50 m, <0.1 mm, <0.1 mm

This means that when you first split long segments of polygons by adding enough points along the geodesic, you could do a point in polygon even in lonlat. The required distance between the added points depends on the location (latitude). Near the poles it will get a bit tricky, as the maximum deviation increases to 50% of the size of the segment length.

Regards, Jochem










________________________________
From: PROJ <proj-bounces at lists.osgeo.org> on behalf of Pierre Abbat <phma at bezitopo.org>
Sent: Sunday, March 29, 2020 1:27:00 AM
To: proj at lists.osgeo.org <proj at lists.osgeo.org>
Subject: Re: [PROJ] How does proj deal with ellipsoid with respect to reprojection

On Saturday, 28 March 2020 10:58:53 EDT DeTracey, Brendan wrote:
> Hi,
>
> I am using a gnomonic projection for point in polygon testing. The
> transformation is:
>
> projinfo -s EPSG:4326 -t ' +type=crs +ellps=WGS84  +datum=WGS84 +proj=gnom
> +lat_0=61.39107201212929 +lon_0=-58.56360634793518'
>
> Will transformed great circles still be straight lines? Or does the fact
> that my source and target ellipse/datum are the same mean the gnomonic
> projection has the WGS4 coordinates passed directly to it? My confusion
> comes from gnomonic only being defined for a sphere, not an ellipsoid.

In Bezitopo, I use a stereographic projection for point-in-polygon testing.
This avoids the problem with the gnomonic projection that a polygon may cross
the great circle which is projected to infinity. In stereographic, only one
point is projected to infinity, and I chose it to be in the ocean, more than a
megameter from any land, and with unround coordinates. Stereographic turns
great circles into circles, so a spherical polygon turns into a polyarc in the
plane, which I can handle easily.

Pierre
--
When a barnacle settles down, its brain disintegrates.
Já não percebe nada, já não percebe nada.



_______________________________________________
PROJ mailing list
PROJ at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/proj
________________________________
From: PROJ <proj-bounces at lists.osgeo.org> on behalf of Pierre Abbat <phma at bezitopo.org>
Sent: Sunday, March 29, 2020 1:27:00 AM
To: proj at lists.osgeo.org <proj at lists.osgeo.org>
Subject: Re: [PROJ] How does proj deal with ellipsoid with respect to reprojection

On Saturday, 28 March 2020 10:58:53 EDT DeTracey, Brendan wrote:
> Hi,
>
> I am using a gnomonic projection for point in polygon testing. The
> transformation is:
>
> projinfo -s EPSG:4326 -t ' +type=crs +ellps=WGS84  +datum=WGS84 +proj=gnom
> +lat_0=61.39107201212929 +lon_0=-58.56360634793518'
>
> Will transformed great circles still be straight lines? Or does the fact
> that my source and target ellipse/datum are the same mean the gnomonic
> projection has the WGS4 coordinates passed directly to it? My confusion
> comes from gnomonic only being defined for a sphere, not an ellipsoid.

In Bezitopo, I use a stereographic projection for point-in-polygon testing.
This avoids the problem with the gnomonic projection that a polygon may cross
the great circle which is projected to infinity. In stereographic, only one
point is projected to infinity, and I chose it to be in the ocean, more than a
megameter from any land, and with unround coordinates. Stereographic turns
great circles into circles, so a spherical polygon turns into a polyarc in the
plane, which I can handle easily.

Pierre
--
When a barnacle settles down, its brain disintegrates.
Já não percebe nada, já não percebe nada.



_______________________________________________
PROJ mailing list
PROJ at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/proj


Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster 
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u 
dit direct te melden aan de verzender en het bericht te vernietigen. 
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent 
of the Kadaster is unlawful. If you have received this message, but are not the addressee, 
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200329/a671f9d8/attachment-0001.html>

From phma at bezitopo.org  Sun Mar 29 00:00:01 2020
From: phma at bezitopo.org (Pierre Abbat)
Date: Sun, 29 Mar 2020 03:00:01 -0400
Subject: [PROJ] How does proj deal with ellipsoid with	respect	to
	reprojection
In-Reply-To: <AM6P192MB04704F3F5D3A6C486A6C2F71EFCA0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>
References: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>
 <2909130.FKYitx7BoF@puma>
 <AM6P192MB04704F3F5D3A6C486A6C2F71EFCA0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>
Message-ID: <4238607.ObIyi6PrHb@puma>

On Sunday, 29 March 2020 02:28:57 EDT Lesparre, Jochem wrote:
> Doing point in polygon in a projection will result in occasional wrong
> conclusions. A point near de edge can seem to be inside the polygon while
> it's outside, or the other way around, since a straight line in the
> projection deviates from the geodesic.
 
> I analysed this problem for the Netherlands (51 - 55 degrees north) in the
> azimuthal projection (+proj=sterea) of the national coordinate reference
> system RD (epsg:28992) and in plate-caree projection (+proj=lonlat). The
> deviation depends on the length, orientation and location of a polygon
> segment. I computed the maximum possible deviation in the Netherlands for
> both projections to advise the Dutch government not to allow any segments
> longer than 200 m in a new digital storage system for policy and zoning
> borders.

When doing point in polygon in the spherical stereographic projection, you are 
checking circular arcs, not straight lines, in the plane. A geodesic projects 
to a circle. How much does a geodesic of an ellipsoid, projected conformally 
onto a sphere, differ from a geodesic of a sphere?

Pierre
-- 
When a barnacle settles down, its brain disintegrates.
Já não percebe nada, já não percebe nada.




From Jochem.Lesparre at kadaster.nl  Sun Mar 29 00:33:18 2020
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Sun, 29 Mar 2020 07:33:18 +0000
Subject: [PROJ] How does proj deal with ellipsoid
	with	respect	to	reprojection
In-Reply-To: <4238607.ObIyi6PrHb@puma>
References: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>
 <2909130.FKYitx7BoF@puma>
 <AM6P192MB04704F3F5D3A6C486A6C2F71EFCA0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>,
 <4238607.ObIyi6PrHb@puma>
Message-ID: <AM6P192MB047085FBBA4DB45ECF235215EFCA0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>

Pierre,

For my analysis, I assumed someone without much geodetic knowlegde doing a point in polygon in projected coordinates would treat these coordates as unprojected cartesian coordinates. Are you saying that is an incorrect assumption?

I'm not sure if I understand your question correctly. I think the answer might be the RD column of my table. This is the deviation between a conformally projected geodesic of an ellipsoid with a line y=ax+b in +proj=sterea.

Regards, Jochem

Get Outlook for Android<https://aka.ms/ghei36>

________________________________
From: PROJ <proj-bounces at lists.osgeo.org> on behalf of Pierre Abbat <phma at bezitopo.org>
Sent: Sunday, March 29, 2020 9:00:01 AM
To: proj at lists.osgeo.org <proj at lists.osgeo.org>
Subject: Re: [PROJ] How does proj deal with ellipsoid with respect to reprojection

On Sunday, 29 March 2020 02:28:57 EDT Lesparre, Jochem wrote:
> Doing point in polygon in a projection will result in occasional wrong
> conclusions. A point near de edge can seem to be inside the polygon while
> it's outside, or the other way around, since a straight line in the
> projection deviates from the geodesic.

> I analysed this problem for the Netherlands (51 - 55 degrees north) in the
> azimuthal projection (+proj=sterea) of the national coordinate reference
> system RD (epsg:28992) and in plate-caree projection (+proj=lonlat). The
> deviation depends on the length, orientation and location of a polygon
> segment. I computed the maximum possible deviation in the Netherlands for
> both projections to advise the Dutch government not to allow any segments
> longer than 200 m in a new digital storage system for policy and zoning
> borders.

When doing point in polygon in the spherical stereographic projection, you are
checking circular arcs, not straight lines, in the plane. A geodesic projects
to a circle. How much does a geodesic of an ellipsoid, projected conformally
onto a sphere, differ from a geodesic of a sphere?

Pierre
--
When a barnacle settles down, its brain disintegrates.
Já não percebe nada, já não percebe nada.



_______________________________________________
PROJ mailing list
PROJ at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/proj


Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster 
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u 
dit direct te melden aan de verzender en het bericht te vernietigen. 
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent 
of the Kadaster is unlawful. If you have received this message, but are not the addressee, 
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200329/e7ccc7ee/attachment.html>

From phma at bezitopo.org  Sun Mar 29 03:42:12 2020
From: phma at bezitopo.org (Pierre Abbat)
Date: Sun, 29 Mar 2020 06:42:12 -0400
Subject: [PROJ] How does proj deal with ellipsoid	with	respect	to
	reprojection
In-Reply-To: <AM6P192MB047085FBBA4DB45ECF235215EFCA0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>
References: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>
 <4238607.ObIyi6PrHb@puma>
 <AM6P192MB047085FBBA4DB45ECF235215EFCA0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>
Message-ID: <4183011.qAnxAXoeNg@puma>

On Sunday, 29 March 2020 03:33:18 EDT Lesparre, Jochem wrote:
> Pierre,
> 
> For my analysis, I assumed someone without much geodetic knowlegde doing a
> point in polygon in projected coordinates would treat these coordates as
> unprojected cartesian coordinates. Are you saying that is an incorrect
> assumption?

I'm not sure if it's a valid assumption or not, but it's not what I was doing. 
I was writing code to do two related things:
* When excerpting a geoid file, write a KML file which shows the boundary;
* Determine whether a point is in the boundary of a projection.
For the first, I figured a precision of a meter is good enough. For the second, 
boundaries are several kilometers larger than the jurisdiction covered by the 
projection, because sometimes a survey includes parts of two counties, or even 
parts of two states, and the coordinates need to be shown in both projections.

The code I wrote treats the coordinates as spherical and the lines between 
points as spherical geodesics (arcs of great circles). When drawing the 
northern or southern boundary of an excerpt of a geoid file in a geolattice 
format, the boundaries are parallels of latitude, so I have to subdivide them 
into enough points that the spherical geodesics between them approximate the 
parallels of latitude within a meter. The KML code uses the point-in-polygon 
test to determine which boundary is inside which.

The code I wrote has to handle polygons anywhere on the Earth. Point 196, the 
point that is projected to infinity, lies inside UTM zone 10 South. The 
boundary of that zone (which hasn't been entered yet) is projected inside-out, 
so points inside the zone are outside its projection, but the program returns 
the correct answer because the area of the projection is negative. The 
attached file shows two parallelograms, one around the antipode of point 196, 
which is near Arabia, and one around point 196, which is in the Pacific, as 
projected.

> I'm not sure if I understand your question correctly. I think the answer
> might be the RD column of my table. This is the deviation between a
> conformally projected geodesic of an ellipsoid with a line y=ax+b in
> +proj=sterea.

I looked up the projection used in the Netherlands; it's a conformal 
projection from the ellipsoid to the sphere, followed by a stereographic 
projection. I'm asking for the deviation between a conformally projected 
geodesic of an ellipsoid (which is a plane curve not easily expressible in 
closed form) and a conformally projected geodesic of a sphere (which is an arc 
of a circle).

Pierre
-- 
Don't buy a French car in Holland. It may be a citroen.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: podes.ps
Type: application/postscript
Size: 1944 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20200329/aa2c3c3e/attachment.ps>

From charles at karney.com  Sun Mar 29 07:17:01 2020
From: charles at karney.com (Charles Karney)
Date: Sun, 29 Mar 2020 10:17:01 -0400
Subject: [PROJ] How does proj deal with ellipsoid with respect to
 reprojection
In-Reply-To: <AM6P192MB04704F3F5D3A6C486A6C2F71EFCA0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>
References: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>
 <2909130.FKYitx7BoF@puma>
 <AM6P192MB04704F3F5D3A6C486A6C2F71EFCA0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>
Message-ID: <b6334da3-f058-0a0a-0dc0-effc567f655e@karney.com>

Jochem,

Here's the equivalent table for the ellipsoidal gnomonic projection as
it applies (roughly) to the Netherlands.  I use the ellipsoidal gnomonic
projection centered at lat = 52 deg.  I considered geodesic line
segments of length S whose centers are 500 km from the center of the
projection.  I then computed D, the maximum deviation of the straight
line in the projection from the geodesic.

       S     max-deviation
     500 km   99 mm
     200 km   16 mm
     100 km    4 mm
      50 km  985 um
      20 km  158 um
      10 km   40 um
       5 km   10 um
       2 km    2 um
       1 km  394 nm
      500 m   99 nm
      200 m   18 nm

On 3/29/20 2:28 AM, Lesparre, Jochem wrote:
> Doing point in polygon in a projection will result in occasional wrong 
> conclusions. A point near de edge can seem to be inside the polygon 
> while it's outside, or the other way around, since a straight line in 
> the projection deviates from the geodesic.
> 
> I analysed this problem for the Netherlands (51 - 55 degrees north) in 
> the azimuthal projection (+proj=sterea) of the national coordinate 
> reference system RD (epsg:28992) and in plate-caree projection 
> (+proj=lonlat). The deviation depends on the length, orientation and 
> location of a polygon segment. I computed the maximum possible deviation 
> in the Netherlands for both projections to advise the Dutch government 
> not to allow any segments longer than 200 m in a new digital storage 
> system for policy and zoning borders.
> 
> Table for the Netherlands:
> Segment length, RD deviation, lonlat deviation;
> 
> 500 km, 160 m, 6 km;
> 200 km, 25 m, 1 km;
> 100 km, 6.4 m, 0.2 km;
> 50 km, 1.6 m, 60 m;
> 20 km, 26 cm, 9.7 m;
> 10 km, 8 cm, 2.4 m;
> 5 km, 3 cm, 60 cm;
> 2 km, 5 mm, 9.7 cm;
> 1 km, 1.3 mm, 2.4 cm;
> 500 m, 0.3 mm, 6 mm;
> 200 m, <0.1 mm, 1 mm;
> 100 m, <0.1 mm, 0.2 mm;
> 50 m, <0.1 mm, <0.1 mm
> 
> This means that when you first split long segments of polygons by adding 
> enough points along the geodesic, you could do a point in polygon even 
> in lonlat. The required distance between the added points depends on the 
> location (latitude). Near the poles it will get a bit tricky, as the 
> maximum deviation increases to 50% of the size of the segment length.
> 
> Regards, Jochem
> 

From Jochem.Lesparre at kadaster.nl  Mon Mar 30 01:12:05 2020
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Mon, 30 Mar 2020 08:12:05 +0000
Subject: [PROJ] How does proj deal with ellipsoid with respect to
 reprojection
In-Reply-To: <b6334da3-f058-0a0a-0dc0-effc567f655e@karney.com>
References: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>
 <2909130.FKYitx7BoF@puma>
 <AM6P192MB04704F3F5D3A6C486A6C2F71EFCA0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>
 <b6334da3-f058-0a0a-0dc0-effc567f655e@karney.com>
Message-ID: <AM6P192MB0470B2BDDF445BB0245EEA04EFCB0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>

Charles,

Thanks, that is very interesting! It shows that the gnomic projection gives quite good results, despite neglecting the flattening. For point in polygon with 1 mm accuracy, segments of 50 km are allowed. This makes it probably more efficient than adding additional points every 200 m for +proj=lonlat. Since geodetic knowledge is becoming more and more scarce in the Netherlands, I probably keep advising the use of segments of maximum 200 m to avoid misinterpretation by laymen. 

Regards, Jochem  

-----Original Message-----
From: Charles Karney <charles.karney at gmail.com> On Behalf Of Charles Karney
Sent: zondag 29 maart 2020 16:17
To: Lesparre, Jochem <Jochem.Lesparre at kadaster.nl>; proj at lists.osgeo.org
Cc: Pierre Abbat <phma at bezitopo.org>
Subject: Re: [PROJ] How does proj deal with ellipsoid with respect to reprojection

Jochem,

Here's the equivalent table for the ellipsoidal gnomonic projection as it applies (roughly) to the Netherlands.  I use the ellipsoidal gnomonic projection centered at lat = 52 deg.  I considered geodesic line segments of length S whose centers are 500 km from the center of the projection.  I then computed D, the maximum deviation of the straight line in the projection from the geodesic.

       S     max-deviation
     500 km   99 mm
     200 km   16 mm
     100 km    4 mm
      50 km  985 um
      20 km  158 um
      10 km   40 um
       5 km   10 um
       2 km    2 um
       1 km  394 nm
      500 m   99 nm
      200 m   18 nm

On 3/29/20 2:28 AM, Lesparre, Jochem wrote:
> Doing point in polygon in a projection will result in occasional wrong 
> conclusions. A point near de edge can seem to be inside the polygon 
> while it's outside, or the other way around, since a straight line in 
> the projection deviates from the geodesic.
> 
> I analysed this problem for the Netherlands (51 - 55 degrees north) in 
> the azimuthal projection (+proj=sterea) of the national coordinate 
> reference system RD (epsg:28992) and in plate-caree projection 
> (+proj=lonlat). The deviation depends on the length, orientation and 
> location of a polygon segment. I computed the maximum possible 
> deviation in the Netherlands for both projections to advise the Dutch 
> government not to allow any segments longer than 200 m in a new 
> digital storage system for policy and zoning borders.
> 
> Table for the Netherlands:
> Segment length, RD deviation, lonlat deviation;
> 
> 500 km, 160 m, 6 km;
> 200 km, 25 m, 1 km;
> 100 km, 6.4 m, 0.2 km;
> 50 km, 1.6 m, 60 m;
> 20 km, 26 cm, 9.7 m;
> 10 km, 8 cm, 2.4 m;
> 5 km, 3 cm, 60 cm;
> 2 km, 5 mm, 9.7 cm;
> 1 km, 1.3 mm, 2.4 cm;
> 500 m, 0.3 mm, 6 mm;
> 200 m, <0.1 mm, 1 mm;
> 100 m, <0.1 mm, 0.2 mm;
> 50 m, <0.1 mm, <0.1 mm
> 
> This means that when you first split long segments of polygons by 
> adding enough points along the geodesic, you could do a point in 
> polygon even in lonlat. The required distance between the added points 
> depends on the location (latitude). Near the poles it will get a bit 
> tricky, as the maximum deviation increases to 50% of the size of the segment length.
> 
> Regards, Jochem
> 


Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster 
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u 
dit direct te melden aan de verzender en het bericht te vernietigen. 
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent 
of the Kadaster is unlawful. If you have received this message, but are not the addressee, 
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message

From charles at karney.com  Mon Mar 30 04:13:09 2020
From: charles at karney.com (Charles Karney)
Date: Mon, 30 Mar 2020 07:13:09 -0400
Subject: [PROJ] How does proj deal with ellipsoid with respect to
 reprojection
In-Reply-To: <AM6P192MB0470B2BDDF445BB0245EEA04EFCB0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>
References: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>
 <2909130.FKYitx7BoF@puma>
 <AM6P192MB04704F3F5D3A6C486A6C2F71EFCA0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>
 <b6334da3-f058-0a0a-0dc0-effc567f655e@karney.com>
 <AM6P192MB0470B2BDDF445BB0245EEA04EFCB0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>
Message-ID: <196d1014-5b68-0802-a379-86aa10fd16c9@karney.com>

Jochem,

My results use the *ellipsoidal* gnomonic projection.  (This isn't
provided by PROJ.  GeographicLib does provide it.  For my experiments I
used the MATLAB/Octave version of GeographicLib.)  With the spherical
version of the gnomonic projections, the deviations are about 170 times
larger (deviation is 166.3 m for segment length 500km and it varies
quadratically with the length of the segment).  This is still 10 times
better that your RD results.

Requiring that all polygon segments be 200 m or less would seem incur a
large recurring cost for storing and processing (and even understanding)
the data.  Surely a better scheme would be to store the data with the
minimum number of vertices but (optionally) computing intermediate
vertices on the fly when delivering the data to the end user.

   --Charles

On 3/30/20 4:12 AM, Lesparre, Jochem wrote:
> Charles,
> 
> Thanks, that is very interesting! It shows that the gnomic projection gives quite good results, despite neglecting the flattening. For point in polygon with 1 mm accuracy, segments of 50 km are allowed. This makes it probably more efficient than adding additional points every 200 m for +proj=lonlat. Since geodetic knowledge is becoming more and more scarce in the Netherlands, I probably keep advising the use of segments of maximum 200 m to avoid misinterpretation by laymen.
> 
> Regards, Jochem
> 
> -----Original Message-----
> From: Charles Karney <charles.karney at gmail.com> On Behalf Of Charles Karney
> Sent: zondag 29 maart 2020 16:17
> To: Lesparre, Jochem <Jochem.Lesparre at kadaster.nl>; proj at lists.osgeo.org
> Cc: Pierre Abbat <phma at bezitopo.org>
> Subject: Re: [PROJ] How does proj deal with ellipsoid with respect to reprojection
> 
> Jochem,
> 
> Here's the equivalent table for the ellipsoidal gnomonic projection as it applies (roughly) to the Netherlands.  I use the ellipsoidal gnomonic projection centered at lat = 52 deg.  I considered geodesic line segments of length S whose centers are 500 km from the center of the projection.  I then computed D, the maximum deviation of the straight line in the projection from the geodesic.
> 
>         S     max-deviation
>       500 km   99 mm
>       200 km   16 mm
>       100 km    4 mm
>        50 km  985 um
>        20 km  158 um
>        10 km   40 um
>         5 km   10 um
>         2 km    2 um
>         1 km  394 nm
>        500 m   99 nm
>        200 m   18 nm
> 
> On 3/29/20 2:28 AM, Lesparre, Jochem wrote:
>> Doing point in polygon in a projection will result in occasional wrong
>> conclusions. A point near de edge can seem to be inside the polygon
>> while it's outside, or the other way around, since a straight line in
>> the projection deviates from the geodesic.
>>
>> I analysed this problem for the Netherlands (51 - 55 degrees north) in
>> the azimuthal projection (+proj=sterea) of the national coordinate
>> reference system RD (epsg:28992) and in plate-caree projection
>> (+proj=lonlat). The deviation depends on the length, orientation and
>> location of a polygon segment. I computed the maximum possible
>> deviation in the Netherlands for both projections to advise the Dutch
>> government not to allow any segments longer than 200 m in a new
>> digital storage system for policy and zoning borders.
>>
>> Table for the Netherlands:
>> Segment length, RD deviation, lonlat deviation;
>>
>> 500 km, 160 m, 6 km;
>> 200 km, 25 m, 1 km;
>> 100 km, 6.4 m, 0.2 km;
>> 50 km, 1.6 m, 60 m;
>> 20 km, 26 cm, 9.7 m;
>> 10 km, 8 cm, 2.4 m;
>> 5 km, 3 cm, 60 cm;
>> 2 km, 5 mm, 9.7 cm;
>> 1 km, 1.3 mm, 2.4 cm;
>> 500 m, 0.3 mm, 6 mm;
>> 200 m, <0.1 mm, 1 mm;
>> 100 m, <0.1 mm, 0.2 mm;
>> 50 m, <0.1 mm, <0.1 mm
>>
>> This means that when you first split long segments of polygons by
>> adding enough points along the geodesic, you could do a point in
>> polygon even in lonlat. The required distance between the added points
>> depends on the location (latitude). Near the poles it will get a bit
>> tricky, as the maximum deviation increases to 50% of the size of the segment length.
>>
>> Regards, Jochem
>>


From Jochem.Lesparre at kadaster.nl  Mon Mar 30 05:26:53 2020
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Mon, 30 Mar 2020 12:26:53 +0000
Subject: [PROJ] How does proj deal with ellipsoid with respect to
 reprojection
In-Reply-To: <196d1014-5b68-0802-a379-86aa10fd16c9@karney.com>
References: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>
 <2909130.FKYitx7BoF@puma>
 <AM6P192MB04704F3F5D3A6C486A6C2F71EFCA0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>
 <b6334da3-f058-0a0a-0dc0-effc567f655e@karney.com>
 <AM6P192MB0470B2BDDF445BB0245EEA04EFCB0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>
 <196d1014-5b68-0802-a379-86aa10fd16c9@karney.com>
Message-ID: <AM6P192MB04705A5232ABF6E81231DB98EFCB0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>


Charles,

> My results use the *ellipsoidal* gnomonic projection.  

Ah, that explains the accurate results.


> This [spherical] is still 10 times better that your RD results.

That's why I suggested not to use point in polygon in RD with long segments.


> Requiring that all polygon segments be 200 m or less would seem incur a large recurring cost for storing and processing (and even understanding) the data.  

Indeed, but most border polygons have no segments longer than 200 m (the Netherlands is a very crowded country). 


> Surely a better scheme would be to store the data with the minimum number of vertices but (optionally) computing intermediate vertices on the fly when delivering the data to the end user.

It would indeed. This is tricky however. The digital storage system doesn't know whether the legal authorities meant to define a geodesic, rhumb line or a y=ax+b line in the national projected CRS (RD) for a policy or a zoning border. To avoid this problem, it is more safe to force the legal authorities to be specific, without having to explain them the difference between a geodesic, rhumb line, projections etc. 

Regards, Jochem


On 3/30/20 4:12 AM, Lesparre, Jochem wrote:
> Charles,
> 
> Thanks, that is very interesting! It shows that the gnomic projection gives quite good results, despite neglecting the flattening. For point in polygon with 1 mm accuracy, segments of 50 km are allowed. This makes it probably more efficient than adding additional points every 200 m for +proj=lonlat. Since geodetic knowledge is becoming more and more scarce in the Netherlands, I probably keep advising the use of segments of maximum 200 m to avoid misinterpretation by laymen.
> 
> Regards, Jochem
> 
> -----Original Message-----
> From: Charles Karney <charles.karney at gmail.com> On Behalf Of Charles 
> Karney
> Sent: zondag 29 maart 2020 16:17
> To: Lesparre, Jochem <Jochem.Lesparre at kadaster.nl>; 
> proj at lists.osgeo.org
> Cc: Pierre Abbat <phma at bezitopo.org>
> Subject: Re: [PROJ] How does proj deal with ellipsoid with respect to 
> reprojection
> 
> Jochem,
> 
> Here's the equivalent table for the ellipsoidal gnomonic projection as it applies (roughly) to the Netherlands.  I use the ellipsoidal gnomonic projection centered at lat = 52 deg.  I considered geodesic line segments of length S whose centers are 500 km from the center of the projection.  I then computed D, the maximum deviation of the straight line in the projection from the geodesic.
> 
>         S     max-deviation
>       500 km   99 mm
>       200 km   16 mm
>       100 km    4 mm
>        50 km  985 um
>        20 km  158 um
>        10 km   40 um
>         5 km   10 um
>         2 km    2 um
>         1 km  394 nm
>        500 m   99 nm
>        200 m   18 nm
> 
> On 3/29/20 2:28 AM, Lesparre, Jochem wrote:
>> Doing point in polygon in a projection will result in occasional 
>> wrong conclusions. A point near de edge can seem to be inside the 
>> polygon while it's outside, or the other way around, since a straight 
>> line in the projection deviates from the geodesic.
>>
>> I analysed this problem for the Netherlands (51 - 55 degrees north) 
>> in the azimuthal projection (+proj=sterea) of the national coordinate 
>> reference system RD (epsg:28992) and in plate-caree projection 
>> (+proj=lonlat). The deviation depends on the length, orientation and 
>> location of a polygon segment. I computed the maximum possible 
>> deviation in the Netherlands for both projections to advise the Dutch 
>> government not to allow any segments longer than 200 m in a new 
>> digital storage system for policy and zoning borders.
>>
>> Table for the Netherlands:
>> Segment length, RD deviation, lonlat deviation;
>>
>> 500 km, 160 m, 6 km;
>> 200 km, 25 m, 1 km;
>> 100 km, 6.4 m, 0.2 km;
>> 50 km, 1.6 m, 60 m;
>> 20 km, 26 cm, 9.7 m;
>> 10 km, 8 cm, 2.4 m;
>> 5 km, 3 cm, 60 cm;
>> 2 km, 5 mm, 9.7 cm;
>> 1 km, 1.3 mm, 2.4 cm;
>> 500 m, 0.3 mm, 6 mm;
>> 200 m, <0.1 mm, 1 mm;
>> 100 m, <0.1 mm, 0.2 mm;
>> 50 m, <0.1 mm, <0.1 mm
>>
>> This means that when you first split long segments of polygons by 
>> adding enough points along the geodesic, you could do a point in 
>> polygon even in lonlat. The required distance between the added 
>> points depends on the location (latitude). Near the poles it will get 
>> a bit tricky, as the maximum deviation increases to 50% of the size of the segment length.
>>
>> Regards, Jochem
>>



Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster 
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u 
dit direct te melden aan de verzender en het bericht te vernietigen. 
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent 
of the Kadaster is unlawful. If you have received this message, but are not the addressee, 
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message

From charles at karney.com  Mon Mar 30 05:34:44 2020
From: charles at karney.com (Charles Karney)
Date: Mon, 30 Mar 2020 08:34:44 -0400
Subject: [PROJ] How does proj deal with ellipsoid with respect to
 reprojection
In-Reply-To: <AM6P192MB04705A5232ABF6E81231DB98EFCB0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>
References: <22C6A8A4889F0C45B71BF3272671822ED268BBE3@SVNSBIOMBX02.ENT.dfo-mpo.ca>
 <2909130.FKYitx7BoF@puma>
 <AM6P192MB04704F3F5D3A6C486A6C2F71EFCA0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>
 <b6334da3-f058-0a0a-0dc0-effc567f655e@karney.com>
 <AM6P192MB0470B2BDDF445BB0245EEA04EFCB0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>
 <196d1014-5b68-0802-a379-86aa10fd16c9@karney.com>
 <AM6P192MB04705A5232ABF6E81231DB98EFCB0@AM6P192MB0470.EURP192.PROD.OUTLOOK.COM>
Message-ID: <02ef7fc8-65fe-6dc4-439b-f860549dda22@karney.com>

Ahh, OK.  But that's a somewhat different argument!

On 3/30/20 8:26 AM, Lesparre, Jochem wrote:
> It would indeed. This is tricky however. The digital storage system doesn't know whether the legal authorities meant to define a geodesic, rhumb line or a y=ax+b line in the national projected CRS (RD) for a policy or a zoning border. To avoid this problem, it is more safe to force the legal authorities to be specific, without having to explain them the difference between a geodesic, rhumb line, projections etc.

