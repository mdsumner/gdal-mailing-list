From j1 at jimenezshaw.com  Sun May  2 03:56:24 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Sun, 2 May 2021 12:56:24 +0200
Subject: [PROJ] About Argentinian geoid file
Message-ID: <CADRrdKuggNHEYCJsNghVF2MWRRRVkxGCV8TjGFciF6roie5KSg@mail.gmail.com>

Hi

I found that Argentina had published a geoid file for their geoid model
"GEOIDE-Ar16".
https://www.ign.gob.ar/NuestrasActividades/Geodesia/Geoide-Ar16

In EPSG everything is already registered:
- Vertical CRS: "SRVN16 height" EPSG:9255
- Geographic CRS: "POSGAR 2007" EPSG:5340 (2D) , EPSG:5342 (3D)
- Compound CRS: "POSGAR 2007 + SRVN16 height" EPSG:9521
- Transformations:
  "POSGAR 2007 to SRVN16 height (1)" EPSG:9256
  "POSGAR 2007 to POSGAR 2007 + SRVN16 height (1)" EPSG:9621

The "only missing piece" is the License:
https://www.ign.gob.ar/NuestrasActividades/Geodesia/Geoide-Ar16/calculadora
(click at the bottom in "T?rminos y Condiciones").
Their summary is
"- Debe reconocerse la autor?a del Instituto Geogr?fico Nacional de la
Rep?blica Argentina.
- Se debe compartir de manera libre y gratuita.
- Se permite su uso comercial ?nicamente en el caso de obras derivadas en
que la informaci?n sea utilizada como insumo para generar un nuevo producto.
- El IGN no se responsabiliza por las consecuencias de la utilizaci?n de la
informaci?n descargada."

I have already asked them if they can publish it with an standard open
license to include it in PROJ. They answered that they consider a good
initiative to include it in PROJ, but unfortunately it has only their
license from the IGN.

"Nos parece muy buena la iniciativa de incluir GEOIDE-Ar16 dentro de la
librer?a PROJ, pero lamentablemente por el momento el producto tiene
asociado el licenciamiento gen?rico y propio del IGN, el cual puede
consultar el texto completo de los t?rminos y condiciones dentro de
https://www.ign.gob.ar/NuestrasActividades/Geodesia/Geoide-Ar16/calculadora
(debajo de todo)."

What do we do now? I am not a lawyer.

Cheers,
Javier
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210502/560aed83/attachment.html>

From even.rouault at spatialys.com  Sun May  2 04:19:22 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 2 May 2021 13:19:22 +0200
Subject: [PROJ] About Argentinian geoid file
In-Reply-To: <CADRrdKuggNHEYCJsNghVF2MWRRRVkxGCV8TjGFciF6roie5KSg@mail.gmail.com>
References: <CADRrdKuggNHEYCJsNghVF2MWRRRVkxGCV8TjGFciF6roie5KSg@mail.gmail.com>
Message-ID: <9fb5c931-25a6-c07e-64dc-b4b8d9c8243f@spatialys.com>

Hi Javier,

funny a few months ago, I tweeted about that to get help from the 
Argentinian community but that didn't lead to anywhere. And just a 
couple days ago, I tried to reach someone who seemed to have been 
related to Geoide-Ar16 but didn't hear back.

The clause "Se debe compartir de manera libre y gratuita." (" It must be 
shared freely and for free." with free meaning costless here) is 
problematic as open data licenses must allow for commercial use.

I'm afraid we'd need a contact within IGN Argentina that has sufficient 
determination and influence internally so they can adopt a commonly used 
open data license. Probably pointing that many other geodetic agencies 
already do that could help.

Hint: if there are international instances/forums where national 
agencies collaborate together, it would be good if someone from this 
list that can speak in such forums could give an awareness talk about 
the importance of using open data licensing :-)

Even

Le 02/05/2021 ? 12:56, Javier Jimenez Shaw a ?crit?:
> Hi
>
> I found that Argentina had published a geoid file for their geoid 
> model "GEOIDE-Ar16". 
> https://www.ign.gob.ar/NuestrasActividades/Geodesia/Geoide-Ar16 
> <https://www.ign.gob.ar/NuestrasActividades/Geodesia/Geoide-Ar16>
>
> In EPSG everything is already registered:
> - Vertical CRS: "SRVN16 height" EPSG:9255
> - Geographic CRS: "POSGAR 2007" EPSG:5340 (2D) , EPSG:5342 (3D)
> - Compound CRS: "POSGAR 2007 + SRVN16 height" EPSG:9521
> - Transformations:
> ? "POSGAR 2007 to SRVN16 height (1)" EPSG:9256
> ? "POSGAR 2007 to POSGAR 2007 + SRVN16 height (1)" EPSG:9621
>
> The "only missing piece" is the License:
> https://www.ign.gob.ar/NuestrasActividades/Geodesia/Geoide-Ar16/calculadora 
> <https://www.ign.gob.ar/NuestrasActividades/Geodesia/Geoide-Ar16/calculadora> 
> (click at the bottom in "T?rminos y Condiciones").
> Their summary is
> "- Debe reconocerse la autor?a del Instituto Geogr?fico Nacional de la 
> Rep?blica Argentina.
> - Se debe compartir de manera libre y gratuita.
> - Se permite su uso comercial ?nicamente en el caso de obras derivadas 
> en que la informaci?n sea utilizada como insumo para generar un nuevo 
> producto.
> - El IGN no se responsabiliza por las consecuencias de la utilizaci?n 
> de la informaci?n descargada."
>
> I have already asked them if they can publish it with an standard open 
> license to include it in PROJ. They answered that they consider a good 
> initiative to include it in PROJ, but unfortunately it has only their 
> license from the IGN.
>
> "Nos parece muy buena la iniciativa de incluir GEOIDE-Ar16 dentro de 
> la librer?a PROJ, pero lamentablemente por el momento el producto 
> tiene asociado el licenciamiento gen?rico y propio del IGN, el cual 
> puede consultar el texto completo de los t?rminos y condiciones dentro 
> de 
> https://www.ign.gob.ar/NuestrasActividades/Geodesia/Geoide-Ar16/calculadora 
> <https://www.ign.gob.ar/NuestrasActividades/Geodesia/Geoide-Ar16/calculadora> 
> (debajo de todo)."
>
> What do we do now? I am not a lawyer.
>
> Cheers,
> Javier
> .___ ._ ..._ .. . ._. .___ .. __ . _. . __..? ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210502/8a0582b2/attachment.html>

From kristianevers at gmail.com  Mon May  3 10:36:44 2021
From: kristianevers at gmail.com (Kristian Evers)
Date: Mon, 3 May 2021 19:36:44 +0200
Subject: [PROJ] PROJ 8.0.1RC1 and PROJ-data 1.6RC1
In-Reply-To: <98933FEB-946C-4BAD-9709-52589D4A9DF9@gmail.com>
References: <98933FEB-946C-4BAD-9709-52589D4A9DF9@gmail.com>
Message-ID: <0D10DD8E-ABAB-4B86-BCA4-0E9C2DA4C1D5@gmail.com>

Apart from a little mishap with the initial upload of the PROJ files no issues
with the two release candidates has been reported, so I hereby motion that
they be promoted to their final versions. 

I?ll start with my +1

/Kristian

> On 28 Apr 2021, at 12:49, Kristian Evers <kristianevers at gmail.com> wrote:
> 
> All,
> 
> I have prepared candidates for the upcoming PROJ 8.0.1 and PROJ-data 1.6 releases. 
> 
> The packages are available from 
> 
> http://download.osgeo.org/proj/proj-8.0.1RC1.tar.gz
> http://download.osgeo.org/proj/proj-8.0.1RC1.zip and 
> http://download.osgeo.org/proj/proj-data-1.6RC1.tar.gz
> http://download.osgeo.org/proj/proj-data-1.6RC1.zip
> 
> The PROJ release includes a number of bug fixes and updates to the transformation database
> (see details below). The data package is extended with grids and tinshift files for Norwegian
> transformations and the Swiss CHGeo2004 geoid model.
> 
> Please test the release candidates and report your findings back to the mailing list.
> 
> /Kristian 
> 
> 
> ???????????????????????????????????????
> 
> 8.0.1 Release Notes
> -------------------
> 
> Updates
> -------
> 
> o Database: update to EPSG v10.018 (#2636)
> 
> o Add transformations for CHGeo2004, Swiss geoid model (#2604)
> 
> o Additions to the norwegian NKG2020 transformation (#2600)
> 
> Bug fixes
> ---------
> 
> o pj_vlog(): fix buffer overflow in case of super lengthy error message (#2693)
> 
> o Revert "proj_create_crs_to_crs_from_pj(): do not use PROJ_SPATIAL_CRITERION_PARTIAL_INTERSECTION if area is specified" (#2679)
> 
> o UTM: error out when value of +zone= is not an integer (#2672)
> 
> o getCRSInfoList(): make result order deterministic (by increasing auth_name,
>   code) (#2661)
> 
> o createOperation(): make sure no to discard deprecated operations if the
>   replacement uses an unknow grid (#2623)
> 
> o Fix build on Solaris 11.4 (#2621)
> 
> o Add mapping of ESRI Equal_Area projection method to EPSG (#2612)
> 
> o Fix incorrect EPGS extent code for EPSG:7789>EPSG:4976 NKG transformation (#2599)
> 
> o fix wrong capitalization of CHENyx06_ETRS.gsb (#2597)
> 
> o createOperations(): improve handling of vertical transforms when
>   when compound CRSs are used (#2592)
> 
> o CRS::promoteTo3D(): propagate the extent from the 2D CRS (#2589)
> 
> o createFromCRSCodesWithIntermediates(): improve performance when there is
>   no match (#2583)
> 
> o Fix proj_clone() to work on 'meta' coordinate operation PJ* objects that
>   can be returned by proj_create_crs_to_crs() (#2582)
> 
> o add PROJ_COMPUTE_VERSION, PROJ_VERSION_NUMBER,
>   PROJ_AT_LEAST_VERSION macros (#2581)
> 
> o Make proj_lp_dist() and proj_geod() work on a PJ* CRS object (#2570)
> 
> o Fix gcc 11 -Wnonnull compilation warnings (#2559)
> 
> o Fix use of uninitialized memory in gie tests (#2558)
> 
> o createOperations(): fix incorrect height transformation between 3D promoted RGF93 and CH1903+ (#2555)
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj


From even.rouault at spatialys.com  Mon May  3 10:37:48 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 3 May 2021 19:37:48 +0200
Subject: [PROJ] PROJ 8.0.1RC1 and PROJ-data 1.6RC1
In-Reply-To: <0D10DD8E-ABAB-4B86-BCA4-0E9C2DA4C1D5@gmail.com>
References: <98933FEB-946C-4BAD-9709-52589D4A9DF9@gmail.com>
 <0D10DD8E-ABAB-4B86-BCA4-0E9C2DA4C1D5@gmail.com>
Message-ID: <14382e41-9900-bd0e-0ca0-4198ff78fa00@spatialys.com>

+1 Even

Le 03/05/2021 ? 19:36, Kristian Evers a ?crit?:
> Apart from a little mishap with the initial upload of the PROJ files no issues
> with the two release candidates has been reported, so I hereby motion that
> they be promoted to their final versions.
>
> I?ll start with my +1
>
> /Kristian
>
>> On 28 Apr 2021, at 12:49, Kristian Evers <kristianevers at gmail.com> wrote:
>>
>> All,
>>
>> I have prepared candidates for the upcoming PROJ 8.0.1 and PROJ-data 1.6 releases.
>>
>> The packages are available from
>>
>> http://download.osgeo.org/proj/proj-8.0.1RC1.tar.gz
>> http://download.osgeo.org/proj/proj-8.0.1RC1.zip and
>> http://download.osgeo.org/proj/proj-data-1.6RC1.tar.gz
>> http://download.osgeo.org/proj/proj-data-1.6RC1.zip
>>
>> The PROJ release includes a number of bug fixes and updates to the transformation database
>> (see details below). The data package is extended with grids and tinshift files for Norwegian
>> transformations and the Swiss CHGeo2004 geoid model.
>>
>> Please test the release candidates and report your findings back to the mailing list.
>>
>> /Kristian
>>
>>
>> ???????????????????????????????????????
>>
>> 8.0.1 Release Notes
>> -------------------
>>
>> Updates
>> -------
>>
>> o Database: update to EPSG v10.018 (#2636)
>>
>> o Add transformations for CHGeo2004, Swiss geoid model (#2604)
>>
>> o Additions to the norwegian NKG2020 transformation (#2600)
>>
>> Bug fixes
>> ---------
>>
>> o pj_vlog(): fix buffer overflow in case of super lengthy error message (#2693)
>>
>> o Revert "proj_create_crs_to_crs_from_pj(): do not use PROJ_SPATIAL_CRITERION_PARTIAL_INTERSECTION if area is specified" (#2679)
>>
>> o UTM: error out when value of +zone= is not an integer (#2672)
>>
>> o getCRSInfoList(): make result order deterministic (by increasing auth_name,
>>    code) (#2661)
>>
>> o createOperation(): make sure no to discard deprecated operations if the
>>    replacement uses an unknow grid (#2623)
>>
>> o Fix build on Solaris 11.4 (#2621)
>>
>> o Add mapping of ESRI Equal_Area projection method to EPSG (#2612)
>>
>> o Fix incorrect EPGS extent code for EPSG:7789>EPSG:4976 NKG transformation (#2599)
>>
>> o fix wrong capitalization of CHENyx06_ETRS.gsb (#2597)
>>
>> o createOperations(): improve handling of vertical transforms when
>>    when compound CRSs are used (#2592)
>>
>> o CRS::promoteTo3D(): propagate the extent from the 2D CRS (#2589)
>>
>> o createFromCRSCodesWithIntermediates(): improve performance when there is
>>    no match (#2583)
>>
>> o Fix proj_clone() to work on 'meta' coordinate operation PJ* objects that
>>    can be returned by proj_create_crs_to_crs() (#2582)
>>
>> o add PROJ_COMPUTE_VERSION, PROJ_VERSION_NUMBER,
>>    PROJ_AT_LEAST_VERSION macros (#2581)
>>
>> o Make proj_lp_dist() and proj_geod() work on a PJ* CRS object (#2570)
>>
>> o Fix gcc 11 -Wnonnull compilation warnings (#2559)
>>
>> o Fix use of uninitialized memory in gie tests (#2558)
>>
>> o createOperations(): fix incorrect height transformation between 3D promoted RGF93 and CH1903+ (#2555)
>> _______________________________________________
>> PROJ mailing list
>> PROJ at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/proj
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jmckenna at gatewaygeomatics.com  Mon May  3 10:38:26 2021
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon, 3 May 2021 14:38:26 -0300
Subject: [PROJ] PROJ 8.0.1RC1 and PROJ-data 1.6RC1
In-Reply-To: <0D10DD8E-ABAB-4B86-BCA4-0E9C2DA4C1D5@gmail.com>
References: <98933FEB-946C-4BAD-9709-52589D4A9DF9@gmail.com>
 <0D10DD8E-ABAB-4B86-BCA4-0E9C2DA4C1D5@gmail.com>
Message-ID: <f653b718-77fd-6758-d034-c01ef06a97b4@gatewaygeomatics.com>

On 2021-05-03 2:36 p.m., Kristian Evers wrote:
> Apart from a little mishap with the initial upload of the PROJ files no issues
> with the two release candidates has been reported, so I hereby motion that
> they be promoted to their final versions.
> 
> I?ll start with my +1
> 
> /Kristian

+1

(I was testing 8.0.1-RC1 on the weekend on Windows)


-jeff



-- 
Jeff McKenna
GatewayGeo: Developers of MS4W, MapServer Consulting and Training
co-founder of FOSS4G
http://gatewaygeo.com/

From charles at karney.com  Mon May  3 15:36:43 2021
From: charles at karney.com (Charles Karney)
Date: Mon, 3 May 2021 22:36:43 +0000
Subject: [PROJ] PROJ 8.0.1RC1 and PROJ-data 1.6RC1
In-Reply-To: <0D10DD8E-ABAB-4B86-BCA4-0E9C2DA4C1D5@gmail.com>
References: <98933FEB-946C-4BAD-9709-52589D4A9DF9@gmail.com>
 <0D10DD8E-ABAB-4B86-BCA4-0E9C2DA4C1D5@gmail.com>
Message-ID: <BL0PR1701MB2562D388BAEFE7A2B955B074A95B9@BL0PR1701MB2562.namprd17.prod.outlook.com>

+1

  --Charles

?-----Original Message-----
From: PROJ <proj-bounces at lists.osgeo.org> on behalf of Kristian Evers <kristianevers at gmail.com>
Date: Monday, May 3, 2021 at 2:52 PM
To: Kristian Evers <kristianevers at gmail.com>
Cc: PROJ <proj at lists.osgeo.org>
Subject: Re: [PROJ] PROJ 8.0.1RC1 and PROJ-data 1.6RC1

    Apart from a little mishap with the initial upload of the PROJ files no issues
    with the two release candidates has been reported, so I hereby motion that
    they be promoted to their final versions. 

    I?ll start with my +1

    /Kristian

    > On 28 Apr 2021, at 12:49, Kristian Evers <kristianevers at gmail.com> wrote:
    > 
    > All,
    > 
    > I have prepared candidates for the upcoming PROJ 8.0.1 and PROJ-data 1.6 releases. 
    > 
    > The packages are available from 
    > 
    > http://download.osgeo.org/proj/proj-8.0.1RC1.tar.gz
    > http://download.osgeo.org/proj/proj-8.0.1RC1.zip and 
    > http://download.osgeo.org/proj/proj-data-1.6RC1.tar.gz
    > http://download.osgeo.org/proj/proj-data-1.6RC1.zip
    > 
    > The PROJ release includes a number of bug fixes and updates to the transformation database
    > (see details below). The data package is extended with grids and tinshift files for Norwegian
    > transformations and the Swiss CHGeo2004 geoid model.
    > 
    > Please test the release candidates and report your findings back to the mailing list.
    > 
    > /Kristian 
    > 
    > 
    > ???????????????????????????????????????
    > 
    > 8.0.1 Release Notes
    > -------------------
    > 
    > Updates
    > -------
    > 
    > o Database: update to EPSG v10.018 (#2636)
    > 
    > o Add transformations for CHGeo2004, Swiss geoid model (#2604)
    > 
    > o Additions to the norwegian NKG2020 transformation (#2600)
    > 
    > Bug fixes
    > ---------
    > 
    > o pj_vlog(): fix buffer overflow in case of super lengthy error message (#2693)
    > 
    > o Revert "proj_create_crs_to_crs_from_pj(): do not use PROJ_SPATIAL_CRITERION_PARTIAL_INTERSECTION if area is specified" (#2679)
    > 
    > o UTM: error out when value of +zone= is not an integer (#2672)
    > 
    > o getCRSInfoList(): make result order deterministic (by increasing auth_name,
    >   code) (#2661)
    > 
    > o createOperation(): make sure no to discard deprecated operations if the
    >   replacement uses an unknow grid (#2623)
    > 
    > o Fix build on Solaris 11.4 (#2621)
    > 
    > o Add mapping of ESRI Equal_Area projection method to EPSG (#2612)
    > 
    > o Fix incorrect EPGS extent code for EPSG:7789>EPSG:4976 NKG transformation (#2599)
    > 
    > o fix wrong capitalization of CHENyx06_ETRS.gsb (#2597)
    > 
    > o createOperations(): improve handling of vertical transforms when
    >   when compound CRSs are used (#2592)
    > 
    > o CRS::promoteTo3D(): propagate the extent from the 2D CRS (#2589)
    > 
    > o createFromCRSCodesWithIntermediates(): improve performance when there is
    >   no match (#2583)
    > 
    > o Fix proj_clone() to work on 'meta' coordinate operation PJ* objects that
    >   can be returned by proj_create_crs_to_crs() (#2582)
    > 
    > o add PROJ_COMPUTE_VERSION, PROJ_VERSION_NUMBER,
    >   PROJ_AT_LEAST_VERSION macros (#2581)
    > 
    > o Make proj_lp_dist() and proj_geod() work on a PJ* CRS object (#2570)
    > 
    > o Fix gcc 11 -Wnonnull compilation warnings (#2559)
    > 
    > o Fix use of uninitialized memory in gie tests (#2558)
    > 
    > o createOperations(): fix incorrect height transformation between 3D promoted RGF93 and CH1903+ (#2555)
    > _______________________________________________
    > PROJ mailing list
    > PROJ at lists.osgeo.org
    > https://lists.osgeo.org/mailman/listinfo/proj

    _______________________________________________
    PROJ mailing list
    PROJ at lists.osgeo.org
    https://lists.osgeo.org/mailman/listinfo/proj

From howard at hobu.co  Mon May  3 15:39:38 2021
From: howard at hobu.co (Howard Butler)
Date: Mon, 3 May 2021 17:39:38 -0500
Subject: [PROJ] PROJ 8.0.1RC1 and PROJ-data 1.6RC1
In-Reply-To: <BL0PR1701MB2562D388BAEFE7A2B955B074A95B9@BL0PR1701MB2562.namprd17.prod.outlook.com>
References: <BL0PR1701MB2562D388BAEFE7A2B955B074A95B9@BL0PR1701MB2562.namprd17.prod.outlook.com>
Message-ID: <D56C88D4-78D1-4D30-9C02-00714F1F4109@hobu.co>

+1

> On May 3, 2021, at 5:36 PM, Charles Karney <charles at karney.com> wrote:
> 
> ?+1
> 
>  --Charles
> 
> ?-----Original Message-----
> From: PROJ <proj-bounces at lists.osgeo.org> on behalf of Kristian Evers <kristianevers at gmail.com>
> Date: Monday, May 3, 2021 at 2:52 PM
> To: Kristian Evers <kristianevers at gmail.com>
> Cc: PROJ <proj at lists.osgeo.org>
> Subject: Re: [PROJ] PROJ 8.0.1RC1 and PROJ-data 1.6RC1
> 
>    Apart from a little mishap with the initial upload of the PROJ files no issues
>    with the two release candidates has been reported, so I hereby motion that
>    they be promoted to their final versions. 
> 
>    I?ll start with my +1
> 
>    /Kristian
> 
>> On 28 Apr 2021, at 12:49, Kristian Evers <kristianevers at gmail.com> wrote:
>> 
>> All,
>> 
>> I have prepared candidates for the upcoming PROJ 8.0.1 and PROJ-data 1.6 releases. 
>> 
>> The packages are available from 
>> 
>> http://download.osgeo.org/proj/proj-8.0.1RC1.tar.gz
>> http://download.osgeo.org/proj/proj-8.0.1RC1.zip and 
>> http://download.osgeo.org/proj/proj-data-1.6RC1.tar.gz
>> http://download.osgeo.org/proj/proj-data-1.6RC1.zip
>> 
>> The PROJ release includes a number of bug fixes and updates to the transformation database
>> (see details below). The data package is extended with grids and tinshift files for Norwegian
>> transformations and the Swiss CHGeo2004 geoid model.
>> 
>> Please test the release candidates and report your findings back to the mailing list.
>> 
>> /Kristian 
>> 
>> 
>> ???????????????????????????????????????
>> 
>> 8.0.1 Release Notes
>> -------------------
>> 
>> Updates
>> -------
>> 
>> o Database: update to EPSG v10.018 (#2636)
>> 
>> o Add transformations for CHGeo2004, Swiss geoid model (#2604)
>> 
>> o Additions to the norwegian NKG2020 transformation (#2600)
>> 
>> Bug fixes
>> ---------
>> 
>> o pj_vlog(): fix buffer overflow in case of super lengthy error message (#2693)
>> 
>> o Revert "proj_create_crs_to_crs_from_pj(): do not use PROJ_SPATIAL_CRITERION_PARTIAL_INTERSECTION if area is specified" (#2679)
>> 
>> o UTM: error out when value of +zone= is not an integer (#2672)
>> 
>> o getCRSInfoList(): make result order deterministic (by increasing auth_name,
>>  code) (#2661)
>> 
>> o createOperation(): make sure no to discard deprecated operations if the
>>  replacement uses an unknow grid (#2623)
>> 
>> o Fix build on Solaris 11.4 (#2621)
>> 
>> o Add mapping of ESRI Equal_Area projection method to EPSG (#2612)
>> 
>> o Fix incorrect EPGS extent code for EPSG:7789>EPSG:4976 NKG transformation (#2599)
>> 
>> o fix wrong capitalization of CHENyx06_ETRS.gsb (#2597)
>> 
>> o createOperations(): improve handling of vertical transforms when
>>  when compound CRSs are used (#2592)
>> 
>> o CRS::promoteTo3D(): propagate the extent from the 2D CRS (#2589)
>> 
>> o createFromCRSCodesWithIntermediates(): improve performance when there is
>>  no match (#2583)
>> 
>> o Fix proj_clone() to work on 'meta' coordinate operation PJ* objects that
>>  can be returned by proj_create_crs_to_crs() (#2582)
>> 
>> o add PROJ_COMPUTE_VERSION, PROJ_VERSION_NUMBER,
>>  PROJ_AT_LEAST_VERSION macros (#2581)
>> 
>> o Make proj_lp_dist() and proj_geod() work on a PJ* CRS object (#2570)
>> 
>> o Fix gcc 11 -Wnonnull compilation warnings (#2559)
>> 
>> o Fix use of uninitialized memory in gie tests (#2558)
>> 
>> o createOperations(): fix incorrect height transformation between 3D promoted RGF93 and CH1903+ (#2555)
>> _______________________________________________
>> PROJ mailing list
>> PROJ at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/proj
> 
>    _______________________________________________
>    PROJ mailing list
>    PROJ at lists.osgeo.org
>    https://lists.osgeo.org/mailman/listinfo/proj
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

From idan at miara.com  Tue May  4 09:39:30 2021
From: idan at miara.com (Idan Miara)
Date: Tue, 4 May 2021 19:39:30 +0300
Subject: [PROJ] Finding points along a geodesic
Message-ID: <CAEDrt38r2daMvQMtWocEP7y_Co6-W4VjSbytKJ79UpqDXSwRBw@mail.gmail.com>

Hi all,

Say I have to points p1, p2.
Using g.inv I can find az12, az21, s12.

How do I find the vector of n points between p1, p2 with a fixed distance
s12/(n+1) between each point and the next?

I'm using Python, so I'm guessing pyproj would be the library I'll be
using.

Best,
Idan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210504/245c2870/attachment.html>

From idan at miara.com  Tue May  4 09:59:04 2021
From: idan at miara.com (Idan Miara)
Date: Tue, 4 May 2021 19:59:04 +0300
Subject: [PROJ] Finding points along a geodesic
In-Reply-To: <CAGybdFR96-BB5SbEmfJdi3AYVNXA9y=LL7euDaKm1LJxEtUn9w@mail.gmail.com>
References: <CAEDrt38r2daMvQMtWocEP7y_Co6-W4VjSbytKJ79UpqDXSwRBw@mail.gmail.com>
 <CAGybdFR96-BB5SbEmfJdi3AYVNXA9y=LL7euDaKm1LJxEtUn9w@mail.gmail.com>
Message-ID: <CAEDrt3_Neo18k=d9BtG12Cv=DdkUaDWek0NaP6BUhARSGVYZ2A@mail.gmail.com>

Exactly, thanks!

On Tue, 4 May 2021, 19:55 Alan Snow, <alansnow21 at gmail.com> wrote:

> I am thinking this is what you want:
> https://pyproj4.github.io/pyproj/stable/api/geod.html#pyproj.Geod.npts
>
> On Tue, May 4, 2021 at 11:39 AM Idan Miara <idan at miara.com> wrote:
>
>> Hi all,
>>
>> Say I have to points p1, p2.
>> Using g.inv I can find az12, az21, s12.
>>
>> How do I find the vector of n points between p1, p2 with a fixed distance
>> s12/(n+1) between each point and the next?
>>
>> I'm using Python, so I'm guessing pyproj would be the library I'll be
>> using.
>>
>> Best,
>> Idan
>> _______________________________________________
>> PROJ mailing list
>> PROJ at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/proj
>>
>
>
> --
> Alan Snow
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210504/18814b25/attachment.html>

From knudsen.thomas at gmail.com  Tue May  4 13:43:59 2021
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Tue, 4 May 2021 22:43:59 +0200
Subject: [PROJ] PROJ 8.0.1RC1 and PROJ-data 1.6RC1
In-Reply-To: <0D10DD8E-ABAB-4B86-BCA4-0E9C2DA4C1D5@gmail.com>
References: <98933FEB-946C-4BAD-9709-52589D4A9DF9@gmail.com>
 <0D10DD8E-ABAB-4B86-BCA4-0E9C2DA4C1D5@gmail.com>
Message-ID: <CAH0YoEPHpgKVfNxORygY2yDdPD8xkeLwNHsft8_42fW1-9YEZw@mail.gmail.com>

+1  Thomas

man. 3. maj 2021 19.36 skrev Kristian Evers <kristianevers at gmail.com>:

> Apart from a little mishap with the initial upload of the PROJ files no
> issues
> with the two release candidates has been reported, so I hereby motion that
> they be promoted to their final versions.
>
> I?ll start with my +1
>
> /Kristian
>
> > On 28 Apr 2021, at 12:49, Kristian Evers <kristianevers at gmail.com>
> wrote:
> >
> > All,
> >
> > I have prepared candidates for the upcoming PROJ 8.0.1 and PROJ-data 1.6
> releases.
> >
> > The packages are available from
> >
> > http://download.osgeo.org/proj/proj-8.0.1RC1.tar.gz
> > http://download.osgeo.org/proj/proj-8.0.1RC1.zip and
> > http://download.osgeo.org/proj/proj-data-1.6RC1.tar.gz
> > http://download.osgeo.org/proj/proj-data-1.6RC1.zip
> >
> > The PROJ release includes a number of bug fixes and updates to the
> transformation database
> > (see details below). The data package is extended with grids and
> tinshift files for Norwegian
> > transformations and the Swiss CHGeo2004 geoid model.
> >
> > Please test the release candidates and report your findings back to the
> mailing list.
> >
> > /Kristian
> >
> >
> > ???????????????????????????????????????
> >
> > 8.0.1 Release Notes
> > -------------------
> >
> > Updates
> > -------
> >
> > o Database: update to EPSG v10.018 (#2636)
> >
> > o Add transformations for CHGeo2004, Swiss geoid model (#2604)
> >
> > o Additions to the norwegian NKG2020 transformation (#2600)
> >
> > Bug fixes
> > ---------
> >
> > o pj_vlog(): fix buffer overflow in case of super lengthy error message
> (#2693)
> >
> > o Revert "proj_create_crs_to_crs_from_pj(): do not use
> PROJ_SPATIAL_CRITERION_PARTIAL_INTERSECTION if area is specified" (#2679)
> >
> > o UTM: error out when value of +zone= is not an integer (#2672)
> >
> > o getCRSInfoList(): make result order deterministic (by increasing
> auth_name,
> >   code) (#2661)
> >
> > o createOperation(): make sure no to discard deprecated operations if the
> >   replacement uses an unknow grid (#2623)
> >
> > o Fix build on Solaris 11.4 (#2621)
> >
> > o Add mapping of ESRI Equal_Area projection method to EPSG (#2612)
> >
> > o Fix incorrect EPGS extent code for EPSG:7789>EPSG:4976 NKG
> transformation (#2599)
> >
> > o fix wrong capitalization of CHENyx06_ETRS.gsb (#2597)
> >
> > o createOperations(): improve handling of vertical transforms when
> >   when compound CRSs are used (#2592)
> >
> > o CRS::promoteTo3D(): propagate the extent from the 2D CRS (#2589)
> >
> > o createFromCRSCodesWithIntermediates(): improve performance when there
> is
> >   no match (#2583)
> >
> > o Fix proj_clone() to work on 'meta' coordinate operation PJ* objects
> that
> >   can be returned by proj_create_crs_to_crs() (#2582)
> >
> > o add PROJ_COMPUTE_VERSION, PROJ_VERSION_NUMBER,
> >   PROJ_AT_LEAST_VERSION macros (#2581)
> >
> > o Make proj_lp_dist() and proj_geod() work on a PJ* CRS object (#2570)
> >
> > o Fix gcc 11 -Wnonnull compilation warnings (#2559)
> >
> > o Fix use of uninitialized memory in gie tests (#2558)
> >
> > o createOperations(): fix incorrect height transformation between 3D
> promoted RGF93 and CH1903+ (#2555)
> > _______________________________________________
> > PROJ mailing list
> > PROJ at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/proj
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210504/ee93e1f1/attachment.html>

From nyall.dawson at gmail.com  Tue May  4 15:23:09 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 5 May 2021 08:23:09 +1000
Subject: [PROJ] Geodesic buffers/offsets?
Message-ID: <CAB28Asjtrz9cY5PdLXAf=3_sy1DWidGWdbgg8zhXKLY_bR74Zw@mail.gmail.com>

Hi list,

Something which I get asked on a recurring basis by users is how to
create geometry buffers using a real-world distance on a geographic
dataset. E.g. creating a 100km buffer on a linestring in such a way
that the geodesic distances between the buffer and original line are
always 100km.

The approaches/advice I've found so far fall into these broad categories:
- find a local projection which covers the area of interest and create
planimetric buffers/offsets in that projection
- for point datasets, create a custom projection centered over each
individual point and densify/transform the planimetric buffer in that
projection back to the geographic CRS
- use a geographic focused library like s2 (but that has the
limitation in that it's spherical approximations only, not
ellipsoidal)

Consequently, I haven't found any generic approaches for calculating
ellipsoid based buffers/offsets, and I'm interested in other's
thoughts on this.

Buffers/offsets are a bit of a funny beast, because they're complex to
calculate with a lot of corner cases to handle. So we have great
libraries like GEOS which handle this problem well, but I personally
can't see GEOS ever gaining support for geodesic buffers as GEOS is
focused on cartesian calculations only. But on the other hand having
all the logic for buffer calculation sitting in proj also seems
completely out of scope and inappropriate too! (Maybe geographiclib
would be the best place for something of this nature?)

Has anyone else looked into this previously? Anyone with any insights
on this problem?

Cheers,
Nyall

From gdt at lexort.com  Tue May  4 17:43:30 2021
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 04 May 2021 20:43:30 -0400
Subject: [PROJ] Geodesic buffers/offsets?
In-Reply-To: <CAB28Asjtrz9cY5PdLXAf=3_sy1DWidGWdbgg8zhXKLY_bR74Zw@mail.gmail.com>
 (Nyall Dawson's message of "Wed, 5 May 2021 08:23:09 +1000")
References: <CAB28Asjtrz9cY5PdLXAf=3_sy1DWidGWdbgg8zhXKLY_bR74Zw@mail.gmail.com>
Message-ID: <rmiwnserowd.fsf@s1.lexort.com>


Nyall Dawson <nyall.dawson at gmail.com> writes:

> Something which I get asked on a recurring basis by users is how to
> create geometry buffers using a real-world distance on a geographic
> dataset. E.g. creating a 100km buffer on a linestring in such a way
> that the geodesic distances between the buffer and original line are
> always 100km.

It's interesting to consider what that means.  Even for the simple case
of a single point, "exactly 100km" would take an infinite number of
points to represent.

> The approaches/advice I've found so far fall into these broad categories:
> - find a local projection which covers the area of interest and create
> planimetric buffers/offsets in that projection

This seems straightforward except for the finite-resolution
arc-representation issue.  I would expect this is the usual aproach, but
also that it doesn't really work for geometries that span say 90 degrees
in latitude or longitude.

> - for point datasets, create a custom projection centered over each
> individual point and densify/transform the planimetric buffer in that
> projection back to the geographic CRS

This evokes some notion of close enough granularity, perhaps 100 points
around a circle but with each of them being right.  But once you do
that, I don't see how this differs from computing
  DIRECT(PT1, distance, az_i) for az_i in (0..99)/100 * \pi.
(I probably  got that wrong, but the  astute reader can consider what I
should have said.)


(This devolves to the first approach if the points are closer than the
buffer amount.)

> - use a geographic focused library like s2 (but that has the
> limitation in that it's spherical approximations only, not
> ellipsoidal)
>
> Consequently, I haven't found any generic approaches for calculating
> ellipsoid based buffers/offsets, and I'm interested in other's
> thoughts on this.
>
> Buffers/offsets are a bit of a funny beast, because they're complex to
> calculate with a lot of corner cases to handle. So we have great
> libraries like GEOS which handle this problem well, but I personally
> can't see GEOS ever gaining support for geodesic buffers as GEOS is
> focused on cartesian calculations only. But on the other hand having

I see your point, but it seems that if the kinds of calculations GEOS
can do are also necessary on the ellipsoid, it seems like GEOS is the
logical home for them.

> all the logic for buffer calculation sitting in proj also seems
> completely out of scope and inappropriate too! (Maybe geographiclib
> would be the best place for something of this nature?)

We'll see what Charles has to say!  (I expect his comments to be much
more valuable than mine....)

> Has anyone else looked into this previously? Anyone with any insights
> on this problem?

Is the use case for this a situation where a local projection doesn't
work because the area is so big?

Is the use case one where if the buffered geometry were 99.8 km
sometimes, something bad would happen?
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210504/06ba7939/attachment.sig>

From nyall.dawson at gmail.com  Tue May  4 18:20:22 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 5 May 2021 11:20:22 +1000
Subject: [PROJ] Geodesic buffers/offsets?
In-Reply-To: <rmiwnserowd.fsf@s1.lexort.com>
References: <CAB28Asjtrz9cY5PdLXAf=3_sy1DWidGWdbgg8zhXKLY_bR74Zw@mail.gmail.com>
 <rmiwnserowd.fsf@s1.lexort.com>
Message-ID: <CAB28AsjQ4gU9aOYUeHkDq0d=27FCsL4M_cF1bJ3WRQCL=FReew@mail.gmail.com>

On Wed, 5 May 2021 at 10:43, Greg Troxel <gdt at lexort.com> wrote:
>

> > - for point datasets, create a custom projection centered over each
> > individual point and densify/transform the planimetric buffer in that
> > projection back to the geographic CRS
>
> This evokes some notion of close enough granularity, perhaps 100 points
> around a circle but with each of them being right.  But once you do
> that, I don't see how this differs from computing
>   DIRECT(PT1, distance, az_i) for az_i in (0..99)/100 * \pi.
> (I probably  got that wrong, but the  astute reader can consider what I
> should have said.)

Very good point -- the point case is quite trivial and would be well
addressed with your suggestion!

> Is the use case for this a situation where a local projection doesn't
> work because the area is so big?

Exactly -- the classic example is the "missile range" problem well
described in this article:
https://www.esri.com/news/arcuser/0111/geodesic.html

Nyall

From Jochem.Lesparre at kadaster.nl  Wed May  5 00:20:40 2021
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Wed, 5 May 2021 07:20:40 +0000
Subject: [PROJ] Geodesic buffers/offsets?
In-Reply-To: <CAB28AsjQ4gU9aOYUeHkDq0d=27FCsL4M_cF1bJ3WRQCL=FReew@mail.gmail.com>
References: <CAB28Asjtrz9cY5PdLXAf=3_sy1DWidGWdbgg8zhXKLY_bR74Zw@mail.gmail.com>
 <rmiwnserowd.fsf@s1.lexort.com>
 <CAB28AsjQ4gU9aOYUeHkDq0d=27FCsL4M_cF1bJ3WRQCL=FReew@mail.gmail.com>
Message-ID: <AM0P192MB0482213A5E35E1168873CCF0EF599@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Would this be a solution for a ellipsoidal buffer at geodesic distance around a very large polygon?:
1. Create points at a regular small distance along the polygon contour;
2. For each point: use PROJ's geod function to compute a large number of points on a "circle" at the preferred buffer distance, by taking regular small azimuth increments;
3. Connect the outer points with a concave hull.

Step 1 and 2 are straightforward but computational expensive, as the number of points you need grows with the product of the perimeter of the polygon and the buffer distance. Step 3 is a bit tricky, but if you compute points close enough, this is possible e.g. with a morphological closing (using conventional buffers).

Jochem


Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
dit direct te melden aan de verzender en het bericht te vernietigen.
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent
of the Kadaster is unlawful. If you have received this message, but are not the addressee,
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message.

From kristianevers at gmail.com  Wed May  5 01:37:10 2021
From: kristianevers at gmail.com (Kristian Evers)
Date: Wed, 5 May 2021 10:37:10 +0200
Subject: [PROJ] PROJ 8.0.1RC1 and PROJ-data 1.6RC1
In-Reply-To: <CAH0YoEPHpgKVfNxORygY2yDdPD8xkeLwNHsft8_42fW1-9YEZw@mail.gmail.com>
References: <98933FEB-946C-4BAD-9709-52589D4A9DF9@gmail.com>
 <0D10DD8E-ABAB-4B86-BCA4-0E9C2DA4C1D5@gmail.com>
 <CAH0YoEPHpgKVfNxORygY2yDdPD8xkeLwNHsft8_42fW1-9YEZw@mail.gmail.com>
Message-ID: <E71479FE-ED70-45EC-B2C1-3A06754A7177@gmail.com>

Motion passed with +1?s from

Kristian
Even
Charles
Howard
Thomas

The release will be announced later this afternoon.

/Kristian

> On 4 May 2021, at 22:43, Thomas Knudsen <knudsen.thomas at gmail.com> wrote:
> 
> +1  Thomas
> 
> man. 3. maj 2021 19.36 skrev Kristian Evers <kristianevers at gmail.com <mailto:kristianevers at gmail.com>>:
> Apart from a little mishap with the initial upload of the PROJ files no issues
> with the two release candidates has been reported, so I hereby motion that
> they be promoted to their final versions. 
> 
> I?ll start with my +1
> 
> /Kristian
> 
> > On 28 Apr 2021, at 12:49, Kristian Evers <kristianevers at gmail.com <mailto:kristianevers at gmail.com>> wrote:
> > 
> > All,
> > 
> > I have prepared candidates for the upcoming PROJ 8.0.1 and PROJ-data 1.6 releases. 
> > 
> > The packages are available from 
> > 
> > http://download.osgeo.org/proj/proj-8.0.1RC1.tar.gz <http://download.osgeo.org/proj/proj-8.0.1RC1.tar.gz>
> > http://download.osgeo.org/proj/proj-8.0.1RC1.zip <http://download.osgeo.org/proj/proj-8.0.1RC1.zip> and 
> > http://download.osgeo.org/proj/proj-data-1.6RC1.tar.gz <http://download.osgeo.org/proj/proj-data-1.6RC1.tar.gz>
> > http://download.osgeo.org/proj/proj-data-1.6RC1.zip <http://download.osgeo.org/proj/proj-data-1.6RC1.zip>
> > 
> > The PROJ release includes a number of bug fixes and updates to the transformation database
> > (see details below). The data package is extended with grids and tinshift files for Norwegian
> > transformations and the Swiss CHGeo2004 geoid model.
> > 
> > Please test the release candidates and report your findings back to the mailing list.
> > 
> > /Kristian 
> > 
> > 
> > ???????????????????????????????????????
> > 
> > 8.0.1 Release Notes
> > -------------------
> > 
> > Updates
> > -------
> > 
> > o Database: update to EPSG v10.018 (#2636)
> > 
> > o Add transformations for CHGeo2004, Swiss geoid model (#2604)
> > 
> > o Additions to the norwegian NKG2020 transformation (#2600)
> > 
> > Bug fixes
> > ---------
> > 
> > o pj_vlog(): fix buffer overflow in case of super lengthy error message (#2693)
> > 
> > o Revert "proj_create_crs_to_crs_from_pj(): do not use PROJ_SPATIAL_CRITERION_PARTIAL_INTERSECTION if area is specified" (#2679)
> > 
> > o UTM: error out when value of +zone= is not an integer (#2672)
> > 
> > o getCRSInfoList(): make result order deterministic (by increasing auth_name,
> >   code) (#2661)
> > 
> > o createOperation(): make sure no to discard deprecated operations if the
> >   replacement uses an unknow grid (#2623)
> > 
> > o Fix build on Solaris 11.4 (#2621)
> > 
> > o Add mapping of ESRI Equal_Area projection method to EPSG (#2612)
> > 
> > o Fix incorrect EPGS extent code for EPSG:7789>EPSG:4976 NKG transformation (#2599)
> > 
> > o fix wrong capitalization of CHENyx06_ETRS.gsb (#2597)
> > 
> > o createOperations(): improve handling of vertical transforms when
> >   when compound CRSs are used (#2592)
> > 
> > o CRS::promoteTo3D(): propagate the extent from the 2D CRS (#2589)
> > 
> > o createFromCRSCodesWithIntermediates(): improve performance when there is
> >   no match (#2583)
> > 
> > o Fix proj_clone() to work on 'meta' coordinate operation PJ* objects that
> >   can be returned by proj_create_crs_to_crs() (#2582)
> > 
> > o add PROJ_COMPUTE_VERSION, PROJ_VERSION_NUMBER,
> >   PROJ_AT_LEAST_VERSION macros (#2581)
> > 
> > o Make proj_lp_dist() and proj_geod() work on a PJ* CRS object (#2570)
> > 
> > o Fix gcc 11 -Wnonnull compilation warnings (#2559)
> > 
> > o Fix use of uninitialized memory in gie tests (#2558)
> > 
> > o createOperations(): fix incorrect height transformation between 3D promoted RGF93 and CH1903+ (#2555)
> > _______________________________________________
> > PROJ mailing list
> > PROJ at lists.osgeo.org <mailto:PROJ at lists.osgeo.org>
> > https://lists.osgeo.org/mailman/listinfo/proj <https://lists.osgeo.org/mailman/listinfo/proj>
> 
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org <mailto:PROJ at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/proj <https://lists.osgeo.org/mailman/listinfo/proj>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210505/ee23f840/attachment.html>

From edzer.pebesma at uni-muenster.de  Wed May  5 01:51:32 2021
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Wed, 5 May 2021 10:51:32 +0200
Subject: [PROJ] Geodesic buffers/offsets?
In-Reply-To: <CAB28Asjtrz9cY5PdLXAf=3_sy1DWidGWdbgg8zhXKLY_bR74Zw@mail.gmail.com>
References: <CAB28Asjtrz9cY5PdLXAf=3_sy1DWidGWdbgg8zhXKLY_bR74Zw@mail.gmail.com>
Message-ID: <cbddc4ff-e98d-a82a-2bd3-69618f0a6535@uni-muenster.de>



On 05/05/2021 00:23, Nyall Dawson wrote:
> The approaches/advice I've found so far fall into these broad categories:

[...]

> - use a geographic focused library like s2 (but that has the
> limitation in that it's spherical approximations only, not
> ellipsoidal)


In R package sf we're planning to replace GEOS with s2 as a back-end for 
(most) geometric operations when the user works with ellipsoidal 
coordinates, so we can stop emitting warnings all the time for this case.

The buffer algorithm in s2 is quite different from that in GEOS: it 
returns the union of a set of S2 cells, which are more or less close to 
rectangular and cover the sphere. An example of such a buffer is found 
here:

https://keen-swartz-3146c4.netlify.app/sf.html#fig:orangebuffer (scroll 
half a page up to see fig 7.3)

This example used the (current) default of using 1000 cells to 
approximate the buffer region. For a very small buffer around a long 
line (e.g. approximate the road surface when the road is available as a 
LINESTRING) many more cells may be needed, for such cases I think s2 may 
not be very useful, or in any case require a lot of computational 
resources and knowledge from the user.

For an algorithm that would go straight for the buffer geometry (without 
cell approximation) I would find it interesting how for practical use 
cases these two approximations would compare:
(i) spherical vs. ellipsoidal computations
(ii) approximating curved lines with piece-wise straight segments.

Of course (ii) can be made to go for zero, but that's not practical.

Best regards,
-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081

From kristianevers at gmail.com  Wed May  5 03:29:29 2021
From: kristianevers at gmail.com (Kristian Evers)
Date: Wed, 5 May 2021 12:29:29 +0200
Subject: [PROJ] PROJ 8.0.1 and PROJ-data 1.6
Message-ID: <921A519A-1CFC-4B99-96F2-6018C2BA599E@gmail.com>


On behalf of the PROJ development team I am happy to announce the
release of PROJ 8.0.1 and PROJ-data 1.6.


The packages are available from 

http://download.osgeo.org/proj/proj-8.0.1.tar.gz
http://download.osgeo.org/proj/proj-8.0.1.zip

and

http://download.osgeo.org/proj/proj-data-1.6.tar.gz
http://download.osgeo.org/proj/proj-data-1.6.zip

The PROJ release includes a number of bug fixes and updates to the
transformation database (see details below). The data package is
extended with grids and tinshift files for Norwegian transformations
and the Swiss CHGeo2004 geoid model.


/Kristian 


???????????????????????????????????????

8.0.1 Release Notes
-------------------

Updates
-------

o Database: update to EPSG v10.018 (#2636)

o Add transformations for CHGeo2004, Swiss geoid model (#2604)

o Additions to the norwegian NKG2020 transformation (#2600)

Bug fixes
---------

o pj_vlog(): fix buffer overflow in case of super lengthy error message (#2693)

o Revert "proj_create_crs_to_crs_from_pj(): do not use PROJ_SPATIAL_CRITERION_PARTIAL_INTERSECTION if area is specified" (#2679)

o UTM: error out when value of +zone= is not an integer (#2672)

o getCRSInfoList(): make result order deterministic (by increasing auth_name,
  code) (#2661)

o createOperation(): make sure no to discard deprecated operations if the
  replacement uses an unknow grid (#2623)

o Fix build on Solaris 11.4 (#2621)

o Add mapping of ESRI Equal_Area projection method to EPSG (#2612)

o Fix incorrect EPGS extent code for EPSG:7789>EPSG:4976 NKG transformation (#2599)

o fix wrong capitalization of CHENyx06_ETRS.gsb (#2597)

o createOperations(): improve handling of vertical transforms when
  when compound CRSs are used (#2592)

o CRS::promoteTo3D(): propagate the extent from the 2D CRS (#2589)

o createFromCRSCodesWithIntermediates(): improve performance when there is
  no match (#2583)

o Fix proj_clone() to work on 'meta' coordinate operation PJ* objects that
  can be returned by proj_create_crs_to_crs() (#2582)

o add PROJ_COMPUTE_VERSION, PROJ_VERSION_NUMBER,
  PROJ_AT_LEAST_VERSION macros (#2581)

o Make proj_lp_dist() and proj_geod() work on a PJ* CRS object (#2570)

o Fix gcc 11 -Wnonnull compilation warnings (#2559)

o Fix use of uninitialized memory in gie tests (#2558)

o createOperations(): fix incorrect height transformation between 3D promoted RGF93 and CH1903+ (#2555)

From charles at karney.com  Wed May  5 09:20:47 2021
From: charles at karney.com (Charles Karney)
Date: Wed, 5 May 2021 16:20:47 +0000
Subject: [PROJ] Geodesic buffers/offsets?
In-Reply-To: <CAB28Asjtrz9cY5PdLXAf=3_sy1DWidGWdbgg8zhXKLY_bR74Zw@mail.gmail.com>
References: <CAB28Asjtrz9cY5PdLXAf=3_sy1DWidGWdbgg8zhXKLY_bR74Zw@mail.gmail.com>
Message-ID: <BL0PR1701MB2562BD99BE9AA1081E365BF4A9599@BL0PR1701MB2562.namprd17.prod.outlook.com>

I can add a couple of points to this discussion...

(1) When generating points along the boundary of the buffer, it's useful
to have a test for self-intersection of the boundary.  This happens with
zero buffer width at concave corners.  However it will also happen for
curved (or even straight) portions of boundary the original area.
Equation 34 of

  https://doi.org/10.1007/s00190-012-0578-z

gives the curvature of the parallel to a curve and reentrancy happens
when the curvature becomes infinite.

(2) Instead of generating a buffer boundary, you could instead just
implement a test "is a given point within a distance x of (or inside)
the boundary?"  Suppose you divide all the edges up into segments with
lengths of d or less, so that the original area is approximated by a
geodesic polygon with edges <= d.  Then, set up a nearest neighbor
problem with the vertices of the polygon, e.g., with
GeographicLib::NearestNeighbor.

Invoke this on the query point, with maxdist = x and exhaustive = false.
If this returns a result, then the point is in the buffer; otherwise...

Invoke NearestNeighbor again to find all vertices within x + d/2 of the
query point.  If there are no such vertices, the point is outside,
otherwise check the corresponding edges to see is there's a point within
the edge which is within x of the query point.

This could probably be turned into a reasonably efficient algorithm.
Presumably for x >> d, the criterion, maxdist = x + d/2, in the second
nearest neighbor lookup can be tightened to something like maxdist =
hypot(x, d/2).  (And perhaps a fast function implementing the query is
more useful that the depiction of the buffer boundaries?)

  --Charles

?-----Original Message-----
From: PROJ <proj-bounces at lists.osgeo.org> on behalf of Nyall Dawson <nyall.dawson at gmail.com>
Date: Tuesday, May 4, 2021 at 6:23 PM
To: PROJ <proj at lists.osgeo.org>
Subject: [PROJ] Geodesic buffers/offsets?

    Hi list,

    Something which I get asked on a recurring basis by users is how to
    create geometry buffers using a real-world distance on a geographic
    dataset. E.g. creating a 100km buffer on a linestring in such a way
    that the geodesic distances between the buffer and original line are
    always 100km.

    The approaches/advice I've found so far fall into these broad categories:
    - find a local projection which covers the area of interest and create
    planimetric buffers/offsets in that projection
    - for point datasets, create a custom projection centered over each
    individual point and densify/transform the planimetric buffer in that
    projection back to the geographic CRS
    - use a geographic focused library like s2 (but that has the
    limitation in that it's spherical approximations only, not
    ellipsoidal)

    Consequently, I haven't found any generic approaches for calculating
    ellipsoid based buffers/offsets, and I'm interested in other's
    thoughts on this.

    Buffers/offsets are a bit of a funny beast, because they're complex to
    calculate with a lot of corner cases to handle. So we have great
    libraries like GEOS which handle this problem well, but I personally
    can't see GEOS ever gaining support for geodesic buffers as GEOS is
    focused on cartesian calculations only. But on the other hand having
    all the logic for buffer calculation sitting in proj also seems
    completely out of scope and inappropriate too! (Maybe geographiclib
    would be the best place for something of this nature?)

    Has anyone else looked into this previously? Anyone with any insights
    on this problem?

    Cheers,
    Nyall
    _______________________________________________
    PROJ mailing list
    PROJ at lists.osgeo.org
    https://lists.osgeo.org/mailman/listinfo/proj

From dave at stellacore.com  Wed May  5 09:00:47 2021
From: dave at stellacore.com (Dave Knopp)
Date: Wed, 5 May 2021 10:00:47 -0600
Subject: [PROJ] Geodesic buffers/offsets?
Message-ID: <204c4f7d-d6b9-2c08-5649-75b9e5a320cc@stellacore.com>


Nyall Dawson nyall.dawson at gmail.com
Tue May 4 15:23:09 PDT 2021
> Something which I get asked on a recurring basis by users is how to
> create geometry buffers using a real-world distance on a geographic
> dataset. E.g. creating a 100km buffer on a linestring in such a way
> that the geodesic distances between the buffer and original line are
> always 100km.


Assuming there is some desired 'target resolution' associated with the
application (e.g. display pixel sizes, vector polyline sampling
interval, etc.) then perhaps a simple dilation algorithm might work for you.


E.g.

Allocate a working grid associated entire range of lon/lat values at the
resolution you want. Us full ellipsoid range or restrict range of values
if that's appropriate for application cases. With each cell, associate
data structure comprising a scalar and 3D vector.

Initialize the vector portion of the grid cells with corresponding ECEF
locations for relevant surface - e.g. on the ellipsoid, on terrain,
etc). Fill the scalar portion with NaN or whatever.

During iterations, the scalar will be set to the distance metric from
the source points (e.g. distance along geodesic, distance over
undulating terrain surface, etc).

Use lon/lat of source points to find associated grid cell then fill the
scalar part of those grid cells (e.g. using line drawing or other
interpolation if needed). For these cells, set the scalar distance to 0.

Perform a modified 'dilation' algorithm that iterates over cells just
set in last iteration and determine/sets scalar value on unset adjacent
cells.

Assign the new scalar values based on the magnitude of *vector*
difference between cell vector location values. For potential
collisions, use 'shortest wins' strategy.

Iterate on this until grid is full - or optionally stop if all new
distances in iteration exceed the target 'max dist' value.

For vector representation of the buffer boundary, run a contour
following algorithm on the grid scalar values.

That's all off-the-cuff, so maybe not complete nor error free.

Before thinking this is "too much computation" consider the underlying
complexity of other algorithms - which is also high (at comparable
detail). Also this has considerable additional flexibility which might
boost reuse potential.

Dave

From dfileccia at hgnss.com  Fri May  7 05:55:50 2021
From: dfileccia at hgnss.com (David Fileccia)
Date: Fri, 7 May 2021 12:55:50 +0000
Subject: [PROJ] RD NAP + TRANS usage.
Message-ID: <DM6PR06MB45889B2984DD5CA96E23F785BE579@DM6PR06MB4588.namprd06.prod.outlook.com>

Hi,
I am trying to get the transformations for the Netherlands using PROJ/GDAL and I just can't seem to get the "correct" answers based on the data I have been given. I have tried both the variant 1 and 2 of the nl_nsgi_*.tif files with no luck.

The following data was created using the EPSG:7415 transform and nl_nsgi_rdtrans2018.tif and nl_nsgi_naptrans2018.tif:
002_ETRS89.TXT                          002_RDNAP.TXT                          My Transform
point_id latitude  longitude height     x_coordinate  y_coordinate  height     x coordinate  y coordinate  height
-------- --------- --------- ---------- ------------- ------------- ---------- ------------- ------------- ----------
27494    55.812797 6.464483  425.168800 317878.638600 658759.794800 145.672100 222633.565431 870884.933093 383.755149
27495    55.299814 6.510675  470.791500 176752.325000 310861.303600 227.283900 226438.527368 813771.108781 429.897194
27496    51.280225 4.474798  244.634700 294571.817600 254007.429300  67.285500 91363.817760  366154.277735 199.958129
27497    52.182009 5.896621  230.874600 160485.457200 264354.757200  -4.823400 189874.491989 466218.873201 187.566647
27498    51.344185 7.195423   61.603000  13061.818100 821852.289400 -33.810100 281024.030900 374436.255812  15.291030
27499    53.651730 5.093408  451.380800 243523.431500 868519.454900 110.775700 135597.678988 629707.008204 410.362531


I am going from WGS84 lat/long/height to the RD coordinates. My transforms are as follows:
   // Create the SRS frames from the WKT
   OGRSpatialReference oSRC;
   oSRC.SetAxisMappingStrategy (OAMS_TRADITIONAL_GIS_ORDER);
   oSRC.SetWellKnownGeogCS ("WGS84");

   OGRSpatialReference oDST;
   oDST.SetAxisMappingStrategy (OAMS_TRADITIONAL_GIS_ORDER);
   oDST.importFromProj4 ("EPSG:7415");

   // Set the transformations
   m_g2r = OGRCreateCoordinateTransformation (&oSRC, &oDST);

===

Shift the source lat/long/height using the horizontal shift and the geoid.

===



   double x = lon;

   double y = lat;

   double z = height;



   // Perform the transformation from LLA to NEZ

   int ok = false;

   if (m_g2r) {

      ok = m_g2r->Transform (1, &x, &y, &z);

   }



   // If we fail then return failed results

   if (!ok) {

      x = 0;

      y = 0;

      z = BAD_VALUE;

   }

I have tried swapping lat/long and I have tried different transforms. I have even tried the variant 1 files with no luck. I think, the group that is having me look at this, has not given me all the information about the coordinate collection.

So, in summary:

  1.  Does anyone have any idea about what I am doing wrong?
  2.  Are there any known monuments with lat/long/height and the corresponding RD coordinates that I can check against?

Best Regards,

David Fileccia
Senior Systems Engineer | HEMISPHERE GNSS
Office: 6860 Little Twin Road, Germantown, OH 45327, USA
Corporate: 8515 E. Anderson Drive, Scottsdale, AZ 85255, USA
M: +1 404 579 4391
dfileccia at hgnss.com<mailto:dfileccia at hgnss.com> | www.hgnss.com<http://www.hgnss.com/>
[cid:image001.png at 01D7431D.5C411280]

Disclaimer: This message (including any other messages, attachments, or files within) contains information that may be confidential or privileged and is the property of Hemisphere GNSS, Inc. and its subsidiaries ('Hemisphere'). It is intended for the person to whom it is addressed. If you are not the intended recipient, you are not authorized to read, copy, distribute, print, retain, or use this message or any part thereof. If you receive this message in error, please notify the sender immediately and delete all copies of this message. Any opinions or views expressed within are solely those of the author and do not necessarily represent those of Hemisphere. Thank you for your cooperation.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210507/0a8e442f/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 5199 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210507/0a8e442f/attachment-0001.png>

From Jochem.Lesparre at kadaster.nl  Fri May  7 06:17:39 2021
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Fri, 7 May 2021 13:17:39 +0000
Subject: [PROJ] RD NAP + TRANS usage.
In-Reply-To: <DM6PR06MB45889B2984DD5CA96E23F785BE579@DM6PR06MB4588.namprd06.prod.outlook.com>
References: <DM6PR06MB45889B2984DD5CA96E23F785BE579@DM6PR06MB4588.namprd06.prod.outlook.com>
Message-ID: <AM0P192MB048244D95EBF37263E9A76B1EF579@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Hi David,

Note that the files 002_ETRS89.TXT and 002_RDNAP.TXT do not contain coordinates of the same points! If you want a data set with corresponding coordinates of the same points, you can use the file Z001_ETRS89andRDNAP.TXT, which is available here:
https://www.nsgi.nl/geodetische-infrastructuur/producten/programma-rdnaptrans/zelfvalidatie

I hope that solves your problem. If it does, suggestions on how to improve our documentation a nsgi.nl to prevent others from having the same confusion are most welcome.

Kind regards, Jochem


J. Lesparre
Geodetic Engineer (MSc)

Kadaster | Rijksdriehoeksmeting
+31-88-183 20 00 | rd at kadaster.nl<mailto:rd at kadaster.nl>

Netherlands Partnership Geodetic Infrastructure
https://www.nsgi.nl/




From: PROJ <proj-bounces at lists.osgeo.org> On Behalf Of David Fileccia
Sent: vrijdag 7 mei 2021 14:56
To: proj at lists.osgeo.org
Subject: [PROJ] RD NAP + TRANS usage.

Hi,
I am trying to get the transformations for the Netherlands using PROJ/GDAL and I just can't seem to get the "correct" answers based on the data I have been given. I have tried both the variant 1 and 2 of the nl_nsgi_*.tif files with no luck.

The following data was created using the EPSG:7415 transform and nl_nsgi_rdtrans2018.tif and nl_nsgi_naptrans2018.tif:
002_ETRS89.TXT                          002_RDNAP.TXT                          My Transform
point_id latitude  longitude height     x_coordinate  y_coordinate  height     x coordinate  y coordinate  height
-------- --------- --------- ---------- ------------- ------------- ---------- ------------- ------------- ----------
27494    55.812797 6.464483  425.168800 317878.638600 658759.794800 145.672100 222633.565431 870884.933093 383.755149
27495    55.299814 6.510675  470.791500 176752.325000 310861.303600 227.283900 226438.527368 813771.108781 429.897194
27496    51.280225 4.474798  244.634700 294571.817600 254007.429300  67.285500 91363.817760  366154.277735 199.958129
27497    52.182009 5.896621  230.874600 160485.457200 264354.757200  -4.823400 189874.491989 466218.873201 187.566647
27498    51.344185 7.195423   61.603000  13061.818100 821852.289400 -33.810100 281024.030900 374436.255812  15.291030
27499    53.651730 5.093408  451.380800 243523.431500 868519.454900 110.775700 135597.678988 629707.008204 410.362531


I am going from WGS84 lat/long/height to the RD coordinates. My transforms are as follows:
   // Create the SRS frames from the WKT
   OGRSpatialReference oSRC;
   oSRC.SetAxisMappingStrategy (OAMS_TRADITIONAL_GIS_ORDER);
   oSRC.SetWellKnownGeogCS ("WGS84");

   OGRSpatialReference oDST;
   oDST.SetAxisMappingStrategy (OAMS_TRADITIONAL_GIS_ORDER);
   oDST.importFromProj4 ("EPSG:7415");

   // Set the transformations
   m_g2r = OGRCreateCoordinateTransformation (&oSRC, &oDST);

===

Shift the source lat/long/height using the horizontal shift and the geoid.

===



   double x = lon;

   double y = lat;

   double z = height;



   // Perform the transformation from LLA to NEZ

   int ok = false;

   if (m_g2r) {

      ok = m_g2r->Transform (1, &x, &y, &z);

   }



   // If we fail then return failed results

   if (!ok) {

      x = 0;

      y = 0;

      z = BAD_VALUE;

   }

I have tried swapping lat/long and I have tried different transforms. I have even tried the variant 1 files with no luck. I think, the group that is having me look at this, has not given me all the information about the coordinate collection.

So, in summary:

  1.  Does anyone have any idea about what I am doing wrong?
  2.  Are there any known monuments with lat/long/height and the corresponding RD coordinates that I can check against?

Best Regards,

David Fileccia
Senior Systems Engineer | HEMISPHERE GNSS
Office: 6860 Little Twin Road, Germantown, OH 45327, USA
Corporate: 8515 E. Anderson Drive, Scottsdale, AZ 85255, USA
M: +1 404 579 4391
dfileccia at hgnss.com<mailto:dfileccia at hgnss.com> | http://secure-web.cisco.com/1DXMIlB6vjOapqGbvkqiMEhqcsqNIzBr9vrOCaoysR1qX__vpRbk3jS2NazkQD5lknDsD3jWWJBj-ndaZghFKvYozu6B0E0HWsyBoytf8hj1n_DqLgu6TEtRXamcrfKkq4ycxGFZwgo2GLgxbz3B9dMkfL7Fd-mi5cD1I-0fFNfXcp3xw1FW0b9XmdEqRnyn6jBVcTWsMrmZv4QQW6tcM0B2rgIO8w_S0BfK5subThUDxcbOX__QAB6nZxV1Ub1JFpJnQ74DkGZMU0b4ukwFKtg/http%3A%2F%2Fwww.hgnss.com<http://secure-web.cisco.com/1jffGt2MRKwwkoccxSTxRiK87DQfcohzG3ypaMwCYuPUFQFxU31jxd_5WZQpXfR1jgGzMImeG-YXgaJ-BGhU79Nd-XKGwzxJfbBF8rLeoWdnlfxHfMY55j727fnzRpK0Cvoxnb8tj8g7d2BNrccKLrx7fOZyROXkegjiA96SMtD057FLE_SBMt5C7uyalg5zJA5Jk3DiG18TpAt6DNqMtnP2GONzI0_VWWiOvbMtV6B4zxcz5-scMeiQG8utgZ2rg-WzQhYqLumPPFEtAFXJyyg/http%3A%2F%2Fwww.hgnss.com%2F>
[cid:image001.png at 01D74353.510D4650]

Disclaimer: This message (including any other messages, attachments, or files within) contains information that may be confidential or privileged and is the property of Hemisphere GNSS, Inc. and its subsidiaries ('Hemisphere'). It is intended for the person to whom it is addressed. If you are not the intended recipient, you are not authorized to read, copy, distribute, print, retain, or use this message or any part thereof. If you receive this message in error, please notify the sender immediately and delete all copies of this message. Any opinions or views expressed within are solely those of the author and do not necessarily represent those of Hemisphere. Thank you for your cooperation.



Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
dit direct te melden aan de verzender en het bericht te vernietigen.
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent
of the Kadaster is unlawful. If you have received this message, but are not the addressee,
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210507/7ce06e35/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 5199 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210507/7ce06e35/attachment-0001.png>

From Jochem.Lesparre at kadaster.nl  Fri May  7 06:19:34 2021
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Fri, 7 May 2021 13:19:34 +0000
Subject: [PROJ] RE(2): RD NAP + TRANS usage.
Message-ID: <AM0P192MB0482727494D25B30BD084F16EF579@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Hi David,

Note that the files 002_ETRS89.TXT and 002_RDNAP.TXT do not contain coordinates of the same points! If you want a data set with corresponding coordinates of the same points, you can use the file Z001_ETRS89andRDNAP.TXT, which is available here:
https://www.nsgi.nl/geodetische-infrastructuur/producten/programma-rdnaptrans/zelfvalidatie

I hope that solves your problem. If it does, suggestions on how to improve our documentation a nsgi.nl to prevent others from having the same confusion are most welcome.

Kind regards, Jochem


J. Lesparre
Geodetic Engineer (MSc)

Kadaster | Rijksdriehoeksmeting
+31-88-183 20 00 | rd at kadaster.nl<mailto:rd at kadaster.nl>

Netherlands Partnership Geodetic Infrastructure
https://www.nsgi.nl/



Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
dit direct te melden aan de verzender en het bericht te vernietigen.
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent
of the Kadaster is unlawful. If you have received this message, but are not the addressee,
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210507/d220f40e/attachment.html>

From dfileccia at hgnss.com  Fri May  7 06:24:11 2021
From: dfileccia at hgnss.com (David Fileccia)
Date: Fri, 7 May 2021 13:24:11 +0000
Subject: [PROJ] RD NAP + TRANS usage.
In-Reply-To: <AM0P192MB048244D95EBF37263E9A76B1EF579@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
References: <DM6PR06MB45889B2984DD5CA96E23F785BE579@DM6PR06MB4588.namprd06.prod.outlook.com>
 <AM0P192MB048244D95EBF37263E9A76B1EF579@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
Message-ID: <DM6PR06MB4588771F6E9B6177DD28283EBE579@DM6PR06MB4588.namprd06.prod.outlook.com>

Thanks. I know the ETRS89 contain lat/lon and the other transformed but I thought things were a bit off. I just downloaded the file and I will check things out.

Thank you for the quick response for a "non-member." BTW, I am a member of OSGEO but just not PROJ (if they are different?).

From: Lesparre, Jochem <Jochem.Lesparre at kadaster.nl>
Sent: Friday, May 7, 2021 9:18 AM
To: David Fileccia <dfileccia at hgnss.com>; proj at lists.osgeo.org
Subject: RE: RD NAP + TRANS usage.


[EXTERNAL EMAIL]
DO NOT CLICK links or attachments unless you recognize the sender and know the content is safe.

Hi David,

Note that the files 002_ETRS89.TXT and 002_RDNAP.TXT do not contain coordinates of the same points! If you want a data set with corresponding coordinates of the same points, you can use the file Z001_ETRS89andRDNAP.TXT, which is available here:
https://www.nsgi.nl/geodetische-infrastructuur/producten/programma-rdnaptrans/zelfvalidatie<https://linkscan.io/scan/ux/aHR0cHM6Ly93d3cubnNnaS5ubC9nZW9kZXRpc2NoZS1pbmZyYXN0cnVjdHV1ci9wcm9kdWN0ZW4vcHJvZ3JhbW1hLXJkbmFwdHJhbnMvemVsZnZhbGlkYXRpZQ==/C2AE946C3EB7E018315736716890F537BCE8827D290787BEB74234D7969E4998?c=1&i=1&docs=1>

I hope that solves your problem. If it does, suggestions on how to improve our documentation a nsgi.nl to prevent others from having the same confusion are most welcome.

Kind regards, Jochem


J. Lesparre
Geodetic Engineer (MSc)

Kadaster | Rijksdriehoeksmeting
+31-88-183 20 00 | rd at kadaster.nl<mailto:rd at kadaster.nl>

Netherlands Partnership Geodetic Infrastructure
https://www.nsgi.nl/<https://linkscan.io/scan/ux/aHR0cHM6Ly93d3cubnNnaS5ubC8=/BEEA0BE40F79E66AF37A12E77C50AF06EAF6DA2ADB478B65CCF7E7DFCF205F0A?c=1&i=1&docs=1>




From: PROJ <proj-bounces at lists.osgeo.org<mailto:proj-bounces at lists.osgeo.org>> On Behalf Of David Fileccia
Sent: vrijdag 7 mei 2021 14:56
To: proj at lists.osgeo.org<mailto:proj at lists.osgeo.org>
Subject: [PROJ] RD NAP + TRANS usage.

Hi,
I am trying to get the transformations for the Netherlands using PROJ/GDAL and I just can't seem to get the "correct" answers based on the data I have been given. I have tried both the variant 1 and 2 of the nl_nsgi_*.tif files with no luck.

The following data was created using the EPSG:7415 transform and nl_nsgi_rdtrans2018.tif and nl_nsgi_naptrans2018.tif:
002_ETRS89.TXT                          002_RDNAP.TXT                          My Transform
point_id latitude  longitude height     x_coordinate  y_coordinate  height     x coordinate  y coordinate  height
-------- --------- --------- ---------- ------------- ------------- ---------- ------------- ------------- ----------
27494    55.812797 6.464483  425.168800 317878.638600 658759.794800 145.672100 222633.565431 870884.933093 383.755149
27495    55.299814 6.510675  470.791500 176752.325000 310861.303600 227.283900 226438.527368 813771.108781 429.897194
27496    51.280225 4.474798  244.634700 294571.817600 254007.429300  67.285500 91363.817760  366154.277735 199.958129
27497    52.182009 5.896621  230.874600 160485.457200 264354.757200  -4.823400 189874.491989 466218.873201 187.566647
27498    51.344185 7.195423   61.603000  13061.818100 821852.289400 -33.810100 281024.030900 374436.255812  15.291030
27499    53.651730 5.093408  451.380800 243523.431500 868519.454900 110.775700 135597.678988 629707.008204 410.362531


I am going from WGS84 lat/long/height to the RD coordinates. My transforms are as follows:
   // Create the SRS frames from the WKT
   OGRSpatialReference oSRC;
   oSRC.SetAxisMappingStrategy (OAMS_TRADITIONAL_GIS_ORDER);
   oSRC.SetWellKnownGeogCS ("WGS84");

   OGRSpatialReference oDST;
   oDST.SetAxisMappingStrategy (OAMS_TRADITIONAL_GIS_ORDER);
   oDST.importFromProj4 ("EPSG:7415");

   // Set the transformations
   m_g2r = OGRCreateCoordinateTransformation (&oSRC, &oDST);

===

Shift the source lat/long/height using the horizontal shift and the geoid.

===



   double x = lon;

   double y = lat;

   double z = height;



   // Perform the transformation from LLA to NEZ

   int ok = false;

   if (m_g2r) {

      ok = m_g2r->Transform (1, &x, &y, &z);

   }



   // If we fail then return failed results

   if (!ok) {

      x = 0;

      y = 0;

      z = BAD_VALUE;

   }

I have tried swapping lat/long and I have tried different transforms. I have even tried the variant 1 files with no luck. I think, the group that is having me look at this, has not given me all the information about the coordinate collection.

So, in summary:

  1.  Does anyone have any idea about what I am doing wrong?
  2.  Are there any known monuments with lat/long/height and the corresponding RD coordinates that I can check against?

Best Regards,

David Fileccia
Senior Systems Engineer | HEMISPHERE GNSS
Office: 6860 Little Twin Road, Germantown, OH 45327, USA
Corporate: 8515 E. Anderson Drive, Scottsdale, AZ 85255, USA
M: +1 404 579 4391
dfileccia at hgnss.com<mailto:dfileccia at hgnss.com> | http://secure-web.cisco.com/1DXMIlB6vjOapqGbvkqiMEhqcsqNIzBr9vrOCaoysR1qX__vpRbk3jS2NazkQD5lknDsD3jWWJBj-ndaZghFKvYozu6B0E0HWsyBoytf8hj1n_DqLgu6TEtRXamcrfKkq4ycxGFZwgo2GLgxbz3B9dMkfL7Fd-mi5cD1I-0fFNfXcp3xw1FW0b9XmdEqRnyn6jBVcTWsMrmZv4QQW6tcM0B2rgIO8w_S0BfK5subThUDxcbOX__QAB6nZxV1Ub1JFpJnQ74DkGZMU0b4ukwFKtg/http%3A%2F%2Fwww.hgnss.com<https://linkscan.io/scan/ux/aHR0cDovL3NlY3VyZS13ZWIuY2lzY28uY29tLzFEWE1JbEI2dmpPYXBxR2J2a3FpTUVocWNzcU5JekJyOXZyT0Nhb3lzUjFxWF9fdnBSYmszalMyTmF6a1FENWxrbkRzRDNqV1dKQmotbmRhWmdoRkt2WW96dTZCMEUwSFdzeUJveXRmOGhqMW5fRHFMZ3U2VEV0UlhhbWNyZktrcTR5Y3hHRlp3Z28yR0xneGJ6M0I5ZE1rZkw3RmQtbWk1Y0QxSS0wZkZOZlhjcDN4dzFGVzBiOVhtZEVxUm55bjZqQlZjVFdzTXJtWnY0UVFXNnRjTTBCMnJnSU84d19TMEJmSzVzdWJUaFVEeGNiT1hfX1FBQjZuWnhWMVViMUpGcEpuUTc0RGtHWk1VMGI0dWt3Rkt0Zy9odHRwJTNBJTJGJTJGd3d3LmhnbnNzLmNvbQ==/C9A7A27BD9033D11B6426E2660899A4E003F503B7AEE8AF5A56A0C9A0357C77F?c=1&i=1&docs=1>
[cid:image001.png at 01D74322.65D6E450]

Disclaimer: This message (including any other messages, attachments, or files within) contains information that may be confidential or privileged and is the property of Hemisphere GNSS, Inc. and its subsidiaries ('Hemisphere'). It is intended for the person to whom it is addressed. If you are not the intended recipient, you are not authorized to read, copy, distribute, print, retain, or use this message or any part thereof. If you receive this message in error, please notify the sender immediately and delete all copies of this message. Any opinions or views expressed within are solely those of the author and do not necessarily represent those of Hemisphere. Thank you for your cooperation.



Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
dit direct te melden aan de verzender en het bericht te vernietigen.
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent
of the Kadaster is unlawful. If you have received this message, but are not the addressee,
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210507/9d8bb758/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 5199 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210507/9d8bb758/attachment-0001.png>

From even.rouault at spatialys.com  Fri May  7 06:38:20 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 7 May 2021 15:38:20 +0200
Subject: [PROJ] RD NAP + TRANS usage.
In-Reply-To: <DM6PR06MB4588771F6E9B6177DD28283EBE579@DM6PR06MB4588.namprd06.prod.outlook.com>
References: <DM6PR06MB45889B2984DD5CA96E23F785BE579@DM6PR06MB4588.namprd06.prod.outlook.com>
 <AM0P192MB048244D95EBF37263E9A76B1EF579@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <DM6PR06MB4588771F6E9B6177DD28283EBE579@DM6PR06MB4588.namprd06.prod.outlook.com>
Message-ID: <1b12ba88-3592-40ec-c4b7-01d09376a804@spatialys.com>


> Thank you for the quick response for a ?non-member.? BTW, I am a 
> member of OSGEO but just not PROJ (if they are different?).
>
I've manually accepted your posts, but for next times, please subscribe 
by using the form at https://lists.osgeo.org/mailman/listinfo/proj

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210507/3bf5e71a/attachment.html>

From even.rouault at spatialys.com  Thu May 13 13:27:37 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 13 May 2021 22:27:37 +0200
Subject: [PROJ] Fwd: EPSG v10.021: 3 issues
In-Reply-To: <207c0e94-fdf8-fd04-b876-aff1347c096b@spatialys.com>
References: <207c0e94-fdf8-fd04-b876-aff1347c096b@spatialys.com>
Message-ID: <f131eee1-d8ed-169e-4b5a-3dc47c4bbe55@spatialys.com>

In case someone else would try to integrate it.

-------- Message transf?r? --------
Sujet?: 	EPSG v10.021: 3 issues
Date?: 	Thu, 13 May 2021 19:09:00 +0200
De?: 	Even Rouault <even.rouault at spatialys.com>
Pour?: 	feedback at epsg.org



Hello,

Using the PostgreSQL dump of EPSG v10.021, I've identified the 3 
following issues:

- null (in a SQL meaning, not 0) parameter values for the translation 
values of the 3 Helmert transformations EPSG:1076 "PSAD56 to WGS 84 
(13)", EPSG:1077 "La Canoa to WGS 84 (2)" and EPSG:1581 "SIRGAS 1995 to 
WGS 84 (1)".

- transformation EPSG:9728 "ETRS89 to Cagliari 1956 height (1)" lacks a 
parameter value for the grid name

- null parameter value for the 'False northing' parameter of conversion 
EPSG:12103 "Michigan State Plane West zone"

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210513/ad67fa72/attachment.html>

From even.rouault at spatialys.com  Sun May 16 07:28:12 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 16 May 2021 16:28:12 +0200
Subject: [PROJ] List of missing grids
Message-ID: <6391d114-02b4-c7f7-6988-53c337e960ae@spatialys.com>

Hi,

I've added a wiki page 
(https://github.com/OSGeo/PROJ/wiki/Missing-grids) which points to the 
spreadsheet

https://docs.google.com/spreadsheets/d/1FVqgMAh5UWyvq7UVtEWOGjFntZ4wtO-AxS5xZSp__R8/edit

which can help coordinate efforts to fill gaps regarding grids listed in 
the database but not available in PROJ-data

Do not hesitate to ask for editing rights.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From richard.greenwood at gmail.com  Sun May 16 10:45:21 2021
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Sun, 16 May 2021 11:45:21 -0600
Subject: [PROJ] List of missing grids
In-Reply-To: <6391d114-02b4-c7f7-6988-53c337e960ae@spatialys.com>
References: <6391d114-02b4-c7f7-6988-53c337e960ae@spatialys.com>
Message-ID: <CAHBySPbQgeRnf4pkB1t0x4oOf-pf04DgCeunHugPxC7qqcnu_A@mail.gmail.com>

What's up with the individual U.S. states' harn/hpgn grids
in /usr/share/proj/*hpgn.gsb? I don't see them in the spreadsheet. Have
they been merged into another grid, or superseded?

Rich

On Sun, May 16, 2021 at 8:28 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I've added a wiki page
> (https://github.com/OSGeo/PROJ/wiki/Missing-grids) which points to the
> spreadsheet
>
>
> https://docs.google.com/spreadsheets/d/1FVqgMAh5UWyvq7UVtEWOGjFntZ4wtO-AxS5xZSp__R8/edit
>
> which can help coordinate efforts to fill gaps regarding grids listed in
> the database but not available in PROJ-data
>
> Do not hesitate to ask for editing rights.
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>


-- 
Richard W. Greenwood, PLS
www.greenwoodmap.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210516/f11a7e61/attachment.html>

From even.rouault at spatialys.com  Sun May 16 10:51:04 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 16 May 2021 19:51:04 +0200
Subject: [PROJ] List of missing grids
In-Reply-To: <CAHBySPbQgeRnf4pkB1t0x4oOf-pf04DgCeunHugPxC7qqcnu_A@mail.gmail.com>
References: <6391d114-02b4-c7f7-6988-53c337e960ae@spatialys.com>
 <CAHBySPbQgeRnf4pkB1t0x4oOf-pf04DgCeunHugPxC7qqcnu_A@mail.gmail.com>
Message-ID: <33f54361-0929-5e1b-8cbc-ca977f480251@spatialys.com>

Richard,

this list is about missing grids. The harn/hpgn grids are already 
included: https://github.com/OSGeo/PROJ-data/tree/master/us_noaa . But I 
believe they would be superseded by the NADCON5 grids which aren't yet 
integrated.

Even

Le 16/05/2021 ? 19:45, Richard Greenwood a ?crit?:
> What's up with the individual U.S. states' harn/hpgn grids 
> in?/usr/share/proj/*hpgn.gsb? I don't see them?in the spreadsheet. 
> Have they been merged into another grid, or superseded?
>
> Rich
>
> On Sun, May 16, 2021 at 8:28 AM Even Rouault 
> <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:
>
>     Hi,
>
>     I've added a wiki page
>     (https://github.com/OSGeo/PROJ/wiki/Missing-grids
>     <https://github.com/OSGeo/PROJ/wiki/Missing-grids>) which points
>     to the
>     spreadsheet
>
>     https://docs.google.com/spreadsheets/d/1FVqgMAh5UWyvq7UVtEWOGjFntZ4wtO-AxS5xZSp__R8/edit
>     <https://docs.google.com/spreadsheets/d/1FVqgMAh5UWyvq7UVtEWOGjFntZ4wtO-AxS5xZSp__R8/edit>
>
>     which can help coordinate efforts to fill gaps regarding grids
>     listed in
>     the database but not available in PROJ-data
>
>     Do not hesitate to ask for editing rights.
>
>     Even
>
>     -- 
>     http://www.spatialys.com <http://www.spatialys.com>
>     My software is free, but my time generally not.
>
>     _______________________________________________
>     PROJ mailing list
>     PROJ at lists.osgeo.org <mailto:PROJ at lists.osgeo.org>
>     https://lists.osgeo.org/mailman/listinfo/proj
>     <https://lists.osgeo.org/mailman/listinfo/proj>
>
>
>
> -- 
> Richard W. Greenwood, PLS
> www.greenwoodmap.com <http://www.greenwoodmap.com>

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210516/a3bf67a6/attachment.html>

From nyall.dawson at gmail.com  Mon May 24 21:14:40 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Tue, 25 May 2021 14:14:40 +1000
Subject: [PROJ] Determine if same celestial body, prior to 8.1
Message-ID: <CAB28AsiKeZsqoM9pr35wWSW-3yrn2z-TntSGpiOa9PnBqQdaJQ@mail.gmail.com>

Hi list,

I'm wondering if there's any way in proj versions < 8.1 to determine
(from the C api) whether two ellipsoid objects refer to the same
celestial body?

Ellipsoid::celestialBody() wasn't exposed to C api prior to 8.1, and
that's the method used by proj internally in
createOperationsGeodToGeod to determine whether two ellipsoids belong
to the same body.

Nyall

From knudsen.thomas at gmail.com  Tue May 25 01:26:39 2021
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Tue, 25 May 2021 10:26:39 +0200
Subject: [PROJ] Determine if same celestial body, prior to 8.1
In-Reply-To: <CAB28AsiKeZsqoM9pr35wWSW-3yrn2z-TntSGpiOa9PnBqQdaJQ@mail.gmail.com>
References: <CAB28AsiKeZsqoM9pr35wWSW-3yrn2z-TntSGpiOa9PnBqQdaJQ@mail.gmail.com>
Message-ID: <CAH0YoEMvOKZOE=+QcXBAgwt12U5ar0=HsepNigUL7dzzEStAOQ@mail.gmail.com>

Not exactly trying to answer your question, but I will point out that the
setting is slightly dubious, since you can use any ellipsoid for any
celestial body (although with results as deserved :-)). The important thing
is the datum/reference frame, not really the ellipsoid: While classical 2D
datums are closely tied to an ellipsoid, modern 3D reference frames are
based on cartesian coordinates, and the ellipsoid is purely an
afterthought, necessary only for conversion to "geo"graphical coordinates.

So while "most useful" for celestial bodies with a physical surface
resembling the ellipsoid at hand, in reality you can use any ellipsoid for
any body (although your latitudes, longitudes, and ellipsoidal heights may
look counterintuitive if using a mal-fitting ellipsoid). So having a
"celestialBody" property on an ellipsoid is a bit like attaching a brand
name to a generic component (e.g. "a 'Volkswagen' M10 nut")

Thomas


Den tir. 25. maj 2021 kl. 06.14 skrev Nyall Dawson <nyall.dawson at gmail.com>:

> Hi list,
>
> I'm wondering if there's any way in proj versions < 8.1 to determine
> (from the C api) whether two ellipsoid objects refer to the same
> celestial body?
>
> Ellipsoid::celestialBody() wasn't exposed to C api prior to 8.1, and
> that's the method used by proj internally in
> createOperationsGeodToGeod to determine whether two ellipsoids belong
> to the same body.
>
> Nyall
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210525/8b424973/attachment.html>

From Jochem.Lesparre at kadaster.nl  Tue May 25 01:54:02 2021
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Tue, 25 May 2021 08:54:02 +0000
Subject: [PROJ] Determine if same celestial body, prior to 8.1
In-Reply-To: <CAH0YoEMvOKZOE=+QcXBAgwt12U5ar0=HsepNigUL7dzzEStAOQ@mail.gmail.com>
References: <CAB28AsiKeZsqoM9pr35wWSW-3yrn2z-TntSGpiOa9PnBqQdaJQ@mail.gmail.com>
 <CAH0YoEMvOKZOE=+QcXBAgwt12U5ar0=HsepNigUL7dzzEStAOQ@mail.gmail.com>
Message-ID: <AM0P192MB04828C9AAC679F1B94C46869EF259@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

True. However, a M10 nut for a car is a bit to generic than an ellipsoid for a celestial body. It would be more appropriate to compare a ellipsoid with a paint colour. You can paint a door of an Volkswagen with a paint from Ford, but that door won?t be matching with any existing car.

Regards, Jochem


From: PROJ <proj-bounces at lists.osgeo.org> On Behalf Of Thomas Knudsen
Sent: dinsdag 25 mei 2021 10:27
To: Nyall Dawson <nyall.dawson at gmail.com>
Cc: PROJ <proj at lists.osgeo.org>
Subject: Re: [PROJ] Determine if same celestial body, prior to 8.1

Not exactly trying to answer your question, but I will point out that the setting is slightly dubious, since you can use any ellipsoid for any celestial body (although with results as deserved :-)). The important thing is the datum/reference frame, not really the ellipsoid: While classical 2D datums are closely tied to an ellipsoid, modern 3D reference frames are based on cartesian coordinates, and the ellipsoid is purely an afterthought, necessary only for conversion to "geo"graphical coordinates.

So while "most useful" for celestial bodies with a physical surface resembling the ellipsoid at hand, in reality you can use any ellipsoid for any body (although your latitudes, longitudes, and ellipsoidal heights may look counterintuitive if using a mal-fitting ellipsoid). So having a "celestialBody" property on an ellipsoid is a bit like attaching a brand name to a generic component (e.g. "a 'Volkswagen' M10 nut")

Thomas


Den tir. 25. maj 2021 kl. 06.14 skrev Nyall Dawson <nyall.dawson at gmail.com<mailto:nyall.dawson at gmail.com>>:
Hi list,

I'm wondering if there's any way in proj versions < 8.1 to determine
(from the C api) whether two ellipsoid objects refer to the same
celestial body?

Ellipsoid::celestialBody() wasn't exposed to C api prior to 8.1, and
that's the method used by proj internally in
createOperationsGeodToGeod to determine whether two ellipsoids belong
to the same body.

Nyall
_______________________________________________
PROJ mailing list
PROJ at lists.osgeo.org<mailto:PROJ at lists.osgeo.org>
https://secure-web.cisco.com/1K06QEa_eSgZ0VE8ZsvFrg7eFnUcPtMxCrAhwE--CCRJ4CvKrlzUdc5nvUdraj88ZFaTNwkh7gOikn7Y3Fk3De5Qz8PpxjF6u6XXQWDFeJQTh0MIr81LneOgzb2xkgsYCJaRjOo-gM3hovmdlS39FQDEjwrhM6xcpHCq1AhHwEzB1n0N-pi3XkoxYfN8RhGiBn0BEv287rtoqmElJsPmaSIK7lkKRECFzq_wojP6-d2GsFUE_9FfUdLXfhN8YyasnkF9OPBx0y7oiQ4WeTPc6wx2X28gtev1QhBlybht2F3M/https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fproj


Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
dit direct te melden aan de verzender en het bericht te vernietigen.
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent
of the Kadaster is unlawful. If you have received this message, but are not the addressee,
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210525/2ed718ac/attachment-0001.html>

From even.rouault at spatialys.com  Tue May 25 04:01:22 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 25 May 2021 13:01:22 +0200
Subject: [PROJ] Determine if same celestial body, prior to 8.1
In-Reply-To: <CAB28AsiKeZsqoM9pr35wWSW-3yrn2z-TntSGpiOa9PnBqQdaJQ@mail.gmail.com>
References: <CAB28AsiKeZsqoM9pr35wWSW-3yrn2z-TntSGpiOa9PnBqQdaJQ@mail.gmail.com>
Message-ID: <f0bb8e42-306e-8569-f5c7-135a287ca1ad@spatialys.com>

Hi Nyall,

as the concept of celestial body doesn't exist in the ISO 19111 model 
used by PROJ, and by WKT, PROJ has a fuzzy identification logic to find 
to which known celestial body an ellipsoid belongs to by checking that 
the relative difference between their semi-major axis is <= 0.005. That 
value was found to work at least with all commonly used ellipsoids for 
Earth.

See 
https://github.com/OSGeo/PROJ/blob/c44a3008b0edb5197b0efa584d3f5f7e18d79b0b/src/iso19111/factory.cpp#L1809

Even

Le 25/05/2021 ? 06:14, Nyall Dawson a ?crit?:
> Hi list,
>
> I'm wondering if there's any way in proj versions < 8.1 to determine
> (from the C api) whether two ellipsoid objects refer to the same
> celestial body?
>
> Ellipsoid::celestialBody() wasn't exposed to C api prior to 8.1, and
> that's the method used by proj internally in
> createOperationsGeodToGeod to determine whether two ellipsoids belong
> to the same body.
>
> Nyall
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Thu May 27 06:21:48 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 27 May 2021 15:21:48 +0200
Subject: [PROJ] Fwd: [Incubator] Application to add PROJ-JNI as an OSGeo
 Community Project
In-Reply-To: <CAB26zV3Smu83iCNzzzOt2vWhm+5r55jakiWtCQxKJq4QZvwaFw@mail.gmail.com>
References: <CAB26zV3Smu83iCNzzzOt2vWhm+5r55jakiWtCQxKJq4QZvwaFw@mail.gmail.com>
Message-ID: <7b8d0ebb-45b5-d990-69f9-80e49c2fb1d9@spatialys.com>

Hi,

Just saw this is in the mailing list traffic:

-------- Message transf?r? --------
Sujet?: 	[Incubator] Application to add PROJ-JNI as an OSGeo Community 
Project
Date?: 	Thu, 27 May 2021 09:11:51 -0400
De?: 	Will Cohen <wwcohen at gmail.com>
Pour?: 	incubator at lists.osgeo.org



Hello,

I'm writing to request that the incubation committee consider PROJ-JNI 
(https://github.com/Kortforsyningen/PROJ-JNI 
<https://github.com/Kortforsyningen/PROJ-JNI>) for inclusion as an OSGeo 
Community Project. This project's goal is to provide a JVM ecosystem set 
of native bindings to upstream PROJ, an increasingly important task 
given the increased development speed of PROJ in recent years, starting 
with the changes post PROJ 6. In particular, PROJ's shift to SQLite 
requires that JVM users of PROJ eventually interoperate with native 
libraries, making native bindings to PROJ itself a logical next step.

One very tangible benefit of inclusion, in addition to helping build 
community support for the project, would be the potential use of the 
org.osgeo/proj or org.proj/proj Maven coordinates as a home for project 
releases. The project has an initial 1.0 functional release tagged on 
GitHub, but artifacts haven?t yet been released to Maven Central given 
the placeholder group ID so far.

Please let me know if you have any questions!

Will

- [X] Be geospatial
 ? ?- [X] Confirm by checking README or project description 
(https://github.com/Kortforsyningen/PROJ-JNI/blob/master/README.md 
<https://github.com/Kortforsyningen/PROJ-JNI/blob/master/README.md>)
 ? ?- [ ] project page on the osgeo website (this we do not yet have)
 ? ?- [x] We ask projects have some user documentation, for example an 
OSGeo Live quickstart (linked from the README)
- [X] Have a free license or an open source license. (MIT, 
https://github.com/Kortforsyningen/PROJ-JNI/blob/master/LICENSE 
<https://github.com/Kortforsyningen/PROJ-JNI/blob/master/LICENSE>)
 ? ?- [X] The license must be OSI approved (MIT)
 ? ?- [X] We ask that the project team check the file headers and double 
check the license has been appropriately applied (it appears on all code 
files)
- [X] Welcome participation and new contributors (certainly looking for 
contributors and participation, which is part of why we seek to be a 
community project!)
 ? ?- [X] We look for a clear contribution policy (see README, we will 
work through github)
 ? ?- [X] We ask that the project demonstrate collaboration, perhaps 
with a history of bug report or pull requests (github)
 ? ?- [X] Projects are required to have a code of conduct (contributor 
covenant, 
https://github.com/Kortforsyningen/PROJ-JNI/blob/master/CODE_OF_CONDUCT.md 
<https://github.com/Kortforsyningen/PROJ-JNI/blob/master/CODE_OF_CONDUCT.md>)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210527/32fb6804/attachment.html>
-------------- next part --------------
_______________________________________________
Incubator mailing list
Incubator at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/incubator


From daniel.schilling at maplarge.com  Fri May 28 15:00:05 2021
From: daniel.schilling at maplarge.com (Daniel Schilling)
Date: Fri, 28 May 2021 18:00:05 -0400
Subject: [PROJ] Transformation from WKT string?
Message-ID: <CALCct-xkwk0e=wsQUWBeNi+=mit-KXaLkBbqrcG1-rPVgnVfRQ@mail.gmail.com>

Greetings!
I am trying to create a bound CRS using `proj_crs_create_bound_crs`, but I
only have a WKT string (`GEOGTRAN`...) for the transformation, not an EPSG
code.  I cannot figure out how to do it.

Neither `proj_create` nor `proj_create_from_wkt` seem able to create
transformations. The only way I have been able to create a
transformation so far is by using `proj_create_from_database`, but again -
I don't have an EPSG code for this.  Is there a way to do this?  I am using
Proj 8.

Thank you in advance for your help!
Daniel Schilling
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210528/82e3f526/attachment.html>

From even.rouault at spatialys.com  Fri May 28 15:13:02 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 29 May 2021 00:13:02 +0200
Subject: [PROJ] Transformation from WKT string?
In-Reply-To: <CALCct-xkwk0e=wsQUWBeNi+=mit-KXaLkBbqrcG1-rPVgnVfRQ@mail.gmail.com>
References: <CALCct-xkwk0e=wsQUWBeNi+=mit-KXaLkBbqrcG1-rPVgnVfRQ@mail.gmail.com>
Message-ID: <0ba5325f-8514-9896-0d83-f0fa77960b3b@spatialys.com>

Daniel,

It is likely one of the ESRI specific things at 
https://raw.githubusercontent.com/Esri/projection-engine-db-doc/master/csv/pe_list_geogtran.csv

The situation is that the import script of the ESRI database does import 
them in the PROJ database with some ad-hoc logic, but proj_create() has 
no support for those strings themselves. However, as they are in the 
database, you can use them by name (provided yours is a registered one, 
and not a custom one), with proj_create_from_name() (or if you find its 
code in the above list, with proj_create_from_database())

e.g.

projinfo -k operation Palestine_1923_To_WGS_1984_1X
PROJ string:
+proj=pipeline
 ? +step +proj=axisswap +order=2,1
 ? +step +proj=unitconvert +xy_in=deg +xy_out=rad
 ? +step +inv +proj=longlat +a=6378300.789 +b=6356566.435
 ? +step +proj=push +v_3
 ? +step +proj=cart +a=6378300.789 +b=6356566.435
 ? +step +proj=helmert +x=-181 +y=-122 +z=225
 ? +step +inv +proj=cart +ellps=WGS84
 ? +step +proj=pop +v_3
 ? +step +proj=unitconvert +xy_in=rad +xy_out=deg
 ? +step +proj=axisswap +order=2,1

WKT2:2019 string:
COORDINATEOPERATION["Palestine_1923_To_WGS_1984_1X",
 ??? SOURCECRS[
 ??????? GEOGCRS["Palestine 1923",
 ??????????? DATUM["Palestine 1923",
 ??????????????? ELLIPSOID["Clarke 1880 
(Benoit)",6378300.789,293.466315538981,
 ??????????????????? LENGTHUNIT["metre",1]]],
 ??????????? PRIMEM["Greenwich",0,
 ??????????????? ANGLEUNIT["degree",0.0174532925199433]],
 ??????????? CS[ellipsoidal,2],
 ??????????????? AXIS["geodetic latitude (Lat)",north,
 ??????????????????? ORDER[1],
 ??????????????????? ANGLEUNIT["degree",0.0174532925199433]],
 ??????????????? AXIS["geodetic longitude (Lon)",east,
 ??????????????????? ORDER[2],
 ??????????????????? ANGLEUNIT["degree",0.0174532925199433]],
 ??????????? ID["EPSG",4281]]],
 ??? TARGETCRS[
 ??????? GEOGCRS["WGS 84",
 ??????????? ENSEMBLE["World Geodetic System 1984 ensemble",
 ??????????????? MEMBER["World Geodetic System 1984 (Transit)"],
 ??????????????? MEMBER["World Geodetic System 1984 (G730)"],
 ??????????????? MEMBER["World Geodetic System 1984 (G873)"],
 ??????????????? MEMBER["World Geodetic System 1984 (G1150)"],
 ??????????????? MEMBER["World Geodetic System 1984 (G1674)"],
 ??????????????? MEMBER["World Geodetic System 1984 (G1762)"],
 ??????????????? ELLIPSOID["WGS 84",6378137,298.257223563,
 ??????????????????? LENGTHUNIT["metre",1]],
 ??????????????? ENSEMBLEACCURACY[2.0]],
 ??????????? PRIMEM["Greenwich",0,
 ??????????????? ANGLEUNIT["degree",0.0174532925199433]],
 ??????????? CS[ellipsoidal,2],
 ??????????????? AXIS["geodetic latitude (Lat)",north,
 ??????????????????? ORDER[1],
 ??????????????????? ANGLEUNIT["degree",0.0174532925199433]],
 ??????????????? AXIS["geodetic longitude (Lon)",east,
 ??????????????????? ORDER[2],
 ??????????????????? ANGLEUNIT["degree",0.0174532925199433]],
 ??????????? ID["EPSG",4326]]],
 ??? METHOD["Geocentric translations (geog2D domain)",
 ??????? ID["EPSG",9603]],
 ??? PARAMETER["X-axis translation",-181,
 ??????? LENGTHUNIT["metre",1],
 ??????? ID["EPSG",8605]],
 ??? PARAMETER["Y-axis translation",-122,
 ??????? LENGTHUNIT["metre",1],
 ??????? ID["EPSG",8606]],
 ??? PARAMETER["Z-axis translation",225,
 ??????? LENGTHUNIT["metre",1],
 ??????? ID["EPSG",8607]],
 ??? OPERATIONACCURACY[1.5],
 ??? USAGE[
 ??????? SCOPE["Not known."],
 ??????? AREA["Israel - onshore and offshore."],
 ??????? BBOX[29.45,32.99,33.53,35.69]],
 ??? ID["ESRI",108220]]


If it is a custom one, the logic at 
https://github.com/OSGeo/PROJ/blob/master/scripts/build_db_from_esri.py#L1480 
might help

Even


Le 29/05/2021 ? 00:00, Daniel Schilling a ?crit?:
> Greetings!
> I am trying to create a bound CRS using `proj_crs_create_bound_crs`, 
> but I only have a WKT string (`GEOGTRAN`...) for the?transformation, 
> not an EPSG code.? I cannot figure out how to do it.
>
> Neither `proj_create` nor `proj_create_from_wkt` seem able to create 
> transformations. The only way I have been able to create a 
> transformation?so far is by?using `proj_create_from_database`, but 
> again - I don't have an EPSG code for this.? Is there a way to do 
> this?? I am using Proj 8.
>
> Thank you in?advance for your help!
> Daniel Schilling
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210529/000ea570/attachment.html>

From Jochem.Lesparre at kadaster.nl  Sat May 29 01:03:41 2021
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Sat, 29 May 2021 08:03:41 +0000
Subject: [PROJ] Transformation from WKT string?
In-Reply-To: <0ba5325f-8514-9896-0d83-f0fa77960b3b@spatialys.com>
References: <CALCct-xkwk0e=wsQUWBeNi+=mit-KXaLkBbqrcG1-rPVgnVfRQ@mail.gmail.com>
 <0ba5325f-8514-9896-0d83-f0fa77960b3b@spatialys.com>
Message-ID: <AM0P192MB0482BCE98926DDBE77B3CAD2EF219@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

In the QGIS functionality for a custom CRS, one can enter a WKT string and convert it to a PROJ4-style string. How does that work and would that help in this case?



Disclaimer:
De inhoud van dit bericht is uitsluitend bestemd voor geadresseerde.
Gebruik van de inhoud van dit bericht door anderen zonder toestemming van het Kadaster
is onrechtmatig. Mocht dit bericht ten onrechte bij u terecht komen, dan verzoeken wij u
dit direct te melden aan de verzender en het bericht te vernietigen.
Aan de inhoud van dit bericht kunnen geen rechten worden ontleend.

Disclaimer:
The content of this message is meant to be received by the addressee only.
Use of the content of this message by anyone other than the addressee without the consent
of the Kadaster is unlawful. If you have received this message, but are not the addressee,
please contact the sender immediately and destroy the message.
No rights can be derived from the content of this message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210529/cf1a3b7d/attachment-0001.html>

From even.rouault at spatialys.com  Sat May 29 04:11:51 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 29 May 2021 13:11:51 +0200
Subject: [PROJ] Transformation from WKT string?
In-Reply-To: <AM0P192MB0482BCE98926DDBE77B3CAD2EF219@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
References: <CALCct-xkwk0e=wsQUWBeNi+=mit-KXaLkBbqrcG1-rPVgnVfRQ@mail.gmail.com>
 <0ba5325f-8514-9896-0d83-f0fa77960b3b@spatialys.com>
 <AM0P192MB0482BCE98926DDBE77B3CAD2EF219@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
Message-ID: <72a3da5c-8ede-cb06-a290-1a364764ebf9@spatialys.com>


> In the QGIS functionality for a custom CRS, one can enter a WKT string 
> and convert it to a PROJ4-style string. How does that work and would 
> that help in this case?
>
That uses proj API underneath, so GEOGTRAN will not be supported 
(directly) for the reason I mentioned in my previous email.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20210529/b096e153/attachment.html>

