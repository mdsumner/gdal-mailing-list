From j1 at jimenezshaw.com  Wed May  1 02:42:15 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 1 May 2024 11:42:15 +0200
Subject: [PROJ] Easting-Northing vs Northing-Easting
Message-ID: <CADRrdKsrD5fWKTpmuaPxq=YxLHyAykMSHNq2iCfYWQrad-DPCw@mail.gmail.com>

Hi PROJ community

A few days ago I asked this in Mastodon:

Question:
Do you know why some **projected** coordinate reference systems use axis
order Northing-Easting?
Is that a historical reason?
(The most common case nowadays is Easting-Northing)

It's even more confusing when Northing uses abbreviation X and Easting uses
Y.

Please, replay if you know.

Bonus for westing-southing ;)

-Edit- Clarification: it is about projected coordinates, in meters or feet;
not about lat-lon

https://mapstodon.space/@jjimenezshaw/112334199718200963


In this replay there are some examples of fancy axis orderings:
https://mapstodon.space/@jjimenezshaw/112339005590088608

Does anybody here has any clue?

Thanks.
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240501/7967d182/attachment.htm>

From martin.desruisseaux at geomatys.com  Wed May  1 03:06:40 2024
From: martin.desruisseaux at geomatys.com (Martin Desruisseaux)
Date: Wed, 1 May 2024 12:06:40 +0200
Subject: [PROJ] Easting-Northing vs Northing-Easting
In-Reply-To: <CADRrdKsrD5fWKTpmuaPxq=YxLHyAykMSHNq2iCfYWQrad-DPCw@mail.gmail.com>
References: <CADRrdKsrD5fWKTpmuaPxq=YxLHyAykMSHNq2iCfYWQrad-DPCw@mail.gmail.com>
Message-ID: <a764ddc6-ab7e-4f6c-8469-216df7f76781@geomatys.com>

Le 2024-05-01 ? 11 h 42, Javier Jimenez Shaw via PROJ a ?crit?:

> Question:
> Do you know why some **projected** coordinate reference systems use 
> axis order Northing-Easting?
> Is that a historical reason?

If I remember correctly, Roger Lott from EPSG told me that it was? 
reflecting the local convention of the country that defined the 
projected CRS. The abbreviation as well, even if "X" is sometime used 
for Northing (for example), it, this is because the country that defined 
the projected CRS does that way.

In some way, the EPSG database can be seen as not only a database of CRS 
and coordinate transformations relating them, but also a database of the 
local conventions for each country. In some way, the CRS contains 
localization data.

 ??? Martin



From j1 at jimenezshaw.com  Wed May  1 15:04:47 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 2 May 2024 00:04:47 +0200
Subject: [PROJ] Easting-Northing vs Northing-Easting
In-Reply-To: <a764ddc6-ab7e-4f6c-8469-216df7f76781@geomatys.com>
References: <CADRrdKsrD5fWKTpmuaPxq=YxLHyAykMSHNq2iCfYWQrad-DPCw@mail.gmail.com>
 <a764ddc6-ab7e-4f6c-8469-216df7f76781@geomatys.com>
Message-ID: <CADRrdKtM+pob_gLpEXtjQXgOFA4fj+Bu_HUjt-R0yTQ_S2-vWw@mail.gmail.com>

Yes, of course it is the local convention (more on that later). My question
is if anybody knows why those local conventions.

For me, to denote coordinates mathematically in a Cartesian plane, the
natural order is x,y. (How we studied at school). With the X positive axis
going to the right, and Y positive axis to the top of the page.
Doing that with Cartesian coordinates in a map I would expect the same. And
it is the most common convention (easting-northing)
However, in some cases the ordering is northing-easting. Probably due to
historical reasons. I would like to know those reasons.
Those maps are displayed with north at the top of the map. You have to go
really back in time to see printed (or more probably painted) maps with the
East or the South on the top (I never saw West, but probably there are).

Of course people can do whatever they want (and usually do). I am
interested on the reasons for those different criteria. Is the influence of
this or that cartographer? Or in eastern countries? Or by this or that
language? Maybe a scientist did that following some mathematical tradition
I don't know? Is it to have numbers in an easier way to read? Or is it
simply to make our life more complicated and error prone? Probably there is
not a single explanation, but many. I know there are geodetists in this
group with much more experience and knowledge than me.

About local conventions, as I say later in the mastodon thread, local usage
is not always following the axis order.
For instance, in USA almost every surveyor uses PNEZ order for GCPs (point
id, northing, easting, elevation), but all the official CRSs in USA are
Easting-Northing.
Similarly in Argentina, the official projected CRS is Northing-Easting, but
some (many?) surveyors use Easting-Northing.

About following the same criterion as in Latitude-Longitude, it is an
option. But for me it is just a guess. I do not have any data. And
geographic coordinates were not always mentioned in that order. I just
learned reading Snyder that Mercator wrote in 1569 "... quam secundum
longitudinem latitudinemque debitam..."
https://en.m.wikipedia.org/wiki/Mercator_1569_world_map#legend3 (I don't
speak Latin. Maybe the order is reversed due to any strange grammar rule).

Cheers.
Javier.


On Wed, 1 May 2024 at 12:06, Martin Desruisseaux via PROJ <
proj at lists.osgeo.org> wrote:

> Le 2024-05-01 ? 11 h 42, Javier Jimenez Shaw via PROJ a ?crit :
>
> > Question:
> > Do you know why some **projected** coordinate reference systems use
> > axis order Northing-Easting?
> > Is that a historical reason?
>
> If I remember correctly, Roger Lott from EPSG told me that it was
> reflecting the local convention of the country that defined the
> projected CRS. The abbreviation as well, even if "X" is sometime used
> for Northing (for example), it, this is because the country that defined
> the projected CRS does that way.
>
> In some way, the EPSG database can be seen as not only a database of CRS
> and coordinate transformations relating them, but also a database of the
> local conventions for each country. In some way, the CRS contains
> localization data.
>
>      Martin
>
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240502/c2a68620/attachment.htm>

From mwtoews at gmail.com  Wed May  1 15:16:33 2024
From: mwtoews at gmail.com (Mike Taves)
Date: Thu, 2 May 2024 10:16:33 +1200
Subject: [PROJ] Easting-Northing vs Northing-Easting
In-Reply-To: <CADRrdKsrD5fWKTpmuaPxq=YxLHyAykMSHNq2iCfYWQrad-DPCw@mail.gmail.com>
References: <CADRrdKsrD5fWKTpmuaPxq=YxLHyAykMSHNq2iCfYWQrad-DPCw@mail.gmail.com>
Message-ID: <CAM2FmMoRnZ7ED5hi+Vsjy0ucqpZ-zzbYMF-mWfcVWTi5odFMUw@mail.gmail.com>

On Wed, 1 May 2024 at 21:42, Javier Jimenez Shaw via PROJ
<proj at lists.osgeo.org> wrote:
> Is that a historical reason?

I wouldn't say there is any historical reason. Case-in-point, in 1949
a (E,N) "New Zealand Map Grid" (EPSG:27200) was used up until 2000,
when it was replaced by a (N,E) "New Zealand Transverse Mercator"
(EPSG:2193) system used today. Perhaps LINZ folks on this list know
why they switched to a (N,E) order.

From nick_mein at trimble.com  Wed May  1 15:35:56 2024
From: nick_mein at trimble.com (Nick Mein)
Date: Thu, 2 May 2024 10:35:56 +1200
Subject: [PROJ] Easting-Northing vs Northing-Easting
In-Reply-To: <CADRrdKtM+pob_gLpEXtjQXgOFA4fj+Bu_HUjt-R0yTQ_S2-vWw@mail.gmail.com>
References: <CADRrdKsrD5fWKTpmuaPxq=YxLHyAykMSHNq2iCfYWQrad-DPCw@mail.gmail.com>
 <a764ddc6-ab7e-4f6c-8469-216df7f76781@geomatys.com>
 <CADRrdKtM+pob_gLpEXtjQXgOFA4fj+Bu_HUjt-R0yTQ_S2-vWw@mail.gmail.com>
Message-ID: <CAF3Sn4WcmAptJT9PayYEQohCUz+Ai7Ez_cvZ767jsCk+ALyzkQ@mail.gmail.com>

Hi Javier,

By convention, geodetic coordinates are Latitude, Longitude (?,?). If you
project ?,? onto a plane (in the most natural way), you get Northing,
Easting. Which then leads to the X = North, Y = East convention.

As an example of a SW coordinate system, consider South Africa. See
https://ngi.dalrrd.gov.za/index.php/resources?download=37:the-south-african-coordinate-reference-system
:

*5.1.2 Latitude at natural origin /reference Latitude:*


   - 5.1.2 The equator 0?E, is the latitude of reference or origin of the
      Gauss Conform Coordinate System.

*5.1.3 x (southings)*


   - Coordinates are measured southwards from the equator
      - Increases from the equator (where x = 0m) towards the south pole
      (with a maximum of ? 3 840 000m for continental South Africa).
      - Similar to the ?northing? coordinates but sign in opposite.

*5.1.4 y (westings)*


   - Coordinates are measured from the Central Meridian (Lo) of the
      respective zone.
      - Increases from the CM (where y=0) in a westerly direction.
      - ?y? is +ve west of the CM and ?ve east of the Central Meridian.

Regards,
Nick.


On Thu, 2 May 2024 at 10:05, Javier Jimenez Shaw via PROJ <
proj at lists.osgeo.org> wrote:

> Yes, of course it is the local convention (more on that later). My
> question is if anybody knows why those local conventions.
>
> For me, to denote coordinates mathematically in a Cartesian plane, the
> natural order is x,y. (How we studied at school). With the X positive axis
> going to the right, and Y positive axis to the top of the page.
> Doing that with Cartesian coordinates in a map I would expect the same.
> And it is the most common convention (easting-northing)
> However, in some cases the ordering is northing-easting. Probably due to
> historical reasons. I would like to know those reasons.
> Those maps are displayed with north at the top of the map. You have to go
> really back in time to see printed (or more probably painted) maps with the
> East or the South on the top (I never saw West, but probably there are).
>
> Of course people can do whatever they want (and usually do). I am
> interested on the reasons for those different criteria. Is the influence of
> this or that cartographer? Or in eastern countries? Or by this or that
> language? Maybe a scientist did that following some mathematical tradition
> I don't know? Is it to have numbers in an easier way to read? Or is it
> simply to make our life more complicated and error prone? Probably there is
> not a single explanation, but many. I know there are geodetists in this
> group with much more experience and knowledge than me.
>
> About local conventions, as I say later in the mastodon thread, local
> usage is not always following the axis order.
> For instance, in USA almost every surveyor uses PNEZ order for GCPs (point
> id, northing, easting, elevation), but all the official CRSs in USA are
> Easting-Northing.
> Similarly in Argentina, the official projected CRS is Northing-Easting,
> but some (many?) surveyors use Easting-Northing.
>
> About following the same criterion as in Latitude-Longitude, it is an
> option. But for me it is just a guess. I do not have any data. And
> geographic coordinates were not always mentioned in that order. I just
> learned reading Snyder that Mercator wrote in 1569 "... quam secundum
> longitudinem latitudinemque debitam..."
> https://en.m.wikipedia.org/wiki/Mercator_1569_world_map#legend3 (I don't
> speak Latin. Maybe the order is reversed due to any strange grammar rule).
>
> Cheers.
> Javier.
>
>
> On Wed, 1 May 2024 at 12:06, Martin Desruisseaux via PROJ <
> proj at lists.osgeo.org> wrote:
>
>> Le 2024-05-01 ? 11 h 42, Javier Jimenez Shaw via PROJ a ?crit :
>>
>> > Question:
>> > Do you know why some **projected** coordinate reference systems use
>> > axis order Northing-Easting?
>> > Is that a historical reason?
>>
>> If I remember correctly, Roger Lott from EPSG told me that it was
>> reflecting the local convention of the country that defined the
>> projected CRS. The abbreviation as well, even if "X" is sometime used
>> for Northing (for example), it, this is because the country that defined
>> the projected CRS does that way.
>>
>> In some way, the EPSG database can be seen as not only a database of CRS
>> and coordinate transformations relating them, but also a database of the
>> local conventions for each country. In some way, the CRS contains
>> localization data.
>>
>>      Martin
>>
>>
>> _______________________________________________
>> PROJ mailing list
>> PROJ at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/proj
>>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240502/73aa3124/attachment.htm>

From Jochem.Lesparre at kadaster.nl  Mon May  6 03:14:34 2024
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Mon, 6 May 2024 10:14:34 +0000
Subject: [PROJ] Make push and pop FIFO?
In-Reply-To: <CAH0YoEMjTDEtW_D_LfxPPZ0jXSOOPrE6pT8Z-vxyLhwqY-p6NQ@mail.gmail.com>
References: <AM0P192MB0482617C0F76AD40C7E17D9EEF8CA@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <b7be156f-bf4a-4a40-b7c7-6550794a3b01@spatialys.com>
 <CAH0YoEPW3P48CU3OoYBS4c8kWhc8q4HsPQyDwJB-Jwjf0OaXuQ@mail.gmail.com>
 <3f3d124b-ccf8-4ea3-9df5-2f5f231d2c47@spatialys.com>
 <AM0P192MB048208CD9EDC078D26830606EF97A@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <AM0P192MB04826F48D0A6C9C4B8C4DE77EF7E2@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <b718e12e-37c2-412e-aefb-19a4f4d34288@spatialys.com>
 <CAH0YoEM66oNNHAZJbmHfksepMMpOB8YpWPM7tS++Tmm-jPZn0Q@mail.gmail.com>
 <8e1346c9-156b-4035-a1f1-63d9aaa514f9@spatialys.com>
 <CAH0YoEPH75YtfqBdu0+5y1vr-t_Srf5PRGJFar330pSoJwmaWw@mail.gmail.com>
 <CADRrdKvA4n8iNGeD7yn6XOtMbt5e4tiMkQ6DVGmSqRetLhr05A@mail.gmail.com>
 <CAH0YoEPV73zOfGTENXSJ3Xc_ZxpMA9-Ztnrhybu9_cQKMLExJw@mail.gmail.com>
 <3b2c90d9-eef2-4b5c-b429-c1ba7433189f@spatialys.com>
 <CAH0YoEOLm5Xjjzuj9qDV5L_BcoYYaAn1QuJHH9t5i3vfYO0vjA@mail.gmail.com>
 <23a16e4e-6498-4b6d-96b5-06316fe13ffb@spatialys.com>
 <CAH0YoEP-wDz=g1mETuCV=xB1xcNjmmCGtn=6aPPhTStrzUZZDQ@mail.gmail.com>
 <AM0P192MB0482986F99C6E83642B8B5D7EF052@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <CAH0YoEMjTDEtW_D_LfxPPZ0jXSOOPrE6pT8Z-vxyLhwqY-p6NQ@mail.gmail.com>
Message-ID: <AM0P192MB04821C945F297D24B574E138EF1C2@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Hello Even and Thomas,

I get the feeling we are going in circles. Is there any progress to get consensus on how to get the needed functionality in PROJ? At this point, I don?t care anymore about intuitive syntax or limitations for theoretical future applications. I just need a way to apply a 7-parameter transformation and a geoid in PROJ without one messing up the other, please.

Thomas, thanks for your links to Rust Geodesy. Unfortunately, I did not find the time to familiarise myself with Rust, so I couldn?t evaluate your proof of concept.

Regards, Jochem



Disclaimer:
De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor de geadresseerde(n).
Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of verstrekking van deze informatie aan derden is niet toegestaan.
Op al onze producten en diensten zijn onze algemene leveringsvoorwaarden van toepassing
[https://www.kadaster.nl/algemene-leveringsvoorwaarden].

Disclaimer:
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed.
If you are not the intended recipient, you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.
Our general terms and conditions of delivery apply to all our products and services
[https://www.kadaster.com/general-terms-and-conditions].
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240506/9f2cb9de/attachment.htm>

From j1 at jimenezshaw.com  Mon May  6 03:34:36 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 6 May 2024 12:34:36 +0200
Subject: [PROJ] is really "-t" needed in projinfo?
Message-ID: <CADRrdKt98BRNOO03Qzi6unZ7YySNCgyFUCrGVcXsoFrSiLvn5Q@mail.gmail.com>

Hi

Some times when I am using cs2cs I want to do also a projinfo, to see the
transformation(s) that is may apply.

It is always bothering me that I have to add "-s" and "-t".
Looking at the documentation I see that "-s" is not there any more.

Does it make sense that if there are two args without option identifier, it
assumes that the second is "-t"? Am I missing some corner-cases? (if you
like the idea, I am happy to do the PR)
I do not mean to remove "-t" completely, but to make the arg parser more
flexible.

Thanks.
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240506/fb33ed5a/attachment.htm>

From even.rouault at spatialys.com  Mon May  6 04:04:24 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 6 May 2024 13:04:24 +0200
Subject: [PROJ] is really "-t" needed in projinfo?
In-Reply-To: <CADRrdKt98BRNOO03Qzi6unZ7YySNCgyFUCrGVcXsoFrSiLvn5Q@mail.gmail.com>
References: <CADRrdKt98BRNOO03Qzi6unZ7YySNCgyFUCrGVcXsoFrSiLvn5Q@mail.gmail.com>
Message-ID: <37d2a43e-ce26-46c2-9334-cb45f9cd6ff5@spatialys.com>

Hi,

Le 06/05/2024 ? 12:34, Javier Jimenez Shaw via PROJ a ?crit?:
> Hi
>
> Some times when I am using cs2cs I want to do also a projinfo, to see 
> the transformation(s) that is may apply.
>
> It is always bothering me that I have to add "-s" and "-t".
> Looking at the documentation I see that "-s" is not there any more.
Accidental removal in the doc. Fixed per 
https://github.com/OSGeo/PROJ/pull/4134
>
> Does it make sense that if there are two args without option 
> identifier, it assumes that the second is "-t"? Am I missing some 
> corner-cases? (if you like the idea, I am happy to do the PR)
> I do not mean to remove "-t" completely, but to make the arg parser 
> more flexible.

I don't foresee any issue in allowing -s -t to be implicit

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Mon May  6 04:11:45 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 6 May 2024 13:11:45 +0200
Subject: [PROJ] Make push and pop FIFO?
In-Reply-To: <AM0P192MB04821C945F297D24B574E138EF1C2@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
References: <AM0P192MB0482617C0F76AD40C7E17D9EEF8CA@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <b718e12e-37c2-412e-aefb-19a4f4d34288@spatialys.com>
 <CAH0YoEM66oNNHAZJbmHfksepMMpOB8YpWPM7tS++Tmm-jPZn0Q@mail.gmail.com>
 <8e1346c9-156b-4035-a1f1-63d9aaa514f9@spatialys.com>
 <CAH0YoEPH75YtfqBdu0+5y1vr-t_Srf5PRGJFar330pSoJwmaWw@mail.gmail.com>
 <CADRrdKvA4n8iNGeD7yn6XOtMbt5e4tiMkQ6DVGmSqRetLhr05A@mail.gmail.com>
 <CAH0YoEPV73zOfGTENXSJ3Xc_ZxpMA9-Ztnrhybu9_cQKMLExJw@mail.gmail.com>
 <3b2c90d9-eef2-4b5c-b429-c1ba7433189f@spatialys.com>
 <CAH0YoEOLm5Xjjzuj9qDV5L_BcoYYaAn1QuJHH9t5i3vfYO0vjA@mail.gmail.com>
 <23a16e4e-6498-4b6d-96b5-06316fe13ffb@spatialys.com>
 <CAH0YoEP-wDz=g1mETuCV=xB1xcNjmmCGtn=6aPPhTStrzUZZDQ@mail.gmail.com>
 <AM0P192MB0482986F99C6E83642B8B5D7EF052@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <CAH0YoEMjTDEtW_D_LfxPPZ0jXSOOPrE6pT8Z-vxyLhwqY-p6NQ@mail.gmail.com>
 <AM0P192MB04821C945F297D24B574E138EF1C2@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
Message-ID: <c95679e1-cf38-4f5a-a407-fc9d641103cb@spatialys.com>

Hi,

Le 06/05/2024 ? 12:14, Lesparre, Jochem a ?crit?:
>
> Hello Even and Thomas,
>
> I get the feeling we are going in circles. Is there any progress to 
> get consensus on how to get the needed functionality in PROJ?
>
I'm afraid not. I tried a couple approaches but nothing that satisfied 
my taste. I have no real incentive pursuing this for now, as the ugly 
hacks of 
https://github.com/OSGeo/PROJ/blob/master/data/sql/transformations_czechia_extra.sql#L92 
using the 4th component and axisswap are a way to get the job done 
(until we need time-dependent transformations)

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240506/a86a9af5/attachment-0001.htm>

From Jochem.Lesparre at kadaster.nl  Tue May  7 05:23:39 2024
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Tue, 7 May 2024 12:23:39 +0000
Subject: [PROJ] Make push and pop FIFO?
In-Reply-To: <c95679e1-cf38-4f5a-a407-fc9d641103cb@spatialys.com>
References: <AM0P192MB0482617C0F76AD40C7E17D9EEF8CA@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <b718e12e-37c2-412e-aefb-19a4f4d34288@spatialys.com>
 <CAH0YoEM66oNNHAZJbmHfksepMMpOB8YpWPM7tS++Tmm-jPZn0Q@mail.gmail.com>
 <8e1346c9-156b-4035-a1f1-63d9aaa514f9@spatialys.com>
 <CAH0YoEPH75YtfqBdu0+5y1vr-t_Srf5PRGJFar330pSoJwmaWw@mail.gmail.com>
 <CADRrdKvA4n8iNGeD7yn6XOtMbt5e4tiMkQ6DVGmSqRetLhr05A@mail.gmail.com>
 <CAH0YoEPV73zOfGTENXSJ3Xc_ZxpMA9-Ztnrhybu9_cQKMLExJw@mail.gmail.com>
 <3b2c90d9-eef2-4b5c-b429-c1ba7433189f@spatialys.com>
 <CAH0YoEOLm5Xjjzuj9qDV5L_BcoYYaAn1QuJHH9t5i3vfYO0vjA@mail.gmail.com>
 <23a16e4e-6498-4b6d-96b5-06316fe13ffb@spatialys.com>
 <CAH0YoEP-wDz=g1mETuCV=xB1xcNjmmCGtn=6aPPhTStrzUZZDQ@mail.gmail.com>
 <AM0P192MB0482986F99C6E83642B8B5D7EF052@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <CAH0YoEMjTDEtW_D_LfxPPZ0jXSOOPrE6pT8Z-vxyLhwqY-p6NQ@mail.gmail.com>
 <AM0P192MB04821C945F297D24B574E138EF1C2@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <c95679e1-cf38-4f5a-a407-fc9d641103cb@spatialys.com>
Message-ID: <AM0P192MB0482E7F1D9C1A6AF321C5482EFE42@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Hi Even,

For the 3 islands of the Dutch Caribbean we have 2 islands with a time-dependent transformation (with no geoid yet) and 1 island with a (not yet time-dependent) transformation with a geoid. Using the 4th component and axisswap for the height would be too confusing. Moreover, we are going to introduce a time-dependent transformation for the third island as soon as possible.

The combination of a 7-parameter transformation and a geoid is the most basic transformation from an international 3D geographic CRS to a national projected CRS and a national physical height system. Don't you find it troublesome that PROJ needs a workaround for that? I really hope you will be able to choose an approach soon, even if it isn't entirely your taste.

Jochem



Disclaimer:
De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor de geadresseerde(n).
Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of verstrekking van deze informatie aan derden is niet toegestaan.
Op al onze producten en diensten zijn onze algemene leveringsvoorwaarden van toepassing
[https://www.kadaster.nl/algemene-leveringsvoorwaarden].

Disclaimer:
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed.
If you are not the intended recipient, you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.
Our general terms and conditions of delivery apply to all our products and services
[https://www.kadaster.com/general-terms-and-conditions].
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240507/c0cfc775/attachment.htm>

From knudsen.thomas at gmail.com  Tue May  7 05:40:22 2024
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Tue, 7 May 2024 14:40:22 +0200
Subject: [PROJ] Make push and pop FIFO?
In-Reply-To: <AM0P192MB0482E7F1D9C1A6AF321C5482EFE42@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
References: <AM0P192MB0482617C0F76AD40C7E17D9EEF8CA@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <b718e12e-37c2-412e-aefb-19a4f4d34288@spatialys.com>
 <CAH0YoEM66oNNHAZJbmHfksepMMpOB8YpWPM7tS++Tmm-jPZn0Q@mail.gmail.com>
 <8e1346c9-156b-4035-a1f1-63d9aaa514f9@spatialys.com>
 <CAH0YoEPH75YtfqBdu0+5y1vr-t_Srf5PRGJFar330pSoJwmaWw@mail.gmail.com>
 <CADRrdKvA4n8iNGeD7yn6XOtMbt5e4tiMkQ6DVGmSqRetLhr05A@mail.gmail.com>
 <CAH0YoEPV73zOfGTENXSJ3Xc_ZxpMA9-Ztnrhybu9_cQKMLExJw@mail.gmail.com>
 <3b2c90d9-eef2-4b5c-b429-c1ba7433189f@spatialys.com>
 <CAH0YoEOLm5Xjjzuj9qDV5L_BcoYYaAn1QuJHH9t5i3vfYO0vjA@mail.gmail.com>
 <23a16e4e-6498-4b6d-96b5-06316fe13ffb@spatialys.com>
 <CAH0YoEP-wDz=g1mETuCV=xB1xcNjmmCGtn=6aPPhTStrzUZZDQ@mail.gmail.com>
 <AM0P192MB0482986F99C6E83642B8B5D7EF052@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <CAH0YoEMjTDEtW_D_LfxPPZ0jXSOOPrE6pT8Z-vxyLhwqY-p6NQ@mail.gmail.com>
 <AM0P192MB04821C945F297D24B574E138EF1C2@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <c95679e1-cf38-4f5a-a407-fc9d641103cb@spatialys.com>
 <AM0P192MB0482E7F1D9C1A6AF321C5482EFE42@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
Message-ID: <CAH0YoEMcv3oVA66XDf34-LHr4sA_8wbXx6zMCm62wRxOH19Lzw@mail.gmail.com>

Jochem,

You're most welcome to submit a PR with a solution that fits your needs.
Otherwise, I believe the solution to the problem you mention is to have a
geometric national system, which you link to the global with a Helmert
operation, then a separate step for the geometric-to-geophysical.
Alternatively, use a pipeline, which will hide the axisswap steps from the
end user.

Den tirs. 7. maj 2024 kl. 14.23 skrev Lesparre, Jochem via PROJ <
proj at lists.osgeo.org>:

> Hi Even,
>
>
>
> For the 3 islands of the Dutch Caribbean we have 2 islands with a
> time-dependent transformation (with no geoid yet) and 1 island with a (not
> yet time-dependent) transformation with a geoid. Using the 4th component
> and axisswap for the height would be too confusing. Moreover, we are going
> to introduce a time-dependent transformation for the third island as soon
> as possible.
>
>
>
> The combination of a 7-parameter transformation and a geoid is the most
> basic transformation from an international 3D geographic CRS to a national
> projected CRS and a national physical height system. Don?t you find it
> troublesome that PROJ needs a workaround for that? I really hope you will
> be able to choose an approach soon, even if it isn?t entirely your taste.
>
>
>
> Jochem
>
>
>
>
> Disclaimer:
> De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor de
> geadresseerde(n).
> Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of
> verstrekking van deze informatie aan derden is niet toegestaan.
> Op al onze producten en diensten zijn onze algemene leveringsvoorwaarden
> van toepassing
> [https://www.kadaster.nl/algemene-leveringsvoorwaarden].
>
> Disclaimer:
> This email and any files transmitted with it are confidential and intended
> solely for the use of the individual or entity to whom they are addressed.
> If you are not the intended recipient, you are notified that disclosing,
> copying, distributing or taking any action in reliance on the contents of
> this information is strictly prohibited.
> Our general terms and conditions of delivery apply to all our products and
> services
> [https://www.kadaster.com/general-terms-and-conditions].
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240507/9bbf24ac/attachment.htm>

From even.rouault at spatialys.com  Tue May  7 15:22:34 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 8 May 2024 00:22:34 +0200
Subject: [PROJ] Make push and pop FIFO?
In-Reply-To: <AM0P192MB0482E7F1D9C1A6AF321C5482EFE42@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
References: <AM0P192MB0482617C0F76AD40C7E17D9EEF8CA@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <8e1346c9-156b-4035-a1f1-63d9aaa514f9@spatialys.com>
 <CAH0YoEPH75YtfqBdu0+5y1vr-t_Srf5PRGJFar330pSoJwmaWw@mail.gmail.com>
 <CADRrdKvA4n8iNGeD7yn6XOtMbt5e4tiMkQ6DVGmSqRetLhr05A@mail.gmail.com>
 <CAH0YoEPV73zOfGTENXSJ3Xc_ZxpMA9-Ztnrhybu9_cQKMLExJw@mail.gmail.com>
 <3b2c90d9-eef2-4b5c-b429-c1ba7433189f@spatialys.com>
 <CAH0YoEOLm5Xjjzuj9qDV5L_BcoYYaAn1QuJHH9t5i3vfYO0vjA@mail.gmail.com>
 <23a16e4e-6498-4b6d-96b5-06316fe13ffb@spatialys.com>
 <CAH0YoEP-wDz=g1mETuCV=xB1xcNjmmCGtn=6aPPhTStrzUZZDQ@mail.gmail.com>
 <AM0P192MB0482986F99C6E83642B8B5D7EF052@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <CAH0YoEMjTDEtW_D_LfxPPZ0jXSOOPrE6pT8Z-vxyLhwqY-p6NQ@mail.gmail.com>
 <AM0P192MB04821C945F297D24B574E138EF1C2@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <c95679e1-cf38-4f5a-a407-fc9d641103cb@spatialys.com>
 <AM0P192MB0482E7F1D9C1A6AF321C5482EFE42@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
Message-ID: <fb89a941-ab98-47c5-bae0-eaa19783d534@spatialys.com>

Jochem,

Digging a bit into this thread, it seems that 
https://github.com/OSGeo/PROJ/pull/4036 would probably be a reasonable 
starting point if you don't want to start from scratch. I see that 
Thomas had some comments about potential adjustments.

(As far as not finding troublesome that software I'm involved with 
doesn't do what others would it want to do, luckily I've learnt to bear 
imperfection. And, trying to make me feel culprit about it is neither an 
effective nor a fair strategy. I'm only likely to return on that subject 
if a customer has a need for that, and with strong hesitation given how 
tricky this has been!)

Even

Le 07/05/2024 ? 14:23, Lesparre, Jochem a ?crit?:
>
> Hi Even,
>
> For the 3 islands of the Dutch Caribbean we have 2 islands with a 
> time-dependent transformation (with no geoid yet) and 1 island with a 
> (not yet time-dependent) transformation with a geoid. Using the 4th 
> component and axisswap for the height would be too confusing. 
> Moreover, we are going to introduce a time-dependent transformation 
> for the third island as soon as possible.
>
> The combination of a 7-parameter transformation and a geoid is the 
> most basic transformation from an international 3D geographic CRS to a 
> national projected CRS and a national physical height system. Don?t 
> you find it troublesome that PROJ needs a workaround for that? I 
> really hope you will be able to choose an approach soon, even if it 
> isn?t entirely your taste.
>
> Jochem
>
>
>
> Disclaimer:
> De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor 
> de geadresseerde(n).
> Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of 
> verstrekking van deze informatie aan derden is niet toegestaan.
> Op al onze producten en diensten zijn onze algemene 
> leveringsvoorwaarden van toepassing
> [https://www.kadaster.nl/algemene-leveringsvoorwaarden].
>
> Disclaimer:
> This email and any files transmitted with it are confidential and 
> intended solely for the use of the individual or entity to whom they 
> are addressed.
> If you are not the intended recipient, you are notified that 
> disclosing, copying, distributing or taking any action in reliance on 
> the contents of this information is strictly prohibited.
> Our general terms and conditions of delivery apply to all our products 
> and services
> [https://www.kadaster.com/general-terms-and-conditions].

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240508/bf0448d8/attachment.htm>

From j1 at jimenezshaw.com  Thu May  9 03:47:51 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 9 May 2024 12:47:51 +0200
Subject: [PROJ] WGS 84 to GDA2020 in EPSG
Message-ID: <CADRrdKtvxK-0db457Dk0r_KHspspH3pins+JNPpP2A+R-5smMA@mail.gmail.com>

Hi

Preparing a talk for FOSS4G Europe in Tartu (see you there if you come!), I
found that the 3 transformations  in EPSG from WGS 84 to GDA2020 (2, 3 and
4) they all have 3m accuracy.
That is not giving a clue to PROJ about which one is better.

(2) is a null Helmert transformation.
(3) is a Helmert with 7 numbers
(4) uses a grid.

Is there anybody from the Australian agency here? Is there any reason why
the three transformations have the same accuracy? I would expect different
values. I looks like a copy-paste issue.

The same happens with the transformation from WGS 84 to GDA94.

Thanks,
Javier

.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240509/afdd71b7/attachment.htm>

From even.rouault at spatialys.com  Thu May  9 05:40:29 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 9 May 2024 14:40:29 +0200
Subject: [PROJ] WGS 84 to GDA2020 in EPSG
In-Reply-To: <CADRrdKtvxK-0db457Dk0r_KHspspH3pins+JNPpP2A+R-5smMA@mail.gmail.com>
References: <CADRrdKtvxK-0db457Dk0r_KHspspH3pins+JNPpP2A+R-5smMA@mail.gmail.com>
Message-ID: <00c1b04e-efcc-4438-91f9-ea58b69da78e@spatialys.com>

Javier,

you might perhaps find some hints at 
https://www.ga.gov.au/scientific-topics/positioning-navigation/geodesy/transform-convert 
or 
https://www.icsm.gov.au/sites/default/files/2021-10/GDA2020%20Technical%20Manual%20V1.7.pdf 
. There are also a number of (closed) issues on PROJ tracker about that, 
because that confuses everybody, but I believe the answer is that all 
and none of the 3 transformations is correct, because there is no 
universal answer. Mostly comes from the fact that GDA94 & GDA2020 are 
plate-anchored and WGS 84 (as EPSG:4326) is a global datum ensemble with 
an accuracy of 2 m.

There are time-dependent transformations between GDA94 and WGS 84 
(G1762), and GDA2020 and WGS 84 (G1762), but for generic WGS 84, things 
are more fuzzy, as one might consider that GDA94 = WGS 84 (at 1994.0) 
and GDA2020 = WGS 84 (at 2020.0).

So when you do WGS84 to GDA2020, if you are talking about coordinates 
with an epoch of ~ 2020, then the null Helmert transformation is 
appropriate, since by definition GDA2020 = ITRF2014 at 2020.0 ~= WGS84 
at 2020

But if you are considering WGS84 coordinates with an epoch of ~ 1994.0, 
then WGS84 ~= GDA94, and it makes sense then to propose the 
transformations between GDA94 and GDA2020, hence (3) and (4). As far as 
I remember the "standard" conformal transformation between GDA94 and 
GDA2020 is the (non-null) 7-Helmert, and a NTv2 grid 
(GDA94_GDA2020_conformal) was just derived from this 7-Helmert 
transformation because some software prefer grids to Helmert 
transformation. The proposed WGS 84 to GDA2020 (4) actually uses 
GDA94_GDA2020_conformal_and_distortion, which is a variation of the 
conformal grid that takes into account some distortion (cf paragraph 
3.2.2 of the GDA2020 technical manual)

I suspect the 3m accuracy was given so that none of the 3 
transformations particularly appear as better as the others, as 
ultimately the user needs to decide what "type of WGS 84" he has.

Just my non-authoritative guesses.

Even

Le 09/05/2024 ? 12:47, Javier Jimenez Shaw via PROJ a ?crit?:
> Hi
>
> Preparing a talk for FOSS4G Europe in Tartu (see you there if you 
> come!), I found that the 3 transformations? in EPSG from WGS 84 to 
> GDA2020 (2, 3 and 4) they all have 3m accuracy.
> That is not giving a clue to PROJ about which one is better.
>
> (2) is a null Helmert transformation.
> (3) is a Helmert with 7 numbers
> (4) uses a grid.
>
> Is there anybody from the Australian agency here? Is there any reason 
> why the three transformations have the same accuracy? I would expect 
> different values. I looks like a copy-paste issue.
>
> The same happens with the transformation from WGS 84 to GDA94.
>
> Thanks,
> Javier
>
> .___ ._ ..._ .. . ._.? .___ .. __ . _. . __..? ... .... ._ .__
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240509/d1b18b8a/attachment.htm>

From gdt at lexort.com  Thu May  9 05:37:59 2024
From: gdt at lexort.com (Greg Troxel)
Date: Thu, 09 May 2024 08:37:59 -0400
Subject: [PROJ] WGS 84 to GDA2020 in EPSG
In-Reply-To: <CADRrdKtvxK-0db457Dk0r_KHspspH3pins+JNPpP2A+R-5smMA@mail.gmail.com>
 (Javier Jimenez Shaw via PROJ's message of "Thu, 9 May 2024 12:47:51
 +0200")
References: <CADRrdKtvxK-0db457Dk0r_KHspspH3pins+JNPpP2A+R-5smMA@mail.gmail.com>
Message-ID: <rmicypv2mag.fsf@s1.lexort.com>

Javier Jimenez Shaw via PROJ <proj at lists.osgeo.org> writes:

> Hi
>
> Preparing a talk for FOSS4G Europe in Tartu (see you there if you come!), I
> found that the 3 transformations  in EPSG from WGS 84 to GDA2020 (2, 3 and
> 4) they all have 3m accuracy.
> That is not giving a clue to PROJ about which one is better.
>
> (2) is a null Helmert transformation.
> (3) is a Helmert with 7 numbers
> (4) uses a grid.
>
> Is there anybody from the Australian agency here? Is there any reason why
> the three transformations have the same accuracy? I would expect different
> values. I looks like a copy-paste issue.
>
> The same happens with the transformation from WGS 84 to GDA94.

Part of the problem is likely "WGS84 is an ensemble" and how proj
handles that.  I'll leave it at that today :-)

Have you looked for transforms from recent realizations of WGS84 (or
ITRF) to GDA2020?  For transforms from the ensemble, 2m (maybe it's 3m
there) is the best you can do.

Sorry  but I think the ensemble issues have to be detangled to really
address this.

From j1 at jimenezshaw.com  Fri May 10 01:01:07 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 10 May 2024 10:01:07 +0200
Subject: [PROJ] WGS 84 to GDA2020 in EPSG
In-Reply-To: <00c1b04e-efcc-4438-91f9-ea58b69da78e@spatialys.com>
References: <CADRrdKtvxK-0db457Dk0r_KHspspH3pins+JNPpP2A+R-5smMA@mail.gmail.com>
 <00c1b04e-efcc-4438-91f9-ea58b69da78e@spatialys.com>
Message-ID: <CADRrdKuDcUfXKzv07aoCpU=JK-y0Yuhbw=zqo229YeeNB2ROSg@mail.gmail.com>

Thanks Even. That content would fit perfectly in the talk... but it is only
20 min. I will see how much time I have to go into it.

On Thu, 9 May 2024 at 14:40, Even Rouault <even.rouault at spatialys.com>
wrote:

> Javier,
>
> you might perhaps find some hints at
> https://www.ga.gov.au/scientific-topics/positioning-navigation/geodesy/transform-convert
> or
> https://www.icsm.gov.au/sites/default/files/2021-10/GDA2020%20Technical%20Manual%20V1.7.pdf
> . There are also a number of (closed) issues on PROJ tracker about that,
> because that confuses everybody, but I believe the answer is that all and
> none of the 3 transformations is correct, because there is no universal
> answer. Mostly comes from the fact that GDA94 & GDA2020 are plate-anchored
> and WGS 84 (as EPSG:4326) is a global datum ensemble with an accuracy of 2
> m.
>
> There are time-dependent transformations between GDA94 and WGS 84 (G1762),
> and GDA2020 and WGS 84 (G1762), but for generic WGS 84, things are more
> fuzzy, as one might consider that GDA94 = WGS 84 (at 1994.0) and GDA2020 =
> WGS 84 (at 2020.0).
>
> So when you do WGS84 to GDA2020, if you are talking about coordinates with
> an epoch of ~ 2020, then the null Helmert transformation is appropriate,
> since by definition GDA2020 = ITRF2014 at 2020.0 ~= WGS84 at 2020
>
> But if you are considering WGS84 coordinates with an epoch of ~ 1994.0,
> then WGS84 ~= GDA94, and it makes sense then to propose the transformations
> between GDA94 and GDA2020, hence (3) and (4). As far as I remember the
> "standard" conformal transformation between GDA94 and GDA2020 is the
> (non-null) 7-Helmert, and a NTv2 grid (GDA94_GDA2020_conformal) was just
> derived from this 7-Helmert transformation because some software prefer
> grids to Helmert transformation. The proposed WGS 84 to GDA2020 (4)
> actually uses GDA94_GDA2020_conformal_and_distortion, which is a variation
> of the conformal grid that takes into account some distortion (cf paragraph
> 3.2.2 of the GDA2020 technical manual)
>
> I suspect the 3m accuracy was given so that none of the 3 transformations
> particularly appear as better as the others, as ultimately the user needs
> to decide what "type of WGS 84" he has.
>
> Just my non-authoritative guesses.
>
> Even
> Le 09/05/2024 ? 12:47, Javier Jimenez Shaw via PROJ a ?crit :
>
> Hi
>
> Preparing a talk for FOSS4G Europe in Tartu (see you there if you come!),
> I found that the 3 transformations  in EPSG from WGS 84 to GDA2020 (2, 3
> and 4) they all have 3m accuracy.
> That is not giving a clue to PROJ about which one is better.
>
> (2) is a null Helmert transformation.
> (3) is a Helmert with 7 numbers
> (4) uses a grid.
>
> Is there anybody from the Australian agency here? Is there any reason why
> the three transformations have the same accuracy? I would expect different
> values. I looks like a copy-paste issue.
>
> The same happens with the transformation from WGS 84 to GDA94.
>
> Thanks,
> Javier
>
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
>
> _______________________________________________
> PROJ mailing listPROJ at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/proj
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240510/52990ab7/attachment.htm>

From Jochem.Lesparre at kadaster.nl  Fri May 10 01:07:03 2024
From: Jochem.Lesparre at kadaster.nl (Lesparre, Jochem)
Date: Fri, 10 May 2024 08:07:03 +0000
Subject: [PROJ] Make push and pop FIFO?
In-Reply-To: <fb89a941-ab98-47c5-bae0-eaa19783d534@spatialys.com>
References: <AM0P192MB0482617C0F76AD40C7E17D9EEF8CA@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <8e1346c9-156b-4035-a1f1-63d9aaa514f9@spatialys.com>
 <CAH0YoEPH75YtfqBdu0+5y1vr-t_Srf5PRGJFar330pSoJwmaWw@mail.gmail.com>
 <CADRrdKvA4n8iNGeD7yn6XOtMbt5e4tiMkQ6DVGmSqRetLhr05A@mail.gmail.com>
 <CAH0YoEPV73zOfGTENXSJ3Xc_ZxpMA9-Ztnrhybu9_cQKMLExJw@mail.gmail.com>
 <3b2c90d9-eef2-4b5c-b429-c1ba7433189f@spatialys.com>
 <CAH0YoEOLm5Xjjzuj9qDV5L_BcoYYaAn1QuJHH9t5i3vfYO0vjA@mail.gmail.com>
 <23a16e4e-6498-4b6d-96b5-06316fe13ffb@spatialys.com>
 <CAH0YoEP-wDz=g1mETuCV=xB1xcNjmmCGtn=6aPPhTStrzUZZDQ@mail.gmail.com>
 <AM0P192MB0482986F99C6E83642B8B5D7EF052@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <CAH0YoEMjTDEtW_D_LfxPPZ0jXSOOPrE6pT8Z-vxyLhwqY-p6NQ@mail.gmail.com>
 <AM0P192MB04821C945F297D24B574E138EF1C2@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <c95679e1-cf38-4f5a-a407-fc9d641103cb@spatialys.com>
 <AM0P192MB0482E7F1D9C1A6AF321C5482EFE42@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>
 <fb89a941-ab98-47c5-bae0-eaa19783d534@spatialys.com>
Message-ID: <AM0P192MB0482C08FE2610EBEE0FBE8C0EFE72@AM0P192MB0482.EURP192.PROD.OUTLOOK.COM>

Even and Thomas,

Sorry, it wasn't my intention to criticise you. It seems that I didn't use the proper wording to express my honest believe that PROJ deserves a better solution. My apologies! I recognise that the discussion between you two on how to solve this issue demonstrates your dedication to PROJ, which I really appreciate.

I'm more than willing to convince people in my organisation that next to using PROJ we should also contribute to PROJ with code to solve this issue. However, it is hard to do that if there is no consensus on the way to solve it. There is no point in doing a pull request for us, if it won't be merged into a next PROJ release. (We normally publish a single PROJ pipeline for the 3D to 2D+1D transformation, that our users can implement themselves using a recent PROJ version. Splitting it in a 3D to 2D transformation and a 3D to 1D transformation makes it more prone to mistakes in the implementation.)

If we would do a pull request, I think it would be best to keep it as limited as possible, to maximise the change of obtaining consensus, right? So I would suggest not to change +push and +pop and only add one simple new operation, something like +proj=stackswap +order=2,1 which would swap the top two values on the stack for all 4 coordinate components.

Jochem



Disclaimer:
De inhoud van deze e-mail is vertrouwelijk en uitsluitend bestemd voor de geadresseerde(n).
Gebruik, openbaarmaking, vermenigvuldiging, verspreiding en/of verstrekking van deze informatie aan derden is niet toegestaan.
Op al onze producten en diensten zijn onze algemene leveringsvoorwaarden van toepassing
[https://www.kadaster.nl/algemene-leveringsvoorwaarden].

Disclaimer:
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed.
If you are not the intended recipient, you are notified that disclosing, copying, distributing or taking any action in reliance on the contents of this information is strictly prohibited.
Our general terms and conditions of delivery apply to all our products and services
[https://www.kadaster.com/general-terms-and-conditions].
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240510/f063b3ca/attachment-0001.htm>

From akirmse at gmail.com  Mon May 27 11:27:15 2024
From: akirmse at gmail.com (Andrew Kirmse)
Date: Mon, 27 May 2024 11:27:15 -0700
Subject: [PROJ] Vertical conversions for Austria
Message-ID: <CAC9g3Suxt2VKGfDHJnHOEqhQmJQz29pBvatJLHB=SyY2AUXA3g@mail.gmail.com>

I have some Lidar-derived lat/lng/elevation points in Austria in EPSG:9274
<https://epsg.io/9274> that I want to convert to EPSG:5778
<https://epsg.io/5778>.  I gather this is done by applying the offsets from
a particular model called the "H?hengrid", which I found at
https://cdn.proj.org/.  These points are locations and heights of
mountains, and I want to convert them to EPSG:5778 because that's what's
used on the BEV Austrian topographic maps.

I get this error when I try to do the conversion:

echo 46.642970 12.792060 2513.98 | cs2cs +init=epsg:9274 +to +init=epsg:5778
DeprecationWarning: PROJ_LIB environment variable is deprecated, and will
be removed in a future release. You are encouraged to set PROJ_DATA instead.
proj_crs_get_geodetic_crs: CRS has no geodetic CRS
Rel. 9.3.1, December 1st, 2023
<cs2cs>:
cannot initialize transformation
cause: Unknown error (code 4096)
program abnormally terminated

What does "CRS has no geodetic CRS" mean, and how do I fix it?

(Also, if anyone knows more about why these two different EPSGs exist, I am
curious.  One is for maps and one is for "scientific purposes" but I don't
know what that means in practice.)

---Andrew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240527/d78a09e8/attachment.htm>

From even.rouault at spatialys.com  Mon May 27 11:42:26 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 27 May 2024 20:42:26 +0200
Subject: [PROJ] Vertical conversions for Austria
In-Reply-To: <CAC9g3Suxt2VKGfDHJnHOEqhQmJQz29pBvatJLHB=SyY2AUXA3g@mail.gmail.com>
References: <CAC9g3Suxt2VKGfDHJnHOEqhQmJQz29pBvatJLHB=SyY2AUXA3g@mail.gmail.com>
Message-ID: <440b88b4-a389-4269-91c2-e6241838f241@spatialys.com>

Andrew,

The error you get is related to the fact that you can't formally 
transform coordinates between 2 vertical CRS, without specifying the 
"horizontal" / geographic CRS into which you enter the long, lat.

Here you, very likely, should combine them with EPSG:4312 "MGI" which is 
the CRS into which the at_bev_GV_Hoehengrid_V1.tif grid is registered to

So:

$ echo 46.642970 12.792060? 2513.98 |? PROJ_NETWORK=ON bin/cs2cs -d 8 
EPSG:4312+9274? EPSG:4312+5778
46.64297000??? 12.79206000 2514.15224077

Note that I've specified a latitude, longitude order as EPSG:4312 is 
defined with axis in that order

Even

Le 27/05/2024 ? 20:27, Andrew Kirmse via PROJ a ?crit?:
> I have some Lidar-derived lat/lng/elevation points in Austria in 
> EPSG:9274 <https://epsg.io/9274> that I want to convert to EPSG:5778 
> <https://epsg.io/5778>. I gather this is done by applying the offsets 
> from a particular model called the "H?hengrid", which I found at 
> https://cdn.proj.org/. These points are locations and heights of 
> mountains, and I want to convert them to EPSG:5778 because that's 
> what's used on the BEV Austrian topographic maps.
>
> I get this error when I try to do the conversion:
>
> echo 46.642970 12.792060 2513.98 | cs2cs +init=epsg:9274 +to 
> +init=epsg:5778
> DeprecationWarning: PROJ_LIB environment variable is deprecated, and 
> will be removed in a future release. You are encouraged to set 
> PROJ_DATA instead.
> proj_crs_get_geodetic_crs: CRS has no geodetic CRS
> Rel. 9.3.1, December 1st, 2023
> <cs2cs>:
> cannot initialize transformation
> cause: Unknown error (code 4096)
> program abnormally terminated
>
> What does "CRS has no geodetic CRS" mean, and how do I fix it?
>
> (Also, if anyone knows more about why these two different EPSGs exist, 
> I am curious.? One is for maps and one is for "scientific purposes" 
> but I don't know what that?means in?practice.)
>
> ---Andrew
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240527/04fc6d88/attachment.htm>

From akirmse at gmail.com  Mon May 27 12:16:00 2024
From: akirmse at gmail.com (Andrew Kirmse)
Date: Mon, 27 May 2024 12:16:00 -0700
Subject: [PROJ] Vertical conversions for Austria
In-Reply-To: <440b88b4-a389-4269-91c2-e6241838f241@spatialys.com>
References: <CAC9g3Suxt2VKGfDHJnHOEqhQmJQz29pBvatJLHB=SyY2AUXA3g@mail.gmail.com>
 <440b88b4-a389-4269-91c2-e6241838f241@spatialys.com>
Message-ID: <CAC9g3StaMzdmH7OMZBHxmye=TgK9oFDVzqsF5aKdmSgcnP9Z2A@mail.gmail.com>

Many thanks, that makes sense, and it solves my problem.

---Andrew

On Mon, May 27, 2024 at 11:42?AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Andrew,
>
> The error you get is related to the fact that you can't formally transform
> coordinates between 2 vertical CRS, without specifying the "horizontal" /
> geographic CRS into which you enter the long, lat.
>
> Here you, very likely, should combine them with EPSG:4312 "MGI" which is
> the CRS into which the at_bev_GV_Hoehengrid_V1.tif grid is registered to
>
> So:
>
> $ echo 46.642970 12.792060  2513.98 |  PROJ_NETWORK=ON bin/cs2cs -d 8
> EPSG:4312+9274  EPSG:4312+5778
> 46.64297000    12.79206000 2514.15224077
>
> Note that I've specified a latitude, longitude order as EPSG:4312 is
> defined with axis in that order
>
> Even
> Le 27/05/2024 ? 20:27, Andrew Kirmse via PROJ a ?crit :
>
> I have some Lidar-derived lat/lng/elevation points in Austria in EPSG:9274
> <https://epsg.io/9274> that I want to convert to EPSG:5778
> <https://epsg.io/5778>.  I gather this is done by applying the offsets
> from a particular model called the "H?hengrid", which I found at
> https://cdn.proj.org/.  These points are locations and heights of
> mountains, and I want to convert them to EPSG:5778 because that's what's
> used on the BEV Austrian topographic maps.
>
> I get this error when I try to do the conversion:
>
> echo 46.642970 12.792060 2513.98 | cs2cs +init=epsg:9274 +to
> +init=epsg:5778
> DeprecationWarning: PROJ_LIB environment variable is deprecated, and will
> be removed in a future release. You are encouraged to set PROJ_DATA instead.
> proj_crs_get_geodetic_crs: CRS has no geodetic CRS
> Rel. 9.3.1, December 1st, 2023
> <cs2cs>:
> cannot initialize transformation
> cause: Unknown error (code 4096)
> program abnormally terminated
>
> What does "CRS has no geodetic CRS" mean, and how do I fix it?
>
> (Also, if anyone knows more about why these two different EPSGs exist, I
> am curious.  One is for maps and one is for "scientific purposes" but I
> don't know what that means in practice.)
>
> ---Andrew
>
> _______________________________________________
> PROJ mailing listPROJ at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/proj
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240527/939b1935/attachment.htm>

From kristianevers at gmail.com  Mon May 27 12:42:42 2024
From: kristianevers at gmail.com (Kristian Evers)
Date: Mon, 27 May 2024 21:42:42 +0200
Subject: [PROJ] PROJ 9.4.1RC1 & PROJ-data 1.18RC1
Message-ID: <8E40CCCD-B630-4159-AC17-FA732C3B3B83@gmail.com>

All,

It?s time for another round of releases, so in preparation for the final packages I have uploaded
release candidates for PROJ and PROJ-data. Download the archives here:

https://download.osgeo.org/proj/proj-9.4.1RC1.tar.gz 
https://download.osgeo.org/proj/proj-9.4.1RC1.zip 

https://download.osgeo.org/proj/proj-data-1.18RC1.tar.gz 
https://download.osgeo.org/proj/proj-data-1.18RC1.zip 

The PROJ release includes updates to the database contents and bug fixes. See the release notes below. 

The PROJ-data release adds transformation models for the Danish vertical CRS?s DKLAT and DKMSL as well
as the Greenlandic GLLMSL.

Please test the release candidates and report any issues you may find. Either here on the mailing list or on GitHub.

/Kristian

????????????????????????? 

# PROJ Release Notes

## 9.4.1

### Updates

* Database: update to EPSG v11.006 (#4086)

* Database: update ESRI dataset to ArcGIS Pro 3.3 (#4143)

### Bug fixes

* DatabaseContext::lookForGridInfo(): do not trigger network activity in
PROJ_GRID_AVAILABILITY_KNOWN_AVAILABLE mode when all grids are known (#4090)

* Retry "Connection reset by peer" (#4107)

* Use unique names for NKG transformations (#4111)

* proj_create()/proj_create_from_database(): recall CRS AUTH:CODE in error message (#4114)

* DerivedProjectedCRS: deal with lack of explicit CS in BASEPROJCRS in WKT (#4139)

* proj_symbol_rename.h: update with current symbols (#4145)

* Improve detection of compatible/incompatible celestial bodies (#4150)

From even.rouault at spatialys.com  Mon May 27 14:29:05 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 27 May 2024 23:29:05 +0200
Subject: [PROJ] PROJ 9.4.1RC1 & PROJ-data 1.18RC1
In-Reply-To: <8E40CCCD-B630-4159-AC17-FA732C3B3B83@gmail.com>
References: <8E40CCCD-B630-4159-AC17-FA732C3B3B83@gmail.com>
Message-ID: <2094c775-16e8-4a09-8998-c7755ee06878@spatialys.com>

Hi,

We still have the same issues with the proj-data archive containing 
MacOS dot-starting files. I've taken the liberty to generate a RC2 of it 
by removing them with the following procedure run on the server:

 ?mkdir tmp
 ?cd tmp
 ?tar xvzf ../proj-data-1.18RC1.tar.gz
 ?rm ._*
 ?tar cvzf ../proj-data-1.18RC2.tar.gz *

So:

https://download.osgeo.org/proj/proj-data-1.18RC2.tar.gz
https://download.osgeo.org/proj/proj-data-1.18RC2.zip

Otherwise, I was surprised to see that we only shipped EPSG 11.006 and 
not 11.008 as in master, but I then found out that the backports of 
https://github.com/OSGeo/PROJ/pull/4093 (11.007 update) and 
https://github.com/OSGeo/PROJ/pull/4132 (11.008 updates) had failed, but 
we didn't notice. The issue is that the message posted by the bot is 
posted with the credentials of the PR?author, so the PR author doesn't 
receive it, and doesn't realize that the automated backport has failed. 
There must be something with the way with the bot is configured (I see 
that in QGIS the message is posted by another account, so the PR author 
receives an email). Anyway, I don't think there was anything particular 
life critical in those updates, so they can probably wait for 9.5 . 
https://github.com/OSGeo/PROJ/pull/4098 also didn't make it, but also 
not business critical

Even

Le 27/05/2024 ? 21:42, Kristian Evers via PROJ a ?crit?:
> All,
>
> It?s time for another round of releases, so in preparation for the final packages I have uploaded
> release candidates for PROJ and PROJ-data. Download the archives here:
>
> https://download.osgeo.org/proj/proj-9.4.1RC1.tar.gz
> https://download.osgeo.org/proj/proj-9.4.1RC1.zip
>
> https://download.osgeo.org/proj/proj-data-1.18RC1.tar.gz
> https://download.osgeo.org/proj/proj-data-1.18RC1.zip
>
> The PROJ release includes updates to the database contents and bug fixes. See the release notes below.
>
> The PROJ-data release adds transformation models for the Danish vertical CRS?s DKLAT and DKMSL as well
> as the Greenlandic GLLMSL.
>
> Please test the release candidates and report any issues you may find. Either here on the mailing list or on GitHub.
>
> /Kristian
>
> ?????????????????????????
>
> # PROJ Release Notes
>
> ## 9.4.1
>
> ### Updates
>
> * Database: update to EPSG v11.006 (#4086)
>
> * Database: update ESRI dataset to ArcGIS Pro 3.3 (#4143)
>
> ### Bug fixes
>
> * DatabaseContext::lookForGridInfo(): do not trigger network activity in
> PROJ_GRID_AVAILABILITY_KNOWN_AVAILABLE mode when all grids are known (#4090)
>
> * Retry "Connection reset by peer" (#4107)
>
> * Use unique names for NKG transformations (#4111)
>
> * proj_create()/proj_create_from_database(): recall CRS AUTH:CODE in error message (#4114)
>
> * DerivedProjectedCRS: deal with lack of explicit CS in BASEPROJCRS in WKT (#4139)
>
> * proj_symbol_rename.h: update with current symbols (#4145)
>
> * Improve detection of compatible/incompatible celestial bodies (#4150)
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From strebe at aol.com  Mon May 27 15:00:25 2024
From: strebe at aol.com (strebe at aol.com)
Date: Mon, 27 May 2024 22:00:25 +0000 (UTC)
Subject: [PROJ] Sndyer Map Projections Manual in HTML form
In-Reply-To: <002c01da82f4$12b2cdb0$38186910$@neacsu.net>
References: <002c01da82f4$12b2cdb0$38186910$@neacsu.net>
Message-ID: <1378755727.4842739.1716847225322@mail.yahoo.com>

 Hello Mircea.
This is an impressive work that does much honor John Snyder?s legacy. Thank you for what must have been a huge effort. I will be making use of it as needed.
Regards,? Daniel ?daan? Strebe

    On Saturday, March 30, 2024 at 04:01:23 PM PDT, Mircea Neacsu via PROJ <proj at lists.osgeo.org> wrote:   

 
Hello,

 ?

My work of converting Snyder ? Map Projection Manual to HTML is almost finished. Probably the most interesting part are the numerical examples, implemented using JavaScript. All formulas can be recalculated, and one can see all the intermediate steps and the result of those calculations. 

 ?

I would very much like to hear your comments. Given the number of formulas, I?m sure there are many errors that have slipped through, and I will be grateful if you will point those out.

 ?

Thank you,

-- 

 ?

Mircea Neacsu

 ?
_______________________________________________
PROJ mailing list
PROJ at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/proj
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240527/2d92f02b/attachment.htm>

From gdt at lexort.com  Mon May 27 16:36:41 2024
From: gdt at lexort.com (Greg Troxel)
Date: Mon, 27 May 2024 19:36:41 -0400
Subject: [PROJ] PROJ 9.4.1RC1 & PROJ-data 1.18RC1
In-Reply-To: <8E40CCCD-B630-4159-AC17-FA732C3B3B83@gmail.com> (Kristian Evers
 via PROJ's message of "Mon, 27 May 2024 21:42:42 +0200")
References: <8E40CCCD-B630-4159-AC17-FA732C3B3B83@gmail.com>
Message-ID: <rmicyp6omie.fsf@s1.lexort.com>

I tried to build 9.4.1RC1 under pkgsrc.   This is my first time building
9.x; pkgsrc is at 8.2.1 (the last version with autotools).

I flipped the build config from GNU_CONFIGURE to cmake, and it's mostly
ok.  After a bunch of output that looks ok I come to:

  -- found nlohmann/json version 3.11.2
  -- nlohmann/json: external
  -- Found SQLite3: /usr/pkg/include (found version "3.46.0")
  -- Found TIFF: /usr/pkg/lib/libtiff.so (found version "4.6.0")
  -- Found CURL: /usr/pkg/lib/libcurl.so (found version "8.8.0")
  -- Performing Test CMAKE_HAVE_LIBC_PTHREAD
  -- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Failed
  -- Looking for pthread_create in pthreads
  -- Looking for pthread_create in pthreads - not found
  -- Looking for pthread_create in pthread
  -- Looking for pthread_create in pthread - found
  -- Found Threads: TRUE
  -- Configuring proj library:
  -- ENABLE_IPO                     = OFF
  -- PROJ_CORE_TARGET_OUTPUT_NAME   = proj
  -- BUILD_SHARED_LIBS              = ON
  -- PROJ_LIBRARIES                 = proj
  -- Could NOT find GTest (missing: GTEST_LIBRARY GTEST_INCLUDE_DIR GTEST_MAIN_LIBRARY) (Required is at least version "1.8.1")
  -- Fetching GTest
  -- PROJ: Configured 'dist' target
  -- Configuring done (1.8s)
  CMake Error at test/unit/CMakeLists.txt:84 (target_link_libraries):
    Target "proj_errno_string_test" links to:

      GTest::gtest

Looking at
  https://proj.org/en/9.4/install.html

I see

  Build requirements?
      - C99 compiler
      - C++11 compiler
      - CMake >= 3.16
      - SQLite3 >= 3.11: headers and library for target architecture, and sqlite3 executable for build architecture.
      - libtiff >= 4.0 (optional but recommended)
      - curl >= 7.29.0 (optional but recommended)

and 1) I've provided all that and 2) the cmake log shows they are found,
more or less.

So:

  - proj seems wrong to error out without GTest, given the install docs.

  - it's a bug to try to use the network at build time.  I'm not sure
    what "Fetching GTest" is but it looks like that's what's happening.
    pkgsrc arranges for proxy variables to prevent this from working.

  - it doesn't make sense to printing out that GTest was not found
    (which is fine if optional) and then try to use it.

  - even if the docs are wrong, it should be specified as a test
    dependency, not a regular build dependency.  Packaging systems are
    careful to minimize dependencies

  - not really related, but it found nlohmann-json which was not
    documented as a dependency.   In pkgsrc, as I would expect in every
    other system (unless they *only* build in chroot) to need, for each
    possible dependency, to either provide it or to configure it off
    

From mwtoews at gmail.com  Mon May 27 18:08:18 2024
From: mwtoews at gmail.com (Mike Taves)
Date: Tue, 28 May 2024 13:08:18 +1200
Subject: [PROJ] PROJ 9.4.1RC1 & PROJ-data 1.18RC1
In-Reply-To: <rmicyp6omie.fsf@s1.lexort.com>
References: <8E40CCCD-B630-4159-AC17-FA732C3B3B83@gmail.com>
 <rmicyp6omie.fsf@s1.lexort.com>
Message-ID: <CAM2FmMoEAdS5xfyHfPLgtx-ugHk++5MH4UM88W1FXR2ytii70A@mail.gmail.com>

Thanks for testing and reporting clear feedback. I've added a few
comments inline:

On Tue, 28 May 2024 at 11:36, Greg Troxel via PROJ <proj at lists.osgeo.org> wrote:
>   -- Could NOT find GTest (missing: GTEST_LIBRARY GTEST_INCLUDE_DIR GTEST_MAIN_LIBRARY) (Required is at least version "1.8.1")
>   -- Fetching GTest
>   -- PROJ: Configured 'dist' target

There is an error after "Fetching GTest" which is not shown. For the
record, the relevant changes are from:
https://github.com/OSGeo/PROJ/pull/4006

I'm not able to replicate this with various Docker images (it's not
easy to switch off the network). What version of cmake is this with?

>   - proj seems wrong to error out without GTest, given the install docs.

The behaviour should disable tests if the minimum GTest is not
available, showing non-fatal error messages. It should allow it to be
built, without test capabilities.

>   - it's a bug to try to use the network at build time.  I'm not sure
>     what "Fetching GTest" is but it looks like that's what's happening.
>     pkgsrc arranges for proxy variables to prevent this from working.

Is there a general consensus if "tests should not use the network at
build time" is a bug or not? There is a related and undocumented
"RUN_NETWORK_DEPENDENT_TESTS" configuration:
https://github.com/OSGeo/PROJ/blob/3b7a6a9b2e5ca9441cd589f552d64a9ec196678f/test/CMakeLists.txt#L3

Should there be a CMake variable to control if a network should be
available or not?

>   - it doesn't make sense to printing out that GTest was not found
>     (which is fine if optional) and then try to use it.

Agree, but I'll need to sort-out how to replicate this behaviour.

>   - even if the docs are wrong, it should be specified as a test
>     dependency, not a regular build dependency.  Packaging systems are
>     careful to minimize dependencies
>
>   - not really related, but it found nlohmann-json which was not
>     documented as a dependency.   In pkgsrc, as I would expect in every
>     other system (unless they *only* build in chroot) to need, for each
>     possible dependency, to either provide it or to configure it off

Also good suggestions. The docs should be expanded to list the test
dependencies (after the build dependencies). I can sort-out these doc
enhancements.

Are you able to re-test with googletest installed?
https://pkgsrc.se/devel/googletest

From mircea at neacsu.net  Mon May 27 18:18:13 2024
From: mircea at neacsu.net (Mircea Neacsu)
Date: Mon, 27 May 2024 21:18:13 -0400
Subject: [PROJ] Sndyer Map Projections Manual in HTML form
In-Reply-To: <1378755727.4842739.1716847225322@mail.yahoo.com>
References: <002c01da82f4$12b2cdb0$38186910$@neacsu.net>
 <1378755727.4842739.1716847225322@mail.yahoo.com>
Message-ID: <18fbcc6c3bb.11c4dd029190037.8765595816154120465@neacsu.net>

Hello Daan,



Thank you for your kind words. If you encounter any errors or other problems, please let me know.



Cheers,



-- 



Mircea Neacsu  








---- On Mon, 27 May 2024 18:00:25 -0400  <strebe at aol.com> wrote ---





Hello Mircea.



This is an impressive work that does much honor John Snyder?s legacy. Thank you for what must have been a huge effort. I will be making use of it as needed.



Regards,

? Daniel ?daan? Strebe






On Saturday, March 30, 2024 at 04:01:23 PM PDT, Mircea Neacsu via PROJ <mailto:proj at lists.osgeo.org> wrote:






Hello,

?

My work of converting https://neacsu.net/docs/geodesy/snyder/ to HTML is almost finished. Probably the most interesting part are the https://neacsu.net/docs/geodesy/snyder/numerics/, implemented using JavaScript. All formulas can be recalculated, and one can see all the intermediate steps and the result of those calculations.

?

I would very much like to hear your comments. Given the number of formulas, I?m sure there are many errors that have slipped through, and I will be grateful if you will point those out.

?

Thank you,

--

?

Mircea Neacsu

?




_______________________________________________
PROJ mailing list
mailto:PROJ at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240527/0b4d4dc6/attachment.htm>

From gdt at lexort.com  Mon May 27 18:51:36 2024
From: gdt at lexort.com (Greg Troxel)
Date: Mon, 27 May 2024 21:51:36 -0400
Subject: [PROJ] PROJ 9.4.1RC1 & PROJ-data 1.18RC1
In-Reply-To: <CAM2FmMoEAdS5xfyHfPLgtx-ugHk++5MH4UM88W1FXR2ytii70A@mail.gmail.com>
 (Mike Taves's message of "Tue, 28 May 2024 13:08:18 +1200")
References: <8E40CCCD-B630-4159-AC17-FA732C3B3B83@gmail.com>
 <rmicyp6omie.fsf@s1.lexort.com>
 <CAM2FmMoEAdS5xfyHfPLgtx-ugHk++5MH4UM88W1FXR2ytii70A@mail.gmail.com>
Message-ID: <rmiv82yn1p3.fsf@s1.lexort.com>

Mike Taves <mwtoews at gmail.com> writes:

> Thanks for testing and reporting clear feedback. I've added a few
> comments inline:
>
> On Tue, 28 May 2024 at 11:36, Greg Troxel via PROJ <proj at lists.osgeo.org> wrote:
>>   -- Could NOT find GTest (missing: GTEST_LIBRARY GTEST_INCLUDE_DIR GTEST_MAIN_LIBRARY) (Required is at least version "1.8.1")
>>   -- Fetching GTest
>>   -- PROJ: Configured 'dist' target
>
> There is an error after "Fetching GTest" which is not shown. For the
> record, the relevant changes are from:
> https://github.com/OSGeo/PROJ/pull/4006
>
> I'm not able to replicate this with various Docker images (it's not
> easy to switch off the network). What version of cmake is this with?

wow, that's interesting that it isn't easy to turn off the network.
That is very surprising to me (not a docker user) as it seems many
people want to isolate things for security purposes.

3.29.3

But pkgsrc has proxy variables intended to make wget/curl/etc. fail
during the build phase.  However we are not doing anything that I know
of to hide errors.  I am having trouble reading the code tonight, and
it's also possible that it isn't that, but rather curl not being in the
path because it was not declared as a build tool.  (We try hard to hide
everything that is not a declared dependency, as part of getting
repeatable builds.)

Not really a big deal and not the problem, but dependencies need to be
specified as being available for the target (to include/link against)
and for the host (to be used in the build) so that cross building works.

>>   - proj seems wrong to error out without GTest, given the install docs.
>
> The behaviour should disable tests if the minimum GTest is not
> available, showing non-fatal error messages. It should allow it to be
> built, without test capabilities.

Hmm, well that is not what happened to me.  Makes sense that it is the
plan.  I'll dig in.

>>   - it's a bug to try to use the network at build time.  I'm not sure
>>     what "Fetching GTest" is but it looks like that's what's happening.
>>     pkgsrc arranges for proxy variables to prevent this from working.
>
> Is there a general consensus if "tests should not use the network at
> build time" is a bug or not? There is a related and undocumented
> "RUN_NETWORK_DEPENDENT_TESTS" configuration:
> https://github.com/OSGeo/PROJ/blob/3b7a6a9b2e5ca9441cd589f552d64a9ec196678f/test/CMakeLists.txt#L3

This all really depends on whether a person
  - thinks software should work without the network, unless it is trying
    to use it
  - cares about repeatability across environments
  - cares about security
vs
  - wanting things to "work" anyway for people that have systems set
    up wrong, who lack the skills to install dependencies, or who are
    using platforms where it's super hard


My biases come from packaging, from a professional focus on security,
and having worked on a group of networked computers that were
disconnected from the internet for security reasons, where distribution
tarballs were brought in on CD.  People with these sorts of environments
tend not to say much about them :-)

So from this viewpoint

  it is fine to expect the release tarball to be present

  it is fine to declare that prereqs must be installed

  it is a bug to try to use the network at all during the configure,
  build, or install phases, period.

  for tests, I can understand that there might be some tests that use
  the network, because the program in normal use uses the network.  By
  default, there should be no use of the network, as that violates a
  security expectation that the tests run within the build tree, and
  would fail if there is no network or it is heavily firewalled.  It is
  certainly fine to document that if one has a network where one can do
  X, then one can RUN_NETWORK_DEPENDENT_TESTS=ON and they'll be run.

> Should there be a CMake variable to control if a network should be
> available or not?

I think network tests should be optional and default off, so the
existing variable is fine.

I do not see any reason to use the network at configure, build or
install time.  (To address the elephant, I'm not ncounting "user might
not have prereqs and user would not be able to install them because they
are running windows" as a good reason.)   So no variables about
configure/build/install network use are needed.

>>   - it doesn't make sense to printing out that GTest was not found
>>     (which is fine if optional) and then try to use it.
>
> Agree, but I'll need to sort-out how to replicate this behaviour.

I'm very glad to hear you think it's a bug.  I'll see what I can figure
out.  I hadn't tried to turn up verbosity yet.

>>   - even if the docs are wrong, it should be specified as a test
>>     dependency, not a regular build dependency.  Packaging systems are
>>     careful to minimize dependencies
>>
>>   - not really related, but it found nlohmann-json which was not
>>     documented as a dependency.   In pkgsrc, as I would expect in every
>>     other system (unless they *only* build in chroot) to need, for each
>>     possible dependency, to either provide it or to configure it off
>
> Also good suggestions. The docs should be expanded to list the test
> dependencies (after the build dependencies). I can sort-out these doc
> enhancements.
>
> Are you able to re-test with googletest installed?
> https://pkgsrc.se/devel/googletest

Yes.  It was just adding to the Makefile to depend on it:

  # Dependencies not documented by upstream
  #  reported 20240527
  .include "../../devel/googletest/buildlink3.mk"

and then tests start.

They all failed because the test programs were trying to link with
proj.so.25 but I have 8.2.1 and hence .22 installed.

  Start testing: May 27 21:45 EDT
  ----------------------------------------------------------
  1/61 Testing: geodesic-test
  1/61 Test: geodesic-test
  Command: "/tmp/work/wip/proj/work/proj-9.4.1/cmake-pkgsrc-build/bin/geodtest"
  Directory: /tmp/work/wip/proj/work/proj-9.4.1/cmake-pkgsrc-build/src/tests
  "geodesic-test" start time: May 27 21:45 EDT
  Output:
  ----------------------------------------------------------
  /tmp/work/wip/proj/work/proj-9.4.1/cmake-pkgsrc-build/bin/geodtest: Shared object "libproj.so.25" not found
  <end of output>
  Test time =   0.00 sec
  ----------------------------------------------------------
  Test Failed.
  "geodesic-test" end time: May 27 21:45 EDT
  "geodesic-test" time elapsed: 00:00:00

I know there are perhaps some cmake RPATH issues, where pkgsrc trying to
control the build may be at cross purposes to what a package is trying
to do.  This used to work well with autoconf/libtool.

Do you believe that the tests link against and use the just-built
libraries in the build tree?  I think they should.  If that's generally
the case I'll sort this into a pkgsrc-cmake-support bug for now.


From mwtoews at gmail.com  Mon May 27 19:51:37 2024
From: mwtoews at gmail.com (Mike Taves)
Date: Tue, 28 May 2024 14:51:37 +1200
Subject: [PROJ] PROJ 9.4.1RC1 & PROJ-data 1.18RC1
In-Reply-To: <rmiv82yn1p3.fsf@s1.lexort.com>
References: <8E40CCCD-B630-4159-AC17-FA732C3B3B83@gmail.com>
 <rmicyp6omie.fsf@s1.lexort.com>
 <CAM2FmMoEAdS5xfyHfPLgtx-ugHk++5MH4UM88W1FXR2ytii70A@mail.gmail.com>
 <rmiv82yn1p3.fsf@s1.lexort.com>
Message-ID: <CAM2FmMoBJ1mv60aYJCqxok9M7=eBpr0=tdT6Zqw0=hyaCVshig@mail.gmail.com>

Some quick follow-ups to a few points of discussion ...

On Tue, 28 May 2024 at 13:51, Greg Troxel <gdt at lexort.com> wrote:
> > The behaviour should disable tests if the minimum GTest is not
> > available, showing non-fatal error messages. It should allow it to be
> > built, without test capabilities.
>
> Hmm, well that is not what happened to me.  Makes sense that it is the
> plan.  I'll dig in.

This isn't the current behavior, I'm just stating the ideal outcome.
I'll need to replicate the scenario then create a fix to make the
ideal behavior.

> > Is there a general consensus if "tests should not use the network at
> > build time" is a bug or not?
>  ... <snip>
>   it is a bug to try to use the network at all during the configure,
>   build, or install phases, period.
> ... <snip>

Thanks for providing a packagers perspective! The reliance on network
availability for fulfilling GTest requirements isn't new and I didn't
originally add it. As mentioned previously, this can be avoided by
providing a soon-to-be-documented "googletest" test requirement.

As for generally changing network dependency at configure/build/test
time, I'm fine with these suggestions to turn them off by default.
Unmet build dependencies could show a CMake error and suggestion how
to enable them. However, these changes may need further consensus (I'm
a contributor, not part of PSC) and will probably need to wait for the
next major release.

> > Are you able to re-test with googletest installed?
>
> Yes.  It was just adding to the Makefile to depend on it:

Progress.

> I know there are perhaps some cmake RPATH issues, where pkgsrc trying to
> control the build may be at cross purposes to what a package is trying
> to do.  This used to work well with autoconf/libtool.
>
> Do you believe that the tests link against and use the just-built
> libraries in the build tree?  I think they should.  If that's generally
> the case I'll sort this into a pkgsrc-cmake-support bug for now.

RPATH stuff confuses everyone, myself included. CMake does a few
tricks with this respect. I believe the RUNPATH is kept consistent
with the local build tree (for testing) and then changed to the
install target:
https://github.com/OSGeo/PROJ/blob/3b7a6a9b2e5ca9441cd589f552d64a9ec196678f/src/apps/CMakeLists.txt#L36

So it's a bit of a surprise that a different libproj somehow slips
into the test. If possible, see the RUNPATH from readelf -d bin/proj
It should be an absolute path to the lib dir in the build tree, and
not just "libproj.so.x.y" from LD_LIBRARY_PATH.

From jgpallero at gmail.com  Tue May 28 00:06:15 2024
From: jgpallero at gmail.com (=?UTF-8?Q?Jos=C3=A9_Luis_Garc=C3=ADa_Pallero?=)
Date: Tue, 28 May 2024 09:06:15 +0200
Subject: [PROJ] Sndyer Map Projections Manual in HTML form
In-Reply-To: <18fbcc6c3bb.11c4dd029190037.8765595816154120465@neacsu.net>
References: <002c01da82f4$12b2cdb0$38186910$@neacsu.net>
 <1378755727.4842739.1716847225322@mail.yahoo.com>
 <18fbcc6c3bb.11c4dd029190037.8765595816154120465@neacsu.net>
Message-ID: <CAFemY3YfM3GXEF0ERKb-jOWDPyACu5z9yzpfMEMFLncwVBr+Bg@mail.gmail.com>

Thank tou very much for this amazing work. I think the link must be added
to the proj.org References section

El martes, 28 de mayo de 2024, Mircea Neacsu via PROJ <proj at lists.osgeo.org>
escribi?:

> Hello Daan,
>
> Thank you for your kind words. If you encounter any errors or other
> problems, please let me know.
>
> Cheers,
>
> --
>
> Mircea Neacsu
>
>
>
> ---- On Mon, 27 May 2024 18:00:25 -0400 * <strebe at aol.com
> <strebe at aol.com>>* wrote ---
>
>
> Hello Mircea.
>
> This is an impressive work that does much honor John Snyder?s legacy.
> Thank you for what must have been a huge effort. I will be making use of it
> as needed.
>
> Regards,
> ? Daniel ?daan? Strebe
>
>
> On Saturday, March 30, 2024 at 04:01:23 PM PDT, Mircea Neacsu via PROJ <
> proj at lists.osgeo.org> wrote:
>
>
> Hello,
>
>
>
> My work of converting Snyder ? Map Projection Manual
> <https://neacsu.net/docs/geodesy/snyder/> to HTML is almost finished.
> Probably the most interesting part are the numerical examples
> <https://neacsu.net/docs/geodesy/snyder/numerics/>, implemented using
> JavaScript. All formulas can be recalculated, and one can see all the
> intermediate steps and the result of those calculations.
>
>
>
> I would very much like to hear your comments. Given the number of
> formulas, I?m sure there are many errors that have slipped through, and I
> will be grateful if you will point those out.
>
>
>
> Thank you,
>
> --
>
>
>
> Mircea Neacsu
>
>
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
>
>
>

-- 
*****************************************
Jos? Luis Garc?a Pallero
jgpallero at gmail.com
(o<
/ / \
V_/_
Use Debian GNU/Linux and enjoy!
*****************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240528/ca53ccc9/attachment-0001.htm>

From kreve at sdfi.dk  Tue May 28 01:09:54 2024
From: kreve at sdfi.dk (Kristian Evers)
Date: Tue, 28 May 2024 08:09:54 +0000
Subject: [PROJ] PROJ 9.4.1RC1 & PROJ-data 1.18RC1
In-Reply-To: <2094c775-16e8-4a09-8998-c7755ee06878@spatialys.com>
References: <8E40CCCD-B630-4159-AC17-FA732C3B3B83@gmail.com>
 <2094c775-16e8-4a09-8998-c7755ee06878@spatialys.com>
Message-ID: <b0089f22fdad4b169aefdd08d76c2a7d@sdfi.dk>

Thanks for taking care of that, Even. I think I'll have to conclude that my mac is not
reliable for this use case. I'll look into generating the PROJ-data tarballs using GitHub
Actions, as that should provide a clean environment that doesn't include those
._-files. I've created https://github.com/OSGeo/PROJ-data/issues/122 as a reminder
and will look into it in the coming weeks.

As for the issues Greg have pointed out, it seems there's a few aspects we haven't thought
about when making the switch to CMake. It think it is unrealistic to get that sorted for 9.4.1
but please continue exploring the issues and their solutions so we can get that handled 
for 9.5.0. 

Best regards,
Kristian



-----Original Message-----
From: PROJ <proj-bounces at lists.osgeo.org> On Behalf Of Even Rouault via PROJ
Sent: 27. maj 2024 23:29
To: Kristian Evers <kristianevers at gmail.com>; PROJ <proj at lists.osgeo.org>
Subject: Re: [PROJ] PROJ 9.4.1RC1 & PROJ-data 1.18RC1

Hi,

We still have the same issues with the proj-data archive containing 
MacOS dot-starting files. I've taken the liberty to generate a RC2 of it 
by removing them with the following procedure run on the server:

 ?mkdir tmp
 ?cd tmp
 ?tar xvzf ../proj-data-1.18RC1.tar.gz
 ?rm ._*
 ?tar cvzf ../proj-data-1.18RC2.tar.gz *

So:

https://download.osgeo.org/proj/proj-data-1.18RC2.tar.gz
https://download.osgeo.org/proj/proj-data-1.18RC2.zip

Otherwise, I was surprised to see that we only shipped EPSG 11.006 and 
not 11.008 as in master, but I then found out that the backports of 
https://github.com/OSGeo/PROJ/pull/4093 (11.007 update) and 
https://github.com/OSGeo/PROJ/pull/4132 (11.008 updates) had failed, but 
we didn't notice. The issue is that the message posted by the bot is 
posted with the credentials of the PR?author, so the PR author doesn't 
receive it, and doesn't realize that the automated backport has failed. 
There must be something with the way with the bot is configured (I see 
that in QGIS the message is posted by another account, so the PR author 
receives an email). Anyway, I don't think there was anything particular 
life critical in those updates, so they can probably wait for 9.5 . 
https://github.com/OSGeo/PROJ/pull/4098 also didn't make it, but also 
not business critical

Even

Le 27/05/2024 ? 21:42, Kristian Evers via PROJ a ?crit?:
> All,
>
> It?s time for another round of releases, so in preparation for the final packages I have uploaded
> release candidates for PROJ and PROJ-data. Download the archives here:
>
> https://download.osgeo.org/proj/proj-9.4.1RC1.tar.gz
> https://download.osgeo.org/proj/proj-9.4.1RC1.zip
>
> https://download.osgeo.org/proj/proj-data-1.18RC1.tar.gz
> https://download.osgeo.org/proj/proj-data-1.18RC1.zip
>
> The PROJ release includes updates to the database contents and bug fixes. See the release notes below.
>
> The PROJ-data release adds transformation models for the Danish vertical CRS?s DKLAT and DKMSL as well
> as the Greenlandic GLLMSL.
>
> Please test the release candidates and report any issues you may find. Either here on the mailing list or on GitHub.
>
> /Kristian
>
> ?????????????????????????
>
> # PROJ Release Notes
>
> ## 9.4.1
>
> ### Updates
>
> * Database: update to EPSG v11.006 (#4086)
>
> * Database: update ESRI dataset to ArcGIS Pro 3.3 (#4143)
>
> ### Bug fixes
>
> * DatabaseContext::lookForGridInfo(): do not trigger network activity in
> PROJ_GRID_AVAILABILITY_KNOWN_AVAILABLE mode when all grids are known (#4090)
>
> * Retry "Connection reset by peer" (#4107)
>
> * Use unique names for NKG transformations (#4111)
>
> * proj_create()/proj_create_from_database(): recall CRS AUTH:CODE in error message (#4114)
>
> * DerivedProjectedCRS: deal with lack of explicit CS in BASEPROJCRS in WKT (#4139)
>
> * proj_symbol_rename.h: update with current symbols (#4145)
>
> * Improve detection of compatible/incompatible celestial bodies (#4150)
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj

-- 
http://www.spatialys.com
My software is free, but my time generally not.

_______________________________________________
PROJ mailing list
PROJ at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/proj

From gdt at lexort.com  Tue May 28 03:33:51 2024
From: gdt at lexort.com (Greg Troxel)
Date: Tue, 28 May 2024 06:33:51 -0400
Subject: [PROJ] PROJ 9.4.1RC1 & PROJ-data 1.18RC1
In-Reply-To: <b0089f22fdad4b169aefdd08d76c2a7d@sdfi.dk> (Kristian Evers via
 PROJ's message of "Tue, 28 May 2024 08:09:54 +0000")
References: <8E40CCCD-B630-4159-AC17-FA732C3B3B83@gmail.com>
 <2094c775-16e8-4a09-8998-c7755ee06878@spatialys.com>
 <b0089f22fdad4b169aefdd08d76c2a7d@sdfi.dk>
Message-ID: <rmir0dmmdio.fsf@s1.lexort.com>

Kristian Evers via PROJ <proj at lists.osgeo.org> writes:

> As for the issues Greg have pointed out, it seems there's a few aspects we haven't thought
> about when making the switch to CMake. It think it is unrealistic to get that sorted for 9.4.1
> but please continue exploring the issues and their solutions so we can get that handled 
> for 9.5.0. 

Yes, these are regressions from the autotools to cmake conversion, but
they surely aren't regressions from 9.4.0 to 9.4.1RC, so agreed it
doesn't make sense to hold the release.

From mircea at neacsu.net  Tue May 28 03:45:28 2024
From: mircea at neacsu.net (Mircea Neacsu)
Date: Tue, 28 May 2024 06:45:28 -0400
Subject: [PROJ] Sndyer Map Projections Manual in HTML form
In-Reply-To: <CAFemY3YfM3GXEF0ERKb-jOWDPyACu5z9yzpfMEMFLncwVBr+Bg@mail.gmail.com>
References: <002c01da82f4$12b2cdb0$38186910$@neacsu.net>
 <1378755727.4842739.1716847225322@mail.yahoo.com>
 <18fbcc6c3bb.11c4dd029190037.8765595816154120465@neacsu.net>
 <CAFemY3YfM3GXEF0ERKb-jOWDPyACu5z9yzpfMEMFLncwVBr+Bg@mail.gmail.com>
Message-ID: <18fbece157f.f770218f244976.8272009900042580869@neacsu.net>

That would be up to proj.org to decide but I think it needs a bit more validation. Javier Jimenez found a few bugs and surely there may be some more.



Thank you for the encouragement; means a lot to me.



-- 



Mircea Neacsu 




---- On Tue, 28 May 2024 03:06:15 -0400 Jos? Luis Garc?a Pallero <jgpallero at gmail.com> wrote ---



Thank tou very much for this amazing work. I think the link must be added to the http://proj.org References section

El martes, 28 de mayo de 2024, Mircea Neacsu via PROJ <mailto:proj at lists.osgeo.org> escribi?:




-- 
*****************************************
Jos? Luis Garc?a Pallero
mailto:jgpallero at gmail.com
(o<
/ / \
V_/_
Use Debian GNU/Linux and enjoy!
*****************************************

Hello Daan,



Thank you for your kind words. If you encounter any errors or other problems, please let me know.



Cheers,



-- 



Mircea Neacsu 








---- On Mon, 27 May 2024 18:00:25 -0400  <mailto:strebe at aol.com> wrote ---





Hello Mircea.



This is an impressive work that does much honor John Snyder?s legacy. Thank you for what must have been a huge effort. I will be making use of it as needed.



Regards,

? Daniel ?daan? Strebe






On Saturday, March 30, 2024 at 04:01:23 PM PDT, Mircea Neacsu via PROJ <mailto:proj at lists.osgeo.org> wrote:






Hello,

?

My work of converting https://neacsu.net/docs/geodesy/snyder/ to HTML is almost finished. Probably the most interesting part are the https://neacsu.net/docs/geodesy/snyder/numerics/, implemented using JavaScript. All formulas can be recalculated, and one can see all the intermediate steps and the result of those calculations.

?

I would very much like to hear your comments. Given the number of formulas, I?m sure there are many errors that have slipped through, and I will be grateful if you will point those out.

?

Thank you,

--

?

Mircea Neacsu

?




_______________________________________________
PROJ mailing list
mailto:PROJ at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240528/c9210503/attachment.htm>

From roger.oberholtzer at gmail.com  Thu May 30 01:49:51 2024
From: roger.oberholtzer at gmail.com (Roger Oberholtzer)
Date: Thu, 30 May 2024 10:49:51 +0200
Subject: [PROJ] Meridian convergence
In-Reply-To: <78DC98FF-BFC7-47D9-859A-F25191484CED@gmail.com>
References: <CANkOqwNH_MQpq11ncQhDJ7d3HHxO-TxVwQT0GYCT=utj4mVpWA@mail.gmail.com>
 <78DC98FF-BFC7-47D9-859A-F25191484CED@gmail.com>
Message-ID: <CANkOqwO17AX5OpxG-tVkSPefXBQo99d5U6yWHHkmz_Vyr9uHZA@mail.gmail.com>

Hi


I was looking back through this thread and realize that I did indeed
write the wrong thing. Sigh. The context for this discussion was
Sweref99  - EPSG:3006 - not EPSG:4326 as I had mysteriously wrote. But
the reason for the question was to ensure if it was possible for more
than EPSG:3006. Read on.

I see that when we do this calculation, our code says the following:

      // Seems the EPSG code does not work in this context
       // tinfo->Meridian = proj_create(0, "EPSG:3006");

       // This is the proj5 string for SWEREF99: +proj=utm +zone=33
+ellps=GRS80 +units=m +no_defs +type=crs
       //      Shouldn't that work too?

       tinfo->Meridian = proj_create(0, "proj=tmerc lon_0=15
k_0=0.9996 x_0=500000 ellps=GRS80");


Then, when we want to know the convergence for a given point, we do:

       PJ_FACTORS factors;
       PJ_COORD vals;

       vals.lp.lam = DegreesToRadians(point->LONGITUDE);
       vals.lp.phi = DegreesToRadians(point->LATITUDE);

       factors = proj_factors(tinfo->Meridian, vals);

       convergence = RadiansToDegrees(factors.meridian_convergence));

We then subtract that convergence from the heading provided by the
GPS/IMU and use that when rotating the point.

So, given that we define a specific projection for calling
proj_factors, and it seems not to be possible to use the one we are
using to project our points (i.e., EPSG:3006), the original question
arose.


On Mon, Mar 25, 2024 at 10:10?AM Kristian Evers <kristianevers at gmail.com> wrote:
>
> Roger,
>
> I believe using proj_factors() is the fastest way, yes. The current implementation has its roots in the very early days of PROJ.
> If we were to implement the same functionality from scratch today they would likely be split into more smaller functions with
> one purpose each. You could always implement your own custom version of it based on the PROJ code. Start here:
> https://github.com/OSGeo/PROJ/blob/master/src/factors.cpp
>
> I doubt that your code is particularly useful, to be honest. If your are indeed using EPSG:4326 I believe you will get a meridian
> convergence of 0.0 no matter what the input. The reason being that EPSG:4326 is not a projected CRS and hence you haven?t
> got a grid north that can deviate from true north. Also, EPSG:4326 is not SWEREF99 - it is the WGS84 datum ensemble given
> in geodetic coordinates. You are probably looking for one of the SWEREF99 TM CRS?s.
>
> The meridian convergence calculation should work for most, if not any, projected CRS.
>
> /Kristian
>
> On 25 Mar 2024, at 08.44, Roger Oberholtzer via PROJ <proj at lists.osgeo.org> wrote:
>
> I have been using proj_factors() to get the meridian convergence for a given point. It has been working great. We need this when projecting LiDAR points that involve multiple rotations. The code is something like this:
>
>        PJ_FACTORS factors;
>        PJ_COORD vals;
>
>        vals.lp.lam = DegreesToRadians(point->LONGITUDE);
>        vals.lp.phi = DegreesToRadians(point->LATITUDE);
>
>        factors = proj_factors(tinfo->Meridian, vals);
>
>        return(RadiansToDegrees(factors.meridian_convergence));
>
> I have been using it with Sweref99 (EPSG:4326).
>
> I have two questions:
>
> Is proj_factors() the fastest way to get this information? A look at the code shows that it is calculating other things as well. Is there is a faster way? When generating point clouds, each contains 10s of millions of points, and we generated 10s of thousands of these over a summer. Needless to say, we are always looking for speedups.
>
> Would this method work for all 'standard' projections? By 'standard' I mean the typical ones used in, say, European countries. Would we need to consider anything when extending this to something other than EPSG:4326?
>
> --
> Roger Oberholtzer
> _______________________________________________
> PROJ mailing list
> PROJ at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/proj
>
>


-- 
Roger Oberholtzer

From kristianevers at gmail.com  Fri May 31 22:23:36 2024
From: kristianevers at gmail.com (Kristian Evers)
Date: Sat, 1 Jun 2024 07:23:36 +0200
Subject: [PROJ] PROJ 9.4.1RC1 & PROJ-data 1.18RC1
In-Reply-To: <8E40CCCD-B630-4159-AC17-FA732C3B3B83@gmail.com>
References: <8E40CCCD-B630-4159-AC17-FA732C3B3B83@gmail.com>
Message-ID: <CALECs+fPGwzFohwTw45O2MSiaviQjsxLJJ=q4nC_2fKdC3qhJw@mail.gmail.com>

Apart from the issue with the ._-files in the PROJ-data packages no issues
has been reported. I hereby motion that both release candidates be promoted
to final releases. I'll start with my +1.

/Kristian

man. 27. maj 2024 21.42 skrev Kristian Evers <kristianevers at gmail.com>:

> All,
>
> It?s time for another round of releases, so in preparation for the final
> packages I have uploaded
> release candidates for PROJ and PROJ-data. Download the archives here:
>
> https://download.osgeo.org/proj/proj-9.4.1RC1.tar.gz
> https://download.osgeo.org/proj/proj-9.4.1RC1.zip
>
> https://download.osgeo.org/proj/proj-data-1.18RC1.tar.gz
> https://download.osgeo.org/proj/proj-data-1.18RC1.zip
>
> The PROJ release includes updates to the database contents and bug fixes.
> See the release notes below.
>
> The PROJ-data release adds transformation models for the Danish vertical
> CRS?s DKLAT and DKMSL as well
> as the Greenlandic GLLMSL.
>
> Please test the release candidates and report any issues you may find.
> Either here on the mailing list or on GitHub.
>
> /Kristian
>
> ?????????????????????????
>
> # PROJ Release Notes
>
> ## 9.4.1
>
> ### Updates
>
> * Database: update to EPSG v11.006 (#4086)
>
> * Database: update ESRI dataset to ArcGIS Pro 3.3 (#4143)
>
> ### Bug fixes
>
> * DatabaseContext::lookForGridInfo(): do not trigger network activity in
> PROJ_GRID_AVAILABILITY_KNOWN_AVAILABLE mode when all grids are known
> (#4090)
>
> * Retry "Connection reset by peer" (#4107)
>
> * Use unique names for NKG transformations (#4111)
>
> * proj_create()/proj_create_from_database(): recall CRS AUTH:CODE in error
> message (#4114)
>
> * DerivedProjectedCRS: deal with lack of explicit CS in BASEPROJCRS in WKT
> (#4139)
>
> * proj_symbol_rename.h: update with current symbols (#4145)
>
> * Improve detection of compatible/incompatible celestial bodies (#4150)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20240601/23cf978c/attachment.htm>

