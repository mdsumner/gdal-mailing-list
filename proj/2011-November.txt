From spethm at landcareresearch.co.nz  Tue Nov  1 12:23:33 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Wed, 02 Nov 2011 08:23:33 +1300
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <CA+YzLBdrsjnz8-WMCWMZoSyprFDMo4E0s-MRrtkT+Dr7-zDbmg@mail.gmail.com>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>	<4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
	<4E9B78F0.8010708@landcareresearch.co.nz>
	<CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
	<4E9B9059.8010609@landcareresearch.co.nz>
	<CA+YzLBejdyiYNDSoseBiuU8BqHXB1m_z8n5gPzT=H+p9RagoFw@mail.gmail.com>
	<4E9CDDA2.10802@landcareresearch.co.nz>
	<CA+YzLBcb0wEP1azwNWt-8AWzj0cBb35cvumu9yLK57HynVGhZA@mail.gmail.com>
	<4E9F3497.6000604@landcareresearch.co.nz>
	<CA+YzLBdqo55Ve38vGBmuTK+Cw0mb1h_F+-zb_urehp6M0KzOBA@mail.gmail.com>
	<4EAEF4E5.3000803@landcareresearch.co.nz>
	<CA+YzLBe58LB16G=5KfpmaDFhiYBohgn4LKLfb1MdqWpdXTssTQ@mail.gmail.com>
	<4EAF059F.3040008@landcareresearch.co.nz>
	<CA+YzLBdrsjnz8-WMCWMZoSyprFDMo4E0s-MRrtkT+Dr7-zDbmg@mail.gmail.com>
Message-ID: <4EB04735.2010505@landcareresearch.co.nz>

Greetings,
   I've updated the code to use pj_ctx_set_errno.  Thanks!  What is the 
command line flag for displaying the error code/error string?

Thanks

On 01/11/11 09:45, Frank Warmerdam wrote:
> On Mon, Oct 31, 2011 at 1:31 PM, Michael Speth
> <spethm at landcareresearch.co.nz>  wrote:
>> Hi Frank,
>>    There are 4 errors that I want to generate which are only in the inverse
>> projections and not the forward.  However, the E_ERROR directive seems to
>> only work in the ENTRY and SETUP functions (because it returns an int).
>>
>>  From looking at proj.c, the forward or inverse functions are called after
>> the setup code which includes the ENTRY0; I think that I am unable to check
>> in the ENTRY0 directive for the error conditions for inverse projections.
>> Is this correct?
>>
>> So should I use the I_ERROR directive in this case?  If so, it doesn't seem
>> to allow for entering errno values (its defined as -20).  Can I create a new
>> directive similar to E_ERROR(err) but for I_ERROR?
> Michael,
>
> I would actually encourage you to actually explicitly call
> the error code instead of using the opaque I_ERROR
> or a similar macro.  For instance in PJ_tmerc.c I now do:
>
>          /*
>           * Fail if our longitude is more than 90 degrees from the
>           * central meridian since the results are essentially garbage.
>           * Is error -20 really an appropriate return value?
>           *
>           *  http://trac.osgeo.org/proj/ticket/5
>           */
>          if( lp.lam<  -HALFPI || lp.lam>  HALFPI )
>          {
>              xy.x = HUGE_VAL;
>              xy.y = HUGE_VAL;
>              pj_ctx_set_errno( P->ctx, -14 );
>              return xy;
>          }
>
> Best regards,


-- 
Michael Speth
Scientific Programmer
Landcare Research

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111102/ab6acd7a/attachment.html>

From warmerdam at pobox.com  Tue Nov  1 13:22:51 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 1 Nov 2011 13:22:51 -0700
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <4EB04735.2010505@landcareresearch.co.nz>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>
	<4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
	<4E9B78F0.8010708@landcareresearch.co.nz>
	<CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
	<4E9B9059.8010609@landcareresearch.co.nz>
	<CA+YzLBejdyiYNDSoseBiuU8BqHXB1m_z8n5gPzT=H+p9RagoFw@mail.gmail.com>
	<4E9CDDA2.10802@landcareresearch.co.nz>
	<CA+YzLBcb0wEP1azwNWt-8AWzj0cBb35cvumu9yLK57HynVGhZA@mail.gmail.com>
	<4E9F3497.6000604@landcareresearch.co.nz>
	<CA+YzLBdqo55Ve38vGBmuTK+Cw0mb1h_F+-zb_urehp6M0KzOBA@mail.gmail.com>
	<4EAEF4E5.3000803@landcareresearch.co.nz>
	<CA+YzLBe58LB16G=5KfpmaDFhiYBohgn4LKLfb1MdqWpdXTssTQ@mail.gmail.com>
	<4EAF059F.3040008@landcareresearch.co.nz>
	<CA+YzLBdrsjnz8-WMCWMZoSyprFDMo4E0s-MRrtkT+Dr7-zDbmg@mail.gmail.com>
	<4EB04735.2010505@landcareresearch.co.nz>
Message-ID: <CA+YzLBdMq7y0P61ycGHW+2O_9urFEvHMVYOCo=9ZwRcM_AD8mA@mail.gmail.com>

On Tue, Nov 1, 2011 at 12:23 PM, Michael Speth
<spethm at landcareresearch.co.nz> wrote:
> Greetings,
>   I've updated the code to use pj_ctx_set_errno.  Thanks!  What is the
> command line flag for displaying the error code/error string?

Michael,

I'm not exactly sure what you are asking.  But the error messages
in pj_strerrno.c are fetched using pj_strerrno().  I see at least
the cs2cs application uses this when reporting errors.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


From spethm at landcareresearch.co.nz  Tue Nov  1 15:17:05 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Wed, 02 Nov 2011 11:17:05 +1300
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <CA+YzLBdMq7y0P61ycGHW+2O_9urFEvHMVYOCo=9ZwRcM_AD8mA@mail.gmail.com>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>	<4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
	<4E9B78F0.8010708@landcareresearch.co.nz>
	<CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
	<4E9B9059.8010609@landcareresearch.co.nz>
	<CA+YzLBejdyiYNDSoseBiuU8BqHXB1m_z8n5gPzT=H+p9RagoFw@mail.gmail.com>
	<4E9CDDA2.10802@landcareresearch.co.nz>
	<CA+YzLBcb0wEP1azwNWt-8AWzj0cBb35cvumu9yLK57HynVGhZA@mail.gmail.com>
	<4E9F3497.6000604@landcareresearch.co.nz>
	<CA+YzLBdqo55Ve38vGBmuTK+Cw0mb1h_F+-zb_urehp6M0KzOBA@mail.gmail.com>
	<4EAEF4E5.3000803@landcareresearch.co.nz>
	<CA+YzLBe58LB16G=5KfpmaDFhiYBohgn4LKLfb1MdqWpdXTssTQ@mail.gmail.com>
	<4EAF059F.3040008@landcareresearch.co.nz>
	<CA+YzLBdrsjnz8-WMCWMZoSyprFDMo4E0s-MRrtkT+Dr7-zDbmg@mail.gmail.com>
	<4EB04735.2010505@landcareresearch.co.nz>
	<CA+YzLBdMq7y0P61ycGHW+2O_9urFEvHMVYOCo=9ZwRcM_AD8mA@mail.gmail.com>
Message-ID: <4EB06FE1.1000406@landcareresearch.co.nz>

Hello,
    An example best explains my question.

Command line
proj +proj=healpix -f '%.'$PERCISION'f' -I +lon_0=$1 +a=$2 +R_A 
+ellps=WGS84 -E <<EOF
$3 $4
EOF

Output
==== HEALPix Spheriod Inverse Test ====
[8] 0 0    0.0000    0.0000
[9] 0 0    45.0000    0.0000
[10] 0 0    -45.0000    0.0000
[11] 2 -2    *    *
[12] 2 -2    *    *
[13] 1 2    *    *
[14] 2 1    *    *

So in the output, notice that the last 4 test result in an error (noted 
by the *).  The output I am looking for is "invalid x or y" for the last 
4 test results.  Does this make sense?

Thanks


On 02/11/11 09:22, Frank Warmerdam wrote:
> On Tue, Nov 1, 2011 at 12:23 PM, Michael Speth
> <spethm at landcareresearch.co.nz>  wrote:
>> Greetings,
>>    I've updated the code to use pj_ctx_set_errno.  Thanks!  What is the
>> command line flag for displaying the error code/error string?
> Michael,
>
> I'm not exactly sure what you are asking.  But the error messages
> in pj_strerrno.c are fetched using pj_strerrno().  I see at least
> the cs2cs application uses this when reporting errors.
>
> Best regards,


-- 
Michael Speth
Scientific Programmer
Landcare Research

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111102/192acd4c/attachment.html>

From warmerdam at pobox.com  Tue Nov  1 17:13:56 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 1 Nov 2011 17:13:56 -0700
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <4EB06FE1.1000406@landcareresearch.co.nz>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E97BE0E.8070601@pobox.com>
	<4E9B5A4D.5010501@landcareresearch.co.nz>
	<CA+YzLBf9tL4FxRFJUTXGg1r_ebus7QObLVRbwYF1PmbRq7s-Sg@mail.gmail.com>
	<4E9B78F0.8010708@landcareresearch.co.nz>
	<CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
	<4E9B9059.8010609@landcareresearch.co.nz>
	<CA+YzLBejdyiYNDSoseBiuU8BqHXB1m_z8n5gPzT=H+p9RagoFw@mail.gmail.com>
	<4E9CDDA2.10802@landcareresearch.co.nz>
	<CA+YzLBcb0wEP1azwNWt-8AWzj0cBb35cvumu9yLK57HynVGhZA@mail.gmail.com>
	<4E9F3497.6000604@landcareresearch.co.nz>
	<CA+YzLBdqo55Ve38vGBmuTK+Cw0mb1h_F+-zb_urehp6M0KzOBA@mail.gmail.com>
	<4EAEF4E5.3000803@landcareresearch.co.nz>
	<CA+YzLBe58LB16G=5KfpmaDFhiYBohgn4LKLfb1MdqWpdXTssTQ@mail.gmail.com>
	<4EAF059F.3040008@landcareresearch.co.nz>
	<CA+YzLBdrsjnz8-WMCWMZoSyprFDMo4E0s-MRrtkT+Dr7-zDbmg@mail.gmail.com>
	<4EB04735.2010505@landcareresearch.co.nz>
	<CA+YzLBdMq7y0P61ycGHW+2O_9urFEvHMVYOCo=9ZwRcM_AD8mA@mail.gmail.com>
	<4EB06FE1.1000406@landcareresearch.co.nz>
Message-ID: <CA+YzLBeq2V7aDrxEvAKQoMspM8pTC1yM=WXOA97KnQwjWMbtDQ@mail.gmail.com>

On Tue, Nov 1, 2011 at 3:17 PM, Michael Speth
<spethm at landcareresearch.co.nz> wrote:
> Hello,
>    An example best explains my question.
>
> Command line
> proj +proj=healpix -f '%.'$PERCISION'f' -I +lon_0=$1 +a=$2 +R_A +ellps=WGS84
> -E <<EOF
> $3 $4
> EOF
>
> Output
> ==== HEALPix Spheriod Inverse Test ====
> [8] 0 0    0.0000    0.0000
> [9] 0 0    45.0000    0.0000
> [10] 0 0    -45.0000    0.0000
> [11] 2 -2    *    *
> [12] 2 -2    *    *
> [13] 1 2    *    *
> [14] 2 1    *    *
>
> So in the output, notice that the last 4 test result in an error (noted by
> the *).  The output I am looking for is "invalid x or y" for the last 4 test
> results.  Does this make sense?

Michael,

It does not seem to have been typical in the past to issue
errors during point transformation - instead HUGE_VAL was
returned and that was it.  So the "proj" command has no code
to report errors other than by printing "*" after a point transformation.
cs2cs on the other hand does - partly motifivated by my issuing of
errors from the datum shifting code that comes into play in cs2cs
and not in proj.  I would suggest you try with cs2cs.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


From spethm at landcareresearch.co.nz  Thu Nov  3 12:21:47 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Fri, 04 Nov 2011 08:21:47 +1300
Subject: [Proj] rHEALPix new parameters
In-Reply-To: <CA+YzLBeq2V7aDrxEvAKQoMspM8pTC1yM=WXOA97KnQwjWMbtDQ@mail.gmail.com>
References: <4E978ECF.9010000@landcareresearch.co.nz>
	<4E9B78F0.8010708@landcareresearch.co.nz>
	<CA+YzLBevYgZaFbZFgChmC2XcnyP32ivm2=jON+z8JCcwf_vQkQ@mail.gmail.com>
	<4E9B9059.8010609@landcareresearch.co.nz>
	<CA+YzLBejdyiYNDSoseBiuU8BqHXB1m_z8n5gPzT=H+p9RagoFw@mail.gmail.com>
	<4E9CDDA2.10802@landcareresearch.co.nz>
	<CA+YzLBcb0wEP1azwNWt-8AWzj0cBb35cvumu9yLK57HynVGhZA@mail.gmail.com>
	<4E9F3497.6000604@landcareresearch.co.nz>
	<CA+YzLBdqo55Ve38vGBmuTK+Cw0mb1h_F+-zb_urehp6M0KzOBA@mail.gmail.com>
	<4EAEF4E5.3000803@landcareresearch.co.nz>
	<CA+YzLBe58LB16G=5KfpmaDFhiYBohgn4LKLfb1MdqWpdXTssTQ@mail.gmail.com>
	<4EAF059F.3040008@landcareresearch.co.nz>
	<CA+YzLBdrsjnz8-WMCWMZoSyprFDMo4E0s-MRrtkT+Dr7-zDbmg@mail.gmail.com>
	<4EB04735.2010505@landcareresearch.co.nz>
	<CA+YzLBdMq7y0P61ycGHW+2O_9urFEvHMVYOCo=9ZwRcM_AD8mA@mail.gmail.com>
	<4EB06FE1.1000406@landcareresearch.co.nz>
	<CA+YzLBeq2V7aDrxEvAKQoMspM8pTC1yM=WXOA97KnQwjWMbtDQ@mail.gmail.com>
Message-ID: <4EB2E9CB.1070608@landcareresearch.co.nz>

Hello Frank,
   I am in the process of switching my test scripts to use the cs2cs 
instead of proj.  I am having trouble running the inverse tests.

This command works for proj and produces the inverse projection of HEALPix.
proj +proj=healpix -f '%.'$PERCISION'f' -I +lon_0=$1 +a=$2 +R_A 
+ellps=WGS84 -E <<EOF
$3 $4
EOF

Can you help me convert this to cs2cs?

Thanks

On 02/11/11 13:13, Frank Warmerdam wrote:
> On Tue, Nov 1, 2011 at 3:17 PM, Michael Speth
> <spethm at landcareresearch.co.nz>  wrote:
>> Hello,
>>     An example best explains my question.
>>
>> Command line
>> proj +proj=healpix -f '%.'$PERCISION'f' -I +lon_0=$1 +a=$2 +R_A +ellps=WGS84
>> -E<<EOF
>> $3 $4
>> EOF
>>
>> Output
>> ==== HEALPix Spheriod Inverse Test ====
>> [8] 0 0    0.0000    0.0000
>> [9] 0 0    45.0000    0.0000
>> [10] 0 0    -45.0000    0.0000
>> [11] 2 -2    *    *
>> [12] 2 -2    *    *
>> [13] 1 2    *    *
>> [14] 2 1    *    *
>>
>> So in the output, notice that the last 4 test result in an error (noted by
>> the *).  The output I am looking for is "invalid x or y" for the last 4 test
>> results.  Does this make sense?
> Michael,
>
> It does not seem to have been typical in the past to issue
> errors during point transformation - instead HUGE_VAL was
> returned and that was it.  So the "proj" command has no code
> to report errors other than by printing "*" after a point transformation.
> cs2cs on the other hand does - partly motifivated by my issuing of
> errors from the datum shifting code that comes into play in cs2cs
> and not in proj.  I would suggest you try with cs2cs.
>
> Best regards,


-- 
Michael Speth
Scientific Programmer
Landcare Research



From cokrzys at gmail.com  Thu Nov  3 18:37:03 2011
From: cokrzys at gmail.com (Brian Krzys)
Date: Thu, 3 Nov 2011 19:37:03 -0600
Subject: [Proj] Ortho Projection Question
Message-ID: <CAKWaz4tMZN37+_jY-HxinFh3-gV4m0TMvUM4jbzk7G4S0YJahg@mail.gmail.com>

I am trying to duplicate an ESRI "local" projection with Proj.4
parameters and can't quite get it worked out.  The ESRI custom
projection file has:

PROJCS["Twin_Creeks_Mine_Grid (Local)",
GEOGCS["GCS_North_American_1927",
DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],
PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
PROJECTION["Local"],
PARAMETER["False_Easting",14225.0],
PARAMETER["False_Northing",36603.0],
PARAMETER["Scale_Factor",1.0],
PARAMETER["Azimuth",0.0],
PARAMETER["Longitude_Of_Center",-117.183175],
PARAMETER["Latitude_Of_Center",41.217358],
UNIT["Foot_US",0.3048006096012192]]

The equivalent Proj.4 parameters I've setup are:

+proj=ortho +datum=NAD27 +lat_0=41.217358 +lon_0=-117.183175
+x_0=14225.0 +y_0=36603.0 +units=us-ft no_defs

I want to convert to lat-long WGS84 so I am going to this:

+proj=longlat +datum=WGS84 +no_defs no_defs

My input test point is:

x = 15768.1900000000 y = 65384.1600000000

In ESRI land I get back (lat-long): 41.160175 -117.177571

With Proj.4 I am getting: 41.0674232619472 -117.296349865729

I've also tried this with a couple of specific +to_wgs transformations
on the ESRI and Proj.4 side and still cannot get the conversions to
match.

This is all with Proj.4 Rel. 4.7.1, 23 September 2009.

What I'm wondering about is the ortho "projection" and if there is
maybe a better option to use?  I've searched around the web a bit and
read about concerns with ortho so also not sure if there is a proj
update beyond 4.7.1 that might help?  I know this whole kind of
direct-Cartesian conversion isn't the best thing, but generally stuck
just trying to match what Arc is doing.

Thanks for the help, Brian.


From ndzinn at comcast.net  Thu Nov  3 21:53:15 2011
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Thu, 3 Nov 2011 23:53:15 -0500
Subject: [Proj] Ortho Projection Question
In-Reply-To: <CAKWaz4tMZN37+_jY-HxinFh3-gV4m0TMvUM4jbzk7G4S0YJahg@mail.gmail.com>
References: <CAKWaz4tMZN37+_jY-HxinFh3-gV4m0TMvUM4jbzk7G4S0YJahg@mail.gmail.com>
Message-ID: <612A96D5B3A544CE923F43828B8C58A4@NoelHmPC>

Brian,

If ESRI's PROJECTION["Local"] is also known as ESRI's "Local Cartesian", 
then you'll need an ellipsoidal version of the orthographic projection to 
match it.  I suspect that Proj.4's +proj=ortho is a spherical version of the 
orthographic.

You make it difficult to test this by tossing in a transformation from NAD27 
to WGS84 (+proj=longlat +datum=WGS84 +no_defs no_defs) with parameters 
unknown to me.  Is this NADCON?  How about one problem at a time?  Can you 
provide ESRI and Proj.4 lat/lon outputs in NAD27?

You can find the equations for the ellipsoidal orthographic here:
http://www.hydrometronics.com/downloads/Ellipsoidal%20Orthographic%20Projection.pdf

The inverse given in the link is iterative.  Charles Karney has provided a 
closed inverse that has not yet been included in the linked paper.

Noel

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)

-----Original Message----- 
From: Brian Krzys
Sent: Thursday, November 03, 2011 8:37 PM
To: Proj at lists.maptools.org
Subject: [Proj] Ortho Projection Question

I am trying to duplicate an ESRI "local" projection with Proj.4
parameters and can't quite get it worked out.  The ESRI custom
projection file has:

PROJCS["Twin_Creeks_Mine_Grid (Local)",
GEOGCS["GCS_North_American_1927",
DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],
PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
PROJECTION["Local"],
PARAMETER["False_Easting",14225.0],
PARAMETER["False_Northing",36603.0],
PARAMETER["Scale_Factor",1.0],
PARAMETER["Azimuth",0.0],
PARAMETER["Longitude_Of_Center",-117.183175],
PARAMETER["Latitude_Of_Center",41.217358],
UNIT["Foot_US",0.3048006096012192]]

The equivalent Proj.4 parameters I've setup are:

+proj=ortho +datum=NAD27 +lat_0=41.217358 +lon_0=-117.183175
+x_0=14225.0 +y_0=36603.0 +units=us-ft no_defs

I want to convert to lat-long WGS84 so I am going to this:

+proj=longlat +datum=WGS84 +no_defs no_defs

My input test point is:

x = 15768.1900000000 y = 65384.1600000000

In ESRI land I get back (lat-long): 41.160175 -117.177571

With Proj.4 I am getting: 41.0674232619472 -117.296349865729

I've also tried this with a couple of specific +to_wgs transformations
on the ESRI and Proj.4 side and still cannot get the conversions to
match.

This is all with Proj.4 Rel. 4.7.1, 23 September 2009.

What I'm wondering about is the ortho "projection" and if there is
maybe a better option to use?  I've searched around the web a bit and
read about concerns with ortho so also not sure if there is a proj
update beyond 4.7.1 that might help?  I know this whole kind of
direct-Cartesian conversion isn't the best thing, but generally stuck
just trying to match what Arc is doing.

Thanks for the help, Brian.
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj 




From Mikael.Rittri at carmenta.com  Fri Nov  4 10:21:24 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Fri, 4 Nov 2011 17:21:24 +0000
Subject: [Proj] Ortho Projection Question
In-Reply-To: <CAKWaz4tMZN37+_jY-HxinFh3-gV4m0TMvUM4jbzk7G4S0YJahg@mail.gmail.com>
References: <CAKWaz4tMZN37+_jY-HxinFh3-gV4m0TMvUM4jbzk7G4S0YJahg@mail.gmail.com>
Message-ID: <5256593E-A0A9-4927-B6B9-E2275AD6176C@carmenta.com>

In Proj.4, the x_0 and y_0 should be expressed in meters (unless you have an ellipsoid definition in feet, but the predefined ones are in meters).

I am not sure about ESRI, but I suspect that the False Easting and False Northing are expressed in US feet in this case. So you can try to convert them to meters for use in Proj.4.

Regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

4 nov 2011 kl. 02:58 skrev "Brian Krzys" <cokrzys at gmail.com>:

> I am trying to duplicate an ESRI "local" projection with Proj.4
> parameters and can't quite get it worked out.  The ESRI custom
> projection file has:
> 
> PROJCS["Twin_Creeks_Mine_Grid (Local)",
> GEOGCS["GCS_North_American_1927",
> DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],
> PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
> PROJECTION["Local"],
> PARAMETER["False_Easting",14225.0],
> PARAMETER["False_Northing",36603.0],
> PARAMETER["Scale_Factor",1.0],
> PARAMETER["Azimuth",0.0],
> PARAMETER["Longitude_Of_Center",-117.183175],
> PARAMETER["Latitude_Of_Center",41.217358],
> UNIT["Foot_US",0.3048006096012192]]
> 
> The equivalent Proj.4 parameters I've setup are:
> 
> +proj=ortho +datum=NAD27 +lat_0=41.217358 +lon_0=-117.183175
> +x_0=14225.0 +y_0=36603.0 +units=us-ft no_defs
> 
> I want to convert to lat-long WGS84 so I am going to this:
> 
> +proj=longlat +datum=WGS84 +no_defs no_defs
> 
> My input test point is:
> 
> x = 15768.1900000000 y = 65384.1600000000
> 
> In ESRI land I get back (lat-long): 41.160175 -117.177571
> 
> With Proj.4 I am getting: 41.0674232619472 -117.296349865729
> 
> I've also tried this with a couple of specific +to_wgs transformations
> on the ESRI and Proj.4 side and still cannot get the conversions to
> match.
> 
> This is all with Proj.4 Rel. 4.7.1, 23 September 2009.
> 
> What I'm wondering about is the ortho "projection" and if there is
> maybe a better option to use?  I've searched around the web a bit and
> read about concerns with ortho so also not sure if there is a proj
> update beyond 4.7.1 that might help?  I know this whole kind of
> direct-Cartesian conversion isn't the best thing, but generally stuck
> just trying to match what Arc is doing.
> 
> Thanks for the help, Brian.
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


From garret.duffy at nuigalway.ie  Mon Nov  7 01:25:07 2011
From: garret.duffy at nuigalway.ie (Duffy, Garret)
Date: Mon, 7 Nov 2011 09:25:07 -0000
Subject: [Proj] Ortho Projection Question
In-Reply-To: <5256593E-A0A9-4927-B6B9-E2275AD6176C@carmenta.com>
References: <CAKWaz4tMZN37+_jY-HxinFh3-gV4m0TMvUM4jbzk7G4S0YJahg@mail.gmail.com>
	<5256593E-A0A9-4927-B6B9-E2275AD6176C@carmenta.com>
Message-ID: <1612FB018DB27B449265FE30F163AF5D05872093@EVS1.ac.nuigalway.ie>

A related question about +ortho: 

Does it support azimuth angles other than 0.0? 

Garret


-----Original Message-----
From: proj-bounces at lists.maptools.org
[mailto:proj-bounces at lists.maptools.org] On Behalf Of Mikael Rittri
Sent: 4-Nov-11 5:21 PM
To: PROJ.4 and general Projections Discussions
Subject: Re: [Proj] Ortho Projection Question

In Proj.4, the x_0 and y_0 should be expressed in meters (unless you
have an ellipsoid definition in feet, but the predefined ones are in
meters).

I am not sure about ESRI, but I suspect that the False Easting and False
Northing are expressed in US feet in this case. So you can try to
convert them to meters for use in Proj.4.

Regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

4 nov 2011 kl. 02:58 skrev "Brian Krzys" <cokrzys at gmail.com>:

> I am trying to duplicate an ESRI "local" projection with Proj.4 
> parameters and can't quite get it worked out.  The ESRI custom 
> projection file has:
> 
> PROJCS["Twin_Creeks_Mine_Grid (Local)", 
> GEOGCS["GCS_North_American_1927", 
> DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.978
> 6982]], PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
> PROJECTION["Local"],
> PARAMETER["False_Easting",14225.0],
> PARAMETER["False_Northing",36603.0],
> PARAMETER["Scale_Factor",1.0],
> PARAMETER["Azimuth",0.0],
> PARAMETER["Longitude_Of_Center",-117.183175],
> PARAMETER["Latitude_Of_Center",41.217358],
> UNIT["Foot_US",0.3048006096012192]]
> 
> The equivalent Proj.4 parameters I've setup are:
> 
> +proj=ortho +datum=NAD27 +lat_0=41.217358 +lon_0=-117.183175 
> +x_0=14225.0 +y_0=36603.0 +units=us-ft no_defs
> 
> I want to convert to lat-long WGS84 so I am going to this:
> 
> +proj=longlat +datum=WGS84 +no_defs no_defs
> 
> My input test point is:
> 
> x = 15768.1900000000 y = 65384.1600000000
> 
> In ESRI land I get back (lat-long): 41.160175 -117.177571
> 
> With Proj.4 I am getting: 41.0674232619472 -117.296349865729
> 
> I've also tried this with a couple of specific +to_wgs transformations

> on the ESRI and Proj.4 side and still cannot get the conversions to 
> match.
> 
> This is all with Proj.4 Rel. 4.7.1, 23 September 2009.
> 
> What I'm wondering about is the ortho "projection" and if there is 
> maybe a better option to use?  I've searched around the web a bit and 
> read about concerns with ortho so also not sure if there is a proj 
> update beyond 4.7.1 that might help?  I know this whole kind of 
> direct-Cartesian conversion isn't the best thing, but generally stuck 
> just trying to match what Arc is doing.
> 
> Thanks for the help, Brian.
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From vincenzo.ampolo at gmail.com  Wed Nov  9 07:36:03 2011
From: vincenzo.ampolo at gmail.com (Vincenzo Ampolo)
Date: Wed, 09 Nov 2011 16:36:03 +0100
Subject: [Proj] load arcSDE raw data from database and convert to lat/long
Message-ID: <4EBA9DE3.1010508@gmail.com>

Hi all,

I'm new to proj.

I just have a set of X, Y coordinates. i dunno what they are or the 
format they use. I suppose they are a raw export of arcgis point data 
exported via csv from a database. I think that arcsde is used as a 
gateway. Coordinates are:

X = 1550428 Y = 2447336 and should be a point closer to lat = 41,8905198 
lng = 12,4942486
X = 2159820 Y = 1457635 and should be a point closer to lat = 45,463681 
lng = 9,1881714

I need a way to convert them. i tried to decode them as UTM or 
cartesians point in meters but it doesn't work.

Does anyone have a suggestion in how to solve this problem?

Thanks.

-- 
Vincenzo Ampolo
http://vincenzo-ampolo.net
http://goshawknest.wordpress.com



From cjmce at lsu.edu  Wed Nov  9 07:50:16 2011
From: cjmce at lsu.edu (Clifford J Mugnier)
Date: Wed, 9 Nov 2011 09:50:16 -0600
Subject: [Proj] load arcSDE raw data from database and convert to
	lat/long
References: <4EBA9DE3.1010508@gmail.com>
Message-ID: <B597ADFC46B67741B18EA6AA13613FF7026A6D00@email002.lsu.edu>

Vincenzo,
 
Since you did not mention where you are, I had to look up the coordinates to give you a clue.  Since your coordinates are near Rome, the local coordinate system is a Gauss-Boaga Transverse Mercator referenced to the Monte Mario Datum of 1940 on the International ellipsoid.  For further details, see my column on the Italian Republic in the August 2005 issue of Photogrammetric Engineering & Remote Sensing.  The pdf of that column may be downloaded from the society's website at www.ASPRS.org. 
 
Clifford J. Mugnier, C.P., C.M.S.
Chief of Geodesy,
Center for GeoInformatics
Department of Civil Engineering 
Patrick F. Taylor Hall 3531
LOUISIANA STATE UNIVERSITY 
Baton Rouge, LA  70803
Voice and Facsimile:  (225) 578-8536 [Academic] 
Voice and Facsimile:  (225) 578-4578 [Research] 
Cell: (225) 328-8975 [Academic & Research]
Honorary Life Member of the 
Louisiana Society of Professional Surveyors 
Fellow Emeritus of the ASPRS 
Member of the Americas Petroleum Survey Group


________________________________

From: proj-bounces at lists.maptools.org on behalf of Vincenzo Ampolo
Sent: Wed 09-Nov-11 09:36
To: proj at lists.maptools.org
Subject: [Proj] load arcSDE raw data from database and convert to lat/long



Hi all,

I'm new to proj.

I just have a set of X, Y coordinates. i dunno what they are or the
format they use. I suppose they are a raw export of arcgis point data
exported via csv from a database. I think that arcsde is used as a
gateway. Coordinates are:

X = 1550428 Y = 2447336 and should be a point closer to lat = 41,8905198
lng = 12,4942486
X = 2159820 Y = 1457635 and should be a point closer to lat = 45,463681
lng = 9,1881714

I need a way to convert them. i tried to decode them as UTM or
cartesians point in meters but it doesn't work.

Does anyone have a suggestion in how to solve this problem?

Thanks.

--
Vincenzo Ampolo
http://vincenzo-ampolo.net <http://vincenzo-ampolo.net/> 
http://goshawknest.wordpress.com <http://goshawknest.wordpress.com/> 

_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111109/decf8ed6/attachment.html>

From vincenzo.ampolo at gmail.com  Wed Nov  9 08:15:52 2011
From: vincenzo.ampolo at gmail.com (Vincenzo Ampolo)
Date: Wed, 09 Nov 2011 17:15:52 +0100
Subject: [Proj] load arcSDE raw data from database and convert to
	lat/long
In-Reply-To: <B597ADFC46B67741B18EA6AA13613FF7026A6D00@email002.lsu.edu>
References: <4EBA9DE3.1010508@gmail.com>
	<B597ADFC46B67741B18EA6AA13613FF7026A6D00@email002.lsu.edu>
Message-ID: <4EBAA738.7080801@gmail.com>

On 11/09/2011 04:50 PM, Clifford J Mugnier wrote:
> Vincenzo,
Dear Clifford,
> Since you did not mention where you are, I had to look up the 
> coordinates to give you a clue.  Since your coordinates are near Rome, 
> the local coordinate system is a Gauss-Boaga Transverse Mercator 
> referenced to the Monte Mario Datum of 1940 on the International 
> ellipsoid.  For further details, see my column on the *Italian 
> Republic* in the August 2005 issue of /Photogrammetric Engineering & 
> Remote Sensing/.  The pdf of that column may be downloaded from the 
> society's website at www.ASPRS.org <http://www.ASPRS.org>.
> Clifford J. Mugnier, C.P., C.M.S.
based on your advice i surfed the web and found:

http://www.rigacci.org/wiki/doku.php/tecnica/gps_cartografia_gis/gauss_boaga_wgs84

So i tried to use pyproj to do the computation:

In [50]: p = Proj(proj="tmerc", lat_0="0", lon_0="9", k="0.9996", 
x_0="1500000", y_0="0", ellps="intl", units="m", 
towgs84="-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68")

In [51]: x,y = p(45.463681, 9.1881714)

In [52]: print x,y
5790656.63279 1259107.51994

But it's still wrong, i should obtain something close to X=2159820 Y=1457635

Any other suggestion?

Thanks for all.

-- 
Vincenzo Ampolo
http://vincenzo-ampolo.net
http://goshawknest.wordpress.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111109/8cdb521c/attachment.html>

From ndzinn at comcast.net  Wed Nov  9 08:30:33 2011
From: ndzinn at comcast.net (Noel Zinn (cc))
Date: Wed, 9 Nov 2011 10:30:33 -0600
Subject: [Proj] load arcSDE raw data from database and convert tolat/long
In-Reply-To: <4EBAA738.7080801@gmail.com>
References: <4EBA9DE3.1010508@gmail.com><B597ADFC46B67741B18EA6AA13613FF7026A6D00@email002.lsu.edu>
	<4EBAA738.7080801@gmail.com>
Message-ID: <4E4CB290FB7D4334AFC3C79127384263@NoelHmPC>

Vincenzo,

Here’s a radical suggestion for your consideration.  Approach the source of these coordinates and get projection, grid, ellipsoid and datum shift parameters.  Forensic sleuthing is great entertainment, but without definitive documentation it’s just an informed guess.

Noel

Noel Zinn, Principal, Hydrometronics LLC
+1-832-539-1472 (office), +1-281-221-0051 (cell)
noel.zinn at hydrometronics.com (email)
http://www.hydrometronics.com (website)


From: Vincenzo Ampolo 
Sent: Wednesday, November 09, 2011 10:15 AM
To: PROJ.4 and general Projections Discussions 
Subject: Re: [Proj] load arcSDE raw data from database and convert tolat/long

On 11/09/2011 04:50 PM, Clifford J Mugnier wrote: 
  Vincenzo,
Dear Clifford,


  Since you did not mention where you are, I had to look up the coordinates to give you a clue.  Since your coordinates are near Rome, the local coordinate system is a Gauss-Boaga Transverse Mercator referenced to the Monte Mario Datum of 1940 on the International ellipsoid.  For further details, see my column on the Italian Republic in the August 2005 issue of Photogrammetric Engineering & Remote Sensing.  The pdf of that column may be downloaded from the society's website at www.ASPRS.org. 

  Clifford J. Mugnier, C.P., C.M.S.
based on your advice i surfed the web and found:

http://www.rigacci.org/wiki/doku.php/tecnica/gps_cartografia_gis/gauss_boaga_wgs84

So i tried to use pyproj to do the computation:

In [50]: p = Proj(proj="tmerc", lat_0="0", lon_0="9", k="0.9996", x_0="1500000", y_0="0", ellps="intl", units="m", towgs84="-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68")

In [51]: x,y = p(45.463681, 9.1881714)

In [52]: print x,y
5790656.63279 1259107.51994

But it's still wrong, i should obtain something close to X=2159820 Y=1457635

Any other suggestion?

Thanks for all.

-- 
Vincenzo Ampolo
http://vincenzo-ampolo.net
http://goshawknest.wordpress.com

--------------------------------------------------------------------------------
_______________________________________________
Proj mailing list
Proj at lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111109/916c2c44/attachment.html>

From jagoncal at gmail.com  Wed Nov  9 09:32:32 2011
From: jagoncal at gmail.com (JAG)
Date: Wed, 9 Nov 2011 17:32:32 +0000
Subject: [Proj] load arcSDE raw data from database and convert to
	lat/long
In-Reply-To: <4EBA9DE3.1010508@gmail.com>
References: <4EBA9DE3.1010508@gmail.com>
Message-ID: <7C699757-022B-48B9-AEAB-EDCC872C311B@gmail.com>

Hi
There is something wrong with those coordinates. The second point has larger X but smaller longitude and smaller Y but larger latitude. Are X and Y changed in one of the points?
Regards
José Gonçalves 



No dia 9 Nov 2011, às 15:36, Vincenzo Ampolo <vincenzo.ampolo at gmail.com> escreveu:

> Hi all,
> 
> I'm new to proj.
> 
> I just have a set of X, Y coordinates. i dunno what they are or the 
> format they use. I suppose they are a raw export of arcgis point data 
> exported via csv from a database. I think that arcsde is used as a 
> gateway. Coordinates are:
> 
> X = 1550428 Y = 2447336 and should be a point closer to lat = 41,8905198 
> lng = 12,4942486
> X = 2159820 Y = 1457635 and should be a point closer to lat = 45,463681 
> lng = 9,1881714
> 
> I need a way to convert them. i tried to decode them as UTM or 
> cartesians point in meters but it doesn't work.
> 
> Does anyone have a suggestion in how to solve this problem?
> 
> Thanks.
> 
> -- 
> Vincenzo Ampolo
> http://vincenzo-ampolo.net
> http://goshawknest.wordpress.com
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


From vincenzo.ampolo at gmail.com  Fri Nov 11 01:54:04 2011
From: vincenzo.ampolo at gmail.com (Vincenzo Ampolo)
Date: Fri, 11 Nov 2011 10:54:04 +0100
Subject: [Proj] load arcSDE raw data from database and convert to
	lat/long
In-Reply-To: <7C699757-022B-48B9-AEAB-EDCC872C311B@gmail.com>
References: <4EBA9DE3.1010508@gmail.com>
	<7C699757-022B-48B9-AEAB-EDCC872C311B@gmail.com>
Message-ID: <4EBCF0BC.8000706@gmail.com>

On 11/09/2011 06:32 PM, JAG wrote:
> Hi
> There is something wrong with those coordinates. The second point has larger X but smaller longitude and smaller Y but larger latitude. Are X and Y changed in one of the points?
> Regards
> José Gonçalves
No, i double checked and the points seem fine. They are stored in the 
cvs file as X and Y as stated.

I just received a leak that they could be data gathered from navteq 
software. Can it help?

Since all data is in a 20km^2 region i'm also thinking to detect a point 
in lat/long, detect the same point in the unknow data X/Y and then write 
a formula which does the conversion. It will not work worldwide but it 
can work in that region. Do you think that it's feasible?


-- 
Vincenzo Ampolo
http://vincenzo-ampolo.net
http://goshawknest.wordpress.com



From jagoncal at gmail.com  Fri Nov 11 02:28:13 2011
From: jagoncal at gmail.com (JAG)
Date: Fri, 11 Nov 2011 10:28:13 +0000
Subject: [Proj] load arcSDE raw data from database and convert to
	lat/long
In-Reply-To: <4EBCF0BC.8000706@gmail.com>
References: <4EBA9DE3.1010508@gmail.com>
	<7C699757-022B-48B9-AEAB-EDCC872C311B@gmail.com>
	<4EBCF0BC.8000706@gmail.com>
Message-ID: <39461EDE-C7FF-481F-82A2-0533E665B96A@gmail.com>

Looking only to the geographic coordinates, the differences are 3.6 deg in latitude and 3.3 deg in longitude. That is approximately 400 km in latitude and 270 km in longitude, which does not agree with the area you refer.

Regards

José




No dia 11 Nov 2011, às 09:54, Vincenzo Ampolo <vincenzo.ampolo at gmail.com> escreveu:

> On 11/09/2011 06:32 PM, JAG wrote:
>> Hi
>> There is something wrong with those coordinates. The second point has larger X but smaller longitude and smaller Y but larger latitude. Are X and Y changed in one of the points?
>> Regards
>> José Gonçalves
> No, i double checked and the points seem fine. They are stored in the 
> cvs file as X and Y as stated.
> 
> I just received a leak that they could be data gathered from navteq 
> software. Can it help?
> 
> Since all data is in a 20km^2 region i'm also thinking to detect a point 
> in lat/long, detect the same point in the unknow data X/Y and then write 
> a formula which does the conversion. It will not work worldwide but it 
> can work in that region. Do you think that it's feasible?
> 
> 
> -- 
> Vincenzo Ampolo
> http://vincenzo-ampolo.net
> http://goshawknest.wordpress.com
> 
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


From vincenzo.ampolo at gmail.com  Fri Nov 11 03:04:02 2011
From: vincenzo.ampolo at gmail.com (Vincenzo Ampolo)
Date: Fri, 11 Nov 2011 12:04:02 +0100
Subject: [Proj] load arcSDE raw data from database and convert to
	lat/long
In-Reply-To: <39461EDE-C7FF-481F-82A2-0533E665B96A@gmail.com>
References: <4EBA9DE3.1010508@gmail.com>
	<7C699757-022B-48B9-AEAB-EDCC872C311B@gmail.com>
	<4EBCF0BC.8000706@gmail.com>
	<39461EDE-C7FF-481F-82A2-0533E665B96A@gmail.com>
Message-ID: <4EBD0122.1010504@gmail.com>

On 11/11/2011 11:28 AM, JAG wrote:
> Looking only to the geographic coordinates, the differences are 3.6 deg in latitude and 3.3 deg in longitude. That is approximately 400 km in latitude and 270 km in longitude, which does not agree with the area you refer.
>
> Regards
>
> José
Sorry, i didn't mean that the two points are close together. They are 
from different datasets.

I've 40.000 points which are all close to

lat = 41,8905198
lng = 12,4942486

Which is Rome (italy)

And other 40.000 points which are all close to

lat = 45,463681
lng = 9,1881714

which is Milan (Italy)

This is some data i've for the first set of points (around Rome)

/GeoX (M)/ 	/GeoY (N)/ 	/Colonna comune (B)/ 	/Colonna indirizzo (D)/
2447857 	1069853 	ROMA 	CIRCONVALLAZIONE GIANICOLENSE
2447336 	1075588 	ROMA 	CIRCONVALLAZIONE CLODIA
2447336 	1075588 	ROMA 	CIRCONVALLAZIONE CLODIA
2451643 	1077238 	ROMA 	VIALE SOMALIA
2447857 	1069853 	ROMA 	CIRCONVALLAZIONE GIANICOLENSE
2457129 	1068315 	ROMA 	CIRCONVALLAZIONE TUSCOLANA
2457129 	1068315 	ROMA 	CIRCONVALLAZIONE TUSCOLANA
2448230 	1077592 	ROMA 	CORSO DI FRANCIA
2448560 	1069650 	ROMA 	PIAZZA DELLA RADIO
2456036 	1078472 	ROMA 	VIA DIEGO FABBRI
2446575 	1067372 	ROMA 	VIALE ISACCO NEWTON
2448230 	1077592 	ROMA 	CORSO DI FRANCIA
2448230 	1077592 	ROMA 	CORSO DI FRANCIA
2448850 	1072702 	ROMA 	CORSO VITTORIO EMANUELE II
2451492 	1068723 	ROMA 	LARGO BENEDETTO BOMPIANI
2454671 	1080064 	ROMA 	VIA FRANCO SIMONGINI
2447642 	1078350 	ROMA 	VIA DI VIGNA STELLUTI
2447642 	1078350 	ROMA 	VIA DI VIGNA STELLUTI
2447642 	1078350 	ROMA 	VIA DI VIGNA STELLUTI
2447642 	1078350 	ROMA 	VIA DI VIGNA STELLUTI
2447642 	1078350 	ROMA 	VIA DI VIGNA STELLUTI
2450834 	1067730 	ROMA 	PIAZZALE DEL CARAVAGGIO
2447187 	1074983 	ROMA 	PIAZZALE CLODIO
2447187 	1074983 	ROMA 	PIAZZALE CLODIO
2446665 	1073922 	ROMA 	PIAZZALE DEGLI EROI
2448836 	1074408 	ROMA 	PIAZZALE FLAMINIO
2447369 	1075612 	ROMA 	PIAZZALE MARESCIALLO GIARDINO
2447369 	1075612 	ROMA 	PIAZZALE MARESCIALLO GIARDINO
2448234 	1076254 	ROMA 	PIAZZA APOLLODORO
2452382 	1080020 	ROMA 	PIAZZA DELL'ATENEO SALESIANO
2448494 	1073731 	ROMA 	PIAZZA CAVOUR
2456566 	1070962 	ROMA 	PIAZZA DELLE CAMELIE
2451500 	1076660 	ROMA 	PIAZZA DI PRISCILLA
2447346 	1076534 	ROMA 	PIAZZA LAURO DE BOSIS
2447584 	1076916 	ROMA 	PIAZZALE MARESCIALLO DIAZ
2447584 	1076916 	ROMA 	PIAZZALE MARESCIALLO DIAZ
2448307 	1075184 	ROMA 	PIAZZA MONTE GRAPPA
2445891 	1072333 	ROMA 	PIAZZA PIO XI
2447714 	1078540 	ROMA 	PIAZZA STEFANO JACINI


Thanks for all.

-- 
Vincenzo Ampolo
http://vincenzo-ampolo.net
http://goshawknest.wordpress.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111111/60c879a1/attachment.html>

From jagoncal at gmail.com  Fri Nov 11 06:18:39 2011
From: jagoncal at gmail.com (=?ISO-8859-1?Q?Jose_Gon=E7alves?=)
Date: Fri, 11 Nov 2011 14:18:39 +0000
Subject: [Proj] load arcSDE raw data from database and convert to
	lat/long
In-Reply-To: <4EBD0122.1010504@gmail.com>
References: <4EBA9DE3.1010508@gmail.com>
	<7C699757-022B-48B9-AEAB-EDCC872C311B@gmail.com>
	<4EBCF0BC.8000706@gmail.com>
	<39461EDE-C7FF-481F-82A2-0533E665B96A@gmail.com>
	<4EBD0122.1010504@gmail.com>
Message-ID: <CALHLaORR7XqSCDfjaBBxshO96qu_6Oxqj=0vbb-twQjr3+DavA@mail.gmail.com>

You should first look carefully at you data. In your first e-mail you said
one of the points was:

"X = 1550428 Y = 2447336 and should be a point closer to lat = 41,8905198
lng = 12,4942486"

The geographic coordinates correspond in fact to a point in Rome. But now
you give X,Y coordinates like

2447857 1069853

If coordinates are meters, this point is very far from Rome, even if you
change the order in one of the points!...

Regards

José



2011/11/11 Vincenzo Ampolo <vincenzo.ampolo at gmail.com>

>  On 11/11/2011 11:28 AM, JAG wrote:
>
> Looking only to the geographic coordinates, the differences are 3.6 deg in latitude and 3.3 deg in longitude. That is approximately 400 km in latitude and 270 km in longitude, which does not agree with the area you refer.
>
> Regards
>
> José
>
>  Sorry, i didn't mean that the two points are close together. They are
> from different datasets.
>
> I've 40.000 points which are all close to
>
> lat = 41,8905198
> lng = 12,4942486
>
> Which is Rome (italy)
>
> And other 40.000 points which are all close to
>
> lat = 45,463681
> lng = 9,1881714
>
> which is Milan (Italy)
>
> This is some data i've for the first set of points (around Rome)
>
>   *GeoX (M)* *GeoY (N)* *Colonna comune (B)* *Colonna indirizzo (D)*
> 2447857 1069853 ROMA CIRCONVALLAZIONE GIANICOLENSE  2447336 1075588 ROMA CIRCONVALLAZIONE
> CLODIA  2447336 1075588 ROMA CIRCONVALLAZIONE CLODIA  2451643 1077238 ROMA VIALE
> SOMALIA  2447857 1069853 ROMA CIRCONVALLAZIONE GIANICOLENSE  2457129
> 1068315 ROMA CIRCONVALLAZIONE TUSCOLANA  2457129 1068315 ROMA CIRCONVALLAZIONE
> TUSCOLANA  2448230 1077592 ROMA CORSO DI FRANCIA  2448560 1069650 ROMA PIAZZA
> DELLA RADIO  2456036 1078472 ROMA VIA DIEGO FABBRI  2446575 1067372 ROMA VIALE
> ISACCO NEWTON  2448230 1077592 ROMA CORSO DI FRANCIA  2448230 1077592 ROMA CORSO
> DI FRANCIA  2448850 1072702 ROMA CORSO VITTORIO EMANUELE II  2451492
> 1068723 ROMA LARGO BENEDETTO BOMPIANI  2454671 1080064 ROMA VIA FRANCO
> SIMONGINI  2447642 1078350 ROMA VIA DI VIGNA STELLUTI  2447642 1078350
> ROMA VIA DI VIGNA STELLUTI  2447642 1078350 ROMA VIA DI VIGNA STELLUTI
> 2447642 1078350 ROMA VIA DI VIGNA STELLUTI  2447642 1078350 ROMA VIA DI
> VIGNA STELLUTI  2450834 1067730 ROMA PIAZZALE DEL CARAVAGGIO  2447187
> 1074983 ROMA PIAZZALE CLODIO  2447187 1074983 ROMA PIAZZALE CLODIO
> 2446665 1073922 ROMA PIAZZALE DEGLI EROI  2448836 1074408 ROMA PIAZZALE
> FLAMINIO  2447369 1075612 ROMA PIAZZALE MARESCIALLO GIARDINO  2447369
> 1075612 ROMA PIAZZALE MARESCIALLO GIARDINO  2448234 1076254 ROMA PIAZZA
> APOLLODORO  2452382 1080020 ROMA PIAZZA DELL'ATENEO SALESIANO  2448494
> 1073731 ROMA PIAZZA CAVOUR  2456566 1070962 ROMA PIAZZA DELLE CAMELIE
> 2451500 1076660 ROMA PIAZZA DI PRISCILLA  2447346 1076534 ROMA PIAZZA
> LAURO DE BOSIS  2447584 1076916 ROMA PIAZZALE MARESCIALLO DIAZ  2447584
> 1076916 ROMA PIAZZALE MARESCIALLO DIAZ  2448307 1075184 ROMA PIAZZA MONTE
> GRAPPA  2445891 1072333 ROMA PIAZZA PIO XI  2447714 1078540 ROMA PIAZZA
> STEFANO JACINI
> Thanks for all.
>
> --
> Vincenzo Ampolohttp://vincenzo-ampolo.nethttp://goshawknest.wordpress.com
>
>
> _______________________________________________
> Proj mailing list
> Proj at lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111111/cf661d40/attachment.html>

From Mikael.Rittri at carmenta.com  Fri Nov 11 11:41:36 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Fri, 11 Nov 2011 19:41:36 +0000
Subject: [Proj] load arcSDE raw data from database and convert
	to	lat/long
In-Reply-To: <CALHLaORR7XqSCDfjaBBxshO96qu_6Oxqj=0vbb-twQjr3+DavA@mail.gmail.com>
References: <4EBA9DE3.1010508@gmail.com>
	<7C699757-022B-48B9-AEAB-EDCC872C311B@gmail.com>
	<4EBCF0BC.8000706@gmail.com>
	<39461EDE-C7FF-481F-82A2-0533E665B96A@gmail.com>
	<4EBD0122.1010504@gmail.com>
	<CALHLaORR7XqSCDfjaBBxshO96qu_6Oxqj=0vbb-twQjr3+DavA@mail.gmail.com>
Message-ID: <0430433C-E8F4-4E07-A300-FB3F9B604862@carmenta.com>

Perhaps the two datasets use different coordinate reference systems?

Regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com

11 nov 2011 kl. 15:25 skrev "Jose Gonçalves" <jagoncal at gmail.com<mailto:jagoncal at gmail.com>>:

You should first look carefully at you data. In your first e-mail you said one of the points was:

"X = 1550428 Y = 2447336 and should be a point closer to lat = 41,8905198 lng = 12,4942486"

The geographic coordinates correspond in fact to a point in Rome. But now you give X,Y coordinates like

2447857 1069853

If coordinates are meters, this point is very far from Rome, even if you change the order in one of the points!...

Regards

José



2011/11/11 Vincenzo Ampolo <<mailto:vincenzo.ampolo at gmail.com>vincenzo.ampolo at gmail.com<mailto:vincenzo.ampolo at gmail.com>>
On 11/11/2011 11:28 AM, JAG wrote:

Looking only to the geographic coordinates, the differences are 3.6 deg in latitude and 3.3 deg in longitude. That is approximately 400 km in latitude and 270 km in longitude, which does not agree with the area you refer.

Regards

José

Sorry, i didn't mean that the two points are close together. They are from different datasets.

I've 40.000 points which are all close to

lat = 41,8905198
lng = 12,4942486

Which is Rome (italy)

And other 40.000 points which are all close to


lat = 45,463681
lng = 9,1881714

which is Milan (Italy)

This is some data i've for the first set of points (around Rome)

GeoX (M)        GeoY (N)        Colonna comune (B)      Colonna indirizzo (D)
2447857 1069853 ROMA    CIRCONVALLAZIONE GIANICOLENSE
2447336 1075588 ROMA    CIRCONVALLAZIONE CLODIA
2447336 1075588 ROMA    CIRCONVALLAZIONE CLODIA
2451643 1077238 ROMA    VIALE SOMALIA
2447857 1069853 ROMA    CIRCONVALLAZIONE GIANICOLENSE
2457129 1068315 ROMA    CIRCONVALLAZIONE TUSCOLANA
2457129 1068315 ROMA    CIRCONVALLAZIONE TUSCOLANA
2448230 1077592 ROMA    CORSO DI FRANCIA
2448560 1069650 ROMA    PIAZZA DELLA RADIO
2456036 1078472 ROMA    VIA DIEGO FABBRI
2446575 1067372 ROMA    VIALE ISACCO NEWTON
2448230 1077592 ROMA    CORSO DI FRANCIA
2448230 1077592 ROMA    CORSO DI FRANCIA
2448850 1072702 ROMA    CORSO VITTORIO EMANUELE II
2451492 1068723 ROMA    LARGO BENEDETTO BOMPIANI
2454671 1080064 ROMA    VIA FRANCO SIMONGINI
2447642 1078350 ROMA    VIA DI VIGNA STELLUTI
2447642 1078350 ROMA    VIA DI VIGNA STELLUTI
2447642 1078350 ROMA    VIA DI VIGNA STELLUTI
2447642 1078350 ROMA    VIA DI VIGNA STELLUTI
2447642 1078350 ROMA    VIA DI VIGNA STELLUTI
2450834 1067730 ROMA    PIAZZALE DEL CARAVAGGIO
2447187 1074983 ROMA    PIAZZALE CLODIO
2447187 1074983 ROMA    PIAZZALE CLODIO
2446665 1073922 ROMA    PIAZZALE DEGLI EROI
2448836 1074408 ROMA    PIAZZALE FLAMINIO
2447369 1075612 ROMA    PIAZZALE MARESCIALLO GIARDINO
2447369 1075612 ROMA    PIAZZALE MARESCIALLO GIARDINO
2448234 1076254 ROMA    PIAZZA APOLLODORO
2452382 1080020 ROMA    PIAZZA DELL'ATENEO SALESIANO
2448494 1073731 ROMA    PIAZZA CAVOUR
2456566 1070962 ROMA    PIAZZA DELLE CAMELIE
2451500 1076660 ROMA    PIAZZA DI PRISCILLA
2447346 1076534 ROMA    PIAZZA LAURO DE BOSIS
2447584 1076916 ROMA    PIAZZALE MARESCIALLO DIAZ
2447584 1076916 ROMA    PIAZZALE MARESCIALLO DIAZ
2448307 1075184 ROMA    PIAZZA MONTE GRAPPA
2445891 1072333 ROMA    PIAZZA PIO XI
2447714 1078540 ROMA    PIAZZA STEFANO JACINI

Thanks for all.


--
Vincenzo Ampolo
<http://vincenzo-ampolo.net>http://vincenzo-ampolo.net
<http://goshawknest.wordpress.com>http://goshawknest.wordpress.com

_______________________________________________
Proj mailing list
<mailto:Proj at lists.maptools.org>Proj at lists.maptools.org<mailto:Proj at lists.maptools.org>
<http://lists.maptools.org/mailman/listinfo/proj>http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj at lists.maptools.org<mailto:Proj at lists.maptools.org>
http://lists.maptools.org/mailman/listinfo/proj
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111111/c0d9e794/attachment.html>

From spethm at landcareresearch.co.nz  Sun Nov 13 11:39:50 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Mon, 14 Nov 2011 08:39:50 +1300
Subject: [Proj] +a argument different than I expected
Message-ID: <4EC01D06.8060105@landcareresearch.co.nz>

Greetings,
   I am using SVN Revision: 2113.  I have found that the +a argument 
doesn't match the value found in P->a.  Here is an example:

proj +proj=healpix -f '%.'$PERCISION'f' +lon_0=45 +a=3.0 +R_A 
+ellps=WGS84 -E <<EOF
0 0
EOF

The value of P->a is 2.996646.

Is this correct?

Thanks

-- 
Michael Speth
Research Systems Developer
Landcare Research

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111114/433f4f17/attachment.html>

From warmerdam at pobox.com  Sun Nov 13 12:17:33 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 13 Nov 2011 12:17:33 -0800
Subject: [Proj] +a argument different than I expected
In-Reply-To: <4EC01D06.8060105@landcareresearch.co.nz>
References: <4EC01D06.8060105@landcareresearch.co.nz>
Message-ID: <4EC025DD.3030507@pobox.com>

On 11-11-13 11:39 AM, Michael Speth wrote:
> Greetings,
> I am using SVN Revision: 2113. I have found that the +a argument doesn't match
> the value found in P->a. Here is an example:
>
> proj +proj=healpix -f '%.'$PERCISION'f' +lon_0=45 +a=3.0 +R_A +ellps=WGS84 -E <<EOF
> 0 0
> EOF
>
> The value of P->a is 2.996646.
>
> Is this correct?

Michael,

I don't really know the answer, but I'm guessing the +R_A is adjusting the
semi major and semi minor axis a bit.  I honestly don't even know what
you meant by the the mix of +a, +R_A and +ellps.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer



From Mikael.Rittri at carmenta.com  Mon Nov 14 06:48:27 2011
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Mon, 14 Nov 2011 14:48:27 +0000
Subject: [Proj] What your favorite map projection says about you.
Message-ID: <E4AB3DD44D22854B819908379DE4AD49389E844B@SETHNWS023.carmenta.se>


Cartoon by Randall Munroe:

http://xkcd.com/977/

Regards,

Mikael Rittri
Carmenta
Sweden
http://www.carmenta.com


From spethm at landcareresearch.co.nz  Wed Nov 16 12:42:18 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Thu, 17 Nov 2011 09:42:18 +1300
Subject: [Proj] +a argument different than I expected
In-Reply-To: <4EC025DD.3030507@pobox.com>
References: <4EC01D06.8060105@landcareresearch.co.nz>
	<4EC025DD.3030507@pobox.com>
Message-ID: <4EC4202A.6090103@landcareresearch.co.nz>

Hi Frank,
   I think I am confused on how the arguments should be used.  Let me 
describe what I am trying to test.  Here are the following scenarios to 
test the projections I am working on (HEALPix & rHEALPix):

* Forward Sphere
* Inverse Sphere
* Forward Ellipsoid
* Inverse Ellipsoid


Case 1 - Forward Sphere Parameters
+lon_0=45 +a=1

Case 2 - Inverse Sphere Parameters
-I +lon_0=45 +a=1

Case 3 - Forward Ellipsoid Parameters
+lon_0=45 +a=1 +e=0.5

Case 4 - Inverse Ellipsoid Parameters
-I +lon_0=45 +a=1 +e=0.5

Where I think the following:
* lon_0 is the central meridian
* a is the radius of the sphere or ellipsoid
* e is the eccentricity

Thanks for your help.

On 14/11/11 09:17, Frank Warmerdam wrote:
> On 11-11-13 11:39 AM, Michael Speth wrote:
>> Greetings,
>> I am using SVN Revision: 2113. I have found that the +a argument doesn't match
>> the value found in P->a. Here is an example:
>>
>> proj +proj=healpix -f '%.'$PERCISION'f' +lon_0=45 +a=3.0 +R_A +ellps=WGS84 -E<<EOF
>> 0 0
>> EOF
>>
>> The value of P->a is 2.996646.
>>
>> Is this correct?
> Michael,
>
> I don't really know the answer, but I'm guessing the +R_A is adjusting the
> semi major and semi minor axis a bit.  I honestly don't even know what
> you meant by the the mix of +a, +R_A and +ellps.
>
> Best regards,


-- 
Michael Speth
Research Systems Developer
Landcare Research



From hborch at me.com  Tue Nov 22 02:46:13 2011
From: hborch at me.com (=?iso-8859-1?Q?H=C5KON_BORCH?=)
Date: Tue, 22 Nov 2011 11:46:13 +0100
Subject: [Proj] A Proj4 installer for Windows 7 64 bit?
Message-ID: <4C79A4DB-C27B-4418-BC45-C08F5E8BA376@me.com>

Hello all Proj4 people
I am looking for a ready build install package that runs under a 64 bits window 7 system. Can anybody help me?
Best regards 
Håkon Borch

From warmerdam at pobox.com  Tue Nov 22 16:14:48 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 22 Nov 2011 16:14:48 -0800
Subject: [Proj] CTable2 Format
Message-ID: <CA+YzLBcRjeB9a2yh_tSRMR=_HvEgwUf4DX6z4AxXtv3g1xD5Og@mail.gmail.com>

Folks,

In PROJ.4 trunk I have modified pj_init.c and nad2bin.c to produce
and consume a new datum shift format - "ctable2" format.  This is
a variation of the existing ctable format with a magic string prefix
in the header, all fields are in little endian byte order, and with
predictable offsets to the header fields.  This is to avoid the platform
specficness of files produced by nad2bin.

Incidentally nad2bin can now also produce NTv2 format files.
I was going to just switch to them, but because NTv2 carries
along error values for every grid entry it is twice as large as the
corresponding ctable format grid shift files even though I just
had to use zero for the error estimates.  Given that these files
might be pushed around quite a bit I didn't feel right about the
extra size.

I'd do not have easy access to a big endian test system right
now, but I'd like to confirm the byte order handling.  If someone
wants to try things on a big endian system (like Solaris on Sparc)
do the following steps:

1) build PROJ.4 from SVN trunk.
2) download and unzip the grid shift files in proj/nad:
    http://download.osgeo.org/proj/proj-datumgrid-1.5.zip
3) do "make check" and confirm things pass.
4) download http://home.gdal.org/tmp/conus into the
    proj/nad directory and run "make check" again.

Hopefully I'm on my way to a proj 4.8 release soon!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer


From spethm at landcareresearch.co.nz  Tue Nov 22 17:57:07 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Wed, 23 Nov 2011 14:57:07 +1300
Subject: [Proj] Using jniwrap
Message-ID: <4ECC52F3.60001@landcareresearch.co.nz>

Anyone have experience with using the jniwrap java wrapper?

I've compiled the jar and set the native library path; however, I get an 
error when I try to run the example from the README.  Is there something 
that I haven't configured correctly?

[code]
         PJ sourcePJ = new PJ("+init=epsg:32632");           // (x,y) 
axis order
         PJ targetPJ = new PJ("+proj=latlong +datum=WGS84"); // (?,?) 
axis order
         double[] coordinates = {
             500000,       0,   // First coordinate
             400000,  100000,   // Second coordinate
             600000, -100000    // Third coordinate
         };
         sourcePJ.transform(targetPJ, 2, coordinates, 0, 3);
         System.out.println(Arrays.toString(coordinates));

[output]
Exception in thread "main" java.lang.IllegalArgumentException: 
+init=epsg:32632
     at org.proj4.PJ.<init>(Unknown Source)
     at 
org.landcare.scenzgrid.proj4.test.HEALPixTest.main(HEALPixTest.java:36)

Thanks

-- 
Michael Speth
Research Systems Developer
Landcare Research

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111123/4eb5562b/attachment.html>

From martin.desruisseaux at geomatys.fr  Tue Nov 22 18:13:32 2011
From: martin.desruisseaux at geomatys.fr (Martin Desruisseaux)
Date: Wed, 23 Nov 2011 03:13:32 +0100
Subject: [Proj] Using jniwrap
In-Reply-To: <4ECC52F3.60001@landcareresearch.co.nz>
References: <4ECC52F3.60001@landcareresearch.co.nz>
Message-ID: <4ECC56CC.5060706@geomatys.fr>

Hello Michael

I just tried on my side and it worked well. Did you compiled with "make", and 
executed "make install" after a successful Proj.4 build? I believe (but I'm not 
sure, Frank could confirm) that "make install" is necessary in order to copy 
some necessary files like the EPSG list of definitions in proper locations. 
Maybe the exception that you get is caused by Proj.4 not finding the EPSG file?

     Martin


Le 23/11/11 02:57, Michael Speth a écrit :
> Anyone have experience with using the jniwrap java wrapper?
>
> I've compiled the jar and set the native library path; however, I get an error 
> when I try to run the example from the README.  Is there something that I 
> haven't configured correctly?
>
> [code]
>         PJ sourcePJ = new PJ("+init=epsg:32632");           // (x,y) axis order
>         PJ targetPJ = new PJ("+proj=latlong +datum=WGS84"); // (?,?) axis order
>         double[] coordinates = {
>             500000,       0,   // First coordinate
>             400000,  100000,   // Second coordinate
>             600000, -100000    // Third coordinate
>         };
>         sourcePJ.transform(targetPJ, 2, coordinates, 0, 3);
>         System.out.println(Arrays.toString(coordinates));
>
> [output]
> Exception in thread "main" java.lang.IllegalArgumentException: +init=epsg:32632
>     at org.proj4.PJ.<init>(Unknown Source)
>     at org.landcare.scenzgrid.proj4.test.HEALPixTest.main(HEALPixTest.java:36)
>
> Thanks

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111123/9305a70f/attachment.html>

From support.mn at elisanet.fi  Wed Nov 23 10:26:35 2011
From: support.mn at elisanet.fi (support.mn at elisanet.fi)
Date: Wed, 23 Nov 2011 20:26:35 +0200 (EET)
Subject: [Proj] CTable2 Format
Message-ID: <7969431.631081322072795972.JavaMail.support.mn@elisanet.fi>

> Hopefully I'm on my way to a proj 4.8 release soon!


what do people call Proj.4 after version 4.9 .... not Proj.5.0
I hope .... better maybe version 4.10, 4.11, 4,12... etc

Regards: Janne.



From spethm at landcareresearch.co.nz  Wed Nov 23 11:54:35 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Thu, 24 Nov 2011 08:54:35 +1300
Subject: [Proj] Using jniwrap
In-Reply-To: <4ECC56CC.5060706@geomatys.fr>
References: <4ECC52F3.60001@landcareresearch.co.nz>
	<4ECC56CC.5060706@geomatys.fr>
Message-ID: <4ECD4F7B.3000505@landcareresearch.co.nz>

Hi Martin,
I didn't do a make install, just make. So that must be the problem. I'll
try it out.

Thanks!

On 23/11/11 15:13, Martin Desruisseaux wrote:
> Hello Michael
>
> I just tried on my side and it worked well. Did you compiled with
> "make", and executed "make install" after a successful Proj.4 build? I
> believe (but I'm not sure, Frank could confirm) that "make install" is
> necessary in order to copy some necessary files like the EPSG list of
> definitions in proper locations. Maybe the exception that you get is
> caused by Proj.4 not finding the EPSG file?
>
> Martin
>
>
> Le 23/11/11 02:57, Michael Speth a écrit :
>> Anyone have experience with using the jniwrap java wrapper?
>>
>> I've compiled the jar and set the native library path; however, I get
>> an error when I try to run the example from the README. Is there
>> something that I haven't configured correctly?
>>
>> [code]
>> PJ sourcePJ = new PJ("+init=epsg:32632"); // (x,y) axis order
>> PJ targetPJ = new PJ("+proj=latlong +datum=WGS84"); // (λ,φ) axis order
>> double[] coordinates = {
>> 500000, 0, // First coordinate
>> 400000, 100000, // Second coordinate
>> 600000, -100000 // Third coordinate
>> };
>> sourcePJ.transform(targetPJ, 2, coordinates, 0, 3);
>> System.out.println(Arrays.toString(coordinates));
>>
>> [output]
>> Exception in thread "main" java.lang.IllegalArgumentException:
>> +init=epsg:32632
>> at org.proj4.PJ.<init>(Unknown Source)
>> at
>> org.landcare.scenzgrid.proj4.test.HEALPixTest.main(HEALPixTest.java:36)
>>
>> Thanks
>


-- 
Michael Speth
Research Systems Developer
Landcare Research

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111124/1cbc9206/attachment.html>

From spethm at landcareresearch.co.nz  Wed Nov 23 12:38:23 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Thu, 24 Nov 2011 09:38:23 +1300
Subject: [Proj] Using jniwrap
In-Reply-To: <4ECC52F3.60001@landcareresearch.co.nz>
References: <4ECC52F3.60001@landcareresearch.co.nz>
Message-ID: <4ECD59BF.4070703@landcareresearch.co.nz>

I was able to use the jar without issue after compiling with make 
install (had to do a make clean first).  My next question is how do I 
use the tool?

The command that I have been using with the proj binary is:
proj +proj=healpix -f '%.'17'f' +lon_0=0 +a=1 -E
0 0
EOF

I'm not sure what sourcePJ should be in the following example

[code]
         PJ sourcePJ = new PJ("+a=1 +lon_0=0");
         PJ targetPJ = new PJ("+proj=healpix");
         double[] coordinates = {
             0,       0,
         };
         sourcePJ.transform(targetPJ, 2, coordinates, 0, 1);
         System.out.println(Arrays.toString(coordinates));
[/code]

Thanks

On 23/11/11 14:57, Michael Speth wrote:
> Anyone have experience with using the jniwrap java wrapper?
>
> I've compiled the jar and set the native library path; however, I get 
> an error when I try to run the example from the README.  Is there 
> something that I haven't configured correctly?
>
> [code]
>         PJ sourcePJ = new PJ("+init=epsg:32632");           // (x,y) 
> axis order
>         PJ targetPJ = new PJ("+proj=latlong +datum=WGS84"); // (λ,φ) 
> axis order
>         double[] coordinates = {
>             500000,       0,   // First coordinate
>             400000,  100000,   // Second coordinate
>             600000, -100000    // Third coordinate
>         };
>         sourcePJ.transform(targetPJ, 2, coordinates, 0, 3);
>         System.out.println(Arrays.toString(coordinates));
>
> [output]
> Exception in thread "main" java.lang.IllegalArgumentException: 
> +init=epsg:32632
>     at org.proj4.PJ.<init>(Unknown Source)
>     at 
> org.landcare.scenzgrid.proj4.test.HEALPixTest.main(HEALPixTest.java:36)
>
> Thanks
> -- 
> Michael Speth
> Research Systems Developer
> Landcare Research


-- 
Michael Speth
Research Systems Developer
Landcare Research

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111124/282764e9/attachment.html>

From martin.desruisseaux at geomatys.fr  Wed Nov 23 12:59:47 2011
From: martin.desruisseaux at geomatys.fr (Martin Desruisseaux)
Date: Wed, 23 Nov 2011 21:59:47 +0100
Subject: [Proj] Using jniwrap
In-Reply-To: <4ECD59BF.4070703@landcareresearch.co.nz>
References: <4ECC52F3.60001@landcareresearch.co.nz>
	<4ECD59BF.4070703@landcareresearch.co.nz>
Message-ID: <4ECD5EC3.3020601@geomatys.fr>

Hello Michael

Le 23/11/11 21:38, Michael Speth a écrit :
> I was able to use the jar without issue after compiling with make install (had 
> to do a make clean first).  My next question is how do I use the tool?
> The command that I have been using with the proj binary is:
> proj +proj=healpix -f '%.'17'f' +lon_0=0 +a=1 -E

I'm not quite familiar with the proj command-line. If the above was reading data 
from a file, in Java the developers need to read the file themselves. The PJ 
Java class just wraps the PJ C/C++ data structure, which (I think) is not the 
place where "proj" command-line performs file reading...

> I'm not sure what sourcePJ should be in the following example
>
>         PJ sourcePJ = new PJ("+a=1 +lon_0=0");

If the "+a=1 +lon_0=0" parameters were accepted by the "proj" command-line, I 
think they will be accepted by the PJ Java class since it just pass that 
parameter verbatim to the C library.

The only difference between the C library and the Java wrapper is that the Java 
wrappers expect angles in degrees, while the C library expects angles in 
radians. The Java wrappers perform the "radians to degrees" conversions 
themselves because we have more information on the C/C++ side about whatever 
such conversion is needed or not (it depends if the PJ are geographic or 
geocentric or projected CRS).

Javadoc is there: http://www.geoapi.org/geoapi-proj4/apidocs/org/proj4/PJ.html

     Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111123/eec227bc/attachment.html>

From spethm at landcareresearch.co.nz  Wed Nov 23 13:13:29 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Thu, 24 Nov 2011 10:13:29 +1300
Subject: [Proj] Using jniwrap
In-Reply-To: <4ECD5EC3.3020601@geomatys.fr>
References: <4ECC52F3.60001@landcareresearch.co.nz>
	<4ECD59BF.4070703@landcareresearch.co.nz>
	<4ECD5EC3.3020601@geomatys.fr>
Message-ID: <4ECD61F9.2040101@landcareresearch.co.nz>

Thanks Martin,
   I didn't know the wrapper expected degrees.  The proj command that I 
am using I think is taking coordinates from a unit sphere and projecting 
with the HEALPix projection (I am currently working on this projection 
and will provide a patch to Frank).  It doesn't read data from a file.

So I would like to replicate this using the jniwrap for my own testing 
purposes.  Can this be done?

Thanks

On 24/11/11 09:59, Martin Desruisseaux wrote:
> Hello Michael
>
> Le 23/11/11 21:38, Michael Speth a écrit :
>> I was able to use the jar without issue after compiling with make 
>> install (had to do a make clean first).  My next question is how do I 
>> use the tool?
>> The command that I have been using with the proj binary is:
>> proj +proj=healpix -f '%.'17'f' +lon_0=0 +a=1 -E
>
> I'm not quite familiar with the proj command-line. If the above was 
> reading data from a file, in Java the developers need to read the file 
> themselves. The PJ Java class just wraps the PJ C/C++ data structure, 
> which (I think) is not the place where "proj" command-line performs 
> file reading...
>
>> I'm not sure what sourcePJ should be in the following example
>>
>>         PJ sourcePJ = new PJ("+a=1 +lon_0=0");
>
> If the "+a=1 +lon_0=0" parameters were accepted by the "proj" 
> command-line, I think they will be accepted by the PJ Java class since 
> it just pass that parameter verbatim to the C library.
>
> The only difference between the C library and the Java wrapper is that 
> the Java wrappers expect angles in degrees, while the C library 
> expects angles in radians. The Java wrappers perform the "radians to 
> degrees" conversions themselves because we have more information on 
> the C/C++ side about whatever such conversion is needed or not (it 
> depends if the PJ are geographic or geocentric or projected CRS).
>
> Javadoc is there: 
> http://www.geoapi.org/geoapi-proj4/apidocs/org/proj4/PJ.html
>
>     Martin
>


-- 
Michael Speth
Research Systems Developer
Landcare Research

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111124/4b07cc9a/attachment.html>

From martin.desruisseaux at geomatys.fr  Wed Nov 23 13:33:35 2011
From: martin.desruisseaux at geomatys.fr (Martin Desruisseaux)
Date: Wed, 23 Nov 2011 22:33:35 +0100
Subject: [Proj] Using jniwrap
In-Reply-To: <4ECD61F9.2040101@landcareresearch.co.nz>
References: <4ECC52F3.60001@landcareresearch.co.nz>
	<4ECD59BF.4070703@landcareresearch.co.nz>
	<4ECD5EC3.3020601@geomatys.fr>
	<4ECD61F9.2040101@landcareresearch.co.nz>
Message-ID: <4ECD66AF.5000907@geomatys.fr>

Le 23/11/11 22:13, Michael Speth a écrit :
> The proj command that I am using I think is taking coordinates from a unit 
> sphere and projecting with the HEALPix projection (I am currently working on 
> this projection and will provide a patch to Frank).  It doesn't read data from 
> a file.
>
> So I would like to replicate this using the jniwrap for my own testing 
> purposes.  Can this be done?

It should, I'm not sure to understand which issue you are facing... The code 
posted in your previous email should work. Do you get an exception or unexpected 
result?

     Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111123/25392abc/attachment.html>

From spethm at landcareresearch.co.nz  Wed Nov 23 13:42:34 2011
From: spethm at landcareresearch.co.nz (Michael Speth)
Date: Thu, 24 Nov 2011 10:42:34 +1300
Subject: [Proj] Using jniwrap
In-Reply-To: <4ECD66AF.5000907@geomatys.fr>
References: <4ECC52F3.60001@landcareresearch.co.nz>
	<4ECD59BF.4070703@landcareresearch.co.nz>	<4ECD5EC3.3020601@geomatys.fr>
	<4ECD61F9.2040101@landcareresearch.co.nz>
	<4ECD66AF.5000907@geomatys.fr>
Message-ID: <4ECD68CA.3050309@landcareresearch.co.nz>

I get the following error:

[output]
Exception in thread "main" java.lang.IllegalArgumentException: +a=1 +lon_0=0
     at org.proj4.PJ.<init>(Unknown Source)
     at 
org.landcare.scenzgrid.proj4.test.HEALPixTest.main(HEALPixTest.java:32)
[/output]

[code]
     double phi0 = Math.asin(2.0/3.0);
     PJ sourcePJ = new PJ("+a=1 +lon_0=0");           // (x,y) axis order
     PJ targetPJ = new PJ("+proj=healpix"); // (?,?) axis order
     double[] coordinates = {
         0, 0,   // First coordinate
         0, phi0,   // Second coordinate
         0, -1*phi0    // Third coordinate
     };
     sourcePJ.transform(targetPJ, 2, coordinates, 0, 3);
     System.out.println(Arrays.toString(coordinates));
[/code]

Thanks



On 24/11/11 10:33, Martin Desruisseaux wrote:
> Le 23/11/11 22:13, Michael Speth a écrit :
>> The proj command that I am using I think is taking coordinates from a 
>> unit sphere and projecting with the HEALPix projection (I am 
>> currently working on this projection and will provide a patch to 
>> Frank).  It doesn't read data from a file.
>>
>> So I would like to replicate this using the jniwrap for my own 
>> testing purposes.  Can this be done?
>
> It should, I'm not sure to understand which issue you are facing... 
> The code posted in your previous email should work. Do you get an 
> exception or unexpected result?
>
>     Martin
>


-- 
Michael Speth
Research Systems Developer
Landcare Research

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111124/2c3efb01/attachment.html>

From martin.desruisseaux at geomatys.fr  Wed Nov 23 13:55:18 2011
From: martin.desruisseaux at geomatys.fr (Martin Desruisseaux)
Date: Wed, 23 Nov 2011 22:55:18 +0100
Subject: [Proj] Using jniwrap
In-Reply-To: <4ECD68CA.3050309@landcareresearch.co.nz>
References: <4ECC52F3.60001@landcareresearch.co.nz>
	<4ECD59BF.4070703@landcareresearch.co.nz>	<4ECD5EC3.3020601@geomatys.fr>
	<4ECD61F9.2040101@landcareresearch.co.nz>
	<4ECD66AF.5000907@geomatys.fr>
	<4ECD68CA.3050309@landcareresearch.co.nz>
Message-ID: <4ECD6BC6.1040909@geomatys.fr>

Le 23/11/11 22:42, Michael Speth a écrit :
> I get the following error:
>
> Exception in thread "main" java.lang.IllegalArgumentException: +a=1 +lon_0=0

I suggest to try "+proj=latlong +a=1 +lon_0=0"

     Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/proj/attachments/20111123/e88bd8cc/attachment.html>

From fyw at wwwtools.com  Fri Nov 25 19:41:58 2011
From: fyw at wwwtools.com (Frank Willett)
Date: Fri, 25 Nov 2011 20:41:58 -0700
Subject: [Proj] proj.4 problems
Message-ID: <D5B47CE3-D1FC-464B-9597-331D526757BA@wwwtools.com>

Hi All,

I have been testing proj.4 version 4.7.0 and have a few problems. I thought
I would submit them to the mailing list first for comments before submitting
them as bugs. Please let me know if you have a solution to any of these that
do not require modifying the source code.

For the problems at the origin, I ran the problem at 0,0 and 1,1 which is one
unit offset in X and Y.

aitoff - aitoff projection says it has an inverse but it doesn't.
         Modified pj_aitoff.c to set no inv.
         
alsk - Compute LL from XY is wrong at the origin long/lat (-152,64)
       $ proj +proj=alsk -I
       >0 0
       56dE    64dN
       >1 1
       151d59'59.926"W 64d0'0.032"N
         

gs48 - 1) The origin of the projection is at long/lat -96,-39 and it should
          be at -96,+39
          Modified pj_mod_ster.c to change the sign on phi0 for the gs48 projection
          2) Origin problem
          $ proj +proj=gs48  -I
          >0 0
          168dE   39dN
          >1 1
          95d59'59.958"W  39d11'17.79"N

gs50 - Origin problem
       $ proj +proj=gs50 -I
       >0 0
       120dE   45dN
       >1 1
       119d59'59.954"W 45d0'0.033"N
       
imw_p - Origin problem
        $ proj +proj=imw_p +lat_1=2 +lat_2=6 +lon_1=0 -I
        >0 0
        -2147483648d-2147483648'nan"E   -2147483648d-2147483648'nan"N
        >1 1
        0d0'0.032"E     2d0'0.033"N             
       
lee_os - 1) Got an email that the value of A is wrong 
                Changed from -0.0088162 to -0.00881625 (more accuracy)
            2) Origin problem
            $ proj +proj=lee_os -I
            >0 0
            30dE    10dS
            >1 1
            164d59'59.954"W 10d3'57.623"S         
                
mil_os - Origin problem.
         $ proj +proj=mil_os -I
         >0 0
         40dE    18dN
         >1 1
         20d0'0.037"E    18d6'48.274"N  
         

pconic - Origin problem.
         $ proj +proj=pconic +lat_1=0 +lat_2=10
         >0 0
         0.00    555891.27

         $ proj +proj=pconic +lat_1=0 +lat_2=10 -I
         >0 0
         0dE     0dS
         >0 555891.27
         0dE     5dN           
               
putp3p - Has the no inv. flag set but the inverse does exist
             Removed the no inv. flag from putp3p .. inverse seems to work
         
tissot - Origin problem
         $ proj +proj=tissot +lat_1=0 +lat_2=10
         >0 0
         0.00    -139902.82

         $ proj +proj=tissot +lat_1=0 +lat_2=10 -I
         >0 0
         0dE     1d15'24.366"N
         >0 -139902.82
         0dE     0dN         

wintri - wintri projection says it has an inverse but it doesn't.
         Modified pj_aitoff.c to set no inv.
         
 Frank Willett (fyw at wwwtools.com)
        

